/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff4310.olap.impl"],function(e){"use strict";e.QInAComponent=function(){};e.QInAComponent.prototype=new e.XObject;e.QInAComponent.prototype._ff_c="QInAComponent";e.QInAComponent.prototype.getModelFormat=function(){return null};e.QInAComponent.prototype.isMatching=function(e){return true};e.QInAComponent.prototype.getName=function(){return this.getComponentType().getName()};e.QInAComponent.prototype.getTagName=function(){return null};e.QInAComponent.prototype.toString=function(){return this.getName()};e.QInAExportUtil={extendStructure:function(t,r,i){if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var n=r.getTagging();if(e.XCollectionUtils.hasElements(n)){var o=n.getKeysAsReadOnlyListOfString();var a=i.putNewList("ComponentTags");for(var l=0;l<o.size();l++){var p=o.get(l);var s=n.getByKey(p);var u=e.PrFactory.createStructure();a.add(u);u.putString("KEY",p);if(e.isNull(s)){u.putNull("VALUE")}else{u.putString("VALUE",s)}}}}return i},extendList:function(e,t){return t},setDate:function(t,r,i,n){if(e.notNull(n)){r.putString(i,e.QInAExportUtil.dateTimeToString(t,n))}},isNumberSafe:function(t){return e.XMath.abs(t)<9007199254740992},setNonEmptyString:function(t,r,i){if(e.XStringUtils.isNotNullAndNotEmpty(i)){t.putString(r,i)}},setNameIfNotNull:function(t,r,i){if(e.notNull(i)){t.putString(r,i.getName())}},setIntegerIfNotNull:function(t,r,i){if(e.notNull(i)){t.putInteger(r,i.getInteger())}},dateTimeToString:function(e,t){return e.capabilities.supportsSapDate()?t.toSAPFormat():t.toIsoFormat()},getAccountDimensionMemberNameByAlias:function(t,r,i){if((i.getMode().isTypeOf(e.QModelFormat.INA_DATA)||i.mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP))&&e.notNull(t)){var n=t.getConvenienceCommands().getAccountDimensionMemberNameByAlias(t,r);if(e.notNull(n)){return n}}return r},getMeasureMemberNameByAlias:function(t,r,i){var n=r;if((i.getMode().isTypeOf(e.QModelFormat.INA_DATA)||i.mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP))&&e.notNull(t)){var o=t.getQueryManager();if(o.getMode()===e.QueryManagerMode.BLENDING){var a=o.getQueryModel().getBlendingSources();for(var l=0;l<a.size();l++){var p=a.get(l);var s=e.XStringUtils.concatenate2(p.getQueryAliasName(),".");if(e.XString.startsWith(r,s)){var u=e.XString.replace(r,s,"");var g=p.getQueryModel();var y=e.QInAExportUtil.getMeasureMemberNameByAlias(g,u,i);if(e.notNull(y)){if(e.XString.containsString(r,s)){y=e.XStringUtils.concatenate2(s,y)}return y}}}}else{var m=t.getConvenienceCommands().getMeasureMemberNameByAlias(t,r);if(e.notNull(m)){n=m}if(i.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&t.getDimensionByType(e.DimensionType.ACCOUNT)!==null&&e.notNull(n)){var c=t.getAccountDimension();var S;var A;var d;if(e.XString.startsWith(n,e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX)){S=e.XStringUtils.concatenate3("[",c.getName(),"].[");A=c.getHierarchyName()!==null?c.getHierarchyName():c.getDefaultHierarchyName();d=e.XStringUtils.concatenate3(S,A,"].&[");n=e.XStringUtils.concatenate3(d,n,"]")}}}}return n},isFormulaCalculatedDimensionHidden:function(t){if(e.notNull(t)&&t.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)){var r=t;return r.isHidden()}return false},exportComponentExtensions:function(t,r,i){if(e.isNull(r)||!r.isStructure()||e.isNull(i)||!i.canHaveExtensions()){return}var n=r;var o=i;var a=o.getExtensions();if(!a.hasElements()){return}var l=n.putNewStructure("Extensions");var p=a.getKeysAsIteratorOfString();while(p.hasNext()){var s=p.next();var u=a.getByKey(s);l.putString(s,u)}}};e.QInAImportUtil={importComponentTagging:function(t,r,i){if(e.notNull(r)){if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&r.isStructure()&&e.notNull(i)){var n=r;var o=n.getListByKey("ComponentTags");if(!e.PrUtils.isListEmpty(o)){var a=i.getTagging();for(var l=0;l<o.size();l++){var p=o.getStructureAt(l);if(e.notNull(p)){var s=p.getStringByKey("KEY");if(e.XStringUtils.isNotNullAndNotEmpty(s)){a.put(s,p.getStringByKey("VALUE"))}}}}}}},importComponentExtensions:function(t,r,i){if(e.isNull(r)||!r.isStructure()||e.isNull(i)||!i.canHaveExtensions()||!t.getMode().isTypeOf(e.QModelFormat.INA_METADATA_CORE)){return}var n=r;var o=n.getStructureByKey("Extensions");if(!e.XCollectionUtils.hasElements(o)){return}var a=e.XHashMapOfStringByString.create();var l=o.getKeysAsReadOnlyListOfString();for(var p=0;p<l.size();p++){var s=l.get(p);var u=o.getStringByKey(s);if(e.isNull(u)){continue}a.put(s,u)}i.setExtensions(a)}};e.QInAValueUtils={importValueByType:function(t,r,i,n){return e.QInAValueUtils._importValueInternal(t,null,r,i,n,null,true)},importSupplementsAndValue:function(t,r,i,n,o,a){e.QInAValueUtils.importValue(t,r,i,n,o,a);var l=i.getListByKey("Supplements");if(e.notNull(l)&&l.hasElements()){var p=l.size();for(var s=0;s<p;s++){var u=l.getStructureAt(s);var g=u.getByKey("Key");var y=u.getByKey("Value");var m=e.QInAValueUtils.correctRemovingUnwantedBackslashAndQuotes(g.getString());var c=e.QInAValueUtils.correctRemovingUnwantedBackslashAndQuotes(y.getString());r.addSupplementValue(m,c)}}},containsEscapedQuote:function(t){return e.XStringUtils.isNotNullAndNotEmpty(t)&&(e.XString.getCharAt(t,0)===92||e.XString.getCharAt(t,0)===34)&&(e.XString.getCharAt(t,e.XString.size(t)-1)===92||e.XString.getCharAt(t,e.XString.size(t)-1)===34)},correctRemovingUnwantedBackslashAndQuotes:function(t){var r=t;while(e.QInAValueUtils.containsEscapedQuote(r)){r=e.XStringUtils.stripChars(r,1)}return r},importValue:function(t,r,i,n,o,a){e.QInAValueUtils._importValueInternal(t,r,i,n,o,a,false)},getDouble:function(t,r){var i;var n=t.getByKey(r);if(n.isString()){var o=n.getString();i=e.XDouble.convertFromString(o)}else if(n.isDouble()){i=n.getDouble()}else if(n.isInteger()){i=n.getInteger()}else{i=0}return i},_importValueInternal:function(t,r,i,n,o,a,l){var p=t.capabilities.supportsSapDate();var s=e.PrUtils.getBooleanValueProperty(i,"FieldLiteralValue",false);var u=n;if(e.isNull(u)){u="Value"}var g=!l&&e.notNull(a)&&s;var y=g?a.getValueType():o;if(e.isNull(y)){var m=i.getStringByKey(e.XStringUtils.concatenate2(u,"Type"));y=e.QInAConverter.lookupValueType(m);p=false}if((y===e.XValueType.DOUBLE||y===e.XValueType.DECIMAL_FLOAT)&&i.hasStringByKey(u)){y=e.XValueType.STRING}var c;var S;if(y===e.XValueType.STRING){S=i.getStringByKey(u);if(l){return e.XStringValue.create(S)}if(e.isNull(a)||!s){r.setString(S)}else{var A=a.getDimension();var d=A.getDimensionMember(S);if(A.isStructure()&&e.notNull(d)){r.setDimensionMember(d)}else{c=a.createFieldLiteralValue();c.setString(S);r.setFieldValue(c)}}}else if(y===e.XValueType.DOUBLE||y===e.XValueType.DECIMAL_FLOAT){var I=e.QInAValueUtils.getDouble(i,u);if(l){return e.XDoubleValue.create(I)}if(e.isNull(a)||!s){r.setDouble(I)}else{c=a.createFieldLiteralValue();c.setDouble(I);r.setFieldValue(c)}}else if(y===e.XValueType.INTEGER){var f=i.getIntegerByKey(u);if(l){return e.XIntegerValue.create(f)}if(e.isNull(a)||!s){r.setInteger(f)}else{c=a.createFieldLiteralValue();c.setInteger(f);r.setFieldValue(c)}}else if(y===e.XValueType.BOOLEAN){var N=i.getBooleanByKey(u);if(l){return e.XBooleanValue.create(N)}r.setBoolean(N)}else if(y===e.XValueType.LONG){var v=e.PrUtils.getLongValueProperty(i,u,0);if(l){return e.XLongValue.create(v)}if(e.isNull(a)||!s){r.setLong(v)}else{c=a.createFieldLiteralValue();c.setLong(v);r.setFieldValue(c)}}else if(y===e.XValueType.DATE){S=i.getStringByKey(u);var T=e.XDate.createDateFromStringWithFlag(S,p);if(l){return T}if(e.isNull(a)||!s){r.setDate(T)}else{c=a.createFieldLiteralValue();c.setDate(T);r.setFieldValue(c)}}else if(y===e.XValueType.TIME){S=i.getStringByKey(u);var R=e.XTime.createTimeFromStringWithFlag(S,p);if(l){return R}r.setTime(R)}else if(y===e.XValueType.DATE_TIME){S=i.getStringByKey(u);var E=e.XDateTime.createDateTimeFromStringWithFlag(S,p);if(l){return E}if(e.isNull(a)||!s){r.setDateTime(E)}else{c=a.createFieldLiteralValue();c.setDate(E);r.setFieldValue(c)}}else if(y.isSpatial()){S=i.getStringByKey(u);var C=e.XGeometryValue.createGeometryValueWithWkt(S);if(l){return C}r.setValue(C);if(t.capabilities.supportsSpatialFilterSrid()&&i.containsKey("SRID")){r.getGeometry().setSrid(e.XIntegerValue.create(i.getIntegerByKey("SRID")))}}else if(y===e.XValueType.UNSUPPORTED){return null}else if(y===e.XValueType.VARIABLE||y===e.XValueType.CURRENT_MEMBER){if(!l){r.setFilterValueType(y)}return null}else{t.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Unsupported value type '",y.getName(),"'"));return null}return null},exportValue:function(t,r,i,n,o,a){e.QInAValueUtils.exportFieldValue(t,r,i,null,n,o)},exportPlaceholderValue:function(t,r,i,n,o,a){var l=n;if(o===e.XValueType.STRING||n.getValueType()===e.XValueType.STRING){var p=e.QInAExportUtil.getMeasureMemberNameByAlias(a,n.getString(),t);if(!e.XString.isEqual(p,n.getString())){var s=e.XValueAccess.createWithType(e.XValueType.STRING);s.setString(p);l=s}}e.QInAValueUtils.exportFieldValue(t,r,i,null,l,o)},exportFieldValue:function(t,r,i,n,o,a){var l=r;if(e.isNull(l)){l="Value"}var p=a;if(e.isNull(p)){p=o.getValueType();var s=e.QInAConverter.lookupValueTypeInA(p);i.putString(e.XStringUtils.concatenate2(l,"Type"),s);t.capabilities.setSupportsSapDate(false)}var u=o.getValueType();if(u===e.XValueType.DATE||u===e.XValueType.TIME||u===e.XValueType.DATE_TIME){p=u}if(p===e.XValueType.STRING){i.putString(l,o.getString())}else if(p===e.XValueType.INTEGER){i.putInteger(l,o.getInteger())}else if(p===e.XValueType.LONG){i.putLong(l,o.getLong())}else if(p===e.XValueType.DOUBLE||p===e.XValueType.DECIMAL_FLOAT){if(o.getValueType()===e.XValueType.STRING||t.capabilities.supportsStringsForNumericValues()){i.putString(l,o.getString())}else{i.putDouble(l,o.getDouble())}}else if(p===e.XValueType.BOOLEAN){i.putBoolean(l,o.getBoolean())}else if(p===e.XValueType.DATE){var g=e.XValueUtil.convertValue(o.getValue(),e.XValueType.DATE);if(e.notNull(g)){e.QInAExportUtil.setDate(t,i,l,g)}else{i.putStringNotNull(l,o.getString())}}else if(p===e.XValueType.TIME){var y=e.XValueUtil.convertValue(o.getValue(),e.XValueType.TIME);if(e.notNull(y)){e.QInAExportUtil.setDate(t,i,l,y)}else{i.putStringNotNull(l,o.getString())}}else if(p===e.XValueType.DATE_TIME){var m=e.XValueUtil.convertValue(o.getValue(),e.XValueType.DATE_TIME);if(e.notNull(m)){e.QInAExportUtil.setDate(t,i,l,m)}else{i.putStringNotNull(l,o.getString())}}if(e.notNull(p)&&p.isSpatial()){var c=o.getGeometry();i.putString(l,c.toWKT());var S=c.getSrid();if(t.capabilities.supportsSpatialFilterSrid()&&e.notNull(S)){i.putInteger("SRID",S.getInteger())}}if(e.notNull(n)){i.putBoolean("FieldLiteralValue",true)}},exportSupplementsAndValue:function(t,r,i,n,o,a){e.QInAValueUtils.exportFieldValue(t,r,i,n,o,a);var l=o.getSupplementValues();if(e.XCollectionUtils.hasElements(l)){var p=i.putNewList("Supplements");var s=l.size();for(var u=0;u<s;u++){var g=p.addNewStructure();var y=l.get(u);g.putString("Key",y.getKey().toString());g.putString("Value",y.getValue().toString())}}},exportFilterValue:function(t,r,i,n,o){if(o===e.XValueType.VARIABLE){var a=n.getVariableValue();if(e.notNull(a)){i.putString(r,a.getName());if(e.XString.isEqual(r,"Low")){i.putString("LowIs","Variable")}else if(e.XString.isEqual(r,"High")){i.putString("HighIs","Variable")}}}else{e.QInAValueUtils.exportPlaceholderValue(t,r,i,n,o,n.getQueryModel())}},importSupplements:function(t,r,i,n,o){if(t.capabilities.supportsSupplements()&&e.notNull(n)&&e.XCollectionUtils.hasElements(o)){var a=i.getListByKey(n);if(e.notNull(a)){var l=a.size();var p=o.size();if(l===p){for(var s=0;s<l;s++){r.addSupplementValue(o.get(s),a.getStringAt(s))}}else{t.addWarning(e.ErrorCodes.INVALID_STATE,"InA protocol error: Supplement sizes of values and field names do not match.")}}}},importValueCompounds:function(t,r,i,n){if(e.notNull(n)){var o=i.getListByKey(n);if(e.notNull(o)){for(var a=0;a<o.size();a++){var l=o.getStructureAt(a);var p=r.addNewFilterValueCompound(l.getBooleanByKey("Internal"));var s=l.getListByKey("Members");if(e.notNull(s)){for(var u=0;u<s.size();u++){var g=s.getStructureAt(u);p.addMember(g.getStringByKey("Component"),g.getStringByKey("Key"))}}}}}},importValueList:function(t,r,i){if(e.notNull(r)){if(i.isNumber()){return e.QInAValueUtils.importNumericValues(t,r,i)}if(i.isString()){return e.QInAValueUtils.importStringValues(r)}if(i===e.XValueType.DATE){return e.QInAValueUtils.importDateValues(t,r)}if(i===e.XValueType.TIME){return e.QInAValueUtils.importTimeValues(t,r)}if(i===e.XValueType.DATE_TIME){return e.QInAValueUtils.importDateTimeValues(t,r)}if(i===e.XValueType.BOOLEAN){return e.QInAValueUtils.importBooleanValues(r)}}return e.XList.create()},importNumericValues:function(t,r,i){var n=e.XList.create();for(var o=0;o<r.size();o++){var a=r.get(o);if(t.capabilities.supportsNumberAsString()&&e.notNull(a)&&a.getType()===e.PrElementType.STRING){var l=e.XValueAccess.createWithType(i);l.parseString(r.getStringAt(o));n.add(l.getValue());continue}if(i===e.XValueType.INTEGER){var p=r.getIntegerAt(o);n.add(e.XIntegerValue.create(p))}else if(i===e.XValueType.DOUBLE||i===e.XValueType.DECIMAL_FLOAT){var s=r.getDoubleAt(o);n.add(e.XDoubleValue.create(s))}else if(i===e.XValueType.LONG){var u=r.getLongAt(o);n.add(e.XLongValue.create(u))}}return n},importDateTimeValues:function(t,r){var i=e.XList.create();for(var n=0;n<r.size();n++){var o=r.getStringAt(n);if(e.XStringUtils.isNotNullAndNotEmpty(o)){e.XCollectionUtils.addIfNotNull(i,e.XDateTime.createDateTimeFromStringWithFlag(o,t.capabilities.supportsSapDate()))}}return i},importTimeValues:function(t,r){var i=e.XList.create();for(var n=0;n<r.size();n++){var o=r.getStringAt(n);if(e.XStringUtils.isNotNullAndNotEmpty(o)){e.XCollectionUtils.addIfNotNull(i,e.XTime.createTimeFromStringWithFlag(o,t.capabilities.supportsSapDate()))}}return i},importDateValues:function(t,r){var i=e.XList.create();for(var n=0;n<r.size();n++){var o=r.getStringAt(n);if(e.XStringUtils.isNotNullAndNotEmpty(o)){e.XCollectionUtils.addIfNotNull(i,e.XDate.createDateFromStringWithFlag(o,t.capabilities.supportsSapDate()))}}return i},importStringValues:function(t){var r=e.XList.create();for(var i=0;i<t.size();i++){r.add(e.XStringValue.create(t.getStringAt(i)))}return r},importBooleanValues:function(t){var r=e.XList.create();for(var i=0;i<t.size();i++){r.add(e.XBooleanValue.create(t.getBooleanAt(i)))}return r}};e.QInARepoDataSourceBlending={exportDataSourceBlending:function(t,r,i){var n=e.PrFactory.createStructure();var o=n.putNewStructure("Metadata");var a=o.putNewStructure("DataSource");a.putString("Type",e.QueryManagerMode.BLENDING.getName());var l=e.XStringBuffer.create();for(var p=0;p<r.getSources().size();p++){l.append(r.getSources().get(p).getQueryAliasName())}var s=l.toString();if(l.length()>=256){s=e.XSha1.createSHA1(s)}a.putString("ObjectName",s);var u=e.QInARepoDataSourceBlending.exportBlendingSources(t,r,i);a.put("Sources",u);var g=e.QInARepoDataSourceBlending.exportBlendingMappings(r.getMappings());a.put("Mappings",g);return a},exportBlendingSources:function(t,r,i){var n=t;var o=e.PrFactory.createList();var a=r.getSources().getIterator();while(a.hasNext()){var l=a.next();var p=l.getQueryModel();if(e.isNull(p)){return null}var s=o.addNewStructure();s.putString("Type","Query");s.putString("AliasName",l.getQueryAliasName());s.putString("ObjectName",l.getQueryAliasName());var u=s.putNewStructure("DefiningContext");var g=p.serializeToElement(n).asStructure();e.QInARepoDataSourceBlending.exportOptimizerHints(g,p.getOptimizerHintsByExecutionEngine(e.ExecutionEngine.MDS));var y=p.getQueryManager();var m=y.getResultSetPersistenceIdentifier();if(!l.isRemoteSource()&&e.XStringUtils.isNotNullAndNotEmpty(m)&&i){g.getStructureByKey("DataSource").putString("InstanceId",m)}var c=e.QInARepoDataSourceBlending.exportResultSetFeatures(p,true);g.put("ResultSetFeatureRequest",c);u.put("Definition",g)}e.XObjectExt.release(a);return o},updateRemoteDataSource:function(t,r,i,n){var o=t.putNewStructure("DataSource");o.putString("Type","SerializedData");o.putString("InstanceId",r.getResultSetPersistenceIdentifier());var a=r.getActiveResultSetContainer();var l=r.getSystemDescription();var p=e.XStringUtils.isNotNullAndNotEmpty(a.getSerializedView())&&(!i||e.XStringUtils.isNotNullAndNotEmpty(a.getSerializedCube()));if(!p&&n.isSystemMappingValid(l)){var s=l.getSystemMapping(n.getSystemName());o.putString("ObjectName",s.getDeserializeTable());o.putString("SchemaName",s.getDeserializeSchema())}else{var u=o.putNewStructure("SerializedData");u.putString("View",a.getSerializedView());if(i){u.putStringNotNullAndNotEmpty("Cube",a.getSerializedCube())}}e.QInARepoDataSourceBlending.updateBWRemoteSource(t,r.getSystemType(),r.getQueryModel())},exportOptimizerHints:function(t,r){if(e.XCollectionUtils.hasElements(r)){var i=r.getKeysAsReadOnlyListOfString();i.sortByDirection(e.XSortDirection.ASCENDING);var n=t.putNewStructure("Hints");var o=n.putNewList(e.ExecutionEngine.MDS.getName());var a=i.size();for(var l=0;l<a;l++){var p=i.get(l);var s=o.addNewStructure();s.putString("Key",p);s.putString("Value",r.getByKey(p))}}},updateBWRemoteSource:function(t,r,i){if(r.isTypeOf(e.SystemType.BW)||r.isTypeOf(e.SystemType.VIRTUAL_INA)){t.remove("FixedFilter");t.remove("DynamicFilter");t.remove("Filter");t.remove("Conditions");t.remove("Query");t.remove("QueryDataCells");t.remove("Sort");t.remove("ExtendedSortTypes");t.remove("Variables");t.remove("UniversalDisplayHierarchies");var n=e.QInARepoDataSourceBlending.getExtendedStructureMemberNames(i);var o=t.getListByKey("Dimensions");var a=e.PrUtils.getListSize(o,0);for(var l=0;l<a;l++){var p=o.getStructureAt(l).getListByKey("Members");var s=e.PrUtils.getListSize(p,0);for(var u=0;u<s;u++){var g=p.getStructureAt(u);if(n.contains(g.getStringByKey("Name"))){g.remove("Selection")}}}}},getExtendedStructureMemberNames:function(t){var r=t.getMeasureDimension().getExtendedStructureMembers();return e.XCollectionUtils.createListOfNames(r)},exportResultSetFeatures:function(t,r){var i=e.PrFactory.createStructure();i.putBoolean("UseDefaultAttributeKey",false);var n=t.getQueryManager();if(n.getMaxResultRecords()!==-1){i.putLong("MaxResultRecords",n.getMaxResultRecords())}e.QInARepoOptions.exportPaging(i,n);e.QInARepoOptions.exportSuppressKeyfigureCalculation(i,n);i.putString("ResultFormat","Version2");i.putString("ResultEncoding","None");if(r){i.putBoolean("IsCubeBlendingSubquery",true)}if(!n.isResultSetTransportEnabled()){i.putBoolean("ReturnEmptyJsonResultSet",true)}return i},exportDimensionMapping:function(t){var r=e.PrFactory.createStructure();r.putString("DimensionName",t.getMemberName());r.putString("LinkType",t.getLinkType().getName());if(t.isPreservingMembers()){r.putBoolean("PreserveMembers",true)}if(!t.isReturningOriginKeys()){r.putBoolean("ReturnOriginKeys",false)}var i=t.getMappingDefinitions().getIterator();var n=e.QInARepoDataSourceBlending.exportMappingDefinitions(i);e.XObjectExt.release(i);r.put("Mapping",n);if((t.getLinkType()===e.BlendingLinkType.ALL_DATA||t.getLinkType()===e.BlendingLinkType.NONE)&&t.getConstantMappings().hasElements()){e.QInARepoDataSourceBlending.exportConstantMapping(n,t.getConstantMappings().getIterator())}var o=e.PrFactory.createList();var a=t.getAttributeMappings().getIterator();while(a.hasNext()){var l=a.next();var p=e.QInARepoDataSourceBlending.exportAttributeMapping(l);o.add(p)}e.XObjectExt.release(a);if(!o.isEmpty()){r.put("AttributeMappings",o)}return r},exportAttributeMapping:function(t){var r=e.PrFactory.createStructure();r.putString("AttributeName",t.getAttributeName());r.putBoolean("IsLinkKey",t.isLinkKey());var i=t.getAttributeMappingDefinitions().getIterator();var n=e.QInARepoDataSourceBlending.exportMappingDefinitions(i);e.XObjectExt.release(i);r.put("Mapping",n);e.QInARepoDataSourceBlending.exportConstantMapping(n,t.getConstantMappings().getIterator());return r},exportConstantMapping:function(t,r){while(r.hasNext()){var i=r.next();var n=e.PrFactory.createStructure();n.putString("AliasName",i.getQueryAliasName());var o=n.putNewStructure("MappingDefinition");var a=o.putNewStructure("Constant");a.putString("Value",i.getMemberName());a.putString("ValueType",e.QInAConverter.lookupValueTypeInA(i.getValueType()));t.add(n)}},exportMappingDefinitions:function(t){var r=e.PrFactory.createList();while(t.hasNext()){var i=t.next();var n=r.addNewStructure();n.putString("AliasName",i.getQueryAliasName());var o=n.putNewStructure("MappingDefinition");var a=o.putNewStructure("Member");a.putString("Name",i.getMemberName())}return r},exportBlendingMappings:function(t){var r=e.PrFactory.createList();var i=t.getIterator();while(i.hasNext()){var n=i.next();var o=e.QInARepoDataSourceBlending.exportDimensionMapping(n);r.add(o)}return r}};e.QInARepoDataSourceExtDims={importQd:function(t,r,i){if(t.capabilities.supportsExtendedDimensions()){var n=r.getExtendedDimensionsBase();n.clear();var o=i.getListByKey("ExtendedDimensions");if(e.notNull(o)){var a=o.size();for(var l=0;l<a;l++){var p=o.getStructureAt(l);var s=p.getStringByKey("Name");var u=p.getStringByKey("JoinFieldName");var g=p.getStringByKey("JoinFieldNameInExtendedDimension");var y=r.addNewExtendedDimension(s,u,g);y.setText(p.getStringByKey("Description"));var m=p.getStringByKey("JoinType");var c=e.JoinType.lookup(m);y.setJoinType(c);e.QInARepoDataSourceExtDims.importJoinParameter(p,y);e.QInARepoDataSourceExtDims.importExtendedDataSource(p,y);var S=p.getStringByKey("FieldRenamingMode");if(e.notNull(S)){y.setRenamingMode(S)}var A=p.getStringByKey("JoinCardinality");if(e.XStringUtils.isNotNullAndNotEmpty(A)){var d=e.JoinCardinality.lookup(A);y.setJoinCardinality(d)}var I=p.getStringByKey("Visibility");if(e.XStringUtils.isNotNullAndNotEmpty(I)){var f=e.DimensionVisibility.lookup(I);if(e.notNull(f)){y.setVisibility(f)}}}}}},importExtendedDataSource:function(t,r){var i=t.getStructureByKey("DataSource");if(e.notNull(i)){var n=e.QFactory.createDataSource();e.QInARepoDataSourceProperties.importQd(n,i);var o;var a=i.getStringByKey("Type");if(e.isNull(a)){o=e.MetaObjectType.DBVIEW}else{o=e.MetaObjectType.lookup(e.XString.toLowerCase(a))}n.setType(o);r.setDataSource(n)}},importJoinParameter:function(t,r){var i=t.getListByKey("JoinParameters");if(e.notNull(i)){var n=r.getJoinParameters();n.clear();var o=i.size();for(var a=0;a<o;a++){n.add(i.getStringAt(a))}}},checkIsValid:function(t,r){var i=r.getJoinType();if(e.isNull(i)){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",r.getName(),"' is missing a JoinType"));return false}var n=r.getDimensionType();if(n.isTypeOf(e.DimensionType.GIS_DIMENSION)&&i.isTypeOf(e.JoinType._TIME)){t.addError(e.ErrorCodes.INVALID_PARAMETER,"Spatial extended dimensions must not have join type INNER");return false}else if((n.isTypeOf(e.DimensionType.TIME)||n.isTypeOf(e.DimensionType.DATE))&&i.isTypeOf(e.JoinType._SPATIAL)){t.addError(e.ErrorCodes.INVALID_PARAMETER,"Time extended dimensions must not have spatial join type");return false}var o=r.getDataSource();if(e.isNull(o)){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",r.getName(),"' is missing its DataSource"));return false}var a=r.getJoinParameters();if(i===e.JoinType.WITHIN_DISTANCE&&a.isEmpty()){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",r.getName(),"' of joinType 'WITHIN_DISTANCE' is expected to have the 2 parameters 'distance' and 'unit of measure' (in that order)"));return false}return true},exportQd:function(t,r,i){var n=r.getExtendedDimensions();if(e.XCollectionUtils.hasElements(n)){var o=i.putNewList("ExtendedDimensions");for(var a=0;a<n.size();a++){var l=n.get(a);if(!e.QInARepoDataSourceExtDims.checkIsValid(t,l)){return}var p=o.addNewStructure();p.putString("Name",l.getName());p.putString("Description",l.getText());p.putInteger("DimensionType",e.QInAConverter.lookupDimensionTypeInA(l.getDimensionType()));p.putString("JoinFieldName",l.getJoinField());p.putString("JoinFieldNameInExtendedDimension",l.getJoinFieldNameExternal());p.putString("JoinType",l.getJoinType().getName());var s=l.getJoinCardinality();if(e.notNull(s)){p.putString("JoinCardinality",s.getName())}var u=r.getQueryManager();var g=null;if(e.notNull(u)){g=u.getModelCapabilities()}if(e.isNull(g)){g=t.capabilities}if(g.supportsDimensionVisibility()&&g.supportsExtendedDimensionVisibility()){var y=l.getVisibility();if(e.notNull(y)){p.putString("Visibility",y.getName())}}var m=l.getJoinParameters();if(m.hasElements()){var c=p.putNewList("JoinParameters");c.addAllStrings(m)}var S=l.getDataSource();var A=p.putNewStructure("DataSource");e.QInARepoDataSourceProperties.exportQd(t,S,A,false);var d=S.getType();if(e.isNull(d)){A.putString("Type",e.MetaObjectType.DBVIEW.getCamelCaseName())}else{A.putString("Type",d.getCamelCaseName())}if(g.supportsExtendedDimensionsChangeDefaultRenamingAndDescription()){p.putStringNotNull("FieldRenamingMode",l.getRenamingMode())}}}}};e.QInARepoDataSourceProperties={importQd:function(t,r){var i=r.getStringByKey("ObjectName");t.setName(i);var n=r.getStringByKey("Environment");t.setEnvironmentName(n);var o=r.getStringByKey("PackageName");t.setPackageName(o);var a=r.getStringByKey("SchemaName");t.setSchemaName(a);var l=r.getStringByKey("SourceQuery");t.setSourceQuery(l);var p=r.getStringByKey("AliasName");t.setAlias(p);var s=r.getStringByKey("DataArea");t.setDataArea(s);var u=r.getStringByKey("RunAsUser");t.setRunAsUser(u);var g=r.getStringByKey("Description");t.setText(g);var y=r.getStructureByKey("CustomProperties");if(e.notNull(y)){var m=y.getKeysAsReadOnlyListOfString();var c=m.size();for(var S=0;S<c;S++){var A=m.get(S);t.addCustomProperty(A,y.getStringByKey(A))}}},exportQd:function(t,r,i,n){e.QInAExportUtil.setNonEmptyString(i,"ObjectName",r.getObjectName());e.QInAExportUtil.setNonEmptyString(i,"Environment",r.getEnvironmentName());e.QInAExportUtil.setNonEmptyString(i,"PackageName",r.getPackageName());e.QInAExportUtil.setNonEmptyString(i,"SchemaName",r.getSchemaName());e.QInAExportUtil.setNonEmptyString(i,"AliasName",r.getAlias());if(t.getSession().hasFeature(e.FeatureToggleOlap.UNIVERSE_SOURCE_QUERY)&&e.QInARepoDataSourceProperties.exportSourceQuery(r)){e.QInAExportUtil.setNonEmptyString(i,"SourceQuery",r.getSourceQuery())}var o=r.getCustomProperties();var a=o.getKeysAsIteratorOfString();if(a.hasNext()){var l=i.putNewStructure("CustomProperties");while(a.hasNext()){var p=a.next();if(!e.XString.isEqual(p,e.QDataSource.SOURCE_QUERY_INA)||e.QInARepoDataSourceProperties.exportSourceQuery(r)){e.QInAExportUtil.setNonEmptyString(l,p,o.getByKey(p))}}}var s=r.getDataArea();if(!e.XString.isEqual(s,"DEFAULT")){e.QInAExportUtil.setNonEmptyString(i,"DataArea",s)}if(n){e.QInAExportUtil.setNonEmptyString(i,"RunAsUser",r.getRunAsUser())}e.QInAExportUtil.setNonEmptyString(i,"Description",r.getText())},exportSourceQuery:function(t){var r=false;var i=t.getContext();if(e.notNull(i)){var n=i.getQueryManager();if(e.notNull(n)){var o=n.getQueryServiceConfig();r=o.isSkipSourceQueryForNonMetadataRequests()}}return!r}};e.QInARepoOptions={exportOptions:function(t){var r=e.PrFactory.createStructure();r.putBoolean("UseDefaultAttributeKey",false);var i=t.getActiveResultSetContainer();if(i.getMaxResultRecords()!==-1){r.putLong("MaxResultRecords",i.getMaxResultRecords())}var n=i.getDataRefreshEnabled();if(n===e.ActionChoice.ON||n===e.ActionChoice.ONCE){r.putBoolean("Refresh",true)}var o=false;if(e.XStringUtils.isNotNullAndNotEmpty(i.getResultSetPersistenceTable())){r.putString("ResultSetPersistanceTable",i.getResultSetPersistenceTable());if(e.XStringUtils.isNotNullAndNotEmpty(i.getResultSetPersistenceSchema())){r.putString("ResultSetPersistanceSchema",i.getResultSetPersistenceSchema());o=true}}if(!i.isResultSetTransportEnabled()){r.putBoolean("ReturnEmptyJsonResultSet",true)}e.QInARepoOptions.exportPaging(r,t);e.QInARepoOptions.exportSuppressKeyfigureCalculation(r,t);if(t.getExecuteRequestOnOldResultSet()){r.putBoolean("ExecuteRequestOnOldResultSet",true)}if(t.isIncludePerformanceNotDefault()){r.putBoolean("IncludePerformanceData",t.isRequestingPerformanceData())}var a=t.getCapabilitiesBase();if(a.supportsAutoVariableSubmit()){if(t.getSession().hasFeature(e.FeatureToggleOlap.PREREQUISITE_FOR_AUTO_SUBMIT_AFTER_SUBMITTED)){r.putBoolean("IgnoreAutoSubmit",!t.isProcessingAutoSubmit())}else{r.putBoolean("IgnoreAutoSubmit",!t.getInitSettings().isEnableAutoVariableSubmit())}}var l=t.getQueryModel();if(a.supportsEncodedResultset()){r.putString("ResultFormat","Version2");r.putString("ResultEncoding","None");if(i.getResultSetPersistenceIdentifier()!==null){var p=!i.isRemotePreQuery();if(p){r.putBoolean("IsCubeBlendingSubquery",true)}if(e.QInARepoOptions.isCubeCacheQuery(l)){r.putString("ResultSetPersistanceIdentifier",i.getResultSetPersistenceIdentifier())}else{r.putString("ResultFormat","SerializedData");if(o){r.putString("ResultSetPersistanceIdentifier",i.getResultSetPersistenceIdentifier())}if(t.getSystemType().isTypeOf(e.SystemType.BW)){if(p&&t.getResultSetPersistenceType()===e.BlendingPersistenceType.VIEW){r.putString("ResultSetPersistanceType","View")}else if(p&&t.getResultSetPersistenceType()===e.BlendingPersistenceType.CUBE){r.putString("ResultSetPersistanceType","Cube")}}}}}if(e.notNull(l)&&a.supportsKeepOriginalTexts()){r.putBoolean("ResultKeepOriginalTexts",l.isKeepingOriginalTexts())}if(i.getSuppressCalculatedMembersWithoutBookedData()!==-1){r.putInteger("SuppressCalculatedMembersWithoutBookedData",i.getSuppressCalculatedMembersWithoutBookedData())}return r},isCubeCacheQuery:function(t){var r=t.getOptimizerHintsByExecutionEngine(e.ExecutionEngine.MDS);return e.notNull(r)&&r.containsKey(e.OptimizerHint.CUBE_CACHE_WITH_ID.getName())},fillOptions:function(t,r,i,n){var o=e.PrFactory.createList();if(r.supportsServerState()){o.addString("StatefulServer")}var a=n.getServerCustomizations();o.addAllStrings(a.getValuesAsReadOnlyListOfString());if(i.hasFeature(e.FeatureToggleOlap.NO_EMPTY_OPTIONS)===false||o.hasElements()){t.put("Options",o)}},setRequestTimeZone:function(t,r){if(e.notNull(t)&&r.getModelCapabilities().supportsRequestTimezone()){t.putStringNotNullAndNotEmpty("Timezone",r.getQueryServiceConfig().getRequestTimeZone())}},setLanguage:function(t,r){var i=r.getConnection().getSystemDescription().getLanguage();if(e.XStringUtils.isNotNullAndNotEmpty(i)){t.putString("Language",i)}},importReturnedDataSelections:function(t,r){if(e.notNull(t)){var i=t.getStructureByKey("ReturnedDataSelection");if(e.notNull(i)&&i.hasElements()){var n=r.supportsReturnedDataSelection();var o=i.getKeysAsReadOnlyListOfString();var a=o.size();for(var l=0;l<a;l++){var p=o.get(l);if(i.getByKey(p).isBoolean()){if(n){var s=e.QInAConverter.lookupReturnedDataSelection(p);if(e.notNull(s)){var u=r.getQueryModel();if(s===e.ReturnedDataSelection.TUPLE_ELEMENT_IDS){u.toggleReturnedDataSelection(s,true);continue}u.toggleReturnedDataSelection(s,i.getBooleanByKeyExt(s.getName(),false))}}}}}}},importUniqueAxisProperties:function(t,r){var i=r.getQueryModel();if(e.notNull(t)&&e.notNull(i)&&i.getModelCapabilities().supportsUniqueAxisProperties()){var n=t.getStructureByKey("UniqueAxisProperties");if(e.notNull(n)&&n.hasElements()){r.getConvenienceCommands().clearAllUniqueAxisProperties();var o=r.getQueryModel().getReturnedUniqueAxisProperties();var a=n.getKeysAsReadOnlyListOfString();var l=a.size();for(var p=0;p<l;p++){var s=a.get(p);if(n.getByKey(s).isStructure()&&e.notNull(o)){if(e.XString.isEqual(s,"Rows")){e.QInARepoOptions.importUniqueAxisDataSelection(o,n.getStructureByKey(s),e.AxisType.ROWS)}else if(e.XString.isEqual(s,"Columns")){e.QInARepoOptions.importUniqueAxisDataSelection(o,n.getStructureByKey(s),e.AxisType.COLUMNS)}}}}}},importUniqueAxisDataSelection:function(t,r,i){e.XCollectionUtils.forEachString(r.getKeysAsReadOnlyListOfString(),function(n){var o=e.QInAConverter.lookupReturnedDataSelection(n);if(e.notNull(o)){t.toggleReturnedDataSelection(i,o,r.getBooleanByKeyExt(o.getName(),false))}}.bind(this))},exportReturnedDataSelections:function(t,r){if(r.supportsReturnedDataSelection()){var i=t.putNewStructure("ReturnedDataSelection");if(r.supportsReturnedDataSelection()){var n=r.getQueryModel().getAllReturnedDataSelections();var o=n.getKeysAsIterator();while(o.hasNext()){var a=o.next();i.putBoolean(e.QInAConverter.lookupReturnedDataSelectionInA(a),n.getByKey(a).getBoolean())}}}},exportUniqueAxisProperties:function(t,r){var i=r.getQueryModel();var n=e.notNull(i)&&i.getModelCapabilities().supportsUniqueAxisProperties()?i.getReturnedUniqueAxisProperties():null;var o=e.isNull(n)?null:n.getRowProperties();var a=e.isNull(n)?null:n.getColumnProperties();var l=e.XCollectionUtils.hasElements(o);var p=e.XCollectionUtils.hasElements(a);if(l||p){var s=t.putNewStructure("UniqueAxisProperties");if(l){var u=s.putNewStructure("Rows");e.XCollectionUtils.forEach(o.getKeysAsReadOnlyList(),function(t){u.putBoolean(e.QInAConverter.lookupReturnedDataSelectionInA(t),o.getByKey(t).getBoolean())}.bind(this))}if(p){var g=s.putNewStructure("Columns");e.XCollectionUtils.forEach(a.getKeysAsReadOnlyList(),function(t){g.putBoolean(e.QInAConverter.lookupReturnedDataSelectionInA(t),a.getByKey(t).getBoolean())}.bind(this))}}},importOptimizerHints:function(t,r){if(r.getModelCapabilities().supportsCeScenarioParams()){r.getQueryModel().clearAllOptimizerHints();var i=t.getStructureByKey("Hints");if(e.notNull(i)){e.QInARepoOptions.importOptimizerHintsByEngine(i,e.ExecutionEngine.CALC_ENGINE,r);e.QInARepoOptions.importOptimizerHintsByEngine(i,e.ExecutionEngine.MDS,r);e.QInARepoOptions.importOptimizerHintsByEngine(i,e.ExecutionEngine.SQL,r)}}},importOptimizerHintsByEngine:function(t,r,i){var n=i.getQueryModel();var o=t.getListByKey(r.getName());if(e.notNull(o)){var a=o.size();for(var l=0;l<a;l++){var p=o.getStructureAt(l);var s=p.getStringByKey("Key");var u=p.getStringByKey("Value");n.addOptimizerHint(r,s,u)}}},exportOptimizerHints:function(t,r){if(r.getModelCapabilities().supportsCeScenarioParams()){var i=e.PrFactory.createStructure();e.QInARepoOptions.exportOptimizerHintsByEngine(i,r,e.ExecutionEngine.CALC_ENGINE);e.QInARepoOptions.exportOptimizerHintsByEngine(i,r,e.ExecutionEngine.MDS);e.QInARepoOptions.exportOptimizerHintsByEngine(i,r,e.ExecutionEngine.SQL);if(i.hasElements()){t.put("Hints",i)}}},exportOptimizerHintsByEngine:function(t,r,i){var n=r.getOptimizerHintsByExecutionEngine(i);if(e.notNull(n)&&n.hasElements()){var o=n.getKeysAsReadOnlyListOfString();o.sortByDirection(e.XSortDirection.ASCENDING);var a=t.putNewList(i.getName());var l=o.size();for(var p=0;p<l;p++){var s=o.get(p);var u=a.addNewStructure();u.putString("Key",s);u.putString("Value",n.getByKey(s))}}},importSuppressKeyfigureCalculation:function(t,r){if(e.notNull(t)&&e.notNull(r)){r.setSuppressKeyfigureCalculation(t.getBooleanByKeyExt("SuppressKeyfigureCalculation",false))}},exportSuppressKeyfigureCalculation:function(t,r){if(e.notNull(t)&&e.notNull(r)&&r.isKeyfigureCalculationSuppressed()){t.putBoolean("SuppressKeyfigureCalculation",true)}},importPaging:function(t,r){if(e.notNull(t)){var i=r.getQueryModel();var n=t.getStructureByKey("SubSetDescription");if(e.isNull(n)||!i.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)&&!r.isApplyingRepoState()){return}var o=n.getIntegerByKey("RowFrom");if(o>-1){r.setOffsetRows(o);r.setMaxRows(n.getIntegerByKey("RowTo")-o)}else{r.setMaxRows(n.getIntegerByKey("RowTo"))}var a=n.getIntegerByKey("ColumnFrom");if(a>-1){r.setOffsetColumns(a);r.setMaxColumns(n.getIntegerByKey("ColumnTo")-a)}else{r.setMaxColumns(n.getIntegerByKey("ColumnTo"))}}},exportPaging:function(e,t){var r=t.getActiveResultSetContainer();var i=e.putNewStructure("SubSetDescription");var n=r.getMaxRows();var o=r.getOffsetRows();i.putInteger("RowFrom",o);if(n===-1){i.putInteger("RowTo",-1)}else{i.putInteger("RowTo",o+n)}var a=r.getMaxColumns();var l=r.getOffsetColumns();i.putInteger("ColumnFrom",l);if(a===-1){i.putInteger("ColumnTo",-1)}else{i.putInteger("ColumnTo",l+a)}},exportLOVAbstractionLayerSettings:function(e,t){if(t.hasLovManager()){var r=t.getLovManager();var i=e.putNewStructure("LovAbstractionRepo");i.putBoolean("Enabled",r.isLovAbstractionEnabled());i.putBoolean("Measures",r.isIncludeMeasures());i.putBoolean("AutoVhReadModeConfig",r.isAutomaticValueHelpReadModeConfigurationEnabled());i.putBoolean("AutoVhDrillLevelConfig",r.isAutomaticValueHelpDrillLevelConfigurationEnabled());i.putBoolean("IgnoreMultipleDrillsInVh",r.isIgnoreMultipleDrillsInValueHelp());i.putBoolean("RestoreSettingsAfterImplicitSubmit",r.isRestoreSettingsAfterImplicitSubmit());i.putBoolean("Sort",r.hasUserDefinedSort())}},importLOVAbstractionLayerSettings:function(t,r){var i=t.getStructureByKey("LovAbstractionRepo");if(e.notNull(i)){var n=r.getLovManager();n.setLovAbstractionEnabled(i.getBooleanByKeyExt("Enabled",false),true);n.setIncludeMeasures(i.getBooleanByKeyExt("Measures",false));n.setAutomaticValueHelpReadModeConfigurationEnabled(i.getBooleanByKeyExt("AutoVhReadModeConfig",true));n.setAutomaticValueHelpDrillLevelConfigurationEnabled(i.getBooleanByKeyExt("AutoVhReadModeConfig",true));n.setIgnoreMultipleDrillsInValueHelp(i.getBooleanByKeyExt("IgnoreMultipleDrillsInVh",false));n.setRestoreSettingsAfterImplicitSubmit(i.getBooleanByKeyExt("RestoreSettingsAfterImplicitSubmit",false));n.setHasUserDefinedSort(i.getBooleanByKeyExt("Sort",false))}else if(r.hasLovManager()){r.getLovManager().setLovAbstractionEnabled(false,true)}}};e.QInARepoUtils={importLayeredFilters:function(t,r,i){var n=e.XList.create();var o=i.size();for(var a=0;a<o;a++){var l=i.getStructureAt(a);var p=l.getStringByKey("Name");var s=e.QFilterExpression.create(r,r);t.importFilterExpression(s,l,r,r);r.linkFilter(p,s);n.add(s)}return n},importCacheKey:function(t){var r=t.getStringByKey("System");var i=t.getStringByKey("Providers");var n=t.getStringByKey("Cube");var o=t.getStringByKey("FieldName");var a=t.getStringByKey("DimensionName");var l=t.getStringByKey("ValidationHash");var p=t.getStringByKey("DimensionGroupNames");return e.QFactory.createCacheKey(null,r,n,e.ProviderType.getAll().getByKey(i),o,a,l,p)},importValueByType:function(t,r,i,n){return e.QInARepoUtils._importValueInternal(t,null,r,i,n,null,true)},importSupplementsAndValue:function(t,r,i,n,o,a){e.QInARepoUtils.importValue(t,r,i,n,o,a);var l=i.getListByKey("Supplements");if(e.notNull(l)&&l.hasElements()){var p=l.size();for(var s=0;s<p;s++){var u=l.getStructureAt(s);var g=u.getByKey("Key");var y=u.getByKey("Value");var m=e.QInARepoUtils.correctRemovingUnwantedBackslashAndQuotes(g.getString());var c=e.QInARepoUtils.correctRemovingUnwantedBackslashAndQuotes(y.getString());r.addSupplementValue(m,c)}}},correctRemovingUnwantedBackslashAndQuotes:function(t){var r=t;while(e.QInARepoUtils.containsEscapedQuote(r)){r=e.XStringUtils.stripChars(r,1)}return r},containsEscapedQuote:function(t){return e.XStringUtils.isNotNullAndNotEmpty(t)&&(e.XString.getCharAt(t,0)===92||e.XString.getCharAt(t,0)===34)&&(e.XString.getCharAt(t,e.XString.size(t)-1)===92||e.XString.getCharAt(t,e.XString.size(t)-1)===34)},importValue:function(t,r,i,n,o,a){e.QInARepoUtils._importValueInternal(t,r,i,n,o,a,false)},getDouble:function(t,r){var i;var n=t.getByKey(r);if(n.isString()){var o=n.getString();i=e.XDouble.convertFromString(o)}else if(n.isDouble()){i=n.getDouble()}else if(n.isInteger()){i=n.getInteger()}else{i=0}return i},_importValueInternal:function(t,r,i,n,o,a,l){var p=t.capabilities.supportsSapDate();var s=e.PrUtils.getBooleanValueProperty(i,"FieldLiteralValue",false);var u=n;if(e.isNull(u)){u="Value"}var g=o;if(e.isNull(g)){var y=i.getStringByKey(e.XStringUtils.concatenate2(u,"Type"));g=e.QInAConverter.lookupValueType(y);p=false}var m;var c;if(g===e.XValueType.STRING){c=i.getStringByKey(u);if(l){return e.XStringValue.create(c)}if(e.isNull(a)||!s){r.setString(c)}else{var S=a.getDimension();var A=S.getDimensionMember(c);if(S.isStructure()&&e.notNull(A)){r.setDimensionMember(A)}else{m=a.createFieldLiteralValue();m.setString(c);r.setFieldValue(m)}}}else if(g===e.XValueType.DOUBLE||g===e.XValueType.DECIMAL_FLOAT){var d=e.QInARepoUtils.getDouble(i,u);if(l){return e.XDoubleValue.create(d)}if(e.isNull(a)||!s){r.setDouble(d)}else{m=a.createFieldLiteralValue();m.setDouble(d);r.setFieldValue(m)}}else if(g===e.XValueType.INTEGER){var I=i.getIntegerByKey(u);if(l){return e.XIntegerValue.create(I)}if(e.isNull(a)||!s){r.setInteger(I)}else{m=a.createFieldLiteralValue();m.setInteger(I);r.setFieldValue(m)}}else if(g===e.XValueType.BOOLEAN){var f=i.getBooleanByKey(u);if(l){return e.XBooleanValue.create(f)}r.setBoolean(f)}else if(g===e.XValueType.LONG){var N=e.PrUtils.getLongValueProperty(i,u,0);if(l){return e.XLongValue.create(N)}if(e.isNull(a)||!s){r.setLong(N)}else{m=a.createFieldLiteralValue();m.setLong(N);r.setFieldValue(m)}}else if(g===e.XValueType.DATE){c=i.getStringByKey(u);var v=e.QInARepoUtils.createDate(c);if(l){return v}if(e.isNull(a)||!s){r.setDate(v)}else{m=a.createFieldLiteralValue();m.setDate(v);r.setFieldValue(m)}}else if(g===e.XValueType.TIME){c=i.getStringByKey(u);var T=e.XTime.createTimeFromStringWithFlag(c,p);if(l){return T}r.setTime(T)}else if(g===e.XValueType.DATE_TIME){c=i.getStringByKey(u);var R=e.XDateTime.createDateTimeFromStringWithFlag(c,p);if(l){return R}if(e.isNull(a)||!s){r.setDateTime(R)}else{m=a.createFieldLiteralValue();m.setDate(R);r.setFieldValue(m)}}else if(g.isSpatial()){c=i.getStringByKey(u);var E=e.XGeometryValue.createGeometryValueWithWkt(c);if(l){return E}r.setValue(E);if(t.capabilities.supportsSpatialFilterSrid()&&i.containsKey("SRID")){r.getGeometry().setSrid(e.XIntegerValue.create(i.getIntegerByKey("SRID")))}}else if(g===e.XValueType.UNSUPPORTED){return null}else if(g===e.XValueType.VARIABLE||g===e.XValueType.CURRENT_MEMBER){if(!l){r.setFilterValueType(g)}return null}else{t.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Unsupported value type '",g.getName(),"'"));return null}return null},importSupplements:function(t,r,i,n,o){if(t.capabilities.supportsSupplements()&&e.notNull(n)&&e.XCollectionUtils.hasElements(o)){var a=i.getListByKey(n);if(e.notNull(a)){var l=a.size();var p=o.size();if(l===p){for(var s=0;s<l;s++){r.addSupplementValue(o.get(s).getName(),a.getStringAt(s))}}else{t.addWarning(e.ErrorCodes.INVALID_STATE,"InA protocol error: Supplement sizes of values and field names do not match.")}}}},createDate:function(t){return e.XDate.createDateSafe(t)},importLinkPart:function(t,r){var i=r.getStringByKey("System");var n=r.getStringByKey("DataSource");var o=r.getStringByKey("FieldName");var a=r.getStringByKey("DimensionName");var l=r.getStringByKey("HierarchyName");var p=r.getStringByKey("HierarchyId");var s=r.getStringByKey("ValidationHash");var u=r.getStringByKey("QueryManagerKey");var g=r.getBooleanByKeyExt("IsIncludeHierarchyNodeChildren",false);var y=e.QFactory.createCacheKeyWithDataSource(t,i,n,null,o,a,s,null);var m=e.QFactory.createDimensionLinkPart(t,y,l,u);m.setHierId(p);m.setIncludeHierarchyNodeChildren(g);m.setPropagateOnDefaultHierarchyKey(r.getBooleanByKeyExt("PropagateOnDefaultHierarchyKey",false));m.setPropagateFlexibleTimeRangeFiltersDirect(r.getBooleanByKeyExt("PropagateFlexibleTimeRangeFiltersDirect",true));m.setPropagateDirectFlexibleTimeMemberFiltersUsingHierarchy(r.getBooleanByKeyExt("PropagateDirectFlexibleMemberFiltersHierarchy",false));return m},importFilterTimeRange:function(t,r,i){i.setTimeDimensionName(r.getStringByKey("DimensionName"));i.setHierarchyName(r.getStringByKey("HierarchyName"));i.setLevelName(r.getStringByKey("LevelName"));i.setConvertToFlatFilter(r.getBooleanByKey("ConvertToFlatSelection"));var n=r.getBooleanByKeyExt("IsExcluding",false);if(n){i.setSetSign(e.SetSign.EXCLUDING)}else{i.setSetSign(e.SetSign.INCLUDING)}var o=r.getStructureByKey("Selection");if(e.notNull(o)){var a=i.getFallbackFilter();var l=t.importComponent(null,o,null,a,i);a.setComplexRoot(l)}},importFilterShiftableTimeRange:function(t,r){r.setLookBack(t.getIntegerByKey("LookBack"));var i=t.getStringByKey("OffsetFunction");if(e.XStringUtils.isNotNullAndNotEmpty(i)){r.setOffsetFunction(e.TimeOffsetFunction.lookup(i))}r.setOffsetLevelName(t.getStringByKey("OffsetLevelName"));r.setOffsetAmount(t.getIntegerByKey("OffsetAmount"));r.setPivotMemberLevelName(t.getStringByKey("PivotLevelName"))},exportLayeredFilters:function(t,r){return e.QInARepoUtils.exportLayeredFiltersExt(t,r,null)},exportLayeredFiltersExt:function(t,r,i){var n=e.PrFactory.createList();var o=r.getLinkedFilters();var a=o.getKeysAsIteratorOfString();while(a.hasNext()){var l=a.next();var p=r.getLinkedFilter(l);if(e.QInARepoUtils.isValidFilterExpressionForRepository(p)&&(e.isNull(i)||i(p).getBoolean())){var s=t.exportFilterExpression(p);s.putString("Name",l);n.add(s)}}return n},isValidFilterExpressionForRepository:function(t){return e.notNull(t)&&!t.isReleased()&&t.getFilterRootElement()!==null&&!t.getFilterRootElement().isReleased()},exportCacheKey:function(t,r){var i=e.PrFactory.createStructure();i.putString("System",t.getSystemName());i.putString("Providers",t.getProviderType().getName());i.putString("Cube",t.getDataSourceHashKey());i.putString("FieldName",t.getKey1());i.putString("DimensionName",t.getKey2());i.putString("ValidationHash",t.getValidationHash());i.putString("DimensionGroupNames",t.getDimensionGroupNames());if(e.notNull(r)&&r.getClientQueryObjectStorageName()!==null){i.putString("StorageName",r.getClientQueryObjectStorageName())}return i},extendStructureWithTagging:function(t,r,i){var n=r.getTagging();if(e.XCollectionUtils.hasElements(n)){var o=n.getKeysAsReadOnlyListOfString();var a=i.putNewList("ComponentTags");for(var l=0;l<o.size();l++){var p=o.get(l);var s=n.getByKey(p);var u=e.PrFactory.createStructure();a.add(u);u.putString("KEY",p);if(e.isNull(s)){u.putNull("VALUE")}else{u.putString("VALUE",s)}}}return i},setDateIfNotNull:function(t,r,i,n){if(e.notNull(n)){r.putString(i,n.toIsoFormat())}},setNameIfNotNull:function(t,r,i){if(e.notNull(i)){t.putString(r,i.getName())}},setIntegerIfNotNull:function(t,r,i){if(e.notNull(i)){t.putInteger(r,i.getInteger())}},addKeyRefStructure:function(t,r,i,n){var o=i.putNewStructure("KeyRef");if(!t.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)||e.isNull(n)||n.getClientQueryObjectStorageName()===null||!e.XString.isEqual(r.getStorageName(),n.getClientQueryObjectStorageName())){o.putString("StorageName",r.getStorageName())}o.putString("GroupName",r.getStorageGroupName());o.putString("ObjectName",r.getStorageObjectName());var a=r.getComponentType();var l=e.QInAConverter.lookupComponentTypeInA(a);if(e.notNull(l)){i.putString("CType",l)}},exportValue:function(t,r,i,n,o){e.QInARepoUtils.exportFieldValue(t,r,i,null,n,o)},exportFieldValue:function(t,r,i,n,o,a){var l=r;if(e.isNull(l)){l="Value"}var p=a;if(e.isNull(p)){p=o.getValueType();var s=e.QInAConverter.lookupValueTypeInA(p);i.putString(e.XStringUtils.concatenate2(l,"Type"),s)}if(p===e.XValueType.STRING){var u=o.getString();i.putString(l,u)}else if(p===e.XValueType.INTEGER){i.putInteger(l,o.getInteger())}else if(p===e.XValueType.LONG){i.putLong(l,o.getLong())}else if(p===e.XValueType.DOUBLE||p===e.XValueType.DECIMAL_FLOAT){i.putDouble(l,o.getDouble())}else if(p===e.XValueType.BOOLEAN){i.putBoolean(l,o.getBoolean())}else if(p===e.XValueType.DATE){e.QInARepoUtils.setDateIfNotNull(t,i,l,o.getDate())}else if(p===e.XValueType.TIME){e.QInARepoUtils.setDateIfNotNull(t,i,l,o.getTime())}else if(p===e.XValueType.DATE_TIME){e.QInARepoUtils.setDateIfNotNull(t,i,l,o.getDateTime())}if(e.notNull(p)&&p.isSpatial()){var g=o.getGeometry();i.putString(l,g.toWKT());var y=g.getSrid();if(t.capabilities.supportsSpatialFilterSrid()&&e.notNull(y)){i.putInteger("SRID",y.getInteger())}}if(e.notNull(n)){i.putBoolean("FieldLiteralValue",true)}},exportSupplementsAndValue:function(t,r,i,n,o,a){e.QInARepoUtils.exportFieldValue(t,r,i,n,o,a);var l=o.getSupplementValues();if(e.XCollectionUtils.hasElements(l)){var p=i.putNewList("Supplements");var s=l.size();for(var u=0;u<s;u++){var g=p.addNewStructure();var y=l.get(u);g.putString("Key",y.getKey().toString());g.putString("Value",y.getValue().toString())}}},exportFilterValue:function(t,r,i,n,o){if(o===e.XValueType.VARIABLE){var a=n.getVariableValue();if(e.notNull(a)){i.putString(r,a.getName());if(e.XString.isEqual(r,"Low")){i.putString("LowIs","Variable")}else if(e.XString.isEqual(r,"High")){i.putString("HighIs","Variable")}}}else{e.QInARepoUtils.exportValue(t,r,i,n,o)}},setDate:function(t,r,i,n){if(e.notNull(n)){r.putString(i,n.toIsoFormat())}},exportLinkPart:function(t,r,i){r.putString("System",i.getSystemName());r.putString("DataSource",i.getCubeName());r.putString("DimensionName",i.getDimensionName());r.putString("FieldName",i.getFieldName());r.putStringNotNullAndNotEmpty("QueryManagerKey",i.getQueryManagerKey());if(i.getHierarchyName()!==null){r.putString("HierarchyName",i.getHierarchyName())}if(i.getHierId()!==null){r.putString("HierarchyId",i.getHierId())}if(i.getFieldKey().getValidationHash()!==null){r.putString("ValidationHash",i.getFieldKey().getValidationHash())}if(t.getSession().hasFeature(e.FeatureToggleOlap.LOV_BASED_FILTER_ACROSS_MODELS)){r.putBoolean("IsIncludeHierarchyNodeChildren",i.isIncludeHierarchyNodeChildren())}if(i.getPropagateOnDefaultHierarchyKey()){r.putBoolean("PropagateOnDefaultHierarchyKey",true)}if(t.getSession().hasFeature(e.FeatureToggleOlap.FLEXIBLE_TIME_DYNAMIC_TIME)){r.putBoolean("PropagateFlexibleTimeRangeFiltersDirect",i.getPropagateFlexibleTimeRangeFiltersDirect())}if(t.getSession().hasFeature(e.FeatureToggleOlap.FLEXIBLE_TIME_DYNAMIC_TIME)){r.putBoolean("PropagateDirectFlexibleMemberFiltersHierarchy",i.getPropagateDirectFlexibleTimeMemberFiltersUsingHierarchy())}},getFormulaCalcDimField:function(t,r,i){var n=t.getOlapEnv().getClientQueryObjectManager();var o=n.getFormulaCalcDimPropertiesByFieldName(r,i);if(e.notNull(o)){return o.getFormulaCalcFields().getFieldByName(r)}return null},exportTimeRangeFilter:function(t,r,i){r.putString("DimensionName",i.getTimeDimensionName());r.putString("HierarchyName",i.getHierarchyName());r.putString("LevelName",i.getLevelName());r.putBoolean("ConvertToFlatSelection",i.isConvertToFlatFilter());if(i.getLowValueType()!==null){r.putString("LowValueType",i.getLowValueType().getName())}r.putBoolean("IsExcluding",i.getSetSign()===e.SetSign.EXCLUDING);var n=i.getFallbackFilter().getFilterRootElement();if(e.notNull(n)){var o=t.exportComponent(null,n,null,0);r.put("Selection",o)}},exportShiftableTimeRangeFilter:function(t,r){t.putInteger("LookBack",r.getLookBack());var i=r.getOffsetFunction();if(e.notNull(i)){t.putString("OffsetFunction",i.getName())}t.putString("OffsetLevelName",r.getOffsetLevelName());t.putInteger("OffsetAmount",r.getOffsetAmount());if(r.getPivotMemberLevelName()!==null){t.putString("PivotLevelName",r.getPivotMemberLevelName())}},exportTimeOperation:function(t,r){t.putString("Name",r.getDimensionName());t.putString("TimeOperationFunction",r.getFunction().getName());if(r.getGranularity()!==null){t.putString("TimeOperationGranularity",r.getGranularity().getName())}t.putInteger("TimeOperationPeriod",r.getPeriod());t.putBoolean("TimeOperationForceMemberNavGeneration",r.getForceMemberNavigationGeneration());t.putBoolean("TimeOperationUseToDateFlatRangeSelection",r.getUseToDateFlatRangeSelection());t.putString("LevelName",r.getHierarchyLevelName());if(r.getFunction()===e.QTimeOperationFunction.PREVIOUS&&r.getGranularity()===e.QTimeOperationGranularity.PERIOD){t.putString("TimePeriodOperationLevel",r.getTimePeriodOperationLevel().getName())}}};e.QInAComponentWithList=function(){};e.QInAComponentWithList.prototype=new e.QInAComponent;e.QInAComponentWithList.prototype._ff_c="QInAComponentWithList";e.QInAComponentWithList.prototype.importComponent=function(t,r,i,n,o){var a=this.getTagName();var l=null;if(e.isNull(a)){l=r}else{if(e.notNull(r)){var p=r;l=p.getListByKey(a)}}return this.importComponentWithList(t,l,i,n,o)};e.QInAComponentWithList.prototype.exportComponent=function(t,r,i,n){var o=null;if(e.notNull(r)){o=this.exportComponentWithList(t,r,n);var a=this.getTagName();if(e.notNull(a)&&e.notNull(o)){var l=i;if(e.isNull(l)){l=e.PrFactory.createStructure()}l.put(a,o);return l}}return o};e.QInAComponentWithStructure=function(){};e.QInAComponentWithStructure.prototype=new e.QInAComponent;e.QInAComponentWithStructure.prototype._ff_c="QInAComponentWithStructure";e.QInAComponentWithStructure.prototype.importComponent=function(t,r,i,n,o){var a=r;var l=this.getTagName();if(e.notNull(l)&&e.notNull(a)){var p=a.getByKey(l);a=e.notNull(p)&&p.isStructure()?p:null}var s=i;if(e.isNull(i)){var u=null;var g=null;if(e.notNull(o)){u=o.getOlapEnv();g=o.getApplication()}if(e.isNull(g)){g=t.getApplication()}if(e.notNull(a)){var y=a.getStructureByKey("KeyRef");if(e.notNull(y)&&e.notNull(o)){return this.getSharedObjectFromKeyRef(n,o,y)}}s=this.newModelComponent(g,u,n,o);if(e.notNull(s)&&!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){s.stopEventing()}}var m=this.importComponentWithStructure(t,a,s,n,o);e.QInAImportUtil.importComponentTagging(t,a,m);e.QInAImportUtil.importComponentExtensions(t,a,m);this.importChangedProperties(m,a);if(e.isNull(i)&&e.notNull(s)&&!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){s.resumeEventing()}return m};e.QInAComponentWithStructure.prototype.importChangedProperties=function(t,r){if(e.notNull(r)&&e.notNull(t)){var i=r.getListByKey("ChangedProperties");var n=r.getStructureByKey("ChangedPropertiesInDetail");var o=r.getListByKey("ChangedPropertiesFromModellerMetadata");if(e.notNull(i)&&i.size()>0){var a=e.XHashSetOfString.create();for(var l=0;l<i.size();l++){a.add(i.getStringAt(l))}t.setChangedProperties(a)}if(e.notNull(n)&&n.hasElements()){var p=t.getChangedPropertiesInDetail();var s=n.getKeysAsReadOnlyListOfString();for(var u=0;u<s.size();u++){var g=s.get(u);var y=e.XHashMapByString.create();p.put(g,y);var m=n.getStructureByKey(g);var c=m.getKeysAsReadOnlyListOfString();for(var S=0;S<c.size();S++){var A=c.get(S);y.put(A,e.XStringValue.create(m.getStringByKey(A)))}}}if(e.notNull(o)&&o.size()>0){var d=t.getChangedPropertiesFromModellerMetadata();for(var I=0;I<o.size();I++){d.add(o.getStringAt(I))}}}};e.QInAComponentWithStructure.prototype.getSharedObjectFromKeyRef=function(t,r,i){var n;var o=i.getStringByKey("StorageName");var a=this.getClientQueryObjectStorageName(t);if(e.isNull(a)){a=this.getClientQueryObjectStorageName(r)}if(e.isNull(a)){a=o}n=e.QFactory.createKeyRef(a,i.getStringByKey("GroupName"),i.getStringByKey("ObjectName"));var l=null;if(e.XString.isEqual(o,e.KeyRefConstants.MAIN_STORAGE)&&t.getKeyRefStorage()!==null){l=t.getKeyRefStorage().get(o,i.getStringByKey("GroupName"),i.getStringByKey("ObjectName"))}else{l=r.getOlapEnv().getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(n,null)}return l};e.QInAComponentWithStructure.prototype.getClientQueryObjectStorageName=function(t){var r=null;if(e.notNull(t)&&t.getQueryManager()!==null&&t.getQueryManager().getClientQueryObjectStorageName()!==null){r=t.getQueryManager().getClientQueryObjectStorageName()}return r};e.QInAComponentWithStructure.prototype.newModelComponent=function(e,t,r,i){return null};e.QInAComponentWithStructure.prototype.exportComponent=function(t,r,i,n){var o=null;if(e.notNull(r)){var a=this.getTagName();if(e.isNull(a)){o=i}if(e.isNull(o)){o=e.PrFactory.createStructure()}var l=this.exportKeyReference(t,r,o);if(!l){o=this.exportComponentWithStructure(t,r,o,n);if(e.notNull(o)){o=e.QInAExportUtil.extendStructure(t,r,o);o=this.extendCustom(t,r,o);e.QInAExportUtil.exportComponentExtensions(t,o,r)}if(e.notNull(a)){if(e.notNull(o)){var p=i;if(e.isNull(p)){p=e.PrFactory.createStructure()}p.put(a,o);o=p}}}}return o};e.QInAComponentWithStructure.prototype.extendCustom=function(e,t,r){return r};e.QInAComponentWithStructure.prototype.exportKeyReference=function(e,t,r){return false};e.QInARepoFilterCartesianListLegacy=function(){};e.QInARepoFilterCartesianListLegacy.prototype=new e.QInAComponent;e.QInARepoFilterCartesianListLegacy.prototype._ff_c="QInARepoFilterCartesianListLegacy";e.QInARepoFilterCartesianListLegacy.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_LIST};e.QInARepoFilterCartesianListLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterCartesianListLegacy.prototype.importComponent=function(t,r,i,n,o){var a=r;var l=i;var p=n;var s=o.getFieldAccessorSingle();var u=a.getStringByKey("FieldName");var g=l;if(e.notNull(u)){var y=s.getFieldByName(u);if(e.isNull(y)){var m=p.getQueryModel();if(e.notNull(m)){var c=m.getDimensionByNameFromExistingMetadata(u);if(e.notNull(c)){var S=a.getStructureByKey("Hierarchy");if(e.isNull(S)){y=c.getFlatKeyField()}else{y=c.getHierarchyKeyField()}}}}if(e.notNull(y)){var A=a.getStructureByKey("Hierarchy");var d=null;var I=null;var f=null;if(e.notNull(A)){d=A.getStringByKey("Name");if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&t.isAbap(y)){var N=A.getStringByKey("DueDate");if(e.notNull(N)){I=e.XDate.createDateFromSAPFormat(N)}f=A.getStringByKey("Version")}}if(e.isNull(g)){g=e.QFilterCartesianList._createMd(o,p,y.getMetadata(),d);g.setHierarchyInfo(d,I,f)}else{g.clear()}var v=a.getBooleanByKeyExt("ConvertToFlatSelection",false);g.setConvertToFlatFilter(v);var T=a.getListByKey("SupplementsFieldNames");if(e.notNull(T)){var R=T.size();for(var E=0;E<R;E++){var C=T.getStringAt(E);var Q=s.getFieldByName(C);g.addSupplementField(Q)}}var M=a.getListByKey("Elements");if(e.notNull(M)){var D=M.size();for(var L=0;L<D;L++){var B=M.getStructureAt(L);var F=t.importFilterOperation(B,g,o);g.add(F)}}}}return g};e.QInARepoFilterCartesianListLegacy.prototype.exportComponent=e.noSupport;e.InARepoStructureMemberLazyLoader=function(){};e.InARepoStructureMemberLazyLoader.prototype=new e.XObjectExt;e.InARepoStructureMemberLazyLoader.prototype._ff_c="InARepoStructureMemberLazyLoader";e.InARepoStructureMemberLazyLoader.create=function(t,r,i){if(e.isNull(r)){throw e.XException.createIllegalArgumentException("InARepoStrucutreMemberLazyLoader - QModelFormat mode is null")}if(!r.isTypeOf(e.QModelFormat.INA_REPOSITORY)){throw e.XException.createIllegalArgumentException(e.XStringUtils.concatenate2("InARepoStrucutreMemberLazyLoader - Does not support QModelFormat:",r.getName()))}var n=new e.InARepoStructureMemberLazyLoader;n.m_dimension=t;n.m_importer=e.QInAImportFactory.createWithQueryManagerCapabilities(t.getApplication(),r,t.getQueryManager());n.m_modelFormat=r;n.m_inaStructure=i.cloneExt(null);n.m_repoMetadataMap=e.XHashMapByString.create();n.m_memberNameList=e.XListOfString.create();var o=n.m_inaStructure.getListByKey("MembersRepo");if(e.notNull(o)){for(var a=0;a<o.size();a++){var l=o.get(a).asStructure();n.m_repoMetadataMap.put(l.getStringByKey("Name"),l);n.m_memberNameList.add(l.getStringByKey("Name"))}}return n};e.InARepoStructureMemberLazyLoader.prototype.m_dimension=null;e.InARepoStructureMemberLazyLoader.prototype.m_importer=null;e.InARepoStructureMemberLazyLoader.prototype.m_modelFormat=null;e.InARepoStructureMemberLazyLoader.prototype.m_repoMetadataMap=null;e.InARepoStructureMemberLazyLoader.prototype.m_memberNameList=null;e.InARepoStructureMemberLazyLoader.prototype.m_inaStructure=null;e.InARepoStructureMemberLazyLoader.prototype.loadStructureMember=function(t){if(this.m_repoMetadataMap.getByKey(t)!==null){var r=this.m_memberNameList.getIndex(t);if(r>=0){var i=e.PrFactory.createStructure();var n=this.m_inaStructure.getKeysAsIteratorOfString();while(n.hasNext()){var o=n.next();i.put(o,this.m_inaStructure.getByKey(o))}var a=i.putNewList("MembersRepo");a.add(this.m_repoMetadataMap.getByKey(t));this.m_repoMetadataMap.remove(t);var l=this.m_inaStructure.getListByKey("MembersRepo");l.removeAt(r);this.m_memberNameList.removeAt(r);this.loadStructureMemberStructure(i)}}};e.InARepoStructureMemberLazyLoader.prototype.loadAllStructureMembers=function(){var t=this.m_inaStructure.getListByKey("MembersRepo");if(e.notNull(t)&&t.size()>0){var r=e.PrFactory.createStructure();var i=this.m_inaStructure.getKeysAsIteratorOfString();while(i.hasNext()){var n=i.next();r.put(n,this.m_inaStructure.getByKey(n))}var o=r.putNewList("MembersRepo");o.addAll(t);this.m_repoMetadataMap.clear();this.m_memberNameList.clear();t.clear();this.loadStructureMemberStructure(r)}};e.InARepoStructureMemberLazyLoader.prototype.loadStructureMemberStructure=function(t){this.m_dimension.getQueryManager().stopEventing();var r=this.m_dimension.getQueryModel().isBasicMeasureAggregationExportedInRepo();if(!r){this.m_dimension.getQueryModel().setBasicMeasureAggregationExportForRepo(true)}var i=this.m_dimension.getQueryModel().isBasicMeasureSettingsExportedInRepo();if(!i){this.m_dimension.getQueryModel().setBasicMeasureSettingsExportedInRepo(true)}this.m_importer.importComponent(e.OlapComponentType.MEMBERS,t,this.m_dimension,null,this.m_dimension.getContext());if(!r){this.m_dimension.getQueryModel().setBasicMeasureAggregationExportForRepo(false)}if(!i){this.m_dimension.getQueryModel().setBasicMeasureSettingsExportedInRepo(false)}this.m_dimension.getQueryManager().resumeEventing()};e.InARepoStructureMemberLazyLoader.prototype.copyStructureMemberLazyLoader=function(t){return e.InARepoStructureMemberLazyLoader.create(t,this.m_modelFormat,this.m_inaStructure)};e.QInARepoVariableManager=function(){};e.QInARepoVariableManager.prototype=new e.QInAComponentWithList;e.QInARepoVariableManager.prototype._ff_c="QInARepoVariableManager";e.QInARepoVariableManager.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_MANAGER};e.QInARepoVariableManager.prototype.getTagName=function(){return"Variables"};e.QInARepoVariableManager.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVariableManager.prototype.importComponentWithList=function(t,r,i,n,o){var a=i;if(e.notNull(r)){var l=r.size();for(var p=0;p<l;p++){var s=r.getStructureAt(p);var u=s.getStringByKey("Name");var g=a.getVariableBaseByName(u);if(e.notNull(g)){var y=g.getVariableType();if(y.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(s,g,o)}else if(y.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(s,g,o)}else if(y.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(s,g,o)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",u,"' of variable type '",y.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",u,"' was not found"))}}}return a};e.QInARepoVariableManager.prototype.exportComponentWithList=function(t,r,i){var n;var o=r;var a=o.getQueryModel();if(e.notNull(a)&&!a.isExportingVariables()&&!a.hasProcessingStep()){n=null}else{n=null;var l=o.getVariables();if(e.XCollectionUtils.hasElements(l)){var p=e.PrFactory.createList();var s=l.size();for(var u=0;u<s;u++){var g=l.get(u);var y=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||g.getModCounter()>0;if(y){var m=t.exportVariable(g,null);p.add(m)}}n=p}}return n};e.QInARepository=function(){};e.QInARepository.prototype=new e.QInAComponentWithStructure;e.QInARepository.prototype._ff_c="QInARepository";e.QInARepository.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepository.prototype.newComponentCreationAllowed=function(t,r){return t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&r.getBooleanByKeyExt("UserDefinedComponent",false)};e.QInARepository.prototype.isMatching=function(t){var r=e.QInAComponentWithStructure.prototype.isMatching.call(this,t);if(r&&e.notNull(t)){var i=t;var n=this.getTagName();if(e.isNull(n)){if(i.getStringByKey("CType")===null){r=false}}else{r=i.containsKey(n)}}return r};e.QInARepository.prototype.extendCustom=function(t,r,i){var n=this.getComponentType();var o=e.QInAConverter.lookupComponentTypeInA(n);if(e.isNull(o)){throw e.XException.createRuntimeException("ctype not found")}if(i.hasElements()){i.putString("CType",o);var a=r.getApplication()!==null&&r.getSession().hasFeature(e.FeatureToggleOlap.INA_REPOSITORY_DELTA);if(a||t.getOriginalMode()===e.QModelFormat.INA_CLONE){var l=r.getChangedProperties();var p=r.getChangedPropertiesInDetail();var s=r.getChangedPropertiesFromModellerMetadata();if(e.XCollectionUtils.hasElements(l)){var u=e.PrFactory.createList();var g=l.getValuesAsReadOnlyListOfString();u.addAllStrings(g);i.put("ChangedProperties",u)}if(e.XCollectionUtils.hasElements(p)){var y=e.PrFactory.createStructure();var m=p.getKeysAsReadOnlyListOfString();for(var c=0;c<m.size();c++){var S=m.get(c);var A=y.putNewStructure(S);var d=p.getByKey(S);if(e.notNull(d)){var I=d.getKeysAsReadOnlyListOfString();for(var f=0;f<I.size();f++){var N=I.get(f);var v=d.getByKey(N);A.putString(N,e.isNull(v)?null:v.toString())}}}i.put("ChangedPropertiesInDetail",y)}if(e.XCollectionUtils.hasElements(s)){var T=e.PrFactory.createList();T.addAllStrings(s.getValuesAsReadOnlyListOfString());i.put("ChangedPropertiesFromModellerMetadata",T)}if(r.canMaterializeCompleteObject()){i.putBoolean("UserDefinedComponent",true)}}}return i};e.QInARepository.prototype.exportKeyReference=function(t,r,i){var n=false;var o=r;var a=o.getContext();var l=null;var p=null;if(e.notNull(a)){l=a.getQueryManager();p=a.getOlapEnv()}if(e.isNull(l)||l.isKeyRefSerializationEnabled()){if(e.notNull(p)&&p.getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(r,null)!==null){e.QInARepoUtils.addKeyRefStructure(t,r,i,l);n=true}else if(e.isNull(p)&&r.getStorageName()!==null&&!e.XString.isEqual(r.getStorageName(),e.KeyRefConstants.MAIN_STORAGE)||r.isReleased()){e.QInARepoUtils.addKeyRefStructure(t,r,i,l);n=true}}return n};e.QInARepository.prototype.exportComponentWithStructure=function(e,t,r,i){return r};e.QInARepository.prototype.removeModelElementsNotInInA=function(t,r,i,n){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){var o=this.getNamesOfElementsInList(r);for(var a=0;a<n.size();a++){var l=n.get(a);if(!o.contains(l.getName())){i.removeElement(l)}}}};e.QInARepository.prototype.getNamesOfElementsInList=function(t){var r=t.size();var i=e.XListOfString.create();for(var n=0;n<r;n++){var o=t.getStructureAt(n);i.add(o.getStringByKey("Name"))}return i};e.QInARepoAttributeLegacy=function(){};e.QInARepoAttributeLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoAttributeLegacy.prototype._ff_c="QInARepoAttributeLegacy";e.QInARepoAttributeLegacy.prototype.getComponentType=function(){return e.OlapComponentType.ATTRIBUTE};e.QInARepoAttributeLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoAttributeLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=r.getStringByKey("Name");var p=a.getAttributeByName(l);if(e.notNull(p)){var s=r.getListByKey("ResultSetFields");if(e.notNull(s)){var u=p.getResultSetFields();u.clear();var g=s.size();for(var y=0;y<g;y++){var m=p.getFieldByName(s.getStringAt(y));if(e.notNull(m)){u.add(m)}}}}return p};e.QInARepoAttributeLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoAxesSettingsLegacy=function(){};e.QInARepoAxesSettingsLegacy.prototype=new e.QInAComponentWithList;e.QInARepoAxesSettingsLegacy.prototype._ff_c="QInARepoAxesSettingsLegacy";e.QInARepoAxesSettingsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.AXES_SETTINGS};e.QInARepoAxesSettingsLegacy.prototype.getTagName=function(){return"Axes"};e.QInARepoAxesSettingsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoAxesSettingsLegacy.prototype.importComponentWithList=function(t,r,i,n,o){if(e.notNull(r)){var a=o.getQueryModel();if(t.capabilities.supportsZeroSuppression()||t.capabilities.supportsNullZeroSuppression()){var l=e.AxisType.getAll();var p=l.size();for(var s=0;s<p;s++){var u=a.getAxisBase(l.get(s));if(e.notNull(u)){u.setSupportsZeroSuppression(true)}}}var g=r.size();for(var y=0;y<g;y++){t.importAxis(r.getStructureAt(y),null,o)}}return null};e.QInARepoAxesSettingsLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoAxisLegacy=function(){};e.QInARepoAxisLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoAxisLegacy.prototype._ff_c="QInARepoAxisLegacy";e.QInARepoAxisLegacy.prototype.getComponentType=function(){return e.OlapComponentType.AXIS};e.QInARepoAxisLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoAxisLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=t.capabilities.supportsZeroSuppression();var l;var p=r.getStringByKey("Axis");if(e.isNull(p)){l=e.QInAConverter.lookupAxisTypeInt(r.getIntegerByKey("Type"))}else{l=e.QInAConverter.lookupAxisType(p)}var s=o.getQueryModel();var u=s.getAxisBase(l);if(e.notNull(u)){if(a){var g=r.getIntegerByKey("ZeroSuppressionType");var y=e.QInAConverter.lookupSuppressionType(g);u.setZeroSuppressionType(y);u.setDefaultZeroSuppression(y)}t.importTotals(r,u.getResultStructureControllerBase(),o)}return u};e.QInARepoAxisLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoConditionManagerLegacy=function(){};e.QInARepoConditionManagerLegacy.prototype=new e.QInAComponentWithList;e.QInARepoConditionManagerLegacy.prototype._ff_c="QInARepoConditionManagerLegacy";e.QInARepoConditionManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_MANAGER};e.QInARepoConditionManagerLegacy.prototype.getTagName=function(){return"Conditions"};e.QInARepoConditionManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoConditionManagerLegacy.prototype.importComponentWithList=function(t,r,i,n,o){var a=i;if(e.notNull(a)){a.clear();if(e.notNull(r)){var l=o.getQueryModel();var p=r.size();for(var s=0;s<p;s++){var u=r.getStructureAt(s);var g=t.importCondition(l,u,null);a.add(g)}}}return a};e.QInARepoConditionManagerLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoConditionsConditionLegacy=function(){};e.QInARepoConditionsConditionLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoConditionsConditionLegacy.prototype._ff_c="QInARepoConditionsConditionLegacy";e.QInARepoConditionsConditionLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CONDITION};e.QInARepoConditionsConditionLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoConditionsConditionLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.isNull(r)){return i}var a;var l=r.getStringByKey("Name");if(e.isNull(i)){if(t.getMode()===e.QModelFormat.INA_REPOSITORY){var p=r.getBooleanByKeyExt("IsBackendCondition",true);a=e.QCondition.create(o,n,l,p)}else{a=e.QCondition.create(o,n,l,true)}}else{a=i;a.setConditionName(l)}a.setActive(r.getBooleanByKey("Active"));a.setUsedState(r.getStringByKey("IsUsed"));a.setDescription(r.getStringByKey("Description"));var s=r.getStringByKey("OnDisabled");a.setApplyConditionAfterVisibilityFilter(r.getBooleanByKeyExt("AfterVisibilityFilter",false));if(e.notNull(s)){if(e.XString.isEqual(s,"Error")){a.setOnDisabledToWarning(false)}}var u=r.getStringByKey("EvaluateOnDimensions");var g=e.ConditionDimensionEvaluationType.lookupName(u);if(e.notNull(g)){a.setDimensionEvaluationType(g)}var y=o.getQueryModel();var m=r.getListByKey("EvaluateOnDimensionsList");var c;var S;if(!e.PrUtils.isListEmpty(m)&&e.notNull(y)){c=m.size();for(S=0;S<c;S++){var A=m.getStringAt(S);if(e.notNull(A)){var d=y.getDimensionByNameFromExistingMetadata(A);if(e.notNull(d)){a.addEvaluationDimension(d)}}}}var I=r.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(I)){var f=I.size();for(var N=0;N<f;N++){var v=I.getStructureAt(N);if(e.notNull(v)){a.addThreshold(t.importConditionThreshold(y,v,null,a))}}}a.setBreakGroup(r.getBooleanByKeyExt("BreakGroup",false));var T=r.getListByKey("BreakGroupList");if(!e.PrUtils.isListEmpty(T)&&e.notNull(y)){c=T.size();for(S=0;S<c;S++){var R=T.getStringAt(S);if(e.notNull(R)){var E=y.getDimensionByNameFromExistingMetadata(R);if(e.notNull(E)){a.addBreakGroupDimension(E)}}}}return a};e.QInARepoConditionsConditionLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoCurrencyTranslationManagerLegacy=function(){};e.QInARepoCurrencyTranslationManagerLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoCurrencyTranslationManagerLegacy.prototype._ff_c="QInARepoCurrencyTranslationManagerLegacy";e.QInARepoCurrencyTranslationManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER};e.QInARepoCurrencyTranslationManagerLegacy.prototype.getTagName=function(){return"CurrencyTranslation"};e.QInARepoCurrencyTranslationManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoCurrencyTranslationManagerLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.notNull(a)&&e.notNull(r)){var l=a.getCurrencyTranslationDetails();if(e.notNull(l)){l.setCurrencyTranslationName(r.getStringByKey("Name"));l.setCurrencyTranslationOperation(e.CurrencyTranslationOperation.lookup(r.getStringByKey("Operation")));l.setCurrencyTranslationTarget(r.getStringByKey("Target"))}}return a};e.QInARepoCurrencyTranslationManagerLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoCustomHierarchyDefinitionLegacy=function(){};e.QInARepoCustomHierarchyDefinitionLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoCustomHierarchyDefinitionLegacy.prototype._ff_c="QInARepoCustomHierarchyDefinitionLegacy";e.QInARepoCustomHierarchyDefinitionLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){if(!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){return null}var a=e.PrUtils.getListProperty(r,"Dimensions");var l=e.PrUtils.getStructureElement(a,0);if(e.notNull(l)){var p=l.getStringByKey("System");var s=l.getStringByKey("DataSource");var u=l.getStringByKey("Name");var g=l.getStructureByKey("Hierarchy");if(e.notNull(g)&&e.XStringUtils.isNotNullAndNotEmpty(p)&&e.XStringUtils.isNotNullAndNotEmpty(u)){var y=true;var m=t.getApplication();if(e.notNull(m)){var c=m.getSystemLandscape().getSystemDescription(p);y=e.isNull(c)?true:c.getSystemType().isTypeOf(e.SystemType.ABAP)}var S=e.QCustomHierarchyDefinition.createByData(p,s,u,g.getStringByKey("Description"),y);S.setName(g.getStringByKey("Name"));this.addHierarchyNodesFromStructure(S,g.getStructureByKey("Nodes"));return S}}return null};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.addHierarchyNodesFromStructure=function(t,r){var i=e.PrUtils.getListProperty(r,"NodeId");var n=e.PrUtils.getListProperty(r,"ParentId");var o=e.PrUtils.getListProperty(r,"NodeName");var a=e.PrUtils.getListProperty(r,"NodeType");var l=e.PrUtils.getListSize(i,0);if(e.PrUtils.isListEmpty(i)||e.PrUtils.isListEmpty(n)||e.PrUtils.isListEmpty(o)||e.PrUtils.isListEmpty(a)||n.size()!==l||o.size()!==l||a.size()!==l){return}var p=e.XSimpleMap.create();for(var s=0;s<l;s++){var u=i.getIntegerAt(s);var g=o.getStringAt(s);var y=a.getStringAt(s);var m=n.getIntegerAt(s);var c=m===-1?t:p.getByKey(e.XIntegerValue.create(m));if(e.notNull(c)){if(e.XString.isEqual(y,"1HIER_NODE_SIMPLE")){p.put(e.XIntegerValue.create(u),c.addTextNode(g))}else{c.addMemberNode(g)}}}e.XObjectExt.release(p)};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoDataCellsAllLegacy=function(){};e.QInARepoDataCellsAllLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDataCellsAllLegacy.prototype._ff_c="QInARepoDataCellsAllLegacy";e.QInARepoDataCellsAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELLS};e.QInARepoDataCellsAllLegacy.prototype.getTagName=function(){return"QueryDataCells"};e.QInARepoDataCellsAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDataCellsAllLegacy.prototype.importComponentWithList=function(t,r,i,n,o){var a=o.getModelCapabilities();var l=o.getQueryModel();if(a.supportsDataCells()&&t.mode!==e.QModelFormat.INA_DATA_REINIT&&l.getQueryManager().getInitSettings().isRequestingDataCells()){var p=l.getQueryDataCellsBase();p.clear();if(e.notNull(r)){for(var s=0;s<r.size();s++){t.importDataCell(r.getStructureAt(s),l)}}}return null};e.QInARepoDataCellsAllLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoDimensionsAllLegacy=function(){};e.QInARepoDimensionsAllLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDimensionsAllLegacy.prototype._ff_c="QInARepoDimensionsAllLegacy";e.QInARepoDimensionsAllLegacy.exportTechnicalDimension=function(t,r,i,n){if(!t.capabilities.supportsUniversalModel()){return}var o=r.getQueryCellManager();if(o.isEmpty()){return}var a=r.getDimensionByName("$$Cells$$");e.QInARepoDimensionsAllLegacy.exportDimension(t,a,i,n)};e.QInARepoDimensionsAllLegacy.exportAxisDimensionsWithHeuristic=function(t,r,i,n,o){var a=r.getQueryModel();var l=t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);var p=a.isOptimizedExportModeActive();var s=r.getDimensionCount();for(var u=0;u<s;u++){var g=r.get(u);if(p&&g.isIgnoredOnOptimizedExport()){continue}if(l&&!n.contains(g.getName())){continue}e.QInARepoDimensionsAllLegacy.exportDimension(t,g,i,o)}};e.QInARepoDimensionsAllLegacy.exportAxisDimensions=function(t,r,i,n){var o=r.getDimensionCount();for(var a=0;a<o;a++){var l=r.get(a);e.QInARepoDimensionsAllLegacy.exportDimension(t,l,i,n)}};e.QInARepoDimensionsAllLegacy.exportDimension=function(e,t,r,i){if(!i.contains(t.getName())){i.add(t.getName());r.add(e.exportDimension(t,null))}};e.QInARepoDimensionsAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInARepoDimensionsAllLegacy.prototype.getTagName=function(){return"Dimensions"};e.QInARepoDimensionsAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDimensionsAllLegacy.prototype.importComponentWithList=function(t,r,i,n,o){if(e.notNull(r)){var a=i;var l=a.getDimensionManagerBase();if(t.mode!==e.QModelFormat.INA_DATA_REINIT){var p=a.getFreeAxis();p.addAll(l)}var s=r.size();var u=l.getDimensionReferences();for(var g=0;g<s;g++){var y=r.getStructureAt(g);var m=y.getStringByKey("Name");var c=y.getStringByKey("Axis");var S=null;if(y.containsKey("FieldMappings")){var A=t.importCalculatedDimension(y,a);l.addDimension(A);l.finalizeDimensionMetadataSetup(A)}else if(y.containsKey("CType")&&e.XComponentType.lookupComponentType(y.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var d=t.importFormulaCalculatedDimension(y,a,null);l.addDimension(d);l.finalizeDimensionMetadataSetup(d)}else{if(u.containsKey(m)){var I=e.AxisType.lookup(c);if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)||I===e.AxisType.COLUMNS||I===e.AxisType.ROWS){S=l.getDimensionByNameFromExistingMetadata(m)}}t.importDimension(y,a)}if(t.mode!==e.QModelFormat.INA_DATA_REINIT){if(e.isNull(S)){S=l.getDimensionByNameInternal(m);if(e.isNull(S)){continue}}if(e.isNull(c)){c=y.getStringByKeyExt("AxisDefault","Free")}a.getAxis(e.QInAConverter.lookupAxisType(c)).add(S)}}}return i};e.QInARepoDimensionsAllLegacy.prototype.exportDimensionIfOnFreeAxis=function(t){var r=t.getQueryModel();var i=e.XHashSetOfString.create();var n=r.getFilter();if(n.isDynamicFilterInitialized()){e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(n.getDynamicFilter(),i);e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(n.getLinkedFilter(e.CalculatedDimensionPrequeryBuilder.FAM_MEASURE_FILTER),i);e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(n.getLinkedFilter(e.CalculatedDimensionPrequeryBuilder.FAM_SECONDARY_MEASURE_FILTER),i)}var o=i.contains(t.getName());if(t.isMeasureStructure()){var a=r.getExceptionManager();var l=e.XCollectionUtils.hasElements(a);return o||l}return o};e.QInARepoDimensionsAllLegacy.prototype.exportComponentWithList=function(t,r,i){var n=e.PrFactory.createList();if(t.mode!==e.QModelFormat.INA_VALUE_HELP){var o=r;var a=o.getModelCapabilities();var l=e.XHashSetOfString.create();e.QInARepoDimensionsAllLegacy.exportAxisDimensions(t,o.getAxis(e.AxisType.ROWS),n,l);e.QInARepoDimensionsAllLegacy.exportAxisDimensions(t,o.getAxis(e.AxisType.COLUMNS),n,l);if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var p=e.XHashSetOfString.create();if(t.mode===e.QModelFormat.INA_REPOSITORY_DATA||t.mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(o,p)}e.QInARepoDimensionsAllLegacy.exportAxisDimensionsWithHeuristic(t,o.getAxis(e.AxisType.FREE),n,p,l)}else if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)){var s=a.supportsCubeBlendingOutOfContext()&&o.isBlendingModel();var u=o.getDataSource().getType()===e.MetaObjectType.PLANNING&&t.getSession().hasFeature(e.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);var g=o.getAxis(e.AxisType.FREE);var y=g.size();var m=t.isAbap(o);for(var c=0;c<y;c++){var S=g.get(c);var A=S.getDimensionType();if(A===e.DimensionType.MEASURE_STRUCTURE||A===e.DimensionType.SECONDARY_STRUCTURE){var d=this.exportDimensionIfOnFreeAxis(S);if(d){e.QInARepoDimensionsAllLegacy.exportDimension(t,S,n,l)}}else if(A===e.DimensionType.ACCOUNT){var I=this.exportDimensionIfOnFreeAxis(S);if(I){e.QInARepoDimensionsAllLegacy.exportDimension(t,S,n,l)}}else if(A.isTypeOf(e.DimensionType.CALCULATED_DIMENSION)||s||(m||u)&&S.isHierarchyActive()){e.QInARepoDimensionsAllLegacy.exportDimension(t,S,n,l)}}e.QInARepoDimensionsAllLegacy.exportTechnicalDimension(t,o,n,l)}}return n};e.QInARepoDimensionsLegacy=function(){};e.QInARepoDimensionsLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDimensionsLegacy.prototype._ff_c="QInARepoDimensionsLegacy";e.QInARepoDimensionsLegacy.exportTechnicalDimension=function(t,r,i,n){if(!t.capabilities.supportsUniversalModel()){return}var o=r.getQueryCellManager();if(o.isEmpty()){return}var a=r.getDimensionByName("$$Cells$$");e.QInARepoDimensionsLegacy.exportDimension(t,a,i,n)};e.QInARepoDimensionsLegacy.exportAxisDimensionsWithHeuristic=function(t,r,i,n,o){var a=r.getQueryModel();var l=t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);var p=a.isOptimizedExportModeActive();var s=r.getDimensionCount();for(var u=0;u<s;u++){var g=r.get(u);if(p&&g.isIgnoredOnOptimizedExport()){continue}if(l&&!n.contains(g.getName())){continue}e.QInARepoDimensionsLegacy.exportDimension(t,g,i,o)}};e.QInARepoDimensionsLegacy.exportAxisDimensions=function(t,r,i,n){var o=r.getDimensionCount();for(var a=0;a<o;a++){var l=r.get(a);if(e.QInARepoDimensionsLegacy._isForRendering(t.getMode(),l)){continue}e.QInARepoDimensionsLegacy.exportDimension(t,l,i,n)}};e.QInARepoDimensionsLegacy._isForRendering=function(t,r){var i=r.getAxisType();return t===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING&&i!==e.AxisType.ROWS&&i!==e.AxisType.COLUMNS};e.QInARepoDimensionsLegacy.exportDimension=function(e,t,r,i){if(!i.contains(t.getName())){i.add(t.getName());r.add(e.exportDimension(t,null))}};e.QInARepoDimensionsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInARepoDimensionsLegacy.prototype.getTagName=function(){return"Dimensions"};e.QInARepoDimensionsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDimensionsLegacy.prototype.importComponentWithList=function(t,r,i,n,o){if(e.isNull(r)){return i}var a=i;var l=a.getDimensionManagerBase();if(t.mode!==e.QModelFormat.INA_DATA_REINIT){var p=a.getFreeAxis();p.addAll(l)}var s=r.size();var u=l.getDimensionReferences();for(var g=0;g<s;g++){var y=r.getStructureAt(g);var m=y.getStringByKey("Name");var c=y.getStringByKey("Axis");var S=null;if(y.containsKey("FieldMappings")){var A=t.importCalculatedDimension(y,a);l.addDimension(A);l.finalizeDimensionMetadataSetup(A)}else if(y.containsKey("CType")&&e.XComponentType.lookupComponentType(y.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var d=t.importFormulaCalculatedDimension(y,a,null);l.addDimension(d);l.finalizeDimensionMetadataSetup(d)}else{if(u.containsKey(m)){var I=e.AxisType.lookup(c);if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)||I===e.AxisType.COLUMNS||I===e.AxisType.ROWS){S=l.getDimensionByNameFromExistingMetadata(m)}}t.importDimension(y,a)}if(t.mode!==e.QModelFormat.INA_DATA_REINIT){if(e.isNull(S)){S=l.getDimensionByNameInternal(m);if(e.isNull(S)){continue}}if(e.isNull(c)){c=y.getStringByKeyExt("AxisDefault","Free")}a.getAxis(e.QInAConverter.lookupAxisType(c)).add(S)}}return a};e.QInARepoDimensionsLegacy.prototype.exportDimensionIfOnFreeAxis=function(t){var r=t.getQueryModel();var i=e.XHashSetOfString.create();if(r.getFilter().isDynamicFilterInitialized()){e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(r.getFilter().getDynamicFilter(),i)}var n=i.contains(t.getName());if(t.isMeasureStructure()){var o=r.getExceptionManager();var a=e.XCollectionUtils.hasElements(o);return n||a}return n};e.QInARepoDimensionsLegacy.prototype.exportComponentWithList=function(t,r,i){var n=e.PrFactory.createList();if(t.mode!==e.QModelFormat.INA_VALUE_HELP){var o=r;var a=o.getModelCapabilities();var l=e.XHashSetOfString.create();e.QInARepoDimensionsLegacy.exportAxisDimensions(t,o.getAxis(e.AxisType.ROWS),n,l);e.QInARepoDimensionsLegacy.exportAxisDimensions(t,o.getAxis(e.AxisType.COLUMNS),n,l);if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var p=e.XHashSetOfString.create();if(t.mode===e.QModelFormat.INA_REPOSITORY_DATA||t.mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(o,p)}e.QInARepoDimensionsLegacy.exportAxisDimensionsWithHeuristic(t,o.getAxis(e.AxisType.FREE),n,p,l)}else if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)){var s=a.supportsCubeBlendingOutOfContext()&&o.isBlendingModel();var u=o.getDataSource().getType()===e.MetaObjectType.PLANNING&&t.getSession().hasFeature(e.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);var g=o.getAxis(e.AxisType.FREE);var y=g.size();var m=t.isAbap(o);for(var c=0;c<y;c++){var S=g.get(c);var A=S.getDimensionType();if(A===e.DimensionType.MEASURE_STRUCTURE||A===e.DimensionType.SECONDARY_STRUCTURE){var d=this.exportDimensionIfOnFreeAxis(S);if(d){e.QInARepoDimensionsLegacy.exportDimension(t,S,n,l)}}else if(A===e.DimensionType.ACCOUNT){var I=this.exportDimensionIfOnFreeAxis(S);if(I){e.QInARepoDimensionsLegacy.exportDimension(t,S,n,l)}}else if(A.isTypeOf(e.DimensionType.CALCULATED_DIMENSION)||s||(m||u)&&S.isHierarchyActive()){e.QInARepoDimensionsLegacy.exportDimension(t,S,n,l)}}e.QInARepoDimensionsLegacy.exportTechnicalDimension(t,o,n,l)}}return n};e.QInARepoDrillManagerLegacy=function(){};e.QInARepoDrillManagerLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDrillManagerLegacy.prototype._ff_c="QInARepoDrillManagerLegacy";e.QInARepoDrillManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_MANAGER};e.QInARepoDrillManagerLegacy.prototype.getTagName=function(){return"HierarchyNavigations"};e.QInARepoDrillManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDrillManagerLegacy.prototype.importComponentWithList=function(t,r,i,n,o){var a=i;var l;a.removeAllContextDrillOperations();a.removeZoomDrillOperationsByDimension(null);if(e.notNull(r)){var p=-1;l=r.size();for(var s=0;s<l;s++){var u=r.getStructureAt(s);var g=u.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(g===-1){t.importDrillOperation(u,a,o)}else if(g>-1){var y=this.getZoomDrillPath(t,a,u,o);if(e.XCollectionUtils.hasElements(y)){if(g!==p){a.pushEmptyZoomDrillForDimension(y.get(y.size()-1).getDimension());p=g}var m=u.getIntegerByKeyExt("DrillOffset",0)>0;a.addZoomDrillPath(y,m)}}}}return i};e.QInARepoDrillManagerLegacy.prototype.getZoomDrillPath=function(t,r,i,n){var o=e.XList.create();var a=i.getListByKey("DrillContextMembers");if(e.notNull(a)){var l=a.size();for(var p=0;p<l;p++){var s=a.getStructureAt(p);var u=t.importDrillPathElement(s,r,n);o.add(u)}}var g=i.getStringByKey("DrillState");var y=i.getStructureByKey("DrillMember");if(e.isNull(y)||e.isNull(g)){return null}var m=t.importDrillPathElement(y,r,n);o.add(m);return o};e.QInARepoDrillManagerLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoDrillPathElementLegacy=function(){};e.QInARepoDrillPathElementLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoDrillPathElementLegacy.prototype._ff_c="QInARepoDrillPathElementLegacy";e.QInARepoDrillPathElementLegacy.prototype.getComponentType=function(){return e.MemberType.DRILL_PATH_ELEMENT};e.QInARepoDrillPathElementLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDrillPathElementLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=a.getContext().getQueryModel();var p=r.getStringByKey("FieldName");var s=r.getStringByKey("DimensionName");var u;if(e.XStringUtils.isNotNullAndNotEmpty(s)){u=l.getDimensionByNameFromExistingMetadata(s)}else{var g=l.getFieldByNameOrAlias(p);if(e.isNull(g)){u=l.getDimensionByNameFromExistingMetadata(p);if(e.notNull(u)){g=u.getKeyField();p=g.getName()}}else{u=g.getDimension()}}var y=e.QDrillPathElement._create(o);y.setDimension(u);var m=r.getStringByKey("Member");y.setName(m);y.setFieldName(p);return y};e.QInARepoDrillPathElementLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoExceptionsLegacy=function(){};e.QInARepoExceptionsLegacy.prototype=new e.QInAComponentWithList;e.QInARepoExceptionsLegacy.prototype._ff_c="QInARepoExceptionsLegacy";e.QInARepoExceptionsLegacy.importEvaluates=function(t,r,i,n){var o=t.getListByKey("EvaluateOn");if(e.isNull(o)){return}var a=o.size();var l=r.getQueryModel();for(var p=0;p<a;p++){var s=o.getStructureAt(p);var u=s.getStringByKey("Name");var g=l.getFieldByName(u);if(e.isNull(g)){var y=l.getDimensionByNameFromExistingMetadata(u);if(e.notNull(y)){g=y.getKeyField()}}if(e.isNull(g)){g=r.getKeyFieldValue().getField()}if(e.isNull(g)){n.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",u,"'!"));return}if(!s.containsKey("Low")){n.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",u));return}var m=g.getValueType();var c=e.QInAValueUtils.importValueByType(n,s,"Low",m);if(n.hasErrors()){n.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",m.getName()));return}var S=i._addNewEvaluateWithFieldInternal(g,c);if(s.containsKey("High")){var A=e.QInAValueUtils.importValueByType(n,s,"High",m);if(n.hasErrors()){n.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",m.getName()));return}S.setHighValue(A)}S.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(s.getStringByKey("Evaluate")));var d=s.getStringByKey("Comparison");var I=e.QInAConverter.lookupComparison(d);if(e.isNull(I)){n.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",d,"'"));return}S.setOperator(I)}};e.QInARepoExceptionsLegacy.importThresholds=function(t,r){var i=t.getListByKey("Threshold");if(e.notNull(i)){var n=i.size();for(var o=0;o<n;o++){var a=i.getStructureAt(o);var l=a.getIntegerByKeyExt("AlertLevel",-9999);var p;var s=!a.hasStringByKey("Low");if(s){p=r._addNewThresholdInternal(a.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}else{p=r._addNewThresholdWithStringInternal(a.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}var u=a.getStringByKey("Name");if(e.notNull(u)){p.setName(u)}var g=e.QInAConverter.lookupComparison(a.getStringByKey("Comparison"));p.setOperator(g);if(g.getNumberOfParameters()===2){if(s){var y=a.getDoubleByKey("High");p.setHighValue(y)}else{var m=a.getStringByKey("High");p.setHigh(m)}}e.QInARepoExceptionsLegacy.importSettings(a.getListByKey("Settings"),p)}}};e.QInARepoExceptionsLegacy.importSettings=function(t,r){if(e.isNull(t)){return}var i=t.size();for(var n=0;n<i;n++){var o=t.getStructureAt(n);var a=o.getStringByKey("Name");var l=o.getIntegerByKey("Priority");var p=o.getStringByKey("Value");if(e.notNull(p)&&!e.XString.isEqual(p,"")){var s=r.addNewSetting(a,l);s.setValue(p)}}};e.QInARepoExceptionsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.EXCEPTION_MANAGER};e.QInARepoExceptionsLegacy.prototype.getTagName=function(){return"Exceptions"};e.QInARepoExceptionsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoExceptionsLegacy.prototype.isVersion1=function(t,r){var i=r.getOlapComponentType();return!t.capabilities.supportsExceptionsV2()&&i.isTypeOf(e.MemberType.ABSTRACT_MEMBER)};e.QInARepoExceptionsLegacy.prototype.isVersion2=function(t,r){var i=r.getOlapComponentType();return t.capabilities.supportsExceptionsV2()&&i.isTypeOf(e.OlapComponentType.QUERY_MODEL)};e.QInARepoExceptionsLegacy.prototype.importComponentWithList=function(e,t,r,i,n){var o=r.getQueryModel().getExceptionManager();o.queueEventing();if(this.isVersion1(e,r)){o.removeAllExceptionsOfMeasure(r);this.importFormatV1(e,t,r,o)}else if(this.isVersion2(e,r)){o.clear();this.importFormatV2(e,t,r,o)}o.resumeEventing();return o};e.QInARepoExceptionsLegacy.prototype.importFormatV1=function(t,r,i,n){if(e.notNull(r)){var o=r.size();for(var a=0;a<o;a++){var l=r.getStructureAt(a);var p=this.importException(t,i,n,l);p.setMeasure(i);p.setIsChangeable(l.getBooleanByKeyExt("Changegable",true))}}};e.QInARepoExceptionsLegacy.prototype.importException=function(t,r,i,n){var o=n.getStringByKey("Name");var a=n.getStringByKey("Text");var l=e.QExceptionEvalType.lookupExceptionEvalType(n.getStringByKey("EvaluateDefault"));var p=e.QExceptionHeaderSettings.lookupExceptionHeaderSetting(n.getStringByKey("ApplySettingsToHeader"));var s=n.getBooleanByKeyExt("Active",true);var u=n.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);var g=i._addNewExceptionInternal(o,a,l,p,s,!u);g.queueEventing();e.QInARepoExceptionsLegacy.importEvaluates(n,r,g,t);e.QInARepoExceptionsLegacy.importThresholds(n,g);g.resumeEventing();return g};e.QInARepoExceptionsLegacy.prototype.importFormatV2=function(t,r,i,n){if(e.isNull(r)){return}var o=r.size();for(var a=0;a<o;a++){var l=r.getStructureAt(a);var p=l.getListByKey("StructureContext");if(!e.PrUtils.isListEmpty(p)){var s=this.importContextItem(p.getStructureAt(0),i,n,null,t,l);if(e.notNull(s)){if(p.size()>1){this.importContextItem(p.getStructureAt(1),i,n,s,t,l)}s.setIsChangeable(l.getBooleanByKeyExt("Changegable",true))}}}};e.QInARepoExceptionsLegacy.prototype.importContextItem=function(t,r,i,n,o,a){var l=n;var p=r.getDimensionByNameFromExistingMetadata(t.getStringByKey("DimensionName"));if(e.notNull(p)){var s=this.getMemberFromContextItem(t,p);if(e.notNull(s)){if(e.isNull(l)){l=this.importException(o,s,i,a)}if(p.isMeasureStructure()){l.setMeasure(s)}else{l.setStructure(s)}l.displayOnOtherMember(s,p.getStructureMember(t.getStringByKey("DisplayOnOtherMember")));l.setEvaluateAllMembers(p,t.getBooleanByKeyExt("EvaluateAllMembers",false))}}return l};e.QInARepoExceptionsLegacy.prototype.getMemberFromContextItem=function(t,r){var i=r.getStructureMember(t.getStringByKey("MemberName"));if(e.isNull(i)){var n=t.getBooleanByKeyExt("EvaluateAllMembers",false);var o=r.getAllStructureMembers();if(n&&!o.isEmpty()){return o.get(0)}}return i};e.QInARepoExceptionsLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoFilterAlgebraLegacy=function(){};e.QInARepoFilterAlgebraLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterAlgebraLegacy.prototype._ff_c="QInARepoFilterAlgebraLegacy";e.QInARepoFilterAlgebraLegacy.prototype.getComponentType=function(){return e.FilterComponentType.BOOLEAN_ALGEBRA};e.QInARepoFilterAlgebraLegacy.prototype.getTagName=function(){return"Operator"};e.QInARepoFilterAlgebraLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterAlgebraLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=r.getListByKey("SubSelections");if(e.notNull(l)){var p=r.getStringByKey("Code");var s;if(e.XString.isEqual(p,"And")){s=e.QFilterAnd._create(o,a)}else if(e.XString.isEqual(p,"Not")){s=e.QFilterNot._create(o,a)}else{s=e.QFilterOr._create(o,a)}var u=l.size();for(var g=0;g<u;g++){var y=l.getStructureAt(g);var m=t.importFilterElement(y,null,a,o);if(e.notNull(m)){s.add(m)}}if(s.hasElements()){return s}}return null};e.QInARepoFilterAlgebraLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterAllLegacy=function(){};e.QInARepoFilterAllLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterAllLegacy.prototype._ff_c="QInARepoFilterAllLegacy";e.QInARepoFilterAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.SELECTOR};e.QInARepoFilterAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterAllLegacy.prototype.importComponentWithStructure=function(e,t,r,i,n){var o=r;e.importFixedFilter(t,o,n);e.importDynamicFilter(t,o,n);e.importVisibilityFilter(t,o,n);return o};e.QInARepoFilterAllLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterCellValueOperandLegacy=function(){};e.QInARepoFilterCellValueOperandLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterCellValueOperandLegacy.prototype._ff_c="QInARepoFilterCellValueOperandLegacy";e.QInARepoFilterCellValueOperandLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_CELL_VALUE_OPERAND};e.QInARepoFilterCellValueOperandLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterCellValueOperandLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=r.getStringByKey("Low");if(e.XString.isEqual(a,"")){a=null}var l=r.getStringByKey("High");if(e.XString.isEqual(l,"")){l=null}var p=e.QInAConverter.lookupComparison(r.getStringByKey("Comparison"));var s=e.QFilterCellValueOperand._create(o,null,a,l,p);s.setIsExcluding(r.getBooleanByKey("IsExcluding"));return s};e.QInARepoFilterCellValueOperandLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterElementLegacy=function(){};e.QInARepoFilterElementLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterElementLegacy.prototype._ff_c="QInARepoFilterElementLegacy";e.QInARepoFilterElementLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_ELEMENT};e.QInARepoFilterElementLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterElementLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=i;if(r.containsKey("Operator")){l=t.importFilterAlgebra(a,r,o)}else{var p=r.getStructureByKey("SetOperand");if(e.isNull(p)){if(r.containsKey("GeometryOperand")){l=t.importFilterGeo(a,r,o)}}else{l=t.importCartesianList(p,l,a,o)}}return l};e.QInARepoFilterElementLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterExpressionLegacy=function(){};e.QInARepoFilterExpressionLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterExpressionLegacy.prototype._ff_c="QInARepoFilterExpressionLegacy";e.QInARepoFilterExpressionLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_EXPRESSION};e.QInARepoFilterExpressionLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterExpressionLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.isNull(a)){a=e.QFactory.createFilterExpression(o,n)}var l=0;var p=null;if(e.notNull(r)){p=r.getStructureByKey("Selection");if(e.isNull(p)){p=r.getStructureByKey("SelectionRepo");l=1}}a.setCartesianProduct(null);a.setComplexRoot(null);if(e.notNull(p)){var s=t.importFilterElement(p,null,a,o);if(e.notNull(s)){if(l>=1){a.setComplexRoot(s)}else{var u=e.QFilterUtil.convertComplexFilterToCartesian(s);if(e.notNull(u)){a.setCartesianProduct(u)}else{a.setComplexRoot(s)}}}}if(a.getModelCapabilities().supportsCellValueOperand()){a.setIsSuppressingNulls(false);a.clearCellValueFilter();if(e.notNull(r)){if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){a.setIsSuppressingNulls(r.getBooleanByKeyExt("IsSuppressingNulls",false))}if(e.notNull(p)){var g=p.getStructureByKey("CellValueOperand");if(e.isNull(g)){var y=p.getStructureByKey("Operator");if(e.notNull(y)){var m=y.getListByKey("SubSelections");if(m.size()===2){var c=m.getStructureAt(1);g=c.getStructureByKey("CellValueOperand")}}}if(e.notNull(g)){var S=g.getListByKey("Elements");if(e.notNull(S)){var A=e.QFilterCellValueOperand.createForNullSuppression(o,null);var d=S.size();if(d>0){var I=S.getStructureAt(0);var f=t.importFilterCellValueOperand(I,o);var N=0;if(f.isEqualTo(A)){a.setIsSuppressingNulls(true);N=1}a.clearCellValueFilter();for(var v=N;v<d;v++){var T=S.getStructureAt(v);var R=t.importFilterCellValueOperand(T,o);a.addCellValueFilter(R)}}}}}}}return a};e.QInARepoFilterExpressionLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterExpressionLegacy.prototype.exportComponent=e.noSupport;e.QInARepoFilterFixedLegacy=function(){};e.QInARepoFilterFixedLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterFixedLegacy.prototype._ff_c="QInARepoFilterFixedLegacy";e.QInARepoFilterFixedLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_FIXED};e.QInARepoFilterFixedLegacy.prototype.getTagName=function(){return"FixedFilter"};e.QInARepoFilterFixedLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterFixedLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.isNull(r)){return null}var a=n;var l=t.importFilterExpression(null,r,a,o);if(e.notNull(a)&&e.notNull(l)){a.setFixedFilter(l)}return l};e.QInARepoFilterFixedLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterGeoLegacy=function(){};e.QInARepoFilterGeoLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterGeoLegacy.prototype._ff_c="QInARepoFilterGeoLegacy";e.QInARepoFilterGeoLegacy.tryCreateGeometry=function(t){var r=e.XGeometryValue.createGeometryValueWithWkt(t);if(e.isNull(r)){r=e.XStringValue.create(t)}return r};e.QInARepoFilterGeoLegacy.prototype.getComponentType=function(){return e.FilterComponentType.SPATIAL_FILTER};e.QInARepoFilterGeoLegacy.prototype.getTagName=function(){return"GeometryOperand"};e.QInARepoFilterGeoLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterGeoLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=o.getFieldAccessorSingle();var p=r.getStringByKey("Comparison");var s=r.getStringByKey("FieldName");var u=r.getStringByKey("Value1");if(e.XStringUtils.isNotNullAndNotEmpty(p)&&e.XStringUtils.isNotNullAndNotEmpty(s)&&e.XStringUtils.isNotNullAndNotEmpty(u)){var g=e.QInAConverter.lookupComparison(p);if(e.isNull(g)){return null}if(!g.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){return null}var y=l.getFieldByName(s);if(e.isNull(y)){return null}var m=e.QFactory.createFilterOperationWithOperator(a,y,g);var c=e.QInARepoFilterGeoLegacy.tryCreateGeometry(u);m.getLow().setValue(c);var S=r.getStringByKey("Value2");if(e.XStringUtils.isNotNullAndNotEmpty(S)){var A=e.QInARepoFilterGeoLegacy.tryCreateGeometry(S);m.getHigh().setValue(A)}var d=r.getStringByKey("Value3");if(e.XStringUtils.isNotNullAndNotEmpty(d)){var I=e.QInARepoFilterGeoLegacy.tryCreateGeometry(d);m.getThird().setValue(I)}return m}return null};e.QInARepoFilterGeoLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterManagerLegacy=function(){};e.QInARepoFilterManagerLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterManagerLegacy.prototype._ff_c="QInARepoFilterManagerLegacy";e.QInARepoFilterManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_FILTER_MANAGER};e.QInARepoFilterManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterManagerLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.isNull(a)){a=o.getOlapEnv().getFilterManager()}var l=r.getStructureByKey("OlapFilterManager");var p=l.getStructureByKey("OlapFilters");var s=p.getKeysAsIteratorOfString();while(s.hasNext()){var u=s.next();var g=a.getFilterByName(u);t.importFilterExpression(g,p.getStructureByKey(u),a,a.getContext())}return a};e.QInARepoFilterManagerLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterOperationLegacy=function(){};e.QInARepoFilterOperationLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterOperationLegacy.prototype._ff_c="QInARepoFilterOperationLegacy";e.QInARepoFilterOperationLegacy.importValue=function(t,r,i,n,o,a,l,p,s){var u=a.getStringByKey(p);if(e.XString.isEqual("Variable",u)){n.setFilterValueType(e.XValueType.VARIABLE);var g=a.getStringByKey(l);var y=r.getVariables().getByKey(g);if(e.notNull(y)){n.setVariableValue(y)}}else{var m=e.QInAConverter.lookupValueType(a.getStringByKeyExt("LowIs",null));if(m===e.XValueType.CURRENT_MEMBER||m===e.XValueType.VARIABLE){n.setFilterValueType(m)}if(e.notNull(s)){var c=a.getListByKey(s);if(e.notNull(c)){var S=n.getMemberNavigations();var A=c.size();for(var d=0;d<A;d++){S.add(e.QInARepoFilterOperationLegacy.importMemberNavigation(c.getStructureAt(d)))}}}e.QInAValueUtils.importValue(t,n,a,l,o,i)}};e.QInARepoFilterOperationLegacy.importMemberNavigation=function(t){var r=e.QFactory.createMemberNavigation(e.CurrentMemberFunction.lookup(t.getStringByKey("Function")));if(t.containsKey("Parameters")){var i=t.getListByKey("Parameters");var n=i.size();for(var o=0;o<n;o++){var a=i.getStructureAt(o);if(a.containsKey("Navigations")){var l=a.getListByKey("Navigations");var p=l.size();for(var s=0;s<p;s++){r.addNavigation(e.QInARepoFilterOperationLegacy.importMemberNavigation(l.getStructureAt(s)))}}else{if(a.containsKey("Level")){var u=a.getByKey("Level");if(u.isNumeric()){r.addParameter(e.QFactory.createNavigationParameterWithLevelNumber(u.getInteger()))}else{r.addParameter(e.QFactory.createNavigationParameterWithLevelLiteral(u.getString()))}}else if(a.containsKey("Member")){r.addParameter(e.QFactory.createNavigationParameterWithMemberName(a.getStringByKey("Member")))}else if(a.containsKey("NoValuesAboveLevel")){r.addParameter(e.QFactory.createNavigationParameterWithNoValuesAboveLevel(a.getStringByKey("NoValuesAboveLevel")))}else if(a.containsKey("ErrorAboveLevel")){r.addParameter(e.QFactory.createNavigationParameterWithErrorAboveLevel(a.getStringByKey("ErrorAboveLevel")))}else if(a.containsKey("Shift")){var g=a.getStructureByKey("Shift");r.addParameter(e.QFactory.createNavigationParameterWithShift(g.getStringByKey("Level"),g.getIntegerByKey("Constant")))}else if(a.containsKey("Range")){var y=a.getStructureByKey("Range");r.addParameter(e.QFactory.createNavigationParameterWithRange(y.getStringByKey("Level"),y.getIntegerByKey("OffsetLow"),y.getIntegerByKey("OffsetHigh")))}else{var m=a.getByKey("Constant");if(m.isNumeric()){r.addParameter(e.QFactory.createNavigationParameterWithIntegerConstant(m.getInteger()))}else{r.addParameter(e.QFactory.createNavigationParameterWithStringConstant(m.getString()))}}}}}return r};e.QInARepoFilterOperationLegacy.prototype.getComponentType=function(){return e.FilterComponentType.OPERATION};e.QInARepoFilterOperationLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterOperationLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=r.getStringByKeyExt("Comparison","=");var l=e.QInAConverter.lookupComparison(a);if(e.isNull(l)){t.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate2("Unsupported comparison operator: ",a));return null}var p=n;var s=p.getFilterExpression();var u=p.getField();var g=e.QFactory.createFilterOperationWithOperator(s,u,l);var y=u.getValueType();var m=l.isTypeOf(e.ComparisonOperator.LIKE)||l.isTypeOf(e.ComparisonOperator.MATCH)||l.isTypeOf(e.ComparisonOperator.NOT_MATCH);if(m){y=e.XValueType.STRING}if(r.getBooleanByKeyExt("IsExcluding",false)){g.setSetSign(e.SetSign.EXCLUDING)}else{g.setSetSign(e.SetSign.INCLUDING)}g.resetDepth();var c=r.getIntegerByKeyExt("Depth",-1);if(c!==-1){g.setDepth(c)}g.resetLevelOffset();var S=r.getIntegerByKeyExt("LevelOffset",-1);if(S!==-1){g.setLevelOffset(S)}var A=r.getStructureByKey("Hierarchy");if(e.notNull(A)){var d=A.getStringByKey("Name");var I=null;var f=null;var N=g.getQueryModel();if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&e.notNull(N)&&N.getSystemType().isTypeOf(e.SystemType.ABAP)){var v=A.getStringByKey("DueDate");if(e.notNull(v)){I=e.XDate.createDateFromSAPFormat(v)}f=A.getStringByKey("Version")}g.setHierarchyInfo(d,I,f)}if(t.capabilities.supportsConvertToFlatFilter()){g.setConvertToFlatFilter(r.getBooleanByKeyExt("ConvertToFlatSelection",false))}var T=p.getSupplementFieldNames();var R=o.getVariableContainer();var E=l.getNumberOfParameters();if(E>=1){var C=g.getLow();e.QInARepoFilterOperationLegacy.importValue(t,R,u,C,y,r,"Low","LowIs","LowNavigations");e.QInAValueUtils.importSupplements(t,C,r,"LowSupplements",T)}if(E>=2){var Q=g.getHigh();e.QInARepoFilterOperationLegacy.importValue(t,R,u,Q,y,r,"High","HighIs",null);e.QInAValueUtils.importSupplements(t,Q,r,"HighSupplements",T)}if(E>=3){var M=g.getThird();e.QInARepoFilterOperationLegacy.importValue(t,R,u,M,y,r,"Value3","Value3Is",null);e.QInAValueUtils.importSupplements(t,M,r,null,T)}return g};e.QInARepoFilterOperationLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoHierarchyLegacy=function(){};e.QInARepoHierarchyLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoHierarchyLegacy.prototype._ff_c="QInARepoHierarchyLegacy";e.QInARepoHierarchyLegacy.appendItemsToCatalogResult=function(t,r,i){var n=e.PrUtils.getListSize(r,0);for(var o=0;o<n;o++){var a=e.PrUtils.getStructureElement(r,o);var l=e.HierarchyCatalogItem.createCatalogItem();l.setDimensionName(i);var p;if(a.hasStringByKey("Name")){p=a.getStringByKey("Name")}else{p=a.getStringByKey("HierarchyName")}if(e.XStringUtils.isNullOrEmpty(p)||t.containsHierarchy(p)){continue}l.setHierarchyName(p);l.setHierarchyUniqueName(a.getStringByKey("UniqueName"));var s=e.PrUtils.getStringProperty(a,"Description");if(e.notNull(s)){l.setHierarchyLongText(s.getString())}var u=e.PrUtils.getStringProperty(a,"Version");if(e.notNull(u)){l.setVersionName(u.getString())}var g=e.PrUtils.getStringProperty(a,"Structure");if(e.notNull(g)){l.setHierarchyType(e.HierarchyType.lookup(g.getString()))}var y=e.PrUtils.getBooleanValueProperty(a,"IsModeled",false);l.setIsModeled(y);var m=e.PrUtils.getStringProperty(a,"DateTo");if(e.notNull(m)){var c=m.getString();if(e.XStringUtils.isNotNullAndNotEmpty(c)){l.setDateTo(e.XDate.createDateFromIsoFormat(c))}}var S=e.PrUtils.getListProperty(a,"Levels");if(e.notNull(S)){l.setSupportsHierarchyLevels(true);var A=e.XList.create();var d=e.PrUtils.getListSize(S,0);for(var I=0;I<d;I++){var f=e.PrUtils.getStructureElement(S,I);if(e.isNull(f)){continue}var N=e.HierarchyCatalogLevel.createCatalogLevel();var v=e.PrUtils.getIntegerValueProperty(f,"Level",-1);if(v>-1){N.setLevel(v)}var T=e.PrUtils.getStringProperty(f,"LevelName");if(e.notNull(T)){N.setLevelName(T.getString())}var R=e.PrUtils.getStringProperty(f,"LevelCaption");if(e.notNull(R)){N.setLevelDescription(R.getString())}var E=e.PrUtils.getStringProperty(f,"LevelUniqueName");if(e.notNull(E)){N.setLevelUniqueName(E.getString())}var C=e.PrUtils.getStringProperty(f,"DimensionName");if(e.notNull(C)){N.setLevelDimensionName(C.getString())}var Q=e.PrUtils.getIntegerProperty(f,"LevelType");if(e.notNull(Q)){N.setLevelType(e.QInAConverter.lookupHierarchyLevelType(Q.getInteger()))}A.add(N)}l.setHierarchyLevels(A)}var M=a.getStringByKey("RestNode");if(e.notNull(M)){l.setRestNode(M)}var D=a.getStringByKey("VirtualRootNode");if(e.notNull(D)){l.setVirtualRootNode(D)}t.addItem(l)}return t};e.QInARepoHierarchyLegacy.importLeveledHierarchy=function(t,r,i,n){var o=e.QLeveledHierarchy.create(r,i,n.getStringByKey(n.containsKey("Name")?"Name":"HierarchyName"));o.setHierarchyUniqueName(n.getStringByKey("UniqueName"));if(n.getStringByKey("DimensionName")===null){o.setDimensionName(i.getName())}else{o.setDimensionName(n.getStringByKey("DimensionName"))}o.setHierarchyType(e.HierarchyType.lookup(n.getStringByKey("Structure")));o.setIsModeled(n.getBooleanByKeyExt("IsModeled",false));var a=n.getStringByKey("DueDate");if(e.XStringUtils.isNotNullAndNotEmpty(a)){o.setDateTo(e.QInARepoUtils.createDate(a))}o.setHierarchyDescription(n.getStringByKey("Description"));var l=n.getListByKey("Levels");if(!e.PrUtils.isListEmpty(l)){e.QInARepoHierarchyLegacy.importLevels(o,l)}return o};e.QInARepoHierarchyLegacy.importLevels=function(t,r){var i=r.size();for(var n=0;n<i;n++){var o=r.getStructureAt(n);var a=e.QHierarchyLevel.create(t,o.getStringByKey("LevelUniqueName"),o.getIntegerByKey("Level"));a.setLevelName(o.getStringByKey("LevelName"));a.setLevelText(o.getStringByKey("LevelCaption"));a.setLevelDimensionName(o.getStringByKey("DimensionName"));a.setLevelType(e.QInAConverter.lookupHierarchyLevelType(o.getIntegerByKey("LevelType")));a.setNavigationAttribute(o.getStringByKey("NavAttr"));t.getAllLevelBase().add(a)}};e.QInARepoHierarchyLegacy.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY};e.QInARepoHierarchyLegacy.prototype.getTagName=function(){return"Hierarchy"};e.QInARepoHierarchyLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoHierarchyLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(a.supportsHierarchy()){var l=a.isDisplayHierarchyFixInFilter();a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);if(e.isNull(r)){a.setHierarchy(null)}else{var p;if(r.hasStringByKey("Name")){p=r.getStringByKey("Name")}else{p=r.getStringByKey("HierarchyName")}var s=null;if(e.XStringUtils.isNotNullAndNotEmpty(p)){if(a.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(r,a);this.importLeveledHierarchyToMetadata(t,r,o,a)}if(r.getBooleanByKey("IsTransient")){s=e.QHierarchy.createCustomHierarchy(a.getContext(),a,p,r.getStringByKey("Description"))}else{s=e.QHierarchy.create(a.getContext(),a,p)}s.setHierarchyVersion(r.getStringByKey("Version"));var u=r.getStringByKey("DueDate");var g=r.getStringByKey("DueDateIs");var y=e.notNull(g)&&e.XString.isEqual("Variable",g);a.setUseHierarchyDueDateVariable(y);if(y){if(e.XStringUtils.isNullOrEmpty(u)){a.setHierarchyDueDateVariableName(null)}else{a.setHierarchyDueDateVariableName(u)}}else{s.setHierarchyDueDate(e.QInARepoUtils.createDate(u))}var m=r.getStringByKey("DateTo");s.setDateTo(e.QInARepoUtils.createDate(m));var c=r.getStringByKey("0DATEFROM");s.setDateFrom(e.QInARepoUtils.createDate(c));var S=r.getStructureByKey("Metadata");if(e.notNull(S)){m=S.getStringByKey("DateTo");if(e.XStringUtils.isNotNullAndNotEmpty(m)){s.setDateTo(e.QInARepoUtils.createDate(m))}c=S.getStringByKey("0DATEFROM");if(e.XStringUtils.isNotNullAndNotEmpty(c)){s.setDateFrom(e.QInARepoUtils.createDate(c))}}a.setHierarchy(s);var A=r.getBooleanByKeyExt("HierarchyActive",true);a.setHierarchyActive(A);a.setSelectorHierarchyActive(A)}var d=r.getListByKey("StickyDimensionMembers");a.clearStickyMembers();if(e.XCollectionUtils.hasElements(d)){for(var I=0;I<d.size();I++){a.addStickyMember(d.getStringAt(I))}}var f=r.getIntegerByKeyExt("InitialDrillOffset",0);var N=r.getIntegerByKeyExt("InitialDrillLevel",0);var v=a.getModelCapabilities();if(v.supportsVisibilityFilter()||!t.mode.isTypeOf(e.QModelFormat.INA_DATA)){a.setInitialDrillLevel(N);a.setSelectorInitialDrillLevel(N)}else{if(N===-1){a.setInitialDrillLevel(N);a.setSelectorInitialDrillLevel(N)}else if(f===-1){a.setInitialDrillLevel(0);a.setSelectorInitialDrillLevel(0)}else{a.setInitialDrillLevel(N+f);a.setSelectorInitialDrillLevel(N+f)}}a.setInitialDrillOffset(f);a.setExplicitDrillOnFilteredNodes(r.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));var T=e.Alignment.DEFAULT_VALUE;if(o.getModelCapabilities().supportsExpandBottomUp()){var R=r.getStringByKeyExt("LowerLevelNodeAlignment","Default");T=e.QInAConverter.lookupLowerLevelNodeAlignment(R);if(r.containsKey("ExpandBottomUp")){var E=r.getBooleanByKeyExt("ExpandBottomUp",false);if(E){T=e.Alignment.CHILDREN_ABOVE_PARENT}}}a.setLowerLevelNodeAlignment(T);var C=r.getBooleanByKeyExt("NodeCondensation",false);a.setHasNodeCondensation(C);var Q=r.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");var M=e.QInAConverter.lookupResultSetVisibility(Q);a.setMemberOfPostedNodeVisibility(M);a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(l);return s}a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(l)}return null};e.QInARepoHierarchyLegacy.prototype.importHierarchyAsCatalogItem=function(t,r){var i=e.PrFactory.createList();i.add(t);var n=r.getHierarchies();if(e.isNull(n)){n=e.QFactory.createHierarchyCatalogResult();e.QInARepoHierarchyLegacy.appendItemsToCatalogResult(n,i,r.getName());r.getHierarchyManagerBase().setHierarchies(n)}else{e.QInARepoHierarchyLegacy.appendItemsToCatalogResult(n,i,r.getName())}};e.QInARepoHierarchyLegacy.prototype.importLeveledHierarchyToMetadata=function(t,r,i,n){var o=n.getQueryModelBase().getQueryManagerBase();if(e.notNull(o)&&!e.PrUtils.isListEmpty(r.getListByKey("Levels"))){var a=o.getMetadataModelBase();var l=a.getLeveledHierarchiesBase();var p=e.QInARepoHierarchyLegacy.importLeveledHierarchy(t,i,n,r);if(!l.contains(p)){l.add(p)}}};e.QInARepoHierarchyLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoMemberRestrictedLegacy=function(){};e.QInARepoMemberRestrictedLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoMemberRestrictedLegacy.prototype._ff_c="QInARepoMemberRestrictedLegacy";e.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip=function(t,r){var i=r.getChildren();while(i.hasNext()){var n=i.next();if(n.getOlapComponentType()===e.FilterComponentType.OPERATION){var o=n;var a=o.getDimensionName();if(e.XString.isEqual(t,a)){return o.getLow().getValue().toString()}}var l=e.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip(t,n);if(e.notNull(l)){return l}}return null};e.QInARepoMemberRestrictedLegacy.getMemberForSignFlip=function(t,r){if(r.getAccountType()!==null){return r.getName()}var i=r.getDimensionContext(t.getQueryManager());var n=r.getFilter();var o=i.getName();if(e.notNull(o)){if(n.isAll()){o=e.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip(o,n.getFilterRootElement())}var a=i.getStructureMemberByAliasOrMember(o);if(e.notNull(a)&&a.getComponentType()===e.MemberType.RESTRICTED_MEASURE&&a!==r){return e.QInARepoMemberRestrictedLegacy.getMemberForSignFlip(t,a)}}return o};e.QInARepoMemberRestrictedLegacy.prototype.getComponentType=function(){return e.MemberType.RESTRICTED_MEASURE};e.QInARepoMemberRestrictedLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoMemberRestrictedLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a;if(e.isNull(i)){var l=n;var p=this.getNameForImport(r,l);var s=this.getText(r,l);if(l.getModelCapabilities().supportsCustomMeasuresInMetadata()&&l.getLoadedStructureMember(p)!==null){a=l.getLoadedStructureMember(p)}else{a=l.addNewRestrictedMeasure(p,s)}}else{a=i}var u=r.getStringByKey("AggregationDimension");if(e.XStringUtils.isNotNullAndNotEmpty(u)){a.setAggregationDimensionName(u)}var g=r;if(a.getModelCapabilities().supportsCustomMeasuresInMetadata()&&t.getMode()===e.QModelFormat.INA_DATA){g=r.getStructureByKey("[Measures].[MemberDetails]")}if(a.getMemberType()===e.MemberType.RESTRICTED_MEASURE){t.importFilterExpression(a.getFilter(),g,a,o)}t.importExceptions(g,a);return a};e.QInARepoMemberRestrictedLegacy.prototype.getNameForImport=function(t,r){var i=t.getStringByKey("Name");if(e.isNull(i)&&e.notNull(r)){var n=r.getKeyField();var o=n.getName();return t.getStringByKey(o)}return i};e.QInARepoMemberRestrictedLegacy.prototype.getText=function(t,r){var i=t.getStringByKey("Description");if(e.isNull(i)&&e.notNull(r)){var n=r.getTextField();if(e.notNull(n)){var o=n.getName();return t.getStringByKey(o)}}return i};e.QInARepoMemberRestrictedLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoMembersAllLegacy=function(){};e.QInARepoMembersAllLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoMembersAllLegacy.prototype._ff_c="QInARepoMembersAllLegacy";e.QInARepoMembersAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.MEMBERS};e.QInARepoMembersAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoMembersAllLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(a.supportsCustomMembers()){a.removeCustomMembers()}var l=r.getListByKey("MembersRepo");if(e.isNull(l)){l=r.getListByKey("Members");if(e.isNull(l)){return null}}var p=a.getStructureLayout();if(e.notNull(p)){p.clear();var s=l.size();for(var u=0;u<s;u++){var g=l.getStructureAt(u);var y=t.importStructureMember(a,g,o);if(e.notNull(y)){var m=a.getLoadedStructureMember(y.getName());if(e.isNull(m)){a.addMeasure(y)}else{if(m!==y){throw e.XException.createIllegalStateException("Internal error: New member with same name not allowed")}p.removeElement(m);p.add(m)}}}}return a};e.QInARepoMembersAllLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoQueryLegacy=function(){};e.QInARepoQueryLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoQueryLegacy.prototype._ff_c="QInARepoQueryLegacy";e.QInARepoQueryLegacy.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QInARepoQueryLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoQueryLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=r;var p=l.getListByKey("Queries");if(e.notNull(p)){l=p.getStructureAt(p.size()-1)}var s=l.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(s)){l=s.getStructureAt(s.size()-1)}if(e.notNull(l)&&l.containsKey("Analytics")){l=l.getStructureByKey("Analytics");if(e.notNull(l)&&l.containsKey("Definition")){l=l.getStructureByKey("Definition")}}if(e.notNull(l)&&l.containsKey("Definition")){l=l.getStructureByKey("Definition")}if(e.notNull(l)){var u=t.getOriginalMode()===e.QModelFormat.INA_CLONE_RENDERING&&t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);var g=t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);if(g&&l.containsKey("ModellerDefinition")){l=l.getStructureByKey("ModellerDefinition");var y=a.isEventingStopped();if(!y){a.stopEventing()}a.setDeltaPhase(e.QDeltaOperationPhase.NOTE_MODELER_CHANGES);t.importModellerDimensions(l,a,a);t.importModellerDefinedVariables(l,a.getVariableManagerBase(),a);t.importModellerCurrencyTranslation(l,a.getCurrencyTranslationManagerBase(),a);t.importModellerMetadataProperties(l,a,a);t.importFormulaExceptionManager(l,a.getFormulaExceptionManagerBase(),a);a.finishModelerEventing();if(!y){a.resumeEventing()}return a}t.importDimensions(l,a,a);if(!u){t.importFilter(l,a.getFilterBase(),a);t.importExceptions(l,a);t.importQueryCells(l,a.getQueryCellManager(),a);t.importUniversalDisplayHierarchies(l,a.getUniversalDisplayHierarchiesBase(),a)}t.importCurrencyTranslationManager(l,a.getCurrencyTranslationManager(),a);t.importSortingManager(l,a.getSortingManagerBase(),a);t.importDrillManager(l,a.getDrillManager(),a);t.importVariableManager(l,a.getVariableManagerBase(),a);t.importQuerySettings(l,a);t.importDataCells(l,a);t.importConditionManager(l,a.getConditionManagerBase(),a);if(g){t.importFormulaExceptionManager(l,a.getFormulaExceptionManagerBase(),a);this.importPaging(t,l,a);e.QInARepoOptions.importSuppressKeyfigureCalculation(l,a.getQueryManager());var m=a.getResultStructureController();t.importComponent(null,l,m,a,a);var c=a.getQueryManager();if(e.notNull(c)){c.setResultSetPersistanceTargetTable(l.getStringByKey("ResultSetPersistanceTable"));c.setResultSetPersistanceTargetSchema(l.getStringByKey("ResultSetPersistanceSchema"));c.setResultSetPersistenceIdentifier(l.getStringByKey("ResultSetPersistanceIdentifier"))}var S=l.getListByKey("PreQueries");if(e.notNull(S)){var A=null;var d=l.getStructureByKey("DataSource");if(e.notNull(d)){A=d.getStringByKey("System")}this.importPreQueries(t,a,S,A)}if(a.isBlendingModel()){this.importBlendingSources(t,r,a)}}}return a};e.QInARepoQueryLegacy.prototype.importBlendingSources=function(t,r,i){var n=i.getBlendingSources();if(!e.XCollectionUtils.hasElements(n)){return}var o=e.PrUtils.getStructureProperty(r,"DataSource");var a=e.PrUtils.getListProperty(o,"Sources");if(e.PrUtils.isListEmpty(a)){return}for(var l=0;l<n.size();l++){var p=e.PrUtils.getStructureElement(a,l);var s=e.PrUtils.getStructureProperty(p,"DefiningContext");if(e.notNull(s)){var u=n.get(l).getQueryModel();u.deserializeFromElementExt(t.mode,s)}}};e.QInARepoQueryLegacy.prototype.importPaging=function(t,r,i){var n=r.getStructureByKey("SubSetDescription");var o=i.getQueryManager();var a=t.mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(e.isNull(n)||!i.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||o.applyingStateOnQueryManager()&&!a){return}e.QInARepoOptions.importPaging(r,o)};e.QInARepoQueryLegacy.prototype.getInactiveCapabilities=function(t){var r=e.XHashMapByString.create();var i=e.FeatureToggle.getAllFeatureToggles();var n=i.getKeysAsIteratorOfString();while(n.hasNext()){r.put(n.next(),e.XBooleanValue.create(false))}var o=t.getSession().getFeatureToggles();if(e.notNull(o)){var a=o.getKeysAsIteratorOfString();while(a.hasNext()){r.put(a.next(),e.XBooleanValue.create(true))}}return r};e.QInARepoQueryLegacy.prototype.importPreQueries=function(t,r,i,n){var o=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.mode=t.getOriginalMode()}var a=e.XStringBuffer.create();var l=this.getInactiveCapabilities(r);var p=i.size();for(var s=0;s<p;s++){var u=i.getStructureAt(s);var g=u.getStructureByKey("Runtime");if(e.isNull(g)){g=u}var y=g.getStructureByKey("DataSource");a.clear();a.append(y.getStringByKey("Type")).append(":[");a.append(y.getStringByKey("SchemaName"));a.append("][");a.append(y.getStringByKey("PackageName"));a.append("][");a.append(y.getStringByKey("ObjectName")).append("]");var m=e.XCommandFactory.create(r.getApplication());var c=m.createCommand(e.CmdCreateQueryManager.CMD_NAME);c.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,r.getApplication());c.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,l);var S=y.getStringByKey("System");if(t.mode===e.QModelFormat.INA_REPOSITORY&&e.XString.isEqual(S,n)){S=r.getDataSource().getSystemName()}c.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,S);c.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,a.toString());var A=c.processCommand(e.SyncType.BLOCKING,null,null);t.addAllMessages(A);e.XObjectExt.release(c);if(A.isValid()){var d=A.getData().getResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();t.importPreQuery(u,d);var I=u.getStringByKey("ObjectName");var f=r.getPreQueryByName(I);if(e.isNull(f)){r.addPreQueryWithName(d,I)}}}t.mode=o};e.QInARepoQueryLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoQuerySettingsLegacy=function(){};e.QInARepoQuerySettingsLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoQuerySettingsLegacy.prototype._ff_c="QInARepoQuerySettingsLegacy";e.QInARepoQuerySettingsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SETTINGS};e.QInARepoQuerySettingsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoQuerySettingsLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=e.PrUtils.getStringProperty(r,"Name");var l=o.getQueryModel();if(e.notNull(a)){l.setDefinitionName(a.getString())}var p=r.getStructureByKey("Query");t.importAxesSettings(p,l);if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var s=r.getStructureByKey("CurrencyTranslation");if(e.notNull(s)){var u=l.getCurrencyTranslationManager().getCurrencyTranslationDetails();u.setCurrencyTranslationName(s.getStringByKey("Name"));u.setCurrencyTranslationOperation(e.CurrencyTranslationOperation.lookup(s.getStringByKey("Operation")));u.setCurrencyTranslationTarget(s.getStringByKey("Target"))}var g=e.PrUtils.getListProperty(p,"AxesLayout");var y=e.PrUtils.getListSize(g,0);for(var m=0;m<y;m++){var c=e.PrUtils.getStructureElement(g,m);var S=e.AxisType.lookup(e.PrUtils.getStringValueProperty(c,"Axis",null));var A=l.getAxis(S);if(e.isNull(A)){continue}var d=e.PrUtils.getListProperty(c,"OrderedDimensionNames");if(e.isNull(d)){continue}var I=e.XListOfString.create();for(var f=0;f<e.PrUtils.getListSize(d,0);f++){var N=e.PrUtils.getStringElement(d,f);if(e.isNull(N)){continue}I.add(N.getString())}A.reOrderDimensions(I)}}return l};e.QInARepoQuerySettingsLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoSortLegacy=function(){};e.QInARepoSortLegacy.prototype=new e.QInAComponentWithList;e.QInARepoSortLegacy.prototype._ff_c="QInARepoSortLegacy";e.QInARepoSortLegacy.prototype.getComponentType=function(){return e.OlapComponentType.SORT_MANAGER};e.QInARepoSortLegacy.prototype.getTagName=function(){return"Sort"};e.QInARepoSortLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoSortLegacy.prototype.importComponentWithList=function(t,r,i,n,o){var a=i;if(t.mode!==e.QModelFormat.INA_DATA_REINIT&&t.capabilities.supportsExtendedSort()){a.getSortingOperations().clear();if(e.notNull(r)){var l=a.getQueryModel();for(var p=0;p<r.size();p++){var s=r.getStructureAt(p);var u=s.getStringByKey("SortType");var g=e.QInAConverter.lookupSortType(u);var y;if(g===e.SortType.FIELD){y=this.importFieldSorting(a,l,s)}else if(g===e.SortType.MEASURE){y=this.importMeasureSorting(a,l,s)}else if(g===e.SortType.DATA_CELL_VALUE||g===e.SortType.COMPLEX){y=this.importPathSorting(o,a,l,s,g)}else{y=this.importDimensionSorting(a,l,s,g)}if(e.notNull(y)){this.importGenericSorting(l,s,y)}}}}return a};e.QInARepoSortLegacy.prototype.importGenericSorting=function(t,r,i){var n=r.getStringByKey("Direction");if(e.notNull(n)){var o=e.QInAConverter.lookupSortDirection2(n);if(e.notNull(o)){i.setDirection(o)}}if(i.supportsPreserveGrouping()&&i.supportsBreakGrouping()){i.setPreserveGrouping(r.getBooleanByKeyExt("PreserveGrouping",false))}if(t.getModelCapabilities().supportsLocaleSorting()){var a=r.getStructureByKey("Collator");if(e.notNull(a)){i.setIsCaseSensitive(a.getBooleanByKeyExt("CaseSensitive",false));i.setLocale(a.getStringByKeyExt("Locale",null))}}};e.QInARepoSortLegacy.prototype.importPathSorting=function(t,r,i,n,o){var a=n.getListByKey("SortTuple");if(a.isEmpty()){return null}var l=e.XList.create();for(var p=0;p<a.size();p++){var s=a.getStructureAt(p);var u=s.getStringByKey("FieldName");var g=s.getStringByKey("Value");if(e.notNull(u)&&e.notNull(g)){var y=i.getFieldByName(u);if(e.isNull(y)){return null}var m=s.getStringByKey("Hierarchy");l.add(e.QSelectValue._createDimensionElement2(t,y,m,g))}else{return null}}if(o===e.SortType.DATA_CELL_VALUE){return r.getDataCellSorting(l,true)}return r.getComplexSorting(l,true)};e.QInARepoSortLegacy.prototype.importDimensionSorting=function(t,r,i,n){var o=r.getDimensionByNameFromExistingMetadata(i.getStringByKey("Dimension"));if(e.isNull(o)||o.isUniversalDisplayHierarchyDimension()){return null}var a=t.getDimensionSorting(o,true);if(n===e.SortType.FILTER){a.setSortByFilter()}else if(n===e.SortType.MEMBER_KEY){a.setSortByKey();this.importCustomSortDetails(a,i)}else if(n===e.SortType.MEMBER_TEXT){a.setSortByText()}else if(n===e.SortType.HIERARCHY){a.setSortByHierarchy()}return a};e.QInARepoSortLegacy.prototype.importCustomSortDetails=function(t,r){var i=r.getListByKey("CustomSort");if(!e.PrUtils.isListEmpty(i)){var n=e.PrUtils.asListOfString(i);t.setCustomSort(n);var o=e.CustomSortPosition.lookup(r.getStringByKey("CustomSortPosition"));t.setCustomSortPosition(o)}};e.QInARepoSortLegacy.prototype.importMeasureSorting=function(t,r,i){var n=i.getStringByKey("MeasureName");var o=null;if(e.notNull(n)){var a=r.getMeasureDimension();var l=a.getStructureMember(n);if(e.notNull(l)){o=t.getMeasureSorting(l,true)}var p=i.getStringByKey("StructureName");var s=r.getNonMeasureDimension();if(e.notNull(p)&&e.notNull(s)&&e.notNull(o)){o.setSecondaryMeasure(s.getStructureMember(p))}}return o};e.QInARepoSortLegacy.prototype.importFieldSorting=function(t,r,i){var n=i.getStringByKey("FieldName");var o=null;if(e.notNull(n)){var a=r.getFieldByName(n);if(e.notNull(a)){o=t.getFieldSorting(a,true)}}return o};e.QInARepoSortLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoVarDimMemberLegacy=function(){};e.QInARepoVarDimMemberLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoVarDimMemberLegacy.prototype._ff_c="QInARepoVarDimMemberLegacy";e.QInARepoVarDimMemberLegacy.prototype.getComponentType=function(){return e.VariableType.DIMENSION_MEMBER_VARIABLE};e.QInARepoVarDimMemberLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVarDimMemberLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=r.getStructureByKey("Values");if(e.notNull(l)){var p=e.QFactory.createFilterExpression(a,a);var s=t.importFilterExpression(p,l,a,o);a.setFilter(s)}else if(a.getVariableType()===e.VariableType.HIERARCHY_NODE_VARIABLE&&a.hasMemberFilter()&&a.getDimension().getKeyField()!==a.getMemberFilter().getField()){a.setDimension(a.getDimension())}return a};e.QInARepoVarDimMemberLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoVarOptionListLegacy=function(){};e.QInARepoVarOptionListLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoVarOptionListLegacy.prototype._ff_c="QInARepoVarOptionListLegacy";e.QInARepoVarOptionListLegacy.prototype.getComponentType=function(){return e.VariableType.OPTION_LIST_VARIABLE};e.QInARepoVarOptionListLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVarOptionListLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=r.getListByKey("OptionValues");if(e.notNull(l)){var p;if(a.supportsMultipleValues()){a.clear();var s=l.size();for(var u=0;u<s;u++){p=l.getStringAt(u);a.addString(p)}}else if(l.size()===1){p=l.getStringAt(0);a.setString(p)}}return a};e.QInARepoVarOptionListLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoVarSimpleTypeLegacy=function(){};e.QInARepoVarSimpleTypeLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoVarSimpleTypeLegacy.prototype._ff_c="QInARepoVarSimpleTypeLegacy";e.QInARepoVarSimpleTypeLegacy.prototype.getComponentType=function(){return e.VariableType.SIMPLE_TYPE_VARIABLE};e.QInARepoVarSimpleTypeLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVarSimpleTypeLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;a.clear();var l=a.getValueType();if(l.isNumber()){this.importNumericValues(t,r,a,l)}else if(l.isString()){this.importStringValues(r,a)}else if(l===e.XValueType.DATE){this.importDateValues(t,r,a)}else if(l===e.XValueType.TIME){this.importTimeValues(t,r,a)}else if(l===e.XValueType.DATE_TIME){this.importDateTimeValues(t,r,a)}else if(l===e.XValueType.BOOLEAN){this.importBooleanValues(r,a)}return null};e.QInARepoVarSimpleTypeLegacy.prototype.getFirstValueAsString=function(t){var r=t.get(0);if(e.notNull(r)&&r.isString()){return r.getString()}return null};e.QInARepoVarSimpleTypeLegacy.prototype.importDateTimeValues=function(t,r,i){var n=r.getListByKey("SimpleStringValues");if(e.notNull(n)){var o=n.size();if(i.supportsMultipleValues()){for(var a=0;a<o;a++){var l=n.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.addDateTime(e.XDateTime.createDateTimeFromStringWithFlag(l,t.capabilities.supportsSapDate()))}}}else if(o===1){var p=this.getFirstValueAsString(n);if(e.XStringUtils.isNotNullAndNotEmpty(p)){i.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(p,t.capabilities.supportsSapDate()))}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importTimeValues=function(t,r,i){var n=r.getListByKey("SimpleStringValues");if(e.notNull(n)){var o=n.size();if(i.supportsMultipleValues()){for(var a=0;a<o;a++){var l=n.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.addTime(e.XTime.createTimeFromStringWithFlag(l,t.capabilities.supportsSapDate()))}}}else if(o===1){var p=this.getFirstValueAsString(n);if(e.XStringUtils.isNotNullAndNotEmpty(p)){i.setTime(e.XTime.createTimeFromStringWithFlag(p,t.capabilities.supportsSapDate()))}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importDateValues=function(t,r,i){var n=r.getListByKey("SimpleStringValues");if(e.notNull(n)){var o=n.size();if(i.supportsMultipleValues()){for(var a=0;a<o;a++){var l=n.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.addDate(e.QInARepoUtils.createDate(l))}}}else if(o===1){var p=this.getFirstValueAsString(n);if(e.XStringUtils.isNotNullAndNotEmpty(p)){i.setDate(e.QInARepoUtils.createDate(p))}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importStringValues=function(t,r){var i=t.getListByKey("SimpleStringValues");if(e.notNull(i)){var n=i.size();if(r.supportsMultipleValues()){for(var o=0;o<n;o++){r.addString(i.getStringAt(o))}}else if(n===1){var a=i.get(0);if(e.notNull(a)&&a.isString()){r.setString(a.getString())}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importBooleanValues=function(t,r){var i=t.getListByKey("SimpleStringValues");if(e.notNull(i)){var n=i.size();if(r.supportsMultipleValues()){for(var o=0;o<n;o++){r.addBoolean(i.getBooleanAt(o))}}else if(n===1){var a=i.get(0);if(e.notNull(a)&&a.isBoolean()){r.setBoolean(a.asBoolean().getBoolean())}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importNumericString=function(t,r,i){if(r===e.XValueType.INTEGER){t.addInteger(e.XInteger.convertFromString(i))}else if(r===e.XValueType.DOUBLE||r===e.XValueType.DECIMAL_FLOAT){t.addDouble(e.XDouble.convertFromString(i))}else if(r===e.XValueType.LONG){t.addLong(e.XLong.convertFromString(i))}};e.QInARepoVarSimpleTypeLegacy.prototype.importNumericValues=function(t,r,i,n){var o=r.getListByKey("SimpleNumericValues");if(e.notNull(o)){var a=o.size();if(i.supportsMultipleValues()){for(var l=0;l<a;l++){var p=o.get(l);if(t.capabilities.supportsNumberAsString()&&e.notNull(p)&&p.getType()===e.PrElementType.STRING){this.importNumericString(i,n,o.getStringAt(l));continue}if(n===e.XValueType.INTEGER){var s=o.getIntegerAt(l);i.addInteger(s)}else if(n===e.XValueType.DOUBLE||n===e.XValueType.DECIMAL_FLOAT){var u=o.getDoubleAt(l);i.addDouble(u)}else if(n===e.XValueType.LONG){var g=o.getLongAt(l);i.addLong(g)}}}else if(a===1){var y=o.get(0);if(e.notNull(y)&&y.isNumeric()){if(n===e.XValueType.INTEGER){i.setInteger(o.getIntegerAt(0))}else if(n===e.XValueType.DOUBLE){i.setDouble(o.getDoubleAt(0))}else if(n===e.XValueType.DECIMAL_FLOAT){i.setDecFloat(e.XDecFloatByDouble.create(o.getDoubleAt(0)))}else if(n===e.XValueType.LONG){i.setLong(o.getLongAt(0))}}}}};e.QInARepoVarSimpleTypeLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoVariableContainerLegacy=function(){};e.QInARepoVariableContainerLegacy.prototype=new e.QInAComponentWithList;e.QInARepoVariableContainerLegacy.prototype._ff_c="QInARepoVariableContainerLegacy";e.QInARepoVariableContainerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_CONTAINER};e.QInARepoVariableContainerLegacy.prototype.getTagName=function(){return"Variables"};e.QInARepoVariableContainerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVariableContainerLegacy.prototype.importComponentWithList=function(e,t,r,i,n){var o=r;e.importVariableList(t,o);return r};e.QInARepoVariableContainerLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoVariablesListLegacy=function(){};e.QInARepoVariablesListLegacy.prototype=new e.QInAComponentWithList;e.QInARepoVariablesListLegacy.prototype._ff_c="QInARepoVariablesListLegacy";e.QInARepoVariablesListLegacy.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_LIST};e.QInARepoVariablesListLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVariablesListLegacy.prototype.importComponentWithList=function(t,r,i,n,o){var a=i;if(e.notNull(r)){var l=r.size();for(var p=0;p<l;p++){var s=r.getStructureAt(p);var u=s.getStringByKey("Name");var g=a.getVariableBaseByName(u);if(e.notNull(g)){var y=g.getVariableType();if(y.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(s,g,o)}else if(y.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(s,g,o)}else if(y.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(s,g,o)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",u,"' of variable type '",y.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",u,"' was not found"))}}}return i};e.QInARepoVariablesListLegacy.prototype.exportComponentWithList=e.noSupport;e.QInAComponentContainer=function(){};e.QInAComponentContainer.prototype=new e.DfNameObject;e.QInAComponentContainer.prototype._ff_c="QInAComponentContainer";e.QInAComponentContainer.create=function(t){var r=new e.QInAComponentContainer;r._setupInternal(t.getName());r.m_type=t;r.m_components=e.XList.create();return r};e.QInAComponentContainer.prototype.m_components=null;e.QInAComponentContainer.prototype.m_type=null;e.QInAComponentContainer.prototype.isEmpty=function(){return this.m_components.isEmpty()};e.QInAComponentContainer.prototype.hasElements=function(){return this.m_components.hasElements()};e.QInAComponentContainer.prototype.size=function(){return this.m_components.size()};e.QInAComponentContainer.prototype.get=function(t){var r=this.m_components.size();var i=null;if(r>1){for(var n=0;n<r;n++){var o=this.m_components.get(n);if(o.isMatching(t)){i=o;break}}}if(e.isNull(i)&&r>0){i=this.m_components.get(0)}return i};e.QInAComponentContainer.prototype.add=function(t){e.XBooleanUtils.checkFalse(this.m_components.contains(t),"Container already exists");this.m_components.add(t)};e.QInAComponentContainer.prototype.getComponentType=function(){return this.m_type};e.QInARepoAttribute=function(){};e.QInARepoAttribute.prototype=new e.QInARepository;e.QInARepoAttribute.prototype._ff_c="QInARepoAttribute";e.QInARepoAttribute.prototype.getComponentType=function(){return e.OlapComponentType.ATTRIBUTE};e.QInARepoAttribute.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=r.getStringByKey("Name");var p=a.getAttributeByName(l);if(e.notNull(p)){var s=r.getListByKey("ResultSetFields");if(e.notNull(s)){var u=p.getResultSetFields();u.clear();var g=s.size();for(var y=0;y<g;y++){var m=p.getFieldByName(s.getStringAt(y));if(e.notNull(m)){u.add(m)}}}}return p};e.QInARepoAttribute.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());var a=i.putNewList("ResultSetFields");var l=o.getResultSetFields();var p=l.size();for(var s=0;s<p;s++){a.addString(l.get(s).getName())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoAxesSettings=function(){};e.QInARepoAxesSettings.prototype=new e.QInARepository;e.QInARepoAxesSettings.prototype._ff_c="QInARepoAxesSettings";e.QInARepoAxesSettings.prototype.getComponentType=function(){return e.OlapComponentType.AXES_SETTINGS};e.QInARepoAxesSettings.prototype.getTagName=function(){return"AxesRepo"};e.QInARepoAxesSettings.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,i,n,o)}return i};e.QInARepoAxesSettings.prototype.importComponentWithList=function(t,r,i,n,o){if(e.notNull(r)){var a=o.getQueryModel();if(t.capabilities.supportsZeroSuppression()||t.capabilities.supportsNullZeroSuppression()){var l=e.AxisType.getAll();var p=l.size();for(var s=0;s<p;s++){var u=a.getAxisBase(l.get(s));if(e.notNull(u)){u.setSupportsZeroSuppression(true)}}}var g=r.size();for(var y=0;y<g;y++){t.importAxis(r.getStructureAt(y),null,o)}}return null};e.QInARepoAxesSettings.prototype.exportComponentWithStructure=function(t,r,i,n){var o=this.exportComponentWithList(t,r,n);i.put("Elements",o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoAxesSettings.prototype.exportComponentWithList=function(t,r,i){var n=r;var o=e.PrFactory.createList();var a=t.exportAxis(n.getColumnsAxis(),null);o.add(a);var l=t.exportAxis(n.getRowsAxis(),null);o.add(l);return o};e.QInARepoAxis=function(){};e.QInARepoAxis.prototype=new e.QInARepository;e.QInARepoAxis.prototype._ff_c="QInARepoAxis";e.QInARepoAxis.prototype.getComponentType=function(){return e.OlapComponentType.AXIS};e.QInARepoAxis.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=o.getQueryModel();var l;var p=r.getStringByKey("Axis");if(e.notNull(p)){l=e.QInAConverter.lookupAxisType(p)}else{var s=r.getIntegerByKey("Type");l=e.QInAConverter.lookupAxisTypeInt(s)}var u=a.getAxisBase(l);if(e.notNull(u)){if(u.supportsZeroSuppression()){var g=r.getIntegerByKeyExt("ZeroSuppressionType",0);var y=e.QInAConverter.lookupSuppressionType(g);u.setZeroSuppressionType(y)}var m=r.getListByKey("Layout");if(e.notNull(m)){u.clear();var c=a.getDimensionManagerBase();for(var S=0;S<m.size();S++){var A=m.getStringAt(S);var d=c.getDimensionByNameInternal(A);u.addForRepoImport(d)}}t.importTotals(r,u.getResultStructureControllerBase(),o);if(r.containsKey("LowerLevelNodeAlignment")){u.setLowerLevelNodeAlignment(e.QInAConverter.lookupLowerLevelNodeAlignment(r.getStringByKey("LowerLevelNodeAlignment")))}}return u};e.QInARepoAxis.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Axis",e.QInAConverter.lookupAxisTypeInA(o.getType()));i.putInteger("Type",e.QInAConverter.lookupAxisTypeInAInt(o.getType()));var a=o.getZeroSuppressionType();i.putInteger("ZeroSuppressionType",e.QInAConverter.lookupSuppressionTypeInA(a));var l=i.putNewList("Layout");for(var p=0;p<o.size();p++){var s=o.getDimensionAt(p);l.addString(s.getName())}t.exportTotals(o.getResultStructureController(),i);var u=o.getLowerLevelNodeAlignment();if(e.notNull(u)){i.putString("LowerLevelNodeAlignment",e.QInAConverter.lookupLowerLevelNodeAlignmentInA(u))}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoBlendableQueryManager=function(){};e.QInARepoBlendableQueryManager.prototype=new e.QInARepository;e.QInARepoBlendableQueryManager.prototype._ff_c="QInARepoBlendableQueryManager";e.QInARepoBlendableQueryManager.importQueryModelLinkSettingStructure=function(t,r,i){r.setLinkType(i,e.BlendingLinkType.lookup(t.getStringByKey("LinkType")));r.setUnlinkedDimensionJoinType(i,e.UnlinkedDimensionJoinType.lookup(t.getStringByKey("UnlinkedDimensionJoinType")));r.setUseEmptyAllMemberMeasureFilterByDatasetId(t.getBooleanByKey("UseAllMemberFilter"),i);var n=t.getListByKey("ActiveDimensionLinks");if(e.notNull(n)){var o=n.getIterator();while(o.hasNext()){var a=o.next().asString().getString();if(r.getPrimaryQueryManager().getQueryModel().getDimensionByName(a)!==null){r.addActivePrimaryLinkDimensionName(i,a)}}}};e.QInARepoBlendableQueryManager.importDrillOperations=function(t,r){var i=r.getListByKey("DrillOperations");t.clearBlendedDrillOperations();if(e.notNull(i)){var n=i.getIterator();while(n.hasNext()){var o=n.next().asStructure();var a=t.addNewBlendedDrillOperation(o.getStringByKey("DatasetId"),o.getStringByKey("DimensionName"));a.setDrillState(e.QInAConverter.lookupDrillStateOp(o.getStringByKey("DrillState")));var l=o.getListByKey("DrillPathElements");if(e.notNull(l)){var p=l.getIterator();while(p.hasNext()){var s=p.next().asStructure();a.addBlendedDrillPathElementInfo(s.getStringByKey("DatasetId"),s.getStringByKey("DimensionName"),s.getStringByKey("Member"))}}}}};e.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis=function(t,r,i){var n=r.getListByKey(i.getName());if(e.notNull(n)){var o=n.getIterator();t.clearBlendedDimensionInfosByAxis(i);while(o.hasNext()){var a=o.next().asStructure();var l=t.addBlendedDimensionInfoToAxis(i,a.getStringByKey("DatasetId"),a.getStringByKey("DimensionName"));if(a.containsKey("InitialDrillLevel")){l.setInitialDrillLevel(a.getIntegerByKey("InitialDrillLevel"))}}}};e.QInARepoBlendableQueryManager.importSorts=function(t,r){var i=t.getListByKey("BlendableDimensionSorts");var n=t.getStructureByKey("BlendableMeasureMemberSort");r.clearBlendableDimensionSorts();r.clearPrimaryBlendableMemberMeasureSort();if(e.notNull(i)){e.QInARepoBlendableQueryManager.importDimensionSorts(r,i)}else if(e.notNull(n)){e.QInARepoBlendableQueryManager.importMeasureMemberSort(r,n)}};e.QInARepoBlendableQueryManager.importDimensionSorts=function(t,r){var i=r.getIterator();while(i.hasNext()){var n=i.next().asStructure();var o=n.getStringByKey("FieldName");var a=n.getStringByKey("DatasetId");var l=e.QInAConverter.lookupSortDirection(n.getIntegerByKey("SortDirection"));var p=n.getBooleanByKey("PreserveGrouping");var s=n.getStringByKey("Locale");var u=n.getStructureByKey("CustomSort");var g=e.QInARepoBlendableQueryManager.importCustomSort(u);var y=n.getStringByKey("AutoLimiterSort");var m=n.getBooleanByKey("IsDisplayedAsId");var c=n.getStringByKey("ID");var S=e.QFactory.createBlendableDimensionSort(o,a,l,p,s);S.setCustomSortDefinition(g);S.setAutoLimiterSort(y);S.setIsDisplayedAsId(m);S.setDimensionId(c);t.updateBlendableDimensionSort(S)}};e.QInARepoBlendableQueryManager.importCustomSort=function(t){if(e.isNull(t)){return null}var r=t.getStringByKey("Name");var i=t.getStringByKey("DatasetId");var n=t.getStringByKey("ID");var o=t.getStringByKey("HierarchyId");var a=t.getStringByKey("Id");var l=e.QInARepoBlendableQueryManager.importListOfString(t,"SortFromStart");var p=e.QInARepoBlendableQueryManager.importListOfString(t,"SortFromEnd");var s=e.QInARepoBlendableQueryManager.importListOfString(t,"SortMovedNodes");return e.QFactory.createBlendableCustomSort(r,i,n,o,a,l,p,s)};e.QInARepoBlendableQueryManager.importListOfString=function(t,r){var i=e.XListOfString.create();var n=t.getListByKey(r);var o=n.getIterator();while(o.hasNext()){i.add(o.next().asString().getString())}return i.size()===0?null:i};e.QInARepoBlendableQueryManager.importMeasureMemberSort=function(t,r){var i=e.QFactory.createBlendableMeasureSort(t);i.setPrimaryMeasure(r.getStringByKey("MeasureMemberName"),r.getStringByKey("DatasetId"),r.getBooleanByKey("PrimaryBlendableBlended"));i.setSecondaryMeasure(r.getStringByKey("SecondaryMeasureName"),r.getStringByKey("SecondaryDatasetId"),r.getBooleanByKey("SecondaryMeasureBlended"));var n=e.QInAConverter.lookupSortDirection(r.getIntegerByKey("SortDirection"));i.setSortDirection(n);i.setPreserveGrouping(r.getBooleanByKey("PreserveGrouping"));i.setVersionElementId(r.getStringByKey("VersionElementId"));var o=r.getStructureByKey("VersionDimension");if(e.notNull(o)){var a=o.getStringByKey("DatasetId");var l=t.getQueryManagerByDatasetId(a);if(e.notNull(l)){var p=o.getStringByKey("Name");var s=l.getQueryModel().getDimensionByName(p);if(e.notNull(s)){i.setVersionDimension(s)}}}t.setBlendableMeasureMemberSort(i)};e.QInARepoBlendableQueryManager.importRankSettingsList=function(t,r){var i=t.getListByKey("RankSettings");r.clearRankSettings();if(e.notNull(i)){for(var n=0;n<i.size();n++){e.QInARepoBlendableQueryManager.importRankSettings(i.getStructureAt(n),r)}}};e.QInARepoBlendableQueryManager.importRankSettings=function(t,r){var i=e.QFactory.createRankSettings();i.setMeasure(t.getStringByKey("MeasureMemberName"));i.setPrimaryDatasetId(t.getStringByKey("MeasureMemberDatasetId"));i.setIsBlendedPrimaryMeasure(t.getBooleanByKey("PrimaryBlendableBlended"));i.setSecondaryMeasure(t.getStringByKey("SecondaryMeasureName"));i.setSecondaryDatasetId(t.getStringByKey("SecondaryDatasetId"));i.setIsBlendedSecondaryMeasure(t.getBooleanByKey("SecondaryMeasureBlended"));i.setMaxRows(t.getIntegerByKey("MaxRows"));i.setUseClientSideRanking(t.getBooleanByKey("ClientSideRanking"));i.setIsRankOnAllDimensions(t.getBooleanByKey("RankOnAllDimensions"));i.setIsApplyRankingsWithoutReset(t.getBooleanByKey("IsApplyRankingsWithoutReset"));i.setPreserveSort(t.getBooleanByKey("PreserveSort"));var n=t.getListByKey("Dimensions");var o;var a;var l;var p;for(var s=0;s<n.size();s++){var u=n.get(s).asStructure();a=u.getStringByKey("DatasetId");l=r.getQueryManagerByDatasetId(a);if(e.notNull(l)){o=u.getStringByKey("Name");p=l.getQueryModel().getDimensionByName(o);if(e.notNull(p)){i.addAppliedDimension(p)}}}var g=t.getStringByKey("Comparison");i.setComparisonOperator(e.ConditionComparisonOperator.lookupName(g));i.setVersionElementId(t.getStringByKey("VersionElementId"));var y=t.getStructureByKey("VersionDimension");if(e.notNull(y)){a=y.getStringByKey("DatasetId");l=r.getQueryManagerByDatasetId(a);if(e.notNull(l)){o=y.getStringByKey("Name");p=l.getQueryModel().getDimensionByName(o);if(e.notNull(p)){i.setVersionDimension(p)}}}i.setUseDefaultSort(t.getBooleanByKey("UseDefaultSort"));r.addRankSettings(i)};e.QInARepoBlendableQueryManager.exportQueryModelLinkSettingStructureList=function(t,r,i,n){var o=t.addNewStructure();e.QInARepoBlendableQueryManager.exportQueryModelLinkSettings(r,i,n,o)};e.QInARepoBlendableQueryManager.exportQueryModelLinkSettings=function(e,t,r,i){i.putString("FirstModelName",t);i.putString("SecondModelName",r);i.putString("LinkType",e.getLinkType(r).getName());i.putString("UnlinkedDimensionJoinType",e.getUnlinkedDimensionJoinType(r).getName());i.putBoolean("UseAllMemberFilter",e.isUseEmptyAllMemberMeasureFilterByDatasetId(r));var n=i.putNewList("ActiveDimensionLinks");var o=e.getActivePrimaryLinkDimensionNamesSettings(r).getIterator();while(o.hasNext()){var a=o.next();n.addString(a)}};e.QInARepoBlendableQueryManager.exportDrillOperations=function(t,r){var i=r.getBlendedDrillOperations().getIterator();var n=t.putNewList("DrillOperations");while(i.hasNext()){var o=i.next();var a=n.addNewStructure();a.putString("DimensionName",o.getDimensionName());a.putString("DatasetId",o.getDatasetId());var l=e.QInAConverter.lookupDrillStateInA(o.getDrillState());a.putString("DrillState",l);var p=a.putNewList("DrillPathElements");var s=o.getBlendedDrillPathElementInfos().getIterator();while(s.hasNext()){var u=s.next();var g=p.addNewStructure();g.putString("DatasetId",u.getDatasetId());g.putString("DimensionName",u.getDimensionName());g.putString("Member",u.getDrillMember())}}};e.QInARepoBlendableQueryManager.exportBlendedDimensionAxis=function(e,t,r){var i=t.putNewList(r.getName());var n=e.getBlendedDimensionsByAxis(r).getIterator();while(n.hasNext()){var o=n.next();var a=i.addNewStructure();a.putString("DatasetId",o.getDatasetId());a.putString("DimensionName",o.getDimensionName());if(o.getInitialDrillLevel()!==null){a.putInteger("InitialDrillLevel",o.getInitialDrillLevel().getInteger())}}};e.QInARepoBlendableQueryManager.exportSorts=function(t,r){var i=r.getBlendableDimensionSorts();var n=r.getPrimaryBlendableMeasureMemberSort();if(i.size()>0){e.QInARepoBlendableQueryManager.exportDimensionSorts(t,i)}else if(e.notNull(n)){e.QInARepoBlendableQueryManager.exportMeasureMemberSort(t,n)}};e.QInARepoBlendableQueryManager.exportDimensionSorts=function(t,r){var i=t.putNewList("BlendableDimensionSorts");var n=r.getIterator();while(n.hasNext()){var o=n.next();var a=e.PrStructure.create();a.putString("FieldName",o.getFieldName());a.putString("DatasetId",o.getDatasetId());a.putInteger("SortDirection",e.QInAConverter.lookupSortDirectionInA(o.getSortDirection()));a.putBoolean("PreserveGrouping",o.getPreserveGrouping());a.putString("Locale",o.getContextLanguage());var l=o.getCustomSortDefinition();if(e.notNull(l)){var p=a.putNewStructure("CustomSort");p.putString("Name",l.getName());p.putString("DatasetId",l.getDatasetId());p.putString("ID",l.getDimensionId());p.putString("HierarchyId",l.getHierarchyId());p.putString("Id",l.getId());p.putNewList("SortFromStart").addAllStrings(l.getSortFromStart());p.putNewList("SortFromEnd").addAllStrings(l.getSortFromEnd());p.putNewList("SortMovedNodes").addAllStrings(l.getMovedNodes())}a.putString("AutoLimiterSort",o.getAutoLimiterSort());a.putBoolean("IsDisplayedAsId",o.isDisplayedAsId());a.putString("ID",o.getDimensionId());i.add(a)}};e.QInARepoBlendableQueryManager.exportMeasureMemberSort=function(t,r){var i=t.putNewStructure("BlendableMeasureMemberSort");i.putString("MeasureMemberName",r.getMeasureMemberName());i.putString("DatasetId",r.getDatasetId());i.putBoolean("PrimaryBlendableBlended",r.isPrimaryMeasureBlended());i.putInteger("SortDirection",e.QInAConverter.lookupSortDirectionInA(r.getSortDirection()));i.putString("SecondaryMeasureName",r.getSecondaryMeasureName());i.putString("SecondaryDatasetId",r.getSecondaryDatasetId());i.putBoolean("SecondaryMeasureBlended",r.isSecondaryMeasureBlended());i.putString("VersionElementId",r.getVersionElementId());var n=r.getVersionDimension();if(e.notNull(n)){var o=i.putNewStructure("VersionDimension");o.putString("DatasetId",n.getQueryModel().getDatasetId());o.putString("Name",n.getName())}i.putBoolean("PreserveGrouping",r.isPreserveGrouping())};e.QInARepoBlendableQueryManager.exportRankSettingsList=function(t,r){var i=r.getRankSettings();var n=t.putNewList("RankSettings");for(var o=0;o<i.size();o++){e.QInARepoBlendableQueryManager.exportRankSettings(n.addNewStructure(),i.get(o))}};e.QInARepoBlendableQueryManager.exportRankSettings=function(t,r){t.putString("MeasureMemberName",r.getMeasure());t.putString("MeasureMemberDatasetId",r.getPrimaryMeasureDatasetId());t.putBoolean("PrimaryBlendableBlended",r.isBlendedPrimaryMeasure());t.putString("SecondaryMeasureName",r.getSecondaryMeasure());t.putString("SecondaryDatasetId",r.getSecondaryMeasureDatasetId());t.putBoolean("SecondaryMeasureBlended",r.isBlendedSecondaryMeasure());t.putInteger("MaxRows",r.getMaxRows());t.putBoolean("ClientSideRanking",r.isUseClientSideRanking());t.putBoolean("RankOnAllDimensions",r.isRankOnAllDimensions());t.putBoolean("IsApplyRankingsWithoutReset",r.isApplyRankingsWithoutReset());t.putBoolean("PreserveSort",r.isPreserveSort());var i=t.putNewList("Dimensions");var n=r.getAppliedDimensions();for(var o=0;o<n.size();o++){var a=n.get(o);var l=i.addNewStructure();l.putString("DatasetId",a.getQueryModel().getDatasetId());l.putString("Name",a.getName())}if(r.getComparisonOperator()!==null){t.putString("Comparison",r.getComparisonOperator().getName())}t.putString("VersionElementId",r.getVersionElementId());var p=r.getVersionDimension();if(e.notNull(p)){var s=t.putNewStructure("VersionDimension");s.putString("DatasetId",p.getQueryModel().getDatasetId());s.putString("Name",p.getName())}t.putBoolean("UseDefaultSort",r.useDefaultSort())};e.QInARepoBlendableQueryManager.prototype.getComponentType=function(){return e.OlapComponentType.BLENDABLE_QUERY_MANAGER};e.QInARepoBlendableQueryManager.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=r.getStructureByKey("PrimaryQueryManager");var p=l.getStringByKey("DatasetId");var s=a.getPrimaryQueryManager();if(e.isNull(s)||!e.XString.isEqual(s.getQueryModel().getDatasetId(),p)){s=null;var u=a.getOlapEnv().getSharedQueryManager(p);if(e.notNull(u)){s=u.cloneQueryManagerExt(e.QueryCloneMode.CURRENT_STATE);a.setPrimaryQueryManager(s);s.setClientQueryObjectStorageName(a.getClientQueryObjectStorageName())}}if(e.notNull(s)){s.getQueryModel().deserializeFromElementExt(t.getOriginalMode(),l.getStructureByKey("Query"))}a.clearQueryModelLinkSettings();var g=r.getListByKey("QueryManagers");var y=r.getListByKey("QueryModelLinkSettingsList");var m;var c;var S;var A;if(e.notNull(y)){var d=y.getIterator();while(d.hasNext()){c=d.next().asStructure();A=c.getStringByKey("SecondModelName");S=g.getIterator();while(S.hasNext()){m=S.next().asStructure();if(e.XString.isEqual(A,m.getStringByKey("DatasetId"))){this.importSecondaryModel(t,a,c,m,c.getStringByKey("SecondModelName"));break}}}}else{var I=r.getStructureByKey("QueryModelLinkSettings");if(e.notNull(g)){S=g.getIterator();while(S.hasNext()){m=S.next().asStructure();A=m.getStringByKey("DatasetId");c=I.getStructureByKey(A);this.importSecondaryModel(t,a,c,m,A)}}}a.clearPrimaryBlendedMeasures();var f=r.getListByKey("PrimaryBlendedMeasures");if(e.notNull(f)){var N=f.getIterator();while(N.hasNext()){var v=N.next();var T=e.QInAConverter.lookupMeasureStructureMemberType(v.getStringByKey("MemberType"));var R=t.importComponent(T,v,null,a.getQueryModel().getPrimaryCalculationDimension(),a.getQueryModel());a.addPrimaryBlendedMeasure(R)}}e.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis(a,r.getStructureByKey("DimensionOrder"),e.AxisType.ROWS);e.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis(a,r.getStructureByKey("DimensionOrder"),e.AxisType.COLUMNS);e.QInARepoBlendableQueryManager.importDrillOperations(a,r);e.QInARepoBlendableQueryManager.importSorts(r,a);e.QInARepoBlendableQueryManager.importRankSettingsList(r,a);a.setUseEmptyAllMemberMeasureFilter(r.getBooleanByKey("UseAllMemberFilter"));a.clearFormulaExceptions();var E=r.getListByKey("FormulaExceptions");if(e.notNull(E)){for(var C=0;C<E.size();C++){var Q=E.getStructureAt(C);var M=a.getQueryManagerByDatasetId(Q.getStringByKey("DatasetId"));var D=t.importFormulaException(Q,null,null,M.getQueryModel());a.addFormulaException(D)}}a.setBlendingRestrictionsEnabled(r.getBooleanByKeyExt("BlendingRestrictionsEnabled",false));return null};e.QInARepoBlendableQueryManager.prototype.importSecondaryModel=function(t,r,i,n,o){var a=r.getQueryManagerByDatasetId(o);if(e.isNull(a)){var l=r.getOlapEnv().getSharedQueryManager(o);if(e.notNull(l)){a=l.cloneQueryManagerExt(e.QueryCloneMode.CURRENT_STATE);r.addSecondaryQueryManager(a);a.setClientQueryObjectStorageName(r.getClientQueryObjectStorageName())}}if(e.notNull(a)){a.getQueryModel().deserializeFromElementExt(t.getOriginalMode(),n.getStructureByKey("Query"));e.QInARepoBlendableQueryManager.importQueryModelLinkSettingStructure(i,r,o)}};e.QInARepoBlendableQueryManager.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getPrimaryQueryManager();var l=a.getQueryModel().getDatasetId();i.putString("Name",o.getName());var p=i.putNewStructure("PrimaryQueryManager");p.putString("Name",a.getName());p.putString("DatasetId",l);p.put("Query",a.getQueryModel().serializeToElement(t.getOriginalMode()));i.putString("StorageName",o.getClientQueryObjectStorageName());var s=i.putNewList("QueryManagers");var u=i.putNewList("QueryModelLinkSettingsList");var g=o.getAllQueryModelLinkSettings().getIterator();while(g.hasNext()){var y=g.next();var m=y.getSecondDatasetId();var c=o.getQueryManagerByDatasetId(m);var S=s.addNewStructure();S.putString("DatasetId",m);S.putString("Name",c.getName());S.put("Query",c.getQueryModel().serializeToElement(t.getOriginalMode()));e.QInARepoBlendableQueryManager.exportQueryModelLinkSettingStructureList(u,o,l,m)}var A=i.putNewList("PrimaryBlendedMeasures");var d=o.getPrimaryBlendedMeasures().getIterator();while(d.hasNext()){var I=d.next();t.exportComponent(I.getMemberType(),I,A.addNewStructure(),n)}var f=i.putNewStructure("DimensionOrder");e.QInARepoBlendableQueryManager.exportBlendedDimensionAxis(o,f,e.AxisType.ROWS);e.QInARepoBlendableQueryManager.exportBlendedDimensionAxis(o,f,e.AxisType.COLUMNS);e.QInARepoBlendableQueryManager.exportDrillOperations(i,o);e.QInARepoBlendableQueryManager.exportSorts(i,o);e.QInARepoBlendableQueryManager.exportRankSettingsList(i,o);i.putBoolean("UseAllMemberFilter",o.isUseEmptyAllMemberMeasureFilter());var N=e.PrFactory.createList();var v=o.getFormulaExceptions().getIterator();while(v.hasNext()){var T=v.next();var R=e.PrFactory.createStructure();t.exportFormulaException(T,R);R.putString("DatasetId",T.getQueryModel().getDatasetId());N.add(R)}i.put("FormulaExceptions",N);i.putBoolean("BlendingRestrictionsEnabled",o.isBlendingRestrictionsEnabled());return i};e.QInARepoCellContext=function(){};e.QInARepoCellContext.prototype=new e.QInARepository;e.QInARepoCellContext.prototype._ff_c="QInARepoCellContext";e.QInARepoCellContext.prototype.getComponentType=function(){return e.OlapComponentType.CELL_CONTEXT};e.QInARepoCellContext.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;var l=r.getStringByKey("Name");if(e.isNull(i)){a=e.QCellContext._create(o,l,n)}else if(i.getOlapComponentType()===e.OlapComponentType.CELL_CONTEXT){a=i}a.setRowIndex(r.getIntegerByKeyExt("Row",-1));a.setColumnIndex(r.getIntegerByKeyExt("Column",-1));a.setExternalKeys(r.getBooleanByKeyExt("ExternalKeys",false));a.setComponentsExternal(r.getBooleanByKeyExt("ComponentsExternal",false));a.setComponentsInternal(r.getBooleanByKeyExt("ComponentsInternal",false));var p=r.getListByKey("CellContextPaths");if(!e.PrUtils.isListEmpty(p)){var s=p.size();for(var u=0;u<s;u++){var g=p.getStructureAt(u);var y=e.QInAConverter.lookupAxisType(g.getStringByKey("Axis"));var m=g.getListByKey("CellContextMembers");var c=m.size();var S=e.XList.create();for(var A=0;A<c;A++){var d=m.getStructureAt(A);S.add(t.importDrillPathElement(d,a,o))}a.setTupleContextForAxis(S,y)}}return a};e.QInARepoCellContext.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=i;if(e.isNull(a)){a=e.PrFactory.createStructure()}a.putString("Name",o.getName());if(o.getRowIndex()>-1){a.putInteger("Row",o.getRowIndex())}if(o.getColumnIndex()>-1){a.putInteger("Column",o.getColumnIndex())}a.putBoolean("ExternalKeys",o.isExternalKeys());a.putBoolean("ComponentsExternal",o.isComponentsExternal());a.putBoolean("ComponentsInternal",o.isComponentsInternal());var l=o.getAxisContexts();if(e.XCollectionUtils.hasElements(l)){var p=a.putNewList("CellContextPaths");var s=l.getKeysAsIterator();while(s.hasNext()){var u=s.next();var g=l.getByKey(u);if(e.XCollectionUtils.hasElements(g)){var y=p.addNewStructure();y.putString("Axis",e.QInAConverter.lookupAxisTypeInA(u));var m=y.putNewList("CellContextMembers");var c=g.size();for(var S=0;S<c;S++){m.add(t.exportDrillPathElement(g.get(S),true))}}}}return i};e.QInARepoCellContextManager=function(){};e.QInARepoCellContextManager.prototype=new e.QInARepository;e.QInARepoCellContextManager.prototype._ff_c="QInARepoCellContextManager";e.QInARepoCellContextManager.prototype.getComponentType=function(){return e.OlapComponentType.CELL_CONTEXT_MANAGER};e.QInARepoCellContextManager.prototype.getTagName=function(){return"CellContextRequests"};e.QInARepoCellContextManager.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(r)&&r.containsKey("Elements")){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,i,n,o)}return i};e.QInARepoCellContextManager.prototype.importComponentWithList=function(t,r,i,n,o){if(i.getOlapComponentType()===e.OlapComponentType.CELL_CONTEXT_MANAGER){var a=i;var l=r.size();a.clear();for(var p=0;p<l;p++){a.addCellContext(t.importCellContext(r.getStructureAt(p),a,o))}}return i};e.QInARepoCellContextManager.prototype.exportComponentWithStructure=function(t,r,i,n){var o=this.exportComponentWithList(t,r,n);if(e.notNull(o)){i.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoCellContextManager.prototype.exportComponentWithList=function(t,r,i){var n=r;var o=e.PrFactory.createList();for(var a=0;a<n.size();a++){o.add(t.exportCellContext(n.get(a)))}return o};e.QInARepoConditionManager=function(){};e.QInARepoConditionManager.prototype=new e.QInARepository;e.QInARepoConditionManager.prototype._ff_c="QInARepoConditionManager";e.QInARepoConditionManager.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_MANAGER};e.QInARepoConditionManager.prototype.getTagName=function(){return"ConditionsRepo"};e.QInARepoConditionManager.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,i,n,o)}return i};e.QInARepoConditionManager.prototype.importComponentWithList=function(t,r,i,n,o){var a=i;if(e.notNull(a)){if(!e.PrUtils.isListEmpty(r)){var l=o.getQueryModel();var p=r.size();for(var s=0;s<p;s++){var u=r.getStructureAt(s);var g=t.importCondition(l,u,null);if(e.notNull(g)&&!a.containsKey(g.getName())){a.add(g)}}this.removeModelElementsNotInInA(t,r,a,a.getValuesAsReadOnlyList())}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){a.clear()}}return a};e.QInARepoConditionManager.prototype.exportComponentWithStructure=function(t,r,i,n){var o=this.exportComponentWithList(t,r,n);if(e.notNull(o)){i.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoConditionManager.prototype.exportComponentWithList=function(t,r,i){var n=null;var o=r;if(e.notNull(o)){var a=o.size();if(a>0){n=e.PrFactory.createList();for(var l=0;l<a;l++){var p=o.get(l);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.isUserCondition()||p.getModCounter()>0){var s=t.exportCondition(p);if(e.notNull(s)&&!s.isEmpty()){n.add(s)}}}if(n.isEmpty()){n=null}}}return n};e.QInARepoConditionsCondition=function(){};e.QInARepoConditionsCondition.prototype=new e.QInARepository;e.QInARepoConditionsCondition.prototype._ff_c="QInARepoConditionsCondition";e.QInARepoConditionsCondition.exportBreakGroupDimensionList=function(t){if(e.isNull(t)){return null}var r=e.PrFactory.createList();var i=t.getBreakGroupDimensions();var n=i.size();for(var o=0;o<n;o++){r.addString(i.get(o).getName())}return r};e.QInARepoConditionsCondition.exportEvaluateOnDimensionsList=function(t,r){if(e.isNull(r)){return null}var i=e.PrFactory.createList();var n=r.getEvaluationDimensions();var o=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.getModCounter()>0;if(o){var a=n.size();for(var l=0;l<a;l++){i.addString(n.get(l).getName())}}return i};e.QInARepoConditionsCondition.prototype.getComponentType=function(){return e.OlapComponentType.CONDITION};e.QInARepoConditionsCondition.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;if(e.notNull(r)){var l=r.getStringByKey("Name");if(e.isNull(i)){var p=r.getBooleanByKeyExt("IsBackendCondition",true);var s=n;if(s.getByKey(l)!==null){a=s.getConditionByName(l)}else if(this.newComponentCreationAllowed(t,r)){a=e.QCondition.create(o,s,l,p)}}else{a=i;a.setConditionName(l)}if(e.notNull(a)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Active")){a.setActive(r.getBooleanByKey("Active"))}a.setUsedState(r.getStringByKey("IsUsed"));if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Description")){a.setDescription(r.getStringByKey("Description"))}var u=r.getStringByKey("OnDisabled");if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("AfterVisibilityFilter")){a.setApplyConditionAfterVisibilityFilter(r.getBooleanByKeyExt("AfterVisibilityFilter",false))}if(e.notNull(u)){if(e.XString.isEqual(u,"Error")){a.setOnDisabledToWarning(false)}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("EvaluateOnDimensions")){var g=r.getStringByKey("EvaluateOnDimensions");var y=e.ConditionDimensionEvaluationType.lookupName(g);if(e.notNull(y)){a.setDimensionEvaluationType(y)}}var m=o.getQueryModel();var c=r.getListByKey("EvaluateOnDimensionsList");var S;var A;if(!e.PrUtils.isListEmpty(c)&&e.notNull(m)){S=c.size();a.clearEvaluationDimensions();for(A=0;A<S;A++){var d=c.getStringAt(A);if(e.notNull(d)){var I=m.getDimensionByNameFromExistingMetadata(d);if(e.notNull(I)){a.addEvaluationDimension(I)}}}}var f=r.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(f)){var N=f.size();a.clearThresholds();for(var v=0;v<N;v++){var T=f.getStructureAt(v);if(e.notNull(T)){a.addThreshold(t.importConditionThreshold(m,T,null,a))}}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("BreakGroup")){a.setBreakGroup(r.getBooleanByKeyExt("BreakGroup",false))}var R=r.getListByKey("BreakGroupList");if(!e.PrUtils.isListEmpty(R)&&e.notNull(m)){S=R.size();for(A=0;A<S;A++){var E=R.getStringAt(A);if(e.notNull(E)){var C=m.getDimensionByNameFromExistingMetadata(E);if(e.notNull(C)){a.addBreakGroupDimension(C)}}}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("BreakHierarchy")){a.setBreakHierarchy(r.getBooleanByKeyExt("BreakHierarchy",false))}}}return a};e.QInARepoConditionsCondition.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;if(t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.isBackendCondition()&&o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_ACTIVE)){i.putString("Name",o.getName());i.putBoolean("Active",o.isActive());i.putBoolean("IsBackendCondition",o.isBackendCondition())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.isUserCondition()){var a=o.getQueryModel();var l=a.getSystemType().isTypeOf(e.SystemType.HANA);i.putBoolean("IsBackendCondition",o.isBackendCondition());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_ACTIVE)){i.putBoolean("Active",o.isActive())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_AFTER_VISIBILITY_FILTER)){if(o.isApplyingConditionAfterVisibilityFilter()){i.putBoolean("AfterVisibilityFilter",true)}}if(l){i.putStringNotNullAndNotEmpty("Description",o.getDescription())}else{i.putString("Description",o.getDescription())}i.putString("Name",o.getName());var p=o.getDimensionEvaluationType();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_EVALUATE_ON_DIMENSIONS)){i.putString("EvaluateOnDimensions",p.getName())}if(p===e.ConditionDimensionEvaluationType.GIVEN_LIST){var s=e.QInARepoConditionsCondition.exportEvaluateOnDimensionsList(t,o);i.put("EvaluateOnDimensionsList",s)}var u=o.getThresholds();var g=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||u.getModCounter()>0;if(g){var y=u.size();if(y>0){var m=e.PrFactory.createList();for(var c=0;c<y;c++){var S=t.exportConditionThreshold(u.get(c));if(e.notNull(S)){m.add(S)}}if(!m.isEmpty()){i.put("Threshold",m)}else{return null}}}if(l){if(e.XCollectionUtils.hasElements(a.getPreQueries())&&!o.getOnDisabledToWarning()){i.putString("OnDisabled","Error")}var A=o.isBreakGroup();if(A){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_BREAK_GROUP)){i.putBoolean("BreakGroup",true)}var d=e.QInARepoConditionsCondition.exportBreakGroupDimensionList(o);i.put("BreakGroupList",d)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_BREAK_HIERARCHY)){if(o.isBreakHierarchy()){i.putBoolean("BreakHierarchy",true)}}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoConditionsThreshold=function(){};e.QInARepoConditionsThreshold.prototype=new e.QInARepository;e.QInARepoConditionsThreshold.prototype._ff_c="QInARepoConditionsThreshold";e.QInARepoConditionsThreshold.importSingleMeasureCoordinate=function(t,r,i){if(e.isNull(r)||e.isNull(i)){return}var n=i.getStringByKey("DimensionName");var o=i.getStringByKey("MemberName");if(e.XStringUtils.isNullOrEmpty(n)||e.XStringUtils.isNullOrEmpty(o)){return}var a=t;if(e.isNull(a)){a=r.getContext().getQueryModel()}if(e.notNull(a)){var l=a.getDimensionByNameFromExistingMetadata(n);if(e.notNull(l)){var p=l.getDimensionMember(o);if(e.isNull(p)){var s=a.getOlapEnv().getClientQueryObjectManager();var u=a.getQueryManager().getClientQueryObjectStorageName();var g=l===a.getPrimaryCalculationDimension();p=s.getStructuredMemberIncludeReleased(o,u,g)}if(e.notNull(p)){r.addMeasureCoordinate(p)}}}};e.QInARepoConditionsThreshold.importThresholdValue=function(t,r){if(e.isNull(t)||e.isNull(r)){return}if(r.isBoolean()){t.setBoolean(r.getBoolean())}else if(r.isString()){t.setString(r.getString())}else if(r.isDouble()){t.setDouble(r.getDouble())}else if(r.isInteger()){t.setInteger(r.getInteger())}else if(r.isLong()){t.setLong(r.getLong())}};e.QInARepoConditionsThreshold.setValue=function(t,r,i,n,o){if(o===e.XValueType.VARIABLE){var a=n.getVariableValue();if(e.notNull(a)){i.putString(r,a.getName());if(e.XString.isEqual(r,"Low")){i.putString("LowIs","Variable")}else if(e.XString.isEqual(r,"High")){i.putString("HighIs","Variable")}}}else{e.QInAValueUtils.exportPlaceholderValue(t,r,i,n,o,n.getQueryModel())}};e.QInARepoConditionsThreshold.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_THRESHOLD};e.QInARepoConditionsThreshold.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;if(e.notNull(r)){if(e.isNull(i)){a=e.QConditionThreshold.create(o,n)}else{a=i}var l=r.getStringByKey("Comparison");var p=e.ConditionComparisonOperator.lookupName(l);if(e.notNull(p)){a.setComparisonOperator(p)}var s=r.getByKey("Low");e.QInARepoConditionsThreshold.importThresholdValue(a.getLow(),s);var u=r.getByKey("LowIs");e.QInARepoConditionsThreshold.importThresholdValue(a.getLowIs(),u);var g=r.getByKey("High");e.QInARepoConditionsThreshold.importThresholdValue(a.getHigh(),g);var y=r.getByKey("HighIs");e.QInARepoConditionsThreshold.importThresholdValue(a.getHighIs(),y);var m=r.getListByKey("MeasureCoordinate");if(e.notNull(m)){var c=o.getQueryModel();var S=m.size();for(var A=0;A<S;A++){e.QInARepoConditionsThreshold.importSingleMeasureCoordinate(c,a,m.getStructureAt(A))}}a.setLeavesOnly(r.getBooleanByKeyExt("LeavesOnly",false));var d=r.getByKey("Level");if(e.notNull(d)){a.setLevel(e.XIntegerValue.create(d.getInteger()))}}return a};e.QInARepoConditionsThreshold.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getMeasureCoordinates();var l=e.PrFactory.createList();var p=a.size();if(p===0){return null}for(var s=0;s<p;s++){var u=a.get(s);var g=e.PrFactory.createStructure();var y;if(!u.isReleased()){y=u.getDimension().getName()}else{if(e.XString.isEqual(u.getStorageGroupName(),e.QClientQueryObjectType.SECONDARY_STRUCTURE_MEMBER.getName())){y=o.getQueryModel().getSecondaryCalculationDimension().getName()}else{y=o.getQueryModel().getPrimaryCalculationDimension().getName()}}g.putString("DimensionName",y);g.putString("MemberName",u.getName());l.add(g)}if(!l.isEmpty()){i.put("MeasureCoordinate",l)}var m=o.getQueryModel();var c=m.getSystemType().isTypeOf(e.SystemType.HANA);var S=o.getLow();var A=o.getHigh();if(c){if(S.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"Low",i,S,e.XValueType.INTEGER)}if(A.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"High",i,A,e.XValueType.INTEGER)}var d=o.getLevel();if(e.notNull(d)){i.putInteger("Level",d.getInteger())}}else{if(S.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"Low",i,S,S.getValueType())}if(A.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"High",i,A,A.getValueType())}var I=o.getLowIs();if(I.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"LowIs",i,I,I.getValueType())}var f=o.getHighIs();if(f.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"HighIs",i,f,f.getValueType())}}var N=o.getComparisonOperator();i.putString("Comparison",N.getName());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoCurrencyTranslationItem=function(){};e.QInARepoCurrencyTranslationItem.prototype=new e.QInARepository;e.QInARepoCurrencyTranslationItem.prototype._ff_c="QInARepoCurrencyTranslationItem";e.QInARepoCurrencyTranslationItem.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_ITEM};e.QInARepoCurrencyTranslationItem.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.notNull(a)&&e.XCollectionUtils.hasElements(r)){a.setMetadataDefined(r.getBooleanByKeyExt("MetadataDefined",false));a.setSourceCurrency(this.importSpecificCurrencyTranslationElement(t,a,e.XValueType.STRING,r.getStructureByKey("SourceCurrency")));a.setTargetCurrency(this.importSpecificCurrencyTranslationElement(t,a,e.XValueType.STRING,r.getStructureByKey("TargetCurrency")));a.setErrorHandling(e.QInAConverter.lookupCtErrorHandlingMode(r.getStringByKey("ErrorHandling")));if(r.getBooleanByKeyExt("DefaultCurrency",false)){a.setDefaultCurrency()}a.setReferenceDate(this.importSpecificCurrencyTranslationElement(t,a,e.XValueType.DATE,r.getStructureByKey("ReferenceDate")));if(r.containsKey("ReferenceDate")){var l=r.getStructureByKey("ReferenceDate");if(l.containsKey("DateOffset")||l.containsKey("DateOffsetGranularity")){var p=a.getDateOffset();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.containsKey("DateOffset")){p=l.getIntegerByKey("DateOffset")}var s=a.getDateOffsetGranularity();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.containsKey("DateOffsetGranularity")){s=e.DateOffsetGranularity.lookup(l.getStringByKey("DateOffsetGranularity"))}if(e.notNull(s)){if(a.getReferenceDateFieldName()!==null){a.setReferenceDateByFieldNameOffsetAndGranularity(a.getReferenceDateFieldName(),p,s)}else{a.setDynamicReferenceDateWithOffsetAndGranularity(p,s)}}}}a.setRateName(this.importSpecificCurrencyTranslationElement(t,a,e.XValueType.STRING,r.getStructureByKey("RateName")));if(r.containsKey("RateName")){var u=r.getStructureByKey("RateName");if(u.hasStringByKey("RateType")){a.setFixedRateType(e.QInAConverter.lookupRateType(u.getStringByKey("RateType")))}if(u.hasStringByKey("RateVersion")){a.setFixedRateVersion(u.getStringByKey("RateVersion"))}if(u.hasStringByKey("Category")){a.setFixedCategory(e.QInAConverter.lookupCategory(u.getStringByKey("Category")))}}}return i};e.QInARepoCurrencyTranslationItem.prototype.importSpecificCurrencyTranslationElement=function(t,r,i,n){var o=null;if(e.notNull(n)){if(n.containsKey("Fixed")){var a=n.getStringByKey("Fixed");if(i===e.XValueType.STRING){o=e.QCurrencyLookupValue.createFixedByValue(r,e.XStringValue.create(a))}else if(i===e.XValueType.DATE){o=e.QCurrencyLookupValue.createFixedByValue(r,e.XDate.createDateSafe(a))}}else if(n.containsKey("DimensionAttribute")){o=e.QCurrencyLookupValue.createByFieldName(r,n.getStringByKey("DimensionAttribute"))}else if(n.containsKey("Formula")){var l=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,r.getQueryModel().getMeasureDimension(),n.getStructureByKey("Formula"),null,null);o=e.QCurrencyLookupValue.createByFormulaItem(r,l)}else if(n.containsKey("Variable")){o=e.QCurrencyLookupValue.createByVariableName(r,n.getStringByKey("Variable"))}}return o};e.QInARepoCurrencyTranslationItem.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;if(e.notNull(o)){i.putStringNotNullAndNotEmpty("ErrorHandling",e.QInAConverter.lookupCtErrorHandlingModeInA(o.getErrorHandling()));i.putString("Name",o.getName());i.putString("Description",o.getText());i.putBoolean("MetadataDefined",o.isMetadataDefined());if(o.isDefaultCurrency()){i.putBoolean("DefaultCurrency",true)}var a=o.getQueryModel();this.exportSpecificCurrencyTranslationProperty(t,i,"SourceCurrency",o.getSourceCurrency(),a);this.exportSpecificCurrencyTranslationProperty(t,i,"TargetCurrency",o.getTargetCurrency(),a);this.exportSpecificCurrencyTranslationProperty(t,i,"ReferenceDate",o.getReferenceDate(),a);this.exportReferenceDateOffsets(i,o,t);this.exportSpecificCurrencyTranslationProperty(t,i,"RateName",o.getRateName(),a);this.exportPlanningRateNameSettings(i,o,t)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoCurrencyTranslationItem.prototype.exportPlanningRateNameSettings=function(t,r,i){if(e.CtCategory.isDefined(r.getFixedCategory())||e.XStringUtils.isNotNullAndNotEmpty(r.getFixedRateVersion())||e.CtRateType.isDefined(r.getFixedRateType())){var n;if(t.containsKey("RateName")){n=t.getStructureByKey("RateName")}else{n=t.putNewStructure("RateName")}if(i.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_RATE_TYPE)){n.putStringNotNullAndNotEmpty("RateType",e.QInAConverter.lookupRateTypeInA(r.getFixedRateType()))}n.putStringNotNullAndNotEmpty("RateVersion",r.getFixedRateVersion());if(i.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_CATEGORY)){n.putStringNotNullAndNotEmpty("Category",e.QInAConverter.lookupCategoryInA(r.getFixedCategory()))}}};e.QInARepoCurrencyTranslationItem.prototype.exportReferenceDateOffsets=function(t,r,i){if(r.getDateOffsetGranularity()!==null){var n;if(t.containsKey("ReferenceDate")){n=t.getStructureByKey("ReferenceDate")}else{n=t.putNewStructure("ReferenceDate")}if(i.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_DATE_OFFSET_GRANULARITY)){n.putString("DateOffsetGranularity",r.getDateOffsetGranularity().getName())}if(i.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_DATE_OFFSET)){n.putInteger("DateOffset",r.getDateOffset())}}};e.QInARepoCurrencyTranslationItem.prototype.exportSpecificCurrencyTranslationProperty=function(t,r,i,n,o){if(e.notNull(n)){if(n.isFixed()){r.putNewStructure(i).putString("Fixed",n.getFixedValue().getStringRepresentation())}else if(n.isFieldBased()){r.putNewStructure(i).putString("DimensionAttribute",n.getFieldName())}else if(n.isFormulaBased()){var a=r.putNewStructure(i).putNewStructure("Formula");e.QInARepoMemberAbstract.exportFormulaItem(t,n.getFormulaItem(),a,o)}else if(n.isVariableBased()){r.putNewStructure(i).putString("Variable",n.getVariableName())}}};e.QInARepoCurrencyTranslationList=function(){};e.QInARepoCurrencyTranslationList.prototype=new e.QInARepository;e.QInARepoCurrencyTranslationList.prototype._ff_c="QInARepoCurrencyTranslationList";e.QInARepoCurrencyTranslationList.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_LIST};e.QInARepoCurrencyTranslationList.prototype.getTagName=function(){return"CurrencyTranslationsRepo"};e.QInARepoCurrencyTranslationList.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,i,n,o)}return i};e.QInARepoCurrencyTranslationList.prototype.importComponentWithList=function(t,r,i,n,o){var a=o.getQueryModel().getCurrencyTranslationManager();if(e.notNull(a)&&e.XCollectionUtils.hasElements(r)){var l=r.size();for(var p=0;p<l;p++){var s=r.getStructureAt(p);var u=s.getStringByKey("Name");var g=s.getStringByKey("Description");var y=a.getMeasureCurrencyTranslation(u);if(e.isNull(y)){y=a.addNewMeasureCurrencyTranslationBase(u,g)}t.importCurrencyTranslationElement(s,y,o)}}return a};e.QInARepoCurrencyTranslationList.prototype.exportComponentWithStructure=function(t,r,i,n){var o=this.exportComponentWithList(t,r,n);i.put("Elements",o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoCurrencyTranslationList.prototype.exportComponentWithList=function(t,r,i){var n=null;var o=r;var a=o.getMeasureCurrencyTranslationsForInaData();if(e.XCollectionUtils.hasElements(a)){n=e.PrFactory.createList();var l=a.size();for(var p=0;p<l;p++){var s=a.get(p);t.exportCurrencyTranslationElement(s,n.addNewStructure())}}return n};e.QInARepoCurrencyTranslationManager=function(){};e.QInARepoCurrencyTranslationManager.prototype=new e.QInARepository;e.QInARepoCurrencyTranslationManager.prototype._ff_c="QInARepoCurrencyTranslationManager";e.QInARepoCurrencyTranslationManager.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER};e.QInARepoCurrencyTranslationManager.prototype.getTagName=function(){return"CurrencyTranslationRepo"};e.QInARepoCurrencyTranslationManager.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.notNull(r)&&e.notNull(a)){this.importQueryCurrencyTranslation(t,r,a);this.importSpecificCurrencyTranslations(t,r,a,o);this.importDefaultCurrencyTranslation(t,r,a,o)}return i};e.QInARepoCurrencyTranslationManager.prototype.importDefaultCurrencyTranslation=function(t,r,i,n){var o=r.getStructureByKey("Query");if(e.notNull(o)&&e.notNull(i)){var a=i.getQuery2MeasureCurrencyTranslationBridge();if(e.notNull(a)){a.setCurrencyTranslationName(r.getStringByKey("CurrencyTranslationName"));a.setApplyDefinedCurrencyTranslation(r.getBooleanByKeyExt("Active",false));a.setApplyToDefaultCurrencyTranslation(r.getBooleanByKeyExt("CurrencyTranslationApplyToDefault",false));t.importCurrencyTranslationElement(o,a.getMeasureCurrencyTranslation(),n)}}};e.QInARepoCurrencyTranslationManager.prototype.importQueryCurrencyTranslation=function(t,r,i){var n=i.getCurrencyTranslationDetails();if(e.notNull(n)&&r.hasStringByKey("Name")&&r.hasStringByKey("Operation")){var o=r.getStringByKey("Name");var a=r.getStringByKey("Operation");var l=r.getStringByKey("Target");if(!e.XStringUtils.isNullOrEmpty(n.getCurrencyTranslationName())&&n.getCurrencyTranslationOperation()!==null&&!e.XStringUtils.isNullOrEmpty(n.getCurrencyTranslationOperation().getName())&&(e.XStringUtils.isNullOrEmpty(o)||e.XStringUtils.isNullOrEmpty(a)||e.XStringUtils.isNullOrEmpty(l))){i.resetCurrencyTranslationDetails()}else{n.setCurrencyTranslationName(o);n.setCurrencyTranslationOperation(e.CurrencyTranslationOperation.lookup(a));n.setCurrencyTranslationTarget(l)}}};e.QInARepoCurrencyTranslationManager.prototype.importSpecificCurrencyTranslations=function(t,r,i,n){var o=r.getListByKey("CurrencyTranslations");if(e.XCollectionUtils.hasElements(o)){var a=o.size();for(var l=0;l<a;l++){var p=o.getStructureAt(l);var s=p.getStringByKey("Name");var u=p.getStringByKey("Description");var g=i.getMeasureCurrencyTranslation(s);if(e.isNull(g)){g=i.addNewMeasureCurrencyTranslationBase(s,u)}t.importCurrencyTranslationElement(p,g,n)}}};e.QInARepoCurrencyTranslationManager.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;this.exportCurrencyTranslationDetails(i,o);this.exportSpecificCurrencyTranslations(t,i,o);this.exportDefaultCurrencyTranslations(t,i,o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoCurrencyTranslationManager.prototype.exportDefaultCurrencyTranslations=function(t,r,i){var n=i.getQuery2MeasureCurrencyTranslationBridge();if(e.notNull(n)){var o=r.putNewStructure("Query");var a=n.getMeasureCurrencyTranslation();t.exportCurrencyTranslationElement(a,o);r.putStringNotNullAndNotEmpty("CurrencyTranslationName",n.getCurrencyTranslationName());r.putBoolean("Active",n.isApplyDefinedCurrencyTranslation());if(n.isApplyToDefaultCurrencyTranslation()){r.putBoolean("CurrencyTranslationApplyToDefault",n.isApplyToDefaultCurrencyTranslation())}}};e.QInARepoCurrencyTranslationManager.prototype.exportCurrencyTranslationDetails=function(t,r){if(e.isNull(r)||!r.getModelCapabilities().supportsQueryCurrencyTranslation()){return}var i=r.getCurrencyTranslationDetails();if(e.notNull(i)){if(e.XStringUtils.isNotNullAndNotEmpty(i.getCurrencyTranslationName())){if(i.getCurrencyTranslationOperation()===null){throw e.XException.createIllegalArgumentException("CurrencyTranslation Operation required.")}t.putString("Operation",i.getCurrencyTranslationOperation().getName());t.putString("Name",i.getCurrencyTranslationName());if(i.getCurrencyTranslationOperation()===e.CurrencyTranslationOperation.BOTH||i.getCurrencyTranslationOperation()===e.CurrencyTranslationOperation.TARGET){if(i.getCurrencyTranslationTarget()===null){throw e.XException.createIllegalArgumentException("CurrencyTranslation Target Currency required.")}}t.putString("Target",i.getCurrencyTranslationTarget())}else{t.putString("Operation","");t.putString("Name","");t.putString("Target","")}}};e.QInARepoCurrencyTranslationManager.prototype.exportSpecificCurrencyTranslations=function(t,r,i){if(e.isNull(i)||!i.getModelCapabilities().supportsCurrencyTranslation()){return}var n=i.getMeasureCurrencyTranslations();if(e.XCollectionUtils.hasElements(n)){var o=r.putNewList("CurrencyTranslations");var a=n.size();for(var l=0;l<a;l++){var p=n.get(l);t.exportCurrencyTranslationElement(p,o.addNewStructure())}}};e.QInARepoDataCell=function(){};e.QInARepoDataCell.prototype=new e.QInARepository;e.QInARepoDataCell.prototype._ff_c="QInARepoDataCell";e.QInARepoDataCell.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELL};e.QInARepoDataCell.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=o.getQueryModel();var l=a.getQueryDataCellsBase();var p=this.getDataCellFromExistingList(a,r);var s=false;if(e.isNull(p)){p=l.newQueryDataCell(this.getDataCellName(r,a));s=true}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("SignReversal")){p.setSignReversal(r.getBooleanByKeyExt("SignReversal",false))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Emphasized")){p.setEmphasized(r.getBooleanByKeyExt("Emphasized",false))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Cumulation")){p.setCumulation(r.getBooleanByKeyExt("Cumulation",false))}p.setInputEnabled(r.getBooleanByKeyExt("InputEnabled",false));if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("DisaggregationMode")){p.setDisaggregationMode(e.DisaggregationMode.lookupWithDefault(r.getStringByKeyExt("DisaggregationMode",null),e.DisaggregationMode.NONE))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("DisaggregationReferenceCellName")){p.setDisaggregationRefCellName(r.getStringByKeyExt("DisaggregationReferenceCellName",null))}if((s||a.isBasicMeasureSettingsExportedInRepo())&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("ScalingFactor"))){p.setScalingFactor(r.getIntegerByKeyExt("ScalingFactor",1))}if((s||a.isBasicMeasureSettingsExportedInRepo())&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Decimals"))){p.setDecimalPlaces(r.getIntegerByKeyExt("Decimals",0))}var u=r.getIntegerByKeyExt("CellValueType",0);var g=e.QInAConverter.lookupValueTypeByInt(u);p.setBaseCellValueType(g);if(g===e.XValueType.DIMENSION_MEMBER){var y=r.getStringByKey("CellDimensionReference");p.setDimensionReference(a.getDimensions().getByKey(y))}var m=r.getListByKey("DimensionMemberReferences");if(e.notNull(m)){for(var c=0;c<m.size();c++){var S=m.getStringAt(c);if(!p.hasMeasureReference(S)){p.addDimensionMemberReference(S)}}}if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE&&!p.hasAnyMemberReferencesSet()){l.removeElement(p)}if(t.getOriginalMode()===e.QModelFormat.INA_CLONE&&r.hasStringByKey("SemanticObject")){p.setSemanticObject(r.getStringByKey("SemanticObject"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("CurrencyPresentation")){p.setCurrencyPresentation(e.QInAConverter.lookupCurrencyPresentation(r.getStringByKey("CurrencyPresentation")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ScaleAndUnitPlacement")){p.setScaleAndUnitPlacement(e.QInAConverter.lookupScaleAndUnitPlacement(r.getStringByKey("ScaleAndUnitPlacement")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ScaleFormat")){p.setScaleFormat(e.QInAConverter.lookupScaleFormat(r.getStringByKey("ScaleFormat")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("SignPresentation")){p.setSignPresentation(e.QInAConverter.lookupSignPresentation(r.getStringByKey("SignPresentation")))}return p};e.QInARepoDataCell.prototype.getDataCellFromExistingList=function(t,r){var i=r.getStringByKey("Name");var n=r.getListByKey("DimensionMemberReferences");var o=t.getQueryDataCellsBase();if(e.XCollectionUtils.hasElements(n)){var a=n.getStringAt(0);var l=n.size()>1?n.getStringAt(1):null;var p=e.XStringUtils.isNotNullAndNotEmpty(l);return e.XCollectionUtils.findFirst(o,function(e){return e.hasMeasureReference(a)&&(p&&e.hasMeasureReference(l)||!p&&e.getReferenceStructureElement2()===null)}.bind(this))}else if(e.XStringUtils.isNotNullAndNotEmpty(i)){var s=o.getByKey(i);if(e.notNull(s)&&s.getReferenceStructureElement1()===null&&s.getReferenceStructureElement2()===null){return s}}return null};e.QInARepoDataCell.prototype.getDataCellName=function(t,r){var i=t.getStringByKey("Name");var n=r.getQueryDataCells();if(n.containsKey(i)){var o=n.size();while(n.containsKey(e.XInteger.convertToString(o))){o++}i=e.XInteger.convertToString(o)}return i};e.QInARepoDataCell.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_DISAGGREGATION_MODE)){var a=o.getDisaggregationMode();e.QInAExportUtil.setNameIfNotNull(i,"DisaggregationMode",e.isNull(a)?e.DisaggregationMode.NONE:a)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_DISAGGREGATION_REF_CELL_NAME)){var l=o.getDisaggregationRefCell();i.putString("DisaggregationReferenceCellName",e.isNull(l)?"0":l.getName())}if(e.XStringUtils.isNullOrEmpty(o.getName())||t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SCALING_FACTOR)){i.putInteger("ScalingFactor",o.getScalingFactor())}if(e.XStringUtils.isNullOrEmpty(o.getName())||t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_DECIMAL_PLACES)){i.putInteger("Decimals",o.getDecimalPlaces())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SIGN_REVERSAL)){i.putBoolean("SignReversal",o.hasSignReversal())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_EMPHASIZED)){i.putBoolean("Emphasized",o.isEmphasized())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_CUMULATION)){i.putBoolean("Cumulation",o.isCumulated())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_CURRENCY_PRESENTATION)){i.putStringNotNullAndNotEmpty("CurrencyPresentation",e.QInAConverter.lookupCurrencyPresentationInA(o.getCurrencyPresentation()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SCALE_AND_UNIT_PLACEMENT)){i.putStringNotNullAndNotEmpty("ScaleAndUnitPlacement",e.QInAConverter.lookupScaleAndUnitPlacementInA(o.getScaleAndUnitPlacement()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SCALE_FORMAT)){i.putStringNotNullAndNotEmpty("ScaleFormat",e.QInAConverter.lookupScaleFormatInA(o.getScaleFormat()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SIGN_PRESENTATION)){i.putStringNotNullAndNotEmpty("SignPresentation",e.QInAConverter.lookupSignPresentationInA(o.getSignPresentation()))}var p=o.getBaseValueType();var s=e.QInAConverter.lookupIntByValueType(p);i.putInteger("CellValueType",s);var u=i.putNewList("DimensionMemberReferences");var g=o.getReferenceStructureElement1();if(e.notNull(g)){u.addString(g.getName());g=o.getReferenceStructureElement2();if(e.notNull(g)){u.addString(g.getName())}}if(t.getOriginalMode()===e.QModelFormat.INA_CLONE){i.putStringNotNullAndNotEmpty("SemanticObject",o.getSemanticObject())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoDataCellsAll=function(){};e.QInARepoDataCellsAll.prototype=new e.QInARepository;e.QInARepoDataCellsAll.prototype._ff_c="QInARepoDataCellsAll";e.QInARepoDataCellsAll.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELLS};e.QInARepoDataCellsAll.prototype.getTagName=function(){return"QueryDataCellsRepo"};e.QInARepoDataCellsAll.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,i,n,o)}return i};e.QInARepoDataCellsAll.prototype.importComponentWithList=function(t,r,i,n,o){var a=o.getModelCapabilities();var l=o.getQueryModel();if(a.supportsDataCells()&&l.getQueryManager().getInitSettings().isRequestingDataCells()){if(e.notNull(r)){for(var p=0;p<r.size();p++){t.importDataCell(r.getStructureAt(p),l)}}}return null};e.QInARepoDataCellsAll.prototype.exportComponentWithStructure=function(t,r,i,n){var o=this.exportComponentWithList(t,r,n);if(e.notNull(o)){i.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoDataCellsAll.prototype.exportComponentWithList=function(t,r,i){var n=r;var o=null;var a=n.getModelCapabilities();if(a.supportsDataCells()&&n.getQueryManager().getInitSettings().isRequestingDataCells()){var l=n.getQueryDataCells();o=e.PrFactory.createList();var p=l.size();for(var s=0;s<p;s++){var u=l.get(s);var g=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||u.isUserAddedDataCell()||u.getModCounter()>0;if(g){var y=t.exportDataCell(u,null);o.add(y)}}}return o};e.QInARepoDataSource=function(){};e.QInARepoDataSource.prototype=new e.QInARepository;e.QInARepoDataSource.prototype._ff_c="QInARepoDataSource";e.QInARepoDataSource.importQd=function(t,r,i,n){var o=null;var a=r;if(e.notNull(i)){if(e.notNull(a)&&!a.containsKey(i)){a=a.getStructureByKey("Analytics");if(e.notNull(a)&&!a.containsKey(i)){a=a.getStructureByKey("Definition")}}if(e.notNull(a)&&a.containsKey(i)){var l=a.getElementTypeByKey(i);if(l===e.PrElementType.STRING){o=e.QFactory.createDataSourceWithType(e.MetaObjectType.INFOPROVIDER,a.getStringByKey(i))}else if(l===e.PrElementType.STRUCTURE){a=a.getStructureByKey(i)}}else if(e.notNull(a)&&!a.containsKey(i)){a=null}}if(e.isNull(o)&&e.notNull(a)){o=e.QFactory.createDataSource();e.QInARepoDataSource.importDs2(t,a,n,o);var p=r.getStringByKey("ValidationHash");if(e.isNull(p)){p=a.getStringByKey("ValidationHash")}o.setValidationHash(p);var s=r.getStructureByKey("GenericServiceDescription");if(e.notNull(s)){o.setGenericServiceDescription(s)}}return o};e.QInARepoDataSource.importDs2=function(t,r,i,n){var o=r.getStringByKey("System");if(e.notNull(o)){n.setSystemName(o)}var a=r.getStringByKey("Type");var l=null;if(e.notNull(a)){a=e.XString.toLowerCase(a);l=e.MetaObjectType.lookup(a)}if(e.isNull(l)){l=e.MetaObjectType.DBVIEW}n.setType(l);e.QInARepoDataSourceProperties.importQd(n,r);if(l===e.MetaObjectType.MULTI_SOURCE||l===e.MetaObjectType.BLENDING){var p=e.PrUtils.getListProperty(r,"Sources");if(e.notNull(p)){var s=n.getMultiSourcesBase();var u=p.size();for(var g=0;g<u;g++){var y=e.PrUtils.getStructureElement(p,g);var m=e.QFactory.createDataSource();e.QInARepoDataSource.importDs2(t,y,i,m);s.add(m)}}var c=e.PrUtils.getListProperty(r,"Mappings");n.setMappings(c)}e.QInARepoDataSourceExtDims.importQd(t,n,r);var S=r.getStringByKey("ValidationHash");n.setValidationHash(S);var A=r.getStructureByKey("GenericServiceDescription");if(e.notNull(A)){n.setGenericServiceDescription(A)}return n};e.QInARepoDataSource.exportDataSource=function(t,r,i,n){var o=e.PrFactory.createStructure();var a=r.getType();if(e.notNull(a)){o.putString("Type",a.getCamelCaseName());var l=r.getSystemName();if(e.notNull(l)){o.putString("System",l)}var p;if(a===e.MetaObjectType.MULTI_SOURCE){p=o.putNewList("Sources");var s=r.getMultiSources();var u=s.size();for(var g=0;g<u;g++){var y=s.get(g);var m=e.QInARepoDataSource.exportDataSource(t,y,i,null);p.add(m)}o.put("Mappings",r.getMappings())}else if(a===e.MetaObjectType.BLENDING){var c=r.getBlendingDefinition();if(e.notNull(c)){p=e.QInARepoDataSourceBlending.exportBlendingSources(t.getMode(),c,true);o.put("Sources",p);var S=e.QInARepoDataSourceBlending.exportBlendingMappings(c.getMappings());o.put("Mappings",S)}}var A=r.getGenericServiceDescription();if(e.notNull(A)){o.put("GenericServiceDescription",A)}}e.QInARepoDataSourceProperties.exportQd(t,r,o,i);e.QInARepoDataSourceExtDims.exportQd(t,r,o);if(e.notNull(n)){n.put("DataSource",o)}return o};e.QInARepoDataSource.prototype.getComponentType=function(){return e.OlapComponentType.DATA_SOURCE};e.QInARepoDataSource.prototype.getTagName=function(){return"DataSource"};e.QInARepoDataSource.prototype.newModelComponent=function(t,r,i,n){return e.QFactory.createDataSource()};e.QInARepoDataSource.prototype.importComponentWithStructure=function(t,r,i,n,o){return e.QInARepoDataSource.importDs2(t,r,o,i)};e.QInARepoDataSource.prototype.exportComponentWithStructure=function(t,r,i,n){var o=e.XMath.binaryAnd(n,e.QImExFlag.RUN_AS_USER)>0;return e.QInARepoDataSource.exportDataSource(t,r,o,null)};e.QInARepoDimension=function(){};e.QInARepoDimension.prototype=new e.QInARepository;e.QInARepoDimension.prototype._ff_c="QInARepoDimension";e.QInARepoDimension.importRsAttributeNodes=function(t,r,i){var n=r.getListByKey("ResultSetAttributeNodes");var o=r.getListByKey("ResultSetAttributeFields");var a=i.getQueryModelBase();var l=a.getQueryManagerBase().getInitSettings().isRequestingMinimizedAttributes();if(e.notNull(n)){var p=i.getResultSetAttributes();p.clear();var s=n.size();for(var u=0;u<s;u++){var g=n.getStringAt(u);var y=i.getAttributeByName(g);if(e.notNull(y)){p.add(y);e.QInARepoDimension.importRsFieldsForAttribute(t,y,o,u)}else if(l&&t.getMessage(e.Severity.WARNING,e.ErrorCodes.ATTRIBUTE_NOT_FOUND)===null){t.addWarning(e.ErrorCodes.ATTRIBUTE_NOT_FOUND,"Some attributes saved in the Story no more exist in the Query")}}}};e.QInARepoDimension.importRsFieldsForAttribute=function(t,r,i,n){if(e.isNull(i)||i.size()<=n){return}var o=i.getListAt(n);var a=r.getResultSetFields();a.clear();var l=o.size();var p=r.getDimension().getQueryModelBase();var s=p.getQueryManagerBase().getInitSettings().isRequestingMinimizedAttributes();for(var u=0;u<l;u++){var g;var y=null;if(o.getElementTypeAt(u)===e.PrElementType.STRING){g=o.getStringAt(u)}else{g=o.getStructureAt(u).getStringByKey("Name");var m=o.getStructureAt(u).getStringByKey("Obtainability");if(e.XStringUtils.isNotNullAndNotEmpty(m)){y=e.ObtainabilityType.lookup(m)}}var c=r.getFieldByName(g);if(e.isNull(c)){c=r.getDimension().getFieldByName(g)}a.add(c);if(e.notNull(y)){c.setObtainability(y)}if(e.isNull(c)&&s&&t.getMessage(e.Severity.WARNING,e.ErrorCodes.ATTRIBUTE_NOT_FOUND)===null){t.addWarning(e.ErrorCodes.ATTRIBUTE_NOT_FOUND,"Some attributes saved in the Story no more exist in the Query")}}};e.QInARepoDimension.importRsFields=function(t,r,i){var n=r.getListByKey("ResultSetFields");if(e.notNull(n)){var o=i.getQueryModelBase();var a=o.getQueryManagerBase().getInitSettings().isRequestingMinimizedAttributes();var l=i.getResultSetFields();l.clear();var p=n.size();for(var s=0;s<p;s++){var u;var g=null;if(n.getElementTypeAt(s)===e.PrElementType.STRING){u=n.getStringAt(s)}else{u=n.getStructureAt(s).getStringByKey("Name");var y=n.getStructureAt(s).getStringByKey("Obtainability");if(e.XStringUtils.isNotNullAndNotEmpty(y)){g=e.ObtainabilityType.lookup(y)}}var m=i.getFieldByName(u);if(e.notNull(m)){l.add(m);if(e.notNull(g)){m.setObtainability(g)}}else if(a&&t.getMessage(e.Severity.WARNING,e.ErrorCodes.ATTRIBUTE_NOT_FOUND)===null){t.addWarning(e.ErrorCodes.ATTRIBUTE_NOT_FOUND,"Some attributes saved in the Story no more exist in the Query")}}}};e.QInARepoDimension.exportResultSetFields=function(t,r,i){var n=i.getResultSetFields();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.getModCounter()>0){var o=r.putNewList("ResultSetFields");var a=n.size();for(var l=0;l<a;l++){var p=o.addNewStructure();var s=n.get(l);p.putString("Name",s.getName());var u=s.getObtainability();if(e.notNull(u)){p.putString("Obtainability",u.getName())}}}};e.QInARepoDimension.exportResultSetAttributes=function(t,r,i){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||e.QInARepoDimension.exportResultSetAttributeDetails(i)){var n=r.putNewList("ResultSetAttributeNodes");var o=r.putNewList("ResultSetAttributeFields");var a=i.getResultSetAttributes();var l=a.size();for(var p=0;p<l;p++){var s=a.get(p);n.addString(s.getName());var u=o.addNewList();var g=s.getResultSetFields();var y=g.size();for(var m=0;m<y;m++){var c=u.addNewStructure();var S=g.get(m);c.putString("Name",S.getName());var A=S.getObtainability();if(e.notNull(A)){c.putString("Obtainability",A.getName())}}}}};e.QInARepoDimension.exportResultSetAttributeDetails=function(e){var t=false;var r=e.getResultSetAttributes();if(r.getModCounter()>0){t=true}else{var i=r.size();for(var n=0;n<i;n++){var o=r.get(n);var a=o.getResultSetFields();if(a.getModCounter()>0){t=true;break}}}return t};e.QInARepoDimension.exportListOfFields=function(t,r,i){var n=t.size();for(var o=0;o<n;o++){var a=t.get(o);if(a.getTextTransformation()===null&&a.getDimension().getDimensionType()!==e.DimensionType.FORMULA_CALCULATED_DIMENSION){continue}r.add(i.exportComponent(e.OlapComponentType.FIELD,a,null,e.QImExFlag.DEFAULT_ALL))}};e.QInARepoDimension.prototype.getComponentType=function(){return e.OlapComponentType.ABSTRACT_DIMENSION};e.QInARepoDimension.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=o.getQueryModel();var l=i;var p=r.getStringByKey("Name");if(e.isNull(l)){if(e.notNull(a)){if(e.isNull(p)&&r.getBooleanByKeyExt("MeasureStructure",false)){var s=a.getMeasureDimension();if(e.notNull(s)){p=s.getName()}}l=a.getDimensionManagerBase().getDimensionByNameInternal(p);var u=r.getBooleanByKeyExt("SkipMetadataValidationOnRepoImport",false);if(e.isNull(l)&&u){l=this.addNewDimensionWithDummyMetadata(t,o,a,p)}if(e.isNull(l)){t.addWarning(e.ErrorCodes.INVALID_DIMENSION,e.XStringUtils.concatenate3("Dimension '",p,"' not found in QueryModel! Can't deserialize dimension."))}}}if(e.notNull(l)){var g=r.getBooleanByKeyExt("IsDelta",false);var y=false;if(e.notNull(a)&&a.getMeasureDimension()!==null){y=e.XString.isEqual(p,a.getMeasureDimension().getName())}var m=r.getIntegerByKeyExt("Visibility",-1);if(m!==-1){l.getMetadataBase().setVisibility(e.QInAConverter.lookupDimensionVisibility(m))}if(g&&l.getDimensionType()===e.DimensionType.ACCOUNT&&t.getSession().hasFeature(e.FeatureToggleOlap.SFX_STORE_HIERARCHY_MEMBER_NAMES_AS_FLAT)&&t.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)){l.setHierarchicalDimensionMemberNamesStoredAsFlat(true)}var c=l.getPlaceholderIdMemberMap().getValuesAsReadOnlyList();var S=r.getListByKey("PlaceholderIds");if(e.notNull(S)&&(g||!y)){l.clearPlaceholderIds()}if(l.getPlaceholderIds().size()===0&&e.notNull(S)){for(var A=0;A<S.size();A++){var d=S.getStringAt(A);d=this.migratePlaceholderId(t,a,d);l.addPlaceholderId(d)}}if(c.size()>l.getPlaceholderIdMemberMap().getValuesAsReadOnlyList().size()){var I=c.getIterator();while(I.hasNext()){var f=I.next();if(l.getPlaceholderIdByAlias(f.getAliasOrMemberName())===null){l.assignFreePlaceholderToMember(f)}}}if(!g){l.clearAlternativeFieldValues()}if(g&&e.XStringUtils.isNullOrEmpty(l.getDefaultHierarchyName())&&r.containsKey("DefaultHierarchy")){l.getHierarchyManagerBase().setDefaultHierarchyName(r.getStringByKey("DefaultHierarchy"))}if(g&&t.getSession().hasFeature(e.FeatureToggleOlap.LAZY_LOADING_SFX_ACCOUNT_MEMBERS)&&l.getDimensionType()===e.DimensionType.ACCOUNT){l.setStructureMemberLazyLoader(e.InARepoStructureMemberLazyLoader.create(l,t.getMode(),r))}else{t.importMembers(r,l,o)}if(!g){this.importFieldsLayout(t,r,l,o);t.importHierarchy(l,r);var N=a.getModelCapabilities();if(!N.supportsExtendedSort()){if(N.supportsDimensionSorting(l,e.SortType.MEMBER_KEY)){var v=r.getIntegerByKeyExt("SortOrder",e.QInAConverter.lookupSortDirectionInA(e.XSortDirection.DEFAULT_VALUE));var T=e.QInAConverter.lookupSortDirection(v);l.getResultSetSorting().setDirection(T)}}if(t.capabilities.supportsCummulative()&&l.supportsCumulative()){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("IsCummulative")){l.setIsCumulative(r.getBooleanByKeyExt("IsCummulative",false))}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Skip")){var R=r.getIntegerByKeyExt("Skip",0);l.setSkipEntries(R)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Top")){var E=r.getIntegerByKeyExt("Top",0);l.setTopEntries(E)}var C=r.getStringByKey("ReadMode");if(e.notNull(C)){var Q=e.QInAConverter.lookupReadMode(C);l.setReadModeGraceful(e.QContextType.RESULT_SET,Q)}var M=r.getStringByKey("SelectorReadMode");if(e.notNull(M)){var D=e.QInAConverter.lookupReadMode(M);l.setReadModeGraceful(e.QContextType.SELECTOR,D)}t.importTotals(r,l.getResultStructureControllerBase(),o);this.importAlternativeFieldValues(r,l);var L=r.getStructureByKey("PlacholderIdMapping");if(e.notNull(L)){var B=L.getKeysAsReadOnlyListOfString();for(var F=0;F<B.size();F++){var h=B.get(F);var O=L.getStringByKey(h);h=this.migratePlaceholderId(t,a,h);l.assignPlaceholderIdByAlias(h,O)}}var x;var _;if(l.getModelCapabilities().supportsMemberVisibility()&&r.containsKey("VisibilityOverride")){var b=r.getStructureByKey("VisibilityOverride");_=b.getKeysAsReadOnlyListOfString();for(var K=0;K<_.size();K++){x=_.get(K);var P=e.QInAConverter.lookupResultSetVisibility(b.getStringByKey(x));l.getOverdefinedMemberManager().setVisibilityOverride(x,P)}}if(r.containsKey("NumericScaleOverride")){var V=r.getStructureByKey("NumericScaleOverride");_=V.getKeysAsReadOnlyListOfString();for(var U=0;U<_.size();U++){x=_.get(U);l.getOverdefinedMemberManager().setNumericScaleOverride(x,V.getIntegerByKey(x))}}if(l.getModelCapabilities().supportsMemberVisibility()&&r.containsKey("NumericShiftOverride")){var H=r.getStructureByKey("NumericShiftOverride");_=H.getKeysAsReadOnlyListOfString();for(var X=0;X<_.size();X++){x=_.get(X);l.getOverdefinedMemberManager().setNumericShiftOverride(x,H.getIntegerByKey(x))}}if(r.containsKey("NumericPrecisionOverride")){var w=r.getStructureByKey("NumericPrecisionOverride");_=w.getKeysAsReadOnlyListOfString();for(var k=0;k<_.size();k++){x=_.get(k);l.getOverdefinedMemberManager().setNumericPrecisionOverride(x,w.getIntegerByKey(x))}}var W=r.getStringByKey("OverrideText");if(e.XStringUtils.isNotNullAndNotEmpty(W)){l.setOverrideText(W)}}var z=r.getStringByKey("AccountTypeAttributeName");var Y=l.getMetadataBase();if(e.notNull(z)){Y.setAccountTypeAttributeName(z)}var G=r.getBooleanByKeyExt("FiscalEnabled",false);if(G){Y.setFiscalEnabled(G);Y.setFiscalDisplayPeriod(r.getStringByKey("FiscalDisplayPeriod"));Y.setFiscalShift(r.getIntegerByKeyExt("FiscalShift",0))}if(r.containsKey("additionalPeriods")){Y.setAdditionalPeriods(r.getIntegerByKey("additionalPeriods"))}if(r.containsKey("periodPrefix")){Y.setPeriodPrefix(r.getStringByKey("periodPrefix"))}if(r.containsKey("useMonthLabel")){Y.setUseMonthLabel(r.getBooleanByKey("useMonthLabel"))}if(r.containsKey("TimeConfigEnablePattern")){Y.setTimeConfigEnablePattern(r.getBooleanByKey("TimeConfigEnablePattern"))}if(r.containsKey("IsUserManaged")){Y.setIsUserManaged(r.getBooleanByKey("IsUserManaged"))}if(r.containsKey("Pattern")){Y.setTimeConfigPattern(r.getStringByKey("Pattern"))}if(r.containsKey("FirstWeekDay")){Y.setFirstWeekDay(r.getStringByKey("FirstWeekDay"))}if(r.containsKey("FirstYearWeekIndicator")){Y.setFirstYearWeekIndicator(r.getStringByKey("FirstYearWeekIndicator"))}if(r.containsKey("unassignedMember")){Y.setUnassignedMember(r.getStringByKey("unassignedMember"))}var q=r.getBooleanByKeyExt("HasDayTimeYYYYMMDDFormat",false);if(q){Y.setHasDayTimeYYYYMMDDFormat(q)}var j=r.getStringByKey("Description");if(e.XStringUtils.isNotNullAndNotEmpty(j)){l.setText(j)}var Z=r.getStringByKey("DisplayGroup");if(e.XStringUtils.isNotNullAndNotEmpty(Z)){l.setDisplayGroup(Z)}}return l};e.QInARepoDimension.prototype.migratePlaceholderId=function(t,r,i){var n=i;var o=e.XStringUtils.concatenate2("].&[",e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);if(t.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&e.notNull(r)&&r.getDimensionByType(e.DimensionType.ACCOUNT)!==null&&e.XString.startsWith(i,"[")&&e.XString.indexOf(i,o)!==-1){var a=e.XString.indexOf(i,e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);var l=e.XString.indexOfFrom(i,"]",a);n=e.XString.substring(i,a,l)}return n};e.QInARepoDimension.prototype.addNewDimensionWithDummyMetadata=function(t,r,i,n){var o=e.QCacheKey.createByContextForDimension(r,n,null);var a=e.QDimensionMetadata.create(o);a.addSupportedFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED);a.addSupportedAxis(e.AxisType.FREE);a.addSupportedAxis(e.AxisType.ROWS);a.addSupportedAxis(e.AxisType.COLUMNS);a.setDimensionType(e.DimensionType.DIMENSION);var l=t.getApplication().getOlapEnvironment();l.setDimensionMetadata(a);var p=e.QDimension._create(r,i.getDimensionManagerBase());p.setName(n);p.setText(n);p.setMetadata(a);p.setSkipMetadataValidationOnRepoImport(true);i.addDimension(p);return p};e.QInARepoDimension.prototype.importAlternativeFieldValues=function(t,r){var i=t.getListByKey("AlternativeFieldValues");if(e.notNull(i)){var n=i.size();for(var o=0;o<n;o++){var a=i.get(o);if(a.isStructure()){var l=a;var p=l.getStringByKey("ValueType");var s=e.QInAConverter.lookupValueType(p);var u=l.getStringByKey("Value");var g=null;if(s===e.XValueType.INTEGER){g=e.XIntegerValue.create(e.XInteger.convertFromStringWithRadix(u,10))}else if(s===e.XValueType.LONG){g=e.XLongValue.create(e.XLong.convertFromString(u))}else if(s===e.XValueType.DOUBLE){g=e.XDoubleValue.create(e.XDouble.convertFromString(u))}else if(s===e.XValueType.STRING){g=e.XStringValue.create(u)}else if(s===e.XValueType.DATE){g=e.XDate.createDateFromIsoFormat(u)}else if(s===e.XValueType.DATE_TIME){g=e.XDateTime.createDateTimeFromIsoFormat(u)}if(e.notNull(g)){var y=l.getBooleanByKey("HierarchyKey");var m=l.getStringByKey("MemberKey");var c=l.getStringByKey("FieldName");var S=l.getStringByKey("Language");r.setAlternativeFieldValue(y,m,c,g,S)}}}}};e.QInARepoDimension.prototype.importFieldsLayout=function(t,r,i,n){var o=r.getListByKey("FieldSettings");if(e.notNull(o)){var a=o.size();for(var l=0;l<a;l++){t.importComponent(e.OlapComponentType.FIELD,o.getStructureAt(l),null,i,n)}}var p=r.getListByKey("AttributeSettings");if(e.notNull(p)){var s=p.size();for(var u=0;u<s;u++){t.importAttribute(p.getStructureAt(u),i,n)}}var g=i.getFieldByName(r.getStringByKey("ClientDefaultTextAttribute"));i.setClientDefaultTextField(g);g=i.getFieldByName(r.getStringByKey("ClientDefaultKeyAttribute"));i.setClientDefaultKeyField(g);e.QInARepoDimension.importRsFields(t,r,i);e.QInARepoDimension.importRsAttributeNodes(t,r,i);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("FieldLayoutType")){var y=e.QInAConverter.lookupFieldLayoutType(r.getStringByKey("FieldLayoutType"));i.setFieldLayoutType(y)}if(r.containsKey("TextFieldModified")){i.getFieldContainerBase().setShouldUseActualTextField(r.getBooleanByKey("TextFieldModified"))}};e.QInARepoDimension.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_READ_MODE)){e.QInARepoUtils.setNameIfNotNull(i,"ReadMode",o.getReadMode(e.QContextType.RESULT_SET))}if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_SELECTOR_READ_MODE)){e.QInARepoUtils.setNameIfNotNull(i,"SelectorReadMode",o.getReadMode(e.QContextType.SELECTOR))}i.putString("Axis",e.QInAConverter.lookupAxisTypeInA(o.getAxisType()));if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_SKIP)){var a=o.getSkipEntries();if(a>0||t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QDimensionProperties.QY_SKIP)){i.putInteger("Skip",a)}}if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_TOP)){var l=o.getTopEntries();if(l>0||t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QDimensionProperties.QY_TOP)){i.putInteger("Top",l)}}if(o.supportsCumulative()&&(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.IS_CUMULATIVE))){i.putBoolean("IsCummulative",o.isCumulative())}t.exportHierarchy(o,i);if(o.supportsTotals()){if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.getResultStructureController().getModCounter()>0){t.exportTotals(o,i)}}if(o.getStructureLayout()!==null){t.exportMembers(o,i)}this.exportFieldLayout(t,i,o);this.exportAlternativeFieldValues(i,o);if(o.getSkipMetadataValidationOnRepoImport()){i.putBoolean("SkipMetadataValidationOnRepoImport",true)}if(o.getPlaceholderIds()!==null&&o.getPlaceholderIds().size()>0&&t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){var p=i.putNewList("PlaceholderIds");p.addAllStrings(o.getPlaceholderIds())}var s=o.getPlaceholderIdMemberMap().getKeysAsReadOnlyListOfString();if(o.getPlaceholderIds()!==null&&o.getPlaceholderIds().size()>0){var u=i.putNewStructure("PlacholderIdMapping");for(var g=0;g<s.size();g++){var y=s.get(g);var m=o.getPlaceholderIdMemberMap().getByKey(y);u.putString(y,m.getAliasName())}}var c=o.getOverdefinedMemberManager().getVisibilityOverrideMap();var S=c.getKeysAsReadOnlyListOfString();if(S.size()>0){var A=i.putNewStructure("VisibilityOverride");for(var d=0;d<S.size();d++){var I=c.getByKey(S.get(d));if(e.isNull(I)){I=e.ResultVisibility.VISIBLE}A.putString(S.get(d),e.QInAConverter.lookupResultSetVisibilityInA(I))}}var f=o.getOverdefinedMemberManager().getNumericScaleOverrideMap();S=f.getKeysAsReadOnlyListOfString();if(S.size()>0){var N=i.putNewStructure("NumericScaleOverride");for(var v=0;v<S.size();v++){var T=f.getByKey(S.get(v));N.putInteger(S.get(v),T.getInteger())}}var R=o.getOverdefinedMemberManager().getNumericShiftOverrideMap();S=R.getKeysAsReadOnlyListOfString();if(S.size()>0){var E=i.putNewStructure("NumericShiftOverride");for(var C=0;C<S.size();C++){var Q=R.getByKey(S.get(C));E.putInteger(S.get(C),Q.getInteger())}}var M=o.getOverdefinedMemberManager().getNumericPrecisionOverrideMap();S=M.getKeysAsReadOnlyListOfString();if(S.size()>0){var D=i.putNewStructure("NumericPrecisionOverride");for(var L=0;L<S.size();L++){var B=M.getByKey(S.get(L));D.putInteger(S.get(L),B.getInteger())}}if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){i.putStringNotNull("AccountTypeAttributeName",o.getMetadata().getAccountTypeAttributeName());var F=o.getMetadata().getFiscalShift();if(F!==0){i.putInteger("FiscalShift",F)}var h=o.getMetadata().hasDayTimeYYYYMMDDFormat();if(h){i.putBoolean("HasDayTimeYYYYMMDDFormat",h)}}var O=o.getOverrideText();if(e.XStringUtils.isNotNullAndNotEmpty(O)){i.putString("OverrideText",O)}if(t.getOriginalMode()===e.QModelFormat.INA_CLONE){i.putStringNotNull("DisplayGroup",o.getDisplayGroup())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoDimension.prototype.exportFieldLayout=function(t,r,i){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QDimensionProperties.QY_FIELD_LAYOUT_TYPE)){var n=i.getFieldLayoutType();r.putString("FieldLayoutType",e.QInAConverter.lookupFieldLayoutTypeInA(n))}var o=r.putNewList("FieldSettings");e.QInARepoDimension.exportListOfFields(i.getFields(),o,t);if(!i.isUseServerDefaultTextField()){r.putString("ClientDefaultTextAttribute",i.getClientDefaultTextField().getName())}if(!i.isUseServerDefaultKeyField()){r.putString("ClientDefaultKeyAttribute",i.getClientDefaultKeyField().getName())}e.QInARepoDimension.exportResultSetFields(t,r,i);var a=i.getDefaultResultSetTextField();if(e.notNull(a)&&a.haveAnyInAPropertiesChanged()||i.getShouldUseActualTextField()){r.putBoolean("TextFieldModified",true)}e.QInARepoDimension.exportResultSetAttributes(t,r,i)};e.QInARepoDimension.prototype.exportAlternativeFieldValues=function(e,t){this.exportAlternativeFieldValuesForKeyType(e,t,t.getAlternativeFieldValueMemberKeys(false),false);this.exportAlternativeFieldValuesForKeyType(e,t,t.getAlternativeFieldValueMemberKeys(true),true)};e.QInARepoDimension.prototype.exportAlternativeFieldValuesForKeyType=function(t,r,i,n){if(e.notNull(i)){var o=e.PrFactory.createList();var a=i.size();for(var l=0;l<a;l++){var p=i.get(l);var s=r.getAlternativeFieldValueFields(n,p);if(e.notNull(s)){var u=s.size();for(var g=0;g<u;g++){var y=s.get(g);var m=r.getAlternativeFieldValueLanguages(n,p,y);if(e.notNull(m)){var c=m.size();for(var S=0;S<c;S++){var A=m.get(S);var d=r.getAlternativeFieldValue(n,p,y,A);if(e.notNull(d)){var I=o.addNewStructure();I.putBoolean("HierarchyKey",n);I.putString("MemberKey",p);I.putString("FieldName",y);I.putString("Language",A);I.putString("ValueType",e.QInAConverter.lookupValueTypeInA(d.getValueType()));I.putString("Value",d.getStringRepresentation())}}}}}}if(o.size()>0){t.put("AlternativeFieldValues",o)}}};e.QInARepoDimensions=function(){};e.QInARepoDimensions.prototype=new e.QInARepository;e.QInARepoDimensions.prototype._ff_c="QInARepoDimensions";e.QInARepoDimensions.exportAxisDimensionsWithHeuristic=function(t,r,i,n,o){var a=r.getQueryModel();var l=t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);var p=a.isOptimizedExportModeActive();var s=r.getDimensionCount();for(var u=0;u<s;u++){var g=r.get(u);if(p&&g.isIgnoredOnOptimizedExport()){continue}if(l&&!n.contains(g.getName())){continue}e.QInARepoDimensions.exportDimension(t,g,i,o)}};e.QInARepoDimensions.exportAxisDimensions=function(t,r,i,n){var o=r.getDimensionCount();for(var a=0;a<o;a++){var l=r.get(a);if(e.QInARepoDimensions._isForRendering(t.getMode(),l)){continue}e.QInARepoDimensions.exportDimension(t,l,i,n)}};e.QInARepoDimensions._isForRendering=function(t,r){var i=r.getAxisType();return t===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING&&i!==e.AxisType.ROWS&&i!==e.AxisType.COLUMNS};e.QInARepoDimensions.exportDimension=function(t,r,i,n){if(!n.contains(r.getName())){n.add(r.getName());var o=r.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)&&r.getTagging().containsKey(e.QTransientConstants.TAG_IS_TRANSIENT)&&r.getAxis()!==null&&r.getAxisType()===e.AxisType.FREE;var a=!o&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.getDimensionType().isTypeOf(e.DimensionType.CALCULATED_DIMENSION)||r.getModCounter()>0);if(a){i.add(t.exportDimension(r,null))}}};e.QInARepoDimensions.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInARepoDimensions.prototype.getTagName=function(){return"DimensionsRepo"};e.QInARepoDimensions.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,i,n,o)}return i};e.QInARepoDimensions.prototype.containsFormulaCalculatedDimensionInInaList=function(t,r){var i=t.size();for(var n=0;n<i;n++){var o=t.getStructureAt(n);var a=o.getStringByKey("Name");if(e.XString.isEqual(r,a)){return o.containsKey("CType")&&e.XComponentType.lookupComponentType(o.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION}}return false};e.QInARepoDimensions.prototype.importComponentWithList=function(t,r,i,n,o){var a=i;if(e.notNull(r)){var l=t.getOriginalMode();if(l.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&!l.isTypeOf(e.QModelFormat.INA_REPOSITORY_DELTA)){var p=a.getLoadedDimensions();var s=p.size();for(var u=s-1;u>=0;u--){var g=p.get(u);var y=g.getName();if(g.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)&&e.notNull(y)){if(!this.containsFormulaCalculatedDimensionInInaList(r,y)){a.removeCalculatedDimensionByName(y)}}}}var m=a.getDimensionManagerBase();var c=a.getFreeAxis();c.addAll(m);var S=r.size();var A=m.getDimensionReferences();for(var d=0;d<S;d++){var I=r.getStructureAt(d);var f=I.getStringByKey("Name");var N=I.getStringByKey("Axis");var v=null;if(I.containsKey("FieldMappings")){var T=t.importCalculatedDimension(I,a);m.addDimension(T);m.finalizeDimensionMetadataSetup(T)}else if(I.containsKey("CType")&&e.XComponentType.lookupComponentType(I.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var R=a.getDimensionByName(f);var E=t.importFormulaCalculatedDimension(I,a,R);m.finalizeDimensionMetadataSetup(E)}else{if(A.containsKey(f)){v=m.getDimensionByNameFromExistingMetadata(f)}t.importDimension(I,a)}if(e.isNull(v)){v=m.getDimensionByNameInternal(f);if(e.isNull(v)){continue}}if(e.isNull(N)){N=I.getStringByKeyExt("AxisDefault","Free")}a.getAxis(e.QInAConverter.lookupAxisType(N)).addForRepoImport(v)}}return a};e.QInARepoDimensions.prototype.exportComponentWithStructure=function(t,r,i,n){var o=this.exportComponentWithList(t,r,n);i.put("Elements",o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoDimensions.prototype.exportComponentWithList=function(t,r,i){var n=e.PrFactory.createList();var o=r;var a=e.XHashSetOfString.create();e.QInARepoDimensions.exportAxisDimensions(t,o.getAxis(e.AxisType.ROWS),n,a);e.QInARepoDimensions.exportAxisDimensions(t,o.getAxis(e.AxisType.COLUMNS),n,a);var l=e.XHashSetOfString.create();if(t.mode===e.QModelFormat.INA_REPOSITORY_DATA||t.mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(o,l)}e.QInARepoDimensions.exportAxisDimensionsWithHeuristic(t,o.getAxis(e.AxisType.FREE),n,l,a);return n};e.QInARepoDrillManager=function(){};e.QInARepoDrillManager.prototype=new e.QInARepository;e.QInARepoDrillManager.prototype._ff_c="QInARepoDrillManager";e.QInARepoDrillManager.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_MANAGER};e.QInARepoDrillManager.prototype.getTagName=function(){return"HierarchyNavigationsRepo"};e.QInARepoDrillManager.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,i,n,o)}return i};e.QInARepoDrillManager.prototype.importComponentWithList=function(t,r,i,n,o){var a=i;var l;a.removeAllContextDrillOperations();a.removeZoomDrillOperationsByDimension(null);if(e.notNull(r)){var p=-1;l=r.size();for(var s=0;s<l;s++){var u=r.getStructureAt(s);var g=u.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(g===-1){t.importDrillOperation(u,a,o)}else if(g>-1){var y=this.getZoomDrillPath(t,a,u,o);if(e.XCollectionUtils.hasElements(y)){if(g!==p){a.pushEmptyZoomDrillForDimension(y.get(y.size()-1).getDimension());p=g}var m=u.getIntegerByKeyExt("DrillOffset",0)>0;a.addZoomDrillPath(y,m)}}}}return i};e.QInARepoDrillManager.prototype.getZoomDrillPath=function(t,r,i,n){var o=e.XList.create();var a=i.getListByKey("DrillContextMembers");if(e.notNull(a)){var l=a.size();for(var p=0;p<l;p++){var s=a.getStructureAt(p);var u=t.importDrillPathElement(s,r,n);o.add(u)}}var g=i.getStringByKey("DrillState");var y=i.getStructureByKey("DrillMember");if(e.isNull(y)||e.isNull(g)){return null}var m=t.importDrillPathElement(y,r,n);o.add(m);return o};e.QInARepoDrillManager.prototype.exportComponentWithStructure=function(t,r,i,n){var o=this.exportComponentWithList(t,r,n);if(e.notNull(o)){i.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoDrillManager.prototype.exportComponentWithList=function(t,r,i){var n=r;var o=n.getModelCapabilities();var a=null;var l=n.getDrillOperationsForInARepo();var p=l.size();if(p>0){var s=n.getQueryModel();var u=null;var g=null;a=e.PrFactory.createList();var y=null;if(o.supportsHierarchyNavigationDeltaMode()){y=l.get(p-1);var m=y.getTargetDimension();if(e.notNull(m)&&m.isHierarchyNavigationDeltaMode()){g=m;u=t.exportDrillOperation(y)}}var c=t.isAbap(s);var S;for(S=0;S<p;S++){var A=l.get(S);if(A.getType()===e.DrillOperationType.CONTEXT){var d=A.getTargetDimension();if(e.isNull(g)||g!==d){if(!c&&d.getInitialDrillLevel()<0&&A.getDrillState()===e.DrillState.EXPANDED){continue}a.add(t.exportDrillOperation(A))}}}if(e.notNull(u)){a.add(u)}if(a.isEmpty()){a=null}}return a};e.QInARepoDrillPathElement=function(){};e.QInARepoDrillPathElement.prototype=new e.QInARepository;e.QInARepoDrillPathElement.prototype._ff_c="QInARepoDrillPathElement";e.QInARepoDrillPathElement.prototype.getComponentType=function(){return e.MemberType.DRILL_PATH_ELEMENT};e.QInARepoDrillPathElement.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=a.getContext().getQueryModel();var p=r.getStringByKey("FieldName");var s=r.getStringByKey("DimensionName");var u;if(e.XStringUtils.isNotNullAndNotEmpty(s)){u=l.getDimensionByNameFromExistingMetadata(s)}else{var g=l.getFieldByNameOrAlias(p);if(e.isNull(g)){u=l.getDimensionByNameFromExistingMetadata(p);if(e.notNull(u)){g=u.getKeyField();p=g.getName()}}else{u=g.getDimension()}}var y=e.QDrillPathElement._create(o);y.setDimension(u);var m=r.getStringByKey("Member");y.setName(m);y.setFieldName(p);return y};e.QInARepoDrillPathElement.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getName();var l=o.getFieldName();var p=o.getShadowKeyFieldValue();if(e.XStringUtils.isNotNullAndNotEmpty(p)){a=p;l=o.getShadowKeyFieldName()}if(e.isNull(a)){i.putNull("Member")}else{var s=e.QInAExportUtil.getMeasureMemberNameByAlias(o.getQueryModel(),a,t);i.putString("Member",s)}i.putString("FieldName",l);var u=o.getDimension();e.QInAExportUtil.setNameIfNotNull(i,"DimensionName",u);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoDrillPathOperation=function(){};e.QInARepoDrillPathOperation.prototype=new e.QInARepository;e.QInARepoDrillPathOperation.prototype._ff_c="QInARepoDrillPathOperation";e.QInARepoDrillPathOperation.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_OPERATION};e.QInARepoDrillPathOperation.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;var l=n;var p=r.getStringByKey("DrillState");var s=r.getStructureByKey("DrillMember");if(e.notNull(s)&&e.notNull(p)){var u=e.XList.create();var g=r.getListByKey("DrillContextMembers");if(e.notNull(g)){var y=g.size();for(var m=0;m<y;m++){var c=g.getStructureAt(m);var S=t.importDrillPathElement(c,l,o);u.add(S)}}var A=t.importDrillPathElement(s,l,o);u.add(A);a=l.setDrillState(u,e.QInAConverter.lookupDrillStateOp(p));var d=r.getIntegerByKeyExt("DrillLevel",1);a.setRelativeLevelCount(d)}return a};e.QInARepoDrillPathOperation.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;if(o.getType()===e.DrillOperationType.CONTEXT){var a=e.QInAConverter.lookupDrillStateInA(o.getDrillState());i.putString("DrillState",a);var l=o.getRelativeLevelCount();if(l!==1){i.putInteger("DrillLevel",l)}if(o.getZoomStackPosition()!==-1){i.putInteger("ZoomDrillStackPosition",o.getZoomStackPosition())}if(o.getRelativeLevelOffset()!==0){i.putInteger("DrillOffset",o.getRelativeLevelOffset())}var p=o.getDrillPath();var s=p.size();if(s>0){var u=p.get(s-1);var g=t.exportDrillPathElement(u,false);i.put("DrillMember",g);if(s>1){var y=e.PrFactory.createList();i.put("DrillContextMembers",y);for(var m=0;m<s-1;m++){u=p.get(m);g=t.exportDrillPathElement(u,true);y.add(g)}}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoExceptions=function(){};e.QInARepoExceptions.prototype=new e.QInARepository;e.QInARepoExceptions.prototype._ff_c="QInARepoExceptions";e.QInARepoExceptions.prototype.getComponentType=function(){return e.OlapComponentType.EXCEPTION_MANAGER};e.QInARepoExceptions.prototype.getTagName=function(){return"ExceptionsRepo"};e.QInARepoExceptions.prototype.isVersion1=function(t,r){var i=r.getOlapComponentType();var n=r.getModelCapabilities().supportsExceptionsV2();return!n&&i.isTypeOf(e.MemberType.ABSTRACT_MEMBER)};e.QInARepoExceptions.prototype.isVersion2=function(t,r){var i=r.getOlapComponentType();var n=r.getModelCapabilities().supportsExceptionsV2();return n&&i.isTypeOf(e.OlapComponentType.QUERY_MODEL)};e.QInARepoExceptions.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,i,n,o)}return i};e.QInARepoExceptions.prototype.importComponentWithList=function(e,t,r,i,n){var o=r;var a=o.getQueryModel().getExceptionManager();a.queueEventing();if(this.isVersion1(e,o)){this.importFormatV1(e,t,o,a)}else if(this.isVersion2(e,o)){this.importFormatV2(e,t,o,a)}a.resumeEventing();return a};e.QInARepoExceptions.prototype.importFormatV1=function(t,r,i,n){if(!e.PrUtils.isListEmpty(r)){var o=r.size();for(var a=0;a<o;a++){var l=r.getStructureAt(a);var p=this.importExceptionWithoutEvaluates(t,n,l);if(e.notNull(p)){this.importEvaluates(l,i,p,t);p.setMeasure(i);p.setIsChangeable(l.getBooleanByKeyExt("Changegable",true))}}this.removeModelElementsNotInInA(t,r,n,n.getAllExceptionsOfMeasure(i))}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){n.removeAllExceptionsOfMeasure(i)}};e.QInARepoExceptions.prototype.importExceptionWithoutEvaluates=function(t,r,i){var n=i.getStringByKey("Name");var o=i.getStringByKey("Text");var a=r.getByKey(n);if(e.isNull(a)&&this.newComponentCreationAllowed(t,i)){a=r.addNewException(n,o)}if(e.notNull(a)){a.stopEventing();a.setIsChangeable(true);a.resumeEventing();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("EvaluateDefault")){var l=e.QExceptionEvalType.lookupExceptionEvalType(i.getStringByKey("EvaluateDefault"));a.setEvaluateDefault(l)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("ApplySettingsToHeader")){var p=e.QExceptionHeaderSettings.lookupExceptionHeaderSetting(i.getStringByKey("ApplySettingsToHeader"));a.setHeaderSettingBase(p)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("Active")){var s=i.getBooleanByKeyExt("Active",true);a.setActive(s)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("EvaluateBeforePostAggregation")){var u=i.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);a.setEvaluationAfterCalculations(!u)}a.queueEventing();this.importThresholds(i,a);a.resumeEventing()}return a};e.QInARepoExceptions.prototype.importFormatV2=function(t,r,i,n){if(!e.PrUtils.isListEmpty(r)){var o=r.size();for(var a=0;a<o;a++){var l=r.getStructureAt(a);var p=l.getListByKey("StructureContext");if(!e.PrUtils.isListEmpty(p)){var s=this.importContextItem(p.getStructureAt(0),i,n,null,t,l);if(e.notNull(s)){if(p.size()>1){this.importContextItem(p.getStructureAt(1),i,n,s,t,l)}s.setIsChangeable(l.getBooleanByKeyExt("Changegable",true))}}}this.removeModelElementsNotInInA(t,r,n,n.getValuesAsReadOnlyList())}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){n.clear()}};e.QInARepoExceptions.prototype.importContextItem=function(t,r,i,n,o,a){var l=n;var p=r.getDimensionByNameFromExistingMetadata(t.getStringByKey("DimensionName"));if(e.notNull(p)){if(e.isNull(l)){l=this.importExceptionWithoutEvaluates(o,i,a)}if(e.notNull(l)){var s=l.isEvaluateAllMembers(p);if(t.containsKey("EvaluateAllMembers")){s=t.getBooleanByKeyExt("EvaluateAllMembers",false)}var u=this.getMemberFromContextItem(t,p,s);if(e.notNull(u)){if(e.isNull(n)){this.importEvaluates(a,u,l,o)}if(p.isMeasureStructure()){l.setMeasure(u)}else{l.setStructure(u)}l.displayOnOtherMember(u,p.getStructureMember(t.getStringByKey("DisplayOnOtherMember")));l.setEvaluateAllMembers(p,s)}}}return l};e.QInARepoExceptions.prototype.getMemberFromContextItem=function(t,r,i){var n=r.getStructureMember(t.getStringByKey("MemberName"));if(e.isNull(n)){var o=r.getAllStructureMembers();if(i&&!o.isEmpty()){n=o.get(0)}}return n};e.QInARepoExceptions.prototype.importEvaluates=function(t,r,i,n){i.queueEventing();var o=t.getListByKey("EvaluateOn");if(!e.PrUtils.isListEmpty(o)){i.removeAllEvaluates();var a=o.size();var l=r.getQueryModel();for(var p=0;p<a;p++){var s=o.getStructureAt(p);var u=s.getStringByKey("Name");var g=l.getFieldByName(u);if(e.isNull(g)){var y=l.getDimensionByNameFromExistingMetadata(u);if(e.notNull(y)){g=y.getKeyField()}}if(e.isNull(g)){g=r.getKeyFieldValue().getField()}if(e.isNull(g)){n.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",u,"'!"));return}if(!s.containsKey("Low")){n.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",u));return}var m=g.getValueType();var c=e.QInAValueUtils.importValueByType(n,s,"Low",m);if(n.hasErrors()){n.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",m.getName()));return}var S=i._addNewEvaluateWithFieldInternal(g,c);if(s.containsKey("High")){var A=e.QInAValueUtils.importValueByType(n,s,"High",m);if(n.hasErrors()){n.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",m.getName()));return}S.setHighValue(A)}S.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(s.getStringByKey("Evaluate")));var d=s.getStringByKey("Comparison");var I=e.QInAConverter.lookupComparison(d);if(e.isNull(I)){n.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",d,"'"));return}S.setOperator(I)}}i.resumeEventing()};e.QInARepoExceptions.prototype.importThresholds=function(t,r){var i=t.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(i)){r.removeAllThresholds();var n=i.size();for(var o=0;o<n;o++){var a=i.getStructureAt(o);var l=a.getIntegerByKeyExt("AlertLevel",-9999);var p;var s=!a.hasStringByKey("Low");if(s){p=r._addNewThresholdInternal(a.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}else{p=r._addNewThresholdWithStringInternal(a.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}var u=a.getStringByKey("Name");if(e.notNull(u)){p.setName(u)}var g=e.QInAConverter.lookupComparison(a.getStringByKey("Comparison"));p.setOperator(g);if(g.getNumberOfParameters()===2){if(s){var y=a.getDoubleByKey("High");p.setHighValue(y)}else{var m=a.getStringByKey("High");p.setHigh(m)}}this.importSettings(a.getListByKey("Settings"),p)}}};e.QInARepoExceptions.prototype.importSettings=function(t,r){if(e.notNull(t)){var i=t.size();for(var n=0;n<i;n++){var o=t.getStructureAt(n);var a=o.getStringByKey("Name");var l=o.getIntegerByKey("Priority");var p=o.getStringByKey("Value");if(e.notNull(p)&&!e.XString.isEqual(p,"")){var s=r.addNewSetting(a,l);s.setValue(p)}}}};e.QInARepoExceptions.prototype.exportComponentWithStructure=function(t,r,i,n){var o=this.exportComponentWithList(t,r,n);if(e.notNull(o)){i.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoExceptions.prototype.exportComponentWithList=function(e,t,r){var i=null;if(this.isVersion1(e,t)){i=this.exportFormatV1(e,t)}else if(this.isVersion2(e,t)){i=this.exportFormatV2(e,t)}return i};e.QInARepoExceptions.prototype.exportFormatV1=function(t,r){var i=null;var n=r.getExceptions();if(e.notNull(n)){var o=n.size();if(o>0){i=e.PrFactory.createList();var a=t.isAbap(r);for(var l=0;l<o;l++){var p=n.get(l);var s=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.isChangeable()||p.getModCounter()>0;if(s){var u=this.exportException(t,p,a);if(e.isNull(u)){break}i.add(u)}}}}return i};e.QInARepoExceptions.prototype.exportException=function(t,r,i){var n=e.PrFactory.createStructure();if(t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&!r.isChangeable()&&r.hasPropertyChanged(e.QExceptionProperties.QY_ACTIVE)){n.putString("Name",r.getName());n.putBoolean("Active",r.isActive());n.putBoolean("Changegable",r.isChangeable())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.isChangeable()){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QExceptionProperties.QY_ACTIVE)){n.putBoolean("Active",r.isActive())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QExceptionProperties.QY_EVALUATE_BEFORE_POST_AGGREGATION)){n.putBoolean("EvaluateBeforePostAggregation",!r.isEvaluatedAfterCalculations())}n.putBoolean("Changegable",r.isChangeable());var o=r.getThresholds();this.exportThresholds(o,t,n,i);this.exportEvaluates(r.getEvaluates(),t,n,i);n.putString("Name",r.getName());n.putString("Text",r.getText());var a=r.getHeaderSetting();if(a!==e.QExceptionHeaderSettings.NONE){n.putString("ApplySettingsToHeader",a.getName())}n.putString("EvaluateDefault",r.getEvaluateDefault().toString())}var l=r.getSession().hasFeature(e.FeatureToggleOlap.INA_REPOSITORY_DELTA);if(l&&r.canMaterializeCompleteObject()){n.putBoolean("UserDefinedComponent",true)}return n};e.QInARepoExceptions.prototype.exportFormatV2=function(t,r){var i=null;var n=r.getExceptionManager();var o=n.size();if(o>0){i=e.PrFactory.createList();var a=t.isAbap(r);for(var l=0;l<o;l++){var p=n.get(l);var s=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.isChangeable()||p.getModCounter()>0;if(s){var u=this.getExportedExceptionStructureByName(i,p.getName());if(e.isNull(u)){u=this.exportException(t,p,a);if(e.notNull(u)){u.putNewList("StructureContext");i.add(u)}}if(e.notNull(u)){var g=u.getListByKey("StructureContext");this.exportStructureContextItem(t,g,p.getMeasure(),p);this.exportStructureContextItem(t,g,p.getStructure(),p)}}}}return i};e.QInARepoExceptions.prototype.getExportedExceptionStructureByName=function(t,r){var i=null;var n=t.size();for(var o=0;o<n;o++){var a=t.getStructureAt(o);if(e.XString.isEqual(a.getStringByKey("Name"),r)){i=a;break}}return i};e.QInARepoExceptions.prototype.exportStructureContextItem=function(t,r,i,n){if(e.notNull(i)){var o=r.addNewStructure();var a=i.getDimension();o.putString("DimensionName",a.getName());o.putString("MemberName",i.getName());var l=n.isEvaluateAllMembers(a);var p=t.mode===e.QModelFormat.INA_REPOSITORY_DELTA;var s=a.getDimensionType()===e.DimensionType.MEASURE_STRUCTURE;var u=s&&n.hasPropertyChanged(e.QExceptionProperties.QY_EVALUATE_ALL_MEMBERS_MEASURE_DIMENSION)||!s&&n.hasPropertyChanged(e.QExceptionProperties.QY_EVALUATE_ALL_MEMBERS_SECONDARY_STRUCTURE);if(!p&&l||p&&u){o.putBoolean("EvaluateAllMembers",l)}var g=n.getDisplayOnOtherMember(i);e.QInAExportUtil.setNameIfNotNull(o,"DisplayOnOtherMember",g)}};e.QInARepoExceptions.prototype.exportEvaluates=function(t,r,i,n){var o=r.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||t.getModCounter()>0;if(o){if(t.hasElements()){var a=i.putNewList("EvaluateOn");var l=t.size();for(var p=0;p<l;p++){var s=a.addNewStructure();var u=t.get(p);s.putString("Name",u.getField().getName());s.putString("Evaluate",u.getEvaluate().toString());var g=u.getOperator();var y;if(g===e.ComparisonOperator.NOT_BETWEEN&&n){y="NOTBETWEEN"}else{y=e.QInAConverter.lookupComparisonInA(g)}s.putString("Comparison",y);e.QInAValueUtils.exportPlaceholderValue(r,"Low",s,u.getLowValue(),u.getValueType(),u.getQueryModel());if(!s.containsKey("Low")){s.putString("Low","")}if(g.getNumberOfParameters()>1){e.QInAValueUtils.exportPlaceholderValue(r,"High",s,u.getHighValue(),u.getValueType(),u.getQueryModel())}}}}};e.QInARepoExceptions.prototype.exportThresholds=function(t,r,i,n){var o=r.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||t.getModCounter()>0;if(o){var a=i.putNewList("Threshold");var l=t.size();for(var p=0;p<l;p++){var s=t.get(p);var u=a.addNewStructure();var g=s.getName();if(!e.XString.isEqual(g,"Settings")){u.putStringNotNull("Name",g)}var y=s.getOperator();var m;if(y===e.ComparisonOperator.NOT_BETWEEN&&n){m="NOTBETWEEN"}else{m=e.QInAConverter.lookupComparisonInA(y)}u.putString("Comparison",m);var c=s.getValueType()===e.XValueType.DOUBLE;if(s.getLowXValue()!==null){if(c){u.putDouble("Low",s.getLowValue())}else{u.putString("Low",s.getLow())}}if(s.getHighXValue()!==null&&y.getNumberOfParameters()>1){if(c){u.putDouble("High",s.getHighValue())}else{u.putString("High",s.getHigh())}}if(!s.isEmpty()){this.exportSettings(s,r,u)}else{u.putInteger("AlertLevel",s.getAlertLevel().getLevel())}}}};e.QInARepoExceptions.prototype.exportSettings=function(t,r,i){var n=i.putNewList("Settings");var o=t.size();for(var a=0;a<o;a++){var l=t.get(a);var p=n.addNewStructure();p.putString("Name",l.getName());p.putInteger("Priority",l.getPriority());var s=l.getValue();if(e.isNull(s)||e.XString.isEqual(s,"")){r.addError(e.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value")}else{p.putString("Value",s)}}};e.QInARepoField=function(){};e.QInARepoField.prototype=new e.QInARepository;e.QInARepoField.prototype._ff_c="QInARepoField";e.QInARepoField.prototype.getComponentType=function(){return e.OlapComponentType.FIELD};e.QInARepoField.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.isNull(a)){var l=r.getStringByKey("Name");var p=n;if(p.getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){a=p.addNewFormulaCalcField(e.PresentationType.lookup(r.getStringByKey("PresentationType")),l)}else{a=p.getFieldByName(l)}}if(e.notNull(a)){var s=r.getStringByKey("TextTransformation");if(e.notNull(s)){var u=e.QInAConverter.lookupTextTransformation(s);a.setTextTransformation(u)}a.setDisplayFormat(r.getStringByKey("DisplayFormat"));if(a.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var g=r.getStructureByKey("Formula");if(e.notNull(g)){var y=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,a.getDimension(),r.getStructureByKey("Formula"),null,o);a.setFormulaItem(y)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("AutoSignFlip")){var m=r.getBooleanByKeyExt("AutoSignFlip",false);a.setAutoSignFlip(m)}var c=r.getStringByKey("CrossCalculationMeasure");if(e.notNull(c)){a.setCrossCalculationMeasure(c)}}}return a};e.QInARepoField.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());i.putStringNotNull("DisplayFormat",o.getDisplayFormat());var a=o.getTextTransformation();if(e.notNull(a)){var l=e.QInAConverter.lookupTextTransformationInA(a);i.putString("TextTransformation",l)}if(o.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){i.putString("PresentationType",o.getPresentationType().getName());var p=o;if(p.getFormulaItem()!==null){e.QInARepoMemberAbstract.exportFormulaItem(t,p.getFormulaItem(),i.putNewStructure("Formula"),o)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.hasPropertyChanged(e.QFieldProperties.QY_AUTO_SIGN_FLIP)){if(p.isAutoSignFlip()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&p.hasPropertyChanged(e.QFieldProperties.QY_AUTO_SIGN_FLIP)){i.putBoolean("AutoSignFlip",p.isAutoSignFlip())}}i.putStringNotNull("CrossCalculationMeasure",p.getCrossCalculationMeasure())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilter=function(){};e.QInARepoFilter.prototype=new e.QInARepository;e.QInARepoFilter.prototype._ff_c="QInARepoFilter";e.QInARepoFilter.prototype.exportFilter=function(e,t,r,i,n){return e.exportFilterExpression(r)};e.QInARepoFilter.prototype.isValidFilterExpression=function(t){if(e.isNull(t)){return false}var r=t.getFilterRootElement();if(e.isNull(r)){return false}var i=r.getOlapComponentType();return i!==e.FilterComponentType.FILTER_ACROSS_MODELS&&i!==e.FilterComponentType.FILTER_MEASURE_BASED};e.QInARepoFilterAcrossModels=function(){};e.QInARepoFilterAcrossModels.prototype=new e.QInARepository;e.QInARepoFilterAcrossModels.prototype._ff_c="QInARepoFilterAcrossModels";e.QInARepoFilterAcrossModels.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_ACROSS_MODELS};e.QInARepoFilterAcrossModels.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=r.getStringByKey("Name");var l=i;if(e.isNull(l)){l=e.QFactory.createFilterAcrossModels(o,a)}var p=r.getListByKey("Links");var s=p.size();for(var u=0;u<s;u++){var g=p.getStructureAt(u);var y=e.QInARepoUtils.importLinkPart(o,g.getStructureByKey("FirstDimension"));var m=e.QInARepoUtils.importLinkPart(o,g.getStructureByKey("SecondDimension"));l.addNewLinkFromParts(y,m)}var c=r.getListByKey("MeasureNames");var S=c.size();for(var A=0;A<S;A++){l.addMeasureName(c.getStringAt(A))}var d=r.getListByKey("SecondaryMeasureNames");if(e.notNull(d)){for(var I=0;I<d.size();I++){l.addSecondaryMeasureName(d.getStringAt(I))}}e.QInARepoUtils.importLayeredFilters(t,l,r.getListByKey("LayeredFilters"));if(r.containsKey("PreferPrequeryBasedStrategy")){l.setPreferPrequeryBasedStrategy(true)}return l};e.QInARepoFilterAcrossModels.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());var a=i.putNewList("Links");var l=o.getLinks().getIterator();while(l.hasNext()){var p=a.addNewStructure();var s=l.next();e.QInARepoUtils.exportLinkPart(t,p.putNewStructure("FirstDimension"),s.getFirstPart());e.QInARepoUtils.exportLinkPart(t,p.putNewStructure("SecondDimension"),s.getSecondPart())}var u=i.putNewList("MeasureNames");u.addAllStrings(o.getMeasureNames());var g=i.putNewList("SecondaryMeasureNames");g.addAllStrings(o.getSecondaryMeasureNames());i.put("LayeredFilters",e.QInARepoUtils.exportLayeredFilters(t,o));if(o.getPreferPrequeryBasedStrategy()){i.putBoolean("PreferPrequeryBasedStrategy",true)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterAlgebra=function(){};e.QInARepoFilterAlgebra.prototype=new e.QInARepository;e.QInARepoFilterAlgebra.prototype._ff_c="QInARepoFilterAlgebra";e.QInARepoFilterAlgebra.prototype.getComponentType=function(){return e.FilterComponentType.BOOLEAN_ALGEBRA};e.QInARepoFilterAlgebra.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;if(e.notNull(n)){var l=n;a=l.getFilterExpression()}var p=r.getStringByKey("Code");var s;if(e.XString.isEqual(p,"And")){s=e.QFilterAnd._create(o,a)}else if(e.XString.isEqual(p,"Not")){s=e.QFilterNot._create(o,a)}else{s=e.QFilterOr._create(o,a)}var u=r.getStringByKey("Id");s.setUniqueId(u);var g=r.getListByKey("SubSelections");if(e.notNull(g)){var y=g.size();for(var m=0;m<y;m++){var c=g.getStructureAt(m);var S=t.importComponent(null,c,null,s,o);if(e.notNull(S)){s.add(S)}}}return s};e.QInARepoFilterAlgebra.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r.getComponentType();var a=r;if(o.isTypeOf(e.FilterComponentType.AND)){i.putString("Code","And");i.putString("Id",a.getUniqueId())}else if(o.isTypeOf(e.FilterComponentType.OR)){i.putString("Code","Or");i.putString("Id",a.getUniqueId())}else if(o.isTypeOf(e.FilterComponentType.NOT)){i.putString("Code","Not");i.putString("Id",a.getUniqueId())}var l=i.putNewList("SubSelections");var p=a.size();for(var s=0;s<p;s++){var u=t.exportComponent(null,a.get(s),null,n);if(e.notNull(u)){l.add(u)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterAll=function(){};e.QInARepoFilterAll.prototype=new e.QInARepository;e.QInARepoFilterAll.prototype._ff_c="QInARepoFilterAll";e.QInARepoFilterAll.prototype.getComponentType=function(){return e.OlapComponentType.SELECTOR};e.QInARepoFilterAll.prototype.getTagName=function(){return"FilterRepo"};e.QInARepoFilterAll.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=r.getStructureByKey("DynamicFilter");if(e.notNull(l)){var p=a.getDynamicFilter();t.importFilterExpression(p,l,a,o)}else if(a.isDynamicFilterInitialized()){a.setDynamicFilter(null)}var s=r.getStructureByKey("VisibilityFilter");if(e.notNull(s)){var u=a.getVisibilityFilter();t.importFilterExpression(u,s,a,o)}else if(a.isVisibilityFilterInitialized()){a.setVisibilityFilter(null)}var g=r.getStructureByKey("FixedFilter");if(e.notNull(g)){var y=a.getFixedFilter();t.importFilterExpression(y,g,a,o)}else if(a.isFixedFilterInitialized()){a.setFixedFilter(null)}var m=r.getStructureByKey("ValueHelpFilter");if(e.notNull(m)){var c=a.getValuehelpFilter();t.importFilterExpression(c,m,a,o)}var S=r.getStructureByKey("ValueHelpVisibilityFilter");if(e.notNull(S)){var A=a.getValuehelpVisibilityFilter();t.importFilterExpression(A,S,a,o)}var d=r.getListByKey("LayeredFilters");if(e.notNull(d)){var I=e.QInARepoUtils.importLayeredFilters(t,a,d);e.XCollectionUtils.forEach(I,function(e){e.setPreserveOnRepoSerialization(true)}.bind(this))}return a};e.QInARepoFilterAll.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;if(o.isDynamicFilterInitialized()){var a=o.getDynamicFilter();var l=t.exportFilterExpression(a);i.put("DynamicFilter",l)}if(o.isVisibilityFilterInitialized()){var p=o.getVisibilityFilter();var s=t.exportFilterExpression(p);i.put("VisibilityFilter",s)}if(o.isFixedFilterInitialized()){var u=o.getFixedFilter();var g=t.exportFilterExpression(u);i.put("FixedFilter",g)}if(o.isValueHelpFilterInitialized()){var y=o.getValuehelpFilter();var m=t.exportFilterExpression(y);i.put("ValueHelpFilter",m)}if(o.isValueHelpVisibilityFilterInitialized()){var c=o.getValuehelpVisibilityFilter();var S=t.exportFilterExpression(c);i.put("ValueHelpVisibilityFilter",S)}var A=e.QInARepoUtils.exportLayeredFiltersExt(t,o,function(t){return e.XBooleanValue.create(t.isPreservedInRepoSerialization())}.bind(this));if(A.hasElements()){i.put("LayeredFilters",A)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterCartesianList=function(){};e.QInARepoFilterCartesianList.prototype=new e.QInARepository;e.QInARepoFilterCartesianList.prototype._ff_c="QInARepoFilterCartesianList";e.QInARepoFilterCartesianList.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_LIST};e.QInARepoFilterCartesianList.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;if(e.notNull(n)){var l=n;a=l.getFilterExpression()}var p=i;if(e.isNull(p)){p=e.notNull(a)?e.QFactory.createFilterCartesianList(a):e.QFactory.createFilterCartesianList(o)}var s=r.getStringByKey("FieldName");if(e.notNull(s)&&e.notNull(o)){var u=o.getFieldAccessorSingle();var g=null;if(e.isNull(u)||r.containsKey("QY_CACHE_CONTEXT")){var y=r.getStructureByKey("QY_CACHE_CONTEXT");if(e.isNull(y)){return null}var m=e.QInARepoUtils.importCacheKey(y);var c=o.getOlapEnv().getFieldMetadata(m);if(e.isNull(c)&&y.containsKey("StorageName")){var S=y.getStringByKey("StorageName");g=e.QInARepoUtils.getFormulaCalcDimField(o,m.getKey1(),S);if(e.notNull(g)){p.setField(g)}}if(e.notNull(c)){p.setFieldMetadata(c)}else if(e.isNull(g)){return null}}else{var A=u.getFieldByName(s);if(e.isNull(A)){A=e.QInARepoUtils.getFormulaCalcDimField(o,s,o.getQueryManager().getClientQueryObjectStorageName());if(e.isNull(A)){return null}}if(A.getDimension().isEnforcedDynamicValue()&&o.getQueryManager()!==null&&o.getQueryManager().isSuppressExitVariableValuesInRepoMode()){return null}p.setField(A);var d=r.getListByKey("SupplementsFieldNames");if(e.notNull(d)){var I=d.size();for(var f=0;f<I;f++){var N=d.getStringAt(f);var v=u.getFieldByName(N);p.addSupplementField(v)}}}}e.QInARepoHierarchy.importHierarchyForFilter(t.isAbap(o),t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER),r,p,e.FilterComponentType.CARTESIAN_LIST);var T=r.getStringByKey("Id");p.setUniqueId(T);var R=r.getBooleanByKeyExt("ConvertToFlatSelection",false);p.setConvertToFlatFilter(R);var E=r.getListByKey("Elements");p.clear();if(e.notNull(E)){var C=E.size();for(var Q=0;Q<C;Q++){var M=E.getStructureAt(Q);var D=t.importComponent(null,M,null,p,o);var L=D;p.add(L)}}return p};e.QInARepoFilterCartesianList.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getFieldMetadata();var l=false;if(e.notNull(a)){var p=a.getDimensionMetadata();if(e.isNull(p)){var s=o.getField();var u=s.getDimension();if(e.notNull(u)){l=u.isEnforcedDynamicValue()}}else{l=p.isEnforcedDynamicValue()}i.putString("FieldName",a.getName());var g=o.getFilterExpression();if(e.notNull(g)){var y=g.getParent();if(e.notNull(y)&&y.getOlapComponentType()===e.OlapComponentType.OLAP_FILTER_MANAGER){var m=a.getCacheKey();i.put("QY_CACHE_CONTEXT",e.QInARepoUtils.exportCacheKey(m,o.getQueryManager()))}}}if(l&&o.getQueryManager()!==null&&o.getQueryManager().isSuppressExitVariableValuesInRepoMode()){return null}i.putString("Id",o.getUniqueId());var c=o.getHierarchyName();if(e.notNull(c)){var S=o.getFilterExpression()!==null?o.getFilterExpression():o.getParent().getFilterExpression();e.QInARepoHierarchy.exportHierarchyForFilter(t,t.isAbap(o),i,null,S,o.getQueryManager(),c,o.getHierarchyDueDate(),o.getHierarchyVersion())}if(t.capabilities.supportsSupplements()){var A=o.getSupplementFieldNames();if(e.XCollectionUtils.hasElements(A)){var d=i.putNewList("SupplementsFieldNames");d.addAllStrings(A)}}var I=o.isConvertToFlatFilter();var f=i.putNewList("Elements");var N=o.size();for(var v=0;v<N;v++){var T=o.getOp(v);var R=t.exportComponent(null,T,null,n);f.add(R);I=I||T.isConvertToFlatFilter()}i.putBoolean("ConvertToFlatSelection",I);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterCartesianProduct=function(){};e.QInARepoFilterCartesianProduct.prototype=new e.QInARepository;e.QInARepoFilterCartesianProduct.prototype._ff_c="QInARepoFilterCartesianProduct";e.QInARepoFilterCartesianProduct.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_PRODUCT};e.QInARepoFilterCartesianProduct.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;if(e.notNull(n)){var l=n;a=l.getFilterExpression()}var p=i;if(e.isNull(p)){p=e.notNull(a)?e.QFactory.createFilterCartesianProduct(a):e.QFactory.createFilterCartesianProduct(o)}p.clear();var s=r.getStringByKey("Id");p.setUniqueId(s);var u=r.getListByKey("Elements");if(e.notNull(u)){for(var g=0;g<u.size();g++){var y=u.getStructureAt(g);var m=t.importComponent(null,y,null,p,o);var c=m;p.add(c)}}return p};e.QInARepoFilterCartesianProduct.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Id",o.getUniqueId());var a=i.putNewList("Elements");for(var l=0;l<o.size();l++){var p=o.getCartesianChild(l);var s=t.exportComponent(null,p,null,n);if(e.notNull(s)){a.add(s)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterCellValueOperand=function(){};e.QInARepoFilterCellValueOperand.prototype=new e.QInARepository;e.QInARepoFilterCellValueOperand.prototype._ff_c="QInARepoFilterCellValueOperand";e.QInARepoFilterCellValueOperand.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_CELL_VALUE_OPERAND};e.QInARepoFilterCellValueOperand.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.isNull(a)){a=e.QFilterCellValueOperand._create(o,null,null,null,null)}var l=r.getStringByKey("Comparison");var p=e.QInAConverter.lookupComparison(l);a.setComparisonOperator(p);var s=r.getBooleanByKey("IsExcluding");a.setIsExcluding(s);var u=r.getListByKey("Values");e.QInARepoFilterOperation.importValues(t,u,a,null,o);return a};e.QInARepoFilterCellValueOperand.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putBoolean("IsExcluding",o.isExcluding());var a=o.getComparisonOperator();i.putString("Comparison",e.QInAConverter.lookupComparisonInA(a));var l=e.QInARepoFilterOperation.exportValues(t,o);i.put("Values",l);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterDateRange=function(){};e.QInARepoFilterDateRange.prototype=new e.QInARepository;e.QInARepoFilterDateRange.prototype._ff_c="QInARepoFilterDateRange";e.QInARepoFilterDateRange.prototype.getComponentType=function(){return e.FilterComponentType.DATE_RANGE_OPERATION};e.QInARepoFilterDateRange.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=this.getField(r,n,o);if(e.isNull(a)){var p=null;if(e.notNull(n)){var s=n;p=s.getFilterExpression()}a=e.notNull(p)?e.QFactory.createFilterOperationDateRange(p,l):e.QFactory.createFilterOperationDateRange(o,l)}var u=a.getQueryModel();var g=e.XDateRange.create(e.notNull(u)?u.getProcess().getDateTimeProvider():null);var y=r.getStringByKey("Granularity");if(e.notNull(y)){g.withGranularity(e.QInAConverter.lookupDateRangeGranularity(y),r.getBooleanByKeyExt("UpToPeriod",false))}if(r.getBooleanByKeyExt("Fixed",false)){g.withFixDates(e.XDate.createDateSafe(r.getStringByKey("FixedFrom")),e.XDate.createDateSafe(r.getStringByKey("FixedTo")))}else{var m=r.getStructureByKey("Offset");var c=e.PrUtils.getStringProperty(m,"Granularity");var S=e.PrUtils.getIntegerProperty(m,"Value");if(e.notNull(c)&&e.notNull(S)){g.withOffset(e.QInAConverter.lookupDateRangeGranularity(c.getString()),S.getInteger())}var A=r.getStructureByKey("LookBack");var d=e.PrUtils.getStringProperty(A,"Granularity");var I=e.PrUtils.getIntegerProperty(A,"Value");if(e.notNull(d)&&e.notNull(I)){g.withLookBack(e.QInAConverter.lookupDateRangeGranularity(d.getString()),I.getInteger())}var f=r.getStructureByKey("LookAhead");var N=e.PrUtils.getStringProperty(f,"Granularity");var v=e.PrUtils.getIntegerProperty(f,"Value");if(e.notNull(N)&&e.notNull(v)){g.withLookAhead(e.QInAConverter.lookupDateRangeGranularity(N.getString()),v.getInteger())}}a.setDateRange(g,l);return a};e.QInARepoFilterDateRange.prototype.getField=function(t,r,i){var n=t.getStringByKey("FieldName");var o=i.getFieldAccessorSingle().getFieldByName(n);if(e.isNull(o)&&e.notNull(r)&&r.getComponentType()===e.FilterComponentType.CARTESIAN_LIST){o=r.getField()}return o};e.QInARepoFilterDateRange.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getFieldMetadata();e.QInARepoUtils.setNameIfNotNull(i,"FieldName",a);var l=o.getDateRange();if(e.notNull(l)){i.putStringNotNull("Granularity",e.QInAConverter.lookupDateRangeGranularityInA(l.getGranularity()));i.putBoolean("Fixed",l.isFixedRange());if(l.isFixedRange()){i.putStringNotNull("FixedFrom",l.getFixedFromDate()!==null?l.getFixedFromDate().toIsoFormat():null);i.putStringNotNull("FixedTo",l.getFixedToDate()!==null?l.getFixedToDate().toIsoFormat():null)}else{i.putBoolean("UpToPeriod",l.isUpToCurrentPeriod());this.exportGranularitySettings(l.getOffset(),i,"Offset");this.exportGranularitySettings(l.getLookBack(),i,"LookBack");this.exportGranularitySettings(l.getLookAhead(),i,"LookAhead")}}return i};e.QInARepoFilterDateRange.prototype.exportGranularitySettings=function(t,r,i){if(e.notNull(t)){var n=r.putNewStructure(i);n.putStringNotNull("Granularity",e.QInAConverter.lookupDateRangeGranularityInA(t.getFirstObject()));n.putInteger("Value",t.getSecondObject().getInteger())}};e.QInARepoFilterDynamicTimeRegularRange=function(){};e.QInARepoFilterDynamicTimeRegularRange.prototype=new e.QInARepository;e.QInARepoFilterDynamicTimeRegularRange.prototype._ff_c="QInARepoFilterDynamicTimeRegularRange";e.QInARepoFilterDynamicTimeRegularRange.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_DYNAMIC_TIME_REGULAR_RANGE};e.QInARepoFilterDynamicTimeRegularRange.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=r.getStringByKey("Name");var l=i;if(e.isNull(l)){l=e.QFactory.createFilterDynamicTimeRegularRange(o,a)}e.QInARepoUtils.importFilterTimeRange(t,r,l);e.QInARepoUtils.importFilterShiftableTimeRange(r,l);l.setLookAhead(r.getIntegerByKey("LookAhead"));l.setLowValue(r.getStringByKey("LowValue"));var p=r.getStringByKey("LowValueType");if(e.notNull(p)){l.setLowValueType(e.QInAConverter.lookupValueType(p))}return l};e.QInARepoFilterDynamicTimeRegularRange.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());e.QInARepoUtils.exportTimeRangeFilter(t,i,o);e.QInARepoUtils.exportShiftableTimeRangeFilter(i,o);i.putInteger("LookAhead",o.getLookAhead());i.putString("LowValue",o.getLowValue());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterDynamicTimeToDateRange=function(){};e.QInARepoFilterDynamicTimeToDateRange.prototype=new e.QInARepository;e.QInARepoFilterDynamicTimeToDateRange.prototype._ff_c="QInARepoFilterDynamicTimeToDateRange";e.QInARepoFilterDynamicTimeToDateRange.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_DYNAMIC_TIME_TO_DATE_RANGE};e.QInARepoFilterDynamicTimeToDateRange.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=r.getStringByKey("Name");var l=i;if(e.isNull(l)){l=e.QFactory.createFilterDynamicTimeToDateRange(o,a)}e.QInARepoUtils.importFilterTimeRange(t,r,l);e.QInARepoUtils.importFilterShiftableTimeRange(r,l);l.setLowValue(r.getStringByKey("Member"));var p=r.getStringByKey("LowValueType");if(e.notNull(p)){l.setLowValueType(e.QInAConverter.lookupValueType(p))}return l};e.QInARepoFilterDynamicTimeToDateRange.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());e.QInARepoUtils.exportTimeRangeFilter(t,i,o);e.QInARepoUtils.exportShiftableTimeRangeFilter(i,o);i.putString("Member",o.getLowValue());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterElement=function(){};e.QInARepoFilterElement.prototype=new e.QInARepository;e.QInARepoFilterElement.prototype._ff_c="QInARepoFilterElement";e.QInARepoFilterElement.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_ELEMENT};e.QInARepoFilterElement.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=i;if(r.containsKey("Operator")){l=t.importFilterAlgebra(a,r,o)}else{var p=r.getStructureByKey("SetOperand");if(e.isNull(p)){if(r.containsKey("GeometryOperand")){l=t.importFilterGeo(a,r,o)}}else{l=t.importCartesianList(p,l,a,o)}}return l};e.QInARepoFilterElement.prototype.m_exportingAtLevel1=false;e.QInARepoFilterElement.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getComponentType();if(a.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)){if(a===e.FilterComponentType.CARTESIAN_LIST){t.exportCartesianList(o,i)}else if(a===e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST){t.exportConvertedTimeCartesianList(o,i)}else if(a===e.FilterComponentType.CARTESIAN_PRODUCT){t.exportFilterCartesianProduct(o,i)}else{if(this.shouldContinueExport(o,t)){t.exportFilterAlgebra(o,i);if(this.m_exportingAtLevel1){this.m_exportingAtLevel1=false}}}}else if(a.isTypeOf(e.FilterComponentType.OPERATION)){var l=o;var p=l.getComparisonOperator();if(e.notNull(p)){if(p.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){t.exportFilterGeo(l,i)}else{if(t.capabilities.supportsSetOperand()){var s=e.PrFactory.createStructure();var u=l.getFieldMetadata();if(e.notNull(u)){s.putString("FieldName",u.getName());var g=l.getHierarchyName();if(e.notNull(g)){var y=l.getFilterExpression()!==null?l.getFilterExpression():l.getParent().getFilterExpression();e.QInARepoHierarchy.exportHierarchyForFilter(t,t.isAbap(o),s,null,y,l.getQueryManager(),g,l.getHierarchyDueDate(),l.getHierarchyVersion())}if(l.isConvertToFlatFilter()){s.putBoolean("ConvertToFlatSelection",true)}var m=s.putNewList("Elements");var c=m.addNewStructure();t.exportFilterOperation(l,c);if(e.notNull(i)){i.put("SetOperand",s)}}}}}}else if(a.isTypeOf(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND)){var S=e.PrFactory.createStructure();var A=S.putNewList("Elements");A.add(t.exportCellValueOperand(o));i.put("CellValueOperand",S)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterElement.prototype.shouldContinueExport=function(t,r){var i=e.notNull(r.variableProcessingDirective)&&r.variableProcessingDirective===e.ProcessingStep.VARIABLE_DEFINITION;if(!i){return true}var n=t.getQueryModel();var o=t.getModelCapabilities();if(o.supportsComplexTupleFilter()&&e.notNull(n)){if(!this.m_exportingAtLevel1){this.m_exportingAtLevel1=true;return true}return false}return true};e.QInARepoFilterExpression=function(){};e.QInARepoFilterExpression.prototype=new e.QInARepository;e.QInARepoFilterExpression.prototype._ff_c="QInARepoFilterExpression";e.QInARepoFilterExpression.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_EXPRESSION};e.QInARepoFilterExpression.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.XString.isEqual(a.getName(),"selectionSpaceContainer")===false||a.getFilterRootElement()===null){a.setComplexRoot(null);var l=a.getModelCapabilities().supportsCellValueOperand();if(l){a.setIsSuppressingNulls(false);a.clearCellValueFilter()}if(e.notNull(r)){var p=r.getStringByKey("Id");a.setUniqueId(p);if(l){var s=r.getBooleanByKeyExt("IsSuppressingNulls",false);a.setIsSuppressingNulls(s)}var u=r.getStructureByKey("FilterRoot");if(e.notNull(u)){var g=t.importComponent(null,u,null,a,o);var y=g;a.setComplexRoot(y)}if(l){var m=r.getListByKey("CellValueOperand");if(e.notNull(m)){for(var c=0;c<m.size();c++){var S=m.getStructureAt(c);var A=t.importComponent(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND,S,null,a,o);a.addCellValueFilter(A)}}}}}return i};e.QInARepoFilterExpression.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Id",o.getUniqueId());i.putBoolean("IsSuppressingNulls",o.isSuppressingNulls());var a=o.getFilterRootElement();if(e.notNull(a)){var l=t.exportComponent(null,a,null,e.QImExFlag.DEFAULT_ALL);i.put("FilterRoot",l)}if(o.getModelCapabilities().supportsCellValueOperand()){var p=i.putNewList("CellValueOperand");var s=o.getCellValueOperands();for(var u=0;u<s.size();u++){var g=s.get(u);var y=t.exportCellValueOperand(g);p.add(y)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterFixed=function(){};e.QInARepoFilterFixed.prototype=new e.QInARepository;e.QInARepoFilterFixed.prototype._ff_c="QInARepoFilterFixed";e.QInARepoFilterFixed.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_FIXED};e.QInARepoFilterFixed.prototype.getTagName=function(){return"FixedFilterRepo"};e.QInARepoFilterFixed.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;if(e.notNull(r)){var l=n;a=t.importFilterExpression(null,r,l,o);if(e.notNull(l)&&e.notNull(a)){l.setFixedFilter(a)}}return a};e.QInARepoFilterFixed.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;if(!o.isFixedFilterInitialized()){return null}var a=o.getFixedFilter();var l=t.exportFilterExpression(a);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,l,n)};e.QInARepoFilterFixedTimeRange=function(){};e.QInARepoFilterFixedTimeRange.prototype=new e.QInARepository;e.QInARepoFilterFixedTimeRange.prototype._ff_c="QInARepoFilterFixedTimeRange";e.QInARepoFilterFixedTimeRange.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_FIXED_TIME_RANGE};e.QInARepoFilterFixedTimeRange.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=r.getStringByKey("Name");var l=i;if(e.isNull(l)){l=e.QFactory.createFilterFixedTimeRange(o,a)}var p=null;var s=r.getStringByKey("LowValueType");if(e.notNull(s)){p=e.QInAConverter.lookupValueType(s)}var u=e.TimeRangeFilterType.lookup(r.getStringByKey("TimeRangeFilterType"));if(u===e.TimeRangeFilterType.FIXED_OPENING_PERIOD_TO_CLOSING_PERIOD){l.setOpeningPeriodToClosingPeriodFixedRange()}else if(u===e.TimeRangeFilterType.FIXED_START_TO_CLOSING_OPERIOD){l.setStartToClosingPeriodFixedRange(r.getStringByKey("LowValue"),p)}else if(u===e.TimeRangeFilterType.FIXED_OPENING_PERIOD_TO_END){l.setOpeningPeriodToEndFixedRange("LowValue",p)}e.QInARepoUtils.importFilterTimeRange(t,r,l);return l};e.QInARepoFilterFixedTimeRange.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());e.QInARepoUtils.exportTimeRangeFilter(t,i,o);i.putString("LowValue",o.getLowValue());i.putString("TimeRangeFilterType",o.getRangeFilterType().getName());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterGeo=function(){};e.QInARepoFilterGeo.prototype=new e.QInARepository;e.QInARepoFilterGeo.prototype._ff_c="QInARepoFilterGeo";e.QInARepoFilterGeo.tryCreateGeometry=function(t){var r=e.XGeometryValue.createGeometryValueWithWkt(t);if(e.isNull(r)){r=e.XStringValue.create(t)}return r};e.QInARepoFilterGeo.prototype.getComponentType=function(){return e.FilterComponentType.SPATIAL_FILTER};e.QInARepoFilterGeo.prototype.getTagName=function(){return"GeometryOperandRepo"};e.QInARepoFilterGeo.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=o.getFieldAccessorSingle();var p=r.getStringByKey("Comparison");var s=r.getStringByKey("FieldName");var u=r.getStringByKey("Value1");var g=null;if(e.XStringUtils.isNotNullAndNotEmpty(p)&&e.XStringUtils.isNotNullAndNotEmpty(s)&&e.XStringUtils.isNotNullAndNotEmpty(u)){var y=e.QInAConverter.lookupComparison(p);if(e.notNull(y)){if(y.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){var m=l.getFieldByName(s);if(e.notNull(m)){g=e.QFactory.createFilterOperationWithOperator(a,m,y);var c=e.QInARepoFilterGeo.tryCreateGeometry(u);g.getLow().setValue(c);var S=r.getStringByKey("Value2");if(e.XStringUtils.isNotNullAndNotEmpty(S)){var A=e.QInARepoFilterGeo.tryCreateGeometry(S);g.getHigh().setValue(A)}var d=r.getStringByKey("Value3");if(e.XStringUtils.isNotNullAndNotEmpty(d)){var I=e.QInARepoFilterGeo.tryCreateGeometry(d);g.getThird().setValue(I)}}}}}return g};e.QInARepoFilterGeo.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getComparisonOperator();if(!a.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){throw e.XException.createIllegalStateException("Not a spatial operator")}i.putString("Comparison",e.QInAConverter.lookupComparisonInA(a));var l=o.getFieldMetadata();i.putString("FieldName",l.getName());var p=o.getLow();var s=o.getDataSource();if(e.isNull(s)){if(e.notNull(p)&&p.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value1",i,p,p.getValueType());var u=p.getGeometry().getSrid();if(t.capabilities.supportsSpatialFilterSrid()&&e.notNull(u)){i.putInteger("SRID",u.getInteger())}}}else{if(e.notNull(p)&&p.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value1",i,p,e.XValueType.STRING)}var g=t.exportDataSource(s,false);i.put("DataSource",g)}var y=o.getHigh();if(e.notNull(y)&&y.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value2",i,y,e.XValueType.STRING)}var m=o.getThird();if(e.notNull(m)&&m.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value3",i,m,e.XValueType.STRING)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterManager=function(){};e.QInARepoFilterManager.prototype=new e.QInARepository;e.QInARepoFilterManager.prototype._ff_c="QInARepoFilterManager";e.QInARepoFilterManager.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_FILTER_MANAGER};e.QInARepoFilterManager.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.isNull(a)){a=o.getOlapEnv().getFilterManager()}var l=r.getStructureByKey("OlapFilterManager");var p=l.getStructureByKey("OlapFilters");var s=p.getKeysAsIteratorOfString();while(s.hasNext()){var u=s.next();var g=a.getFilterByName(u);t.importFilterExpression(g,p.getStructureByKey(u),a,a)}return a};e.QInARepoFilterManager.prototype.exportComponentWithStructure=function(t,r,i,n){var o=i.putNewStructure("OlapFilterManager");var a=o.putNewStructure("OlapFilters");var l=r;var p=l.getFilters();var s=p.getKeysAsIteratorOfString();while(s.hasNext()){var u=s.next();var g=p.getByKey(u);if(e.QInARepoUtils.isValidFilterExpressionForRepository(g)){a.put(u,t.exportFilterExpression(g))}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterMeasureBased=function(){};e.QInARepoFilterMeasureBased.prototype=new e.QInARepository;e.QInARepoFilterMeasureBased.prototype._ff_c="QInARepoFilterMeasureBased";e.QInARepoFilterMeasureBased.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_MEASURE_BASED};e.QInARepoFilterMeasureBased.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=r.getStringByKey("Name");var l=i;if(e.isNull(l)){l=e.QFactory.createFilterMeasureBased(o,a)}var p=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,null,r.getStructureByKey("Formula"),null,o);l.setFormula(p);l.setCrossCalculationMeasure(r.getStringByKey("CrossCalculationMeasure"));var s=r.getListByKey("AggregationFieldNames");var u=s.size();for(var g=0;g<u;g++){l.addDimensionContext(s.getStringAt(g))}e.QInARepoUtils.importLayeredFilters(t,l,r.getListByKey("LayeredFilters"));return l};e.QInARepoFilterMeasureBased.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;e.QInARepoMemberAbstract.exportFormulaItem(t,o.getFormula(),i.putNewStructure("Formula"),o);i.putString("Name",o.getName());i.putStringNotNullAndNotEmpty("CrossCalculationMeasure",o.getCrossCalculationMeasure());var a=i.putNewList("AggregationFieldNames");a.addAllStrings(o.getDimensionContext());i.put("LayeredFilters",e.QInARepoUtils.exportLayeredFilters(t,o));return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterOperation=function(){};e.QInARepoFilterOperation.prototype=new e.QInARepository;e.QInARepoFilterOperation.prototype._ff_c="QInARepoFilterOperation";e.QInARepoFilterOperation.importValues=function(t,r,i,n,o){var a=r.size();for(var l=0;l<a&&l<3;l++){var p=r.getStructureAt(l);var s=i.getValueAt(l);var u=p.getStringByKey("Type");var g=e.QInAConverter.lookupValueType(u);if(g===e.XValueType.VARIABLE){s.setFilterValueType(g);var y=p.getStringByKey("Value");if(e.notNull(y)){var m=o.getVariableContainer().getVariables();var c=m.getByKey(y);s.setVariableValue(c)}}else{if(g===e.XValueType.CURRENT_MEMBER){s.setFilterValueType(g)}var S=e.PrUtils.getListProperty(p,"LowNavigations");if(e.isNull(S)){S=e.PrUtils.getListProperty(p,"Value")}if(e.notNull(S)){var A=s.getMemberNavigations();A.clear();var d=S.size();for(var I=0;I<d;I++){var f=e.QInARepoFilterOperation.importMemberNavigation(S.getStructureAt(I));A.add(f)}}if(g!==e.XValueType.CURRENT_MEMBER){e.QInARepoUtils.importSupplementsAndValue(t,s,p,null,null,n)}}}};e.QInARepoFilterOperation.importMemberNavigation=function(t){var r=e.QFactory.createMemberNavigation(e.CurrentMemberFunction.lookup(t.getStringByKey("Function")));if(t.containsKey("Parameters")){var i=t.getListByKey("Parameters");var n=i.size();for(var o=0;o<n;o++){var a=i.getStructureAt(o);if(a.containsKey("Navigations")){var l=a.getListByKey("Navigations");var p=l.size();for(var s=0;s<p;s++){r.addNavigation(e.QInARepoFilterOperation.importMemberNavigation(l.getStructureAt(s)))}}else{if(a.containsKey("Level")){var u=a.getByKey("Level");if(u.isNumeric()){r.addParameter(e.QFactory.createNavigationParameterWithLevelNumber(u.getInteger()))}else{r.addParameter(e.QFactory.createNavigationParameterWithLevelLiteral(u.getString()))}}else if(a.containsKey("Member")){r.addParameter(e.QFactory.createNavigationParameterWithMemberName(a.getStringByKey("Member")))}else if(a.containsKey("NoValuesAboveLevel")){r.addParameter(e.QFactory.createNavigationParameterWithNoValuesAboveLevel(a.getStringByKey("NoValuesAboveLevel")))}else if(a.containsKey("ErrorAboveLevel")){r.addParameter(e.QFactory.createNavigationParameterWithErrorAboveLevel(a.getStringByKey("ErrorAboveLevel")))}else if(a.containsKey("Shift")){var g=a.getStructureByKey("Shift");r.addParameter(e.QFactory.createNavigationParameterWithShift(g.getStringByKey("Level"),g.getIntegerByKey("Constant")))}else if(a.containsKey("Range")){var y=a.getStructureByKey("Range");r.addParameter(e.QFactory.createNavigationParameterWithRange(y.getStringByKey("Level"),y.getIntegerByKey("OffsetLow"),y.getIntegerByKey("OffsetHigh")))}else{var m=a.getByKey("Constant");if(m.isNumeric()){r.addParameter(e.QFactory.createNavigationParameterWithIntegerConstant(m.getInteger()))}else{r.addParameter(e.QFactory.createNavigationParameterWithStringConstant(m.getString()))}}}}}return r};e.QInARepoFilterOperation.exportValues=function(t,r){var i=e.PrFactory.createList();var n=r.size();for(var o=0;o<n;o++){var a=r.getValueAt(o);var l=i.addNewStructure();var p=a.getFilterValueType();if(p===e.XValueType.VARIABLE){l.putString("Type","Variable");e.QInARepoUtils.setNameIfNotNull(l,"Value",a.getVariableValue())}else{var s;if(p===e.XValueType.CURRENT_MEMBER){l.putString("Type","CurrentMember")}var u=null;var g=a.getFieldValue();if(e.notNull(g)){u=g.getField()}e.QInARepoUtils.exportSupplementsAndValue(t,null,l,u,a,null);var y=a.getMemberNavigations();var m=y.size();if(m>0){s=l.putNewList("LowNavigations");for(var c=0;c<m;c++){e.QInARepoFilterOperation.exportMemberNavigation(y.get(c),s.addNewStructure())}}}}return i};e.QInARepoFilterOperation.exportMemberNavigation=function(t,r){r.putString("Function",t.getMemberFunction().getName());var i=t.getParameters();if(e.notNull(i)){var n=i.size();var o=r.putNewList("Parameters");for(var a=0;a<n;a++){var l=i.get(a);var p=o.addNewStructure();var s=l.getMemberNavigationType();var u=e.QInAConverter.lookupMemberNavigationTypeInA(s);if(s===e.MemberNavigationType.FUNCTION_PARAM_SHIFT||s===e.MemberNavigationType.FUNCTION_PARAM_RANGE){p=p.putNewStructure(u);e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,"Level",l.getLevelValue());e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,"Constant",l.getConstantValue());e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,"OffsetLow",l.getOffSetLow());e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,"OffsetHigh",l.getOffsetHigh())}else{if(!e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,u,l.getLevelValue())){if(!e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,u,l.getConstantValue())){e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,u,l.getFunctionName())}}}}}var g=t.getNavigations();if(e.notNull(g)){var y;if(r.containsKey("Parameters")){y=r.getListByKey("Parameters")}else{y=r.putNewList("Parameters")}var m=y.addNewStructure();var c=m.putNewList("Navigations");var S=g.size();for(var A=0;A<S;A++){e.QInARepoFilterOperation.exportMemberNavigation(g.get(A),c.addNewStructure())}}};e.QInARepoFilterOperation.setKeyValueForMemberNavigation=function(t,r,i){if(e.isNull(i)){return false}if(i.getValueType().isNumber()){t.putDouble(r,i.getDouble())}else{t.putString(r,i.toString())}return true};e.QInARepoFilterOperation.prototype.getComponentType=function(){return e.FilterComponentType.OPERATION};e.QInARepoFilterOperation.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;if(e.notNull(n)){var l=n;a=l.getFilterExpression()}var p=i;if(e.isNull(p)){p=e.notNull(a)?e.QFactory.createFilterOperation(a,null):e.QFactory.createFilterOperation(o,null)}var s=r.getStringByKey("FieldName");var u=null;if(e.notNull(s)&&e.notNull(o)){var g=o.getFieldAccessorSingle();var y=null;if(e.isNull(g)||r.containsKey("QY_CACHE_CONTEXT")){var m=r.getStructureByKey("QY_CACHE_CONTEXT");if(e.isNull(m)){return null}var c=e.QInARepoUtils.importCacheKey(m);var S=o.getOlapEnv().getFieldMetadata(c);if(e.isNull(S)&&m.containsKey("StorageName")){y=e.QInARepoUtils.getFormulaCalcDimField(o,c.getKey1(),m.getStringByKey("StorageName"));if(e.notNull(y)){p.setField(y)}}if(e.notNull(S)){p.setFieldMetadata(S)}else if(e.isNull(y)){return null}}else{u=g.getFieldByName(s);if(e.isNull(u)){y=e.QInARepoUtils.getFormulaCalcDimField(o,s,o.getQueryManager().getClientQueryObjectStorageName());if(e.isNull(y)){return null}}p.setField(u)}}var A=r.getStringByKeyExt("Comparison","=");if(e.notNull(A)){var d=e.QInAConverter.lookupComparison(A);if(e.isNull(d)){t.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate2("Unsupported comparison operator: ",A))}p.setComparisonOperator(d)}else{p.setComparisonOperator(null)}var I=r.getBooleanByKeyExt("IsExcluding",false);if(I){p.setSetSign(e.SetSign.EXCLUDING)}else{p.setSetSign(e.SetSign.INCLUDING)}var f=r.getBooleanByKeyExt("HasLevelOffset",false);if(!f){p.resetLevelOffset()}else{var N=r.getIntegerByKeyExt("LevelOffset",0);p.setLevelOffset(N)}var v=r.getBooleanByKeyExt("HasDepth",false);if(!v){p.resetDepth()}else{var T=r.getIntegerByKeyExt("Depth",0);p.setDepth(T)}p.setConvertToFlatFilter(r.getBooleanByKeyExt("ConvertToFlatSelection",false));var R=r.getStringByKey("Id");p.setUniqueId(R);var E=r.getDoubleByKeyExt("Exactness",0);p.setExactness(E);e.QInARepoHierarchy.importHierarchyForFilter(t.isAbap(o),t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER),r,p,e.FilterComponentType.OPERATION);var C=r.getListByKey("Values");e.QInARepoFilterOperation.importValues(t,C,p,u,o);return p};e.QInARepoFilterOperation.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Id",o.getUniqueId());var a=o.getFieldMetadata();e.QInARepoUtils.setNameIfNotNull(i,"FieldName",a);var l=o.getFilterExpression();if(e.notNull(a)){if(e.notNull(l)){var p=l.getParent();if(e.notNull(p)&&l.getParent().getOlapComponentType()===e.OlapComponentType.OLAP_FILTER_MANAGER){var s=a.getCacheKey();i.put("QY_CACHE_CONTEXT",e.QInARepoUtils.exportCacheKey(s,o.getQueryManager()))}}}var u=o.getComparisonOperator();i.putString("Comparison",e.QInAConverter.lookupComparisonInA(u));i.putBoolean("IsExcluding",o.getSetSign()===e.SetSign.EXCLUDING);i.putBoolean("HasLevelOffset",o.hasLevelOffset());if(o.hasLevelOffset()){i.putInteger("LevelOffset",o.getLevelOffset())}i.putBoolean("HasDepth",o.hasDepth());if(o.hasDepth()){i.putInteger("Depth",o.getDepth())}i.putDouble("Exactness",o.getExactness());var g=o.getHierarchyName();if(e.notNull(g)){var y=o.getFilterExpression()!==null?o.getFilterExpression():o.getParent().getFilterExpression();var m=o.getContext();e.QInARepoHierarchy.exportHierarchyForFilter(t,t.isAbap(m),i,null,y,o.getQueryManager(),g,o.getHierarchyDueDate(),o.getHierarchyVersion())}var c=e.QInARepoFilterOperation.exportValues(t,o);i.put("Values",c);if(o.isConvertToFlatFilter()){i.putBoolean("ConvertToFlatSelection",o.isConvertToFlatFilter())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterTuple=function(){};e.QInARepoFilterTuple.prototype=new e.QInARepository;e.QInARepoFilterTuple.prototype._ff_c="QInARepoFilterTuple";e.QInARepoFilterTuple.prototype.getComponentType=function(){return e.FilterComponentType.TUPLE};e.QInARepoFilterTuple.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;if(e.notNull(n)){var l=n;a=l.getFilterExpression()}var p=e.QFilterTuple._create(o,a);p.setUniqueId(r.getStringByKey("Id"));var s=r.getListByKey("SubSelections");if(e.notNull(s)){var u=s.getStructureAt(0);u=u.getStructureByKey("TuplesOperand");var g=u.getListByKey("FieldNames");var y=e.PrUtils.asListOfString(g);p.setFieldNames(y);var m=u.getListByKey("Tuples");for(var c=0;c<m.size();c++){var S=m.getListAt(c);var A=e.PrUtils.asListOfString(S);p.addTupleCriteria(A)}}return p};e.QInARepoFilterTuple.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Code","Tuple");i.putString("Id",o.getUniqueId());var a=i.putNewList("SubSelections");var l=a.addNewStructure();var p=l.putNewStructure("TuplesOperand");var s=p.putNewList("FieldNames");var u=o.getFieldNames();s.addAllStrings(u);var g=p.putNewList("Tuples");var y=o.getTuples();for(var m=0;m<y.size();m++){var c=y.get(m);var S=g.addNewList();for(var A=0;A<u.size();A++){S.addString(c.get(A))}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterVirtualDatasource=function(){};e.QInARepoFilterVirtualDatasource.prototype=new e.QInARepository;e.QInARepoFilterVirtualDatasource.prototype._ff_c="QInARepoFilterVirtualDatasource";e.QInARepoFilterVirtualDatasource.prototype.getComponentType=function(){return e.FilterComponentType.VIRTUAL_DATASOURCE};e.QInARepoFilterVirtualDatasource.prototype.importComponentWithStructure=e.noSupport;e.QInARepoFilterVirtualDatasource.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=e.PrFactory.createStructure();a.putString("Code","And");var l=a.putNewList("SubSelections");var p=this.createMemberOperand("SchemaName",o.getSchemaName());var s=this.createMemberOperand("PackageName",o.getPackageName());var u=this.createMemberOperand("ObjectName",o.getObjectName());l.add(p);l.add(s);l.add(u);i.put("Operator",a);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterVirtualDatasource.prototype.createMemberOperand=function(t,r){var i=e.PrFactory.createStructure();i.putString("AttributeName",t);var n=e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL);i.putString("Comparison",n);i.putString("Value",r);var o=e.PrFactory.createStructure();o.put("MemberOperand",i);return o};e.QInARepoFormulaCalculatedDimension=function(){};e.QInARepoFormulaCalculatedDimension.prototype=new e.QInARepository;e.QInARepoFormulaCalculatedDimension.prototype._ff_c="QInARepoFormulaCalculatedDimension";e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension=function(t,r,i,n,o){var a=i;var l=r.getStringByKey("Name");if(e.isNull(a)){if(!o.getModelCapabilities().supportsCalculatedDimensionsExt()){t.addWarning(e.ErrorCodes.CALCULATED_DIMENSIONS_CAPABILITY_NOT_SUPPORTED,e.ErrorMessages.CALCULATED_DIMENSIONS_CAPABILITY_NOT_SUPPORTED_DESERIALIZE)}a=e.QFactory.createFormulaCalculatedDimension(o,l);a.setParent(n);o.getQueryModel().addDimension(a)}else{var p=r.getStructureByKey("Properties");a.reset(e.notNull(p))}a.setDimensionType(e.DimensionType.FORMULA_CALCULATED_DIMENSION);a.setName(l);a.setTopEntries(r.getIntegerByKeyExt("Top",0));a.setSkipEntries(r.getIntegerByKeyExt("Skip",0));t.importTotals(r,a.getResultStructureControllerBase(),o);var s=r.getListByKey("DependentCalcDims");if(e.notNull(s)){for(var u=0;u<s.size();u++){var g=s.get(u);var y=e.QFactory.createFormulaCalculatedDimension(o,l);y.setParent(n);e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(t,g,y,null,o);a.addDependentCalculatedDimension(y)}}var m=r.getListByKey("DependentCustomMembers");if(e.notNull(m)){var c=a.getQueryModelBase();var S=c.getPrimaryCalculationDimension();for(var A=0;A<m.size();A++){var d=m.get(A);var I=d.getStringByKey("Name");var f=d.getStringByKey("AliasName");if(e.XStringUtils.isNullOrEmpty(I)&&e.XStringUtils.isNullOrEmpty(f)){continue}var N;if(S.getStructureMemberByAlias(f)!==null){N=S.getStructureMemberByAlias(f)}else if(S.getStructureMember(I)!==null){N=S.getStructureMember(I)}else{N=t.importStructureMember(S,d,o);if(S.getDimensionType()===e.DimensionType.ACCOUNT){N.setAliasName(d.getStringByKey("AliasName"))}}a.addDependentCustomMember(N)}}a.setApplyParentExternalFilters(r.getBooleanByKey("IsApplyParentExtFilters"));if(r.getStringByKey("Currency")!==null){a.setCurrency(r.getStringByKey("Currency"))}e.QInARepoFormulaCalculatedDimension.importCalculatedDimensionProperties(t,r,o,a);var v=a.getAdditionalFilterContext();var T=null;var R=r.getStructureByKey("AdditionalFilterSelection");if(e.notNull(R)){T=t.importComponent(null,R,null,v,o)}v.setComplexRoot(T);if(r.containsKey("IsHidden")){a.setHidden(r.getBooleanByKey("IsHidden"))}return a};e.QInARepoFormulaCalculatedDimension.importCalculatedDimensionProperties=function(t,r,i,n){var o=r.getStructureByKey("Properties");if(e.notNull(o)){var a=o.getStructureByKey("KeyRef");var l;if(n.getQueryManager().getClientQueryObjectStorageName()!==null){l=n.getQueryManager().getClientQueryObjectStorageName()}else{l=a.getStringByKey("StorageName")}var p=e.QFactory.createKeyRef(l,a.getStringByKey("GroupName"),a.getStringByKey("ObjectName"));n.setPropertiesKeyRef(p);return}if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){var s=n.getQueryManager().getClientQueryObjectStorageName();if(e.notNull(s)){var u=i.getOlapEnv().getClientQueryObjectManager();var g=u.getFormulaCalcDimProperties(n.getName(),s);if(e.notNull(g)){n.setPropertiesKeyRef(g);return}}}var y=r.getListByKey("CalculatedAttributes");if(e.notNull(y)){for(var m=0;m<y.size();m++){var c=y.get(m);t.importComponent(e.OlapComponentType.FIELD,c,null,n,i)}}var S=r.getListByKey("AggregationFieldNames");if(e.notNull(S)){for(var A=0;A<S.size();A++){n.addAggregationFieldName(S.get(A).asString().getString())}}var d=n.getFilterContext();var I=null;var f=r.getStructureByKey("Selection");if(e.notNull(f)){I=t.importComponent(null,f,null,d,i)}d.setComplexRoot(I);var N=r.getListByKey("AggregationDimensions");if(e.notNull(N)){for(var v=0;v<N.size();v++){var T=N.get(v).asStructure();n.addAdditionalAggregationDimension(T.getStringByKey("DimensionName"),T.getStringByKey("HierarchyName"),T.getBooleanByKey("HierarchyActivation"))}}var R=r.getListByKey("ExternalFilterIdsToApply");if(e.notNull(R)){for(var E=0;E<R.size();E++){n.getProperties().addFilterIdsToApply(R.get(E).asString().getString())}}n.getProperties().setIsApplyAdditionalFilterContext(r.getBooleanByKey("ApplyAdditionalFilterContext"));n.getProperties().setText(r.getStringByKey("Text"));var C=n.getFieldByName(r.getStringByKey("ClientDefaultTextAttribute"));n.setClientDefaultTextField(C);C=n.getFieldByName(r.getStringByKey("ClientDefaultKeyAttribute"));n.setClientDefaultKeyField(C);e.QInARepoDimension.importRsFields(t,r,n);e.QInARepoDimension.importRsAttributeNodes(t,r,n);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("FieldLayoutType")){var Q=e.QInAConverter.lookupFieldLayoutType(r.getStringByKey("FieldLayoutType"));n.setFieldLayoutType(Q)}if(r.containsKey("TextFieldModified")){n.getFieldContainerBase().setShouldUseActualTextField(r.getBooleanByKey("TextFieldModified"))}};e.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts=function(t,r,i){e.QInARepoFormulaCalculatedDimension.exportFormulaCalcProperties(t,r,i);var n=i.getDependentCustomMembers();if(!n.isEmpty()){var o=r.putNewList("DependentCustomMembers");var a=n.getIterator();while(a.hasNext()){var l=a.next();var p=e.QInARepoMemberAbstract.exportCustomMember(t,l);if(e.notNull(p)){p.putString("AliasName",l.getAliasName());o.add(p)}}}var s=i.getDependentCalculatedDimensions();if(!s.isEmpty()){var u=r.putNewList("DependentCalcDims");var g=s.getIterator();while(g.hasNext()){var y=g.next();t.exportDimension(y,u.addNewStructure())}}r.putBoolean("IsApplyParentExtFilters",i.isApplyParentExternalFilters());if(i.getCurrency()!==null){r.putString("Currency",i.getCurrency())}var m=i.getAdditionalFilterContext().getFilterRootElement();if(e.notNull(m)){var c=t.exportComponent(null,m,null,e.QImExFlag.DEFAULT_ALL);r.put("AdditionalFilterSelection",c)}};e.QInARepoFormulaCalculatedDimension.exportFormulaCalcProperties=function(t,r,i){var n=i.getQueryManager()!==null&&i.getQueryManager().isKeyRefSerializationEnabled();if(n&&i.getOlapEnv()!==null){var o=i.getOlapEnv().getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(i.getPropertiesKeyRef(),i.getQueryManager().getClientQueryObjectStorageName());if(e.notNull(o)){var a=r.putNewStructure("Properties");e.QInARepoUtils.addKeyRefStructure(t,o,a,i.getQueryManager());return}}var l=i.getFilterContext().getFilterRootElement();if(e.notNull(l)){var p=t.exportComponent(null,l,null,e.QImExFlag.DEFAULT_ALL);r.put("Selection",p)}var s=r.putNewList("CalculatedAttributes");var u=i.getFieldIterator();while(u.hasNext()){var g=u.next();var y=t.exportComponent(e.OlapComponentType.FIELD,g,null,e.QImExFlag.DEFAULT_ALL);if(y.asStructure().getStringByKey("PresentationType")===null){t.exportComponent(e.OlapComponentType.FIELD,g,null,e.QImExFlag.DEFAULT_ALL)}s.add(y)}var m=i.getAggregationFieldNames();if(e.notNull(m)){var c=r.putNewList("AggregationFieldNames");c.addAllStrings(m)}var S=i.getAdditionalAggregationDimensions();if(e.notNull(S)){var A=S.getIterator();var d=r.putNewList("AggregationDimensions");while(A.hasNext()){var I=A.next();var f=d.addNewStructure();f.putString("DimensionName",I.getDimensionName());f.putString("HierarchyName",I.getHierarchyName());f.putBoolean("HierarchyActivation",I.activateHierarchy())}}var N=i.getProperties().getFilterIdsToApply();if(e.notNull(N)){var v=r.putNewList("ExternalFilterIdsToApply");v.addAllStrings(N)}r.putBoolean("ApplyAdditionalFilterContext",i.getProperties().isApplyAdditionalFilterContext());r.putString("Text",i.getProperties().getText())};e.QInARepoFormulaCalculatedDimension.prototype.getComponentType=function(){return e.DimensionType.FORMULA_CALCULATED_DIMENSION};e.QInARepoFormulaCalculatedDimension.prototype.importComponentWithStructure=function(t,r,i,n,o){return e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(t,r,i,n,o)};e.QInARepoFormulaCalculatedDimension.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());if(o.getParent()!==null&&o.getAxis()!==null){var a=o.getAxisType();i.putString("Axis",e.QInAConverter.lookupAxisTypeInA(a))}var l=o.getTopEntries();if(l>0){i.putInteger("Top",l)}var p=o.getSkipEntries();if(p>0){i.putInteger("Skip",p)}t.exportTotals(o,i);e.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts(t,i,o);if(o.isHidden()){i.putBoolean("IsHidden",true)}if(!o.isUseServerDefaultTextField()){i.putString("ClientDefaultTextAttribute",o.getClientDefaultTextField().getName())}if(!o.isUseServerDefaultKeyField()){i.putString("ClientDefaultKeyAttribute",o.getClientDefaultKeyField().getName())}e.QInARepoDimension.exportResultSetFields(t,i,o);var s=o.getDefaultResultSetTextField();if(e.notNull(s)&&s.haveAnyInAPropertiesChanged()||o.getShouldUseActualTextField()){i.putBoolean("TextFieldModified",true)}e.QInARepoDimension.exportResultSetAttributes(t,i,o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFormulaException=function(){};e.QInARepoFormulaException.prototype=new e.QInARepository;e.QInARepoFormulaException.prototype._ff_c="QInARepoFormulaException";e.QInARepoFormulaException.importEvaluates=function(t,r,i,n){var o=t.getListByKey("EvaluateOn");if(e.isNull(o)){return}var a=o.size();for(var l=0;l<a;l++){var p=o.getStructureAt(l);var s=p.getStringByKey("Name");var u=r.getFieldByName(s);if(e.isNull(u)){var g=r.getDimensionByNameFromExistingMetadata(s);if(e.notNull(g)){u=g.getKeyField()}}if(e.isNull(u)){n.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",s,"'!"));return}if(!p.containsKey("Low")){n.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",s));return}var y=u.getValueType();var m=e.QInARepoUtils.importValueByType(n,p,"Low",y);if(n.hasErrors()){n.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",y.getName()));return}var c=i._addNewEvaluateWithFieldInternal(u,m);if(p.containsKey("High")){var S=e.QInARepoUtils.importValueByType(n,p,"High",y);if(n.hasErrors()){n.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",y.getName()));return}c.setHighValue(S)}c.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(p.getStringByKey("Evaluate")));var A=p.getStringByKey("Comparison");var d=e.QInAConverter.lookupComparison(A);if(e.isNull(d)){n.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",A,"'"));return}c.setOperator(d)}};e.QInARepoFormulaException.importThresholds=function(t,r){var i=t.getListByKey("Threshold");if(e.notNull(i)){var n=i.size();for(var o=0;o<n;o++){var a=i.getStructureAt(o);var l=a.getIntegerByKeyExt("AlertLevel",-9999);var p;var s=!a.hasStringByKey("Low");if(s){p=r._addNewThresholdInternal(a.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}else{p=r._addNewThresholdWithStringInternal(a.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}var u=a.getStringByKey("Name");if(e.notNull(u)){p.setName(u)}var g=a.getStringByKey("Text");if(e.notNull(g)){p.setText(g)}var y=a.getStringByKey("Color");if(e.notNull(y)){p.setColor(y)}var m=e.QInAConverter.lookupComparison(a.getStringByKey("Comparison"));p.setOperator(m);if(m.getNumberOfParameters()===2){if(s){var c=a.getDoubleByKey("High");p.setHighValue(c)}else{var S=a.getStringByKey("High");p.setHigh(S)}}e.QInARepoFormulaException.importSettings(a.getListByKey("Settings"),p)}}};e.QInARepoFormulaException.importSettings=function(t,r){if(e.isNull(t)){return}var i=t.size();for(var n=0;n<i;n++){var o=t.getStructureAt(n);var a=o.getStringByKey("Name");var l=o.getIntegerByKey("Priority");var p=o.getStringByKey("Value");if(e.notNull(p)&&!e.XString.isEqual(p,"")){var s=r.addNewSetting(a,l);s.setValue(p)}}};e.QInARepoFormulaException.exportEvaluates=function(t,r,i,n){if(t.isEmpty()){return}var o=i.putNewList("EvaluateOn");var a=t.size();for(var l=0;l<a;l++){var p=o.addNewStructure();var s=t.get(l);p.putString("Name",s.getField().getName());p.putString("Evaluate",s.getEvaluate().toString());var u=s.getOperator();var g;if(u===e.ComparisonOperator.NOT_BETWEEN&&n){g="NOTBETWEEN"}else{g=e.QInAConverter.lookupComparisonInA(u)}p.putString("Comparison",g);e.QInARepoUtils.exportValue(r,"Low",p,s.getLowValue(),s.getValueType());if(u.getNumberOfParameters()>1){e.QInARepoUtils.exportValue(r,"High",p,s.getHighValue(),s.getValueType())}}};e.QInARepoFormulaException.exportThresholds=function(t,r,i,n){var o=i.putNewList("Threshold");var a=t.size();for(var l=0;l<a;l++){var p=t.get(l);var s=o.addNewStructure();var u=p.getName();if(!e.XString.isEqual(u,"Settings")){s.putStringNotNull("Name",u)}var g=p.getText();s.putStringNotNull("Text",g);var y=p.getOperator();var m;if(y===e.ComparisonOperator.NOT_BETWEEN&&n){m="NOTBETWEEN"}else{m=e.QInAConverter.lookupComparisonInA(y)}s.putString("Comparison",m);var c=p.getValueType()===e.XValueType.DOUBLE;if(p.getLowXValue()!==null){if(c){s.putDouble("Low",p.getLowValue())}else{s.putString("Low",p.getLow())}}if(p.getHighXValue()!==null&&y.getNumberOfParameters()>1){if(c){s.putDouble("High",p.getHighValue())}else{s.putString("High",p.getHigh())}}if(!p.isEmpty()){e.QInARepoFormulaException.exportSettings(p,r,s)}else{s.putInteger("AlertLevel",p.getAlertLevel().getLevel())}}};e.QInARepoFormulaException.exportSettings=function(t,r,i){var n=i.putNewList("Settings");var o=t.size();for(var a=0;a<o;a++){var l=t.get(a);var p=n.addNewStructure();p.putString("Name",l.getName());p.putInteger("Priority",l.getPriority());var s=l.getValue();if(e.isNull(s)||e.XString.isEqual(s,"")){r.addError(e.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value")}else{p.putString("Value",s)}}};e.QInARepoFormulaException.prototype.getComponentType=function(){return e.OlapComponentType.FORMULA_EXCEPTION};e.QInARepoFormulaException.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=o.getQueryModel();var l=i;if(e.isNull(l)){var p=r.getStringByKey("Name");var s=r.getStringByKey("Text");l=e.QFactory.createFormulaException(o,p,s)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("NullAsZero")){l.setHandleNullAsZero(r.getBooleanByKey("NullAsZero"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("HandleExcludedFilters")){l.setHandleExcludedFilters(r.getBooleanByKey("HandleExcludedFilters"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("CalculateRatioVariance")){l.setCalculateRatioVariance(r.getBooleanByKey("CalculateRatioVariance"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("AutoSignFlip")){l.setAutoSignFlip(r.getBooleanByKey("AutoSignFlip"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("IsPrimary")){l.setIsPrimaryMeasure(r.getBooleanByKeyExt("IsPrimary",true))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Active")){l.setActive(r.getBooleanByKeyExt("Active",true))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("EvaluateDefault")){var u=e.QExceptionEvalType.lookupExceptionEvalType(r.getStringByKey("EvaluateDefault"));l.setEvaluateDefault(u)}l.setFormulaExceptionType(e.FormulaExceptionType.lookup(r.getStringByKey("Type")));var g=r.getListByKey("StructureContext");var y=g.getStructureAt(0);var m=this.getDimensionName(a,y);var c=y.getStringByKey("MemberName");if(e.notNull(m)&&e.notNull(c)){var S=a.getDimensionByNameFromExistingMetadata(m);var A=S.getStructureMemberByAliasOrMember(c);if(e.isNull(A)){A=a.getOlapEnv().getClientQueryObjectManager().getStructuredMember(c,a.getQueryManager().getClientQueryObjectStorageName(),S===a.getPrimaryCalculationDimension())}l.setMeasure(A)}var d=g.getStructureAt(1);var I=this.getDimensionName(a,d);var f=d.getStringByKey("MemberName");if(e.notNull(I)&&e.notNull(f)){var N=a.getDimensionByNameFromExistingMetadata(I);var v=N.getStructureMemberByAliasOrMember(f);if(e.isNull(v)){return null}l.setBaseMeasure(v)}else if(e.notNull(f)){l.setBaseMeasureName(f)}e.QInARepoFormulaException.importEvaluates(r,a,l,t);var T=g.getStructureAt(2);var R=this.getDimensionName(a,T);var E=T.getStringByKey("MemberName");if(e.notNull(R)&&e.notNull(E)){var C=a.getDimensionByNameFromExistingMetadata(R);var Q=C.getStructureMemberByAliasOrMember(E);if(e.isNull(Q)){return null}l.setReferenceMeasure(Q)}else if(e.notNull(E)){l.setReferenceMeasureName(E)}e.QInARepoFormulaException.importThresholds(r,l);if(g.size()>3){var M=g.getStructureAt(3);var D=this.getDimensionName(a,M);var L=M.getStringByKey("MemberName");if(e.notNull(D)&&e.notNull(L)){var B=a.getDimensionByNameFromExistingMetadata(D);var F=B.getStructureMemberByAliasOrMember(L);if(e.isNull(F)){return null}l.setStructure(F)}}return l};e.QInARepoFormulaException.prototype.getDimensionName=function(t,r){var i=r.getStringByKey("DimensionName");if(e.isNull(i)&&r.getBooleanByKeyExt("MeasureStructure",false)){i=t.getMeasureDimension().getName()}return i};e.QInARepoFormulaException.prototype.importComponent=function(t,r,i,n,o){var a=r;var l=this.getTagName();if(e.notNull(l)&&e.notNull(a)){a=a.getStructureByKey(l)}if(e.notNull(o)&&o.getQueryModel()!==null&&e.notNull(a)){var p=a.getStructureByKey("KeyRef");if(e.notNull(p)){var s=e.QFactory.createKeyRef(p.getStringByKey("StorageName"),p.getStringByKey("GroupName"),p.getStringByKey("ObjectName"));var u=o.getQueryModel().getFormulaExceptionManager().getModelFormulaExceptionByKeyRef(s);if(e.notNull(u)){return u}}}return e.QInARepository.prototype.importComponent.call(this,t,r,i,n,o)};e.QInARepoFormulaException.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());i.putString("Text",o.getText());i.putString("Type",o.getFormulaExceptionType().getName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_NULL_AS_ZERO)){i.putBoolean("NullAsZero",o.isHandleNullAsZero())}if((t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QFormulaExceptionProperties.QY_HANDLE_EXCLUDED_FILTERS))&&o.isHandleExcludedFilters()){i.putBoolean("HandleExcludedFilters",o.isHandleExcludedFilters())}if((t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QFormulaExceptionProperties.QY_CALCULATE_RATIO_VARIANCE))&&o.isRatioVarianceCalculated()){i.putBoolean("CalculateRatioVariance",o.isRatioVarianceCalculated())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_AUTO_SIGN_FLIP)){if(o.isAutoSignFlip()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QExceptionProperties.QY_AUTO_SIGN_FLIP)){i.putBoolean("AutoSignFlip",o.isAutoSignFlip())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_IS_PRIMARY)){i.putBoolean("IsPrimary",o.isPrimaryMeasure())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_ACTIVE)){i.putBoolean("Active",o.isActive())}i.putString("EvaluateDefault",o.getEvaluateDefault().toString());var a=i.putNewList("StructureContext");var l=a.addNewStructure();var p=o.getMeasure();if(e.notNull(p)){var s=p.getDimension();l.putString("DimensionName",s.getName());l.putStringNotNull("MemberName",p.getAliasOrMemberName())}var u=a.addNewStructure();var g=o.getBaseMeasure();if(e.notNull(g)){var y=g.getDimension();u.putString("DimensionName",y.getName());u.putStringNotNull("MemberName",g.getAliasOrMemberName())}else{u.putStringNotNull("MemberName",o.getBaseMeasureName())}var m=a.addNewStructure();var c=o.getReferenceMeasure();if(e.notNull(c)){var S=c.getDimension();m.putString("DimensionName",S.getName());m.putStringNotNull("MemberName",c.getAliasOrMemberName())}else{m.putStringNotNull("MemberName",o.getReferenceMeasureName())}var A=o.getStructure();if(A.isPresent()){var d=a.addNewStructure();var I=A.get().getDimension();d.putString("DimensionName",I.getName());d.putStringNotNull("MemberName",A.get().getAliasOrMemberName())}var f=o.getQueryModel();var N=t.isAbap(f);e.QInARepoFormulaException.exportThresholds(o.getThresholds(),t,i,N);e.QInARepoFormulaException.exportEvaluates(o.getEvaluates(),t,i,N);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFormulaException.prototype.exportKeyReference=function(t,r,i){var n=r;if(n.getQueryManager()!==null){if(!n.getQueryManager().isKeyRefSerializationEnabled()){return false}}var o=n.getQueryModel();if(e.notNull(o)){var a=o.getFormulaExceptionManager();if(a.getModelFormulaException(n.getName())===n){e.QInARepoUtils.addKeyRefStructure(t,n,i,n.getQueryManager());return true}}return e.QInARepository.prototype.exportKeyReference.call(this,t,r,i)};e.QInARepoFormulaExceptionManager=function(){};e.QInARepoFormulaExceptionManager.prototype=new e.QInARepository;e.QInARepoFormulaExceptionManager.prototype._ff_c="QInARepoFormulaExceptionManager";e.QInARepoFormulaExceptionManager.prototype.getComponentType=function(){return e.OlapComponentType.FORMULA_EXCEPTION_MANAGER};e.QInARepoFormulaExceptionManager.prototype.getTagName=function(){return"FormulaExceptionManager"};e.QInARepoFormulaExceptionManager.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.notNull(a)){a.clear();if(e.notNull(r)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("FormulaResultVisible")){a.setFormulaResultVisible(r.getBooleanByKeyExt("FormulaResultVisible",false))}var l;var p=r.getListByKey("FormulaExceptionsModeler");if(e.notNull(p)){for(var s=0;s<p.size();s++){var u=p.getStructureAt(s);var g=u.getStringByKey("Name");var y=u.getStringByKey("Text");l=a.addNewModelFormulaException(g,y);var m=t.importFormulaException(u,l,a,o);if(e.isNull(m)){a.removeModelFormulaException(g,true)}}}p=r.getListByKey("FormulaExceptions");if(e.notNull(p)){for(var c=0;c<p.size();c++){l=t.importFormulaException(p.getStructureAt(c),null,a,o);a.add(l)}}}}return a};e.QInARepoFormulaExceptionManager.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;if(e.notNull(o)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_FORMULA_RESULT_VISIBLE)){i.putBoolean("FormulaResultVisible",o.isFormulaResultVisible())}var a=e.PrFactory.createList();for(var l=0;l<o.size();l++){var p=o.get(l);if(e.notNull(p)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!e.XString.isEqual(p.getStorageName(),e.KeyRefConstants.MODEL_FORMULA_EXCEPTIONS)){var s=e.PrFactory.createStructure();t.exportFormulaException(p,s);a.add(s)}}}i.put("FormulaExceptions",a)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoHierarchy=function(){};e.QInARepoHierarchy.prototype=new e.QInARepository;e.QInARepoHierarchy.prototype._ff_c="QInARepoHierarchy";e.QInARepoHierarchy.hasPlaceHolderInStructure=function(t,r,i){var n=t.getStringByKey(r);var o=e.notNull(n)&&e.XString.isEqual(i,n);return o};e.QInARepoHierarchy.importHierarchyForFilter=function(t,r,i,n,o){var a=i.getStringByKey("HierarchyName");var l=null;var p=null;if(r&&t){p=i.getStringByKey("HierarchyVersion");var s=i.getStringByKey("HierarchyDueDate");if(e.notNull(s)){if(o===e.FilterComponentType.CARTESIAN_LIST){l=e.XDate.createDateSafe(s)}else if(o===e.FilterComponentType.OPERATION){l=e.XDate.createDateFromSAPFormat(s)}}}if(o===e.FilterComponentType.CARTESIAN_LIST){n.setHierarchyInfo(a,l,p)}else if(o===e.FilterComponentType.OPERATION){n.setHierarchyInfo(a,l,p)}};e.QInARepoHierarchy.appendItemsToCatalogResult=function(t,r,i){var n=e.PrUtils.getListSize(r,0);for(var o=0;o<n;o++){var a=e.PrUtils.getStructureElement(r,o);var l=e.HierarchyCatalogItem.createCatalogItem();l.setDimensionName(i);var p;if(a.hasStringByKey("Name")){p=a.getStringByKey("Name")}else{p=a.getStringByKey("HierarchyName")}if(e.XStringUtils.isNullOrEmpty(p)||t.containsHierarchy(p)){continue}l.setHierarchyName(p);l.setHierarchyUniqueName(a.getStringByKey("UniqueName"));var s=e.PrUtils.getStringProperty(a,"Description");if(e.notNull(s)){l.setHierarchyLongText(s.getString())}var u=e.PrUtils.getStringProperty(a,"Version");if(e.notNull(u)){l.setVersionName(u.getString())}var g=e.PrUtils.getStringProperty(a,"Structure");if(e.notNull(g)){l.setHierarchyType(e.HierarchyType.lookup(g.getString()))}var y=e.PrUtils.getBooleanValueProperty(a,"IsModeled",false);l.setIsModeled(y);var m=e.PrUtils.getStringProperty(a,"DateTo");if(e.notNull(m)){var c=m.getString();if(e.XStringUtils.isNotNullAndNotEmpty(c)){l.setDateTo(e.XDate.createDateFromIsoFormat(c))}}var S=e.PrUtils.getListProperty(a,"Levels");if(e.notNull(S)){l.setSupportsHierarchyLevels(true);var A=e.XList.create();var d=e.PrUtils.getListSize(S,0);for(var I=0;I<d;I++){var f=e.PrUtils.getStructureElement(S,I);if(e.isNull(f)){continue}var N=e.HierarchyCatalogLevel.createCatalogLevel();var v=e.PrUtils.getIntegerValueProperty(f,"Level",-1);if(v>-1){N.setLevel(v)}var T=e.PrUtils.getStringProperty(f,"LevelName");if(e.notNull(T)){N.setLevelName(T.getString())}var R=e.PrUtils.getStringProperty(f,"LevelCaption");if(e.notNull(R)){N.setLevelDescription(R.getString())}var E=e.PrUtils.getStringProperty(f,"LevelUniqueName");if(e.notNull(E)){N.setLevelUniqueName(E.getString())}var C=e.PrUtils.getStringProperty(f,"DimensionName");if(e.notNull(C)){N.setLevelDimensionName(C.getString())}var Q=e.PrUtils.getIntegerProperty(f,"LevelType");if(e.notNull(Q)){N.setLevelType(e.QInAConverter.lookupHierarchyLevelType(Q.getInteger()))}A.add(N)}l.setHierarchyLevels(A)}var M=a.getStringByKey("RestNode");if(e.notNull(M)){l.setRestNode(M)}var D=a.getStringByKey("VirtualRootNode");if(e.notNull(D)){l.setVirtualRootNode(D)}t.addItem(l)}return t};e.QInARepoHierarchy.importLeveledHierarchy=function(t,r,i,n){var o=e.QLeveledHierarchy.create(r,i,n.getStringByKey(n.containsKey("Name")?"Name":"HierarchyName"));o.setHierarchyUniqueName(n.getStringByKey("UniqueName"));if(n.getStringByKey("DimensionName")===null){o.setDimensionName(i.getName())}else{o.setDimensionName(n.getStringByKey("DimensionName"))}o.setHierarchyType(e.HierarchyType.lookup(n.getStringByKey("Structure")));o.setIsModeled(n.getBooleanByKeyExt("IsModeled",false));var a=n.getStringByKey("DueDate");if(e.XStringUtils.isNotNullAndNotEmpty(a)){o.setDateTo(e.QInARepoUtils.createDate(a))}o.setHierarchyDescription(n.getStringByKey("Description"));var l=n.getListByKey("Levels");if(!e.PrUtils.isListEmpty(l)){e.QInARepoHierarchy.importLevels(o,l)}return o};e.QInARepoHierarchy.importLevels=function(t,r){var i=r.size();for(var n=0;n<i;n++){var o=r.getStructureAt(n);var a=e.QHierarchyLevel.create(t,o.getStringByKey("LevelUniqueName"),o.getIntegerByKey("Level"));a.setLevelName(o.getStringByKey("LevelName"));a.setLevelText(o.getStringByKey("LevelCaption"));a.setLevelDimensionName(o.getStringByKey("DimensionName"));a.setLevelType(e.QInAConverter.lookupHierarchyLevelType(o.getIntegerByKey("LevelType")));a.setNavigationAttribute(o.getStringByKey("NavAttr"));t.getAllLevelBase().add(a)}};e.QInARepoHierarchy.isNamePlaceHolderForAutoSubmit=function(t){var r=false;if(e.notNull(t)){var i=t.getQueryManager();r=e.notNull(i)&&i.isExecuteAutoVariableSubmit()&&t.useHierarchyNameVariable()&&e.XStringUtils.isNotNullAndNotEmpty(t.getHierarchyNameVariableName())}return r};e.QInARepoHierarchy.isDueDatePlaceHolderForAutoSubmit=function(t){var r=false;if(e.notNull(t)){var i=t.getQueryManager();r=e.notNull(i)&&i.isExecuteAutoVariableSubmit()&&t.useHierarchyDueDateVariable()&&e.XStringUtils.isNotNullAndNotEmpty(t.getHierarchyDueDateVariableName())}return r};e.QInARepoHierarchy.isVersionPlaceHolderForAutoSubmit=function(t){var r=false;if(e.notNull(t)){var i=t.getQueryManager();r=e.notNull(i)&&i.isExecuteAutoVariableSubmit()&&t.useHierarchyVersionVariable()&&e.XStringUtils.isNotNullAndNotEmpty(t.getHierarchyVersionVariableName())}return r};e.QInARepoHierarchy.exportLevels=function(t,r){if(r.supportsHierarchyLevels()){var i=t.putNewList("Levels");var n=r.getHierarchyLevels();if(e.notNull(n)){var o=n.size();for(var a=0;a<o;a++){var l=n.get(a);var p=i.addNewStructure();p.putString("LevelUniqueName",l.getLevelUniqueName());p.putInteger("Level",l.getLevel());p.putString("LevelName",l.getLevelName());p.putString("LevelCaption",l.getLevelDescription());p.putStringNotNull("DimensionName",l.getLevelDimensionName());p.putInteger("LevelType",e.QInAConverter.lookupHierarchyLevelTypeIna(l.getLevelType()))}}}};e.QInARepoHierarchy.exportHierarchyForFilter=function(t,r,i,n,o,a,l,p,s){if(e.notNull(l)){i.putString("HierarchyName",l);if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&r){if(e.isNull(o)||!e.XString.isEqual(o.getName(),e.QFilter.FIXED_FILTER_CONTAINER)||e.notNull(a)&&a.isExecuteAutoVariableSubmit()){e.QInARepoUtils.setDateIfNotNull(t,i,"HierarchyDueDate",p);i.putStringNotNull("HierarchyVersion",s)}}}};e.QInARepoHierarchy.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY};e.QInARepoHierarchy.prototype.getTagName=function(){return"HierarchyRepo"};e.QInARepoHierarchy.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(a.supportsHierarchy()){var l=a.isDisplayHierarchyFixInFilter();a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);if(e.isNull(r)){a.setHierarchy(null)}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasElements()){var p=r.getStringByKey("Name")!==null?r.getStringByKey("Name"):r.getStringByKey("HierarchyName");var s=e.QInARepoHierarchy.hasPlaceHolderInStructure(r,"NameIs","Variable");a.getHierarchyManagerBase().setUseHierarchyNameVariable(s);if(s){a.getHierarchyManagerBase().setHierarchyNameVariableName(p)}var u=null;if(e.XStringUtils.isNotNullAndNotEmpty(p)){if(a.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(r,a);this.importLeveledHierarchyToMetadata(t,r,o,a)}var g=a.getLeveledHierarchy(p);var y=false;if(t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&(e.XStringUtils.isNotNullAndNotEmpty(a.getHierarchyName())||e.notNull(g))){if(a.getHierarchy()!==null&&e.XString.isEqual(a.getHierarchyName(),p)){u=a.getHierarchy();y=a.isHierarchyActive()}else if(e.notNull(g)&&e.XString.isEqual(g.getName(),p)){u=e.QHierarchy.create(a.getContext(),a,p)}}else{if(r.getBooleanByKey("IsTransient")){u=e.QHierarchy.createCustomHierarchy(a.getContext(),a,p,r.getStringByKey("Description"))}else{u=e.QHierarchy.create(a.getContext(),a,p)}}this.importHierarchyDueDate(t,r,a,u);this.importHierarchyVersion(r,a,u);if(e.notNull(u)){a.setHierarchy(u);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){y=true}var m=s?false:r.getBooleanByKeyExt("HierarchyActive",y);a.setHierarchyActive(m);a.setSelectorHierarchyActive(m);var c=a.getQueryManager();var S=e.notNull(c)&&c.isExecuteAutoVariableSubmit();if(S&&r.containsKey("UseDefaultDrillLevelOnChange")){a.setUseDefaultDrillLevelOnChange(r.getBooleanByKey("UseDefaultDrillLevelOnChange"))}}}var A=r.getListByKey("StickyDimensionMembers");a.clearStickyMembers();if(e.XCollectionUtils.hasElements(A)){for(var d=0;d<A.size();d++){a.addStickyMember(A.getStringAt(d))}}var I=0;if(t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA){I=a.getInitialDrillLevel()}var f=r.getIntegerByKeyExt("InitialDrillLevel",I);var N=a.getSelectorRootLevel();if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){N=r.getIntegerByKeyExt("SelectorInitialDrillLevel",f)}else if(r.containsKey("SelectorInitialDrillLevel")){N=r.getIntegerByKey("SelectorInitialDrillLevel")}a.setInitialDrillLevel(f);a.setSelectorInitialDrillLevel(N);if(a.getModelCapabilities().supportsMaxDrillLevel()){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("MaxDrillLevel")){var v=r.getIntegerByKeyExt("MaxDrillLevel",-1);a.getHierarchyManager().setMaxDrillLevel(v)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("MaxRuntimeLevel")){var T=r.getIntegerByKeyExt("MaxRuntimeLevel",-1);a.getHierarchyManager().setMaxRuntimeLevel(T)}}var R=r.getIntegerByKeyExt("InitialDrillOffset",0);a.setInitialDrillOffset(R);a.setExplicitDrillOnFilteredNodes(r.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("LowerLevelNodeAlignment")||r.containsKey("ExpandBottomUp")){var E=e.Alignment.DEFAULT_VALUE;if(o.getModelCapabilities().supportsExpandBottomUp()){var C=r.getStringByKeyExt("LowerLevelNodeAlignment","Default");E=e.QInAConverter.lookupLowerLevelNodeAlignment(C);if(r.containsKey("ExpandBottomUp")){var Q=r.getBooleanByKeyExt("ExpandBottomUp",false);if(Q){E=e.Alignment.CHILDREN_ABOVE_PARENT}}}a.getHierarchyManagerBase().setLowerLevelNodeAlignmentForRepoImport(E)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("NodeCondensation")){var M=r.getBooleanByKeyExt("NodeCondensation",false);a.setHasNodeCondensation(M)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("MemberOfPostedNodeVisibility")){var D=r.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");var L=e.QInAConverter.lookupResultSetVisibility(D);a.setMemberOfPostedNodeVisibility(L)}a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(l);return u}a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(l)}return null};e.QInARepoHierarchy.prototype.importHierarchyDueDate=function(t,r,i,n){var o=r.getStringByKey("DueDate");var a=e.QInARepoHierarchy.hasPlaceHolderInStructure(r,"DueDateIs","Variable");i.setUseHierarchyDueDateVariable(a);if(a){i.setHierarchyDueDateVariableName(e.XStringUtils.isNullOrEmpty(o)?null:o)}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("DueDate")){if(e.notNull(n)){n.setHierarchyDueDate(e.QInARepoUtils.createDate(o))}}if(e.notNull(n)){var l=r.getStringByKey("DateTo");n.setDateTo(e.QInARepoUtils.createDate(l));var p=r.getStringByKey("0DATEFROM");n.setDateFrom(e.QInARepoUtils.createDate(p));var s=r.getStructureByKey("Metadata");if(e.notNull(s)){l=s.getStringByKey("DateTo");if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.setDateTo(e.QInARepoUtils.createDate(l))}p=s.getStringByKey("0DATEFROM");if(e.XStringUtils.isNotNullAndNotEmpty(p)){n.setDateFrom(e.QInARepoUtils.createDate(p))}}}};e.QInARepoHierarchy.prototype.importHierarchyVersion=function(t,r,i){var n=t.getStringByKey("Version");var o=e.QInARepoHierarchy.hasPlaceHolderInStructure(t,"VersionIs","Variable");r.getHierarchyManagerBase().setUseHierarchyVersionVariable(o);if(o){r.getHierarchyManagerBase().setHierarchyVersionVariableName(e.XStringUtils.isNullOrEmpty(n)?null:n)}else if(e.notNull(i)){i.setHierarchyVersion(n)}};e.QInARepoHierarchy.prototype.importHierarchyAsCatalogItem=function(t,r){var i=e.PrFactory.createList();i.add(t);var n=r.getHierarchies();if(e.isNull(n)){n=e.QFactory.createHierarchyCatalogResult();e.QInARepoHierarchy.appendItemsToCatalogResult(n,i,r.getName());r.getHierarchyManagerBase().setHierarchies(n)}else{e.QInARepoHierarchy.appendItemsToCatalogResult(n,i,r.getName())}};e.QInARepoHierarchy.prototype.importLeveledHierarchyToMetadata=function(t,r,i,n){var o=n.getQueryModelBase().getQueryManagerBase();if(e.notNull(o)&&!e.PrUtils.isListEmpty(r.getListByKey("Levels"))){var a=o.getMetadataModelBase();var l=a.getLeveledHierarchiesBase();var p=e.QInARepoHierarchy.importLeveledHierarchy(t,i,n,r);if(!l.contains(p)){l.add(p)}}};e.QInARepoHierarchy.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;if(o.supportsHierarchy()){var a=o.isHierarchyActive();var l=t.isAbap(o.getQueryModel());var p=o.getHierarchyName();var s=o.getQueryManager();var u=e.notNull(s)&&s.isExecuteAutoVariableSubmit();var g=e.QInARepoHierarchy.isDueDatePlaceHolderForAutoSubmit(o);var y=e.QInARepoHierarchy.isVersionPlaceHolderForAutoSubmit(o);var m=e.QInARepoHierarchy.isNamePlaceHolderForAutoSubmit(o);var c=e.XStringUtils.isNullOrEmpty(p)&&m;var S=p;if(c){p=o.getHierarchyNameVariableName()}if(e.XStringUtils.isNotNullAndNotEmpty(p)){var A=o.getHierarchyManagerBase();var d=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||A.shouldExportInRepoDeltaFormat();if(d){e.QInAExportUtil.setNonEmptyString(i,"HierarchyName",p);e.QInAExportUtil.setNonEmptyString(i,"Name",p);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||A.hasPropertyChanged(e.QHierarchyProperties.QY_HIERARCHY_ACTIVE)){i.putBoolean("HierarchyActive",a)}if(e.XStringUtils.isNullOrEmpty(S)||e.XString.isEqual(S,o.getHierarchyNameVariableName())){i.putString("NameIs","Variable")}if(o.useHierarchyDueDateVariable()||g){i.putString("DueDateIs","Variable");e.QInAExportUtil.setNonEmptyString(i,"DueDate",o.getHierarchyDueDateVariableName())}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||A.hasPropertyChanged(e.QHierarchyProperties.QY_DUE_DATE)){e.QInARepoUtils.setDate(t,i,"DueDate",o.getHierarchyDueDate())}if(y){i.putString("VersionIs","Variable");e.QInAExportUtil.setNonEmptyString(i,"Version",o.getHierarchyVersionVariableName())}else{e.QInAExportUtil.setNonEmptyString(i,"Version",o.getHierarchyVersion())}if(u&&o.useDefaultDrillLevelOnChange()){i.putBoolean("UseDefaultDrillLevelOnChange",true)}var I=0;I=o.getInitialDrillLevel();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_SELECTOR_INITIAL_DRILL_LEVEL)){i.putInteger("SelectorInitialDrillLevel",o.getSelectorRootLevel())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||A.hasPropertyChanged(e.QHierarchyProperties.QY_DRILL_LEVEL)){i.putInteger("InitialDrillLevel",I)}if(o.getInitialDrillOffset()!==0){i.putInteger("InitialDrillOffset",o.getInitialDrillOffset())}if(o.isExplicitDrillOnFilteredNodes()){i.putBoolean("ExplicitDrillOnFilteredNodes",o.isExplicitDrillOnFilteredNodes())}var f=o.getModelCapabilities()!==null&&o.getModelCapabilities().supportsMaxDrillLevel();if(f){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||A.hasPropertyChanged(e.QHierarchyProperties.QY_MAX_DRILL_LEVEL)){var N=o.getMaxDrillLevel();i.putInteger("MaxDrillLevel",N)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||A.hasPropertyChanged(e.QHierarchyProperties.QY_MAX_RUNTIME_LEVEL)){var v=o.getMaxRuntimeLevel();i.putInteger("MaxRuntimeLevel",v)}}if(o.hasStickyMembers()){i.putNewList("StickyDimensionMembers").addAllStrings(o.getStickyMembers())}var T=o.getLowerLevelNodeAlignment();if(o.getModelCapabilities().supportsExpandBottomUp()){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||A.hasPropertyChanged(e.QHierarchyProperties.QY_LOWER_LEVEL_NODE_ALIGNMENT)){i.putBoolean("ExpandBottomUp",T===e.Alignment.CHILDREN_ABOVE_PARENT)}}if(l){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||A.hasPropertyChanged(e.QHierarchyProperties.QY_LOWER_LEVEL_NODE_ALIGNMENT)){var R;var E=o.getModelCapabilities();if(e.notNull(E)&&E.supportsExpandBottomUp()){R=e.QInAConverter.lookupLowerLevelNodeAlignmentInA(T)}else{R=e.QInAConverter.lookupLowerLevelNodeAlignmentInA2(T)}i.putString("LowerLevelNodeAlignment",R)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.getHierarchyManager().hasPropertyChanged(e.QHierarchyProperties.QY_NODE_CONDENSATION)){var C=o.hasNodeCondensation();i.putBoolean("NodeCondensation",C)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||A.hasPropertyChanged(e.QHierarchyProperties.QY_MEMBER_OF_POSTED_NODE_VISIBILITY)){var Q=o.getMemberOfPostedNodeVisibility();var M=e.QInAConverter.lookupResultSetVisibilityInA(Q);i.putString("MemberOfPostedNodeVisibility",M)}}if(o.isHierarchyNavigationDeltaMode()){i.putBoolean("HierarchyNavigationDeltaMode",true)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){this.exportHierarchyLevels(i,o,p)}var D=o.getHierarchy();if(e.notNull(D)&&D.isCustomHierarchy()){i.putBoolean("IsTransient",true);i.putStringNotNull("Description",D.getHierarchyDescription())}}return i}}return null};e.QInARepoHierarchy.prototype.exportHierarchyLevels=function(t,r,i){if(r.getModelCapabilities().supportsDimensionHierarchyLevels()){var n=r.getHierarchies();if(e.notNull(n)){var o=n.getObjectsIterator();while(o.hasNext()){var a=o.next();if(e.XString.isEqual(a.getHierarchyName(),i)){e.QInARepoHierarchy.exportLevels(t,a);return}}}}};e.QInARepoMemberAbstract=function(){};e.QInARepoMemberAbstract.prototype=new e.QInARepository;e.QInARepoMemberAbstract.prototype._ff_c="QInARepoMemberAbstract";e.QInARepoMemberAbstract.importChartFormatting=function(t,r){r.setShowCellChart(t.getBooleanByKey("ShowCellChart"));r.setHideNumberForCellChart(t.getBooleanByKey("HideNumberForCellChart"));r.setCellChartBarColor(t.getStringByKey("CellChartBarColor"));r.setCellChartLineColor(t.getStringByKey("CellChartLineColor"));r.setCellChartType(e.QInAConverter.lookupCellChartType(t.getStringByKey("CellChartType")));r.setCellChartOrientation(e.QInAConverter.lookupCellChartOrientation(t.getStringByKey("CellChartOrientation")))};e.QInARepoMemberAbstract.importFormattingProperties=function(t,r,i){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("CurrencyPresentation")){i.setCurrencyPresentation(e.QInAConverter.lookupCurrencyPresentation(r.getStringByKey("CurrencyPresentation")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ScaleAndUnitPlacement")){i.setScaleAndUnitPlacement(e.QInAConverter.lookupScaleAndUnitPlacement(r.getStringByKey("ScaleAndUnitPlacement")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ScaleFormat")){i.setScaleFormat(e.QInAConverter.lookupScaleFormat(r.getStringByKey("ScaleFormat")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("SignPresentation")){i.setSignPresentation(e.QInAConverter.lookupSignPresentation(r.getStringByKey("SignPresentation")))}};e.QInARepoMemberAbstract.importInternalDataType=function(t,r){if(t.containsKey("DataTypeScale")){r.setDataTypeScale(t.getIntegerByKey("DataTypeScale"))}if(t.containsKey("DataTypePrecision")){r.setDataTypePrecision(t.getIntegerByKey("DataTypePrecision"))}if(t.containsKey("DataTypeInternal")){r.setDataTypeInternal(e.QInAConverter.lookupValueType(t.getStringByKey("DataTypeInternal")))}if(r.getDataTypeInternal()===null&&t.containsKey("[Measures].[SQLType]")){var i=t.getStringByKey("[Measures].[SQLType]");if(e.XStringUtils.isNotNullAndNotEmpty(i)){if(e.XString.startsWith(i,e.XStringUtils.concatenate2("DECIMAL","("))){r.setDataTypeInternal(e.XValueType.DECIMAL_FLOAT);var n=e.XString.size("DECIMAL")+1;var o=e.XString.indexOf(i,",");var a=e.XString.size(i)-1;if(o>n&&o<a){var l=e.XString.substring(i,n,o);var p=e.XString.substring(i,o+1,a);r.setDataTypePrecision(e.XInteger.convertFromString(l));r.setDataTypeScale(e.XInteger.convertFromString(p))}}else if(e.XString.isEqual(i,"INTEGER")){r.setDataTypeInternal(e.XValueType.INTEGER)}}}};e.QInARepoMemberAbstract.importExceptionAggregationProperties=function(t,r,i,n){if(i.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("ExceptionAggregationDimensions")){var o=e.PrUtils.asListOfString(r.getListByKey("ExceptionAggregationDimensions"));n._setExceptionAggregationDimensionNames(o)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ExceptionAggregation")){var a=r.getStringByKey("ExceptionAggregation");n.setExceptionAggregationType(e.AggregationType.lookupOrCreate(a))}}else if(n.getMemberType()===e.MemberType.BASIC_MEASURE||n.getMemberType()===e.MemberType.RESTRICTED_MEASURE){var l=r.getStringByKey("AggregationDimension");if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.setAggregationDimensionName(l)}}};e.QInARepoMemberAbstract.importMeasure=function(t,r,i,n,o){var a;a=e.QInARepoMemberAbstract.determineMemberType(t,r,o);if(r.containsKey("MemberType")&&e.isNull(a)){return null}var l;if(t.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&e.notNull(o)&&o.getDimensionType()===e.DimensionType.ACCOUNT){var p=r.getStringByKey("Name");var s=e.XStringUtils.concatenate2("].&[",e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);if(e.notNull(p)&&e.XString.startsWith(p,"[")&&e.XString.indexOf(p,s)!==-1){var u=e.XString.indexOf(p,e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);var g=e.XString.indexOfFrom(p,"]",u);var y=e.XString.substring(p,u,g);if(o.getPlaceholderIds().contains(y)){r.putString("Name",y)}}}if(a===e.MemberType.RESTRICTED_MEASURE){l=t.importRestrictedMeasure(r,o,i)}else if(a===e.MemberType.FORMULA){l=t.importFormulaMeasure(r,o,n)}else if(a===e.MemberType.MEASURE){l=t.importBasicMeasure(r,o,i)}else if(a===e.MemberType.VARIANCE){l=t.importVarianceMeasure(r,o,i)}else if(a===e.MemberType.EXCEPTION_AGGREGATION){l=t.importExceptionAggregationMeasure(r,o,i)}else if(a===e.MemberType.CURRENCY_MEASURE){l=t.importCurrencyMeasure(r,o,i)}else{l=null}return l};e.QInARepoMemberAbstract.determineMemberType=function(t,r,i){var n;var o=r.getStringByKey(i.getKeyField().getName());if(r.containsKey("MemberType")){var a=r.getStringByKeyExt("MemberType","Measure");n=e.QInAConverter.lookupMeasureStructureMemberType(a);if(e.isNull(n)){t.addError(e.ErrorCodes.INVALID_STATE,e.XStringUtils.concatenate3("MeasureStructure->MemberType unsupported: '",a,"'"));return null}}else if(i.getModelCapabilities().supportsCustomMeasuresInMetadata()&&e.notNull(o)){if(i.getDimensionType()===e.DimensionType.ACCOUNT){n=e.MemberType.MEASURE}else{n=i.getStructureMember(o).getMemberType();if(n===e.MemberType.BASIC_MEASURE){n=e.MemberType.MEASURE}}}else{if(r.containsKey("Formula")){n=e.MemberType.FORMULA}else{var l=r.getStructureByKey("Selection");if(e.isNull(l)){n=e.MemberType.MEASURE}else{n=l.containsKey("Operator")?e.MemberType.RESTRICTED_MEASURE:e.MemberType.MEASURE}}}return n};e.QInARepoMemberAbstract.importGenericRuntimeMemberProperties=function(t,r,i){if(r.getQueryModel().isBasicMeasureAggregationExportedInRepo()||!r.isCreatedFromMetadata()){var n=i.getBooleanByKeyExt("ModelDefinedMember",false);var o=n&&r.getQueryManager().getInitSettings().getProviderType()===e.ProviderType.LIST_REPORTING;if(!o){e.QInARepoMemberAbstract.importAggregationType(t,r,i)}}e.QInARepoMemberAbstract.importGenericMemberProperties(t,r,i);if(i.containsKey("DataType")){r.setDataType(e.QInAConverter.lookupValueType(i.getStringByKey("DataType")))}if(i.getByKey("isModelDefinedMember")!==null){r.setModelDefinedMember(i.getBooleanByKey("isModelDefinedMember"))}e.QInARepoMemberAbstract.importIgnoredExternalDimensions(t,r,i);if((r.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!r.isCreatedFromMetadata()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA)&&i.containsKey("SolveOrder")){r.setSolveOrder(i.getIntegerByKeyExt("SolveOrder",0))}if(i.containsKey("PreferredHierarchy")){r.setPreferredHierarchy(i.getStringByKey("PreferredHierarchy"))}e.QInARepoMemberAbstract.importAccountMemberProperties(i,r)};e.QInARepoMemberAbstract.importAccountMemberProperties=function(t,r){if(t.getStringByKey("AliasName")!==null){r.setAliasName(t.getStringByKey("AliasName"))}if(t.containsKey("AutoSignFlip")){r.setAutoSignFlip(t.getBooleanByKey("AutoSignFlip"))}if(t.getStringByKey("AccountType")!==null){r.setAccountType(e.AccountType.lookup(t.getStringByKey("AccountType")))}};e.QInARepoMemberAbstract.importGenericMemberProperties=function(t,r,i){if(r.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!r.isCreatedFromMetadata()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){if(i.containsKey("NumericShift")){r.setNumericShift(i.getIntegerByKey("NumericShift"))}if(i.containsKey("NumericScale")){r.setNumericScale(i.getIntegerByKey("NumericScale"))}if(i.containsKey("NumericPrecision")){r.setNumericPrecision(i.getIntegerByKey("NumericPrecision"))}}if(r.getModelCapabilities().supportsMemberVisibility()&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("Visibility"))){var n=i.getStringByKeyExt("Visibility","Visible");r.setResultVisibility(e.QInAConverter.lookupResultSetVisibility(n))}if(i.hasStringByKey("PostAggregation")||t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){var o=i.getStringByKey("PostAggregation");var a=e.QInAConverter.lookupAggregationType(o);r.setPostAggregationType(a)}if(i.containsKey("PostAggregationIgnoreHierarchy")){r.setPostAggregationIgnoreHierarchy(i.getBooleanByKey("PostAggregationIgnoreHierarchy"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("PostAggregationDimensions")){var l=e.PrUtils.asListOfString(i.getListByKey("PostAggregationDimensions"));r._setPostAggregationDimensions(l)}e.QInARepoMemberAbstract.importWindowFunction(r,i);if(i.containsKey("CurrencyTranslationName")){r.setCurrencyTranslationName(i.getStringByKey("CurrencyTranslationName"))}};e.QInARepoMemberAbstract.importWindowFunction=function(t,r){var i=r.getStructureByKey("WindowFunction");if(e.notNull(i)){var n=e.QWindowFunction._createWindowFunction(e.QInAConverter.lookupWindowFunctionType(i.getStringByKey("Name")));var o=i.getListByKey("DimensionsNotInPartition");if(e.notNull(o)){for(var a=0;a<o.size();a++){n.addNotInPartitionDimension(o.getStringAt(a))}}var l=i.getListByKey("SortDimensions");if(e.notNull(l)){for(var p=0;p<l.size();p++){var s=l.getStructureAt(p);var u=s.getStringByKey("Name");var g=e.QInAConverter.lookupSortDirection2(s.getStringByKey("Direction"));var y=e.QInAConverter.lookupNullsType(s.getStringByKey("Nulls"));n.addSortDimension(u,g,y)}}var m=i.getStructureByKey("Frame");if(e.notNull(m)){n.setFrame(e.QInAConverter.lookupFrameStartType(m.getStringByKey("Start")),m.getIntegerByKey("StartPreceding"),e.QInAConverter.lookupFrameEndType(m.getStringByKey("End")),m.getIntegerByKey("EndFollowing"))}t.setWindowFunction(n)}};e.QInARepoMemberAbstract.importCurrencyPlanningProperties=function(t,r){if(r.hasStringByKey("RateType")){t.setRateType(e.QInAConverter.lookupRateType(r.getStringByKey("RateType")))}if(r.hasStringByKey("UnitDimension")){t.setUnitDimensionName(r.getStringByKey("UnitDimension"))}if(r.hasStringByKey("UnitDimensionProperty")){t.setUnitDimensionProperty(r.getStringByKey("UnitDimensionProperty"))}};e.QInARepoMemberAbstract.importIgnoredExternalDimensions=function(t,r,i){if(t.capabilities.supportsIgnoreExternalDimensions()){if(i.hasStringByKey("IgnoreExternalDimensions")){var n=i.getStringByKey("IgnoreExternalDimensions");if(e.XString.isEqual(n,"All")){r.setIgnoreAllExternalDimensions(true)}}else if(i.containsKey("IgnoreExternalDimensions")){var o=i.getListByKey("IgnoreExternalDimensions");r._setExternalDimensionsToIgnore(e.PrUtils.asListOfString(o))}}var a=i.getStringByKey("OverrideText");if(e.XStringUtils.isNotNullAndNotEmpty(a)){r.setOverrideText(a)}};e.QInARepoMemberAbstract.importAggregationType=function(t,r,i){var n=i.getStringByKey("Aggregation");var o=r.getAggregationType();var a=t.mode===e.QModelFormat.INA_REPOSITORY_DELTA||i.getBooleanByKeyExt("ModelDefinedMember",false)&&r.getDimension()!==null&&r.getDimension().getDimensionType()!==e.DimensionType.ACCOUNT;if(e.XStringUtils.isNotNullAndNotEmpty(n)){var l=e.QInAConverter.lookupAggregationType(n);if(a){if(e.notNull(l)&&e.AggregationType.lookupStatisticalAggregation(l.getName())!==null&&!r.getModelCapabilities().supportsStatisticalAggregations()){l=null}if(e.isNull(l)){l=e.AggregationType.SUM}}r.setAggregationType(l)}else if(a){r.setAggregationType(o)}else{r.setAggregationType(null)}};e.QInARepoMemberAbstract.importGenericMemberAbstractProperties=function(e,t,r){if(r.containsKey("ModelDefinedMember")){t.setModelDefinedMember(r.getBooleanByKey("ModelDefinedMember"))}if(r.containsKey("MinimumDrillState")){var i=r.getListByKey("MinimumDrillState").getIterator();while(i.hasNext()){t.addMinimumDrillState(i.next().asString().getString())}}};e.QInARepoMemberAbstract.exportCustomMember=function(t,r){var i=r.getComponentType();var n=null;if(i===e.MemberType.FORMULA||i===e.MemberType.VARIANCE){n=e.PrFactory.createStructure();t.exportFormulaMeasure(r,n)}else if(i===e.MemberType.RESTRICTED_MEASURE){n=e.PrFactory.createStructure();t.exportRestrictedMeasure(r,n)}else if(i===e.MemberType.EXCEPTION_AGGREGATION){n=e.PrFactory.createStructure();t.exportExceptionAggregationMeasure(r,n)}else if(i===e.MemberType.CURRENCY_MEASURE){n=e.PrFactory.createStructure();t.exportCurrencyMeasure(r,n)}return n};e.QInARepoMemberAbstract.exportFormulaItem=function(t,r,i,n){var o=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||e.notNull(r)&&r.getModCounter()>0;if(o){e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,r,i,n,false,false)}};e.QInARepoMemberAbstract.exportFormulaItemSignFlip=function(t,r,i,n,o,a){if(e.notNull(r)){var l=r.getComponentType();if(l===e.OlapComponentType.FORMULA_CONSTANT){var p=r;var s=i.putNewStructure("Constant");var u=p.getUnit();if(e.XStringUtils.isNotNullAndNotEmpty(u)){s.putString("Unit",u)}var g=p.getCurrency();if(e.XStringUtils.isNotNullAndNotEmpty(g)){s.putString("Currency",g)}e.QInARepoMemberAbstract.exportFormulaConstantValue(t,s,p)}else if(l===e.OlapComponentType.FORMULA_OPERATION){var y=r;var m=i.putNewStructure("Function");m.putString("Name",y.getOperator().getDisplayString());var c=m.putNewList("Parameters");e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,y.getLeftSide(),c.addNewStructure(),n,o,a);e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,y.getRightSide(),c.addNewStructure(),n,o,a)}else if(l===e.OlapComponentType.FORMULA_FUNCTION){var S=r;var A=i.putNewStructure("Function");A.putString("Name",S.getFunctionName());var d=A.putNewList("Parameters");var I=S.size();for(var f=0;f<I;f++){e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,S.get(f),d.addNewStructure(),n,o,a)}var N=S.getSolveOrder();if(N!==0){i.putInteger("SolveOrder",N)}}else if(l===e.OlapComponentType.FORMULA_ITEM_MEMBER){var v=r;var T=n.getQueryModel();var R=v.getVariable();var E;if(e.isNull(R)){E=e.PrFactory.createStructure();var C;C=e.QInAExportUtil.getMeasureMemberNameByAlias(T,v.getMemberName(),t);E.putStringNotNull("Name",C);E.putStringNotNull("Dimension",v.getDimensionName());if(v.isBooked()){E.putString("NameIs","Booked")}else if(v.isPrevious()){E.putString("NameIs","Previous")}if(o){var Q=e.QInARepoMemberAbstract.exportMemberWithSignFlip(t,v);if(e.notNull(Q)){i.put("Function",Q.getByKey("Function"))}else{i.put("Member",E)}}else{i.put("Member",E)}}else{E=i.putNewStructure("Member");E.putString("Name",R.getName());E.putString("NameIs","Variable")}e.QInARepoMemberAbstract.exportDimensionContext(v,E)}else if(l===e.OlapComponentType.FORMULA_ITEM_ATTRIBUTE){var M=r;var D=i.putNewStructure("AttributeValue");D.putString("Name",M.getFieldName());e.QInARepoMemberAbstract.exportDimensionContext(M,D)}}};e.QInARepoMemberAbstract.exportDimensionContext=function(t,r){var i;i=t.getDimensionContext();if(e.notNull(i)){var n=r.putNewStructure("DimensionContext");n.putString("DatasetId",i.getQueryModel().getDatasetId());n.putString("DimensionName",i.getName())}};e.QInARepoMemberAbstract.exportMemberWithSignFlip=function(e,t){return null};e.QInARepoMemberAbstract.exportFormulaConstantValue=function(t,r,i){var n=i.getValue()===null&&!e.XCollectionUtils.hasElements(i.getStringValues());var o=i.getVariable();if(n&&e.isNull(o)){r.putNull("Value")}var a=i.getValueType();if(a===e.XValueType.INTEGER){r.putString("ValueType","Number");if(!n){r.putInteger("Value",i.getInteger())}}else if(a===e.XValueType.DOUBLE||a===e.XValueType.DECIMAL_FLOAT){r.putString("ValueType","Number");if(!n){r.putDouble("Value",i.getDouble())}}else if(a===e.XValueType.LONG){r.putString("ValueType","Number");if(!n){r.putLong("Value",i.getLong())}}else if(a===e.XValueType.STRING){r.putString("ValueType","String");r.putString("Value",i.getString())}else if(a===e.XValueType.BOOLEAN){r.putString("ValueType","Bool");if(!n){r.putBoolean("Value",i.getBoolean())}}else if(a===e.XValueType.DATE){r.putString("ValueType","Date");if(!n){r.putString("Value",i.getDate().toString())}}else if(a===e.XValueType.DATE_TIME){r.putString("ValueType","DateTime");if(!n){r.putString("Value",i.getDateTime().toString())}}else if(a.isSpatial()){r.putString("ValueType","String");if(!n){r.putString("Value",i.getGeometry().toWKT())}}else if(a===e.XValueType.TIMESPAN){r.putString("ValueType","String");if(!n){var l=i.getTimeSpan();r.putString("Value",l.toString())}}else if(a===e.XValueType.VARIABLE){e.QInAExportUtil.setNameIfNotNull(r,"Value",o);r.putString("ValueIs","Variable")}else if(a===e.XValueType.STRING_ARRAY){r.putString("ValueType","StringArray");if(!n){var p=i.getStringValues();var s=r.putNewList("Value");for(var u=0;u<p.size();u++){s.addString(p.get(u).getString())}}}};e.QInARepoMemberAbstract.signFlipMember=function(t){var r=t.getContext();var i=e.QFactory.createFormulaOperation(r);i.setOperator(e.MathOperator.MULT);i.setLeftSide(e.QFactory.createFormulaConstantWithIntValue(r,-1));i.setRightSide(t);return i};e.QInARepoMemberAbstract.getMemberForSignFlip=function(t){var r=t.getDimension();var i=t.getFilter();var n=r.getName();if(e.notNull(n)){if(i.isAll()){n=e.QInARepoMemberAbstract.getFirstMemberForSignFlip(n,i.getFilterRootElement())}var o=r.getStructureMemberByAliasOrMember(n);if(e.notNull(o)&&o.getComponentType()===e.MemberType.RESTRICTED_MEASURE&&o!==t){return e.QInARepoMemberAbstract.getMemberForSignFlip(o)}}return n};e.QInARepoMemberAbstract.getFirstMemberForSignFlip=function(t,r){var i=r.getChildren();while(i.hasNext()){var n=i.next();if(n.getOlapComponentType()===e.FilterComponentType.OPERATION){var o=n;if(e.XString.isEqual(t,o.getDimensionName())){return o.getLow().getValue().toString()}}var a=e.QInARepoMemberAbstract.getFirstMemberForSignFlip(t,n);if(e.notNull(a)){return a}}return null};e.QInARepoMemberAbstract.exportPostAggregation=function(t,r,i){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_POST_AGGERGATION_TYPE)){var n=r.getPostAggregationType();if(e.notNull(n)){i.putString("PostAggregation",e.QInAConverter.lookupAggregationTypeInA(n))}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_POST_AGGREGATION_IGNORE_HIERARCHY)){if(r.isPostAggregationIgnoringHierarchy()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){i.putBoolean("PostAggregationIgnoreHierarchy",r.isPostAggregationIgnoringHierarchy())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_POST_AGGREGATION_DIMENSIONS)){var o=r.getPostAggregationDimensions();if(o.hasElements()){var a=i.putNewList("PostAggregationDimensions");var l=o.getIterator();while(l.hasNext()){a.add(e.PrFactory.createString(l.next()))}}}};e.QInARepoMemberAbstract.exportWindowFunction=function(t,r){var i=t.getWindowFunction();if(e.notNull(i)){var n=r.putNewStructure("WindowFunction");n.putString("Name",e.QInAConverter.lookupWindowFunctionTypeInA(i.getType()));var o=i.getNotInPartitionDimensions();var a=n.putNewList("DimensionsNotInPartition");a.addAllStrings(o);var l=n.putNewList("SortDimensions");var p=i.getSortDimensions().getIterator();while(p.hasNext()){var s=p.next();var u=l.addNewStructure();u.putString("Name",s.getName());var g=s.getDirection();if(g===e.XSortDirection.ASCENDING||g===e.XSortDirection.DESCENDING){u.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(g))}var y=s.getNulls();if(e.notNull(y)&&y!==e.NullsType.NONE){u.putString("Nulls",e.QInAConverter.lookupNullsTypeInA(y))}}var m=i.getFrame();if(e.notNull(m)){var c=n.putNewStructure("Frame");c.putString("Start",e.QInAConverter.lookupFrameStartTypeInA(m.getStart()));c.putInteger("StartPreceding",m.getStartPreceding());c.putString("End",e.QInAConverter.lookupFrameEndTypeInA(m.getEnd()));c.putInteger("EndFollowing",m.getEndFollowing())}}};e.QInARepoMemberAbstract.exportCurrencyMetadataFusion=function(t,r,i){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_RATE_TYPE)){i.putStringNotNullAndNotEmpty("RateType",e.QInAConverter.lookupRateTypeInA(r.getRateType()))}i.putStringNotNullAndNotEmpty("UnitDimension",r.getUnitDimensionName());i.putStringNotNullAndNotEmpty("UnitDimensionProperty",r.getUnitDimensionProperty())};e.QInARepoMemberAbstract.exportFormattingProperties=function(t,r,i){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_CURRENCY_PRESENTATION)){i.putStringNotNullAndNotEmpty("CurrencyPresentation",e.QInAConverter.lookupCurrencyPresentationInA(r.getCurrencyPresentation()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_SCALE_AND_UNIT_PLACEMENT)){i.putStringNotNullAndNotEmpty("ScaleAndUnitPlacement",e.QInAConverter.lookupScaleAndUnitPlacementInA(r.getScaleAndUnitPlacement()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_SCALE_FORMAT)){i.putStringNotNullAndNotEmpty("ScaleFormat",e.QInAConverter.lookupScaleFormatInA(r.getScaleFormat()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_SIGN_PRESENTATION)){i.putStringNotNullAndNotEmpty("SignPresentation",e.QInAConverter.lookupSignPresentationInA(r.getSignPresentation()))}};e.QInARepoMemberAbstract.exportInternalDataType=function(t,r,i){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE_INTERNAL)){i.putStringNotNullAndNotEmpty("DataTypeInternal",e.QInAConverter.lookupValueTypeInA(r.getDataTypeInternal()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE_SCALE)){var n=r.getDataTypeScale();if(e.notNull(n)){i.putInteger("DataTypeScale",n.getInteger())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE_PRECISION)){var o=r.getDataTypePrecision();if(e.notNull(o)){i.putInteger("DataTypePrecision",o.getInteger())}}};e.QInARepoMemberAbstract.exportChartFormatting=function(t,r,i){if(r.isShowCellChart()){i.putBoolean("ShowCellChart",true)}if(r.isHideNumberForCellChart()){i.putBoolean("HideNumberForCellChart",true)}i.putStringNotNullAndNotEmpty("CellChartBarColor",r.getCellChartBarColor());i.putStringNotNullAndNotEmpty("CellChartLineColor",r.getCellChartLineColor());i.putStringNotNullAndNotEmpty("CellChartOrientation",e.QInAConverter.lookupCellChartOrientationInA(r.getCellChartOrientation()));i.putStringNotNullAndNotEmpty("CellChartType",e.QInAConverter.lookupCellChartTypeInA(r.getCellChartType()))};e.QInARepoMemberAbstract.prototype.getComponentType=function(){return e.MemberType.ABSTRACT_MEMBER};e.QInARepoMemberAbstract.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=o.getQueryModel();var l=n;if(e.isNull(l)){l=a.getMeasureDimension()}var p=e.QInARepoMemberAbstract.importMeasure(t,r,o,a,l);if(e.notNull(p)){e.QInARepoMemberAbstract.importGenericRuntimeMemberProperties(t,p,r);if(r.containsKey("PresentationSignReversal")){p.setPresentationSignReversal(r.getBooleanByKey("PresentationSignReversal"))}var s=r.getIntegerByKeyExt("[Measures].[Aggregation]",-1);var u=e.QInAConverter.lookupAggregationType2(s);if(e.notNull(u)){p.setAggregationType(u)}if((a.isBasicMeasureSettingsExportedInRepo()||!p.isCreatedFromMetadata()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA)&&!e.XCollectionUtils.hasElements(r.getStructureByKey("[Measures].[MemberDetails]"))){this.setPrecisionAndScale(t,r,a,p);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("UnitType")){p.setUnitType(e.QInAConverter.lookupUnitType(r.getStringByKey("UnitType")))}p.setUnitFixed(r.getStringByKey("UnitFixed"));p.setUnitName(r.getStringByKey("UnitName"));p.setUnitTextName(r.getStringByKey("UnitTextName"))}t.importExceptions(r,p);e.QInARepoMemberAbstract.importExceptionAggregationProperties(t,r,l.getQueryModel(),p);e.QInARepoMemberAbstract.importCurrencyPlanningProperties(p,r);e.QInARepoMemberAbstract.importInternalDataType(r,p);e.QInARepoMemberAbstract.importFormattingProperties(t,r,p);if(l.getDimensionType()===e.DimensionType.ACCOUNT&&r.containsKey("HierarchyDisplayKey")){var g=l.getHierarchyDisplayKeyField();if(e.notNull(g)){p.createAndAddFieldValueWithString(g,r.getStringByKey("HierarchyDisplayKey"))}}e.QInARepoMemberAbstract.importChartFormatting(r,p)}return p};e.QInARepoMemberAbstract.prototype.setPrecisionAndScale=function(e,t,r,i){var n=-1;var o=-1;if(e.isAbap(r)){n=t.getIntegerByKeyExt("Digits",-1);o=t.getIntegerByKeyExt("FractDigits",-1)}else{n=t.getIntegerByKeyExt("[Measures].[Digits]",-1);o=t.getIntegerByKeyExt("[Measures].[FractDigits]",-1)}if(n!==-1){i.setNumericPrecision(n)}if(o!==-1){i.setNumericScale(o)}};e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties=function(t,r,i){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QDimensionMemberProperties.QY_VISIBILITY)){var n=r.getResultVisibility();if(e.isNull(n)){n=e.ResultVisibility.VISIBLE}i.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(n))}i.putStringNotNullAndNotEmpty("CurrencyTranslationName",r.getCurrencyTranslationName());e.QInARepoMemberAbstract.exportCurrencyMetadataFusion(t,r,i);e.QInARepoMemberAbstract.exportInternalDataType(t,r,i);e.QInARepoMemberAbstract.exportFormattingProperties(t,r,i);var o=r.getMemberType();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_SOLVE_ORDER)){if((o===e.MemberType.BASIC_MEASURE||r.isSolveOrderOverDefined())&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_SOLVE_ORDER))){i.putInteger("SolveOrder",r.getSolveOrder())}}e.QInARepoMemberAbstract.exportChartFormatting(t,r,i);if(r.isModelDefinedMember()){i.putBoolean("isModelDefinedMember",true)}i.putStringNotNullAndNotEmpty("PreferredHierarchy",r.getPreferredHierarchy());i.putString("MemberType",e.QInAConverter.lookupMeasureStructureMemberTypeIna(o));if(o!==e.MemberType.EXCEPTION_AGGREGATION){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_SHIFT)){e.QInARepoUtils.setIntegerIfNotNull(i,"NumericShift",r.getNumericShift())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_SCALE)){e.QInARepoUtils.setIntegerIfNotNull(i,"NumericScale",r.getNumericScale())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_PRECISION)){e.QInARepoUtils.setIntegerIfNotNull(i,"NumericPrecision",r.getNumericPrecision())}e.QInARepoMemberAbstract.exportPostAggregation(t,r,i)}if(o!==e.MemberType.EXCEPTION_AGGREGATION&&o!==e.MemberType.CURRENCY_MEASURE){t.exportExceptions(r,i)}if(o!==e.MemberType.VARIANCE&&o!==e.MemberType.CURRENCY_MEASURE){var a=r.getExceptionAggregationType();if(e.notNull(a)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_EXCEPTION_AGGERGATION_TYPE)){i.putString("ExceptionAggregation",a.getName())}var l=i.putNewList("ExceptionAggregationDimensions");l.addAllStrings(r.getExceptionAggregationDimensions())}}if(o!==e.MemberType.BASIC_MEASURE&&o!==e.MemberType.EXCEPTION_AGGREGATION){e.QInARepoMemberAbstract.exportWindowFunction(r,i)}if(o===e.MemberType.RESTRICTED_MEASURE||o===e.MemberType.FORMULA||o===e.MemberType.EXCEPTION_AGGREGATION||o===e.MemberType.VARIANCE){this.exportProperties(r,i)}var p=r.getOverrideText();if(e.XStringUtils.isNotNullAndNotEmpty(p)){i.putString("OverrideText",p)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_IGNORE_EXTERNAL_DIMENSIONS)){if(r.isIgnoringAllExternalDimensions()){i.putString("IgnoreExternalDimensions","All")}else{var s=e.XListOfString.create();s.addAll(r.getIgnoredExternalDimensions());if(s.hasElements()){var u=i.putNewList("IgnoreExternalDimensions");u.addAllStrings(s)}}}};e.QInARepoMemberAbstract.prototype.exportProperties=function(e,t){if(e.getAliasName()!==null){t.putString("AliasName",e.getAliasName())}if(e.isAutoSignFlip()){t.putBoolean("AutoSignFlip",e.isAutoSignFlip())}if(e.getAccountType()!==null){t.putString("AccountType",e.getAccountType().getName())}};e.QInARepoMembersAll=function(){};e.QInARepoMembersAll.prototype=new e.QInARepository;e.QInARepoMembersAll.prototype._ff_c="QInARepoMembersAll";e.QInARepoMembersAll.prototype.getComponentType=function(){return e.OlapComponentType.MEMBERS};e.QInARepoMembersAll.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=r.getBooleanByKeyExt("IsDelta",false);var l=i;if(l.supportsCustomMembers()&&!a){l.removeCustomMembers()}var p=r.getListByKey("MembersRepo");if(e.isNull(p)){return null}var s=l.getStructureLayout();if(e.notNull(s)){if(!a&&t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){l.removeCustomMembers();var u=this.getMemberNamesFromMemberList(p);for(var g=s.size()-1;g>=0;g--){var y=s.get(g);if(y.isModelDefinedMember()&&(l.getDimensionType()===e.DimensionType.ACCOUNT||!u.contains(y.getName()))){continue}s.removeAt(g)}}var m=e.XListOfString.create();if(a){var c=l.getLoadedStructureMembers().getIterator();while(c.hasNext()){var S=c.next();if(e.notNull(S)&&(S.getMemberType()===e.MemberType.BASIC_MEASURE||S.isCreatedFromMetadata())){m.add(S.getName())}}}var A=p.size();for(var d=0;d<A;d++){var I=p.getStructureAt(d);var f=t.importStructureMember(l,I,o);if(e.notNull(f)){var N=f.getName();var v=l.getLoadedStructureMember(N);if(e.isNull(v)){if(a){l.addModellerMember(f);var T=l.getModellerMemberKeyRef(f.getStorageObjectName());l.addMeasure(T);m.removeElement(f.getName())}else{l.addMeasure(f)}}else if(a){l.addModellerMember(f);if(l.getStructureLayout().getByKey(f.getStorageObjectName())===null){l.getStructureLayout().addKeyRef(f)}m.removeElement(f.getName())}else{if(v!==f&&!v.isModelDefinedMember()){throw e.XException.createIllegalStateException(e.XStringUtils.concatenate3("Internal error: New member with same name not allowed: '",N,"'!"))}s.removeElement(v);s.add(v)}}}if(a&&m.size()>0){var R=m.getIterator();while(R.hasNext()){var E=R.next();var C=l.getLoadedStructureMember(E);if(e.notNull(C)){C.setModelDefinedMember(true);l.addModellerMember(C)}}}}return l};e.QInARepoMembersAll.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getOlapEnv();var l=o.getStructureLayout();if(e.notNull(l)){if(!o.supportsBasicStructureMembers()&&l.isEmpty()){return null}var p=i.putNewList("MembersRepo");var s=l.size();for(var u=0;u<s;u++){var g=l.get(u);if(e.isNull(g)){continue}var y=o.getQueryManager()!==null&&o.getQueryManager().isKeyRefSerializationEnabled();var m=e.notNull(a)&&a.getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(g,o.getQueryManager().getClientQueryObjectStorageName())!==null;if(y&&m){var c=t.exportStructureMember(g);p.add(c);continue}if(g.isReleased()){continue}var S=t.getOriginalMode()===e.QModelFormat.INA_REPOSITORY_DELTA;var A=o.getDimensionType()===e.DimensionType.ACCOUNT;if(g.isModelDefinedMember()&&!S){if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){if(A){continue}if(y){var d=p.addNewStructure();e.QInARepoUtils.addKeyRefStructure(t,g,d,o.getQueryManager());continue}}else if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)&&A){continue}}var I=!A&&!g.isCreatedFromMetadata();var f=A&&!g.isModelDefinedMember()&&!g.isCreatedFromMetadata();var N=I||f;var v=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||N||g.getModCounter()>0;if(v){var T;if(m){var R=e.QStructureMember.createMeasure(g.getMemberType(),o.getQueryModel(),o);R.copyFrom(g,null);T=t.exportStructureMember(R)}else{T=t.exportStructureMember(g)}p.add(T)}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoMembersAll.prototype.getMemberNamesFromMemberList=function(t){var r=e.XHashSetOfString.create();for(var i=0;i<t.size();i++){var n=t.getStructureAt(i);var o=n.getStructureByKey("KeyRef");var a=e.notNull(o)?o.getStringByKey("ObjectName"):n.getStringByKey("Name");if(e.XStringUtils.isNotNullAndNotEmpty(a)){r.add(a)}}return r};e.QInARepoModellerCurrencyTranslation=function(){};e.QInARepoModellerCurrencyTranslation.prototype=new e.QInARepository;e.QInARepoModellerCurrencyTranslation.prototype._ff_c="QInARepoModellerCurrencyTranslation";e.QInARepoModellerCurrencyTranslation.checkInitializeLegacyAccountCurrencyTranslation=function(t,r){if(t>0){var i=r.getQueryModel();var n=e.XListOfString.create();var o=i.getMeasureDimension();var a=0;var l=o.getStructureLayout().getIterator();while(l.hasNext()){var p=l.next();if(e.notNull(p)){var s=p.getName();if(e.XString.isEqual(s,"SignedDataLocal")){n.add("SignedDataLocal")}else if(e.XString.startsWith(s,"SignedDataOther")&&e.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember(s,i)&&a<t-1){n.add(s);a++}else if(e.XString.isEqual(s,"SignedData")&&e.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember("SignedData",i)){n.add("SignedData")}}}o.setPlaceholderIds(n)}};e.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember=function(t,r){var i=r.getVariable(e.XStringUtils.concatenate3(t,".","Currency"));return e.notNull(i)};e.QInARepoModellerCurrencyTranslation.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_CURRENCY_TRANSLATION};e.QInARepoModellerCurrencyTranslation.prototype.getTagName=function(){return"ModellerCurrencyTranslation"};e.QInARepoModellerCurrencyTranslation.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.notNull(a)&&e.notNull(r)){var l=r.getBooleanByKeyExt("PlanningParametersForCurrencyTranslation",false);var p=r.getBooleanByKeyExt("RateTypeFromAccount",false);var s=r.getIntegerByKeyExt("MaxNumberOfCurrencyTranslations",-1);a.setMaxNumberOfTranslations(s);a.setSupportsExtendedRateNameParameters(l);a.initializeLegacyCurrencyTranslation(!l);a.setDeriveRateTypeFromAccount(p);var u=r.getStringByKey("CurrencyTranslationTimeDimension");a.setCurrencyTranslationTimeDimensionName(u);a.setCurrencyRateTableId(r.getStringByKey("CurrencyRateTableId"));var g=r.getStringByKey("CurrencyDimension");if(e.XStringUtils.isNotNullAndNotEmpty(g)){a.setCurrencyDimensionName(g)}var y=r.getStringByKey("DefaultCurrency");if(e.XStringUtils.isNotNullAndNotEmpty(y)){a.setDefaultCurrency(y)}var m;var c;var S;var A=r.getListByKey("RateVersions");if(e.XCollectionUtils.hasElements(A)){a.clearAvailableRateVersions();c=A.size();for(m=0;m<c;m++){S=A.getStructureAt(m);a.addAvailableRateVersion(S.getStringByKey("Name"),S.getStringByKey("Text"))}}var d=r.getListByKey("Currencies");if(e.XCollectionUtils.hasElements(d)){a.clearAvailableCurrencies();c=d.size();for(m=0;m<c;m++){S=d.getStructureAt(m);a.addAvailableCurrency(S.getStringByKey("Name"),S.getStringByKey("Text"))}}var I=r.getListByKey("Categories");if(e.XCollectionUtils.hasElements(I)){a.clearAvailableCategories();c=I.size();for(m=0;m<c;m++){S=I.getStructureAt(m);a.addAvailableCategory(e.QInAConverter.lookupCategory(S.getStringByKey("Name")))}}var f=r.getListByKey("RateTypes");if(e.XCollectionUtils.hasElements(f)){a.clearAvailableRateTypes();c=f.size();for(m=0;m<c;m++){S=f.getStructureAt(m);a.addAvailableRateType(e.QInAConverter.lookupRateType(S.getStringByKey("Name")))}}e.QInARepoModellerCurrencyTranslation.checkInitializeLegacyAccountCurrencyTranslation(s,a);a.postImportInitialization();this.importModellerDefinedCurrencyTranslations(t,r,a,o)}return a};e.QInARepoModellerCurrencyTranslation.prototype.importModellerDefinedCurrencyTranslations=function(t,r,i,n){var o=r.getListByKey("CurrencyTranslations");if(e.XCollectionUtils.hasElements(o)){var a=o.size();for(var l=0;l<a;l++){var p=o.getStructureAt(l);var s=p.getStringByKey("Name");var u=p.getStringByKey("Description");var g=i.getMeasureCurrencyTranslation(s);if(e.isNull(g)){g=i.addNewMeasureCurrencyTranslationBase(s,u)}t.importCurrencyTranslationElement(p,g,n)}}};e.QInARepoModellerCurrencyTranslation.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoModellerDimensions=function(){};e.QInARepoModellerDimensions.prototype=new e.QInARepository;e.QInARepoModellerDimensions.prototype._ff_c="QInARepoModellerDimensions";e.QInARepoModellerDimensions.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_DIMENSIONS};e.QInARepoModellerDimensions.prototype.getTagName=function(){return"ModellerDimensions"};e.QInARepoModellerDimensions.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.notNull(r)){var l=r.getListByKey("Dimensions");var p=l.size();var s=a.getDimensionManagerBase();var u=s.getDimensionReferences();for(var g=0;g<p;g++){var y=l.getStructureAt(g);var m=y.getStringByKey("Name");if(u.containsKey(m)){var c=s.getDimensionByNameFromExistingMetadata(m);if(a.getSession().hasFeature(e.FeatureToggleOlap.SFX_HIDDEN_DIMENSIONS)&&y.getBooleanByKey("IsHidden")){var S=c.getFields().getIterator();while(S.hasNext()){s.removeField(S.next());s.removeDimension(c)}}}t.importDimension(y,a)}var A=a.getExtendedDimensions();var d=r.getListByKey("ExtendedDimensions");if(e.notNull(A)&&e.notNull(d)&&!d.isEmpty()){for(var I=0;I<A.size();I++){var f=A.get(I);var N=f.getName();for(var v=0;v<d.size();v++){var T=d.getStructureAt(v);if(e.XString.isEqual(N,T.getStringByKey("Name"))){f.setLocationType(e.LocationType.lookup(T.getStringByKey("LocationType")))}}}}}return a};e.QInARepoModellerDimensions.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoModellerMetadataProperties=function(){};e.QInARepoModellerMetadataProperties.prototype=new e.QInARepository;e.QInARepoModellerMetadataProperties.prototype._ff_c="QInARepoModellerMetadataProperties";e.QInARepoModellerMetadataProperties.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_METADATA_PROPERTIES};e.QInARepoModellerMetadataProperties.prototype.getTagName=function(){return"ModellerMetadataProperties"};e.QInARepoModellerMetadataProperties.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.isNull(r)){return i}var a=i;var l=a.getMetadataPropertiesBase();if(e.notNull(l)){l.putBoolean("HasUserDefinedMeasures",r.getBooleanByKeyExt("HasUserDefinedMeasures",false));l.putBoolean("IsPlanning",r.getBooleanByKeyExt("IsPlanning",false));l.putStringNotNull("LeadingStructure",r.getStringByKey("LeadingStructure"));l.putStringNotNull("MappedVersionDimension",r.getStringByKey("MappedVersionDimension"))}var p=r.getStringByKey("Mode");var s=r.getStringByKey("EpmQuerySourceName");var u=r.getStringByKey("EpmModelName");var g=r.getStringByKey("SchemaName");var y=r.getStringByKey("PackageName");var m=r.getStringByKey("Name");var c=r.getStringByKey("ShortDescription");var S=e.QDatasetEpmObject.create(p,u,s,g,y,m,c);a.setDatasetEpmObject(S);return a};e.QInARepoModellerMetadataProperties.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoModellerVariableManager=function(){};e.QInARepoModellerVariableManager.prototype=new e.QInARepository;e.QInARepoModellerVariableManager.prototype._ff_c="QInARepoModellerVariableManager";e.QInARepoModellerVariableManager.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_VARIABLES};e.QInARepoModellerVariableManager.prototype.getTagName=function(){return"ModellerVariables"};e.QInARepoModellerVariableManager.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.notNull(r)){var l=r.getListByKey("Variables");if(e.notNull(l)){var p=l.size();for(var s=0;s<p;s++){var u=l.getStructureAt(s);var g=u.getStringByKey("Name");var y=a.getVariableBaseByName(g);if(e.isNull(y)&&u.getBooleanByKeyExt("CustomVariable",false)){y=this.createCustomVariable(o,u);var m=u.getStringByKey("InputType");var c=e.XString.isEqual(m,"Mandatory")||e.XString.isEqual(m,"MandatoryNotInitial");y.setMandatory(c);var S=e.XString.isEqual(m,"Mandatory")||e.XString.isEqual(m,"Optional");y.setInitialValueAllowed(S)}if(e.notNull(y)){y.setProcessingType(e.QInAConverter.lookupProcessingType(u.getStringByKey("ProcessingType")));var A=y.getVariableType();if(A.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(u,y,o)}else if(A.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(u,y,o)}else if(A.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(u,y,o)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",g,"' of variable type '",A.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",g,"' was not found"))}}}}return a};e.QInARepoModellerVariableManager.prototype.createCustomVariable=function(t,r){var i=e.QFactory.createCustomVariableConfig(t.getQueryManager());var n=r.getListByKey("Options");var o=e.XList.create();if(!e.PrUtils.isListEmpty(n)){var a=n.size();for(var l=0;l<a;l++){var p=n.getStructureAt(l);var s=p.getStringByKey("Name");var u=p.getStringByKey("Text");o.add(e.XPairOfString.create(s,u))}}return i.createOptionsListVariable(r.getStringByKey("Name"),r.getStringByKey("Text"),o)};e.QInARepoModellerVariableManager.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoQuery=function(){};e.QInARepoQuery.prototype=new e.QInARepository;e.QInARepoQuery.prototype._ff_c="QInARepoQuery";e.QInARepoQuery.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QInARepoQuery.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i.getQueryModel();var l=r;var p=l.getListByKey("Queries");if(e.notNull(p)){l=p.getStructureAt(p.size()-1)}var s=l.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(s)){l=s.getStructureAt(s.size()-1)}if(e.notNull(l)&&l.containsKey("Analytics")){l=l.getStructureByKey("Analytics");if(e.notNull(l)&&l.containsKey("Definition")){l=l.getStructureByKey("Definition")}}if(e.notNull(l)&&l.containsKey("Definition")){l=l.getStructureByKey("Definition")}if(e.notNull(l)){var u=t.getOriginalMode()===e.QModelFormat.INA_CLONE_RENDERING;if(l.containsKey("ModellerDefinition")){l=l.getStructureByKey("ModellerDefinition");var g=a.isEventingStopped();if(!g){a.stopEventing()}a.setDeltaPhase(e.QDeltaOperationPhase.NOTE_MODELER_CHANGES);t.importModellerDimensions(l,a,a);t.importModellerDefinedVariables(l,a.getVariableManagerBase(),a);t.importModellerCurrencyTranslation(l,a.getCurrencyTranslationManagerBase(),a);t.importModellerMetadataProperties(l,a,a);t.importFormulaExceptionManager(l,a.getFormulaExceptionManagerBase(),a);a.finishModelerEventing();if(!g){a.resumeEventing()}return a}t.importDimensions(l,a,a);if(!u){t.importFilter(l,a.getFilterBase(),a);t.importExceptions(l,a);t.importQueryCells(l,a.getQueryCellManager(),a);t.importUniversalDisplayHierarchies(l,a.getUniversalDisplayHierarchiesBase(),a)}t.importCurrencyTranslationManager(l,a.getCurrencyTranslationManager(),a);t.importSortingManager(l,a.getSortingManagerBase(),a);t.importDrillManager(l,a.getDrillManager(),a);t.importCellContextManager(l,a.getCellContextManager(),a);t.importVisualizationManager(l,a.getVisualizationManager(),a);if(t.mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){t.importVariableManager(l,a.getVariableManagerBase(),a)}t.importQuerySettings(l,a);t.importDataCells(l,a);t.importConditionManager(l,a.getConditionManagerBase(),a);t.importFormulaExceptionManager(l,a.getFormulaExceptionManagerBase(),a);this.importPaging(t,l,a);var y=a.getResultStructureController();t.importComponent(null,l,y,a,a);var m=a.getQueryManager();if(e.notNull(m)){e.QInARepoOptions.importSuppressKeyfigureCalculation(l,m);e.QInARepoOptions.importLOVAbstractionLayerSettings(l,m);e.QInARepoOptions.importUniqueAxisProperties(l,m);m.setResultSetPersistanceTargetTable(l.getStringByKey("ResultSetPersistanceTable"));m.setResultSetPersistanceTargetSchema(l.getStringByKey("ResultSetPersistanceSchema"));m.setResultSetPersistenceIdentifier(l.getStringByKey("ResultSetPersistanceIdentifier"))}var c=l.getListByKey("PreQueries");if(e.notNull(c)){var S=null;var A=l.getStructureByKey("DataSource");if(e.notNull(A)){S=A.getStringByKey("System")}this.importPreQueries(t,a,c,S)}if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&a.isBlendingModel()){this.importBlendingSources(t,r,a)}a.setVersionDimensionValidationEnabled(l.getBooleanByKeyExt("IsVersionDimensionValidationEnabled",false))}return a};e.QInARepoQuery.prototype.importBlendingSources=function(t,r,i){var n=i.getBlendingSources();if(!e.XCollectionUtils.hasElements(n)){return}var o=e.PrUtils.getStructureProperty(r,"DataSource");var a=e.PrUtils.getListProperty(o,"Sources");if(e.PrUtils.isListEmpty(a)){return}for(var l=0;l<n.size();l++){var p=e.PrUtils.getStructureElement(a,l);var s=e.PrUtils.getStructureProperty(p,"DefiningContext");if(e.notNull(s)){var u=n.get(l).getQueryModel();u.stopEventing();u.deserializeFromElementExt(t.mode,s);u.resumeEventing()}}};e.QInARepoQuery.prototype.importPaging=function(t,r,i){var n=r.getStructureByKey("SubSetDescription");var o=i.getQueryManager();var a=t.mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(e.isNull(n)||!i.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||o.applyingStateOnQueryManager()&&!a){return}e.QInARepoOptions.importPaging(r,o)};e.QInARepoQuery.prototype.getInactiveCapabilities=function(t){var r=e.XHashMapByString.create();var i=e.FeatureToggle.getAllFeatureToggles();var n=i.getKeysAsIteratorOfString();while(n.hasNext()){r.put(n.next(),e.XBooleanValue.create(false))}var o=t.getSession().getFeatureToggles();if(e.notNull(o)){var a=o.getKeysAsIteratorOfString();while(a.hasNext()){r.put(a.next(),e.XBooleanValue.create(true))}}return r};e.QInARepoQuery.prototype.importPreQueries=function(t,r,i,n){var o=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.mode=t.getOriginalMode()}var a=e.XStringBuffer.create();var l=this.getInactiveCapabilities(r);var p=i.size();for(var s=0;s<p;s++){var u=i.getStructureAt(s);var g=u.getStructureByKey("Runtime");if(e.isNull(g)){g=u}var y=g.getStructureByKey("DataSource");a.clear();a.append(y.getStringByKey("Type")).append(":[");a.append(y.getStringByKey("SchemaName"));a.append("][");a.append(y.getStringByKey("PackageName"));a.append("][");a.append(y.getStringByKey("ObjectName")).append("]");var m=e.XCommandFactory.create(r.getApplication());var c=m.createCommand(e.CmdCreateQueryManager.CMD_NAME);c.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,r.getApplication());c.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,l);var S=y.getStringByKey("System");if(t.mode===e.QModelFormat.INA_REPOSITORY&&e.XString.isEqual(S,n)){S=r.getDataSource().getSystemName()}c.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,S);c.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,a.toString());var A=c.processCommand(e.SyncType.BLOCKING,null,null);t.addAllMessages(A);e.XObjectExt.release(c);if(A.isValid()){var d=A.getData().getResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();t.importPreQuery(u,d);e.QInARepoDataSource.importDs2(t,y,null,d.getDataSourceBase());var I=u.getStringByKey("ObjectName");var f=r.getPreQueryByName(I);if(e.isNull(f)){r.addPreQueryWithName(d,I)}}}t.mode=o};e.QInARepoQuery.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r.getQueryModel();var a=t.mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;t.exportUniversalDisplayHierarchies(o.getUniversalDisplayHierarchies(),i);var l=o.getDrillManager();t.exportDrillManager(l,i);if(!l.isValidatingContextFreeNavigations()){i.putBoolean("ValidateContextFreeNavigations",false)}var p=o.getCellContextManager();t.exportCellContextManager(p,i);var s=e.XMath.binaryAnd(n,e.QImExFlag.DATASOURCE)>0;if(s){e.QInARepoDataSource.exportDataSource(t,o.getDataSource(),o.getModelCapabilities().supportsRunAsUser(),i)}t.exportDimensions(o,i);t.exportSortingManager(o.getSortingManager(),i);t.exportCurrencyTranslationManager(o.getCurrencyTranslationManager(),i);t.exportDataCells(o,i);t.exportQuerySettings(o,i);if(!a){t.exportFilter(o.getFilter(),i);t.exportExceptions(o,i);t.exportQueryCells(o.getQueryCellManager(),i)}t.exportConditionManager(o.getConditionManager(),i);var u=e.XMath.binaryAnd(n,e.QImExFlag.VARIABLES)>0;if(u&&t.mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){if(o.isExportingVariables()||o.hasProcessingStep()){t.exportVariables(o.getVariableContainer(),i)}}var g=o.getQueryManager();if(o.isBatchModeForMicroCube()){i.putString("Name",g.getNameForMicroCubeUse())}t.exportFormulaExceptionManager(o.getFormulaExceptionManager(),i);this.exportPaging(i,o);e.QInARepoOptions.exportSuppressKeyfigureCalculation(i,g);e.QInARepoOptions.exportLOVAbstractionLayerSettings(i,g);e.QInARepoOptions.exportUniqueAxisProperties(i,g);var y=o.getPreQueries();if(e.notNull(y)){var m=y.size();if(m>0){var c=i.getListByKey("PreQueries");if(e.isNull(c)){c=i.putNewList("PreQueries")}var S=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.mode=t.getOriginalMode()}for(var A=0;A<m;A++){var d=y.get(A);var I=t.exportPreQuery(d.getObject());var f=d.getName();I.putString("ObjectName",f);c.add(I)}t.mode=S;i.put("PreQueries",c)}}var N=o.getResultStructureController();t.exportComponent(null,N,i,n);var v=e.InactiveCapabilityUtil.exportFeatureToggles(g.getSession().getFeatureToggles());i.putString("ExperimentalFeatures",v);i.putString("ResultSetPersistanceTable",g.getResultSetPersistenceTable());i.putString("ResultSetPersistanceSchema",g.getResultSetPersistenceSchema());i.putString("ResultSetPersistanceIdentifier",g.getResultSetPersistenceIdentifier());t.exportVisualizationManager(o.getVisualizationManager(),i);i.putBoolean("IsVersionDimensionValidationEnabled",o.isVersionDimensionValidationEnabled());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoQuery.prototype.exportPaging=function(t,r){var i=r.getQueryManager();if(!r.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||i.recordingStateOfQueryManager()){return}if(i.getOffsetColumns()>0||i.getOffsetRows()>0||i.getMaxColumns()>-1||i.getMaxRows()>-1){e.QInARepoOptions.exportPaging(t,i)}};e.QInARepoQueryCells=function(){};e.QInARepoQueryCells.prototype=new e.QInARepository;e.QInARepoQueryCells.prototype._ff_c="QInARepoQueryCells";e.QInARepoQueryCells.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_CELLS};e.QInARepoQueryCells.prototype.getTagName=function(){return"Cells"};e.QInARepoQueryCells.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.notNull(a)){a.clear();if(e.notNull(r)){var l=r.getListByKey("Elements");if(e.notNull(l)){var p=a.getDimensionAccessor();var s=l.size();for(var u=0;u<s;u++){var g=l.getStructureAt(u);var y=a.addNewQueryCell(g.getStringByKey("Name"));y.setCellCalculationMember(this.getMember(p,g));var m=g.getListByKey("Position");var c=m.size();for(var S=0;S<c;S++){var A=m.getStructureAt(S);y.addPosition(this.getMember(p,A))}}}}}return a};e.QInARepoQueryCells.prototype.getMember=function(e,t){var r=e.getDimensionByName(t.getStringByKey("DimensionName"));return r.getStructureMember(t.getStringByKey("MemberName"))};e.QInARepoQueryCells.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;if(e.notNull(o)&&o.size()>0){var a=i.putNewList("Elements");var l=o.getIterator();while(l.hasNext()){var p=l.next();var s=a.addNewStructure();s.putString("Name",p.getName());var u=p.getCellCalculationMember();s.putString("DimensionName",u.getDimension().getName());s.putString("MemberName",u.getName());var g=s.putNewList("Position");var y=p.getPositions();var m=y.getIterator();while(m.hasNext()){var c=m.next();var S=g.addNewStructure();S.putString("DimensionName",c.getDimensionName());S.putString("MemberName",c.getMemberName())}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoQueryManager=function(){};e.QInARepoQueryManager.prototype=new e.QInARepository;e.QInARepoQueryManager.prototype._ff_c="QInARepoQueryManager";e.QInARepoQueryManager.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MANAGER};e.QInARepoQueryManager.prototype.importComponentWithStructure=function(e,t,r,i,n){var o=r;return o};e.QInARepoQueryManager.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getQueryModel();if(e.notNull(a)){var l=t.exportQueryModel(a,true,true);i.put("QueryModel",l)}var p=o.getQueryServiceConfig();var s=t.exportComponent(e.OlapComponentType.QUERY_SERVICE_CONFIG,p,null,n);i.put("QueryServiceConfig",s);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,o,i,n)};e.QInARepoQuerySettings=function(){};e.QInARepoQuerySettings.prototype=new e.QInARepository;e.QInARepoQuerySettings.prototype._ff_c="QInARepoQuerySettings";e.QInARepoQuerySettings.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SETTINGS};e.QInARepoQuerySettings.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=o.getQueryModel();var l=e.PrUtils.getStringProperty(r,"Name");if(e.notNull(l)){a.setDefinitionName(l.getString())}var p=r.getStructureByKey("Query");t.importAxesSettings(p,a);var s=e.PrUtils.getListProperty(p,"AxesLayout");var u=e.PrUtils.getListSize(s,0);for(var g=0;g<u;g++){var y=e.PrUtils.getStructureElement(s,g);var m=e.AxisType.lookup(e.PrUtils.getStringValueProperty(y,"Axis",null));var c=a.getAxis(m);if(e.isNull(c)){continue}var S=e.PrUtils.getListProperty(y,"OrderedDimensionNames");if(e.isNull(S)){continue}var A=e.XListOfString.create();for(var d=0;d<e.PrUtils.getListSize(S,0);d++){var I=e.PrUtils.getStringElement(S,d);if(e.isNull(I)){continue}A.add(I.getString())}c.reOrderDimensions(A)}return a};e.QInARepoQuerySettings.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getDefinitionName();if(e.XStringUtils.isNotNullAndNotEmpty(a)){i.putString("Name",a)}var l=i.getStructureByKey("Query");if(e.isNull(l)){l=i.putNewStructure("Query")}t.exportAxesSettings(o,l);var p=l.putNewList("AxesLayout");var s=e.AxisType.getAll();for(var u=0;u<s.size();u++){var g=s.get(u);var y=o.getAxis(g);if(e.isNull(y)){continue}var m=y.getOrderedDimensionNames();if(e.isNull(m)){continue}var c=p.addNewStructure();c.putString("Axis",y.getName());var S=c.putNewList("OrderedDimensionNames");S.addAllStrings(m)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoServiceConfig=function(){};e.QInARepoServiceConfig.prototype=new e.QInARepository;e.QInARepoServiceConfig.prototype._ff_c="QInARepoServiceConfig";e.QInARepoServiceConfig.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SERVICE_CONFIG};e.QInARepoServiceConfig.prototype.newModelComponent=function(t,r,i,n){var o=e.QueryServiceConfig.create(t);return o};e.QInARepoServiceConfig.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=r.getStringByKey("System");if(e.XStringUtils.isNotNullAndNotEmpty(l)){a.setSystemName(l)}var p=r.getStructureByKey("DataSource");if(e.notNull(p)){var s=t.importDataSource(p);a.setDataSource(s)}return a};e.QInARepoServiceConfig.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putStringNotNullAndNotEmpty("System",o.getSystemName());var a=t.exportDataSource(o.getDataSource(),false);i.putNotNullAndNotEmpty("DataSource",a);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,o,i,n)};e.QInARepoSort=function(){};e.QInARepoSort.prototype=new e.QInARepository;e.QInARepoSort.prototype._ff_c="QInARepoSort";e.QInARepoSort.prototype.getComponentType=function(){return e.OlapComponentType.SORT_MANAGER};e.QInARepoSort.prototype.getTagName=function(){return"SortRepo"};e.QInARepoSort.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=r.getListByKey("Elements");var p=a.getSortingOperations();p.clear();if(e.notNull(l)){for(var s=0;s<l.size();s++){var u=l.getStructureAt(s);var g=t.importComponent(e.OlapComponentType.GENERIC_SORTING,u,null,a,o);if(e.notNull(g)){p.add(g)}}}return a};e.QInARepoSort.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=i.putNewList("Elements");var l=o.getSortingOperations();for(var p=0;p<l.size();p++){var s=l.get(p);var u=s.supportsDimension()&&s.getDimension()!==null&&s.getDimension().isUniversalDisplayHierarchyDimension();if(!u){a.add(t.exportComponent(null,s,null,n))}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoSortOperation=function(){};e.QInARepoSortOperation.prototype=new e.QInARepository;e.QInARepoSortOperation.prototype._ff_c="QInARepoSortOperation";e.QInARepoSortOperation.prototype.getComponentType=function(){return e.OlapComponentType.GENERIC_SORTING};e.QInARepoSortOperation.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=null;if(a.getOlapComponentType()===e.OlapComponentType.COMPONENT_LIST){a=a.getParent()}if(a.getOlapComponentType()===e.OlapComponentType.SORT_MANAGER){l=a}var p=null;if(e.notNull(l)){var s=o.getQueryModel();var u=s.getModelCapabilities();var g=r.getStringByKey("SortType");var y=e.QInAConverter.lookupSortType(g);if(y===e.SortType.FIELD){p=this.importFieldSorting(r,l,s)}else if(y===e.SortType.MEASURE){p=this.importMeasureSorting(r,l,s)}else if(y===e.SortType.DATA_CELL_VALUE||y===e.SortType.COMPLEX&&(u.supportsComplexSorting()||u.supportsDataCellSorting())){p=this.importPathSorting(t,r,o,l,s,y)}else{p=this.importDimensionSorting(r,l,s,y)}if(e.notNull(p)){this.importGenericSorting(t,r,p,s)}}return p};e.QInARepoSortOperation.prototype.importGenericSorting=function(t,r,i,n){var o=r.getStringByKey("Direction");if(e.notNull(o)){var a=e.QInAConverter.lookupSortDirection2(o);if(e.notNull(a)){i.setDirection(a)}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("PreserveGrouping")){if(i.supportsPreserveGrouping()&&i.supportsBreakGrouping()){i.setPreserveGrouping(r.getBooleanByKeyExt("PreserveGrouping",false))}}if(i.supportsDimension()){var l=r.getStringByKey("Dimension");if(e.isNull(l)){i.setDimension(null)}else{i.setDimension(n.getDimensionByNameFromExistingMetadata(l))}}if(i.getModelCapabilities().supportsLocaleSorting()){var p=r.getStructureByKey("Collator");if(e.notNull(p)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.containsKey("CaseSensitive")){i.setIsCaseSensitive(p.getBooleanByKeyExt("CaseSensitive",false))}i.setLocale(p.getStringByKeyExt("Locale",null))}}if(n.getModelCapabilities().supportsPersistedInA()&&t.getOriginalMode()===e.QModelFormat.INA_CLONE&&!r.getBooleanByKeyExt("ExportInPersistedInA",false)){i.setCreatedFromMetadata(true)}};e.QInARepoSortOperation.prototype.importDimensionSorting=function(t,r,i,n){var o=t.getStringByKey("Dimension");var a=i.getModelCapabilities();if(e.XStringUtils.isNotNullAndNotEmpty(o)){var l=i.getDimensionByNameFromExistingMetadata(o);if(a.supportsDimensionSorting(l,n)){var p=r.newDimensionSorting(l);if(e.isNull(p)){return null}if(n===e.SortType.FILTER){p.setSortByFilter()}else if(n===e.SortType.MEMBER_KEY){p.setSortByKey();p.setCustomSort(this.getCustomSortOrder(t));p.setCustomSortPosition(this.getCustomSortPosition(t))}else if(n===e.SortType.MEMBER_TEXT){p.setSortByText()}else if(n===e.SortType.HIERARCHY){p.setSortByHierarchy()}return p}}return null};e.QInARepoSortOperation.prototype.importPathSorting=function(t,r,i,n,o,a){var l=r.getListByKey("SortTuple");if(l.isEmpty()){return null}var p=e.XList.create();for(var s=0;s<l.size();s++){var u=l.getStructureAt(s);var g=u.getStringByKey("FieldName");var y=u.getStringByKey("Value");if(e.isNull(g)||e.isNull(y)){return null}var m=o.getFieldByName(g);if(e.isNull(m)){return null}var c=u.getStringByKey("Hierarchy");var S=e.QSelectValue._createDimensionElement2(i,m,c,y);e.QInAImportUtil.importComponentTagging(t,u,S);p.add(S)}var A=null;if(a===e.SortType.DATA_CELL_VALUE){A=n.newDataCellSorting(p)}else{A=n.newComplexSorting(p)}var d=r.getBooleanByKeyExt("SortOperationUsedInRanking",false);if(d){A.setUsedInRanking(true)}return A};e.QInARepoSortOperation.prototype.importMeasureSorting=function(t,r,i){var n=null;var o=i.getModelCapabilities();var a=t.getStringByKey("MeasureName");if(e.notNull(a)){var l=i.getMeasureDimension();var p=l.getStructureMember(a);if(e.isNull(p)){p=i.getOlapEnv().getClientQueryObjectManager().getStructuredMember(a,i.getQueryManager().getClientQueryObjectStorageName(),true)}if(e.notNull(p)&&o.supportsMeasureSorting()){n=r.newMeasureSorting(p)}var s=t.getStringByKey("StructureName");var u=i.getNonMeasureDimension();if(e.notNull(s)&&e.notNull(u)&&e.notNull(n)){n.setSecondaryMeasure(u.getStructureMember(s))}}return n};e.QInARepoSortOperation.prototype.importFieldSorting=function(t,r,i){var n=null;var o=t.getStringByKey("FieldName");if(e.notNull(o)){var a=i.getFieldByName(o);var l=i.getModelCapabilities();if(e.notNull(a)&&l.supportsFieldSorting(a)){n=r.newFieldSorting(a);n.setCustomSort(this.getCustomSortOrder(t));n.setCustomSortPosition(this.getCustomSortPosition(t))}}return n};e.QInARepoSortOperation.prototype.getCustomSortPosition=function(t){var r=t.getStringByKey("CustomSortPosition");if(e.notNull(r)){return e.CustomSortPosition.lookup(r)}return null};e.QInARepoSortOperation.prototype.getCustomSortOrder=function(t){var r=t.getListByKey("CustomSort");if(e.notNull(r)&&r.hasElements()){return e.PrUtils.asListOfString(r)}return null};e.QInARepoSortOperation.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getSortingType();this.exportGenericSorting(t,i,o,a);if(a===e.SortType.FIELD){this.exportFieldSorting(i,o)}else if(a===e.SortType.MEASURE){this.exportMeasureSorting(i,o)}else if(a===e.SortType.DATA_CELL_VALUE||a===e.SortType.COMPLEX){this.exportPathSorting(t,i,o)}else if(a===e.SortType.MEMBER_KEY){var l=o;this.exportCustomSortDetails(l.getCustomSort(),l.getCustomSortPosition(),i)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoSortOperation.prototype.exportFieldSorting=function(e,t){var r=t;e.putString("FieldName",r.getField().getName());this.exportCustomSortDetails(r.getCustomSort(),r.getCustomSortPosition(),e)};e.QInARepoSortOperation.prototype.exportCustomSortDetails=function(t,r,i){if(e.XCollectionUtils.hasElements(t)){var n=i.putNewList("CustomSort");var o=t.size();for(var a=0;a<o;a++){n.addString(t.get(a))}}e.QInARepoUtils.setNameIfNotNull(i,"CustomSortPosition",r)};e.QInARepoSortOperation.prototype.exportGenericSorting=function(t,r,i,n){var o=e.QInAConverter.lookupSortTypeInA(n);r.putString("SortType",o);var a=i.getDirection();if(a!==e.XSortDirection.DEFAULT_VALUE){r.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(a))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QSortProperties.QY_PRESERVE_GROUPING)){if(i.supportsPreserveGrouping()&&i.supportsBreakGrouping()){r.putBoolean("PreserveGrouping",i.isPreserveGroupingEnabled())}}if(i.getModelCapabilities().supportsLocaleSorting()){var l=e.PrFactory.createStructure();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QSortProperties.QY_CASE_SENSITIVE)){l.putBoolean("CaseSensitive",i.isCaseSensitive())}l.putString("Locale",i.getLocale());r.put("Collator",l)}if(i.supportsDimension()){e.QInARepoUtils.setNameIfNotNull(r,"Dimension",i.getDimension())}if(i.getModelCapabilities().supportsPersistedInA()&&t.getOriginalMode()===e.QModelFormat.INA_CLONE&&(!i.isCreatedFromMetadata()||i.getModCounter()>0)){r.putBoolean("ExportInPersistedInA",true)}};e.QInARepoSortOperation.prototype.exportPathSorting=function(t,r,i){var n=i;var o=r.putNewList("SortTuple");var a=n.getElementPath();var l=a.size();for(var p=0;p<l;p++){var s=a.get(p);var u=o.addNewStructure();u.putString("FieldName",s.getSelectField().getName());u.putString("Value",s.getSelectValue());var g=s.getSelectHierarchyName();if(e.XStringUtils.isNotNullAndNotEmpty(g)){u.putString("Hierarchy",g)}e.QInARepoUtils.extendStructureWithTagging(t,s,u)}if(i.usedInRanking()){r.putBoolean("SortOperationUsedInRanking",true)}};e.QInARepoSortOperation.prototype.exportMeasureSorting=function(t,r){var i=r;var n=i.getMeasure().getName();t.putString("MeasureName",n);e.QInARepoUtils.setNameIfNotNull(t,"StructureName",i.getSecondaryMeasure())};e.QInARepoTotals=function(){};e.QInARepoTotals.prototype=new e.QInARepository;e.QInARepoTotals.prototype._ff_c="QInARepoTotals";e.QInARepoTotals.prototype.getComponentType=function(){return e.OlapComponentType.TOTALS};e.QInARepoTotals.prototype.getTagName=function(){return"ResultStructureRepo"};e.QInARepoTotals.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(a.supportsTotals()){if(e.notNull(r)){var l=null;if(a.supportsResultAlignment()){var p=r.getStringByKey("ResultAlignment");if(e.XString.isEqual("Default",p)){a.restoreTotalsAlignment(e.RestoreAction.DEFAULT_VALUE,false)}else{l=e.QInAConverter.lookupAlignment(p);a.setResultAlignmentBase(l,false)}}if(l===e.ResultAlignment.STRUCTURE){var s=r.getListByKey("ResultStructure");if(e.notNull(s)){var u=a.getAdvancedResultStructure();u.clear();for(var g=0;g<s.size();g++){var y=s.getStructureAt(g);var m=y.getStringByKey("Result");var c=e.QInAConverter.lookupResultStructureElement(m);var S=e.QInAConverter.lookupResultSetVisibility(y.getStringByKey("Visibility"));u.addWithVisibility(c,S)}}}else{if(a.supportsResultVisibility()){var A=r.getStringByKey("Visibility");if(e.XString.isEqual("Default",A)){a.restoreTotalsVisibility(e.RestoreAction.DEFAULT_VALUE,false)}else{var d=r.getListByKey("VisibilitySettings");if(e.isNull(d)){var I=e.QInAConverter.lookupResultSetVisibility(A);a.setResultVisibility(I)}else{a.clearResultVisibilitySettings();for(var f=0;f<d.size();f++){var N=d.getStructureAt(f);var v=e.QInAConverter.lookupAlignment(N.getStringByKey("ResultAlignment"));var T=e.QInAConverter.lookupResultStructureElement(N.getStringByKey("Result"));var R=e.QInAConverter.lookupResultSetVisibility(N.getStringByKey("Visibility"));a.setResultVisibilityByElementAndAlignment(v,T,R)}}}}}}}return a};e.QInARepoTotals.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;if(!o.supportsTotals()){return null}var a=null;if(o.supportsResultAlignment()){if(o.isTotalsAlignmentOnDefault()){i.putString("ResultAlignment","Default")}else{a=o.getResultAlignment();i.putString("ResultAlignment",e.QInAConverter.lookupAlignmentInA(a))}}if(a===e.ResultAlignment.STRUCTURE){var l=i.putNewList("ResultStructure");var p=o.getTotalsStructure();if(e.notNull(p)){for(var s=0;s<p.size();s++){var u=p.get(s);var g=l.addNewStructure();var y=u.getResultStructureElement();g.putString("Result",e.QInAConverter.lookupResultStructureElementInA(y));var m=u.getResultVisibility();g.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(m))}}}else if(o.supportsResultVisibility()){if(o.isTotalsVisibilityOnDefault()){i.putString("Visibility","Default")}else{var c=e.QInAConverter.lookupResultSetVisibilityInA(o.getResultVisibility());i.putString("Visibility",c);var S=o.getResultVisibilitySettings();if(e.notNull(S)){var A=i.putNewList("VisibilitySettings");while(S.hasNext()){var d=S.next();var I=A.addNewStructure();I.putString("ResultAlignment",e.QInAConverter.lookupAlignmentInA(d.getAlignment()));I.putString("Result",e.QInAConverter.lookupResultStructureElementInA(d.getElement()));I.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(d.getVisibility()))}e.XObjectExt.release(S)}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoTranslationsManager=function(){};e.QInARepoTranslationsManager.prototype=new e.QInARepository;e.QInARepoTranslationsManager.prototype._ff_c="QInARepoTranslationsManager";e.QInARepoTranslationsManager.prototype.getComponentType=function(){return e.OlapComponentType.MEASURE_TRANSLATIONS};e.QInARepoTranslationsManager.prototype.getTagName=function(){return"Translations"};e.QInARepoTranslationsManager.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.notNull(r)&&r.containsKey("CurrencyTranslations")){var l=r.getListByKey("CurrencyTranslations");if(e.notNull(l)){if(e.notNull(a)&&e.XCollectionUtils.hasElements(l)){var p=l.size();for(var s=0;s<p;s++){var u=l.getStructureAt(s);var g=u.getStringByKey("Name");var y=u.getStringByKey("Description");var m=a.getMeasureCurrencyTranslation(g);if(e.isNull(m)){m=a.addNewMeasureCurrencyTranslationBase(g,y)}t.importCurrencyTranslationElement(u,m,o)}}}}return a};e.QInARepoTranslationsManager.prototype.exportComponentWithStructure=function(t,r,i,n){return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoUniversalDisplayHierarchies=function(){};e.QInARepoUniversalDisplayHierarchies.prototype=new e.QInARepository;e.QInARepoUniversalDisplayHierarchies.prototype._ff_c="QInARepoUniversalDisplayHierarchies";e.QInARepoUniversalDisplayHierarchies.assignAxesToHierarchies=function(t){var r=t.getQueryModel();var i=t.getHierarchies();var n=e.XList.create();var o=i.size();for(var a=0;a<o;a++){var l=i.get(a);if(l.getHierarchyDedicatedAxis()!==null){n.add(l.getHierarchyDedicatedAxis().getType());continue}var p=e.QInARepoUniversalDisplayHierarchies.getAxisForDimensionList(l.getDimensionNames(),r);if(e.notNull(p)&&!n.contains(p.getType())){l.setAxis(p);n.add(p.getType())}}for(var s=0;s<o;s++){var u=i.get(s);if(u.getHierarchyDedicatedAxis()===null){u.setAxis(n.contains(e.AxisType.ROWS)?r.getColumnsAxis():r.getRowsAxis())}}};e.QInARepoUniversalDisplayHierarchies.getAxisForDimensionList=function(t,r){if(e.notNull(t)){for(var i=0;i<t.size();i++){var n=r.getDimensionByNameFromExistingMetadata(t.get(i));if(e.notNull(n)){var o=n.getAxisType();if(o===e.AxisType.ROWS||o===e.AxisType.COLUMNS){return n.getAxis()}}}}return null};e.QInARepoUniversalDisplayHierarchies.importHierarchy=function(t,r,i){var n=null;var o=0;var a=e.Alignment.DEFAULT_VALUE;var l=false;var p=i.getStringByKey("Name");var s=r.getByName(p);if(e.notNull(s)){l=s.isActive();a=s.getAlignment();o=s.getInitialDrillLevel();n=s.getDimensionNames()}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("Active")){l=i.getBooleanByKeyExt("Active",false)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("LowerLevelNodeAlignment")){a=e.QInAConverter.lookupLowerLevelNodeAlignment(i.getStringByKey("LowerLevelNodeAlignment"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("InitialDrillLevel")){o=i.getIntegerByKey("InitialDrillLevel")}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("DimensionNames")){var u=i.getListByKey("DimensionNames");n=e.PrUtils.asListOfString(u)}var g=i.getBooleanByKeyExt("CustomDimensions",false);if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||e.notNull(s)){e.XObjectExt.assertNotNull(n);r.addHierarchy(p,n,o,a,l,null,g)}};e.QInARepoUniversalDisplayHierarchies.prototype.getComponentType=function(){return e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES};e.QInARepoUniversalDisplayHierarchies.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;if(e.notNull(r)){var l=r.getByKey("UniversalDisplayHierarchies");if(e.notNull(l)&&l.isList()){var p=l;var s=p.size();for(var u=0;u<s;u++){e.QInARepoUniversalDisplayHierarchies.importHierarchy(t,a,p.getStructureAt(u))}}}e.QInARepoUniversalDisplayHierarchies.assignAxesToHierarchies(a);return a};e.QInARepoUniversalDisplayHierarchies.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;if(e.notNull(o)){o.updateIncludedDimensions();var a=o.getChildrenIterator();if(a.hasNext()){var l=i.putNewList("UniversalDisplayHierarchies");while(a.hasNext()){var p=a.next();var s=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.getModCounter()>0;if(s){this.exportHierarchy(t,l,p)}}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoUniversalDisplayHierarchies.prototype.exportHierarchy=function(t,r,i){var n=true;if(i.isActive()&&!i.isDimensionListValid()){n=false;t.addError(e.ErrorCodes.INVALID_STATE,e.XStringUtils.concatenate3("Dimensions for UDH '",i.getName(),"' must be placed next to each other on the axis"))}var o=r.addNewStructure();o.putString("Name",i.getName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_INITIAL_DRILL_LEVEL)){o.putInteger("InitialDrillLevel",i.getInitialDrillLevel())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_LOWER_LEVEL_NODE_ALIGNMENT)){o.putString("LowerLevelNodeAlignment",i.getAlignment().getName())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_ACTIVE)){o.putBoolean("Active",i.isActive()&&n)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_DIMENSION_NAMES)){o.putNewList("DimensionNames").addAllStrings(i.getDimensionNames())}if(i.hasCustomDimensions()){o.putBoolean("CustomDimensions",true)}};e.QInARepoVarDimMember=function(){};e.QInARepoVarDimMember.prototype=new e.QInARepository;e.QInARepoVarDimMember.prototype._ff_c="QInARepoVarDimMember";e.QInARepoVarDimMember.prototype.getComponentType=function(){return e.VariableType.DIMENSION_MEMBER_VARIABLE};e.QInARepoVarDimMember.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=a.isEnforcedDynamicValue()&&a.getQueryManager().isSuppressExitVariableValuesInRepoMode();if(!l){var p=r.getStructureByKey("Selection");if(e.isNull(p)){a.setMemberFilter(null)}else{var s=t.importComponent(null,p,null,a,o);a.setMemberFilter(s)}}return a};e.QInARepoVarDimMember.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());var a=o.isEnforcedDynamicValue()&&o.getQueryManager().isSuppressExitVariableValuesInRepoMode();if(o.hasMemberFilter()&&!a){var l=o.getMemberFilter();var p=t.exportComponent(null,l,null,n);if(e.notNull(p)){i.put("Selection",p)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoVarOptionList=function(){};e.QInARepoVarOptionList.prototype=new e.QInARepository;e.QInARepoVarOptionList.prototype._ff_c="QInARepoVarOptionList";e.QInARepoVarOptionList.prototype.getComponentType=function(){return e.VariableType.OPTION_LIST_VARIABLE};e.QInARepoVarOptionList.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=r.getListByKey("OptionValues");if(e.notNull(l)){var p;if(a.supportsMultipleValues()){a.clear();var s=l.size();for(var u=0;u<s;u++){p=l.getStringAt(u);a.addString(p)}}else if(l.size()===1){p=l.getStringAt(0);a.setString(p)}}return a};e.QInARepoVarOptionList.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());var a=i.putNewList("OptionValues");if(o.supportsMultipleValues()){var l=o.getValues();var p=l.size();for(var s=0;s<p;s++){var u=l.get(s);a.addString(u.getString())}}else{var g=o.getCurrentOption();if(e.notNull(g)){a.addString(g.getName())}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoVarSimpleType=function(){};e.QInARepoVarSimpleType.prototype=new e.QInARepository;e.QInARepoVarSimpleType.prototype._ff_c="QInARepoVarSimpleType";e.QInARepoVarSimpleType.prototype.getComponentType=function(){return e.VariableType.SIMPLE_TYPE_VARIABLE};e.QInARepoVarSimpleType.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;a.clear();var l=a.getValueType();if(l.isNumber()){this.importNumericValues(t,r,a,l)}else if(l.isString()){this.importStringValues(r,a)}else if(l===e.XValueType.DATE){this.importDateValues(t,r,a)}else if(l===e.XValueType.TIME){this.importTimeValues(t,r,a)}else if(l===e.XValueType.DATE_TIME){this.importDateTimeValues(t,r,a)}else if(l===e.XValueType.BOOLEAN){this.importBooleanValues(r,a)}return a};e.QInARepoVarSimpleType.prototype.getFirstValueAsString=function(t){var r=t.get(0);if(e.notNull(r)&&r.isString()){return r.getString()}return null};e.QInARepoVarSimpleType.prototype.importDateTimeValues=function(t,r,i){var n=r.getListByKey("SimpleStringValues");if(e.notNull(n)){var o=n.size();if(i.supportsMultipleValues()){for(var a=0;a<o;a++){var l=n.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.addDateTime(e.XDateTime.createDateTimeFromStringWithFlag(l,t.capabilities.supportsSapDate()))}}}else if(o===1){var p=this.getFirstValueAsString(n);if(e.XStringUtils.isNotNullAndNotEmpty(p)){i.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(p,t.capabilities.supportsSapDate()))}}}};e.QInARepoVarSimpleType.prototype.importTimeValues=function(t,r,i){var n=r.getListByKey("SimpleStringValues");if(e.notNull(n)){var o=n.size();if(i.supportsMultipleValues()){for(var a=0;a<o;a++){var l=n.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.addTime(e.XTime.createTimeFromStringWithFlag(l,t.capabilities.supportsSapDate()))}}}else if(o===1){var p=this.getFirstValueAsString(n);if(e.XStringUtils.isNotNullAndNotEmpty(p)){i.setTime(e.XTime.createTimeFromStringWithFlag(p,t.capabilities.supportsSapDate()))}}}};e.QInARepoVarSimpleType.prototype.importDateValues=function(t,r,i){var n=r.getListByKey("SimpleStringValues");if(e.notNull(n)){var o=n.size();if(i.supportsMultipleValues()){for(var a=0;a<o;a++){var l=n.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.addDate(e.QInARepoUtils.createDate(l))}}}else if(o===1){var p=this.getFirstValueAsString(n);if(e.XStringUtils.isNotNullAndNotEmpty(p)){i.setDate(e.QInARepoUtils.createDate(p))}}}};e.QInARepoVarSimpleType.prototype.importStringValues=function(t,r){var i=t.getListByKey("SimpleStringValues");if(e.notNull(i)){var n=i.size();if(r.supportsMultipleValues()){for(var o=0;o<n;o++){r.addString(i.getStringAt(o))}}else if(n===1){var a=i.get(0);if(e.notNull(a)&&a.isString()){r.setString(a.getString())}}}};e.QInARepoVarSimpleType.prototype.importBooleanValues=function(t,r){var i=t.getListByKey("SimpleStringValues");if(e.notNull(i)){var n=i.size();if(r.supportsMultipleValues()){for(var o=0;o<n;o++){r.addBoolean(i.getBooleanAt(o))}}else if(n===1){var a=i.get(0);if(e.notNull(a)&&a.isBoolean()){r.setBoolean(a.asBoolean().getBoolean())}}}};e.QInARepoVarSimpleType.prototype.importNumericString=function(t,r,i){if(r===e.XValueType.INTEGER){t.addInteger(e.XInteger.convertFromString(i))}else if(r===e.XValueType.DOUBLE||r===e.XValueType.DECIMAL_FLOAT){t.addDouble(e.XDouble.convertFromString(i))}else if(r===e.XValueType.LONG){t.addLong(e.XLong.convertFromString(i))}};e.QInARepoVarSimpleType.prototype.addIntegerValue=function(t,r,i){if(t.capabilities.supportsNumberAsString()&&!e.QInAExportUtil.isNumberSafe(i)){r.addString(e.XInteger.convertToString(i))}else{r.addInteger(i)}};e.QInARepoVarSimpleType.prototype.addLongValue=function(t,r,i){if(t.capabilities.supportsNumberAsString()&&!e.QInAExportUtil.isNumberSafe(i)){r.addString(e.XLong.convertToString(i))}else{r.addLong(i)}};e.QInARepoVarSimpleType.prototype.addDoubleValue=function(t,r,i){if(t.capabilities.supportsNumberAsString()&&!e.QInAExportUtil.isNumberSafe(i)){r.addString(e.XDouble.convertToString(i))}else{r.addDouble(i)}};e.QInARepoVarSimpleType.prototype.importNumericValues=function(t,r,i,n){var o=r.getListByKey("SimpleNumericValues");if(e.notNull(o)){var a=o.size();if(i.supportsMultipleValues()){for(var l=0;l<a;l++){var p=o.get(l);if(t.capabilities.supportsNumberAsString()&&e.notNull(p)&&p.getType()===e.PrElementType.STRING){this.importNumericString(i,n,o.getStringAt(l));continue}if(n===e.XValueType.INTEGER){var s=o.getIntegerAt(l);i.addInteger(s)}else if(n===e.XValueType.DOUBLE||n===e.XValueType.DECIMAL_FLOAT){var u=o.getDoubleAt(l);i.addDouble(u)}else if(n===e.XValueType.LONG){var g=o.getLongAt(l);i.addLong(g)}}}else if(a===1){var y=o.get(0);if(e.notNull(y)&&y.isNumeric()){if(n===e.XValueType.INTEGER){i.setInteger(o.getIntegerAt(0))}else if(n===e.XValueType.DOUBLE){i.setDouble(o.getDoubleAt(0))}else if(n===e.XValueType.DECIMAL_FLOAT){i.setDecFloat(e.XDecFloatByDouble.create(o.getDoubleAt(0)))}else if(n===e.XValueType.LONG){i.setLong(o.getLongAt(0))}}}}};e.QInARepoVarSimpleType.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());var a=o.getValueType();var l;if(a===e.XValueType.STRING||a===e.XValueType.DATE||a===e.XValueType.TIME||a===e.XValueType.DATE_TIME||a===e.XValueType.BOOLEAN||a.isSpatial()){l=i.putNewList("SimpleStringValues")}else if(a===e.XValueType.DOUBLE||a===e.XValueType.DECIMAL_FLOAT||a===e.XValueType.LONG||a===e.XValueType.INTEGER){l=i.putNewList("SimpleNumericValues")}else{t.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate3("SimpleTypeVariable '",o.getName(),"' not exported"));return null}if(o.supportsMultipleValues()){this.exportMultipleValues(t,o,a,l)}else{this.exportSingleValue(t,o,a,l)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoVarSimpleType.prototype.exportSingleValue=function(t,r,i,n){var o=!r.hasValue()&&(t.getMode()===e.QModelFormat.INA_REPOSITORY||r.getQueryModel().getSystemType().isTypeOf(e.SystemType.VIRTUAL_INA));if(i===e.XValueType.INTEGER){if(o){n.addNull()}else{this.addIntegerValue(t,n,r.getInteger())}}else if(i===e.XValueType.LONG){if(o){n.addNull()}else{this.addLongValue(t,n,r.getLong())}}else if(i===e.XValueType.BOOLEAN){if(o){n.addNull()}else{n.addBoolean(r.getBoolean())}}else if(i===e.XValueType.DOUBLE||i===e.XValueType.DECIMAL_FLOAT){if(o){n.addNull()}else{this.addDoubleValue(t,n,r.getDouble())}}else{if(r.hasValue()){if(i===e.XValueType.STRING||i.isSpatial()){n.addString(r.getString())}else if(i===e.XValueType.DATE){n.addString(e.QInAExportUtil.dateTimeToString(t,r.getDate()))}else if(i===e.XValueType.TIME){n.addString(e.QInAExportUtil.dateTimeToString(t,r.getTime()))}else if(i===e.XValueType.DATE_TIME){n.addString(e.QInAExportUtil.dateTimeToString(t,r.getDateTime()))}}}};e.QInARepoVarSimpleType.prototype.exportMultipleValues=function(t,r,i,n){var o=r.getValues();var a=o.size();for(var l=0;l<a;l++){if(i===e.XValueType.INTEGER){var p=o.get(l);this.addIntegerValue(t,n,p.getInteger())}else if(i===e.XValueType.LONG){var s=o.get(l);this.addLongValue(t,n,s.getLong())}else if(i===e.XValueType.DOUBLE){var u=o.get(l);this.addDoubleValue(t,n,u.getDouble())}else if(i===e.XValueType.DECIMAL_FLOAT){var g=o.get(l);this.addDoubleValue(t,n,g.getDouble())}else if(i===e.XValueType.STRING){var y=o.get(l);n.addString(y.getString())}else if(i===e.XValueType.DATE||i===e.XValueType.TIME||i===e.XValueType.DATE_TIME){var m=o.get(l);n.addString(e.QInAExportUtil.dateTimeToString(t,m))}else if(i===e.XValueType.BOOLEAN){var c=o.get(l);n.addString(e.XBoolean.convertToString(c.getBoolean()))}else if(i.isSpatial()){var S=o.get(l);n.addString(S.toWKT())}}};e.QInaRepoCustomHierarchyDefinition=function(){};e.QInaRepoCustomHierarchyDefinition.prototype=new e.QInARepository;e.QInaRepoCustomHierarchyDefinition.prototype._ff_c="QInaRepoCustomHierarchyDefinition";e.QInaRepoCustomHierarchyDefinition.prototype.getComponentType=function(){return e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION};e.QInaRepoCustomHierarchyDefinition.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;var l=e.PrUtils.getListProperty(r,"Dimensions");var p=e.PrUtils.getStructureElement(l,0);if(e.notNull(p)){var s=p.getStringByKey("System");var u=p.getStringByKey("DataSource");var g=p.getStringByKey("Name");var y=p.getStructureByKey("Hierarchy");if(e.notNull(y)&&e.XStringUtils.isNotNullAndNotEmpty(s)&&e.XStringUtils.isNotNullAndNotEmpty(g)){var m=true;var c=t.getApplication();if(e.notNull(c)){var S=c.getSystemLandscape().getSystemDescription(s);m=e.isNull(S)?true:S.getSystemType().isTypeOf(e.SystemType.ABAP)}a=e.QCustomHierarchyDefinition.createByData(s,u,g,y.getStringByKey("Description"),m);a.setName(y.getStringByKey("Name"));this.addHierarchyNodesFromStructure(a,y.getStructureByKey("Nodes"))}}return a};e.QInaRepoCustomHierarchyDefinition.prototype.addHierarchyNodesFromStructure=function(t,r){var i=e.PrUtils.getListProperty(r,"NodeId");var n=e.PrUtils.getListProperty(r,"ParentId");var o=e.PrUtils.getListProperty(r,"NodeName");var a=e.PrUtils.getListProperty(r,"NodeType");var l=e.PrUtils.getListSize(i,0);if(e.PrUtils.isListEmpty(i)||e.PrUtils.isListEmpty(n)||e.PrUtils.isListEmpty(o)||e.PrUtils.isListEmpty(a)||n.size()!==l||o.size()!==l||a.size()!==l){return}var p=e.XSimpleMap.create();for(var s=0;s<l;s++){var u=i.getIntegerAt(s);var g=o.getStringAt(s);var y=a.getStringAt(s);var m=n.getIntegerAt(s);var c=m===-1?t:p.getByKey(e.XIntegerValue.create(m));if(e.notNull(c)){if(e.XString.isEqual(y,"1HIER_NODE_SIMPLE")){p.put(e.XIntegerValue.create(u),c.addTextNode(g))}else{c.addMemberNode(g)}}}e.XObjectExt.release(p)};e.QInaRepoCustomHierarchyDefinition.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=e.PrFactory.createStructure();a.putString("Name",o.getDimensionName());a.putString("System",o.getSystemName());a.putString("DataSource",o.getDataSourceName());var l=e.PrFactory.createStructure();this.exportCustomHierarchy(o,l);a.put("Hierarchy",l);var p=e.PrFactory.createStructure();var s=p.putNewList("Dimensions");s.add(a);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,p,n)};e.QInaRepoCustomHierarchyDefinition.prototype.exportCustomHierarchy=function(t,r){var i="";var n=t.getName();var o=t.getDescription();r.putString("Name",e.XStringUtils.isNotNullAndNotEmpty(n)?n:i);r.putString("Version",i);r.putString("DueDate",i);r.putString("Description",e.notNull(o)?o:i);r.putBoolean("IsTransient",true);r.putBoolean("NoRestNodes",true);r.put("Nodes",this.getHierarchyNodesAsStructure(t))};e.QInaRepoCustomHierarchyDefinition.prototype.getHierarchyNodesAsStructure=function(t){var r=e.PrFactory.createStructure();r.putNewList("NodeId");r.putNewList("NodeName");r.putNewList("Description");r.putNewList("NodeType");r.putNewList("ParentId");var i=t.getChildNodes();var n=i.size();for(var o=0;o<n;o++){this.addHierarchyElementToStructure(i.get(o),r,-1,t.getDimensionName())}return r};e.QInaRepoCustomHierarchyDefinition.prototype.addHierarchyElementToStructure=function(e,t,r,i){var n=t.getListByKey("NodeId");var o=n.size();n.addInteger(o);t.getListByKey("NodeName").addString(e.getName());t.getListByKey("ParentId").addInteger(r);if(e.isMemberElement()){t.getListByKey("Description").addString("");t.getListByKey("NodeType").addString(e.isNode()?i:"")}else{t.getListByKey("Description").addString(e.getName());t.getListByKey("NodeType").addString("1HIER_NODE_SIMPLE")}if(e.isNode()){var a=e.getChildNodes();var l=a.size();for(var p=0;p<l;p++){this.addHierarchyElementToStructure(a.get(p),t,o,i)}}};e.QInARepoTotalsLegacy=function(){};e.QInARepoTotalsLegacy.prototype=new e.QInARepository;e.QInARepoTotalsLegacy.prototype._ff_c="QInARepoTotalsLegacy";e.QInARepoTotalsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.TOTALS};e.QInARepoTotalsLegacy.prototype.getTagName=function(){return"ResultStructureBag"};e.QInARepoTotalsLegacy.prototype.importComponentWithStructure=function(t,r,i,n,o){if(t.mode!==e.QModelFormat.INA_DATA_REINIT){var a=i;if(a.supportsResultVisibility()){var l=this.getResultStructure(r);var p=this.importResultAlignment(a,l);a.restoreTotalsVisibility(e.RestoreAction.DEFAULT_VALUE,false);var s=l.getListByKey("ResultStructure");if(e.notNull(s)){var u;if(a.supportsAdvancedResultStructure()&&p===e.ResultAlignment.STRUCTURE){u=a.getAdvancedResultStructure();u.clear();if(e.isNull(p)){a.setResultAlignmentBase(e.ResultAlignment.STRUCTURE,true)}}else{u=null}var g=s.size();for(var y=0;y<g;y++){var m=s.getStructureAt(y);this.importResultStructureItem(m,a,u)}}}}return null};e.QInARepoTotalsLegacy.prototype.importResultAlignment=function(t,r){if(t.supportsResultAlignment()){t.restoreTotalsAlignment(e.RestoreAction.DEFAULT_VALUE,false);var i=r.getStringByKey("ResultAlignment");if(e.XStringUtils.isNullOrEmpty(i)){return null}var n=e.QInAConverter.lookupAlignment(i);t.setResultAlignmentBase(n,false);return n}return null};e.QInARepoTotalsLegacy.prototype.getResultStructure=function(t){var r=t.getStructureByKey("ResultStructureBag");if(e.isNull(r)){r=t.getStructureByKey("DefaultResultStructure");if(e.isNull(r)){return t}}return r};e.QInARepoTotalsLegacy.prototype.importResultStructureItem=function(t,r,i){var n=t.getStringByKey("Result");var o;if(e.XString.isEqual(n,"Members")){o=e.ResultStructureElement.MEMBERS}else if(e.XString.isEqual(n,"Total")){o=e.ResultStructureElement.TOTAL}else if(e.XString.isEqual(n,"TotalIncludedMembers")){o=e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS}else if(e.XString.isEqual(n,"TotalRemainingMembers")){o=e.ResultStructureElement.TOTAL_REMAINING_MEMBERS}else{return}var a=t.getStringByKey("Visibility");var l=e.QInAConverter.lookupResultSetVisibility(a);if(e.isNull(i)){r.setResultVisibilityByElement(o,l)}else{i.addWithVisibility(o,l)}};e.QInARepoTotalsLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoTableCellReferenceScope=function(){};e.QInARepoTableCellReferenceScope.prototype=new e.QInARepository;e.QInARepoTableCellReferenceScope.prototype._ff_c="QInARepoTableCellReferenceScope";e.QInARepoTableCellReferenceScope.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_CELL_REFERENCE_SCOPE};e.QInARepoTableCellReferenceScope.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(i)&&e.notNull(r)&&i.getComponentType()===e.OlapComponentType.VISUALIZATION_CELL_REFERENCE_SCOPE){var a=i;a.setMatchOrdinal(r.getIntegerByKeyExt("MatchOrdinal",0));a.setMatchModulo(r.getIntegerByKeyExt("MatchModulo",0));a.setMatchSkipFirst(r.getIntegerByKeyExt("MatchSkipFirst",0));a.setMatchSkipLast(r.getIntegerByKeyExt("MatchSkipLast",0));a.setMatchFullHeaderSection(r.getBooleanByKeyExt("MatchHeaderSectionFull",false));a.setMatchHeaderSectionStart(r.getBooleanByKeyExt("MatchHeaderSectionStart",false));a.setMatchHeaderSectionEnd(r.getBooleanByKeyExt("MatchHeaderSectionEnd",false));a.setMatchHeaderFieldsSectionEnd(r.getBooleanByKeyExt("MatchHeaderFieldsSectionEnd",false));a.setMatchFullDataSection(r.getBooleanByKeyExt("MatchDataSectionFull",false));a.setMatchDataSectionStart(r.getBooleanByKeyExt("MatchDataSectionStart",false));a.setMatchDataSectionEnd(r.getBooleanByKeyExt("MatchDataSectionEnd",false));this.importHeaderReferences(a,r);this.importAxisPaths(a,r)}return i};e.QInARepoTableCellReferenceScope.prototype.importHeaderReferences=function(t,r){var i=r.getListByKey("HeaderSectionInfo");if(e.notNull(i)){t.clearHeaderSectionInfos();for(var n=0;n<i.size();n++){var o=i.getStructureAt(n);var a=t.addNewHeaderSectionInfo();a.setAxisLevel(o.getIntegerByKeyExt("AxisLevel",-1));a.setHeaderName(o.getStringByKey("HeaderName"));a.setDimensionLevel(o.getBooleanByKeyExt("HeaderDimension",false));a.setAttributeLevel(o.getBooleanByKeyExt("HeaderAttribute",false));a.setFieldLevel(o.getBooleanByKeyExt("HeaderField",false));a.setUniqueUnitsLevel(o.getBooleanByKeyExt("HeaderUnits",false));a.setExactHeaderLevel(o.getBooleanByKeyExt("HeaderLevelExact",false));a.setSectionEnd(this.getTriStateBool(o,"SectionEnd"));a.setSectionStart(this.getTriStateBool(o,"SectionStart"))}}};e.QInARepoTableCellReferenceScope.prototype.importAxisPaths=function(t,r){var i=r.getListByKey("ReferencePaths");if(e.notNull(i)){t.clearAxisPaths();for(var n=0;n<i.size();n++){var o=t.addNewAxisPath();var a=i.getStructureAt(n);o.setMatchingDimensionSectionStart(this.getTriStateBool(a,"MatchDimensionSectionStart"));o.setMatchingDimensionSectionEnd(this.getTriStateBool(a,"MatchDimensionSectionEnd"));o.setMatchingHierarchyLevelStart(this.getTriStateBool(a,"MatchHierarchyLevelStart"));o.setMatchingHierarchyLevelEnd(this.getTriStateBool(a,"MatchHierarchyLevelEnd"));var l=a.getListByKey("ReferencePathElements");if(e.XCollectionUtils.hasElements(l)){for(var p=0;p<l.size();p++){var s=o.addNewElement();var u=l.getStructureAt(p);s.setAxisLevel(u.getIntegerByKeyExt("AxisLevel",-1));s.setHierarchyLevel(u.getIntegerByKeyExt("HierarchyLevel",-1));s.setExactHierarchyLevel(u.getBooleanByKeyExt("HierarchyLevelExact",false));s.setHierarchyLevelName(u.getStringByKey("HierarchyLevelName"));s.setIncludeHeaderBand(this.getTriStateBool(u,"IncludeHeaderBand"));s.setIncludeTotalsBand(this.getTriStateBool(u,"IncludeTotalsBand"));s.setIncludeSubDrills(this.getTriStateBool(u,"IncludeSubdrills"));s.setMatchesExpanded(this.getTriStateBool(u,"Expanded"));s.setMatchesLeaves(this.getTriStateBool(u,"Leaves"));s.setMatchesTotals(this.getTriStateBool(u,"Totals"));if(u.hasStringByKey("LowerLevelNodeAlignment")){s.setHierarchyAlignment(e.QInAConverter.lookupLowerLevelNodeAlignment(u.getStringByKey("LowerLevelNodeAlignment")))}e.XCollectionUtils.forEach(u.getListByKey("MemberNames"),function(e){s.addMemberName(e.asString().getString())}.bind(this));s.setDimensionName(u.getStringByKey("DimensionName"));if(u.hasStringByKey("DimensionType")){var g=e.XComponentType.lookupComponentType(u.getStringByKey("DimensionType"));if(e.notNull(g)&&g!==e.OlapComponentType.ABSTRACT_DIMENSION&&g.isTypeOf(e.OlapComponentType.ABSTRACT_DIMENSION)){s.setDimensionType(g)}}if(u.hasStringByKey("FieldName")){s.setFieldName(u.getStringByKey("FieldName"))}if(u.hasStringByKey("AttributeName")){s.setAttributeName(u.getStringByKey("AttributeName"))}if(u.hasStringByKey("SemanticType")){s.setSemanticType(u.getStringByKey("SemanticType"))}if(u.hasStringByKey("PresentationType")){s.setPresentationType(e.QInAConverter.lookupPresentationType(u.getStringByKey("PresentationType")))}}}}}};e.QInARepoTableCellReferenceScope.prototype.getTriStateBool=function(t,r){var i=e.TriStateBool._DEFAULT;if(t.containsKey(r)){i=t.getBooleanByKey(r)?e.TriStateBool._TRUE:e.TriStateBool._FALSE}return i};e.QInARepoTableCellReferenceScope.prototype.exportComponentWithStructure=function(t,r,i,n){if(e.notNull(i)&&e.notNull(r)){var o=r;i.putInteger("MatchOrdinal",o.getMatchOrdinal());i.putInteger("MatchModulo",o.getMatchModulo());i.putInteger("MatchSkipFirst",o.getMatchSkipFirst());i.putInteger("MatchSkipLast",o.getMatchSkipLast());i.putBoolean("MatchHeaderSectionFull",o.isMatchFullHeaderSection());i.putBoolean("MatchHeaderSectionStart",o.isMatchHeaderSectionStart());i.putBoolean("MatchHeaderSectionEnd",o.isMatchHeaderSectionEnd());i.putBoolean("MatchHeaderFieldsSectionEnd",o.isMatchHeaderFieldsSectionEnd());i.putBoolean("MatchDataSectionFull",o.isMatchFullDataSection());i.putBoolean("MatchDataSectionStart",o.isMatchDataSectionStart());i.putBoolean("MatchDataSectionEnd",o.isMatchDataSectionEnd());this.exportHeaderSectionInfo(o,i);this.exportAxisPaths(o,i)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoTableCellReferenceScope.prototype.exportHeaderSectionInfo=function(t,r){var i=t.getHeaderSectionInfos();if(e.XCollectionUtils.hasElements(i)){var n=r.putNewList("HeaderSectionInfo");for(var o=0;o<i.size();o++){var a=i.get(o);var l=n.addNewStructure();l.putInteger("AxisLevel",a.getAxisLevel());l.putString("HeaderName",a.getHeaderName());l.putBoolean("HeaderDimension",a.isDimensionLevel());l.putBoolean("HeaderAttribute",a.isAttributeLevel());l.putBoolean("HeaderField",a.isFieldLevel());l.putBoolean("HeaderUnits",a.isUniqueUnitsLevel());l.putBoolean("HeaderLevelExact",a.isExactHeaderLevel());this.setTriStateBool(l,"SectionStart",a.isSectionStart());this.setTriStateBool(l,"SectionEnd",a.isSectionEnd())}}};e.QInARepoTableCellReferenceScope.prototype.exportAxisPaths=function(t,r){var i=t.getAxisPaths();if(e.XCollectionUtils.hasElements(i)){var n=r.putNewList("ReferencePaths");for(var o=0;o<i.size();o++){var a=i.get(o);var l=n.addNewStructure();this.setTriStateBool(l,"MatchDimensionSectionStart",a.isMatchingDimensionSectionStart());this.setTriStateBool(l,"MatchDimensionSectionEnd",a.isMatchingDimensionSectionEnd());this.setTriStateBool(l,"MatchHierarchyLevelStart",a.isMatchingHierarchyLevelStart());this.setTriStateBool(l,"MatchHierarchyLevelEnd",a.isMatchingHierarchyLevelEnd());var p=l.putNewList("ReferencePathElements");for(var s=0;s<a.size();s++){var u=p.addNewStructure();var g=a.get(s);u.putInteger("AxisLevel",g.getAxisLevel());u.putInteger("HierarchyLevel",g.getHierarchyLevel());u.putBoolean("HierarchyLevelExact",g.isExactHierarchyLevel());u.putString("HierarchyLevelName",g.getHierarchyLevelName());this.setTriStateBool(u,"IncludeHeaderBand",g.isIncludeHeaderBand());this.setTriStateBool(u,"IncludeTotalsBand",g.isIncludeTotalsBand());this.setTriStateBool(u,"IncludeSubdrills",g.isIncludeSubDrills());this.setTriStateBool(u,"Expanded",g.isMatchesExpanded());this.setTriStateBool(u,"Leaves",g.isMatchesLeaves());this.setTriStateBool(u,"Totals",g.isMatchesTotals());u.putString("LowerLevelNodeAlignment",e.QInAConverter.lookupLowerLevelNodeAlignmentInA(g.getHierarchyAlignment()));u.putNewList("MemberNames").addAllStrings(g.getMemberNames());u.putStringNotNullAndNotEmpty("DimensionName",g.getDimensionName());u.putStringNotNullAndNotEmpty("AttributeName",g.getAttributeName());u.putStringNotNullAndNotEmpty("FieldName",g.getFieldName());u.putStringNotNullAndNotEmpty("SemanticType",g.getSemanticType());u.putStringNotNullAndNotEmpty("PresentationType",e.QInAConverter.lookupPresentationTypeInA(g.getPresentationType()));if(g.getDimensionType()!==null){u.putString("DimensionType",g.getDimensionType().getName())}}}}};e.QInARepoTableCellReferenceScope.prototype.setTriStateBool=function(t,r,i){if(i===e.TriStateBool._TRUE){t.putBoolean(r,true)}else if(i===e.TriStateBool._FALSE){t.putBoolean(r,false)}};e.QInARepoTableDefinition=function(){};e.QInARepoTableDefinition.prototype=new e.QInARepository;e.QInARepoTableDefinition.prototype._ff_c="QInARepoTableDefinition";e.QInARepoTableDefinition.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION};e.QInARepoTableDefinition.prototype.getTagName=function(){return"TableDefinition"};e.QInARepoTableDefinition.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(i)&&e.notNull(r)&&i.getComponentType()===e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION){var a=i;var l;if(r.containsKey("DimensionColorPalette")){a.clearDimensionColorPalette();var p=r.getListByKey("DimensionColorPalette");for(l=0;l<p.size();l++){a.addDimensionColor(p.getStringAt(l))}}a.setDimensionToColorate(r.getStringByKey("DimensionToColorate"));if(a.getName()===null){a.setName(r.getStringByKey("Name"))}if(a.getText()===null){a.setText(r.getStringByKey("Text"))}this.importFormattingStyles(a,r);this.importDataPointStyles(a,r);this.importScopedStyles(t,a,r);this.importLayeredRectangularStyles(t,a,r);this.importTableMarkups(t,a,r);this.importIndexBasedCellDimensions(a,r);if(r.containsKey("StripeDataColumns")){a.setStripeDataColumns(this.getTriStateBool(r,"StripeDataColumns"))}if(r.containsKey("StripeDataRows")){a.setStripeDataRows(this.getTriStateBool(r,"StripeDataRows"))}if(r.containsKey("FreezeHeaderRows")){a.setFreezeHeaderRows(this.getTriStateBool(r,"FreezeHeaderRows"))}if(r.containsKey("FreezeHeaderColumns")){a.setFreezeHeaderColumns(this.getTriStateBool(r,"FreezeHeaderColumns"))}a.setFreezeUpToRow(r.getIntegerByKeyExt("FreezeUpToRow",-1));a.setFreezeUpToColumn(r.getIntegerByKeyExt("FreezeUpToColumn",-1));if(r.containsKey("ShowFreezeLines")){a.setShowFreezeLines(this.getTriStateBool(r,"ShowFreezeLines"))}if(r.containsKey("ShowGrid")){a.setShowGrid(this.getTriStateBool(r,"ShowGrid"))}if(r.containsKey("ShowDimensionTitles")){a.setShowDimensionTitles(this.getTriStateBool(r,"ShowDimensionTitles"))}if(r.hasStringByKey("TableHeaderCompactionType")){a.setTableHeaderCompactionType(e.TableHeaderCompactionType.lookup(r.getStringByKey("TableHeaderCompactionType")))}if(r.getBooleanByKey("ShowRepetitiveMemberNames")){a.setRepetitiveMemberNames(true)}if(r.getBooleanByKey("MergeRepetitiveMemberCells")){a.setMergeRepetitiveMemberCells(true)}if(r.hasStringByKey("TableMemberHeaderHandling")){a.setTableMemberHeaderHandling(e.TableMemberHeaderHandling.lookup(r.getStringByKey("TableMemberHeaderHandling")))}if(r.containsKey("ShowCoordinateHeader")){a.setShowCoordinateHeader(this.getTriStateBool(r,"ShowCoordinateHeader"))}a.setHeaderColor(r.getStringByKey("HeaderColor"));a.setTotalLevel6Color(r.getStringByKey("TotalLevel6Color"));a.setTotalLevel5Color(r.getStringByKey("TotalLevel5Color"));a.setTotalLevel4Color(r.getStringByKey("TotalLevel4Color"));a.setTotalLevel3Color(r.getStringByKey("TotalLevel3Color"));a.setTotalLevel2Color(r.getStringByKey("TotalLevel2Color"));a.setTotalLevel1Color(r.getStringByKey("TotalLevel1Color"));a.setTotalLevel0Color(r.getStringByKey("TotalLevel0Color"));a.setTitle(r.getStringByKey("Title"));a.setSerializeLinkedDefinitions(r.getBooleanByKeyExt("LinkedDefinitionsSerialize",false));if(r.containsKey("LinkedDefinitionPriorities")){var s=r.getListByKey("LinkedDefinitionPriorities");e.XCollectionUtils.forEach(s,function(e){var t=e.asStructure();if(t.containsKey("Priority")){a.putLinkedDefinitionPriority(t.getStringByKey("Key"),t.getIntegerByKey("Priority"))}}.bind(this))}if(r.containsKey("LinkedDefinitionNames")){var u=r.getListByKey("LinkedDefinitionNames");e.XCollectionUtils.forEach(u,function(e){var t=e.asStructure();a.putLinkedDefinitionName(t.getStringByKey("Key"),t.getStringByKey("Name"))}.bind(this))}if(r.containsKey("LinkedDefinitions")){var g=r.getListByKey("LinkedDefinitions");e.XCollectionUtils.forEach(g,function(r){var i=r.asStructure();var n=e.QTableDefinition.create(o,null,null,a.getProtocolBindingType(),a.getSemanticBindingType());n.deserializeFromElementExt(t.mode,i.getByKey("TableDefinition"));a.putLinkedDefinition(i.getStringByKey("Key"),n)}.bind(this))}}return i};e.QInARepoTableDefinition.prototype.importIndexBasedCellDimensions=function(t,r){var i;var n=r.getListByKey("FixedPixelRowHeights");if(e.XCollectionUtils.hasElements(n)){t.clearFixedPixelRowHeights();for(i=0;i<n.size();i++){var o=n.getStructureAt(i);t.setFixedPixelHeightForRow(o.getIntegerByKey("Index"),o.getIntegerByKey("Height"))}}var a=r.getListByKey("FixedPixelColumnWidths");if(e.XCollectionUtils.hasElements(a)){t.clearFixedPixelColumnWidths();for(i=0;i<a.size();i++){var l=a.getStructureAt(i);t.setFixedPixelWidthForColumn(l.getIntegerByKey("Index"),l.getIntegerByKey("Width"))}}};e.QInARepoTableDefinition.prototype.importFormattingStyles=function(t,r){var i=r.getListByKey("Styles");if(e.notNull(i)){t.clearFormattingStyles()}if(e.XCollectionUtils.hasElements(i)){for(var n=0;n<i.size();n++){var o=i.getStructureAt(n);var a=o.getStringByKey("Name");var l=o.getStringByKey("Text");var p=t.addNewFormattingStyle(a,l);var s=o.getListByKey("CellTypeRestrictions");if(e.XCollectionUtils.hasElements(s)){e.XCollectionUtils.forEach(s,function(e){this.importCellTypeRestriction(p.addNewCellTypeRestriction(),e.asStructure())}.bind(this))}p.setAlertColor(o.getStringByKey("AlertColor"));p.setAlertSymbol(e.AlertSymbol.lookup(o.getStringByKey("AlertSymbol")));p.setAlertColor(o.getStringByKey("AlertColor"));this.importStyledLine(p.getStyledLineLeft(),o.getStructureByKey("LeftLine"));this.importStyledLine(p.getStyledLineRight(),o.getStructureByKey("RightLine"));this.importStyledLine(p.getStyledLineTop(),o.getStructureByKey("TopLine"));this.importStyledLine(p.getStyledLineBottom(),o.getStructureByKey("BottomLine"));p.setFillColor(o.getStringByKey("FillColor"));if(o.containsKey("FontBold")){p.setFontBold(o.getBooleanByKey("FontBold"))}if(o.containsKey("FontItalic")){p.setFontItalic(o.getBooleanByKey("FontItalic"))}if(o.containsKey("FontUnderline")){p.setFontUnderline(o.getBooleanByKey("FontUnderline"))}if(o.containsKey("FontStrikeThrough")){p.setFontStrikeThrough(o.getBooleanByKey("FontStrikeThrough"))}p.setFontSize(o.getDoubleByKeyExt("FontSize",0));p.setFontFamily(o.getStringByKey("FontFamily"));p.setFontColor(o.getStringByKey("FontColor"));p.setCellChartBarColor(o.getStringByKey("CellChartBarColor"));p.setCellChartLineColor(o.getStringByKey("CellChartLineColor"));p.setVerticalAlignment(e.CellAlignmentVertical.lookup(o.getStringByKey("VerticalAlignment")));p.setHorizontalAlignment(e.CellAlignmentHorizontal.lookup(o.getStringByKey("HorizontalAlignment")));p.setPriority(o.getIntegerByKey("Priority"));p.setBackgroundPatternType(e.LinePatternType.lookup(o.getStringByKey("PatternType")));p.setBackgroundContent(o.getStringByKey("PatternBackground"))}}};e.QInARepoTableDefinition.prototype.importCellTypeRestriction=function(t,r){if(e.notNull(r)){t.setExpanded(this.getTriStateBool(r,"Expanded"));t.setInHierarchy(this.getTriStateBool(r,"InHierarchy"));t.setInTotalsContext(this.getTriStateBool(r,"Totals"));t.setMerged(this.getTriStateBool(r,"Merged"));t.setRepeatedMemberName(this.getTriStateBool(r,"RepeatedMemberName"));var i=r.getListByKey("CellTypes");if(e.XCollectionUtils.hasElements(i)){e.XStream.of(i).map(function(e){return e.asString()}.bind(this)).filterNullValues().map(function(t){return e.TableCellType.lookup(t.getString())}.bind(this)).filterNullValues().forEach(function(e){t.addCellType(e)}.bind(this))}}};e.QInARepoTableDefinition.prototype.importStyledLine=function(t,r){if(e.notNull(r)){t.setWidth(r.getDoubleByKeyExt("LineWidth",-1));t.setColor(r.getStringByKey("LineColor"));t.setPatternBackground(r.getStringByKey("PatternBackground"));t.setPatternWidth(r.getDoubleByKeyExt("PatternWidth",0));t.setPatternColor(r.getStringByKey("PatternColor"));t.setPatternBorderColor(r.getStringByKey("PatternBorderColor"));t.setPatternType(e.LinePatternType.lookup(r.getStringByKey("PatternType")));t.setLineStyle(e.TableLineStyle.lookup(r.getStringByKey("LineStyle")));t.setLeftPadding(r.getDoubleByKeyExt("PaddingLeft",-1));t.setRightPadding(r.getDoubleByKeyExt("PaddingRight",-1));t.setTopPadding(r.getDoubleByKeyExt("PaddingTop",-1));t.setBottomPadding(r.getDoubleByKeyExt("PaddingBottom",-1))}};e.QInARepoTableDefinition.prototype.importDataPointStyles=function(t,r){var i=r.getListByKey("DataPointStyle");if(e.notNull(i)){t.clearDataPointStyles()}if(e.XCollectionUtils.hasElements(i)){for(var n=0;n<i.size();n++){var o=i.getStructureAt(n);var a=t.addNewDataPointStyle(o.getStringByKey("Name"),o.getStringByKey("Text"));a.setFormattingStyleName(o.getStringByKey("Style"));a.setExceptionName(o.getStringByKey("ExceptionName"));a.setAlertLevelMin(e.QInAConverter.lookupAlertLevel(o.getIntegerByKeyExt("AlertLevelMin",-1)));a.setAlertLevelMax(e.QInAConverter.lookupAlertLevel(o.getIntegerByKeyExt("AlertLevelMax",-1)));a.setValueSign(e.ValueSign.get(o.getStringByKey("ValueSign")));a.setPriority(o.getIntegerByKey("Priority"))}}};e.QInARepoTableDefinition.prototype.importScopedStyles=function(t,r,i){var n=i.getListByKey("ScopedStyle");if(e.notNull(n)){r.clearScopedStyles()}if(e.XCollectionUtils.hasElements(n)){for(var o=0;o<n.size();o++){var a=n.getStructureAt(o);var l=r.addNewScopedStyle(a.getStringByKey("Name"),a.getStringByKey("Text"));l.setStyleName(a.getStringByKey("Style"));t.importVisualizationCellReferenceScope(a.getStructureByKey("ColumnsScope"),l.getOrthogonalColumnsScope(),r);t.importVisualizationCellReferenceScope(a.getStructureByKey("RowsScope"),l.getOrthogonalRowsScope(),r)}}};e.QInARepoTableDefinition.prototype.importLayeredRectangularStyles=function(t,r,i){var n=i.getListByKey("LayeredRectangularStyle");if(e.notNull(n)){r.clearLayeredRectangularStyles()}if(e.XCollectionUtils.hasElements(n)){for(var o=0;o<n.size();o++){var a=n.getStructureAt(o);var l=r.addNewLayeredRectangularStyle(a.getStringByKey("Name"),a.getStringByKey("Text"));l.setStyleName(a.getStringByKey("Style"));t.importVisualizationCellReferenceScope(a.getStructureByKey("ColumnsScope"),l.getColumnsScope(),r);t.importVisualizationCellReferenceScope(a.getStructureByKey("RowsScope"),l.getRowsScope(),r)}}};e.QInARepoTableDefinition.prototype.importTableMarkups=function(t,r,i){var n=i.getListByKey("TableMarkup");if(e.notNull(n)){r.clearTableMarkups()}if(e.XCollectionUtils.hasElements(n)){for(var o=0;o<n.size();o++){var a=n.getStructureAt(o);var l=r.addNewTableMarkup(a.getStringByKey("Name"),a.getStringByKey("Text"));l.setPageBreakHandlingBefore(e.TablePageBreakHandling.lookup(a.getStringByKey("PageBreakBefore")));l.setPageBreakHandlingAfter(e.TablePageBreakHandling.lookup(a.getStringByKey("PageBreakAfter")));l.setPageBreakHandlingInside(e.TablePageBreakHandling.lookup(a.getStringByKey("PageBreakInside")));l.setHide(a.getBooleanByKeyExt("Hidden",false));l.setCellHeight(a.getIntegerByKeyExt("Height",-1));l.setCellWidth(a.getIntegerByKeyExt("Width",-1));l.setCellHeightAddition(a.getIntegerByKeyExt("HeightAddition",0));l.setCellWidthAddition(a.getIntegerByKeyExt("WidthAddition",0));l.setPriority(a.getIntegerByKey("Priority"));t.importVisualizationCellReferenceScope(a.getStructureByKey("RowsScope"),l.getRowsScope(),r);t.importVisualizationCellReferenceScope(a.getStructureByKey("ColumnsScope"),l.getColumnsScope(),r);var p=a.getListByKey("ScopedStyle");if(e.notNull(p)){l.clearScopedStyles();e.XCollectionUtils.forEach(p,function(e){l.addScopedStyleName(e.asString().getString())}.bind(this))}var s=a.getListByKey("InsertedTupleBefore");this.importInsertedTuples(s,function(){l.clearTuplesBefore()}.bind(this),function(e,t){return l.addNewTupleBefore(e.getString(),t.getString())}.bind(this));var u=a.getListByKey("InsertedTupleAfter");this.importInsertedTuples(u,function(){l.clearTuplesAfter()}.bind(this),function(e,t){return l.addNewTuplesAfter(e.getString(),t.getString())}.bind(this))}}};e.QInARepoTableDefinition.prototype.importInsertedTuples=function(t,r,i){if(e.notNull(t)){r();for(var n=0;n<t.size();n++){var o=t.getStructureAt(n);var a=i(e.XStringValue.create(o.getStringByKey("Name")),e.XStringValue.create(o.getStringByKey("Text")));a.setMerged(o.getBooleanByKeyExt("MergeCells",false));a.setCellHeight(o.getIntegerByKeyExt("Height",-1));a.setCellWidth(o.getIntegerByKeyExt("Width",-1));a.setFormattedText(o.getStringByKey("FormattedText"));var l=o.getListByKey("ScopedStyle");if(e.notNull(l)){e.XCollectionUtils.forEach(l,function(e){a.addScopedStyleName(e.asString().getString())}.bind(this))}}}};e.QInARepoTableDefinition.prototype.exportComponentWithStructure=function(t,r,i,n){if(e.notNull(i)&&e.notNull(r)){var o=r;i.putStringNotNullAndNotEmpty("Name",o.getName());i.putStringNotNullAndNotEmpty("Text",o.getText());var a=i.putNewList("DimensionColorPalette");if(e.XCollectionUtils.hasElements(o.getDimensionColorPalette())){a.addAllStrings(o.getDimensionColorPalette())}this.exportFormattingStyles(o,i);this.exportDataPointStyles(o,i);this.exportScopedStyles(t,o,i);this.exportLayeredRectangularStyles(t,o,i);this.exportTableMarkups(t,o,i);this.exportIndexBasedCellDimensions(o,i);i.putString("DimensionToColorate",o.getDimensionToColorate());this.setTriStateBool(i,"StripeDataRows",o.isStripeDataRows());this.setTriStateBool(i,"StripeDataColumns",o.isStripeDataColumns());this.setTriStateBool(i,"FreezeHeaderRows",o.isFreezeHeaderRows());this.setTriStateBool(i,"FreezeHeaderColumns",o.isFreezeHeaderColumns());i.putInteger("FreezeUpToRow",o.getFreezeUpToRow());i.putInteger("FreezeUpToColumn",o.getFreezeUpToColumn());this.setTriStateBool(i,"ShowFreezeLines",o.isShowFreezeLines());this.setTriStateBool(i,"ShowGrid",o.isShowGrid());this.setTriStateBool(i,"ShowDimensionTitles",o.isShowDimensionTitles());if(o.getTableHeaderCompactionType()!==null){i.putString("TableHeaderCompactionType",o.getTableHeaderCompactionType().getName())}if(o.getTableMemberHeaderHandling()!==null){i.putString("TableMemberHeaderHandling",o.getTableMemberHeaderHandling().getName())}this.setTriStateBool(i,"ShowCoordinateHeader",o.isShowCoordinateHeader());i.putStringNotNullAndNotEmpty("HeaderColor",o.getHeaderColor());i.putStringNotNullAndNotEmpty("TotalLevel6Color",o.getTotalLevel6Color());i.putStringNotNullAndNotEmpty("TotalLevel5Color",o.getTotalLevel5Color());i.putStringNotNullAndNotEmpty("TotalLevel4Color",o.getTotalLevel4Color());i.putStringNotNullAndNotEmpty("TotalLevel3Color",o.getTotalLevel3Color());i.putStringNotNullAndNotEmpty("TotalLevel2Color",o.getTotalLevel2Color());i.putStringNotNullAndNotEmpty("TotalLevel1Color",o.getTotalLevel1Color());i.putStringNotNullAndNotEmpty("TotalLevel0Color",o.getTotalLevel0Color());i.putStringNotNullAndNotEmpty("Title",o.getTitle());var l=o.getLinkedDefinitionPriorities();if(e.XCollectionUtils.hasElements(l)){var p=i.putNewList("LinkedDefinitionPriorities");e.XCollectionUtils.forEachString(l.getKeysAsReadOnlyListOfString(),function(e){var t=p.addNewStructure();t.putString("Key",e);t.putInteger("Priority",l.getByKey(e).getInteger())}.bind(this))}var s=o.getLinkedDefinitionNames();if(e.XCollectionUtils.hasElements(s)){var u=i.putNewList("LinkedDefinitionNames");e.XCollectionUtils.forEachString(s.getKeysAsReadOnlyListOfString(),function(e){var t=u.addNewStructure();t.putString("Key",e);t.putString("Name",s.getByKey(e))}.bind(this))}if(o.isSerializeLinkedDefinitions()){i.putBoolean("LinkedDefinitionsSerialize",true);var g=o.getLinkedDefinitions();if(e.XCollectionUtils.hasElements(g)){var y=i.putNewList("LinkedDefinitions");e.XCollectionUtils.forEachString(g.getKeysAsReadOnlyListOfString(),function(e){var r=y.addNewStructure();r.putString("Key",e);r.put("TableDefinition",g.getByKey(e).serializeToElement(t.mode))}.bind(this))}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoTableDefinition.prototype.exportIndexBasedCellDimensions=function(t,r){var i;var n;var o=t.getFixedPixelHeightsForRows();if(e.XCollectionUtils.hasElements(o)){var a=r.putNewList("FixedPixelRowHeights");i=o.getKeysAsIterator();while(i.hasNext()){n=i.next();var l=a.addNewStructure();l.putInteger("Index",n.getInteger());l.putInteger("Height",o.getByKey(n).getInteger())}}var p=t.getFixedPixelWidthsForColumns();if(e.XCollectionUtils.hasElements(p)){var s=r.putNewList("FixedPixelColumnWidths");i=p.getKeysAsIterator();while(i.hasNext()){n=i.next();var u=s.addNewStructure();u.putInteger("Index",n.getInteger());u.putInteger("Width",p.getByKey(n).getInteger())}}};e.QInARepoTableDefinition.prototype.exportFormattingStyles=function(t,r){var i=t.getFormattingStyles();if(e.XCollectionUtils.hasElements(i)){var n=r.putNewList("Styles");for(var o=0;o<i.size();o++){var a=i.get(o);var l=n.addNewStructure();l.putString("Name",a.getName());l.putString("Text",a.getText());var p=a.getCellTypeRestrictions();if(e.XCollectionUtils.hasElements(p)){var s=l.putNewList("CellTypeRestrictions");e.XCollectionUtils.forEach(p,function(e){this.exportCellTypeRestriction(e,s.addNewStructure())}.bind(this))}this.exportStyledLine(a.getStyledLineLeft(),l.putNewStructure("LeftLine"));this.exportStyledLine(a.getStyledLineRight(),l.putNewStructure("RightLine"));this.exportStyledLine(a.getStyledLineTop(),l.putNewStructure("TopLine"));this.exportStyledLine(a.getStyledLineBottom(),l.putNewStructure("BottomLine"));l.putString("FillColor",a.getFillColor());this.setTriStateBool(l,"FontBold",a.isFontBoldExt());this.setTriStateBool(l,"FontItalic",a.isFontItalicExt());this.setTriStateBool(l,"FontUnderline",a.isFontUnderlineExt());this.setTriStateBool(l,"FontStrikeThrough",a.isFontStrikeThroughExt());l.putDouble("FontSize",a.getFontSize());l.putString("FontFamily",a.getFontFamily());l.putString("FontColor",a.getFontColor());l.putString("CellChartBarColor",a.getCellChartBarColor());l.putString("CellChartLineColor",a.getCellChartLineColor());l.putString("AlertColor",a.getAlertColor());if(a.getAlertSymbol()!==null){l.putString("AlertSymbol",a.getAlertSymbol().getName())}if(a.getVerticalAlignment()!==null){l.putString("VerticalAlignment",a.getVerticalAlignment().getName())}if(a.getHorizontalAlignment()!==null){l.putString("HorizontalAlignment",a.getHorizontalAlignment().getName())}l.putInteger("Priority",a.getPriority());if(a.getBackgroundPatternType()!==null){l.putString("PatternType",a.getBackgroundPatternType().getName())}l.putStringNotNullAndNotEmpty("PatternBackground",a.getBackgroundContent())}}};e.QInARepoTableDefinition.prototype.exportCellTypeRestriction=function(t,r){this.setTriStateBool(r,"Expanded",t.isExpanded());this.setTriStateBool(r,"InHierarchy",t.isInHierarchy());this.setTriStateBool(r,"Totals",t.isInTotalsContext());this.setTriStateBool(r,"Merged",t.isMerged());this.setTriStateBool(r,"RepeatedMemberName",t.isRepeatedMemberName());var i=t.getMatchingCellTypes();if(e.XCollectionUtils.hasElements(i)){var n=r.putNewList("CellTypes");e.XCollectionUtils.forEach(i,function(t){n.addString(e.isNull(t)?null:t.getName())}.bind(this))}};e.QInARepoTableDefinition.prototype.exportStyledLine=function(e,t){if(e.getWidth()>-1){t.putDouble("LineWidth",e.getWidth())}t.putStringNotNullAndNotEmpty("LineColor",e.getColor());t.putStringNotNullAndNotEmpty("PatternBackground",e.getPatternBackground());if(e.getPatternWidth()>0){t.putDouble("PatternWidth",e.getPatternWidth())}t.putStringNotNullAndNotEmpty("PatternColor",e.getPatternColor());t.putStringNotNullAndNotEmpty("PatternBorderColor",e.getPatternBorderColor());if(e.getPatternType()!==null){t.putString("PatternType",e.getPatternType().getName())}if(e.getLineStyle()!==null){t.putString("LineStyle",e.getLineStyle().getName())}if(e.getLeftPadding()>-1){t.putDouble("PaddingLeft",e.getLeftPadding())}if(e.getRightPadding()>-1){t.putDouble("PaddingRight",e.getRightPadding())}if(e.getTopPadding()>-1){t.putDouble("PaddingTop",e.getTopPadding())}if(e.getBottomPadding()>-1){t.putDouble("PaddingBottom",e.getBottomPadding())}};e.QInARepoTableDefinition.prototype.exportDataPointStyles=function(t,r){var i=t.getDataPointStyles();if(e.XCollectionUtils.hasElements(i)){var n=r.putNewList("DataPointStyle");for(var o=0;o<i.size();o++){var a=n.addNewStructure();var l=i.get(o);a.putString("Name",l.getName());a.putString("Text",l.getText());a.putString("Style",l.getFormattingStyleName());a.putString("ExceptionName",l.getExceptionName());if(l.getAlertLevelMin()!==null){a.putInteger("AlertLevelMin",l.getAlertLevelMin().getLevel())}if(l.getAlertLevelMax()!==null){a.putInteger("AlertLevelMax",l.getAlertLevelMax().getLevel())}if(l.getValueSign()!==null){a.putString("ValueSign",l.getValueSign().getName())}a.putInteger("Priority",l.getPriority())}}};e.QInARepoTableDefinition.prototype.exportScopedStyles=function(t,r,i){var n=r.getScopedStyles();if(e.XCollectionUtils.hasElements(n)){var o=i.putNewList("ScopedStyle");for(var a=0;a<n.size();a++){var l=n.get(a);var p=o.addNewStructure();p.putString("Name",l.getName());p.putString("Text",l.getText());p.putString("Style",l.getStyleName());t.exportVisualizationCellReferenceScope(l.getOrthogonalRowsScope(),p.putNewStructure("RowsScope"));t.exportVisualizationCellReferenceScope(l.getOrthogonalColumnsScope(),p.putNewStructure("ColumnsScope"))}}};e.QInARepoTableDefinition.prototype.exportLayeredRectangularStyles=function(t,r,i){var n=r.getLayeredRectangularStyles();if(e.XCollectionUtils.hasElements(n)){var o=i.putNewList("LayeredRectangularStyle");for(var a=0;a<n.size();a++){var l=n.get(a);var p=o.addNewStructure();p.putString("Name",l.getName());p.putString("Text",l.getText());p.putString("Style",l.getStyleName());t.exportVisualizationCellReferenceScope(l.getRowsScope(),p.putNewStructure("RowsScope"));t.exportVisualizationCellReferenceScope(l.getColumnsScope(),p.putNewStructure("ColumnsScope"))}}};e.QInARepoTableDefinition.prototype.exportTableMarkups=function(t,r,i){var n=r.getTableMarkups();if(e.XCollectionUtils.hasElements(n)){var o=i.putNewList("TableMarkup");for(var a=0;a<n.size();a++){var l=n.get(a);var p=o.addNewStructure();p.putString("Name",l.getName());p.putString("Text",l.getText());p.putInteger("Height",l.getCellHeight());p.putInteger("Width",l.getCellWidth());p.putInteger("HeightAddition",l.getCellHeightAddition());p.putInteger("WidthAddition",l.getCellWidthAddition());this.exportPageBreakHandling(p,"PageBreakBefore",l.getPageBreakHandlingBefore());this.exportPageBreakHandling(p,"PageBreakAfter",l.getPageBreakHandlingAfter());this.exportPageBreakHandling(p,"PageBreakInside",l.getPageBreakHandlingInside());p.putInteger("Priority",l.getPriority());var s=l.getScopedStyleNames();if(e.XCollectionUtils.hasElements(s)){p.putNewList("ScopedStyle").addAllStrings(s)}var u=l.getTuplesBefore();this.exportInsertedTuples(u,p,"InsertedTupleBefore");var g=l.getTuplesAfter();this.exportInsertedTuples(g,p,"InsertedTupleAfter");t.exportVisualizationCellReferenceScope(l.getRowsScope(),p.putNewStructure("RowsScope"));t.exportVisualizationCellReferenceScope(l.getColumnsScope(),p.putNewStructure("ColumnsScope"))}}};e.QInARepoTableDefinition.prototype.exportPageBreakHandling=function(t,r,i){if(e.notNull(i)){t.putString(r,i.getName())}};e.QInARepoTableDefinition.prototype.exportInsertedTuples=function(t,r,i){if(e.XCollectionUtils.hasElements(t)){var n=r.putNewList(i);for(var o=0;o<t.size();o++){var a=t.get(o);var l=n.addNewStructure();l.putString("Name",a.getName());l.putString("Text",a.getText());l.putString("FormattedText",a.getFormattedText());l.putInteger("Height",a.getCellHeight());l.putInteger("Width",a.getCellWidth());l.putBoolean("MergeCells",a.isMerged());var p=a.getScopedStyleNames();if(e.XCollectionUtils.hasElements(p)){l.putNewList("ScopedStyle").addAllStrings(p)}}}};e.QInARepoTableDefinition.prototype.getTriStateBool=function(t,r){var i=e.TriStateBool._DEFAULT;if(t.containsKey(r)){i=t.getBooleanByKey(r)?e.TriStateBool._TRUE:e.TriStateBool._FALSE}return i};e.QInARepoTableDefinition.prototype.setTriStateBool=function(t,r,i){if(i===e.TriStateBool._TRUE){t.putBoolean(r,true)}else if(i===e.TriStateBool._FALSE){t.putBoolean(r,false)}};e.QInARepoVisualizationManager=function(){};e.QInARepoVisualizationManager.prototype=new e.QInARepository;e.QInARepoVisualizationManager.prototype._ff_c="QInARepoVisualizationManager";e.QInARepoVisualizationManager.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_MANAGER};e.QInARepoVisualizationManager.prototype.getTagName=function(){return"VisualizationManager"};e.QInARepoVisualizationManager.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(r)&&e.notNull(i)&&i.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_MANAGER){var a=r.getListByKey("Elements");if(e.XCollectionUtils.hasElements(a)){this.importComponentWithList(t,a,i,n,o)}var l=r.getStringByKey("ActiveVisualizationDefinition");var p=i;var s=p.getVisualizationDefinitionByName(l);if(e.isNull(s)){s=e.XCollectionUtils.findFirst(p.getVisualizationDefinitions(),function(t){return t.getSemanticBindingType()===e.SemanticBindingType.TABLE}.bind(this))}p.setCurrentActiveVisualizationDefinition(s)}return i};e.QInARepoVisualizationManager.prototype.importComponentWithList=function(t,r,i,n,o){var a=i;a.setRepoSerializationActive(true);for(var l=0;l<r.size();l++){var p=r.getStructureAt(l);var s=p.getStringByKey("Name");var u=e.QInAConverter.lookupProtocolBindingType(p.getStringByKey("ProtocolBindingType"));var g=e.QInAConverter.lookupSemanticBindingType(p.getStringByKey("SemanticBindingType"));var y=a.getOrCreateVisualisationDefinition(s,u,g);t.importVisualizationDefinition(p,y)}};e.QInARepoVisualizationManager.prototype.exportComponentWithStructure=function(t,r,i,n){if(e.notNull(r)&&r.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_MANAGER){var o=this.exportComponentWithList(t,r,n);if(e.XCollectionUtils.hasElements(o)){i.put("Elements",o);var a=r;var l=a.getCurrentActiveVisualizationDefinition();if(e.notNull(l)){i.putStringNotNull("ActiveVisualizationDefinition",l.getName())}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoVisualizationManager.prototype.exportComponentWithList=function(t,r,i){var n=null;var o=r;var a=o.getVisualizationDefinitions();if(e.XCollectionUtils.hasElements(a)){n=e.PrFactory.createList();for(var l=0;l<a.size();l++){var p=n.addNewStructure();p.putString("Name",a.get(l).getName());p.putString("ProtocolBindingType",a.get(l).getProtocolBindingType().getName());p.putString("SemanticBindingType",a.get(l).getSemanticBindingType().getName());t.exportVisualizationDefinition(a.get(l),p)}}return n};e.QInARepoChartDefinition=function(){};e.QInARepoChartDefinition.prototype=new e.QInARepository;e.QInARepoChartDefinition.prototype._ff_c="QInARepoChartDefinition";e.QInARepoChartDefinition.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_CHART_DEFINITION};e.QInARepoChartDefinition.prototype.getTagName=function(){return"ChartDefinition"};e.QInARepoChartDefinition.prototype.importComponentWithStructure=function(t,r,i,n,o){if(e.notNull(r)&&e.notNull(i)&&i.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_CHART_DEFINITION){var a=i;a.setTitle(r.getStringByKey("Title"));var l=r.getStringByKey("KeyFigureDimension");var p=a.getQueryModel().getDimensionByName(l);a.setKeyFigureDimension(p);var s=r.getStructureByKey("ChartSettings");var u=a.getChartSetting();var g=s.getStringByKey("ChartOrientation");var y=s.getStringByKey("ChartStacking");var m=s.getStringByKey("ChartType");var c=s.getStringByKey("ChartType2");var S=s.getStringByKey("Title");var A=s.getStringByKey("SubTitle");var d=s.getBooleanByKey("HasTitleExpanded");u.setChartType(e.ChartType.lookup(m));u.setChartType2(e.ChartType.lookup(c));u.setChartStackingType(e.ChartStackingType.lookup(y));u.setChartOrientation(e.ChartOrientation.lookup(g));u.setTitle(S);u.setSubTitle(A);u.setHasTitleExpanded(d);this.importChartLegend(u,s);this.importCategoryAxis(u,s);this.importValueAxis(u,s);this.importColorScheme(u,s);this.importPlotArea(u,s);var I=s.getListByKey("KeyFigureSelections");e.XStream.of(I).forEach(function(t){var r=t;var i=e.VisualizationValueType.lookup(r.getStringByKey("VisualizationValueType"));var n=r.getListByKey("Members");if(e.XCollectionUtils.hasElements(n)){e.XStream.of(n).forEach(function(t){var r;var n=t.asStructure().getStringByKey("DimensionName");var l=t.asStructure().getStringByKey("Id");var p=a.getQueryModel().getDimensionByName(n);r=e.QKeyFigureSelection.create(o,p.getDimensionMember(l),a,i);var s=t.asStructure().getStringByKey("Color");if(e.notNull(s)){r.setColor(s)}u.addTypedValueSelection(i,r)}.bind(this))}}.bind(this))}return i};e.QInARepoChartDefinition.prototype.importPlotArea=function(t,r){var i=r.getStructureByKey("PlotArea");if(e.notNull(i)){var n=e.QChartPlotArea.create();var o=this.importChartLabel(i,"DataLabel");n.setDataLabel(o);var a=this.importChartLabel(i,"StackColumnLabel");n.setStackColumnLabel(a);var l=this.importChartLabel(i,"DimensionLabel");n.setDimensionLabel(l);t.setPlotArea(n)}};e.QInARepoChartDefinition.prototype.importColorScheme=function(t,r){var i=r.getStructureByKey("ColorScheme");if(e.notNull(i)){var n=e.QChartColorScheme.create();var o=e.PrUtils.asListOfString(i.getListByKey("Colors"));if(e.XCollectionUtils.hasElements(o)){var a=e.XListOfString.create();e.XStream.ofString(o).forEach(function(e){a.add(e.getString())}.bind(this));n.setColors(a)}t.setColorScheme(n)}};e.QInARepoChartDefinition.prototype.importCategoryAxis=function(t,r){var i=r.getStructureByKey("CategoryAxis");if(e.notNull(i)){var n=e.QChartAxis.create();this.importAxis(n,i);t.setCategoryAxis(n)}};e.QInARepoChartDefinition.prototype.importValueAxis=function(t,r){var i=r.getStructureByKey("ValueAxis");if(e.notNull(i)){var n=e.QChartAxis.create();this.importAxis(n,i);t.setValueAxis(n)}};e.QInARepoChartDefinition.prototype.importAxis=function(t,r){var i=r.getStringByKey("Color");if(e.notNull(i)){t.setColor(i)}var n=r.getBooleanByKey("ShowLabelGrids");t.setShowLabelGrids(n);var o=this.importChartLabel(r,"Label");if(e.notNull(o)){t.setLabel(o)}var a=r.getStructureByKey("CategoryAxis");if(e.notNull(a)){var l=this.importAxisComponent(a);t.setLine(l)}var p=r.getStructureByKey("CategoryAxis");if(e.notNull(p)){var s=this.importAxisComponent(p);t.setTick(s)}};e.QInARepoChartDefinition.prototype.importAxisComponent=function(t){var r=e.QChartAxisComponent.create();var i=t.getDoubleByKey("Size");r.setSize(i);var n=t.getBooleanByKey("Visible");r.setVisible(n);return r};e.QInARepoChartDefinition.prototype.importChartLegend=function(t,r){var i=r.getStructureByKey("Legend");if(e.notNull(i)){var n=e.QChartLegend.create();var o=i.getBooleanByKey("ShowFullLabel");n.setShowFullLabel(o);var a=this.importChartLabel(i,"Label");if(e.notNull(a)){n.setLabel(a)}t.setLegend(n)}};e.QInARepoChartDefinition.prototype.importChartLabel=function(t,r){var i=t.getStructureByKey(r);if(e.notNull(i)){var n=e.QChartLabel.create();var o=i.getStringByKey("Alignment");if(e.notNull(o)){var a=e.ChartAlignment.lookup(o);n.setChartAlignment(a)}var l=i.getStringByKey("VerticalAlignment");if(e.notNull(l)){var p=e.ChartVerticalAlignment.lookup(l);n.setChartVerticalAlignment(p)}var s=i.getBooleanByKey("AutoResize");var u=i.getBooleanByKey("HiddenWhenOverlap");var g=i.getBooleanByKey("Visible");n.setAutoResize(s);n.setHiddenWhenOverlap(u);n.setVisible(g);var y=i.getStringByKey("FormatString");if(e.notNull(y)){n.setFormatString(y)}this.importChartLabelStyle(n,i);return n}return null};e.QInARepoChartDefinition.prototype.importChartLabelStyle=function(t,r){var i=r.getStructureByKey("Style");if(e.notNull(i)){var n=e.QChartLabelStyle.create();var o=i.getStringByKey("Color");n.setColor(o);var a=i.getStringByKey("FontFamily");n.setFontFamily(a);var l=i.getStringByKey("FontSize");n.setFontSize(l);var p=i.getStringByKey("FontWeight");n.setFontWeight(p);t.setStyle(n)}};e.QInARepoChartDefinition.prototype.exportComponentWithStructure=function(t,r,i,n){if(e.notNull(r)&&e.notNull(i)){var o=r;i.putStringNotNullAndNotEmpty("Title",o.getTitle());var a=o.getKeyFigureDimension();if(e.notNull(a)){i.putStringNotNullAndNotEmpty("KeyFigureDimension",a.getName())}var l=i.putNewStructure("ChartSettings");var p=o.getChartSetting();if(p.getChartOrientation()!==null){l.putString("ChartOrientation",p.getChartOrientation().getName())}if(p.getChartStackingType()!==null){l.putString("ChartStacking",p.getChartStackingType().getName())}if(p.getChartType()!==null){l.putString("ChartType",p.getChartType().getName())}if(p.getChartType2()!==null){l.putString("ChartType2",p.getChartType2().getName())}if(p.getTitle()!==null){l.putString("Title",p.getTitle())}if(p.getSubTitle()!==null){l.putString("SubTitle",p.getSubTitle())}l.putBoolean("HasTitleExpanded",p.hasTitleExpanded());this.exportChartLegend(p,l);var s=p.getCategoryAxis();if(e.notNull(s)){var u=l.putNewStructure("CategoryAxis");this.exportAxis(s,u)}var g=p.getValueAxis();if(e.notNull(g)){var y=l.putNewStructure("ValueAxis");this.exportAxis(g,y)}var m=p.getColorScheme();if(e.notNull(m)){this.exportColorScheme(p,l)}var c=p.getPlotArea();if(e.notNull(c)){this.exportPlotArea(p,l)}var S=l.putNewList("KeyFigureSelections");e.XStream.of(e.VisualizationValueType.getAll()).forEach(function(t){var r=p.getTypedValueSelectionsForType(t);var i=S.addNewStructure();i.putString("VisualizationValueType",t.getName());var n=e.PrList.create();var o=r.getValuesAsReadOnlyList();e.XStream.of(o).forEach(function(t){var r=n.addNewStructure();r.putString("Id",t.getName());r.putString("DimensionName",t.getDimensionMember().getDimension().getName());var i=t.getColor();if(e.notNull(i)){r.putString("Color",t.getColor())}}.bind(this));i.put("Members",n)}.bind(this))}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoChartDefinition.prototype.exportColorScheme=function(t,r){var i=t.getColorScheme();if(e.notNull(i)){var n=r.putNewStructure("ColorScheme");var o=i.getColors();if(e.XCollectionUtils.hasElements(o)){var a=n.putNewList("Colors");e.XStream.ofString(o).forEach(function(e){a.addString(e.getString())}.bind(this))}}};e.QInARepoChartDefinition.prototype.exportPlotArea=function(t,r){var i=t.getPlotArea();if(e.notNull(i)){var n=r.putNewStructure("PlotArea");var o=i.getDataLabel();if(e.notNull(o)){this.exportLabel(o,n,"DataLabel")}var a=i.getDimensionLabel();if(e.notNull(a)){this.exportLabel(a,n,"DimensionLabel")}var l=i.getStackColumnLabel();if(e.notNull(a)){this.exportLabel(l,n,"StackColumnLabel")}}};e.QInARepoChartDefinition.prototype.exportAxis=function(t,r){var i=t.getColor();if(e.notNull(i)){r.putString("Color",i)}var n=t.isShowLabelGrids();r.putBoolean("ShowLabelGrids",n);var o=t.getLabel();if(e.notNull(o)){this.exportLabel(o,r,"Label")}var a=t.getLine();if(e.notNull(a)){var l=r.putNewStructure("Line");this.exportAxisComponent(a,l)}var p=t.getTick();if(e.notNull(p)){var s=r.putNewStructure("Tick");this.exportAxisComponent(p,s)}};e.QInARepoChartDefinition.prototype.exportAxisComponent=function(e,t){var r=e.getSize();t.putDouble("Size",r);var i=e.isVisible();t.putBoolean("Visible",i)};e.QInARepoChartDefinition.prototype.exportChartLegend=function(t,r){var i=t.getChartLegend();if(e.notNull(i)){var n=r.putNewStructure("Legend");var o=i.isShowFullLabel();n.putBoolean("ShowFullLabel",o);var a=i.getChartLabel();if(e.notNull(a)){this.exportLabel(a,n,"Label")}}};e.QInARepoChartDefinition.prototype.exportLabel=function(t,r,i){var n=r.putNewStructure(i);var o=t.getChartAlignment();if(e.notNull(o)){n.putString("Alignment",o.getName())}var a=t.getChartVerticalAlignment();if(e.notNull(a)){n.putString("VerticalAlignment",a.getName())}n.putBoolean("AutoResize",t.isAutoResize());n.putBoolean("HiddenWhenOverlap",t.isHiddenWhenOverlap());n.putBoolean("Visible",t.isVisible());var l=t.getFormatString();if(e.notNull(l)){n.putString("FormatString",l)}this.exportChartLabelStyle(t,n)};e.QInARepoChartDefinition.prototype.exportChartLabelStyle=function(t,r){var i=t.getStyle();if(e.notNull(i)){var n=r.putNewStructure("Style");var o=i.getColor();if(e.notNull(o)){n.putString("Color",o)}var a=i.getFontFamily();if(e.notNull(a)){n.putString("FontFamily",a)}var l=i.getFontSize();if(e.notNull(l)){n.putString("FontSize",l)}var p=i.getFontWeight();if(e.notNull(p)){n.putString("FontWeight",p)}}};e.QInA=function(){};e.QInA.prototype=new e.MessageManager;e.QInA.prototype._ff_c="QInA";e.QInA.s_lookupByFormat=null;e.QInA.staticSetup=function(){e.QInA.s_lookupByFormat=e.XHashMapByString.create();e.QInA.addAllFormats();e.QInA.addAllTypes()};e.QInA.staticSetupForPlanning=function(){e.QInA.addAllPlanningTypes()};e.QInA.addInAComponent=function(t){var r=t.getComponentType().getName();var i=t.getModelFormat();if(e.isNull(i)){i=e.QModelFormat.INA_DATA}var n=i.getUsages();var o=n.size();for(var a=0;a<o;a++){var l=n.get(a);var p=l.getName();var s=e.QInA.s_lookupByFormat.getByKey(p);var u=s.getByKey(r);e.XObjectExt.assertNotNullExt(u,e.XStringUtils.concatenate2("Container not defined: ",r));u.add(t)}};e.QInA.addAllTypes=function(){e.QInA.addType(e.OlapComponentType.CONDITIONS_MANAGER);e.QInA.addType(e.OlapComponentType.CONDITION);e.QInA.addType(e.OlapComponentType.CONDITIONS_THRESHOLD);e.QInA.addType(e.OlapComponentType.CONDITIONS);e.QInA.addType(e.OlapComponentType.QUERY_MODEL);e.QInA.addType(e.OlapComponentType.DATA_CELL);e.QInA.addType(e.OlapComponentType.AXIS);e.QInA.addType(e.OlapComponentType.SORT_MANAGER);e.QInA.addType(e.OlapComponentType.LAYER_MODEL);e.QInA.addType(e.OlapComponentType.DATA_SOURCE);e.QInA.addType(e.OlapComponentType.DOCUMENTS_INFO);e.QInA.addType(e.OlapComponentType.SELECTOR);e.QInA.addType(e.OlapComponentType.ATTRIBUTE_CONTAINER);e.QInA.addType(e.OlapComponentType.ATTRIBUTE);e.QInA.addType(e.OlapComponentType.CELL_CONTEXT_MANAGER);e.QInA.addType(e.OlapComponentType.CELL_CONTEXT);e.QInA.addType(e.OlapComponentType.DRILL_MANAGER);e.QInA.addType(e.OlapComponentType.DRILL_OPERATION);e.QInA.addType(e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER);e.QInA.addType(e.OlapComponentType.CURRENCY_TRANSLATION_LIST);e.QInA.addType(e.OlapComponentType.CURRENCY_TRANSLATION_ITEM);e.QInA.addType(e.OlapComponentType.MEASURE_TRANSLATIONS);e.QInA.addType(e.OlapComponentType.FIELD_CONTAINER);e.QInA.addType(e.OlapComponentType.FIELD_LIST);e.QInA.addType(e.OlapComponentType.FIELD);e.QInA.addType(e.OlapComponentType.RESULT_STRUCTURE);e.QInA.addType(e.OlapComponentType.DATA_CELLS);e.QInA.addType(e.OlapComponentType.TOTALS);e.QInA.addType(e.OlapComponentType.EXCEPTION_MANAGER);e.QInA.addType(e.OlapComponentType.FORMULA_EXCEPTION_MANAGER);e.QInA.addType(e.OlapComponentType.FORMULA_EXCEPTION);e.QInA.addType(e.OlapComponentType.QUERY_SETTINGS);e.QInA.addType(e.OlapComponentType.HIERARCHY);e.QInA.addType(e.OlapComponentType.HIERARCHY_MANAGER);e.QInA.addType(e.OlapComponentType.CUSTOM_HIERARCHY_REPOSITORY);e.QInA.addType(e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION);e.QInA.addType(e.OlapComponentType.AXES_SETTINGS);e.QInA.addType(e.OlapComponentType.PROPERTY);e.QInA.addType(e.OlapComponentType.PLANNING_X_COMMAND);e.QInA.addType(e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES);e.QInA.addType(e.OlapComponentType.QUERY_CELLS);e.QInA.addType(e.MemberType.DRILL_PATH_ELEMENT);e.QInA.addType(e.MemberType.MEMBER);e.QInA.addType(e.MemberType.SINGLE_MEMBER_EXIT);e.QInA.addType(e.MemberType.MEMBER_EXITS);e.QInA.addType(e.MemberType.LITERAL_MEMBER);e.QInA.addType(e.MemberType.BASIC_MEASURE);e.QInA.addType(e.MemberType.FORMULA);e.QInA.addType(e.MemberType.SERVER_BASED_FORMULA);e.QInA.addType(e.MemberType.RESTRICTED_MEASURE);e.QInA.addType(e.MemberType.VARIANCE);e.QInA.addType(e.MemberType.EXCEPTION_AGGREGATION);e.QInA.addType(e.MemberType.CURRENCY_MEASURE);e.QInA.addType(e.MemberType.RUNNING_TOTAL);e.QInA.addType(e.MemberType.HIERARCHY_NODE);e.QInA.addType(e.MemberType.RESULT);e.QInA.addType(e.MemberType.CONDITION_RESULT);e.QInA.addType(e.MemberType.CONDITION_OTHERS_RESULT);e.QInA.addType(e.MemberType.MEASURE);e.QInA.addType(e.MemberType.ABSTRACT_MEMBER);e.QInA.addType(e.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER);e.QInA.addType(e.OlapComponentType.FORMULA_CONSTANT);e.QInA.addType(e.OlapComponentType.FORMULA_ITEM_MEMBER);e.QInA.addType(e.OlapComponentType.FORMULA_OPERATION);e.QInA.addType(e.OlapComponentType.FORMULA_FUNCTION);e.QInA.addType(e.OlapComponentType.MEMBERS);e.QInA.addType(e.OlapComponentType.DIMENSION_SORTING);e.QInA.addType(e.OlapComponentType.FIELD_SORTING);e.QInA.addType(e.OlapComponentType.DATA_CELL_SORTING);e.QInA.addType(e.OlapComponentType.COMPLEX_SORTING);e.QInA.addType(e.OlapComponentType.MEASURE_SORTING);e.QInA.addType(e.OlapComponentType.GENERIC_SORTING);e.QInA.addType(e.OlapComponentType.LAYER);e.QInA.addType(e.OlapComponentType.LAYER_SYNC_DEFINITION);e.QInA.addType(e.OlapComponentType.LAYER_REFERENCE_DEFINITION);e.QInA.addType(e.OlapComponentType.ABSTRACT_LAYER_MODEL);e.QInA.addType(e.OlapComponentType.VARIABLE_MANAGER);e.QInA.addType(e.OlapComponentType.VARIABLE_CONTAINER);e.QInA.addType(e.OlapComponentType.VARIABLE_LIST);e.QInA.addType(e.VariableType.TEXT_VARIABLE);e.QInA.addType(e.VariableType.FORMULA_VARIABLE);e.QInA.addType(e.VariableType.HIERARCHY_NODE_VARIABLE);e.QInA.addType(e.VariableType.HIERARCHY_NAME_VARIABLE);e.QInA.addType(e.VariableType.HIERARCHY_VARIABLE);e.QInA.addType(e.VariableType.OPTION_LIST_VARIABLE);e.QInA.addType(e.VariableType.DIMENSION_MEMBER_VARIABLE);e.QInA.addType(e.VariableType.SIMPLE_TYPE_VARIABLE);e.QInA.addType(e.VariableType.ANY_VARIABLE);e.QInA.addType(e.OlapComponentType.VARIABLE_CONTEXT);e.QInA.addType(e.OlapComponentType.OLAP_FILTER_MANAGER);e.QInA.addType(e.OlapComponentType.FILTER_CAPABILITY_GROUP);e.QInA.addType(e.OlapComponentType.FILTER_CAPABILITY);e.QInA.addType(e.OlapComponentType.FILTER_EXPRESSION);e.QInA.addType(e.OlapComponentType.FILTER_LITERAL);e.QInA.addType(e.OlapComponentType.FILTER_FIXED);e.QInA.addType(e.OlapComponentType.FILTER_DYNAMIC);e.QInA.addType(e.OlapComponentType.FILTER_VISIBILITY);e.QInA.addType(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND);e.QInA.addType(e.FilterComponentType.CARTESIAN_LIST);e.QInA.addType(e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST);e.QInA.addType(e.FilterComponentType.CARTESIAN_PRODUCT);e.QInA.addType(e.FilterComponentType.AND);e.QInA.addType(e.FilterComponentType.OR);e.QInA.addType(e.FilterComponentType.NOT);e.QInA.addType(e.FilterComponentType.SPATIAL_FILTER);e.QInA.addType(e.FilterComponentType.BOOLEAN_ALGEBRA);e.QInA.addType(e.FilterComponentType.OPERATION);e.QInA.addType(e.FilterComponentType.DATE_RANGE_OPERATION);e.QInA.addType(e.FilterComponentType.FILTER_MEASURE_BASED);e.QInA.addType(e.FilterComponentType.FILTER_ACROSS_MODELS);e.QInA.addType(e.FilterComponentType.FILTER_DYNAMIC_TIME_REGULAR_RANGE);e.QInA.addType(e.FilterComponentType.FILTER_DYNAMIC_TIME_TO_DATE_RANGE);e.QInA.addType(e.FilterComponentType.FILTER_FIXED_TIME_RANGE);e.QInA.addType(e.OlapComponentType.FILTER_ELEMENT);e.QInA.addType(e.OlapComponentType.DIMENSION_CONTEXT);e.QInA.addType(e.OlapComponentType.DIMENSIONS);e.QInA.addType(e.DimensionType.PRESENTATION);e.QInA.addType(e.DimensionType.CONTAINER);e.QInA.addType(e.DimensionType.ATTRIBUTE_DIM);e.QInA.addType(e.DimensionType.CURRENCY);e.QInA.addType(e.DimensionType.UNIT);e.QInA.addType(e.DimensionType.TIME);e.QInA.addType(e.DimensionType.DATE);e.QInA.addType(e.DimensionType.HIERARCHY_VERSION);e.QInA.addType(e.DimensionType.HIERARCHY_NAME);e.QInA.addType(e.DimensionType.SEARCH_DIMENSION);e.QInA.addType(e.DimensionType.VERSION_EPM);e.QInA.addType(e.DimensionType.VERSION_IBP);e.QInA.addType(e.DimensionType.ACCOUNT);e.QInA.addType(e.DimensionType.GIS_DIMENSION);e.QInA.addType(e.DimensionType.SEARCH_RESULT);e.QInA.addType(e.DimensionType.SUGGEST_TERM);e.QInA.addType(e.DimensionType.SUGGEST_SCOPE);e.QInA.addType(e.DimensionType.SUGGEST_ATTRIBUTE);e.QInA.addType(e.DimensionType.MEASURE_STRUCTURE);e.QInA.addType(e.DimensionType.SECONDARY_STRUCTURE);e.QInA.addType(e.DimensionType.ABSTRACT_STRUCTURE);e.QInA.addType(e.DimensionType.DIMENSION);e.QInA.addType(e.DimensionType.CALCULATED_DIMENSION);e.QInA.addType(e.DimensionType.FORMULA_CALCULATED_DIMENSION);e.QInA.addType(e.OlapComponentType.ABSTRACT_DIMENSION);e.QInA.addType(e.FilterComponentType.TUPLE);e.QInA.addType(e.FilterComponentType.VIRTUAL_DATASOURCE);e.QInA.addType(e.OlapComponentType.MODELLER_CURRENCY_TRANSLATION);e.QInA.addType(e.OlapComponentType.MODELLER_DIMENSIONS);e.QInA.addType(e.OlapComponentType.MODELLER_METADATA_PROPERTIES);e.QInA.addType(e.OlapComponentType.MODELLER_VARIABLES);e.QInA.addType(e.OlapComponentType.QUERY_MANAGER);e.QInA.addType(e.OlapComponentType.QUERY_SERVICE_CONFIG);e.QInA.addType(e.OlapComponentType.COMPONENT_LIST);e.QInA.addType(e.OlapComponentType.QUERY_CONTEXT);e.QInA.addType(e.OlapComponentType.OLAP);e.QInA.addType(e.OlapComponentType.BLENDABLE_QUERY_MANAGER);e.QInA.addType(e.OlapComponentType.VISUALIZATION_MANAGER);e.QInA.addType(e.OlapComponentType.VISUALIZATION_CELL_REFERENCE_SCOPE);e.QInA.addType(e.OlapComponentType.VISUALIZATION_DEFINITION);e.QInA.addType(e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION);e.QInA.addType(e.OlapComponentType.VISUALIZATION_CHART_DEFINITION);e.QInA.addType(e.OlapComponentType.VISUALIZATION_CUSTOM_DEFINITION)};e.QInA.addAllPlanningTypes=function(){e.QInA.addType(e.OlapComponentType.PLANNING_MODEL);e.QInA.addType(e.OlapComponentType.PLANNING_ACTION);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_CLOSE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_CLEANUP_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_REFRESH_ACTIONS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_REFRESH_VERSIONS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_UPDATE_VERSION_PRIVILEGES_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_INIT_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_CLOSE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_START_ACTION_SEQUENCE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_END_ACTION_SEQUENCE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_SET_PARAMETERS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_SET_TIMEOUT_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_STATE_DESCRIPTIONS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_UNDO_REDO_COMMAND);e.QInA.addType(e.OlapComponentType.DATA_AREA_COMMAND);e.QInA.addType(e.OlapComponentType.DATA_AREA_COMMAND_CLOSE);e.QInA.addType(e.OlapComponentType.DATA_AREA_GET_FUNCTION_METADATA);e.QInA.addType(e.OlapComponentType.DATA_AREA_GET_SEQUENCE_METADATA);e.QInA.addType(e.OlapComponentType.LIGHTWEIGHT_DATA_AREA_COMMAND)};e.QInA.addType=function(t){var r=e.QModelFormat.getAllModelFormats();var i=r.size();for(var n=0;n<i;n++){var o=r.get(n).getName();var a=e.QInA.s_lookupByFormat.getByKey(o);a.add(e.QInAComponentContainer.create(t))}};e.QInA.addAllFormats=function(){var t=e.QModelFormat.getAllModelFormats();var r=t.size();for(var i=0;i<r;i++){var n=e.XListOfNameObject.create();var o=t.get(i).getName();e.QInA.s_lookupByFormat.put(o,n)}};e.QInA.removeEmptyContainers=function(){var t=e.QModelFormat.getAllModelFormats();var r=t.size();for(var i=0;i<r;i++){var n=e.QInA.s_lookupByFormat.getByKey(t.get(i).getName());for(var o=0;o<n.size();){var a=n.get(o);if(a.isEmpty()){n.removeAt(o)}else{o++}}}};e.QInA.prototype.m_application=null;e.QInA.prototype.mode=null;e.QInA.prototype.m_originalMode=null;e.QInA.prototype.capabilities=null;e.QInA.prototype.variableProcessingDirective=null;e.QInA.prototype.modelContext=null;e.QInA.prototype.setupImportExport=function(t,r,i,n){var o=null;if(e.notNull(t)){o=t.getSession()}this.setupSessionContext(o);this.setApplication(t);this.mode=r;this.m_originalMode=r;this.modelContext=n;if(e.isNull(i)){this.capabilities=e.QCapabilities.create();this.capabilities.setSupportsSetOperand(true);this.capabilities.setSupportsConvertToFlatFilter(true);this.capabilities.setSupportsCummulative(true);this.capabilities.setSupportsExtendedSort(true);this.capabilities.setSupportsSpatialFilter(true);this.capabilities.setSupportsSpatialFilterSrid(true);this.capabilities.setSupportsSpatialTransformation(true);this.capabilities.setSupportsMemberVisibility(true);this.capabilities.setSupportsCustomDimensionMemberExecutionStep(true);this.capabilities.setSupportsExtendedDimensions(true);this.capabilities.setSupportsIgnoreExternalDimensions(true);this.capabilities.setSupportsSupplements(true)}else{this.capabilities=i}};e.QInA.prototype.lookupInAComponent=function(t,r){var i=null;var n=e.QInA.s_lookupByFormat.getByKey(this.mode.getName());var o=n.getByKey(t.getName());if(e.isNull(o)){var a=n.size();for(var l=0;l<a;l++){o=n.get(l);if(t.isTypeOf(o.getComponentType())){i=o.get(r);break}}}else{i=o.get(r)}if(e.isNull(i)){this.addError(0,e.XStringUtils.concatenate2("Cannot find serialization/deserialization component for type: ",t.getName()))}return i};e.QInA.prototype.getApplication=function(){return e.XWeakReferenceUtil.getHardRef(this.m_application)};e.QInA.prototype.setApplication=function(t){this.m_application=e.XWeakReferenceUtil.getWeakRef(t)};e.QInA.prototype.getProcess=function(){return this.getApplication().getProcess()};e.QInA.prototype.getMode=function(){return this.mode};e.QInA.prototype.getOriginalMode=function(){return this.m_originalMode};e.QInA.prototype.isAbap=function(t){return this.isSystemType(t,e.SystemType.ABAP)};e.QInA.prototype.isAbapMds=function(t){return this.isSystemType(t,e.SystemType.ABAP_MDS)};e.QInA.prototype.isSystemType=function(t,r){var i=t.getModelCapabilities();if(e.notNull(i)){var n=i.getSystemType();if(e.notNull(n)){return n.isTypeOf(r)}}return false};e.QInA.prototype.isVirtualInA=function(t){return e.notNull(t)&&t.getModelCapabilities().getSystemType().isTypeOf(e.SystemType.VIRTUAL_INA)&&!this.getMode().isTypeOf(e.QModelFormat.INA_DATA_BLENDING_SOURCE)};e.QInARepoCalculatedDimension=function(){};e.QInARepoCalculatedDimension.prototype=new e.QInARepoDimension;e.QInARepoCalculatedDimension.prototype._ff_c="QInARepoCalculatedDimension";e.QInARepoCalculatedDimension.prototype.getComponentType=function(){return e.DimensionType.CALCULATED_DIMENSION};e.QInARepoCalculatedDimension.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=o.getQueryModel();var l=i;var p=r.getStringByKey("Name");if(e.isNull(l)&&e.notNull(a)){l=a.getDimensionManagerBase().getDimensionByNameInternal(p)}if(e.isNull(l)){l=e.QCalculatedDimension._createCalculatedDimension(o,n,p)}l.setDimensionType(e.DimensionType.CALCULATED_DIMENSION);l.setName(p);l.setTopEntries(r.getIntegerByKeyExt("Top",0));l.setSkipEntries(r.getIntegerByKeyExt("Skip",0));var s=r.getStructureByKey("DataSource");l.setPreQueryName(s.getStringByKey("ObjectName"));l.setJoinType(e.JoinType.lookup(r.getStringByKey("JoinType")));var u=r.getListByKey("JoinFields");var g=u.size();var y;for(y=0;y<g;y++){var m=u.getStructureAt(y);l.addJoinFieldByString(m.getStringByKey("JoinFieldName"),m.getStringByKey("JoinFieldNameInReferencedData"))}var c=r.getListByKey("FieldMappings");g=c.size();for(y=0;y<g;y++){var S=c.getStructureAt(y);l.addFieldMappingByString(S.getStringByKey("FieldName"),S.getStringByKey("FieldNameInReferencedData"));if(S.getStringByKey("CalculatedDimensionFieldValueType")!==null){var A=l.getFieldByName(S.getStringByKey("FieldName"));A.setValueType(e.QInAConverter.lookupValueType(S.getStringByKey("CalculatedDimensionFieldValueType")))}}this.importFieldsLayout(t,r,l,o);t.importTotals(r,l.getResultStructureControllerBase(),o);if(r.containsKey("IsHidden")){l.setHidden(r.getBooleanByKey("IsHidden"))}return l};e.QInARepoCalculatedDimension.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());var a=o.getAxisType();i.putString("Axis",e.QInAConverter.lookupAxisTypeInA(a));var l=o.getTopEntries();if(l>0){i.putInteger("Top",l)}var p=o.getSkipEntries();if(p>0){i.putInteger("Skip",p)}var s=i.putNewStructure("DataSource");s.putString("ObjectName",o.getPreQueryName());s.putString("Type","Query");i.putString("JoinType",o.getJoinType().getName());var u=i.putNewList("JoinFields");var g=o.getJoinFields();var y=g.size();var m;for(m=0;m<y;m++){var c=g.get(m);var S=u.addNewStructure();S.putString("JoinFieldName",c.getLocaleFieldName());S.putString("JoinFieldNameInReferencedData",c.getReferencedFieldName())}var A=i.putNewList("FieldMappings");var d=o.getFieldMappings();y=d.size();for(m=0;m<y;m++){var I=d.get(m);var f=A.addNewStructure();f.putString("FieldName",I.getLocaleFieldName());f.putString("FieldNameInReferencedData",I.getReferencedFieldName());var N=I.getLocaleFieldName();if(o.getFieldByName(N).getValueType()!==e.XValueType.STRING){var v=e.QInAConverter.lookupValueTypeInA(o.getFieldByName(N).getValueType());f.putString("CalculatedDimensionFieldValueType",v)}}this.exportFieldLayout(t,i,o);t.exportTotals(o,i);if(o.isHidden()){i.putBoolean("IsHidden",true)}return e.QInARepoDimension.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterConvertedTimeCartesianList=function(){};e.QInARepoFilterConvertedTimeCartesianList.prototype=new e.QInARepoFilterCartesianList;e.QInARepoFilterConvertedTimeCartesianList.prototype._ff_c="QInARepoFilterConvertedTimeCartesianList";e.QInARepoFilterConvertedTimeCartesianList.prototype.getComponentType=function(){return e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST};e.QInARepoFilterConvertedTimeCartesianList.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=null;if(e.notNull(n)){var l=n;a=l.getFilterExpression()}var p=i;if(e.isNull(p)){p=e.notNull(a)?e.QFactory.createFilterConvertedTimeCartesianList(a):e.QFactory.createFilterConvertedTimeCartesianList(o)}p.setIsSingleValueSourceCartesianList(r.getBooleanByKey("isSingleValueSource"));var s=r.getStringByKey("LevelType");if(e.notNull(s)){p.setHierarchyLevelType(e.HierarchyLevelType.lookup(s))}return e.QInARepoFilterCartesianList.prototype.importComponentWithStructure.call(this,t,r,p,n,o)};e.QInARepoFilterConvertedTimeCartesianList.prototype.exportComponentWithStructure=function(t,r,i,n){e.QInARepoFilterCartesianList.prototype.exportComponentWithStructure.call(this,t,r,i,n);var o=r;i.putBoolean("isSingleValueSource",o.isSingleValueSourceCartesianList());if(o.getHierarchyLevelType()!==null){i.putString("LevelType",o.getHierarchyLevelType().getName())}return e.QInARepoFilterCartesianList.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterDynamic=function(){};e.QInARepoFilterDynamic.prototype=new e.QInARepoFilter;e.QInARepoFilterDynamic.prototype._ff_c="QInARepoFilterDynamic";e.QInARepoFilterDynamic.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_DYNAMIC};e.QInARepoFilterDynamic.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=r.getStructureByKey("DynamicFilter");if(e.isNull(a)){a=r.getStructureByKey("Filter")}var l=n;var p=null;if(e.notNull(l)){l.setIgnoreInternalNonMeasureFilters(r.getBooleanByKeyExt("IgnoreInternalNonMeasureFilters",false));if(r.containsKey("FlattenHierarchyNodeFiltersFromVariables")){l.setFlattenHierarchyNodeFiltersFromVariables(r.getBooleanByKey("FlattenHierarchyNodeFiltersFromVariables"))}if(r.containsKey("ConvertFiltersToFlatOnHierarchyChange")){l.setConvertFiltersToFlatOnHierarchyChange(r.getBooleanByKey("ConvertFiltersToFlatOnHierarchyChange"))}if(l.isDynamicFilterInitialized()){p=l.getDynamicFilter();p.setComplexRoot(null);if(p.getModelCapabilities().supportsCellValueOperand()){p.setIsSuppressingNulls(false)}}l.resetEffectiveFilter()}if(e.notNull(a)&&!a.isEmpty()){p=t.importFilterExpression(p,a,l,o)}if(e.notNull(l)){l.setDynamicFilter(p)}if(e.notNull(p)){p.setPreserveDuringSubmit(true)}return p};e.QInARepoFilterDynamic.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o;var l=a;i.putBoolean("IgnoreInternalNonMeasureFilters",l.isIgnoreInternalNonMeasureFilter());i.putBoolean("FlattenHierarchyNodeFiltersFromVariables",l.isFlattenHierarchyNodeFiltersFromVariables());i.putBoolean("ConvertFiltersToFlatOnHierarchyChange",l.isConvertFiltersToFlatOnHierarchyChange());var p=null;if(l.isDynamicFilterInitialized()){p=l.getDynamicFilter()}var s=a.getQueryModel();var u=t.isAbap(a);var g;if(u){g="Filter"}else{g="DynamicFilter"}var y=e.notNull(t.variableProcessingDirective)&&s.getModelCapabilities().supportsVariableMasking();if(y){var m=t.exportFilterExpression(p);if(e.notNull(m)){i.put(g,m)}}else{var c=null;if(l.isTmpFilterInitialized()){c=l.getTmpFilter()}var S=this.exportFilter(t,l,p,l.getLinkedFilters(),c);if(e.notNull(S)){i.put(g,S)}}return e.QInARepoFilter.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoFilterVisibility=function(){};e.QInARepoFilterVisibility.prototype=new e.QInARepoFilter;e.QInARepoFilterVisibility.prototype._ff_c="QInARepoFilterVisibility";e.QInARepoFilterVisibility.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_VISIBILITY};e.QInARepoFilterVisibility.prototype.getTagName=function(){return"VisibilityFilter"};e.QInARepoFilterVisibility.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;if(e.notNull(a)&&a.isVisibilityFilterInitialized()){var l=a.getVisibilityFilter();l.setComplexRoot(null);if(l.getModelCapabilities().supportsCellValueOperand()){l.setIsSuppressingNulls(false)}}var p=null;if(e.notNull(r)){p=t.importFilterExpression(null,r,a,o);if(e.notNull(a)&&e.notNull(p)){a.setVisibilityFilter(p)}}return p};e.QInARepoFilterVisibility.prototype.exportComponentWithStructure=function(e,t,r,i){var n=t;if(n.getModelCapabilities().supportsVisibilityFilter()){var o=null;if(n.isTmpVisibilityFilterInitialized()){o=n.getTmpVisibilityFilter()}var a=null;if(n.isVisibilityFilterInitialized()){a=n.getVisibilityFilter()}return this.exportFilter(e,n,a,n.getLinkedVisibilityFilters(),o)}return null};e.QInARepoFilterVisibility.prototype.isValidFilterExpression=function(t){return e.notNull(t)};e.QInARepoHierarchyManager=function(){};e.QInARepoHierarchyManager.prototype=new e.QInARepoHierarchy;e.QInARepoHierarchyManager.prototype._ff_c="QInARepoHierarchyManager";e.QInARepoHierarchyManager.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY_MANAGER};e.QInARepoHierarchyManager.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;return e.QInARepoHierarchy.prototype.importComponentWithStructure.call(this,t,r,a.getDimension(),n,o)};e.QInARepoHierarchyManager.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;return e.QInARepoHierarchy.prototype.exportComponentWithStructure.call(this,t,o.getDimension(),i,n)};e.QInARepoMemberBasicMeasure=function(){};e.QInARepoMemberBasicMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberBasicMeasure.prototype._ff_c="QInARepoMemberBasicMeasure";e.QInARepoMemberBasicMeasure.getNameFromOperand=function(t){var r=t.getStructureByKey("MemberOperand");if(e.notNull(r)){var i=e.XString.isEqual(r.getStringByKey("AttributeName"),"Measures");var n=e.QInAConverter.lookupComparison(r.getStringByKey("Comparison"))===e.ComparisonOperator.EQUAL;if(i&&n){return r.getStringByKey("Value")}}return null};e.QInARepoMemberBasicMeasure.getNameForImport=function(t,r){var i=t.getStringByKey("Name");if(e.isNull(i)&&e.notNull(r)){var n=r.getKeyField();var o=n.getName();return t.getStringByKey(o)}return i};e.QInARepoMemberBasicMeasure.getText=function(t,r){var i=t.getStringByKey("Description");if(e.isNull(i)&&e.notNull(r)){var n=r.getTextField();if(e.notNull(n)){var o=n.getName();return t.getStringByKey(o)}}return i};e.QInARepoMemberBasicMeasure.prototype.getComponentType=function(){return e.MemberType.BASIC_MEASURE};e.QInARepoMemberBasicMeasure.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;if(e.isNull(a)){a=o.getDimensionAccessor().getDimensionByNameFromExistingMetadata(r.getStringByKey("Dimension"))}var l=e.QInARepoMemberBasicMeasure.getNameForImport(r,a);var p=e.QInARepoMemberBasicMeasure.getText(r,a);if(e.XStringUtils.isNullOrEmpty(l)){l=e.QInARepoMemberBasicMeasure.getNameFromOperand(r)}var s=i;if(e.isNull(s)){s=a.getStructureMember(l);if(e.isNull(s)){if(this.newComponentCreationAllowed(t,r)&&r.getBooleanByKeyExt("Extended",true)){s=e.QBasicMeasure._createBasicMeasure(o,a);if(a.getQueryModel()!==null&&t.isAbap(a.getQueryModel())){s.setNotFromMetadata()}}}}else{s.setDimension(a)}if(e.notNull(s)){s.setName(l);var u=r.getBooleanByKeyExt("OverrideDescription",false);if(u){if(e.XStringUtils.isNullOrEmpty(p)){if(e.XStringUtils.isNullOrEmpty(s.getOriginalText())){p=l}else{p=s.getOriginalText()}}if(!e.XString.isEqual(p,s.getOriginalText())){var g=a.getTextField();if(e.notNull(g)){a.setAlternativeFieldValue(false,l,g.getName(),e.XStringValue.create(p),null)}}}if(e.notNull(p)&&(s.getOriginalText()===null||u)){s.setText(p)}s.initializeFieldValues();e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,s,r)}return s};e.QInARepoMemberBasicMeasure.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;var a=o.getDimension();if(a.getDimensionType()===e.DimensionType.ACCOUNT&&t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){i.putString("Name",o.getName());return i}var l=o.getOriginalText();if(e.notNull(l)){i.putString("Description",l)}i.putString("Dimension",a.getName());var p=e.PrFactory.createStructure();p.putString("AttributeName","Measures");i.put("MemberOperand",p);var s=o.getQueryModel();if(s.isBasicMeasureAggregationExportedInRepo()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QStructureMemberProperties.QY_AGGERGATION_TYPE)){var u=o.getAggregationType();e.QInARepoUtils.setNameIfNotNull(i,"Aggregation",u)}if(!o.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){var g=o.getAggregationDimensionName();if(e.notNull(g)){i.putString("AggregationDimension",g)}}if(!t.capabilities.supportsExtendedSort()&&!t.isVirtualInA(s)){var y=s.getSortingManager().getMeasureSorting(o,false);if(e.isNull(y)){i.putInteger("SortOrder",0)}else{i.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(y.getDirection()))}}var m=o.getKeyFieldValue();p.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL));e.QInARepoUtils.exportValue(t,"Value",p,m,m.getValueType());e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,i);if(s.isBasicMeasureSettingsExportedInRepo()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){i.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}i.putStringNotNull("UnitFixed",o.getUnitFixed());i.putStringNotNull("UnitName",o.getUnitName());i.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){i.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoMemberCurrency=function(){};e.QInARepoMemberCurrency.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberCurrency.prototype._ff_c="QInARepoMemberCurrency";e.QInARepoMemberCurrency.prototype.getComponentType=function(){return e.MemberType.CURRENCY_MEASURE};e.QInARepoMemberCurrency.prototype.newModelComponent=function(t,r,i,n){var o=e.QCurrencyMeasure._createCurrencyMeasure(n,null);o.setParent(i);return o};e.QInARepoMemberCurrency.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=n;var p=r.getStringByKey("Name");var s=r.getStringByKey("Description");if(e.isNull(a)){a=l.addNewCurrencyMeasure(p,s)}else{a.setDimension(l);a.setName(p);a.setText(s)}e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,a,r);a.setBaseMeasureName(r.getStringByKey("BaseMeasureName"));if(r.containsKey("CurrencyTranslationName")){a.setCurrencyTranslationName(r.getStringByKey("CurrencyTranslationName"))}var u=a.getLocalCurrencyTranslation();var g=r.getStructureByKey("CurrencyTranslation");if(e.isNull(g)){a.setLocalCurrency()}else{t.importCurrencyTranslationElement(g,u,o)}a.setAutoSignFlip(r.getBooleanByKey("AutoSignFlip"));return a};e.QInARepoMemberCurrency.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());i.putString("Description",o.getOriginalText());i.putStringNotNullAndNotEmpty("BaseMeasureName",o.getBaseMeasureName());i.putStringNotNullAndNotEmpty("CurrencyTranslationName",o.getCurrencyTranslationName());if(!o.isLocalCurrency()){var a=o.getLocalCurrencyTranslation();var l=i.putNewStructure("CurrencyTranslation");t.exportCurrencyTranslationElement(a,l)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)){if(o.isAutoSignFlip()||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)&&t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){i.putBoolean("AutoSignFlip",o.isAutoSignFlip())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){i.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}i.putStringNotNull("UnitFixed",o.getUnitFixed());i.putStringNotNull("UnitName",o.getUnitName());i.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){i.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,i);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoMemberExceptionAggregationMeasure=function(){};e.QInARepoMemberExceptionAggregationMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberExceptionAggregationMeasure.prototype._ff_c="QInARepoMemberExceptionAggregationMeasure";e.QInARepoMemberExceptionAggregationMeasure.prototype.getComponentType=function(){return e.MemberType.EXCEPTION_AGGREGATION};e.QInARepoMemberExceptionAggregationMeasure.prototype.newModelComponent=function(t,r,i,n){var o=e.QExceptionAggregationMeasure._createExceptionAggregationMeasure(n,null);o.setParent(i);return o};e.QInARepoMemberExceptionAggregationMeasure.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=n;var p=r.getStringByKey("Name");var s=r.getStringByKey("Description");if(e.isNull(a)){a=l.addNewExceptionAggregationMeasure(p,s)}else{a.setDimension(l);a.setName(p);a.setText(s)}a.setMeasure(r.getStringByKey("MeasureName"));if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ConditionType")){a.setConditionType(e.ExceptionAggregationConditionType.lookup(r.getStringByKey("ConditionType")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("ExceptionAggregationOnSelectionEnabled")){a.setIsExceptionAggregationOnSelectionEnabled(r.getBooleanByKey("ExceptionAggregationOnSelectionEnabled"))}var u=a.getFilter();var g=null;var y=r.getStructureByKey("Selection");if(e.notNull(y)){g=t.importComponent(null,y,null,u,o)}u.setComplexRoot(g);return a};e.QInARepoMemberExceptionAggregationMeasure.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());i.putString("Description",o.getOriginalText());i.putString("MeasureName",o.getMeasure());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_CONDITION_TYPE)){i.putString("ConditionType",o.getConditionType().getName())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_EXCEPTION_AGGREGATION_ON_SELECTION)){i.putBoolean("ExceptionAggregationOnSelectionEnabled",o.getIsExceptionAggregationOnSelectionEnabled())}var a=o.getFilter().getFilterRootElement();if(e.notNull(a)){var l=t.exportComponent(null,a,null,n);i.put("Selection",l)}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,i);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoMemberFormulaMeasure=function(){};e.QInARepoMemberFormulaMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberFormulaMeasure.prototype._ff_c="QInARepoMemberFormulaMeasure";e.QInARepoMemberFormulaMeasure.importIteration=function(t,r,i,n){var o=e.QFactory.createIteration(i);r.setIteration(o);o.setStartValueMemberName(n.getStringByKey("StartValueMember"));var a=n.getListByKey("IterationDimensions");if(e.XCollectionUtils.hasElements(a)){var l=a.size();for(var p=0;p<l;p++){var s=a.getStructureAt(p);var u=e.QFactory.createIterationDimension(i);u.setDimensionName(s.getStringByKey("Name"));u.setPartitionLevelName(s.getStringByKey("PartitionLevel"));o.addIterationDimension(u)}}};e.QInARepoMemberFormulaMeasure.importInverseFormulas=function(t,r,i,n){var o=r.getDimension();var a=n.size();var l=r.getInverseFormulaList();l.clear();for(var p=0;p<a;p++){var s=n.get(p);var u=s.getStructureByKey("Formula");var g=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,o,u,null,i);var y=null;var m=s.getStructureByKey("Condition");if(e.notNull(m)){y=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,o,m,null,i)}var c=s.getStructureByKey("Target");var S=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,o,c,null,i);var A=e.QFormulaInverseFormula.createInverseFormula(i,r,y,S,g);l.add(A)}};e.QInARepoMemberFormulaMeasure.importNameAndText=function(t,r,i){var n=e.QInARepoMemberFormulaMeasure.getNameForImport(t,i);var o=e.QInARepoMemberFormulaMeasure.getText(t,i);if(e.XStringUtils.isNullOrEmpty(n)&&e.XStringUtils.isNullOrEmpty(o)){n=t.getStringByKey("Name");o=t.getStringByKey("Description")}r.setName(n);r.setText(o)};e.QInARepoMemberFormulaMeasure.getNameForImport=function(t,r){var i=t.getStringByKey("Name");if(e.isNull(i)&&e.notNull(r)){var n=r.getKeyField();var o=n.getName();return t.getStringByKey(o)}return i};e.QInARepoMemberFormulaMeasure.getText=function(t,r){var i=t.getStringByKey("Description");if(e.isNull(i)&&e.notNull(r)){var n=r.getTextField();if(e.notNull(n)){var o=n.getName();i=t.getStringByKey(o)}}return i};e.QInARepoMemberFormulaMeasure.importFormulaMeasure=function(t,r,i,n,o){var a=null;if(e.notNull(i)){var l=i.getStructureByKey("Function");a=n;if(e.notNull(l)){var p=l.getStringByKey("Name");var s=l.getListByKey("Parameters");var u=e.QFactory.createFormulaFunction(o);if(e.notNull(s)){u.setFunctionName(p);var g=s.size();for(var y=0;y<g;y++){e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,r,s.getStructureAt(y),u,o)}}u.setSolveOrder(i.getIntegerByKeyExt("SolveOrder",0));if(e.isNull(a)){a=u}else{a.add(u)}}else{var m=i.getStructureByKey("Constant");if(e.notNull(m)){var c=e.QFactory.createFormulaConstant(o);if(e.XString.isEqual("Variable",m.getStringByKey("ValueIs"))){var S=m.getStringByKey("Value");if(e.XStringUtils.isNotNullAndNotEmpty(S)){var A=r.getQueryModel().getVariableManager();c.setVariable(A.getVariables().getByKey(S))}if(e.isNull(a)){a=c}else{a.add(c)}}else{var d=m.getStringByKey("ValueType");var I=!m.containsKey("Value")||m.getElementTypeByKey("Value")===e.PrElementType.THE_NULL;if(e.XString.isEqual(d,"Number")){if(I){c.setNullByType(e.XValueType.DOUBLE)}else{c.setDouble(m.getDoubleByKey("Value"))}}else if(e.XString.isEqual(d,"String")){if(I){c.setNullByType(e.XValueType.STRING)}else{c.setString(m.getStringByKey("Value"))}}else if(e.XString.isEqual(d,"Bool")){if(I){c.setNullByType(e.XValueType.BOOLEAN)}else{c.setBoolean(m.getBooleanByKey("Value"))}}else if(e.XString.isEqual(d,"DateTime")){if(I){c.setNullByType(e.XValueType.DATE_TIME)}else{c.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(m.getStringByKey("Value"),false))}}else if(e.XString.isEqual(d,"Date")){if(I){c.setNullByType(e.XValueType.DATE)}else{c.setDate(e.QInARepoUtils.createDate(m.getStringByKey("Value")))}}else if(e.XString.isEqual(d,"StringArray")){if(!I){var f=m.getListByKey("Value");c.setStringValues(e.PrUtils.asListOfString(f))}}else{t.addError(e.ErrorCodes.INVALID_TOKEN,"Constant value type is not supported");return null}var N=m.getStringByKey("Unit");if(e.XStringUtils.isNotNullAndNotEmpty(N)){c.setUnit(N)}var v=m.getStringByKey("Currency");if(e.XStringUtils.isNotNullAndNotEmpty(v)){c.setCurrency(v)}if(e.isNull(a)){a=c}else{a.add(c)}}}else{var T=i.getStructureByKey("Member");if(e.notNull(T)){var R=e.QFactory.createFormulaMember(o);var E=T.getStringByKey("Name");R.setMemberName(E);R.setDimensionName(T.getStringByKey("Dimension"));var C=T.getStringByKey("NameIs");if(e.XString.isEqual(C,"Booked")){R.setBooked()}else if(e.XString.isEqual(C,"Previous")){R.setPrevious()}if(e.isNull(a)){a=R}else{a.add(R)}e.QInARepoMemberFormulaMeasure.importDimensionContext(o,R,T)}else{var Q=i.getStructureByKey("AttributeValue");if(e.notNull(Q)){var M=Q.getStringByKey("Name");var D=e.QFactory.createFormulaAttributeWithName(o,M);if(e.isNull(a)){a=D}else{a.add(D)}e.QInARepoMemberFormulaMeasure.importDimensionContext(o,a,Q)}}}}}return a};e.QInARepoMemberFormulaMeasure.importDimensionContext=function(t,r,i){var n=i.getStructureByKey("DimensionContext");if(e.notNull(n)){var o=n.getStringByKey("DatasetId");var a=t.getOlapEnv().getSharedQueryManager(o);if(e.notNull(a)){var l=a.getQueryModel().getDimensionByName(n.getStringByKey("DimensionName"));r.setDimensionContext(l)}}};e.QInARepoMemberFormulaMeasure.exportIteration=function(t,r,i){var n=r.getIteration();if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||n.getModCounter()>0){var o=i.putNewStructure("Iteration");o.putString("StartValueMember",n.getStartValueMemberName());var a=n.getIterationDimensions();var l=o.putNewList("IterationDimensions");var p=a.size();for(var s=0;s<p;s++){var u=a.get(s);var g=l.addNewStructure();g.putStringNotNullAndNotEmpty("Name",u.getDimensionName());g.putStringNotNullAndNotEmpty("PartitionLevel",u.getPartitionLevelName())}}};e.QInARepoMemberFormulaMeasure.exportInverseFormulas=function(t,r,i){var n=r.getInverseFormulaList();if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||n.getModCounter()>0){var o=i.putNewList("InverseFormulas");var a=n.size();for(var l=0;l<a;l++){var p=e.PrFactory.createStructure();o.add(p);var s=n.get(l);var u=e.PrFactory.createStructure();e.QInARepoMemberAbstract.exportFormulaItem(t,s.getInternalFormulaItem(),u,r);p.put("Formula",u);var g=s.getTarget();if(e.notNull(g)){var y=e.PrFactory.createStructure();p.put("Target",y);e.QInARepoMemberAbstract.exportFormulaItem(t,g,y,r.getContext())}var m=s.getCondition();if(e.notNull(m)){var c=e.PrFactory.createStructure();p.put("Condition",c);e.QInARepoMemberAbstract.exportFormulaItem(t,m,c,r)}}}};e.QInARepoMemberFormulaMeasure.prototype.getComponentType=function(){return e.MemberType.FORMULA};e.QInARepoMemberFormulaMeasure.prototype.newModelComponent=function(t,r,i,n){var o=null;if(e.isNull(i)||n.getModelCapabilities().supportsCustomMeasuresInMetadata()===false){o=e.QFormulaMeasure._createFormulaMeasure(n,null);o.setParent(i)}return o};e.QInARepoMemberFormulaMeasure.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=n;var l=o.getQueryModel();if(e.isNull(a)){a=l.getMeasureDimension()}var p=i;var s=e.QInARepoMemberFormulaMeasure.getNameForImport(r,a);if(e.isNull(p)&&a.getModelCapabilities().supportsCustomMeasuresInMetadata()){p=a.getStructureMember(s)}if(e.isNull(p)){if(this.newComponentCreationAllowed(t,r)){p=e.QFormulaMeasure._createFormulaMeasure(o,a)}}else{p.setDimension(a)}if(e.notNull(p)){e.QInARepoMemberFormulaMeasure.importNameAndText(r,p,a);var u=r.getStructureByKey("Formula");e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,p,r);if(p.getMemberType()===e.MemberType.FORMULA){var g=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,a,u,null,o);if(e.notNull(g)){p.setFormula(g)}var y=r.getStringByKey("FormulaType");if(e.XStringUtils.isNotNullAndNotEmpty(y)){p.setFormulaType(e.QFormulaType.lookup(y))}if(p.supportsCalculatedBeforeAggregation()&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ExecutionStep"))){p.setIsCalculatedBeforeAggregation(e.XString.isEqual("CalculationBeforeAggregation",r.getStringByKey("ExecutionStep")))}var m=r.getListByKey("InverseFormulas");if(e.XCollectionUtils.hasElements(m)){e.QInARepoMemberFormulaMeasure.importInverseFormulas(t,p,o,m)}var c=r.getStructureByKey("Iteration");if(e.XCollectionUtils.hasElements(c)){e.QInARepoMemberFormulaMeasure.importIteration(t,p,o,c)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("AutoSignFlipForRMOnly")){p.setAutoSignFlipRestrictedMeasureOnly(r.getBooleanByKeyExt("AutoSignFlipForRMOnly",false))}}}return p};e.QInARepoMemberFormulaMeasure.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());i.putString("Description",o.getOriginalText());var a=e.PrFactory.createStructure();e.QInARepoMemberAbstract.exportFormulaItem(t,o.getFormula(),a,o);if(a.hasElements()){i.put("Formula",a)}if(o.getFormulaType()!==null){i.putString("FormulaType",o.getFormulaType().getName())}if(o.supportsCalculatedBeforeAggregation()&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_CALCULATE_BEFORE_AGGREGATION))){if(o.isCalculatedBeforeAggregation()){i.putString("ExecutionStep","CalculationBeforeAggregation")}else if(t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){i.putString("ExecutionStep","CalculationAfterAggregation")}}if(e.XCollectionUtils.hasElements(o.getInverseFormulaList())){e.QInARepoMemberFormulaMeasure.exportInverseFormulas(t,o,i)}if(o.getIteration()!==null){e.QInARepoMemberFormulaMeasure.exportIteration(t,o,i)}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,i);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){i.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}i.putStringNotNull("UnitFixed",o.getUnitFixed());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AGGERGATION_TYPE)){var l=o.getAggregationType();e.QInARepoUtils.setNameIfNotNull(i,"Aggregation",l)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_PRESENTATION_SIGN_REVERSAL)){var p=o.getPresentationSignReversal();if(e.notNull(p)){i.putBoolean("PresentationSignReversal",p.getBoolean())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_AUTO_SIGN_FLIP_FOR_RM_ONLY)){if(o.isAutoSignFlipRestrictedMeasureOnly()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QMeasureProperties.QY_AUTO_SIGN_FLIP_FOR_RM_ONLY)){i.putBoolean("AutoSignFlipForRMOnly",o.isAutoSignFlipRestrictedMeasureOnly())}}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoMemberRestricted=function(){};e.QInARepoMemberRestricted.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberRestricted.prototype._ff_c="QInARepoMemberRestricted";e.QInARepoMemberRestricted.prototype.getComponentType=function(){return e.MemberType.RESTRICTED_MEASURE};e.QInARepoMemberRestricted.prototype.newModelComponent=function(t,r,i,n){var o=null;if(e.isNull(i)||n.getModelCapabilities().supportsCustomMeasuresInMetadata()===false){o=e.QRestrictedMeasure._createRestrictedMeasure(n,null);o.setParent(i)}return o};e.QInARepoMemberRestricted.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=n;var p=r.getStringByKey("Name");var s=r.getStringByKey("Description");if(l.getModelCapabilities().supportsCustomMeasuresInMetadata()){a=l.getStructureMember(p);if(e.notNull(a)&&a.getMemberType()!==e.MemberType.RESTRICTED_MEASURE){l.removeMeasureWithNoValidation(p);a=null}}if(e.isNull(a)){if(this.newComponentCreationAllowed(t,r)){a=l.addNewRestrictedMeasure(p,s)}}else{a.setDimension(l);a.setName(p);a.setText(s)}if(e.notNull(a)){e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,a,r);if(a.getMemberType()===e.MemberType.RESTRICTED_MEASURE){var u=a.getFilter();var g=r.getStructureByKey("InAFilterExpression");if(e.notNull(g)){var y=t.mode;t.mode=e.QModelFormat.INA_DATA;t.importFilterExpression(u,g,a,o);t.mode=y}else{var m=null;var c=r.getStructureByKey("Selection");if(e.notNull(c)){m=t.importComponent(null,c,null,u,o);u.setComplexRoot(m)}}var S=r.getStructureByKey("TimeOperation");if(e.notNull(S)){var A=S.getStringByKey("Name");var d=e.QTimeOperationFunction.lookup(S.getStringByKey("TimeOperationFunction"));var I=e.QTimeOperationGranularity.lookup(S.getStringByKey("TimeOperationGranularity"));var f=S.getIntegerByKey("TimeOperationPeriod");a.setTimeOperation(A,d,I,f);a.getTimeOperation().setForceMemberNavigationGeneration(S.getBooleanByKey("TimeOperationForceMemberNavGeneration"));a.getTimeOperation().setUseToDateFlatRangeSelection(S.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));a.getTimeOperation().setHierarchyLevelName(S.getStringByKey("LevelName"));var N=S.getStringByKey("TimePeriodOperationLevel");if(e.notNull(N)){a.getTimeOperation().setTimePeriodOperationLevel(e.QTimePeriodOperationLevel.lookup(N))}}var v=r.getBooleanByKey("FlattenDependentRestrictedMeasures");a.setFlattenSelection(v);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("DisableIgnoreExtDimOnFixedFilters")){a.setDisableIgnoreExternalDimensionOnFixedFilters(r.getBooleanByKeyExt("DisableIgnoreExtDimOnFixedFilters",false))}}}return a};e.QInARepoMemberRestricted.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());i.putString("Description",o.getOriginalText());this.exportGenericMemberProperties(t,o,i);var a=o.getFilter().getFilterRootElement();if(e.notNull(a)&&(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.getFilter().getModCounter()>0)){var l=t.exportComponent(null,a,null,n);i.put("Selection",l)}var p=o.getTimeOperation();if(e.notNull(p)){var s=e.PrFactory.createStructure();e.QInARepoUtils.exportTimeOperation(s,p);i.put("TimeOperation",s)}var u=o.getAggregationType();e.QInARepoUtils.setNameIfNotNull(i,"Aggregation",u);i.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()));i.putStringNotNull("UnitFixed",o.getUnitFixed());i.putStringNotNull("UnitName",o.getUnitName());i.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){i.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_PRESENTATION_SIGN_REVERSAL)){var g=o.getPresentationSignReversal();if(e.notNull(g)){i.putBoolean("PresentationSignReversal",g.getBoolean())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_FLATTEN_DEPENDENT_RESTRICTED_MEASURES)){var y=o.isFlattenSelection();if(y||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){i.putBoolean("FlattenDependentRestrictedMeasures",y)}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_DISABLE_IGNORE_EXTDIM_ON_FIXEDFILTERS)){if(o.isDisableIgnoreExternalDimensionOnFixedFilters()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QMeasureProperties.QY_DISABLE_IGNORE_EXTDIM_ON_FIXEDFILTERS)){i.putBoolean("DisableIgnoreExtDimOnFixedFilters",o.isDisableIgnoreExternalDimensionOnFixedFilters())}}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoMemberRunningTotal=function(){};e.QInARepoMemberRunningTotal.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberRunningTotal.prototype._ff_c="QInARepoMemberRunningTotal";e.QInARepoMemberRunningTotal.prototype.getComponentType=function(){return e.MemberType.RUNNING_TOTAL};e.QInARepoMemberRunningTotal.prototype.newModelComponent=function(t,r,i,n){var o=e.QRunningTotalMeasure._createRunningTotalMeasure(n,null);o.setParent(i);return o};e.QInARepoMemberRunningTotal.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=n;var p=r.getStringByKey("Name");var s=r.getStringByKey("Description");if(e.isNull(a)){a=l.addNewRunningTotalMeasure(p,s)}else{a.setDimension(l);a.setName(p);a.setText(s)}a.setBaseMeasureName(r.getStringByKey("BaseMeasureName"));e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,a,r);a.setBaseMeasureName(r.getStringByKey("BaseMeasureName"));if(r.containsKey("Operator")){a.setOperator(e.QInAConverter.lookupRunningTotalOperator("Operator"))}var u;if(r.containsKey("IterationDimensions")){a.clearIterationDimensions();u=r.getListByKey("PartitionLevel");for(var g=0;g<u.size();g++){var y=a.addNewIterationDimension();var m=u.getStructureAt(g);y.setDimensionName(m.getStringByKey("Name"));y.setPartitionLevelName(m.getStringByKey("PartitionLevel"))}}a.setAutoSignFlip(r.getBooleanByKey("AutoSignFlip"));return a};e.QInARepoMemberRunningTotal.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());i.putString("Description",o.getOriginalText());i.putString("BaseMeasureName",o.getBaseMeasureName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_RUNNING_TOTAL_OPERATOR)){i.putString("Operator",e.QInAConverter.lookupRunningTotalOperatorInA(o.getOperator()))}var a;if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_ITERATION_DIMENSIONS)){a=i.putNewList("IterationDimensions");var l=o.getIterationDimensions();for(var p=0;p<l.size();p++){var s=a.addNewStructure();var u=l.get(p);s.putStringNotNullAndNotEmpty("Name",u.getDimensionName());s.putStringNotNullAndNotEmpty("PartitionLevel",u.getPartitionLevelName())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)){if(o.isAutoSignFlip()||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)&&t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){i.putBoolean("AutoSignFlip",o.isAutoSignFlip())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){i.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}i.putStringNotNull("UnitFixed",o.getUnitFixed());i.putStringNotNull("UnitName",o.getUnitName());i.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){i.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,i);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoMemberVarianceMeasure=function(){};e.QInARepoMemberVarianceMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberVarianceMeasure.prototype._ff_c="QInARepoMemberVarianceMeasure";e.QInARepoMemberVarianceMeasure.prototype.getComponentType=function(){return e.MemberType.VARIANCE};e.QInARepoMemberVarianceMeasure.prototype.newModelComponent=function(t,r,i,n){var o=e.QVarianceMeasure._createVarianceMeasure(n,i);o.setParent(i);return o};e.QInARepoMemberVarianceMeasure.prototype.importVarianceMember=function(t,r){r.setNullHandlingType(e.VarianceNullHandlingType.lookup(t.getStringByKey("NullHandling")));r.setCalculationType(e.VarianceCalculationType.lookup(t.getStringByKey("CalculationType")));r.setBaseMeasure(t.getStringByKey("BaseMeasureName"));r.setReferenceMeasure(t.getStringByKey("ReferenceMeasureName"));if(t.containsKey("BaseIgnoreExternalDimensions")){var i=t.getListByKey("BaseIgnoreExternalDimensions");for(var n=0;n<i.size();n++){r.addBaseExternalDimensionToIgnore(i.getStringAt(n))}}if(t.containsKey("ReferenceIgnoreExternalDimensions")){var o=t.getListByKey("ReferenceIgnoreExternalDimensions");for(var a=0;a<o.size();a++){r.addReferenceExternalDimensionToIgnore(o.getStringAt(a))}}var l=t.getStructureByKey("BaseTimeOperation");if(e.notNull(l)){var p=l.getStringByKey("Name");var s=e.QTimeOperationFunction.lookup(l.getStringByKey("TimeOperationFunction"));var u=e.QTimeOperationGranularity.lookup(l.getStringByKey("TimeOperationGranularity"));var g=l.getIntegerByKey("TimeOperationPeriod");r.setBaseTimeOperation(p,s,u,g);r.getBaseTimeOperation().setForceMemberNavigationGeneration(l.getBooleanByKey("TimeOperationForceMemberNavGeneration"));r.getBaseTimeOperation().setUseToDateFlatRangeSelection(l.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));r.getBaseTimeOperation().setHierarchyLevelName(l.getStringByKey("LevelName"));var y=l.getStringByKey("TimePeriodOperationLevel");if(e.notNull(y)){r.getBaseTimeOperation().setTimePeriodOperationLevel(e.QTimePeriodOperationLevel.lookup(y))}}var m=t.getStructureByKey("ReferenceTimeOperation");if(e.notNull(m)){var c=m.getStringByKey("Name");var S=e.QTimeOperationFunction.lookup(m.getStringByKey("TimeOperationFunction"));var A=e.QTimeOperationGranularity.lookup(m.getStringByKey("TimeOperationGranularity"));var d=m.getIntegerByKey("TimeOperationPeriod");r.setReferenceTimeOperation(c,S,A,d);r.getReferenceTimeOperation().setForceMemberNavigationGeneration(m.getBooleanByKey("TimeOperationForceMemberNavGeneration"));r.getReferenceTimeOperation().setUseToDateFlatRangeSelection(m.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));r.getReferenceTimeOperation().setHierarchyLevelName(m.getStringByKey("LevelName"));var I=m.getStringByKey("TimePeriodOperationLevel");if(e.notNull(I)){r.getReferenceTimeOperation().setTimePeriodOperationLevel(e.QTimePeriodOperationLevel.lookup(I))}}};e.QInARepoMemberVarianceMeasure.prototype.importComponentWithStructure=function(t,r,i,n,o){var a=i;var l=n;var p=r.getStringByKey("Name");var s=r.getStringByKey("Description");if(e.isNull(a)){a=l.addNewVarianceMeasure(p,s)}else{a.setDimension(l);a.setName(p);a.setText(s)}var u=r.getBooleanByKey("FlattenBaseFilter");a.setFlattenBaseFilter(u);var g=r.getBooleanByKey("FlattenReferenceFilter");a.setFlattenReferenceFilter(g);this.importVarianceMember(r,a);this.importFilter(t,r,o,a.getBaseFilter(),"SelectionBase");this.importFilter(t,r,o,a.getReferenceFilter(),"SelectionReference");var y=a.getReferenceFilter();var m=null;var c=r.getStructureByKey("SelectionReference");if(e.notNull(c)){var S=c.getStructureByKey("Selection");m=t.importComponent(null,S,null,y,o)}y.setComplexRoot(m);return a};e.QInARepoMemberVarianceMeasure.prototype.importFilter=function(t,r,i,n,o){var a=null;var l=r.getStructureByKey(o);if(e.notNull(l)){var p=l.getStructureByKey("Selection");a=t.importComponent(null,p,null,n,i)}n.setComplexRoot(a)};e.QInARepoMemberVarianceMeasure.prototype.exportComponentWithStructure=function(t,r,i,n){var o=r;i.putString("Name",o.getName());i.putString("Description",o.getOriginalText());this.exportVarianceMember(i,o);this.exportGenericMemberProperties(t,o,i);this.exportFilter(t,i,n,o.getBaseFilter(),"SelectionBase");this.exportFilter(t,i,n,o.getReferenceFilter(),"SelectionReference");var a=o.isFlattenBaseFilter();if(a){i.putBoolean("FlattenBaseFilter",a)}var l=o.isFlattenReferenceFilter();if(l){i.putBoolean("FlattenReferenceFilter",l)}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,i,n)};e.QInARepoMemberVarianceMeasure.prototype.exportVarianceMember=function(t,r){t.putString("BaseMeasureName",r.getBaseMeasure());t.putString("ReferenceMeasureName",r.getReferenceMeasure());e.QInARepoUtils.setNameIfNotNull(t,"CalculationType",r.getCalculationType());e.QInARepoUtils.setNameIfNotNull(t,"NullHandling",r.getNullHandlingType());var i=r.getBaseIgnoredExternalDimensions();if(i.hasElements()){var n=t.putNewList("BaseIgnoreExternalDimensions");n.addAllStrings(i)}var o=r.getReferenceIgnoredExternalDimensions();if(o.hasElements()){var a=t.putNewList("ReferenceIgnoreExternalDimensions");a.addAllStrings(o)}var l=r.getBaseTimeOperation();if(e.notNull(l)){var p=e.PrFactory.createStructure();e.QInARepoUtils.exportTimeOperation(p,l);t.put("BaseTimeOperation",p)}var s=r.getReferenceTimeOperation();if(e.notNull(s)){var u=e.PrFactory.createStructure();e.QInARepoUtils.exportTimeOperation(u,s);t.put("ReferenceTimeOperation",u)}};e.QInARepoMemberVarianceMeasure.prototype.exportFilter=function(t,r,i,n,o){var a=n.getFilterRootElement();if(e.notNull(a)){var l=t.exportComponent(null,a,null,i);var p=e.PrFactory.createStructure();p.put("Selection",l);r.put(o,p)}};e.QInARepoVarHierNode=function(){};e.QInARepoVarHierNode.prototype=new e.QInARepoVarDimMember;e.QInARepoVarHierNode.prototype._ff_c="QInARepoVarHierNode";e.QInARepoVarHierNode.prototype.getComponentType=function(){return e.VariableType.HIERARCHY_NODE_VARIABLE};e.QInAExport=function(){};e.QInAExport.prototype=new e.QInA;e.QInAExport.prototype._ff_c="QInAExport";e.QInAImport=function(){};e.QInAImport.prototype=new e.QInA;e.QInAImport.prototype._ff_c="QInAImport";e.QInAImport.prototype.m_cacheKey=null;e.OlapSerializationModule=function(){};e.OlapSerializationModule.prototype=new e.DfModule;e.OlapSerializationModule.prototype._ff_c="OlapSerializationModule";e.OlapSerializationModule.s_module=null;e.OlapSerializationModule.getInstance=function(){if(e.isNull(e.OlapSerializationModule.s_module)){e.DfModule.checkInitialized(e.OlapImplModule.getInstance());e.OlapSerializationModule.s_module=e.DfModule.startExt(new e.OlapSerializationModule);e.DfModule.stopExt(e.OlapSerializationModule.s_module)}return e.OlapSerializationModule.s_module};e.OlapSerializationModule.prototype.getName=function(){return"ff4394.olap.serialization"};e.OlapSerializationModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff4394.olap.serialization.js.map