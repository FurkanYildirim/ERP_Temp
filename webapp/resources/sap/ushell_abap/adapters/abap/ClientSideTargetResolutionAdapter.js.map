{"version":3,"file":"ClientSideTargetResolutionAdapter.js","names":["sap","ui","define","jQuery","ObjectPath","isPlainObject","fnDeepExtend","ushellUtils","urlParsing","Log","ODataWrapper","Utils","URI","S_COMPONENT","aNotCompactedWDAParameters","ClientSideTargetResolutionAdapter","oSystem","sParameters","oAdapterConfig","that","this","oContainer","ushell","Container","sProductName","getLogonSystem","getProductName","_oLocalSystemAlias","http","id","host","port","pathPrefix","https","rfc","systemId","service","loginGroup","sncNameR3","sncQoPR3","label","client","language","properties","productName","hasSegmentedAccess","_oAdapterConfig","config","_wdLengthLimit","_oODataWrapper","undefined","_getODataWrapper","createODataWrapper","_aTargetMappings","_aInbounds","_aInitialSegment","_oSystemAliasBuffer","Map","_oURLTemplates","_storeFromFullStartupResponse","oFullStartupResult","targetMappings","systemAliases","_writeUserSystemAliasesToBuffer","urlTemplates","_fallbackToFullStartupRequest","fnResolve","fnReject","debug","_requestAllTargetMappings","done","fail","sMsg","_iTargetMappingsUnusedPromiseRejectCount","_oInitialSegmentPromise","initialSegmentPromise","Promise","fnReject1","_oNavTargetPromise","navTargetDataPromise","fnReject2","then","aArgs","length","aRequestedSegments","aTargetMappings","aSystemAliases","catch","sReason","error","prototype","_adjustNavTargetResult","oResult","sUrl","url","oUri","oAdjustedResult","applicationType","additionalInformation","applicationData","sComponentName","aMatches","oAppDependencies","oSelf","text","exec","applicationDependencies","ui5ComponentName","JSON","parse","self","name","toUpperCase","indexOf","path","toString","oError","addCacheBusterTokenUsingUshellConfig","resolveHashFragmentFallback","sOriginalShellHash","oInbound","oParams","sShellHashForLpdCust","_constructShellHashForLpdCust","sSapSystem","oDeferredCB","Deferred","_resolveHashFragmentBE","resolve","reject","bind","promise","getInbounds","aSegment","oDeferred","aInitialSegmentAndTargetMappings","_isInSegment","_formatDirectStart","aSubSegment","Array","isArray","every","oEntry","oTestEntry","semanticObject","action","mParameterMap","getParameterMap","sRequestUrl","sCacheId","create","cacheId","copyParameter","sName","sValue","encodeURIComponent","get","getShellType","sNavTargetDataResult","oNavTargetDataResult","sMessage","oDirectStartResponse","mapOne","sSrcId","oSrc","oTarget","aMatch","match","warning","hasOwnProperty","title","permanentKey","catalogId","tmChipId","contentProviderId","oFakeResolutionResult","forEach","sPropName","resolutionResult","appId","oResolutionResult","sOriginalApplicationType","systemAliasSemantics","_formatApplicationType","systemAlias","deviceTypes","formfactors","technology","formFactors","desktop","phone","tablet","signature","additionalParameters","allowParams","parameters","oBadParam","oParam","sUserDefaultValue","defaultValue","value","format","_extractUserDefaultValue","filter","renameTo","required","Object","keys","sKey","oSapHideIntentLinkParam","hideIntentLink","parameterMappings","oMapping","target","urlTemplate","templateContext","getUrlTemplateContext","aRes","r","push","sTargetMappingId","sApplicationType","logErrorMessage","oNavTargetExpand","sDefault","sString","sRes","rPlaceholderParser","RegExp","_formatSignature","oODataResponse","sAllowAdditionalParameters","oRes","results","sEntryName","sEntryValue","call","stringify","_getObjectDefaulting","regexp","_mergeParameterMappingsIntoSignature","oSignature","oODataParameterMappings","aParameterMappingsOriginal","oParameterMappingOriginal","sSource","source","sTarget","_formatDeviceTypes","oFormFactors","sProp","oRoot","sStr","vDefault","o","sLpdCustShellHash","sFailReason","oTargetMappingOriginal","sBusinessParams","paramsToString","_openBatchQueueUnlessOpen","oODataWrapper","isBatchQueueOpen","openBatchQueue","sFragmentNoHash","bBatchQueueOpened","sFormFactor","getFormFactor","encodeODataQueryParameter","sUnencoded","replace","_addPostParametersToNavTargetResultUrl","sPostParameters","read","i","sDetails","__metadata","postParameters","_compactTooLongWdaUrl","oCompactedResult","submitBatchQueue","_getWDAUrlShorteningLengthLimit","_compactUrl","sCompactedUrl","sMatch","iLengthLimit","parseParameters","getServiceAsync","ShellNavigationService","compactParams","oCompactedParams","sReconstructedUrl","vNoWDACompact","getParameterValueBoolean","resolveSystemAlias","sSystemAlias","oSystemAliasData","_readSystemAliasFromBuffer","window","setTimeout","fnRetryBufferOrUseInterop","_readSystemAliasViaInterop","sError","oOdataSystemAliasData","_fixSystemAlias","_writeSystemAliasToBuffer","vSystemAliases","sSystemAliasKey","oSystemAlias","sSystemAliasId","oResolvedSystemAlias","put","oFixedSystemAlias","sDestination","sRelativeUrl","getSystemAliases","entries","oUrlTemplate","site","payload","siteAppSection"],"sources":["ClientSideTargetResolutionAdapter-dbg.js"],"mappings":"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"}