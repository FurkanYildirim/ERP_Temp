{"version":3,"file":"PagesCommonDataModelAdapter.js","names":["sap","ui","define","Log","deepExtend","cdmSiteUtils","extend","Version","jQuery","Config","PagesCommonDataModelAdapter","this","_oCDMPagesRequests","_oUnstableVisualizations","_sComponent","oSitePromise","Promise","resolve","reject","fnSiteResolve","fnSiteReject","bind","prototype","getSite","oDeferred","Deferred","ushell","Container","getServiceAsync","then","oNavigationDataProvider","getNavigationData","oNavigationData","oNavigationDataHashMap","aInbounds","inbounds","i","length","sInboundPermanentKey","permanentKey","id","oSite","_version","site","catalogs","groups","visualizations","applications","getApplications","vizTypes","systemAliases","pages","catch","error","promise","getPage","pageId","sErrorMessage","fatal","bStableIDsEnabled","last","all","aService","oPagePersistenceService","oNavigationDataProviderService","aResult","oPagePersistenceData","_addVisualizationsToSite","_addVizTypesToSite","_addPageToSite","page","_storeUnstableVisualizations","unstableVisualizations","vError","sPageId","oUnstableVisualizations","oData","oVizTypesToAdd","Object","keys","forEach","sVizTypeId","getVizTypes","oVisualizations","bCheckExistence","oVisualizationsToAdd","sVizId","getVisualizations","navigationData","oPage","identification","title","payload","layout","sectionOrder","sections","map","section","oSection","oPageSection","j","vizOrder","viz","oViz","bVisualizationMissing","k","vizId","aVizOrder","splice","indexOf","displayFormatHint","getPages","aPageIds","Array","isArray","aPageIdsToLoad","push","aServices","aPages","oAllLoadedPages","oRequestedPages","getPersonalization","CDMVersion","oPersonalizationService","oPersId","oCDMSiteVersion","container","item","inRange","oScope","validity","keyCategory","constants","GENERATED_KEY","writeFrequency","HIGH","clientStorageAllowed","getPersonalizer","getPersData","done","oPersonalizationContainer","fail","oError","setPersonalization","personalizationData","version","setPersData","oVisualizationDataProvider","getVisualizationData","aResults","oVisualizationData","getVizType","sVizType","oVizType","startsWith","loadVizType","oLoadedVizType","oVizTypes","getCachedVisualizations","getCachedVizTypes","migratePersonalizedPages","aPagesToSave","sSectionId","sVizRefId","oVizRef","oUnstableVisualization","includes"],"sources":["PagesCommonDataModelAdapter-dbg.js"],"mappings":"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"}