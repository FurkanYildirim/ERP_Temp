{"version":3,"file":"AppLifeCycle.js","names":["sap","ui","define","ElementsModel","Storage","BlueBoxHandler","ShellUIService","Application","RelatedServices","RelatedShellElements","AppMeta","AppConfiguration","utils","Device","Config","ApplicationType","deepExtend","UriParameters","jQuery","Log","EventHub","oUrlParsing","Core","hasher","MessageBrokerEngine","AppLifeCycle","oViewPortContainer","aCachedAppTypes","sRootIntent","oShellUIService","appState","oIntentToStorageId","disableHomeAppCache","oCurrentApplication","oActualElementsModelStateMap","home","embedded","headerless","merged","blank","app","minimal","standalone","lean","oWebGuiV1StatefulCache","oGlobalShellCommunicationHandlers","oGlobalIframeCommunicationHandlers","isBackNavigationChanged","oKeepAliveModes","FULL","RESTRICTED","window","QUnit","undefined","connect","this","shellElements","service","isCurrentApp","appId","isAppWithSimilarShellHashInCache","sFixedShellHash","oAppEntry","get","shellHash","isAppInCache","normalizeAppId","sAppId","sCmp","isCmp","endsWith","substring","length","onComponentCreated","oEvent","sChannel","oData","oApp","component","getId","active","onGetMe","store","oStorageEntry","meta","stateStored","destroy","oFrom","oDeferred","oInnerControl","oPromiseAppDestroy","doDestroy","getUrl","deleteStateFul","removeControl","getStateFul","isStatefulContainerSupported","oHandler","getHandler","container","Promise","resolve","remove","then","oPromise","sendBeforeAppCloseEvent","sError","error","restore","handleExitStateful","sFromId","isHomePage","sBBStorageId","oHandlers","getStorageKey","isBackNavigation","getEventBus","publish","handleExitApplication","sToId","oTo","bFromAfterNavigate","that","bIsAppOfTypeCachable","oPromiseAppClose","oDeferredAppClose","getIframeReusedForApp","setProperty","postMessageToIframeApp","Deferred","promise","getIsStateful","postMessageRequest","indexOf","getApplicationType","isAppOfTypeCached","closeKeepAliveApps","fnCloseKeepAliveIfRestricted","value","keepAliveMode","fnFilterApps","arrClosePromises","arrKeepAliveRestrictedApps","forEach","apply","push","oRestrictedApp","e","onBeforeNavigate","_getIFrame","onAfterNavigate","bIsShellApps","setActiveAppContainer","storeApp","oContainer","oTarget","oKeepAliveMode","set","stt","appRelatedElements","getAppRelatedElement","getMetadata","globalValue","paramValue","appTarget","ui5ComponentName","enableRouterRetrigger","setStorageKey","restoreApp","sKeepAlive","fromURL","location","href","isCachedEnabledAsAppParameter","oShellHash","semanticObject","action","params","url","calculateAppType","applicationType","additionalInformation","startsWith","getStatefulCapabilities","appCapabilities","statefulContainer","isNotifyInnerAppRouteChangeEnabled","notifyInnerAppRouteChange","isStatefulCapabilityEnabled","oStatefulCap","enabled","isGUICapabilityEnabled","protocol","isFLPCapabilityEnabled","isGUIStatefulCapabilityEnabled","reloadCurrentApp","oTmpAppContainer","getById","sAppContainerId","sTmpUrl","removeCapabilities","arrKeepAliveApps","key","ushell","Container","getServiceAsync","oShellNavigation","hashChanger","treatHashChanged","sCurrentHash","openApp","inAppId","sIntent","getControl","createApplicationContainer","appFrameworkId","getWebGuiV1StatefulContainer","removeWebGuiV1StatefulContainer","removeApplication","isCapUT","setCapabilities","getAppMeta","evict","oEntry","addEvents","hasBeenCalled","on","do","intent","disable","setApplicationFullWidth","bValue","init","inAppState","oInViewPortContainer","inSRootIntent","inDisableHomeAppCache","oShellUIServiceChange","aActions","oCacheConfigurations","nCacheSize","system","phone","limit","tablet","desktop","scopeObject","ownerComponent","scopeType","evictObj","bind","registerShellCommunicationHandler","oRequestCalls","create","isActiveOnly","distributionType","fnResponseHandler","oPromoise","oRespData","info","catch","oError","oServiceCalls","subscribe","executeServiceCallFn","oServiceParams","mapCapabilities","oMessageData","body","setup","oSetup","arrCap","sAppType","sFrameworkId","getFrameworkId","bIgnoreStateful","getIsKeepAlive","isStateful","isIframeValid","isIframeBusy","session","bLogoutSupport","loadFinished","setWebGuiV1StatefulContainer","setIsStateful","getElementsModel","addControl","oControl","addCenterViewPort","sId","oBlueBox","bIsStateful","removeCenterViewPort","getViewPortControl","getViewPortContainer","navTo","getCurrentApplication","bIsFull","oCurrent","toggleStyleClass","createComponent","oResolvedHashFragment","oParsedShellHash","fnCloseKeepAliveIfSameUI5App","setDangling","all","done","fail","reject","getAppContainer","oResolvedNavigationTarget","bIsColdStart","shellUIService","getInterface","targetNavigationMode","UI5APP","setIframeHandlers","getShellUIService","initShellUIService","_attachHierarchyChanged","onHierarchyChange","_attachTitleChanged","onTitleChange","_attachRelatedAppsChanged","onRelatedAppsChange","_attachBackNavigationChanged","fnOnBackNavigationChange","activeContainer","oApplicationContainer","aAllApplicationContainers","getWebGuiV1AllApplicationContainers","oApplicationContainerToDeactivate","setActive","oAppContainer","showApplicationContainer","hasStyleClass","reuseStateFulContainerAndRestore","bNavigationInSameStatefullContainer","sStorageId","vError","message","reuseStateFulContainer","initAppMetaParams","oResult","deletedKeepAliveId","getIsHierarchyChanged","setHierarchy","getIsTitleChanged","sHash","getHash","setTitle","getIsRelatedAppsChanged","setRelatedApps","setBackNavigation","reuseApplicationContainer","setNewApplicationContext","publishNavigationStateEvents","oApplication","fnOnAfterRendering","origExit","appMetaData","sIcon","icon","sTitle","title","addEventDelegate","onAfterRendering","exit","arguments","_applyContentDensityByPriority","setTimeout","oEventData","componentHandle","usageIcon","usageTitle","oPublicEventData","_publicEventDataFromResolutionResult","renderers","fiori2","publishExternalEvent","sProp","Object","freeze","getInMemoryInstance","sAppPart","sOldShellHash","sFullAppId","sOldShellHashLowerCase","bNavigateToHomepage","bNavigatingFromHomeWithAppState","toLowerCase","isInstanceSupported","handleOpenStateful","bIsInitial","bIsInCache","handleControl","fnWrapper","sOldFixedShellHash","bReuseStatefulContainer","oCachedEntry","bDefaultFullWidth","bKeptAliveApp","oDeferredDestroyApp","oDeferredOpenApp","oDeffedControlCreation","oMetadata","oCurrentAppContainer","oOldAppStorageEntry","oTargetAppContainer","iLastValidTimeDelta","oOldHash","sOldFullAppId","sCurrentPageId","Date","getTime","getIsIframeValidTime","time","isIframeBusySupported","getIsIframeBusy","isIframeIsValidSupported","getIsInvalidIframe","warning","parseShellHash","getCurrentCenterPage","byId","getDefaultFullWidthSetting","bFullWidthCapability","bFullWidth","fullWidth","isWebGuiV1StatefulContainer","getDeffedControlCreation","oPromiseAsyncAppCreate","switchState","setPerformanceMark","switchViewState","sState","bSaveLastState","sActualState","bIsCurrentStateHome","last","destroyManageQueue","assignNew","processDangling","searchModel","getModel","setHash","getProperty","JSON","stringify","getJson","oCommunicationHandler","registerIframeCommunicationHandler","sHandlers","sType","sServiceName","sInterface","oMessageBody","bWaitForResponse","checkIfPostIsNeeded","oCurrContainer","fnCallBackHandler","getActiveAppContainer","bActiveContainerPostSent","aContainers","hasIFrame","isCapabilitySupported","isAppTypeSupported","OBBContainer","getResponseHandler","oAllProm","postMessageToIframeAppAccordingToPolicy","oPolicy","isAppTypeSupportedByPolicy","setBackNavigationChanged","isBackNavigationChangedValue","getBackNavigationChanged","parseStatefulContainerConfiguration","sUrl","sKey","_getBlueBoxCacheKey","keys","map","filter"],"sources":["AppLifeCycle-dbg.js"],"mappings":";AAKAA,IAAIC,GAAGC,OAAO,CACV,8DACA,uDACA,0EACA,uCACA,uEACA,+EACA,yFACA,qEACA,uCACA,mBACA,gBACA,oBACA,6BACA,2BACA,8BACA,2BACA,eACA,sBACA,8BACA,mBACA,2BACA,0DACD,SACCC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,OACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,aAEA,SAASC,IAEL,IAAIC,EACAC,EAAkB,CAAC,OACnBC,EACAC,EACAC,EACAC,EAAqB,CAAC,EACtBC,EAAsB,MACtBC,EAAsB,CAAC,EACvBC,EAA+B,CAC3BC,KAAM,CACFC,SAAU,gBACVC,WAAY,kBACZC,OAAQ,aACRC,MAAO,cAEXC,IAAK,CACDC,QAAS,UACTD,IAAK,MACLE,WAAY,aACZN,SAAU,WACVC,WAAY,aACZC,OAAQ,SACRH,KAAM,OACNI,MAAO,QACPI,KAAM,SAGdC,EACAC,EAAoC,GACpCC,EAAqC,CAAC,EACtCC,EAA0B,MAC1BC,EAAkB,CACdC,KAAM,OACNC,WAAY,cAIpB,GAAIC,OAAOC,QAAUC,UAAW,CAC5B7B,EAAoB8B,QAAQ,MAChC,CACAC,KAAKC,cAAgB,WACjB,OAAO/C,CACX,EAEA8C,KAAKE,QAAU,WACX,OAAOjD,CACX,EAKA+C,KAAKG,aAAe,SAAUC,GAC1B,OAAQ1B,EAAoB0B,QAAUA,CAC1C,EAEAJ,KAAKK,iCAAmC,SAAUD,EAAOE,GACrD,IAAIC,EAAY1D,EAAQ2D,IAAIJ,GAE5B,GAAIG,EAAW,CACX,GAAIA,EAAUE,YAAcH,EAAiB,CACzC,OAAO,IACX,CACA,OAAO,KACX,CACA,OAAO,KACX,EAEAN,KAAKU,aAAe,SAAUN,GAC1B,QAASvD,EAAQ2D,IAAIJ,EACzB,EAEAJ,KAAKW,eAAiB,SAAUC,GAC5B,IAAIC,EAAO,aACPC,EAAQF,EAAOG,SAASF,GAE5B,GAAIC,EAAO,CACP,OAAOF,EAAOI,UAAU,EAAGJ,EAAOK,OAASJ,EAAKI,OACpD,CACA,OAAOL,CACX,EAEAZ,KAAKkB,mBAAqB,SAAUC,EAAQC,EAAUC,GAClD,IAAIC,EAAOD,EAAME,UACbX,EAASZ,KAAKW,eAAeW,EAAKE,SAEtC,GAAIxB,KAAKU,aAAaE,GAAS,CAC3B/D,EAAQ2D,IAAII,GAAQ3B,IAAMqC,EAC1BtB,KAAKyB,OAAOb,EAChB,KAAO,CACHlC,EAAoBO,IAAMqC,EAE1B,GAAIA,EAAKG,OAAQ,CACbH,EAAKG,QACT,CACJ,CACJ,EAEAzB,KAAK0B,QAAU,SAAUP,EAAQC,EAAUC,GACvCA,EAAMnD,aAAe8B,IACzB,EAEAA,KAAK2B,MAAQ,SAAUf,GACnB,IAAIgB,EAAgB/E,EAAQ2D,IAAII,GAEhC,GAAIgB,EAAe,CACf5E,EAAY2E,MAAMC,GAClBzE,EAAQwE,MAAMC,EAAcC,MAC5BD,EAAcE,YAAc,IAChC,CACJ,EAEA9B,KAAK+B,QAAU,SAAUnB,EAAQoB,EAAOC,GAGpC,IAAIL,EAAgB/E,EAAQ2D,IAAII,GAC5BsB,EACAC,EAEJ,SAASC,IACL,GAAIJ,GAASA,EAAMK,OAAQ,CACvBvF,EAAewF,eAAeN,EAAMK,SACxC,CACArF,EAAY+E,QAAQC,GACpB9E,EAAqB6E,QAAQC,GAC7B7E,EAAQ4E,QAAQC,EACpB,CAEAhC,KAAKuC,cAAc3B,GAEnB,GAAIgB,EAAe,CACfM,EAAgBpF,EAAe0F,YAAYR,EAAMK,UAEjD,GAAIH,GAAiBpF,EAAe2F,6BAA6BP,GAAgB,CAC7E,IAAIQ,EAAW5F,EAAe6F,aAI9BR,EAAqBO,EAASX,QAAQG,EAAetB,EAEzD,KAAO,CAEHgB,EAAcgB,UAAUb,UACxBjF,EAAewF,eAAeN,EAAMK,UACpCF,EAAqBU,QAAQC,SACjC,CAGAjG,EAAQkG,OAAOnC,GACf,GAAIqB,EAAW,CACXE,EAAmBa,KAAKf,EAAUa,QACtC,CACJ,KAAO,CAYH,IAAIG,EAAWjB,GAASA,EAAMkB,yBAA2BlB,EAAMkB,0BAE/D,GAAID,IAAanD,UAAW,CACxBsC,IACA,GAAIH,EAAW,CACXA,EAAUa,SACd,CACJ,KAAO,CACHG,EAASD,KAAK,WACVZ,IACA,GAAIH,EAAW,CACXA,EAAUa,SACd,CACJ,EAAG,SAAUK,GACTf,IACA,GAAIH,EAAW,CACXA,EAAUa,SACd,CACAlF,EAAIwF,MACA,sIACAD,EACA,+DACR,EACJ,CACJ,CACJ,EAEAnD,KAAKqD,QAAU,SAAUzC,GACrB,IAAIgB,EAAgB/E,EAAQ2D,IAAII,GAEhC,GAAIgB,GAAiBA,EAAcE,cAAgB,KAAM,CACrD9E,EAAYqG,QAAQzB,GACpB3E,EAAgBoG,QAAQzB,EAAc1B,SACtC/C,EAAQkG,QAAQzB,EAAcC,KAClC,CACJ,EAEA7B,KAAKyB,OAAS,SAAUb,GACpB,IAAIgB,EAAgB/E,EAAQ2D,IAAII,GAEhC,GAAIgB,EAAe,CACf5E,EAAYyE,OAAOG,EAAc3C,IACrC,CACJ,EAEAe,KAAKsD,mBAAqB,SAAUC,EAASvB,EAAOwB,GAChD,IAAIC,EACAC,EAAY5G,EAAe6F,aAE/B,GAAI9F,EAAQ2D,IAAI+C,GAAU,CACtBE,EAAe3G,EAAe6G,cAAc3B,GAC5C,GAAI/E,EAAgB2G,qBAAuB,OAASJ,EAAY,CAC5DzF,EAAK8F,cAAcC,QAAQ,aAAc,YAAa9B,GACtDnF,EAAQkG,OAAOU,GACf,OAAOC,EAAU3B,QAAQC,EAC7B,KAAO,CAEHjE,EAAK8F,cAAcC,QAAQ,aAAc,YAAa9B,GACtD,OAAO0B,EAAU/B,MAAMK,EAAOyB,EAClC,CACJ,CAEA,OAAOC,EAAU3B,QAAQC,EAC7B,EAEAhC,KAAK+D,sBAAwB,SAAUR,EAASvB,EAAOgC,EAAOC,EAAKT,EAAYU,GAC3E,IAAIC,EAAOnE,KACPoE,EACAC,EACAC,EAEJ,GAAIN,GAASC,GAAOA,EAAIM,uBAAyBN,EAAIM,0BAA4B,KAAM,CACnFN,EAAIO,YAAY,qBAAsB,MAAO,MAC7CxH,EAAYyH,uBAAuBR,EAAK,4BAA6B,uBAAwB,CAAC,EAAG,MACrG,CAEA,GAAIV,GAAWvB,EAAO,CAClB,GAAIA,EAAMK,UAAYvF,EAAe2F,6BAA6B3F,EAAe0F,YAAYR,EAAMK,WAAY,CAC3GgC,GAAqBH,EAAqBlE,KAAKsD,mBAAmBC,EAASvB,EAAOwB,GAAc1D,SACpG,MAAO,GAAIjD,EAAQ2D,IAAI+C,GAAU,CAC7B,GAAItG,EAAgB2G,qBAAuB,OAASJ,EAAY,CAC5Dc,EAAoB,IAAI3G,OAAO+G,SAC/B1E,KAAK+B,QAAQwB,EAASvB,EAAOsC,GAC7BD,EAAmBC,EAAkBK,SACzC,KAAO,CACH3E,KAAK2B,MAAM4B,EACf,CAEAxF,EAAK8F,cAAcC,QAAQ,aAAc,YAAa9B,EAC1D,MAAO,GAAIA,EAAM4C,eAAiB5C,EAAM4C,gBAAiB,CAGrD,GAAIpB,EAAY,CACZa,EAAmBrC,EAAM6C,mBAAmB,yCAChD,CACJ,KAAO,CACHT,EAAuBhG,EAAgB0G,QAAQ9C,EAAM+C,qBAAuB,EAG5E,GAAI/E,KAAKgF,kBAAkBzB,EAASa,KAA0B,MAAO,CACjEE,EAAoB,IAAI3G,OAAO+G,SAC/B1E,KAAK+B,QAAQwB,EAASvB,EAAOsC,GAC7BD,EAAmBC,EAAkBK,SACzC,CACJ,CAEA,GAAInB,IAAe,KAAM,CACrB,GAAIa,IAAqBvE,UAAW,CAChCE,KAAKiF,mBAAmBC,EAC5B,KAAO,CACHb,EAAiBrB,KAAK,WAClBmB,EAAKc,mBAAmBC,EAC5B,EACJ,CACJ,CAGA,GAAI3B,EAAQuB,QAAQ,6BAA+B,EAAG,CAClD/G,EAAK8F,cAAcC,QAAQ,aAAc,yBAC7C,CACJ,CAEA/F,EAAK8F,cAAcC,QAAQ,kBAAmB,uBAE9C,GAAIO,IAAqBvE,UAAW,CAChCuE,GAAmB,IAAI1G,OAAO+G,UAAW5B,UAAU6B,SACvD,CAEA,OAAON,CACX,EAEA,SAASa,EAA8B5D,GACnC,OAAQA,EAAK6D,MAAMC,gBAAkB3F,EAAgBE,UACzD,CAEAK,KAAKiF,mBAAqB,SAAUI,EAAcC,GAC9C,IACI,IAAInB,EAAOnE,KACPuF,EAA6B,GAEjC1I,EAAQ2I,QAAQ,SAAUlE,GACtB,GAAI+D,EAAaI,MAAMzF,KAAM,CAACsB,MAAW,KAAM,CAC3CiE,EAA2BG,KAAKpE,EAAK6D,MACzC,CACJ,GACAI,EAA2BC,QAAQ,SAAUG,GACzC,IAAIrB,EACJ,GAAIgB,EAAkB,CAClBhB,EAAoB,IAAI3G,OAAO+G,SAC/BY,EAAiBI,KAAKpB,EAAkBK,UAC5C,CACAR,EAAKpC,QAAQ4D,EAAevF,MAAOuF,EAAe/C,UAAW0B,EACjE,EACJ,CAAE,MAAOsB,GACLhI,EAAIwF,MAAM,6EAA+EwC,EAC7F,CACJ,EAEA5F,KAAK6F,iBAAmB,SAAUtC,EAASvB,EAAOgC,EAAOC,GACrD,GAAIV,GAAWvB,EAAO,CAClB,GAAIA,EAAM8D,YAAc9D,EAAM8D,eACzBhJ,EAAe2F,6BAA6B3F,EAAe0F,YAAYR,EAAMK,YAC7ExF,EAAQ2D,IAAI+C,IACXvB,EAAM4C,eAAiB5C,EAAM4C,iBAAmB,CAClD5H,EAAYyH,uBAAuBzC,EAAO,4BAA6B,wBAAyB,CAAC,EAAG,MACxG,CACJ,CACJ,EAGAhC,KAAK+F,gBAAkB,SAAUxC,EAASvB,EAAOgC,EAAOC,GAEpD,IAAI+B,EAAehC,EAAMc,QAAQ,6BAA+B,GACzDd,EAAMc,QAAQ,wBAA0B,GACxCd,EAAMc,QAAQ,6BAA+B,GAC7Cd,EAAMc,QAAQ,+BAAiC,GAC/Cd,EAAMc,QAAQ,uCAAyC,GACvDd,EAAMc,QAAQ,uCAAyC,EAE9D9E,KAAK+D,sBAAsBR,EAASvB,EAAOgC,EAAOC,EAAK+B,GAAeA,GACtE,GAAIA,IAAiB,KAAM,CACvBhJ,EAAYiJ,sBAAsBnG,UACtC,CAGA,GAAIkE,EAAO,CACP,GAAInH,EAAQ2D,IAAIwD,GAAQ,CACpBhE,KAAKqD,QAAQW,EACjB,KAAO,CAGP,CACJ,CACJ,EAEAhE,KAAKkG,SAAW,SAAU9F,EAAO+F,EAAYC,EAAS9F,EAAiB+F,GACnE,IAAKrG,KAAKU,aAAaN,GAAQ,CAC3B,GAAI+F,EAAW3B,YAAa,CACxB2B,EAAW3B,YAAY,cAAe,KAAM,KAChD,CACA3H,EAAQyJ,IAAIlG,EAAO,CACfF,QAAS,CAAC,EACVO,UAAWH,EACXF,MAAOA,EACPmG,IAAK,UACLC,mBAAoBtJ,EAAqBuJ,uBACzC7D,UAAWuD,EACXtE,KAAMzE,EAAiBsJ,YAAYN,GACnCnH,IAAKa,UACLsF,cAAeiB,IAAmBA,EAAeM,aAAeN,EAAeO,YAC/EC,UAAWT,EACXU,iBAAkBV,GAAWA,EAAQU,iBACrCC,sBAAuB,KACvBjF,YAAa,QAEjBtD,EAAmB8B,GAAmBF,EAGtCtD,EAAekK,cAAcb,EAAY/F,GAGzC,OAAO,IACX,CACA,OAAO,KACX,EAEAJ,KAAKiH,WAAa,SAAU7G,GACxB,GAAIJ,KAAKU,aAAaN,GAAQ,CAC1B1B,EAAsB7B,EAAQ2D,IAAIJ,GAElC,GAAItD,EAAe6G,cAAcjF,EAAoBkE,WAAY,CAE7D9F,EAAekK,cAActI,EAAoBkE,UAAWxC,EAChE,CAKJ,CACJ,EAEAJ,KAAKgF,kBAAoB,SAAU5E,EAAOgE,EAAsBiC,GAC5D,IAAIa,EAGJ,GAAI9G,IAAU,gCAAiC,CAC3C,OAAO,KACX,CAGA,IAAK3B,GAAuB2B,EAAM0E,QAAQzG,MAAkB,EAAG,CAC3D,OAAO,IACX,CAEA,IAAKI,IAAwB2B,EAAM0E,QAAQ,6BAA+B,GACnE1E,EAAM0E,QAAQ,wBAA0B,GACxC1E,EAAM0E,QAAQ,6BAA+B,GAC7C1E,EAAM0E,QAAQ,+BAAiC,GAC/C1E,EAAM0E,QAAQ,uCAAyC,GACvD1E,EAAM0E,QAAQ,uCAAyC,GAAI,CAC9D,OAAO,IACX,CAGAoC,EAAaxJ,EAAcyJ,QAAQvH,OAAOwH,SAASC,MAAM7G,IAAI,kBAC7D,GAAI0G,IAAezH,EAAgBC,MAAQwH,IAAezH,EAAgBE,WAAY,CAClF,GAAI0G,EAAgB,CAChBA,EAAeM,YAAcO,CACjC,CACA,OAAO,IACX,CACA,OAAO,KACX,EAEAlH,KAAKsH,8BAAgC,SAAUC,EAAYnB,EAASC,GAChE,IAAIa,EAGJ,GAAIK,GAAcA,EAAWC,iBAAmB,SAAWD,EAAWE,SAAW,cAAe,CAC5F,OAAO,KACX,CASAP,EAAaK,GAAcA,EAAWG,QAAUH,EAAWG,OAAO,kBAClE,GAAIR,IAAezH,EAAgBC,MAAQwH,IAAezH,EAAgBE,WAAY,CAClF,GAAI0G,EAAgB,CAChBA,EAAeO,WAAaM,CAChC,CACA,OAAO,IACX,CAEA,GAAId,GAAWA,EAAQuB,IAAK,CACxBT,EAAaxJ,EAAcyJ,QAAQf,EAAQuB,KAAKnH,IAAI,kBACpD,GAAI0G,IAAezH,EAAgBC,MAAQwH,IAAezH,EAAgBE,WAAY,CAClF,GAAI0G,EAAgB,CAChBA,EAAeO,WAAaM,CAChC,CACA,OAAO,IACX,CACJ,CAEA,OAAO,KACX,EAEAlH,KAAK4H,iBAAmB,SAAUxB,GAC9B,GAAIA,EAAQyB,kBAAoB,OAASzB,EAAQ0B,uBAAyB1B,EAAQ0B,sBAAsBC,WAAW,qBAAsB,CACrI,MAAO,QACX,CACA,OAAO3B,EAAQyB,eACnB,EAEA7H,KAAKgI,wBAA0B,SAAU5B,GACrC,GAAIA,EAAQ6B,iBAAmB7B,EAAQ6B,iBACnC7B,EAAQ6B,gBAAgBC,kBAAmB,CAC3C,OAAO9B,EAAQ6B,gBAAgBC,iBACnC,CAEA,OAAOpI,SACX,EAEAE,KAAKmI,mCAAqC,SAAU/B,GAChD,GAAIA,EAAQ6B,iBAAmB7B,EAAQ6B,gBAAgBG,0BAA2B,CAC9E,OAAO,IACX,CAEA,OAAO,KACX,EAEApI,KAAKqI,4BAA8B,SAAUjC,GACzC,IAAIkC,EAAetI,KAAKgI,wBAAwB5B,GAEhD,GAAIkC,IAAiBA,EAAaC,UAAY,MAAQD,IAAiB,MAAO,CAC1E,OAAO,IACX,CAEA,OAAO,KACX,EAEAtI,KAAKwI,uBAAyB,SAAUpC,GACpC,IAAIkC,EAAetI,KAAKgI,wBAAwB5B,GAEhD,GAAIkC,GAAgBA,EAAaG,WAAa,MAAO,CACjD,OAAO,IACX,CAEA,OAAO,KACX,EAEAzI,KAAK0I,uBAAyB,SAAUtC,GACpC,OAAQpG,KAAKwI,uBAAuBpC,IAAYpG,KAAKqI,4BAA4BjC,EACrF,EAEApG,KAAK2I,+BAAiC,SAAUvC,GAC5C,OAAOpG,KAAKwI,uBAAuBpC,IAAYpG,KAAKqI,4BAA4BjC,EACpF,EAEApG,KAAK4I,iBAAmB,SAASvH,GAC7B,IAAIwH,EAAmB/L,EAAegM,QAAQzH,EAAM0H,iBACpD,GAAIF,EAAkB,CAClB,IAAIG,EAAUH,EAAiBxG,SAC/BvF,EAAemM,mBAAmBJ,GAClC,IAAIK,EAAmB,GACvBrM,EAAQ2I,QAAQ,SAAUlE,GACtB,GAAIA,EAAK6D,MAAMvC,YAAciG,EAAkB,CAC3CK,EAAiBxD,KAAKpE,EAAK6H,IAC/B,CACJ,GACAD,EAAiB1D,QAAQ3I,EAAQkG,QACjC/C,KAAK+B,QAAQV,EAAM0H,gBAAiBF,GACpC/L,EAAewF,eAAe0G,EAClC,CACAvM,IAAI2M,OAAOC,UAAUC,gBAAgB,mBAAmBtG,KAAK,SAAUuG,GACnE,IACIA,EAAiBC,YAAYC,iBAAiBpI,EAAMqI,aACxD,CAAE,MAAOtG,GACLxF,EAAIwF,MAAM,iEAAkEA,EAAO,mCACvF,CACJ,EACJ,EAEApD,KAAK2J,QAAU,SAAUC,EAASxD,EAASmB,EAAYjH,GACnD,IAAI6F,EACA0D,EACAzF,EAAuBhG,EAAgB0G,QAAQsB,EAAQyB,kBAAoB,EAC3EgB,EACAG,EACA3C,EAAiB,CACbM,YAAa7G,UACb8G,WAAY9G,WAIpB,IAAIM,EAAQ,cAAgBwJ,EAG5BzD,EAAarJ,EAAe0F,YAAY4D,EAAQuB,KAEhD,GAAIxB,GAAcrJ,EAAe2F,6BAA6B0D,GAAa,CACvE,GAAInG,KAAKgF,kBAAkB5E,EAAOgE,EAAsBiC,IACpDrG,KAAKsH,8BAA8BC,EAAYnB,EAASC,GAAiB,CAGzE,IAAKrG,KAAKU,aAAaN,GAAQ,CAC3BJ,KAAKkG,SAAS9F,EAAO+F,EAAYC,EAAS9F,EAAiB+F,EAC/D,CAEArG,KAAKiH,WAAW7G,EACpB,KAAO,CAEH1B,EAAsB,CAClB0B,MAAOA,EACPmG,IAAK,UACL3D,UAAWuD,EACXtE,KAAMzE,EAAiBsJ,YAAYN,GACnCnH,IAAKa,UAEb,CACJ,MAAO,GAAIE,KAAKgF,kBAAkB5E,EAAOgE,EAAsBiC,IAAmBrG,KAAKsH,8BAA8BC,EAAYnB,EAASC,GAAiB,CAEvJ,IAAKrG,KAAKU,aAAaN,GAAQ,CAG3ByJ,EAAUtC,EAAWC,eAAiB,IAAMD,EAAWE,OACvDoB,EAAmB/L,EAAegM,QAAQ,eAAiBe,IAAY7J,KAAK8J,WAAWD,GACvF,GAAIhB,EAAkB,CAClBG,EAAUH,EAAiBxG,SAC3BvF,EAAemM,mBAAmBJ,GAClC7I,KAAK+B,QAAQ,eAAiB8H,EAAShB,GACvC/L,EAAewF,eAAe0G,EAClC,CAEA7C,EAAanG,KAAK+J,2BAA2BH,EAASxD,GACtDpG,KAAKkG,SAAS9F,EAAO+F,EAAYC,EAAS9F,EAAiB+F,GAC3DvJ,EAAewJ,IAAIF,EAAQuB,IAAKxB,EACpC,CAEAnG,KAAKiH,WAAW7G,EACpB,MAAO,GAAIgG,EAAQyB,kBAAoB,MAASzB,EAAQ6B,iBAAmB7B,EAAQ6B,gBAAgB+B,iBAAmB,MAAQ,CAC1H7D,EAAanG,KAAKiK,6BAA6B7D,EAAQuB,KAIvD,GAAIJ,EAAY,CACZsC,EAAUtC,EAAWC,eAAiB,IAAMD,EAAWE,OACvDoB,EAAmB/L,EAAegM,QAAQ,eAAiBe,IAAY7J,KAAK8J,WAAWD,GACvF,GAAIhB,KAAsB1C,GAAc0C,IAAqB1C,GAAa,CACtE6C,EAAUH,EAAiBxG,SAC3BvF,EAAemM,mBAAmBJ,GAClC7I,KAAK+B,QAAQ,eAAiB8H,EAAShB,GACvC/L,EAAewF,eAAe0G,GAC9BhJ,KAAKkK,gCAAgClB,EACzC,CACJ,CAEA,IAAK7C,EAAY,CACbA,EAAanG,KAAK+J,2BAA2BH,EAASxD,GACtDtJ,EAAewJ,IAAIF,EAAQuB,IAAKxB,EACpC,CAEAzH,EAAsB,CAClB0B,MAAOA,EACPmG,IAAK,UACL3D,UAAWuD,EACXtE,KAAMzE,EAAiBsJ,YAAYN,GACnCnH,IAAKa,UAEb,KAAO,CACH,GAAIqG,EAAY,CACZ0D,EAAUtC,EAAWC,eAAiB,IAAMD,EAAWE,OACvDzH,KAAKmK,kBAAkBN,EAC3B,MAAO,GAAIzD,EAAQyB,kBAAoB,OAASzB,EAAQyB,kBAAoB,MAAQzB,EAAQyB,kBAAoB,OAAQ,CASpHgC,EAAUtC,EAAWC,eAAiB,IAAMD,EAAWE,OACvDoB,EAAmB/L,EAAegM,QAAQ,eAAiBe,IAAY7J,KAAK8J,WAAWD,GACvF,GAAIhB,EAAkB,CAClBG,EAAUH,EAAiBxG,SAC3BvF,EAAemM,mBAAmBJ,GAClC7I,KAAK+B,QAAQ,eAAiB8H,EAAShB,GACvC/L,EAAewF,eAAe0G,EAClC,CACJ,CACA7C,EAAanG,KAAK+J,2BAA2BH,EAASxD,GACtDtJ,EAAewJ,IAAIF,EAAQuB,IAAKxB,GAEhC,GAAIrJ,EAAesN,QAAQjE,EAAY,SAAU,CAC7CrJ,EAAeuN,gBAAgBlE,EAAY,CACvC,CACIjG,QAAS,mCACTuH,OAAQ,UAEZ,CACIvH,QAAS,mCACTuH,OAAQ,YAGpB,CAGA/I,EAAsB,CAClB0B,MAAOA,EACPmG,IAAK,UACL3D,UAAWuD,EACXtE,KAAMzE,EAAiBsJ,YAAYN,GACnCnH,IAAKa,UAEb,CACJ,EAEAE,KAAKsK,WAAa,WACd,OAAOnN,CACX,EAEA6C,KAAKuK,MAAQ,SAAUC,GACnB,IAAItI,EACAN,EAAgB4I,EAAOrF,MACvBvE,EAAS4J,EAAOrB,IAEpBnJ,KAAKuC,cAAc3B,GAEnB,GAAIgB,EAAcgB,UAAUP,QAAUT,EAAcgB,UAAUP,SAAU,CACpEH,EAAgBpF,EAAe0F,YAAYZ,EAAcgB,UAAUP,SACvE,CAEA,GAAIH,EAAe,CACf,IAAIQ,EAAW5F,EAAe6F,aAI9BD,EAASX,QAAQG,EAAetB,EAEpC,KAAO,CAEHgB,EAAcgB,UAAUb,SAC5B,CACJ,EAMA/B,KAAKyK,UAAa,WACd,IAAIC,EAAgB,MACpB,OAAO,WACH,IAAKA,EAAe,CAChBA,EAAgB,KAChB,IAAIvG,EAAOnE,KAGXnC,EAAS8M,GAAG,0CAA0CC,GAAG,SAAUvJ,GAC/D,IAAIwI,EAAUxI,EAAMwJ,OAAOrD,eAAiB,IAAMnG,EAAMwJ,OAAOpD,OAC/D,IAAI7G,EAAS,eAAiBiJ,EAC9B,GAAIhN,EAAQ2D,IAAII,GAAS,CACrB/D,EAAQ2D,IAAII,GAAQmG,sBAAwB1F,EAAMyJ,OACtD,CACJ,GACAjN,EAAS8M,GAAG,2BAA2BC,GAAG,SAAUvJ,GAChD8C,EAAK4G,wBAAwB1J,EAAM2J,OACvC,GAEAnN,EAAS8M,GAAG,oBAAoBC,GAAG,SAAUvJ,GACzC8C,EAAKyE,iBAAiBvH,EAC1B,EACJ,CACJ,CACJ,CAxBiB,GA0BjBrB,KAAKiL,KAAO,SAAUC,EAAYC,EAAsBC,EAAeC,EAAuBC,EAAuBC,EAAUC,GAC3H,IAAIrH,EAAOnE,KACPyL,EAGJ,GAAInO,EAAOoO,OAAOC,MAAO,CACrBF,EAAa,GAEb,GAAID,GAAwBA,EAAqBI,OAASJ,EAAqBI,MAAMD,MAAO,CACxFF,EAAaD,EAAqBI,MAAMD,KAC5C,CACJ,MAAO,GAAIrO,EAAOoO,OAAOG,OAAQ,CAC7BJ,EAAa,GAEb,GAAID,GAAwBA,EAAqBI,OAASJ,EAAqBI,MAAMC,OAAQ,CACzFJ,EAAaD,EAAqBI,MAAMC,MAC5C,CACJ,MAAO,GAAIvO,EAAOoO,OAAOI,QAAS,CAC9BL,EAAa,GAEb,GAAID,GAAwBA,EAAqBI,OAASJ,EAAqBI,MAAME,QAAS,CAC1FL,EAAaD,EAAqBI,MAAME,OAC5C,CACJ,KAAO,CACHL,EAAa,EACjB,CAEAnN,EAAkB,IAAIvB,EAAe,CACjCgP,YAAaT,EAAsBU,eACnCC,UAAW,cAGf1N,EAAW2M,EACX/M,EAAqBgN,EACrB9M,EAAc+M,EACdjO,EAAQ8N,KAAK5M,GACbI,EAAsB4M,EAEtBvO,EAAemO,KAAK,CAChB3M,gBAAiBA,GAClBkN,EAAsBxL,MAGzBnD,EAAQoO,KAAKQ,EAAY,SAAUS,GAC/BlM,KAAKuK,MAAM2B,EACf,EAAEC,KAAKnM,OAGPA,KAAKoM,kCAAkC,CACnC,mCAAoC,CAChCC,cAAe,CACXC,OAAQ,CACJC,aAAc,KACdC,iBAAkB,CAAC,OACnBC,kBAAmB,SAAUC,GACzBA,EAAU1J,KAAK,SAAU2J,GACrB/O,EAAIgP,KAAK,2CAA6CD,EAC1D,GAAGE,MAAM,SAAUC,GACflP,EAAIwF,MAAM,kDAAoD0J,EAClE,EACJ,GAEJ/K,QAAS,CACLwK,aAAc,KACdC,iBAAkB,CAAC,OACnBC,kBAAmB,SAAUC,GACzBA,EAAU1J,KAAK,SAAU2J,GACrB/O,EAAIgP,KAAK,4CAA8CD,EAC3D,GAAGE,MAAM,SAAUC,GACflP,EAAIwF,MAAM,mDAAqD0J,EACnE,EACJ,GAEJnL,MAAO,CACH4K,aAAc,KACdC,iBAAkB,CAAC,OACnBC,kBAAmB,SAAUC,GACzBA,EAAU1J,KAAK,SAAU2J,GACrB/O,EAAIgP,KAAK,0CAA4CD,EACzD,GAAGE,MAAM,SAAUC,GACflP,EAAIwF,MAAM,iDAAmD0J,EACjE,EACJ,GAEJzJ,QAAS,CACLkJ,aAAc,KACdC,iBAAkB,CAAC,OACnBC,kBAAmB,SAAUC,GACzBA,EAAU1J,KAAK,SAAU2J,GACrB/O,EAAIgP,KAAK,4CAA8CD,EAC3D,GAAGE,MAAM,SAAUC,GACflP,EAAIwF,MAAM,mDAAqD0J,EACnE,EACJ,IAGRC,cAAe,CACXC,UAAW,CACPC,qBAAsB,SAAUC,GAC5BpQ,EAAeqQ,gBAAgBD,EAAe/G,WAAY+G,EAAeE,aAAaC,MACtF,OAAO,IAAI1P,OAAO+G,UAAW5B,QAAQ,CAAC,GAAG6B,SAC7C,GAEJ2I,MAAO,CACHL,qBAAsB,SAAUC,GAC5B,IAAIK,EAASL,EAAeE,cAAgBF,EAAeE,aAAaC,KACpEG,EAAS,GACTC,EAAWP,EAAe/G,WAAWpB,qBACrC2I,EAAeR,EAAe/G,WAAWwH,iBACzCC,EAAkB,MACtB,GAAIL,EAAQ,CACR,GAAIL,EAAe/G,WAAW0H,mBAAqB,OAC9CJ,IAAa,OAASA,IAAa,MAAQA,IAAa,QAAUA,IAAa,OAASA,IAAa,OAClGC,IAAiB,OAASA,IAAiB,OAASA,IAAiB,QAAUA,IAAiB,OAAQ,CAC5GE,EAAkB,IACtB,CACA,GAAIL,EAAOO,aAAe,OAASF,EAAiB,CAChDJ,EAAO9H,KAAK,CAAC+B,OAAS,SAASvH,QAAU,qCACzCsN,EAAO9H,KAAK,CAAC+B,OAAS,UAAUvH,QAAU,oCAC9C,CACA,GAAIqN,EAAOQ,gBAAkB,KAAM,CAC/BP,EAAO9H,KAAK,CAAC+B,OAAS,gBAAgBvH,QAAU,yBACpD,CACA,GAAIqN,EAAOS,eAAiB,KAAM,CAC9BR,EAAO9H,KAAK,CAAC+B,OAAS,eAAevH,QAAU,yBACnD,CACA,GAAIqN,EAAOU,SAAWV,EAAOU,QAAQC,iBAAmB,KAAM,CAC1DV,EAAO9H,KAAK,CAAC+B,OAAS,SAASvH,QAAU,6BAC7C,CACA,GAAIsN,EAAOvM,OAAS,EAAG,CACnBnE,EAAeqQ,gBAAgBD,EAAe/G,WAAYqH,EAC9D,CACJ,CACA,OAAO,IAAI7P,OAAO+G,UAAW5B,UAAU6B,SAC3C,KAIZ,UAAW,CACPoI,cAAe,CACXoB,aAAc,CACVlB,qBAAsB,SAAUC,GAC5B,IAAIO,EAAWP,EAAe/G,WAAWpB,qBACrC2I,EAAeR,EAAe/G,WAAWwH,iBAC7C,IAAKF,IAAa,OAASA,IAAa,MAAQA,IAAa,QACtDC,IAAiB,OAASA,IAAiB,SAAWR,EAAe/G,WAAW0H,mBAAqB,MAAO,CAC/G1J,EAAKiK,6BAA6BlB,EAAe/G,YACjD+G,EAAe/G,WAAWkI,cAAc,MAExC3P,EAAsB,CAClB0B,MAAO8M,EAAe/G,WAAW3E,QACjC+E,IAAK,UACL3D,UAAWsK,EAAe/G,WAC1BtE,KAAM/B,UACNb,IAAKa,UAEb,CACA,OAAO,IAAInC,OAAO+G,UAAW5B,QAAQ,CAAC,GAAG6B,SAC7C,OAQhB5G,EAAK8F,cAAcmJ,UAAU,aAAc,qBAAsBhN,KAAKkB,mBAAoBlB,MAC1FjC,EAAK8F,cAAcmJ,UAAU,aAAc,kBAAmBhN,KAAK0B,QAAS1B,MAE5E9C,EAAqB+N,KAAKjL,KAAKsO,mBAAoB/C,GACnDvL,KAAKyK,WACT,EAEAzK,KAAKuO,WAAa,SAAUC,GACxBrQ,EAAmBsQ,kBAAkBD,EACzC,EAEAxO,KAAKuC,cAAgB,SAAUmM,GAC3B,IAAIC,EAAW7R,EAAegM,QAAQ4F,GAClCE,EAAc9R,EAAe2F,6BAA6BkM,GAE9D,IAAKC,EAAa,CACdzQ,EAAmB0Q,qBAAqBH,EAAK,KACjD,CACJ,EAEA1O,KAAKmK,kBAAoB,SAAUN,GAC/B,IAAI3H,EAAgBlC,KAAK8J,WAAWD,GAEpC,GAAI3H,EAAe,CACflC,KAAKuC,cAAcL,EAAcV,SACjCU,EAAcH,SAClB,CACJ,EAEA/B,KAAK8J,WAAa,SAAUD,GACxB,OAAO1L,IACCA,EAAmB2Q,mBAAmB,iBAAkB,eAAiBjF,IACtE1L,EAAmB2Q,mBAAmB,iBAAkB,wBAA0BjF,GACjG,EAEA7J,KAAK+O,qBAAuB,WACxB,OAAO5Q,CACX,EAEA6B,KAAKgP,MAAQ,SAAUN,GACnBvQ,EAAmB6Q,MAAM,iBAAkBN,EAAK,OACpD,EAEA1O,KAAKiP,sBAAwB,WACzB,OAAOvQ,CACX,EAEAsB,KAAK+K,wBAA0B,SAAUmE,GACrC,IAAIC,EAAWnP,KAAKiP,wBAGpB,GAAIE,EAASvM,UAAW,CACpBuM,EAASvM,UAAUwM,iBAAiB,6CAA8CF,EACtF,CACJ,EAUAlP,KAAKqP,gBAAkB,SAAUC,EAAuBC,GACpD,SAASC,EAA8BlO,GACnC,OAAQA,EAAK6D,MAAM2B,mBAAqBwI,EAAsBxI,gBAClE,CACA,IAAIxB,EAAmB,GACnBrD,EAAY,IAAItE,OAAO+G,SAE3B1E,KAAKC,gBAAgBwP,YAAY,MACjCzP,KAAKiF,mBAAmBuK,EAA8BlK,GAEtDzC,QAAQ6M,IAAIpK,GAAkBtC,KAAK,WAC/BhG,EAAYqS,gBAAgBC,EAAuBC,GAAkBI,KAAK1N,EAAUa,SAAS8M,KAAK3N,EAAU4N,OAChH,GAEA,OAAO5N,EAAU0C,SACrB,EAEA3E,KAAK8P,gBAAkB,SAAUlP,EAAQmP,EAA2BC,EAAczI,EAAYjH,GAC1FyP,EAA0BE,eAAiB3R,EAAgB4R,eAa3DH,EAA0BI,qBAAuBH,EAAe,UAAY,UAE5EhQ,KAAK2J,QAAQ/I,EAAQmP,EAA2BxI,EAAYjH,GAC5D,GAAIhB,EAAkC2B,OAAS,EAAG,CAC9CvC,EAAoBkE,UAAUwJ,kCAAkC9M,EACpE,CACA,GAAIC,EAAmC6Q,OAAQ,CAC3C1R,EAAoBkE,UAAUyN,kBAAkB9Q,EAAmC6Q,OACvF,CACA,OAAO1R,EAAoBkE,SAC/B,EAEA5C,KAAKsQ,kBAAoB,WACrB,OAAOhS,CACX,EAEA0B,KAAKuQ,mBAAqB,SAAUjF,GAChChN,EAAgBkS,wBAAwBrT,EAAQsT,kBAAkBtE,KAAKnM,OACvE1B,EAAgBoS,oBAAoBvT,EAAQwT,cAAcxE,KAAKnM,OAC/D1B,EAAgBsS,0BAA0BzT,EAAQ0T,oBAAoB1E,KAAKnM,OAC3E1B,EAAgBwS,6BAA6BxF,EAAsByF,yBAAyB5E,KAAKnM,MACrG,EAEAA,KAAKsO,iBAAmB,WACpB,OAAO1R,CACX,EAyBAoD,KAAKgR,gBAAkB,SAAUC,GAC7B,IAAIC,EAA4BlR,KAAKmR,sCAGrCD,EAA0B1L,QAAQ,SAAU4L,GACxCxT,EAAIgP,KAAK,0BAA4BwE,EAAkC5P,SACvE4P,EAAkCC,UAAU,MAChD,GAEAvU,EAAe0I,QAAQ,SAAU8L,GAC7B,GAAIA,GAAiBA,IAAkBL,EAAuB,CAC1D,IACIrT,EAAIgP,KAAK,0BAA4B0E,EAAc9P,SACnD8P,EAAcD,UAAU,MAC5B,CAAE,MAAOzL,GAET,CACJ,CACJ,GAEA,GAAIqL,EAAuB,CACvBrT,EAAIgP,KAAK,wBAA0BqE,EAAsBzP,SACzDyP,EAAsBI,UAAU,KACpC,CACJ,EAEArR,KAAKuR,yBAA2B,SAAUN,GACtCjR,KAAKgP,MAAMiC,EAAsBzP,SAEjC,GAAIyP,EAAsBO,cAAc,8CAA+C,CACnFP,EAAsB7B,iBAAiB,4CAA6C,MACxF,KAAO,CACH6B,EAAsB7B,iBAAiB,SAAU,MACrD,CACApS,EAAYiJ,sBAAsBgL,GAClCrT,EAAIgP,KAAK,qFACb,EAEA5M,KAAKyR,iCAAmC,SAAUR,EAAuBjN,EAAOtB,EAAUpC,EAAiB8F,EAASsL,GAChH,IAAIvN,EAAOnE,KAEP2R,EAAanT,EAAmB8B,GAEpC,GAAIxD,EAAe6G,cAAcsN,GAAwB,CAErDnU,EAAekK,cAAciK,EAAuBU,EACxD,CAGA,OAAOjP,EAASW,QAAQ4N,EAAuBU,EAAYvL,EAASsL,GAC/D1O,KAAK,WACFmB,EAAKoN,yBAAyBN,EAClC,EAAG,SAAUW,GACThU,EAAIwF,MAAMwO,GAAUA,EAAOC,SAAWD,EAC1C,EACR,EAEA5R,KAAK8R,uBAAyB,SAAUb,EAAuBtJ,EAAK3D,EAAOtB,EAAUpC,EAAiB8F,EAASsL,GAC3G,IAAIvN,EAAOnE,KAGXxB,EAAmB8B,GAAmB0D,EAEtC,GAAIlH,EAAe6G,cAAcsN,GAAwB,CAErDnU,EAAekK,cAAciK,EAAuBjN,EACxD,CAEAhE,KAAK+R,oBAGL,OAAOrP,EAAS4J,OAAO2E,EAAuBtJ,EAAK3D,EAAOoC,EAASsL,GAC9D1O,KAAK,SAAUgP,GACZ,GAAIA,GAAWA,EAAQC,mBAAoB,CACvCpV,EAAQkG,OAAOiP,EAAQC,mBAC3B,CACA9N,EAAKoN,yBAAyBN,EAClC,EAAG,SAAUW,GACThU,EAAIwF,MAAMwO,GAAUA,EAAOC,SAAWD,EAC1C,EACR,EAEA5R,KAAK+R,kBAAoB,WACrB,IAAK/R,KAAKsK,aAAa4H,wBAAyB,CAC5C5T,EAAgB6T,cACpB,CACA,IAAKnS,KAAKsK,aAAa8H,oBAAqB,CACxC,IAAIC,EAAQrU,EAAOsU,UACnB,GAAID,GAASA,EAAMvN,QAAQ,uBAAyB,EAAG,CACnDxG,EAAgBiU,SAAS,GAAI,KACjC,KAAO,CACHjU,EAAgBiU,UACpB,CACJ,CACA,IAAKvS,KAAKsK,aAAakI,0BAA2B,CAC9ClU,EAAgBmU,gBACpB,CACA,IAAKjT,EAAyB,CAC1BlB,EAAgBoU,mBACpB,CACJ,EAEA1S,KAAK2S,0BAA4B,SAAU1B,EAAuBpJ,EAAiBF,GAC/E,IAAIxD,EAAOnE,KACXiR,EAAsBzM,YAAY,qBAAsB,KAAM,MAC9D,OAAOyM,EACF2B,yBAAyB/K,EAAiBF,GAC1C3E,KAAK,WACFmB,EAAK6K,MAAMiC,EAAsBzP,SACjC,GAAIyP,EAAsBO,cAAc,8CAA+C,CACnFP,EAAsB7B,iBAAiB,4CAA6C,MACxF,KAAO,CACH6B,EAAsB7B,iBAAiB,SAAU,MACrD,CACAxR,EAAIgP,KAAK,qFACb,EAAG,SAAUgF,GACThU,EAAIwF,MAAMwO,GAAUA,EAAOC,SAAWD,EAC1C,EACR,EAEA5R,KAAK+J,2BAA6B,SAAUnJ,EAAQmP,GAChD,OAAO/S,EAAY+M,2BAA2BnJ,EAAQmP,EAC1D,EAEA/P,KAAK6S,6BAA+B,SAAUvB,EAAewB,EAAcC,GAGvE,IAAIC,EACAtE,EAAM4C,EAAc9P,MAAQ8P,EAAc9P,QAAU,GACpD2C,EAAOnE,KACX,IAAIiT,EAAc7V,EAAiBsJ,cAC/BwM,EAAQD,EAAYE,KACpBC,EAASH,EAAYI,MAGzB/B,EAAcgC,iBAAiB,CAAEC,iBAAkBR,IAInDC,EAAW1B,EAAckC,KACzBlC,EAAckC,KAAO,WACjB,GAAIR,EAAU,CACVA,EAASvN,MAAMzF,KAAMyT,UACzB,CAEAtP,EAAKmG,aAAaoJ,iCAGlBC,WAAW,WAGP,IAAIC,EAAanW,EAAW,CAAC,EAAGqV,UACzBc,EAAWC,gBAClBD,EAAWxT,MAAQsO,EACnBkF,EAAWE,UAAYZ,EACvBU,EAAWG,WAAaX,EACxBrV,EAAK8F,cAAcC,QAAQ,aAAc,YAAa8P,GACtDhW,EAAIgP,KAAK,iBACb,EAAG,GAKH,IAAIoH,EAAmB7P,EAAK8P,qCAAqCnB,GAEjErW,IAAI2M,OAAO8K,UAAUC,OAAO9W,MAAM+W,qBAAqB,YAAaJ,EACxE,CACJ,EAQAhU,KAAKiU,qCAAuC,SAAUnB,GAClD,IAAIkB,EAAmB,CAAC,EACxB,IAAKlB,EAAc,CACf,OAAOA,CACX,CACA,CAAC,kBAAmB,mBAAoB,MAAO,wBAAyB,QAAQtN,QAAQ,SAAU6O,GAC9FL,EAAiBK,GAASvB,EAAauB,EAC3C,GACAC,OAAOC,OAAOP,GACd,OAAOA,CACX,EAEAhU,KAAKwU,oBAAsB,SAAU3K,EAASvJ,EAAiBmU,EAAUC,GACrE,IAAIC,EAAa,eAAiB9K,EAC9BtJ,EAAY1D,EAAQ2D,IAAImU,GACxBC,EAAyB,GACzBC,EAAsB,MACtBC,EAGJ,GAAIvU,EAAW,CAIX,GAAImU,IAAkB,MAAQA,IAAkB5U,WAAa4U,IAAkB,GAAI,CAC/EE,EAAyBF,EAAcK,cAEvCF,EAAsBD,EAAuB9P,QAAQ,eAAiB,GAClE8P,EAAuB9P,QAAQ,0BAA4B,GAC3D8P,EAAuB9P,QAAQ,2BAA6B,GAC5D8P,EAAuB9P,QAAQ,oBAAsB,CAC7D,CAEAgQ,EAAmCD,WACvBJ,IAAa,UAAYA,EAASxT,OAAS,GAEvD,GAAIV,EAAUE,YAAcH,IAAoBwU,EAAiC,CAC7E,MAAO,CACHE,oBAAqB,KACrB5U,MAAOG,EAAUH,MACjBwC,UAAWrC,EAAUqC,UAE7B,CACA,MAAO,CACHoS,oBAAqB,MACrB5U,MAAOG,EAAUH,MACjBwC,UAAWrC,EAAUqC,UAE7B,CAEA,MAAO,CACHoS,oBAAqB,MACrB5U,MAAON,UACP8C,UAAW9C,UAEnB,EAEAE,KAAKiV,mBAAqB,SAAUC,EAAYC,EAAYnR,EAAO9B,EAAekE,EAAS9F,EAAiB+F,EAAgBqL,GACxH,IAAIhP,EAAW5F,EAAe6F,aAC1BM,EAEJf,EAAcsC,YAAY,qBAAsB,KAAM,MACtD,GAAI3H,EAAQ2D,IAAIwD,IAAUkR,IAAe,MAAO,CAC5CjS,EAAWjD,KAAKyR,iCAAiCvP,EAAe8B,EAAOtB,EAAUpC,EAAiB8F,EAASsL,EAC/G,KAAO,CACHzO,EAAWjD,KAAK8R,uBAAuB5P,EAAekE,EAAQuB,IAAK3D,EAAOtB,EAAUpC,EAAiB8F,EAASsL,GAG9G,GAAIyD,EAAY,CACZ,IAAKnV,KAAKU,aAAasD,GAAQ,CAC3BhE,KAAKkG,SAASlC,EAAO9B,EAAekE,EAAS9F,EAAiB+F,EAClE,CACJ,CACJ,CAEA,OAAOpD,CACX,EAEAjD,KAAKoV,cAAgB,SAAUvL,EAASjJ,EAAQ2G,EAAYnB,EAASiP,EAAW/U,EAAiBgV,GAC7F,IAAInR,EAAOnE,KACPkC,EACAqT,EACAnR,EAAuBhG,EAAgB0G,QAAQsB,EAAQyB,kBAAoB,EAC3E8M,EAAa,eAAiB9K,EAC9B2L,EACAL,EACA1H,EACAyH,EAAa,MACbO,EACAC,EACAC,EACAC,EAAmB,IAAIjY,OAAO+G,SAC9BmR,EACAC,EACAC,EACAC,EACAC,EACA5R,GAAmB,IAAI1G,OAAO+G,UAAW5B,UAAU6B,UACnD0B,EAAiB,CACbM,YAAa7G,UACb8G,WAAY9G,WAEhBoW,EACAC,EACAC,EACAC,EACA3E,EAAsC,MAI1CuE,EAAsBnZ,EAAe0F,YAAY4D,EAAQuB,KACzD,GAAIsO,GAAuBnZ,EAAe2F,6BAA6BwT,GAAsB,CACzFC,GAAsB,IAAII,MAAOC,UAAYN,EAAoBO,uBAAuBC,KACxF,GAAK3Z,EAAe4Z,sBAAsBT,IAAwBA,EAAoBU,oBAAsB,MACvG7Z,EAAe8Z,yBAAyBX,IAAwBC,GAAuB,MACxFD,EAAoBY,uBAAyB,KAAM,CACnDjZ,EAAIkZ,QACA,kEAAoEb,EAAoBzU,QAAU,IAClG,YAAcyU,EAAoBU,oBAAsB,KAAO,2CAC3D,wCAA0CT,EAAsB,QACpE,6DACJpZ,EAAemM,mBAAmBgN,GAClCjW,KAAK+B,QAAQ4S,EAAYsB,GACzBnZ,EAAewF,eAAe8D,EAAQuB,KACtCsO,EAAsBnW,UAGtBwV,EAAqBxV,SACzB,CACJ,CAGA,UAAWwV,IAAuB,SAAU,CACxCa,EAAWrY,EAAYiZ,eAAezB,GACtC,GAAIa,EAAU,CACVC,EAAgB,eAAiBD,EAAS3O,eAAiB,IAAM2O,EAAS1O,OAC1EuO,EAAsBnZ,EAAQ2D,IAAI4V,EACtC,CACA,GAAIJ,EAAqB,CACrBD,EAAuBC,EAAoBpT,SAC/C,KAAO,CACHyT,EAAiBlY,EAAmB6Y,qBAAuB7Y,EAAmB6Y,uBAAyBlX,UACvG,GAAIuW,EAAgB,CAChBN,EAAuBhY,EAAKkZ,KAAKZ,EACrC,CACJ,CACJ,CAEAd,EAA0BQ,EAAuBjZ,EAAe2F,6BAA6BsT,GAAwB,MACrH,GAAIA,GAAwBR,EAAyB,CACjD,GAAIS,EAAqB,CACrB/Y,EAAgB0E,MAAMqU,EAAoB9V,QAC9C,CACAmE,EAAmBrE,KAAK+D,sBAAsBqS,EAAeL,EAAsBjW,UAAWA,UAAW,MAAO,OAChH,GAAIiW,IAAyBE,EAAqB,CAC9CvE,EAAsC,IAC1C,CACJ,CAEArN,EAAiBrB,KAAK,WAClBmS,EAAahR,EAAKa,kBAAkB2P,EAAYvQ,EAAsBiC,IAAmBlC,EAAKmD,8BAA8BC,EAAYnB,EAASC,GAEjJoH,EAAWtJ,EAAKyD,iBAAiBxB,GACjCqP,EAAoBjY,EAAgB0Z,2BAA2BzJ,GAE/DvL,EAAgBpF,EAAe0F,YAAY4D,EAAQuB,KACnD4N,EAA0BzY,EAAe2F,6BAA6BP,GAEtE,IAAKqT,EAAyB,CAE1B,GAAI7W,GAAuBiW,IAAejW,EAAoB0B,MAAO,CACjE8B,EAAgBpC,SACpB,CACA0V,EAAe3Y,EAAQ2D,IAAI,cAAgBI,GAE3C,GAAI4U,EAAc,CACdtT,EAAgBsT,EAAa5S,UAC7B,IAAK2S,GAA2BJ,GAAcjT,IAAkBpC,UAAW,CACvE4V,EAAgB,IACpB,CACJ,CACJ,CAEA,IAAIyB,EAAsBC,EAC1BD,EAAuB/Q,EAAQ6B,iBAAmB7B,EAAQ6B,gBAAgBoP,UAC1EvB,EAAY1Y,EAAiBsJ,YAAYN,GAIzC,GAAIqP,IAAsB,KAAM,CAC5B,GAAIrP,EAAQiR,YAAc,OAASjR,EAAQiR,YAAc,SACrDvB,EAAUuB,YAAc,OAASvB,EAAUuB,YAAc,SAAWF,IAAyB,MAAO,CACpGC,EAAa,KACjB,CACJ,MAAO,GAAIhR,EAAQiR,YAAc,MAAQjR,EAAQiR,YAAc,QAC3DvB,EAAUuB,YAAc,MAAQvB,EAAUuB,YAAc,OAAQ,CAChED,EAAa,IACjB,CAEA,GAAIA,IAAetX,UAAW,CAC1BsX,EAAa3B,CACjB,CAEA,GAAIF,EAAyB,CACzB,IAAKrT,EAAe,CAChBA,EAAgBmT,EACZxL,EACAiM,EACAvO,EACAnB,EACAxF,EACAwW,EACA9W,GAGJ6D,EAAK8C,WAAW/E,EAAcV,SAC9B2C,EAAK6K,MAAM9M,EAAcV,SAEzB0T,EAAa,IACjB,CACJ,MAAO,IAAK/Q,EAAKmT,4BAA4BlR,EAAQuB,MAAQzF,IAAkBiT,EAAY,CAEvFQ,EAAsB,IAAIhY,OAAO+G,SACjCP,EAAKpC,QAAQG,EAAcV,QAASU,EAAeyT,GAMnDA,EAAoB3S,KAAK,WACrBd,EAAgBmT,EACZxL,EACAiM,EACAvO,EACAnB,EACAxF,EACAwW,EACA9W,EAER,EACJ,MAAO,IAAK4B,EAAe,CAKvBA,EAAgBmT,EACZxL,EACAiM,EACAvO,EACAnB,EACAxF,EACAwW,EACA9W,EAER,CAEA,GAAIqV,IAAwB7V,UAAW,CACnC6V,GAAsB,IAAIhY,OAAO+G,UAAW5B,SAChD,CAEA,GAAIZ,GAAiBA,EAAcqV,yBAA0B,CACzD1B,EAAyB3T,EAAcqV,0BAC3C,KAAO,CACH1B,EAAyBhT,QAAQC,SACrC,CASA6S,EAAoB3S,KAAK,WACrB6S,EAAuB7S,KAAK,WACxB,IAAKmB,EAAKmT,4BAA4BlR,EAAQuB,OAAS4N,EAAyB,CAC5E,GAAIG,IAAkB,KAAM,CACxB3X,EAAK8F,cAAcC,QAAQ,YAAa,aAAcsC,EAC1D,CACAjC,EAAK8C,WAAW/E,EAAcV,SAC9B2C,EAAK6K,MAAM9M,EAAcV,SACzB,GAAIkU,IAAkB,KAAM,CACxBvR,EAAK4N,oBACLhU,EAAK8F,cAAcC,QAAQ,aAAc,YAAasC,EAC1D,CACJ,CAIA,IAAIoR,GAAyB,IAAI7Z,OAAO+G,UAAW5B,UAAU6B,UAC7D,GAAI4Q,EAAyB,CAIzB,GAAInP,EAAQ6B,iBAAmB7B,EAAQ6B,gBAAgB+B,iBAAmB,MAAO,CAC7E9H,EAAcsC,YAAY,SAAU,KAAM,KAC9C,CACAgT,EAAyBrT,EAAK8Q,mBAC1BC,EAAYC,EAAY,cAAgBvU,EAAQsB,EAAekE,EAAS9F,EAAiB+F,EAAgBqL,EACjH,MAAO,GAAIvN,EAAKmT,4BAA4BlR,EAAQuB,KAAM,CACtD6P,EAAyBrT,EAAKwO,0BAA0BzQ,EAAe,KAAMkE,EAAQuB,IACzF,CAEA6P,EAAuBxU,KAAK,WACxB7E,EAAmBsZ,YAAY,UAC/Bpa,EAAMqa,mBAAmB,yBAEzBvT,EAAK6M,gBAAgB9O,GACrB0T,EAAiB9S,SACrB,EACJ,EACJ,EACJ,GAEA,OAAO8S,EAAiBjR,SAC5B,EAEA3E,KAAK2X,gBAAkB,SAAUC,EAAQC,EAAgBjX,GACrD,IAAIkX,EAAeF,EACfhW,EAEJ,GAAIjD,EAA6BiZ,IAAWjZ,EAA6BiZ,GAAQrZ,GAAW,CACxFuZ,EAAenZ,EAA6BiZ,GAAQrZ,EACxD,CAEA,IAAIwZ,EAAsBxa,EAAOya,KAAK,8CAAgD,OAEtF,IAAKD,KAAyBrZ,EAAoB0B,QAAUvD,EAAQ2D,IAAI9B,EAAoB0B,QAAS,CACjGxD,EAAcqb,oBAClB,CAEArW,EAAgB/E,EAAQ2D,IAAI,cAAgBI,GAE5C,GAAIgB,EAAe,CACf1E,EAAqBmG,QAAQzB,EACjC,KAAO,CACH1E,EAAqBgb,UAAUN,EACnC,CAEAhb,EAAc6a,YAAYK,EAAcD,EAAgBjX,GAGxDZ,KAAKC,gBAAgBwP,YAAY,OACjCzP,KAAKC,gBAAgBkY,kBAErB,GAAIP,IAAW,gBAAiB,CAC5B5X,KAAKsO,mBAAmB9J,YAAY,oBAAqB,IACzD,IAAKxG,EAAOsU,UAAUxN,QAAQ,mBAAqB,EAAG,CAClD,IAAIsT,EAAcra,EAAKsa,SAAS,eAChCra,EAAOsa,QAAQ,6BACXF,EAAYG,YAAY,yBACxB,eACAC,KAAKC,UAAUL,EAAYG,YAAY,wBAAwBG,WACvE,CACJ,CACJ,EAEA1Y,KAAKoM,kCAAoC,SAAUuM,GAC/C3b,EAAYoP,kCAAkCuM,EAClD,EAEA3Y,KAAK4Y,mCAAqC,SAAUC,EAAWC,GAC3DvZ,EAAmCuZ,GAASD,CAChD,EAEA7Y,KAAKyE,uBAAyB,SAAUsU,EAAcC,EAAYC,EAAcC,GAK5E,SAASC,EAAqBC,GAC1B,GAAIL,IAAiB,6BAA+BC,IAAe,SAAU,CACzE,GAAII,GAAkBA,EAAerU,oBAAsB,mBAAmBD,QAAQsU,EAAerU,sBAAwB,EAAG,CAC5H,OAAO,KACX,CACJ,CACA,OAAO,IACX,CAEA,IAAIsU,EACAlT,EAAanJ,EAAYsc,wBACzBC,EAA2B,MAC3BC,EAAc,GAClB,GAAI1c,EAAe2c,UAAUtT,KACxBrJ,EAAe4c,sBAAsBvT,EAAY4S,EAAcC,IAAehc,EAAY2c,mBAAmBxT,EAAY4S,EAAcC,KACxIG,EAAoBhT,KAAgB,KAAM,CAC1CqT,EAAY9T,KACR1I,EAAYyH,uBAAuB0B,EAAY4S,EAAcC,EAAYC,EAAcC,IAE3FK,EAA2B,IAC/B,CAGA,IAAKvc,EAAYuP,aAAawM,EAAcC,GAAa,CACrDlc,EAAe0I,QAAQ,SAAUoU,GAC7B,GAAIL,IAA6B,MAAQK,IAAiBzT,EAAY,CAClE,MACJ,CACA,GAAIrJ,EAAe2c,UAAUG,GAAe,CACxC,IAAK9c,EAAe4c,sBAAsBE,EAAcb,EAAcC,IAAehc,EAAY2c,mBAAmBC,EAAcb,EAAcC,KAC5IG,EAAoBS,KAAkB,KAAM,CAC5CJ,EAAY9T,KACR1I,EAAYyH,uBAAuBmV,EAAcb,EAAcC,EAAYC,EAAcC,GAEjG,CACJ,CACJ,EACJ,CAEAG,EAAoBrc,EAAY6c,mBAAmBd,EAAcC,GAEjE,IAAIc,EAAWjX,QAAQ6M,IAAI8J,GAE3B,GAAIH,EAAmB,CACnBA,EAAkBS,EACtB,CACA,OAAOA,CACX,EAEA9Z,KAAK+Z,wCAA0C,SAAUhB,EAAcC,EAAYC,EAC1BC,EAAkBc,GACvE,IAAIX,EACAlT,EAAanJ,EAAYsc,wBACzBE,EAAc,GAElB,GAAI1c,EAAe2c,UAAUtT,IAAenJ,EAAYid,2BAA2B9T,EAAY6T,GAAU,CACrGR,EAAY9T,KACR1I,EAAYyH,uBAAuB0B,EAAY4S,EAAcC,EAAYC,EAAcC,GAE/F,CAGA,IAAKc,EAAQzN,aAAc,CACvBzP,EAAe0I,QAAQ,SAAUoU,GAC7B,GAAI9c,EAAe2c,UAAUG,GAAe,CACxC,GAAI9c,EAAe4c,sBAAsBE,EAAcb,EAAcC,IAAehc,EAAY2c,mBAAmBC,EAAcb,EAAcC,GAAa,CACxJQ,EAAY9T,KACR1I,EAAYyH,uBAAuBmV,EAAcb,EAAcC,EAAYC,EAAcC,GAEjG,CACJ,CACJ,EACJ,CAEAG,EAAoBrc,EAAY6c,mBAAmBd,EAAcC,GAEjE,IAAIc,EAAWjX,QAAQ6M,IAAI8J,GAE3B,GAAIH,EAAmB,CACnBA,EAAkBS,EACtB,CACA,OAAOA,CACX,EAEA9Z,KAAKka,yBAA2B,SAAUC,GACtC3a,EAA0B2a,CAC9B,EAEAna,KAAKoa,yBAA2B,WAC5B,OAAO5a,CACX,EAMAQ,KAAKqa,oCAAsC,WACvChb,EAAyB,CAAC,CAC9B,EAEAW,KAAKsX,4BAA8B,SAAUgD,GACzC,IAAIC,EAEJ,GAAID,EAAM,CACNC,EAAOzd,EAAe0d,oBAAoBF,GAC1C,OAAQjb,EAAuBkb,KAAUza,SAC7C,KAAO,CACH,OAAO,KACX,CACJ,EAEAE,KAAKiK,6BAA+B,SAAUqQ,GAC1C,IAAIC,EAEJ,GAAID,EAAM,CACNC,EAAOzd,EAAe0d,oBAAoBF,GAC1C,OAAOjb,EAAuBkb,EAClC,KAAO,CACH,OAAOza,SACX,CACJ,EAEAE,KAAKoO,6BAA+B,SAAU6C,GAC1C,IAAIqJ,EAAOrJ,EAAsB5O,SAC7BkY,EAEJ,GAAID,EAAM,CACNC,EAAOzd,EAAe0d,oBAAoBF,GAC1Cjb,EAAuBkb,GAAQtJ,CACnC,CACJ,EAEAjR,KAAKkK,gCAAkC,SAAU+G,GAC7C,IAAIqJ,EAAOrJ,EAAsB5O,SAC7BkY,EAEJ,GAAID,EAAM,CACNC,EAAOzd,EAAe0d,oBAAoBF,UACnCjb,EAAuBkb,EAClC,CACJ,EAWAva,KAAKmR,oCAAsC,WACvC,OAAOmD,OAAOmG,KAAKpb,GAAwBqb,IAAI,SAAUH,GACrD,OAAOlb,EAAuBkb,EAClC,GAAGI,OAAO,SAAU1J,GAChB,QAASA,CACb,EACJ,CAGJ,CAEA,OAAO,IAAI/S,CACf,EAAkB"}