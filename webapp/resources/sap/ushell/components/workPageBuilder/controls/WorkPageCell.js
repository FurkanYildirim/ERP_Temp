/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/f/GridContainer","sap/f/GridContainerSettings","sap/f/dnd/GridDropInfo","sap/m/Button","sap/m/IllustratedMessage","sap/m/IllustratedMessageSize","sap/m/IllustratedMessageType","sap/ui/core/Control","sap/ui/core/dnd/DragInfo","sap/ui/core/library","sap/ushell/ui/launchpad/ExtendedChangeDetection"],function(e,t,i,r,a,n,o,s,l,p,d){"use strict";var g=p.dnd.DropLayout;var u=p.dnd.DropPosition;var C=s.extend("sap.ushell.components.workPageBuilder.controls.WorkPageCell",{metadata:{library:"sap.ushell",properties:{deleteWidgetTooltip:{type:"string",defaultValue:"",bindable:true},addApplicationButtonText:{type:"string",defaultValue:"",bindable:true},editMode:{type:"boolean",defaultValue:false,bindable:true},tileMode:{type:"boolean",defaultValue:false,bindable:true},gridContainerGap:{type:"string",group:"Appearance",defaultValue:"0.5rem",bindable:true},gridContainerGapXS:{type:"string",group:"Appearance",defaultValue:"0.475rem",bindable:true},gridContainerGapS:{type:"string",group:"Appearance",defaultValue:"0.475rem",bindable:true},gridContainerGapM:{type:"string",group:"Appearance",defaultValue:"0.5rem",bindable:true},gridContainerGapL:{type:"string",group:"Appearance",defaultValue:"0.5rem",bindable:true},gridContainerGapXL:{type:"string",group:"Appearance",defaultValue:"0.5rem",bindable:true},gridContainerRowSize:{type:"string",group:"Appearance",defaultValue:"5.25rem",bindable:true},gridContainerRowSizeXS:{type:"string",group:"Appearance",defaultValue:"4.375rem",bindable:true},gridContainerRowSizeS:{type:"string",group:"Appearance",defaultValue:"5.25rem",bindable:true},gridContainerRowSizeM:{type:"string",group:"Appearance",defaultValue:"5.25rem",bindable:true},gridContainerRowSizeL:{type:"string",group:"Appearance",defaultValue:"5.25rem",bindable:true},gridContainerRowSizeXL:{type:"string",group:"Appearance",defaultValue:"5.25rem",bindable:true},emptyIllustrationTitle:{type:"string",group:"Misc",defaultValue:"",bindable:true},emptyIllustrationMessage:{type:"string",group:"Misc",defaultValue:"",bindable:true}},defaultAggregation:"widgets",aggregations:{widgets:{type:"sap.ui.core.Control",multiple:true,singularName:"widget",bindable:true,dnd:true,forwarding:{getter:"getGridContainer",aggregation:"items"}},_gridContainer:{type:"sap.f.GridContainer",multiple:false,visibility:"hidden"},headerBar:{type:"sap.m.OverflowToolbar",multiple:false},_emptyIllustration:{type:"sap.m.IllustratedMessage",multiple:false,visibility:"hidden"}},events:{moveVisualization:{},gridColumnsChange:{},gridContainerBorderReached:{}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.class("sapCepWorkPageCell");if(t.getTileMode()){e.class("sapCepWorkPageCellTileMode")}else{e.class("sapCepWorkPageCellCardMode")}e.openEnd();e.openStart("div");e.class("sapCepWidgetToolbar");e.openEnd();e.renderControl(t.getHeaderBar());e.close("div");var i=t.getAggregation("widgets");if(i.length<=0){e.renderControl(t.getIllustratedMessage())}else{e.renderControl(t.getGridContainer())}e.close("div")}}});C.prototype.init=function(){this._oWidgetsChangeDetection=new d("widgets",this);s.prototype.init.apply(this,arguments)};C.prototype.exit=function(){this._oWidgetsChangeDetection.destroy();s.prototype.exit.apply(this,arguments)};C.prototype.getGridContainer=function(){var e=this.getAggregation("_gridContainer");if(!e){e=this._createGridContainer().attachColumnsChange(function(e){this.fireEvent("gridColumnsChange",e.getParameters())}.bind(this));this.setAggregation("_gridContainer",e.addStyleClass("sapCepWorkPageGridContainer"))}if(!this.getEditMode()||!this.getTileMode()||e.getItems().length===0){e.removeAllDragDropConfig()}else if(e.getDragDropConfig().length===0){e.addDragDropConfig(new l({sourceAggregation:"items"})).addDragDropConfig(new i({targetAggregation:"items",dropIndicatorSize:function(e){var t=2;if(e.getLayoutData()&&e.getLayoutData().getColumns()){t=e.getLayoutData().getColumns()}return{rows:1,columns:t}},dropPosition:u.Between,dropLayout:g.Horizontal,drop:this.onDrop.bind(this)}))}return e.setInlineBlockLayout(true).setSnapToRow(false).setLayoutXL(new t({columnSize:this.getGridContainerRowSizeXL(),rowSize:this.getGridContainerRowSizeXL(),gap:this.getGridContainerGapXL()})).setLayoutL(new t({columnSize:this.getGridContainerRowSizeL(),rowSize:this.getGridContainerRowSizeL(),gap:this.getGridContainerGapL()})).setLayoutM(new t({columnSize:this.getGridContainerRowSizeM(),rowSize:this.getGridContainerRowSizeM(),gap:this.getGridContainerGapM()})).setLayoutS(new t({columnSize:this.getGridContainerRowSizeS(),rowSize:this.getGridContainerRowSizeS(),gap:this.getGridContainerGapS()})).setLayout(new t({columnSize:this.getGridContainerRowSize(),rowSize:this.getGridContainerRowSize(),gap:this.getGridContainerGap()}))};C.prototype._createGridContainer=function(){return new e(this.getId()+"--sapCepWorkPageCellGridContainer",{containerQuery:false,minHeight:"0",borderReached:this.onBorderReached.bind(this)})};C.prototype.onBorderReached=function(e){this.fireEvent("gridContainerBorderReached",e.getParameters())};C.prototype.onDrop=function(e){this.fireEvent("moveVisualization",e.getParameters())};C.prototype.getIllustratedMessage=function(){if(!this.getAggregation("_emptyIllustration")){this.setAggregation("_emptyIllustration",this._createIllustratedMessage())}return this.getAggregation("_emptyIllustration")};C.prototype._createIllustratedMessage=function(){return new a({illustrationType:o.NoColumnsSet,illustrationSize:n.Spot,title:this.getEmptyIllustrationTitle(),description:this.getEmptyIllustrationMessage(),visible:"{/editMode}"})};C.prototype.onfocusin=function(){if(!this.hasStyleClass("sapCepWorkPageCellFocused")){this.addStyleClass("sapCepWorkPageCellFocused")}};C.prototype.onfocusout=function(){if(this.hasStyleClass("sapCepWorkPageCellFocused")){this.removeStyleClass("sapCepWorkPageCellFocused")}};return C});
//# sourceMappingURL=WorkPageCell.js.map