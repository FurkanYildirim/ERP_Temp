// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/Configuration","sap/ui/core/Control","sap/ui/core/Core","sap/ui/Device","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/EventHub","sap/ushell/library"],function(e,t,i,n,o,jQuery,s,r,a){"use strict";var l=t.extend("sap.ushell.ui.shell.FloatingContainer",{metadata:{library:"sap.ushell",properties:{visible:{type:"boolean",defaultValue:true}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.class("sapUshellFloatingContainer");if(!t.getVisible()){e.class("sapUshellShellHidden")}e.openEnd();if(t.getContent()&&t.getContent().length){e.renderControl(t.getContent()[0])}e.close("div")}}});l.prototype.init=function(){n.resize.attachHandler(l.prototype._handleResize,this);this.oStorage=new s(s.Type.local,"com.sap.ushell.adapters.local.FloatingContainer")};l.prototype.onAfterRendering=function(){if(this._bFirstRenderingDone){return}this._bFirstRenderingDone=true;this.adjustPosition()};l.prototype._getWindowHeight=function(){return jQuery(window).height()};l.prototype._setContainerHeight=function(e,t){e.css("max-height",t)};l.prototype._getWrapper=function(){return this.getDomRef()&&this.getDomRef().parentNode};l.prototype._isDocked=function(){var e=this._getWrapper();return e&&e.classList.contains("sapUshellContainerDocked")};l.prototype._getDockingDirection=function(){var e=this._isDocked();if(!e){return null}var t=this._getWrapper();return t.classList.contains("sapUshellContainerDockedStart")?"start":"end"};l.prototype._handleResize=function(t){o.start("FLP:FloatingContainer_handleResize","resizing floating container","FLP");var s=jQuery(window).width();var a=this._getWrapper();var l=!!a;var p=this._isDocked();if(l&&!p){a.style.cssText=this.oStorage.get("floatingContainerStyle");this.adjustPosition(t)}else if(l&&p){var h=this._getDockingDirection();if(h==="end"){var u;if(e.getRTL()){jQuery(a).css("left",416/s*100+"%");u=416/s*100+"%;"}else{jQuery(a).css("left",100-416/s*100+"%");u=100-416/s*100+"%;"}a.style.cssText="left:"+u+a.style.cssText.substring(a.style.cssText.indexOf("top"));this.oStorage.put("floatingContainerStyle",a.style.cssText)}}if(p){i.getEventBus().publish("launchpad","shellFloatingContainerDockedIsResize");r.emit("ShellFloatingContainerDockedIsResized",Date.now())}var c=n.media.getCurrentRange(n.media.RANGESETS.SAP_STANDARD);if(c.name!=="Desktop"&&p){r.emit("ShellFloatingContainerUndockOnResize",Date.now())}o.end("FLP:FloatingContainer_handleResize")};l.prototype._isSSize=function(){return window.matchMedia?window.matchMedia("(max-width: 417px)").matches:false};l.prototype.adjustPosition=function(t){var i=t?t.width:jQuery(window).width();var n=t?t.height:jQuery(window).height();var o=this.getDomRef();var s=jQuery(o).width();var r=jQuery(o).height();var a,l,p,h;var u=e.getRTL();var c=this._isSSize();var d=this._getWrapper();if(d){p=d.style.left.replace("%","");p=i*p/100;h=d.style.top.replace("%","");h=n*h/100;if(!isNaN(p)&&!isNaN(h)&&!c){if(u){a=p<s||p>i;if(a){p=p<s?s:i}}else{a=p<0||i<p+s;if(a){p=p<0?0:i-s}}l=h<0||n<h+r;if(l){h=h<0?0:n-r}if(!a&&!l){d.style.left=p*100/i+"%";d.style.top=h*100/n+"%";d.style.position="absolute";return}d.style.left=p*100/i+"%";d.style.top=h*100/n+"%";d.style.position="absolute"}}};l.prototype.handleDrop=function(){var e=this._getWrapper();if(e){this.adjustPosition();this.oStorage.put("floatingContainerStyle",e.style.cssText)}};l.prototype.setContent=function(e){if(this.getDomRef()){var t=i.createRenderManager();t.renderControl(e);t.flush(this.getDomRef());t.destroy()}this.setAggregation("content",e,true)};l.prototype.setVisible=function(e){var t=this.getDomRef();if(t){t.classList.toggle("sapUshellShellHidden",!e)}if(e&&!this._isDocked()){this._handleResize()}this.setProperty("visible",e,true)};l.prototype.exit=function(){n.resize.detachHandler(l.prototype._resizeHandler,this)};return l});
//# sourceMappingURL=FloatingContainer.js.map