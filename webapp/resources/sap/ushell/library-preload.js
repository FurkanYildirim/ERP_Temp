//@ui5-bundle sap/ushell/library-preload.js
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/AppInfoParameters", ["sap/base/Log","sap/ushell/services/AppConfiguration","sap/base/util/restricted/_curry","sap/base/util/restricted/_zipObject","sap/ui/VersionInfo","sap/ushell/Config","sap/ushell/TechnicalParameters"],function(e,n,t,r,i,a,u){"use strict";var o="LAUNCHPAD";function p(e){var n=e.applicationType;if(n==="TR"){n="GUI"}return n}function f(){return n.getCurrentApplication()&&n.getCurrentApplication().appCapabilities||{}}function s(n){function t(e){return(e.version||"")+(" ("+(e.buildTimestamp||"")+")")||""}if(p(n)==="UI5"){return i.load().then(t).catch(function(){e.error("VersionInfo could not be loaded")})}return undefined}function c(e){return Promise.resolve().then(function(){var n=e.componentInstance;if(n){var t=n.getManifestEntry("/sap.app/applicationVersion/version");return t}return undefined})}function l(e){var n=e.getTechnicalParameter("sap-ach");return n.then(function(e){var n=e&&e[0];if(n){return n}return f().appSupportInfo})}function v(e){function t(){var e=n.getMetadata();return e.technicalName}var r={UI5:function(){var n=e.componentInstance;if(n){var r=n.getMetadata().getManifestEntry("/sap.ui5/componentName");if(!r){r=n.getMetadata().getComponentName()}return r}return t()},TR:function(){return(t()||"").replace(/\s[(]TCODE[)]$/,"")},WDA:t,NWBC:t,URL:function(){return Promise.resolve().then(function(){var e=n.getCurrentApplication();if(e.appCapabilities.technicalAppComponentId){return e.appCapabilities.technicalAppComponentId}return undefined})}};var i=e.applicationType;if(r.hasOwnProperty(i)){return r[i]()}return undefined}function d(e){var n="";return e.getTechnicalParameter("sap-fiori-id").then(function(t){if(e.homePage){if(t&&typeof t[0]==="string"){if(t[0]!==""){n=o+" ("+t[0]+")"}else{n=o}}else{n=o}}else if(t&&typeof t[0]==="string"){n=t[0]}else{n=f().appId||e.inboundPermanentKey}return n})}function m(e){return sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(n){return new Promise(function(t,r){n.resolveReferences([e]).then(function(n){t(n[e])}).catch(r)})})}function h(e){return Promise.resolve().then(function(){var t=n.getCurrentApplication();var r=p(e);if(r&&r!=="URL"){return r}return t.appCapabilities&&t.appCapabilities.appFrameworkId}).then(function(e){var n={NWBC:"WDA",TR:"GUI"};return n[e]||e})}function g(e,n){return n.getSystemContext().then(function(n){return n.getProperty(e)})}function P(){var e=window.hasher&&window.hasher.getHash();if(!e){return Promise.reject("Could not identify current application hash")}return Promise.resolve().then(function(){return e})}var C={theme:m.bind(null,"User.env.sap-theme-NWBC"),languageTag:m.bind(null,"User.env.sap-languagebcp47"),appIntent:P,appFrameworkId:h,appFrameworkVersion:s,appSupportInfo:l,technicalAppComponentId:v,appId:d,appVersion:c,productName:t(g)("productName")};function I(e){return!C[e]&&/[.]/.test(e)}function b(e,n,t,r,i){return new Promise(function(a){var o={};for(var p in w()){if(e){o[p]=w()[p].value}else{o[p]=w()[p]}}var f={},s=[];s.push(A(["appFrameworkId"],n).then(function(){return A(Object.keys(C),n)}));s.push(u.getTechnicalParametersAppInfo(t,r,i));Promise.allSettled(s).then(function(n){if(n[0].status==="fulfilled"){for(var t in n[0].value){if(n[0].value[t]!==undefined){if(e){f[t]=n[0].value[t]}else{f[t]={value:n[0].value[t]}}}}}if(n[1].status==="fulfilled"){for(var r in n[1].value){if(!o.hasOwnProperty(r)){if(n[1].value[r].value&&n[1].value[r].value[0]!==undefined){if(e){f[r]=n[1].value[r].value[0]}else{f[r]={value:n[1].value[r].value[0]}}}}}}o=Object.assign(f,o);a(o)})})}function A(n,i){var a=n.map(function(n){if(N(n)){return Promise.resolve(U(n))}if(I(n)){C[n]=t(g)(n)}if(!C[n]){e.error(n+" is not a valid app info parameter");return undefined}return C[n](i)});return Promise.all(a).then(function(e){return r(n,e)})}var y={};function w(){return y}function T(e){if(e===undefined||Object.keys(e).length===0){y={};return}for(var n in e.info){if(n!=="customProperties"){y[n]={value:e.info[n]}}}for(var t in e.info.customProperties){y[t]=e.info.customProperties[t]}}function N(e){return y.hasOwnProperty(e)}function U(e){if(N(e)){return y[e].value}return undefined}return{getInfo:function(e,n){if(!n){return Promise.reject("Parameter application missing")}return A(["appFrameworkId"],n).then(function(){return A(e,n)})},getCustomValue:U,isAttributeExist:N,setCustomAttributes:T,getAllAppInfo:b}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ApplicationType", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ui/core/Configuration","sap/ui/core/routing/History","sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/guiResolution","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/wdaResolution","sap/ushell/Config","sap/ushell/URLTemplateProcessor","sap/ushell/User","sap/ushell/utils","sap/ui/thirdparty/hasher"],function(e,t,a,n,r,s,i,o,p,l,u,c,f,d,m){"use strict";var h=new s(document.URL).search(true),y=h["iframe-url"];function v(e,t,a){var n=e.inbound;var r=n&&n.resolutionResult;var s;if(n&&r){if(r["sap.wda"]){s=l.constructFullWDAResolutionResult(e,t,a)}else{s=l.constructWDAResolutionResult(e,t,a)}}if(s){s.then(function(t){t.extendedInfo=L(e);C(e,t);M(t);return t})}return s}function g(e,t,a){return i.generateTRResolutionResult(e,t,a).then(function(t){t.extendedInfo=L(e);C(e,t);M(t);return t})}function P(e,a,n){var r=new s(a);var i=e.inbound;var l=i&&i.resolutionResult;var u=t({},e.mappedIntentParamsPlusSimpleDefaults);var c;var f;if(u["sap-system"]){c=u["sap-system"][0];delete u["sap-system"]}if(u["sap-system-src"]){f=u["sap-system-src"][0];delete u["sap-system-src"]}return o.spliceSapSystemIntoURI(r,l.systemAlias,c,f,"WCF",l.systemAliasSemantics||o.SYSTEM_ALIAS_SEMANTICS.applied,n).then(function(t){var a=p.getURLParsing().paramsToString(u);var n=p.appendParametersToUrl(a,t);var r={url:n,text:l.text||"",additionalInformation:l.additionalInformation||"",applicationType:"WCF",fullWidth:true,extendedInfo:L(e)};C(e,r);M(r);O(r,"WCF");return r})}function S(a,n,r){var s=a.inbound;var i={};["applicationType","additionalInformation","applicationDependencies"].forEach(function(e){if(s.resolutionResult.hasOwnProperty(e)){i[e]=s.resolutionResult[e]}});i.url=n;if(i.applicationDependencies&&typeof i.url==="undefined"){i.url=""}if(typeof i.url==="undefined"){i.url="";e.warning("The component url is undefined. We set it to empty string avoid rejection of the promise")}var o=t({},a.mappedIntentParamsPlusSimpleDefaults);i.reservedParameters={};var l={"sap-ui-fl-max-layer":true,"sap-ui-fl-control-variant-id":true,"sap-ui-fl-version":true};Object.keys(l).forEach(function(e){var t=o[e];if(t){delete o[e];i.reservedParameters[e]=t}});a.mappedDefaultedParamNames=a.mappedDefaultedParamNames.filter(function(e){return!l[e]});if(a.mappedDefaultedParamNames.length>0){o["sap-ushell-defaultedParameterNames"]=[JSON.stringify(a.mappedDefaultedParamNames)]}var u=o["sap-system"]&&o["sap-system"][0];var c=o["sap-system-src"]&&o["sap-system-src"][0];i["sap-system"]=u;if(typeof c==="string"){i["sap-system-src"]=c}a.effectiveParameters=o;var f=p.getURLParsing().paramsToString(o);if(f){i.url=i.url+(i.url.indexOf("?")<0?"?":"&")+f}if(typeof s.resolutionResult.ui5ComponentName!=="undefined"){i.ui5ComponentName=s.resolutionResult.ui5ComponentName}i.text=s.title;return Promise.resolve(i)}function A(t){var a;var n=m.getHash()||window.location.hash;var r=n.lastIndexOf("&/");var s=1;if(r>0){if(t&&t.capabilities&&t.capabilities.appFrameworkId==="UI5"){s=2}a=n.substring(r+s);try{if(a&&a.length>0){a=decodeURIComponent(a)}}catch(t){e.warning("inner route should be double encoded",t,"sap.ushell.ApplicationType.getInnerAppRoute")}}return a}function R(e){var t=e.targetNavigationMode;if(t===undefined||t===""){t="inplace"}return t}function w(){var e=window.hasher&&window.hasher.getHash();var t="";if(e&&e.length>0&&e.indexOf("sap-iapp-state=")>0){var a=/(?:sap-iapp-state=)([^&/\\]+)/.exec(e);if(a&&a.length===2){t=a[1]}}return t}function I(){return new Promise(function(e){Promise.all([sap.ushell.Container.getServiceAsync("UserInfo"),sap.ushell.Container.getServiceAsync("PluginManager"),d.getUi5VersionAsync()]).then(function(t){var a=t[0];var s=t[1];var i=t[2];var o=a.getUser();var p=o.getContentDensity()||(document.body.classList.contains("sapUiSizeCompact")?"compact":"cozy");var l=o.getTheme();if(l.indexOf("sap_")!==0){var c=f.prototype.constants.themeFormat.THEME_NAME_PLUS_URL;l=o.getTheme(c)}var d=n.getLanguage&&n.getLanguage();var m=n.getSAPLogonLanguage&&n.getSAPLogonLanguage();var h=window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1";var y=0;if(u.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){y=u.last("/core/shell/sessionTimeoutIntervalInMinutes")}var v=false;if(window["sap-ui-debug"]!==false&&window["sap-ui-debug"]!==undefined){v=window["sap-ui-debug"]}e({language:d,logonLanguage:m,theme:l,themeServiceRoot:h,isDebugMode:v,ui5Version:i,contentDensity:p,sapPlugins:s._getNamesOfPluginsWithAgents(),innerAppState:w(),sessionTimeout:y,historyDirection:r.getInstance().getDirection()||""})})})}function b(e){var t;switch(e){case"inplace":t="embedded";break;case"explace":t="newWindow";break;default:t=e||"newWindow"}return t}function U(t,a){var n=b(t);var r=d.getMember(a,"sap|integration.navMode");switch(r){case"inplace":return"embedded";case"explace":if(n==="embedded"){return"newWindowThenEmbedded"}if(["newWindowThenEmbedded","newWindow"].indexOf(n)>=0){return n}e.error("App-defined navigation mode was ignored","Application requests to be opened in a new window but no expected navigation mode was defined on the template","sap.ushell.ApplicationType");default:return n}}function T(e,t,a){var n=d.clone(e);n.navigationMode=U(e.navigationMode,t);n.appId=a(e.appId||"");n.technicalAppComponentId=a(e.technicalAppComponentId||"");n.appSupportInfo=t["sap.app"]&&t["sap.app"].ach;n.appFrameworkId=e.appFrameworkId;delete n.urlTransformation;return n}function L(e,t,a){var n={appParams:{},system:undefined};if(e&&e.mappedIntentParamsPlusSimpleDefaults){n.appParams=JSON.parse(JSON.stringify(e.mappedIntentParamsPlusSimpleDefaults))}if(t){var r=d.getMember(t,"sap|app.destination");if(typeof r==="string"&&r.length>0){n.system=a.systemAliases[r]&&JSON.parse(JSON.stringify(a.systemAliases[r]));if(typeof n.system==="object"){n.system.alias=r}}}return n}function x(e,t,a){return new Promise(function(n,r){var i=new s(e);var o=i.query(true);var p=true;var l=["sap-language","sap-theme","sap-shell","sap-ui-app-id","transaction","sap-iframe-hint","sap-keep-alive","sap-ui-versionedLibCss","sap-wd-configId"];if(a&&a.mandatoryUrlParams){l=l.concat(a.mandatoryUrlParams.split(","));l=l.filter(function(e,t){return l.indexOf(e)===t})}if(t==="explace"){p=false}sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){t.compactParams(o,l,undefined,p).done(function(t){if(!t.hasOwnProperty("sap-intent-param")){n(e);return}var a;if(t["sap-theme"]){var r="sap-theme="+t["sap-theme"];t["sap-theme"]="sap-theme-temp-placeholder";i.query(t);a=i.toString();a=a.replace("sap-theme=sap-theme-temp-placeholder",r)}else{i.query(t);a=i.toString()}n(a)}).fail(function(e){r(e)})})})}function O(e,t){if(t){W(e,"sap-iframe-hint",t)}}function C(e,t){var a=e.intentParamsPlusAllDefaults;if(a&&a["sap-post"]&&a["sap-post"][0]==="false"){t.openWithPostByAppParam=false}}function M(e){var t;if(h&&h.hasOwnProperty("sap-keep-alive")){t=h["sap-keep-alive"]}else{t=a.get("extendedInfo.appParams.sap-keep-alive",e);if(Array.isArray(t)){t=t[0]}}if(t!==undefined){W(e,"sap-keep-alive",t)}}function D(e){var t=u.last("/core/spaces/enabled");if(t===true){W(e,"sap-spaces",t)}}function E(e,t,a){var n=d.getMember(t,"sap|integration.urlTemplateId");if(n==="urltemplate.url-dynamic"&&e.url.indexOf("sap-language=")===-1){W(e,"sap-language",a.env.language)}}function W(e,t,a){if(e.url){var n=e.url.indexOf("#");var r=e.url;var s="";if(n>0){r=e.url.slice(0,n);s=e.url.slice(n)}e.url=r+(r.indexOf("?")>=0?"&":"?")+t+"="+a+s}}function N(t,n,r){return new Promise(function(n){var r=t.inbound;var s=r.templateContext;var i=s.payload.capabilities||{};if(t.mappedIntentParamsPlusSimpleDefaults&&t.mappedIntentParamsPlusSimpleDefaults.hasOwnProperty("sap-ushell-innerAppRoute")){var o=window.hasher.getHash();if(t.mappedIntentParamsPlusSimpleDefaults["sap-ushell-innerAppRoute"].length>0&&o.indexOf("&/")===-1){o+="&/"+t.mappedIntentParamsPlusSimpleDefaults["sap-ushell-innerAppRoute"];window.hasher.replaceHash(o)}}var p={innerAppRoute:A(s.payload)||t.parsedIntent.appSpecificRoute,targetNavMode:R(t),defaultParameterNames:t.mappedDefaultedParamNames,startupParameter:t.mappedIntentParamsPlusSimpleDefaults,remoteApplication:{remoteSO:undefined,remoteAction:undefined}};I().then(function(o){p.env=o;var l=a.get(["sap.integration","urlTemplateParams","query"],s.siteAppSection)||{};if(l.hasOwnProperty("sap-cssurl")){p.env.themeServiceRoot=undefined;p.env.theme=undefined}if(i.appFrameworkId==="UI5"&&p.startupParameter){for(var u in p.startupParameter){if(u!=="sap-ushell-innerAppRoute"){p.startupParameter[u][0]=encodeURIComponent(p.startupParameter[u][0])}if(u==="sap-shell-so"){p.remoteApplication.remoteSO=p.startupParameter[u][0]}if(u==="sap-shell-action"){p.remoteApplication.remoteAction=p.startupParameter[u][0]}}if(t.mappedDefaultedParamNames&&t.mappedDefaultedParamNames.length>0){var f=t.mappedDefaultedParamNames.filter(function(e){return e!=="sap-shell-so"&&e!=="sap-shell-action"&&e!=="sap-system"});p.startupParameter["sap-ushell-defaultedParameterNames"]=[JSON.stringify(f)]}delete p.startupParameter["sap-shell-so"];delete p.startupParameter["sap-shell-action"]}var m="/universal_search/search",h=p.innerAppRoute&&p.innerAppRoute.indexOf(m),v;if(h===0){v=window.location.hash.split("&/")[1];p.innerAppRoute="/JAMSEARCHPATHH?JAMSEARCHVALUEE=VALUEE"}var g=c.expand(s.payload,s.site,p,s.siteAppSection,"startupParameter");if(h===0){g=g.replace("/JAMSEARCHPATHH?JAMSEARCHVALUEE=VALUEE","/"+v)}if(p.env.theme===undefined){g=g.replace("&sap-theme=","")}if(i.appFrameworkId==="UI5"&&document.URL.indexOf("#")>0){var P=g.split("#"),S=P[1].split("&/"),A=sap.ushell.Container.getFLPUrl(true).split("#"),R=A[1].split("&/");g=P[0]+"#"+R[0]+(S.length>1?"&/"+S[1]:"");e.debug("- created URL with fixed hash: "+g,"sap.ushell.ApplicationType")}var w=function(e){var t=d.clone(s.payload);t.urlTemplate=e;return c.expand(t,s.site,p,s.siteAppSection,"startupParameter")};var I={applicationType:"URL",text:r.title,appCapabilities:T(i,s.siteAppSection,w),url:g,extendedInfo:L(t,s.siteAppSection,s.site),contentProviderId:r.contentProviderId||"",systemAlias:s.siteAppSection["sap.app"]&&s.siteAppSection["sap.app"].destination||s.siteAppSection.destination||""};O(I,I.appCapabilities.appFrameworkId);M(I);D(I);E(I,s.siteAppSection,p);var b=new Promise(function(e){sap.ushell.Container.getServiceAsync("URLTemplate").then(function(t){sap.ui.require(["sap/ushell/components/applicationIntegration/application/BlueBoxesCache"],function(a){var n=a.get(I.url)===undefined;t.handlePostTemplateProcessing(I.url,s.siteAppSection,n).then(e)})})});b.then(function(e){if(y&&e.indexOf("ui5appruntime.html")>0){var t=e.split("?");t[0]=y;e=t.join("?")}I.url=e;F(I.url,i,s).then(function(e){I.url=e;if(I.url&&typeof I.url==="string"&&I.url.indexOf("sap-iframe-hint=GUI")>0){n(I)}else{x(I.url,p.targetNavMode,i).then(function(e){I.url=e;n(I)},function(){n(I)})}})})})})}function F(t,n,r){return new Promise(function(i){var o=n.urlTransformation||{enabled:false};if(k(o,r)){var p=new s(t);var l=o.transformations[0];var u=l.service.uri;var f=c.prepareExpandData({urlTemplate:"",parameters:{names:u.queryOptions}},{},{urlComponent:{query:p.query(),fragment:p.fragment()}},r.siteAppSection,"");var d=s.expand("{+rootPath}/{+resourcePath}{?queryParams*}",{rootPath:u.rootPath,resourcePath:u.resourcePath,queryParams:f.oResolvedParameters}).toString();sap.ui.require(["sap/ui/thirdparty/datajs"],function(n){n.read({requestUri:d,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}},function(n){var r=a.get("transformAppLaunchQueryString.value",n);if(r===undefined){r=a.get("transformAppLaunchIntent.value",n)}if(r===undefined){r=a.get("transformAppLaunchQueryString.queryString",n)}e.info("URL Transformation Succeeded",JSON.stringify({URLBeforeTransformation:t,URLAfterTransformation:r}),"sap.ushell.ApplicationType");var s=l.sourceURLComponent;if(s===undefined){s="query"}if(s==="query"||s==="fragment"){t=p[s].apply(p,[r]).toString()}else{e.error("The "+s+" component of the URL in URI.js is not transformed","","sap.ushell.ApplicationType")}i(t)},function(a){e.error("URL Transformation Failed",JSON.stringify(a),"sap.ushell.ApplicationType");i(t)})})}else{i(t)}})}function k(e,t){if(typeof e.enabled==="boolean"){return e.enabled}var a=c.prepareExpandData({urlTemplate:"",parameters:{names:{enabled:e.enabled}}},{},{},t.siteAppSection,"");return typeof a.oResolvedParameters.enabled==="boolean"?a.oResolvedParameters.enabled:false}function j(e,a,n){var r=e.inbound;var i=r&&r.resolutionResult;var l={};var c=new s(a);var f=t({},e.mappedIntentParamsPlusSimpleDefaults);if(e.inbound&&e.inbound.action==="launchURL"&&e.inbound.semanticObject==="Shell"){delete f["sap-external-url"]}var d=f["sap-system"]&&f["sap-system"][0];var m=f["sap-system-src"]&&f["sap-system-src"][0];l["sap-system"]=d;delete f["sap-system"];if(typeof m==="string"){l["sap-system-src"]=m;delete f["sap-system-src"]}return new Promise(function(e,t){if(p.absoluteUrlDefinedByUser(c,i.systemAlias,i.systemAliasSemantics)){e(a)}else{o.spliceSapSystemIntoURI(c,i.systemAlias,d,m,"URL",i.systemAliasSemantics||o.SYSTEM_ALIAS_SEMANTICS.applied,n).then(function(t){var a=t.toString();e(a)},t)}}).then(function(e){var t=false,a,n=u.last("/core/navigation/flpURLDetectionPattern"),r=new RegExp(n);if(f&&f.hasOwnProperty("sap-params-append")){delete f["sap-params-append"];t=true}a=p.getURLParsing().paramsToString(f);return r.test(e)||t===true?p.appendParametersToIntentURL(f,e):p.appendParametersToUrl(a,e)},Promise.reject.bind(Promise)).then(function(e){["additionalInformation","applicationDependencies","systemAlias"].forEach(function(e){if(r.resolutionResult.hasOwnProperty(e)){l[e]=r.resolutionResult[e]}});l.url=e;l.text=r.title;l.applicationType="URL";return Promise.resolve(l)},Promise.reject.bind(Promise))}var q={URL:{type:"URL",defaultFullWidthSetting:true,generateResolutionResult:function(e){var t=e.inbound.hasOwnProperty("templateContext");return t?N.apply(null,arguments):j.apply(null,arguments)},easyAccessMenu:{intent:"Shell-startURL",resolver:null,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:false,systemSelectionPriority:1}},WDA:{type:"WDA",defaultFullWidthSetting:true,enableWdaCompatibilityMode:u.last("/core/navigation/enableWdaCompatibilityMode"),generateResolutionResult:v,easyAccessMenu:{intent:"Shell-startWDA",resolver:l.resolveEasyAccessMenuIntentWDA,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:2}},TR:{type:"TR",defaultFullWidthSetting:true,generateResolutionResult:g,easyAccessMenu:{intent:"Shell-startGUI",resolver:i.resolveEasyAccessMenuIntentWebgui,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:3}},NWBC:{type:"NWBC",defaultFullWidthSetting:true},WCF:{type:"WCF",generateResolutionResult:P,defaultFullWidthSetting:true},SAPUI5:{type:"SAPUI5",generateResolutionResult:S,defaultFullWidthSetting:false}};function H(){return Object.keys(q).map(function(e){return q[e]}).filter(function(e){return typeof e.easyAccessMenu==="object"})}function _(){var e={};H().forEach(function(t){e[t.easyAccessMenu.intent]=t.easyAccessMenu.resolver});return function(t,a){if(e[t]&&(!a||a!=="SAPUI5")){return e[t]}return null}}function J(e){return!!q[e]&&q[e].defaultFullWidthSetting}Object.defineProperty(q,"enum",{value:Object.keys(q).reduce(function(e,t){if(q[t].type){e[t]=q[t].type}return e},{})});var B={getEasyAccessMenuResolver:_(),getEasyAccessMenuDefinitions:H,getDefaultFullWidthSetting:J,handleURLTransformation:F};Object.keys(B).forEach(function(e){Object.defineProperty(q,e,{value:B[e]})});return q},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/CanvasShapesManager", ["sap/ui/Device","sap/ui/core/theming/Parameters"],function(e,t){"use strict";var n=function(e,t){this.x=e||0;this.y=t||0};n.prototype.getDistance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.floor(Math.sqrt(t*t+n*n))};n.prototype.getSegment=function(e){if(this.x<=e.x&&this.y<=e.y){return 1}if(this.x<=e.x&&this.y>=e.y){return 2}if(this.x>=e.x&&this.y>=e.y){return 3}if(this.x>=e.x&&this.y<=e.y){return 4}};n.prototype.offset=function(e,t){this.x=this.x+e;this.y=this.y+t};var i=function(e,t,n,i){this.x={min:e,max:t};this.y={min:n,max:i}};var r=window.innerWidth>0?window.innerWidth:screen.width;var o=window.innerHeight>0?window.innerHeight:screen.height;var s={cpr1:new i(0,r/4,0,o/4),cpr2:new i(r/2,r,0,o/4),cpr3:new i(r/4,3*r/4,o*3/4,o)};var a=function(){this.init()};a.prototype={radiusRange:{min:800,max:900},_getCanvas:function(){var e=document.getElementById("shell-shapes");if(e){return e}return this._createCanvas("shell-shapes")},_createCanvas:function(e){var t=document.createElement("canvas");t.setAttribute("id",e);t.setAttribute("role","presentation");this._updateCanvasDimensions(t);sap.ushell.Container.getRenderer().setShellShapes(t);return t},_updateCanvasDimensions:function(e){e.height=window.innerHeight>0?window.innerHeight:screen.height+"px";e.width=window.innerWidth>0?window.innerWidth:screen.width+"px"},init:function(){var t={cpr1:s.cpr1,cpr2:s.cpr2,cpr3:s.cpr3},n,i,r,o,a;this.shapes=[];this.bIsDirty=true;for(a in t){n=Math.random(this.radiusRange.max-this.radiusRange.min)+this.radiusRange.min;i=this.getRandomPoint(t[a]);r=this._getSquarePoints(n,i);o=this._calculatebezierCurves(n,r);this.shapes.push({bezierCurves:o,centerPoint:i})}for(var h in this.shapes){var u=this._generateRandomAmorphousShapeValues();this.shapes[h]=this.makeAmorphousShape(this.shapes[h],u.edge0.edgeNum,u.edge0.xOffSet,u.edge0.yOffSet,u.edge0.xStretch);this.shapes[h]=this.makeAmorphousShape(this.shapes[h],u.edge1.edgeNum,u.edge1.xOffSet,u.edge1.yOffSet,u.edge1.xStretch)}sap.ui.getCore().attachThemeChanged(this.onThemeChanged.bind(this));e.resize.attachHandler(this.resizeHandler,this)},_generateRandomAmorphousShapeValues:function(){var e={edge0:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0},edge1:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0}};var t=this._getRandomInt(0,3);for(var n in e){e[n].edgeNum=t;e[n].xOffSet=this._getRandomInt(200,400);e[n].yOffSet=this._getRandomInt(-200,-400);t+=this._getRandomInt(0,1)<.5?-1:1;if(t===-1){t=3}if(t===4){t=0}}t=this._getRandomInt(0,1);if(t<.5){t=t<.25?0:1;e["edge"+t].xStretch=this._getRandomInt(0,200)}return e},getPoint:function(e,t){return new n(e,t)},getRandomPoint:function(e){var t=Math.floor(Math.random()*(e.x.max-e.x.min)+e.x.min),i=Math.floor(Math.random()*(e.y.max-e.y.min)+e.y.min);return new n(t,i)},onThemeChanged:function(){var e=t.get("sapUiShellBackgroundPatternColor");if(e&&e!=="transparent"){this.sShapesColor=e;this.bIsDirty=true;this.drawShapes()}},resizeHandler:function(){var e=this._getCanvas();if(e){this._updateCanvasDimensions(e);this.bIsDirty=true;this.onThemeChanged()}},enableAnimationDrawing:function(e){this._enableDrawing=e},makeAmorphousShape:function(e,t,n,i){var r,o,s;switch(t){case 0:r=e.bezierCurves[0].controlPoint1;o=e.bezierCurves[3].controlPoint2;s=this._rotatePoints(n,i,r,o);e.bezierCurves[0].controlPoint1=s[0];e.bezierCurves[3].controlPoint2=s[1];break;case 1:r=e.bezierCurves[0].controlPoint2;o=e.bezierCurves[1].controlPoint1;s=this._rotatePoints(n,i,r,o);e.bezierCurves[0].controlPoint2=s[0];e.bezierCurves[1].controlPoint1=s[1];break;case 2:r=e.bezierCurves[1].controlPoint2;o=e.bezierCurves[2].controlPoint1;s=this._rotatePoints(n,i,r,o);e.bezierCurves[1].controlPoint2=s[0];e.bezierCurves[2].controlPoint1=s[1];break;case 3:r=e.bezierCurves[2].controlPoint2;o=e.bezierCurves[3].controlPoint1;s=this._rotatePoints(n,i,r,o);e.bezierCurves[2].controlPoint2=s[0];e.bezierCurves[3].controlPoint1=s[1];break}return e},_rotatePoints:function(e,t,i,r){var o,s,a=[];o=i.x+e;s=i.y+t;a.push(new n(o,s));o=r.x-e;s=r.y-t;a.push(new n(o,s));return a},_getSquarePoints:function(e,t){var i=[];i[0]=new n(t.x+e,t.y);i[1]=new n(t.x,t.y-e);i[2]=new n(t.x-e,t.y);i[3]=new n(t.x,t.y+e);return i},_getRandomInt:function(e,t){if(e==0&&t==1){return Math.random()}return Math.floor(Math.random()*(t-e+1))+e},_calculatebezierCurves:function(e,t){var i=[],r,o,s,a;a=t[0];s=t[1];r=new n(a.x,a.y-e/2);o=new n(a.x-e/2,a.y-e);i.push({startPoint:a,endPoint:s,controlPoint1:r,controlPoint2:o});a=t[1];s=t[2];r=new n(a.x-e/2,a.y);o=new n(a.x-e,a.y+e/2);i.push({startPoint:a,endPoint:s,controlPoint1:r,controlPoint2:o});a=t[2];s=t[3];r=new n(a.x,a.y+e/2);o=new n(a.x+e/2,a.y+e);i.push({startPoint:a,endPoint:s,controlPoint1:r,controlPoint2:o});a=t[3];s=t[0];r=new n(a.x+e/2,a.y);o=new n(a.x+e,a.y-e/2);i.push({startPoint:a,endPoint:s,controlPoint1:r,controlPoint2:o});return i},drawShapes:function(){var e=this._getCanvas();if(this.bIsDirty&&e&&e.getContext){var n=e.getContext("2d"),i,s,a,h;n.clearRect(0,0,r*2,o*2);if(!this.sShapesColor){this.sShapesColor=t.get("sapUiShellBackgroundPatternColor")}if(this.sShapesColor&&this.sShapesColor!=="transparent"){for(var u=0;u<this.shapes.length;u++){n.beginPath();i=this.shapes[u].bezierCurves[0].startPoint;n.moveTo(i.x,i.y);for(var c=0;c<this.shapes[u].bezierCurves.length;c++){s=this.shapes[u].bezierCurves[c].endPoint;a=this.shapes[u].bezierCurves[c].controlPoint1;h=this.shapes[u].bezierCurves[c].controlPoint2;n.bezierCurveTo(Math.floor(a.x),Math.floor(a.y),Math.floor(h.x),Math.floor(h.y),Math.floor(s.x),Math.floor(s.y))}n.closePath();n.fillStyle=this.sShapesColor;n.fill()}}this.bIsDirty=false}}};var h=new a;return h},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Config", ["sap/ushell/EventHub","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/_Config/utils"],function(e,n,t){"use strict";var r=n.createConfigContract(window["sap-ushell-config"]);var o=e.createChannel(r);var c=Object.keys(o).reduce(function(n,t){n[t]=function(){if(!o){o=e.createChannel(r)}return o[t].apply(o,arguments)};return n},{_reset:function(){o=null},_resetContract:function(){r=n.createConfigContract(window["sap-ushell-config"]);this._reset()},registerConfiguration:function(e,n){r=n},createModel:function(n,c){if(!o){o=e.createChannel(r)}return t.createModel(o,r,n,c)}});return c},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Container", ["sap/base/assert","sap/base/Log","sap/base/util/deepExtend","sap/base/util/extend","sap/base/util/ObjectPath","sap/base/util/uid","sap/ui/base/EventProvider","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/service/ServiceFactoryRegistry","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ui/util/Mobile","sap/ushell/EventHub","sap/ushell/System","sap/ushell/Ui5NativeServiceFactory","sap/ushell/Ui5ServiceFactory","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/renderers/fiori2/ShellLayout"],function(e,t,r,n,i,a,o,s,u,l,c,jQuery,f,d,p,v,h,g,m,y,S){"use strict";var w="sap.ushell.services.Container";var C="sap.ushell.Container.dirtyState.";var D={};var P;var b;var L;var E=[];function A(){close()}function I(){document.location="about:blank"}function R(e){if(b&&b[e]){return b[e]}return"sap.ushell.adapters."+e}function F(e){return P.services&&P.services[e]||{}}function N(e,t,r,n,i){var a=F(e).adapter||{};var o;function s(e){return new Promise(function(n,i){sap.ui.require([e],function(e){var i=new e(t,r,{config:a.config||{}});n(i)},i)})}if(i===true){o=a.module;if(o===undefined){return n?Promise.resolve():undefined}}else{o=a.module||R(t.getPlatform())+"."+e+"Adapter"}var u=o.replace(/\./g,"/");if(n){return s(u)}return function(){function e(e){var n=sap.ui.requireSync(e);return new n(t,r,{config:a.config||{}})}return e(u)}()}function U(r){var n=new o;var i=false;var l=[];var d={};var h="sap.ushell.Container."+r.getSystem().getPlatform()+".remoteSystem.";var g={};var b;var L;var R=m.getLocalStorage();var U=new m.Map;var M=new m.Map;var T="sap.ushell.Container."+r.getSystem().getPlatform()+".sessionTermination";var _=this;this.cancelLogon=function(){if(this.oFrameLogonManager){this.oFrameLogonManager.abortLogon()}};this.createRenderer=function(e,r){if(typeof e==="boolean"){r=e;e=undefined}var i={async:!!r};var a;var o;c.start("FLP:Container.InitLoading","Initial Loading","FLP");m.setPerformanceMark("FLP - renderer created");e=e||P.defaultRenderer;if(!e){throw new Error("Missing renderer name")}o=P.renderers&&P.renderers[e]||{};a=o.module||(e.indexOf(".")<0?"sap.ushell.renderers."+e+".Renderer":e);if(o.componentData&&o.componentData.config){i.config=o.componentData.config}function u(t){var r=sap.ui.requireSync(t);var a=new r({componentData:i});var o;var u=sap.ui.requireSync("sap/ui/core/UIComponent");if(a instanceof u){var l=sap.ui.requireSync("sap/ui/core/ComponentContainer");o=new l({component:a,height:"100%",width:"100%"})}else{o=a}if(!(o instanceof s)){throw new Error("Unsupported renderer type for name "+e)}f(o);v(o);d[e]=a;n.fireEvent("rendererCreated",{renderer:a});return o}function l(t){return new Promise(function(r,a){sap.ui.require([t,"sap/ui/core/ComponentContainer","sap/ui/core/UIComponent","sap/ui/core/routing/Router"],function(t,o,u){var l=new t({componentData:i});if(l instanceof u){var c=new o({component:l,height:"100%",width:"100%",async:true});f(c);v(c);d[e]=l;l.rootControlLoaded().then(function(){n.fireEvent("rendererCreated",{renderer:l});r(c)})}else if(l instanceof s){f(l);v(l);d[e]=l;n.fireEvent("rendererCreated",{renderer:l});r(l)}else{a(new Error("Unsupported renderer type!"))}})})}function f(e){e.placeAt=function(e,t){var r=e;var n="canvas";var i=document.body;if(e===i.id){r=document.createElement("div");r.setAttribute("id",n);r.classList.add("sapUShellFullHeight");switch(t){case"first":if(i.firstChild){i.insertBefore(r,i.firstChild);break}case"only":i.innerHTML="";default:i.appendChild(r)}e=n;t=""}S.applyLayout(e);p.emit("ShellLayoutApplied",Date.now());s.prototype.placeAt.call(this,e,t)}}function v(e){var t=e.destroy;e.destroy=function(){if(e.isA("sap.ui.core.ComponentContainer")){return Promise.resolve(e.getComponentInstance().destroy()).then(function(){return t.apply(e,arguments)})}return Promise.resolve(t.apply(e,arguments))}}var h=a.replace(/\./g,"/");if(r){return l(h)}t.error("sap.ushell.Container.createRenderer() should always be called with bAsync:true.");return u(h)};this.getRenderer=function(e){var r;e=e||P.defaultRenderer;if(e){r=d[e]}else{var n=Object.keys(d);if(n.length===1){r=d[n[0]]}else{t.warning("getRenderer() - cannot determine renderer, because no default renderer is configured and multiple instances exist.",null,w)}}if(r&&r.isA("sap.ui.core.ComponentContainer")){return r.getComponentInstance()}return r};this.DirtyState={CLEAN:"CLEAN",DIRTY:"DIRTY",MAYBE_DIRTY:"MAYBE_DIRTY",PENDING:"PENDING",INITIAL:"INITIAL"};this.getGlobalDirty=function(){var e=new jQuery.Deferred;var r=a();var n=0;var i=this.DirtyState.CLEAN;function o(){if(n===0||i===_.DirtyState.DIRTY){e.resolve(i);t.debug("getGlobalDirty() Resolving: "+i,null,"sap.ushell.Container")}}function s(e){if(e.key.indexOf(C)===0&&e.newValue!==_.DirtyState.INITIAL&&e.newValue!==_.DirtyState.PENDING){t.debug("getGlobalDirty() Receiving event key: "+e.key+" value: "+e.newValue,null,"sap.ushell.Container");if(e.newValue===_.DirtyState.DIRTY||e.newValue===_.DirtyState.MAYBE_DIRTY){i=e.newValue}n-=1;o()}}try{R.setItem(r,"CHECK");R.removeItem(r)}catch(r){t.warning("Error calling localStorage.setItem(): "+r,null,"sap.ushell.Container");return e.resolve(this.DirtyState.MAYBE_DIRTY).promise()}if(b){throw new Error("getGlobalDirty already called!")}b=e;window.addEventListener("storage",s);e.always(function(){window.removeEventListener("storage",s);b=undefined});for(var u=R.length-1;u>=0;u-=1){var l=R.key(u);if(l.indexOf(C)===0){if(R.getItem(l)==="PENDING"){R.removeItem(l);t.debug("getGlobalDirty() Cleanup of unresolved 'PENDINGS':"+l,null,"sap.ushell.Container")}else{n+=1;m.localStorageSetItem(l,this.DirtyState.PENDING,true);t.debug("getGlobalDirty() Requesting status for: "+l,null,"sap.ushell.Container")}}}o();setTimeout(function(){if(e.state()!=="resolved"){e.resolve("MAYBE_DIRTY");t.debug("getGlobalDirty() Timeout reached, - resolved 'MAYBE_DIRTY'",null,"sap.ushell.Container")}},n*2e3);return e.promise()};this.getLogonSystem=function(){return r.getSystem()};this.getUser=function(){return r.getUser()};this.getDirtyFlag=function(){var e=i;var t=this._oShellNavigationService.getNavigationContext();for(var r=0;r<l.length;r++){e=e||l[r](t)}return e};this.fnAsyncDirtyStateProvider=null;this.getDirtyFlagsAsync=function(){if(!this.fnAsyncDirtyStateProvider){return Promise.resolve(this.getDirtyFlag())}var e=this._oShellNavigationService.getNavigationContext();return this.fnAsyncDirtyStateProvider(e).then(function(e){return e||this.getDirtyFlag()}.bind(this))};this.isAsyncDirtyStateProviderSet=function(){return typeof this.fnAsyncDirtyStateProvider==="function"};this.setAsyncDirtyStateProvider=function(e){this.fnAsyncDirtyStateProvider=e};this.setDirtyFlag=function(e){i=e};this.sessionKeepAlive=function(){if(r.sessionKeepAlive){r.sessionKeepAlive()}};this.extendSession=function(){p.emit("nwbcUserIsActive",Date.now())};this.registerDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function")}l.push(e)};this.deregisterDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function")}var t=-1;for(var r=l.length-1;r>=0;r--){if(l[r]===e){t=r;break}}if(t===-1){return}l.splice(t,1)};this.getService=function(e,t,r){return _._getService.apply(_,arguments)};this.getServiceAsync=function(e,t){return _._getService(e,t,true)};this._getService=function(e,n,i){var a={};function o(t){var r=new jQuery.Deferred;if(!t){throw new Error("Missing system")}r.resolve(N(e,t,n));sap.ushell.Container.addRemoteSystem(t);return r.promise()}if(!e){throw new Error("Missing service name")}if(e.indexOf(".")>=0){throw new Error("Unsupported service name")}var s=F(e);var u=s.module||"sap.ushell.services."+e;var l=u+"/"+(n||"");var c={config:s.config||{}};function f(e,t){a.createAdapter=o;return new e(t,a,n,c)}function d(t,i){var o;if(U.containsKey(l)){o=U.get(l)}else if(t.hasNoAdapter){o=new t(a,n,c)}else{var s=N(e,r.getSystem(),n,i,t.useConfiguredAdapterOnly);if(i){return s.then(function(e){var r=f(t,e);U.put(l,r);return r})}o=f(t,s)}U.put(l,o);return i?Promise.resolve(o):o}if(!U.containsKey(l)){if(i){if(!M.containsKey(l)){var p=new Promise(function(e,t){sap.ui.require([u.replace(/[.]/g,"/")],function(t){e(d(t,true))},t)});M.put(l,p);return p}return M.get(l)}(function(){t.error("Deprecated API call of 'sap.ushell.Container.getService'. Please use 'getServiceAsync' instead",null,"sap.ushell.services.Container");var e=sap.ui.requireSync(u.replace(/[.]/g,"/"));return d(e)})()}if(i){return Promise.resolve(U.get(l))}return U.get(l)};function k(){for(var e=R.length-1;e>=0;e-=1){var t=R.key(e);if(t.indexOf(h)===0){try{var r=t.substring(h.length);var n=JSON.parse(R.getItem(t));g[r]=new v(n)}catch(e){R.removeItem(t)}}}return g}function O(){if(typeof OData==="undefined"){return}function e(e,r,n){t.warning(e,null,"sap.ushell.Container");if(n){setTimeout(n.bind(null,e),5e3)}return{abort:function(){return}}}OData.read=function(t,r,n){return e("OData.read('"+(t&&t.Uri?t.requestUri:t)+"') disabled during logout processing",r,n)};OData.request=function(t,r,n){return e("OData.request('"+(t?t.requestUri:"")+"') disabled during logout processing",r,n)}}this.addRemoteSystem=function(e){var r=e.getAlias();var n=g[r];if(this._isLocalSystem(e)){return}if(n){if(n.toString()===e.toString()){return}t.warning("Replacing "+n+" by "+e,null,"sap.ushell.Container")}else{t.debug("Added "+e,null,"sap.ushell.Container")}g[r]=e;m.localStorageSetItem(h+r,e)};this._isLocalSystem=function(e){var t=e.getAlias();if(t&&t.toUpperCase()==="LOCAL"){return true}var r=new f(m.getLocationHref());var n=this.getLogonSystem().getClient()||"";if(e.getBaseUrl()===r.origin()&&e.getClient()===n){return true}return false};this.addRemoteSystemForServiceUrl=function(e){var t={baseUrl:";o="};if(!e||e.charAt(0)!=="/"||e.indexOf("//")===0){return}var r=/^[^?]*;o=([^/;?]*)/.exec(e);if(r&&r.length>=2){t.alias=r[1]}e=e.replace(/;[^/?]*/g,"");if(/^\/sap\/(bi|hana|hba)\//.test(e)){t.platform="hana";t.alias=t.alias||"hana"}else if(/^\/sap\/opu\//.test(e)){t.platform="abap"}if(t.alias&&t.platform){this.addRemoteSystem(new v(t))}};this.attachLogoutEvent=function(t,r){var i=false;if(r===true){e(typeof t==="function","Container.attachLogoutEvent: fnFunction must be a function");for(var a=0;a<E.length;a++){if(E[a]===t){i=true;break}}if(!i){E.push(t)}}else{n.attachEvent("Logout",t)}};this.detachLogoutEvent=function(e){n.detachEvent("Logout",e);for(var t=0;t<E.length;t++){if(E[t]===e){E.splice(t,1);break}}};this.attachRendererCreatedEvent=function(e){n.attachEvent("rendererCreated",e)};this.detachRendererCreatedEvent=function(e){n.detachEvent("rendererCreated",e)};this.defaultLogout=function(){var e=new jQuery.Deferred;function i(){r.logout(true).always(function(){R.removeItem(T);e.resolve()})}function a(){var e=new jQuery.Deferred;var t=e.promise();var r=[];if(E.length>0){for(var a=0;a<E.length;a++){r.push(E[a]())}Promise.all(r).then(e.resolve);setTimeout(e.resolve,4e3)}else{e.resolve()}t.done(function(){if(n.fireEvent("Logout",true)){i()}else{setTimeout(i,1e3)}})}function o(){var e=[];if(L){window.removeEventListener("storage",L)}m.localStorageSetItem(T,"pending");_._suppressOData();var r=_._getRemoteSystems();Object.keys(r).forEach(function(n){try{e.push(N("Container",r[n]).logout(false))}catch(e){t.warning("Could not create adapter for "+n,e.toString(),"sap.ushell.Container")}R.removeItem(h+n)});jQuery.when.apply(jQuery,e).done(a)}if(typeof r.addFurtherRemoteSystems==="function"){r.addFurtherRemoteSystems().always(o)}else{o()}return e.promise()};this.logout=this.defaultLogout;this.registerLogout=function(e){this.logout=e};this.setLogonFrameProvider=function(e){if(this.oFrameLogonManager){this.oFrameLogonManager.logonFrameProvider=e}};this.setXhrLogonTimeout=function(e,t){if(this.oFrameLogonManager){this.oFrameLogonManager.setTimeout(e,t)}};this.getFLPConfig=function(){var e=new Promise(function(e,t){var r={URL:this.getFLPUrl()};if(D.CDMPromise){D.CDMPromise.then(function(t){t.getSiteWithoutPersonalization().then(function(t){r.scopeId=t.site.identification.id;e(r)})})}else{e(r)}}.bind(this));return e};this.getFLPUrl=function(e){var t=m.getLocationHref();var r=t.indexOf(y.getShellHash(t));if(r===-1||e===true){return t}return t.substr(0,r-1)};this.getFLPUrlAsync=function(e){return(new jQuery.Deferred).resolve(_.getFLPUrl(e)).promise()};this.inAppRuntime=function(){return false};this.runningInIframe=this.inAppRuntime;this._getAdapter=function(){return r};this.getFLPPlatform=function(e){if(e===true){return P.flpPlatform}return Promise.resolve(P.flpPlatform)};this._closeWindow=A;this._redirectWindow=I;this._getRemoteSystems=k;this._suppressOData=O;u.getEventBus().subscribe("sap.ushell.Container","addRemoteSystemForServiceUrl",function(e,t,r){_.addRemoteSystemForServiceUrl(r)});if(typeof r.logoutRedirect==="function"){L=function(e){function t(){_._closeWindow();_._redirectWindow()}if(sap.ushell.Container!==_){return}if(e.key.indexOf(h)===0&&e.newValue&&e.newValue!==R.getItem(e.key)){m.localStorageSetItem(e.key,e.newValue)}if(e.key===T){if(e.newValue==="pending"){_._suppressOData();if(n.fireEvent("Logout",true)){t()}else{setTimeout(t,1e3)}}}};window.addEventListener("storage",L)}this._getFunctionsForUnitTest=function(){return{createAdapter:N}}}function M(e,t){e.forEach(function(e){var r=g.createServiceFactory(e,t);l.register("sap.ushell.ui5service."+e,r)})}i.create("sap.ushell");sap.ushell.bootstrap=function(e,i){var a=new jQuery.Deferred;d.init();if(sap.ushell.Container!==undefined){var o=new Error("Unified shell container is already initialized - cannot initialize twice.\nStacktrace of first initialization:"+L);t.error(o,o.stack,w);throw o}L=(new Error).stack;P=n({},window["sap-ushell-config"]);b=i;if(typeof window["sap.ushell.bootstrap.callback"]==="function"){setTimeout(window["sap.ushell.bootstrap.callback"])}M(["Personalization","URLParsing","CrossApplicationNavigation"],true);M(["Configuration"],false);var s=new v({alias:"",platform:P.platform||e});N("Container",s,null,true).then(function(e){e.load().then(function(){function r(){var e=window["sap-ushell-config"];if(!e||!e.services){return false}var t=e.services.PluginManager;var r=t&&t.config;return r&&r.loadPluginsFromSite}sap.ushell.Container=new U(e);var o=[sap.ushell.Container.getServiceAsync("PluginManager")];if(r()){D.CDMPromise=sap.ushell.Container.getServiceAsync("CommonDataModel");o.push(D.CDMPromise)}Promise.all(o).then(function(e){n(e)}).then(i);var s=[];if(P.preloadServices!==undefined&&Array.isArray(P.preloadServices)){P.preloadServices.forEach(function(e){s.push(sap.ushell.Container.getServiceAsync(e))});t.error("Ushell Config's preloadServices should not be used!")}var u=sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){sap.ushell.Container._oShellNavigationService=e});s.push(u);Promise.all(s).then(function(){a.resolve()})});function n(e){var t=e[0];var n=e[1];var i=n?n.getPlugins():jQuery.when({});i.then(function(e){var n=r({},P.bootstrapPlugins,e);t.registerPlugins(n)})}function i(){o();sap.ui.require(["sap/ushell/Config"],function(e){s(e)})}function o(){if(m.hasFLPReady2NotificationCapability()){sap.ui.require(["sap/ushell/NWBCInterface"],function(e){m.getPrivateEpcm().doEventFlpReady2(e)})}else if(m.hasFLPReadyNotificationCapability()){m.getPrivateEpcm().doEventFlpReady()}}function s(e){if(e.last("/core/darkMode/enabled")){sap.ushell.Container.getServiceAsync("DarkModeSupport").then(function(e){if(e&&e.setup){e.setup()}})}}});return a.promise()}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/EventHub", ["sap/base/Log"],function(e){"use strict";var n={pendingEvents:{},subscribers:{},dispatchOperations:{},store:t(),dispatchTimeoutIds:new window.Set};function t(){return{nextKey:0,objectToKey:new window.WeakMap,keyToObject:{}}}function r(n,t,r){e.error(n,t,"sap.ushell.EventHub");return}function i(e){var n="An exception was raised while executing a registered callback on event '"+e.eventName+"'",t="Data passed to the event were: '"+e.eventData+"'";if(e.error.stack){t+=" Error details: "+e.error.stack}r(n,t,e.fnCausedBy)}function u(e,n,t){var r;try{r=n(t)}catch(r){i({eventName:e,eventData:t,fnCausedBy:n,error:r})}return r}function o(e){if(typeof arguments[2]==="function"){return E(e,arguments[2])}return arguments[2]}function a(e){if(typeof arguments[2]==="string"&&arguments[2].indexOf("<function")===0){return k(e,arguments[2])}return arguments[2]}function c(e,n,t){if(typeof n==="object"||typeof n==="function"){try{var i=[n,o.bind(null,e)];if(t){i.push(3)}return JSON.stringify.apply(JSON,i)}catch(e){r(""+e,e.stack,c)}}return n}function s(e,n){try{return JSON.parse(n,a.bind(null,e))}catch(e){return n}}function f(e,n,t){if(!e.subscribers[n]){e.subscribers[n]=[]}e.subscribers[n].push(t)}function l(e,n,t){e.subscribers[n]=(e.subscribers[n]||[]).map(function(e){return e.filter(function(e){return e.fn!==t})}).filter(function(e){return e.length>0})}function d(){var e,n=new Promise(function(n){e=n}),t={dispatching:n,cancelled:false,cancel:function(){t.cancelled=true},complete:function(){e()}};return t}function p(e,n){if(!e.subscribers.hasOwnProperty(n)){return null}var t=d(),r=e.subscribers[n],i=r.map(function(r){return h(e,n,r,t,0)});Promise.all(i).then(t.complete,t.complete);return t}function h(e,n,t,r,i){var u=t.length,o=t.slice(i);return o.reduce(function(i,u){return i.then(function(i){if(r.cancelled){if(i){l(e,n,u.fn)}return i}return v(e,n,u,t).then(function(e){if(e){r.cancelled=true}return e})})},Promise.resolve(false)).then(function(i){if(!i&&u<t.length){return h(e,n,t,r,u)}return i})}function v(e,n,t,r){return new Promise(function(i){var o=s(e,e.pendingEvents[n]);var a=setTimeout(function(){e.dispatchTimeoutIds.delete(a);if(t.called&&r.offed){i(false);return}t.called=true;var c=r.offed;u(n,t.fn,o);var s=r.offed;if(s){l(e,n,t.fn)}i(!c&&s)},0);e.dispatchTimeoutIds.add(a)})}function b(e,n,t){return function(){t.forEach(function(t){if(t.called){l(e,n,t.fn)}});t.offed=true;return{off:b(e,n,[])}}}function y(e,n,t){return function(r){var i={fn:r,called:false};t.push(i);if(e.pendingEvents.hasOwnProperty(n)){var u=e.dispatchOperations[n];if(!u){v(e,n,i,t)}else{u.dispatching.then(function(){if(!i.called){v(e,n,i,t)}})}}return{do:y(e,n,t),off:b(e,n,t)}}}function m(e,n){var t=[];f(e,n,t);return{do:y(e,n,t),off:b(e,n,t)}}function w(e,n){var t=m(e,n);t.off();return t}function g(e,n,t,r){var i=c(e,t);if(!r&&e.pendingEvents.hasOwnProperty(n)&&e.pendingEvents[n]===i){return this}e.pendingEvents[n]=i;var u=e.dispatchOperations[n];if(u){u.cancel()}var o=p(e,n);e.dispatchOperations[n]=o;return this}function O(e,n){return s(e,e.pendingEvents[n])}function j(){var e=Array.prototype.slice.call(arguments);e.shift();var n=0,t=new Array(e.length).join(",").split(",").map(function(){return 1}),r=[],i={do:function(u){e.forEach(function(i,o){i.do(function(i,o){r[i]=o;n+=t[i];t[i]=0;if(n===e.length){u.apply(null,r)}}.bind(null,o))});return{off:i.off}},off:function(){var n=e.reduce(function(e,n){return n.off()},function(){});return{off:n}}};return i}function P(e,n){var t=e.dispatchOperations[n];return t?t.dispatching:Promise.resolve()}function E(e,n){if(e.store.objectToKey.has(n)){return e.store.objectToKey.get(n)}e.store.nextKey++;var t="<"+typeof n+">#"+e.store.nextKey;e.store.keyToObject[t]=n;e.store.objectToKey.set(n,t);return t}function k(e,n){return e.store.keyToObject[n]}function T(e){var n={};n.emit=g.bind(n,e);n.on=m.bind(null,e);n.once=w.bind(null,e);n.last=O.bind(null,e);n.join=j.bind(null,e);n.wait=P.bind(null,e);n._reset=function(e){e.pendingEvents={};e.subscribers={};e.dispatchOperations={};e.store=t();e.dispatchTimeoutIds.forEach(clearTimeout);e.dispatchTimeoutIds=new window.Set}.bind(null,e);return n}function x(e){var n={pendingEvents:{},subscribers:{},dispatchOperations:{},store:t(),dispatchTimeoutIds:new window.Set},r=T(n),i=s(n,c(n,e));function u(e){var n=e.charAt(0);if(n.match(/[a-zA-Z0-9]/)){throw new Error("Invalid path separator '"+n+"'. Please ensure path starts with a non alphanumeric character")}var t=e.split(n);t.shift();return t}function o(e,n){var t=e,r="";if(arguments.length===2){t=n;r=e}return r+"/"+t.join("/")}function a(e){return Object.prototype.toString.apply(e)==="[object Array]"}function f(e){return Object(e)!==e}function l(e){return(a(e)?e.length:Object.keys(e).length)===0}function d(e,t,r,i){var u="",s=e,l=[];r.reduce(function(e,t,d){u=o(u,[t]);s=s[t];if(d===r.length-1){if(!f(i)&&!f(s)&&Object.keys(s).length>0){var p,h=Object.keys(s).reduce(function(e,n){e[n]=true;return e},{}),v=Object.keys(i).some(function(e){p=e;var n=h.hasOwnProperty(e);delete h[e];var t=!f(s[e])&&Object.keys(s[e]).length>0;return!n||t}),b=Object.keys(h).length>0,y=v||b;if(y){var m=v?"One or more values are not defined in the channel contract or are defined as a non-empty object/array, for example, check '"+p+"'.":"Some keys are missing in the event data: "+Object.keys(h).join(", ")+".";throw new Error("Cannot write value '"+c(n,i,true)+"' to path '"+u+"'. "+m+" All childrens in the value must appear in the channel contract and must have a simple value or should be defined as an empty complex value")}var w=Object.keys(i).map(function(e){return{serializedPath:o(u,[e]),value:i[e]}});Array.prototype.push.apply(l,w)}e[t]=i}else if(!e.hasOwnProperty(t)){e[t]=a(s)?[]:{}}l.push({serializedPath:u,value:e[t]});return e[t]},t);return l}function p(e,t){var r="",i=t.reduce(function(e,t){r+="/"+t;if(a(e)&&!t.match(/^[0-9]+$/)){throw new Error("Invalid array index '"+t+"' provided in path '"+r+"'")}if(!e.hasOwnProperty(t)){throw new Error("The item '"+t+"' from path "+r+" cannot be accessed in the object: "+c(n,e))}return e[t]},e);return i}function h(e,n,t){return n.reduce(function(e,r,i){var u=i===n.length-1;if(e.hasOwnProperty(r)){return e[r]}return u?t:{}},e)}function v(e,n){n.pop();var t=e,r=[];return n.reduce(function(e,n){t=t[n];r.push(n);e.push({serializedPath:o(r),value:t});return e},[])}function b(e){return e.map(function(e){var t=e.serializedPath;if(!n.subscribers.hasOwnProperty(t)||n.subscribers[t].length===0){return null}return{path:t,value:e.value}}).filter(function(e){return!!e})}function y(n,t){var o=u(n);p(e,o);var a=d(e,i,o,t);a.forEach(function(e){r.emit(e.serializedPath,e.value)})}function m(n){var t=u(n),r=p(e,t);return h(i,t,r)}function w(t){var i=u(t),a=o(i),d=r.last(a),h=n.pendingEvents.hasOwnProperty(a);if(h){return r.on(a)}d=p(e,i);if(typeof d!=="undefined"&&(f(d)||!l(s(r,c(r,d))))){r.emit(a,d)}return r.on(a)}function g(e){var n=w(e);n.off();return n}function O(e){var n=u(e),t=v(i,n),o=b(t).map(function(e){return r.wait(e.path,e.value)});return Promise.all(o.concat(r.wait(e)))}return{emit:y,on:w,once:g,last:m,wait:O,join:j.bind(null,r)}}var A=T(n);A.createChannel=x.bind(null);return A});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Fiori20Adapter", ["sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/UIComponent","sap/ui/model/resource/ResourceModel","sap/m/Fiori20Adapter","sap/ui/thirdparty/hasher","sap/base/util/extend"],function(e,t,i,n,r,o,a){"use strict";var s;i._fnOnInstanceDestroy=function(e){if(e._fioriAdapter){e._fioriAdapter.destroy()}};var f=e.extend("AppInfo",{constructor:function(t){e.call(this);this._oComponent=t},getDefaultTitle:function(){var e,t,i=this._oComponent.getMetadata();var n=i.getManifestEntry("sap.app");if(n&&n.title){e=n.title;if(this._isLocalizationKey(e)){t=n.i18n||"i18n/i18n.properties";return this._getLocalized(e,t)}return e}var r=i.getManifestEntry("sap.ui5");if(r&&r.config&&r.config.resourceBundle&&r.config.titleResource){e=r.config.titleResource;t=r.config.resourceBundle;return this._getLocalized(e,t)}return},_getLocalized:function(e,t){var i=new n({bundleUrl:sap.ui.require.toUrl(this._oComponent.getMetadata().getComponentName())+"/"+t});return i.getResourceBundle().getText(e.replace(/^{{/,"").replace(/}}$/,""))},_isLocalizationKey:function(e){return e.indexOf("{{")===0&&e.indexOf("}}")>0}});var u=e.extend("HeaderInfo",{constructor:function(t,i,n){e.call(this);this._oConfig=i;this._oAppInfo=n;this._aHierarchy=[];this._defaultTitle=this._oAppInfo.getDefaultTitle();this._oCurrentViewInfo={oTitleInfo:{text:this._defaultTitle}}},registerView:function(e){if(this._oConfig.bMoveTitle===true){if(!e.oTitleInfo&&e.oSubTitleInfo){e.oTitleInfo=e.oSubTitleInfo}this._oCurrentViewInfo=e;var t=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:undefined;if(t!==s.getTitle()){s.setTitle(t)}this._updateHierarchy()}this._setBackNavigation(e.oBackButton,e.oAdaptOptions)},_setBackNavigation:function(e,t){if(t&&t.bHideBackButton===false){return}var i;if(e){i=e.firePress.bind(e)}s.setBackNavigation(i)},_updateHierarchy:function(){if(this._oConfig.bHierarchy===false){return}if(!this._oCurrentViewInfo){return}var e=true,t="#"+o.getHash();for(var i=this._aHierarchy.length-1;i>=0;i--){var n=this._aHierarchy[i],r=n.id===this._oCurrentViewInfo.sViewId,a=n.intent===t;if(r||a){e=false;n=this._updateHierarchyEntry(n);this._aHierarchy[i]=n;this._aHierarchy=this._aHierarchy.slice(0,i+1);if(r){n.intent=t}break}}if(e){this._aHierarchy.push(this._createHierarchyEntry())}var f=[];for(var u=this._aHierarchy.length-2;u>=0;u--){f.push(this._aHierarchy[u])}s.setHierarchy(this._deleteUndefinedProperties(f))},_createHierarchyEntry:function(){var e="#"+o.getHash(),t={id:this._oCurrentViewInfo.sViewId,title:this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle,subtitle:this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined,intent:e};return t},_updateHierarchyEntry:function(e){e.id=this._oCurrentViewInfo.sViewId;e.title=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle;e.subtitle=this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined;return e},_deleteUndefinedProperties:function(e){e.forEach(function(e){for(var t in e){if(e.hasOwnProperty(t)&&!e[t]&&t!=="title"){delete e[t]}}});return e}});var h=e.extend("sap.ushell.Fiori20Adapter",{constructor:function(t,i){e.call(this);this._oComponent=t;this._oConfig=i;this._oHeaderInfo=new u(t,i,new f(t));if(r){r.attachViewChange(this._onViewChange,this)}},init:function(){if(!r){return}var e=a({},this._oConfig);r.traverse(this._oComponent.getAggregation("rootControl"),e)},destroy:function(){if(r){r.detachViewChange(this._onViewChange,this)}},_onViewChange:function(e){this._oHeaderInfo.registerView(e.getParameters())}});h.applyTo=function(e,n,r,o){var a=e instanceof i?e:t.getOwnerComponentFor(e);if(!a){a=n}if(a&&!a._fioriAdapter){s=o;a._fioriAdapter=new h(a,r);a._fioriAdapter.init()}};return h});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Fiori20AdapterTest", ["sap/base/Log","sap/base/util/isEmptyObject","sap/base/util/UriParameters","sap/base/util/Version","sap/ui/core/Configuration","sap/ui/core/library","sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/UIComponent","sap/ushell/Fiori20Adapter"],function(e,i,t,a,r,n,s,o,u){"use strict";var l={I_DEFAULT_SEARCH_DEPTH:5,B_DEFAULT_LATE_ADAPTATION:false,S_FIORI20ADAPTER_URL_PARAM_NAME:"sap-ui-xx-fiori2Adaptation",S_FIORI20ADAPTER_METADATA_PARAM_NAME:"sapFiori2Adaptation",A_ALLOWLIST:["fin.*","ssuite.fin.*","fscm.*","sap.fin.*","cus.sd.*","cus.o2c.*","sap.apf.*","tl.ibp.*","ux.fnd.apf.o2c.*","fnd.apf.*","fnd.pob.o2c.*","fcg.sll.*","ux.fnd.generic-apf-application.*","hpa.cei.*","query.viewbrowser.s1.*","ssuite.vdm.viewbrowser.s1.*","ssuite.smartbusiness.kpi.s1.*","ssuite.smartbusiness.evaluation.s1.*","ssuite.smartbusiness.association.s1.*","ssuite.smartbusiness.drilldown.s1.*","ssuite.smartbusiness.tile.s1.*","ssuite.smartbusiness.tile.ce.s1.*","ssuite.smartbusiness.workspace.s1.*","ssuite.smartbusiness.runtime.s1.*","gs.fin.customersummarycn.display.*","gs.fin.financialstatement.structure.manage.*","gs.fin.financialstatement.display.*","uipsm.*","publicservices.her.*"],getConfiguration:function(e){var i=this._getURLParamConfiguration();if(!i){i=this._getMetadataConfiguration(e)}if(!i){i=this._getDefaultConfiguration(e)}i.iSearchDepth=i.iSearchDepth||l.I_DEFAULT_SEARCH_DEPTH;if(typeof i.iSearchDepth==="string"&&!isNaN(i.iSearchDepth)){i.iSearchDepth=parseInt(i.iSearchDepth,10)}return i},_getURLParamConfiguration:function(){if(typeof r.getFiori2Adaptation!=="function"){return}var e=t.fromQuery(window.location.search);if(!e.get(l.S_FIORI20ADAPTER_URL_PARAM_NAME)){return}var i=r.getFiori2Adaptation();var a;var n;if(typeof i==="boolean"){a=i}else if(i&&i.length>=1){n=i}if(!n&&a===undefined){return}return{bStylePage:n?n.indexOf("style")>-1:a,bMoveTitle:n?n.indexOf("title")>-1:a,bHideBackButton:n?n.indexOf("back")>-1:a,bCollapseHeader:n?n.indexOf("collapse")>-1:a,bHierarchy:n?n.indexOf("hierarchy")>-1:a}},_getMetadataConfiguration:function(e){var t=e.getMetadata("config").getConfig(l.S_FIORI20ADAPTER_METADATA_PARAM_NAME);var a;var r;if(typeof t==="boolean"){a=t}else if(typeof t==="object"&&!i(t)){r=t}if(!r&&a===undefined){return}return{bStylePage:r?this._isSgnTrue(r.style):a,bMoveTitle:r?this._isSgnTrue(r.title):a,bHideBackButton:r?this._isSgnTrue(r.back):a,bCollapseHeader:r?this._isSgnTrue(r.collapse):a,bHierarchy:r?this._isSgnTrue(r.hierarchy):a,bLateAdaptation:r?this._isSgnTrue(r.lateAdaptation):l.B_DEFAULT_LATE_ADAPTATION}},_getDefaultConfiguration:function(e){var i=this._hasMinVersionSmallerThan(e,"1.42")&&this._isAllowed(e);return{bStylePage:i,bMoveTitle:i,bHideBackButton:i,bCollapseHeader:i,bHierarchy:i}},_isAllowed:function(e){var i=e.getMetadata().getName();for(var t=0;t<l.A_ALLOWLIST.length;t++){var a=l.A_ALLOWLIST[t].substring(0,l.A_ALLOWLIST[t].length-2);if(this._isPrefixedString(i,a)){return true}}return false},_isAdaptationRequired:function(e){for(var i in e){if(e[i]===true){return true}}return false},_isPrefixedString:function(e,i){return e&&i&&e.substring(0,i.length)===i},_hasMinVersionSmallerThan:function(e,i){var t=e.getMetadata().getManifestEntry("sap.ui5");var r=true;if(t&&t.dependencies&&t.dependencies.minUI5Version){var n=new a(t.dependencies.minUI5Version);r=n.compareTo(new a(i))<0}return r},_isSgnTrue:function(e){return e===true||e==="true"}};o._fnOnInstanceInitialized=function(i){var t=i.getAggregation("rootControl");if(!t||t.getId()==="navContainerFlp"||i.getId().indexOf("application-")!==0){return}var a=l.getConfiguration(i);if(!l._isAdaptationRequired(a)){return}if(!n.service||!s||typeof s.get!=="function"){e.warning("Fiori20Adapter not loaded because static FactoryRegistry is not available","sap.ui.core.service.ServiceFactoryRegistry should be a function","sap.ushell.Fiori20AdapterTest");return}var r={onBeforeRendering:function(){t.removeEventDelegate(r);var n=s.get("sap.ushell.ui5service.ShellUIService"),o=n&&n.createInstance();if(!n||!o){e.warning("Fiori20Adapter not loaded because ShellUIService is not available","sap.ushell.ui5service.ShellUIService should be declared by configuration","sap.ushell.Fiori20AdapterTest");return}o.then(function(e){if(e&&e.getUxdVersion()===2){u.applyTo(t,i,a,e)}},function(i){e.warning("Fiori20Adapter not loaded as ShellUIService is not available",i,"sap.ushell.Fiori20AdapterTest")})}};t.addEventDelegate(r)}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Layout", ["sap/base/util/extend","sap/ui/core/Configuration","sap/ui/core/Core","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/Config"],function(t,e,i,r,jQuery,s){"use strict";var n=function(t){this.init(t)};n.prototype={settings:null,tileWidth:0,tileHeight:0,tileMargin:0,curTouchMatrixCords:null,tilesInRow:null,groupsList:null,item:null,matrix:null,tiles:null,collisionLeft:false,startGroup:null,currentGroup:null,endGroup:null,init:function(i){this.curTouchMatrixCords={column:null,row:null};this.endGroup=null;this.groupSwitched=false;this.item=null;this.matrix=null;this.tiles=null;this.collisionLeft=false;this.startArea=null;this.currentArea=null;this.endArea=undefined;this.startGroup=null;this.draggedTileDomRef=null;this.sDragStartGroupModelId=undefined;this.sDragTargetGroupModelId=undefined;this.currentGroup=null;this.groupsList=null;this.allGroups=null;this.settings=this.settings||i;t(this,this.settings);this.tileWidth=this.thisLayout.styleInfo.tileWidth;this.tileHeight=this.thisLayout.styleInfo.tileHeight;this.tileMargin=this.thisLayout.styleInfo.tileMarginWidth;this.aExcludedControlClass=this.aExcludedControlClass||[];this.reorderElementsCallback=this.reorderElementsCallback||function(){};this.rightToLeft=e.getRTL();this.tabBarArrowCollisionRight=false;this.tabBarArrowCollisionLeft=false;this.collidedLinkAreas=[];this.intersectedLink=null;this.aLinksBoundingRects=[];this.intersectedLinkPlaceHolder=undefined;this.isLinkPersonalizationSupported=this.thisLayout.oLaunchPageService?this.thisLayout.oLaunchPageService.isLinkPersonalizationSupported():null;this.isLinkMarkerShown=false;this.bIsTabBarCollision=false},moveDraggable:function(t,e,i){var r=this.getCollisionObject(t,e,i);var s;if(r){this._toggleAnchorItemHighlighting(false);if(r.collidedObjectType!=="TabBar"){this._toggleTabBarOverflowArrows(false);this.thisLayout.setOnTabBarElement(false);this._resetOverFlowButtonElements();this.bIsTabBarCollision=false}else{this.bIsTabBarCollision=true;this._toggleTabBarOverflowArrows(true);this.removePlaceHolders();this._handleTabBarCollision(t,i)}if(this.isLinkPersonalizationSupported&&r.collidedObjectType==="Group-link"){s=this._handleLinkAreaIntersection(r.collidedObject,t,e)}else if(r.collidedObjectType==="Group-tile"){s=this._handleTileAreaIntersection(r.collidedObject,t,e);this._toggleTileCloneHoverOpacity(false)}if(s||this.endAreaChanged){this.handlePlaceHolder(r.collidedObject)}}else{this._removeEmptyLinkAreaMark()}},_toggleAnchorItemHighlighting:function(t){if(this.targetGroup){this.targetGroup.classList.toggle("sapUshellAnchorItemDropCollision",t);this.targetGroup.firstElementChild.classList.toggle("sapUshellAnchorInnerMarker",t)}},removePlaceHolders:function(){this._removeLinkDropMarker();this._removeEmptyLinkAreaMark();this._handleChangedGroup(this.currentGroup)},handlePlaceHolder:function(t){if(this.endArea==="tiles"){if(this.endAreaChanged){this._removeLinkDropMarker()}this.handlePlaceholderChange()}else if(this.endArea==="links"&&this.intersectedLink){this._changeLinkPlaceholder(this.intersectedLink,t);if(this.endAreaChanged){this.handlePlaceholderChange()}}},switchLinkWithClone:function(t){if(t){this.intersectedLinkPlaceHolder=t.getDomRef().cloneNode(true);this.intersectedLinkPlaceHolder.setAttribute("id","sapUshellIntersectedLinkPlaceHolder");t.$().replaceWith(this.intersectedLinkPlaceHolder)}},_removeLinkDropMarker:function(){jQuery("#sapUshellLinkDropMarker").remove();this.isLinkMarkerShown=false},saveLinkBoundingRects:function(t){var e=i.byId(t.getAttribute("id"));this.draggedLinkBoundingRects=e.getBoundingRects()},_getMarkerOffset:function(t,e){var i=e.getDomRef().getElementsByClassName("sapUshellLineModeContainer")[0].getBoundingClientRect();var r=i.left;var s=i.top;var n=this.rightToLeft?20:-1;var o=this.rightToLeft?42:21;var a=t[t.length-1].offset.x-r+t[t.length-1].width-n;var l=t[this.rightToLeft?t.length-1:0].offset.x-r-o;var h=t[this.rightToLeft?t.length-1:0].offset.y-s;var u=t[this.rightToLeft?0:t.length-1].offset.y-s;if(document.body.classList.contains("sapUiSizeCompact")){h-=6;u-=6}if(this.rightToLeft){if(i.right-t[t.length-1].offset.x-t[t.length-1].width<16){a=a-8}}else if(l<16){l=0}return{right:a,left:l,topLeft:h,topRight:u}},_changeLinkPlaceholder:function(t,e){var i=this.aLinksBoundingRects[t.link.getId()];var r=i.left;var s=i.topLeft;var n=i.topRight;var o=i.right;if(!e.getDomRef().querySelector("#sapUshellLinkDropMarker")){this._removeLinkDropMarker();var a=e.getDomRef().getElementsByClassName("sapUshellLinksInnerContainer")[0];jQuery(a).prepend(this.LinkDropMarker)}this.LinkDropMarker.style.left=(t.leftSide?r:o)+"px";this.LinkDropMarker.style.top=(t.leftSide?s:n)+"px";this.isLinkMarkerShown=true},showTilePlaceholder:function(t,e,i){var r;var s=this.curTouchMatrixCords.row;var n=this.curTouchMatrixCords.column;this.domRef=this.item.getDomRef()?this.item.getDomRef():this.domRef;this.domRef.style.display="";this.removeExcludedElementsFromMatrix(this.aExcludedControlClass);r=this.tiles||this.thisLayout.getGroupTiles(this.endGroup).slice(0);if(this.matrix[s]&&typeof this.matrix[s][n]==="object"){this.handleMatrixCollision(r,t,e,i);return}this._handleMoveOutOfBorders(r,t)},removeTilePlaceholder:function(){this.domRef=this.item.getDomRef()||this.domRef;var t=this.thisLayout.getGroupTiles(this.currentGroup);t=t.slice(0);if(this.startArea!=="links"&&t.indexOf(this.item)>-1){t.splice(t.indexOf(this.item),1)}if(!this.domRef.parentNode.contains("sapUshellLinksInnerContainer")){this.domRef.style.display="none"}this.thisLayout.initGroupDragMode(this.endGroup);var e=this.thisLayout.organizeGroup(t);this.thisLayout.renderLayoutGroup(this.currentGroup,e)},handlePlaceholderChange:function(){var t=this.currentGroup;var e=this.endGroup!==this.currentGroup;var i=this.endAreaChanged&&this.endArea==="links";var r=this.thisLayout.isTabBarActive()&&this.groupSwitched;this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);this.matrix=this.thisLayout.organizeGroup(this.tiles);if(r){this.handleTabBarSwitch(t)}if(e){this._handleChangedGroup(t)}else if(i){this.removeTilePlaceholder()}if(!i){this.showTilePlaceholder(t,e,i)}},handleMatrixCollision:function(t,e,i,r){var s=this.matrix[this.curTouchMatrixCords.row][this.curTouchMatrixCords.column];var n=t.indexOf(s);var o=t.indexOf(this.item);if(this.rightToLeft){this.collisionLeft=!this.collisionLeft}if(o>-1&&o<n){s=t[n+1]}if(s===this.item){if(i||r){t.splice(t.indexOf(this.item),1)}this._handleTileReplace(t,e);return}var a=this.changeTilesOrder(this.item,s,t,this.matrix);if(a&&!this.isLinkMarkerShown){this._handleTileReplace(a,e)}},handleTabBarSwitch:function(t){this._appendTargetGroupDomRefWithDraggedTile();if(!this.item.getDomRef()){this.endGroup.getInnerContainersDomRefs()[0].appendChild(this.draggedTileDomRef)}else{this.endGroup.getInnerContainersDomRefs()[0].appendChild(this.item.getDomRef())}this.currentGroup=this.endGroup;var e=this.thisLayout.getGroupTiles(t);this.thisLayout.initGroupDragMode(this.endGroup);var i=this.thisLayout.organizeGroup(e);this.thisLayout.renderLayoutGroup(t,i)},_handleMoveOutOfBorders:function(t,e){var i=this.findTileToPlaceAfter(this.matrix,t);if(t[i+1]==this.item){return}var r;if(t[i+1]){r=t[i+1]}else if(this.currentGroup.getShowPlaceholder()){r=t[0]}var s=this.changeTilesOrder(this.item,r,t,this.matrix);if(s){this._handleTileReplace(s,e)}},_handleChangedGroup:function(t){var e=this.thisLayout.getGroupTiles(this.currentGroup);if(this.currentGroup===this.startGroup&&(this.startArea==="tiles"||this.intersectedLinkPlaceHolder)){e=e.slice(0);if(e.indexOf(this.item)>-1){e.splice(e.indexOf(this.item),1)}}if(this.startGroup===this.endGroup&&this.startArea==="tiles"){this.tiles.splice(this.tiles.indexOf(this.item),1)}var i=this.item.getDomRef()||this.domRef;if(this.startArea==="links"&&!this.intersectedLinkPlaceHolder){this.switchLinkWithClone(this.item)}if(this.endArea==="tiles"){this.endGroup.getInnerContainersDomRefs()[0].appendChild(i)}if(!i.parentNode.contains("sapUshellLinksInnerContainer")){i.style.display="none"}this.currentGroup=this.endGroup;this.thisLayout.initGroupDragMode(this.endGroup);var r=this.thisLayout.organizeGroup(e);this.thisLayout.renderLayoutGroup(t,r)},_handleTileReplace:function(t,e){this.reorderElementsCallback({currentGroup:e,endGroup:this.endGroup,tiles:t,item:this.item});this.reorderTilesView(t,this.endGroup);this.reorderTilesInDom();this.thisLayout.renderLayoutGroup(this.endGroup,this.matrix)},_getIntersectedLink:function(t,e,i){var r=document.getElementsByClassName("sapUshellLinkTile")[0];if(!r){return}var s=t.getDomRef().querySelector(".sapUshellLineModeContainer").getBoundingClientRect();var n=!document.body.classList.contains("sapUiSizeCompact");var o=Math.floor((i-s.top)/(n?45:31));var a=this.collidedLinkAreas[t.getId()];var l;if(this.rightToLeft){l=Math.floor((s.right-e)/20)}else{l=Math.floor((e-s.left)/20)}if(o<a.length&&a[o]&&l<a[o].length){return a[o][l]}else if(a.length){var h=a.length;if(o>=h){o=h-1}if(!this.collidedLinkAreas[t.getId()][o]){return}l=this.collidedLinkAreas[t.getId()][o].length;return this.collidedLinkAreas[t.getId()][o][l-1]}},_mapGroupLinks:function(t){var e=t.getId();if(!this.collidedLinkAreas[e]||this.bElapseGroupLinksMap){this.bElapseGroupLinksMap=false;var i=t.getLinks();var r=[];var s;var n;var o=0;this.collidedLinkAreas.push(t.getId());i.forEach(function(e){n=this._getLinkBoundingRects(e,t);n.forEach(function(i){if(i.offset.y>s){o++}s=i.offset.y;this._addLinkToHashMap(r,t,i,o,e)}.bind(this))}.bind(this));this.collidedLinkAreas[e]=r}},_getLinkBoundingRects:function(t,e){var i=t.getBoundingRects();if(this.item&&this.item.getId()===t.getId()){i=this.draggedLinkBoundingRects}if(i.length){this.aLinksBoundingRects[t.getId()]=this._getMarkerOffset(i,e)}return i},_addLinkToHashMap:function(t,e,i,r,s){if(!t[r]){t[r]=[]}for(var n=0;n<=(i.width+20)/20;n++){var o={link:s,leftSide:!this.rightToLeft};if(n>(i.width+20)/20/2){o.leftSide=this.rightToLeft}t[r].push(o)}},_isLinkAreaIntersection:function(t,e,i){var r=t.getInnerContainersDomRefs();if(r[1]){return this._isElementCollideByGivenCordinates(r[1],e,i)}return false},_isLinksEquals:function(t,e){if(!t||!e){return false}if(t.link.getId()!==e.link.getId()){return false}return t.link.leftSide===e.link.leftSide},_toggleTileCloneHoverOpacity:function(t){var e=document.getElementsByClassName("sapUshellTile-clone");for(var i=0;i<e.length;++i){e[i].classList.toggle("sapUshellTileDragOpacity",t)}},_handleLinkAreaIntersection:function(t,e,i){if(this.isLinkPersonalizationSupported){this._toggleTileCloneHoverOpacity(true)}this._mapGroupLinks(t);this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(t));var r=this._getIntersectedLink(t,e,i);var s=false;if(r){s=this._isLinksEquals(this.intersectedLink,r);this.intersectedLink=r}else{this.removeTilePlaceholder()}this._markEmptyLinkArea(t);return s},_markEmptyLinkArea:function(t){if(!t.getLinks().length){var e=t.getDomRef();if(e){var i=e.getElementsByClassName("sapUshellLineModeContainer");for(var r=0;r<i.length;++r){i[r].classList.add("sapUshellEmptyLinkAreaHover")}}}},_removeEmptyLinkAreaMark:function(){var t=document.getElementsByClassName("sapUshellLineModeContainer");for(var e=0;e<t.length;++e){t[e].classList.remove("sapUshellEmptyLinkAreaHover")}},reorderTilesInDom:function(){var t=this.item.getDomRef()?this.item.getDomRef():this.domRef;var e=jQuery(t).index();var i=jQuery(t).closest(".sapUshellTilesContainer-sortable");var r=this.calcDestIndexInGroup();var s=jQuery(this.endGroup.getDomRef()).find(".sapUshellTilesContainer-sortable");var n=s.find(".sapUshellTile");if(this.startArea==="tiles"){i.find(n[e]).remove()}else if(!this.intersectedLinkPlaceHolder){this.switchLinkWithClone(this.item)}if(this.endArea!=="links"){n=s.find(".sapUshellTile");s[0].insertBefore(t,n[r])}},isLinkIntersected:function(){return this.intersectedLink!==undefined},calcDestIndexInGroup:function(){var t;var e=0;var i;var r;var s=false;for(i=0;i<this.matrix.length&&!s;i++){for(r=0;r<this.matrix[i].length;r++){if(this.matrix[i][r]!==undefined){if(this.item.sId!==this.matrix[i][r].sId){if(t!==this.matrix[i][r].sId){t=this.matrix[i][r].sId;e++}}else{s=true;break}}}}return e},layoutStartCallback:function(t){this.init();this.item=i.byId(t.getAttribute("id"));this.tilesInRow=this.thisLayout.getTilesInRow();this.groupsList=this.thisLayout.getGroups();this.allGroups=this.thisLayout.getAllGroups();this.startGroup=this.currentGroup=this.item.getParent();this.groupSwitched=false;this.startArea=this.isLinkPersonalizationSupported&&this.item.getMode&&this.item.getMode()==="LineMode"?"links":"tiles";this.currentArea=this.startArea;this.thisLayout.initDragMode();if(this.isLinkPersonalizationSupported){this.LinkDropMarker=this._getLinkDropMarkerElement()}},_getLinkDropMarkerElement:function(){var t=document.createElement("DIV");var e=document.createElement("DIV");var i=document.createElement("DIV");t.setAttribute("id","sapUshellLinkDropMarker");e.setAttribute("id","sapUshellLinkDropMarkerDot");i.setAttribute("id","sapUshellLinkDropMarkerLine");t.appendChild(e);t.appendChild(i);return t},isAreaChanged:function(){return this.currentArea&&this.endArea?this.currentArea!==this.endArea:false},isOriginalAreaChanged:function(){return this.startArea&&this.endArea?this.startArea!==this.endArea:false},_getDestinationIndex:function(t){if(t==="links"){if(this.intersectedLink){var e=this.endGroup.getLinks().indexOf(this.intersectedLink.link);var i=this.endGroup.getLinks().indexOf(this.item);if(this.intersectedLink.leftSide){e=this.rightToLeft?e+1:e-1}if(i<0||i>e){e=this.rightToLeft?e:e+1}return e}return this.endGroup.getLinks().length}return this._getDestinationTileIndex()},layoutEndCallback:function(){var t;var e;var i;this._removeLinkDropMarker();if(this.endArea!=="links"&&!this.tiles){return{tile:this.item}}e=this._getDragSourceGroup();if(!l.isTabBarActive()||!this.bIsTabBarCollision){this.targetGroup=""}i=this._getDestGroupObject(this.targetGroup);t={srcGroup:e,dstGroup:i,dstGroupData:this._getDropTargetGroup(),tile:this.item,dstTileIndex:this._getDestinationIndex(this.endArea),tileMovedFlag:true,srcArea:this.startArea,dstArea:this.bIsTabBarCollision?undefined:this.endArea};return t},_getDestGroupObject:function(t){return t?i.byId(t.getAttribute("id")):this.endGroup},_getDragSourceGroup:function(){var t;t=this.startGroup;if(this.thisLayout.isTabBarActive()&&this.groupSwitched===true){t={groupId:this.sDragStartGroupModelId}}return t},_getDropTargetGroup:function(){var t;if(this.thisLayout.isTabBarActive()&&this.thisLayout.isOnTabBarElement()){t={groupId:this.sDragTargetGroupModelId}}else{t=this.endGroup}return t},_getDestinationTileIndex:function(){var t;var e;if(this.thisLayout.isTabBarActive()&&this.thisLayout.isOnTabBarElement()){t=this._getDropTargetGroup().groupId;e=this._getModelGroupById(t);return e.tiles.length}return this.tiles.indexOf(this.item)},compareArrays:function(t,e){if(t.length!==e.length){return false}for(var i=0;i<t.length;i++){if(t[i]!==e[i]){return false}}return true},reorderTilesView:function(t){this.tiles=t;this.matrix=this.thisLayout.organizeGroup(t)},changeTilesOrder:function(t,e,i,r){var s=i.slice(0);var n=s.indexOf(t);var o;var a;var l;if(n>-1){s.splice(n,1)}if(e){s.splice(s.indexOf(e),0,this.item)}else{s.push(t)}if(this.currentGroup==this.endGroup){if(this.compareArrays(i,s)){return false}o=this.thisLayout.organizeGroup(s);a=this.thisLayout.getTilePositionInMatrix(t,r);l=this.thisLayout.getTilePositionInMatrix(t,o);if(a.row==l.row&&a.col==l.col){return false}}this.tiles=s;this.currentGroup=this.endGroup;return s},setMatrix:function(t){this.matrix=t},findTileToPlaceAfter:function(t,e){var i=this.thisLayout.rightToLeft?0:this.curTouchMatrixCords.column;var r=this.thisLayout.rightToLeft?1:-1;var s=0;var n;var o;var a;var l=t[0].length;for(n=this.curTouchMatrixCords.row;n>=0;n--){for(o=i;o>=0&&o<l;o+=r){if(!t[n]||typeof t[n][o]!=="object"){continue}a=e.indexOf(t[n][o]);s=a>s?a:s}i=t[0].length-1}return s||e.length-1},_isElementCollideByGivenCordinates:function(t,e,i){var r=t.getBoundingClientRect();var s=false;var n=false;if(r.height===0&&!t.classList.contains("sapUshellNoLinksAreaPresent")){r=t.parentNode.getBoundingClientRect()}s=r.right>=e&&r.left<=e;n=r.bottom>=i&&r.top<=i;return s&&n},_getMatrixCordinatesOfTouchedTile:function(e,i,r){var s=t({},this.curTouchMatrixCords);var n=e.getInnerContainersDomRefs()[0].getBoundingClientRect();this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(e));var o=this.rightToLeft?n.right+-1*i:n.left*-1+i;var a=(n.top*-1+r)/(this.tileHeight+this.tileMargin);var l=o/(this.tileWidth+this.tileMargin);s={row:Math.floor(a),column:Math.floor(l)};return s},_getCollidedGroup:function(t,e){for(var i=0;i<this.groupsList.length;i++){var r=this.groupsList[i];var s=r.getInnerContainersDomRefs();if(!s){continue}for(var n=0;n<s.length;n++){if(s[n]&&this._isElementCollideByGivenCordinates(s[n],t,e)){var o=!r.groupHasTiles();for(var a=this.groupsList.length-1;a>=i;a--){if(o){break}if(!this.groupsList[a].groupHasTiles()){var l=this.groupsList[a].getDomRef();if(!l||!l.classList.contains("sapUshellInDragMode")){continue}var h=l.getElementsByClassName("sapUshellInner");for(var u=0;u<h.length;u++){h[u].removeAttribute("style")}}}return r}}}},_handleTileAreaIntersection:function(e,i,r){var s=this._getMatrixCordinatesOfTouchedTile(e,i,r);if(e===this.endGroup&&s.column===this.curTouchMatrixCords.column&&s.row===this.curTouchMatrixCords.row){return false}if(this.rightToLeft){this.collisionLeft=this.curTouchMatrixCords.column-s.column>0}else{this.collisionLeft=s.column-this.curTouchMatrixCords.column>0}if(s.column===this.curTouchMatrixCords.column){this.collisionLeft=false}t(this.curTouchMatrixCords,s);return true},_getGroupCollisionObject:function(t,e){var i;var r;i=this._getCollidedGroup(t,e);if(!i||i.getIsGroupLocked()){return undefined}r=this._isLinkAreaIntersection(i,t,e);this.endGroup=i;if(!this.tiles){this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0)}this.endArea=r?"links":"tiles";this.endAreaChanged=this.isAreaChanged();this.currentArea=this.endArea;return{collidedObjectType:r?"Group-link":"Group-tile",collidedObject:i}},getCollisionObject:function(t,e){if(this.thisLayout.oTabBarItemClickTimer){clearTimeout(this.thisLayout.oTabBarItemClickTimer)}if(this.thisLayout.isTabBarActive()&&this._isTabBarCollision(e)){return{collidedObjectType:"TabBar"}}return this._getGroupCollisionObject(t,e)},_isTabBarScrollArea:function(t){var e=jQuery("#anchorNavigationBar").height()||0;var i=jQuery("#anchorNavigationBar").offset();var r=i?i.top:0;var s=e+r;return e>0&&t>s&&t<s+30},_cancelLongDropTimmer:function(){clearTimeout(this.thisLayout.oTabBarItemClickTimer)},_isTabBarCollision:function(t){var e=jQuery("#anchorNavigationBar").height()||0;var i=jQuery("#anchorNavigationBar").offset();var r=i?i.top:0;return t<e+r&&t>r},_handleTabBarCollision:function(t,e){var r=this._getTabBarHoverItem(t,e);if(l.isTabBarActive()){this._toggleTileCloneHoverOpacity(true)}this.lastHighlitedTabItem=r;this.thisLayout.setOnTabBarElement(true);var s=this._handleOverflowCollision(t);if(s){return}if(!r){return}this.targetGroup=r;this.sDragTargetGroupModelId=r.getAttribute("modelGroupId");var n=this._getTabBarGroupIndexByModelId(this.sDragTargetGroupModelId);if(this.thisLayout.oTabBarItemClickTimer){clearTimeout(this.thisLayout.oTabBarItemClickTimer)}var o=this._getModelGroupById(this._getDropTargetGroup().groupId);if(o.isGroupLocked){this._toggleTabBarOverflowArrows(false);this.thisLayout.setOnTabBarElement(false);this._resetOverFlowButtonElements();return}this._toggleAnchorItemHighlighting(true);if(!this.sDragStartGroupModelId){this.sDragStartGroupModelId=this.startGroup.getGroupId()}this.thisLayout.oTabBarItemClickTimer=setTimeout(function(){var t=this._getSelectedTabBarItem();if(this.lastHighlitedTabItem===t){return}this.draggedTileModelPath=this.item.getBindingContext().getPath();this._prepareDomForDragAndDrop();this.startGroup.removeAggregation("tiles",this.item,true);var e=this.sDragStartGroupModelId===this.sDragTargetGroupModelId;this.item.getBindingContext().oModel.setProperty(this.draggedTileModelPath+"/draggedInTabBarToSourceGroup",e);this.groupSwitched=true;i.getEventBus().publish("launchpad","switchTabBarItem",{iGroupIndex:n});var r=this.thisLayout.getGroups();this.endGroup=r[0];this.bElapseGroupLinksMap=true}.bind(this),800);if(this.tiles===null&&this.endGroup){this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0)}var a=document.getElementsByClassName("sapUshellTabBarHoverOn");for(var h=a.length-1;h>=0;--h){a[h].classList.remove("sapUshellTabBarHoverOn")}r.classList.add("sapUshellTabBarHoverOn");return true},_prepareDomForDragAndDrop:function(){var t=this.item.getDomRef();if(r.system.tablet){var e=t.cloneNode(true);var i=t.parentNode;this.origItemId=t.getAttribute("id");this.origItemDataSapUi=t.getAttribute("data-sap-ui");t.removeAttribute("id");t.removeAttribute("data-sap-ui");t.style.display="none";e.style.display="none";var s=document.getElementById("dashboardGroups");s.parentNode.appendChild(t);i.appendChild(e);this.draggedTileDomRef=t}else if(!this.draggedTileDomRef){this.draggedTileDomRef=t}},_appendTargetGroupDomRefWithDraggedTile:function(){var t=this.endGroup.getInnerContainerDomRefs()?this.endGroup.getInnerContainerDomRefs()[0]:null;if(!this.item.getDomRef()){if(r.system.tablet){this.draggedTileDomRef.setAttribute("id",this.origItemId);this.draggedTileDomRef.setAttribute("data-sap-ui",this.origItemDataSapUi);this.draggedTileDomRef.style.display=""}if(t){t.appendChild(this.draggedTileDomRef)}}else{if(t){t.appendChild(this.item.getDomRef())}if(r.system.tablet){this.item.getDomRef().style.display=""}}},_getSelectedTabBarItem:function(){return document.getElementsByClassName("sapUshellAnchorItemSelected")[0]},_getTabBarGroupIndexByModelId:function(t){var e;for(var i=0;i<this.allGroups.length;++i){e=this.allGroups[i].groupId;if(t===e){return i}}},_getModelGroupById:function(t){var e=this.thisLayout.getAllGroups();var i;var r;for(var s=0;s<e.length;++s){i=e[s];r=i.groupId;if(r===t){return i}}},_handleOverflowCollision:function(t){var e=i.byId("anchorNavigationBar");var r=this._calculateOverflowButtonSideCollision(t);if(r=="right"){if(!this.tabBarArrowCollisionRight){e._scrollToGroupByGroupIndex(e.anchorItems.length-1,5e3);this.tabBarArrowCollisionRight=true}return true}else if(r=="left"){if(!this.tabBarArrowCollisionLeft){e._scrollToGroupByGroupIndex(0,5e3);this.tabBarArrowCollisionLeft=true}return true}this._resetOverFlowButtonElements();return false},_calculateOverflowButtonSideCollision:function(t){var e=jQuery(".sapUshellAnchorRightOverFlowButton");var i=e.offset().left;var r=jQuery(".sapUshellAnchorItemOverFlow");var s=r.offset().left;var n=jQuery(".sapUshellAnchorLeftOverFlowButton");var o=n.offset().left;var a=32;var l=jQuery("#anchorNavigationBar");var h=l.offset().left;if(t>i&&t<s){return"right"}if(t>h&&t<o+a){return"left"}},_resetOverFlowButtonElements:function(){var t=r.system.tablet;var e=jQuery(t?".sapUshellAnchorNavigationBarItemsScroll":".sapUshellAnchorNavigationBarItems");e.stop();this.tabBarArrowCollisionRight=false;this.tabBarArrowCollisionLeft=false},_toggleTabBarOverflowArrows:function(t){var e=document.getElementsByClassName("sapUshellAnchorRightOverFlowButton");var i=document.getElementsByClassName("sapUshellAnchorLeftOverFlowButton");for(var r=0;r<e.length;++r){e[r].classList.toggle("sapUshellTabBarOverflowButton",t)}for(var s=0;s<i.length;++s){i[s].classList.toggle("sapUshellTabBarOverflowButton",t)}},_getTabBarHoverItem:function(t,e){var i=jQuery(".sapUshellAnchorItem:not(.sapUshellShellHidden)").eq(0).offset().left;if(t-i<=0){return}var r=Math.round((t-i)/10);if(r>=e.length){r=e.length-1}var s=e[r];var n=document.getElementsByClassName("sapUshellAnchorItem");return n[s]},removeExcludedElementsFromMatrix:function(t){if(!t.length){return}if(!this.matrix){return}var e=this.matrix.map(function(e){return e.map(function(e){var i=t.some(function(t){return e instanceof t});return i?undefined:e})});this.setMatrix(e)},setExcludedControl:function(t){if(t){this.aExcludedControlClass.push(t)}},setReorderTilesCallback:function(t){if(typeof t==="function"){this.reorderElementsCallback=t}}};var o=function(){};var a;o.prototype={_initDeferred:new Promise(function(t){a=t}),init:function(t){var e=function(){var t=this.container&&this.container.getAttribute("id")||"";if(t.includes("destroyed")){return}var i=this.getStyleInfo(this.container);if(i.tileWidth>0){this.isInited=true;this.reRenderGroupsLayout();this.layoutEngine=new n({thisLayout:this});a();return}setTimeout(e,100)}.bind(this);this.cfg=t||this.cfg;this.minTilesinRow=2;this.container=this.cfg.container||document.getElementById("dashboardGroups");this.oTabBarItemClickTimer=new Date;this.bTabBarModeActive=false;this.bOnTabBarElement=false;if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(t){this.oLaunchPageService=t;e()}.bind(this))}else{e()}i.getEventBus().subscribe("launchpad","tabBarChange",this._onTabBarChange,this);return this.getInitPromise()},setOnTabBarElement:function(t){this.bOnTabBarElement=t},isOnTabBarElement:function(){return this.bOnTabBarElement},_onTabBarChange:function(t,e,i){if(i==="tabs"){this.bTabBarModeActive=true}else{this.bTabBarModeActive=false}},tabBarTileDropped:function(){if(this.oTabBarItemClickTimer){clearTimeout(this.oTabBarItemClickTimer)}},getInitPromise:function(){return this._initDeferred},getLayoutEngine:function(){return this.layoutEngine},getStyleInfo:function(t){var e=document.createElement("div");var i=t.getAttribute("id");t=i?document.getElementById(i):t;if(!t){return{}}e.className="sapUshellTile";var r=s.last("/core/home/sizeBehavior");if(r==="Small"){e.classList.add("sapUshellSmall")}e.style.position="absolute";e.style.visibility="hidden";t.appendChild(e);var n=window.getComputedStyle(e);var o=window.getComputedStyle(t);var a={tileMarginHeight:parseFloat(n.marginBottom,10)+parseFloat(n.marginTop,10),tileMarginWidth:parseFloat(n.marginLeft,10)+parseFloat(n.marginRight,10),tileWidth:e.offsetWidth,tileHeight:e.offsetHeight,containerWidth:o.width?parseInt(o.width,10):t.offsetWidth};t.removeChild(e);return a},getGroups:function(){return this.cfg.getGroups()},getAllGroups:function(){return this.cfg.getAllGroups?this.cfg.getAllGroups():[]},isTabBarActive:function(){return this.cfg.isTabBarActive?this.cfg.isTabBarActive():false},getTilesInRow:function(){return this.tilesInRow},setTilesInRow:function(t){this.tilesInRow=t},checkPlaceForTile:function(e,i,r,s,n){if(typeof i[r.y]==="undefined"){i.push(new Array(i[0].length))}if(typeof i[r.y+1]==="undefined"){i.push(new Array(i[0].length))}if(typeof i[r.y][r.x]!=="undefined"){return false}var o=t({},r);if(n||e&&e.getLong&&!e.getLong()){return[o]}var a=[o];if(e&&e.getLong&&e.getLong()){if(r.x+1>=i[0].length||typeof i[o.y][o.x+1]!=="undefined"){return false}a.push({y:o.y,x:o.x+1})}return a},placeTile:function(t,e,i){for(var r=0;r<i.length;r++){e[i[r].y][i[r].x]=t}},getTilePositionInMatrix:function(t,e){for(var i=0;i<e.length;i++){for(var r=0;r<e[i].length;r++){if(e[i][r]===t){return{row:i,col:r}}}}return false},fillRowsInLine:function(t,e,i,r){if(!e.length){return 0}var s;for(var n=0;n<t[0].length&&e.length;n++){s=this.checkPlaceForTile(e[0],t,{x:n,y:i},r);if(s){this.placeTile(e[0],t,s);e.shift()}}},organizeGroup:function(t,e){var i=t.slice(0);var r=[];var s=0;r.push(new Array(e?Math.floor(this.tilesInRow/2):this.tilesInRow));while(i.length){this.fillRowsInLine(r,i,s,e);s++}if(this.rightToLeft){for(var n=0;n<r.length;n++){r[n].reverse()}}r=this.cleanRows(r);return r},cleanRows:function(t){var e=false;for(var i=t.length-1;i>0&&!e;i--){for(var r=0;r<t[i].length&&!e;r++){if(typeof t[i][r]==="object"){e=true}}if(!e){t.pop()}}return t},setGroupsLayout:function(t,e){if(t.getIsGroupLocked()&&e.length>0){var i=t.getDomRef().parentElement;t.getDomRef().style.width="";i.style.width="";i.style.display=""}},calcTilesInRow:function(t,e,i){var r=Math.floor(t/(e+i));r=r<this.minTilesinRow?this.minTilesinRow:r;return r},getGroupTiles:function(t){var e=t.getTiles();if(t.getShowPlaceholder()){e.push(t.oPlusTile)}return e},reRenderGroupsLayout:function(t){if(!this.isInited){return}var e=this.getStyleInfo(this.container);if(!e.tileWidth){return}this.styleInfo=e;this.tilesInRow=this.calcTilesInRow(e.containerWidth,e.tileWidth,e.tileMarginWidth);t=t||this.getGroups();for(var i=0;i<t.length;i++){if(t[i].getDomRef&&!t[i].getDomRef()){continue}var r=this.getGroupTiles(t[i]);var s=this.organizeGroup(r);this.setGroupsLayout(t[i],s)}},initDragMode:function(){this.initGroupDragMode(this.layoutEngine.currentGroup)},endDragMode:function(){var t=this.getGroups();for(var e=0;e<t.length;e++){var i=t[e].getDomRef();if(!i||!i.classList.contains("sapUshellInDragMode")){continue}i.classList.remove("sapUshellInDragMode");var r=this.getGroupTiles(t[e]);for(var s=0;s<r.length;s++){r[s].getDomRef().removeAttribute("style")}var n=i.getElementsByClassName("sapUshellInner");for(var o=0;o<n.length;o++){n[o].removeAttribute("style")}}},initGroupDragMode:function(t){if(t.$().hasClass("sapUshellInDragMode")){return}var e=this.getGroupTiles(t);var i=this.organizeGroup(e);t.$().addClass("sapUshellInDragMode");this.renderLayoutGroup(t,i)},calcTranslate:function(t,e){var i=e*(this.styleInfo.tileWidth+this.styleInfo.tileMarginWidth);var r=t*(this.styleInfo.tileHeight+this.styleInfo.tileMarginHeight);if(this.layoutEngine.rightToLeft){i=-i}return{x:i,y:r}},renderLayoutGroup:function(t,e){var i;this.styleInfo=this.getStyleInfo(this.container);for(var r=0;r<e.length;r++){for(var s=0;s<e[r].length;s++){if(i===e[r][s]){continue}else{i=e[r][s]}if(typeof i==="undefined"){break}}}}};var l=new o;return l});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/NWBCInterface", ["sap/ushell/EventHub","sap/ushell/Config"],function(e,n){"use strict";var t={};t.notifyUserActivity=function(){e.emit("nwbcUserIsActive",Date.now())};t.getSessionTimeoutMinutes=function(){var e=0;if(n.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){e=n.last("/core/shell/sessionTimeoutIntervalInMinutes")}return e};t.isAnyAppKeptAlive=function(){return new Promise(function(e){sap.ui.require(["sap/ushell/components/applicationIntegration/Storage"],function(n){e(n.length()>0)})})};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/SessionHandler", ["sap/ushell/resources","sap/ushell/Config","sap/ushell/utils","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/ui/model/json/JSONModel","sap/m/VBox","sap/ui/core/library","sap/m/library","sap/ushell/ui/launchpad/LoadingDialog","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/base/Log","sap/ushell/EventHub","sap/ui/core/Core"],function(e,i,t,s,n,o,a,r,u,l,d,jQuery,h,c,g,m){"use strict";var f=l.ButtonType;var v=u.ValueState;var p=false;var S=function(u){var l=this;var S=false;var T=false;this.init=function(e){c.debug("SessionHandler.oConfig.sessionTimeoutIntervalInMinutes: "+e.sessionTimeoutIntervalInMinutes,"","SessionHandler");c.debug("SessionHandler.oConfig.sessionTimeoutReminderInMinutes: "+e.sessionTimeoutReminderInMinutes,"","SessionHandler");c.debug("SessionHandler.oConfig.enableAutomaticSignout: "+e.enableAutomaticSignout,"","SessionHandler");this.oConfig=e;this.oModel=new a;this.putTimestampInStorage(this._getCurrentDate());this.initLogout();this._fnOnVisibilityChange=this.onVisibilityChange.bind(this);sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(i){this.oAppLifeCycleService=i;this.attachUserEvents();if(e.sessionTimeoutIntervalInMinutes>0){this.attachVisibilityEvents();this.initSessionTimeout()}if(e.sessionTimeoutTileStopRefreshIntervalInMinutes>0){this.initTileRequestTimeout()}g.on("nwbcUserIsActive").do(this.userActivityHandler.bind(this));S=true}.bind(this))};this.initLogout=function(){if(T===false){sap.ushell.Container.registerLogout(this.logout);this._registerCommHandlers();T=true}};this.initSessionTimeout=function(){if(this.oConfig.enableAutomaticSignout===undefined){this.oConfig.enableAutomaticSignout=false}if(this.oConfig.sessionTimeoutReminderInMinutes===undefined){this.oConfig.sessionTimeoutReminderInMinutes=0}this.oModel.setProperty("/SessionRemainingTimeInSeconds",this.oConfig.sessionTimeoutReminderInMinutes*60);this.counter=0;this.oKeepAliveDialog=undefined;this.notifyServer();this.monitorUserIsInactive()};this._registerCommHandlers=function(){u.registerShellCommunicationHandler({"sap.ushell.sessionHandler":{oRequestCalls:{logout:{isActiveOnly:false,distributionType:["URL"]},extendSessionEvent:{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{notifyUserActive:{executeServiceCallFn:function(){if(S===true){l.userActivityHandler()}return(new jQuery.Deferred).resolve().promise()}}}}})};this.monitorUserIsInactive=function(e){c.debug("SessionHandler.monitorInactiveUser : Check started","*****","SessionHandler");e=typeof e!=="undefined"?e:true;var i=this.timeLastInteraction();var t=this.timePopup();var s=this.timeNow();var n=this.timeOver();var o=t-s;var a=s-i;c.debug("SessionHandler.monitorUserIsInactive :: time since last interaction : "+a,"","SessionHandler");c.debug("SessionHandler.monitorUserIsInactive :: remaining time until dialog : "+o,"","SessionHandler");if(s<t&&e){var r=setTimeout(this.monitorUserIsInactive.bind(this),o*1e3);this.oMonitorUserIsInactiveTimer=this.oMonitorUserIsInactiveTimer||r;return}if(s>=t&&s<n&&this.oConfig.sessionTimeoutReminderInMinutes>0){this.detachUserEvents();this.detachVisibilityEvents();this.oContinueWorkingDialog=this.createContinueWorkingDialog();this.oContinueWorkingDialog.open();c.debug("SessionHandler.monitorUserIsInactive :: Dialog opened","","SessionHandler");this.monitorCountdown(true);this._createSystemNotification()}if(s>=n){c.debug("SessionHandler.monitorUserIsInactive :: Session over detected","","SessionHandler");this.handleSessionOver();return}c.debug("SessionHandler.monitorInactiveUser :: Check done","*****","SessionHandler")};this.handleSessionOver=function(){clearTimeout(this.notifyServerTimer);m.getEventBus().publish("launchpad","sessionTimeout");if(this.oConfig.enableAutomaticSignout===true){c.debug("SessionHandler.handleSessionOver :: Automatic signout gets initiated","","SessionHandler");this.logout()}else{c.debug("SessionHandler.handleSessionOver :: Session expired dialog gets opened","","SessionHandler");this.createSessionExpiredDialog().open()}};this.notifyServer=function(){var e=this._getCurrentDate()-new Date(this.getTimestampFromStorage());var i=e/(1e3*60);var s=this.oConfig.sessionTimeoutIntervalInMinutes*30*1e3;if(i<=this.oConfig.sessionTimeoutIntervalInMinutes){sap.ushell.Container.sessionKeepAlive();u.postMessageToIframeApp("sap.ushell.sessionHandler","extendSessionEvent",{})}else{}this.notifyServerTimer=setTimeout(this.notifyServer.bind(this),t.sanitizeTimeoutDelay(s))};this.monitorCountdown=function(e){if(e){c.debug("SessionHandler.monitorCountdown :: Initiated from outside","*****","SessionHandler")}else{c.debug("SessionHandler.monitorCountdown :: Initiated from internal call","**","SessionHandler")}var i=this.timeLastInteraction();var t=this.timePopup();var s=this.timeNow();var n=this.timeOver();var o=s-i;c.debug("SessionHandler.monitorCountdown :: timeNow : "+s,"","SessionHandler");c.debug("SessionHandler.monitorCountdown :: iTimeLastInteraction : "+i,"","SessionHandler");c.debug("SessionHandler.monitorCountdown :: timeSinceLastInteraction : "+o,"","SessionHandler");c.debug("SessionHandler.monitorCountdown :: iTimeOver : "+n,"","SessionHandler");if(s<t){c.debug("SessionHandler.monitorCountdown :: Auto-click","<=","SessionHandler");this.continueWorkingButtonPressHandler(true);return}var a=n-s;if(a>0){c.debug("SessionHandler.monitorCountdown :: Remaining seconds : "+a+" - iTimeOver : "+n,"","SessionHandler");this.oModel.setProperty("/SessionRemainingTimeInSeconds",a);this.remainingTimer=setTimeout(this.monitorCountdown.bind(this,false),500);return}if(a<=0){if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close()}this.handleSessionOver()}};this.initTileRequestTimeout=function(){this.checkStopBackendRequestRemainingTime();this.bBackendRequestsActive=true};this.checkStopBackendRequestRemainingTime=function(){var e=this._getCurrentDate()-new Date(this.getTimestampFromStorage());var i=e/(1e3*60);var s=this.oConfig.sessionTimeoutTileStopRefreshIntervalInMinutes;var n=(s-i)*60*1e3;if(i<s){setTimeout(this.checkStopBackendRequestRemainingTime.bind(this),t.sanitizeTimeoutDelay(n))}else if(s>0){this._setConnectionActive(false)}};this._setConnectionActive=function(e){if(e){setTimeout(this.checkStopBackendRequestRemainingTime.bind(this),0)}if(this.bBackendRequestsActive===e){return}m.getEventBus().publish("launchpad","setConnectionToServer",{active:e});if(!i.last("/core/spaces/enabled")){if(e){this._setTilesVisibleOnHomepage()}else{this._setTilesInvisibleOnHomepage()}}this.bBackendRequestsActive=e};this._setTilesVisibleOnHomepage=function(){sap.ui.require(["sap/ushell/utils"],function(e){e.handleTilesVisibility()})};this._setTilesInvisibleOnHomepage=function(){return new Promise(function(e,i){return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(i){i.getGroups().then(function(t){var s=m.getEventBus();t.forEach(function(e){i.getGroupTiles(e).forEach(function(e){i.setTileVisible(e,false)})});s.publish("launchpad","visibleTilesChanged",[]);e()})})})};this.getLocalStorage=function(){if(this.oLocalStorage===undefined){var e=new h(this.oConfig&&this.oConfig.sessionType||h.Type.local);if(this._isLocalStorageSupported(e)){this.oLocalStorage=e}else{this.oLocalStorage=false}}return this.oLocalStorage};this._isLocalStorageSupported=function(e){var i;try{i=e.isSupported()}catch(e){i=false}if(!i){c.warning("SessionHandler._isLocalStorageSupported :: Failed to instantiate local storage handler: "+"Might be disabled by the browser!","","SessionHandler")}return i};this._createSystemNotification=function(){var i=function(){var i=this.oModel.getProperty("/SessionRemainingTimeInSeconds");var t=new Notification(e.i18n.getText("sessionTimeoutMessage_title"),{body:this.continueWorkingFormatter(i)});t.onclick=function(e){window.focus()}}.bind(this);if(!("Notification"in window)){return}else if(Notification.permission==="granted"){i()}else if(Notification.permission!=="denied"){Notification.requestPermission().then(function(e){if(e==="granted"){i()}})}};this.continueWorkingFormatter=function(i){var t=i>60;var s;var n=t?e.i18n.getText("sessionTimeoutMessage_units_minutes"):e.i18n.getText("sessionTimeoutMessage_units_seconds");var o=t?Math.ceil(i/60):i;if(l.oConfig.enableAutomaticSignout){s=e.i18n.getText("sessionTimeoutMessage_kioskMode_main",[o,n])}else{s=e.i18n.getText("sessionTimeoutMessage_main",[o,n])}return s};this.createContinueWorkingDialog=function(){c.debug("SessionHandler.createContinueWorkingDialog :: Continue working dialog being created","","SessionHandler");this.oMessageVBox=new r;this.oSessionKeepAliveLabel=new o({text:{parts:["/SessionRemainingTimeInSeconds"],formatter:this.continueWorkingFormatter}});this.oMessageVBox.addItem(this.oSessionKeepAliveLabel);if(this.oConfig.enableAutomaticSignout===false){this.oLostDataReminder=new o({text:e.i18n.getText("sessionTimeoutMessage_unsavedData")});this.oMessageVBox.addItem(this.oLostDataReminder)}this.oSessionKeepAliveLabel.setModel(this.oModel);this.oSessionKeepAliveDialog=new s("sapUshellKeepAliveDialog",{title:e.i18n.getText("sessionTimeoutMessage_title"),type:"Message",state:v.Warning,content:this.oMessageVBox,beginButton:this.createContinueWorkingButton(),afterClose:function(){this.oSessionKeepAliveDialog.destroy()}.bind(this)}).addStyleClass("sapContrastPlus");if(this.oConfig.enableAutomaticSignout===true){this.oSignOutButton=new n({text:e.i18n.getText("logoutBtn_title"),tooltip:e.i18n.getText("logoutBtn_tooltip"),press:this.logout.bind(this)});this.oSessionKeepAliveDialog.setEndButton(this.oSignOutButton)}return this.oSessionKeepAliveDialog};this.createContinueWorkingButton=function(){return new n({text:e.i18n.getText("sessionTimeoutMessage_continue_button_title"),type:f.Emphasized,press:l.continueWorkingButtonPressHandler.bind(l,false)})};this.continueWorkingButtonPressHandler=function(e){c.debug("SessionHandler.continueWorkingButtonPressHandler :: Session was extended"+e?"automatically":"by user","","SessionHandler");if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close()}clearTimeout(this.remainingTimer);if(!e){this.putTimestampInStorage(this._getCurrentDate())}this.monitorUserIsInactive();this.attachUserEvents();this.attachVisibilityEvents();u.postMessageToIframeApp("sap.ushell.sessionHandler","extendSessionEvent",{})};this.createSessionExpiredDialog=function(){this.oSessionExpiredDialog=new s("sapUshellSessionTimedOutDialog",{title:e.i18n.getText("sessionExpiredMessage_title"),type:"Message",state:v.Warning,content:new o({text:e.i18n.getText("sessionExpiredMessage_main")}),beginButton:this.createReloadButton(),afterClose:function(){this.oSessionExpiredDialog.destroy()}.bind(this)}).addStyleClass("sapContrastPlus");return this.oSessionExpiredDialog};this.createReloadButton=function(){return new n({text:e.i18n.getText("sessionExpiredMessage_reloadPage_button_title"),press:function(){l.oSessionExpiredDialog.close();location.reload()}})};this.attachUserEvents=function(){jQuery(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));jQuery(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));jQuery(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this));this.oAppLifeCycleService.attachAppLoaded({},this.userActivityHandler,this)};this.detachUserEvents=function(){jQuery(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");jQuery(document).off("keydown.sessionTimeout");jQuery(document).off("touchstart.sessionTimeout");this.oAppLifeCycleService.detachAppLoaded(this.userActivityHandler,this)};this.onVisibilityChange=function(e){if(e.target&&e.target.visibilityState==="visible"){this.monitorUserIsInactive(false)}};this.attachVisibilityEvents=function(){document.addEventListener("visibilitychange",this._fnOnVisibilityChange)};this.detachVisibilityEvents=function(){document.removeEventListener("visibilitychange",this._fnOnVisibilityChange)};this.putTimestampInStorage=function(e){c.debug("SessionHandler.putTimestampInStorage :: Timestamp is "+e,"","SessionHandler");var i=this.getLocalStorage();if(i){i.put("lastActivityTime",e);if(this.bBackendRequestsActive===false){this._setConnectionActive(true)}}};this.getTimestampFromStorage=function(){var e=this.getLocalStorage();if(e){return e.get("lastActivityTime")}return null};this.timeNow=function(){return Math.floor(Date.now()/1e3)};this.timeLastInteraction=function(){return Math.floor(new Date(this.getTimestampFromStorage()).getTime()/1e3)};this.timeOver=function(){return Math.floor(this.timeLastInteraction()+this.oConfig.sessionTimeoutIntervalInMinutes*60)};this.timePopup=function(){return Math.floor(this.timeLastInteraction()+this.oConfig.sessionTimeoutIntervalInMinutes*60-this.oConfig.sessionTimeoutReminderInMinutes*60)};this.userActivityHandler=function(){if(this.oUserActivityTimer!==undefined){return}this.oUserActivityTimer=setTimeout(function(){c.debug("SessionHandler.userActivityHandler :: Timed time stamp update","","SessionHandler");l.putTimestampInStorage(l._getCurrentDate());l.oUserActivityTimer=undefined},1e3)};this._getCurrentDate=function(){return new Date};this.logout=function(){c.debug("SessionHandler.logout :: Logout initiated","","SessionHandler");function i(i){if(S===true){l.detachUserEvents();l.detachVisibilityEvents()}if(l.oUserActivityTimer){clearTimeout(l.oUserActivityTimer)}if(l.remainingTimer){clearTimeout(l.remainingTimer)}if(l.notifyServerTimer){clearTimeout(l.notifyServerTimer)}i.openLoadingScreen();i.showAppInfo(e.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.setDirtyFlag(false);sap.ushell.Container.defaultLogout()}var t=new d({text:""});var s;u.postMessageToIframeApp("sap.ushell.sessionHandler","logout",{},true).then(function(){if(p===false){p=true;window.clearTimeout(s);i(t)}});s=window.setTimeout(function(){p=true;i(t)},4e3)}};return S},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/System", [],function(){"use strict";var t=function(t){this._oData=t};t.prototype.getAlias=function(){return this._oData.alias};t.prototype.getBaseUrl=function(){return this._oData.baseUrl};t.prototype.getClient=function(){return this._oData.client};t.prototype.getClientRole=function(){return this._oData.clientRole};t.prototype.getName=function(){return this._oData.system};t.prototype.getPlatform=function(){return this._oData.platform};t.prototype.getProductVersion=function(){return this._oData.productVersion};t.prototype.getProductName=function(){return this._oData.productName};t.prototype.getSystemName=function(){return this._oData.systemName};t.prototype.getSystemRole=function(){return this._oData.systemRole};t.prototype.getTenantRole=function(){return this._oData.tenantRole};t.prototype.isTrial=function(){return!!this._oData.isTrialSystem};t.prototype.getSysInfoBar=function(){return!!this._oData.sysInfoBar};t.prototype.getSysInfoBarColor=function(){return this._oData.sysInfoBarColor};t.prototype.getSysInfoBarMainText=function(){return this._oData.sysInfoBarMainText};t.prototype.getSysInfoBarSecondaryText=function(){return this._oData.sysInfoBarSecondaryText};t.prototype.getSysInfoBarIcon=function(){return this._oData.sysInfoBarIcon};t.prototype.adjustUrl=function(t){if(t.indexOf("/")!==0||t==="/"){throw new Error("Invalid URL: "+t)}if(this._oData.baseUrl===";o="){if(this._oData.alias){t=t+";o="+this._oData.alias}}else if(this._oData.baseUrl){t=this._oData.baseUrl.replace(/\/$/,"")+t}if(this._oData.client){t+=(t.indexOf("?")>=0?"&":"?")+"sap-client="+this._oData.client}return t};t.prototype.toString=function(){return JSON.stringify(this._oData)};return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/TechnicalParameters", ["sap/ushell/utils/type"],function(e){"use strict";var t={"sap-navigation-scope":{injectFrom:"inboundParameter",sticky:true,stickyName:"sap-navigation-scope-filter",isIntentParameter:true,getValue:function(e,t,r,n){return new Promise(function(s,u){if(n==="UI5"){s(a(e,t))}else{s(i(e,r))}})},bExposeAsAppInfo:false},"sap-fiori-id":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t,r,n){return new Promise(function(u,o){if(n==="UI5"){u(a(e,t)||s("/sap.fiori/registrationIds",t))}else{u(i(e,r))}})},bExposeAsAppInfo:true},"sap-ui-fl-max-layer":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t){return Promise.resolve().then(a.bind(null,e,t))},bExposeAsAppInfo:false},"sap-ui-fl-control-variant-id":{injectFrom:"startupParameter",isIntentParameter:false,getValue:function(e,t){return Promise.resolve().then(a.bind(null,e,t))},bExposeAsAppInfo:false},"sap-ui-fl-version":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t){return Promise.resolve().then(a.bind(null,e,t))},bExposeAsAppInfo:false},"sap-ui-app-id-hint":{injectFrom:"startupParameter",isIntentParameter:true,getValue:n,bExposeAsAppInfo:false},"sap-ach":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t,r,n){return new Promise(function(u,o){if(n==="UI5"){u(a(e,t)||s("/sap.app/ach",t))}else{u(i(e,r))}})},bExposeAsAppInfo:true},"sap-prelaunch-operations":{injectFrom:"inboundParameter",isIntentParameter:true,getValue:n,bExposeAsAppInfo:false},"sap-app-origin-hint":{injectFrom:"startupParameter",isIntentParameter:false,getValue:n,bExposeAsAppInfo:false},"sap-app-origin":{injectFrom:"startupParameter",isIntentParameter:false,getValue:n,bExposeAsAppInfo:false}};function r(e,t,r){return new Promise(function(n){var a=o({bExposeAsAppInfo:true}).map(function(e){return e.name});var s=Object.values(a).map(function(n){return u(n,e,t,r)});var i={};Promise.allSettled(s).then(function(e){Object.keys(a).forEach(function(t,r){if(e[r].status==="fulfilled"){i[a[t]]=e[r]}});n(i)})})}function n(e){return Promise.reject(e+" is reserved for shell internal usage only")}function a(e,t){var r=t.getComponentData()||{};var n=r.technicalParameters||{};return n[e]}function s(t,r){var n=r.getManifestEntry(t);if(n&&!e.isArray(n)){n=[n]}return n}function i(e,t){var r=t.getReservedParameters();return r&&r[e]}function u(e,r,n,a){if(!t[e]){return Promise.reject(e+" is not a known technical parameter")}return t[e].getValue(e,r,n,a)}function o(e){if(!e){e={}}return Object.keys(t).filter(function(r){var n=t[r];return Object.keys(e).every(function(t){var r=e[t];var a=n.hasOwnProperty(t);if(a){return n[t]===r}return false})}).map(function(e){return Object.keys(t[e]).reduce(function(r,n){r[n]=t[e][n];return r},{name:e})})}function p(){return Object.keys(t)}function f(e){return t.hasOwnProperty(e)}function c(e,t,r,n){if(n==="UI5"){return a(e,t)}return i(e,r)}return{getParameterValue:u,getParameterValueSync:c,getParameters:o,getParameterNames:p,isTechnicalParameter:f,getTechnicalParametersAppInfo:r}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/UI5ComponentType", [],function(){"use strict";return{Application:"Application",Plugin:"Plugin",Visualization:"Visualization"}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/UIActions", ["sap/ui/core/Core","sap/ui/thirdparty/jquery"],function(e,jQuery){"use strict";function t(){var e=document.activeElement?document.activeElement.tagName:"";return e==="INPUT"||e==="TEXTAREA"}var l=function(l){if(!l||!l.rootSelector||!l.containerSelector||!l.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.")}this.captureStart=null;this.captureMove=null;this.captureEnd=null;this.clickCallback=null;this.clickEvent=null;this.clickHandler=null;this.clone=null;this.cloneClass=null;this.container=null;this.contextMenuEvent=null;this.debug=null;this.defaultMouseMoveEvent=null;this.deltaTop=0;this.disabledDraggableSelector=null;this.dragAndScrollCallback=null;this.dragAndScrollDuration=null;this.dragAndScrollTimer=null;this.draggable=null;this.placeHolderClass=null;this.draggableSelector=null;this.draggableSelectorExclude=null;this.doubleTapCallback=null;this.doubleTapDelay=null;this.element=null;this.endDragAndScrollCallback=null;this.endX=null;this.endY=null;this.isLayoutEngine=null;this.isTouch=null;this.isCombi=null;this.lastElement=null;this.lastTapTime=null;this.lockMode=null;this.log=null;this.mode=null;this.mouseDownEvent=null;this.mouseMoveEvent=null;this.mouseUpEvent=null;this.moveTolerance=null;this.moveX=null;this.moveY=null;this.noop=null;this.onDragStartUIHandler=null;this.onDragEndUIHandler=null;this.preventClickFlag=null;this.preventClickTimeoutId=null;this.scrollContainer=null;this.scrollContainerSelector=null;this.scrollEvent=null;this.scrollTimer=null;this.startX=null;this.startY=null;this.switchModeDelay=null;this.tapsNumber=null;this.timer=null;this.scrollHandler=null;this.touchCancelEvent=null;this.dragCallback=null;this.onBeforeCreateClone=null;this.endCallback=null;this.touchEndEvent=null;this.touchMoveEvent=null;this.startCallback=null;this.touchStartEvent=null;this.wrapper=null;this.wrapperRect=null;this.scrollCallback=null;this.draggableElement=null;this.offsetLeft=0;this.elementsToCapture=null;this.init=function(e){this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.noop=function(){};this.isLayoutEngine=e.isLayoutEngine||false;if(this.isLayoutEngine){this.moveDraggable=this.noop}this.isTouch=e.isTouch?!!e.isTouch:false;this.isCombi=e.isCombi?!!e.isCombi:false;this.container=document.querySelector(e.containerSelector);this.scrollContainerSelector=e.scrollContainerSelector||e.containerSelector;this.switchModeDelay=e.switchModeDelay||1500;this.dragAndScrollDuration=e.dragAndScrollDuration||160;this.moveTolerance=e.moveTolerance===0?0:e.moveTolerance||16;this.draggableSelector=e.draggableSelector;this.draggableSelectorBlocker=e.draggableSelectorBlocker||e.rootSelector;this.draggableSelectorExclude=e.draggableSelectorExclude;this.mode="normal";this.debug=e.debug||false;this.root=document.querySelector(e.rootSelector)||document.querySelector("#canvas");this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.lockMode=false;this.placeHolderClass=e.placeHolderClass||"";this.cloneClass=e.cloneClass||"";this.deltaTop=e.deltaTop||0;this.wrapper=e.wrapperSelector?document.querySelector(e.wrapperSelector):this.container.parentNode;this.clickCallback=typeof e.clickCallback==="function"?e.clickCallback:this.noop;this.startCallback=typeof e.startCallback==="function"?e.startCallback:this.noop;this.doubleTapCallback=typeof e.doubleTapCallback==="function"?e.doubleTapCallback:this.noop;this.endCallback=typeof e.endCallback==="function"?e.endCallback:this.noop;this.dragCallback=typeof e.dragCallback==="function"?e.dragCallback:this.noop;this.onBeforeCreateClone=typeof e.onBeforeCreateClone==="function"?e.onBeforeCreateClone:this.noop;this.dragAndScrollCallback=typeof e.dragAndScrollCallback==="function"?e.dragAndScrollCallback:this.noop;this.endDragAndScrollCallback=typeof e.endDragAndScrollCallback==="function"?e.endDragAndScrollCallback:this.noop;this.scrollCallback=typeof e.scrollCallback==="function"?e.scrollCallback:this.noop;this.doubleTapDelay=e.doubleTapDelay||500;this.wrapperRect=this.wrapper.getBoundingClientRect();this.scrollEvent="scroll";this.touchStartEvent="touchstart";this.touchMoveEvent="touchmove";this.touchEndEvent="touchend";this.mouseDownEvent="mousedown";this.mouseMoveEvent="mousemove";this.mouseUpEvent="mouseup";this.contextMenuEvent="contextmenu";this.touchCancelEvent="touchcancel";this.defaultMouseMoveEvent="mousemove";this.clickEvent="click";this.isVerticalDragOnly=e.isVerticalDragOnly||false;this.draggableElement=e.draggableElement;this.offsetLeft=e.offsetLeft;this.elementsToCapture=e.elementToCapture?jQuery(e.elementToCapture):this.root;this.disabledDraggableSelector=e.disabledDraggableSelector;this.onDragStartUIHandler=typeof e.onDragStartUIHandler==="function"?e.onDragStartUIHandler:this.noop;this.onDragEndUIHandler=typeof e.onDragEndUIHandler==="function"?e.onDragEndUIHandler:this.noop;this.defaultMouseMoveHandler=e.defaultMouseMoveHandler||this.noop};this.forEach=function(e,t){return Array.prototype.forEach.call(e,t)};this.indexOf=function(e,t){return Array.prototype.indexOf.call(e,t)};this.insertBefore=function(e,t,l){var i,s,n;n=Array.prototype.splice;i=this.indexOf(e,t);s=this.indexOf(e,l);n.call(e,s-(i<s?1:0),0,n.call(e,i,1)[0])};this.logToConsole=function(){window.console.log.apply(console,arguments)};this.getDraggableElement=function(e){var t,l=false,i=false;this.draggable=jQuery(this.draggableSelector,this.container);while(typeof t==="undefined"&&e!==this.root&&!jQuery(e).is(this.draggableSelectorBlocker)){l=l||jQuery(e).is(this.draggableElement)||this.draggableElement===undefined;if(!(jQuery(e).not(this.draggableSelectorExclude).length>0)){i=true}if(!i&&l&&this.indexOf(this.draggable,e)>=0){t=e}e=e.parentNode}return t};this.captureStart=function(e){var t;if(e.type==="touchstart"&&e.touches.length===1){t=e.touches[0]}else if(e.type==="mousedown"){t=e;if(e.which!==1){return}}if(t){this.element=this.getDraggableElement(t.target);this.startX=this.moveX=t.pageX;this.startY=this.moveY=t.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.lastTapTime&&this.lastElement&&this.element&&this.lastElement===this.element&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element}this.log("captureStart("+this.startX+", "+this.startY+")")}};this.startHandler=function(e){this.log("startHandler");if(this.isCombi&&!(e instanceof MouseEvent)){this.isTouchEvent=true}clearTimeout(this.timer);delete this.timer;this.captureStart(e);if(this.element){this.startCallback(e,this.element);if(this.lockMode===false){if(this.tapsNumber===2){this.mode="double-tap";return}if(this.isTouch||this.isTouchEvent){this.timer=setTimeout(function(){if(!jQuery(this.element).hasClass(this.disabledDraggableSelector)){this.log("mode switched to drag");this.mode="drag";this.onBeforeCreateClone(e,this.element);this.createClone();this.dragCallback(e,this.element)}else{this.onDragStartUIHandler()}this.isTouchEvent=false}.bind(this),this.switchModeDelay)}}}}.bind(this);this.captureMove=function(e){var t;if(e.type==="touchmove"&&e.touches.length===1){t=e.touches[0]}else if(e.type==="mousemove"){t=e}if(t){this.moveX=t.pageX;this.moveY=t.pageY;this.log("captureMove("+this.moveX+", "+this.moveY+")")}};this.moveHandler=function(e){if(t()){return}var l;this.log("moveHandler");this.captureMove(e);if(this.element&&e.type==="mousemove"&&e.buttons===0){return this.endHandler(e)}switch(this.mode){case"normal":if(Math.abs(this.startX-this.moveX)>this.moveTolerance||Math.abs(this.startY-this.moveY)>this.moveTolerance){if(this.isTouch||this.isTouchEvent){this.log("-> normal");clearTimeout(this.timer);delete this.timer}else if(this.element){this.onDragStartUIHandler();if(!jQuery(this.element).hasClass(this.disabledDraggableSelector)){this.log("mode switched to drag");this.mode="drag";this.onBeforeCreateClone(e,this.element);this.createClone()}else{this.preventClick();this.element=null}}}break;case"drag":e.preventDefault();this.onDragStartUIHandler();this.log("-> drag");if(this.isVerticalDragOnly){this.mode="vertical-drag"}else{this.mode="drag-and-scroll"}window.addEventListener(this.mouseUpEvent,this.endHandler,true);this.translateClone();this.scrollContainer=document.querySelector(this.scrollContainerSelector);this.dragAndScroll();if(!this.isTouch){this.dragCallback(e,this.element)}break;case"drag-and-scroll":e.stopPropagation();e.preventDefault();this.log("-> drag-and-scroll");l=this.dragAndScroll();this.translateClone();if(!l){this.moveDraggable()}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:l,moveX:this.moveX,moveY:this.moveY});break;case"vertical-drag":e.stopPropagation();e.preventDefault();l=this.dragAndScroll();this.translateClone();if(!l){this.moveDraggableVerticalOnly(this.moveX,this.moveY)}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:l,moveX:this.moveX,moveY:this.moveY});break;default:break}}.bind(this);this.captureEnd=function(e){var t;if((e.type==="touchend"||e.type==="touchcancel")&&e.changedTouches.length===1){t=e.changedTouches[0]}else if(e.type==="mouseup"){t=e}if(t){this.endX=t.pageX;this.endY=t.pageY;this.log("captureEnd("+this.endX+", "+this.endY+")")}};this.contextMenuHandler=function(e){if(this.isTouch){e.preventDefault()}}.bind(this);this.clickHandler=function(e){if(this.preventClickFlag){this.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(this.preventClickTimeoutId)}this.clickCallback()}.bind(this);this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){this.preventClickFlag=false}.bind(this),100)};this.endCallbackAdapter=function(e,t,l){var i=this.endCallback.apply(null,arguments);jQuery.when(i).then(function(){this.removeClone(t,l.clone);this.onDragEndUIHandler(e)}.bind(this));this.preventClick()};this.endHandler=function(e){this.log("endHandler");this.captureEnd(e);switch(this.mode){case"normal":this.onDragEndUIHandler(e);this.log("-> normal");break;case"drag":this.log("-> drag");this.endCallbackAdapter(e,this.element,{clone:this.clone});break;case"drag-and-scroll":this.log("-> drag-and-scroll");window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.endCallbackAdapter(e,this.element,{deltaX:this.moveX-this.startX,deltaY:this.moveY-this.startY,clone:this.clone});e.stopPropagation();e.preventDefault();break;case"vertical-drag":this.log("-> vertical-drag");window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.endCallbackAdapter(e,this.element,{clone:this.clone});e.stopPropagation();e.preventDefault();break;case"double-tap":this.log("-> double-tap");this.doubleTapCallback(e,this.element);break;default:break}clearTimeout(this.timer);delete this.timer;this.lastMoveX=0;this.lastMoveY=0;this.element=null;this.clone=null;this.mode="normal"}.bind(this);this.scrollHandler=function(){clearTimeout(this.scrollTimer);this.lockMode=true;this.scrollTimer=setTimeout(function(){this.lockMode=false}.bind(this),500)}.bind(this);this.createClone=function(){var t,l;this.preventClickFlag=true;if(e.byId(this.element.id)&&e.byId(this.element.id).getBoundingRects){l=e.byId(this.element.id).getBoundingRects()[0];l.top=l.offset.y;l.left=l.offset.x;l.width+=5}else{l=this.element.getBoundingClientRect()}this.clone=this.element.cloneNode(true);this.clone.removeAttribute("id");this.clone.removeAttribute("data-sap-ui");this.clone.className+=" "+this.cloneClass;this.element.className+=" "+this.placeHolderClass;t=this.clone.style;t.position="fixed";t.display="block";t.top=l.top+this.deltaTop+"px";t.left=l.left+"px";t.width=l.width+"px";t.zIndex="100";this.root.appendChild(this.clone);this.log("createClone")};this.removeClone=function(e,t){this.preventClick();e.className=e.className.split(" "+this.placeHolderClass).join(" ");t.parentElement.removeChild(t);this.log("removeClone")};this.translateClone=function(){var e,t;e=this.moveX-this.startX;t=this.moveY-this.startY;this.clone.style.webkitTransform="translate3d("+e+"px, "+t+"px, 0px)";this.clone.style.mozTransform="translate3d("+e+"px, "+t+"px, 0px)";this.clone.style.msTransform="translate("+e+"px, "+t+"px)";this.clone.style.transform="translate3d("+e+"px, "+t+"px, 0px)";this.log("translateClone ("+e+", "+t+")")};this.dragAndScroll=function(){var e,t,l=this;function i(){var e,t;if(l.clone){e=l.clone.getBoundingClientRect();t=l.wrapperRect.top-e.top;if(t>0){return t}t=l.wrapper.offsetTop+l.wrapper.offsetHeight-(e.top+l.clone.offsetHeight);if(t<0){return t}}return 0}function s(){if(l.endDragAndScrollCallback(l.moveY)){return false}if(e<0){return l.wrapper.getBoundingClientRect().top-(l.container.getBoundingClientRect().top+l.container.offsetHeight)+l.wrapper.offsetHeight<0}return l.container.getBoundingClientRect().top-(l.wrapper.getBoundingClientRect().top+l.container.offsetTop)<0}function n(){l.dragAndScrollTimer=setTimeout(function(){l.wrapper.scrollTop-=e;l.dragAndScrollTimer=undefined;if((e=i())!==0&&s()){n()}l.scrollCallback()},t)}e=i();if(e!==0&&!this.dragAndScrollTimer&&s()){t=this.dragAndScrollDuration;this.scrollContainer=this.scrollContainer||document.querySelector(this.scrollContainerSelector);n()}this.log("dragAndScroll ("+e+")");return e!=0&&s()};this.moveDraggableVerticalOnly=function(){var e,t,l,i=true;this.forEach(this.draggable,function(s,n){if(!e){l=s.getBoundingClientRect();t=!(l.bottom<this.moveY||l.top>this.moveY);if(t){e=s;if(l.top+l.height/2<this.moveY){i=false}}}}.bind(this));if(e&&this.element!==e){if(i){this.insertBefore(this.draggable,this.element,e);e.parentNode.insertBefore(this.element,e)}else{this.insertBefore(this.draggable,this.element,e.nextSibling);e.parentNode.insertBefore(this.element,e.nextSibling)}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY}this.log("moveDraggableVerticalOnly")};this.moveDraggable=function(e,t){var l,i,s,n,o,a;this.forEach(this.draggable,function(e,t){if(!i){a=e.getBoundingClientRect();n=!(a.right<this.moveX||a.left>this.moveX);o=!(a.bottom<this.moveY||a.top>this.moveY);if(n&&o){i=e;s=t}}}.bind(this));if(i&&this.element!==i){l=this.indexOf(this.draggable,this.element);if(Math.abs(this.lastMoveX-this.moveX)>=this.moveTolerance||Math.abs(this.lastMoveY-this.moveY)>=this.moveTolerance){if(s<=l){i.parentNode.insertBefore(this.element,i);this.insertBefore(this.draggable,this.element,i)}else if(s>l){i.parentNode.insertBefore(this.element,i.nextSibling);this.insertBefore(this.draggable,this.element,this.draggable[s+1])}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY}}this.log("moveDraggable")};this.enable=function(){this.log("enable");this.root.addEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.addEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.root.addEventListener(this.defaultMouseMoveEvent,this.defaultMouseMoveHandler,true);this.wrapper.addEventListener(this.scrollEvent,this.scrollHandler,false);if(this.elementsToCapture.length){var e=this;this.elementsToCapture.each(function(){this.addEventListener(e.touchStartEvent,e.startHandler,false);this.addEventListener(e.touchEndEvent,e.endHandler,false);this.addEventListener(e.touchCancelEvent,e.endHandler,false);this.addEventListener(e.mouseDownEvent,e.startHandler,false);this.addEventListener(e.mouseUpEvent,e.endHandler,false)})}else{this.elementsToCapture.addEventListener(this.touchStartEvent,this.startHandler,false);this.elementsToCapture.addEventListener(this.touchEndEvent,this.endHandler,false);this.elementsToCapture.addEventListener(this.touchCancelEvent,this.endHandler,false);this.elementsToCapture.addEventListener(this.mouseDownEvent,this.startHandler,false);this.elementsToCapture.addEventListener(this.mouseUpEvent,this.endHandler,false)}return this};this.delete=function(){this.log("delete");this.disable();this.dragCallback=null;this.onBeforeCreateClone=null;this.endCallback=null;this.startCallback=null;this.scrollCallback=null;this.doubleTapCallback=null;this.clickCallback=null;this.dragAndScrollCallback=null;delete this};this.disable=function(){this.log("disable");if(this.elementsToCapture.length){var e=this;this.elementsToCapture.each(function(){this.removeEventListener(e.touchStartEvent,e.startHandler,false);this.removeEventListener(e.touchEndEvent,e.endHandler,false);this.removeEventListener(e.touchCancelEvent,e.endHandler,false);this.removeEventListener(e.mouseDownEvent,e.startHandler,false);this.removeEventListener(e.mouseUpEvent,e.endHandler,false)})}else{this.elementsToCapture.removeEventListener(this.touchStartEvent,this.startHandler,false);this.elementsToCapture.removeEventListener(this.touchEndEvent,this.endHandler,false);this.elementsToCapture.removeEventListener(this.touchCancelEvent,this.endHandler,false);this.elementsToCapture.removeEventListener(this.mouseDownEvent,this.startHandler,false);this.elementsToCapture.removeEventListener(this.mouseUpEvent,this.endHandler,false)}this.root.removeEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.defaultMouseMoveEvent,this.defaultMouseMoveHandler,true);this.wrapper.removeEventListener(this.scrollEvent,this.scrollHandler,false);return this};this.init(l);this.getMove=function(){return{x:this.moveX,y:this.moveY}}};return l},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/URLTemplateProcessor", ["sap/base/Log","sap/ui/thirdparty/URI","sap/ui/thirdparty/URITemplate","sap/ushell/_URLTemplateProcessor/DefinitionParameterSetBuilder","sap/ushell/_URLTemplateProcessor/DependencyGraph","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/TemplateParameterParser","sap/ushell/_URLTemplateProcessor/utils"],function(e,r,t,a,n,o,s,i){"use strict";function p(r){e.debug(r,"sap.ushell.URLTemplateProcessor")}function l(e){if(typeof e==="undefined"){return"<undefined>"}if(typeof e==="string"){if(e===""){return"<empty string>"}return"'"+e+"'"}if(typeof e==="number"){return"(number) "+e}if(typeof e==="boolean"){return"(bool) "+e}var r;if(typeof e==="object"){r=JSON.stringify(e);if(r.length>255){r=r.substr(0,255)+"..."}}else{r="{other type}"}return r}function u(e){var r=Object.keys(e).filter(function(r){return typeof e[r]==="object"&&e[r].hasOwnProperty("renameTo")});var t=[];r.forEach(function(r){var a=e[r];if(a.hasOwnProperty("renameTo")){t.push(function(e,t){var n=t;n=t.replace(new RegExp(r+"=","g"),a.renameTo+"=");return n})}});return t}function f(e,r,t,a,n){var o=c(e,r,t,a,n);return m(e,o)}function c(e,r,t,u,f){p("[TEMPLATE EXPANSION] "+e.urlTemplate);var c=a.buildDefinitionParameterSet(e.parameters,r,f)||{};var m=i.removeArrayParameterNotation(t[f]||{});var d=s.parseTemplateParameterSet(c,f);var v=s.parseTemplateParameterSetAsLiterals(m);var y=i.mergeObject(v,d);p("- parsed template parameters: "+JSON.stringify(y,null,3));var P=n.buildDependencyGraph(y);p("- created dependency graph: "+JSON.stringify(P,null,3));var h=n.getDependencyResolutionOrder(P);p("- resolving in order: "+h.join(" > "));var T=o.resolveAllParameters(y,h,r,t,u,f);Object.keys(T).forEach(function(e){var r=T[e];p(e+" --\x3e "+l(r))});return{oDefinitionParamsSet:c,oResolvedParameters:T}}function m(e,t){var a=u(t.oDefinitionParamsSet||{});var n=e.urlTemplate;var o=r.expand(n,t.oResolvedParameters).toString();p("- created URL: "+o);a.forEach(function(e){o=e(n,o)});if(a.length>0){p("- created URL (post expansion): "+o)}return o}return{prepareExpandData:c,expand:f}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Ui5NativeServiceFactory", ["sap/ui/core/service/ServiceFactory"],function(e){"use strict";var r={_servicePromises:{},createServiceFactory:function(r){var i=this._servicePromises;var c=e.extend("sap.ushell.ui5Service."+r+"Factory",{createInstance:function(){var e=i[r];if(!e){e=new Promise(function(e,i){sap.ui.require(["sap/ushell/ui5service/"+r],function(r){var c;if(!r){i()}c=new r;e(c)})});i[r]=e}return e}});return new c}};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Ui5ServiceFactory", ["sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","sap/base/Log","sap/base/util/ObjectPath","sap/base/util/isPlainObject"],function(e,t,n,r,c){"use strict";var i;function o(e){i=e}function u(){return i}function a(e){return!!/^[^_].+/.test(e)}function s(e){var t,n=[];for(t in e){n.push(t)}return n}function f(e,t,r){var c=t[r];t[r]=function(){var i,o,a=u();if(!e||e.scopeObject.getId()!==a){n.warning("Call to "+r+" is not allowed","This may be caused by an app component other than the active '"+a+"' that tries to call the method","sap.ushell.Ui5ServiceFactory");return undefined}o=new Array(arguments.length);for(i=0;i<o.length;++i){o[i]=arguments[i]}return c.apply(t,o)}}function p(e,t,n,r){s(e).filter(a).filter(function(n){var r=e[n];t[n]=r;return typeof r==="function"}).forEach(function(c){t[c]=t[c].bind(e);if(r){f(n,t,c)}})}function l(e){var t;if(typeof e==="undefined"){return true}if(!c(e)){return false}if(!e.scopeType){return false}t=r.get("scopeObject.getId",e);if(typeof t!=="function"){return false}return true}function v(e,t,n){var r={};if(n){n=typeof e==="object"}p(t,r,e,n);if(n&&e.scopeType==="component"&&e.scopeObject&&e.scopeObject.getId){o(e.scopeObject.getId())}return r}function h(e){return sap.ushell.Container.getServiceAsync(e)}function y(r,c){var i=e.extend("sap.ushell.ui5service."+r+"Factory",{createInstance:function(e){return new Promise(function(i,o){h(r).then(function(u){var a,s,f;if(!l(e)){n.error("Invalid context for "+r+" service interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.Ui5ServiceFactory");o("Invalid Context for "+r+" service");return}s=v(e,u,c);f=t.extend("sap.ushell.ui5service."+r,{getInterface:function(){return s}});a=new f(e);i(a)},function(e){o(e)})})}});return new i}return{createServiceFactory:y}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/User", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/base/EventProvider","sap/ui/core/Configuration","sap/ui/core/Core","sap/ui/core/LocaleData","sap/ui/thirdparty/URI"],function(e,t,n,i,o,r,a){"use strict";function s(e){if(e===undefined){return undefined}return t({},e)}function h(e){var t;if(e.host&&typeof e.host==="function"&&e.host()){t=e.host();if(typeof e.protocol==="function"&&e.protocol()){t=e.protocol()+"://"+t}return t}return""}function m(e){return e.indexOf("sap_")===0}var u=function(s){var c=[],g,p,l,f,d=new n;this.getEmail=function(){return s.email};this.getFirstName=function(){return s.firstName};this.getFullName=function(){return s.fullName};this.getTimeZone=function(){return s.timeZone};this.getInitials=function(){var e=s.fullName||"",t="",n=true;for(var i=0,o=e.length;i<o;++i){if(e[i]===" "){n=true}else if(n){n=false;t+=e[i]}}return t};this.getId=function(){return s.id};this.getLanguage=function(){return s.language};this.getLanguageBcp47=function(){return s.languageBcp47};this.getLanguageText=function(){var e=i.getLocale(),t=new r(e),n=i.getLanguageTag();n=n.replace("-","_");var o=t.getLanguages(),a=o[n]||this.getLanguage().toUpperCase();return a};this.getLastName=function(){return s.lastName};this.getImage=function(){return s.image};this.setImage=function(e){s.image=e;d.fireEvent("onSetImage",e)};this.attachOnSetImage=function(e,t){d.attachEvent("onSetImage",e,t)};this.isJamActive=function(){return s.isJamActive===true};this.isLanguagePersonalized=function(){return s.isLanguagePersonalized===true};this.getTheme=function(e){if(e===u.prototype.constants.themeFormat.ORIGINAL_THEME){return f.originalTheme.theme}if(e===u.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return l.theme+(l.locationPath?"@"+l.locationOrigin+l.locationPath:"")}if(e===u.prototype.constants.themeFormat.NWBC){if(m(l.theme)){return l.theme}return this.getTheme(u.prototype.constants.themeFormat.THEME_NAME_PLUS_URL)}return l.theme};this.getThemeRoot=function(e){if(s.ranges&&s.ranges.theme&&s.ranges.theme[e]&&s.ranges.theme[e].themeRoot){return s.ranges.theme[e].themeRoot}return""};this.setTheme=function(t){if(this.isSetThemePermitted()===false){var n="setTheme not permitted";e.error(n);throw new Error(n)}l=this._amendTheme({theme:t,root:this.getThemeRoot(t)},p);if(t!==f.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},f.originalTheme.theme,t);f=l}this.applyTheme(t)};this.applyTheme=function(e){var t=this;var n=this._amendTheme({theme:e,root:this.getThemeRoot(e)},p),i;l=n;if(n.suppliedRoot){o.applyTheme(n.theme,n.suppliedRoot+"/UI5/")}else if(n.path){o.applyTheme(n.theme,n.path+"/UI5/")}else{o.applyTheme(n.theme)}sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(e){i=t.getTheme(u.prototype.constants.themeFormat.NWBC);e.postMessageToIframeApp("sap.ushell.appRuntime","themeChange",{currentThemeId:i,themeServiceRoute:window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1"})})};this.setLanguage=function(e){if(e){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},s.language,e);s.language=e}};this.getAccessibilityMode=function(){return s.accessibility};this.setAccessibilityMode=function(t){if(this.isSetAccessibilityPermitted()===false){var n="setAccessibilityMode not permitted";e.error(n);throw new Error(n)}s.accessibility=t};this.isAdminUser=function(){return s.isAdminUser===true};this.isSetAccessibilityPermitted=function(){return s.setAccessibilityPermitted};this.isSetThemePermitted=function(){return s.setThemePermitted};this.getContentDensity=function(){return s.contentDensity};this.setContentDensity=function(t){if(this.isSetContentDensityPermitted()===false){var n="setContentDensity not permitted";e.error(n);throw new Error(n)}e.debug("[000] setContentDensity",t,"User");this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},s.contentDensity,t);s.contentDensity=t};this.isSetContentDensityPermitted=function(){return s.setContentDensityPermitted};this.getChangedProperties=function(){e.debug("[000] user: getChangedProperties: aChangedProperties",JSON.stringify(c),"User");return t([],c)};this.setChangedProperties=function(t,n,i){e.debug("[000] setChangedProperties",[t.name,n,i],"User");c.push({propertyName:t.propertyName,name:t.name,oldValue:n,newValue:i})};this.resetChangedProperties=function(){e.debug("[000] resetChangedProperties","User");c=[]};this.resetChangedProperty=function(t){e.debug("[000] resetChangedProperty: sPropertyName:",t,"User");c=c.filter(function(e){return!(t===e.propertyName)})};this.getTrackUsageAnalytics=function(){return s.trackUsageAnalytics};this.setTrackUsageAnalytics=function(e){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},s.trackUsageAnalytics,e);s.trackUsageAnalytics=e};this.setImageConsent=function(e){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},s.isImageConsent,e);s.isImageConsent=e};this.getImageConsent=function(){return s.isImageConsent};this.getImportBookmarksFlag=function(){return s.importBookmarks||null};this.setImportBookmarksFlag=function(e){this.setChangedProperties({propertyName:"importBookmarks",name:"MYHOME_IMPORT_FROM_CLASSIC"},this.getImportBookmarksFlag()||"",e);s.importBookmarks=e};this.getShowMyHome=function(){return s.showMyHome!==false};this.setShowMyHome=function(e){e=!!e;this.setChangedProperties({propertyName:"showMyHome",name:"MYHOME_ENABLEMENT"},s.showMyHome,e);s.showMyHome=e};this.getDetectDarkMode=function(){return s.detectDarkMode!==false};this.setDetectDarkMode=function(e){e=!!e;this.setChangedProperties({propertyName:"detectDarkMode",name:"THEME_DARKMODE_AUTO_DETECTION"},s.detectDarkMode,e);s.detectDarkMode=e};p={locationPathUi5:new a(sap.ui.require.toUrl("")).absoluteTo(document.location).pathname(),locationPathCustom:s.themeRoot||"",locationOrigin:h(new a(document.location))};if(!p.locationPathUi5){e.warning("User: Could not set UI5 location path")}if(!p.locationPathCustom){e.warning("User: Could not set location path for custom themes")}if(!p.locationOrigin){e.warning("User: Could not set front-end server location origin")}g=s.bootTheme||{theme:"",root:""};l=this._amendTheme(g,p);f=l};u.prototype._amendTheme=function(e,t){if(!e||!e.theme||!t){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""}}function n(e,t){var n=new a(e);var i=h(n);return{locationOrigin:i||t.locationOrigin,locationPath:i?n.path():e}}var i={originalTheme:s(e)};var o;if(i.originalTheme.theme.indexOf("@")>0){var r=i.originalTheme.theme.split("@",2);i.theme=r[0];i.suppliedRoot=r[1];o=n(r[1],t);i.locationPath=o.locationPath;i.path=i.locationPath;i.locationOrigin=o.locationOrigin;return i}i.theme=i.originalTheme.theme;if(i.originalTheme.root){i.suppliedRoot=i.originalTheme.root;o=n(i.originalTheme.root,t);i.locationPath=o.locationPath;i.path=i.locationPath;i.locationOrigin=o.locationOrigin;return i}i.suppliedRoot="";if(m(i.theme)){i.locationOrigin=t.locationOrigin;i.locationPath=t.locationPathUi5;i.path="";return i}i.locationOrigin=t.locationOrigin;i.locationPath=t.locationPathCustom;i.path=i.locationPath;return i};u.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"}};return u},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/UserActivityLog", ["sap/base/Log","sap/base/util/extend","sap/ui/core/Core","sap/ui/thirdparty/hasher","sap/ushell/EventHub","sap/ushell/ui/launchpad/Tile","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,a,i,s,n,o,r){"use strict";var u=function(){};u.prototype={_maxLoggedMessages:50,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroupAt","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","movetile","externalSearch","addBookmarkTile"],_observedGeneralActions:["openApp"],_observedEventHubEvents:["showCatalog"],_aDoables:[],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(){if(this._isActive){return}this._isActive=true;var t=a.getEventBus();this._observedLaunchpadActions.forEach(function(e){t.subscribe("launchpad",e,this._handleAction,this)}.bind(this));t.subscribe("sap.ushell","appOpened",this._handleAction,this);this._observedGeneralActions.forEach(function(e){t.subscribe(e,this._handleAction,this)}.bind(this));this._observedEventHubEvents.forEach(function(e){this._aDoables.push(s.on(e).do(this._handleActionEventHub.bind(this)))}.bind(this));e.addLogListener(this);this._tileOntapOrigFunc=n.prototype.ontap;n.prototype.ontap=this._tileOnTapDecorator(this._tileOntapOrigFunc)},deactivate:function(){if(!this._isActive){return}this._isActive=false;var t=a.getEventBus();this._observedLaunchpadActions.forEach(function(e,a,i){t.unsubscribe("launchpad",e,this._handleAction,this)}.bind(this));t.unsubscribe("sap.ushell","appOpened",this._handleAction,this);this._observedGeneralActions.forEach(function(e,a,i){t.unsubscribe(e,this._handleAction,this)}.bind(this));this._aDoables.forEach(function(e){e.off()});this._aDoables=[];e.removeLogListener(this);n.prototype.ontap=this._tileOntapOrigFunc},addMessage:function(e,t,a){if(this._isActive){this._addMessageInternal(e,t,a)}},getLog:function(){return this._getLoggingQueueFromStorage()},getMessageInfo:function(){return{userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog(),formFactor:o.getFormFactor()}},getMessageInfoAsString:function(e){return JSON.stringify(this.getMessageInfo(e))},onLogEntry:function(e){if(e.level<=2){var t=e.message;if(typeof e.details!=="undefined"&&e.details!==""){t=t+", "+e.details}this.addMessage(this.messageType.ERROR,t)}},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(e){var t=this;return function(){if(this.isA("sap.ushell.ui.launchpad.PlusTile")){t.addMessage(t.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId())}else if(this.isA("sap.ushell.ui.launchpad.Tile")){var s=i.getHash();if(s){var n=r.parseShellHash(s);s="#"+r.constructShellHash({target:{semanticObject:n.semanticObject,action:n.action}})}var o=t._getLastNavActionFromStorage();o.time=new Date;o.navigationHash=s;o.tileDebugInfo=this.getDebugInfo();var u=a.byId(this.getId());var l=u.getModel();var g=this.getBindingContext();var h=g.getPath();o.tileTitle=g.getModel().getProperty(h).title;t._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(o));t.addMessage(t.messageType.ACTION,"Click on Tile: "+l.getData().title+" Tile debugInfo: "+this.getDebugInfo())}e.apply(this,arguments)}},_addMessageInternal:function(e,a,i){var s=this._getLoggingQueueFromStorage();var n={type:null};for(var o in this.messageType){if(e===this.messageType[o]){n.type=o;break}}if(n.type===null){return}t(n,{messageID:i,messageText:a,time:new Date,toString:function(){var e=[this.type,this.time];if(typeof this.messageID!=="undefined"){e.push(this.messageID)}e.push(this.messageText);return e.join(" :: ")}});s.push(n);if(s.length>this._maxLoggedMessages){s.shift()}this._putInSessionStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(s))},_handleActionEventHub:function(e){this._handleAction("",e.sId,e.oData)},_handleAction:function(e,t,a){var i;switch(t){case"deleteTile":i="Delete Tile "+(a.tileId||"");break;case"moveTile":i="Move Tile "+(a.sTileId||"")+" to Group "+(a.toGroupId||"");break;case"createGroupAt":i="Create Group";break;case"changeGroupTitle":i="Change Group Title of "+(a.groupId||"")+" to "+(a.newTitle||"");break;case"deleteGroup":i="Delete Group "+(a.groupId||"");break;case"addTile":var s=a.catalogTileContext.oModel;var n=a.catalogTileContext.sPath;var o=s.getProperty(n);var r=o&&o.id||"";var u=a.groupContext.getObject();var l=u&&u.id||"";i="Add Tile "+r+" to Group "+l;break;case"moveGroup":i="Move Group from index "+(a.fromIndex||"")+" to index "+(a.toIndex||"");break;case"appOpened":i="Open application "+a.action;var g=this._getLastNavActionFromStorage();g.applicationInformation={};["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(e){g.applicationInformation[e]=a[e]});if(!this._hashSegmentsEqual(g.navigationHash,a.sShellHash)){g.tileDebugInfo=""}g.navigationHash=a.sShellHash;this._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(g));break;case"addBookmarkTile":i="Add Bookmark "+(a.title||"")+" "+(a.subtitle||"")+" for URL: "+(a.url||"");break;case"showCatalog":i="Show Catalog";break;default:break}this.addMessage(this.messageType.ACTION,i)},_getUserDetails:function(){var e=sap.ushell.Container.getUser();return{fullName:e.getFullName()||"",userId:e.getId()||"",eMail:e.getEmail()||"",Language:e.getLanguage()||""}},_getShellState:function(){var e=a.byId("viewPortContainer");var t="";if(e!==undefined){var i=e.getModel();t=i.getProperty("/currentState/stateName")}return t},_getLoggingQueueFromStorage:function(){var e=this._getFromSessionStorage("sap.ushell.UserActivityLog.loggingQueue");var t=[];if(e){try{t=JSON.parse(e)}catch(e){}}return t},_getLastNavActionFromStorage:function(){var e=this._getFromSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return e?JSON.parse(e):{}},_hashSegmentsEqual:function(e,t){if(!e||!t){return false}return this._getHashSegment(e)===this._getHashSegment(t)},_getHashSegment:function(e){var t=e.split("~");if(t.length>1){return t[0]}t=e.split("?");if(t.length>1){return t[0]}return e},_getFromSessionStorage:function(e){var t=null;try{t=sessionStorage.getItem(e)}catch(e){}return t},_putInSessionStorage:function(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}};var l=new u;return l});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_ApplicationType/guiResolution", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/utils","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/services/_ClientSideTargetResolution/Utils"],function(e,t,s,a,r,n,i){"use strict";function u(e,t){t.forEach(function(t){delete e[t]})}function o(e,t){return t&&t.signature&&t.signature&&t.signature.parameters&&t.signature.parameters[e]&&t.signature.parameters[e].required===true}function p(e,t){var s=o("DYNP_OKCODE",t)||o("DYNP_NO1ST",t);var a=[];if(s){return[]}var r=l(e);function n(e){return e.toUpperCase()}var i=Object.keys(r).map(n).sort();function u(e,t){if(e.length!==t.length){return false}return e.every(function(s,a){return e[a]===t[a]})}if(u(["DYNP_NO1ST","DYNP_OKCODE"],i)||u(["DYNP_OKCODE"],i)||u(["DYNP_NO1ST"],i)){a=Object.keys(r)}return a}function l(e){var t=i.filterObject(e,c);return t}function c(e,t){var s;if(arguments.length===1){s=e.split(/[=](.+)?/);if(s.length>1){return c.apply(null,s)}}return!(e.indexOf("sap-")===0||e.indexOf("saml")===0||e.charAt(0)==="~")}function m(e,t,s){var a=e.inbound,n=a&&a.resolutionResult,i;if(!(!a||!n||!n["sap.gui"]||!(n.applicationType==="TR"))){i=S(e,t,s)}else if(!(!a||!n||!(n.applicationType==="TR")||!(n.url.indexOf("/~canvas;")>=0)||!(n.url.indexOf("app/transaction/APB_LPD_CALL_")===-1))){i=h(e,t,s)}else if(!(!a||!n||!(n.applicationType==="TR")||!(n.url.indexOf("/~canvas;")>=0)||!(n.url.indexOf("app/transaction/APB_LPD_CALL_")>=0))){i=P(e,t,s)}else if(!(!a||!n||!(n.applicationType==="TR")||!(n.url.indexOf("/its/webgui")>=0)||!(n.url.indexOf("APB_LPD_CALL_")===-1))){i=g(e,t,s)}else if(!(!a||!n||!(n.applicationType==="TR")||!(n.url.indexOf("/its/webgui")>=0)||!(n.url.indexOf("APB_LPD_CALL_")!==-1))){i=v(e,t,s)}if(i){return i.then(function(e){if(e.url){e.url=r.appendParametersToUrl("sap-iframe-hint=GUI",e.url)}return e})}throw new Error("Cannot generate TR resolution result")}function f(e,t,r,n){var i,u;e=encodeURIComponent(e);i="/gui/sap/its/webgui?%7etransaction="+e+"&%7enosplash=1";u=new s(i);return a.spliceSapSystemIntoURI(u,a.LOCAL_SYSTEM_ALIAS,t,r,"NATIVEWEBGUI",a.SYSTEM_ALIAS_SEMANTICS.apply,n)}function d(e,t,s,a){var n,i="P_OBJECT"+a,u=132;var o=r.getURLParsing().privparamsToString(t,"%25","%21");if(!o){return e}var p="";y("P_OBJECT",e,s,a,function(e){var t=e.replace(i,"");p=decodeURIComponent(t);if(p.length>0){p=p+"%25"}return i});o=p+o;var l={pObjX:"",pObject:""};o.match(new RegExp(".{1,"+u+"}","g")).map(function(e){return encodeURIComponent(e)}).forEach(function(e,t){var r="P_OBJECT";var n="pObject";if(t>0){r="P_OBJ"+t;n="pObjX"}var i=l[n].length===0?"":s;l[n]=l[n]+i+r+a+e});n=[l.pObjX,l.pObject].filter(function(e){return e.length>0}).join(s);var c=y("P_OBJECT",e,s,a,function(e){return n});if(c.found){return c.query}return e+(e.length===0?"":s)+n}function y(e,t,s,a,r){var n=false,i=e+a;var u=t.split(s).map(function(e){if(e.indexOf(i)!==0){return e}n=true;return r(e)}).filter(function(e){return typeof e!=="undefined"}).join(s);return{found:n,query:u}}function v(e,n,i){var u=e.inbound,o=u&&u.resolutionResult,p={};var l=new s(n);var c=t({},e.mappedIntentParamsPlusSimpleDefaults);var m=c["sap-system"]&&c["sap-system"][0];var f=c["sap-system-src"]&&c["sap-system-src"][0];p["sap-system"]=m;delete c["sap-system"];if(typeof f==="string"){p["sap-system-src"]=f;delete c["sap-system-src"]}return a.spliceSapSystemIntoURI(l,o.systemAlias,m,f,"NATIVEWEBGUI",o.systemAliasSemantics||a.SYSTEM_ALIAS_SEMANTICS.applied,i).then(function(e){var t=e.search();var s=t.split("&").map(function(e){var t;if(e.indexOf("?%7etransaction")===0||e.indexOf("%7etransaction")===0){t=d(e,c,"%3b","%3d");return t}return e}).join("&");e.search(s);["additionalInformation","applicationDependencies"].forEach(function(e){if(u.resolutionResult.hasOwnProperty(e)){p[e]=u.resolutionResult[e]}});p.url=e.toString();p.text=u.title;p.applicationType="TR";r.setSystemAlias(p,u.resolutionResult);return p})}function S(e,t,s){var a=e.inbound,i=a&&a.resolutionResult,u=e.mappedIntentParamsPlusSimpleDefaults||{};var o=i.systemAlias;if(u["sap-system"]){o=u["sap-system"][0]}var p;if(u["sap-system-src"]){p=u["sap-system-src"][0]}return f(a.resolutionResult["sap.gui"].transaction,o,p,s).then(function(t){n.mapParameterNamesAndRemoveObjects(e);var s=R(e.inbound,e.mappedIntentParamsPlusSimpleDefaults,t);if(s&&e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult["sap.platform.runtime"]){s["sap.platform.runtime"]=e.inbound.resolutionResult["sap.platform.runtime"]}s["sap-system"]=o;r.setSystemAlias(s,a.resolutionResult);return s})}function P(e,n,i){var u=e.inbound,o=u&&u.resolutionResult;var p={};var l=new s(n);var c=t({},e.mappedIntentParamsPlusSimpleDefaults);var m=c["sap-system"]&&c["sap-system"][0];var f=c["sap-system-src"]&&c["sap-system-src"][0];p["sap-system"]=m;delete c["sap-system"];if(typeof f==="string"){p["sap-system-src"]=f;delete c["sap-system-src"]}return a.spliceSapSystemIntoURI(l,o.systemAlias,m,f,"WEBGUI",o.systemAliasSemantics||a.SYSTEM_ALIAS_SEMANTICS.applied,i).then(function(e){var t=e.search();t=d(t,c,"&","=");e.search(t);["additionalInformation","applicationDependencies"].forEach(function(e){if(u.resolutionResult.hasOwnProperty(e)){p[e]=u.resolutionResult[e]}});p.url=e.toString();p.text=u.title;p.applicationType="NWBC";r.setSystemAlias(p,u.resolutionResult);return p})}function h(e,n,i){var o=e.inbound,l=o&&o.resolutionResult;var c={};var m=new s(n);var f=t({},e.mappedIntentParamsPlusSimpleDefaults);var d=f["sap-system"]&&f["sap-system"][0];var y=f["sap-system-src"]&&f["sap-system-src"][0];c["sap-system"]=d;delete f["sap-system"];if(typeof y==="string"){c["sap-system-src"]=y;delete f["sap-system-src"]}var v=p(f,o||{});u(f,v);return a.spliceSapSystemIntoURI(m,l.systemAlias,d,y,"WEBGUI",c.systemAliasSemantics||a.SYSTEM_ALIAS_SEMANTICS.applied,i).then(function(e){var t=r.getURLParsing().paramsToString(f);var s=e.search();if(t){s=s+(s.indexOf("?")<0?"?":"&")+t}e.search(s);["additionalInformation","applicationDependencies"].forEach(function(e){if(o.resolutionResult.hasOwnProperty(e)){c[e]=o.resolutionResult[e]}});c.url=e.toString();c.text=o.title;c.applicationType="NWBC";r.setSystemAlias(c,o.resolutionResult);return c})}function g(e,r,n){var i=e.inbound,u=i&&i.resolutionResult,o={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true,"sap-system-src":true};var p=new s(r);var l=t({},e.mappedIntentParamsPlusSimpleDefaults);var c=l["sap-system"]&&l["sap-system"][0];var m=l["sap-system-src"]&&l["sap-system-src"][0];Object.keys(l).forEach(function(e){if(o[e.toLowerCase()]){delete l[e]}});return a.spliceSapSystemIntoURI(p,u.systemAlias,c,m,"NATIVEWEBGUI",u.systemAliasSemantics||a.SYSTEM_ALIAS_SEMANTICS.applied,n).then(function(t){var s=R(e.inbound,e.mappedIntentParamsPlusSimpleDefaults,t);return s})}function R(s,a,n){var i={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var o={};var l=t({},a);var m=l["sap-system"]&&l["sap-system"][0];var f=l["sap-system-src"]&&l["sap-system-src"][0];o["sap-system"]=m;if(typeof f==="string"){o["sap-system-src"]=f}Object.keys(l).forEach(function(e){if(i[e.toLowerCase()]){delete l[e]}});var d=p(l,s||{});u(l,d);var y=b(l);u(l,Object.keys(y));var v=n.search();var S=v.split("&").map(function(t){var s;if(!c(t)){if(t.indexOf("=")>=0){s=t.split("=");if(!y.hasOwnProperty(s[0])){y[s[0]]=s[1]}}else{e.error("Found no '=' separator of Webgui non-business parameter. Parameter will be skipped.","'"+t+"'","sap.ushell.services.ClientSideTargetResolution")}return undefined}var a;if(t.indexOf("?%7etransaction")===0||t.indexOf("%7etransaction")===0){a=I(t,l,"%3b","%3d");return a}return t}).filter(function(e){return typeof e!=="undefined"}).join("&");var P=r.getURLParsing().paramsToString(y);S=[S,P.replace("~","%7e")].join("&");n.search(S);["additionalInformation","applicationDependencies","sap.platform.runtime"].forEach(function(e){if(s.resolutionResult.hasOwnProperty(e)){o[e]=s.resolutionResult[e]}});o.url=n.toString();o.text=s.title;o.applicationType="TR";r.setSystemAlias(o,s.resolutionResult);return o}function b(e){var t;t=i.filterObject(e,function(e,t){return!c(e,t)});return t}function O(e){var t="^(.+?)(%20|(%20)(.+))?$",s=new RegExp(t,"i"),a,r={hasParameters:null,transactionParamName:"",transactionCode:"",parameters:[]};var n=e.split("=");if(n.length>2){return{error:"Found more than one assignment ('=') in the transaction query parameter",details:"Only one '=' sign is expected in "+e}}if(n.length<2||typeof n[1]==="undefined"||n[1].length===0){return{error:"The transaction query parameter must specify at least the transaction name",details:"Got "+e+" instead."}}r.transactionParamName=n[0];a=n[1];var i=a.match(s);if(!i){return{error:"Cannot parse ~transaction query parameter value.",details:a+" should match /"+t+"/"}}r.transactionCode=i[1];if(i[2]&&i[2]!=="%20"){var u=i[4]||"";u.split("%3b").forEach(function(e){var t=e.split("%3d"),s=t[0];if(s&&typeof s==="string"&&s.length>0){r.parameters.push({name:s,value:t[1]})}})}r.hasParameters=false;if(r.parameters.length>0){r.hasParameters=true;r.transactionCode=r.transactionCode.replace(/^[*]/,"")}return r}function I(t,s){var a=O(t);if(a.error){e.error(a.error,a.details,"sap.ushell.services.ClientSideTargetResolution");return t}var n=a.parameters.map(function(e){return e.name.toUpperCase()+"%3d"+e.value});var i,u=true;if(s.hasOwnProperty("DYNP_SKIP_SEL_SCREEN")){i=s["DYNP_SKIP_SEL_SCREEN"];delete s["DYNP_SKIP_SEL_SCREEN"];if(i[0]===""||i[0]===" "||i[0]==="0"||i[0]===0||i[0]&&i[0].toLowerCase()==="false"){u=false}}var o={};Object.keys(s).forEach(function(e){o[e.toUpperCase()]=s[e]});var p=r.getURLParsing().privparamsToString(o,"%3b","%3d");if(p){if(Object.keys(s).length>0){p+="%3b"}n.push(p)}var l=n.length>0;return a.transactionParamName+"="+(l&&u?"*":"")+a.transactionCode+(l?"%20":"")+n.join("%3b")}function T(e,t,s){return new Promise(function(a,i){var u;if(e.params["sap-system-src"]){u=e.params["sap-system-src"][0]}var o=e.params["sap-system"]?e.params["sap-system"][0]:undefined;var p=e.params["sap-ui2-tcode"]?e.params["sap-ui2-tcode"][0]:undefined;f(p,o,u,s).then(function(e){delete t.intentParamsPlusAllDefaults["sap-ui2-tcode"];n.mapParameterNamesAndRemoveObjects(t);var s=R(t.inbound,t.mappedIntentParamsPlusSimpleDefaults,e);if(s&&t.inbound&&t.inbound.resolutionResult&&t.inbound.resolutionResult["sap.platform.runtime"]){s["sap.platform.runtime"]=t.inbound.resolutionResult["sap.platform.runtime"]}s["sap-system"]=o;s.text=p;s.url=r.appendParametersToUrl("sap-iframe-hint=GUI",s.url);a(s)}).catch(function(e){i(e)})})}return{generateTRResolutionResult:m,resolveEasyAccessMenuIntentWebgui:T,injectEffectiveParametersIntoWebguiQueryParam:I,injectEffectiveParametersIntoWebguiPobjectParam:d,amendGuiParam:y,parseWebguiTransactionQueryParam:O,getWebguiNonBusinessParameters:b,getWebguiBusinessParameters:l,isWebguiBusinessParameter:c,buildNativeWebGuiURI:f,constructFullWebguiResolutionResult:S}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_ApplicationType/systemAlias", ["sap/ui/thirdparty/URI","sap/ushell/utils","sap/base/util/isPlainObject","sap/base/Log"],function(e,t,n,r){"use strict";var i="";var a={apply:"apply",applied:"applied"};function o(e){return(e.protocol()||"").length>0}function s(e,n,r){var i=typeof n==="string";var a=[e];if(i){a.unshift(n)}var o=t.generateLocalStorageKey("sap-system-data",a);var s=t.getLocalStorage();var f=s.getItem(o);var p={};if(f){try{p=JSON.parse(f)}catch(e){return Promise.reject("Cannot parse system data from local storage at key '"+o+"'. Data: "+f)}return Promise.resolve(p)}else if(i){return Promise.reject("Cannot find data for system '"+e+"' in local storage using key '"+o+"'")}if(!r){return Promise.reject("fallback: the adapter does not implement resolveSystemAlias")}return new Promise(function(t,n){r(e).done(function(e){t(e)}).catch(function(e){n(e)})})}function f(t,n,a,o,f){var p=a;var u=new Promise(function(u,l){s(t,n,f).catch(function(e){l(e)}).then(function(n){var s=m(n);if(!s.isValid){g(s);l("Invalid system alias definition");return}var h=d(n,new e(window.location.toString()).protocol());var v=n[h];var w;var P;var R;if(t===i&&v.host===""&&(v.port===0||v.port==="")){h=""}p.protocol(h);p.hostname(v.host);p.port(v.port);y(p,o,v.pathPrefix,f).catch(function(e){l(e)}).then(function(e){w=e.query();if(typeof n.client==="string"&&n.client!==""){w=w+(w.length>0?"&":"")+"sap-client="+n.client}if(typeof n.language==="string"&&n.language!==""){P=n.language}else{R=sap.ushell.Container.getUser();if(!R){r.error("Cannot retieve the User object via sap.ushell.Container while determining sap-language","will default to 'en' language","sap.ushell.services.ClientSideTargetResolution");P="en"}else{P=R.getLanguage()}}w=w+(w.length>0?"&":"")+"sap-language="+P;e.query(w);if(n.hasOwnProperty("rfc")&&o==="NATIVEWEBGUI"){var t=c(n.rfc,v.host,e);var i=e.path()+";"+t;e.path(i);a._parts.path=i}u(e)})})});return u}function p(e,t,n,r,i,o,s){if(o!==a.apply&&o!==a.applied){throw new Error("Invalid system alias semantic was provided: '"+o+"'")}if(o===a.applied&&(typeof n==="undefined"||t===n)){return Promise.resolve(e)}if(o===a.apply&&typeof t==="undefined"&&typeof n==="undefined"){return Promise.resolve(e)}if(i==="URL"&&o===a.applied){return u(e,t,n,r,s)}var p=new Promise(function(f,p){if(o===a.apply){f({targetUri:e,alias:n||t,sapSystemSrc:n?r:undefined});return}l(e,t,undefined,i,s).catch(function(e){p(e)}).then(function(e){f({targetUri:e,alias:n})})}).then(function(e){return f(e.alias,e.sapSystemSrc,e.targetUri,i,s)});return p}function u(t,n,r,a,p){var u=new Promise(function(u,c){if(n===i||typeof n==="undefined"){if(o(t)){u(t);return}u(f(r,a,t,"URL",p).then(function(e){return e}))}u(s(n,a,p).catch(function(e){c(e)}).then(function(n){var i=d(n,new e(window.location.toString()).protocol()),o=n[i],s;if((t.protocol()||"").toLowerCase()===i&&(t.hostname()||"")===o.host&&t.path().indexOf(o.pathPrefix)===0){t.protocol("");t.hostname("");s=t.path().replace(o.pathPrefix,"");t.path(s);v(t,["sap-language","sap-client"]);return f(r,a,t,"URL",p).then(function(e){return e})}return t}))});return u}function c(e,t){var n,i,a,o,s;a=!!e.systemId;if(a){o=[e.systemId&&"~sysid="+e.systemId,e.loginGroup&&"~loginGroup="+e.loginGroup,e.sncNameR3&&"~messageServer="+encodeURIComponent(e.sncNameR3),e.sncNameR3&&"~sncNameR3="+encodeURIComponent(e.sncNameR3),e.sncQoPR3&&"~sncQoPR3="+e.sncQoPR3].filter(function(e){return typeof e==="string"&&e!==""})}else{s=e.host||"";i=s.toLowerCase()===t.toLowerCase();n=/^[/][HGMR][/].*/.test(s);if(s.length>0&&!i&&!n){r.error("Invalid connect string provided in 'host' field of system alias","Data for rfc destination provided are: "+JSON.stringify(e,null,3),"sap.ushell.services.ClientSideTargetResolution")}o=[s&&!n&&!i&&"~rfcHostName="+s,n&&"~connectString="+encodeURIComponent(s),e.service&&"~service="+e.service,e.sncNameR3&&"~sncNameR3="+encodeURIComponent(e.sncNameR3),e.sncQoPR3&&"~sncQoPR3="+e.sncQoPR3].filter(function(e){return typeof e==="string"&&e!==""})}return o.join(";").replace(/(%[A-F0-9]{2})/g,function(e){return e.toLowerCase()})}function l(e,t,n,r,i){var a=new Promise(function(a,o){if(typeof t==="undefined"){a(h(e,t,r,undefined,i));return}a(s(t,n,i).then(function(n){return h(e,t,r,n,i)}))});return a}function h(t,r,i,a,o){t.protocol("");t.hostname("");t.port("");var f=new Promise(function(f){var p,u;v(t,["sap-client","sap-language"]);if(!n(a)||typeof r!=="string"){f(t)}u=d(a,new e(window.location.toString()).protocol());p=a[u];var c=new Promise(function(e,t){var n=typeof p.pathPrefix==="string"&&p.pathPrefix;if(n!==""){e(n)}else{s("",undefined,o).catch(function(e){t(e)}).then(function(t){var n=t[u];e(n.pathPrefix)})}}).then(function(e){var n;if(e&&e.length>0){n=t.path();n=n.replace(e,"");if(e==="/sap/bc/"){n=n.replace("/sap(====)/bc/","")}if(n.indexOf("/")!==0){n="/"+n}t.path(n)}if(i==="NATIVEWEBGUI"&&a.hasOwnProperty("rfc")){n=t.path();n=n.split(";").filter(function(e){return e.indexOf("~sysid=")!==0&&e.indexOf("~service=")!==0&&e.indexOf("~loginGroup=")!==0&&e.indexOf("~messageServer=")!==0&&e.indexOf("~sncNameR3=")!==0&&e.indexOf("~sncQoPR3=")!==0}).join(";");t.path(n)}return t});f(c)});return f}function d(e,t){if(e.hasOwnProperty("https")){return"https"}if(e.hasOwnProperty("http")){return"http"}r.error("Cannot select which system alias to pick between http/https","make sure they are provided in the given system alias collection","sap.ushell.services.ClientSideTargetResolution");return undefined}function g(e){r.error("Invalid system alias definition: "+e.debug,"ERRORS:"+e.errors.map(function(e){return"\n - "+e}).join(""),"sap.ushell.ApplicationType")}function m(e){function t(e){var t=[];if(typeof e.host!=="string"){t.push("host field must be a string")}if(typeof e.port!=="number"&&typeof e.port!=="string"){t.push("port field must be a number or a string")}if(typeof e.pathPrefix!=="string"){t.push("pathPrefix field must be a string")}return t}var n=[],r=e.hasOwnProperty("https"),i=e.hasOwnProperty("http");if(!i&&!r){n.push("at least one of 'http' or 'https' fields must be defined")}if(r){t(e.https).forEach(function(e){n.push("https>"+e)})}if(i){t(e.http).forEach(function(e){n.push("http>"+e)})}if(n.length>0){return{isValid:false,errors:n,debug:JSON.stringify(e,null,3)}}return{isValid:true}}function v(e,t){var n={},r;t.forEach(function(e){n[e]=true});r=e.query();r=r.split("&").filter(function(e){var t=(e.split("=")[0]||"").toLowerCase();return!n.hasOwnProperty(t)}).join("&");e.query(r)}function y(t,n,r,i){var a;var o=new Promise(function(o){if(n==="URL"&&r.length===0){o(t);return}o(s("",undefined,i).then(function(i){var o=d(i,new e(window.location.toString()).protocol());var s=i[o].pathPrefix;var f=r===s;if(r.length>0&&!f){if((n==="WDA"||n==="WEBGUI")&&t.path().indexOf("~canvas")>=0){a=t.path();a="/~canvas"+a.split("~canvas")[1];t.path(a)}}function p(e){var n=e+t.path();t.path(n.replace(/\/+/g,"/"));return t}if(r.length===0){if(n==="WCF"&&s==="/sap/bc/"){return p("/sap(====)/bc/")}return p(s)}return p(r)}))});return o}return{LOCAL_SYSTEM_ALIAS:i,SYSTEM_ALIAS_SEMANTICS:a,spliceSapSystemIntoURI:p,isAbsoluteURI:o,_stripURI:l,_selectSystemAliasDataName:d,_constructNativeWebguiParameters:c}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_ApplicationType/utils", ["sap/ushell/utils/UrlParsing","sap/ushell/_ApplicationType/systemAlias"],function(e,s){"use strict";function a(){return e}function t(e,a,t){if(!t||t===s.SYSTEM_ALIAS_SEMANTICS.applied){return s.isAbsoluteURI(e)&&!a}if(t===s.SYSTEM_ALIAS_SEMANTICS.apply){return s.isAbsoluteURI(e)}throw new Error("Invalid system alias semantics: '"+t+"'")}function r(e,s){var a,t,r;if(typeof s==="string"){r=s}else{r=decodeURI(s.toString())}if(e){var n=r.match(/#.*/);if(n){t=n;a=r.replace(n,"")}else{a=r;t=""}r=a+(r.indexOf("?")<0?"?":"&")+e+t}return r}function n(s,a){var t=a.match(/#.*/);var n=t&&t[0];if(!n){var i=e.paramsToString(s);return r(i,a)}var l=e.parseShellHash(n);Object.keys(s).forEach(function(e){var a=s[e];l.params[e]=[a]});var p=Object.keys(l.params).reduce(function(e,s){var a=l.params[s];var t=a.map(function(e){return encodeURIComponent(e)});e[encodeURIComponent(s)]=t;return e},{});l.params=p;var u=a.replace(n,"");var o=e.constructShellHash(l);return u+"#"+o}function i(e,s){if(e["sap-system"]&&e["sap-system"]!=null&&e["sap-system"]!=undefined&&e["sap-system"]!=""){e.systemAlias=e["sap-system"]}else{e.systemAlias=s.systemAlias}if(e.systemAlias===undefined){delete e.systemAlias}}return{getURLParsing:a,appendParametersToUrl:r,appendParametersToIntentURL:n,absoluteUrlDefinedByUser:t,setSystemAlias:i}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_ApplicationType/wdaResolution", ["sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/utils"],function(s,a,e,t,r){"use strict";function n(a,e){return new Promise(function(t,n){var i=s({},a);if(e.length>0){i["sap-ushell-defaultedParameterNames"]=[JSON.stringify(e)]}delete i["sap-system"];sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(s){s.compactParams(i,["sap-xapp-state","sap-xapp-state-data","sap-ushell-defaultedParameterNames","sap-intent-params","sap-iframe-hint","sap-keep-alive","sap-wd-configId"],undefined,true).fail(function(s){n(s)}).done(function(s){var a=r.getURLParsing().paramsToString(s);t(a)})}).catch(function(s){n(s)})})}function i(s,a){var e=s.search();if(a){e=e+(e.indexOf("?")<0?"?":"&")+a}return s.search(e).toString()}function p(a,n,i,p,l){var m,c,f,d,y,v=s({},p);if(n){v["sap-wd-configId"]=n}if(v["sap-system"]){m=v["sap-system"][0];delete v["sap-system"]}if(v.hasOwnProperty("sap-system-src")){c=v["sap-system-src"][0];delete v["sap-system-src"]}y=r.getURLParsing().paramsToString(v);if(i){f=u(a,y)}else{f=o(a,y)}d=new e(f);return t.spliceSapSystemIntoURI(d,t.LOCAL_SYSTEM_ALIAS,m,c,"WDA",t.SYSTEM_ALIAS_SEMANTICS.apply,l)}function u(s,a){return"/ui2/nwbc/~canvas;window=app/wda/"+s+"/"+"?"+a}function o(s,a){var e=s.indexOf("/")!==0;if(e){s="sap/"+s}return"/webdynpro/"+s+"?"+a}function l(s,a,e,t){var n={"sap-system":e,url:a,text:s.title,applicationType:"NWBC"};if(typeof t==="string"){n["sap-system-src"]=t}r.setSystemAlias(n,s.resolutionResult);["additionalInformation","applicationDependencies"].forEach(function(a){if(s.resolutionResult.hasOwnProperty(a)){n[a]=s.resolutionResult[a]}});n.url=r.appendParametersToUrl("sap-iframe-hint="+(n.url.indexOf("/ui2/nwbc/")>=0?"NWBC":"WDA"),n.url);return n}function m(s,e,t){var r=a.get("inbound.resolutionResult",s);var u=s.mappedIntentParamsPlusSimpleDefaults||{};var o=r.systemAlias;if(u["sap-system"]){o=u["sap-system"][0]}var m;if(u["sap-system-src"]){m=u["sap-system-src"][0]}var c={"sap-system":[o]};if(typeof m==="string"){c["sap-system-src"]=[m]}var f=r["sap.wda"].compatibilityMode;if(f===undefined){f=true}return Promise.all([p(r["sap.wda"].applicationId,r["sap.wda"].configId,f,c,t),n(u,s.mappedDefaultedParamNames)]).then(function(a){var e=a[0];var t=a[1];var r=i(e,t);var n=u["sap-system"]&&u["sap-system"][0];var p=u["sap-system-src"]&&u["sap-system-src"][0];var o=l(s.inbound,r,n,p);return o})}function c(s,a,r){var p=s.inbound,u=p&&p.resolutionResult,o=s.mappedIntentParamsPlusSimpleDefaults;var m=new e(a);var c=o["sap-system"]&&o["sap-system"][0];var f=o["sap-system-src"]&&o["sap-system-src"][0];return Promise.all([t.spliceSapSystemIntoURI(m,u.systemAlias,c,f,"WDA",u.systemAliasSemantics||t.SYSTEM_ALIAS_SEMANTICS.applied,r),n(o,s.mappedDefaultedParamNames)]).then(function(s){var a=s[0];var e=s[1];var t=i(a,e);var r=l(p,t,c,f);return r},function(s){return Promise.reject(s)})}function f(s,e,t,n){var i=s.params["sap-ui2-wd-app-id"][0];var u=(a.get("params.sap-ui2-wd-conf-id",s)||[])[0];var o=Object.keys(s.params).reduce(function(a,e){if(e!=="sap-ui2-wd-app-id"&&e!=="sap-ui2-wd-conf-id"){a[e]=s.params[e]}return a},{});return p(i,u,n,o,t).then(function(a){var t=s.params.hasOwnProperty("sap-system-src")&&s.params["sap-system-src"][0];var n=s.params.hasOwnProperty("sap-system")&&s.params["sap-system"][0];var p={url:a.toString(),applicationType:"NWBC",text:i,additionalInformation:"","sap-system":n};if(typeof t==="string"){p["sap-system-src"]=t}if(e&&e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult["sap.platform.runtime"]){p["sap.platform.runtime"]=e.inbound.resolutionResult["sap.platform.runtime"]}p.url=r.appendParametersToUrl("sap-iframe-hint="+(p.url.indexOf("/ui2/nwbc/")>=0?"NWBC":"WDA"),p.url);return p})}return{resolveEasyAccessMenuIntentWDA:f,constructFullWDAResolutionResult:m,constructWDAResolutionResult:c}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_Config/utils", [],function(){"use strict";function t(t,r){var n=[];var e=[];var o=r;var a=false;var i=t.split("/");i.shift();i.forEach(function(t){if(!a&&o.hasOwnProperty(t)){o=o[t];n.push(t);return}a=true;e.push(t)});return{contractPart:"/"+n.join("/"),nonContractPart:e}}function r(t){return t&&t.isA&&t.isA("sap.ui.model.Context")}function n(t,r,n,e){var o=n;r.forEach(function(n,a){if(a===r.length-1){o[n]=e;return}if(!o.hasOwnProperty(n)){throw new Error("Cannot find "+n+" inside "+t)}o=o[n]})}function e(t){var r=function(r){return t+r};if(typeof t==="object"){var n="/";r=function(r){var e=r.split(n);e.shift();var o=e.shift();return t[o]+(e.length>0?n+e.join(n):"")}}return r}function o(t,n,o){var a=e(o);var i=a(t);if(r(n)&&t.charAt(0)!=="/"){var c=n.getPath()+"/"+t;i=a(c)}return i}function a(r,e,a,i){a.setData=function(t,r){throw new Error("not yet implemented")};a.setProperty=function(a,c,u){var f=o(a,u,i);var s=t(f,e);if(s.nonContractPart.length===0){r.emit(s.contractPart,c);return}var p=r.last(s.contractPart);n(s.contractPart,s.nonContractPart,p,c);r.emit(s.contractPart,p)};return a}function i(t,r,n,e){var o,i,c,u;if(typeof n==="string"){var f=n;u=f;var s=t.last(f);if(Object.prototype.toString.apply(s)!=="[object Object]"){throw new Error("Cannot bind on leaf property of Configuration: '"+f+"'")}o=new e(s);c=o.setData.bind(o);t.on(f).do(function(t){c(t)});return a(t,r,o,u)}if(Object.prototype.toString.apply(n)==="[object Object]"){var p=n;var v=Object.keys(p).reduce(function(r,n){var e=p[n];r[n]=t.last(e);t.on(e).do(function(t,r){i("/"+t,r)}.bind(null,n));return r},{});o=new e(v);i=o.setProperty.bind(o);return a(t,r,o,p)}throw new Error("Invalid parameter provided to createModel. Must be an object or a string.")}return{createModel:i}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/DefinitionParameterSetBuilder", ["sap/ushell/_URLTemplateProcessor/TemplateParameterParser","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/utils/type"],function(e,r,t,a){"use strict";var s="/payload/parameters/names";function o(s,o,l){if(!s||!s.names){return{}}if(!s.hasOwnProperty("mergeWith")){return s.names}var u=s&&s.mergeWith;if(Array.isArray(u)===false&&typeof u!=="string"){throw new Error("The value of 'mergeWith' can only be a string or an array")}var p=s&&s.names;var h=i(s.mergeWith,o,l,{});var f=h.map(function(t){var s=e.parsePath(l,t);n(s);var i=r.resolvePath(s,{},o,{},{});if(!a.isPlainObject(i)){throw new Error("Cannot merge parameters from '"+t+"'. The path must point to an object")}return i}).reduce(function(e,r){e=t.mergeObject(e,r);return e},{});return t.mergeObject(f,p)}function n(e){if(e.pathType==="relative"){throw new Error("Please only specify absolute paths via mergeWith")}e.value.forEach(function(e){if(e.type!=="literal"){throw new Error("Please do not specify references in mergeWith paths")}})}function i(t,a,o,l){if(Array.isArray(t)){return t.slice().reverse()}if(typeof t==="string"){if(l[t]){throw new Error("Detected circular dependency of templates caused by mergeWith statements: ensure the template merges its parameters with a base template.")}l[t]=true;var u=e.parsePath(o,t);n(u);var p=r.resolvePath(u,{},a,{},{});if(!p){throw new Error("The specified mergeWith path does cannot be resolved: '"+t+"'")}var h=s.split("/").slice(1).reduce(function(e,r){if(e.result&&e.obj&&e.obj.hasOwnProperty(r)){e.obj=e.obj[r]}else{e.result=false}return e},{obj:p,result:true}).result;if(!h){throw new Error(t+" does not contain "+s+". Please make sure "+t+" points to the root of a URL template.")}return i(p.payload.parameters.mergeWith,a,o,l).concat([t+s])}return[]}return{buildDefinitionParameterSet:o}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/DependencyGraph", ["sap/base/util/deepExtend"],function(e){"use strict";function n(e){return typeof e==="string"||e.type==="wildcard"||e.type==="literal"||e.type==="intentParameter"||e.type==="reference"}function r(e){return e.type==="reference"&&!e.namespace}function t(e,n,t){if(!e.hasOwnProperty(n)){e[n]=[]}if(r(t)){e[n].push(t.value)}}function i(e){var n={};var r=t.bind(null,n);Object.keys(e).forEach(function(n){var t=e[n];a(t,n,r)});return n}function u(e){var n=e.type;if(n==="expression"){return[e.value]}if(n==="function"){return(e.args||[]).concat(e.params||[])}if(n==="pipe"||n==="path"){return e.value}throw new Error("Unknown type encountered while building dependency graph: '"+n+"'")}function a(e,r,t){t(r,e);if(n(e)){return}var i=u(e);i.forEach(function(e){a(e,r,t)})}function c(n){var r=e({},n);var t,i,u=[],a={};do{var c=Object.keys(r);t=c.length;c.forEach(function(e){if(r[e].length>0){r[e]=r[e].filter(function(e){var n=!a[e];var t=r.hasOwnProperty(e);return n&&t})}if(r[e].length===0){delete r[e];u.push(e);a[e]=true}});i=Object.keys(r).length}while(t!==i);if(i!==0){throw new Error("Graph of dependencies contains cyclic references")}return u}return{buildDependencyGraph:i,getDependencyResolutionOrder:c}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/Functions", ["sap/base/util/deepExtend","sap/ui/thirdparty/URI","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/utils/type"],function(e,n,r,t){"use strict";var i={url:{args:["urlPart?"],minValues:0,maxValues:0,fn:function(e){var r=new n;var t=["protocol","scheme","username","password","hostname","port","host","userinfo","authority","origin","subdomain","domain","tld","pathname","path","directory","filename","suffix","search","query","hash","fragment","resource"];var i="toString";if(e.urlPart){if(t.indexOf(e.urlPart)===-1){throw new Error("The URL part '"+e.urlPart+"' is not valid. Please use one of "+t.join(", "))}i=e.urlPart}return r[i]()}},if:{args:["trueCondition"],minValues:1,maxValues:2,fn:function(e,n){var r=u(n);if(a(e.trueCondition)){return r.length===1?undefined:r.pop()}return r[0]}},and:{args:["emptyCondition?"],minValues:1,fn:function(e,n){var t=u(n);if(typeof e.emptyCondition==="undefined"&&e.length>0){return undefined}if(typeof e.emptyCondition!=="undefined"&&a(e.emptyCondition)){return undefined}var i=t.pop();var o=t.every(r.hasValue);return o?i:undefined}},or:{args:["emptyCondition?"],minValues:1,fn:function(e,n){var t=u(n);if(typeof e.emptyCondition==="undefined"&&e.length>0){return undefined}if(typeof e.emptyCondition!=="undefined"&&a(e.emptyCondition)){return undefined}return t.reduce(function(e,n){if(r.hasValue(e)){return e}return r.hasValue(n)?n:undefined})}},replace:{args:["strRegExp","strReplace","flags?"],minValues:1,maxValues:1,fn:function(e,n){var r=new RegExp(e.strRegExp,e.flags);var a=e.strReplace||"";if(typeof n===undefined||n===null){return n}if(t.isArray(n)){if(n.length===1){return i.replace.fn.call(this,e,n[0])}return n.map(function(n){return i.replace.fn.call(this,e,n)})}if(t.isPlainObject(n)){return Object.keys(n).reduce(function(r,t){var a=n[t];r[t]=i.replace.fn.call(this,e,a);return r},{})}if(typeof n==="string"){return n.replace(r,a)}return i.replace.fn.call(this,e,n+"")}},join:{args:["macroSeparator?","microSeparator?"],minValues:1,fnPipe:function(e,n){var r=[n];return i.join.fn.call(this,e,r)},fn:function(e,n){var i=e.macroSeparator||"";var a=e.microSeparator||"";n=n.map(function(e){if(!t.isPlainObject(e)&&!t.isArray(e)){return e}var n=Object.prototype.toString.apply(e);if(n==="[object Object]"){var u=r.removeArrayParameterNotation(e);return Object.keys(u).sort().map(function(n){return n+a+e[n]}).join(i)}if(n==="[object Array]"){return e.join(i)}});return n.join(i)}},match:{args:["strRegex"],minValues:1,fnPipe:function(e,n){var r=e.strRegex;var t=new RegExp(r);return Object.keys(n).reduce(function(e,r){if(t.exec(r)){e[r]=n[r]}return e},{})},fn:function(e,n){if(n===undefined){return undefined}var r=e.strRegex;var i=new RegExp(r);var a=n.filter(function(e){var n;if(t.isPlainObject(e)){n=Object.keys(e)}else if(t.isArray(e)){n=e}else{n=[""+e]}return n.some(i.exec.bind(i))});return a.length===n.length?true:undefined}},not:{args:[],minValues:1,fnPipe:function(e,n){return Object.keys(n).length>0?undefined:""},fn:function(e,n){var r=i.and.fn(e,n);return r===undefined?"":undefined}},stringify:{args:[],minValues:1,fn:function(e,n){if(t.isArray(n)){if(n.length===0){return""}if(n.length===1){n=n[0]}}if(typeof n==="string"){return n}return JSON.stringify(n)}},encodeURIComponent:{args:[],minValues:1,maxValues:1,fnPipe:function(e,n){return Object.keys(n).reduce(function(e,r){e[r]=encodeURIComponent(n[r]);return e},{})},fn:function(e,n){var r=n[0];if(typeof r!=="string"){return r}return encodeURIComponent(r)}}};function a(e){if(typeof e==="undefined"){return true}if(typeof e==="string"){return e===""}if(typeof e==="object"){return Object.keys(e).length===0}if(typeof e==="number"){return e===0}if(typeof e==="boolean"){return e===false}throw new Error("Unexpected type for value")}function u(e){var n;if(t.isArray(e)){n=e}else if(t.isPlainObject(e)){n=[e]}else if(e===undefined){return[]}else{throw new Error("Unexpected type")}return n}function o(e,n,r){if(r!==undefined&&!t.isPlainObject(r)){throw new Error("Invalid value type passed to '"+e+"' in pipe context. An object is expected.")}}function f(e,n,i){if(i!==undefined&&!t.isArray(i)){throw new Error("Invalid value type passed to '"+e+"' in value context. An array is expected.")}var a=t.isArray(i)?i.length:0;if(r.hasValue(n.maxValues)&&a>n.maxValues){throw new Error("Too many values were passed to '"+e+"'. Please pass maximum "+n.maxValues+" values.")}if(r.hasValue(n.minValues)&&a<n.minValues){throw new Error("Too few values were passed to '"+e+"'. Please pass minimum "+n.minValues+" values.")}}function s(e){var n=false;e.map(l).reduce(function(e,r){if(!e&&r){n=true}return r},true);return n}function l(e){return e.charAt(e.length-1)!=="?"}function c(e){return e.substr(0,e.length-1)}function p(n,r){var t=e([],i[n].args);if(s(t)){throw new Error("Invalid argument signature. Make sure all optional arguments appear in the end.")}var a={length:r.length};var u=t.filter(l);var o=u>r.length;if(o){throw new Error(n+" requires "+u+" arguments but "+r.length+" was specified")}r.forEach(function(e){var n=t.shift();var i=!l(n);if(i){n=c(n)}if(r.length>0){a[n]=e}});return a}function d(e,n,r,t){if(!i.hasOwnProperty(n)){throw"Invalid function: "+n}var a=p(n,r);if(e){o(n,i[n],t)}else{f(n,i[n],t)}if(e){if(!i[n].fnPipe){throw new Error("The function '"+n+"' cannot be executed in pipe context")}return i[n].fnPipe(a,t)}return i[n].fn(a,t)}function m(e){return e.split("").map(function(e){if(e==="["){return"[\\[]"}return"["+e+"]"}).join("")}function h(){var e=Object.keys(i);return e.map(m).join("|")}return{getPossibleFunctionsRegExpString:h,applyFunctionInValueContext:d.bind(null,false),applyFunctionInPipeContext:d.bind(null,true),_setURIDependency:function(e){n=e}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/Resolvers", ["sap/base/util/deepExtend","sap/ushell/_URLTemplateProcessor/Functions","sap/ushell/_URLTemplateProcessor/utils"],function(e,r,n){"use strict";var t={literal:o,expression:p,reference:c,function:s,path:i,pipe:u};function a(e,r,n){var t=null;var a=[];var o=false;var i=r.join("/");t=e;if(typeof t==="undefined"){o=true}r.forEach(function(e,r){if(o){return}a.push(e);if(!t.hasOwnProperty(e)){t=undefined;o=true;return}if(!t.hasOwnProperty(e)){throw new Error("Cannot find path '"+i+"' in given structure: '"+e+"' seems to be missing in the object.")}t=t[e]});return t}function o(e){return e.value}function i(e,r,n,t,o,i){var u=e.value.map(function(e){return l(e,r,n,t,o,i)});var s=e.pathType==="relative";var p=s?t:n;return a(p,u,r)}function u(n,t,a,o,i,u){var s=n.value;if(s[0].type!=="wildcard"){throw new Error("Leading wildcard expected in pipe expression")}if(s[0].value!=="*"){throw new Error("Unsupported wildcard expression: "+s[0].value)}return s.slice(1).reduce(function(e,n){if(n.type!=="function"){throw new Error("Invalid operation specified in pipe expression")}return r.applyFunctionInPipeContext(n.name,n.args.map(function(e){return l(e,t,a,o,i,u)}),e)},e({},i[u]||{}))}function s(e,n,t,a,o,i){var u=e.name;var s=e.args.map(function(e){return l(e,n,t,a,o,i)});var p=e.params.map(function(e){return l(e,n,t,a,o,i)});return r.applyFunctionInValueContext(u,s,p)}function p(e,r,n,a,o,i){var u=e.value;if(t[u.type]){return l(u,r,n,a,o,i)}throw new Error("unknown expression type: "+u.type)}function c(e,r,n,t,a,o){var i=e.value;if(!e.hasOwnProperty("namespace")){return r[i]}var u=e.namespace;var s="The template attemps to take the value '"+i+"' from '"+u+"' namespace.";if(!a.hasOwnProperty(u)){throw new Error(s+" However this value was not defined at runtime. The template should reference only defined values.")}var p=a[u];var c=i===".";if(c){return p}if(typeof p!=="object"){throw new Error(s+" However the runtime did not define the namespace as an object. The template cannot access the desired value using the object notation in this case.")}return p[i]}function l(e,r,n,a,o,i){var u=e.type;if(t[u]){return t[u](e,r,n,a,o,i)}throw new Error("Cannot resolve unknown parameter type: '"+u+"'")}function f(e,r,n,t,a,o){var i={};r.forEach(function(r){var u=e[r];var s=l(u,i,n,a,t,o);i[r]=s});return i}return{resolveLiteral:o,resolveExpression:p,resolveReference:c,resolveFunction:s,resolvePath:i,resolvePipe:u,resolveParameterValue:l,resolveAllParameters:f}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/TemplateParameterParser", ["sap/ushell/_URLTemplateProcessor/Functions"],function(r){"use strict";function e(e,t){var a=p();var u=a.exec(t);if(u===null){throw new Error("Cannot parse expression: '"+t+"'")}var s=h(t);if(s.indexOf("*")===0){return n(e,s)}var f="^("+r.getPossibleFunctionsRegExpString()+")[^a-z]";var v=new RegExp(f);if(v.exec(s)){return o(e,s)}return i(e,s)}function n(r,e){var n=f(r,e,"|");var t=n.shift();return{type:"pipe",value:[{type:"wildcard",value:t}].concat(n.map(o.bind(null,r)))}}function t(r){var e=r.substr(1);var n;if(e.indexOf(":")>=0){var t=e.split(":");n=t[0];e=t[1]}var a={type:"reference",value:e};if(n){a.namespace=n}return a}function a(r,e){var n=e.split("/");var t="relative";if(n[0]===""){t="absolute";n.shift()}if(n[0]==="."){n.shift()}return{type:"path",pathType:t,value:n.map(u.bind(null,r))}}function i(r,e){if(e.charAt(0)==="{"&&e.charAt(e.length-1)==="}"){return i(r,h(e))}if(e.indexOf(".")===0||e.indexOf("/")===0){return a(r,e)}if(e.charAt(0)==="'"&&e.charAt(e.length-1)==="'"){return s(h(e))}if(e.charAt(0)==="&"){return t(e)}return{type:"reference",value:e,namespace:r}}function u(r,e){if(e.charAt(0)==="{"&&e.charAt(e.length-1)==="}"){return i(r,h(e))}return{type:"literal",value:e}}function s(r){return{type:"literal",value:r}}function o(r,e){var n=e.split(/[(\s]/)[0];var t=d(e,n);t=t.replace(/^\s+/,"");var a="";if(t.charAt(0)==="("){var u=t.search(/([)]\s)|([)]$)/);if(u===-1){throw new Error("Cannot find termination of function '"+t+"' in '"+e+"'")}a=t.substr(1,u-1);t=d(t,"("+a+")");t=t.replace(/^\s+/,"")}var s=t;return{type:"function",name:n,args:f(r,a,",").map(function(r){return r.charAt(0)==="{"?h(r):"'"+r+"'"}).map(i.bind(null,r)),params:f(r,s,",").map(i.bind(null,r))}}function f(r,e,n){if(!e){return[]}var t=e.split(n).reduce(function(r,e,t){if(t===0){r.push(e);return r}var a=r.length-1;var i=r[a];var u=i.length>0&&i.charAt(i.length-1)==="\\";var s="";if(u){s=r.pop();s=s.substr(0,s.length-1)+n}r.push(s+e);return r},[]);return t}function v(r,n){var t=n;var a=null;if(Object.prototype.toString.apply(n)==="[object Object]"){t=n.value;a=n.renameTo}var i=g(t);if(i){return s(t)}var u="expression";var o=e(r,t);var f={type:u,value:o};if(a){o.renameTo=a}return f}function c(r){var e=r.indexOf("{")===0;var n=p();var t=n.exec(r);if(!t){if(e){throw new Error("Expression was expected. But "+r+" does not look like a valid expression")}return null}return t[1]}function p(){var e="[a-zA-Z0-9]+?:";var n="((&("+e+")?)?[.a-zA-Z0-9_-]+?)";var t="('(.*?)')";var a="([^' ]*?)";var i="{("+n+")}";var u="("+"[.]?([/]("+n+"|"+i+"))+"+")";var s="("+u+"|"+t+"|"+n+"|"+i+")";var o="("+s+"(,"+s+")*)";var f="("+a+"|"+i+")";var v="("+f+"(,"+f+")*)";var c="("+"[(]"+v+"[)]"+")?";var p=r.getPossibleFunctionsRegExpString();var l="("+"("+p+")"+"("+c+")"+")";var h="([*]([|]"+l+")*)";var d="^{("+h+"|"+"(("+l+")([ ]("+o+"))?)"+"|"+"("+s+")"+")}$";var g=new RegExp(d);return g}function l(r){return c(r)!==null}function h(r){var e=r.split("");e.shift();e.pop();return e.join("")}function d(r,e){if(r.indexOf(e)===0){return r.substr(e.length)}throw new Error("Given string does not start with prefix '"+e+"'")}function g(r){return typeof r==="string"&&!l(r)}function x(r,e){return Object.keys(r).reduce(function(n,t){var a=r[t];n[t]=v(e,a);return n},{})}function m(r,e){return Object.keys(r).reduce(function(e,n){var t=r[n];e[n]=s(t);return e},{})}return{parseTemplateParameterSet:x,parseTemplateParameterSetAsLiterals:m,parsePath:a,_isExpression:l,_parseList:f,_parseParameterValue:v}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/utils", ["sap/base/util/deepExtend"],function(e){"use strict";function r(e){return e!==null&&typeof e!=="undefined"}function t(e){return Object.keys(e).reduce(function(r,t){var n=e[t];if(Object.prototype.toString.apply(n)==="[object Array]"){r[t]=n[0]}else if(typeof n==="string"){r[t]=n}else{throw new Error("Parameters should be passed as strings or array of strings")}return r},{})}function n(r,t){var n=e({},r);var u=e({},t);return Object.keys(u).reduce(function(e,r){e[r]=u[r];return e},n)}return{mergeObject:n,hasValue:r,removeArrayParameterNotation:t}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/AppVariantPersonalizationAdapter", ["sap/ushell/services/_Personalization/constants","sap/ui/fl/apply/api/UI2PersonalizationApplyAPI","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,n,jQuery){"use strict";function i(e){var t="sap.ushell.personalization#";if(e.substring(0,t.length)!==t){n.error("Unexpected ContainerKey "+e);return e}var i=e.substring(t.length);i=i.split("#")[0];return i}r.prototype._determineCategory=function(t){if(!t){return"U"}if(t.keyCategory&&t.keyCategory===e.keyCategory.FIXED_KEY&&t.writeFrequency&&t.writeFrequency===e.writeFrequency.LOW&&t.clientStorageAllowed&&t.clientStorageAllowed===true){return"P"}return"U"};r.prototype.getMap=function(){return{category:this._category,service:this._oService,changedKeys:this._oChangedKeys,component:this._oComponent,deletedKeys:this._oDeletedKeys,container:this._aJSONContainer,scope:this._oScope,appName:this._sAppName,appVarId:this._sAppVarId,appVersion:this._sAppVersion,containerKey:this._sContainerKey}};function r(e,t,n,r){this._oService=t;this._oScope=n;this._sAppVarId=n.appVarId;this._sAppVersion=n.appVersion;this._oComponent=n.component;this._sContainerKey=i(e);this._sAppName=r||"";this._category=this._determineCategory(n);this._aJSONContainer=[];this._oChangedKeys={};this._oDeletedKeys={}}r.prototype._reset=function(){this._aJSONContainer=[]};r.prototype.load=function(){var e=new jQuery.Deferred;sap.ui.getCore().loadLibrary("sap/ui/fl",{async:true}).then(function(){return t.load({selector:this._oComponent,containerKey:this._sContainerKey})}.bind(this)).then(function(t){this._aJSONContainer=t||[];e.resolve(t)}.bind(this)).catch(function(t){n.warning(t);this._reset();e.reject(t)}.bind(this));return e.promise()};r.prototype.save=function(){var e=[];var t=new jQuery.Deferred;sap.ui.require(["sap/ui/fl/write/api/UI2PersonalizationWriteAPI"],function(n){Object.keys(this._oChangedKeys).forEach(function(t){var i=this._oChangedKeys[t];var r=Object.assign({selector:this._oComponent},i);e.push(n.create(r))},this);Object.keys(this._oDeletedKeys).forEach(function(t){e.push(n.deletePersonalization({selector:this._oComponent,containerKey:this._sContainerKey,itemName:t}))},this);Promise.all(e).then(function(e){this._oChangedKeys={};this._oDeletedKeys={};t.resolve()}.bind(this),function(e){t.reject(e)})}.bind(this));return t.promise()};r.prototype.del=function(){var e=new jQuery.Deferred;sap.ui.require(["sap/ui/fl/write/api/UI2PersonalizationWriteAPI"],function(t){this.load().then(function(){var n=[];this._aJSONContainer.forEach(function(e){n.push(t.deletePersonalization({selector:this._oComponent,containerKey:this._sContainerKey,itemName:e.itemName}))},this);Promise.all(n).then(function(t){e.resolve()},function(t){e.reject(t)})}.bind(this))}.bind(this));return e.promise()};r.prototype.getItemKeys=function(){var e=[];this._aJSONContainer.forEach(function(t){if(t.category==="V"){e.push("VARIANTSET#"+t.itemName)}else if(t.category==="I"){e.push("ITEM#"+t.itemName)}});return e};r.prototype.containsItem=function(e){return this.getItemKeys().indexOf(e)>=0};r.prototype._findItemIndex=function(e,t){var n;for(n=0;n<this._aJSONContainer.length;n=n+1){if(this._aJSONContainer[n].itemName===e&&this._aJSONContainer[n].category===t){return n}}return undefined};r.prototype._locateItem=function(e){var t={index:-1};if(e.indexOf("ITEM#")===0){t.trueItemKey=e.substring("ITEM#".length,"ITEM#".length+40);t.category="I"}else if(e.indexOf("VARIANTSET#")===0){t.trueItemKey=e.substring("VARIANTSET#".length,"VARIANTSET#".length+40);t.category="V"}else if(e.indexOf("ADMIN#")!==0){n.error("Unknown itemkey prefix"+e)}t.index=this._findItemIndex(t.trueItemKey,t.category);return t};r.prototype.getItemValue=function(e){var t="",n,i=this._locateItem(e);if(i.index>=0){t=this._aJSONContainer[i.index].content;n=t}return n};r.prototype.setItemValue=function(e,t){var n=this._locateItem(e);var i;if(n.index>=0){i=this._aJSONContainer[n.index];i.content=t}else{i={reference:this._sAppVarId,content:t,itemName:n.trueItemKey,category:n.category,containerKey:this._sContainerKey,containerCategory:this._category};this._aJSONContainer.push(i)}this._oChangedKeys[n.trueItemKey]=i;delete this._oDeletedKeys[n.trueItemKey]};r.prototype.delItem=function(e){var t=this._locateItem(e);if(t.index>=0){this._aJSONContainer.splice(t.index,1);this._oDeletedKeys[t.trueItemKey]=true;return}};var o=function(){};o.prototype.getAdapterContainer=function(e,t,n){return new r(e,this,t,n)};o.prototype.delAdapterContainer=function(e,t){return this.getAdapterContainer(e,t).del()};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/ClientSideTargetResolutionAdapter", ["sap/base/util/Version","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/Log"],function(e,jQuery,t,r){"use strict";var s=function(s,n,i){this._oAdapterConfig=i&&i.config;var o=sap.ushell.Container,a="";if(o){a=o.getLogonSystem().getProductName()||""}this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",label:"local",client:"",language:"",properties:{productName:a}};this.getInbounds=function(){var t=this;if(!this._getInboundsDeferred){this._getInboundsDeferred=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getSiteWithoutPersonalization()}).then(function(r){var s=r._version&&e(r._version).getMajor()===3?"sap/ushell/adapters/cdm/v3/utilsCdm":"sap/ushell/utils/utilsCdm";sap.ui.require([s],function(e){var s=e.formatSite(r)||[];t._getInboundsDeferred.resolve(s)})},function(e){t._getInboundsDeferred.reject(e)})}return this._getInboundsDeferred.promise()};this._createSIDMap=function(e){return Object.keys(e).sort().reduce(function(t,r){var s=e[r];var n="SID("+s.systemId+"."+s.client+")";if(!t.hasOwnProperty(n)&&s.hasOwnProperty("systemId")&&s.hasOwnProperty("client")){t[n]=r}return t},{})};this._getSystemAliases=function(){var e=this;if(!this.oSystemAliasesDeferred){this.oSystemAliasesDeferred=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getSiteWithoutPersonalization()}).then(function(r){var s=t({},r.systemAliases||{});Object.keys(s).forEach(function(e){s[e].id=e});e.oSystemAliasesDeferred.resolve(s)},function(t){e.oSystemAliasesDeferred.reject(t)})}return this.oSystemAliasesDeferred.promise()};this.resolveSystemAlias=function(e){var s=new jQuery.Deferred,n=this;this._getSystemAliases().done(function(i){var o,a;if(i.hasOwnProperty(e)){a=i[e];if(e===""){a.properties=t({},n._oLocalSystemAlias.properties,a.properties||{})}s.resolve(a);return}if(e===""){s.resolve(n._oLocalSystemAlias);return}e=e.toUpperCase(e);if(!n._oSIDMap){n._oSIDMap=n._createSIDMap(i)}if(n._oSIDMap.hasOwnProperty(e)){var u=i[n._oSIDMap[e]];s.resolve(u);return}o="Cannot resolve system alias "+e;r.warning(o,"The system alias cannot be found in the site response","sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter");s.reject(o)}).fail(function(e){s.reject(e)});return s.promise()};this.getContentProviderDataOriginsLookup=function(){var e=this;if(!this.oContentProviderDataOriginsDeferred){this.oContentProviderDataOriginsDeferred=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getSiteWithoutPersonalization()}).then(function(r){var s=null;if(r.contentProviderDataOrigins){s=t({},r.contentProviderDataOrigins)}e.oContentProviderDataOriginsDeferred.resolve(s)},function(t){e.oContentProviderDataOriginsDeferred.reject(t)})}return this.oContentProviderDataOriginsDeferred.promise()}};return s},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/CommonDataModelAdapter", ["sap/base/Log","sap/base/util/extend","sap/base/util/UriParameters","sap/base/util/Version","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery"],function(e,t,i,n,o,jQuery){"use strict";var r=function(e,t,i){this.oAdapterConfiguration=i;if(i&&i.config&&i.config.siteData){this.oCdmSiteDataRequestPromise=(new jQuery.Deferred).resolve(i.config.siteData)}else if(i&&i.config&&i.config.siteDataPromise){this.oCdmSiteDataRequestPromise=i.config.siteDataPromise}else{var n=this._identifySiteUrlFromConfig(i);var o=this._normalizeUrl(n,location.href);this.oCdmSiteDataRequestPromise=this._requestSiteData(o)}};r.prototype._requestSiteData=function(t){var i=new jQuery.Deferred;if(!t){return i.reject("Cannot load site: configuration property 'siteDataUrl' is missing for CommonDataModelAdapter.")}jQuery.ajax({type:"GET",dataType:"json",url:t}).done(function(e){i.resolve(e)}).fail(function(t){e.error(t.responseText);i.reject("CDM Site was requested but could not be loaded.")});return i.promise()};r.prototype._normalizeUrl=function(e,t){if(typeof e!=="string"){return e}if(e.indexOf("http")===0){return e}var i=document.getElementsByTagName("base")[0];return new o(e,i).absoluteTo(t).toString()};r.prototype.getSite=function(){var e=new jQuery.Deferred;this.oCdmSiteDataRequestPromise.done(function(i){var n=t({},i);delete n.personalization;e.resolve(n)}).fail(function(t){e.reject(t)});return e.promise()};r.prototype.getPersonalization=function(){var i=new jQuery.Deferred,n=this;this.oCdmSiteDataRequestPromise.done(function(o){var r=t({},o),a=r._version,s;if(n.oAdapterConfiguration&&n.oAdapterConfiguration.config&&n.oAdapterConfiguration.config.ignoreSiteDataPersonalization){delete r.personalization}if(r.personalization){s=r.personalization._version;if(Object.keys(r.personalization).length>0&&!n._isPersonalizationVersionValid(a,s)){e.error("Personalization version is not compatible to the site version and will not be loaded."+" Please proceed to personalize the homepage again if needed. Personalization version: "+s+"; Site version: "+a);i.resolve();return}i.resolve(r.personalization)}else{n._readPersonalizationDataFromStorage(a).done(function(t){s=t._version;if(Object.keys(t).length>0&&!n._isPersonalizationVersionValid(a,s)){e.error("Personalization version is not compatible to the site version and will not be loaded."+" Please proceed to personalize the homepage again if needed. Personalization version: "+s+"; Site version: "+a);i.resolve();return}i.resolve(t)}).fail(function(e){i.reject(e)})}}).fail(function(e){i.reject(e)});return i.promise()};r.prototype._isPersonalizationVersionValid=function(e,t){if(!e){return false}var i=new n(e).getMajor(),o=new n(t);if(i>=3){return o.getMajor()===i}return o.getMajor()<3};r.prototype.setPersonalization=function(t){var i=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Personalization").then(function(o){var r,a={keyCategory:o.constants.keyCategory.FIXED_KEY,writeFrequency:o.constants.writeFrequency.LOW,clientStorageAllowed:true},s={container:"sap.ushell.cdm.personalization",item:"data"},l=new n(t.version);if(l.inRange("3.1.0","4.0.0")){s={container:"sap.ushell.cdm3-1.personalization",item:"data"}}var u=o.getPersonalizer(s,a,r);u.setPersData(t).done(function(){e.info("Personalization data has been stored successfully.");i.resolve()}).fail(function(){i.reject("Writing personalization data failed.")})});return i.promise()};r.prototype._readPersonalizationDataFromStorage=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Personalization").then(function(i){var o={keyCategory:i.constants.keyCategory.FIXED_KEY,writeFrequency:i.constants.writeFrequency.LOW,clientStorageAllowed:true};var r={container:"sap.ushell.cdm.personalization",item:"data"};if(e){var a=new n(e);if(a&&a.inRange("3.1.0","4.0.0")){r={container:"sap.ushell.cdm3-1.personalization",item:"data"}}}i.getPersonalizer(r,o).getPersData().done(function(e){t.resolve(e||{})}).fail(function(){t.reject("Fetching personalization data failed.")})});return t.promise()};r.prototype._identifySiteUrlFromConfig=function(e){var t=i.fromQuery(window.location.search);var n=t.get("sap-ushell-cdm-site-url");var o=e&&e.config;if(o&&!o.allowSiteSourceFromURLParameter&&n){n=null}if(o&&!n){n=o.siteDataUrl||o.cdmSiteUrl}this.sCdmSiteUrl=n;return n};return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/ConfigurationDefaultsAdapter", ["sap/ushell/bootstrap/cdm/cdm.constants","sap/base/util/deepClone"],function(e,t){"use strict";return function(){this.getDefaultConfig=function(){return Promise.resolve(t(e.defaultConfig))}}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/ContainerAdapter", ["sap/base/Log","sap/base/util/extend","sap/base/util/ObjectPath","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/ushell/System","sap/ushell/User","sap/ushell/utils"],function(e,t,r,i,jQuery,o,s,n){"use strict";var a=e.getLogger("sap/ushell/adapters/cdm/ContainerAdapter",e.Level.INFO);var u=function(u,l,f){var c="/sap/public/bc/icf/logoff",d=P(f.config,c),m=r.get("systemProperties.logoutMethod",f.config)||"GET",p=r.get("systemProperties.csrfTokenUrl",f.config),g=v(f.config),h=b(u,f.config),y=w(f.config);function P(e,t){if(e.systemProperties&&e.systemProperties.logoutUrl){return e.systemProperties.logoutUrl}return t}function v(e){var t,r=e.userProfile;if(r){t=T(r.defaults,e.userProfilePersonalization,r.metadata)}return new s(t||R())}function b(e,t){var r=t.systemProperties,i=e.getAlias(),s=e.getPlatform(),n=e.getBaseUrl(),a,u,l,f,c,d,m;if(r){i=r.alias||i;s=r.platform||s;a=r.SID;u=r.client;l=r.productName;f=r.productVersion;c=r.systemName;d=r.systemRole;m=r.tenantRole}return new o({alias:i,platform:s,baseUrl:n,system:a,client:u,productName:l,productVersion:f,systemName:c,systemRole:d,tenantRole:m})}function T(e,r,i){var o=t(R(),e,r);o.bootTheme=o.bootTheme||{theme:o.theme,root:""};delete o.theme;if(i){if(i.editablePropterties){o.setThemePermitted=i.editablePropterties.indexOf("theme")>-1;o.setAccessibilityPermitted=i.editablePropterties.indexOf("accessibility")>-1;o.setContentDensityPermitted=i.editablePropterties.indexOf("contentDensity")>-1}if(i.ranges){o.ranges=i.ranges}}return o}function R(){return{setThemePermitted:false,setAccessibilityPermitted:false,setContentDensityPermitted:false}}function w(e){var t=e&&e.systemProperties&&e.systemProperties.sessionKeepAlive;if(!t){return null}if(!t.url){a.error("Mandatory parameter 'url' missing in 'sessionKeepAlive' configuration.");return null}if(t.method!=="HEAD"&&t.method!=="GET"){t.method="HEAD"}return t}this._getLogoutUrl=function(){return d};this._setDocumentLocation=function(e){document.location=e};this._setWindowLocation=function(e){window.location.href=e};this.getSystem=function(){return h};this.getUser=function(){return g};this.load=function(){return jQuery.when()};this.getCurrentUrl=function(){return window.location.href};this.logout=function(e){var t;if(!e){throw new Error("Not implemented")}if(n.hasNativeLogoutCapability()){t=new i(this._getLogoutUrl()).absoluteTo(this.getCurrentUrl()).search("").toString();n.getPrivateEpcm().doLogOff(t)}else{return this.logoutRedirect()}return jQuery.when()};this.logoutRedirect=function(){var t=h.adjustUrl(this._getLogoutUrl()),r=new jQuery.Deferred,i=this;if(m==="POST"){e.info("performing logout from system via POST",undefined,"sap.ushell.adapters.cdm.ContainerAdapter::logoutRedirect");jQuery.ajax({type:"HEAD",url:p,headers:{"X-CSRF-Token":"Fetch"},success:function(o,s,n){jQuery.ajax({type:"POST",url:t,headers:{"X-CSRF-Token":n.getResponseHeader("X-CSRF-Token")},success:function(e){i._setWindowLocation(e);r.resolve()},error:function(){e.error("Logging out via POST failed",undefined,"sap.ushell.adapters.cdm.ContainerAdapter::logoutRedirect");r.resolve()}})},error:function(){e.error("fetching X-CSRF-Token for logout via POST failed for system: "+h.getAlias(),undefined,"sap.ushell.adapters.cdm.ContainerAdapter::logoutRedirect");r.resolve()}})}else{e.info("performing logout from system via GET (redirect)",undefined,"sap.ushell.adapters.cdm.ContainerAdapter::logoutRedirect");this._setDocumentLocation(t);r.resolve()}return r.promise()};this.sessionKeepAlive=function(){if(!y){return}var e=new XMLHttpRequest;e.open(y.method,y.url,true);e.onreadystatechange=function(){if(this.readyState===4){a.debug("Server session was extended")}};e.send()};this._getSessionKeepAliveConfig=function(){return y}};return u},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/LaunchPageAdapter", ["sap/ushell/adapters/cdm/_LaunchPage/readHome","sap/ushell/adapters/cdm/_LaunchPage/modifyHome","sap/ushell/adapters/cdm/_LaunchPage/readCatalogs","sap/m/GenericTile","sap/m/library","sap/ui/core/ComponentContainer","sap/ushell/adapters/cdm/_LaunchPage/uri.transform","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/navigationMode","sap/ushell/resources","sap/ushell/utils","sap/ushell/utils/utilsCdm","sap/ushell/utils/WindowUtils","sap/ushell/utils/UrlParsing","sap/ushell/components/tiles/utils","sap/base/util/Version","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/UI5ComponentType"],function(e,t,i,r,n,o,s,a,l,u,f,c,d,p,h,g,m,v,jQuery,T,R,_,b,C,S){"use strict";var y=n.GenericTileMode;var I=C.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter"),D=C.Level;function j(n,j,w){var G,k="sap.ushell.components.tiles.cdm.applauncher",L="sap.ushell.components.tiles.cdm.applauncherdynamic";this._mResolvedTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("CommonDataModel")]).then(function(e){this.oURLParsingService=e[0];this.oCDMService=e[1]}.bind(this));this.getCdmVersionsSupported=function(){return{min:m("0"),max:m("2.0.0")}};this.isSiteSupported=function(e){if(!!e._version&&m(e._version).compareTo(this.getCdmVersionsSupported().max)>0){C.fatal("Invalid CDM site version: Only sites up to version 2.0.0 are supported");return false}return true};this.TileType={Tile:"tile",Link:"link"};this.getGroups=function(){var e=new jQuery.Deferred;this._assureLoaded().done(function(t){c.setPerformanceMark("FLP - homepage groups processed");e.resolve(t)}).fail(function(){e.resolve([])});return e.promise()};this._getTileFromHashInContextOfSite=function(e,t,i){var r=new jQuery.Deferred,n=t[i];if(!n){n=e(i);t[i]=n}n.done(function(e){var t={tileIntent:i,tileResolutionResult:e};r.resolve(t)}).fail(function(e){r.reject("Hash '"+i+"' could not be resolved to a tile. "+e)});return r.promise()};this._getTileFromHash=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(i){var r=i.resolveTileIntent.bind(i);this._getTileFromHashInContextOfSite(r,this._mCatalogTilePromises,e).done(t.resolve).fail(t.reject)}.bind(this));return t.promise()};this._getTileForUrl=function(e){var t=e.indicatorDataSource?"#Shell-dynamicTile":"#Shell-staticTile";return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:t,isCustomTile:false}}};this._assureGroupItemsResolved=function(e,t){var i=[],r,n;if(e.payload&&e.payload.tiles){r=this._assureGroupTilesResolved(e.payload.tiles,t);Array.prototype.push.apply(i,r)}if(e.payload&&e.payload.links){n=this._assureGroupLinksResolved(e.payload.links,t);Array.prototype.push.apply(i,n)}return i};this._assureGroupTilesResolved=function(e,t){return(e||[]).map(function(e,i){return this._resolveGroupTile(e,t).then(function(e){e.isLink=false;return e})},this)};this._assureGroupLinksResolved=function(e,t){return(e||[]).map(function(e){return this._resolveGroupTile(e,t).then(function(e){e.isLink=true;return e})},this)};this._resolveGroupTile=function(e,t){var i=this._mResolvedTiles;var r=this._mFailedResolvedTiles;var n;function o(t){i[e.id]=t;if(r[e.id]){delete r[e.id]}return t}function s(e){var t=e.target;return t&&t.semanticObject==="Shell"&&t.action==="launchURL"}if(i[e.id]){return(new jQuery.Deferred).resolve(i[e.id]).promise()}if(e.target&&e.target.url){n=jQuery.when(this._getTileForUrl(e))}else if(e.isBookmark){n=this._resolveTileByIntent(e,t)}else if(s(e)){n=this._resolveTileByIntent(e,t)}else{n=this._resolveTileByAppId(e,t)}n.done(function(e){o(e)}).fail(function(t){r[e.id]=t});return n};this._resolveTileByAppId=function(e,t){var i,r,n,o,s;function l(e,t){return(new jQuery.Deferred).reject({logLevel:e,message:t}).promise()}if(!R(e)){return l(D.ERROR,"Cannot resolve tile: oTile must be an object")}if(!R(t)){return l(D.ERROR,"Cannot resolve tile: oSite must be an object")}i=e.appId||e.appIDHint;if(!i){return l(D.ERROR,["Cannot resolve tile '",e.id,"': either appId or appIDHint must be specified"].join(""))}r=t.applications&&t.applications[i];if(!r){return l(D.INFO,["Tile '",e.id,"' filtered from result: no app found for appId '",i,"' (dangling app reference)"].join(""))}n=this._getFirstInbound(r);if(!n){return l(D.ERROR,["Cannot resolve tile '",e.id,"': app '",i,"' has no navigation inbound"].join(""))}var f=d.mapOne(n.key,n.inbound,r),c=f.resolutionResult.applicationType,p=f.resolutionResult.additionalInformation,h=a.last("/core/navigation/enableInPlaceForClassicUIs"),g=h?h[c]:false;o=f.tileResolutionResult;o.navigationMode=u.computeNavigationModeForHomepageTiles(c,p,g);o.isLink=false;if(!this._isFormFactorSupported(o)){return l(D.INFO,["Tile '",e.id,"' filtered from result: form factor not supported"].join(""))}s=this._toHashFromInbound(n.inbound);return jQuery.when({tileResolutionResult:o,tileIntent:s})};this._isFormFactorSupported=function(t){var i=c.getFormFactor();return e.supportsFormFactor(t,i)};this._getFirstInbound=function(e){var t=Object.keys(e["sap.app"].crossNavigation.inbounds).shift(),i=e["sap.app"].crossNavigation.inbounds[t];return{key:t,inbound:i}};this._resolveTileByIntent=function(e,t){var i=this._prepareTileHash(e);return this._getTileFromHash(i)};this._prepareTileHash=function(e){var t={},i,r;if(this._isCatalogTile(e)){return e.tileIntent}if(this._isGroupTile(e)&&e.target){r=e.target.parameters||[];r.forEach(function(e){if(e.name&&e.value){t[e.name]=[e.value]}});i={target:{semanticObject:e.target.semanticObject,action:e.target.action},params:t,appSpecificRoute:e.target.appSpecificRoute};return"#"+h.constructShellHash(i)}return undefined};this._allPromisesDone=function(e){var t=new jQuery.Deferred,i;if(e.length===0){t.resolve([])}else{var r=e.map(function(e){i=new jQuery.Deferred;e.always(i.resolve.bind(i));return i.promise()});jQuery.when.apply(this,r).done(function(){var e=Array.prototype.slice.call(arguments);t.resolve(e)})}return t.promise()};this._assureLoaded=function(){var i=this,r;if(this._assureLoadedDeferred){return this._assureLoadedDeferred.promise()}r=new jQuery.Deferred;this._assureLoadedDeferred=r;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(r){r.getSite().done(function(r){if(!i.isSiteSupported(r)){throw new Error("Invalid CDM site version: Check configuration of launchpage adapter and version of FLP site")}var n=[];var o=e.getGroupsArrayFromSite(r);var s=e.getDefaultGroup(o);if(!s){s=t.createDefaultGroup(c.generateUniqueId(e.getGroupIdsFromSite(r)));r=t.addGroupToSite(r,s,0);o=e.getGroupsArrayFromSite(r)}G=s;o.forEach(function(e){n=i._assureGroupItemsResolved(e,r).concat(n)});i._allPromisesDone(n).done(function(){i._assureLoadedDeferred.resolve(o);delete i._assureLoadedDeferred;i._logTileResolutionFailures(i._mFailedResolvedTiles)})}).fail(function(e){C.error("Delivering homepage groups failed - "+e);i._assureLoadedDeferred.resolve([]);delete i._assureLoadedDeferred})});return r.promise()};this._logTileResolutionFailures=function(e){var t={};if(!e){return}Object.keys(D).filter(function(e){var t=D[e];return t>=D.FATAL&&t<=D.ALL}).forEach(function(e){t[D[e]]=""});Object.keys(e).forEach(function(i){var r=e[i];if(r.logLevel){t[r.logLevel]=t[r.logLevel].concat(r.message).concat("\n")}});if(t[D.FATAL]){I.fatal(t[D.FATAL])}if(t[D.ERROR]){I.error(t[D.ERROR])}if(t[D.WARNING]){I.warning(t[D.WARNING])}if(t[D.INFO]){I.info(t[D.INFO])}if(t[D.DEBUG]){I.debug(t[D.DEBUG])}if(t[D.TRACE]){I.trace(t[D.TRACE])}};this.getDefaultGroup=function(){var e=new jQuery.Deferred,t;if(!G){t=this._assureLoaded()}if(t){t.done(function(){e.resolve(G)}).fail(function(t){e.reject("Failed to access default group. "+t)})}else{e.resolve(G)}return e.promise()};this._isValidTitle=function(e){if(typeof e!=="string"||!e){return false}return true};this._isGroupPreset=function(t){return e.isGroupPreset(t)};this._isGroupLocked=function(t){return e.isGroupLocked(t)};this.addGroup=function(i){var r=new jQuery.Deferred,n=this.oCDMService,o,s,a=this;if(!this._isValidTitle(i)){return r.reject("No valid group title").promise()}s="Failed to add the group with title '"+i+"' to the homepage. ";n.getSite().done(function(s){o=c.generateUniqueId(e.getGroupIdsFromSite(s));t.addGroupToSite(s,t.createEmptyGroup(o,i));n.save().done(function(){delete a._assureLoadedDeferred;r.resolve(s.groups[o],o)}).fail(function(e){r.reject(e)})}).fail(function(e){r.reject(s+e)});return r.promise()};this.getGroupTitle=function(t){return e.getGroupTitle(t)};this.setGroupTitle=function(i,r){var n=this,o=new jQuery.Deferred,s=this.oCDMService,a,l;if(typeof i!=="object"||!e.getGroupId(i)){return o.reject("Unexpected group value").promise()}if(!n._isValidTitle(r)){return o.reject("Unexpected oGroup title value").promise()}l="Failed to set new title for group with id '"+e.getGroupId(i)+"'. ";a=e.getGroupTitle(i);s.getSite().done(function(e){if(i){t.setGroupTitle(i,r)}s.save().done(function(){o.resolve()}).fail(function(e){C.error(e);o.reject(a)})}).fail(function(e){o.reject(a,l+e)});return o.promise()};this.getGroupId=function(t){return e.getGroupId(t)};this.hideGroups=function(i){var r=new jQuery.Deferred,n=this.oCDMService,o;if(i&&Array.isArray(i)){o="Failed to hide group. ";n.getSite().done(function(o){e.getGroupsArrayFromSite(o).forEach(function(r){t.setGroupVisibility(r,i&&Array.prototype.indexOf.call(i,e.getGroupId(r))===-1)});n.save().done(function(){r.resolve()}).fail(function(e){r.reject("Hiding of groups did not work as expected - "+e)})}).fail(function(e){r.reject(o+e)})}else{r.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.")}return r.promise()};this.isGroupVisible=function(t){return e.isGroupVisible(t)};this.moveGroup=function(i,r){var n=new jQuery.Deferred,o=this.oCDMService,s,a;if(!i||!e.getGroupId(i)||r<0){return n.reject("Unable to move groups - invalid parameters").promise()}a="Failed to move group with id '"+i.identification.id+"'. ";o.getSite().done(function(a){var l=e.getGroupIdsFromSite(a),u=e.getGroupId(i);if(!l){return n.reject("groupsOrder not found - abort operation of adding a group.")}else if(l.indexOf(u)===r){return n.resolve()}s=c.moveElementInsideOfArray(l,l.indexOf(u),r);if(!s){return n.reject("invalid move group operation - abort.")}t.setGroupsOrder(a,s);o.save().done(function(){n.resolve()}).fail(function(e){n.reject(e)});return undefined}).fail(function(e){n.reject(a+e)});return n.promise()};this.removeGroup=function(i){var r=new jQuery.Deferred,n=this.oCDMService,o,s;if(typeof i!=="object"){return r.reject("invalid group parameter").promise()}s=e.getGroupId(i);if(!s){return r.reject("group without id given").promise()}o="Failed to remove group with id '"+s+"'. ";n.getSite().done(function(e){t.removeGroupFromSite(e,i);n.save().done(function(){r.resolve()}).fail(function(e){r.reject(e)})}).fail(function(e){r.reject(o+e)});return r.promise()};this.resetGroup=function(i){var r=new jQuery.Deferred,n=this.oCDMService,o=[],s=this,a,l;if(typeof i==="object"&&e.getGroupId(i)){l=e.getGroupId(i);a="Failed to reset group with id '"+l+"'. ";n.getSite().done(function(a){T(o,e.getGroupsArrayFromSite(a));if(s.isGroupRemovable(i)===false){n.getGroupFromOriginalSite(l).done(function(i){if(typeof a==="object"&&e.getGroupFromSite(a,l)){t.overwriteGroup(a,i,l)}n.save().done(function(){r.resolve(i)}).fail(function(e){r.reject("Group could not be reset - "+e,o)})}).fail(function(e){r.reject("Group could not be reset - "+e,o)})}else{r.reject("Group could not be reset as it was created by the user",o)}}).fail(function(e){r.reject(a+e,[])})}return r.promise()};this.getTileTitle=function(t){return e.getTileTitle(this._mResolvedTiles,t)};this.getTileSubtitle=function(t){return e.getTileSubtitle(this._mResolvedTiles,t)};this.getTileIcon=function(t){return e.getTileIcon(this._mResolvedTiles,t)};this.getTileInfo=function(t){return e.getTileInfo(this._mResolvedTiles,t)};this.getTileIndicatorDataSource=function(e){var t=this._mResolvedTiles[e.id],i={},r;if(e.indicatorDataSource){i.indicatorDataSource=T({},e.indicatorDataSource);if(e.dataSource){i.dataSource=T({},e.dataSource)}return i}if(!t){return i}r=t.tileResolutionResult;if(r.indicatorDataSource){i.indicatorDataSource=T({},r.indicatorDataSource);if(r.indicatorDataSource.hasOwnProperty("dataSource")){var n=r.indicatorDataSource.dataSource,o=r.dataSources;if(o&&o.hasOwnProperty(n)){i.dataSource=T({},o[n])}else{C.warning("datasource referenced but not found for tile: "+t.tileIntent)}}if(c.getMember(r,"runtimeInformation.componentProperties.url")){var a=c.getMember(i,"indicatorDataSource.path");var l=c.getMember(i,"dataSource.uri");var u=c.getMember(r,"runtimeInformation.componentProperties.url");var f=s(a,l,u,this.getWindowLocationHref());if(!f.error){if(a){i.indicatorDataSource.path=f.uri}if(l){i.dataSource.uri=f.uriParent}}}}return i};this.getWindowLocationHref=function(){return window.location.href};this.isGroupRemovable=function(e){return!this._isGroupPreset(e)};this.isGroupLocked=function(e){return this._isGroupLocked(e)};this.getGroupTiles=function(t){return e.getGroupTiles(t).concat(e.getGroupLinks(t))};this.getLinkTiles=function(t){return e.getGroupLinks(t)};this.getTileType=function(t){if(e.isLink(this._mResolvedTiles,t)){return this.TileType.Link}return this.TileType.Tile};this.getTileId=function(t){return e.getTileId(t)};this.getTileSize=function(t){return e.getTileSize(this._mResolvedTiles,t)||"1x1"};this.getTileTarget=function(t){var i,r=e.getTileId(t),n=this._mResolvedTiles[r],o;if(t.target&&t.target.url){return t.target.url}if(n&&n.tileResolutionResult){i=n.tileResolutionResult;if(i.isCustomTile!==true){return n.tileIntent}if(i&&typeof i.targetOutbound==="object"){o=this._toHashFromOutbound(i.targetOutbound);if(o){return o}}}C.warning("Could not find a target for Tile with id '"+r+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return""};this.isLinkPersonalizationSupported=function(e){return true};this.isTileIntentSupported=function(e){return this._mFailedResolvedTiles[e.id]===undefined};this._notifyTileAboutRefresh=function(e){if(typeof e.tileRefresh==="function"){e.tileRefresh()}};this.refreshTile=function(e){var t=this._mResolvedTiles[e.id];if(t){if(t.tileComponent){this._notifyTileAboutRefresh(t.tileComponent)}}};this._notifyTileAboutVisibility=function(e,t,i){if(typeof e.tileSetVisible==="function"&&i!==t){e.tileSetVisible(t)}};this.setTileVisible=function(e,t){var i=this._mResolvedTiles[e.id];if(i){if(i.tileComponent){this._notifyTileAboutVisibility(i.tileComponent,t,i.visibility)}i.visibility=t}};this.getTileView=function(e){var t=this;return new jQuery.Deferred(function(i){return t._getTileView(e,false).then(function(e){i.resolve(e)},function(t){var r="Tile with ID '"+e.id+"' could not be initialized"+(t?":\n"+t:".");C.error(r,null,e.tileType);i.reject(r)})}).promise()};this._getTileUiComponentContainerSync=function(e,t,i){var n=this,s,a,l,u,c={};if(i===true){a=n._createTileComponentData(e,true,t)}else{a=n._createTileComponentData(e,false,t)}s=t.tileResolutionResult;if(t.isLink){l=s.navigationMode;return n._createLinkInstance(e,i,l,r,f)}if(typeof s.tileComponentLoadInfo==="string"){if(a.properties.indicatorDataSource&&a.properties.indicatorDataSource.path){c.name="sap.ushell.components.tiles.cdm.applauncherdynamic"}else{c.name="sap.ushell.components.tiles.cdm.applauncher"}}else if(typeof s.tileComponentLoadInfo==="object"&&s.tileComponentLoadInfo!==null){c=s.tileComponentLoadInfo.componentProperties||{};c.name=s.tileComponentLoadInfo.componentName}c.componentData=a;if(c.manifest){c.componentData.properties=c.componentData.properties||{};c.componentData.properties.manifest=c.manifest}if(c.name){c.async=false;var d;try{u=sap.ui.component(c)}catch(e){C.error(e.message+"\n-- An error occurred while instantiating "+"the tile component for "+c.name,e.stack?e.stack:"","sap.ushell.adapters.cdm.LaunchPageAdapter");return null}d=new o({component:u,height:"100%"});if(!i){n._mResolvedTiles[e.id].tileComponent=u}return d}return null};this._getTileUiComponentContainer=function(e,t,i){var n=this,s,a,u,c,d,p,h=new jQuery.Deferred;if(i===true){a=n._createTileComponentData(e,true,t)}else{a=n._createTileComponentData(e,false,t)}s=t.tileResolutionResult;if(t.isLink){u=s.navigationMode;h.resolve(n._createLinkInstance(e,i,u,r,f));return h.promise()}var g=this._createTileComponentProperties(a,s.tileComponentLoadInfo);if(!g.name){return h.reject("Cannot find name of tile component for tile with id: '"+e.id+"'").promise()}if(g.manifest){a.properties=a.properties||{};a.properties.manifest=g.manifest}p=this.isCustomTile(g.name);var m=function(t){var r;c=t.componentHandle.getInstance();d=new o({component:c,height:"100%"});if(!i){r=n._mResolvedTiles[e.id];r.tileComponent=c;if(typeof r.visibility==="boolean"){n._notifyTileAboutVisibility(c,r.visibility)}}return d};var v=function(e){return e.createComponent({loadCoreExt:p,loadDefaultDependencies:false,componentData:a,url:g.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:g,ui5ComponentName:g.name},{},[],S.Visualization).then(m)};var T=function(){var e={componentData:a,url:g.url,name:g.name,async:false};c=sap.ui.component(e);var t={componentHandle:{getInstance:function(){return c}}};return m(t)};if(p){l.once("CoreResourcesComplementLoaded").do(function(){sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(e){v(e).then(function(e){h.resolve(e)}).fail(function(e){h.reject(e)})})})}else{var R=T();h.resolve(R)}return h.promise()};this._createTileComponentProperties=function(e,t){var i={};if(typeof t==="string"){if(e.properties.indicatorDataSource&&e.properties.indicatorDataSource.path){i.name=L}else{i.name=k}return i}if(typeof t==="object"&&t!==null){i=t.componentProperties||{};i.name=t.componentName}return i};this._getTileView=function(e){var t,i,r=new jQuery.Deferred;if(typeof e!=="object"||!e.id){i="Invalid input parameter passed to _getTileView: "+e;C.error(i);return r.reject(i).promise()}t=this._mResolvedTiles[e.id];if(t){return this._getTileUiComponentContainer(e,t,false)}i="No resolved tile found for tile ID: "+e.id;C.error(i);return r.reject(i).promise()};this._getCatalogTileView=function(e){if(typeof e!=="object"){throw new Error(e)}return this._getTileUiComponentContainerSync(e,e,true)};this._getCatalogTileViewControl=function(e){var t=new jQuery.Deferred;if(typeof e!=="object"){var i="Invalid input parameter passed to _getCatalogTileView: "+e;C.error(i);return t.reject(i).promise()}return this._getTileUiComponentContainer(e,e,true)};this._createTileComponentData=function(e,t,i){var r=t?this.getCatalogTileTitle(e):this.getTileTitle(e),n=t?this.getCatalogTilePreviewSubtitle(e):this.getTileSubtitle(e),o=t?this.getCatalogTilePreviewIcon(e):this.getTileIcon(e),s=t?this.getCatalogTilePreviewInfo(e):this.getTileInfo(e),a=t?this.getCatalogTileTargetURL(e):this.getTileTarget(e),l=this.getTileIndicatorDataSource(e),u={properties:{},startupParameters:{}};if(i.tileResolutionResult.isCustomTile===true&&i.tileResolutionResult.startupParameters){u.startupParameters=i.tileResolutionResult.startupParameters}if(r){u.properties.title=r}if(s){u.properties.info=s}if(n){u.properties.subtitle=n}if(o){u.properties.icon=o}if(a){u.properties.targetURL=a}if(l.indicatorDataSource){u.properties.indicatorDataSource=l.indicatorDataSource;if(l.dataSource){u.properties.dataSource=l.dataSource}}if(i.tileResolutionResult){u.properties.navigationMode=i.tileResolutionResult.navigationMode}return u};this._createLinkInstance=function(e,t,i,r,n){var o,s,a,l=this.getTileSubtitle(e);var u=r;if(t===true){o=this.getCatalogTileTitle(e)}else{o=this.getTileTitle(e)}s=new u({mode:y.LineMode,subheader:l,header:o,url:p.getLeanURL(this.getTileTarget(e)),press:function(t){this._genericTilePressHandler(e,t)}.bind(this)});if(i){a=n.i18n.getText(i+"NavigationMode");s.setAriaLabel(a+" "+o+" "+l)}this._mResolvedTiles[e.id].linkTileControl=s;return s};this._genericTilePressHandler=function(e,t){var i;if(t.getSource().getScope&&t.getSource().getScope()==="Display"){i=this.getTileTarget(e);if(i){if(i[0]==="#"){hasher.setHash(i)}else{p.openURL(i,"_blank")}}}};this._addTileToSite=function(e,t,i,r){var n=this,o=new jQuery.Deferred,s=h.parseShellHash(i.properties.targetURL),a={id:n.getTileId(i),target:{semanticObject:s.semanticObject,action:s.action,parameters:x(s.params)}};e.groups[t.identification.id].payload.tiles.push(a);r.save().done(function(){o.resolve(a)}).fail(function(e){o.reject(e)});return o.promise()};this.addTile=function(e,t){var i=new jQuery.Deferred,r,n=this.oCDMService,o;if(!t){t=G}o=P();o.appId=e.tileResolutionResult.appId;this._mResolvedTiles[o.id]={tileIntent:e.tileIntent,tileResolutionResult:e.tileResolutionResult,isLink:false};n.getSite().done(function(e){e.groups[t.identification.id].payload.tiles.push(o);n.save().done(function(){i.resolve(o)}).fail(function(e){i.reject(e)})}).fail(function(e){r="Failed to add tile with id '"+o.id+"' to group with id '"+t.identification.id+"'. ";i.reject(r+e)});return i.promise()};this.removeTile=function(e,t,i){var r=this.oCDMService,n,o=new jQuery.Deferred,s=this;if(!e||typeof e!=="object"||!e.identification||!e.identification.id||!t||typeof t!=="object"||!t.id){return o.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise()}n="Failed to remove tile with id '"+t.id+"' from group with id '"+e.identification.id+"'. ";r.getSite().done(function(a){var l,u;i=+i;try{l=a.groups[e.identification.id].payload}catch(t){o.reject(a.groups[e.identification.id],n)}u=s.getTileType(t)===s.TileType.Link?"links":"tiles";if(s.getTileType(t)===s.TileType.Link){i-=l.tiles.length}if(i>=0){l[u].splice(i,1)}else{l[u]=l[u].filter(function(e){return e.id!==t.id})}r.save().done(function(){o.resolve()}).fail(function(t){C.error(t);o.reject(a.groups[e.identification.id],t)})}).fail(function(e){o.reject({},n+e)});return o.promise()};this.moveTile=function(e,t,i,r,n,o){var s=new jQuery.Deferred,a=this.oCDMService,l=this,u;if(!e||_(e)||t===undefined||t<0||i===undefined||i<0||!r||!r.identification||!r.identification.id||!n||!n.identification||!n.identification.id){return s.reject("Invalid input parameters").promise()}u="Failed to move tile with id '"+e.id+"'. ";a.getSite().done(function(f){var c,d,p=l.getTileType(e)===l.TileType.Link?"links":"tiles";if(!o){o=l._mResolvedTiles[e.id].isLink?"link":"tile"}c=o==="link"?"links":"tiles";if(p!==c&&l._mResolvedTiles[e.id]){l._mResolvedTiles[e.id].isLink=o==="link"}if(c==="links"){i-=f.groups[n.identification.id].payload.tiles.length}if(p==="links"){t-=f.groups[r.identification.id].payload.tiles.length}if(r.identification.id===n.identification.id){if(t!==i||p!==c){d=f.groups[n.identification.id].payload;d[p].splice(t,1);d[c].splice(i,0,e)}else{return s.resolve(e).promise()}}else{f.groups[r.identification.id].payload[p].splice(t,1);f.groups[n.identification.id].payload[c].splice(i,0,e)}a.save().done(function(){s.resolve(e)}).fail(function(e){C.error(u+e);s.reject(u+e)});return undefined}).fail(function(e){C.error(u+e);s.reject(u+e)});return s.promise()};this._compareCatalogs=function(e,t){if(e.identification.id>t.identification.id){return 1}return-1};this.getCatalogs=function(){var e=this,t=new jQuery.Deferred,i=[];function r(e,t,i,r){var n=e.catalogs[t];i.push(n);r.notify(n)}sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(n){n.getSite().done(function(n){Object.keys(n.catalogs).forEach(function(e){r(n,e,i,t)});t.resolve(i.sort(e._compareCatalogs))})},0);return t.promise()};this._isStartableInbound=function(e){var t=["Shell-plugin","Shell-bootConfig"],i;if(!e.semanticObject||!e.action){return false}if(t.indexOf(e.semanticObject+"-"+e.action)>-1){return false}if(!b.get("signature.parameters",e)){return true}i=Object.keys(e.signature.parameters).every(function(t){return!e.signature.parameters[t].filter||(!!e.signature.parameters[t].launcherValue||t==="sap-external-url")});return i};this._isHiddenInbound=function(e){return!!e.hideLauncher};this._toHashFromInbound=function(e){var t=d.toHashFromInbound(e);if(!t){return undefined}return"#"+t};this._getExternalUrlFromInbound=function(e){return b.get("signature.parameters.sap-external-url.launcherValue.value",e)||null};this._toHashFromOutbound=function(e){var t=d.toHashFromOutbound(e);if(!t){return undefined}return"#"+t};this._isCustomTile=function(e){if(c.getMember(e,"sap|flp.type")==="tile"){return true}return false};this.getCatalogTiles=function(e){var t=this,i=new jQuery.Deferred;if(typeof e!=="object"||e===null){return i.reject("Invalid input parameter '"+e+"' passed to getCatalogTiles.").promise()}t.oCDMService.getSite().done(function(r){F.call(t,e,r).done(i.resolve).fail(i.reject)}).fail(function(e){i.reject("Failed to get site: "+e)});return i.promise()};this.isCustomTile=function(e){return!(e===k||e===L)};function F(e,t){var i=this,r=new jQuery.Deferred;setTimeout(function(){var n=(e.payload&&e.payload.appDescriptors||[]).reduce(function(e,r){var n=t.applications[r.id],o,s,l,f,c,p,h,g,m,v,T;if(!n){return e}o=i._getMember(n,"sap|app.crossNavigation.inbounds");if(!o||Object.keys(o).length===0){return e}l=Object.keys(o)[0];f=o[l];if(i._isStartableInbound(f)&&!i._isHiddenInbound(f)){c=d.mapOne(l,f,n);if(!c||!c.tileResolutionResult){return e}g=c.resolutionResult.applicationType;T=a.last("/core/navigation/enableInPlaceForClassicUIs");v=T?T[g]:false;m=c.resolutionResult.additionalInformation;c.tileResolutionResult.navigationMode=u.computeNavigationModeForHomepageTiles(g,m,v);p=c.tileResolutionResult;s=i._toHashFromInbound(f);h={id:s,tileIntent:s,tileResolutionResult:p,isCatalogTile:true};e.push(h)}return e},[]);r.resolve(n)},0);return r.promise()}this.getCatalogError=function(e){if(e.error){return e.error}return undefined};this.getCatalogId=function(e){return i.getCatalogId(e)};this.getCatalogTitle=function(e){return i.getCatalogTitle(e)};this._isGroupTile=function(t){return e.isGroupTile(t)};this._isCatalogTile=function(e){return!!(e&&e.isCatalogTile)};this._isFailedGroupTile=function(t){return!!(t&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[e.getTileId(t)])};this._isFailedCatalogTile=function(t){return!!(t&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[e.getTileId(t)])};this.getCatalogTileId=function(t){if(this._isGroupTile(t)){if(this._isFailedGroupTile(t)){return undefined}if(t.isBookmark&&b.get("target.url",t)){return t.target.url}return(this._mResolvedTiles[e.getTileId(t)]||{}).tileIntent}if(this._isCatalogTile(t)){return t.id}return undefined};this.getCatalogTileTitle=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return""}return this._mResolvedTiles[e.id].tileResolutionResult.title}if(this._isCatalogTile(e)){if(this._isFailedCatalogTile(e)){return undefined}return e.tileResolutionResult.title}return undefined};this.getCatalogTileSize=function(e){return e.tileResolutionResult.size||"1x1"};this.getCatalogTileView=function(e){return this._getCatalogTileView(e)};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewControl(e)};this.getCatalogTileTargetURL=function(e){if(!e){throw new Error("The given tile is falsy")}if(this._isCatalogTile(e)){if(e.tileResolutionResult&&e.tileResolutionResult.isCustomTile){if(!e.tileResolutionResult.targetOutbound){return""}return this._toHashFromOutbound(e.tileResolutionResult.targetOutbound)}return e.tileIntent||""}return this.getTileTarget(e)};this.getCatalogTilePreviewTitle=function(e){if(this._isGroupTile(e)){return this.getTileTitle(e)}return e.tileResolutionResult&&e.tileResolutionResult.title||""};this.getCatalogTilePreviewSubtitle=function(e){if(this._isGroupTile(e)){return this.getTileSubtitle(e)}return e.tileResolutionResult&&e.tileResolutionResult.subTitle||""};this.getCatalogTilePreviewIcon=function(e){if(this._isGroupTile(e)){return this.getTileIcon(e)}return e.tileResolutionResult&&e.tileResolutionResult.icon||""};this.getCatalogTilePreviewInfo=function(e){if(this._isGroupTile(e)){return this.getTileInfo(e)}return e.tileResolutionResult&&e.tileResolutionResult.info||""};this.getCatalogTileKeywords=function(e){var t=[],i=e;if(!i){C.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return t}if(this._mResolvedTiles&&this._mResolvedTiles[e.id]){i=this._mResolvedTiles[e.id]}if(i&&i.tileResolutionResult&&i.tileResolutionResult.title){t.push(i.tileResolutionResult.title)}if(i&&i.tileResolutionResult&&i.tileResolutionResult.subTitle){t.push(i.tileResolutionResult.subTitle)}return t};this._visitBookmarks=function(e,t){var i=this.oCDMService;var r;var n=h.parseShellHash(e);if(n){r=E(n)}else{r=V(e)}return i.getSite().then(function(e){var i=e.groups;var n=Object.keys(i).filter(function(e){return!i[e].payload.locked}).map(function(e){return i[e].payload.tiles.filter(function(e){return e.isBookmark&&M(r,e.target)})}).reduce(function(e,t){Array.prototype.push.apply(e,t);return e},[]);if(!t){return n.length}return jQuery.when(n.map(t)).then(function(){return n.length})})};this.addBookmark=function(e,t){var i=this;return new jQuery.Deferred(function(r){var n=i.oCDMService;jQuery.when(t||i.getDefaultGroup(),n.getSite()).done(function(t,o){var s,a,l=h.parseShellHash(e.url),u,f=false;if(!l){a=V(e.url);f=true}else{a=E(l)}s=O(e,a);if(f){u=new jQuery.Deferred;u.resolve(i._getTileForUrl(s))}else{u=i._getTileFromHash(e.url)}u.done(function(e){e.isLink=false;i._mResolvedTiles[s.id]=e;o.groups[t.identification.id].payload.tiles.push(s);n.save().done(function(){r.resolve(s)}).fail(function(e){r.reject(e)})}).fail(function(e){r.reject("Bookmark creation failed because: "+e)})}).fail(function(e){r.reject(e)})}).promise()};this.countBookmarks=function(e){return this._visitBookmarks(e)};this.updateBookmarks=function(e,t){var i=this.oCDMService;var r=this._mResolvedTiles;function n(i){return new jQuery.Deferred(function(n){var o,s;var a;var l=false;var u={};if(t.url||t.url===""){o=h.parseShellHash(t.url);if(!o){s=V(t.url)}else{s=E(o)}}if(i.icon!==t.icon){u.icon=t.icon;l=true}if(i.title!==t.title){u.title=t.title;l=true}if(i.subTitle!==t.subtitle){u.subtitle=t.subtitle;l=true}if(t.url&&e!==t.url){u.targetURL=t.url;l=true}if(i.info!==t.info){u.info=t.info;l=true}A(i,t,s);if(l&&r[i.id]){a=r[i.id].tileComponent;if(a){a.tileSetVisualProperties(u)}}n.resolve(i)}).promise()}return this._visitBookmarks(e,n).then(function(e){return i.save().then(function(){return e})})};this.deleteBookmarks=function(e){var t=this.oCDMService;var i=h.parseShellHash(e);var r;if(i){r=E(i)}else{r=V(e)}return t.getSite().then(function(e){var i=e.groups;var n=Object.keys(i).map(function(e){var t=i[e].payload;var n=0;t.tiles=t.tiles.filter(function(e){if(e.isBookmark&&M(r,e.target)){++n;return false}return true});return n}).reduce(function(e,t){e+=t;return e},0);return t.save().then(function(){return n})})};this.onCatalogTileAdded=function(e){};this._onTileSettingsSave=function(e,t){var i=new jQuery.Deferred,r,n,o,s,a,l,u;if(!e||!e.id||!t){return i.reject().promise()}n=t.oTitleInput.getValue();s=t.oSubTitleInput.getValue();o=t.oInfoInput.getValue();a=this.getTileTitle(e);l=this.getTileInfo(e);u=this.getTileSubtitle(e);if(a===n&&u===s&&l===o){return i.resolve().promise()}r={};if(a!==n){r.title=n;e.title=n}if(u!==s){r.subtitle=s;e.subTitle=s}if(l!==o){r.info=o;e.info=o}if(this._mResolvedTiles[e.id].tileComponent){this._mResolvedTiles[e.id].tileComponent.tileSetVisualProperties(r)}else if(this._mResolvedTiles[e.id].linkTileControl){if(r.title){this._mResolvedTiles[e.id].linkTileControl.setHeader(r.title)}if(r.subtitle){this._mResolvedTiles[e.id].linkTileControl.setSubheader(r.subtitle)}if(r.title||r.subtitle){this._mResolvedTiles[e.id].linkTileControl.rerender()}}sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){e.save().fail(function(e){C.error(e);i.reject("Could not save personalization changes: "+e)}).done(function(){i.resolve()})});return i.promise()};this.getTileActions=function(e){var t=[],i,r;if(this._isGroupTile(e)&&!this._isFailedGroupTile(e)){r=new v({config:{display_title_text:this.getTileTitle(e),display_subtitle_text:this.getTileSubtitle(e),display_info_text:this.getTileInfo(e)}});i=g.getTileSettingsAction(r,this._onTileSettingsSave.bind(this,e),this.getTileType(e));t.push(i)}return t};function O(e,t){var i=P(e,t);i.isBookmark=true;return i}function P(e,t){var i={id:c.generateUniqueId([])};A(i,e,t);return i}function A(e,t,i){t=T({},t);if(i){e.target=i}if(t.title||t.title===""){e.title=t.title}if(t.icon||t.icon===""){e.icon=t.icon}if(t.subtitle||t.subtitle===""){e.subTitle=t.subtitle}if(t.info||t.info===""){e.info=t.info}if(t.dataSource){e.dataSource={};T(e.dataSource,t.dataSource)}if(t.serviceUrl||t.serviceUrl===""){e.indicatorDataSource={path:t.serviceUrl}}if(e.indicatorDataSource&&(t.serviceRefreshInterval||t.serviceRefreshInterval===0)){e.indicatorDataSource.refresh=t.serviceRefreshInterval}}function M(e,t){if(e&&t){if(e.url){return e.url===t.url}return e.semanticObject===t.semanticObject&&e.action===t.action&&H(e.parameters,t.parameters)&&e.appSpecificRoute===t.appSpecificRoute}return e===t}function H(e,t){var i,r;e=e||[];t=t||[];if(e.length===t.length){i=U(e);r=U(t);return i===r}return false}function U(e){return e.map(function(e){return e.name+e.value}).sort().join()}function V(e){return{url:e}}function E(e){var t={semanticObject:e.semanticObject,action:e.action,parameters:x(e.params)};if(e.appSpecificRoute){t.appSpecificRoute=e.appSpecificRoute}return t}function x(e){return Object.keys(e).map(function(t){var i=e[t]&&e[t][0];return{name:t,value:i||""}})}}j.prototype._getMember=function(e,t){return c.getMember(e,t)};return j},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/MenuAdapter", ["sap/ushell/library","sap/ushell/Config"],function(e,t){"use strict";var n=e.ContentNodeType;var r=function(){};r.prototype.isMenuEnabled=function(){if(!t.last("/core/menu/enabled")){return Promise.resolve(false)}return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getMenuEntries("main").then(function(e){return e.length>0})})};r.prototype.getMenuEntries=function(){return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getMenuEntries("main")})};r.prototype.getContentNodes=function(){return this.getMenuEntries().then(this._normalizeMenuEntries.bind(this)).then(this._buildContentNodes.bind(this))};r.prototype._normalizeMenuEntries=function(e){var t=[];return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(n){e.forEach(function(e){if(this._isSpaceOrPage(e)&&e.menuEntries===undefined){var r=e.target.parameters.find(function(e){return e.name==="pageId"});var i=r&&r.value;e.menuEntries=[{title:i,type:"IBN",target:e.target}];t.push(n.getPage(i).then(function(t){e.menuEntries[0].title=t.identification.title}))}}.bind(this));return Promise.allSettled(t)}.bind(this)).then(function(){return e})};r.prototype._buildContentNodes=function(e){return e.filter(this._isSpaceOrPage).map(function(e){var t=e.target.parameters.find(function(e){return e.name==="spaceId"}).value;var r={id:t,label:e.title,type:n.Space,isContainer:false};r.children=e.menuEntries.filter(this._isSpaceOrPage).map(function(e){var t=e.target.parameters.find(function(e){return e.name==="pageId"});var r=t&&t.value;if(!r){return null}return{id:r,label:e.title,type:n.Page,isContainer:true,children:[]}}).filter(function(e){return!!e});return r}.bind(this))};r.prototype._isSpaceOrPage=function(e){return e.type==="IBN"&&e.target&&e.target.semanticObject==="Launchpad"&&e.target.action==="openFLPPage"&&Array.isArray(e.target.parameters)};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/PagesCommonDataModelAdapter", ["sap/base/Log","sap/base/util/deepExtend","sap/ushell/adapters/cdm/util/cdmSiteUtils","sap/base/util/extend","sap/base/util/Version","sap/ui/thirdparty/jquery","sap/ushell/Config"],function(e,t,i,n,a,jQuery,r){"use strict";var s=function(){this._oCDMPagesRequests={};this._oUnstableVisualizations={};this._sComponent="sap/ushell/adapters/cdm/PagesCommonDataModelAdapter";this.oSitePromise=new Promise(function(e,t){this.fnSiteResolve=e;this.fnSiteReject=t}.bind(this))};s.prototype.getSite=function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavigationDataProvider").then(function(e){return e.getNavigationData()}).then(function(e){var n={};var a=e.inbounds;for(var r=0;r<a.length;r++){var s=a[r].permanentKey||a[r].id;n[s]=a[r]}var o={_version:"3.1.0",site:{},catalogs:{},groups:{},visualizations:{},applications:i.getApplications(n),vizTypes:{},systemAliases:t({},e.systemAliases),pages:{}};this.fnSiteResolve(o);return o}.bind(this)).then(e.resolve).catch(function(t){e.reject(t);this.fnSiteReject(t)}.bind(this));return e.promise()};s.prototype.getPage=function(t){if(!t){var i="PagesCommonDataModelAdapter: getPage was called without a pageId";e.fatal(i,null,this._sComponent);return Promise.reject(i)}var n=r.last("/core/stableIDs/enabled");return this.oSitePromise.then(function(i){if(i.pages[t]){return i.pages[t]}return Promise.all([sap.ushell.Container.getServiceAsync("PagePersistence"),sap.ushell.Container.getServiceAsync("NavigationDataProvider")]).then(function(e){var i=e[0];var n=e[1];return Promise.all([i.getPage(t),n.getNavigationData()])}).then(function(e){var t=e[0];var a=e[1];this._addVisualizationsToSite(i,t.visualizations);this._addVizTypesToSite(i,t);this._addPageToSite(i,t.page,a);if(n){this._storeUnstableVisualizations(t.page.id,t.unstableVisualizations)}return i.pages[t.page.id]}.bind(this)).catch(function(t){e.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",t,this._sComponent);return Promise.reject(t)}.bind(this))}.bind(this))};s.prototype._storeUnstableVisualizations=function(e,t){if(!t){return}this._oUnstableVisualizations[e]=t};s.prototype._addVizTypesToSite=function(e,t){var a={};Object.keys(t.vizTypes).forEach(function(i){if(!e.vizTypes[i]){a[i]=t.vizTypes[i]}});n(e.vizTypes,i.getVizTypes(a))};s.prototype._addVisualizationsToSite=function(e,t,a){var r;if(a){r={};Object.keys(t).forEach(function(i){if(!e.visualizations[i]){r[i]=t[i]}})}else{r=t}n(e.visualizations,i.getVisualizations(r))};s.prototype._addPageToSite=function(t,i,n){var a={};var r=n.inbounds;for(var s=0;s<r.length;s++){var o=r[s].permanentKey||r[s].id;a[o]=r[s]}var l=t.pages[i.id]={identification:{id:i.id,title:i.title},payload:{layout:{sectionOrder:i.sections.map(function(e){return e.id})},sections:{}}};var u;var c;for(var d=0;d<i.sections.length;d++){u=i.sections[d];c=l.payload.sections[u.id]={id:u.id,title:u.title,layout:{vizOrder:u.viz.map(function(e){return e.id})},viz:{}};var v,p;for(var h=0;h<u.viz.length;h++){v=u.viz[h];p=!t.visualizations[v.vizId];if(p){var f=c.layout.vizOrder;f.splice(f.indexOf(v.id),1);if(p){e.error("Tile "+v.id+" with vizId "+v.vizId+" has no matching visualization. As the tile cannot be used to start an app it is removed from the page.")}continue}c.viz[v.id]={id:v.id,vizId:v.vizId,displayFormatHint:v.displayFormatHint}}}};s.prototype.getPages=function(t){if(!(t&&Array.isArray(t)&&t.length!==0)){var i="PagesCommonDataModelAdapter: getPages is not an array or does not contain any Page id";e.fatal(i,null,this._sComponent);return Promise.reject(i)}return this.oSitePromise.then(function(i){var n;var a=[];for(var s=0;s<t.length;s++){n=t[s];if(!i.pages[n]){a.push(t[s])}}if(a.length===0){return i.pages}return Promise.all([sap.ushell.Container.getServiceAsync("PagePersistence"),sap.ushell.Container.getServiceAsync("NavigationDataProvider")]).then(function(e){var t=e[0];var i=e[1];return Promise.all([t.getPages(a),i.getNavigationData()])}).then(function(e){var t=e[0];var n=e[1];for(var a=0;a<t.length;a++){this._addVisualizationsToSite(i,t[a].visualizations,true);this._addVizTypesToSite(i,t[a]);this._addPageToSite(i,t[a].page,n);if(r.last("/core/stableIDs/enabled")){this._storeUnstableVisualizations(t[a].page.id,t[a].unstableVisualizations)}}return i.pages}.bind(this)).catch(function(t){e.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",t,this._sComponent);return Promise.reject(t)}.bind(this))}.bind(this)).then(function(e){var i={};t.forEach(function(t){var n=e[t];if(n){i[t]=n}});return i})};s.prototype.getPersonalization=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Personalization").then(function(i){var n;var r=new a(e);n={container:"sap.ushell.cdm.personalization",item:"data"};if(r.inRange("3.1.0","4.0.0")){n={container:"sap.ushell.cdm3-1.personalization",item:"data"}}var s={validity:"Infinity",keyCategory:i.constants.keyCategory.GENERATED_KEY,writeFrequency:i.constants.writeFrequency.HIGH,clientStorageAllowed:false};i.getPersonalizer(n,s).getPersData().done(function(e){t.resolve(e||{})}).fail(function(e){t.reject(e)})}).catch(function(){t.reject("Personalization Service could not be loaded")});return t.promise()};s.prototype.setPersonalization=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Personalization").then(function(i){var n;var r=new a(e.version);n={container:"sap.ushell.cdm.personalization",item:"data"};if(r.inRange("3.1.0","4.0.0")){n={container:"sap.ushell.cdm3-1.personalization",item:"data"}}var s={validity:"Infinity",keyCategory:i.constants.keyCategory.GENERATED_KEY,writeFrequency:i.constants.writeFrequency.HIGH,clientStorageAllowed:false};i.getPersonalizer(n,s).setPersData(e).done(function(){t.resolve(e)}).fail(t.reject)}).catch(function(){t.reject("Personalization Service could not be loaded")});return t.promise()};s.prototype.getVisualizations=function(){return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(e){return Promise.all([e.getVisualizationData(),this.oSitePromise]).then(function(e){var t=e[0];var i=e[1];this._addVisualizationsToSite(i,t.visualizations);return i.visualizations}.bind(this))}.bind(this))};s.prototype.getVizTypes=function(){return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(e){return Promise.all([e.getVisualizationData(),this.oSitePromise]).then(function(e){var t=e[0];var i=e[1];this._addVizTypesToSite(i,t);return i.vizTypes}.bind(this))}.bind(this))};s.prototype.getVizType=function(e){return this.oSitePromise.then(function(t){var a=t.vizTypes[e];if(a){return a}if(!e.startsWith("X-SAP-UI2-CHIP:")){return}return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(t){return t.loadVizType(e)}).then(function(a){if(!a){return}var r={};r[e]=a;n(t.vizTypes,i.getVizTypes(r));return t.vizTypes[e]})})};s.prototype.getCachedVisualizations=function(){return this.oSitePromise.then(function(e){return e.visualizations})};s.prototype.getCachedVizTypes=function(){return this.oSitePromise.then(function(e){return e.vizTypes})};s.prototype.migratePersonalizedPages=function(e){var t=[];e.forEach(function(e){var i=e.identification.id;var n=this._oUnstableVisualizations[i];if(!n){return}Object.keys(e.payload.sections).forEach(function(a){var r=e.payload.sections[a];Object.keys(r.viz).forEach(function(e){var a=r.viz[e];var s=n[a.vizId];if(s){a.vizId=s.vizId;if(!t.includes(i)){t.push(i)}}})});this._oUnstableVisualizations[i]=null}.bind(this));return Promise.resolve(t)};return s},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/PersonalizationAdapter", ["sap/ushell/adapters/cdm/_Personalization/internals","sap/ushell/utils/HttpClient"],function(l,n){"use strict";return l.PersonalizationAdapter.bind(null,n,null)},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/Ui5ComponentLoaderAdapter", [],function(){"use strict";function n(){}return n},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/_LaunchPage/modifyHome", ["sap/ushell/adapters/cdm/_LaunchPage/readHome"],function(e){"use strict";function i(e){return r(e,"Home",true)}function r(e,i,r){var t={identification:{id:e,namespace:"",title:i},payload:{isPreset:false,locked:false,tiles:[],links:[],groups:[]}};if(r){t.payload.isDefaultGroup=true}return t}function t(i,r,t){var o=e.getGroupId(r);i.groups[o]=r;if(t!==undefined){i.site.payload.groupsOrder.splice(t,0,o)}else{i.site.payload.groupsOrder.push(o)}return i}function o(e,i,r){if(e&&e.groups&&e.groups[r]){e.groups[r]=i}return e}function u(e,i){if(e&&e.groups&&e.groups[i.identification.id]){delete e.groups[i.identification.id]}if(e&&e.site&&e.site.payload&&e.site.payload.groupsOrder){e.site.payload.groupsOrder=e.site.payload.groupsOrder.filter(function(e){return e!==i.identification.id})}return e}function s(e,i){e.site.payload.groupsOrder=i;return e}function n(e,i){e.identification.title=i}function a(e,i){if(i){delete e.identification.isVisible}else{e.identification.isVisible=false}}return{createDefaultGroup:i,createEmptyGroup:r,addGroupToSite:t,overwriteGroup:o,removeGroupFromSite:u,setGroupsOrder:s,setGroupTitle:n,setGroupVisibility:a}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/_LaunchPage/readCatalogs", [],function(){"use strict";function t(t){return t.identification.id}function i(t){return t.identification.title}return{getCatalogId:t,getCatalogTitle:i}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/_LaunchPage/readHome", ["sap/ushell/utils/type"],function(i){"use strict";function e(i){var e=[];i.site.payload.groupsOrder.forEach(function(t,n){var r=i.groups[t];if(r){r.payload=r.payload||{};e.push(r)}});return e}function t(i){return i.groups}function n(i){return i.site.payload.groupsOrder}function r(i,e){return i.groups[e]}function u(i){var e=i.filter(function(i){return i.payload.hasOwnProperty("isDefaultGroup")});if(e.length>0){return e[0]}return undefined}function o(i){return i.identification&&i.identification.id}function l(i){return i.identification.title}function s(i){if(!i.payload.hasOwnProperty("isPreset")){return true}return!!i.payload.isPreset}function a(i){return!!i.payload.locked}function f(i){return!!(i.identification.isVisible===undefined||i.identification.isVisible===true)}function d(e){if(e.payload.tiles&&i.isArray(e.payload.tiles)&&e.payload.tiles.length>0){return e.payload.tiles}return[]}function c(e){if(e.payload.links&&i.isArray(e.payload.links)&&e.payload.links.length>0){return e.payload.links}return[]}function p(i){return i.id}function g(i,e){var t;if(e&&e.isBookmark){return e.title}t=i[e.id];if(t){return e.title||t.tileResolutionResult.title}return undefined}function y(i,e){var t;if(e.isBookmark){return e.subTitle}t=i[e.id];if(t){return e.subTitle||t.tileResolutionResult.subTitle}return undefined}function k(i,e){var t;if(e.isBookmark){return e.info}t=i[e.id];return e.info||t.tileResolutionResult.info}function T(i,e){var t;if(e.isBookmark){return e.icon}t=i[e.id];if(t){return e.icon||t.tileResolutionResult.icon}return undefined}function R(i,e){var t;if(e.isBookmark){return e.icon}t=i[e.id];if(t){return e.icon||t.tileResolutionResult.icon}return undefined}function G(i,e){var t=i[e.id];if(t&&t.tileResolutionResult&&t.tileResolutionResult.size){return t.tileResolutionResult.size}}function v(i,e){var t=i[e.id];if(t){return!!t.isLink}return false}function m(i){return!!(i&&i.id&&!i.isCatalogTile)}function h(i,e){return i.deviceTypes&&i.deviceTypes[e]}return{getGroupsArrayFromSite:e,getGroupsMapFromSite:t,getGroupIdsFromSite:n,getGroupFromSite:r,getDefaultGroup:u,getGroupId:o,getGroupTitle:l,isGroupPreset:s,isGroupLocked:a,isGroupVisible:f,getGroupTiles:d,getGroupLinks:c,getTileId:p,getTileTitle:g,getTileSubtitle:y,getTileInfo:k,getTileIcon:T,getTileIndicatorDataSource:R,getTileSize:G,isLink:v,isGroupTile:m,supportsFormFactor:h}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/_LaunchPage/uri.transform", ["sap/ui/thirdparty/URI"],function(r){"use strict";function e(e,n,f,v){var c=l(e)?new r(e):null;if(!c){return{error:"Error: Parameter sUri is empty or not a string, use case not supported."}}if(!i(c)){return t(e,null,null,null,e)}var h=l(n)?new r(n):null;if(h&&!i(h)){return t(e,n,null,null,c.absoluteTo(h))}var m=(new r).search("");if(m.toString()===""){m=new r("https://x.y.z:8443/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/shells/cdm/fioriCDM.html?params")}var p=l(f)?new r(s(f)):m;if(!i(p)&&!v){return t(e,n,r.joinPaths(h,c),o(p),r.joinPaths(h,c).absoluteTo(p))}var b=l(v)?new r(v):m;if(!p||!b.toString()){return{error:"Error: Parameter sUriNewBase is empty or not a string, use case not supported."}}if(i(b)){return{error:"Error: Parameter sUriNewBase is a relative uri, but must be absolute."}}if(i(p)&&!i(b)){p=p.absoluteTo(b)}if(!i(p)&&!i(b)){if(p.host()&&b.host()&&p.host()!=b.host()){return{error:"Error: Hosts of the parameters sUriBase and sUriNewBase are given but do not match."}}var g=new r(u(p)).relativeTo(u(b));var w;if(l(n)){w=c.absoluteTo(h.absoluteTo(g.absoluteTo(b)));var d=a(g,h);var T=a(d,c);return t(c,d,T,o(b),w)}w=c.absoluteTo(g.absoluteTo(b));var P=a(g,c);P.query(c.query());return t(P,null,P,o(b),w)}return{error:"Error: Parameter combination not supported."}}function t(r,e,t,n,i){var o={};if(r){o.uri=r.toString()}if(e){o.uriParent=e.toString()}if(t){o.uriRelative=t.toString()}if(n){o.uriBase=n.toString()}if(i){o.uriAbsolute=i.toString()}return o}function n(r){if(!r.is("relative")){return false}return r.toString()[0]==="/"}function i(r){return!r.is("absolute")&&!n(r)}function o(r){return r.filename("").search("").fragment("")}function a(){var e=new r("/1/2/3/4/5/6/7/8/9/");var t=e;for(var n=0;n<arguments.length;n++){t=r.joinPaths(t,arguments[n])}return t.relativeTo(e)}function u(e){var t=e.directory();if(t==="/"){return"/"}return r.joinPaths(t,"/").toString()}function s(e){var t=e;if(e){var n=new r(e);if(n.filename()&&n.filename().indexOf(".")===-1&&n.filename().slice(-1)!=="/"){t+="/"}}return t}function l(r){return r&&typeof r==="string"}return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/_Personalization/internals", ["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,jQuery,n){"use strict";return{PersonalizationAdapter:r,getStorageResourceRoot:i,getContainerPath:s,delAdapterContainer:d,createContainerData:c,getAdapterContainer:f,getContainerCategory:p,isCategoryPContainer:g,trimContainerKey:u,save:y,load:I,del:h,clearContainerData:_,getItemKeys:E,containsItem:R,setItemValue:P,getItemValue:b,delItem:A,addPrefixToItemKey:v,stripPrefixFromItemKey:w,getHttpHeaderValue:C};function r(e,t,n,r,a){var o,s;var u={cache:{},headers:{"sap-client":n.getClient()}};a=a&&a.config;if(!a){throw new Error("PersonalizationAdapter: missing configuration.")}if(!t){t={}}o=i(a);s=new e(o,u);return{getAdapterContainer:f.bind(null,a,t,s),delAdapterContainer:d.bind(null,a,t,s)}}function i(e){var t=!e||!e.storageResourceRoot;if(t){throw new Error("Configuration error: storage resource root is not defined.")}return e.storageResourceRoot}function a(e){var t=!e||!e.relativeUrlReadOptimized;if(t){throw new Error("Configuration error: relative URL for read optimization is not defined.")}return e.relativeUrlReadOptimized}function o(e){var t=!e||!e.relativeUrlWriteOptimized;if(t){throw new Error("Configuration error: relative URL for write optimization is not defined.")}return e.relativeUrlWriteOptimized}function s(e,t,n){return m(e,t)+"/"+encodeURIComponent(u(n))+".json"}function u(e){var r=t.S_CONTAINER_PREFIX,i,a;if(jQuery.type(e)!=="string"||e.length===0){throw new Error("Personalization container key must be a non-empty string")}if(e.substring(0,r.length)===r){i=e.substring(r.length)}else{n.error("Unexpected personalization container key: "+e,"should always be prefixed with "+r,"sap.ushell.adapters.cdm.PersonalizationAdapter");i=e}if(i.length<=40){a=i}else{a=i.substring(0,40);n.error("Invalid personalization container key: '"+i+"'"+" exceeds maximum key length (40 characters) and is shortened to '"+a+"'",undefined,"sap.ushell.adapters.cdm.PersonalizationAdapter")}return a}function l(){return{validity:Infinity,keyCategory:e.keyCategory.GENERATED_KEY,writeFrequency:e.writeFrequency.HIGH,clientStorageAllowed:false}}function d(e,t,n,r,i){var a=s(e,i,r);var o=t&&t[a];if(o){delete t[a]}return h(n,a)}function c(e,t){var r;if(!t&&t!==""||t.constructor!==String){n.warning("Personalization container has an invalid app name; must be a non-empty string",null,"sap.ushell.adapters.cdm.PersonalizationAdapter")}if(!e){e=l()}r={items:{},__metadata:{appName:t,expiry:Date.now()+e.validity*60*1e3,validity:e.validity,category:p(e)}};return r}function f(e,t,n,r,i,a){var o,u,l=s(e,i,r);if(t&&t[l]){return t[l]}u=c(i,a);o=u.items;return{save:y.bind(null,n,u,l),load:I.bind(null,n,u,l),del:h.bind(null,n,u,l),setItemValue:P.bind(null,o),getItemValue:b.bind(null,o),getItemKeys:E.bind(null,o),containsItem:R.bind(null,o),delItem:A.bind(null,o)}}function p(e){return g(e)?"p":"u"}function m(e,t){return g(t)?a(e):o(e)}function g(t){return t&&t.keyCategory===e.keyCategory.FIXED_KEY&&t.writeFrequency===e.writeFrequency.LOW&&t.clientStorageAllowed}function y(e,t,r){return new jQuery.Deferred(function(i){e.put(r,{data:t}).then(function(e){i.resolve()}).catch(function(e){n.error("Failed to save personalization container; response: "+(typeof e==="object"?JSON.stringify(e):e),e.stack?e.stack:null,"sap.ushell.adapters.cdm.PersonalizationAdapter");i.reject(e)})}).promise()}function I(e,t,n){function r(e){_(e.items)}return new jQuery.Deferred(function(i){e.get(n).then(function(e){var n,a;if(e.status===200&&C(e.responseHeaders,"content-length")==="0"&&C(e.responseHeaders,"content-type").indexOf("text/plain")===0){r(t)}else{n=JSON.parse(e.responseText);if(n.data){n.items=n.data;delete n.data;n.__metadata=t.__metadata}a=n.items;_(t.items);Object.keys(a).forEach(function(e){t.items[e]=a[e]});t.__metadata=n.__metadata}i.resolve()}).catch(function(e){if(e.status===404){r(t);i.resolve()}else{_(t.items);i.reject(e)}})}).promise()}function h(e,t){return new jQuery.Deferred(function(n){e.delete(t).then(function(){n.resolve()}).catch(function(e){n.reject(e)})}).promise()}function _(e){Object.keys(e).forEach(function(t){delete e[t]})}function v(e){if(e==="__metadata"){return undefined}else if(e.indexOf(t.S_VARIANT_PREFIX)===0||e.indexOf(t.S_ADMIN_PREFIX)===0){return e}return t.S_ITEM_PREFIX+e}function w(e){if(e.indexOf(t.S_ITEM_PREFIX)===0){return e.substring(t.S_ITEM_PREFIX.length)}else if(e.indexOf(t.S_VARIANT_PREFIX)===0||e.indexOf(t.S_ADMIN_PREFIX)===0){return e}throw new Error("Illegal item key for personalization container: '"+e+"'; must be prefixed with one of the following: ["+t.S_ITEM_PREFIX+", "+t.S_VARIANT_PREFIX+", "+t.S_ADMIN_PREFIX+"] ")}function E(e){return Object.keys(e).map(v).filter(function(e){return!!e})}function R(e,t){return e.hasOwnProperty(w(t))}function P(e,t,n){e[w(t)]=n}function b(e,t){return e[w(t)]}function A(e,t){delete e[w(t)]}function C(e,t){var n=e&&e.filter(function(e){return e.name.toLowerCase()===t});return n&&n[0]&&n[0].value}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/util/AppForInbound", ["sap/base/util/ObjectPath","sap/base/Log"],function(e,t){"use strict";var i={};i.get=function(i,n){var s={};switch(n.resolutionResult.applicationType){case"SAPUI5":s=this._getUI5App(i,n);break;case"TR":s=this._getTRApp(i,n);break;case"WDA":s=this._getWDAApp(i,n);break;case"URL":s=this._getURLApp(i,n);break;case"WCF":s=this._getWCFApp(i,n);break;default:t.error("Unable to get CDM app for inbound: Application type '"+n.resolutionResult.applicationType+"' of app '"+i+"' is unknown and not supported.");throw new Error("Unknown application type: "+n.applicationType)}if(n.resolutionResult.systemAlias){e.set(["sap.app","destination"],{name:n.resolutionResult.systemAlias,semantics:"applied"},s)}return s};i._getURLApp=function(e,t){return{"sap.app":{id:e,crossNavigation:{inbounds:{"Shell-launchURL":{semanticObject:"Shell",action:"launchURL",signature:{parameters:{"sap-external-url":{required:true,filter:{value:t.resolutionResult.url,format:"plain"}}}}}}}},"sap.ui":{technology:"URL",deviceTypes:t.deviceTypes},"sap.url":{uri:t.resolutionResult.url}}};i._getUI5App=function(e,t){return{"sap.app":{id:e,title:t.resolutionResult.text,subTitle:t.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(t)}},"sap.ui5":{componentName:t.resolutionResult.ui5ComponentName},"sap.ui":{technology:"UI5",deviceTypes:t.deviceTypes},"sap.platform.runtime":{componentProperties:{url:t.resolutionResult.url}}}};i._getApplicationInbound=function(e){var t={};t[e.id]={semanticObject:e.semanticObject,action:e.action,signature:e.signature};return t};i._getTRApp=function(e,i){var n,s=i.resolutionResult.url.match(/transaction=(.+?)[&?]/);if(s){n=s[1]}else{t.error("Unable to determine ABAP transaction from inbound URL of app '"+e+"': "+i.resolutionResult.url+".")}return{"sap.app":{id:e,title:i.resolutionResult.text,subTitle:i.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(i)}},"sap.ui":{technology:"GUI",deviceTypes:i.deviceTypes},"sap.flp":{type:"application"},"sap.gui":{transaction:n}}};i._getWDAApp=function(e,t){return{"sap.app":{id:e,title:t.resolutionResult.text,subTitle:t.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(t)}},"sap.ui":{technology:"URL",deviceTypes:t.deviceTypes},"sap.url":{uri:t.resolutionResult.url}}};i._getWCFApp=function(e,t){return{"sap.app":{id:e,title:t.resolutionResult.text,subTitle:t.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(t)}},"sap.ui":{technology:"URL",deviceTypes:t.deviceTypes},"sap.url":{uri:t.resolutionResult.url}}};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/util/cdmSiteUtils", ["sap/ushell/adapters/cdm/util/AppForInbound","sap/base/Log","sap/ushell/adapters/cdm/v3/utilsCdm"],function(i,e,t){"use strict";var a={_VISUALIZATION_TYPES:{STATIC_TILE:"sap.ushell.StaticAppLauncher",DYNAMIC_TILE:"sap.ushell.DynamicAppLauncher"}};a.getVisualizations=function(i){var e={};Object.keys(i).forEach(function(a){var n=i[a];var s;if(n.isCustomTile){s=n.vizType}else if(n.indicatorDataSource){s=this._VISUALIZATION_TYPES.DYNAMIC_TILE}else{s=this._VISUALIZATION_TYPES.STATIC_TILE}var r={vizType:s,vizConfig:{"sap.app":{title:n.title,subTitle:n.subTitle,info:n.info,tags:{keywords:n.keywords}},"sap.ui":{icons:{icon:n.icon}},"sap.flp":{tileSize:n.size,indicatorDataSource:n.indicatorDataSource,numberUnit:n.numberUnit,target:t.toTargetFromHash(n.url)}}};if(n.isCustomTile){r.vizConfig["sap.flp"]._instantiationData=n._instantiationData}e[a]=r}.bind(this));return e};a.getApplications=function(t){return Object.keys(t).reduce(function(a,n){var s=t[n],r=s.permanentKey||s.id;try{a[r]=i.get(n,s)}catch(i){e.error("Unable to dereference app '"+n+"' of CDM page.");a[n]={}}return a},{})};a.getVizTypes=function(i){return Object.keys(i).reduce(function(e,t){var a=i[t].id;if(!e[a]){e[a]={"sap.app":{id:a,type:"chipVizType"},"sap.flp":{vizOptions:i[t].vizOptions,tileSize:i[t].tileSize}}}return e},{})};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/AdapterBase", ["sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/m/GenericTile","sap/ui/core/ComponentContainer","sap/ushell/adapters/cdm/_LaunchPage/uri.transform","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/navigationMode","sap/ushell/resources","sap/ushell/utils","sap/ushell/adapters/cdm/v3/utilsCdm","sap/base/util/Version","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/deepClone","sap/base/Log","sap/ushell/UI5ComponentType"],function(e,t,i,r,o,n,a,s,l,u,p,d,c,jQuery,f,v,g,h,m,T,y){"use strict";var R=T.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter");var _=T.Level;var C="sap.ushell.components.tiles.cdm.applauncher";var b="sap.ushell.components.tiles.cdm.applauncherdynamic";function I(e,t,i){this.oAdapterConfiguration=i;this._mResolvedTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};this.TileType={Tile:"tile",Link:"link",Card:"card"}}I.prototype.getGroups=function(){var e=new jQuery.Deferred;this._ensureLoaded().then(function(t){p.setPerformanceMark("FLP - homepage groups processed");e.resolve(t)}).catch(function(){e.resolve([])});return e.promise()};I.prototype._ensureLoaded=function(){var t=this;if(this._loaded){return this._loaded}var i=new jQuery.Deferred;this._ensureLoadedDeferred=i;this._loaded=new Promise(function(i,r){this._getSiteData().then(function(r){if(!t.isSiteSupported(r)){throw new Error("Invalid CDM site version: Check the configuration of the launchpage adapter and the version of the FLP site")}var o=[];var n=e.getGroupsArrayFromSite(r);n=t._addDefaultGroup(n,r);n.forEach(function(e){o=t._ensureGroupItemsResolved(e,r).concat(o)});t._allPromisesDone(o).done(function(){i(n);delete t._loaded;t._logTileResolutionFailures(t._mFailedResolvedTiles)})}).catch(function(e){R.error("Delivering homepage groups failed - "+e);i([]);delete t._loaded})}.bind(this));return this._loaded};I.prototype._ensureGroupItemsResolved=function(e,t){var i=[];var r;var o;if(e.payload&&e.payload.tiles){r=this._ensureGroupTilesResolved(e.payload.tiles,t);Array.prototype.push.apply(i,r)}if(e.payload&&e.payload.links){o=this._ensureGroupLinksResolved(e.payload.links,t);Array.prototype.push.apply(i,o)}return i};I.prototype._ensureGroupTilesResolved=function(e,t){return(e||[]).map(function(e,i){return this._resolveGroupTile(e,t).then(function(e){e.isLink=false;return e})},this)};I.prototype._ensureGroupLinksResolved=function(e,t){return(e||[]).map(function(e){return this._resolveGroupTile(e,t).then(function(e){e.isLink=true;return e})},this)};I.prototype._resolveGroupTile=function(e,t){var i=this._mResolvedTiles;var r=this._mFailedResolvedTiles;var o;function n(t){i[e.id]=t;if(r[e.id]){delete r[e.id]}return t}function a(e){var t=e.target;return t&&t.semanticObject==="Shell"&&t.action==="launchURL"}if(i[e.id]){return(new jQuery.Deferred).resolve(i[e.id]).promise()}if(e.target&&e.target.url){o=jQuery.when(this._getTileForUrl(e))}else if(e.isBookmark&&e.vizType===undefined){o=this._resolveTileByIntent(e,t)}else if(a(e)){o=this._resolveTileByIntent(e,t)}else{o=this._resolveTileByVizId(e,t)}var s=new jQuery.Deferred;o.done(function(e){s.resolve(n(e))}).fail(function(t){r[e.id]=t;s.reject(t)});return s.promise()};I.prototype._resolveTileByVizId=function(r,o){var n;var s;var u;var c;var v;var g;var T;var y;var R;var C;var b;var I;var S;function D(e,t){return(new jQuery.Deferred).reject({logLevel:e,message:t}).promise()}var L=new jQuery.Deferred;if(!f(o)){return D(_.ERROR,"Cannot resolve tile: oSite must be an object")}if(!f(r)){return D(_.ERROR,"Cannot resolve tile: oTile must be an object")}s=r.vizId;n=m(t.get(o,s||"")||{});c=r.vizType||t.getTypeId(n);u=t.getType(o,c);if(!u){return D(_.ERROR,"Cannot resolve tile '"+r.id+"': no visualization type found for vizTypeId '"+c+"'")}v=t.getAppId(n);if(v){g=t.getAppDescriptor(o,v);if(!g){return D(_.INFO,"Tile '"+r.id+"' filtered from result: no app descriptor found for appId '"+v+"' (dangling app reference)")}T=e.getInbound(g,t.getTarget(n).inboundId);if(!T){return D(_.ERROR,"Cannot resolve tile '"+r.id+"': app '"+v+"' has no navigation inbound")}y=d.mapOne(T.key,T.inbound,g,n,u,o);var w=y.resolutionResult.applicationType;var P=y.resolutionResult.additionalInformation;var G=a.last("/core/navigation/enableInPlaceForClassicUIs");var F=G?G[w]:false;R=l.computeNavigationModeForHomepageTiles(w,P,F);I=t.getOutbound(n,T.inbound);b=this._toHashFromOutbound(I)}else{n.vizConfig=h({},n.vizConfig,r.vizConfig);y=d.mapOne(undefined,undefined,undefined,n,u,o);if(t.startsExternalUrl(n)){S=p.getMember(n.vizConfig,"sap|flp.target.url")}}C=y.tileResolutionResult;C.navigationMode=R;C.isLink=false;if(!this._isFormFactorSupported(C)){return D(_.INFO,"Tile '"+r.id+"' filtered from result: form factor not supported")}if(S||b){L.resolve({tileResolutionResult:C,tileIntent:S||b})}else{if(r.target){var k=m(r.target);b=d.toHashFromTarget(i.harmonizeTarget(k))}L.resolve({tileResolutionResult:C,tileIntent:b})}return L.promise()};I.prototype._isFormFactorSupported=function(t){var i=p.getFormFactor();return e.supportsFormFactor(t,i)};I.prototype._getFirstInbound=function(e){var t=Object.keys(e["sap.app"].crossNavigation.inbounds).shift();var i=e["sap.app"].crossNavigation.inbounds[t];return{key:t,inbound:i}};I.prototype._resolveTileByIntent=function(e){var t=this._prepareTileHash(e);return this._getTileFromHash(t)};I.prototype._allPromisesDone=function(e){var t=new jQuery.Deferred;if(e.length===0){t.resolve([])}else{var i=e.map(function(e){var t=new jQuery.Deferred;e.always(t.resolve.bind(t));return t.promise()});jQuery.when.apply(this,i).done(function(){var e=Array.prototype.slice.call(arguments);t.resolve(e)})}return t.promise()};I.prototype._logTileResolutionFailures=function(e){var t={};if(!e){return}Object.keys(_).filter(function(e){var t=_[e];return t>=_.FATAL&&t<=_.ALL}).forEach(function(e){t[_[e]]=""});Object.keys(e).forEach(function(i){var r=e[i];if(r.logLevel){t[r.logLevel]=t[r.logLevel].concat(r.message).concat("\n")}});if(t[_.FATAL]){R.fatal(t[_.FATAL])}if(t[_.ERROR]){R.error(t[_.ERROR])}if(t[_.WARNING]){R.warning(t[_.WARNING])}if(t[_.INFO]){R.info(t[_.INFO])}if(t[_.DEBUG]){R.debug(t[_.DEBUG])}if(t[_.TRACE]){R.trace(t[_.TRACE])}};I.prototype._isValidTitle=function(e){return typeof e==="string"&&e};I.prototype._isGroupPreset=function(t){return e.isGroupPreset(t)};I.prototype._isGroupLocked=function(t){return e.isGroupLocked(t)};I.prototype.getGroupTitle=function(t){return e.getGroupTitle(t)};I.prototype.getGroupId=function(t){return e.getGroupId(t)};I.prototype.isGroupVisible=function(t){return e.isGroupVisible(t)};I.prototype.getTileTitle=function(t){return e.getTileTitle(this._mResolvedTiles,t)};I.prototype.getTileContentProviderId=function(t){return e.getContentProviderId(t)};I.prototype.getTileSubtitle=function(t){return e.getTileSubtitle(this._mResolvedTiles,t)};I.prototype.getTileIcon=function(t){return e.getTileIcon(this._mResolvedTiles,t)};I.prototype.getTileInfo=function(t){return e.getTileInfo(this._mResolvedTiles,t)};I.prototype.getTileIndicatorDataSource=function(e){var t=this._mResolvedTiles[e.id];var i={};if(e.indicatorDataSource){i.indicatorDataSource=h({},e.indicatorDataSource);if(e.dataSource){i.dataSource=h({},e.dataSource)}return i}if(!t){return i}var r=t.tileResolutionResult;if(r.indicatorDataSource){i.indicatorDataSource=h({},r.indicatorDataSource);if(r.indicatorDataSource.hasOwnProperty("dataSource")){var o=r.indicatorDataSource.dataSource;var a=r.dataSources;if(a&&a.hasOwnProperty(o)){i.dataSource=h({},a[o])}else{T.warning("datasource referenced but not found for tile: "+t.tileIntent)}}if(p.getMember(r,"runtimeInformation.componentProperties.url")){var s=p.getMember(i,"indicatorDataSource.path");var l=p.getMember(i,"dataSource.uri");var u=p.getMember(r,"runtimeInformation.componentProperties.url");var d=n(s,l,u,this.getWindowLocationHref());if(!d.error){if(s){i.indicatorDataSource.path=d.uri}if(l){i.dataSource.uri=d.uriParent}}}}return i};I.prototype.getWindowLocationHref=function(){return window.location.href};I.prototype.isGroupRemovable=function(e){return!this._isGroupPreset(e)};I.prototype.isGroupLocked=function(e){return this._isGroupLocked(e)};I.prototype.getGroupTiles=function(t){return e.getGroupTiles(t).concat(e.getGroupLinks(t))};I.prototype.getTileType=function(t){if(e.isLink(this._mResolvedTiles,t)){return this.TileType.Link}if(e.isCard(this._mResolvedTiles,t)){return this.TileType.Card}return this.TileType.Tile};I.prototype.getTileId=function(t){return e.getTileId(t)};I.prototype.getTileSize=function(t){return e.getTileSize(this._mResolvedTiles,t)||"1x1"};I.prototype.getTileTarget=function(t){var i=e.getTileId(t);var r=this._mResolvedTiles[i];if(t.target&&t.target.url){return t.target.url}if(r){return r.tileIntent}T.warning("Could not find a target for Tile with id '"+i+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return""};I.prototype.isTileIntentSupported=function(e){return this._mFailedResolvedTiles[e.id]===undefined};I.prototype.setTileVisible=function(e,t){var i=this._mResolvedTiles[e.id];if(i){if(i.tileComponent){this._notifyTileAboutVisibility(i.tileComponent,t,i.visibility)}i.visibility=t}};I.prototype.getCardManifest=function(e){var t=this._mResolvedTiles[e.id];var i=t.tileResolutionResult;return i.tileComponentLoadInfo};I.prototype._getTileUiComponentContainer=function(e,t,i){var n=this;var a;var l;var p;var d;var c;var f;var v=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(r){l=r;var o=this._createTileComponentData(e,i,t);return o}.bind(this)).then(function(t){return this._enhanceTileComponentData(e,t)}.bind(this)).then(function(g){a=t.tileResolutionResult;if(t.isLink){p=a.navigationMode;v.resolve(n._createLinkInstance(e,i,p,r,u));return}var h=this._createTileComponentProperties(g,a.tileComponentLoadInfo);if(!h.name){return Promise.reject("Cannot find name of tile component for tile with id: '"+e.id+"'")}if(h.manifest){g.properties=g.properties||{};g.properties.manifest=h.manifest}f=this._isCustomTileComponent(h.name);var m=function(t){var r;d=t.componentHandle.getInstance();c=new o({component:d,height:"100%"});if(!i){r=n._mResolvedTiles[e.id];r.tileComponent=d;if(typeof r.visibility==="boolean"){n._notifyTileAboutVisibility(d,r.visibility)}}return c};var T=function(){return l.createComponent({loadCoreExt:f,loadDefaultDependencies:false,componentData:g,url:h.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:h,ui5ComponentName:h.name},{},[],y.Visualization).then(m)};if(f){s.once("CoreResourcesComplementLoaded").do(function(){T().then(function(e){v.resolve(e)}).fail(function(e){v.reject(e)})})}else{T().then(function(e){v.resolve(e)}).fail(function(e){v.reject(e)})}}.bind(this)).catch(function(e){v.reject(e)});return v.promise()};I.prototype._createTileComponentProperties=function(e,t){var i={};if(!t||v(t)){if(e.properties.indicatorDataSource&&e.properties.indicatorDataSource.path){i.name=b}else{i.name=C}}else{i=t.componentProperties||{};i.name=t.componentName}return i};I.prototype.getTileView=function(e){var t=this;return new jQuery.Deferred(function(i){return t._getTileView(e,false).then(function(e){i.resolve(e)},function(t){var r="Tile with ID '"+e.id+"' could not be initialized"+(t?":\n"+t:".");T.error(r,null,e.tileType);i.reject(r)})}).promise()};I.prototype._getTileView=function(e){var t;var i=new jQuery.Deferred;if(typeof e!=="object"||!e.id){t="Invalid input parameter passed to _getTileView: "+e;T.error(t);return i.reject(t).promise()}var r=this._mResolvedTiles[e.id];if(!r){t="No resolved tile found for tile ID: "+e.id;T.error(t);return i.reject(t).promise()}return this._getTileUiComponentContainer(e,r,false)};I.prototype._createTileComponentData=function(e,t,i){var r=t?this.getCatalogTileTitle(e):this.getTileTitle(e);var o=t?this.getCatalogTilePreviewSubtitle(e):this.getTileSubtitle(e);var n=t?this.getCatalogTilePreviewIcon(e):this.getTileIcon(e);var a=t?this.getCatalogTilePreviewInfo(e):this.getTileInfo(e);var s=t?this.getCatalogTileTargetURL(e):this.getTileTarget(e);var l=this.getTileIndicatorDataSource(e);var u=e.numberUnit||i.tileResolutionResult&&i.tileResolutionResult.numberUnit;var p={properties:{},startupParameters:{}};if(i.tileResolutionResult&&i.tileResolutionResult.isCustomTile===true&&i.tileResolutionResult.startupParameters){p.startupParameters=i.tileResolutionResult.startupParameters}if(r){p.properties.title=r}if(a){p.properties.info=a}if(o){p.properties.subtitle=o}if(n){p.properties.icon=n}if(s){p.properties.targetURL=s}if(u){p.properties.numberUnit=u}if(l.indicatorDataSource){p.properties.indicatorDataSource=l.indicatorDataSource;if(l.dataSource){p.properties.dataSource=l.dataSource}}if(i.tileResolutionResult){p.properties.navigationMode=i.tileResolutionResult.navigationMode;p.properties.contentProviderId=i.tileResolutionResult.contentProviderId||""}return p};I.prototype._enhanceTileComponentData=function(e,t){var i=Promise.resolve();var r=this.getTileContentProviderId(e);if(r){i=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext(r)}).then(function(e){t.properties.indicatorDataSource.path=e.getFullyQualifiedXhrUrl(t.properties.indicatorDataSource.path)}).catch(function(){T.error("System Context not available")})}return i.then(function(){return t})};I.prototype._isGroupTile=function(t){return e.isGroupTile(t)};I.prototype._isCatalogTile=function(e){return!!(e&&e.isCatalogTile)};I.prototype._isFailedGroupTile=function(t){return!!(t&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[e.getTileId(t)])};I.prototype.getCatalogTileId=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return undefined}if(e.isBookmark&&g.get("target.url",e)){return e.target.url}return e.vizId||e.target&&e.target.url}if(this._isCatalogTile(e)){return e.id}return undefined};I.prototype.getCatalogTilePreviewTitle=function(e){if(this._isGroupTile(e)){return this.getTileTitle(e)}return e.tileResolutionResult&&e.tileResolutionResult.title||""};I.prototype.getCatalogTileTargetURL=function(e){if(!e){throw new Error("The given tile is falsy")}if(this._isCatalogTile(e)){if(e.tileResolutionResult&&e.tileResolutionResult.isCustomTile){if(!e.tileResolutionResult.targetOutbound){return""}return this._toHashFromOutbound(e.tileResolutionResult.targetOutbound)}return e.tileIntent||""}return this.getTileTarget(e)};I.prototype.isGroupFeatured=function(e){return!!e.isFeatured};I.prototype._getMember=function(e,t){return p.getMember(e,t)};I.prototype.getCdmVersionsSupported=function(){return{min:new c("3.0.0"),max:new c("3.1.0")}};I.prototype.isSiteSupported=function(e){if(!e._version||new c(e._version).compareTo(this.getCdmVersionsSupported().min)<0||new c(e._version).compareTo(this.getCdmVersionsSupported().max)>0){T.fatal("Invalid CDM site version: Only version 3.0.0 is supported");return false}return true};I.prototype._isCustomTileComponent=function(e){return!(e===C||e===b)};return I});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/LaunchPageAdapter", ["sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/_LaunchPage/modifyHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readCatalogs","sap/m/library","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/utils/UrlParsing","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/components/tiles/utils","sap/ushell/adapters/cdm/v3/AdapterBase","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/navigationMode","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/Log"],function(e,t,i,r,n,o,a,s,l,u,f,d,c,p,jQuery,v,h,g,m){"use strict";var T=r.GenericTileMode;var b="sap.ushell.components.tiles.cdm.applauncher";var S="sap.ushell.components.tiles.cdm.applauncherdynamic";function y(r,y,R){u.call(this,r,y,R);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("CommonDataModel")]).then(function(e){this.oURLParsingService=e[0];this.oCDMService=e[1]}.bind(this));this._getTileFromHashInContextOfSite=function(e,t,i){var r=new jQuery.Deferred;var n=t[i];if(!n){n=e(i);t[i]=n}n.done(function(e){var t={tileIntent:i,tileResolutionResult:e};r.resolve(t)}).fail(function(e){r.reject("Hash '"+i+"' could not be resolved to a tile. "+e)});return r.promise()};this._getTileFromHash=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(i){var r=i.resolveTileIntent.bind(i);this._getTileFromHashInContextOfSite(r,this._mCatalogTilePromises,e).done(t.resolve).fail(t.reject)}.bind(this));return t.promise()};this._getTileForUrl=function(e){var t={componentName:e.indicatorDataSource?S:b};return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:t,isCustomTile:false}}};this._prepareTileHash=function(e){var t={};if(this._isCatalogTile(e)){return e.tileIntent}if(this._isGroupTile(e)&&e.target){var i=e.target.parameters||[];i.forEach(function(e){if(e.name&&e.value){t[e.name]=[e.value]}});var r={target:{semanticObject:e.target.semanticObject,action:e.target.action},params:t,appSpecificRoute:e.target.appSpecificRoute};return"#"+a.constructShellHash(r)}return undefined};this.getDefaultGroup=function(){var e=new jQuery.Deferred;var t;var i=this;if(!this._oDefaultGroup){t=this._ensureLoaded()}if(t){t.done(function(){e.resolve(i._oDefaultGroup)}).fail(function(t){e.reject("Failed to access default group. "+t)})}else{e.resolve(i._oDefaultGroup)}return e.promise()};this.addGroup=function(i){var r=new jQuery.Deferred;var o;var a=this;if(!this._isValidTitle(i)){return r.reject("No valid group title").promise()}var s="Failed to add the group with title '"+i+"' to the homepage. ";this.oCDMService.getSite().done(function(s){o=n.generateUniqueId(e.getGroupIdsFromSite(s));t.addGroupToSite(s,t.createEmptyGroup(o,i));a.oCDMService.save().done(function(){delete a._ensureLoadedDeferred;r.resolve(s.groups[o],o)}).fail(function(e){r.reject(e)})}).fail(function(e){r.reject(s+e)});return r.promise()};this.setGroupTitle=function(i,r){var n=this;var o=new jQuery.Deferred;if(typeof i!=="object"||!e.getGroupId(i)){return o.reject("Unexpected group value").promise()}if(!n._isValidTitle(r)){return o.reject("Unexpected oGroup title value").promise()}var a="Failed to set new title for group with id '"+e.getGroupId(i)+"'. ";var s=e.getGroupTitle(i);this.oCDMService.getSite().done(function(e){if(i){t.setGroupTitle(i,r)}n.oCDMService.save().done(function(){o.resolve()}).fail(function(e){m.error(e);o.reject(s)})}).fail(function(e){o.reject(s,a+e)});return o.promise()};this.hideGroups=function(i){var r=new jQuery.Deferred;var n=this.oCDMService;if(i&&Array.isArray(i)){var o="Failed to hide group. ";n.getSite().done(function(o){e.getGroupsArrayFromSite(o).forEach(function(r){var n=Array.prototype.indexOf.call(i,e.getGroupId(r))===-1;t.setGroupVisibility(r,n)});n.save().done(function(){r.resolve()}).fail(function(e){r.reject("Hiding of groups did not work as expected - "+e)})}).fail(function(e){r.reject(o+e)})}else{r.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.")}return r.promise()};this.moveGroup=function(i,r){var o=new jQuery.Deferred;var a=this.oCDMService;if(!i||!e.getGroupId(i)||r<0){return o.reject("Unable to move groups - invalid parameters").promise()}var s="Failed to move group with id '"+i.identification.id+"'. ";a.getSite().done(function(s){var l=e.getGroupIdsFromSite(s);var u=e.getGroupId(i);if(!l){return o.reject("groupsOrder not found - abort operation of adding a group.")}if(l.indexOf(u)===r){return o.resolve()}var f=n.moveElementInsideOfArray(l,l.indexOf(u),r);if(!f){return o.reject("invalid move group operation - abort.")}t.setGroupsOrder(s,f);a.save().done(function(){o.resolve()}).fail(function(e){o.reject(e)});return undefined}).fail(function(e){o.reject(s+e)});return o.promise()};this.removeGroup=function(i){var r=new jQuery.Deferred;var n=this.oCDMService;if(typeof i!=="object"){return r.reject("invalid group parameter").promise()}var o=e.getGroupId(i);if(!o){return r.reject("group without id given").promise()}var a="Failed to remove group with id '"+o+"'. ";n.getSite().done(function(e){t.removeGroupFromSite(e,i);n.save().done(function(){r.resolve()}).fail(function(e){r.reject(e)})}).fail(function(e){r.reject(a+e)});return r.promise()};this.resetGroup=function(i){var r=new jQuery.Deferred;var n=this.oCDMService;var o=[];var a=this;if(typeof i==="object"&&e.getGroupId(i)){var s=e.getGroupId(i);var l="Failed to reset group with id '"+s+"'. ";n.getSite().done(function(l){v(o,e.getGroupsArrayFromSite(l));if(a.isGroupRemovable(i)===false){n.getGroupFromOriginalSite(s).done(function(i){if(typeof l==="object"&&e.getGroupFromSite(l,s)){t.overwriteGroup(l,i,s)}n.save().done(function(){r.resolve(i)}).fail(function(e){r.reject("Group could not be reset - "+e,o)})}).fail(function(e){r.reject("Group could not be reset - "+e,o)})}else{r.reject("Group could not be reset as it was created by the user",o)}}).fail(function(e){r.reject(l+e,[])})}return r.promise()};this.getLinkTiles=function(t){return e.getGroupLinks(t)};this.isLinkPersonalizationSupported=function(){return true};this._notifyTileAboutRefresh=function(e){if(typeof e.tileRefresh==="function"){e.tileRefresh()}};this.refreshTile=function(e){var t=this._mResolvedTiles[e.id];if(t){if(t.tileComponent){this._notifyTileAboutRefresh(t.tileComponent)}}};this._notifyTileAboutVisibility=function(e,t,i){if(typeof e.tileSetVisible==="function"&&i!==t){e.tileSetVisible(t)}};this.getTileView=function(e){var t=this;return new jQuery.Deferred(function(i){return t._getTileView(e,false).then(function(e){i.resolve(e)},function(t){var r="Tile with ID '"+e.id+"' could not be initialized"+(t?":\n"+t:".");m.error(r,null,e.tileType);i.reject(r)})}).promise()};this._getCatalogTileViewControl=function(e){var t=new jQuery.Deferred;if(typeof e!=="object"){var i="Invalid input parameter passed to _getCatalogTileView: "+e;m.error(i);return t.reject(i).promise()}return this._getTileUiComponentContainer(e,e,true)};this._createLinkInstance=function(e,t,i,r,n){var a;var s=this.getTileSubtitle(e);var l=r;if(t===true){a=this.getCatalogTileTitle(e)}else{a=this.getTileTitle(e)}var u=new l({mode:T.LineMode,subheader:s,header:a,url:o.getLeanURL(this.getTileTarget(e)),press:function(t){this._genericTilePressHandler(e,t)}.bind(this)});if(i){var f=n.i18n.getText(i+"NavigationMode");u.setAriaLabel(f+" "+a+" "+s)}this._mResolvedTiles[e.id].linkTileControl=u;return u};this._genericTilePressHandler=function(e,t){var i;if(t.getSource().getScope&&t.getSource().getScope()==="Display"){i=this.getTileTarget(e);if(i){if(i[0]==="#"){hasher.setHash(i)}else{o.openURL(i,"_blank")}}}};this.addTile=function(e,t){var i=new jQuery.Deferred;var r=this.oCDMService;if(!t){t=this._oDefaultGroup}var n=k();n.vizId=e.vizId;this._mResolvedTiles[n.id]={tileIntent:e.tileIntent,tileResolutionResult:e.tileResolutionResult,isLink:false};r.getSite().done(function(e){e.groups[t.identification.id].payload.tiles.push(n);r.save().done(function(){i.resolve(n)}).fail(function(e){i.reject(e)})}).fail(function(e){var r="Failed to add tile with id '"+n.id+"' to group with id '"+t.identification.id+"'. ";i.reject(r+e)});return i.promise()};this.removeTile=function(e,t,i){var r=this.oCDMService;var n=new jQuery.Deferred;var o=this;if(!e||typeof e!=="object"||!e.identification||!e.identification.id||!t||typeof t!=="object"||!t.id){return n.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise()}var a="Failed to remove tile with id '"+t.id+"' from group with id '"+e.identification.id+"'. ";r.getSite().done(function(s){var l;i=+i;try{l=s.groups[e.identification.id].payload}catch(t){n.reject(s.groups[e.identification.id],a)}var u=o.getTileType(t)===o.TileType.Link?"links":"tiles";if(o.getTileType(t)===o.TileType.Link){i-=l.tiles.length}if(i>=0){l[u].splice(i,1)}else{l[u]=l[u].filter(function(e){return e.id!==t.id})}r.save().done(function(){n.resolve()}).fail(function(t){m.error(t);n.reject(s.groups[e.identification.id],t)})}).fail(function(e){n.reject({},a+e)});return n.promise()};this.moveTile=function(e,t,i,r,n,o){var a=new jQuery.Deferred;var s=this.oCDMService;var l=this;if(!e||h(e)||t===undefined||t<0||i===undefined||i<0||!r||!r.identification||!r.identification.id||!n||!n.identification||!n.identification.id){return a.reject("Invalid input parameters").promise()}var u="Failed to move tile with id '"+e.id+"'. ";s.getSite().done(function(f){var d=l.getTileType(e)===l.TileType.Link?"links":"tiles";if(!o){o=l._mResolvedTiles[e.id].isLink?"link":"tile"}var c=o==="link"?"links":"tiles";if(d!==c&&l._mResolvedTiles[e.id]){l._mResolvedTiles[e.id].isLink=o==="link"}if(c==="links"){i-=f.groups[n.identification.id].payload.tiles.length}if(d==="links"){t-=f.groups[r.identification.id].payload.tiles.length}if(r.identification.id===n.identification.id){if(t!==i||d!==c){var p=f.groups[n.identification.id].payload;p[d].splice(t,1);p[c].splice(i,0,e)}else{return a.resolve(e).promise()}}else{f.groups[r.identification.id].payload[d].splice(t,1);f.groups[n.identification.id].payload[c].splice(i,0,e)}s.save().done(function(){a.resolve(e)}).fail(function(e){m.error(u+e);a.reject(u+e)});return undefined}).fail(function(e){m.error(u+e);a.reject(u+e)});return a.promise()};this._compareCatalogs=function(e,t){return(e.identification.title||"").toLowerCase()>(t.identification.title||"").toLowerCase()?1:-1};this.getCatalogs=function(){var e=this;var t=new jQuery.Deferred;var i=[];function r(e,t,i,r){var n=e.catalogs[t];i.push(n);r.notify(n)}sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(n){n.getSite().done(function(n){Object.keys(n.catalogs).forEach(function(e){r(n,e,i,t)});t.resolve(i.sort(e._compareCatalogs))})});return t.promise()};this._isStartableInbound=function(e){if(!e.semanticObject||!e.action){return false}var t=["Shell-plugin","Shell-bootConfig"];if(t.indexOf(e.semanticObject+"-"+e.action)>-1){return false}return true};this._isStartableVisualization=function(e,t){var i=g.get("signature.parameters",t);if(!i){return true}var r=g.get("parameters",f.getTarget(e));return Object.keys(i).every(function(e){var t=i[e];if(e==="sap-external-url"){return true}if(!t.filter||t.filter.format!=="plain"){return true}var n=t.filter.value;var o=g.get([e,"value","value"],r);if(n!==o){return false}return true})};this._isHiddenInbound=function(e){return!!e.hideLauncher};this._toHashFromInbound=function(e){var t=s.toHashFromInbound(e);if(!t){return undefined}return"#"+t};this._getExternalUrlFromInbound=function(e){return g.get("signature.parameters.sap-external-url.launcherValue.value",e)||null};this._toHashFromOutbound=function(e){var t=s.toHashFromOutbound(e);if(!t){return undefined}return"#"+t};this.getCatalogTiles=function(e){var t=this;var i=new jQuery.Deferred;if(typeof e!=="object"||e===null){return i.reject("Invalid input parameter '"+e+"' passed to getCatalogTiles.").promise()}this.oCDMService.getSite().done(function(r){C.call(t,e,r).done(i.resolve).fail(i.reject)}).fail(function(e){i.reject("Failed to get site: "+e)});return i.promise()};function C(t,i){var r=this;var o=new jQuery.Deferred;setTimeout(function(){var a=(t.payload&&t.payload.viz||[]).reduce(function(o,a){var l;var u;var p;var v;var h;var g;var m;var T;var b;var S;var y;var R;var C;var _;var k;var j;var I;if(!a){return o}u=f.get(i,a);if(!u){return o}p=f.getTypeId(u);v=f.getType(i,p);l=f.getAppId(u);if(l){h=f.getAppDescriptor(i,l);if(!h){return o}g=e.getInbound(h,f.getTarget(u).inboundId);if(!g){return o}if(!r._isStartableInbound(g.inbound)||!r._isStartableVisualization(u,g.inbound)||r._isHiddenInbound(g.inbound)){return o}T=s.mapOne(g.key,g.inbound,h,u,v,i);if(!T||!T.tileResolutionResult){return o}_=T.resolutionResult.applicationType;k=T.resolutionResult.additionalInformation;I=c.last("/core/navigation/enableInPlaceForClassicUIs");j=I?I[_]:false;b=d.computeNavigationModeForHomepageTiles(_,k,j);S=f.getOutbound(u,g.inbound);m=r._toHashFromOutbound(S)}else{var D=f.getConfig(u);if(D===undefined){return o}T=s.mapOne(undefined,undefined,undefined,u,v,i);if(n.getMember(D,"sap|flp.target.type")==="URL"){C=n.getMember(D,"sap|flp.target.url")}}y=T.tileResolutionResult;y.navigationMode=b;if(!r._isFormFactorSupported(y)){return o}if(t.contentProviderId){C=r._getMember(h,"sap|app.crossNavigation.inbounds.Shell-launchURL.signature.parameters.sap-external-url.launcherValue.value")}R={id:a,vizId:a,tileIntent:C||m,tileResolutionResult:y,isCatalogTile:true};if(t.contentProviderId&&C){R.contentProviderId=t.contentProviderId;R.externalUrl=C}o.push(R);return o},[]);o.resolve(a)},0);return o.promise()}this.getCatalogError=function(e){if(e.error){return e.error}return undefined};this.getCatalogId=function(e){return i.getId(e)};this.getCatalogTitle=function(e){return i.getTitle(e)};this._isFailedCatalogTile=function(t){return!!(t&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[e.getTileId(t)])};this.getCatalogTileTitle=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return""}return this._mResolvedTiles[e.id].tileResolutionResult.title}if(this._isCatalogTile(e)){if(this._isFailedCatalogTile(e)){return undefined}return e.tileResolutionResult.title}return undefined};this.getCatalogTileSize=function(e){return e.tileResolutionResult.size||"1x1"};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewControl(e)};this.getCatalogTilePreviewSubtitle=function(e){if(this._isGroupTile(e)){return this.getTileSubtitle(e)}return e.tileResolutionResult&&e.tileResolutionResult.subTitle||""};this.getCatalogTilePreviewIcon=function(e){if(this._isGroupTile(e)){return this.getTileIcon(e)}return e.tileResolutionResult&&e.tileResolutionResult.icon||""};this.getCatalogTilePreviewInfo=function(e){if(this._isGroupTile(e)){return this.getTileInfo(e)}return e.tileResolutionResult&&e.tileResolutionResult.info||""};this.getCatalogTilePreviewIndicatorDataSource=function(e){return e.tileResolutionResult&&e.tileResolutionResult.indicatorDataSource};this.getCatalogTileKeywords=function(e){var t=[];var i=e;if(!i){m.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return t}if(this._mResolvedTiles&&this._mResolvedTiles[e.id]){i=this._mResolvedTiles[e.id]}if(i&&i.tileResolutionResult&&Array.isArray(i.tileResolutionResult.keywords)){Array.prototype.push.apply(t,i.tileResolutionResult.keywords)}if(i&&i.tileResolutionResult&&i.tileResolutionResult.title){t.push(i.tileResolutionResult.title)}if(i&&i.tileResolutionResult&&i.tileResolutionResult.subTitle){t.push(i.tileResolutionResult.subTitle)}return t};this._visitBookmarks=function(e,t,i,r){var n;var o=a.parseShellHash(e);if(o){n=P(o)}else{n=G(e)}return this.oCDMService.getSite().then(function(e){var o=e.groups;var a=Object.keys(o).filter(function(e){return!o[e].payload.locked}).map(function(e){return o[e].payload.tiles.filter(function(e){return e.isBookmark&&e.vizType===i&&(e.contentProvider||"")===(r||"")&&I(n,e.target)})}).reduce(function(e,t){Array.prototype.push.apply(e,t);return e},[]);if(!t){return a.length}return jQuery.when(a.map(t)).then(function(){return a.length})})};this.addBookmark=function(e,t,i){var r=this;return new jQuery.Deferred(function(n){var o=r.oCDMService;jQuery.when(t||r.getDefaultGroup(),o.getSite()).done(function(t,s){var l;var u=a.parseShellHash(e.url);var f;var d=false;if(!u){l=G(e.url);d=true}else{l=P(u)}var c=_(e,l,i);if(d){f=new jQuery.Deferred;f.resolve(r._getTileForUrl(c))}else{f=r._getTileFromHash(e.url)}f.done(function(e){e.isLink=false;r._mResolvedTiles[c.id]=e;s.groups[t.identification.id].payload.tiles.push(c);o.save().done(function(){n.resolve(c)}).fail(function(e){n.reject(e)})}).fail(function(e){n.reject("Bookmark creation failed because: "+e)})}).fail(function(e){n.reject(e)})}).promise()};this.addCustomBookmark=function(e,t,i){var r=new jQuery.Deferred;Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("CommonDataModel")]).then(function(o){var a=o[0];var s=o[1];jQuery.when(t||this.getDefaultGroup(),s.getSite()).done(function(t,o){var l=a.parseShellHash(e.url);var u=l===undefined;var f=u?G(e.url):P(l);var d={id:n.generateUniqueId([]),vizType:e.vizType,title:e.title,subTitle:e.subtitle,icon:e.icon,info:e.info,numberUnit:e.numberUnit,target:f,indicatorDataSource:{path:e.serviceUrl,refresh:e.serviceRefreshInterval},vizConfig:e.vizConfig,isBookmark:true};if(i){d.contentProvider=i}this._resolveTileByVizId(d,o).done(function(e){e.isLink=false;this._mResolvedTiles[d.id]=e;o.groups[t.identification.id].payload.tiles.push(d);s.save().done(function(){r.resolve(d)}).fail(r.reject)}.bind(this)).fail(function(e){r.reject("Bookmark creation failed because: "+e)})}.bind(this)).fail(r.reject)}.bind(this));return r.promise()};this.countBookmarks=function(e,t){return this._visitBookmarks(e,undefined,undefined,t)};this.countCustomBookmarks=function(e){if(!e.vizType){return Promise.reject("countCustomBookmarks: Required parameter is missing: oIdentifier.vizType")}return new Promise(function(t,i){this._visitBookmarks(e.url,undefined,e.vizType,e.contentProviderId).done(t).fail(i)}.bind(this))};this.updateBookmarks=function(e,t,i,r){var n=this.oCDMService;var o=this._mResolvedTiles;function s(i){return new jQuery.Deferred(function(r){var n;var s=false;var l={};if(t.url||t.url===""){var u=a.parseShellHash(t.url);if(!u){n=G(t.url)}else{n=P(u)}}if(i.icon!==t.icon){l.icon=t.icon;s=true}if(i.title!==t.title){l.title=t.title;s=true}if(i.subTitle!==t.subtitle){l.subtitle=t.subtitle;s=true}if(t.url&&e!==t.url){l.targetURL=t.url;s=true}if(i.info!==t.info){l.info=t.info;s=true}j(i,t,n);if(s&&o[i.id]){var f=o[i.id].tileComponent;if(f){f.tileSetVisualProperties(l)}}r.resolve(i)}).promise()}return this._visitBookmarks(e,s,i,r).then(function(e){return n.save().then(function(){return e})})};this.updateCustomBookmarks=function(e,t){if(!e.vizType){return Promise.reject("updateCustomBookmarks: Required parameter is missing: oIdentifier.vizType")}if(t.title===""){return Promise.reject("updateCustomBookmarks: The bookmark title cannot be an empty string")}if(t.url===""){return Promise.reject("updateCustomBookmarks: The bookmark url cannot be an empty string")}return new Promise(function(i,r){this.updateBookmarks(e.url,t,e.vizType,e.contentProviderId).done(i).fail(r)}.bind(this))};this.deleteBookmarks=function(e,t,i){var r=this.oCDMService;var n=a.parseShellHash(e);var o;if(n){o=P(n)}else{o=G(e)}return r.getSite().then(function(e){var n=e.groups;var a=Object.keys(n).map(function(e){var r=n[e].payload;var a=0;r.tiles=r.tiles.filter(function(e){if(e.isBookmark&&e.vizType===t&&(e.contentProvider||"")===(i||"")&&I(o,e.target)){++a;return false}return true});return a}).reduce(function(e,t){e+=t;return e},0);return r.save().then(function(){return a})})};this.deleteCustomBookmarks=function(e){if(!e.vizType){return Promise.reject("deleteCustomBookmarks: Required parameter is missing: oIdentifier.vizType")}return new Promise(function(t,i){this.deleteBookmarks(e.url,e.vizType,e.contentProviderId).done(t).fail(i)}.bind(this))};this.onCatalogTileAdded=function(e){};this._onTileSettingsSave=function(e,t){var i=new jQuery.Deferred;if(!e||!e.id||!t){return i.reject().promise()}var r=t.oTitleInput.getValue();var n=t.oSubTitleInput.getValue();var o=t.oInfoInput.getValue();var a=this.getTileTitle(e);var s=this.getTileInfo(e);var l=this.getTileSubtitle(e);if(a===r&&l===n&&s===o){return i.resolve().promise()}var u={};if(a!==r){u.title=r;e.title=r}if(l!==n){u.subtitle=n;e.subTitle=n}if(s!==o){u.info=o;e.info=o}if(this._mResolvedTiles[e.id].tileComponent){this._mResolvedTiles[e.id].tileComponent.tileSetVisualProperties(u)}else if(this._mResolvedTiles[e.id].linkTileControl){if(u.title){this._mResolvedTiles[e.id].linkTileControl.setHeader(u.title)}if(u.subtitle){this._mResolvedTiles[e.id].linkTileControl.setSubheader(u.subtitle)}if(u.title||u.subtitle){this._mResolvedTiles[e.id].linkTileControl.rerender()}}sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){e.save().fail(function(e){m.error(e);i.reject("Could not save personalization changes: "+e)}).done(function(){i.resolve()})});return i.promise()};this.getTileActions=function(e){var t=[];if(this._isGroupTile(e)&&!this._isFailedGroupTile(e)){var i=new p({config:{display_title_text:this.getTileTitle(e),display_subtitle_text:this.getTileSubtitle(e),display_info_text:this.getTileInfo(e)}});var r=l.getTileSettingsAction(i,this._onTileSettingsSave.bind(this,e),this.getTileType(e));t.push(r)}return t};function _(e,t,i){var r=k(e,t);r.isBookmark=true;if(i){r.contentProvider=i}return r}function k(e,t){var i={id:n.generateUniqueId([])};j(i,e,t);return i}function j(e,t,i){t=v({},t);if(i){e.target=i}if(t.title||t.title===""){e.title=t.title}if(t.icon||t.icon===""){e.icon=t.icon}if(t.subtitle||t.subtitle===""){e.subTitle=t.subtitle}if(t.info||t.info===""){e.info=t.info}if(t.numberUnit||t.numberUnit===""){e.numberUnit=t.numberUnit}if(t.dataSource){e.dataSource={type:t.dataSource.type,settings:{odataVersion:g.get(["dataSource","settings","odataVersion"],t)}}}if(t.serviceUrl){e.indicatorDataSource={path:t.serviceUrl}}if(e.indicatorDataSource&&(t.serviceRefreshInterval||t.serviceRefreshInterval===0)){e.indicatorDataSource.refresh=t.serviceRefreshInterval}if(t.vizConfig){e.vizConfig=t.vizConfig}}function I(e,t){if(e&&t){if(e.url){return e.url===t.url}return e.semanticObject===t.semanticObject&&e.action===t.action&&D(e.parameters,t.parameters)&&e.appSpecificRoute===t.appSpecificRoute}return e===t}function D(e,t){e=e||[];t=t||[];if(e.length===t.length){var i=w(e);var r=w(t);return i===r}return false}function w(e){return e.map(function(e){return e.name+e.value}).sort().join()}function G(e){return{url:e}}function P(e){var t={semanticObject:e.semanticObject,action:e.action,parameters:F(e.params)};if(e.appSpecificRoute){t.appSpecificRoute=e.appSpecificRoute}return t}function F(e){return Object.keys(e).map(function(t){var i=e[t]&&e[t][0];return{name:t,value:i||""}})}this._getSiteData=function(){var e=new Promise(function(e,t){sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(i){i.getSite().done(e).fail(t)})});return e};this._addDefaultGroup=function(i,r){var o=e.getDefaultGroup(i);if(!o){o=t.createDefaultGroup(n.generateUniqueId(e.getGroupIdsFromSite(r)));r=t.addGroupToSite(r,o,0);i=e.getGroupsArrayFromSite(r)}this._oDefaultGroup=o;return i}}y.prototype=u.prototype;return y});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/StaticGroupsAdapter", ["sap/ushell/adapters/cdm/v3/AdapterBase","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";function e(e,r,o){t.call(this,e,r,o)}e.prototype=t.prototype;e.prototype._addDefaultGroup=function(t,e){return t};e.prototype._getSiteData=function(){return Promise.resolve(this.oAdapterConfiguration.config)};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications", ["sap/base/util/ObjectPath"],function(t){"use strict";var n={};n.getId=function(n){return t.get(["sap.app","id"],n)};n.getTitle=function(n){return t.get(["sap.app","title"],n)};n.getSubTitle=function(n){return t.get(["sap.app","subTitle"],n)};n.getIcon=function(n){return t.get(["sap.ui","icons","icon"],n)};n.getInfo=function(n){return t.get(["sap.app","info"],n)};n.getKeywords=function(n){return t.get(["sap.app","tags","keywords"],n)};n.getContentProviderId=function(n){return t.get(["sap.app","contentProviderId"],n)};n.getInbounds=function(n){return t.get(["sap.app","crossNavigation","inbounds"],n)};n.getInbound=function(n,e){return t.get(["sap.app","crossNavigation","inbounds",e],n)};n.getInboundTarget=function(n,e,i){var r=t.get([e],n)||{};var a=this.getInbound(r,i);if(!r||!a){return}return{semanticObject:a.semanticObject,action:a.action}};n.getTechnicalAttributes=function(n){return t.get(["sap.app","tags","technicalAttributes"],n)};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readCatalogs", [],function(){"use strict";function i(i){return i.identification.id}function t(i){return i.identification.title}return{getId:i,getTitle:t}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readHome", ["sap/ushell/utils/type","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications"],function(i,t){"use strict";var e={};e.getGroupsArrayFromSite=function(i){var t=[];i.site.payload.groupsOrder.forEach(function(e,n){var r=i.groups[e];if(r){r.payload=r.payload||{};t.push(r)}});return t};e.getGroupsMapFromSite=function(i){return i.groups};e.getGroupIdsFromSite=function(i){return i.site.payload.groupsOrder};e.getGroupFromSite=function(i,t){return i.groups[t]};e.getDefaultGroup=function(i){var t=i.filter(function(i){return i.payload.hasOwnProperty("isDefaultGroup")});if(t.length>0){return t[0]}};e.getGroupId=function(i){return i.identification&&i.identification.id};e.getGroupTitle=function(i){return i.identification.title};e.isGroupPreset=function(i){if(!i.payload.hasOwnProperty("isPreset")){return true}return!!i.payload.isPreset};e.isGroupLocked=function(i){return!!i.payload.locked};e.isGroupVisible=function(i){return!!(i.identification.isVisible===undefined||i.identification.isVisible===true)};e.getGroupTiles=function(t){if(t.payload.tiles&&i.isArray(t.payload.tiles)&&t.payload.tiles.length>0){return t.payload.tiles}return[]};e.getGroupLinks=function(t){if(t.payload.links&&i.isArray(t.payload.links)&&t.payload.links.length>0){return t.payload.links}return[]};e.getTileId=function(i){return i.id};e.getTileVizId=function(i){return i.vizId};e.getTileTitle=function(i,t){var e;if(t&&t.isBookmark){return t.title}e=i[t.id];if(e){return t.title||e.tileResolutionResult.title}};e.getContentProviderId=function(i){return i.contentProvider||undefined};e.getTileSubtitle=function(i,t){var e;if(t.isBookmark){return t.subTitle}e=i[t.id];if(e){return t.subTitle||e.tileResolutionResult.subTitle}};e.getTileInfo=function(i,t){var e;if(t.isBookmark){return t.info}e=i[t.id];if(e){return t.info||e.tileResolutionResult.info}};e.getTileIcon=function(i,t){var e;if(t.isBookmark){return t.icon}e=i[t.id];if(e){return t.icon||e.tileResolutionResult.icon}};e.getTileIndicatorDataSource=function(i,t){var e;if(t.isBookmark){return t.icon}e=i[t.id];if(e){return t.icon||e.tileResolutionResult.icon}};e.getTileSize=function(i,t){var e=i[t.id];if(e&&e.tileResolutionResult&&e.tileResolutionResult.size){return e.tileResolutionResult.size}};e.isLink=function(i,t){var e=i[t.id];if(e){return!!e.isLink}return false};e.isCard=function(i,t){var e=i[t.id];if(e){return!!e.tileResolutionResult.isCard}return false};e.isGroupTile=function(i){return!!(i&&i.id&&!i.isCatalogTile)};e.supportsFormFactor=function(i,t){return i.deviceTypes&&i.deviceTypes[t]};e.getInbound=function(i,e){var n=t.getInbound(i,e);return n&&{key:e,inbound:n}};return e},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readPages", ["sap/base/util/ObjectPath","sap/base/util/values"],function(a,e){"use strict";var t={};t.getVisualizationReferences=function(t){var i;var n=[];var r=a.get("payload.sections",t)||{};e(r).forEach(function(e){i=a.get("layout.vizOrder",e)||[];i.forEach(function(a){if(e.viz[a]){n.push(e.viz[a])}})});return n};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils", ["sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/Config","sap/base/util/deepClone","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ushell/library"],function(a,t,e,i,r,o,n,s,u,p,d){"use strict";var c={};var l=d.DisplayFormat;c.getVizData=function(r,n,s){if(n.isBookmark&&n.url){n=o(n);n.subTitle=n.subtitle;n.target=i.toTargetFromHash(n.url)}var p=this.getCdmParts(r,n);var d=p&&p[1]||{};var c=p&&p[3]||{};var l=a.get(r,e.getTileVizId(n))||{};var v={id:e.getTileId(n),vizId:e.getTileVizId(n)||"",vizType:n.vizType||a.getTypeId(l)||"",vizConfig:u({},d,n.vizConfig),title:a.getTitle(p)||"",subtitle:a.getSubTitle(p)||"",icon:a.getIcon(p)||"",keywords:a.getKeywords(p)||[],info:a.getInfo(p)||"",target:n.target||a.getTarget(l)||{},indicatorDataSource:this._getIndicatorDataSource(n,l,s),isBookmark:n.isBookmark||false,contentProviderId:n.contentProviderId||t.getContentProviderId(c)||"",displayFormatHint:n.displayFormatHint,numberUnit:a.getNumberUnit(p),_instantiationData:a.getInstantiationData(l)};v.target=this.harmonizeTarget(v.target);v.targetURL=i.toHashFromVizData(v,r.applications);if(v.indicatorDataSource){if(v.indicatorDataSource.dataSource){v.dataSource=a.getDataSource(p,v.indicatorDataSource.dataSource)}else if(n.isBookmark&&n.dataSource){v.dataSource=n.dataSource}}if(n.isBookmark){this._addBookmarkInstantiationData(v,r)}if(!v._instantiationData||!Object.keys(v._instantiationData)){v._instantiationData={platform:"CDM",vizType:a.getType(r,v.vizType)}}this._evaluateDisplayFormat(v,r);return v};c._getIndicatorDataSource=function(t,e,i){if(t.indicatorDataSource&&t.indicatorDataSource.path){if(t.contentProviderId&&i){t.indicatorDataSource.path=i.getFullyQualifiedXhrUrl(t.indicatorDataSource.path)}return t.indicatorDataSource}return a.getIndicatorDataSource(e)};c.getVizRef=function(a){var t={id:a.id,vizId:a.vizId,title:a.title,subTitle:a.subtitle,icon:a.icon,keywords:a.keywords,info:a.info,target:a.target,indicatorDataSource:a.indicatorDataSource,dataSource:a.dataSource,contentProviderId:a.contentProviderId,displayFormatHint:a.displayFormatHint,numberUnit:a.numberUnit};if(t.indicatorDataSource&&t.indicatorDataSource.originalPath){t.indicatorDataSource.path=t.indicatorDataSource.originalPath;delete t.indicatorDataSource.originalPath}if(a.isBookmark){t.isBookmark=a.isBookmark;if(a.vizConfig!==undefined&&!p(a.vizConfig)){t.vizType=a.vizType;if(a.cdmVizType){t.vizType=a.cdmVizType}t.vizConfig=a.vizConfig}}return t};c.getCdmParts=function(i,r){var o=a.get(i,e.getTileVizId(r))||{};var n=a.getConfig(o);var s=a.getAppDescriptor(i,a.getAppId(o));var u=t.getInbound(s,a.getInboundId(o));return[r,n,u,s]};c.harmonizeTarget=function(a){var t=a.parameters;if(!t||n(t)){return a}var e={};t.forEach(function(a){if(e[a.name]){if(!Array.isArray(e[a.name].value.value)){e[a.name].value.value=[e[a.name].value.value]}e[a.name].value.value.push(a.value)}else{e[a.name]={value:{value:a.value,format:"plain"}}}});a.parameters=e;return a};c._evaluateDisplayFormat=function(t,e){var i=t.displayFormatHint;var r=a.getType(e,t.vizType);var o=a.getTileSize(r);var n=o==="1x2"?l.StandardWide:l.Standard;var s=[n,l.Compact];t.supportedDisplayFormats=a.getSupportedDisplayFormats(r)||s;var u=a.getDefaultDisplayFormat(r)||n;if(t.supportedDisplayFormats.indexOf(i)===-1){t.displayFormatHint=u}};c._addBookmarkInstantiationData=function(t,e){if(t.vizType){var i=a.getType(e,t.vizType);var r=s.get(["sap.app","type"],i||{});if(i&&r!=="chipVizType"){t._instantiationData={platform:"CDM",vizType:i}}else{var n=a.getChipConfigFromVizReference(t);t._instantiationData={platform:"ABAP",chip:o(n),simplifiedChipFormat:true};t.cdmVizType=t.vizType;t.vizType=n.chipId}}else if(t.indicatorDataSource&&t.indicatorDataSource.path){t.vizType="sap.ushell.DynamicAppLauncher"}else{t.vizType="sap.ushell.StaticAppLauncher"}};c.getBookmarkVizTypeIds=function(t){var e=["sap.ushell.StaticAppLauncher","sap.ushell.DynamicAppLauncher"];var i=t.vizType;if(i&&!e.includes(i)){e.push(i)}var r=a.getChipConfigFromVizReference(t);var o=r&&r.chipId;if(o&&!e.includes(o)){e.push(o)}return e};return c});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations", ["sap/ushell/utils","sap/base/util/ObjectPath"],function(t,e){"use strict";var n={};n.getMap=function(t){return t.visualizations};n.get=function(t,n){return e.get(["visualizations",n],t)};n.getTypeMap=function(t){return t.vizTypes};n.getType=function(t,n){return e.get(["vizTypes",n],t)};n.getTypeId=function(t){return e.get("vizType",t||{})};n.isStandardVizType=function(t){return t==="sap.ushell.StaticAppLauncher"||t==="sap.ushell.DynamicAppLauncher"};n.getSupportedDisplayFormats=function(t){return e.get(["sap.flp","vizOptions","displayFormats","supported"],t||{})};n.getDefaultDisplayFormat=function(t){return e.get(["sap.flp","vizOptions","displayFormats","default"],t||{})};n.getTileSize=function(t){return e.get(["sap.flp","tileSize"],t||{})};n.getConfig=function(t){return e.get("vizConfig",t||{})};n.getTarget=function(t){var n=this.getConfig(t);return e.get(["sap.flp","target"],n||{})};n.getAppId=function(t){var n=this.getTarget(t);return e.get("appId",n||{})};n.getInboundId=function(t){var n=this.getTarget(t);return e.get("inboundId",n||{})};n.getOutbound=function(t,e){var n={semanticObject:e.semanticObject,action:e.action,parameters:this.getTarget(t).parameters||{}};n.parameters["sap-ui-app-id-hint"]={value:{format:"plain",value:this.getAppId(t)}};return n};n.startsExternalUrl=function(t){var e=this.getTarget(t);return e&&e.type==="URL"};n.getAppDescriptor=function(t,n){return e.get(["applications",n],t)};n.getKeywords=function(e){var n=t.clone(e);n.splice(2,1);n.splice(0,1);return t.getNestedObjectProperty(n,["sap|app.tags.keywords","sap|app.tags.keywords"])};n.getTitle=function(e){return t.getNestedObjectProperty(e,["title","sap|app.title","title","sap|app.title"])};n.getSubTitle=function(e){return t.getNestedObjectProperty(e,["subTitle","sap|app.subTitle","subTitle","sap|app.subTitle"])};n.getIcon=function(e){return t.getNestedObjectProperty(e,["icon","sap|ui.icons.icon","icon","sap|ui.icons.icon"])};n.getNumberUnit=function(e){var n=t.clone(e);n.splice(2,2);return t.getNestedObjectProperty(n,["numberUnit","sap|flp.numberUnit"])};n.getInfo=function(e){return t.getNestedObjectProperty(e,["info","sap|app.info","info","sap|app.info"])};n.getShortTitle=function(e){var n=t.clone(e);n.splice(0,1);return t.getNestedObjectProperty(n,["sap|app.shortTitle","shortTitle","sap|app.shortTitle"])};n.getInstantiationData=function(t){return e.get(["vizConfig","sap.flp","_instantiationData"],t)};n.getIndicatorDataSource=function(t){return e.get(["vizConfig","sap.flp","indicatorDataSource"],t)};n.getDataSource=function(e,n){var i=t.clone(e);i.splice(2,1);i.splice(0,1);var r=t.getNestedObjectProperty(i,["sap|app.dataSources","sap|app.dataSources"])||{};return r[n]};n.getChipConfigFromVizReference=function(t){return e.get(["vizConfig","sap.flp","chipConfig"],t)};return n},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/utilsCdm", ["sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/util/merge","sap/base/util/deepEqual","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/utils/UrlParsing","sap/base/Log"],function(e,t,a,r,i,s,n,o,p,u){"use strict";var l={};l.getMember=function(t,a){return e.getMember(t,a)};l.getNestedObjectProperty=function(t,a,r){return e.getNestedObjectProperty(t,a,r)};l.mapOne=function(e,i,n,p,u,l){var c=false;i=a({},i);n=a({},n);p=a({},p);u=a({},u);p=p||{};u=u||{};var m={};m.semanticObject=this.getMember(i,"semanticObject");m.action=this.getMember(i,"action");var f=t.getConfig(p);m.title=t.getTitle([undefined,f,i,n]);m.info=t.getInfo([undefined,f,i,n]);m.icon=t.getIcon([undefined,f,i,n]);m.subTitle=t.getSubTitle([undefined,f,i,n]);m.shortTitle=t.getShortTitle([undefined,f,i,n]);m.keywords=t.getKeywords([undefined,f,i,n]);m.numberUnit=t.getNumberUnit([undefined,f,undefined,undefined]);m.deviceTypes=this.getMember(n,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(e){if(Object.prototype.hasOwnProperty.call(this.getMember(i,"deviceTypes")||{},e)){m.deviceTypes[e]=i.deviceTypes[e]}if(!Object.prototype.hasOwnProperty.call(m.deviceTypes,e)){m.deviceTypes[e]=true}m.deviceTypes[e]=!!m.deviceTypes[e]}.bind(this));m.signature=this.getMember(i,"signature")||{};m.signature.parameters=this.getMember(m,"signature.parameters")||{};m.signature.additionalParameters=this.getMember(i,"signature.additionalParameters")||"allowed";var d=this.getMember(m,"signature.parameters.sap-hide-intent-link");if(d&&d.hasOwnProperty("defaultValue")){m.hideIntentLink=d.defaultValue.value==="true"}if(d&&!d.required&&d.hasOwnProperty("defaultValue")){delete m.signature.parameters["sap-hide-intent-link"]}var g=this.getMember(n,"sap|platform|runtime");m.resolutionResult=a({},g);if(g){m.resolutionResult["sap.platform.runtime"]=a({},g)}if(this.getMember(n,"sap|ui.technology")==="GUI"){m.resolutionResult["sap.gui"]=this.getMember(n,"sap|gui")}if(this.getMember(n,"sap|ui.technology")==="WDA"){m.resolutionResult["sap.wda"]=this.getMember(n,"sap|wda")}if(this.getMember(n,"sap|ui.technology")==="URL"){if(n["sap.url"]){m.resolutionResult["sap.platform.runtime"]=m.resolutionResult["sap.platform.runtime"]||{};m.resolutionResult.url=n["sap.url"].uri;m.resolutionResult["sap.platform.runtime"].url=n["sap.url"].uri}else if(g&&g.uri){m.resolutionResult["sap.platform.runtime"].url=g.uri;m.resolutionResult.url=g.uri}}if(!m.resolutionResult["sap.ui"]){m.resolutionResult["sap.ui"]={}}m.resolutionResult["sap.ui"].technology=this.getMember(n,"sap|ui.technology");m.resolutionResult.applicationType=this._formatApplicationType(m.resolutionResult,n);m.resolutionResult.systemAlias=m.resolutionResult.systemAlias||this.getMember(i,"systemAlias");m.resolutionResult.systemAliasSemantics="apply";m.resolutionResult.text=m.title;m.resolutionResult.appId=this.getMember(n,"sap|app.id");var h;var b;var y=this.getMember(p,"vizConfig.sap|flp.indicatorDataSource");var v={};if(!r(u)){var M=this.getMember(u,"sap|app.type");if(M==="card"){c=true;v=s({},u,p.vizConfig)}else{v.componentName=this.getMember(u,"sap|ui5.componentName");var O=this.getMember(u,"sap|platform|runtime.componentProperties");if(O){v.componentProperties=O}if(this.getMember(u,"sap|platform|runtime.includeManifest")){v.componentProperties=v.componentProperties||{};v.componentProperties.manifest=s({},u,p.vizConfig);delete v.componentProperties.manifest["sap.platform.runtime"]}}}if(this.getMember(n,"sap|app.type")==="plugin"||this.getMember(n,"sap|flp.type")==="plugin"){return undefined}var T=this.getNestedObjectProperty([f,n,u],"sap|flp.tileSize");var R=this.getNestedObjectProperty([f,n,u],"sap|app.description");if(this.getMember(n,"sap|ui.technology")==="GUI"&&this.getMember(n,"sap|gui.transaction")){h=this.getMember(n,"sap|gui.transaction")}if(this.getMember(n,"sap|ui.technology")==="WDA"&&this.getMember(n,"sap|wda.applicationId")){h=this.getMember(n,"sap|wda.applicationId")}var P=this.getNestedObjectProperty([f,n,u],"sap|app.dataSources");if(this.getMember(n,"sap|app.id")){b=this.getMember(n,"sap|app.id")}var j=o.getContentProviderId(n)||"";m.tileResolutionResult={appId:b,title:m.title,subTitle:m.subTitle,icon:m.icon,size:T,info:m.info,keywords:m.keywords,tileComponentLoadInfo:v,indicatorDataSource:y,dataSources:P,description:R,runtimeInformation:g,technicalInformation:h,deviceTypes:m.deviceTypes,isCard:c,contentProviderId:j,numberUnit:m.numberUnit};var I=this.getMember(n,"sap|integration.urlTemplateId");var S=this.getTemplatePayloadFromSite(I,l);if(S){m.templateContext={payload:S,site:l,siteAppSection:n}}return m};l.getTemplatePayloadFromSite=function(e,t){if(!t||typeof e!=="string"){return null}var a=e.replace(/[.]/g,"|");return this.getMember(t.urlTemplates,a+".payload")};l._formatApplicationType=function(e,t){var a=e.applicationType;if(a){return a}var r=this.getMember(t,"sap|platform|runtime.componentProperties.self.name")||this.getMember(t,"sap|ui5.componentName");if(this.getMember(t,"sap|flp.appType")==="UI5"||this.getMember(t,"sap|ui.technology")==="UI5"){e.applicationType="SAPUI5";e.additionalInformation="SAPUI5.Component="+r;e.url=this.getMember(t,"sap|platform|runtime.componentProperties.url");e.applicationDependencies=this.getMember(t,"sap|platform|runtime.componentProperties");return"SAPUI5"}if(this.getMember(t,"sap|ui.technology")==="GUI"){e.applicationType="TR";e["sap.gui"]=this.getMember(t,"sap|gui");e.systemAlias=this.getMember(t,"sap|app.destination.name");return"TR"}if(this.getMember(t,"sap|ui.technology")==="WDA"){e.applicationType="WDA";e["sap.wda"]=this.getMember(t,"sap|wda");e.systemAlias=this.getMember(t,"sap|app.destination.name");return"WDA"}if(this.getMember(t,"sap|ui.technology")==="URL"){e.applicationType="URL";e.systemAlias=this.getMember(t,"sap|app.destination.name")}return"URL"};l.formatSite=function(e){var t=this;if(!e){return[]}var a=[];try{var r=Object.keys(e.applications||{}).sort();r.forEach(function(r){try{var i=e.applications[r];var s=this.getMember(i,"sap|app.crossNavigation.inbounds");if(s){var n=Object.keys(s).sort();n.forEach(function(r){var n=s[r];var p=t.mapOne(r,n,i,undefined,undefined,e);if(p){p.contentProviderId=o.getContentProviderId(i)||"";a.push(p)}})}}catch(e){u.error("Error in application "+r+": "+e,e.stack)}}.bind(this))}catch(e){u.error(e);u.error(e.stack);return[]}return a};l.toHashFromInbound=function(e){var t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};var a=i.get("signature.parameters",e)||{};Object.keys(a).forEach(function(e){if(a[e].filter&&Object.prototype.hasOwnProperty.call(a[e].filter,"value")&&(a[e].filter.format===undefined||a[e].filter.format==="plain")){t.params[e]=[a[e].filter.value]}if(a[e].launcherValue&&Object.prototype.hasOwnProperty.call(a[e].launcherValue,"value")&&(a[e].launcherValue.format===undefined||a[e].launcherValue.format==="plain")){t.params[e]=[a[e].launcherValue.value]}});var r=p.constructShellHash(t);if(!r){return undefined}return r};l.toHashFromOutbound=function(e){var t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};var a=e.parameters||{};Object.keys(a).forEach(function(e){if(a.hasOwnProperty(e)&&typeof a[e].value==="object"){t.params[e]=[a[e].value.value]}});var r=p.constructShellHash(t);if(!r){return undefined}return r};l.toHashFromVizData=function(e,t){if(!e.target){return undefined}var a=e.target;if(a.type==="URL"){return a.url}var r=a.appId;var i=a.inboundId;var s;if(r&&i){var n=o.getInboundTarget(t,r,i);s={};if(n){s.semanticObject=n.semanticObject;s.action=n.action;s.parameters=a.parameters||{};s.parameters["sap-ui-app-id-hint"]={value:{value:r,format:"plain"}};s.appSpecificRoute=a.appSpecificRoute||""}}else if(a.semanticObject&&a.action){s=a}return l.toHashFromTarget(s)};l.toHashFromTarget=function(e){try{var t={};var a=i.get("parameters",e)||{};Object.keys(a).forEach(function(e){t[e]=Array.isArray(a[e].value.value)?a[e].value.value:[a[e].value.value]});var r={target:{semanticObject:e.semanticObject,action:e.action},params:t,appSpecificRoute:e.appSpecificRoute};return"#"+p.constructShellHash(r)}catch(e){return undefined}};l.toTargetFromHash=function(e){var t=p.parseShellHash(e);if(t!==undefined){var a=t.params||{};if(Object.keys(a).length>0){t.parameters=[];Object.keys(a).forEach(function(e){var r=Array.isArray(a[e])?a[e]:[a[e]];r.forEach(function(a){var r={name:e,value:a};t.parameters.push(r)})})}delete t.params}else{t={type:"URL",url:e}}return t};l.isSameTarget=function(e,t){var a;if(e.type!==t.type){return false}if(e.type==="URL"){a=e.url===t.url}else{a=e.semanticObject===t.semanticObject&&e.action===t.action&&e.appSpecificRoute===t.appSpecificRoute&&n(e.parameters,t.parameters)}return a};return l});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cep/MenuAdapter", ["sap/base/Log","sap/ui/core/Configuration","sap/ushell/Config","sap/ushell/library","sap/ushell/utils/HttpClient"],function(e,t,n,i,r){"use strict";var s=i.ContentNodeType;var a="sap.ushell.adapters.cep.MenuAdapter";var o=function(t,n,i){if(i&&i.config&&i.config.serviceUrl&&i.config.siteId){this.httpClient=new r;this.serviceUrl=i.config.serviceUrl;this.siteId=i.config.siteId;this.oSiteDataPromise=this._doRequest(this.serviceUrl,this.siteId)}else{e.error("Invalid configuration provided.","",a)}};o.prototype.isMenuEnabled=function(){if(!n.last("/core/menu/enabled")){return Promise.resolve(false)}return this.getMenuEntries().then(function(e){return e.length>0})};o.prototype.getMenuEntries=function(){return this.oSiteDataPromise.then(this._getSpaces.bind(this)).then(this._buildMenuEntries.bind(this))};o.prototype.getContentNodes=function(){return this.oSiteDataPromise.then(this._getSpaces.bind(this)).then(this._buildContentNodes.bind(this))};o.prototype._buildMenuEntries=function(e){return e.filter(this._isSpaceNotEmpty.bind(null,"FLP menu")).map(function(e){var t={title:e.Descriptor.title||e.Id,"help-id":"Space-"+e.Id,description:e.Descriptor.description||"",icon:undefined,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:e.Id},{name:"pageId",value:e.WorkPages.nodes[0].Id}],innerAppRoute:undefined},menuEntries:[]};var n=e.WorkPages.nodes.map(function(t){return{title:t.Descriptor.title||t.Id,"help-id":"Page-"+t.Id,description:t.Descriptor.description||"",icon:undefined,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:e.Id},{name:"pageId",value:t.Id}],innerAppRoute:undefined},menuEntries:[]}});if(n.length>1){t.menuEntries=n}return t})};o.prototype._buildContentNodes=function(e){return e.filter(this._isSpaceNotEmpty.bind(null,"content nodes")).map(function(e){return{id:e.Id,label:e.Descriptor.title||e.Id,type:s.Space,isContainer:false,children:e.WorkPages.nodes.map(function(e){return{id:e.Id,label:e.Descriptor.title||e.Id,type:s.Page,isContainer:this._isTraditionalPage(e.Descriptor),children:[]}}.bind(this))}}.bind(this))};o.prototype.isWorkPage=function(e){return this.oSiteDataPromise.then(this._getSpaces.bind(this)).then(function(t){var n=t.flatMap(function(e){return e.WorkPages&&e.WorkPages.nodes||[]}).find(function(t){return t.Id===e});if(n){return!this._isTraditionalPage(n.Descriptor)}return false}.bind(this))};o.prototype._isTraditionalPage=function(e){if(e.pageType&&e.pageType.toLowerCase()===s.Page.toLowerCase()){return true}return false};o.prototype._doRequest=function(n,i){var r="{"+"Spaces("+'SiteId:"'+i+'"'+"){"+"nodes{"+"Id,"+'Descriptor(select:["/title"]),'+"WorkPages{"+"nodes{"+"Id,"+'Descriptor(select:["/title","/pageType","/description"])'+"}"+"}"+"}"+"}"+"}";return this.httpClient.get(n+"?query="+r,{headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Language":t.getLanguageTag()}}).then(function(t){if(t.status<200||t.status>=300){e.error(t.responseText,"",a);return Promise.reject("HTTP request to GraphQL service failed with status: "+t.status+" - "+t.statusText)}return JSON.parse(t.responseText||"{}")}).then(function(e){try{e.data.Spaces.nodes=e.data.Spaces.nodes.filter(function(e){return e.Id!=="default_space"})}catch(e){}return e})};o.prototype._getSpaces=function(t){if(t.data&&t.data.Spaces&&Array.isArray(t.data.Spaces.nodes)){return t.data.Spaces.nodes}e.warning("No spaces found for site-id: "+this.siteId,"",a);return[]};o.prototype._isSpaceNotEmpty=function(t,n){if(!n.WorkPages||!n.WorkPages.nodes||n.WorkPages.nodes.length===0){e.warning("FLP space "+n.Id+" without page omitted in "+t+".","",a);return false}return true};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cep/NavTargetResolutionAdapter", ["sap/base/util/ObjectPath","sap/ui/core/Configuration","sap/ui/thirdparty/jquery","sap/ushell/Container","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/utils/HttpClient","sap/ushell/Config"],function(t,e,jQuery,n,i,r,a){;"use strict";var o=function(t,e,n){this.oAdapterConfiguration=n;this._addVirtualInboundsToApplications();this._initializeHttpClient()};o.prototype._addVirtualInboundsToApplications=function(){var e=t.create("config.applications",this.oAdapterConfiguration);var n=i.getInbounds();n.forEach(function(t){var n=t.semanticObject+"-"+t.action;e[n]=t.resolutionResult})};o.prototype._getIntentForService=function(t){return sap.ushell.Container.getServiceAsync("URLParsing").then(function(e){var n=e.parseShellHash(t);return{semanticObject:n.semanticObject,semanticObjectAction:n.action,intentParameters:n.params,queryParameters:{siteId:a.last("/core/site/siteId")||""}}})};o.prototype._initializeHttpClient=function(){var t={"Content-Type":"application/json; utf-8",Accept:"application/json","Accept-Language":e.getLanguageTag()||""};var n=this.oAdapterConfiguration.config.navServiceUrl+"/";this.oHttpClient=new r(n,{headers:t})};o.prototype.toPromise=function(t){var e=this;return function(n){var i=new jQuery.Deferred;t.call(e,n).then(i.resolve).catch(i.reject).finally(i.always);return i.promise()}};o.prototype.resolveHashFragment=function(t){return this.toPromise(this._resolveHashFragment).call(this,t)};o.prototype._resolveHashFragment=function(t){return this._getIntentForService(t).then(function(t){var e=this.oAdapterConfiguration.config.navServiceUrl+"/resolve";return this.oHttpClient.post(e,{data:JSON.stringify(t)}).then(function(t){if(t.status<200||t.status>=300){return Promise.reject("HTTP request to GraphQL service failed with status: "+t.status+" - "+t.statusText)}return JSON.parse(t.responseText)}).then(function(t){var e=t.value||t;var n=Array.isArray(e)?e[0].url:e.url;return{additionalInformation:"",url:n,applicationType:"URL",navigationMode:"newWindow"}})}.bind(this))};return o},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cep/SearchCEPAdapter", ["sap/base/Log","sap/ui/core/Configuration","sap/ushell/Config"],function(e,t,a){"use strict";var r=function(e,t,a){this._oConfig=a&&a.config||{};this._oConfig.searchProvider=this._oConfig.searchProvider||"/navigation/search/api/v1/lookupTargets"};r.prototype.execSearch=function(r){var s=this._oConfig.searchProvider;var i=sap.ushell.Container.getFLPPlatform(true);var n=new URL(document.URL).searchParams;var o=a.last("/core/site/siteId");var c=t.getLanguageTag();if(typeof r==="string"&&r.length>0){s+="?query="+encodeURIComponent(r)}if(typeof o==="string"&&o.length>0){s+=s.indexOf("?")>0?"&":"?";s+="siteId="+encodeURIComponent(o)}if(i==="MYHOME"){s+=s.indexOf("?")>0?"&":"?";s+="genLink=true"}if(e.getLevel()>=e.Level.DEBUG){e.debug("Navigation service search triggered","url: "+s,"sap.ushell.adapters.cep.SearchCEPAdapter::execSearch")}if(n.get("sap-statistics")==="true"||window.localStorage.getItem("sap-ui-statistics")==="X"){s+=s.indexOf("?")>0?"&":"?";s+="sap-statistics=true"}return fetch(s,{method:"GET",headers:{"Content-Type":"application/json; utf-8",Accept:"application/json","Accept-Language":c}}).then(function(t){if(t.ok===false){e.error("Navigation service search adapter failed","error: "+t.status+","+t.statusText+"\nurl: "+s,"sap.ushell.adapters.cep.SearchCEPAdapter::execSearch");return Promise.reject(t.statusText)}return t.json()}).then(function(t){if(e.getLevel()>=e.Level.DEBUG){e.debug("Navigation service search adapter success","url: "+s+"\n\n"+JSON.stringify(t||{},null,2),"sap.ushell.adapters.cep.SearchCEPAdapter::execSearch")}return t})};return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cep/SearchCEPApplicationAdapter", ["sap/ushell/utils/UrlParsing","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/Sorter"],function(t,e,r,i){"use strict";var n=function(t,e,r){};n.prototype.execSearch=function(e){return this.search({searchTerm:e}).then(function(e){var r=e.data.map(function(e){var r=t.parseShellHash(e.url);return{text:e.label,icon:e.icon,url:e.url,semanticObject:r&&r.semanticObject,semanticObjectAction:r&&r.action}});return{applications:r}})};n.prototype.search=function(t){return this._searchWithSearchableContentAndJsSearch(t)};n.prototype._searchWithSearchableContentAndJsSearch=function(t){return Promise.all([this._getNormalizedSearchableContentApps(),this._loadJsSearchModule()]).then(function(e){var r=e[0];var i=e[1];var n=new i({objects:r,fields:["text","title","keywords"],shouldNormalize:!String.prototype.normalize,algorithm:{id:"contains-ranked",options:[50,49,40,39,5,4,51]}});var a={searchFor:t&&t.searchTerm||"*",top:Number.MAX_SAFE_INTEGER,skip:0};var o=n.search(a);var s=o.results.map(function(t){return t.object});return this._getPaginatedResult(this._applyFiltersAndSorter(s,t.filter,t.sort),t.skip||0,t.top||10)}.bind(this))};n.prototype._getPaginatedResult=function(t,e,r){return{data:t.slice(e,e+r),count:t.length}};n.prototype._getSearchableContent=function(){return sap.ushell.Container.getServiceAsync("SearchableContent").then(function(t){return t.getApps()})};n.prototype._getNormalizedSearchableContentApps=function(){return this._getSearchableContent().then(function(t){return this._normalizeSearchableContentServiceResult(t)}.bind(this))};n.prototype._normalizeSearchableContentServiceResult=function(t){if(!Array.isArray(t)){t=[]}var e=[];t.forEach(function(t){t.visualizations.forEach(function(r){var i=r.title;if(r.subtitle){i=i+" - "+r.subtitle}e.push({title:r.vizConfig&&r.vizConfig["sap.app"]&&r.vizConfig["sap.app"].title||r.title||t.title,description:r.vizConfig&&r.vizConfig["sap.app"]&&r.vizConfig["sap.app"].subTitle||r.subtitle||t.subtitle,keywords:Array.isArray(r.keywords)?r.keywords.join(" "):"",icon:r.icon||"",label:i,visualization:r,url:r.targetURL,technicalAttributes:Array.isArray(t.technicalAttributes)?t.technicalAttributes.join(" "):""})})});return e};n.prototype._loadJsSearchModule=function(){this._loadJsSearchModulePromise=new Promise(function(t){sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){sap.ui.require(["sap/esh/search/ui/appsearch/JsSearch"],function(e){t(e)})})});return this._loadJsSearchModulePromise};n.prototype._createFilters=function(t){var e=null;if(t){if(typeof t==="object"){if(Array.isArray(t.filters)){t.filters=t.filters.map(function(t){return t instanceof r?t:new r(t)})}e=[t instanceof r?t:new r(t)]}}return e};n.prototype._createSorters=function(t){var e=null;if(t){if(typeof t==="object"&&!Array.isArray(t)){t=[t]}if(Array.isArray(t)){e=t.map(function(t){return t instanceof i?t:new i(t)})}}return e};n.prototype._applyFiltersAndSorter=function(t,r,i){if(!r&&!i){return t}var n=this._createFilters(r),a=this._createSorters(i),o=new e;o.setSizeLimit(Number.MAX_SAFE_INTEGER);o.setData(t);return o.bindList("/",null,a,n).getContexts().map(function(t){return t.getObject()})};return n},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cflp/UserDefaultParameterPersistenceAdapter", ["sap/ushell/utils/HttpClient","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath"],function(e,jQuery,t,r){"use strict";var a=function(e,t,r){this.sBaseServicePath="/sap/opu/odata/UI2/INTEROP/";this.oConfig={};if(r&&r.userBaseServicePath!==undefined){this.oConfig.sBaseServicePath=r.userBaseServicePath}else{this.oConfig.sBaseServicePath=this.sBaseServicePath}this.oConfig.oHttpClientConfig={"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient(),"sap-statistics":true,headers:{Accept:"application/json"},data:{}};this._mSystems={}};a.prototype.loadParameterValue=function(e,t){var r=new jQuery.Deferred;var a=this._isValidParameterName(e);if(a){this._getUserDefaultParameterContainer(t).done(function(t){var a=t.find(function(t){return t.id===e});if(a!==undefined){var s=JSON.parse(a.value);r.resolve(s)}else{r.reject("Parameter does not exist: "+e)}}).fail(function(e){r.reject(e)})}else{r.reject('Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :"'+e+'"')}return r.promise()};a.prototype._createRequest=function(e){return{data:{PersContainerItems:e,appName:"",category:"P",component:"",id:"sap.ushell.UserDefaultParameter"},headers:{"content-type":"application/json",accept:"application/json"}}};a.prototype.saveParameterValue=function(e,t,r){var a=new jQuery.Deferred;var s=this._isValidParameterName(e);if(s){var i=this._getXHttpWrapper(r);this._getUserDefaultParameterContainer(r).done(function(r){var s=r.findIndex(function(t){return t.id===e});if(s>-1){r[s].value=JSON.stringify(t)}else{var n={category:"I",containerCategory:"P",containerId:"sap.ushell.UserDefaultParameter",id:e,value:JSON.stringify(t)};r.push(n)}i.post("PersContainers",this._createRequest(r)).then(a.resolve).catch(a.reject)}.bind(this)).fail(a.reject)}else{a.reject('Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :"'+e+'"')}return a.promise()};a.prototype.deleteParameter=function(e,t){var r=new jQuery.Deferred;var a=this._isValidParameterName(e);if(a){var s=this._getXHttpWrapper(t);this._getUserDefaultParameterContainer(t).done(function(t){var a=t.findIndex(function(t){return t.id===e});if(a>-1){t.splice(a,1);s.post("PersContainers",this._createRequest(t)).then(r.resolve).catch(r.reject)}else{r.resolve()}}.bind(this)).fail(r.reject)}else{r.reject('Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :"'+e+'"')}return r.promise()};a.prototype.getStoredParameterNames=function(e){var t=new jQuery.Deferred;this._getUserDefaultParameterContainer(e).done(function(e){var r=e.map(function(e){return e.id});r.sort();t.resolve(r)}).fail(function(e){t.reject(e)});return t.promise()};a.prototype._getXHttpWrapper=function(t){if(!this._mSystems[t.id]){this._mSystems[t.id]={}}if(!this._mSystems[t.id].oHttpWrapper){var r=t.getFullyQualifiedXhrUrl(this.oConfig.sBaseServicePath);this._mSystems[t.id].oHttpWrapper=new e(r,this.oConfig.oHttpClientConfig)}return this._mSystems[t.id].oHttpWrapper};a.prototype._isValidParameterName=function(e){var r=!!(typeof e==="string"&&e.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(e));if(!r){t.error('Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :"'+e+'"')}return r};a.prototype._getUserDefaultParameterContainer=function(e){var t=new jQuery.Deferred;var a;try{a=this._getXHttpWrapper(e)}catch(e){t.reject(e.message);return t.promise()}var s=this._mSystems[e.id];if(!s.oContainerCache){s.oContainerCache=t;var i=a.get("PersContainers(category='P',id='sap.ushell.UserDefaultParameter')?$expand=PersContainerItems");i.then(function(e){s.bDataReceived=true;var t=e.responseText?JSON.parse(e.responseText):{};var a=r.get("d.PersContainerItems.results",t)||[];s.oContainerCache.resolve(a)}).catch(function(e){if(e.status===404){s.oContainerCache.resolve([])}else{var t="Server error: "+e.statusText;s.oContainerCache.reject(t)}})}return s.oContainerCache.promise()};return a},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/AdapterContainer", ["sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/utils"],function(jQuery,t,e){"use strict";var n;function s(){return new t(t.Type.local,"com.sap.ushell.adapters.sandbox.Personalization")}function i(t){try{return JSON.parse(t)}catch(t){return undefined}}function o(t){return JSON.stringify(t)}function r(t){if(t===undefined){return undefined}try{return JSON.parse(JSON.stringify(t))}catch(t){return undefined}}var a=function(t,s,i){n=i;this._sContainerKey=t;this._sStorageType=s;this._oItemMap=new e.Map};a.prototype.constants={storage:{MEMORY:"MEMORY",LOCAL_STORAGE:"LOCAL_STORAGE"}};a.prototype.load=function(){var t=new jQuery.Deferred;switch(this._sStorageType){case this.constants.storage.LOCAL_STORAGE:var e=s();setTimeout(function(){var n=e.get(this._sContainerKey);this._oItemMap.entries=i(n)||{};t.resolve(this)}.bind(this),0);break;case this.constants.storage.MEMORY:setTimeout(function(){this._oItemMap.entries=r(n[this._sContainerKey])||{};t.resolve(this)}.bind(this),0);break;default:setTimeout(function(){t.reject("unknown storage type")},0)}return t.promise()};a.prototype.save=function(){var t=new jQuery.Deferred;switch(this._sStorageType){case this.constants.storage.LOCAL_STORAGE:var e=s();setTimeout(function(){var n=o(this._oItemMap.entries);e.put(this._sContainerKey,n);t.resolve()}.bind(this),0);break;case this.constants.storage.MEMORY:setTimeout(function(){n[this._sContainerKey]=r(this._oItemMap.entries);t.resolve()}.bind(this),0);break;default:setTimeout(function(){t.reject("unknown storage type")},0)}return t.promise()};a.prototype.del=function(){var t=new jQuery.Deferred;switch(this._sStorageType){case this.constants.storage.LOCAL_STORAGE:var e=s();setTimeout(function(){e.remove(this._sContainerKey);this._oItemMap.entries={};t.resolve()}.bind(this),0);break;case this.constants.storage.MEMORY:setTimeout(function(){if(n&&n[this._sContainerKey]){delete n[this._sContainerKey]}this._oItemMap.entries={};t.resolve()}.bind(this),0);break;default:setTimeout(function(){t.reject("unknown storage type")},0)}return t.promise()};a.prototype.getItemKeys=function(){return this._oItemMap.keys()};a.prototype.containsItem=function(t){return this._oItemMap.containsKey(t)};a.prototype.getItemValue=function(t){return this._oItemMap.get(t)};a.prototype.setItemValue=function(t,e){this._oItemMap.put(t,e)};a.prototype.delItem=function(t){this._oItemMap.remove(t)};return a},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/AppStateAdapter", ["sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,jQuery,t){"use strict";var r=function(e,t,r){this._oConfig=r&&r.config};r.prototype._getPersonalizationService=function(){return sap.ushell.Container.getServiceAsync("Personalization")};r.prototype.saveAppState=function(e,r,n,o,i,s,a){var u=new jQuery.Deferred;this._getPersonalizationService().then(function(r){r.createEmptyContainer(e,{keyCategory:r.constants.keyCategory.GENERATED_KEY,writeFrequency:r.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(e){e.setItemValue("appStateData",n);e.setItemValue("persistencyMethod",s);e.setItemValue("persistencySettings",a);e.setItemValue("createdBy",sap.ushell.Container&&sap.ushell.Container.getUser&&sap.ushell.Container.getUser().getId());e.save().done(function(){u.resolve()}).fail(function(e){u.reject(e);t.error(e)})}).fail(function(e){t.error(e);u.reject(e)})});return u.promise()};r.prototype.loadAppState=function(r){var n=new jQuery.Deferred,o=this;this._getPersonalizationService().then(function(i){i.getContainer(r,{keyCategory:i.constants.keyCategory.GENERATED_KEY,writeFrequency:i.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(t){var i=t.getItemValue("appStateData"),s=t.getItemValue("persistencyMethod"),a=t.getItemValue("persistencySettings"),u=t.getItemValue("createdBy");if(s===undefined){n.resolve(r,i)}else if(s===e.PersonalState){if(o.getCurrentUserForTesting()===""||o.getCurrentUserForTesting()===u){n.resolve(r,i,s,a)}else{n.reject("Unauthorized User ID")}}}).fail(function(e){t.error(e);n.reject(e)})});return n.promise()};r.prototype.deleteAppState=function(e){var r=new jQuery.Deferred;this._getPersonalizationService().then(function(n){n.delContainer(e).done(function(){r.resolve()}).fail(function(e){t.error(e);r.reject(e)})});return r.promise()};r.prototype.getCurrentUserForTesting=function(){return""};r.prototype.getSupportedPersistencyMethods=function(){return[]};return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/ClientSideTargetResolutionAdapter", ["sap/ui/thirdparty/jquery","sap/base/Log"],function(jQuery,e){"use strict";var i=function(i,n,t){this._oConfig=t&&t.config;this._aInbounds=[];if(!this._oConfig){this._oSystemAliases={};e.warning("No configuration supplied!","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter")}else{if(this._oConfig.inbounds){this._aInbounds=this._transformInboundsObjectToInboundsArray(this._oConfig.inbounds)}if(this._oConfig.applications){Array.prototype.push.apply(this._aInbounds,this._transformApplicationsToInbounds(this._oConfig.applications))}if(this._aInbounds.length===0){e.warning("Adapter got no inbounds via configuration!","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter")}this._oSystemAliases=this._oConfig.systemAliases||{};e.debug("Adapter got no system aliases via configuration","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter")}var o=sap.ushell.Container,s="";if(o){s=o.getLogonSystem().getProductName()||""}this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",label:"local",client:"",language:"",properties:{productName:s}}};i.prototype.getInbounds=function(){var e=new jQuery.Deferred,i=this;setTimeout(function(){e.resolve(i._aInbounds)},0);return e.promise()};i.prototype.resolveSystemAlias=function(e){var i=new jQuery.Deferred;setTimeout(function(){if(this._oSystemAliases.hasOwnProperty(e)){i.resolve(this._oSystemAliases[e])}else if(e===""){i.resolve(this._oLocalSystemAlias)}else{i.reject("No system alias value available")}}.bind(this),0);return i.promise()};i.prototype._transformApplicationsToInbounds=function(i){var n,t=[],o,s,a;function r(e,i){if(e==="NWBC"&&i){if(i.indexOf("/~canvas;window=app/wda")>=0){return"WDA"}return"TR"}return e}for(n in i){if(i.hasOwnProperty(n)&&n.indexOf("_")!==0){s={};if(n.indexOf("-")>-1){a=n.split("-",2);s.semanticObject=a[0];s.action=a[1]}else if(n===""){s.semanticObject="";s.action=""}else{e.warning("Excluded syntactically incorrect intent '"+n+"' from inbounds array","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");continue}o=i[n];s.title=o.description||"";s.signature={parameters:{}};s.signature.additionalParameters="allowed";s.resolutionResult={};s.resolutionResult.applicationType=r(o.applicationType,o.url);s.resolutionResult.additionalInformation=o.additionalInformation||"";if(s.resolutionResult.additionalInformation&&s.resolutionResult.additionalInformation.indexOf("SAPUI5.Component=")!==-1){s.resolutionResult.applicationType="SAPUI5";s.resolutionResult.ui5ComponentName=s.resolutionResult.additionalInformation.split("SAPUI5.Component=",2)[1];if(o.applicationDependencies){s.resolutionResult.applicationDependencies=o.applicationDependencies}else{s.resolutionResult.applicationDependencies={self:{name:s.resolutionResult.ui5ComponentName},asyncHints:{libs:[{name:"sap.ui.core"},{name:"sap.ui.unified"}]}}}}s.resolutionResult.url=o.url;t.push(s)}}return t};i.prototype._transformInboundsObjectToInboundsArray=function(e){var i,n=[],t;for(i in e){if(e.hasOwnProperty(i)){t=e[i];if(t.resolutionResult.additionalInformation&&t.resolutionResult.additionalInformation.indexOf("SAPUI5.Component=")!==-1){t.resolutionResult.ui5ComponentName=t.resolutionResult.additionalInformation.split("SAPUI5.Component=",2)[1];if(!t.resolutionResult.hasOwnProperty("applicationDependencies")){t.resolutionResult.applicationDependencies={self:{name:t.resolutionResult.ui5ComponentName},asyncHints:{libs:[{name:"sap.ui.core"},{name:"sap.ui.unified"}]}}}}n.push(e[i])}}return n};return i},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/ContainerAdapter", ["sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/Configuration","sap/ui/thirdparty/jquery","sap/ushell/System","sap/ushell/User","sap/ushell/utils"],function(e,t,s,jQuery,r,a,i){"use strict";var o=function(o,n,l){var u;var f=t.create("config",l);var c={id:"DEFAULT_USER",firstName:"Default",lastName:"User",fullName:"Default User",accessibility:false,isJamActive:false,language:s.getLanguage()||"en",bootTheme:{theme:"sap_fiori_3",root:""},themeRoot:"/sap/public/bc/themes/",setAccessibilityPermitted:true,setThemePermitted:true,isLanguagePersonalized:false,setContentDensityPermitted:true,trackUsageAnalytics:null};for(var p in f){if(f.hasOwnProperty(p)){c[p]=f[p]}}o=new r({alias:o.getAlias(),platform:o.getPlatform(),productName:t.get("systemProperties.productName",f),productVersion:t.get("systemProperties.productVersion",f),systemName:t.get("systemProperties.systemName",f),systemRole:t.get("systemProperties.systemRole",f),tenantRole:t.get("systemProperties.tenantRole",f)});this.getSystem=function(){return o};this.getUser=function(){return u};this.sessionKeepAlive=function(){console.warn("Demo container adapter sessionKeepAlive called")};this.load=function(){var e=new jQuery.Deferred;if(f&&typeof f.setUserCallback==="string"){var s=new jQuery.Deferred;var r=f.setUserCallback.split(".");var o=r.pop();var n;if(r.length===0){n=window}else{n=t.get(r.join("."))}if(n&&typeof n[o]==="function"){n[o](s)}else{throw new i.Error("ContainerAdapter local platform: Cannot execute setUserCallback - "+f.setUserCallback)}s.done(function(t){["id","firstName","lastName","fullName"].forEach(function(e){if(t[e]&&typeof f.setUserCallback!=="function"){c[e]=t[e]}});u=new a(c);e.resolve()})}else{u=new a(c);e.resolve()}return e.promise()};this.logout=function(t){e.info("Demo system logged out: "+o.getAlias(),null,"sap.ushell.adapters.local.ContainerAdapter");i.reload();return(new jQuery.Deferred).resolve().promise()}};return o},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/LaunchPageAdapter", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/m/GenericTile","sap/m/ImageContent","sap/m/library","sap/m/NumericContent","sap/m/TileContent","sap/ui/core/ComponentContainer","sap/ui/core/Configuration","sap/ui/core/Core","sap/ui/core/library","sap/ui/core/mvc/View","sap/ui/Device","sap/ui/model/resource/ResourceModel","sap/ui/thirdparty/datajs","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/utils","sap/ushell/utils/WindowUtils"],function(e,t,i,r,n,s,o,a,l,p,u,c,f,d,h,T,g,jQuery,v,m,w,y,b){"use strict";var C=c.mvc.ViewType;var L=s.GenericTileMode;var _=m.AppType;function U(e){var t={};t[e.namespace.replace(/\./g,"/")]=e.path||".";sap.ui.loader.config({paths:t})}var k=function(s,c,m){var R=t([],m.config.groups);var S=0;var D=10;var G=10;var z=10;var I;var P={};for(var F=0;F<R.length;F++){if(R[F].isDefaultGroup===true){I=R[F];break}}if(!I&&R.length>0){I=R[0];I.isDefaultGroup=true}this.translationBundle=w.i18n;this.TileType={Tile:"tile",Link:"link",Card:"card"};var V;if(m.config.pathToLocalizedContentResources){var j=new h({bundleUrl:m.config.pathToLocalizedContentResources,bundleLocale:p.getLanguage()});V=j.getResourceBundle()}function M(e){if(V){return V.getText(e)}return e}var N=m.config.catalogs||[];N.forEach(function(e){if(V){e.title=M(e.title)}e.tiles.forEach(function(e){e.getTitle=function(){return e.title};e.getChip=function(){return{getBaseChipId:function(){return e.chipId}}}})});R.forEach(function(e){if(V){e.title=M(e.title)}e.tiles.forEach(function(e){q(e,true)})});function A(){return 100*Math.random()<S}function H(){return 100*Math.random()<D}function B(){return G+z*Math.random()}function E(e,t){var i;for(i=0;i<e.tiles.length;i=i+1){if(t.id===e.tiles[i].id){return i}}return-1}function x(e,t){var i;for(i=0;i<e.length;i=i+1){if(t.id===e[i].id){return i}}return-1}function O(e){var t=new jQuery.Deferred;window.setTimeout(function(){t.resolve(e)},B());return t.promise()}function q(t,i){if(t.tileType!=="sap.ushell.ui.tile.DynamicTile"||!t.properties||!t.properties.serviceUrl){return}if(t.intervalTimer){window.clearInterval(t.intervalTimer);t.intervalTimer=undefined}if(i){var r=t.serviceRefreshInterval;if(r){r=r*1e3}else{r=1e4}t.intervalTimer=window.setInterval(function(){T.read(t.properties.serviceUrl+"?id="+t.id+"&t="+(new Date).getTime(),function(){e.debug("Dynamic tile service call succeed for tile "+t.id)},function(i){e.debug("Dynamic tile service call failed for tile "+t.id+", error message:"+i)})},y.sanitizeTimeoutDelay(r))}}this.getGroups=function(){var e=new jQuery.Deferred;window.setTimeout(function(){e.resolve(R.slice(0))},B());return e.promise()};this.getDefaultGroup=function(){var e=new jQuery.Deferred;e.resolve(I);return e.promise()};this.addGroup=function(e){var t=new jQuery.Deferred;var i=A();window.setTimeout(function(){if(!i){var r={id:"group_"+R.length,title:e,tiles:[]};R.push(r);t.resolve(r)}else{this.getGroups().done(function(e){t.reject(e)}).fail(function(){t.reject()})}}.bind(this),B());return t.promise()};this.getGroupTitle=function(e){return e.title};this.setGroupTitle=function(e,t){var i=new jQuery.Deferred;var r=A();window.setTimeout(function(){if(!r){e.title=t;i.resolve()}else{O(e).done(function(e){i.reject(e.title)}).fail(function(){i.reject()})}},B());return i.promise()};this.getGroupId=function(e){return e.id};this.hideGroups=function(e){if(e&&R){for(var t=0;t<R.length;t++){if(e.indexOf(R[t].id)!==-1){R[t].isVisible=false}else{R[t].isVisible=true}}}return(new jQuery.Deferred).resolve()};this.isGroupVisible=function(e){return e&&(e.isVisible===undefined?true:e.isVisible)};this.moveGroup=function(e,t){var i=new jQuery.Deferred;var r=A();window.setTimeout(function(){if(!r){R.splice(t,0,R.splice(x(R,e),1)[0]);i.resolve()}else{this.getGroups().done(function(e){i.reject(e)}).fail(function(){i.reject()})}}.bind(this),B());return i.promise()};this.removeGroup=function(e){var t=new jQuery.Deferred;var i=A();window.setTimeout(function(){if(!i){R.splice(x(R,e),1);e.tiles.forEach(function(e){q(e,false)});t.resolve()}else{this.getGroups().done(function(e){t.reject(e)}).fail(function(){t.reject()})}}.bind(this),B());return t.promise()};this.resetGroup=function(e){var i=new jQuery.Deferred;var r=A();window.setTimeout(function(){if(!r){e.tiles.forEach(function(e){q(e,false)});e=t({},m.config.groups[x(m.config.groups,e)]);R.splice(x(R,e),1,e);e.tiles.forEach(function(e){q(e,true)});i.resolve(e)}else{this.getGroups().done(function(e){i.reject(e)}).fail(function(){i.reject()})}}.bind(this),B());return i.promise()};this.isGroupRemovable=function(e){return e&&!e.isPreset};this.isGroupLocked=function(e){return e.isGroupLocked};this.isGroupFeatured=function(e){return e.isFeatured};this.getGroupTiles=function(e){return e.tiles};this.getLinkTiles=function(e){return e.links};this.getTileTitle=function(e){return e.title};this.getTileType=function(e){if(e.isLink){return this.TileType.Link}if(e.isCard){return this.TileType.Card}return this.TileType.Tile};this.getTileId=function(e){return e.id};this.getTileSize=function(e){return e.size};this.getTileTarget=function(e){var t;if(e.properties){t=e.properties.href||e.properties.targetURL}return e.target_url||t||""};this.isTileIntentSupported=function(e){if(e&&e.formFactor){var t;var i=e.formFactor;var r=d.system;if(r.desktop){t="Desktop"}else if(r.tablet){t="Tablet"}else if(r.phone){t="Phone"}if(i.indexOf(t)===-1){return false}}return true};this.isLinkPersonalizationSupported=function(e){if(e){return e.isLinkPersonalizationSupported}return true};this.getTileView=function(e){var t=new jQuery.Deferred;var i=A();if(H()){window.setTimeout(function(){if(!i){this._getTileView(e).done(function(e){t.resolve(e)})}else{t.reject()}}.bind(this),B())}else if(!i){this._getTileView(e).done(function(e){t.resolve(e)})}else{t.reject()}return t.promise()};this._getTileView=function(e){var t;var i="unknown error";var n=this.getTileType(e)==="link";var s=new jQuery.Deferred;this._translateTileProperties(e);if(e.namespace&&e.path&&e.moduleType){U(e);if(e.moduleType==="UIComponent"){t=new l({component:u.createComponent({componentData:{properties:e.properties},name:e.moduleName}),height:"100%",width:"100%"});s.resolve(t)}else{f.create({viewName:e.moduleName,type:C[e.moduleType],viewData:{properties:e.properties},height:"100%"}).then(function(e){s.resolve(e)})}return s.promise()}else if(e.tileType){var o=n?"Link":e.tileType;if(o){try{this._createTileInstance(e,o).done(function(e){t=e;this._handleTilePress(t);this._applyDynamicTileIfoState(t);s.resolve(t)}.bind(this));return s.promise()}catch(t){s.resolve(new r({header:t&&t.name+": "+t.message||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(e.size)}));return s.promise()}}else{i="TileType: "+e.tileType+" not found!"}}else{i="No TileType defined!"}s.resolve(new r({header:i,frameType:this._parseTileSizeToGenericTileFormat(e.size)}));return s.promise()};this._getCatalogTileViewAsync=function(e){var t=new jQuery.Deferred;var i;var n="unknown error";var s=this.getTileType(e)==="link";this._translateTileProperties(e);if(e.namespace&&e.path&&e.moduleType){U(e);if(e.moduleType==="UIComponent"){var o=new l({component:u.createComponent({componentData:{properties:e.properties},name:e.moduleName}),height:"100%",width:"100%"});t.resolve(o)}else{f.create({viewName:e.moduleName,type:C[e.moduleType],viewData:{properties:e.properties},height:"100%"}).then(function(e){t.resolve(e)})}return t.promise()}else if(e.tileType){var a=s?"Link":e.tileType;if(a){try{i=this._createCatalogTileInstanceAsync(e,a);i.done(function(e){this._handleTilePress(e);this._applyDynamicTileIfoState(e);t.resolve(e)}.bind(this))}catch(i){t.resolve(new r({header:i&&i.name+": "+i.message||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(e.size)}))}}else{n="TileType: "+e.tileType+" not found!"}return t.promise()}n="No TileType defined!";t.resolve(new r({header:n,frameType:this._parseTileSizeToGenericTileFormat(e.size)}));return t.promise()};this._createTileInstance=function(e,t){var n;var s=new jQuery.Deferred;var l=this._getImageContent({src:e.properties.icon});l.addStyleClass("sapUshellFullWidth");switch(t){case"sap.ushell.ui.tile.DynamicTile":n=new r({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),url:b.getLeanURL(e.properties.targetURL),tileContent:new a({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new o({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:this._genericTilePressHandler.bind(this,e)});P[e.id]=n;s.resolve(n);break;case"sap.ushell.ui.tile.StaticTile":n=new r({mode:e.mode||(e.properties.icon?L.ContentMode:L.HeaderMode),header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),url:b.getLeanURL(e.properties.targetURL),tileContent:new a({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:l}),press:this._genericTilePressHandler.bind(this,e)});P[e.id]=n;s.resolve(n);break;case"Link":n=new r({mode:L.LineMode,subheader:e.properties.subtitle,header:e.properties.title,url:b.getLeanURL(e.properties.targetURL,e.properties.href),press:function(t){this._genericTilePressHandler(e,t)}.bind(this)});P[e.id]=n;s.resolve(n);break;default:var p=e.tileType.replace(/\./g,"/");sap.ui.require([p],function(){var t=i.get(e.tileType);n=new t(e.properties||{});P[e.id]=n;s.resolve(n)})}return s.promise()};this.getCardManifest=function(e){var t=JSON.parse(JSON.stringify(e.manifest));return t};this._createCatalogTileInstanceAsync=function(e,t){var i=new jQuery.Deferred;var n;var s=this._getImageContent({src:e.properties.icon});s.addStyleClass("sapUshellFullWidth");switch(t){case"sap.ushell.ui.tile.DynamicTile":n=new r({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),url:b.getLeanURL(e.properties.targetURL),tileContent:new a({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new o({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:function(t){this._genericTilePressHandler(e,t)}.bind(this)});break;case"sap.ushell.ui.tile.StaticTile":n=new r({mode:e.mode||(e.properties.icon?L.ContentMode:L.HeaderMode),header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),url:b.getLeanURL(e.properties.targetURL),tileContent:new a({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:s}),press:function(t){this._genericTilePressHandler(e,t)}.bind(this)});break;case"Link":n=new r({mode:L.LineMode,subheader:e.properties.subtitle,header:e.properties.title,url:b.getLeanURL(e.properties.targetURL,e.properties.href),press:function(t){this._genericTilePressHandler(e,t)}.bind(this)});break;default:t=e.tileType&&e.tileType.replace(/\./g,"/");sap.ui.require([t],function(t){n=new t(e.properties||{});i.resolve(n)})}i.resolve(n);return i.promise()};this._createCatalogTileInstance=function(t,n){var s;var l;var p;var u=this._getImageContent({src:t.properties.icon});u.addStyleClass("sapUshellFullWidth");switch(n){case"sap.ushell.ui.tile.DynamicTile":s=new r({header:t.properties.title,subheader:t.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(t.size),url:b.getLeanURL(t.properties.targetURL),tileContent:new a({frameType:this._parseTileSizeToGenericTileFormat(t.size),footer:t.properties.info,unit:t.properties.numberUnit,content:new o({scale:t.properties.numberFactor,value:t.properties.numberValue,truncateValueTo:5,indicator:t.properties.stateArrow,valueColor:this._parseTileValueColor(t.properties.numberState),icon:t.properties.icon,width:"100%"})}),press:function(e){this._genericTilePressHandler(t,e)}.bind(this)});break;case"sap.ushell.ui.tile.StaticTile":s=new r({mode:t.mode||(t.properties.icon?L.ContentMode:L.HeaderMode),header:t.properties.title,subheader:t.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(t.size),url:b.getLeanURL(t.properties.targetURL),tileContent:new a({frameType:this._parseTileSizeToGenericTileFormat(t.size),footer:t.properties.info,content:u}),press:function(e){this._genericTilePressHandler(t,e)}.bind(this)});break;case"Link":s=new r({mode:L.LineMode,subheader:t.properties.subtitle,header:t.properties.title,url:b.getLeanURL(t.properties.targetURL,t.properties.href),press:function(e){this._genericTilePressHandler(t,e)}.bind(this)});break;default:l=t.tileType.replace(/\./g,"/");p=sap.ui.require(l);if(!p){if(!i.get(t.tileType)){e.error("FLP: local LaunchPageAdapter. The resource is used before being loaded: "+l);sap.ui.requireSync(l)}p=i.get(t.tileType)}s=new p(t.properties||{})}return s};this._genericTilePressHandler=function(e,t){if(t.getSource().getScope&&t.getSource().getScope()==="Display"){if(e.properties.targetURL){if(e.properties.targetURL[0]==="#"){g.setHash(e.properties.targetURL)}else{var i=v.last("/core/shell/enableRecentActivity")&&v.last("/core/shell/enableRecentActivityLogging");if(i){var r={title:e.properties.title,appType:_.URL,url:e.properties.targetURL,appId:e.properties.targetURL};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r)}b.openURL(e.properties.targetURL,"_blank")}}}};this._parseTileSizeToGenericTileFormat=function(e){return e==="1x2"?"TwoByOne":"OneByOne"};this._parseTileValueColor=function(e){var t=e;switch(e){case"Positive":t="Good";break;case"Negative":t="Critical";break}return t};this._applyDynamicTileIfoState=function(e){var t=e.onAfterRendering;e.onAfterRendering=function(){if(t){t.apply(this,arguments)}var e=this.getModel();if(!e){return}var i=e.getProperty("/data/display_info_state");var r=this.getDomRef();var n=r.getElementsByClassName("sapMTileCntFtrTxt")[0];switch(i){case"Negative":n.classList.add("sapUshellTileFooterInfoNegative");break;case"Neutral":n.classList.add("sapUshellTileFooterInfoNeutral");break;case"Positive":n.classList.add("sapUshellTileFooterInfoPositive");break;case"Critical":n.classList.add("sapUshellTileFooterInfoCritical");break;default:return}}};this._handleTilePress=function(e){if(typeof e.attachPress==="function"){e.attachPress(function(){if(typeof e.getTargetURL==="function"){var t=e.getTargetURL();if(t){if(t[0]==="#"){g.setHash(t)}else{b.openURL(t,"_blank")}}}})}};this._translateTileProperties=function(e){if(this.translationBundle&&V&&!e._isTranslated){var t=e.properties;var i=e.keywords;t.title=M(t.title);t.subtitle=M(t.subtitle);t.info=M(t.info);if(i){for(var r=0;r<i.length;r++){i[r]=M(i[r])}}e._isTranslated=true}};this.refreshTile=function(){};this.setTileVisible=function(e,t){q(e,t)};this.addTile=function(e,i){if(!i){i=I}var r=new jQuery.Deferred;var n=A();window.setTimeout(function(){if(!n){var s=t({title:"A new tile was added",size:"1x1"},e,{id:"tile_0"+e.chipId});i.tiles.push(s);q(s,true);r.resolve(s)}else{this.getGroups().done(function(e){r.reject(e)}).fail(function(){r.reject()})}}.bind(this),B());return r.promise()};this.removeTile=function(e,t){var i=new jQuery.Deferred;var r=A();window.setTimeout(function(){if(!r){e.tiles.splice(E(e,t),1);q(t,false);i.resolve()}else{this.getGroups().done(function(e){i.reject(e)}).fail(function(){i.reject()})}}.bind(this),B());return i.promise()};this.moveTile=function(e,t,i,r,n,s){var o=new jQuery.Deferred;var a=A();window.setTimeout(function(){if(!a){if(n===undefined){n=r}e.isLink=s?s===this.TileType.Link:e.isLink;r.tiles.splice(t,1);n.tiles.splice(i,0,e);o.resolve(e)}else{this.getGroups().done(function(e){o.reject(e)}).fail(function(){o.reject()})}}.bind(this),B());return o.promise()};this.getTile=function(){var e=new jQuery.Deferred;return e.promise()};this.getCatalogs=function(){var e=new jQuery.Deferred;N.forEach(function(t){window.setTimeout(function(){e.notify(t)},300)});window.setTimeout(function(){e.resolve(N)},1500);return e.promise()};this.isCatalogsValid=function(){return true};this.getCatalogError=function(){return};this.getCatalogId=function(e){return e.id};this.getCatalogTitle=function(e){return e.title};this.getCatalogTiles=function(e){var t=new jQuery.Deferred;window.setTimeout(function(){t.resolve(e.tiles)},B());return t.promise()};this.getCatalogTileId=function(e){if(e.chipId){return e.chipId}return"UnknownCatalogTileId"};this.getStableCatalogTileId=function(e){if(e.referenceChipId){return e.referenceChipId}if(e.chipId){return e.chipId}return"UnknownCatalogTileId"};this.getCatalogTileTitle=function(e){return e.title};this.getCatalogTileSize=function(e){return e.size};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewAsync(e)};this.getCatalogTileTargetURL=function(e){return e.properties&&e.properties.targetURL||null};this.getCatalogTilePreviewTitle=function(e){return e.properties&&e.properties.title||null};this.getCatalogTilePreviewInfo=function(e){return e.properties&&e.properties.info||null};this.getCatalogTilePreviewIndicatorDataSource=function(e){var t;if(e.properties&&e.properties.serviceUrl){t={path:e.properties.serviceUrl,refresh:e.properties.serviceRefreshInterval}}return t};this.getCatalogTilePreviewSubtitle=function(e){return e.properties&&e.properties.subtitle||null};this.getCatalogTilePreviewIcon=function(e){return e.properties&&e.properties.icon||null};this.getCatalogTileKeywords=function(e){return[e.title,e.properties&&e.properties.subtitle,e.properties&&e.properties.info,e.keywords].flat().filter(function(e){return e})};this.getCatalogTileTags=function(e){return e&&e.tags||[]};this.addBookmark=function(e,t){var i=t||I;var r=new jQuery.Deferred;var n=A();var s=e.title;var o=e.subtitle;var a=e.info;var l=e.url;var p=this.isLinkPersonalizationSupported();window.setTimeout(function(){if(!n){var e={title:s,size:"1x1",chipId:"tile_0"+i.tiles.length,tileType:"sap.ushell.ui.tile.StaticTile",id:"tile_0"+i.tiles.length,isLinkPersonalizationSupported:p,keywords:[],properties:{icon:"sap-icon://time-entry-request",info:a,subtitle:o,title:s,targetURL:l}};i.tiles.push(e);q(e,true);r.resolve(e)}else{this.getGroups().done(function(e){r.reject(e)}).fail(function(){r.reject()})}}.bind(this),B());return r.promise()};this.updateBookmarks=function(e,t){var i=new jQuery.Deferred;var r=0;var n=this.getGroups();n.done(function(n){n.forEach(function(i){i.tiles.forEach(function(i){if(i.properties&&i.properties.targetURL===e){for(var n in t){if(t.hasOwnProperty(n)){i.properties[n]=t[n]}}var s=P[i.id];if(s!==undefined){s.setHeader(i.properties.title);s.setSubheader(i.properties.subtitle)}r++}})});i.resolve(r)});n.fail(function(){i.reject()});return i.promise()};this.deleteBookmarks=function(e){var t=new jQuery.Deferred;var i=0;var r;var n;for(var s=0;s<R.length;s++){r=R[s];for(var o=r.tiles.length-1;o>=0;o--){n=r.tiles[o];if(n.properties.targetURL===e){r.tiles.splice(o,1);i++}}}t.resolve(i);return t.promise()};this.countBookmarks=function(e){var t=new jQuery.Deferred;var i=0;var r;var n;for(var s=0;s<R.length;s++){r=R[s];for(var o=0;o<r.tiles.length;o++){n=r.tiles[o];if(n.properties.targetURL===e){i++}}}t.resolve(i);return t.promise()};this._getImageContent=function(e){return new n(e)};this.onCatalogTileAdded=function(){};this.getTileActions=function(e){return e&&e.actions||null};k.prototype._getCatalogTileIndex=function(){var e={};return Promise.resolve(e)};this.getCatalogTileNumberUnit=function(e){return e.properties?e.properties.numberUnit:undefined}};return k});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/MenuAdapter", ["sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/Configuration","sap/ushell/library"],function(e,t,n,r){"use strict";var i=r.ContentNodeType;var a=function(e,n,r){this._oAdapterConfig=t.get("config",r)};a.prototype.isMenuEnabled=function(){return Promise.resolve(!!this._oAdapterConfig.enabled)};a.prototype.getContentNodes=function(){var t=this._oAdapterConfig.menuData;if(!t){e.error("No menuData specified in the adapter configuration.",null,"sap.ushell.adapters.local.MenuAdapter");return Promise.reject(new Error("No menuData specified in the adapter configuration."))}if(typeof t==="object"){return Promise.resolve(t)}return fetch(t,{headers:{Accept:"application/json","Accept-Language":n.getLanguageTag()}}).then(function(e){return e.json()}).catch(function(t){e.error("Menu entries were requested but could not be loaded from JSON file",t);return Promise.reject(new Error("Menu entries could not be fetched"))})};a.prototype.getMenuEntries=function(){return this.getContentNodes().then(function(e){return e.map(function(e){var t=e.children[0];var n=this._buildMenuEntry(e,e.id,t.id);if(e.children.length>1){n.menuEntries=e.children.map(function(t){return this._buildMenuEntry(t,e.id,t.id)}.bind(this))}return n}.bind(this))}.bind(this))};a.prototype._buildMenuEntry=function(e,t,n){var r=e.type===i.Space?"Space-":"Page-";return{"help-id":r+e.id,title:e.label,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:t},{name:"pageId",value:n}]},menuEntries:[]}};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/NavTargetResolutionAdapter", ["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils"],function(e,n,jQuery,i,t){"use strict";var r=function(r,s,o){var a=n.create("config.applications",o);var l=e.getInbounds();f(l,a);function f(e,n){e.forEach(function(e){var i=e.semanticObject+"-"+e.action;n[i]=e.resolutionResult})}this.resolveHashFragment=function(e){var n=new jQuery.Deferred,r,s,o,l;if(e&&e.charAt(0)!=="#"){throw new t.Error("Hash fragment expected","sap.ushell.renderers.minimal.Shell")}e=e.substring(1);if(!e&&!a[e]){n.resolve(undefined)}else{i.info("Hash Fragment: "+e);r=e.indexOf("&/");if(r>=0){e=e.slice(0,r)}r=e.indexOf("?");if(r>=0){l=e.slice(r+1);e=e.slice(0,r)}s=a[e];if(s){o={additionalInformation:s.additionalInformation,applicationType:s.applicationType,url:s.url,text:s.text,fullWidth:s.fullWidth};if(l){o.url+=o.url.indexOf("?")<0?"?":"&";o.url+=l}if(s.navigationMode!==undefined){o.navigationMode=s.navigationMode}n.resolve(o)}else{n.reject("Could not resolve link '"+e+"'")}}return n.promise()};this.getSemanticObjectLinks=function(e,n){var t,r=[],s=0,o=new jQuery.Deferred,l;if(!e){setTimeout(function(){o.resolve([])},0)}else{sap.ushell.Container.getServiceAsync("URLParsing").then(function(f){l=f.paramsToString(n);i.info("getSemanticObjectLinks: "+e);for(t in a){if(a.hasOwnProperty(t)&&t.substring(0,t.indexOf("-"))===e){r[s]=a[t];r[s].id=t;r[s].text=r[s].text||r[s].description||"no text";r[s].intent="#"+t;if(l!==""){if(r[s].intent.indexOf("?")!==-1){r[s].intent+="&"+l}else{r[s].intent+="?"+l}}s+=1}}if(r){o.resolve(r)}else{o.reject("Could not get links for  '"+e+"'")}})}return o.promise()};this.isIntentSupported=function(e){var n=new jQuery.Deferred,i={},t=[],r=this;function s(e,n){i[e]={supported:n}}e.forEach(function(e,n){var i=new jQuery.Deferred;t.push(i.promise());r.resolveHashFragment(e).fail(function(n){s(e,false);i.resolve()}).done(function(n){s(e,true);i.resolve()})});if(e.length>0){jQuery.when.apply(jQuery,t).always(function(){n.resolve(i)})}else{n.resolve(i)}return n.promise()}};return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/PageBuildingAdapter", ["sap/ui/core/ComponentContainer","sap/ui/core/Component"],function(t,n){"use strict";var e=function(t,n,e){this.oCache=e&&e.config&&e.config.tiles||{}};e.prototype.getFactory=function(){return this};e.prototype.createChipInstance=function(e){var r=this.oCache[e.chipId];var i=e;i.configuration=i.configuration?JSON.parse(i.configuration):{};i.bags=i.bags?i.bags:{};var o=function(){};var a={types:{setType:function(t){o(t)},attachSetType:function(t){o=t}},visible:{setVisible:function(){}},url:{getApplicationSystem:function(){}},configurationUi:{isEnabled:function(){return false}},configuration:{getParameterValueAsString:function(t){return i.configuration[t]}},bag:{getBag:function(t){var n=i.bags[t];if(!n){n={};i.bags[t]=n}n.properties=n.properties?n.properties:{};n.texts=n.texts?n.texts:{};return{getPropertyNames:function(){return Object.keys(n.properties)},getProperty:function(t){return n.properties[t]},setProperty:function(t,e){n.properties[t]=e},getTextNames:function(){return Object.keys(n.texts)},getText:function(t){return n.texts[t]},setText:function(t,e){n.texts[t]=e}}}}};return{load:function(t,n){t()},isStub:function(){return false},refresh:function(){},getBag:a.bag.getBag,getContract:function(t){return a[t]||{}},configurationUi:a.configurationUi,configuration:a.configuration,bag:a.bag,url:a.url,types:a.types,getImplementationAsSapui5Async:function(){var e={chip:this};return n.create({componentData:e,name:r.componentName}).then(function(n){return new t({component:n})})}}};return e},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/PagePersistenceAdapter", ["sap/ushell/utils","sap/ui/util/Storage","sap/base/util/ObjectPath"],function(t,e,o){"use strict";var r=function(r,a,i){var n=o.get("config.storageType",i)||e.Type.local;if(n!==e.Type.local&&n!==e.Type.session){throw new t.Error("PagePersistence Adapter Local Platform: unsupported storage type: '"+n+"'")}this._oAdapterConfiguration=i};r.prototype.getPage=function(t){var e=this;return new Promise(function(o,r){var a=e._oAdapterConfiguration.config.dataLoad[t]||{};if(a.page.id===t){o(a)}r({error:"No page with id '"+t+"' was found."})})};r.prototype.getPages=function(t){var e=this._oAdapterConfiguration.config.dataLoad||{};return Promise.resolve(t.map(function(t){return e[t]}).filter(function(t){return!!t}))};return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/PersonalizationAdapter", ["sap/ushell/utils","sap/base/util/ObjectPath","sap/ui/util/Storage","sap/ushell/adapters/local/AdapterContainer"],function(t,e,o,r){"use strict";var n;var a=function(o,a,s){this._sStorageType=e.get("config.storageType",s)||r.prototype.constants.storage.LOCAL_STORAGE;switch(this._sStorageType){case r.prototype.constants.storage.LOCAL_STORAGE:break;case r.prototype.constants.storage.MEMORY:n=e.get("config.personalizationData",s)||{};break;default:throw new t.Error("Personalization Adapter Local Platform: unsupported storage type '"+this._sStorageType+"'")}};a.prototype.getAdapterContainer=function(t){return new r(t,this._sStorageType,n)};a.prototype.resetEntirePersonalization=function(){return new Promise(function(t,e){var o=this._getLocalStorage();setTimeout(function(){var r=o.removeAll();if(r){t()}else{e("could not delete personalization")}},0)}.bind(this))};a.prototype.isResetEntirePersonalizationSupported=function(){return new Promise(function(t,e){setTimeout(function(){t(true)},0)})};a.prototype.delAdapterContainer=function(t){return this.getAdapterContainer(t).del()};a.prototype._getLocalStorage=s;function s(){return new o(o.Type.local,"com.sap.ushell.adapters.sandbox.Personalization")}return a},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/SearchAdapter", ["sap/ui/thirdparty/jquery"],function(jQuery,r){"use strict";var e=function(r,e,i){this.isSearchAvailable=function(){return Promise.resolve(true)}};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/SearchCEPAdapter", [],function(){"use strict";var e=function(e,t,a){this._oConfig=a&&a.config||{}};e.prototype.execSearch=function(e){var t={applications:[{text:"App Nav Sample",icon:null,inboundIdentifier:"cc8_100_3B2D2CC19DF212906AE5063BB6E03BAF_6FMR9SFQJTA1Z1O9RHH65ORPR",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?sap-ushell-navmode=explace#Action-toappnavsample",target:"_blank",recent:false,semanticObject:"Action",semanticObjectAction:"toappnavsample"},{text:"Letter Boxing",icon:"sap-icon://Fiori5/F0758",inboundIdentifier:"cc8_100_3778C1C8F9DA23827397BAFFE67144FD_6FMR9SFQJTA0D2SYT0LHOQFE0",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?sap-ushell-navmode=explace#Action-toLetterBoxing",target:"_blank",recent:false,semanticObject:"Action",semanticObjectAction:"toLetterBoxing"},{text:"Test App",icon:"sap-icon://Fiori4/F0576",inboundIdentifier:"cc8_100_F20410A0ACB6B7C1A07AFF80EEADEAA3_6FMR9SFQJTA1YZI2E8I1SVW0W",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?sap-ushell-navmode=explace#Action-todefaultapp",target:"_blank",recent:false,semanticObject:"Action",semanticObjectAction:"todefaultapp"},{text:"Test To External App",icon:"sap-icon://sales-document",inboundIdentifier:"uyz_copy_9EEB1037CC3FD1B5D091FA756D088B0F_6FMR9SFQJTA1Z1O676YUJMZSE",url:null,target:"_blank",recent:false,semanticObject:"FioriToExtApp",semanticObjectAction:"Action"},{text:"Test UI5 Isolated App",icon:"sap-icon://Fiori2/F0021",inboundIdentifier:"uyz_copy_BEB837870520FA0B8894268F5C15104E_ET091I2703HZJVOYZ1DPGIGGE",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?sap-ushell-navmode=explace#FioriToExtAppIsolated-Action?sap-app-origin-hint=",target:"_blank",recent:false,semanticObject:"FioriToExtAppIsolated",semanticObjectAction:"Action"},{text:"Bookmarks Isolated",icon:"sap-icon://Fiori2/F0381",inboundIdentifier:"uyz_copy_C13D2E1D95543176D8BE0E995B4B40BD_6FMR9SFQJTA1ZA4UNTTS4DLPT",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?sap-ui-debug=true#BookmarksIsolated-Action?sap-app-origin-hint=",target:"_blank",recent:false,semanticObject:"BookmarksIsolated",semanticObjectAction:"Action"},{text:"State Isolated",icon:"sap-icon://official-service",inboundIdentifier:"uyz_copy_A415858F86AF8F0FA60CAAB3F6D95A4F_00O2TRA3CWZY91I819J30EWCK",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?"+"sap-ushell-navmode=explace#Action-toappcontextsample?sap-app-origin-hint=&//key/TASYMAQSS09J1B9SJ127D262M43JIRIVZE2SVXN94",target:"_blank",recent:false,semanticObject:"Action",semanticObjectAction:"toappcontextsample"},{text:"App For On Close",description:"Monitor Procurement-Related Tasks - Deprecated",icon:"sap-icon://Fiori4/F0671",inboundIdentifier:"uyz_copy_EDB23ED95BE3C01AABCDC6DBF86041A0_ET090M0NO76W9CXMHKTYXZSIN",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?sap-ushell-navmode=explace#AppBeforeCloseEvent-Action?sap-app-origin-hint=",target:"_blank",recent:false,semanticObject:"AppBeforeCloseEvent",semanticObjectAction:"Action"},{text:"BB1 Application A",description:"Translate Purchasing Categories",icon:"sap-icon://Fiori9/F1354",inboundIdentifier:"uyz_copy_E60F27D5B073D2A72C390D7C66DA039A_ET090M0NO76W9CXMNVXIW1QGX",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?sap-ushell-navmode=explace#Application-A?sap-app-origin-hint=",target:"_blank",recent:false,semanticObject:"Application",semanticObjectAction:"A"},{text:"Camera And Location Sample",icon:null,inboundIdentifier:"uyz_copy_D15368333A0C0006051B3F766B8FC133_ET090PW4NWFG4OW41UD5PLKGN",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?sap-ushell-navmode=explace#CameraAndLocation-Action?sap-app-origin-hint=",target:"_blank",recent:false,semanticObject:"CameraAndLocation",semanticObjectAction:"Action"},{text:"Get Component Data Sample",description:"Get Component Data Sample",icon:"sap-icon://Fiori9/F1354",inboundIdentifier:"uyz_copy_E60F27D5B073D2A72C390D7C66DA039A_ET090M0NO76W9CXMNVXIW1QGX",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?sap-ushell-navmode=explace#Application-A?sap-app-origin-hint=",target:"_blank",recent:false,semanticObject:"ComponentDataApp",semanticObjectAction:"Sample"},{text:"BB1 Application C",icon:null,inboundIdentifier:"uyz_copy_D15368333A0C0006051B3F766B8FC133_ET090PW4NWFG4OW41UD5PLKGN",url:"http://localhost:8080/ushell/test-resources/sap/ushell/shells/demo/FioriLaunchpadMyHome.html?sap-ushell-navmode=explace#CameraAndLocation-Action?sap-app-origin-hint=",target:"_blank",recent:false,semanticObject:"Application",semanticObjectAction:"C"}],externalSearchApplications:[{text:"CEP Search Internal",description:"CEP Search Internal",icon:"sap-icon://account",inboundIdentifier:"38cd162a-e185-448c-9c37-a4fc02b3d39d___GenericDefaultSemantic-__GenericDefaultAction",url:"https://search.int.sap/results%23?t=a&sap-shell=FLP",target:"_blank",recent:false,semanticObject:"Search",semanticObjectAction:"internal"},{text:"CEP Search - Google",description:"CEP Search - Google",icon:"",inboundIdentifier:"751ebcac-b7aa-4bfc-ab04-cb8d5fe78917___GenericDefaultSemantic-__GenericDefaultAction",url:"https://www.google.com/search?q=SAP&gl=us&sap-shell=FLP",target:"_blank",recent:false,semanticObject:"CepSearch",semanticObjectAction:"google"}],homePageApplications:[{text:"CC8 Homepage",description:"CC8 Homepage",icon:"sap-icon://s4hana",inboundIdentifier:"s4_cloud_cc8_businessapp.flp.homepage_AbapFlp-display",url:"https://my300470.s4hana.ondemand.com/sap/bc/ui2/flp?sap-shell=FLP&sap-ushell-navmode=explace&sap-touch=0#Shell-home",target:"_blank",semanticObject:"Action",semanticObjectAction:"todefaultapp",_type:"app"},{text:"Homepage Application",description:"CC8 Homepage",icon:"sap-icon://s4hana",inboundIdentifier:"s4_cloud_cc8_businessapp.flp.homepage_AbapFlp-display",url:"https://my300470.s4hana.ondemand.com/sap/bc/ui2/flp?sap-shell=FLP&sap-ushell-navmode=explace&sap-touch=0#Shell-home",target:"_blank",semanticObject:"AbapFlp",semanticObjectAction:"display",_type:"app"},{text:"Homepage Application 2",description:"CC8 Homepage",icon:"sap-icon://s4hana",inboundIdentifier:"s4_cloud_cc8_businessapp.flp.homepage_AbapFlp-display",url:"https://my300470.s4hana.ondemand.com/sap/bc/ui2/flp?sap-shell=FLP&sap-ushell-navmode=explace&sap-touch=0#Shell-home",target:"_blank",semanticObject:"AbapFlp",semanticObjectAction:"display",_type:"app"},{text:"Homepage Application 3",description:"CC8 Homepage",icon:"sap-icon://s4hana",inboundIdentifier:"s4_cloud_cc8_businessapp.flp.homepage_AbapFlp-display",url:"https://my300470.s4hana.ondemand.com/sap/bc/ui2/flp?sap-shell=FLP&sap-ushell-navmode=explace&sap-touch=0#Shell-home",target:"_blank",semanticObject:"AbapFlp",semanticObjectAction:"display",_type:"app"},{text:"Homepage Application 4",description:"CC8 Homepage",icon:"sap-icon://s4hana",inboundIdentifier:"s4_cloud_cc8_businessapp.flp.homepage_AbapFlp-display",url:"https://my300470.s4hana.ondemand.com/sap/bc/ui2/flp?sap-shell=FLP&sap-ushell-navmode=explace&sap-touch=0#Shell-home",target:"_blank",semanticObject:"AbapFlp",semanticObjectAction:"display",_type:"app"},{text:"Homepage Application 5",description:"CC8 Homepage",icon:"sap-icon://s4hana",inboundIdentifier:"s4_cloud_cc8_businessapp.flp.homepage_AbapFlp-display",url:"https://my300470.s4hana.ondemand.com/sap/bc/ui2/flp?sap-shell=FLP&sap-ushell-navmode=explace&sap-touch=0#Shell-home",target:"_blank",semanticObject:"AbapFlp",semanticObjectAction:"display",_type:"app"},{text:"Homepage Application 6",description:"CC8 Homepage",icon:"sap-icon://s4hana",inboundIdentifier:"s4_cloud_cc8_businessapp.flp.homepage_AbapFlp-display",url:"https://my300470.s4hana.ondemand.com/sap/bc/ui2/flp?sap-shell=FLP&sap-ushell-navmode=explace&sap-touch=0#Shell-home",target:"_blank",semanticObject:"AbapFlp",semanticObjectAction:"display",_type:"app"}]};if(t===undefined||typeof e==="string"&&e.length===0){t.applications=[]}return Promise.resolve(t)};return e},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/SupportTicketAdapter", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";var r=function(r,e,t){this.createTicket=function(r){var e="1234567";return Promise.resolve(e)}};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/Ui5ComponentLoaderAdapter", [],function(){"use strict";function n(){}return n},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/UserDefaultParameterPersistenceAdapter", ["sap/ui/thirdparty/jquery","sap/base/Log"],function(jQuery,e){"use strict";var r=function(e,r,t){this._oConfig=t&&t.config;this._oContainerPromises={}};r.prototype._getPersonalizationService=function(){return sap.ushell.Container.getServiceAsync("Personalization")};r.prototype.saveParameterValue=function(r,t,n){var o=new jQuery.Deferred;if(!(typeof r==="string"&&r.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(r))){e.error('Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :"'+r+'"')}this._getUDContainer(n).done(function(e){e.setItemValue(r,t);e.saveDeferred(50).done(o.resolve.bind(o)).fail(o.reject.bind(o))}).fail(function(r){e.error(r);o.reject(r)});return o.promise()};r.prototype.deleteParameter=function(r,t){var n=new jQuery.Deferred;if(!(typeof r==="string"&&r.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(r))){e.error('Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :"'+r+'"')}this._getUDContainer(t).done(function(e){e.delItem(r);e.save().done(n.resolve.bind(n)).fail(n.reject.bind(n))}).fail(function(r){e.error(r);n.reject(r)});return n.promise()};r.prototype.loadParameterValue=function(r,t){var n=new jQuery.Deferred;this._getUDContainer(t).done(function(e){var t=e.getItemValue(r);if(t){n.resolve(t)}else{n.reject("no value ")}}).fail(function(r){e.error(r);n.reject(r)});return n.promise()};r.prototype.getStoredParameterNames=function(r){var t=new jQuery.Deferred;this._getUDContainer(r).done(function(e){var r=e.getItemKeys();t.resolve(r)}).fail(function(r){e.error(r);t.reject(r)});return t.promise()};r.prototype._getUDContainer=function(e){var r=e.id;if(r!==""){r="."+r}if(!this._oContainerPromises[e.id]){var t=new jQuery.Deferred;this._oContainerPromises[e.id]=t.promise();this._getPersonalizationService().then(function(e){e.getContainer("sap.ushell.UserDefaultParameter"+r,{keyCategory:e.constants.keyCategory.FIXED_KEY,writeFrequency:e.constants.writeFrequency.LOW,clientStorageAllowed:true}).done(t.resolve).fail(t.reject)})}return this._oContainerPromises[e.id]};return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/UserInfoAdapter", ["sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/Log"],function(jQuery,e,t){"use strict";var n=function(n,r,i){var s;function a(t){var n=[{id:"sap_belize",name:"SAP Belize"}];var r=e.get("config.themes",t);return r===undefined?n:r}this.updateUserPreferences=function(e){var n=new jQuery.Deferred;function r(e){var n="Failed to update user preferences: "+(e&&e.message?e.message:e);t.error(n,e&&e.stack,"com.sap.ushell.adapters.local.UserInfo")}sap.ushell.Container.getServiceAsync("Personalization").then(function(t){var i={keyCategory:t.constants.keyCategory.FIXED_KEY,writeFrequency:t.constants.writeFrequency.LOW,clientStorageAllowed:true};function s(e,t){var n=t.getChangedProperties()||[];n.forEach(function(t){e.setItemValue(t.propertyName,t.newValue)})}t.getContainer("sap.ushell.UserProfile",i,undefined).done(function(t){s(t,e);t.save().fail(function(e){r(e);n.reject(e)}).done(function(){n.resolve()})}).fail(function(e){r(e);n.reject(e)})});return n.promise()};this.getThemeList=function(){var e=new jQuery.Deferred;if(s===undefined){s=a(i)}if(s.length===0){e.reject("no themes were configured")}else{e.resolve({options:s})}return e.promise()};this.getLanguageList=function(){var e=new jQuery.Deferred;e.resolve([{text:"Browser Language",key:"default"},{text:"American English",key:"en-US"},{text:"British English",key:"en-GB"},{text:"English",key:"en"},{text:"German",key:"de"},{text:"Hebrew",key:"he"},{text:"Russian",key:"ru"}]);return e.promise()}};return n},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/AppCommunicationMgr", ["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/Log"],function(e,jQuery,s,t){"use strict";var n="sap.ushell.appRuntime.ui5.AppCommunicationMgr";var i,r=[],a=0;function o(){this.init=function(s){var t=this;i=e.getHandlers();t.handleMessageEvent=o.prototype._handleMessageEvent.bind(t,t);addEventListener("message",t.handleMessageEvent);if(s===true){t.sendMessageToOuterShell("sap.ushell.appRuntime.iframeIsValid");setInterval(function(){t.sendMessageToOuterShell("sap.ushell.appRuntime.iframeIsValid")},2500)}};this.destroy=function(){removeEventListener("message",this.handleMessageEvent)};this._handleMessageResponse=function(e){if(e.request_id&&r[e.request_id]){var s=r[e.request_id];delete r[e.request_id];if(e.status==="success"){s.resolve(e.body.result)}else{s.reject()}}};this._handleMessageRequest=function(e,r,a){var o=this,u=s.create("sap-ushell-config.services.PostMessage.config"),g=a&&a.service,d,c,l,p,f;t.debug("App Runtime received post message request from origin '"+r.origin+"': "+JSON.stringify(a),null,n);if(!g){return}if(u&&u.enabled===false){t.warning("App Runtime received message for "+c+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,n);return}if(!this._isTrustedPostMessageSource(e,r)){t.warning("App Runtime received message from untrusted origin '"+r.origin+"': "+JSON.stringify(r.data),null,n);return}if(g==="sap.ushell.services.MessageBroker"){g=g.concat("._execute")}if(g.indexOf(".")>0){d=g.split(".");l=d[d.length-1];c=g.substr(0,g.length-l.length-1)}else{t.warning("App Runtime received message with invalid service name ("+g+") :"+JSON.stringify(r.data),null,n);return}var h={oMessage:r,oMessageData:a,oContainer:e};try{p=i[c];f=p&&p.oServiceCalls[l];if(f&&f.executeServiceCallFn){f.executeServiceCallFn(h).then(function(e){var s=e&&e.hasOwnProperty("_noresponse_")?true:false;if(!s){o.sendResponseMessage(r,a,"success",{result:e})}},function(e){o.sendResponseMessage(r,a,"error",{message:e})})}else{t.warning("App Runtime received message with unknown service name ("+a.service+") :"+JSON.stringify(r.data),null,n)}}catch(e){t.warning("Error in processing message: "+e.message+") :"+JSON.stringify(r.data),null,n)}};this._getCFLPWindow=function(){return window.parent};this._isTrustedPostMessageSource=function(e,s){var t=false,n=e._getCFLPWindow();if(n){t=s.source===n}return t};this.sendResponseMessage=function(e,s,i,r){var a=JSON.stringify({type:"response",service:s.service,request_id:s.request_id,status:i,body:r});t.debug("Sending post message response to origin ' "+e.origin+"': "+a,null,n);if(typeof e.source!=="object"||e.source===null){t.debug("Cannot send response message to origin ' "+e.origin,"`source` member of request message is not an object",n);return}e.source.postMessage(a,e.origin)};this._getTargetWindow=function(){return window.parent};this.postMessage=function(e){var s,n=this._getTargetWindow();if(e){try{if(e.type==="request"&&!e.request_id){e.request_id=this.getId()}s=JSON.stringify(e);n.postMessage(s,"*")}catch(s){t.error("Message '"+e+"' cannot be posted: "+s,"sap.ui5Isolation.AppCommunicationMgr")}}};this.sendMessageToOuterShell=function(e,s,t,n,i){var a=new jQuery.Deferred,o={type:"request",service:e,body:s||{},request_id:t};this.postMessage(o);r[o.request_id]=a;if(n){setTimeout(function(){a.resolve(i)},n)}return a.promise()};this.getId=function(){return"SAPUI5_APPRUNTIME_MSGID_"+ ++a}}o.prototype._handleMessageEvent=function(e,s){if(s===undefined){return}var i=s.data;if(typeof i==="string"){try{i=JSON.parse(s.data,this)}catch(e){t.debug("Message received from origin '"+s.origin+"' cannot be parsed: "+e,i,n);return}}if(i.type==="request"){return e._handleMessageRequest(e,s,i)}else if(i.type==="response"){return e._handleMessageResponse(i)}};return new o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/AppRuntimeContext", ["sap/base/assert"],function(t){"use strict";function e(){var t=false,e="",n;this.setAppLifeCycleAgent=function(t){n=t};this.setIsScube=function(e){t=e};this.getIsScube=function(){return t};this.setRemoteSystemId=function(t){e=t};this.getRemoteSystemId=function(){return e};this.checkDataLossAndContinue=function(){return n?n.checkDataLossAndContinue():true}}return new e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/AppRuntimePostMessage", ["sap/base/util/deepExtend","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface"],function(e,i){"use strict";var n={};function t(){this.getHandlers=function(){return n};this.registerCommHandlers=function(i){var t=[];Object.keys(i).forEach(function(e){var n=i[e];if(n.oServiceCalls){Object.keys(n.oServiceCalls).forEach(function(i){t.push({action:i,service:e})})}});e(n,i);return t};this.registerCommunicationHandler=function(e,i){var t=n[e],r=[];if(!t){t=n[e]={oServiceCalls:{}}}if(i.oServiceCalls){Object.keys(i.oServiceCalls).forEach(function(n){t.oServiceCalls[n]=i.oServiceCalls[n];r.push({action:n,service:e})})}return r};this.registerCommunicationHandlers=function(e){var i=this;Object.keys(e).forEach(function(n){i.registerCommunicationHandler(n,e[n])})};this._getPostMesageInterface=function(e,i){var t=n[e],r;if(t&&t.oRequestCalls&&t.oRequestCalls[i]){r=t.oRequestCalls[i]}return r}}var r=new t;i.init(false,r.registerCommunicationHandlers.bind(r));return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI", ["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e,s){"use strict";function t(){this.getHandlers=function(){return e.getHandlers()};this.registerCommHandlers=function(t){var n=e.registerCommHandlers(t);s.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.subscribe",n)};this.registerCommunicationHandler=function(t,n){var i=e.registerCommunicationHandler(t,n);s.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.subscribe",i)};this._getPostMesageInterface=function(s,t){return e._getPostMesageInterface(s,t)}}return new t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/AppRuntimeService", ["sap/ushell/appRuntime/ui5/AppCommunicationMgr"],function(e){"use strict";function n(){this.sendMessageToOuterShell=function(n,u,s,t,i){return e.sendMessageToOuterShell(n,u,s,t,i)}}return new n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/SessionHandlerAgent", ["sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/URI","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,s,i,jQuery){"use strict";function n(){this.init=function(){var t=this;e.registerCommunicationHandler("sap.ushell.sessionHandler",{oServiceCalls:{logout:{executeServiceCallFn:function(e){return t.handleLogoutEvent(e)}},extendSessionEvent:{executeServiceCallFn:function(e){return t.handleExtendSessionEvent(e)}}}});this.attachUserEvents();this.userActivityHandler()};this.handleLogoutEvent=function(){var e=new jQuery.Deferred,t=this;this.detachUserEvents();sap.ushell.Container.getFLPUrl(true).then(function(s){if(t.isSameDomain(s,document.URL)===false){sap.ushell.Container.logout().then(e.resolve,e.resolve)}else{e.resolve()}});return e.promise()};this.isSameDomain=function(e,t){var n,o,r=false;try{n=new s(e);o=new s(t);if(n.origin()===o.origin()){r=true}}catch(s){i.error("Check for same domain of iframe and FLP failed: "+e+" "+t,s,"sap.ushell.appRuntime.ui5.SessionHandlerAgent")}return r};this.handleExtendSessionEvent=function(){sap.ushell.Container.sessionKeepAlive();return(new jQuery.Deferred).resolve().promise()};this.attachUserEvents=function(){jQuery(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));jQuery(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));jQuery(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this))};this.detachUserEvents=function(){jQuery(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");jQuery(document).off("keydown.sessionTimeout");jQuery(document).off("touchstart.sessionTimeout")};this.userActivityHandler=function(e){if(this.oUserActivityTimer!==undefined){return}var s=this;this.oUserActivityTimer=setTimeout(function(){t.sendMessageToOuterShell("sap.ushell.sessionHandler.notifyUserActive",{});s.oUserActivityTimer=undefined},1e3)}}var o=new n;return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/performance/FesrEnhancer", ["sap/ui/performance/trace/FESR","sap/ui/performance/trace/Interaction","sap/ushell/utils/type"],function(e,t,r){"use strict";var n={_fnOriginalOnBeforeCreated:undefined,_currentAppShortId:undefined,init:function(){if(e.getActive()){this._fnOriginalOnBeforeCreated=e.onBeforeCreated;e.onBeforeCreated=this._onBeforeCreatedHandler.bind(this)}},_onBeforeCreatedHandler:function(e,t){if(this._currentAppShortId){e.appNameShort=this._currentAppShortId}if(e.interactionType===1&&(e.stepName==="undetermined_startup"||e.stepName==="undetermined_appruntime_app_startup")){e.stepName="APPRT@APP_START"}return e},reset:function(){if(e.getActive()){e.onBeforeCreated=this._fnOriginalOnBeforeCreated;this.setAppShortId()}},startInteraction:function(){if(e.getActive()){t.start("appruntime_app_startup")}},setAppShortId:function(t){function n(e,t){var n=e.getManifestEntry(t)||[];if(!r.isArray(n)){n=[n]}return typeof n[0]==="string"?n[0]:undefined}if(e.getActive()){try{if(t){var i=t.getInstance().getComponentData().technicalParameters||{},a=t.getMetadata();this._currentAppShortId=i["sap-fiori-id"]||n(a,"/sap.fiori/registrationIds")}else{this._currentAppShortId=undefined}}catch(e){this._currentAppShortId=undefined}}}};return n},true);
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils", ["sap/base/util/ObjectPath"],function(e){"use strict";var t={getAppLifeCycleService:function(){var e=t.getContainer();return e.getServiceAsync("AppLifeCycle").catch(function(e){var t="Error getting AppLifeCycle service from ushell container: "+e;throw new Error(t)})},getContainer:function(){var t=e.get("sap.ushell.Container");if(!t){throw new Error("Illegal state: shell container not available; this component must be executed in a unified shell runtime context.")}return t},getCurrentRunningApplication:function(){return t.getAppLifeCycleService().then(function(e){return e.getCurrentApplication()})}};return t});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/appRuntime/ui5/plugins/baseRta/BaseRTAPluginStatus", function(){"use strict";return{STATUS_STARTING:"starting",STATUS_STARTED:"started",STATUS_STOPPING:"stopping",STATUS_STOPPED:"stopped"}},true);
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions", ["sap/base/util/UriParameters","sap/ui/Device","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils"],function(e,t,n){"use strict";var a={_getAppDescriptor:function(e){if(e&&e.getMetadata){var t=e.getMetadata();if(t&&t.getManifest){return t.getManifest()}}return{}},checkRestartRTA:function(t){var n=e.fromQuery(window.location.search);var a=n.get("sap-ui-layer");t=a||t;return!!window.sessionStorage.getItem("sap.ui.rta.restart."+t)},checkUI5App:function(){return n.getCurrentRunningApplication().then(function(e){if(e){var t=e.applicationType==="UI5";var n=e.componentInstance&&e.componentInstance.getManifestEntry&&e.componentInstance.getManifestEntry("sap.app").type==="application";return t&&n}return false})},checkDesktopDevice:function(){return t.system.desktop}};return a},true);
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/appRuntime/ui5/plugins/baseRta/Renderer", ["sap/base/Log","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils"],function(e,n){"use strict";var t={getRenderer:function(e){var t=n.getContainer();return new Promise(function(n,r){var i=t.getRenderer();if(i){e.oRenderer=i;n(i)}else{e._onRendererCreated=function(t){i=t.getParameter("renderer");if(i){e.oRenderer=i;n(i)}else{r("Illegal state: shell renderer not available after recieving 'rendererCreated' event.")}};t.attachRendererCreatedEvent(e._onRendererCreated,e)}})},createActionButton:function(n,t,r){return this.getRenderer(n).then(function(e){e.addActionButton("sap.ushell.ui.launchpad.ActionItem",{id:n.mConfig.id,text:n.mConfig.i18n.getText(n.mConfig.text),icon:n.mConfig.icon,press:t,visible:r},true,false,[e.LaunchpadState.App])}).catch(function(t){e.error(t,undefined,n.mConfig.sComponentName)})},exit:function(){}};return t},true);
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/appRuntime/ui5/plugins/baseRta/Trigger", ["sap/ui/thirdparty/hasher","sap/ui/core/BusyIndicator","sap/ushell/appRuntime/ui5/plugins/baseRta/BaseRTAPluginStatus","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils"],function(t,i,e,s){"use strict";var r=e.STATUS_STARTING;var n=e.STATUS_STARTED;var o=e.STATUS_STOPPING;var a=e.STATUS_STOPPED;var h=function(t){this.mConfig=t;this.sStatus=e.STATUS_STOPPED;this.oStartingPromise=null;this.oStoppingPromise=null;var i=s.getContainer();i.registerDirtyStateProvider(this._dirtyStateProvider.bind(this));this.oInitPromise=i.getServiceAsync("URLParsing").then(function(t){this.oURLParsingService=t}.bind(this)).catch(function(t){throw new Error("Error during retrieval of URLParsing ushell service: "+t)})};function u(){return new Promise(function(t,i){sap.ui.require(["sap/ui/rta/api/startAdaptation"],t,i)})}function p(){return s.getCurrentRunningApplication().then(function(t){return t.componentInstance})}function l(t,i){var e;if(t instanceof Error){e=i.getText("TECHNICAL_ERROR")}else if(typeof t==="string"){e=t}sap.ui.require(["sap/ui/rta/Utils","sap/m/MessageBox"],function(t,s){s.error(e,{title:i.getText("ERROR_TITLE"),onClose:null,styleClass:t.getRtaStyleClassName()})})}h.prototype.getInitPromise=function(){return this.oInitPromise};h.prototype._onRtaFailed=function(t){i.hide();this._oRTA=t.getSource();this.mConfig.onErrorHandler();l(t.getParameter("error"),this.mConfig.i18n)};h.prototype._startRta=function(){this.sStatus=r;sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appKeepAliveDeactivate",this._onAppClosed,this);i.show(0);var e;return p().then(function(t){e=t;return sap.ui.getCore().loadLibrary("sap.ui.rta",{async:true})}).then(u.bind(this)).then(function(i){this.sOldHash=t.getHash();var s={rootControl:e,flexSettings:{layer:this.mConfig.layer,developerMode:this.mConfig.developerMode}};return i(s,this.mConfig.loadPlugins,this.mConfig.onStartHandler,this._onRtaFailed.bind(this),this.mConfig.onStopHandler)}.bind(this)).then(function(t){i.hide();this._oRTA=t;this.sStatus=n}.bind(this)).catch(function(t){i.hide();if(t.reason==="flexEnabled"){this.handleFlexDisabledOnStart()}else if(t==="Reload triggered"){this.sStatus=a}}.bind(this))};h.prototype._stopRta=function(){this.sStatus=o;return this._oRTA.stop.apply(this._oRTA,arguments).then(function(){this.exitRta()}.bind(this))};h.prototype.triggerStartRta=function(){var t=this.sStatus;switch(t){case r:break;case n:this.oStartingPromise=Promise.resolve();break;case o:this.oStartingPromise=this.oStoppingPromise.then(function(){return this._startRta()}.bind(this));break;case a:this.oStartingPromise=this._startRta();break;default:}if(t!==r){this.oStartingPromise.then(function(){this.oStartingPromise=null}.bind(this))}return this.oStartingPromise};h.prototype.triggerStopRta=function(){var t=this.sStatus;switch(t){case r:this.oStoppingPromise=this.oStartingPromise.then(function(){return this._stopRta.apply(this,arguments)}.bind(this));break;case n:this.oStoppingPromise=this._stopRta.apply(this,arguments);break;case o:break;case a:this.oStoppingPromise=Promise.resolve();break;default:}if(t!==o){this.oStoppingPromise.then(function(){this.oStoppingPromise=null}.bind(this))}return this.oStoppingPromise};h.prototype.handleFlexDisabledOnStart=function(){sap.ui.require(["sap/ui/rta/util/showMessageBox","sap/m/MessageBox"],function(t,i){t(this.mConfig.i18n.getText("MSG_FLEX_DISABLED"),{icon:i.Icon.INFORMATION,title:this.mConfig.i18n.getText("HEADER_FLEX_DISABLED"),actions:[i.Action.OK],initialFocus:null,isCustomAction:false})}.bind(this))};h.prototype._dirtyStateProvider=function(){if(this._oRTA&&this.sStatus===n){var i=t.getHash();var e=this.oURLParsingService.parseShellHash(i);var s=this.oURLParsingService.parseShellHash(this.sOldHash);this.sOldHash=i;if(e.semanticObject===s.semanticObject&&e.action===s.action&&e.appSpecificRoute!==s.appSpecificRoute){return false}return this._oRTA.canSave()}return false};h.prototype.exitRta=function(){if(this._oRTA){this._oRTA.destroy();this.sStatus=a;this.oStartingPromise=null;this.oStoppingPromise=null;this._oRTA=null}sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","appKeepAliveDeactivate",this._onAppClosed,this)};h.prototype._onAppClosed=function(){this.triggerStopRta(true,true)};return h},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/plugins/rtaAgent/Component", ["sap/ui/core/Component","sap/ui/fl/write/api/FeaturesAPI","sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils","sap/ushell/appRuntime/ui5/plugins/baseRta/Renderer","sap/ushell/appRuntime/ui5/plugins/baseRta/Trigger","sap/base/Log"],function(e,t,i,n,s,r,o){"use strict";var a;function u(){return{sComponentName:"sap.ushell.appRuntime.ui5.plugins.rtaAgent",layer:"CUSTOMER",developerMode:false}}function p(e){return new Promise(function(t,i){a.postMessageToFlp("user.postapi.rtaPlugin","switchToolbarVisibility",{visible:e}).done(t).fail(i)})}function h(){return new Promise(function(e,t){a.postMessageToFlp("user.postapi.rtaPlugin","activatePlugin").done(e).fail(t)})}function l(){return i.checkUI5App().then(function(e){if(e){a.postMessageToFlp("user.postapi.rtaPlugin","showAdaptUI").fail(function(e){throw new Error(e)})}})}function d(){this.oTrigger.triggerStopRta(true,true)}return e.extend("sap.ushell.appRuntime.ui5.plugins.rtaAgent.Component",{metadata:{manifest:"json"},init:function(){this.mConfig=u();this._oPluginPromise=Promise.resolve();a=this.getComponentData().oPostMessageInterface;return t.isKeyUser().then(function(e){if(e){return h()}return Promise.reject()}).then(function(){this.mConfig.i18n=this.getModel("i18n").getResourceBundle();this.mConfig.onStartHandler=this._onStartHandler.bind(this);this.mConfig.onErrorHandler=this._onErrorHandler.bind(this);this.mConfig.onStopHandler=this._onStopHandler.bind(this);this.oTrigger=new r(this.mConfig);return this.oTrigger.getInitPromise()}.bind(this)).then(function(){this._registerPostMessages();return this._restartRtaIfRequired()}.bind(this)).then(function(){return n.getAppLifeCycleService()}).then(function(e){e.attachAppLoaded(this._onAppLoaded,this);return s.getRenderer(this)}.bind(this)).then(function(e){this.oRenderer=e}.bind(this)).then(l).catch(function(e){if(e){o.error(e)}})},getPluginPromise:function(){return this._oPluginPromise},_registerPostMessages:function(){a.registerPostMessageAPIs({"user.postapi.rtaPlugin":{inCalls:{startUIAdaptation:{executeServiceCallFn:function(){sap.ui.getCore().getEventBus().subscribe("sap.ushell","appClosed",d.bind(this));this.oRenderer.addTopHeaderPlaceHolder();this.oTrigger.triggerStartRta(this);return a.createPostMessageResult()}.bind(this)}},outCalls:{activatePlugin:{},showAdaptUI:{}}}})},_restartRtaIfRequired:function(){return i.checkUI5App().then(function(e){if(e){if(i.checkRestartRTA(this.mConfig.layer)){return p(false).then(function(){this.oRenderer.addTopHeaderPlaceHolder();return this.oTrigger.triggerStartRta(this)}.bind(this))}}return undefined}.bind(this))},_onAppLoaded:function(){i.checkUI5App().then(function(e){if(e){this._restartRtaIfRequired().then(function(){return l()})}}.bind(this))},_onStopHandler:function(){this._exitAdaptation()},_onStartHandler:function(){},_onErrorHandler:function(){this._exitAdaptation()},_exitAdaptation:function(){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","appClosed",d.bind(this));p(true);this.oTrigger.exitRta();this.oRenderer.removeTopHeaderPlaceHolder()},exit:function(){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","appClosed",d.bind(this));p(true);this._oPluginPromise=this._oPluginPromise.then(n.getAppLifeCycleService.bind(n)).then(function(e){e.detachAppLoaded(this._onAppLoaded,this)}.bind(this))}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/plugins/rtaShell/Component", ["sap/ui/core/Component","sap/ushell/appRuntime/ui5/plugins/baseRta/Renderer","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils","sap/ui/thirdparty/jquery"],function(e,t,i,jQuery){"use strict";var n;function s(){return{sComponentName:"sap.ushell.appRuntime.ui5.plugins.rtaShell",layer:"CUSTOMER",id:"RTA_AppRuntime_Plugin_ActionButton",text:"RTA_BUTTON_TEXT",icon:"sap-icon://wrench",visible:false}}function r(e,t){if(e){e.setHeaderVisibility(t,false)}}function a(e){return new Promise(function(t,i){r(e,false);n.postMessageToApp("user.postapi.rtaPlugin","startUIAdaptation").done(t).fail(i)})}return e.extend("sap.ushell.appRuntime.ui5.plugins.rtaShell.Component",{metadata:{manifest:"json",library:"sap.ushell"},init:function(){this.mConfig=s();n=this.getComponentData().oPostMessageInterface;this._registerPostMessages()},_registerPostMessages:function(){n.registerPostMessageAPIs({"user.postapi.rtaPlugin":{inCalls:{activatePlugin:{executeServiceCallFn:function(){return n.createPostMessageResult(this._initPlugin())}.bind(this)},showAdaptUI:{executeServiceCallFn:function(){this._changeActionButtonVisibility(true);return n.createPostMessageResult()}.bind(this)},switchToolbarVisibility:{executeServiceCallFn:function(e){var t=e.oMessageData.body.visible;r(this.oRenderer,t);return n.createPostMessageResult()}.bind(this)}},outCalls:{startUIAdaptation:{}}}})},_initPlugin:function(){if(this.bIsInitialized){return(new jQuery.Deferred).resolve()}this.bIsInitialized=true;this.mConfig.i18n=this.getModel("i18n").getResourceBundle();return new jQuery.Deferred(function(e){t.getRenderer(this).then(function(e){this.oRenderer=e}.bind(this)).then(function(){return t.createActionButton(this,a.bind(undefined,this.oRenderer),this.mConfig.visible)}.bind(this)).then(function(){return i.getAppLifeCycleService()}).then(function(e){e.attachAppLoaded(this._onAppLoaded,this)}.bind(this)).catch(function(e){this.bIsInitialized=false;return Promise.reject(e)}.bind(this)).then(e.resolve,e.reject)}.bind(this)).promise()},_changeActionButtonVisibility:function(e){var t=sap.ui.getCore().byId(this.mConfig.id);if(t){t.setVisible(e)}},_onAppLoaded:function(){this._changeActionButtonVisibility(false)},exit:function(){if(this.oRenderer){r(this.oRenderer,false)}return i.getAppLifeCycleService().then(function(e){e.detachAppLoaded(this._onAppLoaded,this);if(this._onRendererCreated){var t=i.getContainer();t.detachRendererCreatedEvent(this._onRendererCreated,this)}}.bind(this))}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/plugins/scriptAgent/Component", ["sap/ui/core/Component","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,a,jQuery,t){"use strict";return e.extend("sap.ushell.appRuntime.ui5.plugins.scriptAgent.Component",{init:function(){var e=this.getComponentData(),s=(new a).search(true),n;if(!e.hasOwnProperty("config")){return}if(e.config.hasOwnProperty("scube")){if(s.hasOwnProperty("sap-wa-debug")&&s["sap-wa-debug"]==="dev"){n="https://education3.hana.ondemand.com/education3/web_assistant/framework/FioriAgent.js"}else if(s.hasOwnProperty("sap-wa-debug")&&s["sap-wa-debug"]==="prev"){n="https://webassistant-outlook.enable-now.cloud.sap/web_assistant/framework/FioriAgent.js"}else{n="https://webassistant.enable-now.cloud.sap/web_assistant/framework/FioriAgent.js"}}else{n=e.config.url}jQuery.ajaxSetup({cache:true});try{jQuery.getScript(n)}catch(e){t.error(e)}jQuery.ajaxSetup({cache:false})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/renderers/fiori2/AccessKeysAgent", ["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e){"use strict";var t=function(){this.init=function(){document.addEventListener("keydown",function(t){var y=false,i;if(t.altKey&&!t.ctrlKey&&!t.shiftKey){if(t.keyCode===65||t.keyCode===70||t.keyCode===72||t.keyCode===77||t.keyCode===78||t.keyCode===83){y=true}}else if(t.ctrlKey&&!t.altKey&&!t.shiftKey){if(t.keyCode===188||t.keyCode===112||t.keyCode===83){y=true}}else if(t.ctrlKey&&t.shiftKey&&!t.altKey){if(t.keyCode===70){y=true}}if(y){i={altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,keyCode:t.keyCode,key:t.key};if(t.keyCode===188){i.key=","}e.sendMessageToOuterShell("sap.ushell.services.ShellUIService.processHotKey",i)}}.bind(this),true)}};return new t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer", ["sap/base/util/ObjectPath","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/Log","sap/ui/thirdparty/jquery","sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions"],function(e,t,r,jQuery){"use strict";var s=[];function n(){var n=this;e.set("sap.ushell.renderers.fiori2.Renderer",n);["init","createContent","createExtendedShellState","applyExtendedShellState","showLeftPaneContent","showHeaderItem","showRightFloatingContainerItem","showRightFloatingContainer","showToolAreaItem","showFloatingActionButton","showHeaderEndItem","setHeaderVisibility","showSubHeader","showSignOutItem","showSettingsItem","setFooter","setShellFooter","setFooterControl","hideHeaderItem","removeToolAreaItem","removeRightFloatingContainerItem","hideLeftPaneContent","hideFloatingActionButton","hideSubHeader","removeFooter","getCurrentViewportState","addShellSubHeader","addSubHeader","addUserAction","addActionButton","addFloatingButton","addFloatingActionButton","addSidePaneContent","addLeftPaneContent","addHeaderItem","addRightFloatingContainerItem","addToolAreaItem","getModelConfiguration","addUserPreferencesEntry","addUserPreferencesGroupedEntry","setHeaderTitle","setLeftPaneVisibility","showToolArea","setHeaderHiding","setFloatingContainerContent","setFloatingContainerVisibility","getFloatingContainerVisiblity","getRightFloatingContainerVisibility","setFloatingContainerDragSelector","createTriggers","convertButtonsToActions","createItem","addEntryInShellStates","removeCustomItems","addCustomItems","addRightViewPort","addLeftViewPort","getShellController","getViewPortContainerCurrentState","ViewPortContainerNavTo","switchViewPortStateByControl","setUserActionsMenuSelected","getUserActionsMenuSelected","setNotificationsSelected","getNotificationsSelected","addShellDanglingControl","getShellConfig","reorderUserPrefEntries","addUserProfilingEntry","logRecentActivity","setCurrentCoreView","getCurrentCoreView"].forEach(function(e){n[e]=function(){r.error("'Renderer' api '"+e+"' is not supported when UI5 application is running inside an iframe (sap.ushell.appRuntime.ui5.renderers.fiori2.Renderer)")}});this.LaunchpadState={App:"app",Home:"home"};this._addButtonHandler=function(e,t){s[e]=t};this.handleHeaderButtonClick=function(e){if(s[e]!==undefined){s[e]()}};this.addHeaderItem=function(e,t,r,s,n){if(typeof arguments[0]==="object"&&typeof arguments[1]==="boolean"){t=arguments[0];r=arguments[1];s=arguments[2];n=arguments[3]}this._addHeaderItem("sap.ushell.services.Renderer.addHeaderItem",t,r,s,n)};this.addHeaderEndItem=function(e,t,r,s,n){if(typeof arguments[0]==="object"&&typeof arguments[1]==="boolean"){t=arguments[0];r=arguments[1];s=arguments[2];n=arguments[3]}this._addHeaderItem("sap.ushell.services.Renderer.addHeaderEndItem",t,r,s,n)};this.showHeaderItem=function(e){t.sendMessageToOuterShell("sap.ushell.services.Renderer.showHeaderItem",{aIds:e,bCurrentState:true,aStates:""})};this.showHeaderEndItem=function(e){t.sendMessageToOuterShell("sap.ushell.services.Renderer.showHeaderEndItem",{aIds:e,bCurrentState:true,aStates:""})};this.hideHeaderItem=function(e){t.sendMessageToOuterShell("sap.ushell.services.Renderer.hideHeaderItem",{aIds:e,bCurrentState:true,aStates:""})};this.hideHeaderEndItem=function(e){t.sendMessageToOuterShell("sap.ushell.services.Renderer.hideHeaderEndItem",{aIds:e,bCurrentState:true,aStates:""})};this._addHeaderItem=function(e,r,s){if(r.click!==undefined){this._addButtonHandler(r.id,r.click)}else if(r.press!==undefined){this._addButtonHandler(r.id,r.press)}t.sendMessageToOuterShell(e,{sId:r.id,sTooltip:r.tooltip,sIcon:r.icon,iFloatingNumber:r.floatingNumber,bVisible:s,bCurrentState:true})};this.setHeaderTitle=function(e){t.sendMessageToOuterShell("sap.ushell.services.Renderer.setHeaderTitle",{sTitle:e})};this.setHeaderVisibility=function(e,r,s){t.sendMessageToOuterShell("sap.ushell.services.Renderer.setHeaderVisibility",{bVisible:e,bCurrentState:r,aStates:s})};this.createShellHeadItem=function(e){if(e.press!==undefined){this._addButtonHandler(e.id,e.press);delete e.press}t.sendMessageToOuterShell("sap.ushell.services.Renderer.createShellHeadItem",{params:e})};this.showActionButton=function(e,r,s){t.sendMessageToOuterShell("sap.ushell.services.Renderer.showActionButton",{aIds:e,bCurrentState:r,aStates:s})};this.hideActionButton=function(e,r,s){t.sendMessageToOuterShell("sap.ushell.services.Renderer.hideActionButton",{aIds:e,bCurrentState:r,aStates:s})};this.addUserAction=function(e){if(e.oControlProperties.press!==undefined){this._addButtonHandler(e.oControlProperties.id,e.oControlProperties.press);delete e.oControlProperties.press}t.sendMessageToOuterShell("sap.ushell.services.Renderer.addUserAction",{oParameters:e})};this.addTopHeaderPlaceHolder=function(){if(jQuery("#rmheader").length===0){jQuery("body").prepend("<div id='rmheader' class='sapUshellHeaderPlaceHolder'></div>");jQuery("body").find(".sapAppRuntimeBaseStyle").css("height","calc(100% - 2.75rem)")}};this.removeTopHeaderPlaceHolder=function(){jQuery("#rmheader").remove();jQuery("body").find(".sapAppRuntimeBaseStyle").css("height","100%")};this.updateHeaderItem=function(e,r){return t.sendMessageToOuterShell("sap.ushell.services.Renderer.updateHeaderItem",{sId:e,oControlProperties:r})};this.destroyButton=function(e){return t.sendMessageToOuterShell("sap.ushell.services.Renderer.destroyButton",{aIds:e})}}return new n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions", ["sap/base/util/ObjectPath","sap/base/util/uid","sap/ushell/EventHub","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/core/Core"],function(e,t,n,i,r){"use strict";function s(e){setTimeout(function(){r.getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"})},0);n.emit("RendererLoaded",{rendererName:"fiori2"})}function o(e,t){setTimeout(function(){r.getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",e,t)},0)}function u(e,t,n){}function a(e,t,n){}function d(e,t,n){}function c(e,t,n){}function f(e,n,r){var s=Array.isArray(e)?e:[e],o=[n],u=[];if(r!==undefined){o.push(r)}s.forEach(function(e){var n=t()+"-apprt";e.idAppRuntime=n;sap.ushell.renderers.fiori2.Renderer._addButtonHandler(n,function(){e.firePress()});u.push({id:n,text:e.getText(),icon:e.getIcon(),tooltip:e.getTooltip(),aStates:o})});return i.sendMessageToOuterShell("sap.ushell.services.Renderer.addOptionsActionSheetButton",u)}function h(e,t,n){var r=Array.isArray(e)?e:[e],s=[t],o=[];if(n!==undefined){s.push(n)}r.forEach(function(e){o.push({id:e.idAppRuntime,aStates:s})});return i.sendMessageToOuterShell("sap.ushell.services.Renderer.removeOptionsActionSheetButton",o)}function p(e,t,n){}function l(e,t){}function m(e,t,n){}function v(e,t,n){}function A(e,t,n){}function E(e,t,n){}function H(){return{}}function b(e,t,n,i){}function g(e,t){}function S(e){}function R(e){}function B(e){}function y(e,t){}function I(e){}function O(e){}function P(){}function T(){this.addHeaderItem=d;this.setHeaderItemVisibility=b;this.addSubHeader=u;this.removeSubHeader=a;this.addHeaderEndItem=A;this.removeHeaderItem=c;this.removeHeaderEndItem=E;this.addEndUserFeedbackCustomUI=g;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=h;this.setFooter=O;this.removeFooter=P;this.addUserPreferencesEntry=S;this.addUserPreferencesGroupedEntry=R;this.setHeaderTitle=B;this.setHeaderHiding=I;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=m;this.removeFloatingActionButton=v;this.setLeftPaneContent=p;this.removeLeftPaneContent=l;this.setLeftPaneVisibility=y;this.getConfiguration=H}var L=new T;var C={publishExternalEvent:o,init:s};e.set("sap.ushell.renderers.fiori2.utils",C);e.set("sap.ushell.renderers.fiori2.RendererExtensions",L);return L});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/AppConfiguration", ["sap/base/util/ObjectPath","sap/m/library","sap/ui/core/IconPool","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/EventHub","sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions","sap/ushell/resources","sap/ushell/services/AppConfiguration"],function(t,e,i,s,n,o,p,a){"use strict";var l=e.ButtonType;function u(){var e=[];var u=false;t.set("sap.ushell.services.AppConfiguration",this);a.constructor.call(this);n.on("appWidthChange").do(function(t){var e=document.body;e.classList.toggle("sapUiSizeCompact",t);e.classList.toggle("sapUShellApplicationContainerLimitedWidth",!t);e.classList.toggle("sapUShellApplicationContainer",!t)});this.setApplicationFullWidth=function(t){if(u===true||u==="true"){n.emit("appWidthChange",t)}else{s.sendMessageToOuterShell("sap.ushell.services.AppConfiguration.setApplicationFullWidth",{bValue:t})}};this.setFullWidthFromManifest=function(t){u=t};this.addApplicationSettingsButtons=function(t){for(var s=0;s<t.length;s++){var n=t[s];n.setIcon(n.getIcon()||i.getIconURI("customize"));if(p.i18n.getText("userSettings")===n.getProperty("text")){n.setProperty("text",p.i18n.getText("userAppSettings"))}n.setType(l.Unstyled)}o.removeOptionsActionSheetButton(e,"app").done(function(){e=t;o.addOptionsActionSheetButton(e,"app")})}}return new u},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent", ["sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/util/extend","sap/base/util/UriParameters","sap/ui/thirdparty/URI","sap/ui/Device","sap/ui/core/BusyIndicator","sap/ushell/appRuntime/ui5/performance/FesrEnhancer","sap/ushell/EventHub","sap/base/Log","sap/ui/thirdparty/hasher","sap/ui/core/Core","sap/ushell/utils/UrlParsing","sap/ushell/appRuntime/ui5/AppRuntimeContext","sap/base/assert","sap/ushell/resources"],function(e,t,s,n,a,r,i,p,o,u,l,f,c,h,d,g){"use strict";function m(){var m=this,A,v,C=true,y={},I,S={},b={},P={},R={},w,N,O,F,H;this.init=function(s,n,a,r,i,p){this.resetCurrentApp();A=s;I=n;N=a;if(r!==undefined){C=r}this.addAppInfoToCache(i,p);e.registerCommHandlers({"sap.ushell.services.appLifeCycle":{oServiceCalls:{create:{executeServiceCallFn:function(e){var t=JSON.parse(e.oMessage.data);return m.create(t)}},destroy:{executeServiceCallFn:function(e){var t=JSON.parse(e.oMessage.data);return m.destroy(t)}},store:{executeServiceCallFn:function(e){var t=JSON.parse(e.oMessage.data);return m.store(t)}},restore:{executeServiceCallFn:function(e){var t=JSON.parse(e.oMessage.data);return m.restore(t)}}}}});o.on("disableKeepAliveRestoreRouterRetrigger").do(function(e){if(e.componentId&&b[e.componentId]){b[e.componentId]=e.disable}});t.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.setup",{isStateful:true,isKeepAlive:true,isIframeValid:true,isIframeBusy:true});if(!g.browserI18n){g.browserI18n=g.getTranslationModel(window.navigator.language).getResourceBundle()}F=g.browserI18n.getText("dataLossExternalMessage");window.onbeforeunload=function(){if(sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()){return F}return undefined}};this.create=function(e){return new Promise(function(s,o){var u,g,A,v,C="",y;t.sendMessageToOuterShell("sap.ushell.appRuntime.iframeIsBusy",{bValue:true});p.startInteraction();u=e.body.sUrl;if(h.getIsScube()){A=n.fromURL(u).get("sap-remote-intent");d(typeof A==="string","AppLifeCycleAgent::create - sAppIntent must be string");if(e.body.sHash.indexOf("Shell-startIntent")===0){v=c.parseShellHash(e.body.sHash);C=v.params["sap-shell-so"]+"-"+v.params["sap-shell-action"]}}else{g=n.fromURL(u).get("sap-ui-app-id");d(typeof g==="string","AppLifeCycleAgent::create - sAppId must be string")}l.disableCFLPUpdate=true;l.replaceHash(e.body.sHash);l.disableCFLPUpdate=false;if(r.browser.chrome){i.show(0)}if(O){O._resetBackNavigationCallback()}f.getEventBus().publish("launchpad","appOpening",{});m.getAppInfo(g,u,A).then(function(e){if(h.getIsScube()&&C.length>0){y=Object.keys(S).find(function(t){return S[t].sAppIntent===C&&S[t].ui5ComponentName===e.oResolvedHashFragment.ui5ComponentName});if(y){m.destroy({body:{sCacheId:y}})}}m.expandSapIntentParams(new a(u).query(true)).then(function(n){I(g,n,e.oResolvedHashFragment,A,e.oParsedHash).then(function(e){N(e);t.sendMessageToOuterShell("sap.ushell.appRuntime.iframeIsBusy",{bValue:false});f.getEventBus().publish("sap.ushell","appOpened",{});s({deletedKeepAliveId:y})})})})})};this.destroy=function(e){function s(e){var t=e.sId||"<unkown>";try{e.destroy()}catch(e){u.error("exception when trying to close sapui5 application with id '"+t+"' when running inside the appruntim iframe '"+document.URL+"'. This error must be fixed in order for the iframe to operate properly.\n",e.stack,"sap.ushell.appRuntime.ui5.services.AppLifeCycleAgent::destroy")}}if(w.oApp===undefined){t.sendMessageToOuterShell("sap.ushell.appRuntime.isInvalidIframe",{bValue:true});return Promise.resolve()}var n=e.body.sCacheId;if(n&&S[n]){if(S[n].oApp===w.oApp){this.resetCurrentApp()}delete b[S[n].oApp.sId];s(S[n].oApp);delete S[n]}else if(w.oApp){delete b[w.oApp.sId];s(w.oApp);this.resetCurrentApp()}sap.ushell.Container.cleanDirtyStateProviderArray();if(O){O._resetBackNavigationCallback()}p.setAppShortId();f.getEventBus().publish("sap.ushell","appClosed",{});return Promise.resolve()};this.store=function(e){var s=e.body.sCacheId,n=this.cloneCurrentAppEntry(w),a;if(w.oApp===undefined){t.sendMessageToOuterShell("sap.ushell.appRuntime.isInvalidIframe",{bValue:true});return Promise.resolve()}S[s]=n;if(O){R[s]=O._getBackNavigationCallback()}a=n.oApp.getComponentInstance();n.oApp.setVisible(false);if(sap.ushell.Container){P[s]=sap.ushell.Container.getAsyncDirtyStateProviders();sap.ushell.Container.cleanDirtyStateProviderArray()}if(a){if(a.isKeepAliveSupported&&a.isKeepAliveSupported()===true){a.deactivate()}else{if(a.suspend){a.suspend()}if(a.getRouter&&a.getRouter()){a.getRouter().stop()}}}f.getEventBus().publish("sap.ushell","appClosed",{});return Promise.resolve()};this.restore=function(e){var s=e.body.sCacheId,n=S[s],a=n.oApp.getComponentInstance(),r=b[n.oApp.sId];l.disableCFLPUpdate=true;l.replaceHash(e.body.sHash);l.disableCFLPUpdate=false;f.getEventBus().publish("launchpad","appOpening",{});n.oApp.setVisible(true);if(P[s]&&sap.ushell.Container){sap.ushell.Container.setAsyncDirtyStateProviders(P[s])}if(O){O.setBackNavigation(R[s])}if(a){if(a.isKeepAliveSupported&&a.isKeepAliveSupported()===true){a.activate()}else{if(a.restore){a.restore()}if(a.getRouter&&a.getRouter()&&a.getRouter().initialize){if(r===false){a.getRouter().initialize()}else{a.getRouter().initialize(true)}}}w=this.cloneCurrentAppEntry(n)}f.getEventBus().publish("sap.ushell","appOpened",{});setTimeout(function(){t.sendMessageToOuterShell("sap.ushell.services.AppLifeCycle.setNewAppInfo",{info:n.oAppAttributes})},500);return Promise.resolve()};this.expandSapIntentParams=function(e){return new Promise(function(n,r){if(e.hasOwnProperty("sap-intent-param")){var i=e["sap-intent-param"];t.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{sAppStateKey:i}).then(function(t){delete e["sap-intent-param"];var r=s({},e,new a("?"+t).query(true),true);n(r)},function(t){n(e)})}else{n(e)}})};this.addAppParamsToIntent=function(e,t){return m.expandSapIntentParams(new a(e).query(true)).then(function(e){return m.getApplicationParameters(e)})};this.getApplicationParameters=function(e){return new Promise(function(s){var n,r,i;function p(e,t){var s="";if(e&&e.length>0){s=(e.startsWith("?")?"":"?")+e}if(t&&t.length>0){s+=(s.length>0?"&":"?")+t}return s}if(e.hasOwnProperty("sap-startup-params")){n=new a("?"+e["sap-startup-params"]).query(true);if(n.hasOwnProperty("sap-intent-param")){r=n["sap-intent-param"];delete n["sap-intent-param"]}i=new a("?").query(n).toString();if(r){t.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{sAppStateKey:r}).then(function(e){s(p(i,e))},function(e){s(p(i))})}else{s(p(i))}}else{s("")}})};this.getAppInfo=function(e,t,s){return new Promise(function(n){if(s){m.addAppParamsToIntent(t,s).then(function(e){if(e.length>0){e=new a(e).removeSearch("sap-remote-system").removeSearch("sap-ushell-defaultedParameterNames").toString()}sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(t){t.resolveHashFragmentLocal("#"+s+e).done(function(t){var a=c.parseShellHash("#"+s+e);n({oResolvedHashFragment:t,oParsedHash:a})}).fail(function(e){})})})}else{var r=function(){v.getAppInfo(e,t).then(function(t){m.addAppInfoToCache(e,t);n({oResolvedHashFragment:t})})};if(C===true&&y[e]){n({oResolvedHashFragment:JSON.parse(JSON.stringify(y[e]))})}else if(v){r()}else{sap.ui.require([A.replace(/\./g,"/")],function(e){v=e;r()})}}})};this.addAppInfoToCache=function(e,t){if(e&&t&&C===true&&y[e]===undefined){y[e]=JSON.parse(JSON.stringify(t))}};this.setCurrentApp=function(e,t,s){this.resetCurrentApp();w.oApp=e;w.sAppIntent=t;w.ui5ComponentName=s;if(w.oApp){b[w.oApp.sId]=true}};this.setCurrentAppAttributes=function(e){w.oAppAttributes=e};this.resetCurrentApp=function(){w={oApp:undefined,sAppIntent:undefined,ui5ComponentName:undefined,oAppAttributes:{}}};this.cloneCurrentAppEntry=function(e){return{oApp:e.oApp,sAppIntent:e.sAppIntent,ui5ComponentName:e.ui5ComponentName,oAppAttributes:e.oAppAttributes}};this.setShellUIService=function(e){O=e};this.setShellNavigationService=function(e){H=e};this.checkDataLossAndContinue=function(){if(sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getDirtyFlag(H.getNavigationContext())){if(window.confirm(F)){sap.ushell.Container.setDirtyFlag(false);return true}else{return false}}return true}}return new m},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/AppState", ["sap/ushell/services/AppState","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/services/_AppState/AppState","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(e,t,s,a,jQuery){"use strict";function p(a,p,n,r){e.call(this,a,p,n,r);this.createEmptyAppStateOrig=this.createEmptyAppState;this.createEmptyAppState=function(e,t,s,a){var p=this.createEmptyAppStateOrig(e,t,s,a);if(typeof t==="boolean"&&p._bTransient!==t){p._bTransient=t;p._sKey=this._getGeneratedKey(t)}return p};this.getAppState=function(e){var a=new jQuery.Deferred;t.sendMessageToOuterShell("sap.ushell.services.AppState.getAppState",{sKey:e}).done(function(e){sap.ushell.Container.getServiceAsync("AppState").then(function(t){var p=new s(t,e._sKey,e._bModifiable,e._sData,e._sAppName,e._sACHComponent,e._bTransient,e._iPersistencyMethod,e._oPersistencySettings);a.resolve(p)})});return a.promise()};this._saveAppState=function(e,s,a,p,n,r,i){return t.sendMessageToOuterShell("sap.ushell.services.AppState._saveAppState",{sKey:e,sData:s,sAppName:a,sComponent:p,bTransient:n,iPersistencyMethod:r,oPersistencySettings:i})};this._loadAppState=function(e){return t.sendMessageToOuterShell("sap.ushell.services.AppState._loadAppState",{sKey:e})};e.prototype.deleteAppState=function(e){return t.sendMessageToOuterShell("sap.ushell.services.AppState.deleteAppState",{sKey:e})};this.getAppStateData=function(e){return t.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{sAppStateKey:e})};this.createNewInAppState=function(e){return t.sendMessageToOuterShell("sap.ushell.services.AppState.createNewInAppState",{sData:e})};this.updateInAppStateData=function(e){return t.sendMessageToOuterShell("sap.ushell.services.AppState.updateInAppState",{sData:e})};this.getInAppStateData=function(){return t.sendMessageToOuterShell("sap.ushell.services.AppState.getInAppStateData")};this.makeStatePersistent=function(e,s,a){return t.sendMessageToOuterShell("sap.ushell.services.AppState.makeStatePersistent",{sKey:e,iPersistencyMethod:s,oPersistencySettings:a})}}p.prototype=e.prototype;p.hasNoAdapter=e.hasNoAdapter;p.WindowAdapter=e.WindowAdapter;return p},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/Bookmark", ["sap/ushell/services/Bookmark","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e,o){"use strict";function s(s,r,t){e.call(this,s,r,t);this.addBookmark=function(e,s){return o.sendMessageToOuterShell("sap.ushell.services.Bookmark.addBookmarkUI5",{oParameters:e,vContainer:s})};this.getShellGroupIDs=function(){return o.sendMessageToOuterShell("sap.ushell.services.Bookmark.getShellGroupIDs")};this.addBookmarkByGroupId=function(e,s){return o.sendMessageToOuterShell("sap.ushell.services.Bookmark.addBookmark",{oParameters:e,groupId:s})};this.addCatalogTileToGroup=function(e,s,r){return o.sendMessageToOuterShell("sap.ushell.services.Bookmark.addCatalogTileToGroup",{sCatalogTileId:e,sGroupId:s,oCatalogData:r})};this.countBookmarks=function(e){return o.sendMessageToOuterShell("sap.ushell.services.Bookmark.countBookmarks",{sUrl:e})};this.deleteBookmarks=function(e){return o.sendMessageToOuterShell("sap.ushell.services.Bookmark.deleteBookmarks",{sUrl:e})};this.updateBookmarks=function(e,s){return o.sendMessageToOuterShell("sap.ushell.services.Bookmark.updateBookmarks",{sUrl:e,oParameters:s})};this.getContentNodes=function(){var e=o.sendMessageToOuterShell("sap.ushell.services.Bookmark.getContentNodes");return new Promise(function(o,s){e.done(function(e){o(e)}).fail(function(e){s(e)})})};this.addCustomBookmark=function(e,s,r){var t=o.sendMessageToOuterShell("sap.ushell.services.Bookmark.addCustomBookmark",{sVizType:e,oConfig:s,vContentNodes:r});return new Promise(function(e,o){t.done(function(o){e(o)}).fail(function(e){o(e)})})};this.countCustomBookmarks=function(e){var s=o.sendMessageToOuterShell("sap.ushell.services.Bookmark.countCustomBookmarks",{oIdentifier:e});return new Promise(function(e,o){s.done(function(o){e(o)}).fail(function(e){o(e)})})};this.updateCustomBookmarks=function(e,s){var r=o.sendMessageToOuterShell("sap.ushell.services.Bookmark.updateCustomBookmarks",{oIdentifier:e,oConfig:s});return new Promise(function(e,o){r.done(function(o){e(o)}).fail(function(e){o(e)})})};this.deleteCustomBookmarks=function(e){var s=o.sendMessageToOuterShell("sap.ushell.services.Bookmark.deleteCustomBookmarks",{oIdentifier:e});return new Promise(function(e,o){s.done(function(o){e(o)}).fail(function(e){o(e)})})};this.addBookmarkToPage=function(e,s){return new Promise(function(r,t){o.sendMessageToOuterShell("sap.ushell.services.Bookmark.addBookmarkToPage",{oParameters:e,sPageId:s}).done(r).fail(t)})}}s.prototype=e.prototype;s.hasNoAdapter=e.hasNoAdapter;return s},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/CommonDataModel", ["sap/ushell/services/CommonDataModel","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e,s){"use strict";function t(t,o,n,a){e.call(this,t,o,n,a);this.getAllPages=function(){return new Promise(function(e){s.sendMessageToOuterShell("sap.ushell.services.CommonDataModel.getAllPages").done(e)})}}t.prototype=e.prototype;t.hasNoAdapter=e.hasNoAdapter;return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/Container", ["sap/ushell/Container","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer","sap/ushell/appRuntime/ui5/ui/UIProxy","sap/ushell/appRuntime/ui5/SessionHandlerAgent"],function(e,n,t,r,i){"use strict";function s(){var e,r=false,s=[];this.bootstrap=function(a,u){return sap.ushell.bootstrap(a,u).then(function(a){e=sap.ushell.Container._getAdapter();sap.ushell.Container.inAppRuntime=function(){return true};sap.ushell.Container.runningInIframe=sap.ushell.Container.inAppRuntime;sap.ushell.Container.getFLPUrl=function(e){return n.sendMessageToOuterShell("sap.ushell.services.Container.getFLPUrl",{bIncludeHash:e})};sap.ushell.Container.getFLPUrlAsync=function(e){return sap.ushell.Container.getFLPUrl(e)};sap.ushell.Container.getRenderer=function(){return t};sap.ushell.Container.logout=function(){return e.logout()};sap.ushell.Container.getFLPPlatform=function(){return n.sendMessageToOuterShell("sap.ushell.services.Container.getFLPPlatform")};sap.ushell.Container.extendSession=function(){i.userActivityHandler()};sap.ushell.Container.setDirtyFlag=function(e){r=e};sap.ushell.Container.getDirtyFlag=function(e){return r||sap.ushell.Container.handleDirtyStateProvider(e)};sap.ushell.Container.registerDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function")}s.push(e)};sap.ushell.Container.handleDirtyStateProvider=function(e){var n=false;if(s.length>0){for(var t=0;t<s.length&&n===false;t++){n=n||(s[t](e)||false)}}return n};sap.ushell.Container.deregisterDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function")}var n=-1;for(var t=s.length-1;t>=0;t--){if(s[t]===e){n=t;break}}if(n>=0){s.splice(n,1)}};sap.ushell.Container.cleanDirtyStateProviderArray=function(){s=[];r=false};sap.ushell.Container.setAsyncDirtyStateProvider=function(){};sap.ushell.Container.getAsyncDirtyStateProviders=function(){return s};sap.ushell.Container.setAsyncDirtyStateProviders=function(e){s=e}})}}return new s},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/CrossApplicationNavigation", ["sap/ushell/services/CrossApplicationNavigation","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/services/_AppState/AppState","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/appRuntime/ui5/AppRuntimeContext","sap/base/util/deepClone","sap/ushell/utils/UrlParsing"],function(e,s,t,jQuery,i,n,a,r){"use strict";function o(o,l,p){e.call(this,o,l,p);this.backToPreviousApp=function(){if(n.checkDataLossAndContinue()){return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.backToPreviousApp")}};this.expandCompactHashLocal=this.expandCompactHash;this.expandCompactHash=function(e){if(n.getIsScube()){return this.expandCompactHashLocal(e)}return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.expandCompactHash",{sHashFragment:e})};this.getDistinctSemanticObjectsLocal=this.getDistinctSemanticObjects;this.getDistinctSemanticObjects=function(){if(n.getIsScube()){return this.getDistinctSemanticObjectsLocal()}return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getDistinctSemanticObjects")};this.getLinksLocal=this.getDistinctSemanticObjects;this.getLinks=function(e){var t=new jQuery.Deferred;function i(e){if(Array.isArray(e)){e.forEach(function(e){if(e[0]){delete e[0].ui5Component}})}else{delete e.ui5Component}}if(n.getIsScube()){this.getLinksLocal(e).then(function(n){i(e);s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getLinks",e).done(function(e){if(n.length===0){t.resolve(e)}else{e=e.concat(n);t.resolve(e)}})})}else{i(e);s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getLinks",e).done(t.resolve,t.reject)}return t.promise()};this.getPrimaryIntent=function(e,t){return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getPrimaryIntent",{sSemanticObject:e,mParameters:t})};this.getSemanticObjectLinks=function(e,t,i,n,a,r){return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks",{sSemanticObject:e,mParameters:t,bIgnoreFormFactor:i,sAppStateKey:a,bCompactIntents:r})};this.historyBack=function(e){if(n.checkDataLossAndContinue()){s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.historyBack",{iSteps:e})}};this.isIntentSupported=function(e,t){if(n.getIsScube()){var i=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(s){s.isIntentSupported(e,t).done(i.resolve,i.reject)});return i.promise()}return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isIntentSupported",{aIntents:e})};this.isNavigationSupported=function(e,t,i){var r=function(e){return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isNavigationSupported",{aIntents:e})};if(i===true){return r(e)}if(n.getIsScube()){var o=new jQuery.Deferred,l;l=e.map(function(e){if(typeof e==="object"){var s=e;if(e.params&&e.params.hasOwnProperty("sap-app-origin")){s=a(e);delete s.params["sap-app-origin"]}return s}return e});sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(e){e.isNavigationSupported(l,t).done(o.resolve,o.reject)});return o.promise()}return r(e)};this.toExternal=function(e,t){if(n.getIsScube()){if(e.target&&e.target.shellHash){var i=r.parseShellHash(e.target.shellHash);if(i.params){delete i.params["sap-app-origin"];e.target.shellHash=r.constructShellHash(i)}}else if(e.params){delete e.params["sap-app-origin"]}sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(s){s.toExternal(e,t)})}else if(n.checkDataLossAndContinue()){s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.toExternal",{oArgs:e})}return(new jQuery.Deferred).resolve().promise()};this.getAppState=function(e,i){var n=new jQuery.Deferred;s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppState",{sAppStateKey:i}).done(function(e){sap.ushell.Container.getServiceAsync("AppState").then(function(s){var i=new t(s,e._sKey,e._bModifiable,e._sData,e._sAppName,e._sACHComponent,e._bTransient);n.resolve(i)})});return n.promise()};this.resolveIntentLocal=this.resolveIntent;this.resolveIntent=function(e){if(n.getIsScube()){return this.resolveIntentLocal(e)}return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.resolveIntent",{sHashFragment:e})};this.hrefForExternalAsync=function(e){return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.hrefForExternal",{oArgs:e})};this.hrefForAppSpecificHashAsync=function(e){return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.hrefForAppSpecificHash",{sAppHash:e})};this.isInitialNavigation=function(){i.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.isInitialNavigation'. Please use 'isInitialNavigationAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");return false};this.isInitialNavigationAsync=function(){return s.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isInitialNavigation",{})}}o.prototype=e.prototype;o.hasNoAdapter=e.hasNoAdapter;return o},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/LaunchPage", ["sap/ushell/services/LaunchPage","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e,s){"use strict";function t(t,r,o){e.call(this,t,r,o);this.getGroupsForBookmarks=function(){return s.sendMessageToOuterShell("sap.ushell.services.LaunchPage.getGroupsForBookmarks")}}t.prototype=e.prototype;t.hasNoAdapter=e.hasNoAdapter;return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/Menu", ["sap/ushell/services/Menu","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e,s){"use strict";function t(){e.call(this,arguments);this.getSpacesPagesHierarchy=function(){return new Promise(function(e){s.sendMessageToOuterShell("sap.ushell.services.Menu.getSpacesPagesHierarchy").done(e)})}}t.prototype=e.prototype;t.hasNoAdapter=e.hasNoAdapter;return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/MessageBroker", ["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e){"use strict";var s={};var n=function(){};n.prototype.connect=function(s){return new Promise(function(n,t){e.sendMessageToOuterShell("sap.ushell.services.MessageBroker",{channelId:"sap.ushell.MessageBroker",clientId:s,messageName:"connect"}).then(function(e){if(e.status==="accepted"){n(e.activeClients)}else{t()}})})};n.prototype.disconnect=function(n){delete s[n];e.sendMessageToOuterShell("sap.ushell.services.MessageBroker",{channelId:"sap.ushell.MessageBroker",clientId:n,messageName:"disconnect"})};n.prototype.subscribe=function(n,t,c,i){return new Promise(function(a,r){s[n]={fnMessageCallback:c,fnClientConnectionCallback:i};e.sendMessageToOuterShell("sap.ushell.services.MessageBroker",{channelId:"sap.ushell.MessageBroker",clientId:n,messageName:"subscribe",subscribedChannels:t}).then(function(e){if(e.status==="accepted"){a();if(e.activeClients){setTimeout(function(){e.activeClients.foreach(function(e){i("clientSubscribed",e.clientId,e.channels)})},1)}}else{r()}})})};n.prototype.unsubscribe=function(s,n){return new Promise(function(t,c){e.sendMessageToOuterShell("sap.ushell.services.MessageBroker",{channelId:"sap.ushell.MessageBroker",clientId:s,messageName:"unsubscribe",subscribedChannels:n}).then(function(e){if(e.status==="accepted"){t()}else{c()}})})};n.prototype.publish=function(s,n,t,c,i,a){e.sendMessageToOuterShell("sap.ushell.services.MessageBroker",{clientId:n,channelId:s,targetClientIds:i,messageName:c,data:a},t)};n.prototype.addAcceptedOrigin=function(e){};n.prototype.removeAcceptedOrigin=function(e){};n.prototype.getAcceptedOrigins=function(){};n.prototype.getAcceptedOrigins=function(){};n.prototype.handleMessage=function(e){return new Promise(function(n,t){if(e.channelId==="sap.ushell.MessageBroker"){if(e.messageName==="clientSubscribed"||e.messageName==="clientUnsubscribed"){Object.keys(s).forEach(function(n){s[n].fnClientConnectionCallback(e.messageName,e.clientId,e.channels)})}}n({_noresponse_:true});return})};n.hasNoAdapter=true;return n},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/NavTargetResolution", ["sap/ushell/services/NavTargetResolution","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/AppRuntimeContext","sap/ui/thirdparty/jquery"],function(e,t,s,jQuery){"use strict";function n(n,r,i,a){e.call(this,n,r,i,a);this.getDistinctSemanticObjectsLocal=this.getDistinctSemanticObjects;this.getDistinctSemanticObjects=function(){var e=new jQuery.Deferred,n=[],r;n.push(s.getIsScube()?this.getDistinctSemanticObjectsLocal():Promise.resolve([]));n.push(t.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.getDistinctSemanticObjects"));Promise.allSettled(n).then(function(t){r=t[0].status==="fulfilled"?t[0].value:[];r=r.concat(t[1].status==="fulfilled"?t[1].value:[]);r=r.filter(function(e,t,s){return s.indexOf(e)==t}).sort();e.resolve(r)});return e.promise()};this.expandCompactHash=function(e){if(e&&e.indexOf("sap-intent-param")>0){return t.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.expandCompactHash",{sHashFragment:e})}return(new jQuery.Deferred).resolve(e).promise()};this.resolveHashFragmentLocal=this.resolveHashFragment;this.resolveHashFragment=function(e){if(s.getIsScube()){var n=new jQuery.Deferred;this.resolveHashFragmentLocal(e).done(n.resolve).fail(function(){return t.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.resolveHashFragment",{sHashFragment:e}).done(n.resolve).fail(n.reject)});return n.promise()}else{return t.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.resolveHashFragment",{sHashFragment:e})}};this.isIntentSupportedLocal=this.isIntentSupported;this.isIntentSupported=function(e){var n=new jQuery.Deferred,r=[],i,a;r.push(s.getIsScube()?this.isIntentSupportedLocal(e):Promise.resolve(undefined));r.push(t.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.isIntentSupported",{aIntents:e}));Promise.allSettled(r).then(function(t){i=t[0].status==="fulfilled"?t[0].value:undefined;a=t[1].status==="fulfilled"?t[1].value:undefined;if(i&&a){Object.keys(i).forEach(function(e){i[e].supported=i[e].supported||a[e].supported})}else if(i||a){i=i||a}else{i={};e.forEach(function(e){i[e]={supported:undefined}})}n.resolve(i)});return n.promise()}}n.prototype=e.prototype;n.hasNoAdapter=e.hasNoAdapter;return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/ReferenceResolver", ["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e){"use strict";function s(){this.resolveReferences=function(s,r){return e.sendMessageToOuterShell("sap.ushell.services.ReferenceResolver.resolveReferences",{aReferences:s})}}s.hasNoAdapter=true;return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/ShellNavigation", ["sap/ushell/services/ShellNavigation","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/AppRuntimeContext","sap/ushell/utils/UrlParsing"],function(e,t,s,a){"use strict";function i(i,n,l){e.call(this,i,n,l);this.toExternal=function(e,i,n){if(!s.checkDataLossAndContinue()){return}if(s.getIsScube()){sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(i){var n=a.constructShellHash(e);i.isIntentSupportedLocal([n]).then(function(i){if(i[n].supported===true){if(e.target.shellHash){e=a.parseShellHash(e.target.shellHash);e.target={semanticObject:e.semanticObject,action:e.action};delete e["semanticObject"];delete e["action"]}e.params["sap-shell-so"]=e.target.semanticObject;e.params["sap-shell-action"]=e.target.action;e.params["sap-remote-system"]=s.getRemoteSystemId();e.target.semanticObject="Shell";e.target.action="startIntent";return t.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.toExternal",{oArgs:e})}t.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.toExternal",{oArgs:e})})})}else{t.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.toExternal",{oArgs:e})}};this.toAppHash=function(e,s){t.sendMessageToOuterShell("sap.ushell.services.ShellNavigation.toExternal",{sAppHash:e,bWriteHistory:s})}}i.prototype=e.prototype;i.hasNoAdapter=e.hasNoAdapter;return i},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/ShellUIService", ["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","../../../ui5service/_ShellUIService/shelluiservice.class.factory","sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/AppRuntimeContext","sap/ui/thirdparty/jquery","sap/ushell/utils/UrlParsing","sap/ushell/utils/clone"],function(e,t,s,i,a,r,n,jQuery,l,c){"use strict";var u=i({serviceRegistry:e,serviceFactory:t,service:s});var o,p=false,h;var v=u.extend("sap.ushell.appRuntime.services.ShellUIService",{setTitle:function(e){o=e;return r.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setTitle",{sTitle:e})},getTitle:function(){return o},setHierarchy:function(e){var t=function(e){r.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setHierarchy",{aHierarchyLevels:e})};if(n.getIsScube()===true&&Array.isArray(e)&&e.length>0){f(e).then(function(e){t(e)});return}t(e)},setRelatedApps:function(e){var t=function(e){r.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setRelatedApps",{aRelatedApps:e})};if(n.getIsScube()===true&&Array.isArray(e)&&e.length>0){f(e).then(function(e){t(e)});return}t(e)},setBackNavigation:function(e){if(!p){p=true;a.registerCommHandlers({"sap.ushell.appRuntime":{oServiceCalls:{handleBackNavigation:{executeServiceCallFn:function(e){if(h){h()}else if(n.checkDataLossAndContinue()){window.history.back()}return(new jQuery.Deferred).resolve().promise()}}}}})}h=e;r.sendMessageToOuterShell("sap.ushell.ui5service.ShellUIService.setBackNavigation",{callbackMessage:{service:"sap.ushell.appRuntime.handleBackNavigation"}})},_getBackNavigationCallback:function(){return h},_resetBackNavigationCallback:function(){this.setBackNavigation()}});function f(e){return new Promise(function(t){var s=c(e);var i=[];var a;i=s.map(function(e){return{target:{shellHash:e.intent}}});sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.isNavigationSupported(i,undefined,true).then(function(e){for(var i=0;i<e.length;i++){if(!e[i].supported){a=l.parseShellHash(s[i].intent);a.params["sap-shell-so"]=a.semanticObject;a.params["sap-shell-action"]=a.action;a.params["sap-remote-system"]=n.getRemoteSystemId();a.semanticObject="Shell";a.action="startIntent";s[i].intent="#"+l.constructShellHash(a)}}t(s)})})})}return v});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/UserInfo", ["sap/ushell/services/UserInfo","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/util/ObjectPath"],function(e,s,t){"use strict";function r(t,r){e.call(this,t,r);this.getThemeList=function(){return s.sendMessageToOuterShell("sap.ushell.services.UserInfo.getThemeList")};this.updateUserPreferences=function(){return s.sendMessageToOuterShell("sap.ushell.services.UserInfo.updateUserPreferences",{language:sap.ushell.Container.getUser().getLanguage()})};this.getLanguageList=function(){return s.sendMessageToOuterShell("sap.ushell.services.UserInfo.getLanguageList")};this.getShellUserInfo=function(){return s.sendMessageToOuterShell("sap.ushell.services.UserInfo.getShellUserInfo")}}t.set("sap.ushell.services.UserInfo",r);r.prototype=e.prototype;r.hasNoAdapter=e.hasNoAdapter;return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/adapters/ContainerAdapter", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/User","sap/ui/core/Configuration"],function(e,t,r,jQuery,s,o){"use strict";var i=function(i,n,a){var u,d,l,f,c,p;this.load=function(){var e;d=r.get("config.systemProperties.logoutUrl",a);l=r.get("config.systemProperties.logoutMethod",a)||"GET";f=r.get("config.systemProperties.csrfTokenUrl",a);c=r.get("config.systemProperties.sessionKeepAlive.url",a);p=r.get("config.systemProperties.sessionKeepAlive.method",a);e=t({id:""},r.get("config.userProfile.defaults",a));u=new s(e);g(e);return(new jQuery.Deferred).resolve().promise()};this.getSystem=function(){return i};this.getUser=function(){return u};this._getLogoutUrl=function(){return d};this._setWindowLocation=function(e){window.location.href=e};this.logout=function(){var t=new jQuery.Deferred,r=this;if(l==="POST"){e.info("performing logout from system via POST",undefined,"sap.ushell.appRuntime.ui5.services.adapters.ContainerAdapter::logout");jQuery.ajax({type:"HEAD",url:f,headers:{"X-CSRF-Token":"Fetch"},success:function(s,o,i){jQuery.ajax({type:"POST",url:d,headers:{"X-CSRF-Token":i.getResponseHeader("X-CSRF-Token")},success:function(e){r._setWindowLocation(e);t.resolve()},error:function(){e.error("Logging out via POST failed",undefined,"sap.ushell.appRuntime.ui5.services.adapters.ContainerAdapter::logout");t.resolve()}})},error:function(){e.error("fetching X-CSRF-Token for logout via POST failed for system: "+i.getAlias(),undefined,"sap.ushell.appRuntime.ui5.services.adapters.ContainerAdapter::logout");t.resolve()}})}else{try{if(typeof d==="string"&&d.length>0){this._logoutViaHiddenIFrame(t,d);setTimeout(t.resolve,4e3)}else{t.resolve()}}catch(r){e.error("logout from iframe "+document.URL+" failed",r,"sap.ushell.appRuntime.ui5.SessionHandlerAgent");t.resolve()}}return t.promise()};this._logoutViaHiddenIFrame=function(e,t){var r=document.createElement("iframe"),s=t.replace(/"/g,'\\"');window.addEventListener("message",function(r){if((r.data&&r.data.url)===t){e.resolve()}});r.style.visibility="hidden";r.setAttribute("src",t);function o(){this.contentWindow.parent.postMessage({url:s,request_id:"dummy-logout-id"},"*")}r.addEventListener("load",o);r.addEventListener("error",o);document.body.appendChild(r)};this.sessionKeepAlive=function(){if(typeof c==="string"&&c.length>0&&typeof p==="string"&&p.length>0){var t=new XMLHttpRequest;t.open(p,c,true);t.onreadystatechange=function(){if(this.readyState===4){e.debug("Server session was extended")}};t.send()}};function g(e){var t=o.getFormatSettings();if(e.sapDateFormat){t.setLegacyDateFormat(e.sapDateFormat)}if(e.sapDateCalendarCustomizing){t.setLegacyDateCalendarCustomizing(e.sapDateCalendarCustomizing)}if(e.sapNumberFormat){t.setLegacyNumberFormat(e.sapNumberFormat)}if(e.sapTimeFormat){t.setLegacyTimeFormat(e.sapTimeFormat)}if(typeof e.currencyFormats==="object"){t.addCustomCurrencies(e.currencyFormats)}}};return i},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/adapters/EmptyAdapter", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";var e=function(){this.getSite=function(){return(new jQuery.Deferred).resolve({}).promise()}};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/services/adapters/Ui5ComponentLoaderAdapter", [],function(){"use strict";function n(){}return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appRuntime/ui5/ui/UIProxy", ["sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer","sap/m/Button","sap/base/util/ObjectPath"],function(e,t,n){"use strict";function s(){n.set("sap.ushell.ui.shell.ShellHeadItem",function(t){var n=this;Object.keys(t).forEach(function(e){n[e]=t[e];n["get"+e[0].toUpperCase()+e.slice(1)]=function(){return t[e]}});e.createShellHeadItem(t)})}return new s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/SchedulingAgent", ["sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler","sap/ushell/bootstrap/_SchedulingAgent/EventProcessor","sap/ushell/bootstrap/_SchedulingAgent/FLPLoader","sap/ushell/bootstrap/_SchedulingAgent/logger","sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(e,t,o,n,i,a){"use strict";var s={CONTINUE_ON_EVENT:"continueOnEvent",BY_EVENT:"byEvent",BY_COMPONENT_CREATE:"byComponentCreate",BY_REQUIRE:"byRequire",WAIT_IN_MS:"waitInMs"};var d={WAIT:"wait",ERROR:"error",DONE:"done",STEP:"step",BLOCKDONE:"blockDone",SKIPPED:"skip"};var g={oComponentsLoading:{},oPathsLoading:{},_initialize:function(){i.clear();n.clearHistory();i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Initializing,"Scheduling Agent starting");var o=e.initializeSchedule();o.then(function(e){if(!e){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.FatalError,"Configuration error!");return}t.initializeStepDoneListener(this);i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Initialized,"Scheduling Agent ready");this.eventReceived()}.bind(this))},_processStepConfiguration:function(e){var t={sStepType:"",oData:{},sStepName:"",bConfigOk:false};if(e.oConfig.loadingMode===s.CONTINUE_ON_EVENT){t.sStepType=s.CONTINUE_ON_EVENT;t.sStepName=e.oContent.LoadingStep;t.oData.eventName=e.oConfig.continueOnEvent&&e.oConfig.continueOnEvent.eventName;t.oData.stepName=e.oContent.LoadingStep;t.bConfigOk=!!(t.oData.eventName&&t.oData.stepName)}else if(e.oConfig.loadingMode===s.BY_EVENT){t.sStepType=s.BY_EVENT;t.sStepName=e.oContent.LoadingStep;t.oData.eventName=e.oConfig.byEvent&&e.oConfig.byEvent.eventName;t.oData.eventData={};t.oData.eventData.data=e.oConfig.byEvent.eventData;t.oData.eventData.stepName=e.oContent.LoadingStep;t.bConfigOk=!!t.oData.eventName}else if(e.oConfig.loadingMode===s.BY_COMPONENT_CREATE){t.sStepType=s.BY_COMPONENT_CREATE;t.sStepName=e.oContent.LoadingStep;t.oData=e.oConfig.byComponentCreate&&e.oConfig.byComponentCreate.ui5ComponentOptions||{};t.bConfigOk=!!t.oData}else if(e.oConfig.loadingMode===s.BY_REQUIRE){t.sStepType=s.BY_REQUIRE;t.sStepName=e.oContent.LoadingStep;t.oData={};t.oData.sPath=e.oConfig.byRequire.path;t.oData.sStepName=e.oContent.LoadingStep;t.bConfigOk=!!t.oData.sPath}else if(e.oConfig.loadingMode===s.WAIT_IN_MS){t.sStepType=s.WAIT_IN_MS;t.sStepName=e.oContent.LoadingStep;t.oData.iWaitingTime=e.oConfig.waitInMs&&e.oConfig.waitInMs.waitingTime;t.oData.sStepName=e.oContent.LoadingStep;t.bConfigOk=!!(t.oData.iWaitingTime&&t.oData.sStepName)}return t},dumpState:function(){i.dump()},dumpHistory:function(){n.dumpHistory()},dumpSchedule:function(){e.dumpSchedule()},dumpAll:function(){n.dumpHistory();e.dumpSchedule();i.dump()},eventReceived:function(){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Working,"Agent is active");var n;do{n=e.getNextLoadingStep();if(n.sStatus===d.ERROR){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.FatalError,"Fatal loading error. Loading aborted.");t.unregisterStepDoneListener();a.emit("FLPLoadingDone");return}if(n.sStatus===d.DONE){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Done,"Loading finished");t.unregisterStepDoneListener();a.emit("FLPLoadingDone");return}if(n.sStatus===d.BLOCKDONE){}if(n.sStatus===d.SKIPPED){}if(n.sStatus===d.STEP){var g=this._processStepConfiguration(n);if(!g.bConfigOk){i.setForLoadingStep(g.sStepName,i.id.loadingStep.Abort,"","Step configuration error");i.setForLoadingStep(g.sStepName,i.id.loadingStep.Skipped,"","Step configuration error");i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.FatalError,g,"Step configuration error!")}else if(g.sStepType===s.CONTINUE_ON_EVENT){t.listenToEvent(g.oData);i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData.eventName,"continueOnEvent step sent to Event Processor")}else if(g.sStepType===s.BY_EVENT){o.loadComponentByEvent(g.oData);i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData,"byEvent step sent to FLP Loader")}else if(g.sStepType===s.WAIT_IN_MS){o.waitInMs(g.oData);i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData.iWaitingTime+"ms","WaitInMs step sent to FLP Loader")}else if(g.sStepType===s.BY_REQUIRE){var p=o.loadComponentByRequire(g.oData.sPath);this.oPathsLoading[g.sStepName]=p;i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData.sPath,"byRequire step sent to FLP Loader");var r=g.sStepName;p.then(function(){i.setForLoadingStep(r,i.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oPathsLoading[r];a.emit("StepDone",r)}.bind(this),function(){i.setForLoadingStep(r,i.id.loadingStep.FatalError,"","Step's promise failed");delete this.oPathsLoading[r];a.emit("StepFailed",r)}.bind(this))}else if(g.sStepType===s.BY_COMPONENT_CREATE){var l=o.loadComponentByComponentCreate(g);this.oComponentsLoading[g.sStepName]=l;i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData,"byComponentCreate step sent to FLP Loader");l.then(function(e){i.setForLoadingStep(e,i.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oComponentsLoading[e];a.emit("StepDone",e)}.bind(this),function(e){i.setForLoadingStep(e,i.id.loadingStep.FatalError,"","Step's promise failed");delete this.oComponentsLoading[e];a.emit("StepFailed",e)}.bind(this))}}}while(n.sStatus!==d.WAIT);i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Waiting,"Agent waits")}};return g},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/_SchedulingAgent/EventProcessor", ["sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(e,n){"use strict";var t={SchedulingAgent:{},aDoables:[],initializeStepDoneListener:function(t){this.SchedulingAgent=t;this.aDoables=[n.on("StepDone").do(function(n){e.setForLoadingStep(n,e.id.loadingStep.Done,"","Step event received");this.SchedulingAgent.eventReceived()}.bind(this)),n.on("StepFailed").do(function(n){e.setForLoadingStep(n,e.id.loadingStep.Skipped,"","Step event received");this.SchedulingAgent.eventReceived()}.bind(this))]},listenToEvent:function(t){n.once(t.eventName).do(function(){e.setForLoadingStep(t.stepName,e.id.loadingStep.Done,t.eventName,"Event received");this.SchedulingAgent.eventReceived()}.bind(this))},unregisterStepDoneListener:function(){this.aDoables.forEach(function(e){e.off()})},setTimeOut:function(){}};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/_SchedulingAgent/FLPLoader", ["sap/ushell/EventHub","sap/ui/core/Component"],function(e,n){"use strict";var t={loadComponentByEvent:function(n){e.emit(n.eventName,n.eventData)},loadComponentByComponentCreate:function(e){return n.create(e.oData).then(function(){return Promise.resolve(e.sStepName)},function(){return Promise.reject(e.sStepName)})},loadComponentByRequire:function(e){return new Promise(function(n,t){sap.ui.require([e],function(e){n(e)})})},waitInMs:function(n){setTimeout(function(){e.emit("StepDone",n.sStepName)},n.iWaitingTime)},directLoading:function(){}};return t},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler", ["sap/ushell/bootstrap/_SchedulingAgent/state","sap/base/util/LoaderExtensions","sap/base/Log","sap/ushell/Config"],function(e,o,n,i){"use strict";var t={Loaded:"loaded",Wait:"wait",Step:"step",Error:"error",BlockDone:"blockDone",Start:"start",Done:"done",Skipped:"skipped"};var d="sap/ushell/bootstrap/_SchedulingAgent/LoadingConfiguration.json";var a="sap/ushell/bootstrap/_SchedulingAgent/StepConfiguration.json";function s(){return i.last("/core/shell/model/currentState/stateName")}var r={oSchedule:{iBlockIndex:0,aBlocksLoading:[]},initializeSchedule:function(){var n=o.loadResource(a,{async:true});var i=o.loadResource(d,{async:true});var t=Promise.all([n,i]).then(function(o){var n=o[0];var i=o[1];var t=this._validateConfig(i,n);if(t){this.oSchedule.oBlocks=i.LoadingBlocks;this.oSchedule.oSteps=n;this.oSchedule.aBlockOrder=i.OrderOfLoadingBlocks;this.oSchedule.iBlockIndex=0;e.setForModule(e.id.module.flpScheduler.id,e.id.module.flpScheduler.Initialized,"Schedule validated")}else{e.setForModule(e.id.module.flpScheduler.id,e.id.module.flpScheduler.WrongConfiguration,"Configuration error")}return t}.bind(this));return t},getNextLoadingStep:function(){var o={sStatus:t.Start,oContent:{}};if(this.oSchedule.aBlocksLoading.length===0){var n=this._startLoadingBlock();if(n){o.sStatus=t.Done;return o}}var i=this.oSchedule.aBlocksLoading[this.oSchedule.aBlocksLoading.length-1];var d=this.oSchedule.aBlockOrder.indexOf(i);var a=this.oSchedule.aBlockOrder[d+1];if(this.oSchedule.oBlocks[i].bCanBeLoadedConcurrently&&a){this._startLoadingBlock()}var s=true;var r=false;var l,c,u,g,p,S,h,f,L;for(var k=0;k<this.oSchedule.aBlocksLoading.length;k++){l=this.oSchedule.aBlocksLoading[k];c=this.oSchedule.oBlocks[l];u=c.iStepIndex;g=c.LoadingSteps[u];p=u===c.LoadingSteps.length-1;S=this._checkAndUpdateAsyncQueue(c);L=e.isStepLoaded(g.LoadingStep)||e.isStepSkipped(g.LoadingStep);f=e.isStepLoading(g.LoadingStep);s=S.bAllStepsDone&&L;r=S.bAStepIsLoading||f;if(f&&!g.canBeLoadedAsync||r&&p){o.sStatus=t.Wait;continue}if(!p||!L&&!f){if(L||g.canBeLoadedAsync&&f){u+=1}o=this._prepareStepForLoading(c,l,u)}if(s&&p){h=this.oSchedule.aBlocksLoading.indexOf(l);this.oSchedule.aBlocksLoading.splice(h,1);o.sStatus=t.BlockDone;e.setForLoadingBlock(l,e.id.loadingBlock.Done,"","Block removed from loading queue")}if(o.sStatus!==t.wait){break}}return o},dumpSchedule:function(){n.debug(JSON.stringify(this.oSchedule))},_loadingIsEnabled:function(e){var o;if(Array.isArray(e.oConfig.excludedFLPStates)){if(e.oConfig.excludedFLPStates.indexOf(s())>-1){return false}}if(Array.isArray(e.oConfig.mandatoryFLPStates)&&e.oConfig.mandatoryFLPStates.length!==0){if(e.oConfig.mandatoryFLPStates.indexOf(s())===-1){return false}}function n(e){return e.path&&i.last(e.path)!==e.assertionValue}if(e.oConfig.configSwitch){o=[].concat(e.oConfig.configSwitch);if(o.some(n)){return false}}return true},_checkAndUpdateAsyncQueue:function(o){var n=[];var i,t,d;var a=true;var s=false;for(var r=0;r<o.aAsyncStepsLoading.length;r++){d=o.aAsyncStepsLoading[r];i=e.isStepLoaded(d)||e.isStepSkipped(d);t=e.isStepLoading(d);if(t){n.push(d)}a=a&&i;s=s||t}o.aAsyncStepsLoading=n;return{bAllStepsDone:a,bAStepIsLoading:s}},_startLoadingBlock:function(){var o=false;if(this.oSchedule.iBlockIndex<this.oSchedule.aBlockOrder.length){var n=this.oSchedule.aBlockOrder[this.oSchedule.iBlockIndex];this.oSchedule.aBlocksLoading.push(n);this.oSchedule.oBlocks[n].iStepIndex=0;this.oSchedule.oBlocks[n].aAsyncStepsLoading=[];this.oSchedule.iBlockIndex+=1;e.setForLoadingBlock(n,e.id.loadingBlock.Prepared,"","Block added to the loading queue.")}else{o=true}return o},_prepareStepForLoading:function(o,n,i){var d;var a={sStatus:t.Step,oContent:o.LoadingSteps[i],oConfig:this.oSchedule.oSteps[o.LoadingSteps[i].LoadingStep]};if(!this._loadingIsEnabled(a)){a.sStatus=t.Skipped;o.iStepIndex=i;e.setForLoadingStep(a.oContent.LoadingStep,e.id.loadingStep.Skipped,"","Step set to skipped");return a}var s=this._checkDependencies(a,n);if(s.bMissing){a.sStatus=t.Error}else if(s.bAllLoaded){e.setForLoadingStep(a.oContent.LoadingStep,e.id.loadingStep.Prepared,"","Step prepared for control unit");d=a.oContent.canBeLoadedAsync;o.iStepIndex=i;if(d){e.setForLoadingStep(a.oContent.LoadingStep,e.id.loadingStep.Prepared,"","Step set on the async loading queue");o.aAsyncStepsLoading.push(a.oContent.LoadingStep)}}else{a.sStatus=t.Wait;e.setForLoadingStep(a.oContent.LoadingStep,e.id.loadingStep.WaitingForDependencies,"","Step missing dependencies")}return a},_checkDependencies:function(o,n){var i={bAllLoaded:true,bMissing:false};if(o.oConfig.Dependencies){for(var t=0;t<o.oConfig.Dependencies.length;t++){i.bAllLoaded=i.bAllLoaded&&e.isStepLoaded(o.oConfig.Dependencies[t]);if(!e.isStepLoaded(o.oConfig.Dependencies[t])&&!e.isStepLoading(o.oConfig.Dependencies[t])){e.setForLoadingStep(o.oContent.LoadingStep,e.id.loadingStep.Aborted,o.oConfig.Dependencies[t],"Missing a dependency");e.setForLoadingBlock(n,e.id.loadingBlock.Aborted,o.oConfig.Dependencies[t],"A step is missing a dependency");e.setForModule(e.id.module.flpScheduler.id,e.id.module.flpScheduler.LoadingAborted,"Dependencies can not be resolved: a dependency isn't loading before it is required.");i.bMissing=true;i.bAllLoaded=false;break}}}return i},_validateConfig:function(e,o){var n=e&&e.OrderOfLoadingBlocks&&e.LoadingBlocks&&e.OrderOfLoadingBlocks.length&&o;if(!n){return false}var i=e.OrderOfLoadingBlocks.reduce(function(n,i){n=n&&e.LoadingBlocks[i];if(n){var t=e.LoadingBlocks[i];var d=true;if(t.LoadingSteps){var a;for(var s=0;s<t.LoadingSteps.length;s++){a=t.LoadingSteps[s].LoadingStep;d=d&&o[a]}}n=n&&d}return!!n},true);return i}};return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/_SchedulingAgent/logger", ["sap/base/Log"],function(t){"use strict";var r=[];var n=true;var e="FLPScheduler";return{getHistory:function(){return r},verboseOn:function(){n=true;return n===true},verboseOff:function(){n=false;return n===false},isVerboseOn:function(){return n===true},clearHistory:function(){r.length=0},dumpHistory:function(t){var n;if(t){n=r.filter(function(r){return r.id===t});console.table(n)}else{console.table(r)}return n||r},logError:function(n){t.error(this.stateToString(n),undefined,e);r.push(n);return true},logWarning:function(u){if(n){t.warning(this.stateToString(u),e);r.push(u)}return n},logStatus:function(u){if(n){t.info(this.stateToString(u),e);r.push(u)}return n},stateToString:function(t){return"FLP Bootstrap Scheduling Agent :: "+t.type+" '"+t.id+"' /"+t.status+(t.remark?"/ : "+t.remark:"/")}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/_SchedulingAgent/state", ["sap/ushell/bootstrap/_SchedulingAgent/logger","sap/base/util/now","sap/base/util/deepClone"],function(e,t,o){"use strict";var i={module:{schedulingAgent:{id:"schedulingAgent",FatalError:"FATAL_ERROR",Idle:"IDLE",Initialized:"INITIALIZED",Initializing:"INITIALIZING",Waiting:"WAITING",WokeUp:"WOKE_UP",Working:"WORKING"},state:{id:"state",FatalError:"FATAL_ERROR",Available:"AVAILABLE"},flpScheduler:{id:"flpScheduler",Initialized:"INITIALIZED",WrongConfiguration:"WRONG_CONFIGURATION",LoadingAborted:"LOADING_ABORTED"},flpLoader:{id:"flpLoader"},logger:{id:e,Block:"BLOCK",Step:"STEP",Module:"MODULE"}},loadingStep:{Prepared:"STEP_PREPARED",WaitingForDependencies:"STEP_WAITING_FOR_DEPENDENCIES",InProgress:"STEP_IN_PROGRESS",Done:"STEP_DONE",Aborted:"STEP_ABORTED",Skipped:"STEP_SKIPPED"},loadingBlock:{Prepared:"BLOCK_PREPARED",WaitingForDependencies:"BLOCK_WAITING_FOR_DEPENDENCIES",InProgress:"BLOCK_IN_PROGRESS",TimedOut:"BLOCK_TIMEDOUT",Done:"BLOCK_DONE",Aborted:"BLOCK_ABORTED"}};var n={id:i,oState:{ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}},clear:function(){this.oState={ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}}},getIdBase:function(){return i},setForLoadingBlock:function(o,n,a,r,d){this.oState.ofLoadingBlock[o]={time:t(),status:n,parameter:a,remark:r,byModule:d};e.logStatus({time:this.oState.ofLoadingBlock[o].time,type:i.module.logger.Block,id:o,status:n,parameter:a,remark:r,byModule:d})},getForLoadingBlock:function(e){return this.oState.ofLoadingBlock[e]},setForLoadingStep:function(o,n,a,r,d){this.oState.ofLoadingStep[o]={time:t(),status:n,parameter:a,remark:r,byModule:d};e.logStatus({time:this.oState.ofLoadingStep[o].time,type:i.module.logger.Step,id:o,status:n,parameter:a,remark:r,byModule:d})},getForLoadingStep:function(e){return this.oState.ofLoadingStep[e]},setForModule:function(o,n,a){this.oState.ofModule[o]={time:t(),status:n,remark:a,byModule:undefined};e.logStatus({time:this.oState.ofModule[o].time,type:i.module.logger.Module,id:o,status:n,parameter:undefined,remark:a,byModule:undefined})},getForModule:function(e){return this.oState.ofModule[e]},isBlockWaitingForDependencies:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===i.loadingBlock.WaitingForDependencies)},isBlockLoading:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===i.loadingBlock.InProgress)},isBlockLoaded:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===i.loadingBlock.Done)},isBlockLoadingAborted:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===i.loadingBlock.Aborted)},hasBlockLoadingTimedOut:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===i.loadingBlock.TimedOut)},isStepWaitingForDependencies:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===i.loadingStep.WaitingForDependencies)},isStepLoading:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===i.loadingStep.InProgress)},isStepLoaded:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===i.loadingStep.Done)},isStepLoadingAborted:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===i.loadingStep.Sborted)},isStepSkipped:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===i.loadingStep.Skipped)},isAgentIdle:function(){var e=this.getForModule(i.module.schedulingAgent.id);return!!(e&&e.status===i.module.schedulingAgent.Idle)},isAgentWaiting:function(){var e=this.getForModule(i.module.schedulingAgent.id);return!!(e&&e.status===i.module.schedulingAgent.Waiting)},agentWokeUp:function(){var e=this.getForModule(i.module.schedulingAgent.id);return!!(e&&e.status===i.module.schedulingAgent.WokeUp)},dump:function(){console.log(JSON.parse(JSON.stringify(this.oState)));var e=o(this.oState);return e},iStartingTime:t()};n.setForModule(i.module.state.id,i.module.state.Available);return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/cdm/cdm-def-dev", ["./cdm.constants","../common/common.configure.ui5","../common/common.configure.ushell","../common/common.override.registermodulepath","../common/common.configure.ui5.extractLibs","../common/common.load.bootstrapExtension"],function(o,m,n,e,c,r){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!")}var i=n({defaultUshellConfig:o.defaultConfig});m({ushellConfig:i,libs:c(i),platform:"cdm"});e();r(i)});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/cdm/cdm-def", ["./cdm.constants","../common/common.configure.ui5","../common/common.configure.ushell","../common/common.override.registermodulepath","../common/common.load.core-min","../common/common.configure.ui5.extractLibs","../common/common.load.bootstrapExtension","./cdm.boot.task"],function(o,m,n,c,e,r,a,i){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!")}var t=n({defaultUshellConfig:o.defaultConfig});m({ushellConfig:t,libs:r(t),platform:"cdm",bootTask:i});c();a(t);e.load(t.ushell.customPreload)});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/cdm/cdm.boot.task", ["../common/common.constants","../common/common.configure.ui5language","../common/common.configure.ui5theme","../common/common.configure.ui5datetimeformat"],function(o,n,m,c){"use strict";function e(e){var i=window[o.ushellConfigNamespace];n(i);m(i);c(i);e()}return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/cdm/cdm.constants", ["../common/common.util"],function(e){"use strict";return e.deepFreeze({defaultConfig:{defaultRenderer:"fiori2",ushell:{home:{tilesWrappingType:"Hyphenated"},customPreload:{enabled:true,coreResources:["sap/ushell/bootstrap/core-min-0.js","sap/ushell/bootstrap/core-min-1.js","sap/ushell/bootstrap/core-min-2.js","sap/ushell/bootstrap/core-min-3.js"],coreResourcesComplement:["sap/ushell/preload-bundles/core-ext-light-0.js","sap/ushell/preload-bundles/core-ext-light-1.js","sap/ushell/preload-bundles/core-ext-light-2.js","sap/ushell/preload-bundles/core-ext-light-3.js"]}},renderers:{fiori2:{componentData:{config:{sessionTimeoutReminderInMinutes:5,sessionTimeoutIntervalInMinutes:-1,sessionTimeoutTileStopRefreshIntervalInMinutes:15,enableAutomaticSignout:true,enableHideGroups:true,enablePersonalization:true,enableAbout:true,enableTagFiltering:false,enableSearch:false,searchBusinessObjects:false,enableSetTheme:true,enableAccessibility:true,enableHelp:false,enableUserDefaultParameters:true,enableRecentActivity:true,enableRecentActivityLogging:true,preloadLibrariesForRootIntent:false,applications:{"Shell-home":{enableEasyAccess:false,enableTileActionsIcon:false,enableHideGroups:false}},rootIntent:"Shell-home"}}}},services:{Container:{adapter:{config:{userProfile:{metadata:{ranges:{theme:{sap_fiori_3:{displayName:"SAP Quartz Light",themeRoot:""},sap_fiori_3_dark:{displayName:"SAP Quartz Dark",themeRoot:""},sap_fiori_3_hcb:{displayName:"SAP Quartz HCB",themeRoot:""},sap_fiori_3_hcw:{displayName:"SAP Quartz HCW",themeRoot:""}}}},defaults:{theme:"sap_belize"}}}}},Personalization:{adapter:{module:"sap.ushell.adapters.local.PersonalizationAdapter"}},AppState:{adapter:{module:"sap.ushell.adapters.local.AppStateAdapter"},config:{transient:true}},NavTargetResolution:{config:{allowTestUrlComponentConfig:false,enableClientSideTargetResolution:true},adapter:{module:"sap.ushell.adapters.local.NavTargetResolutionAdapter"}},SupportTicket:{config:{enabled:false},adapter:{module:"sap.ushell.adapters.local.SupportTicketAdapter"}},UserInfo:{adapter:{module:"sap.ushell.adapters.local.UserInfoAdapter"}},UserDefaultParameterPersistence:{adapter:{module:"sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter"}},NavigationDataProvider:{adapter:{module:"sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter"}},VisualizationDataProvider:{adapter:{module:"sap.ushell.adapters.cdm.v3.LaunchPageAdapter"}}},ui5:{libs:{"sap.ui.core":true,"sap.m":true,"sap.ushell":true}}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.boot.path", [],function(){"use strict";return sap.ui.require.toUrl("")});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.boot.script", ["./common.constants"],function(t){"use strict";var e=document.getElementById(t.bootScriptId);if(!e){e=document.getElementById(t.bwcBootScriptId)}return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.boot.task", ["../common/common.constants","../common/common.configure.ui5language","../common/common.configure.ui5theme","../common/common.configure.ui5datetimeformat"],function(o,n,m,c){"use strict";function e(e){var i=window[o.ushellConfigNamespace];n(i);m(i);c(i);e()}return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.configure.ui5.extractLibs", ["sap/base/Log","sap/base/util/isPlainObject"],function(i,u){"use strict";return function e(t){if(!t||!t.ui5||!t.ui5.libs){return[]}if(!u(t.ui5.libs)){i.error("Invalid ushell configuration: /ui5/libs must be an object");return[]}return Object.keys(t.ui5.libs).filter(function(i){return this[i]},t.ui5.libs)}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.configure.ui5", ["sap/base/Log","./common.load.launchpad","./common.read.ui5theme.from.config"],function(e,i,o){"use strict";function a(a){if(!a||!a.libs||!Array.isArray(a.libs)){e.error("Mandatory settings object not provided",null,"sap/ushell/bootstap/common/common.configure.ui5");return{}}var n=window["sap-ui-config"]||(window["sap-ui-config"]={});var t=a&&a.platform;var r=a&&a.platformAdapters;var l=a.ushellConfig;var s=a.theme?a.theme:o(l).theme;if(l&&l.modulePaths){var u=Object.keys(l.modulePaths).reduce(function(e,i){e[i.replace(/\./g,"/")]=l.modulePaths[i];return e},{});sap.ui.loader.config({paths:u})}var c=n.oninit;n.oninit=function(){if(typeof c==="string"){var o=/^module:((?:[_$.\-a-zA-Z0-9]+\/)*[_$.\-a-zA-Z0-9]+)$/.exec(c);if(o&&o[1]){sap.ui.require([o[1]])}else{e.error("Given onInit module ("+c+") cannot be loaded.")}}sap.ui.require(["sap/ushell/Container"],function(){window.sap.ushell.bootstrap(t,r).then(function(){(a.onInitCallback||i)()})})};n.preload="async";n.compatversion="edge";n.libs=a.libs.join();n.theme=s;n["xx-boottask"]=a.bootTask;if(l&&l.ushell&&l.ushell.verticalization&&l.ushell.verticalization.activeTerminologies&&l.ushell.verticalization.activeTerminologies.length>0){n.activeterminologies=l.ushell.verticalization.activeTerminologies}return n}return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.configure.ui5datetimeformat", ["sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/Configuration"],function(t,e,a){"use strict";return r;function r(r){var o=e.get("services.Container.adapter.config.userProfile.defaults",r);var s="Date Format is incorrectly set for the User";var i="Time Format is incorrectly set for the User";try{var c=o&&o.sapDateFormat;a.getFormatSettings().setLegacyDateFormat(c)}catch(e){t.error(s,e.stack,"sap/ushell/bootstrap/common/common.configure.ui5datetimeformat")}try{var m=o&&o.sapTimeFormat;a.getFormatSettings().setLegacyTimeFormat(m)}catch(e){t.error(i,e.stack,"sap/ushell/bootstrap/common/common.configure.ui5datetimeformat")}}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.configure.ui5language", ["sap/base/util/ObjectPath","sap/ui/core/Configuration"],function(a,e){"use strict";function i(i){var n=a.get("services.Container.adapter.config.userProfile.defaults",i);var t=n&&n.languageBcp47;var r=n&&n.language;if(t){e.setLanguage(t,r)}}return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.configure.ui5theme", ["./common.read.ui5theme.from.config","sap/base/util/ObjectPath","sap/base/Log"],function(e,t,r){"use strict";function o(e){var r=t.get("services.Container.adapter.config.userProfile.metadata.ranges.theme",e);if(!r){return}t.create("services.UserInfo.adapter.config.themes",e);e.services.UserInfo.adapter.config.themes=Object.keys(r).map(function(e){return{id:e,name:r[e].displayName,root:r[e].themeRoot}})}function a(a){var i=t.get("services.Container.adapter.config",a),n=e(a);o(a);if(n.theme){i.userProfile.defaults.bootTheme=n}else{var s=t.get("userProfile.defaults.theme",i),f=t.get("userProfilePersonalization.theme",i);r.error("No valid boot theme could be determined: personalizedTheme = '"+f+"' default theme = '"+s+"'",null,"common.configure.ui5theme")}}return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.configure.ushell", ["./common.constants","./common.debug.mode","./common.read.metatags","./common.util","./common.read.ushell.config.from.url","sap/base/util/ObjectPath","sap/base/Log","sap/base/util/extend"],function(e,a,n,i,o,s,t,r){"use strict";function f(e,a){var n;if(!e||!a){return}n=s.get(a,e);if(n&&n.items){r(n,n.items);delete n.items;delete n.__metadata}}function l(a,n,s,r){var f=e.ushellConfigNamespace,l=a,u,c;r=r||[];if(!window[f]){window[f]={}}u=window[f];if(n){l=[n].concat(a)}l.forEach(function(e){i.mergeConfig(u,e,true)});r.forEach(function(e){i.mergeConfig(u,e,true)});c=o.getConfig();if(c){i.mergeConfig(u,c,true)}u["sap-ui-debug"]=s;t.info("finally applied sap-ushell-config",JSON.stringify(u),"sap/ushell/bootstrap/common/common.boot.script")}function u(e){var a=s.get("ushell.spaces.configurable",e);if(a){var n=s.get("services.Container.adapter.config.userProfilePersonalization.spacesEnabled",e);if(n===true){s.set("ushell.spaces.enabled",true,e)}else if(n===false){s.set("ushell.spaces.enabled",false,e)}}}function c(i){var o;var s=i&&i.defaultUshellConfig;var t=n.readMetaTags(e.configMetaPrefix);l(t,s,a.isDebug(),null);o=window[e.ushellConfigNamespace];f(o,"services.Container.adapter.config.userProfilePersonalization");u(o);return o}return c});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.constants", [],function(){"use strict";return{uiDebugKey:"sap-ui-debug",bootScriptId:"sap-ui-bootstrap",bwcBootScriptId:"sap-ushell-bootstrap",configMetaPrefix:"sap.ushellConfig",ushellConfigNamespace:"sap-ushell-config"}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.create.configcontract.core", ["sap/ushell/bootstrap/common/common.debug.mode"],function(e){"use strict";var n={};function a(a){var o={};function r(e,n){var o=n.split("/");var r=o.slice(0,o.length-1).join("/");var i=o.pop();if(e.hasOwnProperty(r)){return e[r][i]}var s=o.reduce(function(e,n){if(!e||!e.hasOwnProperty(n)){return{}}return e[n]},a);e[r]=s;return s[i]}function i(e,a){var i=r(o,e);n[e]=a;return i!==undefined?i:a}function s(){var e="renderers/fiori2/componentData/config/enableBackGroundShapes";var a=!!r(o,e);if(a){a=!i("ushell/spaces/enabled",false)}n[e]=a;return a}function l(){return i("renderers/fiori2/componentData/config/enablePersonalization",i("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true))}function t(){var e=i("renderers/fiori2/componentData/config/rootIntent","");if(e){e="#"+e}return e}var c=i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",true);var p={enableEasyAccessOnTablet:i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenuOnTablet",false),enableEasyAccessSAPMenu:i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenu",c),enableEasyAccessSAPMenuSearch:i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenuSearch",true),enableEasyAccessUserMenu:i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenu",c),enableEasyAccessUserMenuSearch:i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenuSearch",true)};function u(e){if(c===true){return p[e]?p[e+"Search"]:false}return false}var f={core:{site:{siteId:i("ushell/site/siteId",null)},extension:{enableHelp:i("renderers/fiori2/componentData/config/enableHelp",false),SupportTicket:i("services/SupportTicket/config/enabled",false),enableTileColors:i("ushell/extension/enableTileColors",false)},services:{allMyApps:{enabled:i("services/AllMyApps/config/enabled",true),showHomePageApps:i("services/AllMyApps/config/showHomePageApps",true),showCatalogApps:i("services/AllMyApps/config/showCatalogApps",true)}},navigation:{enableInPlaceForClassicUIs:{GUI:i("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/GUI",false),WDA:i("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WDA",false),WCF:i("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WCF",true)},enableWebguiLocalResolution:true,enableWdaLocalResolution:true,flpURLDetectionPattern:i("services/ClientSideTargetResolution/config/flpURLDetectionPattern","[/]FioriLaunchpad.html[^#]+#[^-]+?-[^-]+"),enableWdaCompatibilityMode:i("ushell/navigation/wdaCompatibilityMode",false)},spaces:{enabled:i("ushell/spaces/enabled",false),configurable:i("ushell/spaces/configurable",false),myHome:{userEnabled:true,enabled:i("startupConfig/spacesMyhome",false),myHomeSpaceId:i("startupConfig/spacesMyhomeSpaceid",null),myHomePageId:i("startupConfig/spacesMyhomePageid",null),presetSectionId:"3WO90XZ1DX1AS32M7ZM9NBXEF"},hideEmptySpaces:{enabled:i("ushell/spaces/enabled",false)&&i("ushell/spaces/hideEmptySpaces/enabled",false),userEnabled:true},extendedChangeDetection:{enabled:i("ushell/spaces/extendedChangeDetection/enabled",true)},homeNavigationTarget:i("renderers/fiori2/componentData/config/homeNavigationTarget",undefined)},workPages:{enabled:i("ushell/spaces/enabled",false)&&i("ushell/workPages/enabled",false),contentApiUrl:i("ushell/workPages/contentApiUrl","/cep/graphql"),navigationApiUrl:i("ushell/workPages/navigationApiUrl","/navigation/api/v2"),myHome:{pageId:i("ushell/spaces/myHome/myHomePageId",null)}},homeApp:{enabled:i("ushell/spaces/enabled",false)&&!!i("ushell/homeApp/component",false),component:i("ushell/homeApp/component",{})},menu:{enabled:i("ushell/spaces/enabled",false)&&i("ushell/menu/enabled")!==false||i("ushell/menu/enabled",false),personalization:{enabled:i("ushell/menu/personalization/enabled",false)},visibleInAllStates:i("ushell/menu/visibleInAllStates",false)},darkMode:{enabled:i("ushell/darkMode/enabled",false),supportedThemes:i("ushell/darkMode/supportedThemes",[{dark:"sap_fiori_3_dark",light:"sap_fiori_3"},{dark:"sap_fiori_3_hcb",light:"sap_fiori_3_hcw"},{dark:"sap_horizon_dark",light:"sap_horizon"},{dark:"sap_horizon_hcb",light:"sap_horizon_hcw"}])},contentProviders:{providerInfo:{enabled:i("ushell/contentProviders/providerInfo/enabled",false),userConfigurable:i("ushell/contentProviders/providerInfo/enabled",false)&&i("ushell/contentProviders/providerInfo/userConfigurable",false),showContentProviderInfoOnVisualizations:i("ushell/contentProviders/providerInfo/enabled",false)&&i("ushell/contentProviders/providerInfo/userConfigurable",false)}},productSwitch:{enabled:!!i("ushell/productSwitch/url",""),url:i("ushell/productSwitch/url","")},shellHeader:{application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:i("renderers/fiori2/componentData/config/rootIntent",""),homeUri:t(),title:""},themePreview:{sapHorizonEnabled:i("renderers/fiori2/componentData/config/sapHorizonEnabled",false)},companyLogo:{accessibleText:i("ushell/companyLogo/accessibleText","")},userPreferences:{dialogTitle:"Settings",isDetailedEntryMode:false,activeEntryPath:null,entries:[],profiling:[]},shell:{cacheConfiguration:i("renderers/fiori2/componentData/config/cacheConfiguration",{}),enableAbout:i("renderers/fiori2/componentData/config/enableAbout",true),enablePersonalization:l(),enableRecentActivity:i("renderers/fiori2/componentData/config/enableRecentActivity",true),enableRecentActivityLogging:i("renderers/fiori2/componentData/config/enableRecentActivityLogging",true),enableFiori3:true,sessionTimeoutIntervalInMinutes:i("renderers/fiori2/componentData/config/sessionTimeoutIntervalInMinutes",-1),enableFeaturePolicyInIframes:i("renderers/fiori2/componentData/config/enableFeaturePolicyInIframes",true),favIcon:i("renderers/fiori2/componentData/config/favIcon",undefined),model:{enableSAPCopilotWindowDocking:undefined,enableBackGroundShapes:s(),personalization:undefined,contentDensity:undefined,setTheme:undefined,userDefaultParameters:undefined,disableHomeAppCache:undefined,enableHelp:undefined,enableTrackingActivity:undefined,searchAvailable:false,searchFiltering:true,searchTerm:"",isPhoneWidth:false,enableNotifications:i("services/Notifications/config/enabled",false),enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",migrationConfig:undefined,allMyAppsMasterLevel:undefined,userStatus:undefined,userStatusUserEnabled:true,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},userImage:{personPlaceHolder:null,account:"sap-icon://account"},currentState:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:false,showRecentActivity:true,search:"",paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},currentSpaceAndPage:undefined}},home:{disableSortedLockedGroups:i("renderers/fiori2/componentData/config/applications/Shell-home/disableSortedLockedGroups",false),draggedTileLinkPersonalizationSupported:true,editTitle:false,enableHomePageSettings:i("renderers/fiori2/componentData/config/applications/Shell-home/enableHomePageSettings",true),enableRenameLockedGroup:i("renderers/fiori2/componentData/config/applications/Shell-home/enableRenameLockedGroup",false),enableTileActionsIcon:i("renderers/fiori2/componentData/config/enableTileActionsIcon",i("renderers/fiori2/componentData/config/applications/Shell-home/enableTileActionsIcon",false)),enableTransientMode:i("ushell/home/enableTransientMode",false),featuredGroup:{enable:i("ushell/home/featuredGroup/enable",false),frequentCard:i("ushell/home/featuredGroup/frequentCard",true)&&i("ushell/home/featuredGroup/enable",false),recentCard:i("ushell/home/featuredGroup/recentCard",true)&&i("ushell/home/featuredGroup/enable",false)},homePageGroupDisplay:i("renderers/fiori2/componentData/config/applications/Shell-home/homePageGroupDisplay","scroll"),isInDrag:false,optimizeTileLoadingThreshold:i("renderers/fiori2/componentData/config/applications/Shell-home/optimizeTileLoadingThreshold",100),sizeBehavior:i("renderers/fiori2/componentData/config/sizeBehavior","Responsive"),sizeBehaviorConfigurable:i("renderers/fiori2/componentData/config/sizeBehaviorConfigurable",false),wrappingType:i("ushell/home/tilesWrappingType","Normal"),segments:i("renderers/fiori2/componentData/config/applications/Shell-home/segments",undefined),tileActionModeActive:false},catalog:{enabled:l()||i("renderers/fiori2/componentData/config/enableAppFinder",false),appFinderDisplayMode:i("renderers/fiori2/componentData/config/applications/Shell-home/appFinderDisplayMode",undefined),easyAccessNumbersOfLevels:i("renderers/fiori2/componentData/config/applications/Shell-home/easyAccessNumbersOfLevels",undefined),enableCatalogSearch:i("renderers/fiori2/componentData/config/enableSearchFiltering",i("renderers/fiori2/componentData/config/applications/Shell-home/enableSearchFiltering",i("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSearch",true))),enableCatalogSelection:i("renderers/fiori2/componentData/config/enableCatalogSelection",i("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSelection",true)),enableCatalogTagFilter:i("renderers/fiori2/componentData/config/applications/Shell-home/enableTagFiltering",i("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogTagFilter",true)),enableEasyAccess:c,enableEasyAccessSAPMenu:c?p.enableEasyAccessSAPMenu:false,enableEasyAccessOnTablet:c?p.enableEasyAccessOnTablet:false,enableEasyAccessSAPMenuSearch:u("enableEasyAccessSAPMenu"),enableEasyAccessUserMenu:c?p.enableEasyAccessUserMenu:false,enableEasyAccessUserMenuSearch:u("enableEasyAccessUserMenu"),enableHideGroups:i("renderers/fiori2/componentData/config/enableHideGroups",i("renderers/fiori2/componentData/config/applications/Shell-home/enableHideGroups",true)),sapMenuServiceUrl:undefined,userMenuServiceUrl:i("renderers/fiori2/componentData/config/applications/Shell-home/userMenuServiceUrl",undefined)},esearch:{defaultSearchScopeApps:i("renderers/fiori2/componentData/config/esearch/defaultSearchScopeApps",false),searchBusinessObjects:i("renderers/fiori2/componentData/config/esearch/searchBusinessObjects",true),searchScopeWithoutAll:i("renderers/fiori2/componentData/config/esearch/searchScopeWithoutAll",false)},stableIDs:{enabled:i("ushell/stableIDs/enabled",true),migratePersonalization:i("ushell/stableIDs/migratePersonalization",true)},customPreload:{enabled:!e.isDebug()&&i("ushell/customPreload/enabled",false),coreResourcesComplement:i("ushell/customPreload/coreResourcesComplement",[])},ui5:{timeZoneFromServerInUI5:i("ui5/timeZoneFromServerInUI5",false)}}};return f}function o(){return n}return{createConfigContract:a,getDefaultConfiguration:o}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.debug.mode", ["./common.constants"],function(t){"use strict";var e;var n=/[?&]sap-ui-debug=(true|x|X)(&|$)/.test(window.location.search);if(!n){try{e=window.localStorage.getItem(t.uiDebugKey);n=!!e&&/^(true|x|X)$/.test(e)}catch(t){}}return{isDebug:function(){return n}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.load.bootstrapExtension", ["sap/base/util/ObjectPath"],function(t){"use strict";function e(e){var i=t.get("bootstrap.extensionModule",e);if(!i||typeof i!=="string"){return}i=i.replace(/\./g,"/");sap.ui.require([i],function(t){if(t&&typeof t==="function"){t()}})}return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.load.core-min", ["./common.debug.mode","./common.load.script"],function(o,e){"use strict";var r={};r.load=function(r){var i;if(typeof r!=="object"){throw new Error("Mandatory preload bundle configuration is not provided")}if(o.isDebug()){sap.ui.require(["sap/ui/core/Core"],function(o){o.boot()})}if(r.enabled===false){throw new Error("Disabling the custom preload bundles is not yet supported")}i=r&&r.coreResources||[];i.forEach(function(o){e.loadScript(sap.ui.require.toUrl(o))})};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.load.launchpad", [],function(){"use strict";return n;function n(n){sap.ui.require(["sap/ushell/iconfonts","sap/ushell/services/AppConfiguration"],function(e,i){window.sap.ushell.Container.createRenderer(null,true).then(function(e){e.placeAt(n||"canvas","only")});e.registerFiori2IconFont()})}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.load.model", ["sap/base/util/extend","sap/ui/core/Configuration","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/Config"],function(e,n,i,t,s){"use strict";var o;function a(){var a=s.last("/core");var l={groups:[],rtl:n.getRTL(),personalization:a.shell.enablePersonalization,tagList:[],selectedTags:[],userPreferences:{entries:[]},enableHelp:a.extension.enableHelp,enableTileActionsIcon:i.system.desktop?a.home.enableTileActionsIcon:false};l=e({},a.catalog,a.home,l);o=new t(l);o.setSizeLimit(1e4)}function l(e){o.setProperty("/isPhoneWidth",!e.matches)}function r(){var e=window.matchMedia("(min-width: 800px)");if(e.addListener){e.addListener(l);l(e)}}return{getModel:function(){if(!o){a();r()}return o},_resetModel:function(){if(o!=undefined){o.destroy();o=undefined}}}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.load.script", [],function(){"use strict";function e(e,t,r,n){return new Promise(function(i,d){function o(e){e.target.removeEventListener("load",o);e.target.removeEventListener("error",o);if(e.type==="error"){d()}i()}var a=document.createElement("script");a.src=e;a.async=!!n;a.addEventListener("load",o);a.addEventListener("error",o);if(t){a.id=t}if(r){a.setAttribute("defer","")}document.head.appendChild(a)})}return{loadScript:e}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.load.ui5theme", ["sap/ushell/bootstrap/common/common.boot.path","sap/base/Log","sap/ui/core/Core","sap/ui/core/Configuration","sap/ui/dom/includeStylesheet"],function(e,o,t,r,i){"use strict";function n(r){if(!r||!r.theme){o.error("No boot theme could be applied",null,"common.load.ui5theme");return}var i=window["sap-ui-config"]||{},n=a(r.root),s=r.theme,m=i.theme!==s;u(s,n||e+"/");if(n||m){var p=[s,n].filter(function(e){return e});t.applyTheme.apply(t,p)}o.debug("Boot theme applied: theme = '"+r.theme+"' theme root = '"+r.root+"'",null,"common.load.ui5theme")}function a(e){if(e){return e+"/UI5/"}return undefined}function u(e,o){var t=r.getLanguage(),n=o+"sap/fiori/themes/"+e,a=s(t),u=a?"library-RTL.css":"library.css";i(n+"/"+u,"sap-ui-theme-sap.fiori")}function s(e){var o=["ar","fa","he","iw"];e=e.toLowerCase().substring(0,2);return o.indexOf(e)>=0}return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.override.registermodulepath", ["jquery.sap.global","sap/ui/thirdparty/URI"],function(jQuery,t){"use strict";function e(){(function(){var t=jQuery.sap.registerModulePath;jQuery.sap.registerModulePath=function(e,n){if(typeof n==="object"){n.url=r(n.url)}else if(typeof n==="string"){n=r(n)}t(e,n)}})()}function r(e){var r,n,i,u;if(typeof e!=="string"||e===""||f(e)){return e}function f(e){var r=new t(e),n=r.path();if(r.is("absolute")){return false}if(n&&n.charAt(0)==="/"){return false}return true}r=e.match(/(.*)(\/~[\w-]+~[A-Z0-9]?)(.*)/);if(r){n=r[1];i=r[2];u=r[3]}function a(e){return new t(e).normalizePathname().toString()}function o(e){var r=new t(e).segment(),n,i=0;for(n=0;n<r.length&&i>=0;n+=1){if(r[n]===".."){i=i-1}else{i=i+1}}return i<0}if(i){if(u&&o(u)){e=n+u}}return a(e)}return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.read.metatags", ["sap/base/Log"],function(a){"use strict";function e(e,r){var t="meta[name^='"+e+"']:not([name=''])";var o=document.querySelectorAll(t);var n="sap/ushell/bootstrap/common/common.read.metatags";var s=[];r=r||JSON.parse;Array.prototype.forEach.call(o,function(e){try{s.push(r(e.content))}catch(e){a.error(e.message,e.stack,n)}});return s}return{readMetaTags:e}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.read.ui5theme.from.config", ["sap/base/util/ObjectPath"],function(e){"use strict";return r;function t(t){var r=e.get("services.Container.adapter.config",t);return{sDefaultTheme:e.get("userProfile.defaults.theme",r),sPersonalizedTheme:e.get("userProfilePersonalization.theme",r),oRangeTheme:e.get("userProfile.metadata.ranges.theme",r)}}function r(e){var r=t(e),a=r.sPersonalizedTheme,o=r.oRangeTheme,n=r.sDefaultTheme;if(r.oRangeTheme){if(Object.keys(o).indexOf(a)>-1){var i=o[a]||{};return{theme:a,root:i.themeRoot}}var s=o[n]||{};return{theme:n,root:s.themeRoot}}var u=a||n;return{theme:u,root:""}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.read.ushell.config.from.url", ["sap/base/Log","sap/base/util/ObjectPath"],function(e,r){"use strict";var n={"renderers/fiori2/componentData/config/enablePersonalization":[true],"renderers/fiori2/componentData/config/sessionTimeoutReminderInMinutes":[],"renderers/fiori2/componentData/config/sessionTimeoutIntervalInMinutes":[],"renderers/fiori2/componentData/config/sessionTimeoutTileStopRefreshIntervalInMinutes":[],"renderers/fiori2/componentData/config/enableAutomaticSignout":[false],"services/Container/adapter/config/id":[],"services/Container/adapter/config/firstName":[],"services/Container/adapter/config/lastName":[],"services/Container/adapter/config/fullName":[],"services/Container/adapter/config/userProfile/defaults/id":[],"services/Container/adapter/config/userProfile/defaults/firstName":[],"services/Container/adapter/config/userProfile/defaults/lastName":[],"services/Container/adapter/config/userProfile/defaults/fullName":[],"services/NavTargetResolution/config/usageRecorder/serviceUrl":[]};function a(e,r){var n="";if(r.namespace){n=r.namespace+"/"}n+=r.propertyName;var a=e[n];if(!a){return false}if(Array.isArray(a)){if(a.length===0){return true}for(var i=0;i<a.length;i++){if(a[i]===r.value){return true}}return false}throw new Error('Block list entry "'+n+'" has an unknown type')}function i(e){var r;if(e==="false"){return false}if(e==="true"){return true}r=Number.parseFloat(e);if(!Number.isNaN(r)){return r}return e}function t(t){var o;var s={};var f=t.search.replaceAll("+"," ");o=/[?&]sap-ushell-xx-overwrite-config=([^&]*)(&|$)/.exec(f);if(o===null){return{}}var u=decodeURIComponent(o[1]).split(",");var c=u.reduce(function(r,t){var o=t.split(":");var s=/^\/?(.*)\/([^/]*)$/.exec(o[0]);if(s===null){e.warning('Ignoring invalid parameter for "sap-ushell-xx-overwrite-config": "'+o[0]+'"');return r}var f={namespace:s[1],propertyName:s[2],value:i(o[1])};if(a(n,f)){e.warning('Ignoring restricted parameter for "sap-ushell-xx-overwrite-config": "'+o[0]+'"');return r}r.push(f);return r},[]);c.forEach(function(e){var n=e.value;var a=e.namespace.replace(/\//g,".");var i=r.get(a,s);if(i===undefined){r.set(a,{},s);i=r.get(a,s)}i[e.propertyName]=n});return s}return{getConfig:t.bind(null,window.location),_getConfigFromWindowLocation:t,_isBlockListed:a}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.util", ["sap/base/Log"],function(t){"use strict";function e(t){Object.keys(t).filter(function(e){return typeof t[e]==="object"}).forEach(function(n){t[n]=e(t[n])});return Object.freeze(t)}function n(){return location.protocol+"//"+location.host}function i(t){if(typeof t==="string"&&t.charAt(t.length-1)!=="/"){return t+"/"}return t}function r(t,e,n){var i;if(!e){return}i=n?JSON.parse(JSON.stringify(e)):e;Object.keys(i).forEach(function(e){if(typeof t[e]==="object"&&typeof i[e]==="object"){r(t[e],i[e],false);return}t[e]=i[e]})}function o(e){var n=e||window.location.search,i=/sap-statistics=(true|x|X)/.test(n);if(!i){try{i=window.localStorage.getItem("sap-ui-statistics")==="X"}catch(e){t.warning("failed to read sap-statistics setting from local storage",null,"sap.ushell.bootstrap")}}return!!i}return{deepFreeze:e,getLocationOrigin:n,ensureTrailingSlash:i,mergeConfig:r,isSapStatisticsSet:o}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/CatalogsManager", ["sap/ui/base/Object","sap/ui/core/Core","sap/ushell/ui/launchpad/TileState","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/ushell/components/HomepageManager","sap/ushell/resources","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/Log","sap/ushell/Config"],function(e,t,a,o,i,r,s,n,l,g,jQuery,u,c,h){"use strict";var d;var p=e.extend("sap.ushell.components.CatalogsManager",{metadata:{publicMethods:["createGroup","createGroupAndSaveTile","createTile","deleteCatalogTileFromGroup","notifyOnActionFailure","resetAssociationOnFailure"]},analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},_aDoables:[],constructor:function(e,t){this.oLaunchPageServicePromise=sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){this.oLaunchPageService=e}.bind(this));this.oTileCatalogToGroupsMap={};this.tagsPool=[];this.iInitialLoad=100;this.oModel=t.model;if(!h.last("/core/spaces/enabled")){var a={model:this.oModel};this.oHomepageManager=l.prototype.getInstance();if(!this.oHomepageManager){this.oHomepageManager=new l("dashboardMgr",a)}}d=this.getInterface();this.registerEvents()},registerEvents:function(){var e=t.getEventBus();e.subscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoables=[o.on("showCatalog").do(this.updateTilesAssociation.bind(this)),o.on("updateGroups").do(this.updateTilesAssociation.bind(this))]},unregisterEvents:function(){var e=t.getEventBus();e.unsubscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoables.forEach(function(e){e.off()});this._aDoables=[]},getModel:function(){return this.oModel},loadAllCatalogs:function(){var e=new jQuery.Deferred;var t=this;e.resolve();var a=function(){e.done(function(){var e=t.getModel().getProperty("/groups");if(e&&e.length!==0){t.updateTilesAssociation()}})};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){if(!h.last("/core/spaces/enabled")){e=this.oHomepageManager.loadPersonalizedGroups()}}r.destroyFLPAggregationModels(this.oModel.getProperty("/catalogs"));r.destroyTileModels(this.oModel.getProperty("/catalogTiles"));this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];u.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");u.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");u.pause("FLP:DashboardManager.getCatalogTiles");u.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");u.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){e.getCatalogs().done(function(e){var t=e.slice(0,this.iInitialLoad);u.end("FLP:DashboardManager.GetCatalogsRequest");this.aPromises=t.map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this)).then(function(){this.aPromises=e.slice(this.iInitialLoad).map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this))}.bind(this)).then(this.onDoneLoadingCatalogs.bind(this,e)).then(a)}.bind(this)).fail(n.showLocalizedErrorHelper("fail_to_load_catalog_msg"))}.bind(this))}else{a()}},updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap()},mapCatalogTilesToGroups:function(){var e=this;this.oTileCatalogToGroupsMap={};var t=this.oModel.getProperty("/groups");t.forEach(function(t){["tiles","links"].forEach(function(a){var o=t[a];if(o){for(var i=0;i<o.length;++i){var r=encodeURIComponent(e.oLaunchPageService.getCatalogTileId(o[i].object));var s=e.oTileCatalogToGroupsMap[r]||[];var n=e.oLaunchPageService.getGroupId(t.object);if(s.indexOf(n)===-1&&(typeof t.isGroupVisible==="undefined"||t.isGroupVisible)&&!t.isGroupLocked){s.push(n)}e.oTileCatalogToGroupsMap[r]=s}}})})},updateCatalogTilesToGroupsMap:function(){var e;var t;var a;var o=this.getModel().getProperty("/catalogs");if(o){for(var i=0;i<o.length;i++){var r=o[i].appBoxes;if(r){for(var s=0;s<r.length;s++){var n=r[s];e=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(n.src));a=this.oTileCatalogToGroupsMap[e];t=a||[];n.associatedGroups=t}}var l=o[i].customTiles;if(l){for(var g=0;g<l.length;g++){var u=l[g];e=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(u.src));a=this.oTileCatalogToGroupsMap[e];t=a||[];u.associatedGroups=t}}}}this.getModel().setProperty("/catalogs",o)},addCatalogToModel:function(e){var t={title:this.oLaunchPageService.getCatalogTitle(e),id:this.oLaunchPageService.getCatalogId(e),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]};u.resume("FLP:DashboardManager.getCatalogTiles");return new Promise(function(a,o){this.oLaunchPageService.getCatalogTiles(e).done(function(e){u.pause("FLP:DashboardManager.getCatalogTiles");a({oCatalogEntry:e,oCatalogModel:t})}).fail(function(e){n.showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg");o(e)})}.bind(this))},getTagList:function(e){var t={};var a=[];if(this.oModel.getProperty("/tagList")&&this.oModel.getProperty("/tagList").length>0){this.tagsPool.concat(this.oModel.getProperty("/tagList"))}for(var o=0;o<this.tagsPool.length;o++){var i=this.tagsPool[o];if(t[i]){t[i]++}else{t[i]=1}}for(var r in t){a.push({tag:r,occ:t[r]})}var s=a.sort(function(e,t){return t.occ-e.occ});if(e){this.oModel.setProperty("/tagList",s.slice(0,e))}else{this.oModel.setProperty("/tagList",s)}},processPendingCatalogs:function(e){var a=this.oModel.getProperty("/catalogs");var o=t.getEventBus();var r=this.oModel.getProperty("/masterCatalogs")||[{title:n.getLocalizedText("all")}];u.end("FLP:DashboardManager.getCatalogTiles");u.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");var s=e.reduce(function(e,t){return e.then(function(){var e;var o;var i=t.oCatalogEntry;var s=t.oCatalogModel;var n=this.searchModelCatalogByTitle(s.title);if(n.result){o=this.oModel.getProperty("/catalogs")[n.indexOfPreviousInstanceInModel];e=false}else{e=true;o=s}var l=i.map(function(e){return this._processCatalogObjectForModel(o,e)}.bind(this));return Promise.all(l).then(function(){if(o.appBoxes.length>0||o.customTiles.length>0){if(e){a.push(s);r.push({title:s.title})}}if(this.oModel.getProperty("/enableCatalogTagFilter")===true){this.getTagList()}}.bind(this))}.bind(this))}.bind(this),Promise.resolve());return s.then(function(){this.oModel.setProperty("/masterCatalogs",r);this.oModel.setProperty("/catalogs",a);o.publish("launchpad","afterCatalogSegment");setTimeout(function(){i.setPerformanceMark("FLP-TTI-AppFinder",{bUseUniqueMark:true})},0);u.pause("FLP:DashboardManager.BuildCatalogModelWithRendering")}.bind(this))},_processCatalogObjectForModel:function(e,t){var a;if(this._getIsIntentSupported(t)){if(this._getIsAppBox(t)){a=this.createCatalogAppBoxes(t,true);e.appBoxes.push(a);return Promise.resolve()}return this.createCatalogTiles(t).then(function(t){e.customTiles.push(t);if(!this.aFnToGetTileView){this.aFnToGetTileView=[]}}.bind(this))}return Promise.resolve()},searchModelCatalogByTitle:function(e){var t=this.oModel.getProperty("/catalogs");var a=false;var o;var i=0;var r=false;var s;for(var n=0;n<t.length;++n){s=t[n];if(s.title===g.i18n.getText("catalogsLoading")){r=true}else if(e===s.title){o=n;i=s.numberOfTiles;a=true;break}}return{result:a,indexOfPreviousInstanceInModel:o,indexOfPreviousInstanceInPage:r?o-1:o,numOfTilesInCatalog:i}},_getCatalogTileId:function(e){var t;var a=h.last("/core/stableIDs/enabled");var o=h.last("/core/spaces/enabled");if(a&&o){t=this.oLaunchPageService.getStableCatalogTileId(e)}if(!t){t=this.oLaunchPageService.getCatalogTileId(e)}return t},createCatalogAppBoxes:function(e,t){var a=encodeURIComponent(this._getCatalogTileId(e));var o=this.oTileCatalogToGroupsMap[a]||[];var i=this.oLaunchPageService.getCatalogTileTags(e)||[];if(i.length>0){this.tagsPool=this.tagsPool.concat(i)}var r;if(e.tileResolutionResult){r=e.tileResolutionResult.navigationMode}return{id:a,associatedGroups:o,src:e,title:this.oLaunchPageService.getCatalogTilePreviewTitle(e),subtitle:this.oLaunchPageService.getCatalogTilePreviewSubtitle(e),icon:this.oLaunchPageService.getCatalogTilePreviewIcon(e),keywords:t?(this.oLaunchPageService.getCatalogTileKeywords(e)||[]).join(","):[],tags:i,navigationMode:r,url:this.oLaunchPageService.getCatalogTileTargetURL(e)}},onDoneLoadingCatalogs:function(e){var a=e.map(function(e){return new Promise(function(t,a){this.oLaunchPageService.getCatalogTiles(e).done(t).fail(a)}.bind(this))}.bind(this));Promise.all(a).then(function(t){var a=true;for(var o=0;o<t.length;o++){if(t[o].length!==0){a=false;break}}if(a||!e.length){this.oModel.setProperty("/catalogsNoDataText",g.i18n.getText("noCatalogs"))}}.bind(this));var o=t.getEventBus();o.publish("launchpad","catalogContentLoaded");var r=e.filter(function(e){var t=this.oLaunchPageService.getCatalogError(e);if(t){c.error("A catalog could not be loaded",t,"sap.ushell.components.CatalogsManager")}return!t}.bind(this));if(r.length!==e.length){n.showLocalizedError("partialCatalogFail")}i.handleTilesVisibility()},createCatalogTiles:function(e){var t=Promise.resolve();var o=e.getChip&&e.getChip().getBaseChipId&&e.getChip().getBaseChipId();if(o&&["X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER","X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER"].indexOf(o)===-1){t=new Promise(function(t,a){this.oLaunchPageService.getCatalogTileViewControl(e).done(t).fail(a)}.bind(this))}return t.then(function(t){var o=encodeURIComponent(this._getCatalogTileId(e));var i=this.oTileCatalogToGroupsMap[o]||[];var r=this.oLaunchPageService.getCatalogTileTags(e)||[];if(r.length>0){this.tagsPool=this.tagsPool.concat(r)}if(!t){t=new a({state:"Loading"})}var s=this.oLaunchPageService.getCatalogTilePreviewTitle(e);if(!s){s=this.oLaunchPageService.getCatalogTileTitle(e)}return{associatedGroups:i,src:e,catalog:e.title,catalogId:e.id,title:s,tags:r,keywords:(this.oLaunchPageService.getCatalogTileKeywords(e)||[]).join(","),id:o,size:this.oLaunchPageService.getCatalogTileSize(e),content:[t],isTileIntentSupported:this.oLaunchPageService.isTileIntentSupported(e),tileType:e.tileType}}.bind(this))},createGroupAndSaveTile:function(e){var a=e.catalogTileContext;var o=e.newGroupName;var r=new jQuery.Deferred;if(i.validHash(o)&&a){this.createGroup(o).then(function(e){var o=this.oHomepageManager.getDashboardView();if(o&&o.getModel().getProperty("/tileActionModeActive")){t.getEventBus().publish("launchpad","AddTileContainerContent")}var i={};this.createTile({catalogTileContext:a,groupContext:e}).done(function(e){i={group:e.group,status:1,action:"addTileToNewGroup"};r.resolve(i)}).fail(function(e){i={group:e.group,status:0,action:"addTileToNewGroup"};r.resolve(i)})}.bind(this))}return r.promise()},createGroup:function(e){var t=this;var a=new jQuery.Deferred;if(!i.validHash(e)){return a.reject({status:0,action:"createNewGroup"})}var o=this.oLaunchPageService.addGroup(e);o.done(function(e){var o=t.oHomepageManager.addGroupToModel(e);a.resolve(o)});o.fail(function(){n.showLocalizedError("fail_to_create_group_msg");var e={status:0,action:"createNewGroup"};a.resolve(e)});return a.promise()},createTile:function(e){var a=this;var o=e.catalogTileContext;var i=e.groupContext;var r=this.oModel.getProperty(i.getPath());var l=r.groupId;var g=new jQuery.Deferred;var u={};var h=t.getEventBus();h.publish("launchpad","addTile",{catalogTileContext:o,groupContext:i});if(!o){c.warning("CatalogsManager: Did not receive catalog tile object. Abort.",this);u={group:r,status:0,action:"add"};return Promise.resolve(u)}var d=this.oLaunchPageService.addTile(o.getProperty("src"),i.getProperty("object"));d.done(function(e){var t=a.oModel.getProperty("/groups");var o=s.getModelPathOfGroup(t,l);var i=a.oLaunchPageService.getTileTitle(e);a.oHomepageManager.addTileToGroup(o,e);u={group:r,status:1,action:"add"};sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(e){e.logCustomEvent(a.analyticsConstants.PERSONALIZATION,a.analyticsConstants.ADD_TILE,[r.title,i])});g.resolve(u)}).fail(function(){n.showLocalizedError("fail_to_add_tile_msg");u={group:r,status:0,action:"add"};g.resolve(u)});return g.promise()},deleteCatalogTileFromGroup:function(e){var t=this;var a=decodeURIComponent(e.tileId);var o=e.groupIndex;var i=this.oModel.getProperty("/groups/"+o);var r=new jQuery.Deferred;var s=[];var n=[];["tiles","links"].forEach(function(e){i[e].forEach(function(e){var o=t.oLaunchPageService.getCatalogTileId(e.object);if(o===a){var r=new jQuery.Deferred;var l=t.oLaunchPageService.removeTile(i.object,e.object);l.done(function(t){return function(){n.push(e.uuid);t.resolve({status:true})}}(r));l.fail(function(e){return function(){e.resolve({status:false})}}(r));s.push(r)}})});jQuery.when.apply(jQuery,s).done(function(e){var a=s.length===n.length;t.oHomepageManager.deleteTilesFromGroup(i.groupId,n);t.updateTilesAssociation();r.resolve({group:i,status:a,action:"remove"})});return r.promise()},calculateCatalogTileIndex:function(e,t,a){var o=parseInt(e*1e5,10);o+=(t!==undefined?t:0)+a;return o},notifyOnActionFailure:function(e,t){n.showLocalizedError(e,t)},resetAssociationOnFailure:function(e,t){this.notifyOnActionFailure(e,t);this.updateTilesAssociation()},_getIsIntentSupported:function(e){return!!this.oLaunchPageService.isTileIntentSupported(e)},_getIsAppBox:function(e){var t;var a=this.oModel.getProperty("/appFinderDisplayMode");if(a==="tiles"){t=false}else{t=!!(this.oLaunchPageService.getCatalogTileTargetURL(e)&&(this.oLaunchPageService.getCatalogTilePreviewTitle(e)||this.oLaunchPageService.getCatalogTilePreviewSubtitle(e)))}return t},destroy:function(){this.unregisterEvents()}});p.prototype.getInstance=function(){return d};return p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/ComponentKeysHandler", ["sap/ui/core/Core","sap/ushell/Config","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/bootstrap/common/common.load.model"],function(e,t,i,jQuery,n,s,r){"use strict";var l=function(){};l._instance=undefined;l.getInstance=function(){if(l._instance===undefined){l._instance=new l;return l._instance._init().then(function(){return l._instance})}return Promise.resolve(l._instance)};l.prototype={keyCodes:i,_init:function(){this.oModel=r.getModel();if(sap.ushell.Container.getLogonSystem().getPlatform()==="cdm"){return Promise.resolve()}return new Promise(function(e){if(!this.oLaunchPageService){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(t){this.oLaunchPageService=t;e()}.bind(this))}else{e()}}.bind(this))},goToLastVisitedTile:function(e,t){var i,n,r=jQuery(".sapUshellTile, .sapMGTLineMode, .sapFCard");if(t){var l=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),o=this.oModel.getProperty("/topGroupInViewPortIndex");var a=e||jQuery(l.get(o));var h=a.find(".sapUshellTile, .sapMGTLineMode, .sapFCard");i=h.filter(":visible").eq(0);n=h.filter("[tabindex=0]:visible").eq(0);if(!i.length){i=r.filter(":visible").eq(0)}}else{i=r.filter(":visible").eq(0);n=r.filter("[tabindex=0]:visible").eq(0)}if(n.length){this.moveScrollDashboard(n)}else if(i.length){i.attr("tabindex","0");this.moveScrollDashboard(i)}else{s.sendFocusBackToShell()}},_goToFirstTileOfNextGroup:function(e,t){this._preventDefault(t);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(e,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n)}}},_goToTileOfGroup:function(e,t){if(t){var i=t.getTiles().filter(this._filterInvisibleTiles);var n=t.getLinks().filter(this._filterInvisibleTiles);if(t.getShowPlaceholder()){i.push(t.oPlusTile)}i=i.concat(n);e=e==="first"?0:e;e=e==="last"?i.length-1:e;var s=i[e];if(s){this.moveScrollDashboard(s.$());return true}}return false},_moveTile:function(t){var i=this._getGroupAndTilesInfo();if(!i||i.oGroup.getProperty("isGroupLocked")||i.oCurTile.isA("sap.ushell.ui.launchpad.PlusTile")){return null}var n=i.oCurTile;var s=this._getNextTile(t,true);if(s){var r=n.getMode?n.getMode():"ContentMode";var l=s.getMode?s.getMode():"ContentMode";var o=n.getParent();var a=s.getParent();var h=o===a;var u=r===l;var f=l==="LineMode"?a.getLinks():a.getTiles();var d=f.indexOf(s);var c=this._getTileRect(t,n);var p=this._getTileRect(t,s);if(!p){d=0}else{var g=c.right>p.right+5;var T=d===f.length-1;if(!h||!u){if((t==="up"||t==="down")&&g&&T){d++}else if(t==="left"){d++}}}var v=e.byId("sapUshellDashboardPage").getParent();e.getEventBus().publish("launchpad",u?"movetile":"convertTile",{callBack:this.callbackSetFocus.bind(this),sTileId:v.getController()._getTileUuid(n),toGroupId:a.getGroupId?a.getGroupId():a.groupId,srcGroupId:o.getGroupId?o.getGroupId():o.groupId,toIndex:d,tile:n,sToItems:l==="LineMode"?"links":"tiles",sFromItems:r==="LineMode"?"links":"tiles",sTileType:r==="LineMode"?"link":"tile",longDrop:false})}},callbackSetFocus:function(e){setTimeout(function(){if(e.oParent&&e.oParent instanceof sap.ushell.ui.launchpad.Tile){this.moveScrollDashboard(jQuery(e.oParent.getDomRef()))}else{this.moveScrollDashboard(e.$())}}.bind(this),0)},_getTileCenter:function(e,t,i){if(!(i instanceof HTMLElement)){var n=i.$().find(".sapMGTLineStyleHelper");if(i.isLink&&n&&n.length>1){if(e==="down"){return t.right}return t.left}}return t.right-(t.right-t.left)/2},_getTileRect:function(e,t){if(t instanceof HTMLElement){return t.getBoundingClientRect()}var i=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&i&&i.length){if(e==="down"){return i.get(i.length-1).getBoundingClientRect()}return i.get(0).getBoundingClientRect()}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect()}return undefined},_findClosestTile:function(e,t,i){var n=this._getTileRect(e,i),s=this._getTileCenter(e,n,i);var r,l=Infinity,o=e==="down"?1:-1,a=t.indexOf(i)+o,h;for(;;a+=o){var u=t[a];if(!u){return r}if(!r){if(e==="down"&&a===t.length-1){return u}if(e==="up"&&a===0){return u}}var f=this._getTileRect(e,u);if(!f){return r}if(e==="down"&&n.bottom+5>=f.bottom){continue}if(e==="up"&&n.top-5<=f.top){continue}if(r&&h!==f.top){return r}h=f.top;var d=Math.min(Math.abs(f.left-s),Math.abs(f.right-s));if(l>d){l=d;r=u}else{return r}}},_filterInvisibleTiles:function(e){return e.getVisible()&&e.getDomRef()},_getNextTile:function(e,t){var i=this._getGroupAndTilesInfo();if(!i){return null}var n=i.oCurTile;var s=i.oGroup;var r=s.getTiles().filter(this._filterInvisibleTiles);var l=s.getLinks().filter(this._filterInvisibleTiles);var o=n.isLink;var a=s.getShowPlaceholder();var h=n.getBindingContext();var u=!t||h&&this._isLinkPersonalizationSupported(h.getObject().object);var f=o?l:r;var d=f.indexOf(n);if(d<0){if(e==="right"){if(l.length){return l[0]}}if(e==="left"){if(r.length){return r[r.length-1]}}}else{if(e==="right"){if(d<f.length-1){return f[d+1]}if(!o&&a&&!t){return s.oPlusTile}if(!o&&u&&l.length){return l[0]}}if(e==="left"){if(d>0){return f[d-1]}if(o&&a){return s.oPlusTile}if(o&&r.length){return r[r.length-1]}}}var c=this._getNextGroup(e,s,t,u);var p=c?c.getTiles().filter(this._filterInvisibleTiles):[];var g=c?c.getLinks().filter(this._filterInvisibleTiles):[];var T=c&&c.getShowPlaceholder();if(c){if(e==="right"){if(p.length){return p[0]}if(T){return c.oPlusTile}if(g.length){return g[0]}return c.oPlusTile}if(e==="left"){if(u&&g.length){return g[g.length-1]}if(T&&!t){return c.oPlusTile}if(p.length){return p[p.length-1]}return c.oPlusTile}}if(e==="up"||e==="down"){if(!r.length&&t){r=[s.oPlusTile]}var v=u?r.concat(l):r;var C=[];if(c){if(!p.length&&t){p=[c.oPlusTile]}C=u?p.concat(g):p}var _=e==="up"?C.concat(v):v.concat(C);return this._findClosestTile(e,_,n)}},_isLinkPersonalizationSupported:function(e){return!this.oLaunchPageService||this.oLaunchPageService.isLinkPersonalizationSupported(e)},_getNextGroup:function(e,t,i,n){var s;var r=t.getParent().getGroups();var l=r.indexOf(t);var o=l;if(e==="down"||e==="right"){s=1}else{s=-1}o+=s;while(r[o]){var a=r[o];var h=a.getTiles().filter(this._filterInvisibleTiles);var u=a.getLinks().filter(this._filterInvisibleTiles);var f=n?h.concat(u):h;var d=a.getVisible()&&!(a.getIsGroupLocked()&&i)&&!(a.getIsGroupLocked()&&f.length===0)&&!(f.length===0&&!(i||a.getShowPlaceholder()));if(d){return a}o+=s}return undefined},_getGroupAndTilesInfo:function(){var e=this._getFocusOnTile(jQuery(document.activeElement));if(!e||!e.length){return null}var t=e.control(0);t.isLink=e.hasClass("sapUshellLinkTile")||e.hasClass("sapMGTLineMode");var i=e.closest(".sapUshellTileContainer").control(0);if(!i){return null}return{oCurTile:t,oGroup:i}},_goToSiblingElementInTileContainer:function(e,t){var i=t.closest(".sapUshellTileContainer"),n,s,r;n=t.closest(".sapUshellTileContainerBeforeContent");if(n.length){if(e==="up"||e==="left"){this._goToNextTileContainer(n,e)}else{r=i.find(".sapUshellTileContainerHeader").eq(0);r.focus()}return}n=t.closest(".sapUshellTileContainerHeader");if(n.length){if(e==="up"){if(!this._goToTileContainerBeforeContent(i)){this._goToNextTileContainer(n,e)}}else if(e==="down"){s=i.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(s.length){this.moveScrollDashboard(s)}else{this._goToNextTileContainer(n,e)}}else if(e==="left"){if(t.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(i)){this._goToNextTileContainer(n,"left")}}else{r=t.closest(".sapUshellTileContainerHeader");r.focus()}}else if(e==="right"){var l=t.hasClass("sapMInputBaseInner");if(!l){s=i.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(s.length){this.moveScrollDashboard(s)}else{this._goToNextTileContainer(n,"down")}}}return}n=this._getFocusOnTile(t);if(n){this._goFromFocusedTile(e,n,true);return}n=t.closest(".sapUshellTileContainerAfterContent");if(n.length){if(e==="up"||e==="left"){this._goToTileOfGroup("first",n.control(0))}else{this._goToNextTileContainer(n,e)}}},_goToNextTileContainer:function(e,t){var i=e.closest(".sapUshellTileContainer");if(i.length===1){var n=jQuery(".sapUshellTileContainer").filter(":visible"),s=t==="down"?1:-1,r=jQuery(n[n.index(i)+s]);if(r.length===1){var l=r.find(".sapUshellTileContainerHeader");if(t==="down"){if(!this._goToTileContainerBeforeContent(r)){this._setTileContainerSelectiveFocus(r)}}else if(!this._goToTileContainerAfterContent(r)){if(t==="up"||t==="left"){var o=t==="up"?"first":"last";if(!this._goToTileOfGroup(o,r.control(0))){l.focus()}}}}}},_goToTileContainerBeforeContent:function(e){var t=e.hasClass("sapUshellTileContainer")?e:e.closest(".sapUshellTileContainer"),i=t.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(i.length){i.focus();return true}return false},_goToTileContainerAfterContent:function(e){var t=e.hasClass("sapUshellTileContainer")?e:e.closest(".sapUshellTileContainer"),i=t.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(i.length){i.focus();return true}return false},_goFromFocusedTile:function(e,t,i){var n=this._getNextTile(e),s=t.closest(".sapUshellTileContainer");if(n){var r=n.$(),l=r.closest(".sapUshellTileContainer");if(i&&s.get(0).id!==l.get(0).id){if(e==="down"||e==="right"){if(!this._goToTileContainerAfterContent(s)){this._setTileContainerSelectiveFocus(l)}}else if(e==="up"||e==="left"){var o=s.find(".sapUshellTileContainerHeader");o.focus()}}else{this.moveScrollDashboard(r)}}else if(i){if(e==="down"||e==="right"){this._goToTileContainerAfterContent(s)}else if(e==="up"||e==="left"){var a=s.find(".sapUshellTileContainerHeader");a.focus()}}},_setTileContainerSelectiveFocus:function(e){var t=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),i=e.find(".sapUshellTileContainerBeforeContent button"),n=e.find(".sapUshellTileContainerHeader").eq(0),s=i.length&&i.is(":visible");if(s){i.focus()}else if(e.get(0)===t.get(0)){this.goToLastVisitedTile()}else if(n.length){n.focus()}},_setTileFocus:function(t){var i=document.getElementById("catalogView");if(i&&i.contains(t)){this.setFocusOnCatalogTile(t);return}var n=document.getElementById("dashboardGroups");var s=n.querySelectorAll(".sapUshellTile[tabindex]");for(var r=0;r<s.length;++r){s[r].removeAttribute("tabindex")}var l=[".sapMGTLineMode",".sapMGT",".sapFCard"].join('[tabindex="0"], ');var o=n.querySelectorAll(l);for(var a=0;a<o.length;++a){o[a].setAttribute("tabindex","-1")}t.setAttribute("tabindex",0);var h=e.byId(t.getAttribute("id"));if(h){var u=h.getParent();if(u){var f=e.getEventBus();f.publish("launchpad","scrollToGroup",{group:u})}h.focus()}},setFocusOnCatalogTile:function(e){var t=jQuery(".sapUshellTile[tabindex=0]"),i,n;if(t.length){jQuery(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(e){jQuery(e).attr("tabindex",-1)});i=t.find("[tabindex], a").addBack().filter("[tabindex], a");i.attr("tabindex",-1)}if(!e){n=jQuery(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(n.length){e=n[0]}else{var s=document.getElementsByClassName("sapMMessagePageMainText");if(s.length){s[0].focus()}return}}e.setAttribute("tabindex",0);jQuery(e).find("button").attr("tabindex",0);e.focus()},moveScrollDashboard:function(e){if(e.length){this._setTileFocus(e[0])}},_moveGroupFromDashboard:function(e,t){var i,n=jQuery(".sapUshellDashboardGroupsContainerItem"),s,r;i=t.closest(".sapUshellDashboardGroupsContainerItem");s=n.index(i);r=e==="up"||e==="left"?s-1:s+1;this._moveGroup(s,r)},_moveGroup:function(t,i){if(i<0||i>=jQuery(".sapUshellDashboardGroupsContainerItem").length||i<jQuery(".sapUshellDisableDragAndDrop").length){return}e.getEventBus().publish("launchpad","moveGroup",{fromIndex:t,toIndex:i});setTimeout(function(){var e=jQuery(".sapUshellTileContainerHeader")[i];jQuery(e).focus()},100)},_getFocusOnTile:function(e){var t;[".sapUshellTile",".sapUshellLinkTile",".sapFCard"].forEach(function(i){var n=e.closest(i);if(n.length){t=n}});return t},_renameGroup:function(e){if(e.closest(".sapUshellTileContainerHeader").length===1){e=e[0].tagName==="H2"?e:e.find("h2");e.click()}},_arrowsButtonsHandler:function(e,t,i){this._preventDefault(t);if(i.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(e,i);return}if(i.is("#sapUshellAnchorBarOverflowButton")){this._handleAnchorNavigationOverflowButtonArrowKeys(e);return}var n=this._getFocusOnTile(i);var s=this.oModel.getProperty("/tileActionModeActive");var r=this.oModel.getProperty("/personalization");if(t.ctrlKey===true&&r){var l=i.closest(".sapUshellTileContainerHeader");if(n){this._moveTile(e)}else if(l.length){var o=l.closest(".sapUshellTileContainerContent");if(!o.hasClass("sapUshellTileContainerDefault")||!o.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(e,l)}}}else if(s){this._goToSiblingElementInTileContainer(e,i)}else if(n){this._goFromFocusedTile(e,n,s)}else{this.goToLastVisitedTile()}},_handleAnchorNavigationOverflowButtonArrowKeys:function(e){if(e==="left"||e==="up"){var t=jQuery(".sapUshellAnchorItem").filter(":visible");this._setAnchorItemFocus(t.eq(t.length-1)[0])}},_handleAnchorNavigationItemsArrowKeys:function(e,t){var i=jQuery(".sapUshellAnchorItem").filter(":visible"),n=i.index(t);if(e==="left"||e==="up"){if(n>0){this._setAnchorItemFocus(i.eq(n-1)[0]);return}}if(e==="right"||e==="down"){if(n<i.length-1){this._setAnchorItemFocus(i.eq(n+1)[0])}else if(n===i.length-1){var s=document.getElementById("sapUshellAnchorBarOverflowButton");s.focus()}}},_setAnchorItemFocus:function(e){var t=document.getElementsByClassName("sapUshellAnchorItem");for(var i=0;i<t.length;++i){t[i].setAttribute("tabindex","-1")}if(!e){e=jQuery(".sapUshellAnchorItem").filter(":visible")[0]}e.setAttribute("tabindex","0");e.focus()},_appFinderHomeEndButtonsHandler:function(e,t,i){var n=jQuery(".sapUshellTile, .sapUshellAppBox").filter(":visible"),s;if(n.length){if(e==="home"){s=jQuery(n.get(0))}if(e==="end"){s=jQuery(n.get(n.length-1))}}if(s){this._preventDefault(t);this._appFinderFocusAppBox(i,s)}},_homeEndButtonsHandler:function(e,t,i){if(i.hasClass("sapUshellAnchorItem")){this._preventDefault(t);this._setAnchorItemFocus(jQuery(".sapUshellAnchorItem").filter(":visible:"+e)[0])}else if(t.ctrlKey===true){this._preventDefault(t);var n=jQuery(".sapUshellTile, .sapFCard").filter(":visible")[e]();if(n.length){this._setTileFocus(n[0])}}else{var s=i.closest(".sapUshellTileContainer");if(s){var r=s.control(0);if(r){this._preventDefault(t);this._goToTileOfGroup(e,r)}}}},_deleteButtonHandler:function(t){var i=this.oModel.getProperty("/tileActionModeActive");var n=this.oModel.getProperty("/personalization");if(i&&n){var s=this._getFocusOnTile(t);if(s&&!s.hasClass("sapUshellLockedTile")&&!s.hasClass("sapUshellPlusTile")){var r=this._getGroupAndTilesInfo();if(r&&!r.oCurTile.isLink){var l=e.byId("sapUshellDashboardPage").getParent();e.getEventBus().publish("launchpad","deleteTile",{tileId:l.getController()._getTileUuid(r.oCurTile),items:"tiles"},this)}}}},_spaceButtonHandler:function(e,t){e.preventDefault();var i=this._getFocusOnTile(t);if(!i||!i.length){t.click();return}if(i.hasClass("sapFCard")){i.control(0).getCardHeader().firePress();return}var n=t.find("[role=button], a.sapMGT");if(n.length&&!this.oModel.getProperty("/tileActionModeActive")){var s=n.control(0);if(s){s.firePress();return}}i.control(0).firePress()},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(document.getElementsByClassName("sapUshellAnchorItemSelected")[0]);return document.activeElement&&document.activeElement.classList.contains("sapUshellAnchorItemSelected")},handleFocusOnMe:function(i,n){var s=sap.ushell.Container.getRenderer("fiori2"),r=l._instance;if(s){var o=s.getCurrentCoreView();if(o==="home"&&!t.last("/core/spaces/enabled")){var a=document.activeElement?document.activeElement.tagName:"";if(a==="INPUT"||a==="TEXTAREA"){if(i.keyCode===r.keyCodes.ENTER){var h=jQuery(document.activeElement).closest(".sapUshellTileContainerHeader");if(h.length){setTimeout(function(){h=jQuery("#"+h[0].id);h.focus()},10)}}}else{r._dashboardKeydownHandler(i)}}if(o==="appFinder"){if(n){if(i.shiftKey){r.setFocusOnCatalogTile()}else{var u=e.byId("openCloseButtonAppFinderSubheader");if(u&&u.getVisible()){u.focus()}else{r.appFinderFocusMenuButtons(i)}}}else{r._appFinderKeydownHandler(i)}}}},_appFinderFocusAppBox:function(e,t){if(e&&t){e.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");t.attr("tabindex","0").focus();t.find(".sapUshellPinButton").attr("tabindex","0")}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation()},_getNextCatalog:function(e,t){var i;if(e==="down"||e==="right"){i=t.next()}else if(e==="up"||e==="left"){i=t.prev()}else{n.error("Direction is unkown",e,"sap.ushell.components.ComponentKeysHandler");return null}if(i.length>0){var s=i.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(s>0){return i}return this._getNextCatalog(e,i)}return undefined},_getNextCatalogItem:function(e,t,i){var n=jQuery(t.parents()[2]),s=n.find("li.sapUshellAppBox, li.sapUshellTile").get();if(e==="right"||e==="left"){var r=s.indexOf(t.get(0)),l=e==="right"?r+1:r-1;if(s[l]){return s[l]}}var o=this._getNextCatalog(e,n),a=o?o.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(a.length>0&&e==="right"){return a[0]}if(a.length>0&&e==="left"){return a[a.length-1]}if(e==="down"||e==="up"){if(a.length>0&&i){return a[0]}var h=e==="down"?s.concat(a):a.concat(s);return this._findClosestTile(e,h,t.get(0))}return undefined},_appFinderKeysHandler:function(e,t,i,n){if(i.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(t);var s=jQuery(this._getNextCatalogItem(e,i,n));if(s){this._appFinderFocusAppBox(i,s)}}},appFinderFocusMenuButtons:function(e){var t=jQuery("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(t.length){t.eq(0).focus();this._preventDefault(e);return true}return false},_appFinderKeydownHandler:function(t){var i=jQuery(document.activeElement);if(t.srcElement.id!=="appFinderSearch-I"){var n=t.keyCode,s=e.getConfiguration().getRTL();if(s&&n===this.keyCodes.ARROW_RIGHT){n=this.keyCodes.ARROW_LEFT}else if(s&&n===this.keyCodes.ARROW_LEFT){n=this.keyCodes.ARROW_RIGHT}switch(n){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",t,i);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",t,i);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",t,i);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",t,i);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",t,i,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",t,i,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",t,i);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",t,i);break;case this.keyCodes.SPACE:this._spaceButtonHandler(t,i);break;default:return}}},_dashboardKeydownHandler:function(t){var i=document.activeElement&&document.activeElement.tagName;if(i==="INPUT"||i==="TEXTAREA"){return}var n=t.keyCode,s=e.getConfiguration().getRTL(),r=jQuery(document.activeElement);if(s){if(n===this.keyCodes.ARROW_RIGHT){n=this.keyCodes.ARROW_LEFT}else if(n===this.keyCodes.ARROW_LEFT){n=this.keyCodes.ARROW_RIGHT}}switch(n){case this.keyCodes.F2:this._renameGroup(r);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(r);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",t,r);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",t,r);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",t,r);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",t,r);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",t);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",t);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",t,r);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",t,r);break;case this.keyCodes.SPACE:this._spaceButtonHandler(t,r);break;case this.keyCodes.ENTER:this._spaceButtonHandler(t,r);break;default:break}}};return l});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/DestroyHelper", [],function(){"use strict";function t(t){var e;if(t&&t.content){for(e=0;e<t.content.length;e++){if(t.content[e].destroy){t.content[e].destroy()}}}}function e(e){var n;if(e){for(n=0;n<e.length;n++){t(e[n])}}}function n(t){if(t){e(t.tiles)}}function o(t){var e;if(t){for(e=0;e<t.length;e++){n(t[e])}}}return{destroyFLPAggregationModel:n,destroyFLPAggregationModels:o,destroyTileModel:t,destroyTileModels:e}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/GroupsHelper", [],function(){"use strict";return{getIndexOfGroup:n,getModelPathOfGroup:r};function r(r,u){var t=n(r,u);if(t<0){return null}return"/groups/"+t}function n(r,n){for(var u=0;u<r.length;u++){if(r[u].groupId===n){return u}}return-1}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/HeaderManager", ["sap/base/util/ObjectPath","sap/ui/Device","sap/ushell/components/_HeaderManager/PropertyStrategiesFactory","sap/ushell/components/StateHelper","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/utils/clone"],function(e,t,a,r,n,o,l,s){"use strict";var i={application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:n.last("/core/shellHeader/rootIntent"),homeUri:n.last("/core/shellHeader/homeUri"),title:""};var d;var u;var c="endItemsOverflowBtn";var h;var f={blank:{},"blank-home":{},home:{headItems:[]},app:{headItems:["backBtn"]},minimal:{headItems:[]},standalone:{headItems:["backBtn"]},embedded:{headItems:["backBtn"]},"embedded-home":{headItems:[]},headerless:{headItems:["backBtn"],headerVisible:false},merged:{headItems:["backBtn"]},"headerless-home":{headerVisible:false},"merged-home":{},lean:{headItems:[]},"lean-home":{}};var m=[];function p(e,a){var r=e&&e.appState?e.appState:"home";d=D(e);u=a;h=t.media.getCurrentRange(t.media.RANGESETS.SAP_STANDARD).name;I();v();k(r);B()}function S(){b()}function v(){var e=o.on("setHeaderCentralAreaElement").do(function(e){P({propertyName:"centralAreaElement",value:e.id,aStates:r.getPassStates(e.states),bCurrentState:!!e.currentState,bDoNotPropagate:!!e.bDoNotPropagate})});m.push(e);m.push(o.on("updateHeaderOverflowState").do(g));t.media.attachHandler(g,this,t.media.RANGESETS.SAP_STANDARD);m.push(n.on("/core/shellHeader/headEndItems").do(E));m.push(n.on("/core/shell/model/currentSpaceAndPage").do(A))}function b(){if(m){m.forEach(function(e){e.off()})}t.media.detachHandler(g,this,t.media.RANGESETS.SAP_STANDARD)}function g(e){if(e&&e.name){h=e.name}I();E()}function I(e){var t=n.last("/core/shell/model/currentState/stateName");var a=t==="merged"||t==="headerless";var r=!a;P({propertyName:"showLogo",value:r,aStates:["home","app","blank","blank-home","minimal","lean"],bCurrentState:false,bDoNotPropagate:true})}function A(e){if(n.last("/core/spaces/enabled")&&n.last("/core/spaces/homeNavigationTarget")==="origin_page"){var t=e?encodeURI(e.hash):i.rootIntent;var a=this&&this.updateStates||P;a({propertyName:"homeUri",value:"#"+t})}}function E(e){var t=n.last("/core/shellHeader/headEndItems");var a=t.indexOf(c)>-1;var r=e&&e.name||h;if(r==="Phone"&&!a&&t.length>2){N([c],false,["home","app"])}else if(r!=="Phone"&&a){var o=sap.ui.getCore().byId("headEndItemsOverflow");if(o){o.destroy()}H([c],false,["home","app"])}}function N(e,t,a,r){P({propertyName:"headEndItems",value:e,aStates:a,bCurrentState:!!t,bDoNotPropagate:!!r})}function H(e,t,a){P({propertyName:"headEndItems",value:e,aStates:a,bCurrentState:!!t,action:"remove",bDoNotPropagate:false})}function C(e,t){var a={};Object.keys(e).forEach(function(r){var n=e[r];a[r]=Object.keys(n).reduce(function(e,t){e[t]=n[t];return e},s(t))});return a}function P(t){var o=t.propertyName;var l=!t.bCurrentState?r.getAllStateToUpdate(t.aStates,t.bDoNotPropagate):[];var s=n.last("/core/shellHeader");var i=n.last("/core/shell/model/currentState/stateName");var u=t.value;if(o.charAt(0)==="/"){o=o.substring(1)}var c=a(o,t.action);if(!c){return}if(!t.bCurrentState){d=O(d,o,c,l,u)}if(l.indexOf(i)>-1||t.bCurrentState){var h=e.get(o.split("/"),s);var f=c.execute(h,u);if(h!==f){e.set(o.split("/"),f,s);w(o,s)}}if(t.bCurrentState){T(o,c,u)}}function y(e){var t;for(t in e){if(e.hasOwnProperty(t)){l.updateProperties(d[t],e[t])}}}function k(e){var t=d[e];if(!t){throw new Error("the state ("+e+") does not exist")}n.emit("/core/shellHeader",s(t))}function B(e){var t=n.last("/core/shellHeader");var a;var r;if(u&&u.customShellState){a=u.customShellState.currentState}if(e&&u.extendedShellStates[e]){r=u.extendedShellStates[e].customState.currentState}n.emit("/core/shellHeader",x(t,a,r))}function x(e,t,r){var o={};Object.keys(e).forEach(function(n){var l=a(n);var i=s(e[n]);if(l){if(r){i=l.execute(i,r[n])}if(t){i=l.execute(i,t[n])}}o[n]=i});o.ShellAppTitleState=n.last("/core/shellHeader/ShellAppTitleState");return o}function D(e){if(e){i.rootIntent=e.rootIntent;i.homeUri="#"+e.rootIntent}var t=C(f,i);function a(e,t){for(var a in t){if(a==="blank"||a==="blank-home"){continue}if(e==="openCatalogBtn"&&(a==="lean"||a==="lean-home")){continue}if(e==="ContactSupportBtn"){if(["home","app","minimal","standalone","embedded","embedded-home","lean"].indexOf(a)===-1){continue}}var r=t[a].headEndItems.indexOf(e);if(r===-1){t[a].headEndItems.push(e)}}}function r(e,t){var a;for(a in t){t[a].title=e}}if(e){if(e.moveContactSupportActionToShellHeader){a("ContactSupportBtn",t)}if(e.moveAppFinderActionToShellHeader){a("openCatalogBtn",t)}if(e.title){r(e.title,t)}}return t}function O(t,a,r,n,o){if(n.length===0){return t}var l=s(t);n.forEach(function(t){var n=l[t];if(n){var s=r.execute(e.get(a.split("/"),n),o);e.set(a.split("/"),s,n)}});return l}function T(t,a,r){if(!u){return}var n=u.customShellState.currentState;var o=a.execute(e.get(t.split("/"),n),r);e.set(t.split("/"),o,n)}function w(e,t){var a=e.split("/").shift();n.emit("/core/shellHeader/"+a,t[a])}function _(e){var t;try{t=d[e]}catch(e){t=undefined}return t}function R(e,t){var a;try{a=_(e)[t]}catch(e){a=undefined}return a}function U(e){d=e}return{init:p,destroy:S,switchState:k,updateStates:P,recalculateState:B,extendStates:y,handleCurrentSpaceAndPage:A,handleEndItemsOverflow:E,validateShowLogo:I,_createInitialState:D,_generateBaseHeaderState:C,_getBaseState:_,_getBaseStateMember:R,_resetBaseStates:U}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/HomepageManager", ["sap/ui/thirdparty/jquery","sap/ui/core/Core","sap/ui/base/Object","sap/ui/Device","sap/ui/model/Filter","sap/ushell/ui/launchpad/TileState","sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/components/_HomepageManager/DashboardLoadingManager","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/SelectDialog","sap/m/StandardListItem","sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter","sap/ushell/components/_HomepageManager/TransientPageOperationAdapter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/model/Context","sap/m/MessageToast","sap/base/Log","sap/base/util/extend","sap/ui/performance/Measurement","sap/ushell/Config"],function(jQuery,e,t,i,o,r,s,n,a,l,u,d,p,h,g,c,f,v,b,m,M,P,T,G,_,y,I,k){"use strict";var w=P.GenericTileScope;var L={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};var S=[];var A;var O=t.extend("sap.ushell.components.HomepageManager",{metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","resetGroupsOnFailure","addGroupToModel","addTileToGroup","deleteTilesFromGroup"]},analyticsConstants:L,constructor:function(t,i){if(A){if(!A.view){A.setDashboardView(i.view)}return A}this.oServiceLoadingPromise=sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){this.oPageBuilderService=e;this.oPageBuilderService.registerTileActionsProvider(this._addFLPActionsToTile.bind(this));this.oPageOperationAdapter=b.getInstance(e);this.bLinkPersonalizationSupported=this.oPageOperationAdapter.isLinkPersonalizationSupported()}.bind(this));e.attachThemeChanged(u.handleTilesVisibility);A=this;this.oModel=i.model;this.oRouter=i.router;this.oDashboardView=i.view;this.oSortableDeferred=new jQuery.Deferred;this.oSortableDeferred.resolve();this.registerEvents();this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.tileUuid=null;this.bIsGroupsModelLoading=false;this.bIsGroupsRequestPending=false;this.segmentsStore=[];this.bIsFirstSegment=true;this.bIsFirstSegmentViewLoaded=false;this.aGroupsFrame=null;this.iMinNumOfTilesForBlindLoading=this.oModel.getProperty("/optimizeTileLoadingThreshold")||100;this.bIsScrollModeAccordingKPI=false;this.oGroupNotLockedFilter=new o("isGroupLocked",M.EQ,false);this.oDashboardLoadingManager=new n("loadingManager",{oDashboardManager:this});if(this.oRouter){var r=this.oRouter.getTarget("home");r.attachDisplay(function(e){this.oDashboardView=e.getParameter("view")}.bind(this))}var s=l.last("/core/home/enableTransientMode");S.push(l.on("/core/home/enableTransientMode").do(function(e){if(s===e){return}s=e;this._changeMode(e)}.bind(this)));this.oModel.bindProperty("/tileActionModeActive").attachChange(this._changeLinksScope.bind(this));this._aRequestQueue=[];this._bRequestRunning=false;return undefined},_addRequest:function(e){this._aRequestQueue.push(e);if(!this._bRequestRunning){this._bRequestRunning=true;this._aRequestQueue.shift()()}},_checkRequestQueue:function(){if(this._aRequestQueue.length===0){this._bRequestRunning=false}else{this._aRequestQueue.shift()()}},_requestFailed:function(){this._aRequestQueue=[];this._bRequestRunning=false},isBlindLoading:function(){var e=l.last("/core/home/homePageGroupDisplay");if((e===undefined||e==="scroll")&&this.bIsScrollModeAccordingKPI){_.info("isBlindLoading reason IsScrollModeAccordingKPI and IsScrollMode: true");return true}if(this.oModel.getProperty("/tileActionModeActive")){_.info("isBlindLoading reason TileActionModeActive : true");return true}return false},createMoveActionDialog:function(e){var t=new f(e,{title:d.i18n.getText("moveTileDialog_title"),rememberSelections:false,contentWidth:"400px",contentHeight:"auto",confirm:function(t){var i=t.getParameter("selectedContexts");this.publishMoveActionEvents(i,e)}.bind(this),cancel:function(){var e=document.querySelector('.sapUshellTile[tabindex="0"]');if(e){e.focus()}},items:{path:"/groups",template:new v({title:"{title}"})}});return t},publishMoveActionEvents:function(t,o){var r=e.getEventBus();if(t.length){var s=this.tileType==="link"?"links":"tiles";var n=t[0].getObject().groupId;var a={sTileId:this.tileUuid,sToItems:s,sFromItems:s,sTileType:s,toGroupId:t[0].getObject().groupId,toIndex:t[0].getObject()[this.tileType==="link"?"links":"tiles"].length,source:o};if(i.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){a.callBack=e.callbackSetFocus.bind(e);r.publish("launchpad","scrollToGroup",{groupId:n});r.publish("launchpad","movetile",a)})})}else{r.publish("launchpad","scrollToGroup",{groupId:n});r.publish("launchpad","movetile",a)}}},_changeLinksScope:function(e){var t=this;if(this.bLinkPersonalizationSupported){var i=e.getSource().getValue();this.oModel.getProperty("/groups").forEach(function(e,o){if(!e.isGroupLocked){t._changeGroupLinksScope(e,i?"Actions":"Display")}})}},_changeGroupLinksScope:function(e,t){var i=this;e.links.forEach(function(e,o){i._changeLinkScope(e.content[0],t)})},_changeLinkScope:function(e,t){var i;if(e.getScope){i=e}else if(e.getContent){i=e.getContent()[0]}if(this.bLinkPersonalizationSupported&&i&&i.setScope){i.setScope(t)}},registerEvents:function(){var t=e.getEventBus();t.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);t.subscribe("launchpad","tabSelected",this.getSegmentTabContentViews,this);t.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);t.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);t.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);t.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);t.subscribe("launchpad","createGroupAt",this._createGroupAt,this);t.subscribe("launchpad","deleteGroup",this._deleteGroup,this);t.subscribe("launchpad","resetGroup",this._resetGroup,this);t.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);t.subscribe("launchpad","moveGroup",this._moveGroup,this);t.subscribe("launchpad","deleteTile",this._deleteTile,this);t.subscribe("launchpad","movetile",this._moveTile,this);t.subscribe("launchpad","sortableStart",this._sortableStart,this);t.subscribe("launchpad","sortableStop",this._sortableStop,this);t.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);t.subscribe("launchpad","convertTile",this._convertTile,this)},_changeMode:function(e){var t=this.getModel().getProperty("/groups");if(e){this.oPageOperationAdapter=m.getInstance();var i=this.oPageOperationAdapter.transformGroupModel(t);this.getModel().setProperty("/groups",i)}else{this.oPageOperationAdapter=b.getInstance();p.destroyFLPAggregationModels(t);this.getModel().setProperty("/groups",[]);this.loadPersonalizedGroups()}},_addFLPActionsToTile:function(e){var t=[];if(l.last("/core/shell/enablePersonalization")){var i=this.bLinkPersonalizationSupported&&this.oPageOperationAdapter.isLinkPersonalizationSupported(e);t.push(this._getMoveTileAction(e));if(i){t.push(this._getConvertTileAction(e))}}return t},getPersonalizableGroups:function(){var e=this.getModel().getProperty("/groups");return e.filter(function(e){return!e.isGroupLocked})},_getConvertTileAction:function(t){var o=e.getEventBus();var r=this.oPageOperationAdapter.getTileType(t);var s=r==="tile"?"ConvertToLink":"ConvertToTile";return{id:s,text:d.i18n.getText(s),press:function(e){var t={tile:e};if(i.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){t.callBack=e.callbackSetFocus.bind(e);o.publish("launchpad","convertTile",t)})})}else{o.publish("launchpad","convertTile",t)}}}},_getMoveTileAction:function(e){var t="moveTile_action";return{id:t,text:d.i18n.getText(t),press:function(t){this.tileType=this.oPageOperationAdapter.getTileType(e);var i=this.tileType==="tile";this.tileUuid=this.getModelTileById(this.oPageOperationAdapter.getTileId(e),i?"tiles":"links").uuid;var r=t.getParent().getProperty("groupId");var s=new o("groupId",M.NE,r);var n=function(e){var t=e.getParameter("value");var i=new o("title",M.Contains,t);var r=e.getSource().getBinding("items");r.filter([i,this.oGroupNotLockedFilter,s])}.bind(this);var a=i?this.moveTileDialog:this.moveLinkDialog;if(!a){a=this.createMoveActionDialog("move"+this.tileType+"Dialog");a.setModel(this.oModel);if(i){this.moveTileDialog=a}else{this.moveLinkDialog=a}}else{a.detachSearch(a._searchHandler)}a.getBinding("items").filter([this.oGroupNotLockedFilter,s]);a.attachSearch(n);a._searchHandler=n;a.open()}.bind(this)}},_handleTileAppearanceAnimation:function(e){if(!e){return}var t=["webkit",""];function i(i,o){for(var r=0;r<t.length;r++){o=o.toLowerCase();e.attachBrowserEvent(t[r]+o,function(t){if(t.originalEvent&&t.originalEvent.animationName==="sapUshellTileEntranceAnimation"){e.removeStyleClass("sapUshellTileEntrance")}},false)}}i(e,"AnimationEnd");e.addStyleClass("sapUshellTileEntrance")},destroy:function(){var i=e.getEventBus();i.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);i.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);i.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);i.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);i.unsubscribe("launchpad","resetGroup",this._resetGroup,this);i.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);i.unsubscribe("launchpad","moveGroup",this._moveGroup,this);i.unsubscribe("launchpad","deleteTile",this._deleteTile,this);i.unsubscribe("launchpad","movetile",this._moveTile,this);i.unsubscribe("launchpad","sortableStart",this._sortableStart,this);i.unsubscribe("launchpad","sortableStop",this._sortableStop,this);i.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.detachThemeChanged(u.handleTilesVisibility);S.forEach(function(e){e.off()});b.destroy();m.destroy();A=undefined;t.prototype.destroy.apply(this,arguments)},_sortableStart:function(){this.oSortableDeferred=new jQuery.Deferred},_createBookmark:function(e,t,i){var o=i.group?i.group.object:"";delete i.group;function r(){sap.ushell.Container.getServiceAsync("Bookmark").then(function(e){e.addBookmark(i,o).always(this._checkRequestQueue.bind(this)).done(function(){g.showLocalizedMessage("tile_created_msg")}).fail(function(e){_.error("Failed to add bookmark",e,"sap.ushell.ui.footerbar.AddBookmarkButton");g.showLocalizedError("fail_to_add_tile_msg")})}.bind(this))}this._addRequest(r.bind(this))},_addBookmarkToModel:function(e,t,i){var o=i.tile;var r=i.group;if(!i||!o){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate()}return}if(!r){var s=this.getModel().getProperty("/groups");for(var n=0;n<s.length;n++){if(s[n].isDefaultGroup===true){r=s[n].object;break}}}var a=this._getIndexOfGroupByObject(r);var l=this.oModel.getProperty("/groups/"+a);var d=this.oPageOperationAdapter.getPreparedTileModel(o,l.isGroupLocked);this.getTileView(d);l.tiles.push(d);l.visibilityModes=u.calcVisibilityModes(l,true);var p=l.tiles.length;this._updateModelWithTileView(a,p);this.oModel.setProperty("/groups/"+a,l)},_refreshGroupInModel:function(e,t,i){var o=this;this.oPageOperationAdapter.refreshGroup(i).then(function(e){if(!e){return}var t=o._getIndexOfGroupByObject(e.object);e.visibilityModes=u.calcVisibilityModes(e.object,true);o.oModel.setProperty("/groups/"+t,e);if(e.tiles){e.tiles.forEach(function(e){o.getTileView(e)})}})},_sortableStop:function(){this.oSortableDeferred.resolve()},_handleAfterSortable:function(e){return function(){var t=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){e.apply(null,t)})}.bind(this)},_createGroupAt:function(e,t,i){var o=parseInt(i.location,10);var r=this.oModel.getProperty("/groups");var s=this.oPageOperationAdapter.getPreparedGroupModel(null,false,o===r.length,i);var n=this.oModel;var a;s.index=o;r.splice(o,0,s);for(a=0;a<r.length-1;a++){r[a].isLastGroup=false}for(a=o+1;a<r.length;a++){r[a].index++}n.setProperty("/groups",r)},_getIndexOfGroupByObject:function(e){var t=this.oModel.getProperty("/groups");return this.oPageOperationAdapter.getIndexOfGroup(t,e)},getTileActions:function(e){return this.oPageOperationAdapter.getTileActions(e)},addTileToGroup:function(e,t){var i=e+"/tiles";var o=this.oModel.getProperty(e);var r=this.oModel.getProperty(i).length;var s=this.oModel.getProperty(e+"/isGroupLocked");var n=this.oModel.getProperty("/personalization");o.tiles[r]=this.oPageOperationAdapter.getPreparedTileModel(t,s);this.getTileView(o.tiles[r]);o.visibilityModes=u.calcVisibilityModes(o,n);this._updateModelWithTileView(o.index,r);this.oModel.setProperty(e,o)},addTilesToGroupByCatalogTileId:function(e,t){var i=e.getBindingContext();for(var o=0;o<t.length;o++){this.addTileToGroupByCatalogTileId(i.sPath,t[o])}},addTileToGroupByCatalogTileId:function(e,t){if(!l.last("/core/home/enableTransientMode")){return}var i=this.oPageOperationAdapter.getTileModelByCatalogTileId(t);if(!i){return}this.oDashboardLoadingManager.setTileResolved(i);var o=this.oModel.getProperty(e+"/tiles").length;var r=this.oModel.getProperty(e);r.tiles[o]=i;this.oModel.setProperty(e,r)},_getPathOfTile:function(e){var t=this.oModel.getProperty("/groups");for(var i=0;i<t.length;++i){var o=t[i];var r=o.tiles;var s=o.links;for(var n=0;n<r.length;++n){if(r[n].uuid===e){return"/groups/"+i+"/tiles/"+n}}for(var a=0;a<s.length;++a){if(s[a].uuid===e){return"/groups/"+i+"/links/"+a}}}return null},_moveInArray:function(e,t,i){if(i>=e.length){var o=i-e.length;while(o--+1){e.push(undefined)}}e.splice(i,0,e.splice(t,1)[0])},_updateGroupIndices:function(e){for(var t=0;t<e.length;t++){e[t].index=t}},_deleteGroup:function(t,i,o){var r=this.oModel;var s=o.groupId;var n=r.getProperty("/groups");var a=h.getIndexOfGroup(n,s);var l=n.length-1===a;var u=l?a-1:a;p.destroyFLPAggregationModel(r.getProperty("/groups/"+a));var d=n.splice(a,1)[0];if(l){r.setProperty("/groups/"+u+"/isLastGroup",l)}r.setProperty("/groups",n);this._updateGroupIndices(n);if(u>=0){window.setTimeout(function(){e.getEventBus().publish("launchpad","scrollToGroup",{groupId:r.getProperty("/groups")[u].groupId})},200)}function c(){this.oPageOperationAdapter.deleteGroup(d).then(function(){g.showLocalizedMessage("group_deleted_msg",[d.title]);this._checkRequestQueue()}.bind(this),function(){this._resetGroupsOnFailure("fail_to_delete_group_msg")}.bind(this))}this._addRequest(c.bind(this))},_resetGroup:function(t,i,o){var r=this;var s=o.groupId;var n=this.oModel;var l=n.getProperty("/groups");var d=h.getIndexOfGroup(l,s);var p=r.oModel.getProperty("/groups/indexOfDefaultGroup")===d;var c=n.getProperty("/groups/"+d);n.setProperty("/groups/"+d+"/sortable",false);function f(){r.oPageOperationAdapter.resetGroup(c,p).then(function(t){r._handleAfterSortable(function(t,i,o){var s=r.oModel.getProperty("/groups");var n=h.getIndexOfGroup(s,t);r._loadGroup(n,o||i);g.showLocalizedMessage("group_reset_msg",[i.title]);r.oModel.setProperty("/groups/"+n+"/sortable",true);var l=e.byId("dashboardGroups").getGroupControlByGroupId(t);var d=l.getBindingContext().getObject().links;if(d&&d.length&&!l.getIsGroupLocked()){r._changeGroupLinksScope(l.getBindingContext().getObject(),r.oModel.getProperty("/tileActionModeActive")?w.Actions:w.Display)}if(l){l.rerender();a.emit("updateGroups",Date.now());u.handleTilesVisibility()}})(s,c,t);r._checkRequestQueue()},function(){r._resetGroupsOnFailure("fail_to_reset_group_msg")})}this._addRequest(f)},_moveGroup:function(e,t,i){if(isNaN(i.fromIndex)){return}var o=i.fromIndex;var r=i.toIndex;var s=this.oModel;var n=s.getProperty("/groups");var a=s.getProperty("/tileActionModeActive");var l=this;if(!a){o=this._adjustFromGroupIndex(o,n)}var u=n[o];var d=u.groupId;if(!a){r=this._adjustToGroupIndex(r,n,d)}var p=n[r];this._moveInArray(n,o,r);this._updateGroupIndices(n);for(var g=0;g<n.length-1;g++){n[g].isLastGroup=false}n[n.length-1].isLastGroup=true;s.setProperty("/groups",n);function c(){n=s.getProperty("/groups");var e=s.getProperty(h.getModelPathOfGroup(n,d));if(!e.object){return}l.oPageOperationAdapter.getOriginalGroupIndex(p,n).then(function(t){var i={iFromIndex:o,iToIndex:r};return l.oPageOperationAdapter.moveGroup(e,t,i)}).then(l._checkRequestQueue.bind(l),function(){l._resetGroupsOnFailure("fail_to_move_group_msg")})}this._addRequest(c)},_adjustToGroupIndex:function(e,t,i){var o=0;var r=false;var s=0;for(s=0;s<t.length&&o<e;s++){if(t[s].isGroupVisible){if(t[s].groupId===i){r=true}else{o++}}}if(r){return s-1}return s},_adjustFromGroupIndex:function(e,t){var i=0;for(var o=0;o<t.length;o++){if(t[o].isGroupVisible){i++}if(i===e+1){return o}}return e},_changeGroupTitle:function(e,t,i){var o=this;var r=i.newTitle;var s=this.oModel.getProperty("/groups");var n=i.groupId;var a=h.getIndexOfGroup(s,n);var l=o.oModel.getProperty("/groups/indexOfDefaultGroup")===a;var u=this.oModel.getProperty("/groups/"+a);var d=u.title;this.oModel.setProperty("/groups/"+a+"/title",r);function p(){var e;if(u.isLastGroup){e=o.oPageOperationAdapter.addGroupAt(u,undefined,l)}else{var t=o.oModel.getProperty("/groups")[a+1];e=o.oPageOperationAdapter.getOriginalGroupIndex(t,s).then(function(e){return o.oPageOperationAdapter.addGroupAt(u,e,l)})}e.then(function(e){o._handleAfterSortable(function(e,t){var i=o.oModel.getProperty("/groups");var r=h.getIndexOfGroup(i,e);var s=i[r];Object.keys(t).forEach(function(e){if(e==="tiles"||e==="links"){return}s[e]=t[e]});o.oModel.refresh();o._checkRequestQueue()})(n,e)},function(){o._resetGroupsOnFailure("fail_to_create_group_msg")})}function g(){this.oPageOperationAdapter.renameGroup(u,r,d).then(function(){o._checkRequestQueue()},function(){o._resetGroupsOnFailure("fail_to_rename_group_msg")})}if(!u.object){this._checkRequestQueue();this._addRequest(p.bind(this))}else{this._addRequest(g.bind(this))}},addGroupToModel:function(e){var t=this.oPageOperationAdapter.getPreparedGroupModel(e,false,true,{isRendered:true});var i=this.oModel.getProperty("/groups");var o=i.length;if(o>0){i[o-1].isLastGroup=false}t.index=o;i.push(t);this.oModel.setProperty("/groups/",i);var r=new T(this.oModel,"/groups/"+o);return r},_deleteTile:function(t,o,r){var s=r.tileId;var n=this.oModel.getProperty("/groups");var a=r.items||"tiles";function l(e,t){this.oPageOperationAdapter.removeTile(e,t).then(this._checkRequestQueue.bind(this),this._resetGroupsOnFailure.bind(this,"fail_to_remove_tile_msg"))}function d(t,i,o){var r=e.byId("dashboardGroups");var s=r.getGroupControlByGroupId(i.groupId);var n;if(o==="tiles"){if(t+1===i[o].length){n=s.oPlusTile}}else{var a=s.getLinks();if(t+1===a.length){if(a.length===1){n=s.oPlusTile}else{n=a[t-1]}}else{n=a[t+1]}}if(n){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){e.moveScrollDashboard(n.$())})})}}for(var h=0;h<n.length;++h){var g=n[h];for(var c=0;c<g[a].length;++c){var f=g[a][c];if(f.uuid===s){if(i.system.desktop){d(c,g,a)}p.destroyTileModel(this.oModel.getProperty("/groups/"+h+"/"+a+"/"+c));var v=g[a].splice(c,1)[0];var b=this.oModel.getProperty("/personalization");g.visibilityModes=u.calcVisibilityModes(g,b);this.oModel.setProperty("/groups/"+h,g);this._addRequest(l.bind(this,g,v));u.handleTilesVisibility();return}}}},deleteTilesFromGroup:function(e,t){var i=this.oModel.getProperty("/groups");var o=h.getIndexOfGroup(i,e);var r=this.oModel.getProperty("/groups/"+o);var s=[];["tiles","links"].forEach(function(e){s=r[e].filter(function(e){if(t.indexOf(e.uuid)<0){return true}return false});r[e]=s});r.visibilityModes=u.calcVisibilityModes(r,true);this.oModel.setProperty("/groups/"+o,r)},_getGroupIndex:function(e){var t=this.oModel.getProperty("/groups");var i=this._getNewGroupInfo(t,e);if(i){return i.newGroupIndex}return undefined},_convertTile:function(e,t,i){var o=i.tile?i.tile:i;var r=i.srcGroupId?this._getGroupIndex(i.srcGroupId):undefined;var s=i.srcGroupId?this.oModel.getProperty("/groups/"+r):o.getParent().getBindingContext().getObject();var n=o.getBindingContext().sPath.split("/");var l=o.getBindingContext().getObject();var p=n[n.length-2];var h=l.uuid;var g=parseInt(n[n.length-1],10);var c=i.toIndex!==undefined?i.toIndex:undefined;var f=this.oModel.getProperty("/tileActionModeActive");var v=i.toGroupId?this._getGroupIndex(i.toGroupId):s.index;var b=i.toGroupId?this.oModel.getProperty("/groups/"+v):s;var m=this;var M=this._getIndexForConvert(p,g,c,s,b);var P={tileIndex:g,groupIndex:r,group:s};function T(){l.tileIsBeingMoved=true;var e=this.oPageOperationAdapter.moveTile(l,M,s,b,p==="links"?"tile":"link");e.then(function(e){m._handleAfterSortable(function(e,t){var o=m._getPathOfTile(e);var r=t.content;if(o){if(p==="tiles"){m._attachLinkPressHandlers(r);m._changeLinkScope(r,f?"Actions":"Display")}if(s===b){G.show(d.i18n.getText("PageRuntime.Message.VisualizationConverted"))}else{G.show(d.i18n.getText("PageRuntime.Message.VisualizationMovedAndConverted"))}var n={tileIndex:c,groupIndex:v,group:b};var h={tile:l,view:r,type:p,tileObj:t.object};l.tileIsBeingMoved=true;m.replaceTileViewAfterConvert(P,n,h);a.emit("updateGroups",Date.now());u.handleTilesVisibility();if(i.callBack){i.callBack(r)}}})(h,e);m._checkRequestQueue()},function(){m._handleAfterSortable(m._resetGroupsOnFailure.bind(m))("fail_to_move_tile_msg")})}this._addRequest(T.bind(this))},replaceTileViewAfterConvert:function(e,t,i){var o=i.tile;var r=o.content;o.tileIsBeingMoved=false;o.content=[i.view];o.object=i.tileObj;o.originalTileId=this.oPageOperationAdapter.getTileId(i.tileObj);e.group[i.type].splice(e.tileIndex,1);if(t.tileIndex!==undefined){t.group[i.type==="tiles"?"links":"tiles"].splice(t.tileIndex,0,o)}else{t.group[i.type==="tiles"?"links":"tiles"].push(o)}this.oModel.setProperty("/groups/"+t.groupIndex,t.group);this.oModel.setProperty("/groups/"+e.groupIndex,e.group);if(i.type==="links"){this._handleTileAppearanceAnimation(o.content[0].getParent())}else{this._handleTileAppearanceAnimation(o.content[0])}if(r&&r[0]){r[0].destroy()}},_getIndexForConvert:function(e,t,i,o,r){var s;if(e==="tiles"){if(i!==undefined){s=r[e].length+i}else{s=r[e].length+r.links.length}if(o.groupId===r.groupId){s--}}else{s=i||o.tiles.length;t+=o.tiles.length}return{tileIndex:t,newTileIndex:s}},_getIndexForMove:function(e,t,i,o,r){var s;if(e==="tiles"){s=i!==undefined?i:o[e].length}else{if(i!==undefined){s=o.tiles.length+i}else{s=o.tiles.length+o.links.length}t+=r.tiles.length}return{tileIndex:t,newTileIndex:s}},_getTileInfo:function(e,t,i){for(var o=0;o<e.length;++o){var r=e[o];for(var s=0;s<r[i].length;++s){var n=r[i][s];if(n.uuid===t){return{oTile:n,tileIndex:s,oGroup:r,groupIndex:o}}}}return},_getNewGroupInfo:function(e,t){for(var i=0;i<e.length;++i){var o=e[i];if(o.groupId===t){return{oNewGroup:o,newGroupIndex:i}}}return},_moveTile:function(e,t,i){var o=i.toIndex;var r=i.toGroupId;var s=i.sTileId;var n=i.source;var l=i.sTileType==="tiles"||i.sTileType==="tile"?"tile":"link";var p=i.sToItems;var h=i.sFromItems;var g=this.oModel.getProperty("/tileActionModeActive");var c=this.oModel.getProperty("/groups");var f=this._getTileInfo(c,s,h);var v=this._getNewGroupInfo(c,r);var b=this;var m=f.tileIndex===v.oNewGroup.tiles.length-1&&o>=v.oNewGroup.tiles.length;if((f.tileIndex===o||m)&&f.oGroup.groupId===v.oNewGroup.groupId){return}if(f.oGroup.groupId===v.oNewGroup.groupId&&(n==="movetileDialog"||o===null||n==="movelinkDialog")){if(i.callBack&&f.oTile&&f.oTile.content&&f.oTile.content.length){i.callBack(f.oTile.content[0])}return}if(l==="link"){f.oTile.content[0].addStyleClass("sapUshellZeroOpacity")}if(l==="tile"&&p==="tiles"){if(o&&o>v.oNewGroup[p].length){o=v.oNewGroup[p].length}}if(f.oGroup.groupId===r&&p===h){if(o===null||o===undefined){f.oGroup[p].splice(f.tileIndex,1);o=f.oGroup[p].length;f.oGroup[p].push(f.oTile)}else{o=this._adjustTileIndex(o,f.oTile,f.oGroup,p);this._moveInArray(f.oGroup[p],f.tileIndex,o)}this.oModel.setProperty("/groups/"+f.groupIndex+"/"+p,f.oGroup[p])}else{var M=this.oModel.getProperty("/personalization");f.oGroup[h].splice(f.tileIndex,1);f.oGroup.visibilityModes=u.calcVisibilityModes(f.oGroup,M);this.oModel.setProperty("/groups/"+f.groupIndex+"/"+h,f.oGroup[h]);if(o===null||o===undefined){o=v.oNewGroup[p].length;v.oNewGroup[p].push(f.oTile)}else{o=this._adjustTileIndex(o,f.oTile,v.oNewGroup,p);v.oNewGroup[p].splice(o,0,f.oTile)}v.oNewGroup.visibilityModes=u.calcVisibilityModes(v.oNewGroup,M);this.oModel.setProperty("/groups/"+v.newGroupIndex+"/"+p,v.oNewGroup[p])}a.emit("updateGroups",Date.now());u.handleTilesVisibility();function P(){var e=this.oModel.getProperty("/groups/"+f.groupIndex);var t=this.oModel.getProperty("/groups/"+v.newGroupIndex);var r=this._getIndexForMove(h,f.tileIndex,o,v.oNewGroup,e);f.oTile.tileIsBeingMoved=true;this.oPageOperationAdapter.moveTile(f.oTile,r,e,t,l).then(function(e){var t=b._getPathOfTile(s);if(t){b.oModel.setProperty(t+"/object",e.object);b.oModel.setProperty(t+"/originalTileId",e.originalTileId);var o=b.oModel.getProperty(t+"/content");var r=e.content;if(p==="links"){b._changeLinkScope(r,g?"Actions":"Display");b._attachLinkPressHandlers(r);b._handleTileAppearanceAnimation(r);f.oTile.content=[r];b.oModel.setProperty(t,y({},f.oTile));b.oModel.setProperty("/groups/"+v.newGroupIndex+"/"+p,b.oModel.getProperty("/groups/"+v.newGroupIndex+"/"+p))}else{b.oModel.setProperty(t+"/content",[r])}if(o&&o[0]){var n=r.onAfterRendering;r.onAfterRendering=function(){n.apply(this);o[0].destroy();r.onAfterRendering=n}}b.oModel.setProperty(t+"/tileIsBeingMoved",false);if(i.callBack){i.callBack(r)}G.show(d.i18n.getText("PageRuntime.Message.VisualizationMoved"))}b._checkRequestQueue()},function(){b._resetGroupsOnFailure("fail_to_move_tile_msg")})}this._addRequest(P.bind(this))},_adjustTileIndex:function(e,t,i,o){var r=0;var s=false;var n=0;for(n=0;n<i[o].length&&r<e;n++){if(i[o][n].isTileIntentSupported){if(i[o][n]===t){s=true}else{r++}}}if(s){return n-1}return n},getModel:function(){return this.oModel},getDashboardView:function(){return this.oDashboardView},setDashboardView:function(e){this.oDashboardView=e;return this},setTileVisible:function(e,t){this.oPageOperationAdapter.setTileVisible(e.object,t)},refreshTile:function(e){this.oPageOperationAdapter.refreshTile(e.object)},updateSettings:function(e){this.oModel=e.model||this.oModel;this.oConfig=e.config||this.oConfig;this.oRouter=e.router||this.oRouter;this.oDashboardView=e.view||this.oDashboardView},_resetGroupsOnFailure:function(e,t){this._requestFailed();g.showLocalizedError(e,t);this.bStartLoadRemainSegment=false;this.loadPersonalizedGroups();this.oModel.updateBindings(true)},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments)},_bindSegment:function(e,t){for(var i=0;i<t.length;i++){var o=t[i];var r=o.index;var s=e[r];if(s){s.isRendered=true;s.tiles=s.tiles.concat(o.tiles);s.links=s.links.concat(o.links)}}return e},createGroupsModelFrame:function(e,t){var i=[];var o=function(e){var t=y({},e);t.tiles=[];t.pendingLinks=[];t.links=[];return t};for(var r=0;r<e.length;r++){var s=e[r];i[r]=o(s);i[r].isRendered=false;i[r].visibilityModes=u.calcVisibilityModes(s,t)}return i},_splitGroups:function(e,t){var i=[];var o=0;var r=this.oModel.getProperty("/homePageGroupDisplay")==="tabs";var s=this.oModel.getProperty("/personalization");var n=0;var a=500;for(var l=0;l<e.length;l++){var u=e[l];i.push(u);if(!this.segmentsStore.length){o+=this.PagingManager.getGroupHeight(u,t===l,s)}else{n+=u.tiles.length+u.links.length}if(r&&!this.segmentsStore.length&&o>0){i.loadTilesView=true;this.segmentsStore.push(i);i=[];o=0}if(o>=1||n>=a){this.segmentsStore.push(i);i=[];o=0;n=0}}if(i.length){this.segmentsStore.push(i)}},_processSegment:function(e){var t=this.segmentsStore.shift();if(!t){return e}if(this.isBlindLoading()===false){if(this.oModel.getProperty("/homePageGroupDisplay")!=="tabs"||t.loadTilesView){this.getSegmentContentViews(t)}}e=this._bindSegment(e,t);return e},getSegmentContentViews:function(e){var t;var i;for(var o=0;o<e.length;o++){var r=e[o];for(t=0;t<r.tiles.length;t++){i=r.tiles[t];if(i.isTileIntentSupported){this.getTileView(i)}}for(t=0;t<r.links.length;t++){i=r.links[t];if(i.isTileIntentSupported){this.getTileView(i,r.index)}}}this.bIsFirstSegmentViewLoaded=true},getSegmentTabContentViews:function(e,t,i){var o;var r;var s=i.iSelectedGroup;var n=this.oModel.getProperty("/groups/"+s);for(o=0;o<n.tiles.length;o++){r=n.tiles[o];if(r.isTileIntentSupported){this.getTileView(r)}}for(o=0;o<n.links.length;o++){r=n.links[o];if(r.isTileIntentSupported){this.getTileView(r,s)}}},_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups()},_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate()}},handleFirstSegmentLoaded:function(){var e=this.oModel.getProperty("/groups");if(this.aGroupsFrame){Array.prototype.push.apply(e,this.aGroupsFrame);this.aGroupsFrame=null}this._initializeAnchorNavigationBar();if(!this.bStartLoadRemainSegment){this._processRemainingSegments()}},_initializeAnchorNavigationBar:function(){var e=A.getDashboardView();var t=e.getAnchorItemTemplate();this.oDashboardView.oAnchorNavigationBar.bindAggregation("groups",{path:"/groups",template:t})},_processRemainingSegments:function(){var t;if(this.segmentsStore.length>0){window.setTimeout(function(){t=this._processSegment(this.oModel.getProperty("/groups"));this.oModel.setProperty("/groups",t);this.bIsFirstSegment=false;this._processRemainingSegments()}.bind(this),0)}else{this.bIsGroupsModelLoading=false;this._updateModelWithTileView(0,0);u.handleTilesVisibility();e.getEventBus().publish("launchpad","dashboardModelContentLoaded");a.emit("updateGroups",Date.now())}},tabsModeVisibilityChanged:function(){if(this.bIsFirstSegmentViewLoaded===false&&this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){this.oDashboardLoadingManager.manageTilesView();this.bIsFirstSegmentViewLoaded=true;a.emit("firstSegmentCompleteLoaded",true)}},_setGroupModel:function(e){if(this.bIsGroupsModelLoading){_.info("Skip set the group model, because the group model is still loading");return}var t=0;var i;var o=0;var r=0;var n=0;var l=null;var d=[];this.bIsGroupsModelLoading=true;try{o=this.oModel.getProperty("/groups").length}catch(e){}for(t=e.length;t<o;++t){p.destroyFLPAggregationModel(this.oModel.getProperty("/groups/"+t))}if(!this.PagingManager){var h=jQuery("#dashboardGroups").width();if(!h){h=window.innerWidth}var g=jQuery("#sapUshellDashboardPage-cont").height();if(g<100){g=window.innerHeight}this.PagingManager=new s("dashboardPaging",{supportedElements:{tile:{className:"sapUshellTile"},link:{className:"sapUshellLinkTile"}},containerHeight:g,containerWidth:h})}e.forEach(function(e){if(e.isGroupVisible){r+=e.tiles.length}});this.bIsScrollModeAccordingKPI=r>this.iMinNumOfTilesForBlindLoading;this.aGroupsFrame=this.createGroupsModelFrame(e,this.oModel.getProperty("/personalization"));for(t=0;t<this.aGroupsFrame.length;t++){if(this.aGroupsFrame[t].isGroupVisible&&this.aGroupsFrame[t].visibilityModes[0]){if(l===null){l=t;this.aGroupsFrame[t].isGroupSelected=true;this.oModel.setProperty("/iSelectedGroup",t)}n++;if(n>1){this.aGroupsFrame[l].showGroupHeader=false;break}}}this._splitGroups(e,l);var c=this.segmentsStore[0]?this.segmentsStore[0].length:0;var f=this.aGroupsFrame.splice(0,c);I.start("FLP:DashboardManager._processSegment","_processSegment","FLP");d=this._processSegment(f);e.every(function(e,t){if(e.isDefaultGroup){i=t;return false}return true});d.indexOfDefaultGroup=i;if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){var v=this.getDashboardView();if(v){var b=v.oDashboardGroupsBox;var m=b.getBinding("groups");if(m){m.filter([v.oFilterSelectedGroup])}}}I.end("FLP:DashboardManager._processSegment");this.oModel.setProperty("/groups",d);this.aGroupModel=d;if(this.oDashboardView){a.once("firstSegmentCompleteLoaded").do(function(){u.setPerformanceMark("FLP-TTI-Homepage",{bUseUniqueMark:true})}).do(this.handleFirstSegmentLoaded.bind(this))}else{setTimeout(function(){Array.prototype.push.apply(this.aGroupModel,this.aGroupsFrame);this.aGroupsFrame=null;this.bStartLoadRemainSegment=true;this._processRemainingSegments()}.bind(this),0)}if(this.bIsFirstSegmentViewLoaded){a.emit("firstSegmentCompleteLoaded",true)}I.end("FLP:DashboardManager.loadGroupsFromArray")},getPreparedGroupModel:function(){return this.aGroupModel},_loadGroup:function(e,t){var i=this;var o="/groups/"+e;var r=i.oModel.getProperty(o);var s=r.isLastGroup;var n=r.groupId;p.destroyFLPAggregationModel(r);if(n){t.groupId=n}t.isLastGroup=s;t.index=e;t.isRendered=true;this.oModel.setProperty(o,t)},_hasPendingLinks:function(e){for(var t=0;t<e.length;t++){if(e[t].content[0]===undefined){return true}}return false},_addModelToTileViewUpdateQueue:function(e,t){this.tileViewUpdateQueue.push({uuid:e,view:t})},_updateModelWithTileView:function(e,t){var i=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID)}this.tileViewUpdateTimeoutID=window.setTimeout(function(){i.tileViewUpdateTimeoutID=undefined;i.oSortableDeferred.done(function(){i._updateModelWithTilesViews(e,t)})},50)},_updateGroupModelWithTilesViews:function(e,t,i,o){var r=t||0;for(var s=r;s<e.length;s=s+1){var n=e[s];for(var a=0;a<this.tileViewUpdateQueue.length;a++){var l=this.tileViewUpdateQueue[a];if(n.uuid===l.uuid){i.push(a);if(l.view){if(o){n.content=[l.view]}else{n.content[0].destroy();n.content=[l.view]}this.oDashboardLoadingManager.setTileResolved(n);var u=this.oPageOperationAdapter.getTileSize(n.object);var d=u!==null&&u==="1x2"||false;if(n.long!==d){n.long=d}}else{n.content[0].setState("Failed")}break}}}},_updateModelWithTilesViews:function(e,t){var i=this.oModel.getProperty("/groups");var o=e||0;var r=[];if(!i||this.tileViewUpdateQueue.length===0){return}for(var s=o;s<i.length;s=s+1){this._updateGroupModelWithTilesViews(i[s].tiles,t,r);if(i[s].links){this._updateGroupModelWithTilesViews(i[s].links,t,r,true);if(i[s].pendingLinks.length>0){if(!i[s].links){i[s].links=[]}i[s].links=i[s].links.concat(i[s].pendingLinks);i[s].pendingLinks=[]}}}var n=[];var a;for(a=0;a<this.tileViewUpdateQueue.length;a++){if(r.indexOf(a)===-1){n.push(this.tileViewUpdateQueue[a])}}this.tileViewUpdateQueue=n;this.oModel.setProperty("/groups",i)},getModelTileById:function(e,t){var i=this.oModel.getProperty("/groups");var o;var r=false;i.every(function(i){i[t].every(function(t){if(t.uuid===e||t.originalTileId===e){o=t;r=true}return!r});return!r});return o},_attachLinkPressHandlers:function(t){var i=e.getEventBus();var o=t.attachPress?t:t.getContent()[0];o.attachPress(function(e){var o=t.getBindingContext().getObject().tileIsBeingMoved;if(!o&&this.getScope&&this.getScope()==="Actions"){switch(e.getParameters().action){case"Press":var r=t.getState?t.getState():"";if(r!=="Failed"){var s=sap.ui.require("sap/ushell/components/homepage/ActionMode");if(s){s._openActionsMenu(e)}else{_.error("Race condition occurred! - sap/ushell/components/homepage/ActionMode was not required in time.")}}break;case"Remove":var n=t.getBindingContext().getObject().uuid;i.publish("launchpad","deleteTile",{tileId:n,items:"links"});break;default:break}}else{i.publish("launchpad","dashboardTileLinkClick")}})},handleDisplayModeChange:function(e){this.oModel.setProperty("/homePageGroupDisplay",e);switch(e){case"scroll":this._handleDisplayModeChangeToScroll();break;case"tabs":this._handleDisplayModeChangeToTabs();break}},_handleDisplayModeChangeToTabs:function(){var e=this.oModel.getProperty("/iSelectedGroup");var t=this.oModel.getProperty("/groups");this.oDashboardLoadingManager.manageTilesView();if(t.length>0){for(var i=0;i<t.length;i++){this.oModel.setProperty("/groups/"+i+"/isGroupSelected",false)}this.oModel.setProperty("/groups/"+e+"/isGroupSelected",true)}},_handleDisplayModeChangeToScroll:function(){if(this.isBlindLoading()){return}var t=this.oModel.getProperty("/groups");var i=[];var o;for(var r=0;r<t.length;r++){var s=t[r];var n=s.tiles||[];for(o=0;o<n.length;o++){var a=n[o];if(a.content.length===0){this.getTileView(a,r)}}i=s.links||[];for(o=0;o<i.length;o++){this.getTileView(i[o],r)}}this.oModel.refresh(false);var l=this.oModel.getProperty("/iSelectedGroup");if(l){setTimeout(function(){e.getEventBus().publish("launchpad","scrollToGroup",{groupId:t[l].groupId})},100)}},getTileViewsFromArray:function(e){var t=this;if(e.length===0){return}e.forEach(function(e){t.getTileView(e.oTile,e.iGroup)});this.oModel.refresh(false);if(this.bIsFirstSegmentViewLoaded===false){this.bIsFirstSegmentViewLoaded=true;a.emit("firstSegmentCompleteLoaded",true)}},getTileView:function(e,t){var i=this.oPageOperationAdapter.getTileType(e.object);if(this.oDashboardLoadingManager.isTileViewRequestIssued(e)){return}this.oDashboardLoadingManager.setTileInProgress(e);this.oPageOperationAdapter.setTileVisible(e.object,false);if(i==="card"){this._loadCardData(e)}else{this._loadTileData(e,t,i)}},_loadCardData:function(t){var i=e.byId(t.controlId);if(i&&i.setManifest&&this.isBlindLoading()){i.setManifest(t.manifest)}t.content=[t.manifest];this.oDashboardLoadingManager.setTileResolved(t)},getCurrentHiddenGroupIds:function(e){return this.oPageOperationAdapter.getCurrentHiddenGroupIds(e)},_loadTileData:function(e,t,i){var o=this;var s=this.oPageOperationAdapter.getTileView(e);var n;var a=this._addModelToTileViewUpdateQueue;var l;var u=false;var d=e.uuid;var p=false;if(s.state()==="resolved"){p=true}s.done(function(i){if(i.oController&&i.oController.navigationTargetUrl&&!e.isCustomTile){e.target=i.oController.navigationTargetUrl}l=i;if(l.getComponentInstance){I.average("FLP:getComponentInstance","get info for navMode","FLP1");var r=l.getComponentInstance().getComponentData();if(r&&r.properties){e.navigationMode=r.properties.navigationMode}I.end("FLP:getComponentInstance")}o.oDashboardLoadingManager.setTileResolved(e);var s=i.getMode?i.getMode():"ContentMode";if(o.bLinkPersonalizationSupported&&s==="LineMode"){o._attachLinkPressHandlers(l);if(t>=0){var h=o.oModel.getProperty("/groups");if(h[t]){e.content=[l];n=o.oModel.getProperty("/groups/"+t+"/links");o.oModel.setProperty("/groups/"+t+"/links",[]);o.oModel.setProperty("/groups/"+t+"/links",n)}}}else if(o.isBlindLoading()){if(e.content&&e.content.length>0){e.content[0].destroy()}e.content=[l];if(t>=0&&!p){o.oModel.refresh(false)}}if(o.isBlindLoading()){var g=o.oPageOperationAdapter.getTileSize(e.object);var c=g==="1x2";if(e.long!==c){e.long=c}}else if(s==="LineMode"){e.content=[l];if(u){n=o.oModel.getProperty("/groups/"+t+"/links");o.oModel.setProperty("/groups/"+t+"/links",[]);o.oModel.setProperty("/groups/"+t+"/links",n)}}else if(e.content.length===0){e.content=[l]}else{a.apply(o,[d,l]);o._updateModelWithTileView(0,0)}});s.fail(function(){if(o.oPageOperationAdapter.getTileType(e.object)==="link"&&o.bLinkPersonalizationSupported){l=o.oPageOperationAdapter.getFailedLinkView(e);o._attachLinkPressHandlers(l)}else{l=new r({state:"Failed"})}e.content=[l]});if(!l){if(o.oPageOperationAdapter.getTileType(e.object)==="link"){u=true;l=new c({mode:"LineMode"})}else{l=new r}e.content=[l]}},loadLibraryForCardModuleIfNeeded:function(){if(k.last("/core/home/featuredGroup/enable")){return e.loadLibrary("sap.ui.integration",{async:true})}return Promise.resolve()},loadPersonalizedGroups:function(){var e=this;var t=new jQuery.Deferred;if(this.bIsGroupsRequestPending){_.info("loadPersonalizedGroups was skipped because there is already a pending request.");t.reject();return t.promise()}this.bIsGroupsRequestPending=true;this.oServiceLoadingPromise.then(e.loadLibraryForCardModuleIfNeeded).then(function(){return e.oPageOperationAdapter.getPage()}).then(function(i){e._setGroupModel(i);e.bIsGroupsRequestPending=false;t.resolve()}).catch(function(t){_.error("Loading of personalized groups failed.",t,"sap.ushell.components.HomepageManager");g.showLocalizedError("fail_to_load_groups_msg");e.bIsGroupsRequestPending=false});I.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return t.promise()}});O.prototype.getInstance=function(){return A};return O});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/MessagingHelper", ["sap/ushell/resources"],function(e){"use strict";return{getLocalizedText:n,showLocalizedError:t,showLocalizedErrorHelper:o,showLocalizedMessage:s};function n(n,s){return e.i18n.getText(n,s)}function s(e,s,t){sap.ushell.Container.getServiceAsync("Message").then(function(o){o.show(t||o.Type.INFO,n(e,s),s)})}function t(e,s){sap.ushell.Container.getServiceAsync("Message").then(function(t){t.show(t.Type.ERROR,n(e,s),s)})}function o(e,n){return function(){t(e,n)}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/SharedComponentUtils", ["sap/ui/Device","sap/ushell/Config","sap/ushell/UserActivityLog","sap/base/Log","sap/ui/core/Component"],function(e,t,n,i,r){"use strict";var s={PERS_KEY:"flp.settings.FlpSettings",bFlpSettingsAdded:false,toggleUserActivityLog:function(){t.on("/core/extension/SupportTicket").do(function(e){if(e){n.activate()}else{n.deactivate()}})},initializeAccessKeys:function(){if(e.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e,t){e.getInstance().then(function(e){t.registerAppKeysHandler(e.handleFocusOnMe)})})}},getEffectiveHomepageSetting:function(e,n){if(t.last(n)===false){return Promise.resolve(t.last(e))}var i=e.split("/").pop();return this._getPersonalization(i).then(function(n){if(typeof n==="undefined"){return t.last(e)}t.emit(e,n);return n}).catch(function(){return t.last(e)})},_getPersonalization:function(e){return s.getPersonalizer(e,sap.ushell.Container.getRenderer("fiori2")).then(function(t){return new Promise(function(n,r){t.getPersData().done(n).fail(function(t){i.error("Failed to load "+e+" from the personalization",t,"sap.ushell.components.flp.settings.FlpSettings");r()})})})},getPersonalizer:function(e,t){return sap.ushell.Container.getServiceAsync("Personalization").then(function(n){var i=r.getOwnerComponentFor(t);var s={keyCategory:n.constants.keyCategory.FIXED_KEY,writeFrequency:n.constants.writeFrequency.LOW,clientStorageAllowed:true};var o={container:this.PERS_KEY,item:e};return n.getPersonalizer(o,s,i)}.bind(this))}};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/StateHelper", [],function(){"use strict";function e(e){var a=[],n;e=e||[];for(n=0;n<e.length;n++){if(e[n]!==undefined){if(e[n]!=="home"&&e[n]!=="app"){throw new Error("sLaunchpadState value is invalid")}a.push(e[n])}}if(!a.length){a=["app","home"]}return a}function a(e,a){var n=[];if(e==="app"&&!a){var t=["app","minimal","standalone","embedded","headerless","merged","blank","lean"];n=n.concat(t)}else if(e==="home"&&!a){var r=["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"];n=n.concat(r)}else{n.push(e)}return n}function n(n,t){var r=t?n:e(n);return r.reduce(function(e,n){var r=a(n,t);if(r){e=e.concat(r)}return e},[])}return{getAllStateToUpdate:n,getModelStates:a,getPassStates:e}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/AddHeadEndItemsStrategy", ["sap/base/Log"],function(e){"use strict";function t(t,n){var r=0,i,o;if(!t||!n){return false}var u=n.some(function(t){var n=!sap.ui.getCore().byId(t);if(n){e.warning("Failed to find control with id '{id}'".replace("{id}",t))}return n});if(u){return false}if(n.length===1&&n[0]==="endItemsOverflowBtn"){return true}for(i=0;i<t.length;i++){o=t[i];if(o!=="endItemsOverflowBtn"){r++}if(r+n.length>10){e.warning("maximum of six items has reached, cannot add more items.");return false}if(n.indexOf(o)>-1){return false}}return true}function n(e,t){var n=e.concat(t);var r={sf:-3,copilotBtn:-1,NotificationsCountButton:1,endItemsOverflowBtn:2,userActionsMenuHeaderButton:3,productSwitchBtn:4};n.sort(function(e,t){var n=r[e]||0,i=r[t]||0;if(n===i){return e.localeCompare(t)}return n-i});return n}function r(e,r){var i=e;if(t(e,r)){i=n(e,r)}return i}return{execute:r}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/AddHeadItemsStrategy", [],function(){"use strict";function n(n,t){return n.indexOf(t)===-1?n.concat(t):n}function t(t,e){return e.reduce(n,t)}function e(n){return function(t){return n.indexOf(t)===-1}}function r(n,r){return t(n,r.filter(e(["backBtn"]))).length<=3}function i(n,t){var e=[],r=n.concat(t);if(n.indexOf("backBtn")>-1||t.indexOf("backBtn")>-1){e.push("backBtn")}if(e.length<3){for(var i=0;i<r.length;i++){var u=r[i];if(e.indexOf(u)===-1){e.push(u)}if(e.length>=3){break}}}return e}function u(n,t){var e=n;if(r(n,t)){e=i(n,t)}return e}return{execute:u}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/ControlManager", ["sap/m/Avatar","sap/m/library","sap/ui/Device","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/shell/ShellHeadItem"],function(e,t,s,n,i,r){"use strict";var a=t.AvatarSize;var o=[];function u(e,t,s){o.push(p(s))}function l(){o.forEach(function(e){var t=sap.ui.getCore().byId(e);if(t){if(t.destroyContent){t.destroyContent()}t.destroy()}});o=[]}function p(t){var s="userActionsMenuHeaderButton",r=sap.ushell.Container.getUser(),o=i.i18n.getText("UserActionsMenuToggleButtonAria",r.getFullName());var u=new e({id:s,src:"{/userImage/personPlaceHolder}",initials:r.getInitials(),ariaHasPopup:"Menu",displaySize:a.XS,tooltip:o,press:function(){n.emit("showUserActionsMenu",Date.now())}});u.setModel(t);return s}return{init:u,destroy:l}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/ExtendApplicationPropertyStrategy", ["sap/base/util/deepExtend"],function(e){"use strict";function t(t,n){if(!n){n={}}return e({},t,n)}return{execute:t}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/PropertyStrategiesFactory", ["./AddHeadItemsStrategy","./AddHeadEndItemsStrategy","./ExtendApplicationPropertyStrategy","./RemoveItemsStrategy","./SetHeadPropertyStrategy"],function(e,a,t,r,i){"use strict";return function(s,c){var n;switch(s){case"headItems":if(c==="remove"){n=r}else{n=e}break;case"headEndItems":if(c==="remove"){n=r}else{n=a}break;case"homeUri":case"showLogo":case"headerVisible":case"centralAreaElement":case"title":n=i;break;case"application":n=t;break;case"application/hierarchy":case"application/icon":case"application/relatedApps":case"application/title":n=i;break;default:n=null;break}return n}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/RemoveItemsStrategy", ["sap/base/Log"],function(e){"use strict";function n(e,n){return n.some(function(n){return e.indexOf(n)>=0})}function t(e,n){return e.filter(function(e){return n.indexOf(e)===-1})}function i(i,r){var u=i;if(n(i,r)){u=t(i,r)}else{e.warning("You cannot remove item: "+r+", the item does not exists.")}return u}return{execute:i}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/SetHeadPropertyStrategy", [],function(){"use strict";function n(n){return n!==undefined}function e(e,u){if(n(u)){return u}return e}return{execute:e}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/ShellHeader.controller", ["sap/m/library","sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/ui/shell/OverflowListItem"],function(e,t,i,n,a,r,o,s,l){"use strict";var u=e.ListType;var d=s.FloatingNumberType;return t.extend("sap.ushell.components._HeaderManager.ShellHeader",{onInit:function(){this.aDoables=[];this.aDoables.push(o.on("navigateBack").do(this.pressNavBackButton.bind(this)));this.aDoables.push(o.on("showEndItemOverflow").do(this.pressEndItemsOverflow.bind(this)));this.aDoables.push(o.on("navigateFromShellApplicationNavigationMenu").do(this.navigateFromShellApplicationNavigationMenu.bind(this)))},shellUpdateAggItem:function(e,t){return sap.ui.getCore().byId(t.getObject())},pressNavBackButton:function(){o.emit("showUserActionsMenu",false);a.service().navigateBack()},pressEndItemsOverflow:function(e){var t=sap.ui.getCore().byId("headEndItemsOverflow"),i=sap.ui.getCore().byId(e),a=Promise.resolve(),s;if(!i){return}if(!t){a=new Promise(function(e,t){sap.ui.require(["sap/ui/core/Fragment"],function(i){i.load({name:"sap.ushell.renderers.fiori2.HeadEndItemsOverflowPopover",type:"XML",controller:this}).then(e).catch(t)}.bind(this),t)}.bind(this)).then(function(e){t=e;var i=sap.ui.getCore().byId("headEndItemsOverflowList");i.enhanceAccessibilityState=function(e,t){if(e.getFloatingNumberType()!==d.None){t.describedby=e._oAriaDescribedbyText.getId()}return t};s=new n({headEndItems:r.last("/core/shellHeader/headEndItems")});t.setModel(s)})}a.then(function(){if(t.isOpen()){t.close()}else{if(sap.ui.getCore().byId("shellNotificationsPopover")){o.emit("showNotifications",false)}t.openBy(i)}})},headEndItemsOverflowItemFactory:function(e,t){var i=sap.ui.getCore().byId(t.getObject());var n=i.getBindingPath("floatingNumber");var a=i.getText();var r=i.getTooltip();var o=new l({id:e+"-"+i.getId(),icon:i.getIcon(),iconInset:true,tooltip:r!==a?r:null,title:a,type:u.Active,floatingNumber:n?{path:n}:undefined,floatingNumberMaxValue:i.getFloatingNumberMaxValue(),floatingNumberType:i.getFloatingNumberType(),press:function(){if(i){i.firePress();var e=i.getTarget();if(e){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.toExternal({target:{shellHash:e}})})}}var t=sap.ui.getCore().byId("headEndItemsOverflow");if(t.isOpen()){t.close()}}});if(i._oAriaLabel){o.addAriaLabelledBy(i._oAriaLabel)}if(n){o.setModel(i.getModel())}return o},destroyHeadEndItemsOverflow:function(e){e.getSource().destroy()},isHeadEndItemInOverflow:function(e){return e!=="ENDITEMSOVERFLOWBTN"&&!this.isHeadEndItemNotInOverflow(e)},isHeadEndItemNotInOverflow:function(e){var t=this.isHeadEndItemOverflow();var n=i.media.getCurrentRange(i.media.RANGESETS.SAP_STANDARD).name;if(e==="ENDITEMSOVERFLOWBTN"){return t}if(!t){return true}if(["USERACTIONSMENUHEADERBUTTON","BACKBTN"].indexOf(e)>-1){return true}if(n==="Phone"){return false}if(["SF","FLOATINGCONTAINERBUTTON"].indexOf(e)>-1){return true}if(n==="Desktop"&&e==="COPILOTBTN"){return true}return false},isHeadEndItemOverflow:function(){var e=0,t,n=r.last("/core/shellHeader/headEndItems");if(n.indexOf("endItemsOverflowBtn")===-1){return false}var a=i.media.getCurrentRange(i.media.RANGESETS.SAP_STANDARD).name;var o=3;if(a==="Phone"){o=1}for(var s=0;s<n.length;s++){t=sap.ui.getCore().byId(n[s]);if(t&&t.getVisible()){e++}}if(sap.ui.getCore().byId("endItemsOverflowBtn").getVisible()){return e>o+1}return e>o},navigateFromShellApplicationNavigationMenu:function(e){if(window.hasher.getHash()!==e.substr(1)){o.emit("centerViewPort",Date.now());window.hasher.setHash(e)}var t=sap.ui.getCore().byId("shellAppTitle");if(t){t.close()}},onExit:function(){this.aDoables.forEach(function(e){e.off()})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/DashboardLoadingManager", ["sap/base/util/deepExtend","sap/ui/base/Object","sap/ui/performance/Measurement"],function(e,i,s){"use strict";var t=i.extend("sap.ushell.components._HomepageManager.DashboardLoadingManager",{metadata:{},constructor:function(e,i){var s=sap.ui.getCore().getEventBus();this.currentVisibleTiles=[];this.aRefreshTiles=[];this.oBusyIndicatorTiles={};this.oActiveDynamicTiles={};this.oResolvedTiles={};this.oInProgressTiles={};this.oDashboardManager=i.oDashboardManager;s.subscribe("launchpad","visibleTilesChanged",this._onVisibilityChanged,this);s.subscribe("launchpad","dashboardTileClick",this._addTileToRefreshArray,this);s.subscribe("launchpad","refreshTiles",this._refreshTiles,this);s.subscribe("launchpad","setTilesNoVisibility",this._setTilesNoVisibility,this);s.subscribe("launchpad","onHiddenTab",this._setTilesNoVisibility,this)},_onVisibilityChanged:function(e,i,s){this.currentVisibleTiles=s;if(this.oDashboardManager.isBlindLoading()){this.manageTilesView()}this.oDashboardManager.tabsModeVisibilityChanged();this.manageBusyIndicatorTiles();this.manageDynamicTiles()},manageDynamicTiles:function(){s.average("DashboardLoadingManagerActiveDynamicTile","Manage Active Dynamic Tiles","FLP_SHELL");var i;var t;var a={};var n=e({},this.oActiveDynamicTiles);for(var r=0;r<this.currentVisibleTiles.length;r++){var l=this.currentVisibleTiles[r];if(!l.bIsExtanded){delete n[l.oTile.uuid]}}for(var o in n){i=this.oActiveDynamicTiles[o];t=i.object;this.oDashboardManager.setTileVisible(i,false)}for(var u=0;u<this.currentVisibleTiles.length;u++){var h=this.currentVisibleTiles[u];if(!h.bIsExtanded){i=h.oTile;t=i.object;if(this.oActiveDynamicTiles[i.uuid]===undefined&&t){this.oDashboardManager.setTileVisible(i,true)}a[i.uuid]=i}}this.oActiveDynamicTiles=a;s.end("DashboardLoadingManagerActiveDynamicTile")},isTileViewRequestIssued:function(e){if(this.oInProgressTiles[e.uuid]===undefined&&this.oResolvedTiles[e.uuid]===undefined){return false}return true},manageBusyIndicatorTiles:function(){s.average("DashboardLoadingManagerBusyIndicators","Manage Busy Indicators on Tiles","FLP_SHELL");var e,i,t,a,n=[],r,l=[];for(i in this.oBusyIndicatorTiles){r=true;a=this.oBusyIndicatorTiles[i];if(this.oResolvedTiles[i]===undefined){for(var o=0;o<this.currentVisibleTiles.length;o++){if(this.currentVisibleTiles[o].oTile.uuid===a.oTile.uuid){r=false;break}}if(r){n.push(a)}}}for(e=0;e<this.currentVisibleTiles.length;e++){t=this.currentVisibleTiles[e];if(this.oBusyIndicatorTiles[t.oTile.uuid]===undefined&&this.oResolvedTiles[t.oTile.uuid]===undefined){l.push(t)}}for(e=0;e<n.length;e++){t=n[e];if(t.oTile.content[0]&&t.oTile.content[0].setState){if(t.oTile.content[0].getState){if(t.oTile.content[0].getState()!=="Failed"){t.oTile.content[0].setState()}}else{t.oTile.content[0].setState()}}delete this.oBusyIndicatorTiles[t.oTile.uuid]}for(e=0;e<l.length;e++){t=l[e];if(t.oTile.content[0]&&t.oTile.content[0].setState){if(t.oTile.content[0].getState){if(t.oTile.content[0].getState()!=="Failed"){t.oTile.content[0].setState("Loading")}}else{t.oTile.content[0].setState("Loading")}}this.oBusyIndicatorTiles[t.oTile.uuid]=t}s.end("DashboardLoadingManagerBusyIndicators")},setTileInProgress:function(e){this.oInProgressTiles[e.uuid]=e},setTileResolved:function(e){delete this.oInProgressTiles[e.uuid];this.oResolvedTiles[e.uuid]=e},_addTileToRefreshArray:function(e,i,s){this.aRefreshTiles.push(s.uuid)},_refreshTiles:function(){for(var e=0;e<this.currentVisibleTiles.length;e++){var i=this.currentVisibleTiles[e].oTile;var s=i.object;if(s){for(var t=0;t<this.aRefreshTiles.length;t++){if(i.uuid===this.aRefreshTiles[t]){this.aRefreshTiles.splice(t,1);this.oDashboardManager.setTileVisible(i,true);this.oDashboardManager.refreshTile(i);break}}}}},_setTilesNoVisibility:function(){for(var e=0;e<this.currentVisibleTiles.length;e++){var i=this.currentVisibleTiles[e].oTile;var s=i.object;if(s){this.oDashboardManager.setTileVisible(i,false)}delete this.oActiveDynamicTiles[i.uuid]}},manageTilesView:function(){var e,i,s=[];for(e=0;e<this.currentVisibleTiles.length;e++){i=this.currentVisibleTiles[e];if(this.oInProgressTiles[i.oTile.uuid]===undefined&&this.oResolvedTiles[i.oTile.uuid]===undefined){s.push(i)}}this.oDashboardManager.getTileViewsFromArray(s)}});return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/PagingManager", ["sap/ui/base/Object","sap/ui/Device","sap/ushell/Config"],function(e,t,i){"use strict";var n=7;var h=e.extend("sap.ushell.components._HomepageManager.PagingManager",{metadata:{publicMethods:["setElementClass","GetGroupHeight","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(e,t){this.currentPageIndex=0;this.containerHeight=t.containerHeight||0;this.containerWidth=t.containerWidth||0;this.supportedElements=t.supportedElements||"";this.tileHeight=0;this.tileSize={sapUshellTile:{width:100,height:100},sapUshellLinkTile:{width:40,height:20},default:{width:40,height:20}}},getTileHeight:function(){return this.tileHeight},setElementClass:function(e){this.supportedElements=e},_getTileHeight:function(e){return e?148:176},_getTileWidth:function(e,t){if(e){return t?304:360}return t?148:176},getGroupHeight:function(e,h,s){if(!e||e.isGroupVisible===false){return 0}var r=e.tiles,a=e.links,l=t.system.phone||i.last("/core/home/sizeBehavior")==="Small",o=this._getTileWidth(false,l),u=this._getTileWidth(true,l),g=48,c=8,d=this.containerWidth-c;var f=0,p=1,m,E,v;var H=r.some(function(e){return!!e&&e.isTileIntentSupported!==false});if(!H){if(e.isGroupLocked||e.isDefaultGroup||!s||t.system.phone){return 0}return(g+c)/this.containerHeight}var P=c;if(!h){P+=g}if(a&&a.length){P+=44}for(v=0;v<r.length;v++){if(P>this.containerHeight){break}m=r[v];if(!m||m.isTileIntentSupported===false){continue}E=m.long?u:o;if(f>0){f+=n}f+=E;if(f>d){p+=1;f=E}}P+=(this._getTileHeight(l)+n)*p;return P/this.containerHeight},setContainerSize:function(e,t){var i=this.getNumberOfAllocatedElements();this.containerHeight=e;this.containerWidth=t;this._changePageSize(i)},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex},_changePageSize:function(e){this.currentPageIndex=Math.ceil(e/this._calcElementsPerPage())},moveToNextPage:function(){this.currentPageIndex++},resetCurrentPageIndex:function(){this.currentPageIndex=0},getSizeofSupportedElementInUnits:function(e){return this.supportedElements[e].sizeInBaseUnits},_calcElementMatrix:function(e){var t=document.createElement("div");t.classList.add(e);document.body.appendChild(t);var i=t.clientHeight;var n=t.clientWidth;var h;if(i<20||n<40){h=this.tileSize[e]||this.tileSize.default}else{h={width:n,height:i}}this.tileHeight=i;t.remove();return h},_calcElementsPerPage:function(){var e,t,i,n,h,s,r;for(e in this.supportedElements){i=this.supportedElements[e];n=this._calcElementMatrix(i.className);i.matrix=n;if(t){t.width=t.width>n.width?n.width:t.width;t.height=t.height>n.height?n.height:t.height}else{t={width:n.width,height:n.height}}}for(e in this.supportedElements){i=this.supportedElements[e];h=i.matrix;i.sizeInBaseUnits=Math.round(h.width/t.width*h.height/t.height)}s=Math.round(this.containerWidth/t.width);r=Math.round(this.containerHeight/t.height);if(!r||!s||s===Infinity||r===Infinity||s===0||r===0){return 10}return r*s}});return h});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter", ["sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/base/util/uid","sap/base/Log","sap/ui/performance/Measurement","sap/m/library","sap/base/util/deepEqual"],function(e,r,i,t,o,n,u,a,l,s){"use strict";var d=l.GenericTileMode;var g=l.LoadState;var c={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};function p(e,r){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(i){i.logCustomEvent(c.PERSONALIZATION,e,r)})}var f=e.extend("sap.ushell.components._HomepageManager.PersistentPageOperationAdapter",{constructor:function(r){e.call(this);this.oPageBuilderService=r},_getIsAppBox:function(e){var r=this.oPageBuilderService,i=!!(r.getCatalogTileTargetURL(e)&&(r.getCatalogTilePreviewTitle(e)||r.getCatalogTilePreviewSubtitle(e)));return i},getCurrentHiddenGroupIds:function(e){var r=e.getProperty("/groups"),i=[],t,o,n;for(o=0;o<r.length;o++){n=r[o]?r[o].isGroupVisible:true;if(r[o].object){t=this.oPageBuilderService.getGroupId(r[o].object)}if(!n&&t!==undefined){i.push(t)}}return i},getPreparedTileModel:function(e,i,t){var u=this.oPageBuilderService,a=n(),l,s=u.getTileSize(e),g=[],c;t=t||u.getTileType(e);if(t==="link"){g=[new o({mode:d.LineMode})]}l={isCustomTile:!this._getIsAppBox(e),object:e,originalTileId:u.getTileId(e),uuid:a,tileCatalogId:encodeURIComponent(u.getCatalogTileId(e)),tileCatalogIdStable:u.getStableCatalogTileId(e)||"",content:g,long:s==="1x2",target:u.getTileTarget(e)||"",debugInfo:u.getTileDebugInfo(e),isTileIntentSupported:u.isTileIntentSupported(e),rgba:"",isLocked:i,showActionsIcon:r.last("/core/home/enableTileActionsIcon"),isLinkPersonalizationSupported:u.isLinkPersonalizationSupported(e),navigationMode:undefined};if(t==="card"){c=u.getCardManifest(e);l.isCard=true;if(c){l.manifest=c}}return l},getPreparedGroupModel:function(e,i,o,a){var l=this.oPageBuilderService,s=e&&l.getGroupTiles(e)||[],d=[],g=[],c,p=r.last("/core/shell/model/personalization"),f=r.last("/core/extension/enableHelp");var P=!!(e&&l.isGroupLocked(e)),v=!!(e&&l.isGroupFeatured(e));for(c=0;c<s.length;++c){var h=s[c],T=l.getTileType(h).toLowerCase();if(T==="tile"||T==="card"){d.push(this.getPreparedTileModel(s[c],P,T))}else if(T==="link"){g.push(this.getPreparedTileModel(s[c],P,T))}else{u.error("Unknown tile type: '"+T+"'",undefined,"sap.ushell.components.HomepageManager")}}return{title:i&&t.getLocalizedText("my_group")||e&&l.getGroupTitle(e)||a&&a.title||"",object:e,groupId:n(),helpId:f&&e?l.getGroupId(e):null,links:g,pendingLinks:[],tiles:d,isDefaultGroup:!!i,editMode:!e,isGroupLocked:P,isFeatured:v,visibilityModes:[true,true],removable:!e||l.isGroupRemovable(e),sortable:p,isGroupVisible:!e||l.isGroupVisible(e),isEnabled:!i,isLastGroup:o||false,isRendered:!!(a&&a.isRendered),isGroupSelected:false}},getPage:function(){a.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return this._getGroupsFromServer().then(this.loadGroupsFromArray.bind(this))},_getGroupsFromServer:function(){var e=this;return new Promise(function(r,i){e.oPageBuilderService.getGroups().done(function(e){a.end("FLP:DashboardManager.loadPersonalizedGroups");r(e)}).fail(i)})},loadGroupsFromArray:function(e){var r=this;a.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");a.start("FLP:DashboardManager.getDefaultGroup","getDefaultGroup","FLP");return new Promise(function(i,t){r.oPageBuilderService.getDefaultGroup().done(function(t){a.end("FLP:DashboardManager.getDefaultGroup");if(e.length===0&&t===undefined){i([]);return}var o=0,n,u=[],l,d;e=r._sortGroups(t,e);d=e.findIndex(function(e){return s(e,t)});l=e.length;a.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(o=0;o<l;++o){n=r.getPreparedGroupModel(e[o],o===d,o===l-1);n.index=o;u.push(n)}a.end("FLP:DashboardManager._getGroupModel");a.end("FLP:DashboardManager.loadGroupsFromArray");i(u)}).fail(t)})},_sortGroups:function(e,i){var t=0,o=this,n=i.findIndex(function(r){return s(r,e)}),u=[],a,l,d;if(n>-1){i.splice(n,1)}while(t<i.length){l=i[t];d=this.oPageBuilderService.isGroupLocked(l);if(d){u.push(l);i.splice(t,1)}else{t++}}if(!r.last("/core/home/disableSortedLockedGroups")){u.sort(function(e,r){var i=o.oPageBuilderService.getGroupTitle(e).toLowerCase(),t=o.oPageBuilderService.getGroupTitle(r).toLowerCase();return i<t?-1:1})}u.sort(function(e,r){var i=o.oPageBuilderService.isGroupFeatured(e),t=o.oPageBuilderService.isGroupFeatured(r);if(i===t){return 0}else if(i>t){return-1}return 1});a=u;a.push(e);a.push.apply(a,i);return a},addGroupAt:function(e,r,i){var t=this;return new Promise(function(o,n){try{if(r===undefined){t.oPageBuilderService.addGroup(e.title).done(function(r){var n=t.oPageBuilderService.getGroupId(r);p(c.RENAME_GROUP,[null,e.title,n]);o(t.getPreparedGroupModel(r,i,e.isLastGroup,undefined))}).fail(n)}else{t.oPageBuilderService.addGroupAt(e.title,r).done(function(r){var n=t.oPageBuilderService.getGroupId(r);p(c.RENAME_GROUP,[null,e.title,n]);o(t.getPreparedGroupModel(r,i,e.isLastGroup,undefined))}).fail(n)}}catch(e){n()}})},renameGroup:function(e,r,i){var t=this;return new Promise(function(o,n){try{t.oPageBuilderService.setGroupTitle(e.object,r).done(function(){var n=t.oPageBuilderService.getGroupId(e.object);p(c.RENAME_GROUP,[i,r,n]);o()}).fail(n)}catch(e){n()}})},deleteGroup:function(e){var r=this,i=e.object,t=this.oPageBuilderService.getGroupId(i),o=this.oPageBuilderService.getGroupTitle(i);return new Promise(function(e,n){try{r.oPageBuilderService.removeGroup(i).done(function(){p(c.DELETE_GROUP,[o,t]);e()}).fail(n)}catch(e){n()}})},moveGroup:function(e,r,i){var t=this;return new Promise(function(o,n){try{t.oPageBuilderService.moveGroup(e.object,r).done(function(){var r=t.oPageBuilderService.getGroupId(e.object);p(c.MOVE_GROUP,[e.title,i.iFromIndex,i.iToIndex,r]);o()}).fail(n)}catch(e){n()}})},resetGroup:function(e,r){var i=this,t=e.object,o=this.oPageBuilderService.getGroupId(t),n=this.oPageBuilderService.getGroupTitle(t);return new Promise(function(u,a){try{i.oPageBuilderService.resetGroup(t).done(function(a){p(c.RESET_GROUP,[n,o]);u(i.getPreparedGroupModel(a||t,r,e.isLastGroup,undefined))}).fail(a)}catch(e){a()}})},refreshGroup:function(e){var r=this,i="Failed to refresh group with id:"+e+" in the model";return new Promise(function(t){r.oPageBuilderService.getGroups().fail(function(){u.error(i,null,"sap.ushell.components.HomepageManager");t(null)}).done(function(i){var o=null;for(var n=0;n<i.length;n++){if(r.oPageBuilderService.getGroupId(i[n])===e){o=i[n];break}}if(o){r.oPageBuilderService.getDefaultGroup().done(function(i){var n=e===i.getId(),u=r.getPreparedGroupModel(o,n,false,{isRendered:true});t(u)})}else{t(null)}})})},getIndexOfGroup:function(e,r){var i=-1,t=this,o=this.oPageBuilderService.getGroupId(r);e.every(function(e,r){var n=t.oPageBuilderService.getGroupId(e.object);if(n===o){i=r;return false}return true});return i},getOriginalGroupIndex:function(e){var r=this.oPageBuilderService,i=e.object,t=this.oPageBuilderService.getGroups();return new Promise(function(e,o){t.done(function(t){var o;for(var n=0;n<t.length;n++){if(r.getGroupId(t[n])===r.getGroupId(i)){o=n;break}}e(o)}).fail(o)})},moveTile:function(e,r,i,t,o){var n=this,u,a=new Promise(function(a,l){try{var s=n.oPageBuilderService.moveTile(e.object,r.tileIndex,r.newTileIndex,i.object,t.object,o);s.done(function(r){var o=[n.oPageBuilderService.getTileTitle(e.object),n.oPageBuilderService.getGroupTitle(i.object),n.oPageBuilderService.getGroupTitle(t.object),e.uuid];p(c.MOVE_TILE,o);u=r;a(r)});s.fail(l)}catch(e){l()}});return a.then(this._getTileViewAsPromise.bind(this)).then(function(e){return Promise.resolve({content:e,originalTileId:n.oPageBuilderService.getTileId(u),object:u})})},removeTile:function(e,r){var i=this,o=r.object,n=i.oPageBuilderService.getTileTitle(o),u=i.oPageBuilderService.getCatalogTileId(o),a=i.oPageBuilderService.getCatalogTileTitle(o),l=i.oPageBuilderService.getTileId(o),s;s=new Promise(function(r,s){try{i.oPageBuilderService.removeTile(e.object,o).done(function(){t.showLocalizedMessage("tile_deleted_msg",[n,e.title]);p(c.DELETE_TILE,[n||l,u,a,e.title]);r()}).fail(s)}catch(e){s()}});return s},_getTileViewAsPromise:function(e){var r=this,i=new Promise(function(i,t){var o=r.oPageBuilderService.getTileView(e);o.done(i);o.fail(t)});return i},refreshTile:function(e){this.oPageBuilderService.refreshTile(e)},setTileVisible:function(e,r){this.oPageBuilderService.setTileVisible(e,r)},getTileType:function(e){return this.oPageBuilderService.getTileType(e)},getTileSize:function(e){return this.oPageBuilderService.getTileSize(e)},getTileTitle:function(e){return this.oPageBuilderService.getTileTitle(e.object)},getTileId:function(e){return this.oPageBuilderService.getTileId(e)},isLinkPersonalizationSupported:function(e){return this.oPageBuilderService.isLinkPersonalizationSupported(e)},getTileTarget:function(e){return this.oPageBuilderService.getTileTarget(e.object)},getTileView:function(e){return this.oPageBuilderService.getTileView(e.object)},getTileActions:function(e){return this.oPageBuilderService.getTileActions(e)},getFailedLinkView:function(e){var r=this.oPageBuilderService.getCatalogTilePreviewSubtitle(e.object);var t=this.oPageBuilderService.getCatalogTilePreviewTitle(e.object);if(!t&&!r){t=i.i18n.getText("cannotLoadLinkInformation")}return new o({mode:d.LineMode,state:g.Failed,header:t,subheader:r})},getTileModelByCatalogTileId:function(e){u.error("Cannot get tile with id "+e+": Method is not supported")},transformGroupModel:function(){return}});var P=null;return{getInstance:function(e){if(!P){P=new f(e)}return P},destroy:function(){P=null}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/TransientPageOperationAdapter", ["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/base/util/uid","sap/base/Log","sap/m/library"],function(jQuery,e,t,i,r,o,n,l,a,u,s){"use strict";var g=s.GenericTileMode;var d=s.LoadState;var c=e.extend("sap.ushell.components._HomepageManager.TransientPageOperationAdapter.js",{constructor:function(t){e.call(this);this.oPageBuilderService=t;this._createCatalogMap()},_createCatalogMap:function(){if(this.mCatalogTiles){return}var e=this.oPageBuilderService;var t=this;this.mCatalogTiles={};this._getAllCatalogTiles().then(function(i){for(var r=0;r<i.length;r++){for(var o=0;o<i[r].length;o++){t.mCatalogTiles[e.getCatalogTileId(i[r][o])]=i[r][o]}}})},getCurrentHiddenGroupIds:function(){return[]},getTileActions:function(e){e.isStub=function(){return true};var t=this.oPageBuilderService.getTileActions(e);delete e.isStub;return t},getPreparedTileModel:function(e,i,r){var n=a();var l=[];r=r||e.type;if(r==="link"){l=[new o({mode:g.LineMode})]}var u={isCustomTile:false,object:e,originalTileId:n,uuid:n,tileCatalogId:"",content:l,long:false,target:"",debugInfo:null,isTileIntentSupported:true,rgba:"",isLocked:i,showActionsIcon:t.last("/core/home/enableTileActionsIcon"),isLinkPersonalizationSupported:true,navigationMode:undefined};if(r==="card"){u.isCard=true;u.manifest={}}return u},getPreparedGroupModel:function(e,t,i,o){var n=a();var l=e&&e.tiles||[];var s=[];var g=[];for(var d=0;d<l.length;++d){var c=l[d];var f=c.type.toLowerCase();if(f==="tile"||f==="card"){s.push(this.getPreparedTileModel(l[d],false,f))}else if(f==="link"){g.push(this.getPreparedTileModel(l[d],false,f))}else{u.error("Unknown tile type: '"+f+"'",undefined,"sap.ushell.components.HomepageManager")}}return{title:t&&r.getLocalizedText("my_group")||e&&e.title||o&&o.title||"",object:e,groupId:n,links:g,pendingLinks:[],tiles:s,isDefaultGroup:!!t,editMode:!e,isGroupLocked:false,isFeatured:false,visibilityModes:[true,true],removable:true,sortable:true,isGroupVisible:true,isEnabled:!t,isLastGroup:i||false,isRendered:!!(o&&o.isRendered),isGroupSelected:false}},getPage:function(){return Promise.resolve([this.getPreparedGroupModel(null,false,true)])},addGroupAt:function(e,t,i){var r={title:e.title};return Promise.resolve(this.getPreparedGroupModel({},i,e.isLastGroup,r))},renameGroup:function(){return Promise.resolve()},deleteGroup:function(){return Promise.resolve()},moveGroup:function(){return Promise.resolve()},resetGroup:function(){return Promise.reject("Reset group not supported in transient mode")},refreshGroup:function(){return Promise.reject("Refresh group not supported in transient mode")},getIndexOfGroup:function(){return Promise.resolve(-1)},getOriginalGroupIndex:function(e,t){var i;for(var r=0;r<t.length;r++){if(t[r].groupId===e.groupId){i=r;break}}return Promise.resolve(i)},moveTile:function(e,t,i,r,o){var n=this._findCatalogTile(e.tileCatalogId);return Promise.resolve({content:this._getTileView(n,o),originalTileId:e.uuid,object:{id:e.uuid,type:o,title:this.oPageBuilderService.getCatalogTileTitle(n)}})},removeTile:function(){return Promise.resolve()},_getTileView:function(e,t){if(t==="link"){return new o({mode:g.LineMode,header:this.oPageBuilderService.getCatalogTileTitle(e),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(e)})}return new o({header:this.oPageBuilderService.getCatalogTileTitle(e),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(e),tileContent:new l({content:new n({src:this.oPageBuilderService.getCatalogTilePreviewIcon(e)})})})},refreshTile:function(){return},setTileVisible:function(){return},getTileType:function(e){return e.type},getTileSize:function(){return"1x1"},getTileId:function(e){return e.id},isLinkPersonalizationSupported:function(){return true},getTileTarget:function(e){var t=this._findCatalogTile(e.tileCatalogId);return this.oPageBuilderService.getCatalogTileTargetURL(t)},getTileTitle:function(e){return e.object.title},_getAllCatalogTiles:function(){var e=this.oPageBuilderService;function t(t){t.map(function(t){var i=e.getCatalogId(t)||"";return e.getCatalogTitle(t)||i.split(":").slice(1).join(":")});return Promise.all(t.map(function(t){return e.getCatalogTiles(t)}))}return Promise.resolve(e.getCatalogs()).then(t)},_findCatalogTile:function(e){return this.mCatalogTiles[e]},getTileView:function(e){var t=this._findCatalogTile(e.tileCatalogId);var i=this._getTileView(t,e.object.type);var r=new jQuery.Deferred;r.resolve(i);return r.promise()},getFailedLinkView:function(e){var t=e.object.title||i.i18n.getText("cannotLoadLinkInformation");var r="";return new o({mode:g.LineMode,state:d.Failed,header:t,subheader:r})},getTileModelByCatalogTileId:function(e,t){t=t||"tile";var i=this._findCatalogTile(e);var r=this.getPreparedTileModel({},false,t);r.tileCatalogId=e;r.object={id:r.uuid,type:t,title:this.oPageBuilderService.getCatalogTileTitle(i)};var o=this._getTileView(i,t);r.content=[o];return r},transformGroupModel:function(e){var t=this;for(var i=0;i<e.length;i++){var r=e[i];r.object={};r.tiles.forEach(function(e){var i=e.object;e.tileCatalogId=t.oPageBuilderService.getCatalogTileId(i);e.object={id:e.uuid,type:"tile",title:t.oPageBuilderService.getTileTitle(i)}});r.links.forEach(function(e){var i=e.object;e.tileCatalogId=t.oPageBuilderService.getCatalogTileId(i);e.object={id:e.uuid,type:"link",title:t.oPageBuilderService.getTileTitle(i)}})}return e}});var f;return{getInstance:function(e){if(!f){f=new c(e)}return f},destroy:function(){f=null}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/AppFinder.controller", ["sap/base/util/extend","sap/ui/core/Core","sap/ui/core/mvc/View","sap/ui/core/mvc/Controller","sap/ui/core/Component","sap/ushell/ui5service/ShellUIService","sap/ushell/EventHub","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/thirdparty/hasher"],function(e,t,s,n,i,a,r,o,l,jQuery,u,h,p){"use strict";var c;return n.extend("sap.ushell.components.appfinder.AppFinder",{onInit:function(){var e=i.getOwnerComponentFor(this.getView());this.oRouter=e.getRouter();var t=this.getView();var n=e.getModel();t.setModel(n);c=e.oCatalogsManager;this.bEnableEasyAccessSAPMenu=n.getProperty("/enableEasyAccessSAPMenu");this.bEnableEasyAccessUserMenu=n.getProperty("/enableEasyAccessUserMenu");this.bEnableEasyAccesOnTablet=n.getProperty("/enableEasyAccessOnTablet");var a=this.bEnableEasyAccessSAPMenu||this.bEnableEasyAccessUserMenu;var r=!h.system.phone&&!h.system.tablet||h.system.tablet&&this.bEnableEasyAccesOnTablet||h.system.combi;this.bShowEasyAccessMenu=a&&r;sap.ushell.Container.getRenderer("fiori2").createExtendedShellState("appFinderExtendedShellState",function(){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true)});this.getView().setModel(this._getSubHeaderModel(),"subHeaderModel");this.oConfig=e.getComponentData().config;this.pCatalogView=s.create({id:"catalogView",viewName:"module:sap/ushell/components/appfinder/CatalogView",height:"100%",viewData:{parentComponent:e,subHeaderModel:this._getSubHeaderModel(),CatalogsManager:c}});this.oVisualizationOrganizerHelper=o.getInstance();this.oInitPromise=this.pCatalogView.then(function(e){e.addStyleClass("sapUiGlobalBackgroundColor sapUiGlobalBackgroundColorForce");return this.oVisualizationOrganizerHelper.loadAndUpdate()}.bind(this));this.oRouter.attachRouteMatched(this._handleAppFinderNavigation.bind(this));t.createSubHeader();h.resize.attachHandler(this._resizeHandler.bind(this));this.oRouter.oHashChanger=l.getInstance()},onExit:function(){this.pCatalogView.then(function(e){e.destroy()})},_resizeHandler:function(){var e=this._showOpenCloseSplitAppButton();var t=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible");if(e!==t){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",e);if(e){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)}}this._toggleViewWithToggleButtonClass(e)},_handleAppFinderNavigation:function(s){var n=e({},s);if(this.firstView!==false){if(!this.bShowEasyAccessMenu){this.pCatalogView.then(function(e){this.getView().oPage.addContent(e);setTimeout(function(){jQuery("#catalogSelect").focus()},0)}.bind(this))}this.firstView=false}this.pCatalogView.then(function(e){e.getController().customRouteMatched(n)});var i=this.getView();this._preloadAppHandler();this._getPathAndHandleGroupContext(s);this._toggleViewWithToggleButtonClass(this._showOpenCloseSplitAppButton());if(this.bShowEasyAccessMenu){this.onShow(s)}else if(i._showSearch("catalog")){i.updateSubHeader("catalog",false);this._toggleViewWithSearchAndTagsClasses("catalog")}t.getEventBus().publish("showCatalog");r.emit("CenterViewPointContentRendered","appFinder");r.emit("showCatalog",{sId:"showCatalog",oData:Date.now()});t.getEventBus().publish("launchpad","contentRendered")},_showOpenCloseSplitAppButton:function(){return!h.orientation.landscape||h.system.phone||this.oView.getModel().getProperty("/isPhoneWidth")},_resetSubHeaderModel:function(){this.oSubHeaderModel.setProperty("/activeMenu",null);this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:null});this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",this._showOpenCloseSplitAppButton());this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)},_getSubHeaderModel:function(){if(this.oSubHeaderModel){return this.oSubHeaderModel}this.oSubHeaderModel=new u;this._resetSubHeaderModel();return this.oSubHeaderModel},onTagsFilter:function(e){var t=e.getSource(),s=t.getModel("subHeaderModel"),n=e.getSource().getSelectedItems(),i=n.length>0,a={tagMode:i,selectedTags:[]};n.forEach(function(e){a.selectedTags.push(e.getText())});s.setProperty("/activeMenu",this.getCurrentMenuName());s.setProperty("/tag",a);this.pCatalogView.then(function(e){e.getController().onTag(a)})},searchHandler:function(e){var t=e.getSource().getValue(),s=false;if(t===null){return}var n=this.oSubHeaderModel.getProperty("/search");var i=this.oSubHeaderModel.getProperty("/activeMenu");if(this.getCurrentMenuName()!==i){i=this.getCurrentMenuName()}if(!n.searchMode&&!e.getParameter("clearButtonPressed")){n.searchMode=true}if(n.searchMode&&h.system.phone){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)}if(t!==n.searchTerm){if(this.containsOnlyWhitepaces(t)){t="*"}n.searchTerm=t;s=true}this.oSubHeaderModel.setProperty("/search",n);this.oSubHeaderModel.setProperty("/activeMenu",i);this.oSubHeaderModel.refresh(true);if(s){this.pCatalogView.then(function(e){e.getController().onSearch(n)})}},_preloadAppHandler:function(){setTimeout(function(){var e=p.getHash()||"";if(!e.startsWith("Shell-appfinder")){return}if(sap.ushell.Container){sap.ushell.Container.getRenderer("fiori2").applyExtendedShellState("appFinderExtendedShellState")}this._updateShellHeader(this.oView.oPage.getTitle())}.bind(this),0)},getCurrentMenuName:function(){return this.currentMenu},_navigateTo:function(e){var t=this.oVisualizationOrganizerHelper.getNavigationContextAsText.apply(this);if(t){this.oRouter.navTo(e,{filters:t},true)}else{this.oRouter.navTo(e,{},true)}},_filterSystemModelsOnTablet:function(e){var t=new jQuery.Deferred;if(this.bEnableEasyAccesOnTablet){sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(s){var n=e.reduce(function(e,t){var n;n=s.isNavigationSupported([{target:{semanticObject:"Shell",action:"startWDA"},params:{"sap-system":t.systemId,"sap-ui2-wd-app-id":"."}},{target:{semanticObject:"Shell",action:"startGUI"},params:{"sap-system":t.systemId,"sap-ui2-tcode":"."}}]);e.push(new Promise(function(e,s){n.then(function(s){var n={system:t,isSupported:false};if(s[0].supported||s[1].supported){n.isSupported=true}e(n)}).fail(function(){e({system:t,isSupported:false})})}));return e},[]);Promise.all(n).then(function(e){var s;s=e.reduce(function(e,t){if(t.isSupported){e.push(t.system)}return e},[]);t.resolve(s)})})}else{t.resolve(e)}return t.promise()},getGroupNavigationContext:function(){var e=this.oView.getModel().getProperty("/groupContext");var t=e?e.path:null;if(t){return JSON.stringify({targetGroup:encodeURIComponent(t)})}return null},getSystemsModels:function(){var e=this;if(this.getSystemsPromise){return this.getSystemsPromise}var t=new jQuery.Deferred;this.getSystemsPromise=t.promise();var s=["userMenu","sapMenu"].map(function(t){var s=new u;s.setProperty("/systemSelected",null);s.setProperty("/systemsList",[]);return e.getSystems(t).then(e._filterSystemModelsOnTablet.bind(e)).then(function(e){s.setProperty("/systemsList",e);return s})});jQuery.when.apply(jQuery,s).then(function(e,s){t.resolve(e,s)});return this.getSystemsPromise},onSegmentButtonClick:function(e){this.oSubHeaderModel.setProperty("/search/searchMode",false);this.oSubHeaderModel.setProperty("/search/searchTerm","");var t=e.getParameter("id");this._navigateTo(t)},onShow:function(e){var t=e.getParameter("name");if(t===this.getCurrentMenuName()){return}var n=this.getView();n._updateSearchWithPlaceHolder(t);this._updateCurrentMenuName(t);this.getSystemsModels().then(function(e,t){var a=t.getProperty("/systemsList");var r=e.getProperty("/systemsList");n.oPage.removeAllContent();var o=this.currentMenu==="sapMenu"?a:r;if(o&&o.length){n.updateSubHeader(this.currentMenu,true)}else if(n._showSearch(this.currentMenu)){n.updateSubHeader(this.currentMenu,false)}if(this.currentMenu==="catalog"){this.pCatalogView.then(function(e){n.oPage.addContent(e)})}else if(this.currentMenu==="userMenu"){if(!this.pUserMenuView){this.pUserMenuView=s.create({id:"userMenuView",viewName:"module:sap/ushell/components/appfinder/EasyAccessView",height:"100%",viewData:{menuName:"USER_MENU",easyAccessSystemsModel:e,parentComponent:i.getOwnerComponentFor(this.getView()),subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("userMenu"),CatalogsManager:c}})}this.pUserMenuView.then(function(e){n.oPage.addContent(e)})}else if(this.currentMenu==="sapMenu"){if(!this.pSapMenuView){this.pSapMenuView=s.create({id:"sapMenuView",viewName:"module:sap/ushell/components/appfinder/EasyAccessView",height:"100%",viewData:{menuName:"SAP_MENU",easyAccessSystemsModel:t,parentComponent:i.getOwnerComponentFor(this.getView()),subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("sapMenu"),CatalogsManager:c}})}this.pSapMenuView.then(function(e){n.oPage.addContent(e)})}this._setFocusToSegmentedButton(o);this.oSubHeaderModel.setProperty("/activeMenu",this.currentMenu);if(this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible")){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)}this.oSubHeaderModel.refresh(true)}.bind(this))},_updateCurrentMenuName:function(e){if(!this.bShowEasyAccessMenu||e==="sapMenu"&&!this.bEnableEasyAccessSAPMenu||e==="userMenu"&&!this.bEnableEasyAccessUserMenu){this.currentMenu="catalog"}else{this.currentMenu=e}this._toggleViewWithSearchAndTagsClasses(e)},_toggleViewWithSearchAndTagsClasses:function(e){var t=this.getView();if(t._showSearch(e)){t.oPage.addStyleClass("sapUshellAppFinderSearch")}else{t.oPage.removeStyleClass("sapUshellAppFinderSearch")}if(t._showSearchTag(e)){t.oPage.addStyleClass("sapUshellAppFinderTags")}else{t.oPage.removeStyleClass("sapUshellAppFinderTags")}},_toggleViewWithToggleButtonClass:function(e){var t=this.getView();if(e){t.oPage.addStyleClass("sapUshellAppFinderToggleButton")}else{t.oPage.removeStyleClass("sapUshellAppFinderToggleButton")}},_setFocusToSegmentedButton:function(e){var t=this.getView();if(e&&e.length){var s=t.segmentedButton.getSelectedButton();setTimeout(function(){jQuery("#"+s).focus()},0)}else{setTimeout(function(){jQuery("#catalogSelect").focus()},0)}},_getPathAndHandleGroupContext:function(e){var t=e.getParameter("arguments");var s=t.filters;var n;try{n=JSON.parse(s)}catch(e){n=s}this.oVisualizationOrganizerHelper.updateModelWithContext.apply(this,[n])},_updateModelWithGroupContext:function(e){var t=this.oView.getModel(),s=e&&decodeURIComponent(e.targetGroup)||"";var n=t.getProperty(s),i;s=s==="undefined"?undefined:s;i={path:s,id:"",title:n&&n.title};if(s&&s!==""){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){var a=function(){var r=t.getProperty("/groups");if(r.length){n=t.getProperty(s);i.id=e.getGroupId(n.object);i.title=n.title||e.getGroupTitle(n.object);return}setTimeout(a,100)};a()})}t.setProperty("/groupContext",i)},getSystems:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(s){s.getEasyAccessSystems(e).done(function(e){var s=[];var n=Object.keys(e);for(var i=0;i<n.length;i++){var a=n[i];s[i]={systemName:e[a].text,systemId:a}}t.resolve(s)}).fail(function(e){t.reject("An error occurred while retrieving the systems: "+e)})}).catch(function(){t.reject("cannot get ClientSideTargetResolution service")});return t.promise()},_initializeShellUIService:function(){this.oShellUIService=new a({scopeObject:this.getOwnerComponent(),scopeType:"component"})},_updateShellHeader:function(e){if(!this.oShellUIService){this._initializeShellUIService()}this.oShellUIService.setTitle(e);this.oShellUIService.setHierarchy()},containsOnlyWhitepaces:function(e){if(!e||e===""){return false}return!e.replace(/\s/g,"").length}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/AppFinderView", ["sap/ui/core/mvc/View","sap/ui/thirdparty/jquery","sap/ui/core/InvisibleText","sap/ui/core/ListItem","sap/ui/model/Sorter","sap/m/MultiComboBox","sap/ui/model/BindingMode","sap/m/SearchField","sap/m/FlexBox","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/ToggleButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/Toolbar","sap/m/Page","sap/ushell/resources","sap/ui/Device"],function(e,jQuery,t,n,o,a,r,i,s,l,p,d,u,c,h,g,S){"use strict";return e.extend("sap.ushell.components.appfinder.AppFinderView",{createContent:function(){var e=g.i18n;this.oPage=new h("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?e.getText("appFinderTitle"):e.getText("appFinder_group_context_title",t)}}});return this.oPage},_showSearch:function(e){var t="enableCatalogSearch";if(e==="userMenu"){t="enableEasyAccessUserMenuSearch"}else if(e==="sapMenu"){t="enableEasyAccessSAPMenuSearch"}return this.getModel().getProperty("/"+t)},_showSearchTag:function(e){if(e==="userMenu"||e==="sapMenu"){return false}return this.getModel().getProperty("/enableCatalogTagFilter")},createSubHeader:function(){this.oToolbar=new c("appFinderSubHeader",{});if(S.system.desktop){this.oToolbar.addEventDelegate({onAfterRendering:function(){var e=document.getElementById("catalog-button");if(e){e.setAttribute("accesskey","a")}}})}this.oToolbar.addStyleClass("sapUshellAppFinderHeader");this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new d("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(e){this.getController().oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",e.getSource().getPressed());this.openCloseSplitAppButton.setTooltip(e.getParameter("pressed")?g.i18n.getText("ToggleButtonHide"):g.i18n.getText("ToggleButtonShow"))}.bind(this),tooltip:g.i18n.getText("ToggleButtonShow")});this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton)}},updateSubHeader:function(e,t){var n,o;this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(t){n=this.createSegmentedButtons(e);this.oPage.addStyleClass("sapUshellAppFinderWithEasyAccess");this.oToolbar.addContent(n)}if(this._showSearch(e)){o=this.createSearchControl(e);this.oToolbar.addContent(o)}this.getController()._updateCurrentMenuName(e)},createSegmentedButtons:function(e){if(this.segmentedButton){this.segmentedButton.setSelectedKey(e);return this.segmentedButton}var n=this.getController();var o=g.i18n;var a=new t({text:g.i18n.getText("AppFinder.SegmentedButton.Catalog.Describedby")}).toStatic();this.addDependent(a);this.segmentedButton=new l("appFinderSegmentedButtons",{items:[new p("catalog",{text:o.getText("appFinderCatalogTitle"),key:"catalog",press:function(e){n.onSegmentButtonClick(e)},customData:[new u({key:"aria-controls",value:"catalogView",writeToDom:true}),new u({key:"aria-describedby",value:a.getId(),writeToDom:true})]})]});if(n.bEnableEasyAccessUserMenu){var r=new t({text:g.i18n.getText("AppFinder.SegmentedButton.UserMenu.Describedby")}).toStatic();this.addDependent(r);this.segmentedButton.addItem(new p("userMenu",{text:o.getText("appFinderUserMenuTitle"),key:"userMenu",press:function(e){n.onSegmentButtonClick(e)},customData:[new u({key:"aria-controls",value:"userMenuView",writeToDom:true}),new u({key:"aria-describedby",value:r.getId(),writeToDom:true})]}))}if(n.bEnableEasyAccessSAPMenu){var i=new t({text:g.i18n.getText("AppFinder.SegmentedButton.SAPMenu.Describedby")}).toStatic();this.addDependent(i);this.segmentedButton.addItem(new p("sapMenu",{text:o.getText("appFinderSapMenuTitle"),key:"sapMenu",press:function(e){n.onSegmentButtonClick(e)},customData:[new u({key:"aria-controls",value:"sapMenuView",writeToDom:true}),new u({key:"aria-describedby",value:i.getId(),writeToDom:true})]}))}this.segmentedButton.setSelectedKey(e);return this.segmentedButton},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);jQuery("#appFinderSearch input").select()},createSearchControl:function(e){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new s("appFinderSearchContainer")}this.oAppFinderSearchContainer.removeAllItems();if(e==="catalog"&&this._showSearchTag("catalog")){this.oAppFinderSearchContainer.addItem(this.createTagControl())}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new i("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:"subHeaderModel>/search/searchTerm",mode:r.OneWay}}).addStyleClass("help-id-catalogSearch");this.oAppFinderSearchControl.addCustomData(new u({key:"aria-controls",value:"",writeToDom:true}));if(S.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e,t){e.getInstance().then(function(e){this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(n){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){n.preventDefault();t.setIsFocusHandledByAnotherHandler(true);e.setFocusOnCatalogTile()}}})}.bind(this))}.bind(this))}}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(e);return this.oAppFinderSearchContainer},_updateSearchWithPlaceHolder:function(e){var t="";if(e==="catalog"){t="EasyAccessMenu_SearchPlaceHolder_Catalog"}else if(e==="userMenu"){t="EasyAccessMenu_SearchPlaceHolder_UserMenu"}else if(e==="sapMenu"){t="EasyAccessMenu_SearchPlaceHolder_SAPMenu"}if(t&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(g.i18n.getText(t));this.oAppFinderSearchControl.setTooltip(g.i18n.getText(t))}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter}var e=this.getController();this.oAppFinderTagFilter=new a("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",visible:{path:"/tagList",formatter:function(e){return e.length>0}},items:{path:"/tagList",sorter:new o("tag",false,false),template:new n({text:"{tag}",key:"{tag}"})},selectionChange:[e.onTagsFilter,e]}).addStyleClass("help-id-catalogTagFilter");return this.oAppFinderTagFilter},getControllerName:function(){return"sap.ushell.components.appfinder.AppFinder"}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/Catalog.controller", ["sap/base/util/extend","sap/ushell/library","sap/ui/core/Core","sap/ui/core/mvc/View","sap/ui/core/mvc/Controller","sap/ushell/components/_HomepageManager/PagingManager","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/Device","sap/ui/model/Context","sap/m/MessageToast","sap/ushell/Config","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ushell/utils/WindowUtils"],function(e,t,i,r,a,o,jQuery,s,n,l,g,h,d,p,c,u,f){"use strict";var v=g.SplitAppMode;var C=t.AppType;var y;return a.extend("sap.ushell.components.appfinder.Catalog",{oPopover:null,onInit:function(){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){this.oLaunchPageService=e}.bind(this));this.categoryFilter="";this.preCategoryFilter="";var e=this.getView();this.oMainModel=e.getModel();this.oSubHeaderModel=e.getModel("subHeaderModel");this.resetPage=false;this.bIsInProcess=false;this.oVisualizationOrganizerHelper=e.oVisualizationOrganizerHelper;this.oCatalogsContainer=e.oCatalogsContainer;this.timeoutId=0;document.subHeaderModel=this.oSubHeaderModel;document.mainModel=this.oMainModel;var t=this.oSubHeaderModel.bindProperty("/openCloseSplitAppButtonToggled");t.attachChange(this.handleToggleButtonModelChanged,this);e.oCatalogsContainer.setHandleSearchCallback(this.handleSearchModelChanged.bind(this));y=this.getView().getViewData().CatalogsManager&&this.getView().getViewData().CatalogsManager.getInstance()},customRouteMatched:function(e){this.onShow(e)},onBeforeRendering:function(){i.getEventBus().publish("renderCatalog")},onAfterRendering:function(){this.wasRendered=true;if(!this.PagingManager){this._setPagingManager()}if(this.PagingManager.currentPageIndex===0){this.allocateNextPage()}jQuery(window).resize(function(){var e=jQuery(window).width();var t=jQuery(window).height();this.PagingManager.setContainerSize(e,t)}.bind(this));this._handleAppFinderWithDocking();i.getEventBus().subscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);i.getEventBus().subscribe("sap.ushell","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this)},_setPagingManager:function(){this.lastCatalogId=0;this.PagingManager=new o("catalogPaging",{supportedElements:{tile:{className:"sapUshellTile"}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});this.oCatalogsContainer.setPagingManager(this.PagingManager)},_decodeUrlFilteringParameters:function(e){var t;try{t=JSON.parse(e)}catch(i){t=e}var i=t&&t.tagFilter&&t.tagFilter||[];if(i){try{this.tagFilter=JSON.parse(i)}catch(e){this.tagFilter=[]}}else{this.tagFilter=[]}this.categoryFilter=t&&t.catalogSelector&&t.catalogSelector||this.categoryFilter;if(this.categoryFilter){this.categoryFilter=window.decodeURIComponent(this.categoryFilter)}this.searchFilter=t&&t.tileFilter&&t.tileFilter||null;if(this.searchFilter){this.searchFilter=window.decodeURIComponent(this.searchFilter)}},_applyFilters:function(e){var t=false;if(this.categoryFilter){this.categoryFilter=s.i18n.getText("all")===this.categoryFilter?"":this.categoryFilter;if(this.categoryFilter!==this.preCategoryFilter){t=true}this.oView.setCategoryFilterSelection(this.categoryFilter,t)}else{t=true;this.oView.setCategoryFilterSelection("",t)}this.preCategoryFilter=this.categoryFilter;if(this.searchFilter&&this.searchFilter.length){this.searchFilter=this.searchFilter.replace(/\*/g,"");this.searchFilter=this.searchFilter.trim();this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:this.searchFilter})}else if(e){this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:""});this.resetPage=true}if(this.tagFilter&&this.tagFilter.length){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:this.tagFilter})}else if(e){this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.resetPage=true}this.handleSearchModelChanged()},_handleAppFinderAfterNavigate:function(){this.clearFilters()},clearFilters:function(){var e=false;if(this.categoryFilter!==this.preCategoryFilter){e=true}var t=this.oSubHeaderModel.getProperty("/search/searchMode");var i=this.oSubHeaderModel.getProperty("/tag/tagMode");if(t){this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:""})}if(i){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:[]})}if(this.categoryFilter&&this.categoryFilter!==""){this.selectedCategoryId=undefined;this.categoryFilter=undefined;this.getView().getModel().setProperty("/categoryFilter","");this.oView.setCategoryFilterSelection("",e)}this.preCategoryFilter=this.categoryFilter;this.handleSearchModelChanged()},onShow:function(t){var i=t.getParameter("arguments").filters;e(this.getView().getViewData(),t);this._decodeUrlFilteringParameters(i);if(this.wasRendered&&!i){this.clearFilters()}else{this._applyFilters(this.wasRendered)}},allocateNextPage:function(){if(!this.oCatalogsContainer.nAllocatedUnits||this.oCatalogsContainer.nAllocatedUnits===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oCatalogsContainer.applyPagingCategoryFilters(this.allocateTiles,this.categoryFilter)}},setTagsFilter:function(e){var t={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:this.searchFilter&&this.searchFilter.length?encodeURIComponent(this.searchFilter):"",tagFilter:e.length?JSON.stringify(e):[]};this._addNavigationContextToFilter(t);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(t)})},setCategoryFilter:function(e){var t={catalogSelector:e,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[]};this._addNavigationContextToFilter(t);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(t)})},setSearchFilter:function(e){var t={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:e?encodeURIComponent(e):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[]};this._addNavigationContextToFilter(t);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(t)})},_addNavigationContextToFilter:function(e){var t=this.oVisualizationOrganizerHelper.getNavigationContext.apply(this);if(t){Object.keys(t).forEach(function(i){e[i]=t[i]})}return e},onSearch:function(e){var t=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(t)!==-1){var i=e.searchTerm?e.searchTerm:"";this.setSearchFilter(i)}else{this._restoreSelectedMasterItem()}},onTag:function(e){var t=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(t)!==-1){var i=e.selectedTags?e.selectedTags:[];this.setTagsFilter(i)}else{this._restoreSelectedMasterItem()}},getGroupContext:function(){var e=this.getView().getModel();var t=e.getProperty("/groupContext/path");return{targetGroup:encodeURIComponent(t||"")}},_isTagFilteringChanged:function(e){var t=e.length===this.tagFilter.length;var i=t;if(!i){return true}e.some(function(e){i=this.tagFilter&&Array.prototype.indexOf.call(this.tagFilter,e)!==-1;return!i}.bind(this));return i},_setUrlWithTagsAndSearchTerm:function(e,t){var i={tileFilter:e&&e.length?encodeURIComponent(e):"",tagFilter:t.length?JSON.stringify(t):[]};this._addNavigationContextToFilter(i);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(i)})},handleSearchModelChanged:function(){var e=this.oSubHeaderModel.getProperty("/search/searchMode");var t=this.oSubHeaderModel.getProperty("/tag/tagMode");var r=this.oSubHeaderModel.getProperty("/search/searchTerm");var a=this.oSubHeaderModel.getProperty("/tag/selectedTags");var o=[];var s;var g;var h;if(!this.PagingManager){this._setPagingManager()}this.PagingManager.resetCurrentPageIndex();this.nAllocatedTiles=0;this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oView.oCatalogsContainer.updateAllocatedUnits(this.allocateTiles);this.oView.oCatalogsContainer.resetCatalogPagination();var d=i.byId("catalogTilesDetailedPage");if(d){d.scrollTo(0,0)}if(e||t||this.resetPage){if(a&&a.length>0){var p=new n("tags","EQ","v");p.fnTest=function(e){if(a.length===0){return true}for(var t=0;t<a.length;t++){var i=a[t];if(e.indexOf(i)===-1){return false}}return true};s=new n([p],true)}r=r?r.replace(/\*/g,""):r;if(r){var c=r.split(/[\s,]+/);var u=new n(jQuery.map(c,function(e){return e&&new n("keywords",l.Contains,e)}),true);var f=new n(jQuery.map(c,function(e){return e&&new n("title",l.Contains,e)}),true);var v=new n(jQuery.map(c,function(e){return e&&new n("subtitle",l.Contains,e)}),true);o.push(u);o.push(f);o.push(v);g=new n(o,false)}var C=this.oView.oCatalogsContainer.getCatalogs();this.oSearchResultsTotal=[];var y=this;if(s&&s.aFilters.length>0&&g){h=new n([g].concat([s]),true)}else if(s&&s.aFilters.length>0){h=new n([s],true)}else if(g&&g.aFilters.length>0){h=new n([g],true)}C.forEach(function(e){e.getBinding("customTilesContainer").filter(h);e.getBinding("appBoxesContainer").filter(h)});this.oView.oCatalogsContainer.bSearchResults=false;this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);this.bSearchResults=this.oView.oCatalogsContainer.bSearchResults;this.oView.splitApp.toDetail(y.getView()._calculateDetailPageId());this.resetPage=false}else{this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter)}var m=this.getView()._calculateDetailPageId();this.oView.splitApp.toDetail(m)},_handleAppFinderWithDocking:function(){if(jQuery(".sapUshellContainerDocked").length>0){if(jQuery("#mainShell").width()<710){if(window.innerWidth<1024){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(v.ShowHideMode)}else{this.oView.splitApp.setMode(v.HideMode);this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",true)}}else{this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(v.ShowHideMode)}}},_restoreSelectedMasterItem:function(){var e=this.oView.splitApp.getMasterPage("catalogSelect");var t=i.byId(this.selectedCategoryId);if(t){this.categoryFilter=t.getTitle()}e.setSelectedItem(t)},handleToggleButtonModelChanged:function(){var e=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible");var t=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonToggled");if(t!==this.bCurrentButtonToggled&&e){if(!h.system.phone){if(t&&!this.oView.splitApp.isMasterShown()){this.oView.splitApp.showMaster()}else if(this.oView.splitApp.isMasterShown()){this.oView.splitApp.hideMaster()}}else if(this.oView.splitApp.isMasterShown()){var r=i.byId(this.getView()._calculateDetailPageId());this.oView.splitApp.toDetail(r)}else if(t){var a=i.byId("catalogSelect");this.oView.splitApp.toMaster(a,"show")}}this.bCurrentButtonToggled=t},_handleCatalogListItemPress:function(e){this.onCategoryFilter(e);if(this.oSubHeaderModel.getProperty("/search/searchTerm")!==""){this.oSubHeaderModel.setProperty("/search/searchMode",true)}if(h.system.phone||h.system.tablet){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",!this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled"))}},onCategoryFilter:function(e){var t=e.getSource();var i=t.getSelectedItem();var r=i.getBindingContext();var a=r.getModel();if(a.getProperty("static",r)){a.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategoryId=undefined;this.categoryFilter=undefined}else{a.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(window.encodeURIComponent(i.getBindingContext().getObject().title));this.categoryFilter=i.getTitle();this.selectedCategoryId=i.getId()}},onTileAfterRendering:function(e){var t=e.oSource.getDomRef();if(t){var i=t.getElementsByClassName("sapMGT");for(var r=0;r<i.length;r++){i[r].setAttribute("tabindex","-1")}}},catalogTilePress:function(){i.getEventBus().publish("launchpad","catalogTileClick")},onAppBoxPressed:function(e){var t=e.getSource();var i=t.getBindingContext().getObject();var r;if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return}r=this.oLaunchPageService.getAppBoxPressHandler(i);if(r){r(i)}else{var a=t.getProperty("url");if(a&&a.indexOf("#")===0){hasher.setHash(a)}else{var o=c.last("/core/shell/enableRecentActivity")&&c.last("/core/shell/enableRecentActivityLogging");if(o){var s={title:t.getProperty("title"),appType:C.URL,url:a,appId:a};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(s)}f.openURL(a,"_blank")}}},onTilePinButtonClick:function(e){var t=this.oLaunchPageService;var i=t.getDefaultGroup();i.done(function(i){var a=e.getSource();var o=a.getBindingContext();var s=this.getView().getModel();var n=s.getProperty("/groupContext/path");if(n){this._handleTileFooterClickInGroupContext(o,n)}else{var l=s.getProperty("/groups");var g=this.getCatalogTileDataFromModel(o);var h=g.tileData.associatedGroups;var d=[];var p=l.map(function(e){var r=t.getGroupId(e.object);var a=!(h&&Array.prototype.indexOf.call(h,r)===-1);d.push({id:r,title:this._getGroupTitle(i,e.object),selected:a});return{selected:a,initiallySelected:a,oGroup:e}}.bind(this));var c;c=t.getCatalogTilePreviewTitle(s.getProperty(o.sPath).src);if(!c){c=t.getCatalogTileTitle(s.getProperty(o.sPath).src)}this.pPopoverView=r.create({id:"sapUshellGroupsPopover",viewName:"module:sap/ushell/components/appfinder/GroupListPopoverView",viewData:{title:c,enableHideGroups:s.getProperty("/enableHideGroups"),enableHelp:s.getProperty("/enableHelp"),sourceContext:o,catalogModel:this.getView().getModel(),catalogController:this}}).then(function(e){e.getController().initializeData({groupData:p});e.open(a).then(this._handlePopoverResponse.bind(this,o,g));this.getView().addDependent(e);return e}.bind(this))}}.bind(this))},_getGroupTitle:function(e,t){var i=this.oLaunchPageService;var r;if(e&&i.getGroupId(e)===i.getGroupId(t)){r=s.i18n.getText("my_group")}else{r=i.getGroupTitle(t)}return r},_handlePopoverResponse:function(e,t,i){if(!i.addToGroups.length&&!i.newGroups.length&&!i.removeFromGroups.length){return}var r=this.getView().getModel();var a=r.getProperty("/groups");var o=[];i.addToGroups.forEach(function(t){var i=a.indexOf(t);var s=new d(r,"/groups/"+i);o.push(this._addTile(e,s))}.bind(this));i.removeFromGroups.forEach(function(t){var i=e.getModel().getProperty(e.getPath()).id;var r=a.indexOf(t);o.push(this._removeTile(i,r))}.bind(this));i.newGroups.forEach(function(t){var i=t.length>0?t:s.i18n.getText("new_group_name");o.push(this._createGroupAndSaveTile(e,i))}.bind(this));jQuery.when.apply(jQuery,o).then(function(){var e=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(t,i,e)}.bind(this))},_handlePopoverGroupsActionPromises:function(e,t,i){var r=i.filter(function(e){return!e.status});if(r.length){var a=this.prepareErrorMessage(r,e.tileData.title);y.resetAssociationOnFailure(a.messageId,a.parameters);return}var o=[];var s=this.oLaunchPageService;t.allGroups.forEach(function(e){if(e.selected){var t=s.getGroupId(e.oGroup.object);o.push(t)}});var n=this.getView().getModel();if(t.newGroups.length){var l=n.getProperty("/groups");var g=l.slice(l.length-t.newGroups.length);g.forEach(function(e){var t=s.getGroupId(e.object);o.push(t)})}n.setProperty(e.bindingContextPath+"/associatedGroups",o);var h=t.addToGroups[0]?t.addToGroups[0].title:"";if(h.length===0&&t.newGroups.length){h=t.newGroups[0]}var d=t.removeFromGroups[0]?t.removeFromGroups[0].title:"";var c=t.addToGroups.length+t.newGroups.length;var u=t.removeFromGroups.length;var f=this.prepareDetailedMessage(e.tileData.title,c,u,h,d);p.show(f,{duration:3e3,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"})},_getCatalogTileIndexInModel:function(e){var t=e.sPath;var i=t.split("/");var r=i[i.length-1];return r},_handleTileFooterClickInGroupContext:function(e,t){var i=this.oLaunchPageService;var r=this.getView().getModel();var a=this.getCatalogTileDataFromModel(e);var o=a.tileData.associatedGroups;var s=r.getProperty(t);var n=i.getGroupId(s.object);var l=o?Array.prototype.indexOf.call(o,n):-1;var g=a.bindingContextPath;if(a.isBeingProcessed){return}r.setProperty(g+"/isBeingProcessed",true);var h;var p;if(l===-1){var c=new d(e.getModel(),t);h=this._addTile(e,c);p=true}else{var u=e.getModel().getProperty(e.getPath("id"));var f=parseInt(t.split("/")[2],10);h=this._removeTile(u,f);p=false}h.done(function(t){if(t.status){this._groupContextOperationSucceeded(e,a,s,p)}else{this._groupContextOperationFailed(a,s,p)}}.bind(this));h.always(function(){r.setProperty(g+"/isBeingProcessed",false)})},_groupContextOperationSucceeded:function(e,t,i,r){var a=this.oLaunchPageService;var o=a.getGroupId(i.object);var s=t.tileData.associatedGroups;var n;if(r){s.push(o);e.getModel().setProperty(t.bindingContextPath+"/associatedGroups",s);n=this.prepareDetailedMessage(t.tileData.title,1,0,i.title,"")}else{for(var l=0;l<s.length;l++){if(s[l]===o){s.splice(l,1);break}}e.getModel().setProperty(t.bindingContextPath+"/associatedGroups",s);n=this.prepareDetailedMessage(t.tileData.title,0,1,"",i.title)}p.show(n,{duration:3e3,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"})},_groupContextOperationFailed:function(e,t,i){var r;if(i){r=s.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[e.tileData.title,t.title]})}else{r=s.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[e.tileData.title,t.title]})}y.notifyOnActionFailure(r.messageId,r.parameters)},prepareErrorMessage:function(e,t){var i;var r;var a;var o=0;var n=0;var l=false;for(var g in e){var h=e[g].group;var d=e[g].action;if(d==="add"){o++;if(o===1){i=h.title}}else if(d==="remove"){n++;if(n===1){r=h.title}}else if(d==="addTileToNewGroup"){o++;if(o===1){i=h.title}}else{l=true}}if(l){if(e.length===1){a=s.i18n.getText({messageId:"fail_tile_operation_create_new_group"})}else{a=s.i18n.getText({messageId:"fail_tile_operation_some_actions"})}}else if(e.length===1){if(o){a=s.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,i]})}else{a=s.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,r]})}}else if(n===0){a=s.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]})}else if(o===0){a=s.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]})}else{a=s.i18n.getText({messageId:"fail_tile_operation_some_actions"})}return a},prepareDetailedMessage:function(e,t,i,r,a){var o;if(t===0){if(i===1){o=s.i18n.getText("tileRemovedFromSingleGroup",[e,a])}else if(i>1){o=s.i18n.getText("tileRemovedFromSeveralGroups",[e,i])}}else if(t===1){if(i===0){o=s.i18n.getText("tileAddedToSingleGroup",[e,r])}else if(i===1){o=s.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[e,r,a])}else if(i>1){o=s.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[e,r,i])}}else if(t>1){if(i===0){o=s.i18n.getText("tileAddedToSeveralGroups",[e,t])}else if(i===1){o=s.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[e,t,a])}else if(i>1){o=s.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[e,t,i])}}return o},getCatalogTileDataFromModel:function(e){var t=e.getPath();var i=e.getModel();var r=i.getProperty(t);return{tileData:r,bindingContextPath:t,isBeingProcessed:r.isBeingProcessed}},_addTile:function(e,t){var i=jQuery.Deferred();var r=y.createTile({catalogTileContext:e,groupContext:t});r.done(function(e){i.resolve(e)});return i},_removeTile:function(e,t){var i=jQuery.Deferred();var r=y.deleteCatalogTileFromGroup({tileId:e,groupIndex:t});r.done(function(e){i.resolve(e)});return i},_createGroupAndSaveTile:function(e,t){var i=jQuery.Deferred();var r=y.createGroupAndSaveTile({catalogTileContext:e,newGroupName:t});r.done(function(e){i.resolve(e)});return i},onExit:function(){u.destroy();i.getEventBus().unsubscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);i.getEventBus().unsubscribe("launchpad","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/CatalogView", ["sap/m/BusyIndicator","sap/m/library","sap/m/List","sap/m/MessagePage","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/m/SplitApp","sap/m/StandardListItem","sap/ui/core/Core","sap/ui/core/mvc/View","sap/ui/core/library","sap/ui/Device","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ushell/ui/appfinder/AppBox","sap/ushell/ui/appfinder/PinButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/CatalogEntryContainer","sap/ushell/ui/launchpad/CatalogsContainer","sap/ushell/ui/launchpad/Tile","sap/ushell/resources"],function(e,t,a,o,i,s,n,l,r,p,u,g,c,jQuery,d,h,f,m,C,v,b,P){"use strict";var y=t.ListSeparators;var T=t.ListMode;var S=u.AccessibleLandmarkRole;return p.extend("sap.ushell.components.appfinder.CatalogView",{oController:null,oVisualizationOrganizerHelper:d.getInstance(),formatPinButtonTooltip:function(e,t){var a;if(t.path){var o=e?Array.prototype.indexOf.call(e,t.id):-1;a=o!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";return P.i18n.getText(a,t.title)}a=e&&e.length?"EasyAccessMenu_PinButton_Toggled_Tooltip":"EasyAccessMenu_PinButton_UnToggled_Tooltip";return P.i18n.getText(a)},formatPinButtonSelectState:function(e,t,a,o){if(a){var i=e?Array.prototype.indexOf.call(e,o):-1;return i!==-1}return!!t},createContent:function(t){var p=this;this.oViewData=this.getViewData();this.parentComponent=this.oViewData.parentComponent;var u=this.parentComponent.getModel();this.setModel(u);this.setModel(this.oViewData.subHeaderModel,"subHeaderModel");this.oVisualizationOrganizerHelper.setModel(u);this.oController=t;function d(e){return e!==null&&(e==="1x2"||e==="2x2")||false}var B=new f({icon:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonIcon},type:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonType},selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","/groupContext","id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonTooltip.bind(this)},press:[this.oVisualizationOrganizerHelper.onTilePinButtonClick,this],visible:false});var M=new f({icon:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonIcon},type:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonType},selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","/groupContext","id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonTooltip.bind(this)},press:[this.oVisualizationOrganizerHelper.onTilePinButtonClick,this],visible:false});this.oAppBoxesTemplate=new h({title:"{title}",icon:"{icon}",subtitle:"{subtitle}",url:"{url}",navigationMode:"{navigationMode}",pinButton:M,press:[t.onAppBoxPressed,t]});this.oVisualizationOrganizerHelper.shouldPinButtonBeVisible().then(function(e){M.setVisible(e);B.setVisible(e)});M.addCustomData(new m({key:"tabindex",value:"-1",writeToDom:true}));M.addStyleClass("sapUshellPinButton");B.addCustomData(new m({key:"tabindex",value:"-1",writeToDom:true}));B.addStyleClass("sapUshellPinButton");this.oTileTemplate=new b({tileViews:{path:"content",factory:function(e,t){return t.getObject()}},long:{path:"size",formatter:d},tileCatalogId:"{id}",tileCatalogIdStable:"{tileCatalogIdStable}",pinButton:B,press:[t.catalogTilePress,t],afterRendering:t.onTileAfterRendering});this.oCatalogSelect=new a("catalogSelect",{visible:"{/enableCatalogSelection}",rememberSelections:true,showSeparators:y.None,mode:T.SingleSelectMaster,items:{path:"/masterCatalogs",template:new l({type:"Active",title:"{title}"})},showNoData:false,itemPress:[t._handleCatalogListItemPress,t],selectionChange:[t._handleCatalogListItemPress,t]});this.getCatalogSelect=function(){return this.oCatalogSelect};var w=this.oCatalogSelect.onAfterRendering;if(g.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e,t){e.getInstance().then(function(e){this.oCatalogSelect.addEventDelegate({onsaptabnext:function(a){try{a.preventDefault();t.setIsFocusHandledByAnotherHandler(true);e.setFocusOnCatalogTile()}catch(e){}},onsapskipforward:function(a){try{a.preventDefault();t.setIsFocusHandledByAnotherHandler(true);e.setFocusOnCatalogTile()}catch(e){}},onsapskipback:function(a){try{a.preventDefault();t.setIsFocusHandledByAnotherHandler(true);var o=r.byId("openCloseButtonAppFinderSubheader");if(o.getVisible()){o.focus()}else{e.appFinderFocusMenuButtons(a)}}catch(e){}}})}.bind(this))}.bind(this))}if(u.getProperty("/enableHelp")){this.oCatalogSelect.addStyleClass("help-id-catalogCategorySelect")}this.setCategoryFilterSelection=function(e,t){var a=p.getCatalogSelect();var o=a.getItems();var i=e;var s=0;if(!i||i===""){i=P.i18n.getText("all")}o.forEach(function(e,t){if(e.getTitle()===i){s=t;a.setSelectedItem(e)}});if(o.length!==0&&t){o[s].focus()}};this.oCatalogSelect.onAfterRendering=function(){var e=p.oController.categoryFilter||P.i18n.getText("all");p.setCategoryFilterSelection(e);if(w){w.apply(this,arguments)}if(!this.getSelectedItem()){this.setSelectedItem(this.getItems()[0])}setTimeout(function(){var e=jQuery("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(e.length){e.eq(0).focus()}else{jQuery("#catalog-button").focus()}},0)};var A=this.oCatalogSelect._onAfterRenderingPopover;this.oCatalogSelect._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false)}if(A){A.apply(this,arguments)}};var x=r.getEventBus();var I;var D=function(){this.splitApp.toMaster("catalogSelect","show");if(!g.system.phone){I=this._calculateDetailPageId();if(I!==this.splitApp.getCurrentDetailPage().getId()){this.splitApp.toDetail(I)}}}.bind(this);x.subscribe("launchpad","catalogContentLoaded",function(){setTimeout(D,500)},this);x.subscribe("launchpad","afterCatalogSegment",D,this);var H=new C({header:"{title}",customTilesContainer:{path:"customTiles",template:this.oTileTemplate,templateShareable:true},appBoxesContainer:{path:"appBoxes",template:this.oAppBoxesTemplate,templateShareable:true}});this.oMessagePage=new o({visible:true,showHeader:false,text:P.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""}).addEventDelegate({onAfterRendering:function(){var e=this.oMessagePage.getDomRef();if(e){var t=e.getElementsByClassName("sapMMessagePageMainText");if(t.length){t[0].setAttribute("tabindex","0")}}}.bind(this),onBeforeRendering:function(){var e=this.oMessagePage.getDomRef();if(e){var t=e.getElementsByClassName("sapMMessagePageMainText");if(t.length){t[0].removeAttribute()}}}.bind(this)});this.oCatalogsContainer=new v("catalogTiles",{categoryFilter:"{/categoryFilter}",catalogs:{path:"/catalogs",templateShareable:true,template:H},busy:true}).addStyleClass("sapUiTinyMarginTop");this.oCatalogsContainer.addStyleClass("sapUshellCatalogTileContainer");this.oCatalogsContainer.addEventDelegate({onsaptabprevious:function(e){var t=r.byId("openCloseButtonAppFinderSubheader");var a=jQuery(e.srcControl.getDomRef());if(t.getVisible()&&!t.getPressed()&&!a.hasClass("sapUshellPinButton")){e.preventDefault();var o=r.byId("appFinderSearch");o.focus()}},onsapskipback:function(e){var t=r.byId("openCloseButtonAppFinderSubheader");if(t.getVisible()&&!t.getPressed()){e.preventDefault();t.focus()}}});this.oCatalogsContainer.onAfterRendering=function(){var e=r.byId("catalogTilesDetailedPage");if(!this.getBusy()){e.setBusy(false);c.end("FLP:AppFinderLoadingStartToEnd")}else{e.setBusy(true)}jQuery("#catalogTilesDetailedPage-cont").scroll(function(){var e=r.byId("catalogTilesDetailedPage");var t=e.getScrollDelegate();var a=t.getScrollTop();var o=t.getMaxScrollTop();if(o-a<=30+3*p.oController.PagingManager.getTileHeight()&&p.oController.bIsInProcess===false){p.oController.bIsInProcess=true;p.oController.allocateNextPage();setTimeout(function(){p.oController.bIsInProcess=false},0)}})};var z=new i("catalogTilesDetailedPage",{showHeader:false,showFooter:false,showNavButton:false,content:[this.oCatalogsContainer.addStyleClass("sapUshellCatalogPage")],landmarkInfo:new s({contentLabel:P.i18n.getText("appFinderCatalogTitle"),contentRole:S.None,rootRole:S.None})});var V=new i("catalogMessagePage",{showHeader:false,showFooter:false,showNavButton:false,content:[this.oMessagePage]});var F=new e("catalogSelectBusyIndicator",{size:"1rem"});this.splitApp=new n("catalogViewMasterDetail",{masterPages:[F,this.oCatalogSelect],detailPages:[z,V],mode:"{= ${/isPhoneWidth} ? 'HideMode' : 'ShowHideMode'}"});return this.splitApp},_calculateDetailPageId:function(){var e=this.getModel("subHeaderModel");var t=e.getProperty("/search/searchMode");var a=e.getProperty("/tag/tagMode");var o=!!this.getModel().getProperty("/catalogsNoDataText");var i;if(t||a){i=this.getController().bSearchResults?"catalogTilesDetailedPage":"catalogMessagePage"}else if(o){i="catalogMessagePage"}else{i="catalogTilesDetailedPage"}return i},getControllerName:function(){return"sap.ushell.components.appfinder.Catalog"}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/Component", ["sap/ui/core/UIComponent","sap/ui/thirdparty/hasher","sap/ushell/components/CatalogsManager","sap/ushell/resources","sap/ushell/Config","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/SharedComponentUtils","sap/base/util/UriParameters"],function(e,t,a,o,s,n,i,r){"use strict";return e.extend("sap.ushell.components.appfinder.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"],manifest:"json",library:"sap.ushell"},init:function(){e.prototype.init.apply(this,arguments);this.oModel=n.getModel();this.setModel(this.oModel);var r,l,p;var h=s.last("/core/shell/enablePersonalization");if(h){i.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings")}this.oCatalogsManager=new a("dashboardMgr",{model:this.oModel});this.setModel(o.i18nModel,"i18n");i.toggleUserActivityLog();r=t.getHash();Promise.all([sap.ushell.Container.getServiceAsync("ShellNavigation"),sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(e){var t=e[0];var a=e[1];var o=a.parseShellHash(r);if(o&&o.semanticObject==="shell"&&o.action==="catalog"){l=this.parseOldCatalogParams(r);p=this.getMetadata().getConfig();t.toExternal({target:{semanticObject:p.semanticObject,action:p.action}});this.getRouter().navTo("catalog",{filters:JSON.stringify(l)})}}.bind(this))},parseOldCatalogParams:function(e){var t=r.fromURL(e).mParams;var a,o;for(o in t){if(t.hasOwnProperty(o)){a=t[o][0];t[o]=a.indexOf("/")!==-1?encodeURIComponent(a):a}}return t},destroy:function(){return Promise.all([e.prototype.destroy.apply(this,arguments),this.oCatalogsManager.destroy()])}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/EasyAccess.controller", ["sap/ui/core/Core","sap/ui/core/mvc/Controller","sap/ui/core/mvc/View","sap/base/Log","sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/datajs","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/Config"],function(e,t,s,r,i,a,jQuery,n,o,l,u,h){"use strict";return t.extend("sap.ushell.components.appfinder.EasyAccess",{DEFAULT_URL:"/sap/opu/odata/UI2",DEFAULT_NUMBER_OF_LEVELS:3,SEARCH_RESULTS_PER_REQUEST:100,onInit:function(){var e=this;this.translationBundle=n.i18n;this.oView=this.getView();var t=this.oView.getModel("easyAccessSystemsModel");var s=t.bindProperty("/systemSelected");s.attachChange(e.adjustUiOnSystemChange.bind(this));this.menuName=this.oView.getViewData().menuName;this.systemId=null;this.easyAccessCache={};this.easyAccessModel=new o;this.easyAccessModel.setSizeLimit(1e3);Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(function(e){e[0].setModel(this.easyAccessModel,"easyAccess");e[1].setModel(this.easyAccessModel,"easyAccess")}.bind(this));if(!h.last("/core/spaces/enabled")){sap.ui.require(["sap/ushell/components/HomepageManager"],function(e){var t=this.getView().getModel();if(!t.getProperty("/catalogs")){if(!t.getProperty("/groups")||t.getProperty("/groups").length===0){var s=e.prototype.getInstance();if(s){this.oHomepageManager=s;this.oHomepageManager.loadPersonalizedGroups()}else{r.error("The homepage manager was not initialized. Tiles in user and sap menu cannot be added to groups.")}}}}.bind(this))}var i=this.oView.getModel("subHeaderModel");var a=i.bindProperty("/openCloseSplitAppButtonToggled");a.attachChange(e.handleToggleButtonModelChanged.bind(this));if(this.oView.getViewData().enableSearch){var l=i.bindProperty("/search");l.attachChange(e.handleSearchModelChanged.bind(this))}this.checkIfSystemSelectedAndLoadData()},checkIfSystemSelectedAndLoadData:function(){var e=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(e){this.systemId=e.systemId;this.loadMenuItemsFirstTime(this.oView.getViewData().menuName,e)}},navigateHierarchy:function(e,t){Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(function(s){var r=s[0];var i=s[1];r.setBusy(false);var a=this.easyAccessModel.getProperty(e||"/");if(typeof a.folders!=="undefined"){r.updatePageBindings(e,t);i.getController().updatePageBindings(e);return}r.setBusy(true);this.getMenuItems(this.menuName,this.systemId,a.id,a.level).then(function(e,s){this.easyAccessModel.setProperty(e+"/folders",s.folders);this.easyAccessModel.setProperty(e+"/apps",s.apps);r.updatePageBindings(e,t);i.getController().updatePageBindings(e);r.setBusy(false)}.bind(this,e),function(e){this.handleGetMenuItemsError(e)}.bind(this))}.bind(this))},handleSearch:function(e){var t=!this.pHierarchyAppsSearchResults;if(t){this.pHierarchyAppsSearchResults=s.create({id:this.getView().getId()+"hierarchyAppsSearchResults",viewName:"module:sap/ushell/components/appfinder/HierarchyAppsView",height:"100%",viewData:{easyAccessSystemsModel:this.oView.getModel("easyAccessSystemsModel"),getMoreSearchResults:this.getMoreSearchResults.bind(this),CatalogsManager:this.getView().getViewData().CatalogsManager}}).then(function(e){this.easyAccessSearchResultsModel=new o;this.easyAccessSearchResultsModel.setSizeLimit(1e4);e.setModel(this.easyAccessSearchResultsModel,"easyAccess");e.setBusyIndicatorDelay(this.getView().BUSY_INDICATOR_DELAY);e.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");e.addCustomData(new u({key:"role",value:"region",writeToDom:true}));e.addCustomData(new u({key:"aria-label",value:this.oView.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));return e}.bind(this))}this.pHierarchyAppsSearchResults.then(function(s){this.searchResultFrom=0;this.oView.splitApp.getCurrentDetailPage().setBusy(true);this.easyAccessSearchResultsModel.setProperty("/apps",[]);this.easyAccessSearchResultsModel.setProperty("/total",0);this._getSearchResults(e,this.searchResultFrom).then(function(e){sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){e.results.forEach(function(e){r.countBookmarks(e.url).then(function(t){e.bookmarkCount=t})});this.easyAccessSearchResultsModel.setProperty("/apps",e.results);this.easyAccessSearchResultsModel.setProperty("/total",e.count);this.searchResultFrom=e.results.length;if(t){this.oView.splitApp.addDetailPage(s)}s.updateResultSetMessage(parseInt(e.count,10),true);this.oView.splitApp.getCurrentDetailPage().setBusy(false);if(this.oView.splitApp.getCurrentDetailPage()!==s){this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyAppsSearchResults")}}.bind(this))}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.splitApp.getCurrentDetailPage().setBusy(false)}.bind(this));return s}.bind(this))},getMoreSearchResults:function(){if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true)}var e=this.oView.getModel("subHeaderModel");var t=e.getProperty("/search/searchTerm");this._getSearchResults(t,this.searchResultFrom).then(function(e){var t=this.easyAccessSearchResultsModel.getProperty("/apps");var s=t.slice();Array.prototype.push.apply(s,e.results);this.easyAccessSearchResultsModel.setProperty("/apps",s);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(false)}this.searchResultFrom=s.length}.bind(this),function(e){this.handleGetMenuItemsError(e);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true)}}.bind(this))},_getSearchResults:function(e,t){var s=new jQuery.Deferred;var r=this._getODataRequestForSearchUrl(this.menuName,this.systemId,e,t);var i={requestUri:r};var a=this._callODataService(i,this.handleSuccessOnReadFilterResults);a.done(function(e){s.resolve(e)});a.fail(function(e){s.reject(e)});return s.promise()},getSystemNameOrId:function(){var e=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(e){return e.name||e.id}return undefined},adjustUiOnSystemChange:function(){var e=this.easyAccessModel.getData();if(this.systemId&&e&&e.id){this.easyAccessCache[this.systemId]=e}var t=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(t){this.systemId=t.systemId;var s=this.easyAccessCache[this.systemId];if(s){this.easyAccessModel.setData(s);this.navigateHierarchy("",false)}else{Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(function(e){e[0].setBusy(true);e[1].setBusy(true)});this.loadMenuItemsFirstTime(this.menuName,t)}}},handleToggleButtonModelChanged:function(){var e=this.oView.getModel("subHeaderModel");var t=e.getProperty("/openCloseSplitAppButtonVisible");var s=e.getProperty("/openCloseSplitAppButtonToggled");var r=this.getView().splitApp;if(t){if(s&&!r.isMasterShown()){r.showMaster()}else if(r.isMasterShown()){r.hideMaster()}}},handleSearchModelChanged:function(){var t=this.oView.getModel("subHeaderModel");var s=t.getProperty("/activeMenu");if(this.getView().getId().indexOf(s)===-1){return}var r=t.getProperty("/search/searchTerm");var i=t.getProperty("/search/searchMode");if(i){e.byId("appFinderSearch").getCustomData()[0].setValue(this.getView().getId()+"hierarchyAppsSearchResults");if(r){this.handleSearch(r)}}else{e.byId("appFinderSearch").getCustomData()[0].setValue("");this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyApps")}},loadMenuItemsFirstTime:function(e,t){return this.getMenuItems(e,t.systemId,"",0).then(function(e){e.text=t.systemName||t.systemId;this.easyAccessModel.setData(e);Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(function(e){e[0].setBusy(false);e[1].setBusy(false)});this.navigateHierarchy("",false)}.bind(this),function(e){this.handleGetMenuItemsError(e);Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(function(e){e[0].updatePageBindings("/",false);e[1].getController().updatePageBindings("/")})}.bind(this))},handleGetMenuItemsError:function(e){var t=this.getErrorMessage(e);sap.ui.require(["sap/m/MessageBox"],function(e){e.error(t)});this.easyAccessModel.setData("");this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false)},_getErrorDetails:function(e){try{var t=JSON.parse(e.response.body);return t.error.message.value}catch(e){return null}},getErrorMessage:function(e){var t="";if(this.menuName==="SAP_MENU"){t=this.translationBundle.getText("easyAccessSapMenuNameParameter")}else if(this.menuName==="USER_MENU"){t=this.translationBundle.getText("easyAccessUserMenuNameParameter")}if(e){if(e.message){var s=this._getErrorDetails(e);if(s){return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgWithDetails",[t,e.message,s])}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[t,e.message])}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[t,e])}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgNoReason",t)},getMenuItems:function(e,t,s,r,i){var a=new jQuery.Deferred;if(e!=="SAP_MENU"&&e!=="USER_MENU"){a.reject("Invalid menuType parameter");return a.promise()}if(typeof t!=="string"||t===""){a.reject("Invalid systemId parameter");return a.promise()}if(typeof s!=="string"){a.reject("Invalid entityId parameter");return a.promise()}if(typeof r!=="number"){a.reject("Invalid entityLevel parameter");return a.promise()}if(i&&typeof i!=="number"){a.reject("Invalid numberOfNextLevels parameter");return a.promise()}if(s===""){r=0}var n;var o=this.getView().getModel();var l=o.getProperty("/easyAccessNumbersOfLevels");if(l){n=l}else if(i){n=i}else{n=this.DEFAULT_NUMBER_OF_LEVELS}var u=r+n+1;var h=this._getODataRequestUrl(e,t,s,u);var c={requestUri:h};var d=this._callODataService(c,this.handleSuccessOnReadMenuItems,{systemId:t,entityId:s,iLevelFilter:u});d.done(function(e){a.resolve(e)});d.fail(function(e){a.reject(e)});return a.promise()},_callODataService:function(t,s,r){var i,n;var o=new jQuery.Deferred;if(sap.ushell.Container){i=sap.ushell.Container.getUser().getLanguage();if(i&&t.requestUri.indexOf("sap-language=")<0){t.requestUri+=(t.requestUri.indexOf("?")>=0?"&":"?")+"sap-language="+i}var l=sap.ushell.Container.getLogonSystem();n=l&&l.getClient()}sap.ui.require(["sap/ui/thirdparty/datajs"],function(){a.read({requestUri:t.requestUri,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":e.getConfiguration().getLanguage()||"","sap-client":n||"","sap-language":i||""}},function(e,t){if(e&&e.results&&t&&t.statusCode===200){var i=s.bind(this,e,r||{})();o.resolve(i)}}.bind(this),function(e){o.reject(e)})}.bind(this));return o.promise()},handleSuccessOnReadMenuItems:function(e,t){var s=this._oDataResultFormatter(e.results,t.systemId,t.entityId,t.iLevelFilter);return s},handleSuccessOnReadFilterResults:function(e){var t;e.results.forEach(function(e,s){t=this._appendSystemToUrl(e,this.systemId);e.url=t}.bind(this));return{results:e.results,count:e.__count}},_appendSystemToUrl:function(e,t){if(e.url){return e.url+(e.url.indexOf("?")>0?"&":"?")+"sap-system="+t}},_oDataResultFormatter:function(e,t,s,r){var i={};var a={};if(s===""){a={id:"root",text:"root",level:0,folders:[],apps:[]};i.root=a}else{a={id:s,folders:[],apps:[]};i[s]=a}var n;for(var o=0;o<e.length;o++){n=e[o];var l;if(n.level==="01"){l=i.root}else{l=i[n.parentId]}var u={id:n.Id,text:n.text,subtitle:n.subtitle,icon:n.icon,level:parseInt(n.level,10)};if(n.type==="FL"){u.folders=[];u.apps=[];if(n.level==r-1){u.folders=undefined;u.apps=undefined}if(l&&l.folders){l.folders.push(u)}i[n.Id]=u}else{u.url=this._appendSystemToUrl(n,t);if(l&&l.apps){l.apps.push(u)}}}return a},_getODataRequestUrl:function(e,t,s,r){var i=this._getServiceUrl(e);var a;if(r<10){a="0"+r}else{a=r.toString()}var n="";if(s){if(decodeURIComponent(s)===s){s=encodeURIComponent(s)}n="('"+s+"')/AllChildren"}i=i+";o="+t+"/MenuItems"+n+"?$filter=level lt '"+a+"'&$orderby=level,text";return i},_getODataRequestForSearchUrl:function(e,t,s,r){var a=this._getServiceUrl(e);var n=this.SEARCH_RESULTS_PER_REQUEST;s=this._removeWildCards(s);s=encodeURIComponent(s);r=!r?0:r;s=i.formatValue(s,"Edm.String");a=a+";o="+t+"/MenuItems?$filter=type ne 'FL' and ("+"substringof("+s+", text) or "+"substringof("+s+", subtitle) or "+"substringof("+s+", url)"+")"+"&$orderby=text,subtitle,url&$inlinecount=allpages&$skip="+r+"&$top="+n;return a},_getServiceUrl:function(e){var t;var s=this.getView().getModel();if(e==="SAP_MENU"){var r=s.getProperty("/sapMenuServiceUrl");if(r){t=r}else{t=this.DEFAULT_URL+"/EASY_ACCESS_MENU"}}else if(e==="USER_MENU"){var i=s.getProperty("/userMenuServiceUrl");if(i){t=i}else{t=this.DEFAULT_URL+"/USER_MENU"}}return t},_removeWildCards:function(e){return e.replace(/\*/g,"")}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/EasyAccessView", ["sap/ui/core/mvc/View","sap/m/SplitApp","sap/ushell/resources"],function(e,s,t){"use strict";return e.extend("sap.ushell.components.appfinder.EasyAccessView",{BUSY_INDICATOR_DELAY:1e3,createContent:function(i){this.oResourceBundle=t.i18n;this.setModel(this.getViewData().easyAccessSystemsModel,"easyAccessSystemsModel");this.setModel(this.getViewData().subHeaderModel,"subHeaderModel");this.setModel(this.getViewData().parentComponent.getModel());this.pHierarchyFolders=e.create({viewName:"module:sap/ushell/components/appfinder/HierarchyFoldersView",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(i),easyAccessSystemsModel:this.getModel("easyAccessSystemsModel"),subHeaderModel:this.getModel("subHeaderModel")}}).then(function(e){this.hierarchyFolders=e;this.hierarchyFolders.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyFolders.addStyleClass("sapUshellHierarchyFolders");return e}.bind(this));var a=this.getViewData();this.pHierarchyApps=e.create({id:this.getId()+"hierarchyApps",viewName:"module:sap/ushell/components/appfinder/HierarchyAppsView",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(i),menuName:a.menuName,CatalogsManager:this.getViewData().CatalogsManager}}).then(function(e){this.hierarchyApps=e;this.hierarchyApps.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);return e}.bind(this));this.splitApp=new s;Promise.all([this.pHierarchyFolders,this.pHierarchyApps]).then(function(e){this.splitApp.addMasterPage(e[0]);this.splitApp.addDetailPage(e[1]);this.splitApp.setInitialMaster(e[0]);this.splitApp.setInitialDetail(e[1])}.bind(this));return this.splitApp},getControllerName:function(){return"sap.ushell.components.appfinder.EasyAccess"}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/GroupListPopover.controller", ["sap/ui/core/mvc/Controller","sap/m/library","sap/ushell/resources","sap/ui/Device","sap/ui/model/json/JSONModel"],function(e,o,t,r,i){"use strict";var s=o.ListMode;return e.extend("sap.ushell.components.appfinder.GroupListPopover",{onExit:function(){var e=this.getView();if(e._oListContainer){e._oListContainer.destroy()}if(e._oNewGroupItem){e._oNewGroupItem.destroy()}if(e._oNewGroupNameInput){e._oNewGroupNameInput.destroy()}if(e._oNewGroupHeader){e._oNewGroupHeader.destroy()}},initializeData:function(e){this.oPopoverModel=new i({userGroupList:e.groupData});this.oPopoverModel.setSizeLimit(9999);this.getView().oPopover.setModel(this.oPopoverModel)},_cancelButtonPress:function(){this.getView().oPopover.close()},_groupListItemClickHandler:function(e){var o=e.getParameter("listItem");if(o.data("newGroupItem")){this._navigateToCreateNewGroupPane();return}var t=e.getSource();if(t.getMode()===s.SingleSelectMaster){var r=this.getView();r.oPopover.close()}else{o.setSelected(!o.getSelected())}},_okayCancelButtonPress:function(){var e=this.getView();var o=e._getNewGroupInput();var t=o.getValue();if(t.length>0){this.sNewGroupId=t}e.oPopover.close()},_navigateToCreateNewGroupPane:function(){var e=this.getView();var o=e._getNewGroupHeader();var r=e._getNewGroupInput();e.oPopover.removeAllContent();e.oPopover.addContent(r);e.oPopover.setCustomHeader(o);e.oPopover.setContentHeight("");var i=e.oPopover.getEndButton();if(i){i.setVisible(true)}else{i=e._getCancelButton();e.oPopover.setEndButton(i)}e.oPopover.getBeginButton().setText(t.i18n.getText("okDialogBtn"));i.setText(t.i18n.getText("cancelBtn"));if(e.getViewData().singleGroupSelection){this._setFooterVisibility(true)}setTimeout(function(){r.focus()},0)},_afterCloseHandler:function(){var e=this.oPopoverModel.getProperty("/userGroupList");var o={addToGroups:[],removeFromGroups:[],newGroups:this.sNewGroupId?[this.sNewGroupId]:[],allGroups:e};var t;for(var r=0,i=e.length;r<i;++r){t=e[r];if(t.selected===t.initiallySelected){continue}if(t.selected){o.addToGroups.push(t.oGroup)}else{o.removeFromGroups.push(t.oGroup)}}var s=this.getView();s.deferred.resolve(o);s.destroy()},_backButtonHandler:function(){var e=this.getView();e.oPopover.removeAllContent();if(e.getViewData().singleGroupSelection){this._setFooterVisibility(false)}if(!r.system.phone){e.oPopover.setContentHeight("192px")}else{e.oPopover.setContentHeight("100%")}e.oPopover.setVerticalScrolling(true);e.oPopover.setHorizontalScrolling(false);e.oPopover.addContent(e._getListContainer());e.oPopover.setTitle(t.i18n.getText("addTileToGroups_popoverTitle"));e.oPopover.setCustomHeader();e._getNewGroupInput().setValue("");e.oPopover.getEndButton().setVisible(false);e.oPopover.getBeginButton().setText(t.i18n.getText("close"))},_setFooterVisibility:function(e){var o=sap.ui.getCore().byId("groupsPopover-footer");if(o){o.setVisible(e)}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/GroupListPopoverView", ["sap/ui/thirdparty/jquery","sap/ui/core/mvc/View","sap/m/ResponsivePopover","sap/ushell/resources","sap/m/ScrollContainer","sap/ui/Device","sap/m/StandardListItem","sap/m/List","sap/m/Input","sap/m/Button","sap/ui/core/IconPool","sap/m/Bar","sap/m/Label","sap/m/DisplayListItem","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(jQuery,e,t,o,i,n,r,s,u,a,p,l,c,h,d,_,g){"use strict";var m=d.ListMode;var G=d.ListType;return e.extend("sap.ushell.components.appfinder.GroupListPopoverView",{getControllerName:function(){return"sap.ushell.components.appfinder.GroupListPopover"},createContent:function(e){this.oPopover=new t({id:"groupsPopover",placement:"Auto",title:o.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:"20rem",beginButton:this._getCloseButton(),content:this._getListContainer(),afterClose:[e._afterCloseHandler,e]}).addStyleClass("sapContrastPlus");this.addDependent(this.oPopover);this.oPopover.setInitialFocus(this._getNewGroupListItem())},open:function(e){if(document.body.clientHeight-e.getDomRef().getBoundingClientRect().bottom>=310){this.oPopover.setPlacement("Bottom")}this.oPopover.openBy(e);if(this.getViewData().singleGroupSelection){this.getController()._setFooterVisibility(false)}this.deferred=jQuery.Deferred();return this.deferred.promise()},_getListContainer:function(){if(!this._oListContainer){var e=this._getGroupList();this._oListContainer=new i({id:"popoverContainer",horizontal:false,vertical:true,content:[e],height:n.system.phone?"100%":"190px"})}return this._oListContainer},_getNewGroupInput:function(){if(!this._oNewGroupNameInput){this._oNewGroupNameInput=new u("newGroupNameInput",{type:"Text",placeholder:o.i18n.getText("new_group_name")})}return this._oNewGroupNameInput},_getNewGroupHeader:function(){if(!this._oNewGroupHeader){var e=this.getController();var t=new a({icon:p.getIconURI("nav-back"),press:[e._backButtonHandler,e],tooltip:o.i18n.getText("newGroupGoBackBtn_tooltip")});t.addStyleClass("sapUshellCatalogNewGroupBackButton");this._oNewGroupHeader=new l("oHeadBar",{contentLeft:[t],contentMiddle:[new c({text:o.i18n.getText("newGroup_popoverTitle")})]})}return this._oNewGroupHeader},_getGroupList:function(){if(!this._oGroupList){var e=this.getController();var t=new h({label:"{oGroup/title}",selected:"{selected}",tooltip:"{oGroup/title}",type:G.Active});var o=[new _("oGroup/isGroupLocked",g.EQ,false)];var i=this.getViewData();if(i.enableHideGroups){o.push(new _("oGroup/isGroupVisible",g.EQ,true))}this._oGroupList=new s({mode:i.singleGroupSelection?m.SingleSelectMaster:m.MultiSelect,items:{path:"/userGroupList",template:t,filters:o,templateShareable:false},itemPress:[e._groupListItemClickHandler,e]});var n=this._getNewGroupListItem();this._oGroupList.addEventDelegate({onBeforeRendering:function(){this._oGroupList.insertAggregation("items",n,0,true)}.bind(this),onAfterRendering:function(){this._oGroupList.removeAggregation("items",n,true)}.bind(this)})}return this._oGroupList},_getNewGroupListItem:function(){if(!this._oNewGroupItem){this._oNewGroupItem=new r("newGroupItem",{title:o.i18n.getText("newGroup_listItemText"),type:G.Navigation});this._oNewGroupItem.data("newGroupItem",true);this._oNewGroupItem.getList=function(){return this._oGroupList}.bind(this);this._oNewGroupItem.getModeControl=function(){return null};this._oNewGroupItem.onsapspace=function(e){e.preventDefault();e.isMarked()};this._oNewGroupItem.addEventDelegate({onsaptabnext:function(e){e.preventDefault();e._bIsStopHandlers=true;this._getCloseButton().focus()}})}return this._oNewGroupItem},_getCancelButton:function(){if(!this._oCancelButton){var e=this.getController();this._oCancelButton=new a("cancelButton",{press:[e._cancelButtonPress,e],text:o.i18n.getText("cancelBtn")})}return this._oCancelButton},_getCloseButton:function(){if(!this._oCloseButton){var e=this.getController();this._oCloseButton=new a("closeButton",{press:[e._okayCancelButtonPress,e],text:o.i18n.getText("closeBtn")})}return this._oCloseButton}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyApps.controller", ["sap/ui/core/mvc/View","sap/ui/core/mvc/Controller","sap/ui/thirdparty/jquery","sap/m/MessageToast","sap/ushell/resources"],function(e,t,jQuery,r,o){"use strict";var a;return t.extend("sap.ushell.components.appfinder.HierarchyApps",{onInit:function(){var e=this.getView().getViewData().easyAccessSystemsModel;if(e){this.getView().setModel(e,"easyAccessSystems")}a=this.getView().getViewData().CatalogsManager&&this.getView().getViewData().CatalogsManager.getInstance()},getCrumbsData:function(e,t){var r=e.split("/");r.splice(r.length-2,2);var o=[];while(r.length){var a=r.join("/");var s=t.getProperty(a+"/text");o.unshift({text:s,path:a});r.splice(r.length-2,2)}return o},_updateAppBoxedWithPinStatuses:function(e){var t=this.getView();if(!e){e=t.layout.getBinding("items").getPath()}var r=t.getModel("easyAccess");var o=r.getProperty(e)?r.getProperty(e):[];this.getView().oVisualizationOrganizerHelper.updateBookmarkCount.call(this,o).then(function(t){r.setProperty(e,t)})},updateBookmarkCount:function(e){return sap.ushell.Container.getServiceAsync("Bookmark").then(function(t){var r=e.map(function(e){return t.countBookmarks(e.url).then(function(t){e.bookmarkCount=t;return e})});return new Promise(function(e){jQuery.when.apply(jQuery,r).then(function(){var t=Array.prototype.slice.call(arguments);e(t)})})})},updatePageBindings:function(e){this.getView().layout.bindAggregation("items","easyAccess>"+e+"/apps",this.getView().oItemTemplate);this._updateAppBoxedWithPinStatuses(e+"/apps");this.getView().breadcrumbs.bindProperty("currentLocationText","easyAccess>"+e+"/text");var t=this.getCrumbsData(e,this.getView().getModel("easyAccess"));this.getView().crumbsModel.setProperty("/crumbs",t);var r=this.getView().getModel("easyAccess").getProperty(e+"/apps");this.getView().updateResultSetMessage(r.length,false)},onAppBoxPressed:function(e){if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return}var t=e.getSource().getProperty("url");if(t&&t.indexOf("#")===0){hasher.setHash(t)}},_handleSuccessMessage:function(e,t){var a;var s=t.addToGroups?t.addToGroups.length:0;var i=t.newGroups?t.newGroups.length:0;var n=s+i;if(n===1){var u;if(s===1){u=t.addToGroups[0].title}else{u=t.newGroups[0]}a=o.i18n.getText("appAddedToSingleGroup",[e.text,u])}else{a=o.i18n.getText("appAddedToSeveralGroups",[e.text,n])}if(n>0){r.show(a,{duration:3e3,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"})}return a},_prepareErrorMessage:function(e,t){var r,a,s,i=0,n=false,u;for(var p in e){r=e[p].group;a=e[p].action;if(a==="addBookmark_ToExistingGroup"){i++;if(i===1){s=r.title}}else if(a==="addBookmark_ToNewGroup"){i++;if(i===1){s=r}}else{n=true}}if(n){if(e.length===1){u=o.i18n.getText({messageId:"fail_tile_operation_create_new_group"})}else{u=o.i18n.getText({messageId:"fail_tile_operation_some_actions"})}}else if(e.length===1){u=o.i18n.getText({messageId:"fail_app_operation_add_to_group",parameters:[t,s]})}else{u=o.i18n.getText({messageId:"fail_app_operation_add_to_several_groups",parameters:[t]})}return u},_handleBookmarkAppPopoverResponse:function(e,t){var r=[];t.newGroups.forEach(function(t){r.push(this._createGroupAndAddBookmark(t,e))}.bind(this));t.addToGroups.forEach(function(t){r.push(this._addBookmark(t,e))}.bind(this));return jQuery.when.apply(jQuery,r).then(function(){var r=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(e,t,r)}.bind(this))},_handlePopoverGroupsActionPromises:function(e,t,r){var o=r.filter(function(e,t,r){return!e.status});if(o.length){var s=this._prepareErrorMessage(o,e.text);a.notifyOnActionFailure(s.messageId,s.parameters);return}this._updateAppBoxedWithPinStatuses();this._handleSuccessMessage(e,t)},_createGroupAndAddBookmark:function(e,t){var r=jQuery.Deferred(),o={};var s=a.createGroup(e);s.done(function(a){var s=this._addBookmark(a.getObject(),t,true);s.done(function(e){r.resolve(e)}).fail(function(){o={group:e,status:0,action:"addBookmark_ToNewGroup"};r.resolve(o)})}.bind(this)).fail(function(){o={group:e,status:0,action:"addBookmark_NewGroupCreation"};r.resolve(o)});return r.promise()},_addBookmark:function(e,t,r){var o=jQuery.Deferred(),a={};sap.ushell.Container.getServiceAsync("Bookmark").then(function(s){var i=s.addBookmark({url:t.url,title:t.text,subtitle:t.subtitle,icon:t.icon},e.object);var n=r?"addBookmark_ToNewGroup":"addBookmark_ToExistingGroup";i.done(function(){a={group:e,status:1,action:n};o.resolve(a)}).fail(function(){a={group:e,status:0,action:n};o.resolve(a)})});return o.promise()},showSaveAppPopover:function(e){this.getView().oVisualizationOrganizerHelper.onHierarchyAppsPinButtonClick.call(this,e).then(function(e){if(e){this._updateAppBoxedWithPinStatuses()}}.bind(this))},showGroupListPopover:function(t){var r=this.getView().getModel();var o=t.oSource.getParent().getBinding("title").getContext().getObject();var a=t.oSource;if(r.getProperty("/groupContext").path){var s=r.getProperty("/groupContext").path;var i=r.getProperty(s);var n={newGroups:[],addToGroups:[i]};this._handleBookmarkAppPopoverResponse(o,n);return}var u=r.getProperty("/groups").map(function(e){return{selected:false,initiallySelected:false,oGroup:e}});e.create({viewName:"module:sap/ushell/components/appfinder/GroupListPopoverView",viewData:{enableHideGroups:r.getProperty("/enableHideGroups"),enableHelp:r.getProperty("/enableHelp"),singleGroupSelection:true}}).then(function(e){e.getController().initializeData({groupData:u});var t=e.open(a);t.then(this._handleBookmarkAppPopoverResponse.bind(this,o));this.getView().addDependent(e);return e}.bind(this))},resultTextFormatter:function(e,t){var r=o.i18n;if(e){var a=e.systemName?e.systemName:e.systemId;var s="";if(t){s=r.getText("search_easy_access_results",[t,a])}return s}return""},showMoreResultsVisibilityFormatter:function(e,t){if(e&&e.length<t){return true}return false},showMoreResultsTextFormatter:function(e,t){if(!e||!t){return""}var r=e.length;return o.i18n.getText("EasyAccessSearchResults_ShowMoreResults",[r,t])}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyAppsView", ["sap/ui/core/library","sap/ui/core/mvc/View","sap/ushell/ui/appfinder/AppBox","sap/ushell/ui/appfinder/PinButton","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/FlexBox","sap/m/library","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/m/MessagePage","sap/ui/model/json/JSONModel","sap/m/Link","sap/m/Breadcrumbs","sap/m/Text","sap/m/Title","sap/m/Button","sap/ushell/components/appfinder/VisualizationOrganizerHelper"],function(e,t,s,a,i,o,r,n,l,p,u,c,h,m,d,g,y,f){"use strict";var b=n.ButtonType;var T=n.FlexWrap;var x=e.TitleLevel;var A=e.AccessibleLandmarkRole;return t.extend("sap.ushell.components.appfinder.HierarchyAppsView",{oVisualizationOrganizerHelper:f.getInstance(),createContent:function(e){this.oController=e;var t=new a({icon:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonIcon},type:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonType},selected:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonTooltip.bind(this)},press:e.showSaveAppPopover.bind(e)});t.addCustomData(new o({key:"tabindex",value:"-1",writeToDom:true}));t.addStyleClass("sapUshellPinButton");this.oItemTemplate=new s({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:t,press:[e.onAppBoxPressed,e]});this.oItemTemplate.addCustomData(new o({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new r(this.getId()+"_hierarchyAppsLayout",{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:T.Wrap});this.layout.addDelegate({onAfterRendering:function(){var e=this.getItems();var t=function(e){if(e.getKey()==="tabindex"){e.setValue("0")}};if(e.length){e[0].getCustomData().forEach(t);e[0].getPinButton().getCustomData().forEach(t)}}.bind(this.layout)});this.oMessagePage=new u({visible:false,showHeader:false,text:i.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""});var n=this.getViewData();var d=n.menuName==="USER_MENU"?"appFinderUserMenuTitle":"appFinderSapMenuTitle";var f=new l({showHeader:false,landmarkInfo:new p({contentLabel:i.i18n.getText(d),contentRole:A.Region})}).addStyleClass("sapUshellAppsView sapUiContentPadding");if(n&&n.navigateHierarchy){this.crumbsModel=new c({crumbs:[]});this.linkTemplate=new h({text:"{crumbs>text}",press:function(e){var t=e.oSource.getBinding("text").getContext().getObject();n.navigateHierarchy(t.path,false)}});this.breadcrumbs=new m({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");f.addContent(this.breadcrumbs)}else{this.resultText=new g({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:e.resultTextFormatter.bind(e)},level:x.H3}).addStyleClass("sapUiTinyMarginTop sapUiSmallMarginBottom sapUshellEasyAccessSearchResultText");f.addContent(this.resultText);this.showMoreResultsLink=new y({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:e.showMoreResultsTextFormatter.bind(e)},press:n.getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:e.showMoreResultsVisibilityFormatter.bind(e)},type:b.Transparent})}f.addContent(this.oMessagePage);f.addContent(this.layout);if(this.showMoreResultsLink){f.addContent(this.showMoreResultsLink)}return f},formatPinButtonTooltip:function(e,t,s,a,o){var r=i.i18n,n;if(s){var l=e?Array.prototype.indexOf.call(e,a):-1;var p=l!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";n=r.getText(p,o)}else{n=t?r.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):r.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip")}return n},updateResultSetMessage:function(e,t){var s;if(t){s="noFilteredItems"}else{s="EasyAccessMenu_NoAppsToDisplayMessagePage_Text"}if(e){if(t){this.resultText.updateProperty("text");this.resultText.setVisible(true)}this.layout.setVisible(true);this.oMessagePage.setVisible(false)}else{if(t){this.resultText.setVisible(false)}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var a=i.i18n.getText(s);this.oMessagePage.setText(a)}},setShowMoreResultsBusy:function(e){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(e)}},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyApps"}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyFolders.controller", ["sap/ui/core/mvc/Controller","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/m/StandardListItem","sap/m/SelectDialog","sap/ui/core/Component"],function(e,t,jQuery,s,i,r,n,o){"use strict";return e.extend("sap.ushell.components.appfinder.HierarchyFolders",{onInit:function(){this.oDialog=null;this.getView().setModel(this.getView().getViewData().easyAccessSystemsModel,"easyAccessSystems");this.getView().setModel(this.getView().getViewData().subHeaderModel,"subHeaderModel");this.getSelectedSystem().then(function(e){if(e){this.setSystemSelected(e)}else{this.setSystemSelected(undefined);this.onSystemSelectionPress()}}.bind(this),function(){this.setSystemSelected(undefined);this.onSystemSelectionPress()})},onExit:function(){if(this.oDialog){this.destroyDialog()}},onAfterRendering:function(){var e=jQuery("#"+this.getView().getId());e.on("click",function(){this.exitSearchMode()}.bind(this))},getPersonalizer:function(){if(!this.oPersonalizerPromise){this.oPersonalizerPromise=sap.ushell.Container.getServiceAsync("Personalization").then(function(e){var t=o.getOwnerComponentFor(this),s={keyCategory:e.constants.keyCategory.FIXED_KEY,writeFrequency:e.constants.writeFrequency.LOW,clientStorageAllowed:true},i={container:"appfinder.HierarchyFolders",item:"lastSelectedSystem"};return e.getPersonalizer(i,s,t)}.bind(this))}return this.oPersonalizerPromise},getSelectedSystem:function(){var e=new jQuery.Deferred,t=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(t&&t.length&&t.length===1){var s=t[0];this.setSystemSelectedInPersonalization(s);e.resolve(s)}else{this.getSelectedSystemInPersonalization().then(function(s){if(s){var i=false;for(var r=0;r<t.length;r++){if(t[r].systemName&&t[r].systemName===s.systemName||t[r].systemId===s.systemId){i=true;e.resolve(s)}}if(!i){e.resolve();this.setSystemSelectedInPersonalization()}}else{e.resolve()}}.bind(this))}return e.promise()},setSystemSelected:function(e){this.getView().getModel("easyAccessSystems").setProperty("/systemSelected",e);this.setSystemSelectedInPersonalization(e)},getSelectedSystemInPersonalization:function(){var e=new jQuery.Deferred;this.getPersonalizer().then(function(s){s.getPersData().then(function(t){if(t){e.resolve(t)}else{e.resolve()}},function(s){t.error("Failed to get selected system from the personalization",s,"sap.ushell.components.appfinder.HierarchyFolders");e.reject()})});return e.promise()},setSystemSelectedInPersonalization:function(e){this.getPersonalizer().then(function(s){s.setPersData(e).fail(function(e){t.error("Failed to save selected system in the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders")})})},onSystemSelectionPress:function(){var e=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(e&&e.length&&e.length<=1){return}var t=this.createDialog();t.open()},createDialog:function(){var e=this;if(!this.oDialog){this.oDialog=new n({id:"systemSelectionDialog",title:e.getView().translationBundle.getText("easyAccessSelectSystemDialogTitle"),multiSelect:false,contentHeight:"20rem",items:{path:"/systemsList",template:new r({adaptTitleSize:false,title:{parts:["systemName","systemId"],formatter:e.titleFormatter},description:{parts:["systemName","systemId"],formatter:e.descriptionFormatter},selected:{parts:["systemName","systemId"],formatter:e.selectedFormatter.bind(this)}})},confirm:e.systemConfirmHandler.bind(e),search:e.systemSearchHandler.bind(e),cancel:e.destroyDialog.bind(e)});this.oDialog.setModel(this.getView().getModel("easyAccessSystems"))}return this.oDialog},destroyDialog:function(){this.oDialog.destroyItems();this.oDialog.destroy();this.oDialog=null},systemConfirmHandler:function(e){var t=e.getParameters().selectedItem,s=t.getBindingContext().getObject();this.setSystemSelected(s);this.destroyDialog()},systemSearchHandler:function(e){var t=e.getParameter("value"),r=new i("systemName",s.Contains,t),n=new i("systemId",s.Contains,t),o=new i({filters:[n,r],and:false}),a=e.getSource().getBinding("items");a.filter(o)},titleFormatter:function(e,t){return e||t},descriptionFormatter:function(e,t){if(e){return t}return null},selectedFormatter:function(e,t){var s=this.getView().getModel("easyAccessSystems").getProperty("/systemSelected");if(!s){return false}if(e){return s.systemName===e&&s.systemId===t}return s.systemId===t},systemSelectorTextFormatter:function(e){if(e){if(e.systemName){return e.systemName}return e.systemId}return this.getView().translationBundle.getText("easyAccessSelectSystemTextWithoutSystem")},exitSearchMode:function(){var e=this.getView().getModel("subHeaderModel");e.setProperty("/search/searchMode",false);e.refresh(true)}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyFoldersView", ["sap/ui/core/mvc/View","sap/m/Button","sap/m/Label","sap/m/Bar","sap/m/Page","sap/m/library","sap/m/List","sap/m/StandardListItem","sap/m/Text","sap/ushell/resources"],function(e,t,s,a,n,i,o,r,l,c){"use strict";var h=i.ButtonType;var d=i.ListSeparators;return e.extend("sap.ushell.components.appfinder.HierarchyFoldersView",{createContent:function(e){var i=this;this.translationBundle=c.i18n;this.treePath="";this.lastFocusID=document.URL.substring(document.URL.lastIndexOf("&/")+2)+"-button";this.systemSelectorText=new l({text:{path:"easyAccessSystemsModel>/systemSelected",formatter:e.systemSelectorTextFormatter.bind(e)}});this.oItemTemplate=new r({title:"{easyAccess>text}",type:"Navigation",press:function(){var e=i.pageMenu.$().find(".sapMBarLeft button");if(!e.length){i.lastFocusID=document.activeElement.getAttribute("id")}var t=this.getBindingContextPath();i.getViewData().navigateHierarchy(t,true)}});this.oList=new o({showSeparators:d.None,items:{path:"easyAccess>"+this.treePath+"/folders",template:this.oItemTemplate},updateFinished:function(){var e=this.getItems();i.finishEasyAccessAnimation(true);e.forEach(function(e){e.onsapspace=e.onsapenter})},noDataText:{path:"easyAccessSystemsModel>/systemSelected",formatter:function(e){if(e){return i.translationBundle.getText("easyAccessFolderWithNoItems")}}}});this._navBackButton=new t({tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PAGE_NAVBUTTON_TEXT"),type:h.Back,visible:false,press:function(){var e=this.treePath.split("/");var t=e.slice(0,e.length-2);this.getViewData().navigateHierarchy(t.join("/"),false)}.bind(this)});this.pageMenu=new n({enableScrolling:true,headerContent:new a({contentLeft:[this._navBackButton,new s({text:{parts:["easyAccessSystemsModel>/systemSelected"],formatter:e.systemSelectorTextFormatter.bind(e)}})],contentRight:[new t({text:this.translationBundle.getText("easyAccessSelectSystemDialogTitle"),type:h.Transparent,visible:{path:"easyAccessSystemsModel>/systemsList",formatter:function(e){return e.length>1}},press:[e.onSystemSelectionPress,e]})]}).addStyleClass("sapUshellEasyAccessMasterPageHeader"),content:this.oList});return this.pageMenu},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyFolders"},finishEasyAccessAnimation:function(){if(!this.jqFolderClone){return}if(this.forwardAnimation){this.pageMenu.$().addClass("forwardToViewAnimation");this.jqFolderClone.addClass("forwardOutOfViewAnimation")}else{this.pageMenu.$().addClass("backToViewAnimation");this.jqFolderClone.addClass("backOutOfViewAnimation")}this.jqFolderClone.on("animationend",function(){this.pageMenu.$().removeClass("forwardToViewAnimation backToViewAnimation");var e=this.pageMenu.$().find(".sapMBarLeft button");if(e.length){e.focus()}else{setTimeout(function(){document.querySelector("#"+this.lastFocusID).focus()}.bind(this))}if(this.jqFolderClone){this.jqFolderClone.remove()}}.bind(this))},prepareEasyAccessAnimation:function(e){this.forwardAnimation=e;this.jqFolderClone=this.pageMenu.$().clone().removeAttr("data-sap-ui").css("z-index","1");this.jqFolderClone.find("*").removeAttr("id");this.pageMenu.$().parent().append(this.jqFolderClone)},updatePageBindings:function(e,t){var s=e.split("/").length>2;this.treePath=e;this._navBackButton.setVisible(s);this.pageMenu.setShowSubHeader(!s);this.prepareEasyAccessAnimation(t);this.oList.bindItems("easyAccess>"+e+"/folders",this.oItemTemplate)}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/VisualizationOrganizerHelper", ["sap/m/library","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(t,n,e,i){"use strict";var o=t.ButtonType;var r;function u(){return sap.ui.getCore().byId("catalogView")}function s(){return sap.ui.getCore().byId("appFinderView")}function a(){var t,r,a=null;function l(){return n.last("/core/spaces/enabled")}function f(){if(t){return Promise.resolve(t)}r=r||new Promise(function(n){sap.ui.require(["sap/ushell/components/visualizationOrganizer/Component"],function(e){t=new e;n(t)})});return r}function c(){var n=u();if(!n){return}n.setBusy(true);return f().then(function(t){return t.requestData()}).then(function(){if(this.oModel){this.oModel.updateBindings(true)}var n=s();if(n&&t.getPersonalizablePages().length===1){var e=i.i18n.getText("VisualizationOrganizer.PageContextTitle",t.getPersonalizablePages()[0].title);n.getController()._updateShellHeader(e)}}.bind(this)).finally(function(){n.setBusy(false)})}if(l()){this.oDoable=e.on("trackHashChange").do(function(t){if(l()&&t==="Shell-appFinder"){c.call(this)}}.bind(this))}this.setModel=function(t){this.oModel=t};this.loadAndUpdate=function(){if(!l()){return Promise.resolve()}return c.call(this)};this.formatPinButtonTooltip=function(n,e,i){if(!l()){return this.formatPinButtonTooltip(n,e)}return t.formatPinButtonTooltip(i,a)};this.formatPinButtonSelectState=function(){if(!l()){return this.formatPinButtonSelectState.apply(this,arguments)}return false};this.formatPinButtonIcon=function(n){if(!l()){return"sap-icon://pushpin-off"}return t.formatPinButtonIcon(n,!!a)};this.formatPinButtonType=function(n){if(!l()){return o.Default}return t.formatPinButtonType(n,!!a)};this.onTilePinButtonClick=function(n){if(!l()){this.getController().onTilePinButtonClick(n);return}t.onTilePinButtonClick(n,a)};this.getNavigationContext=function(){if(!l()){return this.getGroupContext.apply(this,arguments)}if(a){return{pageID:encodeURIComponent(a.pageID),sectionID:encodeURIComponent(a.sectionID)}}return null};this.getNavigationContextAsText=function(){if(!l()){return this.getGroupNavigationContext.apply(this,arguments)}if(a){return JSON.stringify({pageID:encodeURIComponent(a.pageID),sectionID:encodeURIComponent(a.sectionID)})}return null};this.updateModelWithContext=function(n){if(!l()){this._updateModelWithGroupContext.apply(this,arguments);return Promise.resolve()}return f().then(function(){return t.loadSectionContext(n)}).then(function(t){a=t;this.oView.getModel().updateBindings(true);if(a){var n=a.sectionTitle?i.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",a.sectionTitle):i.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",a.pageTitle);this.oView.oPage.setTitle(n);if(this._updateShellHeader){return new Promise(function(t){setTimeout(function(){this._updateShellHeader(n);t()}.bind(this),0)}.bind(this))}}return Promise.resolve()}.bind(this))};this._loadVisualizationOrganizer=f;this._setSectionContext=function(t){a=t};this.exit=function(){if(this.oDoable){this.oDoable.off();this.oDoable=null}};this.onHierarchyAppsPinButtonClick=function(n){if(!l()){this.showGroupListPopover(n);return Promise.resolve(false)}return t.onHierarchyAppsPinButtonClick(n,a)};this.formatBookmarkPinButtonTooltip=function(n,e,i,o,r){if(!l()){return this.formatPinButtonTooltip(n,e,i,o,r)}return t.formatBookmarkPinButtonTooltip(e,a)};this.formatBookmarkPinButtonSelectState=function(t){if(!l()){return!!t}return false};this.formatBookmarkPinButtonIcon=function(t){if(!l()){return"sap-icon://pushpin-off"}return t>0?"sap-icon://accept":"sap-icon://add"};this.formatBookmarkPinButtonType=function(t){if(!l()){return o.Default}return t>0?o.Emphasized:o.Default};this.updateBookmarkCount=function(n){if(!l()){return this.updateBookmarkCount(n)}return t.updateBookmarkCount(n,a)};this.shouldPinButtonBeVisible=function(){return new Promise(function(t){var e=n.last("/core/shell/enablePersonalization");if(!l()||e){t(e)}else if(!n.last("/core/spaces/myHome/enabled")){t(false)}else{sap.ushell.Container.getServiceAsync("UserInfo").then(function(n){t(n.getUser().getShowMyHome())})}})}}return{getInstance:function(){if(!r){r=new a}return r},_getConstructor:function(){return a},destroy:function(){if(r){r.exit()}r=null}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/AppLifeCycle", ["sap/ushell/components/applicationIntegration/elements/model","sap/ushell/components/applicationIntegration/Storage","sap/ushell/components/applicationIntegration/application/BlueBoxHandler","sap/ushell/ui5service/ShellUIService","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ushell/components/applicationIntegration/configuration/AppMeta","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ui/Device","sap/ushell/Config","sap/ushell/ApplicationType","sap/base/util/deepExtend","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/EventHub","sap/ushell/utils/UrlParsing","sap/ui/core/Core","sap/ui/thirdparty/hasher","sap/ushell/services/_MessageBroker/MessageBrokerEngine"],function(e,t,i,n,a,r,s,o,l,p,u,f,c,h,d,jQuery,g,C,m,v,A,y){"use strict";function S(){var S,I=["URL"],b,E,T,R={},U=false,F={},w={home:{embedded:"embedded-home",headerless:"headerless-home",merged:"blank-home",blank:"blank-home"},app:{minimal:"minimal",app:"app",standalone:"standalone",embedded:"embedded",headerless:"headerless",merged:"merged",home:"home",blank:"blank",lean:"lean"}},O,P=[],B={},x=false,L={FULL:"true",RESTRICTED:"restricted"};if(window.QUnit===undefined){y.connect("FLP")}this.shellElements=function(){return s};this.service=function(){return r};this.isCurrentApp=function(e){return F.appId===e};this.isAppWithSimilarShellHashInCache=function(e,i){var n=t.get(e);if(n){if(n.shellHash===i){return true}return false}return false};this.isAppInCache=function(e){return!!t.get(e)};this.normalizeAppId=function(e){var t="-component",i=e.endsWith(t);if(i){return e.substring(0,e.length-t.length)}return e};this.onComponentCreated=function(e,i,n){var a=n.component,r=this.normalizeAppId(a.getId());if(this.isAppInCache(r)){t.get(r).app=a;this.active(r)}else{F.app=a;if(a.active){a.active()}}};this.onGetMe=function(e,t,i){i.AppLifeCycle=this};this.store=function(e){var i=t.get(e);if(i){a.store(i);o.store(i.meta);i.stateStored=true}};this.destroy=function(e,n,r){var l=t.get(e),p,u;function f(){if(n&&n.getUrl){i.deleteStateFul(n.getUrl())}a.destroy(n);s.destroy(n);o.destroy(n)}this.removeControl(e);if(l){p=i.getStateFul(n.getUrl());if(p&&i.isStatefulContainerSupported(p)){var c=i.getHandler();u=c.destroy(p,e)}else{l.container.destroy();i.deleteStateFul(n.getUrl());u=Promise.resolve()}t.remove(e);if(r){u.then(r.resolve)}}else{var h=n&&n.sendBeforeAppCloseEvent&&n.sendBeforeAppCloseEvent();if(h===undefined){f();if(r){r.resolve()}}else{h.then(function(){f();if(r){r.resolve()}},function(e){f();if(r){r.resolve()}g.error("FLP got a failed response from the iframe for the 'sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent' message sent",e,"sap.ushell.components.applicationIntegration.AppLifeCycle.js")})}}};this.restore=function(e){var i=t.get(e);if(i&&i.stateStored===true){a.restore(i);r.restore(i.service);o.restore(i.meta)}};this.active=function(e){var i=t.get(e);if(i){a.active(i.app)}};this.handleExitStateful=function(e,n,a){var s,o=i.getHandler();if(t.get(e)){s=i.getStorageKey(n);if(r.isBackNavigation()===true&&!a){v.getEventBus().publish("sap.ushell","appClosed",n);t.remove(s);return o.destroy(n)}else{v.getEventBus().publish("sap.ushell","appClosed",n);return o.store(n,s)}}return o.destroy(n)};this.handleExitApplication=function(e,n,s,o,l,p){var u=this,f,c,h;if(s&&o&&o.getIframeReusedForApp&&o.getIframeReusedForApp()===true){o.setProperty("iframeReusedForApp",false,true);a.postMessageToIframeApp(o,"sap.ushell.sessionHandler","afterApplicationShow",{},false)}if(e&&n){if(n.getUrl()&&i.isStatefulContainerSupported(i.getStateFul(n.getUrl()))){c=!p?this.handleExitStateful(e,n,l):undefined}else if(t.get(e)){if(r.isBackNavigation()===true&&!l){h=new jQuery.Deferred;this.destroy(e,n,h);c=h.promise()}else{this.store(e)}v.getEventBus().publish("sap.ushell","appClosed",n)}else if(n.getIsStateful&&n.getIsStateful()){if(l){c=n.postMessageRequest("sap.gui.triggerCloseSessionImmediately")}}else{f=I.indexOf(n.getApplicationType)>=0;if(this.isAppOfTypeCached(e,f)===false){h=new jQuery.Deferred;this.destroy(e,n,h);c=h.promise()}}if(l===true){if(c===undefined){this.closeKeepAliveApps(M)}else{c.then(function(){u.closeKeepAliveApps(M)})}}if(e.indexOf("Shell-appfinder-component")>0){v.getEventBus().publish("sap.ushell","appFinderAfterNavigate")}}v.getEventBus().publish("relatedServices","resetBackNavigation");if(c===undefined){c=(new jQuery.Deferred).resolve().promise()}return c};function M(e){return e.value.keepAliveMode===L.RESTRICTED}this.closeKeepAliveApps=function(e,i){try{var n=this,a=[];t.forEach(function(t){if(e.apply(this,[t])===true){a.push(t.value)}});a.forEach(function(e){var t;if(i){t=new jQuery.Deferred;i.push(t.promise())}n.destroy(e.appId,e.container,t)})}catch(e){g.error("Error: sap.ushell.services.appLifeCycle.closeOtherKeepAliveRestrictedApps:"+e)}};this.onBeforeNavigate=function(e,n,r,s){if(e&&n){if(n._getIFrame&&n._getIFrame()&&(i.isStatefulContainerSupported(i.getStateFul(n.getUrl()))||t.get(e)||n.getIsStateful&&n.getIsStateful())){a.postMessageToIframeApp(n,"sap.ushell.sessionHandler","beforeApplicationHide",{},false)}}};this.onAfterNavigate=function(e,i,n,r){var s=n.indexOf("Shell-appfinder-component")>0||n.indexOf("Shell-home-component")>0||n.indexOf("pages-component-container")>0||n.indexOf("homeApp-component-container")>0||n.indexOf("workPageRuntime-component-container")>0||n.indexOf("runtimeSwitcher-component-container")>0;this.handleExitApplication(e,i,n,r,s,!s);if(s===true){a.setActiveAppContainer(undefined)}if(n){if(t.get(n)){this.restore(n)}else{}}};this.storeApp=function(e,n,a,r,o){if(!this.isAppInCache(e)){if(n.setProperty){n.setProperty("isKeepAlive",true,true)}t.set(e,{service:{},shellHash:r,appId:e,stt:"loading",appRelatedElements:s.getAppRelatedElement(),container:n,meta:l.getMetadata(a),app:undefined,keepAliveMode:o&&(o.globalValue||o.paramValue),appTarget:a,ui5ComponentName:a&&a.ui5ComponentName,enableRouterRetrigger:true,stateStored:false});R[r]=e;i.setStorageKey(n,e);return true}return false};this.restoreApp=function(e){if(this.isAppInCache(e)){F=t.get(e);if(i.getStorageKey(F.container)){i.setStorageKey(F.container,e)}}};this.isAppOfTypeCached=function(e,t,i){var n;if(e==="application-Shell-startIntent"){return false}if(!U&&e.indexOf(b)!==-1){return true}if(!U&&(e.indexOf("Shell-appfinder-component")>0||e.indexOf("Shell-home-component")>0||e.indexOf("pages-component-container")>0||e.indexOf("homeApp-component-container")>0||e.indexOf("workPageRuntime-component-container")>0||e.indexOf("runtimeSwitcher-component-container")>0)){return true}n=d.fromURL(window.location.href).get("sap-keep-alive");if(n===L.FULL||n===L.RESTRICTED){if(i){i.globalValue=n}return true}return false};this.isCachedEnabledAsAppParameter=function(e,t,i){var n;if(e&&e.semanticObject==="Shell"&&e.action==="startIntent"){return false}n=e&&e.params&&e.params["sap-keep-alive"];if(n===L.FULL||n===L.RESTRICTED){if(i){i.paramValue=n}return true}if(t&&t.url){n=d.fromURL(t.url).get("sap-keep-alive");if(n===L.FULL||n===L.RESTRICTED){if(i){i.paramValue=n}return true}}return false};this.calculateAppType=function(e){if(e.applicationType==="URL"&&e.additionalInformation&&e.additionalInformation.startsWith("SAPUI5.Component=")){return"SAPUI5"}return e.applicationType};this.getStatefulCapabilities=function(e){if(e.appCapabilities&&e.appCapabilities&&e.appCapabilities.statefulContainer){return e.appCapabilities.statefulContainer}return undefined};this.isNotifyInnerAppRouteChangeEnabled=function(e){if(e.appCapabilities&&e.appCapabilities.notifyInnerAppRouteChange){return true}return false};this.isStatefulCapabilityEnabled=function(e){var t=this.getStatefulCapabilities(e);if(t&&(t.enabled===true||t===true)){return true}return false};this.isGUICapabilityEnabled=function(e){var t=this.getStatefulCapabilities(e);if(t&&t.protocol==="GUI"){return true}return false};this.isFLPCapabilityEnabled=function(e){return!this.isGUICapabilityEnabled(e)&&this.isStatefulCapabilityEnabled(e)};this.isGUIStatefulCapabilityEnabled=function(e){return this.isGUICapabilityEnabled(e)&&this.isStatefulCapabilityEnabled(e)};this.reloadCurrentApp=function(e){var n=i.getById(e.sAppContainerId);if(n){var a=n.getUrl();i.removeCapabilities(n);var r=[];t.forEach(function(e){if(e.value.container===n){r.push(e.key)}});r.forEach(t.remove);this.destroy(e.sAppContainerId,n);i.deleteStateFul(a)}sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){try{t.hashChanger.treatHashChanged(e.sCurrentHash)}catch(e){g.error("Error when trying to re-load the current displayed application",e,"sap.ushell.services.AppLifeCycle")}})};this.openApp=function(e,t,n,a){var r,s,o=I.indexOf(t.applicationType)>=0,p,u,f={globalValue:undefined,paramValue:undefined};var c="application"+e;r=i.getStateFul(t.url);if(r&&i.isStatefulContainerSupported(r)){if(this.isAppOfTypeCached(c,o,f)||this.isCachedEnabledAsAppParameter(n,t,f)){if(!this.isAppInCache(c)){this.storeApp(c,r,t,a,f)}this.restoreApp(c)}else{F={appId:c,stt:"loading",container:r,meta:l.getMetadata(t),app:undefined}}}else if(this.isAppOfTypeCached(c,o,f)||this.isCachedEnabledAsAppParameter(n,t,f)){if(!this.isAppInCache(c)){s=n.semanticObject+"-"+n.action;p=i.getById("application-"+s)||this.getControl(s);if(p){u=p.getUrl();i.removeCapabilities(p);this.destroy("application-"+s,p);i.deleteStateFul(u)}r=this.createApplicationContainer(e,t);this.storeApp(c,r,t,a,f);i.set(t.url,r)}this.restoreApp(c)}else if(t.applicationType==="TR"||t.appCapabilities&&t.appCapabilities.appFrameworkId==="GUI"){r=this.getWebGuiV1StatefulContainer(t.url);if(n){s=n.semanticObject+"-"+n.action;p=i.getById("application-"+s)||this.getControl(s);if(p&&(!r||p!==r)){u=p.getUrl();i.removeCapabilities(p);this.destroy("application-"+s,p);i.deleteStateFul(u);this.removeWebGuiV1StatefulContainer(u)}}if(!r){r=this.createApplicationContainer(e,t);i.set(t.url,r)}F={appId:c,stt:"loading",container:r,meta:l.getMetadata(t),app:undefined}}else{if(r){s=n.semanticObject+"-"+n.action;this.removeApplication(s)}else if(t.applicationType==="URL"||t.applicationType==="TR"||t.applicationType==="NWBC"){s=n.semanticObject+"-"+n.action;p=i.getById("application-"+s)||this.getControl(s);if(p){u=p.getUrl();i.removeCapabilities(p);this.destroy("application-"+s,p);i.deleteStateFul(u)}}r=this.createApplicationContainer(e,t);i.set(t.url,r);if(i.isCapUT(r,"isFLP")){i.setCapabilities(r,[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}])}F={appId:c,stt:"loading",container:r,meta:l.getMetadata(t),app:undefined}}};this.getAppMeta=function(){return o};this.evict=function(e){var t,n=e.value,a=e.key;this.removeControl(a);if(n.container.getUrl&&n.container.getUrl()){t=i.getStateFul(n.container.getUrl())}if(t){var r=i.getHandler();r.destroy(t,a)}else{n.container.destroy()}};this.addEvents=function(){var e=false;return function(){if(!e){e=true;var i=this;C.on("disableKeepAliveRestoreRouterRetrigger").do(function(e){var i=e.intent.semanticObject+"-"+e.intent.action;var n="application-"+i;if(t.get(n)){t.get(n).enableRouterRetrigger=e.disable}});C.on("setApplicationFullWidth").do(function(e){i.setApplicationFullWidth(e.bValue)});C.on("reloadCurrentApp").do(function(e){i.reloadCurrentApp(e)})}}}();this.init=function(e,a,r,l,p,f,c){var h=this,d;if(u.system.phone){d=10;if(c&&c.limit&&c.limit.phone){d=c.limit.phone}}else if(u.system.tablet){d=10;if(c&&c.limit&&c.limit.tablet){d=c.limit.tablet}}else if(u.system.desktop){d=15;if(c&&c.limit&&c.limit.desktop){d=c.limit.desktop}}else{d=10}E=new n({scopeObject:p.ownerComponent,scopeType:"component"});T=e;S=a;b=r;o.init(b);U=l;i.init({oShellUIService:E},c,this);t.init(d,function(e){this.evict(e)}.bind(this));this.registerShellCommunicationHandler({"sap.ushell.services.appLifeCycle":{oRequestCalls:{create:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(e){e.then(function(e){g.info("sap.ushell.services.appLifeCycle.create:"+e)}).catch(function(e){g.error("Error: sap.ushell.services.appLifeCycle.create:"+e)})}},destroy:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(e){e.then(function(e){g.info("sap.ushell.services.appLifeCycle.destroy:"+e)}).catch(function(e){g.error("Error: sap.ushell.services.appLifeCycle.destroy:"+e)})}},store:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(e){e.then(function(e){g.info("sap.ushell.services.appLifeCycle.store:"+e)}).catch(function(e){g.error("Error: sap.ushell.services.appLifeCycle.store:"+e)})}},restore:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(e){e.then(function(e){g.info("sap.ushell.services.appLifeCycle.restore:"+e)}).catch(function(e){g.error("Error: sap.ushell.services.appLifeCycle.restore:"+e)})}}},oServiceCalls:{subscribe:{executeServiceCallFn:function(e){i.mapCapabilities(e.oContainer,e.oMessageData.body);return(new jQuery.Deferred).resolve({}).promise()}},setup:{executeServiceCallFn:function(e){var t=e.oMessageData&&e.oMessageData.body,n=[],a=e.oContainer.getApplicationType(),r=e.oContainer.getFrameworkId(),s=false;if(t){if(e.oContainer.getIsKeepAlive()===true&&(a==="GUI"||a==="TR"||a==="NWBC"||a==="WDA"||a==="WCF"||r==="GUI"||r==="WDA"||r==="NWBC"||r==="WCF")){s=true}if(t.isStateful===true&&!s){n.push({action:"create",service:"sap.ushell.services.appLifeCycle"});n.push({action:"destroy",service:"sap.ushell.services.appLifeCycle"})}if(t.isIframeValid===true){n.push({action:"iframeIsValid",service:"sap.ushell.appRuntime"})}if(t.isIframeBusy===true){n.push({action:"iframeIsBusy",service:"sap.ushell.appRuntime"})}if(t.session&&t.session.bLogoutSupport===true){n.push({action:"logout",service:"sap.ushell.sessionHandler"})}if(n.length>0){i.mapCapabilities(e.oContainer,n)}}return(new jQuery.Deferred).resolve().promise()}}}},"sap.gui":{oServiceCalls:{loadFinished:{executeServiceCallFn:function(e){var t=e.oContainer.getApplicationType(),i=e.oContainer.getFrameworkId();if((t==="GUI"||t==="TR"||t==="NWBC"||i==="GUI"||i==="NWBC")&&e.oContainer.getIsKeepAlive()===false){h.setWebGuiV1StatefulContainer(e.oContainer);e.oContainer.setIsStateful(true);F={appId:e.oContainer.getId(),stt:"loading",container:e.oContainer,meta:undefined,app:undefined}}return(new jQuery.Deferred).resolve({}).promise()}}}}});v.getEventBus().subscribe("sap.ushell","appComponentLoaded",this.onComponentCreated,this);v.getEventBus().subscribe("sap.ushell","getAppLifeCycle",this.onGetMe,this);s.init(this.getElementsModel(),f);this.addEvents()};this.addControl=function(e){S.addCenterViewPort(e)};this.removeControl=function(e){var t=i.getById(e),n=i.isStatefulContainerSupported(t);if(!n){S.removeCenterViewPort(e,true)}};this.removeApplication=function(e){var t=this.getControl(e);if(t){this.removeControl(t.getId());t.destroy()}};this.getControl=function(e){return S&&(S.getViewPortControl("centerViewPort","application-"+e)||S.getViewPortControl("centerViewPort","applicationShellPage-"+e))};this.getViewPortContainer=function(){return S};this.navTo=function(e){S.navTo("centerViewPort",e,"show")};this.getCurrentApplication=function(){return F};this.setApplicationFullWidth=function(e){var t=this.getCurrentApplication();if(t.container){t.container.toggleStyleClass("sapUShellApplicationContainerLimitedWidth",!e)}};this.createComponent=function(e,t){function i(t){return t.value.ui5ComponentName===e.ui5ComponentName}var n=[],r=new jQuery.Deferred;this.shellElements().setDangling(true);this.closeKeepAliveApps(i,n);Promise.all(n).then(function(){a.createComponent(e,t).done(r.resolve).fail(r.reject)});return r.promise()};this.getAppContainer=function(e,t,i,n,a){t.shellUIService=E.getInterface();t.targetNavigationMode=i?"explace":"inplace";this.openApp(e,t,n,a);if(P.length>0){F.container.registerShellCommunicationHandler(P)}if(B.UI5APP){F.container.setIframeHandlers(B.UI5APP)}return F.container};this.getShellUIService=function(){return E};this.initShellUIService=function(e){E._attachHierarchyChanged(o.onHierarchyChange.bind(this));E._attachTitleChanged(o.onTitleChange.bind(this));E._attachRelatedAppsChanged(o.onRelatedAppsChange.bind(this));E._attachBackNavigationChanged(e.fnOnBackNavigationChange.bind(this))};this.getElementsModel=function(){return e};this.activeContainer=function(e){var t=this.getWebGuiV1AllApplicationContainers();t.forEach(function(e){g.info("Deactivating container "+e.getId());e.setActive(false)});i.forEach(function(t){if(t&&t!==e){try{g.info("Deactivating container "+t.getId());t.setActive(false)}catch(e){}}});if(e){g.info("Activating container "+e.getId());e.setActive(true)}};this.showApplicationContainer=function(e){this.navTo(e.getId());if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false)}else{e.toggleStyleClass("hidden",false)}a.setActiveAppContainer(e);g.info("New application context opened successfully in an existing transaction UI session.")};this.reuseStateFulContainerAndRestore=function(e,t,n,a,r,s){var o=this,l=R[a];if(i.getStorageKey(e)){i.setStorageKey(e,l)}return n.restore(e,l,r,s).then(function(){o.showApplicationContainer(e)},function(e){g.error(e&&e.message||e)})};this.reuseStateFulContainer=function(e,n,a,r,s,o,l){var p=this;R[s]=a;if(i.getStorageKey(e)){i.setStorageKey(e,a)}this.initAppMetaParams();return r.create(e,n,a,o,l).then(function(i){if(i&&i.deletedKeepAliveId){t.remove(i.deletedKeepAliveId)}p.showApplicationContainer(e)},function(e){g.error(e&&e.message||e)})};this.initAppMetaParams=function(){if(!this.getAppMeta().getIsHierarchyChanged()){E.setHierarchy()}if(!this.getAppMeta().getIsTitleChanged()){var e=A.getHash();if(e&&e.indexOf("Shell-startIntent")===0){E.setTitle("",true)}else{E.setTitle()}}if(!this.getAppMeta().getIsRelatedAppsChanged()){E.setRelatedApps()}if(!x){E.setBackNavigation()}};this.reuseApplicationContainer=function(e,t,i){var n=this;e.setProperty("iframeReusedForApp",true,true);return e.setNewApplicationContext(t,i).then(function(){n.navTo(e.getId());if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false)}else{e.toggleStyleClass("hidden",false)}g.info("New application context opened successfully in an existing transaction UI session.")},function(e){g.error(e&&e.message||e)})};this.createApplicationContainer=function(e,t){return a.createApplicationContainer(e,t)};this.publishNavigationStateEvents=function(e,t,i){var n,a=e.getId?e.getId():"",r=this;var s=l.getMetadata(),o=s.icon,p=s.title;e.addEventDelegate({onAfterRendering:i});n=e.exit;e.exit=function(){if(n){n.apply(this,arguments)}r.getAppMeta()._applyContentDensityByPriority();setTimeout(function(){var e=h({},t);delete e.componentHandle;e.appId=a;e.usageIcon=o;e.usageTitle=p;v.getEventBus().publish("sap.ushell","appClosed",e);g.info("app was closed")},0);var e=r._publicEventDataFromResolutionResult(t);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",e)}};this._publicEventDataFromResolutionResult=function(e){var t={};if(!e){return e}["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(i){t[i]=e[i]});Object.freeze(t);return t};this.getInMemoryInstance=function(e,i,n,a){var r="application-"+e,s=t.get(r),o="",l=false,p;if(s){if(a!==null&&a!==undefined&&a!==""){o=a.toLowerCase();l=o.indexOf("shell-home")>=0||o.indexOf("launchpad-openflppage")>=0||o.indexOf("launchpad-openworkpage")>=0||o.indexOf("shell-appfinder")>=0}p=l&&(typeof n==="string"&&n.length>0);if(s.shellHash===i&&!p){return{isInstanceSupported:true,appId:s.appId,container:s.container}}return{isInstanceSupported:false,appId:s.appId,container:s.container}}return{isInstanceSupported:false,appId:undefined,container:undefined}};this.handleOpenStateful=function(e,n,a,r,s,o,l,p){var u=i.getHandler(),f;r.setProperty("iframeReusedForApp",true,true);if(t.get(a)&&e===false){f=this.reuseStateFulContainerAndRestore(r,a,u,o,s,p)}else{f=this.reuseStateFulContainer(r,s.url,a,u,o,s,p);if(n){if(!this.isAppInCache(a)){this.storeApp(a,r,s,o,l)}}}return f};this.handleControl=function(e,n,a,s,o,u,f){var h=this,d,C,A=I.indexOf(s.applicationType)>=0,y="application-"+e,b,E,T,R=false,U,w,O,P=new jQuery.Deferred,B,x,L,M,H,W=(new jQuery.Deferred).resolve().promise(),D={globalValue:undefined,paramValue:undefined},V,k,N,G,K=false;H=i.getStateFul(s.url);if(H&&i.isStatefulContainerSupported(H)){V=(new Date).getTime()-H.getIsIframeValidTime().time;if(i.isIframeBusySupported(H)&&H.getIsIframeBusy()===true||i.isIframeIsValidSupported(H)&&V>=3500||H.getIsInvalidIframe()===true){g.warning("Destroying statefull container iframe due to unresponsiveness ("+H.getId()+")","reason: "+(H.getIsIframeBusy()===true?"iframe is still creating a different app":"no ping from the iframe in the last '"+V+"' ms"),"sap.ushell.components.applicationIntegration.AppLifeCycle");i.removeCapabilities(H);this.destroy(y,H);i.deleteStateFul(s.url);H=undefined;f=undefined}}if(typeof f==="string"){k=m.parseShellHash(f);if(k){N="application-"+k.semanticObject+"-"+k.action;M=t.get(N)}if(M){L=M.container}else{G=S.getCurrentCenterPage?S.getCurrentCenterPage():undefined;if(G){L=v.byId(G)}}}C=L?i.isStatefulContainerSupported(L):false;if(L&&C){if(M){r.store(M.service)}W=this.handleExitApplication(N,L,undefined,undefined,false,false);if(L===H){K=true}}W.then(function(){E=h.isAppOfTypeCached(y,A,D)||h.isCachedEnabledAsAppParameter(a,s,D);T=h.calculateAppType(s);U=c.getDefaultFullWidthSetting(T);d=i.getStateFul(s.url);C=i.isStatefulContainerSupported(d);if(!C){if(F&&y!==F.appId){d=undefined}b=t.get("application"+n);if(b){d=b.container;if(!C&&E&&d!==undefined){w=true}}}var r,f;r=s.appCapabilities&&s.appCapabilities.fullWidth;x=l.getMetadata(s);if(U===true){if(s.fullWidth===false||s.fullWidth==="false"||x.fullWidth===false||x.fullWidth==="false"||r===false){f=false}}else if(s.fullWidth===true||s.fullWidth==="true"||x.fullWidth===true||x.fullWidth==="true"){f=true}if(f===undefined){f=U}if(C){if(!d){d=o(e,x,a,s,n,f,u);h.restoreApp(d.getId());h.navTo(d.getId());R=true}}else if(!h.isWebGuiV1StatefulContainer(s.url)&&d&&!E){O=new jQuery.Deferred;h.destroy(d.getId(),d,O);O.then(function(){d=o(e,x,a,s,n,f,u)})}else if(!d){d=o(e,x,a,s,n,f,u)}if(O===undefined){O=(new jQuery.Deferred).resolve()}if(d&&d.getDeffedControlCreation){B=d.getDeffedControlCreation()}else{B=Promise.resolve()}O.then(function(){B.then(function(){if(!h.isWebGuiV1StatefulContainer(s.url)&&!C){if(w===true){v.getEventBus().publish("launchpad","appOpening",s)}h.restoreApp(d.getId());h.navTo(d.getId());if(w===true){h.initAppMetaParams();v.getEventBus().publish("sap.ushell","appOpened",s)}}var e=(new jQuery.Deferred).resolve().promise();if(C){if(s.appCapabilities&&s.appCapabilities.appFrameworkId==="UI5"){d.setProperty("active",true,true)}e=h.handleOpenStateful(R,E,"application"+n,d,s,u,D,K)}else if(h.isWebGuiV1StatefulContainer(s.url)){e=h.reuseApplicationContainer(d,"TR",s.url)}e.then(function(){S.switchState("Center");p.setPerformanceMark("FLP -- centerViewPort");h.activeContainer(d);P.resolve()})})})});return P.promise()};this.switchViewState=function(i,n,a){var r=i,o;if(w[i]&&w[i][T]){r=w[i][T]}var l=f.last("/core/shell/model/currentState/stateName")==="home";if(!l&&(!F.appId||!t.get(F.appId))){e.destroyManageQueue()}o=t.get("application"+a);if(o){s.restore(o)}else{s.assignNew(i)}e.switchState(r,n,a);this.shellElements().setDangling(false);this.shellElements().processDangling();if(i==="searchResults"){this.getElementsModel().setProperty("/lastSearchScreen","");if(!A.getHash().indexOf("Action-search")===0){var p=v.getModel("searchModel");A.setHash("Action-search&/searchTerm="+p.getProperty("/uiFilter/searchTerms")+"&dataSource="+JSON.stringify(p.getProperty("/uiFilter/dataSource").getJson()))}}};this.registerShellCommunicationHandler=function(e){a.registerShellCommunicationHandler(e)};this.registerIframeCommunicationHandler=function(e,t){B[t]=e};this.postMessageToIframeApp=function(e,t,n,r){function s(i){if(e==="sap.ushell.sessionHandler"&&t==="logout"){if(i&&i.getApplicationType&&",WCF,GUI,TR,WDA,".indexOf(i.getApplicationType())>0){return false}}return true}var o,l=a.getActiveAppContainer(),p=false,u=[];if(i.hasIFrame(l)&&(i.isCapabilitySupported(l,e,t)||a.isAppTypeSupported(l,e,t))&&s(l)===true){u.push(a.postMessageToIframeApp(l,e,t,n,r));p=true}if(!a.isActiveOnly(e,t)){i.forEach(function(o){if(p===true&&o===l){return}if(i.hasIFrame(o)){if((i.isCapabilitySupported(o,e,t)||a.isAppTypeSupported(o,e,t))&&s(o)===true){u.push(a.postMessageToIframeApp(o,e,t,n,r))}}})}o=a.getResponseHandler(e,t);var f=Promise.all(u);if(o){o(f)}return f};this.postMessageToIframeAppAccordingToPolicy=function(e,t,n,r,s){var o,l=a.getActiveAppContainer(),p=[];if(i.hasIFrame(l)&&a.isAppTypeSupportedByPolicy(l,s)){p.push(a.postMessageToIframeApp(l,e,t,n,r))}if(!s.isActiveOnly){i.forEach(function(s){if(i.hasIFrame(s)){if(i.isCapabilitySupported(s,e,t)||a.isAppTypeSupported(s,e,t)){p.push(a.postMessageToIframeApp(s,e,t,n,r))}}})}o=a.getResponseHandler(e,t);var u=Promise.all(p);if(o){o(u)}return u};this.setBackNavigationChanged=function(e){x=e};this.getBackNavigationChanged=function(){return x};this.parseStatefulContainerConfiguration=function(){O={}};this.isWebGuiV1StatefulContainer=function(e){var t;if(e){t=i._getBlueBoxCacheKey(e);return O[t]!==undefined}else{return false}};this.getWebGuiV1StatefulContainer=function(e){var t;if(e){t=i._getBlueBoxCacheKey(e);return O[t]}else{return undefined}};this.setWebGuiV1StatefulContainer=function(e){var t=e.getUrl(),n;if(t){n=i._getBlueBoxCacheKey(t);O[n]=e}};this.removeWebGuiV1StatefulContainer=function(e){var t=e.getUrl(),n;if(t){n=i._getBlueBoxCacheKey(t);delete O[n]}};this.getWebGuiV1AllApplicationContainers=function(){return Object.keys(O).map(function(e){return O[e]}).filter(function(e){return!!e})}}return new S},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/Storage", [],function(){"use strict";function t(){var t,e;function i(t){this.size=0;if(typeof t=="number"){this.limit=t}else{this.limit=10}this.map={};this.head=null;this.tail=null}i.prototype.LRUnode=function(t,e){if(typeof t!="undefined"&&t!==null){this.key=t}if(typeof e!="undefined"&&e!==null){this.value=e}this.prev=null;this.next=null};i.prototype.setHead=function(t){t.next=this.head;t.prev=null;if(this.head!==null){this.head.prev=t}this.head=t;if(this.tail===null){this.tail=t}this.size++;this.map[t.key]=t};i.prototype.set=function(t,n){var s=new i.prototype.LRUnode(t,n);if(this.map[t]){this.map[t].value=s.value;this.remove(s.key)}else if(this.size>=this.limit){var h=this.map[this.tail.key];delete this.map[this.tail.key];this.size--;this.tail=this.tail.prev;this.tail.next=null;if(e){e(h)}}this.setHead(s)};i.prototype.get=function(t){if(this.map[t]){var e=this.map[t].value;var n=new i.prototype.LRUnode(t,e);this.remove(t);this.setHead(n);return e}else{return null}};i.prototype.remove=function(t){var e=this.map[t];if(e.prev!==null){e.prev.next=e.next}else{this.head=e.next}if(e.next!==null){e.next.prev=e.prev}else{this.tail=e.prev}delete this.map[t];this.size--};i.prototype.removeAll=function(t){this.size=0;this.map={};this.head=null;this.tail=null;if(typeof t=="number"){this.limit=t}};i.prototype.forEach=function(t){var e=this.head,i=0;while(e){t.apply(this,[e,i,this]);i++;e=e.next}};i.prototype.toJSON=function(){var t=[],e=this.head;while(e){t.push({key:e.key,value:e.value});e=e.next}return t};i.prototype.toString=function(){var t="",e=this.head;while(e){t+=String(e.key)+":"+e.value;e=e.next;if(e){t+="\n"}}return t};this.init=function(n,s){t=new i(n);e=s};this.get=function(e){return t.get(e)};this.set=function(e,i){t.set(e,i)};this.remove=function(e){t.remove(e)};this.forEach=function(e){t.forEach(e)};this.length=function(){return t.size}}return new t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/application/Application", ["sap/ushell/components/container/ApplicationContainer","sap/ushell/components/applicationIntegration/application/PostMessageAPI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/UI5ComponentType","sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/Core"],function(e,t,r,jQuery,i,s,n,a,o){"use strict";var p,l,u=e.getMetadata().getJSONKeys();function c(){var i=this;this.handleMessageEvent=function(t,s,a,o){var p=s.data;if(o===undefined){o=false}if(typeof p==="string"){try{p=JSON.parse(s.data)}catch(e){n.debug("Message received from origin '"+s.origin+"' cannot be parsed: "+e,p,"sap.ushell.components.container.ApplicationContainer");return}}if(p.action==="pro54_setGlobalDirty"&&localStorage.getItem(t.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!e.prototype._isTrustedPostMessageSource(t,s)){n.warning("Received message from untrusted origin: "+s.origin,p,"sap.ushell.components.container.ApplicationContainer");return}n.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+t.globalDirtyStorageKey+" value: "+p.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");r.localStorageSetItem(t.globalDirtyStorageKey,p.parameters.globalDirty,true)}else{i.handleServiceMessageEvent(t,s,p,a,o)}};this.handleServiceMessageEvent=function(i,s,o,p,l){var u=a.get("sap-ushell-config.services.PostMessage.config")||a.create("sap-ushell-config.services.PostMessage.config"),c=o&&o.service,f,g,d,h,v=false,y=t.getAPIs(),m;n.debug("Received post message request from origin '"+s.origin+"': "+JSON.stringify(o),null,"sap.ushell.components.container.ApplicationContainer");if(l===undefined){l=false}if(o.type!=="request"||!c){return}if(c==="sap.ushell.services.MessageBroker"){if(l===true){c=c.concat("._execute")}else{return}}for(var b in y){if(y.hasOwnProperty(b)){if(c.indexOf(b)!==-1){g=y[b];d=b;v=true;break}}}if(v===false){if(p.bPluginsStatusChecked===false||p.bKeepMessagesForPlugins===true){p.bApiRegistered=false}else{A("error",{code:-1,message:"Unknown service name: '"+c+"'"})}return}m=c.indexOf("user.postapi.")===0;f=c.split(".")[3];if(u&&u.enabled===false){n.warning("Received message for "+f+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return}if(l===false&&!e.prototype._isTrustedPostMessageSource(i,s)){n.warning("Received message from untrusted origin '"+s.origin+"': "+JSON.stringify(s.data),null,"sap.ushell.components.container.ApplicationContainer");return}function S(e,t){var r;if(t===true){r={oMessage:s,oMessageData:o}}else{r={matchesLocalSid:I,getLocalSystemInSidForma:R,storeSapSystemData:M,executeSetBackNavigationService:C,sendResponseMessage:A,oMessage:s,oMessageData:o,oContainer:i}}try{e(r).done(function(e){var t=e&&e.hasOwnProperty("_noresponse_")?true:false;if(!t){A("success",{result:e})}}).fail(function(e){A("error",{message:e})})}catch(e){A("error",{message:e.message})}}function A(e,t){var r=JSON.stringify({type:"response",service:o.service,request_id:o.request_id,status:e,body:t});n.debug("Sending post message response to origin ' "+s.origin+"': "+r,null,"sap.ushell.components.container.ApplicationContainer");if(typeof s.source!=="object"||s.source===null){n.debug("Cannot send response message to origin ' "+s.origin,"`source` member of request message is not an object","sap.ushell.components.container.ApplicationContainer");return}s.source.postMessage(r,s.origin)}function C(t,r){var s=new jQuery.Deferred,n;if(r.body&&r.body.callbackMessage&&r.body.callbackMessage.service){n=e.prototype._backButtonPressedCallback.bind(null,t.source,r.body.callbackMessage.service,t.origin)}s.resolve(i.getShellUIService().setBackNavigation(n));return s.promise()}function M(e,t){var i,s,a,o=[e.id];if(arguments.length>1){o.unshift(t)}try{a=JSON.stringify(e)}catch(e){n.error("Cannot stringify and store expanded system data: "+e)}if(a){s=r.getLocalStorage();i=r.generateLocalStorageKey("sap-system-data",o);s.setItem(i,a)}}function R(){var e=sap.ushell.Container.getLogonSystem();var t=e.getName();var r=e.getClient();return"sid("+t+"."+r+")"}function I(e){return R().toLowerCase()===e.toLowerCase()}h=g.oServiceCalls[c.replace(d+".","")];if(h&&h.executeServiceCallFn){S(h.executeServiceCallFn,m)}else{A("error",{code:-1,message:"Unknown service name: '"+c+"'"})}};this.init=function(e){l=e};this.restoreArray=function(e){var t=[],r=0;while(e[r]){t.push(e[r]);r++}return t};this._createWaitForRendererCreatedPromise=function(){var e,t;t=sap.ushell.Container.getRenderer();if(t){n.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[]}e=new Promise(function(e,r){var i;i=function(){n.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");e();sap.ushell.Container.detachRendererCreatedEvent(i)};t=sap.ushell.Container.getRenderer();if(t){n.debug("Shell controller: resolving component waitFor promise immediately (shell renderer already created");e()}else{sap.ushell.Container.attachRendererCreatedEvent(i)}});return[e]};this.createComponent=function(e,t){var r=this,i=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(n){n.createComponent(e,t,r._createWaitForRendererCreatedPromise(),s.Application).then(i.resolve,i.reject)});return i.promise()};this.stripURL=function(e){var t=e.indexOf("?"),r=e.indexOf("#"),i;if(t>=0){i=e.substr(0,t)}else if(r>=0){i=e.substr(0,r)}else{i=e}return i};this.createApplicationContainer=function(t,r){var i={};this._cleanTargetResolution(r,i);p=new e("application"+t,r);this._restoreTargetResolution(r,i);if(r.appCapabilities){p.setProperty("frameworkId",r.appCapabilities.appFrameworkId,true)}p.setHandleMessageEvent(this.handleMessageEvent);l.setAppCapabilities(p,r);return p};this.active=function(e){if(e){if(e.active){e.active()}}};this.restore=function(e){var t;if(e.container&&e.container._getIFrame&&e.container._getIFrame()!=undefined){this.postMessageToIframeApp(e.container,"sap.ushell.appRuntime","keepAliveAppShow",{},false)}if(e.app){o.getEventBus().publish("sap.ushell","appKeepAliveActivate",e.appTarget);if(e.app.getUrl){t=e.app.getUrl();p=l.get(this.stripURL(t));if(p){l.restoreApp(p.sApplication)}}if(e.app.isKeepAliveSupported&&e.app.isKeepAliveSupported()===true){e.app.activate()}else{if(e.app.restore){e.app.restore()}if(e.app.getRouter&&e.app.getRouter()&&e.app.getRouter().initialize){if(e.enableRouterRetrigger===false){e.app.getRouter().initialize()}else{e.app.getRouter().initialize(true)}}if(e.app.setInitialConfiguration){e.app.setInitialConfiguration()}}p=e.app}};this.store=function(e){var t;if(e.container&&e.container._getIFrame&&e.container._getIFrame()!=undefined){this.postMessageToIframeApp(e.container,"sap.ushell.appRuntime","keepAliveAppHide",{},false)}if(e.app){o.getEventBus().publish("sap.ushell","appKeepAliveDeactivate",e.appTarget);if(e.app.getUrl){t=e.app.getUrl();p=l.get(this.stripURL(t));if(p){l.storeApp(p.sApplication)}}if(e.app.isKeepAliveSupported&&e.app.isKeepAliveSupported()===true){e.app.deactivate()}else{if(e.app.suspend){e.app.suspend()}if(e.app.getRouter&&e.app.getRouter()){e.app.getRouter().stop()}}}};this.destroy=function(e){var t,r,i=false;if(e){if(e.getUrl){t=e.getUrl();r=l.get(this.stripURL(t));if(l.isStatefulContainerSupported(r)){i=true;l.destroyApp(r.sApplication)}}if(e.destroy&&i===false){try{e.destroy()}catch(t){n.error("exception when trying to close sapui5 application with id '"+(e.sId||"<unknown>")+"'. This error must be fixed in order for FLP to operate properly.\n",t.stack,"sap.ushell.components.applicationIntegration.application.Application::destroy")}}}};this.setActiveAppContainer=function(e){p=e};this.getActiveAppContainer=function(){return p};function u(e){try{var t=e.data;if(typeof t==="string"&&t.indexOf("sap.ushell.services.MessageBroker")>0){try{t=JSON.parse(e.data);if(typeof t==="object"&&t.type==="request"&&t.service==="sap.ushell.services.MessageBroker"){sap.ushell.Container.getServiceAsync("MessageBroker").then(function(t){var r=t.getAcceptedOrigins().find(function(t){return t===e.origin});if(r===undefined){return}i.handleMessageEvent(undefined,e,{},true)})}}catch(e){return}}}catch(e){n.error(e.message,e.stack)}}if(sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getServiceAsync){sap.ushell.Container.getServiceAsync("MessageBroker").then(function(e){if(e.isEnabled()){addEventListener("message",u.bind(i))}})}}c.prototype._cleanTargetResolution=function(e,t){var r;if(e){for(r in e){if(u[r]===undefined){t[r]=e[r];delete e[r]}}}};c.prototype._restoreTargetResolution=function(e,t){var r;if(e){for(r in t){e[r]=t[r]}}};c.prototype.getResponseHandler=function(e,r){return t.getResponseHandler(e,r)};c.prototype.isActiveOnly=function(e,r){return t.isActiveOnly(e,r)};c.prototype.isAppTypeSupported=function(e,r,i){var s=t._getPostMesageInterface(r,i);return this.isAppTypeSupportedByPolicy(e,s)};c.prototype.isAppTypeSupportedByPolicy=function(e,t){if(e&&e.getAdditionalInformation&&e.getAdditionalInformation().startsWith("SAPUI5.Component=")){return false}var r=t;if(!r||!r.distributionType){return false}if(r.distributionType.indexOf("all")>=0){return true}if(r.distributionType.indexOf("URL")>=0){return false}if(e.getApplicationType&&r.distributionType.indexOf(e.getApplicationType())>=0){return true}return false};c.prototype.postMessageToIframeApp=function(e,t,r,i,s){var n=t+"."+r,a=this.createPostMessageRequest(n,i);return this.postMessageToIframe(a,e,s)};c.prototype.createPostMessageRequest=function(e,t){var r=Date.now().toString();return{type:"request",request_id:r,service:e,body:t}};c.prototype.createPostMessageResponse=function(e,t,r,i){return{type:"response",request_id:t,service:e,status:i?"success":"error",body:r}};c.prototype.postMessageToIframe=function(e,t,r){var s=t._getIFrame(),n,a;if(!s||!t._getIFrameUrl){return Promise.resolve()}n=new i(t._getIFrameUrl(s));a=n.protocol()+"://"+n.host();return this.postMessageToIframeObject(e,s,a,r,true)};c.prototype.postMessageToIframeObject=function(e,t,r,i,s){var a=e.request_id;return new Promise(function(o,p){function l(r){var i;try{if((s===true?t.contentWindow:t)!==r.source){return}if(typeof r.data==="string"&&r.data.indexOf("{")===0){try{i=JSON.parse(r.data)}catch(e){i={}}}else{return}if(!i.request_id||a!==i.request_id){return}if(i.status==="success"){o(i)}else{p(i)}window.removeEventListener("message",l)}catch(t){o();n.warning("Obtained bad response from framework in response to message "+e.request_id);n.debug("Underlying framework returned invalid response data: '"+r.data+"'")}}if(!t){o()}else{var u=JSON.stringify(e);n.debug("Sending postMessage "+u+" to iframe with domain '"+r+"'");if(i){window.addEventListener("message",l,false);if(s===true){t.contentWindow.postMessage(u,r)}else{t.postMessage(u,r)}}else{if(s===true){t.contentWindow.postMessage(u,r)}else{t.postMessage(u,r)}o()}}})};c.prototype.registerShellCommunicationHandler=function(e){t.registerShellCommunicationHandler(e)};c.prototype._getPostMesageInterface=function(e,r){return t._getPostMesageInterface(e,r)};return new c},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/application/BlueBoxHandler", ["sap/ushell/components/applicationIntegration/application/BlueBoxesCache","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/container/ApplicationContainer","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/ui/core/Core","sap/ui/thirdparty/hasher"],function(e,t,i,jQuery,s,a,p){"use strict";function n(){var n=this,r,u={isStateful:{handler:function(e,t){if(e&&(e.enabled===true||e===true)){return true}return false}},isGUI:{handler:function(e,t){if(e&&e.protocol==="GUI"){return true}return false}},isGUIStateful:{handler:function(e,t){return n.isCapUT(t,"isGUI")&&n.isCapUT(t,"isStateful")}},isFLP:{handler:function(e,t){return!n.isCapUT(t,"isGUI")&&n.isCapUT(t,"isStateful")}}},l={},o={},f={setup:function(e,t){},create:function(e,s,n,r,u){var o=new jQuery.Deferred,f,c;function h(){if(f){f["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);f["system-alias"]=e.getSystemAlias();c["sap-flp-params"]=f}a.getEventBus().publish("launchpad","appOpening",r);t.postMessageToIframeApp(e,"sap.ushell.services.appLifeCycle","create",c,true).then(function(t){l[e].currentAppTarget=r;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(i){if(u===true){i.prepareCurrentAppObject("URL",undefined,false,e)}a.getEventBus().publish("sap.ushell","appOpened",r);o.resolve(t&&t.body&&t.body.result)})})}s=i.prototype._checkNwbcUrlAdjustment(e,r.applicationType,s);c={sCacheId:n,sUrl:s,sHash:p.getHash()};if(s.indexOf("sap-iframe-hint=GUI")>0||s.indexOf("sap-iframe-hint=WDA")>0||s.indexOf("sap-iframe-hint=WCF")>0){var d=[];var C=i.prototype._getParamKeys(s,d);if(C.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.getAppStateData(C).then(function(e){f={};d.forEach(function(t,i){if(e[i][0]){f[t]=e[i][0]}});h()},function(){h()})})}else{f={};h()}}else{h()}return o.promise()},destroy:function(e,i){var s;sap.ushell.Container.setAsyncDirtyStateProvider(undefined);s=t.postMessageToIframeApp(e,"sap.ushell.services.appLifeCycle","destroy",{sCacheId:i},true);s.then(function(){a.getEventBus().publish("sap.ushell","appClosed",l[e].currentAppTarget);l[e].currentAppTarget=undefined});return s},store:function(e,i){var s;sap.ushell.Container.setAsyncDirtyStateProvider(undefined);s=t.postMessageToIframeApp(e,"sap.ushell.services.appLifeCycle","store",{sCacheId:i},true);s.then(function(){a.getEventBus().publish("sap.ushell","appClosed",l[e].currentAppTarget);l[e].currentAppTarget=undefined});return s},restore:function(e,i,s,n){return new Promise(function(r){a.getEventBus().publish("launchpad","appOpening",s);t.postMessageToIframeApp(e,"sap.ushell.services.appLifeCycle","restore",{sCacheId:i,sUrl:s.url,sHash:p.getHash()},true).then(function(){l[e].currentAppTarget=s;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(t){if(n===true){t.prepareCurrentAppObject("URL",undefined,false,e)}a.getEventBus().publish("sap.ushell","appOpened",s);r()})})})}},c=[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}];this.init=function(i,a,p){e.init();t.init(this);r=p;if(a){s(o,a.supportedTypes)}};this.isStatefulContainerSupported=function(e){var t=this.isCapabilitySupported(e,"sap.ushell.services.appLifeCycle","create")&&this.isCapabilitySupported(e,"sap.ushell.services.appLifeCycle","destroy");return t};this.isKeepAliveSupported=function(e){var t=this.isCapabilitySupported(e,"sap.ushell.services.appLifeCycle","store")&&this.isCapabilitySupported(e,"sap.ushell.services.appLifeCycle","restore");return t};this.isIframeIsValidSupported=function(e){return this.isCapabilitySupported(e,"sap.ushell.appRuntime","iframeIsValid")};this.isIframeBusySupported=function(e){return this.isCapabilitySupported(e,"sap.ushell.appRuntime","iframeIsBusy")};this.mapCapabilities=function(e,t){this.setCapabilities(e,t)};this.getCapabilities=function(e){return l[e].oCapMap};this.isCapabilitySupported=function(e,t,i){if(l[e]&&l[e].oCapMap&&l[e].oCapMap[t]){return!!l[e].oCapMap[t][i]}return false};this.setCapabilities=function(e,t){var i;if(!l[e]){this.initBlueBoxBD(e)}if(!l[e].oCapMap){l[e].oCapMap={}}i=l[e].oCapMap;Object.keys(t).forEach(function(e){var s=t[e],a;if(!i[s.service]){i[s.service]={}}a=i[s.service];a[s.action]=true});if(!e.getIsStateful()&&this.isStatefulContainerSupported(e)){e.setIsStateful(true)}};this.removeCapabilities=function(e){if(l[e]){l[e].oCapMap={};e.setIsStateful(false)}};this.hasIFrame=function(e){if(e&&e._getIFrame){return true}return false};this.initBlueBoxBD=function(e){l[e]={BlueBox:e}};this.setAppCapabilities=function(e,t){if(!l[e]){this.initBlueBoxBD(e)}l[e].currentAppTarget=t;l[e].appCapabilities=t.appCapabilities;if(t.appCapabilities&&t.appCapabilities.statefulContainer===true){this.setCapabilities(e,c)}};this.forEach=function(e){var t;for(t in l){if(l.hasOwnProperty(t)){e(l[t].BlueBox)}}};this.isCapByTarget=function(e,t){if(e.appCapabilities===undefined){return false}if(u[t]&&e&&e.appCapabilities){return u[t].handler(e.appCapabilities)}return e.appCapabilities[t]||false};this.isCapUT=function(e,t){var i=l[e];if(i===undefined||i.appCapabilities===undefined){return false}if(u[t]&&i){return u[t].handler(i.appCapabilities,e)}return i.appCapabilities[t]||false};this.setStorageKey=function(e,t){if(!l[e]){this.initBlueBoxBD(e)}l[e].sStorageKey=t};this.getStorageKey=function(e){if(!l[e]){return undefined}return l[e].sStorageKey};this.getHandler=function(){return f};this._getBlueBoxCacheKey=function(t){return e.getBlueBoxCacheKeyValues(t).sKey};this.deleteStateFul=function(e){return this.delete(e)};this.getStateFul=function(t){return e.get(t)};this.destroyApp=function(e){r.postMessageToIframeApp("sap.ushell.services.appLifeCycle","destroy",{appId:e})};this.openApp=function(e){r.postMessageToIframeApp("sap.ushell.services.appLifeCycle","create",{appId:e,sHash:p.getHash()})};this.storeApp=function(e){r.postMessageToIframeApp("sap.ushell.services.appLifeCycle","store",{appId:e,sHash:p.getHash()})};this.restoreApp=function(e){r.postMessageToIframeApp("sap.ushell.services.appLifeCycle","restore",{appId:e,sHash:p.getHash()})};this.delete=function(t){e.remove(t)};this.get=function(t){return e.get(t)};this.getById=function(t){return e.getById(t)};this.set=function(t,i){e.add(t,i)}}return new n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/application/BlueBoxesCache", ["sap/ui/thirdparty/URI","sap/base/Log"],function(e,n){"use strict";var i={};function r(){i={}}function t(){return Object.keys(i).length}function a(e,n){var r=u(e);i[r.sKey]={oContainer:n,oKeyValues:r}}function s(e){var n=u(e).sKey;if(i[n]){delete i[n]}}function o(e){if(e===undefined||t()===0){return undefined}var n=u(e).sKey;return n&&i.hasOwnProperty(n)?i[n].oContainer:undefined}function f(e){for(var n in i){if(i.hasOwnProperty(n)){var r=i[n].oContainer;if(r.sId===e){return r}}}return undefined}function u(i){var r,t,a,s="",o="",f="",u="",p={sKey:"",sOrigin:"",sIframeHint:"",sUI5Version:"",sKeepAlive:""};if(i===undefined||i===""||i==="../"){p.sKey=i;return p}try{r=new e(i);if(i.charAt(0)==="/"){t=window.location.origin}else{t=r.origin()}if(t===undefined||t===""){t=r.path();if(t===undefined||t===""){t=i}}a=r.query(true);if(a.hasOwnProperty("sap-iframe-hint")){p.sIframeHint=a["sap-iframe-hint"];s="@"+p.sIframeHint}if(a.hasOwnProperty("sap-ui-version")){p.sUI5Version=a["sap-ui-version"];o="@"+p.sUI5Version}if((s==="@GUI"||s==="@WDA"||s==="@WCF")&&a.hasOwnProperty("sap-keep-alive")){p.sKeepAlive=a["sap-keep-alive"];f="@"+p.sKeepAlive+"-"+i}if(a.hasOwnProperty("sap-testcflp-iframeid")){u="@"+a["sap-testcflp-iframeid"]}}catch(e){n.error("URL '"+i+"' can not be parsed: "+e,"sap.ushell.components.applicationIntegration.application.BlueBoxHandler");t=i}p.sOrigin=t;p.sKey=t+s+o+f+u;return p}return{init:r,getSize:t,add:a,remove:s,get:o,getById:f,getBlueBoxCacheKeyValues:u}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/application/PostMessageAPI", ["sap/ushell/utils","sap/ui/core/library","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/UIComponent","sap/ushell/services/AppConfiguration","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface","sap/ui/thirdparty/URI","sap/base/util/deepExtend","sap/ushell/Config","sap/ushell/utils/UrlParsing","sap/ui/core/Core","sap/m/Button","sap/m/library","sap/ui/thirdparty/hasher","sap/ushell/resources","sap/ushell/ui/shell/ShellHeadItem","sap/ui/core/Configuration"],function(e,t,jQuery,r,n,a,o,s,i,l,c,u,p,d,f,g,v,h,y){"use strict";var C="sap.ushell.";var S=new n;var m=f.URLHelper;var D={"sap.ushell.services.CrossApplicationNavigation":{oServiceCalls:{hrefForExternal:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.hrefForExternalAsync(e.oMessageData.body.oArgs,undefined,true).then(t.resolve,t.reject)});return t.promise()}},getSemanticObjectLinks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.getSemanticObjectLinks(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters,e.oMessageData.body.bIgnoreFormFactors,undefined,undefined,e.oMessageData.body.bCompactIntents).then(t.resolve,t.reject)});return t.promise()}},isIntentSupported:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.isIntentSupported(e.oMessageData.body.aIntents).then(t.resolve,t.reject)});return t.promise()}},isNavigationSupported:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.isNavigationSupported(e.oMessageData.body.aIntents).then(t.resolve,t.reject)});return t.promise()}},backToPreviousApp:{executeServiceCallFn:function(){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.backToPreviousApp()});return(new jQuery.Deferred).resolve().promise()}},historyBack:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.historyBack(e.oMessageData.body.iSteps)});return(new jQuery.Deferred).resolve().promise()}},getAppStateData:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.getAppStateData(e.oMessageData.body.sAppStateKey).then(t.resolve,t.reject)});return t.promise()}},toExternal:{executeServiceCallFn:function(t){var r=new jQuery.Deferred,n=l({},t.oMessageData.body.oArgs);e.storeSapSystemToLocalStorage(n);sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal(n).then(r.resolve,r.reject)});return r.promise()}},registerBeforeAppCloseEvent:{executeServiceCallFn:function(e){e.oContainer.setProperty("beforeAppCloseEvent",{enabled:true,params:e.oMessageData.body},true);return(new jQuery.Deferred).resolve().promise()}},expandCompactHash:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.expandCompactHash(e.oMessageData.body.sHashFragment).then(t.resolve,t.reject)});return t.promise()}},getDistinctSemanticObjects:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.getDistinctSemanticObjects().then(e.resolve,e.reject)});return e.promise()}},getLinks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.getLinks(e.oMessageData.body).then(t.resolve,t.reject)});return t.promise()}},getPrimaryIntent:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.getPrimaryIntent(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters).then(t.resolve,t.reject)});return t.promise()}},hrefForAppSpecificHash:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.hrefForAppSpecificHashAsync(e.oMessageData.body.sAppHash).then(t.resolve,t.reject)});return t.promise()}},isInitialNavigation:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.isInitialNavigationAsync().then(function(t){e.resolve(t)})});return e.promise()}},getAppState:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.getAppState(S,e.oMessageData.body.sAppStateKey).done(function(e){delete e._oServiceInstance;t.resolve(e)})});return t.promise()}},setInnerAppRoute:{executeServiceCallFn:function(e){var t=u.parseShellHash(g.getHash()),r;if(t.appSpecificRoute===e.oMessageData.body.appSpecificRoute){return(new jQuery.Deferred).resolve().promise()}t.appSpecificRoute=e.oMessageData.body.appSpecificRoute;r="#"+u.constructShellHash(t);g.disableBlueBoxHashChangeTrigger=true;if(e.oMessageData.body.writeHistory===true||e.oMessageData.body.writeHistory==="true"){g.setHash(r)}else{g.replaceHash(r)}g.disableBlueBoxHashChangeTrigger=false;return(new jQuery.Deferred).resolve().promise()}},setInnerAppStateData:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;b.prototype._createNewInnerAppState(e).then(t.resolve);return t.promise()}},resolveIntent:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.resolveIntent(e.oMessageData.body.sHashFragment).then(t.resolve,t.reject)});return t.promise()}}}},"sap.ushell.ui5service.ShellUIService":{oServiceCalls:{setTitle:{executeServiceCallFn:function(e){return(new jQuery.Deferred).resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise()}},setBackNavigation:{executeServiceCallFn:function(e){return e.executeSetBackNavigationService(e.oMessage,e.oMessageData)}}}},"sap.ushell.services.ShellUIService":{oServiceCalls:{setTitle:{executeServiceCallFn:function(e){return(new jQuery.Deferred).resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise()}},setHierarchy:{executeServiceCallFn:function(e){return(new jQuery.Deferred).resolve(e.oContainer.getShellUIService().setHierarchy(e.oMessageData.body.aHierarchyLevels)).promise()}},setRelatedApps:{executeServiceCallFn:function(e){return(new jQuery.Deferred).resolve(e.oContainer.getShellUIService().setRelatedApps(e.oMessageData.body.aRelatedApps)).promise()}},setDirtyFlag:{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return(new jQuery.Deferred).resolve().promise()}},showShellUIBlocker:{executeServiceCallFn:function(e){var t=e.oMessageData.body.bShow;M(t);sap.ui.getCore().getEventBus().publish("sap.ushell.services.ShellUIService","showShellUIBlocker",{bShow:t});return(new jQuery.Deferred).resolve().promise()}},getFLPUrl:{executeServiceCallFn:function(e){var t=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){t=true}return(new jQuery.Deferred).resolve(sap.ushell.Container.getFLPUrl(t)).promise()}},getShellGroupIDs:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.getShellGroupIDs(e.oMessageData.body?e.oMessageData.body.bGetAll:undefined).then(t.resolve,t.reject)});return t.promise()}},addBookmark:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId).then(t.resolve,t.reject)});return t.promise()}},addBookmarkDialog:{executeServiceCallFn:function(e){sap.ui["require"](["sap/ushell/ui/footerbar/AddBookmarkButton"],function(e){var t=new e;t.firePress({})});return(new jQuery.Deferred).resolve().promise()}},getShellGroupTiles:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("LaunchPage").then(function(r){r.getTilesByGroupId(e.oMessageData.body.groupId).then(t.resolve,t.reject)});return t.promise()}},sendUrlAsEmail:{executeServiceCallFn:function(e){var t=c.last("/core/shellHeader/application").title;var r=t===undefined?v.i18n.getText("linkToApplication"):v.i18n.getText("linkTo")+" '"+t+"'";b.prototype._sendEmail("",r,document.URL,"","",document.URL,true);return(new jQuery.Deferred).resolve().promise()}},sendEmailWithFLPButton:{executeServiceCallFn:function(e){var t=c.last("/core/shellHeader/application").title;var r=t===undefined?v.i18n.getText("linkToApplication"):v.i18n.getText("linkTo")+" '"+t+"'";b.prototype._sendEmail("",r,document.URL,"","",document.URL,e.oMessageData.body.bSetAppStateToPublic);return(new jQuery.Deferred).resolve().promise()}},sendEmail:{executeServiceCallFn:function(e){b.prototype._sendEmail(e.oMessageData.body.sTo,e.oMessageData.body.sSubject,e.oMessageData.body.sBody,e.oMessageData.body.sCc,e.oMessageData.body.sBcc,e.oMessageData.body.sIFrameURL,e.oMessageData.body.bSetAppStateToPublic);return(new jQuery.Deferred).resolve().promise()}},processHotKey:{executeServiceCallFn:function(e){var t;try{t=new KeyboardEvent("keydown",e.oMessageData.body)}catch(a){var r=document.createEvent("KeyboardEvent"),n="";if(e.oMessageData.body.altKey){n+="Alt "}if(e.oMessageData.body.ctrlKey){n+="Control "}if(e.oMessageData.body.shiftKey){n+="Shift "}r.initKeyboardEvent("keydown",false,false,null,e.oMessageData.body.key,e.oMessageData.body.keyCode,n,0,false);t=r}document.dispatchEvent(t);return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.Container":{oServiceCalls:{setDirtyFlag:{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return(new jQuery.Deferred).resolve().promise()}},registerDirtyStateProvider:{executeServiceCallFn:function(e){if(e.oMessageData.body.bRegister){b.prototype.registerAsyncDirtyStateProvider(e)}else{b.prototype.deregisterAsyncDirtyStateProvider(e)}return(new jQuery.Deferred).resolve().promise()}},getFLPUrl:{executeServiceCallFn:function(e){var t=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){t=true}return(new jQuery.Deferred).resolve(sap.ushell.Container.getFLPUrl(t)).promise()}},getFLPConfig:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getFLPConfig().then(function(e){t.resolve(e)});return t.promise()}},getFLPPlatform:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getFLPPlatform().then(t.resolve);return t.promise()}}}},"sap.ushell.services.AppState":{oServiceCalls:{getAppState:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r.getAppState(e.oMessageData.body.sKey).done(function(e){delete e._oServiceInstance;t.resolve(e)}).fail(function(e){delete e._oServiceInstance;t.resolve(e)})});return t.promise()}},_saveAppState:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r._saveAppState(e.oMessageData.body.sKey,e.oMessageData.body.sData,e.oMessageData.body.sAppName,e.oMessageData.body.sComponent,e.oMessageData.body.bTransient,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings).then(t.resolve,t.reject)});return t.promise()}},_loadAppState:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r._loadAppState(e.oMessageData.body.sKey).then(t.resolve,t.reject)});return t.promise()}},deleteAppState:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r.deleteAppState(e.oMessageData.body.sKey).then(t.resolve,t.reject)});return t.promise()}},makeStatePersistent:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r.makeStatePersistent(e.oMessageData.body.sKey,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings).then(t.resolve,t.reject)});return t.promise()}}}},"sap.ushell.services.Bookmark":{oServiceCalls:{addBookmarkUI5:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){b.prototype._stripBookmarkServiceUrlForLocalContentProvider(e.oMessageData.body.oParameters,r);sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.addBookmark(e.oMessageData.body.oParameters,e.oMessageData.body.vContainer,r.id).then(t.resolve,t.reject)})})});return t.promise()}},addBookmark:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId).then(t.resolve,t.reject)});return t.promise()}},getShellGroupIDs:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(t){t.getShellGroupIDs().then(e.resolve,e.reject)});return e.promise()}},addCatalogTileToGroup:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.addCatalogTileToGroup(e.oMessageData.body.sCatalogTileId,e.oMessageData.body.sGroupId,e.oMessageData.body.oCatalogData).then(t.resolve,t.reject)});return t.promise()}},countBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.countBookmarks(e.oMessageData.body.sUrl,r.id).then(t.resolve,t.reject)})})});return t.promise()}},deleteBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.deleteBookmarks(e.oMessageData.body.sUrl,r.id).then(t.resolve,t.reject)})})});return t.promise()}},updateBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.updateBookmarks(e.oMessageData.body.sUrl,e.oMessageData.body.oParameters,r.id).then(t.resolve,t.reject)})})});return t.promise()}},getContentNodes:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(t){t.getContentNodes().then(e.resolve,e.reject)});return e.promise()}},addCustomBookmark:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.addCustomBookmark(e.oMessageData.body.sVizType,e.oMessageData.body.oConfig,e.oMessageData.body.vContentNodes,r.id).then(t.resolve,t.reject)})})});return t.promise()}},countCustomBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){e.oMessageData.body.oIdentifier.contentProviderId=r.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.countCustomBookmarks(e.oMessageData.body.oIdentifier).then(t.resolve,t.reject)})})});return t.promise()}},updateCustomBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){e.oMessageData.body.oIdentifier.contentProviderId=r.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.updateCustomBookmarks(e.oMessageData.body.oIdentifier,e.oMessageData.body.oConfig).then(t.resolve,t.reject)})})});return t.promise()}},deleteCustomBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){e.oMessageData.body.oIdentifier.contentProviderId=r.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.deleteCustomBookmarks(e.oMessageData.body.oIdentifier).then(t.resolve,t.reject)})})});return t.promise()}},addBookmarkToPage:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.addBookmarkToPage(e.oMessageData.body.oParameters,e.oMessageData.body.sPageId,r.id).then(t.resolve,t.reject)})})});return t.promise()}}}},"sap.ushell.services.AppLifeCycle":{oServiceCalls:{getFullyQualifiedXhrUrl:{executeServiceCallFn:function(e){var t="",r="",n=new jQuery.Deferred,a=e.oMessageData.body.path;if(a!==""&&a!==undefined&&a!==null){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(e){e.getCurrentApplication().getSystemContext().then(function(e){r=e.getFullyQualifiedXhrUrl(a);var o="",s="",l="",c=sap.ushell.Container.getFLPUrl(true),u=new i(c);if(u.protocol()!==null&&u.protocol()!==undefined&&u.protocol()!==""){s=u.protocol()+"://"}if(u.hostname()!==null&&u.hostname()!==undefined&&u.hostname()!==""){o=u.hostname()}if(u.port()!==null&&u.port()!==undefined&&u.port()!==""){l=":"+u.port()}t=s+o+l+r;n.resolve(t)})})}return n.promise()}},getSystemAlias:{executeServiceCallFn:function(e){var t=e.oContainer.getSystemAlias();if(t===null||t===undefined){t=""}return(new jQuery.Deferred).resolve(t).promise()}},setNewAppInfo:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(t){t.setAppInfo(e.oMessageData.body,true)});return(new jQuery.Deferred).resolve().promise()}},updateCurrentAppInfo:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(t){t.setAppInfo(e.oMessageData.body,false)});return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.AppConfiguration":{oServiceCalls:{setApplicationFullWidth:{executeServiceCallFn:function(e){a.setApplicationFullWidth(e.oMessageData.body.bValue);return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.appRuntime":{oRequestCalls:{innerAppRouteChange:{isActiveOnly:true,distributionType:["all"]},keepAliveAppHide:{isActiveOnly:true,distributionType:["all"]},keepAliveAppShow:{isActiveOnly:true,distributionType:["all"]},hashChange:{isActiveOnly:true,distributionType:["URL"]},setDirtyFlag:{isActiveOnly:true,distributionType:["URL"]},getDirtyFlag:{isActiveOnly:true,distributionType:["URL"]},themeChange:{isActiveOnly:false,distributionType:["all"]},uiDensityChange:{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{hashChange:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;g.disableBlueBoxHashChangeTrigger=true;g.replaceHash(e.oMessageData.body.newHash);g.disableBlueBoxHashChangeTrigger=false;var n=e.oMessageData.body.direction;if(n){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.hashChanger.fireEvent("hashReplaced",{hash:e.hashChanger.getHash(),direction:n});r.debug("PostMessageAPI.hashChange :: Informed by the Iframe, to change the "+"History direction property in FLP to: "+n);t.resolve()})}else{t.resolve()}return t.promise()}},iframeIsValid:{executeServiceCallFn:function(e){e.oContainer.setProperty("isIframeValidTime",{time:(new Date).getTime()},true);return(new jQuery.Deferred).resolve().promise()}},iframeIsBusy:{executeServiceCallFn:function(e){e.oContainer.setProperty("isIframeBusy",e.oMessageData.body.bValue,true);return(new jQuery.Deferred).resolve().promise()}},isInvalidIframe:{executeServiceCallFn:function(e){e.oContainer.setProperty("isInvalidIframe",e.oMessageData.body.bValue,true);return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.UserInfo":{oServiceCalls:{getThemeList:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){e.getThemeList().then(t.resolve,t.reject)});return t.promise()}},getShellUserInfo:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){e.getShellUserInfo().then(t.resolve,t.reject)});return t.promise()}},getLanguageList:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){e.getLanguageList().then(t.resolve,t.reject)});return t.promise()}},updateUserPreferences:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;if(e.oMessageData.body.language){sap.ushell.Container.getUser().setLanguage(e.oMessageData.body.language);sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){e.updateUserPreferences().then(function(){sap.ushell.Container.getUser().resetChangedProperty("language");t.resolve()},t.reject)})}else{t.resolve()}return t.promise()}},openThemeManager:{executeServiceCallFn:function(e){o.emit("openThemeManager",Date.now());return(new jQuery.Deferred).resolve().promise()}},getLocaleData:{executeServiceCallFn:function(e){var t={},r=y.getFormatSettings();t.dateFormatShort=r.getDatePattern("short");t.dateFormatMedium=r.getDatePattern("medium");t.numberFormatGroup=r.getNumberSymbol("group");t.numberFormatDecimal=r.getNumberSymbol("decimal");t.timeFormatShort=r.getTimePattern("short");t.timeFormatMedium=r.getTimePattern("medium");t.calendarMapping=r.getLegacyDateCalendarCustomizing();t.timeZone=y.getTimezone();t.currencyFormats=r.getCustomCurrencies();return(new jQuery.Deferred).resolve(t).promise()}}}},"sap.ushell.services.ShellNavigation":{oServiceCalls:{toExternal:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){t.toExternal(e.oMessageData.body.oArgs,undefined,e.oMessageData.body.bWriteHistory)});return(new jQuery.Deferred).resolve().promise()}},toAppHash:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){t.toAppHash(e.oMessageData.body.sAppHash,e.oMessageData.body.bWriteHistory)});return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.NavTargetResolution":{oServiceCalls:{getDistinctSemanticObjects:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(t){t.getDistinctSemanticObjects().then(e.resolve,e.reject)});return e.promise()}},expandCompactHash:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(r){r.expandCompactHash(e.oMessageData.body.sHashFragment).then(t.resolve,t.reject)});return t.promise()}},resolveHashFragment:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(r){r.resolveHashFragment(e.oMessageData.body.sHashFragment).then(t.resolve,t.reject)});return t.promise()}},isIntentSupported:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(r){r.isIntentSupported(e.oMessageData.body.aIntents).then(t.resolve,t.reject)});return t.promise()}},isNavigationSupported:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(r){r.isNavigationSupported(e.oMessageData.body.aIntents).then(t.resolve,t.reject)});return t.promise()}}}},"sap.ushell.services.Renderer":{oServiceCalls:{addHeaderItem:{executeServiceCallFn:function(e){F("addHeaderItem",e);return(new jQuery.Deferred).resolve().promise()}},addHeaderEndItem:{executeServiceCallFn:function(e){F("addHeaderEndItem",e);return(new jQuery.Deferred).resolve().promise()}},showHeaderItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},showHeaderEndItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},hideHeaderItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},hideHeaderEndItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},setHeaderTitle:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(e.oMessageData.body.sTitle);return(new jQuery.Deferred).resolve().promise()}},setHeaderVisibility:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderVisibility(e.oMessageData.body.bVisible,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},createShellHeadItem:{executeServiceCallFn:function(e){var t=e.oMessageData.body.params;t.press=function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:t.id})};new h(t);return(new jQuery.Deferred).resolve().promise()}},showActionButton:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showActionButton(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},hideActionButton:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},addUserAction:{executeServiceCallFn:function(e){e.oMessageData.body.oParameters.oControlProperties.press=function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:e.oMessageData.body.oParameters.oControlProperties.id})};sap.ushell.Container.getRenderer("fiori2").addUserAction(e.oMessageData.body.oParameters);return(new jQuery.Deferred).resolve().promise()}},addOptionsActionSheetButton:{executeServiceCallFn:function(e){var t=Array.isArray(e.oMessageData.body)?e.oMessageData.body:[e.oMessageData.body];t.forEach(function(t){if(p.byId(t.id)){p.byId(t.id).destroy()}new d({id:t.id,text:t.text,icon:t.icon,tooltip:t.tooltip,press:function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:t.id})}});sap.ushell.Container.getRenderer("fiori2").showActionButton([t.id],true,t.aStates)});return(new jQuery.Deferred).resolve().promise()}},removeOptionsActionSheetButton:{executeServiceCallFn:function(e){var t=Array.isArray(e.oMessageData.body)?e.oMessageData.body:[e.oMessageData.body];t.forEach(function(e){sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.id,true,e.aStates);if(p.byId(e.id)){p.byId(e.id).destroy()}});return(new jQuery.Deferred).resolve().promise()}},updateHeaderItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").updateHeaderItem(e.oMessageData.body.sId,e.oMessageData.body.oControlProperties);return(new jQuery.Deferred).resolve().promise()}},destroyButton:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").destroyButton(e.oMessageData.body.aIds);return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.LaunchPage":{oServiceCalls:{getGroupsForBookmarks:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("LaunchPage").then(function(t){t.getGroupsForBookmarks().then(e.resolve,e.reject)});return e.promise()}}}},"sap.ushell.services.Menu":{oServiceCalls:{getSpacesPagesHierarchy:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Menu").then(function(t){t.getSpacesPagesHierarchy().then(function(t){e.resolve(t)})});return e.promise()}}}},"sap.ushell.services.CommonDataModel":{oServiceCalls:{getAllPages:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(t){t.getAllPages().then(function(t){e.resolve(t)})});return e.promise()}}}},"sap.ushell.services.MessageBroker":{oServiceCalls:{_execute:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("MessageBroker").then(function(r){if(r.isEnabled()){sap.ui.require(["sap/ushell/services/_MessageBroker/MessageBrokerEngine"],function(r){r.processPostMessage(e).then(function(e){t.resolve(e)}).catch(function(e){t.reject(e)})})}});return t.promise()}}}},"sap.ushell.services.SearchableContent":{oServiceCalls:{getApps:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("SearchableContent").then(function(r){var n;try{n=e.oMessageData.body.oOptions}catch(e){n={}}r.getApps(n).then(function(e){t.resolve(e)})});return t.promise()}}}},"sap.ushell.services.ReferenceResolver":{oServiceCalls:{resolveReferences:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(r){r.resolveReferences(e.oMessageData.body.aReferences).then(t.resolve,t.reject)});return t.promise()}}}}};function b(){this._getBrowserURL=function(){return document.URL};Object.keys(D).forEach(function(e){if(e.indexOf(C)!==0){throw new Error("All Post Message APIs must start with '"+C+"' - "+e)}});s.init(true,b.prototype.registerShellCommunicationHandler.bind(this))}b.prototype.getAPIs=function(){return D};function A(e,t){var r=D[e],n;if(r){if(t.oServiceCalls){Object.keys(t.oServiceCalls).forEach(function(e){r.oServiceCalls[e]=t.oServiceCalls[e]})}if(t.oRequestCalls){Object.keys(t.oRequestCalls).forEach(function(e){r.oRequestCalls[e]=t.oRequestCalls[e]})}return}n={oRequestCalls:{},oServiceCalls:{}};if(t.oServiceCalls){Object.keys(t.oServiceCalls).forEach(function(e){n.oServiceCalls[e]=t.oServiceCalls[e]})}if(t.oRequestCalls){Object.keys(t.oRequestCalls).forEach(function(e){n.oRequestCalls[e]=t.oRequestCalls[e]})}D[e]=n}b.prototype._getPostMesageInterface=function(e,t){var r,n=this.getAPIs();if(n[e]){r=n[e];if(r&&r.oRequestCalls&&r.oRequestCalls[t]){return r.oRequestCalls[t]}}return undefined};b.prototype.registerShellCommunicationHandler=function(e){Object.keys(e).forEach(function(t){A(t,e[t])})};b.prototype.isActiveOnly=function(e,t){var r=this._getPostMesageInterface(e,t);if(r){return r.isActiveOnly}return undefined};b.prototype.getResponseHandler=function(e,t){var r=this._getPostMesageInterface(e,t);if(r){return r.fnResponseHandler}return undefined};b.prototype._createNewInnerAppState=function(e){return new Promise(function(t){var r,n,a,o,s;sap.ushell.Container.getServiceAsync("AppState").then(function(i){r=i.createEmptyAppState();if(e.oMessageData.body.sData!==undefined){try{s=JSON.parse(e.oMessageData.body.sData)}catch(t){s=e.oMessageData.body.sData}}else{s=""}r.setData(s);r.save();o=r.getKey();n=g.getHash();if(n.indexOf("&/")>0){if(n.indexOf("sap-iapp-state=")>0){a=/(?:sap-iapp-state=)([^&/]+)/.exec(n)[1];n=n.replace(a,o)}else{n=n+"/sap-iapp-state="+o}}else{n=n+"&/sap-iapp-state="+o}g.disableBlueBoxHashChangeTrigger=true;g.replaceHash(n);g.disableBlueBoxHashChangeTrigger=false;t(o)})})};function M(e){if(e===true){if(p.byId("shell-header")){p.byId("shell-header").setBlocked(true);var t=jQuery("#shell-header-blockedLayer");t.addClass("sapUshellShellBlocked")}if(p.byId("menuBar")){p.byId("menuBar").setBlocked(true);var r=jQuery("#menuBar-blockedLayer");r.addClass("sapUshellMenuBarBlocked")}}else if(e===false){if(p.byId("shell-header")){p.byId("shell-header").setBlocked(false)}if(p.byId("menuBar")){p.byId("menuBar").setBlocked(false)}}}function F(e,t){sap.ushell.Container.getRenderer("fiori2")[e]("sap.ushell.ui.shell.ShellHeadItem",{id:t.oMessageData.body.sId,tooltip:t.oMessageData.body.sTooltip,icon:t.oMessageData.body.sIcon,floatingNumber:t.oMessageData.body.iFloatingNumber,press:function(){t.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:t.oMessageData.body.sId})}},t.oMessageData.body.bVisible,t.oMessageData.body.bCurrentState||true,t.oMessageData.body.aStates)}b.prototype.registerAsyncDirtyStateProvider=function(e){sap.ushell.Container.setAsyncDirtyStateProvider(function(t){return new Promise(function(r){var n=e.oContainer.createPostMessageRequest("sap.ushell.appRuntime.handleDirtyStateProvider",{oNavigationContext:t}),a;e.oContainer.postMessageToCurrentIframe(n,true).then(function(e){if(a){clearTimeout(a)}r(e&&e.body&&e.body.result||false)});a=setTimeout(function(){r(false)},2500)})})};b.prototype.deregisterAsyncDirtyStateProvider=function(e){sap.ushell.Container.setAsyncDirtyStateProvider(undefined)};b.prototype._sendEmail=function(e,t,n,a,o,s,i){var l=this._getBrowserURL&&this._getBrowserURL()||document.URL;function c(e,r,a,o,s,i){t=t&&t.includes(e)?t.replace(e,r):t;n=n&&n.includes(e)?n.replace(e,r):n;t=t&&a&&s&&t.includes(a)?t.replace(a,s):t;t=t&&o&&i&&t.includes(o)?t.replace(o,i):t;n=n&&a&&s&&n.includes(a)?n.replace(a,s):n;n=n&&o&&i&&n.includes(o)?n.replace(o,i):n}if(i){sap.ushell.Container.getServiceAsync("AppState").then(function(i){i.setAppStateToPublic(s).done(function(r,i,u,p,d){if(p!==undefined){l=l.replace(i,p)}if(d!==undefined){l=l.replace(u,d)}c(s,l,i,u,p,d);m.triggerEmail(e,t,n,a,o)}).fail(r.error)})}else{c(s,l);m.triggerEmail(e,t,n,a,o)}};b.prototype._stripBookmarkServiceUrlForLocalContentProvider=function(e,t){if(!e||!e.serviceUrl||!t){return}if(t.id===""||t.id==="saas_approuter"){e.serviceUrl=undefined;r.warning("Dynamic data bookmarks tiles are not supported for local content providers",null,"sap/ushell/components/applicationIntegration/application/PostMessageAPI")}};return new b});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface", ["sap/base/util/deepExtend","sap/ui/thirdparty/jquery"],function(e,jQuery){"use strict";var s="user.postapi.";function t(){var e,s;this.init=function(t,n){e=t;s=n};this.getInterface=function(){var t={};t.registerPostMessageAPIs=n.bind(null,s);t[e===true?"postMessageToApp":"postMessageToFlp"]=r.bind(null,e);t.createPostMessageResult=i;return t}}function n(t,n,r){var i={status:"success",desc:""};var u={isActiveOnly:true,distributionType:["all"],fnResponseHandler:function(){}};if(n===undefined||Object.keys(n).length<=0){i.status="error";i.desc="no handler was found to register";return i}if(r===undefined){r=false}Object.keys(n).forEach(function(t){if(typeof t!=="string"){i.status="error";i.desc="oPostMessageAPIs should contain only string keys"}else if(r===false&&t.indexOf(s)!==0){i.status="error";i.desc="all user custom Message APIs must start with '"+s+"'"}else{Object.keys(n[t]).forEach(function(s){if(s=="inCalls"){n[t].oServiceCalls=n[t][s];delete n[t][s]}else if(s=="outCalls"){Object.keys(n[t][s]).forEach(function(r){n[t][s][r]=e({},u,n[t][s][r])});n[t].oRequestCalls=n[t][s];delete n[t][s]}else{i.status="error";i.desc="api should contain either 'inCalls' or 'outCalls'"}})}});if(i.status==="success"){t(n)}return i}function r(e,s,t,n){var r=new jQuery.Deferred;if(n===undefined){n={}}if(e){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(e){e.postMessageToIframeApp(s,t,n,true).then(function(e){r.resolve(e&&e[0]&&e[0].body.result)})})}else{sap.ui.require(["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e){e.sendMessageToOuterShell(s+"."+t,n).done(function(e){r.resolve(e)})})}return r.promise()}function i(e){if(e===undefined){e={}}return(new jQuery.Deferred).resolve(e).promise()}return new t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/configuration/AppMeta", ["sap/base/util/extend","sap/ushell/services/AppConfiguration","sap/ushell/components/applicationIntegration/elements/model","sap/ui/Device","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ui/performance/Measurement","sap/ui/util/Mobile","sap/ui/core/Core"],function(e,t,n,i,a,s,o,r,l,c,u,p){"use strict";function h(){var h;var f;var m;var d;this.getIsTitleChanged=function(){return h};this.getIsRelatedAppsChanged=function(){return d};this.getHierarchyDefaultValue=function(){var e=[];var t=a.last("/core/shell/model/currentState/stateName");if(t&&(t==="app"||t==="embedded")){e=[{icon:"sap-icon://home",title:o.i18n.getText("actionHomePage"),intent:m?"#"+m:"#"}];var n=a.last("/core/shell/model/currentSpaceAndPage");if(n!==undefined){e.splice(0,0,{icon:"sap-icon://space-navigation",title:n.pageTitle,subtitle:n.pageTitle!==n.spaceTitle?n.spaceTitle:undefined,intent:"#"+n.hash})}}return e};this.init=function(e){m=e};this.getIsHierarchyChanged=function(){return f};this.onHierarchyChange=function(t){f=true;var i=t.getParameters().data,s=[],o=a.last("/core/shell/model/currentState/stateName");if(!i){i=[]}var r=this.getHierarchyDefaultValue();i.forEach(function(t,n){s[n]=e({},t)});s=s.concat(r);if(o==="home"){n.updateStateProperty("application/hierarchy",s,false,["home"])}n.updateStateProperty("application/hierarchy",s,true)}.bind(this);this.onRelatedAppsChange=function(e){d=true;var t=e.getParameters().data,i=a.last("/core/shell/model/currentState/stateName");if(!t){t=[]}if(i==="home"){n.updateStateProperty("application/relatedApps",t,false,["home"])}n.updateStateProperty("application/relatedApps",t,true)};this.resetShellUIServiceHandlers=function(){d=false;f=false;h=false};this.onTitleChange=function(e){h=true;var t=e.getParameters().data;if(!t&&!(e.getParameters().bAcceptEmptyString===true)){t=this.getAppMeta().getTitleDefaultValue()}var i=a.last("/core/shell/model/currentState/stateName");if(i==="home"){n.updateStateProperty("application/title",t,false,["home"])}n.updateStateProperty("application/title",t,true);l.genericSetItem("application/title",t);window.document.title=t;s.setPerformanceMark("FLP -- title change");r.emit("TitleChanged",t)};this._getDefaultFavIcon=function(e){var t=e.get("sapUiShellFavicon");if(t){var n=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(t);if(n){t=n[1]}else if(t==="''"||t==="none"){t=null}}var i=a.last("/core/shell/favIcon");if(i&&t===null){return i}if(!t){var s=sap.ui.require.toUrl("sap/ushell");return s+"/themes/base/img/launchpad_favicon.ico"}return t};this.getFavIconHref=function(){var e=document.querySelector('link[rel="shortcut icon"]');return e&&e.getAttribute("href")||""};this.getAppIcon=function(){var e="sap-icon://folder",n=t.getMetadata();if(n&&n.icon){e=n.icon}return e};this.setAppIcons=function(e){c.start("FLP:ShellController.setAppIcons","setValues","FLP");sap.ui.require(["sap/ui/core/theming/Parameters"],function(t){if(p.isThemeApplied()){this.setValues(e,t)}else{p.attachThemeChanged(function(){this.setValues(e,t)}.bind(this))}}.bind(this));c.end("FLP:ShellController.setAppIcons")};this.setValues=function(e,t){var n=sap.ui.require.toUrl("sap/ushell"),a=e&&e.homeScreenIconPhone||n+"/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png",s=e&&e["homeScreenIconPhone@2"]||n+"/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png",o=e&&e.homeScreenIconTablet||n+"/themes/base/img/launchicons/72_iPad_Desktop_Launch.png",r=e&&e["homeScreenIconTablet@2"]||n+"/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png",l=e&&e.favIcon||this._getDefaultFavIcon(t),c=this.getFavIconHref();if(i.os.ios){u.setIcons({phone:a,"phone@2":s,tablet:o,"tablet@2":r,favicon:l,precomposed:false})}else if(c!==l){u.setIcons({phone:"","phone@2":"",tablet:"","tablet@2":"",favicon:l,precomposed:true})}};this._applyContentDensityByPriority=function(e,n){return new Promise(function(a){sap.ushell.Container.getServiceAsync("UserInfo").then(function(s){var o;if(e===undefined){if(i.system.combi){var r=s.getUser(),l="autoDetect";if(r){l=r.getContentDensity()}switch(l){case"cozy":e=false;break;case"compact":e=true;break;default:o=t.getMetadata();if(o.compactContentDensity&&!o.cozyContentDensity){e=true}else{e=false}}}else{o=t.getMetadata();if(o.compactContentDensity&&!o.cozyContentDensity){e=true}else if(!o.compactContentDensity&&o.cozyContentDensity){e=false}else{e=this._isCompactContentDensityByDevice()}}}this._applyContentDensityClass(e,n).then(a)}.bind(this))}.bind(this))};this._applyContentDensityClass=function(e,t){return new Promise(function(n,i){function a(e){document.body.classList.toggle("sapUiSizeCompact",e);document.body.classList.toggle("sapUiSizeCozy",!e);if(t===true){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(t){t.postMessageToIframeApp("sap.ushell.appRuntime","uiDensityChange",{isTouch:e?"0":"1"})})}n()}if(e===undefined){sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){var t=e.getUser?e.getUser():undefined;var n;if(t&&t.getContentDensity()==="compact"){n=true}else if(t&&t.getContentDensity()==="cozy"){n=false}else{n=this._isCompactContentDensityByDevice()}a(n)}.bind(this))}else{a(!!e)}}.bind(this))}.bind(this);this._isCompactContentDensityByDevice=function(){return!i.support.touch||i.system.combi};this.getTitleDefaultValue=function(){var e="",n=t.getMetadata();if(n&&n.title){e=n.title}return e};this.create=function(){};this.restore=function(e){this._applyContentDensityByPriority();this.setAppIcons(e)};this.store=function(e){};this.destroy=function(e){}}return new h},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/elements/model", ["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/components/HeaderManager","sap/ushell/components/StateHelper","sap/ui/performance/Measurement","sap/base/Log","sap/base/util/deepExtend","sap/base/util/extend","sap/ushell/utils/UrlParsing","sap/ui/core/Core"],function(t,e,n,a,i,o,s,r,l,h,u){"use strict";var f;var d;function c(){return{home:{actions:["ContactSupportBtn"]},app:{actions:["ContactSupportBtn","aboutBtn"]},minimal:{actions:["ContactSupportBtn","aboutBtn"]},standalone:{actions:["ContactSupportBtn","aboutBtn"]},embedded:{actions:["ContactSupportBtn","aboutBtn"]},"embedded-home":{actions:["ContactSupportBtn","aboutBtn"]},lean:{actions:["ContactSupportBtn","aboutBtn"]}}}function g(){return{blank:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"blank-home":{stateName:"blank-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},home:{stateName:"home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,search:"",paneContent:[],actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},app:{stateName:"app",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],search:"",actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},minimal:{stateName:"minimal",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},standalone:{stateName:"standalone",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},embedded:{stateName:"embedded",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"embedded-home":{stateName:"embedded-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},headerless:{stateName:"headerless",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},merged:{stateName:"merged",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"headerless-home":{stateName:"headerless-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"merged-home":{stateName:"merged-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},lean:{stateName:"lean",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:false,paneContent:[],search:"",actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},"lean-home":{stateName:"lean-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:false,paneContent:[],search:"",actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]}}}function m(t,e){return Object.keys(t).reduce(function(n,a){if(!e[a]){n[a]=t[a]}return n},{})}function S(t,e){return e!==undefined}function p(){return true}function C(t,e){var n=e.split("/");var a=t;n.shift();n.forEach(function(t){if(!a){return}a=a[t]});return a}function v(t,e,n){var a=t.split("/");var i=n;a.shift();var o=a.pop();a.forEach(function(t){i=i[t]});i[o]=e}function w(){var w;var A;var I;var b;var R;var _;var F;var y;var B;var H;this.createDefaultTriggers=function(e){var n=function(t,e,n){if(n.sProperty==="actions"){var a=C(n.oModel,n.path);if(a&&a.length===0&&n.aIds&&n.aIds.length>0){this._renderShellState()}}}.bind(this);var a=function(t){function e(t,e){var n=h.getHash(t),a=h.getHash(e),i=h.parseShellHash(n).appSpecificRoute,o=h.parseShellHash(a).appSpecificRoute;return i!==o}var n=e(t.oldURL,t.newURL);if(n){this.addHeaderItem(["backBtn"],true)}}.bind(this);this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){u.getEventBus().subscribe("launchpad","updateShell",n,this)},fnUnRegister:function(){u.getEventBus().unsubscribe("launchpad","updateShell",n,this)}}],["blank","blank-home"],e);var i=this;var o;this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){window.addEventListener("hashchange",a);var e=0;o=t.on("AppRendered").do(function(){e++;if(e>=2){i.addHeaderItem(["backBtn"],true)}})},fnUnRegister:function(){window.removeEventListener("hashchange",a);if(o){o.off()}}}],["lean","lean-home"],e)};this.init=function(t,n){f=g();d=c();A=e.last("/core/shell/model");w={};R={};_=false;y=false;B=[];H=true;b=n;F=undefined;if(t){o.start("FLP:ElementsModel.init","moveShellHeaderEndItems","FLP");if(t.moveContactSupportActionToShellHeader){this._removeCustomDataActionBtnFromUserActionsMenu("ContactSupportBtn")}if(t.moveAppFinderActionToShellHeader){this._removeActionFromUserActionsMenu("openCatalogBtn")}if(t.moveUserSettingsActionToShellHeader){this._removeActionFromUserActionsMenu("userSettingsBtn")}o.end("FLP:ElementsModel.init")}var a=t&&t.appState?t.appState:"home";this.createDefaultTriggers(a);this.switchState(a)};this.destroy=function(){A=undefined;w=undefined;b=undefined;R=undefined;_=undefined;H=undefined;y=undefined;F=undefined;f=undefined;d=undefined};this.getModel=function(){var t=sap.ushell.Container.getRenderer("fiori2");if(!t){return undefined}return t._oShellView.getModel()};this._removeCustomDataActionBtnFromUserActionsMenu=function(t){for(var e in d){var n=d[e];var a=n.actions;var i=a.indexOf(t);if(i!==-1){d[e].actions.splice(i,1)}}};this._removeActionFromUserActionsMenu=function(t){var e;for(e in f){var n=f[e];if(e==="blank"||e==="blank-home"){continue}var a=n.actions;var i=a.indexOf(t);if(i!==-1){f[e].actions.splice(i,1)}}};this.destroyManageQueue=function(){this._destroyManageQueue(["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"])};this.switchState=function(t){var n=r({},f[t]);var i=m(n,{aTriggers:true});e.emit("/core/shell/model/currentState",i);a.switchState(t);I=b.customShellState;F=undefined;this._renderShellState();return n};this.setLeftPaneVisibility=function(t,e,n){this.updateStateProperty("showPane",t,e,n)};this.setHeaderHiding=function(){s.warning("Application Life Cycle model: headerHiding property is deprecated and has no effect")};this._createHeaderEventPayload=function(t,e,n,a,i,o){var s={propertyName:t,value:e,aStates:a,bCurrentState:n,action:o,bDoNotPropagate:i};return s};this.setHeaderVisibility=function(t,e,n){var i=this._createHeaderEventPayload("headerVisible",t,e,n,false);a.updateStates(i)};this.showLogo=function(t,e){this.updateShowLogo(true,t,e,false)};this.updateShowLogo=function(t,e,n,i){var o=this._createHeaderEventPayload("showLogo",t,e,n,i);a.updateStates(o)};this.addHeaderItem=function(t,e,n){if(t.length){var i=this._createHeaderEventPayload("headItems",t,e,n,false);a.updateStates(i)}};this.removeHeaderItem=function(t,e,n){var i=this._createHeaderEventPayload("headItems",t,e,n,false,"remove");a.updateStates(i)};this.addHeaderEndItem=function(t,e,n,i){if(t.length){var o=this._createHeaderEventPayload("headEndItems",t,e,n,i);a.updateStates(o)}};this.removeHeaderEndItem=function(t,e,n){var i=this._createHeaderEventPayload("headEndItems",t,e,n,false,"remove");a.updateStates(i)};this.addSubHeader=function(t,e,n){if(t.length){this._addShellItem("subHeader",t,e,n)}};this.removeSubHeader=function(t,e,n){this._removeShellItem("subHeader",t,e,n)};this.addActionButton=function(t,e,n){this._addActionButton("actions",t,e,n)};this.removeActionButton=function(t,e,n){this._removeShellItem("actions",t,e,n)};this.addToolAreaItem=function(t,e,n,a){if(t.length){this._addToolAreaItem("toolAreaItems",t,e,n,a)}};this.removeToolAreaItem=function(t,e,n){this._removeShellItem("toolAreaItems",t,e,n)};this.addLeftPaneContent=function(t,e,n){if(t.length){this._addShellItem("paneContent",t,e,n)}};this.removeLeftPaneContent=function(t,e,n){this._removeShellItem("paneContent",t,e,n)};this.addRightFloatingContainerItem=function(t,e,n){if(t.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",t,e,n)}};this.removeRightFloatingContainerItem=function(t,e,n){this._removeShellItem("RightFloatingContainerItems",t,e,n)};this.showSettingsButton=function(t,e){this.addActionButton(["userSettingsBtn"],t,e,false)};this.showSignOutButton=function(t,e){this.addActionButton(["logoutBtn"],t,e,false)};this.showRightFloatingContainer=function(t){this._showRightFloatingContainer(t)};this.addFloatingActionButton=function(t,e,n){if(t.length){this._addShellItem("floatingActions",t,e,n)}};this.removeFloatingActionButton=function(t,e,n){this._removeShellItem("floatingActions",t,e,n)};this.updateStateProperty=function(t,e,n,i,o){if(t.startsWith("application")){var s=this._createHeaderEventPayload(t,e,n,i,false);a.updateStates(s);return}this._setShellItem(t,e,n,i,S,v,o)};this._handleTriggers=function(t){var e,n,a=[],i={};H=false;while(B.length>0){e=B.pop();if(t[e.sName]){a.push(e);i[e.sName]=e}else{e.fnUnRegister(this)}}for(var o in t){if(t.hasOwnProperty(o)){if(!i[o]){n=t[o];n.fnRegister(this);a.push(n)}}}B=a;H=true};this._registerTriggers=function(t){H=false;t.forEach(function(t){t.fnRegister(this);B.push(t)});H=true};function P(t,e){var n=[];if(!e.aTriggers){e.aTriggers=[]}t.forEach(function(t){var a={sName:t.sName,fnRegister:t.fnRegister,fnUnRegister:t.fnUnRegister};e.aTriggers.push(a);n.push(a)});return n}this.createTriggersOnState=function(t){var e=P(t,f);if(!_){this._registerTriggers(e)}};this.createTriggersOnBaseStates=function(t,e,n){var a=[];e.forEach(function(e){var n=f[e];a=P(t,n)});var i=e.indexOf(n)>=0;if(i&&!_){this._registerTriggers(a)}};this.createTriggers=function(t,e,n){var a=A.currentState;if(e===true){this.createTriggersOnState(t,a);return}this.createTriggersOnBaseStates(t,n,a.stateName)};this.showShellItem=function(t,e,n){var a=i.getModelStates(e),o="/currentState"+t,s;for(var r=0;r<a.length;r++){s=f[a[r]].stateName;f[s][t.split("/")[1]]=n}if(A.currentState.stateName===e){v(o,n,A);if(!_){this._renderShellState()}}};this.addCustomItems=function(t,e,n,a){if(this._isValidStateEntry(t)){this._isValidStateEntry(t).fnAdd(e,n,a)}else{throw new Error("Invalid state entry:"+t)}};this.removeCustomItems=function(t,e,n,a){if(this._isValidStateEntry(t)){this._isValidStateEntry(t).fnRemove(e,n,a)}else{throw new Error("Invalid state entry:"+t)}};this.applyExtendedShellState=function(t){F=t;this._renderShellState()};this.addEntryInShellStates=function(t,e,n,a,i){var o,s;if(!w[t]){w[t]={fnAdd:n,fnHide:a};var r=this._getStatesList();for(o=0;o<r.length;o++){s=r[o];f[s][t]=i[s]}this["remove"+e]=a;this["add"+e]=n}else{throw new Error("State entry already exsists:"+t)}};this.addElementToManagedQueue=function(t){var n=e.last("/core/shell/model/currentState/stateName"),a,i=t.getId();if(!b){b={extendedShellStates:{},aTriggers:[],customShellState:this._createCustomShellState("custom")}}a=b.extendedShellStates;if(!a[n]){a[n]={managedObjects:[],customState:undefined}}a[n].managedObjects.push(i);var o=R[i];if(o){o.nRefCount++}else{o={oItem:t,nRefCount:1};R[i]=o}};this.updateNeededTriggersMap=function(t,e){var n;if(!e){return}for(n=0;n<e.length;n++){t[e[n].sName]=e[n]}};this._renderShellState=function(){var t=e.last("/core/shell/model/currentState/stateName"),n,i,o=r({},f[t]),s=b,l,h={};if(_){return}if(s&&s.customShellState){l=s.customShellState.currentState}var u={currentState:r({},o)};A=u;_=true;if(F&&s.extendedShellStates&&s.extendedShellStates[F]){n=s.extendedShellStates[F].customState;i=n.currentState;this._addCustomShellStates(i)}if(l){this._addCustomShellStates(l)}A=e.last("/core/shell/model");if(o&&o.aTriggers){this.updateNeededTriggersMap(h,o.aTriggers)}if(i&&i.aTriggers){this.updateNeededTriggersMap(h,i.aTriggers)}if(l&&l.aTriggers){this.updateNeededTriggersMap(h,l.aTriggers)}if(H){this._handleTriggers(h)}delete u.currentState.aTriggers;var d=m(u.currentState,{aTriggers:true});a.recalculateState(F);e.emit("/core/shell/model/currentState",d);_=false};this._addCustomShellStates=function(t){this.addToolAreaItem(t.toolAreaItems,false,true);this.addSubHeader(t.subHeader,true);this.addRightFloatingContainerItem(t.RightFloatingContainerItems,true);this.addActionButton(t.actions,true,undefined,false);this.addLeftPaneContent(t.paneContent,true);this.addFloatingActionButton(t.floatingActions,true);this.showRightFloatingContainer(t.showRightFloatingContainer)};this._createCustomShellState=function(t){var e={currentState:{stateName:t,headEndItems:[],paneContent:[],headItems:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],application:{},showRightFloatingContainer:undefined,headerHeading:undefined}};var n=d[t];if(n){l(e.currentState,n)}return e};this._showRightFloatingContainer=function(t){this._setShellItem("showRightFloatingContainer",t,true,[],S,v)};this._addActionButton=function(t,e,a,i){function o(t,e,a){var i=C(a,t);var o=i.indexOf("logoutBtn");if(o>-1){i.splice.apply(i,[o,0].concat(e))}else{i=i.concat(e)}var s=n.removeDuplicatedActions(i);function r(t){var e=[],n=["recentActivitiesBtn","frequentActivitiesBtn","openCatalogBtn","userSettingsBtn","ActionModeBtn","EditModeBtn","ContactSupportBtn"];for(var a=0;a<n.length;a++){var i=t.indexOf(n[a]);if(i>-1){e.push(t.splice(i,1)[0])}}e=e.concat(t);return e}var l=r(s);v(t,l,a)}this._setShellItem(t,e,a,i,p,o)};this.setFloatingContainerContent=function(t,e,n,a){function i(t,e,n){return e.length===1}function o(t,e,n){v(t,e,n)}this._setShellItem(t,e,n,a,i,o)};this._addShellItem=function(t,e,n,a){function i(t,e,n){if(t.length>0){s.warning("You can only add one item. Replacing existing item: "+t[0]+" in state: "+n+", with the new item: "+e[0]+".")}return true}function o(t,n,a){v(t,e.slice(0),a)}this._setShellItem(t,e,n,a,i,o)};this._addRightFloatingContainerItem=function(t,e,n,a){function i(t,e,n){var a=C(n,t);a=a.concat(e);v(t,a,n)}this._setShellItem(t,e,n,a,p,i)};this._addToolAreaItem=function(t,e,n,a,o){function s(t,e,n){var a=C(n,t),i,o;if(typeof e==="string"){e=[e]}for(o=0;o<e.length;o++){i=e[o];if(a.indexOf(i)<0){a.push(i)}}v(t,a,n)}if(n){var r,l=i.getPassStates(o);for(r=0;r<l.length;r++){this.showShellItem("/toolAreaVisible",l[r],true)}}this._setShellItem(t,e,a,o,p,s)};this._removeShellItem=function(t,e,n,a){function i(t,e){var n,a,i;for(i=0;i<e.length;i++){a=e[i];n=t.indexOf(a);if(n<0){s.warning("You cannot remove Item: "+a+", the Item does not exists.");return false}}return true}function o(t,e,n){var a=C(n,t),i,o,s;for(s=0;s<e.length;s++){o=e[s];i=a.indexOf(o);if(i>-1){a.splice(i,1)}}v(t,a,n)}this._setShellItem(t,e,n,a,i,o)};this._setShellItem=function(t,e,n,a,o,s,r){var l,h;var d=Array.isArray(e)?e.slice(0):e;if(n===true){l="/currentState/"+t;h=C(A,l);if(o(h,d,"currentState")===false){return}if(!y&&!_){s(l,d,I);u.getEventBus().publish("launchpad","updateShell",{oModel:A,path:l,aIds:d,sProperty:t});this._renderShellState()}else{s(l,d,A)}}else{var c=r?a:i.getPassStates(a),g,m=A.currentState.stateName;for(g=0;g<c.length;g++){var S=c[g],p;h=C(f[S],"/"+t);if(o(h,d,S)===false){continue}var v=i.getModelStates(S,r);for(p=0;p<v.length;p++){l="/"+v[p]+"/"+t;s(l,d,f);if(m===v[p]){if(!_){this._renderShellState()}}}}}};this._getStatesList=function(){return Object.keys(f)};this._destroyManageQueue=function(){var t,e,n,a,i,o;a=b.extendedShellStates;for(i in a){if(a.hasOwnProperty(i)){o=a[i].managedObjects;for(t=0;t<o.length;t++){e=o[t];n=R[e];n.nRefCount--;if(n.nRefCount===0){n.oItem.destroy();R[e]=null}}delete a[i]}}};this._isValidStateEntry=function(t){return!!w[t]};this.getModelToUpdate=function(){return A};this.setModelToUpdate=function(t,e){y=e;A=t};this._getManagedElements=function(){return R};this.extendStates=function(t){var e;for(e in t){if(t.hasOwnProperty(e)){n.updateProperties(f[e],t[e])}}};this.getBaseStateMember=function(t,e){return f[t][e]};this.getCustomStateDeltaMember=function(t,e){return d[t][e]};this.getAllStatesInDelta=function(){return Object.keys(d)}}var A=new w;return A},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/relatedServices/RelatedServices", ["sap/ui/core/Core"],function(t){"use strict";function i(){var i=false,a,e=false;this.resetBackNavigationFlag=function(){e=false};t.getEventBus().subscribe("relatedServices","resetBackNavigation",this.resetBackNavigationFlag,this);this._defaultBackNavigation=function(){window.history.back()};this.isBackNavigation=function(){return e};this.navigateBack=function(){var t=this;e=true;if(i===true){this._defaultBackNavigation()}else if(a){a()}else{sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(i){i.isInitialNavigationAsync().then(function(a){if(a){i.toExternal({target:{shellHash:"#"},writeHistory:false});return}t._defaultBackNavigation()})})}};this.setNavigateBack=function(t){i=false;a=t};this.resetNavigateBack=function(){i=true;a=undefined};this.restore=function(t){i=t.bDefaultBrowserBack;a=t.fnCustomBackNavigation};this.store=function(t){t.bDefaultBrowserBack=i;t.fnCustomBackNavigation=a}}return new i},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements", ["sap/base/Log","sap/base/util/extend"],function(e,t){"use strict";function a(){var a=[];var n;var i;var s={};var o;var r=false;var l={};var d;var h=[];var c={home:{actions:[]},app:{actions:["aboutBtn"]},minimal:{actions:["aboutBtn"]},standalone:{actions:["aboutBtn"]},embedded:{actions:["aboutBtn"]},"embedded-home":{actions:["aboutBtn"]},lean:{actions:["aboutBtn"]}};var u={home:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"home"}},app:{NWBC:{headerless:"headerless",default:"app"},TR:{headerless:"minimal",default:"app"},default:{default:"app"}}};this.init=function(e,t){n=e;if(t&&t.length>0){Object.keys(c).forEach(function(e){c[e].actions=t.concat(c[e].actions)})}};this.processDangling=function(){for(var e=0;e<a.length;e++){var t=a.pop();t.func.apply(this,t.args)}};this.setDangling=function(e){r=e};this.calculateElementsState=function(e,t,a,n){var i=u[e]?u[e]:u.default;var s=i[n?undefined:t]?i[t]:i.default;return s[a]?s[a]:s.default};this.createCustomShellState=function(e){var a={currentState:{stateName:e,headEndItems:[],paneContent:[],headItems:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],application:{},showRightFloatingContainer:undefined,headerHeading:undefined}};var n=c[e];if(n){t(a.currentState,n)}return a};this.createExtendedShellState=function(e,t){var a;var n=this.createCustomShellState(e);a=i.extendedShellStates;if(a[e]){return false}o=n;t();if(a[e]){a[e].customState=n}else{a[e]={managedObjects:[],customState:n}}o=i.customShellState;return true};this.assignNew=function(e){s=this.createCustomShellState(e);i.customShellState=s;i.aTriggers=[];i.extendedShellStates={};i.oCheckPoints={};this._updateModel();o=i.customShellState};this._genericSetItem=function(e,t){var a=e.split("/");var i=a.pop();var s=a.reduce(function(e,t){return e[t]},o.currentState);s[i]=t;n._renderShellState()};this._genericAddItems=function(e,t){var a=o.currentState[e];o.currentState[e]=a.concat(t);n._renderShellState()};this.genericSetItem=function(e,t){if(r){a.push({func:this._genericSetItem,args:arguments})}else{this._genericSetItem(e,t)}};this.genericAddItems=function(e,t){if(r){a.push({func:this.genericAddItems,args:arguments})}else{this._genericAddItems(e,t)}};this.setShellModelForApplications=function(t,a){var n=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(n.indexOf(t)>-1){this.genericSetItem(t,a)}else{e.error("Not a valid attribute:"+t)}};this.addShellModelForApplications=function(t,a){var n=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(n.indexOf(t)>-1){this.genericAddItems(t,a)}else{e.error("Not a valid attribute:"+t)}};this.setStateModelToUpdate=function(e){o=e};this.getStateModelToUpdate=function(){return o};this.model=function(){if(!i){this.create()}d={customShellState:i.customShellState,aTriggers:i.aTriggers,extendedShellStates:i.extendedShellStates,oCheckPoints:i.oCheckPoints};return d};this._updateModel=function(){if(d){d.customShellState=i.customShellState;d.aTriggers=i.aTriggers;d.extendedShellStates=i.extendedShellStates;d.oCheckPoints=i.oCheckPoints}};this.getAppRelatedElement=function(){return{customShellState:i.customShellState,aTriggers:i.aTriggers,extendedShellStates:i.extendedShellStates,oCheckPoints:i.oCheckPoints}};this.create=function(){i={extendedShellStates:{},oCheckPoints:l,aTriggers:h,customShellState:{currentState:{stateName:"app",headEndItems:[],paneContent:[],headItems:[],actions:["aboutBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],application:{},showRightFloatingContainer:undefined,headerHeading:undefined}}};o=i.customShellState;this._updateModel();return i};this.restore=function(e){if(e&&e.appRelatedElements){var t=e.appRelatedElements;i.aTriggers=t.aTriggers;i.extendedShellStates=t.extendedShellStates;i.oCheckPoints=t.oCheckPoints;i.customShellState=t.customShellState}this._updateModel();o=i.customShellState};this.store=function(e){};this.clean=function(){i=undefined};this.destroy=function(e){}}return new a},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cards/Card.controller", ["sap/ushell/components/tiles/utils","sap/ushell/components/cards/ManifestPropertyHelper","sap/ushell/resources","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/mvc/XMLView"],function(e,t,i,n,o,a){"use strict";return n.extend("sap.ushell.components.cards.Card",{onInit:function(){var e=this.getView(),n=this.getView().getViewData().chip,a=n.bag.getBag("tileProperties"),r,s;s=t.getTranslatablePropertiesFromBag(a);r=new o({data:s});e.setModel(r);e.setModel(i.i18nModel,"i18n");this._implementConfigurationUiContract(n,e);this._implementPreviewContract(n,s)},onPress:function(){var e=this.getView(),t=e.getViewData().chip,i=t.configuration.getParameterValueAsString("tileConfiguration"),n;if(t.configurationUi.isEnabled()){t.configurationUi.display()}else if(i){n=JSON.parse(i);sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{semanticObject:n.navigation_semantic_object,action:n.navigation_semantic_action},params:n.navigation_semantic_parameters_as_object})})}},_implementPreviewContract:function(e,t){if(e.preview){e.preview.setPreviewTitle(t.display_title_text);if(e.preview.setPreviewSubtitle&&typeof e.preview.setPreviewSubtitle==="function"){e.preview.setPreviewSubtitle(t.display_subtitle_text)}}},_implementConfigurationUiContract:function(t,i){if(t.configurationUi&&t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var e=this._getConfigurationUi(t);e.setModel(i.getModel(),"tileModel");return e}.bind(this));i.getContent()[0].setTooltip(e.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"))}},_getConfigurationUi:function(e){var t=new a({viewName:"sap.ushell.components.cards.Configuration",viewData:{chipInstance:e}});return t}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cards/Configuration.controller", ["sap/ushell/components/cards/ManifestPropertyHelper","sap/ushell/resources","sap/ui/core/mvc/Controller","sap/base/strings/formatMessage","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/Core","sap/ui/core/Configuration"],function(e,t,a,i,r,jQuery,n,o,s){"use strict";return a.extend("sap.ushell.components.cards.Configuration",{formatter:i,onInit:function(){var e=this.getView(),a=e.getViewData(),i=a.chipInstance,n,o=i.configuration.getParameterValueAsString("cardManifest"),s;if(o){s=this._prepareManifest(o,i)}n=new r({data:{editorValue:JSON.stringify(s,null,4)||""},config:{originalLanguage:"",sapLogonLanguage:"",displayOriginalLanguageWarning:false,manifestEditorEditable:true}});e.setModel(n);e.setModel(t.i18nModel,"i18n");e.setViewName("sap.ushell.components.cards.Configuration");i.configurationUi.attachSave(this.onSaveConfiguration.bind(this));this._checkOriginalLanguage()},onSaveConfiguration:function(){var a=new jQuery.Deferred,i=this.getView().getModel(),r=i.getProperty("/data/editorValue"),n,o;try{n=JSON.parse(r)}catch(e){this._logErrorAndReject({error:t.i18n.getText("configuration.invalidJSONProvided")},a);return a}o=e.extractCardData(n);this._saveManifestAndTileConfig(o.manifest,o.tileConfiguration).then(this._saveTilePropertiesBag.bind(this,o)).then(this._saveTitle.bind(this,o.bagProperties.display_title_text)).then(this._updateTileModel.bind(this,o)).then(a.resolve).catch(function(e){this._logErrorAndReject(e,a)}.bind(this));return a.promise()},_saveManifestAndTileConfig:function(e,t){var a=this.getView().getViewData().chipInstance;var i=new Promise(function(i,r){a.writeConfiguration.setParameterValues({cardManifest:JSON.stringify(e),tileConfiguration:t},i,function(e,t){r({error:e,errorInfo:t})})});return i},_saveTilePropertiesBag:function(e){var t=this.getView().getViewData().chipInstance;var a=t.bag.getBag("tileProperties");this._fillCardBag(e,a);var i=new Promise(function(e,t){a.save(e,function(e,a){t({error:e,errorInfo:a})})});return i},_saveTitle:function(e){var t=this.getView().getViewData().chipInstance;var a=new Promise(function(a,i){if(t.title){t.title.setTitle(e,a,function(e,t){i({error:e,errorInfo:t})})}else{a()}});return a},_updateTileModel:function(e){var t=this.getView().getModel("tileModel");t.setProperty("/data/display_title_text",e.bagProperties.display_title_text);t.setProperty("/data/display_subtitle_text",e.bagProperties.display_subtitle_text)},_logErrorAndReject:function(e,t){n.error(e.error,null,"card.Configuration.controller");t.reject(e.error,e.errorInfo)},_fillCardBag:function(e,t){Object.keys(e.bagProperties).forEach(function(a){if(e.bagProperties[a]){t.setText(a,e.bagProperties[a])}else{t.resetProperty(a)}})},_prepareManifest:function(t,a){var i=JSON.parse(t),r=e.getCardData(a);return e.mergeCardData(i,r)},_checkOriginalLanguage:function(){var e,t;if(!this._isOriginalLanguage()){e=this.getView().getModel();t=this._getLanguages();e.setProperty("/config/originalLanguage",t.originalLanguage.toUpperCase());e.setProperty("/config/sapLogonLanguage",t.logonLanguage.toUpperCase());e.setProperty("/config/displayOriginalLanguageWarning",true);e.setProperty("/config/manifestEditorEditable",false)}},_isOriginalLanguage:function(){var e=this._getLanguages(),t=e.originalLanguage.toLowerCase(),a=e.logonLanguage.toLowerCase(),i=e.ui5CoreLanguage.toLowerCase();return t===""||t===a||t===i},_getLanguages:function(){var e=this.oView.getViewData().chipInstance;return{originalLanguage:e.bag.getOriginalLanguage(),logonLanguage:o.getConfiguration().getLocale().getSAPLogonLanguage(),ui5CoreLanguage:s.getLanguage()}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cards/ManifestPropertyHelper", ["sap/base/util/ObjectPath","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(t,e,a){"use strict";var i={PLACEHOLDERS:{TITLE:"<title>",SUBTITLE:"<subtitle>",ICON:"<icon>",SEARCH_KEYWORDS:"<keywords>",SEMANTIC_OBJECT:"<semantic object>",ACTION:"<action>",PARAMETERS:"<parameters>",TARGET_URL:"<target URL>"},extractCardData:function(a){var i=this._getNavigationAction(a),r,s,n,c,o,g,p,_=t.get(["sap.app","tags","keywords"],a),l;if(i){c=t.get(["parameters","intentSemanticObject"],i);o=t.get(["parameters","intentAction"],i);g=t.get(["parameters","url"],i);s=t.get(["parameters","intentParameters"],i)}if(s){n=e.urlParametersToString(s)}if(g){p=false}else if(c&&o){p=true;g="#"+c+"-"+o;if(n){g+="?"+n}}r=JSON.stringify({display_icon_url:t.get(["sap.card","header","icon","src"],a),navigation_semantic_object:c,navigation_semantic_action:o,navigation_semantic_parameters:n,navigation_use_semantic_object:p,navigation_target_url:g});if(r==="{}"){r=undefined}if(_){l=_.join(",")}return{bagProperties:{display_title_text:t.get(["sap.card","header","title"],a),display_subtitle_text:t.get(["sap.card","header","subTitle"],a),display_search_keywords:l},tileConfiguration:r,manifest:this._replaceDataWithPlaceholders(a)}},mergeCardData:function(e,a){var i=JSON.parse(JSON.stringify(e)),r=this._getNavigationAction(i),s;if(a.display_title_text){t.set(["sap.card","header","title"],a.display_title_text,i)}if(a.display_subtitle_text){t.set(["sap.card","header","subTitle"],a.display_subtitle_text,i)}if(a.display_search_keywords){s=a.display_search_keywords.split(",");t.set(["sap.app","tags","keywords"],s,i)}if(a.display_icon_url){t.set(["sap.card","header","icon","src"],a.display_icon_url,i)}if(a.navigation_semantic_object){t.set(["parameters","intentSemanticObject"],a.navigation_semantic_object,r)}else if(a.navigation_target_url){t.set(["parameters","url"],a.navigation_target_url,r)}if(a.navigation_semantic_action){t.set(["parameters","intentAction"],a.navigation_semantic_action,r)}if(a.navigation_semantic_parameters_as_object){t.set(["parameters","intentParameters"],a.navigation_semantic_parameters_as_object,r)}return i},getTranslatablePropertiesFromBag:function(t){var e={},a;if(t&&t.getText&&t.getTextNames){a=t.getTextNames();a.forEach(function(a){e[a]=t.getText(a)})}return e},getCardData:function(t){var e,a,i,r;if(t.bag){e=t.bag.getBag("tileProperties")}else{e=t.getBag("tileProperties")}if(t.configuration){i=t.configuration.getParameterValueAsString("tileConfiguration")}else{i=t.getConfigurationParameter("tileConfiguration")}a=this.getTranslatablePropertiesFromBag(e);r=JSON.parse(i||"{}");if(r.navigation_semantic_parameters){r.navigation_semantic_parameters_as_object=this._parseParameters(r.navigation_semantic_parameters)}Object.keys(a).forEach(function(t){r[t]=a[t]});return r},_parseParameters:function(t){var e=a.parseParameters("?"+t);Object.keys(e).forEach(function(t){e[t]=e[t][0]});return e},_replaceDataWithPlaceholders:function(e){var a=JSON.parse(JSON.stringify(e)),i=this._getNavigationAction(a);if(t.get(["sap.card","header","title"],a)){t.set(["sap.card","header","title"],this.PLACEHOLDERS.TITLE,a)}if(t.get(["sap.card","header","subTitle"],a)){t.set(["sap.card","header","subTitle"],this.PLACEHOLDERS.SUBTITLE,a)}if(t.get(["sap.app","tags","keywords"],a)){t.set(["sap.app","tags","keywords"],this.PLACEHOLDERS.SEARCH_KEYWORDS,a)}if(t.get(["sap.card","header","icon","src"],a)){t.set(["sap.card","header","icon","src"],this.PLACEHOLDERS.ICON,a)}if(t.get(["parameters","intentSemanticObject"],i)){t.set(["parameters","intentSemanticObject"],this.PLACEHOLDERS.SEMANTIC_OBJECT,i)}if(t.get(["parameters","intentAction"],i)){t.set(["parameters","intentAction"],this.PLACEHOLDERS.ACTION,i)}if(t.get(["parameters","url"],i)){t.set(["parameters","url"],this.PLACEHOLDERS.TARGET_URL,i)}if(t.get(["parameters","intentParameters"],i)){t.set(["parameters","intentParameters"],this.PLACEHOLDERS.PARAMETERS,i)}return a},_getNavigationAction:function(e){var a=t.get(["sap.card","header","actions"],e),i;if(a){for(var r=0;r<a.length;r++){i=a[r];if(i.type==="Navigation"){return i}}}return null}};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/Component", ["sap/ui/core/UIComponent","sap/ushell/components/cepsearchresult/app/util/appendStyleVars","./util/Edition"],function(e,a){"use strict";a(["_sap_m_IconTabBar_ShellHeaderShadow","sapUiElementLineHeight","_sap_m_IconTabBar_HeaderBorderBottom","_sap_m_IconTabBar_HeaderBackground"]);return e.extend("sap.ushell.components.cepsearchresult.app.Component",{metadata:{manifest:"json"}})});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/Main.controller", ["sap/ui/core/mvc/Controller","sap/ui/core/Core","sap/ui/model/json/JSONModel","./util/Edition","sap/m/library","sap/m/Menu","sap/m/MenuItem","sap/ushell/ui/footerbar/AddBookmarkButton","sap/f/GridContainerItemLayoutData"],function(e,t,i,a,s,o,n,r,h){"use strict";var l=s.URLHelper;return e.extend("sap.ushell.components.cepsearchresult.app.Main",{totalCounts:{},onInit:function(){this._sSearchTerm="";this._iTotalCount=0;this._oTabBar=this.byId("searchCategoriesTabs");this._oResourceModel=this.getView().getModel("appI18n");this._oCountModel=new i(this.totalCounts);this._oTabBar.setModel(this._oCountModel,"counts");this.updateTitles();this.applyPersonalization();this.getView().setVisible(false);this.changeEdition(a.getEditionName());if(sap.ushell.Container){var e=sap.ushell.Container.getRenderer();e.getRouter().getRoute("wzsearch").attachMatched(this.onRouteMatched.bind(this))}},onRouteMatched:function(e){var t=e.getParameter("arguments"),i=t["?query"],a=i&&i.searchTerm,s=i&&i.category;this._oEdition.loaded().then(function(){if(a!==this.getSearchTerm()&&s===this.getCategory()){this.changeSearchTerm(a)}else if(s!==this.getCategory()){if(a!==this.getSearchTerm()){this._sSearchTerm=a}this.changeCategory(s)}this.getView().setVisible(true)}.bind(this))},changeEdition:function(e){if(e===this._sEditionName){return Promise.resolve()}this._sEditionName=e;this._oEdition=new a(this._sEditionName);return this._oEdition.loaded().then(function(){var e=this._oEdition.getDefaultCategory();this._sCategory=e.getKey();this.updateTabs();this.updateCategories(true);this.getView().setVisible(true)}.bind(this))},changeCategory:function(e){this._sCategory=e;this.updateTabs()},changeSearchTerm:function(e){this._sSearchTerm=e;this.updateCategories(true)},getEditionName:function(){return this._sEditionName},getSearchTerm:function(){return this._sSearchTerm},getCategory:function(){return this._sCategory},applyPersonalization:function(){},getPersonalization:function(e,t){var i;if(sap.ushell.Container){i=localStorage.getItem("sap.ushell.components.cepsearchresult.app-"+e);return Promise.resolve(i!==undefined?i:t)}i=localStorage.getItem("sap.ushell.components.cepsearchresult.app-"+e);return Promise.resolve(i!==undefined?i:t)},setPersonalization:function(e,t){if(sap.ushell.Container){localStorage.setItem("sap.ushell.components.cepsearchresult.app-"+e,t+"")}localStorage.setItem("sap.ushell.components.cepsearchresult.app-"+e,t+"")},updateTabs:function(){var e=this._oTabBar;e.removeAllItems();this._oEdition.getAppMenuItems().map(function(t){e.addItem(t)});e.setModel(this._oEdition.getResourceModel(),"i18n");e.setSelectedKey(this.getCategory());e.setVisible(e.getItems().length>2);this.totalCounts={};this._oCountModel.setData(this.totalCounts);this.updateTitles()},updateCategories:function(e){var t=this._oTabBar,i=t.getSelectedKey();t.getItems().map(function(t){var a=t.getKey(),s=t._getCategoryInstance();if(e){this.detachCategory(s);s.resetData()}if(a===i){this.showCategory(s)}s.setVisible(a===i);this.updateResult(s)}.bind(this))},tabSelectionChange:function(e){this.updateCategories(false)},showCategory:function(e){var t=this.byId("contentCell");t.removeAllWidgets();e.setLayoutData(new h({columns:16,minRows:2}));t.addWidget(e)},updateTitles:function(){var e=0;for(var t in this.totalCounts){if(t!=="all"){e+=this.totalCounts[t]}}this.totalCounts.all=e;this.updateAppTitle(e);this._oCountModel.checkUpdate(true,true)},updateAppTitle:function(e){var t=this.byId("titleText");if(!t){return}var i="...",a=this._oResourceModel.getResourceBundle();if(Number.isInteger(e)){i="("+e+")"}t.setText(a.getText("SEARCHRESULTAPP.HeaderTitle",[this.getSearchTerm()||"",i]))},updateResult:function(e){this.attachCategory(e);e.search(this.getSearchTerm())},attachCategory:function(e){if(!e._attached){e.attachAfterSearch(this.handleAfterSearch,this);e.attachViewAll(this.handleViewAll,this);e._attached=true}},detachCategory:function(e){if(e._attached){e.detachAfterSearch(this.handleAfterSearch,this);e.detachViewAll(this.handleViewAll,this);e._attached=false}},viewAll:function(e,t){this._oTabBar.setSelectedKey(e);var i=this._oTabBar;i.getItems().map(function(i){if(i.getKey()===e){i._getCategoryInstance().setCurrentView(t)}});this.updateCategories()},handleAfterSearch:function(e){this._oCountModel.setProperty("/"+e.getParameter("category"),e.getParameter("count"));this.updateTitles()},handleViewAll:function(e){this.viewAll(e.getParameter("key"),e.getParameter("currentView"))},onAfterRendering:function(){this.adaptScrollArea()},adaptScrollArea:function(){if(this.getView().getDomRef()){var e=this.getView().getDomRef().querySelector(".sapUiCEPSRAppScroll");e.style.height="calc( 100% - "+e.offsetTop+"px )"}},openTitleMenu:function(e){if(!this._oTitleMenu){this._oTitleMenu=new o({items:[new n({text:"{appI18n>SEARCHRESULTAPP.TitleMenu.SaveAsTile}",icon:"sap-icon://header",press:this.triggerBookmark.bind(this),visible:false}),new n({text:"{appI18n>SEARCHRESULTAPP.TitleMenu.Email}",icon:"sap-icon://email",press:this.triggerEmail.bind(this)})]});this._oTitleMenu.setModel(this._oResourceModel,"appI18n")}this._oTitleMenu.openBy(e.getSource())},triggerBookmark:function(){var e=this._oResourceModel.getResourceBundle(),t=this.getSearchTerm(),i=new r({title:e.getText("SEARCHRESULTAPP.Bookmark.Title",[t]),subtitle:"",tileIcon:"sap-icon://search",keywords:"search,result,"+t,showGroupSelection:false,customUrl:document.location.hash});i.firePress()},triggerEmail:function(){var e=this._oResourceModel.getResourceBundle();l.triggerEmail("",e.getText("SEARCHRESULTAPP.EMail.Subject",[this.getSearchTerm()]),document.location.href)},onExit:function(){var e=this._oTabBar;e.getItems().map(function(e){var t=e._getCategoryInstance();this.detachCategory(t);t.resetData()}.bind(this))}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/cards/searchresultwidget/Component", ["sap/ui/core/UIComponent","sap/m/FlexBox","sap/f/cards/Header"],function(e,t){"use strict";var r=e.extend("sap.ushell.components.cepsearchresult.cards.searchresultwidget.Component",{onCardReady:function(e){this._oCard=e;this._oCard.addStyleClass("sapCEPSearchResultCard");this._mCardParameters=e.getCombinedParameters();this._oResourceBundle=this.getModel("i18n").getResourceBundle();if(this._bContent){this.addContent()}},createContent:function(){if(this.getAggregation("rootControl")){return this.getAggregation("rootControl")}var e=new t({width:"100%",direction:"Column"});this._bContent=true;if(this._oCard){this.addContent()}return e},editionLoaded:function(){return new Promise(function(e){sap.ui.require(["sap/ushell/components/cepsearchresult/app/util/Edition"],function(t){this._oEdition=new t(t.getEditionName());e(this._oEdition.loaded())}.bind(this))}.bind(this))},search:function(e){this._oCategory.search(e)},addContent:function(){this.editionLoaded().then(function(){this._oCategory=this.createCategory();this.addCategory(this.getRootControl());this.updateCardHeader();this._oCard.getModel("parameters").setProperty("/init/value",true)}.bind(this))},addCategory:function(e){e.addItem(this._oCategory);this.search(this._mCardParameters.searchTerm)},createCategory:function(){var e=this._mCardParameters;var t=this._oEdition.createCategoryInstance(e.category,{pageSize:e.pageSize,showFooter:e.footer!=="none",showHeader:false,initialPlaceholder:true,allowViewSwitch:e.allowViewSwitch,highlightResult:e.highlightResult,currentView:e.view||"categoryDefault",useIllustrations:true,beforeSearch:function(e){this.updateCardHeader(e.getParameters());this._oCard.fireEvent("beforeSearch",e.getParameters())}.bind(this),afterSearch:function(e){this.updateCardHeader(e.getParameters());this._oCard.fireEvent("afterSearch",e.getParameters())}.bind(this),afterRendering:function(e){this._oCard.fireEvent("afterRendering",e.getParameters());if(this._mCardParameters.header!=="none"){t.getDomRef().style.borderTop="1px solid var(--sapUiListBorderColor)"}}.bind(this)});t.setFooter(e.footer);return t},updateCardHeader:function(e){var t=this._oCard.getCardHeader(),r=this._oCategory,a,o;if(this._mCardParameters.header==="default"){t.setIconVisible(!!r.getDefaultIcon()).setIconDisplayShape(r._oCategoryConfig.icon.shape).setIconBackgroundColor(r._oCategoryConfig.icon.backgroundColor).setIconSrc(r.getDefaultIcon());a=r.translate("Card.Title");o=this._oResourceBundle.getText("CARD.List.Title.SearchResults",["'"+this._mCardParameters.searchTerm+"'"])}else{t.setIconVisible(!!this._oCard.getManifestEntry("/sap.card/header/icon/src")).setIconDisplayShape(this._oCard.getManifestEntry("/sap.card/header/icon/shape")).setIconBackgroundColor(this._oCard.getManifestEntry("/sap.card/header/icon/backgroundColor")).setIconSrc(this._oCard.getManifestEntry("/sap.card/header/icon/src"));a=this._oCard.getManifestEntry("/sap.card/header/title");o=this._oCard.getManifestEntry("/sap.card/header/subtitle");a=a.replace("($searchText)",this._mCardParameters.searchTerm);o=o.replace("($searchText)",this._mCardParameters.searchTerm)}if(!e||!Number.isInteger(e.count)){if(this._mCardParameters.header==="custom"){a=a.replace("($count)","--");o=o.replace("($count)","--")}t.setStatusText("")}else if(Number.isInteger(e.count)){var i=this._oResourceBundle.getText("CARD.List.RowStatus",[Math.min(e.skip+1,e.count),Math.min(e.skip+e.top,e.count),e.count]);t.setStatusText(e.count>0?i:"");if(this._mCardParameters.header==="default"){a=a+" (($count))"}a=a.replace("($count)",e.count);o=o.replace("($count)",e.count)}t.setTitle(a);t.setSubtitle(o)}});return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/cards/searchresultwidget/Config", ["sap/ui/integration/Designtime"],function(e){"use strict";return function(){var t=new e({form:{items:{groupheader1:{label:"{i18n>CARD.Config.HeaderSettings}",type:"group",expanded:false},header:{manifestpath:"/sap.card/configuration/parameters/header/value",type:"string",label:"{i18n>CARD.Config.HeaderType.Lbl}",control:"Select",cols:2,values:{data:{json:{values:[{text:"{i18n>CARD.Config.HeaderType.Default}",key:"default"},{text:"{i18n>CARD.Config.HeaderType.Custom}",key:"custom"},{text:"{i18n>CARD.Config.HeaderType.None}",key:"none"}]},path:"/values"},item:{text:"{text}",key:"{key}"}}},title:{manifestpath:"/sap.card/header/title",type:"string",label:"{i18n>CARD.Config.Header.Title.Lbl}",description:"{i18n>CARD.Config.Header.Title.Desc}",translatable:true,visible:"{= ${items>header/value} === 'custom'}",cols:2},subtitle:{manifestpath:"/sap.card/header/subtitle",type:"string",label:"{i18n>CARD.Config.Header.SubTitle.Lbl}",description:"{i18n>CARD.Config.Header.SubTitle.Desc}",translatable:true,visible:"{= ${items>header/value} === 'custom'}",cols:2},icon:{manifestpath:"/sap.card/header/icon/src",type:"string",label:"{i18n>CARD.Config.Header.Icon.Lbl}",cols:2,allowDynamicValues:false,allowSettings:false,visible:"{= ${items>header/value} === 'custom'}",visualization:{type:"IconSelect",settings:{value:"{currentSettings>value}",editable:"{currentSettings>editable}"}}},color:{manifestpath:"/sap.card/header/icon/backgroundColor",type:"string",label:"{i18n>CARD.Config.Header.IconColor.Lbl}",visible:"{= ${items>header/value} === 'custom'}",visualization:{type:"ColorSelect",settings:{enumValue:"{currentSettings>value}",editable:"{currentSettings>editable}"}},cols:1},shape:{manifestpath:"/sap.card/header/icon/shape",type:"string",label:"{i18n>CARD.Config.Header.IconShape.Lbl}",visible:"{= ${items>header/value} === 'custom'}",visualization:{type:"ShapeSelect",settings:{value:"{currentSettings>value}",editable:"{currentSettings>editable}"}},cols:1},headerNavigation:{manifestpath:"/sap.card/configuration/parameters/headerNavigation/value",type:"boolean",label:"{i18n>CARD.Config.Header.Nav.Lbl}",description:"{i18n>CARD.Config.Header.Nav.Desc}",visible:"{= ${items>header/value} === 'custom'}",cols:2,visualization:{type:"Switch",settings:{state:"{currentSettings>value}",customTextOn:"{i18n>CARD.Config.Yes}",customTextOff:"{i18n>CARD.Config.No}",enabled:"{currentSettings>editable}"}}},groupheader2:{label:"Content Settings",type:"group"},searchTerm:{manifestpath:"/sap.card/configuration/parameters/searchTerm/value",type:"string",label:"{i18n>CARD.Config.Content.SearchTerm.Lbl}",translatable:false,cols:2,allowDynamicValues:true},category:{manifestpath:"/sap.card/configuration/parameters/category/value",type:"string",label:"{i18n>CARD.Config.Content.Category.Lbl}",values:{data:{extension:{method:"getCategoryListItems"},path:"/"},item:{text:"{text}",key:"{key}",icon:"{icon}"}}},view:{manifestpath:"/sap.card/configuration/parameters/view/value",type:"string",label:"{i18n>CARD.Config.Content.View.Lbl}",cols:2,values:{data:{extension:{method:"getCategoryViews",args:["{items>category/value}"]},path:"/views"},item:{text:"{text}",key:"{key}",icon:"{icon}"}}},pageSize:{manifestpath:"/sap.card/configuration/parameters/pageSize/value",type:"integer",label:"{i18n>CARD.Config.Content.PageSize.Lbl}",cols:2,visualization:{type:"Slider",settings:{value:"{currentSettings>value}",min:0,max:20,width:"100%",showAdvancedTooltip:true,showHandleTooltip:false,inputsAsTooltips:true,enabled:"{currentSettings>editable}"}}},highlightResult:{manifestpath:"/sap.card/configuration/parameters/highlightResult/value",type:"boolean",label:"{i18n>CARD.Config.Content.Highlight.Lbl}",description:"{i18n>CARD.Config.Content.Highlight.Desc}",cols:1,visualization:{type:"Switch",settings:{state:"{currentSettings>value}",customTextOn:"{i18n>CARD.Config.Yes}",customTextOff:"{i18n>CARD.Config.No}",enabled:"{currentSettings>editable}"}}},footer:{manifestpath:"/sap.card/configuration/parameters/footer/value",type:"string",label:"{i18n>CARD.Config.Content.FooterActions.Lbl}",control:"Select",cols:2,values:{data:{json:{values:[{text:"{i18n>CARD.Config.Content.FooterActions.Page}",key:"paginator"},{text:"{i18n>CARD.Config.Content.FooterActions.Navigate}",key:"viewAll"},{text:"{i18n>CARD.Config.Content.FooterActions.None}",key:"none"}]},path:"/values"},item:{text:"{text}",key:"{key}",additionalText:"{additionalText}",icon:"{icon}"}}}}},preview:{modes:"Live"}});return t}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/cards/searchresultwidget/Extension", ["sap/ui/integration/Extension"],function(t){"use strict";var e=t.extend("sap.ushell.components.cepsearchresult.cards.searchresultwidget.Extension");e.prototype.onCardReady=function(){this._oCard=this.getCard()};e.prototype.editionLoaded=function(){this.oCard=this.getCard();return new Promise(function(t){sap.ui.require(["sap/ushell/components/cepsearchresult/app/util/Edition"],function(e){this._oEdition=new e(e.getEditionName());this._oEdition.loaded().then(function(){t()})}.bind(this))}.bind(this))};e.prototype.getCategoryListItems=function(){return this.editionLoaded().then(function(){return this._oEdition.getCategoryListItems()}.bind(this))};e.prototype.getCategoryViews=function(t){return this.editionLoaded().then(function(){return this._oEdition.getCategoryViews(t)}.bind(this))};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/AdvancedFormatters", ["sap/ui/core/theming/Parameters","sap/ui/core/Core"],function(a,e){"use strict";var t={};function r(){t=a.get({name:["sapUiAccent2","sapUiAccentBackgroundColor2","sapUiAccent10","sapUiAccentBackgroundColor10","sapUiFontFamily"]})}e.attachThemeChanged(r);r();var s=['<svg xmlns="http://www.w3.org/2000/svg" aria-label="Calendar" role="img" viewBox="0 0 100 100">','<rect width="100" height="39" fill="{mParams.sapUiAccent2}"/>','<rect y="39" width="100" height="61" fill="{mParams.sapUiAccentBackgroundColor10}"/>','<text x="50%" y="29" style=\'fill:{mParams.sapUiAccentBackgroundColor2};font-size:23px;opacity:0.8;font-family:{mParams.sapUiFontFamily};text-anchor: middle\'>{sMonth}</text>','<text id="day" x="50%" y="84"'," style='stroke-width:1;stroke:{mParams.sapUiAccentBackgroundColor10};"," fill: {mParams.sapUiAccent10}; font-size: 45px; font-weight: bold; font-family:{mParams.sapUiFontFamily};text-anchor: middle'>{sDay}</text>",'<text id="weekday" x="20" y="70" style=\'display:none;fill:{mParams.sapUiAccent10};font-size:20px;font-family:{mParams.sapUiFontFamily};text-anchor: middle\'>{sWeekday}</text>',"</svg >"].join("");function i(a,e,r,i){var c=s.replace("{sMonth}",e.substring(0,3)).replace("{sDay}",r).replace("{sWeekday}",a.substring(0,2)).replace(/\{mParams.sapUiAccentBackgroundColor2\}/g,t.sapUiAccentBackgroundColor2).replace(/\{mParams.sapUiAccentBackgroundColor10\}/g,t.sapUiAccentBackgroundColor10).replace(/\{mParams.sapUiAccent2\}/g,t.sapUiAccent2).replace(/\{mParams.sapUiAccent10\}/g,t.sapUiAccent10).replace(/\{mParams.sapUiFontFamily\}/g,t.sapUiFontFamily);return"data:image/svg+xml;base64,"+btoa(c)}var c={event:{Past:"10",Birthday:"7",Workshop:"6",Team:"3",Customer:"5"}};function n(a,e){if(Array.isArray(a)&&e){var t=[];a.forEach(function(a,r){t.push({text:a,accent:c[e]?c[e][a]:"10"})});return t}}return{svg:{calendar:i},map:{tagEventAccents:n}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/Edition", ["sap/ui/model/resource/ResourceModel","sap/m/IconTabFilter","./controls/Category"],function(t,e,n){"use strict";var i=new t({bundleName:"sap.ushell.components.cepsearchresult.app.util.i18n.i18n"});var r={standard:null,advanced:null};var o=function(t){this._sEdition=t;this._mCategories={};if(!r[t]){r[t]=new Promise(function(e,n){var i=t.charAt(0).toUpperCase()+t.slice(1);sap.ui.require(["sap/ushell/components/cepsearchresult/app/util/Edition"+i],function(t){e(t)},function(){n()})})}this._loaded=r[t].then(function(t){this._oConfig=t;this._oConfig.categories.map(function(t){this._mCategories[t.name]=Object.assign({},t)}.bind(this))}.bind(this))};o.prototype.loaded=function(){return this._loaded};o.prototype.getConfiguration=function(){return this._oConfig};o.prototype.getResourceModel=function(){return i};o.prototype.getCategoryList=function(){return this._oConfig.categories};o.prototype.createCategoryInstance=function(t,e){var i=this._mCategories[t];if(!i.class){i.class=n}return new i.class(i,this,e)};o.prototype.getCategoryInstance=function(t){var e=this._mCategories[t];if(!e){return null}if(e.instance&&!e.instance.isDestroyed()){return e.instance}e.instance=this.createCategoryInstance(t);return e.instance};o.prototype.getDefaultCategory=function(){var t=this._oConfig.defaultCategory||"all";return this.getCategoryInstance(t)};o.prototype.getAppMenuItems=function(){var t=[];if(this._mCategories.all){var e=this.createMenuItem(this._mCategories.all);if(e){t.push(e)}var n=this.getSubMenuItems(this._mCategories.all);if(n.length===1){return n}return t.concat(this.getSubMenuItems(this._mCategories.all))}return[]};o.prototype.getSubMenuItems=function(t){var e=[];if(t&&t.subCategories){t.subCategories.map(function(t){this.addMenuItem(this._mCategories[t.name],e)}.bind(this))}return e};o.prototype.addMenuItem=function(t,e){var n=this.createMenuItem(t);if(n){e.push(n)}};o.prototype.createMenuItem=function(t){if(t){var n=[];if(t.name!=="all"){n=this.getSubMenuItems(t)}var i=new e({key:t.name,text:t.shortTitle,icon:t.icon.src,count:"{counts>/"+t.name+"}",tooltip:t.title,items:n});i._getCategoryInstance=function(){return this.getCategoryInstance(t.name)}.bind(this);return i}return null};o.getEditionName=function(){if(window["sap-ushell-config"]&&window["sap-ushell-config"].ushell&&window["sap-ushell-config"].ushell.cepSearchConfig){return window["sap-ushell-config"].ushell.cepSearchConfig||"standard"}return"standard"};o.prototype.translate=function(t){var e=this.getResourceModel().getResourceBundle();try{return e.getText(t)}catch(e){return t}};o.prototype.getCategoryListItems=function(){var t=this.getCategoryList(),e=[];t.forEach(function(t){if(t.name==="all"){return}e.push({key:t.name,icon:t.icon.src,text:this.translate(t.title.substring(6,t.title.length-1))})}.bind(this));return e};o.prototype.getCategoryViews=function(t){var e=typeof t==="string"?this.createCategoryInstance(t):t,n=e.getViewSettings();n.views.sort(function(t,e){if(t.key===n.default){return-1}return t.key>e}).forEach(function(t){var e=t.key.charAt(0).toUpperCase()+t.key.slice(1);t.text=this.translate("CATEGORY.Views."+e+"ButtonText")}.bind(this));return n};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/EditionAdvanced", ["./controls/categories/All","./controls/categories/Application","./controls/categories/Workpage","./controls/categories/People","./controls/categories/Event"],function(e,t,i,a,n){"use strict";return{defaultCategory:"all",categories:[{class:e,name:"all",translation:"CATEGORIES.All",title:"{i18n>CATEGORIES.All.Title}",shortTitle:"{i18n>CATEGORIES.All.ShortTitle}",icon:{src:"sap-icon://search",backgroundColor:"Accent9",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.All.Card.Title}",subTitle:"{i18n>CATEGORIES.All.Card.SubTitle}"},showSubCategories:false,subCategories:[{name:"app",pageSize:7},{name:"workpage",pageSize:5},{name:"workspace",pageSize:5},{name:"content",pageSize:5},{name:"people",pageSize:5},{name:"event",pageSize:5},{name:"knowledgeBase",pageSize:5},{name:"forum",pageSize:5},{name:"task",pageSize:5},{name:"tag",pageSize:5},{name:"comment",pageSize:5},{name:"businessrecord",pageSize:10}],noDataText:"{i18n>CATEGORIES.All.NoData}",loadingDataText:"{i18n>CATEGORIES.All.LoadingData}"},{class:t,name:"app",translation:"CATEGORIES.App",title:"{i18n>CATEGORIES.App.Title}",shortTitle:"{i18n>CATEGORIES.App.ShortTitle}",icon:{src:"sap-icon://header",backgroundColor:"Accent9",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.App.Card.Title}",subTitle:"{i18n>CATEGORIES.App.Card.SubTitle}"}},{class:i,name:"workpage",translation:"CATEGORIES.WorkPage",title:"{i18n>CATEGORIES.WorkPage.Title}",shortTitle:"{i18n>CATEGORIES.WorkPage.ShortTitle}",icon:{src:"sap-icon://document-text",backgroundColor:"Accent1",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.WorkPage.Card.Title}",subTitle:"{i18n>CATEGORIES.WorkPage.Card.SubTitle}"}},{name:"workspace",title:"{i18n>CATEGORIES.WorkSpace.Title}",translation:"CATEGORIES.WorkSpace",shortTitle:"{i18n>CATEGORIES.WorkSpace.ShortTitle}",icon:{src:"sap-icon://meeting-room",backgroundColor:"Accent2",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.WorkSpace.Card.Title}",subTitle:"{i18n>CATEGORIES.WorkSpace.Card.SubTitle}"}},{name:"content",translation:"CATEGORIES.Content",title:"{i18n>CATEGORIES.Content.Title}",shortTitle:"{i18n>CATEGORIES.Content.ShortTitle}",icon:{src:"sap-icon://document",backgroundColor:"Accent7",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.Content.Card.Title}",subTitle:"{i18n>CATEGORIES.Content.Card.SubTitle}"},subCategories:[{name:"document",pageSize:10},{name:"video",pageSize:10}]},{name:"people",class:a,translation:"CATEGORIES.People",title:"{i18n>CATEGORIES.People.Title}",shortTitle:"{i18n>CATEGORIES.People.ShortTitle}",icon:{src:"sap-icon://person-placeholder",backgroundColor:"Accent8",shape:"Circle",size:"S"},card:{title:"{i18n>CATEGORIES.People.Card.Title}",subTitle:"{i18n>CATEGORIES.People.Card.SubTitle}"}},{name:"event",class:n,translation:"CATEGORIES.Event",title:"{i18n>CATEGORIES.Event.Title}",shortTitle:"{i18n>CATEGORIES.Event.ShortTitle}",icon:{src:"sap-icon://calendar",backgroundColor:"Accent6",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.Event.Card.Title}",subTitle:"{i18n>CATEGORIES.Event.Card.SubTitle}"}},{name:"knowledgeBase",translation:"CATEGORIES.KnowledgeBase",title:"{i18n>CATEGORIES.KnowledgeBase.Title}",shortTitle:"{i18n>CATEGORIES.KnowledgeBase.ShortTitle}",icon:{src:"sap-icon://study-leave",backgroundColor:"Accent5",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.KnowledgeBase.Card.Title}",subTitle:"{i18n>CATEGORIES.KnowledgeBase.Card.SubTitle}"}},{name:"forum",translation:"CATEGORIES.Forum",title:"{i18n>CATEGORIES.Forum.Title}",shortTitle:"{i18n>CATEGORIES.Forum.ShortTitle}",icon:{src:"sap-icon://discussion-2",backgroundColor:"Accent4",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.Forum.Card.Title}",subTitle:"{i18n>CATEGORIES.Forum.Card.SubTitle}"}},{name:"task",translation:"CATEGORIES.Task",title:"{i18n>CATEGORIES.Task.Title}",shortTitle:"{i18n>CATEGORIES.Task.ShortTitle}",icon:{src:"sap-icon://checklist",backgroundColor:"Accent3",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.Task.Card.Title}",subTitle:"{i18n>CATEGORIES.Task.Card.SubTitle}"}},{name:"tag",translation:"CATEGORIES.Tag",title:"{i18n>CATEGORIES.Tag.Title}",shortTitle:"{i18n>CATEGORIES.Tag.ShortTitle}",icon:{src:"sap-icon://blank-tag-2",backgroundColor:"Accent6",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.Tag.Card.Title}",subTitle:"{i18n>CATEGORIES.Tag.Card.SubTitle}"}},{name:"comment",translation:"CATEGORIES.Comment",title:"{i18n>CATEGORIES.Comment.Title}",shortTitle:"{i18n>CATEGORIES.Comment.ShortTitle}",icon:{src:"sap-icon://comment",backgroundColor:"Accent1",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.Comment.Card.Title}",subTitle:"{i18n>CATEGORIES.Comment.Card.SubTitle}"}},{name:"businessrecord",translation:"CATEGORIES.BusinessRecord",title:"{i18n>CATEGORIES.BusinessRecord.Title}",shortTitle:"{i18n>CATEGORIES.BusinessRecord.ShortTitle}",icon:{src:"sap-icon://tools-opportunity",backgroundColor:"Accent10",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.BusinessRecord.Card.Title}",subTitle:"{i18n>CATEGORIES.BusinessRecord.Card.SubTitle}"}},{name:"document",translation:"CATEGORIES.Document",title:"{i18n>CATEGORIES.Document.Title}",shortTitle:"{i18n>CATEGORIES.Document.ShortTitle}",icon:{src:"sap-icon://document-text",backgroundColor:"Accent3",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.Document.Card.Title}",subTitle:"{i18n>CATEGORIES.Document.Card.SubTitle}"}},{name:"video",translation:"CATEGORIES.Video",title:"{i18n>CATEGORIES.Video.Title}",shortTitle:"{i18n>CATEGORIES.Video.ShortTitle}",icon:{src:"sap-icon://video",backgroundColor:"Accent3",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.Video.Card.Title}",subTitle:"{i18n>CATEGORIES.Video.Card.SubTitle}"}}]}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/EditionStandard", ["./controls/categories/Application","./controls/categories/All"],function(t,a){"use strict";return{defaultCategory:"app",categories:[{class:a,name:"all",translation:"CATEGORIES.All",title:"{i18n>CATEGORIES.All.Title}",shortTitle:"{i18n>CATEGORIES.All.ShortTitle}",icon:{src:"sap-icon://search",backgroundColor:"Accent9",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.All.Card.Title}",subTitle:"{i18n>CATEGORIES.All.Card.SubTitle}"},subCategories:[{name:"app",pageSize:15}],noDataText:"{i18n>CATEGORIES.All.NoData}",loadingDataText:"{i18n>CATEGORIES.All.LoadingData}"},{class:t,name:"app",translation:"CATEGORIES.App",title:"{i18n>CATEGORIES.App.Title}",shortTitle:"{i18n>CATEGORIES.App.ShortTitle}",icon:{src:"sap-icon://header",backgroundColor:"Accent9",shape:"Square",size:"S"},card:{title:"{i18n>CATEGORIES.App.Card.Title}",subTitle:"{i18n>CATEGORIES.App.Card.SubTitle}"}}]}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/appendStyleVars", ["sap/ui/core/theming/Parameters","sap/ui/core/Core"],function(e,r){"use strict";var t=[];function n(r,n){var o=e.get({name:r});if(typeof o==="string"){var i=o;o={};o[r[0]]=i}if(n){t=[]}for(var a in o){if(t.indexOf(a)===-1){t.push(a);document.body.style.setProperty("--"+a,o[a])}}}r.attachThemeChanged(function(){for(var e=0;e<t.length;e++){document.body.style.removeProperty("--"+t[e])}n(t,true)});return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/controls/Category", ["sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/m/Title","sap/m/List","sap/m/CustomListItem","sap/m/FlexBox","sap/m/Avatar","sap/m/ObjectIdentifier","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/IllustratedMessage","./Paginator","../appendStyleVars","sap/ui/dom/includeStylesheet","./Highlighter","sap/ui/core/ResizeHandler","sap/m/library"],function(t,e,i,s,o,a,r,n,h,l,u,p,g,c,d,f,_,y,m,C){"use strict";f(["sapUiShadowLevel0","sapUiElementBorderCornerRadius","sapUiMarginSmall","sapUiMarginMedium","sapUiMarginTiny","sapUiListBorderColor","sapUiListBackground","sapUiLink","sapMFontMediumSize","sapUiIndication8HoverBackground","sapUiButtonCriticalBackground","sapUiAccentBackgroundColor10","sapUiButtonNegativeActiveBackground","sapUiButtonSuccessActiveBackground","sapUiButtonNeutralBackground","sapUiTileBackground","sapUiExtraLightBG"]);_(sap.ui.require.toUrl("sap/ushell/components/cepsearchresult/app/util/controls/Category.css"));var S=C.IllustratedMessageType;n.prototype._handlePress=function(t){var e=t.target;if(this.getTitleActive()&&this.getDomRef().querySelector(".sapMObjectIdentifierTitle").contains(e)){this.fireTitlePress({domRef:e});t.setMarked()}};var w=t.extend("sap.ushell.components.cepsearchresult.app.util.controls.Category",{constructor:function(e,i,s){this._oCategoryConfig=e;this._oEdition=i;t.apply(this,[s])},metadata:{properties:{pageSize:{type:"int",defaultValue:10},showHeader:{type:"boolean",defaultValue:true},showFooter:{type:"boolean",defaultValue:true},allowViewSwitch:{type:"boolean",defaultValue:true},currentView:{type:"string",defaultValue:"categoryDefault"},highlightResult:{type:"boolean",defaultValue:true},useIllustrations:{type:"boolean",defaultValue:false},initialPlaceholder:{type:"boolean",defaultValue:false}},aggregations:{_header:{type:"sap.ui.core.Control",multiple:false},_list:{type:"sap.ui.core.Control",multiple:false},_footer:{type:"sap.ui.core.Control",multiple:false},_nodata:{type:"sap.ui.core.Control",multiple:false}},events:{itemNavigate:{},viewAll:{},beforeSearch:{},afterSearch:{},afterRendering:{}}},renderer:function(t,e){t.openStart("div",e);t.class("sapUiCEPSearchCat");t.openEnd();var i=e.getAggregation("_header"),s=e.getAggregation("_list"),o=e.getAggregation("_footer"),a=e.getAggregation("_nodata");if(i){t.renderControl(i)}if(e.getUseIllustrations()&&a&&a.getVisible()){t.renderControl(a)}else if(s){t.renderControl(s)}if(o){t.renderControl(o)}t.close("div")}});w._iDataRefreshMs=1e9;w._iCountRefreshMs=1e9;w.CustomListItem=o.extend("sap.ushell.components.cepsearchresult.app.util.controls.Category.CustomListItem",{renderer:o.getMetadata().getRenderer()});w.CustomListItem.prototype.onAfterRendering=function(){if(o.prototype.onAfterRendering){o.prototype.onAfterRendering.apply(this,arguments)}this._activeHandling(this.$())};w.CustomListItem.prototype._activeHandling=function(t){t.removeClass("sapMLIBActive");t.removeClass("sapMLIBActionable");t.removeClass("sapMLIBHoverable");t.toggleClass("sapUiCEPSearchCatLIActive",this._active);if(this.isActionable(true)){t.toggleClass("sapUiCEPSearchCatLIHoverable",!this._active)}};w.SearchResultList=s.extend("sap.ushell.components.cepsearchresult.app.util.controls.Category.SearchResultList",{renderer:s.getMetadata().getRenderer()});w.SearchResultList.prototype._getCurrentColCount=function(){if(this.getDomRef()){var t=this.getDomRef().querySelectorAll(".sapMListItems > LI"),e=1,i=t[0].offsetTop;for(var s=1;s<t.length&&t[s].offsetTop<=i;s++){e++}return e}};w.SearchResultList.prototype._startItemNavigation=function(){s.prototype._startItemNavigation.apply(this,[false]);if(this._oItemNavigation){var t=Array.from(this.getDomRef().querySelectorAll(".sapMGT"));if(t.length>0){this._oItemNavigation.setItemDomRefs(t)}}this._oItemNavigation.setTableMode(false,true).setColumns(this._getCurrentColCount())};w.prototype.init=function(){var t=this.getResourceModel();this.setModel(t,"i18n");this.setModel(new e({}),"data");this._oResourceBundle=t.getResourceBundle();this._iCurrentCount=0;this._oDirty={iDataFetchRequired:0,iCountFetchRequired:0};this._oNoDataIllustration=null;this._oErrorIllustration=null;this._iCurrentHeight=0;this._iAfterRendering=0;this._iAfterRenderingEventDelay=60;this.addContent()};w.prototype.addContent=function(){this.setAggregation("_header",this.createHeader());this.setAggregation("_list",this.createList());this.setAggregation("_footer",this.createFooter())};w.prototype.getKey=function(){return this._oCategoryConfig.name};w.prototype.translate=function(t,e){var i=this._oCategoryConfig.translation;return this._oResourceBundle.getText(i+"."+t,e||[])};w.prototype.updateDataModel=function(t){this.setModel(new e(t),"data")};w.prototype.initialData=function(t){var e=this.getModel("data");if(!e&&this.getInitialPlaceholder()&&this.getPlaceholderData()){var i=[];for(var s=0;s<t;s++){i.push(this.getPlaceholderData())}this.updateDataModel({data:i})}};w.prototype.resetDataRequired=function(t,e,i){if(this._bResetData){this._sSearchTerm=t;this._iSkip=e;this._iTop=i;return true}var s=this.getVisible();if(this._sSearchTerm===t&&(this._iSkip===e&&this._iTop===i&&(s&&this._oDirty.iDataFetchRequired>Date.now()))||!s&&this._oDirty.iCountFetchRequired>Date.now()){return false}this._sSearchTerm=t;this._iSkip=e;this._iTop=i;return true};w.prototype.resetData=function(){this._bResetData=true;this.updateDataModel({})};w.prototype.search=function(t,e,i){i=isNaN(i)||i<0?this._iTop||this.getPageSize():i;e=isNaN(e)||e<0?this._iSkip||0:e;if(typeof t!=="string"){t=this.getSearchTerm()}var s=this.getVisible(),o=this._sSearchTerm!==t,a,r=this.getModel("data").getData()||{};if(!this.resetDataRequired(t,e,i)){this.fireFetchEvent("before","skipped",r);this.fireFetchEvent("after","skipped",r);return}this._iCurrentCount=0;this._bResetData=false;this._bIsLoading=true;this.fireFetchEvent("before",s?"data":"count",performance.now(),r);if(s){this.setNoDataText(this.translate("LoadingData"),"Loading");this.initialData(i);this.showLoadingPlaceholder(true);this._oDirty.iDataFetchRequired=Date.now()+w._iDataRefreshMs;a=this.fetchData(t,e,i);a=a.then(this.applyDataChange.bind(this,o))}else{a=this.fetchCount(t,e,i);a=a.then(this.applyCount.bind(this))}this._oDirty.iCountFetchRequired=Date.now()+w._iCountRefreshMs;if(a){a.then(function(t){this._iCurrentCount=t.count||0;this.setNoDataText(this.translate("NoData"),"NoData");this.fireFetchEvent("after",s?"data":"count",t)}.bind(this))}};w.prototype.applyDataChange=function(t,e){var i={count:e.count,top:this._iTop,skip:this._iSkip,page:Math.floor(this._iSkip/this._iTop)+1,data:e.data};this.showLoadingPlaceholder(false,function(){this.updateDataModel(i);this.fixHeight(t)}.bind(this));return i};w.prototype.applyCount=function(t){var e={count:t.count,top:this._iTop,skip:this._iSkip,page:Math.floor(this._iSkip/this._iTop)+1,data:[]};this.updateDataModel(e);return e};w.prototype.fireFetchEvent=function(t,e,i){var s={count:i?i.count||0:0,category:this.getKey(),top:this._iTop,skip:this._iSkip,page:this._iSkip/this._iTop+1,searchTerm:this._sSearchTerm,visible:this.getVisible(),time:performance.now(),fetchType:e};if(t==="before"){this.fireBeforeSearch(s)}else if(t==="after"){this.fireAfterSearch(s)}};w.prototype.fetchData=function(t,e,i){return Promise.resolve({data:[],count:0})};w.prototype.fetchCount=function(t,e,i){return Promise.resolve({data:[],count:0})};w.prototype.showLoadingPlaceholder=function(t,e){if(t){if(this._iShowLoader){clearTimeout(this._iShowLoader)}this._iShowLoader=setTimeout(function(){this._oList.addStyleClass("loading")}.bind(this),200)}else if(this._iShowLoader){clearTimeout(this._iShowLoader);this._iShowLoader=setTimeout(function(){this._oList.removeStyleClass("loading");if(e){e()}this.invalidate();this._bIsLoading=false}.bind(this),this._oList.hasStyleClass("loading")?100:0)}};w.prototype.isLoading=function(){return this._bIsLoading};w.prototype.getPlaceholderData=function(){return{text:" ",description:" "}};w.prototype.refreshData=function(){this._oDirty.iDataFetchRequired=0;this.search(this.getSearchTerm(),0,this.getPageSize())};w.prototype.bindListViewItems=function(t){var e=this.getItemTemplate(t);this._oList.addStyleClass(t);this._oList.bindItems({path:"data>/data",template:e})};w.prototype.setNoDataText=function(t,e){this.updateIllustration(t,"Hide");if(this._oList&&!this.bPaging){this._oList.setNoDataText(" ");this.updateIllustration(t,e);this._oList.setNoDataText(t)}};w.prototype.getItemTemplate=function(t){var e=null;switch(t){case"card":e=this.createCardItemTemplate();break;case"tile":e=this.createTileItemTemplate();break;default:e=this.createListItemTemplate()}return e.addStyleClass("sapUiCEPSearchCatLI "+t+" "+this.getKey())};w.prototype.setFooter=function(t){if(t==="viewAll"){this.setAggregation("_footer",this.createFooter(t))}};w.prototype.createHeader=function(){this._oHeader=new h({content:[new l({width:".5rem"}),this.createTitle(),this.createCounter(),new l,this.createViewButtons(),new l({width:"1rem"})]}).addStyleClass("sapUiCEPSearchCatHeaderTB");return this._oHeader};w.prototype.getPaginatorSettings=function(){return{visible:true,count:"{= ${data>/count}}",pageSize:"{= ${data>/top}}",currentPage:"{= ${data>/page}}",selectPage:function(t){this.fixHeight();this.bPaging=true;this.search(this.getSearchTerm(),t.getParameter("startIndex"),t.getParameter("pageSize"));this.bPaging=false}.bind(this)}};w.prototype.getSearchTerm=function(){return this._sSearchTerm||""};w.prototype.getResultCount=function(){this.getModel("data").getProperty("/count")};w.prototype.getResourceModel=function(){return this._oEdition.getResourceModel()};w.prototype.getViewSettings=function(){return{views:[{key:"list",icon:"sap-icon://text-align-justified"},{key:"card",icon:"sap-icon://business-card"}],default:"list"}};w.prototype.getDefaultIcon=function(){return this._oCategoryConfig.icon.src};w.prototype.getCurrentView=function(){var t=this.getProperty("currentView");if(t==="categoryDefault"){this.setProperty("currentView",this.getViewSettings().default);return this.getViewSettings().default}return t};w.prototype.setShowHeader=function(t){this._oHeader.setVisible(t);this._oList.removeStyleClass("noheader");if(!t){this._oList.addStyleClass("noheader")}return this.setProperty("showHeader",t)};w.prototype.setShowFooter=function(t){this.getAggregation("_footer").setVisible(t);return this.setProperty("showFooter",t)};w.prototype.setAllowViewSwitch=function(t){this._oViewSwitch.setVisible(t&&this._oViewSwitch.getItems().length>1);return this.setProperty("allowViewSwitch",t)};w.prototype.setCurrentView=function(t){var e=this.getCurrentView();if(e!==t){this._oList.unbindItems();this.setProperty("currentView",t);t=this.getCurrentView();this._oViewSwitch.setSelectedKey(t);this._oList.removeStyleClass(e);this.bindListViewItems(t);this._oList.addStyleClass(t);this._iCurrentHeight=0}return this};w.prototype.setPageSize=function(t){this.setProperty("pageSize",t);if(this.getDomRef()){this.refreshData()}return this};w.prototype.createCounter=function(){return new i({text:"{= isNaN(${data>/count}) ? '...' : '('+ ${data>/count} + ')'}",level:"H4"})};w.prototype.createTitle=function(){this._oTitle=new i({text:this._oCategoryConfig.title,level:"H4"});return this._oTitle};w.prototype.createList=function(){this._oList=new w.SearchResultList({inset:false,noDataText:" ",growingThreshold:this.getPageSize()});this._oList.addStyleClass("sapUiCEPSearchCatList");this.bindListViewItems(this.getCurrentView());return this._oList};w.prototype.createViewButtons=function(){var t=this.getViewSettings();var e=t.views.map(function(t){var e=t.key.charAt(0).toUpperCase()+t.key.slice(1);t.tooltip="{i18n>CATEGORY.Views."+e+"ButtonTooltip}";return new g(t)});this._oViewSwitch=new p({selectedKey:this.getCurrentView(),visible:e.length>1,items:e,selectionChange:function(t){var e=t.getParameter("item");this.setCurrentView(e.getKey())}.bind(this)});return this._oViewSwitch};w.prototype.createDefaultItemTemplate=function(){var t=new w.CustomListItem({press:this.itemNavigate.bind(this),type:"Active",content:[new a({direction:"Column",items:[new a({direction:"Row",items:[new r(this.getItemAvatarSettings()).addStyleClass("sapUiSmallMarginBegin"),new n(this.getItemObjectIdentifierSettings()).addStyleClass("sapUiSmallMarginBeginEnd")]})]})]});return t};w.prototype.getItemObjectIdentifierSettings=function(){return{text:"{data>description}",title:"{data>title}",titleActive:"{= !!${data>_navigation} || !!${data>url}}",titlePress:this.itemNavigate.bind(this)}};w.prototype.getItemAvatarSettings=function(t){return{fallbackIcon:this._oCategoryConfig.icon.src,src:t||"{data>icon}",displaySize:this._oCategoryConfig.icon.size,displayShape:this._oCategoryConfig.icon.shape,backgroundColor:this._oCategoryConfig.icon.backgroundColor}};w.prototype.createListItemTemplate=function(){return this.createDefaultItemTemplate().addStyleClass("list")};w.prototype.createCardItemTemplate=function(){return this.createListItemTemplate().addStyleClass("card")};w.prototype.createTileItemTemplate=function(){return this.createListItemTemplate().addStyleClass("tile")};w.prototype.createFooter=function(t){if(t==="viewAll"){this._oFooter=new h({style:"Clear",content:[new l,new u({text:"{i18n>CATEGORIES.All.ViewAll}",press:function(){this.fireViewAll({key:this.getKey(),currentView:this.getCurrentView()})}.bind(this)}),new l({width:"1rem"})]}).addStyleClass("sapCEPCategoryFooterTB")}else{this._oFooter=new h({style:"Clear",content:[new l,new d(this.getPaginatorSettings())]}).addStyleClass("sapCEPCategoryFooterTB")}return this._oFooter};w.prototype.itemNavigate=function(t){};w.prototype.updateIllustration=function(t,e){if(!this.getUseIllustrations()){return}if(!this._oNoDataIllustration){this._oNoDataIllustration=new c({illustrationType:S.SimpleNotFoundMagnifier,enableDefaultTitleAndDescription:false,illustrationSize:"Spot",additionalContent:[new u({text:this._oResourceBundle.getText("CATEGORY.Views.RefreshButton"),visible:false,press:function(){this.fixHeight();setTimeout(function(){this.refreshData()}.bind(this),600);this.updateIllustration(this.translate("LoadingData"),"Loading")}.bind(this)})]})}if(this._iCurrentCount===0){if(e==="NoData"){if(this._iCurrentCount===0){this._oNoDataIllustration.setTitle(t);this._oNoDataIllustration.setIllustrationType(S.SimpleNotFoundMagnifier);this.setAggregation("_nodata",this._oNoDataIllustration);this._oNoDataIllustration.getAdditionalContent()[0].setVisible(true)}}else if(e==="Loading"){if(this._iCurrentCount===0){this._oNoDataIllustration.setTitle(t);this._oNoDataIllustration.setIllustrationType(S.SimpleNotFoundMagnifier);this.setAggregation("_nodata",this._oNoDataIllustration);this._oNoDataIllustration.getAdditionalContent()[0].setVisible(false)}}}else{this.setAggregation("_nodata",null)}};w.prototype.fixHeight=function(t){if(!this.getDomRef()){return}if(t){this.getDomRef().style.setProperty("--tmpPageSize","unset");this._iCurrentHeight=0;return}if(this._oList&&this._oList.getVisible()&&this._oList.getDomRef()){this._iCurrentHeight=Math.max(this._oList.getDomRef().offsetHeight,this._iCurrentHeight)}if(this._iCurrentHeight){this.getDomRef().style.setProperty("--tmpPageSize",this._iCurrentHeight+"px")}};w.prototype.onResize=function(t){if(this._oList&&this._oList._oItemNavigation){this._oList._oItemNavigation.setColumns(this._oList._getCurrentColCount())}if(t.oldSize&&t.size&&t.oldSize.width!==t.size.width){this._iCurrentHeight=0;this.fixHeight()}};w.prototype.onBeforeRendering=function(){if(this._oHighlighter){this._oHighlighter.destroy()}this._oHighlighter=null;if(this._iResizeListenerId){m.deregister(this._iResizeListenerId);this._iResizeListenerId=null}};w.prototype.onAfterRendering=function(){if(!this._iResizeListenerId){this._fnResizeListener=this.onResize.bind(this);this._iResizeListenerId=m.register(this,this._fnResizeListener)}if(!this._oHighlighter&&this.getHighlightResult()){this._oHighlighter=new y(this.getDomRef(),{isCaseSensitive:false,shouldBeObserved:true,querySelector:".sapUiCEPSearchCatLI"});this._oHighlighter.highlight(this.getSearchTerm())}this.fixHeight();if(this._iAfterRendering){clearTimeout(this._iAfterRendering)}this._iAfterRendering=setTimeout(function(){this.fireAfterRendering.bind(this)();this._iAfterRendering=null}.bind(this),this._iAfterRenderingEventDelay)};return w});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/controls/Highlighter", [],function(){"use strict";var e={};e.CURRENTLY_HIGHLIGHTED_DOM_REFS=[];e.MUTATION_OBSERVER=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;var t=function e(t,i){this._bIsCaseSensitive=!!i.isCaseSensitive;this._aPreviouslyHighlightedNodes=[];this._aPreviouslyOriginalNodes=[];this._aOldTerms=[];this._aRegExTerms=[];this._bUseExternalStyles=!!i.useExternalStyles;this._oObserver=null;this._sQuerySelector=i.querySelector;if(Array.isArray(t)){this._oDomRef=t}else{this._oDomRef=[t]}if(i.shouldBeObserved){this._addMutationObserver()}};t.prototype.highlight=function(e){var t;if(!e){this._aRegExTerms=[];this._aOldTerms=[];return}t=this._formatTerms(e);if(!t||!t.length||this._isNewTermsSameAsOld(t)){return}this._aOldTerms=t;this._cacheRegExTerms();this._toggleMutationObserver(false);this._oDomRef.forEach(function(e){this._highlightSubTree(e)},this);this._toggleMutationObserver(true)};t.prototype._cacheRegExTerms=function(){var e;this._aRegExTerms=[];this._aOldTerms.forEach(function(t){t=this._escapeRegExp(t);e=this._bIsCaseSensitive?new RegExp(t,"g"):new RegExp(t,"gi");this._aRegExTerms.push(e)},this)};t.prototype._escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};t.prototype._isNewTermsSameAsOld=function(e){var t=this._aOldTerms.length,i;if(t!==e.length){return false}for(i=0;i<t;i++){if(this._aOldTerms[i]!==e[i]){return false}}return true};t.prototype._highlightSubTree=function(e){var t,i,r;if(e===this._oDomRef[0]&&this._sQuerySelector){r=this._oDomRef[0].querySelectorAll(this._sQuerySelector)}else{r=e.childNodes}for(i=0;i<r.length;i++){t=r[i];this._processNode(t)}};t.prototype._processNode=function(e){var t,i,r,s,o,n,h,a,l,u;if(e.nodeType===document.ELEMENT_NODE){this._highlightSubTree(e)}else if(e.nodeType===document.TEXT_NODE){t=e.data;o=Object.create(null);a=[];for(r=0;r<this._aRegExTerms.length;r++){i=this._aRegExTerms[r];while((h=i.exec(t))!==null){l=h.index;if(a.indexOf(l)===-1){n=h["0"];o[l]=n;for(s=l;s<l+n.length;s++){a.push(s)}}}}if(Object.keys(o).length!==0){u=this._createHighlightedNode(o,t);this._replaceNode(e,u)}}};t.prototype._formatTerms=function(e){var t=e&&e.replace(/\s+/g," ").trim().split(" "),i;i=t.reduce(function(e,t){if(e.indexOf(t)===-1){e.push(t)}return e},[]);return i.sort(function(e,t){return t.length-e.length})};t.prototype._replaceNode=function(e,t){if(e.parentNode&&e.parentNode.closest&&e.parentNode.closest(this._sQuerySelector)){e.parentNode.replaceChild(t,e);this._aPreviouslyHighlightedNodes.push(t);this._aPreviouslyOriginalNodes.push(e)}};t.prototype._restorePreviouslyHighlightedNodes=function(){var e,t;this._toggleMutationObserver(false);for(var i=0;i<this._aPreviouslyHighlightedNodes.length;i++){e=this._aPreviouslyHighlightedNodes[i];t=this._aPreviouslyOriginalNodes[i];if(e.parentNode){e.parentNode.replaceChild(t,e)}}this._aPreviouslyHighlightedNodes=[];this._aPreviouslyOriginalNodes=[];this._toggleMutationObserver(true)};t.prototype._createHighlightedNode=function(e,t){var i=document.createElement("span"),r=[],s=function(e,t){return e>t},o=Object.keys(e).sort(s),n,h=0;for(var a=0;a<o.length;a++){var l=Number(o[a]),u=e[l],c=u.length,_=t.substring(h,l);if(_.length){r.push(_)}r.push(u);h=l+c}if(h<t.length){r.push(t.substring(h))}for(n in r){var g=document.createElement("span");g.innerText=r[n];if(Object.values(e).indexOf(r[n])>-1){g.classList.add("defaultHighlightedText")}i.appendChild(g)}return i};t.prototype._addMutationObserver=function(){this._instantiateMutationObserver();this._toggleMutationObserver(true)};t.prototype._removeMutationObserver=function(){this._toggleMutationObserver(false);this._oObserver=null;this._oDomRef=[]};t.prototype._toggleMutationObserver=function(e){if(e){this._oDomRef.forEach(function(e){this._oObserver.observe(e,this.oObserverConfig)},this)}else if(this._oObserver){this._oObserver.disconnect()}};t.prototype._bIsDomNodeDescendant=function(e,t){return e.contains(t)};t.prototype._instantiateMutationObserver=function(){this.oObserverConfig={attributes:false,childList:true,characterData:true,subtree:true};this._oObserver=new e.MUTATION_OBSERVER(this._onMutationDetectionCallback.bind(this))};t.prototype._onMutationDetectionCallback=function(e){var t,i;this._toggleMutationObserver(false);e.forEach(function(e){if(e.type==="childList"){t=e.addedNodes;for(var r=0;r<t.length;r++){i=t[r];this._processNode(i)}}else if(e.type==="characterData"){this._processNode(e.target)}},this);this._toggleMutationObserver(true)};t.prototype.destroy=function(){this._removeMutationObserver()};return t});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/controls/Paginator", ["sap/ui/core/Control","sap/m/ToggleButton","sap/ui/core/delegate/ItemNavigation","../appendStyleVars","sap/ui/dom/includeStylesheet"],function(t,e,i,n,a){"use strict";n(["sapUiBaseText","sapUiLinkActiveColor"]);a(sap.ui.require.toUrl("sap/ushell/components/cepsearchresult/app/util/controls/Paginator.css"));var s=t.extend("sap.ushell.components.cepsearchresult.app.util.controls.Paginator",{metadata:{properties:{pageSize:{type:"int",defaultValue:5},count:{type:"int",defaultValue:0},currentPage:{type:"int",defaultValue:1},segmentSize:{type:"int",defaultValue:7}},aggregations:{_buttons:{type:"sap.m.Button",multiple:true,hidden:true}},events:{selectPage:{}}},renderer:function(t,e){t.openStart("div",e);t.attr("tabIndex","0");t.class("sapUiCEPSearchPag");t.openEnd();var i=e.getAggregation("_buttons")||[];for(var n=0;n<i.length;n++){t.renderControl(i[n])}t.close("div")}});s.prototype._setCurrentPageWithEvent=function(t){this.setCurrentPage(t);var e=t-1;var i=this.getPageSize();this.fireSelectPage({page:t,startIndex:e*i,pageSize:i,endIndex:(e+1)*i-1})};s.prototype._addButtons=function(){this.destroyAggregation("_buttons");var t=this.getPageSize();var i=Math.ceil(this.getCount()/t);var n=Math.min(this.getCurrentPage(),i);var a=this.getSegmentSize();var s=Math.max(n-Math.floor(a/2),1);var o=Math.min(s+a-1,i);if(o===i){s=Math.max(i-a+1,1)}var r=new e({icon:"sap-icon://navigation-left-arrow",enabled:n>1,visible:i>1,press:function(){this._setCurrentPageWithEvent(n-1)}.bind(this)});this.addAggregation("_buttons",r);if(s>1){var g=new e({text:"1",enabled:n>1,visible:n>1,press:function(){this._setCurrentPageWithEvent(1)}.bind(this)});this.addAggregation("_buttons",g);var u=new e({text:s===3?2:"...",enabled:n>=s,visible:i>a&&s>2,press:function(){this._setCurrentPageWithEvent(s-1)}.bind(this)});this.addAggregation("_buttons",u)}for(var h=s;h<=o;h++){var d=new e({text:""+h,pressed:h===n,enabled:h!==n,visible:i>1,press:function(t,e){return function(){t._setCurrentPageWithEvent(e)}}(this,h)});d.addStyleClass("sapUiCEPSearchPagNumber");this.addAggregation("_buttons",d)}if(o<i){var l=new e({text:o===i-2?i-1:"...",enabled:true,visible:o<i-1,press:function(){this._setCurrentPageWithEvent(o+1)}.bind(this)});this.addAggregation("_buttons",l);var p=new e({text:""+i,enabled:n!==i,visible:i>1,press:function(){this._setCurrentPageWithEvent(i)}.bind(this)});this.addAggregation("_buttons",p)}var v=new e({icon:"sap-icon://navigation-right-arrow",enabled:n<i,visible:i>1,press:function(){this._setCurrentPageWithEvent(n+1)}.bind(this)});this.addAggregation("_buttons",v)};s.prototype._removeKeyboardNavigation=function(){if(this._oItemNavigation){this.removeDelegate(this._oItemNavigation);this._oItemNavigation.destroy();this._oItemNavigation=null}};s.prototype._initKeyboardNavigation=function(){this._removeKeyboardNavigation();this._oItemNavigation=new i;var t=Array.from(this.getDomRef().querySelectorAll(".sapMBtn"));this._oItemNavigation.setCycling(false).setTableMode(true,true).setColumns(this.getAggregation("_buttons").length).setRootDomRef(this.getDomRef()).setPageSize(this.getPageSize()).setItemDomRefs(t);this.addDelegate(this._oItemNavigation)};s.prototype.onBeforeRendering=function(){this._addButtons()};s.prototype.onAfterRendering=function(){this._initKeyboardNavigation()};s.prototype.destroy=function(){this._removeKeyboardNavigation();this.destroyAggregation("_buttons")};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/controls/categories/All", ["../Category"],function(t){"use strict";var e=t.extend("sap.ushell.components.cepsearchresult.app.util.controls.categories.All",{metadata:{aggregations:{_content:{type:"sap.ui.core.Control",multiple:true}}},renderer:function(t,e){t.openStart("div",e);t.class("sapUiCEPSearchCatGroup");t.openEnd();var n=e.getAggregation("_content");n.forEach(function(e){t.renderControl(e)});t.close("div")}});e.prototype.addContent=function(){var t=this._oCategoryConfig.subCategories;t.forEach(function(t){t.instance=this._oEdition.createCategoryInstance(t.name);t.instance.setFooter("viewAll");t.instance.setPageSize(t.pageSize);t.instance.attachBeforeSearch(function(t){this.fireBeforeSearch(t.getParameters())}.bind(this));t.instance.attachAfterSearch(function(t){this.fireAfterSearch(t.getParameters())}.bind(this));t.instance.attachItemNavigate(function(t){this.fireItemNavigateSearch(t.getParameters())}.bind(this));t.instance.attachViewAll(function(t){this.fireViewAll(t.getParameters())}.bind(this));this.addAggregation("_content",t.instance)}.bind(this))};e.prototype.resetData=function(){this.getAggregation("_content").forEach(function(t){t.resetData()})};e.prototype.search=function(t,e,n){this.getAggregation("_content").forEach(function(a){a.setVisible(this.getVisible());a.search(t,e,n)}.bind(this))};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/controls/categories/Application", ["../Category","sap/ushell/services/VisualizationInstantiation","../../jsSearch"],function(t,e,i){"use strict";var n=t.extend("sap.ushell.components.cepsearchresult.app.util.controls.categories.Application",{renderer:t.getMetadata().getRenderer()});var a=new e;var r=1200;n.prototype.getViewSettings=function(){return{views:[{key:"list",icon:"sap-icon://text-align-justified"},{key:"tile",icon:"sap-icon://grid"}],default:"tile"}};n.prototype.createListItemTemplate=function(){var e=t.prototype.createListItemTemplate.apply(this);e.attachModelContextChange(this.addTile.bind(this));return e};n.prototype.createCardItemTemplate=function(){var e=t.prototype.createListItemTemplate.apply(this);e.attachModelContextChange(this.addTile.bind(this));return e};n.prototype.createTileItemTemplate=function(){var e=new t.CustomListItem({});e.attachModelContextChange(this.addTile.bind(this));return e};n.prototype.addTile=function(t){var e=t.getSource();if(e.getBindingContext("data")){var i=e.getBindingContext("data").getObject(),n=i.visualization;if(!n){return}if(e._oViz){e._oViz.destroy()}var r=a.instantiateVisualization(n);r.addStyleClass(n.displayFormatHint);e._oViz=r;if(this.getCurrentView()==="tile"){this.activateTile(r);e.destroyContent();e.addContent(r)}else{e.addContent(r.addStyleClass("hiddentile"))}}};n.prototype.activateTile=function(t){setTimeout(function(){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(){t.setActive(true,false)})}},r)};n.prototype.itemNavigate=function(t){if(this.isLoading()){return}var e=t.getSource();if(e.isA("sap.m.ObjectIdentifier")){e=e.getParent().getParent().getParent()}jQuery(e._oViz.getDomRef().querySelector("a")).trigger("tap")};n.prototype.fetchData=function(t,e,i){return this.getData(t,e,i)};n.prototype.fetchCount=function(t,e,i){return this.getData(t,e,i)};n.prototype.getPlaceholderData=function(){return{title:new Array(10).join(" "),description:new Array(35).join(" "),keywords:"",icon:"sap-icon://person-placeholder",label:new Array(17).join(" "),url:""}};n.prototype.normalize=function(t){if(!Array.isArray(t)){t=[]}var e=[];t.forEach(function(t){t.visualizations.forEach(function(i){var n=i.title;if(i.subtitle){n=n+" - "+i.subtitle}e.push({title:i.vizConfig&&i.vizConfig["sap.app"]&&i.vizConfig["sap.app"].title||i.title||t.title,description:i.vizConfig&&i.vizConfig["sap.app"]&&i.vizConfig["sap.app"].subTitle||i.subtitle||t.subtitle,keywords:i.keywords?i.keywords.join(" "):"",icon:i.icon||"",label:n,visualization:i,url:i.targetURL})})});return e};n.prototype.filter=function(t,e,n,a){this.searchEngine=new i({objects:t,fields:["text","title","keywords"],shouldNormalize:!String.prototype.normalize,algorithm:{id:"contains-ranked",options:[50,49,40,39,5,4,51]}});if(e){var r=this.searchEngine.search({searchFor:e,top:a,skip:n});return{data:r.results.map(function(t){return t.object}),count:r.totalCount}}var o={data:[],count:t.length};t.sort(function(t,e){return t.title.localeCompare(e.title)}).splice(n,a).forEach(function(t){o.data.push(t)});return o};n.prototype.getData=function(t,e,i){var n={data:[],totalCount:0};if(sap.ushell.Container&&sap.ushell.Container.getServiceAsync){return sap.ushell.Container.getServiceAsync("SearchableContent").then(function(n){n._changeVizType=function(){};return n.getApps().then(function(n){n=this.normalize(n);return this.filter(n,t,e,i)}.bind(this))}.bind(this))}return Promise.resolve(n)};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/controls/categories/Event", ["../Category","sap/m/Text","sap/m/Label","sap/m/FlexBox","sap/m/Avatar","sap/m/ObjectIdentifier","sap/ui/core/Core","sap/ui/core/theming/Parameters","sap/ui/core/format/DateFormat"],function(t,a,e,i,n,r,s,o,l){"use strict";var m={};function c(){m=o.get({name:["sapUiAccent2","sapUiAccentBackgroundColor2","sapUiAccent10","sapUiAccentBackgroundColor10","sapUiFontFamily"]})}s.attachThemeChanged(c);c();function p(t,a){if(typeof a==="string"){a=new Date(a)}if(!(a instanceof Date)){return""}if(a.toString()==="Invalid Date"){return""}if(!t){t={style:"short"}}return l.getDateInstance(t).format(a)}function d(t,a){if(typeof a==="string"){a=new Date(a)}if(!(a instanceof Date)){return""}if(a.toString()==="Invalid Date"){return""}if(!t){t={style:"short"}}return l.getDateTimeInstance(t).format(a)}var g=['<svg xmlns="http://www.w3.org/2000/svg" aria-label="Calendar" role="img" viewBox="0 0 100 100">','<rect width="100" height="39" fill="{mParams.sapUiAccent2}"/>','<rect y="39" width="100" height="61" fill="{mParams.sapUiAccentBackgroundColor10}"/>','<text x="50%" y="29" style=\'fill:{mParams.sapUiAccentBackgroundColor2};font-size:23px;opacity:0.8;font-family:{mParams.sapUiFontFamily};text-anchor: middle\'>{sMonth}</text>','<text id="day" x="50%" y="84"'," style='stroke-width:1;stroke:{mParams.sapUiAccentBackgroundColor10};"," fill: {mParams.sapUiAccent10}; font-size: 45px; font-weight: bold; font-family:{mParams.sapUiFontFamily};text-anchor: middle'>{sDay}</text>",'<text id="weekday" x="20" y="70" style=\'display:none;fill:{mParams.sapUiAccent10};font-size:20px;font-family:{mParams.sapUiFontFamily};text-anchor: middle\'>{sWeekday}</text>',"</svg >"].join("");function f(t,a,e){var i=g.replace("{sMonth}",a.substring(0,3)).replace("{sDay}",e).replace("{sWeekday}",t.substring(0,2)).replace(/\{mParams.sapUiAccentBackgroundColor2\}/g,m.sapUiAccentBackgroundColor2).replace(/\{mParams.sapUiAccentBackgroundColor10\}/g,m.sapUiAccentBackgroundColor10).replace(/\{mParams.sapUiAccent2\}/g,m.sapUiAccent2).replace(/\{mParams.sapUiAccent10\}/g,m.sapUiAccent10).replace(/\{mParams.sapUiFontFamily\}/g,m.sapUiFontFamily);return"data:image/svg+xml;base64,"+btoa(i)}var u=t.extend("sap.ushell.components.cepsearchresult.app.util.controls.categories.Event",{renderer:t.getMetadata().getRenderer()});u.prototype.getItemAvatarSettings=function(){var a=t.prototype.getItemAvatarSettings.apply(this,["{data>icon}"]);a.src={path:"data>",formatter:function(t){if(!t){return""}return f(p({format:"EEE"},t.from),p({format:"MMM"},t.from),p({format:"D"},t.from))}};return a};u.prototype.createDefaultItemTemplate=function(){return new t.CustomListItem({press:this.itemNavigate.bind(this),type:"Active",content:[new i({direction:"Column",items:[new i({direction:"Row",wrap:"Wrap",items:[new n(this.getItemAvatarSettings()).addStyleClass("sapUiSmallMarginBegin sapUiTinyMarginBottom event"),new r({text:"{data>description}",title:"{data>title}",titleActive:"{= !!${data>_navigation} || !!${data>url}}",titlePress:this.itemNavigate.bind(this)}).addStyleClass("sapUiSmallMarginBeginEnd sapUiSmallMarginBottom"),new i({direction:"Column",items:[this.createDateRow("From","data>from"),this.createDateRow("To","data>to")]}).addStyleClass("infoTextSection")]}).addStyleClass("sapUiSmallMarginEnd")]}).addStyleClass("status")]})};u.prototype.createDateRow=function(t,n){var r={path:n,formatter:p.bind(null,{style:"medium"})},s={path:n,formatter:d.bind(null,{pattern:"hh:mm"})};return new i({direction:"Row",items:[new e({text:t,width:"3rem"}).addStyleClass("sapUiSmallMarginBegin"),new a({text:r,width:"6rem"}).addStyleClass("sapUiSmallMarginBeginEnd"),new a({text:s,width:"4rem"}).addStyleClass("sapUiSmallMarginBeginEnd")]}).addStyleClass("tinyTop")};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/controls/categories/People", ["../Category","sap/m/CustomListItem","sap/m/Link","sap/m/Text","sap/m/Label","sap/m/FlexBox","sap/m/Avatar","sap/m/ObjectIdentifier","sap/ui/core/CustomData"],function(t,e,a,i,n,o,r,s,l){"use strict";var d=t.extend("sap.ushell.components.cepsearchresult.app.util.controls.categories.People",{renderer:t.getMetadata().getRenderer()});d.prototype.getItemAvatarSettings=function(){var e=t.prototype.getItemAvatarSettings.apply(this,["{data>icon}"]);e.initials={path:"data>text",formatter:function(t){try{var e=t.split(" ");return(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase()}catch(t){return""}}};return e};d.prototype.createDefaultItemTemplate=function(){return new t.CustomListItem({press:this.itemNavigate.bind(this),type:"Active",content:[new o({direction:"Column",customData:new l({key:"status",value:"{= ${data>status} || 'unknown'}",writeToDom:true}),items:[new o({direction:"Row",wrap:"Wrap",items:[new r(this.getItemAvatarSettings()).addStyleClass("sapUiSmallMarginBegin sapUiTinyMarginBottom people"),new s({text:"{data>description}",title:"{data>text}",titleActive:"{= !!${data>_navigation} || !!${data>url}}",titlePress:this.itemNavigate.bind(this)}).addStyleClass("sapUiSmallMarginBeginEnd sapUiSmallMarginBottom"),new o({direction:"Column",items:[this.createInfoRow("Office","{data>location}"),this.createInfoRow("Manager","{data>manager}","mailto:{data>manager}")]}).addStyleClass("infoTextSection"),new o({direction:"Column",items:[this.createInfoRow("Mail","{data>mail}","mailto:{data>mail}"),this.createInfoRow("Mobile","{data>mobile}","tel:{data>mobile}"),this.createInfoRow("Work","{data>work}","tel:{data>work}")]}).addStyleClass("infoTextSection")]}).addStyleClass("sapUiSmallMarginEnd")]}).addStyleClass("status")]})};d.prototype.createInfoRow=function(t,e,r){return new o({direction:"Row",visible:"{= !!$"+e+"}",items:[new n({text:t,width:"3rem"}).addStyleClass("sapUiSmallMarginBegin"),r?new a({text:e,href:r}).addStyleClass("sapUiSmallMarginBeginEnd"):new i({text:e}).addStyleClass("sapUiSmallMarginBeginEnd")]}).addStyleClass("tinyTop")};d.prototype.getPlaceholderData=function(){return{text:new Array(20).join(" "),description:new Array(14).join(" "),mail:new Array(25).join(" "),location:new Array(7).join(" "),mobile:new Array(17).join(" "),status:"offline",icon:"sap-icon://person-placeholder"}};return d});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/controls/categories/Workpage", ["../Category"],function(t){"use strict";var e=t.extend("sap.ushell.components.cepsearchresult.app.util.controls.categories.Workpage",{renderer:t.getMetadata().getRenderer()});e.prototype.getViewSettings=function(){return{views:[{key:"list",icon:"sap-icon://text-align-justified"}],default:"list"}};e.prototype.getItemAvatarSettings=function(){return t.prototype.getItemAvatarSettings.apply(this,["{data>icon}"])};return e});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/components/cepsearchresult/app/util/jsSearch", [],function(){"use strict";return function d(u){var f=this;if(!u){throw new Error("You must specify search options")}if(String.prototype.normalize){u.shouldNormalize=u.shouldNormalize!==undefined?u.shouldNormalize:true}else{u.shouldNormalize=false}if(!u.algorithm||!u.algorithm.id||!Array.isArray(u.algorithm.options)||typeof u.algorithm.options[0]!=="number"||typeof u.algorithm.options[1]!=="number"||typeof u.algorithm.options[2]!=="number"||typeof u.algorithm.options[3]!=="number"||typeof u.algorithm.options[4]!=="number"||typeof u.algorithm.options[5]!=="number"||typeof u.algorithm.options[6]!=="number"){throw new Error("You must specify a supported search algorithm with all options")}var e=b(u.algorithm.id,u.algorithm.options);if(e===undefined){throw new Error("You must specify a supported search algorithm")}var c=[];if(Array.isArray(u.fields)){u.fields.forEach(function(d){if(typeof d==="string"){c.push({field:d,weight:3})}})}else if(u.fields){if(Array.isArray(u.fields.groups)){var a=parseFloat(u.fields.scale);if(isNaN(a)){a=1}else{a=Math.max(1,a)}u.fields.groups.forEach(function(d,f){var e=(u.fields.groups.length-1-f)/(u.fields.groups.length-1)*(a-1)+1;if(Array.isArray(d)){d.forEach(function(d){if(typeof d==="string"){c.push({field:d,weight:e})}})}else if(typeof d==="string"){c.push({field:d,weight:e})}})}}if(c.length<1){throw new Error("You must specify fields to search in")}var r;var i=[];var t;this.setObjects=function(d){if(!Array.isArray(d)){throw new Error("You must give an array of objects")}t=d;r=undefined};if(u.objects){this.setObjects(u.objects)}function n(d,u){var f=d;f=f.replace(/\[(\^?)(\\s)?a0\]/g,"[$1$2\\p{Letter}\\p{Number}]");f=f.replace(/\[(\^?)(\\s)?a\]/g,"[$1$2\\p{Letter}]");f=f.replace(/\[(\^?)(\\s)?0\]/g,"[$1$2\\p{Number}]");f=f.replace(/\[(\^?)(\\s)?a0\]/g,"[$1$2\\p{Number}]");f=f.replace(/\[\^\\p{Letter}\]/g,"(?:[\0-@[-`{-©«-´¶-¹»-¿×÷˂-˅˒-˟˥-˫˭˯-ͯ͵͸͹;΀-΅·΋΍΢϶҂-҉԰՗՘՚-ՠֈ-׏׫-ׯ׳-؟ً-٭ٰ۔ۖ-ۤۧ-ۭ۰-۹۽۾܀-܏ܑܰ-݌ަ-ް޲-߉߫-߳߶-߹߻-߿ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࠿࡙-࡟࡫-࢟ࢵࢾ-ःऺ-़ा-ॏ॑-ॗॢ-॰ঁ-঄঍঎঑঒঩঱঳-঵঺-়া-্৏-৛৞ৢ-৯৲-৻৽-਄਋-਎਑਒਩਱਴਷਺-੘੝੟-ੱੵ-઄઎઒઩઱઴઺-઼ા-૏૑-૟ૢ-૸ૺ-଄଍଎଑଒଩଱଴଺-଼ା-୛୞ୢ-୰୲-ஂ஄஋-஍஑஖-஘஛஝஠-஢஥-஧஫-஭஺-௏௑-ఄ఍఑఩఺-఼ా-౗౛-౟ౢ-౿ಁ-಄಍಑಩಴಺-಼ಾ-ೝ೟ೢ-೰ೳ-ഄ഍഑഻഼ാ-്൏-൓ൗ-൞ൢ-൹඀-඄඗-඙඲඼඾඿෇-฀ัิ-฿็-຀຃຅ຆຉ຋ຌຎ-ຓຘຠ຤຦ຨຩຬັິ-ຼ຾຿໅໇-໛໠-໿༁-༿཈཭-྇ྍ-࿿ါ-ှ၀-၏ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-႟჆჈-჌჎჏჻቉቎቏቗቙቞቟኉኎኏኱኶኷኿዁዆዇዗጑጖጗፛-፿᎐-᎟᏶᏷᏾-᐀᙭᙮ ᚛-᚟᛫-ᛰ᛹-᛿ᜍᜒ-ᜟᜲ-᜿ᝒ-᝟᝭᝱-᝿឴-៖៘-៛៝-᠟ᡸ-᡿ᢅᢆᢩ᢫-᢯᣶-᣿᤟-᥏᥮᥯᥵-᥿᦬-᦯᧊-᧿ᨗ-᨟ᩕ-᪦᪨-ᬄ᬴-᭄ᭌ-ᮂᮡ-ᮭ᮰-᮹᯦-᯿ᰤ-᱌᱐-᱙᱾᱿Ᲊ-᳨᳭ᳲ-᳴᳷-᳿᷀-᷿἖἗἞἟὆὇὎὏὘὚὜὞὾὿᾵᾽᾿-῁῅῍-῏῔῕῜-῟῭-῱῵´-⁰⁲-⁾₀-₏₝-℁℃-℆℈℉℔№-℘℞-℣℥℧℩℮℺℻⅀-⅄⅊-⅍⅏-ↂↅ-⯿Ⱟⱟ⳥-⳪⳯-⳱⳴-⳿⴦⴨-⴬⴮⴯⵨-⵮⵰-⵿⶗-⶟⶧⶯⶷⶿⷇⷏⷗⷟-⸮⸰-〄〇-〰〶-〺〽-぀゗-゜゠・㄀-㄄ㄯ㄰㆏-㆟ㆻ-㇯㈀-㏿䶶-䷿鿫-鿿꒍-꓏꓾꓿꘍-꘏꘠-꘩꘬-꘿꙯-꙾ꚞꚟꛦ-꜖꜠꜡꞉꞊ꞯꞸ-ꟶꠂ꠆ꠋꠣ-꠿꡴-ꢁꢴ-꣱꣸-꣺꣼ꣾ-꤉ꤦ-꤯ꥇ-꥟꥽-ꦃ꦳-꧎꧐-꧟ꧥ꧰-꧹꧿ꨩ-꨿ꩃꩌ-꩟꩷-꩹ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁꫃-꫚꫞꫟ꫫ-꫱ꫵ-꬀꬇꬈꬏꬐꬗-꬟꬧꬯꭛ꭦ-꭯ꯣ-꯿힤-힯퟇-퟊퟼-퟿-﩮﩯﫚-﫿﬇-﬒﬘-﬜ﬞ﬩﬷﬽﬿﭂﭅﮲-﯒﴾-﵏﶐﶑﷈-﷯﷼-﹯﹵﻽-＠［-｀｛-･﾿-￁￈￉￐￑￘￙￝-￿]|\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\ude7f\ude9d-\ude9f\uded1-\udeff\udf20-\udf2c\udf41\udf4a-\udf4f\udf76-\udf7f\udf9e\udf9f\udfc4-\udfc7\udfd0-\udfff]|\ud801[\udc9e-\udcaf\udcd4-\udcd7\udcfc-\udcff\udd28-\udd2f\udd64-\uddff\udf37-\udf3f\udf56-\udf5f\udf68-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56-\udc5f\udc77-\udc7f\udc9f-\udcdf\udcf3\udcf6-\udcff\udd16-\udd1f\udd3a-\udd7f\uddb8-\uddbd\uddc0-\uddff\ude01-\ude0f\ude14\ude18\ude34-\ude5f\ude7d-\ude7f\ude9d-\udebf\udec8\udee5-\udeff\udf36-\udf3f\udf56-\udf5f\udf73-\udf7f\udf92-\udfff]|\ud803[\udc49-\udc7f\udcb3-\udcbf\udcf3-\udfff]|\ud804[\udc00-\udc02\udc38-\udc82\udcb0-\udccf\udce9-\udd02\udd27-\udd4f\udd73-\udd75\udd77-\udd82\uddb3-\uddc0\uddc5-\uddd9\udddb\udddd-\uddff\ude12\ude2c-\ude7f\ude87\ude89\ude8e\ude9e\udea9-\udeaf\udedf-\udf04\udf0d\udf0e\udf11\udf12\udf29\udf31\udf34\udf3a-\udf3c\udf3e-\udf4f\udf51-\udf5c\udf62-\udfff]|\ud805[\udc35-\udc46\udc4b-\udc7f\udcb0-\udcc3\udcc6\udcc8-\udd7f\uddaf-\uddd7\udddc-\uddff\ude30-\ude43\ude45-\ude7f\udeab-\udeff\udf1a-\udfff]|\ud806[\udc00-\udc9f\udce0-\udcfe\udd00-\uddff\ude01-\ude0a\ude33-\ude39\ude3b-\ude4f\ude51-\ude5b\ude84\ude85\ude8a-\udebf\udef9-\udfff]|\ud807[\udc09\udc2f-\udc3f\udc41-\udc71\udc90-\udcff\udd07\udd0a\udd31-\udd45\udd47-\udfff]|\ud808[\udf9a-\udfff]|\ud809[\udc00-\udc7f\udd44-\udfff]|[\ud80a\ud80b\ud80e-\ud810\ud812-\ud819\ud823-\ud82b\ud82d\ud82e\ud830-\ud834\ud836-\ud839\ud83c-\ud83f\ud87b-\ud87d\ud87f-\udbff][\udc00-\udfff]|\ud80d[\udc2f-\udfff]|\ud811[\ude47-\udfff]|\ud81a[\ude39-\ude3f\ude5f-\udecf\udeee-\udeff\udf30-\udf3f\udf44-\udf62\udf78-\udf7c\udf90-\udfff]|\ud81b[\udc00-\udeff\udf45-\udf4f\udf51-\udf92\udfa0-\udfdf\udfe2-\udfff]|\ud821[\udfed-\udfff]|\ud822[\udef3-\udfff]|\ud82c[\udd1f-\udd6f\udefc-\udfff]|\ud82f[\udc6b-\udc6f\udc7d-\udc7f\udc89-\udc8f\udc9a-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3\udfcc-\udfff]|\ud83a[\udcc5-\udcff\udd44-\udfff]|\ud83b[\udc00-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udfff]|\ud869[\uded7-\udeff]|\ud86d[\udf35-\udf3f]|\ud86e[\udc1e\udc1f]|\ud873[\udea2-\udeaf]|\ud87a[\udfe1-\udfff]|\ud87e[\ude1e-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff])");f=f.replace(/\[\^\\p{Number}\]/g,"(?:[\0-/:-±´-¸º»¿-ٟ٪-ۯۺ-޿ߊ-॥॰-৥ৰ-৳৺-੥ੰ-૥૰-୥୰ୱ୸-௥௳-౥౰-౷౿-೥೰-ൗൟ-൥൹-෥෰-๏๚-໏໚-༟༴-ဿ၊-ႏႚ-፨፽-᛭ᛱ-៟៪-៯៺-᠏᠚-᥅ᥐ-᧏᧛-᩿᪊-᪏᪚-᭏᭚-ᮯᮺ-᰿᱊-ᱏᱚ-⁯ⁱ-⁳⁺-ⁿ₊-⅏Ↄↄ↊-⑟⒜-ⓩ─-❵➔-⳼⳾-〆〈-〠〪-〷〻-㆑㆖-㈟㈪-㉇㉐㉠-㉿㊊-㊰㋀-ꘟꘪ-ꛥ꛰-꠯꠶-꣏꣚-ꣿꤊ-ꧏ꧚-ꧯꧺ-꩏꩚-꯯꯺-퟿-／：-￿]|\ud800[\udc00-\udd06\udd34-\udd3f\udd79-\udd89\udd8c-\udee0\udefc-\udf1f\udf24-\udf40\udf42-\udf49\udf4b-\udfd0\udfd6-\udfff]|\ud801[\udc00-\udc9f\udcaa-\udfff]|\ud802[\udc00-\udc57\udc60-\udc78\udc80-\udca6\udcb0-\udcfa\udd00-\udd15\udd1c-\uddbb\uddbe\uddbf\uddd0\uddd1\ude00-\ude3f\ude48-\ude7c\ude7f-\ude9c\udea0-\udeea\udef0-\udf57\udf60-\udf77\udf80-\udfa8\udfb0-\udfff]|\ud803[\udc00-\udcf9\udd00-\ude5f\ude7f-\udfff]|\ud804[\udc00-\udc51\udc70-\udcef\udcfa-\udd35\udd40-\uddcf\uddda-\udde0\uddf5-\udeef\udefa-\udfff]|[\ud805\ud807][\udc00-\udc4f\udc5a-\udccf\udcda-\ude4f\ude5a-\udebf\udeca-\udf2f\udf3c-\udfff]|\ud806[\udc00-\udcdf\udcf3-\udfff]|[\ud808\ud80a-\ud819\ud81b-\ud833\ud836-\ud839\ud83b\ud83d-\udbff][\udc00-\udfff]|\ud809[\udc6f-\udfff]|\ud81a[\udc00-\ude5f\ude6a-\udf4f\udf5a\udf62-\udfff]|\ud834[\udc00-\udf5f\udf72-\udfff]|\ud835[\udc00-\udfcd]|\ud83a[\udc00-\udcc6\udcd0-\udd4f\udd5a-\udfff]|\ud83c[\udc00-\udcff\udd0d-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff])");f=f.replace(/\[\^\\p{Letter}\\p{Number}\]/g,"(?:[\0-/:-@[-`{-©«-±´¶-¸»¿×÷˂-˅˒-˟˥-˫˭˯-ͯ͵͸͹;΀-΅·΋΍΢϶҂-҉԰՗՘՚-ՠֈ-׏׫-ׯ׳-؟ً-ٟ٪-٭ٰ۔ۖ-ۤۧ-ۭ۽۾܀-܏ܑܰ-݌ަ-ް޲-޿߫-߳߶-߹߻-߿ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࠿࡙-࡟࡫-࢟ࢵࢾ-ःऺ-़ा-ॏ॑-ॗॢ-॥॰ঁ-঄঍঎঑঒঩঱঳-঵঺-়া-্৏-৛৞ৢ-৥৲৳৺৻৽-਄਋-਎਑਒਩਱਴਷਺-੘੝੟-੥ੰੱੵ-઄઎઒઩઱઴઺-઼ા-૏૑-૟ૢ-૥૰-૸ૺ-଄଍଎଑଒଩଱଴଺-଼ା-୛୞ୢ-୥୰୸-ஂ஄஋-஍஑஖-஘஛஝஠-஢஥-஧஫-஭஺-௏௑-௥௳-ఄ఍఑఩఺-఼ా-౗౛-౟ౢ-౥౰-౷౿ಁ-಄಍಑಩಴಺-಼ಾ-ೝ೟ೢ-೥೰ೳ-ഄ഍഑഻഼ാ-്൏-൓ൗൢ-൥൹඀-඄඗-඙඲඼඾඿෇-෥෰-฀ัิ-฿็-๏๚-຀຃຅ຆຉ຋ຌຎ-ຓຘຠ຤຦ຨຩຬັິ-ຼ຾຿໅໇-໏໚໛໠-໿༁-༟༴-༿཈཭-྇ྍ-࿿ါ-ှ၊-၏ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-႟჆჈-჌჎჏჻቉቎቏቗቙቞቟኉኎኏኱኶኷኿዁዆዇዗጑጖጗፛-፨፽-፿᎐-᎟᏶᏷᏾-᐀᙭᙮ ᚛-᚟᛫-᛭᛹-᛿ᜍᜒ-ᜟᜲ-᜿ᝒ-᝟᝭᝱-᝿឴-៖៘-៛៝-៟៪-៯៺-᠏᠚-᠟ᡸ-᡿ᢅᢆᢩ᢫-᢯᣶-᣿᤟-᥅᥮᥯᥵-᥿᦬-᦯᧊-᧏᧛-᧿ᨗ-᨟ᩕ-᩿᪊-᪏᪚-᪦᪨-ᬄ᬴-᭄ᭌ-᭏᭚-ᮂᮡ-ᮭ᯦-᯿ᰤ-᰿᱊-᱌᱾᱿Ᲊ-᳨᳭ᳲ-᳴᳷-᳿᷀-᷿἖἗἞἟὆὇὎὏὘὚὜὞὾὿᾵᾽᾿-῁῅῍-῏῔῕῜-῟῭-῱῵´-⁯⁲⁳⁺-⁾₊-₏₝-℁℃-℆℈℉℔№-℘℞-℣℥℧℩℮℺℻⅀-⅄⅊-⅍⅏↊-⑟⒜-ⓩ─-❵➔-⯿Ⱟⱟ⳥-⳪⳯-⳱⳴-⳼⳾⳿⴦⴨-⴬⴮⴯⵨-⵮⵰-⵿⶗-⶟⶧⶯⶷⶿⷇⷏⷗⷟-⸮⸰-〄〈-〠〪-〰〶〷〽-぀゗-゜゠・㄀-㄄ㄯ㄰㆏-㆑㆖-㆟ㆻ-㇯㈀-㈟㈪-㉇㉐㉠-㉿㊊-㊰㋀-㏿䶶-䷿鿫-鿿꒍-꓏꓾꓿꘍-꘏꘬-꘿꙯-꙾ꚞꚟ꛰-꜖꜠꜡꞉꞊ꞯꞸ-ꟶꠂ꠆ꠋꠣ-꠯꠶-꠿꡴-ꢁꢴ-꣏꣚-꣱꣸-꣺꣼ꣾꣿꤦ-꤯ꥇ-꥟꥽-ꦃ꦳-꧎꧚-꧟ꧥ꧿ꨩ-꨿ꩃꩌ-꩏꩚-꩟꩷-꩹ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁꫃-꫚꫞꫟ꫫ-꫱ꫵ-꬀꬇꬈꬏꬐꬗-꬟꬧꬯꭛ꭦ-꭯ꯣ-꯯꯺-꯿힤-힯퟇-퟊퟼-퟿-﩮﩯﫚-﫿﬇-﬒﬘-﬜ﬞ﬩﬷﬽﬿﭂﭅﮲-﯒﴾-﵏﶐﶑﷈-﷯﷼-﹯﹵﻽-／：-＠［-｀｛-･﾿-￁￈￉￐￑￘￙￝-￿]|\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\udd06\udd34-\udd3f\udd79-\udd89\udd8c-\ude7f\ude9d-\ude9f\uded1-\udee0\udefc-\udeff\udf24-\udf2c\udf4b-\udf4f\udf76-\udf7f\udf9e\udf9f\udfc4-\udfc7\udfd0\udfd6-\udfff]|\ud801[\udc9e\udc9f\udcaa-\udcaf\udcd4-\udcd7\udcfc-\udcff\udd28-\udd2f\udd64-\uddff\udf37-\udf3f\udf56-\udf5f\udf68-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56\udc57\udc77\udc78\udc9f-\udca6\udcb0-\udcdf\udcf3\udcf6-\udcfa\udd1c-\udd1f\udd3a-\udd7f\uddb8-\uddbb\uddd0\uddd1\ude01-\ude0f\ude14\ude18\ude34-\ude3f\ude48-\ude5f\ude7f\udea0-\udebf\udec8\udee5-\udeea\udef0-\udeff\udf36-\udf3f\udf56\udf57\udf73-\udf77\udf92-\udfa8\udfb0-\udfff]|\ud803[\udc49-\udc7f\udcb3-\udcbf\udcf3-\udcf9\udd00-\ude5f\ude7f-\udfff]|\ud804[\udc00-\udc02\udc38-\udc51\udc70-\udc82\udcb0-\udccf\udce9-\udcef\udcfa-\udd02\udd27-\udd35\udd40-\udd4f\udd73-\udd75\udd77-\udd82\uddb3-\uddc0\uddc5-\uddcf\udddb\udddd-\udde0\uddf5-\uddff\ude12\ude2c-\ude7f\ude87\ude89\ude8e\ude9e\udea9-\udeaf\udedf-\udeef\udefa-\udf04\udf0d\udf0e\udf11\udf12\udf29\udf31\udf34\udf3a-\udf3c\udf3e-\udf4f\udf51-\udf5c\udf62-\udfff]|\ud805[\udc35-\udc46\udc4b-\udc4f\udc5a-\udc7f\udcb0-\udcc3\udcc6\udcc8-\udccf\udcda-\udd7f\uddaf-\uddd7\udddc-\uddff\ude30-\ude43\ude45-\ude4f\ude5a-\ude7f\udeab-\udebf\udeca-\udeff\udf1a-\udf2f\udf3c-\udfff]|\ud806[\udc00-\udc9f\udcf3-\udcfe\udd00-\uddff\ude01-\ude0a\ude33-\ude39\ude3b-\ude4f\ude51-\ude5b\ude84\ude85\ude8a-\udebf\udef9-\udfff]|\ud807[\udc09\udc2f-\udc3f\udc41-\udc4f\udc6d-\udc71\udc90-\udcff\udd07\udd0a\udd31-\udd45\udd47-\udd4f\udd5a-\udfff]|\ud808[\udf9a-\udfff]|\ud809[\udc6f-\udc7f\udd44-\udfff]|[\ud80a\ud80b\ud80e-\ud810\ud812-\ud819\ud823-\ud82b\ud82d\ud82e\ud830-\ud833\ud836-\ud839\ud83d-\ud83f\ud87b-\ud87d\ud87f-\udbff][\udc00-\udfff]|\ud80d[\udc2f-\udfff]|\ud811[\ude47-\udfff]|\ud81a[\ude39-\ude3f\ude5f\ude6a-\udecf\udeee-\udeff\udf30-\udf3f\udf44-\udf4f\udf5a\udf62\udf78-\udf7c\udf90-\udfff]|\ud81b[\udc00-\udeff\udf45-\udf4f\udf51-\udf92\udfa0-\udfdf\udfe2-\udfff]|\ud821[\udfed-\udfff]|\ud822[\udef3-\udfff]|\ud82c[\udd1f-\udd6f\udefc-\udfff]|\ud82f[\udc6b-\udc6f\udc7d-\udc7f\udc89-\udc8f\udc9a-\udfff]|\ud834[\udc00-\udf5f\udf72-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3\udfcc\udfcd]|\ud83a[\udcc5\udcc6\udcd0-\udcff\udd44-\udd4f\udd5a-\udfff]|\ud83b[\udc00-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udfff]|\ud83c[\udc00-\udcff\udd0d-\udfff]|\ud869[\uded7-\udeff]|\ud86d[\udf35-\udf3f]|\ud86e[\udc1e\udc1f]|\ud873[\udea2-\udeaf]|\ud87a[\udfe1-\udfff]|\ud87e[\ude1e-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff])");f=f.replace(/\[\^\\s\\p{Letter}\\p{Number}\]/g,"(?:[\0-\b-!-/:-@[-`{-¡-©«-±´¶-¸»¿×÷˂-˅˒-˟˥-˫˭˯-ͯ͵͸͹;΀-΅·΋΍΢϶҂-҉԰՗՘՚-ՠֈ-׏׫-ׯ׳-؟ً-ٟ٪-٭ٰ۔ۖ-ۤۧ-ۭ۽۾܀-܏ܑܰ-݌ަ-ް޲-޿߫-߳߶-߹߻-߿ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࠿࡙-࡟࡫-࢟ࢵࢾ-ःऺ-़ा-ॏ॑-ॗॢ-॥॰ঁ-঄঍঎঑঒঩঱঳-঵঺-়া-্৏-৛৞ৢ-৥৲৳৺৻৽-਄਋-਎਑਒਩਱਴਷਺-੘੝੟-੥ੰੱੵ-઄઎઒઩઱઴઺-઼ા-૏૑-૟ૢ-૥૰-૸ૺ-଄଍଎଑଒଩଱଴଺-଼ା-୛୞ୢ-୥୰୸-ஂ஄஋-஍஑஖-஘஛஝஠-஢஥-஧஫-஭஺-௏௑-௥௳-ఄ఍఑఩఺-఼ా-౗౛-౟ౢ-౥౰-౷౿ಁ-಄಍಑಩಴಺-಼ಾ-ೝ೟ೢ-೥೰ೳ-ഄ഍഑഻഼ാ-്൏-൓ൗൢ-൥൹඀-඄඗-඙඲඼඾඿෇-෥෰-฀ัิ-฿็-๏๚-຀຃຅ຆຉ຋ຌຎ-ຓຘຠ຤຦ຨຩຬັິ-ຼ຾຿໅໇-໏໚໛໠-໿༁-༟༴-༿཈཭-྇ྍ-࿿ါ-ှ၊-၏ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-႟჆჈-჌჎჏჻቉቎቏቗቙቞቟኉኎኏኱኶኷኿዁዆዇዗጑጖጗፛-፨፽-፿᎐-᎟᏶᏷᏾-᐀᙭᙮᚛-᚟᛫-᛭᛹-᛿ᜍᜒ-ᜟᜲ-᜿ᝒ-᝟᝭᝱-᝿឴-៖៘-៛៝-៟៪-៯៺-᠏᠚-᠟ᡸ-᡿ᢅᢆᢩ᢫-᢯᣶-᣿᤟-᥅᥮᥯᥵-᥿᦬-᦯᧊-᧏᧛-᧿ᨗ-᨟ᩕ-᩿᪊-᪏᪚-᪦᪨-ᬄ᬴-᭄ᭌ-᭏᭚-ᮂᮡ-ᮭ᯦-᯿ᰤ-᰿᱊-᱌᱾᱿Ᲊ-᳨᳭ᳲ-᳴᳷-᳿᷀-᷿἖἗἞἟὆὇὎὏὘὚὜὞὾὿᾵᾽᾿-῁῅῍-῏῔῕῜-῟῭-῱῵´-῿​-‧‪-‮‰-⁞⁠-⁯⁲⁳⁺-⁾₊-₏₝-℁℃-℆℈℉℔№-℘℞-℣℥℧℩℮℺℻⅀-⅄⅊-⅍⅏↊-⑟⒜-ⓩ─-❵➔-⯿Ⱟⱟ⳥-⳪⳯-⳱⳴-⳼⳾⳿⴦⴨-⴬⴮⴯⵨-⵮⵰-⵿⶗-⶟⶧⶯⶷⶿⷇⷏⷗⷟-⸮⸰-⿿、-〄〈-〠〪-〰〶〷〽-぀゗-゜゠・㄀-㄄ㄯ㄰㆏-㆑㆖-㆟ㆻ-㇯㈀-㈟㈪-㉇㉐㉠-㉿㊊-㊰㋀-㏿䶶-䷿鿫-鿿꒍-꓏꓾꓿꘍-꘏꘬-꘿꙯-꙾ꚞꚟ꛰-꜖꜠꜡꞉꞊ꞯꞸ-ꟶꠂ꠆ꠋꠣ-꠯꠶-꠿꡴-ꢁꢴ-꣏꣚-꣱꣸-꣺꣼ꣾꣿꤦ-꤯ꥇ-꥟꥽-ꦃ꦳-꧎꧚-꧟ꧥ꧿ꨩ-꨿ꩃꩌ-꩏꩚-꩟꩷-꩹ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁꫃-꫚꫞꫟ꫫ-꫱ꫵ-꬀꬇꬈꬏꬐꬗-꬟꬧꬯꭛ꭦ-꭯ꯣ-꯯꯺-꯿힤-힯퟇-퟊퟼-퟿-﩮﩯﫚-﫿﬇-﬒﬘-﬜ﬞ﬩﬷﬽﬿﭂﭅﮲-﯒﴾-﵏﶐﶑﷈-﷯﷼-﹯﹵﻽﻾＀-／：-＠［-｀｛-･﾿-￁￈￉￐￑￘￙￝-￿]|\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\udd06\udd34-\udd3f\udd79-\udd89\udd8c-\ude7f\ude9d-\ude9f\uded1-\udee0\udefc-\udeff\udf24-\udf2c\udf4b-\udf4f\udf76-\udf7f\udf9e\udf9f\udfc4-\udfc7\udfd0\udfd6-\udfff]|\ud801[\udc9e\udc9f\udcaa-\udcaf\udcd4-\udcd7\udcfc-\udcff\udd28-\udd2f\udd64-\uddff\udf37-\udf3f\udf56-\udf5f\udf68-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56\udc57\udc77\udc78\udc9f-\udca6\udcb0-\udcdf\udcf3\udcf6-\udcfa\udd1c-\udd1f\udd3a-\udd7f\uddb8-\uddbb\uddd0\uddd1\ude01-\ude0f\ude14\ude18\ude34-\ude3f\ude48-\ude5f\ude7f\udea0-\udebf\udec8\udee5-\udeea\udef0-\udeff\udf36-\udf3f\udf56\udf57\udf73-\udf77\udf92-\udfa8\udfb0-\udfff]|\ud803[\udc49-\udc7f\udcb3-\udcbf\udcf3-\udcf9\udd00-\ude5f\ude7f-\udfff]|\ud804[\udc00-\udc02\udc38-\udc51\udc70-\udc82\udcb0-\udccf\udce9-\udcef\udcfa-\udd02\udd27-\udd35\udd40-\udd4f\udd73-\udd75\udd77-\udd82\uddb3-\uddc0\uddc5-\uddcf\udddb\udddd-\udde0\uddf5-\uddff\ude12\ude2c-\ude7f\ude87\ude89\ude8e\ude9e\udea9-\udeaf\udedf-\udeef\udefa-\udf04\udf0d\udf0e\udf11\udf12\udf29\udf31\udf34\udf3a-\udf3c\udf3e-\udf4f\udf51-\udf5c\udf62-\udfff]|\ud805[\udc35-\udc46\udc4b-\udc4f\udc5a-\udc7f\udcb0-\udcc3\udcc6\udcc8-\udccf\udcda-\udd7f\uddaf-\uddd7\udddc-\uddff\ude30-\ude43\ude45-\ude4f\ude5a-\ude7f\udeab-\udebf\udeca-\udeff\udf1a-\udf2f\udf3c-\udfff]|\ud806[\udc00-\udc9f\udcf3-\udcfe\udd00-\uddff\ude01-\ude0a\ude33-\ude39\ude3b-\ude4f\ude51-\ude5b\ude84\ude85\ude8a-\udebf\udef9-\udfff]|\ud807[\udc09\udc2f-\udc3f\udc41-\udc4f\udc6d-\udc71\udc90-\udcff\udd07\udd0a\udd31-\udd45\udd47-\udd4f\udd5a-\udfff]|\ud808[\udf9a-\udfff]|\ud809[\udc6f-\udc7f\udd44-\udfff]|[\ud80a\ud80b\ud80e-\ud810\ud812-\ud819\ud823-\ud82b\ud82d\ud82e\ud830-\ud833\ud836-\ud839\ud83d-\ud83f\ud87b-\ud87d\ud87f-\udbff][\udc00-\udfff]|\ud80d[\udc2f-\udfff]|\ud811[\ude47-\udfff]|\ud81a[\ude39-\ude3f\ude5f\ude6a-\udecf\udeee-\udeff\udf30-\udf3f\udf44-\udf4f\udf5a\udf62\udf78-\udf7c\udf90-\udfff]|\ud81b[\udc00-\udeff\udf45-\udf4f\udf51-\udf92\udfa0-\udfdf\udfe2-\udfff]|\ud821[\udfed-\udfff]|\ud822[\udef3-\udfff]|\ud82c[\udd1f-\udd6f\udefc-\udfff]|\ud82f[\udc6b-\udc6f\udc7d-\udc7f\udc89-\udc8f\udc9a-\udfff]|\ud834[\udc00-\udf5f\udf72-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3\udfcc\udfcd]|\ud83a[\udcc5\udcc6\udcd0-\udcff\udd44-\udd4f\udd5a-\udfff]|\ud83b[\udc00-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udfff]|\ud83c[\udc00-\udcff\udd0d-\udfff]|\ud869[\uded7-\udeff]|\ud86d[\udf35-\udf3f]|\ud86e[\udc1e\udc1f]|\ud873[\udea2-\udeaf]|\ud87a[\udfe1-\udfff]|\ud87e[\ude1e-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff])");f=f.replace(/\[\\p{Letter}\]/g,"(?:[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄮㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿪ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf2d-\udf40\udf42-\udf49\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud801[\udc00-\udc9d\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude33\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud805[\udc00-\udc34\udc47-\udc4a\udc80-\udcaf\udcc4\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udf00-\udf19]|\ud806[\udca0-\udcdf\udcff\ude00\ude0b-\ude32\ude3a\ude50\ude5c-\ude83\ude86-\ude89\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc2e\udc40\udc72-\udc8f\udd00-\udd06\udd08\udd09\udd0b-\udd30\udd46]|\ud808[\udc00-\udf99]|\ud809[\udc80-\udd43]|[\ud80c\ud81c-\ud820\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872\ud874-\ud879][\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\udf00-\udf44\udf50\udf93-\udf9f\udfe0\udfe1]|\ud821[\udc00-\udfec]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud83a[\udc00-\udcc4\udd00-\udd43]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d])");f=f.replace(/\[\\p{Number}\]/g,"(?:[0-9²³¹¼-¾٠-٩۰-۹߀-߉०-९০-৯৴-৹੦-੯૦-૯୦-୯୲-୷௦-௲౦-౯౸-౾೦-೯൘-൞൦-൸෦-෯๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ០-៩៰-៹᠐-᠙᥆-᥏᧐-᧚᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙⁰⁴-⁹₀-₉⅐-ↂↅ-↉①-⒛⓪-⓿❶-➓⳽〇〡-〩〸-〺㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꛦ-ꛯ꠰-꠵꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９]|\ud800[\udd07-\udd33\udd40-\udd78\udd8a\udd8b\udee1-\udefb\udf20-\udf23\udf41\udf4a\udfd1-\udfd5]|\ud801[\udca0-\udca9]|\ud802[\udc58-\udc5f\udc79-\udc7f\udca7-\udcaf\udcfb-\udcff\udd16-\udd1b\uddbc\uddbd\uddc0-\uddcf\uddd2-\uddff\ude40-\ude47\ude7d\ude7e\ude9d-\ude9f\udeeb-\udeef\udf58-\udf5f\udf78-\udf7f\udfa9-\udfaf]|\ud803[\udcfa-\udcff\ude60-\ude7e]|\ud804[\udc52-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udde1-\uddf4\udef0-\udef9]|\ud805[\udc50-\udc59\udcd0-\udcd9\ude50-\ude59\udec0-\udec9\udf30-\udf3b]|\ud806[\udce0-\udcf2]|\ud807[\udc50-\udc6c\udd50-\udd59]|\ud809[\udc00-\udc6e]|\ud81a[\ude60-\ude69\udf50-\udf59\udf5b-\udf61]|\ud834[\udf60-\udf71]|\ud835[\udfce-\udfff]|\ud83a[\udcc7-\udccf\udd50-\udd59]|\ud83c[\udd00-\udd0c])");f=f.replace(/\[\\p{Letter}\\p{Number}\]/g,"(?:[0-9A-Za-zª²³µ¹º¼-¾À-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-ي٠-٩ٮٯٱ-ۓەۥۦۮ-ۼۿܐܒ-ܯݍ-ޥޱ߀-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡ०-९ॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡ০-ৱ৴-৹ৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼੦-੯ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡ૦-૯ૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡ୦-୯ୱ-୷ஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐ௦-௲అ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡ౦-౯౸-౾ಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡ೦-೯ೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖ൘-ൡ൦-൸ൺ-ൿඅ-ඖක-නඳ-රලව-ෆ෦-෯ก-ะาำเ-ๆ๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༠-༳ཀ-ཇཉ-ཬྈ-ྌက-ဪဿ-၉ၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎ႐-႙Ⴀ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፩-፼ᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜ០-៩៰-៹᠐-᠙ᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞ᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧚ᨀ-ᨖᨠ-ᩔ᪀-᪉᪐-᪙ᪧᬅ-ᬳᭅ-ᭋ᭐-᭙ᮃ-ᮠᮮ-ᯥᰀ-ᰣ᱀-᱉ᱍ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ⁰ⁱ⁴-⁹ⁿ-₉ₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎ⅐-↉①-⒛⓪-⓿❶-➓Ⰰ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳ⳽ⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄮㄱ-ㆎ㆒-㆕ㆠ-ㆺㇰ-ㇿ㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿㐀-䶵一-鿪ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢ꠰-꠵ꡀ-ꡳꢂ-ꢳ꣐-꣙ꣲ-ꣷꣻꣽ꤀-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏ-꧙ꧠ-ꧤꧦ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋ꩐-꩙ꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd07-\udd33\udd40-\udd78\udd8a\udd8b\ude80-\ude9c\udea0-\uded0\udee1-\udefb\udf00-\udf23\udf2d-\udf4a\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udca0-\udca9\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc58-\udc76\udc79-\udc9e\udca7-\udcaf\udce0-\udcf2\udcf4\udcf5\udcfb-\udd1b\udd20-\udd39\udd80-\uddb7\uddbc-\uddcf\uddd2-\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude33\ude40-\ude47\ude60-\ude7e\ude80-\ude9f\udec0-\udec7\udec9-\udee4\udeeb-\udeef\udf00-\udf35\udf40-\udf55\udf58-\udf72\udf78-\udf91\udfa9-\udfaf]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udcfa-\udcff\ude60-\ude7e]|\ud804[\udc03-\udc37\udc52-\udc6f\udc83-\udcaf\udcd0-\udce8\udcf0-\udcf9\udd03-\udd26\udd36-\udd3f\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddd0-\uddda\udddc\udde1-\uddf4\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udef0-\udef9\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud805[\udc00-\udc34\udc47-\udc4a\udc50-\udc59\udc80-\udcaf\udcc4\udcc5\udcc7\udcd0-\udcd9\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude50-\ude59\ude80-\udeaa\udec0-\udec9\udf00-\udf19\udf30-\udf3b]|\ud806[\udca0-\udcf2\udcff\ude00\ude0b-\ude32\ude3a\ude50\ude5c-\ude83\ude86-\ude89\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc2e\udc40\udc50-\udc6c\udc72-\udc8f\udd00-\udd06\udd08\udd09\udd0b-\udd30\udd46\udd50-\udd59]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|[\ud80c\ud81c-\ud820\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872\ud874-\ud879][\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\ude60-\ude69\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf50-\udf59\udf5b-\udf61\udf63-\udf77\udf7d-\udf8f]|\ud81b[\udf00-\udf44\udf50\udf93-\udf9f\udfe0\udfe1]|\ud821[\udc00-\udfec]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud834[\udf60-\udf71]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb\udfce-\udfff]|\ud83a[\udc00-\udcc4\udcc7-\udccf\udd00-\udd43\udd50-\udd59]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud83c[\udd00-\udd0c]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d])");f=f.replace(/\[\\s\\p{Letter}\\p{Number}\]/g,"(?:[\t-\r 0-9A-Za-z ª²³µ¹º¼-¾À-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-ي٠-٩ٮٯٱ-ۓەۥۦۮ-ۼۿܐܒ-ܯݍ-ޥޱ߀-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡ०-९ॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡ০-ৱ৴-৹ৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼੦-੯ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡ૦-૯ૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡ୦-୯ୱ-୷ஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐ௦-௲అ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡ౦-౯౸-౾ಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡ೦-೯ೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖ൘-ൡ൦-൸ൺ-ൿඅ-ඖක-නඳ-රලව-ෆ෦-෯ก-ะาำเ-ๆ๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༠-༳ཀ-ཇཉ-ཬྈ-ྌက-ဪဿ-၉ၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎ႐-႙Ⴀ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፩-፼ᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜ០-៩៰-៹᠐-᠙ᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞ᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧚ᨀ-ᨖᨠ-ᩔ᪀-᪉᪐-᪙ᪧᬅ-ᬳᭅ-ᭋ᭐-᭙ᮃ-ᮠᮮ-ᯥᰀ-ᰣ᱀-᱉ᱍ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ - \u2028\u2029  ⁰ⁱ⁴-⁹ⁿ-₉ₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎ⅐-↉①-⒛⓪-⓿❶-➓Ⰰ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳ⳽ⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ　々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄮㄱ-ㆎ㆒-㆕ㆠ-ㆺㇰ-ㇿ㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿㐀-䶵一-鿪ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢ꠰-꠵ꡀ-ꡳꢂ-ꢳ꣐-꣙ꣲ-ꣷꣻꣽ꤀-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏ-꧙ꧠ-ꧤꧦ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋ꩐-꩙ꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼ\ufeff０-９Ａ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd07-\udd33\udd40-\udd78\udd8a\udd8b\ude80-\ude9c\udea0-\uded0\udee1-\udefb\udf00-\udf23\udf2d-\udf4a\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udca0-\udca9\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc58-\udc76\udc79-\udc9e\udca7-\udcaf\udce0-\udcf2\udcf4\udcf5\udcfb-\udd1b\udd20-\udd39\udd80-\uddb7\uddbc-\uddcf\uddd2-\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude33\ude40-\ude47\ude60-\ude7e\ude80-\ude9f\udec0-\udec7\udec9-\udee4\udeeb-\udeef\udf00-\udf35\udf40-\udf55\udf58-\udf72\udf78-\udf91\udfa9-\udfaf]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udcfa-\udcff\ude60-\ude7e]|\ud804[\udc03-\udc37\udc52-\udc6f\udc83-\udcaf\udcd0-\udce8\udcf0-\udcf9\udd03-\udd26\udd36-\udd3f\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddd0-\uddda\udddc\udde1-\uddf4\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udef0-\udef9\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud805[\udc00-\udc34\udc47-\udc4a\udc50-\udc59\udc80-\udcaf\udcc4\udcc5\udcc7\udcd0-\udcd9\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude50-\ude59\ude80-\udeaa\udec0-\udec9\udf00-\udf19\udf30-\udf3b]|\ud806[\udca0-\udcf2\udcff\ude00\ude0b-\ude32\ude3a\ude50\ude5c-\ude83\ude86-\ude89\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc2e\udc40\udc50-\udc6c\udc72-\udc8f\udd00-\udd06\udd08\udd09\udd0b-\udd30\udd46\udd50-\udd59]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|[\ud80c\ud81c-\ud820\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872\ud874-\ud879][\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\ude60-\ude69\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf50-\udf59\udf5b-\udf61\udf63-\udf77\udf7d-\udf8f]|\ud81b[\udf00-\udf44\udf50\udf93-\udf9f\udfe0\udfe1]|\ud821[\udc00-\udfec]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud834[\udf60-\udf71]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb\udfce-\udfff]|\ud83a[\udc00-\udcc4\udcc7-\udccf\udd00-\udd43\udd50-\udd59]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud83c[\udd00-\udd0c]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d])");if(f.match(/\\p/)){throw new Error("JsSearch internal bug - Cannot convert RegExp")}else{return new RegExp(f,u||"")}}var l={AlphaNum_atBegin:n("^[a0]"),Alpha_atBegin:n("^[a]"),Num_atBegin:n("^[0]"),AlphaNum_atEnd:n("[a0]$"),Alpha_atEnd:n("[a]$"),Num_atEnd:n("[0]$")};var h={};h.highlightChar="";h.regExpfillOneCharacterGaps=n(h.highlightChar+"(?!"+h.highlightChar+")[^a0]"+h.highlightChar,"g");h.initBitmap=function(d){return d};h.calcBitmap=function(d,u,f){var e;var c;while(d!==e&&(c=d.match(f))&&c[0].length){e=d;d=c[1]+Array(c[2].length+1).join(h.highlightChar)+c[3]}if(e===d){console.warn("JsSearch internal warning - Highlighting did not change")}for(var a=d.length-1;a>=0;a--){if(d[a]===h.highlightChar){u=u.substr(0,a)+h.highlightChar+u.substr(a+1)}}return u};h.applyBitmap=function(d,u){var f=false;if(!u){return undefined}u=u.replace(h.regExpfillOneCharacterGaps,h.highlightChar+h.highlightChar+h.highlightChar);for(var e=u.length-1;e>=0;e--){if(u[e]===h.highlightChar&&!f){d=d.substr(0,e+1)+"</b>"+d.substr(e+1);f=true}if(u[e]!==h.highlightChar&&f){d=d.substr(0,e+1)+"<b>"+d.substr(e+1);f=false}}if(f){d="<b>"+d}return d};function b(d,f){var e={"contains-ranked":{compileSearchTerm:function(d){var e={original:u.shouldNormalize?d.normalize("NFC"):d,parsed:[],hasTrailingWhitespace:false};function c(d){return d.children[0].cOriginal}function a(d){return d.children[d.children.length-1].cOriginal}function r(d){if(d.match(l.Alpha_atEnd)){return"(|[^a].*)"}else if(d.match(l.Num_atEnd)){return"(|[^0].*)"}return"(.*)"}function i(d,u,f){return d.map(function(e,c){if(e.type!==u){if(e.children){e.children=i(e.children,u,f);return e}return e}return f(e,c,d[c-1],d[c+1])})}e.hasTrailingWhitespace=e.original.substr(-1)===" ";var t=e.original.replace(/\\\"/g,"").split('"');var h=[];for(var b=0;b<t.length;b++){t[b]=t[b].replace(/\u0010/g,'\\"');var s=t[b].split(" ").map(function(d){var u={type:"word",wOriginal:d,children:[]};return u});s=s.filter(function(d){return d.wOriginal.length>0});if(t[b].length){if(b%2){h.push({type:"phrase",children:s})}else{h=h.concat(s)}}}e.parsed=h;e.parsed=i(e.parsed,"word",function(d){var u=[];var f=false;var e=d.wOriginal.split("");for(var c=0;c<e.length;c++){if(f){f=false;u.push({type:"character",cOriginal:"\\"+e[c]})}else if(e[c]==="\\"){f=true}else{u.push({type:"character",cOriginal:e[c]})}}d.children=u;return d});e.parsed=i(e.parsed,"character",function(d){var f=d.cOriginal;if(f==="*"){f="[^\\s]*?"}else if(f==="?"){f="[^\\s]"}else if(f.match(/\\[*?"\\]/)){}else{if(u.shouldNormalize){f=f.normalize("NFKD")}f=f.replace(/[\[\]\/\{\}\(\)\+\.\\\^\$\|]/,"\\$&");f=f.replace(/a/i,"(?:a|ae)");f=f.replace(/o/i,"(?:o|oe)");f=f.replace(/u/i,"(?:u|ue)");f=f.replace(/ä/i,"(?:ae|a)");f=f.replace(/ö/i,"(?:oe|o)");f=f.replace(/ü/i,"(?:ue|u)");f=f.replace(/ß/i,"ss");f=f.replace(/æ/i,"ae");f=f.replace(/œ/i,"oe");if(u.shouldNormalize){f=f.replace(/[\u0300-\u036f]/g,"")}}d.cRegExp=f;return d});i(e.parsed,"word",function(d){d.containsWildcard=false;var u="";var f="";for(var e=0;e<d.children.length;e++){if(e>0&&d.children[e].cOriginal.match(l.AlphaNum_atBegin)&&d.children[e-1].cOriginal.match(l.AlphaNum_atBegin)){f+="[^a0]*"}if(e<d.children.length-1){u+=d.children[e].cRegExp;f+=d.children[e].cRegExp}if(d.children[e].cOriginal==="*"||d.children[e].cOriginal==="?"){d.containsWildcard=true}}var c=d.children[d.children.length-1];var a="";if(c.cOriginal==="*"){a="(?:[a]+(?=[^a]|$)|[0]+(?=[^0]|$)|[^\\s]*?|)"}else if(c.cOriginal==="?"){a="(?:[a](?=[^a]|$)|[0](?=[^0]|$)|[^\\sa0](?=[\\sa0]))"}else{a=c.cRegExp}d.wRegExp=u+a;d.wRegExp2=f+a;return d});var o=true;var p=e.parsed.map(function(d){var u=[];if(d.type==="phrase"){o=false;d.children=d.children.filter(function(u,f){return f===d.children.length-1||!d.children[f].wOriginal.match(/^\*+$/)||!d.children[f+1].wOriginal.match(/^\*+$/)});d.children=d.children.filter(function(u,f){return f!==0&&f!==d.children.length-1||!u.wOriginal.match(/^\*+$/)});if(!d.children.length){u.push({r:"^",score:f[0],applyHighlighting:false})}else{var e="";i(d.children,"word",function(d,u,f,r){if(d.wOriginal!=="*"){if(u!==0&&f.wOriginal!=="*"&&(!r||r.wOriginal!=="*")){if(!(f.wOriginal.match(l.Alpha_atEnd)&&d.wOriginal.match(l.Alpha_atBegin))&&!(f.wOriginal.match(l.Num_atEnd)&&d.wOriginal.match(l.Num_atEnd))){e+="[^a0]*"}else{e+="[^a0]+"}}e+=d.wRegExp}else if(a(f).match(l.Alpha_atBegin)&&c(r).match(l.Alpha_atBegin)){e+="(?:[^a]|[^a].*?[^a])"}else if(a(f).match(l.Num_atEnd)&&c(r).match(l.Num_atEnd)){e+="(?:[^0]|[^0].*?[^0])"}else if(a(f).match(l.Alpha_atBegin)&&c(r).match(l.Num_atEnd)){e+=".*?"}else if(a(f).match(l.Num_atEnd)&&c(r).match(l.Alpha_atBegin)){e+=".*?"}else if(a(f)==="*"&&r&&c(r).match(l.Alpha_atBegin)){e+=".*?"}else if(a(f)==="*"&&r&&c(r).match(l.Num_atEnd)){e+=".*?"}else{e+="(?:[^a0]|[^a0].*?[^a0])"}});var t=d.children[d.children.length-1];u.push({r:"^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)("+e+")"+r(t.wOriginal)+"$",score:f[0],applyHighlighting:true})}}else if(d.type==="word"){if(d.wOriginal.match("^\\*+$")){o=false;u.push({r:"^",score:f[0],applyHighlighting:false})}else{u.push({r:"^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)("+d.wRegExp+")"+r(d.wOriginal)+"$",score:f[0],applyHighlighting:true});u.push({r:"^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)("+d.wRegExp2+")"+r(d.wOriginal)+"$",score:f[1],applyHighlighting:true})}}if(d.type==="word"&&d.containsWildcard===false){u.push({r:"^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)("+d.wRegExp+")(.*?)$",score:f[2],applyHighlighting:true});u.push({r:"^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)("+d.wRegExp2+")(.*?)$",score:f[3],applyHighlighting:true})}if(d.type==="word"&&d.containsWildcard===false){u.push({r:"^(.*)("+d.wRegExp+")(.*?)$",score:f[4],applyHighlighting:true});u.push({r:"^(.*)("+d.wRegExp2+")(.*?)$",score:f[5],applyHighlighting:true})}for(var h=0;h<u.length;h++){u[h].r=n(u[h].r,"i")}return{type:"mandatory",r:u}});if(o&&e.parsed.length>1){var g=[];e.parsed.forEach(function(d){g.push(d.wRegExp)});p.push({type:"optional",r:[{r:n("^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)"+g.join("\\s+"),"i"),score:f[6],applyHighlighting:false}]})}return p},compileTestTerm:function(d){var f={original:"",normalizationMap:[],useNormalizationMap:false,normalized:""};f.original=u.shouldNormalize?d.normalize("NFC"):d;f.normalized=f.original.split("").map(function(d){d=d.replace(/ä/i,"ae");d=d.replace(/ö/i,"oe");d=d.replace(/ü/i,"ue");d=d.replace(/ß/i,"ss");d=d.replace(/æ/i,"ae");d=d.replace(/œ/i,"oe");d=d.replace(/(\n|\r)/m," ");if(u.shouldNormalize){d=d.normalize("NFKD");d=d.replace(/[\u0300-\u036f]/g,"")}f.normalizationMap.push(d.length);if(d.length!==1){f.useNormalizationMap=true}return d}).join("");return f}}};return e[d]}function s(d,u){var f=true;var e=0;var c=0;var a=0;var r={};var i={};var t,n,l;for(n in u){r[n]=h.initBitmap(u[n].normalized)}for(t=0;t<d.length;t++){var b=d[t];var s=false;var o=0;for(n in u){var p=false;var g=false;var m=0;for(l=0;l<b.r.length;l++){var v=b.r[l];if(u[n].normalized.match(v.r)){p=true;if(v.applyHighlighting){g=true;r[n]=h.calcBitmap(u[n].normalized,r[n],v.r)}m=Math.max(m,v.score*u[n].weight)}}o+=m;if(p){s=true}if(g){i[n]=true}}if(b.type==="mandatory"){a++;if(s){e+=o}else{f=false}}else{c+=o}}var y=e/a+c;if(!f){y=-1}for(n in i){if(u[n].useNormalizationMap){for(l=0;l<u[n].normalizationMap.length;l++){r[n]=r[n].substr(0,l+1)+r[n].substr(l+u[n].normalizationMap[l])}}i[n]=h.applyBitmap(u[n].original,r[n])}return{score:y,highlighted:i}}this.search=function(d){if(!Array.isArray(t)){throw new Error("You must specify objects to search in")}var u;if(typeof d==="string"){u=d}if(d&&typeof d.searchFor==="string"){u=d.searchFor}if(u===undefined){throw new Error("You must specify search terms")}var a=parseInt(d.top,10);var n=parseInt(d.skip,10);if(r!==u){var l=e.compileSearchTerm(u);i=[];for(var h=0;h<t.length;h++){var b={};var o;for(var p=0;p<c.length;p++){o=undefined;try{o=t[h][c[p].field]}finally{}if(typeof o==="string"){var g=e.compileTestTerm(o);g.weight=c[p].weight;b[c[p].field]=g}}var m=s(l,b);if(m.score>-1){i.push({object:t[h],highlighted:m.highlighted,score:m.score})}}i=i.sort(function(d,u){return u.score-d.score});if(!f.debug){i.forEach(function(d){delete d.score})}r=u}var v;if(isNaN(a)&&!isNaN(n)){v=i.slice(n)}else if(!isNaN(a)&&isNaN(n)){v=i.slice(0,a)}else if(!isNaN(a)&&!isNaN(n)){v=i.slice(n,n+a)}else{v=i}return{totalCount:i.length,results:v}}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/container/ApplicationContainer", ["sap/base/Log","sap/base/security/encodeXML","sap/base/util/deepEqual","sap/base/util/uid","sap/base/util/UriParameters","sap/m/MessagePopover","sap/m/Text","sap/ui/core/Component","sap/ui/core/ComponentContainer","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/mvc/View","sap/ui/core/routing/History","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/ApplicationType","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/resources","sap/ushell/System","sap/ushell/User","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ui/core/Core","sap/ui/thirdparty/hasher","sap/ui/core/Configuration"],function(e,t,a,n,r,o,i,s,p,l,u,f,d,c,jQuery,g,m,h,y,v,C,I,b,_,A,P,S,E){"use strict";var x="sap.ushell.components.container.",w=x+"ApplicationContainer",U="sap.ushell.Container.dirtyState.",R="autoplay;battery;camera;display-capture;geolocation;gyroscope;magnetometer;microphone;midi;clipboard-write;clipboard-read;fullscreen;serial;",T,M,D,L=false,F=false,O=[],N=0,H=0,V;var j=["sap-ach","sap-fiori-id","sap-hide-intent-link","sap-priority","sap-tag","sap-ui-app-id-hint","sap-ui-debug","sap-ui-fl-control-variant-id","sap-ui-fl-max-layer","sap-ui-tech-hint","sap-ui2-tcode","sap-ui2-wd-app-id","sap-ui2-wd-conf-id","sap-ushell-cdm-site-url","sap-ushell-navmode","sap-ushell-next-navmode","sap-ushell-url","sap-app-origin-hint"];function W(e){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.isUrlSupported(e.url).done(function(){e.promise.resolve({allowed:true,id:e.id})}).fail(function(){e.promise.resolve({allowed:false,id:e.id})})})}function k(e){var t={asyncURLHandler:Ie.prototype._adaptIsUrlSupportedResultForMessagePopover};if(o&&o.setDefaultHandlers){o.setDefaultHandlers(t)}y.emit("StepDone",e.stepName)}y.once("initMessagePopover").do(k);T=new _.Map;function q(e){return T.get(e.getId())}function B(){return M}function J(e){var t=r.fromURL(e).mParams,a=t["sap-xapp-state"],n=t["sap-xapp-state-data"],o;delete t["sap-xapp-state"];delete t["sap-xapp-state-data"];o={startupParameters:t};if(n){o["sap-xapp-state"]=n}if(a){o["sap-xapp-state"]=a}return o}function K(e,t){return C.i18n.getText(e,t)}function z(){return new u({size:"2rem",src:"sap-icon://error",tooltip:Ie.prototype._getTranslatedText("an_error_has_occured")})}function G(t){var a=t.getAggregation("child"),n;if(a instanceof p){n=a.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");e.debug("unloading component "+n,null,w)}t.destroyAggregation("child")}function $(t,a,n){return new Promise(function(r){var o,i,l,u,d,c={},g,m;function h(e){e.setWidth(t.getWidth());e.setHeight(t.getHeight());e.addStyleClass("sapUShellApplicationContainer");t.setAggregation("child",e,true)}o=a.indexOf("?");if(o>=0){u=Ie.prototype._getParameterMap(a);c=u.startupParameters;a=a.slice(0,o)}if(a.slice(-1)!=="/"){a+="/"}if(/\.view\.(\w+)$/i.test(n)){l=/^SAPUI5=(?:([^/]+)\/)?([^/]+)\.view\.(\w+)$/i.exec(n);if(!l){e.error("Invalid SAPUI5 URL",n,w);r(Ie.prototype._createErrorControl());return}d=l[1];g=l[2];m=l[3].toUpperCase();if(d){g=d+"."+g}else{i=g.lastIndexOf(".");if(i<1){e.error("Missing namespace",n,w);return Ie.prototype._createErrorControl()}d=g.slice(0,i)}}else{d=n.replace(/^SAPUI5=/,"")}var y={};var v=d.replace(/\./g,"/");y[d]=a+v;sap.ui.loader.config({paths:y});Ie.prototype._destroyChild(t);if(g){if(t.getApplicationConfiguration()){c.config=t.getApplicationConfiguration()}f.create({id:t.getId()+"-content",type:m,viewData:c||{},viewName:g}).then(function(e){t.fireEvent("applicationConfiguration");h(e);r(e)})}else{e.debug("loading component "+d,null,w);var C=u?{startupParameters:u.startupParameters}:{startupParameters:{}};if(u&&u["sap-xapp-state-data"]){C["sap-xapp-state"]=u["sap-xapp-state-data"]}if(u&&u["sap-xapp-state"]){C["sap-xapp-state"]=u["sap-xapp-state"]}if(t.getApplicationConfiguration()){C.config=t.getApplicationConfiguration()}s.create({id:t.getId()+"-component",componentData:C,name:d}).then(function(e){t.fireEvent("applicationConfiguration",{configuration:e.getMetadata().getConfig()});var a=new p({id:t.getId()+"-content",component:e});h(a);r(a)})}})}function Q(e,t){setTimeout(function(){P.getEventBus().publish("sap.ushell",e,t)},0)}function X(t,a,n){var r=this,o,i={oControl:undefined,oPromise:undefined},l,u,f,d={startupParameters:{}},c,g=t.getComponentHandle(),m,h;function y(e){t.fireEvent("applicationConfiguration",{configuration:e.getMetadata().getConfig()});u=new p({id:t.getId()+"-content",component:e});u.setHeight(t.getHeight());u.setWidth(t.getWidth());u.addStyleClass("sapUShellApplicationContainer");t._disableRouterEventHandler=Ie.prototype._disableRouter.bind(r,e);P.getEventBus().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",t._disableRouterEventHandler);t.setAggregation("child",u,true);sap.ushell.Container.getServiceAsync("PluginManager").then(function(t){m=t.getPluginLoadingPromise("RendererExtensions");h=m&&m.state();if(h==="pending"){m.done(function(){Ie.prototype._publishExternalEvent("appComponentLoaded",{component:e})}).fail(function(){Ie.prototype._publishExternalEvent("appComponentLoaded",{component:e})})}if(h==="resolved"||h==="rejected"){Ie.prototype._publishExternalEvent("appComponentLoaded",{component:e})}});return u}l=a.indexOf("?");if(l>=0){f=Ie.prototype._getParameterMap(a);d={startupParameters:f.startupParameters};if(f["sap-xapp-state-data"]){d["sap-xapp-state"]=f["sap-xapp-state-data"]}if(f["sap-xapp-state"]){d["sap-xapp-state"]=f["sap-xapp-state"]}a=a.slice(0,l)}if(t.getApplicationConfiguration()){d.config=t.getApplicationConfiguration()}if(a.slice(-1)!=="/"){a+="/"}Ie.prototype._destroyChild(t);c={id:t.getId()+"-component",name:n,componentData:d};e.debug("Creating component instance for "+n,JSON.stringify(c),w);P.getEventBus().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:n});if(g){var v=g.getInstance(c);i.oControl=y(v)}else{o=new jQuery.Deferred;var C={};var I=n.replace(/\./g,"/");C[I]=a;sap.ui.loader.config({paths:C});e.error("No component handle available for '"+n+"'; fallback to component.load()",null,w);s.create({id:t.getId()+"-component",name:n,manifest:false,componentData:d}).then(function(e){o.resolve(y(e))});i.oPromise=o.promise()}return i}function Y(t){var a;if(t instanceof s&&typeof t.getRouter==="function"){a=t.getRouter();if(a&&typeof a.stop==="function"){e.info("router stopped for instance "+t.getId());a.stop()}}}function Z(e){var t=document.createElement("a"),a=r.fromURL(e).get("sap-client"),n;t.href=e;n=t.protocol+"//"+t.host;return new I({alias:a?n+"?sap-client="+a:n,baseUrl:n,client:a||undefined,platform:"abap"})}function ee(e,t){var a=false,n=e.getDomRef(),r,o;if(e.getIframeWithPost()===true&&n&&n.getAttribute&&n.getAttribute("sap-iframe-app")=="true"){n=jQuery("#"+n.getAttribute("id")+"-iframe")[0]}if(n){r=g(e._getIFrameUrl(n)||window.location&&window.location.href||"");o=r.protocol()+"://"+r.host();a=t.source===n.contentWindow||t.origin===o}return a}function te(t,a,r){var o=JSON.stringify({type:"request",service:a,request_id:n(),body:{}});e.debug("Sending post message request to origin ' "+r+"': "+o,null,"sap.ushell.components.container.ApplicationContainer");t.postMessage(o,r)}function ae(){var e=this.getDomRef();if(!e||e.tagName!=="IFRAME"){if(this.getIframeWithPost()===true&&e&&e.getAttribute&&e.getAttribute("sap-iframe-app")=="true"){return jQuery("#"+e.getAttribute("id")+"-iframe")[0]}return null}return e}function ne(e){var t;if(e===undefined){e=this._getIFrame()}if(this.getIframeWithPost()===true){t=jQuery("#"+e.getAttribute("id").replace("-iframe","-form"))[0].action;if(t===undefined&&(new g).query(true).hasOwnProperty("sap-isolation-enabled")){t=e.src}}else{t=e.src}return t}function re(t,a){var n=t&&t.getUi5ComponentName&&t.getUi5ComponentName(),r=a.data,o=typeof r==="string"&&r.indexOf("sap.ushell.appRuntime.iframeIsValid")>0;if(t&&!t.getActive()&&o!==true){e.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(r)+"' on inactive container '"+t.getId()+"'","Only active containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return}if(typeof n==="string"){e.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(r)+"' on container of UI5 application '"+n+"'","Only non UI5 application containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return}var i={bPluginsStatusChecked:L,bKeepMessagesForPlugins:F,bApiRegistered:true};D(t,a,i);Ie.prototype._handlePostMessagesForPluginsPostLoading(t,a,i)}function oe(t,a,n){var r,o;if(n.bApiRegistered!==false){return}sap.ushell.Container.getServiceAsync("PluginManager").then(function(n){if(L===false){L=true;r=n.getPluginLoadingPromise("RendererExtensions");o=r&&r.state();if(o==="pending"){F=true;r.always(function(){var t;F=false;e.debug("Processing post messages queue after 'RendererExtensions' plugins loaded, queue size is: "+O.length,null,"sap.ushell.components.container.ApplicationContainer");for(var a=0;a<O.length;a++){t=O[a];try{Ie.prototype._handleMessageEvent.call(t.that,t.oContainer,t.oMessage)}catch(t){e.error(t.message||t,null,"sap.ushell.components.container.ApplicationContainer")}}O=[]})}}if(F===true){O.push({index:N++,that:this,oContainer:t,oMessage:a})}})}function ie(){L=false;F=false;O=[];N=0}function se(e,t){var a=e._getIFrame(),n=e.getApplicationType();if(_.isApplicationTypeEmbeddedInIframe(e.getApplicationType(n))&&a){var r=new g(e._getIFrameUrl(a));var o=r.protocol()+"://"+r.host();a.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),o);t.preventDefault()}}function pe(e,t,a){e.openStart("div",t).accessibilityState(t).class("sapUShellApplicationContainer").style("height",t.getHeight()).style("width",t.getWidth()).openEnd();if(a){e.renderControl(a)}e.close("div")}function le(e,t,a,n){if(n===undefined){n=false}if(_.isApplicationTypeEmbeddedInIframe(t)||e&&_.isApplicationTypeEmbeddedInIframe(e.getFrameworkId())){var r=e&&e.getTargetNavigationMode();a=Ie.prototype._adjustNwbcUrl(a,t,r,e&&e.getIsStateful(),n);if(e&&n===false){_.localStorageSetItem(e.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL)}}return a}function ue(e,t,a,n,o){if(o===undefined){o=false}var i,s=function(){var e=_.getParameterValueBoolean("sap-accessibility");if(e!==undefined){return e}return sap.ushell.Container.getUser().getAccessibilityMode()},p=function(){var t=r.fromURL(e)||{mParams:{}};if(t.mParams["sap-theme"]===undefined){return sap.ushell.Container.getUser().getTheme(b.prototype.constants.themeFormat.NWBC)}return undefined},l=function(){var t=false,a=r.fromURL(e)||{mParams:{}};t=E.getStatistics()&&a.mParams["sap-statistics"]===undefined;return t},u=function(){var e=S&&S.getHash(),t="",a;if(e&&e.length>0&&e.indexOf("sap-iapp-state=")>0){a=/(?:sap-iapp-state=)([^&/]+)/.exec(e);if(a&&a.length===2){t=a[1]}}return t},f=function(){var e="";var t=!!jQuery("body.sapUiSizeCompact").length;var a=!!jQuery("body.sapUiSizeCozy").length;if(t===true){e="0"}else if(a){e="1"}return e};e+=e.indexOf("?")>=0?"&":"?";e+="sap-ie=edge";i=p();if(i){e+=e.indexOf("?")>=0?"&":"?";e+="sap-theme="+encodeURIComponent(i)}if(s()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-accessibility=X"}if(l()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-statistics=true"}var d=f();if(d&&d.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-touch="+d}if(o===false){if(a){e+=e.indexOf("?")>=0?"&":"?";e+="sap-target-navmode="+encodeURIComponent(a)}if(t==="TR"||t==="GUI"){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=2"}else if(n){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=1"}var c=u();if(c&&c.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-iapp-state="+c}var g=0;if(h.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){g=h.last("/core/shell/sessionTimeoutIntervalInMinutes")}e+=e.indexOf("?")>=0?"&":"?";e+="sap-ushell-timeout="+g;return _.appendSapShellParam(e,t)}return e}function fe(e,t,a,n){var r=t.getAggregation("child"),o,i;if(!r||t._bRecreateChild){i=Ie.prototype._createUi5Component(t,a,n);if(i.oControl!==undefined){t._bRecreateChild=false;Ie.prototype._renderControlInDiv(e,t,i.oControl)}else{t.oDeferredControlCreation=new jQuery.Deferred;Ie.prototype._renderControlInDiv(e,t);i.oPromise.then(function(e){t._bRecreateChild=false;o=P.createRenderManager();o.renderControl(e);o.flush(jQuery("#"+t.getId())[0]);o.destroy();t.oDeferredControlCreation.resolve()})}}else{Ie.prototype._renderControlInDiv(e,t,r)}}function de(e,t,n){var r=e.getProperty(t);if(a(r,n)){return}e.setProperty(t,n);e._bRecreateChild=true}function ce(t,a,n,o,i){var s,p=true,l=false;localStorage.removeItem(a.globalDirtyStorageKey);a.oDeferredControlCreation=undefined;if(i&&i.indexOf("SAPUI5.Component=")===0&&n===m.URL.type){fe(t,a,o,i.replace(/^SAPUI5\.Component=/,""));return}if(i&&i.indexOf("SAPUI5=")===0&&n===m.URL.type){Ie.prototype._renderControlInDiv(t,a,undefined,"open");a.oDeferredControlCreation=new jQuery.Deferred;Ie.prototype._createUi5View(a,o,i).then(function(e){var n,r=jQuery("#"+a.getId());if(r&&r.length>0){n=P.createRenderManager();n.renderControl(e);n.flush(jQuery("#"+a.getId())[0]);n.destroy()}else{t.renderControl(e)}a.oDeferredControlCreation.resolve()});Ie.prototype._renderControlInDiv(t,a,undefined,"close");return}e.debug('Not resolved as "SAPUI5.Component=" or "SAPUI5=" , '+"will attempt to load into iframe "+i);if(!a.getActive()){e.debug("Skipping rendering container iframe","Container '"+a.getId()+"' is inactive");return}try{o=a.getFrameSource(n,o)}catch(n){e.error(n.message||n,null,w);a.fireEvent("applicationConfiguration");t.renderControl(Ie.prototype._createErrorControl());return}if(sap.ushell.Container){s=Ie.prototype._getLogoutHandler(a);if(!s){if(_.isApplicationTypeEmbeddedInIframe(n)){s=Ie.prototype._logout.bind(null,a);T.put(a.getId(),s);sap.ushell.Container.attachLogoutEvent(s);sap.ushell.Container.addRemoteSystem(Ie.prototype._createSystemForUrl(o))}}else if(!_.isApplicationTypeEmbeddedInIframe(n)){sap.ushell.Container.detachLogoutEvent(s);T.remove(a.getId())}}o=Ie.prototype._checkNwbcUrlAdjustment(a,n,o);var u=r.fromURL(document.URL);if(u.has("sap-iframe-params")){var f=u.get("sap-iframe-params")||"",d=f.split(",");if(d.length>0){var c=new g(o);d.forEach(function(e){if(e&&e.length>0){if(u.has(e)){c.addQuery(e,u.get(e))}}});o=c.toString()}}if(V){V.then(function(e){e.addAcceptedOrigin(new g(o).origin())})}if(n==="TR"){a.setProperty("iframePostAllParams",true,true)}if(u.get("sap-post")==="false"){p=false}else if(window.QUnit!==undefined){p=a.getIframeWithPost()}if(p===true&&a.getOpenWithPostByAppParam()===false){p=false}if(u.get("sap-post")==="true"){l=true}if(p===true&&(n==="NWBC"||n==="TR"||n==="WDA"||n==="WCF")||l===true){a.setProperty("iframeWithPost",true,true);a.oDeferredRenderer=new jQuery.Deferred;o=Ie.prototype._filterURLParams(o);var y=[];var v=Ie.prototype._getParamKeys(o,y);Ie.prototype._generateRootElementForIFrame(t,a,true);if(v.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.getAppStateData(v).then(function(e){var n;var r=jQuery("#"+a.getId());if(r.length>0){n=P.createRenderManager();Ie.prototype._buildHTMLElements(n,a,e,y,o);n.flush(r[0]);n.destroy()}else{Ie.prototype._buildHTMLElements(t,a,e,y,o)}setTimeout(a.oDeferredRenderer.resolve,0)},function(e){Ie.prototype._buildHTMLElements(t,a,undefined,y,o);setTimeout(a.oDeferredRenderer.resolve,0)})})}else{Ie.prototype._buildHTMLElements(t,a,undefined,y,o);setTimeout(a.oDeferredRenderer.resolve,0)}Ie.prototype._generateRootElementForIFrame(t,a,false);return}if(a.getFrameworkId&&a.getFrameworkId()==="UI5"&&a.getIsStateful&&a.getIsStateful()===true){a.setProperty("isIframeBusy",true,true)}a.fireEvent("applicationConfiguration");t.openStart("iframe",a).accessibilityState(a).attr("src",o).attr("title",C.i18n.getText("AppilcationContainer.IframeTitle")).attr("sap-iframe-idx",++H).class("sapUShellApplicationContainer").style("height",a.getHeight()).style("width",a.getWidth());if(h.last("/core/shell/enableFeaturePolicyInIframes")===true){t.attr("allow",R)}t.openEnd().close("iframe")}function ge(e){var t=new g(e);t=t.removeSearch(j);return t.toString()}function me(t,a){var n=[],r;if(t.indexOf("sap-intent-param=")>0){r=/(?:sap-intent-param=)([^&/]+)/.exec(t);if(r&&r.length===2){n.push([r[1]]);a.push("sap-intent-param-data")}}if(t.indexOf("sap-xapp-state=")>0){r=/(?:sap-xapp-state=)([^&/]+)/.exec(t);if(r&&r.length===2){n.push([r[1]]);a.push("sap-xapp-state-data")}}else if(t.indexOf("sap-xapp-state-data=")>0){r=/(?:sap-xapp-state-data=)([^&/]+)/.exec(t);if(r&&r.length===2){try{var o=decodeURIComponent([r[1]]);n.push([o]);a.push("sap-xapp-state-data")}catch(t){e.error("Invalid encoding of the sap-xapp-state-data parameter in the url: ",r[1])}}}if(t.indexOf("sap-iapp-state=")>0){r=/(?:sap-iapp-state=)([^&/]+)/.exec(t);if(r&&r.length===2){n.push([r[1]]);a.push("sap-iapp-state-data")}}return n}function he(e,t,a,n,o){var i=t.getId()+"-form",s="",p=false;if(a===undefined){a=[]}a.push([sap.ushell.Container.getFLPUrl(true)]);n.push("sap-flp-url");a.push([t.getSystemAlias()]);n.push("system-alias");var l="";var u={};n.forEach(function(e,t){if(a[t][0]){u[e]=a[t][0]}});var f=o;l=JSON.stringify(u);var d={};if(t.getIframePostAllParams()===true){d=r.fromURL(o);s=ye(t,d,false);if(s!==""){o=ve(o,d)}}t.fireEvent("applicationConfiguration");e.openStart("form").attr("id",i).attr("method","post").attr("name",i).attr("target",t.getId()+"-iframe").attr("action",o).style("display","none").openEnd();e.voidStart("input").attr("name","sap-flp-params").attr("value",l).voidEnd();if(t.getIframePostAllParams()===true){ye(t,d,true,e)}e.close("form");var c=t.sId;if(t.hasStyleClass("sapUShellApplicationContainerIframeHidden")){p=true;t.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false)}t.sId+="-iframe";e.openStart("iframe",t).attr("name",t.getId()).accessibilityState(t).attr("sap-orig-src",f).attr("title",C.i18n.getText("AppilcationContainer.IframeTitle")).attr("sap-iframe-idx",++H).class("sapUShellApplicationContainer").style("height",t.getHeight()).style("width",t.getWidth());if(h.last("/core/shell/enableFeaturePolicyInIframes")===true){e.attr("allow",R.replaceAll(";"," "+new g(o).origin()+";"))}e.openEnd().close("iframe");t.sId=c;if(p){t.toggleStyleClass("sapUShellApplicationContainerIframeHidden",true)}}function ye(e,t,a,n){var r="";var o="";if(t.has("sap-iframe-hint")){r=t.get("sap-iframe-hint")}var i=t.mParams;if(e.getApplicationType()==="TR"||r==="GUI"){var s,p;for(s in i){if(s==="sap-iframe-hint"||s==="sap-keep-alive"){continue}p=i[s][0];if(a===true){n.voidStart("input").attr("name",s).attr("value",p).voidEnd()}else{o+="*"}}}return o}function ve(e,t){var a=t.get("sap-iframe-hint"),n=t.get("sap-keep-alive"),r=new g(e).query("");if(typeof a==="string"){r.addSearch("sap-iframe-hint",a)}if(typeof n==="string"){r.addSearch("sap-keep-alive",n)}return r.toString()}function Ce(e,t,a){if(a){e.openStart("div",t).attr("sap-iframe-app","true").class("sapUShellApplicationContainer").style("height",t.getHeight()).style("width",t.getWidth()).openEnd()}else{e.close("div")}}var Ie=l.extend(w,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationConfiguration:{type:"object"},applicationType:{defaultValue:"URL",type:x+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},navigationMode:{defaultValue:"",type:"string"},targetNavigationMode:{defaultValue:"",type:"string"},text:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},active:{defaultValue:true,type:"boolean"},"sap-system":{type:"string"},applicationDependencies:{type:"object"},componentHandle:{type:"object"},ui5ComponentName:{type:"string"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},shellUIService:{type:"object"},appIsolationService:{type:"object"},reservedParameters:{type:"object"},coreResourcesFullyLoaded:{type:"boolean"},isStateful:{defaultValue:false,type:"boolean"},iframeHandlers:{defaultValue:"",type:"string"},openWithPostByAppParam:{defaultValue:true,type:"boolean"},iframeWithPost:{defaultValue:false,type:"boolean"},beforeAppCloseEvent:{type:"object"},extendedInfo:{type:"object"},systemAlias:{defaultValue:"",type:"string"},iframePostAllParams:{defaultValue:false,type:"boolean"},isKeepAlive:{defaultValue:false,type:"boolean"},frameworkId:{defaultValue:"",type:"string"},iframeReusedForApp:{defaultValue:false,type:"boolean"},isIframeValidTime:{defaultValue:{time:0},type:"object"},isIframeBusy:{defaultValue:false,type:"boolean"},isInvalidIframe:{defaultValue:false,type:"boolean"}},events:{applicationConfiguration:{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell",designtime:"sap/ushell/designtime/ApplicationContainer.designtime"},exit:function(){var e,t=this;if(sap.ushell.Container){e=Ie.prototype._getLogoutHandler(t);if(e){sap.ushell.Container.detachLogoutEvent(e);T.remove(t.getId())}}localStorage.removeItem(t.globalDirtyStorageKey);if(t._unloadEventListener){removeEventListener("unload",t._unloadEventListener)}if(t._disableRouterEventHandler){P.getEventBus().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",t._disableRouterEventHandler)}if(t._storageEventListener){removeEventListener("storage",t._storageEventListener)}if(t._messageEventListener){removeEventListener("message",t._messageEventListener)}Ie.prototype._destroyChild(t);if(l.exit){l.exit.apply(t)}},setHandleMessageEvent:function(e){D=e},init:function(){var t=this;t.globalDirtyStorageKey=U+n();t._unloadEventListener=t.exit.bind(t);addEventListener("unload",t._unloadEventListener);t._storageEventListener=function(a){var n=t.getApplicationType();if(a.key===t.globalDirtyStorageKey&&a.newValue===sap.ushell.Container.DirtyState.PENDING&&_.isApplicationTypeEmbeddedInIframe(n)){var r=t._getIFrame();if(r){e.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");var o=new g(t._getIFrameUrl(r));var i=o.protocol()+"://"+o.host();r.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),i)}}};addEventListener("storage",t._storageEventListener);t._messageEventListener=Ie.prototype._handleMessageEvent.bind(null,t);addEventListener("message",t._messageEventListener);if(!V&&sap.ushell.Container&&sap.ushell.Container.getServiceAsync){V=sap.ushell.Container.getServiceAsync("MessageBroker")}},onAfterRendering:function(){var e=this;this.rerender=function(){};if(c.os.ios&&this.$().prop("tagName")==="IFRAME"){this.$().parent().css("overflow","auto")}if(this.oDeferredRenderer){this.oDeferredRenderer.done(function(){var t=document.getElementById(e.getId()+"-form");if(t){t.submit()}})}},renderer:{apiVersion:2,render:function(t,a){var n=a.getApplication(),r=a.launchpadData,o;if(!a.getVisible()){Ie.prototype._renderControlInDiv(t,a);return}if(a.bTestControl){Ie.prototype._renderControlInDiv(t,a,a.oTestControl)}else if(a.error){delete a.error;Ie.prototype._renderControlInDiv(t,a,Ie.prototype._createErrorControl())}else if(!n){Ie.prototype._render(t,a,a.getApplicationType(),a.getUrl(),a.getAdditionalInformation())}else if(!n.isResolvable()){Ie.prototype._render(t,a,n.getType(),n.getUrl(),"")}else if(r){Ie.prototype._render(t,a,r.applicationType,r.Absolute.url.replace(/\?$/,""),r.applicationData)}else{e.debug("Resolving "+n.getUrl(),null,w);n.resolve(function(t){e.debug("Resolved "+n.getUrl(),JSON.stringify(t),w);a.launchpadData=t;Ie.prototype._destroyChild(a)},function(e){var t=n.getMenu().getDefaultErrorHandler();if(t){t(e)}Ie.prototype._destroyChild(a);a.error=e});o=new i({text:Ie.prototype._getTranslatedText("loading",[n.getText()])});Ie.prototype._destroyChild(a);a.setAggregation("child",o);Ie.prototype._renderControlInDiv(t,a,o)}}}});Ie.prototype.getFrameSource=function(e,t){if(!Object.prototype.hasOwnProperty.call(m.enum,e)){throw new Error("Illegal application type: "+e)}return t};Ie.prototype.setUrl=function(e){de(this,"url",e)};Ie.prototype.setAdditionalInformation=function(e){de(this,"additionalInformation",e)};Ie.prototype.setApplicationType=function(e){de(this,"applicationType",e)};Ie.prototype.createPostMessageRequest=function(e,t){var a=Date.now().toString();return{type:"request",request_id:a,service:e,body:t}};Ie.prototype.setNewTRApplicationContext=function(e){var t=new jQuery.Deferred,a=this._getIFrame(),n,r,o=this;if(!a){return t.promise().reject({message:"Expected an existing TR application application frame but found none."})}function i(){if(r){r["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);r["system-alias"]=o.getSystemAlias();n["sap-flp-params"]=r}var e=o.createPostMessageRequest("sap.its.startService",n);o.postMessageToIframe(e,a,true).then(function(){t.resolve()}).catch(function(e){t.reject({eventData:e,message:"Failed to change application context."})})}e=_.appendSapShellParam(e);e=Ie.prototype._filterURLParams(e);n={url:e};if(this.getIframeWithPost&&this.getIframeWithPost()===true){var s=[];var p=Ie.prototype._getParamKeys(e,s);if(p.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.getAppStateData(p).then(function(e){r={};s.forEach(function(t,a){if(e[a][0]){r[t]=e[a][0]}});i()},function(e){i()})})}else{r={};i()}}else{i()}return t.promise()};Ie.prototype.postMessageToIframe=function(t,a,n){var r=this;var o=t.request_id;return new Promise(function(i,s){function p(a){var n={};try{if(typeof a.data==="string"&&a.data.indexOf("{")===0){try{n=JSON.parse(a.data)}catch(e){n={}}}else{return}if(!n.request_id||o!==n.request_id){return}if(n.status==="success"){i(n)}else{s(n)}window.removeEventListener("message",p)}catch(n){i();e.warning("Obtained bad response from framework in response to message "+t.request_id);e.debug("Underlying framework returned invalid response data: '"+a.data+"'")}}var l=JSON.stringify(t);e.debug("Sending postMessage "+l+" to application container '"+r.getId()+"'");var u=new g(r._getIFrameUrl(a));var f=u.protocol()+"://"+u.host();if(n){window.addEventListener("message",p,false);a.contentWindow.postMessage(l,f)}else{a.contentWindow.postMessage(l,f);i()}})};Ie.prototype.postMessageToCurrentIframe=function(e,t){if(t===undefined){t=false}var a=this._getIFrame();if(!a){if(t){return Promise.reject({message:"Expected opened iframe not found."})}return}return this.postMessageToIframe(e,a,t)};Ie.prototype.setNewApplicationContext=function(e,t){var a=this;var n=this["setNew"+e+"ApplicationContext"];if(!n){return Promise.reject({message:"Unsupported application type"})}var r=this._getIFrame();if(!r){return Promise.reject({message:"Expected an existing TR application application frame but found none."})}var o=this.createPostMessageRequest("sap.gui.triggerCloseSessionImmediately",{});return this.postMessageToIframe(o,r,true).then(function(){return n.call(a,t)},function(e){return Promise.reject({eventData:e,message:"Failed to change application context."})})};Ie.prototype.onApplicationOpened=function(e){var t=this.getIsStateful();if(!t){return Promise.resolve()}var a=this.getApplicationType();if(a==="TR"&&e!=="TR"){var n=this._getIFrame();if(!n){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."})}var r=this.createPostMessageRequest("sap.gui.triggerCloseSession",{});return this.postMessageToIframe(r,n,false).catch(function(e){return Promise.reject({eventData:e,message:"Failed to change application context."})})}return Promise.resolve()};Ie.prototype.postMessageRequest=function(e,t){var a=this._getIFrame();if(!a){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."})}var n=this.createPostMessageRequest(e,t||{});return this.postMessageToIframe(n,a,false).catch(function(e){return Promise.reject({eventData:e,message:"Failed to post message."})})};Ie.prototype.sendBeforeAppCloseEvent=function(){var e=this.getBeforeAppCloseEvent&&this.getBeforeAppCloseEvent(),t;if(e&&e.enabled&&e.enabled===true){t=this.createPostMessageRequest("sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent",e.params);return this.postMessageToIframe(t,this._getIFrame(),true)}return undefined};Ie.prototype.getDeffedControlCreation=function(e){return this.oDeferredControlCreation?this.oDeferredControlCreation.promise():jQuery.Deferred().resolve().promise()};Ie.prototype._getCommunicationHandlers=B;Ie.prototype._adaptIsUrlSupportedResultForMessagePopover=W;Ie.prototype._getLogoutHandler=q;Ie.prototype._getParameterMap=J;Ie.prototype._getTranslatedText=K;Ie.prototype._createErrorControl=z;Ie.prototype._destroyChild=G;Ie.prototype._createUi5View=$;Ie.prototype._publishExternalEvent=Q;Ie.prototype._createUi5Component=X;Ie.prototype._disableRouter=Y;Ie.prototype._createSystemForUrl=Z;Ie.prototype._isTrustedPostMessageSource=ee;Ie.prototype._handleMessageEvent=re;Ie.prototype._logout=se;Ie.prototype._renderControlInDiv=pe;Ie.prototype._checkNwbcUrlAdjustment=le;Ie.prototype._adjustNwbcUrl=ue;Ie.prototype._render=ce;Ie.prototype._getParamKeys=me;Ie.prototype._buildHTMLElements=he;Ie.prototype._buildHTMLForAllPostParams=ye;Ie.prototype._generateRootElementForIFrame=Ce;Ie.prototype._backButtonPressedCallback=te;Ie.prototype._getIFrame=ae;Ie.prototype._getIFrameUrl=ne;Ie.prototype._filterURLParams=ge;Ie.prototype._resetPluginsLoadIndications=ie;Ie.prototype._handlePostMessagesForPluginsPostLoading=oe;return Ie},true);
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/contentFinder/Component", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ui/core/UIComponent","sap/ushell/components/contentFinder/model/GraphQLModel"],function(t,e,i,a,r){"use strict";var s={widgetGallery:"widgetGallery",appSearchTiles:"appSearch_tiles",appSearchCards:"appSearch_cards"};var n={appSearch_tiles:["sap.ushell.StaticAppLauncher","sap.ushell.DynamicAppLauncher"],appSearch_cards:["sap.card"]};var o={navigationTargets:s,activeNavigationTarget:s.widgetGallery,restrictedMode:false,widgetGallery:{widgetGroups:[]},appSearch:{growingThreshold:30,visualizationsLoaded:false,selectedAppCount:0,hasSelectables:true,currentSelectedTreeNode:"",searchTerm:"",filteredAppCount:0,showSelectedPressed:false,originalVisualizations:{cards:[],tiles:[]},visualizations:{cards:[],tiles:[]},totalCount:0,originalRestrictedVisualizations:[],restrictedVisualizations:[]}};return a.extend("sap.ushell.components.contentFinder.Component",{metadata:{manifest:"json",library:"sap.ushell"},logComponent:"sap.ushell.components.ContentFinder.Component",init:function(){a.prototype.init.apply(this,arguments);this.oResourceBundle=this.getModel("i18n").getResourceBundle();this.oRootView=this.getRootControl();this.aRegisteredEvents=[];var t=new r;t.setSizeLimit(Infinity);this.setModel(t);this._initializeModel();this._oRootControlLoadedPromise=this.rootControlLoaded().then(function(){this.oNavContainer=this.oRootView.byId("contentFinderNavContainer");this.oContentFinderWidgetGalleryPage=this.oRootView.byId("contentFinderWidgetGalleryPage");this.oContentFinderAppSearchPage=this.oRootView.byId("contentFinderAppSearchPage");this.oDialog=this.oRootView.byId("contentFinderDialog")}.bind(this))},show:function(t){if(t&&!Object.values(s).includes(t)){return Promise.reject(new Error("Invalid navigation target provided. Could not open ContentFinder dialog."))}t=t||s.widgetGallery;return this.navigate(t).then(function(){this.oDialog.open()}.bind(this))},setWidgetGroups:function(t){this.getModel().setProperty("/widgetGallery/widgetGroups",t)},queryVisualizations:function(t,e){var i=this.getModel();var a=i.getProperty("/activeNavigationTarget");var r=n[a]||[];if(!this._bLoading){this._bLoading=true;i.setProperty("/appSearch/visualizationsLoaded",false);this.fireEvent("visualizationFilterApplied",{pagination:{skip:t,top:i.getProperty("/appSearch/growingThreshold")},types:r,search:e||null})}},setVisualizationData:function(t){var a=i.get("Visualizations.nodes",t)||[];var r=i.get("Visualizations.totalCount",t)||0;var s=this.getModel();var n=this._prepareTiles(a);var o=this._prepareCards(a);s.setProperty("/appSearch/originalVisualizations/tiles",e([],n));s.setProperty("/appSearch/originalVisualizations/cards",e([],o));s.setProperty("/appSearch/visualizations/tiles",e([],n));s.setProperty("/appSearch/visualizations/cards",e([],o));s.setProperty("/appSearch/totalCount",r);s.setProperty("/appSearch/visualizationsLoaded",true);this._updateVisualizationsRestricted();this._bLoading=false},setVisualizationDataPaginated:function(t){var a=i.get("Visualizations.nodes",t)||[];var r=i.get("Visualizations.totalCount",t)||0;var s=this.getModel();var n=this._prepareTiles(a);var o=this._prepareCards(a);var l=s.getProperty("/appSearch/originalVisualizations/tiles");var p=s.getProperty("/appSearch/originalVisualizations/cards");var c=s.getProperty("/appSearch/visualizations/tiles");var d=s.getProperty("/appSearch/visualizations/cards");s.setProperty("/appSearch/originalVisualizations/tiles",l.concat(e([],n)));s.setProperty("/appSearch/originalVisualizations/cards",p.concat(e([],o)));s.setProperty("/appSearch/visualizations/tiles",c.concat(e([],n)));s.setProperty("/appSearch/visualizations/cards",d.concat(e([],o)));s.setProperty("/appSearch/totalCount",r);s.setProperty("/appSearch/visualizationsLoaded",true);this._updateVisualizationsRestricted();this._bLoading=false},setRestrictedMode:function(t){this.getModel().setProperty("/restrictedMode",!!t)},setContextData:function(t){var a=i.get("restrictedVisualizations",t)||[];var r=this.getModel();r.setProperty("/appSearch/originalRestrictedVisualizations",e([],a));r.setProperty("/appSearch/restrictedVisualizations",e([],a));this._updateVisualizationsRestricted()},getNavContainer:function(){return this._oRootControlLoadedPromise.then(function(){return this.oNavContainer}.bind(this))},getSelectedAppBoxes:function(){var t=this.getModel().getProperty("/appSearch/visualizations");var e=[];Object.values(t).forEach(function(t){var i=t.filter(function(t){return t.selected});e=e.concat(i)});return e},addVisualizations:function(){var t=this.getSelectedAppBoxes();if(t.length>0){this.fireEvent("visualizationsAdded",{visualizations:t})}},attachContentFinderClosed:function(t,e){this.aRegisteredEvents.push({id:"contentFinderClosed",callback:t,listener:e});this.attachEventOnce("contentFinderClosed",t,e);return this},attachWidgetSelected:function(t,e,i){this.aRegisteredEvents.push({id:"widgetSelected",callback:e,listener:i});this.attachEventOnce("widgetSelected",t,e,i);return this},attachVisualizationsAdded:function(t,e,i){this.aRegisteredEvents.push({id:"visualizationsAdded",callback:e,listener:i});this.attachEventOnce("visualizationsAdded",t,e,i);return this},attachVisualizationFilterApplied:function(t,e,i){this.aRegisteredEvents.push({id:"visualizationFilterApplied",callback:e,listener:i});this.attachEvent("visualizationFilterApplied",t,e,i);return this},resetAppSearch:function(){var t=this.getModel().getData();var i=e({},o.appSearch);i.originalVisualizations=e({},t.appSearch.originalVisualizations);i.originalRestrictedVisualizations=[].concat(t.appSearch.originalRestrictedVisualizations);i.visualizations=e({},t.appSearch.originalVisualizations);i.restrictedVisualizations=[].concat(t.appSearch.originalRestrictedVisualizations);t.appSearch=i;this.getModel().setData(t)},navigate:function(t){var e=this.getModel();e.setProperty("/activeNavigationTarget",t);if(t===s.appSearchTiles||t===s.appSearchCards){e.setProperty("/appSearch/originalVisualizations/tiles",[]);e.setProperty("/appSearch/originalVisualizations/cards",[]);e.setProperty("/appSearch/visualizations/tiles",[]);e.setProperty("/appSearch/visualizations/cards",[]);this._bLoading=false;this.queryVisualizations(0);return this.getNavContainer().then(function(t){t.to(this.oContentFinderAppSearchPage)}.bind(this))}return this.getNavContainer().then(function(t){t.to(this.oContentFinderWidgetGalleryPage)}.bind(this))},_initializeModel:function(){this.getModel().setData(e({},o))},_prepareTiles:function(e){var a=e.filter(function(t){return["sap.ushell.StaticAppLauncher","sap.ushell.DynamicAppLauncher"].indexOf(t.Type)>-1});return a.map(function(e){if(!e.Descriptor){t.error("No Descriptor available. Cannot load this tile!",null,this.logComponent);return}var a=e.Descriptor["sap.app"];var r=e.Descriptor["sap.fiori"];var s="";if(r){s=r.registrationIds[0]}else if(a&&a.hasOwnProperty("id")){s=a.id}return{id:e.Id,appId:s,icon:i.get("icons.icon",e.Descriptor["sap.ui"])||"",info:a&&a.info||"",launchUrl:e.Descriptor["sap.flp"]&&e.Descriptor["sap.flp"].target||"",subtitle:a&&a.subTitle||"",title:a&&a.title||"",type:e.Type,dataHelpId:e.Id,vizData:e,selected:false,added:false}}.bind(this))},_prepareCards:function(e){var a=e.filter(function(t){return t.Type==="sap.card"});return a.map(function(e){if(!e.Descriptor){t.error("No Descriptor available. Cannot load this card!",null,this.logComponent);return}var a=e.Descriptor["sap.app"];var r=a&&a.id||"";return{id:e.Id,appId:r,icon:i.get("icons.icon",e.Descriptor["sap.ui"])||"",info:a&&a.info||"",subtitle:a&&a.subTitle||"",title:a&&a.title||"",type:e.Type,manifest:e.Descriptor,dataHelpId:e.Id,vizData:e}}.bind(this))},_updateVisualizationsRestricted:function(){var t=this.getModel();var e=t.getProperty("/appSearch/restrictedVisualizations");var i=t.getProperty("/appSearch/visualizations/tiles");var a=i.map(function(t){t.added=e.includes(t.id);return t});t.setProperty("/appSearch/visualizations/tiles",a)},_unregisterEvents:function(){this.aRegisteredEvents.forEach(function(t){var e=t.id;var i=t.callback;var a=t.listener;this.detachEvent(e,i,a)}.bind(this));this.aRegisteredEvents=[]}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/contentFinder/controller/AppSearch.controller", ["./ContentFinderDialog.controller","../model/formatter","sap/base/Log","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i,r,s){"use strict";return e.extend("sap.ushell.components.contentFinder.controller.AppSearch",{formatter:t,filters:{search:"searchFilter",select:"selectFilter"},onInit:function(){this._oActiveFilters={};this.oModel=this.getOwnerComponent().getModel();this.oResourceBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle();this.getOwnerComponent().getNavContainer().then(function(e){e.attachNavigate(function(){var e=this.oModel.getProperty("/activeNavigationTarget");if(e===this.oModel.getProperty("/navigationTargets/appSearchTiles")||e===this.oModel.getProperty("/navigationTargets/appSearchCards")){this._resetFilters()}}.bind(this))}.bind(this))},onSearch:function(e){var t=e.getParameter("query")||"";this.oModel.setProperty("/appSearch/originalVisualizations/tiles",[]);this.oModel.setProperty("/appSearch/originalVisualizations/cards",[]);this.oModel.setProperty("/appSearch/visualizations/tiles",[]);this.oModel.setProperty("/appSearch/visualizations/cards",[]);this.getOwnerComponent().queryVisualizations(0,t)},onAppSearch:function(e){var t=e.getParameter("newValue");if(t){this._oActiveFilters[this.filters.search]=new r({filters:[new r("appId",s.Contains,t),new r("title",s.Contains,t),new r("subtitle",s.Contains,t),new r("systemInfo",s.Contains,t)],and:false});this._applyFilters()}else{this._resetFilters([this.filters.search])}},onAppBoxSelected:function(){this.oModel.setProperty("/appSearch/selectedAppCount",this.getOwnerComponent().getSelectedAppBoxes(false).length)},onAppBoxSelectedAndClose:function(e){e.getParameter("listItem").setSelected(true);this.getOwnerComponent().addVisualizations();this.getOwnerComponent().getRootControl().byId("contentFinderDialog").close()},onUpdateStarted:function(e){if(e.getParameter("reason")==="Growing"){var t=this.oModel.getProperty("/appSearch/searchTerm");var i=e.getParameter("actual");this.getOwnerComponent().queryVisualizations(i,t)}},onShowSelectedPressed:function(e){if(e.getParameter("pressed")){this.byId("appSearchField").clear();this._oActiveFilters[this.filters.select]=new r("selected",s.EQ,true);this._applyFilters()}else{this._resetFilters([this.filters.search,this.filters.select]);this.byId("appSearchField").clear()}},formatAppBoxAccDescription:function(e,t,i){var r=[];if(e){r.push(e)}if(t){r.push(t)}if(i){r.push(this.oResourceBundle.getText("ContentFinder.AppSearch.Message.AlreadyUsed"))}return r.join(" . ")},_applyFilters:function(){var e=this._getGridList();var t=e.getBinding("items");t.filter(new r({filters:Object.values(this._oActiveFilters),and:true}),"Control");this.oModel.setProperty("/appSearch/filteredAppCount",t.getLength())},_resetFilters:function(e){if(!e){e=Object.keys(this._oActiveFilters)}e.forEach(function(e){if(!Object.values(this.filters).includes(e)){i.error("Invalid filter provided. Skipping.",null,this.getOwnerComponent().logComponent);return}delete this._oActiveFilters[e]}.bind(this));this._applyFilters()},_getGridList:function(){var e=this.oModel.getProperty("/navigationTargets/appSearchTiles");var t=this.oModel.getProperty("/navigationTargets/appSearchCards");var r=this.oModel.getProperty("/activeNavigationTarget");if(r===e){return this.byId("tilesGridList")}else if(r===t){return this.byId("cardsGridList")}i.error("Invalid navigation target provided. Could not determine GridList.",null,this.getOwnerComponent().logComponent);return null}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/contentFinder/controller/ContentFinderDialog.controller", ["../model/formatter","sap/ui/core/mvc/Controller"],function(e,t){"use strict";return t.extend("sap.ushell.components.contentFinder.controller.ContentFinderDialog",{formatter:e,onInit:function(){this.oResourceBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle();this.oModel=this.getOwnerComponent().getModel();this.oDialog=this.getView().byId("contentFinderDialog")},onCancelButtonPressed:function(e){e.getSource().getParent().close()},onBackButtonPressed:function(){this.getOwnerComponent().resetAppSearch();this.getOwnerComponent().navigate(this.oModel.getProperty("/navigationTargets/widgetGallery"))},onAddButtonPressed:function(e){this.getOwnerComponent().addVisualizations();e.getSource().getParent().close()},onClose:function(){var e=this.getOwnerComponent();e._initializeModel();return e.getNavContainer().then(function(t){t.backToTop();e.fireEvent("contentFinderClosed");e._unregisterEvents()})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/contentFinder/controller/WidgetGallery.controller", ["./ContentFinderDialog.controller"],function(e){"use strict";return e.extend("sap.ushell.components.contentFinder.controller.WidgetGallery",{onInit:function(){this.oResourceBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle();this.oModel=this.getOwnerComponent().getModel()},onSelectWidgetType:function(e){var t=e.getSource().getBindingContext().getObject();if(t.target){this.getOwnerComponent().navigate(t.target)}else{this.getOwnerComponent().fireEvent("widgetSelected",{widgetId:t.id});this.getOwnerComponent().getRootControl().byId("contentFinderDialog").close()}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/contentFinder/model/GraphQLListBinding", ["sap/ui/model/json/JSONListBinding"],function(t){"use strict";return t.extend("sap.ushell.components.contentFinder.model.GraphQLListBinding",{getLength:function(){if(this.aFilters&&this.aFilters.length>0&&this.aFilters[0].getFilters().length>0){return this.iLength}return this.getModel().getProperty("/appSearch/totalCount")||0},isLengthFinal:function(){return this.oList.length>=this.getLength()}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/contentFinder/model/GraphQLModel", ["sap/ui/model/json/JSONModel","sap/ushell/components/contentFinder/model/GraphQLListBinding"],function(n,e){"use strict";return n.extend("sap.ushell.components.contentFinder.model.GraphQLModel",{bindList:function(n,t,i,o,s){return new e(this,n,t,i,o,s)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/contentFinder/model/formatter", [],function(){"use strict";return{formatDialogTitle:function(e){var t=this.getView().getModel("i18n").getResourceBundle();var r=this.getView().getModel();if(e===r.getProperty("/navigationTargets/widgetGallery")){return t.getText("ContentFinder.WidgetGallery.Title")}else if(e===r.getProperty("/navigationTargets/appSearchTiles")){return t.getText("ContentFinder.AppSearch.AddTiles.Title")}else if(e===r.getProperty("/navigationTargets/appSearchCards")){return t.getText("ContentFinder.AppSearch.AddCards.Title")}return""},formatAppSearchTitle:function(e,t,r,i,n,a,l){var p=this.getView().getModel("i18n").getResourceBundle();var g="";var o=false;if(e==="appSearch_tiles"){o=!!n.length;if(!o){g=p.getText("ContentFinder.AppSearch.Title.NoTiles")}else{g=p.getText("ContentFinder.AppSearch.Title.AllTiles",n.length)}if(r){if(i){g=p.getText("ContentFinder.AppSearch.Title.SelectedApp",i)}else{g=p.getText("ContentFinder.AppSearch.Title.NoSelectedApp")}}}if(e==="appSearch_cards"){o=!!a.length;if(!o){g=p.getText("ContentFinder.AppSearch.Title.NoCards")}else{g=p.getText("ContentFinder.AppSearch.Title.AllCards",a.length)}}if(t&&!o){g=p.getText("ContentFinder.AppSearch.Title.NoSearchResult",t)}if(t&&o){g=p.getText("ContentFinder.AppSearch.Title.SearchResult",[t,l])}return g},addButtonIsVisibleInAppSearch:function(e){var t=this.getView().getModel();return e===t.getProperty("/navigationTargets/appSearchTiles")}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/Component", ["sap/ui/core/UIComponent","sap/ui/core/library"],function(e,t){"use strict";var i=t.mvc.ViewType;var n=e.extend("sap.ushell.components.factsheet.Component",{oMainView:null,metadata:{version:"1.115.1",library:"sap.ushell",dependencies:{libs:["sap.m","sap.ui.vbm","sap.suite.ui.commons","sap.ui.layout","sap.viz"],components:[]}},createContent:function(){var e=this.getComponentData();var t=e&&e.startupParameters||{};this.oMainView=sap.ui.view({type:i.JS,viewName:"sap.ushell.components.factsheet.views.ThingViewer",viewData:t,height:"100%"}).addStyleClass("ThingViewer");return this.oMainView},exit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId())},onExit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId())}});jQuery.sap.setObject("factsheet.Component",n);return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/annotation/Mapping", ["sap/ui/Device"],function(e){"use strict";var t={};t.initialized=[];t.parse=function(t,n){var a={},i={},r={},o={},s={},l="",d,f,p,u,c,h,g,N,m,x,y,A,T,b,v,P,S,O,R,V,D,E,C,w,U,I,L,X,_,z,F,j,k,M,H,Q,G,Y;if(e.browser.internet_explorer){a={setNameSpace:function(e){e.setProperty("SelectionNamespaces",'xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" xmlns:d="http://docs.oasis-open.org/odata/ns/edm"');e.setProperty("SelectionLanguage","XPath");return e},selectNodes:function(e,t,n){return n.selectNodes(t)},nextNode:function(e){return e.nextNode()},getNodeText:function(e){return e.text}}}else{a={setNameSpace:function(e){return e},nsResolver:function(e){var t={edmx:"http://docs.oasis-open.org/odata/ns/edmx",d:"http://docs.oasis-open.org/odata/ns/edm"};return t[e]||null},selectNodes:function(e,t,n){var a=e.evaluate(t,n,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);a.length=a.snapshotLength;return a},nextNode:function(e,t){return e.snapshotItem(t)},getNodeText:function(e){return e.textContent}}}var q=function(t){var n;if(e.browser.internet_explorer){n=new ActiveXObject("Microsoft.XMLHTTP");n.open("GET",t,false);n.send(null);return n.responseXML}n=jQuery.sap.sjax({url:t,dataType:"xml"});if(n.success){return n.data}};var B=function(e){var t={},n={},a={},i=false,r,o,s,l,d={},f,p={},u={},c=false,h,g,N,m,x,y,A,T,b;for(r=e.dataServices.schema.length-1;r>=0;r-=1){t=e.dataServices.schema[r];if(t.entityType){o=t.namespace;s=t.entityType;l=t.complexType;for(f in s){if(s.hasOwnProperty(f)){d=s[f];u={};if(d.hasStream&&d.hasStream==="true"){continue}p={};for(N in d.property){h=d.property[N];if(h.type.substring(0,o.length)===o){for(g in l){if(l[g].name===h.type.substring(o.length+1)){for(N in l[g].property){m=l[g].property[N];p[l[g].name+"/"+m.name]=m.type}}}}else{x=h.name;y=h.type;for(T in h.extensions){A=h.extensions[T];if(A.name==="display-format"&&A.value==="Date"){y="Edm.Date"}else{c=true;if(!u[x]){u[x]={}}if(A.namespace&&!u[x][A.namespace]){u[x][A.namespace]={}}u[x][A.namespace][A.name]=A.value}}p[x]=y}}if(!n[o+"."+d.name]){n[o+"."+d.name]={}}n[o+"."+d.name]=p;if(c){if(!a[o+"."+d.name]){i=true}a[o+"."+d.name]={};a[o+"."+d.name]=u}}}}}if(i){b={types:n,extensions:a}}else{b={types:n}}return b};var J=function(e,t,n,a){var i,r,o="";for(i in e){if(e.hasOwnProperty(i)){if(e[i]){r=e[i];if(r.Value&&r.Value.Path){o=K(r.Value.Path,t,n,a);if(o){e[i].EdmType=o}continue}if(r.Path){o=K(r.Path,t,n,a);if(o){e[i].EdmType=o}continue}if(r.Facets){e[i].Facets=J(r.Facets,t,n,a);continue}if(r.Data){e[i].Data=J(r.Data,t,n,a);continue}if(i==="Data"){e.Data=J(r,t,n,a);continue}if(r.Value&&r.Value.Apply){e[i].Value.Apply.Parameters=J(r.Value.Apply.Parameters,t,n,a);continue}if(r.Value&&r.Type&&r.Type==="Path"){o=K(r.Value,t,n,a);if(o){e[i].EdmType=o}}}}}return e};var K=function(e,t,n,a){var i;if(e.charAt(0)==="@"&&e.indexOf(a.Alias)===1){e=e.slice(a.Alias.length+2)}if(e.indexOf("/")>=0){if(t[e.slice(0,e.indexOf("/"))]){n=e.slice(0,e.indexOf("/"));e=e.slice(e.indexOf("/")+1)}}for(i in t[n]){if(t[n].hasOwnProperty(i)){if(e===i){return t[n][i]}}}};var W=function(e){var t="",n="",a,i={};for(a=0;a<e.attributes.length;a+=1){if(e.attributes[a].name!=="Property"&&e.attributes[a].name!=="Term"){t=e.attributes[a].name;n=e.attributes[a].value}}if(t.length>0){i[t]=ae(n)}return i};var Z=function(e,t){var n={},i,r,o,s,l,d;if(t.hasChildNodes()){i=a.selectNodes(e,"./d:String",t);if(i.length>0){r=a.nextNode(i,0);n.String=a.getNodeText(r)}else{o=a.selectNodes(e,"./d:Path",t);if(o.length>0){s=a.nextNode(o,0);n.Path=a.getNodeText(s)}else{l=a.selectNodes(e,"./d:Apply",t);if(l.length>0){d=a.nextNode(l,0);n.Apply=te(e,d)}}}}return n};var $=function(e,t,n){var i={},r,o,s,l,d,f,p,u,c={},h,g,N,m,x;if(t.hasChildNodes()){r=a.selectNodes(e,"./d:Record | ./d:Collection/d:Record | ./d:Collection/d:If/d:Record",t);if(r.length){o=0;for(s=0;s<r.length;s+=1){l=a.nextNode(r,s);d=ee(e,l,n);if(l.getAttribute("Type")){d.RecordType=ae(l.getAttribute("Type"))}if(o===0){if(l.nextElementSibling||l.parentNode.nodeName==="Collection"||l.parentNode.nodeName==="If"){i=[];i.push(d)}else{i=d}}else{i.push(d)}o+=1}}else{f=a.selectNodes(e,"./d:UrlRef",t);if(f.length>0){for(s=0;s<f.length;s+=1){p=a.nextNode(f,s);i.UrlRef=Z(e,p)}}else{f=a.selectNodes(e,"./d:Url",t);if(f.length>0){for(s=0;s<f.length;s+=1){p=a.nextNode(f,s);i.Url=Z(e,p)}}else{x=a.selectNodes(e,"./d:Collection/d:AnnotationPath | ./d:Collection/d:PropertyPath",t);if(x.length>0){i=[];for(s=0;s<x.length;s+=1){u=a.nextNode(x,s);c={};c[u.nodeName]=a.getNodeText(u);i.push(c)}}else{i=W(t);h=a.selectNodes(e,"./d:Annotation",t);g={};for(N=0;N<h.length;N+=1){g=a.nextNode(h,N);if(g.hasChildNodes()===false){m=ae(g.getAttribute("Term"));i[m]=W(g)}}}}}}}else{i=W(t)}return i};var ee=function(e,t,n){var i={},r={},o,s,l,d,f,p,u,c,h,g;o=a.selectNodes(e,"./d:Annotation",t);for(s=0;s<o.length;s+=1){r=a.nextNode(o,s);if(r.hasChildNodes()===false){l=ae(r.getAttribute("Term"));i[l]=W(r)}}d=a.selectNodes(e,"./d:PropertyValue",t);if(d.length>0){for(f=0;f<d.length;f+=1){p=a.nextNode(d,f);u=p.getAttribute("Property");i[u]=$(e,p,n);c=a.selectNodes(e,"./d:Apply",p);h=null;for(g=0;g<c.length;g+=1){h=a.nextNode(c,g);if(h){i[u]={};i[u].Apply=te(e,h)}}}}else{i=$(e,t,n)}return i};var te=function(e,t){var n={},i,r=null,o=[],s;i=a.selectNodes(e,"./d:*",t);for(s=0;s<i.length;s+=1){r=a.nextNode(i,s);switch(r.nodeName){case"Apply":o.push({Type:"Apply",Value:te(e,r)});break;case"LabeledElement":o.push({Name:r.getAttribute("Name"),Value:Z(e,r)});break;default:o.push({Type:r.nodeName,Value:a.getNodeText(r)});break}}n.Name=t.getAttribute("Function");n.Parameters=o;return n};var ne=function(e,n){var a,i,r,o,s,l;for(i=t.dataServices.schema.length-1;i>=0;i-=1){a=t.dataServices.schema[i];if(a.entityType){r=a.namespace+".";o=a.entityType;for(l=o.length-1;l>=0;l-=1){if(r+o[l].name===e&&o[l].navigationProperty){for(s=0;s<o[l].navigationProperty.length;s+=1){if(o[l].navigationProperty[s].name===n){return true}}}}}}return false};var ae=function(e){for(c in i){if(i.hasOwnProperty(c)){if(e.indexOf(c+".")>=0){e=e.replace(c+".",i[c]+".");return e}}}return e};if(this.initialized[n]){return this.initialized[n]}p=q(n);p=a.setNameSpace(p);u=a.selectNodes(p,"//d:Schema",p);for(d=0;d<u.length;d+=1){h=a.nextNode(u,d);r.Alias=h.getAttribute("Alias");r.Namespace=h.getAttribute("Namespace")}N=a.selectNodes(p,"//edmx:Reference",p);for(d=0;d<N.length;d+=1){g=a.nextNode(N,d);x=a.selectNodes(p,"./edmx:Include",g);if(x&&x.length>0){m=a.nextNode(x,0);if(m.getAttribute("Alias")){i[m.getAttribute("Alias")]=m.getAttribute("Namespace")}else{i[m.getAttribute("Namespace")]=m.getAttribute("Namespace")}}A=a.selectNodes(p,"./edmx:IncludeAnnotations",g);if(A.length>0){for(f=0;f<A.length;f+=1){y=a.nextNode(A,f);if(y.getAttribute("TargetNamespace")){l=y.getAttribute("TargetNamespace");if(!o[l]){o[l]={}}o[l][y.getAttribute("TermNamespace")]=g.getAttribute("Uri")}else{o[y.getAttribute("TermNamespace")]=g.getAttribute("Uri")}}}}if(o){s.annotationReferences=o}s.aliasDefinitions=i;b=a.selectNodes(p,"//d:Term",p);if(b.length>0){v={};for(P=0;P<b.length;P+=1){T=a.nextNode(b,P);S=ae(T.getAttribute("Type"));v["@"+r.Alias+"."+T.getAttribute("Name")]=S}s.termDefinitions=v}O=B(t);if(O.extensions){s.propertyExtensions=O.extensions}V=a.selectNodes(p,"//d:Annotations ",p);for(P=0;P<V.length;P+=1){R=a.nextNode(V,P);if(R.hasChildNodes()===false){continue}D=R.getAttribute("Target");E=D.split(".")[0];if(E&&i[E]){D=D.replace(new RegExp(E,""),i[E])}C=D;w=null;if(D.indexOf("/")>0){C=D.split("/")[0];w=D.replace(C+"/","")}if(!s[C]){s[C]={}}if(w){if(!s.propertyAnnotations){s.propertyAnnotations={}}if(!s.propertyAnnotations[C]){s.propertyAnnotations[C]={}}s.propertyAnnotations[C][w]={};U=a.selectNodes(p,"./d:Annotation",R);for(I=0;I<U.length;I+=1){L=a.nextNode(U,I);if(L.hasChildNodes()===false){X=ae(L.getAttribute("Term"));s.propertyAnnotations[C][w][X]=W(L)}}}else{_=C.replace(i[E],E);U=a.selectNodes(p,"./d:Annotation",R);for(z=0;z<U.length;z+=1){L=a.nextNode(U,z);F=L.getAttribute("Qualifier");j=ae(L.getAttribute("Term"));if(F){j+="#"+F}k=$(p,L,_);k=J(k,O.types,C,r);s[C][j]=k}H=a.selectNodes(p,"//d:Annotations[contains(@Target, '"+_+"')]//d:PropertyValue[contains(@Path, '/')]//@Path",p);for(d=0;d<H.length;d+=1){M=a.nextNode(H,d);G=M.value;if(s.propertyAnnotations){if(s.propertyAnnotations[C]){if(s.propertyAnnotations[C][G]){continue}}}Q=G.split("/");if(ne(C,Q[0],t)){if(!s.expand){s.expand={}}if(!s.expand[C]){s.expand[C]={}}s.expand[C][Q[0]]=Q[0]}}Y=a.selectNodes(p,"//d:Annotations[contains(@Target, '"+_+"')]//d:Path[contains(., '/')]",p);for(d=0;d<Y.length;d+=1){M=a.nextNode(Y,d);G=a.getNodeText(M);if(s.propertyAnnotations[C]){if(s.propertyAnnotations[C][G]){continue}}if(!s.expand){s.expand={}}if(!s.expand[C]){s.expand[C]={}}Q=G.split("/");if(ne(C,Q[0],t)){if(!s.expand){s.expand={}}if(!s.expand[C]){s.expand[C]={}}s.expand[C][Q[0]]=Q[0]}}}this.initialized[n]=s}return s};return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/controls/PictureTile", ["sap/m/CustomTile","sap/m/Button","sap/m/library","sap/ui/Device","sap/ushell/library","./PictureTileRenderer"],function(e,t,i,s){"use strict";var n=i.ButtonType;var a=e.extend("sap.ushell.components.factsheet.controls.PictureTile",{metadata:{deprecated:true,library:"sap.ushell",properties:{height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"32px"},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"32px"}},associations:{tileContent:{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:false}},events:{pictureDelete:{}}}});a.prototype.init=function(){this._oDeletePictureButton=new t({icon:"sap-icon://sys-cancel",press:this._deletePictureRequestHandler.bind(this),type:n.Transparent}).addStyleClass("sapCaUiPTDeleteButton");if(!s.system.desktop){this.attachPress(this._tilePressedHandler);this.attachBrowserEvent("swipe",this._tileSwipedHandler.bind(this));this._oDeletePictureButton.addStyleClass("hide")}};a.prototype.setTileContent=function(e){this.setContent(null);if(e){var t=e.getImage();this.setContent(t)}else{this.setContent(null)}this.setAssociation("tileContent",e)};a.prototype.setSize=function(e,t){this._width=e;this._height=t;var i=this.$();if(i){i.css({width:e+"px",height:t+"px"});jQuery.sap.byId(this.getId()+"-wrapper").addClass("sapCaUiPTWrapper")}};a.prototype._tilePressedHandler=function(){this.switchVisibility()};a.prototype.switchVisibility=function(e){var t=this._oDeletePictureButton.$();if(e===undefined){t.toggleClass("hide")}else{t.toggleClass("hide",!e)}};a.prototype._tileSwipedHandler=function(){var e=this._oDeletePictureButton.$();if(e&&!e.hasClass("hide")){e.addClass("hide")}};a.prototype._deletePictureRequestHandler=function(){this.firePictureDelete()};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/controls/PictureTileRenderer", ["jquery.sap.global","sap/m/CustomTileRenderer","sap/ui/core/Renderer"],function(jQuery,e,r){"use strict";var t=r.extend(e);t.render=function(e,r){jQuery.sap.log.debug("PictureTileRenderer :: begin rendering");e.write("<div ");e.writeControlData(r);e.addClass("sapCaUiPictureTile");e.writeClasses();e.write(">");e.write("<div");e.addClass("sapCaUiPictureTileContent");e.writeClasses();e.write(">");e.write("<div id='"+r.getId()+"-wrapper'>");e.renderControl(r._oDeletePictureButton);this._renderContent(e,r);e.write("</div>");e.write("</div></div>")};t._renderContent=function(e,r){e.renderControl(r.getContent())};return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/controls/PictureViewer", ["sap/m/TileContainer","sap/ui/Device","sap/ushell/components/factsheet/controls/PictureTile","sap/ushell/library","./PictureViewerRenderer"],function(e,t,i){"use strict";var s=e.extend("sap.ushell.components.factsheet.controls.PictureViewer",{metadata:{deprecated:true,library:"sap.ushell",properties:{tileScaling:{type:"float",group:"Misc",defaultValue:.95},removable:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"items",aggregations:{items:{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:true,singularName:"item"}},events:{pictureDeleted:{}}}});s.prototype.init=function(){e.prototype.init.apply(this);this.setEditable(false);if(sap.ui.getCore().isMobile()){jQuery(window).bind("tap",this._reset.bind(this));var t=sap.ui.getCore().getStaticAreaRef();this.$blocker=jQuery("<div class='sapCaPVBly sapUiBLy'></div>").css("visibility","hidden");jQuery(t).append(this.$blocker)}if(!sap.ui.getCore().isMobile()){jQuery(window).bind("resize",this._resize.bind(this))}this.addStyleClass("sapCaPW");this.addStyleClass("sapCaPWRendering")};s.prototype._resize=function(){if(this._oDragSession){return}setTimeout(function(){this._applyDimension();this._update(false);delete this._iInitialResizeTimeout}.bind(this),this._iInitialResizeTimeout);this._iInitialResizeTimeout=0};s.prototype.exit=function(){this.$blocker.remove();if(!sap.ui.getCore().isMobile()){jQuery(window).unbind("resize",this._resize.bind(this))}e.prototype.exit.apply(this);if(!t.system.desktop){jQuery(window).unbind("tap",this._reset.bind(this))}};s.prototype.setTileScaling=function(e){if(e<0||e>1){e=.75;jQuery.sap.log.error("Tile Scaling should be a float value between 0 and 1 and not "+e+". Setting it to 0.75 by default.")}this.setProperty("tileScaling",e)};s.prototype.addItem=function(e){this.insertItem(e,this.getItems().length)};s.prototype.insertItem=function(e,t){var s=new i({tileContent:e});s.attachPictureDelete(this._deletePictureRequestHandler.bind(this));this.insertTile(s,t);this.insertAggregation("items",e,t);return this};s.prototype.insertTile=function(t){t.attachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));e.prototype.insertTile.apply(this,arguments)};s.prototype.deleteTile=function(t){e.prototype.deleteTile.apply(this,arguments);t.destroy()};s.prototype.deletePicture=function(e){var t,i,s;s=this.getTiles().length;if(typeof e!=="number"||e<0||e>=s){t=this.getPageFirstTileIndex()}else{t=e}if(t>-1){i=this.getTiles()[t];i.detachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));this.deleteTile(i);this.removeAggregation("items",t,true)}else{jQuery.sap.log.warning("Cannot find and delete a picture at index : "+e)}return this};s.prototype.selectPicture=function(e){var t=this.getTiles().length;if(typeof e!=="number"){e=0}else if(e<0){e=0}else if(e>=t){e=t-1}if(this._bRendered){this.addStyleClass("sapCaPWRendering")}this._selectedIndex=e;return this};s.prototype.setSelectedIndex=function(e){this.selectPicture(e)};s.prototype.getCurrentPictureIndex=function(){return this.getPageFirstTileIndex()};s.prototype._deletePictureRequestHandler=function(e){var t=this.indexOfTile(e.getSource());this.deleteTile(e.getSource());this.firePictureDeleted({index:t})};s.prototype._reset=function(e){var t=this.getCurrentPictureIndex();var i=this.getTiles();if(t>-1&&i&&i.length>t){var s=i[t];if(s){var r=jQuery(e.target);var n=this.$();if(n.length>0&&r.length>0){var o=r.closest(this.$());if(o.length===0){s.switchVisibility(false)}}}}};s.prototype.setRemovable=function(e){this.setProperty("removable",e,true);this.toggleStyleClass("sapCaPWEditable",e)};s.prototype.setEditable=function(){e.prototype.setEditable.call(this,false)};s.prototype._getTileDimension=function(){if(!this._bRendered){return}var e=jQuery.sap.byId(this.getId()+"-scrl");var t={width:e.width(),height:e.height()};return t};s.prototype.onBeforeRendering=function(){this.addStyleClass("sapCaPWRendering")};s.prototype.onAfterRendering=function(){var e=this;this._bRendered=true;this._applyDimension();this.$().toggleClass("sapCaPWEditable",this.getRemovable()===true);this._sInitialResizeTimeoutId=setTimeout(function(){e.addStyleClass("sapCaPWRendering");e._applyPageStartIndex(e._selectedIndex);e._update(false)},this._iInitialResizeTimeout);if(t.system.desktop){var i=this.getTiles()[0],s=this._iInitialResizeTimeout;if(i){setTimeout(function(){this._findTile(i.$()).focus()}.bind(this),s)}}};s.prototype._update=function(){e.prototype._update.apply(this,arguments);this.removeStyleClass("sapCaPWRendering");if(sap.ui.getCore().isMobile()){var t=this;var i=this.$blocker;setTimeout(function(){i.fadeOut(200,function(){t.css("visibility","hidden").css("z-index",0)})},250)}};s.prototype._applyDimension=function(){var e=this._getContainerDimension(),i=this.getId(),s=this.$(),r,n=10,o=60,a=jQuery.sap.byId(i+"-cnt"),l,p,u=jQuery.sap.byId(i+"-pager").outerHeight();jQuery.sap.byId(i+"-scrl").css({width:e.outerwidth+"px",height:e.outerheight-u+"px"});a.css({height:e.outerheight-u+"px",visibility:"visible"});s.css("visibility","visible");r=s.position();l=a.position();p=a.outerHeight();if(jQuery.device.is.phone){n=2}else if(t.system.desktop){n=0}jQuery.sap.byId(i+"-blind").css({top:l.top+n+"px",left:l.left+n+"px",width:a.outerWidth()-n+"px",height:p-n+"px"});jQuery.sap.byId(i+"-rightedge").css({top:r.top+n+o+"px",right:n+"px",height:p-n-o+"px"});jQuery.sap.byId(i+"-leftedge").css({top:r.top+n+o+"px",left:r.left+n+"px",height:p-n-o+"px"})};s.prototype.showBlockerLayer=function(e){if(sap.ui.getCore().isMobile()){var t=20;jQuery(sap.ui.getCore().getStaticAreaRef()).children().each(function(e,i){var s=parseInt(jQuery(i).css("z-index"),10);if(!isNaN(s)){t=Math.max(t,s)}});jQuery.sap.log.debug("blocker layer z-index calculated : "+t+1);this.$blocker.css("z-index",t+1).css("visibility","visible").fadeIn(200,function(){if(e){e.call()}})}else if(e){e.call()}};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/controls/PictureViewerItem", ["sap/ui/core/Control","sap/m/Image"],function(e,t){"use strict";var r=e.extend("sap.ushell.components.factsheet.controls.PictureViewerItem",{metadata:{deprecated:true,library:"sap.ushell",properties:{src:{type:"string",group:"Misc",defaultValue:null}},aggregations:{image:{type:"sap.m.Image",multiple:false}}}});r.prototype.setSrc=function(e){this.setProperty("src",e);var r=this.getImage();if(r==null){r=new t}r.setSrc(e);this.setImage(r);return this};r.prototype.exit=function(){var e=this.getImage();if(e){e.destroy()}};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/controls/PictureViewerRenderer", ["jquery.sap.global","sap/m/TileContainerRenderer"],function(jQuery,e){"use strict";var r={};r.render=function(r,n){jQuery.sap.log.debug("PictureViewerRenderer :: begin rendering");e.render(r,n);jQuery.sap.log.debug("PictureViewerRenderer :: end rendering")};return r},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/factory/ThingInspector", ["jquery.sap.global","sap/suite/ui/commons/UnifiedThingInspector","sap/ui/core/format/NumberFormat","sap/viz/ui5/data/FlattenedDataset","sap/ui/core/Locale","sap/ui/model/type/DateTime","sap/ui/model/type/Time","sap/ui/model/type/Date","sap/ui/model/type/Float","sap/ui/model/type/Integer","sap/ui/model/json/JSONModel","sap/ui/core/Control","sap/m/Image","sap/m/Link","sap/m/Text","sap/ui/core/library","sap/ui/layout/VerticalLayout","sap/m/Label","sap/ui/layout/form/SimpleForm","sap/suite/ui/commons/UnifiedThingGroup","sap/ui/ux3/ThingGroup","sap/ui/core/HTML","sap/m/Column","sap/m/ColumnListItem","sap/m/library","sap/m/Table","sap/m/Page","sap/m/VBox","sap/m/Input","sap/m/List","sap/m/StandardListItem","sap/ui/model/FilterOperator","sap/m/DateTimeInput","sap/ui/model/Filter","sap/m/ViewSettingsItem","sap/m/ViewSettingsCustomItem","sap/ui/core/CustomData","sap/m/ViewSettingsDialog","sap/ui/model/Sorter","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/viz/ui5/Area","sap/viz/ui5/Bar","sap/viz/ui5/Bubble","sap/viz/ui5/Column","sap/viz/ui5/StackedColumn","sap/viz/ui5/StackedColumn100","sap/viz/ui5/Donut","sap/viz/ui5/Heatmap","sap/viz/ui5/HorizontalArea","sap/viz/ui5/Line","sap/viz/ui5/Pie","sap/viz/ui5/Scatter","sap/viz/ui5/Treemap","sap/viz/ui5/types/Title","sap/suite/ui/commons/KpiTile","sap/ui/model/odata/ODataModel","sap/suite/ui/commons/FacetOverview","sap/suite/ui/commons/library","sap/ui/layout/Grid","sap/ui/vbm/VBI","sap/ui/layout/HorizontalLayout","sap/ui/core/Icon","sap/m/Carousel","sap/ui/core/IconPool","sap/ushell/resources","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/LinkActionSheet","sap/ushell/services/AppConfiguration","sap/m/ActionSheet","sap/ushell/ui/footerbar/JamDiscussButton","sap/ushell/ui/footerbar/JamShareButton"],function(e,t,a,n,i,s,r,o,l,c,f,p,d,u,g,m,h,y,T,b,v,S,P,C,I,w,x,E,U,A,O,F,V,L,D,N,k,B,M,_,H,R,j,Q,G,z,W,K,$,J,X,q,Y,Z,ee,te,ae,ne,ie,se,re,oe,le,ce,fe,pe,de,ue,ge,me,he,ye,Te){"use strict";var be=I.URLHelper;var ve=I.PlacementType;var Se=se.FacetOverviewHeight;var Pe=I.DateTimeInputType;var Ce=I.ListMode;var Ie=I.ListSeparators;var we=I.BackgroundDesign;var xe=I.ListType;var Ee=m.TextAlign;var Ue={},Ae=[],Oe={},Fe={},Ve="displayFactSheet",Le,De;Le=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();if(sap.ui.getCore().getConfiguration().getLanguage()==="ZH"){Le=new i("zh_CN")}function Ne(e){return e<0}function ke(e){var t=Number(e).toFixed(0);if(Ne(e)){t=Number(t)*-1}return t}function Be(e,t){var n,i,s,r;if(!e){return""}i=new RegExp(a.oDefaultFloatFormat.groupingSeparator,"g");if(t>=0){t=parseInt(t,10);r=a.getFloatInstance({minFractionDigits:t,maxFractionDigits:t},Le)}else{r=a.getFloatInstance({minFractionDigits:0,maxFractionDigits:99},Le)}n=r.format(e);s=n.replace(/[\D]/g,"");if(s&&s.length>6){e=e.replace(i,"");if(ke(e)<1e3){return a.getIntegerInstance().format(e)}r=a.getFloatInstance({minFractionDigits:1,maxFractionDigits:1,style:"short"},Le);return r.format(e)}return n}function Me(){var t="",a,n,i,s,r,o,l,c,f,p,d;r=this.getElementBinding().sPath.split("/")[1];o=this.getModel();l=this.mBindingInfos.value.parameters;c=this.mBindingInfos.value.parts;for(a=0;a<l.length;a+=1){t=t+l[a].string}for(n=0;n<c.length;n+=1){i=c[n].path;p="{"+i+"}";s=o.oData[r][i];t=t.replace(p,s)}f=Ze(t);if(e.isNumeric(f)){d=this.mBindingInfos.value.parts.filter(function(e){return e.path===i});f=Be(f,d[0].type.oFormatOptions.maxFractionDigits);this.setDoubleFontSize(true)}this.setValue(f);this.getElementBinding().detachChange(Me)}var _e=function(){var e="";if(De.getName()&&De.getDescription()){e=De.getName()+", "+De.getDescription()}else if(De.getName()&&!De.getDescription()){e=De.getName()}else if(!De.getName()&&De.getDescription()){e=De.getDescription()}return e};var He=function(e){var t,a,n;t=e.slice(1).split("/");a="/";for(n=0;n<t.length;n+=1){if(t[n].indexOf("(")>0&&t[n].indexOf("sid(")<0){break}else{a+=t[n]+"/"}}return a};var Re=function(e,t){var a,n,i,s;n=e.slice(t.sServiceUrl.length+1);if(n.indexOf("/")>=0){i=n.split("/");s=i[i.length];a=i[i.length-1];if(a.indexOf("(")>=0){a=a.slice(a.indexOf("("))}a=this.getNavEntitySet(a,s,t.getMetadata())}else if(n.indexOf("(")>=0){a=n.slice(0,n.indexOf("("))}else if(n.indexOf("?")>=0){a=n.slice(0,n.indexOf("?"))}else{a=n}return a};var je=function(e,t){var a,n="",i,s;a=e.slice(t.sServiceUrl.length+1);if(a.indexOf("(")>=0){n=a.slice(a.indexOf("(")+1,a.indexOf(")"));if(n.indexOf("=")<=0){i=t.getServiceMetadata();s=ze(Re(e,t),i);n=Qe(s,i)+"="+n}}return n};var Qe=function(e,t){var a,n,i;for(a=t.dataServices.schema.length-1;a>=0;a-=1){i=t.dataServices.schema[a];if(i.namespace===e.slice(0,e.lastIndexOf("."))){for(n=0;n<i.entityType.length;n+=1){if(i.entityType[n].name===e.slice(e.lastIndexOf(".")+1)){return i.entityType[n].key.propertyRef[0].name}}}}};var Ge=function(e,t){var a,n,i,s;for(a=t.dataServices.schema.length-1;a>=0;a-=1){i=t.dataServices.schema[a];if(i.entityContainer){s=i.entityContainer[0].entitySet;for(n=s.length-1;n>=0;n-=1){if(s[n].entityType===e){return s[n].name}}}}};var ze=function(e,t,a){var n,i,s,r,o;for(n=t.dataServices.schema.length-1;n>=0;n-=1){s=t.dataServices.schema[n];if(s.entityContainer){r=s.entityContainer[0].entitySet;for(i=r.length-1;i>=0;i-=1){if(r[i].name===e){if(a){o=r[i].entityType.slice(s.namespace.length+1)}else{o=r[i].entityType}return o}}}}};var We=function(e,t,a){var n,i,s,r,o,l,c;r=e.split(".");for(n=a.dataServices.schema.length-1;n>=0;n-=1){o=a.dataServices.schema[n];l=r[0];if(r.length>2){for(s=1;s<r.length-1;s+=1){l+="."+r[s]}}if(o.namespace===l){for(i=0;i<o.entityType.length;i+=1){if(o.entityType[i].name===r[r.length-1]){if(o.entityType[i].navigationProperty){for(s=0;s<o.entityType[i].navigationProperty.length;s+=1){if(o.entityType[i].navigationProperty[s].name===t){c=o.entityType[i].navigationProperty[s];return{name:c.relationship,toRole:c.toRole}}}}}}}}};var Ke=function(e,t,a){var n,i,s,r,o,l,c,f;n=ze(e,a);if(t.charAt(0)==="@"){if(Ue.termDefinitions&&Ue.termDefinitions[t]){i=Ue.termDefinitions[t];if(i.indexOf("Collection")>=0){i=i.slice(i.indexOf("(")+1,i.indexOf(")"))}return Ge(i,a)}}else{s=We(n,t,a);if(s){for(r=a.dataServices.schema.length-1;r>=0;r-=1){o=a.dataServices.schema[r];if(o.entityContainer&&o.entityContainer[0].associationSet){for(l=o.entityContainer[0].associationSet.length-1;l>=0;l-=1){c=o.entityContainer[0].associationSet[l];if(c.association===s.name){for(f=0;f<c.end.length;f+=1){if(c.end[f].role===s.toRole){return c.end[f].entitySet}}}}}}}}};var $e=function(e,t,a){var n,i,s,r,o,l,c,f,p;r=ze(e,a);f=r.split(".")[r.split(".").length-1];o=We(r,t,a);if(o){for(n=a.dataServices.schema.length-1;n>=0;n-=1){l=a.dataServices.schema[n];for(i=0;i<l.entityType.length&&!p;i+=1){if(l.entityType[i].name===f){for(s=0;s<l.entityType[i].navigationProperty.length;s+=1){if(l.entityType[i].navigationProperty[s].name===t){p=l.entityType[i].navigationProperty[s].toRole;break}}}}for(i=l.association.length-1;i>=0;i-=1){c=l.association[i];if(l.namespace+"."+c.name===o.name){for(s=0;s<c.end.length;s+=1){if(c.end[s].role===p){return c.end[s].multiplicity}}}}}}else{jQuery.sap.log.error('"'+t+"\" wasn't found in the metadata document. Check whether the corresponding search connector is active.");return 0}};var Je=function(e,t){var a,n,i,s;a={};if(Ue.expand){if(Ue.expand[ze(e,t)]){n=Ue.expand[ze(e,t)];i=[];for(s in n){if(n.hasOwnProperty(s)){i.push(n[s])}}a.expand=i.join(", ")}}return a};var Xe=function(e,t,a){var n,i,s,r,o,l;for(n=a.dataServices.schema.length-1;n>=0;n-=1){i=a.dataServices.schema[n];for(s=0;s<i.entityType.length;s+=1){if(i.entityType[s].name===t.split(".")[t.split(".").length-1]){for(r=0;r<i.entityType[s].navigationProperty.length;r+=1){if(i.entityType[s].navigationProperty[r].name===e){for(o=0;o<i.association.length;o+=1){for(l=i.association[o].end.length-1;l>=0;l-=1){if(i.association[o].end[l].role===i.entityType[s].navigationProperty[r].toRole){return i.association[o].end[l].type}}}}}}}}};var qe=function(e,t){var a={},n;a.parts=[];a.parameters=[];for(n=e.length-1;n>=0;n-=1){if(e[n].Type==="Path"){if(e[n].EdmType){switch(e[n].EdmType){case"Edm.DateTimeOffset":case"Edm.DateTime":a.parts.push({path:e[n].Value,type:new s({UTC:true})});break;case"Edm.Time":a.parts.push({path:e[n].Value+"/ms",type:new r({source:{pattern:"timestamp"},UTC:true})});break;case"Edm.Date":a.parts.push({path:e[n].Value,type:new o({UTC:true})});break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":a.parts.push({path:e[n].Value,type:new l});break;case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":a.parts.push({path:e[n].Value,type:new c});break;default:a.parts.push({path:e[n].Value});break}}else{a.parts.push({path:e[n].Value})}}else if(e[n].Type==="String"){a.parameters.unshift({string:e[n].Value})}}a.formatter=function(){var a="",n,i,s,r,o="",l=false,c=0,f=0;if(arguments&&arguments.length>=1){n=arguments.length-1;s="";r=0;if(e&&e[0]&&e[0].Type==="String"&&e[0].Value.substr(0,1)==="#"){l=true}for(i=0;i<e.length;i+=1){if(e[i].Type==="Path"){s=arguments[n];if(!s||s.length===0){if(a.length>r){if(a.indexOf("(")>r){a=a.substr(0,r)}else{a=a.substr(0,r);s=a}}}else{if(l){s=encodeURIComponent(s)}a+=s;c+=1}n-=1;r=a.length}else{r=a.length;o=e[i].Value;if(o.indexOf("(")!==-1){f+=1}if(s&&s.length>0||o.indexOf("(")!==-1||o&&o.substr(0,1)==="#"){a+=e[i].Value}else{o=""}}}if(t){a=t(a)}a=a.trim();if(c===1&&f>0&&a.substr(0,1)==="("&&a.substr(-1)===")"){a=a.substr(1,a.length-2)}return a.trim()}};return a};var Ye=function(e,t){var a;for(a in e){if(e.hasOwnProperty(a)){if(a==="__metadata"){continue}else if(a===t){return e[a]}else if(typeof e[a]==="object"){return Ye(e[a],t)}}}};var Ze=function(e){var t,a,n,i={},s;t=e.lastIndexOf("/");a=e.slice(0,t);n=e.slice(t+1);if(!Fe[e]){i=new f;i.loadData(a,null,false);Fe[e]=i.getData()}else{i=Fe[e]}if(Fe[e]&&Fe[e].d){if(!Fe[e].d[n]){s=Ye(Fe[e].d,n)}else{s=Fe[e].d[n]}}return s};var et=function(e,t,a,n){var i,s,r,o,l,c,f,m;i=new p;s=at(e.Value,e.EdmType,t);if(e.Value&&e.Value["com.sap.vocabularies.UI.v1.IsImageURL"]){i=new d({height:"50px"});if(s.BindingInfo){i.bindProperty("src",s.BindingInfo)}else{i.setProperty("src",s.String)}}else{if(e.UrlRef||e.Url||e.Target&&e.Target.Path){i=new u({wrapping:true})}else{i=new g;if(e.EdmType==="Edm.Decimal"||e.EdmType==="Edm.Double"||e.EdmType==="Edm.Single"||e.EdmType==="Edm.Int16"||e.EdmType==="Edm.Int32"||e.EdmType==="Edm.Int64"){i.setTextAlign(Ee.End)}}i.addStyleClass("sapFactsheetUtiDataField");if(s.BindingInfo){i.bindProperty("text",s.BindingInfo)}else{i.setProperty("text",s.String)}}if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigation"&&a){r=e.Target.Path;if(Ue[t][r.slice(1)]){if(r.charAt(0)==="@"){if(r.indexOf("/")<0){o=Ue[t][r.slice(1)].UrlRef}else{o=Ue[t][r.slice(1,r.indexOf("/"))].UrlRef}i.bindProperty("href",nt(o))}}i.attachPress(function(e){return false})}if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(e.Url.String){i.setHref(e.Url.String)}else{i.bindProperty("href",nt(e.Url));l=new g({wrapping:true});if(s.BindingInfo){l.bindProperty("text",jQuery.extend({},s.BindingInfo))}else{l.setProperty("text",s.String)}i.setVisible(false);c=new h;c.addContent(i);c.addContent(l);if(!Ae[Ae.indexOf(n)].Links){Ae[Ae.indexOf(n)].Links=[]}if(e.Url.Apply){f=e.Url.Apply.Parameters[0].Value.slice(e.Url.Apply.Parameters[0].Value.indexOf("#")+1,e.Url.Apply.Parameters[0].Value.indexOf("-"));m=e.Url.Apply.Parameters[0].Value.slice(e.Url.Apply.Parameters[0].Value.indexOf("#")+1,e.Url.Apply.Parameters[0].Value.indexOf("?"))}Ae[Ae.indexOf(n)].Links.push({sSemanticObject:f,sIntend:m,oVL:c})}}if(c){return c}return i};var tt=function(e,t,a,n){var i,s="",r="",o,l,c,f;i=new y(t);i.addStyleClass("sapFactsheetUtiLabel");if(n){s=":"}if(e.Label){if(e.Label.String){i.setText(e.Label.String.trim()+s);i.setTooltip(e.Label.String.trim())}else if(e.Label.Path){i.bindProperty("text",e.Label.Path);i.bindProperty("tooltip",e.Label.Path)}}else if(e.Value){if(e.Value.Path&&a){o=a[e.Value.Path];for(l in o){if(o.hasOwnProperty(l)){if(l==="http://www.sap.com/Protocols/SAPData"){if(o[l].label){r=o[l].label;break}}}}}else if(e.Value.Apply&&e.Value.Apply.Name==="odata.concat"){for(c in e.Value.Apply.Parameters){if(e.Value.Apply.Parameters.hasOwnProperty(c)){f=e.Value.Apply.Parameters[c];if(f.Type==="Path"){o=a[f.Value];for(l in o){if(o.hasOwnProperty(l)){if(l==="http://www.sap.com/Protocols/SAPData"){if(o[l].label){r=o[l].label;break}}}}break}}}}i.setText(r+s);i.setTooltip(r)}return i};var at=function(t,a,n){var i={},f=[],p=[],d=[],u,g,m,h,y,T,b,v,S,P,C,I;var w=function(e,t,a){var n,i={};n=Ue.propertyAnnotations[e];if(n&&n[t]&&n[t][a]){if(n[t][a].Path){i.Type="Path";i.Value=n[t][a].Path}else{i.Type="String";i.Value=n[t][a].String}}return i};if(!t){return false}if(t.Apply){if(t.Apply.Name==="odata.concat"){if(n&&Ue.propertyAnnotations&&Ue.propertyAnnotations[n]){h=t.Apply.Parameters;for(g=0;g<h.length;g+=1){f.push(h[g]);if(h[g].Type==="Path"){m=w(n,h[g].Value,"Org.OData.Measures.V1.ISOCurrency");if(!e.isEmptyObject(m)){f.push({Type:"String",Value:" "});f.push({Type:m.Type,Value:m.Value})}m=w(n,h[g].Value,"Org.OData.Measures.V1.Unit");if(!e.isEmptyObject(m)){f.push({Type:"String",Value:" "});f.push({Type:m.Type,Value:m.Value})}}}i.BindingInfo=qe(f)}else{i.BindingInfo=qe(t.Apply.Parameters)}}}else if(t.Path){if(t.Path.charAt(0)==="@"){y=Ue[n][t.Path.slice(1,t.Path.indexOf("/"))].UrlRef;T=t.Path.slice(t.Path.indexOf("/")+1);if(y&&y.Apply){b=y.Apply.Parameters;switch(y.Apply.Name){case"odata.concat":p=b;p.push({Type:"String",Value:"/"+T});break;case"odata.fillUriTemplate":v=b[0].Value.split("{");for(u in v){if(v.hasOwnProperty(u)){if(v[u].indexOf("}")<0){p.push({Type:"String",Value:v[u]})}else{S=v[u].split("}");for(g=1;g<b.length;g+=1){if(b[g].Name===S[0]){P=b[g].Value;if(P.Path){p.push({Type:"Path",Value:P.Path})}else if(P.Apply&&P.Apply.Name&&P.Apply.Name.toLowerCase()==="odata.uriencode"){C=P.Apply.Parameters[0];p.push({Type:C.Type,Value:encodeURIComponent(C.Value)});p.push({Type:"String",Value:"{"+encodeURIComponent(C.Value)+"}"})}}}p.push({Type:"String",Value:S[1]})}}}p.push({Type:"String",Value:"/"+T});i.fnChange=Me;break;default:break}i.BindingInfo=qe(p,Ze)}else if(y&&y.Path){p.push({Type:"Path",Value:y.Path},{Type:"String",Value:"/"+T});i.BindingInfo=qe(p,Ze)}else if(y&&y.String){i.String=Ze(y.String+"/"+T)}}else{i.BindingInfo={};switch(a){case"Edm.DateTimeOffset":case"Edm.DateTime":i.BindingInfo={path:t.Path,type:new s({UTC:true})};break;case"Edm.Time":i.BindingInfo={path:t.Path+"/ms",type:new r({source:{pattern:"timestamp"},UTC:true})};break;case"Edm.Date":i.BindingInfo={path:t.Path,type:new o({UTC:true})};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":if(a==="Edm.Decimal"||a==="Edm.Double"||a==="Edm.Single"){I=new l}else if(a==="Edm.Int16"||a==="Edm.Int32"||a==="Edm.Int64"){I=new c}if(Ue.propertyAnnotations){d.push({Type:"Path",Value:t.Path,EdmType:a},{Type:"String",Value:" "});m=w(n,t.Path,"Org.OData.Measures.V1.ISOCurrency");if(!e.isEmptyObject(m)){d.push({Type:m.Type,Value:m.Value})}m=w(n,t.Path,"Org.OData.Measures.V1.Unit");if(!e.isEmptyObject(m)){d.push({Type:m.Type,Value:m.Value})}i.BindingInfo=qe(d)}else{i.BindingInfo={path:t.Path,type:I}}break;default:i.BindingInfo={path:t.Path};break}}}else if(t.String){i.String=t.String}return i};var nt=function(e){var t=[],a,n,i,s,r={},o,l,c;if(e&&e.Apply){a=e.Apply.Parameters;switch(e.Apply.Name){case"odata.fillUriTemplate":a[0].Value=a[0].Value.trim();n=a[0].Value.split("{");for(i=0;i<n.length;i+=1){if(n[i].indexOf("}")<0){t.push({Value:n[i],Type:"String"})}else{s=n[i].split("}");r={};r.Value=s[0];r.Type="Path";for(i=1;i<a.length;i+=1){if(a[i].Name===r.Value){o=a[i].Value;if(o.Path){r.Value=o.Path}else if(o.Apply&&o.Apply.Name&&o.Apply.Name.toLowerCase()==="odata.uriencode"){r.Value=o.Apply.Parameters[0].Value}break}}t.push(r);t.push({Value:s[1],Type:"String"})}}l=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(l&&l.url){c=jQuery.sap.getUriParameters(l.url).get("sap-system");if(c){t.push({Type:"String",Value:"&sap-system="+c})}}break;default:break}}return qe(t)};var it=function(e){var t=Ee.Begin;if(e.EdmType==="Edm.Decimal"||e.EdmType==="Edm.Double"||e.EdmType==="Edm.Single"||e.EdmType==="Edm.Int16"||e.EdmType==="Edm.Int32"||e.EdmType==="Edm.Int64"){t=Ee.End}return t};var st=function(e,t,a,n,i,s){var r,o=0,l=0,c=0,f=0,d,u,g,m,h,y;if(!i){i=e.getServiceMetadata()}if(!a){a=[]}d=ze(t,i);y=new T({labelMinWidth:150,maxContainerCols:2});u=Ue.propertyExtensions?Ue.propertyExtensions[d]:[];if(n&&n.High){l=n.High}if(n&&n.Medium){c=n.Medium}if(n&&n.Low){f=n.Low}for(r=0;r<a.length;r+=1){g=dt(a[r]);if(n&&g==="High"){if(l){l-=1}else{continue}}else if(n&&g==="Medium"){if(c){c-=1}else{continue}}else if(n&&g==="Low"){if(f){f-=1}else{continue}}if(n&&n.Total&&o>=n.Total){break}o+=1;m=(new p).setModel(e);h=tt(a[r],{textAlign:Ee.End},u,false);h.addStyleClass("sapFactsheetUtiFormPadding");m=et(a[r],d,i,s);m.addStyleClass("sapFactsheetUtiFormPadding");if(m.setTextAlign){m.setTextAlign(Ee.Begin)}y.addContent(h);y.addContent(m)}y.addStyleClass("sapFactsheetUtiFormLayout");return y};var rt=function(e,t,a,n,i){var s="",r=[],o,l,c,f,p,d,u,g,m,y,T,S,P,C,I;l=e.getServiceMetadata();switch(a.RecordType){case"com.sap.vocabularies.UI.v1.ReferenceFacet":c=new b;if(a.Label&&a.Label.String){c.setTitle(a.Label.String)}f=a.Target.AnnotationPath;p=f.substring(f.lastIndexOf("@")+1);f=f.substring(0,f.lastIndexOf("@")-1);if(f){s=$e(t,f,l)}d=p.split("#");switch(d[0]){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":case"com.sap.vocabularies.UI.v1.Badge":case"com.sap.vocabularies.UI.v1.Identification":if(f){u=Ke(t,f,l);P=ze(u,l)}else{P=ze(t,l)}if(d[0]==="com.sap.vocabularies.UI.v1.Chart"){p="com.sap.vocabularies.UI.v1.LineItem"}C=Ue[P][p];if(Ue.propertyExtensions){I=Ue.propertyExtensions[P]}if(s==="*"&&d[0]!=="com.sap.vocabularies.UI.v1.Identification"){g=lt(e,C,P,l,n+"/"+f,a,I,i);c.setContent(g)}if(d[0]==="com.sap.vocabularies.UI.v1.Identification"){m=Ue[P]["com.sap.vocabularies.UI.v1.Identification"];y=new h({width:"100%"}).setModel(e);if(f){y.addContent(st(e,u,m,null,null,i)).addStyleClass("sapFactsheetUtiPanel");y.bindElement(n+"/"+f)}else{y.addContent(st(e,t,m,null,null,i).addStyleClass("sapFactsheetUtiPanel"))}c.setContent(y)}break;case"com.sap.vocabularies.UI.v1.StatusInfo":if(f){u=Ke(t,f,l);T=Ue[ze(u,l)]["com.sap.vocabularies.UI.v1.StatusInfo"];c.setContent(st(e,u,T,null,null,i).addStyleClass("sapFactsheetUtiPanel").bindElement(n+"/"+f))}else{T=Ue[ze(t,l)]["com.sap.vocabularies.UI.v1.StatusInfo"];c.setContent(st(e,t,T,null,null,i).addStyleClass("sapFactsheetUtiPanel"))}break;case"com.sap.vocabularies.UI.v1.FieldGroup":S=Ue[ze(t,l)][p];if(S){if(!c.getTitle()||c.getTitle()===""){if(S.Label){if(S.Label.String){c.setTitle(S.Label.String)}else if(S.Label.Path){c.bindProperty("title",S.Label.Path)}}}if(f){u=Ke(t,f,l);c.setContent(st(e,u,S.Data,null,null,i).addStyleClass("sapFactsheetUtiPanel").bindElement(n+"/"+f))}else{c.setContent(st(e,t,S.Data,null,null,i).addStyleClass("sapFactsheetUtiPanel"))}}break;default:break}return c;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":c=new v({title:a.Label.String});c.setContent(ot(a));return c;case"com.sap.vocabularies.UI.v1.CollectionFacet":for(o=0;o<a.Facets.length;o+=1){r.push(rt(e,t,a.Facets[o],n,i))}return r;default:break}};var ot=function(e){var t,a,n;switch(e.UrlContentType.String){case"image/png":case"image/jpeg":case"image/gif":t=new d({width:"100%"});if(e.Url.String){t.setSrc(e.Url.String)}return t;default:a=new S;if(e.Url.String){a.setContent("<iframe src = '"+e.Url.String+"' width='100%' height='250px' frameborder='0'></iframe>")}else if(e.Url.Path){a.bindProperty("content",{path:e.Url.Path,formatter:function(){n="<iframe src = '"+e.Url.Path+"' width='100%' height='250px' frameborder='0'></iframe>";return n}})}return a}};var lt=function(e,t,a,n,i,r,o,l){var c=[],f=[],d=[],u=[],m=[],h=[],T=false,v,S,I,j,Q,G,z,W,K,$,J,X,q,Y,Z,ee,te,ae,ne,ie,se;ne=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(!n){n=e.getServiceMetadata()}I=Ue.propertyExtensions?Ue.propertyExtensions[a]:[];j=6;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){j=5}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){j=4}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){j=3}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){j=2}Q=0;G=0;for(v=0;v<t.length;v+=1){z=dt(t[v]);if(z==="High"){Q+=1}}if(j>Q){G=j-Q}else if(j<Q){Q=j}u.push(new P({visible:false}));d.push((new g).bindText("__metadata/uri"));for(v=0;v<t.length;v+=1){se="";$=new p;z=dt(t[v]);$=et(t[v],a,n,l);W=tt(t[v],null,I);if(t[v].Value.Path){ee=t[v].Value.Path;if(o&&o[ee]&&o[ee]["http://www.sap.com/Protocols/SAPData"]&&o[ee]["http://www.sap.com/Protocols/SAPData"].sortable){W.data("IsSortable",o[ee]["http://www.sap.com/Protocols/SAPData"].sortable);if(o[ee]["http://www.sap.com/Protocols/SAPData"].sortable==="true"){T=true}}else{W.data("IsSortable","true");T=true}if(o&&o[ee]&&o[ee]["http://www.sap.com/Protocols/SAPData"]&&o[ee]["http://www.sap.com/Protocols/SAPData"].filterable){W.data("IsFilterable",o[ee]["http://www.sap.com/Protocols/SAPData"].filterable);if(o[ee]["http://www.sap.com/Protocols/SAPData"].filterable==="true"){T=true}}else{W.data("IsFilterable","true");T=true}}else{ie=true;for(S=0;S<t[v].Value.Apply.Parameters.length;S+=1){if(t[v].Value.Apply.Parameters[S].Type==="Path"){ee=t[v].Value.Apply.Parameters[S].Value;if(o[ee]&&o[ee]["http://www.sap.com/Protocols/SAPData"]&&o[ee]["http://www.sap.com/Protocols/SAPData"].sortable){if(o[ee]["http://www.sap.com/Protocols/SAPData"].sortable==="false"){ie=false;se="";break}}if(se){se+=";"}se+=ee}}ee=se;if(ie===false){W.data("IsSortable","false")}else{W.data("IsSortable","true");T=true}W.data("IsFilterable","false")}if(t[v].EdmType){W.data("EdmType",t[v].EdmType)}W.data("ColumnName",ee);c.push(W);f.push($);if(z==="High"){if(Q>0){K=true;Q-=1}else{K=false}}else if(z==="Medium"){if(G>0){K=true;G-=1}else{K=false}}else{K=false}u.push(new P({header:W,hAlign:it(t[v]),visible:K}));d.push($)}J=new C({type:xe.Navigation,unread:false,cells:d});if(r){X=r.Label.String}J.attachPress({aColumns:t,aLabels:c,aControls:f,sTitle:X},function(e,a){var n,i,s,r,o,p,d;i=e.getSource().getCells()[0].getText().substr(e.getSource().getCells()[0].getText().lastIndexOf("/"));s=new w({backgroundDesign:we.Transparent,showSeparators:Ie.None,columns:[new P({hAlign:Ee.End}),new P]});s.addStyleClass("sapFactsheetUtiPanel");s.addStyleClass("sapFactsheetUtiTilePadding");s.addStyleClass("sapFactsheetUtiTableNoTopBorder");s.bindElement(i);for(n=0;n<t.length;n+=1){r=c[n].clone();r.setText(r.getText()+":");d=f[n].clone();r.setLabelFor(d);s.addItem(new C({cells:[r,d]}))}o=new b({content:s,title:X,description:_e()});p=new x({title:De.getTitle(),showNavButton:true,content:[o]});De.navigateToPage(p,true);De.attachAfterNavigate(s,function(e){if(e.getParameters().getParameters().toId.indexOf("__page")>=0){var t;t=s.getItems();if(t.length>0&&Ae.indexOf(l)>=0){Ae[Ae.indexOf(l)].bLoaded=true;Ae[Ae.indexOf(l)].bProcessed=false;Ae[Ae.indexOf(l)].bIsTable=true;Ae[Ae.indexOf(l)].oTableItems=t;ht(Ae.indexOf(l))}}})});q=new w({growing:true,columns:u});q.setModel(e);q.bindItems({path:i,template:J});var re=new E({items:[new U({placeholder:ne.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(e){var t,a,n,i,s;t=e.getSource().getParent().getParent().getId();a=sap.ui.getCore().byId(t.substr(0,t.indexOf("-")));n=a.getFilterItems();for(s=0;s<n.length;s+=1){if(n[s]instanceof N&&n[s].getKey()===this.oParent.data("ColumnName")){i=n[s];break}}if(i){if(e.getParameter("newValue")===undefined||e.getParameter("newValue")===""){i.setSelected(false);i.setFilterCount(0)}else{i.setSelected(true);i.setFilterCount(1)}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});var oe=new E({items:[new A({mode:Ce.SingleSelectLeft,includeItemInSelection:true,items:[new O({title:ne.getText("USHELL_FACTSHEET_GREATER_THEN")}).data("FilterOperator",F.GT),new O({title:ne.getText("USHELL_FACTSHEET_EQUALS")}).data("FilterOperator",F.EQ),new O({title:ne.getText("USHELL_FACTSHEET_LESS_THEN")}).data("FilterOperator",F.LT)]}),new U({placeholder:ne.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(e){var t,a,n,i,s;t=e.getSource().getParent().getParent().getId();a=sap.ui.getCore().byId(t.substr(0,t.indexOf("-")));n=a.getFilterItems();for(s=0;s<n.length;s+=1){if(n[s]instanceof N&&n[s].getKey()===this.oParent.data("ColumnName")){i=n[s];break}}if(i){if(e.getParameter("newValue")===undefined||e.getParameter("newValue")===""){i.setSelected(false);i.setFilterCount(0)}else{i.setSelected(true);i.setFilterCount(1)}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});new E({items:[new A({mode:Ce.SingleSelectLeft,includeItemInSelection:true,items:[new O({title:ne.getText("USHELL_FACTSHEET_AFTER")}).data("FilterOperator",F.GT),new O({title:ne.getText("USHELL_FACTSHEET_AT")}).data("FilterOperator",F.EQ),new O({title:ne.getText("USHELL_FACTSHEET_BEFORE")}).data("FilterOperator",F.LT)]}),new V({type:Pe.Date,valueFormat:new s({pattern:"yyyy/MM/dd HH:mm:ss UTC+00:00"}).getOutputPattern(),placeholder:ne.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(e){var t,a,n,i,s;t=e.getSource().getParent().getParent().getId();a=sap.ui.getCore().byId(t.substr(0,t.indexOf("-")));n=a.getFilterItems();for(s=0;s<n.length;s+=1){if(n[s]instanceof N&&n[s].getKey()===this.oParent.data("ColumnName")){i=n[s];break}}if(e.getParameter("newValue")===undefined||e.getParameter("newValue")===""){i.setSelected(false);i.setFilterCount(0)}else{i.setSelected(true);i.setFilterCount(1)}}}).addStyleClass("sapFactsheetUtiFilterInput")]});var le=function(e){var t=[],a=e.getItems(),n,i,s;if(a[0].getParent().data("EdmType")==="Edm.String"&&a[0].getValue()){t.push(new L(a[0].getParent().data("ColumnName"),F.Contains,a[0].getValue()))}else if(a[0].getParent().data("EdmType")==="Edm.Decimal"&&a[1].getValue()){for(n=0;n<a[0].getItems().length;n+=1){if(a[0].getItems()[n].getSelected()===true){i=a[0].getItems()[n].data("FilterOperator");break}}s=a[1].getValue();for(n=s.length-1;n>0;n-=1){if(s[n]===","){s=s.replace(s[n],".");break}}t.push(new L(a[1].getParent().data("ColumnName"),i,s))}else if(a[0].getParent().data("EdmType")==="Edm.Date"&&a[1].getValue()){for(n=0;n<a[0].getItems().length;n+=1){if(a[0].getItems()[n].getSelected()===true){i=a[0].getItems()[n].data("FilterOperator");break}}t.push(new L(a[1].getParent().data("ColumnName"),i,a[1].getValue()))}else{t.push(new L(a[0].getParent().data("ColumnName"),F.EQ,a[0].getValue()))}return t};var ce=function(e){var t=e.getSource(),a=t.getFilterItems(),n,i,s;for(n=0;n<a.length;n+=1){if(a[n]&&a[n]instanceof N){a[n].setSelected(false);a[n].setFilterCount(0);s=a[n].getCustomControl().getItems();for(i=0;i<s.length;i+=1){if(s[i]instanceof U||s[i]instanceof V){s[i].setValue("")}if(s[i]instanceof A&&s[i].getSelectedItem()!==null){s[i].removeSelections()}}}}};var fe=ce;for(v=0;v<u.length;v+=1){if(u[v+1]){W=c[v].clone();if(W.getText()&&W.data("IsSortable")==="true"&&u[v+1].getVisible()){Y=new D({text:W.getText(),key:W.data("ColumnName")});if(v===0){Y.setSelected(true)}Y.Sort=W.Sort;m.push(Y)}if(W.getText()&&W.data("IsFilterable")==="true"){if(W.data("EdmType")==="Edm.String"){ae=re.clone().data("ColumnName",W.data("ColumnName")).data("EdmType",W.data("EdmType"))}else if(W.data("EdmType")==="Edm.Decimal"){ae=oe.clone().data("ColumnName",W.data("ColumnName")).data("EdmType",W.data("EdmType"))}if(W.data("EdmType")==="Edm.String"||W.data("EdmType")==="Edm.Decimal"){te=new N({key:W.data("ColumnName"),text:W.getText(),customControl:ae,customData:new k({key:"callback",value:le})});h.push(te)}}}}Z=new B({sortItems:m,filterItems:h,cancel:fe,resetFilters:ce,confirm:function(e){var t=[],a=[],n=[],i=[],s,r,o,l,c,f,p;o=e.getParameters();l=q.getBinding("items");if(o.sortItem){c=o.sortItem.getKey();f=o.sortDescending;if(c.indexOf(";")>0){a=c.split(";");for(s=0;s<a.length;s+=1){t.push(new M(a[s],f))}}else if(c){t.push(new M(c,f))}l.sort(t)}r=o;for(s=0;s<r.filterItems.length;s+=1){if(r.filterItems[s]instanceof N){p=r.filterItems[s].getCustomData()[0].getValue();n=p.apply(this,[r.filterItems[s].getCustomControl()]);if(n){if(!Array.isArray(n)){n=[n]}i=i.concat(n)}}else if(r.filterItems[s]instanceof D){n=r.filterItems[s].getCustomData()[0].getValue();if(n){if(!Array.isArray(n)){n=[n]}i=i.concat(n)}}}l.filter(i)}});if(T===true&&(m.length>0||h.length>0)){q.setHeaderToolbar(new _({content:[new y,new H,new R({icon:"sap-icon://drop-down-list",press:function(){Z.open()},tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("P13NDIALOG_VIEW_SETTINGS")})]}))}q.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));var pe=function(e){return function(t){var a=this.getItems();if(a.length===0){this.setNoDataText(ne.getText("FACETOVERVIEW_NO_CONTENT_TEXT"))}else{this.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"))}if(a.length>0&&Ae.indexOf(e)>=0){Ae[Ae.indexOf(e)].bLoaded=true;Ae[Ae.indexOf(e)].bProcessed=false;Ae[Ae.indexOf(e)].bIsTable=true;Ae[Ae.indexOf(e)].oTableItems=a}ht(Ae.indexOf(e))}}(l);q.attachUpdateFinished(pe);return q};var ct=function(e,t,a,n){var i;switch(e){case"com.sap.vocabularies.UI.v1.ChartType/Area":i=new j({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bar":i=new Q({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bubble":i=new G({});break;case"com.sap.vocabularies.UI.v1.ChartType/Column":i=new z({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":i=new W({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":i=new K({});break;case"com.sap.vocabularies.UI.v1.ChartType/Donut":i=new $({});break;case"com.sap.vocabularies.UI.v1.ChartType/HeatMap":i=new J({});break;case"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":i=new X({});break;case"com.sap.vocabularies.UI.v1.ChartType/Line":i=new q({});break;case"com.sap.vocabularies.UI.v1.ChartType/Pie":i=new Y({});break;case"com.sap.vocabularies.UI.v1.ChartType/Scatter":i=new Z({});break;case"com.sap.vocabularies.UI.v1.ChartType/TreeMap":i=new ee({});break;case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked100":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/Radar":case"com.sap.vocabularies.UI.v1.ChartType/Waterfall":break}if(i){if(t&&t.String){i.setTitle(new te({visible:true,text:t.String}))}if(a&&a.String){i.setTooltip(a.String)}i.setWidth("100%");i.setHeight("17rem");i.setDataset(n)}else{i=new g({})}return i};var ft=function(e){var t;e=e||1;if(jQuery.device.is.phone){t=7*e+"rem"}else{t=11*e-1+"rem"}return t};var pt=function(e){var t=0,a=0,n=0,i,s;for(i=0;i<e.length;i+=1){s=dt(e[i]);if(s){switch(s){case"High":t+=1;break;case"Medium":a+=1;break;case"Low":n+=1;break}}}return{High:t,Medium:a,Low:n}};var dt=function(e){var t="";if(e.Importance){t=e.Importance.EnumMember}else if(e["com.sap.vocabularies.UI.v1.Importance"]){t=e["com.sap.vocabularies.UI.v1.Importance"].EnumMember}return t.substr(t.indexOf("/")+1)};var ut=function(t,a,n,i){var s=false,r,o,l,c;r=new ae({doubleFontSize:false});if(a.ValueFormat){o=a.ValueFormat.NumberOfFractionalDigits.Int}if(a.Title&&a.Title.String){r.setDescription(a.Title.String)}else if(a.Title&&a.Title.Path){r.bindProperty("description",{path:a.Title.Path})}if(a.Value&&a.Value.String){r.setValue(a.Value.String)}else if(a.Value&&a.Value.Path){l=at(a.Value,a.Value.EdmType,n);if(l.fnChange){r.setModel(t);r.bindElement(i);r.getElementBinding().attachChange(l.fnChange,r)}if(l.String){if(e.isNumeric(l.String)){s=true;r.setValue(Be(l.String,o))}else{r.setValue(l.String)}}else if(l.BindingInfo){c=l.BindingInfo;if(c.parts&&c.parts.length===2){r.bindProperty("valueUnit",c.parts[0]);c.parts[1].type=undefined;c.parts[1].formatter=function(){return function(e){return Be(e,o)}}(o);r.bindProperty("value",c.parts[1])}else if(c.parts&&c.parts.length===1){c.parts[0].type=undefined;c.parts[0].formatter=function(){return function(e){return Be(e,o)}}(o);r.bindProperty("value",c)}else{r.bindProperty("value",c)}}}if(a.Value.EdmType==="Edm.Decimal"||a.Value.EdmType==="Edm.Double"||a.Value.EdmType==="Edm.Single"||a.Value.EdmType==="Edm.Int16"||a.Value.EdmType==="Edm.Int32"||a.Value.EdmType==="Edm.Int64"||s===true){r.setDoubleFontSize(true)}return r};var gt=function(e){var t=[],a=[],n,i,s;var r=function(e){if(o(e)===false){if(Array.isArray(e)){for(i=0;i<e.length;i+=1){o(e[i])}}else if(typeof e==="object"){for(s in e){if(e.hasOwnProperty(s)){if(e[s].constructor!==String){r(e[s])}}}}}};var o=function(e){if(e.RecordType&&e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(e.Url&&e.Url.Apply){n=e.Url.Apply.Parameters[0].Value.slice(e.Url.Apply.Parameters[0].Value.indexOf("#")+1,e.Url.Apply.Parameters[0].Value.indexOf("-"));if(t.indexOf(n)<0){t.push(n)}return true}}else{return false}};for(s in Ue){if(Ue.hasOwnProperty(s)){if(s.indexOf(e.dataServices.schema[0].namespace)>=0){r(Ue[s])}}}for(i=0;i<t.length;i+=1){if(!Oe.hasOwnProperty(t[i])){a.push(t[i])}}return a};var mt=function(e){var t,a,n,i;if(e.length>0){a=new f;n="/sap/opu/odata/UI2/INTEROP/SemanticObjects?$expand=Links&$format=json";i="&$filter=id%20eq%20%27";for(t=0;t<e.length;t+=1){if(i.length>22){i+="%20or%20id%20eq%20%27"+e[t]+"%27"}else{i+=e[t]+"%27"}}n+=n+i;a.loadData(n);a.attachRequestCompleted(function(){var e=[],t,a,n;if(this.getData().d&&this.getData().d.results){n=this.getData().d.results;for(t=0;t<n.length;t+=1){Oe[n[t].id]="";e=n[t].Links.results;for(a=0;a<e.length;a+=1){Oe[e[a].id.slice(0,e[a].id.indexOf("~"))]=""}}}Oe.InteropCompleted=true;ht()})}else{Oe.InteropCompleted=true}};var ht=function(e){var t,a,n,i,s,r,o;if(Oe.InteropCompleted===true){for(t=0;t<Ae.length;t+=1){if(Ae[t].bLoaded&&!Ae[t].bProcessed&&Ae[t].Links){o=Ae[t].Links;for(a=0;a<o.length;a+=1){if(Oe.hasOwnProperty(o[a].sIntend)===true){if(Ae[t].bIsTable===true){if(Ae[t].oTableItems){s=Ae[t].oTableItems;for(n=0;n<s.length;n+=1){r=s[n].getCells();for(i=0;i<r.length;i+=1){if(r[i]instanceof h&&r[i].getContent()[0].getBindingInfo("href").parts===o[a].oVL.getContent()[0].getBindingInfo("href").parts&&r[i].getContent()[1].getBindingInfo("text").parts===o[a].oVL.getContent()[1].getBindingInfo("text").parts){r[i].getContent()[0].setVisible(true);r[i].getContent()[1].setVisible(false)}}}}}else{o[a].oVL.getContent()[0].setVisible(true);o[a].oVL.getContent()[1].setVisible(false)}}else if(Ae[t].bIsTable===false){o[a].oVL.getContent()[1].setText(o[a].oVL.getContent()[0].getText())}Ae[t].bProcessed=true}}}}if(e>=0){if(Ae[e].bLoaded&&!Ae[e].bProcessed&&Ae[e].Links){o=Ae[e].Links;for(a=0;a<o.length;a+=1){if(Ae[e].bIsTable===false){o[a].oVL.getContent()[1].setText(o[a].oVL.getContent()[0].getText())}}}}};var yt=function(t,a,i){var s={},r=[],o=0,l=0,c=0,p,m,T,v,x,E,U,A,O,F,V,L,N,k,j,Q,G,z,W,K,$,J,X,q,Y,Z,ee,te,ae,se,Pe,Ce,Ie,we,xe,Fe,Le,De,Ne,ke,Be,Me,Qe,Ge,We,qe,Ye;T=He(t);z=a.substring(0,a.substring(0,a.lastIndexOf("/")).lastIndexOf("/"));W=a.substring(a.substring(0,a.lastIndexOf("/")).lastIndexOf("/"));if(window.location.search.indexOf("cbn_keep_anno_case%3Dtrue")===-1){W=W.toLowerCase()}v=new ne(T,{annotationURI:z+W,loadAnnotationsJoined:true,loadMetadataAsync:false,json:true});v.setCountSupported(false);i.setModel(v);x=Re(t,v);E="/"+t.slice(T.length);U=v.getServiceMetadata();Ue=v.getServiceAnnotations();A=ze(x,U);O=Ue[A]["com.sap.vocabularies.UI.v1.HeaderInfo"];F=Ue[A]["com.sap.vocabularies.UI.v1.Facets"];i.bindElement(E,Je(x,U));K=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");Oe.InteropCompleted=false;mt(gt(U));i.addStyleClass("sapFactsheetUtiThingType"+x.replace(/\s/g,""));if(O.TypeName.String){i.setTitle(O.TypeName.String)}else if(O.TypeName.Path){i.bindProperty("title",{path:O.TypeName.Path})}if(O.ImageUrl&&O.ImageUrl.String){i.setIcon(O.ImageUrl.String)}else if(O.ImageUrl&&O.ImageUrl.Path){i.bindProperty("icon",{path:O.ImageUrl.Path})}else if(O.TypeImageUrl&&O.TypeImageUrl.String){i.setIcon(O.TypeImageUrl.String)}else if(O.TypeImageUrl&&O.TypeImageUrl.Path){i.bindProperty("icon",{path:O.TypeImageUrl.Path})}if(O.Title.Value.String){i.setName(O.Title.Value.String)}else{i.bindProperty("name",at(O.Title.Value,O.Title.EdmType,A).BindingInfo)}if(O.Description&&O.Description.Value){if(O.Description.Value.String){i.setDescription(O.Description.Value.String)}else{i.bindProperty("description",at(O.Description.Value,O.Description.EdmType,A).BindingInfo)}}for(Ge in Ue[A]){if(Ue[A].hasOwnProperty(Ge)){if(Ge.search("com.sap.vocabularies.UI.v1.DataPoint")!==-1){We=Ue[A][Ge];if(We){i.addKpi(ut(v,We,A,E));c+=1}}if(c>=3){break}}}for(p=0;p<F.length;p+=1){if(F[p]["com.sap.vocabularies.UI.v1.IsSummary"]){k=F[p];break}}if(k){$=15;for(m=0;m<k.Facets.length;m+=1){J=k.Facets[m].Target.AnnotationPath.substring(k.Facets[m].Target.AnnotationPath.lastIndexOf("@")+1);V=k.Facets[m].Target.AnnotationPath;V=V.substring(0,V.lastIndexOf("@")-1);k.Facets[m].NavPath=V;X=Ke(x,V,U);k.Facets[m].NavEntitySet=X;if(X){q=X}else{q=x}k.Facets[m].EntitySet=q;Y=ze(X,U);if(Y){Z=Y}else{Z=A}k.Facets[m].EntityType=Z;ee=[];if(Ue[Z][J].length){ee=Ue[Z][J]}else if(Ue[Z][J].Data.length){ee=Ue[Z][J].Data}k.Facets[m].Content=ee;for(p=0;p<ee.length;p+=1){te=dt(ee[p]);if(te==="High"){o+=1}else if(te==="Medium"){l+=1}}}if(o>=$){o=$;l=0}else if(o+l>$){l=$-o;if(l<0){l=0}}if(jQuery.device.is.phone){l=0}se=$-o-l;De=new ie({title:K.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT")});Ae=[];Ae.push(De);Ae[0].bLoaded=false;Ae[0].bProcessed=false;Ae[0].bIsTable=false;Pe=[];Ie=l+o;for(m=0;m<k.Facets.length;m+=1){we=st(v,k.Facets[m].EntitySet,k.Facets[m].Content,{High:o,Medium:l,Low:0},null,De).addStyleClass("sapFactsheetUtiTilePadding");if(m>0){we.addStyleClass("sapFactsheetUtiPaddingTop")}if(k.Facets[m].NavPath){we.bindElement(E+"/"+k.Facets[m].NavPath)}Ce=pt(k.Facets[m].Content);o-=Ce.High;l-=Ce.Medium;if(Ce.High>0&&o+Ce.High>0||Ce.Medium>0&&l+Ce.Medium>0){Pe.push(we);if(m>0){if(se>0){se-=1}else if(l>0){l-=1}else if(o>0){o-=1}}}if(o<1&&l<1){break}}if(o<0){o=0}if(l<0){l=0}s=new h({content:Pe,width:"100%"});xe=ft();Le=1;if(Ie>3&&Ie<=9){xe=ft(2);Le=2}else if(Ie>9){xe=ft(3);Le=3}De.setContent(s);De.setRowSpan(Le);if(jQuery.device.is.phone){De.setHeightType(Se.Auto)}else{De.setHeight(xe)}De.addStyleClass("sapFactsheetUtiGeneralInformationOverviewFacet");De.attachPress({facets:k},function(e,t){var a,n,s,r,o;i.removeAllFacetContent();s=new b;s.setDescription(_e());s.setTitle(K.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));s.addStyleClass("sapFactsheetUtiGeneralInformationUtg");if(t.facets.Facets.length>1){a="L6 M12 S12"}else{a="L12 M12 S12"}Ae[0].Links=[];r=new h({width:"100%"});for(p=0;p<t.facets.Facets.length;p+=1){if(p%2===0){n=new re({hSpacing:1,vSpacing:1,defaultSpan:a})}o=rt(v,x,t.facets.Facets[p],E,this);o.addStyleClass("sapFactsheetUtiGeneralInformationUtgContent");if(p===0&&t.facets.Facets.length>1&&o.getTitle().trim()===""){o.setTitle(K.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"))}n.addContent(o);if(p%2!==0){r.addContent(n)}}Ae[0].bLoaded=true;Ae[0].bProcessed=false;Ae[0].bIsTable=false;ht(0);if(p%2!==0){r.addContent(n)}s.setContent(r);i.addFacetContent(s);i.navigateToDetail()});i.addFacet(De)}var Ze=function(t){return function(a){var n,s,r,o,l,c,p,d,u,g,m,y,T,S,P;if(t.cardinality==="*"&&a.results&&a.results.length&&a.results.length!==0||t.cardinality==="1"&&a){c=new f;if(t.cardinality==="*"){if(a.results&&a.results.length){c.setData(a)}}else{c.setData({result:a});p="/result"}s=new ne("/sap/opu/odata/sap/VBI_APPL_DEF_SRV",false);r=Ue[t.navigationType]["com.sap.vocabularies.UI.v1.GeoLocation"];u=Ue[t.navigationType]["com.sap.vocabularies.UI.v1.HeaderInfo"];g=Ue[t.navigationType]["com.sap.vocabularies.UI.v1.Identification"];if(r.Longitude&&r.Latitude){l={Data:{Set:{N:[{name:"Spots",E:[]}]}}};if(t.cardinality==="1"){if(r.Longitude.Path&&r.Latitude.Path){o=a[r.Longitude.Path]+";"+a[r.Latitude.Path]+";0"}l.Data.Set.N[0].E.push({A:o,I:"pin_blue.png"})}else{for(n=0;n<a.results.length;n+=1){if(r.Longitude.Path&&r.Latitude.Path){o=a.results[n][r.Longitude.Path]+";"+a.results[n][r.Latitude.Path]+";0"}l.Data.Set.N[0].E.push({A:o,I:"pin_blue.png"})}if(a.results.length!==0){o=a.results[0][r.Longitude.Path]+";"+a.results[0][r.Latitude.Path]+";0"}}}P=parseInt(a.__count,10);if(Number(P)){t.facet.setQuantity(P)}var C=function(t){var a,n,i,s,r;a=e.parseJSON(t.getParameters().data);if(a.Action.name==="DETAIL_REQUEST"&&a.Action.instance){n=a.Action.instance;if(c.oData.results){p="/results/"+n.split(".")[1]}S=u.TypeName.String.substring(0,17);s=parseFloat(ft(.7))*16;r=parseFloat(ft(1.5))*16;i={SAPVB:{version:"2.0","xmlns:VB":"VB",Windows:{Remove:{name:"Detail1"},Set:{name:"Detail1",Window:{id:"Detail1",type:"callout",refParent:"Main",refScene:"",offsetX:"16",offsetY:"-27",modal:"false",width:r,height:s,caption:S,"pos.bind":n+".GeoPosition"}}},Scenes:{Set:{name:"Details",Scene:{id:"Details",navControlVisible:"false"}}}}};this.load(i)}};var I=function(e){var a,n,i,s;if(!m){m=et(u.Title,t.navigationType,U,t.facet);m.setModel(c);m.bindElement(p);y=et(u.Description,t.navigationType,U,t.facet);y.setModel(c);y.bindElement(p);for(a in r.Address){if(a==="label"){d=et({Value:r.Address[a]},t.navigationType,U,t.facet);d.setModel(c);d.bindElement(p);break}}s=7;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){s=4}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){s=5}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){s=2}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){s=3}T=new h({width:"100%"}).setModel(v);if(t.navigationPath){i=Ke(t.entitySet,t.navigationPath,U);T.addContent(st(v,i,g,{High:s},null,t.facet));T.setModel(c).bindElement(p)}else{T.addContent(st(v,t.entitySet,g,{High:s},null,t.facet)).setModel(c).bindElement(p)}}else{m.bindElement(p);if(y){y.bindElement(p)}if(d){d.bindElement(p)}if(T){T.bindElement(p)}}n=parseFloat(ft(1.5))*16*.95+"px";if(m){m.placeAt(e.getParameter("contentarea").id);m.addStyleClass("sapFactsheetUtiGeoPopupHead");if(jQuery.device.is.phone){m.addStyleClass("sapFactsheetUtiGeoPopupHeadFontPhone")}m.setWidth(n)}if(y){y.placeAt(e.getParameter("contentarea").id);y.addStyleClass("sapFactsheetUtiGeoPopupDescr");if(jQuery.device.is.phone){y.addStyleClass("sapFactsheetUtiGeoPopupDescrFontPhone")}y.setWidth(n)}if(d){d.placeAt(e.getParameter("contentarea").id);d.addStyleClass("sapFactsheetUtiGeoPopupText");d.setWidth(n)}if(T&&T.getContent()[0]&&T.getContent()[0].getContent&&T.getContent()[0].getContent().length>0){T.placeAt(e.getParameter("contentarea").id);T.addStyleClass("sapFactsheetUtiGeoPopupText");T.setWidth(n)}if(Ae.indexOf(t.facet)>=0){Ae[Ae.indexOf(t.facet)].bLoaded=true;Ae[Ae.indexOf(t.facet)].bProcessed=false;Ae[Ae.indexOf(t.facet)].bIsTable=false}ht(Ae.indexOf(t.facet))};var w=function(t){if(m){m.destroy();m=undefined}if(y){y.destroy();y=undefined}if(d){d.destroy();d=undefined}if(T){T.destroy();T=undefined}e(t.getParameter("contentarea").id).empty()};var x=function(t){return function(a){var n,s,f,p,d;p=a.ProjectJSON;p=p.indexOf("{")?p.substr(p.indexOf("{")):p;n=e.parseJSON(p);n.SAPVB.Scenes.Set.SceneGeo.initialStartPosition=o;n.SAPVB.Scenes.Set.SceneGeo.initialZoom=12;n.SAPVB.Actions.Set.Action.push({id:"200",name:"TAP_ON_MAP",refEvent:"Click",refScene:"MainScene",refVO:"Map"});if(l){n.SAPVB.Data=l.Data}for(d=0;d<n.SAPVB.Scenes.Set.SceneGeo.VO.length;d+=1){if(n.SAPVB.Scenes.Set.SceneGeo.VO[d].datasource==="Spots"){if(n.SAPVB.Scenes.Set.SceneGeo.VO[d].scale&&n.SAPVB.Scenes.Set.SceneGeo.VO[d].scale.split(";").length!==3){n.SAPVB.Scenes.Set.SceneGeo.VO[d].scale="1.0;1.0;1.0";break}}}t.facet.getContent().attachSubmit(function(){if(jQuery.device.is.tablet||jQuery.device.is.phone){t.facet.firePress()}});t.facet.getContent().load(n);t.facet.attachPress("",function(){var a=[],o=[],l,p;if(!s){s=new oe({width:"100%",height:"100%",plugin:false,config:null});s.addStyleClass("sapFactsheetUtiGeoPopup")}n.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.move="false";n.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.zoom="false";n.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.pitch="false";n.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.yaw="false";n.SAPVB.Scenes.Set.SceneGeo.SuppressedNavControlVisibility="false";s.load(n);if(t.cardinality==="*"){for(l=0;l<c.oData.results.length;l+=1){a.push(c.oData.results[l][r.Longitude.Path]);o.push(c.oData.results[l][r.Latitude.Path])}}s.attachSubmit(C);s.attachOpenWindow(I);s.attachCloseWindow(w);f=new b({content:s,title:t.facetContent.Label.String,description:_e()});i.removeAllFacetContent();i.addFacetContent(f);i.navigateToDetail();i.attachAfterNavigate(a,function(t){if(t.getParameters().getParameters().toId.indexOf("-detail-page")!==-1){if(jQuery.device.is.phone){p="300px"}else{p=Math.floor(e("#"+t.getParameters().getParameters().toId+"-cont").height()-128)+"px"}s.setHeight(p);if(a.length>1){s.zoomToGeoPosition(a,o)}}})})}};var E=function(e){return function(){i.removeFacet(e)}};s.read("VBIApplicationSet('ZFACTSHEETS')","","",false,x(t),E(t.facet))}else{t.facet.setQuantity(undefined);t.facet.addStyleClass("sapFactsheetUtiEmptyTile");t.facet.setHeightType(jQuery.device.is.phone?Se.Auto:Se.S);t.facet.setContent(undefined);t.facet.setTitle(undefined)}}};var nt=function(e){return function(t){var a="",s,r,o,l,c,p,u,m,y,T,b,P,C,I,w,x,E,A,O,F,V,L,D,N,k,B,M,_,H,R,j;o=new f;if(e.facetContent.Target&&e.facetContent.Target.AnnotationPath&&e.facetContent.Target.AnnotationPath.split("#")[1]&&Ue[e.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+e.facetContent.Target.AnnotationPath.split("#")[1]]){l=Ue[e.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+e.facetContent.Target.AnnotationPath.split("#")[1]]}else{l=Ue[e.navigationType]["com.sap.vocabularies.UI.v1.Badge"]}if(e.cardinality==="*"){if(t.results&&t.results.length){B=e.facetContent.Target.AnnotationPath;qe=B.substring(B.lastIndexOf("@")+1);if(qe==="com.sap.vocabularies.UI.v1.Chart"){M=Ue[e.navigationType]["com.sap.vocabularies.UI.v1.Chart"];_=Ue.propertyExtensions[e.navigationType];H=[];for(s=0;s<M.Dimensions.length;s+=1){H.push({axis:1,name:_[M.Dimensions[s].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+M.Dimensions[s].PropertyPath+"}"})}R=[];for(s=0;s<M.Measures.length;s+=1){R.push({name:_[M.Measures[s].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+M.Measures[s].PropertyPath+"}"})}j=new n({dimensions:H,measures:R,data:{path:"/results"}});y=ct(M.ChartType.EnumMember,M.Title,M.Description,j);y.setModel(o);e.facet.setHeightType(jQuery.device.is.phone?Se.Auto:Se.XL)}else{y=new h({width:"100%"}).addStyleClass("sapFactsheetUtiVLayoutPadding");for(s=0;s<t.results.length;s+=1){u=(new le).addStyleClass("sapFactsheetUtiHLayoutPadding");c=et(l.Title,e.navigationType,U,e.facet);if(c.setWrapping){c.setWrapping(false)}sap.ui.getCore().byId(i.getId()+"-master-page").addDelegate({onAfterShow:function(e){return function(){var t,a;t=e.getParent().getDomRef().clientWidth;a=t;if(e.getContent()[0]){a-=e.getContent()[0].getDomRef().clientWidth;if(t<e.getContent()[0].getDomRef().clientWidth){e.getContent()[0].getDomRef().setAttribute("style","width:"+t+"px");return}}if(e.getContent()[1]){a-=e.getContent()[1].getDomRef().clientWidth}if(a<10){a=0}if(e.getContent()[2]){e.getContent()[2].getDomRef().setAttribute("style","width:"+a+"px")}}}(u)});o=new f;o.setData({result:t.results[s]});c.setModel(o);c.bindElement("/result");m=false;if(t.results[s][l.Title.Value.Path]){m=true}if(l.Title.Value.Apply){for(r=0;r<l.Title.Value.Apply.Parameters.length;r+=1){if(l.Title.Value.Apply.Parameters[r].Type==="Path"){if(t.results[s][l.Title.Value.Apply.Parameters[r].Value]){m=true;break}}}}a="";if(m){u.addContent(c);if(l.MainInfo&&(l.MainInfo.EdmType&&l.MainInfo.EdmType==="Edm.Decimal"||l.MainInfo.Value&&l.MainInfo.Value.Apply&&l.MainInfo.Value.Apply.Parameters[0]&&l.MainInfo.Value.Apply.Parameters[0].EdmType&&l.MainInfo.Value.Apply.Parameters[0].EdmType==="Edm.Decimal")){a="comma"}else if(l.MainInfo&&l.MainInfo.Value.Path&&t.results[s][l.MainInfo.Value.Path]){a="dash"}else if(l.MainInfo&&l.MainInfo.Value.Apply){for(r=0;r<l.MainInfo.Value.Apply.Parameters.length;r+=1){if(l.MainInfo.Value.Apply.Parameters[r].Type==="Path"){if(t.results[s][l.MainInfo.Value.Apply.Parameters[r].Value]){a="dash";break}}}}if(a==="dash"){u.addContent(new S({content:'<span class="sapFactsheetUtiSeparatorPadding sapMText"> &ndash; </span>'}))}if(a==="comma"){u.addContent(new g({text:", "}).addStyleClass("sapFactsheetUtiSeparatorPaddingForDecimal"))}}if(l.MainInfo){p=et(l.MainInfo,e.navigationType,U,e.facet);if(p.setWrapping){p.setWrapping(false)}p.setModel(o);p.bindElement("/result");u.addContent(p)}y.addContent(u)}}T=parseInt(t.__count,10);if(Number(T)){e.facet.setQuantity(T)}e.facet.setContent(y);e.facet.attachPress({facet:e.facetContent},function(t,a){var n;i.removeAllFacetContent();Ae[Ae.indexOf(e.facet)].Links=[];n=rt(v,e.entitySet,a.facet,e.bindingPath,this);n.setDescription(_e());i.addFacetContent(n);if(Ae.indexOf(e.facet)>=0){Ae[Ae.indexOf(e.facet)].bLoaded=false;Ae[Ae.indexOf(e.facet)].bProcessed=false;Ae[Ae.indexOf(e.facet)].bIsTable=true}ht(Ae.indexOf(e.facet));i.navigateToDetail()})}else{e.facet.setQuantity(0);e.facet.addStyleClass("sapFactsheetUtiEmptyTile");e.facet.setHeightType(jQuery.device.is.phone?Se.Auto:Se.S)}if(Ae.indexOf(e.facet)>=0){Ae[Ae.indexOf(e.facet)].bLoaded=true;Ae[Ae.indexOf(e.facet)].bProcessed=false;Ae[Ae.indexOf(e.facet)].bIsTable=false}ht(Ae.indexOf(e.facet))}else{o.setData({result:t});for(N in t){if(t.hasOwnProperty(N)){if(N!=="__metadata"){if(typeof t[N]==="string"&&t[N]){if(parseInt(t[N],10)!==0){k=true;break}}else if(typeof t[N]==="number"&&parseInt(t[N],10)!==0){k=true;break}}}}if(k){b=new h;P=Ue.propertyExtensions?Ue.propertyExtensions[e.navigationType]:[];C=(new le).addStyleClass("sapFactsheetUtiHLayoutLabelValue");I=tt(l.Title,{},P,true).addStyleClass("sapFactsheetUtiLabelMargin");c=et(l.Title,e.navigationType,U,e.facet);c.setModel(o);c.bindElement("/result");C.addContent(I);C.addContent(c);b.addContent(C);if(l.MainInfo){w=(new le).addStyleClass("sapFactsheetUtiHLayoutLabelValue");x=tt(l.MainInfo,{},P,true).addStyleClass("sapFactsheetUtiLabelMargin");p=et(l.MainInfo,e.navigationType,U,e.facet);p.setModel(o);p.bindElement("/result");w.addContent(x);w.addContent(p);b.addContent(w)}if(l.SecondaryInfo){E=(new le).addStyleClass("sapFactsheetUtiHLayoutLabelValue");A=tt(l.SecondaryInfo,{},P,true).addStyleClass("sapFactsheetUtiLabelMargin");O=et(l.SecondaryInfo,e.navigationType,U,e.facet);O.setModel(o);O.bindElement("/result");E.addContent(A);E.addContent(O);b.addContent(E)}if(l.TypeImageUrl||l.ImageUrl){if(l.ImageUrl){F=l.ImageUrl}else{F=l.TypeImageUrl}V=new le;L="64px";if(jQuery.device.is.phone){L="48px"}if(F.String&&F.String.substr(0,11)==="sap-icon://"){D=new ce({size:L,width:L})}else{D=new d({width:L})}D.addStyleClass("sapFactsheetUtiRelIcon");if(F&&F.String){D.setSrc(F.String)}else if(F&&F.Path){D.bindProperty("src",F.Path)}V.addContent(D);V.addContent(b);e.facet.setContent(V)}else{e.facet.setContent(b)}e.facet.attachPress({facet:e.facetContent},function(t,a){var n;i.removeAllFacetContent();Ae[Ae.indexOf(e.facet)].Links=[];n=rt(v,e.entitySet,a.facet,e.bindingPath,this);n.setDescription(_e());i.addFacetContent(n);if(Ae.indexOf(e.facet)>=0){Ae[Ae.indexOf(e.facet)].bLoaded=true;Ae[Ae.indexOf(e.facet)].bProcessed=false;Ae[Ae.indexOf(e.facet)].bIsTable=false}ht(Ae.indexOf(e.facet));i.navigateToDetail()})}else{e.facet.addStyleClass("sapFactsheetUtiEmptyTile");e.facet.setHeightType(jQuery.device.is.phone?Se.Auto:Se.S)}if(Ae.indexOf(e.facet)>=0){Ae[Ae.indexOf(e.facet)].bLoaded=true;Ae[Ae.indexOf(e.facet)].bProcessed=false;Ae[Ae.indexOf(e.facet)].bIsTable=false}ht(Ae.indexOf(e.facet))}}};var it=function(e){return function(){i.removeFacet(e.facet)}};var ot=function(e){return function(t){var a,n,s,r,o;n=Ue[e.navigationType]["com.sap.vocabularies.UI.v1.MediaResource"];if(e.cardinality==="*"){if(t.results&&t.results.length){a=(new le).addStyleClass("sapFactsheetUtiPictureViewerOverview");for(s=0;s<t.results.length;s+=1){a.addContent(new d({src:t.results[s][n.Thumbnail.Url.Path],height:"85px"}));if(s===3){break}}r=parseInt(t.__count,10);if(Number(r)){e.facet.setQuantity(r)}e.facet.setContent(a);e.facet.attachPress({facet:e.facetContent,data:t},function(e,t){var a,r,l;i.removeAllFacetContent();o=new b;if(t.facet.Label&&t.facet.Label.String){o.setTitle(t.facet.Label.String)}o.setDescription(_e());if(jQuery.device.is.phone){r="350px"}else{r="550px"}a=new fe({height:r});for(s=0;s<t.data.results.length;s+=1){l=new d({src:t.data.results[s][n.Url.Path]});if(jQuery.device.is.phone){l.addStyleClass("sapFactsheetUtiCarouselMaxImageHeightPhone")}else{l.addStyleClass("sapFactsheetUtiCarouselMaxImageHeight")}a.addPage(l)}o.setContent(a);i.addFacetContent(o);i.navigateToDetail()})}else{e.facet.setQuantity(0);e.facet.addStyleClass("sapFactsheetUtiEmptyTile");e.facet.setHeightType(jQuery.device.is.phone?Se.Auto:Se.S)}}}};var lt=function(e,t){var a=[],n={},i,s,r,o,l,c,f,p,d,u;var g=function(e,t){var a,n="";if(e){if(e.Path){return t[e.Path]}else if(e.String){return e.String}else if(e.Apply.Name==="odata.concat"){for(a=0;a<e.Apply.Parameters.length;a+=1){if(e.Apply.Parameters[a].Type==="Path"){n=n+t[e.Apply.Parameters[a].Value]}else if(e.Apply.Parameters[a].Type==="String"){n=n+e.Apply.Parameters[a].Value}}return n}}};n.iCount=0;n.aContacts=[];for(i=0;i<e.__batchResponses.length;i+=1){if(!e.__batchResponses[i].data){continue}a=e.__batchResponses[i].data.results;if(!a){a=[];a.push(e.__batchResponses[i].data)}if(a.length>0){o=Ue[a[0].__metadata.type]["com.sap.vocabularies.Communication.v1.Contact"];if(o){for(s=0;s<a.length;s+=1){l=c=f="";if(o.tel){for(r=0;r<o.tel.length;r+=1){if(o.tel[r].type&&o.tel[r].type.EnumMember){p=g(o.tel[r].uri,a[s]);switch(o.tel[r].type.EnumMember){case"com.sap.vocabularies.Communication.v1.PhoneType/voice":l=p?p.replace("tel:",""):"";l=l?l.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/cell":c=p?p.replace("tel:",""):"";c=c?c.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/fax":f=p?p.replace("tel:",""):"";f=f?f.replace(";ext=",""):"";break}}}}u=o.email&&o.email.address?o.email.address:"";d=g(o.photo,a[s]);n.iCount+=1;n.aContacts.push({fn:g(o.fn,a[s]),title:g(o.title,a[s]),org:g(o.org,a[s]),phone:l,mobile:c,fax:f,photo:d,email:g(u,a[s]),sEntity:a[0].__metadata.type,bExistsPhoto:!!d,bUseIcon:!d,sOrder:n.iCount})}}}}if(t){n.aContacts.sort(function(e,a){return e[t]>a[t]?1:-1})}return n};var yt=function(){return function(e){var t,a,n,s,r,o,l,c;a=lt(e,"sOrder");n=new re({defaultSpan:"L6 M6 S12",hSpacing:0,vSpacing:0}).addStyleClass("sapFactsheetUtiContactsGrid");for(t=0;t<a.aContacts.length&&t<4;t+=1){o=new h;if(a.aContacts[t].photo){l=new d({height:"55px",src:a.aContacts[t].photo})}else{l=new ce({size:"50px",src:pe.getIconURI("person-placeholder")}).addStyleClass("sapFactsheetUtiRelIcon")}o.addContent(l);o.addStyleClass("sapFactsheetUtiContactsImage");r=new h({content:[new g({text:a.aContacts[t].fn}).addStyleClass("sapFactsheetUtiTextName"),new g({text:a.aContacts[t].title}).addStyleClass("sapFactsheetUtiTextValue")]});s=new le({content:[o,r]}).addStyleClass("sapFactsheetUtiContactsBox");n.addContent(s)}De=sap.ui.getCore().byId(i.data("contactFacetId"));De.setQuantity(a.iCount);if(t>0){De.setContent(n);if(t<=2){c=Se.M}else{c=Se.L}De.attachPress(function(){var e,t=[],a;v.clearBatch();for(e=0;e<Ue[A]["com.sap.vocabularies.UI.v1.Contacts"].length;e+=1){V=Ue[A]["com.sap.vocabularies.UI.v1.Contacts"][e].AnnotationPath;V=V.substring(0,V.lastIndexOf("@")-1);if(V!==""){a=E+"/"+V}else{a=E}t.push(v.createBatchOperation(a,"GET"))}v.addBatchReadOperations(t);v.submitBatch(function(e){var t,a,n,s,r,o,l;l=jQuery.sap.resources({url:jQuery.sap.getModulePath("sap.ushell.components.container.")+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});t=lt(e,"sEntity");a=new f;a.setData(t);n=new C({type:I.Inactive,unread:false,cells:[new h({content:[new d({src:"{photo}",width:"74px",visible:"{bExistsPhoto}"}),new ce({size:"76px",src:pe.getIconURI("person-placeholder"),visible:"{bUseIcon}"}).addStyleClass("sapFactsheetUtiRelIcon")]}),new h({content:[new g({text:"{fn}"}).addStyleClass("sapFactsheetUtiContactsName"),new y({text:"{title}"}),new y({text:"{org}"})]}),new u({text:"{phone}",href:"tel:{phone}"}),new u({text:"{mobile}",href:"tel:{mobile}"}),new u({text:"{fax}",href:"tel:{fax}"}),new u({text:"{email}",href:"mailto:{email}"})]});s=new w({threshold:2,inset:false,showUnread:true,scrollToLoad:true,columns:[new P({hAlign:Ee.Center,width:"12%",header:new g({text:""})}),new P({hAlign:Ee.Begin,header:new g({text:l.getText("USHELL_FACTSHEET_NAME")})}),new P({hAlign:Ee.Begin,width:"12%",header:new g({text:l.getText("USHELL_FACTSHEET_PHONE")}),minScreenWidth:"Tablet",demandPopin:true}),new P({hAlign:Ee.Begin,width:"12%",header:new g({text:de.i18n.getText("mobile")}),minScreenWidth:"Tablet",demandPopin:true}),new P({hAlign:Ee.Begin,width:"12%",header:new g({text:de.i18n.getText("fax")}),minScreenWidth:"Tablet",demandPopin:true}),new P({hAlign:Ee.Begin,width:"26%",header:new g({text:l.getText("USHELL_FACTSHEET_EMAIL")}),minScreenWidth:"Tablet",demandPopin:true})],items:{path:"/aContacts",template:n}});r=new B({sortItems:[new D({key:"fn",text:l.getText("USHELL_FACTSHEET_NAME")}),new D({key:"phone",text:l.getText("USHELL_FACTSHEET_PHONE")}),new D({key:"mobile",text:de.i18n.getText("mobile")}),new D({key:"fax",text:de.i18n.getText("fax")}),new D({key:"email",text:l.getText("USHELL_FACTSHEET_EMAIL")})],confirm:function(e){var t,a,n=[];t=e.getParameters();a=s.getBinding("items");if(t.sortItem){n.push(new M(t.sortItem.getKey(),t.sortDescending));a.sort(n)}}});s.setHeaderToolbar(new _({content:[new y,new H,new R({icon:"sap-icon://drop-down-list",press:function(){r.open()}})]}));s.setModel(a);o=new b({title:De.getTitle(),description:_e(),content:s});i.removeAllFacetContent();i.addFacetContent(o);i.navigateToDetail()})})}else{c=Se.S;De.addStyleClass("sapFactsheetUtiEmptyTile");De.setQuantity(0)}De.setHeightType(jQuery.device.is.phone?Se.Auto:c)}};for(p=0;p<F.length;p+=1){if(F[p]["com.sap.vocabularies.UI.v1.Map"]){V=F[p].Target.AnnotationPath;V=V.substring(0,V.lastIndexOf("@")-1);Be="1";ke=A;if(V){ke=Xe(V,A,U);Be=$e(x,V,U)}Ye="100%";if(jQuery.device.is.phone){Ye="150px"}Ne=new oe({width:"100%",height:Ye,plugin:false,config:null});De=new ie({title:F[p].Label.String.trim(),heightType:jQuery.device.is.phone?Se.Auto:Se.L,content:Ne});Ae.push(De);Ae[Ae.length-1].bLoaded=false;Ae[Ae.length-1].bProcessed=false;Ae[Ae.length-1].bIsTable=false;L={cardinality:Be,navigationPath:V,facet:De,facetContent:F[p],navigationType:ke,metadata:U,bindingPath:E,entitySet:x};if(Be==="*"){Me=["$inlinecount=allpages","$top=1000"]}else{Me=[]}v.read(E+"/"+V,"",Me,true,Ze(L));i.addFacet(De)}else if(F[p].Target){V=F[p].Target.AnnotationPath;V=V.substring(0,V.lastIndexOf("@")-1);qe=F[p].Target.AnnotationPath.substring(F[p].Target.AnnotationPath.lastIndexOf("@")+1);if(V){ke=Xe(V,A,U);De=new ie({title:F[p].Label.String.trim(),heightType:jQuery.device.is.phone?Se.Auto:Se.M});Be=$e(x,V,U);if(Be!==0){L={cardinality:Be,navigationPath:V,facet:De,facetContent:F[p],navigationType:ke,metadata:U,bindingPath:E,entitySet:x};if(F[p]["com.sap.vocabularies.UI.v1.Gallery"]){if(Be==="*"){Me=["$inlinecount=allpages"]}else{Me=[]}v.read(E+"/"+V,"",Me,true,ot(L))}else{Ae.push(De);Ae[Ae.length-1].bLoaded=false;Ae[Ae.length-1].bProcessed=false;Ae[Ae.length-1].bIsTable=false;if(Be==="*"){Me=["$inlinecount=allpages","$top=3"]}else{Me=[]}v.read(E+"/"+V,"",Me,true,nt(L),it(L))}i.addFacet(De)}}else if(qe==="com.sap.vocabularies.UI.v1.Contacts"){De=new ie({title:F[p].Label.String.trim(),heightType:jQuery.device.is.phone?Se.Auto:Se.M});i.data("contactFacetId",De.sId);L={facet:De};v.clearBatch();for(m=0;m<Ue[A][qe].length;m+=1){V=Ue[A][qe][m].AnnotationPath;V=V.substring(0,V.lastIndexOf("@")-1);if(V!==""){Be=$e(x,V,U);if(Be==="*"){ae=E+"/"+V+"?$top=4&$inlinecount=allpages"}else{ae=E+"/"+V}}else{ae=E}r.push(v.createBatchOperation(ae,"GET"))}v.addBatchReadOperations(r);v.submitBatch(yt(L));i.addFacet(De)}}}Fe=new ue;var Tt=function(){var e={},a,n,s,r,o,l,c,f,p,d,m,h,y,T;Fe.setAppData({title:i.getTitle(),subtitle:i.getName()+" - "+i.getDescription()});Fe.setEnabled(true);h=sap.ushell.Container.getService("URLParsing");y=h.getShellHash(window.location.href);T=h.parseShellHash(y);p=T.semanticObject;Q=new ge({showCancelButton:true,placement:ve.Top});N=je(t,v);o=N.split(",");for(a=0;a<o.length;a+=1){o[a]=o[a].replace("='","=","g");if(o[a].lastIndexOf("'")===o[a].length-1){o[a]=o[a].slice(0,-1)}}for(l in Ue[A]){if(Ue[A].hasOwnProperty(l)){if(l.indexOf("com.sap.vocabularies.Common.v1.SecondaryKey")===0){c=Ue[A][l];for(a=0;a<c.length;a+=1){f=this.getBoundContext().getProperty(c[a].PropertyPath);if(f){o.push(c[a].PropertyPath+"="+f)}}}}}for(a=0;a<o.length;a+=1){s=o[a].substr(0,o[a].indexOf("="));r=o[a].substr(o[a].indexOf("=")+1,o[a].length);e[decodeURIComponent(s)]=decodeURIComponent(r)}j=sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(p,e);j.done(function(e){var t,a,n;for(t=0;t<e.length;t+=1){n=e[t].intent;if(n.indexOf(Ve)<0&&n.indexOf("-analyzeKPIDetails~")<0&&n.indexOf("-analyzeSBKPIDetails~")<0&&n.indexOf("-NavigateToMaintainCusProj~")<0&&n.indexOf("CostCenter-manageCostCenter~")<0&&n.indexOf("AccountingDocument-analyzeDocumentJournal~")<0&&n.indexOf("AccountingDocument-analyzeGLLineItem~")<0&&n.indexOf("ControllingDocument-analyzeCostCenters~")<0&&n.indexOf("ControllingDocument-analyzeInternalOrders~")<0&&n.indexOf("ControllingDocument-analyzeMarketSegment~")<0&&n.indexOf("ControllingDocument-analyzeProfitCentersActuals~")<0&&n.indexOf("ControllingDocument-analyzeProfitLoss~")<0&&n.indexOf("ControllingDocument-analyzeProjectsActuals~")<0&&n.indexOf("PurchaseOrder-create~")<0){a=sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({target:{shellHash:n}});Q.addItem(new u({text:e[t].text,href:a}));i.setTransactionsVisible(true)}}});i.attachTransactionsButtonPress(function(e){Q.openBy(e.getParameter("caller"))});this.detachChange(Tt);me.setWindowTitle(i.getTitle().trim()+": "+i.getName().trim()+" ("+i.getDescription().trim()+")");i.setActionsVisible(true);Qe=new R({text:K.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_EMAIL_LINK"),icon:"sap-icon://email",press:function(){be.triggerEmail("",i.getName(),window.location.href)}});G=new he({placement:ve.Top});d=t.substr(0,t.lastIndexOf("/")+1);for(n in v.oData){if(v.oData.hasOwnProperty(n)){d=d+n;m=n.substring(n.indexOf("(")+1,n.indexOf(")"));break}}G.addButton(new ye({jamData:{businessObject:{appContext:"CB",odataServicePath:t.substr(0,t.lastIndexOf("/")+1),collection:x,key:m,name:i.getTitle(),ui_url:window.location.href}}}));G.addButton(new Te({jamData:{object:{id:window.location.href,display:new g({text:i.getTitle()}),share:""},externalObject:{appContext:"CB",odataServicePath:t.substr(0,t.lastIndexOf("/")+1),collection:x,key:m,name:i.getTitle()}}}));G.addButton(Fe);G.addButton(Qe);i.attachActionsButtonPress(function(e){G.openBy(e.getParameter("caller"))});Ae[0].bLoaded=true;Ae[0].bProcessed=false;ht(0)};i.getElementBinding().attachChange(Tt);i.attachBackAction(function(){history.back()});i.addDelegate({onAfterRendering:function(){i._adjustFacetLayout()}});return i};return function(e,a){try{De=yt(e,a,new t({configurationVisible:false}))}catch(e){throw e}return De}},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/tools/ODataUrlTemplating", function(){"use strict";function e(e,t,r){this.parameter=e;this.template=t;this.semiConvertedUrl=r;this.message=" is a missing key parameter for constructing the entity url";this.toString=function(){return this.parameter+this.message}}var t={ParameterException:e,resolve:function(e,t){var r,n,i,s,a=e.match(/{\s*[\w.]+\s*}/g);r=e;for(s=a.length-1;s>=0;s-=1){i=a[s];n=t[i.replace(/[{}]/g,"")];if(n!==undefined){if(typeof n!=="string"){n=n[0]}n=encodeURIComponent(decodeURIComponent(n));r=r.replace(i,n)}}i=r.match(/{\s*[\w.]+\s*}/g);if(i){jQuery.sap.log.error(" "+r);throw new this.ParameterException(i,e,r)}return r}};return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/views/ThingViewer.controller", ["sap/ui/model/odata/ODataModel"],function(e){"use strict";sap.ui.controller("sap.ushell.components.factsheet.views.ThingViewer",{setService:function(t){this.getView().setModel(new e(t))}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/factsheet/views/ThingViewer.view", ["sap/ushell/components/factsheet/tools/ODataUrlTemplating","sap/ushell/components/factsheet/factory/ThingInspector","sap/ui/model/odata/ODataUtils","sap/ui/core/Component"],function(e,t,a,n){"use strict";sap.ui.jsview("sap.ushell.components.factsheet.views.ThingViewer",{getControllerName:function(){return"sap.ushell.components.factsheet.views.ThingViewer"},createContent:function(){var s,o,r,i,p,l;p=this.getViewData();s=p.entity||p.service;if(!s){r=p.entityTemplateURI||p.template;if(r){if(typeof r!=="string"){r=r[0]}r=r.replace(/%25/g,"%");r=r.replace(/%28/g,"(");r=r.replace(/%29/g,")");r=r.replace(/%27/g,"'");r=r.replace(/%3D/g,"=");r=r.replace(/%7B/g,"{");r=r.replace(/%7D/g,"}");s=e.resolve(r,p)}}o=p.annotationURI||p.annotation;if(typeof s!=="string"){s=s[0]}if(typeof o!=="string"){o=o[0]}l=s.substr(0,s.lastIndexOf("/"));function c(e,t){var n;if(sap.ui.model.odata&&a&&typeof a.setOrigin==="function"){if(!(e&&e.getComponentData())){throw new Error("no component passed")}if(e&&e.getComponentData()&&e.getComponentData().startupParameters&&e.getComponentData().startupParameters["sap-system"]){n=e.getComponentData().startupParameters["sap-system"][0];t=a.setOrigin(t,{alias:n})}}return t}l=c(n.getOwnerComponentFor(this),l);l=l+s.substr(s.lastIndexOf("/"));i=t(l,o);i.addStyleClass("ThingInspector");return i}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homeApp/error/Component", ["sap/ui/core/UIComponent","sap/ushell/resources"],function(e,n){"use strict";return e.extend("sap.ushell.components.homeApp.error.Component",{metadata:{manifest:"json",library:"sap.ushell"},init:function(){e.prototype.init.apply(this,arguments);this.setModel(n.i18nModel,"i18n")}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homeApp/error/HomeAppError.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ushell/resources","sap/ushell/Config","sap/ushell/utils"],function(e,o,s,t,n,i){"use strict";var p=n.last("/core/homeApp/component").messages||[];return e.extend("sap.ushell.components.homeApp.error.HomeAppError",{onInit:function(){this._oModel=new o({icon:"sap-icon://documents",text:t.i18n.getText("HomeApp.GeneralError.Text"),description:"",details:JSON.stringify(p,null,4)});this.getView().setModel(this._oModel)},onCopyErrorDetailsPress:function(){var e=i.copyToClipboard(this._oModel.getProperty("/details"));if(e){s.show(t.i18n.getText("HomeApp.CannotLoadApp.CopySuccess"),{closeOnBrowserNavigation:false})}else{s.show(t.i18n.getText("HomeApp.CannotLoadApp.CopyFail"),{closeOnBrowserNavigation:false})}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/ActionMode", ["sap/base/Log","sap/m/Button","sap/m/library","sap/m/Popover","sap/m/Text","sap/ui/core/Core","sap/ushell/components/HomepageManager","sap/ushell/resources","sap/ushell/utils/WindowUtils"],function(e,t,i,o,n,s,a,r,l){"use strict";var c=i.PlacementType;var d=function(){this.oEventBus=s.getEventBus();this.init=function(e){this.oModel=e}};d.prototype._activate=function(){this.oModel.setProperty("/tileActionModeActive",true);this.aOrigHiddenGroupsIds=this.getHomepageManager().getCurrentHiddenGroupIds(this.oModel);var e=s.byId("dashboardGroups");e.addLinksToUnselectedGroups();var t=s.byId("ActionModeBtn");if(t){t.setText(r.i18n.getText("exitEditMode"));if(t.setSelected){t.setSelected(true)}}this.oEventBus.publish("launchpad","actionModeActive")};d.prototype._deactivate=function(){this.oModel.setProperty("/tileActionModeActive",false);this.oEventBus.publish("launchpad","actionModeInactive",this.aOrigHiddenGroupsIds);var e=s.byId("TileActions");if(e!==undefined){e.destroy()}var t=s.byId("ActionModeBtn");if(t){t.setText(r.i18n.getText("activateEditMode"));if(t.setSelected){t.setSelected(false)}}};d.prototype.toggleActionMode=function(e,t,i){i=i||[];var o=i.filter(function(e){return e.getVisible()});var n={group:o[e.getProperty("/topGroupInViewPortIndex")]};if(e.getProperty("/tileActionModeActive")){this._deactivate();var s=document.querySelector(".sapUshellTileContainerHeader[tabindex='0']");if(s){var a=s.closest("sapUshellTileContainer");if(a){n.restoreLastFocusedTileContainerById=a.getAttribute("id")}}}else{this._activate()}setTimeout(function(){this.oEventBus.publish("launchpad","scrollToGroup",n)}.bind(this),0)};d.prototype.activateGroupEditMode=function(e){var t=e.getDomRef().getElementsByClassName("sapUshellTileContainerContent");for(var i=0;i<t.length;i++){t[i].classList.add("sapUshellTileContainerEditMode")}};d.prototype.getHomepageManager=function(){if(!this.oHomepageManager){this.oHomepageManager=a.prototype.getInstance()}return this.oHomepageManager};d.prototype._filterActions=function(e,t){var i=t.getModel();var o=t.getParent().getBindingContext().getPath();if(i.getProperty(o+"/isGroupLocked")){["tileSettingsBtn","linkSettingsBtn","ConvertToTile","ConvertToLink","moveTile_action"].forEach(function(t){e=e.filter(function(e){return e.id!==t})})}if(this.getHomepageManager().getPersonalizableGroups().length<2){e=e.filter(function(e){return e.id!=="moveTile_action"})}return e};d.prototype._openActionsMenu=function(i){var o=i.getSource();var n=o.getBindingContext().getObject().object;var a=this.getHomepageManager().getTileActions(n);a=this._filterActions(a,o);var r=document.getElementsByClassName("sapUshellTileActionLayerDivSelected");for(var l=0;l<r.length;l++){r[l].classList.remove("sapUshellTileActionLayerDivSelected")}var d=o.getDomRef().getElementsByClassName("sapUshellTileActionLayerDiv");for(var p=0;p<d.length;p++){d[p].classList.add("sapUshellTileActionLayerDivSelected")}var u=[];a.forEach(function(i){if(!i.press&&!i.targetURL){e.warning("Invalid Tile action discarded: "+JSON.stringify(i));return}u.push(new t({text:i.text,icon:i.icon,press:this._handleActionPress.bind(this,i,o)}))}.bind(this));if(u.length===0){this._openNoActionsPopover(i);return}var g=o.getActionSheetIcon?o.getActionSheetIcon():undefined;if(!g){var h=s.byId(o.getId()+"-action-more");g=h||o}var f=s.byId("TileActions");if(!f){sap.ui.require(["sap/m/ActionSheet"],function(e){f=new e("TileActions",{placement:c.VerticalPreferedBottom,afterClose:function(){var e=document.getElementsByClassName("sapUshellTileActionLayerDivSelected");for(var t=0;t<e.length;t++){e[t].classList.remove("sapUshellTileActionLayerDivSelected")}var i=s.getEventBus();i.publish("dashboard","actionSheetClose",o)}});this._openActionSheet(f,u,g)}.bind(this))}else{this._openActionSheet(f,u,g)}};d.prototype._openActionSheet=function(e,t,i){t=t||[];e.destroyButtons();t.forEach(function(t){e.addButton(t)});e.openBy(i)};d.prototype._openNoActionsPopover=function(e){var t=e.getSource();new o({placement:c.Bottom,showHeader:false,content:new n({text:r.i18n.getText("tileHasNoActions")})}).addStyleClass("sapUiContentPadding").openBy(t)};d.prototype._handleActionPress=function(e,t){if(e.press){e.press(t)}else if(e.targetURL){if(e.targetURL.indexOf("#")===0){hasher.setHash(e.targetURL)}else{l.openURL(e.targetURL,"_blank")}}};return new d},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/Component", ["sap/ui/core/mvc/View","sap/ui/core/UIComponent","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/HomepageManager","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ushell/resources"],function(e,o,t,s,a,i,n){"use strict";return o.extend("sap.ushell.components.homepage.Component",{metadata:{manifest:"json",library:"sap.ushell",interfaces:["sap.ui.core.IAsyncContentCreation"]},init:function(){this.oModel=t.getModel();this.setModel(this.oModel);o.prototype.init.apply(this,arguments);return this.rootControlLoaded().then(function(e){this.oDashboardView=e;var o={model:this.oModel,view:this.oDashboardView};this.oHomepageManager=new s("dashboardMgr",o);this.setModel(n.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted",function(){sap.ui.require(["sap/ushell/components/homepage/FLPAnalytics"])});a.toggleUserActivityLog();a.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");i.on("/core/home/homePageGroupDisplay").do(function(e){this.oHomepageManager.handleDisplayModeChange(e)}.bind(this));a.getEffectiveHomepageSetting("/core/home/sizeBehavior","/core/home/sizeBehaviorConfigurable");i.on("/core/home/sizeBehavior").do(function(e){var o=this.oHomepageManager.getModel();o.setProperty("/sizeBehavior",e)}.bind(this))}.bind(this))},createContent:function(){return e.create({viewName:"module:sap/ushell/components/homepage/DashboardContent.view"})},exit:function(){this.oHomepageManager.destroy()}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/DashboardContent.controller", ["sap/base/Log","sap/ui/core/Core","sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/thirdparty/jquery","sap/ushell/components/homepage/DashboardUIActions","sap/ushell/components/HomepageManager","sap/ushell/EventHub","sap/ushell/Layout","sap/ushell/resources","sap/ushell/utils"],function(e,t,r,i,o,s,jQuery,n,a,l,u,d,p){"use strict";return r.extend("sap.ushell.components.homepage.DashboardContent",{onInit:function(){var e=t.getEventBus();this.handleDashboardScroll=function(){window.setTimeout(this._handleDashboardScroll.bind(this),0)}.bind(this);e.subscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe("launchpad","actionModeInactive",this._handleGroupVisibilityChanges,this);e.subscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.addEventListener("visibilitychange",p.handleTilesVisibility,false)},onExit:function(){var e=t.getEventBus();e.unsubscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.unsubscribe("launchpad","actionModeInactive",this._handleGroupVisibilityChanges,this);e.unsubscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.removeEventListener("visibilitychange",p.handleTilesVisibility,false);if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.destroy();delete this.oDashboardUIActionsModule}window.removeEventListener("resize",this._resizeHandler.bind(this))},onAfterRendering:function(){p.setPerformanceMark("FLP - dashboard after rendering");var e=a.prototype.getInstance();if(!e.getPreparedGroupModel()){e.loadPersonalizedGroups()}else{l.once("firstSegmentCompleteLoaded").do(e.handleFirstSegmentLoaded.bind(e))}var r=t.getEventBus(),o,s,n,u;r.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);r.unsubscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);r.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);r.subscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);i.orientation.attachHandler(function(){var e=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible");if(e.length){o=this.getView().getModel();s=o.getProperty("/topGroupInViewPortIndex");if(e.get(s)){n=t.byId(e.get(s).id);u=o.getProperty("/editTitle");this._publishAsync("launchpad","scrollToGroup",{group:n,isInEditTitle:u})}}},this);window.addEventListener("resize",this._resizeHandler.bind(this));this._updateTopGroupInModel()},_resizeHandler:function(){clearTimeout(this._resizeTimer);this._resizeTimer=setTimeout(this.resizeHandler.bind(this),300)},_dashboardDeleteTileHandler:function(e){var r=e.getSource().getBindingContext().getObject();t.getEventBus().publish("launchpad","deleteTile",{tileId:r.uuid,items:"tiles"},this)},dashboardTilePress:function(e){var r=e.getSource();if(!r){return}t.getEventBus().publish("launchpad","dashboardTileClick",{uuid:r.getUuid()})},_updateTopGroupInModel:function(){var e=this.getView().getModel(),t=this._getIndexOfTopGroupInViewPort();var r=this._getModelGroupFromVisibleIndex(t);e.setProperty("/iSelectedGroup",r);e.setProperty("/topGroupInViewPortIndex",t)},_getIndexOfTopGroupInViewPort:function(){var e=this.getView().getDomRef();if(!e){return 0}var t=e.getElementsByTagName("section")[0];var r=jQuery(t).find(".sapUshellTileContainer").not(".sapUshellHidden");if(!r){return 0}for(var i=0;i<r.length;i++){var o=r[i].parentElement;if(t.scrollTop<=o.offsetTop+o.offsetHeight){return i}}return r.length?r.length-1:0},_handleDashboardScroll:function(){var e=this.getView(),t=e.getModel(),r=100;var o=t.getProperty("/homePageGroupDisplay"),s=o!=="tabs",n=t.getProperty("/tileActionModeActive");function a(){p.handleTilesVisibility()}clearTimeout(this.timeoutId);this.timeoutId=setTimeout(a,r);if(!i.system.phone){e.oAnchorNavigationBar.closeOverflowPopup()}if(s||n){this._updateTopGroupInModel()}e.oAnchorNavigationBar.reArrangeNavigationBarElements()},_handleGroupDeletion:function(e){sap.ui.require(["sap/m/MessageBox"],function(r){var i=t.getEventBus(),o=e.getObject(),s=o.removable,n=o.title,a=o.groupId,l=d.i18n,u=r.Action,p=s?u.DELETE:l.getText("ResetGroupBtn");sap.ushell.Container.getServiceAsync("Message").then(function(e){e.confirm(l.getText(s?"delete_group_msg":"reset_group_msg",n),function(e){if(e===p){i.publish("launchpad",s?"deleteGroup":"resetGroup",{groupId:a})}},l.getText(s?"delete_group":"reset_group"),[p,u.CANCEL])})})},_modelLoaded:function(){this.bModelInitialized=true;u.getInitPromise().then(function(){this._initializeUIActions()}.bind(this))},_initializeUIActions:function(){if(!this.oDashboardUIActionsModule){this.oDashboardUIActionsModule=new n}this.oDashboardUIActionsModule.initializeUIActions(this)},resizeHandler:function(){p.recalculateBottomSpace();p.handleTilesVisibility();if(l.last("AppRendered")!==undefined){l.emit("AppRendered",undefined)}if(u&&jQuery("#dashboardGroups").is(":visible")&&this.bModelInitialized){u.reRenderGroupsLayout(null);this._initializeUIActions()}},_appOpenedHandler:function(e,t,r){var i,o,s=this.getView().getModel(),n=r.additionalInformation||"";i=this.getOwnerComponent();o=i.getMetadata().getComponentName();if(n.indexOf(o)===-1){p.setTilesNoVisibility()}var a=sap.ui.require("sap/ushell/components/homepage/ActionMode");if(s.getProperty("/tileActionModeActive")&&a){a.toggleActionMode(s,"Menu Item");if(s.getProperty("/homePageGroupDisplay")==="tabs"){this._deactivateActionModeInTabsState();this.getView().oAnchorNavigationBar.reArrangeNavigationBarElements()}}if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.disableAllDashboardUiAction()}},_scrollToGroupByName:function(e,t,r){var i=this.getView().getModel().getProperty("/groups"),o=r.groupName;sap.ushell.Container.getServiceAsync("LaunchPage").then(function(r){i.forEach(function(i){if(r.getGroupTitle(i.object)===o){this._scrollToGroup(e,t,{groupId:i.groupId})}}.bind(this))}.bind(this))},_scrollToGroup:function(t,r,o){var s=o.group?o.group.getGroupId():o.groupId;var n;if(this.oView.oDashboardGroupsBox.getGroups()){n=this.oView.oDashboardGroupsBox.getGroups().reduce(function(e,t){return t&&t.getGroupId()===s?t:e},null)}var a=n&&n.getDomRef();if(!a){return e.warning("Could not scroll to group: Group is not rendered!")}var l=a.querySelector(".sapUshellTileContainerContent");if(!l){return e.warning("Could not scroll to group: Group Content is not rendered!")}var u=document.getElementById("dashboardGroups");var d=l.getBoundingClientRect();var g=u.getBoundingClientRect();if(d.top===g.top){u.parentElement.scrollTop=0}else{l.scrollIntoView()}var h=new Promise(function(e){if(i.system.desktop&&(o.restoreLastFocusedTile||o.groupChanged)){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(t){t.getInstance().then(function(e){var t=n.$();if(o.restoreLastFocusedTile){var r=false;if(o.restoreLastFocusedTileContainerById){t=jQuery("#"+o.restoreLastFocusedTileContainerById);r=true}e.goToLastVisitedTile(t,r)}else if(o.groupChanged){var i=t.find(".sapUshellTile, .sapMGTLineMode, .sapFCard").filter(":visible").eq(0);if(i.length){e.moveScrollDashboard(i)}}}).then(e)})}else{e()}});h.then(function(){if(o.isInEditTitle){n.setEditMode(true)}p.handleTilesVisibility()});return h},_handleDrop:function(e,r){var i=u.getLayoutEngine(),o=i.layoutEndCallback(),s=!o.dstArea,n=t.getEventBus(),a,l,d,p=jQuery.Deferred(),g=this.getView(),h=g.getModel(),c=h.getProperty("/homePageGroupDisplay")&&h.getProperty("/homePageGroupDisplay")==="tabs",f=h.getProperty("/tileActionModeActive"),b=true,v;if(!o.tile){n.publish("launchpad","sortableStop");return null}u.getLayoutEngine()._toggleAnchorItemHighlighting(false);if(o.dstGroup){var G=o.dstGroup.getBindingContext(),m=G.getProperty(G.sPath).isGroupLocked;b=s&&m}v=o.tile.getBindingContext().getObject().isLinkPersonalizationSupported;if(!o.tileMovedFlag||b||!v&&o.dstArea==="links"){n.publish("launchpad","sortableStop");return null}if(!f&&!c&&o.dstArea==="links"&&!o.dstGroupData.getLinks().length){n.publish("launchpad","sortableStop");return null}a=true;l=true;if(o.srcGroup!==o.dstGroup){a=l=false}else if(o.tile!==o.dstGroup.getTiles()[o.dstTileIndex]){l=false}d=this._getTileUuid(o.tile);if(o.srcGroup&&o.srcGroup.removeAggregation&&o.srcArea){o.srcGroup.removeAggregation("tiles",o.tile,a)}var I=o.dstGroupData&&o.dstGroupData.insertAggregation&&o.dstArea===o.srcArea;if(I){o.tile.sParentAggregationName=o.dstArea;o.dstGroupData.insertAggregation(o.dstArea,o.tile,o.dstTileIndex,l);p=this._handleSameTypeDrop(o,d,I)}else if(s){p=this._handleShortDrop(o,d,I)}else{p=this._handleConvertDrop(o,I,r)}if(this.getView().getModel()){this.getView().getModel().setProperty("/draggedTileLinkPersonalizationSupported",true)}n.publish("launchpad","sortableStop");return p.promise()},_handleSameTypeDrop:function(e,r,i){var o=t.getEventBus(),s=jQuery.Deferred();e.tile._getBindingContext().oModel.setProperty(e.tile._getBindingContext().sPath+"/draggedInTabBarToSourceGroup",false);o.publish("launchpad","movetile",{sTileId:r,sToItems:e.dstArea?e.dstArea:"tiles",sFromItems:e.srcArea?e.srcArea:"tiles",sTileType:e.dstArea?e.dstArea.substr(0,e.dstArea.length-1):undefined,toGroupId:e.dstGroupData.getGroupId?e.dstGroupData.getGroupId():e.dstGroupData.groupId,toIndex:e.dstTileIndex,longDrop:i,callBack:function(){s.resolve()}});return s.promise()},_handleShortDrop:function(e,r,i){var o=t.getEventBus(),s=jQuery.Deferred();o.publish("launchpad","movetile",{sTileId:r,sToItems:e.srcArea||"tiles",sFromItems:e.srcArea||"tiles",sTileType:e.srcArea?e.srcArea.substr(0,e.srcArea.length-1):undefined,toGroupId:e.dstGroupData.getGroupId?e.dstGroupData.getGroupId():e.dstGroupData.groupId,toIndex:e.dstTileIndex,longDrop:i,callBack:function(){s.resolve()}});return s.promise()},_handleConvertDrop:function(e,r,i){var o=t.getEventBus(),s=jQuery.Deferred();o.publish("launchpad","convertTile",{toGroupId:e.dstGroupData.getGroupId?e.dstGroupData.getGroupId():e.dstGroupData.groupId,toIndex:e.dstTileIndex,tile:t.byId(i.id),srcGroupId:e.srcGroup.getGroupId?e.srcGroup.getGroupId():e.srcGroup.groupId,longDrop:r,callBack:function(){s.resolve()}});return s.promise()},_getTileUuid:function(e){if(e.getUuid){return e.getUuid()}var t=e.getBindingContext().getObject();if(t.getParent){return t.getParent().getUuid()}return t.uuid},_handleDrag:function(e,t){var r=u.getLayoutEngine().layoutEndCallback(),i=r.tile.getBindingContext().getObject(),o=this.getView().getModel();if(o){o.setProperty("/draggedTileLinkPersonalizationSupported",i.isLinkPersonalizationSupported)}},_handleTabBarItemPressEventHandler:function(e,t,r){var i=this.getView(),o=i.getModel(),s=o.getProperty("/groups"),n=r.iGroupIndex;for(var a=0;a<s.length;a++){o.setProperty("/groups/"+a+"/isGroupSelected",false)}o.setProperty("/groups/"+n+"/isGroupSelected",true);this._handleTabBarItemPress(e,t,n)},_handleTabBarItemPress:function(e,r,i,o){var s=this.getView(),n,a;if(o){n=o.getParameter("group").getIndex()}else{n=i}t.getEventBus().publish("launchpad","tabSelected",{iSelectedGroup:n});a=this._getVisibleGroupIndex(n);s.oDashboardGroupsBox.removeLinksFromUnselectedGroups();s.oDashboardGroupsBox.getBinding("groups").filter([s.oFilterSelectedGroup]);s.oAnchorNavigationBar.setSelectedItemIndex(a);s.oAnchorNavigationBar.reArrangeNavigationBarElements();setTimeout(function(){p.handleTilesVisibility()},0)},_getVisibleGroupIndex:function(e){var t=this.getView().getModel().getProperty("/groups");var r=0;for(var i=0;i<e;i++){if(!t[i].isGroupVisible||!t[i].visibilityModes[0]){r++}}return e-r},_getModelGroupFromVisibleIndex:function(e){var t=this.getView().getModel().getProperty("/groups"),r=0;for(var i=0;i<t.length;i++){if(t[i].isGroupVisible&&t[i].visibilityModes[0]){r++;if(r>e){return i}}}return 0},_handleAnchorItemPress:function(e){var t=this.getView(),r=t.getModel(),n=r.getProperty("/groups");if(i.system.phone&&e.getParameter("manualPress")){e.oSource.openOverflowPopup()}for(var a=0;a<n.length;a++){if(r.getProperty("/groups/"+a+"/isGroupSelected")===true){r.setProperty("/groups/"+a+"/isGroupSelected",false)}}r.setProperty("/groups/"+e.getParameter("group").getIndex()+"/isGroupSelected",true);r.setProperty("/iSelectedGroup",e.getParameter("group").getIndex());if(r.getProperty("/homePageGroupDisplay")&&r.getProperty("/homePageGroupDisplay")==="tabs"&&!r.getProperty("/tileActionModeActive")){this._handleTabBarItemPress(undefined,undefined,undefined,e)}else{if(!r.getProperty("/tileActionModeActive")){t.oDashboardGroupsBox.getBinding("groups").filter([new o("isGroupVisible",s.EQ,true)])}else{t.oDashboardGroupsBox.getBinding("groups").filter([])}this._scrollToGroup("launchpad","scrollToGroup",{group:e.getParameter("group"),groupChanged:true,focus:e.getParameter("action")==="sapenter"})}},_addGroupHandler:function(e){var r=e.getSource().getBindingContext().getPath();var i=r.split("/");var o=window.parseInt(i[i.length-1],10);if(e.getSource().sParentAggregationName==="afterContent"){o++}t.getEventBus().publish("launchpad","createGroupAt",{title:"",location:o,isRendered:true})},_publishAsync:function(e,r,i){var o=t.getEventBus();window.setTimeout(jQuery.proxy(o.publish,o,e,r,i),1)},_changeGroupVisibility:function(e){var t=e.getPath(),r=e.getModel(),i=r.getProperty(t+"/isGroupVisible");if(r.getProperty(t+"/isDefaultGroup")||r.getProperty(t+"/isGroupLocked")){return}r.setProperty(t+"/isGroupVisible",!i)},_handleGroupVisibilityChanges:function(e,t,r){var i=this.getView().getModel(),o=a.prototype.getInstance(),s=o.getCurrentHiddenGroupIds(i),n=s.length===r.length,l=n,u;s.some(function(e,t){if(!l){return true}l=r&&Array.prototype.indexOf.call(r,e)!==-1;return!l});if(!l){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){u=e.hideGroups(s);u.done(function(){i.updateBindings("groups")});u.fail(function(){sap.ushell.Container.getServiceAsync("Message").then(function(e){e.error(d.i18n.getText("hideGroups_error"))})})})}window.setTimeout(function(){p.recalculateBottomSpace()},0)},_updateShellHeader:function(){if(!this.oShellUIService){this._initializeShellUIService()}else{this.oShellUIService.setTitle();this.oShellUIService.setHierarchy()}},_initializeShellUIService:function(){return sap.ui.require(["sap/ushell/ui5service/ShellUIService"],function(e){this.oShellUIService=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"});this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();return this.oShellUIService}.bind(this))},_deactivateActionModeInTabsState:function(){var e=this.getView(),t=e.getModel(),r;var i=t.getProperty("/groups");for(r=0;r<i.length;r++){t.setProperty("/groups/"+r+"/isGroupSelected",false)}var o=e.oAnchorNavigationBar.getSelectedItemIndex();var s=0;if(!this._isGroupVisible(o)){for(r=0;r<i.length;r++){if(!this._isGroupVisible(r)){s++}else{o=r;break}}}else{for(r=0;r<o;r++){if(!this._isGroupVisible(r)){s++}}}var n=o-s;e.oAnchorNavigationBar.setSelectedItemIndex(n);e.oAnchorNavigationBar.adjustItemSelection();t.setProperty("/groups/"+o+"/isGroupSelected",true);e.oDashboardGroupsBox.removeLinksFromAllGroups();var a=t.getProperty("/homePageGroupDisplay");if(a&&a==="tabs"){e.oDashboardGroupsBox.getBinding("groups").filter([e.oFilterSelectedGroup]);var l=e.oDashboardGroupsBox.getGroups&&e.oDashboardGroupsBox.getGroups();var u=Array.isArray(l)&&l[0];if(u&&u.updateLinks){u.updateLinks()}}},_isGroupVisible:function(e){var t=this.getView().getModel().getProperty("/groups");return t[e].isGroupVisible&&t[e].visibilityModes[0]}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/DashboardContent.view", ["sap/m/library","sap/ui/core/library","sap/m/Page","sap/ui/core/Component","sap/ui/core/mvc/View","sap/ui/Device","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/thirdparty/jquery","sap/ushell/components/homepage/DashboardGroupsBox","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/launchpad/AnchorItem","sap/ushell/ui/launchpad/AnchorNavigationBar","sap/ushell/utils","sap/ushell/components/homepage/DashboardContent.controller","sap/ushell/components/homepage/ActionMode"],function(e,t,o,i,n,s,a,r,jQuery,l,h,d,u,c,p,g,f,b){"use strict";var m=t.AccessibleLandmarkRole;return n.extend("sap.ushell.components.homepage.DashboardContent",{createContent:function(e){this.oModel=this.getController().getOwnerComponent().getModel();var t=this.oModel.getProperty("/personalization");var n=this.oModel.getProperty("/enableTileActionsIcon");this.isCombi=s.system.combi;this.isTouch=this.isCombi?false:s.system.phone||s.system.tablet;this.parentComponent=i.getOwnerComponentFor(this);this.addStyleClass("sapUshellDashboardView");this.oRenderer=sap.ushell.Container.getRenderer("fiori2");this.bIsHomeIntentRootIntent=g.isFlpHomeIntent(this.oRenderer.getShellConfig().rootIntent);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","contentRefresh",this._onDashboardShown,this);sap.ui.getCore().getEventBus().subscribe("launchpad","dashboardModelContentLoaded",this._onDashboardShown,this);this.oDoable=d.once("CoreResourcesComplementLoaded").do(function(){this.oAnchorNavigationBar.setOverflowEnabled(true);if(t||n){sap.ui.require(["sap/ushell/components/homepage/ActionMode"],function(e){e.init(this.oModel)}.bind(this))}if(t){this._createFooter();this._createActionModeButton()}}.bind(this));this.oFilterSelectedGroup=new a("isGroupSelected",r.EQ,true);this.oRenderer.getRouter().getRoute("home").attachMatched(this._onHomeNavigation,this);this.oAnchorNavigationBar=this._getAnchorNavigationBar(e);this.oAnchorNavigationBar.setModel(this.oModel);this.oRenderer.setNavigationBar(this.oAnchorNavigationBar);var h=new l;this.oDashboardGroupsBox=h.createGroupsBox(e,this.oModel);this.oPage=new o("sapUshellDashboardPage",{showHeader:false,landmarkInfo:{contentRole:m.Region,contentLabel:u.i18n.getText("Dashboard.Page.Content.AriaLabel"),rootRole:m.None},floatingFooter:true,content:[this.oDashboardGroupsBox]});this.oPage.addEventDelegate({onAfterRendering:function(){var t=this.getDomRef();var o=t.getElementsByTagName("section");jQuery(o[0]).off("scrollstop",e.handleDashboardScroll);jQuery(o[0]).on("scrollstop",e.handleDashboardScroll)}.bind(this)});return this.oPage},getAnchorItemTemplate:function(){var e=this;var t=new c({index:"{index}",title:"{title}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",helpId:"{helpId}",selected:false,isGroupRendered:"{isRendered}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(e,t,o){if(!o[e?1:0]){return false}return t||e}},locked:"{isGroupLocked}",isGroupDisabled:{parts:["isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(e,t,o){return e&&t&&o==="tabs"}},press:function(t){e.oAnchorNavigationBar.handleAnchorItemPress(t)}});t.attachBrowserEvent("focus",function(){this.setNavigationBarItemsVisibility()}.bind(this.oAnchorNavigationBar));return t},_getAnchorNavigationBar:function(e){var t=new p("anchorNavigationBar",{selectedItemIndex:"{/topGroupInViewPortIndex}",itemPress:[function(e){this._handleAnchorItemPress(e)},e],overflowEnabled:false});this._oAnchorNavigationBarDelegatePromise=new Promise(function(e,o){if(s.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(o){o.getInstance().then(function(o){t.addEventDelegate({onBeforeFastNavigationFocus:function(e){if(jQuery(".sapUshellAnchorItem").is(":visible")){e.preventDefault();o.goToSelectedAnchorNavigationItem()}},onsapenter:function(e){e.srcControl.getDomRef().click()},onsapspace:function(e){e.srcControl.getDomRef().click()},onsaptabnext:function(){if(!sap.ui.getCore().byId("sapUshellAnchorBarOverflowButton").getVisible()){o.goToLastVisitedTile()}}});e()})})}else{e()}});t.addStyleClass("sapContrastPlus");return t},_actionModeButtonPress:function(){this.oDashboardGroupsBox.getBinding("groups").filter([]);var e=this.oDashboardGroupsBox.getGroups();b.toggleActionMode(this.oModel,"Menu Item",e);this._updateAnchorNavigationBarVisibility();if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){if(this.oModel.getProperty("/tileActionModeActive")){var t=this.oModel.getProperty("/groups"),o;for(var i=0;i<t.length;i++){if(t[i].isGroupSelected){o=i;break}}this.getController()._scrollToGroup("launchpad","scrollToGroup",{group:{getGroupId:function(){return t[o].groupId}},groupChanged:false,focus:true})}else{this.getController()._deactivateActionModeInTabsState()}}},_createActionModeButton:function(){var e={id:"ActionModeBtn",text:u.i18n.getText("activateEditMode"),icon:"sap-icon://edit",press:this._actionModeButtonPress.bind(this)};var t=this.oRenderer.getShellConfig().moveEditHomePageActionToShellHeader;if(t){this._createActionModeButtonInHeader(e)}else{this._createActionModeButtonInUserMenu(e)}},_createActionModeButtonInHeader:function(e){sap.ui.require(["sap/ushell/ui/shell/ShellHeadItem"],function(t){this.oTileActionsButton=new t(e);if(h.last("/core/extension/enableHelp")){this.oTileActionsButton.addStyleClass("help-id-ActionModeBtn")}if(!this.bIsHomeIntentRootIntent){this.oRenderer.showHeaderEndItem(this.oTileActionsButton.getId(),true)}else{this.oRenderer.showHeaderEndItem(this.oTileActionsButton.getId(),false,["home"])}}.bind(this))},_createActionModeButtonInUserMenu:function(e){var t={controlType:"sap.ushell.ui.launchpad.ActionItem",oControlProperties:e,bIsVisible:true,aStates:["home"]};if(!this.bIsHomeIntentRootIntent){t.aStates=null;t.bCurrentState=true}this.oRenderer.addUserAction(t).done(function(e){this.oTileActionsButton=e;if(h.last("/core/extension/enableHelp")){this.oTileActionsButton.addStyleClass("help-id-ActionModeBtn")}}.bind(this))},_handleEditModeChange:function(){if(this.oTileActionsButton){this.oTileActionsButton.toggleStyleClass("sapUshellAcionItemActive")}},_createFooter:function(){sap.ui.require(["sap/m/Bar","sap/m/Button","sap/m/ToolbarSpacer"],function(t,o,i){this.oPage.setFooter(new t("sapUshellDashboardFooter",{visible:"{/tileActionModeActive}",contentRight:[new i,new o("sapUshellDashboardFooterDoneBtn",{type:e.ButtonType.Emphasized,text:u.i18n.getText("closeEditMode"),tooltip:u.i18n.getText("exitEditMode"),press:this._actionModeButtonPress.bind(this)})]}))}.bind(this))},_onDashboardShown:function(){var e=this.oRenderer&&this.oRenderer.getCurrentCoreView()==="home";if(e){if(!s.system.phone){this.oRenderer.showRightFloatingContainer(false)}this._updateAnchorNavigationBarVisibility();this.getController().resizeHandler();g.refreshTiles();if(s.system.desktop){var t=document.activeElement?document.activeElement.tagName:"";if(t!=="INPUT"&&t!=="TEXTAREA"){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){e.goToLastVisitedTile()})})}}if(d.last("firstSegmentCompleteLoaded")){d.emit("CloseFesrRecord",Date.now())}}},_onHomeNavigation:function(){this._onDashboardShown();if(!this.bIsHomeIntentRootIntent){if(this.oRenderer.getShellConfig().moveEditHomePageActionToShellHeader){this.oRenderer.showHeaderEndItem(this.oTileActionsButton.getId(),true)}else{this.oRenderer.showActionButton(this.oTileActionsButton.getId(),true)}}},_updateAnchorNavigationBarVisibility:function(){var e=this.oAnchorNavigationBar.getVisible(),t=this.getModel().getObject("/tileActionModeActive"),o=this.getModel().getProperty("/groups").filter(function(e){if(t){return e.isGroupVisible&&e.visibilityModes[1]}return e.isGroupVisible&&e.visibilityModes[0]}),i=o.length>1;this.oAnchorNavigationBar.setVisible(i);if(i&&!e){var n=this.getModel().getProperty("/groups"),s=this.getModel().getProperty("/iSelectedGroup");for(var a=0;a<o.length;a++){if(o[a].getGroupId&&o[a].getGroupId()===n[s].groupId){this.oAnchorNavigationBar.setSelectedItemIndex(a);break}}}},getControllerName:function(){return"sap.ushell.components.homepage.DashboardContent"},exit:function(){n.prototype.exit.apply(this,arguments);if(this.oAnchorNavigationBar){this.oAnchorNavigationBar.destroy()}if(this.oTileActionsButton){this.oTileActionsButton.destroy()}if(this.oDoable){this.oDoable.off()}if(this.oPage){this.oPage.destroy()}sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRefresh",this._onDashboardShown,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","dashboardModelContentLoaded",this._onDashboardShown,this)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/DashboardGroupsBox", ["sap/base/Log","sap/base/util/isEmptyObject","sap/base/util/restricted/_zipObject","sap/m/Button","sap/m/GenericTile","sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/Core","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ui/Device","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/components/homepage/ActionMode","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/Layout","sap/ushell/resources","sap/ushell/ui/launchpad/DashboardGroupsContainer","sap/ushell/ui/launchpad/GroupHeaderActions","sap/ushell/ui/launchpad/LinkTileWrapper","sap/ushell/ui/launchpad/PlusTile","sap/ushell/ui/launchpad/Tile","sap/ushell/ui/launchpad/TileContainer","sap/ushell/ui/QuickAccess","sap/ushell/utils/UrlParsing"],function(e,t,i,n,o,r,s,a,l,u,d,c,p,h,jQuery,g,f,b,v,A,G,C,m,y,T,P,I,B,M){"use strict";var _=u.InvisibleMessageMode;var w=r.extend("sap.ushell.components.homepage.DashboardGroupsBox",{metadata:{publicMethods:["createGroupsBox"]},constructor:function(){if(w.fnDashboardGroupsBoxGetter){return w.fnDashboardGroupsBoxGetter()}w.fnDashboardGroupsBoxGetter=function(e){return function(){return e}}(this.getInterface());this.oController=undefined;this.oGroupsContainer=undefined;this._oInvisibleMessageInstance=l.getInstance();a.getEventBus().subscribe("launchpad","actionModeActive",this._handleActionModeChange,this);a.getEventBus().subscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);a.getEventBus().subscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);a.getEventBus().subscribe("launchpad","AddTileContainerContent",this._addTileContainersContent,this);return undefined},destroy:function(){a.getEventBus().unsubscribe("launchpad","actionModeActive",this._handleActionModeChange,this);a.getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);a.getEventBus().unsubscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);a.getEventBus().unsubscribe("launchpad","AddTileContainerContent",this._addTileContainersContent,this);if(this.oGroupsContainer){this.oGroupsContainer.destroy()}w.fnDashboardGroupsBoxGetter=undefined;if(this._oHost){this._oHost.destroy()}},calculateFilter:function(){var e=[];var t;var i=this.oModel.getProperty("/homePageGroupDisplay"),n=this.oModel.getProperty("/tileActionModeActive");if(!n){if(i&&i==="tabs"){t=new c("isGroupSelected",p.EQ,true)}else{t=new c("isGroupVisible",p.EQ,true)}e.push(t)}return e},zipPromiseAll:function(e,t){return Promise.all(t).then(function(t){return i(e,t)})},loadCardModuleIfNeeded:function(){if(b.last("/core/home/featuredGroup/enable")){return a.loadLibrary("sap.ui.integration",{async:true}).then(function(){return new Promise(function(e){sap.ui.require(["sap/ui/integration/Host","sap/ui/integration/widgets/Card"],function(t,i){this.Card=i;this.Host=t;this._oHost=new t({action:this._onCardAction.bind(this)});e()}.bind(this))}.bind(this))}.bind(this))}return Promise.resolve()},createGroupsBox:function(e,i){this.oController=e;var n=this,o,r,s=function(e){var t,i;if(e&&(t=e.getDomRef())){i=t.querySelector(".sapUshellPlusTile");if(i){return i}}return null},l=function(e){var t=s(e.currentGroup),i=s(e.endGroup),o=e.tiles[e.tiles.length-2]===e.item||e.endGroup.getTiles().length===0;if(o){n._hidePlusTile(i)}else{n._showPlusTile(i)}if(e.currentGroup!==e.endGroup){n._showPlusTile(t)}};o=function(){A.getLayoutEngine().setExcludedControl(T);A.getLayoutEngine().setReorderTilesCallback.call(A.layoutEngine,l)};r=function(){if(!A.isInited){A.init({getGroups:this.getGroups.bind(this),getAllGroups:n.getAllGroupsFromModel.bind(n),isTabBarActive:n.isTabBarActive.bind(n)}).then(o);d.media.attachHandler(function(){if(!this.bIsDestroyed){A.reRenderGroupsLayout(null)}},this,d.media.RANGESETS.SAP_STANDARD);var i=this.getDomRef();e.getView().sDashboardGroupsWrapperId=!t(i)&&i.parentNode?i.parentNode.id:""}v.emit("CenterViewPointContentRendered");a.getEventBus().publish("launchpad","contentRendered");a.getEventBus().publish("launchpad","contentRefresh");if(this.getBinding("groups")){this.getBinding("groups").filter(n.calculateFilter())}};this.isTabBarActive=function(){return this.oModel.getProperty("/homePageGroupDisplay")==="tabs"};this.oModel=i;var u=this.calculateFilter();this.oGroupsContainer=new C("dashboardGroups",{displayMode:"{/homePageGroupDisplay}",afterRendering:r});this.zipPromiseAll(["launchpadService",""],[sap.ushell.Container.getServiceAsync("LaunchPage"),n.loadCardModuleIfNeeded()]).then(function(t){this.isLinkPersonalizationSupported=t.launchpadService.isLinkPersonalizationSupported();this.oGroupsContainer.bindAggregation("groups",{filters:u,path:"/groups",factory:function(){return n._createTileContainer(e,i)}})}.bind(this));if(d.system.desktop){this.oGroupsContainer.addEventDelegate({onBeforeFastNavigationFocus:function(e){e.preventDefault();sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){e.goToLastVisitedTile()})})},onsaptabnext:function(e){var t=document.getElementById("sapUshellFloatingContainerWrapper");var i=t&&!t.classList.contains("sapUshellShellHidden");if(i&&e.originalEvent.srcElement.id!==""){e.preventDefault();a.getEventBus().publish("launchpad","shellFloatingContainerIsAccessible")}}})}return this.oGroupsContainer},getAllGroupsFromModel:function(){return this.oModel.getProperty("/groups")},_createTileContainer:function(e){var t=this,i=new c("isTileIntentSupported",p.EQ,true),n=new I({headerText:"{title}",showEmptyLinksArea:{parts:["/tileActionModeActive","links/length","isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(e,t,i,n,o){if(t){return true}else if(i){return false}return e||n&&o==="tabs"}},showMobileActions:{parts:["/tileActionModeActive"],formatter:function(e){return e&&!this.getDefaultGroup()}},showIcon:{parts:["/isInDrag","/tileActionModeActive"],formatter:function(e,t){return this.getIsGroupLocked()&&(e||t)}},deluminate:{parts:["/isInDrag"],formatter:function(e){return this.getIsGroupLocked()&&e}},transformationError:{parts:["/isInDrag","/draggedTileLinkPersonalizationSupported"],formatter:function(e,t){return e&&!t}},showBackground:"{/tileActionModeActive}",tooltip:"{title}",tileActionModeActive:"{/tileActionModeActive}",enableHelp:b.last("/core/extension/enableHelp"),groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",showHeader:true,showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",editMode:"{editMode}",supportLinkPersonalization:this.isLinkPersonalizationSupported,titleChange:function(e){a.getEventBus().publish("launchpad","changeGroupTitle",{groupId:e.getSource().getGroupId(),newTitle:e.getParameter("newTitle")})},showEmptyLinksAreaPlaceHolder:{parts:["links/length","/isInDrag","/homePageGroupDisplay"],formatter:function(e,t,i){return t&&i==="tabs"&&!e}},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(e){return e&&!this.getIsGroupLocked()}},visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(e,t,i){if(!i[e?1:0]){return false}return t||e}},hidden:{parts:["/tileActionModeActive","isGroupVisible"],formatter:function(e,t){return e&&!t}},links:this._getLinkTemplate(),tiles:{path:"tiles",factory:this._itemFactory.bind(this),filters:[i]},add:function(e){t._handleAddTileToGroup(e)}});return n},_getLinkTemplate:function(){var e=new c("isTileIntentSupported",p.EQ,true);if(!this.isLinkPersonalizationSupported){return{path:"links",templateShareable:true,template:new y({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",tileCatalogIdStable:"{tileCatalogIdStable}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",debugInfo:"{debugInfo}",tileViews:{path:"content",factory:function(e,t){return t.getObject()}},afterRendering:function(e){var t=this.getDomRef().getElementsByTagName("a");for(var i=0;i<t.length;i++){t[i].setAttribute("tabindex",-1)}}}),filters:[e]}}return{path:"links",factory:function(e,t){var i=t.getObject().content[0];if(i&&i.bIsDestroyed){i=i.clone();t.getModel().setProperty(t.getPath()+"/content/0",i)}return i},filters:[e]}},_itemFactory:function(e,t){var i=t.getProperty(t.sPath),n,o,r,s;if(i){if(i.isCard){n=i&&i.content;o=n&&n.length&&n[0];if(o&&o["sap.card"]){s=o}else if(i.manifest){s={"sap.flp":i.manifest&&i.manifest["sap.flp"],"sap.card":{type:"List"}}}else{return this._createErrorTile()}r=new this.Card;r.setHost(this._oHost).setManifest(s)}else{r=this._createTile()}i.controlId=r&&r.getId&&r.getId()}return r},_onCardAction:function(t){if(t.getParameter("type")!=="Navigation"){return}var i=t.getParameter("parameters");var n=M.parseShellHash(i.url);if(n){t.preventDefault();this._performIntentBasedNavigation(n)}else if(i.openUI){if(i.openUI==="RecentActivities"||i.openUI==="FrequentActivities"){var o=i.openUI==="RecentActivities"?"recentActivityFilter":"frequentlyUsedFilter";B.openQuickAccessDialog(o)}else{e.error("Request to open unknown User Interface: '"+i.openUI+"'")}t.preventDefault()}else if(i.url===""){t.preventDefault()}else if(b.last("/core/shell/enableRecentActivity")&&b.last("/core/shell/enableRecentActivityLogging")){var r={title:t.getParameter("parameters").title,url:i.url,appType:g.AppType.URL,appId:i.url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r)}},_performIntentBasedNavigation:function(e){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.toExternal({target:{semanticObject:e.semanticObject,action:e.action},params:e.params,appSpecificRoute:e.appSpecificRoute})})},_createErrorTile:function(){return new P({tileViews:{path:"content",factory:function(){return new o({state:"Failed"})}}})},_createTile:function(){var e=new P({long:"{long}",isDraggedInTabBarToSourceGroup:"{draggedInTabBarToSourceGroup}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",tileCatalogIdStable:"{tileCatalogIdStable}",isCustomTile:"{isCustomTile}",target:"{target}",isLocked:"{isLocked}",navigationMode:"{navigationMode}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",debugInfo:"{debugInfo}",tileViews:{path:"content",factory:function(e,t){return t.getObject()}},coverDivPress:function(e){if(!e.oSource.getBindingContext().getObject().tileIsBeingMoved&&f){f._openActionsMenu(e)}},showActions:function(e){if(f){f._openActionsMenu(e)}},deletePress:[this.oController._dashboardDeleteTileHandler,this.oController],press:[this.oController.dashboardTilePress,this.oController]});var t=a.byId("viewPortContainer");e.addEventDelegate({onclick:function(){h.start("FLP:DashboardGroupsBox.onclick","Click on tile","FLP");h.start("FLP:OpenApplicationonClick","Open Application","FLP");function e(){h.end("FLP:DashboardGroupsBox.onclick");t.detachAfterNavigate(e)}t.attachAfterNavigate(e)}});return e},_updateGroupHeaderVisibility:function(){var e=this.oGroupsContainer.getGroups();var t=this.oModel.getProperty("/tileActionModeActive");var i=this.oController.getView().oAnchorNavigationBar.getVisible();var n;var o=0;for(var r=0;r<e.length;r++){if(e[r].getProperty("visible")){o++;if(n===undefined){n=r}else{e[r].setShowGroupHeader(true)}}}if(n!==undefined){var s=t||o===1&&!i;e[n].setShowGroupHeader(s)}},_handleActionModeChange:function(){var e=this.oModel.getProperty("/tileActionModeActive");if(e){this._addTileContainersContent()}else{A.reRenderGroupsLayout(null)}},_addTileContainersContent:function(){var e=this.oGroupsContainer.getGroups();for(var t=0;t<e.length;t++){var i=e[t];if(!i.getBeforeContent().length){i.addBeforeContent(new n({icon:"sap-icon://add",text:G.i18n.getText("add_group_at"),visible:"{= !${isGroupLocked} && !${isDefaultGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]}).addStyleClass("sapUshellAddGroupButton"))}if(!i.getAfterContent().length){i.addAfterContent(new n({icon:"sap-icon://add",text:G.i18n.getText("add_group_at"),visible:"{= ${isLastGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]}).addStyleClass("sapUshellAddGroupButton"))}if(!i.getHeaderActions().length){i.addHeaderAction(new m({content:this._getHeaderActions(),tileActionModeActive:"{/tileActionModeActive}",isOverflow:"{/isPhoneWidth}"}).addStyleClass("sapUshellOverlayGroupActionPanel"))}}},_handleAddGroupButtonPress:function(e){this.oController._addGroupHandler(e);this._addTileContainersContent()},_getHeaderActions:function(){var e=[];e.push(new n({text:{path:"isGroupVisible",formatter:function(e){return G.i18n.getText(e?"HideGroupBtn":"ShowGroupBtn")}},icon:{path:"isGroupVisible",formatter:function(e){if(d.system.phone){return e?"sap-icon://hide":"sap-icon://show"}return""}},visible:"{= ${/enableHideGroups} && !${isGroupLocked} && !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(e){var t=e.getSource(),i=t.getBindingContext(),n=i.getModel(),o=i.getPath(),r=n.getProperty(o+"/isGroupVisible");var s=a.getLibraryResourceBundle("sap.m");this._oInvisibleMessageInstance.announce([G.i18n.getText(r?"Group.nowBeingHidden":"Group.nowBeingShown"),G.i18n.getText("Section.ButtonLabelChanged"),G.i18n.getText(r?"ShowGroupBtn":"HideGroupBtn"),s.getText("ACC_CTR_TYPE_BUTTON")].join(" "),_.Polite);this.oController._changeGroupVisibility(i)}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));e.push(new n({text:{path:"removable",formatter:function(e){return G.i18n.getText(e?"DeleteGroupBtn":"ResetGroupBtn")}},icon:{path:"removable",formatter:function(e){if(d.system.phone){return e?"sap-icon://delete":"sap-icon://refresh"}return""}},visible:"{= !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(e){var t=e.getSource(),i=t.getBindingContext();this.oController._handleGroupDeletion(i)}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));return e},_handleAddTileToGroup:function(e){if(document.toDetail){document.toDetail()}s.getOwnerComponentFor(this.oController.getView().parentComponent).getRouter().navTo("appfinder",{"innerHash*":"catalog/"+JSON.stringify({targetGroup:encodeURIComponent(e.getSource().getBindingContext().sPath)})})},_hidePlusTile:function(e){if(e){e.classList.add("sapUshellHidePlusTile")}},_showPlusTile:function(e){if(e){e.classList.remove("sapUshellHidePlusTile")}}});return w});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/DashboardUIActions", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/base/Object","sap/ui/core/Configuration","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/Layout"],function(e,t,i,o,n,jQuery,s){"use strict";var a=i.extend("sap.ushell.components.homepage.DashboardUIActions",{metadata:{publicMethods:["initializeUIActions"]},constructor:function(){this.aTabBarItemsLocation=[];if(a.fnDashboardUIActionsGetter&&a.fnDashboardUIActionsGetter()){return a.fnDashboardUIActionsGetter()}a.fnDashboardUIActionsGetter=function(e){return function(){return e}}(this.getInterface());this.oTileUIActions=undefined;this.oLinkUIActions=undefined;this.oGroupUIActions=undefined;this.oController=undefined;this.UIActionsInitialized=false;sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._disableGroupUIActions,this)},destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._disableGroupUIActions,this);a.fnDashboardUIActionsGetter=undefined;this.oGroupUIActions=null;this.oTileUIActions=null;this.oLinkUIActions=null},initializeUIActions:function(e){this.oController=e;if(e.getView().getModel().getProperty("/homePageGroupDisplay")==="tabs"){this._fillTabBarItemsArray()}var i=jQuery("#sapUshellDashboardPage").width();var n=e.getView().sDashboardGroupsWrapperId,s,a=o.getRTL(),l={containerSelector:"#dashboardGroups",wrapperSelector:n?"#"+n:undefined,rootSelector:"#mainShell"},r=t({},l,{switchModeDelay:1e3,isTouch:e.getView().isTouch,isCombi:e.getView().isCombi,debug:false}),d={draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",cloneClass:"sapUshellLinkTile-clone",endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:e.getView().isTouch||e.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:"sapUshellLockedTile",onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:a?i:-i,defaultMouseMoveHandler:function(){}},h={draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",deltaTop:-44,scrollContainerSelector:undefined,endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:e.getView().isTouch||e.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:"sapUshellLockedTile",onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:a?i:-i,defaultMouseMoveHandler:function(){}},c={draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",draggableSelectorExclude:".sapUshellHeaderActionButton",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",startCallback:this._handleGroupsUIStart.bind(this),endCallback:this._handleGroupDrop.bind(this),dragCallback:this._handleGroupStartDrag.bind(this),moveTolerance:e.getView().isTouch||e.getView().isCombi?10:.1,isLayoutEngine:false,isVerticalDragOnly:true,draggableElement:".sapUshellTileContainerHeader"};if(e.getView().oDashboardGroupsBox.getGroups().length){if(e.getView().getModel().getProperty("/personalization")){sap.ui.require(["sap/ushell/UIActions"],function(i){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(o){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=new i(t({},r,h)).enable();this.oGroupUIActions=new i(t({},r,c));if(o.isLinkPersonalizationSupported()){this.oLinkUIActions=new i(t({},r,d)).enable()}s=e.getView().getModel().getProperty("/tileActionModeActive");if(s){this.oGroupUIActions.enable()}}.bind(this))}.bind(this))}}},_enableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.enable()}},disableAllDashboardUiAction:function(){this._disableTileUIActions();this._disableLinkUIActions();this._disableGroupUIActions()},_disableTileUIActions:function(){if(this.oTileUIActions){this.oTileUIActions.disable()}},_disableLinkUIActions:function(){if(this.oLinkUIActions){this.oLinkUIActions.disable()}},_disableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.disable()}},_handleTileDragMove:function(e){if(!e.isScrolling){s.getLayoutEngine().moveDraggable(e.moveX,e.moveY,this.aTabBarItemsLocation)}},_handleTileDragAndScrollContinuation:function(e){var t=jQuery("#anchorNavigationBar").offset(),i=t?t.top:0;if(e<i){s.getLayoutEngine()._cancelLongDropTimmer()}return s.getLayoutEngine()._isTabBarCollision(e)},_fillTabBarItemsArray:function(){var e=document.getElementsByClassName("sapUshellAnchorItem");var t;var i=10;var o=0;var n;var s=[];for(t=0;t<e.length;t++){var a=e[t];var l=a.getBoundingClientRect();s[t]=l.width}for(t=0;t<e.length;t++){var r=s[t];if(r===0){continue}var d=Math.round(r/i);for(n=o;n<o+d;n++){this.aTabBarItemsLocation[n]=t}o=n}},_preventTextSelection:function(){if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges()}catch(e){}}},_handleStartDragTile:function(e,t){this._preventTextSelection();s.getLayoutEngine().layoutStartCallback(t);s.initDragMode();var i=t.querySelectorAll("a");for(var o=0;o<i.length;o++){i[o].removeAttribute("href")}this.oController._handleDrag.call(this.oController,e,t);sap.ui.getCore().getEventBus().publish("launchpad","sortableStart")},_onBeforeCreateLinkClone:function(e,t){s.getLayoutEngine().saveLinkBoundingRects(t)},_handleLinkDrop:function(e,t,i){var o=jQuery.Deferred(),a;if(s.isTabBarActive()){s.tabBarTileDropped()}if(i&&i.clone){jQuery(i.clone).css({opacity:0})}if(n.desktop){document.body.classList.remove("sapUshellDisableUserSelect")}if(s.getLayoutEngine().isLinkIntersected()||s.getLayoutEngine().isOriginalAreaChanged()){a=this.oController._handleDrop.call(this.oController,e,t)}if(a){a.then(function(){var e=document.getElementById("dashboardGroups");var t=e&&e.getElementsByClassName("sapUshellHidePlusTile");for(var i=0;i<t.length;i++){t[i].classList.remove("sapUshellHidePlusTile")}setTimeout(function(){o.resolve()},0)})}else{setTimeout(function(){o.resolve()},0)}return o.promise()},_handleTileDrop:function(e,t,i){if(s.getLayoutEngine().isOriginalAreaChanged()){return this._handleTileToLinkDrop(e,t,i)}return this._handleTileToTileDrop(e,t,i)},_handleTileToLinkDrop:function(e,t,i){return this._handleLinkDrop(e,t,i)},_handleTileToTileDrop:function(e,t,i){var o;var a;var l;var r=function(e,t){s.endDragMode();var i=document.getElementById("dashboardGroups");var o=i&&i.getElementsByClassName("sapUshellHidePlusTile");for(var a=0;a<o.length;a++){o[a].classList.remove("sapUshellHidePlusTile")}this.oController._handleDrop(this.oController,e,t);if(n.desktop){document.body.classList.remove("sapUshellDisableUserSelect")}};a=jQuery(".sapUshellTabBarHoverOn");a.removeClass("sapUshellTabBarHoverOn");l=jQuery(".sapUshellTileDragOpacity");l.removeClass("sapUshellTileDragOpacity");if(s.isTabBarActive()){s.tabBarTileDropped()}var d;if(s.isTabBarActive()&&s.isOnTabBarElement()){if(i&&i.clone){d=jQuery.Deferred();o=jQuery(i.clone);o.css("display","none");setTimeout(function(){d.resolve();r.call(this,e,t)}.bind(this),0);return d.promise()}r.apply(this,arguments)}if(i&&i.clone){d=jQuery.Deferred();o=jQuery(i.clone);setTimeout(function(){d.resolve();r.call(this,e,t)}.bind(this),0);return d.promise()}setTimeout(function(){r.call(this,e,t)}.bind(this),0)},_getTileTopOffset:function(e,t,i){var o=0,n=o+i;n+=e.closest(".sapUshellDashboardGroupsContainerItem").position().top;n+=t.top;return n},_markDisableGroups:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty("/isInDrag",true)}},_endUIHandler:function(){s.endDragMode();if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty("/isInDrag",false)}},_handleGroupStartDrag:function(t,i){this.oTileUIActions.disable();if(this.oLinkUIActions){this.oLinkUIActions.disable()}var s=jQuery(".sapUshellDashboardGroupsContainerItem-clone"),a=s.find(".sapUshellContainerTitle"),l=a.height(),r=a.width(),d,h,c,u,p=o.getRTL();if(!n.system.phone){s.find(".sapUshellTileContainerEditMode").offset({top:this.oGroupUIActions.getMove().y-l,left:p?jQuery("#sapUshellDashboardPage").width()+this.oGroupUIActions.getMove().x+r:this.oGroupUIActions.getMove().x-r/2});jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden")}else{jQuery(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden")}jQuery(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerRemoveContent");jQuery(i).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.oController.getView().getModel().setProperty("/isInDrag",true);jQuery(i).attr("startPos",jQuery(i).index());e.info("startPos - "+jQuery(i).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart")},0);d=jQuery("#dashboardGroups").offset().top;h=jQuery(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top;c=jQuery(".sapUshellDashboardGroupsContainerItem-clone").offset().top;u=h-d-c;jQuery(".sapUshellDashboardView section").css({scrollTop:u})},_handleGroupsUIStart:function(e,t){jQuery(t).find(".sapUshellTileContainerContent").css("outline-color","transparent")},_handleGroupDrop:function(e,t){var i=sap.ui.getCore().getEventBus(),o=jQuery(t),n=jQuery(o.children()[0]).attr("id"),s=sap.ui.getCore().byId(n),a=sap.ui.getCore().byId("dashboardGroups"),l={group:s,groupChanged:false,focus:false},r=o.index();o.startPos=window.parseInt(o.attr("startPos"),10);a.removeAggregation("groups",s,true);a.insertAggregation("groups",s,r,true);this._handleGroupMoved(e,{item:o});o.removeAttr("startPos");sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){jQuery(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer").removeClass("sapUshellTileContainerRemoveContent")},0);window.setTimeout(jQuery.proxy(i.publish,i,"launchpad","scrollToGroup",l),1);this.oTileUIActions.enable();if(this.oLinkUIActions){this.oLinkUIActions.enable()}},_handleGroupMoved:function(e,t){var i=t.item.startPos,o=t.item.index(),n=this.oController.getView().getModel();if(o!==-1){this.oController._publishAsync("launchpad","moveGroup",{fromIndex:i,toIndex:o});setTimeout(function(){n.setProperty("/isInDrag",false)},100)}},_setController:function(e){this.oController=e}});return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/FLPAnalytics", ["sap/ushell/services/AppConfiguration","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,a,jQuery){"use strict";var i=["deleteTile","actionModeActive","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],t=sap.ui.getCore().getEventBus(),n=this,o={};function l(e,a,i){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(t){t.logCustomEvent(e,a,i)})}function r(a){var i=e.getMetadata();o[a]={};o[a].startTime=new Date;o[a].title=i.title}function c(e){try{var i=(new Date-o[e].startTime)/1e3;var t=o[e].title;l("FLP: Time in Application (sec)",i,[t])}catch(i){a.warning("Duration in application "+e+" could not be calculated",null,"sap.ushell.components.homepage.FLPAnalytics")}}function s(e,a,i){var n=hasher.getHash(),c;window.swa.custom1={ref:n};switch(a){case"appOpened":r(n);l("FLP: Application Opened","Direct Launch",[o[n].title]);t.unsubscribe("sap.ushell","appOpened",s);break;case"bookmarkTileAdded":c=window.document.title;l("FLP: Personalization","Save as Tile",[c,i&&i.group&&i.group.title?i.group.title:"",i&&i.group&&i.group.id?i.group.id:"",i&&i.tile&&i.tile.title?i.tile.title:c]);break;case"actionModeActive":l("FLP: Personalization","Enter Action Mode",[i.source]);break;case"catalogTileClick":l("FLP: Application Launch point","Catalog",[]);break;case"dashboardTileClick":l("FLP: Application Launch point","Homepage",[]);break;case"dashboardTileLinkClick":l("FLP: Application Launch point","Tile Group Link",[]);break;default:break}}function p(e){var a,i,t;if(e.getParameter("from")&&e.getParameter("to")){a=e.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:a};c(a);t=e.getParameter("to");i=t.getId().replace("application-","").replace("applicationShellPage-","");r(i);window.swa.custom1={ref:i};l("FLP: Application Opened","Fiori Navigation",[o[i].title])}}jQuery(window).on("unload",function(e){var a=window.location.hash.substr(1);c(a)});try{sap.ui.getCore().byId("viewPortContainer").attachAfterNavigate(p,n)}catch(e){a.warning("Failure when subscribing to viewPortContainer 'AfterNavigate' event",null,"sap.ushell.components.homepage.FLPAnalytics")}t.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",s,n);i.forEach(function(e){t.subscribe("launchpad",e,s,n)});t.subscribe("sap.ushell","appOpened",s,n)});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/ActionMode", ["sap/ui/core/library","sap/ui/Device","sap/m/MessageBox","sap/m/MessageToast","sap/ushell/resources","sap/ushell/EventHub","sap/base/Log"],function(e,t,n,i,o,r,a){"use strict";var s={};s.start=function(e,n){this.oController=e;var i=e.getView().getModel("viewSettings");var a=i.getProperty("/addToMyHomeOnly");if(!a){e.getView().getModel("viewSettings").setProperty("/actionModeEditActive",true)}e.getView().getModel("viewSettings").setProperty("/actionModeActive",true);e.handleMyHomeActionMode(true).catch(e._onError.bind(e));r.emit("enableMenuBarNavigation",false);var s=sap.ui.getCore().byId("ActionModeBtn");this.sActionButtonActivateText=s.getText();n=n||o.i18n.getText("PageRuntime.EditMode.Exit");s.setTooltip(n);s.setText(n);if(t.system.desktop){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){e.attachEvent("editModeDone",this.save,this)}.bind(this))}};s.cancel=function(){this._cleanup()};s.save=function(){a.info("store actions in pages service");this._cleanup()};s._cleanup=function(){this.oController.getView().getModel("viewSettings").setProperty("/actionModeActive",false);this.oController.getView().getModel("viewSettings").setProperty("/actionModeEditActive",false);this.oController.handleMyHomeActionMode(false).catch(this.oController._onError.bind(this.oController));r.emit("enableMenuBarNavigation",true);var e=sap.ui.getCore().byId("ActionModeBtn");e.setTooltip(this.sActionButtonActivateText);e.setText(this.sActionButtonActivateText);if(t.system.desktop){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){e.detachEvent("editModeDone",this.save,this)}.bind(this))}};s.addVisualization=function(e,t){var n=t.getBindingContext().getModel();var i=t.getBindingContext().getPath();var o=i.split("/");var r=parseInt(o[2],10);var a=n.getProperty("/pages/"+r+"/id");var s=n.getProperty(i+"/id");sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){var t="Shell-appfinder?&/catalog/"+JSON.stringify({pageID:encodeURIComponent(a),sectionID:encodeURIComponent(s)});e.toExternal({target:{shellHash:t}})})};s.addSection=function(e,t,n){var i=n.index;var o=t.getBindingContext().getPath();var r=o.split("/");var a=parseInt(r[2],10);return this.oController.getOwnerComponent().getPagesService().then(function(e){e.addSection(a,i);var n={onAfterRendering:function(){setTimeout(function(){t.getSections()[i].byId("title-edit").focus()},0);t.removeEventDelegate(n)}};t.addEventDelegate(n)})};s.deleteSection=function(e,t){return sap.ushell.Container.getServiceAsync("Message").then(function(e){var r=t.getTitle();var a=r?o.i18n.getText("PageRuntime.Message.Section.Delete",r):o.i18n.getText("PageRuntime.Message.Section.DeleteNoTitle");var s=o.i18n.getText("PageRuntime.Dialog.Title.Delete");function g(e){if(e===n.Action.DELETE){this.oController.getOwnerComponent().getPagesService().then(function(e){var n=t.getBindingContext().getPath(),r=t.getParent(),a=n.split("/"),s=parseInt(a[2],10),g=parseInt(a[4],10);e.deleteSection(s,g);i.show(o.i18n.getText("PageRuntime.Message.SectionDeleted"));var c=r.getSections();if(c.length){var l=c[g!==0?g-1:g];l.focus();var v={onAfterRendering:function(){l.focus();l.removeEventDelegate(v)}};l.addEventDelegate(v)}else{var d={onAfterRendering:function(){r.focus();r.removeEventDelegate(d)}};r.addEventDelegate(d)}})}}e.confirm(a,g.bind(this),s,[n.Action.DELETE,n.Action.CANCEL])}.bind(this))};s.resetSection=function(e,t){var n=t.getBindingContext().getPath();var r=n.split("/");var a=parseInt(r[2],10);var s=parseInt(r[4],10);return this.oController.getOwnerComponent().getPagesService().then(function(e){e.resetSection(a,s);i.show(o.i18n.getText("PageRuntime.Message.SectionReset"))})};s.changeSectionTitle=function(e,t,n){var i=t.getBindingContext().getPath();var o=t.getProperty("title");var r=i.split("/");var a=parseInt(r[2],10);var s=parseInt(r[4],10);return this.oController.getOwnerComponent().getPagesService().then(function(e){e.renameSection(a,s,o)})};s.moveSection=function(e,t,n){var i=n.draggedControl.getBindingContext().getPath();var o=n.droppedControl.getBindingContext().getPath();var r=n.dropPosition;var a=o.split("/");var s=i.split("/");var g=parseInt(s[2],10);var c=parseInt(s[4],10);var l=parseInt(a[4],10);if(c===l-1&&r==="Before"||c===l+1&&r==="After"){return Promise.resolve()}if(r==="After"){l=l+1}var v=this.oController.getOwnerComponent();return v.getPagesService().then(function(e){return e.moveSection(g,c,l)}).then(function(){t.announceMove()})};s.changeSectionVisibility=function(e,t,n){if(this.oController===undefined||n.visible===undefined){return Promise.resolve()}var i=t.getBindingContext().getPath();var o=n.visible;var r=i.split("/");var a=parseInt(r[2],10);var s=parseInt(r[4],10);return this.oController.getOwnerComponent().getPagesService().then(function(e){e.setSectionVisibility(a,s,o)})};return s});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/Component", ["sap/ui/core/InvisibleMessage","sap/ui/core/UIComponent","sap/ushell/components/SharedComponentUtils","sap/ushell/resources"],function(e,t,n,o){"use strict";return t.extend("sap.ushell.components.pages.Component",{metadata:{manifest:"json",library:"sap.ushell"},init:function(){t.prototype.init.apply(this,arguments);n.toggleUserActivityLog();n.getEffectiveHomepageSetting("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations","/core/contentProviders/providerInfo/userConfigurable");n.getEffectiveHomepageSetting("/core/home/sizeBehavior","/core/home/sizeBehaviorConfigurable");this.setModel(o.i18nModel,"i18n");this._oPagesService=sap.ushell.Container.getServiceAsync("Pages");this._oInvisibleMessageInstance=e.getInstance()},getNavigationDisabled:function(){var e=this.getComponentData()||{};return!!e.navigationDisabled},getPagesService:function(){return this._oPagesService},getInvisibleMessageInstance:function(){return this._oInvisibleMessageInstance},hideRuntime:function(){this.getRootControl().getController().hideRuntime()},onRouteMatched:function(){this.getRootControl().getController().onRouteMatched()}})});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/MyHomeImport", ["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils/HttpClient","sap/base/util/ObjectPath","sap/ui/core/Configuration"],function(e,r,t,a,n){"use strict";var s={};var i="/UI2/Fiori2LaunchpadHome";s.getData=function(){if(!this.oPageSetPromise){this.oPageSetPromise=new Promise(function(e,r){var s="PageSets('%2FUI2%2FFiori2LaunchpadHome')"+"?$expand=Pages/PageChipInstances/ChipInstanceBags/ChipInstanceProperties,"+"Pages/PageChipInstances/Chip"+"&$format=json";var i={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":n.getLanguage()||"",Accept:"application/json, text/plain"};var o=sap.ushell.Container.getUser().getLanguage();if(o){i["sap-language"]=o}var u=sap.ushell.Container.getLogonSystem();var c=u&&u.getClient();if(c){i["sap-client"]=c}var l=window["sap-ushell-config"].services&&window["sap-ushell-config"].services.PageBuilding||{};var p=(a.get("config.services.pageBuilding.baseUrl",l.adapter)||"").replace(/\/?$/,"/");var d=new t(p,{headers:i});d.get(s).then(function(r){e(this.parseData.bind(this)(r))}.bind(this)).catch(r)}.bind(this))}return this.oPageSetPromise};s.isImportEnabled=function(){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){var r=e.getUser();var t=r.getImportBookmarksFlag();switch(t){case"done":case"dismissed":case"not_required":return false;case null:return this.getData().then(function(t){var a=!!t.length;var n=a?"pending":"not_required";r.setImportBookmarksFlag(n);e.updateUserPreferences();r.resetChangedProperty("importBookmarks");return a});default:return true}}.bind(this))};s.parseData=function(e){try{var t=JSON.parse(e.responseText);if(t&&t.d){t=t.d}var a=t.configuration&&JSON.parse(t.configuration)||{};var n=a.hiddenGroups||[];var s=t.Pages.results.filter(function(e){var r=e.scope==="PERSONALIZATION";var t=e.PageChipInstances.results.length>0;var a=n.indexOf(e.id)===-1;return r&&t&&a});var o=a.order||[];s.sort(function(e,r){if(o.indexOf(e.id)>o.indexOf(r.id)){return 1}if(o.indexOf(e.id)<o.indexOf(r.id)){return-1}return 0});var u=[];var c;var l=[];s.forEach(function(e){var r;if(e.layout){r=JSON.parse(e.layout)}var t={id:e.id,title:e.title,isLocked:e.isPersLocked==="X",isDefault:e.id===i,tileOrder:r&&r.order||[],linkOrder:r&&r.linkOrder||[],chips:e.PageChipInstances.results};if(t.isLocked){u.push(t)}else if(t.isDefault){c=t}else{l.push(t)}});if(!r.last("/core/home/disableSortedLockedGroups")){u.sort(function(e,r){return e.title.toLowerCase()<r.title.toLowerCase()?-1:1})}if(c){u=u.concat(c)}return u.concat(l)}catch(e){return null}};s.setImportEnabled=function(r){e.emit("importBookmarksFlag",!!r);sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){var t=e.getUser();var a=r?null:"dismissed";t.setImportBookmarksFlag(a);e.updateUserPreferences();t.resetChangedProperty("importBookmarks")})};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/StateManager", ["sap/ushell/utils","sap/ushell/EventHub"],function(i,t){"use strict";var e={};e.init=function(i,e){this.aRefreshVisualizations=[];this.oPagesVisibility={};this.oPagesRuntimeNavContainer=i;this.oPagesNavContainer=e;this.oPagesRuntimeNavContainer.attachNavigate(this._onErrorPageNavigated,this);this.oPagesNavContainer.attachNavigate(this._onPageNavigated,this);this._onTabNavigatedBind=this._onTabNavigated.bind(this);document.addEventListener("visibilitychange",this._onTabNavigatedBind);this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe("launchpad","setConnectionToServer",this._onEnableRequests,this);this.oEventBus.subscribe("sap.ushell","navigated",this._onShellNavigated,this);this.oEventHubListener=t.once("PagesRuntimeRendered").do(function(){this._setCurrentPageVisibility(true,false)}.bind(this))};e._onEnableRequests=function(i,t,e){if(!e||e.active===undefined){return}this._setCurrentPageVisibility(e.active,false)};e._setCurrentPageVisibility=function(i,t,e){if(this.oPagesRuntimeNavContainer.getCurrentPage().isA("sap.m.MessagePage")&&!e){return}var s=this.oPagesNavContainer.getCurrentPage();if(s){this._setPageVisibility(s,i,t)}};e._setPageVisibility=function(i,t,e){if(!i){return}if(i.getContent()[0].isA("sap.ushell.ui.launchpad.Page")){var s=i.getBindingContext().getPath();this.oPagesVisibility[s]=t;this._visitVisualizations(i,function(i){i.setActive(t,e)})}};e._visitVisualizations=function(i,t){if(!t){return}i.getContent()[0].getSections().forEach(function(i){i.getVisualizations().forEach(t)})};e._onShellNavigated=function(){var t=window.hasher.getHash();if(i.isFlpHomeIntent(t)){this._setCurrentPageVisibility(true,false);this._refreshVisualizations()}else{this._setCurrentPageVisibility(false,false)}return Promise.resolve()};e.addVisualizationForRefresh=function(i){this.aRefreshVisualizations.push(i)};e._refreshVisualizations=function(){this.aRefreshVisualizations.forEach(function(i){i.setActive(i.getActive(),true)});this.aRefreshVisualizations=[]};e._onTabNavigated=function(){var t=window.hasher.getHash();if(i.isFlpHomeIntent(t)){this._setCurrentPageVisibility(!document.hidden,false)}return Promise.resolve()};e._onPageNavigated=function(i){var t=i.getParameters();this._setPageVisibility(t.from,false,false);this._setPageVisibility(t.to,true,false)};e._onErrorPageNavigated=function(i){var t=i.getParameter("to");this._setCurrentPageVisibility(t.isA("sap.m.NavContainer"),false,true)};e.getPageVisibility=function(i){return this.oPagesVisibility[i]};e.exit=function(){this.oEventBus.unsubscribe("sap.ushell","navigated",this._onPageNavigated,this);document.removeEventListener("visibilitychange",this._onTabNavigatedBind);this.oPagesNavContainer.detachNavigate(this._onPageNavigated,this);this.oPagesRuntimeNavContainer.detachNavigate(this._onErrorPageNavigated,this);this.oEventBus.unsubscribe("launchpad","setConnectionToServer",this._onEnableRequests,this);this.oEventHubListener.off()};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/controller/ImportDialog.controller", ["sap/base/Log","sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ushell/components/pages/MyHomeImport","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/utils/WindowUtils"],function(e,t,i,n,s,r,a,o,u){"use strict";var l=a.DisplayFormat;var c={"X-SAP-UI2-CHIP:SSB_NUMERIC":"ssuite/smartbusiness/tiles/numeric","X-SAP-UI2-CHIP:SSB_CONTRIBUTION":"ssuite/smartbusiness/tiles/contribution","X-SAP-UI2-CHIP:SSB_TREND":"ssuite/smartbusiness/tiles/trend","X-SAP-UI2-CHIP:SSB_DEVIATION":"ssuite/smartbusiness/tiles/deviation","X-SAP-UI2-CHIP:SSB_COMPARISON":"ssuite/smartbusiness/tiles/comparison","X-SAP-UI2-CHIP:SSB_BLANK":"ssuite/smartbusiness/tiles/blank","X-SAP-UI2-CHIP:SSB_DUAL":"ssuite/smartbusiness/tiles/dual"};return t.extend("sap.ushell.components.pages.controller.ImportDialog",{open:function(){if(!this._pFragmentLoad){this._pFragmentLoad=i.load({name:"sap.ushell.components.pages.view.ImportDialog",controller:this}).then(function(e){this._oDialog=e;this._oDialog.setModel(o.i18nModel,"i18n");this._oDialog.setModel(new n({busy:true,groups:[],PersonalizedGroups:[]}));s.getData().then(function(t){e.getModel().setData({busy:false,groups:t,PersonalizedGroups:t.map(function(e){return{title:e.isDefault?o.i18n.getText("my_group"):e.title,description:e.id,selected:true}})})}).catch(function(e){return sap.ushell.Container.getServiceAsync("Message").then(function(t){t.error(e)})});return this._oDialog}.bind(this))}return Promise.all([sap.ushell.Container.getServiceAsync("URLParsing").then(function(e){this._oURLParsingService=e}.bind(this)),this._pFragmentLoad]).then(function(){this._oDialog.open();return this._oDialog}.bind(this))},close:function(){if(this._oDialog){this._oDialog.close()}},doImport:function(){var e=this._oDialog.getModel();var t=[];e.getProperty("/PersonalizedGroups").forEach(function(e){if(e.selected){t.push(e.description)}});var i=this._prepareImport(t);this._saveImport(i)},_moveVisualization:function(e,t,i,n,s){var r=this._getSectionIndex(e,t,i,s);var a=this._getDefaultSectionIndex(e);var o=this._getDefaultSection(e);var u=0;if(o&&o.visualizations&&o.visualizations.length){u=o.visualizations.length-1}return e.moveVisualization(this.iPageIndex,a,u,r,n)},_updateVisualization:function(e,t,i,n,s,r){if(i.bUpdateNeeded){var a=this._getSectionIndex(e,t,n,r);var o=this._filterNonSupportedProperties(i,["title","target","subtitle","icon","info","numberUnit","indicatorDataSource","displayFormatHint"]);return e.updateVisualization(this.iPageIndex,a,s,o)}return Promise.resolve()},_addVisualization:function(e,t,i,n,s,r,a){var o;if(t.isABookmark){if(t.isCustomBookmark){this.aPromiseChain.push(function(){o=this._filterNonSupportedProperties(t,["title","url","subtitle","icon","info","vizConfig","loadManifest","chipConfig"]);return s.bookmark.addCustomBookmark(t.vizType,o,r).then(this._moveVisualization.bind(this,s.pages,e,n,i,a)).then(this._updateVisualization.bind(this,s.pages,e,t,n,i,a))}.bind(this))}else{this.aPromiseChain.push(function(){o=this._filterNonSupportedProperties(t,["title","url","icon","info","subtitle","serviceUrl","serviceRefreshInterval","numberUnit"]);return s.bookmark.addBookmark(o,r).then(this._moveVisualization.bind(this,s.pages,e,n,i,a)).then(this._updateVisualization.bind(this,s.pages,e,t,n,i,a))}.bind(this))}}else{this.aPromiseChain.push(function(){var r=this._getSectionIndex(s.pages,e,n,a);var o=s.pages.getModel().getProperty("/pages/"+this.iPageIndex+"/sections/"+r+"/id");return s.pages.addVisualization(this.sPageId,o,t.vizId).then(this._updateVisualization.bind(this,s.pages,e,t,n,i,a))}.bind(this))}},_addToPresetSection:function(e,t,i,n,s){var r=this._getPresetSection(i.pages);var a=r.visualizations.filter(function(e){return e.displayFormatHint!==l.Compact}).length;var o=r.visualizations.filter(function(e){return e.displayFormatHint===l.Compact}).length;for(var u=0;u<e.tiles.length;++u){this._addVisualization(e,e.tiles[u],u+a,t,i,n,s)}for(var c=0;c<e.links.length;++c){this._addVisualization(e,e.links[c],c+o+a+e.tiles.length,t,i,n,s)}},_addSection:function(e,t,i,n,s){this.aPromiseChain.push(function(){var n=this._getSectionIndex(i.pages,e,t,s);return i.pages.addSection(this.iPageIndex,n,{title:e.title})}.bind(this));for(var r=0,a=e.tiles.length;r<a;++r){this._addVisualization(e,e.tiles[r],r,t,i,n,s)}for(var o=0,u=e.links.length;o<u;++o){this._addVisualization(e,e.links[o],o+e.tiles.length,t,i,n,s)}},_getMyHomeContentNode:function(e){var t=r.last("/core/spaces/myHome/myHomeSpaceId");return e.getContentNodes().then(function(e){var i=e.find(function(e){return e.id===t});if(!i){return null}return i.children.find(function(e){return e.id===this.sPageId}.bind(this))}.bind(this))},_saveImport:function(e){this._oDialog.setBusy(true);var t;this.sPageId=r.last("/core/spaces/myHome/myHomePageId");this.aPromiseChain=[];return Promise.all([sap.ushell.Container.getServiceAsync("Bookmark"),sap.ushell.Container.getServiceAsync("Message"),sap.ushell.Container.getServiceAsync("Pages"),sap.ushell.Container.getServiceAsync("UserInfo")]).then(function(e){t={bookmark:e[0],message:e[1],pages:e[2],userInfo:e[3]};return this._getMyHomeContentNode(t.bookmark)}.bind(this)).then(function(i){this.iPageIndex=t.pages.getPageIndex(this.sPageId);t.pages.enableImplicitSave(false);this._performImportOperations(e,t,i);return this._executeSequentially(this.aPromiseChain)}.bind(this)).then(function(){return this._savePersonalizations(t.pages)}.bind(this)).then(function(){t.message.info(o.i18n.getText("MyHome.InitialPage.Message.ImportSuccessful"));t.userInfo.getUser().setImportBookmarksFlag("done");return t.userInfo.updateUserPreferences()}).then(function(){u.refreshBrowser()}).catch(function(e){t.message.error(e)}).finally(function(){this._oDialog.setBusy(false);this.close()}.bind(this))},_performImportOperations:function(e,t,i){var n;var s=false;for(var r=0,a=e.length;r<a;++r){n=e[r];if(n.isDefault){this._addToPresetSection(n,r,t,i,s);s=true}else{this._addSection(n,r,t,i,s)}}},_executeSequentially:function(t){return t.reduce(function(t,i){return t.then(function(){return i()}).catch(function(t){e.error(t)})},Promise.resolve())},_getSectionIndex:function(e,t,i,n){var s=this._getPresetSectionIndex(e);if(!t.isDefault&&!t.isLocked&&!n){return s+i+1}return s+i},_getPresetSectionIndex:function(e){var t=e.getModel().getProperty("/pages/"+this.iPageIndex+"/sections/");return t.findIndex(function(e){return e.id===r.last("/core/spaces/myHome/presetSectionId")})},_getDefaultSectionIndex:function(e){var t=e.getModel().getProperty("/pages/"+this.iPageIndex+"/sections/");return t.findIndex(function(e){return e.default})},_getPresetSection:function(e){var t=e.getModel().getProperty("/pages/"+this.iPageIndex+"/sections/");return t.find(function(e){return e.id===r.last("/core/spaces/myHome/presetSectionId")})},_getDefaultSection:function(e){var t=e.getModel().getProperty("/pages/"+this.iPageIndex+"/sections/");return t.find(function(e){return e.default})},_gatherVizDataObjectFromChipInstance:function(t){var i;var n;var s={vizId:t.chipId,isABookmark:!!t.configuration};var a=r.last("/core/stableIDs/enabled");if(a){var o=t.Chip&&t.Chip.referenceChipId;if(o&&o!=="O"){s.vizId=t.Chip.referenceChipId}}if(s.isABookmark){s.isCustomBookmark=["X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER","X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER"].indexOf(t.chipId)===-1;i=JSON.parse(JSON.parse(t.configuration).tileConfiguration);s.title=i.display_title_text;s.url=i.navigation_target_url;s.icon=i.display_icon_url;s.info=i.display_info_text;s.subtitle=i.display_subtitle_text;s.serviceUrl=i.service_url;s.serviceRefreshInterval=i.service_refresh_interval;s.numberUnit=i.display_number_unit}if(s.isCustomBookmark){if(i.TILE_PROPERTIES){try{var u=JSON.parse(i.TILE_PROPERTIES);if(!s.url&&u.semanticObject&&u.semanticAction){var l={};if(u.evaluationId){l.EvaluationId=u.evaluationId}s.url="#"+this._oURLParsingService.constructShellHash({target:{semanticObject:u.semanticObject,action:u.semanticAction},params:l})}if(u.title){s.title=u.title}if(u.subtitle){s.subtitle=u.subtitle}}catch(t){e.error("Could not create URL for custom bookmark with title: "+s.title+", Error Message: "+t.message)}}s.vizConfig={};s.loadManifest=true;s.vizType=c[t.chipId];s.chipConfig={chipId:t.chipId,bags:{},configuration:JSON.parse(t.configuration)}}n=t.ChipInstanceBags.results;if(n.length){s.bUpdateNeeded=!s.isABookmark;if(s.isCustomBookmark){n.forEach(function(e){s.chipConfig.bags[e.id]={properties:{},texts:{}};e.ChipInstanceProperties.results.forEach(function(t){if(t.translatable==="X"){s.chipConfig.bags[e.id].texts[t.name]=t.value}else{s.chipConfig.bags[e.id].properties[t.name]=t.value}})})}n.filter(function e(t){return t.id==="tileProperties"}).forEach(function(e){e.ChipInstanceProperties.results.forEach(function(e){switch(e.name){case"display_title_text":s.title=e.value;break;case"display_subtitle_text":s.subtitle=e.value;break;case"display_info_text":s.info=e.value;break;case"display_search_keywords":s.searchKeyword=e.value;break;default:break}})});n.filter(function e(t){return t.id==="sb_tileProperties"}).forEach(function(e){e.ChipInstanceProperties.results.forEach(function(e){switch(e.name){case"title":s.title=e.value;break;case"description":s.subtitle=e.value;break;default:break}})})}return s},_savePersonalizations:function(e){e.enableImplicitSave(true);return e.savePersonalization(this.sPageId).then(function(){e.enableImplicitSave(false)})},_prepareImport:function(e){var t={};var i=this._oDialog.getModel();var n=i.getProperty("/groups");var s;var r;n.forEach(function(i){if(e.indexOf(i.id)===-1){return}s={};i.chips.forEach(function(e){r=this._gatherVizDataObjectFromChipInstance(e);s[e.instanceId]=r}.bind(this));i.tiles=[];i.tileOrder.forEach(function(e){r=s[e];if(r){delete s[e];i.tiles.push(r)}});i.links=[];i.linkOrder.forEach(function(e){r=s[e];if(r){delete s[e];r.displayFormatHint=l.Compact;r.bUpdateNeeded=true;i.links.push(r)}});Object.keys(s).map(function(e){i.tiles.push(s[e])});t[i.id]=i}.bind(this));var a=[];var o;e.forEach(function(e){o=t[e];if(o){a.push(o)}});return a},_filterNonSupportedProperties:function(e,t){var i={};Object.keys(e).forEach(function(n){if(t.includes(n)){i[n]=e[n]}});return i}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/controller/MyHome.controller", ["sap/ushell/components/pages/MyHomeImport","sap/ui/model/json/JSONModel","sap/ui/core/mvc/Controller","sap/ushell/resources","sap/ushell/EventHub","sap/base/Log"],function(e,o,i,n,t,s){"use strict";return i.extend("sap.ushell.components.pages.controller.MyHome",{onInit:function(){this.oViewModel=new o({personalizationAvailable:false});var i=function(e){this.oViewModel.setProperty("/personalizationAvailable",!!e)}.bind(this);this.getView().setModel(n.i18nModel,"i18n");this.getView().setModel(this.oViewModel,"view");e.isImportEnabled().then(i);this.oImportBookmarksFlagListener=t.on("importBookmarksFlag").do(i)},onExit:function(){this.oImportBookmarksFlagListener.off()},connect:function(e){this.fnOnEdit=e.onEdit;this.fnOnOpenDialog=e.onOpenDialog},onEditPress:function(){if(this.fnOnEdit){this.fnOnEdit()}},onImportDialogPress:function(){if(this.fnOnOpenDialog){this.fnOnOpenDialog()}},onMessageStripClose:function(){this.oViewModel.setProperty("/personalizationAvailable",false);e.setImportEnabled(false);sap.ui.require(["sap/m/MessageBox"],function(e){e.information(n.i18n.getText("MyHome.InitialPage.MessageStrip.Popup"))})}})});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/controller/PageRuntime.controller", ["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ui/events/KeyCodes","sap/m/GenericTile","sap/ushell/resources","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/m/library","sap/m/MessageToast","sap/ushell/components/pages/StateManager","sap/ushell/EventHub","sap/ushell/utils","sap/m/Button","sap/base/strings/capitalize","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ushell/components/pages/controller/PagesAndSpaceId","sap/ushell/components/pages/MyHomeImport","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/theming/Parameters"],function(e,t,i,n,o,a,r,s,l,u,d,g,c,h,p,m,v,f,P,jQuery,_,M){"use strict";var C=s.LoadState;var y=e.DisplayFormat;return t.extend("sap.ushell.components.pages.controller.Pages",{onInit:function(){this._setPerformanceMark("FLP-PagesRuntime-onInit");this._oVisualizationInstantiationServicePromise=sap.ushell.Container.getServiceAsync("VisualizationInstantiation");this._oURLParsingService=sap.ushell.Container.getServiceAsync("URLParsing");this._oViewSettingsModel=new a({sizeBehavior:r.last("/core/home/sizeBehavior"),actionModeActive:false,actionModeEditActive:false,showHideButton:r.last("/core/catalog/enableHideGroups"),showAddButton:r.last("/core/catalog/enabled"),personalizationEnabled:r.last("/core/shell/enablePersonalization"),addToMyHomeOnly:false,gridContainerGap:[],gridContainerRowSize:[]});this.getView().setModel(this._oViewSettingsModel,"viewSettings");this._sMyHomePageId=r.last("/core/spaces/myHome/myHomePageId");this._aConfigListeners=r.on("/core/home/sizeBehavior").do(function(e){this._oViewSettingsModel.setProperty("/sizeBehavior",e)}.bind(this));this._oErrorPageModel=new a({icon:"sap-icon://documents",text:"",description:"",details:""});this.getView().setModel(this._oErrorPageModel,"errorPage");this.oInitFinishedPromise=Promise.all([this._oVisualizationInstantiationServicePromise,this.getOwnerComponent().getPagesService()]).then(function(e){this._oVisualizationInstantiationService=e[0];this.getView().setModel(e[1].getModel())}.bind(this));d.emit("S4MyHomePlugin",this.byId("pagesNavContainer").getId());var e=sap.ushell.Container.getRenderer();this.bIsHomeIntentRootIntent=g.isFlpHomeIntent(e.getShellConfig().rootIntent);this.oErrorPage=this.byId("errorPage");this.oEmptyPage=this.byId("emptyPage");this.oPagesNavContainer=this.byId("pagesNavContainer");this.oPagesRuntimeNavContainer=this.byId("pagesRuntimeNavContainer");this.oPagesRuntimeNavContainer.to(this.oEmptyPage);u.init(this.oPagesRuntimeNavContainer,this.oPagesNavContainer);this.oEventHubListener=d.once("PagesRuntimeRendered").do(this._onFirstPageRendering.bind(this));this._oEventBus=sap.ui.getCore().getEventBus();this._oEventBus.subscribe("launchpad","shellFloatingContainerIsDocked",this._handleUshellContainerDocked,this);this._oEventBus.subscribe("launchpad","shellFloatingContainerIsUnDocked",this._handleUshellContainerDocked,this);this.oVisualizationInstantiationListener=d.on("VizInstanceLoaded").do(function(){this._setPerformanceMark("FLP-TTI-Homepage");if(!this.oVisualizationInstantiationListenerTimeout){this.oVisualizationInstantiationListenerTimeout=setTimeout(function(){this.oVisualizationInstantiationListener.off()}.bind(this),5e3)}}.bind(this));this.fnBoundSetGridContainerSizes=this._setGridContainerSizes.bind(this);r.on("/core/home/sizeBehavior").do(this.fnBoundSetGridContainerSizes);d.on("themeChanged").do(this.fnBoundSetGridContainerSizes);this.sCurrentTargetPageId="";return this._openFLPPage().then(function(){if(!document.activeElement||document.activeElement===document.body){var t=jQuery(this.oPagesNavContainer.getDomRef()).firstFocusableDomRef();if(t){t.focus()}}if(!this.getOwnerComponent().getNavigationDisabled()){this.oContainerRouter=e.getRouter();this.oContainerRouter.getRoute("home").attachMatched(this.onRouteMatched.bind(this,true));this.oContainerRouter.getRoute("openFLPPage").attachMatched(this.onRouteMatched.bind(this,false))}}.bind(this))},_setGridContainerSizes:function(){var e=r.last("/core/home/sizeBehavior");var t=this.getView().getModel("viewSettings");var i=e==="Small"?"_sap_ushell_Tile_SpacingXS":"_sap_ushell_Tile_Spacing";var n=e==="Small"?"_sap_ushell_Tile_SpacingXS":"_sap_ushell_Tile_SpacingS";t.setProperty("/gridContainerGap/gridContainerGap",this._getNumericThemeParam(i));t.setProperty("/gridContainerGap/gridContainerGapXS",this._getNumericThemeParam("_sap_ushell_Tile_SpacingXS"));t.setProperty("/gridContainerGap/gridContainerGapS",this._getNumericThemeParam(n));t.setProperty("/gridContainerGap/gridContainerGapM",this._getNumericThemeParam(i));t.setProperty("/gridContainerGap/gridContainerGapL",this._getNumericThemeParam(i));t.setProperty("/gridContainerGap/gridContainerGapXL",this._getNumericThemeParam(i));var o=e==="Small"?"_sap_ushell_Tile_WidthXS":"_sap_ushell_Tile_Width";var a=e==="Small"?"_sap_ushell_Tile_WidthXS":"_sap_ushell_Tile_WidthS";t.setProperty("/gridContainerRowSize/gridContainerRowSize",this._getNumericThemeParam(o));t.setProperty("/gridContainerRowSize/gridContainerRowSizeXS",this._getNumericThemeParam("_sap_ushell_Tile_WidthXS"));t.setProperty("/gridContainerRowSize/gridContainerRowSizeS",this._getNumericThemeParam(a));t.setProperty("/gridContainerRowSize/gridContainerRowSizeM",this._getNumericThemeParam(o));t.setProperty("/gridContainerRowSize/gridContainerRowSizeL",this._getNumericThemeParam(o));t.setProperty("/gridContainerRowSize/gridContainerRowSizeXL",this._getNumericThemeParam(o))},_getNumericThemeParam:function(e){var t=M.get(e);if(t&&t.indexOf(".")===0){t="0"+t}return t},_isMyHomeEnabled:function(){return r.last("/core/spaces/myHome/userEnabled")&&r.last("/core/spaces/myHome/enabled")},_getMyHomeTitle:function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.getMyHomeSpace()}).then(function(e){if(!e||!e.children.length){return""}return e.children[0].label})},_onFirstPageRendering:function(){var e=r.last("/core/shell/enablePersonalization");var t=this._isMyHomeEnabled();if(e){this._createActionModeButton()}else if(t){this._getMyHomeTitle().then(this._createActionModeButton.bind(this))}d.emit("firstSegmentCompleteLoaded",true)},onRouteMatched:function(e){var t=r.last("/core/homeApp/enabled");var i=t&&e;_.debug("cep/editMode: on Route matched","Page runtime");this._removeMyHomePage();if(!i){this._openFLPPage()}else{this.oPagesRuntimeNavContainer.to(this.oEmptyPage);r.emit("/core/shell/model/currentSpaceAndPage",undefined)}var n=sap.ui.getCore().byId("ActionModeBtn");if(!n){return}var o=sap.ushell.Container.getRenderer("fiori2");var a=this._getStateInfoActionModeButton();if(i){if(this._moveEditActionToHeader()){o.hideHeaderEndItem(n.getId(),a.bCurrentState,a.aStates)}else{o.hideActionButton(n.getId(),a.bCurrentState,a.aStates)}return}if(!e&&t){if(this._moveEditActionToHeader()){o.showHeaderEndItem(n.getId(),a.bCurrentState,a.aStates)}else{o.showActionButton(n.getId(),a.bCurrentState,a.aStates)}return}if(!this.bIsHomeIntentRootIntent){if(this._moveEditActionToHeader()){o.showHeaderEndItem(n.getId(),a.bCurrentState,a.aStates)}else{o.showActionButton(n.getId(),a.bCurrentState,a.aStates)}}},_setPerformanceMark:function(e){g.setPerformanceMark(e,{bUseUniqueMark:true,bUseLastMark:true})},_setActionButtonText:function(e){e=e||this._sActionModeTextId;if(!e){return}this._sActionModeTextId=e;this._getMyHomeTitle().then(function(t){var i=sap.ui.getCore().byId("ActionModeBtn");if(i){var n=o.i18n.getText(e,t);i.setText(n);i.setTooltip(n)}})},_setActionModeLogic:function(e){var t=false;var i=false;if(r.last("/core/shell/enablePersonalization")){t=true}else if(e){t=true;this._setActionButtonText("PageRuntime.EditModeForPage.Activate")}else if(this._isMyHomeEnabled()){i=true;this._setActionButtonText("PageRuntime.EditModeForPage.AddTilesToMyHome")}this._oViewSettingsModel.setProperty("/personalizationEnabled",t);this._oViewSettingsModel.setProperty("/addToMyHomeOnly",i)},_openFLPPage:function(){return v._getPageAndSpaceId().then(function(e){var t=e.pageId;var i=e.spaceId;this.sCurrentTargetPageId=t;this.sCurrentTargetSpaceId=i;return Promise.all([this.oInitFinishedPromise,sap.ushell.Container.getServiceAsync("Menu")]).then(function(e){var n=e[1];return n.isSpacePageAssigned(i,t)}).then(function(e){if(!e){return Promise.reject("The combination of space and page is not assigned to the user.")}return this.getOwnerComponent().getPagesService()}.bind(this)).then(function(e){_.debug("cep/editMode: load Page: "+t,"Page runtime");return e.loadPage(t)}).then(function(){_.debug("cep/editMode: load Page: show action mode button "+t,"Page runtime");this._showActionModeButton();if(this.sCurrentTargetPageId===t){var e=this._isMyHomeRouteActive();this._setActionModeLogic(e);if(e&&this._isMyHomePageEmpty()){return this._navigateToInitialMyHome()}return this._navigate(t,i)}return Promise.resolve()}.bind(this)).then(this._notifyOnPageRuntimeRendered.bind(this)).catch(function(e){_.debug("cep/editMode: open FLP Page: Handle errors","Page runtime");if(e instanceof Error){this._oErrorPageModel.setProperty("/text",o.i18n.getText("PageRuntime.GeneralError.Text"))}else{var n=o.i18n.getText("PageRuntime.CannotLoadPage.Description")+JSON.stringify(e);this._oErrorPageModel.setProperty("/icon","sap-icon://documents");this._oErrorPageModel.setProperty("/text",o.i18n.getText("PageRuntime.CannotLoadPage.Text",[t,i]));this._oErrorPageModel.setProperty("/description","");this._oErrorPageModel.setProperty("/details",n)}this.oPagesRuntimeNavContainer.to(this.oErrorPage);this._hideActionModeButton();this._cancelActionMode();this._notifyOnPageRuntimeRendered()}.bind(this))}.bind(this)).catch(this._onError.bind(this))},_onError:function(e){this._oErrorPageModel.setProperty("/icon","sap-icon://documents");this._oErrorPageModel.setProperty("/text",e||"");this._oErrorPageModel.setProperty("/description","");this._oErrorPageModel.setProperty("/details","");this.oPagesRuntimeNavContainer.to(this.oErrorPage);this._hideActionModeButton();this._cancelActionMode();this._notifyOnPageRuntimeRendered()},_navigate:function(e,t,i){var n=this.oPagesNavContainer.getPages().find(function(t){return e===t.data("pageId")});if(!n){return Promise.reject()}var o;return sap.ushell.Container.getServiceAsync("Menu").then(function(e){o=e;return Promise.all([o.hasMultiplePages(t),o.isPinned(t)])}).then(function(a){var s=a[0];var l=a[1];var u=this.oPagesNavContainer.getCurrentPage()===n;this.oPagesNavContainer.to(n);this.oPagesRuntimeNavContainer.to(this.oPagesNavContainer);if(!u&&!i){this._cancelActionMode()}o.getSpaceAndPageTitles(t,e).then(function(e){var t=n.getContent()[0];var i=s||!l;if(i){t.setTitle(this._formatPageTitle(e.pageTitle,e.spaceTitle,s,!l))}t.setShowTitle(i);var o={pageTitle:e.pageTitle,spaceTitle:e.spaceTitle,hash:P.getHash()};r.emit("/core/shell/model/currentSpaceAndPage",o)}.bind(this))}.bind(this))},_navigateToInitialMyHome:function(){if(!this._pLoadMyHomeView){this._pLoadMyHomeView=new Promise(function(e,t){sap.ui.require(["sap/ui/core/mvc/XMLView"],function(i){i.create({id:"sapUshellMyHomePage",viewName:"sap.ushell.components.pages.view.MyHomeStart"}).then(function(t){t.getController().connect({onEdit:this.pressActionModeButton.bind(this),onOpenDialog:this.openMyHomeImportDialog.bind(this)});e(t)}.bind(this)).catch(t)}.bind(this),t)}.bind(this))}return this._pLoadMyHomeView.then(function(e){this._cancelActionMode();this.oPagesRuntimeNavContainer.insertPage(e,0);this.oPagesRuntimeNavContainer.to(e)}.bind(this))},_notifyOnPageRuntimeRendered:function(){try{var e;var t=this.oPagesNavContainer.getCurrentPage();e=t&&t.getId();d.emit("S4Plugin_PagesRuntimeRendered",e)}catch(e){_.error("Error while trying to trigger the PagesRuntimeRendered event for the S/4 My Home plugin")}d.emit("PagesRuntimeRendered");if(d.last("AppRendered")!==undefined){d.emit("AppRendered",undefined)}},_pressViewDetailsButton:function(){var e=this._oErrorPageModel.getProperty("/details")||"";this._oErrorPageModel.setProperty("/description",e)},_copyToClipboard:function(){var e=g.copyToClipboard(this._oErrorPageModel.getProperty("/description"));if(e){l.show(o.i18n.getText("PageRuntime.CannotLoadPage.CopySuccess"),{closeOnBrowserNavigation:false})}else{l.show(o.i18n.getText("PageRuntime.CannotLoadPage.CopyFail"),{closeOnBrowserNavigation:false})}},_visualizationFactory:function(e,t){if(this._oVisualizationInstantiationService){var i=t.getObject();var o=t.getPath();var a=o.replace(/\/visualizations\/\d*\/?$/,"");var r=a.replace(/\/sections\/\d*\/?$/,"");var s=t.getModel().getProperty(r);var l=this._oVisualizationInstantiationService.instantiateVisualization(i);l.attachPress(this.onVisualizationPress,this);l.bindEditable("viewSettings>/actionModeActive");if(l.bindRemovable){l.bindRemovable("viewSettings>/actionModeEditActive")}this._addTileActions(l,s?s.id:"");l.attachBeforeActionSheetOpen(function(){var e=this._createMoveTileActionButton(l,s);if(e){l.attachEventOnce("afterActionSheetClose",function(){l.removeTileAction(e)})}}.bind(this));var d=t.getPath().split("/")[2];var g=!!u.getPageVisibility("/pages/"+d);l.setActive(g);return l}return new n({state:C.Failed})},_addTileActions:function(e,t){var i=e.getAvailableDisplayFormats();var n=r.last("/core/shell/enablePersonalization");var o=this._isMyHomeEnabled();var a=t===this._sMyHomePageId;if(n||a){for(var s=0;s<i.length;s++){e.addTileAction(new c({text:"{i18n>VisualizationInstance.ConvertTo"+h(i[s])+"Action}",press:[i[s],this._updateVisualizationDisplayFormat,this]}))}}if(o&&!a){e.addTileAction(new c({text:"{i18n>addToMyHome_action}",press:[e,this._addToMyHome,this]}))}},_createMoveTileActionButton:function(e,t){var i=t?t.id:"";var n=i===this._sMyHomePageId;var a=r.last("/core/shell/enablePersonalization");var s=t.sections.filter(function(e){return!e.default});var l=e.getParent().getBindingContext().getProperty("default");if((a||n)&&s.length>=(l?1:2)){var u=new c({text:o.i18n.getText("moveTile_action"),press:[e,this._openMoveVisualizationDialog,this]});e.addTileAction(u);return u}},_openMoveVisualizationDialog:function(e,t){this._oVizInstanceToBeMoved=t;var i=t.getBindingContext().getPath();var n=i.split("/");var o=t.getParent().getBindingContext().getProperty("id");var a="/pages/"+n[2]+"/sections";if(!this._oMoveVisualizationDialogPromise){this._oMoveVisualizationDialogPromise=new Promise(function(e){sap.ui.require(["sap/ui/core/Fragment"],function(t){t.load({name:"sap.ushell.components.pages.MoveVisualization",controller:this}).then(function(t){this.getView().addDependent(t);e(t)}.bind(this))}.bind(this))}.bind(this))}return this._oMoveVisualizationDialogPromise.then(function(e){e.bindObject({path:a});e.getBinding("items").filter([new p("default",m.EQ,false),new p("id",m.NE,o)]);e.open()})},_addToMyHome:function(e,t){var i=t.getBindingContext().getObject();return this.getOwnerComponent().getPagesService().then(function(e){return e.copyVisualization(this._sMyHomePageId,null,i)}.bind(this)).then(function(){l.show(o.i18n.getText("PageRuntime.Message.VisualizationAddedToMyHome"))})},_confirmSelect:function(e){var t=this._oVizInstanceToBeMoved.getBindingContext().getPath();var i=t.split("/");var n=i[2];var o=i[4];var a=i[6];var r=e.getParameter("selectedItem").getBindingContext().getPath();var s=r.split("/");var u=s[4];var d=this._getAncestorControl(this._oVizInstanceToBeMoved,"sap.ushell.ui.launchpad.Section");var g=this._getAncestorControl(this._oVizInstanceToBeMoved,"sap.ushell.ui.launchpad.Page");var c=g.getSections();var h=c[u];var p=d.getItemPosition(this._oVizInstanceToBeMoved).area;this._oVizInstanceToBeMoved=null;var m=this.getOwnerComponent();return m.getPagesService().then(function(e){return e.moveVisualization(n,o,a,u,-1)}).then(function(e){var t=h.getVisualizations()[e.visualizationIndex];if(t){h.focusVisualization(t)}var i=this._getVizMoveMessage(o,u,p,p);l.show(i)}.bind(this))},_onMoveTileSearch:function(e){var t=e.getParameter("value");var i=new p("title",m.Contains,t);var n=new p("default",m.EQ,false);var o=e.getParameter("itemsBinding");o.filter([i,n])},_onMoveTileDialogClose:function(e){this._oVizInstanceToBeMoved=null},_getVizInstanceById:function(e,t,i){var n=this.byId("pagesNavContainer");var o=n.getPages().find(function(t){return t.getBindingContext().getObject().id===e});if(!o){return null}var a=o.getContent()[0];var r=a.getSections().find(function(e){return e.getBindingContext().getObject().id===t});if(!r){return null}var s=r.getVisualizations().find(function(e){return e.getBindingContext().getObject().id===i});return s||null},_updateVisualizationDisplayFormat:function(e,t){var i=e.getSource().getBindingContext();var n=i.getPath();var o=n.split("/");var a;var r=o[4];var s=o[4];var u=this.getOwnerComponent();return u.getPagesService().then(function(e){a=e.getModel().getProperty(n).displayFormatHint;var i={displayFormatHint:t};return e.updateVisualization(o[2],o[4],o[6],i)}).then(function(e){var i=this._getVizInstanceById(e.pageId,e.sectionId,e.vizRefId);var n=this._getAncestorControl(i,"sap.ushell.ui.launchpad.Section");if(n){n.focusVisualization(i)}var o=this._getVizMoveMessage(r,s,a,t);l.show(o)}.bind(this))},onVisualizationPress:function(e){var t=e.getParameter("scope");var i=e.getParameter("action");var n=e.getSource();var a=n.getBindingContext();var r=a.getPath();var s=r.split("/");var d=this._getAncestorControl(n,"sap.ushell.ui.launchpad.Section");if(t==="Display"&&i==="Press"){u.addVisualizationForRefresh(n)}else if(t==="Actions"&&i==="Remove"){return this.getOwnerComponent().getPagesService().then(function(e){var t=d.getItemPosition(n);e.deleteVisualization(s[2],s[4],s[6]);l.show(o.i18n.getText("PageRuntime.Message.VisualizationRemoved"));d._focusItem(t)})}return Promise.resolve()},onExit:function(){this.oContainerRouter.getRoute("home").detachMatched(this.onRouteMatched,this);this.oContainerRouter.getRoute("openFLPPage").detachMatched(this.onRouteMatched,this);this._aConfigListeners.off();this.oEventHubListener.off();this._oEventBus.unsubscribe("launchpad","shellFloatingContainerIsDocked",this._handleUshellContainerDocked,this);this._oEventBus.unsubscribe("launchpad","shellFloatingContainerIsUnDocked",this._handleUshellContainerDocked,this);u.exit();var e=sap.ui.getCore().byId("ActionModeBtn");if(e){e.destroy()}},_hideActionModeButton:function(){var e=sap.ui.getCore().byId("ActionModeBtn");_.debug("cep/editMode: hide Action Mode Button","Page runtime");if(e){e.setVisible(false)}},_showActionModeButton:function(){var e=sap.ui.getCore().byId("ActionModeBtn");if(e){e.setVisible(true)}},_moveEditActionToHeader:function(){var e=sap.ushell.Container.getRenderer("fiori2");var t=e.getShellConfig().moveEditHomePageActionToShellHeader;return t&&r.last("/core/shell/enablePersonalization")},_createActionModeButton:function(e){var t=e?o.i18n.getText("PageRuntime.EditModeForPage.Activate",e):o.i18n.getText("PageRuntime.EditMode.Activate");var i={id:"ActionModeBtn",text:t,icon:"sap-icon://edit",press:[this.pressActionModeButton,this]};_.debug("cep/editMode: create Action Mode Button","Page runtime");if(this._moveEditActionToHeader()){i.tooltip=t;this._createHeaderActionModeButton(i)}else{this._createUserActionModeButton(i)}},_createHeaderActionModeButton:function(e){sap.ui.require(["sap/ushell/ui/shell/ShellHeadItem"],function(t){var i=new t(e);if(r.last("/core/extension/enableHelp")){i.addStyleClass("help-id-ActionModeBtn")}var n=sap.ushell.Container.getRenderer("fiori2");var o=this._getStateInfoActionModeButton();n.showHeaderEndItem(i.getId(),o.bCurrentState,o.aStates)}.bind(this))},_getStateInfoActionModeButton:function(){if(!this.bIsHomeIntentRootIntent){return{bCurrentState:true,aStates:null}}return{bCurrentState:false,aStates:["home"]}},_createUserActionModeButton:function(e){var t=this._getStateInfoActionModeButton();var i={controlType:"sap.ushell.ui.launchpad.ActionItem",oControlProperties:e,bIsVisible:true,bCurrentState:t.bCurrentState,aStates:t.aStates};var n=sap.ushell.Container.getRenderer("fiori2");n.addUserAction(i).done(function(e){if(r.last("/core/extension/enableHelp")){e.addStyleClass("help-id-ActionModeBtn")}this._setActionButtonText()}.bind(this))},pressActionModeButton:function(){var e=this.getView().getModel("viewSettings");var t=e.getProperty("/actionModeActive");var i=e.getProperty("/personalizationEnabled");var n=e.getProperty("/addToMyHomeOnly");sap.ui.require(["sap/ushell/components/pages/ActionMode"],function(e){if(t){e.cancel();return}else if(i||n||this._isMyHomeRouteActive()){e.start(this,n?o.i18n.getText("PageRuntime.EditMode.ExitAddTilesMode"):null)}}.bind(this))},_cancelActionMode:function(){var e=this.getView().getModel("viewSettings").getProperty("/actionModeActive");if(e){sap.ui.require(["sap/ushell/components/pages/ActionMode"],function(e){e.cancel()})}},handleEditModeAction:function(e,t,i,n){sap.ui.require(["sap/ushell/components/pages/ActionMode"],function(o){_.debug("cep/editMode: handle Edit Mode Action","Page runtime");o[e](t,i,n)})},_getAncestorControl:function(e,t){if(e&&e.isA&&e.isA(t)){return e}else if(e&&e.getParent){return this._getAncestorControl(e.getParent(),t)}return null},moveVisualization:function(e){var t=e.getParameter("draggedControl");var n=e.getParameter("droppedControl");var o=e.getParameter("dropPosition");var a=e.getParameter("browserEvent");var r=a&&a.keyCode;var s=this._getAncestorControl(t,"sap.ushell.ui.launchpad.Page");var u=parseInt(t.getBindingContext().getPath().split("/")[2],10);var d=this._getAncestorControl(t,"sap.ushell.ui.launchpad.Section");var g=s.indexOfSection(d);var c=d.indexOfVisualization(t);var h=d.getVisualizations()[c];var p=d.getItemPosition(h);var m;var v;var f;var P;var _;if(!n){var M=e.mParameters.browserEvent.keyCode===i.ARROW_UP;var C=s.getSections();v=g;while(true){v=M?--v:++v;m=C[v];if(!m||m.getDefault()){h.invalidate();return Promise.resolve()}if(m.getShowSection()||m.getEditable()){f=m.getClosestCompactItemIndex(t.getDomRef(),M);P=m.getVisualizations()[f];_=m.getItemPosition(P);if(_.area!==p.area){_=p}break}}}else{if(n.isA("sap.ushell.ui.launchpad.section.CompactArea")){var y=n.getItems();if(y.length){n=y[y.length-1];o="After"}}m=this._getAncestorControl(n,"sap.ushell.ui.launchpad.Section");v=s.indexOfSection(m);if(m.getDefault()&&!d.getDefault()){h.invalidate();return Promise.resolve()}f=m.indexOfVisualization(n);P=m.getVisualizations()[f];_=m.getItemPosition(P);if(_.index===-1){_.area=p.area}if(g===v){if(o==="Before"&&c<f){f--}else if(o==="After"&&c>f){f++}if(c===f&&_.area===p.area){h.invalidate();return Promise.resolve()}}else if(o==="After"){f++}}if(g!==v&&(r===i.ARROW_UP||r===i.ARROW_DOWN)&&p.index>_.index){f++}var S;var b=this.getOwnerComponent();return b.getPagesService().then(function(e){S=e;S.enableImplicitSave(false);return S.moveVisualization(u,g,c,v,f)}).then(function(e){f=e.visualizationIndex;if(p.area!==_.area){var t={displayFormatHint:_.area};return S.updateVisualization(u,v,f,t)}return Promise.resolve()}).then(function(){return S.savePersonalization()}).then(function(){var e=m.getVisualizations()[f];if(e){m.focusVisualization(e);e.invalidate()}var t=this._getVizMoveMessage(g,v,p.area,_.area);l.show(t)}.bind(this)).finally(function(){S.enableImplicitSave(true)})},_getVizMoveMessage:function(e,t,i,n){if(e===t){if(i!==n){return o.i18n.getText("PageRuntime.Message.VisualizationConverted")}}if(i===n){return o.i18n.getText("PageRuntime.Message.VisualizationMoved")}return o.i18n.getText("PageRuntime.Message.VisualizationMovedAndConverted")},onDragEnter:function(e){var t=e.getParameter("dragSession").getDropControl();if(t.getDefault()){e.preventDefault()}},onAreaDragEnter:function(e){var t=e.getParameter("sourceArea");var i=e.getParameter("targetArea");if(t===i){return}var n=e.getParameter("dragControl");var o=n.getAvailableDisplayFormats();if(o.indexOf(i)===-1){if(i===y.Standard&&o.indexOf(y.StandardWide)>-1){return}if(i===y.Flat&&o.indexOf(y.FlatWide)>-1){return}e.getParameter("originalEvent").preventDefault()}},_handleUshellContainerDocked:function(e,t){this._oViewSettingsModel.setProperty("/ushellContainerDocked",t==="shellFloatingContainerIsDocked")},_isMyHomeRouteActive:function(){return r.last("/core/spaces/myHome/enabled")&&r.last("/core/spaces/myHome/userEnabled")&&r.last("/core/spaces/myHome/myHomeSpaceId")===this.sCurrentTargetSpaceId},_getMyHomePageData:function(){var e=this.getView().getModel().getProperty("/pages")||[];for(var t=0;t<e.length;t++){if(e[t]&&e[t].id==="SAP_BASIS_PG_UI_MYHOME"){return e[t]}}return null},_isMyHomePageEmpty:function(){var e=this._getMyHomePageData();if(e&&e.sections){return e.sections.every(function(e){var t=e.visualizations;return!(t&&t.length)})}return false},handleMyHomeActionMode:function(e){if(this._isMyHomeRouteActive()){if(e){return this._enterMyHomeActionMode()}else if(this._isMyHomePageEmpty()){return this._navigateToInitialMyHome()}}return Promise.resolve()},_enterMyHomeActionMode:function(){return Promise.all([this._navigate(this.sCurrentTargetPageId,this.sCurrentTargetSpaceId,true),f.isImportEnabled()]).then(function(e){if(!e[1]){if(this._pMessageStrip){this._pMessageStrip.then(function(e){e.setVisible(false)})}return Promise.resolve()}if(!this._pMessageStrip){this._pMessageStrip=new Promise(function(e,t){sap.ui.require(["sap/ui/core/Fragment"],function(i){i.load({name:"sap.ushell.components.pages.view.MessageStrip",controller:this}).then(function(t){d.on("importBookmarksFlag").do(function(e){t.setVisible(!!e)});t.addStyleClass("sapUiSmallMarginBottom");e(t)}).catch(t)}.bind(this),t)}.bind(this))}return this._pMessageStrip.then(function(e){this.oPagesNavContainer.getCurrentPage().getContent()[0].setMessageStrip(e)}.bind(this))}.bind(this))},openMyHomeImportDialog:function(){if(!this._pLoadImportDialog){this._pLoadImportDialog=new Promise(function(e,t){sap.ui.require(["sap/ushell/components/pages/controller/ImportDialog.controller"],function(t){e(new t)},t)})}return this._pLoadImportDialog.then(function(e){return e.open()})},onImportDialogPress:function(){this.openMyHomeImportDialog()},onMessageStripClose:function(){f.setImportEnabled(false);sap.ui.require(["sap/m/MessageBox"],function(e){e.information(o.i18n.getText("MyHome.InitialPage.MessageStrip.Popup"))})},_removeMyHomePage:function(){this.oPagesNavContainer.removePage("sapUshellMyHomePage")},_sectionEnableReset:function(e,t){if(e===r.last("/core/spaces/myHome/presetSectionId")){return false}return t},_sectionEnableDelete:function(e,t){if(e===r.last("/core/spaces/myHome/presetSectionId")){return false}return!t},hideRuntime:function(){_.debug("cep/editMode: navigate to empty page","Page runtime");this._hideActionModeButton();this.oPagesRuntimeNavContainer.to(this.oEmptyPage)},_formatPageTitle:function(e,t,i,n){if(i&&n){return t+" - "+e}else if(n){return t}return e}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/controller/PagesAndSpaceId", ["sap/ushell/resources","sap/ushell/Config"],function(e,n){"use strict";var t=function(){};t.prototype._getPageAndSpaceId=function(e){return sap.ushell.Container.getServiceAsync("URLParsing").then(function(n){if(e===undefined){e=window.hasher.getHash()}var t=n.parseShellHash(e)||{};var i={semanticObject:t.semanticObject||"",action:t.action||""};var a=t.params||{};var r=a.pageId||[];var s=a.spaceId||[];return this._parsePageAndSpaceId(r,s,i)}.bind(this))};t.prototype._parsePageAndSpaceId=function(n,t,i){return new Promise(function(a,r){this.getUserMyHomeEnablement().then(function(){if(n.length<1&&t.length<1){var s=i.semanticObject==="Shell"&&i.action==="home";var c=i.semanticObject===""&&i.action==="";if(s||c){this._getUserDefaultSpaceAndPage().then(function(e){a(e)}).catch(function(e){r(e)});return}r(e.i18n.getText("PageRuntime.NoPageIdAndSpaceIdProvided"))}if(n.length===1&&t.length===0){r(e.i18n.getText("PageRuntime.OnlyPageIdProvided"))}if(n.length===0&&t.length===1){r(e.i18n.getText("PageRuntime.OnlySpaceIdProvided"))}if(n.length>1||t.length>1){r(e.i18n.getText("PageRuntime.MultiplePageOrSpaceIdProvided"))}if(n[0]===""){r(e.i18n.getText("PageRuntime.InvalidPageId"))}if(t[0]===""){r(e.i18n.getText("PageRuntime.InvalidSpaceId"))}a({pageId:n[0],spaceId:t[0]})}.bind(this))}.bind(this))};t.prototype.getUserMyHomeEnablement=function(){return new Promise(function(e,t){var i=sap.ushell.Container.getUser().getShowMyHome();n.emit("/core/spaces/myHome/userEnabled",i);e(i)})};t.prototype._getUserDefaultSpaceAndPage=function(){return new Promise(function(n,t){Promise.all([sap.ushell.Container.getServiceAsync("Menu"),this.getUserMyHomeEnablement()]).then(function(i){var a=i[0];a.getDefaultSpace().then(function(i){if(!i){t(e.i18n.getText("PageRuntime.NoAssignedSpace"));return}var a=i&&i.children&&i.children[0];if(!a){t(e.i18n.getText("PageRuntime.NoAssignedPage"));return}n({spaceId:i.id,pageId:a.id})})}).catch(function(e){t(e)})}.bind(this))};return new t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/runtimeSwitcher/Component", ["sap/ui/core/UIComponent"],function(e){"use strict";return e.extend("sap.ushell.components.runtimeSwitcher.Component",{metadata:{manifest:"json",library:"sap.ushell"}})});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/runtimeSwitcher/controller/RuntimeSwitcher.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/pages/controller/PagesAndSpaceId"],function(e,t){"use strict";return e.extend("sap.ushell.components.runtimeSwitcher.controller.RuntimeSwitcher",{onInit:function(){this.oNavContainer=this.byId("switcherNavContainer");this.oPagesRuntime=this.byId("pagesRuntime");this.oWorkpageRuntime=this.byId("workpagesRuntime");return this._handleRouter().then(function(){var e=sap.ushell.Container.getRenderer();this.oContainerRouter=e.getRouter();this.oContainerRouter.getRoute("home").attachMatched(this._handleRouter,this);this.oContainerRouter.getRoute("openFLPPage").attachMatched(this._handleRouter,this)}.bind(this))},_handleRouter:function(){var e;return Promise.all([t._getPageAndSpaceId(),sap.ushell.Container.getServiceAsync("Menu")]).then(function(t){var o;e=t[0]&&t[0].pageId;if(!e){return Promise.reject("No pageId found")}o=t[1];return o.isWorkPage(e)}).then(function(e){if(e){this._toggleToWorkPagesRuntime()}else{this._toggleToPagesRuntime()}}.bind(this)).catch(function(){this._toggleToPagesRuntime()}.bind(this))},_toggleToPagesRuntime:function(){this.oNavContainer.to(this.oPagesRuntime);if(this.oWorkPageRuntimeComponent){this.oWorkPageRuntimeComponent.hideRuntime()}if(this.oPageRuntimeComponent){this.oPageRuntimeComponent.onRouteMatched()}},_toggleToWorkPagesRuntime:function(){this.oNavContainer.to(this.oWorkpageRuntime);if(this.oPageRuntimeComponent){this.oPageRuntimeComponent.hideRuntime()}if(this.oWorkPageRuntimeComponent){this.oWorkPageRuntimeComponent.onRouteMatched()}},onExit:function(){this.oContainerRouter.getRoute("home").detachRouteMatched(this._handleRouter,this);this.oContainerRouter.getRoute("openFLPPage").detachRouteMatched(this._handleRouter,this)},pageComponentCreated:function(e){this.oPageRuntimeComponent=e.getParameter("component")},workPageComponentCreated:function(e){this.oWorkPageRuntimeComponent=e.getParameter("component")}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/MenuBar/Component", ["sap/ui/core/UIComponent","sap/ui/core/ComponentContainer","sap/ui/core/mvc/XMLView","sap/ushell/Config"],function(e,n,i,t){"use strict";return e.extend("sap.ushell.components.shell.MenuBar.Component",{metadata:{manifest:"json",library:"sap.ushell",interfaces:["sap.ui.core.IAsyncContentCreation"]},init:function(){e.prototype.init.apply(this,arguments);this.oMenuModelPromise=sap.ushell.Container.getServiceAsync("Menu").then(function(e){return Promise.all([e.isMenuEnabled(),e.getMenuModel()])}).then(function(e){var i=e[0];var t=e[1];this.setModel(t,"menu");if(i){return this.oViewPromise.then(function(){var e=new n({id:"menuBarComponentContainer",component:this});sap.ushell.Container.getRenderer().setNavigationBar(e)}.bind(this))}}.bind(this))},createContent:function(){if(t.last("/core/menu/personalization/enabled")){this.oViewPromise=i.create({viewName:"sap.ushell.components.shell.MenuBar.view.MenuBarPersonalization"})}else{this.oViewPromise=i.create({viewName:"sap.ushell.components.shell.MenuBar.view.MenuBar"})}return this.oViewPromise}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/MenuBar/controller/MenuBar.controller", ["sap/ui/core/CustomData","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/m/IconTabFilter","sap/m/IconTabSeparator","sap/ushell/utils","sap/ushell/Config"],function(e,t,n,i,a,r,s,o,u,h,l){"use strict";return t.extend("sap.ushell.components.shell.MenuBar.controller.MenuBar",{onInit:function(){this.oContainerRouter=sap.ushell.Container.getRenderer().getRouter();this.oContainerRouter.getRoute("home").attachMatched(this._selectIndexAfterRouteChange,this);this.oContainerRouter.getRoute("openFLPPage").attachMatched(this._selectIndexAfterRouteChange,this);this.oContainerRouter.getRoute("openWorkPage").attachMatched(this._selectIndexAfterRouteChange,this);this.oEventHubListener=a.on("enableMenuBarNavigation").do(function(e){this.getView().getModel("viewConfiguration").setProperty("/enableMenuBarNavigation",e)}.bind(this));var e=new n({selectedKey:"None Existing Key",enableMenuBarNavigation:true,ariaTexts:{headerLabel:r.i18n.getText("SpacePageNavgiationRegion")}});this.getView().setModel(e,"viewConfiguration");this.oURLParsingService=sap.ushell.Container.getServiceAsync("URLParsing");this.oGetDefaultSpacePromise=sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.getDefaultSpace()});this._selectIndexAfterRouteChange();var t=this.byId("navigationBar");if(t){t.removeStyleClass("sapContrast")}},onMenuItemSelection:function(e){var t=e.getParameter("key");var n=this.getView().getModel("menu");var i=n.getProperty("/");var a=this._getNestedMenuEntryByUid(i,t);if(a.type==="IBN"){this._performCrossApplicationNavigation(a.target)}if(a.type==="URL"){this._openURL(a.target)}},_getNestedMenuEntry:function(e,t){return e.reduce(function(e,n){if(e){return e}if(t(n)){return n}if(n.menuEntries){return this._getNestedMenuEntry(n.menuEntries,t)}}.bind(this),undefined)},_getNestedMenuEntryByUid:function(e,t){function n(e){return e.uid===t}return this._getNestedMenuEntry(e,n)},_performCrossApplicationNavigation:function(e){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){var n={};e.parameters.forEach(function(e){if(e.name&&e.value){n[e.name]=[e.value]}});t.toExternal({target:{semanticObject:e.semanticObject,action:e.action},params:n})})},_openURL:function(e){s.openURL(e.url,"_blank")},_selectIndexAfterRouteChange:function(){var e=this.getView().getModel("viewConfiguration");return Promise.all([this.oURLParsingService,this.oGetDefaultSpacePromise,this.getOwnerComponent().oMenuModelPromise]).then(function(t){var n=t[0];var a=t[1];var r;var s=window.hasher.getHash();var o=n.parseShellHash(s);var u=this.getView().getModel("menu").getProperty("/");if(o.semanticObject==="Shell"&&o.action==="home"){if(l.last("/core/homeApp/enabled")){r=this._getHomeAppUID(u)||""}else{var h=a&&a.children&&a.children[0];r=h?this._getMenuUID(u,a.id,h.id)||"":""}e.setProperty("/selectedKey",r)}else{var c=i.get("params.spaceId.0",o);var d=i.get("params.pageId.0",o);var g=e.getProperty("/selectedKey");var p=this._getNestedMenuEntryByUid(u,g);if(this._hasSpaceIdAndPageId(p,c,d)){r=p.uid}else{r=this._getMenuUID(u,c,d)}if(r){e.setProperty("/selectedKey",r)}else{e.setProperty("/selectedKey","None Existing Key")}}}.bind(this))},_getMenuUID:function(e,t,n){function i(e){return this._hasSpaceIdAndPageId(e,t,n)}var a=this._getNestedMenuEntry(e,i.bind(this));return a&&a.uid},_getHomeAppUID:function(e){function t(e){return e.target.semanticObject==="Shell"&&e.target.action==="home"}var n=this._getNestedMenuEntry(e,t.bind(this));return n&&n.uid},_hasSpaceIdAndPageId:function(e,t,n){var a=i.get("target.parameters",e)||[];var r=a.find(function(e){return e.name==="spaceId"&&e.value===t});var s=a.find(function(e){return e.name==="pageId"&&e.value===n});return r!==undefined&&s!==undefined},_menuFactory:function(t,n){if(n.oModel.getProperty(n.sPath).type==="separator"){return new u}return new o(t,{key:"{menu>uid}",text:"{menu>title}",enabled:"{viewConfiguration>/enableMenuBarNavigation}",items:{path:"menu>menuEntries",factory:this._menuFactory.bind(this)}}).addCustomData(new e({key:"help-id",value:"{= 'MenuEntry-' + ${menu>help-id}}",writeToDom:"{= !!${menu>help-id}}"}))},onExit:function(){this.oEventHubListener.off()}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/NavigationBarMenu/Component", ["sap/ui/core/UIComponent"],function(n){"use strict";return n.extend("sap.ushell.components.shell.NavigationBarMenu.Component",{metadata:{manifest:"json",library:"sap.ushell"},init:function(){n.prototype.init.apply(this,arguments)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/NavigationBarMenu/controller/NavigationBarMenu.controller", ["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter","sap/ushell/utils/WindowUtils"],function(e,t,n,i,a,r){"use strict";return e.extend("sap.ushell.components.shell.NavigationBarMenu.controller.NavigationBarMenu",{onInit:function(){this.oResourceBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle();this.pMenuServicePromise=sap.ushell.Container.getServiceAsync("Menu")},_onPinnedSpacesUpdateFinished:function(e){this.byId("PinnedSpacesTreeTitle").setText(this.oResourceBundle.getText("NavigationBarMenu.PinnedSpaces.Title",[e.getParameter("total")||0]))},openNavigationBarMenuPopover:function(e){var n=e.getSource();if(!this._pPopoverPromise){this._pPopoverPromise=t.load({type:"XML",id:this.getView().getId(),controller:this,name:"sap.ushell.components.shell.NavigationBarMenu.view.NavigationBarMenuPopover"}).then(function(e){this.oModel=this.getOwnerComponent().oPropagatedProperties.oModels.menu;e.setModel(this.oModel,"spaces");this.getView().addDependent(e);return e}.bind(this))}this._pPopoverPromise.then(function(e){this._bindPinnedSpaces();e.openBy(n)}.bind(this))},closeNavigationBarMenuPopover:function(){this._pPopoverPromise.then(function(e){e.close()})},handlePinButtonPress:function(e){var t=e.getSource().getBindingContext("spaces").getPath();var n=this.oModel.getProperty(t+"/pinned");if(!n){this._pinSpace(t)}else{this._unpinSpace(t,true)}},unpinAllSpaces:function(){var e=this.byId("PinnedSpaces");var t=e.getItems();e.unbindItems();t.forEach(function(e){this._unpinSpace(e.getBindingContextPath("spaces"),false)}.bind(this));this._savePinnedSpaces();this._bindPinnedSpaces()},rearrangePinnedSpaces:function(e){var t=e.getParameter("draggedControl").getBindingContext("spaces");var n=this.oModel.getProperty(t.getPath()).pinnedSortOrder;var i=e.getParameter("droppedControl").getBindingContext("spaces");var a=this.oModel.getProperty(i.getPath()).pinnedSortOrder;var r=e.getParameter("dropPosition");var o=a+(r==="After"?1:0);this.pMenuServicePromise.then(function(e){e.moveMenuEntry(n,o);this._savePinnedSpaces()}.bind(this))},_bindPinnedSpaces:function(){var e=this.byId("PinnedSpaces");t.load({type:"XML",async:true,controller:this,name:"sap.ushell.components.shell.NavigationBarMenu.view.CustomTreeItem"}).then(function(t){e.bindItems({path:"spaces>/",filters:[new n({path:"pinned",operator:i.EQ,value1:true}),new n({path:"type",operator:i.NE,value1:"separator"}),new n({path:"isHomeEntry",operator:i.EQ,value1:false})],sorter:[new a({path:"pinnedSortOrder",descending:false})],parameters:{arrayNames:["menuEntries"]},template:t,templateShareable:false})})},allSpacesFactory:function(e,t){var n=t.getModel().getProperty(t.sPath);var i=this.byId("AllSpaces").getDependents()[0].clone(e);var a=t.getModel().getProperty(t.sPath).menuEntries||[];i.setType("Active");i.attachPress(this.onMenuItemSelection,this);if(a.length<1){i.addStyleClass("sapMTreeItemBaseLeaf")}if(n.type==="separator"||n.isHomeEntry){i.setVisible(false)}return i},_unpinSpace:function(e,t){var n=this.byId("NavigationBarMenuPopover");n.focus();this.oModel.setProperty(e+"/pinned",false);this.oModel.setProperty(e+"/pinnedSortOrder","-1");if(t){this._savePinnedSpaces()}},_pinSpace:function(e){var t=this.byId("PinnedSpaces").getItems().length;var n=2;if(t>0){var i=this.byId("PinnedSpaces").getItems()[t-1];var a=i.getBindingContextPath("spaces");n=this.oModel.getProperty(a+"/pinnedSortOrder")+1}this.oModel.setProperty(e+"/pinnedSortOrder",n);this.oModel.setProperty(e+"/pinned",true);this._savePinnedSpaces()},_performCrossApplicationNavigation:function(e){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){var n={};e.parameters.forEach(function(e){if(e.name&&e.value){n[e.name]=[e.value]}});return t.toExternal({target:{semanticObject:e.semanticObject,action:e.action},params:n})})},_openURL:function(e){r.openURL(e.url,"_blank")},onMenuItemSelection:function(e){var t=e.getSource().getParent();var n=e.getSource();var i=n.getBindingContextPath("spaces");var a=this.oModel.getProperty(i);var r=e.getParameter("id").includes("AllSpaces");if(!r){return}if(!n.isLeaf()){if(n.getExpanded()){t.collapse(t.indexOfItem(n))}else{t.expand(t.indexOfItem(n))}}else{if(a.type==="IBN"){this._performCrossApplicationNavigation(a.target).then(this.closeNavigationBarMenuPopover.bind(this))}if(a.type==="URL"){this._openURL(a.target);this.closeNavigationBarMenuPopover()}return}this._savePinnedSpaces()},_savePinnedSpaces:function(){this.pMenuServicePromise.then(function(e){this.oModel.refresh(true);return e.savePersonalization()}.bind(this))}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Notifications/Component", ["sap/base/Log","sap/ui/Device","sap/m/library","sap/m/Popover","sap/ui/core/IconPool","sap/ui/core/InvisibleText","sap/ui/core/UIComponent","sap/ushell/EventHub","sap/ushell/library","sap/ushell/resources","sap/ushell/utils","sap/ushell/ui/shell/ShellHeadItem"],function(t,i,e,o,n,s,a,r,l,c,h,u){"use strict";var f=e.PlacementType;var d=l.FloatingNumberType;function p(){return sap.ui.getCore().byId("NotificationsCountButton")}return a.extend("sap.ushell.components.shell.Notifications.Component",{metadata:{version:"1.115.1",library:"sap.ushell.components.shell.Notifications",dependencies:{libs:["sap.m"]}},createContent:function(){this._aTimeouts=[];this.oRenderer=sap.ushell.Container.getRenderer("fiori2");this.oShellModel=this.oRenderer.shellCtrl.getModel();sap.ushell.Container.getServiceAsync("Notifications").then(function(t){this.oNotificationsService=t;if(this.oNotificationsService.isEnabled()===true){sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.Notifications","onNewNotifications",this._handleAlerts,this);this.oShellModel.setProperty("/enableNotifications",true);this.oNotificationsService.init();if(this.oRenderer.getShellConfig().enableNotificationsUI===true){this.oShellModel.setProperty("/enableNotificationsUI",true);this.oNotificationsService.registerDependencyNotificationsUpdateCallback(this._updateCount.bind(this),true)}this._createNotificationButton(this.oShellModel);this.oRenderer.oShellModel.addHeaderEndItem(["NotificationsCountButton"],false,["home","app","minimal"],true);r.on("showNotifications").do(this._toggleNotifications.bind(this))}}.bind(this))},_createNotificationButton:function(t){var e="NotificationsCountButton";var o=new u({id:e,tooltip:c.i18n.getText("notificationsBtn_title"),icon:n.getIconURI("bell"),text:c.i18n.getText("notificationsBtn_title"),ariaLabel:c.i18n.getText("notificationsBtn_title"),ariaHaspopup:"dialog",enabled:true,selected:false,visible:"{/enableNotifications}",floatingNumber:"{/notificationsCount}",floatingNumberMaxValue:i.system.phone?99:999,floatingNumberType:d.Notifications,press:function(){r.emit("showNotifications",Date.now())}});o.setModel(t);o.setModel(c.i18nModel,"i18n")},_handleAlerts:function(t,i,e){(e||[]).forEach(this.handleNotification.bind(this))},handleNotification:function(t){var i=this.oRenderer.addRightFloatingContainerItem({press:function(){if(this.oPopover){this.oPopover.close()}if(window.hasher.getHash()!==t.NavigationTargetObject+"-"+t.NavigationTargetAction){if(t.NavigationTargetObject&&t.NavigationTargetAction){h.toExternalWithParameters(t.NavigationTargetObject,t.NavigationTargetAction,t.NavigationTargetParams)}}this.oNotificationsService.markRead(t.Id)}.bind(this),close:function(){this.oRenderer.removeRightFloatingContainerItem(i.getId(),true)}.bind(this),datetime:c.i18n.getText("notification_arrival_time_now"),title:t.SensitiveText?t.SensitiveText:t.Text,description:t.SubTitle,unread:t.IsRead,priority:"High",hideShowMoreButton:true},true,true);this.oRenderer.showRightFloatingContainer(true);var e=setTimeout(function(){this.oRenderer.removeRightFloatingContainerItem(i.getId(),true)}.bind(this),5200);this._aTimeouts.push(e)},_updateCount:function(){this.oNotificationsService.getUnseenNotificationsCount().done(function(t){this.oShellModel.setProperty("/notificationsCount",parseInt(t,10))}.bind(this)).fail(function(i){t.error("Notifications - call to notificationsService.getCount failed: ",i)})},_getPopover:function(){if(!this._oNotificationsPopoverPromise){this._oNotificationsPopoverPromise=new Promise(function(t,i){sap.ui.require(["sap/ui/core/mvc/XMLView"],function(e){e.create({id:"notificationsView",viewName:"sap.ushell.components.shell.Notifications.Notifications",viewData:{notificationsService:this.oNotificationsService}}).then(function(i){var e=i.byId("notificationIconTabBar");e.setAriaTexts({headerLabel:c.i18n.getText("Notifications.Popover.IconTabBar.Header.AriaLabel")});var n=i.byId("sapUshellNotificationsListDate");n.enhanceAccessibilityState=function(t,i){i.hidden=true;return i};var a=i.byId("sapUshellNotificationsListPriority");a.enhanceAccessibilityState=function(t,i){i.hidden=true;return i};var r=i.byId("sapUshellNotificationsListType");r.enhanceAccessibilityState=function(t,i){i.hidden=true;return i};var l=new o("shellNotificationsPopover",{showHeader:false,placement:f.Bottom,showArrow:true,content:i,beforeClose:function(t){t.getSource().getContent()[0].invalidate();this._resetCount()}.bind(this)});l._oAriaLabelledByText=new s(l.getId()+"-labelledBy",{text:c.i18n.getText("NotificationToggleButton.NoNewNotifications")}).toStatic();l.addDependent(l._oAriaLabelledByText);l.addAriaLabelledBy(l._oAriaLabelledByText);l.addStyleClass("sapUshellNotificationsPopup");l.addStyleClass("sapContrastPlus");t(l)}.bind(this)).catch(i)}.bind(this))}.bind(this))}return this._oNotificationsPopoverPromise},_toggleNotifications:function(t){this._getPopover().then(function(i){var e=p();if(!e.$().width()){e=sap.ui.getCore().byId("endItemsOverflowBtn")}if(i.isOpen()){i.close()}else if(t!==false){this._resetCount();i.openBy(e)}}.bind(this))},_resetCount:function(){this.oShellModel.setProperty("/notificationsCount",0);this.oNotificationsService.notificationsSeen()},exit:function(){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.services.Notifications","onNewNotifications",this._handleAlerts,this);if(this.oNotificationsService&&this.oNotificationsService.isEnabled()===true){this.oNotificationsService.destroy()}this.oNotificationsService=null;var t=p();if(t){this.oRenderer.hideHeaderEndItem(t,false);t.destroy()}this.oRenderer=null;var i=sap.ui.getCore().byId("notificationsView");if(i){i.destroy();i=null}this._aTimeouts.forEach(window.clearTimeout)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Notifications/Notifications.controller", ["sap/ui/core/Core","sap/ui/Device","sap/ushell/utils","sap/ushell/resources","sap/m/Text","sap/m/VBox","sap/m/CustomListItem","sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","sap/base/Log","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/library","sap/ui/core/library","sap/ui/core/mvc/Controller"],function(t,e,i,o,n,s,r,jQuery,a,c,f,d,l,g,h){"use strict";var u=g.Priority;var I=l.ListType;var N=l.FlexAlignItems;function p(t){sap.ushell.Container.getServiceAsync("Message").then(function(e){e.error(t)})}h.extend("sap.ushell.components.shell.Notifications.Notifications",{oPagingConfiguration:{MAX_NOTIFICATION_ITEMS_DESKTOP:400,MAX_NOTIFICATION_ITEMS_MOBILE:100,MIN_NOTIFICATION_ITEMS_PER_BUFFER:15,NOTIFICATION_ITEM_HEIGHT:e.system.phone||e.system.tablet?130:100,TAB_BAR_HEIGHT:100},onInit:function(){var t={};if(e.system.desktop){this.iMaxNotificationItemsForDevice=this.oPagingConfiguration.MAX_NOTIFICATION_ITEMS_DESKTOP}else{this.iMaxNotificationItemsForDevice=this.oPagingConfiguration.MAX_NOTIFICATION_ITEMS_MOBILE}this.oNotificationsService=this.getView().getViewData().notificationsService;this.oSortingType=this.oNotificationsService.getOperationEnum();t[this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING]=this.getInitialSortingModelStructure();t[this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING]=this.getInitialSortingModelStructure();t[this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING]=this.getInitialSortingModelStructure();t[this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING]={};this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;this.oPreviousTabKey="sapUshellNotificationIconTabByDate";this.sCurrentExpandedType=undefined;var i=new f(t);i.setSizeLimit(1500);this.getView().setModel(i);this.getView().setModel(o.i18nModel,"i18n");this.getNextBuffer();this._oTopNotificationData=undefined},onAfterRendering:function(){this.removeTabIndexFromList(this.sCurrentSorting);var t=this.getView().byId("notificationIconTabBar--header");if(t){t.getDomRef().classList.remove("sapContrastPlus")}if(this.sCurrentSorting!==this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){if(this._oTopNotificationData){this.scrollToItem(this._oTopNotificationData)}}this.getView().$("-sapUshellNotificationIconTabByDate-text").attr("aria-label",o.i18n.getText("Notifications.ByDateDescending.AriaLabel"));this.getView().$("-sapUshellNotificationIconTabByType-text").attr("aria-label",o.i18n.getText("Notifications.ByType.AriaLabel"));this.getView().$("-sapUshellNotificationIconTabByPrio-text").attr("aria-label",o.i18n.getText("Notifications.ByPriority.AriaLabel"))},shouldFetchMoreNotifications:function(){var t=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/hasMoreItemsInBackend"),e=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/listMaxReached");return t&&!e},getNextBuffer:function(){var t=this.sCurrentSorting,e=this.getItemsFromModel(t),i,o,n;if(!this.shouldFetchMoreNotifications()){return}n=this.getNumberOfItemsToFetchOnScroll(t);if(n===0){this.getView().getModel().setProperty("/"+t+"/hasMoreItems",false);return}if(e!==undefined){i=e.length}if(i===0){this.addBusyIndicatorToTabFilter(t)}this.getView().getModel().setProperty("/"+t+"/inUpdate",true);o=this.oNotificationsService.getNotificationsBufferBySortingType(t,i,n);o.done(function(e){var i=this.oNotificationsService._getNotificationSettingsAvailability();if(i.state()==="pending"){this.oNotificationsService._userSettingInitialization()}this.addBufferToModel(t,e)}.bind(this));o.fail(function(){if(i===0){this.removeBusyIndicatorToTabFilter(t);this.handleError()}}.bind(this))},getNextBufferForType:function(){var t=this.sCurrentExpandedType,e=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,i=this.getGroupFromModel(t),o=i?i.aNotifications:undefined,n=0,s,r=i?i.hasMoreItems:true;if(!r){return}if(o!==undefined){n=o.length}this.getView().getModel().setProperty("/"+e+"/inUpdate",true);s=this.oNotificationsService.getNotificationsBufferInGroup(t,n,this.iMaxNotificationItemsForDevice);s.done(function(e){this.addTypeBufferToModel(t,e,false)}.bind(this));s.fail(function(){this.getNextBufferFailHandler(e)}.bind(this))},addBufferToModel:function(t,e){var i=this.getItemsFromModel(t),o=i.length,n,s=e.length>=this.getNumberOfItemsToFetchOnScroll(t);this._oTopNotificationData=undefined;if(!e){this.getView().getModel().setProperty("/"+t+"/hasMoreItemsInBackend",false);return}this.getView().getModel().setProperty("/"+t+"/hasMoreItemsInBackend",s);n=i.concat(e);this.getView().getModel().setProperty("/"+t+"/aNotifications",n);this.getView().getModel().setProperty("/"+t+"/inUpdate",false);if(n.length>=this.iMaxNotificationItemsForDevice){this.handleMaxReached(t)}if(o===0){this.removeBusyIndicatorToTabFilter(t)}},addTypeBufferToModel:function(t,e,i){var o=this.getGroupFromModel(t),n=this.getGroupIndexFromModel(t),s=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING),r;if(!e){return}if(e.length<this.getBasicBufferSize()){o.hasMoreItems=false}if(!o.aNotifications||i){o.aNotifications=[]}r=o.aNotifications.concat(e);s[n].aNotifications=r;s[n].Busy=false;this.getView().getModel().setProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,s);this.getView().getModel().setProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING+"/inUpdate",false)},keydownHandler:function(e){var i,o,n;if(e.keyCode===a.DELETE){i=jQuery(document.activeElement);if(i.hasClass("sapUshellNotificationsListItem")){o=i.next();n=i.find(".sapMNLB-CloseButton")[0];t.byId(n.id).firePress();if(o){o.focus()}}}},notificationsUpdateCallback:function(t){var e=this,i=this.sCurrentSorting,o,n,s;if(i===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){this.notificationsUpdateCallbackForType();t.resolve();return}o=this.getItemsFromModel(i);if(o!==undefined){n=o.length}this.cleanModel();s=this.getNumberOfItemsToFetchOnUpdate(n);this.oNotificationsService.getNotificationsBufferBySortingType(i,0,s).done(function(o){if(!o){return}t.resolve();e.replaceItemsInModel(i,o,s)}).fail(function(t){c.error("Notifications control - call to notificationsService.getNotificationsBufferBySortingType failed: ",t,"sap.ushell.components.shell.Notifications.Notifications")})},isMoreCircleExist:function(t){var e=this.getNotificationList(t),i=e.getItems().length,o=e.getItems()[i-1];return!!i&&o.getMetadata().getName()==="sap.m.CustomListItem"},handleMaxReached:function(t){var e=this.getNotificationList(t),i=Math.floor(this.oNotificationsService.getNotificationsCount()),o=i-this.iMaxNotificationItemsForDevice,n=this.isMoreCircleExist(t);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/moreNotificationCount",o);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/listMaxReached",o>=0);if(o>0&&!n){e.addItem(this.getMoreCircle(this.sCurrentSorting))}else if(o<=0&&n){e.removeItem(this.oMoreListItem)}},reAddFailedGroup:function(t){var e=this.getView().getModel(),i=e.getProperty("/notificationsByTypeDescending");i.splice(t.removedGroupIndex,0,t.oGroup);e.setProperty("/notificationsByTypeDescending",i)},removeGroupFromModel:function(t){var e=this.getView().getModel(),i=e.getProperty("/notificationsByTypeDescending"),o={oGroup:t,removedGroupIndex:undefined};i.some(function(n,s){if(n.Id===t.Id){o.removedGroupIndex=s;i.splice(s,1);e.setProperty("/notificationsByTypeDescending",i);return true}return false});this.sCurrentExpandedType=undefined;return o},updateGroupHeaders:function(){var t=this.oNotificationsService.getNotificationsGroupHeaders(),e=this,i=e.getView().getModel().getProperty("/"+e.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);t.fail(function(t){c.error("Notifications control - call to notificationsService.updateGroupHeaders failed: ",t,"sap.ushell.components.shell.Notifications.Notifications")});t.done(function(t){var o=JSON.parse(t),n=o.value;n.forEach(function(t){var e=false;i.forEach(function(o,n){if(o.Id===t.Id){i[n].GroupHeaderText=t.GroupHeaderText;i[n].CreatedAt=t.CreatedAt;e=true}});if(!e){i.unshift(t)}});e.getView().getModel().setProperty("/"+e.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,i)})},updateNotificationsByDate:function(){var t=this.getNumberOfItemsToFetchOnScroll(this.sCurrentSorting);var e=this.getView().getModel().getProperty("/"+this.sCurrentSorting);this.oNotificationsService.getNotificationsBufferBySortingType(this.sCurrentSorting,0,t).done(function(t){t.forEach(function(t){for(var i=0;i<e.length;i++){if(e[i].Id===t.Id){e.unshift(t);break}}});this.getView().getModel().setProperty("/"+this.sCurrentSorting,e);this.removeBusyIndicatorToTabFilter(this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING)}.bind(this)).fail(function(t){c.error("Notifications control - call to notificationsService.getNotificationsBufferBySortingType failed: ",t,"sap.ushell.components.shell.Notifications.Notifications");this.removeBusyIndicatorToTabFilter(this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING)}.bind(this))},reloadGroupHeaders:function(){var t=this.oNotificationsService.getNotificationsGroupHeaders(),e=this;t.fail(function(t){c.error("Notifications control - call to notificationsService.getNotificationsGroupHeaders failed: ",t,"sap.ushell.components.shell.Notifications.Notifications");e.removeBusyIndicatorToTabFilter(e.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING)});t.done(function(t){var i=JSON.parse(t),o=i.value,n=[];o.forEach(function(t){if(t.IsGroupHeader){t.Collapsed=true;n.push(t)}});e.getView().getModel().setProperty("/"+e.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,n);e.removeBusyIndicatorToTabFilter(e.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING)})},markRead:function(t){var e=this.oNotificationsService.markRead(t),i=this;e.fail(function(){p(o.i18n.getText("notificationsFailedMarkRead"));i.setMarkReadOnModel(t,false)});this.setMarkReadOnModel(t,true)},onExit:function(){},onBeforeRendering:function(){if(!this._bDependencyCallbackRegistered){this._bDependencyCallbackRegistered=true;this.oNotificationsService.registerDependencyNotificationsUpdateCallback(this.notificationsUpdateCallback.bind(this),false)}},executeAction:function(t,e){return this.oNotificationsService.executeAction(t,e)},executeBulkAction:function(t,e,i,n){var s=i,r=this.oNotificationsService.executeBulkAction(i.Id,t),a,c=e,f=this.getView().getModel().getProperty(n+"/NotificationTypeDesc"),l=this;if(f===""){f=this.getView().getModel().getProperty(n+"/NotificationTypeKey")}r.fail(function(t){this.getView().getModel().setProperty(n+"/Busy",false);if(t&&t.succededNotifications&&t.succededNotifications.length){t.succededNotifications.forEach(function(t){this.removeNotificationFromModel(t)}.bind(this));l.cleanModel()}if(t.succededNotifications.length===1){a=o.i18n.getText("notificationsPartialSuccessExecuteBulkAction",[c,t.succededNotifications.length,t.failedNotifications.length+t.succededNotifications.length,f,t.failedNotifications.length]);d.show(a,{duration:4e3})}else if(t.succededNotifications.length>1){a=o.i18n.getText("notificationsSingleSuccessExecuteBulkAction",[c,t.succededNotifications.length,t.failedNotifications.length+t.succededNotifications.length,f,t.failedNotifications.length]);d.show(a,{duration:4e3})}else{a=o.i18n.getText("notificationsFailedExecuteBulkAction");p(a)}}.bind(this));r.done(function(){a=o.i18n.getText("notificationsSuccessExecuteBulkAction",[c,f]);d.show(a,{duration:4e3});this.removeGroupFromModel(s);this.cleanModel()}.bind(this))},dismissNotification:function(t){var e=this,i=this.removeNotificationFromModel(t),n=this.oNotificationsService.dismissNotification(t);this.cleanModel();n.fail(function(){p(o.i18n.getText("notificationsFailedDismiss"));e.addNotificationToModel(i.obj,i.index)})},dismissBulkNotifications:function(t){var e=this.removeGroupFromModel(t),i=this.oNotificationsService.dismissBulkNotifications(t.Id);this.cleanModel();i.fail(function(){p(o.i18n.getText("notificationsFailedExecuteBulkAction"));this.reAddFailedGroup(e)}.bind(this))},onListItemPress:function(e,o,n,s){if(o&&n){var r=t.byId("viewPortContainer");if(r){r.switchState("Center")}i.toExternalWithParameters(o,n,s)}this.markRead(e)},scrollToItem:function(t){var e=this._getJqNotificationObjects(),i=e[0],o=e[1],n=e[2],s=e[3],r,a,c,f,d;if(i.length>0&&o.length>0&&n.length>0&&s.length>0){r=s.outerHeight(true)-window.parseInt(s.css("margin-top").replace("px",""));a=this.getIndexInModelByItemId(t.topItemId);a=a||0;c=a*r+window.parseInt(s.css("margin-top").replace("px",""));f=window.parseInt(o.css("padding-top").replace("px",""))+window.parseInt(n.css("padding-top").replace("px",""));d=i.offset().top;i.scrollTop(c+f+d-t.offSetTop)}this._oTopNotificationData=undefined},_getJqNotificationObjects:function(){var t=jQuery("#notificationIconTabBar-containerContent"),e=t.children(),i=e.children(),o=t.find("li").eq(0);return[t,e,i,o]},getTopOffSet:function(){var t=0,e=this._getJqNotificationObjects()[0];if(e.children().length>0&&e.children().children().length>0){t+=e.children().outerHeight()-e.children().height();t+=e.children().children().outerHeight()-e.children().children().height()}return t},getTopItemOnTheScreen:function(){var t=this._getJqNotificationObjects()[0],e=0,i,o=0,n=this;e=this.getTopOffSet();t.find("li").each(function(){o=jQuery(this).offset().top;if(o>=e){i=n.getItemNotificationId(this);return false}});return{topItemId:i,offSetTop:o}},handleError:function(){p(o.i18n.getText("errorOccurredMsg"))},addBusyIndicatorToTabFilter:function(t){var e=this.getNotificationList(t);e.setBusy(true);e.setShowNoData(false)},removeBusyIndicatorToTabFilter:function(t){var e=this.getNotificationList(t);e.setBusy(false);e.setShowNoData(true)},addNotificationToModel:function(t,e){var i=this.getView().getModel(),o=i.getProperty("/"+this.sCurrentSorting+"/aNotifications");o.splice(e,0,t);i.setProperty("/"+this.sCurrentSorting+"/aNotifications",o)},removeNotificationFromModel:function(t){var e=this.getView().getModel(),i,o,n,s={};if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING||this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING||this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){n="/"+this.sCurrentSorting+"/aNotifications";o=e.getProperty(n);o.some(function(e,i,o){if(e.Id&&e.Id===t){s.obj=o.splice(i,1)[0];s.index=i;return true}return false});e.setProperty(n,o);return s}i=e.getProperty("/notificationsByTypeDescending");for(var r=0;r<i.length;r++){o=i[r].aNotifications;if(o){if(o.length===1&&o[0].Id===t){i.splice(r,1)}else{o.some(function(e,i,o){if(e.Id&&e.Id===t){s.obj=o.splice(i,1)[0];s.index=i;return true}return false});i[r].aNotifications=o}}}this.updateGroupHeaders();e.setProperty("/notificationsByTypeDescending",i);return s},getIndexInModelByItemId:function(t){var e,i;if(this.notificationsByTypeDescending===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){e=this.getView().getModel().getProperty("/"+this.sCurrentExpandedType+"/aNotifications")}else{e=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/aNotifications")}if(e===undefined||e.length===0){return 0}for(i=0;i<e.length;i++){if(e[i].Id===t){return i}}},cleanModel:function(){var t=this,e=this.getView().getModel().getProperty("/");Object.keys(e).forEach(function(i){if(i!==t.sCurrentSorting&&i!==t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){e[i]=t.getInitialSortingModelStructure()}});this.getView().getModel().setProperty("/",e)},replaceItemsInModel:function(t,e,i){var o=this.getItemsFromModel(t),n=o.length,s=e.length>=i;if(n){this._oTopNotificationData=this.getTopItemOnTheScreen()}this.getView().getModel().setProperty("/"+t+"/hasMoreItemsInBackend",s);this.getView().getModel().setProperty("/"+t+"/aNotifications",e);this.getView().getModel().setProperty("/"+t+"/inUpdate",false);this.handleMaxReached(t)},setMarkReadOnModel:function(t,e){var i=this.getView().getModel(),o="/"+this.sCurrentSorting,n,s,r,a;s=i.getProperty(o);if(this.sCurrentSorting==="notificationsByTypeDescending"){for(a=0;a<s.length;a++){if(s[a].Id===this.sCurrentExpandedType){o=o+"/"+a;r=true;break}}if(!r){return}}o=o+"/aNotifications";n=i.getProperty(o);n.some(function(i){if(i.Id===t){i.IsRead=e;return true}return false});i.setProperty(o,n)},onTabSelected:function(t){var e=t.getParameter("key");if(e==="sapUshellNotificationIconTabByDate"){this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;this.updateNotificationsByDate()}else if(e==="sapUshellNotificationIconTabByType"&&this.oPreviousTabKey!=="sapUshellNotificationIconTabByType"){this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING;this.addBusyIndicatorToTabFilter(this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);this.reloadGroupHeaders();this.getView().byId("notificationIconTabBar").addStyleClass("sapUshellNotificationIconTabByTypeWithBusyIndicator")}else{this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING;if(this.getItemsFromModel(this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING).length===0){this.getNextBuffer(this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING)}}this.oPreviousTabKey=e},_changeDateListBinding:function(t,e){var i=new Promise(function(t,e){sap.ui.require(["sap/ui/core/Fragment"],function(i){i.load({name:"sap.ushell.components.shell.Notifications.NotificationsListItem",type:"XML",controller:this}).then(t).catch(e)}.bind(this),e)}.bind(this));if(t===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING){e.$("text").attr("aria-label",o.i18n.getText("Notifications.ByDateDescending.AriaLabel"));i.then(function(t){this.getView().byId("sapUshellNotificationsListDate").bindItems("/notificationsByDateDescending/aNotifications",t)}.bind(this))}else{e.$("text").attr("aria-label",o.i18n.getText("Notifications.ByDateAscending.AriaLabel"));i.then(function(t){this.getView().byId("sapUshellNotificationsListDate").bindItems("/notificationsByDateAscending/aNotifications",t)}.bind(this))}},onNotificationItemPress:function(t){var e=t.getSource().getBindingContextPath(),i=this.getView().getModel().getProperty(e),o=i.NavigationTargetObject,n=i.NavigationTargetAction,s=i.NavigationTargetParams,r=i.Id;this.onListItemPress(r,o,n,s)},onNotificationItemClose:function(t){this._retainFocus();var e=t.getSource().getBindingContextPath(),i=this.getView().getModel().getProperty(e),o=i.Id;this.dismissNotification(o)},onNotificationItemButtonPress:function(t){this._retainFocus();var e=t.getSource().getBindingContext().getPath(),i=this.getView().getModel(),n=i.getProperty(e),s=e.split("/"),r=this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,a=r?"/"+s[1]+"/"+s[2]+"/"+s[3]+"/"+s[4]:"/"+s[1]+"/"+s[2]+"/"+s[3],c=i.getProperty(a),f=c.Id;i.setProperty(a+"/Busy",true);this.executeAction(f,n.ActionId).done(function(t){if(t&&t.isSucessfull){sap.ui.require(["sap/m/MessageToast"],function(e){if(t.message&&t.message.length){e.show(t.message,{duration:4e3})}else{var i=n.ActionText;e.show(o.i18n.getText("ActionAppliedToNotification",i),{duration:4e3})}});if(t.DeleteOnReturn!==false){this.removeNotificationFromModel(f);this.oNotificationsService._addDismissNotifications(f);this.cleanModel()}}else if(t){p(t.message)}else{p(o.i18n.getText("notificationsFailedExecuteAction"))}i.setProperty(a+"/Busy",false)}.bind(this)).fail(function(){i.setProperty(a+"/Busy",false);p(o.i18n.getText("notificationsFailedExecuteAction"))})},onNotificationGroupItemClose:function(t){var e=t.getSource().getBindingContext().getPath(),i=e.split("/"),o="/"+i[1]+"/"+i[2],n=this.getView().getModel().getProperty(o);this.dismissBulkNotifications(n)},onNotificationGroupItemCollapse:function(t){var e=t.getSource(),i=e.getBindingContext().getPath();if(!e.getCollapsed()){this.getView().getModel().setProperty(i+"/Busy",true);this.expandedGroupIndex=i.substring(i.lastIndexOf("/")+1);this.onExpandGroup(e)}},onNotificationGroupItemButtonPress:function(t){var e=this.getView().getModel(),i=t.getSource().getBindingContext().getPath(),o=e.getProperty(i),n=i.split("/"),s="/"+n[1]+"/"+n[2],r=e.getProperty(s);this._retainFocus();e.setProperty(s+"/Busy",true);this.executeBulkAction(o.ActionId,t.getSource().getProperty("text"),r,s)},onListUpdateStarted:function(t){if(t.getParameter("reason")==="Growing"){if(!this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/inUpdate")){this.getNextBuffer()}}},getNumberOfItemsInScreen:function(){var t,e=this.getWindowSize();t=(e-this.oPagingConfiguration.TAB_BAR_HEIGHT)/this.oPagingConfiguration.NOTIFICATION_ITEM_HEIGHT;return Math.ceil(t)},getBasicBufferSize:function(){return Math.max(this.getNumberOfItemsInScreen()*3,this.oPagingConfiguration.MIN_NOTIFICATION_ITEMS_PER_BUFFER)},getWindowSize:function(){return jQuery(window).height()},getNumberOfItemsToFetchOnScroll:function(t){var e=this.getItemsFromModel(t).length,i=this.getBasicBufferSize();if(e>=this.iMaxNotificationItemsForDevice){return 0}if(e+i>this.iMaxNotificationItemsForDevice){return this.iMaxNotificationItemsForDevice-e}return i},getNumberOfItemsToFetchOnUpdate:function(t){var e=this.getBasicBufferSize(),i=Math.ceil(t/e),o;o=i>0?i*e:e;return o>this.iMaxNotificationItemsForDevice?this.iMaxNotificationItemsForDevice:o},getItemsFromModel:function(t){if(t===undefined){t=this.sCurrentSorting}return this.getView().getModel().getProperty("/"+t+"/aNotifications")},getItemsOfTypeFromModel:function(t){var e=this.getGroupFromModel(t);if(e){return e.aNotifications?e.aNotifications:[]}return[]},getGroupFromModel:function(t){var e=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);return e.find(function(e){return e.Id===t})},getGroupIndexFromModel:function(t){var e=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING),i;e.forEach(function(e,o){if(e.Id===t){i=o;return true}});return i},getItemNotificationId:function(e){var i,o;i=t.byId(e.getAttribute("Id")).getBindingContext().sPath;o=this.getView().getModel().getProperty(i+"/Id");return o},getInitialSortingModelStructure:function(){return{hasMoreItemsInBackend:true,listMaxReached:false,aNotifications:[],inUpdate:false,moreNotificationCount:""}},onExpandGroup:function(t){var e=this.getView().byId("sapUshellNotificationsListType").getItems(),i=t.getId(),o=this.getView().getModel().getProperty(t.getBindingContextPath()),n=this;n.sCurrentExpandedType=o.Id;n.getView().getModel().setProperty(t.getBindingContextPath()+"/aNotifications",[]);n.getView().getModel().setProperty(t.getBindingContextPath()+"/hasMoreItems",true);e.forEach(function(t,e){if(t.getId()===i){n.getNextBufferForType()}else if(t.getId()!==i&&!t.getCollapsed()){t.setCollapsed(true);n.getView().getModel().setProperty(t.getBindingContextPath()+"/hasMoreItems",true)}})},notificationsUpdateCallbackForType:function(){var t=this.sCurrentExpandedType,e=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,i=this.getGroupFromModel(t),o=i?i.aNotifications:undefined,n=0,s;if(o!==undefined){n=o.length}this.getView().getModel().setProperty("/"+e+"/inUpdate",true);this.updateGroupHeaders();if(t){s=this.oNotificationsService.getNotificationsBufferInGroup(t,0,this.getNumberOfItemsToFetchOnUpdate(n));s.done(function(e){this.addTypeBufferToModel(t,e,true)}.bind(this));s.fail(function(t){this.getNextBufferFailHandler(t)}.bind(this))}},getNotificationList:function(t){var e;if(t===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING||t===this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING){e=this.getView().byId("sapUshellNotificationsListDate")}else if(t===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){e=this.getView().byId("sapUshellNotificationsListPriority")}else{e=this.getView().byId("sapUshellNotificationsListType")}return e},removeTabIndexFromList:function(t){var e=this.getNotificationList(t);var i=e.$().children().get(1);if(i){i.removeAttribute("tabindex")}},getMoreCircle:function(t){var e=new n({text:o.i18n.getText("moreNotifications")}),i=new n({text:""}).addStyleClass("sapUshellNotificationsMoreCircleCount"),a=new s({items:[i,e],alignItems:N.Center}).addStyleClass("sapUshellNotificationsMoreCircle"),c=new n({text:o.i18n.getText("moreNotificationsAvailable_message"),textAlign:"Center"}).addStyleClass("sapUshellNotificationsMoreHelpingText"),f=new n({text:o.i18n.getText("processNotifications_message"),textAlign:"Center"}).addStyleClass("sapUshellNotificationsMoreHelpingText"),d=new s({items:[a,c,f]}).addStyleClass("sapUshellNotificationsMoreVBox"),l=new r({type:I.Inactive,content:d}).addStyleClass("sapUshellNotificationsMoreListItem");i.setModel(this.getView().getModel());i.bindText("/"+t+"/moreNotificationCount");this.oMoreListItem=l;return l},_retainFocus:function(){var t=this.getView().byId("notificationIconTabBar"),e=t.getSelectedKey(),i=t.getItems(),o=0;i.forEach(function(t,i){if(t.getKey()===e){o=i}});i[o].focus()},priorityFormatter:function(t){if(t){t=t.charAt(0)+t.substr(1).toLowerCase();return u[t]}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/PostLoadingHeaderEnhancement/Component", ["sap/ui/Device","sap/ui/core/Component","sap/ui/core/Core","sap/ui/core/CustomData","sap/ui/core/IconPool","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/shell/ShellHeadItem","sap/ui/core/Configuration"],function(e,t,n,i,a,o,r,l,p,s,u){"use strict";var c=l.AppTitleState;var h=l.FloatingNumberType;var d=[];return t.extend("sap.ushell.components.shell.PostLoadingHeaderEnhancement.Component",{metadata:{library:"sap.ushell"},init:function(){var e=sap.ushell.Container.getRenderer("fiori2").getShellConfig();d.push(this._createBackButton());d.push(this._createOverflowButton());if(e.moveAppFinderActionToShellHeader&&o.last("/core/catalog/enabled")&&!e.disableAppFinder){d.push(this._createAppFinderButton())}if(e.moveContactSupportActionToShellHeader){this._createSupportButton().then(function(e){d.push(e)})}this._createShellNavigationMenu(e);var t=n.byId("shell-header");t.updateAggregation("headItems");t.updateAggregation("headEndItems")},_createBackButton:function(){var e=u.getRTL()?"feeder-arrow":"nav-back";var t=new s({id:"backBtn",tooltip:p.i18n.getText("backBtn_tooltip"),ariaLabel:p.i18n.getText("backBtn_tooltip"),icon:a.getIconURI(e),press:function(){r.emit("navigateBack",Date.now())}});return t.getId()},_createOverflowButton:function(){var t=sap.ushell.Container.getRenderer("fiori2").getShellController().getModel();var n=new s({id:"endItemsOverflowBtn",tooltip:{path:"/notificationsCount",formatter:function(e){return this.tooltipFormatter(e)}},ariaLabel:p.i18n.getText("shellHeaderOverflowBtn_tooltip"),ariaHaspopup:"dialog",icon:"sap-icon://overflow",floatingNumber:"{/notificationsCount}",floatingNumberMaxValue:e.system.phone?99:999,floatingNumberType:h.OverflowButton,press:function(e){r.emit("showEndItemOverflow",e.getSource().getId(),true)}});n.setModel(t);return n.getId()},_createAppFinderButton:function(){var e=new s({id:"openCatalogBtn",text:p.i18n.getText("open_appFinderBtn"),tooltip:p.i18n.getText("open_appFinderBtn"),icon:"sap-icon://sys-find",press:function(){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{semanticObject:"Shell",action:"appfinder"}})})}});if(o.last("/core/extension/enableHelp")){e.addStyleClass("help-id-openCatalogActionItem")}return e.getId()},_createSupportButton:function(){return new Promise(function(e){sap.ui.require(["sap/ushell/ui/footerbar/ContactSupportButton"],function(t){var i="ContactSupportBtn";var a=n.byId(i);if(!a){var o=new t("tempContactSupportBtn",{visible:true});var r=o.getIcon();var l=o.getText();a=new s({id:i,icon:r,tooltip:l,text:l,ariaHaspopup:"dialog",press:function(){o.firePress()}})}e(i)})})},_createShellNavigationMenu:function(e){return new Promise(function(t){sap.ui.require(["sap/m/StandardListItem","sap/ushell/ui/shell/NavigationMiniTile","sap/ushell/ui/shell/ShellNavigationMenu"],function(a,o,l){var p="shellNavigationMenu";var s=function(e,t){var n=t.getProperty("icon")||"sap-icon://circle-task-2",o=t.getProperty("title"),l=t.getProperty("subtitle"),p=t.getProperty("intent");var s=new a({type:"Active",title:o,description:l,icon:n,wrapping:true,customData:[new i({key:"intent",value:p})],press:function(){if(p&&p[0]==="#"){r.emit("navigateFromShellApplicationNavigationMenu",p,true)}}}).addStyleClass("sapUshellNavigationMenuListItems");return s};var u=function(e,t){var n=t.getProperty("icon"),i=t.getProperty("title"),a=t.getProperty("subtitle"),l=t.getProperty("intent");return new o({title:i,subtitle:a,icon:n,intent:l,press:function(){var e=this.getIntent();if(e&&e[0]==="#"){r.emit("navigateFromShellApplicationNavigationMenu",e,true)}}})};var h=new l(p,{title:"{/application/title}",description:"{/title}",icon:"{/application/icon}",showRelatedApps:e.appState!=="lean",items:{path:"/application/hierarchy",factory:s.bind(this)},miniTiles:{path:"/application/relatedApps",factory:u.bind(this)},visible:{path:"/ShellAppTitleState",formatter:function(e){return e===c.ShellNavMenu}}});var g=n.byId("shell-header");h.setModel(g.getModel());var f=n.byId("shellAppTitle");if(f){f.setNavigationMenu(h)}d.push(p);t(h)}.bind(this))})},exit:function(){d.forEach(function(e){var t=n.byId(e);if(t){t.destroy()}});d=[]}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/ProductSwitch/Component", ["sap/base/Log","sap/ui/Device","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/ushell/ui/shell/ShellHeadItem"],function(e,t,o,n,i,r,s,u){"use strict";function a(){return sap.ui.getCore().byId("productSwitchBtn")}function c(){return sap.ui.getCore().byId("sapUshellProductSwitchPopover")}return o.extend("sap.ushell.components.shell.ProductSwitch.Component",{metadata:{version:"1.115.1",library:"sap.ushell.components.shell.ProductSwitch",dependencies:{libs:{"sap.m":{},"sap.f":{lazy:true}}}},createContent:function(){this.oModel=this._getModel()},_getModel:function(){var t=this,o=new n;o.loadData(i.last("/core/productSwitch/url")).then(function(){var n=o.getData();if(n.length===0){e.debug("There are no other profucts configured for your user. ProductSwitch button will be hidden.")}else{t._addProductSwitchButtonToHeader()}}).catch(function(t){e.debug(t)});return o},_openProductSwitch:function(){var e=c(),o=Promise.resolve();if(!e){o=new Promise(function(e,t){sap.ui.require(["sap/ui/core/Fragment"],function(o){o.load({name:"sap.ushell.components.shell.ProductSwitch.ProductSwitch",type:"XML",controller:this}).then(e).catch(t)}.bind(this),t)}.bind(this)).then(function(o){e=o;e.setModel(this.oModel);e.setModel(r.i18nModel,"i18n");if(t.system.phone){e.setShowHeader(true)}}.bind(this))}o.then(function(){var t=a();if(!t||!t.$().width()){t=sap.ui.getCore().byId("endItemsOverflowBtn")}e.openBy(t)});return o},onProductItemPress:function(e){var t=e.getParameter("itemPressed").getTargetSrc();c().close();s.openURL(t,"_blank")},_addProductSwitchButtonToHeader:function(){var e=new u({id:"productSwitchBtn",icon:"sap-icon://grid",visible:true,text:r.i18n.getText("productSwitch"),ariaHaspopup:"dialog",press:this._openProductSwitch.bind(this)});sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem([e.getId()],false)},exit:function(){var e=c();if(!e){e.destroy()}var t=a();if(t){t.destroy()}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Search/Component", ["sap/ushell/components/shell/Search/ESearch","sap/ui/core/UIComponent","sap/ui/core/Component","sap/ushell/utils","sap/base/util/ObjectPath"],function(e,a,t,s,n){"use strict";return a.extend("sap.ushell.components.shell.Search.Component",{metadata:{manifest:"json",library:"sap.ushell"},createContent:function(){var a=this;var l=n.get("sap-ushell-config.services.SearchCEP")!==undefined;var r=sap.ushell.Container.getRenderer("fiori2").getShellController(),o=r.getView(),i=(o.getViewData()?o.getViewData().config:{})||{};var c=i.enableSearch!==false;if(!c){sap.ui.getCore().getEventBus().publish("shell","searchCompLoaded",{delay:0});return}sap.ushell.Container.getFLPPlatform().then(function(n){if(n==="MYHOME"||n==="cFLP"&&l===true){t.create({manifest:false,name:"sap.ushell.components.shell.SearchCEP"})}else{e.createContent(a);sap.ui.getCore().getEventBus().publish("shell","searchCompLoaded",{delay:0})}s.setPerformanceMark("FLP -- search component is loaded")})},exit:function(){e.exit()}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Search/ESearch", ["sap/ushell/resources","sap/ui/core/IconPool","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/jquery","sap/ushell/renderers/fiori2/search/util"],function(e,a,r,jQuery,n){"use strict";var s=false;var i=function(e){if(!e._searchShellHelperPromise){e._searchShellHelperPromise=new Promise(function(e){sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){sap.ui.require(["sap/esh/search/ui/SearchShellHelperAndModuleLoader","sap/esh/search/ui/SearchShellHelper"],function(a,r){r.init();e(r)})})})}return e._searchShellHelperPromise};function t(t){s=true;var h={id:"sf",tooltip:"{i18n>openSearchBtn}",text:"{i18n>searchBtn}",ariaLabel:"{i18n>openSearchBtn}",icon:a.getIconURI("search"),visible:true,showSeparator:false,press:function(e){i(t).then(function(a){a.onShellSearchButtonPressed(e)})}};var l=sap.ushell.Container.getRenderer("fiori2").addHeaderEndItem("sap.ushell.ui.shell.ShellHeadItem",h,true,false);if(n.isSearchFieldExpandedByDefault()){l.setVisible(false)}l.setModel(e.i18nModel,"i18n");if(n.isSearchFieldExpandedByDefault()){i(t).then(function(e){if(e.expandSearch){e.expandSearch()}else{l.setVisible(true)}})}t.oHashChanger=r.getInstance();t.oHashChanger.attachEvent("shellHashChanged",function(e){var a=e.mParameters;setTimeout(function(){sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){sap.ui.require(["sap/esh/search/ui/HashChangeHandler"],function(e){e.handle(a)})})},6e3)});l.addEventDelegate({onAfterRendering:function(){jQuery("#sf").attr("aria-pressed",false)}})}function h(){if(s){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem("sf");var e=sap.ui.getCore().byId("sf");if(e){e.destroy()}}}return{createContent:t,exit:h}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/Component", ["sap/ui/core/UIComponent","sap/m/SearchField","sap/m/Button","sap/m/ResponsivePopover","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ushell/components/shell/SearchCEP/SearchCEP.controller","sap/base/Log","sap/ushell/resources","sap/ui/core/IconPool","sap/ushell/renderers/fiori2/search/util","sap/ushell/ui/shell/ShellHeadItem","sap/ui/Device","sap/ui/core/Core","sap/ui/thirdparty/jquery"],function(e,t,i,s,n,o,r,a,h,l,c,S,d,u,jQuery){"use strict";return e.extend("sap.ushell.components.shell.SearchCEP.Component",{metadata:{version:"1.115.1",library:["sap.ushell","sap.ushell.components.shell"],dependencies:{libs:["sap.m"]}},createContent:function(){try{this.oRenderer=sap.ushell.Container.getRenderer("fiori2");this.oShellHeader=u.byId("shell-header");this.oRenderer.addHeaderEndItem({id:"sf",tooltip:"{i18n>openSearchBtn}",text:"{i18n>search}",ariaLabel:"{i18n>openSearchBtn}",icon:l.getIconURI("search"),visible:true,showSeparator:false,press:this.onShellSearchButtonPressed.bind(this)},true,false);this.oShellSearchBtn=u.byId("sf");this.oShellSearchBtn.addEventDelegate({onkeydown:this._keyDownSearchBtn.bind(this)});var e={width:"90%",placeholder:h.i18n.getText("search"),tooltip:h.i18n.getText("search"),enableSuggestions:true,suggest:this.onSuggest.bind(this),search:this.onSearch.bind(this)};this.oSF=new t("PlaceHolderSearchField",e);this.oSF.addStyleClass("sapUshellCEPSearchCenter");var i=this.getScreenSize();if(i==="S"){this.initSearchSSize()}else if(i==="M"||i==="L"){this.initSearchMLSizes()}else if(i==="XL"){this.initSearchXLSize()}this.oShellHeader.setSearch(this.oSF);this.oSearchCEPController=new r;this.oSF.addEventDelegate({onfocusin:this._onfocusin.bind(this),onAfterRendering:this._onAfterRendering.bind(this)});this.oSearchCEPController.getHomePageApps()}catch(e){a.info("Failed to create CEP search field content"+e)}u.getEventBus().publish("shell","searchCompLoaded",{delay:0})},initSearchSSize:function(){this.oSF.setWidth("60%");this.oShellHeader.setSearchState("COL",35,false)},initSearchMLSizes:function(){this.oShellHeader.setSearchState("COL",35,false)},initSearchXLSize:function(){this.oShellSearchBtn.setVisible(false);this.oShellHeader.setSearchState("EXP",35,false)},_onAfterRendering:function(e){jQuery(this.oSF.getDomRef()).find("#PlaceHolderSearchField-search").attr("title",h.i18n.getText("search"))},_onfocusin:function(e){if(this.oSF.getEnableSuggestions()&&d.system.phone){jQuery(this.oSF.getDomRef()).find("input").attr("inputmode","search")}},onSuggest:function(e){if(this.oSF.getEnableSuggestions()&&d.system.phone){jQuery(this.oSF.getDomRef()).find("input").attr("inputmode","search")}if(u.byId("CEPSearchField")){this.oSearchCEPController.onSuggest(e)}else{this.oSearchCEPController.onInit()}},onSearch:function(e){if(u.byId("CEPSearchField")){this.oSearchCEPController.onSearch(e)}},exit:function(){this.oSearchCEPController.onExit()},expandSearch:function(){this.oShellHeader.setSearchState("EXP_S",35,false);this.oSF.focus()},onShellSearchButtonPressed:function(){this.oShellSearchBtn.setVisible(false);this.expandSearch()},collapseSearch:function(){this.oShellHeader.setSearchState("COL",35,false);this.oShellSearchBtn.setVisible(true)},getScreenSize:function(){var e=d.media.getCurrentRange(d.media.RANGESETS.SAP_STANDARD_EXTENDED);if(e.from>=1440){return"XL"}else if(e.from>=1024){return"L"}else if(e.from>=600){return"M"}else if(e.from>=0){return"S"}},_keyDownSearchBtn:function(e){if(e.code===13||e.code==="Enter"){setTimeout(function(){this.oSF.focus()}.bind(this),500)}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/ProvidersExecuter", ["sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/NavigationSvcSearchProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/FrequentActivityProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/RecentSearchProvider","sap/base/Log"],function(e,r,s,n,a){"use strict";return{runProviders:function(o){var i,t;if(o!==undefined){i=[r]}else{i=[r,s,n]}a.info("-------------------- run CEP search test for sQuery="+o+" --------------------");for(t=0;t<i.length;t++){(function(r){r.execSearch(o).then(function(s){var n="",o=false;n+="-------------------- search provider '"+r.getName()+"' results:\n";for(var i in e.GROUP_TYPE){var t=e.GROUP_TYPE[i];if(Array.isArray(s[t])&&s[t].length>0){o=true;n+="----\x3e group '"+t+"' results:\n";for(var c=0;c<s[t].length;c++){n+="result #"+c+":\n";n+=JSON.stringify(s[t][c],null,2)+"\n"}}}if(!o){n+="----\x3e no results:\n"}a.info(n)})})(i[t])}}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchCEP.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/NavigationSvcSearchProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/FrequentActivityProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/RecentSearchProvider","sap/base/Log","sap/ushell/utils/WindowUtils","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/utils/UrlParsing","sap/ui/Device","sap/ui/core/Configuration","sap/base/util/UriParameters","sap/ui/core/Core"],function(e,t,s,i,r,o,n,l,a,jQuery,h,c,u,d,g,p){"use strict";return e.extend("sap.ushell.components.shell.SearchCEP.SearchCEP",{onInit:function(){this._bEscPressed=false;this._toggleSearchPopover(false);this._oPlaceHolderSF=p.byId("PlaceHolderSearchField");this._oPlaceHolderSF.oParent.getDomRef().firstChild.lastChild.setAttribute("tabindex","0");this._bIsMyHome=false;var e=sap.ushell.Container.getFLPPlatform(true),t=g.fromURL(document.URL);this._bOnInit=true;this.bNavigateToNewResultPage=t.get("cep-search-result-app")==="true";if(e==="MYHOME"){this._bIsMyHome=true}},onSuggest:function(e){if(this._bEscPressed){return}var t=sap.ushell.Container.getFLPUrl(true);var s=c.getHash(t),i=s.split("&/")[0];if(this.bOnNavigationToResultPage===true&&(i==="Action-search"||i==="WorkZoneSearchResult-display")){if(this._oPopover.isOpen()){this._oPopover.close()}return}this.bOnNavigationToResultPage=false;var r=e.getParameter("suggestValue");this.oSF.focus();if(this._recentSearchTermSelected===true){this._recentSearchTermSelected=false;return}if(this.bOpeningPopOver===true&&this._oPopover.isOpen()===true){this.bOpeningPopOver=false;return}this.testProviders(r)},onfocusin:function(e){if(this.oSF.getEnableSuggestions()&&u.system.phone){jQuery(this.oSF.getDomRef()).find("input").attr("inputmode","search");jQuery(this._oPlaceHolderSF.getDomRef()).find("input").attr("inputmode","search")}},getHomePageApps:function(){var e=this;r.execSearch().then(function(t){var s="homePageApplications";if(Array.isArray(t[s])&&t[s].length>0){e.oProducts=t[s].slice(0,12)}})},getScreenSize:function(){var e=u.media.getCurrentRange(u.media.RANGESETS.SAP_STANDARD_EXTENDED);if(e.from>=1440){return"XL"}else if(e.from>=1024){return"L"}else if(e.from>=600){return"M"}else if(e.from>=0){return"S"}},onSearch:function(e){if(this._bEscPressed){return}var t=e.getParameter("query"),s=e.getParameter("clearButtonPressed");if(s===true){this.oSF.setValue("");this._oPlaceHolderSF.setValue("");this.bOpeningPopOver=false;this.testProviders();if(this._oSearchHistoryList.getItems().length===0&&this._oFrequentlyUsedAppsList.getItems().length===0&&this._oProductsList.getItems().length===0){this._oPopover.close()}return}if(t){this._oPlaceHolderSF.setValue(this.oSF.getValue());this._saveSearchTerm(t);if(this._bIsMyHome===true){if(this._oSearchResultList.getItems().length>0){this._oSearchResultList.getItems()[0].focus();var i="searchResults";var r=this._oSearchResultList.getItems()[0].getBindingContext(i).getObject().semanticObject;var o=this._oSearchResultList.getItems()[0].getBindingContext(i).getObject().semanticObjectAction;this._navigateApp(r,o)}}else{this._navigateToResultPage(t)}}},onBeforeOpen:function(){this._oPopover.addStyleClass("sapUshellCEPSearchFieldPopover");var e=p.byId("shell-header").getSearchState();var t=false;if(e==="COL"){t=true}p.byId("shell-header").setSearchState("EXP",35,false);p.byId("shell-header").setSearchState("EXP_S",35,true);if(t===true){p.byId("shell-header").setSearchState("COL",35,false)}},onAfterOpen:function(){if(p.byId("SearchHistoryList-trigger")){p.byId("SearchHistoryList-trigger").addEventDelegate({onkeydown:this._keyDownSearchHistoryListMoreTrigger.bind(this),onmousedown:this._mouseDownSearchHistoryListMoreTrigger.bind(this)})}if(p.byId("FrequentlyUsedAppsList-trigger")){p.byId("FrequentlyUsedAppsList-trigger").addEventDelegate({onkeydown:this._keyDownFrequentlyUsedAppsListMoreTrigger.bind(this)})}if(p.byId("ProductsList-trigger")){p.byId("ProductsList-trigger").addEventDelegate({onkeydown:this._keyDownProductsListMoreTrigger.bind(this)})}if(this._oFrequentlyUsedAppsList.getItems().length>0){this._oFrequentlyUsedAppsList.getItems()[0].addEventDelegate({onkeyup:this._keyUpFrequentlyUsedAppsListMoreTrigger.bind(this)})}if(this._oProductsList.getItems().length>0){this._oProductsList.getItems()[0].addEventDelegate({onkeyup:this._keyUpProductsListMoreTrigger.bind(this)})}var e=document.getElementById("PlaceHolderSearchField").clientHeight;document.getElementById("CEPSearchField").style.height=e+"px";jQuery(this.oSF.getDomRef()).find("#CEPSearchField-search").attr("title",h.i18n.getText("search"))},onAfterClose:function(){this._oPlaceHolderSF.setValue(this.oSF.getValue());if(this._bEscPressed){this._bEscPressed=false;this._oPlaceHolderSF.focus()}var e=this.getScreenSize();if(e!=="XL"&&this.oSF.getValue()===""){p.byId("shell-header").setSearchState("COL",35,false);p.byId("sf").setVisible()}else{p.byId("shell-header").setSearchState("EXP",35,false);p.byId("shell-header").setSearchState("EXP_S",35,false)}},onGrowingStarted:function(e){var t=e.getParameter("actual");if(t>0){this._oSearchHistoryList.setGrowingThreshold(8)}},onGrowingFinishedResults:function(){this._boldResults(this._oSearchResultList,this.oSF.getValue())},onExit:function(){},testProviders:function(e){var s,l,a=this,c=false,u=false;if(e!==undefined&&e!==""&&e.trim().length!==0){this._setListsVisible(false,this._oSearchHistoryList);this._setListsVisible(false,this._oFrequentlyUsedAppsList);this._setListsVisible(false,this._oProductsList);s=[r];c=true}else{this._setListsVisible(false,this._oSearchResultList);this._setListsVisible(false,this._oExternalSearchResultList);if(this._bOnInit!==true){s=[o,n];if(this._oProductsList.getItems().length>0){this._setListsVisible(true,this._oProductsList);u=true}}else{if(Array.isArray(this.oProducts)&&this.oProducts.length>0){u=true;this._setListsVisible(true,this._oProductsList);this._oProductsList.setModel(new t(this.oProducts),"productsResults");s=[o,n]}else{s=[r,o,n]}this._bOnInit=false}}for(l=0;l<s.length;l++){(function(s){s.execSearch(e).then(function(s){for(var r in i.GROUP_TYPE){var o=i.GROUP_TYPE[r];if(Array.isArray(s[o])&&s[o].length>0){if(o==="recentSearches"){u=true;a._setListsVisible(true,a._oSearchHistoryList);a._oSearchHistoryList.setGrowingThreshold(2);a._oSearchHistoryList.setModel(new t(s[o].slice(0,10)),"searchTerms")}else if(o==="frequentApplications"){u=true;a._setListsVisible(true,a._oFrequentlyUsedAppsList);a._oFrequentlyUsedAppsList.setModel(new t(s[o].slice(0,12)),"freqUsedApps")}else if(c!==true&&o==="homePageApplications"){u=true;a._setListsVisible(true,a._oProductsList);a._oProductsList.setModel(new t(s[o].slice(0,12)),"productsResults")}else if(c===true&&o==="applications"){a._setListsVisible(true,a._oSearchResultList);a._oSearchResultList.setModel(new t(s[o].slice(0,12)),"searchResults");a._applyResultsAcc(s[o].length);setTimeout(function(){a._boldResults(a._oSearchResultList,e);if(p.byId("SearchResultList-trigger")){p.byId("SearchResultList-trigger").addEventDelegate({onkeydown:a._keyDownSearchResultListMoreTrigger.bind(a)})}},50)}else if(c===true&&o==="externalSearchApplications"){a._setListsVisible(true,a._oExternalSearchResultList);a._oExternalSearchResultList.setModel(new t(s[o].slice(0,12)),"externalSearchResults")}if(!a._oPopover.isOpen()&&(u===true||c===true)){a._toggleSearchPopover(true)}a.oSF.focus()}else if(!a._oPopover.isOpen()&&u===true&&a._oProductsList.getItems().length>0){a._toggleSearchPopover(true)}else if(c===true&&o==="applications"){if(!s[o]||s[o].length===0){a._setListsVisible(true,a._oSearchResultList);a._oSearchResultList.setModel(new t({}),"searchResults");a._applyResultsAcc(0);var n=h.i18n.getText("no_apps_found",[e]);a._oSearchResultList.setNoDataText(n);if(!a._oPopover.isOpen()){a._toggleSearchPopover(true)}}}}})})(s[l])}},_applyResultsAcc:function(e){var t="";if(e===1){t=h.i18n.getText("one_result_search_aria",e)}else if(e>1){t=h.i18n.getText("multiple_results_search_aria",e)}else{t=h.i18n.getText("no_results_search_aria")}this.oSF.$("SuggDescr").text(t)},_boldResults:function(e,t){var s=e.getItems(),i=e.$().find(".sapMSLITitleOnly");jQuery.each(i,function(e){var r=s[e].getTitle(),o=new RegExp(t,"gi");var n=r;n=n.replace(o,function(e){return"</b>"+e+"<b>"});n="<b>"+n+"</b>";i[e].innerHTML=n})},_toggleSearchPopover:function(e){if(!this._oPopover){s.load({name:"sap.ushell.components.shell.SearchCEP.SearchFieldFragment",type:"XML",controller:this}).then(function(t){this._oPopover=t;var s=this.getScreenSize();var i=document.getElementById("PlaceHolderSearchField").clientWidth;if(s==="S"){i=1.1*i}else{i=1.05*i}this._oPopover.setContentWidth(i+"px");if(d.getRTL()===true){var r=this._oPopover.getOffsetX();this._oPopover.setOffsetX(-1*r)}this._initializeSearchField();this._initializeSearchHistoryList();this._initializeFrequentlyUsedAppsList();this._initializeSearchResultList();this._initializeProductsList();this._initializeExternalSearchResultList();if(!u.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}this._oSearchHistoryList.addStyleClass(this._sContentDensityClass);this._oFrequentlyUsedAppsList.addStyleClass(this._sContentDensityClass);this._oSearchResultList.addStyleClass(this._sContentDensityClass);this._oProductsList.addStyleClass(this._sContentDensityClass);this._oExternalSearchResultList.addStyleClass(this._sContentDensityClass);this.testProviders();this._toggleSearchPopover(e)}.bind(this))}else if(e){this._oPopover.openBy(this._oPlaceHolderSF);this.bOpeningPopOver=true;if(this._oPlaceHolderSF.getValue()!==""){this.oSF.setValue(this._oPlaceHolderSF.getValue())}}},_keyDownSearchField:function(e){if(e.code===40||e.code==="ArrowDown"){this.oSF.focus();if(!this._oPopover.isOpen()){this._toggleSearchPopover(true)}if(this._oSearchHistoryList.getVisible()===true&&this._oSearchHistoryList.getItems().length>0){this._oSearchHistoryList.getItems()[0].focus()}else if(this._oFrequentlyUsedAppsList.getVisible()===true&&this._oFrequentlyUsedAppsList.getItems().length>0){this._oFrequentlyUsedAppsList.getItems()[0].focus()}else if(this._oProductsList.getVisible()===true&&this._oProductsList.getItems().length>0){this._oProductsList.getItems()[0].focus()}else if(this._oSearchResultList.getVisible()===true&&this._oSearchResultList.getItems().length>0){this._oSearchResultList.getItems()[0].focus()}else if(this._oExternalSearchResultList.getVisible()===true&&this._oExternalSearchResultList.getItems().length>0){this._oExternalSearchResultList.getItems()[0].focus()}}else if(e.code===116||e.code==="F5"){window.location.reload()}else if(e.code===9||e.code==="Tab"){var t;if(e.shiftKey){t=this._oPlaceHolderSF.oParent.getDomRef().firstChild.lastChild.firstChild}else{t=this._oPlaceHolderSF.oParent.getDomRef().lastChild.firstChild;if(t&&getComputedStyle(t).display==="none"){t=this._oPlaceHolderSF.oParent.getDomRef().lastChild.firstChild.nextSibling}}setTimeout(function(){if(this.getScreenSize()==="S"||this.getScreenSize()==="M"){p.byId("shell-header").setSearchState("COL",35,false);p.byId("sf").setVisible(true)}if(t!==null){t.focus()}}.bind(this),0)}else if(e.code===27||e.code==="Escape"){this.oSF.setValue("");this._oPlaceHolderSF.setValue("");this._bEscPressed=true}},_keyDownSearchHistoryList:function(e){var t=this._oSearchHistoryList.getItems().length;if(e.code===40||e.code==="ArrowDown"){if(t>0&&this._oSearchHistoryList.getItems()[t-1]===e.srcControl){var s=window.getComputedStyle(document.getElementById("SearchHistoryList-triggerList"),"");if(s.display==="none"){if(this._oFrequentlyUsedAppsList.getVisible()===true&&this._oFrequentlyUsedAppsList.getItems().length>0){this._oFrequentlyUsedAppsList.getItems()[0].focus()}else if(this._oProductsList.getVisible()===true&&this._oProductsList.getItems().length>0){this._oProductsList.getItems()[0].focus()}}else{p.byId("SearchHistoryList-trigger").focus()}}}else if(e.code===38||e.code==="ArrowUp"){if(t>0&&this._oSearchHistoryList.getItems()[0]===e.srcControl){this.oSF.focus()}}},_keyDownFrequentlyUsedAppsList:function(e){var t,s=this._oFrequentlyUsedAppsList.getItems().length;if(e.code===40||e.code==="ArrowDown"){if(s>0&&this._oFrequentlyUsedAppsList.getItems()[s-1]===e.srcControl){t=window.getComputedStyle(document.getElementById("FrequentlyUsedAppsList-triggerList"),"");if(t.display==="none"){if(this._oProductsList.getVisible()===true&&this._oProductsList.getItems().length>0){this._oProductsList.getItems()[0].focus()}}else{p.byId("FrequentlyUsedAppsList-trigger").focus()}}}else if(e.code===38||e.code==="ArrowUp"){if(s>0&&this._oFrequentlyUsedAppsList.getItems()[0]===e.srcControl){var i=this._oSearchHistoryList.getItems().length;if(this._oSearchHistoryList.getVisible()===true&&i>0){var r=window.getComputedStyle(document.getElementById("SearchHistoryList-triggerList"),"");if(r.display==="none"){if(i>0){this._oSearchHistoryList.getItems()[i-1].focus()}}else{p.byId("SearchHistoryList-trigger").focus()}}else{this.oSF.focus()}}}else if(e.code===13||e.code==="Enter"){var o=e.srcControl.getBindingContext("freqUsedApps").getObject().appId;var n=o.split("-")[0];n=n.split("#")[1];var l=o.split("-")[1];this._navigateApp(n,l)}},_keyDownProductsList:function(e){var t,s=this._oProductsList.getItems().length,i=this._oFrequentlyUsedAppsList.getItems().length,r=this._oSearchHistoryList.getItems().length;if(e.code===40||e.code==="ArrowDown"){if(s>0&&this._oProductsList.getItems()[s-1]===e.srcControl){t=window.getComputedStyle(document.getElementById("ProductsList-triggerList"),"");if(t.display!=="none"){p.byId("ProductsList-trigger").focus()}}}else if(e.code===38||e.code==="ArrowUp"){if(s>0&&this._oProductsList.getItems()[0]===e.srcControl){if(this._oFrequentlyUsedAppsList.getVisible()===true&&i>0){t=window.getComputedStyle(document.getElementById("FrequentlyUsedAppsList-triggerList"),"");if(t.display==="none"){this._oFrequentlyUsedAppsList.getItems()[i-1].focus()}else{p.byId("FrequentlyUsedAppsList-trigger").focus()}}else if(this._oSearchHistoryList.getVisible()===true&&r>0){t=window.getComputedStyle(document.getElementById("SearchHistoryList-triggerList"),"");if(t.display==="none"){this._oSearchHistoryList.getItems()[r-1].focus()}else{p.byId("SearchHistoryList-trigger").focus()}}else{this.oSF.focus()}}}else if(e.code===13||e.code==="Enter"){this.onProductsPress(e)}},_keyUpFrequentlyUsedAppsListMoreTrigger:function(e){var t=e.srcControl.getDomRef(),s=t.getAttribute("aria-labelledby"),i=p.byId(s).getProperty("text"),r=h.i18n.getText("frequentAppsCEPSearch");jQuery(p.byId(s).getDomRef()).text(r+". "+i)},_keyUpProductsListMoreTrigger:function(e){var t=e.srcControl.getDomRef(),s=t.getAttribute("aria-labelledby"),i=p.byId(s).getProperty("text"),r=h.i18n.getText("products");jQuery(p.byId(s).getDomRef()).text(r+". "+i)},_keyDownSearchHistoryListMoreTrigger:function(e){if(e.code===40||e.code==="ArrowDown"){if(this._oFrequentlyUsedAppsList.getVisible()===true&&this._oFrequentlyUsedAppsList.getItems().length>0){this._oFrequentlyUsedAppsList.getItems()[0].focus()}else if(this._oProductsList.getVisible()===true&&this._oProductsList.getItems().length>0){this._oProductsList.getItems()[0].focus()}}else if(e.code===38||e.code==="ArrowUp"){var t=this._oSearchHistoryList.getItems().length;if(t>0){this._oSearchHistoryList.getItems()[t-1].focus()}}else if(e.code===13||e.code==="Enter"){this._oSearchHistoryList.setGrowingThreshold(8)}},_mouseDownSearchHistoryListMoreTrigger:function(e){this._oSearchHistoryList.setGrowingThreshold(8)},_keyDownFrequentlyUsedAppsListMoreTrigger:function(e){if(e.code===38||e.code==="ArrowUp"){var t=this._oFrequentlyUsedAppsList.getItems().length;if(t>0){this._oFrequentlyUsedAppsList.getItems()[t-1].focus()}}else if(e.code===40||e.code==="ArrowDown"){if(this._oProductsList.getVisible()===true&&this._oProductsList.getItems().length>0){this._oProductsList.getItems()[0].focus()}}},_keyDownProductsListMoreTrigger:function(e){if(e.code===38||e.code==="ArrowUp"){var t=this._oProductsList.getItems().length;if(t>0){this._oProductsList.getItems()[t-1].focus()}}},_keyDownSearchResultListMoreTrigger:function(e){if(e.code===38||e.code==="ArrowUp"){var t=this._oSearchResultList.getItems().length;if(t>0){this._oSearchResultList.getItems()[t-1].focus()}}else if(e.code===40||e.code==="ArrowDown"){if(this._oExternalSearchResultList.getVisible()===true&&this._oExternalSearchResultList.getItems().length>0){this._oExternalSearchResultList.getItems()[0].focus()}}},_keyDownSearchResultList:function(e){var t=this._oSearchResultList.getItems().length;if(e.code===40||e.code==="ArrowDown"){if(t>0&&this._oSearchResultList.getItems()[t-1]===e.srcControl){var s=window.getComputedStyle(document.getElementById("SearchResultList-triggerList"),"");if(s.display!=="none"){p.byId("SearchResultList-trigger").focus()}else if(this._oExternalSearchResultList.getVisible()===true&&this._oExternalSearchResultList.getItems().length>0){this._oExternalSearchResultList.getItems()[0].focus()}}}else if(e.code===38||e.code==="ArrowUp"){if(t>0&&this._oSearchResultList.getItems()[0]===e.srcControl){this.oSF.focus()}}},_keyDownExternalSearchResultList:function(e){var t=this._oExternalSearchResultList.getItems().length,s=this._oSearchResultList.getItems().length,i="";if(e.code===38||e.code==="ArrowUp"){if(t>0&&this._oExternalSearchResultList.getItems()[0]===e.srcControl){if(this._oSearchResultList.getVisible()===true&&s>0){i=window.getComputedStyle(document.getElementById("SearchResultList-triggerList"),"");if(i.display==="none"){this._oSearchResultList.getItems()[s-1].focus()}else{p.byId("SearchResultList-trigger").focus()}}else{this.oSF.focus()}}}},_initializeSearchField:function(){this.oSF=p.byId("CEPSearchField");var e=document.getElementById("PlaceHolderSearchField").clientWidth;this.oSF.setWidth(e+"px");this.oSF.addEventDelegate({onkeydown:this._keyDownSearchField.bind(this),onfocusin:this.onfocusin.bind(this)})},_initializeSearchHistoryList:function(){this._oSearchHistoryList=p.byId("SearchHistoryList");this._oSearchHistoryList.addEventDelegate({onkeydown:this._keyDownSearchHistoryList.bind(this),onsapdown:this._keyDownSearchHistoryList.bind(this)})},_initializeFrequentlyUsedAppsList:function(){this._oFrequentlyUsedAppsList=p.byId("FrequentlyUsedAppsList");this._oFrequentlyUsedAppsList.setHeaderText(h.i18n.getText("frequentAppsCEPSearch"));this._oFrequentlyUsedAppsList.addEventDelegate({onkeydown:this._keyDownFrequentlyUsedAppsList.bind(this),onsapdown:this._keyDownFrequentlyUsedAppsList.bind(this)})},_initializeSearchResultList:function(){this._oSearchResultList=p.byId("SearchResultList");this._oSearchResultList.addEventDelegate({onkeydown:this._keyDownSearchResultList.bind(this),onsapdown:this._keyDownSearchResultList.bind(this)})},_initializeProductsList:function(){this._oProductsList=p.byId("ProductsList");this._oProductsList.setHeaderText(h.i18n.getText("products"));this._oProductsList.addEventDelegate({onkeydown:this._keyDownProductsList.bind(this),onsapdown:this._keyDownProductsList.bind(this)})},_initializeExternalSearchResultList:function(){this._oExternalSearchResultList=p.byId("ExternalSearchAppsList");this._oExternalSearchResultList.setHeaderText(h.i18n.getText("searchWithin"));this._oExternalSearchResultList.addEventDelegate({onkeydown:this._keyDownExternalSearchResultList.bind(this)})},_saveSearchTerm:function(e){if(e){sap.ushell.Container.getServiceAsync("UserRecents").then(function(t){t.addSearchActivity({sTerm:e}).then(function(){return})})}},onRecentSearchPress:function(e){var t=e.getParameter("listItem").getProperty("title");this._recentSearchTermSelected=true;this.oSF.setValue(t);this.testProviders(t)},onSearchResultPress:function(e){var t=this.oSF.getValue();this._saveSearchTerm(t);var s="searchResults";var i=e.getParameter("listItem").getBindingContext(s).getObject().semanticObject;var r=e.getParameter("listItem").getBindingContext(s).getObject().semanticObjectAction;this._navigateApp(i,r)},onProductsPress:function(e){var t=this.oSF.getValue();this._saveSearchTerm(t);var s="productsResults";var i=e.getParameter("listItem").getBindingContext(s).getObject().semanticObject;var r=e.getParameter("listItem").getBindingContext(s).getObject().semanticObjectAction;this._navigateApp(i,r)},onExternalSearchResultPress:function(e){var t=this.oSF.getValue();this._saveSearchTerm(t);if(e.getParameter("listItem").getBindingContext("externalSearchResults").getObject().isEnterpriseSearch===true){this._navigateToResultPage(t,true)}else{var s=e.getParameter("listItem").getBindingContext("externalSearchResults").getObject().url;if(s!==undefined&&s!==null){this._navigateURL(s)}}},onFreqUsedAppsPress:function(e){var t=e.getParameter("listItem").getBindingContext("freqUsedApps").getObject().appId;var s=t.split("-")[0];s=s.split("#")[1];var i=t.split("-")[1];this._navigateApp(s,i);if(this._oPopover.isOpen()){this._oPopover.close()}},onFreqUsedProductsPress:function(e){var t=e.getParameter("listItem").getBindingContext("freqUsedProducts").getObject().appId;var s=t.split("-")[0];s=s.split("#")[1];var i=t.split("-")[1];this._navigateApp(s,i);if(this._oPopover.isOpen()){this._oPopover.close()}},_setListsVisible:function(e,t){t.setVisible(e);if(this._oSearchHistoryList.getVisible()===true){if(this._oFrequentlyUsedAppsList.getVisible()===true||this._oProductsList.getVisible()===true){this._oSearchHistoryList.addStyleClass("sapUshellCEPListDivider")}}if(this._oFrequentlyUsedAppsList.getVisible()===true){if(this._oProductsList.getVisible()===true){this._oFrequentlyUsedAppsList.addStyleClass("sapUshellCEPListDivider")}}if(this._oSearchResultList.getVisible()===true){if(this._oExternalSearchResultList.getVisible()===true){this._oSearchResultList.addStyleClass("sapUshellCEPListDivider")}}},_navigateURL:function(e){a.openURL(e);this.oSF.setValue("");setTimeout(function(){if(this._oPopover.isOpen()){this._oPopover.close()}}.bind(this),500)},_navigateApp:function(e,t){var s={};sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(i){i.toExternal({target:{semanticObject:e,action:t},params:s})});if(this.oSF.getValue()!==""){this.oSF.setValue("")}setTimeout(function(){if(this._oPopover.isOpen()){this._oPopover.close()}}.bind(this),500)},_navigateToResultPage:function(e,t){var s;if(e===""){return}if(t===true){s='#Action-search&/top=20&filter={"dataSource":{"type":"Category","id":"All","label":"All","labelPlural":"All"},"searchTerm":"'+e+'","rootCondition":{"type":"Complex","operator":"And","conditions":[]}}'}else if(this.bNavigateToNewResultPage===true){s="#WorkZoneSearchResult-display?searchTerm="+e+"&category=app"}else{s='#Action-search&/top=20&filter={"dataSource":{"type":"Category","id":"$$APPS$$","label":"Apps","labelPlural":"Apps"},"searchTerm":"'+e+'","rootCondition":{"type":"Complex","operator":"And","conditions":[]}}'}this.bOnNavigationToResultPage=true;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{shellHash:s}})});if(this.bNavigateToNewResultPage===true){setTimeout(function(){if(this._oPopover.isOpen()){this._oPopover.close()}}.bind(this),500)}setTimeout(function(){this.bOnNavigationToResultPage=false}.bind(this),3e3)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/FrequentActivityProvider", ["sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider","sap/base/Log"],function(e,t){"use strict";var r=function(){};r.prototype.getName=function(){return"Frequent Activity Provider"};r.prototype.execSearch=function(){return sap.ushell.Container.getServiceAsync("UserRecents").then(function(r){return r.getFrequentActivity().then(function(t){var r={};if(Array.isArray(t)&&t.length>0){r.frequentApplications=t.filter(function(e){if(e.appType==="Application"||e.appType==="External Link"){return true}return false}).map(function(t){if(t.appType==="Application"){t._type=e.ENTRY_TYPE.App;t.text=t.text||t.title;t.icon=t.icon||"sap-icon://SAP-icons-TNT/application"}else if(t.appType==="External Link"){t._type=e.ENTRY_TYPE.ExternalLink;t.text=t.text||t.title;t.icon=t.icon||"sap-icon://internet-browser"}return t});r.frequentProducts=t.filter(function(e){if(e.appType==="Product"){return true}return false}).map(function(t){t._type=e.ENTRY_TYPE.Product;t.text=t.text||t.title;t.icon=t.icon||"sap-icon://product";return t})}return r},function(e){t.error("Frequent Activity Provider failed","error: "+e,"sap.ushell.components.shell.SearchCEP.SearchProviders.FrequentActivityProvider::execSearch");return{}})})};return new r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/NavigationSvcSearchProvider", ["sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider","sap/base/Log","sap/ushell/Config","sap/ushell/resources","sap/base/util/ObjectPath"],function(e,r,a,t,n){"use strict";var i=function(){};i.prototype.getName=function(){return"Navigation Service Search Provider"};i.prototype.execSearch=function(a){var t=this;return sap.ushell.Container.getServiceAsync("SearchCEP").then(function(r){return r.execSearch(a).then(function(r){var i=n.get("sap-ushell-config.services.SearchCEP")!==undefined,c=sap.ushell.Container.getFLPPlatform(true),o=i===true&&c==="cFLP",s={},p=n.get("sap-ushell-config.renderers.fiori2.componentData.config.searchBusinessObjects");if(r&&Array.isArray(r.applications)&&r.applications.length>0){s.applications=r.applications.map(function(r){r._type=e.ENTRY_TYPE.App;r.icon=r.icon||"sap-icon://SAP-icons-TNT/application";return r})}if(r&&Array.isArray(r.homePageApplications)&&r.homePageApplications.length>0){s.homePageApplications=r.homePageApplications.map(function(r){r._type=e.ENTRY_TYPE.App;r.icon=r.icon||"sap-icon://product";return r})}if(r&&Array.isArray(r.externalSearchApplications)&&r.externalSearchApplications.length>0){s.externalSearchApplications=r.externalSearchApplications.map(function(r){r._type=e.ENTRY_TYPE.App;r.icon=r.icon||"sap-icon://world";return r})}if(p===true&&o===true){s.externalSearchApplications=t._addESToResult(s,a)}return s})},function(e){r.error("Navigation Service Search Provider failed","error: "+e,"sap.ushell.components.shell.SearchCEP.SearchProviders.NavigationSvcSearchProvider::execSearch");return{}})};i.prototype._addESToResult=function(r,a){var n='#Action-search&/top=20&filter={"dataSource":{"type":"Category","id":"All","label":"All","labelPlural":"All"},"searchTerm":"'+a+'","rootCondition":{"type":"Complex","operator":"And","conditions":[]}}',i=sap.ushell.Container.getFLPUrl()+n,c={text:t.i18n.getText("enterprise_search"),description:t.i18n.getText("enterprise_search"),icon:"sap-icon://search",inboundIdentifier:"38cd162a-e185-448c-9c37-a4fc02b3d39d___GenericDefaultSemantic-__GenericDefaultAction",url:i,target:"_blank",recent:false,semanticObject:"Action",semanticObjectAction:"search",_type:e.ENTRY_TYPE.App,isEnterpriseSearch:true};if(r&&Array.isArray(r.externalSearchApplications)&&r.externalSearchApplications.length>0){r.externalSearchApplications.push(c)}else{r.externalSearchApplications=[c]}return r.externalSearchApplications};return new i},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/RecentSearchProvider", ["sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider","sap/base/Log"],function(e,r){"use strict";var n=function(){};n.prototype.getName=function(){return"Recent Search Terms Provider"};n.prototype.execSearch=function(){return sap.ushell.Container.getServiceAsync("UserRecents").then(function(n){return n.getRecentSearches().then(function(r){if(Array.isArray(r)&&r.length>0){return{recentSearches:r.map(function(r){return{_type:e.ENTRY_TYPE.SearchText,text:r.sTerm,icon:r.icon||"sap-icon://history"}})}}return{}},function(e){r.error("Recent Search Terms Provider failed","error: "+e,"sap.ushell.components.shell.SearchCEP.SearchProviders.RecentSearchProvider::execSearch");return{}})})};return new n},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider", [],function(){"use strict";var e={};e.GROUP_TYPE={Applications:"applications",FrequentApplications:"frequentApplications",FrequentProducts:"frequentProducts",RecentSearches:"recentSearches",HomePageApplications:"homePageApplications",ExternalSearchApplications:"externalSearchApplications"};e.ENTRY_TYPE={App:"app",Product:"product",ExternalLink:"ex-link",SearchText:"text"};return e},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/Component", ["sap/ui/core/Core","sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/components/shell/Settings/ProfilingLoader","sap/ushell/components/shell/Settings/userAccount/UserAccountEntry","sap/ushell/components/shell/Settings/appearance/AppearanceEntry","sap/ushell/components/shell/Settings/homepage/HomepageEntry","sap/ushell/components/shell/Settings/spaces/SpacesEntry","sap/ushell/components/shell/Settings/userActivities/UserActivitiesEntry","sap/ushell/components/shell/Settings/userProfiling/UserProfilingEntry","sap/ushell/components/shell/Settings/notifications/NotificationsEntry","sap/ushell/components/shell/Settings/userDefaults/UserDefaultsEntry","sap/ushell/components/shell/Settings/userLanguageRegion/UserLanguageRegionEntry","sap/ushell/ui/shell/ShellHeadItem","sap/ushell/utils"],function(e,t,s,n,i,o,r,l,a,u,h,c,g,p,d,f,m,S,y){"use strict";var E=[];return s.extend("sap.ushell.components.shell.Settings.Component",{metadata:{version:"1.115.1",library:"sap.ushell",dependencies:{libs:{"sap.m":{},"sap.ui.layout":{lazy:true}}}},init:function(){s.prototype.init.apply(this,arguments);var e=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(e.moveUserSettingsActionToShellHeader){this.oSettingsBtn=this._addUserSettingsButton()}this._addStandardEntityToConfig();l();if(i.last("/core/shell/model/enableNotifications")){this._addNotificationSettings()}E.push(o.on("openUserSettings").do(this._openUserSettings.bind(this)))},_addStandardEntityToConfig:function(){var e=i.last("/core/userPreferences/entries");e.push(a.getEntry());e.push(u.getEntry());if(c.isRelevant()){e.push(c.getEntry())}e.push(m.getEntry());if(i.last("/core/shell/enableRecentActivity")){e.push(g.getEntry())}e.push(p.getEntry());if(i.last("/core/shell/model/searchAvailable")){sap.ushell.Container.getFLPPlatform().then(function(t){if(t!=="MYHOME"){sap.ui.require(["sap/ushell/components/shell/Settings/search/SearchEntry"],function(t){t.getEntry().then(function(t){t.isActive().then(function(s){if(!s){return}y.setPerformanceMark("FLP -- search setting entry is set active");e=i.last("/core/userPreferences/entries");e.push(t);i.emit("/core/userPreferences/entries",e)})})})}})}if(i.last("/core/home/enableHomePageSettings")&&!i.last("/core/spaces/enabled")){e.push(h.getEntry())}if(i.last("/core/shell/model/userDefaultParameters")){e.push(f.getEntry())}e=sap.ushell.Container.getRenderer("fiori2").reorderUserPrefEntries(e);i.emit("/core/userPreferences/entries",e)},_addNotificationSettings:function(){sap.ushell.Container.getServiceAsync("Notifications").then(function(e){e._userSettingInitialization();e._getNotificationSettingsAvailability().done(function(e){if(e.settingsAvailable){var t=i.last("/core/userPreferences/entries");t.push(d.getEntry());i.emit("/core/userPreferences/entries",t)}})})},_openUserSettings:function(s){if(!this.oDialogPromise){this.oDialogPromise=t.create({id:"settingsView",viewName:"sap.ushell.components.shell.Settings.UserSettings"}).then(function(t){this.oSettingsView=t;t.setModel(new n({entries:[]}));t.setModel(r.i18nModel,"i18n");var i=s.controlId||"shell-header";e.byId(i).addDependent(t);return t.byId("userSettingsDialog")}.bind(this))}return this.oDialogPromise.then(function(e){e.open()})},_addUserSettingsButton:function(){var e=new S({id:"userSettingsBtn",icon:"sap-icon://action-settings",text:r.i18n.getText("userSettings"),ariaHaspopup:"dialog",press:this._openUserSettings.bind(this)});sap.ushell.Container.getRenderer("fiori2").oShellModel.addHeaderEndItem([e.getId()],false,["home","app","minimal","standalone","embedded","embedded-home","merged","merged-home"],true);return e},exit:function(){for(var e=0;e<E.length;e++){E[e].off()}if(this.oSettingsView){this.oSettingsView.destroy();this.oSettingsView=null;this.oDialogPromise=null}if(this.oSettingsBtn){this.oSettingsBtn.destroy();this.oSettingsBtn=null}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/ErrorMessageHelper", [],function(){"use strict";var e="sapUshellSettingsDialog/";var t=sap.ui.getCore().getMessageManager();return{addMessage:s,filterMessagesToDisplay:a,removeErrorMessages:g};function s(s){s.setTargets([e]);t.addMessages(s)}function a(){return t.getMessageModel().getData().filter(function(t){return t.getTarget()&&t.getTarget().indexOf(e)===0})}function g(){t.getMessageModel().getData().forEach(function(s){if(s.getTarget()&&s.getTarget().indexOf(e)===0){t.removeMessages(s)}})}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/ProfilingLoader", ["sap/ushell/Config"],function(e){"use strict";function n(){return new Promise(function(n){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(i){if(i.systemEnabled()&&i.isSetUsageAnalyticsPermitted()){sap.ui.require(["sap/ushell/components/shell/Settings/userProfiling/UsageAnalyticsProfiling"],function(i){var s=e.last("/core/userPreferences/profiling");s.push(i.getProfiling());e.emit("/core/userPreferences/profiling",s);n()})}else{n()}})})}return function e(){return Promise.all([n()])}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/UserSettings.controller", ["sap/base/Log","sap/ui/core/Core","sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/ushell/components/shell/Settings/ErrorMessageHelper","sap/ui/core/message/Message","sap/ui/base/Object","sap/ui/core/library","sap/base/util/deepClone"],function(e,t,n,r,s,i,o,a,l,u,d,c,g,f,h){"use strict";var p=f.MessageType;return n.extend("sap.ushell.components.shell.Settings.UserSettings",{onInit:function(){this._aPreviouslySelectedItems=[];if(!i.system.phone){this.getView().byId("userSettingEntryList").addEventDelegate({onAfterRendering:this._listAfterRendering.bind(this)})}this._mLoadedEntryContent=new Map;this._mLoadedWrappers=new Map;this.getView().setModel(new s({entries:{}}),"results");i.orientation.attachHandler(this._fnOrientationChange,this);this._oConfigDoable=o.on("/core/userPreferences/entries").do(this._processNewEntries.bind(this))},_fnOrientationChange:function(){var e=this.getView().byId("settingsApp");this._updateHeaderButtonVisibility(e.isMasterShown())},_formatDescription:function(e,t,n){if(t.length>1){return""}return n[e].valueResult||""},_processNewEntries:function(e){var t=this.getView();var n=t.getModel("results");e.forEach(function(e){var t=n.getProperty("/entries/"+e.id);if(!t){n.setProperty("/entries/"+e.id,{valueResult:null,contentResult:null})}this._setEntryValueResult(e.id)}.bind(this));var r=t.getModel();var s=t.byId("userSettingEntryList");var o=s.getSelectedItem();if(!i.system.phone&&!o){o=s.getItems()[0]}if(o){var a=o.getBindingContextPath();var l=r.getProperty(a);this._aPreviouslySelectedItems=l.tabs.map(function(e){return e.id})}r.setProperty("/entries",this._calculateEntryGroups(e));t.byId("userSettingEntryList").invalidate()},_calculateEntryGroups:function(e){var t=[];var n=new Map;var r=this.getView().getModel("results");e.forEach(function(e){if(e.visible===false){var s=r.getProperty("/entries/"+e.id+"/contentResult");if(s){this.getView().byId("settingsApp").removeDetailPage(s);r.setProperty("/entries/"+e.id+"/contentResult",null)}var i=a.last("UserSettingsOpened")||{};delete i[e.id];a.emit("UserSettingsOpened",i);return}if(e.groupingEnablement){r.setProperty("/entries/"+e.id+"/contentResult",null);var o=n.get(e.groupingId);if(o||o===0){t[o].tabs.push(e);return}n.set(e.groupingId,t.length)}e.tabs=[e];t.push(e)}.bind(this));return t},_afterClose:function(){if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("userActionsMenuHeaderButton").focus()}},_listAfterRendering:function(){var e=this.getView();var t=e.getModel();var n=e.byId("userSettingEntryList");var r=n.getItems();r.forEach(function(e){var n=t.getProperty(e.getBindingContextPath()+"/id");this._setEntryValueResult(n)}.bind(this));if(this._aPreviouslySelectedItems){for(var s=0;s<this._aPreviouslySelectedItems.length;s++){for(var i=0;i<r.length;i++){var o=r[i];if(t.getProperty(o.getBindingContextPath()+"/id")===this._aPreviouslySelectedItems[s]){n.setSelectedItem(o);this._toDetail(o);o.focus();return}}}}var a=r[0];if(a){n.setSelectedItem(a);this._toDetail(a);a.focus()}},_setEntryValueResult:function(t){var n;var r=this.getView().getModel("results");var s=o.last("/core/userPreferences/entries");var i=s.findIndex(function(e){return e.id===t});if(i===-1){return Promise.resolve()}return Promise.resolve().then(function(){var a=s[i].title;var u=s[i].valueArgument;if(typeof u!=="function"){var d=r.getProperty("/entries/"+t+"/valueResult");if(d!==null&&d!==undefined){return d}return u}n=h(r.getProperty("/entries"));n[t].valueResult=l.i18n.getText("genericLoading");r.setProperty("/entries",n);return Promise.resolve().then(u).then(function(e){if(typeof e!=="object"){return e}if(e&&e.value!==undefined){s=o.last("/core/userPreferences/entries");i=s.findIndex(function(e){return e.id===t});if(i>-1){s[i].visible=!!e.value;o.emit("/core/userPreferences/entries",s)}}return e.displayText}).catch(function(t){e.error("Can not load value for "+a+" entry",t);return l.i18n.getText("loadingErrorMessage")})}).then(function(e){n=h(r.getProperty("/entries"));n[t].valueResult=e||"";r.setProperty("/entries",n)})},_navBackButtonPressHandler:function(){var e=this.getView().byId("settingsApp");e.backDetail();this._updateHeaderButtonVisibility(true)},_navToggleButtonPressHandler:function(){var e=this.getView().byId("settingsApp"),t=e.isMasterShown();if(t){e.hideMaster()}else{e.showMaster()}this._updateHeaderButtonVisibility(!t)},_updateHeaderButtonVisibility:function(e){if(i.system.phone){var t=this.getView().byId("userSettingsNavBackButton");t.setVisible(!e)}else{var n=this.getView().byId("userSettingsMenuButton");if(i.orientation.portrait){n.setVisible(true);n.setPressed(e);n.setTooltip(l.i18n.getText(e?"ToggleButtonHide":"ToggleButtonShow"))}else{n.setVisible(false)}}},_itemPress:function(e){this._toDetail(e.getSource().getSelectedItem())},_toDetail:function(e){var t=this.getView();var n=t.getModel();var r=t.getModel("results");var s=e.getBindingContextPath();var a=n.getProperty(s);var l=a.id;var u=r.getProperty("/entries/"+l+"/contentResult");if(a.tabs){this._aPreviouslySelectedItems=a.tabs.map(function(e){return e.id})}else{this._aPreviouslySelectedItems=[l]}if(i.system.phone){e.setSelected(false)}if(u){this._navToDetail(u,t);var d=a.tabs.map(function(e){return e.id}).join("-");var c=this._mLoadedWrappers.get(d);if(c){c.then(function(e){var t=e.getContent()[1];var n=t.getSelectedKey();var r=t.getItems();var s=r.findIndex(function(e){return e.getId()===n});if(s===-1){s=0}this._emitEntryOpened(a.tabs[s].id)}.bind(this));return Promise.resolve()}}return Promise.all([this._createContentWrapper(a),this._createEntryContent(a)]).then(function(e){var n=o.last("/core/userPreferences/entries");var s=n.some(function(e){return e.id===l&&e.visible!==false});if(!s){return}var i=e[0];var u=e[1];this.getView().byId("settingsApp").addDetailPage(i);if(a.tabs.length>1){i.getContent()[1].getItems()[0].addContent(u)}else{i.addContent(u)}var d=i.getId();r.setProperty("/entries/"+l+"/contentResult",d);this._navToDetail(d,t);this._emitEntryOpened(l);return i.getId()}.bind(this))},_createEntryContent:function(e){if(!this._mLoadedEntryContent.get(e.id)){if(typeof e.contentFunc==="function"){this._mLoadedEntryContent.set(e.id,new Promise(function(t){e.contentFunc().then(function(e){if(g.isA(e,"sap.ui.core.Control")){t(e)}else{this._createErrorContent(l.i18n.getText("loadingErrorMessage")).then(t)}}.bind(this)).catch(function(){this._createErrorContent(l.i18n.getText("loadingErrorMessage")).then(t)}.bind(this))}.bind(this)))}else{this._mLoadedEntryContent.set(e.id,this._createErrorContent(l.i18n.getText("userSettings.noContent")))}}return this._mLoadedEntryContent.get(e.id)},_createContentWrapper:function(e){var n=e.tabs.map(function(e){return e.id});var i=n.join("-");if(!this._mLoadedWrappers.get(i)){this._mLoadedWrappers.set(i,r.load({name:"sap.ushell.components.shell.Settings.ContentWrapper",controller:{onTabSelected:function(n){var r=t.byId(n.getParameter("id"));var s=n.getParameter("item");var i=r.indexOfItem(s);var o=e.tabs[i];this._emitEntryOpened(o.id);this._createEntryContent(o).then(function(e){s.addContent(e)})}.bind(this)}}).then(function(t){t.setModel(new s({title:e.title,showHeader:!e.provideEmptyWrapper,tabs:e.tabs}),"entryInfo");return t}))}return this._mLoadedWrappers.get(i).then(function(t){var n=t.getContent()[1];var r=n.getSelectedKey();var s=n.getItems().findIndex(function(e){return e.getId()===r});if(s>-1){var i=e.tabs[s];this._emitEntryOpened(i.id)}return t}.bind(this))},_createErrorContent:function(e){return r.load({name:"sap.ushell.components.shell.Settings.ErrorContent"}).then(function(t){t.setModel(new s({errorMessage:e}));return t})},_navToDetail:function(e,t){var n=t.byId("settingsApp");n.toDetail(e);if(n.getMode()==="ShowHideMode"){n.hideMaster();this._updateHeaderButtonVisibility(false)}},_emitEntryOpened:function(e){var t=a.last("UserSettingsOpened")||{};t[e]=true;a.emit("UserSettingsOpened",t)},updateUserPreferences:function(){e.debug("[000] updateUserPreferences: ","UserSettings.controller");if(this._updateUserPreferencesPromise){return this._updateUserPreferencesPromise}var t,n;this._updateUserPreferencesPromise=new Promise(function(e,r){t=e;n=r});this._updateUserPreferencesPromise.sendRequest=function(){sap.ushell.Container.getServiceAsync("UserInfo").then(function(r){e.debug("[000] updateUserPreferences: sendRequest","UserSettings.controller");r.updateUserPreferences().done(t).fail(n).always(function(){e.debug("[000] updateUserPreferences: sendRequest: _updateUserPreferencesPromise","UserSettings.controller");this._updateUserPreferencesPromise=null}.bind(this))}.bind(this))}.bind(this);return this._updateUserPreferencesPromise},_maybeReload:function(t){var n=false;var r=false;var s=[];var i=[];t.forEach(function(e){if(e&&e.refresh){n=true}if(e&&e.noHash){r=true}if(e&&e.urlParams&&e.urlParams.length>0){s=s.concat(e.urlParams)}if(e&&e.obsoleteUrlParams&&e.obsoleteUrlParams.length>0){i=i.concat(e.obsoleteUrlParams)}});if(n){e.debug("[000]refresh browser with Parameters:",JSON.stringify(s),"UserSettings.controller");if(r){window.location=window.location.href.replace(window.location.hash,"")}else{u.refreshBrowser(s,i)}return true}},_handleSaveButtonPress:function(){d.removeErrorMessages();var t=this.getView().byId("userSettingsDialog");var n=o.last("/core/userPreferences/entries");var r=a.last("UserSettingsOpened")||{};if(Object.keys(r).length===0){this._handleSettingsDialogClose();this._showSuccessMessageToast();return Promise.resolve()}t.setBusy(true);var s=n.reduce(function(t,n){if(r[n.id]){e.debug("[000] _handleSaveButtonPress: oEntry.id: ",n.id,"UserSettings.controller");t.push(this._executeEntrySave(n))}return t}.bind(this),[]);e.debug("[000] _handleSaveButtonPress:_updateUserPreferencesPromise",this._updateUserPreferencesPromise,"UserSettings.controller");if(this._updateUserPreferencesPromise){this._updateUserPreferencesPromise.sendRequest()}return Promise.all(s).then(function(n){e.debug("[000] _handleSaveButtonPress: then save aResults",JSON.stringify(n),"UserSettings.controller");var r=d.filterMessagesToDisplay();var s={};var i="";var o="";t.setBusy(false);this._handleSettingsDialogClose();if(r.length>0){s=r[0];i=s.getDescription();a.emit("UserSettingsOpened",null);r.forEach(function(e){o+="Entry: "+e.getAdditionalText()+" - Error message: "+e.getDescription()+"\n"});e.error("Failed to save the following entries",o);if(this._maybeReload(n)){return}return sap.ushell.Container.getServiceAsync("Message").then(function(e){e.init();e.show(e.Type.ERROR,l.i18n.getText("userSettings.SavingError.SomeChanges"),{details:i})})}this._showSuccessMessageToast();a.emit("UserSettingsOpened",null);this._maybeReload(n)}.bind(this))},_executeEntrySave:function(t){var n,r;function s(e){return e||{}}function i(n){e.debug("[000] _onError: errorInformation",JSON.stringify(n),"UserSettings.controller");var r;var s=t.id;var i=t.title;if(!n){r=l.i18n.getText("userSettings.SavingError.Undefined")}else if(typeof n==="string"){r=n}else if(Array.isArray(n)){n.forEach(function(e){e.setAdditionalText(i);e.setTechnicalDetails({pluginId:s});d.addMessage(e)});return}else if(g.isA(n,"sap.ui.core.message.Message")){n.setAdditionalText(i);n.setTechnicalDetails({pluginId:s});d.addMessage(n);return}else{r=l.i18n.getText("userSettings.SavingError.WithMessage",n.message)}d.addMessage(new c({type:p.Error,additionalText:i,technicalDetails:{pluginId:s},description:r,message:r}))}try{e.debug("[000] onSave: oEntry.id: "+t.id,"UserSettings.controller");this._isExecuteEntrySavedInUserSettingsController=true;n=t.onSave(this.updateUserPreferences.bind(this))}catch(e){return i(e)}if(n){if(n.promise){e.warning("jQuery.promise is used to save "+t.title+" settings entry.\n"+"The using of jQuery.promise for onSave is deprecated. Please use the native promise instead.");r=new Promise(function(e){n.done(function(t){e(s(t))}).fail(function(t){e(i(t))})})}else{r=n.then(s).catch(i)}}else{r=Promise.resolve();e.warning(t.title+" settings might not be saved correctly, it seems like the API contract is not correctly fullfilled.\n"+"Please contact the owner of the setting.")}return r},_showSuccessMessageToast:function(){sap.ui.require(["sap/m/MessageToast"],function(e){var t=l.i18n.getText("savedChanges");e.show(t,{offset:"0 -50"})})},_handleCancel:function(){var t=o.last("/core/userPreferences/entries");var n=a.last("UserSettingsOpened")||{};if(n){t.forEach(function(t){if(n[t.id]&&t.onCancel){try{t.onCancel()}catch(t){e.error("Failed to cancel the following entries",t)}}})}a.emit("UserSettingsOpened",null);this._handleSettingsDialogClose()},_handleSettingsDialogClose:function(){sap.ushell.Container.getUser().resetChangedProperties();if(i.system.phone){this.getView().byId("settingsApp").toMaster("settingsView--userSettingMaster")}this.getView().byId("userSettingsMessagePopoverBtn").setVisible(false);this.getView().byId("userSettingsDialog").close()},onExit:function(){this._oConfigDoable.off();i.orientation.detachHandler(this._fnOrientationChange,this)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/appearance/Appearance.controller", ["sap/base/Log","sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/library","sap/ui/core/message/Message","sap/ui/core/mvc/Controller","sap/ui/core/theming/Parameters","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/services/DarkModeSupport","sap/ushell/User"],function(e,t,o,n,r,s,i,a,l,jQuery,h,c,d,u,p){"use strict";var g=n.MessageType;function f(t){switch(t){case"sap_fiori_3":case"sap_fiori_3_dark":return"SAP Quartz";case"sap_horizon":case"sap_horizon_dark":return"SAP Horizon";case"sap_fiori_3_hcb":case"sap_fiori_3_hcw":return d.i18n.getText("AppearanceHighContrastTheme","SAP Quartz");case"sap_horizon_hcb":case"sap_horizon_hcw":return d.i18n.getText("AppearanceHighContrastTheme","SAP Horizon");default:e.error("Can not find common name for the theme",t);return t||""}}var m={base:"sapUshellBaseIconStyle",sap_bluecrystal:"sapUshellBlueCrystalIconStyle",sap_belize_hcb:"sapUshellHCBIconStyle sapUshellHCBIconStyleOnHCB",sap_belize_hcw:"sapUshellHCWIconStyle sapUshellHCWIconStyleOnHCW",sap_belize:"sapUshellBelizeIconStyle",sap_belize_plus:"sapUshellPlusIconStyle",sap_fiori_3_hcb:"sapUshellQuartzHCBIconStyle sapUshellHCBIconStyleOnHCB",sap_fiori_3_hcw:"sapUshellQuartzHCWIconStyle sapUshellHCWIconStyleOnHCW",sap_fiori_3:"sapUshellQuartzLightIconStyle",sap_fiori_3_dark:"sapUshellQuartzDarkIconStyle",sap_horizon_hcb:"sapUshellHorizonHCBIconStyle sapUshellHCBIconStyleOnHCB",sap_horizon_hcw:"sapUshellHorizonHCWIconStyle sapUshellHCWIconStyleOnHCW",sap_horizon:"sapUshellHorizonLightIconStyle",sap_horizon_dark:"sapUshellHorizonDarkIconStyle"};return s.extend("sap.ushell.components.shell.Settings.appearance.Appearance",{TILE_SIZE:{Small:0,Responsive:1,getName:function(e){return Object.keys(this)[e]}},onInit:function(){var e=this.getView();this.oUser=sap.ushell.Container.getUser();this.aThemeListFromServer=e.getViewData().themeList||[];this.oPersonalizers={};var t=d.getTranslationModel();e.setModel(t,"i18n");e.setModel(this.getConfigurationModel(),"config");sap.ui.getCore().attachThemeChanged(this._handleThemeApplied,this);return this.getDarkModeModel(this.aThemeListFromServer).then(function(t){this._oDarkModeModel=t;e.setModel(this._oDarkModeModel,"darkMode");var o=this.oUser.getTheme();e.setModel(new l({options:this._getThemeListData(this.aThemeListFromServer,o),ariaTexts:{headerLabel:d.i18n.getText("Appearance")}}))}.bind(this))},onExit:function(){sap.ui.getCore().detachThemeChanged(this._handleThemeApplied,this)},_getSelectedTheme:function(){var e=this.getView().byId("themeList").getSelectedItem();var t=e?e.getBindingContext():null;return t?t.getProperty("id"):this.oUser.getTheme()},_getThemeListData:function(e,t){if(this.oUser.isSetThemePermitted()===false){var o=t;for(var n=0;n<e.length;n++){if(e[n].id===t){o=e[n].name||t;break}}return[{id:t,name:o}]}var r=this.getView().getModel("darkMode").getData();var s=this._isDarkModeActive();return e.reduce(function(e,o){var n={id:o.id,name:o.name||o.id||"",isVisible:true,isSelected:o.id===t,isSapTheme:!!m[o.id]};if(s&&r.supportedThemes[o.id]){var i=r.supportedThemes[o.id];if(i.complementaryTheme===t||o.id===t){n.isVisible=o.id===t}else{n.isVisible=i.mode===u.Mode.LIGHT}n.combineName=i.combineName}e.push(n);return e},[]).sort(function(e,t){var o=e.name.localeCompare(t.name);if(o===0){o=e.id.localeCompare(t.id)}return o})},getConfigurationModel:function(){return new l({themeConfigurable:h.last("/core/shell/model/setTheme"),sizeBehaviorConfigurable:h.last("/core/home/sizeBehaviorConfigurable"),tileSize:this.TILE_SIZE[h.last("/core/home/sizeBehavior")],contentDensityConfigurable:h.last("/core/shell/model/contentDensity")&&!a.system.phone,isCozyContentMode:document.body.classList.contains("sapUiSizeCozy"),sapUiContentIconColor:i.get("sapUiContentIconColor"),textAlign:a.system.phone?"Left":"Right",showContentProviderInfoOnVisualizationsConfigurable:h.last("/core/contentProviders/providerInfo/enabled")&&h.last("/core/contentProviders/providerInfo/userConfigurable"),showContentProviderInfoOnVisualizationsSelected:h.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations")})},getDarkModeModel:function(e){var t=new l({});var o={enabled:false,detectionSupported:false,detectionEnabled:false,supportedThemes:{}};var n;if(h.last("/core/darkMode/enabled")){n=sap.ushell.Container.getServiceAsync("DarkModeSupport").then(function(n){o.enabled=true;o.detectionSupported=n.canAutomaticallyToggleDarkMode();o.detectionEnabled=o.detectionSupported&&this.oUser.getDetectDarkMode();o.supportedThemes=this._getSupportedDarkModeThemes(e,h.last("/core/darkMode/supportedThemes")||[]);t.setData(o);return t}.bind(this))}else{t.setData(o);n=Promise.resolve(t)}return n},_getSupportedDarkModeThemes:function(e,t){var o=e.reduce(function(e,t){e[t.id]=t.name;return e},{});return t.reduce(function(e,t){var n=t.light;var r=t.dark;var s=o[n];var i=o[r];if(s&&i&&!e[n]&&!e[r]){var a=f(n);e[n]={mode:u.Mode.LIGHT,complementaryTheme:r,combineName:a};e[r]={mode:u.Mode.DARK,complementaryTheme:n,combineName:a}}return e},{})},onAfterRendering:function(){var e=this._isDarkModeActive();var t=this.getView().getModel("config").getProperty("/themeConfigurable");var o=this.getView().byId("themeList");var n=o.getItems();o.toggleStyleClass("sapUshellThemeListDisabled",!t);n.forEach(function(t){var o=t.getCustomData()[0].getValue();var n=t.getContent()[0].getItems()[0].getItems()[0];if(m[o]){n.addStyleClass(m[o])}n.toggleStyleClass("sapUshellDarkMode",e)})},_handleThemeApplied:function(){var e=this.getView().getModel("config");if(e){e.setProperty("/sapUiContentIconColor",i.get("sapUiContentIconColor"));var t=this.oUser.getTheme();var o=this._getThemeListData(this.aThemeListFromServer,t);this.getView().getModel().setProperty("/options",o)}},onCancel:function(){var e=this.getView().getModel("config");if(e.getProperty("/themeConfigurable")){var t=this.oUser.getTheme();var o=this.getView().getModel().getProperty("/options");o.forEach(function(e){e.isSelected=t===e.id});this.getView().getModel().setProperty("/options",o)}if(e.getProperty("/showContentProviderInfoOnVisualizationsConfigurable")){e.setProperty("/showContentProviderInfoOnVisualizationsSelected",h.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations"))}if(e.getProperty("/contentDensityConfigurable")){e.setProperty("/isCozyContentMode",this.oUser.getContentDensity()==="cozy")}if(e.getProperty("/sizeBehaviorConfigurable")){e.setProperty("/tileSize",this.TILE_SIZE[h.last("/core/home/sizeBehavior")])}if(this._oDarkModeModel&&this._oDarkModeModel.getProperty("/enabled")){this._oDarkModeModel.setProperty("/detectionEnabled",this.oUser.getDetectDarkMode());this.oUser.resetChangedProperty("detectDarkMode")}},onSave:function(e){this._updateUserPreferences=e;var o=this.getView().getModel("config");var n=[];if(o.getProperty("/themeConfigurable")){n.push(this.onSaveThemes().then(function(){c.emit("themeChanged",Date.now())}))}if(o.getProperty("/showContentProviderInfoOnVisualizationsConfigurable")){n.push(this.onSaveShowContentProviderInfoOnVisualizations())}if(o.getProperty("/contentDensityConfigurable")){n.push(this.onSaveContentDensity())}if(o.getProperty("/sizeBehaviorConfigurable")){n.push(this.onSaveTileSize())}if(this._oDarkModeModel&&this._oDarkModeModel.getProperty("/enabled")){n.push(this.onSaveDarkModeEnabled())}return Promise.all(n).then(function(e){var o=[];e.forEach(function(e){if(e&&t.isA(e,"sap.ui.core.message.Message")){o.push(e)}});return o.length>0?Promise.reject(o):Promise.resolve()})},onSaveThemesSuccess:function(e){e.resetChangedProperty("theme");return this._applyDarkMode()},onSaveThemes:function(){var t=this.getView().getModel("config");var o=this._getSelectedTheme();var n=this.oUser;var s=n.getTheme(p.prototype.constants.themeFormat.ORIGINAL_THEME);if(o&&o!==s&&t.getProperty("/themeConfigurable")){n.setTheme(o);return this._updateUserPreferences(n).then(function(){return this.onSaveThemesSuccess(n)}.bind(this)).catch(function(t){if(!t.includes("THEME")){return this.onSaveThemesSuccess(n)}n.setTheme(s);n.resetChangedProperty("theme");e.error("Can not save selected theme",t);throw new r({type:g.Error,description:t})}.bind(this))}return Promise.resolve()},_onSaveContentDensitySuccess:function(e){var t=this.oUser;t.resetChangedProperty("contentDensity");sap.ui.getCore().getEventBus().publish("launchpad","toggleContentDensity",{contentDensity:e});c.emit("toggleContentDensity",{contentDensity:e});return new Promise(function(e){c.once("toggleContentDensity").do(function(){e()})})},onSaveContentDensity:function(){var t=this.getView().getModel("config");var o=this.oUser;var n=t.getProperty("/isCozyContentMode")?"cozy":"compact";var s=o.getContentDensity();e.debug("[000] onSaveContentDensity","Appearance.controller");if(n!==s&&t.getProperty("/contentDensityConfigurable")){o.setContentDensity(n);e.debug("[000] onSaveContentDensity: sNewContentDensity",n,"Appearance.controller");return this._updateUserPreferences(o).then(function(){return this._onSaveContentDensitySuccess(n)}.bind(this)).catch(function(t){if(!t.includes("CONTENT_DENSITY")){return this._onSaveContentDensitySuccess()}o.setContentDensity(s);o.resetChangedProperty("contentDensity");e.error("Can not save content density configuration",t);throw new r({type:g.Error,message:t})}.bind(this))}return Promise.resolve()},onSaveTileSize:function(){var t=this.getView().getModel("config");var o=this.TILE_SIZE.getName(t.getProperty("/tileSize"));var n=h.last("/core/home/sizeBehavior");if(o&&o!==n&&t.getProperty("/sizeBehaviorConfigurable")){return new Promise(function(t,n){this.writeToPersonalization("flp.settings.FlpSettings","sizeBehavior",o).done(function(){h.emit("/core/home/sizeBehavior",o);if(o==="Responsive"){jQuery(".sapUshellTile").removeClass("sapUshellSmall")}else{jQuery(".sapUshellTile").addClass("sapUshellSmall")}t()}).fail(function(t,o){e.error("Cannot save tile size configuration",t);var s=new r({type:g.Error,description:t,message:o.message.value,date:o.innererror.timestamp,httpStatus:o.httpStatus});n(s)})}.bind(this))}return Promise.resolve()},onSaveDarkModeEnabledSuccess:function(e,t){return sap.ushell.Container.getServiceAsync("DarkModeSupport").then(function(o){e.resetChangedProperty("detectDarkMode");if(t){o.enableDarkModeBasedOnSystem()}else{o.disableDarkModeBasedOnSystem()}})},onSaveDarkModeEnabled:function(){var t=this._oDarkModeModel.getProperty("/detectionEnabled");var o=this.oUser.getDetectDarkMode();var n=this.oUser;if(t!==o){e.debug("[000] onSaveDarkModeEnabled: setDetectDarkModeEnabled",t,"Appearance.controller");n.setDetectDarkMode(t);return this._updateUserPreferences(this.oUser).then(function(){return this.onSaveDarkModeEnabledSuccess(n,t)}.bind(this)).catch(function(s){if(!s.includes("THEME_DARKMODE_AUTO_DETECTION")){return this.onSaveDarkModeEnabledSuccess(n,t)}n.setDetectDarkMode(o);n.resetChangedProperty("detectDarkMode");e.error("Can not save dark mode configuration",s);throw new r({message:s})}.bind(this))}return Promise.resolve()},onSaveShowContentProviderInfoOnVisualizations:function(){var t=h.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");var o=this.getView().getModel("config").getProperty("/showContentProviderInfoOnVisualizationsSelected");if(o===t){return Promise.resolve()}return new Promise(function(t,n){this.writeToPersonalization("flp.settings.FlpSettings","showContentProviderInfoOnVisualizations",o).done(function(){h.emit("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations",o);t()}).fail(function(t,o){e.error("Cannot save system info on tiles configuration",t);var s=new r({type:g.Error,description:t,message:o.message.value,date:o.innererror.timestamp,httpStatus:o.httpStatus});n(s)})}.bind(this))},writeToPersonalization:function(t,o,n){return jQuery.when(this.getPersonalizer(t,o).then(function(e){return e.setPersData(n)})).catch(function(t){e.error("Personalization service does not work:");e.error(t.name+": "+t.message)})},getPersonalizer:function(e,t){var n=e+"-"+t;if(this.oPersonalizers[n]){return Promise.resolve(this.oPersonalizers[n])}return sap.ushell.Container.getServiceAsync("Personalization").then(function(r){var s=o.getOwnerComponentFor(this.getView());var i={keyCategory:r.constants.keyCategory.FIXED_KEY,writeFrequency:r.constants.writeFrequency.LOW,clientStorageAllowed:true};if(!this.oPersonalizers[n]){this.oPersonalizers[n]=r.getPersonalizer({container:e,item:t},i,s)}return this.oPersonalizers[n]}.bind(this))},_applyDarkMode:function(){var e=this._oDarkModeModel;var t;if(e.getProperty("/enabled")&&e.getProperty("/detectionSupported")&&e.getProperty("/detectionEnabled")){t=sap.ushell.Container.getServiceAsync("DarkModeSupport").then(function(e){e._toggleDarkModeBasedOnSystemColorScheme()})}else{t=Promise.resolve()}return t},_isDarkModeActive:function(){var e=this._oDarkModeModel.getProperty("/");return e.enabled&&e.detectionSupported&&e.detectionEnabled},changeSystemModeDetection:function(){var e=this._getSelectedTheme();this.getView().getModel().setProperty("/options",this._getThemeListData(this.aThemeListFromServer,e));this.getView().invalidate()}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/appearance/AppearanceEntry", ["sap/ui/core/mvc/XMLView","sap/base/Log","sap/ushell/resources"],function(e,n,t){"use strict";var r;function i(){if(r){return Promise.resolve(r)}return sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){return new Promise(function(t){e.getThemeList().done(function(e){r=e.options||[];t(r)}).fail(function(){n.error("Failed to load theme list.");t([])})})})}function a(){var r;var a={id:"themes",entryHelpID:"themes",title:t.i18n.getText("Appearance"),valueResult:null,contentResult:null,icon:"sap-icon://palette",valueArgument:function(){return i().then(function(e){var n=sap.ushell.Container.getUser().getTheme(),t="";for(var r=0;r<e.length;r++){if(e[r].id===n){t=e[r].name||"";break}}return t})},contentFunc:function(){return i().then(function(n){return e.create({id:"userPrefThemeSelector",viewName:"sap.ushell.components.shell.Settings.appearance.Appearance",viewData:{themeList:n}})}).then(function(e){r=e;return e})},onSave:function(e){if(r){return r.getController().onSave(e)}n.warning("Save operation for appearance settings was not executed, because the userPrefThemeSelector view was not initialized");return Promise.resolve()},onCancel:function(){if(r){r.getController().onCancel();return}n.warning("Cancel operation for appearance settings was not executed, because the userPrefThemeSelector view was not initialized")}};return a}return{getEntry:a}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/homepage/HomepageEntry", ["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ushell/resources"],function(e,t,n,o,a,i){"use strict";var r={scroll:0,tabs:1,getName:function(e){return Object.keys(this)[e]}};return{getEntry:function(){var s;return{id:"homepageEntry",entryHelpID:"homepageEntry",title:i.i18n.getText("FlpSettings_entry_title"),valueResult:null,contentResult:null,icon:"sap-icon://home",valueArgument:null,contentFunc:function(){var l;return o.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings").then(function(e){l=e;return t.create({id:"UserSettingsHomepageSettingsView",viewName:"sap.ushell.components.shell.Settings.homepage.HomepageSetting"})}).then(function(e){s=e;s.setModel(new n({displayMode:r[l]||r.scroll,personalisationEnabled:a.last("/core/shell/enablePersonalization")}));s.setModel(i.getTranslationModel(),"i18n");return s}).catch(function(t){e.error("Failed to get effective hompage setting.",t,"sap.ushell.components.ushell.settings.homepage.HomepageEntry");return Promise.reject()})},onSave:function(){if(s){var t=s.getModel().getProperty("/displayMode"),n=r.getName(t),i=sap.ushell.Container.getRenderer("fiori2");return o.getPersonalizer("homePageGroupDisplay",i).then(function(t){return new Promise(function(o,i){t.setPersData(n).done(function(){a.emit("/core/home/homePageGroupDisplay",n);o()}).fail(function(t){e.error("Failed to save the anchor bar mode in personalization",t,"sap.ushell.components.ushell.settings.homepage.HomepageEntry");i()})})})}e.warning("Save operation for user account settings was not executed, because the homepage view was not initialized");return Promise.resolve()},onCancel:function(){if(s){return}e.warning("Cancel operation for user account settings was not executed, because the homepage view was not initialized")},provideEmptyWrapper:false}}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/notifications/NotificationsEntry", ["sap/ui/core/mvc/XMLView","sap/base/Log","sap/ushell/Config","sap/ushell/resources"],function(n,t,e,i){"use strict";function o(){var e="notificationsSetting",o="sap.ushell.components.shell.Settings.notifications.NotificationsSetting",s;return{id:"notificationsEntry",entryHelpID:"notificationsEntry",title:i.i18n.getText("notificationSettingsEntry_title"),valueResult:null,contentResult:null,icon:"sap-icon://bell",valueArgument:null,contentFunc:function(){return n.create({id:e,viewName:o}).then(function(n){s=n;return n})},onSave:function(){if(s){return s.getController().onSave()}t.warning("Save operation for user account settings was not executed, because the notifications view was not initialized");return Promise.resolve()},onCancel:function(){if(s){s.getController().onCancel();return}t.warning("Cancel operation for user account settings was not executed, because the notifications view was not initialized")}}}return{getEntry:o}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/notifications/NotificationsSetting.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/base/Log","sap/ushell/resources","sap/base/util/deepClone","sap/ui/thirdparty/jquery"],function(e,t,i,o,n,r,jQuery){"use strict";return e.extend("sap.ushell.components.shell.Settings.notifications.NotificationsSetting",{onInit:function(){this._oModel=new t({rows:[],originalRows:[]});var e=this.getView(),i;e.setBusy(true);e.setModel(n.getTranslationModel(),"i18n");sap.ushell.Container.getServiceAsync("Notifications").then(function(t){this._oNotificationService=t;this._initializeFlags();t.readSettings().done(function(e){i=JSON.parse(e);this._oModel.setProperty("/rows",i.value);this._oModel.setProperty("/originalRows",r(i.value))}.bind(this)).always(function(){e.setBusy(false);e.setModel(this._oModel)}.bind(this))}.bind(this))},onAfterRendering:function(){var e=this._oModel.getProperty("/flags"),t=this._oModel.getProperty("/rows");if(t!==undefined){this._oModel.setProperty("/originalRows",r(t))}if(e!==undefined){this._oModel.setProperty("/originalFlags/highPriorityBannerEnabled",e.highPriorityBannerEnabled)}},onCancel:function(){var e=this._oModel.getProperty("/originalFlags"),t=this._oModel.getProperty("/originalRows");this._oModel.setProperty("/flags/highPriorityBannerEnabled",e.highPriorityBannerEnabled);this._oModel.setProperty("/rows",r(t));this._oModel.setProperty("/originalFlags",{});this._oModel.setProperty("/originalRows",[])},onSave:function(){var e=this._oModel.getProperty("/rows"),t=this._oModel.getProperty("/originalRows"),i,n,r=[],s=[];for(var a=0;a<e.length;a++){i=e[a];n=t[a];if(this._notficationSettingsDiffer(i,n)){r.push(i)}}if(this._flagsHaveChanged()){this._handleFlagsSave()}if(r.length){r.forEach(function(e){s.push(this._oNotificationService.saveSettingsEntry(e))}.bind(this));return new Promise(function(e,t){jQuery.when.apply(jQuery,s).done(function(){e()}).fail(function(e){o.error("Failed to save the notification settings in the notifivation service.",e,"sap.ushell.components.ushell.settings.notifications.NotificationsSetting");t(e)})})}return Promise.resolve()},_flagsHaveChanged:function(){return this._oModel.getProperty("/flags/highPriorityBannerEnabled")!==this._oModel.getProperty("/originalFlags/highPriorityBannerEnabled")},_handleFlagsSave:function(){var e=this._oModel.getProperty("/flags/highPriorityBannerEnabled");this._oModel.setProperty("/originalFlags/highPriorityBannerEnabled",e);this._oNotificationService.setUserSettingsFlags({highPriorityBannerEnabled:e})},_notficationSettingsDiffer:function(e,t){return e.NotificationTypeId!==t.NotificationTypeId||e.PriorityDefault!==t.PriorityDefault||e.DoNotDeliver!==t.DoNotDeliver||e.DoNotDeliverMob!==t.DoNotDeliverMob||e.DoNotDeliverEmail!==t.DoNotDeliverEmail},onSelectMobile:function(e){var t=e.getSource().getBindingContext().getPath();this._oModel.setProperty(t+"/DoNotDeliverMob",!e.getParameter("selected"))},onSelectEmail:function(e){var t=e.getSource().getBindingContext().getPath();this._oModel.setProperty(t+"/DoNotDeliverEmail",!e.getParameter("selected"))},onSelectHighPriority:function(e){var t=e.getSource().getBindingContext().getPath();if(e.getParameter("selected")){this._oModel.setProperty(t+"/PriorityDefault","HIGH")}else{this._oModel.setProperty(t+"/PriorityDefault","")}},onEnableSwitchChange:function(e){var t=e.getParameter("state"),i=e.getSource().getBindingContext().getPath();this._oModel.setProperty(i+"/DoNotDeliver",!t)},_initializeFlags:function(){var e=this._oNotificationService.getUserSettingsFlags(),t=this._oNotificationService._getNotificationSettingsMobileSupport(),i=this._oNotificationService._getNotificationSettingsEmailSupport();e.done(function(e){this._oModel.setProperty("/flags",{});this._oModel.setProperty("/flags/highPriorityBannerEnabled",e.highPriorityBannerEnabled);this._oModel.setProperty("/flags/mobileNotificationsEnabled",t);this._oModel.setProperty("/flags/emailNotificationsEnabled",i);this._oModel.setProperty("/originalFlags",{});this._oModel.setProperty("/originalFlags/highPriorityBannerEnabled",e.highPriorityBannerEnabled)}.bind(this))}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/search/Search.controller", ["sap/ui/core/mvc/View","sap/ui/core/mvc/Controller"],function(e,n){"use strict";return n.extend("sap.ushell.components.shell.Settings.search.Search",{onInit:function(){this._loadContent()},_loadContent:function(){var n=this.getView().byId("searchContent");e.create({id:"searchPrefsDialogView",viewName:"module:sap/esh/search/ui/userpref/SearchPrefsDialog.view"}).then(function(e){n.addItem(e)})},onCancel:function(){this.oView.getModel().cancelPreferences()},onSave:function(){return this.oView.getModel().savePreferences()}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/search/SearchEntry", ["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ushell/resources"],function(e,n,r){"use strict";var t=null;function i(){if(t){return t}t=sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){return new Promise(function(e,n){sap.ui.require(["sap/esh/search/ui/userpref/SearchPrefsModel","sap/esh/search/ui/SearchShellHelperAndModuleLoader"],function(n,r){e(new n)})})});return t}function s(){return i().then(function(t){var i;var s={id:"search",entryHelpID:"search",title:r.i18n.getText("searchSetting"),valueResult:null,contentResult:null,icon:"sap-icon://search",isActive:t.isSearchPrefsActive.bind(t),valueArgument:function(){return t.isMultiProvider().then(function(e){if(e){return{value:1,displayText:""}}return t.isPersonalizedSearchActive().then(function(e){return{value:1,displayText:e?r.i18n.getText("sp.persSearchOn"):r.i18n.getText("sp.persSearchOff")}})})},contentFunc:function(){return t.asyncInit().then(function(){return n.create({id:"searchView",viewName:"sap.ushell.components.shell.Settings.search.Search"})}).then(function(e){e.setModel(t);i=e;return e})},onSave:function(){if(i){return i.getController().onSave()}e.warning("Save operation for search settings was not executed, because the search view was not initialized");return Promise.resolve()},onCancel:function(){if(i){i.getController().onCancel();return}e.warning("Cancel operation for search settings was not executed, because the search view was not initialized")},provideEmptyWrapper:false};return s})}return{getEntry:s}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/spaces/SpacesEntry", ["sap/base/Log","sap/ui/core/mvc/View","sap/ushell/resources","sap/ushell/Config","sap/ushell/utils"],function(e,n,t,s,r){"use strict";function a(){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){var n=e.getUser().getShowMyHome();return t.i18n.getText(n?"settingsMyHomeShown":"settingsMyHomeHidden")})}function i(){var e=s.last("/core/spaces/enabled")&&s.last("/core/spaces/myHome/enabled")&&!s.last("/core/homeApp/enabled");return e?a:null}return{isRelevant:function(){if(s.last("/core/spaces/configurable")){return true}if(s.last("/core/spaces/enabled")){if(s.last("/core/spaces/hideEmptySpaces/enabled")){return true}var e=s.last("/core/spaces/myHome/enabled");var n=s.last("/core/homeApp/enabled");if(e&&!n){return true}}return false},getEntry:function(){var s;return{id:"spacesEntry",entryHelpID:"spaces",title:t.i18n.getText("spaces"),valueResult:null,contentResult:null,icon:"sap-icon://home",valueArgument:i(),contentFunc:function(){return Promise.all([sap.ushell.Container.getServiceAsync("UserInfo"),r.getHideEmptySpacesEnabled()]).then(function(e){var t=e[0];return n.create({id:"UserSettingsSpacesSettingsView",viewName:"sap.ushell.components.shell.Settings.spaces.SpacesSetting",type:"XML",viewData:{UserInfo:t}})}).then(function(e){s=e;return s})},onSave:function(n){if(s){return s.getController().onSave(n)}e.warning("Save operation for user account settings was not executed, because the spaces view was not initialized");return Promise.resolve()},onCancel:function(){if(s){s.getController().onCancel();return}e.warning("Cancel operation for user account settings was not executed, because the spaces view was not initialized")},provideEmptyWrapper:false,_setViewInstance:function(e){s=e},_getViewInstance:function(){return s}}}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/spaces/SpacesSetting.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/resources","sap/ushell/utils","sap/base/Log"],function(e,s,t,r,o,a,n){"use strict";return e.extend("sap.ushell.components.shell.Settings.spaces.SpacesSetting",{onInit:function(){var e=this.getView().getViewData();this.oUserInfoService=e.UserInfo;var a=this.oUserInfoService.getUser();var n=r.last("/core/spaces/enabled");var i=r.last("/core/homeApp/enabled");var p=r.last("/core/spaces/myHome/enabled");var l=n&&p&&!i;var c=a.getShowMyHome();var d=a.getImportBookmarksFlag();var m=d!=="done"&&d!=="not_required";var h=new s({spaces:{visible:r.last("/core/spaces/configurable"),selected:n},hideEmptySpaces:{visible:n&&r.last("/core/spaces/hideEmptySpaces/enabled"),selected:r.last("/core/spaces/hideEmptySpaces/userEnabled")},showMyHome:{visible:l,selected:c},showMyHomeImport:{visible:l&&c&&m,selected:d==="pending"}});this.getView().setModel(h);this.getView().setModel(o.getTranslationModel(),"i18n");this.oImportBookmarksFlagListener=t.on("importBookmarksFlag").do(this._setMyHomeImportSelected.bind(this))},_setMyHomeImportSelected:function(e){var s=this.getView().getModel();s.setProperty("/showMyHomeImport/selected",e)},onExit:function(){this.oImportBookmarksFlagListener.off()},onSave:function(e){var s=false;var o=false;var i=[];var p=this.getView().getModel();var l=this.oUserInfoService;var c=l.getUser();var d=r.last("/core/spaces/enabled");var m=p.getProperty("/spaces/selected");var h=r.last("/core/spaces/hideEmptySpaces/userEnabled");var g=p.getProperty("/hideEmptySpaces/selected");var y=c.getShowMyHome();var u=p.getProperty("/showMyHome/selected");var v=c.getImportBookmarksFlag()==="pending";var f=p.getProperty("/showMyHomeImport/selected");if(d!==m){c.setChangedProperties({propertyName:"spacesEnabled",name:"SPACES_ENABLEMENT"},d,m);o=true;s=true}if(y!==u){c.setShowMyHome(u);o=true;s=true}if(v!==f){var E=f?"pending":"dismissed";c.setImportBookmarksFlag(E);o=true;if(!s){t.emit("importBookmarksFlag",f)}}if(h!==g){var M=a.setHideEmptySpacesEnabled(g).catch(function(e){p.setProperty("/hideEmptySpaces/selected",h);return Promise.reject(e)});i.push(M)}if(!o&&!i.length){return Promise.resolve()}n.debug("[000] SpacesSetting.controller.save");if(o){var S=new Promise(function(s,t){e().then(function(){c.resetChangedProperty("spacesEnabled");c.resetChangedProperty("showMyHome");c.resetChangedProperty("importBookmarks");s()}).catch(function(e){if(!e.includes("SPACES_ENABLEMENT")&&!e.includes("MYHOME_ENABLEMENT")&&!e.includes("MYHOME_IMPORT_FROM_CLASSIC")){c.resetChangedProperty("spacesEnabled");c.resetChangedProperty("showMyHome");c.resetChangedProperty("importBookmarks");s()}else{p.setProperty("/spaces/selected",d);p.setProperty("/showMyHome/selected",y);c.resetChangedProperty("spacesEnabled");c.resetChangedProperty("showMyHome");c.resetChangedProperty("importBookmarks");t(e)}})});i.push(S)}return Promise.all(i).then(function(){return{refresh:s,noHash:true}})},onCancel:function(){var e=this.getView().getModel();e.setProperty("/spaces/selected",r.last("/core/spaces/enabled"));e.setProperty("/showMyHome/selected",this.oUserInfoService.getUser().getShowMyHome());e.setProperty("/hideEmptySpaces/selected",r.last("/core/spaces/hideEmptySpaces/userEnabled"))}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userAccount/UserAccountEntry", ["sap/ui/core/mvc/XMLView","sap/base/Log","sap/ushell/Config","sap/ushell/resources"],function(e,n,t,r){"use strict";function o(){var o=sap.ushell.Container.getRenderer("fiori2").getShellConfig(),u=o.enableUserImgConsent;var s=u?"userAccountSelector":"userAccountSetting";var c=u?"sap.ushell.components.shell.Settings.userAccount.UserAccountSelector":"sap.ushell.components.shell.Settings.userAccount.UserAccountSetting";var a=t.last("/core/shell/model/userImage/account")||"sap-icon://account";var i;var l={id:"userAccountEntry",entryHelpID:"userAccountEntry",title:r.i18n.getText("UserAccountFld"),valueResult:null,contentResult:null,icon:a,valueArgument:sap.ushell.Container.getUser().getFullName(),contentFunc:function(){return e.create({id:s,viewName:c}).then(function(e){i=e;return e})},onSave:function(e){if(i){return i.getController().onSave(e)}n.warning("Save operation for user account settings was not executed, because the userAccount view was not initialized");return Promise.resolve()},onCancel:function(){if(i){i.getController().onCancel();return}n.warning("Cancel operation for user account settings was not executed, because the userAccount view was not initialized")},provideEmptyWrapper:true};return l}return{getEntry:o}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userAccount/UserAccountSelector.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/base/Log","sap/ushell/Config","sap/ushell/resources","sap/m/MessageBox","sap/m/MessageToast","sap/ushell/utils","sap/ushell/utils/WindowUtils"],function(e,n,t,s,o,i,r,a,l){"use strict";return e.extend("sap.ushell.components.shell.Settings.userAccount.UserAccountSelector",{onInit:function(){var e=sap.ushell.Container.getRenderer("fiori2").getShellConfig(),n=e.enableUserImgConsent;this.imgConsentEnabled=n||false;this.oUser=sap.ushell.Container.getUser();var i=o.getTranslationModel();var r=this.getConfigurationModel();this.getView().setModel(i,"i18n");this.getView().setModel(r,"config");this.oUser.attachOnSetImage(function(){r.setProperty("/icon",s.last("/core/shell/model/userImage/personPlaceHolder"))});sap.ushell.Container.getServiceAsync("Personalization").then(function(e){return e.isResetEntirePersonalizationSupported().then(function(e){if(!e){r.setProperty("/isResetPersonalizationVisible",false)}})}).catch(function(e){t.error("The personalization service could not be loaded because of: ."+e.toString())})},getConfigurationModel:function(){var e=new n({}),t=sap.ushell.Container.getUser(),o=s.last("/core/shell/model/userImage/personPlaceHolder")||"sap-icon://person-placeholder";e.setData({icon:o,name:t.getFullName(),mail:t.getEmail(),server:window.location.host,imgConsentEnabled:this.imgConsentEnabled,isImageConsentForUser:t.getImageConsent(),isResetPersonalizationVisible:this.isResetPersonalizationVisible||true});return e},onCancel:function(){if(this.imgConsentEnabled){this.getView().getModel("config").setProperty("/isImageConsentForUser",this.oUser.getImageConsent())}},onSave:function(e){if(this.imgConsentEnabled){return this.onSaveUserImgConsent(e)}return Promise.resolve()},onSaveUserImgConsent:function(e){var n=this.oUser,s=n.getImageConsent(),o=this.getView().getModel("config"),i=o.getProperty("/isImageConsentForUser"),r;t.debug("[000] onSaveUserImgConsent:current",i,"UserAccountSelector.controller");t.debug("[000] onSaveUserImgConsent:original",s,"UserAccountSelector.controller");if(s!==i){n.setImageConsent(i);return new Promise(function(i,a){r=e();r.then(function(){n.resetChangedProperty("isImageConsent");i()});r.catch(function(e){if(!e.includes("ISIMAGECONSENT")){n.resetChangedProperty("isImageConsent");i()}else{n.setImageConsent(s);n.resetChangedProperty("isImageConsent");o.setProperty("/isImageConsentForUser",s);t.error(e);a(e)}})})}return Promise.resolve()},termsOfUserPress:function(){var e=this.getView().byId("termsOfUseTextFlexBox"),n=this.getView().byId("termsOfUseLink"),t=e.getVisible();e.setVisible(!t);n.setText(o.i18n.getText(t?"userImageConsentDialogShowTermsOfUse":"userImageConsentDialogHideTermsOfUse"))},showMessageBoxWarningDeletePersonalization:function(){i.warning(o.i18n.getText("userAccountResetPersonalizationWarningDialogDescription"),{onClose:this.resetEntirePersonalization.bind(this),actions:[i.Action.OK,i.Action.CANCEL],contentWidth:"600px"})},resetEntirePersonalization:function(e){if(e===i.Action.OK){this.getView().setBusy(true);sap.ushell.Container.getServiceAsync("Personalization").then(function(e){return e.resetEntirePersonalization().then(function(){r.show(o.i18n.getText("userAccountResetPersonalizationWarningDialogSuccessToast"),{onClose:l.refreshBrowser})}).catch(this.showErrorMessageBox.bind(this))}.bind(this)).catch(this.showErrorMessageBox.bind(this)).finally(function(){this.getView().setBusy(false)}.bind(this))}},showErrorMessageBox:function(){i.error(o.i18n.getText("userAccountResetPersonalizationWarningDialogErrorDialog"),{actions:i.Action.CLOSE,contentWidth:"600px"})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userActivities/UserActivitiesEntry", ["sap/ui/core/mvc/XMLView","sap/base/Log","sap/ushell/resources"],function(e,t,i){"use strict";function n(){var n="userActivitiesSetting",r="sap.ushell.components.shell.Settings.userActivities.UserActivitiesSetting",s;return{id:"userActivitiesEntry",entryHelpID:"userActivitiesEntry",title:i.i18n.getText("userActivities"),valueResult:null,contentResult:null,icon:"sap-icon://laptop",valueArgument:null,groupingEnablement:true,groupingId:"userActivities",groupingTabHelpId:"userActivitiesEntryTab",groupingTabTitle:i.i18n.getText("userActivitiesTabName"),contentFunc:function(){return e.create({id:n,viewName:r}).then(function(e){s=e;return e})},onSave:function(){if(s){return s.getController().onSave()}t.warning("Save operation for user account settings was not executed, because the userActivities view was not initialized");return Promise.resolve()},onCancel:function(){if(s){s.getController().onCancel();return}t.warning("Cancel operation for user account settings was not executed, because the userActivities view was not initialized")}}}return{getEntry:n}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userActivities/UserActivitiesSetting.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/base/Log","sap/ushell/resources"],function(e,t,i,s,n,o){"use strict";return e.extend("sap.ushell.components.shell.Settings.userActivities.UserActivitiesSetting",{onInit:function(){var e=s.last("/core/shell/model/enableTrackingActivity")!==undefined?s.last("/core/shell/model/enableTrackingActivity"):true;this.oModel=new t({checkboxIsChecked:e});this.getView().setModel(this.oModel);this.getView().setModel(o.getTranslationModel(),"i18n")},onCancel:function(){var e=s.last("/core/shell/model/enableTrackingActivity")!==undefined?s.last("/core/shell/model/enableTrackingActivity"):true;this.oModel.setProperty("/checkboxIsChecked",e)},onSave:function(){if(s.last("/core/shell/model/enableTrackingActivity")!==this.oModel.getProperty("/checkboxIsChecked")){return this._setTrackingToEnabled(this.oModel.getProperty("/checkboxIsChecked"))}return Promise.resolve()},_setTrackingToEnabled:function(e){return i.getPersonalizer("userActivitesTracking",sap.ushell.Container.getRenderer("fiori2")).then(function(t){return new Promise(function(i,o){t.setPersData(e).done(function(){s.emit("/core/shell/model/enableTrackingActivity",e);i()}).fail(function(e){n.error("Failed to save the user activities tracking in personalization",e,"sap.ushell.components.ushell.settings.userActivities.UserActivitiesSetting");o()})})})},onClearHistory:function(){sap.ushell.Container.getServiceAsync("UserRecents").then(function(e){e.clearRecentActivities();this._showClearHistoryMessageToast()}.bind(this))},_showClearHistoryMessageToast:function(){sap.ui.require(["sap/m/MessageToast"],function(e){var t=o.i18n.getText("historyCleared");e.show(t,{width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"})})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userDefaults/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(t,n){"use strict";return n.extend("sap.ushell.components.shell.Settings.userDefaults.Component",{metadata:{manifest:"json"},init:function(){n.prototype.init.apply(this,arguments)},onSave:function(){return this.getRootControl().getController().onSave()},onCancel:function(){this.getRootControl().getController().onCancel()},exit:function(){}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userDefaults/UserDefaultsEntry", ["sap/base/Log","sap/ui/core/ComponentContainer","sap/ushell/resources","sap/base/util/includes"],function(e,n,t,a){"use strict";return{getEntry:function(){var r;return{id:"userDefaultEntry",entryHelpID:"defaultParameters",title:t.i18n.getText("defaultsValuesEntry"),valueArgument:function(){var e=sap.ushell.Container.getServiceAsync("UserDefaultParameters");var n=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution");var t=sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getContentProviderIds()}).catch(function(){return[""]});return Promise.all([e,n,t]).then(function(e){var n=e[0];var t=e[1];var a=e[2].length>0?e[2]:[""];return Promise.all(a.map(function(e){return t.getSystemContext(e).then(function(e){return n.hasRelevantMaintainableParameters(e)})}))}).then(function(e){return{value:a(e,true)}})},contentFunc:function(){return new Promise(function(e,t){r=new n("defaultParametersSelector",{name:"sap.ushell.components.shell.Settings.userDefaults",manifest:true,async:true});e(r)})},onSave:function(){if(r&&r.getComponentInstance()){return r.getComponentInstance().onSave()}e.warning("Save operation for user defaults settings was not executed, because the user default component was not initialized");return Promise.resolve()},onCancel:function(){if(r&&r.getComponentInstance()){r.getComponentInstance().onCancel();return}e.warning("Cancel operation for user defaults settings was not executed, because the user default component was not initialized")},defaultVisibility:false}}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userDefaults/UserDefaultsForm", ["sap/ui/core/Control","sap/base/util/deepExtend","sap/ui/comp/smartform/SmartForm"],function(e,t,r){"use strict";var o=["sap.ui.comp.smartfield.SmartField","sap.m.Input"];var a=e.extend("sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm",{metadata:{properties:{persistencyKey:{type:"string"}},aggregations:{_smartForm:{type:"sap.ui.comp.smartform.SmartForm",multiple:false,visibility:"hidden"}},events:{}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.openEnd();e.renderControl(t.getAggregation("_smartForm"));e.close("div")}}});a.prototype.init=function(){this.setAggregation("_smartForm",new r({editable:true}).addStyleClass("sapUshellShellDefaultValuesForm"))};a.prototype.fetchVariant=function(){var e,t;var r=this.getAggregation("_smartForm").getModel("MdlParameter");return this._getFieldControls().reduce(function(o,a){e=a.getName();o[e]={value:r.getProperty("/"+e+"/valueObject/value/")};t=r.getProperty("/"+e+"/valueObject/extendedValue/");if(t){o[e].additionalValues=t}return o},{})};a.prototype.applyVariant=function(e){if(e){var r=this.getAggregation("_smartForm").getModel("MdlParameter"),o=this._getFieldControls(),a,n;for(var i=0;i<o.length;i++){a=o[i].getName();if(e[a]!==undefined){o[i].setValue(e[a].value);n=r.getProperty("/"+a+"/valueObject/");n.extendedValue=undefined;if(e[a].additionalValues){n=t(n,{extendedValue:e[a].additionalValues})}r.setProperty("/"+a+"/valueObject",n)}}}};a.prototype._getFieldControls=function(){return this.getControlsByFieldGroupId("UserDefaults").filter(function(e){var t=e.getMetadata().getName();return o.indexOf(t)!==-1})};a.prototype.addGroup=function(e){this.getAggregation("_smartForm").addGroup(e)};a.prototype.getGroups=function(){return this.getAggregation("_smartForm").getGroups()};a.prototype.removeGroup=function(e){this.getAggregation("_smartForm").removeGroup(e)};a.prototype.removeAllGroups=function(){this.getAggregation("_smartForm").removeAllGroups()};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userDefaults/controller/ExtendedValueDialog.controller", ["sap/m/Token","sap/ui/comp/library","sap/ui/model/json/JSONModel","sap/ui/core/Fragment"],function(e,t,a,o){"use strict";var n=t.valuehelpdialog.ValueHelpRangeOperation;var r=function(){};r.prototype.openDialog=function(e,t){o.load({id:"ExtendedValueDialogFragment",name:"sap.ushell.components.shell.Settings.userDefaults.view.ExtendedValueDialog",controller:this}).then(function(o){var n="/"+e.parameterName+"/valueObject/extendedValue/Ranges",r=e.modelBind.extendedModel,i=r.getProperty(n)||[],l,p;if(e.modelBind.isOdata){p=this._getMetadataNameSpace(e.editorMetadata.editorInfo.odataURL);var d=e.modelBind.model.getMetaModel().getODataEntityType(p+"."+e.editorMetadata.editorInfo.entityName);if(d){l=e.modelBind.model.getMetaModel().getODataProperty(d,e.editorMetadata.editorInfo.propertyName)["sap:label"]}}var s={label:e.editorMetadata.displayText||l||e.parameterName,key:e.modelBind.sPropertyName,parameterName:e.parameterName};o.setModel(new a(s));o.setIncludeRangeOperations(this.getListOfSupportedRangeOperations());o.setTokens(this.getTokensToValueHelpDialog(i,e.parameterName));o.setRangeKeyFields([{label:s.label,key:e.parameterName}]);o.attachOk(function(e){t(e);e.getSource().close()});o.open()}.bind(this))};r.prototype.closeValueHelp=function(e){e.getSource().close(e)};r.prototype.afterCloseValueHelp=function(e){e.getSource().destroy()};r.prototype._getMetadataNameSpace=function(e){var t=e.split("/"),a;a=t[t.length-1];return a};r.prototype.getListOfSupportedRangeOperations=function(){var e=Object.keys(n);return e.filter(function(e){return e!=="StartsWith"&&e!=="EndsWith"&&e!=="Initial"})};r.prototype.getTokensToValueHelpDialog=function(t,a){var o=[],n;t.forEach(function(t){if(t){n={};n.exclude=t.Sign==="E";n.keyField=a;n.operation=t.Option!=="CP"?t.Option:"Contains";n.value1=t.Low;n.value2=t.High;o.push(new e({}).data("range",n))}});return o};return new r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userDefaults/controller/UserDefaultsSetting.controller", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/deepEqual","sap/m/Button","sap/m/FlexBox","sap/m/FlexItemData","sap/m/Input","sap/m/library","sap/ui/core/mvc/Controller","sap/ui/core/Configuration","sap/ui/comp/smartfield/SmartField","sap/ui/comp/smartfield/SmartLabel","sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/ui/comp/smartvariants/PersonalizableInfo","sap/ui/Device","sap/ui/layout/GridData","sap/ui/model/json/JSONModel","sap/ui/model/odata/v2/ODataModel","sap/ushell/resources","sap/m/MessageBox","./ExtendedValueDialog.controller"],function(e,t,a,r,n,i,s,o,d,l,u,m,h,f,c,p,v,g,y,P,M,b){"use strict";var S=o.ButtonType;function D(e,t){if(!(t.editorMetadata&&t.editorMetadata.groupId)){return-1}if(!(e.editorMetadata&&e.editorMetadata.groupId)){return 1}if(e.editorMetadata.groupId<t.editorMetadata.groupId){return-1}if(e.editorMetadata.groupId>t.editorMetadata.groupId){return 1}return 0}function C(e,t){if(!(t.editorMetadata&&t.editorMetadata.parameterIndex)){return-1}if(!(e.editorMetadata&&e.editorMetadata.parameterIndex)){return 1}return e.editorMetadata.parameterIndex-t.editorMetadata.parameterIndex}function x(e,t){var a=D(e,t);if(a===0){return C(e,t)}return a}return d.extend("sap.ushell.components.shell.Settings.userDefaults.controller.UserDefaultsSetting",{onInit:function(){this.oModelRecords={};this.aChangedParamsNames=[];this.oBlockedParameters={};this.aDisplayedUserDefaults=[];this.oDirtyStateModel=new g({isDirty:false,selectedVariant:null});this.getView().setModel(this.oDirtyStateModel,"DirtyState");this.oOriginalParameters={};var t=this.getView();t.setBusy(true);t.setModel(P.getTranslationModel(),"i18n");this.getSystemContextsModel().then(function(e){t.setModel(e,"systemContexts");return this._fillGroups()}.bind(this)).then(this._saveIsSupportedPlatform.bind(this)).then(this._initializeSmartVariantManagement.bind(this)).then(function(){t.setBusy(false)}).catch(function(a){e.error("Error during UserDefaultsSetting controller initialization",a,"sap.ushell.components.shell.Settings.userDefaults.UserDefaultsSetting");t.setBusy(false)})},getSystemContextsModel:function(){var e=new g({systemContexts:[],selectedKey:""});var t=this._getContentProviderIds();var a=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution");var r=sap.ushell.Container.getServiceAsync("UserDefaultParameters");return Promise.all([t,a,r]).then(function(t){var a=t[0];var r=t[1];var n=t[2];if(a.length===0){a.push("")}return Promise.all(a.map(function(t){return r.getSystemContext(t).then(function(t){var a=e.getProperty("/systemContexts");return n.hasRelevantMaintainableParameters(t).then(function(e){if(e){a.push(t)}})})})).then(function(){var t=e.getProperty("/systemContexts");if(t.length>0){e.setProperty("/selectedKey",t[0].id)}return e})})},_getContentProviderIds:function(){return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getContentProviderIds()}).catch(function(){return[""]})},handleSystemContextChanged:function(){if(this.oDirtyStateModel.getProperty("/isDirty")){var e=P.i18n.getText("userDefaultsSave");var t=P.i18n.getText("userDefaultsDiscard");M.show(P.i18n.getText("userDefaultsUnsavedChangesMessage"),{title:P.i18n.getText("userDefaultsUnsavedChangesTitle"),actions:[e,t,M.Action.CANCEL],emphasizedAction:e,icon:M.Icon.QUESTION,onClose:function(a){if(a===t){this._fillGroups();this._setDirtyState(false)}else if(a===e){this.onSave();this._fillGroups();this._setDirtyState(false)}else{this.getView().getModel("systemContexts").setProperty("/selectedKey",this.sLastSelectedKey)}}.bind(this)})}else{this._fillGroups()}},_fillGroups:function(){var e=this.getView().byId("userDefaultsForm");e.removeAllGroups();var a=this.getView().getModel("systemContexts").getProperty("/selectedKey");var r=this.getView().getModel("systemContexts").getProperty("/systemContexts").find(function(e){return e.id===a});return new Promise(function(a){sap.ushell.Container.getServiceAsync("UserDefaultParameters").then(function(n){n.editorGetParameters(r).done(function(r){this.oOriginalParameters=t({},r);this.oModel=new g(r);this.oModel.setDefaultBindingMode("TwoWay");this.getView().setModel(this.oModel,"MdlParameter");return this._getFormattedParameters(this.oModel).then(function(t){var a=this._createContent(t);a.forEach(function(t){e.addGroup(t)})}.bind(this)).then(a)}.bind(this))}.bind(this))}.bind(this))},_getFormattedParameters:function(a){var r=a.getData("/");var n=Object.keys(r).map(function(n){var i=t({},r[n]);i.parameterName=n;i.editorMetadata=i.editorMetadata||{};if(i.editorMetadata.editorInfo&&i.editorMetadata.editorInfo.propertyName){return this._createOdataModelBinding(i,a).then(function(e){i.modelBind=e;var a=e.model?e.model.getMetaModel():undefined;if(a){return a.loaded().then(function(){var e=a.getObject("/dataServices/schema/0/namespace");var t=a.getODataEntityType(e+"."+i.editorMetadata.editorInfo.entityName);var r=t.property.find(function(e){if(e.name===i.editorMetadata.editorInfo.propertyName){return true}});switch(r.type){case"Edm.DateTime":i.valueObject.value=i.valueObject.value?new Date(i.valueObject.value):null;break;default:i.valueObject.value=i.valueObject.value?i.valueObject.value:"";break}return i})}i.valueObject=t({value:""},i.valueObject);return i}).catch(function(){e.error("Metadata loading for parameter "+i.parameterName+" failed"+JSON.stringify(i.editorMetadata));i.valueObject=t({value:""},i.valueObject);i.modelBind=this._createPlainModelBinding(i,a);this.oBlockedParameters[i.parameterName]=false;return Promise.resolve(i)}.bind(this))}i.valueObject=t({value:""},i.valueObject);i.modelBind=this._createPlainModelBinding(i,a);return Promise.resolve(i)}.bind(this));return Promise.all(n).then(function(e){e.sort(x);this.aDisplayedUserDefaults=e;e.forEach(function(e){e.modelBind.model.setProperty(e.modelBind.sFullPropertyPath,e.valueObject.value);e.modelBind.model.bindTree(e.modelBind.sFullPropertyPath).attachChange(this.storeChangedData.bind(this))}.bind(this));return e}.bind(this))},_createPlainModelBinding:function(e,t){var a="/"+e.parameterName+"/valueObject/value";if(!t.getProperty("/"+e.parameterName+"/valueObject")){t.setProperty("/"+e.parameterName+"/valueObject",{})}var r={isOdata:false,model:t,extendedModel:t,sFullPropertyPath:a,sPropertyName:"{"+a+"}"};return r},_createOdataModelBinding:function(e,t){var a=e.editorMetadata.editorInfo;var r=this._getODataServiceData(a.odataURL,e);return r.metadataLoaded.then(function(){var e={isOdata:true,model:r.model,extendedModel:t,sPropertyName:"{"+a.propertyName+"}",sFullPropertyPath:a.bindingPath+"/"+a.propertyName};return e})},_getODataServiceData:function(e,t){if(!this.oModelRecords[e]){var a=new y(e,{metadataUrlParams:{"sap-documentation":"heading,quickinfo","sap-value-list":"none","sap-language":l.getLanguageTag()},json:true});a.setDefaultCountMode("None");a.setDefaultBindingMode("TwoWay");this.oModelRecords[e]={attachedListeners:[],model:a,metadataLoaded:new Promise(function(e,t){a.attachMetadataLoaded(e);a.attachMetadataFailed(t)})}}if(this.oModelRecords[e].attachedListeners.indexOf(t.parameterName)===-1){this.oModelRecords[e].attachedListeners.push(t.parameterName);this.oModelRecords[e].model.attachRequestCompleted(this._overrideOdataModelValue.bind(this,t));this.oBlockedParameters[t.parameterName]=true}return this.oModelRecords[e]},_overrideOdataModelValue:function(e,t){var a=t.getSource();var r="/"+t.getParameter("url").replace(/\?.*/,"");if(e.editorMetadata.editorInfo.bindingPath===r){var n=e.editorMetadata.editorInfo.bindingPath+"/"+e.editorMetadata.editorInfo.propertyName;if(a.getProperty(n)!==e.valueObject.value){a.setProperty(n,e.valueObject.value)}this.oBlockedParameters[e.parameterName]=false}},_createContent:function(e){var t="nevermore";var a;var r={};var n=[];for(var i=0;i<e.length;++i){var s=e[i];var o=s.modelBind;if(t!==s.editorMetadata.groupId){a=new h({label:s.editorMetadata.groupTitle||undefined,layoutData:new v({linebreak:false})});t=s.editorMetadata.groupId;n.push(a)}var d=new f({});d.setModel(o.model);if(o.isOdata){var l=s.editorMetadata.editorInfo.odataURL;if(!r[l]){var u=s.editorMetadata.editorInfo.bindingPath;d.bindElement(u);r[l]=s.modelBind.model.getContext(u)}else{d.setBindingContext(r[l])}}d.addElement(this._createControl(s));a.addGroupElement(d)}return n},_createControl:function(e){var t;var a;if(e.editorMetadata.extendedUsage){a=new r({text:P.i18n.getText("userDefaultsExtendedParametersTitle"),tooltip:P.i18n.getText("userDefaultsExtendedParametersTooltip"),type:{parts:["MdlParameter>/"+e.parameterName+"/valueObject/extendedValue/Ranges"],formatter:function(e){return e&&e.length?S.Emphasized:S.Transparent}},press:function(t){b.openDialog(e,this.saveExtendedValue.bind(this))}.bind(this)}).addStyleClass("sapUshellExtendedDefaultParamsButton")}var o=new m({width:p.system.phone?"auto":"12rem",textAlign:p.system.phone?"Left":"Right"});if(e.modelBind.isOdata&&e.editorMetadata.editorInfo){t=new u({value:e.modelBind.sPropertyName,name:e.parameterName,fieldGroupIds:["UserDefaults"]});o.setLabelFor(t)}else{t=new s({name:e.parameterName,value:e.modelBind.sPropertyName,fieldGroupIds:["UserDefaults"],type:"Text"});t.addAriaLabelledBy(o);o.setText((e.editorMetadata.displayText||e.parameterName)+":");o.setTooltip(e.editorMetadata.description||e.parameterName)}t.attachChange(this.storeChangedData.bind(this));t.attachChange(this._setDirtyState.bind(this,true),this);t.addStyleClass("sapUshellDefaultValuesSmartField");t.setLayoutData(new i({shrinkFactor:0}));var d=new n({width:p.system.phone?"100%":"auto",alignItems:p.system.phone?"Start":"Center",direction:p.system.phone&&!a?"Column":"Row",items:[o,t,a],wrap:"Wrap"});return d},saveExtendedValue:function(e){var t=e.getSource().getModel().getProperty("/parameterName");var a=this.oModel;var r=e.getParameters().tokens||[];var n="/"+t+"/valueObject/extendedValue/Ranges";var i=r.map(function(e){var t=e.data("range");return{Sign:t.exclude?"E":"I",Option:t.operation!=="Contains"?t.operation:"CP",Low:t.value1,High:t.value2||null}});if(!a.getProperty("/"+t+"/valueObject/extendedValue")){a.setProperty("/"+t+"/valueObject/extendedValue",{})}a.setProperty(n,i);this.aChangedParamsNames.push(t);if(e.getParameter("_tokensHaveChanged")){this._setDirtyState(true)}},_setDirtyState:function(e){this.oDirtyStateModel.setProperty("/isDirty",e);this._setSmartVariantModified(e);if(e){this.sLastSelectedKey=this.getView().getModel("systemContexts").getProperty("/selectedKey")}},_setSelectedVariant:function(e){this.oDirtyStateModel.setProperty("/selectedVariant",e);this.storeChangedData()},storeChangedData:function(){var e=this.aDisplayedUserDefaults||[];for(var r=0;r<e.length;++r){var n=e[r].parameterName;var i=this.oModel.getProperty("/"+n+"/valueObject/");var s=e[r].modelBind;if(!this.oBlockedParameters[n]){var o={value:i&&i.value,extendedValue:i&&i.extendedValue};if(s&&s.model){var d=s.model;var l=s.extendedModel;var u=s.sFullPropertyPath;var m={value:d.getProperty(u)!==""?d.getProperty(u):undefined,extendedValue:l.getProperty("/"+n+"/valueObject/extendedValue")||undefined};if(!a(m,o)){i.value=m.value;if(m.extendedValue){i.extendedValue={};t(i.extendedValue,m.extendedValue)}this.oModel.setProperty("/"+n+"/valueObject",i);this.aChangedParamsNames.push(n)}}}}},onCancel:function(){this._setDirtyState(false);var e=this.aDisplayedUserDefaults;if(this.aChangedParamsNames.length>0){for(var t=0;t<e.length&&this.aChangedParamsNames.length>0;t++){var a=e[t].parameterName;if(this.aChangedParamsNames.indexOf(a)>-1){var r=this.oOriginalParameters[a];var n=e[t].modelBind;n.model.setProperty(n.sFullPropertyPath,r.valueObject.value||"");if(r.editorMetadata&&r.editorMetadata.extendedUsage){n.extendedModel.setProperty("/"+a+"/valueObject/extendedValue",r.valueObject.extendedValue||{})}}}this.aChangedParamsNames=[]}this._setDefaultVariant()},onSave:function(){this.storeChangedData();this._setDirtyState(false);var e;if(this.aChangedParamsNames.length===0){e=Promise.resolve()}else{e=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext(this.sLastSelectedKey)}.bind(this)).then(function(e){var t=this.aChangedParamsNames.sort();this.aChangedParamsNames=[];return this._saveParameterValues(t,e)}.bind(this))}return e.then(this._resetSmartVariantManagement.bind(this)).then(this._setDefaultVariant.bind(this))},_saveParameterValues:function(e,t){var r=[];for(var n=0;n<e.length;n++){var i=e[n];var s=this.oModel.getProperty("/"+i+"/valueObject/");var o=this.oOriginalParameters[i].valueObject;if(!a(o,s)){if(s&&s.value===null||s&&s.value===""){s.value=undefined}if(s&&s.extendedValue&&Array.isArray(s.extendedValue.Ranges)&&s.extendedValue.Ranges.length===0){s.extendedValue=undefined}var d=this._saveParameterValue(i,s,o,t);r.push(d)}}return Promise.all(r)},_saveParameterValue:function(e,t,a,r){return sap.ushell.Container.getServiceAsync("UserDefaultParameters").then(function(n){return new Promise(function(i,s){n.editorSetValue(e,t,r).done(function(){a.value=t.value;i()}).fail(s)})})},_setSmartVariantModified:function(e){if(!this._bIsSupportedPlatform){return}this.getView().byId("defaultSettingsVariantManagement").currentVariantSetModified(e)},_setDefaultVariant:function(){if(!this._bIsSupportedPlatform){return}var e=this.getView().byId("defaultSettingsVariantManagement");e.setCurrentVariantId(e.getDefaultVariantKey());this._setSelectedVariant(e.getDefaultVariantKey())},_resetSmartVariantManagement:function(){if(!this._bIsSupportedPlatform){return Promise.resolve()}this.getView().byId("defaultSettingsVariantManagement").removeAllPersonalizableControls();return this._initializeSmartVariantManagement()},_initializeSmartVariantManagement:function(){if(!this._bIsSupportedPlatform){return Promise.resolve()}var e=this.getView().byId("defaultSettingsVariantManagement");var t=function(){this._setSelectedVariant(e.getSelectionKey())}.bind(this);return new Promise(function(a){var r=this.getView().byId("userDefaultsForm");var n=new c({type:"wrapper",keyName:"persistencyKey",dataSource:"none",control:r});e.detachSelect(t).detachAfterSave(t).addPersonalizableControl(n).attachSelect(t).attachAfterSave(t).initialise(function(){e.setVisible(true);a()},r)}.bind(this)).then(t)},_saveIsSupportedPlatform:function(){var e=sap.ushell.Container.getLogonSystem().getPlatform();this._bIsSupportedPlatform=e!=="cdm";return Promise.resolve(this._bIsSupportedPlatform)},displayDiffText:function(){if(!this._bIsSupportedPlatform){return false}var e=this.getView().byId("defaultSettingsVariantManagement");var t=this.getView().byId("userDefaultsForm");var r=e.getStandardVariantKey();var n=e.getSelectionKey();if(n===r){return false}var i=e.getVariantContent(t,r);var s=e.getVariantContent(t,n);delete s.executeOnSelection;return!a(i,s)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userLanguageRegion/LanguageRegionSelector.controller", ["sap/base/Log","sap/base/util/UriParameters","sap/ui/core/Configuration","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/ui/core/format/DateFormat","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/performance/Measurement","sap/ushell/Config"],function(e,t,a,r,n,s,i,o,g,u){"use strict";return i.extend("sap.ushell.components.shell.Settings.userLanguageRegion.LanguageRegionSelector",{onInit:function(){this.oUserInfoServicePromise=sap.ushell.Container.getServiceAsync("UserInfo");return this.oUserInfoServicePromise.then(function(e){this.oUser=sap.ushell.Container.getUser();var t=a.getFormatSettings().getFormatLocale();var r=n.getInstance(t);var i,g,l,m;var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig().enableSetLanguage||false;var L=this.oUser.isLanguagePersonalized();var d=e.getUserSettingListEditSupported();var h=[];if(d){var f=a.getFormatSettings();i=f.getLegacyDateFormat();l=f.getLegacyTimeFormat();m=this._getLegacyNumberFormat(f);h.push(this._loadUserSettingList())}else{i=r.getDatePattern("medium");g=r.getTimePattern("medium");l=g.indexOf("H")===-1?"12h":"24h"}var F=new o({languageList:null,DateFormatList:null,TimeFormatList:null,NumberFormatList:null,TimeZoneList:null,selectedLanguage:this.oUser.getLanguage(),selectedLanguageText:this.oUser.getLanguageText(),selectedDatePattern:i,selectedTimeFormat:l,selectedNumberFormat:m,selectedTimeZone:this.oUser.getTimeZone(),isSettingsLoaded:true,isLanguagePersonalized:L,isEnableSetLanguage:c,isEnableUserProfileSetting:d,isTimeZoneFromServerInUI5:u.last("/core/ui5/timeZoneFromServerInUI5")});F.setSizeLimit(1e3);if(c){h.push(this._loadLanguagesList())}if(h.length>0){this.getView().setBusy(true);return Promise.all(h).then(function(e){var t=d?e[0]:null;var a=null;if(c){a=e.length===1?e[0]:e[1]}if(a&&a.length>1){F.setProperty("/languageList",a);var r=a.some(function(e){return e.key==="default"});if(!L&&r){F.setProperty("/selectedLanguage","default")}}if(t&&t.TIME_FORMAT&&t.TIME_FORMAT.length>0){F.setProperty("/TimeFormatList",t.TIME_FORMAT)}if(t&&t.DATE_FORMAT&&t.DATE_FORMAT.length>0){F.setProperty("/DateFormatList",t.DATE_FORMAT)}if(t&&t.TIME_ZONE&&t.TIME_ZONE.length>0){var n=s.getDateTimeWithTimezoneInstance({showDate:false,showTime:false});var i=t.TIME_ZONE.map(function(e){var t=n.format(null,e.description)||e.description;return{description:t,value:e.value}});F.setProperty("/TimeZoneList",i)}if(t&&t.NUMBER_FORMAT&&t.NUMBER_FORMAT.length>0){F.setProperty("/NumberFormatList",t.NUMBER_FORMAT)}this.oView.setModel(F);this.getView().setBusy(false)}.bind(this))}this.oView.setModel(F)}.bind(this))},_loadLanguagesList:function(){g.start("FLP:LanguageRegionSelector._getLanguagesList","_getLanguagesList","FLP");return this.oUserInfoServicePromise.then(function(t){return new Promise(function(a){g.start("FLP:LanguageRegionSelector._getLanguagesList","_getLanguagesList","FLP");t.getLanguageList().done(function(e){g.end("FLP:LanguageRegionSelector._getLanguagesList");a(e)}).fail(function(t){g.end("FLP:LanguageRegionSelector._getLanguagesList");e.error("Failed to load language list.",t,"sap.ushell.components.ushell.settings.userLanguageRegion.LanguageRegionSelector.controller");a(null)})})})},_loadUserSettingList:function(){g.start("FLP:LanguageRegionSelector._loadUserSettingList","_loadUserSettingList","FLP");return this.oUserInfoServicePromise.then(function(e){return new Promise(function(t){g.start("FLP:LanguageRegionSelector._loadUserSettingList","_loadUserSettingList","FLP");e.getUserSettingList().then(function(e){g.end("FLP:LanguageRegionSelector._loadUserSettingList");t(e)})})})},onCancel:function(){var e=this.getView().getModel(),t=e.getData(),a=t.languageList,r=t.isEnableSetLanguage;if(r&&a){var n=this.oUser.getLanguage();var s=t.isLanguagePersonalized?n:"default";e.setProperty("/selectedLanguage",s);this._updateTextFields(n)}if(t.isEnableUserProfileSetting){this._restoreUserSettingPreferenceValues()}},onSaveSuccess:function(t,a,r){var n={refresh:true};t.resetChangedProperty("dateFormat");t.resetChangedProperty("timeFormat");t.resetChangedProperty("numberFormat");t.resetChangedProperty("timeZone");if(a){e.debug("[000] onSaveSuccess: oUser.resetChangedPropertyLanguage:","LanguageRegionSelector.controller");t.resetChangedProperty("language");n.obsoleteUrlParams=["sap-language"]}return n},onSave:function(t){var r=this.oUser,n=this.getView().getModel().getData(),s=n.selectedLanguage,i=r.getLanguage(),o=s!==(n.isLanguagePersonalized?i:"default"),g=n.isEnableUserProfileSetting,u=n.isEnableSetLanguage&&n.languageList&&o,l=false,m=["DATE_FORMAT","TIME_FORMAT","NUMBER_FORMAT","TIME_ZONE","LANGUAGE"];e.debug("[000] LanguageRegionSelector:onSave:bUpdateLanguage, bIsEnableSetUserProfileSetting:",u,"LanguageRegionSelector.controller");if(u){e.debug("[000] LanguageRegionSelector:onSave:UserInfo: oUser.setLanguage:",s,"LanguageRegionSelector.controller");r.setLanguage(s)}if(g){var c=a.getFormatSettings();if(c.getLegacyDateFormat()!==n.selectedDatePattern){l=true;r.setChangedProperties({propertyName:"dateFormat",name:"DATE_FORMAT"},c.getLegacyDateFormat(),n.selectedDatePattern)}if(c.getLegacyTimeFormat()!==n.selectedTimeFormat){l=true;r.setChangedProperties({propertyName:"timeFormat",name:"TIME_FORMAT"},c.getLegacyTimeFormat(),n.selectedTimeFormat)}if(this._getLegacyNumberFormat(c)!==n.selectedNumberFormat){l=true;r.setChangedProperties({propertyName:"numberFormat",name:"NUMBER_FORMAT"},this._getLegacyNumberFormat(c),n.selectedNumberFormat)}if(this.oUser.getTimeZone()!==n.selectedTimeZone){l=true;r.setChangedProperties({propertyName:"timeZone",name:"TIME_ZONE"},this.oUser.getTimeZone(),n.selectedTimeZone)}}if(u||l){return t().then(function(){e.debug("[000] onSave:fnUpdateUserPreferences","LanguageRegionSelector.controller");return this.onSaveSuccess(r,u,s)}.bind(this)).catch(function(t){e.debug("[000] onSave:catch:errorMessage",t,"LanguageRegionSelector.controller");var a=m.some(function(e){return t.includes(e)});if(!a){return this.onSaveSuccess(r,u,s)}if(u){r.setLanguage(i);r.resetChangedProperty("language");this._updateTextFields(i)}r.resetChangedProperty("dateFormat");r.resetChangedProperty("timeFormat");r.resetChangedProperty("numberFormat");r.resetChangedProperty("timeZone");if(n.isEnableUserProfileSetting){this._restoreUserSettingPreferenceValues()}e.error("Failed to save Language and Region Settings",t,"sap.ushell.components.ushell.settings.userLanguageRegion.LanguageRegionSelector.controller");throw t}.bind(this))}return Promise.resolve()},_restoreUserSettingPreferenceValues:function(){var e=this.getView().getModel();var t=a.getFormatSettings();e.setProperty("/selectedDatePattern",t.getLegacyDateFormat());e.setProperty("/selectedTimeFormat",t.getLegacyTimeFormat());e.setProperty("/selectedNumberFormat",this._getLegacyNumberFormat(t));e.setProperty("/selectedTimeZone",this.oUser.getTimeZone())},_handleSelectChange:function(e){var t=e.getParameters().selectedItem.getKey();this._updateTextFields(t)},_updateTextFields:function(e){var t;if(e===this.oUser.getLanguage()){t=a.getFormatSettings().getFormatLocale()}else{t=new r(e)}var s=this.getView().getModel(),i=n.getInstance(t),o=i.getDatePattern("medium"),g=i.getTimePattern("medium"),u=g.indexOf("H")===-1?"12h":"24h";if(!s.getData().isEnableUserProfileSetting){s.setProperty("/selectedDatePattern",o);s.setProperty("/selectedTimeFormat",u)}},_getLegacyNumberFormat:function(e){var t=e.getLegacyNumberFormat();if(t){return t.trim()}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userLanguageRegion/UserLanguageRegionEntry", ["sap/ui/core/mvc/XMLView","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/base/Log","sap/ushell/resources"],function(e,n,t,a,o){"use strict";function r(){var n;var t={id:"language",entryHelpID:"language",title:o.i18n.getText("languageRegionTit"),valueResult:null,contentResult:null,icon:"sap-icon://globe",valueArgument:function(){var e=sap.ushell.Container.getUser().getLanguageText();if(e.indexOf("-")>-1){e=e.replace("-"," (").concat(")")}return Promise.resolve(e)},contentFunc:function(){return e.create({id:"languageRegionSelector",viewName:"sap.ushell.components.shell.Settings.userLanguageRegion.LanguageRegionSelector"}).then(function(e){var t=e.getController();n=e;return t.oUserInfoServicePromise.then(function(){return n})})},onSave:function(e){if(n){return n.getController().onSave(e)}a.warning("Save operation for language settings was not executed, because the languageRegionSelector view was not initialized");return Promise.resolve()},onCancel:function(){if(n){n.getController().onCancel();return}a.warning("Cancel operation for language settings was not executed, because the languageRegionSelector view was not initialized")}};return t}return{getEntry:r}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userProfiling/UsageAnalyticsProfiling", ["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ushell/resources"],function(e,n,i){"use strict";return{getProfiling:function(){var t;return{id:"usageAnalytics",entryHelpID:"usageAnalytics",title:i.i18n.getText("usageAnalytics"),contentFunc:function(){return n.create({id:"userPrefUsageAnalyticsSelector",viewName:"sap.ushell.components.shell.Settings.userProfiling.UsageAnalyticsSelector"}).then(function(e){t=e;return e})},onSave:function(){if(t){return t.getController().onSave()}e.warning("Save operation for user profiling was not executed, because the userProfiling view was not initialized");return Promise.resolve()},onCancel:function(){if(t){t.getController().onCancel();return}e.warning("Cancel operation for user profiling was not executed, because the userProfiling view was not initialized")}}}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userProfiling/UsageAnalyticsSelector.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ushell/resources"],function(e,s,t){"use strict";return e.extend("sap.ushell.components.shell.Settings.userProfiling.UsageAnalyticsSelector",{onInit:function(){this.oUser=sap.ushell.Container.getUser();this.getView().setModel(t.getTranslationModel(),"i18n");sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(e){this.oUsageAnalyticsService=e;this.getView().setModel(new s({isTrackingUsageAnalytics:this.oUser.getTrackUsageAnalytics(),legalText:this.oUsageAnalyticsService.getLegalText()}))}.bind(this))},onSave:function(){var e=this.getView().getModel().getProperty("/isTrackingUsageAnalytics");return this.oUsageAnalyticsService.setTrackUsageAnalytics(e)},onCancel:function(){this.getView().getModel().setProperty("/isTrackingUsageAnalytics",this.oUser.getTrackUsageAnalytics())}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userProfiling/UserProfiling.controller", ["sap/ui/core/mvc/Controller","sap/base/Log","sap/m/Title","sap/ushell/Config"],function(e,n,r,t){"use strict";return e.extend("sap.ushell.components.shell.Settings.userProfiling.UserProfiling",{onInit:function(){this._loadContent()},_loadContent:function(){var e=this.getView().byId("profilingContent"),o=t.last("/core/userPreferences/profiling");o.forEach(function(t){var o=t.contentFunc();o.then(function(n){var o=new r({text:t.title||""}).addStyleClass("sapUiSmallMarginTop");e.addItem(o);e.addItem(n)},function(e){n.warning("Failed to load "+t.title+" profiling",e,"sap.ushell.components.shell.Settings.userProfiling.UserProfiling")})})},onCancel:function(){var e=t.last("/core/userPreferences/profiling");e.forEach(function(e){if(e.onCancel){e.onCancel()}})},onSave:function(){var e=t.last("/core/userPreferences/profiling")||[],n=e.map(this._saveProfileEntry);return Promise.all(n).then(function(e){var n=e.some(function(e){return e&&e.error});return n?Promise.reject("Can not save user profiling settings"):Promise.resolve()})},_saveProfileEntry:function(e){return new Promise(function(r){e.onSave().then(r,function(t){n.error("Failed to save "+e.title+" profiling",t,"sap.ushell.components.shell.Settings.userProfiling.UserProfiling");r({error:true})})})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/Settings/userProfiling/UserProfilingEntry", ["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ushell/Config","sap/ushell/resources"],function(e,n,r,i){"use strict";return{getEntry:function(){var t;return{id:"userProfiling",entryHelpID:"userProfiling",title:i.i18n.getText("userProfiling"),valueResult:null,contentResult:null,icon:"sap-icon://user-settings",valueArgument:function(){var e=r.last("/core/userPreferences/profiling"),n={value:e&&e.length>0?1:0,displayText:""};return Promise.resolve(n)},contentFunc:function(){return n.create({id:"userProfilingView",viewName:"sap.ushell.components.shell.Settings.userProfiling.UserProfiling"}).then(function(e){t=e;return e})},onSave:function(){if(t){return t.getController().onSave()}e.warning("Save operation for user profiling was not executed, because the userProfiling view was not initialized");return Promise.resolve()},onCancel:function(){if(t){t.getController().onCancel();return}e.warning("Cancel operation for user profiling was not executed, because the userProfiling view was not initialized")},provideEmptyWrapper:false,visible:false}}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/UserActionsMenu/Component", ["sap/ui/core/UIComponent","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/components/shell/UserActionsMenu/UserActionsMenu.controller"],function(e,n,o,t){"use strict";var s;function i(){if(!s){s=sap.ushell.Container.getRenderer("fiori2")}return s}return e.extend("sap.ushell.components.shell.UserActionsMenu.Component",{metadata:{version:"1.115.1",library:"sap.ushell",dependencies:{libs:["sap.m"]}},createContent:function(){this._bIsUserActionsMenuCreated=false;this.oUserActionsMenuController=new t;this.oUserActionsMenuController.onInit();var e=this;n.getElementsModel().createTriggers([{fnRegister:function(){if(!e.oActionsDoable){e.oActionsDoable=o.on("/core/shell/model/currentState/actions").do(function(e){if(e&&e.length>0){i().showHeaderEndItem(["userActionsMenuHeaderButton"],true)}else{i().hideHeaderEndItem(["userActionsMenuHeaderButton"],true)}})}},fnUnRegister:function(){if(!e.oActionsDoable){e.oActionsDoable.off();e.oActionsDoable=null}}}],false,["blank-home","blank"]);sap.ui.getCore().getEventBus().publish("shell","userActionsMenuCompLoaded",{delay:0})},exit:function(){if(this.oActionsDoable){this.oActionsDoable.off()}this.oEventListener.off();this.oUserActionsMenuController.onExit()}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/UserActionsMenu/UserActionsMenu.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/StandardListItem","sap/ushell/Config","sap/ushell/resources","sap/ushell/ui/footerbar/AboutButton","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/ui/launchpad/ActionItem","sap/ushell/ui/QuickAccess","sap/ushell/EventHub","sap/m/library","sap/base/Log","sap/ui/performance/Measurement","sap/ui/core/ElementMetadata","sap/ui/core/Fragment"],function(e,t,n,o,i,s,r,a,l,u,c,d,g,p,h){"use strict";var f=c.ListType;var v=c.ButtonType;function A(e){if(!sap.ui.getCore().byId(e)){d.debug("Could not render ActionItem because it was not created: "+e);return false}return true}return e.extend("sap.ushell.components.shell.UserActionsMenu.UserActionsMenu",{_aDanglingControl:[],_aDoables:[],onInit:function(){var e=this.getShellConfig();this._createActionButtons(e);var n=sap.ushell.Container.getUser();var i=o.last("/core/shell/model/currentState/actions").filter(A);this.oModel=new t({actions:i,userName:n.getFullName()||n.getId()});this._aDoables.push(o.on("/core/shell/model/currentState/actions").do(function(e){var t=e.filter(A);this.getModel().setProperty("/actions",t)}.bind(this)));this._aDoables.push(u.on("showUserActionsMenu").do(function(e){var t=sap.ui.getCore().byId("sapUshellUserActionsMenuPopover");if(t&&t.isOpen()||!e){this._toggleUserActionsMenuPopover(false)}else{this._toggleUserActionsMenuPopover(true)}}.bind(this)))},onExit:function(){this._destroyDanglingControls();this._aDoables.forEach(function(e){e.off()});this._aDanglingControl=[];this._aDoables=[];var e=sap.ui.getCore().byId("sapUshellUserActionsMenuPopover");if(e){e.destroy()}},getModel:function(){return this.oModel},_createActionButtons:function(e){var t=o.last("/core/extension/enableHelp");var n=o.last("/core/shell/enableAbout");if(n){this._createAboutButton(t)}if(!e.moveAppFinderActionToShellHeader&&o.last("/core/catalog/enabled")){this._createAppFinderButton(e,t)}if(!e.moveUserSettingsActionToShellHeader){this._createSettingsButton(t)}if(!e.moveContactSupportActionToShellHeader){this._createSupportTicketButton(t)}if(e.enableRecentActivity&&o.last("/core/shell/model/currentState/showRecentActivity")){this._createRecentActivitiesButton();this._createFrequentActivitiesButton()}if(!e.disableSignOut){this._createLogoutButton()}},_createAppFinderButton:function(e,t){if(sap.ui.getCore().byId("openCatalogBtn")){return}var n=new a("openCatalogBtn",{text:i.i18n.getText("open_appFinderBtn"),icon:"sap-icon://sys-find",visible:!e.disableAppFinder,actionType:"action",press:function(){g.start("FLP:AppFinderLoadingStartToEnd","AppFinderLoadingStartToEnd","FLP");sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{semanticObject:"Shell",action:"appfinder"}})})}});if(t){n.addStyleClass("help-id-openCatalogActionItem")}this._addDanglingControl(n)},_createAboutButton:function(e){var t="aboutBtn";if(!sap.ui.getCore().byId(t)){var n=new s(t);if(e){n.addStyleClass("help-id-"+t)}this._addDanglingControl(n);this.getRenderer().showActionButton(t,false)}},_createSettingsButton:function(e){var t="userSettingsBtn";if(!sap.ui.getCore().byId(t)){var n=new a(t,{tooltip:i.i18n.getText("ControlKey")+" + "+i.i18n.getText("CommaKey"),text:i.i18n.getText("userSettings"),icon:"sap-icon://action-settings",press:function(){u.emit("openUserSettings",Date.now())}});if(e){n.addStyleClass("help-id-loginDetails")}this._addDanglingControl(n)}},_createSupportTicketButton:function(e){o.on("/core/extension/SupportTicket").do(function(t){var n="ContactSupportBtn";var o=sap.ui.getCore().byId(n);if(t&&!o){o=new r(n);this._addDanglingControl(o);if(e){o.addStyleClass("help-id-contactSupportBtn")}}if(t){this.getRenderer().showActionButton(n)}else{this.getRenderer().hideActionButton(n)}}.bind(this))},_createRecentActivitiesButton:function(){var e="recentActivitiesBtn";o.on("/core/shell/model/enableTrackingActivity").do(function(t){if(t){var n=sap.ui.getCore().byId(e);if(!n){n=new a(e,{text:i.i18n.getText("recentActivities"),icon:"sap-icon://customer-history",press:function(){l.openQuickAccessDialog("recentActivityFilter","userActionsMenuHeaderButton")}});this._addDanglingControl(n)}this.getRenderer().showActionButton(e,false)}else{this.getRenderer().hideActionButton(e,false)}}.bind(this))},_createFrequentActivitiesButton:function(){var e="frequentActivitiesBtn";o.on("/core/shell/model/enableTrackingActivity").do(function(t){if(t){var n=sap.ui.getCore().byId(e);if(!n){n=new a(e,{text:i.i18n.getText("frequentActivities"),icon:"sap-icon://activity-individual",tooltip:i.i18n.getText("frequentActivitiesTooltip"),press:function(){l.openQuickAccessDialog("frequentlyUsedFilter","userActionsMenuHeaderButton")}});this._addDanglingControl(n)}this.getRenderer().showActionButton(e,false)}else{this.getRenderer().hideActionButton(e,false)}}.bind(this))},_createLogoutButton:function(){var e="logoutBtn";if(sap.ui.getCore().byId(e)){return}var t=new a(e,{visible:true,type:v.Transparent,icon:"sap-icon://log",text:i.i18n.getText("signoutBtn_title"),press:this.logout});this._addDanglingControl(t);this.getRenderer().showActionButton(e,false)},logout:function(){sap.ui.require(["sap/m/MessageBox","sap/ushell/ui/launchpad/LoadingDialog"],function(e,t){var n=new t({text:""}),o=true,s=false,r={};sap.ushell.Container.getGlobalDirty().done(function(a){o=false;if(s===true){n.exit();n=new t({text:""})}var l=function(){var t=i.i18n;if(a===sap.ushell.Container.DirtyState.DIRTY){r.message=t.getText("unsaved_data_warning_popup_message");r.icon=e.Icon.WARNING;r.messageTitle=t.getText("unsaved_data_warning_popup_title")}else{r.message=t.getText("signoutConfirmationMsg");r.icon=e.Icon.QUESTION;r.messageTitle=t.getText("signoutMsgTitle")}return r};r=l(a);e.show(r.message,r.icon,r.messageTitle,[e.Action.OK,e.Action.CANCEL],function(t){if(t===e.Action.OK){n.openLoadingScreen();n.showAppInfo(i.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.logout()}},p.uid("confirm"))});if(o===true){n.openLoadingScreen();s=true}})},_addDanglingControl:function(e){this._aDanglingControl.push(e)},_destroyDanglingControls:function(){if(this._aDanglingControl){this._aDanglingControl.forEach(function(e){if(e.destroyContent){e.destroyContent()}e.destroy()})}},_toggleUserActionsMenuPopover:function(e){if(!this.oPopover){h.load({name:"sap.ushell.components.shell.UserActionsMenu.UserActionsMenuPopover",type:"XML",controller:this}).then(function(t){this.oPopover=t;this.oPopover.setModel(this.getModel());this._toggleUserActionsMenuPopover(e)}.bind(this))}else if(e){this.oPopover.getModel().refresh(true);this.oPopover.openBy(sap.ui.getCore().byId("userActionsMenuHeaderButton"))}else{this.oPopover.close();if(window.document.activeElement&&window.document.activeElement.id!=="userActionsMenuHeaderButton"){window.document.getElementById("userActionsMenuHeaderButton").focus()}}},userActionsMenuPopoverItemFactory:function(e,t){var o=sap.ui.getCore().byId(t.getObject());return new n({id:e+"-"+o.getId(),icon:o.getIcon(),tooltip:o.getTooltip(),iconInset:true,title:o.getText(),visible:o.getVisible(),type:f.Active,customData:[{key:"actionItemId",value:o.getId()}],press:function(){if(o){o.firePress();u.emit("showUserActionsMenu",false)}}}).addStyleClass("sapUshellUserActionsMenuActionItem")},getRenderer:function(){if(!this._oRenderer){this._oRenderer=sap.ushell.Container.getRenderer("fiori2")}return this._oRenderer},getShellConfig:function(){return this.getRenderer().getShellConfig()}})});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/components/shell/UserImage/Component", ["sap/base/Log","sap/base/util/isEmptyObject","sap/m/Button","sap/m/library","sap/ui/core/Configuration","sap/ui/core/IconPool","sap/ui/core/UIComponent","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/resources"],function(e,s,t,a,n,o,r,i,jQuery,l){"use strict";var u;var g=a.ButtonType;return r.extend("sap.ushell.components.shell.UserImage.Component",{metadata:{version:"1.115.1",library:"sap.ushell.components.shell.UserImage",dependencies:{libs:{"sap.m":{},"sap.ui.layout":{lazy:true}}}},createContent:function(){var e;u=sap.ushell.Container.getRenderer("fiori2")._oShellView;e=(u.getViewData()?u.getViewData().config:{})||{};this.loadUserImage();var s=sap.ushell.Container.getUser();if(e.enableUserImgConsent===true&&s.getImageConsent()===undefined){this._showUserConsentPopup()}},_showUserConsentPopup:function(){var e=this;var s=n.getRTL()?"Right":"Left";var a,o,r,u;var p=new t("yesButton",{text:l.i18n.getText("DisplayImg"),type:g.Emphasized,press:function(){e.updateUserImage(true);a.close()}});var m=new t("noButton",{text:l.i18n.getText("DontDisplayImg"),press:function(){e.updateUserImage(false);a.close()}});sap.ui.require(["sap/ui/layout/form/VerticalLayout","sap/m/Dialog","sap/m/Text","sap/m/Link","sap/m/FlexBox"],function(e,t,n,g,d){a=new t("userConsentDialog",{title:l.i18n.getText("userImageConsentDialogTitle"),modal:true,stretch:i.system.phone,buttons:[p,m],afterClose:function(){a.destroy()}}).addStyleClass("sapUshellUserConsentDialog").addStyleClass("sapContrastPlus");var c=new n({text:l.i18n.getText("userImageConsentDialogTermsOfUse")}).addStyleClass("sapUshellUserConsentDialogTerms");var C=new n({text:l.i18n.getText("userImageConsentText"),textAlign:s}).addStyleClass("sapUshellUserConsentDialogText");var f=new g({text:l.i18n.getText("userImageConsentDialogShowTermsOfUse"),textAlign:s,press:function(){var e=u.getVisible();if(e){u.setVisible(false);f.setText(l.i18n.getText("userImageConsentDialogShowTermsOfUse"))}else{f.setText(l.i18n.getText("userImageConsentDialogHideTermsOfUse"));u.setVisible(true)}}}).addAriaLabelledBy(C);o=new d({alignItems:"Center",direction:"Row",items:[C]}).addStyleClass("sapUshellUserConsentDialogBox");r=new d({alignItems:"Center",direction:"Row",items:[f]}).addStyleClass("sapUshellUserConsentDialogBox").addStyleClass("sapUshellUserConsentDialogLink");u=new d({alignItems:"Center",direction:"Row",items:[c]}).addStyleClass("ushellUserImgConsentTermsOfUseFlexBox");u.setVisible(false);var h=new e("userConsentDialogLayout",{content:[o,r,u]});a.addContent(h);a.open()})},loadUserImage:function(){var e=sap.ushell.Container.getUser(),s=e.getImage();if(s){this._setUserImage(s)}e.attachOnSetImage(this._setUserImage.bind(this))},_setUserImage:function(t){var a=typeof t==="string"?t:t.mParameters;if(a&&typeof a==="string"||!s(a)){jQuery.ajax({url:a,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},success:function(){u.getModel().setProperty("/userImage/personPlaceHolder",a);u.getModel().setProperty("/userImage/account",a)},error:function(){e.error("Could not load user image from: "+a,"","sap.ushell.renderers.fiori2.Shell.view");sap.ushell.Container.getUser().setImage("")}})}else{u.getModel().setProperty("/userImage/personPlaceHolder",null);u.getModel().setProperty("/userImage/account",o.getIconURI("account"))}},updateUserImage:function(e){var s=sap.ushell.Container.getUser(),t;sap.ushell.Container.getServiceAsync("UserInfo").then(function(a){if(e!==undefined){s.setImageConsent(e);t=a.updateUserPreferences(s);t.done(function(){s.resetChangedProperty("isImageConsent")})}})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/action/ActionTile.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log"],function(t,e,i,jQuery,n){"use strict";return t.extend("sap.ushell.components.tiles.action.ActionTile",{onInit:function(){var t=this.getView();var n=t.getViewData();var o=e.getResourceBundleModel();var r=n.chip;var a=e.getActionConfiguration(r);var g=this;function c(t,e){var i=o.getResourceBundle();var n=i.getText("configuration.semantic_object")+":\n"+t+"\n\n"+i.getText("configuration.semantic_action")+":\n"+e;return n}t.setModel(o,"i18n");var s=new i({config:a,displayText:c(a.semantic_object,a.semantic_action)});t.setModel(s);if(r.configurationUi.isEnabled()){r.configurationUi.setAsyncUiProvider(function(){return e.getConfigurationUi(g.getView(),"sap.ushell.components.tiles.action.Configuration").then(function(t){r.configurationUi.attachCancel(g.onCancelConfiguration.bind(null,t));r.configurationUi.attachSave(g.onSaveConfiguration.bind(null,t,c));return t})});t.byId("actionTile").setTooltip(o.getResourceBundle().getText("edit_configuration.tooltip"))}},onPress:function(t){var e=this.getView().getViewData().chip;if(e.configurationUi.isEnabled()){e.configurationUi.display()}},onSaveConfiguration:function(t,o){var r=jQuery.Deferred();var a=t.getModel();var g=a.getProperty("/tileModel");var c=t.getViewData().chip;function s(t){n.warning(t,null,"sap.ushell.components.tiles.action.ActionTile.controller");r.reject(t)}var l=e.checkTMInputOnSaveConfig(t);if(l){r.reject("mandatory_fields_missing");return r.promise()}var p=e.getResourceBundleModel().getResourceBundle();if(e.tableHasDuplicateParameterNames(a.getProperty("/config/rows"))){r.reject(p.getText("configuration.signature.uniqueParamMessage.text"))}else if(!e.tableHasInvalidSapPrelaunchOperationValue(a.getProperty("/config/rows"))){var u=JSON.stringify([{type:"split",source:"p1",target:["p2","p3"]},{type:"merge",source:["p4","p5"],target:"p6"}]);r.reject(p.getText("configuration.signature.invalidSapPrelaunchOperationsMessage.text",[u]))}else{var f=a.getProperty("/config/formFactorConfigDefault")?undefined:e.buildFormFactorsObject(a);var d=e.getMappingSignatureString(a.getProperty("/config/rows"),a.getProperty("/config/isUnknownAllowed"));var _=e.getMappingSignature(a.getProperty("/config/rows"),a.getProperty("/config/isUnknownAllowed"));var v={semantic_object:(a.getProperty("/config/semantic_object")||"").trim(),semantic_action:(a.getProperty("/config/semantic_action")||"").trim(),display_title_text:(a.getProperty("/config/display_title_text")||"").trim(),url:(a.getProperty("/config/url")||"").trim(),ui5_component:(a.getProperty("/config/ui5_component")||"").trim(),navigation_provider:(a.getProperty("/config/navigation_provider")||"").trim(),navigation_provider_role:(a.getProperty("/config/navigation_provider_role")||"").trim(),navigation_provider_instance:(a.getProperty("/config/navigation_provider_instance")||"").trim(),target_application_id:(a.getProperty("/config/target_application_id")||"").trim(),target_application_alias:(a.getProperty("/config/target_application_alias")||"").trim(),transaction:{code:(a.getProperty("/config/transaction/code")||"").trim()},web_dynpro:{application:(a.getProperty("/config/web_dynpro/application")||"").trim(),configuration:(a.getProperty("/config/web_dynpro/configuration")||"").trim()},target_system_alias:(a.getProperty("/config/target_system_alias")||"").trim(),display_info_text:(a.getProperty("/config/display_info_text")||"").trim(),form_factors:f,mapping_signature:d,signature:_};var y=c.bag.getBag("tileProperties");y.setText("display_title_text",v.display_title_text);c.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(v)},function(){var l=e.getActionConfiguration(c,false);var p=e.getActionConfiguration(c,true);a=new i({config:l,tileModel:g});t.setModel(a);g.setData({config:p,displayText:o(p.semantic_object,p.semantic_action)},false);y.save(function(){n.debug("property bag 'tileProperties' saved successfully");r.resolve()},s)},s)}return r.promise()},onCancelConfiguration:function(t){var i=t.getViewData();var n=t.getModel();var o=n.getProperty("/tileModel");var r=i.chip;var a=e.getActionConfiguration(r,false);t.getModel().setData({config:a,tileModel:o},false)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/action/Configuration.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/library","sap/m/MessageBox"],function(e,t,a,i){"use strict";var n=a.ValueState;return e.extend("sap.ushell.components.tiles.action.Configuration",{sEnterValuePlaceHolder:"",sDuplicateErrorMsg:"",sDuplicateErrorTitle:"",sInvalidParmMsg:"",aDefaultObjects:[{obj:"",name:""},{obj:"*",name:"*"}],onConfigurationInputChange:function(e){t.checkTMInput(this.getView(),e)},onInit:function(){var e=this.getView();var a=e.byId("semantic_objectInput");var i=e.byId("navigation_provider_roleInput");var n=e.byId("navigation_provider_instanceInput");var r=e.byId("target_application_aliasInput");var s=e.byId("semantic_actionInput");var o=e.byId("targetTypeInput");var l=t.getResourceBundleModel();e.setModel(l,"i18n");e.setViewName("sap.ushell.components.tiles.action.Configuration");t.createSemanticObjectModel(this,a,this.aDefaultObjects);t.createRoleModel(this,i,n);t.createAliasModel(this,r);t.createActionModel(this,s);t.createNavigationProviderModel(this,o);a.attachChange(function(t){var a=t.getSource().getValue();e.getModel().setProperty("/config/semantic_object",a)});i.attachChange(function(a){var i=a.getSource().getValue();e.getModel().setProperty("/config/navigation_provider_role",i);t.updateAliasModel(e,r)});n.attachChange(function(t){var a=t.getSource().getValue();e.getModel().setProperty("/config/navigation_provider_instance",a)});r.attachChange(function(t){var a=t.getSource().getValue();e.getModel().setProperty("/config/target_application_alias",a)});var u=l.getResourceBundle();this.sEnterValuePlaceHolder=u.getText("configuration.signature.table.valueFieldLbl");this.sDuplicateErrorMsg=u.getText("configuration.signature.uniqueParamMessage.text");this.sDuplicateErrorTitle=u.getText("configuration.signature.uniqueParamMessage.title");this.sInvalidParmMsg=u.getText("configuration.signature.invalidParamMessage.text")},handleMandatoryChange:function(e){var t=e.getParameter("id");var a=sap.ui.getCore().byId(t).getParent().getCells();var i=e.getParameter("selected");if(i){a[2].setEnabled(true);a[2].setPlaceholder(this.sEnterValuePlaceHolder);a[4].setEnabled(false);a[4].setValue("");a[4].setPlaceholder("");a[3].setEnabled(true)}else{a[2].setEnabled(false);a[2].setValue("");a[2].setPlaceholder("");a[4].setEnabled(true);a[4].setPlaceholder(this.sEnterValuePlaceHolder);a[3].setEnabled(false);a[3].setSelected(false)}},addRow:function(){var e=this.getView();var a=e.getModel();var i=a.getProperty("/config/rows");var n=t.getEmptyRowObj();i.push(n);a.setProperty("/config/rows",i)},deleteRow:function(){var e=this.getView();var t=e.getModel();var a=t.getProperty("/config/rows");var i=e.byId("mappingSignatureTable");var n=i.getSelectedIndices();var r=n.sort(function(e,t){return t-e}).slice();for(var s=0;s<r.length;s++){i.removeSelectionInterval(r[s],r[s]);a.splice(r[s],1)}t.setProperty("/config/rows",a)},checkDuplicateNames:function(e){var a=this.getView().getModel();var r=a.getProperty("/config/rows");var s=sap.ui.getCore().byId(e.getParameter("id"));var o=e.getParameter("newValue");if(o!=""&&!/^[\w-/]+$/.test(o)){s.setValueState(n.Error);i.alert(this.sInvalidParmMsg,this.focusNameField.bind(s),this.sDuplicateErrorTitle)}if(t.tableHasDuplicateParameterNames(r)){s.setValueState(n.Error);i.alert(this.sDuplicateErrorMsg,this.focusNameField.bind(s),this.sDuplicateErrorTitle)}else{s.setValueState(n.None)}},focusNameField:function(){this.focus()},onValueHelpRequest:function(e){t.objectSelectOnValueHelpRequest(this,e,false)},onActionValueHelpRequest:function(e){t.actionSelectOnValueHelpRequest(this,e)},onRoleValueHelpRequest:function(e){t.roleSelectOnValueHelpRequest(this,e)},onInstanceValueHelpRequest:function(e){t.instanceSelectOnValueHelpRequest(this,e)},instanceSuggest:function(e){t.instanceSuggest(this,e)},aliasSuggest:function(e){t.aliasSuggest(this,e)},onAliasValueHelpRequest:function(e){t.applicationAliasSelectOnValueHelpRequest(this,e)},onFormFactorChange:function(){var e=this.getView().getModel();e.setProperty("/config/formFactorConfigDefault",false)},onApplicationTypeChange:function(e){var a=e.getParameters();if(a.selectedItem){t.displayApplicationTypeFields(a.selectedItem.getKey(),this.getView())}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncher/Component", ["sap/ui/core/mvc/View","sap/ui/core/UIComponent"],function(e,t){"use strict";return t.extend("sap.ushell.components.tiles.applauncher",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var t=this.getComponentData();return e.create({viewName:"module:sap/ushell/components/tiles/applauncher/StaticTileTmp.view",viewData:t})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncher/Configuration.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/ListItem"],function(e,t,n){"use strict";return e.extend("sap.ushell.components.tiles.applauncher.Configuration",{onConfigurationInputChange:function(e){t.checkInput(this.getView(),e)},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var e=this.getView(),i=e.byId("targetUrl"),o=e.byId("navigation_semantic_objectInput"),a=e.byId("navigation_semantic_actionInput"),c=t.getResourceBundleModel();e.setModel(c,"i18n");var l=c.getResourceBundle();e.setViewName("sap.ushell.components.tiles.applauncher.Configuration");t.createSemanticObjectModel(this,o,this.aDefaultObjects);t.createActionModel(this,a);o.attachChange(function(t){var n=t.getSource().getValue();e.getModel().setProperty("/config/navigation_semantic_object",n)});function u(e){return!e}i.bindProperty("enabled",{formatter:u,path:"/config/navigation_use_semantic_object"});var s=new n({key:"URL",text:l.getText("configuration.tile_actions.table.target_type.url")});e.byId("targetTypeCB").addItem(s);s=new n({key:"INT",text:l.getText("configuration.tile_actions.table.target_type.intent")});e.byId("targetTypeCB").addItem(s)},onAfterRendering:function(){t.updateMessageStripForOriginalLanguage(this.getView())},onValueHelpRequest:function(e){t.objectSelectOnValueHelpRequest(this,e,false)},onActionValueHelpRequest:function(e){t.actionSelectOnValueHelpRequest(this,e,false)},onCheckBoxChange:function(e){var n=this.getView(),i=n.byId("navigation_semantic_objectInput"),o=i.getModel(),a=e.getSource().getSelected();o.setProperty("/enabled",a);t.checkInput(this.getView(),e)},onIconValueHelpRequest:function(e){t.iconSelectOnValueHelpRequest(this,e,false)},onSelectIconClose:function(){t.onSelectIconClose(this.getView())},onSelectIconOk:function(){t.onSelectIconOk(this.getView())},handleTargetTypeChange:function(e){t.onTargetTypeChange(e)},onTileActionValueHelp:function(e){t.objectSelectOnValueHelpRequest(this,e,true)},onTileActionIconValueHelp:function(e){t.iconSelectOnValueHelpRequest(this,e,true)},addRow:function(){t.addTileActionsRow(this.getView())},deleteRow:function(){t.deleteTileActionsRow(this.getView())}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncher/StaticTile.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/m/library","sap/ushell/library","sap/ui/model/json/JSONModel","sap/base/Log","sap/ui/thirdparty/jquery","sap/ushell/utils/UrlParsing"],function(e,t,i,a,r,n,o,s,l,jQuery,g){"use strict";var p=n.GenericTileScope;var c=n.GenericTileMode;var _=o.AppType;return e.extend("sap.ushell.components.tiles.applauncher.StaticTile",{_aDoables:[],onInit:function(){var e=this.getView();var r=e.getViewData();var n=r.chip;var o=t.getAppLauncherConfig(n,n.configurationUi.isEnabled(),false);var l=this;var p=o.navigation_target_url;var _;this.oShellModel=i.getElementsModel();var u=n.url.getApplicationSystem();if(u){if(g.isIntentUrl(p)){_=g.parseShellHash(p);if(!_.params){_.params={}}_.params["sap-system"]=u;p="#"+g.constructShellHash(_)}else{p+=(p.indexOf("?")<0?"?":"&")+"sap-system="+u}}this.navigationTargetUrl=p;var f=new s({sizeBehavior:a.last("/core/home/sizeBehavior"),wrappingType:a.last("/core/home/wrappingType"),config:o,mode:o.display_mode,nav:{navigation_target_url:n.configurationUi&&n.configurationUi.isEnabled()?"":p},search:{display_highlight_terms:[]}});e.setModel(f);this._aDoables.push(a.on("/core/home/sizeBehavior").do(function(e){f.setProperty("/sizeBehavior",e)}));if(n.types){n.types.attachSetType(function(e){if(l.tileType!==e){if(e==="link"){f.setProperty("/mode",c.LineMode)}else{f.setProperty("/mode",f.getProperty("/config/display_mode"))}l.tileType=e}})}if(!this.tileType){this.tileType="tile"}if(n.search){var d=e.getModel().getProperty("/config/display_search_keywords");var y=d.split(/[, ]+/).filter(function(e){return e&&e!==""});if(o.display_title_text&&o.display_title_text!==""&&y.indexOf(o.display_title_text)===-1){y.push(o.display_title_text)}if(o.display_subtitle_text&&o.display_subtitle_text!==""&&y.indexOf(o.display_subtitle_text)===-1){y.push(o.display_subtitle_text)}if(o.display_info_text&&o.display_info_text!==""&&y.indexOf(o.display_info_text)===-1){y.push(o.display_info_text)}n.search.setKeywords(y);n.search.attachHighlight(function(t){e.getModel().setProperty("/search/display_highlight_terms",t)})}if(n.bag&&n.bag.attachBagsUpdated){n.bag.attachBagsUpdated(function(i){if(i.indexOf("tileProperties")>-1){t._updateTilePropertiesTexts(e,n.bag.getBag("tileProperties"))}})}if(n.configuration&&n.configuration.attachConfigurationUpdated){n.configuration.attachConfigurationUpdated(function(i){if(i.indexOf("tileConfiguration")>-1){t._updateTileConfiguration(e,n.configuration.getParameterValueAsString("tileConfiguration"))}})}if(n.preview){n.preview.setTargetUrl(p);n.preview.setPreviewIcon(o.display_icon_url);n.preview.setPreviewTitle(o.display_title_text);if(n.preview.setPreviewSubtitle&&typeof n.preview.setPreviewSubtitle==="function"){n.preview.setPreviewSubtitle(o.display_subtitle_text)}}if(n.configurationUi.isEnabled()){n.configurationUi.setAsyncUiProvider(function(){return t.getConfigurationUi(e,"sap.ushell.components.tiles.applauncher.Configuration").then(function(e){n.configurationUi.attachCancel(l.onCancelConfiguration.bind(null,e));n.configurationUi.attachSave(l.onSaveConfiguration.bind(null,e));return e})});this.getView().getContent()[0].setTooltip(t.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"))}if(n.actions){var v=[];var h=o.actions;if(h){v=h.slice()}if(a.last("/core/shell/enablePersonalization")){var w=f.getProperty("/mode")===c.LineMode?"link":"tile";var b=t.getTileSettingsAction(f,this.onSaveRuntimeSettings.bind(this),w);v.push(b)}n.actions.setActionsProvider(function(){return v})}},onExit:function(){this._aDoables.forEach(function(e){e.off()});this._aDoables=[]},onPress:function(e){var t=this.getView();var i=t.getViewData();var n=i.chip;var o=t.getModel().getProperty("/config");if(e.getSource().getScope&&e.getSource().getScope()===p.Display){if(n.configurationUi.isEnabled()){n.configurationUi.display()}else if(this.navigationTargetUrl){if(this.navigationTargetUrl[0]==="#"){hasher.setHash(this.navigationTargetUrl)}else{var s=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(s){var l={title:o.display_title_text,appType:_.URL,url:o.navigation_target_url,appId:o.navigation_target_url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(l)}r.openURL(this.navigationTargetUrl,"_blank")}}}},onSaveRuntimeSettings:function(e){var t=e.getModel();var i=this.getView().getViewData().chip;var a=this.getView().getModel().getProperty("/config");a.display_title_text=t.getProperty("/title")||"";a.display_subtitle_text=t.getProperty("/subtitle")||"";a.display_info_text=t.getProperty("/info")||"";a.display_search_keywords=t.getProperty("/keywords")||"";var r=i.bag.getBag("tileProperties");r.setText("display_title_text",a.display_title_text);r.setText("display_subtitle_text",a.display_subtitle_text);r.setText("display_info_text",a.display_info_text);r.setText("display_search_keywords",a.display_search_keywords);function n(e){l.error(e,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller")}r.save(function(){l.debug("property bag 'tileProperties' saved successfully");this.getView().getModel().setProperty("/config/display_title_text",a.display_title_text);this.getView().getModel().setProperty("/config/display_subtitle_text",a.display_subtitle_text);this.getView().getModel().setProperty("/config/display_info_text",a.display_info_text);this.getView().getModel().setProperty("/config/display_search_keywords",a.display_search_keywords);this.getView().getModel().refresh()}.bind(this),n)},onSaveConfiguration:function(e){var i=new jQuery.Deferred;var a=e.getModel();var r=a.getProperty("/tileModel");var n=e.getViewData().chip;var o=t.tileActionsRows2TileActionsArray(a.getProperty("/config/tile_actions_rows"));var g={display_icon_url:a.getProperty("/config/display_icon_url"),navigation_use_semantic_object:a.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:a.getProperty("/config/navigation_target_url"),navigation_semantic_object:(a.getProperty("/config/navigation_semantic_object")||"").trim(),navigation_semantic_action:(a.getProperty("/config/navigation_semantic_action")||"").trim(),navigation_semantic_parameters:(a.getProperty("/config/navigation_semantic_parameters")||"").trim(),display_search_keywords:a.getProperty("/config/display_search_keywords")};var p=t.checkInputOnSaveConfig(e);if(!p){p=t.checkTileActions(e)}if(p){i.reject("mandatory_fields_missing");return i.promise()}if(g.navigation_use_semantic_object){g.navigation_target_url=t.getSemanticNavigationUrl(g);a.setProperty("/config/navigation_target_url",g.navigation_target_url)}var c=n.bag.getBag("tileProperties");c.setText("display_title_text",a.getProperty("/config/display_title_text"));c.setText("display_subtitle_text",a.getProperty("/config/display_subtitle_text"));c.setText("display_info_text",a.getProperty("/config/display_info_text"));c.setText("display_search_keywords",g.display_search_keywords);var _=n.bag.getBag("tileNavigationActions");t.populateTileNavigationActionsBag(_,o);function u(e,t){l.error(e,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");i.reject(e,t)}n.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(g)},function(){var a=t.getAppLauncherConfig(n,false,false);var o=t.getAppLauncherConfig(n,true,false);var g=new s({config:a,nav:{navigation_target_url:""},tileModel:r});e.setModel(g);r.setData({config:o,nav:{navigation_target_url:""}},false);if(n.preview){n.preview.setTargetUrl(a.navigation_target_url);n.preview.setPreviewIcon(a.display_icon_url);n.preview.setPreviewTitle(a.display_title_text);if(n.preview.setPreviewSubtitle&&typeof n.preview.setPreviewSubtitle==="function"){n.preview.setPreviewSubtitle(a.display_subtitle_text)}}c.save(function(){l.debug("property bag 'tileProperties' saved successfully");if(n.title){n.title.setTitle(a.display_title_text,function(){i.resolve()},u)}else{i.resolve()}},u);_.save(function(){l.debug("property bag 'navigationProperties' saved successfully")},u)},u);e.destroy();return i.promise()},onCancelConfiguration:function(e){var i=e.getViewData();var a=e.getModel();var r=a.getProperty("/tileModel");var n=i.chip;var o=t.getAppLauncherConfig(n,n.configurationUi.isEnabled(),false);e.getModel().setData({config:o,nav:{navigation_target_url:""},tileModel:r},false);e.destroy()},formatters:{leanURL:r.getLeanURL.bind(r)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncher/StaticTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/ushell/components/tiles/applauncher/StaticTile.controller"],function(e,t,n,i){"use strict";sap.ui.jsview("sap.ushell.components.tiles.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncher.StaticTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");return this.getTileControl()},getTileControl:function(){var e=this.getController();if(this.getContent().length===1){return this.getContent()[0]}return new t({mode:"{= ${/mode} || (${/config/display_icon_url} ? 'ContentMode' : 'HeaderMode') }",header:"{/config/display_title_text}",subheader:"{/config/display_subtitle_text}",sizeBehavior:"{/sizeBehavior}",wrappingType:"{/wrappingType}",url:{parts:["/targetURL","/nav/navigation_target_url"],formatter:e.formatters.leanURL},size:"Auto",tileContent:new i({size:"Auto",footer:"{/config/display_info_text}",content:new n({src:"{/config/display_icon_url}"})}),press:[e.onPress,e]})},getMode:function(){return this.getModel().getProperty("/mode")||(this.getModel().getProperty("/config/display_icon_url")?"ContentMode":"HeaderMode")}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncher/StaticTileTmp.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/ushell/components/tiles/applauncher/StaticTile.controller"],function(e,t,n,i){"use strict";return e.extend("sap.ushell.components.tiles.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncher.StaticTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");return this.getTileControl()},getTileControl:function(){var e=this.getController();if(this.getContent().length===1){return this.getContent()[0]}return new t({mode:"{= ${/mode} || (${/config/display_icon_url} ? 'ContentMode' : 'HeaderMode') }",header:"{/config/display_title_text}",subheader:"{/config/display_subtitle_text}",sizeBehavior:"{/sizeBehavior}",wrappingType:"{/wrappingType}",url:{parts:["/targetURL","/nav/navigation_target_url"],formatter:e.formatters.leanURL},size:"Auto",tileContent:new i({size:"Auto",footer:"{/config/display_info_text}",content:new n({src:"{/config/display_icon_url}"})}),press:[e.onPress,e]})},getMode:function(){return this.getModel().getProperty("/mode")||(this.getModel().getProperty("/config/display_icon_url")?"ContentMode":"HeaderMode")}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncherdynamic/Component", ["sap/ui/core/mvc/View","sap/ui/core/UIComponent"],function(e,n){"use strict";return n.extend("sap.ushell.components.tiles.applauncherdynamic",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var n=this.getComponentData();return e.create({viewName:"module:sap/ushell/components/tiles/applauncherdynamic/DynamicTileTmp.view",viewData:n})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncherdynamic/Configuration.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/ListItem"],function(e,t,n){"use strict";return e.extend("sap.ushell.components.tiles.applauncherdynamic.Configuration",{onConfigurationInputChange:function(e){t.checkInput(this.getView(),e)},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var e=this.getView(),i=e.byId("navigation_semantic_objectInput"),o=e.byId("navigation_semantic_actionInput"),a=t.getResourceBundleModel();e.setModel(a,"i18n");var c=a.getResourceBundle();e.setViewName("sap.ushell.components.tiles.applauncherdynamic.Configuration");t.createSemanticObjectModel(this,i,this.aDefaultObjects);t.createActionModel(this,o,this.aDefaultObjects);i.attachChange(function(t){var n=t.getSource().getValue();e.getModel().setProperty("/config/navigation_semantic_object",n)});o.attachChange(function(t){var n=t.getSource().getValue();e.getModel().setProperty("/config/navigation_semantic_action",n)});e.byId("targetUrl").bindProperty("enabled",{formatter:function(e){return!e},path:"/config/navigation_use_semantic_object"});var l=new n({key:"URL",text:c.getText("configuration.tile_actions.table.target_type.url")});e.byId("targetTypeCB").addItem(l);l=new n({key:"INT",text:c.getText("configuration.tile_actions.table.target_type.intent")});e.byId("targetTypeCB").addItem(l)},onAfterRendering:function(){t.updateMessageStripForOriginalLanguage(this.getView())},onValueHelpRequest:function(e){t.objectSelectOnValueHelpRequest(this,e,false)},onActionValueHelpRequest:function(e){t.actionSelectOnValueHelpRequest(this,e,false)},onCheckBoxChange:function(e){var n=this.getView(),i=n.byId("navigation_semantic_objectInput"),o=i.getModel(),a=e.getSource().getSelected();o.setProperty("/enabled",a);t.checkInput(this.getView(),e)},onIconValueHelpRequest:function(e){t.iconSelectOnValueHelpRequest(this,e,false)},onSelectIconClose:function(){t.onSelectIconClose(this.getView())},onSelectIconOk:function(){t.onSelectIconOk(this.getView())},handleTargetTypeChange:function(e){t.onTargetTypeChange(e)},onTileActionValueHelp:function(e){t.objectSelectOnValueHelpRequest(this,e,true)},onTileActionIconValueHelp:function(e){t.iconSelectOnValueHelpRequest(this,e,true)},addRow:function(){t.addTileActionsRow(this.getView())},deleteRow:function(){t.deleteTileActionsRow(this.getView())}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncherdynamic/DynamicTile.controller", ["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/m/library","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils/DynamicTileRequest","sap/ushell/utils/UrlParsing","sap/ushell/utils"],function(e,t,i,a,r,s,n,o,jQuery,l,g,p,u){"use strict";var c=n.GenericTileScope;var f=n.GenericTileMode;var d=e.AppType;var _="sap.ushell.components.tiles.applauncherdynamic.DynamicTile";return t.extend(_,{_aDoables:[],oDataRequest:null,sConfigNavigationTargetUrlOld:"",REFRESH_INTERVAL_MIN:10,constructTargetUrlWithSapSystem:function(e,t){var i;if(t){if(p.isIntentUrl(e)){i=p.parseShellHash(e);if(!i.params){i.params={}}i.params["sap-system"]=t;e="#"+p.constructShellHash(i)}else{e+=(e.indexOf("?")<0?"?":"&")+"sap-system="+t}}return e},onInit:function(){var e=this;var t=this.getView();var s=t.getViewData();var n=s.chip;var g=i.getAppLauncherConfig(n,n.configurationUi.isEnabled(),false);var p=g.navigation_target_url;var u=n.url.getApplicationSystem();this.sConfigNavigationTargetUrlOld=g.navigation_target_url;l.setLevel(2,_);this.bIsRequestCompleted=false;this.oShellModel=a.getElementsModel();this.navigationTargetUrl=this.constructTargetUrlWithSapSystem(p,u);var c=new o({sizeBehavior:r.last("/core/home/sizeBehavior"),wrappingType:r.last("/core/home/wrappingType"),config:g,mode:g.display_mode||f.ContentMode,data:i.getDataToDisplay(g,{number:n.preview&&n.preview.isEnabled()?1234:"..."}),nav:{navigation_target_url:n.configurationUi&&n.configurationUi.isEnabled()?"":this.navigationTargetUrl},search:{display_highlight_terms:[]}});t.setModel(c);this._aDoables.push(r.on("/core/home/sizeBehavior").do(function(e){c.setProperty("/sizeBehavior",e)}));if(n.types){n.types.attachSetType(function(t){if(e.tileType!==t){if(t==="link"){c.setProperty("/mode",f.LineMode)}else{c.setProperty("/mode",c.getProperty("/config/display_mode")||f.ContentMode)}e.tileType=t}})}if(!this.tileType){this.tileType="tile"}if(n.search){var d=t.getModel().getProperty("/config/display_search_keywords");var v=d.split(/[, ]+/).filter(function(e,t){return e&&e!==""});if(g.display_title_text&&g.display_title_text!==""&&v.indexOf(g.display_title_text)===-1){v.push(g.display_title_text)}if(g.display_subtitle_text&&g.display_subtitle_text!==""&&v.indexOf(g.display_subtitle_text)===-1){v.push(g.display_subtitle_text)}if(g.display_info_text&&g.display_info_text!==""&&v.indexOf(g.display_info_text)===-1){v.push(g.display_info_text)}if(g.display_number_unit&&g.display_number_unit!==""&&v.indexOf(g.display_number_unit)===-1){v.push(g.display_number_unit)}n.search.setKeywords(v);n.search.attachHighlight(function(e){t.getModel().setProperty("/search/display_highlight_terms",e)})}if(n.bag&&n.bag.attachBagsUpdated){n.bag.attachBagsUpdated(function(e){if(e.indexOf("tileProperties")>-1){i._updateTilePropertiesTexts(t,n.bag.getBag("tileProperties"))}})}if(n.configuration&&n.configuration.attachConfigurationUpdated){n.configuration.attachConfigurationUpdated(function(e){if(e.indexOf("tileConfiguration")>-1){i._updateTileConfiguration(t,n.configuration.getParameterValueAsString("tileConfiguration"))}})}if(n.preview){n.preview.setTargetUrl(this.navigationTargetUrl);n.preview.setPreviewIcon(g.display_icon_url);n.preview.setPreviewTitle(g.display_title_text);if(n.preview.setPreviewSubtitle&&typeof n.preview.setPreviewSubtitle==="function"){n.preview.setPreviewSubtitle(g.display_subtitle_text)}}if(n.configurationUi.isEnabled()){n.configurationUi.setAsyncUiProvider(function(){return i.getConfigurationUi(t,"sap.ushell.components.tiles.applauncherdynamic.Configuration").then(function(t){n.configurationUi.attachCancel(e.onCancelConfiguration.bind(null,t));n.configurationUi.attachSave(e.onSaveConfiguration.bind(null,t));return t})});this.getView().getContent()[0].setTooltip(i.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"))}else if(!n.preview||!n.preview.isEnabled()){if(!u){sap.ushell.Container.addRemoteSystemForServiceUrl(g.service_url)}this.bNeedsRefresh=true;this.iNrOfTimerRunning=0}if(n.refresh){n.refresh.attachRefresh(this.refreshHandler.bind(this))}if(n.visible){n.visible.attachVisible(this.visibleHandler.bind(this))}if(n.actions){var h;var y=g.actions;if(y){h=y.slice()}else{h=[]}if(r.last("/core/shell/enablePersonalization")){var b=c.getProperty("/mode")===f.LineMode?"link":"tile";var m=i.getTileSettingsAction(c,this.onSaveRuntimeSettings.bind(this),b);h.push(m)}n.actions.setActionsProvider(function(){return h})}sap.ui.getCore().getEventBus().subscribe("launchpad","sessionTimeout",this._clearRequest,this)},stopRequests:function(){if(this.oDataRequest){if(this.oDataRequest.abort()){this.bNeedsRefresh=true}}},_clearRequest:function(){this.stopRequests();clearTimeout(this.timer)},onExit:function(){if(this.oDataRequest){this._clearRequest();this.oDataRequest.destroy()}sap.ui.getCore().getEventBus().unsubscribe("launchpad","sessionTimeout",this._clearRequest,this);this._aDoables.forEach(function(e){e.off()});this._aDoables=[]},onPress:function(e){var t=this.getView();var i=t.getViewData();var a=t.getModel();var n=a.getProperty("/nav/navigation_target_url");var o=i.chip;var l=a.getProperty("/config");if(e.getSource().getScope&&e.getSource().getScope()===c.Display){if(o.configurationUi.isEnabled()){o.configurationUi.display()}else if(n){if(n[0]==="#"){hasher.setHash(n)}else{var g=r.last("/core/shell/enableRecentActivity")&&r.last("/core/shell/enableRecentActivityLogging");if(g){var p={title:l.display_title_text,appType:d.URL,url:l.navigation_target_url,appId:l.navigation_target_url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(p)}s.openURL(n,"_blank")}}}},onSaveRuntimeSettings:function(e){var t=this.getView();var i=t.getModel();var a=t.getViewData().chip;var r=i.getProperty("/config");var s=e.getModel();r.display_title_text=s.getProperty("/title")||"";r.display_subtitle_text=s.getProperty("/subtitle")||"";r.display_info_text=s.getProperty("/info")||"";r.display_search_keywords=s.getProperty("/keywords")||"";var n=a.bag.getBag("tileProperties");n.setText("display_title_text",r.display_title_text);n.setText("display_subtitle_text",r.display_subtitle_text);n.setText("display_info_text",r.display_info_text);n.setText("display_search_keywords",r.display_search_keywords);function o(e){l.error(e,null,_)}n.save(function(){l.debug("property bag 'tileProperties' saved successfully");i.setProperty("/config",r);i.setProperty("/data/display_title_text",r.display_title_text);i.setProperty("/data/display_subtitle_text",r.display_subtitle_text);i.setProperty("/data/display_info_text",r.display_info_text);i.refresh()},o)},onSaveConfiguration:function(e){var t=new jQuery.Deferred;var a=e.getModel();var r=a.getProperty("/tileModel");var s=e.getViewData().chip;var n=i.tileActionsRows2TileActionsArray(a.getProperty("/config/tile_actions_rows"));var g={display_icon_url:a.getProperty("/config/display_icon_url"),display_number_unit:a.getProperty("/config/display_number_unit"),service_url:a.getProperty("/config/service_url"),service_refresh_interval:a.getProperty("/config/service_refresh_interval"),navigation_use_semantic_object:a.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:a.getProperty("/config/navigation_target_url"),navigation_semantic_object:(a.getProperty("/config/navigation_semantic_object")||"").trim(),navigation_semantic_action:(a.getProperty("/config/navigation_semantic_action")||"").trim(),navigation_semantic_parameters:(a.getProperty("/config/navigation_semantic_parameters")||"").trim(),display_search_keywords:a.getProperty("/config/display_search_keywords")};var p=i.checkInputOnSaveConfig(e);if(!p){p=i.checkTileActions(e)}if(p){t.reject("mandatory_fields_missing");return t.promise()}if(g.navigation_use_semantic_object){g.navigation_target_url=i.getSemanticNavigationUrl(g);a.setProperty("/config/navigation_target_url",g.navigation_target_url)}var u=s.bag.getBag("tileProperties");u.setText("display_title_text",a.getProperty("/config/display_title_text"));u.setText("display_subtitle_text",a.getProperty("/config/display_subtitle_text"));u.setText("display_info_text",a.getProperty("/config/display_info_text"));u.setText("display_search_keywords",g.display_search_keywords);var c=s.bag.getBag("tileNavigationActions");i.populateTileNavigationActionsBag(c,n);function f(e,i){l.error(e,null,_);t.reject(e,i)}s.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(g)},function(){var a=i.getAppLauncherConfig(s,false,false);var n=i.getAppLauncherConfig(s,true,false);var g=new o({config:a,tileModel:r});e.setModel(g);r.setData({data:n,nav:{navigation_target_url:""}},false);if(s.preview){s.preview.setTargetUrl(a.navigation_target_url);s.preview.setPreviewIcon(a.display_icon_url);s.preview.setPreviewTitle(a.display_title_text);if(s.preview.setPreviewSubtitle&&typeof s.preview.setPreviewSubtitle==="function"){s.preview.setPreviewSubtitle(a.display_subtitle_text)}}u.save(function(){l.debug("property bag 'tileProperties' saved successfully");if(s.title){s.title.setTitle(a.display_title_text,function(){t.resolve()},f)}else{t.resolve()}},f);c.save(function(){l.debug("property bag 'navigationProperties' saved successfully")},f)},f);return t.promise()},successHandlerFn:function(e){var t=this.getView();var a=t.getModel();var r=a.getProperty("/config");var s=a.getProperty("/config/navigation_target_url");var n=a.getProperty("/config/service_refresh_interval");var o=a.getProperty("/config/service_url");var g=t.getViewData();var p=g.chip;var u=p.url.getApplicationSystem();if(g.properties&&g.properties.info){if(typeof e==="object"){e.info=g.properties.info}}var c=i.getDataToDisplay(r,e);a.setProperty("/data",c);if(this.sConfigNavigationTargetUrlOld!==s){this.navigationTargetUrl=this.constructTargetUrlWithSapSystem(s,u);this.sConfigNavigationTargetUrlOld=this.navigationTargetUrl}a.setProperty("/nav/navigation_target_url",i.addParamsToUrl(this.navigationTargetUrl,c));if(n>0){n=Math.max(n,this.REFRESH_INTERVAL_MIN);l.info("Wait "+n+" seconds before calling "+o+" again",null,_);this.refeshAfterInterval(n)}},errorHandlerFn:function(e,t){var i=this.getView();var a=i.getModel();var r=a.getProperty("/config/service_url");var s=e&&e.message?e.message:e;if(e.statusText==="Abort"||e.aborted===true){l.info("Data request from service "+r+" was aborted",null,_)}else{if(e.response){s+=" - "+e.response.statusCode+" "+e.response.statusText}var n=t?l.warning:l.error;n("Failed to update data via service\n service URL: "+r+"\n "+s,null,_);this._setTileIntoErrorState()}},_setTileIntoErrorState:function(){var e=i.getResourceBundleModel().getResourceBundle();var t=this.getView().getModel();var a=t.getProperty("/config");t.setProperty("/data",i.getDataToDisplay(a,{number:"???",info:e.getText("dynamic_data.error"),infoState:"Critical"}))},onCancelConfiguration:function(e){var t=e.getViewData();var a=e.getModel();var r=a.getProperty("/tileModel");var s=t.chip;var n=i.getAppLauncherConfig(s,false,false);a.setData({config:n,tileModel:r},false)},loadData:function(){var e=this.getView();var t=e.getViewData().chip;var i=e.getModel();var a=i.getProperty("/config/service_url");if(/;o=([;/?]|$)/.test(a)){a=t.url.addSystemToServiceUrl(a)}if(!a){l.error("No service URL given!",_);this._setTileIntoErrorState();return}if(!this.oDataRequest||this.oDataRequest.sUrl!==a){if(this.oDataRequest){this.oDataRequest.destroy()}this.sRequestUrl=a;var r={dataSource:i.getProperty("/config/data_source")};this.oDataRequest=new g(a,this.successHandlerFn.bind(this),this.errorHandlerFn.bind(this),"",r)}else if(this.oDataRequest){this.oDataRequest.refresh()}},refreshTile:function(){var e=this.getView();var t=e.getViewData();var i=t.chip.visible.isVisible();if(i&&this.bNeedsRefresh){this.bNeedsRefresh=false;this.loadData()}},refeshAfterInterval:function(e){this.iNrOfTimerRunning++;this.timer=window.setTimeout(function(){this.iNrOfTimerRunning--;if(this.iNrOfTimerRunning===0){this.bNeedsRefresh=true;this.refreshTile()}}.bind(this),u.sanitizeTimeoutDelay(e*1e3))},refreshHandler:function(){this.bNeedsRefresh=true;this.refreshTile()},visibleHandler:function(e){if(e){this.refreshTile()}else{this.stopRequests()}},formatters:{leanURL:s.getLeanURL.bind(s)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncherdynamic/DynamicTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/TileContent","sap/m/library","sap/m/NumericContent","sap/ushell/components/tiles/applauncherdynamic/DynamicTile.controller"],function(t,e,a,i,n){"use strict";var r=i.ValueColor;sap.ui.jsview("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncherdynamic.DynamicTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");return this.getTileControl()},getTileControl:function(){var t=this.getController();if(this.getContent().length===1){return this.getContent()[0]}return new e({mode:"{/mode}",header:"{/data/display_title_text}",subheader:"{/data/display_subtitle_text}",size:"Auto",sizeBehavior:"{/sizeBehavior}",wrappingType:"{/wrappingType}",url:{parts:["/targetURL","/nav/navigation_target_url"],formatter:t.formatters.leanURL},tileContent:[new a({size:"Auto",footer:"{/data/display_info_text}",footerColor:{path:"/data/display_info_state",formatter:function(t){if(t==="Positive"){t=r.Good}if(t==="Negative"){t=r.Error}if(!r[t]){t=r.Neutral}return t}},unit:"{/data/display_number_unit}",content:[new n({scale:"{/data/display_number_factor}",value:"{/data/display_number_value}",truncateValueTo:5,indicator:"{/data/display_state_arrow}",valueColor:{path:"/data/display_number_state",formatter:function(t){if(!t||t==="Neutral"||!r[t]){return r.None}return t}},icon:"{/data/display_icon_url}",width:"100%",withMargin:false})]})],press:[t.onPress,t]})},getMode:function(){return this.getModel().getProperty("/mode")}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncherdynamic/DynamicTileTmp.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/TileContent","sap/m/library","sap/m/NumericContent","sap/ushell/components/tiles/applauncherdynamic/DynamicTile.controller"],function(t,e,a,n,i){"use strict";var r=n.ValueColor;return t.extend("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncherdynamic.DynamicTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");return this.getTileControl()},getTileControl:function(){var t=this.getController();if(this.getContent().length===1){return this.getContent()[0]}return new e({mode:"{/mode}",header:"{/data/display_title_text}",subheader:"{/data/display_subtitle_text}",size:"Auto",sizeBehavior:"{/sizeBehavior}",wrappingType:"{/wrappingType}",url:{parts:["/targetURL","/nav/navigation_target_url"],formatter:t.formatters.leanURL},tileContent:[new a({size:"Auto",footer:"{/data/display_info_text}",footerColor:{path:"/data/display_info_state",formatter:function(t){if(t==="Positive"){t=r.Good}if(t==="Negative"){t=r.Error}if(!r[t]){t=r.Neutral}return t}},unit:"{/data/display_number_unit}",content:[new i({scale:"{/data/display_number_factor}",value:"{/data/display_number_value}",truncateValueTo:5,indicator:"{/data/display_state_arrow}",valueColor:{path:"/data/display_number_state",formatter:function(t){if(!t||t==="Neutral"||!r[t]){return r.None}return t}},icon:"{/data/display_icon_url}",width:"100%",withMargin:false})]})],press:[t.onPress,t]})},getMode:function(){return this.getModel().getProperty("/mode")}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(t,e){"use strict";return e.extend("sap.ushell.components.tiles.cdm.applauncher.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var e=this.getComponentData();var n=e.properties.tilePersonalization||{};var o=e.startupParameters;if(o&&o["sap-system"]){n["sap-system"]=o["sap-system"][0]}return t.create({viewName:"sap.ushell.components.tiles.cdm.applauncher.StaticTile",viewData:{properties:e.properties,configuration:n}}).then(function(t){this._oController=t.getController();t.getContent()[0].bindTileContent({path:"/properties",factory:this._oController._getTileContent.bind(this._oController)});return t}.bind(this))},tileSetVisualProperties:function(t){if(this._oController){this._oController.updatePropertiesHandler(t)}},tileRefresh:function(){},tileSetVisible:function(t){},tileSetEditMode:function(t){if(this._oController){this._oController.editModeHandler(t)}},exit:function(){this._oController=null}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/StaticTile.controller", ["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/base/Log","sap/ushell/utils/UrlParsing"],function(e,t,i,r,o,n,s,a){"use strict";var l=n.GenericTileScope;var p=n.GenericTileMode;var c=e.DisplayFormat;var u=e.AppType;return t.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{_aDoables:[],_getConfiguration:function(){var e=this.getView().getViewData();e.properties.sizeBehavior=i.last("/core/home/sizeBehavior");e.properties.wrappingType=i.last("/core/home/wrappingType");return e},_setShowContentProviderInfoOnVisualizations:function(e,t,i){if(!e){i.setProperty("/properties/showContentProviderInfoOnVisualizations",false);return Promise.resolve()}return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext(t)}).then(function(e){i.setProperty("/properties/contentProviderLabel",e.label);i.setProperty("/properties/showContentProviderInfoOnVisualizations",true)}).catch(function(e){s.error("StaticTile.controller threw an error:",e)})},onInit:function(){var e=this.getView();var t=new o;t.setData(this._getConfiguration());e.setModel(t);this._aDoables.push(i.on("/core/home/sizeBehavior").do(function(e){t.setProperty("/properties/sizeBehavior",e)}));var r=this.getView().getViewData();var n=r.properties;var s=r.properties.contentProviderId;n.mode=n.mode||(n.icon?"ContentMode":"HeaderMode");if(n.displayFormat===c.Compact&&n.title&&n.targetURL){t.setProperty("/properties/mode",p.LineMode)}switch(n.displayFormat){case c.Flat:t.setProperty("/properties/frameType","OneByHalf");break;case c.FlatWide:t.setProperty("/properties/frameType","TwoByHalf");break;case c.StandardWide:t.setProperty("/properties/frameType","TwoByOne");break;default:{t.setProperty("/properties/frameType","OneByOne")}}this._setShowContentProviderInfoOnVisualizations(i.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations"),s,t);this._aDoables.push(i.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(function(e){this._setShowContentProviderInfoOnVisualizations(e,s,t)}.bind(this)))},onExit:function(){this._aDoables.forEach(function(e){e.off()});this._aDoables=[]},editModeHandler:function(e){var t=e?l.ActionMore:l.Display;this.getView().getModel().setProperty("/properties/scope",t)},onPress:function(e){var t=this.getView().getViewData().properties;if(e.getSource().getScope&&e.getSource().getScope()===l.Display){var o=this._createTargetUrl();if(!o){return}if(o[0]==="#"){hasher.setHash(o)}else{var n=i.last("/core/shell/enableRecentActivity")&&i.last("/core/shell/enableRecentActivityLogging");if(n){var s={title:t.title,appType:u.URL,url:t.targetURL,appId:t.targetURL};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(s)}r.openURL(o,"_blank")}}},updatePropertiesHandler:function(e){var t=this.getView().getContent()[0];var i=t.getTileContent()[0];if(typeof e.title!=="undefined"){t.setHeader(e.title)}if(typeof e.subtitle!=="undefined"){t.setSubheader(e.subtitle)}if(typeof e.icon!=="undefined"){i.getContent().setSrc(e.icon)}if(typeof e.info!=="undefined"){i.setFooter(e.info)}},_createTargetUrl:function(){var e=this.getView().getViewData().properties.targetURL;var t=this.getView().getViewData().configuration["sap-system"];var i;if(e&&t){if(a.isIntentUrl(e)){i=a.parseShellHash(e);if(!i.params){i.params={}}i.params["sap-system"]=t;e="#"+a.constructShellHash(i)}else{e+=(e.indexOf("?")<0?"?":"&")+"sap-system="+t}}return e},_getLeanUrl:function(){return r.getLeanURL(this._createTargetUrl())},_getTileContent:function(e,t){var i=t.getPath().split("/");i.pop();var r=t.getProperty(i.join("/"));if(r!==this.oLastBindingObject||this.oTileContent&&this.oTileContent.bIsDestroyed){this.oLastBindingObject=r;this.oTileContent=this.getView().byId(r.icon?"imageTileContent":"standardTileContent").clone()}return this.oTileContent},_getCurrentProperties:function(){var e=this.getView().getContent()[0];var t=e.getTileContent()[0];var r=i.last("/core/home/sizeBehavior");return{title:e.getHeader(),subtitle:e.getSubheader(),info:t.getFooter(),icon:t.getContent().getSrc(),mode:e.getMode(),sizeBehavior:r}}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/StaticTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent"],function(e,t,r,i){"use strict";return e.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncher.StaticTile"},createContent:function(e){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0]}return new t({mode:"{/properties/mode}",header:"{/properties/title}",scope:"{/properties/scope}",subheader:"{/properties/subtitle}",size:"Auto",sizeBehavior:"{/properties/sizeBehavior}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{path:"/properties/targetURL",formatter:e._getLeanUrl.bind(e)},tileContent:new i({size:"Auto",footer:"{/properties/info}",content:new r({src:"{/properties/icon}"})}),press:[e.onPress,e],additionalTooltip:"{/properties/contentProviderLabel}"})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(e,t){"use strict";return t.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var t=this.getComponentData();var r=t.properties||{};var i=r.tilePersonalization||{};var s=r.indicatorDataSource;if(s&&s.path){i.serviceUrl=s.path;i.serviceRefreshInterval=s.refresh}var o=t.startupParameters;if(o&&o["sap-system"]&&o["sap-system"][0]){i["sap-system"]=o["sap-system"][0]}if(i.serviceUrl&&i.serviceUrl.charAt(0)!=="/"&&r.dataSource&&r.dataSource.uri){var n=r.dataSource.uri;if(i["sap-system"]){if(n.charAt(n.length-1)==="/"){n=n.slice(0,n.length-1)}n+=";o="+i["sap-system"]}if(n.charAt(n.length-1)!=="/"){n+="/"}n+=i.serviceUrl;i.serviceUrl=n}return e.create({viewName:"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",viewData:{properties:r,configuration:i}}).then(function(e){this._oController=e.getController();this._oController.visibleHandler(this.bIsVisible);return e}.bind(this))},tileSetVisualProperties:function(e){if(this._oController){this._oController.updateVisualPropertiesHandler(e)}},tileRefresh:function(){if(this._oController){this._oController.refreshHandler()}},tileSetVisible:function(e){if(this._oController){this._oController.visibleHandler(e)}else{this.bIsVisible=e}},tileSetEditMode:function(e){if(this._oController){this._oController.editModeHandler(e)}},exit:function(){this._oController=null}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/ushell/library","sap/base/Log","sap/base/util/merge","sap/ushell/utils/DynamicTileRequest","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,r,i,a,o,s,n,l,u,f,p,d){"use strict";var c=s.GenericTileScope;var h=s.DeviationIndicator;var m=s.ValueColor;var g=s.FrameType;var v=n.DisplayFormat;var b=n.AppType;var y="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile";var _="<RESET>";var D={title:"",subtitle:"",icon:"",info:"",infoState:m.Neutral,targetURL:"",number_value:"...",number_unit:"",number_factor:"",number_state_arrow:h.None,number_value_state:m.Neutral};return e.extend(y,{_aDoables:[],timer:null,iLastTimeoutStart:0,oDataRequest:null,bShouldNotRefreshDataAfterInit:false,_getConfiguration:function(e){var t={};var r;t.configuration=e.configuration;t.properties=e.properties;t.properties.info=t.properties.info||D.info;t.properties.number_value=D.number_value;t.properties.number_value_state=D.number_value_state;t.properties.number_state_arrow=D.number_state_arrow;t.properties.number_factor=D.number_factor;t.properties.number_unit=t.properties.numberUnit||D.number_unit;var a=t.configuration["sap-system"];var o=t.properties.targetURL;if(o&&a){if(d.isIntentUrl(o)){r=d.parseShellHash(o);if(!r.params){r.params={}}r.params["sap-system"]=a;o="#"+d.constructShellHash(r)}else{o+=(o.indexOf("?")<0?"?":"&")+"sap-system="+a}t.properties.targetURL=o}t.properties.sizeBehavior=i.last("/core/home/sizeBehavior");t.properties.wrappingType=i.last("/core/home/wrappingType");switch(t.properties.displayFormat){case v.Flat:t.properties.frameType=g.OneByHalf;break;case v.FlatWide:t.properties.frameType=g.TwoByHalf;break;case v.StandardWide:t.properties.frameType=g.TwoByOne;break;default:{t.properties.frameType=g.OneByOne}}t.originalProperties=u({},e.properties);return t},_setShowContentProviderInfoOnVisualizations:function(e,t,r){if(!e){r.setProperty("/properties/showContentProviderInfoOnVisualizations",false);return Promise.resolve()}return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext(t)}).then(function(e){r.setProperty("/properties/contentProviderLabel",e.label);r.setProperty("/properties/showContentProviderInfoOnVisualizations",true)}).catch(function(e){l.error("DynamicTile.controller threw an error:",e)})},onInit:function(){var e=this.getView();var t=new o;var r=e.getViewData();var a=r.properties;t.setData(this._getConfiguration(r));var s=a.contentProviderId;this._setShowContentProviderInfoOnVisualizations(i.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations"),s,t);this._aDoables.push(i.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(function(e){this._setShowContentProviderInfoOnVisualizations(e,s,t)}.bind(this)));e.setModel(t);this._aDoables.push(i.on("/core/home/sizeBehavior").do(function(e){t.setProperty("/properties/sizeBehavior",e)}))},refreshHandler:function(){this.loadData(0,true)},visibleHandler:function(e){if(e){if(!this.oDataRequest||this.timer===null){this.initRequestInterval()}}else{this.stopRequests()}},editModeHandler:function(e){var t=e?c.ActionMore:c.Display;this.getView().getModel().setProperty("/properties/scope",t)},updateVisualPropertiesHandler:function(e){var t=this.getView().getModel().getProperty("/properties");var r=this.getView().getModel().getProperty("/originalProperties");if(p.isDefined(e.title)){t.title=e.title;r.title=e.title}if(p.isDefined(e.subtitle)){t.subtitle=e.subtitle;r.subtitle=e.subtitle}if(p.isDefined(e.icon)){t.icon=e.icon;r.icon=e.icon}if(p.isDefined(e.targetURL)){t.targetURL=e.targetURL;r.targetURL=e.targetURL}if(p.isDefined(e.info)){t.info=e.info;r.info=e.info}this.getView().getModel().refresh()},stopRequests:function(){if(this.timer){clearTimeout(this.timer);this.timer=null}if(this.oDataRequest){this.oDataRequest.abort()}},onPress:function(e){if(e.getSource().getScope&&e.getSource().getScope()===c.Display){var t=this.getView().getModel().getProperty("/properties/targetURL");var r=this.getView().getModel().getProperty("/properties/title");if(!t){return}else if(t[0]==="#"){hasher.setHash(t)}else{var o=i.last("/core/shell/enableRecentActivity")&&i.last("/core/shell/enableRecentActivityLogging");if(o){var s={title:r,appType:b.URL,url:t,appId:t};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(s)}a.openURL(t,"_blank")}}},initRequestInterval:function(){var e=this.getView().getModel();var t=e.getProperty("/configuration/serviceRefreshInterval");if(!t||t==="0"){t=0;if(this.oDataRequest){this.bShouldNotRefreshDataAfterInit=true}}else if(t<10){var r=e.getProperty("/configuration/serviceUrl");l.warning("Refresh Interval "+t+" seconds for service URL "+r+" is less than 10 seconds, which is not supported. Increased to 10 seconds automatically.",null,y);t=10}this.loadData(t,false)},loadData:function(e,t){if(!t&&this.bShouldNotRefreshDataAfterInit){return}var r=this.getView().getModel();var i=r.getProperty("/configuration/serviceUrl");if(!i){l.error("No service URL given!",y);this._setTileIntoErrorState();return}var a=e*1e3-(Date.now()-this.iLastTimeoutStart);if(!t&&!this.timer&&a>0){l.info("Started timeout to call "+i+" again in "+Math.ceil(a/1e3)+" seconds",null,y);this.timer=setTimeout(this.loadData.bind(this,e,false),p.sanitizeTimeoutDelay(a));return}if(!this.oDataRequest||this.oDataRequest.sUrl!==i){if(this.oDataRequest){this.oDataRequest.destroy()}var o=r.getProperty("/properties/contentProviderId");var s={dataSource:r.getProperty("/properties/dataSource")};this.oDataRequest=new f(i,this.successHandlerFn.bind(this),this.errorHandlerFn.bind(this),o,s)}else if(this.oDataRequest){this.oDataRequest.refresh()}if(e>0){l.info("Started timeout to call "+i+" again in "+e+" seconds",null,y);this.iLastTimeoutStart=Date.now();this.timer=setTimeout(this.loadData.bind(this,e,false),p.sanitizeTimeoutDelay(e*1e3))}},successHandlerFn:function(e){this.updatePropertiesHandler(e)},errorHandlerFn:function(e){var t=e&&e.message?e.message:e;var r=this.getView().getModel().getProperty("/configuration/serviceUrl");if(e.statusText==="Abort"||e.aborted===true){l.info("Data request from service "+r+" was aborted",null,y);this.bShouldNotRefreshDataAfterInit=false}else{if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}l.error("Failed to update data via service "+r+": "+t,null,y);this._setTileIntoErrorState()}},_setTileIntoErrorState:function(){var e=t.getResourceBundleModel().getResourceBundle();this.updatePropertiesHandler({number:"???",info:e.getText("dynamic_data.error")})},_normalizeNumber:function(e,t,i,a){var o;if(isNaN(e)){o=e}else{var s=r.getFloatInstance({maxFractionDigits:a});if(!i){var n=Math.abs(e);if(n>=1e9){i="B";e/=1e9}else if(n>=1e6){i="M";e/=1e6}else if(n>=1e3){i="K";e/=1e3}}o=s.format(e)}var l=o;var u=l[t-1];t-=u==="."||u===","?1:0;l=l.substring(0,t);return{displayNumber:l,numberFactor:i}},updatePropertiesHandler:function(e){var t=this.getView().getModel().getProperty("/originalProperties");var a=this.getView().getModel().getProperty("/properties");var o=[{dataField:"title",modelField:"title"},{dataField:"subtitle",modelField:"subtitle"},{dataField:"icon",modelField:"icon"},{dataField:"info",modelField:"info"},{dataField:"infoState",modelField:"infoState"},{dataField:"targetURL",modelField:"targetURL"},{dataField:"stateArrow",modelField:"number_state_arrow"},{dataField:"numberState",modelField:"number_value_state"},{dataField:"numberUnit",modelField:"number_unit"},{dataField:"numberFactor",modelField:"number_factor"}];o.forEach(function(r){var i=e[r.dataField];var o=!i;var s=D[r.modelField];if(o){a[r.modelField]=t[r.modelField]||s}else if(this._isResetValue(i)){a[r.modelField]=s}else{a[r.modelField]=i}}.bind(this));a.number_value=!isNaN(e.number)?e.number:D.number_value;a.number_digits=e.numberDigits>=0?e.numberDigits:4;var s=[];if(e.targetParams){s.push(e.targetParams)}if(e.results){var n;var l;var u=0;e.results.forEach(function(e){l=e.number||0;if(typeof l==="string"){l=parseFloat(l)}u+=l;n=e.targetParams;if(n){s.push(n)}});a.number_value=u}if(s.length>0){var f=a.targetURL.indexOf("?")!==-1?"&":"?";a.targetURL+=f+s.join("&")}if(!isNaN(e.number)){if(typeof e.number==="string"){e.number=e.number.trim()}var p=this._shouldProcessDigits(e.number,e.numberDigits);var d=a.icon?4:5;if(e.number&&e.number.toString().length>=d||p){var c=this._normalizeNumber(e.number,d,e.numberFactor,e.numberDigits);a.number_factor=c.numberFactor;a.number_value=c.displayNumber}else{var h=r.getFloatInstance({maxFractionDigits:d});a.number_value=h.format(e.number)}}a.sizeBehavior=i.last("/core/home/sizeBehavior");this.getView().getModel().refresh()},_shouldProcessDigits:function(e,t){var r;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){r=e.split(".")[1].length;if(r>t){return true}}return false},_getLeanUrl:function(e){return a.getLeanURL(e)},_formatValueColor:function(e){if(e==="Positive"){return m.Good}if(e==="Negative"){return m.Error}return m[e]||m.Neutral},_getValueColor:function(e){var t=this._formatValueColor(e);if(t===m.Neutral){return m.None}return t},_isResetValue:function(e){if(typeof e!=="string"){return false}return e===_},onExit:function(){if(this.oDataRequest){this.stopRequests();this.oDataRequest.destroy()}this._aDoables.forEach(function(e){e.off()});this._aDoables=[]}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/TileContent","sap/m/NumericContent","sap/m/library"],function(e,t,r,i,o){"use strict";var n=o.ValueColor;return e.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile"},createContent:function(e){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0]}return new t({size:"Auto",header:"{/properties/title}",scope:"{/properties/scope}",subheader:"{/properties/subtitle}",sizeBehavior:"{/properties/sizeBehavior}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{parts:["/properties/targetURL"],formatter:e.formatters&&e.formatters.leanURL},tileContent:new r({size:"Auto",footer:"{/properties/info}",footerColor:{path:"/properties/infoState",formatter:function(e){if(e==="Positive"){e=n.Good}if(e==="Negative"){e=n.Error}if(!n[e]){e=n.Neutral}return e}},unit:"{/properties/number_unit}",content:new i({truncateValueTo:5,scale:"{/properties/number_factor}",value:"{/properties/number_value}",indicator:"{/properties/number_state_arrow}",valueColor:{path:"/properties/number_value_state",formatter:function(e){if(!e||e==="Neutral"||!n[e]){return n.None}return e}},icon:"{/properties/icon}",withMargin:false,width:"100%"})}),additionalTooltip:"{/properties/contentProviderLabel}",press:[e.onPress,e]})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/generic", ["sap/ui/core/mvc/Controller","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/ushell/components/tiles/sbtilecontent","sap/m/library","sap/ui/core/format/DateFormat","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,i,t,l,a,s,o,n,jQuery,r){"use strict";var u=a.DeviationIndicator;var c=a.ValueColor;var T=a.FrameType;var h=a.LoadState;var g=e.extend("sap.ushell.components.tiles.generic",{getTile:function(){return this.oKpiTileView.oGenericTile},_updateTileModel:function(e){var i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},logError:function(e){this._updateTileModel({value:"",scale:"",unit:""});r.error(e);if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject()}else{this.oKpiTileView.oGenericTile.setState(h.Failed)}},getKeyForCallCheck:function(){if(this.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){return this.oConfig.TILE_PROPERTIES.id+"left"}return this.oConfig.TILE_PROPERTIES.id+"right"},getRelativeTime:function(){var e=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate(),i;if(jQuery.type(this.cacheTime)=="date"){i=this.cacheTime}else{i=new Date(parseInt(this.cacheTime.substr(6),10))}var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(e-i),l,a;switch(t.unit){case"minutes":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(t.time,"minutes");e=e-a;l=new Date(e);break;case"hours":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(t.time,"hours");e=e-a;l=new Date(e);break;case"days":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(t.time,"days");e=e-a;l=new Date(e);break}return l},setTimeStamp:function(){this.updateTimeStampjobScheduled=false;var e=s.getDateTimeInstance({relative:true,relativeSource:"auto",style:"short"});var i=e.format(this.getRelativeTime());this.oKpiTileView.oNVConfS.setRefreshOption(true);this.oKpiTileView.oNVConfS.setTimestamp(i);this.updateTimeStampjobScheduled=false;var t=this.oConfig.TILE_PROPERTIES.id+"time";var l=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(t);if(l){clearTimeout(l);l=undefined}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible())},isACurrencyMeasure:function(e){var i=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;return sap.ushell.components.tiles.indicatorTileUtils.util.getFormattingMetadata(this.oRunTimeODataModel,i,e)._hasCurrency},isCurrencyMeasure:function(e){var i=this;var t=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(i.oConfig.TILE_PROPERTIES.id);if(t&&t.Data){var l=t.Data&&JSON.parse(t.Data);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(i.oConfig)){if(i.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){l=l.leftData}else{l=l.rightData}}if(i.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile"||i.oConfig.TILE_PROPERTIES.tileType==="CM"){if(l&&l.data&&l.data.length){for(var a=0;a<l.data.length;a++){if(l.data[a]&&l.data[a].measure==e){if(jQuery.type(l.data[a].isCurM)=="boolean"){return l.data[a].isCurM}return i.isACurrencyMeasure(e)}return i.isACurrencyMeasure(e)}}else{return i.isACurrencyMeasure(e)}}if(l&&jQuery.type(l.isCurM)=="boolean"){return l.isCurM}return i.isACurrencyMeasure(e)}return i.isACurrencyMeasure(e)},formSelectStatement:function(e){var i=Object.keys(e);var t="";for(var l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t=t+","+e[i[l]]}}return t},setThresholdValues:function(){var e=this;try{var i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var t=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e.oConfig.TILE_PROPERTIES.id);switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);if(t&&t.Data&&t.Data.length){t.Data=JSON.parse(t.Data);i.trendValue=Number(t.Data.trend);i.targetValue=Number(t.Data.target);i.criticalHighValue=Number(t.Data.ch);i.warningHighValue=Number(t.Data.wh);t.Data=JSON.stringify(t.Data)}break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);if(t&&t.Data&&t.Data.length){t.Data=JSON.parse(t.Data);i.criticalLowValue=Number(t.Data.cl);i.warningLowValue=Number(t.Data.wl);i.trendValue=Number(t.Data.trend);i.targetValue=Number(t.Data.target);t.Data=JSON.stringify(t.Data)}break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);if(t&&t.Data&&t.Data.length){t.Data=JSON.parse(t.Data);i.criticalLowValue=Number(t.Data.cl);i.warningLowValue=Number(t.Data.wl);i.trendValue=Number(t.Data.trend);i.targetValue=Number(t.Data.target);i.criticalHighValue=Number(t.Data.ch);i.warningHighValue=Number(t.Data.wh);t.Data=JSON.stringify(t.Data)}break}}else if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED")}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i}catch(i){e.logError(i)}},setNoData:function(){var e=this.getView().getViewData();if(e.parentController){e.parentController.setNoData();if(e.deferredObj){e.deferredObj.resolve()}}else{try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(h.Loaded)}catch(e){}}},getLocalCache:function(e){var i={};i.ChipId=e.ChipId;i.Data=e.Data;i.CacheMaxAge=e.CacheMaxAgeUnit;i.CacheMaxAgeUnit=e.CacheMaxAgeUnit;i.CacheType=e.CacheType;i.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return i},fetchKpiValue:function(e,i,t,l){var a=this;var s=0;try{var o=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var n=this.setThresholdValues();var u=n.fullyFormedMeasure;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id);var h=a.oTileApi.configuration.getParameterValueAsString("timeStamp");var g=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(a.oConfig.TILE_PROPERTIES.id,h,a.chipCacheTime,a.chipCacheTimeUnit,a.tilePressed);var p=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(t);var d=this.getKeyForCallCheck();var f=true;if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){f=sap.ushell.components.tiles.indicatorTileUtils.util.isCallInProgress(d);if(f==undefined){f=true}}if(f){if(!c||!g&&a.oTileApi.visible.isVisible()||p||l&&a.oTileApi.visible.isVisible()||a.getView().getViewData().refresh){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,false);if(a.kpiValueFetchDeferred){a.kpiValueFetchDeferred=false;var m=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var E=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(a.oRunTimeODataModel,o,u,null,m);if(E){this.QUERY_SERVICE_MODEL=E.model;this.queryUriForKpiValue=E.uri;this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(E.uri,null,null,true,function(i){a.backEndCallMade=true;a.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,true);if(i&&i.results&&i.results.length&&i.results[0][a.DEFINITION_DATA.EVALUATION.COLUMN_NAME]!=null){s=i.results[0][a.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var t={};if(E.unit[0]){a._updateTileModel({unit:i.results[0][E.unit[0].name]});t.uom=i.results[0][E.unit[0].name]}if(a.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){t.numericValue=s}else{t.value=s}if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){n.criticalHighValue=i.results[0][n.sCriticalHigh];n.criticalLowValue=i.results[0][n.sCriticalLow];n.warningHighValue=i.results[0][n.sWarningHigh];n.warningLowValue=i.results[0][n.sWarningLow];n.targetValue=i.results[0][n.sTarget];n.trendValue=i.results[0][n.sTrend]}else if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){n.targetValue=Number(i.results[0][n.sTarget]);n.criticalHighValue=n.targetValue*n.criticalHighValue/100;n.criticalLowValue=n.targetValue*n.criticalLowValue/100;n.warningHighValue=n.targetValue*n.warningHighValue/100;n.warningLowValue=n.targetValue*n.warningLowValue/100;n.trendValue=Number(i.results[0][n.sTrend])}t.cl=n.criticalLowValue;t.ch=n.criticalHighValue;t.wl=n.warningLowValue;t.wh=n.warningHighValue;t.trend=n.trendValue;t.target=n.targetValue;t.isCurM=a.isCurrencyMeasure(a.oConfig.EVALUATION.COLUMN_NAME);var l={};l.ChipId=a.oConfig.TILE_PROPERTIES.id;l.Data=JSON.stringify(t);l.CacheMaxAge=Number(a.chipCacheTime);l.CacheMaxAgeUnit=a.chipCacheTimeUnit;l.CacheType=1;var o=a.getLocalCache(l);if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,o);var r=false;if(c){r=true}if(a.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(a.oTileApi,a.oConfig.TILE_PROPERTIES.id,l,r,function(e){if(e){a.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,e);a.setTimeStamp(a.cacheTime)}if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){jQuery.proxy(a.setTimeStamp(a.cacheTime),a)}})}}else{var u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id),T;if(u){if(!u.CachedTime){u.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}T=u.Data;if(T){T=JSON.parse(T);if(a.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){T.leftData=t}else{T.rightData=t}}u.Data=JSON.stringify(T);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,u)}else{T={};if(a.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){T.leftData=t}else{T.rightData=t}o.Data=JSON.stringify(T);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,o)}a.cacheWriteData=t}a.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();a.updateDatajobScheduled=false;var h=a.oConfig.TILE_PROPERTIES.id+"data";var g=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(h);if(g){clearTimeout(g);g=undefined}e.call(a,s,n)}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,{empty:"empty"});a.setNoData()}},function(e){a.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,true);if(e&&e.response){r.error(e.message+" : "+e.request.requestUri);i.call(a,e)}})}else{a.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,true);a.logError("Error Preparing Query Service URI")}}}else if(a.DEFINITION_DATA.TILE_PROPERTIES.frameType==T.OneByOne){var C;if(c&&c.Data){C=c.Data&&JSON.parse(c.Data);s=C.value;if(C.uom){a._updateTileModel({unit:C.uom})}if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){n.criticalHighValue=C.ch;n.criticalLowValue=C.cl;n.warningHighValue=C.wh;n.warningLowValue=C.wl;n.targetValue=C.target;n.trendValue=C.trend}else if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){n.targetValue=Number(C.target);n.criticalHighValue=n.targetValue*n.ch/100;n.criticalLowValue=n.targetValue*n.cl/100;n.warningHighValue=n.targetValue*n.wh/100;n.warningLowValue=n.targetValue*n.wl/100;n.trendValue=Number(C.trend)}a.cacheTime=c.CachedTime;if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){jQuery.proxy(a.setTimeStamp(c.CachedTime),a)}e.call(a,s,n)}else{a.setNoData()}}else if(c&&c.Data){C=c.Data&&JSON.parse(c.Data);if(a.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){C=C.leftData}else{C=C.rightData}s=C.numericValue;if(C.unit){a._updateTileModel({unit:C.unit})}if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){n.criticalHighValue=C.ch;n.criticalLowValue=C.cl;n.warningHighValue=C.wh;n.warningLowValue=C.wl;n.targetValue=C.target;n.trendValue=C.trend}else if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){n.targetValue=Number(C.target);n.criticalHighValue=n.targetValue*n.criticalHighValue/100;n.criticalLowValue=n.targetValue*n.criticalLowValue/100;n.warningHighValue=n.targetValue*n.warningHighValue/100;n.warningLowValue=n.targetValue*n.warningLowValue/100;n.trendValue=Number(C.trend)}a.cacheTime=c.CachedTime;if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){jQuery.proxy(a.setTimeStamp(c.CachedTime),a)}e.call(a,s,n)}else{a.setNoData()}}}catch(e){a.logError(e)}},getRunTimeODataModel:function(e,i){if(window["sap-ushell-config"].cacheBusting){e=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(e)}if(!this.oRunTimeODataModel){this.oRunTimeODataModel=sap.ushell.components.tiles.indicatorTileUtils.util.getODataModelByServiceUri(e)}if(this.oRunTimeODataModel.getServiceMetadata()){i()}else{this.oRunTimeODataModel.attachMetadataLoaded(i)}},parse_sapclient:function(){var e,i,t,l,a;i="P_SAPClient";t="$$$";l=this.oConfig.EVALUATION_FILTERS;if(l.constructor!==Array){return}if(l.length<1){return}for(e in l){a=l[e];if(a.NAME===i&&a.VALUE_1===t){break}a=null}if(a){jQuery.when(sap.ushell.components.tiles.indicatorTileUtils.util.getHanaClient()).done(function(e){a.VALUE_1=e})}},fetchEvaluation:function(e,i,t,l){var a=this;var s=this.oConfig.TILE_PROPERTIES.sb_metadata||"HANA";a.DEFINITION_DATA=e;a._updateTileModel(this.DEFINITION_DATA);var o=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(t);if(a.oTileApi.visible.isVisible()&&!a.firstTimeVisible||o||l){jQuery.when(sap.ushell.components.tiles.indicatorTileUtils.util.getFrontendCache(e,a.oTileApi)).done(function(e){a.firstTimeVisible=true;e=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id);if(e||Number(a.oTileApi.configuration.getParameterValueAsString("isSufficient"))){i.call()}else{try{if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)||!a.dataCallInProgress){a.dataCallInProgress=true;var t=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(a.oConfig.TILE_PROPERTIES.id);if(t){a.oConfig.EVALUATION_FILTERS=t.EVALUATION_FILTERS;i.call()}else if(a.evaluationFetchDeferred){a.evaluationFetchDeferred=false;sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(a.oConfig,a.oTileApi,function(e){a.evaluationFetchDeferred=true;a.oConfig.EVALUATION_FILTERS=e;if(s.toUpperCase()==="HANA"){a.parse_sapclient()}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(a.oConfig.TILE_PROPERTIES.id,a.oConfig);i.call()})}}}catch(e){a.evaluationFetchDeferred=true;a.logError("no evaluation data")}}}).fail(function(){a.firstTimeVisible=true;if(Number(a.oTileApi.configuration.getParameterValueAsString("isSufficient"))){i.call()}else{try{var e=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(a.oConfig.TILE_PROPERTIES.id);if(e){a.oConfig.EVALUATION_FILTERS=e.EVALUATION_FILTERS;i.call()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(a.oConfig,a.oTileApi,function(e){a.oConfig.EVALUATION_FILTERS=e;if(s.toUpperCase()==="HANA"){a.parse_sapclient()}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(a.oConfig.TILE_PROPERTIES.id,a.oConfig);i.call()})}}catch(e){a.logError("no evaluation data")}}})}},refreshHandler:function(e,i){var t=this;var l=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);var a=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(i);if(!t.firstTimeVisible||l||a){t.fetchEvaluation(t.oConfig,function(){var i;if(t.oConfig.TILE_PROPERTIES.tileType=="NT"||t.oConfig.TILE_PROPERTIES.tileType=="AT"||t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"||t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatordeviation.DeviationTile"){i=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(i,function(){if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(e,i){this.KPIVALUE=e;t.doProcess(e,i)},t.logError,e,a)}else{t.doProcess()}})}else{i=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(i,function(){if(t.KPI_VALUE_REQUIRED){t.doProcess(t.KPIVALUE,t.setThresholdValues())}else{t.doProcess(l,a)}})}},e,a)}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(e){this.refreshHandler(this)}},getChipConfiguration:function(e){var i=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(i.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),i.oTileApi.preview.isEnabled(),function(t){i.oConfig=t;var l=sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(i.oConfig);var a=sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(i.oConfig);if(i.oTileApi.search){i.oTileApi.search.setKeywords([l,a])}if(i.oTileApi.preview){i.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system))}e.call()})}catch(e){i.logError(e.message)}},onAfterTileRendering:function(){var e=this;this.firstTimeVisible=false;this.oKpiTileView=this.getView();this.updateDatajobScheduled=false;this.updateTimeStampjobScheduled=false;this.oViewData=this.oKpiTileView.getViewData();this.tilePressed=false;this.kpiValueFetchDeferred=true;this.evaluationFetchDeferred=true;this.backEndCallMade=false;if(!sap.ushell.components.tiles.utils){sap.ui.require("sap.ushell.components.tiles.utils")}this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();this.oTileApi=this.oViewData.chip;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(h.Loading);this.getChipConfiguration(function(){var i;e.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(e.oConfig);e.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(e.oConfig);if(e.oTileApi.preview.isEnabled()){e.doDummyProcess();e.oKpiTileView.oGenericTile.attachPress(function(){o.show(e.oResourceBundle.getText("sb.NavigationHelp"))})}else if(e.oConfig.BLANKTILE||e.oConfig.TILE_PROPERTIES.blankTile){e.doDummyProcess();i=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oKpiTileView.oGenericTile.$().wrap("<a href ='"+i+"'></a>");e.oKpiTileView.oGenericTile.attachPress(function(){e.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=i})}else{if(e.oTileApi.visible&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(e.oConfig)){e.oTileApi.visible.attachVisible(e.visibleHandler.bind(e))}i=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oKpiTileView.oGenericTile.$().wrap("<a href ='"+i+"></a>").style="display:block;";e.oKpiTileView.oGenericTile.attachPress(function(){e.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=i});if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(e.oConfig)){e.oKpiTileView.oNVConfS.attachRefresh(function(){e.oKpiTileView.oGenericTile.setState(h.Loading);jQuery.proxy(e.refreshHandler(true),e)})}e.fetchEvaluation(e.oConfig,function(){e.DEFINITION_DATA=e.oConfig;var i=e.oTileApi.url.addSystemToServiceUrl(e.oConfig.EVALUATION.ODATA_URL);var t=e.oTileApi.configuration.getParameterValueAsString("timeStamp");var l=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(e.oConfig.TILE_PROPERTIES.id,t,e.chipCacheTime,e.chipCacheTimeUnit,e.tilePressed);if(!l||e.getView().getViewData().refresh){e.getRunTimeODataModel(i,function(){if(e.KPI_VALUE_REQUIRED){e.fetchKpiValue(function(i,t){this.KPIVALUE=i;e.doProcess(i,t)},e.logError)}else{e.doProcess()}})}else if(e.KPI_VALUE_REQUIRED){e.fetchKpiValue(function(i,t){this.KPIVALUE=i;e.doProcess(i,t)},e.logError)}else{e.doProcess()}})}})},onAfterRendering:function(){this.onAfterTileRendering()},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new n({}))}},autoFormatter:function(e,i){i=i||false;if(!e){return""}return sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(e),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,i)},setToolTip:function(e,i,t){var l=this,a,s=this.setThresholdValues(),o=this.oConfig.EVALUATION.COLUMN_NAME,n=this.isCurrencyMeasure(o),r;if(t=="CONT"||t=="COMP"){if(this.oKpiTileView.getContent()[0].getTileContent().length){a=l.oKpiTileView.getContent()[0].getTileContent()[0].getContent();var u,c,T,h,g,p,d,f,m;if(i&&i[0]){u=i[0].title;h=this.autoFormatter(i[0].value,n);d=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(i[0].color)}if(i&&i[1]){c=i[1].title;g=this.autoFormatter(i[1].value,n);f=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(i[1].color)}if(i&&i[2]){T=i[2].title;p=this.autoFormatter(i[2].value,n);m=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(i[2].color)}var E={};E["0"]=this.oConfig.EVALUATION.COLUMN_NAME+",asc";E["1"]=this.oConfig.EVALUATION.COLUMN_NAME+",desc";E["2"]=this.oConfig.TILE_PROPERTIES.dimension+",asc";E["3"]=this.oConfig.TILE_PROPERTIES.dimension+",desc";var C=E[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");r={measure:this.oConfig.EVALUATION.COLUMN_NAME,contributionTile:C,m1:u,v1:h,c1:d,m2:c,v2:g,c2:f,m3:T,v3:p,c3:m};sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(a,t,r)}}else{var V="";if(e=="Error"){V="sb.error"}if(e=="Neutral"){V="sb.neutral"}if(e=="Critical"){V="sb.critical"}if(e=="Good"){V="sb.good"}r={status:V,actual:this.autoFormatter(i,n),target:this.autoFormatter(s.targetValue,n),cH:this.autoFormatter(s.criticalHighValue,n),wH:this.autoFormatter(s.warningHighValue,n),wL:this.autoFormatter(s.warningLowValue,n),cL:this.autoFormatter(s.criticalLowValue,n)};a=l.oKpiTileView.getContent()[0].getTileContent()[0]&&l.oKpiTileView.getContent()[0].getTileContent()[0].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(a,t,r)}},getTrendColor:function(e){var i=this,t,l,a,s;try{var o=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var n=c.Neutral;if(o==="MI"){if(e.criticalHighValue&&e.warningHighValue){s=Number(e.criticalHighValue);a=Number(e.warningHighValue);if(this.CALCULATED_KPI_VALUE<a){n=c.Good}else if(this.CALCULATED_KPI_VALUE<=s){n=c.Critical}else{n=c.Error}}}else if(o==="MA"){if(e.criticalLowValue&&e.warningLowValue){l=Number(e.criticalLowValue);t=Number(e.warningLowValue);if(this.CALCULATED_KPI_VALUE<l){n=c.Error}else if(this.CALCULATED_KPI_VALUE<=t){n=c.Critical}else{n=c.Good}}}else if(e.warningLowValue&&e.warningHighValue&&e.criticalLowValue&&e.criticalHighValue){s=Number(e.criticalHighValue);a=Number(e.warningHighValue);t=Number(e.warningLowValue);l=Number(e.criticalLowValue);if(this.CALCULATED_KPI_VALUE<l||this.CALCULATED_KPI_VALUE>s){n=c.Error}else if(this.CALCULATED_KPI_VALUE>=l&&this.CALCULATED_KPI_VALUE<=t||this.CALCULATED_KPI_VALUE>=a&&this.CALCULATED_KPI_VALUE<=s){n=c.Critical}else{n=c.Good}}return n}catch(e){i.logError(e)}},getTrendIndicator:function(e){var i=this;e=Number(e);try{var t=u.None;if(e>this.CALCULATED_KPI_VALUE){t=u.Down}else if(e<this.CALCULATED_KPI_VALUE){t=u.Up}return t}catch(e){i.logError(e)}},setTextInTile:function(){var e=this;var i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},_getEvaluationThresholdMeasures:function(){var e=[];e.push(this.oConfig.EVALUATION.COLUMN_NAME);if(this.oConfig.EVALUATION.VALUES_SOURCE==="MEASURE"){var i=this.oConfig.EVALUATION_VALUES;if(i&&i.length){for(var t=0;t<i.length;t++){if(i[t].COLUMN_NAME&&!i[t].FIXED){e.push(i[t].COLUMN_NAME)}}}}return e},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}});return g});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorArea/AreaChartTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/ui/thirdparty/jquery"],function(e,i,a,t,jQuery){"use strict";var l=i.FrameType;var r=i.LoadState;var s=e.extend("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false},doProcess:function(e,i){this.onAfterFinalEvaluation(e,i)},doDummyProcess:function(){var e=this;this.setTextInTile();e._updateTileModel({footer:"",description:"",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oKpiTileView.oGenericTile.setState(r.Loaded)},scheduleJob:function(e){if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}},onAfterFinalEvaluation:function(e,i){var s=this;var o=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var n=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var c=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var u=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(u==undefined){this.logError();return}var h=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var E=this.DEFINITION_DATA.EVALUATION_VALUES;var T=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){if(T){var d=T.Data&&JSON.parse(T.Data)}}var f=s.oTileApi.configuration.getParameterValueAsString("timeStamp");var g=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(s.oConfig.TILE_PROPERTIES.id,f,s.chipCacheTime,s.chipCacheTimeUnit,s.tilePressed);var m=n;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(h){case"MI":s.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"WH","MEASURE");s.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"CH","MEASURE");s.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TA","MEASURE");s.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TC","MEASURE");if(s.sWarningHigh&&s.sCriticalHigh&&s.sTarget){m+=","+s.sWarningHigh+","+s.sCriticalHigh+","+s.sTarget}break;case"MA":s.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"WL","MEASURE");s.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"CL","MEASURE");s.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TA","MEASURE");s.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TC","MEASURE");if(s.sWarningLow&&s.sCriticalLow&&s.sTarget){m+=","+s.sWarningLow+","+s.sCriticalLow+","+s.sTarget}break;case"RA":s.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"WH","MEASURE");s.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"CH","MEASURE");s.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TA","MEASURE");s.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TC","MEASURE");s.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"WL","MEASURE");s.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"CL","MEASURE");if(s.sWarningLow&&s.sCriticalLow&&s.sTarget&&s.sWarningHigh&&s.sCriticalHigh){m+=","+s.sWarningLow+","+s.sCriticalLow+","+s.sTarget+","+s.sWarningHigh+","+s.sCriticalHigh}break}}var p=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);if(d&&!d.rightData||!T||!g&&s.oTileApi.visible.isVisible()||p||i&&s.oTileApi.visible.isVisible()||s.getView().getViewData().refresh){if(s.kpiValueFetchDeferred){s.kpiValueFetchDeferred=false;var C=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(s.oRunTimeODataModel,o,m,u,c);if(C){this.queryUriForTrendChart=C.uri;var A={};try{this.trendChartODataReadRef=C.model.read(C.uri,null,null,true,function(e){s.kpiValueFetchDeferred=true;if(e&&e.results&&e.results.length){if(C.unit[0]){s.unit=e.results[0][C.unit[0].name];s.CURRENCY_CODE=s.unit;A.unit=C.unit[0];A.unit.name=C.unit[0].name}s.queryUriResponseForTrendChart=e;u=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(s.oRunTimeODataModel,o,u);e.results.splice(10);e.firstXlabel=e.results[0][u];e.lastXlabel=e.results[e.results.length-1][u];A.data=e;if(A&&A.data&&A.data.results&&A.data.results.length){for(var i=0;i<A.data.results.length;i++){delete A.data.results[i].__metadata}}A.isCurM=s.isCurrencyMeasure(s.oConfig.EVALUATION.COLUMN_NAME);A.dimensionName=u;I(e,s.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);var a={};s.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();a.ChipId=s.oConfig.TILE_PROPERTIES.id;a.Data=JSON.stringify(A);a.CacheMaxAge=Number(s.chipCacheTime);a.CacheMaxAgeUnit=s.chipCacheTimeUnit;a.CacheType=1;var t=s.getLocalCache(a);if(s.DEFINITION_DATA.TILE_PROPERTIES.frameType==l.TwoByOne){var n=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id),c;if(n){if(!n.CachedTime){n.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}c=n.Data;if(c){c=JSON.parse(c);c.rightData=A}n.Data=JSON.stringify(c);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,n)}else{c={};c.rightData=A;t.Data=JSON.stringify(c);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,t)}s.cacheWriteData=A;s.getView().getViewData().deferredObj.resolve()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,t);var h=false;if(T){h=true}if(s.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(s.oTileApi,s.oConfig.TILE_PROPERTIES.id,a,h,function(e){if(e){s.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,e);s.setTimeStamp()}if(s.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){jQuery.proxy(s.setTimeStamp(s.cacheTime),s)}})}s.oKpiTileView.oGenericTile.setState(r.Loaded);s.updateDatajobScheduled=false;var E=s.oConfig.TILE_PROPERTIES.id+"data";var d=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(E);if(d){clearTimeout(d);d=undefined}jQuery.proxy(s.scheduleJob(s.cacheTime),s)}}else{s.setNoData()}},function(e){s.kpiValueFetchDeferred=true;if(e&&e.response){s.logError("Data call failed")}})}catch(e){s.kpiValueFetchDeferred=true;s.logError(e)}}else{s.kpiValueFetchDeferred=true;s.logError()}}}else if(T&&T.Data){try{var L;var N=s.oConfig&&s.oConfig.TILE_PROPERTIES&&s.oConfig.TILE_PROPERTIES.tileType;if(N.indexOf("DT-")==-1){L=T.Data&&JSON.parse(T.Data)}else{L=T.Data&&JSON.parse(T.Data);L=L.rightData}if(L.unit){s.unit=L.data.results[0][L.unit.name];s.CURRENCY_CODE=s.unit}s.cacheTime=T.CachedTime;if(s.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){jQuery.proxy(s.setTimeStamp(s.cacheTime),s)}s.queryUriResponseForTrendChart=L.data;u=L.dimensionName;I(L.data,s.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);if(s.oConfig.TILE_PROPERTIES.frameType==l.OneByOne){s.oKpiTileView.oGenericTile.setState(r.Loaded)}else{s.getView().getViewData().deferredObj.resolve()}jQuery.proxy(s.scheduleJob(s.cacheTime),s)}catch(e){s.logError(e)}}else{s.setNoData()}function I(e,i){var l=[];var r=[];var o=[];var c=[];var T=[];var d=[];var f=e.firstXlabel;var g,m,p,C,A;var L=e.lastXlabel;var N=Number(e.results[0][n]);var I=Number(e.results[e.results.length-1][n]);var U;for(U in e.results){e.results[U][u]=Number(U);e.results[U][n]=Number(e.results[U][n]);if(s.sWarningHigh){e.results[U][s.sWarningHigh]=Number(e.results[U][s.sWarningHigh])}if(s.sCriticalHigh){e.results[U][s.sCriticalHigh]=Number(e.results[U][s.sCriticalHigh])}if(s.sCriticalLow){e.results[U][s.sCriticalLow]=Number(e.results[U][s.sCriticalLow])}if(s.sWarningLow){e.results[U][s.sWarningLow]=Number(e.results[U][s.sWarningLow])}if(s.sTarget){e.results[U][s.sTarget]=Number(e.results[U][s.sTarget])}if(s.sWarningHigh){o.push(e.results[U][s.sWarningHigh])}if(s.sCriticalHigh){c.push(e.results[U][s.sCriticalHigh])}if(s.sCriticalLow){T.push(e.results[U][s.sCriticalLow])}if(s.sWarningLow){d.push(e.results[U][s.sWarningLow])}l.push(e.results[U][u]);r.push(e.results[U][n])}try{f=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(f);L=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(L)}catch(e){s.logError(e)}var b=Number(N);if(s.oConfig.EVALUATION.SCALING==-2){b*=100}var M=Math.min.apply(Math,r);var S=s.isCurrencyMeasure(s.oConfig.EVALUATION.COLUMN_NAME);var D=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(b,s.oConfig.EVALUATION.SCALING,s.oConfig.EVALUATION.DECIMAL_PRECISION,S,s.CURRENCY_CODE);if(s.oConfig.EVALUATION.SCALING==-2){D+=" %"}var w=D.toString();var R=Number(I);if(s.oConfig.EVALUATION.SCALING==-2){R*=100}var O=Math.max.apply(Math,r);S=s.isCurrencyMeasure(s.oConfig.EVALUATION.COLUMN_NAME);var v=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(R,s.oConfig.EVALUATION.SCALING,s.oConfig.EVALUATION.DECIMAL_PRECISION,S,s.CURRENCY_CODE);if(s.oConfig.EVALUATION.SCALING==-2){v+=" %"}var V=v.toString();try{var H=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,l));var y=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,l))}catch(e){s.logError(e)}if(i=="MEASURE"){if(o.length!=0){s.firstwH=o[H];s.lastwH=o[y]}if(c.length!=0){s.firstcH=c[H];s.lastcH=c[y]}if(T.length!=0){s.firstcL=T[H];s.lastcL=T[y]}if(d.length!=0){s.firstwL=d[H];s.lastwL=d[y]}}var F={width:"100%",height:"100%",unit:s.unit||"",chart:{color:"Neutral",data:e.results},size:"Auto",minXValue:H,maxXValue:y,minYValue:M,maxYValue:O,firstXLabel:{label:f+"",color:"Neutral"},lastXLabel:{label:L+"",color:"Neutral"},firstYLabel:{label:w+"",color:"Neutral"},lastYLabel:{label:V+"",color:"Neutral"},minLabel:{},maxLabel:{}};var P;switch(h){case"MA":for(U in E){if(E[U].TYPE=="CL"){F.minThreshold={color:"Error"};P={};P[u]="";P[n]=Number(E[U].FIXED);s.cl=Number(E[U].FIXED);F.minThreshold.data=i=="MEASURE"?e.results:[P];g=i=="MEASURE"?s.sCriticalLow:n}else if(E[U].TYPE=="WL"){F.maxThreshold={color:"Good"};P={};P[u]="";P[n]=Number(E[U].FIXED);F.maxThreshold.data=i=="MEASURE"?e.results:[P];m=i=="MEASURE"?s.sWarningLow:n;s.wl=Number(E[U].FIXED)}else if(E[U].TYPE=="TA"){P={};P[u]="";P[n]=Number(E[U].FIXED);F.target={color:"Neutral"};F.target.data=i=="MEASURE"?e.results:[P];A=i=="MEASURE"?s.sTarget:n}}F.innerMinThreshold={data:[]};F.innerMaxThreshold={data:[]};if(i=="FIXED"){F.firstYLabel.color=N<s.cl?"Error":s.cl<=N&&N<=s.wl?"Critical":N>s.wl?"Good":"Neutral";F.lastYLabel.color=I<s.cl?"Error":s.cl<=I&&I<=s.wl?"Critical":I>s.wl?"Good":"Neutral"}else if(i=="MEASURE"&&s.firstwL&&s.lastwL&&s.firstcL&&s.lastcL){F.firstYLabel.color=N<s.firstcL?"Error":s.firstcL<=N&&N<=s.firstwL?"Critical":N>s.firstwL?"Good":"Neutral";F.lastYLabel.color=I<s.lastcL?"Error":s.lastcL<=I&&I<=s.lastwL?"Critical":I>s.lastwL?"Good":"Neutral"}break;case"MI":for(U in E){if(E[U].TYPE=="CH"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.ch=Number(E[U].FIXED);F.maxThreshold={color:"Error"};F.maxThreshold.data=i=="MEASURE"?e.results:[P];m=i=="MEASURE"?s.sCriticalHigh:n}else if(E[U].TYPE=="WH"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.wh=Number(E[U].FIXED);F.minThreshold={color:"Good"};F.minThreshold.data=i=="MEASURE"?e.results:[P];g=i=="MEASURE"?s.sWarningHigh:n}else if(E[U].TYPE=="TA"){P={};P[u]="";P[n]=Number(E[U].FIXED);F.target={color:"Neutral"};F.target.data=i=="MEASURE"?e.results:[P];A=i=="MEASURE"?s.sTarget:n}}if(i=="FIXED"){F.firstYLabel.color=N>s.ch?"Error":s.wh<=N&&N<=s.ch?"Critical":N<s.wh?"Good":"Neutral";F.lastYLabel.color=I>s.ch?"Error":s.wh<=I&&I<=s.ch?"Critical":I<s.wh?"Good":"Neutral"}else if(i=="MEASURE"&&s.firstwH&&s.lastwH&&s.firstcH&&s.lastcH){F.firstYLabel.color=N>s.firstcH?"Error":s.firstwH<=N&&N<=s.firstcH?"Critical":N<s.firstwH?"Good":"Neutral";F.lastYLabel.color=I>s.lastcH?"Error":s.lastwH<=I&&I<=s.lastcH?"Critical":I<s.lastwH?"Good":"Neutral"}F.innerMaxThreshold={data:[]};F.innerMinThreshold={data:[]};break;case"RA":for(U in E){if(E[U].TYPE=="CH"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.ch=Number(E[U].FIXED);F.maxThreshold={color:"Error"};F.maxThreshold.data=i=="MEASURE"?e.results:[P];m=i=="MEASURE"?s.sCriticalHigh:n}else if(E[U].TYPE=="WH"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.wh=Number(E[U].FIXED);F.innerMaxThreshold={color:"Good"};F.innerMaxThreshold.data=i=="MEASURE"?e.results:[P];C=i=="MEASURE"?s.sWarningHigh:n}else if(E[U].TYPE=="WL"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.wl=Number(E[U].FIXED);F.innerMinThreshold={color:"Good"};F.innerMinThreshold.data=i=="MEASURE"?e.results:[P];p=i=="MEASURE"?s.sWarningLow:n}else if(E[U].TYPE=="CL"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.cl=Number(E[U].FIXED);F.minThreshold={color:"Error"};F.minThreshold.data=i=="MEASURE"?e.results:[P];g=i=="MEASURE"?s.sCriticalLow:n}else if(E[U].TYPE=="TA"){P={};P[u]="";P[n]=Number(E[U].FIXED);F.target={color:"Neutral"};F.target.data=i=="MEASURE"?e.results:[P];A=i=="MEASURE"?s.sTarget:n}}if(i=="FIXED"){F.firstYLabel.color=N>s.ch||N<s.cl?"Error":s.wh<=N&&N<=s.ch||s.cl<=N&&N<=s.wl?"Critical":N>=s.wl&&N<=s.wh?"Good":"Neutral";F.lastYLabel.color=I>s.ch||I<s.cl?"Error":s.wh<=I&&I<=s.ch||s.cl<=I&&I<=s.wl?"Critical":I>=s.wl&&I<=s.wh?"Good":"Neutral"}else if(i=="MEASURE"&&s.firstwL&&s.lastwL&&s.firstcL&&s.lastcL&&s.firstwH&&s.lastwH&&s.firstcH&&s.lastcH){F.firstYLabel.color=N>s.firstcH||N<s.firstcL?"Error":s.firstwH<=N&&N<=s.firstcH||s.firstcL<=N&&N<=s.firstwL?"Critical":N>=s.firstwL&&N<=s.firstwH?"Good":"Neutral";F.lastYLabel.color=I>s.lastcH||I<s.lastcL?"Error":s.lastwH<=I&&I<=s.lastcH||s.lastcL<=I&&I<=s.lastwL?"Critical":I>=s.lastwL&&I<=s.lastwH?"Good":"Neutral"}break}var _=function(e,i,l,r){return new a({color:"{/"+e+"/color}",points:{path:"/"+e+"/data",template:new t({x:"{"+i+"}",y:"{"+l+"}"})}})};var Y=s.getView().oNVConfContS;Y.setTarget(_("target",u,A));Y.setInnerMinThreshold(_("innerMinThreshold",u,p));Y.setInnerMaxThreshold(_("innerMaxThreshold",u,C));Y.setMinThreshold(_("minThreshold",u,g));Y.setMaxThreshold(_("maxThreshold",u,m));Y.setChart(_("chart",u,n));s.setTextInTile();if(s.getView().getViewData().parentController){s.getView().getViewData().parentController._updateTileModel(F)}else{s._updateTileModel(F)}}}});return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorArea/AreaChartTile.view", ["sap/ui/core/mvc/JSView","sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/m/library","sap/suite/ui/microchart/AreaMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,t,i,a,r,s,l,o,n,h){"use strict";var u=l.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorArea.AreaChartTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e="Lorem ipsum";var t="Lorem ipsum";var i=l.Size;var c=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(c.title&&c.subTitle){e=c.title;t=c.subTitle}var m=function(e){return new a({color:"Good",points:{path:"/"+e+"/data",template:new r({x:"{day}",y:"{balance}"})}})};var p=function(e){return new s({label:"{/"+e+"/label}",color:"{/"+e+"/color}"})};var d={subheader:t,header:e,footerNum:"",footerComp:"",scale:"",unit:"",value:8888,size:"Auto",frameType:"OneByOne",state:u.Loading};this.oNVConfContS=new o({width:"{/width}",height:"{/height}",size:i.Responsive,target:m("target"),innerMinThreshold:m("innerMinThreshold"),innerMaxThreshold:m("innerMaxThreshold"),minThreshold:m("minThreshold"),maxThreshold:m("maxThreshold"),chart:m("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:p("firstXLabel"),lastXLabel:p("lastXLabel"),firstYLabel:p("firstYLabel"),lastYLabel:p("lastYLabel"),minLabel:p("minLabel"),maxLabel:p("maxLabel")});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new n({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var b=new h;b.setData(d);this.oGenericTile.setModel(b);return this.oGenericTile}})},true);
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDual/DualTile.controller", ["sap/m/MessageToast","sap/m/library","sap/ui/core/library","sap/ui/core/format/DateFormat","sap/ui/thirdparty/jquery"],function(e,i,t,a,jQuery){"use strict";var l=i.DeviationIndicator;var o=i.ValueColor;var s=i.FrameType;var r=i.Size;var n=i.LoadState;var c=t.mvc.ViewType;sap.ui.controller("sap.ushell.components.tiles.indicatorDual.DualTile",{getRelativeTime:function(){var e=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();this.cacheTime=jQuery.type(this.cacheTime)=="date"?this.cacheTime:new Date(parseInt(this.cacheTime.substr(6),10));var i=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(e-this.cacheTime),t,a;switch(i.unit){case"minutes":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(i.time,"minutes");e=e-a;t=new Date(e);break;case"hours":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(i.time,"hours");e=e-a;t=new Date(e);break;case"days":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(i.time,"days");e=e-a;t=new Date(e);break}return t},getTile:function(){return this.oKpiTileView.oGenericTile},setTimeStamp:function(){this.updateTimeStampjobScheduled=false;var e=a.getDateTimeInstance({relative:true,relativeSource:"auto"});var i=e.format(this.getRelativeTime());var t=this.getView().oGenericTile.getTileContent()[0];if(t){if(t.setRefreshOption){t.setRefreshOption(true)}if(t.setTimestamp){t.setTimestamp(i)}}this.updateTimeStampjobScheduled=false;var l=this.oConfig.TILE_PROPERTIES.id+"time";var o=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(l);if(o){clearTimeout(o);o=undefined}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible())},getLocalCache:function(e){var i={};i.ChipId=e.ChipId;i.Data=e.Data;i.CacheMaxAge=e.CacheMaxAgeUnit;i.CacheMaxAgeUnit=e.CacheMaxAgeUnit;i.CacheType=e.CacheType;i.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return i},refreshPress:function(){this.initProcess(true)},_getView:function(e,i,t){var a=this.oKpiTileView.getViewData();var l=sap.ui.view({type:c.JS,viewName:e,viewData:jQuery.extend(true,{},a,{parentController:this},{deferredObj:i},{refresh:t})});return l},logError:function(){this._updateTileModel({value:"",scale:"",unit:""});if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject()}},doProcess:function(e){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(this.oKpiTileView.oConfig.TILE_PROPERTIES.id+"defferedLeft",this.deferred_left);sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(this.oKpiTileView.oConfig.TILE_PROPERTIES.id+"defferedRight",this.deferred_right);var i=this;this.getView().oGenericTile.removeAllTileContent();var t=this.getView().oGenericTile;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(n.Loading);var a=i.tileType.split("-")[1];try{var l;l="sap.ushell.components.tiles.indicatornumeric.NumericTile";this.leftView=i._getView(l,this.deferred_left,e);this.leftView.getController().dataCallInProgress=false;t.addTileContent(this.leftView.oGenericTile.getTileContent()[0]);switch(a){case"CM":l="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile";this.rightView=i._getView(l,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"CT":l="sap.ushell.components.tiles.indicatorcontribution.ContributionTile";this.rightView=i._getView(l,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"AT":l="sap.ushell.components.tiles.indicatordeviation.DeviationTile";this.rightView=i._getView(l,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"TT":l="sap.ushell.components.tiles.indicatorArea.AreaChartTile";this.rightView=i._getView(l,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break}this.leftView.getController().onAfterTileRendering();this.rightView.getController().onAfterTileRendering();var o=this.getView().oGenericTile.getTileContent()[0];if(o&&o.attachRefresh){o.attachRefresh(this.refreshPress.bind(i))}}catch(e){this.logError(e)}},_updateTileModel:function(e){var i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},setTextInTile:function(){var e=this;var i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},doDummyProcess:function(){var e=this;try{e.setTextInTile();switch(e.tileType){case"DT-CM":e._updateTileModel({value:1,size:r.Auto,frameType:s.TwoByOne,state:n.Loading,valueColor:o.Good,indicator:l.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});break;case"DT-AT":e._updateTileModel({valueColor:"Good",value:100,frameType:s.TwoByOne,unit:"USD",actual:{value:120,color:o.Good},targetValue:100,thresholds:[{value:0,color:o.Error},{value:50,color:o.Critical},{value:150,color:o.Critical},{value:200,color:o.Error}],showActualValue:true,showTargetValue:true});break;case"DT-CT":e._updateTileModel({value:8888,size:r.Auto,frameType:s.TwoByOne,state:n.Loading,valueColor:o.Error,indicator:l.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});break;case"DT-TT":this._updateTileModel({value:8888,size:r.Auto,frameType:s.TwoByOne,state:n.Loading,valueColor:o.Error,indicator:l.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});break}}catch(e){}},visibleHandler:function(e){if(!e){if(this.leftView){this.leftView.getController().firstTimeVisible=false}if(this.rightView){this.rightView.getController().firstTimeVisible=false}sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(e){if(this.leftView){this.leftView.getController().refreshHandler()}if(this.rightView){this.rightView.getController().refreshHandler()}}},initProcess:function(i){var t=this;this.oKpiTileView=this.getView();this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();this.viewData={};t.viewData=this.oKpiTileView.getViewData();this.oTileApi=this.viewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.deferred_left=new jQuery.Deferred;this.deferred_right=new jQuery.Deferred;jQuery.when(this.deferred_left,this.deferred_right).done(function(){t.setTextInTile();t.oConfig=t.oKpiTileView.oConfig;t.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t.oConfig);t.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t.oConfig);var e=t.leftView.getController().cacheWriteData;var i=t.rightView.getController().cacheWriteData;t.oKpiTileView.oGenericTile.setState(n.Loaded);var a=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oKpiTileView.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+a+"'></a>");t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oKpiTileView.oConfig.TILE_PROPERTIES.id,null);window.location.hash=a});var l={};var o={};o.leftData=e;o.rightData=i;l.ChipId=t.oConfig.TILE_PROPERTIES.id;l.Data=JSON.stringify(o);l.CacheMaxAge=Number(t.chipCacheTime);l.CacheMaxAgeUnit=t.chipCacheTimeUnit;l.CacheType=1;var s=t.getLocalCache(l);if(o.leftData&&o.rightData){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,s)}var r=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(t.chipCacheTime&&o.leftData&&o.rightData){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,l,false,function(e){if(e){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,e);t.cacheTime=e.CachedTime;t.setTimeStamp.call(t)}})}if(t.chipCacheTime){if(!t.cacheTime){t.cacheTime=r.CachedTime}t.setTimeStamp.call(t);sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(t,t.oTileApi.visible.isVisible())}}).fail(function(){t.oKpiTileView.oGenericTile.setState(n.Failed)});t.tileType=t.oKpiTileView.oConfig.TILE_PROPERTIES.tileType;this.oTileApi=t.viewData.chip;if(this.oTileApi.preview.isEnabled()){this.doDummyProcess();t.oKpiTileView.oGenericTile.attachPress(function(){e.show(t.oResourceBundle.getText("sb.NavigationHelp"))})}else{this.doProcess(i)}},onAfterRendering:function(){this.initProcess()},setNoData:function(){try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(n.Loaded)}catch(e){}},getChipConfiguration:function(e){var i=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(i.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),i.oTileApi.preview.isEnabled(),function(t){i.oConfig=t;e.call()})}catch(e){i.logError(e.message)}}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDual/DualTile.view", ["sap/ui/core/mvc/JSView","sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/ushell/components/tiles/sbtilecontent","sap/m/NumericContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/suite/ui/microchart/AreaMicroChart","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/library","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,t,a,i,l,o,n,s,r,u,c,h,p,m,d,T){"use strict";var C=m.Size;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorDual.DualTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorDual.DualTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=this;e.oGenericTileData={};sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(e.getViewData().chip.configuration.getParameterValueAsString("tileConfiguration"),e.getViewData().chip.preview.isEnabled(),function(t){e.oConfig=t});e.tileType=e.oConfig.TILE_PROPERTIES.tileType;e.oNumericContent=new l({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:"{/isFormatterValue}",truncateValueTo:5,valueColor:"{/valueColor}",nullifyValue:false});e.oLeftTileContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});var t;switch(e.tileType){case"DT-CM":t=new o({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});e.oComparisionContent=new n({size:"{/size}",scale:"{/scale}",data:{template:t,path:"/data"}});e.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oComparisionContent});break;case"DT-CT":t=new o({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});e.oContributionContent=new n({size:"{/size}",scale:"{/scale}",data:{template:t,path:"/data"}});e.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oContributionContent});break;case"DT-TT":var a=function(e){return new s({color:"Good",points:{path:"/"+e+"/data",template:new r({x:"{day}",y:"{balance}"})}})};var i=function(e){return new u({label:"{/"+e+"/label}",color:"{/"+e+"/color}"})};var m=new c({width:"{/width}",height:"{/height}",size:"{/size}",target:a("target"),innerMinThreshold:a("innerMinThreshold"),innerMaxThreshold:a("innerMaxThreshold"),minThreshold:a("minThreshold"),maxThreshold:a("maxThreshold"),chart:a("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:i("firstXLabel"),lastXLabel:i("lastXLabel"),firstYLabel:i("firstYLabel"),lastYLabel:i("lastYLabel"),minLabel:i("minLabel"),maxLabel:i("maxLabel")});e.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",content:m});break;case"DT-AT":var b=new h({value:"{value}",color:"{color}"});var w=new p({size:C.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:b,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});e.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:w});break}e.oGenericTile=new d({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[e.oLeftTileContent,e.oRightContent]});e.oGenericTileModel=new T;e.oGenericTileModel.setData(e.oGenericTileData);e.oGenericTile.setModel(e.oGenericTileModel);return e.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualComparison/DualComparison.controller", ["sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(i,e,jQuery,t){"use strict";var l=e.Size;var a=e.DeviationIndicator;var o=e.ValueColor;var s=e.LoadState;sap.ui.controller("tiles.indicatorDualComparison.DualComparison",{getTile:function(){return this.oDualComparisonView.oGenericTile},_updateTileModel:function(i){var e=this.getTile().getModel().getData();jQuery.extend(e,i);this.getTile().getModel().setData(e)},setTitle:function(){var i=this;var e=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:e.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(i.oConfig),subheader:e.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(i.oConfig)})},logError:function(i){this.oDualComparisonView.oGenericTile.setState(s.Failed);this.oDualComparisonView.oGenericTile.setState(s.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(i)},formSelectStatement:function(i){var e=Object.keys(i);var t="";for(var l=0;l<e.length;l++){if(i[e[l]]!==undefined&&i.fullyFormedMeasure){t+=","+i[e[l]]}}return t},setThresholdValues:function(){var i=this;try{var e={};e.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break;case"MA":e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break;case"RA":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break}}else{e.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","FIXED");e.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","FIXED");e.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","FIXED");e.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","FIXED");e.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","FIXED");e.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","FIXED")}return e}catch(e){i.logError(e)}},getTrendColor:function(i){var e=this;var t,l,a,s;try{var r=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var n=o.Neutral;if(r==="MI"){if(i.criticalHighValue&&i.warningHighValue){t=Number(i.criticalHighValue);l=Number(i.warningHighValue);if(this.CALCULATED_KPI_VALUE<l){n=o.Good}else if(this.CALCULATED_KPI_VALUE<=t){n=o.Critical}else{n=o.Error}}}else if(r==="MA"){if(i.criticalLowValue&&i.warningLowValue){a=Number(i.criticalLowValue);s=Number(i.warningLowValue);if(this.CALCULATED_KPI_VALUE<a){n=o.Error}else if(this.CALCULATED_KPI_VALUE<=s){n=o.Critical}else{n=o.Good}}}else if(i.warningLowValue&&i.warningHighValue&&i.criticalLowValue&&i.criticalHighValue){t=Number(i.criticalHighValue);l=Number(i.warningHighValue);s=Number(i.warningLowValue);a=Number(i.criticalLowValue);if(this.CALCULATED_KPI_VALUE<a||this.CALCULATED_KPI_VALUE>t){n=o.Error}else if(this.CALCULATED_KPI_VALUE>=a&&this.CALCULATED_KPI_VALUE<=s||this.CALCULATED_KPI_VALUE>=l&&this.CALCULATED_KPI_VALUE<=t){n=o.Critical}else{n=o.Good}}return n}catch(i){e.logError(i)}},_processDataForComparisonChart:function(i,e,t){var l=[],a={},o,s,r;var n;var u=[];var E=this;for(o=0;o<i.results.length;o++){var T=i.results[o]}u=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oConfig.EVALUATION.ODATA_URL,this.oConfig.EVALUATION.ODATA_ENTITYSET);for(o=0,r=u.length;o<r;o++){s=u[o];a[s.key]=s.value}var c=E.oConfig.TILE_PROPERTIES.COLUMN_NAMES||E.oConfig.EVALUATION.COLUMN_NAMES;for(o=0;o<c.length;o++){var A={};var C=c[o];A.value=Number(T[C.COLUMN_NAME]);var L=Number(T[C.COLUMN_NAME]);if(E.oConfig.EVALUATION.SCALING==-2){L*=100}n=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(L,E.oConfig.EVALUATION.SCALING,E.oConfig.EVALUATION.DECIMAL_PRECISION);if(E.oConfig.EVALUATION.SCALING==-2){n+=" %"}A.displayValue=n.toString();if(t[o]&&T[t[o].name]){A.displayValue+=" "+T[t[o].name]}A.color=C.semanticColor;A.title=a[C.COLUMN_NAME]||C.COLUMN_NAME;l.push(A)}return l},getTrendIndicator:function(i,e){var t=this;i=Number(i);try{var l=a.None;if(i>e){l=a.Down}else if(i<e){l=a.Up}return l}catch(i){t.logError(i)}},fetchKpiValue:function(i,e){var l=this;try{var a=this.oConfig.EVALUATION.ODATA_URL,o=this.oConfig.EVALUATION.ODATA_ENTITYSET,s;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){s=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure}else{s=this.oConfig.EVALUATION.COLUMN_NAME;var r=s;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(var n=0;n<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;n++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[n].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){r=r+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[n].COLUMN_NAME}}}}var u=this.oConfig.EVALUATION_VALUES;var E=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(l.oConfig.TILE_PROPERTIES.id);if(!E){var T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var c={};c["0"]=s+",asc";c["1"]=s+",desc";var A=c[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var C=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(a),o,r,null,T,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){C.uri+="&$orderby="+A[0]+" "+A[2]}else{C.uri+="&$orderby="+A[0]+" "+A[1]}this.writeData={};this.comparisionChartODataRef=C.model.read(C.uri,null,null,true,function(t){if(t&&t.results&&t.results.length){if(C.unit){l.writeData.unit=C.unit}l.oConfig.TILE_PROPERTIES.FINALVALUE=t;l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,r.split(",")[0],C.unit);l.writeData.data=t;var a;for(var o=0;o<l.oConfig.TILE_PROPERTIES.FINALVALUE.length;o++){if(l.oConfig.TILE_PROPERTIES.FINALVALUE[o].title==l.DEFINITION_DATA.EVALUATION.COLUMN_NAME){l.writeData.numericData=l.oConfig.TILE_PROPERTIES.FINALVALUE[o];calculatedValueforScaling=l.oConfig.TILE_PROPERTIES.FINALVALUE[o].value;l.getTrendIndicator(l.setThresholdValues().trendValue,calculatedValueforScaling);l._updateTileModel({valueColor:l.oConfig.TILE_PROPERTIES.FINALVALUE[o].color,value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION).toString()});break}}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData);i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(t.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=t;l.writeData.data=t;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData);i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else{e.call(l,"no Response from QueryServiceUri")}},function(i){if(i&&i.response){t.error(i.message+" : "+i.request.requestUri);e.call(l,i)}});if(!l.writeData.numericData){var L=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(l.DEFINITION_DATA.EVALUATION_FILTERS,l.DEFINITION_DATA.ADDITIONAL_FILTERS);var I=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(a),o,s,null,L);if(I){l.QUERY_SERVICE_MODEL=I.model;l.queryUriForKpiValue=I.uri;l.numericODataReadRef=l.QUERY_SERVICE_MODEL.read(I.uri,null,null,true,function(i){if(i&&i.results&&i.results.length){if(I.unit){l._updateTileModel({unitNumeric:i.results[0][I.unit.name]});l.writeData.unitNumeric=I.unit;l.writeData.unitNumeric.name=I.unit.name}l.writeData.numericData=i.results[0];l.DEFINITION_DATA.value=l.writeData.numericData[l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];l.writeData.numericData.color=l.getTrendColor(l.setThresholdValues());l.DEFINITION_DATA.valueColor=l.writeData.numericData.color;var t="";var a=i.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var o=l.getTrendIndicator(l.setThresholdValues().trendValue,a);if(l.oConfig.EVALUATION.SCALING==-2){a*=100;l.getView().oNumericContent.setFormatterValue(false)}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION);if(l.oConfig.EVALUATION.SCALING==-2){l._updateTileModel({scale:"%"})}l._updateTileModel({value:t.toString(),valueColor:l.writeData.numericData.color,indicator:o})}else{e.call(l,"no Response from QueryServiceUri")}})}}}else{if(E.unit){l._updateTileModel({unit:E.data.results[0][E.unit.name]})}if(E.data&&E.data.results&&E.data.results.length){l.oConfig.TILE_PROPERTIES.FINALVALUE=E.data;l._updateTileModel({value:E.data.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME]});l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,r,l.writeData.unit);i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(u.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=E.data;i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else{e.call(l,"no Response from QueryServiceUri")}}}catch(i){e.call(l,i)}},flowWithoutDesignTimeCall:function(){var i=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(e){this.CALCULATED_KPI_VALUE=e;i.oDualComparisonView.oGenericTile.setFrameType("TwoByOne");i.oDualComparisonView.oGenericTile.removeAllTileContent();i.oDualComparisonView.oGenericTile.addTileContent(i.oDualComparisonView.oNumericTile);i.oDualComparisonView.oGenericTile.addTileContent(i.oDualComparisonView.oComparisonTile);var t=this.CALCULATED_KPI_VALUE;var l,a;for(var o=0;o<t.length;o++){if(t[o].title==i.DEFINITION_DATA.EVALUATION.COLUMN_NAME){a=t[o].value;l=t[o].color||"Neutral";i._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),i.oConfig.EVALUATION.SCALING,i.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),valueColor:l});break}}if(!l&&!a){l=i.DEFINITION_DATA.valueColor;a=i.DEFINITION_DATA.value}this._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),i.oConfig.EVALUATION.SCALING,i.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),data:this.CALCULATED_KPI_VALUE});var r=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system);i.oDualComparisonView.oGenericTile.$().wrap("<a href ='"+r+"'></a>");this.oDualComparisonView.oGenericTile.setState(s.Loaded);var n="";if(l=="Error"){n="sb.error"}if(l=="Neutral"){n="sb.neutral"}if(l=="Critical"){n="sb.critical"}if(l=="Good"){n="sb.good"}var u=i.setThresholdValues();var E,T,c,A,C,L,I,h,g;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){E=this.CALCULATED_KPI_VALUE[0].title;A=this.CALCULATED_KPI_VALUE[0].value;I=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){T=this.CALCULATED_KPI_VALUE[1].title;C=this.CALCULATED_KPI_VALUE[1].value;h=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){c=this.CALCULATED_KPI_VALUE[2].title;L=this.CALCULATED_KPI_VALUE[2].value;g=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color)}var f={status:n,actual:a,target:u.targetValue,cH:u.criticalHighValue,wH:u.warningHighValue,wL:u.warningLowValue,cL:u.criticalLowValue};var U={m1:E,v1:A,c1:I,m2:T,v2:C,c2:h,m3:c,v3:L,c3:g};var p=i.oDualComparisonView.oGenericTile.getTileContent()[0].getContent();var m=i.oDualComparisonView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(p,"NT",f);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(m,"COMP",U)},this.logError)}},flowWithDesignTimeCall:function(){var i=this;try{var e=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(e){i.oConfig.EVALUATION_FILTERS=e.EVALUATION_FILTERS;i.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(e){i.oConfig.EVALUATION_FILTERS=e;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(i.oConfig.TILE_PROPERTIES.id,i.oConfig);i.flowWithoutDesignTimeCall()})}}catch(i){this.logError(i)}},refreshHandler:function(i){if(!i.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){i.flowWithoutDesignTimeCall()}else{i.flowWithDesignTimeCall()}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(i){this.refreshHandler(this)}},onInit:function(){var i=this;this.firstTimeVisible=false;this.oDualComparisonView=this.getView();this.oChip=this.oDualComparisonView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oChip.url.getApplicationSystem();this.oDualComparisonView.oGenericTile.setState(s.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),function(e){i.oConfig=e;if(i.oChip.preview){i.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system))}if(i.oChip.preview.isEnabled()){i.setTitle();i._updateTileModel({value:1,size:l.Auto,frameType:"TwoByOne",state:s.Loading,valueColor:o.Good,indicator:a.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});i.oDualComparisonView.oGenericTile.setState(s.Loaded)}else{i.setTitle();i.oDualComparisonView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(i.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(i.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system)});if(Number(i.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(i.oConfig.TILE_PROPERTIES.id,i.oConfig);i.flowWithoutDesignTimeCall()}else{i.flowWithDesignTimeCall()}}})}catch(i){this.logError(i)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualComparison/DualComparison.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,i,t,a,o,r,s,n,l,u){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualComparison.DualComparison",{getControllerName:function(){return"tiles.indicatorDualComparison.DualComparison"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=this;e.oGenericTileData={};e.oNumericContent=new o({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});e.oNumericTile=new r({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});e.oCmprsDataTmpl=new s({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});e.oCmprsChrtTmpl=new n({size:"{/size}",scale:"{/scale}",data:{template:e.oCmprsDataTmpl,path:"/data"}});e.oComparisonTile=new r({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:e.oCmprsChrtTmpl});e.oGenericTile=new l({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[e.oNumericTile,e.oComparisonTile]});e.oGenericTileModel=new u;e.oGenericTileModel.setData(e.oGenericTileData);e.oGenericTile.setModel(e.oGenericTileModel);return e.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualContribution/DualContribution.controller", ["sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(i,jQuery,e){"use strict";var t=i.ValueColor;var l=i.Size;var o=i.DeviationIndicator;var a=i.LoadState;sap.ui.controller("tiles.indicatorDualContribution.DualContribution",{getTile:function(){return this.oDualContributionView.oGenericTile},_updateTileModel:function(i){var e=this.getTile().getModel().getData();jQuery.extend(e,i);this.getTile().getModel().setData(e);this.getTile().getModel().updateBindings()},setTitle:function(){var i=this;var e=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:e.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(i.oConfig),subheader:e.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(i.oConfig)})},formSelectStatement:function(i){var e=Object.keys(i);var t="";for(var l=0;l<e.length;l++){if(i[e[l]]!==undefined&&i.fullyFormedMeasure){t+=","+i[e[l]]}}return t},logError:function(i){this.oDualContributionView.oGenericTile.setState(a.Failed);this.oDualContributionView.oGenericTile.setState(a.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(i)},setThresholdValues:function(){var i=this;try{var e={};e.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break;case"MA":e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break;case"RA":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break}}else{e.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","FIXED");e.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","FIXED");e.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","FIXED");e.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","FIXED");e.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","FIXED");e.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","FIXED")}return e}catch(e){i.logError(e)}},getTrendIndicator:function(i,e){var t=this;i=Number(i);try{var l=o.None;if(i>e){l=o.Down}else if(i<e){l=o.Up}return l}catch(i){t.logError(i)}},_processDataForComparisonChart:function(i,e,t){var l=this.oConfig.TILE_PROPERTIES.semanticMeasure;var o=[];var a;for(var s=0;s<i.results.length;s++){var n=i.results[s];var r={};try{r.title=n[t].toString()}catch(i){r.title=""}r.value=Number(n[e]);var u=Number(n[e]);if(this.oConfig.EVALUATION.SCALING==-2){u*=100}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(u,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);r.displayValue=a.toString();if(typeof l==="undefined"){r.color="Neutral"}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MA"){if(r.value>n[l]){r.color="Good"}else{r.color="Error"}}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MI"){if(r.value<n[l]){r.color="Good"}else{r.color="Error"}}else{r.color="Neutral"}o.push(r)}return o},fetchKpiValue:function(i,t){var l=this;try{var o=this.oConfig.EVALUATION.ODATA_URL,a=this.oConfig.EVALUATION.ODATA_ENTITYSET,s;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){s=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure}else{s=this.oConfig.EVALUATION.COLUMN_NAME}var n=this.oConfig.TILE_PROPERTIES.dimension;var r=this.oConfig.EVALUATION_VALUES;var u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(l.oConfig.TILE_PROPERTIES.id);if(!u){var T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var c={};c["0"]=s+",asc";c["1"]=s+",desc";c["2"]=n+",asc";c["3"]=n+",desc";var E=c[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var C=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(o),a,s,n,T,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){C.uri+="&$top=3&$orderby="+E[0]+" "+E[2]}else{C.uri+="&$top=3&$orderby="+E[0]+" "+E[1]}this.comparisionChartODataRef=C.model.read(C.uri,null,null,true,function(e){if(C.unit[0]){l._updateTileModel({unitContribution:e.results[0][C.unit[0].name]});l.writeData.unitContribution=C.unit[0];l.writeData.unitContribution.name=C.unit[0].name}if(e&&e.results&&e.results.length){n=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(l.oChip.url.addSystemToServiceUrl(o),a,n);l.writeData.dimension=n;l.oConfig.TILE_PROPERTIES.FINALVALUE=e;l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,s.split(",")[0],n);l.writeData.data=e;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData);i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(e.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=e;l.writeData.data=e;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData)}else{t.call(l,"no Response from QueryServiceUri")}},function(i){if(i&&i.response){e.error(i.message+" : "+i.request.requestUri);t.call(l,i)}});var h=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(l.DEFINITION_DATA.EVALUATION_FILTERS,l.DEFINITION_DATA.ADDITIONAL_FILTERS);var A=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(o),a,s,null,h);if(A){l.QUERY_SERVICE_MODEL=A.model;l.queryUriForKpiValue=A.uri;l.numericODataReadRef=l.QUERY_SERVICE_MODEL.read(A.uri,null,null,true,function(e){if(e&&e.results&&e.results.length){if(A.unit){l._updateTileModel({unitNumeric:e.results[0][A.unit.name]});l.writeData.unitNumeric=A.unit;l.writeData.unitNumeric.name=A.unit.name}l.writeData.numericData=e;var o="";var a=e.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var s=l.getTrendIndicator(l.setThresholdValues().trendValue,a);if(l.oConfig.EVALUATION.SCALING==-2){a*=100;l.getView().oNumericContent.setFormatterValue(false)}l.DEFINITION_DATA.value=a;o=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION);if(l.oConfig.EVALUATION.SCALING==-2){l._updateTileModel({scale:"%"})}l._updateTileModel({value:o.toString(),valueColor:l.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution,indicator:s});i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE,a)}else{t.call(l,"no Response from QueryServiceUri")}})}}else{var g=l.setThresholdValues();var f;if(u.unitContribution){l._updateTileModel({unitContribution:u.data.results[0][u.unitContribution.name]})}if(u.unitNumeric){l._updateTileModel({unitNumeric:u.numericData.results[0][u.unitNumeric.name]})}if(u.data&&u.data.results&&u.data.results.length){n=u.dimension;l.oConfig.TILE_PROPERTIES.FINALVALUE=u.data;l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,s.split(",")[0],n);i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(r.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=u.data}else{t.call(l,"no Response from QueryServiceUri")}if(u.numericData&&u.numericData.results&&u.numericData.results.length){f=u.numericData.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(l.oConfig.EVALUATION.SCALING==-2){f*=100;l.getView().oNumericContent.setFormatterValue(false)}var I=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(f),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION);if(l.oConfig.EVALUATION.SCALING==-2){l._updateTileModel({scale:"%"})}var p=l.getTrendIndicator(g.trendValue,f);l._updateTileModel({value:I.toString(),indicator:p,valueColor:l.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution});i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE,f)}else{t.call(l,"no Response from QueryServiceUri")}}}catch(i){t.call(l,i)}},flowWithoutDesignTimeCall:function(){var i=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(e,t){this.CALCULATED_KPI_VALUE=e;if(i.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){i.oDualContributionView.oGenericTile.setFrameType("TwoByOne");i.oDualContributionView.oGenericTile.removeAllTileContent();i.oDualContributionView.oGenericTile.addTileContent(i.oDualContributionView.oNumericTile);i.oDualContributionView.oGenericTile.addTileContent(i.oDualContributionView.oComparisonTile)}else{i.oDualContributionView.oGenericTile.setFrameType("OneByOne");i.oDualContributionView.oGenericTile.removeAllTileContent();i.oDualContributionView.oGenericTile.addTileContent(i.oDualContributionView.oComparisonTile)}var l=this.CALCULATED_KPI_VALUE;var o=this.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution;for(var s=0;s<this.CALCULATED_KPI_VALUE.length;s++){l[s].color=o}this._updateTileModel({data:l});var n=i.setThresholdValues();var r=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system);i.oDualContributionView.oGenericTile.$().wrap("<a href ='"+r+"'></a>");this.oDualContributionView.oGenericTile.setState(a.Loaded);var u="";if(o=="Error"){u="sb.error"}if(o=="Neutral"){u="sb.neutral"}if(o=="Critical"){u="sb.critical"}if(o=="Good"){u="sb.good"}n=i.setThresholdValues();var T,c,E,C,h,A,g,f,I;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){T=this.CALCULATED_KPI_VALUE[0].title;C=this.CALCULATED_KPI_VALUE[0].value;g=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){c=this.CALCULATED_KPI_VALUE[1].title;h=this.CALCULATED_KPI_VALUE[1].value;f=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){E=this.CALCULATED_KPI_VALUE[2].title;A=this.CALCULATED_KPI_VALUE[2].value;I=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color)}var p={status:u,actual:t,target:n.targetValue,cH:n.criticalHighValue,wH:n.warningHighValue,wL:n.warningLowValue,cL:n.criticalLowValue};var d={m1:T,v1:C,c1:g,m2:c,v2:h,c2:f,m3:E,v3:A,c3:I};var m=i.oDualContributionView.oGenericTile.getTileContent()[0].getContent();var L=i.oDualContributionView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(m,"NT",p);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(L,"CONT",d)},this.logError)}},flowWithDesignTimeCall:function(){var i=this;try{var e=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(e){i.oConfig.EVALUATION_FILTERS=e.EVALUATION_FILTERS;i.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(e){i.oConfig.EVALUATION_FILTERS=e;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(i.oConfig.TILE_PROPERTIES.id,i.oConfig);i.flowWithoutDesignTimeCall()})}}catch(i){this.logError(i)}},refreshHandler:function(i){if(!i.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){i.flowWithoutDesignTimeCall()}else{i.flowWithDesignTimeCall()}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(i){this.refreshHandler(this)}},onInit:function(){var i=this;i.writeData={};this.firstTimeVisible=false;this.oDualContributionView=this.getView();this.oChip=this.oDualContributionView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oChip.url.getApplicationSystem();this.oDualContributionView.oGenericTile.setState(a.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),function(e){i.oConfig=e;if(i.oChip.preview){i.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system))}if(i.oChip.preview.isEnabled()){i.setTitle();i._updateTileModel({value:8888,size:l.Auto,frameType:"TwoByOne",state:a.Loading,valueColor:t.Error,indicator:o.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});i.oDualContributionView.oGenericTile.setState(a.Loaded)}else{i.setTitle();i.oDualContributionView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(i.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(i.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system)});if(Number(i.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(i.oConfig.TILE_PROPERTIES.id,i.oConfig);i.flowWithoutDesignTimeCall()}else{i.flowWithDesignTimeCall()}}})}catch(i){this.logError(i)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualContribution/DualContribution.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,i,t,o,a,r,n,l,s,u){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualContribution.DualContribution",{getControllerName:function(){return"tiles.indicatorDualContribution.DualContribution"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=this;e.oGenericTileData={};e.oNumericContent=new a({value:"{/value}",scale:"{/scale}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});e.oNumericTile=new r({unit:"{/unitNumeric}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});e.oCmprsDataTmpl=new n({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});e.oCmprsChrtTmpl=new l({size:"{/size}",scale:"{/scale}",data:{template:e.oCmprsDataTmpl,path:"/data"}});e.oComparisonTile=new r({unit:"{/unitContribution}",size:"{/size}",footer:"{/footerComp}",content:e.oCmprsChrtTmpl});e.oGenericTile=new s({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[e.oNumericTile,e.oComparisonTile]});e.oGenericTileModel=new u;e.oGenericTileModel.setData(e.oGenericTileData);e.oGenericTile.setModel(e.oGenericTileModel);return e.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.controller", ["sap/ui/model/json/JSONModel","sap/m/library","sap/ui/thirdparty/jquery"],function(e,i,jQuery){"use strict";var t=i.DeviationIndicator;var l=i.ValueColor;var a=i.LoadState;sap.ui.controller("tiles.indicatorDualDeviation.DualDeviation",{logError:function(e){this.oDualDeviationView.oGenericTile.setState(a.Failed);this.oDualDeviationView.oGenericTile.setState(a.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},getThresholdsObjAndColor:function(e){try{var i={};i.arrObj=[];i.returnColor=l.Neutral;var t=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var a,o,r,s;if(t==="MI"){r=Number(e.criticalHighValue)||0;s=Number(e.warningHighValue)||0;if(r&&s){r=window.parseFloat(r);s=window.parseFloat(s);i.arrObj.push({value:r,color:l.Error});i.arrObj.push({value:s,color:l.Critical});if(this.CALCULATED_KPI_VALUE<s){i.returnColor=l.Good}else if(this.CALCULATED_KPI_VALUE<=r){i.returnColor=l.Critical}else{i.returnColor=l.Error}}}else if(t==="MA"){o=Number(e.criticalLowValue)||0;a=Number(e.warningLowValue)||0;if(o&&a){o=window.parseFloat(o);a=window.parseFloat(a);i.arrObj.push({value:o,color:l.Error});i.arrObj.push({value:a,color:l.Critical});if(this.CALCULATED_KPI_VALUE<o){i.returnColor=l.Error}else if(this.CALCULATED_KPI_VALUE<=a){i.returnColor=l.Critical}else{i.returnColor=l.Good}}}else{r=Number(e.criticalHighValue)||0;s=Number(e.warningHighValue)||0;o=Number(e.criticalLowValue)||0;a=Number(e.warningLowValue)||0;if(a&&s&&o&&o){r=window.parseFloat(r);s=window.parseFloat(s);a=window.parseFloat(a);o=window.parseFloat(o);i.arrObj.push({value:r,color:l.Error});i.arrObj.push({value:s,color:l.Critical});i.arrObj.push({value:a,color:l.Critical});i.arrObj.push({value:o,color:l.Error});if(this.CALCULATED_KPI_VALUE<o||this.CALCULATED_KPI_VALUE>r){i.returnColor=l.Error}else if(this.CALCULATED_KPI_VALUE>=o&&this.CALCULATED_KPI_VALUE<=a||this.CALCULATED_KPI_VALUE>=s&&this.CALCULATED_KPI_VALUE<=r){i.returnColor=l.Critical}else{i.returnColor=l.Good}}}return i}catch(e){this.logError(e)}},getTrendIndicator:function(e,i){var l=this;e=Number(e);try{var a=t.None;if(e>i){a=t.Down}else if(e<i){a=t.Up}return a}catch(e){l.logError(e)}},getTile:function(){return this.oDualDeviationView.oGenericTile},_updateTileModel:function(e){var i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},formSelectStatement:function(e){var i=Object.keys(e);var t="";for(var l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t+=","+e[i[l]]}}return t},setThresholdValues:function(){var e=this;var i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break}}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i},fetchKpiValue:function(e,i){var t=this;var l=0;try{var a=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var o=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var r=this.setThresholdValues();var s=r.fullyFormedMeasure;var n=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!n){var u=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var c=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(a),o,s,null,u);if(c){this.QUERY_SERVICE_MODEL=c.model;this.queryUriForKpiValue=c.uri;try{this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(c.uri,null,null,true,function(a){t.writeData={};if(a&&a.results&&a.results.length){l=a.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(c.unit[0]){t._updateTileModel({unit:a.results[0][c.unit[0].name]});t.writeData.unit=c.unit[0];t.writeData.unit.name=c.unit[0].name}t.writeData.numericData=a;var o="",s;var n=l;if(t.oConfig.EVALUATION.SCALING==-2){n*=100;t.getView().oNumericContent.setFormatterValue(false)}o=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(n),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);s=t.getTrendIndicator(r.trendValue,n);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"})}t._updateTileModel({value:o.toString(),indicator:s,valueColor:t.getThresholdsObjAndColor(r).returnColor});t.writeData.data=a;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){r.criticalHighValue=a.results[0][r.sCriticalHigh];r.criticalLowValue=a.results[0][r.sCriticalLow];r.warningHighValue=a.results[0][r.sWarningHigh];r.warningLowValue=a.results[0][r.sWarningLow];r.targetValue=a.results[0][r.sTarget];r.trendValue=a.results[0][r.sTrend]}e.call(t,l,r)}else{i.call(t,"no Response from QueryServiceUri")}},function(e){if(e&&e.response){i.call(t,e.message)}})}catch(e){t.logError("Error in Query Service URI")}}}else if(n.data&&n.data.results&&n.data.results.length){var T,g,h;r=t.setThresholdValues();T=n.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING==-2){T*=100;t.getView().oNumericContent.setFormatterValue(true)}if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"})}g=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(T),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);h=t.getTrendIndicator(r.trendValue,T);if(n.unit){t._updateTileModel({unit:n.data.results[0][n.unit.name]})}t._updateTileModel({indicator:h,value:g.toString()});if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){r.criticalHighValue=n.data.results[0][r.sCriticalHigh];r.criticalLowValue=n.data.results[0][r.sCriticalLow];r.warningHighValue=n.data.results[0][r.sWarningHigh];r.warningLowValue=n.data.results[0][r.sWarningLow];r.targetValue=n.data.results[0][r.sTarget];r.trendValue=n.data.results[0][r.sTrend]}e.call(t,n.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME],r)}else{i.call(t,"no Response from QueryServiceUri")}}catch(e){i.call(t,e)}},flowWithoutDesignTimeCall:function(){var e=this;var i,t;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(l,o){var r=Number(l);if(this.oConfig.EVALUATION.SCALING==-2){r*=100}i=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(r),this.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);this.CALCULATED_KPI_VALUE=Number(l);var s={};var n=this.getThresholdsObjAndColor(o);var u={value:Number(l),color:n.returnColor};s.valueColor=u.color;s.actualValueLabel=i.toString();s.actual=u;var c=this.DEFINITION_DATA.EVALUATION_VALUES,T;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T=Number(o.targetValue);if(this.oConfig.EVALUATION.SCALING==-2){T*=100}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(T,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);s.targetValue=Number(o.targetValue);s.targetValueLabel=t.toString()}else{for(var g=0;g<c.length;g++){if(c[g].TYPE==="TA"){T=Number(c[g].FIXED);if(this.oConfig.EVALUATION.SCALING==-2){T*=100}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(T);s.targetValue=Number(c[g].FIXED);s.targetValueLabel=t.toString()}}}this._updateTileModel(s);var h=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oDualDeviationView.oGenericTile.$().wrap("<a href ='"+h+"'></a>");this.oDualDeviationView.oGenericTile.setState(a.Loaded);var E="";if(s.valueColor=="Error"){E="sb.error"}if(s.valueColor=="Neutral"){E="sb.neutral"}if(s.valueColor=="Critical"){E="sb.critical"}if(s.valueColor=="Good"){E="sb.good"}var A={status:E,actual:r,target:o.targetValue,cH:o.criticalHighValue,wH:o.warningHighValue,wL:o.warningLowValue,cL:o.criticalLowValue};var d=A;var C=e.oDualDeviationView.oGenericTile.getTileContent()[0].getContent();var f=e.oDualDeviationView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",A);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(f,"DT",d)},this.logError)}},flowWithDesignTimeCall:function(){var e=this;try{var i=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(i){e.oConfig.EVALUATION_FILTERS=i.EVALUATION_FILTERS;e.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(i){e.oConfig.EVALUATION_FILTERS=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},refreshHandler:function(e){if(!e.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef)}if(e){this.refreshHandler(this)}},setTextInTile:function(){var e=this;var i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},onInit:function(){var e=this;this.firstTimeVisible=false;this.oDualDeviationView=this.getView();this.oViewData=this.oDualDeviationView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oTileApi.url.getApplicationSystem();this.oDualDeviationView.oGenericTile.setState(a.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(e.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),e.oTileApi.preview.isEnabled(),function(i){e.oConfig=i;e.setTextInTile();if(e.oTileApi.preview){e.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system))}if(e.oTileApi.preview.isEnabled()){e._updateTileModel({valueColor:"Good",value:100,frameType:"TwoByOne",unit:"USD",actual:{value:120,color:l.Good},targetValue:100,thresholds:[{value:0,color:l.Error},{value:50,color:l.Critical},{value:150,color:l.Critical},{value:200,color:l.Error}],showActualValue:true,showTargetValue:true});e.oDualDeviationView.oGenericTile.setState(a.Loaded)}else{e.oDualDeviationView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system)});if(Number(e.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}})}catch(e){this.logError(e)}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new e({}))}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef)}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,t,a,i,l,o,r,u,s,n,c){"use strict";var m=l.Size;var h=l.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualDeviation.DualDeviation",{getControllerName:function(){return"tiles.indicatorDualDeviation.DualDeviation"},createContent:function(){var e=this;this.setHeight("100%");this.setWidth("100%");var t="Lorem ipsum";var a="Lorem ipsum";var i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(i.title&&i.subTitle){t=i.title;a=i.subTitle}var l={subheader:a,header:t,footerNum:"",footerComp:"",frameType:"TwoByOne",state:h.Loading,scale:""};e.oNumericContent=new o({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});e.oNumericTile=new r({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});var p=new u({value:"{value}",color:"{color}"});e.oBCTmpl=new s({size:m.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:p,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});var d=new r({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oBCTmpl});e.oGenericTile=new n({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[e.oNumericTile,d]});var v=new c;v.setData(l);e.oGenericTile.setModel(v);return e.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualTrend/DualTrend.controller", ["sap/ui/model/json/JSONModel","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartItem","sap/m/library","sap/ui/thirdparty/jquery"],function(e,i,t,l,jQuery){"use strict";var a=l.Size;var r=l.ValueColor;var s=l.DeviationIndicator;var o=l.LoadState;sap.ui.controller("tiles.indicatorDualTrend.DualTrend",{logError:function(e){this.oDualTrendView.oGenericTile.setState(o.Failed);this.oDualTrendView.oGenericTile.setState(o.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},formSelectStatement:function(e){var i=Object.keys(e);var t="";for(var l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t+=","+e[i[l]]}}return t},setThresholdValues:function(){var e=this;try{var i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break}}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i}catch(i){e.logError(i)}},getTrendIndicator:function(e,i){var t=this;e=Number(e);try{var l=s.None;if(e>i){l=s.Down}else if(e<i){l=s.Up}return l}catch(e){t.logError(e)}},getTile:function(){return this.oDualTrendView.oGenericTile},getTrendColor:function(e){var i=this;try{var t=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var l=r.Neutral;if(t==="MI"){if(e.criticalHighValue&&e.warningHighValue){e.criticalHighValue=Number(e.criticalHighValue);e.warningHighValue=Number(e.warningHighValue);if(this.CALCULATED_KPI_VALUE<e.warningHighValue){l=r.Good}else if(this.CALCULATED_KPI_VALUE<=e.criticalHighValue){l=r.Critical}else{l=r.Error}}}else if(t==="MA"){if(e.criticalLowValue&&e.warningLowValue){e.criticalLowValue=Number(e.criticalLowValue);e.warningLowValue=Number(e.warningLowValue);if(this.CALCULATED_KPI_VALUE<e.criticalLowValue){l=r.Error}else if(this.CALCULATED_KPI_VALUE<=e.warningLowValue){l=r.Critical}else{l=r.Good}}}else if(e.warningLowValue&&e.warningHighValue&&e.criticalLowValue&&e.criticalHighValue){e.criticalHighValue=Number(e.criticalHighValue);e.warningHighValue=Number(e.warningHighValue);e.warningLowValue=Number(e.warningLowValue);e.criticalLowValue=Number(e.criticalLowValue);if(this.CALCULATED_KPI_VALUE<e.criticalLowValue||this.CALCULATED_KPI_VALUE>e.criticalHighValue){l=r.Error}else if(this.CALCULATED_KPI_VALUE>=e.criticalLowValue&&this.CALCULATED_KPI_VALUE<=e.warningLowValue||this.CALCULATED_KPI_VALUE>=e.warningHighValue&&this.CALCULATED_KPI_VALUE<=e.criticalHighValue){l=r.Critical}else{l=r.Good}}return l}catch(e){i.logError(e)}},_updateTileModel:function(e){var i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},onAfterFinalEvaluation:function(){var e=this;var l=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var a=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var r=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var s=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var n=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(n==undefined){this.logError();return}var u=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE,c=this.DEFINITION_DATA.EVALUATION_VALUES,T;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var h=r;switch(u){case"MI":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");if(e.sWarningHigh&&e.sCriticalHigh&&e.sTarget){h+=","+e.sWarningHigh+","+e.sCriticalHigh+","+e.sTarget}break;case"MA":e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");if(e.sWarningLow&&e.sCriticalLow&&e.sTarget){h+=","+e.sWarningLow+","+e.sCriticalLow+","+e.sTarget}break;case"RA":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");if(e.sWarningLow&&e.sCriticalLow&&e.sTarget&&e.sWarningHigh&&e.sCriticalHigh){h+=","+e.sWarningLow+","+e.sCriticalLow+","+e.sTarget+","+e.sWarningHigh+","+e.sCriticalHigh}break}T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(e.oTileApi.url.addSystemToServiceUrl(l),a,h,n,s)}else{T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(e.oTileApi.url.addSystemToServiceUrl(l),a,r,n,s)}var E=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e.oConfig.TILE_PROPERTIES.id);if(!E){if(T){this.queryUriForTrendChart=T.uri;e.writeData={};try{this.trendChartODataReadRef=T.model.read(T.uri,null,null,true,function(i){if(i&&i.results&&i.results.length){if(T.unit[0]){e.unit=i.results[0][T.unit[0].name];e.writeData.unit=T.unit[0];e.writeData.unit.name=T.unit[0].name}e.queryUriResponseForTrendChart=i;n=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(e.oTileApi.url.addSystemToServiceUrl(l),a,n);i.firstXlabel=i.results[0][n];i.lastXlabel=i.results[i.results.length-1][n];e.writeData.data=i;e.writeData.dimensionName=n;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,e.writeData);var t=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oDualTrendView.oGenericTile.$().wrap("<a href ='"+t+"'></a>");e.oDualTrendView.oGenericTile.setState(o.Loaded);f(i,e.DEFINITION_DATA.EVALUATION.VALUES_SOURCE)}else{e.logError("no Response from QueryServiceUri")}},function(i){if(i&&i.response){e.logError("Data call failed")}})}catch(i){e.logError(i)}}else{e.logError()}s=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(e.DEFINITION_DATA.EVALUATION_FILTERS,e.DEFINITION_DATA.ADDITIONAL_FILTERS);T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(e.oTileApi.url.addSystemToServiceUrl(l),a,r,null,s);if(T){e.QUERY_SERVICE_MODEL=T.model;e.queryUriForKpiValue=T.uri;e.numericODataReadRef=e.QUERY_SERVICE_MODEL.read(T.uri,null,null,true,function(i){if(i&&i.results&&i.results.length){var t="";var l=i.results[0][e.DEFINITION_DATA.EVALUATION.COLUMN_NAME];e.writeData.numericData=i;if(e.oConfig.EVALUATION.SCALING==-2){l*=100}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(l),e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);if(e.oConfig.EVALUATION.SCALING==-2){e._updateTileModel({scale:"%"})}var a=e.getTrendIndicator(e.setThresholdValues().trendValue,l);e._updateTileModel({value:t.toString(),valueColor:e.getTrendColor(e.setThresholdValues()),indicator:a})}else{fnError.call(e,"no Response from QueryServiceUri")}})}}else{try{if(E.unit!==undefined){e.unit=E.data.results[0][E.unit.name]}e.queryUriResponseForTrendChart=E.data;n=E.dimensionName;var g=E.numericData.results[0][e.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var d=e.getTrendIndicator(e.setThresholdValues().trendValue,E.data.results[0][e.DEFINITION_DATA.EVALUATION.COLUMN_NAME]);var A=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(g),e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);e.oDualTrendView.oGenericTile.setState(o.Loaded);f(E.data,e.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);e._updateTileModel({value:A.toString(),valueColor:e.getTrendColor(e.setThresholdValues()),indicator:d})}catch(i){e.logError(i)}}function f(l,a){var s=[];var o=[];var T=[];var h=[];var E=[];var g=[];var d=l.firstXlabel;var A,f,m,L,C;var N=l.lastXlabel;var p=Number(l.results[0][r]);var I=Number(l.results[l.results.length-1][r]);var U;for(U in l.results){l.results[U][n]=Number(U);l.results[U][r]=Number(l.results[U][r]);if(e.sWarningHigh){l.results[U][e.sWarningHigh]=Number(l.results[U][e.sWarningHigh])}if(e.sCriticalHigh){l.results[U][e.sCriticalHigh]=Number(l.results[U][e.sCriticalHigh])}if(e.sCriticalLow){l.results[U][e.sCriticalLow]=Number(l.results[U][e.sCriticalLow])}if(e.sWarningLow){l.results[U][e.sWarningLow]=Number(l.results[U][e.sWarningLow])}if(e.sTarget){l.results[U][e.sTarget]=Number(l.results[U][e.sTarget])}if(e.sWarningHigh){T.push(l.results[U][e.sWarningHigh])}if(e.sCriticalHigh){h.push(l.results[U][e.sCriticalHigh])}if(e.sCriticalLow){E.push(l.results[U][e.sCriticalLow])}if(e.sWarningLow){g.push(l.results[U][e.sWarningLow])}s.push(l.results[U][n]);o.push(l.results[U][r])}try{d=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(d);N=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(N)}catch(i){e.logError(i)}var V=Number(p);if(e.oConfig.EVALUATION.SCALING==-2){V*=100}var w=Math.min.apply(Math,o);var M=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(V,e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);if(e.oConfig.EVALUATION.SCALING==-2){M+=" %"}var S=M.toString();var D=Number(I);if(e.oConfig.EVALUATION.SCALING==-2){D*=100}var b=Math.max.apply(Math,o);var v=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(D,e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);if(e.oConfig.EVALUATION.SCALING==-2){v+=" %"}var R=v.toString();try{var O=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,s));var H=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,s))}catch(i){e.logError(i)}if(a=="MEASURE"){if(T.length!=0){e.firstwH=T[O];e.lastwH=T[H]}if(h.length!=0){e.firstcH=h[O];e.lastcH=h[H]}if(E.length!=0){e.firstcL=E[O];e.lastcL=E[H]}if(g.length!=0){e.firstwL=g[O];e.lastwL=g[H]}}var _={width:"100%",height:"100%",unit:e.unit||"",chart:{color:"Neutral",data:l.results},size:"Auto",minXValue:O,maxXValue:H,minYValue:w,maxYValue:b,firstXLabel:{label:d+"",color:"Neutral"},lastXLabel:{label:N+"",color:"Neutral"},firstYLabel:{label:S+"",color:"Neutral"},lastYLabel:{label:R+"",color:"Neutral"},minLabel:{},maxLabel:{}},F;switch(u){case"MA":for(U in c){if(c[U].TYPE=="CL"){_.minThreshold={color:"Error"};F={};F[n]="";F[r]=Number(c[U].FIXED);e.cl=Number(c[U].FIXED);_.minThreshold.data=a=="MEASURE"?l.results:[F];A=a=="MEASURE"?e.sCriticalLow:r}else if(c[U].TYPE=="WL"){_.maxThreshold={color:"Good"};F={};F[n]="";F[r]=Number(c[U].FIXED);_.maxThreshold.data=a=="MEASURE"?l.results:[F];f=a=="MEASURE"?e.sWarningLow:r;e.wl=Number(c[U].FIXED)}else if(c[U].TYPE=="TA"){F={};F[n]="";F[r]=Number(c[U].FIXED);_.target={color:"Neutral"};_.target.data=a=="MEASURE"?l.results:[F];C=a=="MEASURE"?e.sTarget:r}}_.innerMinThreshold={data:[]};_.innerMaxThreshold={data:[]};if(a=="FIXED"){_.firstYLabel.color=p<e.cl?"Error":e.cl<=p&&p<=e.wl?"Critical":p>e.wl?"Good":"Neutral";_.lastYLabel.color=I<e.cl?"Error":e.cl<=I&&I<=e.wl?"Critical":I>e.wl?"Good":"Neutral"}else if(a=="MEASURE"&&e.firstwL&&e.lastwL&&e.firstcL&&e.lastcL){_.firstYLabel.color=p<e.firstcL?"Error":e.firstcL<=p&&p<=e.firstwL?"Critical":p>e.firstwL?"Good":"Neutral";_.lastYLabel.color=I<e.lastcL?"Error":e.lastcL<=I&&I<=e.lastwL?"Critical":I>e.lastwL?"Good":"Neutral"}break;case"MI":for(U in c){if(c[U].TYPE=="CH"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.ch=Number(c[U].FIXED);_.maxThreshold={color:"Error"};_.maxThreshold.data=a=="MEASURE"?l.results:[F];f=a=="MEASURE"?e.sCriticalHigh:r}else if(c[U].TYPE=="WH"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.wh=Number(c[U].FIXED);_.minThreshold={color:"Good"};_.minThreshold.data=a=="MEASURE"?l.results:[F];A=a=="MEASURE"?e.sWarningHigh:r}else if(c[U].TYPE=="TA"){F={};F[n]="";F[r]=Number(c[U].FIXED);_.target={color:"Neutral"};_.target.data=a=="MEASURE"?l.results:[F];C=a=="MEASURE"?e.sTarget:r}}if(a=="FIXED"){_.firstYLabel.color=p>e.ch?"Error":e.wh<=p&&p<=e.ch?"Critical":p<e.wh?"Good":"Neutral";_.lastYLabel.color=I>e.ch?"Error":e.wh<=I&&I<=e.ch?"Critical":I<e.wh?"Good":"Neutral"}else if(a=="MEASURE"&&e.firstwH&&e.lastwH&&e.firstcH&&e.lastcH){_.firstYLabel.color=p>e.firstcH?"Error":e.firstwH<=p&&p<=e.firstcH?"Critical":p<e.firstwH?"Good":"Neutral";_.lastYLabel.color=I>e.lastcH?"Error":e.lastwH<=I&&I<=e.lastcH?"Critical":I<e.lastwH?"Good":"Neutral"}_.innerMaxThreshold={data:[]};_.innerMinThreshold={data:[]};break;case"RA":for(U in c){if(c[U].TYPE=="CH"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.ch=Number(c[U].FIXED);_.maxThreshold={color:"Error"};_.maxThreshold.data=a=="MEASURE"?l.results:[F];f=a=="MEASURE"?e.sCriticalHigh:r}else if(c[U].TYPE=="WH"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.wh=Number(c[U].FIXED);_.innerMaxThreshold={color:"Good"};_.innerMaxThreshold.data=a=="MEASURE"?l.results:[F];L=a=="MEASURE"?e.sWarningHigh:r}else if(c[U].TYPE=="WL"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.wl=Number(c[U].FIXED);_.innerMinThreshold={color:"Good"};_.innerMinThreshold.data=a=="MEASURE"?l.results:[F];m=a=="MEASURE"?e.sWarningLow:r}else if(c[U].TYPE=="CL"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.cl=Number(c[U].FIXED);_.minThreshold={color:"Error"};_.minThreshold.data=a=="MEASURE"?l.results:[F];A=a=="MEASURE"?e.sCriticalLow:r}else if(c[U].TYPE=="TA"){F={};F[n]="";F[r]=Number(c[U].FIXED);_.target={color:"Neutral"};_.target.data=a=="MEASURE"?l.results:[F];C=a=="MEASURE"?e.sTarget:r}}if(a=="FIXED"){_.firstYLabel.color=p>e.ch||p<e.cl?"Error":e.wh<=p&&p<=e.ch||e.cl<=p&&p<=e.wl?"Critical":p>=e.wl&&p<=e.wh?"Good":"Neutral";_.lastYLabel.color=I>e.ch||I<e.cl?"Error":e.wh<=I&&I<=e.ch||e.cl<=I&&I<=e.wl?"Critical":I>=e.wl&&I<=e.wh?"Good":"Neutral"}else if(a=="MEASURE"&&e.firstwL&&e.lastwL&&e.firstcL&&e.lastcL&&e.firstwH&&e.lastwH&&e.firstcH&&e.lastcH){_.firstYLabel.color=p>e.firstcH||p<e.firstcL?"Error":e.firstwH<=p&&p<=e.firstcH||e.firstcL<=p&&p<=e.firstwL?"Critical":p>=e.firstwL&&p<=e.firstwH?"Good":"Neutral";_.lastYLabel.color=I>e.lastcH||I<e.lastcL?"Error":e.lastwH<=I&&I<=e.lastcH||e.lastcL<=I&&I<=e.lastwL?"Critical":I>=e.lastwL&&I<=e.lastwH?"Good":"Neutral"}break}var y=function(e,l,a){return new t({color:"{/"+e+"/color}",points:{path:"/"+e+"/data",template:new i({x:"{"+l+"}",y:"{"+a+"}"})}})};e.getTile().getTileContent()[1].getContent().setTarget(y("target",n,C));e.getTile().getTileContent()[1].getContent().setInnerMinThreshold(y("innerMinThreshold",n,m));e.getTile().getTileContent()[1].getContent().setInnerMaxThreshold(y("innerMaxThreshold",n,L));e.getTile().getTileContent()[1].getContent().setMinThreshold(y("minThreshold",n,A));e.getTile().getTileContent()[1].getContent().setMaxThreshold(y("maxThreshold",n,f));e.getTile().getTileContent()[1].getContent().setChart(y("chart",n,r));e._updateTileModel(_)}},flowWithoutDesignTimeCall:function(){this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true}this.onAfterFinalEvaluation()},flowWithDesignTimeCall:function(){var e=this;try{var i=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(i){e.oConfig.EVALUATION_FILTERS=i.EVALUATION_FILTERS;e.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(i){e.oConfig.EVALUATION_FILTERS=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},refreshHandler:function(e){if(!e.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef)}if(e){this.refreshHandler(this)}},setTextInTile:function(){var e=this;this._updateTileModel({header:e.oTileApi.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:e.oTileApi.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},onInit:function(){var e=this;this.firstTimeVisible=false;this.oDualTrendView=this.getView();this.oViewData=this.oDualTrendView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oTileApi.url.getApplicationSystem();this.oDualTrendView.oGenericTile.setState(o.Loading);if(this.oTileApi.preview.isEnabled()){this.setTextInTile();this._updateTileModel({value:8888,size:a.Auto,frameType:"TwoByOne",state:o.Loading,valueColor:r.Error,indicator:s.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oDualTrendView.oGenericTile.setState(o.Loaded)}else{try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(i){e.oConfig=i;e.setTextInTile();e.oDualTrendView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system)});if(Number(e.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}})}catch(e){this.logError(e)}}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new e({}))}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef)}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualTrend/DualTrend.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/suite/ui/microchart/AreaMicroChart","sap/m/TileContent","sap/m/NumericContent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,a,i,t,r,n,l,s,o,u,c,h){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualTrend.DualTrend",{getControllerName:function(){return"tiles.indicatorDualTrend.DualTrend"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=function(e){return new r({color:"Good",points:{path:"/"+e+"/data",template:new n({x:"{day}",y:"{balance}"})}})};var a=function(e){return new l({label:"{/"+e+"/label}",color:"{/"+e+"/color}"})};var i={footer:"",header:"",subheader:""};var t=new s({width:"{/width}",height:"{/height}",size:"{/size}",target:e("target"),innerMinThreshold:e("innerMinThreshold"),innerMaxThreshold:e("innerMaxThreshold"),minThreshold:e("minThreshold"),maxThreshold:e("maxThreshold"),chart:e("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:a("firstXLabel"),lastXLabel:a("lastXLabel"),firstYLabel:a("firstYLabel"),lastYLabel:a("lastYLabel"),minLabel:a("minLabel"),maxLabel:a("maxLabel")});var m=new o({unit:"{/unit}",size:"{/size}",content:t});var d=new u({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});var b=new o({unit:"{/unit}",size:"{/size}",content:d});this.oGenericTile=new c({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[b,m]});var p=new h;p.setData(i);this.oGenericTile.setModel(p);return this.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.controller", ["sap/ui/model/json/JSONModel","sap/suite/ui/commons/library"],function(e,t){"use strict";var a=t.InfoTileValueColor;var i=t.InfoTileSize;var r=t.LoadState;sap.ui.controller("tiles.indicatorHarveyBall.HarveyBallTile",{onInit:function(){this.getView().setModel(new e);this.initializeVariables();this.attachHandlers();this.getVariable("tile").setState(r.Loading);this.readChipConfiguration()},attachHandlers:function(){var e=this;var t=this.getVariable("chip");if(t.visible){t.visible.attachVisible(function(t){if(t){e.onVisible()}else{e.abortAllOpenODataRequests()}})}this.getVariable("tile").attachPress(function(){e.abortAllOpenODataRequests();var t=e.getVariable("indicatorUtils");e.getVariable("cache").setKpivalueById(e.getVariable("chipId"),null);window.location.hash=t.getNavigationTarget(e.getVariable("evalData"),e.getVariable("system"))})},initializeVariables:function(){this._variables={};this._oDataRequests={};var e=this.getView();var t=e.getViewData();var a=e.oTile;var i=t.chip;this.setVariable("indicatorUtils",sap.ushell.components.tiles.indicatorTileUtils.util);this.setVariable("cache",sap.ushell.components.tiles.indicatorTileUtils.cache);this.setVariable("hasAppeared",false);this.setVariable("chip",i);this.setVariable("tile",a);this.setVariable("tileControl",a.getTileContent()[0].getContent());this.setVariable("configurationString",i.configuration.getParameterValueAsString("tileConfiguration"));this.setVariable("system",i.url.getApplicationSystem())},getVariable:function(e){return this._variables[e]},setVariable:function(e,t){this._variables[e]=t},readChipConfiguration:function(){var e=this;var t=this.getVariable("chip");var a=this.getVariable("indicatorUtils");a.getParsedChip(this.getVariable("configurationString"),function(i){e.setVariable("evalData",i);e.setVariable("chipId",i.TILE_PROPERTIES.id);e.setVariable("tileProperties",i.TILE_PROPERTIES);if(t.preview){t.preview.setTargetUrl(a.getNavigationTarget(i,e.getVariable("system")));e.loadPreviewData();if(t.preview.isEnabled()){e.getVariable("tile").setState(r.Loaded)}else{e.loadActualData()}}})},loadPreviewData:function(){var e=this.getVariable("indicatorUtils").getTileTitleSubtitle(this.getVariable("chip"));this.getView().getModel().setData({fractionValue:34,value:100,size:i.Auto,frameType:"OneByOne",color:"Good",state:r.Loading,header:e.title||this.getVariable("indicatorUtils").getChipTitle(this.getVariable("evalData")),subheader:e.subTitle||this.getVariable("indicatorUtils").getChipSubTitle(this.getVariable("evalData"))})},loadActualData:function(){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.getVariable("cache").setEvaluationById(this.getVariable("chipId"),this.getVariable("evalData"));this.onEvalFiltersFetched()}else{this.fetchEvalFilters(this.onEvalFiltersFetched)}},registerOpenODataRequest:function(e,t){this._oDataRequests[e]=t},deregisterOpenODataRequest:function(e){delete this._oDataRequests[e]},abortAllOpenODataRequests:function(){for(var e in this._oDataRequests){try{this.getVariable("indicatorUtils").abortPendingODataCalls(this._oDataRequests[e]);delete this._oDataRequests[e]}catch(e){}}},fetchKpiValue:function(e){function t(e,t,i,r,l){var s=e.read(t,null,null,true,function(e){a.deregisterOpenODataRequest(i.type);if(e&&e.results&&e.results.length){try{if(i.thresholds&&i.thresholds.length){a._setThresholdValues(e.results[0])}b[i.type]=e.results[0][i.measure];b.unit=b.unit||e.results[0][i.unit]||"";if(--v==0){a.getVariable("cache").setKpivalueById(a.getVariable("chipId"),b);r.call(a,b)}}catch(e){a.logError(e)}}else{l.call(a,"no data")}},function(e){a.deregisterOpenODataRequest(i.type);if(e&&e.response){l.call(a,e.message)}});a.registerOpenODataRequest(i.type,s)}var a=this;var i=this.getVariable("indicatorUtils");var r=this.getVariable("cache").getKpivalueById(this.getVariable("chipId"));if(r){e.fnS.call(a,r)}else{var l=e.measure1,s=e.measure2;var o=e.url,n=e.entitySet;var h=e.filters;var u=e.fractionFilters.concat(h);var c,V;var g,f,b;var v=2;u.forEach(function(e){e.value=e.value+"";e.valueTo=e.valueTo+""});if(e.thresholds&&e.thresholds.length){c=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(o),n,l+","+e.thresholds,null,h)}else{c=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(o),n,l,null,h)}V=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(o),n,s,null,u);g=c.unit[0];f=V.unit[0];b={kpiValue:null,fractionValue:null,unit:""};if(c){t(c.model,c.uri,{measure:l,type:"kpiValue",unit:g,thresholds:e.thresholds},e.fnS,e.fnE)}if(V){t(V.model,V.uri,{measure:s,type:"fractionValue",unit:f},e.fnS,e.fnE)}if(!(c&&V)){e.fnE.call(a,"Error Preparing Query Service URI")}}},_setThresholdValues:function(e){var t=this.getVariable("oThreshold"),a;if(t){if(this.getVariable("evalData").EVALUATION.VALUES_SOURCE=="RELATIVE"){if(t.TA.COLUMN_NAME){t.TA.VALUE=parseFloat(e[t.TA.COLUMN_NAME]);for(a in t){if(!t[a].COLUMN_NAME){t[a].VALUE=t.TA.VALUE*t[a].VALUE/100}}}}else{for(a in t){if(t[a].COLUMN_NAME){t[a].VALUE=parseFloat(e[t[a].COLUMN_NAME])}}}}this.setVariable("oThreshold",t)},getThresholdObject:function(){var e=this.getVariable("oThreshold");if(!e){var t=this.getVariable("evalData").EVALUATION_VALUES;e={};for(var a=0,i=t.length;a<i;a++){e[t[a].TYPE]={VALUE:parseFloat(t[a].FIXED),COLUMN_NAME:t[a].COLUMN_NAME}}this.setVariable("oThreshold",e)}return e},hasSomeValue:function(){var e=true;if(arguments.length){for(var t=0,a=arguments.length;t<a;t++){if(!(arguments[t]||arguments[t]=="0")){e=false;break}}}else{e=false}return e},getTrendColor:function(e){var t="Neutral";var i,r,l,s,o,n;if(this.getVariable("tileProperties").isFractionMeasure){i=this.getThresholdObject();r=this.getVariable("evalData").EVALUATION.GOAL_TYPE;if(r=="MA"){l=i.WL;o=i.CL;if(this.hasSomeValue(l,o)){t="Good";if(e<o.VALUE){t="Error"}else if(e<=l.VALUE){t="Critical"}}}else if(r=="MI"){s=i.WH;n=i.CH;if(this.hasSomeValue(s,n)){t="Error";if(e<s.VALUE){t="Good"}else if(e<=n.VALUE){t="Critical"}}}else{l=i.WL;o=i.CL;s=i.WH;n=i.CH;if(this.hasSomeValue(s,n,o,l)){if(e<=o.VALUE||e>=s.VALUE){t="Error"}else if(l.VALUE>=e&&e>=o.VALUE||n.VALUE>=e&&e>=s.VALUE){t="Critical"}else{t="Good"}}}}return a[t]},_getThresholdMeasures:function(){var e=[];var t=this.getThresholdObject();for(var a in t){if(t[a].COLUMN_NAME){e.push(t[a].COLUMN_NAME)}}return e},onEvalFiltersFetched:function(){var e=this;if(this.getVariable("chip").visible.isVisible()&&!this.getVariable("hasAppeared")){try{var t=this.getVariable("evalData");var a=t.EVALUATION.ODATA_URL;var i=t.EVALUATION.ODATA_ENTITYSET;var r=this.getVariable("tileProperties");var l=[];var s=this.getVariable("indicatorUtils").prepareFilterStructure(t.EVALUATION_FILTERS,t.ADDITIONAL_FILTERS);var o=t.EVALUATION.COLUMN_NAME;var n=o;var h=[];if(r.isFractionMeasure){n=r.harveyTotalMeasure;h=this._getThresholdMeasures()}else{l=this.getVariable("indicatorUtils").prepareFilterStructure(r.harveyFilters||l)}this.setVariable("totalMeasure",n);this.setVariable("fractionMeasure",o);this.fetchKpiValue({measure1:n,measure2:o,entitySet:i,thresholds:h,url:a,filters:s,fractionFilters:l,fnS:function(t){t.kpiValue=Number(t.kpiValue);t.fractionValue=Number(t.fractionValue);e.setVariable("kpiValue",t.kpiValue);e.setVariable("fractionValue",t.fractionValue);e.onKpiValueFetched(t.kpiValue,t.unit,t.fractionValue)},fnE:this.logError});e.setVariable("hasAppeared",true)}catch(e){this.logError(e)}}},fetchEvalFilters:function(e){var t=this;try{var a=this.getVariable("cache").getEvaluationById(this.getVariable("chipId"));if(a){this.getVariable("evalData").EVALUATION_FILTERS=a.EVALUATION_FILTERS;e()}else{var i=this.getVariable("indicatorUtils").getFilterFromRunTimeService(this.getVariable("evalData"),function(a){t.deregisterOpenODataRequest("kpiFilterRequest");t.getVariable("evalData").EVALUATION_FILTERS=a;t.getVariable("cache").setEvaluationById(t.getVariable("chipId"),t.getVariable("evalData"));e.call(t)},function(e){this.logError(e);t.deregisterOpenODataRequest("kpiFilterRequest")});this.registerOpenODataRequest("kpiFilterRequest",i)}}catch(e){this.logError(e)}},onKpiValueFetched:function(e,t,a,i){var l=this.getVariable("indicatorUtils");var s=e;var o=a;var n=this.getVariable("evalData");var h=n.EVALUATION.SCALING;if(h==-2){s*=100;o*=100}var u=this.isACurrencyMeasure(this.getVariable("totalMeasure"));s=l.getLocaleFormattedValue(Number(s),h,null,u,t);u=this.isACurrencyMeasure(this.getVariable("fractionMeasure"));o=l.getLocaleFormattedValue(Number(o),h,null,u,t);this.getView().getModel().setProperty("/totalLabel",s+" "+t);this.getView().getModel().setProperty("/fractionLabel",o+" "+i);this.getView().getModel().setProperty("/color",this.getTrendColor(a));this.getView().getModel().setProperty("/value",e);this.getView().getModel().setProperty("/fractionValue",a);var c=l.getNavigationTarget(this.getVariable("evalData"),this.getVariable("system"));this.getVariable("tile").$().wrap("<a href ='"+c+"'></a>");this.getVariable("tile").setState(r.Loaded)},logError:function(e){this.getVariable("tile").setState(r.Failed);this.getVariable("indicatorUtils").logError(e,this.getVariable("tile"))},onVisible:function(){if(!this.getVariable("hasAppeared")){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.onEvalFiltersFetched()}else{this.fetchEvalFilters(this.onEvalFiltersFetched)}}},onExit:function(){this.abortAllOpenODataRequests()}})});
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/cache", [],function(){"use strict";var n={};var t={};var e="HANA_CLIENT";return{getCacheHanaClient:function(){return n[e]},setCacheHanaClient:function(t){n[e]=t},getEvaluationByChipId:function(t){if(n[t]){return n[t]}return null},getEvaluationById:function(n){return this.getEvaluationByChipId(n)},setEvaluationById:function(t,e){n[t]=e},getFrontEndCacheDeferredObject:function(t){if(n[t]){return n[t]}return null},setFrontEndCacheDefferedObject:function(t,e){n[t]=e},getKpivalueById:function(n){if(t[n]){return t[n]}return null},setKpivalueById:function(n,e){t[n]=e}}},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics", ["sap/ui/model/odata/ODataModel","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/core/Core"],function(e,t,i,n){"use strict";sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants={};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE="http://www.sap.com/Protocols/SAPData";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.VERSION="0.7";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper={renderPropertyKeyValue:function(e,t){if(e.charAt(0)=="'"){throw"Illegal property value starting with a quote"}switch(t){case"Edm.String":return"'"+e+"'";case"Edm.DateTime":return"datetime'"+e+"'";case"Edm.Guid":return"guid'"+e+"'";case"Edm.Time":return"time'"+e+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+e+"'";default:return e}},renderPropertyFilterValue:function(e,t){if(e.charAt(0)=="'"){throw"Illegal property value starting with a quote"}switch(t){case"Edm.String":return"'"+e+"'";case"Edm.DateTime":return"datetime'"+e+"'";case"Edm.Guid":return"guid'"+e+"'";case"Edm.Time":return"time'"+e+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+e+"'";default:return e}},tokenizeNametoLabelText:function(e){var t="";t=e.replace(/([^A-Z0-9_]+)([A-Z0-9_])/g,"$1 $2");t=t.replace(/([A-Z0-9_]{2,})([A-Z0-9_])([^A-Z0-9_]+)/g,"$1 $2$3");t=t.replace(/(.*) _E$/,"$1");t=t.replace(/(.*) _(.*)/g,"$1 $2");return t}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByURI=function(e){return{sServiceURI:e}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel=function(e){return{oModel:e}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceWithWorkaround=function(e,t){return{oModelReference:e,aWorkaroundID:t}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.prototype={_init:function(t,i){this._oActivatedWorkarounds={};if(t&&t.aWorkaroundID){var n=t.aWorkaroundID;for(var r=0;r<n.length;r++){this._oActivatedWorkarounds[n[r]]=true}t=t.oModelReference}if(!t||!t.sServiceURI&&!t.oModel){throw"Usage with oModelReference being an instance of Model.ReferenceByURI or Model.ReferenceByModel"}if(t.oModel){this._oModel=t.oModel}else{this._oModel=new e(t.sServiceURI)}if(this._oModel.getServiceMetadata().dataServices==undefined){throw"Model could not be loaded"}this.mergeV2Annotations(i);this._oQueryResultSet={};this._oParameterizationSet={};this._oEntityTypeSet={};this._oEntitySetSet={};this._oEntityTypeNameToEntitySetMap={};var a=this._oModel.getServiceMetadata().dataServices.schema[0];var o;for(r=-1,o;o=a.entityContainer[++r];){if(o.isDefaultEntityContainer=="true"){this._oDefaultEntityContainer=o;break}}var s=a.entityType;var l=[],u=[],p=[];var y;for(r=-1,b;b=s[++r];){var h=false;if(b.extensions!=undefined){var c;for(y=-1;c=b.extensions[++y];){if(c.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE&&c.name=="semantics"){h=true;switch(c.value){case"aggregate":l.push(b);break;case"parameters":u.push(b);break;default:p.push(b)}}if(h){continue}}if(!h){p.push(b)}}else{p.push(b)}}for(r=-1,b;b=p[++r];){var m=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),a,b);this._oEntityTypeSet[m.getQName()]=m;var d=this._getEntitySetsOfType(a,m.getQName());if(d.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics"}if(d.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics"}var f=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),a,d[0][0],d[0][1]);this._oEntitySetSet[f.getQName()]=f;this._oEntityTypeNameToEntitySetMap[m.getQName()]=f}var _={};for(r=-1,b;b=u[++r];){m=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),a,b);this._oEntityTypeSet[m.getQName()]=m;d=this._getEntitySetsOfType(a,m.getQName());if(d.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics"}if(d.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics"}f=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),a,d[0][0],d[0][1]);this._oEntitySetSet[f.getQName()]=f;this._oEntityTypeNameToEntitySetMap[m.getQName()]=f;var g=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization(m,f);this._oParameterizationSet[g.getName()]=g;_[m.getQName()]=g;var v=m.getQName();if(a.association!=undefined){var P;for(y=-1;P=a.association[++y];){if(P.referentialConstraint==undefined){continue}var S=null;if(P.end[0].type==v&&P.end[0].multiplicity=="*"&&P.end[1].multiplicity=="1"){S=P.end[1].type}else if(P.end[1].type==v&&P.end[1].multiplicity=="*"&&P.end[0].multiplicity=="1"){S=P.end[0].type}if(!S){continue}if(P.referentialConstraint.dependent.propertyRef.length!=1){continue}var T=g.findParameterByName(P.referentialConstraint.dependent.propertyRef[0].name);if(T==null){continue}var E=this._oEntityTypeSet[S];var N=this._oEntityTypeNameToEntitySetMap[S];T.setValueSetEntity(E,N)}}}var b;for(r=-1,b;b=l[++r];){m=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),a,b);this._oEntityTypeSet[m.getQName()]=m;var R=m.getQName();g=null;var x=null;if(a.association!=undefined){for(y=-1,P;P=a.association[++y];){var A=null;if(P.end[0].type==R){A=P.end[1].type}else if(P.end[1].type==R){A=P.end[0].type}else{continue}var U=null;U=_[A];if(U!=null){if(g!=null){throw"RESTRICTION: Unable to handle multiple parameter entity types of query entity "+m.name}else{g=U;x=P}}}}d=this._getEntitySetsOfType(a,m.getQName());if(d.length!=1){throw"Invalid consumption model: There must be exactly one entity set for an entity type annotated with aggregating semantics"}f=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),a,d[0][0],d[0][1]);this._oEntitySetSet[f.getQName()]=f;this._oEntityTypeNameToEntitySetMap[m.getQName()]=f;var M=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult(this,m,f,g);this._oQueryResultSet[M.getName()]=M;if(g){g.setTargetQueryResult(M,x)}}},oUI5ODataModelAnnotatableObject:{objectName:"schema",keyPropName:"namespace",extensions:true,aSubObject:[{objectName:"entityType",keyPropName:"name",extensions:true,aSubObject:[{objectName:"property",keyPropName:"name",aSubObject:[],extensions:true}]},{objectName:"entityContainer",keyPropName:"name",extensions:false,aSubObject:[{objectName:"entitySet",keyPropName:"name",extensions:true,aSubObject:[]}]}]},mergeV2Annotations:function(e){try{var t=JSON.parse(e)}catch(e){return}var i;try{i=this._oModel.getServiceMetadata().dataServices}catch(e){return}for(var n in t){if(!(this.oUI5ODataModelAnnotatableObject.objectName===n)){continue}if(!(t[n]instanceof Array)){continue}this.mergeV2AnnotationLevel(i[this.oUI5ODataModelAnnotatableObject.objectName],t[this.oUI5ODataModelAnnotatableObject.objectName],this.oUI5ODataModelAnnotatableObject);break}return},mergeV2AnnotationLevel:function(e,t,i){for(var n=-1,r;r=t[++n];){for(var a=-1,o;o=e[++a];){if(!(r[i.keyPropName]==o[i.keyPropName])){continue}if(r.extensions!=undefined){if(o.extensions==undefined){o.extensions=[]}for(var s=-1,l;l=r.extensions[++s];){var u=false;for(var p=-1,y;y=o.extensions[++p];){if(l.name==y.name&&l.namespace==y.namespace){y.value=l.value;u=true;break}}if(!u){o.extensions.push(l)}}}for(var h=-1,c;c=i.aSubObject[++h];){for(var m in r){if(!(c.objectName==m)){continue}if(!(r[c.objectName]instanceof Array)){continue}if(o[c.objectName]==undefined||!(o[c.objectName]instanceof Array)){continue}this.mergeV2AnnotationLevel(o[c.objectName],r[c.objectName],c);break}}}}return},findQueryResultByName:function(e){var t=this._oQueryResultSet[e];if(!t&&this._oDefaultEntityContainer){var i=this._oDefaultEntityContainer.name+"."+e;t=this._oQueryResultSet[i]}return t},getAllQueryResultNames:function(){if(this._aQueryResultNames){return this._aQueryResultNames}this._aQueryResultNames=new Array(0);for(var e in this._oQueryResultSet){this._aQueryResultNames.push(this._oQueryResultSet[e].getName())}return this._aQueryResultNames},getAllQueryResults:function(){return this._oQueryResultSet},getODataModel:function(){return this._oModel},_getEntitySetsOfType:function(e,t){var i=[];for(var n=-1,r;r=e.entityContainer[++n];){for(var a=-1,o;o=r.entitySet[++a];){if(o.entityType==t){i.push([r,o])}}}return i},_oModel:null,_oDefaultEntityContainer:null,_aQueryResultNames:null,_oQueryResultSet:null,_oParameterizationSet:null,_oEntityTypeSet:null,_oEntitySetSet:null,_oEntityTypeNameToEntitySetMap:null,_oActivatedWorkarounds:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult=function(e,t,i,n){this._init(e,t,i,n)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult.prototype={_init:function(e,t,i,n,r){this._oModel=e;this._oEntityType=t;this._oEntitySet=i;this._oParameterization=n;this._oDimensionSet={};this._oMeasureSet={};var a=t.getTypeDescription().property;var o={};for(var s=-1,l;l=a[++s];){if(l.extensions==undefined){continue}for(var u=-1,p;p=l.extensions[++u];){if(!p.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(p.name){case"aggregation-role":switch(p.value){case"dimension":var y=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension(this,l);this._oDimensionSet[y.getName()]=y;break;case"measure":var h=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure(this,l);this._oMeasureSet[h.getName()]=h;break;case"totaled-properties-list":this._oTotaledPropertyListProperty=l;break}break;case"attribute-for":var c=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute(this,l);o[c.getKeyProperty()]=c;break}}}for(var m in o){c=o[m];c.getDimension().addAttribute(c)}if(e._oActivatedWorkarounds.IdentifyTextPropertiesByName){var d=[];for(var f in this._oDimensionSet){y=this._oDimensionSet[f];if(!y.getTextProperty()){var _=null;_=t.findPropertyByName(f+"Name");if(!_){_=t.findPropertyByName(f+"Text")}if(!_){_=t.findPropertyByName(f+"Desc")}if(!_){_=t.findPropertyByName(f+"Description")}if(_){y.setTextProperty(_);d.push(_.name)}}}var g;for(s=-1,g;g=d[++s];){delete this._oDimensionSet[g]}}},getName:function(){return this.getEntitySet().getQName()},getParameterization:function(){return this._oParameterization},getAllDimensionNames:function(){if(this._aDimensionNames){return this._aDimensionNames}this._aDimensionNames=[];for(var e in this._oDimensionSet){this._aDimensionNames.push(this._oDimensionSet[e].getName())}return this._aDimensionNames},getAllDimensions:function(){return this._oDimensionSet},getAllMeasureNames:function(){if(this._aMeasureNames){return this._aMeasureNames}this._aMeasureNames=[];for(var e in this._oMeasureSet){this._aMeasureNames.push(this._oMeasureSet[e].getName())}return this._aMeasureNames},getAllMeasures:function(){return this._oMeasureSet},findDimensionByName:function(e){return this._oDimensionSet[e]},getTotaledPropertiesListProperty:function(){return this._oTotaledPropertyListProperty},findMeasureByName:function(e){return this._oMeasureSet[e]},getModel:function(){return this._oModel},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oModel:null,_oEntityType:null,_oEntitySet:null,_oParameterization:null,_aDimensionNames:null,_oDimensionSet:null,_aMeasureNames:null,_oMeasureSet:null,_oTotaledPropertyListProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization.prototype={_init:function(e,t){this._oEntityType=e;this._oEntitySet=t;this._oParameterSet={};var i=e.getTypeDescription().property;for(var n=-1,r;r=i[++n];){if(r.extensions==undefined){continue}for(var a=-1,o;o=r.extensions[++a];){if(!o.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(o.name){case"parameter":var s=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter(this,r);this._oParameterSet[s.getName()]=s;break}}}},setTargetQueryResult:function(e,t){this._oQueryResult=e;var i=this._oEntityType.getSchema().namespace+"."+t.name;var n=this._oEntityType.getTypeDescription().navigationProperty;if(!n){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"}for(var r=-1,a;a=n[++r];){if(a.relationship==i){this._oNavPropToQueryResult=a.name}}if(!this._oNavPropToQueryResult){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"}},getName:function(){return this.getEntitySet().getQName()},getAllParameterNames:function(){if(this._aParameterNames){return this._aParameterNames}this._aParameterNames=[];for(var e in this._oParameterSet){this._aParameterNames.push(this._oParameterSet[e].getName())}return this._aParameterNames},getAllParameters:function(){return this._oParameterSet},findParameterByName:function(e){return this._oParameterSet[e]},getNavigationPropertyToQueryResult:function(){return this._oNavPropToQueryResult},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oEntityType:null,_oEntitySet:null,_oQueryResult:null,_oNavPropToQueryResult:null,_aParameterNames:null,_oParameterSet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter.prototype={_init:function(e,t){this._oParameterization=e;this._oProperty=t;var i=e.getEntityType();if(t.extensions!=undefined){for(var n=-1,r;r=t.extensions[++n];){if(!r.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(r.name){case"parameter":switch(r.value){case"mandatory":this._bRequired=true;break;case"optional":this._bRequired=false;break;default:throw"Invalid annotation value for parameter property"}break;case"label":this._sLabelText=r.value;break;case"text":this._oTextProperty=i.findPropertyByName(r.value);break;case"upper-boundary":this._bIntervalBoundaryParameter=true;this._oUpperIntervalBoundaryParameterProperty=i.findPropertyByName(r.value);break;case"lower-boundary":this._bIntervalBoundaryParameter=true;this._oLowerIntervalBoundaryParameterProperty=i.findPropertyByName(r.value);break}}}if(!this._sLabelText){this._sLabelText=""}},setValueSetEntity:function(e,t){this._oValueSetEntityType=e;this._oValueSetEntitySet=t},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},isOptional:function(){return!this._bRequired},isIntervalBoundary:function(){return this._bIntervalBoundaryParameter},isLowerIntervalBoundary:function(){return!!this._oUpperIntervalBoundaryParameterProperty},getPeerIntervalBoundaryParameter:function(){var e=null;if(this._oLowerIntervalBoundaryParameterProperty){e=this._oLowerIntervalBoundaryParameterProperty.name}else{e=this._oUpperIntervalBoundaryParameterProperty.name}if(!e){throw"Parameter is not an interval boundary"}return this._oParameterization.findParameterByName(e)},isValueSetAvailable:function(){return!!this._oValueSetEntityType},getName:function(){return this._oProperty.name},getProperty:function(){return this._oProperty},getContainingParameterization:function(){return this._oParameterization},getURIToValueEntitySet:function(e){var t=null;t=(e||"")+"/"+this._oValueSetEntitySet.getQName();return t},_oParameterization:null,_oProperty:null,_sLabelText:null,_oTextProperty:null,_bRequired:false,_bIntervalBoundaryParameter:false,_oLowerIntervalBoundaryParameterProperty:null,_oUpperIntervalBoundaryParameterProperty:null,_oValueSetEntityType:null,_oValueSetEntitySet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;this._oAttributeSet={};if(t.extensions!=undefined){for(var i=-1,n;n=t.extensions[++i];){if(!n.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(n.name){case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(n.value);break;case"super-ordinate":this._sSuperOrdinatePropertyName=n.value;break}}}if(!this._sLabelText){this._sLabelText=""}},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){return this._oTextProperty},setTextProperty:function(e){this._oTextProperty=e},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},getSuperOrdinateDimension:function(){if(!this._sSuperOrdinatePropertyName){return null}return this._oQueryResult.findDimensionByName(this._sSuperOrdinatePropertyName)},getHierarchy:function(){if(!this._oHierarchy){this._oHierarchy=this._oQueryResult.getEntityType().getHierarchy(this._oProperty.name)}return this._oHierarchy},getAllAttributeNames:function(){if(this._aAttributeNames){return this._aAttributeNames}this._aAttributeNames=[];for(var e in this._oAttributeSet){this._aAttributeNames.push(this._oAttributeSet[e].getName())}return this._aAttributeNames},getAllAttributes:function(){return this._oAttributeSet},findAttributeByName:function(e){return this._oAttributeSet[e]},addAttribute:function(e){this._oAttributeSet[e.getName()]=e},getContainingQueryResult:function(){return this._oQueryResult},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sSuperOrdinatePropertyName:null,_aAttributeNames:null,_oAttributeSet:null,_oHierarchy:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;if(t.extensions!=undefined){for(var i=-1,n;n=t.extensions[++i];){if(!n.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(n.name){case"attribute-for":this._sDimensionName=n.value;break;case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(n.value);break}}}},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){return this._sLabelText},getDimension:function(){return this._oQueryResult.findDimensionByName(this._sDimensionName)},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sDimensionName:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;if(t.extensions!=undefined){for(var i=-1,n;n=t.extensions[++i];){if(!n.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(n.name){case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(n.value);break;case"unit":this._oUnitProperty=e.getEntityType().findPropertyByName(n.value);break}}}if(!this._sLabelText){this._sLabelText=""}},getName:function(){return this._oProperty.name},getRawValueProperty:function(){return this._oProperty},getFormattedValueProperty:function(){return this._oTextProperty},getUnitProperty:function(){return this._oUnitProperty},getLabelText:function(){return this._sLabelText},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_oUnitProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet=function(e,t,i,n){this._init(e,t,i,n)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet.prototype={_init:function(e,t,i,n){this._oEntitySet=n;this._oContainer=i;this._oSchema=t;this._oModel=e;if(t.entityContainer.length>1){this._sQName=i.name+"."+n.name}else{this._sQName=n.name}},getQName:function(){return this._sQName},getSetDescription:function(){return this._oEntitySet},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntitySet:null,_oContainer:null,_oSchema:null,_oModel:null,_sQName:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType=function(e,t,i){this._init(e,t,i)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType.prototype={_init:function(e,t,i){this._oEntityType=i;this._oSchema=t;this._oModel=e;this._oPropertySet={};this._aFilterablePropertyNames=[];this._aSortablePropertyNames=[];this._aRequiredFilterPropertyNames=[];this._sQName=t.namespace+"."+i.name;var n={};var r=null;for(var a=-1,o;o=i.property[++a];){this._aFilterablePropertyNames.push(o.name);this._aSortablePropertyNames.push(o.name);if(o.extensions==undefined){continue}for(var s=-1,l;l=o.extensions[++s];){if(!l.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(l.name){case"filterable":if(l.value=="false"){this._aFilterablePropertyNames.pop(o.name)}break;case"sortable":if(l.value=="false"){this._aSortablePropertyNames.pop(o.name)}break;case"required-filter":if(l.value=="true"){this._aRequiredFilterPropertyNames.push(o.name)}break;case"hierarchy-node-for":if(!(r=n[o.name])){r=n[o.name]={}}r.dimensionName=l.value;break;case"hierarchy-parent-node-for":case"hierarchy-parent-nod":if(!(r=n[l.value])){r=n[l.value]={}}r.parentNodeIDProperty=o;break;case"hierarchy-level-for":if(!(r=n[l.value])){r=n[l.value]={}}r.levelProperty=o;break;case"hierarchy-drill-state-for":case"hierarchy-drill-stat":if(!(r=n[l.value])){r=n[l.value]={}}r.drillStateProperty=o;break}}this._oPropertySet[o.name]=o}this._oRecursiveHierarchySet={};for(var u in n){var p=n[u];var y=this._oPropertySet[u];var h=this._oPropertySet[p.dimensionName];if(h==null){h=y}this._oRecursiveHierarchySet[h.name]=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy(i,y,p.parentNodeIDProperty,p.levelProperty,h)}},findPropertyByName:function(e){return this._oPropertySet[e]},getFilterablePropertyNames:function(){return this._aFilterablePropertyNames},getSortablePropertyNames:function(){return this._aSortablePropertyNames},getRequiredFilterPropertyNames:function(){return this._aRequiredFilterPropertyNames},getAllHierarchyPropertyNames:function(){if(this._aHierarchyPropertyNames){return this._aHierarchyPropertyNames}this._aHierarchyPropertyNames=[];for(var e in this._oRecursiveHierarchySet){this._aHierarchyPropertyNames.push(this._oRecursiveHierarchySet[e].getNodeValueProperty().name)}return this._aHierarchyPropertyNames},getHierarchy:function(e){if(this._oRecursiveHierarchySet[e]==undefined){return null}return this._oRecursiveHierarchySet[e]},getQName:function(){return this._sQName},getTypeDescription:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_sQName:null,_oPropertySet:null,_aFilterablePropertyNames:null,_aRequiredFilterPropertyNames:null,_aHierarchyPropertyNames:null,_oRecursiveHierarchySet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy=function(e,t,i,n,r){this._init(e,t,i,n,r)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy.prototype={_init:function(e,t,i,n,r){this._oEntityType=e;this._oNodeIDProperty=t;this._oParentNodeIDProperty=i;this._oNodeLevelProperty=n;this._oNodeValueProperty=r},isRecursiveHierarchy:function(){return true},isLeveledHierarchy:function(){return false},getNodeIDProperty:function(){return this._oNodeIDProperty},getParentNodeIDProperty:function(){return this._oParentNodeIDProperty},getNodeLevelProperty:function(){return this._oNodeLevelProperty},getNodeValueProperty:function(){return this._oNodeValueProperty},_oNodeIDProperty:null,_oParentNodeIDProperty:null,_oNodeLevelProperty:null,_oNodeValueProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression=function(e,t,i){this._init(e,t,i)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression.prototype={_init:function(e,t,i){this._oEntityType=i;this._oSchema=t;this._oModel=e;this._aFilterCondition=[]},clear:function(){this._aFilterCondition=[]},addCondition:function(e,t,i,n){var r=this._oEntityType.findPropertyByName(e);if(r==null){throw"Cannot add filter condition for unknown property name "+e}var a=this._oEntityType.getFilterablePropertyNames();if(a.indexOf(e)===-1){throw"Cannot add filter condition for not filterable property name "+e}this._aFilterCondition.push({property:r,op:t,val1:i,val2:n});return this._aFilterablePropertyNames},addSetCondition:function(e,i){var n=this._oEntityType.findPropertyByName(e);if(n==null){throw"Cannot add filter condition for unknown property name "+e}var r=this._oEntityType.getFilterablePropertyNames();if(r.indexOf(e)===-1){throw"Cannot add filter condition for not filterable property name "+e}for(var a=-1,o;o=i[++a];){this._aFilterCondition.push({property:n,op:t.EQ,val1:o})}return this._aFilterablePropertyNames},getExpressionAsUI5FilterArray:function(){var e=[];for(var t=-1,n;n=this._aFilterCondition[++t];){e.push(new i(n.property.name,n.op,n.val1,n.val2))}return e},getURIFilterOptionValue:function(){if(this._aFilterCondition.length==0){return""}this._aFilterCondition.sort(function(e,t){if(e.property.name==t.property.name){return 0}if(e.property.name>t.property.name){return 1}return-1});var e=this._aFilterCondition[0].property.name;var i="";var n="";for(var r=-1,a;a=this._aFilterCondition[++r];){if(e!=a.property.name){i+=(i==""?"":" and ")+"("+n+")";n="";e=a.property.name}switch(a.op){case t.BT:n+=(n==""?"":" or ")+"("+a.property.name+" "+t.GE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(a.val1,a.property.type)+" and "+a.property.name+" "+t.LE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(a.val2,a.property.type)+")";break;default:n+=(n==""?"":" or ")+"("+a.property.name+" "+a.op.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(a.val1,a.property.type)+")"}}i+=(i==""?"":" and ")+"("+n+")";return i},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aFilterCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder={Ascending:"asc",Descending:"desc"};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression=function(e,t,i){this._init(e,t,i)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression.prototype={_init:function(e,t,i){this._oEntityType=i;this._oSchema=t;this._oModel=e;this._aSortCondition=[]},_containsSorter:function(e){var t=null;for(var i=-1,n;n=this._aSortCondition[++i];){if(n.property.name===e){t={sorter:n,index:i};break}}return t},_removeFromArray:function(e,t,i){var n=e.slice((i||t)+1||e.length);e.length=t<0?e.length+t:t;return e.push.apply(e,n)},clear:function(){this._aSortCondition=[]},addSorter:function(e,t){var i=this._oEntityType.findPropertyByName(e);if(i==null){throw"Cannot add sort condition for unknown property name "+e}if(this._containsSorter(e)!=null){throw"Sort condition for this property name is already defined "+e}var n=this._oEntityType.getSortablePropertyNames();if(n.indexOf(e)===-1){throw"Cannot add sort condition for not sortable property name "+e}this._aSortCondition.push({property:i,order:t});return this},removeSorter:function(e){if(!e){return}var t=this._containsSorter(e);if(t){this._removeFromArray(this._aSortCondition,t.index)}},getExpressionsAsUI5SorterArray:function(){var e=[];for(var t=-1,i;i=this._aSortCondition[++t];){e.push(new n(i.property.name,i.order==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder.Descending))}return e},getExpressionAsUI5Sorter:function(){var e=this.getExpressionsAsUI5SorterArray();if(e.length==0){return null}return e[0]},getURIOrderByOptionValue:function(){if(this._aSortCondition.length==0){return""}var e="";for(var t=-1,i;i=this._aSortCondition[++t];){e+=i.property.name+" "+i.order;if(t<this._aSortCondition.length-1){e+=", "}}return e},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aSortCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest=function(e){this._init(e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest.prototype={_init:function(e){if(!e){throw"No parameterization given"}this._oParameterization=e;this._oParameterValueAssignment=[]},getParameterization:function(){return this._oParameterization},setParameterValue:function(e,t,i){var n=this._oParameterization.findParameterByName(e);if(!n){throw"Invalid parameter name "+e}if(i!=null){if(!n.isIntervalBoundary()){throw"Range value cannot be applied to parameter "+e+" accepting only single values"}if(!n.isLowerIntervalBoundary()){throw"Range value given, but parameter "+e+" does not hold the lower boundary"}}if(!n.isIntervalBoundary()){if(t==null){delete this._oParameterValueAssignment[e]}else{this._oParameterValueAssignment[e]=t}}else{if(t==null&&i!=null){throw"Parameter "+e+": An upper boundary cannot be given without the lower boundary"}if(t==null){delete this._oParameterValueAssignment[e];i=null}else{this._oParameterValueAssignment[e]=t}var r=n.getPeerIntervalBoundaryParameter();if(i==null){i=t}if(t==null){delete this._oParameterValueAssignment[r.getName()]}else{this._oParameterValueAssignment[r.getName()]=i}}return},getURIToParameterizationEntitySet:function(e){return(e||"")+"/"+this._oParameterization.getEntitySet().getQName()},getURIToParameterizationEntry:function(e){var t=this._oParameterization.getAllParameters();for(var i in t){if(this._oParameterValueAssignment[i]==undefined){throw"Parameter "+i+" has no value assigned"}}var n="",r=true;for(var a in this._oParameterValueAssignment){n+=(r?"":",")+a+"="+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyKeyValue(this._oParameterValueAssignment[a],t[a].getProperty().type);r=false}return(e||"")+"/"+this._oParameterization.getEntitySet().getQName()+"("+n+")"},_oParameterization:null,_oParameterValueAssignment:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest=function(e){this._init(e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest.prototype={_init:function(e,t){this._oQueryResult=e;this._oParameterizationRequest=t;this._oAggregationLevel={};this._oMeasures={};this._bIncludeEntityKey=false;this._oFilterExpression=null},setParameterizationRequest:function(e){this._oParameterizationRequest=e},getQueryResult:function(){return this._oQueryResult},setAggregationLevel:function(e){this._oAggregationLevel={};if(!e){e=this._oQueryResult.getAllDimensionNames()}this.addToAggregationLevel(e)},addToAggregationLevel:function(e){if(!e){return}for(var t=-1,i;i=e[++t];){if(!this._oQueryResult.findDimensionByName(i)){throw i+" is not a valid dimension name"}this._oAggregationLevel[i]={key:true,text:false,attributes:null}}},removeFromAggregationLevel:function(e){if(!e){return}for(var t=-1,i;i=e[++t];){if(!this._oQueryResult.findDimensionByName(i)){throw i+" is not a valid dimension name"}if(this._oAggregationLevel[i]!=undefined){delete this._oAggregationLevel[i];this.getSortExpression().removeSorter(i)}}},getAggregationLevel:function(){var e=[];for(var t in this._oAggregationLevel){e.push(t)}return e},getAggregationLevelDetails:function(e){if(this._oAggregationLevel[e]==undefined){throw"Aggregation level does not include dimension "+e}return this._oAggregationLevel[e]},setMeasures:function(e){if(!e){e=this._oQueryResult.getAllMeasureNames()}this._oMeasures={};for(var t=-1,i;i=e[++t];){if(!this._oQueryResult.findMeasureByName(i)){throw i+" is not a valid measure name"}this._oMeasures[i]={value:true,text:false,unit:false}}},getMeasureNames:function(){var e=[];for(var t in this._oMeasures){e.push(t)}return e},includeDimensionKeyTextAttributes:function(e,t,i,n){var r=[];if(e){if(this._oAggregationLevel[e]==undefined){throw e+" is not included in the aggregation level"}r.push(e)}else{for(var a in this._oAggregationLevel){r.push(a)}n=null}for(var o=-1,s;s=r[++o];){if(t!=null){this._oAggregationLevel[s].key=t}if(i!=null){this._oAggregationLevel[s].text=i}if(n!=null){this._oAggregationLevel[s].attributes=n}}},includeMeasureRawFormattedValueUnit:function(e,t,i,n){var r=[];if(e){if(this._oMeasures[e]==undefined){throw e+" is not part of the query result"}r.push(e)}else{for(var a in this._oMeasures){r.push(a)}}for(var o=-1,s;s=r[++o];){if(t!=null){this._oMeasures[s].value=t}if(i!=null){this._oMeasures[s].text=i}if(n!=null){this._oMeasures[s].unit=n}}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oQueryResult.getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},setRequestOptions:function(e,t){if(e){this._bIncludeEntityKey=e}if(t){this._bIncludeCount=t}},setResultPageBoundaries:function(e,t){if(e!=null&&typeof e!=="number"){throw"Start value must be null or numeric"}if(t!==null&&typeof t!=="number"){throw"End value must be null or numeric"}if(e==null){e=1}if(e<1||e>(t==null?e:t)){throw"Invalid values for requested page boundaries"}this._iSkipRequestOption=e>1?e:null;this._iTopRequestOption=t!=null?t-e+1:null},getResultPageBoundaries:function(){var e,t;if(this._iSkipRequestOption==null){e=1;t=1}else{e=this._iSkipRequestOption;t=this._iSkipRequestOption+this._iTopRequestOption}return{start:e,end:this._iTopRequestOption!=null?t:null}},getURIToQueryResultEntitySet:function(e){var t=null;if(this._oQueryResult.getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request"}else{t=this._oParameterizationRequest.getURIToParameterizationEntry(e)+"/"+this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult()}}else{t=(e||"")+"/"+this._oQueryResult.getEntitySet().getQName()}return t},getURIQueryOptionValue:function(e){var t=null;switch(e){case"$select":{var i="",n;for(var r in this._oAggregationLevel){var a=this._oQueryResult.findDimensionByName(r);var o=this._oAggregationLevel[r];if(o.key==true){i+=(i==""?"":",")+a.getKeyProperty().name}if(o.text==true&&a.getTextProperty()){i+=(i==""?"":",")+a.getTextProperty().name}if(o.attributes){var s;for(n=-1;s=o.attributes[++n];){i+=(i==""?"":",")+a.findAttributeByName(s).getName()}}}for(var l in this._oMeasures){var u=this._oQueryResult.findMeasureByName(l);var p=this._oMeasures[l];if(p.value==true){i+=(i==""?"":",")+u.getRawValueProperty().name}if(p.text==true&&u.getFormattedValueProperty()){i+=(i==""?"":",")+u.getFormattedValueProperty().name}if(p.unit==true&&u.getUnitProperty()){i+=(i==""?"":",")+u.getUnitProperty().name}}if(this._bIncludeEntityKey){var y=this._oQueryResult.getEntityType().getTypeDescription().key.propertyRef,h;for(n=-1;h=y[++n];){i+=(i==""?"":",")+h.name}}t=i||null;break}case"$filter":{var c=null;if(this._oFilterExpression){c=this._oFilterExpression.getURIFilterOptionValue()}t=c||null;break}case"$orderby":{var m=null;if(this._oSortExpression){m=this._oSortExpression.getURIOrderByOptionValue()}t=m||null;break}case"$top":{if(this._iTopRequestOption!==null){t=this._iTopRequestOption}break}case"$skip":{t=this._iSkipRequestOption;break}default:break}return t},getURIToQueryResultEntries:function(e){var t=this.getURIToQueryResultEntitySet(e);var i=this.getURIQueryOptionValue("$select");var n=this.getURIQueryOptionValue("$filter");var r=this.getURIQueryOptionValue("$orderby");var a=this.getURIQueryOptionValue("$top");var o=this.getURIQueryOptionValue("$skip");var s=t;var l=false;if(i){s+="?$select="+i;l=true}if(this._oFilterExpression&&n){if(!l){s+="?";l=true}else{s+="&"}s+="$filter="+n}if(this._oSortExpression&&r){if(!l){s+="?";l=true}else{s+="&"}s+="$orderby="+r}if(this._iTopRequestOption&&a){if(!l){s+="?";l=true}else{s+="&"}s+="$top="+a}if(this._iSkipRequestOption&&o){if(!l){s+="?";l=true}else{s+="&"}s+="$skip="+o}if(this._bIncludeCount){if(!l){s+="?";l=true}else{s+="&"}s+="$inlinecount=allpages"}return s},_oQueryResult:null,_oParameterizationRequest:null,_oAggregationLevel:null,_oMeasures:null,_bIncludeEntityKey:null,_bIncludeCount:null,_oFilterExpression:null,_oSortExpression:null,_iSkipRequestOption:0,_iTopRequestOption:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest=function(e){this._init(e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest.prototype={_init:function(e){this._oParameter=e;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null},includeParameterText:function(e){if(e!=null){this._oValueSetResult.text=e}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},getURIQueryOptionValue:function(e){var t=null;switch(e){case"$select":{var i="";i+=(i==""?"":",")+this._oParameter.getProperty().name;if(this._oValueSetResult.text==true&&this._oParameter.getTextProperty()){i+=(i==""?"":",")+this._oParameter.getTextProperty().name}t=i||null;break}case"$filter":{var n=null;if(this._oFilterExpression){n=this._oFilterExpression.getURIFilterOptionValue()}t=n||null;break}case"$orderby":{var r=null;if(this._oSortExpression){r=this._oSortExpression.getURIOrderByOptionValue()}t=r||null;break}default:break}return t},getURIToParameterValueSetEntries:function(e){var t=null;t=(e||"")+"/"+this._oParameter.getContainingParameterization().getEntitySet().getQName();var i=this.getURIQueryOptionValue("$select");var n=this.getURIQueryOptionValue("$filter");var r=this.getURIQueryOptionValue("$orderby");var a=t;var o=false;if(i){a+="?$select="+i;o=true}if(this._oFilterExpression&&n){if(!o){a+="?";o=true}else{a+="&"}a+="$filter="+n}if(this._oSortExpression&&r){if(!o){a+="?";o=true}else{a+="&"}a+="$orderby="+r}return a},_oParameter:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest.prototype={_init:function(e,t){this._oDimension=e;this._oParameterizationRequest=t;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null},setParameterizationRequest:function(e){this._oParameterizationRequest=e},includeDimensionTextAttributes:function(e,t){if(e!=null){this._oValueSetResult.text=e}if(t!=null){this._oValueSetResult.attributes=t}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oDimension.getContainingQueryResult().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},hasMasterDataAvailable:function(){return false},getURIQueryOptionValue:function(e){var t=null;switch(e){case"$select":{var i="";i+=(i==""?"":",")+this._oDimension.getKeyProperty().name;if(this._oValueSetResult.text==true&&this._oDimension.getTextProperty()){i+=(i==""?"":",")+this._oDimension.getTextProperty().name}if(this._oValueSetResult.attributes){for(var n=-1,r;r=this._oValueSetResult.attributes[++n];){i+=(i==""?"":",")+this._oDimension.findAttributeByName(r).getName()}}t=i||null;break}case"$filter":{var a=null;if(this._oFilterExpression){a=this._oFilterExpression.getURIFilterOptionValue()}t=a||null;break}case"$orderby":{var o=null;if(this._oSortExpression){o=this._oSortExpression.getURIOrderByOptionValue()}t=o||null;break}default:break}return t},getURIToDimensionMemberEntries:function(e){var t=null;if(this._oDimension.getContainingQueryResult().getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request"}else{t=this._oParameterizationRequest.getURIToParameterizationEntry(e)+"/"+this._oDimension.getContainingQueryResult().getParameterization().getNavigationPropertyToQueryResult()}}else{t=(e||"")+"/"+this._oDimension.getContainingQueryResult().getEntitySet().getQName()}var i=this.getURIQueryOptionValue("$select");var n=this.getURIQueryOptionValue("$filter");var r=this.getURIQueryOptionValue("$orderby");var a=t;var o=false;if(i){a+="?$select="+i;o=true}if(this._oFilterExpression&&n){if(!o){a+="?";o=true}else{a+="&"}a+="$filter="+n}if(this._oSortExpression&&r){if(!o){a+="?";o=true}else{a+="&"}a+="$orderby="+r}return a},_oDimension:null,_oParameterizationRequest:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};return{}},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil", ["sap/ui/model/FilterOperator","sap/ui/model/analytics/odata4analytics","sap/ui/core/format/NumberFormat","sap/ui/model/odata/ODataModel","sap/base/Log","sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ushell/utils/UrlParsing"],function(e,t,i,r,a,jQuery,n,s){"use strict";var l=t.ParameterizationRequest;var o=t.QueryResultRequest;var u=t.Model.ReferenceByModel;var c=t.Model;sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.util=sap.ushell.components.tiles.indicatorTileUtils.util||{};sap.ushell.components.tiles.indicatorTileUtils.util=function(t,s){var f={},g={ANN:"years",WEE:"weeks",DAY:"days",HUR:"hours",MIN:"minutes"},T={},h={};return{getScheduledJob:function(e){return T[e]},setScheduledJob:function(e,t){T[e]=t},isCallInProgress:function(e){return h[e]},setUnsetCallInProgress:function(e,t){h[e]=t},getTimeUnitMap:function(){return g},getHanaUser:function(){return authObject.userName},addSystemToServiceUrl:function(e,t){a.info("Hana Adapter --\x3e Add System to Service Url");if(sap.ushell&&sap.ushell.Container){if(t){sap.ushell.Container.getServiceAsync("URLParsing").then(function(i){sap.ui.model.odata.ODataUtils.setOrigin(e,{alias:t})})}else{sap.ushell.Container.getServiceAsync("URLParsing").then(function(t){sap.ui.model.odata.ODataUtils.setOrigin(e)})}}return e},getODataModelByServiceUri:function(e){e=this.addSystemToServiceUrl(e);if(!f[e]){var t=new r(e,{loadMetadataAsync:true,json:true});f[e]=t}return f[e]},getEdmType:function(e,t){var i=null;if(e instanceof r){i=e}else{i=this.getODataModelByServiceUri(e)}if(i&&i.getServiceMetadata()){var a=i.getServiceMetadata();var n=a.dataServices.schema[0].entityType;if(n){for(var s=0;s<n.length;s++){var l=n[s];var o=l.property;for(var u=0;u<o.length;u++){var c=o[u];if(c.name==t){return c.type}}}}}return null},getMillisecond:function(e,t){var i;switch(t){case"seconds":i=e*1e3;break;case"minutes":i=e*60*1e3;break;case"hours":i=e*60*60*1e3;break;case"days":i=e*24*60*60*1e3;break;case"weeks":i=e*7*24*60*60*1e3;break;case"months":i=e*4*7*24*60*60*1e3;break;case"years":i=e*12*4*7*24*60*60*1e3;break}return i},getUTCDate:function(){var e=new Date;return e},isCacheValid:function(e,t,i,r,a){var n=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e);if(!n){return false}else if(!(i&&Number(i))){return true}var s=this.getMillisecond(i,g[r]),l;if(jQuery.type(n.CachedTime)=="date"){l=n.CachedTime&&n.CachedTime.getTime()}else{l=n.CachedTime&&parseInt(n.CachedTime.substr(6),10)}var o=this.getUTCDate();return l>=t&&s>=o-l&&!a},getMantissaLength:function(e){var t=e.toString();var i=0;if(e<0){i=1}if(t.indexOf(".")===-1){return e<0?t.length-1:t.length}return t.substring(i,t.indexOf(".")).length},getLocaleFormattedValue:function(e,t,r,a,n){sap.ui.require("sap.ui.core.format.NumberFormat");a=a||false;n=n||null;if(a){return i.getCurrencyInstance({style:"short",showMeasure:false}).format(e,n)}var s=2;var l={style:"short"};var o;if(!(r==-1||r==null)){l.shortDecimals=Number(r);l.minFractionDigits=Number(r);l.maxFractionDigits=Number(r)}var u=i.getInstance(l);if(t==-2){if(e>9999){o="????"}else if(e>-.001&&e<0||e<.001&&e>0){o="0"}else{if(e.toString().indexOf(".")!=-1){o=Number(e).toFixed(4-e.toString().indexOf("."))}else{o=Number(e)}o=u.format(o)}}else if(r==-1||r==null){var c=this.getMantissaLength(e);if(!(c%3)){s=1}if(c%3===1){s=3}if(c%3===2){s=2}if(Math.abs(e)%Math.pow(10,c-1)==0){s=0}else if(Math.abs(e)%Math.pow(10,c-1)<6*Math.pow(10,c-4)){s=0}u=i.getInstance({style:"short",shortDecimals:s});o=u.format(e)}else{o=u.format(e)}return o},getPlatform:function(e){return(new n(window.location.href).get("sb_metadata")||e||"HANA").toUpperCase()},getTileTitleSubtitle:function(e){var t={};if(e.bag&&e.bag.getBagIds()&&e.bag.getBagIds().length){t.title=e.bag.getBag("sb_tileProperties").getText("title")||e.bag.getBag("sb_tileProperties").getProperty("title")||e.preview.getTitle();t.subTitle=e.bag.getBag("sb_tileProperties").getText("description")||e.bag.getBag("sb_tileProperties").getProperty("description")||e.preview.getDescription()}else{t.title=e.preview.getTitle();t.subTitle=e.preview.getDescription()}return t},scheduleFetchDataJob:function(e){var t;if(this.getView().getViewName().indexOf("DualTile")!==-1){t=this.oKpiTileView.oConfig}else{t=this.oConfig}var i=t.TILE_PROPERTIES.id+"data";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(i);if(r){clearTimeout(r);r=undefined}var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeUnitMap(),n=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t),s=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t),l=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(n,a[s]),o;if(jQuery.type(this.cacheTime)=="date"){o=this.cacheTime}else{o=new Date(parseInt(this.cacheTime.substr(6),10))}var u=l-(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-o);if(u<=0){u=0}else if(u>2147483646){u=2147483646}if(!e){u=3e5}if(this.getView().getViewName().indexOf("DualTile")!==-1){r=setTimeout(this.refreshPress.bind(this),u)}else{r=setTimeout(this.refreshHandler.bind(this,false,true),u);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(i,r)}this.updateDatajobScheduled=true},scheduleTimeStampJob:function(){var e=this.oConfig.TILE_PROPERTIES.id+"time",t=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(e),i;if(t){clearTimeout(t);t=undefined}if(jQuery.type(this.cacheTime)=="date"){i=this.cacheTime}else{i=new Date(parseInt(this.cacheTime.substr(6),10),13)}var r=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-i);t=setTimeout(this.setTimeStamp.bind(this,this.cacheTime),r.timer);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(e,t);this.updateTimeStampjobScheduled=true},getBoolValue:function(e){var t=false;if(typeof e==="boolean"&&e){t=true}return t},getSeconds:function(e){return e/1e3},getMinutes:function(e){return this.getSeconds(e)/60},getHours:function(e){return this.getMinutes(e)/60},getDays:function(e){return this.getHours(e)/24},getWeeks:function(e){return this.getDays(e)/7},getMonths:function(e){return this.getWeeks(e)/4},getYears:function(e){return this.getMonths(e)/12},getTimeDifference:function(e){var t={};if(e){var i=this.getMinutes(e);var r=this.getHours(e);var a=this.getDays(e);if(i<5){t.time=0;t.unit="minutes";t.timer=Math.round(this.getMillisecond(5-i,"minutes"))}else if(i>=5&&i<60){if(i<10){t.time=5}else{t.time=i-i%10}t.unit="minutes";t.timer=Math.round(this.getMillisecond(10-i%10,"minutes"))}else if(r>=1&&r<24){t.unit="hours";t.time=r-r%1;t.timer=Math.round(this.getMillisecond(1-r%1,"hours"))}else if(a>=1&&a<2){t.unit="days";t.time=a-a%1;t.timer=Math.round(this.getMillisecond(1-a%1,"days"))}else{t.unit="days";t.time=a-a%1;t.timer=this.getMillisecond(2,"days")}}else{t.timer=6e3;t.unit="days";t.timer=2e3}return t},getCachingTime:function(e){return e.CACHINGTIME&&Number(e.CACHINGTIME)||e.TILE_PROPERTIES.cachingTime&&Number(e.TILE_PROPERTIES.cachingTime)},getCachingTimeUnit:function(e){return e.CACHINGUNIT||e.TILE_PROPERTIES.cachingTimeUnit},getFrontendCacheQuery:function(e,t,i,r){var n;try{var s=r.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV");s=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(s);n=this.getODataModelByServiceUri(s);s="/CacheParameters(P_CacheType=1)/Results";return{oModel:n,uri:s}}catch(e){a.error("FrontEnd cache Metadata failed");return null}},isDualTile:function(e){var t=e&&e.TILE_PROPERTIES&&e.TILE_PROPERTIES.tileType;if(t.indexOf("DT-")==-1){return false}return true},writeFrontendCacheByChipAndUserId:function(e,t,i,r,n){var s=function(e){a.info("cache write successFully");n(e)};var l=function(){a.error("cache update failed");n(null)};try{var o=e.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV/");o=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(o);var u=this.getODataModelByServiceUri(o);var c="/CacheData";u.create(c,i,{async:true,success:s,error:l})}catch(e){a.error(e)}},getKpiChipsOnPage:function(e,t){var i=[];sap.ushell.Container.getServiceAsync("LaunchPage").then(function(r){r.getGroups().done(function(r){if(r&&r instanceof Array&&r.length){a.info("Group Chip fetch")}t(e,i)})})},getFrontendCache:function(e,t){var i=this;var r=sap.ushell.components.tiles.indicatorTileUtils.cache.getFrontEndCacheDeferredObject(t.url.getApplicationSystem());var n;if(r){n=r}else{n=jQuery.Deferred()}var s=e&&e.TILE_PROPERTIES&&e.TILE_PROPERTIES.id;var l=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s);if(l){r.resolve(true)}else if(r){return r.promise()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setFrontEndCacheDefferedObject(t.url.getApplicationSystem(),n);r=n;this.getKpiChipsOnPage(s,function(e,n){if(n){var s=i.getFrontendCacheQuery(n,sap.ushell.Container.getUser().getId(),n,t);if(s){var l=s.oModel;var o=s.uri;var u=false;l.read(o,null,null,true,function(t){if(t&&t.results&&t.results instanceof Array&&t.results.length){jQuery.each(t.results,function(e,t){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.ChipId,t)})}if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e)){u=true}r.resolve(u)},function(e){if(e&&e.response){a.error(e.message+" : "+e.request.requestUri)}r.reject()})}else{r.reject()}}else{r.resolve(false)}})}return r.promise()},getModelerRuntimeServiceModel:function(){var e="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";e=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(e);return this.getODataModelByServiceUri(e)},getSapFontErrorCode:function(){return String.fromCharCode(57521)},getSapFontBusyCode:function(){return String.fromCharCode(57842)},prepareFilterStructure:function(e,t){var i=[];if(t){e=e.concat(t)}for(var r=0;r<e.length;r++){var a={};a.comparator=e[r].OPERATOR;a.filterPropertyName=e[r].NAME;if(e[r].ID){a.id=e[r].ID}a.type=e[r].TYPE;a.value=e[r].VALUE_1;a.valueTo=e[r].VALUE_2;i.push(a)}return i},getODataModelByServiceUriFromChipAPI:function(e,t){e=t.url.addSystemToServiceUrl(e);if(!f[e]){var i=new r(e,true);f[e]=i}return f[e]},cacheBustingMechanism:function(e){if(window["sap-ushell-config"].cacheBusting.cacheBusterToken){var t=window["sap-ushell-config"].cacheBusting&&window["sap-ushell-config"].cacheBusting.cacheBusterToken;e=e+"?_="+t}return e},getRunTimeUri:function(e){var t="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";var i="/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV";if(e.toUpperCase()=="HANA"){if(window["sap-ushell-config"].cacheBusting){t=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(t)}return t}if(window["sap-ushell-config"].cacheBusting){i=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(i)}return i},getFilterFromRunTimeService:function(e,t,i,r){var a=e.TILE_PROPERTIES.sb_metadata;var n=this.getODataModelByServiceUriFromChipAPI(this.getRunTimeUri(a),t);var s="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",e.EVALUATION.ID);var l=n.read("/EVALUATION_FILTERS",null,{$filter:s},true,function(e){var t=[];if(e.results.length){t=e.results}i.call(this,t)},r);return l},_getOData4AnalyticsObject:function(e){var t=null;if(e instanceof r){t=e}else if(typeof e==="string"){t=this.getODataModelByServiceUri(e)}else{throw new Error("Invalid Input to Create ODataModel Object : "+e)}var i=new c(u(t));return i},findTextPropertyForDimension:function(e,t,i){try{var r=this._getOData4AnalyticsObject(e);var n=r.findQueryResultByName(t);var s=n.findDimensionByName(i);if(s.getTextProperty()){return s.getTextProperty().name}return i}catch(e){a.error("Error Fetching Text Property for "+i+" : "+e.toString())}},getEvalValueMeasureName:function(e,t,i){var r=e.EVALUATION_VALUES;for(var a=0;a<r.length;a++){if(r[a].TYPE==t){if(i==="FIXED"){return r[a].FIXED}return r[a].COLUMN_NAME}}},getSemanticColorName:function(e){var t="";if(e=="Error"){t="sb.error"}if(e=="Neutral"){t="sb.neutral"}if(e=="Critical"){t="sb.critical"}if(e=="Good"){t="sb.good"}return t},setTooltipInTile:function(e,t,i){var r="";var a=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();if(t=="NT"||t=="DT"){if(i.status){r+=a.getText("sb.status")+": "+a.getText(i.status)+"\n"}if(i.actual){r+=a.getText("sb.actual")+": "+i.actual+"\n"}if(i.target){r+=a.getText("sb.target")+": "+i.target+"\n"}if(i.cH){r+=a.getText("sb.ch")+": "+i.cH+"\n"}if(i.wH){r+=a.getText("sb.wh")+": "+i.wH+"\n"}if(i.wL){r+=a.getText("sb.wl")+": "+i.wL+"\n"}if(i.cL){r+=a.getText("sb.cl")+": "+i.cL+"\n"}}if(t=="CONT"||t=="COMP"){if(i.measure&&t=="CONT"){if(i&&i.contributionTile.contributionTile&&i.contributionTile.contributionTile[1]==="asc"){r+=a.getText("sb.bottomn")+": "+i.contributionTile[0]+"\n"}else if(i&&i.contributionTile.contributionTile&&i.contributionTile.contributionTile.length){r+=a.getText("sb.topn")+": "+i.contributionTile[0]+"\n"}}if(i.m1&&(i.v1==undefined||i.v1==null?false:i.v1.toString())&&i.c1){r+=i.m1+": "+i.v1+" "+a.getText(i.c1)+"\n"}if(i.m2&&(i.v2==undefined||i.v2==null?false:i.v2.toString())&&i.c2){r+=i.m2+": "+i.v2+" "+a.getText(i.c2)+"\n"}if(i.m3&&(i.v3==undefined||i.v3==null?false:i.v3.toString())&&i.c3){r+=i.m3+": "+i.v3+" "+a.getText(i.c3)+"\n"}}if(e&&e.setTooltip){e.setTooltip(r)}},_getFormattedTileProperties:function(e){e=e||{};var t=["sb_metadata","sb_navigation","sb_catalog"];var i=false;for(var r=0;!i&&r<t.length;r++){i=i||new n(window.location.href).get(t[r])||e[t[r]]}e.sb_metadata=(new n(window.location.href).get("sb_metadata")||e.sb_metadata||"HANA").toLowerCase();e.sb_navigation=(new n(window.location.href).get("sb_navigation")||e.sb_navigation||"abap").toLowerCase();e.sb_catalog=(new n(window.location.href).get("sb_catalog")||e.sb_catalog||"HANA").toLowerCase();e.isPlatformInfoPresent=i;return e},getEvaluationDetailsFromRunTimeService:function(e,t,i,r){var a=this.getODataModelByServiceUri(this.getRunTimeUri(t));var n="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",i);a.read(e,null,{$filter:n},true,function(e){var t=[];if(e.results.length){t=e.results}r.call(this,t)})},getParsedChip:function(e,t,i){try{var r={};var a=JSON.parse(e);var n=JSON.parse(a.TILE_PROPERTIES).evaluationId||"";if(a.TILE_PROPERTIES){var s=JSON.parse(a.TILE_PROPERTIES);if(s&&(s.instanceId||s.catalogId)){return false}}var l=this;if(a.blankTile){r.BLANKTILE=a.blankTile}if(a.cachingTime){r.CACHINGTIME=a.cachingTime}if(a.cachingTimeUnit){r.CACHINGUNIT=a.cachingTimeUnit}if(a.TAGS){r.TAGS=JSON.parse(a.TAGS)}if(a.ADDITIONAL_FILTERS){r.ADDITIONAL_FILTERS=JSON.parse(a.ADDITIONAL_FILTERS)}if(a.ADDITIONAL_APP_PARAMETERS){r.ADDITIONAL_APP_PARAMETERS=JSON.parse(a.ADDITIONAL_APP_PARAMETERS)}r.TILE_PROPERTIES=this._getFormattedTileProperties(JSON.parse(a.TILE_PROPERTIES));var o=r.TILE_PROPERTIES.sb_metadata;if(a.EVALUATION_FILTERS){r.EVALUATION_FILTERS=JSON.parse(a.EVALUATION_FILTERS);if(a.EVALUATION_VALUES){r.EVALUATION_VALUES=JSON.parse(a.EVALUATION_VALUES);if(a.EVALUATION){r.EVALUATION=JSON.parse(a.EVALUATION);if(i){i(r)}else{return r}}else if(!t){l.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",o,n,function(e){r.EVALUATION=e;if(i){i(r)}else{return r}})}else if(i){i(r)}else{return r}}else if(!t){l.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",o,n,function(e){r.EVALUATION_VALUES=e;if(a.EVALUATION){r.EVALUATION=JSON.parse(a.EVALUATION);if(i){i(r)}else{return r}}else{l.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",o,n,function(e){r.EVALUATION=e;if(i){i(r)}else{return r}})}})}else if(i){i(r)}else{return r}}else if(t){if(i){i(r)}else{return r}}else{l.getEvaluationDetailsFromRunTimeService("/EVALUATION_FILTERS",o,n,function(e){r.EVALUATION_FILTERS=e;if(a.EVALUATION_VALUES){r.EVALUATION_VALUES=JSON.parse(a.EVALUATION_VALUES);if(a.EVALUATION){r.EVALUATION=JSON.parse(a.EVALUATION);if(i){i(r)}else{return r}}else{l.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",o,n,function(e){r.EVALUATION=e;if(i){i(r)}else{return r}})}}else{l.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",o,n,function(e){r.EVALUATION_VALUES=e;if(a.EVALUATION){r.EVALUATION=JSON.parse(a.EVALUATION);if(i){i(r)}else{return r}}else{l.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",o,n,function(e){r.EVALUATION=e;if(i){i(r)}else{return r}})}})}})}}catch(e){return false}},getNavigationTarget:function(e,t){var i=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getServiceAsync;var r=i&&i("CrossApplicationNavigation");r.then(function(i){var r;var a={};a.evaluationId=e.EVALUATION.ID;a.chipId=e.TILE_PROPERTIES.id;if(t){a["sap-system"]=t}a.tileType=e.TILE_PROPERTIES.tileType;if(e.TILE_PROPERTIES.dimension){a.dimension=e.TILE_PROPERTIES.dimension}if(e.TILE_PROPERTIES.storyId){a.storyId=e.TILE_PROPERTIES.storyId}if(e.TILE_PROPERTIES.apfConfId){a["sap-apf-configuration-id"]=e.TILE_PROPERTIES.apfConfId}if(e.TILE_PROPERTIES.isPlatformInfoPresent){a.sb_metadata=e.TILE_PROPERTIES.sb_metadata;a.sb_navigation=e.TILE_PROPERTIES.sb_navigation;a.sb_catalog=e.TILE_PROPERTIES.sb_catalog}if(e.ADDITIONAL_APP_PARAMETERS){for(r in e.ADDITIONAL_APP_PARAMETERS){if(e.ADDITIONAL_APP_PARAMETERS.hasOwnProperty(r)){if(e.ADDITIONAL_APP_PARAMETERS[r].constructor==Array){var n=e.ADDITIONAL_APP_PARAMETERS[r];for(var s=0;s<n.length;s++){a[r]=n[s]}}else{a[r]=e.ADDITIONAL_APP_PARAMETERS[r]}}}}var l=i&&i.hrefForExternal({target:{semanticObject:e.TILE_PROPERTIES.semanticObject,action:e.TILE_PROPERTIES.semanticAction},params:a})||"";if(e.ADDITIONAL_FILTERS){var o=e.ADDITIONAL_FILTERS;var u="&";for(var c=0;c<o.length;c++){if(o[c].OPERATOR==="EQ"){u=u+"/"+o[c].NAME+"="+o[c].VALUE_1}}l+=u}return l})},getChipTitle:function(e){var t="";if(e){var i=e.EVALUATION||{};t=i.INDICATOR_TITLE||""}return t},getstringifyTileConfig:function(e){var t={};t.EVALUATION=JSON.stringify(e.EVALUATION);t.EVALUATION_FILTERS=JSON.stringify(e.EVALUATION_FILTERS);t.EVALUATION_VALUES=JSON.stringify(e.EVALUATION_VALUES);t.TILE_PROPERTIES=JSON.stringify(e.TILE_PROPERTIES);return JSON.stringify(t)},getChipSubTitle:function(e){var t="";if(e){var i=e.EVALUATION||{};t=i.TITLE||""}return t},getAllMeasures:function(e,t){var i=[];try{var r=this._getOData4AnalyticsObject(e);var n=r.findQueryResultByName(t);i=n.getAllMeasureNames()}catch(e){a.error("Error Fetching All Measures : "+e.toString())}return i},getFormattingMetadata:function(e,t,i){var a={};a._hasCurrency=false;a._hasSapText=false;var n=null;if(e instanceof r){n=u(e)}else{var s=this.getODataModelByServiceUri(e);n=u(s)}var l=new c(n);var o=l.findQueryResultByName(t);var f=o.getAllMeasures();if(f[i]){var g=f[i]._oTextProperty&&f[i]._oTextProperty.name?f[i]._oTextProperty.name:"";if(g!=""){a._hasSapText=true;a._sapTextColumn=g}else if(f[i].hasOwnProperty("_oUnitProperty")){var T=f[i]._oUnitProperty.extensions;for(var h=0;h<f[i]._oUnitProperty.extensions.length;h++){if(T[h].name==="semantics"&&T[h].value==="currency-code"){a._hasCurrency=true;a._currencyColumn=f[i]._oUnitProperty.name}}}}return a},getAllDimensions:function(e,t){function i(e,t){var i=0,r=0;var a=[];while(i<e.length&&r<t.length){if(e[i]<t[r]){i++}else if(e[i]>t[r]){r++}else{a.push(e[i]);i++;r++}}return a}var r=[];var n=[];try{var s=this._getOData4AnalyticsObject(e);var l=s.findQueryResultByName(t);var o=l.getEntityType();n=o.getFilterablePropertyNames();r=l.getAllDimensionNames();if(n&&n.length){r=i(n.sort(),r.sort())}}catch(e){a.error("Error Fetching All Dimesions : "+e.toString())}return r},prepareQueryServiceUri:function(t,i,n,s,f,g,T){function h(e){return e.replace(/'/g,"''")}var d=null;var m=function(){};var p=function(){};try{var v=null;if(t instanceof r){v=u(t)}else{var E=this.getODataModelByServiceUri(t);v=u(E)}var A=new c(v);var I=A.findQueryResultByName(i);var S=new o(I);if(n){S.setMeasures(n.split(","));S.includeMeasureRawFormattedValueUnit(null,true,true,true)}if(s){if(typeof s==="string"){d=s;d=d.split(",")}for(var O=0;O<d.length;O++){S.addToAggregationLevel([d[O]]);var y=I.getAllDimensions();if(y[d[O]].getTextProperty()!=null){S.includeDimensionKeyTextAttributes([d[O]],true,true,null)}}}if(f&&f.length){var N=[];var P=[];var U;for(O=0,U=f.length;O<U;O++){var R=f[O];if(R.type==="PA"){P.push(R)}else if(R.type==="FI"){N.push(R)}}m=function(e){var t=e.toJSON();var i=t.charAt(t.length-1).toUpperCase();if(i.charCodeAt(0)>=65&&i.charCodeAt(0)<=90){t=t.slice(0,-1)}return t};p=function(e){if(e){try{if(e==+e){e=window.parseInt(e)}var t=new Date(e);var i=t.getTime();if(isNaN(i)){return e}return m(t)}catch(e){}}return e};if(N.length){var L=S.getFilterExpression();for(O=0,U=N.length;O<U;O++){R=N[O];if(this.getEdmType(t,R.filterPropertyName)=="Edm.DateTime"){R.value=p(R.value);R.valueTo=p(R.valueTo)}if(R.comparator==e.BT){L.addCondition(R.filterPropertyName,R.comparator,h(R.value),R.valueTo)}else{var _=R.value.split(",");for(var b=0,D=_.length;b<D;b++){L.addCondition(R.filterPropertyName,R.comparator,h(_[b].replace(/\^\|/g,",")),null)}}}}if(P.length){if(I.getParameterization()){var C=new l(I.getParameterization());var M=I.getParameterization();var V,w,B,F,x;for(var H=0,j=P.length;H<j;H++){V=P[H];w=M.findParameterByName(V.filterPropertyName);if(w.isIntervalBoundary()===true&&w.isLowerIntervalBoundary()===true){x=w.getPeerIntervalBoundaryParameter();for(O=0,U=P.length;O<U;O++){if(P[O].filterPropertyName===x.getName()){F=h(P[O].value);break}}B=h(V.value);if(F){C.setParameterValue(V.filterPropertyName,B,F)}}else if(w.isIntervalBoundary()===true&&w.isLowerIntervalBoundary()===false){a.info("Future development")}else{C.setParameterValue(V.filterPropertyName,h(V.value))}}S.setParameterizationRequest(C)}}}var J=S.getURIToQueryResultEntries();if(g&&g.length){J=J+"&$orderby=";for(H=0,j=g.length;H<j;H++){var k=g[H].sortOrder||"asc";if(k){J+=g[H].element+" "+k+","}}J=J.slice(0,J.length-1)}if(T){J=J+"&$top="+T}var Q=I.getAllMeasures();var G=[];for(O=0;O<n.split(",").length;O++){G.push(Q[n.split(",")[O]].getUnitProperty())}return{uri:J,model:A.getODataModel(),unit:G}}catch(e){a.error("Error Preparing Query Service Uri using OData4Analytics Library : "+e.toString());if(arguments.length){a.error("Arguments Passed to this function");a.error(arguments[0]+","+arguments[1]+","+arguments[2]+","+arguments[3])}else{a.error("NO Arguments passed to this function")}return null}},getAllEntitySet:function(e){var t=[];try{var i=this._getOData4AnalyticsObject(e);t=i.getAllQueryResultNames()}catch(e){a.error("Error fetching Enity Set : "+e.toString())}return t},getAllMeasuresWithLabelText:function(e,i){var r=[];try{var n=this._getOData4AnalyticsObject(e);var s=n.findQueryResultByName(i);var l=s.getAllMeasureNames();for(var o=0;o<l.length;o++){var u=l[o];t.oMeasure=s.findMeasureByName(u);r.push({key:u,value:oMeasure.getLabelText()})}}catch(e){a.error("Error Fetching All Measures : "+e.toString())}return r},getAllDimensionsWithLabelText:function(e,t){var i=[];try{var r=this._getOData4AnalyticsObject(e);var n=r.findQueryResultByName(t);var s=n.getAllDimensionNames();for(var l=0;l<s.length;l++){var o=s[l];var u=n.findDimensionByName(o);var c=null;if(u.getTextProperty()!=null){c=u.getTextProperty().name}i.push({key:o,value:u.getLabelText(),textProperty:c})}}catch(e){a.error("Error Fetching All Dimesions : "+e.toString())}return i},getAllInputParams:function(e,t){var i=[];try{var r=this._getOData4AnalyticsObject(e);var n=r.findQueryResultByName(t);if(n.getParameterization()){var s=n.getParameterization();i=s.getAllParameterNames()}}catch(e){a.error("Error Fetching Input Params : "+e.toString())}return i},getAllInputParamsWithFlag:function(e,t){var i=[];try{var r=this._getOData4AnalyticsObject(e);var n=r.findQueryResultByName(t);if(n.getParameterization()){var s=n.getParameterization();var l=s.getAllParameterNames();for(var o=0;o<l.length;o++){var u=l[o];var c=s.findParameterByName(u);i.push({name:u,optional:c.isOptional()})}}}catch(e){a.error("Error Fetching Input Params : "+e.toString())}return i},formatOdataObjectToString:function(e){if(e&&e.constructor==Object){if(e.__edmType=="Edm.Time"){var t=e.ms;var i=Math.floor(t/1e3%60);var r=Math.floor(t/6e4%60);var a=Math.floor(t/36e5%24);return a+"H"+r+"M"+i+"S"}}return e},generateCombinations:function(e){function t(e,t){while(t.length<e){t="0"+t}return t}var i=Math.pow(2,e.length);var r=[];var a=0;while(i>1){var n=(i-1).toString(2);n=t(e.length,n);r[a]=[];for(var s=0;s<n.length;s++){if(Number(n[s])){r[a].push(e[s])}}i--;a++}return r},logError:function(e,t){if(e=="no data"&&t){var i=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();t.setFailedText(i.getText("sb.noData"))}a.error(e.toString())},numberOfLeadingZeros:function(e){e=String(e);var t=0;var i=e.indexOf(".");if(i==-1){return 0}if(Number(e.split(".")[0])!=0){return 0}var r=i+1;while(e[r++]=="0"){++t}return t},formatValue:function(e,t,i){i=i||3;var r={3:"K",6:"M",9:"B",12:"T",0:""};r["-3"]="m";r["-6"]="u";r["-9"]="n";r["-12"]="t";r["-2"]="%";var a,n,s;a=Number(e).toPrecision(i);var l=this.numberOfLeadingZeros(a);if(l>0&&t<0){n=a*Math.pow(10,l+i);s=-(l+i)}else{n=Number(a.split("e")[0]);s=Number(a.split("e")[1])||0}if(!e&&e!=0){return{value:"",unitPrefix:""}}if(t>=0){if(s%3!=0){if(s%3==2){if(s+1==t){s=s+1;n=n/10}else{s=s-2;n=n*100}}else if(s+2==t){s=s+2;n=n/100}else{s--;n=n*10}}else if(s==15){n=n*1e3;s=12}}else if(t=="-2"){var o=this.formatValue(e*100,0)}else if(s>=0&&e<10&&t=="-3"){n=e*Math.pow(10,3);s=-3}else if(s>=0){return this.formatValue(e,0)}else{s=Math.abs(s);t=Math.abs(t);if(t>s){n=n/Math.pow(10,s%3);s=s-s%3}else{var u=s-t;n=n/Math.pow(10,u);s=s-u}s=0-s}n+="";if(t=="-2"){var c=o.unitPrefix==""?Number(o.value+"").toFixed(4-(o.value+"").indexOf(".")):Number(o.value+"").toFixed(3-(o.value+"").indexOf("."));return{value:Number(c),unitPrefix:o.unitPrefix+r[-2]}}n=Number(n).toFixed(4-n.indexOf("."));return{value:Number(n),unitPrefix:r[s]}},isSmartbusinessChipAndCachable:function(e){var t=this.getParsedChip(e&&e.getConfigurationParameter("tileConfiguration"));return t&&t.TILE_PROPERTIES&&t.TILE_PROPERTIES.tileType&&this.getCachingTime(t)},getHanaClient:function(){var e;var t=function(t,i,r){e=t.sessionClient;sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(e);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e)};var i=function(e,t,i){a.error(e.responseText);a.error("session client call failed");sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(null);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.reject()};var r=sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED||jQuery.Deferred();var n=sap.ushell.components.tiles.indicatorTileUtils.cache.getCacheHanaClient();if(n!=undefined){e=n;sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e)}else if(sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED){return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise()}else{sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED=r;jQuery.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/r/sb/core/logic/GetSessionClient.xsjs",success:t,error:i})}return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise()},abortPendingODataCalls:function(e){try{if(e){e.abort()}}catch(e){this.logError(e)}}}}(window,jQuery);sap.ushell.components.tiles.indicatorTileUtils.cache=function(){var e={};var t={};var i="HANA_CLIENT";return{getCacheHanaClient:function(){return e[i]},setCacheHanaClient:function(t){e[i]=t},getEvaluationByChipId:function(t){if(e[t]){return e[t]}return null},getEvaluationById:function(e){return this.getEvaluationByChipId(e)},setEvaluationById:function(t,i){e[t]=i},getFrontEndCacheDeferredObject:function(t){if(e[t]){return e[t]}return null},setFrontEndCacheDefferedObject:function(t,i){e[t]=i},getKpivalueById:function(e){if(t[e]){return t[e]}return null},setKpivalueById:function(e,i){t[e]=i}}}();return{}},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,i,jQuery,t){"use strict";var a=i.DeviationIndicator;var o=i.ValueColor;var l=i.Size;var s=i.LoadState;var n=i.FrameType;var r=e.extend("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false},_processDataForComparisonChart:function(e,i,t){var a=[],o={},l,s,n;var r;var T=[];var E=this;var c=null;for(l=0;l<e.results.length;l++){var u=e.results[l]}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oTileApi.url.addSystemToServiceUrl(this.oConfig.EVALUATION.ODATA_URL),this.oConfig.EVALUATION.ODATA_ENTITYSET);for(l=0,n=T.length;l<n;l++){s=T[l];o[s.key]=s.value}var h=E.oConfig.TILE_PROPERTIES.COLUMN_NAMES||E.oConfig.EVALUATION.COLUMN_NAMES;for(l=0;l<h.length;l++){var p={};var C=h[l];p.value=Number(u[C.COLUMN_NAME]);var f=Number(u[C.COLUMN_NAME]);var I=false;var L=0;var d=E._getEvaluationThresholdMeasures();var A=d?Array.prototype.indexOf.call(d,C.COLUMN_NAME):-1;if(A>-1){I=true;L=E.oConfig.EVALUATION.SCALING}if(E.oConfig.EVALUATION.SCALING==-2&&I){f*=100}var g=E.isCurrencyMeasure(C.COLUMN_NAME);if(t&&t[l]&&u[t[l].name]){c=u[t[l].name]}r=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(f,L,E.oConfig.EVALUATION.SCALING,E.oConfig.EVALUATION.DECIMAL_PRECISION,g,c);if(E.oConfig.EVALUATION.SCALING==-2&&I){r+=" %"}p.displayValue=r.toString();if(t){if(t[l]&&u[t[l].name]){p.displayValue+=" "+u[t[l].name]}}p.color=C.semanticColor;p.title=o[C.COLUMN_NAME]||C.COLUMN_NAME;p.measure=C.COLUMN_NAME;p.isCurM=g;a.push(p)}return a},fetchChartData:function(e,i,a,o){function l(e,i){var t=false;if(e&&e.results&&e.results.length){for(var a=0,o=i.length;a<o&&!t;a++){t=e.results[0][i[a].COLUMN_NAME]!==null}}return t}var s=this;try{var n=this.oConfig.EVALUATION.ODATA_ENTITYSET;var r=this.oConfig.EVALUATION.COLUMN_NAME;var T=r,E;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(E=0;E<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;E++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[E].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){T=T+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[E].COLUMN_NAME}}}else{for(E=0;E<this.oConfig.EVALUATION.COLUMN_NAMES.length;E++){if(this.oConfig.EVALUATION.COLUMN_NAMES[E].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){T=T+","+this.oConfig.EVALUATION.COLUMN_NAMES[E].COLUMN_NAME}}}var c=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);var u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){if(u){var h=u.Data&&JSON.parse(u.Data)}}var p=s.oTileApi.configuration.getParameterValueAsString("timeStamp");var C=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(s.oConfig.TILE_PROPERTIES.id,p,s.chipCacheTime,s.chipCacheTimeUnit,s.tilePressed);if(h&&!h.rightData||!u||!C&&s.oTileApi.visible.isVisible()||c||i&&s.oTileApi.visible.isVisible()||s.getView().getViewData().refresh){if(s.kpiValueFetchDeferred){s.kpiValueFetchDeferred=false;var f=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var I=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(s.oRunTimeODataModel,n,T,null,f,3);this.comparisionChartODataRef=I.model.read(I.uri,null,null,true,function(e){s.kpiValueFetchDeferred=true;var i={};if(I.unit){i.unit=I.unit}if(l(e,s.oConfig.TILE_PROPERTIES.COLUMN_NAMES||s.oConfig.EVALUATION.COLUMN_NAMES)){s.oConfig.TILE_PROPERTIES.FINALVALUE=e;s.oConfig.TILE_PROPERTIES.FINALVALUE=s._processDataForComparisonChart(s.oConfig.TILE_PROPERTIES.FINALVALUE,T.split(",")[0],I.unit);i.data=s.oConfig.TILE_PROPERTIES.FINALVALUE;var t={};s.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();t.ChipId=s.oConfig.TILE_PROPERTIES.id;t.Data=JSON.stringify(i);t.CacheMaxAge=Number(s.chipCacheTime);t.CacheMaxAgeUnit=s.chipCacheTimeUnit;t.CacheType=1;var o=s.getLocalCache(t);s.updateDatajobScheduled=false;var n=s.oConfig.TILE_PROPERTIES.id+"data";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(n);if(r){clearTimeout(r);r=undefined}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,o);var E=false;if(u){E=true}if(s.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(s.oTileApi,s.oConfig.TILE_PROPERTIES.id,t,E,function(e){if(e){s.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,e);s.setTimeStamp()}if(s.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){jQuery.proxy(s.setTimeStamp(s.cacheTime),s)}})}}else{var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id),h;if(c){if(!c.CachedTime){c.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}h=c.Data;if(h){h=JSON.parse(h);h.rightData=i}c.Data=JSON.stringify(h);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,c)}else{h={};h.rightData=i;o.Data=JSON.stringify(h);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,o)}s.cacheWriteData=i}a.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(e.results.length==0){s.oConfig.TILE_PROPERTIES.FINALVALUE=e;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id)){i=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id);i.data=e}else{i.data=e}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,i);a.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE);s.setNoData()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,{empty:"empty"});s.setNoData()}},function(e){s.kpiValueFetchDeferred=true;if(e&&e.response){t.error(e.message+" : "+e.request.requestUri);o.call(s,e)}})}}else if(u&&u.Data){var L;var d=s.oConfig&&s.oConfig.TILE_PROPERTIES&&s.oConfig.TILE_PROPERTIES.tileType;if(d.indexOf("DT-")==-1){L=u.Data&&JSON.parse(u.Data)}else{L=u.Data&&JSON.parse(u.Data);L=L.rightData}s.cacheTime=u.CachedTime;if(s.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){jQuery.proxy(s.setTimeStamp(s.cacheTime),s)}if(L.data&&L.data.length){s.oConfig.TILE_PROPERTIES.FINALVALUE=L.data;a.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE)}else{s.oConfig.TILE_PROPERTIES.FINALVALUE=L.data;a.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE);s.setNoData()}}else{s.setNoData()}}catch(e){s.kpiValueFetchDeferred=true;o.call(s,e)}},doProcess:function(e,i){var t=this;this.setTextInTile();this.fetchChartData(e,i,function(e){this.CALCULATED_KPI_VALUE=e;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==n.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(n.TwoByOne);t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());var i={};i.data=this.CALCULATED_KPI_VALUE;t.getView().getViewData().deferredObj.resolve()}else{t.oKpiTileView.oGenericTile.setFrameType(n.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(s.Loaded)}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"COMP");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}},this.logError)},doDummyProcess:function(){var e=this;this.setTextInTile();e._updateTileModel({value:8888,size:l.Auto,frameType:n.OneByOne,state:s.Loading,valueColor:o.Error,indicator:a.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1.2,color:"Good"},{title:"Measure 2",value:.78,color:"Good"},{title:"Measure 3",value:1.4,color:"Error"}]});this.oKpiTileView.oGenericTile.setState(s.Loaded)}});return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel","sap/m/library"],function(e,i,t,a,o,s,r,l){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcomparison.ComparisonTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=l.Size;var i=this;i.oGenericTileData={};i.oCmprsDataTmpl=new a({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});i.oCmprsChrtTmpl=new o({size:e.Responsive,scale:"{/scale}",data:{template:i.oCmprsDataTmpl,path:"/data"}});i.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:i.oCmprsChrtTmpl});i.oGenericTile=new s({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[i.oNVConfS]});i.oGenericTileModel=new r;i.oGenericTileModel.setData(i.oGenericTileData);i.oGenericTile.setModel(i.oGenericTileModel);return i.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcontribution/ContributionTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,i,jQuery,t){"use strict";var a=i.DeviationIndicator;var l=i.ValueColor;var o=i.Size;var s=i.LoadState;var n=i.FrameType;var r=e.extend("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false},_processDataForComparisonChart:function(e,i,t,a){var l=this.oConfig.TILE_PROPERTIES.semanticColorContribution;var o=[];var s;var n;for(var r=0;r<e.results.length;r++){var T=e.results[r];var c={};try{c.title=T[t].toString()}catch(e){c.title=""}c.value=Number(T[i]);var u=Number(T[i]);if(this.oConfig.EVALUATION.SCALING==-2){u*=100}var p=this.isCurrencyMeasure(i);n=T[a];s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(u,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,p,n);c.displayValue=s.toString();if(typeof l==="undefined"){c.color="Neutral"}else{c.color=l}if(c&&a){c[a]=n}o.push(c)}return o},fetchChartData:function(e,i,a,l){var o=this;try{var s=this.oConfig.EVALUATION.ODATA_ENTITYSET,n;o.setThresholdValues();if(this.oConfig.TILE_PROPERTIES.semanticMeasure){n=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure}else{n=this.oConfig.EVALUATION.COLUMN_NAME}var r=null;var T=this.oConfig.TILE_PROPERTIES.dimension;var c=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);var u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(o.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(o.oConfig)){if(u){var p=u.Data&&JSON.parse(u.Data)}}var E=o.oTileApi.configuration.getParameterValueAsString("timeStamp");var h=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(o.oConfig.TILE_PROPERTIES.id,E,o.chipCacheTime,o.chipCacheTimeUnit,o.tilePressed);if(p&&!p.rightData||!u||!h&&o.oTileApi.visible.isVisible()||c||i&&o.oTileApi.visible.isVisible()||o.getView().getViewData().refresh){if(o.kpiValueFetchDeferred){o.kpiValueFetchDeferred=false;var d=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var f={};f["0"]=n+",asc";f["1"]=n+",desc";f["2"]=T+",asc";f["3"]=T+",desc";var I=f[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var C=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(o.oRunTimeODataModel,s,n,T,d,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){C.uri+="&$top=3&$orderby="+I[0]+" "+I[2]}else{C.uri+="&$top=3&$orderby="+I[0]+" "+I[1]}this.comparisionChartODataRef=C.model.read(C.uri,null,null,true,function(e){o.kpiValueFetchDeferred=true;var i={};if(e&&e.results&&e.results.length){if(C.unit[0]){o._updateTileModel({unit:e.results[0][C.unit[0].name]});r=C.unit[0].name;i.unit=C.unit[0];i.unit.name=C.unit[0].name}T=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(o.oRunTimeODataModel,s,T);i.dimension=T;o.oConfig.TILE_PROPERTIES.FINALVALUE=e;o.oConfig.TILE_PROPERTIES.FINALVALUE=o._processDataForComparisonChart(o.oConfig.TILE_PROPERTIES.FINALVALUE,n.split(",")[0],T,r);i.data=o.oConfig.TILE_PROPERTIES.FINALVALUE;i.isCurM=o.isACurrencyMeasure(o.oConfig.EVALUATION.COLUMN_NAME);var t={};o.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();t.ChipId=o.oConfig.TILE_PROPERTIES.id;t.Data=JSON.stringify(i);t.CacheMaxAge=Number(o.chipCacheTime);t.CacheMaxAgeUnit=o.chipCacheTimeUnit;t.CacheType=1;var l=o.getLocalCache(t);o.updateDatajobScheduled=false;var c=o.oConfig.TILE_PROPERTIES.id+"data";var p=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(c);if(p){clearTimeout(p);p=undefined}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(o.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,l);var E=false;if(u){E=true}if(o.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(o.oTileApi,o.oConfig.TILE_PROPERTIES.id,t,E,function(e){if(e){o.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,e)}if(o.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(o.oConfig)){jQuery.proxy(o.setTimeStamp(o.cacheTime),o)}})}}else{var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(o.oConfig.TILE_PROPERTIES.id),d;if(h){if(!h.CachedTime){h.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}d=h.Data;if(d){d=JSON.parse(d);if(o.oKpiTileView.getViewName()=="tiles.indicatornumeric.NumericTile"){d.leftData=i}else{d.rightData=i}}h.Data=JSON.stringify(d);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,h)}else{d={};d.rightData=i;l.Data=JSON.stringify(d);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,l)}o.cacheWriteData=i}a.call(o,o.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(e.results.length==0){o.oConfig.TILE_PROPERTIES.FINALVALUE=e;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(o.oConfig.TILE_PROPERTIES.id)){i=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(o.oConfig.TILE_PROPERTIES.id);i.data=e}else{i.data=e}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,i);a.call(o,o.oConfig.TILE_PROPERTIES.FINALVALUE);o.setNoData()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,{empty:"empty"});o.setNoData()}},function(e){o.kpiValueFetchDeferred=true;if(e&&e.response){t.error(e.message+" : "+e.request.requestUri);l.call(o,e)}})}}else if(u&&u.Data){var g;var m=o.oConfig&&o.oConfig.TILE_PROPERTIES&&o.oConfig.TILE_PROPERTIES.tileType;if(m.indexOf("DT-")==-1){g=u.Data&&JSON.parse(u.Data)}else{g=u.Data&&JSON.parse(u.Data);g=g.rightData}o.cacheTime=u.CachedTime;if(o.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(o.oConfig)){jQuery.proxy(o.setTimeStamp(o.cacheTime),o)}if(g.data&&g.data.length){if(g.unit){o._updateTileModel({unit:g.data[0][g.unit.name]})}T=g.dimension;o.oConfig.TILE_PROPERTIES.FINALVALUE=g.data;a.call(o,o.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(g&&g.data&&g.data instanceof Array&&g.data.length==0){o.oConfig.TILE_PROPERTIES.FINALVALUE=g.data;a.call(o,o.oConfig.TILE_PROPERTIES.FINALVALUE);o.setNoData()}else{o.setNoData()}}else{o.setNoData()}}catch(e){o.kpiValueFetchDeferred=true;l.call(o,e)}},doProcess:function(e,i){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);this.setTextInTile();this.fetchChartData(e,i,function(e){this.CALCULATED_KPI_VALUE=e;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==n.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(n.TwoByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());t.getView().getViewData().deferredObj.resolve()}else{t.oKpiTileView.oGenericTile.setFrameType(n.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(s.Loaded)}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"CONT");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}},this.logError)},doDummyProcess:function(){var e=this;e.setTextInTile();e._updateTileModel({value:8888,size:o.Auto,frameType:n.OneByOne,state:s.Loading,valueColor:l.Error,indicator:a.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral"},{title:"EMEA",value:50,color:"Neutral"},{title:"APAC",value:-20,color:"Neutral"}]});this.oKpiTileView.oGenericTile.setState(s.Loaded)}});return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcontribution/ContributionTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel","sap/m/library"],function(e,i,t,o,a,s,n,r){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcontribution.ContributionTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=r.Size;var i=this;i.oGenericTileData={};i.oCmprsDataTmpl=new o({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});i.oCmprsChrtTmpl=new a({size:e.Responsive,scale:"{/scale}",data:{template:i.oCmprsDataTmpl,path:"/data"}});i.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:i.oCmprsChrtTmpl});i.oGenericTile=new s({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[i.oNVConfS]});i.oGenericTileModel=new n;i.oGenericTileModel.setData(i.oGenericTileData);i.oGenericTile.setModel(i.oGenericTileModel);return i.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatordeviation/DeviationTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library"],function(e,i){"use strict";var r=i.ValueColor;var t=i.LoadState;var o=i.FrameType;var l=e.extend("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{onInit:function(){this.KPI_VALUE_REQUIRED=true},doProcess:function(e,i){var r=this;var l,a;l=i.targetValue;var s=Number(e);this.setThresholdValues();if(this.oConfig.EVALUATION.SCALING==-2){s*=100}var u=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(s),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,u,this.CURRENCY_CODE);this.CALCULATED_KPI_VALUE=Number(e);var n={};var A=this.getThresholdsObjAndColor(i).returnColor;var h={value:Number(e),color:A};n.actualValueLabel=a.toString();n.actual=h;n.thresholds=[];n.thresholds=this.getThresholdsObjAndColor(i).arrObj;var C=this.DEFINITION_DATA.EVALUATION_VALUES,E;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){E=Number(l);if(this.oConfig.EVALUATION.SCALING==-2){E*=100}u=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);l=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(E,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,u,this.CURRENCY_CODE);n.targetValue=Number(E);n.targetValueLabel=l.toString()}else{for(var L=0;L<C.length;L++){if(C[L].TYPE==="TA"){E=Number(l);if(this.oConfig.EVALUATION.SCALING==-2){E*=100}u=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);l=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(E,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,u,this.CURRENCY_CODE);n.targetValue=Number(E);n.targetValueLabel=l.toString()}}}if(this.oConfig.EVALUATION.SCALING==-2){n.scale="%"}this._updateTileModel(n);if(this.DEFINITION_DATA.TILE_PROPERTIES.frameType==o.TwoByOne){r.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());r.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(r.oConfig.TILE_PROPERTIES.id+"defferedRight",false)}else{this.oKpiTileView.oGenericTile.setState(t.Loaded)}this.setToolTip(A,s,"DT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(r.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}}},getThresholdsObjAndColor:function(e){try{var i={};i.arrObj=[];i.returnColor=r.Neutral;var t=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var o,l,a,s;if(t==="MI"){a=Number(e.criticalHighValue)||0;s=Number(e.warningHighValue)||0;if(a&&s){a=window.parseFloat(a);s=window.parseFloat(s);i.arrObj.push({value:a,color:r.Error});i.arrObj.push({value:s,color:r.Critical});if(this.CALCULATED_KPI_VALUE<s){i.returnColor=r.Good}else if(this.CALCULATED_KPI_VALUE<=a){i.returnColor=r.Critical}else{i.returnColor=r.Error}}}else if(t==="MA"){l=Number(e.criticalLowValue)||0;o=Number(e.warningLowValue)||0;if(l&&o){l=window.parseFloat(l);o=window.parseFloat(o);i.arrObj.push({value:l,color:r.Error});i.arrObj.push({value:o,color:r.Critical});if(this.CALCULATED_KPI_VALUE<l){i.returnColor=r.Error}else if(this.CALCULATED_KPI_VALUE<=o){i.returnColor=r.Critical}else{i.returnColor=r.Good}}}else{a=Number(e.criticalHighValue)||0;s=Number(e.warningHighValue)||0;l=Number(e.criticalLowValue)||0;o=Number(e.warningLowValue)||0;if(o&&s&&l&&l){a=window.parseFloat(a);s=window.parseFloat(s);o=window.parseFloat(o);l=window.parseFloat(l);i.arrObj.push({value:a,color:r.Error});i.arrObj.push({value:s,color:r.Critical});i.arrObj.push({value:o,color:r.Critical});i.arrObj.push({value:l,color:r.Error});if(this.CALCULATED_KPI_VALUE<l||this.CALCULATED_KPI_VALUE>a){i.returnColor=r.Error}else if(this.CALCULATED_KPI_VALUE>=l&&this.CALCULATED_KPI_VALUE<=o||this.CALCULATED_KPI_VALUE>=s&&this.CALCULATED_KPI_VALUE<=a){i.returnColor=r.Critical}else{i.returnColor=r.Good}}}return i}catch(e){this.logError(e)}},doDummyProcess:function(){var e=this;this.setTextInTile();e._updateTileModel({actual:{value:120,color:r.Good},targetValue:100,thresholds:[{value:0,color:r.Error},{value:50,color:r.Critical},{value:150,color:r.Critical},{value:200,color:r.Error}],showActualValue:true,showTargetValue:true});this.oKpiTileView.oGenericTile.setState(t.Loaded)}});return l});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatordeviation/DeviationTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,t,a,i,s,l,o,r){"use strict";var u=i.Size;var n=i.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatordeviation.DeviationTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e="Lorem ipsum";var t="Lorem ipsum";var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(a.title&&a.subTitle){e=a.title;t=a.subTitle}var i={subheader:t,header:e,footerNum:"",footerComp:"",frameType:"OneByOne",state:n.Loading,scale:""};var c=new s({value:"{value}",color:"{color}"});this.oBCTmpl=new l({size:u.Responsive,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:c,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oBCTmpl});this.oGenericTile=new o({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var h=new r;h.setData(i);this.oGenericTile.setModel(h);return this.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatornumeric/NumericTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library"],function(e,i){"use strict";var t=i.DeviationIndicator;var o=i.ValueColor;var s=i.LoadState;var l=i.FrameType;var a=e.extend("sap.ushell.components.tiles.indicatornumeric.NumericTile",{onInit:function(){this.KPI_VALUE_REQUIRED=true},doProcess:function(e,i){var t=this;this.CALCULATED_KPI_VALUE=e;var o=this.getTrendColor(i);var a=this.getTrendIndicator(i.trendValue);var n="";var r=this.CALCULATED_KPI_VALUE;if(this.oConfig.EVALUATION.SCALING==-2){r*=100;this.getView().oNVConfContS.setFormatterValue(false)}var T=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);n=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(r),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,T,this.CURRENCY_CODE);if(this.oConfig.EVALUATION.SCALING==-2){this._updateTileModel({scale:"%"})}this._updateTileModel({value:n.toString(),valueColor:o,indicator:a});if(t.oConfig.TILE_PROPERTIES.frameType==l.OneByOne){this.oKpiTileView.oGenericTile.setState(s.Loaded);this.setToolTip(o,r,"NT")}else{t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());t.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(t.oConfig.TILE_PROPERTIES.id+"defferedLeft",false)}this.setToolTip(o,r,"NT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,t.oTileApi.visible.isVisible())}}},doDummyProcess:function(){var e=this;this.setTextInTile();if(!(e.oConfig.BLANKTILE||e.oConfig.TILE_PROPERTIES.blankTile)){e._updateTileModel({value:"10.34",scale:"M",valueColor:o.Neutral,indicator:t.None})}else{this.oKpiTileView.oNVConfContS.setIcon("sap-icon://BusinessSuiteInAppSymbols/icon-multiple-charts")}this.oKpiTileView.oGenericTile.setState(s.Loaded)}});return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatornumeric/NumericTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/m/NumericContent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,i,t,o,a,s,n){"use strict";var l=o.DeviationIndicator;var r=o.ValueColor;var u=o.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("sap.ushell.components.tiles.indicatornumeric.NumericTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatornumeric.NumericTile"},createContent:function(){var e="Lorem ipsum";var i="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){e=t.title;i=t.subTitle}var o={subheader:i,header:e,footerNum:"",footerComp:"",scale:"",unit:"",value:"",size:"Auto",frameType:"OneByOne",state:u.Loading,valueColor:r.Neutral,indicator:l.None,title:"",footer:"",description:""};this.oNVConfContS=new a({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",valueColor:"{/valueColor}",size:"{/size}",formatterValue:true,truncateValueTo:5,nullifyValue:false});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new s({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var c=new n;c.setData(o);this.oGenericTile.setModel(c);return this.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/sbtilecontent", ["sap/m/TileContent","sap/m/TileContentRenderer","sap/ui/core/Control"],function(e,t,i){"use strict";var n=i.extend("numeric.TileContent_Timestamp",{ontap:function(e){if(this.getParent().getRefreshOption()){e.preventDefault();e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}this.getParent().fireRefresh()}},renderer:function(e,t){e.write("<div");e.writeElementData(t);e.addClass("sapMTileCntFtrTxt");if(t.getParent().getRefreshOption()){e.addClass("sapMLnk")}e.writeClasses();e.addStyle("position","absolute");e.addStyle("z-index","2");e.addStyle(e.getConfiguration().getRTL()?"left":"right","auto");e.writeStyles();e.write(">");var i=t.getParent().getTimestamp();if(i){if(!t.getParent().getRefreshOption()){e.writeEscaped(i)}else if(e.getConfiguration().getRTL()){e.writeEscaped(i+" ");e.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner")}else{e.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner");e.writeEscaped(" "+i)}}e.write("</div>")}});return e.extend("sap.ushell.components.tiles.sbtilecontent",{metadata:{properties:{timestamp:{type:"string"},refreshOption:{type:"boolean"}},events:{refresh:{}}},init:function(){this.addDependent(this._oTimestamp=new n)},getAltText:function(){var t=e.prototype.getAltText.apply(this,arguments);if(this.getTimestamp()){t+=(t===""?"":"\n")+this.getTimestamp()}return t},renderer:{_renderFooter:function(e,i){t._renderFooter.apply(this,arguments);e.renderControl(i._oTimestamp)}}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/utils", ["sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/core/Core","sap/ui/core/mvc/View","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/m/TableSelectDialog","sap/m/Column","sap/m/ColumnListItem","sap/ui/core/CustomData","sap/ui/core/Item","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/format/NumberFormat"],function(e,t,a,i,n,r,s,l,o,u,p,c,g,d,_,f,b,y,I,v,m,V,jQuery,h,w){"use strict";var S=s.MessageType;var x=s.ValueState;var T=s.mvc.ViewType;var P=l.ButtonType;var D={};D.isInitial=function(e){return e==="App Launcher – Static"||e==="App Launcher – Dynamic"||e==="Target Mapping"};D.getResourceBundleModel=function(){return t.i18nModel};D.getEmptyRowObj=function(e){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!e,defValEnabled:true,editable:e}};D.getEmptyTileActionsRowObj=function(e){var t=D.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:t.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:e}};D.getTileNavigationActionsRows=function(e,t){var a=[],i=[];i=this.getTileNavigationActions(e);if(i.length){for(var n=0;n<i.length;n++){a.push(C(i[n],t))}}else{a=[this.getEmptyTileActionsRowObj(t)]}return a};D.getTileNavigationActions=function(e){var t=[],a="";var i=e.bag.getBag("tileNavigationActions");if(i.getPropertyNames().indexOf("tile_navigation_actions")>=0){t=JSON.parse(i.getProperty("tile_navigation_actions"));for(var n=0;n<t.length;n++){if(t[n].text){if(i.getTextNames().indexOf("action_tile_"+(n+1))>=0){a=i.getText("action_tile_"+(n+1))}t[n].text=a}}}return t};var C=function(e,t){var a={},i=D.getResourceBundleModel().getResourceBundle();a.menu_title=e.text;a.icon=e.icon;if(e.targetURL.charAt(0)==="#"){a.target_type=i.getText("configuration.tile_actions.table.target_type.intent");var n=e.targetURL.split("-");a.navigation_target=n[0].substring(1,n[0].length);a.action=n[1];a.isTargetTypeIntent=true}else{a.target_type=i.getText("configuration.tile_actions.table.target_type.url");a.navigation_target=e.targetURL;a.action="";a.isTargetTypeIntent=false}a.editable=t;return a};D.tileActionsRows2TileActionsArray=function(e){var t=[];for(var a=0;a<e.length;a++){if(e[a].menu_title){t.push(R(e[a]))}}return t};var R=function(e){var t={};t.text=e.menu_title;t.icon=e.icon;if(e.action){t.targetURL="#"+e.navigation_target+"-"+e.action}else{t.targetURL=e.navigation_target}return t};D.populateTileNavigationActionsBag=function(e,t){e.setProperty("tile_navigation_actions",JSON.stringify(t));for(var a=0;a<t.length;a++){var i=t[a].text;e.setText("action_tile_"+(a+1),i)}};D.getDefaultFormFactors=function(){return{appDefault:false,manual:{desktop:true,tablet:true,phone:true},defaultParam:true}};D.buildFormFactorsObject=function(e){return{appDefault:e.getProperty("/config/appFormFactor"),manual:{desktop:e.getProperty("/config/desktopChecked"),tablet:e.getProperty("/config/tabletChecked"),phone:e.getProperty("/config/phoneChecked")}}};D.tableHasDuplicateParameterNames=function(e){var t={};for(var a=0;a<e.length;a++){var i=e[a].name;if(i!==""){if(t[i]){return true}t[i]=true}}return false};D.tableHasInvalidSapPrelaunchOperationValue=function(t){for(var a=0;a<t.length;a++){if(t[a].name==="sap-prelaunch-operations"){if(e.parseAndValidateOperations(t[a].defaultValue)===null){return false}break}}return true};D.getMappingSignatureString=function(e,t){var a="";for(var i=0;i<e.length;i++){if(e[i].name){a+=A(e[i])+"&"}}return t?a+"*=*":a.substring(0,a.length-1)};var A=function(e){var t="";if(e.mandatory){if(e.isRegularExpression){t="{"+e.name+"="+encodeURIComponent(e.value)+"}"}else{t=e.name+"="+encodeURIComponent(e.value)}}else{t="["+e.name+"="+encodeURIComponent(e.defaultValue)+"]"}return t};D.getMappingSignatureTableData=function(e,t){var a=[];var i=e.split("&");for(var n=0;n<i.length;n++){var r=i[n];if(r!=="*=*"){a.push(E(i[n],t))}}return a};var E=function(e,t){var a={};if(e.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";e=e.substring(1,e.length-1);a.name=e.substring(0,e.indexOf("="));a.defaultValue=decodeURIComponent(e.substring(e.indexOf("=")+1))}else{a.mandatory=true;a.defaultValue="";if(e.charAt(0)==="{"){a.isRegularExpression=true;e=e.substring(1,e.length-1)}else{a.isRegularExpression=false}a.name=e.substring(0,e.indexOf("="));a.value=decodeURIComponent(e.substring(e.indexOf("=")+1))}a.editable=t;if(t){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory}else{a.valEnabled=true;a.defValEnabled=true}return a};D.getAllowUnknownParametersValue=function(e){if(e&&e.substring(e.length-3,e.length)==="*=*"){return true}return false};D.getMappingSignature=function(e,t){var a=t?"allowed":"ignored";var i=new RegExp("%%UserDefault[.].+%%");var n=[];var r={parameters:{},additional_parameters:a};e.forEach(function(e){r.parameters[e.name]={required:e.mandatory,rename_to:e.rename_to};if(e.defaultValue){n=i.exec(e.defaultValue);if(n){e.defaultValue=n[0]}r.parameters[e.name].defaultValue={value:e.defaultValue}}if(e.value){n=i.exec(e.value);if(n){e.value=n[0]}r.parameters[e.name].filter={value:e.value};if(e.isRegularExpression){r.parameters[e.name].filter.format="regexp"}}});return r};D.getSignatureTableData=function(e,t){var a=[];var i={};var n={};var r=e.parameters;for(var s in r){n=r[s];i={};i.editable=t;i.name=s;i.mandatory=n.required;if(n.rename_to){i.rename_to=n.rename_to}else{i.rename_to=n.renameTo}if(t){i.valEnabled=i.mandatory;i.defValEnabled=!i.mandatory}else{i.valEnabled=true;i.defValEnabled=true}if(n.filter){i.value=n.filter.value;if(n.filter.format&&n.filter.format==="regexp"){i.isRegularExpression=true}}if(n.defaultValue){i.defaultValue=n.defaultValue.value}a.push(i)}return a};D.getTranslatedTitle=function(e){if(e.bag){var t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf("display_title_text")>=0){return t.getText("display_title_text")}}if(e.title){return e.title.getTitle()}if(e.preview){return e.preview.getTitle()}return""};D.getTranslatedSubtitle=function(e,t){if(e.bag){var a=e.bag.getBag("tileProperties");if(a.getTextNames().indexOf("display_subtitle_text")>=0){return a.getText("display_subtitle_text")}}if(typeof t.display_subtitle_text==="string"){return t.display_subtitle_text}if(e.preview&&e.preview.getDescription&&e.preview.getDescription()){return e.preview.getDescription()}return""};D.getTranslatedProperty=function(e,t,a){if(e.bag){var i=e.bag.getBag("tileProperties");if(i.getTextNames().indexOf(a)>=0){return i.getText(a)}}return t[a]};D.getActionConfiguration=function(e,t){var a=e.configuration.getParameterValueAsString("tileConfiguration");var i=JSON.parse(a||"{}"),n;if(typeof t==="undefined"){t=e.configurationUi.isEnabled()}if(t){n=D.getResourceBundleModel().getResourceBundle()}i.semantic_object=i.semantic_object||(t?"["+n.getText("configuration.semantic_object")+"]":"");i.semantic_action=i.semantic_action||(t?"["+n.getText("configuration.semantic_action")+"]":"");i.navigation_provider=i.navigation_provider||"";i.navigation_provider_role=i.navigation_provider_role||"";i.navigation_provider_instance=i.navigation_provider_instance||"";i.target_application_id=i.target_application_id||"";i.target_application_alias=i.target_application_alias||"";i.display_info_text=i.display_info_text||"";i.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){i.editable=false}}return i};D.getViewConfiguration=function(e){var t=e.getViewData();var a=t.chip;var i=D.getAppLauncherConfig(a,true,true);return i};D.getConfigurationUi=function(e,t){var a,i,s,l,o;var u=e.getViewData();var p=D.getViewConfiguration(e);var c=new r({config:p,tileModel:e.getModel()});return n.create({type:T.XML,viewData:u,viewName:t}).then(function(t){t.setModel(c);a=t.byId("navigation_semantic_objectInput")||t.byId("semantic_objectInput");if(a){a.getModel().setProperty("/enabled",p.navigation_use_semantic_object);a.getModel().setProperty("/value",p.semantic_object||p.navigation_semantic_object)}i=t.byId("navigation_provider_roleInput");if(i){i.getModel().setProperty("/value",p.navigation_provider_role)}s=t.byId("navigation_provider_instanceInput");if(s){s.getModel().setProperty("/value",p.navigation_provider_instance)}l=t.byId("target_application_aliasInput");if(l){l.getModel().setProperty("/value",p.target_application_alias)}o=t.byId("targetTypeInput");if(o){if(!t.getModel().getProperty("/config/transaction")){t.getModel().setProperty("/config/transaction",{})}if(!t.getModel().getProperty("/config/web_dynpro")){t.getModel().setProperty("/config/web_dynpro",{})}if(e.getModel().getProperty("/config/navigation_provider")==="LPD"){D.displayLpdCustApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WCF"){o.setSelectedKey("WCF");D.displayWCFApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||e.getModel().getProperty("/config/navigation_provider")===""){o.setSelectedKey("SAPUI5");D.displaySapui5ApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="TR"){D.displayTransactionApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WDA"){D.displayWebDynproApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URL"){D.displayURLApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URLT"){D.displayURLTApplicationTypeFields(t);c.setProperty("/config/editable",false);c.setProperty("/config/manualFormFactor",false)}}return t})};D._updateTilePropertiesTexts=function(e,t){var a=t.getTextNames(),i=e.getModel();a.forEach(function(e){i.setProperty("/data/"+e,t.getText(e));i.setProperty("/config/"+e,t.getText(e))})};D._updateTileConfiguration=function(e,t){var a=e.getModel(),i=JSON.parse(t),n;Object.keys(i).forEach(function(e){n=i[e];a.setProperty("/data/"+e,n);a.setProperty("/config/"+e,n);if(e==="navigation_target_url"){a.setProperty("/nav/"+e,n)}})};D.aData=[];D.aActionData=[];D.aRoleData=[];D.aAliasData=[];D.objectSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new o("name",u.Contains,a);r=new o("obj",u.Contains,a);t.push(r);t.push(n);i.filter(new o(t,false))}};D.actionSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n;if(a!==undefined){i=e.getParameter("itemsBinding");n=new o("text",u.Contains,a);t.push(n);i.filter(new o(t,false))}};D.roleSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new o("role",u.Contains,a);r=new o("instance",u.Contains,a);t.push(n);t.push(r);i.filter(new o(t,false))}};D.instanceSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");if(a!==""){l=new o("instance",u.Contains,a);t.push(l)}if(n!==""){s=new o("role",u.EQ,n);t.push(s)}if(t.length>0){r.filter(new o(t,true))}}};D.instanceSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,p,c;r=a.byId("navigation_provider_roleInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){c=new o("instance",u.Contains,n);i.push(c)}if(s!==""){p=new o("role",u.EQ,s);i.push(p)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new o(i,true))}};D.aliasSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,p,c;r=a.byId("navigation_provider_instanceInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){c=new o("alias",u.Contains,n);i.push(c)}if(s!==""){p=new o("instance",u.EQ,s);i.push(p)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new o(i,true))}};D.aliasSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");s=new o("instance",u.EQ,n);if(a!==""){l=new o("alias",u.Contains,a);t.push(l)}t.push(s);r.filter(new o(t,true))}};D.objectSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new o("name",u.Contains,t);a.push(n);i.filter(a)}};D.actionSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new o("text",u.Contains,t);a.push(n);i.filter(a)}};D.roleSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new o("role",u.Contains,t);a.push(n);i.filter(a)}};D.instanceSelectUpdateDialog=function(e,t){var a=[],i,n=e.getBinding("items"),r,s,l;i=e.getCustomData();s=i[0].getValue();if(t!==undefined){r=new o("instance",u.Contains,t);a.push(r)}if(s!==""){l=new o("role",u.EQ,s);a.push(l)}if(a.length>0){n.filter(a,true)}};D.aliasSelectUpdateDialog=function(e,t){var a=[],i,n,r=e.getBinding("items"),s,l;i=e.getCustomData();n=i[0].getValue();if(t!==undefined){l=new o("alias",u.Contains,t);a.push(l)}if(n!==""){s=new o("instance",u.EQ,n);a.push(s)}if(a.length>0){r.filter(a,true)}};D.sSelectedColor=(jQuery(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");D.sDeselectedColor=(jQuery(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");D.iconSelect=function(e,t){e.setColor(t?D.sSelectedColor:D.sDeselectedColor);e.setActiveColor(t?D.sDeselectedColor:D.sSelectedColor)};D.onSelectIcon=function(e,t,a,i){var n=e.getView().getModel(),r;if(t){r=n.getProperty("/config/tile_actions_selected_icon")}else{r=n.getProperty("/config/selected_icon")}if(r){D.iconSelect(r,false)}r=i.getSource();D.iconSelect(r,true);n.setProperty("/config/ok.enabled",true);if(t){n.setProperty("/config/tile_actions_selected_icon",r)}else{n.setProperty("/config/selected_icon",r)}e.byId("selectIconDialog").setTitle(r.getSrc())};D.onSelectIconClose=function(e){e.byId("selectIconDialog").close()};D.onSelectIconOk=function(e,t){var a=e.getModel().getProperty("/config/selected_icon");if(!t){e.getModel().setProperty("/config/display_icon_url",a.getSrc());e.byId("iconInput").setValueState(x.None)}else{a=e.getModel().getProperty("/config/tile_actions_selected_icon");if(a){t.setValue(a.getSrc());t.setValueState(x.None)}}D.onSelectIconClose(e)};D.iconSelectOnValueHelpRequest=function(e,t,a){var n=e.getView().getModel();var r=e.getView().byId("icons");var s=p.getIconCollectionNames();var l=e.getView().byId("selectIconDialog");var o=e.getView().byId("ok");var u,g,d,_,f,b,y,I=false;r.destroyContent();if(a){d=i.byId(t.getParameter("id"));g=d.getValue()}else{g=n.getProperty("/config/display_icon_url")}o.attachEventOnce("press",function(){D.onSelectIconOk(e.getView(),d)});s.sort();s=s.filter(function(e){if(e==="BusinessSuiteInAppSymbols"){I=true;return false}return true});if(I){s.push("BusinessSuiteInAppSymbols")}for(f=0;f<s.length;f+=1){_=p.getIconNames(s[f]);_.sort();for(b=0;b<_.length;b+=1){y=p.getIconURI(_[b],s[f]);r.addContent(new c({height:"38px",press:D.onSelectIcon.bind(null,e,a,d),size:"2rem",src:y,tooltip:y,width:"38px"}))}}u=r.getContent();n.setProperty("/config/ok.enabled",false);l.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(f=0;f<u.length;f+=1){if(u[f].getSrc()===g){if(a){n.setProperty("/config/tile_actions_selected_icon",u[f])}else{n.setProperty("/config/selected_icon",u[f])}D.iconSelect(u[f],true);n.setProperty("/config/ok.enabled",true);l.setTitle(g)}else{D.iconSelect(u[f],false)}}l.open()};D.objectSelectOnValueHelpRequest=function(e,t,a){var n=e.getView();var s=D.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object");var l;var o;var u=new r;var p=new g("semantic_object_select_dialog",{title:s,search:D.objectSelectDoSearch,liveChange:D.objectSelectDoSearch}),c=new d({title:"{obj}"});if(a){l=i.byId(t.getParameter("id"))}else{l=n.byId("semantic_objectInput")||n.byId("navigation_semantic_objectInput")}o=l.getValue();p.open(o);u.setData(e.aDefaultObjects.concat(D.aData));p.bindAggregation("items","/",c);p.setModel(u);D.objectSelectUpdateDialog(p,o);p.attachCancel(function(e){l.setValue(o);if(!a){l.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){l.setValue(t.getTitle());if(!a){l.fireChange()}}p.destroy();p=null})};D.actionSelectOnValueHelpRequest=function(e,t,a){var n=e.getView();var s=D.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action");var l;var o;var u=new r;var p=new g("semantic_action_select_dialog",{title:s,search:D.actionSelectDoSearch,liveChange:D.actionSelectDoSearch}),c=new d({title:"{text}"});if(a){l=i.byId(t.getParameter("id"))}else{l=n.byId("semantic_actionInput")||n.byId("navigation_semantic_actionInput")}o=l.getValue();p.open(o);u.setData(D.aActionData);p.bindAggregation("items","/items",c);p.setModel(u);D.actionSelectUpdateDialog(p,o);p.attachCancel(function(e){l.setValue(o);if(!a){l.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){l.setValue(t.getTitle());if(!a){l.fireChange();l.fireLiveChange({newValue:t.getTitle()})}}p.destroy();p=null})};D.roleSelectOnValueHelpRequest=function(e){var t=e.getView(),a=D.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),i,n,s,l=new r,o=new f("role_select_dialog",{title:a,search:D.roleSelectDoSearch,liveChange:D.roleSelectDoSearch,columns:[new b({header:[new _({text:D.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new b({header:[new _({text:D.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),u=new y({cells:[new _({text:"{role}"}),new _({text:"{instance}"})]});i=t.byId("navigation_provider_roleInput");n=t.byId("navigation_provider_instanceInput");s=i.getValue();o.open(s);l.setData(e.aDefaultObjects.concat(D.aRoleData));o.bindAggregation("items","/",u);o.setModel(l);D.roleSelectUpdateDialog(o,s);o.attachCancel(function(e){i.setValue(s);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getCells()[0].getText());n.setValue(t.getCells()[1].getText());i.fireChange();n.fireChange()}o.destroy();o=null})};D.instanceSelectOnValueHelpRequest=function(e){var t=e.getView();var a;var i=D.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance");var n;var s;var l=new r;var o=new g("instance_select_dialog",{title:i,search:D.instanceSelectDoSearch,liveChange:D.instanceSelectDoSearch}),u=new d({title:"{instance}"});n=t.byId("navigation_provider_instanceInput");s=n.getValue();a=t.byId("navigation_provider_roleInput").getValue();o.addCustomData(new I({key:"role",value:a}));o.open(s);l.setData(e.aDefaultObjects.concat(D.aRoleData));o.bindAggregation("items","/",u);o.setModel(l);D.instanceSelectUpdateDialog(o,s);o.attachCancel(function(e){n.setValue(s);n.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){n.setValue(t.getTitle());n.fireChange()}o.destroy();o=null})};D.applicationAliasSelectOnValueHelpRequest=function(e){var t=e.getView();var a=D.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias");var i;var n;var s;var l=new r;var o=new g("alias_select_dialog",{title:a,search:D.aliasSelectDoSearch,liveChange:D.aliasSelectDoSearch}),u=new d({title:"{alias}"});i=t.byId("target_application_aliasInput");n=i.getValue();s=t.byId("navigation_provider_instanceInput").getValue();o.addCustomData(new I({key:"instance",value:s}));o.open(n);l.setData(e.aDefaultObjects.concat(D.aAliasData));o.bindAggregation("items","/",u);o.setModel(l);D.aliasSelectUpdateDialog(o,n);o.attachCancel(function(e){i.setValue(n);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getTitle());i.fireChange()}o.destroy();o=null})};D.onTargetTypeChange=function(e){var t=e.getParameter("id");var a=i.byId(t).getParent().getCells();var n=e.getSource().getSelectedKey();if(n==="INT"){a[3].setEnabled(true);a[2].setShowValueHelp(true);a[2].setValue("")}else{a[2].setShowValueHelp(false);a[2].setValue("");a[3].setEnabled(false);a[3].setValue("")}};D.addTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=this.getEmptyTileActionsRowObj();a.push(i);t.setProperty("/config/tile_actions_rows",a)};D.deleteTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=e.byId("tileActions");var n=i.getSelectedIndices();var r=n.sort(function(e,t){return t-e}).slice();for(var s=0;s<r.length;s++){i.removeSelectionInterval(r[s],r[s]);a.splice(r[s],1)}t.setProperty("/config/tile_actions_rows",a)};D.checkInput=function(e,t){var a=D.getResourceBundleModel().getResourceBundle(),i=e.byId("iconInput"),n=e.byId("useLpdCheckbox"),r=e.byId("navigation_semantic_objectInput")||e.byId("semantic_objectInput"),s=e.byId("navigation_semantic_actionInput")||e.byId("semantic_actionInput"),l=x.None,o=null,u=String(t.getParameter("newValue")||"").trim();switch(t.getSource()){case i:if(u!==""&&u.substring(0,11)!=="sap-icon://"){l=x.Error;o=a.getText("configuration.display_icon_url.warning")}break;case n:if(!n.getSelected()){s.setValueState(x.None);r.setValueState(x.None)}break;case r:if(/[-#&? ]/.test(u)){l=x.Error;o=a.getText("configuration.semantic_object.error_invalid_chars")}else if(u===""){l=x.Error}break;case s:if(/[-#&? ]/.test(u)){l=x.Error;o=a.getText("configuration.semantic_action.error_invalid_chars")}else if(u===""){l=x.Error}break;default:break}if(l){t.getSource().setValueState(l);if(o!==null){t.getSource().setValueStateText(o||"")}}};D.checkInputOnSaveConfig=function(e){var t=e.byId("iconInput");var a=e.byId("navigation_semantic_objectInput");var i=e.byId("navigation_semantic_actionInput");var n=e.byId("useLpdCheckbox");var r=D.getResourceBundleModel().getResourceBundle();var s=false;if(t.getValue()!==""&&!D.isIconURIValid(t.getValue())){t.setValueState(x.Error);t.setValueStateText(r.getText("configuration.display_icon_url.warning"));s=true}if(n.getSelected()&&/[-#&? ]/.test(a.getValue())){a.setValueState(x.Error);a.setValueStateText(r.getText("configuration.semantic_object.error_invalid_chars"));s=true}else if(n.getSelected()&&a.getValue()===""){a.setValueState(x.Error);s=true}if(/[-#&? ]/.test(i.getValue())){i.setValueState(x.Error);i.setValueStateText(r.getText("configuration.semantic_action.error_invalid_chars"));s=true}else if(n.getSelected()&&i.getValue()===""){i.setValueState(x.Error);s=true}return s};D.checkTileActions=function(e){var t=e.getModel().getProperty("/config/tile_actions_rows");var a=D.getResourceBundleModel().getResourceBundle();var i=false;for(var n=0;n<t.length;n++){if(!t[n].menu_title&&(t[n].navigation_target||t.length>1)){t[n].valueState=x.Error;i=true}else{t[n].valueState=x.None}if(t[n].icon){if(!D.isIconURIValid(t[n].icon)){t[n].iconValueState=x.Error;t[n].iconValueStateText=a.getText("configuration.display_icon_url.warning");i=true}}}e.getModel().setProperty("/config/tile_actions_rows",t);return i};D.isIconURIValid=function(e){var t=[];var a="";var i="";var n="";t=/sap-icon:\/\/(.+)\//.exec(e);if(t){a=t[1];t=/\/\/.+\/(.+)/.exec(e);if(t){i=t[1]}else{i=""}n=p.getIconURI(i,a);if(n!==e){return false}}else{t=/sap-icon:\/\/(.+)/.exec(e);if(t){i=t[1];if(!p.getIconInfo(i)){return false}}else{return false}}return true};D.checkTMInput=function(e,t){var a=D.getResourceBundleModel().getResourceBundle(),i=e.byId("semantic_objectInput"),n=e.byId("semantic_actionInput"),r=e.byId("target_application_descriptionInput"),s=e.byId("target_application_urlInput"),l=e.byId("target_application_componentInput"),o=e.byId("navigation_provider_roleInput"),u=e.byId("navigation_provider_instanceInput"),p=e.byId("target_application_aliasInput"),c=e.byId("target_application_idInput"),g=String(t.getParameter("newValue")||"").trim(),d=x.None,_=null;switch(t.getSource()){case i:if(/[-#&? ]/.test(g)){d=x.Error;_=a.getText("configuration.semantic_object.error_invalid_chars")}if(n.getValue()===""){n.setValueState(x.Error)}break;case n:if(/[-#&? ]/.test(g)){d=x.Error;_=a.getText("configuration.semantic_action.error_invalid_chars")}else if(g===""){d=x.Error}break;case r:if(g===""){d=x.Error}break;case s:if(g!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(g)){d=x.Error;_=a.getText("configuration.target_application.url.error_invalid_chars")}break;case l:if(g===""){d=x.Error}else if(g.substring(0,17)==="SAPUI5.Component="){d=x.Error;_=a.getText("configuration.target_application.component.error_invalid_input")}break;case o:if(g===""){d=x.Error}else if(!/^[\w/]+$/.test(g)){d=x.Error;_=a.getText("configuration.target_application.role.error_invalid_chars")}break;case u:if(g===""){d=x.Error}else if(!/^[\w/]+$/.test(g)){d=x.Error;_=a.getText("configuration.target_application.instance.error_invalid_chars")}break;case p:if(g===""&&c.getValue()===""){d=x.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&c.getValue()!==""){d=x.Error;_=a.getText("configuration.target_application.alias_id.warning");c.setValueState(d);c.setValueStateText(_)}else{c.setValueState(x.None)}break;case c:if(g===""&&p.getValue()===""){d=x.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&p.getValue()!==""){d=x.Error;_=a.getText("configuration.target_application.alias_id.warning");p.setValueState(d);p.setValueStateText(_)}else if(g!==""&&!/^[A-Fa-f0-9]+$/.test(g)){d=x.Error;_=a.getText("configuration.target_application.alias_id.error_invalid_chars")}else{p.setValueState(x.None)}break;default:break}if(d){t.getSource().setValueState(d);if(_!==null){t.getSource().setValueStateText(_||"")}}};D.checkTMInputOnSaveConfig=function(e){var t=D.getResourceBundleModel().getResourceBundle();var a=e.byId("semantic_objectInput");var i=e.byId("semantic_actionInput");var n=e.byId("target_application_descriptionInput");var r=e.byId("target_application_urlInput");var s=e.byId("target_application_componentInput");var l=e.byId("navigation_provider_roleInput");var o=e.byId("navigation_provider_instanceInput");var u=e.byId("target_application_aliasInput");var p=e.byId("target_application_idInput");var c=e.byId("targetTypeInput");var g=e.byId("target_transactionInput");var d=e.byId("target_web_dynpro_applicationInput");var _=e.byId("target_wcf_application_idInput");var f=e.byId("desktopCB");var b=e.byId("tabletCB");var y=e.byId("phoneCB");var I=false;a.setValue(a.getValue().trim());if(/[-#&? ]/.test(a.getValue())){a.setValueState(x.Error);a.setValueStateText(t.getText("configuration.semantic_object.error_invalid_chars"));I=true}i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(x.Error);i.setValueStateText(t.getText("configuration.semantic_action.error_invalid_chars"));I=true}else if(i.getValue()===""){i.setValueState(x.Error);I=true}var v=e.getModel().getProperty("/config/navigation_provider"),m;if(v==="SAPUI5"){if(n.getValue()===""){n.setValueState(x.Error);I=true}if(r.getValue()!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(x.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}if(s.getValue()===""){s.setValueState(x.Error);I=true}else if(s.getValue().substring(0,17)==="SAPUI5.Component="){s.setValueState(x.Error);s.setValueStateText(t.getText("configuration.target_application.component.error_invalid_input"));I=true}}else if(v==="LPD"){if(l.getValue()===""){l.setValueState(x.Error);I=true}if(!/^[\w]+$/.test(l.getValue())){l.setValueState(x.Error);m=t.getText("configuration.target_application.role.error_invalid_chars");l.setValueStateText(m);I=true}if(o.getValue()===""){o.setValueState(x.Error);I=true}if(!/^[\w]+$/.test(o.getValue())){o.setValueState(x.Error);m=t.getText("configuration.target_application.instance.error_invalid_chars");o.setValueStateText(m);I=true}if(u.getValue()===""&&p.getValue()===""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(x.Error);u.setValueStateText(m);p.setValueState(x.Error);p.setValueStateText(m);I=true}if(u.getValue()!==""&&p.getValue()!==""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(x.Error);u.setValueStateText(m);p.setValueState(x.Error);p.setValueStateText(m);I=true}if(p.getValue()!==""&&!/^[A-Fa-f0-9]+$/.test(p.getValue())){p.setValueState(x.Error);p.setValueStateText(t.getText("configuration.target_application.alias_id.error_invalid_chars"));I=true}}else if(v==="TR"){if(g.getValue()===""){g.setValueState(x.Error);I=true}}else if(v==="WDA"){if(d.getValue()===""){d.setValueState(x.Error);I=true}}else if(v==="WCF"){if(_.getValue()===""){_.setValueState(x.Error);I=true}}else if(v==="URL"){if(r.getValue()===""){r.setValueState(x.Error);I=true}else if(!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(x.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}}else{c.setValueState(x.Error);c.setValueStateText(t.getText("configuration.navigation_provider.error_invalid_provider"));I=true}if(!f.getSelected()&&!b.getSelected()&&!y.getSelected()){m=t.getText("configuration.form_factor.warning");f.setValueState(x.Error);f.setValueStateText(m);b.setValueState(x.Error);b.setValueStateText(m);y.setValueState(x.Error);y.setValueStateText(m);I=true}return I};D.updateTooltipForDisabledProperties=function(e){var t=e.getModel();var a=t.getProperty("/config/isLocaleSuitable");if(!a){var i=D.getResourceBundleModel().getResourceBundle();var n=i.getText("edit_configuration.original_locale_not_fit_tooltip",[t.getProperty("/config/userLocale"),t.getProperty("/config/orgLocale")]);e.byId("titleInput").setTooltip(n);e.byId("subtitleInput").setTooltip(n);e.byId("keywordsInput").setTooltip(n);e.byId("infoInput").setTooltip(n)}};D.updateMessageStripForOriginalLanguage=function(e){var t=e.getModel();if(t.getProperty("/config/isLocaleSuitable")===false){var a=D.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[t.getProperty("/config/orgLocale").toUpperCase(),t.getProperty("/config/userLocale").toUpperCase()]);var i=e.byId("messageStrip");i.setVisible(true);i.setText(a);i.setType(S.Warning)}};D.createSemanticObjectModel=function(e,t,i){var n=e.getView(),s="/sap/opu/odata/UI2/INTEROP/SemanticObjects",l=[{obj:"",name:""},{obj:"*",name:"*"}],o=(i||l).slice(0),u=new r;u.setSizeLimit(999999);u.setProperty("/value","");u.setProperty("/enabled",true);t.bindAggregation("suggestionItems","suggest>/items",new v({text:"{suggest>obj}"}));t.setModel(u,"suggest");if(D.aData.length>0){setTimeout(function(){u.setData({items:o.concat(D.aData)},true)},0);return}a.read({requestUri:s,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].id;a=e.results[i].text;D.aData.push({obj:t,name:a||t})}u.setData({items:o.concat(D.aData)},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}h.error("Could not fetch data: "+s+": "+t,null,n.getViewName()||"sap.ushell.components.tiles.utils")})};D.createRoleModel=function(e,t,i){var n=e.getView(),s="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",l=new r,o=new r;l.setSizeLimit(999999);o.setSizeLimit(999999);l.setProperty("/value","");l.setProperty("/enabled",true);o.setProperty("/value","");o.setProperty("/enabled",true);var u=new y({cells:[new m({text:"{role}"}),new m({text:"{instance}"})]});t.bindAggregation("suggestionRows","/items",u);i.bindAggregation("suggestionItems","/items",new v({text:"{instance}"}));i.setModel(o);t.setModel(l);t.attachSuggestionItemSelected(function(e){i.setValue(e.getParameter("selectedRow").getCells()[1].getText());i.fireChange()});if(D.aRoleData.length>0){l.setData({items:D.aRoleData},false);o.setData({items:D.aRoleData},false);return}a.read({requestUri:s,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].lpdRole;a=e.results[i].instance;D.aRoleData.push({role:t,instance:a})}l.setData({items:D.aRoleData},true);o.setData({items:D.aRoleData},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}h.error("Could not fetch data: "+s+": "+t,null,n.getViewName()||"sap.ushell.components.tiles.utils")})};D.createAliasModel=function(e,t){var i=e.getView(),n,s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",l=new r;l.setSizeLimit(999999);l.setProperty("/value","");l.setProperty("/enabled",true);t.bindAggregation("suggestionItems","/items",new v({text:"{alias}"}));t.setModel(l);n=D.getAppLauncherConfig(i.oViewData.chip,true,true);if(n&&n.navigation_provider_role&&n.navigation_provider_instance){if(n.navigation_provider_role!==""&&n.navigation_provider_instance!==""){s=s+"?role='"+n.navigation_provider_role+"'&instance='"+n.navigation_provider_instance+"'"}}a.read({requestUri:s,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;D.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;D.aAliasData.push({role:a,instance:i,alias:t})}r=l.getData();if(r){r.items=D.aAliasData}else{r={items:D.aAliasData}}l.setData(r,false)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}h.error("Could not fetch data: "+s+": "+t,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};D.updateAliasModel=function(e,t){var i,n,r,s=t.getModel();n=e.byId("navigation_provider_instanceInput").getValue();r=e.byId("navigation_provider_roleInput").getValue();i="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+r+"'&instance='"+n+"'";a.read({requestUri:i,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;D.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;D.aAliasData.push({role:a,instance:i,alias:t})}r=s.getData();if(r){r.items=D.aAliasData}else{r={items:D.aAliasData}}s.setData(r,false)},function(t){var a=t&&t.message?t.message:t;if(t.response){a+=" - "+t.response.statusCode+" "+t.response.statusText}h.error("Could not fetch data: "+i+": "+a,null,e.getViewName()||"sap.ushell.components.tiles.utils")})};D.createActionModel=function(e,t){var a=new r;var i=e.getView(),n,s;a.setData({items:[{text:"display"},{text:"approve"},{text:"displayFactSheet"},{text:"manage"},{text:"create"},{text:"monitor"},{text:"track"},{text:"change"},{text:"register"},{text:"release"},{text:"analyzeKPIDetails"},{text:"lookup"},{text:"manageLineItems"}]});D.aActionData=a.getData();n=D.getAppLauncherConfig(i.oViewData.chip,true,true);s=n.navigation_semantic_action||n.semantic_action;if(s){if(!a.getData().items.some(function(e){return e.text===s})){a.getData().items.push({text:s})}}t.bindAggregation("suggestionItems","items>/items",new v({text:"{items>text}"}));t.setModel(a,"items");t.getBinding("suggestionItems").sort(new V("text",false))};D.createNavigationProviderModel=function(e,t){var a=new r;var i=D.getResourceBundleModel().getResourceBundle();var n=[{key:"SAPUI5",text:i.getText("configuration.target_application.sapui5")},{key:"LPD",text:i.getText("configuration.target_application.lpd_cust")},{key:"TR",text:i.getText("configuration.target_application.transaction")},{key:"WDA",text:i.getText("configuration.target_application.web_dynpro")},{key:"URL",text:i.getText("configuration.target_application.url")}];var s=D.getViewConfiguration(e.getView()).navigation_provider;if(s==="WCF"){n.push({key:"WCF",text:i.getText("configuration.target_application.wcf")})}else if(s==="URLT"){n.push({key:"URLT",text:i.getText("configuration.target_application.urlt")})}a.setData({items:n});t.bindItems("items>/items",new v({key:"{items>key}",text:"{items>text}"}));t.setModel(a,"items");t.getBinding("items").sort(new V("text",false))};D.displayApplicationTypeFields=function(e,t){switch(e){case"LPD":D.displayLpdCustApplicationTypeFields(t);break;case"SAPUI5":D.displaySapui5ApplicationTypeFields(t);break;case"TR":D.displayTransactionApplicationTypeFields(t);break;case"WDA":D.displayWebDynproApplicationTypeFields(t);break;case"URL":D.displayURLApplicationTypeFields(t);break;case"WCF":D.displayWCFApplicationTypeFields(t);break;case"URLT":D.displayURLTApplicationTypeFields(t);break}};D.displayWCFApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(true);e.byId("target_wcf_application_idInput").setVisible(true);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};D.displaySapui5ApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(true);e.byId("target_application_componentInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};D.displayLpdCustApplicationTypeFields=function(e){e.byId("application_description").setVisible(false);e.byId("target_application_descriptionInput").setVisible(false);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(true);e.byId("navigation_provider_roleInput").setVisible(true);e.byId("navigation_provider_instance").setVisible(true);e.byId("navigation_provider_instanceInput").setVisible(true);e.byId("target_application_alias").setVisible(true);e.byId("target_application_aliasInput").setVisible(true);e.byId("target_application_id").setVisible(true);e.byId("target_application_idInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(true)};D.displayTransactionApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(true);e.byId("target_transactionInput").setVisible(true);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};D.displayWebDynproApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(true);e.byId("target_web_dynpro_applicationInput").setVisible(true);e.byId("target_web_dynpro_configuration").setVisible(true);e.byId("target_web_dynpro_configurationInput").setVisible(true);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};D.displayURLApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};D.displayURLTApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(true);e.byId("urlt_application_componentInput").setVisible(true);e.byId("target_urlt_system_alias").setVisible(true);e.byId("target_urlt_system_aliasInput").setVisible(true);e.byId("application_type_deprecated").setVisible(false)};D.getAppLauncherConfig=function(e,t,a){var n;var r=e.configuration.getParameterValueAsString("tileConfiguration");var s;try{s=JSON.parse(r||"{}")}catch(e){h.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utils");return{}}s.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){s.editable=false}}var l=D.getTranslatedTitle(e);var o=D.getTranslatedSubtitle(e,s);var u=D.getTranslatedProperty(e,s,"display_info_text");var p=D.getTranslatedProperty(e,s,"display_search_keywords");if(t){n=D.getResourceBundleModel().getResourceBundle();if(a&&e.bag){var c=e.bag.getOriginalLanguage();var g=i.getConfiguration().getLocale().getSAPLogonLanguage();var d=i.getConfiguration().getLanguage();s.isLocaleSuitable=c===""||c.toLowerCase()===g.toLowerCase()||c.toLowerCase()===d.toLowerCase();s.orgLocale=c;s.userLocale=g}}s.display_icon_url=s.display_icon_url||"";if(u!==undefined){s.display_info_text=u}else if(s.display_info_text===undefined){if(t&&!a){s.display_info_text="["+n.getText("configuration.display_info_text")+"]"}else{s.display_info_text=""}}s.navigation_semantic_object=s.navigation_semantic_object||"";s.navigation_semantic_action=s.navigation_semantic_action||"";s.navigation_semantic_parameters=s.navigation_semantic_parameters||"";s.display_number_unit=s.display_number_unit||"";s.display_number_factor=s.display_number_factor||"";s.service_refresh_interval=s.service_refresh_interval?parseInt(s.service_refresh_interval,10):0;s.service_url=s.service_url||"";s.navigation_target_url=s.navigation_target_url||"";if(t&&D.isInitial(l)){s.display_title_text=a?"":"["+n.getText("configuration.display_title_text")+"]";s.display_subtitle_text=a?"":"["+n.getText("configuration.display_subtitle_text")+"]"}else{s.display_title_text=l||s.display_title_text||"";if(o!==undefined){s.display_subtitle_text=o}else if(s.display_subtitle_text===undefined){s.display_subtitle_text=""}}s.navigation_use_semantic_object=s.navigation_use_semantic_object!==false;s.display_search_keywords=p||s.display_search_keywords||"";if(t){s.display_number_value=s.display_number_value||1234}s.form_factors=s.form_factors?s.form_factors:D.getDefaultFormFactors();s.desktopChecked=s.form_factors.manual.desktop;s.tabletChecked=s.form_factors.manual.tablet;s.phoneChecked=s.form_factors.manual.phone;s.manualFormFactor=!s.form_factors.appDefault&&s.editable;s.appFormFactor=s.form_factors.appDefault;s.formFactorConfigDefault=!!s.form_factors.defaultParam;if(s.signature){s.rows=D.getSignatureTableData(s.signature,a&&s.editable)}else{s.rows=s.mapping_signature&&s.mapping_signature!=="*=*"?D.getMappingSignatureTableData(s.mapping_signature,a&&s.editable):[D.getEmptyRowObj(s.editable)]}if(s.signature){s.isUnknownAllowed=s.signature.additional_parameters==="allowed"||s.signature.additionalParameters==="allowed"}else{s.isUnknownAllowed=s.mapping_signature!==undefined?D.getAllowUnknownParametersValue(s.mapping_signature):true}if(t){s.tile_actions_rows=D.getTileNavigationActionsRows(e,s.editable)}else if(!s.actions){s.actions=D.getTileNavigationActions(e)}if(t){var _=e.bag.getBag("deprecationProperties"),f=_.getProperty("deprecation"),b=null;if(f){b=n.getText(f==="D"?"configuration.app_deprecated":"configuration.app_archived",[_.getProperty("successor")])}s.deprecation_text=b}return s};D.getDataToDisplay=function(e,t){var a=0,i,n,r,s,l={display_icon_url:t.icon||e.display_icon_url||"",display_title_text:t.title||e.display_title_text||"",display_number_value:!isNaN(t.number)?t.number:"...",display_number_unit:t.numberUnit||e.display_number_unit||"",display_info_text:t.info||e.display_info_text||"",display_info_state:t.infoState||"Neutral",display_subtitle_text:t.subtitle||e.display_subtitle_text||"",display_state_arrow:t.stateArrow||"None",display_number_state:t.numberState||"None",display_number_digits:t.numberDigits>=0?t.numberDigits:4,display_number_factor:t.numberFactor||"",display_search_keyword:t.keywords||e.display_search_keyword||"",targetParams:[]};if(t.infoStatus){l.display_info_state=t.infoStatus}if(t.targetParams){l.targetParams.push(t.targetParams)}if(t.results){for(i=0,n=t.results.length;i<n;i=i+1){r=t.results[i].number||0;if(typeof r==="string"){r=parseFloat(r)}a=a+r;s=t.results[i].targetParams;if(s){l.targetParams.push(s)}}l.display_number_value=a}if(!isNaN(t.number)){if(typeof t.number==="string"){t.number=t.number.trim()}if(t.number===""){l.display_number_value="..."}else{var o=this._shouldProcessDigits(t.number,t.numberDigits),u=l.display_icon_url?4:5;if(t.number&&t.number.toString().length>=u||o){var p=this._normalizeNumber(t.number,u,t.numberFactor,t.numberDigits);l.display_number_factor=p.numberFactor;l.display_number_value=p.displayNumber}else{var c=w.getFloatInstance({maxFractionDigits:u});l.display_number_value=c.format(t.number)}}}if(l&&l.display_number_state){switch(l.display_number_state){case"Positive":l.display_number_state="Good";break;case"Negative":l.display_number_state="Error";break}}return l};D._normalizeNumber=function(e,t,a,i){var n;if(isNaN(e)){n=e}else{var r=w.getFloatInstance({maxFractionDigits:i});if(!a){var s=Math.abs(e);if(s>=1e9){a="B";e/=1e9}else if(s>=1e6){a="M";e/=1e6}else if(s>=1e3){a="K";e/=1e3}}n=r.format(e)}var l=n;var o=l[t-1];t-=o==="."||o===","?1:0;l=l.substring(0,t);return{displayNumber:l,numberFactor:a}};D._shouldProcessDigits=function(e,t){var a;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){a=e.split(".")[1].length;if(a>t){return true}}return false};D.getTileSettingsAction=function(e,t,a){var i=D.getResourceBundleModel().getResourceBundle();var n=!a||a==="tile"?"tileSettingsBtn":"linkSettingsBtn";return{id:n,text:i.getText(n),press:function(){return new Promise(function(n){sap.ui.require(["sap/m/Button","sap/m/Dialog","sap/ui/core/mvc/View","sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout"],function(s,l,o,u,p){var c={showGroupSelection:false,title:e.getProperty("/config/display_title_text"),subtitle:e.getProperty("/config/display_subtitle_text")};if(!a||a==="tile"){c.info=e.getProperty("/config/display_info_text");c.icon=e.getProperty("/config/display_icon_url");c.keywords=e.getProperty("/config/display_search_keywords")}else if(a==="link"){c.showInfo=false;c.showIcon=false;c.showPreview=false}o.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view"}).then(function(e){var o=new r(c);e.setModel(o);var g=new u({id:"tileSettings",layout:p.GridLayout,content:[e]}).addStyleClass("sapUshellAddBookmarkForm");var d=new s("bookmarkOkBtn",{text:i.getText("okBtn"),type:P.Emphasized,press:function(){t(e);b.close()},enabled:true});var _=new s("bookmarkCancelBtn",{text:i.getText("cancelBtn"),press:function(){b.close()}});var f=function(e){d.setEnabled(!!e.trim())};e.getTitleInput().attachLiveChange(function(){f(this.getValue())});var b=new l({id:"settingsDialog",title:!a||a==="tile"?i.getText("tileSettingsDialogTitle"):i.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:g,beginButton:d,endButton:_,horizontalScrolling:false,afterClose:function(){b.destroy()}}).addStyleClass("sapContrastPlus");b.open();n(b)})})})}}};D.getSemanticNavigationUrl=function(e){var t="#"+String(e.navigation_semantic_object||"").trim();t+="-"+String(e.navigation_semantic_action||"").trim();if(e.navigation_semantic_parameters&&String(e.navigation_semantic_parameters||"").trim().length>0){t+="?"+String(e.navigation_semantic_parameters||"").trim()}return t};D.addParamsToUrl=function(e,t){var a="",i=e.indexOf("?")!==-1,n=t.targetParams,r;if(n&&n.length>0){for(r=0;r<n.length;r=r+1){a+=n[r];if(r<n.length-1){a+="&"}}}if(a.length>0){if(!i){e+="?"}else{e+="&"}e+=a}return e};return D},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/visualizationOrganizer/Component", ["sap/m/library","sap/m/GroupHeaderListItem","sap/ushell/library","sap/ui/core/UIComponent","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/base/Log","sap/ushell/Config","sap/ushell/resources","sap/m/MessageBox"],function(e,t,i,n,a,s,r,o,l,u,g){"use strict";var d=e.ButtonType;var c=i.ContentNodeType;return n.extend("sap.ushell.components.visualizationOrganizer.Component",{metadata:{version:"1.115.1",library:"sap.ushell",dependencies:{libs:["sap.m"]},properties:{pressed:{type:"boolean",group:"Misc",defaultValue:false}}},init:function(){n.prototype.init.apply(this,arguments);this.aPersonalizablePages=[];this.mVizIdInPages=new Map;this.stVizIdInSection=new Set},requestData:function(){var e=!l.last("/core/shell/enablePersonalization")&&l.last("/core/spaces/myHome/enabled");var t=l.last("/core/spaces/myHome/myHomePageId");return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getAllPages()}).then(function(i){if(e){i=i.filter(function(e){return e.identification.id===t})}this.aPersonalizablePages=i.map(function(e){return{id:e.identification.id,title:e.identification.title}});this._fillVizIdMaps(i);return this.aPersonalizablePages}.bind(this))},_fillVizIdMaps:function(e){this.mVizIdInPages=new Map;e.forEach(function(e){Object.keys(e.payload.sections).forEach(function(t){Object.keys(e.payload.sections[t].viz).forEach(function(i){var n=e.payload.sections[t].viz[i].vizId;if(this.mVizIdInPages.has(n)){this.mVizIdInPages.get(n).add(e.identification.id)}else{this.mVizIdInPages.set(n,new Set([e.identification.id]))}}.bind(this))}.bind(this))}.bind(this))},isVizIdPresent:function(e,t){if(t){return this.stVizIdInSection.has(e)}var i=this.mVizIdInPages.get(e);return!!(i&&i.size)},formatPinButtonIcon:function(e,t){return this.isVizIdPresent(decodeURIComponent(e),t)?"sap-icon://accept":"sap-icon://add"},formatPinButtonType:function(e,t){return this.isVizIdPresent(decodeURIComponent(e),t)?d.Emphasized:d.Default},formatPinButtonTooltip:function(e,t){var i=this.isVizIdPresent(decodeURIComponent(e),!!t);if(!t&&i){return u.i18n.getText("EasyAccessMenu_PinButton_Toggled_Tooltip")}if(!t&&!i){return u.i18n.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip")}if(t.sectionID&&i){return u.i18n.getText("VisualizationOrganizer.Button.Tooltip.RemoveFromSection")}if(t.sectionID&&!i){return u.i18n.getText("VisualizationOrganizer.Button.Tooltip.AddToSection")}if(!t.sectionID&&i){return u.i18n.getText("VisualizationOrganizer.Button.Tooltip.RemoveFromPage",t.pageTitle)}return u.i18n.getText("VisualizationOrganizer.Button.Tooltip.AddToPage",t.pageTitle)},onTilePinButtonClick:function(e,t){var i=e.getSource();var n=i.getBindingContext().getProperty();if(i.getBusy()){return Promise.resolve()}if(t){i.setBusy(true);return this._applyOrganizationChangeToSection(i,n,t).then(function(){i.setBusy(false)})}if(this.aPersonalizablePages.length===1){i.setBusy(true);return this._applyChangeToPage(i,n,this.aPersonalizablePages[0]).then(function(){i.setBusy(false)})}return this.toggle(i,n)},open:function(e,t){var i=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");var n=Promise.resolve();if(!i){n=new Promise(function(e,t){sap.ui.require(["sap/ui/core/Fragment"],function(i){i.load({name:"sap.ushell.components.visualizationOrganizer.VisualizationOrganizerPopover",type:"XML",controller:this}).then(e).catch(t)}.bind(this))}.bind(this)).then(function(e){i=e;i.setModel(new r({pages:[],searchTerm:""}));i.setModel(u.i18nModel,"i18n")})}return n.then(function(){this.oOpenBy=e;this.sVisualizationId=decodeURIComponent(t.id);this.sVisualizationTitle=t.title;this.oVizInfo=t;this.fnResetPopup=this._resetPopup.bind(this);i.attachAfterClose(this.fnResetPopup);return Promise.all([sap.ushell.Container.getServiceAsync("Menu"),sap.ushell.Container.getServiceAsync("Pages")]).then(function(e){var i;var n=e[0];var a=e[1];if(t.isBookmark){i=a._findBookmarks({url:t.url}).then(function(e){var t=e.map(function(e){return e.pageId});return Promise.resolve(new Set(t))})}else{i=this.mVizIdInPages.get(this.sVisualizationId)}return Promise.all([n.getContentNodes([c.Space,c.Page]),i])}.bind(this)).then(function(t){var n=t[0];var a=t[1];var s=!l.last("/core/shell/enablePersonalization")&&l.last("/core/spaces/myHome/enabled");var r=l.last("/core/spaces/myHome/myHomeSpaceId");var o=[];n=this._filterPersonalizableContentNodes(n);n.forEach(function(e){if(s&&e.id!==r){return}e.children.forEach(function(t){if(!this._isPersonalizablePage(t.id)){return}o.push({id:t.id,title:t.label,space:e.label,spaceId:e.id,selected:a&&a.has(t.id)})}.bind(this))}.bind(this));var u=i.getModel();u.setProperty("/pages",o);u.setProperty("/pinnedPages",a);this._updatePagesList();i.openBy(e)}.bind(this))}.bind(this))},_filterPersonalizableContentNodes:function(e){if(!Array.isArray(e)){return[]}return e.reduce(function(e,t){t.children=this._filterPersonalizableContentNodes(t.children);if(t.type===c.HomepageGroup||t.type===c.Space||t.type===c.Page&&t.isContainer){e.push(t)}return e}.bind(this),[])},cancel:function(){var e=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");var t=this._retrieveChangedPageIds();if(e&&t.deleteFromPageIds.length===0&&t.addToPageIds.length===0){e.close()}else{g.show(u.i18n.getText("VisualizationOrganizer.MessageBox.Description"),{id:"sapUshellVisualizationOrganizerDiscardDialog",title:u.i18n.getText("VisualizationOrganizer.MessageBox.Title"),actions:[u.i18n.getText("VisualizationOrganizer.MessageBox.ActionDiscard"),g.Action.CANCEL],emphasizedAction:u.i18n.getText("VisualizationOrganizer.MessageBox.ActionDiscard"),onClose:function(t){if(t===u.i18n.getText("VisualizationOrganizer.MessageBox.ActionDiscard")){e.close()}}})}},toggle:function(e,t){var i=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(i&&i.isOpen()&&i._oOpenBy&&i._oOpenBy.getId()===e.getId()){this.cancel();return Promise.resolve()}return this.open(e,t)},_applyOrganizationChangeToSection:function(e,t,i){return sap.ushell.Container.getServiceAsync("Pages").then(function(n){var a;var s=decodeURIComponent(t.id);var r=t.title;var o=i.pageID;var l=i.sectionID;var u=this._getTextMsgSectionContext(i,s,r);if(this.stVizIdInSection.has(s)){a=n.findVisualization(o,l,s).then(function(e){if(e.length===0){return Promise.resolve()}var t;var i=n.getPageIndex(o);var a=e.sort(function(e,t){return t.sectionIndex-e.sectionIndex});a.forEach(function(e){e.vizIndexes.sort(function(e,t){return t-e})});a.forEach(function(e){var a=e.sectionIndex;e.vizIndexes.forEach(function(e){if(!t){t=n.deleteVisualization(i,a,e)}else{t=t.then(function(){return n.deleteVisualization(i,a,e)})}})});return t}).then(function(){this.stVizIdInSection.delete(s)}.bind(this))}else{a=n.addVisualization(o,l,s).then(function(){this.stVizIdInSection.add(s)}.bind(this))}return a.then(function(){e.getBinding("icon").refresh(true);e.getBinding("type").refresh(true);e.getBinding("tooltip").refresh(true);sap.ui.require(["sap/m/MessageToast"],function(e){e.show(u,{offset:"0 -50"})})})}.bind(this))},_getTextMsgSectionContext:function(e,t,i){var n=e.sectionID;var a=e.sectionTitle;var s=e.pageTitle;if(n&&this.stVizIdInSection.has(t)){return u.i18n.getText("VisualizationOrganizer.MessageToastSectionContextRemove",[i||t,a,s])}if(n&&!this.stVizIdInSection.has(t)){return u.i18n.getText("VisualizationOrganizer.MessageToastSectionContextAdd",[i||t,a,s])}if(!n&&this.stVizIdInSection.has(t)){return u.i18n.getText("VisualizationOrganizer.MessageToastPageRemove",[i||t,s])}if(!n&&!this.stVizIdInSection.has(t)){return u.i18n.getText("VisualizationOrganizer.MessageToastPageAdd",[i||t,s])}},_organizeVisualizations:function(){var e=this._retrieveChangedPageIds();if(this.oVizInfo.isBookmark){return this._applyBookmarkOrganizationChange(e,true)}return this._applyOrganizationChange(e,true)},_applyOrganizationChange:function(e,t){var i=e.addToPageIds.length+e.deleteFromPageIds.length;if(!i){return Promise.resolve()}var n=this.sVisualizationId;var a=this.oOpenBy;var s=new Set;var r;var o=sap.ushell.Container.getServiceAsync("Pages").then(function(e){r=e});e.deleteFromPageIds.forEach(function(e){if(!s.has(e)){s.add(e);o=o.then(function(){return r.findVisualization(e,null,n).then(function(e){var t=[];for(var i=e.length-1;i>=0;i--){var n=e[i];var a=r.getPageIndex(n.pageId);for(var s=n.vizIndexes.length-1;s>=0;s--){var o=n.vizIndexes[s];t.push(r.deleteVisualization(a,n.sectionIndex,o))}}return Promise.all(t)})})}this.mVizIdInPages.get(n).delete(e)}.bind(this));e.addToPageIds.forEach(function(e){o=o.then(function(){return r.addVisualization(e,null,n)});if(this.mVizIdInPages.has(n)){this.mVizIdInPages.get(n).add(e)}else{this.mVizIdInPages.set(n,new Set([e]))}}.bind(this));return o.then(function(){if(a){a.getBinding("icon").refresh(true);a.getBinding("type").refresh(true);a.getBinding("tooltip").refresh(true)}if(t){sap.ui.require(["sap/m/MessageToast"],function(e){e.show(u.i18n.getText("VisualizationOrganizer.MessageToast"))})}})},_resetPopup:function(e){var t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");var i=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSpacesList");var n=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSearch");var a=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSelectedPages");t.detachAfterClose(this.fnResetPopup);n.setValue("");a.setType(d.Default);i.getBinding("items").filter(null);i.removeSelections();delete this.fnResetPopup;delete this.sVisualizationId;delete this.sVisualizationTitle},pagePressed:function(e){this._changeSelectionForAllPagesWithTheSamePageId(e.getSource())},onSelectionChange:function(e){var t=e.getParameter("listItem");var i=e.getParameter("selected");this._changeSelectionForAllPagesWithTheSamePageId(t,i)},_changeSelectionForAllPagesWithTheSamePageId:function(e,t){var i=e.getModel();var n=e.getBindingContext();var a=n.getProperty("id");var s=t!==undefined?t:!n.getProperty("selected");var r=i.getProperty("/pages");for(var o=0;o<r.length;o++){var l=r[o];if(l.id===a){l.selected=s}}i.setProperty("/pages",r)},_onSearch:function(e){var t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSelectedPages");var i=this.getPressed();if(e.sId==="press"){i=!i;this.setPressed(i);t.setPressed(i)}this._updatePagesList()},_updatePagesList:function(){var e=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSpacesList");var t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSearch");var i=e.getBinding("items");var n=t.getValue();var r=this.getPressed();if(r){i.filter(new a({filters:[new a({filters:[new a({path:"title",operator:s.Contains,value1:n}),new a({path:"selected",operator:s.EQ,value1:r})],and:true}),new a({filters:[new a({path:"space",operator:s.Contains,value1:n}),new a({path:"selected",operator:s.EQ,value1:r})],and:true})],and:false}))}else{i.filter(new a({filters:[new a({path:"title",operator:s.Contains,value1:n}),new a({path:"space",operator:s.Contains,value1:n})],and:false}))}if(i.getLength()===0){e.setNoDataText(u.i18n.getText(n?"VisualizationOrganizer.PagesList.NoResultsText":"VisualizationOrganizer.PagesList.NoDataText"))}},loadSectionContext:function(e){this.stVizIdInSection.clear();if(!e||!e.pageID){return Promise.resolve(null)}return sap.ushell.Container.getServiceAsync("Pages").then(function(t){var i=decodeURIComponent(e.pageID);var n=e.sectionID?decodeURIComponent(e.sectionID):"";return t.loadPage(i).then(function(e){var i=t.getModel().getProperty(e);var a=this._createSectionContext(i,n);return a}.bind(this)).catch(function(){o.warning(i+" cannot be loaded. Please, check the id of the page.");return Promise.resolve(null)})}.bind(this))},_createSectionContext:function(e,t){var i=e.sections;var n;if(t){n=i.find(function(e){return e.id===t});this._initVizIdsInSection(n);return{pageID:e.id,sectionID:t,pageTitle:e.title,sectionTitle:n.title}}i.forEach(function(e){this._initVizIdsInSection(e)}.bind(this));return{pageID:e.id,sectionID:t,pageTitle:e.title}},_initVizIdsInSection:function(e){e.visualizations.forEach(function(e){this.stVizIdInSection.add(e.vizId)}.bind(this))},getPersonalizablePages:function(){return this.aPersonalizablePages},_isPersonalizablePage:function(e){var t=this.aPersonalizablePages.findIndex(function(t){return t.id===e});return t>-1},_retrieveChangedPageIds:function(){var e=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSpacesList");var t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSearch");var i=e.getModel();var n=i.getProperty("/pinnedPages")||new Set;e.getBinding("items").filter(null);var a=e.getItems().filter(function(e){return e.isA("sap.m.StandardListItem")});t.fireSearch();var s={};var r=[];var o=[];a.forEach(function(e){var t=e.getBindingContext().getProperty("id");if(!s[t]){s[t]=true;if(e.getSelected()&&!n.has(t)){r.push(t)}else if(!e.getSelected()&&n.has(t)){o.push(t)}}});return{addToPageIds:r,deleteFromPageIds:o}},okay:function(){var e=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(e.getBusy()){return}e.setBusy(true);this._organizeVisualizations().then(function(){e.setBusy(false);e.close()}).catch(function(e){o.error("Could not save the selected pages on the VisualizationOrganizerPopover",e)})},onHierarchyAppsPinButtonClick:function(e,t){var i=e.getSource();var n=i.getParent().getBinding("title").getContext().getObject();if(i.getBusy()){return Promise.resolve(false)}n.isBookmark=true;n.title=n.text;if(t){i.setBusy(true);return this._applyBookmarkTileChangeToSection(n,t).then(function(){i.setBusy(false);return Promise.resolve(true)})}if(this.aPersonalizablePages.length===1){i.setBusy(true);return this._applyChangeToPage(i,n,this.aPersonalizablePages[0]).then(function(){i.setBusy(false);return Promise.resolve(true)})}return new Promise(function(e){this.toggle(i,n).then(function(){var t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(t&&t.isOpen()){t.attachEventOnce("afterClose",function(){e(true)})}else{e(false)}})}.bind(this))},_applyBookmarkOrganizationChange:function(e,t){var n=e.addToPageIds.length+e.deleteFromPageIds.length;if(!n){return Promise.resolve()}var a=this.oVizInfo;var s=new Set;var r;var o;var l=Promise.all([sap.ushell.Container.getServiceAsync("Bookmark"),sap.ushell.Container.getServiceAsync("Pages")]).then(function(e){r=e[0];o=e[1];return Promise.resolve()});e.deleteFromPageIds.forEach(function(e){if(!s.has(e)){s.add(e);l=l.then(function(){return o.deleteBookmarks({url:a.url},e)})}});e.addToPageIds.forEach(function(e){l=l.then(function(){return new Promise(function(t,n){var s={url:a.url,title:a.text,subtitle:a.subtitle,icon:a.icon};var o={type:i.ContentNodeType.Page,id:e,isContainer:true};r.addBookmark(s,o).done(t).fail(n)})})});return l.then(function(){if(t){sap.ui.require(["sap/m/MessageToast"],function(e){e.show(u.i18n.getText("VisualizationOrganizer.MessageToast"))})}})},_applyBookmarkTileChangeToSection:function(e,t){return sap.ushell.Container.getServiceAsync("Pages").then(function(i){var n;var a;var s=e.url;var r=e.title;var o=t.pageID;var l=t.sectionID;if(e.bookmarkCount>0){a=u.i18n.getText("VisualizationOrganizer.MessageToastSectionContextRemove",[r,t.sectionTitle,t.pageTitle]);n=i.deleteBookmarks({url:s},o,l)}else{var g={url:s,title:e.text,subtitle:e.subtitle,icon:e.icon};a=u.i18n.getText("VisualizationOrganizer.MessageToastSectionContextAdd",[r,t.sectionTitle,t.pageTitle]);n=i.addBookmarkToPage(o,g,l)}return n.then(function(){sap.ui.require(["sap/m/MessageToast"],function(e){e.show(a,{offset:"0 -50"})})})})},updateBookmarkCount:function(e,t){return sap.ushell.Container.getServiceAsync("Pages").then(function(i){var n=e.map(function(e){return i._findBookmarks({url:e.url}).then(function(i){if(t){i=i.filter(function(e){return t.pageID===e.pageId&&t.sectionID===e.sectionId})}e.bookmarkCount=i.length;return e})});return Promise.all(n)})},formatBookmarkPinButtonTooltip:function(e,t){var i;if(t){if(e>0){i="VisualizationOrganizer.Button.Tooltip.RemoveFromSection"}else{i="VisualizationOrganizer.Button.Tooltip.AddToSection"}}else if(e>0){i="EasyAccessMenu_PinButton_Toggled_Tooltip"}else{i="EasyAccessMenu_PinButton_UnToggled_Tooltip"}return u.i18n.getText(i)},_applyChangeToPage:function(e,t,i){var n=decodeURIComponent(t.id);var a=t.title;var s=i.id;var r=t.isBookmark?t.bookmarkCount>0:this.isVizIdPresent(n);var o={addToPageIds:r?[]:[s],deleteFromPageIds:r?[s]:[]};var l=u.i18n.getText(r?"VisualizationOrganizer.MessageToastPageRemove":"VisualizationOrganizer.MessageToastPageAdd",[a||n,i.title]);this.oVizInfo=t;this.sVisualizationId=n;var g;if(t.isBookmark){g=this._applyBookmarkOrganizationChange(o,false)}else{g=this._applyOrganizationChange(o,false)}return g.then(function(){e.getBinding("icon").refresh(true);e.getBinding("type").refresh(true);e.getBinding("tooltip").refresh(true);sap.ui.require(["sap/m/MessageToast"],function(e){e.show(l,{offset:"0 -50"})})})},groupBySpace:function(e){return{key:e.getProperty("spaceId"),title:e.getProperty("space")}},getGroupHeader:function(e){return new t({title:e.title})},exit:function(){var e=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(e){e.destroy()}}})});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageBuilder/Component", ["sap/ui/core/UIComponent","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/services/VisualizationInstantiation"],function(t,e,i,o){"use strict";return t.extend("sap.ushell.components.workPageBuilder.Component",{metadata:{manifest:"json",library:"sap.ushell",events:{workPageEdited:{},visualizationFilterApplied:{parameters:{filters:{type:"array"}}},closeEditMode:{parameters:{saveChanges:{type:"boolean"}}}}},init:function(){this.oSiteApplications={};this.oSiteVizTypes={};this._oVizInstantiationPromise=Promise.resolve(new o);t.prototype.init.apply(this,arguments)},getVizInstantiationPromise:function(){return this._oVizInstantiationPromise},getEditMode:function(){return this.getRootControl().getController().getEditMode()},setEditMode:function(t){this.getRootControl().getController().setEditMode(t)},getPageData:function(){return this.getRootControl().getController().getPageData()},setPageData:function(t){return Promise.all([this._transformVizData(e.get("WorkPage.UsedVisualizations.nodes",t)||[])]).then(function(i){var o=i[0];this.getRootControl().getController().setPageData({WorkPage:{Contents:e.get("WorkPage.Contents",t),UsedVisualizations:{nodes:o}}})}.bind(this))},setVisualizationData:function(t){return this._transformVizData(e.get("Visualizations.nodes",t)||[]).then(function(i){this.getRootControl().getController().setVisualizationData({Visualizations:{nodes:i,totalCount:e.get("Visualizations.totalCount",t)||0}})}.bind(this))},setVisualizationDataPaginated:function(t){return this._transformVizData(e.get("Visualizations.nodes",t)||[]).then(function(i){this.getRootControl().getController().setVisualizationDataPaginated({Visualizations:{nodes:i,totalCount:e.get("Visualizations.totalCount",t)}})}.bind(this))},getNavigationDisabled:function(){return this.getRootControl().getController().getNavigationDisabled()},setNavigationDisabled:function(t){this.getRootControl().getController().setNavigationDisabled(t)},getUshellContainer:function(){return e.get("sap.ushell.Container")||e.get("parent.sap.ushell.Container")},setShowFooter:function(t){this.getRootControl().getController().setShowFooter(t)},_transformVizData:function(t){var e=this.getUshellContainer();var i;if(!e){return Promise.resolve(t)}i=t.find(function(t){return t.Type==="sap.ushell.StaticAppLauncher"||t.Type==="sap.ushell.DynamicAppLauncher"});if(!i){return Promise.resolve(t)}return Promise.all([e.getServiceAsync("ClientSideTargetResolution"),e.getServiceAsync("CommonDataModel")]).then(function(e){var i=e[0];var o=e[1];return this._saveSiteData(o).then(function(){return this._replaceIndicatorDatasource(t,i)}.bind(this))}.bind(this))},_replaceIndicatorDatasource:function(t,o){return Promise.all(t.map(function(t){var n=e.get(["Descriptor","sap.flp","target","appId"],t);var a=this.getSiteApplication(n);var r=e.get(["Descriptor","sap.flp","indicatorDataSource"],t);var s;if(a){s=e.get(["sap.app","contentProviderId"],a);if(s&&r&&r.path){return o.getSystemContext(s).then(function(i){if(i){var o=r.dataSource;var n=e.get(["Descriptor","sap.app","dataSources",o],t);var a;if(n){a=i.getFullyQualifiedXhrUrl(n.uri);e.set(["Descriptor","sap.app","dataSources",o,"uri"],a,t)}else{a=i.getFullyQualifiedXhrUrl(r.path);e.set(["Descriptor","sap.flp","indicatorDataSource","path"],a,t)}}return t}).catch(function(e){i.error(e);return t})}}return Promise.resolve(t)}.bind(this)))},_saveSiteData:function(t){return Promise.all([t.getApplications(),t.getVizTypes()]).then(function(t){this.oSiteApplications=t[0]||{};this.oSiteVizTypes=t[1]||{}}.bind(this))},getSiteApplication:function(t){return this.oSiteApplications[t]},getSiteVizType:function(t){return this.oSiteVizTypes[t]}})});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageBuilder/controller/WorkPageBuilder.accessibility", ["sap/f/library"],function(t){"use strict";var i=t.NavigationDirection;var o=function(){this._oFocusHistory={oLastGrid:null,sLastDirection:null,iLastRow:null,iTargetRow:null}};o.prototype._handleBorderReached=function(t,i){var o=this._getCurrentFocusElement();var r=t.getSource().getAggregation("_gridContainer");var e=t.getParameter("direction");var n=t.getParameter("row");var s=t.getParameter("column");if(this._isOppositeDirection(e)&&this._oFocusHistory.oLastGrid&&!this._oFocusHistory.oLastGrid.isDestroyed()&&n===this._oFocusHistory.iTargetRow){this._oFocusHistory.oLastGrid.focusItemByDirection(e,this._oFocusHistory.iLastRow,s);this._saveFocusHistory(r,e,n)}else{var a=this._findNextGrid(o,i,e);if(a){var u=this._findSuitableRowInGrid(a,o,e);a.focusItemByDirection(e,u,s);this._saveFocusHistory(r,e,n,u)}}};o.prototype._isOppositeDirection=function(t){switch(this._oFocusHistory.sLastDirection){case i.Right:return t===i.Left;case i.Left:return t===i.Right;case i.Up:return t===i.Down;case i.Down:return t===i.Up;default:return false}};o.prototype._findNextGrid=function(t,i,o){var r=this._getAllGrids(i);var e=[];r.forEach(function(i){if(i===t){return}var r=this._getDistanceToElementInDirection(t,i.getDomRef(),o);if(r){e.push({oGrid:i,iDistance:r})}}.bind(this));var n=e.sort(function(t,i){return t.iDistance-i.iDistance});return n[0]?n[0].oGrid:null};o.prototype._getAllGrids=function(t){var i=t.getRows();var o=[];i.forEach(function(t){var i=t.getColumns();i.forEach(function(t){var i=t.getCells();i.forEach(function(t){var i=t.getAggregation("_gridContainer");if(i){o.push(i)}})})});return o};o.prototype._findSuitableRowInGrid=function(t,i,o){var r=t.getNavigationMatrix();var e;var n;e=r.findIndex(function(t){return t.find(function(t){if(t===false||t===n){return false}n=t;if(this._getDistanceToElementInDirection(i,t,o)!==null){return true}}.bind(this))}.bind(this));return e>=0?e:0};o.prototype._getDistanceToElementInDirection=function(t,o,r){var e=o.getBoundingClientRect();var n=t.getBoundingClientRect();switch(r){case i.Right:if(n.right<e.left&&n.bottom>e.top&&n.top<e.bottom){return e.left-n.right}break;case i.Left:if(n.left>e.right&&n.bottom>e.top&&n.top<e.bottom){return n.left-e.right}break;case i.Down:if(n.bottom<e.top&&n.left<e.right&&n.right>e.left){return e.top-n.bottom}break;case i.Up:if(n.top>e.bottom&&n.left<e.right&&n.right>e.left){return n.top-e.bottom}break;default:break}return null};o.prototype._saveFocusHistory=function(t,i,o,r){this._oFocusHistory.oLastGrid=t;this._oFocusHistory.sLastDirection=i;this._oFocusHistory.iLastRow=o;this._oFocusHistory.iTargetRow=r};o.prototype._getCurrentFocusElement=function(){return document.activeElement};return o});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageBuilder/controller/WorkPageBuilder.controller", ["sap/base/Log","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/f/GridContainerItemLayoutData","sap/m/library","sap/ui/core/Component","sap/ui/core/Core","sap/ui/core/Fragment","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ui/core/mvc/Controller","sap/ui/core/theming/Parameters","sap/ui/integration/ActionDefinition","sap/ushell/components/workPageBuilder/controller/WorkPageHost","sap/ui/integration/designtime/editor/CardEditor","sap/ui/integration/widgets/Card","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/resources","sap/ushell/services/_VisualizationInstantiation/VizInstanceCdm","sap/ushell/utils","sap/ushell/components/workPageBuilder/controller/WorkPageBuilder.accessibility"],function(e,t,i,r,n,o,a,s,d,g,l,u,c,h,p,f,v,C,m,P,w,_,D,y,W,S){"use strict";var z=["PR","CO","PG"];var M=6;var E=24;var T=2;var V=4;var b=n.LoadState;var R=g.InvisibleMessageMode;return l.extend("sap.ushell.components.workPageBuilder.controller.WorkPageBuilder",{onInit:function(){this._fnDeleteRowHandler=this.deleteRow.bind(this);this._fnSaveCardConfiguration=this._onSaveCardEditor.bind(this);this.oModel=new v({maxColumns:V,editMode:false,loaded:false,navigationDisabled:false,showFooter:false,data:{WorkPage:null,Visualizations:[],UsedVisualizations:[]}});this.oModel.setSizeLimit(Infinity);this._saveHost();this._oViewSettingsModel=new v({gridContainerGap:{},gridContainerRowSize:{}});this.getView().setModel(this._oViewSettingsModel,"viewSettings");var e=this._setGridContainerSizes.bind(this);C.on("/core/home/sizeBehavior").do(e);m.on("themeChanged").do(e);this._setGridContainerSizes();this.byId("sapCepWorkPage").bindElement({path:"/data/WorkPage"});this.oWorkPageBuilderAccessibility=new S;return this.getOwnerComponent().getVizInstantiationPromise().then(function(e){this._oVizInstantiationService=e;this.getView().setModel(this.oModel)}.bind(this))},onGridContainerBorderReached:function(e){var t=this.byId("sapCepWorkPage");this.oWorkPageBuilderAccessibility._handleBorderReached(e,t)},onAddColumn:function(e){var t=this.getView().getModel();var i=e.getSource();var r=i.getParent();var n=r.indexOfAggregation("columns",i);var o=r.getBindingContext().getPath();var a=o+"/Columns/";var s=i.getBindingContext().getPath()+"/Descriptor/columnWidth";var d=t.getProperty(a);var g=d.length;var l=e.getParameter("left");if(g>=V){return}var u=i.getProperty("columnWidth");var c=Math.floor(u/2)>=M?Math.floor(u/2):M;var h=c%2;t.setProperty(s,c+h);var p=r.indexOfAggregation("columns",i)+(l===true?0:1);var f=this._createEmptyColumn(c-h);var v=[d.slice(0,p),f,d.slice(p)].flat();var C=v.reduce(function(e,t){return e+this._getColumnWidth(t)}.bind(this),0);if(C>E){this._calculateColWidths(v,n,C)}t.setProperty(a,v);this.getOwnerComponent().fireEvent("workPageEdited")},setEditMode:function(e){this.oModel.setProperty("/editMode",!!e)},getEditMode:function(){return this.oModel.getProperty("/editMode")},setShowFooter:function(e){this.oModel.setProperty("/showFooter",!!e)},setPageData:function(e){var i={};var r=t.get("WorkPage.UsedVisualizations.nodes",e);var n=t.get("WorkPage.Contents",e);if(r&&r.length>0){i=r.reduce(function(e,t){e[t.Id]=t;return e},{})}this.oModel.setProperty("/data/UsedVisualizations",i);this.oModel.setProperty("/data/WorkPage",n);this.oModel.setProperty("/loaded",true)},getPageData:function(){var e=this.oModel.getProperty("/data/UsedVisualizations")||{};return{WorkPage:{Contents:this.oModel.getProperty("/data/WorkPage"),UsedVisualizations:{nodes:Object.values(e)}}}},setVisualizationData:function(e){return this.oContentFinderPromise.then(function(t){t.setVisualizationData(e)})},setVisualizationDataPaginated:function(e){return this.oContentFinderPromise.then(function(t){t.setVisualizationDataPaginated(e)})},onGridColumnsChange:function(e){var t=e.getParameter("columns");var i=e.getSource();i.getWidgets().filter(function(e){return e.isA("sap.ui.integration.widgets.Card")}).forEach(function(e){e.setLayoutData(new r({columns:t,minRows:1}))})},onDeleteColumn:function(e){var t=this.getView().getModel();var i=e.getSource();var r=i.getColumnWidth();var n=i.getParent();var o=n.indexOfAggregation("columns",i);var a=n.getBindingContext().getPath();var s=a+"/Columns/";var d=t.getProperty(s);var g=d.filter(function(e,t){return t!==o});var l=r/2;var u=o-1<0?o:o-1;while(l>0){var c=g[u];this._setColumnWidth(c,this._getColumnWidth(c)+T);u=++u>=g.length?0:u++;l--}t.setProperty(s,g);this.getOwnerComponent().fireEvent("workPageEdited")},onAddFirstRow:function(){var e="/data/WorkPage/Rows/";this.getView().getModel().setProperty(e,[this._createEmptyRow()]);this.getOwnerComponent().fireEvent("workPageEdited")},onAddRow:function(e){var t=this.getView().getModel();var i=e.getSource();var r=this.byId("sapCepWorkPage");var n="/data/WorkPage/Rows/";var o=t.getProperty(n);var a=this._createEmptyRow();var s=r.indexOfAggregation("rows",i)+(e.getParameter("bottom")===true?1:0);var d=[o.slice(0,s),a,o.slice(s)].flat();t.setProperty(n,d);this.getOwnerComponent().fireEvent("workPageEdited")},onResize:function(e){var t=e.getParameter("posXDiff");var i=e.getSource();var r=i.getParent();var n=r.getSingleColumnWidth();var o,a,s,d,g,l,u,c;if(n===0){return}o=t/n;if(o>-1&&o<1){return}a=o<0?Math.floor(t/n):Math.ceil(t/n);s=a>=0?"right":"left";d=r.indexOfAggregation("columns",i);g=d-1;l=this._getCurrentColumnWidth(r,g);u=this._getCurrentColumnWidth(r,d);c=this._doColumnResizeStep(r,g,d,l,u,s);if(c){this._updateModelWithColumnWidths(r,g,d,c.newLeftColumnWidth,c.newRightColumnWidth)}},onResizeCompleted:function(){this.getOwnerComponent().fireEvent("workPageEdited")},onDeleteCell:function(e){var t=e.getSource().getParent().getParent();var i=this.getView().getModel();var r=t.getParent();var n=r.indexOfAggregation("cells",t);var o=r.getBindingContext().getPath()+"/Cells";var a=i.getProperty(o);var s=a.filter(function(e,t){return t!==n});i.setProperty(o,s);this.getOwnerComponent().fireEvent("workPageEdited")},_deleteVisualization:function(e){var t=e.getParent().getParent();var i=e.getBindingContext();var r=i.getPath();var n=this.getView().getModel();var o=r.substring(0,r.lastIndexOf("/"));var a=t.indexOfAggregation("widgets",e);var s=n.getProperty(o);var d=s.filter(function(e,t){return t!==a});n.setProperty(o,d);this.getOwnerComponent().fireEvent("workPageEdited")},onEditTitle:function(){this.getOwnerComponent().fireEvent("workPageEdited")},onWidgetAdded:function(){this.getOwnerComponent().fireEvent("workPageEdited")},_getWidgetGroups:function(){var e=this.getView().getModel("i18n").getResourceBundle();var t=[{id:"applicationWidgets",title:e.getText("ContentFinder.Categories.Applications.Title"),widgets:[{id:"widgets-tiles",title:e.getText("ContentFinder.Widgets.Tiles.Title"),description:e.getText("ContentFinder.Widgets.Tiles.Description"),icon:"sap-icon://header",target:"appSearch_tiles"},{id:"widgets-cards",title:e.getText("ContentFinder.Widgets.Cards.Title"),description:e.getText("ContentFinder.Widgets.Cards.Description"),icon:"sap-icon://card",target:"appSearch_cards"}]}];return t},createContentFinderComponent:function(){this.oContentFinderPromise=o.create({name:"sap.ushell.components.contentFinder"});return this.oContentFinderPromise},openWidgetGallery:function(e){var t=e.getSource();if(!this.oContentFinderPromise){this.oContentFinderPromise=this.createContentFinderComponent()}return this.oContentFinderPromise.then(function(e){e.setWidgetGroups(this._getWidgetGroups());e.attachVisualizationsAdded(t,this._onAddVisualization,this);e.attachVisualizationFilterApplied(t,function(e){this.getOwnerComponent().fireEvent("visualizationFilterApplied",e.getParameters())},this);e.show("widgetGallery")}.bind(this))},openTilesAppSearch:function(e){var t=e.getSource().getParent().getParent();if(!this.oContentFinderPromise){this.oContentFinderPromise=this.createContentFinderComponent()}return this.oContentFinderPromise.then(function(e){e.setContextData({restrictedVisualizations:this._getRestrictedVisualizationIds(t)});e.setRestrictedMode(true);e.attachVisualizationsAdded(t,this._onAddVisualization,this);e.attachVisualizationFilterApplied(t,function(e){this.getOwnerComponent().fireEvent("visualizationFilterApplied",e.getParameters())},this);e.show("appSearch_tiles")}.bind(this))},_getRestrictedVisualizationIds:function(e){return e.getWidgets().map(function(e){if(e.isA("sap.ushell.ui.launchpad.VizInstanceCdm")){return e.getProperty("vizRefId")}})},_onAddVisualization:function(e,t){var i=e.getParameter("visualizations");if(i.length>0){i.forEach(function(e){var t="/data/UsedVisualizations/"+e.id;if(!this.oModel.getProperty(t)){this.oModel.setProperty(t,e.vizData)}}.bind(this));var r=this._instantiateWidgetData(i);if(t.isA("sap.ushell.components.workPageBuilder.controls.WorkPageCell")){this._setCellData(t,r)}if(t.isA("sap.ushell.components.workPageBuilder.controls.WorkPageColumn")){this._setColumnData(t,r)}}},_instantiateWidgetData:function(e){var t=[];var i;return e.map(function(e){i=this._generateUniqueId(t);t=t.concat([i]);return{Id:i,DescriptorSchemaVersion:"3.2.0",Descriptor:{},Visualization:{Id:e.vizData.Id,Type:e.type}}}.bind(this))},_setCellData:function(e,t){var i=e.getBindingContext().getPath();var r=Object.assign({},this.oModel.getProperty(i));r.Widgets=r.Widgets.concat(t);this.oModel.setProperty(i,r);this.onWidgetAdded()},_setColumnData:function(e,t){var i=e.getBindingContext().getPath();var r=Object.assign({},this.oModel.getProperty(i));if(!r.Cells){r.Cells=[]}r.Cells=r.Cells.concat([{Id:this._generateUniqueId(),DescriptorSchemaVersion:"3.2.0",Descriptor:{},Widgets:t.concat([])}]);this.oModel.setProperty(i,r);this.onWidgetAdded()},onDeleteRow:function(e){var t=this.getOwnerComponent().getRootControl();var i=e.getSource().getBindingContext();if(!this.oLoadDeleteDialog){this.oLoadDeleteDialog=s.load({id:t.createId("rowDeleteDialog"),name:"sap.ushell.components.workPageBuilder.view.WorkPageRowDeleteDialog",controller:this}).then(function(e){e.setModel(this.getView().getModel("i18n"),"i18n");return e}.bind(this))}return this.oLoadDeleteDialog.then(function(e){e.getBeginButton().detachEvent("press",this._fnDeleteRowHandler);e.getBeginButton().attachEvent("press",{rowContext:i},this._fnDeleteRowHandler);e.open()}.bind(this))},deleteRow:function(e,t){var i=this.getView().getModel();var r=t.rowContext;var n=i.getProperty("/data/WorkPage/Rows");var o=r.getObject();var a=n.filter(function(e){return e.Id!==o.Id});i.setProperty("/data/WorkPage/Rows",a);this.getOwnerComponent().fireEvent("workPageEdited");return this.oLoadDeleteDialog.then(function(e){e.close()})},onRowDeleteCancel:function(){return this.oLoadDeleteDialog.then(function(e){e.close()})},_createErrorTile:function(){return new y({state:b.Failed}).attachPress(this.onVisualizationPress,this).bindEditable("/editMode").setLayoutData(new r({columns:2,rows:2}))},widgetFactory:function(t,i){var r=i.getProperty("Visualization/Id");if(!r){e.error("No vizId found in widget context.");return this._createErrorTile()}var n=this.getView().getModel().getProperty("/data/UsedVisualizations/"+r);if(!n||!n.Type){e.error("No viz or vizType found for vizId "+r);return this._createErrorTile()}var o=i.getProperty("Configurations")||[];var a=n.Configurations||[];var s=this._getMergedAndSortedConfigurations(o,a);var d=i.getPath();switch(n.Type){case"sap.card":return this._createCard(n,s,d);case"sap.ushell.StaticAppLauncher":case"sap.ushell.DynamicAppLauncher":return this._createVizInstance(n);default:e.error("Unknown type for widget "+n.Type);return this._createErrorTile()}},_getMergedAndSortedConfigurations:function(e,t){if(e.length===0&&t.length===0){return[]}var r=z.reduce(function(r,n){var o=e.find(function(e){return e.Level===n});var a=t.find(function(e){return e.Level===n});var s=i({},a,o);if(Object.keys(s).length>0){r[n]=s}return r},{});return this._sortConfigurations(Object.values(r))},_sortConfigurations:function(e){var t=e.sort(function(e,t){return z.indexOf(e.Level)-z.indexOf(t.Level)});return t.map(function(e){return e.Settings})},_createVizInstance:function(i){var n=t.get(["Descriptor","sap.flp","indicatorDataSource"],i);var o=t.get(["Descriptor","sap.flp","target","appId"],i);var a=this.getOwnerComponent().getSiteApplication(o);var s=t.get(["sap.app","dataSources"],a);var d=this.getOwnerComponent().getSiteVizType(i.Type);var g={};g[o]=a;var l={id:i.Id,title:t.get(["Descriptor","sap.app","title"],i),subtitle:t.get(["Descriptor","sap.app","subTitle"],i),info:t.get(["Descriptor","sap.app","info"],i),icon:t.get(["Descriptor","sap.ui","icons","icon"],i),keywords:t.get(["Descriptor","sap.app","tags","keywords"],i)||[],_instantiationData:{platform:"CDM",vizType:d},indicatorDataSource:n,vizType:t.get("Type",i),dataSource:this._getDataSource(s,n),contentProviderId:t.get(["sap.app","contentProviderId"],a),vizConfig:t.get(["Descriptor"],i),supportedDisplayFormats:t.get(["Descriptor","sap.flp","vizOptions","displayFormats","supported"],i),displayFormatHint:t.get(["Descriptor","sap.flp","vizOptions","displayFormats","default"],i),numberUnit:t.get(["Descriptor","sap.flp","numberUnit"],i),vizId:i.Id,preview:false};if(!this.oModel.getProperty("/navigationDisabled")){l.target=P.harmonizeTarget(w.getTarget(l)||{});l.targetURL=_.toHashFromVizData(l,g)}var u=this._oVizInstantiationService.instantiateVisualization(l);if(!u){e.error("No VizInstance was created.");return this._createErrorTile()}return u.setActive(true).attachPress(this.onVisualizationPress,this).bindEditable("/editMode").bindClickable({path:"/navigationDisabled",formatter:function(e){return!e}}).setLayoutData(new r(u.getLayout()))},_getDataSource:function(e,t){if(!t||!e){return}return e[t.dataSource]},onVisualizationPress:function(e){var t=e.getParameter("scope");var i=e.getParameter("action");if(t==="Actions"&&i==="Remove"){this._deleteVisualization(e.getSource())}},_createCard:function(i,n,o){var a={};var s=i.Descriptor&&i.Descriptor["sap.card"];var d=i.DescriptorResources&&(i.DescriptorResources.BaseUrl||i.DescriptorResources.DescriptorPath);var g;if(!s&&!d){e.error("No Descriptor or DescriptorResources for Card");return(new f).setLayoutData(new r({columns:2,rows:2}))}if(s){a.manifest=i.Descriptor;g=t.get(["Descriptor","sap.card","configuration"],i);if(d){a.baseUrl=i.DescriptorResources.BaseUrl+i.DescriptorResources.DescriptorPath}}else if(d){a.manifest=i.DescriptorResources.BaseUrl+i.DescriptorResources.DescriptorPath+"/manifest.json"}if(a.baseUrl&&a.baseUrl.substr(-1)!=="/"){a.baseUrl+="/"}var l=new f(a);if(g){var u=this._createCardConfigurationActionDefinition(l,o,this._openCardConfigurationEditor.bind(this));l.addActionDefinition(u)}return l.setManifestChanges(n).addStyleClass("sapCepWidget").setHost(this.oHost).setLayoutData(new r({columns:16,minRows:1}))},_createCardConfigurationActionDefinition:function(e,t,i){var r=this.getView().getModel("i18n").getResourceBundle().getText("WorkPage.Card.ActionDefinition.Configure");var n=new c({type:"Custom",visible:"{/editMode}",buttonType:"Transparent",icon:"sap-icon://wrench",text:r});n.setModel(this.oModel);n.attachPress({card:e,widgetContextPath:t},i);return n},_openCardConfigurationEditor:function(e,t){if(!this.oCardEditorDialogPromise){this.oCardEditorDialogPromise=this._createCardEditorDialog(t.card)}var i=this._createCardEditor(t.card);return this.oCardEditorDialogPromise.then(function(e){this.oCardEditorDialog=e;this.oCardEditorDialog.removeAllContent();this.oCardEditorDialog.getBeginButton().detachPress(this._fnSaveCardConfiguration).attachPress(t.widgetContextPath,this._fnSaveCardConfiguration);this._setCardDialogTitle(this.oCardEditorDialog,t.card);this.oCardEditorDialog.addContent(i);this.oCardEditorDialog.open()}.bind(this))},_setCardDialogTitle:function(e,t){var i=this.getView().getModel("i18n").getResourceBundle();var r=this._getCardTitle(t)?i.getText("WorkPage.CardEditor.Title",[this._getCardTitle(t)]):i.getText("WorkPage.CardEditor.Title.NoCardTitle");e.setTitle(r)},_createCardEditor:function(e){return new p({previewPosition:"right",card:e,mode:"content"})},_createCardEditorDialog:function(e){var t=this.getView().getModel("i18n").getResourceBundle();var i=t.getText("WorkPage.CardEditor.Save");var r=t.getText("WorkPage.CardEditor.Cancel");return new Promise(function(e,t){sap.ui.require(["sap/m/Dialog","sap/m/Button","sap/m/ButtonType"],function(t,n,o){var a=new t({contentWidth:"40rem",beginButton:new n({text:i,type:o.Emphasized}),endButton:new n({text:r,press:function(){a.close()}})});e(a)},t)})},_getCardTitle:function(e){if(e.getCardHeader()&&e.getCardHeader().getTitle()){return e.getCardHeader().getTitle()}},_onSaveCardEditor:function(e,t){var r=e.getSource().getParent();var n=r.getContent()[0];var o=n.getCard();var a=t+"/Configurations";var s=n.getCurrentSettings();var d=this.oModel.getProperty(a)||[];var g=d.find(function(e){return e.Level==="PG"});if(!g){g={};g.Id=this._generateUniqueId();g.Level="PG";g.Settings=s;g.SettingsSchemaVersion="3.2";d.push(g)}else{d=d.map(function(e){if(e.Level==="PG"){e.Settings=i({},e.Settings,s)}return e})}this.oModel.setProperty(a,d);o.setManifestChanges([s]);this.getOwnerComponent().fireEvent("workPageEdited");r.close()},executeNavigation:function(e){var t=e.getParameter("parameters");if(e.getParameter("type")!=="Navigation"||this.oModel.getProperty("/navigationDisabled")||t&&t.hasOwnProperty("url")){return Promise.resolve()}e.preventDefault(true);return this.getOwnerComponent().getUshellContainer().getServiceAsync("CrossApplicationNavigation").then(function(e){return e.toExternal({target:{semanticObject:t.ibnTarget.semanticObject,action:t.ibnTarget.action},params:t.ibnParams})})},saveEditChanges:function(){this.getOwnerComponent().fireEvent("closeEditMode",{saveChanges:true})},cancelEditChanges:function(){this.getOwnerComponent().fireEvent("closeEditMode",{saveChanges:false})},onCellDrop:function(e){var t=e.getParameter("draggedControl");var i=t.getParent().getParent();var r=e.getParameter("droppedControl");var n=i.indexOfAggregation("widgets",t);var o=r.getBindingContext().getProperty("Widgets").length;this._moveVisualization(i,r,n,o)},onCellDragEnter:function(e){var t=e.getParameter("target");if(!this.tileMode(t.getBindingContext().getProperty("Widgets"))){e.preventDefault()}},onGridDrop:function(e){var t=e.getSource();var i=e.getParameter("draggedControl");var r=e.getParameter("droppedControl");var n=e.getParameter("dropPosition");var o=i.getParent().getParent();var a=o.indexOfAggregation("widgets",i);var s=t.indexOfAggregation("widgets",r);var d=t.getId()===o.getId();if(n==="After"){s++}if(d){if(a<s){s--}if(a===s){return}}this._moveVisualization(o,t,a,s)},_moveVisualization:function(e,t,i,r){var n=this.getView().getModel();var o=e.getBindingContext().getPath()+"/Widgets";var a=t.getBindingContext().getPath()+"/Widgets";var s=o===a;var g=n.getProperty(o);var l=n.getProperty(a);var u=g[i];var c=g.filter(function(e,t){return t!==i});if(s){l=c}var h=[l.slice(0,r),u,l.slice(r)].flat();n.setProperty(o,c);n.setProperty(a,h);d.getInstance().announce(this.getView().getModel("i18n").getResourceBundle().getText("WorkPage.Message.WidgetMoved"),R.Assertive);this.getOwnerComponent().fireEvent("workPageEdited")},tileMode:function(e){var i=this.getView().getModel();var r;return!!e&&!e.some(function(e){r=i.getProperty("/data/UsedVisualizations/"+t.get("Visualization.Id",e));return t.get("Type",r)==="sap.card"})},showAppSearchButton:function(e,t){return this.tileMode(e)&&t},_updateModelWithColumnWidths:function(e,t,i,r,n){var o=this.getView().getModel();var a=e.getBindingContext();var s=a.getPath();var d=s+"/Columns/"+t+"/Descriptor/columnWidth";var g=s+"/Columns/"+i+"/Descriptor/columnWidth";o.setProperty(d,r);o.setProperty(g,n)},_updateColumnWidthClass:function(e,t,i){e.$().find(".sapCepWorkPageColumn").eq(t).removeClass(function(e,t){return(t.match(/sapCepColumnWidth.*/g)||[]).join(" ")}).addClass("sapCepColumnWidth"+i)},_doColumnResizeStep:function(t,i,r,n,o,s){var d=a.getConfiguration().getRTL();var g;if(!d){g=s==="right"?T:-T}else{g=s==="right"?-T:T}var l=n+g;var u=o-g;if(l<M||u<M){e.debug("new column value too small",l,u);return null}this._updateColumnWidthClass(t,i,l);this._updateColumnWidthClass(t,r,u);return{newLeftColumnWidth:l,newRightColumnWidth:u}},_getCurrentColumnWidth:function(e,t){var i=e.getBindingContext().getPath();var r=i+"/Columns/"+t+"/Descriptor/columnWidth";return this.getView().getModel().getProperty(r)},_getColumnWidth:function(e){return t.get("Descriptor.columnWidth",e)||E},_setColumnWidth:function(e,i){t.set("Descriptor.columnWidth",i,e)},_calculateColWidths:function(e,t,i){var r=e[t];if(this._getColumnWidth(r)-T>=M){this._setColumnWidth(r,this._getColumnWidth(r)-T);i=i-T}if(i>E){var n=t-1>=0?t-1:e.length-1;this._calculateColWidths(e,n,i)}return e},_createEmptyColumn:function(e){return{Id:this._generateUniqueId(),DescriptorSchemaVersion:"3.2.0",Descriptor:{columnWidth:e},Configurations:[],Cells:[]}},_createEmptyRow:function(){return{Id:this._generateUniqueId(),DescriptorSchemaVersion:"3.2.0",Descriptor:{title:"",description:"this is not yet rendered",fillRowHeight:false,fullWidth:false},Columns:[this._createEmptyColumn(E)]}},_saveHost:function(){this.oHost=a.byId("sap.shell.host.environment");if(!this.oHost){this.oHost=new h("sap.shell.host.environment",{action:this.executeNavigation.bind(this)});this.oHost.setModel(this.getView().getModel("i18n"),"i18n")}},getNavigationDisabled:function(){return this.oModel.getProperty("/navigationDisabled")},setNavigationDisabled:function(e){this.oModel.setProperty("/navigationDisabled",e)},_setGridContainerSizes:function(){var e=C.last("/core/home/sizeBehavior");var t=this.getView().getModel("viewSettings");var i=e==="Small"?"_sap_ushell_Tile_SpacingXS":"_sap_ushell_Tile_Spacing";var r=e==="Small"?"_sap_ushell_Tile_SpacingXS":"_sap_ushell_Tile_SpacingS";t.setProperty("/gridContainerGap/gridContainerGap",this._getNumericThemeParam(i));t.setProperty("/gridContainerGap/gridContainerGapXS",this._getNumericThemeParam("_sap_ushell_Tile_SpacingXS"));t.setProperty("/gridContainerGap/gridContainerGapS",this._getNumericThemeParam(r));t.setProperty("/gridContainerGap/gridContainerGapM",this._getNumericThemeParam(i));t.setProperty("/gridContainerGap/gridContainerGapL",this._getNumericThemeParam(i));t.setProperty("/gridContainerGap/gridContainerGapXL",this._getNumericThemeParam(i));var n=e==="Small"?"_sap_ushell_Tile_WidthXS":"_sap_ushell_Tile_Width";var o=e==="Small"?"_sap_ushell_Tile_WidthXS":"_sap_ushell_Tile_WidthS";t.setProperty("/gridContainerRowSize/gridContainerRowSize",this._getNumericThemeParam(n));t.setProperty("/gridContainerRowSize/gridContainerRowSizeXS",this._getNumericThemeParam("_sap_ushell_Tile_WidthXS"));t.setProperty("/gridContainerRowSize/gridContainerRowSizeS",this._getNumericThemeParam(o));t.setProperty("/gridContainerRowSize/gridContainerRowSizeM",this._getNumericThemeParam(n));t.setProperty("/gridContainerRowSize/gridContainerRowSizeL",this._getNumericThemeParam(n));t.setProperty("/gridContainerRowSize/gridContainerRowSizeXL",this._getNumericThemeParam(n))},_getNumericThemeParam:function(e){var t=u.get(e);if(t&&t.indexOf(".")===0){t="0"+t}return t},_generateUniqueId:function(e){var t=(e||[]).concat([]);var i=this.oModel.getProperty("/data/WorkPage");t.push(i.Id);(i.Rows||[]).forEach(function(e){t.push(e.Id);(e.Columns||[]).forEach(function(e){t.push(e.Id);(e.Cells||[]).forEach(function(e){t.push(e.Id);(e.Widgets||[]).forEach(function(e){t.push(e.Id)})})})});return W.generateUniqueId(t)}})});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageBuilder/controller/WorkPageHost", ["sap/ui/integration/Host","sap/ui/model/json/JSONModel"],function(e,t){"use strict";return function(o,r){var n=new e(o,r);n.setResolveDestination(function(e){if(!e){return Promise.reject()}return Promise.resolve("/dynamic_dest/"+e)});n.getContextValue=function(e){try{if(!e){return Promise.reject()}if(e.charAt(0)==="/"){return n.getContextValue(e.substring(1))}return n.getContext().then(function(){return n._oHostContextModel.getProperty("/"+e)})}catch(e){return Promise.resolve()}};n.getContext=function(){if(!n._oHostContext){n._oHostContext=sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){var o=n.getModel("i18n")&&n.getModel("i18n").getResourceBundle();if(!o){o={getText:function(e){return e}}}n._oHostContext={"sap.workzone":{label:o.getText("WorkPage.Host.Context.WorkZone.Label"),currentUser:{label:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.Label"),id:{label:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.Id.Label"),type:"string",tags:["technical"],placeholder:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.Id.Placeholder"),description:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.Id.Desc"),value:e.getId()},name:{label:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.Name.Label"),type:"string",placeholder:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.Name.Placeholder"),description:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.Name.Desc"),value:e.getFullName()},firstName:{label:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.FirstName.Label"),type:"string",placeholder:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.FirstName.Placeholder"),description:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.FirstName.Desc"),value:e.getFirstName()},lastName:{label:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.LastName.Label"),type:"string",placeholder:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.LastName.Placeholder"),description:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.LastName.Desc"),value:e.getLastName()},email:{label:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.Email.Label"),type:"string",placeholder:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.Email.Placeholder"),description:o.getText("WorkPage.Host.Context.WorkZone.CurrentUser.Email.Desc"),value:e.getEmail()}}}};n._oHostContextModel=new t(n._oHostContext);return n._oHostContext})}return Promise.resolve(n._oHostContext)};return n}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageBuilder/controls/WorkPage", ["sap/ui/core/Control","sap/ushell/components/workPageBuilder/controls/WorkPageRenderer","sap/m/IllustratedMessage","sap/m/IllustratedMessageType","sap/m/IllustratedMessageSize","sap/m/Button","sap/ushell/utils","sap/ushell/ui/launchpad/ExtendedChangeDetection"],function(e,t,s,a,i,l,r,o){"use strict";var n=e.extend("sap.ushell.components.workPageBuilder.controls.WorkPage",{metadata:{library:"sap.ushell",properties:{editMode:{type:"boolean",group:"Misc",defaultValue:false,bindable:true},emptyIllustrationTitle:{type:"string",group:"Misc",defaultValue:"",bindable:true},emptyIllustrationMessage:{type:"string",group:"Misc",defaultValue:"",bindable:true},emptyIllustrationButtonText:{type:"string",group:"Misc",defaultValue:"",bindable:true},loaded:{type:"boolean",defaultValue:false,bindable:true}},defaultAggregation:"rows",aggregations:{rows:{type:"sap.ushell.components.workPageBuilder.controls.WorkPageRow",multiple:true,singularName:"row",bindable:true},title:{type:"sap.ui.core.Control",multiple:false,defaultValue:null,bindable:true},_emptyIllustration:{type:"sap.m.IllustratedMessage",multiple:false,visibility:"hidden"}},events:{addFirstRow:{}}},renderer:t});n.prototype.init=function(){this._oRowsChangeDetection=new o("rows",this);this.oDelegate={onAfterRendering:function(){r.setPerformanceMark("FLP -- work page after rendering")}};this.addDelegate(this.oDelegate);e.prototype.init.apply(this,arguments)};n.prototype.exit=function(){this._oRowsChangeDetection.destroy();this.removeDelegate(this.oDelegate);e.prototype.exit.apply(this,arguments)};n.prototype.getIllustratedMessage=function(){if(!this.getAggregation("_emptyIllustration")){this.setAggregation("_emptyIllustration",this._createIllustratedMessage())}return this.getAggregation("_emptyIllustration")};n.prototype._createIllustratedMessage=function(){return new s({illustrationType:a.AddColumn,illustrationSize:i.Spot,title:this.getEmptyIllustrationTitle(),description:this.getEmptyIllustrationMessage(),additionalContent:[new l({text:this.getEmptyIllustrationButtonText(),press:function(){this.fireEvent("addFirstRow")}.bind(this)}).addStyleClass("sapUiTinyMarginBegin sapUiTinyMarginEnd")],visible:"{/editMode}"})};return n});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/components/workPageBuilder/controls/WorkPageButton", ["sap/ui/core/Control","sap/ui/core/Icon"],function(t,e){"use strict";var n=t.extend("sap.ushell.components.workPageBuilder.controls.WorkPageButton",{metadata:{library:"sap.ushell",properties:{icon:{type:"sap.ui.core.URI",defaultValue:"",bindable:true},tooltip:{type:"string",defaultValue:"",bindable:true}},aggregations:{_icon:{type:"sap.ui.core.Icon",multiple:false,defaultValue:null,visibility:"hidden"}},events:{press:{}}},renderer:{apiVersion:2,render:function(t,e){t.openStart("button",e);t.class("sapCepAddButton");t.attr("title",e.getTooltip());t.openEnd();t.openStart("span");t.class("sapCepAddButtonInner");t.openEnd();t.renderControl(e.getIconControl());t.close("span");t.close("button")}}});n.prototype.init=function(){this._fnHandleClick=this.onClick.bind(this);t.prototype.init.apply(this,arguments)};n.prototype.onClick=function(t){t.preventDefault();t.stopPropagation();this.fireEvent("press")};n.prototype.onBeforeRendering=function(){if(this.getDomRef()){this.getDomRef().removeEventListener("click",this._fnHandleClick)}};n.prototype.onAfterRendering=function(){this.getDomRef().addEventListener("click",this._fnHandleClick)};n.prototype.getIconControl=function(){if(!this.getAggregation("_icon")){this.setAggregation("_icon",new e({src:this.getIcon(),tooltip:this.getTooltip()}).addStyleClass("sapCepAddButtonIcon"))}return this.getAggregation("_icon")};return n});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/components/workPageBuilder/controls/WorkPageCell", ["sap/f/GridContainer","sap/f/GridContainerSettings","sap/f/dnd/GridDropInfo","sap/m/Button","sap/m/IllustratedMessage","sap/m/IllustratedMessageSize","sap/m/IllustratedMessageType","sap/ui/core/Control","sap/ui/core/dnd/DragInfo","sap/ui/core/library","sap/ushell/ui/launchpad/ExtendedChangeDetection"],function(e,t,i,r,a,n,o,s,l,p,d){"use strict";var g=p.dnd.DropLayout;var u=p.dnd.DropPosition;var C=s.extend("sap.ushell.components.workPageBuilder.controls.WorkPageCell",{metadata:{library:"sap.ushell",properties:{deleteWidgetTooltip:{type:"string",defaultValue:"",bindable:true},addApplicationButtonText:{type:"string",defaultValue:"",bindable:true},editMode:{type:"boolean",defaultValue:false,bindable:true},tileMode:{type:"boolean",defaultValue:false,bindable:true},gridContainerGap:{type:"string",group:"Appearance",defaultValue:"0.5rem",bindable:true},gridContainerGapXS:{type:"string",group:"Appearance",defaultValue:"0.475rem",bindable:true},gridContainerGapS:{type:"string",group:"Appearance",defaultValue:"0.475rem",bindable:true},gridContainerGapM:{type:"string",group:"Appearance",defaultValue:"0.5rem",bindable:true},gridContainerGapL:{type:"string",group:"Appearance",defaultValue:"0.5rem",bindable:true},gridContainerGapXL:{type:"string",group:"Appearance",defaultValue:"0.5rem",bindable:true},gridContainerRowSize:{type:"string",group:"Appearance",defaultValue:"5.25rem",bindable:true},gridContainerRowSizeXS:{type:"string",group:"Appearance",defaultValue:"4.375rem",bindable:true},gridContainerRowSizeS:{type:"string",group:"Appearance",defaultValue:"5.25rem",bindable:true},gridContainerRowSizeM:{type:"string",group:"Appearance",defaultValue:"5.25rem",bindable:true},gridContainerRowSizeL:{type:"string",group:"Appearance",defaultValue:"5.25rem",bindable:true},gridContainerRowSizeXL:{type:"string",group:"Appearance",defaultValue:"5.25rem",bindable:true},emptyIllustrationTitle:{type:"string",group:"Misc",defaultValue:"",bindable:true},emptyIllustrationMessage:{type:"string",group:"Misc",defaultValue:"",bindable:true}},defaultAggregation:"widgets",aggregations:{widgets:{type:"sap.ui.core.Control",multiple:true,singularName:"widget",bindable:true,dnd:true,forwarding:{getter:"getGridContainer",aggregation:"items"}},_gridContainer:{type:"sap.f.GridContainer",multiple:false,visibility:"hidden"},headerBar:{type:"sap.m.OverflowToolbar",multiple:false},_emptyIllustration:{type:"sap.m.IllustratedMessage",multiple:false,visibility:"hidden"}},events:{moveVisualization:{},gridColumnsChange:{},gridContainerBorderReached:{}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.class("sapCepWorkPageCell");if(t.getTileMode()){e.class("sapCepWorkPageCellTileMode")}else{e.class("sapCepWorkPageCellCardMode")}e.openEnd();e.openStart("div");e.class("sapCepWidgetToolbar");e.openEnd();e.renderControl(t.getHeaderBar());e.close("div");var i=t.getAggregation("widgets");if(i.length<=0){e.renderControl(t.getIllustratedMessage())}else{e.renderControl(t.getGridContainer())}e.close("div")}}});C.prototype.init=function(){this._oWidgetsChangeDetection=new d("widgets",this);s.prototype.init.apply(this,arguments)};C.prototype.exit=function(){this._oWidgetsChangeDetection.destroy();s.prototype.exit.apply(this,arguments)};C.prototype.getGridContainer=function(){var e=this.getAggregation("_gridContainer");if(!e){e=this._createGridContainer().attachColumnsChange(function(e){this.fireEvent("gridColumnsChange",e.getParameters())}.bind(this));this.setAggregation("_gridContainer",e.addStyleClass("sapCepWorkPageGridContainer"))}if(!this.getEditMode()||!this.getTileMode()||e.getItems().length===0){e.removeAllDragDropConfig()}else if(e.getDragDropConfig().length===0){e.addDragDropConfig(new l({sourceAggregation:"items"})).addDragDropConfig(new i({targetAggregation:"items",dropIndicatorSize:function(e){var t=2;if(e.getLayoutData()&&e.getLayoutData().getColumns()){t=e.getLayoutData().getColumns()}return{rows:1,columns:t}},dropPosition:u.Between,dropLayout:g.Horizontal,drop:this.onDrop.bind(this)}))}return e.setInlineBlockLayout(true).setSnapToRow(false).setLayoutXL(new t({columnSize:this.getGridContainerRowSizeXL(),rowSize:this.getGridContainerRowSizeXL(),gap:this.getGridContainerGapXL()})).setLayoutL(new t({columnSize:this.getGridContainerRowSizeL(),rowSize:this.getGridContainerRowSizeL(),gap:this.getGridContainerGapL()})).setLayoutM(new t({columnSize:this.getGridContainerRowSizeM(),rowSize:this.getGridContainerRowSizeM(),gap:this.getGridContainerGapM()})).setLayoutS(new t({columnSize:this.getGridContainerRowSizeS(),rowSize:this.getGridContainerRowSizeS(),gap:this.getGridContainerGapS()})).setLayout(new t({columnSize:this.getGridContainerRowSize(),rowSize:this.getGridContainerRowSize(),gap:this.getGridContainerGap()}))};C.prototype._createGridContainer=function(){return new e(this.getId()+"--sapCepWorkPageCellGridContainer",{containerQuery:false,minHeight:"0",borderReached:this.onBorderReached.bind(this)})};C.prototype.onBorderReached=function(e){this.fireEvent("gridContainerBorderReached",e.getParameters())};C.prototype.onDrop=function(e){this.fireEvent("moveVisualization",e.getParameters())};C.prototype.getIllustratedMessage=function(){if(!this.getAggregation("_emptyIllustration")){this.setAggregation("_emptyIllustration",this._createIllustratedMessage())}return this.getAggregation("_emptyIllustration")};C.prototype._createIllustratedMessage=function(){return new a({illustrationType:o.NoColumnsSet,illustrationSize:n.Spot,title:this.getEmptyIllustrationTitle(),description:this.getEmptyIllustrationMessage(),visible:"{/editMode}"})};C.prototype.onfocusin=function(){if(!this.hasStyleClass("sapCepWorkPageCellFocused")){this.addStyleClass("sapCepWorkPageCellFocused")}};C.prototype.onfocusout=function(){if(this.hasStyleClass("sapCepWorkPageCellFocused")){this.removeStyleClass("sapCepWorkPageCellFocused")}};return C});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/components/workPageBuilder/controls/WorkPageColumn", ["sap/m/Button","sap/m/library","sap/ui/core/Control","sap/ushell/components/workPageBuilder/controls/WorkPageButton","sap/ushell/components/workPageBuilder/controls/WorkPageColumnRenderer","sap/ushell/components/workPageBuilder/controls/WorkPageColumnResizer","sap/ushell/ui/launchpad/ExtendedChangeDetection"],function(e,t,n,o,i,s,l){"use strict";var r=t.ButtonType;var a=n.extend("sap.ushell.components.workPageBuilder.controls.WorkPageColumn",{metadata:{library:"sap.ushell",properties:{columnWidth:{type:"int",defaultValue:24,bindable:true},editMode:{type:"boolean",group:"Misc",defaultValue:false,bindable:true},deleteColumnButtonTooltip:{type:"string",group:"Misc",defaultValue:"",bindable:true},addColumnButtonTooltip:{type:"string",group:"Misc",defaultValue:"",bindable:true},addWidgetButtonText:{type:"string",group:"Misc",defaultValue:"",bindable:true}},defaultAggregation:"cells",aggregations:{cells:{type:"sap.ushell.components.workPageBuilder.controls.WorkPageCell",multiple:true,singularName:"cell",bindable:true,dnd:true},_deleteButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_addWidgetButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_addButtonLeft:{type:"sap.ushell.components.workPageBuilder.controls.WorkPageButton",multiple:false,visibility:"hidden"},_addButtonRight:{type:"sap.ushell.components.workPageBuilder.controls.WorkPageButton",multiple:false,visibility:"hidden"},_resizer:{type:"sap.ushell.components.workPageBuilder.controls.WorkPageColumnResizer",multiple:false,visibility:"hidden"}},events:{addColumn:{left:{type:"boolean"}},addWidget:{},removeColumn:{},columnResized:{parameters:{posXDiff:{type:"float"}}},columnResizeCompleted:{}}},renderer:i});a.prototype.init=function(){this._fnHandleResize=this._handleResizerMoved.bind(this);this._fnHandleResizeCompleted=this._handleResizerReleased.bind(this);this._oResizer=(new s).setParent(this).attachEvent("resizerMoved",this._fnHandleResize).attachEvent("resizerReleased",this._fnHandleResizeCompleted);this._oCellsChangeDetection=new l("cells",this);n.prototype.init.apply(this,arguments)};a.prototype.exit=function(){this._oResizer.detachEvent("resizerMoved",this._fnHandleResize).detachEvent("resizerReleased",this._fnHandleResizeCompleted);this._oCellsChangeDetection.destroy();n.prototype.exit.apply(this,arguments)};a.prototype._createDeleteButton=function(){return new e({icon:"sap-icon://delete",tooltip:this.getDeleteColumnButtonTooltip(),press:function(){this.fireEvent("removeColumn")}.bind(this)}).addStyleClass("sapCepWorkPageColumnDeleteButton")};a.prototype.getDeleteButton=function(){if(!this.getAggregation("_deleteButton")){this.setAggregation("_deleteButton",this._createDeleteButton())}return this.getAggregation("_deleteButton")};a.prototype._createAddButton=function(e){var t=e==="left"?"sapCepColumnButtonLeft":"sapCepColumnButtonRight";return new o({icon:"sap-icon://add",tooltip:this.getAddColumnButtonTooltip(),press:function(){this.fireEvent("addColumn",{left:e==="left"})}.bind(this)}).addStyleClass("sapCepDividerButton "+t)};a.prototype.getAddButton=function(e){if(e==="left"){if(!this.getAggregation("_addButtonLeft")){this.setAggregation("_addButtonLeft",this._createAddButton("left"))}return this.getAggregation("_addButtonLeft")}if(!this.getAggregation("_addButtonRight")){this.setAggregation("_addButtonRight",this._createAddButton("right"))}return this.getAggregation("_addButtonRight")};a.prototype.getResizer=function(){return this._oResizer};a.prototype._handleResizerMoved=function(e){var t=e.getParameters();this.fireEvent("columnResized",t)};a.prototype._handleResizerReleased=function(){this.fireEvent("columnResizeCompleted")};a.prototype._createAddWidgetButton=function(){return new e({text:this.getAddWidgetButtonText(),type:r.Emphasized,press:function(){this.fireEvent("addWidget")}.bind(this)}).addStyleClass("sapCepAddWidgetButton")};a.prototype.getAddWidgetButton=function(){if(!this.getAggregation("_addWidgetButton")){this.setAggregation("_addWidgetButton",this._createAddWidgetButton())}return this.getAggregation("_addWidgetButton")};a.prototype.getCappedColumnCount=function(){var e=this.getParent();return e.getCappedColumnCount()};a.prototype.getIndex=function(){return this.getParent().indexOfAggregation("columns",this)};a.prototype.getMaxColumns=function(){return this.getParent().getMaxColumns()};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageBuilder/controls/WorkPageColumnRenderer", function(){"use strict";var e={apiVersion:2,render:function(e,t){if(!t.getVisible()){return}var o=t.getIndex();var r=t.getMaxColumns();var n=t.getCappedColumnCount();var l=t.getCells();var a=l.length===0;e.openStart("div",t);if(o===0){e.class("sapCepWorkPageColumnFirst")}if(o===n-1){e.class("sapCepWorkPageColumnLast")}if(a){e.class("sapCepWorkPageColumnEmpty")}e.class("sapCepWorkPageColumn");e.class("sapCepColumnWidth"+t.getColumnWidth());e.openEnd();if(a){e.openStart("div");e.class("sapCepWorkPageCell");e.class("sapCepWorkPageCellEmpty");e.openEnd()}else{for(var s=0;s<l.length;s++){e.renderControl(l[s])}}if(t.getEditMode()){if(n>1&&a){e.renderControl(t.getDeleteButton())}if(o!==0){e.renderControl(t.getResizer())}if(n<r){e.renderControl(t.getAddButton("left"))}if(o===n-1&&n<r){e.renderControl(t.getAddButton("right"))}e.openStart("div");e.class("sapCepColumnToolbar");e.openEnd();e.renderControl(t.getAddWidgetButton());e.close("div")}if(a){e.close("div")}e.close("div")}};return e},true);
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/components/workPageBuilder/controls/WorkPageColumnResizer", ["sap/ui/core/Control"],function(e){"use strict";var t=e.extend("sap.ushell.components.workPageBuilder.controls.WorkPageColumnResizer",{metadata:{library:"sap.ushell",events:{resizerMoved:{parameters:{posXDiff:{type:"float"}}},resizerReleased:{}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.class("sapCepDivider");e.attr("tabindex","0");e.openEnd();e.openStart("div");e.class("sapCepDividerInner");e.openEnd();e.close("div");e.close("div")}}});t.prototype.init=function(){this._fnMouseMove=this.mouseMove.bind(this);this._fnMouseUp=this.mouseUp.bind(this)};t.prototype.exit=function(){window.document.removeEventListener("mousemove",this._fnMouseMove);window.document.removeEventListener("mouseup",this._fnMouseUp)};t.prototype.mouseUp=function(){window.document.removeEventListener("mouseup",this._fnMouseUp);window.document.removeEventListener("mousemove",this._fnMouseMove);this.fireEvent("resizerReleased")};t.prototype.mouseMove=function(e){this.fireEvent("resizerMoved",{posXDiff:e.pageX-this.getXOrigin()})};t.prototype.onmousedown=function(){window.document.addEventListener("mousemove",this._fnMouseMove);window.document.addEventListener("mouseup",this._fnMouseUp)};t.prototype.onkeydown=function(e){if([37,39].indexOf(e.keyCode)===-1){return}var t=this.getParent().getParent();var o=t.getSingleColumnWidth();if(e.keyCode===37){o=-o}this.fireEvent("resizerMoved",{posXDiff:o});this.fireEvent("resizerReleased")};t.prototype.getXOrigin=function(){var e=this.$().get(0).getBoundingClientRect();return e.x+e.width/2};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageBuilder/controls/WorkPageRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,t){e.openStart("div",t);e.class("cepWorkPage");e.class("sapContrastPlus");if(t.getEditMode()){e.class("sapCepEditMode")}e.openEnd();if(t.getTitle()&&t.getTitle().getVisible()){e.openStart("div");e.class("sapCepWorkPageTitle");e.openEnd();e.renderControl(t.getTitle());e.close("div")}var o=t.getRows();if(o.length<=0&&t.getLoaded()){e.renderControl(t.getIllustratedMessage())}else{e.openStart("div",t.getId()+"-rows");e.openEnd();for(var r=0;r<o.length;r++){e.renderControl(o[r])}e.close("div")}e.close("div")};return e});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/components/workPageBuilder/controls/WorkPageRow", ["sap/ui/core/Control","sap/ushell/components/workPageBuilder/controls/WorkPageButton","sap/ushell/components/workPageBuilder/controls/WorkPageRowRenderer","sap/ushell/ui/launchpad/ExtendedChangeDetection"],function(t,e,o,n){"use strict";var s=t.extend("sap.ushell.components.workPageBuilder.controls.WorkPageRow",{metadata:{library:"sap.ushell",properties:{editMode:{type:"boolean",group:"Misc",defaultValue:false,bindable:true},addRowButtonTooltip:{type:"string",group:"Misc",defaultValue:"",bindable:true},maxColumns:{type:"int",group:"Misc",defaultValue:4,bindable:true}},defaultAggregation:"columns",aggregations:{columns:{type:"sap.ushell.components.workPageBuilder.controls.WorkPageColumn",multiple:true,singularName:"column"},headerBar:{type:"sap.m.IBar",multiple:false},controlButtons:{type:"sap.m.Button",multiple:true,singularName:"controlButton"},title:{type:"sap.m.Title",multiple:false},messageStrip:{type:"sap.m.MessageStrip",multiple:false},_addButtonBottom:{type:"sap.ushell.components.workPageBuilder.controls.WorkPageButton",multiple:false,visibility:"hidden"},_addButtonTop:{type:"sap.ushell.components.workPageBuilder.controls.WorkPageButton",multiple:false,visibility:"hidden"}},events:{addRow:{parameters:{bottom:{type:"boolean"}}}}},renderer:o});s.prototype.init=function(){this._oColumnsChangeDetection=new n("columns",this);t.prototype.init.apply(this,arguments)};s.prototype.exit=function(){this._oColumnsChangeDetection.destroy();t.prototype.exit.apply(this,arguments)};s.prototype.getSingleColumnWidth=function(){return this.$().width()/24};s.prototype.onfocusin=function(){if(!this.hasStyleClass("sapCepWorkPageRowFocused")){this.addStyleClass("sapCepWorkPageRowFocused")}};s.prototype.onfocusout=function(){if(this.hasStyleClass("sapCepWorkPageRowFocused")){this.removeStyleClass("sapCepWorkPageRowFocused")}};s.prototype._createAddButton=function(t){var o=t==="bottom"?"sapCepRowButtonBottom":"sapCepRowButtonTop";return new e({icon:"sap-icon://add",tooltip:this.getAddRowButtonTooltip(),press:function(){this.fireEvent("addRow",{bottom:t==="bottom"})}.bind(this)}).addStyleClass("sapCepRowButton "+o)};s.prototype.getAddButton=function(t){if(t==="bottom"){if(!this.getAggregation("_addButtonBottom")){this.setAggregation("_addButtonBottom",this._createAddButton(t))}return this.getAggregation("_addButtonBottom")}else if(!this.getAggregation("_addButtonTop")){this.setAggregation("_addButtonTop",this._createAddButton(t))}return this.getAggregation("_addButtonTop")};s.prototype.getIndex=function(){return this.getParent().indexOfAggregation("rows",this)};s.prototype.getCappedColumnCount=function(){var t=this.getColumns().length;var e=this.getMaxColumns();if(this.getEditMode()){return t}return t>e?e:t};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageBuilder/controls/WorkPageRowRenderer", function(){"use strict";var e={apiVersion:2,render:function(e,t){if(!t.getVisible()){return}var o=t.getIndex();var r=t.getColumns();var n=t.getCappedColumnCount();e.openStart("div",t);e.class("sapCepWorkPageRow");if(o===0){e.class("sapCepWorkPageRowFirst")}e.openEnd();e.openStart("div");e.class("sapCepWorkPageRowLimiter");e.openEnd();if(t.getEditMode()){var d=t.getControlButtons();if(d.length>0){e.openStart("div");e.class("sapCepWorkPageRowControlButtons");e.openEnd();for(var a=0;a<d.length;a++){e.renderControl(d[a])}e.close("div")}}if(t.getEditMode()){e.renderControl(t.getHeaderBar())}else{e.renderControl(t.getTitle())}if(t.getMessageStrip()){e.renderControl(t.getMessageStrip())}e.openStart("div");e.class("sapCepWorkPageRowInner");e.openEnd();for(var i=0;i<n;i++){e.renderControl(r[i])}if(t.getEditMode()){e.renderControl(t.getAddButton("top"));e.renderControl(t.getAddButton("bottom"))}e.close("div");e.close("div");e.close("div")}};return e},true);
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageRuntime/Component", ["sap/ui/core/UIComponent"],function(t){"use strict";return t.extend("sap.ushell.components.workPageRuntime.Component",{metadata:{manifest:"json",library:"sap.ushell"},getNavigationDisabled:function(){var t=this.getComponentData()||{};return!!t.navigationDisabled},hideRuntime:function(){this.getRootControl().getController().hideRuntime()},onRouteMatched:function(){this.getRootControl().getController().onRouteMatched()}})});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageRuntime/controller/WorkPageRuntime.controller", ["sap/base/Log","sap/ui/core/mvc/Controller","sap/ushell/components/workPageRuntime/services/WorkPage","sap/base/util/deepExtend","sap/ushell/EventHub","sap/ushell/components/pages/controller/PagesAndSpaceId","sap/ushell/Config"],function(e,t,o,n,i,a,r){"use strict";return t.extend("sap.ushell.components.workPageRuntime.controller.WorkPageRuntime",{onInit:function(){var e=sap.ushell.Container.getRenderer();var t=new URLSearchParams(window.location.search);this.oWorkPageService=new o;this.oWorkPageNavContainer=this.byId("workpageNavContainer");this.oEmptyPage=this.byId("emptyPage");this._oWorkPageBuilderComponentCreatedPromise=new Promise(function(e,t){this._oWorkPageBuilderComponentResolve=e;this._oWorkPageBuilderComponentReject=t}.bind(this));return this._getPageId().then(function(o){this._sPageId=o;this._sSiteId=t.get("siteId")||r.last("/core/site/siteId");return this._onWorkPageLoad().finally(function(){i.emit("CenterViewPointContentRendered");if(!this.getOwnerComponent().getNavigationDisabled()){this.oContainerRouter=e.getRouter();this.oContainerRouter.getRoute("home").attachMatched(this.onRouteMatched.bind(this,false));this.oContainerRouter.getRoute("openFLPPage").attachMatched(this.onRouteMatched.bind(this,false))}}.bind(this))}.bind(this)).catch(this._handleErrors.bind(this))},_navigate:function(){this.oWorkPageNavContainer.to(this.byId("workPage"))},onWorkPageBuilderCreated:function(e){this._oWorkPageBuilderComponent=e.getParameter("component");this._oWorkPageBuilderComponentResolve(this._oWorkPageBuilderComponent)},_handleErrors:function(t){e.error("An error occurred while loading the page",t);e.debug("cep/editMode: on Route matched: Handle errors","Work Page runtime");this.oWorkPageNavContainer.to(this.byId("errorPage"))},onRouteMatched:function(){e.debug("cep/editMode: on Route matched","Work Page runtime");return this._getPageId().then(function(e){this._sPageId=e;return this._onWorkPageLoad()}.bind(this)).catch(this._handleErrors.bind(this))},_onWorkPageLoad:function(){this._oLoadWorkPageAndVisualizationsPromise=this.oWorkPageService.loadWorkPageAndVisualizations(this._sSiteId,this._sPageId);return Promise.all([this._oWorkPageBuilderComponentCreatedPromise,this._oLoadWorkPageAndVisualizationsPromise]).then(function(e){var t=e[0];var o=e[1];this._oOriginalData=n({},o);t.setPageData(o);this._navigate()}.bind(this))},_getPageId:function(){if(r.last("/core/workPages/myHome/pageId")){return Promise.resolve(r.last("/core/workPages/myHome/pageId"))}return a._getPageAndSpaceId().then(function(e){return e.pageId})},hideRuntime:function(){e.debug("cep/editMode: navigate to empty page","Page runtime");this.oWorkPageNavContainer.to(this.oEmptyPage)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageRuntime/services/NavigationResolver", ["sap/base/util/ObjectPath","sap/ui/core/Core","sap/ushell/Config","sap/base/Log"],function(e,t,n,o){"use strict";var r=function(){this._sBaseUrl=n.last("/core/workPages/navigationApiUrl");this._sSiteId=e.get("ushell.site.siteId",window["sap-ushell-config"])};r.prototype._fetchCsrfToken=function(){if(this._oFetchCsrfTokenPromise){return this._oFetchCsrfTokenPromise}this._oFetchCsrfTokenPromise=fetch(this._sBaseUrl,{method:"HEAD",headers:{"x-csrf-token":"fetch","Accept-Language":t.getConfiguration().getLanguageTag()}}).then(function(e){return e.headers.get("x-csrf-token")});return this._oFetchCsrfTokenPromise};r.prototype.resolveByInbound=function(e,n){return this._fetchCsrfToken().then(function(o){return fetch(this._sBaseUrl+"/resolve/inbound",{method:"POST",headers:{"Content-Type":"application/json; utf-8",Accept:"application/json","x-csrf-token":o,"Accept-Language":t.getConfiguration().getLanguageTag()},body:JSON.stringify({inboundIdentifier:e,intentParameters:n,queryParameters:{siteId:this._sSiteId},launchType:"standalone"})}).then(function(e){if(e.ok===false){return Promise.reject(e.statusText)}return e.json()}).then(function(e){var t=e.value||e;var n=Array.isArray(t)?t[0].url:t.url;return{additionalInformation:"",url:n,applicationType:"URL",navigationMode:"newWindow"}})}.bind(this)).catch(function(t){o.error("Tile target for inboundId '"+e+"' could not be resolved. The tile will be shown but will not navigate.");o.error(t);return{additionalInformation:"",url:"",applicationType:"URL",navigationMode:"newWindow"}})};return r},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/workPageRuntime/services/WorkPage", ["sap/ui/core/Core","sap/ushell/utils/HttpClient","sap/base/util/ObjectPath","sap/ushell/Config","sap/base/Log"],function(e,t,a,r,s){"use strict";var i=function(){this.httpClient=new t;this._sBaseUrl=r.last("/core/workPages/contentApiUrl")};i.prototype._validateData=function(e){s.debug("cep/editMode: load Page: validate","Work Page service");if(e.errors&&e.errors.length>0){return Promise.reject(e.errors.map(function(e){return e.message}).join(",\n"))}if(!a.get("data.WorkPage",e)){s.debug("cep/editMode: load Page: validate: reject: data is empty","Work Page service");return Promise.reject("Work Page data is empty")}return Promise.resolve(e)};i.prototype.loadWorkPageAndVisualizations=function(e,t){var r="{"+"WorkPage("+'SiteId:"'+e+'",'+'WorkPageId:"'+t+'"'+") {"+"Id,"+"Contents,"+"Editable,"+"UsedVisualizations{"+"nodes{"+"Id,"+"Type,"+"Descriptor,"+"DescriptorResources{"+"BaseUrl,"+"DescriptorPath"+"}"+"}"+"}"+"}"+"}";return this._doRequest(r).then(this._validateData).then(function(e){var t=a.get("data.WorkPage.Contents",e);var r=a.get("data.WorkPage.UsedVisualizations.nodes",e)||[];var s=a.get("data.WorkPage.Editable",e)===true;return{WorkPage:{Contents:t,UsedVisualizations:{nodes:r},Editable:s}}})};i.prototype._doRequest=function(t){return this.httpClient.get(this._sBaseUrl+"?query="+t,{headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Language":e.getConfiguration().getLanguageTag()}}).then(function(e){if(e.status<200||e.status>=300){return Promise.reject("HTTP request failed with status: "+e.status+" - "+e.statusText)}return JSON.parse(e.responseText||"{}")})};return i},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/functionBindPrototype", ["sap/base/Log"],function(e){"use strict";e.error("The application uses an obsolete sap.ushell.functionBindPrototype module.","The reference to this module has to be removed.")},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/iconfonts", ["sap/ui/core/IconPool"],function(e){"use strict";var i={};i.registerFiori2IconFont=function(){e.registerFont({fontFamily:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});e.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"TNTIcons",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});var i={fontFamily:"BusinessSuiteInAppSymbols",collectionName:"BusinessSuiteInAppSymbols",icons:[["icon-heart","e000"],["icon-quarter","e001"],["icon-year","e002"],["icon-equalizer","e003"],["icon-component","e004"],["icon-component-private","e005"],["icon-raw-material","e006"],["icon-sms","e007"],["icon-add-note","e008"],["icon-change-time-horizon","e009"],["icon-table-chart-customization","e00a"],["icon-delegated-important-task","e00b"],["icon-forklift","e00c"],["icon-coins","e00d"],["icon-filter-menu","e00e"],["icon-target-to-date","e00f"],["icon-program","e010"],["icon-phase","e011"],["icon-checklist","e012"],["icon-mirrored-task","e013"],["icon-sub-project","e014"],["icon-checklist-item","e015"],["icon-adhoc-analysis","e016"],["icon-change-analysis","e017"],["icon-review-demands","e018"],["icon-project-definition","e019"],["icon-data-access","e01a"],["icon-define-shortage","e01b"],["icon-review-supplies","e01c"],["icon-change-log","e01d"],["icon-priority-1","e01e"],["icon-priority-2","e01f"],["icon-jam","e020"],["icon-milestone","e021"],["icon-bulleting-with-numbers","e022"],["icon-decrease-indent","e023"],["icon-increase-indent","e024"],["icon-bold","e025"],["icon-italic","e026"],["icon-strike-through","e027"],["icon-underline","e028"],["icon-save-as","e029"],["icon-segmentation","e02A"],["icon-context-menu","e02B"],["icon-snapshot","e02C"],["icon-substraction-b-a","e02D"],["icon-substraction-a-b","e02E"],["icon-intersection","e02F"],["icon-union","e030"],["icon-top","e031"],["icon-bottom","e032"],["icon-page-up","e033"],["icon-page-down","e034"],["icon-create-dashboard","e035"],["icon-excelsius-file","e036"],["icon-open-folder","e037"],["icon-neutral","e038"],["icon-split-segmentation","e039"],["icon-manage-budget","e03A"],["icon-blocked","e03B"],["icon-pipette","e03C"],["icon-top-recipe","e03D"],["icon-recipe","e03E"],["icon-ingredients","e03F"],["icon-multiple-charts","e040"],["icon-descending-bars","e041"],["icon-descending-stacked-bars","e042"],["icon-scatter-plot","e043"],["icon-spill","e044"],["icon-fire","e045"],["icon-stratification","e046"],["icon-relationship","e047"],["icon-margin-decomposition","e048"],["icon-control-group","e049"],["icon-bullet-chart","e04A"],["icon-responsible-area","e04B"],["icon-increase","e04C"],["icon-decrease","e04D"],["icon-current-stock","e04E"],["icon-expedite","e04F"],["icon-postpone","e050"],["icon-approved","e051"],["icon-partially-delivered","e052"],["icon-line-bar-chart","e053"],["icon-expand-all","e054"],["icon-submission","e055"],["icon-change-request","e056"],["icon-column-unselected","e057"],["icon-column-selected","e058"],["icon-row-unselected","e059"],["icon-row-selected","e05A"],["icon-stock-requirements","e05B"],["icon-gender-male-and-female","e05C"],["icon-icon-marital-status","e05D"],["icon-birthday","e05E"],["icon-classification","e05F"],["icon-marked-for-deletion","e060"],["icon-bullet-chart","e061"],["icon-remove-filter","e062"],["icon-bank-account","e063"],["icon-savings-account","e064"],["icon-debit-card","e065"],["icon-vip-customer","e066"],["icon-undesirable-customer","e067"],["icon-answered-change-request","e068"],["icon-collected-change-request","e069"],["icon-draw-freehand","e06A"],["icon-draw-circle","e06B"],["icon-completed","e06C"],["icon-answered","e06D"],["icon-traffic-cone","e06E"],["icon-traffic-lights","e06F"],["icon-container","e070"],["icon-container-loading","e071"],["icon-traffic-jam","e072"],["icon-products","e073"],["icon-sidepanel","e074"],["icon-split-screen","e075"],["icon-truck-driver","e076"],["icon-keep-segment","e077"],["icon-exclude-segment","e078"],["icon-separate-segments","e079"],["icon-distribute-segments","e07A"],["icon-next-open-item","e07B"],["icon-where-used","e07C"],["icon-outbound-delivery","e07D"],["icon-outbound-delivery-inactive","e07E"],["icon-outbound-delivery-active","e07F"],["icon-target","e080"],["icon-source","e081"],["icon-material","e082"],["icon-due-date","e083"],["icon-overdue","e084"],["icon-set-as-default","e085"],["icon-face-very-bad","e086"],["icon-face-bad","e087"],["icon-face-skeptical","e088"],["icon-face-neutral","e089"],["icon-face-astonished","e08A"],["icon-face-happy","e08B"],["icon-face-very-happy","e08C"],["icon-face-awful","e08D"],["icon-face-devastated","e08E"],["icon-face-okey-dokey","e08F"],["icon-alarm","e090"],["icon-activate","e091"],["icon-segment-preview-reference-objects","e092"],["icon-radius","e093"],["icon-polygon-black","e094"],["icon-polygon-white","e095"],["icon-polygon","e096"],["icon-no-filter","e097"],["icon-grip","e098"],["icon-water","e09A"],["icon-liquid","e09C"],["icon-gas","e09B"],["icon-gas-2","e09d"],["icon-water-2","e09e"],["icon-operator","e09f"],["icon-target-filter","e0a0"],["icon-equipment","e0A1"],["icon-gis-layer","e0A2"],["icon-section","e0A3"],["icon-kohorte","e0A4"],["icon-female","e0A5"],["icon-male","e0A6"],["icon-model","e0A7"],["icon-hourglass","e0A8"],["icon-plain-grid-layout","e0A9"],["icon-top-panel-layout","e0AA"],["icon-2x1-grid-layout","e0AB"],["icon-1x2-grid-layout","e0AC"],["icon-side-panel-left-layout","e0AD"],["icon-2x2-grid-layout","e0AE"],["icon-inverse-t-layout","e0AF"],["icon-t-layout","e0B0"],["icon-top-side-panel-layout","e0B1"],["icon-side-top-panel-layout","e0B2"],["icon-4x4-grid-layout","e0B3"],["icon-add-point","e0B4"],["icon-add-polyline","e0B5"],["icon-add-polygone","e0B6"],["icon-email-send-delayed","e0B7"],["icon-email-not-opened","e0B8"],["icon-link-not-clicked","e0B9"],["icon-sms-send-delayed","e0BA"],["icon-ab-testing","e0BB"],["icon-tv","e0BC"],["icon-radio","e0BD"],["icon-outdoor","e0BE"],["icon-event","e0BF"],["icon-paid-search","e0C0"],["icon-display-ads","e0C1"],["icon-call-center","e0C2"],["icon-social","e0C3"],["icon-event2","e0C4"],["icon-official-service-group","e0C5"],["icon-time-deposit","e0C6"],["icon-early-widthdrawal-for-time-deposits","e0C7"],["icon-aggregated-view","e0C8"],["icon-detailed-view","e0C9"],["icon-rescheduling","e0CA"],["icon-resequencing","e0CB"],["icon-movement-warning","e0CC"],["icon-multiple-warnings","e0CD"],["icon-box-truck","e0CE"],["icon-box-truck-empty","e0CF"],["icon-tractor","e0C0"],["icon-driver","e0D1"],["icon-driver-warning","e0D2"],["icon-overlap","e0D3"],["icon-expand-overlap","e0D4"],["icon-collapse-overlap","e0D5"],["icon-utilization","e0D6"],["icon-expand-utilization","e0D7"],["icon-collapse-utilization","e0D8"],["icon-trailer","e0D7"],["icon-container-closed","e0DA"],["icon-railcar","e0DB"],["icon-warehouse","e0DC"],["icon-goods","e0DD"],["icon-ship","e0DE"],["icon-truck-driver","e0DF"],["icon-return-delivery","e0E0"],["icon-return-order","e0E1"],["icon-contract","e0E2"],["icon-business-partner","e0E3"],["icon-business-partner-verified","e0E4"],["icon-business-partner-anonymous","e0E5"],["icon-business-partner-self-identified","e0E6"],["icon-money-withdrawal","e0E7"],["icon-truck-load","e0E8"],["icon-truck-load-unload","e0ea"],["icon-truck-unload","e0e9"],["icon-pharmacy","e0eb"],["icon-medicine-syrup","e0ec"],["icon-reminder","e0ed"],["icon-medicine-pill","e0ee"],["icon-medicine-ointment","e0ef"],["icon-medicine-drops","e0f0"],["icon-blood-test","e0f1"],["icon-temperature","e0f2"],["icon-allergies","e0f9"],["icon-immunization","e0f8"],["icon-blood-pressure","e0f7"],["icon-health-tracking","e0f6"],["icon-weight","e0f5"],["icon-foot-steps","e0f4"],["icon-medicine-inhaler","e0f3"],["icon-rescheduling2","e0fa"],["icon-resequencing2","e0fb"],["icon-no-time-change","e0fc"],["icon-time-change","e0fd"],["icon-smart-matcher","e0fe"],["icon-3d","e0ff"],["icon-parallel-sequence","e100"],["icon-alternative-sequence","e101"],["icon-main-sequence","e102"],["icon-refinery","e103"],["icon-terminal","e104"],["icon-vessel","e105"],["icon-barge","e106"],["icon-road","e107"],["icon-pipeline","e108"],["icon-delay","e109"],["icon-legal-section","e10a"],["icon-causes","e10b"],["icon-effects","e10c"],["icon-shared-by-me","e10d"],["icon-shared-with-me","e10e"],["icon-main-milestone","e10f"],["icon-indicator-groups","e110"],["icon-alert-groups","e111"],["icon-function-alert","e112"],["icon-function-hierarchy","e113"],["icon-rfid","e114"],["icon-input","e115"],["icon-software-item","e116"],["icon-product-view","e117"],["icon-software-item-variant","e118"],["icon-lighthouse","e119"],["icon-demand-unit","e11a"],["icon-fma-management","e11b"],["icon-fma-validation","e11c"],["icon-fma-analytics","e11d"],["icon-class","e11e"],["icon-overview","e11f"],["icon-production","e120"],["icon-subclass","e121"],["icon-variant-configuration","e122"],["icon-sum","e123"],["icon-add-outside","e124"],["icon-compressor","e125"],["icon-dehydrator","e126"],["icon-heater-treater","e127"],["icon-pump","e128"],["icon-separator","e129"],["icon-well-completion","e12a"],["icon-well","e12b"],["icon-meter-chained","e12c"],["icon-cluster-chained","e12d"],["icon-tank-chained","e12e"],["icon-empty-trailer","e12f"],["icon-door","e130"],["icon-loading-point","e131"],["icon-stock-warehouse","e132"],["icon-gate","e133"],["icon-timeseries-waterfall-chart","e134"],["icon-expand-collapse-level-2","e135"],["icon-expand-collapse-level-3","e136"],["icon-recycle","e137"],["icon-stages-warning","e138"],["icon-empty-warning","e139"],["icon-ps-text","e140"],["icon-activity","e141"],["icon-activity-element","e142"],["icon-transformer","e143"],["icon-generation","e144"],["icon-consumer","e145"],["icon-storage","e146"],["icon-circuit-breaker","e147"],["icon-grid","e148"],["icon-applied_filter","e149"],["icon-thumb-sideway","e14a"],["icon-thumb-sideway-filled","e14b"],["icon-thumb-up-filled","e14c"],["icon-thumb-down-filled","e14d"],["icon-multi-container","e14e"],["icon-network-header","e150"],["icon-late","e151"],["icon-created","e152"],["icon-dispatched-deallocate","e153"],["icon-confirmed","e154"],["icon-unfirmed","e155"],["icon-firmed","e156"],["icon-unsaved-changes","e157"],["icon-project-definition-2","e158"],["icon-asterisk","e159"],["icon-equal","e15a"],["icon-not-equal","e15b"],["icon-fixed-cell","e15c"],["icon-partially-fixed-cell","e15d"],["icon-stripes-pattern","e15e"],["icon-feature-dictionary","e15f"],["icon-variant-planning","e160"],["icon-requirement-model","e161"],["icon-bottle","e162"],["icon-bottle-cap","e163"],["icon-pallet","e164"],["icon-foil","e165"],["icon-tray","e166"],["icon-unknown-dependency","e167"],["icon-layer","e168"],["icon-move-folder","e169"],["icon-remove-folder","e16a"],["icon-match-case","e16b"],["icon-match-whole-word","e16c"],["icon-remove-total","e16d"],["icon-after-total","e16e"],["icon-before-total","e16f"],["icon-workbook-filter","e170"],["icon-update-filter","e171"],["icon-cell-lock","e172"],["icon-monitor-assembly-sequence","e173"],["icon-monitor-just-in-time-calls","e174"],["icon-manage-charging-stations","e175"]]};var n={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0020","e0c3"],["F0021","e10d"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},o={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","E200"],["F0019","E201"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","E22F"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E214"],["F0429","E2A6"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},c={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},F={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2EA"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"]]},E={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E384"],["F0718","E383"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},t={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},a={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},r={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1520","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},l={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1562","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"],["partner-enablement","E40A"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},d={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"],["Wifi-Online","E710"],["Wifi-Offline","E711"],["Sunrise","E712"],["Sunset","E713"],["Afternoon","E714"],["Night","E715"],["Loading Date","E715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71A"],["Heavy Rain","e71B"],["Foggy","e71C"],["Snow","e71D"],["Risk Assessment","e71E"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"],["Windy","e729"],["Oil Tank","e72A"],["Location Assets","e72B"],["Transport Systems","e72C"],["Field","e72D"],["Field Group","e72E"],["Record","e730"],["Record Group","e731"]]},u={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(n,c,o,d,F,E,u,t,a,r,l,s,i)};i.registerFonts=function(){var i,n,o,c;for(n=0;n<arguments.length;n=n+1){i=arguments[n];for(o=0;o<i.icons.length;o=o+1){c={};c.fontFamily=i.fontFamily;c.content=i.icons[o][1];c.overWrite=false;c.suppressMirroring=true;e.addIcon(i.icons[o][0],i.collectionName,c)}}};return i},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/library", ["sap/ui/core/Core","sap/ui/core/library","sap/m/library"],function(e,l,a){"use strict";var s=e.initLibrary({name:"sap.ushell",version:"1.115.1",dependencies:["sap.ui.core","sap.m"],types:["sap.ushell.AllMyAppsState","sap.ushell.AllMyAppsProviderType","sap.ushell.AppTitleState","sap.ushell.ContentNodeType","sap.ushell.components.container.ApplicationType","sap.ushell.DisplayFormat","sap.ushell.NavigationState","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.VisualizationLoadState","sap.ushell.AppType","sap.ushell.FloatingNumberType"],interfaces:[],controls:["sap.ushell.components.container.ApplicationContainer","sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm","sap.ushell.components.tiles.sbtilecontent","sap.ushell.components.workPageBuilder.controls.WorkPage","sap.ushell.components.workPageBuilder.controls.WorkPageButton","sap.ushell.components.workPageBuilder.controls.WorkPageCell","sap.ushell.components.workPageBuilder.controls.WorkPageColumn","sap.ushell.components.workPageBuilder.controls.WorkPageColumnResizer","sap.ushell.components.workPageBuilder.controls.WorkPageRow","sap.ushell.services._VisualizationInstantiation.VizInstance","sap.ushell.services._VisualizationInstantiation.VizInstanceAbap","sap.ushell.services._VisualizationInstantiation.VizInstanceCdm","sap.ushell.services._VisualizationInstantiation.VizInstanceLaunchPage","sap.ushell.services._VisualizationInstantiation.VizInstanceLink","sap.ushell.ui.AppContainer","sap.ushell.ui.ContentNodeSelector","sap.ushell.ui.ContentNodeTreeItem","sap.ushell.ui.CustomGroupHeaderListItem","sap.ushell.ui.ShellHeader","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.appfinder.PinButton","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SendAsEmailButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.CatalogEntryContainer","sap.ushell.ui.launchpad.CatalogsContainer","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Page","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Section","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.section.CompactArea","sap.ushell.ui.shell.FloatingContainer","sap.ushell.ui.shell.NavigationMiniTile","sap.ushell.ui.shell.OverflowListItem","sap.ushell.ui.shell.RightFloatingContainer","sap.ushell.ui.shell.ShellAppTitle","sap.ushell.ui.shell.ShellFloatingAction","sap.ushell.ui.shell.ShellFloatingActions","sap.ushell.ui.shell.ShellHeadItem","sap.ushell.ui.shell.ShellNavigationMenu","sap.ushell.ui.shell.SidePane","sap.ushell.ui.shell.SubHeader","sap.ushell.ui.shell.SysInfoBar","sap.ushell.ui.shell.ToolArea","sap.ushell.ui.shell.ToolAreaItem","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:["sap.ushell.ui.launchpad.AccessibilityCustomData"],extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});s.AllMyAppsState={FirstLevel:"FirstLevel",SecondLevel:"SecondLevel",Details:"Details",FirstLevelSpread:"FirstLevelSpread"};s.AllMyAppsProviderType={HOME:0,EXTERNAL:1,CATALOG:2};s.AppTitleState={ShellNavMenuOnly:"ShellNavMenuOnly",AllMyAppsOnly:"AllMyAppsOnly",ShellNavMenu:"ShellNavMenu",AllMyApps:"AllMyApps"};s.ContentNodeType={HomepageGroup:"HomepageGroup",Space:"Space",Page:"Page"};s.components=s.components||{};s.components.container=s.components.container||{};s.components.container.ApplicationType={NWBC:"NWBC",SAPUI5:"SAPUI5",TR:"TR",URL:"URL",WCF:"WCF",WDA:"WDA"};s.DisplayFormat={Standard:"standard",Compact:"compact",Flat:"flat",FlatWide:"flatWide",StandardWide:"standardWide"};s.NavigationState={InProgress:"InProgress",Finished:"Finished"};s.ui=s.ui||{};s.ui.launchpad=s.ui.launchpad||{};s.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};s.ui.tile=s.ui.tile||{};s.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};s.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};s.VisualizationLoadState={Loading:"Loading",Loaded:"Loaded",InsufficientRoles:"InsufficientRoles",OutOfRoleContext:"OutOfRoleContext",NoNavTarget:"NoNavTarget",Failed:"Failed",Disabled:"Disabled"};s.AppType={OVP:"OVP",SEARCH:"Search",FACTSHEET:"FactSheet",COPILOT:"Co-Pilot",URL:"External Link",APP:"Application"};s.FloatingNumberType={None:"None",Notifications:"Notifications",OverflowButton:"OverflowButton"};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/navigationMode", ["sap/base/Log","sap/base/util/isPlainObject","sap/ushell/Config"],function(e,n,a){"use strict";var i={};var o=function(n){var a=true;if(n){if(typeof n!=="object"){a=false}else{Object.keys(n).forEach(function(e){if(["GUI","WDA","WCF"].indexOf(e)===-1){a=false}else if(typeof n[e]!=="boolean"){a=false}})}}if(!a){e.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(n),"sap.ushell.services.navigationMode")}};var t=function(e){switch(e){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined}};i._isInplaceEnabledForApplicationType=function(e){var i=a.last("/core/navigation/enableInPlaceForClassicUIs");o(i);if(n(i)){return i[t(e)]}return false};i.compute=function(n,a,o){var t;var d={};if(["inplace","explace"].indexOf(a)>=0){d["sap-ushell-next-navmode"]=a}if(["inplace","explace","frameless"].indexOf(o)>=0){t=i._getInternalNavigationMode(o,n);e.debug("Navigation mode was forced to "+t+" because sap-ushell-navmode parameter was set to "+o+" for target","sap.ushell.navigationMode");d.navigationMode=t;d.explicitNavMode=true;return d}if(i._isInplaceEnabledForApplicationType(n)===true){d.navigationMode=i._getInternalNavigationMode("inplace",n);d.explicitNavMode=false}return d};i._getInternalNavigationMode=function(n,a){var i={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},URL:{inplace:"embedded",explace:"newWindow",frameless:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"}};if(!i.hasOwnProperty(a)){e.error(a+" is not a valid application type","expected one of "+Object.keys(i).join(", "),"sap.ushell.navigationMode");return null}if(n!=="inplace"&&n!=="explace"&&n!=="frameless"){e.error(n+" is not a valid external navigation mode","expected one of 'inplace', 'explace' or 'frameless'","sap.ushell.navigationMode");return null}if(a==="SAPUI5"&&n==="frameless"){e.error("'"+n+"' is not a valid external navigation mode for application type '"+a+"'","falling back to internal navigation mode '"+i.SAPUI5.frameless+"'","sap.ushell.navigationMode")}return i[a][n]};i.getExternalNavigationMode=function(n){var a={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!a.hasOwnProperty(n)){e.error(n+" is not a recognized internal navigation mode","expected one of "+Object.keys(a).join(","),"sap.ushell.navigationMode");return null}return a[n]};var d=["NWBC","WDA","TR","WCF"];i.getNavigationMode=function(n,a){var i=n.additionalInformation,o=n.applicationType,t,r;if(d.indexOf((a||{}).applicationType)>-1&&!(a||{}).explicitNavMode){return"newWindowThenEmbedded"}if(n.appCapabilities&&n.appCapabilities.navigationMode){return n.appCapabilities.navigationMode}if((i===null||typeof i==="string"||typeof i==="undefined")&&(o==="URL"||o==="SAPUI5")){if(i&&i.indexOf("managed=")===0){if(i==="managed=FioriWave1"){return"embedded"}if(i==="managed="){return"newWindow"}return undefined}if(i&&i.indexOf("SAPUI5.Component=")===0){t="[a-zA-Z0-9_]+";r=["^SAPUI5.Component=",t,"([.]",t,")*$"].join("");if(!new RegExp(r).test(i)){e.warning(["The UI5 component name in",i,"is not valid.","Please use names satisfying",r].join(" "))}return"embedded"}return"newWindow"}if(d.indexOf(o)>-1){return"newWindowThenEmbedded"}return undefined};i.computeNavigationModeForHomepageTiles=function(e,n,a){var i={applicationType:e,additionalInformation:n};if(d.indexOf(e)>-1&&a){return"embedded"}return this.getNavigationMode(i)};return i},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/override", ["sap/m/GroupHeaderListItem","sap/ui/base/ManagedObject","sap/base/util/uid","sap/base/util/each"],function(t,e,i,n){"use strict";var r={};r.updateAggregation=function(t){if(this.isTreeBinding(t)){e.prototype.updateAggregation.apply(this,arguments)}else{var n=this.mBindingInfos[t],s=n.binding,o=s.getContexts(),a=n.factory,g=this.getMetadata().getJSONKeys()[t],u=g._sMutator+"Group",d=s.isGrouped()&&this[u],p=[],l=function(t){var e=this.getId()+"-"+i(),r=a(e,t);if(r.isA("sap.ui.integration.widgets.Card")){r.setBindingContext(t,"ushellCardModel")}else{r.setBindingContext(t,n.model)}this[g._sMutator](r)}.bind(this);if(d){e.prototype.updateAggregation.apply(this,arguments)}else{p=this[g._sGetter]();r._adaptCurrentGroup(o,p);r._updateCurrentGroup(o,p,n.model,l);p.length=o.length}}};r._adaptCurrentGroup=function(t,e){var i,n,r;for(i=0;i<t.length;i++){n=!!(e[i]&&e[i].isA("sap.ui.integration.widgets.Card"));r=!!t[i].getProperty(t[i].sPath+"/isCard");if(n||r){var s=i;for(;s<e.length;s++){e[s].destroy()}break}}};r._updateCurrentGroup=function(t,e,i,n){var r;for(r=0;r<t.length;r++){if(r<e.length&&!e[r].bIsDestroyed){e[r].setBindingContext(t[r],i)}else{n(t[r])}}for(;r<e.length;++r){e[r].destroy()}};r.updateAggregationGrouped=function(e){var i=this.mBindingInfos[e],r=i.binding,s=i.factory,o,a=null,g=null,u=null,d=this,p=d.getItems(),l=0,f=0,h,c,y=[];g=r.isGrouped()&&this.addItemGroup;n(r.getContexts(),function(e,m){if(g&&r.aSorters.length>0){a=r.aSorters[0].fnGroup(m);if(typeof a==="string"){a={key:a}}if(a.key!==u){var C,I;if(i.groupHeaderFactory){C=i.groupHeaderFactory(a)}I=C||new t({title:a.text||a.key}).addStyleClass("sapMListHdr");d.insertAggregation("items",I,f,true);f=f+1;u=a.key}}p=d.getItems();for(h=f;h<p.length;h=h+1){if(p[h].constructor===t){y.push(d.removeItem(p[h]));p=d.getItems()}}if(f<p.length){p[f].setBindingContext(m,i.model);if(p[f].aDelegates){n(p[f].aDelegates,function(t,e){e.vThis=m})}}else{c=d.getId()+"-"+f;o=s(c,m);o.setBindingContext(m,i.model);d.addItem(o)}f=f+1;l=f});for(h=p.length-1;h>=l;h=h-1){y.push(d.removeItem(p[h]))}setTimeout(function(){n(y,function(t,e){e.destroy()})},1)};r.updateAggregatesFactory=function(t){return function(){r.updateAggregation.bind(this)(t)}};return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/FesrEnhancer", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/performance/trace/FESR","sap/ushell/performance/ShellAnalytics"],function(e,t,r,n){"use strict";var a={HOME_INITIAL:"FLP@LOAD",HOME_LOADING:"FLP@DURING_LOAD",FINDER_INITIAL:"FLP@LOAD_FINDER",APP_INITIAL:"FLP@DEEP_LINK",NAVIGATION:"NAVIGATION",CUSTOM_HOME_INITIAL:"FLPCUSTOMHOME"};var i={APP_START:1,STEP_IN_APP:2,UNKNOWN:3};var s={_fnOriginalOnBeforeCreated:null,_lastTrackedRecord:null,init:function(){if(r.getActive()){n.enable();this._fnOriginalOnBeforeCreated=r.onBeforeCreated;r.onBeforeCreated=this._onBeforeCreatedHandler.bind(this)}},reset:function(){r.onBeforeCreated=this._fnOriginalOnBeforeCreated;n.disable();this._setLastTrackedRecord(null)},_getPerformanceEntries:function(e,t){if(t){return performance.getEntriesByName(e)}return performance.getEntriesByType("mark").filter(function(t){return t.name.includes(e)})},_getLastTrackedApplicationId:function(){var e=n.getCurrentApplication();if(e){return e.id}return null},_getLastTrackedRecord:function(){return this._lastTrackedRecord},_setLastTrackedRecord:function(e){this._lastTrackedRecord=e},_onBeforeCreatedHandler:function(t,r){var n=this._detectScenario(t,r),a=this._getLastTrackedApplicationId();if(a){t.appNameShort=a}if(!n.scenario){e.debug("[fesrEnhFlp] unknown scenario, step name: "+t.stepName);return t}var i=this._enhanceRecord(n.scenario,t,n.relatedEvent);e.debug("[fesrEnhFlp] pass step name: "+i.stepName);e.debug("[fesrEnhFlp] pass short application name: "+i.appNameShort);e.debug("[fesrEnhFlp] pass long application name: "+i.appNameLong);if(/tile.*press/.test(i.stepName)){e.debug("[fesrEnhFlp] did not overwrite press step name")}if(/__cdm/.test(i.stepName)){e.debug("[fesrEnhFlp] did not overwrite press step name(cdm)")}return i},_detectScenario:function(e,t){function r(e,t){var r={scenario:e};if(t){r.relatedEvent=t}return r}if(e.stepName==="undetermined_startup"){var i=n.getLastClosedRecord();this._setLastTrackedRecord(i);if(!!i&&i.isHomeApp){return r(a.CUSTOM_HOME_INITIAL)}switch(e.appNameLong){case"sap.ushell.components.homepage":return r(a.HOME_INITIAL);case"sap.ushell.components.pages":return r(a.HOME_INITIAL);case"sap.ushell.components.appfinder":return r(a.FINDER_INITIAL);default:return r(a.APP_INITIAL,i)}}var s=this._getLastTrackedRecord(),c=n.getNextNavigationRecords(s),o,p;if(c.length===1){p=c[0];if(p&&s&&!p.isEqual(s)||!s&&p){this._setLastTrackedRecord(p);o=p.step===a.HOME_LOADING?a.HOME_LOADING:a.NAVIGATION;return r(o,p)}}else if(c.length>1){c.pop();p=c[0];this._setLastTrackedRecord(p);o=p.step===a.HOME_LOADING?a.HOME_LOADING:a.NAVIGATION;return r(o,p)}return r(null)},_enhanceRecord:function(t,r,n){switch(t){case a.HOME_INITIAL:return this._enhanceInitialStart(r,t,"FLP-TTI-Homepage");case a.CUSTOM_HOME_INITIAL:return this._enhanceInitialStart(r,t,"FLP-TTI-Homepage-Custom");case a.FINDER_INITIAL:return this._enhanceInitialStart(r,t,"FLP-TTI-AppFinder");case a.APP_INITIAL:return this._enhanceInitialAppStart(r,t,n||{});case a.NAVIGATION:case a.HOME_LOADING:return this._enhanceNavigationRecord(r,t,n||{});default:break}e.warning("[fesrEnhFlp] Unknown scenario at the end of execution, unnecessary code executed",null,"sap.ushell.performance.FesrEnhancer");return r},_enhanceInitialStart:function(r,n,s){var c,o=t({},r);if(n===a.CUSTOM_HOME_INITIAL){o.stepName=n+"@"+r.appNameShort}else{o.stepName=n}o.interactionType=i.APP_START;if(s){c=this._getPerformanceEntries(s,true)[0];if(c){o.timeToInteractive=c.startTime;return o}c=this._getPerformanceEntries("FLP-Pages-Service-loadPage-end",false)[0];if(c){o.timeToInteractive=c.startTime;return o}e.warning("[fesrEnhFlp] Scenario '"+n+"' detected but expected performance mark '"+s+"' does not exist",null,"sap.ushell.performance.FesrEnhancer")}return o},_enhanceNavigationRecord:function(e,r,n){var a=t({},e);if(r!=="FLP@DURING_LOAD"){a.stepName=n.step||e.stepName}a.appNameShort=n.targetApplication||"";if(n.applicationType==="UI5"){a.interactionType=i.APP_START}if(/^FLP_BACK/.test(a.stepName)){var s=this._getPerformanceEntries("FLP-TTI-Homepage",true)[0];if(s){if(s.startTime>n.getTimeStart()){a.timeToInteractive=s.startTime-n.getTimeStart()}}}return a},_enhanceInitialAppStart:function(e,r,n){var a=t({},e);a.stepName=r;a.appNameShort=e.appNameShort;if(n.applicationType==="UI5"){a.interactionType=i.APP_START}else{a.interactionType=i.STEP_IN_APP}return a}};return s},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/ShellAnalytics", ["sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/performance/StatisticalRecord","sap/ushell/utils","sap/ushell/Config"],function(e,n,t,a,i){"use strict";var r=[],o=[],s,c,u,l=false,p=false;var h={dashboardTileClick:"HOMEPAGE_TILE",dashboardTileLinkClick:"HOMEPAGE_LINK",catalogTileClick:"FINDER_TILE"};var f={EXPLACE:"EXPLACE",INPLACE:"INPLACE"};var d={"sap.ushell.components.appfinder":"FLP_FINDER","sap.ushell.components.pages":"FLP_PAGE","sap.ushell.components.homepage":"FLP_HOME"};var g=["dashboardTileClick","dashboardTileLinkClick","catalogTileClick"];function C(){return sap.ui.getCore().getEventBus()}function v(e,n){if(n){return true}return e&&(e==="FLP_HOME"||e==="FLP_PAGE")}function m(){return r}function E(){var e=m().filter(function(e){return e.isClosed()});if(e.length>0){return e[e.length-1]}return null}function A(e){if(!e){return m()}return m().filter(function(n){return e.getTimeStart()<n.getTimeStart()&&n.isClosed()})}function I(){return c}function P(e){c=e}function T(){u=performance.now();a.setPerformanceMark("FLP -- change hash")}function L(){if(!s){s=new t;r.push(s)}return s}function H(e,n){L().setTrigger(h[n])}function N(e){L().setTargetHash(e);L().setTimeStart(u||performance.now())}function R(e){var n=e||"";if(n.slice(-7)==="(TCODE)"){return n.replace(/ .*/,"").replace(/^\*/,"").substring(0,15).concat(" (TR)")}return n}function y(e){var n="";var t=e&&e.componentInstance&&e.componentInstance.getManifest();if(t&&t["sap.app"]&&t["sap.app"].id){n=t["sap.app"].id}return n}function S(){return sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(e){var t=e.getCurrentApplication();if(!t){return{}}var a=t&&t.componentInstance&&t.componentInstance.sId&&t.componentInstance.sId.includes("homeApp-component");var i;if(t.getTechnicalParameter){i=t.getTechnicalParameter("sap-fiori-id")}else{i=Promise.resolve([])}return i.then(function(e){var i=e&&e[0];if(a){return{type:"UI5",id:i,isHomeApp:true}}if(t.homePage){var r=d[y(t)]||"FLP_HOME";return{type:"UI5",id:r}}if(t.applicationType==="UI5"){if(!i){i=y(t);i=d[i]||i}i=i.replace(/,/g,"");return{type:"UI5",id:i}}var o=n.getMetadata().technicalName||n.getCurrentApplication().text||t.applicationType;var s=R(o.replace(/,/g,""));return{type:t.applicationType,id:s}})})}function b(e,n,t){if(s){var a=n?n.id:null;s.setSourceApplication(e);s.setTargetApplication(a);s.setApplicationType(n?n.type:null);s.setNavigationMode(t);s.setIsHomeApp(n&&n.isHomeApp);if(!l&&v(a,n&&n.isHomeApp)){l=true;s.setHomepageLoading(true)}s.closeRecord();s=null}}function k(e){if(!s){return}S().then(function(n){var t=I();if(e&&e.technicalName){n.id=R(e.technicalName);n.type=n.id.slice(-4)==="(TR)"?"GUI":"NWBC"}P(n);b(t?t.id:undefined,n,f.INPLACE)})}function F(){var e=I();b(e?e.id:undefined,null,f.EXPLACE)}function M(){if(s){var e=I();s.setSourceApplication(e?e.id:undefined);s.closeRecordWithError();s=null}}function _(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.hashChanger.attachEvent("hashChanged",T);e.hashChanger.attachEvent("shellHashChanged",T)})}function O(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.hashChanger.detachEvent("hashChanged",T);e.hashChanger.detachEvent("shellHashChanged",T)})}function w(){if(p){return}p=true;g.forEach(function(e){C().subscribe("launchpad",e,H)});var n;n=e.once("ShellNavigationInitialized").do(_);o.push(n);n=e.on("trackHashChange").do(N);o.push(n);n=e.on("AppRendered").do(k);o.push(n);n=e.on("CustomHomeRendered").do(k);o.push(n);n=e.on("openedAppInNewWindow").do(F);o.push(n);n=e.on("firstSegmentCompleteLoaded").do(k);o.push(n);n=e.on("doHashChangeError").do(M);o.push(n);n=e.on("PagesRuntimeRendered").do(k);o.push(n);n=e.on("CloseFesrRecord").do(k);o.push(n)}function G(){if(!p){return}g.forEach(function(e){C().unsubscribe("launchpad",e,H)});o.forEach(function(e){e.off()});O();P(null);r=[];s=null;p=false}return{enable:w,disable:G,getAllRecords:m,getCurrentApplication:I,getLastClosedRecord:E,getNextNavigationRecords:A}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/StatisticalRecord", ["sap/base/Log","sap/ushell/Config"],function(t,i){"use strict";var e={OPEN:"OPEN",CLOSED:"CLOSED",ERROR:"ERROR"};function o(){this.status=e.OPEN;this.targetHash=null;this.trigger=null;this.timeStart=null;this.timeEnd=null;this.duration=null;this.step=null;this.sourceApplication=undefined;this.targetApplication=undefined;this.navigationMode=null;this.homepageLoading=false;this.applicationType=null}o.prototype._calculateStep=function(){if(this.targetApplication===undefined&&this.sourceApplication===undefined){return""}if(this.sourceApplication===undefined&&this._isHomePage(this.targetApplication)){return"FLP@DURING_LOAD"}if(this.sourceApplication===undefined&&!this._isHomePage(this.targetApplication)){return"FLP@DEEP_LINK"}if(this.sourceApplication&&!this._isHomePage(this.targetApplication)&&!this._isHomePage(this.sourceApplication)){return"A2A@"+this.sourceApplication}if(this.sourceApplication&&this._isHomePage(this.targetApplication)&&!this._isHomePage(this.sourceApplication)){return"FLP_BACK@"+this.sourceApplication}if(this._isHomePage(this.sourceApplication)){return"FLP@HOMEPAGE_TILE"}return""};o.prototype.isEqual=function(t){return this.timeStart===t.timeStart};o.prototype.closeRecord=function(){this.step=this._calculateStep();this.status=e.CLOSED;this.timeEnd=performance.now();if(this.timeStart){this.duration=this.timeEnd-this.timeStart}t.debug("[fesrEnhFlp] Close statistical record with step name: "+this.step)};o.prototype.closeRecordWithError=function(){this.status=e.ERROR;this.timeEnd=performance.now();this.duration=this.timeEnd-this.timeStart};o.prototype.isClosed=function(){return this.status===e.CLOSED};o.prototype.getStep=function(){return this.step};o.prototype.setTrigger=function(t){this.trigger=t};o.prototype.setTargetHash=function(t){this.targetHash=t};o.prototype.setTimeStart=function(t){this.timeStart=t};o.prototype.getTimeStart=function(){return this.timeStart};o.prototype.getTimeEnd=function(){return this.timeEnd};o.prototype.setSourceApplication=function(t){this.sourceApplication=t};o.prototype.setTargetApplication=function(t){this.targetApplication=t};o.prototype.setNavigationMode=function(t){this.navigationMode=t};o.prototype.setHomepageLoading=function(t){this.homepageLoading=t};o.prototype.setApplicationType=function(t){this.applicationType=t};o.prototype.setIsHomeApp=function(t){this.isHomeApp=!!t};o.prototype._isHomePage=function(t){if(this.isHomeApp){return true}return t&&(t==="FLP_HOME"||t==="FLP_PAGE")};return o},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/plugins/BaseRTAPlugin", ["sap/ui/core/Component","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils","sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions","sap/ushell/appRuntime/ui5/plugins/baseRta/Trigger"],function(i,t,e,n){"use strict";var s=i.extend("sap.ushell.plugins.BaseRTAPlugin",{sType:null,init:function(i){this.mConfig=i;this.mConfig.i18n=this.getModel("i18n").getResourceBundle();this.mConfig.loadPlugins=this._loadPlugins.bind(this);this.mConfig.onStartHandler=this._onStartHandler.bind(this);this.mConfig.onErrorHandler=this._onErrorHandler.bind(this);this.mConfig.onStopHandler=this._onStopHandler.bind(this);this.oTrigger=new n(this.mConfig);this._oPluginPromise=this.oTrigger.getInitPromise().then(e.checkUI5App.bind(e)).then(function(i){if(this.mConfig.checkRestartRTA&&i&&e.checkRestartRTA(this.mConfig.layer)){return this.oTrigger.triggerStartRta(this)}return undefined}.bind(this)).then(function(){return t.getAppLifeCycleService()}).then(function(i){i.attachAppLoaded(this._onAppLoaded,this)}.bind(this))},getPluginPromise:function(){return this._oPluginPromise},exit:function(){this._oPluginPromise=this._oPluginPromise.then(t.getAppLifeCycleService).then(function(i){i.detachAppLoaded(this._onAppLoaded,this);if(this._onRendererCreated){var e=t.getContainer();e.detachRendererCreatedEvent(this._onRendererCreated,this)}}.bind(this))},_onAppLoaded:function(){return e.checkUI5App().then(function(i){if(i){if(e.checkRestartRTA(this.mConfig.layer)){this.oTrigger.triggerStartRta(this)}this._adaptButtonVisibility(this.mConfig.id,true)}else{this._adaptButtonVisibility(this.mConfig.id,false)}}.bind(this))},_onAdapt:function(){return this.oTrigger.triggerStartRta(this)},_adaptButtonVisibility:function(i,t){if(typeof i==="string"){i=sap.ui.getCore().byId(i)}if(!i){return}i.setVisible(t)},_exitAdaptation:function(){if(this._switchToDefaultMode){this._switchToDefaultMode()}this.oTrigger.exitRta()},_onStartHandler:function(){},_onErrorHandler:function(){this._exitAdaptation()},_onStopHandler:function(){this._exitAdaptation()},_loadPlugins:function(){return Promise.resolve()}});return s},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/plugins/appwarmup/Component", ["sap/ui/core/Component","sap/ui/core/service/ServiceFactory","sap/ui/core/service/ServiceFactoryRegistry","./ShellUIService","sap/base/Log"],function(e,a,t,n,s){"use strict";var i=sap.ui.require.toUrl("sap/ushell/plugins/ghostapp");var p={name:"sap.ushell.plugins.ghostapp",manifest:true,asyncHints:{libs:[{name:"sap.m"},{name:"sap.ui.core"},{name:"sap.f"},{name:"sap.suite.ui.generic.template"},{name:"sap.ui.comp"},{name:"sap.ui.fl"},{name:"sap.ui.generic.app"},{name:"sap.ui.generic.template"},{name:"sap.ui.table"},{name:"sap.ui.unified"},{name:"sap.uxap"},{name:"sap.ui.layout"}],cacheTokens:{dataSources:{"/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/":"20180613155243"}},requests:[{name:"sap.ui.fl.changes",reference:"sap.ushell.plugins.ghostapp.Component"}],waitFor:{}},id:"sap.ushell.plugins.ghostapp",componentData:{startupParameters:{},technicalParameters:{}},async:true};var r="sap.ushell.plugins.appwarmup.Component";return e.extend(r,{metadata:{version:"1.115.1",library:"sap.ushell"},doWarmUp:function(){var r=[];r.push(new Promise(function(e,a){sap.ui.require(["sap/ui/model/odata/ODataMetadata"],function(a){var t=a.prototype._loadMetadata;a.prototype._loadMetadata=function(e,n){if(this.sUrl&&this.sUrl.startsWith("/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/$metadata")){this.sUrl=i+"/metadata.xml";a.prototype._loadMetadata=t}return t.call(this,e,n)};e()},a)}));Promise.all(r).then(function(){t.register("sap.ushell.plugins.appwarmup.ShellUIService",new a(n));return e.create(p)}).then(function(e){var a=document.createElement("div");a.style.visibility="hidden";document.body.appendChild(a);sap.ui.require(["sap/ui/core/ComponentContainer"],function(t){var n=new t;n.setComponent(e);n.placeAt(a);n.addEventDelegate({onAfterRendering:function(){setTimeout(function(){n.destroy()},5e3)}})})}).catch(function(){s.error("GhostApp component could not be created",null,this)})},init:function(){this.doWarmUp()}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/plugins/appwarmup/ShellUIService", ["sap/ui/core/service/Service"],function(e){"use strict";return e.extend("sap.ushell.plugins.appwarmup.ShellUIService",{setTitle:function(){return},setHierarchy:function(){return},setBackNavigation:function(){return},getTitle:function(){return},setRelatedApps:function(){return},getUxdVersion:function(){return 1}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/plugins/ghostapp/Component", ["sap/ui/generic/app/AppComponent"],function(e){"use strict";return e.extend("sap.ushell.plugins.ghostapp.Component",{metadata:{manifest:"json",library:"sap.ushell"}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/plugins/ghostapp/FakeModel", ["sap/ui/model/odata/v2/ODataModel"],function(e){"use strict";var t=e.extend("sap.ushell.plugins.ghostapp.FakeModel",{constructor:function(t,a){e.apply(this,arguments);this.setDeferredGroups(["undefined",this.sDefaultChangeGroup])},setDeferredGroups:function(){e.prototype.setDeferredGroups.apply(this,arguments);this.mDeferredGroups.undefined="undefined"}});t.getMetadata().getName=function(){return"sap.ui.model.odata.v2.ODataModel"};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/plugins/rta-personalize/Component", ["sap/base/util/UriParameters","sap/m/MessageBox","sap/m/MessageToast","sap/ui/core/Component","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/preprocessors/EventHistory","sap/ushell/plugins/BaseRTAPlugin","sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions","sap/ushell/appRuntime/ui5/plugins/baseRta/Renderer"],function(t,i,e,n,o,s,a,r,l){"use strict";var u="PERSONALIZE_Plugin_ActionButton";var h=a.extend("sap.ushell.plugins.rta-personalize.Component",{sType:"rta-personalize",metadata:{manifest:"json",library:"sap.ushell"},init:function(){var t={sComponentName:"sap.ushell.plugins.rta-personalize",layer:"USER",developerMode:false,id:u,text:"PERSONALIZE_BUTTON_TEXT",icon:"sap-icon://edit",visible:false,checkRestartRTA:false};a.prototype.init.call(this,t);r.checkUI5App().then(function(t){var i=this.mConfig.visible&&t;return l.createActionButton(this,this._onAdapt.bind(this),i)}.bind(this)).then(this._checkForEnabledControls.bind(this))},removePersonalizableControl:function(t){var i=this._aPersonalizableControls.indexOf(t);this._aPersonalizableControls.splice(i,1);this._aOriginalFooterVisibility.splice(i,1);if(this._aPersonalizableControls.length===0){this._oObserver.disconnect();delete this._oObserver;this._adaptButtonVisibility(u,false)}},_checkForEnabledControls:function(){this._aPersonalizableControls=[];this._aOriginalFooterVisibility=[];function t(t){if(this._aPersonalizableControls.indexOf(t)===-1){this._aPersonalizableControls.push(t);r.checkUI5App().then(function(t){this._adaptButtonVisibility(u,t)}.bind(this))}}function i(i,e,n){if(o.checkControlId(n)){var s=this._getControlInstance(n);t.call(this,s);if(!this._oObserver){this._oObserver=new MutationObserver(function(t){this._aPersonalizableControls.forEach(function(t){if(!t.getDomRef()){this.removePersonalizableControl(t)}}.bind(this))}.bind(this));var a={attributes:true,childList:true,characterData:false,subtree:true,attributeFilter:["style","class"]};this._oObserver.observe(window.document,a)}}}sap.ui.getCore().getEventBus().subscribe("sap.ui","ControlForPersonalizationRendered",i,this);var e=s.getHistoryAndStop("ControlForPersonalizationRendered");e.forEach(function(t){i.call(this,t.channelId,t.eventId,t.parameters)}.bind(this))},_getControlInstance:function(t){if(typeof t==="string"){var i=sap.ui.getCore().byId(t);return i||n.get(t)}return t},_onAppLoaded:function(){var t=this._aPersonalizableControls.length;for(var i=t;i>0;i--){this.removePersonalizableControl(this._aPersonalizableControls[i-1])}},_onStartHandler:function(t){var e=t.getParameter("editablePluginsCount");if(e!==undefined&&e<=0){i.information(this.mConfig.i18n.getText("MSG_STARTUP_NO_OVERLAYS"),{onClose:function(){this.oTrigger.triggerStopRta(true,true)}.bind(this)})}},_loadPlugins:function(t){var i=new Promise(function(i){sap.ui.require(["sap/ui/rta/plugin/EasyAdd","sap/ui/rta/plugin/EasyRemove"],function(e,n){var o=t.getDefaultPlugins(),s=o.remove;o.remove=new n({commandFactory:s.getCommandFactory()});var a=o.additionalElements;o.additionalElements=new e({commandFactory:a.getCommandFactory()});o.contextMenu.setOpenOnClick(false);t.setPlugins(o);i()})});return i},_onAdapt:function(e){var n=e.getSource();if(n.getText()===this.mConfig.i18n.getText("PERSONALIZE_BUTTON_TEXT")){var o=t.fromURL(window.location.href),s=o.mParams["sap-ui-layer"]&&o.mParams["sap-ui-layer"][0];if(!s||s==="USER"){n.setText(this.mConfig.i18n.getText("END_PERSONALIZE_BUTTON_TEXT"));this._adaptButtonVisibility("RTA_Plugin_ActionButton",false);this._aPersonalizableControls.forEach(function(t){if(t.setShowFooter){this._aOriginalFooterVisibility.push(t.getShowFooter())}else{this._aOriginalFooterVisibility.push(undefined)}}.bind(this));this._adaptFooterVisibility(false);var r=this._getFlpSearchButton();this._bOriginalSearchButtonVisibility=r&&r.getVisible();if(this._bOriginalSearchButtonVisibility){this._adaptButtonVisibility(r,false)}a.prototype._onAdapt.call(this)}else{i.information(this.mConfig.i18n.getText("MSG_STARTUP_WRONG_LAYER"))}}else{this.oTrigger.triggerStopRta(false,true)}return Promise.resolve()},_switchToDefaultMode:function(){sap.ui.getCore().byId(u).setText(this.mConfig.i18n.getText("PERSONALIZE_BUTTON_TEXT"));this._adaptButtonVisibility("RTA_Plugin_ActionButton",true);this._adaptFooterVisibility(true);if(this._bOriginalSearchButtonVisibility!==undefined){this._adaptButtonVisibility(this._getFlpSearchButton(),this._bOriginalSearchButtonVisibility);delete this._bOriginalSearchButtonVisibility}e.show(this.mConfig.i18n.getText("SAVE_SUCCESSFUL"),{duration:4e3,offset:"0 -50"})},_adaptFooterVisibility:function(t){this._aPersonalizableControls.forEach(function(i,e){if(this._aOriginalFooterVisibility[e]){i.setShowFooter(t)}}.bind(this))},_getFlpSearchButton:function(){return this.oRenderer.getRootControl().getShellHeader().getHeadEndItems()[0]},_getFLPViewPort:function(){return sap.ui.getCore().byId("viewPortContainer")}});return h});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/plugins/rta/Component", ["sap/ushell/plugins/BaseRTAPlugin","sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions","sap/ushell/appRuntime/ui5/plugins/baseRta/Renderer"],function(e,i,t){"use strict";function n(){return new Promise(function(e){sap.ui.require(["sap/ui/fl/write/api/FeaturesAPI"],function(i){e(i.isKeyUser())})})}var s=e.extend("sap.ushell.plugins.rta.Component",{sType:"rta",metadata:{manifest:"json",library:"sap.ushell"},init:function(){var s={sComponentName:"sap.ushell.plugins.rta",layer:"CUSTOMER",developerMode:false,id:"RTA_Plugin_ActionButton",text:"RTA_BUTTON_TEXT",icon:"sap-icon://wrench",visible:true,checkRestartRTA:true};e.prototype.init.call(this,s);this._oPluginPromise=this._oPluginPromise.then(function(){return Promise.all([i.checkUI5App(),n(),i.checkDesktopDevice()])}).then(function(e){var i=this.mConfig.visible&&e[0]&&e[1]&&e[2];return t.createActionButton(this,this._onAdapt.bind(this),i)}.bind(this))}});return s},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/AccessKeysHandler", ["sap/ui/base/EventProvider","sap/ui/Device","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(e,t,n,s,o,i){"use strict";var r=e.extend("sap.ushell.renderers.fiori2.AccessKeysHandler",{constructor:function(){e.apply(this,arguments);o.on("AppRendered").do(this.appOpenedHandler.bind(this));this.bFocusOnShell=true;this.bFocusPassedToExternalHandlerFirstTime=true;this.isFocusHandledByAnotherHandler=false;this.fnExternalKeysHandler=null;this.sLastExternalKeysHandlerUrl=null;this.fnExternalShortcuts=null;this.bForwardNavigation=true;this.aShortcutsDescriptions=[]}});r.prototype.init=function(e){this.oModel=e;document.addEventListener("keydown",function(e){if(e.keyCode===16){return}this.bForwardNavigation=!e.shiftKey;if(e.key==="Tab"||e.key==="F6"){setTimeout(function(){this._handleEventUsingExternalKeysHandler(e)}.bind(this),0)}else{this._handleEventUsingExternalKeysHandler(e)}var t=s.last("/core/shell/model/currentState/stateName");if(t!=="headerless"&&t!=="headerless-home"){var n=t==="home"||t==="app"||t==="minimal";this.handleShortcuts(e,n)}if(this.fnExternalShortcuts){this.fnExternalShortcuts(e)}}.bind(this),true);this._cancelHelpEvent=this._cancelHelpEvent.bind(this)};r.prototype.appOpenedHandler=function(){var e=n.getHash();if(e!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null}this.sLastExternalKeysHandlerUrl=e};r.prototype._focusItemInOverflowPopover=function(e,t){var n=sap.ui.getCore().byId("headEndItemsOverflow");if(n&&n.isOpen()){if(n.getContent().length){this._focusItemInPopover(e,n.getContent()[0].getItems())}}else if(t<10){var s=window.document.getElementById("endItemsOverflowBtn");if(s){s.click();var o=this;window.setTimeout(function(){o._focusItemInOverflowPopover(e,++t)},300)}}};r.prototype._focusItemInUserMenu=function(e,t){var n=sap.ui.getCore().byId("sapUshellUserActionsMenuPopover");if(n&&n.isOpen()){if(n.getContent().length){this._focusItemInPopover(e,n.getContent()[0].getItems())}}else if(t<10){var s=this;o.emit("showUserActionsMenu",Date.now());window.setTimeout(function(){s._focusItemInUserMenu(e,++t)},300)}};r.prototype._focusItemInPopover=function(e,t){for(var n=0;n<t.length;n++){var s=t[n].getId().split("-");if(s[s.length-1]===e){t[n].getDomRef().focus();return}}};r.prototype._handleAccessOverviewKey=function(e){var n=this.oModel.getProperty("/searchAvailable"),o=this.oModel.getProperty("/personalization"),r=s.last("/core/catalog/enabled"),a=s.last("/core/shell/model/enableNotifications");if(t.browser.msie){document.addEventListener("help",this._cancelHelpEvent)}var l=[];l=l.concat(this.aShortcutsDescriptions);var u;var c;if(t.os.macintosh){u=i.i18n.getText("OptionKey");c=i.i18n.getText("CommandKey")}else{u=i.i18n.getText("AltKey");c=i.i18n.getText("ControlKey")}if(window.document.getElementById("shell-header")){if(r&&e){l.push({text:u+" + A",description:i.i18n.getText("hotkeyFocusOnAppFinderButton")})}if(n){l.push({text:u+" + F",description:i.i18n.getText("hotkeyFocusOnSearchButton")})}l.push({text:u+" + H",description:i.i18n.getText("hotkeyHomePage")});l.push({text:u+" + M",description:i.i18n.getText("hotkeyFocusOnUserActionMenu")});if(a){l.push({text:u+" + N",description:i.i18n.getText("hotkeyFocusOnNotifications")})}if(e){l.push({text:u+" + S",description:i.i18n.getText("hotkeyFocusOnSettingsButton")});l.push({text:i.i18n.getText("ControlKey")+" + "+i.i18n.getText("CommaKey"),description:i.i18n.getText("hotkeyOpenSettings")})}if(o&&r){l.push({text:i.i18n.getText("ControlKey")+" + "+i.i18n.getText("EnterKey"),description:i.i18n.getText("hotkeyExitEditing")})}if(n){l.push({text:c+" + "+i.i18n.getText("ShiftKey")+" + F",description:i.i18n.getText("hotkeyFocusOnSearchField")})}}sap.ui.require(["sap/m/Label","sap/m/MessageBox","sap/m/Text","sap/m/VBox"],function(e,t,n,s){var o=new s;l.forEach(function(t){o.addItem(new e({text:t.description}));o.addItem(new n({text:t.text}).addStyleClass("sapUiSmallMarginBottom"))});t.show(o,{id:"hotKeysGlossary",title:i.i18n.getText("hotKeysGlossary"),styleClass:"sapContrastPlus"})})};r.prototype._focusAppFinderButton=function(){if(!s.last("/core/catalog/enabled")){return}if(this._isFocusInDialog()){return}var e=window.document.getElementById("openCatalogBtn");if(e){e.focus();return}var t=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(t.moveAppFinderActionToShellHeader){this._focusItemInOverflowPopover("openCatalogBtn",0);return}this._focusItemInUserMenu("openCatalogBtn",0)};r.prototype._focusSettingsButton=function(){if(this._isFocusInDialog()){return}var e=window.document.getElementById("userSettingsBtn");if(e){e.focus();return}var t=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(t.moveUserSettingsActionToShellHeader){this._focusItemInOverflowPopover("userSettingsBtn",0);return}this._focusItemInUserMenu("userSettingsBtn",0)};r.prototype._blockBrowserDefault=function(e){return new Promise(function(n){if(t.browser.name==="ie"){var s=window.document.getElementById("shell-header");if(s){s.setAttribute("accesskey",e.key);window.setTimeout(function(){s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");n()}},0)}}else{n()}e.preventDefault()})};r.prototype._handleAltShortcutKeys=function(e,t){var n=sap.ui.getCore().byId("shell-header"),s=sap.ui.getCore().byId("sapUshellUserActionsMenuPopover"),i=sap.ui.getCore().byId("shellNotificationsPopover");if(this._isFocusInInput()){return}if(n){if(t){if(e.keyCode===65){this._blockBrowserDefault(e).then(this._focusAppFinderButton.bind(this))}else if(e.keyCode===83){this._blockBrowserDefault(e).then(this._focusSettingsButton.bind(this))}}if(e.keyCode===70){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}var e=window.document.getElementById("sf"),t=window.document.getElementById("searchFieldInShell-button");if(e){e.focus()}else if(t){t.focus()}else{this._focusItemInOverflowPopover("sf",0)}}.bind(this))}else if(e.keyCode===72){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}var e=document.getElementById("shell-header-logo");if(e){e.focus();return}}.bind(this))}else if(e.keyCode===77){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}if(!(s&&s.isOpen())){o.emit("showUserActionsMenu",Date.now())}}.bind(this))}else if(e.keyCode===78){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}if(!(i&&i.isOpen())){o.emit("showNotifications",Date.now())}}.bind(this))}}};r.prototype._handleCtrlShortcutKeys=function(e,t){if(e.shiftKey){if(e.keyCode===70){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}var n=sap.ui.getCore().byId("sf");if(n){n.firePress();e.preventDefault();e.stopPropagation()}}}else if(e.keyCode===188&&t){if(this._isFocusInDialog()){return}var o=sap.ui.getCore().byId("userSettingsBtn");if(o&&!this._isFocusInATable()){o.firePress();e.preventDefault();e.stopPropagation()}}else if(e.keyCode===112){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}this._handleAccessOverviewKey(t)}else if(e.keyCode===83){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}var i=window.document.getElementById("appFinderSearch-I");if(i){i.focus();e.preventDefault();e.stopPropagation()}}else if(e.keyCode===13){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}if(s.last("/core/spaces/enabled")){this.fireEvent("editModeDone")}else{var r=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(r&&r.getDomRef()){r.firePress();e.preventDefault();e.stopPropagation()}}}};r.prototype.handleShortcuts=function(e,n){if(t.os.macintosh&&e.metaKey&&e.shiftKey&&e.keyCode===70){var s=window.document.getElementById("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation()}e.preventDefault()}else if(e.altKey&&!e.shiftKey&&!e.ctrlKey){this._handleAltShortcutKeys(e,n)}else if(e.ctrlKey&&!e.altKey){this._handleCtrlShortcutKeys(e,n)}};r.prototype.registerAppKeysHandler=function(e){this.fnExternalKeysHandler=e;this.sLastExternalKeysHandlerUrl=n.getHash()};r.prototype.resetAppKeysHandler=function(){this.fnExternalKeysHandler=null};r.prototype.getAppKeysHandler=function(){return this.fnExternalKeysHandler};r.prototype.registerAppShortcuts=function(e,t){this.fnExternalShortcuts=e;this.aShortcutsDescriptions=t};r.prototype._handleFocusBackToMe=function(e,t){this.bFocusOnShell=true;var n;if(t){n=window.document.getElementById(t)}else{this.fromOutside=true;if(e){e.preventDefault();this.bForwardNavigation=!e.shiftKey||e.key==="F6"}var s=sap.ui.getCore().byId("shell-header");if(s){s.setFocusOnShellHeader(!this.bForwardNavigation);this.fromOutside=false}}if(n){n.focus();this.fromOutside=false}this.bFocusPassedToExternalHandlerFirstTime=true};r.prototype.setIsFocusHandledByAnotherHandler=function(e){this.isFocusHandledByAnotherHandler=e};r.prototype.sendFocusBackToShell=function(e){var t,n;if(typeof e==="string"){n=e}else if(typeof e==="object"){t=e}this._handleFocusBackToMe(t,n)};r.prototype._handleEventUsingExternalKeysHandler=function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(typeof this.fnExternalKeysHandler==="function"){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false}}this.setIsFocusHandledByAnotherHandler(false)};r.prototype._cancelHelpEvent=function(e){e.preventDefault();document.removeEventListener("help",this._cancelHelpEvent)};r.prototype._isFocusInInput=function(){var e=(document.activeElement||{}).tagName;return e==="INPUT"||e==="TEXTAREA"};r.prototype._isFocusInDialog=function(){var e=document.activeElement;for(;e!==document.body;e=e.parentNode){if(e.classList.contains("sapMDialog")){return true}}return false};r.prototype._isFocusInATable=function(){var e=document.activeElement;var t;for(;e!==document.body;e=e.parentNode){t=e.classList;if(t.contains("sapUiCompSmartTable")||t.contains("sapUiMdcTable")||t.contains("sapMListTbl")||t.contains("sapUiTable")){return true}}return false};return new r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/History", function(){"use strict";var t=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={}};t.prototype.hashChange=function(t){var i=this._history.indexOf(t);if(i===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1)}this._history.push(t);this._historyPosition+=1;this.backwards=false;this.forwards=false}else{this.backwards=this._historyPosition>i;this.forwards=this._historyPosition<i;this._historyPosition=i}};t.prototype.pop=function(){var t;if(this._history.length>0){t=this._history.pop();this._historyPosition--}return t};t.prototype.isVirtualHashchange=function(t,i){return this._virtual.hasOwnProperty(i)&&this.getCurrentHash()===t&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===i};t.prototype.setVirtualNavigation=function(t){this._virtual[t]=true};t.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null};t.prototype.getHashIndex=function(t){return this._history.indexOf(t)};t.prototype.getHistoryLength=function(){return this._history.length};return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/LogonFrameProvider", ["sap/m/Button","sap/m/Dialog","sap/ui/core/HTML","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/Config","sap/ushell/resources"],function(e,t,a,s,l,i){"use strict";function o(){r();var o=new t({id:"SAMLDialog",title:i.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",content:new a("SAMLDialogFrame",{content:'<iframe id=SAMLDialogFrame src=""></iframe>'}),rightButton:new e({text:i.i18n.getText("samlCloseBtn"),press:sap.ushell.Container.cancelLogon.bind(sap.ushell.Container)})}).addStyleClass("sapUshellIframeDialog sapContrastPlus sapUshellSamlDialogHidden");if(l.last("/core/extension/SupportTicket")){var u=new s;u.setWidth("150px");u.setIcon("");o.setLeftButton(u)}o.open();n(true);return document.getElementById("SAMLDialogFrame")}function n(e){var t=document.getElementById("sap-ui-blocklayer-popup");if(t){if(e){t.classList.add("sapUshellSamlDialogHidden")}else{t.classList.remove("sapUshellSamlDialogHidden")}}}function r(){var e=sap.ui.getCore().byId("SAMLDialog");if(e){e.destroy()}}function u(){var e=sap.ui.getCore().byId("SAMLDialog");if(e){e.removeStyleClass("sapUshellSamlDialogHidden");n(true)}}return{create:o,show:u,destroy:r}},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Renderer", ["sap/ui/core/Core","sap/ui/core/UIComponent","sap/ushell/ui/shell/ToolAreaItem","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/services/AppConfiguration","sap/ushell/resources","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/deepExtend","sap/base/util/extend","sap/ui/base/Object","sap/base/util/ObjectPath","sap/ui/core/library","sap/ushell/library","sap/ui/core/mvc/View","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","sap/ushell/renderers/fiori2/ShellLayout","./RendererExtensions"],function(e,t,o,r,n,i,a,l,s,p,d,u,h,jQuery,c,f,g,m,y,v,S,C,w,I,b){"use strict";var P=v.mvc.ViewType;var A=S.AppType;var M=t.extend("sap.ushell.renderers.fiori2.Renderer",{metadata:{version:"1.115.1",dependencies:{version:"1.115.1",libs:["sap.ui.core","sap.m"],components:[]},interfaces:["sap.ui.core.IAsyncContentCreation"],routing:{config:{path:"sap.ushell.components",async:true,controlId:"viewPortContainer",clearAggregation:false,controlAggregation:"pages"},routes:[{name:"appfinder-legacy",pattern:"Shell-home&/appFinder/:menu:/:filter:"},{name:"home",pattern:["Shell-home?:hashParameters:","Shell-home&/:innerHash*:","Shell-home"],target:function(){if(r.last("/core/homeApp/enabled")){return"homeapp"}if(r.last("/core/workPages/enabled")&&r.last("/core/workPages/myHome/pageId")!==null){return"workpages"}if(r.last("/core/workPages/enabled")&&r.last("/core/workPages/myHome/pageId")===null){return"runtimeSwitcher"}if(r.last("/core/spaces/enabled")){return"pages"}return"home"}()},{name:"appfinder",pattern:["Shell-appfinder?:hashParameters:&/:innerHash*:","Shell-appfinder?:hashParameters*:","Shell-appfinder&/:innerHash*:","Shell-appfinder"],target:r.last("/core/catalog/enabled")?"appfinder":undefined},{name:"openFLPPage",pattern:["Launchpad-openFLPPage?:hashParameters:","Launchpad-openFLPPage"],target:function(){if(r.last("/core/workPages/enabled")&&r.last("/core/workPages/myHome/pageId")!==null){return"workpages"}if(r.last("/core/workPages/enabled")&&r.last("/core/workPages/myHome/pageId")===null){return"runtimeSwitcher"}if(r.last("/core/spaces/enabled")){return"pages"}return"home"}()},{name:"openWorkPage",pattern:["Launchpad-openWorkPage?:hashParameters:","Launchpad-openWorkPage"],target:"workpages"},{name:"wzsearch",pattern:["WorkZoneSearchResult-display:?query:"],target:"wzsearch"}],targets:{home:{name:"homepage",type:"Component",title:u.i18n.getText("homeBtn_tooltip"),id:"Shell-home-component",options:{manifest:false,asyncHints:{preloadBundles:r.last("/core/home/featuredGroup/enable")?["sap/ushell/preload-bundles/homepage-af-dep.js","sap/ushell/components/homepage/cards-preload.js"]:["sap/ushell/preload-bundles/homepage-af-dep.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},appfinder:{name:"appfinder",type:"Component",id:"Shell-appfinder-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},pages:{name:"pages",type:"Component",id:"pages-component",options:{componentData:{},asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js"]}}},workpages:{name:"workPageRuntime",type:"Component",id:"workPageRuntime-component",options:{componentData:{},asyncHints:{preloadBundles:["sap/ushell/preload-bundles/workpage-rt-0.js","sap/ushell/preload-bundles/workpage-rt-1.js","sap/ushell/preload-bundles/workpage-rt-2.js","sap/ushell/preload-bundles/workpage-rt-3.js"]}}},runtimeSwitcher:{name:"runtimeSwitcher",type:"Component",id:"runtimeSwitcher-component",options:{componentData:{},asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js","sap/ushell/preload-bundles/workpage-rt-0.js","sap/ushell/preload-bundles/workpage-rt-1.js","sap/ushell/preload-bundles/workpage-rt-2.js","sap/ushell/preload-bundles/workpage-rt-3.js"]}}},wzsearch:{name:"cepsearchresult.app",type:"Component",id:"cepsearchresult-app-component",options:{manifest:true,componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}}}}},init:function(){t.prototype.init.apply(this,arguments);var o=this.getRouter();if(r.last("/core/homeApp/enabled")){this._getHomeAppTarget().then(function(e){o.getTargets().addTarget("homeapp",e);o.getTarget("homeapp").attachEventOnce("display",function(){n.emit("CoreResourcesComplementLoaded",{status:"success"})})})}o.getRoute("home").attachMatched(this._prepareHomepage,this);o.getRoute("openFLPPage").attachMatched(this._prepareHomepage,this);o.getRoute("openWorkPage").attachMatched(this._prepareHomepage,this);o.getRoute("appfinder-legacy").attachMatched(function(e){o.navTo("appfinder",{},true)});o.getRoute("appfinder").attachMatched(function(t){if(!r.last("/core/catalog/enabled")){c.warning("AppFinder is disabled. Re-route to the homepage.");o.navTo("home",null,true);return}n.emit("trackHashChange","Shell-appFinder");var i=e.getComponent(this.createId("Shell-appfinder-component"));var l=t.getParameter("arguments");if(sap.ushell.Container.getRenderer("fiori2")){a.getShellUIService().setBackNavigation();sap.ushell.Container.getRenderer("fiori2").setCurrentCoreView("appFinder")}d.setCurrentApplication(null);var s=i.getRouter();i.getRootControl().loaded().then(function(){s.parse(l["innerHash*"]||"")});a.switchViewState("app",false,"Shell-appfinder");a.getAppMeta().setAppIcons();p.initializeAccessKeys()},this);o.getRoute("wzsearch").attachMatched(function(e){a.getShellUIService().setBackNavigation();a.switchViewState("app",false,"cepsearchresult-app")});var i=new s(l);i.setDefaultBindingMode("OneWay");this.setModel(i,"device");this.setModel(u.i18nModel,"i18n")}});M.prototype._prepareHomepage=function(e){n.emit("trackHashChange","Shell-home");if(d.getCurrentApplication()){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.setIsInitialNavigation(false)})}var t=window.hasher.getHash();if(!r.last("/core/spaces/enabled")&&t.indexOf("Launchpad-openFLPPage")===0){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.replaceHashWithoutNavigation("Shell-home")})}var o=u.i18n.getText("homeBtn_tooltip");var l=this.getShellConfig().rootIntent;var s=!l||i.isFlpHomeIntent(l);a.switchViewState(s?"home":"app",false,"Shell-home");this.setCurrentCoreView("home");d.setCurrentApplication(null);a.getShellUIService().setTitle(o);a.getShellUIService().setHierarchy();a.getShellUIService().setRelatedApps();a.getAppMeta().setAppIcons();p.initializeAccessKeys()};M.prototype._getHomeAppTarget=function(){return sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(e){var t=r.last("/core/homeApp/component");var o=e.getCoreResourcesComplementBundle();if(t.url){return{name:t.name,type:"Component",id:"homeApp-component",path:"",options:{url:t.url,componentData:{},asyncHints:Object.assign({},t.asyncHints||{},{preloadBundles:o})}}}return{name:"error",type:"Component",id:"homeApp-component",path:"sap/ushell/components/homeApp",options:{componentData:{},asyncHints:{preloadBundles:o}}}})};M.prototype.getSapUshellConfigParam=function(){var e;e=h.fromQuery(window.location.search).get("sap-ushell-config");if(e){return e.toLowerCase()}e=h.fromQuery(window.location.search).get("appState");if(e){c.error("URL parameter 'appState' is given, but deprecated. Please use 'sap-ushell-config' instead!","sap.ushell.renderers.fiori2.Renderer");return e.toLowerCase()}return undefined};M.prototype.createContent=function(){var e=M.prototype.getSapUshellConfigParam();var t=this.getComponentData()||{};var o={applications:{"Shell-home":{}},rootIntent:"Shell-home"};if(e){if(!t.config){t.config={}}t.config.appState=e}if(t.config){if(t.config.rootIntent===undefined){t.config.migrationConfig=true}t.config=f(o,t.config);g(t.config.applications["Shell-home"],r.last("/core/home"),r.last("/core/catalog"));if(t.config.appState==="headerless"||t.config.appState==="merged"||t.config.appState==="blank"){t.config.enablePersonalization=false;r.emit("/core/shell/enablePersonalization",false)}else{t.config.enablePersonalization=r.last("/core/shell/enablePersonalization")}if(!t.config.enablePersonalization){t.config.moveEditHomePageActionToShellHeader=false;t.config.moveAppFinderActionToShellHeader=false}}t.shellModel=r.createModel("/core/shell/model",s);t.helperModel=new s({shell:{floatingContainerVisible:false,footerContent:""}});if(!this.getComponentData().async){c.error("sap/ushell/renderers/fiori2/Renderer component is created synchronously. Synchronous instantiation is not allowed. Please use async:true in component data");var n=sap.ui.view("mainShell",{type:P.JS,viewName:"sap.ushell.renderers.fiori2.Shell",height:"100%",viewData:t});n.addStyleClass("sapUshellRenderer");this._oShellView=n;this.oShellModel=a.getElementsModel();n.loaded().then(function(e){this.shellCtrl=e.oController;sap.ushell.renderers.fiori2.utils.init(e.getController())}.bind(this));return n}return C.create({id:"mainShell",viewName:"module:sap/ushell/renderers/fiori2/ShellAsync.view",height:"100%",viewData:t}).then(function(e){e.addStyleClass("sapUshellRenderer");this._oShellView=e;this.oShellModel=a.getElementsModel();this.shellCtrl=e.getController();sap.ushell.renderers.fiori2.utils.init(e.getController());return e}.bind(this))};M.prototype.createExtendedShellState=function(e,t){return a.shellElements().createExtendedShellState(e,t)};M.prototype.applyExtendedShellState=function(e,t){this.oShellModel.applyExtendedShellState(e,t)};M.prototype.showLeftPaneContent=function(e,t,o){var r=typeof e==="string"?[e]:e;if(t){a.shellElements().addShellModelForApplications("paneContent",r)}else{this.oShellModel.addLeftPaneContent(r,false,o)}};M.prototype.showHeaderItem=function(e,t,o){var r=typeof e==="string"?[e]:e;if(t){a.shellElements().addShellModelForApplications("headItems",r)}else{this.oShellModel.addHeaderItem(r,false,o)}};M.prototype.showRightFloatingContainerItem=function(e,t,o){var r=typeof e==="string"?[e]:e;if(t){a.shellElements().addShellModelForApplications("RightFloatingContainerItems",r)}else{this.oShellModel.addRightFloatingContainerItem(r,false,o)}};M.prototype.showRightFloatingContainer=function(e){a.shellElements().setShellModelForApplications("showRightFloatingContainer",e)};M.prototype.showToolAreaItem=function(e,t,o){this.oShellModel.addToolAreaItem(e,true,t,o)};M.prototype.showActionButton=function(t,o,r){var n=[];var i=[];var l;if(typeof t==="string"){t=[t]}n=t.filter(function(t){l=e.byId(t);return m.isA(l,"sap.m.Button")&&!m.isA(l,"sap.ushell.ui.launchpad.ActionItem")});i=t.filter(function(t){l=e.byId(t);return l instanceof sap.ushell.ui.launchpad.ActionItem});if(n.length){this.convertButtonsToActions(n,o,r)}if(i.length){if(o){a.shellElements().addShellModelForApplications("actions",t)}else{this.oShellModel.addActionButton(t,false,r)}}};M.prototype.showFloatingActionButton=function(e,t,o){if(t){a.shellElements().addShellModelForApplications("floatingActions",typeof e==="string"?[e]:e)}else{this.oShellModel.addFloatingActionButton(typeof e==="string"?[e]:e,false,o)}};M.prototype.showHeaderEndItem=function(e,t,o){if(t){a.shellElements().addShellModelForApplications("headEndItems",typeof e==="string"?[e]:e)}else{this.oShellModel.addHeaderEndItem(typeof e==="string"?[e]:e,false,o)}};M.prototype.setHeaderVisibility=function(e,t,o){if(t){a.shellElements().setShellModelForApplications("headerVisible",e)}else{this.oShellModel.setHeaderVisibility(e,false,o)}};M.prototype.showSubHeader=function(e,t,o){if(t){a.shellElements().addShellModelForApplications("subHeader",typeof e==="string"?[e]:e)}else{this.oShellModel.addSubHeader(typeof e==="string"?[e]:e,false,o)}};M.prototype.showSignOutItem=function(e,t){if(e){a.shellElements().addShellModelForApplications("actions",["logoutBtn"],false)}else{this.oShellModel.showSignOutButton(e,t)}};M.prototype.showSettingsItem=function(e,t){this.oShellModel.showSettingsButton(e,t)};M.prototype.setFooter=function(e){this.shellCtrl.setFooter(e)};M.prototype.setNavigationBar=function(e){this.shellCtrl.setNavigationBar(e)};M.prototype.setShellShapes=function(e){this.shellCtrl.setShellShapes(e)};M.prototype.setShellFooter=function(t){var o=new jQuery.Deferred;var r=this;var n;var i=t.controlType;var a=t.oControlProperties;if(a&&a.id&&e.byId(a.id)){n=e.byId(a.id);if(n){if(this.lastFooterId){this.removeFooter()}this.lastFooterId=n.getId();this.shellCtrl.setFooter(n);o.resolve(n)}}if(i){var l=i.replace(/\./g,"/");sap.ui.require([l],function(e){n=new e(a);if(r.lastFooterId){r.removeFooter()}r.lastFooterId=n.getId();r.shellCtrl.setFooter(n);o.resolve(n)})}else{c.warning("You must specify control type in order to create it")}return o.promise()};M.prototype.setFooterControl=function(e,t){var o=e.replace(/\./g,"/");var r=sap.ui.require(o);var n=false;if(r){n=true}else if(!y.get(e||"")){c.error("Renderer.setFooterControl: the referenced control resource "+e+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined}var i=this.createItem(t,undefined,function(t){if(e){if(n){return new r(t)}var o=y.get(e||"");return new o(t)}c.warning("You must specify control type in order to create it");return undefined});if(this.lastFooterId){this.removeFooter()}this.lastFooterId=i.getId();this.shellCtrl.setFooter(i);return i};M.prototype.hideHeaderItem=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeHeaderItem([e],t,o)}else{this.oShellModel.removeHeaderItem(e,t,o)}};M.prototype.removeToolAreaItem=function(e,t,o){if(typeof e==="string"){e=[e]}this.oShellModel.removeToolAreaItem(e,t,o)};M.prototype.removeRightFloatingContainerItem=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeRightFloatingContainerItem([e],t,o)}else{this.oShellModel.removeRightFloatingContainerItem(e,t,o)}};M.prototype.hideActionButton=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeActionButton([e],t,o)}else{this.oShellModel.removeActionButton(e,t,o)}};M.prototype.hideLeftPaneContent=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeLeftPaneContent([e],t,o)}else{this.oShellModel.removeLeftPaneContent(e,t,o)}};M.prototype.hideFloatingActionButton=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeFloatingActionButton([e],t,o)}else{this.oShellModel.removeFloatingActionButton(e,t,o)}};M.prototype.hideHeaderEndItem=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeHeaderEndItem([e],t,o)}else{this.oShellModel.removeHeaderEndItem(e,t,o)}};M.prototype.hideSubHeader=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeSubHeader([e],t,o)}else{this.oShellModel.removeSubHeader(e,t,o)}};M.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){var t=e.byId(this.lastFooterId);if(t){t.destroy()}this.lastFooterId=undefined}};M.prototype.getCurrentViewportState=function(){return this.shellCtrl.getCurrentViewportState()};M.prototype.addShellSubHeader=function(t){var o=new jQuery.Deferred;var r=this;var n;var i=t.controlType;var a=t.oControlProperties;var l=t.bIsVisible;var s=t.bCurrentState;var p=t.aStates;if(a&&a.id&&e.byId(a.id)){n=e.byId(a.id);if(n){if(l){this.showSubHeader(n.getId(),s,p)}o.resolve(n)}}if(i){var d=i.replace(/\./g,"/");sap.ui.require([d],function(e){n=new e(a);if(l){r.showSubHeader(n.getId(),s,p);r.oShellModel.addElementToManagedQueue(n)}o.resolve(n)})}else{c.warning("You must specify control type in order to create it")}return o.promise()};M.prototype.addSubHeader=function(e,t,o,r,n){var i=e.replace(/\./g,"/");var a=sap.ui.require(i);var l=false;if(a){l=true}else if(!y.get(e||"")){c.error("Renderer.setFooterControl: the referenced control resource "+e+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined}var s=this.createItem(t,r,function(t){if(e){if(l){return new a(t)}var o=y.get(e||"");return new o(t)}c.warning("You must specify control type in order to create it");return undefined});if(o){this.showSubHeader(s.getId(),r,n)}return s};M.prototype.addUserAction=function(t){var o=new jQuery.Deferred;var r=this;var n;var i=t.controlType;var l=t.oControlProperties;var s=t.bIsVisible;var p=t.bCurrentState;var d=p?a.shellElements().getStateModelToUpdate():this.oShellModel.getModelToUpdate();var u=t.aStates;if(l){n=e.byId(l.id)}if(n){o.resolve(n)}if(i){if(i==="sap.m.Button"){i="sap.ushell.ui.launchpad.ActionItem"}var h=i.replace(/\./g,"/");sap.ui.require([h],function(e){var t;if(p){t=a.shellElements().getStateModelToUpdate();a.shellElements().setStateModelToUpdate(d)}else{t=r.oShellModel.getModelToUpdate();r.oShellModel.setModelToUpdate(d,true)}n=n||new e(l);if(!n.getActionType){n=new e(l)}if(s){r.showActionButton(n.getId(),p,u)}if(p){a.shellElements().setStateModelToUpdate(t)}else{r.oShellModel.setModelToUpdate(t,false)}o.resolve(n)})}else{var f="You must specify control type in order to create it";c.warning(f);o.reject(f)}return o.promise()};M.prototype.addActionButton=function(e,t,o,r,n){var i=false;if(e==="sap.m.Button"){e="sap.ushell.ui.launchpad.ActionItem"}var a=e.replace(/\./g,"/");var l=sap.ui.require(a);if(l){i=true}else if(!y.get(e||"")){c.error("Renderer.setFooterControl: the referenced control resource "+e+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined}var s=this.createItem(t,r,function(t){if(e){if(i){return new l(t)}var o=y.get(e||"");return new o(t)}c.warning("You must specify control type in order to create it");return undefined});if(o){this.showActionButton(s.getId(),r,n)}return s};M.prototype.addFloatingButton=function(t){var o=new jQuery.Deferred;var r=this;var n;var i;var a=t.controlType;var l=t.oControlProperties;var s=t.bIsVisible;var p=t.bCurrentState;var d=t.aStates;if(l&&l.id&&e.byId(l.id)){i=e.byId(l.id);if(i){if(s){r.showFloatingActionButton(i.getId(),p,d);r.oShellModel.addElementToManagedQueue(i)}o.resolve(i)}}if(a){n=a.replace(/\./g,"/")}else{n="sap/m/Button"}sap.ui.require([n],function(e){i=new e(l);if(s){r.showFloatingActionButton(i.getId(),p,d)}o.resolve(i)});return o.promise()};M.prototype.addFloatingActionButton=function(e,t,o,r,n){var i=false;if(!e){e="sap.m.Button"}var a=e.replace(/\./g,"/");var l=sap.ui.require(a);if(l){i=true}else if(!y.get(e||"")){c.error("Renderer.setFooterControl: the referenced control resource "+e+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined}var s=this.createItem(t,r,function(t){if(e){if(i){return new l(t)}var o=y.get(e||"");return new o(t)}c.warning("You must specify control type in order to create it");return undefined});if(o){this.showFloatingActionButton(s.getId(),r,n)}return s};M.prototype.addSidePaneContent=function(t){var o=new jQuery.Deferred;var r=this;var n;var i=t.controlType;var a=t.oControlProperties;var l=t.bIsVisible;var s=t.bCurrentState;var p=t.aStates;if(a&&a.id&&e.byId(a.id)){n=e.byId(a.id);if(n){o.resolve(n)}}if(i){var d=i.replace(/\./g,"/");sap.ui.require([d],function(e){n=new e(a);if(l){r.oShellModel.addElementToManagedQueue(n);r.showLeftPaneContent(n.getId(),s,p)}o.resolve(n)})}else{c.warning("You must specify control type in order to create it")}return o.promise()};M.prototype.addLeftPaneContent=function(e,t,o,r,n){var i=e.replace(/\./g,"/");var a=sap.ui.require(i);var l;if(a){l=true}else if(!y.get(e||"")){c.error("Renderer.setFooterControl: the referenced control resource "+e+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined}var s=this.createItem(t,r,function(t){if(e){if(l){return new a(t)}var o=y.get(e||"");return new o(t)}c.warning("You must specify control type in order to create it");return undefined});if(o){this.showLeftPaneContent(s.getId(),r,n)}return s};M.prototype.addHeaderItem=function(e,t,o,r,n){if(typeof arguments[0]==="object"&&typeof arguments[1]==="boolean"){t=arguments[0];o=arguments[1];r=arguments[2];n=arguments[3]}else{c.error("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!")}var i=this.createItem(t,r,function(e){return new w(e)});if(o){this.showHeaderItem(i.getId(),r,n)}return i};M.prototype.addRightFloatingContainerItem=function(e,t,o,r){var n=this.createItem(e,o,function(e){return new I(e)});if(t){this.showRightFloatingContainerItem(n.getId(),o,r)}return n};M.prototype.addToolAreaItem=function(e,t,r,n){e.visible=!!t;var i=function(e){return new o(e)};var a=this.createItem(e,r,i);this.oShellModel.addToolAreaItem(a.getId(),!!t,r,n);return a};M.prototype.addHeaderEndItem=function(e,t,o,r,n){if(typeof arguments[0]==="object"&&typeof arguments[1]==="boolean"){t=arguments[0];o=arguments[1];r=arguments[2];n=arguments[3]}var i=this.createItem(t,r,function(e){return new w(e)});if(o){this.showHeaderEndItem(i.getId(),r,n)}return i};M.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration()};M.prototype.addEndUserFeedbackCustomUI=function(e,t){if(e||t){c.info("Application calls sap.ushell.Renderer.addEndUserFeedbackCustomUI. This function is deprecated. The call has no effect.")}};M.prototype.addUserPreferencesEntry=function(e){this.shellCtrl.addUserPreferencesEntry(e)};M.prototype.addUserPreferencesGroupedEntry=function(e){return this.shellCtrl.addUserPreferencesEntry(e,true)};M.prototype.setHeaderTitle=function(e){this.shellCtrl.setHeaderTitle(e)};M.prototype.setLeftPaneVisibility=function(e,t){this.oShellModel.setLeftPaneVisibility(t,false,[e])};M.prototype.showToolArea=function(e,t){this.oShellModel.showShellItem("/toolAreaVisible",e,t)};M.prototype.setHeaderHiding=function(e){return this.oShellModel.setHeaderHiding(e)};M.prototype.setFloatingContainerContent=function(e,t,o){this.shellCtrl.setFloatingContainerContent("floatingContainerContent",[e.getId()],t,o)};M.prototype.setFloatingContainerVisibility=function(e){this.shellCtrl.setFloatingContainerVisibility(e)};M.prototype.getFloatingContainerState=function(){return this.shellCtrl.getFloatingContainerState()};M.prototype.getFloatingContainerVisiblity=function(){return this.shellCtrl.getFloatingContainerVisibility()};M.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility()};M.prototype.setFloatingContainerDragSelector=function(e){this.shellCtrl.setFloatingContainerDragSelector(e)};M.prototype.LaunchpadState={App:"app",Home:"home"};M.prototype.createTriggers=function(e,t,o){this.oShellModel.createTriggers(e,t,o)};M.prototype.convertButtonsToActions=function(t,o,r){var n={};var i=this;t.forEach(function(t){var a=e.byId(t);n.id=a.getId();n.text=a.getText();n.icon=a.getIcon();n.tooltip=a.getTooltip();n.enabled=a.getEnabled();n.visible=a.getVisible();if(a.mEventRegistry&&a.mEventRegistry.press){n.press=a.mEventRegistry.press[0].fFunction}a.destroy();i.addActionButton("sap.ushell.ui.launchpad.ActionItem",n,n.visible,o,r)})};M.prototype.createItem=function(t,o,r){var n;if(t&&t.id){n=e.byId(t.id)}if(!n){n=r(t);if(o){this.oShellModel.addElementToManagedQueue(n)}}return n};M.prototype.addEntryInShellStates=function(e,t,o,r,n){this.oShellModel.addEntryInShellStates(e,t,o,r,n)};M.prototype.removeCustomItems=function(e,t,o,r){if(typeof t==="string"){this.oShellModel.removeCustomItems(e,[t],o,r)}else{this.oShellModel.removeCustomItems(e,t,o,r)}};M.prototype.addCustomItems=function(e,t,o,r){if(typeof t==="string"){this.oShellModel.addCustomItems(e,[t],o,r)}else{this.oShellModel.addCustomItems(e,t,o,r)}};M.prototype.addRightViewPort=function(e){this.shellCtrl.getViewPortContainer().addRightViewPort(e,false)};M.prototype.addLeftViewPort=function(e){this.shellCtrl.getViewPortContainer().addLeftViewPort(e,false)};M.prototype.getShellController=function(){return this.shellCtrl};M.prototype.getViewPortContainerCurrentState=function(){return this.shellCtrl.getViewPortContainer().getCurrentState()};M.prototype.ViewPortContainerNavTo=function(e,t,o){return this.shellCtrl.getViewPortContainer().navTo(e,t,o)};M.prototype.switchViewPortStateByControl=function(){};M.prototype.ViewPortContainerAttachAfterSwitchStateAnimationFinished=function(){};M.prototype.setUserActionsMenuSelected=function(e){this.shellCtrl.setUserActionsMenuSelected(e)};M.prototype.getUserActionsMenuSelected=function(){return this.shellCtrl.getUserActionsMenuSelected()};M.prototype.setNotificationsSelected=function(e){this.shellCtrl.setNotificationsSelected(e)};M.prototype.getNotificationsSelected=function(){return this.shellCtrl.getNotificationsSelected()};M.prototype.addShellDanglingControl=function(e){this.shellCtrl.getView().addDanglingControl(e)};M.prototype.getShellConfig=function(){return this.shellCtrl.getView().getViewData()?this.shellCtrl.getView().getViewData().config||{}:{}};M.prototype.getEndUserFeedbackConfiguration=function(){return{}};M.prototype.reorderUserPrefEntries=function(e){return this.shellCtrl._reorderUserPrefEntries(e)};M.prototype.addUserProfilingEntry=function(e){this.shellCtrl.addUserProfilingEntry(e)};M.prototype.logRecentActivity=function(e){if(!e.appType){e.appType=A.APP}if(!e.appId){e.appId=e.url}return this.shellCtrl._logRecentActivity(e)};M.prototype.setCurrentCoreView=function(e){this.currentCoreView=e};M.prototype.getCurrentCoreView=function(){return this.currentCoreView};M.prototype.registerTileActionsProvider=function(e){if(!r.last("/core/spaces/enabled")){return Promise.reject("registerTileActionsProvider is only supported with spaces enabled")}if(!this._aTileActionProviders){this._aTileActionProviders=[]}this._aTileActionProviders.push(e);return Promise.resolve()};M.prototype.getCustomTileActions=function(e){if(!r.last("/core/spaces/enabled")){return Promise.reject("getCustomTileActions is only supported with spaces enabled")}var t={controlId:e.getId(),tileId:e.getVizRefId(),stableId:e.getDataHelpId()||e.getVizRefId(),control:e,domRef:e.getDomRef()};var o=[];this._aTileActionProviders.forEach(function(e){var r=e(t)||[];o.push.apply(o,r)});return Promise.resolve(o)};M.prototype._isBuiltInIntent=function(e){if(!M._aBuiltInRoutes){var t=M.getMetadata().getRoutes();M._aBuiltInRoutes=t.reduce(function(e,t){return e.concat(t.pattern)},[])}if(!e||!e.semanticObject||!e.action){return false}var o=e.semanticObject+"-"+e.action;return M._aBuiltInRoutes.indexOf(o)!==-1};this.addTopHeaderPlaceHolder=function(){};this.removeTopHeaderPlaceHolder=function(){};M.prototype.updateHeaderItem=function(t,o){var r=e.byId(t);if(r&&o){if(o.hasOwnProperty("floatingNumber")){r.setFloatingNumber(o.floatingNumber)}}};M.prototype.destroyButton=function(t){if(!t){return}t=typeof t==="string"?[t]:t;t.forEach(function(t){var o=e.byId(t);if(o){o.destroy()}})};M.prototype.waitForShellLayout=function(){return this.shellCtrl.getView().waitForShellLayout()};M.prototype.destroy=function(){var e=this.shellCtrl?this.shellCtrl.awaitPendingInitializations():Promise.resolve();return e.then(function(){return t.prototype.destroy.apply(this,arguments)}.bind(this)).then(function(){b.destroyLayout()})};return M},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/RendererExtensions", ["sap/ui/core/Core","sap/ushell/EventHub","sap/base/Log"],function(e,t,n){"use strict";function i(n){setTimeout(function(){e.getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"})},0);t.emit("RendererLoaded",{rendererName:"fiori2"})}function r(t,n){setTimeout(function(){e.getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",t,n)},0)}sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=r;sap.ushell.renderers.fiori2.utils.init=i;function s(e,t,n){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(e.getId(),false,[t,n])}function o(e,t,n){sap.ushell.Container.getRenderer("fiori2").showActionButton(e.getId(),false,[t,n])}function a(e,t,n){sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.getId(),false,[t,n])}function d(e,t,n){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(e.getId(),false,[t,n])}function u(e,t){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[e,t])}function l(e,t,n){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(e.getId(),false,[t,n])}function f(e,t,n){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(e.getId(),false,[t,n])}function h(e,t,n){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(e.getId(),false,[t,n])}function c(e,t,n){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(e.getId(),false,[t,n])}function g(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration()}function p(){n.info("Application calls sap.ushell.Renderer.addEndUserFeedbackCustomUI. This function is deprecated. The call has no effect.")}function C(e){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(e)}function m(e){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesGroupedEntry(e)}function I(e){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(e)}function R(e,t){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(e,t)}function H(e){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(e)}function b(e){sap.ushell.Container.getRenderer("fiori2").setFooter(e)}function E(){sap.ushell.Container.getRenderer("fiori2").removeFooter()}function v(){this.addHeaderItem=function(e,t,n){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(e.getId(),false,[t,n])};this.setHeaderItemVisibility=function(t,n,i,r){var s=e.byId(t);if(r){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(s.getId(),i,[n])}};this.addSubHeader=function(e,t,n){sap.ushell.Container.getRenderer("fiori2").showSubHeader(e.getId(),false,[t,n])};this.removeSubHeader=function(e,t,n){sap.ushell.Container.getRenderer("fiori2").hideSubHeader(e.getId(),false,[t,n])};this.addHeaderEndItem=h;this.removeHeaderItem=s;this.removeHeaderEndItem=c;this.addEndUserFeedbackCustomUI=p;this.addOptionsActionSheetButton=o;this.removeOptionsActionSheetButton=a;this.setFooter=b;this.removeFooter=E;this.addUserPreferencesEntry=C;this.addUserPreferencesGroupedEntry=m;this.setHeaderTitle=I;this.setHeaderHiding=H;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=l;this.removeFloatingActionButton=f;this.setLeftPaneContent=d;this.removeLeftPaneContent=u;this.setLeftPaneVisibility=R;this.getConfiguration=g}var A=new v;return A},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Shell.controller", ["./History","sap/base/Log","sap/base/util/extend","sap/base/util/isPlainObject","sap/m/InstanceManager","sap/ui/core/Component","sap/ui/core/Configuration","sap/ui/core/Core","sap/ui/core/library","sap/ui/core/mvc/Controller","sap/ui/core/routing/HashChanger","sap/ui/core/routing/History","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ui/performance/Measurement","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/ApplicationType","sap/ushell/bootstrap/SchedulingAgent","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices","sap/ushell/components/HeaderManager","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/performance/FesrEnhancer","sap/ushell/renderers/fiori2/LogonFrameProvider","sap/ushell/resources","sap/ushell/services/AppConfiguration","sap/ushell/UserActivityLog","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/renderers/fiori2/ShellLayout"],function(e,t,n,i,a,o,r,s,l,h,c,d,p,u,g,f,jQuery,v,m,C,y,b,S,w,_,A,F,P,D,I,E,H,N,k,T){"use strict";var U=T.LAYOUT_MAPPING;var R=l.routing.HistoryDirection;var L=F.AppType;var M=true;var B=false;var x;var O=b.getElementsModel();var W;var V={embedded:0,newWindowThenEmbedded:1,newWindow:1,replace:0};var z={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"};var j={};P.init();return h.extend("sap.ushell.renderers.fiori2.Shell",{_aDoables:[],addDoable:function(e){this._aDoables.push(e)},_aDanglingControls:[],addDanglingControl:function(e){this._aDanglingControls.push(e)},_aDanglingBindings:[],addDanglingBinding:function(e){this._aDanglingBindings.push(e)},removeDanglingBinding:function(e){var t=this._aDanglingBindings.findIndex(function(t){return t===e});if(t>-1){this._aDanglingBindings.splice(t,1)}},_aPendingInitializations:[],addPendingInitialization:function(e){this._aPendingInitializations.push(e);return e},awaitPendingInitializations:function(){var e=this._aPendingInitializations.length;return Promise.allSettled(this._aPendingInitializations).then(function(){var t=this._aPendingInitializations.length;if(e<t){return this.awaitPendingInitializations()}}.bind(this))},onComponentTargetDisplay:function(e){var t=e.getParameters();var n=t.control;var i=t.object;if(this.bRestorePreviousHash){this.bRestorePreviousHash=false}n.navTo("centerViewPort",i.getId(),"show")},onInit:function(){var t=this;var n=o.getOwnerComponentFor(this.getView()).getRouter();n.getTarget("home").attachDisplay(this.onComponentTargetDisplay,this);n.getTarget("appfinder").attachDisplay(this.onComponentTargetDisplay,this);n.getTarget("pages").attachDisplay(this.onComponentTargetDisplay,this);n.getTarget("workpages").attachDisplay(this.onComponentTargetDisplay,this);n.getTarget("runtimeSwitcher").attachDisplay(this.onComponentTargetDisplay,this);n.getTarget("wzsearch").attachDisplay(this.onComponentTargetDisplay,this);if(_.last("/core/homeApp/enabled")){n.getTarget("homeapp").attachDisplay(this.onComponentTargetDisplay,this)}n.oHashChanger=c.getInstance();n.initialize(true);this.bEnableHashChange=true;M=true;var i=this.getView();var a=i.getViewData()||{};var r=window.matchMedia("(min-width: 600px)");var l=a.config||{};b.parseStatefulContainerConfiguration(l.statefulApplicationContainer);var h=b.shellElements().model();w.init(l,h);i.setModel(a.helperModel,"helper");i.setModel(a.shellModel);this.initShellModel(l,h);var d=function(e){_.emit("/core/shell/model/isPhoneWidth",!e.matches)};if(r.addListener){r.addListener(d);d(r)}i.setModel(I.i18nModel,"i18n");s.getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);s.getEventBus().subscribe("sap.ushell","appOpened",this.onAppOpened,this);s.getEventBus().subscribe("ESHSearchFinished",this._logSearchActivity,this);this._setConfigurationToModel();this._registerAndCreateEventHubDoables();x.addHeaderEndItem(["userActionsMenuHeaderButton"],false,["home","app","minimal","standalone","embedded","embedded-home","lean"],true);var u=[];if(l&&!l.moveContactSupportActionToShellHeader){u.push("ContactSupportBtn")}this.history=new e;this.oViewPortContainer=s.byId("viewPortContainer");b.init(l.appState,this.oViewPortContainer,l.rootIntent,l.disableHomeAppCache,{ownerComponent:this.getOwnerComponent()},u,l.cacheConfiguration);var g=function(e,i){this.oShellNavigation=e;this.oShellNavigation.registerPrivateFilters(i);this.oShellNavigation.registerExtraRouter(n);this.oShellNavigation.registerNavigationFilter(this._handleEmptyHash.bind(this));this.oShellNavigation.init(this.doHashChange.bind(this));this.oShellNavigation.registerNavigationFilter(this._disableSourceAppRouter.bind(this));this.oShellNavigation.registerNavigationFilter(this.handleDataLoss.bind(this));this.oShellNavigation.hashChanger.attachEvent("hashChanged",function(e){if(window.hasher.disableBlueBoxHashChangeTrigger===true){return}if(e.mParameters&&t.oShellNavigation.hashChanger.isInnerAppNavigation(e.mParameters.newHash,e.mParameters.oldHash)){b.postMessageToIframeApp("sap.ushell.appRuntime","innerAppRouteChange",{oHash:e.mParameters})}b.postMessageToIframeApp("sap.ushell.appRuntime","hashChange",{sHash:e.mParameters.fullHash})});A.emit("ShellNavigationInitialized")}.bind(this);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("ShellNavigation"),sap.ushell.Container.getServiceAsync("AppLifeCycle")]).then(function(e){this.oURLParsing=e[0];var t=e[1];this._oAppLifeCycleService=e[2];g(t,this._oAppLifeCycleService)}.bind(this));sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());if(p.system.desktop){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){e.init(W)})}window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()&&!(p.browser.name===p.browser.BROWSER.INTERNET_EXPLORER&&b.getCurrentApplication().container.getApplicationType()===m.NWBC.type)){if(!I.browserI18n){I.browserI18n=I.getTranslationModel(window.navigator.language).getResourceBundle()}return I.browserI18n.getText("dataLossExternalMessage")}return undefined};if(_.last("/core/shell/model/contentDensity")){b.getAppMeta()._applyContentDensityClass()}this.initShellUIService();if(!l.disableSignOut&&(l.sessionTimeoutTileStopRefreshIntervalInMinutes>0||l.sessionTimeoutReminderInMinutes>0)){this._createSessionHandler(l)}if(p.system.desktop){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){i.waitForShellLayout().then(function(){var t=document.getElementById(U.NavigationBar);t.addEventListener("focusin",function(){e.bFocusOnShell=false;e.bFocusPassedToExternalHandlerFirstTime=false});t.addEventListener("focusout",function(){e.bFocusOnShell=true;e.bFocusPassedToExternalHandlerFirstTime=true});var n=document.getElementById(U.RendererRootView);n.addEventListener("focusin",function(){e.bFocusOnShell=false;e.bFocusPassedToExternalHandlerFirstTime=false});n.addEventListener("focusout",function(){e.bFocusOnShell=true;e.bFocusPassedToExternalHandlerFirstTime=true})})})}},shellUpdateAggItem:function(e,t){return s.byId(t.getObject())},getViewPortContainer:function(){return s.byId("viewPortContainer")},_registerAndCreateEventHubDoables:function(){[A.once("CenterViewPointContentRendered").do(this._loadCoreExt.bind(this)),A.once("PagesRuntimeRendered").do(this._loadCoreExt.bind(this)),A.once("AppRendered").do(this._loadCoreExtNonUI5.bind(this)),A.on("toggleContentDensity").do(this.toggleContentDensity.bind(this)),A.on("ShellFloatingContainerUndockOnResize").do(this._handleFloatingContainerUndockOnResize.bind(this)),A.on("ShellFloatingContainerDockedIsResized").do(this._emitFloatingContainerResizeEvent.bind(this)),A.on("LaunchpadCustomRouterRouteMatched").do(this._centerViewPort.bind(this)),A.once("CoreResourcesComplementLoaded").do(this._onCoreResourcesComplementLoaded.bind(this)),A.once("loadRendererExtensions").do(this._loadRendererExtensionPlugins.bind(this)),A.once("loadUsageAnalytics").do(this._loadUsageAnalytics.bind(this)),A.once("loadWarmupPlugins").do(this._loadWarmupPlugins.bind(this)),A.once("loadTrackingActivitiesSetting").do(this._loadTrackingActivitiesSetting.bind(this)),A.on("centerViewPort").do(this._centerViewPort.bind(this))].forEach(function(e){this.addDoable(e)}.bind(this))},initShellModel:function(e,t){x=O;x.init(e,t);W=this.getView().getViewData().shellModel;_.emit("/core/shell/model/personalization",_.last("/core/shell/enablePersonalization"))},initShellUIService:function(){b.initShellUIService({fnOnBackNavigationChange:this.onBackNavigationChange.bind(this)});if(j.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],function(e){this.oUserStatus=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"})}.bind(this))}},onBackNavigationChange:function(e){b.setBackNavigationChanged(true);var t=e.getParameters().data;var n=_.last("/core/shell/model/currentState");if(t){b.service().setNavigateBack(t);if(n.stateName==="minimal"||n.stateName==="standalone"||n.stateName==="embedded"){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true)}}else{b.service().resetNavigateBack()}},toggleContentDensity:function(e){var t=e.contentDensity==="compact";b.getAppMeta()._applyContentDensityByPriority(t,true)},_handleEmptyHash:function(e){e=typeof e==="string"?e:"";e=e.split("?")[0];if(e.length===0){var t=this.getView()?this.getView().getViewData():{};j=t.config||{};if(j.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue}if(j.rootIntent){window.setTimeout(function(){window.hasher.setHash(j.rootIntent)},0);return this.oShellNavigation.NavigationFilterStatus.Abandon}}return this.oShellNavigation.NavigationFilterStatus.Continue},_setConfigurationToModel:function(){var e=this.getView().getViewData();if(e){j=e.config||{}}if(j){if(j.states){O.extendStates(j.states);w.extendStates(j.states)}if(j.enableSetTheme!==undefined){W.setProperty("/setTheme",j.enableSetTheme)}W.setProperty("/contentDensity",j.enableContentDensity===undefined?true:j.enableContentDensity);if(j.migrationConfig!==undefined){W.setProperty("/migrationConfig",j.migrationConfig)}if(j.enableUserDefaultParameters!==undefined){W.setProperty("/userDefaultParameters",j.enableUserDefaultParameters)}if(j.disableHomeAppCache!==undefined){W.setProperty("/disableHomeAppCache",j.disableHomeAppCache)}W.setProperty("/enableHelp",_.last("/core/extension/enableHelp"));W.setProperty("/searchAvailable",j.enableSearch!==false)}},_loadTrackingActivitiesSetting:function(e){this._getPersData({container:"flp.settings.FlpSettings",item:"userActivitesTracking"}).then(function(t){if(t===undefined){t=true}W.setProperty("/enableTrackingActivity",t);A.emit("StepDone",e.stepName)}).catch(function(n){A.emit("StepFailed",e.stepName);t.error("Failed to load tracking activities state from the personalization",n,"sap.ushell.components.flp.settings.FlpSettings")})},_getPreviousPageDirty:function(){return B},_setPreviousPageDirty:function(e){B=e},getModelConfiguration:function(){var e=this.getView().getViewData();var t;if(e){var i=e.config||{};t=n({},i)}delete t.applications;return t},_getLogonFrameProvider:function(){return D},onExit:function(){this._aDoables.forEach(function(e){e.off()});this._aDoables=[];this._aDanglingControls.forEach(function(e){e.destroy()});this._aDanglingControls=[];this._aDanglingBindings.forEach(function(e){e.destroy()});this._aDanglingBindings=[];s.getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);s.getEventBus().unsubscribe("ESHSearchFinished",this._logSearchActivity,this);s.getEventBus().unsubscribe("sap.ushell","appOpened",this.onAppOpened,this);if(this.oShellNavigation){this.oShellNavigation.hashChanger.destroy()}w.destroy();y.destroy();H.deactivate();x.destroy();b.shellElements().clean();b.destroy();x=undefined},_getCurrentAppRouter:function(){var e=this._oAppLifeCycleService;var t=e&&e.getCurrentApplication&&e.getCurrentApplication();var n=t&&t.componentInstance;if(n){return n.getRouter()}return null},_disableSourceAppRouter:function(e,t){if(!this.bEnableHashChange||this.bRestorePreviousHash){return this.oShellNavigation.NavigationFilterStatus.Continue}var n=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,t);if(!n){var i=this._getCurrentAppRouter();if(i){i.stop()}}return this.oShellNavigation.NavigationFilterStatus.Continue},_resumeAppRouterIgnoringCurrentHash:function(){var e=this._getCurrentAppRouter();if(e){e.initialize(true)}},handleDataLoss:function(e,t){var n=this.oShellNavigation.hashChanger;var i=n.getReloadApplication();if(this.bReloadApplication!==null&&this.bReloadApplication!==undefined){n.setReloadApplication(this.bReloadApplication);this.bReloadApplication=null}if(t===""||f.disableBlueBoxHashChangeTrigger===true){return this.oShellNavigation.NavigationFilterStatus.Continue}if(!this.bEnableHashChange&&!this.bRedoNavigation){this.bEnableHashChange=true;return this.oShellNavigation.NavigationFilterStatus.Custom}if(this.bRestorePreviousHash){return this.oShellNavigation.NavigationFilterStatus.Continue}if(this.bRedoNavigation){this.bRedoNavigation=false;this.bEnableHashChange=true;this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue}var a=this.oURLParsing.parseShellHash(e);var o=sap.ushell.Container.getRenderer()._isBuiltInIntent(a);var r=a.params["sap-ushell-navmode"];var s=r&&r[0];if(!o&&(this.bExplaceNavigation||s==="explace"||s==="frameless")){this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue}var l=sap.ushell.Container.getDirtyFlag();var h=sap.ushell.Container.isAsyncDirtyStateProviderSet();if(!h&&!l){B=l;return this.oShellNavigation.NavigationFilterStatus.Continue}var c=d.getInstance().getHistoryStateOffset()<0;Promise.all([this._waitForHash(t),sap.ushell.Container.getServiceAsync("NavTargetResolution"),sap.ushell.Container.getDirtyFlagsAsync()]).then(function(t){var n=t[1];var a=t[2];B=a;if(!a){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");return}if(o){if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}}else{var r="#"+e;n.resolveHashFragment(r).then(function(t){var n=t.targetNavigationMode==="explace"||t.targetNavigationMode==="frameless";var a=c&&t.navigationMode===z.newWindowThenEmbedded;if(n&&!a){this.bExplaceNavigation=true;this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}else if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this.bReloadApplication=i;this._restoreHashUsingAction(e,"redo")}}.bind(this)).catch(function(){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}.bind(this))}}.bind(this));return this._restoreHashUsingAction(t,"undo")},_waitForHash:function(e){var t="#"+e;return new Promise(function(e){var n=function(){var i=t===decodeURIComponent(window.location.hash);if(i){window.removeEventListener("hashchange",n);e()}};window.addEventListener("hashchange",n)})},_handleDirtyStateUserConfirm:function(){if(window.confirm(I.i18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);b.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:false});if(S.isBackNavigation()===true){S.resetBackNavigationFlag()}B=true;return true}return false},_restoreHashUsingAction:function(e,t){var n=this.oShellNavigation.wasHistoryEntryReplaced();var i=this._getRestoreHashStrategy(n,t);this._resumeAppRouterIgnoringCurrentHash();return this._restoreHash(i,e)},_getRestoreHashStrategy:function(e,t){if(e){return{strategy:"replaceHash",stepCount:0}}var n;var i=d.getInstance().getHistoryStateOffset();if(i===undefined||i>=0){i=1}else if(i<0){i=-1}if(t==="undo"){if(i<0){n="historyForward"}else{n="historyBack"}this.sLastUndoStrategy=n}else{switch(this.sLastUndoStrategy){case"historyBack":n="historyForward";break;case"historyForward":n="historyBack";break;default:n="replaceHash"}}return{strategy:n,stepCount:1}},_restoreHash:function(e,t){var n={status:this.oShellNavigation.NavigationFilterStatus.Custom,hash:""};switch(e.strategy){case"historyBack":this.bEnableHashChange=false;this._windowHistoryBack(e.stepCount);break;case"historyForward":this.bEnableHashChange=false;this._windowHistoryForward(e.stepCount);break;case"replaceHash":this.bEnableHashChange=false;f.replaceHash(t);break;default:throw new Error("Cannot execute unknown navigation strategy")}return n},_isColdStart:function(){var e=sap.ushell.Container.getRenderer("fiori2");var t=!e||!e.getCurrentCoreView();if(this.history.getHistoryLength()<=1&&t){return true}this._isColdStart=function(){return false};return false},_setEnableHashChange:function(e){this.bEnableHashChange=e},_logRecentActivity:function(e){if(!this.oInitialEnableTrackingPromise){if(_.last("/core/shell/model/enableTrackingActivity")!==undefined){this.oInitialEnableTrackingPromise=Promise.resolve()}else{this.oInitialEnableTrackingPromise=new Promise(function(e,t){_.once("/core/shell/model/enableTrackingActivity").do(e)})}}return this.oInitialEnableTrackingPromise.then(function(){if(_.last("/core/shell/model/enableTrackingActivity")){return new Promise(function(t,n){E.addActivity(e).done(t).fail(n)})}t.warning("Tracking is not enabled",null,"sap.ushell.renderers.fiori2.Shell.controller");return undefined})},_logApplicationUsage:function(e){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("UserRecents").then(function(t){t.addAppUsage(e)})}},doHashChange:function(e,t,n,i,a){g.start("FLP:ShellController.doHashChange","doHashChange","FLP");N.setPerformanceMark("FLP-ShellController-doHashChange-begin");A.emit("trackHashChange",e);var o=s.byId("sapUshellDashboardPage");if(o){o.setBlocked(true);o.setBusy(true)}return this._doHashChange(this,e,t,n,i,a).then(function(){g.end("FLP:ShellController.doHashChange")},function(e){g.end("FLP:ShellController.doHashChange");A.emit("doHashChangeError",Date.now());if(o){o.setBlocked(false);o.setBusy(false)}})},_doHashChange:function(e,t,n,i,o,r){this._wasHistoryEntryReplaced=this.oShellNavigation.wasHistoryEntryReplaced();this.oShellNavigation.resetHistoryEntryReplaced();var l;if(!this.bEnableHashChange){this.bEnableHashChange=true;return jQuery.when()}if(this.bRestorePreviousHash){this.bRestorePreviousHash=false;return jQuery.when()}if(r){e.hashChangeFailure(e.history.getHistoryLength(),r.message,null,"sap.ushell.renderers.fiori2.Shell.controller",false);return jQuery.when()}var h=new jQuery.Deferred;if(a&&M){a.closeAllDialogs();a.closeAllPopovers()}M=true;var c=e.history.getHistoryLength();var d=e.fixShellHash(t);var p=e.fixShellHash(i);e.history.hashChange(d,i);e.currentAppBeforeNav=E.getCurrentApplication();e._resolveHashFragment(d).then(function(t,a){var r=a?a.semanticObject+"-"+a.action:"";var u=e._getConfig();var f=!!(t&&t.componentHandle);var v=t&&t.ui5ComponentName;t=e._calculateNavigationMode(a,t);e._handleEarlyNavigation(d,n,t).then(function(m){if(m!==true){if(u&&u.applications&&u.applications[r]){t.applicationConfiguration=u.applications[r]}l=b.getInMemoryInstance(r,d,n,i);if(l.isInstanceSupported){e._initiateApplication(t,d,a,c,n,p,o);h.resolve();return}if(f||!v){var C=new jQuery.Deferred;if((t.applicationType==="URL"||t.applicationType==="GUI"||t.applicationType==="TR"||t.applicationType==="NWBC"||t.applicationType==="WDA"||t.applicationType==="WCF")&&l.isInstanceSupported===false&&l.appId){b.destroy(l.appId,l.container,C)}else{C.resolve()}C.done(function(){e._initiateApplication(t,d,a,c,n,p,o);h.resolve()});return}b.destroy(l.appId,l.container);b.removeApplication(r);E.setApplicationInInitMode();s.getEventBus().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:v});g.start("FLP:ShellController.UI5createComponent","UI5 createComponent","FLP");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){b.createComponent(t,a).done(function(){g.end("FLP:ShellController.UI5createComponent");e._initiateApplication(t,d,a,c,n,p,o)}).fail(function(t){var n=I.i18n.getText("cannot_load_ui5_component_details",[d]);var i="Failed to load UI5 component for navigation intent "+d;E.setCurrentApplication(e.currentAppBeforeNav);e.hashChangeFailure(c,{title:I.i18n.getText("error"),message:I.i18n.getText("failed_to_open_ui5_component"),technicalMessage:i},{info:n,technicalMessage:t.message+"\n"+t.stack},"sap.ushell.renderers.fiori2.Shell.controller",false)})})}h.resolve()})},function(t){var n=I.i18n.getText("cannot_resolve_navigation_target_details",[d]);var i="Failed to resolve navigation target: "+d+". This is most likely caused by an incorrect SAP Fiori launchpad content configuration or by missing role assignment.";e.hashChangeFailure(c,{title:I.i18n.getText("error"),message:I.i18n.getText("failed_to_open_app_missing_configuration_or_role_assignment"),technicalMessage:i},{info:n,fixedShellHash:d,technicalMessage:t},"sap.ushell.renderers.fiori2.Shell.controller",false);h.reject(i)});return h.promise()},_handleEarlyNavigation:function(e,t,n){var i=this;var a;return new Promise(function(o){i._openAppViaNWBC(n).then(function(r){if(r===true){n.sFixedShellHash=e;i.logOpenAppAction(n,t);a=s.byId("sapUshellDashboardPage");if(a){a.setBlocked(false);a.setBusy(false)}o(true);return}var l=n&&n.navigationMode===z.newWindow;if(l){n.sFixedShellHash=e;i.logOpenAppAction(n,t);sap.ui.require(["sap/ushell/components/container/ApplicationContainer"],function(e){n.url=e.prototype._checkNwbcUrlAdjustment(undefined,n.applicationType,n.url,true);i._openAppInNewWindowAndRestore(n);a=s.byId("sapUshellDashboardPage");if(a){a.setBlocked(false);a.setBusy(false)}o(true)});return}if(_.last("/core/shell/model/migrationConfig")){j.migrationConfig=false;i.getModel().setProperty("/migrationConfig",false);if(n&&e==="#"){j.rootIntent=""}else if(e==="#"){window.setTimeout(function(){window.hasher.setHash(j.rootIntent)},0);o(true);return}}o(false);return})})},_initiateApplication:function(e,n,i,a,o,r,s){g.start("FLP:ShellController._initiateApplication","_initiateApplication","FLP");var l=E.getMetadata(e);var h=_.last("/core/extension/SupportTicket");var c;if(l.title){window.document.title=l.title}else{t.debug("Shell controller._initiateApplication: the title of the window is not changed because most probably the application was resolved with undefined")}if(h){window.setTimeout(function(){H.activate()},0)}try{c=this.oShellNavigation.isInitialNavigation();this.navigate(i,n,l,e,r)}catch(e){if(e.stack){t.error("Application initialization (Intent: \n"+n+"\n failed due to an Exception:\n"+e.stack)}this.oShellNavigation.setIsInitialNavigation(c);this.hashChangeFailure(a,e.name,e.message,l?l.title:"",false)}g.end("FLP:ShellController._initiateApplication")},_resolveHashFragment:function(e){g.start("FLP:ShellController._resolveHashFragment","_resolveHashFragment","FLP");var t=this.oURLParsing.parseShellHash(e);var n=new jQuery.Deferred;var i=this._getConfig();if(window["sap-ushell-async-libs-promise-directstart"]){window["sap-ushell-async-libs-promise-directstart"].then(function(e){n.resolve(e.resolvedHashFragment,t);delete window["sap-ushell-async-libs-promise-directstart"]},function(e){n.reject(e);delete window["sap-ushell-async-libs-promise-directstart"]});return n.promise()}sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(a){a.resolveHashFragment(e).done(function(e){E.setCurrentApplication(e);if(t&&t.semanticObject+"-"+t.action===i.rootIntent){e.navigationMode="embedded"}g.end("FLP:ShellController._resolveHashFragment");N.setPerformanceMark("FLP-ShellController-resolveHashFragment-end");n.resolve(e,t)}).fail(function(e){n.reject(e)})});return n.promise()},_calculateNavigationMode:function(e,t){if(!t){return undefined}var n=t.navigationMode;if(n===z.newWindowThenEmbedded){if(this._isColdStart()||d.getInstance().getDirection()===R.Backwards){t.navigationMode=z.embedded}else{t.navigationMode=z.newWindow;if(!N.isNativeWebGuiNavigation(t)){t.url=this._getCurrentLocationHash()}}return t}if(n===z.newWindow&&this._isColdStart()){if(this._hasAppCapabilitiesNavigationMode(t)&&t.appCapabilities.navigationMode===z.embedded){t.navigationMode=z.embedded;return t}t.navigationMode=z.replace;return t}if(n===z.newWindow&&this._hasAppCapabilitiesNavigationMode(t)&&t.appCapabilities.navigationMode===z.embedded){t.url=this._getCurrentLocationHash()}return t},_hasAppCapabilitiesNavigationMode:function(e){return N.isPlainObject(e.appCapabilities)&&e.appCapabilities.hasOwnProperty("navigationMode")},_usesNavigationRedirect:function(e){if(!e){return(new jQuery.Deferred).reject().promise()}var n=this;var i=e.getInstance({});if(i&&typeof i.navigationRedirect==="function"){var a=new jQuery.Deferred;var o=i.navigationRedirect();if(o&&typeof o.then==="function"){o.then(function(e){t.warning("Performing navigation redirect to hash "+e);i.destroy();n.history.pop();sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){t.toExternal({target:{shellHash:e}},undefined,false);a.resolve(true)})},function(){a.reject()});return a.promise()}}return(new jQuery.Deferred).reject().promise()},navigate:function(e,t,n,a,o){g.start("FLP:ShellController.navigate","navigate","FLP");var r=i(a)?a.navigationMode:null;var s=this;if(r===null){if(this._isColdStart()){window.hasher.setHash("");return}this.bEnableHashChange=false;this.history.pop();this._windowHistoryBack(1);return Promise.resolve()}a=this._calculateNavigationMode(e,a);r=i(a)?a.navigationMode:null;if(r===z.embedded){if(!this._isColdStart()&&!this._wasHistoryEntryReplaced){this.oShellNavigation.setIsInitialNavigation(false)}var l=this._usesNavigationRedirect(a.componentHandle);var h=new Promise(function(i,r){l.then(null,function(){s._handleEmbeddedNavMode(t,e,n,a,o).then(function(){A.emit("CloseFesrRecord",{date:Date.now(),technicalName:n.technicalName});i()})});g.end("FLP:ShellController.navigate")});return h}if(r===z.replace){this.oShellNavigation.setIsInitialNavigation(false);this.bEnableHashChange=false;this._changeWindowLocation(a.url);return Promise.resolve()}if(r===z.newWindow){this._openAppInNewWindowAndRestore(a);return Promise.resolve()}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderers.fiori2.Shell.controller",false);return Promise.resolve()},_openAppViaNWBC:function(e){var n=this;return new Promise(function(i){var a;if(e&&(N.isNativeWebGuiNavigation(e)||e.nativeNWBCNavigation)){a=true}else{a=false}if(a===false){i(false);return}var o=N.getPrivateEpcm();var r=V[e.navigationMode];var l;var h;if(N.hasNavigationModeCapability()){h=r||V[z.embedded]}var c=n._appendUserIdToUrl("sap-user",e.url).then(function(t){l=N.appendSapShellParam(t);return new Promise(function(t){try{var n=e.applicationType;var i=e.appCapabilities&&e.appCapabilities.appFrameworkId;var a={};var o=[];var r;var s=function(){a["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);a["system-alias"]=e.systemAlias;return[{name:"sap-flp-params",value:JSON.stringify(a)}]};var h=function e(t,n){var i=[];var a=function(e,a){if(t.indexOf(e+"=")>0){var o=new RegExp("(?:"+e+"=)([^&/]+)").exec(t);if(o&&o.length===2){i.push([o[1]]);n.push(a)}}};a("sap-iapp-state","sap-iapp-state-data");a("sap-xapp-state","sap-xapp-state-data");a("sap-xapp-state-data","sap-xapp-state-data");a("sap-intent-param","sap-intent-param-data");return i};if(n==="GUI"||n==="TR"||n==="NWBC"||n==="WDA"||n==="WCF"||i==="GUI"||i==="WDA"||i==="NWBC"||i==="WCF"){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){r=h(l,o);if(r.length>0){e.getAppStateData(r).then(function(e){o.forEach(function(t,n){if(e[n][0]){a[t]=e[n][0]}});t(s())},function(e){t()})}else{t(s())}})}else{t()}}catch(e){t()}})});c.then(function(a){try{s.getEventBus().publish("launchpad","appOpening",e);if(!o.doNavigate(l,h,undefined,undefined,undefined,undefined,undefined,a)){i(false);return}s.getEventBus().publish("sap.ushell","appOpened",e);n._restoreAfterNwbcNavigation(e).then(function(){if(n._oAppLifeCycleService.getCurrentApplication()&&n._oAppLifeCycleService.getCurrentApplication().homePage){n._setMenuVisible(true)}i(true)})}catch(a){if(a.stack){t.error("Application initialization failed due to an Exception:\n"+a.stack)}n.hashChangeFailure(n.history.getHistoryLength(),a.name,a.message,e.text,false);i(false)}})})},_restoreAfterNwbcNavigation:function(e){if(this.history.getHistoryLength()===1&&!this._oAppLifeCycleService.getCurrentApplication()){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{shellHash:"#"},writeHistory:false})})}this._restorePreviousHashAfterOpenNewWindow(e);return Promise.resolve()},_appendUserIdToUrl:function(e,t){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(n){var i=n.getUser().getId();var a=t.indexOf("?")>=0?"&":"?";return t+a+e+"="+i})},_restorePreviousHashAfterOpenNewWindow:function(e){this.history.pop();var t=e.componentHandle&&e.componentHandle.getInstance&&e.componentHandle.getInstance({});if(t){t.destroy()}this._resumeAppRouterIgnoringCurrentHash();this.bRestorePreviousHash=true;this._windowHistoryBack(1);E.setCurrentApplication(this.currentAppBeforeNav);A.emit("openedAppInNewWindow",Date.now())},_openAppInNewWindowAndRestore:function(e){s.getEventBus().publish("launchpad","appOpening",e);this._openAppNewWindow(e.url);s.getEventBus().publish("sap.ushell","appOpened",e);this._restorePreviousHashAfterOpenNewWindow(e)},_handleEmbeddedNavMode:function(e,t,n,i,a){g.start("FLP:ShellController._handleEmbeddedNavMode","_handleEmbeddedNavMode","FLP");var o=this._getConfig();this.resetShellUIServiceHandlers();b.getAppMeta().setAppIcons(n);var r="-"+t.semanticObject+"-"+t.action;var s=e==="#"||o.rootIntent&&N.getBasicHash(o.rootIntent)===t.semanticObject+"-"+t.action;var l=t?t.semanticObject+"-"+t.action:"";b.switchViewState(b.shellElements().calculateElementsState(s?"home":"app",i.applicationType,o.appState,i.explicitNavMode),undefined,r);if(s){b.getShellUIService().setBackNavigation()}var h=b.handleControl(l,r,t,i,this.getWrappedApplicationWithMoreStrictnessInIntention.bind(this),e,a);if(this.currentAppBeforeNav){var c;c=b.getWebGuiV1StatefulContainer(this.currentAppBeforeNav.url);if(c){c.onApplicationOpened(i.applicationType)}}g.end("FLP:ShellController._handleEmbeddedNavMode");return h},_centerViewPort:function(){this.oViewPortContainer.switchState("Center")},_isShellHomeIntent:function(e){return e==="#"||e===j.rootIntent},getWrappedApplicationWithMoreStrictnessInIntention:function(e,n,i,a,o,r,l){var h=this;if(p.system.desktop){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){var t=s.byId("shellAppTitle");if(t&&_.last("/core/shell/model/currentState/stateName")==="app"){var n=t.getFocusDomRef();if(n){e.sendFocusBackToShell(n.getAttribute("id"))}}})}window.setTimeout(function(){window.setTimeout(function(){h.readNavigationEnd()},600);s.getEventBus().publish("launchpad","appOpening",a);t.info("app is being opened")},0);if(j.applications){a.applicationConfiguration=j.applications[e]}var c=b.getAppContainer(o,a,this._isColdStart(),i,l);a.sFixedShellHash=l;b.publishNavigationStateEvents(c,a,this.onAppAfterRendering.bind(this,a));var d=c.getApplicationType();var u=c.getFrameworkId();if(d==="GUI"||d==="TR"||d==="WDA"||d==="NWBC"||d==="WCF"||u==="GUI"||u==="WDA"||u==="NWBC"||u==="WCF"){c.addStyleClass("sapUShellApplicationContainerShiftedIframe")}if(!r){c.addStyleClass("sapUShellApplicationContainerLimitedWidth")}if(this._isFloatingContainerDocked()&&window.matchMedia("(min-width: 106.4rem)").matches){c.addStyleClass("sapUShellDockingContainer");c.removeStyleClass("sapUShellApplicationContainerLimitedWidth")}else if(this._isFloatingContainerDocked()){c.removeStyleClass("sapUShellApplicationContainerLimitedWidth")}c.toggleStyleClass("sapUshellDefaultBackground",!n.hideLightBackground);b.getAppMeta()._applyContentDensityByPriority();b.addControl(c);N.setPerformanceMark("FLP - addAppContainer");g.end("FLP:ShellController.getWrappedApplication");return c},resetShellUIServiceHandlers:function(){b.getAppMeta().resetShellUIServiceHandlers();b.setBackNavigationChanged(false)},onAppAfterRendering:function(e){var n=b.getShellUIService();window.setTimeout(function(){s.getEventBus().publish("sap.ushell","appOpened",e);t.info("app was opened")},0);var i=b._publicEventDataFromResolutionResult(e);A.emit("AppRendered",i,true);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",i);N.setPerformanceMark("FLP.appOpened");if(n){b.initAppMetaParams()}x.updateStateProperty("application/icon",b.getAppMeta().getAppIcon(),true)},_saveHomePageComponent:function(){if(this.oHomeApp){return}var e=this;var t="sap.ushell";var n=function(i,a,o){e.oHomeApp=o.component;s.getEventBus().unsubscribe(t,"appComponentLoaded",n)};s.getEventBus().subscribe(t,"appComponentLoaded",n)},hashChangeFailure:function(e,t,n,i,a){var o=s.byId("sapUshellDashboardPage");if(o){o.setBlocked(false);o.setBusy(false)}if(N.isPlainObject(t)){this.reportError(t.technicalMessage,n.technicalMessage,i);sap.ushell.Container.getServiceAsync("Message").then(function(e){e.show(e.Type.ERROR,t.message,{title:t.title,details:n})})}else{this.reportError(t,n,i);this.delayedMessageError(I.i18n.getText("fail_to_start_app_try_later"))}M=false;this._resumeAppRouterIgnoringCurrentHash();if(e===0){window.hasher.setHash("")}else if(new URLSearchParams(window.location.search).get("bFallbackToShellHome")){window.hasher.setHash("")}else{this.bEnableHashChange=a;sap.ushell.Container.setDirtyFlag(B);b.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:B});this._windowHistoryBack(1)}},reportError:function(e,n,i){t.error(e,n,i)},delayedMessageError:function(e){window.setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getServiceAsync("Message").then(function(t){t.error(e)})}},0)},fixShellHash:function(e){if(!e){e="#"}else if(e.charAt(0)!=="#"){e="#"+e}return e},_openAppNewWindow:function(e){var t=k.openURL(e);if(!t&&!this._checkWindowLocationSearch("workzone-mobile-app=true")){var n=I.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(n)}},_checkWindowLocationSearch:function(e){return window.location.search.indexOf(e)>-1},_windowHistoryBack:function(e){window.history.go(-1*e)},_windowHistoryForward:function(e){window.history.go(e)},_changeWindowLocation:function(e){window.location.href=e},_setMenuVisible:function(e){var t=document.getElementById(U.NavigationBar);if(!t){return}e=e||_.last("/core/menu/enabled")&&_.last("/core/menu/visibleInAllStates");t.classList.toggle("sapUshellShellHidden",!e)},onAppOpened:function(e,t,n){if(n.targetNavigationMode!=="explace"&&n.targetNavigationMode!=="frameless"){this._setMenuVisible(false)}var i=this.oShellNavigation.hashChanger.getAppHash();var a=i?"&/"+i:null;this.logOpenAppAction(n,a)},externalSearchTriggered:function(e,t,n){_.emit("/core/shell/model/searchTerm",n.searchTerm);n.query=n.searchTerm},onBeforeNavigate:function(e){var t=e.getParameter("to");var n=this.getOwnerComponent();var i=t===n.byId("Shell-home-component-container");var a=t===n.byId("pages-component-container");var o=t===n.byId("homeApp-component-container");var r=t===n.byId("workPageRuntime-component-container");var s=t===n.byId("runtimeSwitcher-component-container");var l=i||a||o||r||s;b.onBeforeNavigate(e.getParameter("fromId"),e.getParameter("from"),e.getParameter("toId"),e.getParameter("to"));this._setMenuVisible(l)},onAfterNavigate:function(e){var t=e.mParameters?e.mParameters.toId:undefined;var n=s.byId("sapUshellDashboardPage");if(n){n.setBlocked(false);n.setBusy(false)}b.onAfterNavigate(e.getParameter("fromId"),e.getParameter("from"),t,e.getParameter("to"));s.getEventBus().publish("sap.ushell","navigated",{})},logOpenAppAction:function(e,t){var n=_.last("/core/shell/enableRecentActivity")&&_.last("/core/shell/enableRecentActivityLogging");if(!n){return}var i={};var a=E.getMetadata(e);var o=e.sFixedShellHash;var r=o;if(t){r+=t}i.title=a.title;i.appType=L.APP;i.url=r;var s=this.oURLParsing.parseShellHash(o);if(s){i.appId="#"+this.oURLParsing.constructShellHash({semanticObject:s.semanticObject,action:s.action})}else{i.appId=o}if(o&&o.indexOf("#Action-search")===-1){window.setTimeout(function(){this._logRecentActivity(i)}.bind(this),1500)}},_logSearchActivity:function(){if(_.last("/core/shell/enableRecentActivity")&&_.last("/core/shell/enableRecentActivityLogging")){var e="";try{e=s.byId("searchFieldInShell-input").getModel().getLastSearchTerm()}catch(e){t.error("Shell: last search term is not available to log a recent activity")}this._logRecentActivity({appId:"#Action-search",appType:L.SEARCH,title:e,url:"#"+window.hasher.getHash()})}},readNavigationEnd:function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=I.i18n.getText("loadingComplete");window.setTimeout(function(){e.setAttribute("aria-live","off");e.innerHTML=""},0)}},_loadCoreExtNonUI5:function(e){if(e&&e.applicationType!=="SAPUI5"){this._loadCoreExt()}},_loadUsageAnalytics:function(e){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(t){t.init(I.i18n.getText("usageAnalytics"),I.i18n.getText("i_agree"),I.i18n.getText("i_disagree"),I.i18n.getText("remind_me_later"));A.emit("StepDone",e.stepName)},function(){A.emit("StepFailed",e.stepName)})},_onCoreResourcesComplementLoaded:function(){N.setPerformanceMark("SchedulingAgent-StartOfFlow");var e=this.getView();if(e){e.createPostCoreExtControls()}C._initialize();A.emit("startScheduler")},_loadRendererExtensionPlugins:function(e){var t=new URLSearchParams(window.location.search);var n=t.get("sap-ushell-xx-pluginmode")==="delayed";function i(t){function i(){A.emit("StepDone",e.stepName)}function a(){t.loadPlugins("RendererExtensions").always(i)}if(n){window.setTimeout(a,5e3)}else{a()}}sap.ushell.Container.getServiceAsync("PluginManager").then(i.bind(this))},_loadWarmupPlugins:function(e){sap.ushell.Container.getServiceAsync("PluginManager").then(function(n){n.loadPlugins("AppWarmup").always(function(){t.debug("WARMUP plugins loaded",null,"sap.ushell.renderers.fiori2.Shell");A.emit("StepDone",e.stepName);N.setPerformanceMark("SchedulingAgent-EndOfFlow");N.setPerformanceMeasure("SchedulingAgentTotalTime","SchedulingAgent-StartOfFlow","SchedulingAgent-EndOfFlow")})})},_loadCoreExt:function(){g.end("FLP:Container.InitLoading");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){A.emit("loadCoreResourcesComplement")})},getCurrentViewportState:function(){return _.last("/core/shell/model/currentViewPortState")},_activateFloatingUIActions:function(e){if(e<417){this.oFloatingUIActions.disable()}else{this.oFloatingUIActions.enable()}},setFloatingContainerDragSelector:function(e){if(!this._oFloatingContainerPromise){this._oFloatingContainerPromise=this.getView().createFloatingContainer()}this._oFloatingContainerPromise.then(function(){var n=document.querySelector(e);if(n){n.classList.add("sapUshellFloatingContainerSelector")}else{t.error("setFloatingContainerDragSelector could not find the element","sap.ushell.renderers.fiori2.Shell.controller")}sap.ui.require(["sap/ushell/UIActions"],function(n){if(!this.oFloatingUIActions){this.oFloatingUIActions=new n({containerSelector:".sapUiBody",wrapperSelector:".sapUshellFloatingContainerWrapper",draggableSelector:".sapUshellFloatingContainerWrapper",rootSelector:".sapUiBody",cloneClass:"sapUshellFloatingContainer-clone",dragCallback:this._handleFloatingContainerDrag.bind(this),endCallback:this._handleFloatingContainerDrop.bind(this),moveTolerance:3,onDragStartUIHandler:this._onFloatingContainerDragStart.bind(this),onDragEndUIHandler:this._onFloatingContainerDragEnd.bind(this),dragAndScrollCallback:this._onFloatingContainerDrag.bind(this),switchModeDelay:1e3,isLayoutEngine:false,isTouch:false,elementToCapture:e,defaultMouseMoveHandler:function(){},debug:t.getLevel()>=t.Level.DEBUG})}else{this.oFloatingUIActions.elementsToCapture=jQuery(e)}this._activateFloatingUIActions(jQuery(window).width());var i;jQuery(window).bind("resize",function(){clearTimeout(i);i=window.setTimeout(this._activateFloatingUIActions(jQuery(window).width()),300)}.bind(this))}.bind(this))}.bind(this))},_onFloatingContainerDrag:function(e){g.start("FLP:Shell.controller._doDock","dragging co-pilot element","FLP");if(!this._isFloatingContainerDockSupported()){g.end("FLP:Shell.controller._doDock");return}var t=jQuery(window).width();if(e){e.docked={};var n=e.docked;if(e.moveX>=t-64){n.dockPos="right";n.setIsDockingAreaOpen=true;this._handleDockingPreview(e)}else if(e.moveX<64){n.dockPos="left";n.setIsDockingAreaOpen=true;this._handleDockingPreview(e)}else{if(this._isDockingAreaOpen()){this._handleDockingPreview(false)}if(this._isFloatingContainerDocked()){this._handleDockingPreview(false);this._undockFloatingContainer()}}}g.end("FLP:Shell.controller._doDock")},_isFloatingContainerDockSupported:function(){var e=p.media.getCurrentRange(p.media.RANGESETS.SAP_STANDARD);return e.name==="Desktop"},_finishDoDock:function(e){this._handleDockingPreview(false);this._saveFloatingContainerState("docked:"+e.dockPos);this._moveFloatingContainerIntoDock(e);s.getEventBus().publish("launchpad","shellFloatingContainerIsDocked")},_expandFloatingContainerToDock:function(){var e=document.getElementById(U.FloatingContainer);e.style.height="100%";s.byId("shell-floatingContainer").addStyleClass("sapUshellShellFloatingContainerFullHeight")},_shrinkFloatingContainerToDragUI:function(){var e=document.getElementById(U.FloatingContainer);e.classList.remove("sapUshellContainerDocked");s.byId("shell-floatingContainer").removeStyleClass("sapUshellShellFloatingContainerFullHeight");jQuery(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight")},_emitFloatingContainerResizeEvent:function(){var e=s.byId("viewPortContainer");if(e){e._handleSizeChange()}window.setTimeout(function(){s.getEventBus().publish("launchpad","appFinderWithDocking")},300)},_undockFloatingContainer:function(){if(this._isFloatingContainerDocked()){this._saveFloatingContainerState("floating");this._shrinkFloatingContainerToDragUI();this._removeFloatingContainerFromDock();this._startFloatingContainerAnimation(false)}},_handleFloatingContainerUndockOnResize:function(){this._undockFloatingContainer();s.getEventBus().publish("launchpad","shellFloatingContainerIsUnDockedOnResize")},_onFloatingContainerDragStart:function(){g.start("FLP:Shell.controller._onDragStartUI","start drag","FLP");this._undockFloatingContainer();s.getEventBus().publish("launchpad","shellFloatingContainerIsUnDocked");g.end("FLP:Shell.controller._onDragStartUI")},_startFloatingContainerAnimation:function(e){return new Promise(function(t,n){this._clearFloatingContainerAnimation();var i=Array.from(document.getElementsByClassName("sapUshellFloatingContainerWrapper"));i.forEach(function(n){if(e){n.classList.add("sapUshellContainerDockedExtendCoPilot");this._emitFloatingContainerResizeEvent()}else{return}["webkitAnimationEnd","onanimationend","msAnimationEnd","animationend"].forEach(function(e){n.addEventListener(e,function(){this._clearFloatingContainerAnimation();t()}.bind(this),{once:true})}.bind(this))}.bind(this))}.bind(this))},_clearFloatingContainerAnimation:function(){var e=Array.from(document.getElementsByClassName("sapUshellFloatingContainerWrapper"));e.forEach(function(e){e.classList.remove("sapUshellContainerDockedExtendCoPilot");e.classList.remove("sapUshellContainerDockedMinimizeCoPilot")})},_handleDockingPreview:function(e){var t=e?e.docked:false;var n=t?t.setIsDockingAreaOpen:false;if(n&&jQuery("#DockingAreaDiv").length===0){var i=r.getRTL();if(t.dockPos==="right"&&e.clone&&!i||t.dockPos==="left"&&e.clone&&i){jQuery('<div id="DockingAreaDiv" class="sapUshellShellDisplayDockingAreaRight">').appendTo(e.clone.parentElement)}else if(t.dockPos==="left"&&e.clone&&!i||t.dockPos==="right"&&e.clone&&i){jQuery('<div id="DockingAreaDiv" class="sapUshellShellDisplayDockingAreaLeft">').appendTo(e.clone.parentElement)}e.clone.oDockedProp={};e.clone.oDockedProp.dockPos=t.dockPos}else if(!n){window.setTimeout(function(){jQuery(".sapUshellShellDisplayDockingAreaRight").remove();jQuery(".sapUshellShellDisplayDockingAreaLeft").remove()},150)}},_isFloatingContainerDocked:function(){return document.getElementsByClassName("sapUshellContainerDocked").length!==0},_isDockingAreaOpen:function(){return document.getElementsByClassName("sapUshellShellDisplayDockingAreaRight").length!==0||document.getElementsByClassName("sapUshellShellDisplayDockingAreaLeft").length!==0},_moveFloatingContainerIntoDock:function(e){var t=r.getRTL();var n=document.getElementById(U.FloatingContainer);n.classList.add("sapUshellContainerDocked");var i;if(e.dockPos==="left"&&!t||e.dockPos==="right"&&t){i=U.FloatingContainerDockStart}else{i=U.FloatingContainerDockEnd}if(e.dockPos==="left"){n.classList.add("sapUshellContainerDockedStart");n.classList.remove("sapUshellContainerDockedEnd")}else{n.classList.remove("sapUshellContainerDockedStart");n.classList.add("sapUshellContainerDockedEnd")}var a=document.getElementById(i);a.appendChild(n);this._expandFloatingContainerToDock();this._emitFloatingContainerResizeEvent()},_removeFloatingContainerFromDock:function(){var e=document.getElementById(U.FloatingContainer);document.body.appendChild(e);e.classList.remove("sapUshellContainerDocked");e.classList.remove("sapUshellContainerDockedStart");e.classList.remove("sapUshellContainerDockedEnd");this._emitFloatingContainerResizeEvent()},_onFloatingContainerDragEnd:function(e){var t=jQuery(window).width();if(this._isFloatingContainerDocked()){if(e&&(e.clientX>=t-64||e.clientX<64)){this._startFloatingContainerAnimation(false)}}else{}},_handleFloatingContainerDrop:function(e,t,n){g.start("FLP:Shell.controller._handleFloatingContainerDrop","drop floating container","FLP");var i=t.firstChild?s.byId(t.firstChild.id):undefined;var a=new v(v.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");var o=jQuery(window).width();var r=jQuery(window).height();var l=n.deltaX/o;var h=-n.deltaY/r;var c=t.style.visibility;var d=t.style.display;var p=parseFloat(t.style.left.replace("%",""));var u=parseFloat(t.style.top.replace("%",""));if(typeof p==="number"){l=p+100*n.deltaX/o}if(typeof u==="number"){h=u+100*n.deltaY/r}if(this._isDockingAreaOpen()){h=0}t.style.left=l+"%";t.style.top=h+"%";t.style.position="absolute";t.style.display="block";t.visibility=c;t.display=d;a.put("floatingContainerStyle",t.style.cssText);if(i){i.handleDrop();if(n.clone.oDockedProp&&this._isDockingAreaOpen()){this._finishDoDock(n.clone.oDockedProp)}}g.end("FLP:Shell.controller.handleFloatingContainerDrop")},_handleFloatingContainerDrag:function(e,t){g.start("FLP:Shell.controller._handleFloatingContainerUIStart","starts dragging floating container","FLP");var n=t;n.style.display="none";if(window.getSelection){var i=window.getSelection();try{i.removeAllRanges()}catch(e){}}g.end("FLP:Shell.controller._handleFloatingContainerUIStart")},getFloatingContainerState:function(){var e=new v(v.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");var t="floating";if(e!==null){t=e.get("lastState");if(t===null){t="floating"}}return t},_saveFloatingContainerState:function(e){var t=new v(v.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");t.put("lastState",e)},setFloatingContainerVisibility:function(e){if(!this._oFloatingContainerPromise){this._oFloatingContainerPromise=this.getView().createFloatingContainer()}this.getView().getModel("helper").setProperty("/shell/floatingContainerVisible",e);return this._oFloatingContainerPromise.then(function(){var t=this.getFloatingContainerState()||"";if(t==="floating"){}else if(t.indexOf("docked")!==-1){if(e){if(this._isFloatingContainerDockSupported()){var n=t.indexOf("right")!==-1?"right":"left";this._moveFloatingContainerIntoDock({dockPos:n});this._startFloatingContainerAnimation(true)}else{this._saveFloatingContainerState("floating")}}else{this._startFloatingContainerAnimation(false)}this._emitFloatingContainerResizeEvent()}}.bind(this))},getFloatingContainerVisibility:function(){return this.getView().getModel("helper").getProperty("/shell/floatingContainerVisible")},setFloatingContainerContent:function(e,t,n,i){x.setFloatingContainerContent(e,t,n,i)},getRightFloatingContainerVisibility:function(){var e=this.getView().getRightFloatingContainer();var t=e&&e.getVisible();return t},setHeaderTitle:function(e){w.updateStates({propertyName:"title",value:e||"",aStates:["home","app"],bCurrentState:false,bDoNotPropagate:false})},setNavigationBar:function(e){e.placeAt(U.NavigationBar,"only");this.addDanglingControl(e)},setShellShapes:function(e){if(e.placeAt){e.placeAt(U.ShellShapes,"only");this.addDanglingControl(e)}else if(e instanceof Node){document.getElementById(U.ShellShapes).appendChild(e)}},setFooter:function(e){var n=this.getView();var i=n.getModel("helper");if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid")}var a=i.getProperty("/shell/footerContent");if(a){t.warning("You can only set one footer. Replacing existing footer: "+a+", with the new footer: "+e.getId()+".")}i.setProperty("/shell/footerContent",e.getId());e.placeAt(U.Footer,"only");this.addDanglingControl(e);if(e._applyContextClassFor){e._applyContextClassFor("footer")}},removeFooter:function(){var e=this.getView();var t=e.getModel("helper");var n=t.getProperty("/shell/footerContent");if(n){var i=s.byId(n);if(i&&i.destroy){i.destroy()}}t.setProperty("/shell/footerContent","")},addUserPreferencesEntry:function(e,t){this._validateUserPrefEntryConfiguration(e,t);this._updateUserPrefModel(e,t)},addUserProfilingEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateProfilingModel(e)},_validateUserPrefEntryConfiguration:function(e,t){if(!e||typeof e!=="object"){throw new Error("object oConfig was not provided")}if(!e.title){throw new Error("title was not provided")}if(!e.value){throw new Error("value was not provided")}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid")}else if(e.entryHelpID===""){throw new Error("entryHelpID should not be an empty string")}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid")}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid")}["onSave","content","onCancel"].forEach(function(t){if(e[t]&&typeof e[t]!=="function"){throw new Error(t+" type is  "+typeof e[t]+" but should be a function")}});if(t){[{name:"groupingId",type:"string"},{name:"groupingTabTitle",type:"string"},{name:"groupingTabHelpId",type:"string"}].forEach(function(t){if(!e[t.name]){throw new Error(t.name+" is missing")}else if(typeof e[t.name]!==t.type){throw new Error(t.name+" type is "+typeof e[t.name]+" but should be a "+t.type)}})}},_createSessionHandler:function(e){var t=this;var n=2e4;sap.ui.require(["sap/ushell/SessionHandler"],function(i){t.oSessionHandler=new i(b);t.oSessionHandler.initLogout();window.setTimeout(function(){t.oSessionHandler.init({sessionTimeoutReminderInMinutes:e.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:e.sessionTimeoutIntervalInMinutes,sessionTimeoutTileStopRefreshIntervalInMinutes:e.sessionTimeoutTileStopRefreshIntervalInMinutes,enableAutomaticSignout:e.enableAutomaticSignout})},n)})},_getSessionHandler:function(){return this.oSessionHandler},_navBack:function(){this.setUserActionsMenuSelected(false);b.service().navigateBack()},_updateUserPrefModel:function(e,t){var n=this._getModelEntryFromEntryObject(e);var i=_.last("/core/userPreferences/entries")||[];if(t){n.groupingEnablement=true;n.groupingId=e.groupingId;n.groupingTabTitle=e.groupingTabTitle;n.groupingTabHelpId=e.groupingTabHelpId}i.push(n);i=this._reorderUserPrefEntries(i);_.emit("/core/userPreferences/entries",i)},_updateProfilingModel:function(e){var t=this._getModelEntryFromEntryObject(e);var n=_.last("/core/userPreferences/profiling")||[];n.push(t);_.emit("/core/userPreferences/profiling",n)},_getModelEntryFromEntryObject:function(e){return{id:N._getUid(),entryHelpID:e.entryHelpID,title:e.title,valueArgument:e.value,valueResult:null,onSave:e.onSave,onCancel:e.onCancel,contentFunc:e.content,contentResult:null,icon:e.icon,provideEmptyWrapper:e.provideEmptyWrapper}},_reorderUserPrefEntries:function(e){var t=[];var n=["userAccountEntry","themes","homepageEntry","spacesEntry","userActivitiesEntry","userProfiling","language","notificationsEntry","userDefaultEntry"];var i={};for(var a=e.length-1;a>=0;a--){if(n.indexOf(e[a].id)!==-1){var o=e.splice(a,1)[0];i[o.id]=o}}n.forEach(function(e){var n=i[e];if(n){t.push(n)}});return t.concat(e)},getModel:function(){return W},_getConfig:function(){return j||{}},_getPersData:function(e){var t=o.getOwnerComponentFor(this.getView());return new Promise(function(n,i){sap.ushell.Container.getServiceAsync("Personalization").then(function(a){var o={keyCategory:a.constants.keyCategory.FIXED_KEY,writeFrequency:a.constants.writeFrequency.LOW,clientStorageAllowed:true};var r=a.getPersonalizer(e,o,t);r.getPersData().then(n).fail(i)})})},_getCurrentLocationHash:function(){return window.location.hash},setUserActionsMenuSelected:function(e){A.emit("showUserActionsMenu",e)},getUserActionsMenuSelected:function(){return _.last("/core/shell/model/currentViewPortState")==="LeftCenter"},setNotificationsSelected:function(e){A.emit("showNotifications",e)},getNotificationsSelected:function(){return _.last("/core/shell/model/currentViewPortState")==="RightCenter"}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Shell.view", ["sap/base/Log","sap/ui/Device","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/core/mvc/XMLView","sap/ui/core/Core","sap/ushell/renderers/fiori2/ShellLayout"],function(e,t,i,n,a,o,l,r,s,h,u,d,g){"use strict";var c=g.LAYOUT_MAPPING;var p={Property:"Property",List:"List"};function f(e,t){return sap.ui.getCore().byId(t.getObject())}sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell"},waitForShellLayout:function(){if(!this._oShellLayoutPromise){this._oShellLayoutPromise=new Promise(function(e){this.getController().addDoable(o.once("ShellLayoutApplied").do(e))}.bind(this))}return this._oShellLayoutPromise},getShellModel:function(){return this.getViewData().shellModel},getHelperModel:function(){return this.getViewData().helperModel},getViewDataConfig:function(){var e=this.getViewData()||{};var t=e.config||{};return t},createContent:function(){this._allowUpToThreeActionInShellHeader();this.initBackgroundImage();this.createShellHeaderSync();this.setNavigationBarMinHeight();var e=this.createRendererRootViewSync();this.initCanvasShapesManager();this.setDisplayBlock(true);r.setPerformanceMark("FLP - Shell.view rendering started!");return e},initBackgroundImage:function(){this.waitForShellLayout().then(function(){var e=document.getElementById(c.BackgroundImage);var t=["<div class='sapUiShellBackgroundImage sapUiGlobalBackgroundImageForce sapUshellShellBG sapContrastPlus'></div>","<div class='sapUshellShellBGsapMShellBG sapUiGlobalBackgroundImage'></div>"].join("\n");e.insertAdjacentHTML("afterbegin",t)})},createRendererRootViewSync:function(){var e=this.getController();var t=sap.ui.xmlfragment("sap.ushell.ui.RendererRootView",e);t.updateAggregation=this.updateShellAggregation;sap.ui.getCore().byId("viewPortContainer");return t},createShellHeaderSync:function(){var e=this.getViewDataConfig();var t=this.getShellModel();var a=s.createModel("/core/shellHeader",h);var o=new n;o.onInit();var r=sap.ui.xmlfragment("sap.ushell.ui.ShellHeader",o);r.updateAggregation=this.updateShellAggregation;i.init(e,o,t);if(e.appState==="embedded"){r.setNoLogo()}r.setModel(a);r.setModel(l.i18nModel,"i18n");this.addDanglingControl(r);this._oShellHeader=r;this.waitForShellLayout().then(function(){r.placeAt(c.ShellHeader,"only")});return r},setNavigationBarMinHeight:function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.isMenuEnabled()}).then(function(e){if(!e){return}this.waitForShellLayout().then(function(){var e=document.getElementById(c.NavigationBar);e.classList.add("sapUshellMenuBarHeight")})}.bind(this)).catch(function(t){e.info("Could not apply min-height of the navigationBar",t)})},createRightFloatingContainer:function(){sap.ui.require(["sap/ushell/ui/shell/RightFloatingContainer"],function(e){var t=new e({id:"right-floating-container",top:"2",hideItemsAfterPresentation:true,visible:"{/currentState/showRightFloatingContainer}",floatingContainerItems:{path:"/currentState/RightFloatingContainerItems",factory:f}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this._oRightFloatingContainer=t;this.waitForShellLayout().then(function(){t.placeAt(c.RightFloatingContainer,"only")})}.bind(this))},initCanvasShapesManager:function(){this.bindFactory({model:this.getShellModel(),factory:this.createCanvasShapesManager.bind(this),bindingPath:"/enableBackGroundShapes",bindingType:p.Property,valueCheck:function(e){return!!e}})},createCanvasShapesManager:function(){var e=setInterval(function(){if(d.isThemeApplied()){clearInterval(e);sap.ui.require(["sap/ushell/CanvasShapesManager"],function(e){e.drawShapes()})}},200)},createSubHeader:function(){sap.ui.require(["sap/ushell/ui/shell/SubHeader"],function(e){var t=new e({id:"subhdr",content:{path:"/currentState/subHeader",factory:f}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(c.SubHeader,"only")})}.bind(this))},createFloatingContainer:function(){return new Promise(function(e,i){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ui/util/Storage"],function(i,n){var o=new i({id:"shell-floatingContainer",visible:"{helper>/shell/floatingContainerVisible}",content:{path:"/currentState/floatingContainerContent",factory:f}});o.updateAggregation=this.updateShellAggregation;if(t.system.desktop){o.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}))}o.setModel(this.getShellModel());o.setModel(this.getHelperModel(),"helper");this.addDanglingControl(o);this.waitForShellLayout().then(function(){o.placeAt(c.FloatingContainer,"only");var t=new n(n.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");var i=document.getElementById(c.FloatingContainer);var a=!i.classList.contains("sapUshellFloatingContainerWrapper");var l=t.get("floatingContainerStyle");if(a&&!l){var r=jQuery(".sapUshellShellHeadItm").position()?jQuery(".sapUshellShellHeadItm").position().left:0;var s=(jQuery(window).width()-jQuery("#shell-floatingContainer").width()-r)*100/jQuery(window).width();var h=jQuery(".sapUshellShellHeader").height()*100/jQuery(window).height();i.style.left=s+"%";i.style.top=h+"%";i.style.position="absolute";t.put("floatingContainerStyle",i.style.cssText)}else if(l){i.style.cssText=l}i.classList.add("sapUshellFloatingContainerWrapper");e()})}.bind(this))}.bind(this))},createSidePane:function(){sap.ui.require(["sap/ushell/ui/shell/SidePane"],function(e){var t=new e({id:"shell-sidePane",visible:"{/currentState/showPane}",content:{path:"/currentState/paneContent",factory:f}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(c.SidePane,"only")})}.bind(this))},createToolArea:function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(e){var t=new e({id:"shell-toolArea",visible:"{/currentState/toolAreaVisible}",toolAreaItems:{path:"/currentState/toolAreaItems",factory:f}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(c.ToolArea,"only")})}.bind(this))},createFloatingActions:function(){sap.ui.require(["sap/ushell/ui/shell/ShellFloatingActions"],function(e){var t=new e({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:f}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(c.FloatingActions,"only")})}.bind(this))},initAllMyAppsView:function(){return sap.ushell.Container.getServiceAsync("AllMyApps").then(function(e){if(e.isEnabled()){return this.createAllMyAppsView()}}.bind(this))},createAllMyAppsView:function(){return u.create({id:"allMyAppsView",viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps"}).then(function(e){e.setModel(this.getShellModel());e.setModel(l.i18nModel,"i18n");e.addCustomData(new a({key:"aria-label",value:l.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.addDanglingControl(e);this.getShellHeader().getAppTitle().setAllMyApps(e)}.bind(this))},createPostCoreExtControls:function(){var e=this.getShellModel();sap.ui.require(["sap/ui/core/Popup"],function(e){e.setInitialZIndex(11)});this.bindFactory({model:e,factory:this.createRightFloatingContainer.bind(this),bindingPath:"/currentState/showRightFloatingContainer",bindingType:p.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSubHeader.bind(this),bindingPath:"/currentState/subHeader",bindingType:p.List,valueCheck:function(e){return!!e.length}});this.bindFactory({model:e,factory:this.createToolArea.bind(this),bindingPath:"/currentState/toolAreaVisible",bindingType:p.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSidePane.bind(this),bindingPath:"/currentState/showPane",bindingType:p.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createFloatingActions.bind(this),bindingPath:"/currentState/floatingActions",bindingType:p.List,valueCheck:function(e){return!!e.length}});this.addPendingInitialization(this.initAllMyAppsView())},_allowUpToThreeActionInShellHeader:function(){var e=this.getViewDataConfig();if(Object.keys(e).length>3){var t=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"];var i=0;var n;for(var a=0;a<5;a++){n=t[a];if(i===3){e[n]=false}else if(e[n]){i++}}}},getShellHeader:function(){return this._oShellHeader},getRightFloatingContainer:function(){return this._oRightFloatingContainer},updateShellAggregation:function(e){var t=this.mBindingInfos[e];var i=this.getMetadata().getJSONKeys()[e];var n;this[i._sGetter]().forEach(function(e){this[i._sRemoveMutator](e)}.bind(this));t.binding.getContexts().forEach(function(e,a){n=t.factory(this.getId()+"-"+a,e)?t.factory(this.getId()+"-"+a,e).setBindingContext(e,t.model):"";this[i._sMutator](n)}.bind(this))},bindFactory:function(e){var t=e.model;var i=e.factory;var n=e.bindingPath;var a=e.bindingType;var o=e.valueCheck;var l=t.getProperty(n);if(o(l)){i()}else{var r;switch(a){case p.List:r=t.bindList(n);break;default:r=t.bindProperty(n)}this.addDanglingBinding(r);r.attachChange(function(){l=r.getModel().getProperty(r.getPath());if(o(l)){this.removeDanglingBinding(r);r.destroy();i()}},this)}},addDanglingBinding:function(e){this.getController().addDanglingBinding(e)},removeDanglingBinding:function(e){this.getController().removeDanglingBinding(e)},addDanglingControl:function(e){this.getController().addDanglingControl(e)},addPendingInitialization:function(e){return this.getController().addPendingInitialization(e)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/ShellAsync.view", ["sap/base/Log","sap/ui/Device","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/core/mvc/View","sap/ui/core/mvc/XMLView","sap/ui/core/Fragment","sap/ui/core/Core","sap/ushell/renderers/fiori2/ShellLayout"],function(e,t,n,i,a,o,l,r,s,h,d,u,g,c,p){"use strict";var f=p.LAYOUT_MAPPING;function y(e,t){return sap.ui.getCore().byId(t.getObject())}var S={Property:"Property",List:"List"};return d.extend("sap.ushell.renderers.fiori2.ShellAsync",{getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell"},waitForShellLayout:function(){if(!this._oShellLayoutPromise){this._oShellLayoutPromise=new Promise(function(e){this.getController().addDoable(o.once("ShellLayoutApplied").do(e))}.bind(this))}return this._oShellLayoutPromise},getShellModel:function(){return this.getViewData().shellModel},getHelperModel:function(){return this.getViewData().helperModel},getViewDataConfig:function(){var e=this.getViewData()||{};var t=e.config||{};return t},createContent:function(){this._allowUpToThreeActionInShellHeader();this.initBackgroundImage();var e=this.createShellHeader();this.setNavigationBarMinHeight();var t=this.createRendererRootView();this.setDisplayBlock(true);r.setPerformanceMark("FLP - Shell.view rendering started!");return Promise.all([t,e]).then(function(e){var t=e[0];this.initCanvasShapesManager();return t}.bind(this))},initBackgroundImage:function(){this.waitForShellLayout().then(function(){var e=document.getElementById(f.BackgroundImage);var t=["<div class='sapUiShellBackgroundImage sapUiGlobalBackgroundImageForce sapUshellShellBG sapContrastPlus'></div>","<div class='sapUshellShellBGsapMShellBG sapUiGlobalBackgroundImage'></div>"].join("\n");e.insertAdjacentHTML("afterbegin",t)})},createRendererRootView:function(){var e=this.getController();return g.load({name:"sap.ushell.ui.RendererRootView",controller:e}).then(function(e){e.updateAggregation=this.updateShellAggregation;sap.ui.getCore().byId("viewPortContainer");return e}.bind(this))},createShellHeader:function(){var e=this.getViewDataConfig();var t=this.getShellModel();var a=s.createModel("/core/shellHeader",h);var o=new i;o.onInit();return g.load({name:"sap.ushell.ui.ShellHeader",controller:o}).then(function(i){i.updateAggregation=this.updateShellAggregation;n.init(e,o,t);if(e.appState==="embedded"){i.setNoLogo()}i.setModel(a);i.setModel(l.i18nModel,"i18n");this.addDanglingControl(i);this._oShellHeader=i;this.waitForShellLayout().then(function(){i.placeAt(f.ShellHeader,"only")})}.bind(this))},setNavigationBarMinHeight:function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.isMenuEnabled()}).then(function(e){if(!e){return}this.waitForShellLayout().then(function(){var e=document.getElementById(f.NavigationBar);e.classList.add("sapUshellMenuBarHeight")})}.bind(this)).catch(function(t){e.info("Could not apply min-height of the navigationBar",t)})},createRightFloatingContainer:function(){this.addPendingInitialization(new Promise(function(e){sap.ui.require(["sap/ushell/ui/shell/RightFloatingContainer"],function(t){var n=new t({id:"right-floating-container",top:"2",hideItemsAfterPresentation:true,visible:"{/currentState/showRightFloatingContainer}",floatingContainerItems:{path:"/currentState/RightFloatingContainerItems",factory:y}});n.updateAggregation=this.updateShellAggregation;n.setModel(this.getShellModel());this.addDanglingControl(n);this._oRightFloatingContainer=n;e();this.waitForShellLayout().then(function(){n.placeAt(f.RightFloatingContainer,"only")})}.bind(this))}.bind(this)))},initCanvasShapesManager:function(){this.bindFactory({model:this.getShellModel(),factory:this.createCanvasShapesManager.bind(this),bindingPath:"/enableBackGroundShapes",bindingType:S.Property,valueCheck:function(e){return!!e}})},createCanvasShapesManager:function(){var e=setInterval(function(){if(c.isThemeApplied()){clearInterval(e);sap.ui.require(["sap/ushell/CanvasShapesManager"],function(e){e.drawShapes()})}},200)},createSubHeader:function(){sap.ui.require(["sap/ushell/ui/shell/SubHeader"],function(e){var t=new e({id:"subhdr",content:{path:"/currentState/subHeader",factory:y}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(f.SubHeader,"only")})}.bind(this))},createFloatingContainer:function(){return new Promise(function(e,n){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ui/util/Storage"],function(n,i){var o=new n({id:"shell-floatingContainer",visible:"{helper>/shell/floatingContainerVisible}",content:{path:"/currentState/floatingContainerContent",factory:y}});o.updateAggregation=this.updateShellAggregation;if(t.system.desktop){o.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}))}o.setModel(this.getShellModel());o.setModel(this.getHelperModel(),"helper");this.addDanglingControl(o);this.waitForShellLayout().then(function(){o.placeAt(f.FloatingContainer,"only");var t=new i(i.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");var n=document.getElementById(f.FloatingContainer);var a=!n.classList.contains("sapUshellFloatingContainerWrapper");var l=t.get("floatingContainerStyle");if(a&&!l){var r=jQuery(".sapUshellShellHeadItm").position()?jQuery(".sapUshellShellHeadItm").position().left:0;var s=(jQuery(window).width()-jQuery("#shell-floatingContainer").width()-r)*100/jQuery(window).width();var h=jQuery(".sapUshellShellHeader").height()*100/jQuery(window).height();n.style.left=s+"%";n.style.top=h+"%";n.style.position="absolute";t.put("floatingContainerStyle",n.style.cssText)}else if(l){n.style.cssText=l}n.classList.add("sapUshellFloatingContainerWrapper");e()})}.bind(this))}.bind(this))},createSidePane:function(){sap.ui.require(["sap/ushell/ui/shell/SidePane"],function(e){var t=new e({id:"shell-sidePane",visible:"{/currentState/showPane}",content:{path:"/currentState/paneContent",factory:y}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(f.SidePane,"only")})}.bind(this))},createToolArea:function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(e){var t=new e({id:"shell-toolArea",visible:"{/currentState/toolAreaVisible}",toolAreaItems:{path:"/currentState/toolAreaItems",factory:y}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(f.ToolArea,"only")})}.bind(this))},createFloatingActions:function(){sap.ui.require(["sap/ushell/ui/shell/ShellFloatingActions"],function(e){var t=new e({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:y}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(f.FloatingActions,"only")})}.bind(this))},initAllMyAppsView:function(){return sap.ushell.Container.getServiceAsync("AllMyApps").then(function(e){if(e.isEnabled()){return this.createAllMyAppsView()}}.bind(this))},createAllMyAppsView:function(){return u.create({id:"allMyAppsView",viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps"}).then(function(e){e.setModel(this.getShellModel());e.setModel(l.i18nModel,"i18n");e.addCustomData(new a({key:"aria-label",value:l.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.addDanglingControl(e);this.getShellHeader().getAppTitle().setAllMyApps(e)}.bind(this))},createPostCoreExtControls:function(){var e=this.getShellModel();sap.ui.require(["sap/ui/core/Popup"],function(e){e.setInitialZIndex(11)});this.bindFactory({model:e,factory:this.createRightFloatingContainer.bind(this),bindingPath:"/currentState/showRightFloatingContainer",bindingType:S.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSubHeader.bind(this),bindingPath:"/currentState/subHeader",bindingType:S.List,valueCheck:function(e){return!!e.length}});this.bindFactory({model:e,factory:this.createToolArea.bind(this),bindingPath:"/currentState/toolAreaVisible",bindingType:S.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSidePane.bind(this),bindingPath:"/currentState/showPane",bindingType:S.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createFloatingActions.bind(this),bindingPath:"/currentState/floatingActions",bindingType:S.List,valueCheck:function(e){return!!e.length}});this.addPendingInitialization(this.initAllMyAppsView())},_allowUpToThreeActionInShellHeader:function(){var e=this.getViewDataConfig();if(Object.keys(e).length>3){var t=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"];var n=0;var i;for(var a=0;a<5;a++){i=t[a];if(n===3){e[i]=false}else if(e[i]){n++}}}},getShellHeader:function(){return this._oShellHeader},getRightFloatingContainer:function(){return this._oRightFloatingContainer},updateShellAggregation:function(e){var t=this.mBindingInfos[e];var n=this.getMetadata().getJSONKeys()[e];var i;this[n._sGetter]().forEach(function(e){this[n._sRemoveMutator](e)}.bind(this));t.binding.getContexts().forEach(function(e,a){i=t.factory(this.getId()+"-"+a,e)?t.factory(this.getId()+"-"+a,e).setBindingContext(e,t.model):"";this[n._sMutator](i)}.bind(this))},bindFactory:function(e){var t=e.model;var n=e.factory;var i=e.bindingPath;var a=e.bindingType;var o=e.valueCheck;var l=t.getProperty(i);if(o(l)){n()}else{var r;switch(a){case S.List:r=t.bindList(i);break;default:r=t.bindProperty(i)}this.addDanglingBinding(r);r.attachChange(function(){l=r.getModel().getProperty(r.getPath());if(o(l)){this.removeDanglingBinding(r);r.destroy();n()}},this)}},addDanglingBinding:function(e){this.getController().addDanglingBinding(e)},removeDanglingBinding:function(e){this.getController().removeDanglingBinding(e)},addDanglingControl:function(e){this.getController().addDanglingControl(e)},addPendingInitialization:function(e){return this.getController().addPendingInitialization(e)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/ShellLayout", ["sap/base/Log"],function(e){"use strict";var a={RootDomRef:"shellLayout",ShellHeader:"header-shellArea",RendererRootView:"canvas",SidePane:"sidePane-shellArea",Footer:"footer-shellArea",ToolArea:"toolArea-shellArea",SubHeader:"subHeader-shellArea",NavigationBar:"navigationBar-shellArea",FloatingActions:"floatingActions-shellArea",FloatingContainer:"floatingContainer-shellArea",FloatingContainerDockStart:"floatingContainerDockStart-shellArea",FloatingContainerDockEnd:"floatingContainerDockEnd-shellArea",ShellShapes:"shapes-shellArea",RightFloatingContainer:"rightFloatingContainer-shellArea",BackgroundImage:"backgroundImage-shellArea",HelpContent:"helpContent-shellArea"};function t(t){var o=document.getElementById(t);a.RendererRootView=t;var l=["<div id='shellLayout' class='sapUshellFlexRow'>","    <div id='backgroundImage-shellArea' data-sap-ui-root-content=true></div>","    <div id='shapes-shellArea' data-sap-ui-root-content=true></div>","    <div id='sapUshellPopupWithinArea' class='sapUshellFlexGrowShrink sapUshellFlexRow'>","        <div id='floatingContainerDockStart-shellArea' class='sapUshellFloatingContainerDock' data-sap-ui-root-content=true></div>","        <div class='sapUshellFlexGrowShrink sapUshellFlexColumn'>","            <div id='header-shellArea' data-sap-ui-root-content=true></div>","            <div id='subHeader-shellArea' data-sap-ui-root-content=true></div>","            <div class='sapUshellFlexGrowShrink sapUshellFlexRow'>","                <aside id='toolArea-shellArea' class='sapUshellPositionRelative' data-sap-ui-root-content=true></aside>","                <div id='sidePane-shellArea' data-sap-ui-root-content=true></div>","                <div class='sapUshellFlexGrowShrink sapUshellFlexColumn'>","                    <div id='navigationBar-shellArea' data-sap-ui-root-content=true></div>","                    <div class='sapUshellFlexGrowShrink sapUshellPositionRelative sapUshellOverflowHidden sapUshellFlexColumn'>","                        <div id='"+a.RendererRootView+"' class='sapUshellFlexGrowShrink sapUshellPositionRelative sapUshellShell' data-sap-ui-root-content=true></div>","                        <div id='floatingActions-shellArea' data-sap-ui-root-content=true></div>","                        <div id='rightFloatingContainer-shellArea' data-sap-ui-root-content=true></div>","                    </div>","                </div>","            </div>","            <footer id='footer-shellArea' class='sapUshellPositionStatic sapMPageFooter' data-sap-ui-root-content=true></footer>","        </div>","        <div id='floatingContainerDockEnd-shellArea' class='sapUshellFloatingContainerDock' data-sap-ui-root-content=true></div>","        <div id='floatingContainer-shellArea' data-sap-ui-root-content=true></div>","    </div>","    <div id='helpContent-shellArea' data-sap-ui-root-content=true></div>","</div>"].join("\n");var i=Object.keys(a).some(function(e){if(e==="RendererRootView"){return false}var t=a[e];return!!document.getElementById(t)});if(i){e.warning("Found a ShellArea element. Did not apply the layout","sap.ushell.renderers.fiori2.ShellLayout");return}document.body.insertAdjacentHTML("afterbegin","<div id='tmp'>"+l+"</div>");var n=document.getElementById("tmp");o.replaceWith.apply(o,Array.from(n.childNodes));n.remove()}function o(){var e=document.getElementById(a.RootDomRef);if(e){document.getElementById(a.RootDomRef).remove()}}return{applyLayout:t,destroyLayout:o,LAYOUT_MAPPING:a}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/allMyApps/AllMyApps.controller", ["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/renderers/fiori2/allMyApps/AllMyAppsManager","sap/ushell/Config","sap/ui/Device","sap/ui/performance/Measurement","sap/ui/model/json/JSONModel","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/library","sap/m/StandardListItem","sap/ushell/renderers/fiori2/allMyApps/AllMyAppsKeyboardHandler"],function(e,t,s,l,a,i,n,r,o,p,d,u,h){"use strict";var g=d.ListType;var A=false;var M=e.AllMyAppsState;var c=e.AllMyAppsProviderType;var y=e.AppTitleState;return t.extend("sap.ushell.renderers.fiori2.allMyApps.AllMyApps",{iNumberOfProviders:0,onInit:function(){this.bFirstLoadOfAllMyApps=true;var e=new n,t=this.getView(),s=sap.ui.getCore().getEventBus();e.setSizeLimit(1e4);e.setProperty("/AppsData",[]);e.setProperty("/catalogEnabled",l.last("/core/catalog/enabled"));t.setModel(r.getTranslationModel(),"i18n");t.setModel(e,"allMyAppsModel");s.subscribe("launchpad","allMyAppsFirstCatalogLoaded",this.updateMasterFocusAndDetailsContext,this);s.subscribe("launchpad","allMyAppsFirstCatalogLoaded",this.onDetailLoad,this);s.subscribe("launchpad","allMyAppsMasterLoaded",this.onMasterLoad,this);s.subscribe("launchpad","allMyAppsNoCatalogsLoaded",this.onNoCatalogsLoaded,this)},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","allMyAppsFirstCatalogLoaded",this.updateMasterFocusAndDetailsContext);e.unsubscribe("launchpad","allMyAppsFirstCatalogLoaded",this.onDetailLoad,this);e.unsubscribe("launchpad","allMyAppsMasterLoaded",this.onMasterLoad,this);e.unsubscribe("launchpad","allMyAppsNoCatalogsLoaded",this.onNoCatalogsLoaded,this)},onAfterRendering:function(){return new Promise(function(e,t){var s=this,l=this.getView(),i=l.getModel("allMyAppsModel"),n=this._getSplitApp(),r=l.byId("sapUshellAllMyAppsMasterPage"),o=l.byId("sapUshellAllMyAppsDetailsPage");if(!this.bAfterInitialLoading){if(r){r.setBusy(true)}if(o){o.setBusy(true)}n.toMaster(this.createId("sapUshellAllMyAppsMasterPage"),"show");if(!a.system.phone){n.toDetail("sapUshellAllMyAppsDetailsPage","show")}}if(this.bFirstLoadOfAllMyApps){i.setProperty("/AppsData",[])}else{var p=i.getProperty("/AppsData");i.setProperty("/AppsData",p)}setTimeout(function(){s._getAllMyAppsManager().loadAppsData(i,s._getPopoverObject(),s.bFirstLoadOfAllMyApps);s._isSingleDataSource().then(function(t){A=t;s.switchToInitialState();s.bFirstLoadOfAllMyApps=false;e()})},0)}.bind(this))},switchToInitialState:function(){var e=this._getDataSourceList();return this._isSingleDataSource().then(function(t){if(t){l.emit("/core/shell/model/allMyAppsMasterLevel",M.FirstLevelSpread);e.bindItems("allMyAppsModel>/AppsData/0/groups",this._getMasterListItemTemplate)}else{l.emit("/core/shell/model/allMyAppsMasterLevel",M.FirstLevel);e.bindItems("allMyAppsModel>/AppsData",this._getMasterListItemTemplate())}if(a.system.phone){this._getSplitApp().toMaster(this.createId("sapUshellAllMyAppsMasterPage"),"show")}e.rerender();this.updateMasterFocusAndDetailsContext(undefined,undefined,{bFirstCatalogLoadedEvent:true});this._getPopoverHeaderLabel().setText(r.i18n.getText("allMyApps_headerTitle"));this.updateHeaderButtonsState()}.bind(this))},handleSwitchToMasterAreaOnPhone:function(){var e=this._getDataSourcesSelectedPath(),t=e.split("/");this._getSplitApp().toMaster(this.createId("sapUshellAllMyAppsMasterPage"),"show");return this._isSingleDataSource().then(function(e){if(e){l.emit("/core/shell/model/allMyAppsMasterLevel",M.FirstLevelSpread)}else if(t.length===3){l.emit("/core/shell/model/allMyAppsMasterLevel",M.FirstLevel)}else{l.emit("/core/shell/model/allMyAppsMasterLevel",M.SecondLevel)}this.updateHeaderButtonsState()}.bind(this))},handleMasterListItemPress:function(e){this.lastPressedMasterItem=e.getParameter("listItem");var t=this._getClickedDataSourceItemPath(this.lastPressedMasterItem);var s=this.getView();var a=s.getModel("allMyAppsModel");var i=a.getProperty(t+"/type");var n=l.last("/core/shell/model/allMyAppsMasterLevel");var r=this._getCustomPanel();var o=this._getCustomPanelLabel();var p=this._getCustomPanelLink();var d=i===c.CATALOG;var u;if(d||n===M.FirstLevelSpread||n===M.SecondLevel){u=this.handleMasterListItemPressToDetails(t)}else{u=this.handleMasterListItemPressToSecondLevel(t)}r.setBindingContext(u,"allMyAppsModel");o.setBindingContext(u,"allMyAppsModel");if(p&&p.getVisible&&p.getVisible()){p.setBindingContext(u,"allMyAppsModel")}},handleMasterListItemPressToSecondLevel:function(e){var t=this.getView();var s=t.getModel("allMyAppsModel");var i=s.getProperty(e+"/type");var n=s.getProperty(e+"/title");var o=this._getSplitApp();var p=this._getDataSourceList();var d;var u;if(!a.system.phone){o.toDetail(this.createId("sapUshellAllMyAppsDetailsPage"))}p.bindItems("allMyAppsModel>"+e+"/groups",this._getMasterListItemTemplate());l.emit("/core/shell/model/allMyAppsMasterLevel",M.SecondLevel);d=this._setBindingContext(e+"/groups/0",t.byId("oItemsContainerlist"));p.rerender();p.setSelectedItem(p.getItems()[0]);u=p.getSelectedItem();if(u){u.focus()}if(i===c.HOME){this._getPopoverHeaderLabel().setText(r.i18n.getText("allMyApps_homeEntryTitle"))}else if(i===c.EXTERNAL){this._getPopoverHeaderLabel().setText(n)}this._getDetailsHeaderLabel().setText(s.getProperty(e+"/groups/0/title"));this.updateHeaderButtonsState();return d},handleMasterListItemPressToDetails:function(e){var t=this.getView(),s=t.getModel("allMyAppsModel"),i=this._setBindingContext(e,t.byId("oItemsContainerlist"));this._getDetailsHeaderLabel().setText(s.getProperty(e+"/title"));if(a.system.phone){this._getSplitApp().toDetail(this.createId("sapUshellAllMyAppsDetailsPage"));l.emit("/core/shell/model/allMyAppsMasterLevel",M.Details)}this.updateHeaderButtonsState();return i},onMasterLoad:function(){var e=this.getView(),t=this._getPopoverHeaderBackButton();this.bAfterInitialLoading=true;e.byId("sapUshellAllMyAppsMasterPage").setBusy(false);t.focus();this._isSingleDataSource().then(function(e){A=e;this.updateMasterFocusAndDetailsContext(undefined,undefined,{bFirstCatalogLoadedEvent:false})}.bind(this))},onDetailLoad:function(){var e=this.getView(),t=e.byId("sapUshellAllMyAppsDetailsPage");t.setBusy(false);this.bAfterInitialLoading=true;if(!a.system.phone){this._getSplitApp().toDetail(this.createId("sapUshellAllMyAppsDetailsPage"),"show")}},onNoCatalogsLoaded:function(){var e=this.getView(),t=e.byId("sapUshellAllMyAppsDetailsPage");t.setBusy(false);this.bAfterInitialLoading=true;if(!a.system.phone&&!A){this._getSplitApp().toDetail(this.createId("sapUshellAllMyAppsEmptyDetailsPage"),"show")}else if(!a.system.phone&&A){this._getSplitApp().toDetail(this.createId("sapUshellAllMyAppsDetailsPage"))}},updateMasterFocusAndDetailsContext:function(e,t,s){var l=this.getView(),a=l.getModel("allMyAppsModel"),n=this._getInitialFirstLevelSelectionIndex(),r=this._getDataSourceList(),o=this._getCustomPanelLabel(),p=this._getCustomPanelLink(),d,u,h;if(A===true){d=a.createBindingContext("/AppsData/0/groups/0");u=a.getProperty(d.getPath())}else{d=a.createBindingContext("/AppsData/"+n);u=a.getProperty(d.getPath())}l.byId("oItemsContainerlist").setBindingContext(d,"allMyAppsModel");o.setBindingContext(d,"allMyAppsModel");l.byId("sapUshellAllMyAppsCustomPanel").setBindingContext(d,"allMyAppsModel");if(p.getVisible()){p.setBindingContext(d,"allMyAppsModel")}if(u!==undefined){this._getDetailsHeaderLabel().setText(u.title)}if(s.bFirstCatalogLoadedEvent===true){r.rerender()}if(s.bFirstCatalogLoadedEvent===false&&n===0){this.onNoCatalogsLoaded()}r.setSelectedItem(r.getItems()[n]);h=r.getSelectedItem();if(h){setTimeout(function(){h.focus()},0)}if(s.bFirstCatalogLoadedEvent){i.end("FLP:ShellAppTitle.onClick");i.end("FLP:ShellNavMenu.footerClick")}},handleCustomPanelLinkPress:function(e){var t=this.getView(),s=t.byId("sapUshellAllMyAppsCustomPanelLink"),l=s.getVisible()?s.getBindingContext("allMyAppsModel").getObject():{};if(l.handlePress){l.handlePress(e.getSource(),l)}},updateHeaderButtonsState:function(){this._getShellAppTitleToggleListButton().setVisible(this.getToggleListButtonVisible());this._getPopoverHeaderBackButton().setVisible(this.getBackButtonVisible())},getToggleListButtonVisible:function(){var e=this.getCurrentState(),t=a.media.getCurrentRange(a.media.RANGESETS.SAP_STANDARD).name==="Phone",s=(t||a.system.phone)&&e===M.Details;return s},getBackButtonVisible:function(){var e=l.last("/core/shellHeader/ShellAppTitleState");if(e!==y.AllMyAppsOnly){return true}var t=this.getCurrentState();return t===M.SecondLevel||t===M.Details},onAppItemClick:function(e){var t=this.getView().getModel("allMyAppsModel"),s=e.getSource().getBindingContext("allMyAppsModel").getPath(),l=t.getProperty(s+"/url");if(l){if(l[0]==="#"){hasher.setHash(l);setTimeout(function(){this.getView().getParent().close()}.bind(this),50)}else{o.openURL(l,"_blank")}}},getCurrentState:function(){return l.last("/core/shell/model/allMyAppsMasterLevel")},_isSingleDataSource:function(){return sap.ushell.Container.getServiceAsync("AllMyApps").then(function(e){if(e.isCatalogAppsEnabled()){return false}if(!e.isExternalProviderAppsEnabled()&&e.isHomePageAppsEnabled()){return true}return e.isExternalProviderAppsEnabled()&&Object.keys(e.getDataProviders()).length===1&&!e.isHomePageAppsEnabled()})},_getInitialFirstLevelSelectionIndex:function(){var e=this.getView(),t=e.getModel("allMyAppsModel"),s=t.getProperty("/AppsData"),l,a;for(l=0;l<s.length;l++){a=s[l];if(a.type===c.CATALOG){return l}}return 0},_getPopoverHeaderBackButton:function(){if(!this._oPopoverHeaderBackButton){this._oPopoverHeaderBackButton=this._getPopoverHeaderContent(0)}return this._oPopoverHeaderBackButton},_getShellAppTitleToggleListButton:function(){if(!this._oShellAppTitleToggleListButton){this._oShellAppTitleToggleListButton=this._getPopoverHeaderContent(1)}return this._oShellAppTitleToggleListButton},_getPopoverHeaderContent:function(e){var t,s,l;t=this._getPopoverObject().getCustomHeader();s=t.getContentLeft();l=s[e];return l},_getPopoverHeaderLabel:function(){var e,t;e=this._getPopoverObject().getCustomHeader();t=e.getContentMiddle();return t[0]},_getPopoverObject:function(){return this.getView().getParent()},_getDetailsHeaderLabel:function(){return this.getView().byId("sapUshellAllMyAppsDetailsHeaderLabel")},_setBindingContext:function(e,t){var s=this.getView().getModel("allMyAppsModel"),l=s.createBindingContext(e);t.setBindingContext(l,"allMyAppsModel");return l},_getClickedDataSourceItemPath:function(e){return e.getBindingContext("allMyAppsModel").getPath()},_getAllMyAppsManager:function(){return s},_getDataSourcesSelectedPath:function(){return this.lastPressedMasterItem.getBindingContextPath()},getControllerName:function(){return"sap.ushell.renderers.fiori2.allMyApps.AllMyApps"},formatListItemType:function(e,t){var s=a.system.phone||t===M.FirstLevel&&e!==c.CATALOG;return s?g.Navigation:g.Active},_afterOpen:function(){if(!this.bAfterOpenHandlerCalled){this.bAfterOpenHandlerCalled=true;if(a.system.desktop){h.init(this.getView())}}},_getMasterListItemTemplate:function(){if(!this.oTemplate){this.oTemplate=new u({type:{parts:["allMyAppsModel>type","/allMyAppsMasterLevel"],formatter:this.formatListItemType},title:"{allMyAppsModel>title}",wrapping:true})}return this.oTemplate},_getSplitApp:function(){return this.getView().byId("sapUshellAllMyAppsMasterDetail")},_getDataSourceList:function(){return this.getView().byId("sapUshellAllMyAppsDataSourcesList")},_getCustomPanel:function(){return this.getView().byId("sapUshellAllMyAppsCustomPanel")},_getCustomPanelLabel:function(){return this.getView().byId("sapUshellAllMyAppsCustomPanelLabel")},_getCustomPanelLink:function(){return this.getView().byId("sapUshellAllMyAppsCustomPanelLink")}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/allMyApps/AllMyAppsKeyboardHandler", ["sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery"],function(e,jQuery){"use strict";var t=function(){};t.prototype.init=function(e){e.byId("sapUshellAllMyAppsDataSourcesList").addEventDelegate({onsaptabnext:function(t){var a=jQuery(".sapUshellAllMyAppsListItem");this.jqDetailAreaElement=e.byId("oItemsContainerlist").$();this.jqDetailAreaElement.on("keydown.keyboardNavigation",this.keydownHandler.bind(this));this._setItemFocus(t,a[0])}.bind(this)});e.byId("oItemsContainerlist").addEventDelegate({onsaptabprevious:function(){var e=jQuery('.sapUshellAllMyAppsListItem[tabindex="0"]')[0];jQuery(e).attr("tabindex",-1)},onsaptabnext:function(){var e=jQuery(".sapUshellAllMyAppsCustomPanel"),t=jQuery('.sapUshellAllMyAppsListItem[tabindex="0"]')[0];if(e.length===0){jQuery(t).attr("tabindex",-1)}}});e.byId("sapUshellAllMyAppsCustomPanel").addEventDelegate({onsaptabnext:function(e){var t=jQuery('.sapUshellAllMyAppsListItem[tabindex="0"]')[0];jQuery(t).attr("tabindex",-1)}})};t.prototype.keydownHandler=function(t){switch(t.keyCode){case e.ARROW_UP:this.arrowKeyHandler(t,-2);break;case e.ARROW_DOWN:this.arrowKeyHandler(t,2);break;case e.ARROW_LEFT:this.arrowKeyHandler(t,-1);break;case e.ARROW_RIGHT:this.arrowKeyHandler(t,1);break;default:break}};t.prototype.arrowKeyHandler=function(e,t){var a=jQuery(".sapUshellAllMyAppsListItem").toArray(),s=jQuery('.sapUshellAllMyAppsListItem[tabindex="0"]')[0],n=a.indexOf(s),i=a[n+t];if(i){jQuery(s).attr("tabindex",-1);this._setItemFocus(e,i)}};t.prototype._setItemFocus=function(e,t){if(t){e.preventDefault();e.stopImmediatePropagation();jQuery(t).attr("tabindex",0);t.focus()}};t.prototype.destroy=function(){if(this.jqDetailAreaElement){this.jqDetailAreaElement.off(".keyboardNavigation")}delete this.jqDetailAreaElement};return new t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/allMyApps/AllMyAppsManager", ["sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/library"],function(jQuery,t,e){"use strict";var i=e.AllMyAppsProviderType;var a=function(){};a.prototype.loadAppsData=function(t,e,i){return sap.ushell.Container.getServiceAsync("AllMyApps").then(function(a){this.oPopover=e;if(!a.isEnabled()){return}this.iNumberOfProviders=0;this.oModel=t;if(a.isHomePageAppsEnabled()){this._handleGroupsData()}if(a.isExternalProviderAppsEnabled()){this._handleExternalProvidersData(t)}if(a.isCatalogAppsEnabled()){this._handleCatalogs(i)}if(!a.isCatalogAppsEnabled()||a.isCatalogAppsEnabled()&&i){var r=sap.ui.getCore().getEventBus();r.publish("launchpad","allMyAppsMasterLoaded")}}.bind(this))};a.prototype._handleGroupsData=function(){var e=this._getGroupsData();var a={title:t.i18n.getText("allMyApps_homeEntryTitle")};var r;return new Promise(function(t,i){e.done(t).fail(i)}).then(function(t){a.groups=t;a.type=i.HOME;if(t.length===0){return}r=this.oModel.getProperty("/AppsData");if(r){var e=this._getIndexByType(r,a.type);if(e!==undefined){r[e]=a}else{r.unshift(a)}}this.oModel.setProperty("/AppsData",r);this.iNumberOfProviders+=1}.bind(this))};a.prototype._getIndexByType=function(t,e){if(t.length<=0){return 0}for(var i=0;i<t.length;i++){if(t[i].type===e){return i}}};a.prototype._getGroupsData=function(){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("LaunchPage").then(function(t){return Promise.all([t.getDefaultGroup(),t.getGroups()])}).then(function(t){this.oDefaultGroup=t[0];var e=t[1];var i=[];e.forEach(function(t){i.push(this._getFormattedGroup(t))}.bind(this));return Promise.all(i)}.bind(this)).then(function(e){var i=e.filter(function(t){return t&&(t.apps.length>0||t.numberCustomTiles>0)});t.resolve(i)});return t.promise()};a.prototype._getFormattedGroup=function(e){var i;var a;var r;return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(s){if(s.isGroupVisible(e)===false){return}if(s.getGroupId(e)===s.getGroupId(this.oDefaultGroup)){a=t.i18n.getText("my_group")}else{a=s.getGroupTitle(e)}i={};i.title=a;i.apps=[];r=s.getGroupTiles(e);return this._getFormattedGroupApps(r)}.bind(this)).then(function(e){if(!e){return}i.apps=e.aFormattedApps;i.numberCustomTiles=e.iNumberOfCustomTiles;if(e.iNumberOfCustomTiles===1){i.sCustomLabel=t.i18n.getText("allMyApps_customStringSingle");i.sCustomLink=t.i18n.getText("allMyApps_customLinkHomePageSingle")}else{i.sCustomLabel=t.i18n.getText("allMyApps_customString",[e.iNumberOfCustomTiles]);i.sCustomLink=t.i18n.getText("allMyApps_customLinkHomePage")}i.handlePress=this._onHandleGroupPress;return i}.bind(this))};a.prototype._getFormattedGroupApps=function(t){var e=[];var i=0;return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(a){var r=[];t.forEach(function(t){if(a.isTileIntentSupported(t)){var s=this._getAppEntityFromTile(t).then(function(t){if(t){e.push(t)}else{i++}});r.push(s)}}.bind(this));return Promise.all(r)}.bind(this)).then(function(){return{iNumberOfCustomTiles:i,aFormattedApps:e}})};a.prototype._onHandleGroupPress=function(t,e){window.hasher.setHash("#Shell-home");this.oPopover.close();var i=sap.ui.getCore().getEventBus();i.subscribe("launchpad","dashboardModelContentLoaded",function(){i.publish("launchpad","scrollToGroupByName",{groupName:e.title,isInEditTitle:false})},this);i.publish("launchpad","scrollToGroupByName",{groupName:e.title,isInEditTitle:false})};a.prototype._handleExternalProvidersData=function(){var t=this;return sap.ushell.Container.getServiceAsync("AllMyApps").then(function(e){var a=e.getDataProviders();var r=Object.keys(a);var s;var o;var n;var l;var p;var u;if(r.length>0){for(p=0;p<r.length;p++){s=r[p];o=a[s];n=o.getTitle();l={};l.title=n;u=o.getData();u.done(function(e){if(e&&e.length>0){this.groups=e;this.type=i.EXTERNAL;t.oModel.setProperty("/AppsData/"+t.iNumberOfProviders,this);t.iNumberOfProviders+=1;var a=sap.ui.getCore().getEventBus();a.publish("launchpad","allMyAppsMasterLoaded")}}.bind(l))}}})};a.prototype._handleNotFirstCatalogsLoad=function(){var t=this.oModel.getProperty("/AppsData");var e=i.CATALOG;if(t.length&&t[t.length-1].type===e){this.bFirstCatalogLoaded=true;sap.ui.getCore().getEventBus().publish("launchpad","allMyAppsFirstCatalogLoaded",{bFirstCatalogLoadedEvent:true})}};a.prototype._handleCatalogs=function(e){if(!e){this._handleNotFirstCatalogsLoad();return Promise.resolve()}this.bFirstCatalogLoaded=false;this.aPromises=[];return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){e.getCatalogs().done(function(){jQuery.when.apply(jQuery,this.aPromises).then(this._onDoneLoadingCatalogs.bind(this))}.bind(this)).fail(function(){this._onGetCatalogsFail(t.i18n.getText("fail_to_load_catalog_msg"))}.bind(this)).progress(this._addCatalogToModel.bind(this))}.bind(this))};a.prototype._addCatalogToModel=function(e){var a;var r={apps:[],numberCustomTiles:0,type:null};var s;var o=[sap.ushell.Container.getServiceAsync("LaunchPage")];if(this._oAddCatalogToModelPromise){o.push(this._oAddCatalogToModelPromise)}this._oAddCatalogToModelPromise=Promise.all(o).then(function(t){a=t[0];r.type=i.CATALOG;var s=a.getCatalogTiles(e);this.aPromises.push(s);return s}.bind(this)).then(function(t){var o;if(t.length===0){return}var n=a.getCatalogTitle(e);o=this.oModel.getProperty("/AppsData");for(s=0;s<o.length;s++){if(o[s].type===i.CATALOG&&o[s].title===n){r=o[s];break}}r.title=a.getCatalogTitle(e);return this._getFormattedGroupApps(t)}.bind(this)).then(function(e){if(!e){return}Array.prototype.push.apply(r.apps,e.aFormattedApps);r.numberCustomTiles=e.iNumberOfCustomTiles;if(r.numberCustomTiles===1){r.sCustomLabel=t.i18n.getText("allMyApps_customStringSingle");r.sCustomLink=t.i18n.getText("allMyApps_customLinkAppFinderSingle")}else{r.sCustomLabel=t.i18n.getText("allMyApps_customString",[r.numberCustomTiles]);r.sCustomLink=t.i18n.getText("allMyApps_customLinkAppFinder")}r.handlePress=function(t,e){this.oPopover.close();window.hasher.setHash("#Shell-home&/appFinder/catalog/"+JSON.stringify({catalogSelector:e.title,tileFilter:"",tagFilter:"[]",targetGroup:""}))}.bind(this);if(r.apps.length>0||r.numberCustomTiles>0){this.oModel.setProperty("/AppsData/"+s,r);if(this.bFirstCatalogLoaded===false){sap.ui.getCore().getEventBus().publish("launchpad","allMyAppsFirstCatalogLoaded",{bFirstCatalogLoadedEvent:true});this.bFirstCatalogLoaded=true}this.iNumberOfProviders+=1}}.bind(this));return this._oAddCatalogToModelPromise};a.prototype._onGetCatalogsFail=function(t){return sap.ushell.Container.getServiceAsync("Message").then(function(e){e.info(t)})};a.prototype._onDoneLoadingCatalogs=function(){var t=this.oModel.getProperty("/AppsData");t.sort(function(t,e){var i=t.title.toUpperCase();var a=e.title.toUpperCase();if(i<a){return-1}if(i>a){return 1}return 0});this.oModel.setProperty("/AppsData",t);var e=sap.ui.getCore().getEventBus();if(!this.bFirstCatalogLoaded){e.publish("launchpad","allMyAppsNoCatalogsLoaded")}};a.prototype._getAppEntityFromTile=function(t){return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){var i;var a=e.getCatalogTilePreviewTitle(t);var r=e.getCatalogTilePreviewSubtitle(t);var s=e.getCatalogTileTargetURL(t);if(s&&(a||r)){i={};i.url=s;if(a){i.title=a;i.subTitle=r}else{i.title=r}return i}})};return new a},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/search/searchComponent/Component", ["sap/ui/core/UIComponent","sap/ui/core/mvc/View","sap/esh/search/ui/i18n","sap/base/util/ObjectPath"],function(e,t,r,n){"use strict";return e.extend("sap/ushell/renderers/fiori2/search/searchComponent",{metadata:{manifest:"json",library:"sap.ushell",interfaces:["sap.ui.core.IAsyncContentCreation"],config:{title:r.getText("searchAppTitle"),compactContentDensity:true,cozyContentDensity:true}},init:function(){e.prototype.init.apply(this,arguments)},createContent:function(){var e;var r=n.get("sap-ushell-config.services.SearchCEP")!==undefined,i=sap.ushell.Container.getFLPPlatform(true),s=r===true&&i==="cFLP";if(s===true){e="module:sap/ushell/renderers/fiori2/search/searchComponent/view/CEPSearchApp.view"}else{e="module:sap/ushell/renderers/fiori2/search/searchComponent/view/SearchApp.view"}return t.create({id:"searchContainerApp",viewName:e})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/search/searchComponent/controller/CEPSearchApp.controller", ["sap/ui/core/mvc/Controller","../../util"],function(e,t){"use strict";return e.extend("sap/ushell/renderers/fiori2/search/searchComponent/SearchApp",{onInit:function(){sap.esh.search.ui.getModelSingleton({},"flp");sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){this.oShellNavigation=e;this.oShellNavigation.hashChanger.attachEvent("hashChanged",this.hashChanged)}.bind(this))},hashChanged:function(){var e=sap.esh.search.ui.getModelSingleton({},"flp");e.parseURL()},onExit:function(){this.oShellNavigation.hashChanger.detachEvent("hashChanged",this.hashChanged);this.oSF=sap.ui.getCore().byId("CEPSearchField");this.oPlaceHolderSF=sap.ui.getCore().byId("PlaceHolderSearchField");if(this.oSF&&this.oSF.getValue()!==""){this.oSF.setValue("")}if(this.oPlaceHolderSF&&this.oPlaceHolderSF.getValue()!==""){this.oPlaceHolderSF.setValue("")}var e=this.oView.getContent()[0].oTablePersoController;if(e&&e.getTablePersoDialog&&e.getTablePersoDialog()){e.getTablePersoDialog().destroy()}if(this.oView.getContent()[0].oSearchPage.oFacetDialog){this.oView.getContent()[0].oSearchPage.oFacetDialog.destroy()}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/search/searchComponent/controller/SearchApp.controller", ["sap/ui/core/mvc/Controller","sap/esh/search/ui/SearchShellHelper","sap/esh/search/ui/SearchShellHelperAndModuleLoader","../../util"],function(e,a,t,h){"use strict";var i=!a.collapseSearch;return e.extend("sap/ushell/renderers/fiori2/search/searchComponent/SearchApp",{onInit:function(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){this.oShellNavigation=e;this.oShellNavigation.hashChanger.attachEvent("hashChanged",this.hashChanged)}.bind(this));if(a.oSearchFieldGroup===undefined){a.init()}if(i){a.setSearchState("EXP_S")}else{a.expandSearch()}},hashChanged:function(){var e=sap.esh.search.ui.getModelSingleton({},"flp");e.parseURL()},onExit:function(){this.oShellNavigation.hashChanger.detachEvent("hashChanged",this.hashChanged);var e=this.oView.getContent()[0].oTablePersoController;if(e&&e.getTablePersoDialog&&e.getTablePersoDialog()){e.getTablePersoDialog().destroy()}if(a.resetModel){a.resetModel()}if(i){if(a.getDefaultOpen()!==true){if(a.setSearchStateSync){a.setSearchStateSync("COL")}else{a.setSearchState("COL")}}else{a.setSearchState("EXP")}}else{if(!h.isSearchFieldExpandedByDefault()){a.collapseSearch()}else{a.expandSearch()}}if(this.oView.getContent()[0].oSearchPage.oFacetDialog){this.oView.getContent()[0].oSearchPage.oFacetDialog.destroy()}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/search/searchComponent/view/CEPSearchApp.view", ["sap/ui/core/mvc/View","sap/m/Label","sap/esh/search/ui/SearchCompositeControl"],function(e,r,n){"use strict";return e.extend("sap.ushell.renderers.fiori2.search.searchComponent.view.CEPSearchApp",{getControllerName:function(){return"sap.ushell.renderers.fiori2.search.searchComponent.controller.CEPSearchApp"},createContent:function(){var e=sap.esh.search.ui.getModelSingleton({},"flp");return new n({model:e})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/search/searchComponent/view/SearchApp.view", ["sap/ui/core/mvc/View","sap/m/Label","sap/esh/search/ui/SearchCompositeControl"],function(e,r,n){"use strict";return e.extend("sap.ushell.renderers.fiori2.search.searchComponent.view.SearchApp",{getControllerName:function(){return"sap.ushell.renderers.fiori2.search.searchComponent.controller.SearchApp"},createContent:function(){var e=sap.esh.search.ui.getModelSingleton({},"flp");return new n({model:e})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/search/util", ["sap/ui/core/UIComponent","sap/ui/core/mvc/View","sap/esh/search/ui/i18n"],function(e,a,r){"use strict";return{isSearchFieldExpandedByDefault:function(){var e=sap.ui.getCore().byId("shell-header")||{isExtraLargeState:function(){return false}};var a=sap.ushell.Container.getRenderer("fiori2").getShellController();var r=a.getView();var t=(r.getViewData()?r.getViewData().config:{})||{};return t.openSearchAsDefault||e.isExtraLargeState()}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/resources", ["sap/ui/core/Configuration","sap/ui/model/resource/ResourceModel"],function(e,r){"use strict";var o={};o.getTranslationModel=function(e){if(!this._oResourceModel){this._oResourceModel=new r({bundleUrl:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/resources/resources.properties"),bundleLocale:e})}return this._oResourceModel};o.i18nModel=o.getTranslationModel(e.getLanguage());o.i18n=o.i18nModel.getResourceBundle();return o},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AllMyApps", [],function(){"use strict";function e(e,t,n){var i=n&&n.config,r=false,s={};this.isEnabled=function(){r=!!(!i||i.enabled!==false);return r};this.isHomePageAppsEnabled=function(){return!!(!i||i.showHomePageApps!==false)};this.isCatalogAppsEnabled=function(){return!!(!i||i.showCatalogApps!==false)};this.isExternalProviderAppsEnabled=function(){return!!(!i||i.showExternalProviders!==false)};this.registerExternalProvider=function(e,t){if(!e||e===""){return}if(!t.getTitle||!t.getData){return}s[e]=t};this.getDataProviders=function(){return s};this.init=function(){}}e.hasNoAdapter=true;return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppConfiguration", ["sap/base/i18n/ResourceBundle","sap/base/Log","sap/base/util/ObjectPath","sap/m/library","sap/ui/core/Configuration","sap/ui/core/IconPool","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/ui/util/Mobile","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils/UrlParsing","sap/ushell/utils"],function(t,e,n,i,a,r,s,jQuery,o,u,p,c,l){"use strict";var f=i.ButtonType;function h(){var i={},h=true,g=null,m=[],d=[];u.on("AppRendered").do(y.bind(this));function y(){h=false;while(d.length>0){d.shift()()}}this.addActivity=function(t){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("UserRecents").then(function(n){n.addActivity(t).done(e.resolve).fail(e.reject)}).catch(e.reject);return e.promise()};this.setApplicationInInitMode=function(){h=true};this.getApplicationRequestQueue=function(){return d};this.getCurrentApplication=function(){return g};this.getCurrentAppliction=this.getCurrentApplication;this.getMetadata=function(t){if(!t){t=g}if(t){var e=s&&s.getHash?s.getHash():"";var n=this._getMemoizationKey(e);return this._getMetadata(t,n)}return{}};this._getMemoizationKey=function(t){var e=t.split("?");var n=e[0];var i=e[1];i=this._processParams(i);if(i){return n+i}var a=c.parseShellHash(t);n=a?a.semanticObject+"-"+a.action:"";return n};this._processParams=function(t){if(t){var e="";var n={};t.split("&").forEach(function(t){var e=t.split("=");n[e[0]]=e[1]});var i=Object.keys(n).sort();var a="";i.forEach(function(t,i){e=i?"&":"?";a+=e+t+"="+n[t]});return a}return""};this._getMetadata=function(t,e){if(!i.hasOwnProperty(e)||!i[e].complete){this.addMetadata(t,e)}if(!i[e]){i[e]={complete:false}}if(!i[e].title){i[e].title=t.text||p.i18n.getText("default_app_title")}return i[e]};this.setCurrentApplication=function(t){g=t;d.splice(0)};this.setHeaderHiding=function(){e.warning("Application configuration headerHiding property is deprecated and has no effect")};this.addApplicationSettingsButtons=function(t){if(h){d.push(function(){I(t)})}else{I(t)}};function I(t){var e,n=[],i=sap.ushell.Container.getRenderer("fiori2");for(e=0;e<t.length;e++){var a=t[e];n.push(a.getId());a.setIcon(a.getIcon()||r.getIconURI("customize"));if(p.i18n.getText("userSettings")===a.getProperty("text")){a.setProperty("text",p.i18n.getText("userAppSettings"))}a.setType(f.Unstyled)}if(sap.ushell.Container&&i){if(m.length){i.hideActionButton(m,true)}m=n;i.showActionButton(n,true,undefined,true)}}this.setWindowTitle=function(t){window.document.title=t};this.setIcons=function(t){o.setIcons(t)};this.setApplicationFullWidth=function(t){u.emit("setApplicationFullWidth",{bValue:t,date:Date.now()})};this.getApplicationName=function(t){var e,n=t&&t.additionalInformation||null;if(n){e=/^SAPUI5\.Component=(.+)$/i.exec(n);if(e){return e[1]}}return null};this.getApplicationUrl=function(t){var e=t&&t.url||null,n="P_TCODE",i;if(e){if(t.applicationType==="NWBC"&&e.indexOf(n)){return e}i=e.indexOf("?");if(i>=0){e=e.slice(0,i)}if(e.slice(-1)!=="/"){e+="/"}}return e};this.getPropertyValueFromConfig=function(t,e,n){var i;if(n&&t.hasOwnProperty(e+"Resource")){i=n.getText(t[e+"Resource"])}else if(t.hasOwnProperty(e)){i=t[e]}return i};this.getPropertyValueFromManifest=function(t,e,i){var a=e[i].manifestEntryKey,r=e[i].path,s=t.getManifestEntry(a);return n.get(r||"",s)};this.addMetadata=function(n,r){try{var s=this.getApplicationName(n),o=this.getApplicationUrl(n),u,p,c={fullWidth:{manifestEntryKey:"sap.ui",path:"fullWidth"},hideLightBackground:{manifestEntryKey:"sap.ui",path:"hideLightBackground"},title:{manifestEntryKey:"sap.app",path:"title"},icon:{manifestEntryKey:"sap.ui",path:"icons.icon"},favIcon:{manifestEntryKey:"sap.ui",path:"icons.favIcon"},homeScreenIconPhone:{manifestEntryKey:"sap.ui",path:"icons.phone"},"homeScreenIconPhone@2":{manifestEntryKey:"sap.ui",path:"icons.phone@2"},homeScreenIconTablet:{manifestEntryKey:"sap.ui",path:"icons.tablet"},"homeScreenIconTablet@2":{manifestEntryKey:"sap.ui",path:"icons.tablet@2"},startupImage320x460:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x920:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x1096:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x1096"},startupImage768x1004:{manifestEntryKey:"sap.ui",path:"icons.startupImage768x1004"},startupImage748x1024:{manifestEntryKey:"sap.ui",path:"icons.startupImage748x1024"},startupImage1536x2008:{manifestEntryKey:"sap.ui",path:"icons.startupImage1536x2008"},startupImage1496x2048:{manifestEntryKey:"sap.ui",path:"icons.startupImage1496x2048"},compactContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.compact"},cozyContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.cozy"}},f,h,g,m,d,y,I,x=n&&n.componentHandle;if(r){if(!i.hasOwnProperty(r)){i[r]={complete:false}}if(!i[r].complete){if(x){u=x.getMetadata()}else if(s){e.warning("No component handle available for '"+s+"'; SAPUI5 component metadata is incomplete",null,"sap.ushell.services.AppConfiguration");return}if(u){p=u.getConfig();m=u.getManifest()!==undefined;i[r].complete=true;if(p){y=p.resourceBundle||"";if(y){if(y.slice(0,1)!=="/"){y=o+y}I=t.create({url:y,locale:a.getLanguage()})}}for(d in c){if(c.hasOwnProperty(d)){if(m){i[r][d]=this.getPropertyValueFromManifest(u,c,d)}if(p&&i[r][d]===undefined){i[r][d]=this.getPropertyValueFromConfig(p,d,I)}}}i[r].version=u.getVersion();i[r].technicalName=u.getComponentName()}else if(l.isApplicationTypeEmbeddedInIframe(n.applicationType)){var v="/~canvas;window=app/wda/",b=n.url.indexOf(v),E="/sap/bc/webdynpro/sap/",A="/bc/gui/sap/its/webgui",w=n.url.indexOf(A);if(b>=0){i[r].technicalName=n.url.substring(b+v.length,n.url.indexOf("/",b+v.length))}if(n.url.indexOf(E)>=0){i[r].technicalName=new RegExp(E+"(.*)[?]").exec(n.url)[1]}i[r].complete=true;if(w>=0){var P="etransaction=",C=n.url.indexOf(P,w+A.length),K=n.url.indexOf("&",C),O=K>=0?K:n.url.length;i[r].technicalName=decodeURIComponent(n.url.substring(C+P.length,O))+" (TCODE)"}}else{e.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration")}}f=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];h=o&&o[o.length-1]==="/"?o.substring(0,o.length-1):o;g=function(t){if(t.match(/^https?:\/\/.*/)){return false}return t&&t[0]!=="/"};f.forEach(function(t){var e=i[r][t],n=null;if(e){n=g(e)?h+"/"+e:e}i[r][t]=n})}}catch(t){e.warning("Application configuration could not be parsed")}}}return new h},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppLifeCycle", ["sap/base/Log","sap/ui/base/EventProvider","sap/ui/core/Core","sap/ui/thirdparty/hasher","sap/ushell/AppInfoParameters","sap/ushell/EventHub","sap/ushell/TechnicalParameters","sap/ui/core/Component","sap/ushell/services/AppConfiguration","sap/ushell/utils/UrlParsing"],function(e,t,n,i,a,o,r,p,s,u){"use strict";var l="appLoaded";function f(u,f,c,h){var d,g,m;this.getCurrentApplication=function(){return d};this.attachAppLoaded=function(e,t,n){m.attachEvent(l,e,t,n)};this.detachAppLoaded=function(e,t){m.detachEvent(l,e,t)};this.prepareCurrentAppObject=function(e,t,n,i){y(e,t,n,i)};this.reloadCurrentApp=function(){o.emit("reloadCurrentApp",{sAppContainerId:g.getId(),sCurrentHash:i.getHash(),date:Date.now()})};this.setAppInfo=function(e,t){a.setCustomAttributes(e);sap.ushell.Container.getServiceAsync("MessageBroker").then(function(e){if(e.isEnabled()){d.getAllAppInfo(true).then(function(n){e.publish("flp-app-info","FLP",Date.now().toString(),t===true?"new-app-info":"app-info-update","*",n)})}})};function A(e,t,n,i,a){if(n==="flp-app-info"&&i==="get-current-app-info"&&d){d.getAllAppInfo(true).then(function(n){e.publish("flp-app-info","FLP",Date.now().toString(),i,[t],n)})}}if(window.QUnit===undefined&&sap.ushell.Container.inAppRuntime()===false){sap.ushell.Container.getServiceAsync("MessageBroker").then(function(e){if(e.isEnabled()){e.subscribe("FLP",[{channelId:"flp-app-info",version:"1.0"}],A.bind(undefined,e),function(){})}})}m=new t;if(sap.ushell.Container.inAppRuntime()===false){if(sap.ushell.Container.getRenderer()){C()}else{var v=function(){C();sap.ushell.Container.detachRendererCreatedEvent(v)};sap.ushell.Container.attachRendererCreatedEvent(v)}}function C(){var t=n.byId("viewPortContainer");if(!t||typeof t.attachAfterNavigate!=="function"){e.error("Error during instantiation of AppLifeCycle service","Could not attach to afterNavigate event","sap.ushell.services.AppLifeCycle");return}t.attachAfterNavigate(function(e){var t;var n;var i;var a;var o;var r=false;if(e.mParameters.toId.indexOf("applicationShellPage")===0){n=e.mParameters.to.getApp()}else if(e.mParameters.toId.indexOf("application")===0){n=e.mParameters.to}if(n&&typeof n.getComponentHandle==="function"&&n.getComponentHandle()){a=n.getComponentHandle().getInstance()}else if(n){t=n.getAggregation("child");if(t){a=t.getComponentInstance()}}else{a=p.get(e.mParameters.to.getComponent())}if(a){o=a.getId();r=o.indexOf("Shell-home-component")!==-1||o.indexOf("pages-component")!==-1||o.indexOf("workPageRuntime-component")!==-1||o.indexOf("Shell-appfinder-component")!==-1||o.indexOf("homeApp-component")!==-1||o.indexOf("runtimeSwitcher-component")!==-1}i=n&&typeof n.getApplicationType==="function"&&n.getApplicationType();if((!i||i==="URL")&&a){i="UI5"}y(i,a,r,n)})}function P(){var e=i.getHash();if(!e){return Promise.reject("Could not identify current application hash")}var t=sap.ushell.Container.getServiceAsync("URLParsing");return t.then(function(t){return t.parseShellHash(e)})}function I(){if(a.setCustomAttributes){a.setCustomAttributes()}}function y(e,t,n,i){I();g=i;d={applicationType:e,componentInstance:t,homePage:n,getTechnicalParameter:function(n){return r.getParameterValue(n,t,i,e)},getIntent:P,getInfo:function(e){return a.getInfo(e,d)},getAllAppInfo:function(n){return a.getAllAppInfo(n,d,t,i,e).then(function(e){if(n===true){e.applicationType=d.applicationType;e.homePage=d.homePage}else{e.applicationType={value:d.applicationType};e.homePage={value:d.homePage}}return e})},getSystemContext:function(){var e=s.getCurrentApplication()||{};var t=e.contentProviderId||"";return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext(t)})},disableKeepAliveAppRouterRetrigger:function(e){P().then(function(t){o.emit("disableKeepAliveRestoreRouterRetrigger",{disable:e,intent:t,componentId:d.componentInstance.oContainer.sId,date:Date.now()})})}};setTimeout(function(){m.fireEvent(l,d);if(window.QUnit===undefined&&sap.ushell.Container.inAppRuntime()===false){sap.ushell.Container.getServiceAsync("MessageBroker").then(function(e){if(e.isEnabled()){d.getAllAppInfo(true).then(function(t){e.publish("flp-app-info","FLP",Date.now().toString(),"new-app-info","*",t)})}})}},0)}}f.hasNoAdapter=true;return f},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppState", ["sap/ui/base/Object","sap/ui/thirdparty/jquery","sap/ushell/services/_AppState/AppState","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/services/_AppState/Sequentializer","sap/ushell/services/_AppState/SequentializingAdapter","sap/ushell/services/_AppState/WindowAdapter","sap/ushell/utils"],function(e,jQuery,t,n,s,i,r,a){"use strict";function o(e){return a.isDefined(e)&&a.isDefined(e.transient)?!!e.transient:true}function p(e,t,n,s){this._oConfig=s&&s.config;this._sSessionKey="";this._oAdapter=new i(e);this._oAdapter=new r(this,this._oAdapter,s)}p.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey()}return this._sSessionKey};p.prototype.getAppState=function(e){var n=new jQuery.Deferred;var s=this;var i;this._loadAppState(e).done(function(e,r,a,o){i=new t(s,e,false,r,undefined,undefined,undefined,a,o);n.resolve(i)}).fail(function(){i=new t(s,e);n.resolve(i)});return n.promise()};p.prototype._getGeneratedKey=function(e){var t=a.generateRandomKey();if(e){t=("TAS"+t).substring(0,41)}else{t=("AS"+t).substring(0,40)}return t};p.prototype.createEmptyAppState=function(s,i,r,a){var p;var d="";var f="";var u=i||o(this._oConfig);var c=this._getGeneratedKey(u);if(r!==undefined&&!this.isPersistencyMethodSupported(r)){r=undefined;a=undefined}if(s){if(!e.isA(s,"sap.ui.core.UIComponent")){throw new Error("oComponent passed must be a UI5 Component")}if(s.getMetadata&&s.getMetadata()&&typeof s.getMetadata().getName==="function"){d=s.getMetadata().getName()||""}if(!d&&s.getMetadata&&s.getMetadata().getComponentName){d=s.getMetadata().getComponentName()}if(s.getMetadata&&s.getMetadata()&&typeof s.getMetadata().getManifest==="function"&&typeof s.getMetadata().getManifest()==="object"&&typeof s.getMetadata().getManifest()["sap.app"]==="object"){f=s.getMetadata().getManifest()["sap.app"].ach||""}}if(u===true){r=a=undefined}else if(r===undefined&&this.isPersistencyMethodSupported(n.PersonalState)){r=n.PersonalState;a=undefined}p=new t(this,c,true,undefined,d,f,u,r,a);return p};p.prototype.createEmptyUnmodifiableAppState=function(){var e=this._getGeneratedKey();var n=new t(this,e,false);return n};p.prototype._saveAppState=function(e,t,s,i,r,p,d){var f=this._getSessionKey();var u=a.isDefined(r)?r:o(this._oConfig);if(u){p=undefined;d=undefined}else if(p!==undefined){if(!this.isPersistencyMethodSupported(p)){if(this.isPersistencyMethodSupported(n.PersonalState)){p=n.PersonalState}else{p=undefined}d=undefined}}return this._oAdapter.saveAppState(e,f,t,s,i,u,p,d)};p.prototype._keyIsJson=function(e){if(typeof e==="string"&&e.indexOf("{")===0){try{JSON.parse(e);return true}catch(e){return false}}return false};p.prototype._loadAppState=function(e){if(this._keyIsJson(e)){return(new jQuery.Deferred).resolve(e,e).promise()}return this._oAdapter.loadAppState(e)};p.prototype.deleteAppState=function(e){return this._oAdapter.deleteAppState(e)};p._getSequentializer=function(){return new s};p.prototype.getSupportedPersistencyMethods=function(){if(this._oAdapter.getSupportedPersistencyMethods){return this._oAdapter.getSupportedPersistencyMethods()}return[]};p.prototype.isPersistencyMethodSupported=function(e){var t=this.getSupportedPersistencyMethods();if(t.length>0&&e!==undefined){return t.indexOf(e)>=0}return false};p.prototype.setAppStateToPublic=function(e){var t=d(e,"sap-xapp-state");var s=d(e,"sap-iapp-state");var i=(new jQuery.Deferred).resolve();var r=(new jQuery.Deferred).resolve();var a=new jQuery.Deferred;var o;var p;if(t!==undefined){i=this.makeStatePersistent(t,n.PublicState).done(function(n){if(t!==n){e=e.replace(t,n);o=n}}).fail(a.reject)}if(s!==undefined){r=this.makeStatePersistent(s,n.PublicState).done(function(t){if(s!==t){e=e.replace(s,t);p=t}}).fail(a.reject)}jQuery.when(i,r).done(function(){a.resolve(e,t,s,o,p)});return a.promise()};function d(e,t){var n=new RegExp("(?:"+t+"=)([^&/]+)");var s=n.exec(e);var i;if(s&&s.length===2){i=s[1]}return i}p.prototype.makeStatePersistent=function(e,t,n){var s=new jQuery.Deferred;if(this.getSupportedPersistencyMethods().length===0){return s.resolve(e)}if(this._keyIsJson(e)){return s.resolve(e)}if(this.isPersistencyMethodSupported(t)){this.getAppState(e).done(function(i){if(i._iPersistencyMethod!==t){i.bTransient=false;i._iPersistencyMethod=t;i._oPersistencySettings=n;if(e.startsWith("TAS")){e=e.substring(1,e.length)}this._saveAppState(e,i._sData,i._sAppName,i._sACHComponent,false,t,n).done(function(){s.resolve(e)}).fail(s.reject)}else{s.resolve(e)}}.bind(this)).fail(s.reject)}else{s.reject("AppState.makeStatePersistent - adapter does not support persistence method: "+t)}return s.promise()};p.WindowAdapter=r;p.hasNoAdapter=false;return p},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppType", ["sap/ushell/library","sap/ushell/utils/AppType"],function(e,p){"use strict";var s=JSON.parse(JSON.stringify(e.AppType));s.getDisplayName=p.getDisplayName;return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Bookmark", ["sap/ui/thirdparty/jquery","sap/ushell/Config","sap/ushell/library","sap/base/util/deepClone","sap/base/util/deepExtend","sap/base/Log"],function(jQuery,e,r,o,t,a){"use strict";var n="sap.ushell.services.Bookmark";var i="X-SAP-UI2-HANA:hana?remoteId=HANA_CATALOG";var s=r.ContentNodeType;function u(){this._oLaunchPageServicePromise=sap.ushell.Container.getServiceAsync("LaunchPage");if(e.last("/core/spaces/enabled")){this._oPagesServicePromise=sap.ushell.Container.getServiceAsync("Pages")}this._addBookmarkToContentNodes=function(e,r,o,t){var a=r.map(function(r){if(r&&r.hasOwnProperty("type")&&r.isContainer){switch(r.type){case s.Page:return this.addBookmarkToPage(e,r.id,t);case s.HomepageGroup:return new Promise(function(e,o){this._oLaunchPageServicePromise.then(function(t){t.getGroupById(r.id).done(e).fail(o)})}.bind(this)).then(function(r){return this.addBookmarkToHomepageGroup(e,r,o,t)}.bind(this));default:return Promise.reject("Bookmark Service: The API needs to be called with a valid content node type. '"+r.type+"' is not supported.")}}return Promise.reject("Bookmark Service: Not a valid content node.")}.bind(this));return Promise.all(a)};this.addBookmark=function(r,o,t){var i=new jQuery.Deferred;var s=e.last("/core/shell/enablePersonalization");var u=e.last("/core/spaces/enabled");var c=e.last("/core/spaces/myHome/enabled");if(!s&&(!u||!c)){return i.resolve().promise()}this._checkBookmarkParameters(r).then(function(){if(typeof o==="undefined"&&u){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.getDefaultSpace()}).then(function(e){var r=e&&e.children&&e.children[0];return r}).then(function(e){return this._addBookmarkToContentNodes(r,[e],false,t)}.bind(this))}if((typeof o==="undefined"||!o.hasOwnProperty("type"))&&!Array.isArray(o)){return this.addBookmarkToHomepageGroup(r,o,false,t)}var e=[].concat(o);return this._addBookmarkToContentNodes(r,e,false,t)}.bind(this)).then(i.resolve).catch(function(e){a.error("Error during Bookmark creation: ",e,n);i.reject(e)});return i.promise()};this.addCustomBookmark=function(e,r,a,n){var i=o(r);var s=t(i,{vizType:e,vizConfig:{"sap.flp":{chipConfig:i.chipConfig},"sap.platform.runtime":{includeManifest:!i.loadManifest}}});delete s.chipConfig;delete s.loadManifest;var u=[].concat(a);return this._addBookmarkToContentNodes(s,u,true,n)};this.addBookmarkToHomepageGroup=function(r,o,t,a){if(e.last("/core/spaces/enabled")){var n="Bookmark Service: The API is not available in spaces mode.";return Promise.reject(n)}return new Promise(function(e,n){this._oLaunchPageServicePromise.then(function(i){var s;if(t){s=i.addCustomBookmark(r,o,a)}else{s=i.addBookmark(r,o,a)}s.done(function(r){var t={tile:r,group:o};sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileAdded",t);e()}).fail(n)})}.bind(this))};this.addBookmarkToPage=function(r,o,t){if(!e.last("/core/spaces/enabled")){return Promise.reject("Bookmark Service: 'addBookmarkToPage' is not valid in launchpad homepage mode, use 'addBookmark' instead.")}var a=e.last("/core/shell/enablePersonalization");var n=e.last("/core/spaces/myHome/enabled");var i=e.last("/core/spaces/myHome/myHomePageId");if(!a&&(!n||n&&o!==i)){return Promise.reject("Bookmark Service: Add bookmark is not allowed as the personalization functionality is not enabled.")}if(r&&(typeof r.title!=="string"||typeof r.url!=="string")){return Promise.reject("Bookmark Service - Invalid bookmark data.")}return this._oPagesServicePromise.then(function(e){return e.addBookmarkToPage(o,r,undefined,t)})};this.addBookmarkByGroupId=function(r,o,t){var a=new jQuery.Deferred;if(e.last("/core/spaces/enabled")){var n="Bookmark Service: The API 'addBookmarkByGroupId' is not supported in launchpad spaces mode.";return a.reject(n).promise()}this._oLaunchPageServicePromise.then(function(e){e.getGroups().done(function(e){var n=e.find(function(e){return e.id===o})||null;this.addBookmark(r,n,t).done(a.resolve).fail(a.reject)}.bind(this)).fail(a.reject)}.bind(this)).catch(a.reject);return a.promise()};this.getShellGroupIDs=function(r){var o=new jQuery.Deferred;if(e.last("/core/spaces/enabled")){var t="Bookmark Service: The API 'getShellGroupIDs' is not supported in launchpad spaces mode.";return o.reject(t).promise()}this._oLaunchPageServicePromise.then(function(e){e.getGroupsForBookmarks(r).done(function(r){r=r.map(function(r){return{id:e.getGroupId(r.object),title:r.title}});o.resolve(r)}).fail(o.reject)});return o.promise()};this._doAddCatalogTileToGroup=function(e,r,o,t){this._oLaunchPageServicePromise.then(function(n){if(t){n.getGroups().fail(e.reject).done(function(i){var s=i.some(function(a){if(n.getGroupId(a)===t){this._addToGroup(o,e,r,a);return true}}.bind(this));if(!s){var u="Group '"+t+"' is unknown";a.error(u,null,"sap.ushell.services.Bookmark");e.reject(u)}}.bind(this))}else{n.getDefaultGroup().fail(e.reject).done(function(t){this._addToGroup(o,e,r,t)}.bind(this))}}.bind(this));return e.promise()};this._isSameCatalogTile=function(e,r,o){var t=o.getCatalogTileId(r);if(t===undefined){return false}return t.indexOf(e)===0};this._addToGroup=function(e,r,o,t){return this._oLaunchPageServicePromise.then(function(n){n.getCatalogTiles(e).fail(r.reject).done(function(i){var s=n.getGroupId(t);var u=i.some(function(e){if(this._isSameCatalogTile(o,e,n)){n.addTile(e,t).fail(r.reject).done(function(){r.resolve();sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","catalogTileAdded",s)});return true}}.bind(this));if(!u){var c="No tile '"+o+"' in catalog '"+n.getCatalogId(e)+"'";a.error(c,null,"sap.ushell.services.Bookmark");r.reject(c)}}.bind(this))}.bind(this))};this.addCatalogTileToGroup=function(r,o,t){var n=new jQuery.Deferred;var s;a.error("Deprecated API call of 'sap.ushell.Bookmark.addCatalogTileToGroup'. Please use 'addBookmark' instead",null,"sap.ushell.services.Bookmark");if(e.last("/core/spaces/enabled")){s="Bookmark Service: The API 'addCatalogTileToGroup' is not supported in launchpad spaces mode.";return n.reject(s).promise()}this._oLaunchPageServicePromise.then(function(e){var u=t?this._isMatchingRemoteCatalog:this._isLegacyHANACatalog;t=t||{id:i};e.onCatalogTileAdded(r);e.getCatalogs().fail(n.reject).done(function(i){var c;i.forEach(function(r){if(u(r,t,e)){if(!c){c=r}else{a.warning("More than one matching catalog: "+JSON.stringify(t),null,"sap.ushell.services.Bookmark")}}});if(c){this._doAddCatalogTileToGroup(n,r,c,o)}else{s="No matching catalog found: "+JSON.stringify(t);a.error(s,null,"sap.ushell.services.Bookmark");n.reject(s)}}.bind(this))}.bind(this));return n.promise()};this._checkBookmarkParameters=function(e){return Promise.resolve().then(function(){if(!e){throw new Error("Invalid Bookmark Data: No bookmark parameters passed.")}var r=e.dataSource;var o;if(r){if(r.type!=="OData"){throw new Error("Invalid Bookmark Data: Unknown data source type: "+r.type)}o=r.settings&&r.settings.odataVersion;var t=["2.0","4.0"];if(!t.includes(o)){throw new Error("Invalid Bookmark Data: Unknown OData version in the data source: "+o)}}if(e.serviceUrl){return sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(o){if(o.hasSemanticDateRanges(e.serviceUrl)&&!r){throw new Error("Invalid Bookmark Data: Provide a data source to use semantic date ranges.")}})}})};this._isMatchingRemoteCatalog=function(e,r,o){var t=o.getCatalogData(e);return t.remoteId===r.remoteId&&t.baseUrl.replace(/\/$/,"")===r.baseUrl.replace(/\/$/,"")};this._isLegacyHANACatalog=function(e,r,o){return o.getCatalogId(e)===i};this.countBookmarks=function(r,o){var t=new jQuery.Deferred;if(e.last("/core/spaces/enabled")){this._oPagesServicePromise.then(function(e){return e.countBookmarks({url:r,contentProviderId:o})}).then(t.resolve,t.reject)}else{this._oLaunchPageServicePromise.then(function(e){e.countBookmarks(r,o).done(t.resolve).fail(t.reject)})}return t.promise()};this.countCustomBookmarks=function(r){if(!r||!r.url||!r.vizType){return Promise.reject("countCustomBookmarks: Some required parameters are missing.")}if(e.last("/core/spaces/enabled")){return this._oPagesServicePromise.then(function(e){return e.countBookmarks(r)})}return this._oLaunchPageServicePromise.then(function(e){return e.countCustomBookmarks(r)})};this.deleteBookmarks=function(r,o){var t=new jQuery.Deferred;if(e.last("/core/spaces/enabled")){this._oPagesServicePromise.then(function(e){return e.deleteBookmarks({url:r,contentProviderId:o})}).then(t.resolve,t.reject)}else{this._oLaunchPageServicePromise.then(function(e){e.deleteBookmarks(r,o).done(function(e){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileDeleted",r);t.resolve(e)}).fail(t.reject)})}return t.promise()};this.deleteCustomBookmarks=function(r){if(!r||!r.url||!r.vizType){return Promise.reject("deleteCustomBookmarks: Some required parameters are missing.")}if(e.last("/core/spaces/enabled")){return this._oPagesServicePromise.then(function(e){return e.deleteBookmarks(r)})}return this._oLaunchPageServicePromise.then(function(e){return e.deleteCustomBookmarks(r)}).then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileDeleted",r.url)})};this.updateBookmarks=function(r,o,t){var a=new jQuery.Deferred;if(e.last("/core/spaces/enabled")){this._oPagesServicePromise.then(function(e){return e.updateBookmarks({url:r,contentProviderId:t},o)}).then(a.resolve,a.reject)}else{this._oLaunchPageServicePromise.then(function(e){e.updateBookmarks(r,o,t).done(a.resolve).fail(a.reject)})}return a.promise()};this.updateCustomBookmarks=function(r,o){if(!r||!r.url||!r.vizType){return Promise.reject("deleteCustomBookmarks: Some required parameters are missing.")}var a=t({},o,{vizConfig:{"sap.flp":{chipConfig:o.chipConfig},"sap.platform.runtime":{includeManifest:!o.loadManifest}}});delete a.chipConfig;delete a.loadManifest;if(e.last("/core/spaces/enabled")){return this._oPagesServicePromise.then(function(e){return e.updateBookmarks(r,a)})}return this._oLaunchPageServicePromise.then(function(e){return e.updateCustomBookmarks(r,a)})};this.getContentNodes=function(){if(e.last("/core/spaces/enabled")){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.getContentNodes()})}return new Promise(function(e,r){this._oLaunchPageServicePromise.then(function(o){o.getGroupsForBookmarks().done(function(r){var t=r.map(function(e){return{id:o.getGroupId(e.object),label:e.title,type:s.HomepageGroup,isContainer:true}});e(t)}).fail(r)})}.bind(this))}}u.hasNoAdapter=true;return u},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution", ["sap/base/Log","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/extend","sap/ui/thirdparty/jquery","sap/ushell/ApplicationType","sap/ushell/Config","sap/ushell/navigationMode","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/services/_ClientSideTargetResolution/InboundIndex","sap/ushell/services/_ClientSideTargetResolution/InboundProvider","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/services/_ClientSideTargetResolution/Search","sap/ushell/services/_ClientSideTargetResolution/StagedLogger","sap/ushell/services/_ClientSideTargetResolution/SystemContext","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing","sap/ushell/services/AppConfiguration","sap/ushell/TechnicalParameters","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,n,r,jQuery,i,s,a,o,l,u,c,d,f,p,g,h,m,v,b,y,S,R){"use strict";function I(e,t,n,r){this._init.apply(this,arguments)}I.prototype._init=function(t,n,r,i){this._iLogId=0;if(!this._implementsServiceInterface(t)){e.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return}this._oInboundProvider=new u(t.getInbounds.bind(t));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._oServiceConfiguration=i;this._oAdapter=t};I.prototype._implementsServiceInterface=function(e){if(typeof e.getInbounds==="function"){return true}return false};I.prototype._extractInboundFilter=function(e){if(!this._oAdapter.hasSegmentedAccess){return undefined}if(typeof e!=="string"){return undefined}var t=e.indexOf("#")===0?e:"#"+e;var n=R.parseShellHash(t);if(!n||!n.semanticObject||!n.action){return undefined}return[{semanticObject:n.semanticObject,action:n.action}]};I.prototype.resolveHashFragment=function(e){var t=this,n=new jQuery.Deferred,r=this._oAdapter.resolveHashFragmentFallback&&this._oAdapter.resolveHashFragmentFallback.bind(this._oAdapter),i=this._extractInboundFilter(e);this._oInboundProvider.getInbounds(i).then(function(i){t._resolveHashFragment(e,r,i).done(function(e){return n.resolve(e)}).fail(n.reject.bind(n))},function(){n.reject.apply(n,arguments)});return n.promise()};I.prototype.resolveTileIntent=function(e){var t=this,n=new jQuery.Deferred,r=this._extractInboundFilter(e);this._oInboundProvider.getInbounds(r).then(function(r){t._resolveTileIntent(e,undefined,r).done(n.resolve.bind(n)).fail(n.reject.bind(n))},function(){n.reject.apply(n,arguments)});return n.promise()};I.prototype.resolveTileIntentInContext=function(e,t){var n,r=new jQuery.Deferred;n=l.createIndex(e.concat(m.getInbounds()));this._resolveTileIntent(t,undefined,n).done(r.resolve.bind(r)).fail(r.reject.bind(r));return r.promise()};I.prototype._resolveHashFragment=function(t,n,r){var i=this,s=new jQuery.Deferred,a=t.indexOf("#")===0?t:"#"+t,o=R.parseShellHash(a);if(o===undefined){e.error("Could not parse shell hash '"+t+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return s.reject().promise()}o.formFactor=S.getFormFactor();this._getMatchingInbounds(o,r,{bExcludeTileInbounds:true}).fail(function(n){e.error("Could not resolve "+t,"_getMatchingInbounds promise rejected with: "+n,"sap.ushell.services.ClientSideTargetResolution");s.reject(n)}).done(function(r){var l;if(r.length===0){e.warning("Could not resolve "+t,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");s.reject("Could not resolve navigation target");return}r=i._applySapNavigationScopeFilter(r,o);l=r[0];if(e.getLevel()>=e.Level.DEBUG){var u=function(e,t){return this[e]===undefined?"<undefined>":t};var c=function(e,t){return e==="_original"?undefined:u.call(this,e,t)};var d=JSON.stringify(l,c,"   ");e.debug("The following target will now be resolved",d,"sap.ushell.services.ClientSideTargetResolution")}i._resolveSingleMatchingTarget(l,n,a).done(function(e){s.resolve(e)}).fail(s.reject.bind(s))});return s.promise()};I.prototype._applySapNavigationScopeFilter=function(e,t){var r=t&&t.params&&t.params["sap-navigation-scope-filter"];if(!r){return e}var i=e.filter(function(e){var t=n.get("inbound.signature.parameters",e);var i=t&&t["sap-navigation-scope"];if(i){return r[0]===i.defaultValue.value}return undefined});return i.length>0?i:e};I.prototype._resolveSingleMatchingTarget=function(t,r,o){var l=this,u=new jQuery.Deferred,f=R.parseShellHash(o),p=[f.semanticObject,f.action].join("-"),g=(t.inbound.resolutionResult||{}).applicationType;var h;if(this._oAdapter.resolveSystemAlias){h=this._oAdapter.resolveSystemAlias.bind(this._oAdapter)}var m=!!t.inbound.templateContext;var y=i.getEasyAccessMenuResolver(p,g);if(y&&!m){y(f,t,h,i.WDA.enableWdaCompatibilityMode).then(function(e){var r=a.compute(n.get("inbound.resolutionResult.applicationType",t),(t.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(t.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(b.getCurrentApplication()||{}).applicationType,s.last("/core/navigation/enableInPlaceForClassicUIs"));S.shallowMergeObject(e,r);e.inboundPermanentKey=t.inbound.permanentKey||t.inbound.id;u.resolve(e)},function(e){u.reject(e)});return u.promise()}var I=this._getReservedParameters(t);c.mapParameterNamesAndRemoveObjects(t);sap.ushell.Container.getServiceAsync("AppState").then(function(s){v.mixAppStateIntoResolutionResultAndRename(t,s).done(function(t){var s=function(){return l._constructFallbackResolutionResult.call(l,t,r,o)};if(i[g]){s=i[g].generateResolutionResult}delete t.intentParamsPlusAllDefaults["sap-tag"];delete t.mappedIntentParamsPlusSimpleDefaults["sap-tag"];t.mappedDefaultedParamNames=t.mappedDefaultedParamNames.filter(function(e){return e!=="sap-tag"});var a=n.get("inbound.resolutionResult.url",t);d.executePrelaunchOperations(t,I["sap-prelaunch-operations"]).then(function(){return s(t,a,h)}).then(function(e){e.reservedParameters=I;e.inboundPermanentKey=t.inbound.permanentKey||t.inbound.id;return e}).then(function(n){e.debug("Intent was resolved to the following target",JSON.stringify(t.resolutionResult,null,3),"sap.ushell.services.ClientSideTargetResolution");S.shallowMergeObject(t.resolutionResult,n);u.resolve(t.resolutionResult)},function(e){if(typeof e==="string"&&e.indexOf("fallback:")>=0){l._constructFallbackResolutionResult.call(this,t,r,o).then(function(e){S.shallowMergeObject(t.resolutionResult,e);u.resolve(t.resolutionResult)},u.reject.bind(u))}else{u.reject(e)}})})});return u.promise()};I.prototype._getReservedParameters=function(e){var t=y.getParameters({injectFrom:"startupParameter"}).map(function(e){return e.name});var n=h.extractParameters(t,e.intentParamsPlusAllDefaults);y.getParameters({injectFrom:"inboundParameter"}).forEach(function(t){var r=t.name;var i=e.inbound&&e.inbound.signature&&e.inbound.signature.parameters;if(i&&Object.keys(i).length>0){var s=i[r];var a=s&&s.defaultValue&&s.defaultValue.hasOwnProperty("value");var o=s&&s.filter&&s.filter.hasOwnProperty("value");if(s&&(o||a)){if(a){n[r]=s.defaultValue.value}else{n[r]=s.filter.value}}else{delete n[r]}delete e.intentParamsPlusAllDefaults[r];var l=e.defaultedParamNames.indexOf(r);if(l>=0){e.defaultedParamNames.splice(l,1)}}});return n};I.prototype._resolveTileIntent=function(t,n,r){var i=this,s=new jQuery.Deferred,a=t.indexOf("#")===0?t:"#"+t,o=R.parseShellHash(a);if(o===undefined){e.error("Could not parse shell hash '"+t+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return s.reject("Cannot parse shell hash").promise()}o.formFactor=S.getFormFactor();this._getMatchingInbounds(o,r,{bExcludeTileInbounds:false}).fail(function(n){e.error("Could not resolve "+t,"_getMatchingInbounds promise rejected with: "+n,"sap.ushell.services.ClientSideTargetResolution");s.reject(n)}).done(function(r){var o;if(r.length===0){e.warning("Could not resolve "+t,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");s.reject("No matching targets found");return}o=r[0];i._resolveSingleMatchingTileIntent(o,n,a).done(s.resolve.bind(s)).fail(s.reject.bind(s))});return s.promise()};I.prototype._resolveSingleMatchingTileIntent=function(t,s,o){var l=new jQuery.Deferred,u=(t.inbound.resolutionResult||{}).applicationType,d=this;var f;if(this._oAdapter.resolveSystemAlias){f=this._oAdapter.resolveSystemAlias.bind(this._oAdapter)}c.mapParameterNamesAndRemoveObjects(t);sap.ushell.Container.getServiceAsync("AppState").then(function(c){v.mixAppStateIntoResolutionResultAndRename(t,c).done(function(t){var c=function(){return d._constructFallbackResolutionResult.call(d,t,s,o)};if(i[u]){c=i[u].generateResolutionResult}delete t.intentParamsPlusAllDefaults["sap-tag"];delete t.mappedIntentParamsPlusSimpleDefaults["sap-tag"];t.mappedDefaultedParamNames=t.mappedDefaultedParamNames.filter(function(e){return e!=="sap-tag"});var p=n.get("inbound.resolutionResult.url",t);c(t,p,f).then(function(n){S.shallowMergeObject(t.resolutionResult,n);var i=r({},t.inbound.tileResolutionResult);i.startupParameters=t.effectiveParameters;i.navigationMode=t.resolutionResult.navigationMode;if(!i.navigationMode){i.navigationMode=a.getNavigationMode(t.resolutionResult)}l.resolve(i);e.debug("Tile Intent was resolved to the following target",JSON.stringify(i,null,3),"sap.ushell.services.ClientSideTargetResolution")},function(e){l.reject(e)})})});return l.promise()};I.prototype._constructFallbackResolutionResult=function(t,n,i){var s={},a;Object.keys(t.intentParamsPlusAllDefaults).forEach(function(e){if(Array.isArray(t.intentParamsPlusAllDefaults[e])){s[e]=t.intentParamsPlusAllDefaults[e]}});a=t.mappedDefaultedParamNames||t.defaultedParamNames;if(a.length>0){s["sap-ushell-defaultedParameterNames"]=[JSON.stringify(a)]}if(typeof n!=="function"){e.error("Cannot resolve hash fragment",i+" has matched an inbound that cannot be resolved client side and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter","sap.ushell.services.ClientSideTargetResolution");return Promise.reject("Cannot resolve hash fragment: no fallback provided.")}e.warning("Cannot resolve hash fragment client side",i+" has matched an inbound that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");return new Promise(function(e,a){n(i,r({},t.inbound),s).done(function(t){var n={};["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(function(e){if(t.hasOwnProperty(e)){n[e]=t[e]}});e(n)}).fail(a.bind(null))})};I.prototype.getDistinctSemanticObjects=function(){var e=new jQuery.Deferred;this._oInboundProvider.getInbounds().then(function(t){var n={};t.getAllInbounds().forEach(function(e){if(typeof e.semanticObject==="string"&&e.semanticObject!=="*"&&!e.hideIntentLink&&e.semanticObject.length>0){n[e.semanticObject]=true}});e.resolve(Object.keys(n).sort())},function(){e.reject.apply(e,arguments)});return e.promise()};I.prototype.getLinks=function(n){var i,s=this,a,o,l,u=new jQuery.Deferred,c;if(arguments.length===1&&t(arguments[0])){i=arguments[0];c=r({},i);["action","semanticObject"].forEach(function(e){if(i.hasOwnProperty(e)){c[e]=i[e]}});if(c.appStateKey){c.params=c.params||{};c.params["sap-xapp-state"]=[c.appStateKey];delete c.appStateKey}}else if(arguments.length<=3){e.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");a=arguments[0];o=arguments[1];l=arguments[2];c={semanticObject:a,params:o,ignoreFormFactor:l}}else{return u.reject("invalid arguments for getLinks").promise()}this._oInboundProvider.getInbounds().then(function(e){s._getLinks(c,e).done(u.resolve.bind(u)).fail(u.reject.bind(u))},function(){u.reject.apply(u,arguments)});return u.promise()};I.prototype._validateGetSemanticObjectLinksArgs=function(t){var n=t.semanticObject,r=t.action,i=!t.hasOwnProperty("action");if(typeof n!=="undefined"||i){if(typeof n!=="string"){e.error("invalid input for _getLinks","the semantic object must be a string, got "+Object.prototype.toString.call(n)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}if(i&&n.match(/^\s+$/)){e.error("invalid input for _getLinks","the semantic object must be a non-empty string, got '"+n+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}if(!i&&n.length===0){e.error("invalid input for _getLinks","the semantic object must not be an empty string, got '"+n+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}}if(typeof r!=="undefined"){if(typeof r!=="string"){e.error("invalid input for _getLinks","the action must be a string, got "+Object.prototype.toString.call(r)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action"}if(r.length===0){e.error("invalid input for _getLinks","the action must not be an empty string, got '"+r+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action"}}return undefined};I.prototype._getLinks=function(t,r){var i=t.semanticObject,s=t.action,a=t.params,o=!!t.withAtLeastOneUsedParam,l=!!t.treatTechHintAsFilter,u=t.ignoreFormFactor,c=t.hasOwnProperty("sortResultsBy")?t.sortResultsBy:"intent";if(t.hasOwnProperty("sortResultOnTexts")){e.warning("the parameter 'sortResultOnTexts' was experimental and is no longer supported","getLinks results will be sorted by '"+c+"'","sap.ushell.services.ClientSideTargetResolution")}var d={bExcludeTileInbounds:true};var f=this._validateGetSemanticObjectLinksArgs(t);if(t.tags){d.tags=t.tags}if(f){return(new jQuery.Deferred).reject(f).promise()}if(i==="*"){return jQuery.when([])}function p(e){var t=R.paramsToString(e);return t?"?"+t:""}var g=new jQuery.Deferred,m=S.getFormFactor(),v=R.parseParameters(p(a)),b={semanticObject:i===""?undefined:i,action:s,formFactor:u?undefined:m,params:v};if(l){b.treatTechHintAsFilter=true}this._getMatchingInbounds(b,r,d).done(function(r){var s={},a=r.map(function(e){var r=i||e.inbound.semanticObject,a="#"+r+"-"+e.inbound.action,l;if(r==="*"){return undefined}if(e.inbound.action==="*"){return undefined}if(e.inbound&&e.inbound.hasOwnProperty("hideIntentLink")&&e.inbound.hideIntentLink===true){return undefined}if(!s.hasOwnProperty(a)){s[a]={matchingInbound:e.inbound,count:1};if(e.inbound.signature.additionalParameters==="ignored"){l=h.filterObjectKeys(v,function(t){return t.indexOf("sap-")===0||e.inbound.signature.parameters.hasOwnProperty(t)},false)}else{l=v}if(o){var u=Object.keys(l).some(function(e){return e.indexOf("sap-")!==0});if(!u){s[a].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined}}var c=h.inboundSignatureMeetsParameterOptions(e.inbound.signature.parameters,t.paramsOptions||[]);if(!c){s[a].hideReason="inbound signature does not meet the requested parameter filter options";return undefined}var d={intent:a+p(l),text:e.inbound.title};if(e.inbound.icon){d.icon=e.inbound.icon}if(e.inbound.subTitle){d.subTitle=e.inbound.subTitle}if(e.inbound.shortTitle){d.shortTitle=e.inbound.shortTitle}var f=n.get("inbound.signature.parameters.sap-tag.defaultValue.value",e);if(f){d.tags=[f]}return d}s[a].count++;return undefined}).filter(function(e){return typeof e==="object"});if(c!=="priority"){a.sort(function(e,t){return e[c]<t[c]?-1:1})}if(a.length===0){e.debug("_getLinks returned no results")}else if(e.getLevel()>=e.Level.DEBUG){if(e.getLevel()>=e.Level.TRACE){var l=[];var u=[];a.forEach(function(e){var t=e.intent.split("?")[0];if(s[t].hideReason){u.push(["-",t+"("+s[t].hideReason+")\n"," text:",e.text+"\n"," full intent:",e.intent].join(" "))}else{l.push(["-",t,s[t].count>1?"("+(s[t].count-1)+" others matched)\n":"\n","text:",e.text+"\n","full intent:",e.intent].join(" "))}});e.debug("_getLinks filtered to the following unique intents:","\n"+l.join("\n"),"sap.ushell.services.ClientSideTargetResolution");e.debug("_getLinks would have also returned the following unique intents, but something prevented this:",u.join("\n"),"sap.ushell.services.ClientSideTargetResolution")}else{e.debug("_getLinks filtered to unique intents.","Reporting histogram: \n - "+Object.keys(s).join("\n - "),"sap.ushell.services.ClientSideTargetResolution")}}g.resolve(a)}).fail(g.reject.bind(g));return g.promise()};I.prototype._getMatchingInbounds=function(t,n,r){var i=this,s,a,l,u,c,d,g,h=new jQuery.Deferred;if(r){s=r.tags;d=r.bExcludeTileInbounds}if(e.getLevel()>=e.Level.DEBUG){l=++i._iLogId}p.begin(function(){function e(e){var t=e.action||(typeof e.action==="undefined"?"<any>":"<invalid-value>");var n=e.semanticObject||(typeof e.semanticObject==="undefined"?"<any>":"<invalid-value>");return R.constructShellHash({semanticObject:n,action:t,params:e.params})}var n=e(t);return{logId:l,title:"Matching Intent '"+n+"' to inbounds (form factor: "+(t.formFactor||"<any>")+")",moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]}});c=t.semanticObject;a=t.action;this._oShellHash=t;u=s?n.getSegmentByTags(s):n.getSegment(c,a);if(d){g=u.filter(function(e){return!e.tileResolutionResult||!e.tileResolutionResult.isCustomTile})}else{g=u}var m=null;if(this._oAdapter.getContentProviderDataOriginsLookup){m=this._oAdapter.getContentProviderDataOriginsLookup.bind(this._oAdapter)}f.match(t,g,{},m,e.getLevel()>=e.Level.DEBUG).then(function(e){p.log(function(){return{logId:l,stage:1,prefix:"✘",lines:Object.keys(e.noMatchReasons||{}).map(function(t){return t+" "+e.noMatchReasons[t]})}});p.log(function(){var t=e.matchResults.map(function(e){return o.formatInbound(e.inbound)});return{logId:l,stage:1,prefix:t.length>0?"✅":"✘",lines:t.length>0?t:["No inbound was matched"]}});var t={};var n=false;var r=Object.keys(e.missingReferences);r.forEach(function(r){var i=Object.keys(e.missingReferences[r]);n=n||i.length>0;t[r]=i});r=r.filter(function(e){if(t[e].length>0){return true}delete t[e];return false});if(!n){p.log(function(){return{logId:l,stage:2,prefix:"✅",line:"No need to resolve references"}});return(new jQuery.Deferred).resolve({matchResults:e.matchResults,referencesToInclude:null}).promise()}r.forEach(function(e){p.log(function(){return{logId:l,stage:2,line:'@ Must resolve the following references with contentProviderId = "'+e+'":',prefix:"•",lines:t[e]}})});var i=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(e){var n=r.map(function(e){return this.getSystemContext(e)}.bind(this));return Promise.all(n).then(function(n){var i=r.map(function(r,i){return new Promise(function(s,a){e.resolveReferences(t[r],n[i]).done(s).fail(a)})});return Promise.all(i)})}.bind(this)).then(function(t){var n={matchResults:e.matchResults,referencesToInclude:{}};r.forEach(function(e,r){var i=t[r];n.referencesToInclude[e]=i;if(Object.keys(i).length>0){p.log(function(){return{logId:l,stage:2,line:'✅ resolved references with contentProviderId = "'+e+'" to the following values:',prefix:"•",lines:Object.keys(i).map(function(e){return e+": '"+i[e]+"'"})}})}});i.resolve(n)}).catch(function(e){p.log(function(){return{logId:l,stage:2,prefix:"❌",line:"Failed to resolve references: "+e}});h.resolve([])});return i.promise()}.bind(this)).then(function(e){var n,r,i=e.referencesToInclude;if(!i){p.log(function(){return{logId:l,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"✅"}});return(new jQuery.Deferred).resolve(e).promise()}r=e.matchResults;n=r.map(function(e){return e.inbound});return f.match(t,n,i,m,0).then(function(e){p.log(function(){var t=e.matchResults||[];if(t.length>=1){return{logId:l,stage:3,line:"The following inbounds re-matched:",lines:t.map(function(e){return o.formatInbound(e.inbound)}),prefix:"✅"}}return{logId:l,stage:3,line:"No inbounds re-matched",prefix:"-"}});return e})}).then(function(e){var t=e.matchResults||[];if(t.length<=1){p.log(function(){return{logId:l,stage:4,line:"Nothing to sort"}});h.resolve(t);return}var n=f.sortMatchingResultsDeterministic(e.matchResults||[]);p.log(function(){var e=n.map(function(e){return o.formatInbound(e.inbound||{})+(e.matchesVirtualInbound?" (virtual)":"")+"\n[ Sort Criteria ] "+"\n * 1 * sap-priority: '"+e["sap-priority"]+"'"+"\n * 2 * Sort string: '"+e.priorityString+"\n * 3 * Deterministic blob: '"+f.serializeMatchingResult(e)+"'"});return{logId:l,stage:4,line:"Sorted inbounds as follows:",lines:e,prefix:".",number:true}});h.resolve(n)});return h.promise().then(function(e){p.end(function(){return{logId:l}});return e})};I.prototype._isIntentSupportedOne=function(e,t){var n=new jQuery.Deferred,r=R.parseShellHash(e);if(e==="#"){n.resolve(true);return n.promise()}if(r===undefined){return n.reject("Could not parse shell hash '"+e+"'").promise()}r.formFactor=S.getFormFactor();this._getMatchingInbounds(r,t,{bExcludeTileInbounds:true}).done(function(e){n.resolve(e.length>0)}).fail(function(){n.reject()});return n.promise()};I.prototype.isIntentSupported=function(e){var t=this,n=new jQuery.Deferred;this._oInboundProvider.getInbounds().then(function(r){t._isIntentSupported(e,r).done(n.resolve.bind(n)).fail(n.reject.bind(n))},function(){n.reject.apply(n,arguments)});return n.promise()};I.prototype._isIntentSupported=function(e,t){var n=this,r=new jQuery.Deferred,i={};r.resolve();function s(e,t){i[e]={supported:t}}var a=[];e.forEach(function(e){var i=n._isIntentSupportedOne(e,t);i.fail(function(e){a.push(e)});i.done(function(t){s(e,t)});r=jQuery.when(r,i)});var o=new jQuery.Deferred;r.done(function(){o.resolve(i)}).fail(function(){o.reject("One or more input intents contain errors: "+a.join(", "))});return o.promise()};I.prototype.getUserDefaultParameterNames=function(e){var t=this,n=new jQuery.Deferred;this._oInboundProvider.getInbounds().then(function(r){t._getUserDefaultParameterNames(r.getAllInbounds(),e).then(function(e){n.resolve(e)},function(e){n.reject("Cannot get user default parameters from inbounds: "+e)})},function(){n.reject.apply(n,arguments)});return n.promise()};I.prototype._getUserDefaultParameterNames=function(e,t){var n={simple:{},extended:{}};e=e.filter(function(e){if(e.contentProviderId===undefined&&t.id===""){return true}return e.contentProviderId===t.id});return sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(t){e.forEach(function(e){var r=e.signature&&e.signature.parameters||[];Object.keys(r).forEach(function(e){var i=r[e],s,a,o;if(i){if(i.filter&&i.filter.format==="reference"){o=i.filter.value}else if(i.defaultValue&&i.defaultValue.format==="reference"){o=i.defaultValue.value}if(typeof o==="string"){s=t.extractUserDefaultReferenceName(o);if(typeof s==="string"){n.simple[s]={}}a=t.extractExtendedUserDefaultReferenceName(o);if(typeof a==="string"){n.extended[a]={}}}}})});return n})};I.prototype.getEasyAccessSystems=function(r){var s={},a,l,u;r=r||"sapMenu";if(this._oHaveEasyAccessSystemsDeferreds[r]){return this._oHaveEasyAccessSystemsDeferreds[r].promise()}this._oHaveEasyAccessSystemsDeferreds[r]=new jQuery.Deferred;u=this._oHaveEasyAccessSystemsDeferreds[r];function c(e,t,n){if(!e){return false}var i=[e.semanticObject,e.action].join("-");return n[r][i]&&e.deviceTypes&&t!==undefined&&e.deviceTypes[t]}a=i.getEasyAccessMenuDefinitions().reduce(function(e,t){var n=t.easyAccessMenu.intent.split("-")[1];e[n]={appType:t.type,priority:t.easyAccessMenu.systemSelectionPriority};return e},{});l={userMenu:i.getEasyAccessMenuDefinitions().reduce(function(e,t){var n=t.easyAccessMenu.intent;e[n]=t.easyAccessMenu.showSystemSelectionInUserMenu;return e},{}),sapMenu:i.getEasyAccessMenuDefinitions().reduce(function(e,t){var n=t.easyAccessMenu.intent;e[n]=t.easyAccessMenu.showSystemSelectionInSapMenu;return e},{})};this._oInboundProvider.getInbounds().then(function(r){var i={};r.getAllInbounds().filter(function(e){return c(e,S.getFormFactor(),l)}).forEach(function(r){var l;if(t(r.signature.parameters["sap-system"])&&r.signature.parameters["sap-system"].hasOwnProperty("filter")){l=n.get("signature.parameters.sap-system.filter.value",r)}if(typeof l==="string"){var u=a[r.action].priority;var c=a[r.action].appType;if(!s[l]){i[l]=-1;s[l]={appType:{}}}if(i[l]<u){s[l].text=r.title;i[l]=u}s[l].appType[c]=true}else{e.warning("Cannot extract sap-system from easy access menu inbound: "+o.formatInbound(r),"This parameter is supposed to be a string. Got '"+l+"' instead.","sap.ushell.services.ClientSideTargetResolution")}});u.resolve(s)},function(){u.reject.apply(u,arguments)});return u.promise()};I.prototype.getSystemContext=function(e){var t=e===undefined?"":e;return new Promise(function(e,n){var r;this._oAdapter.resolveSystemAlias(t).done(function(t){r=g.createSystemContextFromSystemAlias(t);e(r)}).fail(function(e){n(e)})}.bind(this))};I.hasNoAdapter=false;return I},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CommonDataModel", ["sap/ushell/services/_CommonDataModel/PersonalizationProcessor","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/ushell/services/_CommonDataModel/SiteConverter","sap/base/util/isEmptyObject","sap/base/util/deepClone","sap/base/util/deepExtend","sap/base/util/extend","sap/base/util/Version","sap/ushell/Config","sap/base/util/includes","sap/base/util/values","sap/ushell/library","sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/base/Log","sap/ui/core/Manifest"],function(e,t,jQuery,i,n,r,o,s,a,l,u,p,h,c,f,d,g,P){"use strict";var v=c.DisplayFormat;var _=c.ContentNodeType;var y="sap.ushell.services.CommonDataModel";var m={STATIC_LAUNCHER:"sap.ushell.StaticAppLauncher",DYNAMIC_LAUNCHER:"sap.ushell.DynamicAppLauncher",CARD:"sap.ushell.Card"};function z(t,i,r,o){this._oAdapter=t;this._oPersonalizationProcessor=new e;this._oSiteDeferred=new jQuery.Deferred;this._oOriginalSite={};this._oPersonalizedSite={};this._oContentProviderIndex={};this._oSiteConverter=new n;this._oPersonalizationDeltas={};this._bLoadPersonalization=f.isFlpHomeIntent();this._oManifestCache={};this._oGetSitePromise=t.getSite().then(function(e){this._oOriginalSite=s({},e);if(this._bLoadPersonalization){this._loadAndApplyPersonalization(e)}return e}.bind(this)).fail(function(e){this._oSiteDeferred.reject(e);this._bLoadPersonalization=true}.bind(this))}z.prototype._loadAndApplyPersonalization=function(e){var t=new l(e._version);if(t.compareTo("3.1.0")<0){this._oAdapter.getPersonalization(t).then(function(t){if(t){this._oPersonalizationDeltas=o(t)}else{this._oPersonalizationDeltas={version:"3.0.0",_version:"3.0.0"}}this._triggerMixinPersonalisationInSite(e,t)}.bind(this)).fail(this._oSiteDeferred.reject)}else{this._oPersonalizedPages={};this._ensureStandardVizTypesPresent(this._oOriginalSite).then(function(e){this._oOriginalSite=e;this._oOriginalSite=this._ensureProperDisplayFormats(this._oOriginalSite);this._oSiteDeferred.resolve(this._oOriginalSite)}.bind(this))}};z.prototype._applyPagePersonalization=function(e,t){var i=e.identification.id;if(Object.keys(t).length){var n=t.classicHomePage;if(n&&n.version==="3.1.0"){Object.keys(n).forEach(function(e){if(!t[e]){t[e]=n[e]}});delete t.classicHomePage;t._version=t.version}var r=new l(t._version||t.version);if(r.compareTo("3.1.0")<0){t={classicHomePage:t,_version:"3.1.0",version:"3.1.0"}}}this._oPersonalizationDeltas=t;var s=o(t[i],20)||{};var a=this._oSiteConverter.convertTo("3.0.0",o(e,20));return this._triggerMixinPersonalisationInSite(a,s).then(function(e){this._oPersonalizedPages[i]=this._oSiteConverter.convertTo("3.1.0",o(e,20));return this._oPersonalizedPages[i]}.bind(this))};z.prototype._migratePersonalizedPages=function(e){if(typeof this._oAdapter.migratePersonalizedPages!=="function"){return Promise.resolve(e)}return this._oAdapter.migratePersonalizedPages(e).then(function(e){if(e.length===0){return null}return this.save(e)}.bind(this)).then(function(){return e})};z.prototype._triggerMixinPersonalisationInSite=function(e,t){return new Promise(function(i,n){this._oPersonalizationProcessor.mixinPersonalization(e,t).done(function(e){this._oPersonalizedSite=this._ensureCompleteSite(e);this._oPersonalizedSite=this._ensureGroupsOrder(this._oPersonalizedSite);this._ensureStandardVizTypesPresent(this._oPersonalizedSite).then(function(e){this._oPersonalizedSite=e;this._oPersonalizedSite=this._ensureProperDisplayFormats(this._oPersonalizedSite);this._oSiteDeferred.resolve(this._oPersonalizedSite);i(this._oPersonalizedSite)}.bind(this)).catch(n)}.bind(this)).fail(function(e){this._oSiteDeferred.reject(e);n()}.bind(this))}.bind(this))};z.prototype.getHomepageGroups=function(){var e=new jQuery.Deferred;this.getSite().then(function(t){var i=t&&t.site&&t.site.payload&&t.site.payload.groupsOrder?t.site.payload.groupsOrder:[];e.resolve(i)});return e.promise()};z.prototype.getGroups=function(){var e=new jQuery.Deferred;this.getSite().then(function(t){var i=[];Object.keys(t.groups).forEach(function(e){i.push(t.groups[e])});e.resolve(i)});return e.promise()};z.prototype.getGroup=function(e){var t=new jQuery.Deferred;this.getSite().then(function(i){var n=i.groups[e];if(n){t.resolve(n)}else{t.reject("Group "+e+" not found")}});return t.promise()};z.prototype.getSite=function(){if(!this._bLoadPersonalization){this.getSiteWithoutPersonalization().then(this._loadAndApplyPersonalization.bind(this));this._bLoadPersonalization=true}return this._oSiteDeferred.promise()};z.prototype.getSiteWithoutPersonalization=function(){return this._oGetSitePromise};z.prototype.getPage=function(e){var t=u.last("/core/shell/enablePersonalization");var i=u.last("/core/spaces/myHome/enabled");var n=u.last("/core/spaces/myHome/myHomePageId");var r=u.last("/core/stableIDs/enabled");var o=u.last("/core/stableIDs/migratePersonalization");return Promise.resolve(this._oGetSitePromise).then(function(){if(this._oPersonalizedPages[e]){return this._oPersonalizedPages[e]}if(t||i&&e===n){return Promise.all([this._getPageFromAdapter(e),this._oAdapter.getPersonalization(this._oOriginalSite._version)]).catch(function(){return Promise.reject("CommonDataModel Service: Cannot get page "+e)}).then(function(e){return this._applyPagePersonalization(e[0],e[1]).catch(function(){return Promise.reject("Personalization Processor: Cannot mixin the personalization.")})}.bind(this)).then(function(e){if(r&&o){return this._migratePersonalizedPages([e]).then(function(e){return e[0]})}return e}.bind(this))}return this._getPageFromAdapter(e)}.bind(this))};z.prototype._getPageFromAdapter=function(e){if(!this._oAdapter.getPage){return Promise.resolve(o(this._oOriginalSite.pages[e],20))}return this._oAdapter.getPage(e).then(function(t){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(i){var n=i[0];var r=i[1];this._oOriginalSite.pages[e]=t;this._oOriginalSite.visualizations=n;this._oOriginalSite.vizTypes=r;return o(t,20)}.bind(this))}.bind(this))};z.prototype._filterForProperPages=function(e){return e.filter(function(e){return!!e})};z.prototype.getPages=function(e){var t=u.last("/core/shell/enablePersonalization");var i=u.last("/core/spaces/myHome/enabled");var n=u.last("/core/spaces/myHome/myHomePageId");var r=u.last("/core/stableIDs/enabled");var o=u.last("/core/stableIDs/migratePersonalization");return Promise.resolve(this._oGetSitePromise).then(function(){if(t||i){return Promise.all([this._getPagesFromAdapter(e),this._oAdapter.getPersonalization(this._oOriginalSite._version)]).catch(function(){return Promise.reject("CommonDataModel Service: Cannot get pages")}).then(function(e){var i=e[0];var s=e[1];return Promise.all(Object.keys(i).map(function(e){if(this._oPersonalizedPages[e]){return Promise.resolve(this._oPersonalizedPages[e])}if(!t&&e!==n){return Promise.resolve(i[e])}return this._applyPagePersonalization(i[e],s).catch(function(){return Promise.reject("Personalization Processor: Cannot mixin the personalization.")})}.bind(this))).then(function(e){if(r&&o){return this._migratePersonalizedPages(e)}return e}.bind(this)).then(function(e){return this._filterForProperPages(e)}.bind(this))}.bind(this))}return this._getPagesFromAdapter(e).then(function(e){return this._filterForProperPages(h(e))}.bind(this))}.bind(this))};z.prototype._getPagesFromAdapter=function(e){if(!this._oAdapter.getPages){var t={};for(var i in this._oOriginalSite.pages){if(p(e,this._oOriginalSite.pages[i].identification.id)){t[i]=this._oOriginalSite.pages[i]}}return Promise.resolve(o(t,20))}return this._oAdapter.getPages(e).then(function(e){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(t){var i=t[0];var n=t[1];this._oOriginalSite.visualizations=i;this._oOriginalSite.vizTypes=n;Object.keys(e).forEach(function(t){this._oOriginalSite.pages[t]=e[t]}.bind(this));return o(e,20)}.bind(this))}.bind(this))};z.prototype.getAllPages=function(e){if(e&&e.personalizedPages){return this._getAllPersonalizedPages()}return this._getAssignedPageIds().then(function(e){return this.getPages(e)}.bind(this))};z.prototype._getAssignedPageIds=function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.getContentNodes()}).then(function(e){var t=[];e.forEach(function(e){this._collectPageIds(e,t)}.bind(this));return t}.bind(this))};z.prototype._collectPageIds=function(e,t){if(e.type===_.Page){if(t.indexOf(e.id)===-1){t.push(e.id)}}if(e.children!==undefined){e.children.forEach(function(e){this._collectPageIds(e,t)}.bind(this))}};z.prototype._getAllPersonalizedPages=function(){return Promise.resolve(this._oGetSitePromise).then(function(){return Promise.all([this._getAssignedPageIds(),new Promise(function(e,t){this._oAdapter.getPersonalization(this._oOriginalSite._version).done(e).catch(t)}.bind(this))])}.bind(this)).then(function(e){var t=e[0];var i=e[1];var n=[];Object.keys(i).forEach(function(e){if(e==="version"||e==="_version"){return}if(!t.includes(e)){return}var r=i[e];if(Object.keys(r).length>1){n.push(e)}});if(n.length>0){return this.getPages(n)}return[]}.bind(this))};z.prototype.getApplications=function(){return new Promise(function(e,t){this.getSite().then(function(i){var n=i.applications;if(n){e(n)}else{t("CDM applications not found.")}}).fail(t)}.bind(this))};z.prototype.getVizTypes=function(){if(typeof this._oAdapter.getVizTypes==="function"){return Promise.all([this._getSiteProperty("vizTypes"),this._oAdapter.getVizTypes()]).then(function(e){var t=e[0];var i=e[1];return a(t,i)})}return this.getCachedVizTypes()};z.prototype.getCachedVizTypes=function(){var e=Promise.resolve();if(typeof this._oAdapter.getCachedVizTypes==="function"){e=this._oAdapter.getCachedVizTypes()}return Promise.all([this._getSiteProperty("vizTypes"),e]).then(function(e){var t=e[0];var i=e[1];return a(t,i)})};z.prototype.getVizType=function(e){var t=Promise.resolve();if(typeof this._oAdapter.getVizType==="function"){t=this._oAdapter.getVizType(e)}return Promise.all([this._getSiteProperty("vizTypes"),t]).then(function(t){var i=t[0];var n=t[1];if(n){i[e]=n}return i[e]})};z.prototype.getVisualizations=function(){if(typeof this._oAdapter.getVisualizations==="function"){return Promise.all([this._getSiteProperty("visualizations"),this._oAdapter.getVisualizations()]).then(function(e){var t=e[0];var i=e[1];return a(t,i)})}return this.getCachedVisualizations()};z.prototype.getCachedVisualizations=function(){var e=Promise.resolve();if(typeof this._oAdapter.getCachedVisualizations==="function"){e=this._oAdapter.getCachedVisualizations()}return Promise.all([this._getSiteProperty("visualizations"),e]).then(function(e){var t=e[0];var i=e[1];return a(t,i)})};z.prototype._getSiteProperty=function(e){return new Promise(function(i,n){this.getSite().then(function(r){var o=t.get(e,r);if(o){i(o)}else{var s=e.toString();n("CDM "+s+" not found.")}}).fail(n)}.bind(this))};z.prototype.getGroupFromOriginalSite=function(e){var t=new jQuery.Deferred;if(typeof e==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[e]){t.resolve(s({},this._oOriginalSite.groups[e]))}else{t.reject("Group does not exist in original site.")}return t.promise()};z.prototype.getOriginalPage=function(e){return o(this._oOriginalSite.pages[e],20)};z.prototype.save=function(e){var t=new jQuery.Deferred;if(this._oOriginalSite._version==="3.1.0"){if(!e){return t.reject("No page id was provided").promise()}if(typeof e==="string"){e=[e]}this._saveCdmVersion31(e).then(t.resolve).catch(t.reject)}else{this._saveCdmVersion30().then(t.resolve).catch(t.reject)}return t.promise()};z.prototype._saveCdmVersion30=function(){var e=this._oOriginalSite;var t=this._oPersonalizedSite;return new Promise(function(i,n){this._oPersonalizationProcessor.extractPersonalization(o(t,20),o(e,20)).done(i).fail(n)}.bind(this)).catch(function(){return Promise.reject("Personalization Processor: Cannot extract personalization.")}).then(function(e){if(!r(e)){if(this._oPersonalizationDeltas.version===undefined||this._oPersonalizationDeltas._version===undefined){this._oPersonalizationDeltas.version=this._oOriginalSite._version;this._oPersonalizationDeltas._version=this._oOriginalSite._version}this._oPersonalizationDeltas=e;return this._setPersonalization(this._oPersonalizationDeltas)}return Promise.resolve()}.bind(this))};z.prototype._saveCdmVersion31=function(e){var t=e.map(function(e){var t=this._oSiteConverter.convertTo("3.0.0",this._oOriginalSite.pages[e]);var i=this._oSiteConverter.convertTo("3.0.0",this._oPersonalizedPages[e]);return new Promise(function(n,r){this._oPersonalizationProcessor.extractPersonalization(o(i,20),o(t,20)).done(function(t){n({pageId:e,personalization:t})}).fail(function(t){g.error("Cannot extract personalization of page "+e+": "+t,null,y);n()})}.bind(this))}.bind(this));return Promise.all(t).then(function(e){var t=false;e.forEach(function(e){if(!e){return}if(!r(e.personalization)){t=true;if(this._oPersonalizationDeltas.version===undefined||this._oPersonalizationDeltas._version===undefined){this._oPersonalizationDeltas.version=this._oOriginalSite._version;this._oPersonalizationDeltas._version=this._oOriginalSite._version}this._oPersonalizationDeltas[e.pageId]=e.personalization}}.bind(this));if(t){return this._setPersonalization(this._oPersonalizationDeltas)}return Promise.resolve()}.bind(this))};z.prototype._setPersonalization=function(e,t){if(this._oPendingPersonalizationDeferred){if(!this._oNextPersonalizationQuery){this._oNextPersonalizationQuery={fnNextCall:null,aPromiseResolvers:[]}}return new Promise(function(i,n){this._oNextPersonalizationQuery.fnNextCall=this._setPersonalization.bind(this,e,t);this._oNextPersonalizationQuery.aPromiseResolvers.push({resolve:i,reject:n})}.bind(this))}this._oPendingPersonalizationDeferred=this._oAdapter.setPersonalization(e,t);return new Promise(function(e,t){this._oPendingPersonalizationDeferred.then(e).fail(t).always(function(){delete this._oPendingPersonalizationDeferred;if(this._oNextPersonalizationQuery){var e=this._oNextPersonalizationQuery.fnNextCall();this._cleanupPersonalizationQueuePromises(e,this._oNextPersonalizationQuery.aPromiseResolvers);delete this._oNextPersonalizationQuery}}.bind(this))}.bind(this))};z.prototype._cleanupPersonalizationQueuePromises=function(e,t){t.forEach(function(t){e.then(t.resolve).catch(t.reject)})};z.prototype.registerContentProvider=function(){g.error("CommonDataModel.registerContentProvider is obsolete and should not be used.")};z.prototype._ensureCompleteSite=function(e){if(e.groups){var t=e.groups;Object.keys(t).forEach(function(e){if(!t[e]){delete t[e]}else{if(!t[e].payload){t[e].payload={}}if(!t[e].payload.links){t[e].payload.links=[]}if(!t[e].payload.tiles){t[e].payload.tiles=[]}if(!t[e].payload.groups){t[e].payload.groups=[]}}})}return e};z.prototype._ensureGroupsOrder=function(e){var i=t.get("site.payload.groupsOrder",e);var n=e.groups;var r=0;if(!i){return e}while(r<i.length){var o=i[r];if(!n[o]){i.splice(r,1)}else{r++}}return e};z.prototype.getPlugins=function(){var e=function(e,i){var n=Object.keys(i).length;if(n===0){return{}}if(!i.hasOwnProperty("Shell-plugin")){g.error("Cannot find inbound with id 'Shell-plugin' for plugin '"+e+"'","plugin startup configuration cannot be determined correctly",y);return{}}if(n>1){g.warning("Multiple inbounds are defined for plugin '"+e+"'","plugin startup configuration will be determined using "+"the signature of 'Shell-plugin' inbound.",y)}var r=t.get("signature.parameters",i["Shell-plugin"])||{};return Object.keys(r).reduce(function(e,i){var n=t.get(i+".defaultValue.value",r);if(typeof n==="string"){e[i]=n}return e},{})};var n=function(e){Object.keys(e).filter(function(t){return typeof e[t]==="object"}).forEach(function(t){e[t]=n(e[t])});return Object.freeze(e)};var r;return function(o){if(o!==undefined){r=o}if(r){return jQuery.when(r)}r={};return this.getSiteWithoutPersonalization().then(function(o){var s=o.applications||{};Object.keys(s).filter(function(e){return t.get("type",this[e]["sap.flp"])==="plugin"},s).forEach(function(n){var o;var s=this[n];var l={};if(!i(s["sap.platform.runtime"])){g.error("Cannot find 'sap.platform.runtime' section for plugin '"+n+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel")}else if(!i(s["sap.platform.runtime"].componentProperties)){g.error("Cannot find 'sap.platform.runtime/componentProperties' "+"section for plugin '"+n+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel")}else{l=s["sap.platform.runtime"].componentProperties}r[n]={url:l.url,component:s["sap.ui5"].componentName};var u=t.get("crossNavigation.inbounds",s["sap.app"])||{};o=e(n,u);var p=a(l.config||{},o);if(p){r[n].config=p}if(l.asyncHints){r[n].asyncHints=l.asyncHints}var h=t.get("deviceTypes",s["sap.ui"]);if(h){r[n].deviceTypes=h}},s);return n(r)},function(e){return e})}}();z.prototype._mapDisplayFormats=function(e){var t={tile:v.Standard,standard:v.Standard,link:v.Compact,compact:v.Compact,flat:v.Flat,flatWide:v.FlatWide,tileWide:v.StandardWide,standardWide:v.StandardWide};var i=Object.keys(t).filter(function(t){return e.indexOf(t)>-1});return i.map(function(e){return t[e]})};z.prototype._ensureProperDisplayFormats=function(e){if(e.vizTypes){Object.keys(e.vizTypes).forEach(function(i){if(e.vizTypes[i]["sap.flp"]&&e.vizTypes[i]["sap.flp"].vizOptions){var n=e.vizTypes[i];var r=t.get("vizOptions.displayFormats.supported",n["sap.flp"]);var o=t.get("vizOptions.displayFormats.default",n["sap.flp"]);if(r){e.vizTypes[i]["sap.flp"].vizOptions.displayFormats.supported=this._mapDisplayFormats(r)}if(o){e.vizTypes[i]["sap.flp"].vizOptions.displayFormats.default=this._mapDisplayFormats([o])[0]}}}.bind(this))}if(e.hasOwnProperty("pages")){Object.keys(e.pages).forEach(function(t){var i=e.pages[t];if(i.payload&&i.payload.sections){var n=i.payload.sections;Object.keys(n).forEach(function(e){var t=n[e];Object.keys(t.viz).forEach(function(e){var i=t.viz[e];if(i.displayFormatHint){var n=this._mapDisplayFormats([i.displayFormatHint])[0];i.displayFormatHint=n||i.displayFormatHint}}.bind(this))}.bind(this))}}.bind(this))}else if(e.hasOwnProperty("groups")){Object.keys(e.groups).forEach(function(t){var i=e.groups[t];i.payload.tiles.forEach(function(e){if(e.displayFormatHint){var t=this._mapDisplayFormats([e.displayFormatHint])[0];e.displayFormatHint=t||e.displayFormatHint}}.bind(this))}.bind(this))}return e};z.prototype._ensureStandardVizTypesPresent=function(e){if(!(e._version&&e._version.startsWith("3."))){return Promise.resolve(e)}if(!e.vizTypes){e.vizTypes={}}var t=[];var i={};i[m.STATIC_LAUNCHER]="sap/ushell/components/tiles/cdm/applauncher/manifest.json";i[m.DYNAMIC_LAUNCHER]="sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json";i[m.CARD]="sap/ushell/services/_CommonDataModel/vizTypeDefaults/cardManifest.json";Object.keys(i).forEach(function(n){if(!e.vizTypes[n]){var r=i[n];var o=this._loadManifest(r).then(function(t){e.vizTypes[n]=t});t.push(o)}}.bind(this));if(t.length===0){return Promise.resolve(e)}return Promise.all(t).then(function(){return e})};z.prototype._loadManifest=function(e){if(!this._oManifestCache[e]){var t=sap.ui.require.toUrl(e);this._oManifestCache[e]=P.load({manifestUrl:t,async:true}).then(function(e){return e.getRawJson()})}return this._oManifestCache[e].then(function(e){return o(e)})};z.prototype.getMenuEntries=function(e){return new Promise(function(i,n){this.getSite().then(function(n){var r=t.get("menus."+e+".payload.menuEntries",n);i(o(r)||[])})}.bind(this))};z.prototype.getContentProviderIds=function(){return new Promise(function(e,t){this.getSite().then(function(t){var i=Object.keys(t.systemAliases);var n={};h(t.applications).forEach(function(e){var t=d.getContentProviderId(e);if(p(i,t)){n[t]=true}});e(Object.keys(n))})}.bind(this))};z.hasNoAdapter=false;return z},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Configuration", ["sap/ushell/Config","sap/ui/thirdparty/jquery"],function(e,jQuery){"use strict";function t(){this.attachSizeBehaviorUpdate=function(t){var n=e.on("/core/home/sizeBehavior");n.do(t);return{detach:n.off}};this.getAppsSystems=function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(t){t.getSiteWithoutPersonalization().done(function(t){var n;n=t&&t.systemAliases&&JSON.parse(JSON.stringify(t.systemAliases))||{};e.resolve(n)}).catch(function(){e.resolve({})})}).catch(function(){e.resolve({})});return e.promise()}}t.hasNoAdapter=true;return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ConfigurationDefaults", ["sap/base/Log","sap/ushell/bootstrap/common/common.create.configcontract.core"],function(t,e){"use strict";function n(t){var n=e.getDefaultConfiguration();this.getDefaults=function(e){var a=this;return t.getDefaultConfig().then(function(t){var r=e.reduce(function(e,r){var i;if(a._isValidConfigPath(r)){var o=r.split("/"),u=o.pop(),f=t;for(var s=0;s<o.length&&f;s++){f=f[o[s]]}if(f&&f.hasOwnProperty(u)){i={defaultValue:f[u]}}else if(n.hasOwnProperty(r)){i={defaultValue:n[r]}}}if(i&&i.hasOwnProperty("defaultValue")&&typeof i.defaultValue==="undefined"){i.defaultValue=null}e[r]=i;return e},{});return Promise.resolve(r)})}}n.prototype._isValidConfigPath=function(e){if(!e||typeof e!=="string"){t.warning("Configuration path should be string");return false}if(e.length===0){t.warning("Configuration path can not be empty string");return false}if(e.charAt(0)==="/"){t.warning("Configuration path should not start with '/': "+e);return false}return true};n.hasNoAdapter=false;return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Container", ["sap/ushell/Container","sap/base/Log"],function(e,s){"use strict";s.warning("The use of sap/ushell/services/Container is deprecated. Please use sap/ushell/Container instead!");return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ContentExtensionAdapterFactory", ["sap/ushell/Config","sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig","sap/ui/thirdparty/jquery"],function(e,r,jQuery){"use strict";var n={};n.getAdapters=function(r){var t=n._getConfigAdapters(r);var a={};var i=t.map(function(r){var t=e.last(r.configSwitch);if(!t){return Promise.resolve()}var i=n._getAdapter(r);i.then(function(e){a[r.contentProviderName]=e});return i});return new Promise(function(e){jQuery.when.apply(jQuery,i).then(function(){e(a)})})};n._getConfigAdapters=function(e){if(!e){e=r._getConfigAdapters()}if(!Array.isArray(e)){e=[e]}return e};n._getAdapter=function(e){var r=new jQuery.Deferred;var t=e.configHandler?e.configHandler():{};var a=e.adapter.replace(/\./g,"/");sap.ui.require([a],function(){var a=n._getAdapterInstance(e.adapter,e.system,null,t);r.resolve(a)});return r.promise()};n._getAdapterInstance=function(e,r,n,t){var a=sap.ui.require(e.replaceAll(".","/"));if(a){var i={config:t||{}};return new a(r,n,i)}return null};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CrossApplicationNavigation", ["sap/ushell/services/AppConfiguration","sap/ushell/services/_CrossApplicationNavigation/utils","sap/ushell/utils/type","sap/ushell/TechnicalParameters","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/merge","sap/ushell/utils","sap/ushell/ApplicationType","sap/ushell/UI5ComponentType","sap/base/Log","sap/ushell/utils/UrlParsing","sap/base/util/deepClone","sap/ui/base/Object"],function(e,t,n,a,r,i,s,jQuery,o,p,c,l,u,f,h,v,g){"use strict";function m(m,d,A){var y;if(A&&A.config){y=A.config}function S(a,r){var i;var o;var p;if(typeof a!=="string"&&!s(a)&&a!==undefined){f.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined}if(a===undefined){return undefined}var c=e.getCurrentApplication();if(r){if(typeof r.getComponentData!=="function"||!s(r.getComponentData())||!r.getComponentData().startupParameters||!s(r.getComponentData().startupParameters)){f.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.CrossApplicationNavigation")}else{var l=r.getComponentData().startupParameters;if(l.hasOwnProperty("sap-system")){i=l["sap-system"][0]}if(l.hasOwnProperty("sap-ushell-next-navmode")){o=l["sap-ushell-next-navmode"][0]}}}else{if(c&&c["sap-system"]){i=c["sap-system"]}else if(c&&c.url){i=new URL(c.url,window.location.href).searchParams.get("sap-system")}if(c&&c["sap-ushell-next-navmode"]){o=c["sap-ushell-next-navmode"]}else if(c&&c.url){o=new URL(c.url,window.location.href).searchParams.get("sap-ushell-next-navmode")}}if(c){p=c.contentProviderId}var u=t._injectParameters({type:n,inject:{"sap-system":i,"sap-ushell-navmode":o,"sap-app-origin-hint":p},injectEmptyString:{"sap-app-origin-hint":true},args:a});return u}function C(e){if(localStorage&&localStorage["sap-ushell-enc-test"]==="false"){return e}if(!y||!y["sap-ushell-enc-test"]){if(localStorage&&localStorage["sap-ushell-enc-test"]!=="true"){return e}}if(typeof e!=="string"&&!s(e)&&e!==undefined){f.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined}if(e===undefined){return undefined}if(s(e)){var t=i({},e);if(t.target&&t.target.shellHash){if(typeof t.target.shellHash==="string"){if(t.target.shellHash!=="#"&&t.target.shellHash!==""){t.target.shellHash=C(t.target.shellHash)}}return t}t.params=t.params||{};t.params["sap-ushell-enc-test"]=["A B%20C"];return t}var n=e;if(!/[?&]sap-system=/.test(n)){var a=n.indexOf("?")>-1?"&":"?";n+=a+"sap-ushell-enc-test="+encodeURIComponent("A B%20C")}return n}this._extractInnerAppRoute=function(e){var t=this;if(typeof e==="string"){var n=e.split("&/");var a=n.shift();return{intent:a,innerAppRoute:n.length>0?"&/"+n.join("&/"):""}}if(Object.prototype.toString.apply(e)==="[object Object]"){var r=o.get("target.shellHash",e);if(typeof r==="string"){var i=t._extractInnerAppRoute(r);e.target.shellHash=i.intent;return{intent:e,innerAppRoute:i.innerAppRoute}}if(e.hasOwnProperty("appSpecificRoute")){var s=e.appSpecificRoute;delete e.appSpecificRoute;var p=typeof s==="string"&&s.indexOf("&/")!==0&&s.length>0;return{innerAppRoute:p?"&/"+s:s,intent:e}}return{intent:e,innerAppRoute:""}}f.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:e}};this._injectInnerAppRoute=function(e,t){var n=this;if(!t){return e}if(typeof e==="string"){return e+t}if(Object.prototype.toString.apply(e)==="[object Object]"){var a=o.get("target.shellHash",e);if(typeof a==="string"){e.target.shellHash=n._injectInnerAppRoute(a,t);return e}e.appSpecificRoute=t}return e};this.hrefForExternal=function(e,i,s){if(typeof i!=="object"&&i!==undefined&&i!==null){s=i;i=undefined}if(s){var o=new jQuery.Deferred;this.hrefForExternalAsync(e,i).then(o.resolve).catch(o.reject);return o.promise()}f.error("Deprecated option 'bAsync=false'. Please use 'bAsync=true' instead",null,"sap.ushell.services.CrossApplicationNavigation");var c=p({},e);var l=this._extractInnerAppRoute(c);var u=l.intent;t.addXAppStateFromParameter(u,"sap-xapp-state-data");c=S(u,i);c=t.injectStickyParameters({args:c,appLifeCycle:r,technicalParameters:a,type:n});c=C(c);c=this._injectInnerAppRoute(c,l.innerAppRoute);var h=sap.ushell.Container.getService("ShellNavigation");if(!h){f.debug("Shell not available, no Cross App Navigation");return""}return h.hrefForExternal(c,undefined,i,s)};this.hrefForExternalAsync=function(e,i){var s=p({},e);var o=this._extractInnerAppRoute(s);var c=o.intent;return Promise.resolve().then(function(){return t.addXAppStateFromParameterAsync(c,"sap-xapp-state-data")}).then(function(){s=S(c,i);return t.injectStickyParametersAsync({args:s,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){s=e;s=C(s);s=this._injectInnerAppRoute(s,o.innerAppRoute);return sap.ushell.Container.getServiceAsync("ShellNavigation")}.bind(this)).then(function(e){return new Promise(function(t,n){e.hrefForExternal(s,undefined,i,true).done(t).fail(n)})}).catch(function(){f.debug("Shell not available, no Cross App Navigation");return""})};this.expandCompactHash=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.expandCompactHash(e).done(t.resolve).fail(t.reject)});return t.promise()};this.backToPreviousApp=function(){return this.isInitialNavigationAsync().then(function(e){if(e){return this.toExternal({target:{shellHash:"#"},writeHistory:false})}this.historyBack();return undefined}.bind(this))};this.historyBack=function(e){var t=-1;if(e&&typeof e==="number"){if(e<=0){f.warning("historyBack called with an argument <= 0 and will result in a forward navigation or refresh","expected was an argument > 0","sap.ushell.services.CrossApplicationNavigation#historyBack")}t=e*-1}window.history.go(t)};this.isInitialNavigation=function(){f.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.isInitialNavigation'. Please use 'isInitialNavigationAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var e=o.get("sap.ushell.Container");var t=e&&typeof e.getService==="function"&&e.getService("ShellNavigation");if(!t){f.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true}var n=t.isInitialNavigation();if(typeof n==="undefined"){return true}return n};this.isInitialNavigationAsync=function(){return sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){var t=e.isInitialNavigation();if(typeof t==="undefined"){return true}return t}).catch(function(){f.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true})};this.toExternal=function(e,i){var s=e.writeHistory;var o=p({},e);var c=p({},o);this._processShellHashWithParams(o);var l=this._extractInnerAppRoute(o);var u=l.intent;var h;var v;return Promise.all([sap.ushell.Container.getServiceAsync("AppLifeCycle"),sap.ushell.Container.getServiceAsync("ShellNavigation")]).then(function(e){var t=e[0];h=e[1];v=t.getCurrentApplication();return v&&v.getIntent()}).then(function(e){this._checkIfAppNeedsToBeReloaded(c,v,e,h.hashChanger);return t.addXAppStateFromParameterAsync(u,"sap-xapp-state-data")}.bind(this)).then(function(){o=S(u,i);return t.injectStickyParametersAsync({args:o,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){o=e;o=C(o);delete o.writeHistory;o=this._injectInnerAppRoute(o,l.innerAppRoute);return h.toExternal(o,i,s)}.bind(this)).catch(function(e){f.error("CrossAppNavigation.toExternal failed",e,"sap.ushell.services.CrossApplicationNavigation")})};this._checkIfAppNeedsToBeReloaded=function(e,t,n,a){if(!t||!n||!e||!e.target){return}if(e.target.shellHash){var r=h.parseShellHash(e.target.shellHash)||{};e.target={semanticObject:r.semanticObject,action:r.action,contextRaw:r.contextRaw};e.appSpecificRoute=r.appSpecificRoute;e.params=Object.assign({},e.params,r.params)}if(e.appSpecificRoute){return}if(t.applicationType!=="UI5"){return}if(e.target.semanticObject!==n.semanticObject){return}if(e.target.action!==n.action){return}var i={};if(e.params){Object.keys(e.params).forEach(function(t){var n=e.params[t];var a=Array.isArray(n)?n:[n];i[t]=a.map(function(e){return e.toString()})})}if(!a.haveSameIntentParameters(i,n.params)){return}a.setReloadApplication(true)};this.hrefForAppSpecificHash=function(e){f.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.hrefForAppSpecificHash'. Please use 'hrefForAppSpecificHashAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var t=o.get("sap.ushell.Container");if(t&&typeof t.getService==="function"){var n=t.getService("ShellNavigation");if(n){return n.hrefForAppSpecificHash(e)}}f.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(e)};this.hrefForAppSpecificHashAsync=function(e){return sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){return t.hrefForAppSpecificHash(e)}).catch(function(){f.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(e)})};this.getPrimaryIntent=function(e,t){var n={};var a;var r=/^#\w+-displayFactSheet(?:$|\?.)/;n.tags=["primaryAction"];n.semanticObject=e;if(t){n.params=t}return this.getLinks(n).then(function(e){if(e.length===0){delete n.tags;n.action="displayFactSheet";a=function(e,t){var n;if(e.intent===t.intent){return 0}n=r.test(e.intent)^r.test(t.intent);if(n){return r.test(e.intent)?-1:1}return e.intent<t.intent?-1:1};return this.getLinks(n)}a=function(e,t){if(e.intent===t.intent){return 0}return e.intent<t.intent?-1:1};return e}.bind(this)).then(function(e){return e.length===0?null:e.sort(a)[0]})};this.getSemanticObjectLinks=function(e,i,s,o,p,l){var u=new jQuery.Deferred;Promise.resolve().then(function(){return t.injectStickyParametersAsync({args:{params:i},appLifeCycle:r,technicalParameters:a,type:n})}).then(function(t){t=S(t,o).params;t=C({params:t}).params;var n;if(Array.isArray(e)){n=[];e.forEach(function(e){n.push([{semanticObject:e[0],params:e[1],ignoreFormFactor:!!e[2],ui5Component:e[3],appStateKey:e[4],compactIntents:!!e[5]}])})}else{n={semanticObject:e,params:t,ignoreFormFactor:s,ui5Component:o,appStateKey:p,compactIntents:!!l}}return Promise.all([sap.ushell.Container.getServiceAsync("NavTargetResolution"),n])}).then(function(e){var t=e[0];var n=e[1];c.invokeUnfoldingArrayArguments(t.getLinks.bind(t),[n]).done(u.resolve).fail(u.reject)});return u.promise()};this.getLinks=function(e){var t;t=c.invokeUnfoldingArrayArguments(this._getLinks.bind(this),[e]);return t};this._getLinks=function(e){var s=new jQuery.Deferred;if(typeof e==="undefined"){e={}}var o=i({},e);o.compactIntents=!!o.compactIntents;o.action=o.action||undefined;o.paramsOptions=t.extractGetLinksParameterOptions(o.params);Promise.resolve().then(function(){return t.injectStickyParametersAsync({args:o,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){o=e;var n;if(o.params){n=t.extractGetLinksParameterDefinition(o.params)}else{n=o.params}var a=S({params:n},o.ui5Component).params;a=C({params:a}).params;if(o.appStateKey){a["sap-xapp-state"]=[o.appStateKey];delete o.appStateKey}o.params=a;return sap.ushell.Container.getServiceAsync("NavTargetResolution")}).then(function(e){e.getLinks(o).done(s.resolve).fail(s.reject)});return s.promise()};this.getDistinctSemanticObjects=function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(t){t.getDistinctSemanticObjects().done(e.resolve).fail(e.reject)});return e.promise()};this.isIntentSupported=function(e,t){var n=new jQuery.Deferred;var a={};var r=e.map(function(e){var n=S(e,t);a[n]=e;return n});sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(e){e.isIntentSupported(r).done(function(e){var t={};Object.keys(e).forEach(function(n){t[a[n]]=e[n]});n.resolve(t)}).fail(n.reject.bind(n))});return n.promise()};this.isNavigationSupported=function(e,t){var n=new jQuery.Deferred;var a=v(e).map(function(e){var n=this._extractInnerAppRoute(e);return S(n.intent,t)}.bind(this));sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(e){e.isNavigationSupported(a).done(n.resolve).fail(n.reject)});return n.promise()};this.isUrlSupported=function(e){var t=new jQuery.Deferred;if(typeof e!=="string"){t.reject();return t.promise()}if(h.isIntentUrl(e)){var n=h.getHash(e);this.isIntentSupported(["#"+n]).done(function(e){if(e["#"+n]&&e["#"+n].supported){t.resolve()}else{t.reject()}}).fail(function(){t.reject()})}else{t.resolve()}return t.promise()};this.createComponentInstance=function(e,t,n){var a=new jQuery.Deferred;var r=sap.ushell.Container;var i;this.createComponentData(e,t).then(function(e){r.getServiceAsync("Ui5ComponentLoader").then(function(t){return t.modifyComponentProperties(e,u.Application).then(function(e){i=e;return t})}).then(function(e){if(n){n.runAsOwner(function(){t(i)})}else{t(i)}function t(t){t.loadDefaultDependencies=false;e.instantiateComponent(t).then(function(e){a.resolve(e.componentHandle.getInstance())},function(e){e=e||"";f.error("Cannot create UI5 component: "+e,e.stack,"sap.ushell.services.CrossApplicationNavigation");a.reject(e)})}})},function(e){a.reject(e)});return a.promise()};this.createComponentData=function(e,t){return new Promise(function(n,a){var r=sap.ushell.Container;if(!t){t={}}else{var s=Object.keys(t).length;if(s>1||s===1&&!t.componentData){a("`oConfig` argument should either be an empty object or contain only the `componentData` property.");return}}if(t.componentData){delete t.componentData.startupParameters;delete t.componentData.config;delete t.componentData["sap-xapp-state"]}var o=h.constructShellHash(h.parseShellHash(e));if(!o){a("Navigation intent invalid!");return}r.getServiceAsync("NavTargetResolution").then(function(s){s.resolveHashFragment("#"+o).then(function(s){function o(e){e=i({},e,t);if(!e.ui5ComponentName){if(e.additionalInformation){e.ui5ComponentName=e.additionalInformation.replace(/^SAPUI5\.Component=/,"")}else if(e.name){e.ui5ComponentName=e.name}}return e}if(s.applicationType===l.URL.type&&s.appCapabilities&&s.appCapabilities.appFrameworkId==="UI5"&&sap.ushell.Container.inAppRuntime()){sap.ui.require(["sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent"],function(t){t.getAppInfo(s.appCapabilities.technicalAppComponentId).then(function(t){if(t.hasOwnProperty("oResolvedHashFragment")){t=t.oResolvedHashFragment}t=o(t);if(t.url&&e.indexOf("?")>0){t.url+="?"+e.split("?")[1]}p({ui5ComponentName:s.appCapabilities.technicalAppComponentId,applicationDependencies:t,url:t.url})})})}else if(s.applicationType!==l.URL.type&&!/^SAPUI5\.Component=/.test(s.additionalInformation)){a("The resolved target mapping is not of type UI5 component.")}else{p(s)}function p(e){r.getServiceAsync("Ui5ComponentLoader").then(function(t){e=o(e);e.loadDefaultDependencies=false;t.createComponentData(e).then(function(e){n(e)},function(e){e=e||"";f.error("Cannot get UI5 component data: "+e,e.stack,"sap.ushell.services.CrossApplicationNavigation");a(e)})})}})})})};this.createEmptyAppState=function(e,t,n,a){f.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.createEmptyAppState'. Please use 'createEmptyAppStateAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var r=sap.ushell.Container.getService("AppState");if(!g.isA(e,"sap.ui.core.UIComponent")){throw new Error("The passed oAppComponent must be a UI5 Component.")}return r.createEmptyAppState(e,t,n,a)};this.createEmptyAppStateAsync=function(e,t,n,a){if(!g.isA(e,"sap.ui.core.UIComponent")){return Promise.reject("The passed oAppComponent must be a UI5 Component.")}return sap.ushell.Container.getServiceAsync("AppState").then(function(r){return r.createEmptyAppState(e,t,n,a)})};this.getStartupAppState=function(e){this._checkComponent(e);var t=e.getComponentData()&&e.getComponentData()["sap-xapp-state"]&&e.getComponentData()["sap-xapp-state"][0];return this.getAppState(e,t)};this._checkComponent=function(e){if(!g.isA(e,"sap.ui.core.UIComponent")){throw new Error("oComponent passed must be a UI5 Component")}};this.getAppState=function(e,t){var n;var a=new jQuery.Deferred;this._checkComponent(e);sap.ushell.Container.getServiceAsync("AppState").then(function(r){if(typeof t!=="string"){if(t!==undefined){f.error("Illegal Argument sAppStateKey ")}setTimeout(function(){n=r.createEmptyUnmodifiableAppState(e);a.resolve(n)},0);return}r.getAppState(t).done(a.resolve).fail(a.reject)});return a.promise()};this.getAppStateData=function(e){return c.invokeUnfoldingArrayArguments(this._getAppStateData.bind(this),[e])};this._getAppStateData=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(n){if(typeof e!=="string"){if(e!==undefined){f.error("Illegal Argument sAppStateKey ")}setTimeout(function(){t.resolve(undefined)},0)}else{n.getAppState(e).done(function(e){t.resolve(e.getData())}).fail(t.resolve.bind(t,undefined))}});return t.promise()};this.saveMultipleAppStates=function(e){var t=[];var n=new jQuery.Deferred;e.forEach(function(e){t.push(e.save())});jQuery.when.apply(this,t).done(function(){n.resolve(t)}).fail(function(){n.reject("save failed")});return n.promise()};this._processShellHashWithParams=function(e){if(e&&e.processParams===true&&e.target&&e.target.shellHash&&e.params){var t=h.parseShellHash(e.target.shellHash);e.target={semanticObject:t.semanticObject,action:t.action,contextRaw:t.contextRaw};e.appSpecificRoute=t.appSpecificRoute;e.params=Object.assign({},e.params,t.params)}};this.getSupportedAppStatePersistencyMethods=function(){f.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.getSupportedAppStatePersistencyMethods'. Please use 'getSupportedAppStatePersistencyMethodsAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var e=sap.ushell.Container.getService("AppState");return e.getSupportedPersistencyMethods()};this.getSupportedAppStatePersistencyMethodsAsync=function(){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){return e.getSupportedPersistencyMethods()})};this.makeStatePersistent=function(e,t,n){var a=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r.makeStatePersistent(e,t,n).done(a.resolve).fail(a.reject)});return a.promise()};this.resolveIntent=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.resolveHashFragment(e).then(function(e){t.resolve({url:e.url})}).fail(function(e){t.reject(e)})});return t.promise()}}m.hasNoAdapter=true;return m},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/DarkModeSupport", ["sap/base/Log","sap/ui/core/Configuration","sap/ui/core/Core","sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub"],function(e,t,i,a,r,n){"use strict";var s="(prefers-color-scheme: dark)";function o(){this.channel=n.createChannel({mode:undefined});this.darkMediaQueryList=window.matchMedia(s);this.doables=[];this.themeChangedCallback=null;this.darkMediaQueryListListener=null}o.Mode={LIGHT:"light",DARK:"dark"};o.prototype.setup=function(){if(this.initialized){return}this.initialized=true;this.themeChangedCallback=function(){this.channel.emit("/mode",this.getCurrentThemeMode())}.bind(this);i.attachThemeChanged(this.themeChangedCallback);this.themeChangedCallback();if(this.canAutomaticallyToggleDarkMode()&&sap.ushell.Container.getUser().getDetectDarkMode()){this.enableDarkModeBasedOnSystem()}};o.prototype.destroy=function(){this.channel.emit("/mode",null);this.doables.forEach(function(e){e.off()});this.doables=[];if(this.initialized){i.detachThemeChanged(this.themeChangedCallback);this.themeChangedCallback=null;this.disableDarkModeBasedOnSystem();this.initialized=false}};o.prototype.attachModeChanged=function(e){var t=this.channel.on("/mode").do(function(t){e(t)});this.doables.push(t)};o.prototype.canAutomaticallyToggleDarkMode=function(){var e=this.darkMediaQueryList.media===s;return e&&!new URLSearchParams(window.location.search).get("sap-theme")};o.prototype.isThemeSupportDarkMode=function(e){e=e||this._getCurrentTheme();return!!this._findSupportedThemePair(e)};o.prototype._toggleDarkModeBasedOnSystemColorScheme=function(){var e=this._getCurrentTheme();if(this.darkMediaQueryList&&this.isThemeSupportDarkMode(e)){var t=this._findSupportedThemePair(e),i=this.darkMediaQueryList.matches;var a=i?t.dark:t.light;sap.ushell.Container.getUser().applyTheme(a)}};o.prototype._applyDefaultUserTheme=function(){var e=sap.ushell.Container.getUser();if(e.constants&&e.constants.themeFormat){e.applyTheme(e.getTheme(e.constants.themeFormat.ORIGINAL_THEME))}};o.prototype.toggleModeChange=function(){var e=this._getCurrentTheme(),t=this._findSupportedThemePair(e);if(t){var i=e===t.light?t.dark:t.light;sap.ushell.Container.getUser().applyTheme(i)}};o.prototype.enableDarkModeBasedOnSystem=function(){if(!this.initialized){e.warning("Automatic dark mode detection cannot be enabled, because the DarkModeSupport service was not setup.");return}if(!this.canAutomaticallyToggleDarkMode()){e.warning("Automatic dark mode detection cannot be enabled, because your browser does not support dark mode detection");return}if(this.darkMediaQueryListListener){e.warning("Automatic dark mode detection was already enabled");return}if(a.support.matchmedialistener){this.darkMediaQueryListListener=this._toggleDarkModeBasedOnSystemColorScheme.bind(this);this.darkMediaQueryList.addListener(this.darkMediaQueryListListener)}this._toggleDarkModeBasedOnSystemColorScheme()};o.prototype.disableDarkModeBasedOnSystem=function(){if(this.darkMediaQueryListListener){this.darkMediaQueryList.removeListener(this.darkMediaQueryListListener);this.darkMediaQueryListListener=null}this._applyDefaultUserTheme()};o.prototype.getCurrentThemeMode=function(){var e=this._getCurrentTheme(),t=this._findSupportedThemePair(e);if(t){return e===t.light?o.Mode.LIGHT:o.Mode.DARK}return null};o.prototype._getCurrentTheme=function(){return t.getTheme()};o.prototype._findSupportedThemePair=function(e){var t=r.last("/core/darkMode/supportedThemes");return t.filter(function(t){return t.dark===e||t.light===e})[0]};o.hasNoAdapter=true;return o},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/EndUserFeedback", ["sap/ui/thirdparty/URI","sap/base/util/ObjectPath"],function(t,e){"use strict";function n(){this.sendFeedback=function(){return Promise.resolve()};this.getLegalText=function(){return""};this.isEnabled=function(){return Promise.reject()};this.getPathOfURL=function(e){var n=new t(e);return n.pathname()}}n.hasNoAdapter=true;return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/LaunchPage", ["sap/base/Log","sap/base/util/extend","sap/ushell/services/ContentExtensionAdapterFactory","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/Config","sap/m/library","sap/m/GenericTile"],function(e,t,r,jQuery,i,o,n,a,s){"use strict";var u=a.LoadState;function l(o){var a=this,l=[],d=r.getAdapters();this.oAdapters={default:o};d.then(function(e){t(this.oAdapters,e)}.bind(this));this.getGroups=function(){if(n.last("/core/spaces/enabled")){return(new jQuery.Deferred).resolve([]).promise()}var t=new jQuery.Deferred;d.then(function(){var r=Object.keys(a.oAdapters).map(function(e){return a._getAdapter(e).getGroups()});jQuery.when.apply(jQuery,r).done(function(){var e=[].concat.apply([],arguments);t.resolve(e)}).fail(function(){e.error("getGroups failed")})});return t.promise()};this.getGroupsForBookmarks=function(t){var r=new jQuery.Deferred;this.getGroups().then(function(o){this.getDefaultGroup().then(function(e){if(o.length>0){o=o.filter(function(e){if(t===true){return this.isGroupVisible(e)}return!this.isGroupLocked(e)&&this.isGroupVisible(e)}.bind(this));o=o.map(function(t){return{title:t===e&&i.i18n.getText("my_group")||this.getGroupTitle(t),object:t}}.bind(this))}r.resolve(o)}.bind(this),function(t){e.error("getGroupsForBookmarks - getDefaultGroup - failed: "+t.message)})}.bind(this),function(t){e.error("getGroupsForBookmarks - getGroups - failed: "+t.message)});return r.promise()};this.getGroupTilesForSearch=function(e){var t=this._getAdapter(e.contentProvider);if(t.getGroupTileClones){return t.getGroupTileClones(e)}return Promise.resolve(this.getGroupTiles(e))};this.getDefaultGroup=function(){var t=this._getAdapter().getDefaultGroup();t.fail(function(){e.error("getDefaultGroup failed")});return t};this.getGroupTitle=function(e){return this._getAdapter(e.contentProvider).getGroupTitle(e)};this.getGroupId=function(e){return this._getAdapter(e.contentProvider).getGroupId(e)};this.getGroupById=function(e){var t=new jQuery.Deferred;this.getGroups().then(function(r){t.resolve(r.find(function(t){return this.getGroupId(t)===e}.bind(this)))}.bind(this));return t.promise()};this.getGroupTiles=function(e){return this._getAdapter(e.contentProvider).getGroupTiles(e)};this.getTilesByGroupId=function(e){var t=new jQuery.Deferred,r=this;this.getGroupById(e).then(function(i){if(i){var o=r._getAdapter(i.contentProvider).getGroupTiles(i);if(o){o=o.map(function(t){return{id:r.getTileId(t),title:r.getTileTitle(t),subtitle:r.getCatalogTilePreviewSubtitle(t),url:r.getCatalogTileTargetURL(t),icon:r.getCatalogTilePreviewIcon(t),groupId:e}})}else{o=[]}t.resolve(o)}else{t.resolve([])}});return t.promise()};this.getLinkTiles=function(e){return this._getAdapter(e.contentProvider).getLinkTiles(e)};this.addGroupAt=function(t,r){var i,o=r,n=this._getAdapter();if(n.addGroupAt){i=n.addGroupAt(t,r);i.fail(function(){e.error("addGroup "+t+" failed")})}else{var a=new jQuery.Deferred;i=n.addGroup(t);i.done(function(e){var t=this.moveGroup(e,o),r=e;t.done(function(){a.resolve(r)});t.fail(function(){a.reject()})}.bind(this));i.fail(function(){e.error("addGroup "+t+" failed");a.reject()});return a.promise()}return i};this.addGroup=function(t){var r=this._getAdapter().addGroup(t);r.fail(function(){e.error("addGroup "+t+" failed")});return r};this.removeGroup=function(t,r){var i=this._getAdapter(t.contentProvider).removeGroup(t,r);i.fail(function(){e.error("Fail to removeGroup "+a.getGroupTitle(t))});return i};this.resetGroup=function(t,r){var i=this._getAdapter(t.contentProvider).resetGroup(t,r);i.fail(function(){e.error("Fail to resetGroup "+a.getGroupTitle(t))});return i};this.isGroupRemovable=function(e){return this._getAdapter(e.contentProvider).isGroupRemovable(e)};this.isGroupLocked=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupLocked==="function"){return t.isGroupLocked(e)}return false};this.isGroupFeatured=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupFeatured==="function"){return t.isGroupFeatured(e)}return false};this.moveGroup=function(t,r){var i=this._getAdapter(t.contentProvider).moveGroup(t,r);i.fail(function(){e.error("Fail to moveGroup "+a.getGroupTitle(t))});return i};this.setGroupTitle=function(t,r){var i=this._getAdapter(t.contentProvider).setGroupTitle(t,r);i.fail(function(){e.error("Fail to set Group title: "+a.getGroupTitle(t))});return i};this.hideGroups=function(t){var r=new jQuery.Deferred,i=this._getAdapter();if(typeof i.hideGroups!=="function"){r.reject("hideGroups() is not implemented in the Adapter.")}else{i.hideGroups(t).done(function(){r.resolve()}).fail(function(t){e.error("Fail to store groups visibility."+t);r.reject()})}return r.promise()};this.isGroupVisible=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupVisible==="function"){return t.isGroupVisible(e)}return true};this.addTile=function(t,r){return this._getAdapter(r.contentProvider).addTile(t,r).fail(function(r,i){e.error("Fail to add Tile: "+a.getCatalogTileId(t),i,"sap.ushell.services.LaunchPage")})};this.removeTile=function(t,r,i){var o=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(n){this._getAdapter(t.contentProvider).removeTile(t,r,i).done(function(){var e=this.getCatalogTileTargetURL(r);this.deleteURLStatesPersistentData(e,n);o.resolve()}.bind(this)).fail(function(t){e.error("Fail to remove Tile: "+this.getTileId(r));o.reject(t)}.bind(this))}.bind(this)).catch(o.reject);return o.promise()};this.moveTile=function(t,r,i,o,n,s){var u=this._getAdapter().moveTile(t,r,i,o,n,s);u.fail(function(){e.error("Fail to move Tile: "+a.getTileId(t))});return u};this.isLinkPersonalizationSupported=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.isLinkPersonalizationSupported==="function"){return r.isLinkPersonalizationSupported(e)}return false};this.getTileId=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileId(e)};this.getTileTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileTitle(e)};this.getTileType=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(r.getTileType){return r.getTileType(e)}return"tile"};this.getTileView=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t).getTileView(e);if(!jQuery.isFunction(r.promise)){r=(new jQuery.Deferred).resolve(r).promise()}return r};this.getCardManifest=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCardManifest(e)};this.getAppBoxPressHandler=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(r.getAppBoxPressHandler){return r.getAppBoxPressHandler(e)}return undefined};this.getTileSize=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileSize(e)};this.getTileTarget=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileTarget(e)};this.getTileDebugInfo=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.getTileDebugInfo==="function"){return r.getTileDebugInfo(e)}return undefined};this.isTileIntentSupported=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.isTileIntentSupported==="function"){return r.isTileIntentSupported(e)}return true};this.refreshTile=function(e){var t=e&&e.contentProvider;this._getAdapter(t).refreshTile(e)};this.setTileVisible=function(e,t){var r=e&&e.contentProvider;this._getAdapter(r).setTileVisible(e,t)};this.registerTileActionsProvider=function(e){if(typeof e!=="function"){throw new Error("Tile actions Provider is not a function")}l.push(e)};this.getTileActions=function(e){var t=[],r,i=e&&e.contentProvider,o=this._getAdapter(i);if(typeof o.getTileActions==="function"){r=o.getTileActions(e);if(r&&r.length){t.push.apply(t,r)}}for(var n=0;n<l.length;n++){r=l[n](e);if(r&&r.length){t.push.apply(t,r)}}return t};this.getCatalogs=function(){return this._getAdapter().getCatalogs()};this.isCatalogsValid=function(){return this._getAdapter().isCatalogsValid()};this.getCatalogData=function(t){var r=this._getAdapter();if(typeof r.getCatalogData!=="function"){e.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(t)}}return r.getCatalogData(t)};this.getCatalogError=function(e){return this._getAdapter().getCatalogError(e)};this.getCatalogId=function(e){return this._getAdapter().getCatalogId(e)};this.getCatalogTitle=function(e){return this._getAdapter().getCatalogTitle(e)};this.getCatalogTiles=function(t){var r=this._getAdapter().getCatalogTiles(t);r.fail(function(){e.error("Fail to get Tiles of Catalog: "+a.getCatalogTitle(t))});return r};this.getCatalogTileId=function(e){return this._getAdapter(e.contentProvider).getCatalogTileId(e)};this.getStableCatalogTileId=function(e){var t=this._getAdapter(e.contentProvider);if(t&&!t.getStableCatalogTileId){return null}return t.getStableCatalogTileId(e)};this.getCatalogTileTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileTitle(e)};this.getCatalogTileSize=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileSize(e)};this.getCatalogTileViewControl=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(typeof r.getCatalogTileViewControl==="function"){return r.getCatalogTileViewControl(e)}var i=new jQuery.Deferred;var o=this.getCatalogTileView(e);i.resolve(o);return i.promise()};this.getCatalogTileView=function(t){e.error("Deprecated API call of 'sap.ushell.LaunchPage.getCatalogTileView'. Please use 'getCatalogTileViewControl' instead",null,"sap.ushell.services.LaunchPage");var r=t&&t.contentProvider;var i=this._getAdapter(r);if(i.getCatalogTileView){return i.getCatalogTileView(t)}var o=this.getTileTitle(t)||this.getCatalogTileTitle(t);return this._createErrorTile(o,"The LaunchPageAdapter does not support getCatalogTileView")};this._createErrorTile=function(e,t){var r=new s({state:u.Failed,header:e,subheader:t||""}).addStyleClass("sapUshellTileError");return r};this.getCatalogTileTargetURL=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileTargetURL(e)};this.getCatalogTileTags=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(typeof r.getCatalogTileTags==="function"){return r.getCatalogTileTags(e)}return[]};this.getCatalogTileKeywords=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileKeywords(e)};this.getCatalogTilePreviewTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTilePreviewTitle(e)};this.getCatalogTilePreviewInfo=function(e){var t=e&&e.contentProvider;if(this._getAdapter(t).getCatalogTilePreviewInfo){return this._getAdapter(t).getCatalogTilePreviewInfo(e)}return""};this.getCatalogTilePreviewSubtitle=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(r.getCatalogTilePreviewSubtitle){return r.getCatalogTilePreviewSubtitle(e)}return undefined};this.getCatalogTilePreviewIcon=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTilePreviewIcon(e)};this.addBookmark=function(t,r,i){var o=new jQuery.Deferred;if(this._hasRequiredBookmarkParameters(t)){if(r&&this.isGroupLocked(r)){var n="Tile cannot be added, target group ("+this.getGroupTitle(r)+")is locked!";e.error(n);return o.reject(n)}this.changeURLStatesToPersistent(t.url).done(function(n){var a=r&&r.contentProvider;t.url=n;this._getAdapter(a).addBookmark(t,r,i).done(o.resolve).fail(function(){e.error("Fail to add bookmark for URL: "+t.url+" and Title: "+t.title);o.reject()})}.bind(this)).fail(function(r){e.error(r||"Fail to change url states to persistent: "+t.url);o.reject()})}return o.promise()};this.addCustomBookmark=function(t,r,i){var o=new jQuery.Deferred;if(this._hasRequiredBookmarkParameters(t)){if(r&&this.isGroupLocked(r)){var n="Tile cannot be added, target group ("+this.getGroupTitle(r)+")is locked!";e.error(n);return o.reject(n)}this.changeURLStatesToPersistent(t.url).done(function(n){var a=r&&r.contentProvider;t.url=n;this._getAdapter(a).addCustomBookmark(t,r,i).done(o.resolve).fail(function(){e.error("Fail to add bookmark for URL: "+t.url+" and Title: "+t.title);o.reject()})}.bind(this)).fail(function(r){e.error(r||"Fail to change url states to persistent: "+t.url);o.reject()})}return o.promise()};this._hasRequiredBookmarkParameters=function(t){if(!t.title){e.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration")}if(!t.url){e.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration")}return true};this.countBookmarks=function(t,r){if(!t||typeof t!=="string"){e.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL")}var i=this._getAdapter().countBookmarks(t,r);i.fail(function(){e.error("Fail to count bookmarks")});return i};this.countCustomBookmarks=function(e){if(!e.url||!e.vizType){return Promise.reject("countCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().countCustomBookmarks(e)};this.deleteBookmarks=function(t,r){var i=new jQuery.Deferred;if(!t||typeof t!=="string"){return i.reject(new Error("Missing URL")).promise()}sap.ushell.Container.getServiceAsync("AppState").then(function(o){this._getAdapter().deleteBookmarks(t,undefined,r).done(function(e){this.deleteURLStatesPersistentData(t,o);i.resolve(e)}.bind(this)).fail(function(r){e.error("Fail to delete bookmark for: "+t);i.reject(r)})}.bind(this)).catch(i.reject);return i.promise()};this.deleteCustomBookmarks=function(e){if(!e.url||!e.vizType){return Promise.reject("deleteCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().deleteCustomBookmarks(e)};this.updateBookmarks=function(t,r,i){if(!t||typeof t!=="string"){e.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL")}if(!r||typeof r!=="object"){e.error("Fail to update bookmark. No valid parameters, URL is: "+t);throw new Error("Missing parameters")}var o=new jQuery.Deferred;this.changeURLStatesToPersistent(r.url).done(function(n){r.url=n;this._getAdapter().updateBookmarks(t,r,undefined,i).done(o.resolve).fail(function(){e.error("Fail to update bookmark for: "+t);o.reject()})}.bind(this)).fail(function(t){e.error(t||"Fail to change url states to persistent: "+r.url);o.reject()});return o.promise()};this.updateCustomBookmarks=function(e,t){if(!e.url||!e.vizType||!t){return Promise.reject("updateCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().updateCustomBookmarks(e,t)};this.onCatalogTileAdded=function(e){this._getAdapter().onCatalogTileAdded(e)};this.changeURLStatesToPersistent=function(t){var r=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(i){if(i.getSupportedPersistencyMethods().length===0){r.resolve(t);return}if(t&&t.length>0){try{i.setAppStateToPublic(t).done(r.resolve).fail(r.reject)}catch(t){e.error("error in converting transient state to personal persistent when bookmark is added",t,"sap.ushell.services.LaunchPage");r.reject()}}else{r.resolve(t)}});return r.promise()};this.deleteURLStatesPersistentData=function(t,r){if(r.getSupportedPersistencyMethods().length===0){return}if(t&&t.length>0){try{var i=g(t,"sap-xapp-state"),o=g(t,"sap-iapp-state");if(i!==undefined||o!==undefined){this.countBookmarks(t).done(function(e){if(e===0){if(i!==undefined){r.deleteAppState(i)}if(o!==undefined){r.deleteAppState(o)}}})}}catch(t){e.error("error in deleting persistent state when bookmark is deleted",t,"sap.ushell.services.LaunchPage")}}};function g(e,t){var r=new RegExp("(?:"+t+"=)([^&/]+)"),i=r.exec(e),o;if(i&&i.length===2){o=i[1]}return o}}l.prototype._getAdapter=function(e){return this.oAdapters[e]||this.oAdapters.default};l.hasNoAdapter=false;return l},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Menu", ["sap/ushell/Config","sap/ushell/library","sap/ushell/utils","sap/ui/model/json/JSONModel","sap/base/util/deepClone","sap/base/Log","sap/ushell/resources"],function(e,t,n,r,i,o,a){"use strict";var s=t.ContentNodeType;function u(){this._init.apply(this,arguments)}u.prototype._init=function(e){this.oAdapter=e;this.oModel=new r([]);this.oModel.setSizeLimit(1e3);this.bIsMenuModelFilled=false;this._aBlockedList=[]};u.prototype.isMenuEnabled=function(){return this.oAdapter.isMenuEnabled()};u.prototype.getMenuEntries=function(){return this.oAdapter.getMenuEntries().then(function(t){if(e.last("/core/homeApp/enabled")){var n={title:a.i18n.getText("HomeApp.Menu.Title"),"help-id":"homeApp-menuEntry",description:"",icon:undefined,type:"IBN",target:{semanticObject:"Shell",action:"home",parameters:[],innerAppRoute:undefined},isHomeEntry:true,menuEntries:[]};t.splice(0,0,n)}return t}).then(function(e){return e.map(function(e){e.uid=n.generateUniqueId([]);if(e.menuEntries){e.menuEntries.forEach(function(e){e.uid=n.generateUniqueId([])})}return e})})};u.prototype.getSpacesPagesHierarchy=function(){var e;if(this.oAdapter.getContentNodeEntries){e=this.oAdapter.getContentNodeEntries()}else{e=this.getMenuEntries()}return e.then(function(e){return{spaces:e.reduce(function(e,t){var n;if(t.menuEntries&&t.menuEntries.length){n=this._getAccessiblePages(t.menuEntries)}else{n=this._getAccessiblePages([t])}if(n.length){e.push({title:t.title,id:n[0].spaceId,pages:n.map(function(e){return{title:e.title,id:e.id}})})}return e}.bind(this),[])}}.bind(this)).catch(function(){return{spaces:[]}})};u.prototype.getContentNodes=function(e,t){if(!e){e=Object.values(s)}t=!!t;return this.oAdapter.getContentNodes().then(function(n){n=i(n);var r=this._filterContentNodes(n,e,t);return r}.bind(this))};u.prototype._filterContentNodes=function(e,t,n){if(!Array.isArray(e)){return[]}return e.reduce(function(e,r){r.children=this._filterContentNodes(r.children,t,n);var i=t.includes(r.type);if(i||n&&r.children.length){e.push(r)}return e}.bind(this),[])};u.prototype.getDefaultSpace=function(){if(e.last("/core/menu/personalization/enabled")){return Promise.all([this.getMenuModel(),this.getContentNodes([s.Space,s.Page])]).then(function(e){var t=e[0];var n=e[1];var r=t.getData().filter(function e(t){return t.type!=="separator"&&t.pinned}).filter(function e(t){return n.some(function e(n){return t.id===n.id&&n.children.length})}).reduce(function e(t,n){return t.pinnedSortOrder<n.pinnedSortOrder?t:n},{});var i=n.find(function e(t){return r.id===t.id});return i})}return this.getContentNodes([s.Space,s.Page]).then(function(e){var t=e.find(function(e){return e.children.length});return t})};u.prototype.getMyHomeSpace=function(){if(!e.last("/core/spaces/myHome/enabled")){return Promise.resolve(null)}var t=e.last("/core/spaces/myHome/myHomeSpaceId");return this.getContentNodes([s.Space,s.Page]).then(function(e){return e.find(function(e){return e.type===s.Space&&e.id===t})||null})};u.prototype._getAccessiblePages=function(e){return e.filter(function(e){return e&&e.type==="IBN"&&e.target&&e.target.semanticObject==="Launchpad"&&e.target.action==="openFLPPage"}).map(function(e){var t=e.target.parameters.find(function(e){return e.name==="spaceId"});var n=e.target.parameters.find(function(e){return e.name==="pageId"});return{title:e.title,id:n&&n.value,spaceId:t&&t.value}})};u.prototype.hasMultiplePages=function(e){return this.getContentNodes([s.Space,s.Page]).then(function(t){var n=t.find(function(t){return t.type===s.Space&&t.id===e});return n&&n.children.length>1})};u.prototype.isSpacePageAssigned=function(e,t){return this.getContentNodes([s.Space,s.Page]).then(function(n){var r=n.find(function(t){return t.type===s.Space&&t.id===e});if(!r){return false}var i=r.children.find(function(e){return e.type===s.Page&&e.id===t});return!!i})};u.prototype.getSpaceAndPageTitles=function(e,t){return this.getContentNodes([s.Space,s.Page]).then(function(n){var r,i;r=n.find(function(t){return t.type===s.Space&&t.id===e});if(r){i=r.children.find(function(e){return e.type===s.Page&&e.id===t})}if(i){return{spaceTitle:r.label,pageTitle:i.label}}return null})};u.prototype.getMenuModel=function(){if(this.bIsMenuModelFilled){return Promise.resolve(this.oModel)}var t;if(e.last("/core/menu/personalization/enabled")){t=this._getMenuEntriesWithPersonalizationData()}else{t=this.getMenuEntries()}return t.then(function(e){var t=e;this.oModel.setData(t);this.bIsMenuModelFilled=true;return this.oModel}.bind(this))};u.prototype._getMenuEntriesWithPersonalizationData=function(){return Promise.all([this.getMenuEntries(),this.oAdapter.getMenuPersonalization()]).then(function(e){var t=e[0];var n=e[1];var r;var i={type:"separator",pinned:true};if(t[0].isHomeEntry){t.splice(1,0,i)}else{t.splice(0,0,i)}if(!n){r=t.map(function e(t,n){t.pinned=true;t.pinnedSortOrder=n;return t})}else{var o=1;if(t[0].isHomeEntry){o=2}r=t.map(function e(t){t.pinned=n.pinnedSpaces.includes(t.id);t.pinnedSortOrder=n.pinnedSpaces.indexOf(t.id);if(t.pinnedSortOrder>-1){t.pinnedSortOrder=t.pinnedSortOrder+o}return t});t[0].pinned=true;t[0].pinnedSortOrder=0;if(t[0].isHomeEntry){t[1].pinned=true;t[1].pinnedSortOrder=1}}return r})};u.prototype._extractPersonalization=function(){var e={version:"1.0.0",pinnedSpaces:[]};var t=this.oModel.getData();e.pinnedSpaces=t.filter(function e(t){return!t.isHomeEntry&&t.type!=="separator"&&t.pinned}).sort(function(e,t){return e.pinnedSortOrder-t.pinnedSortOrder}).map(function(e){return e.id});return e};u.prototype.savePersonalization=function(){var e=this._extractPersonalization();return sap.ushell.Container.getServiceAsync("Personalization").then(function(t){var n;n={container:"sap.ushell.menuPersonalization",item:"data"};var r={validity:"Infinity",keyCategory:t.constants.keyCategory.FIXED_KEY,writeFrequency:t.constants.writeFrequency.HIGH,clientStorageAllowed:false};return new Promise(function(i,o){t.getPersonalizer(n,r).setPersData(e).done(i).fail(o)})})};u.prototype.moveMenuEntry=function(e,t){var n=this.oModel.getData();var r=n.find(function(t){return t.pinnedSortOrder===e});r.pinnedSortOrder=t-.5;n.map(function(e){return e}).sort(function(e,t){return e.pinnedSortOrder-t.pinnedSortOrder}).forEach(function(e,t){e.pinnedSortOrder=t});this.oModel.refresh(true)};u.prototype.isPinned=function(t){if(e.last("/core/menu/personalization/enabled")===false){return Promise.resolve(true)}return this.getMenuModel().then(function(e){return e.getData().some(function(e){return e.id===t&&e.pinned})})};u.prototype.isWorkPage=function(e){if(this.oAdapter.isWorkPage){return this.oAdapter.isWorkPage(e)}return Promise.resolve(false)};u.prototype._getNodeInfo=function(e,t,n,r){var i;for(var o=0;o<t.length;o++){if(!n){r=this._getManagerIdInNodeTree(e,t[o])}if(t[o].id===e){return{node:t[o],isRootNode:!n,managerId:r||null}}if(t[o].menuEntries&&t[o].menuEntries.length>0){i=this._getNodeInfo(e,t[o].menuEntries,true,r);if(i.node){return i}}}return{node:null,isRootNode:false,managerId:null}};u.prototype._nodeManagementPermitted=function(e,t,n){var r=this._getNodeInfo(e,t);if(!r.node){o.error("Node with id "+e+" cannot be found and will be skipped.");return false}if(!!r.managerId&&r.managerId!==n){o.error("Node with id "+e+" cannot be managed by '"+n+"'"+" because it is already managed by '"+r.managerId+"'.");return false}return true};u.prototype._getManagerIdInNodeTree=function(e,t,n){if(t.id===e){return n||t.managerId}if(t.managerId){n=t.managerId}if(t.menuEntries&&t.menuEntries.length>0){for(var r=0;r<t.menuEntries.length;++r){n=this._getManagerIdInNodeTree(e,t.menuEntries[r],n)}return n}return null};u.prototype._updateNode=function(e,t,r){var o=i(r||{});function a(e){if(e){e.uid=e.uid||n.generateUniqueId([]);(e.menuEntries||[]).forEach(a)}}a(o);return t.map(function(t){if(t.id===e){return o}if(t.menuEntries&&t.menuEntries.length>0){t.menuEntries=this._updateNode(e,t.menuEntries,o)}return t}.bind(this))};u.prototype._createEntryProviders=function(e,t,n){var r=n.getData();var i={};var o;for(var a=0;a<t.length;++a){o=t[a];if(!this._nodeManagementPermitted(o,r,e)){continue}i[o]={setData:function(e,t){var i=this._updateNode(e,r,t);n.setData(i)}.bind(this,o)}}return i};u.prototype._isManagerBlocked=function(e){return this._aBlockedList.indexOf(e)>-1};u.prototype._setManagerBlocked=function(e){this._aBlockedList.push(e)};u.prototype.getEntryProvider=function(e,t){if(this._isManagerBlocked(e)){o.error("ManagerId '"+e+"' is already listed as an entry manager.");return Promise.reject("ManagerId "+e+" is already listed as an entry manager.")}this._setManagerBlocked(e);return this.getMenuModel().then(function(n){return this._createEntryProviders(e,t,n)}.bind(this))};u.hasNoAdapter=false;return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Message", ["sap/base/Log","sap/m/MessageBox","sap/ushell/Config","sap/ushell/resources","sap/m/Dialog","sap/m/Text","sap/m/Link","sap/m/Button","sap/m/VBox","sap/m/FormattedText","sap/m/library","sap/ui/core/library"],function(e,t,n,i,o,s,a,r,l,c,u,p){"use strict";var d=u.ButtonType;var f=u.DialogType;var h=p.ValueState;var g=u.FlexRendertype;function m(){var u;this.init=function(e){u=e;return this};this.show=function(t,n,i){if(!n){e.error("Message must not be empty.");return}if(u&&typeof u==="function"){u(t,n,i||{})}else{this.buildMessage(t,n,i||{})}};this.buildMessage=function(e,n,i){var o={title:i.title,actions:i.actions,details:i.details,onClose:i.callback,emphasizedAction:i.emphasizedAction},s;switch(e){case m.Type.ERROR:this._createAndOpenErrorDialog(n,o);return;case m.Type.CONFIRM:if(!i.actions){s="confirm"}else if(i.actions.indexOf("DELETE")>-1){s="warning";o.emphasizedAction=t.Action.DELETE}else{o.icon=t.Icon.QUESTION;s="show"}break;case m.Type.INFO:s="info";this.buildAndSendMessageToast(n,i.duration||3e3);return;default:o={duration:i.duration||3e3};s="show";break}this.sendMessageBox(n,s,o)};this._copyToClipboard=function(e,t,n){var o=t.details;if(typeof t.details==="object"){o=JSON.stringify(t.details,null,"\t")}var s=["Title: "+(n||"-"),"Message: "+(e||"-"),"Details: "+(o||"-")];var a=document.activeElement,r=document.createElement("textarea"),l;try{r.contentEditable=true;r.readonly=false;r.innerText=s.join("\n");document.documentElement.appendChild(r);if(navigator.userAgent.match(/ipad|iphone/i)){var c=document.createRange();c.selectNodeContents(r);window.getSelection().removeAllRanges();window.getSelection().addRange(c);r.setSelectionRange(0,999999)}else{r.select()}var u=document.execCommand("copy");l=u?"CopyWasSuccessful":"CopyWasNotSuccessful"}catch(e){l="CopyWasNotSuccessful"}finally{this.buildAndSendMessageToast(i.i18n.getText(l));document.documentElement.removeChild(r);window.getSelection().removeAllRanges();a.focus()}};this._createAndOpenErrorDialog=function(e,t){var o=t.details;var s;if(o){s=new c({htmlText:typeof o==="object"?o.info:o})}var a=this.errorWithDetails(e,s,t.title);if(sap.ushell.Container&&n.last("/core/extension/SupportTicket")&&e!==i.i18n.getText("supportTicketCreationFailed")){a.addButton(new r({text:i.i18n.getText("contactSupportBtn"),tooltip:i.i18n.getText("contactSupportBtn_tooltip"),press:function(){sap.ui.require(["sap/ushell/ui/footerbar/ContactSupportButton"],function(e){var t=new e;if(t){t.showContactSupportDialog();t.destroy()}});a.close()}}))}if(document.queryCommandSupported("copy")){a.addButton(new r({text:i.i18n.getText("CopyToClipboardBtn"),tooltip:i.i18n.getText("CopyToClipboardBtn_tooltip"),press:this._copyToClipboard.bind(this,e,t,a.getTitle())}))}a.addButton(new r({text:i.i18n.getText("closeBtn"),type:d.Emphasized,press:a.close.bind(a)}))};this.buildAndSendMessageToast=function(e,t){sap.ui.require(["sap/m/MessageToast"],function(n){n.show(e,{duration:t})})};this.sendMessageBox=function(n,i,o){if(typeof t[i]==="function"){t[i](n,o)}else{e.error("Unknown Message type: "+i,null,"Message Service")}};this.info=function(e,t){this.show(m.Type.INFO,e,{duration:t||3e3})};this.error=function(t,n){e.error(t);this.show(m.Type.ERROR,t,{title:n})};this.confirm=function(e,t,n,i){this.show(m.Type.CONFIRM,e,{title:n,callback:t,actions:i})};this.errorWithDetails=function(e,t,n,c){if(Array.isArray(t)){c=t;t=null}if(typeof t==="string"){c=n;n=t;t=null}var u=new s({text:e,visible:!!e});if(t){u.addStyleClass("sapUiSmallMarginBottom")}var p=new o({state:h.Error,type:f.Message,contentWidth:"30rem",title:n||i.i18n.getText("error"),content:[new l({renderType:g.Bare,items:[u,new a({text:i.i18n.getText("ViewDetails"),visible:!!t,press:function(){p.getContent()[0].addItem(t);this.destroy()}})]})],buttons:c,endButton:new r({text:i.i18n.getText("closeBtn"),type:d.Emphasized,press:function(){p.close()}}),afterClose:function(){this.destroy()}}).addStyleClass("sapContrastPlus");p.open();return p};this.Type=m.Type}m.Type={INFO:0,ERROR:1,CONFIRM:2};m.hasNoAdapter=true;return m});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/MessageBroker", ["sap/ushell/services/_MessageBroker/MessageBrokerEngine","sap/base/Log"],function(e,n){"use strict";var t={};var r=function(r,i,o){t=o&&o.config||{};e.setEnabled(this.isEnabled());if(!this.isEnabled()){n.warning("FLP's message broker service is disabled by shell configuration")}};r.prototype.isEnabled=function(){if(t.enabled===undefined||t.enabled===true){return true}return false};r.prototype.connect=function(n){return e.connect(n)};r.prototype.disconnect=function(n){return e.disconnect(n)};r.prototype.subscribe=function(n,t,r,i){return e.subscribe(n,t,r,i)};r.prototype.unsubscribe=function(n,t){return e.unsubscribe(n,t)};r.prototype.publish=function(n,t,r,i,o,s){return e.publish(n,t,r,i,o,s)};r.prototype.addAcceptedOrigin=function(n){e.addAcceptedOrigin(n)};r.prototype.removeAcceptedOrigin=function(n){e.removeAcceptedOrigin(n)};r.prototype.getAcceptedOrigins=function(){return e.getAcceptedOrigins()};r.hasNoAdapter=true;return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/NavTargetResolution", ["sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/utils/UrlShortening","sap/ushell/utils/HttpClient","sap/ushell/navigationMode","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/base/Log"],function(e,t,n,i,r,a,jQuery,s,o,l,u){"use strict";function c(c,p,f,h){var d=h&&h.config,g=function(e){var t=this._isClientSideTargetResolutionEnabled()?this._resolveHashFragmentClientSide(e):c.resolveHashFragment(e);return t}.bind(this),v,m=[{name:"DefaultAdapter",isApplicable:function(){return true},resolveHashFragment:g.bind(this)}],S;var b=new r;this._isClientSideTargetResolutionEnabled=function(){return!!(d&&d.enableClientSideTargetResolution)};this._nextResolveHashFragment=function(e,t){var n=e.pop();if(n.isApplicable(t)){u.info("NavTargetResolution: custom resolver "+n.name+" resolves "+t);var i=this._nextResolveHashFragment.bind(this,e);return n.resolveHashFragment(t,i)}return this._nextResolveHashFragment(e,t)};this._resolveHashFragmentClientSide=function(e){var t=this._validateHashFragment(e),n;if(!t.success){return(new jQuery.Deferred).reject(e+" is not a valid hash fragment").promise()}n=t.hashFragmentWithoutHash;return this._resolveHashFragmentClientSideAndFixApplicationType(n)};this._resolveHashFragmentClientSideAndFixApplicationType=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(n){n.resolveHashFragment(e).done(function(e){if(e&&e.applicationType==="SAPUI5"){e.applicationType="URL"}t.resolve(e)}).fail(t.reject)}).catch(t.reject);return t.promise()};this._validateHashFragment=function(e){var n="",i={success:false};if(e&&e.charAt(0)!=="#"){throw new t.Error("Hash fragment expected in _validateHashFragment","sap.ushell.services.NavTargetResolution")}n=e.substring(1);if(n){i.success=true}i.hashFragmentWithoutHash=n;return i};this.expandCompactHash=function(e){var t,r=new jQuery.Deferred;t=n.parseShellHash(e);if(t&&t.params&&t.params["sap-intent-param"]){sap.ushell.Container.getServiceAsync("AppState").then(function(n){n.getAppState(t.params["sap-intent-param"][0]).done(function(t){var n=t.getData("sap-intent-param");var a=e;if(n){a=i.expandParamGivenRetrievalFunction(e,"sap-intent-param",function(){return n})}r.resolve(a)}).fail(function(){r.resolve(e)})}).catch(r.reject)}else{r.resolve(e)}return r.promise()};var R=["NWBC","WDA","TR"];this._adjustResolutionResultForUi5Components=function(e){var t,n;if(typeof e!=="object"){return}delete e["sap.platform.runtime"];if(e&&e.applicationType&&e.applicationType==="SAPUI5"){e.applicationType="URL"}if(e.applicationType==="URL"){t=/^SAPUI5\.Component=(.*)/.exec(e.additionalInformation);n=t&&t[1];if(n){e.ui5ComponentName=n}}};this._getSapSystem=function(e,t){var n;if(t&&t["sap-system"]){return t["sap-system"]}if(t&&t.url){n=new URL(t.url,window.location.href).searchParams.get("sap-system");if(n){return n}}if(R.indexOf(t.applicationType)>=0&&e&&e.substring(1)){n=new URL(e.substring(1),window.location.href).searchParams.get("sap-system");if(n){return n}}return undefined};this.resolveTarget=function(e){var i;var r=o({},e);var a=new jQuery.Deferred;s.average("sap.ushell.navigation.resolveTarget");t.storeSapSystemToLocalStorage(r);i=n.constructShellHash(r);sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(e){e.resolveHashFragment("#"+i).done(function(e){s.end("sap.ushell.navigation.resolveTarget");a.resolve({url:e.url,text:e.text,externalNavigationMode:e.targetNavigationMode==="explace"})}).fail(a.reject)}).catch(a.reject);return a.promise()};this.resolveHashFragment=function(t){var n=new jQuery.Deferred;s.average("sap.ushell.navigation.resolveHashFragment");this.expandCompactHash(t).done(function(i){var r=jQuery.when();if(i.indexOf("sap-ushell-enc-test")>=0){var o=/sap-ushell-enc-test=([^&]*)(&.*)?$/.exec(i);if(o){var u=o[1];if(u!=="A%20B%2520C"){r=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Message").then(function(e){e.error("This navigation is flagged as erroneous because"+" (likely the calling procedure) generated a wrong encoded hash."+" Please track down the encoding error and make sure to use the CrossApplicationNavigation service for navigation.","Navigation encoding wrong");r.resolve()}).catch(r.reject)}i=i.replace(/sap-ushell-enc-test=([^&]*)&/,"");i=i.replace(/[&?]sap-ushell-enc-test=([^&]*)$/,"")}}var p=this._invokeResolveHashChain(i);if(typeof c.processPostResolution==="function"){p=c.processPostResolution(i,p)}jQuery.when(p,r).done(function(i){this._adjustResolutionResultForUi5Components(i);if(l(i)){if(!i.hasOwnProperty("navigationMode")){i.navigationMode=a.getNavigationMode(i,e.getCurrentApplication())}i.targetNavigationMode=a.getExternalNavigationMode(i.navigationMode)}if(l(i)&&!i.hasOwnProperty("sap-system")){var r=this._getSapSystem(t,i);if(r){i["sap-system"]=r}}s.end("sap.ushell.navigation.resolveHashFragment");n.resolve(i)}.bind(this)).fail(n.reject)}.bind(this)).fail(n.reject);return n.promise().done(function(e){return this._recordNavigation("resolveHashFragment",{sHashFragment:t},e)}.bind(this))};this._invokeResolveHashChain=function(e){var t=m.map(function(e){return e});return this._nextResolveHashFragment(t,e).done(function(e){S=e})};this.baseResolveHashFragment=g.bind(this);this._getGetLinksResolver=function(e){var t;if(this._isClientSideTargetResolutionEnabled()){t=this._getLinksClientSide.bind(this);return{resolver:t,warning:undefined,isGetSemanticObjectLinksCall:false}}if(Object.prototype.toString.apply(e.paramsOptions)==="[object Array]"&&e.paramsOptions.length>0){u.warning("Parameter options supplied to #getLinks will be ignored because FLP is not configured to use sap.ushell.services.ClientSideTargetResolution for target resolution","provided parameters options: "+JSON.stringify(e.paramsOptions,null,4),"sap.ushell.services.NavTargetResolution")}t=c&&c.getLinks&&c.getLinks.bind(c);if(t){return{resolver:t,warning:undefined,isGetSemanticObjectLinksCall:false}}t=c&&c.getSemanticObjectLinks&&c.getSemanticObjectLinks.bind(c);if(t){return{resolver:t,warning:e.hasOwnProperty("action")?"the action argument was given, however, NavTargetResolutionAdapter does not implement getLinks method. Action will be ignored.":undefined,isGetSemanticObjectLinksCall:true}}return{resolver:undefined,warning:"Cannot determine resolver for getLinks method",isGetSemanticObjectLinksCall:undefined}};this.getLinks=function(e){var t=e.semanticObject;var n=e.params;var i=e.ignoreFormFactor;var r=e.ui5Component;var a=e.appStateKey;var s=e.compactIntents;var o=new jQuery.Deferred;if(/\?/.test(t)){throw new Error("Parameter must not be part of semantic object")}var l=n===undefined?undefined:JSON.parse(JSON.stringify(n));if(a){l=l||{};l["sap-xapp-state"]=encodeURIComponent(a)}var c=this._getGetLinksResolver(e);if(c.warning){u.warning("A problem occurred while determining the resolver for getLinks",c.warning,"sap.ushell.services.NavTargetResolution")}var p=c.resolver;if(p){var f=function(e){if(s){this._shortenGetSemanticObjectLinksResults(e,r).done(o.resolve)}else{o.resolve(e)}}.bind(this);if(c.isGetSemanticObjectLinksCall){var h={target:{semanticObject:t,action:"dummyAction"},params:l};sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.hrefForExternal(h,true,r,true).done(function(e){var n=e.params||l;p(t,n,i).done(f).fail(o.reject)}).fail(o.reject)})}else{p(e).done(f).fail(o.reject)}}else{o.resolve([])}return o.promise().done(function(t){return this._recordNavigation("getLinks",{oArgs:e},t)}.bind(this))};this.getDistinctSemanticObjects=function(){var e=new jQuery.Deferred;if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(t){t.getDistinctSemanticObjects().done(e.resolve).fail(e.reject)}).catch(e.reject);return e.promise().done(function(e){return this._recordNavigation("getDistinctSemanticObjects",{},e)}.bind(this))}if(c&&c.getDistinctSemanticObjects){return c.getDistinctSemanticObjects.call(c)}u.error("Cannot execute getDistinctSemanticObjects method","ClientSideTargetResolution must be enabled or NavTargetResolutionAdapter must implement getDistinctSemanticObjects method","sap.ushell.services.NavTargetResolution");return e.reject("Cannot execute getDistinctSemanticObjects").promise()};this._getLinksClientSide=function(e){var t=new jQuery.Deferred;var i=new jQuery.Deferred;if((e.params||{}).hasOwnProperty("sap-intent-param")){var r="#"+e.semanticObject+"-dummyAction?"+n.paramsToString(e.params);this.expandCompactHash(r).done(function(e){var t=n.parseShellHash(e);i.resolve(t.params)}).fail(t.reject)}else{i.resolve(e.params)}i.done(function(){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(n){n.getLinks(e).done(t.resolve).fail(t.reject)}).catch(t.reject)});return t.promise()};this._shortenGetSemanticObjectLinksResults=function(e,t){var i=[];var r=0;var a=e.length;var s=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(o){e.forEach(function(e){var l=n.parseShellHash(e.intent);var c=o.compactParams(l.params,undefined,t);i.push(c);i[r].done(function(t,r){i[t]={text:e.text,intent:"#"+l.semanticObject+"-"+l.action+"?"+n.paramsToString(r)}}.bind(null,r)).fail(function(t,n){u.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+n+"; intent had title ''"+e.title+"'' and link ''"+e.intent+"'","sap.ushell.services.NavTargetResolution");i[t]={text:e.text,intent:e.intent}}.bind(null,r)).always(function(){a--;if(a===0){s.resolve(i)}});r++})}).catch(s.reject);return s.promise()};this.isIntentSupported=function(e){var t={};var n=new jQuery.Deferred;if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(t){t.isIntentSupported(e).done(n.resolve).fail(n.reject)}).catch(n.reject);return n.promise()}if(c.isIntentSupported){return c.isIntentSupported(e)}e.forEach(function(e){t[e]={supported:undefined}});return n.resolve(t).promise()};this.isNavigationSupported=function(e){var t=new jQuery.Deferred,i=[];i=e.map(function(e){if(typeof e==="string"){return e}return"#"+n.constructShellHash(e)});this.isIntentSupported(i).done(function(e){var n=i.map(function(t){return e[t]||{supported:false}});t.resolve(n)}).fail(t.reject.bind(t));return t.promise().done(function(t){return this._recordNavigation("isNavigationSupported",{aIntents:e},t)}.bind(this))};this._recordNavigation=function(e,t,n){var i=d&&d.usageRecorder||{};if(i.enabled){var r=i.serviceUrl||"/navigation/api/v2/record";b.post(r,{headers:{"content-type":"application/json; charset=utf-8"},data:{function:e,parameters:JSON.stringify(t),result:JSON.stringify(n)}})}return n};this.registerCustomResolver=function(e){if(typeof e.name!=="string"){u.error("NavTargetResolution: Custom Resolver must have name {string} member");return false}if(typeof e.isApplicable!=="function"){u.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false}if(typeof e.resolveHashFragment!=="function"){u.error('NavTargetResolution: Custom Resolver must have "resolveHashFragment" member');return false}m.push(e);return true};if(d&&Array.isArray(d.resolveLocal)){v=d.resolveLocal.map(function(e){return e.linkId});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(e){if(e===""){return"#"}var t=n.parseShellHash(e.substring(1));if(!t){return"#"}e="#"+t.semanticObject+"-"+t.action;return e},_getIndex:function(e){var t=this.cleanHash(e);return v.indexOf(t.substring(1))},isApplicable:function(e){return this._getIndex(e)>=0},resolveHashFragment:function(e){var t,i=this._getIndex(e),r,a,s,o;t=new jQuery.Deferred;r=JSON.parse(JSON.stringify(d.resolveLocal[i].resolveTo));a=n.parseShellHash(e);if(a&&a.params){o=n.paramsToString(a.params);if(o){s=r.url.indexOf("?")>=0;r.url=r.url+(s?"&":"?")+o}}t.resolve(r);return t.promise()}})}this.registerCustomResolver({name:"LocalResolver",aElement:undefined,cleanHash:function(e){if(e===""){return undefined}var t=n.parseShellHash(e.substring(1));if(!t){return undefined}e="#"+t.semanticObject+"-"+t.action;return e},isApplicable:function(e){e=this.cleanHash(e);if(!e){return false}return e==="#Test-url"||e==="#Test-local1"||e==="#Test-local2"||e==="#Test-config"||e==="#Test-clear"},parseUrl:function(e){if(!this.aElement){this.aElement=window.document.createElement("a")}this.aElement.href=e;return this.aElement},resolveHashFragment:function(e){var n=new jQuery.Deferred,i=null,r,a,s,o,l,c=this;e=this.cleanHash(e);if(!e){return false}i={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},none:{applicationType:"URL",url:"",additionalInformation:""}};function p(e){if(localStorage){return localStorage[e]}return undefined}function f(e){if(t.calculateOrigin(c.parseUrl(e))!==t.calculateOrigin(window.location)){return undefined}return e}function h(e){return new URLSearchParams(window.location.search).get(e)}function g(e,t){if(localStorage){localStorage[e]=t}}if(i[e]){r=i[e]}else if(e==="#Test-clear"){g("sap.ushell.#Test-local1",undefined);g("sap.ushell.#Test-local2",undefined);u.info("NavTargetResolution: Local storage keys for #Test have been cleared");r=i["#Test-config"]}else if(e==="#Test-local1"||e==="#Test-local2"||e==="#Test-url"){r=p("sap.ushell."+e);if(!r||r==="undefined"){a={applicationType:"URL"}}else{a=JSON.parse(r)}if(window.location.hostname==="localhost"||d&&d.allowTestUrlComponentConfig){o="sap-ushell-test-"+e.substring(6);s=h(o+"-additionalInformation");if(s){a.additionalInformation=s}l=h(o+"-url");if(l){a.url=f(l)}}if(!a.url){u.info("NavTargetResolution: No configured app for "+e+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");u.info("NavTargetResolution: Defaulting to config app ...\n");n.reject("URL is not resolvable");return n.promise()}a.url=f(a.url);r=a}if(r.url===undefined){n.reject("URL is not resolvable");return n.promise()}u.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent(r&&r.url||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent(r&&r.additionalInfo||"")+"#Test-local1");u.info("NavTargetResolution: Resolving "+e+" to "+JSON.stringify(r));n.resolve(r);return n.promise()}});this.getCurrentResolution=function(){return S}}c.hasNoAdapter=false;return c},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/NavigationDataProvider", ["sap/ushell/resources"],function(t){"use strict";function i(){this.S_COMPONENT_NAME="sap.ushell.services.NavigationDataProvider";this._init.apply(this,arguments)}i.prototype._init=function(t,i){this.oAdapter=t};i.prototype.getNavigationData=function(){return new Promise(function(i,e){var s=this.oAdapter.getSystemAliases&&this.oAdapter.getSystemAliases()||{};this.oAdapter.getInbounds().then(function(t){i({systemAliases:s,inbounds:t})}).fail(function(i){var s={component:this.S_COMPONENT_NAME,description:t.i18n.getText("NavigationDataProvider.CannotLoadData"),detail:i};e(s)}.bind(this))}.bind(this))};i.hasNoAdapter=false;return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Notifications", ["sap/base/Log","sap/ui/core/Core","sap/ui/core/Configuration","sap/ui/core/ws/SapPcpWebSocket","sap/ui/model/json/JSONModel","sap/ui/thirdparty/datajs","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/ushell/utils"],function(e,t,i,s,n,o,r,jQuery,a){"use strict";var c="/sap/bc/apc/iwngw/notification_push_apc";var u=60;function f(f,d,l){var g=new n,h=new Date,p=l&&l.config,N={getNotifications:{},getNotificationsByType:{},getNotificationsInGroup:{},getBadgeNumber:{},resetBadgeNumber:{},getNotificationTypesSettings:{},getNotificationsGroupHeaders:{},getMobileSupportSettings:{},getEmailSupportSettings:{},getWebSocketValidity:{},getNotificationCount:{}},v,_,S,T,I=[],C=[],m=[],b=false,y=[],D=false,E=false,A=true,P,O,B=5e3,R=6e3,k=false,U={NOTIFICATIONS:0,NOTIFICATIONS_BY_TYPE:1,GET_BADGE_NUMBER:2,RESET_BADGE_NUMBER:3,GET_SETTINGS:4,GET_MOBILE_SUPPORT_SETTINGS:5,NOTIFICATIONS_GROUP_HEADERS:6,NOTIFICATIONS_IN_GROUP:7,GET_NOTIFICATIONS_COUNT:8,VALIDATE_WEBSOCKET_CHANNEL:9,GET_EMAIL_SUPPORT_SETTINGS:10,NOTIFICATIONS_BY_DATE_DESCENDING:"notificationsByDateDescending",NOTIFICATIONS_BY_DATE_ASCENDING:"notificationsByDateAscending",NOTIFICATIONS_BY_PRIORITY_DESCENDING:"notificationsByPriorityDescending",NOTIFICATIONS_BY_TYPE_DESCENDING:"notificationsByTypeDescending"},F={PACKAGED_APP:0,FIORI_CLIENT:1,WEB_SOCKET:2,POLLING:3},G,q=false,w=true,L=false,M=new jQuery.Deferred,H=new jQuery.Deferred,j,W,X=M.promise(),x=false,$={},z=10,J=false,Y=false,V=[];this.isEnabled=function(){if(!p.enabled||!p.serviceUrl){A=false;if(p.enabled&&!p.serviceUrl){e.warning("No serviceUrl was found in the service configuration")}}else{A=true}return A};this.init=function(){if(!D&&this.isEnabled()){t.getEventBus().subscribe("launchpad","sessionTimeout",this.destroy,this);this.lastNotificationDate=new Date;this._setWorkingMode();D=true;this.bUpdateDependencyInitiatorExists=false;this._userSettingInitialization()}t.getEventBus().subscribe("launchpad","setConnectionToServer",this._onSetConnectionToServer,this)};this._onSetConnectionToServer=function(e,t,i){if(i.active){this._resumeConnection()}else{this._closeConnection()}};this.getUnseenNotificationsCount=function(){var e=new jQuery.Deferred;e.resolve(g.getProperty("/UnseenCount"));return e.promise()};this.getNotificationsCount=function(){return g.getProperty("/NotificationsCount")?g.getProperty("/NotificationsCount"):"0"};this.getNotificationsByTypeWithGroupHeaders=function(){var t={"Accept-Language":i.getLanguageTag()},s,n=new jQuery.Deferred,r=this._getRequestURI(U.NOTIFICATIONS_BY_TYPE);s={requestUri:r};if(!this._getHeaderXcsrfToken()){t["X-CSRF-Token"]="fetch"}s.headers=t;o.request(s,function(e){n.resolve(e)},function(t){if(t.response&&t.response.statusCode===200&&t.response.body){n.resolve(t.response.body)}else{n.reject(t);e.error("Notification service - oData executeAction failed: ",t,"sap.ushell.services.Notifications")}});return n.promise()};this.getNotificationsGroupHeaders=function(){var t={"Accept-Language":i.getLanguageTag()},s,n=new jQuery.Deferred,r=this._getRequestURI(U.NOTIFICATIONS_GROUP_HEADERS);s={requestUri:r};if(!this._getHeaderXcsrfToken()){t["X-CSRF-Token"]="fetch"}s.headers=t;o.request(s,function(e){n.resolve(e)},function(t){if(t.response&&t.response.statusCode===200&&t.response.body){n.resolve(t.response.body)}else{n.reject();e.error("Notification service - oData executeAction failed: ",t,"sap.ushell.services.Notifications")}});return n.promise()};this.getNotificationsBufferInGroup=function(t,s,n){var r=this,a={"Accept-Language":i.getLanguageTag()},c,u=new jQuery.Deferred,f={group:t,skip:s,top:n},d,l,g=this._getRequestURI(U.NOTIFICATIONS_IN_GROUP,f);if(x===true){d=$[U.NOTIFICATIONS_IN_GROUP].slice(s,s+n);l=JSON.stringify({"@odata.context":"$metadata#Notifications",value:d});setTimeout(function(){u.resolve(l)},1e3)}else{c={requestUri:g};if(!this._getHeaderXcsrfToken()){a["X-CSRF-Token"]="fetch"}c.headers=a;o.request(c,function(e){r._updateCSRF(e.response);u.resolve(e.value)},function(t){if(t.response&&t.response.statusCode===200&&t.response.body){r._updateCSRF(t.response);u.resolve(JSON.parse(t.response.body).value)}else{u.reject();e.error("Notification service - oData executeAction failed: ",t,"sap.ushell.services.Notifications")}})}return u.promise()};this.getNotificationsBufferBySortingType=function(t,s,n){var r=this,a={"Accept-Language":i.getLanguageTag()},c,u=new jQuery.Deferred,f={skip:s,top:n},d,l,g=this._getRequestURI(t,f);if(x===true){d=$[t].slice(s,s+n);l=JSON.stringify({"@odata.context":"$metadata#Notifications",value:d});setTimeout(function(){u.resolve(l)},1e3)}else{c={requestUri:g};if(!this._getHeaderXcsrfToken()){a["X-CSRF-Token"]="fetch"}c.headers=a;o.request(c,function(e){r._updateCSRF(e.response);u.resolve(e.value)},function(t){if(t.response&&t.response.statusCode===200&&t.response.body){r._updateCSRF(t.response);u.resolve(JSON.parse(t.response.body).value)}else{u.reject();e.error("Notification service - oData executeAction failed: ",t,"sap.ushell.services.Notifications")}})}return u.promise()};this.getNotifications=function(){var e,t=new jQuery.Deferred;if(G===F.FIORI_CLIENT||G===F.PACKAGED_APP){e=this._readNotificationsData(false);e.done(function(){t.resolve(g.getProperty("/Notifications"))}).fail(function(){t.reject()})}else{t.resolve(g.getProperty("/Notifications"))}return t.promise()};this.executeBulkAction=function(e,t){var i=new jQuery.Deferred,s=[],n=[],o={succededNotifications:s,failedNotifications:n},r=this;r.sendBulkAction(e,t).done(function(e){e.forEach(function(e,t){var i=e.NotificationId,o=e.Success;if(o){s.push(i)}else{n.push(i)}});if(n.length){i.reject(o)}else{i.resolve(o)}}).fail(function(){i.reject(o)});return i.promise()};this.dismissBulkNotifications=function(e){var t=new jQuery.Deferred,i=this;i.sendBulkDismiss(e).done(function(){t.resolve()}).fail(function(){t.reject()});return t.promise()};this.executeAction=function(t,i){var s=this,n=p.serviceUrl+"/ExecuteAction",r={NotificationId:t,ActionId:i},a={requestUri:n,method:"POST",data:r,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:O,"X-CSRF-Token":P}},c=new jQuery.Deferred;o.request(a,function(e){var t,i={isSucessfull:true,message:""};if(e&&e.response&&e.response.statusCode===200&&e.response.body){t=JSON.parse(e.response.body);i.isSucessfull=t.Success;i.message=t.MessageText}c.resolve(i)},function(n){var o,r={isSucessfull:false,message:""};if(n.response&&n.response.statusCode===200&&n.response.body){o=JSON.parse(n.response.body);r.isSucessfull=o.Success;r.message=o.MessageText;c.resolve(r)}else if(s._csrfTokenInvalid(n)&&J===false){s._invalidCsrfTokenRecovery(c,s.executeAction,[t,i])}else{c.reject(n);e.error("Notification service - oData executeAction failed: ",n,"sap.ushell.services.Notifications")}});return c.promise()};this.sendBulkAction=function(t,i){var s=this,n=p.serviceUrl+"/BulkActionByHeader",r={ParentId:t,ActionId:i},a={requestUri:n,method:"POST",data:r,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:O,"X-CSRF-Token":P}},c=new jQuery.Deferred;o.request(a,function(e){var t,i;if(e&&e.response&&e.response.statusCode===200&&e.response.body){t=JSON.parse(e.response.body);i=t.value}c.resolve(i)},function(n){var o,r;if(n.response&&n.response.statusCode===200&&n.response.body){o=JSON.parse(n.response.body);r=o.value;c.resolve(r)}else if(s._csrfTokenInvalid(n)&&J===false){s._invalidCsrfTokenRecovery(c,s.sendBulkAction,[t,i])}else{c.reject();e.error("Notification service - oData executeBulkAction failed: ",n.message,"sap.ushell.services.Notifications")}});return c.promise()};this.sendBulkDismiss=function(t){var i=this,s=p.serviceUrl+"/DismissAll",n={ParentId:t},r={requestUri:s,method:"POST",data:n,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:O,"X-CSRF-Token":P}},a=new jQuery.Deferred;o.request(r,function(){a.resolve()},function(s){if(s.response&&s.response.statusCode===200){a.resolve()}else if(i._csrfTokenInvalid(s)&&J===false){i._invalidCsrfTokenRecovery(a,i.sendBulkDismiss,[t])}else{a.reject();var n=s?s.message:"";e.error("Notification service - oData executeBulkAction failed: ",n,"sap.ushell.services.Notifications")}});return a.promise()};this.markRead=function(t){var i=this,s=p.serviceUrl+"/MarkRead",n={NotificationId:t},r={requestUri:s,method:"POST",data:n,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:O,"X-CSRF-Token":P}},a=new jQuery.Deferred;o.request(r,function(){a.resolve()},function(s){if(i._csrfTokenInvalid(s)&&J===false){i._invalidCsrfTokenRecovery(a,i.markRead,[t])}else{e.error("Notification service - oData reset badge number failed: ",s,"sap.ushell.services.Notifications");a.reject(s)}});return a.promise()};this.dismissNotification=function(t){var i=p.serviceUrl+"/Dismiss",s=this,n={NotificationId:t},r={requestUri:i,method:"POST",data:n,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:O,"X-CSRF-Token":P}},a=new jQuery.Deferred;o.request(r,function(){s._addDismissNotifications(t);a.resolve()},function(i){if(s._csrfTokenInvalid(i)&&J===false){s._invalidCsrfTokenRecovery(a,s.dismissNotification,[t])}else{a.reject(i);e.error("Notification service - oData dismiss notification failed: ",i,"sap.ushell.services.Notifications")}});return a.promise()};this.registerNotificationsUpdateCallback=function(e){I.push(e)};this.registerDependencyNotificationsUpdateCallback=function(e,t){if(t===false){this.bUpdateDependencyInitiatorExists=true}C.push({callback:e,dependent:t})};this.registerNotificationCountUpdateCallback=function(e){m.push(e)};this.notificationsSeen=function(){this._setNotificationsAsSeen()};this.isFirstDataLoaded=function(){return q};this.readSettings=function(){var e;e=this._readSettingsFromServer();return e};this.saveSettingsEntry=function(e){var t=this._writeSettingsEntryToServer(e);return t};this.getUserSettingsFlags=function(){var e=new jQuery.Deferred;if(L===true){e.resolve({highPriorityBannerEnabled:w})}else{X.done(function(){e.resolve({highPriorityBannerEnabled:w})})}return e.promise()};this.setUserSettingsFlags=function(e){w=e.highPriorityBannerEnabled;this._writeUserSettingsFlagsToPersonalization(e)};this._getNotificationSettingsMobileSupport=function(){return j};this._getDismissNotifications=function(){return V};this.filterDismisssedItems=function(e,t){return e.filter(function(e){return!t.some(function(t){return t===e.originalItemId})})};this._addDismissNotifications=function(e){if(V.indexOf(e)===-1){V.push(e)}};this._initializeDismissNotifications=function(){V=[]};this._getNotificationSettingsEmailSupport=function(){return W};this.destroy=function(){E=true;if(_){clearTimeout(_)}else if(S){clearTimeout(S)}else if(T){clearTimeout(T)}if(G===F.WEB_SOCKET&&v){v.close()}t.getEventBus().unsubscribe("launchpad","sessionTimeout",this.destroy,this);t.getEventBus().unsubscribe("launchpad","setConnectionToServer",this._onSetConnectionToServer,this)};this._readUnseenNotificationsCount=function(t){var s=this,n=new jQuery.Deferred,r=this._getRequestURI(U.GET_BADGE_NUMBER),a={requestUri:r,headers:{"Accept-Language":i.getLanguageTag()}};o.read(a,function(e,t){g.setProperty("/UnseenCount",t.data.GetBadgeNumber.Number);s._setNativeIconBadge(t.data.GetBadgeNumber.Number);n.resolve(t.data.GetBadgeNumber.Number)},function(t){if(t.response&&t.response.statusCode===200&&t.response.body){var i=JSON.parse(t.response.body);g.setProperty("/UnseenCount",i.value);s._setNativeIconBadge(i.value);n.resolve(i.value)}else{e.error("Notification service - oData read unseen notifications count failed: ",t.message,"sap.ushell.services.Notifications");n.reject(t)}});return n.promise()};this.readNotificationsCount=function(){var t=new jQuery.Deferred,s=this._getRequestURI(U.GET_NOTIFICATIONS_COUNT),n={requestUri:s,headers:{"Accept-Language":i.getLanguageTag()}};o.read(n,function(e,i){t.resolve(i.data)},function(i){if(i.response&&i.response.statusCode===200&&i.response.body){var s=JSON.parse(i.response.body);t.resolve(s.value)}else{e.error("Notification service - oData read notifications count failed: ",i.message,"sap.ushell.services.Notifications");t.reject(i)}});return t.promise()};this._getNotificationSettingsAvailability=function(){return H.promise()};this._setNotificationsAsSeen=function(){var t=this,i=new jQuery.Deferred,s=this._getRequestURI(U.RESET_BADGE_NUMBER),n={requestUri:s,method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:O,"X-CSRF-Token":P}};if(this._isFioriClientMode()===true||this._isPackagedMode()===true){this._setNativeIconBadge(0)}o.request(n,function(){i.resolve()},function(s){if(t._csrfTokenInvalid(s)&&J===false){t._invalidCsrfTokenRecovery(i,t._setNotificationsAsSeen)}else{e.error("Notification service - oData reset badge number failed: ",s,"sap.ushell.services.Notifications");i.reject(s)}});return i.promise()};this._readNotificationsData=function(e){var t=this,i,s,n,o=new jQuery.Deferred,r=[];i=this._readUnseenNotificationsCount(e);r.push(i);n=this.readNotificationsCount();n.done(function(e){g.setProperty("/NotificationsCount",e)});s=this.getNotificationsBufferBySortingType(U.NOTIFICATIONS_BY_DATE_DESCENDING,0,z);r.push(s);jQuery.when.apply(jQuery,r).then(function(){r[0].done(function(){if(e===true){t._updateNotificationsCountConsumers()}});r[1].done(function(i){g.setProperty("/Notifications",i);t._notificationAlert(i);if(e===true){t._updateNotificationsConsumers();t._updateDependentNotificationsConsumers()}o.resolve()})});return o.promise()};this._getHeaderXcsrfToken=function(){return P};this._getDataServiceVersion=function(){return O};this._getRequestURI=function(e,t){var i,s=encodeURI(this._getConsumedIntents(e));switch(e){case U.NOTIFICATIONS:if(N.getNotifications.basic===undefined){N.getNotifications.basic=p.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$filter=IsGroupHeader%20eq%20false"}if(this._isIntentBasedConsumption()){if(N.getNotifications.byIntents===undefined){N.getNotifications.byIntents=N.getNotifications.basic.concat("&intents%20eq%20"+s)}return N.getNotifications.byIntents}return N.getNotifications.basic;case U.NOTIFICATIONS_BY_TYPE:if(N.getNotificationsByType.basic===undefined){N.getNotificationsByType.basic=p.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams"}if(this._isIntentBasedConsumption()){if(N.getNotificationsByType.byIntents===undefined){N.getNotificationsByType.byIntents=N.getNotificationsByType.basic.concat("&$filter=intents%20eq%20"+s)}return N.getNotificationsByType.byIntents}return N.getNotificationsByType.basic;case U.NOTIFICATIONS_GROUP_HEADERS:if(N.getNotificationsGroupHeaders.basic===undefined){N.getNotificationsGroupHeaders.basic=p.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$filter=IsGroupHeader%20eq%20true"}if(this._isIntentBasedConsumption()){if(N.getNotificationsGroupHeaders.byIntents===undefined){N.getNotificationsGroupHeaders.byIntents=N.getNotificationsGroupHeaders.basic.concat("&intents%20eq%20"+s)}return N.getNotificationsGroupHeaders.byIntents}return N.getNotificationsGroupHeaders.basic;case U.NOTIFICATIONS_IN_GROUP:i=p.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt desc&$filter=IsGroupHeader eq false and ParentId eq "+t.group+"&$skip="+t.skip+"&$top="+t.top;if(this._isIntentBasedConsumption()===true){i=i.concat("&intents%20eq%20"+s)}break;case U.GET_BADGE_NUMBER:if(N.getBadgeNumber.basic===undefined){N.getBadgeNumber.basic=p.serviceUrl+"/GetBadgeNumber()"}if(this._isIntentBasedConsumption()){if(N.getBadgeNumber.byIntents===undefined){N.getBadgeNumber.byIntents=p.serviceUrl+"/GetBadgeCountByIntent("+s+")"}return N.getBadgeNumber.byIntents}return N.getBadgeNumber.basic;case U.GET_NOTIFICATIONS_COUNT:if(N.getNotificationCount.basic===undefined){N.getNotificationCount.basic=p.serviceUrl+"/Notifications/$count"}return N.getNotificationCount.basic;case U.RESET_BADGE_NUMBER:if(N.resetBadgeNumber.basic===undefined){N.resetBadgeNumber.basic=p.serviceUrl+"/ResetBadgeNumber"}return N.resetBadgeNumber.basic;case U.GET_SETTINGS:if(N.getNotificationTypesSettings.basic===undefined){N.getNotificationTypesSettings.basic=p.serviceUrl+"/NotificationTypePersonalizationSet"}return N.getNotificationTypesSettings.basic;case U.GET_MOBILE_SUPPORT_SETTINGS:if(N.getMobileSupportSettings.basic===undefined){N.getMobileSupportSettings.basic=p.serviceUrl+"/Channels(ChannelId='SAP_SMP')"}return N.getMobileSupportSettings.basic;case U.GET_EMAIL_SUPPORT_SETTINGS:if(N.getEmailSupportSettings.basic===undefined){N.getEmailSupportSettings.basic=p.serviceUrl+"/Channels(ChannelId='SAP_EMAIL')"}return N.getEmailSupportSettings.basic;case U.VALIDATE_WEBSOCKET_CHANNEL:if(N.getWebSocketValidity.basic===undefined){N.getWebSocketValidity.basic=p.serviceUrl+"/Channels('SAP_WEBSOCKET')"}return N.getWebSocketValidity.basic;case U.NOTIFICATIONS_BY_DATE_DESCENDING:i=p.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt%20desc&$filter=IsGroupHeader%20eq%20false&$skip="+t.skip+"&$top="+t.top;if(this._isIntentBasedConsumption()===true){i=i.concat("&intents%20eq%20"+s)}break;case U.NOTIFICATIONS_BY_DATE_ASCENDING:i=p.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt%20asc&$filter=IsGroupHeader%20eq%20false&$skip="+t.skip+"&$top="+t.top;if(this._isIntentBasedConsumption()===true){i=i.concat("&intents%20eq%20"+s)}break;case U.NOTIFICATIONS_BY_PRIORITY_DESCENDING:i=p.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=Priority%20desc&$filter=IsGroupHeader%20eq%20false&$skip="+t.skip+"&$top="+t.top;if(this._isIntentBasedConsumption()===true){i=i.concat("&intents%20eq%20"+s)}break;default:i=""}return i};this._readSettingsFromServer=function(){var t=this._getRequestURI(U.GET_SETTINGS),s={requestUri:t,headers:{"Accept-Language":i.getLanguageTag()}},n=new jQuery.Deferred;o.request(s,function(e){n.resolve(e.results)},function(t){if(t.response&&t.response.statusCode===200&&t.response.body){n.resolve(t.response.body)}else{n.reject(t);e.error("Notification service - oData get settings failed: ",t,"sap.ushell.services.Notifications")}});return n.promise()};this._readMobileSettingsFromServer=function(){return this._readChannelSettingsFromServer(U.GET_MOBILE_SUPPORT_SETTINGS)};this._readEmailSettingsFromServer=function(){return this._readChannelSettingsFromServer(U.GET_EMAIL_SUPPORT_SETTINGS)};this._readChannelSettingsFromServer=function(t){var s=this._getRequestURI(t),n={requestUri:s,headers:{"Accept-Language":i.getLanguageTag()}},r=new jQuery.Deferred,a,c;o.request(n,function(e){if(typeof e.results==="string"){a=JSON.parse(e.results);a.successStatus=true;c=JSON.stringify(a);r.resolve(c)}else{e.results.successStatus=true;r.resolve(e.results)}},function(t){if(t.response&&t.response.statusCode===200&&t.response.body){a=JSON.parse(t.response.body);a.successStatus=true;c=JSON.stringify(a);r.resolve(c)}else{r.resolve(JSON.stringify({successStatus:false}));e.error("Notification service - oData get settings failed: ",t,"sap.ushell.services.Notifications")}});return r.promise()};this._checkWebSocketActivity=function(){var t=this._getRequestURI(U.VALIDATE_WEBSOCKET_CHANNEL),s={requestUri:t,headers:{"Accept-Language":i.getLanguageTag()}},n=new jQuery.Deferred,r;o.request(s,function(e){if(typeof e.results==="string"){r=JSON.parse(e.results);n.resolve(r.IsActive)}else{n.resolve(false)}},function(t){if(t.response&&t.response.statusCode===200&&t.response.body){r=JSON.parse(t.response.body);n.resolve(r.IsActive)}else{n.resolve(false);e.error("Notification service - oData get settings failed: ",t,"sap.ushell.services.Notifications")}});return n.promise()};this._writeSettingsEntryToServer=function(t){var i=this,s,n=this._getRequestURI(U.GET_SETTINGS)+"(NotificationTypeId="+t.NotificationTypeId+")",r={requestUri:n,method:"PUT",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:O,"X-CSRF-Token":P}};r.data=JSON.parse(JSON.stringify(t));r.data["@odata.context"]="$metadata#NotificationTypePersonalizationSet/$entity";s=new jQuery.Deferred;o.request(r,function(e){s.resolve(e)},function(n){if(n.response&&n.response.statusCode===200&&n.response.body){s.resolve(n.response.body)}else if(i._csrfTokenInvalid(n)&&J===false){i._invalidCsrfTokenRecovery(s,i._writeSettingsEntryToServer,[t])}else{s.reject(n);e.error("Notification service - oData set settings entry failed: ",n,"sap.ushell.services.Notifications")}});return s.promise()};this._updateNotificationsConsumers=function(){I.forEach(function(e){e()})};this._updateDependentNotificationsConsumers=function(){var e=this,t=new jQuery.Deferred;C.forEach(function(i){if(e.bUpdateDependencyInitiatorExists===false){i.callback()}else if(i.dependent===true){i.callback(t.promise())}else{i.callback(t)}})};this._updateNotificationsCountConsumers=function(){m.forEach(function(e){e()})};this._updateAllConsumers=function(){this._updateNotificationsConsumers();this._updateNotificationsCountConsumers();this._updateDependentNotificationsConsumers()};this._getModel=function(){return g};this._getMode=function(){return G};this._setWorkingMode=function(){var e;if(p.intentBasedConsumption===true){y=this._getIntentsFromConfiguration(p.consumedIntents);if(y.length>0){b=true}}if(this._isPackagedMode()){G=F.PACKAGED_APP;e=this._getIntentsFromConfiguration(window.fiori_client_appConfig.applications);if(e.length>0){y=e}if(y.length>0){b=true}this._registerForPush();this._readNotificationsData(true);this._setNativeIconBadgeWithDelay();return}this._performFirstRead()};this._performFirstRead=function(){var t=this,i,s=this._readNotificationsData(true);s.done(function(){i=t._getFioriClientRemainingDelay();if(i<=0){t._fioriClientStep()}else{_=setTimeout(function(){t._fioriClientStep()},i)}q=true}).fail(function(t){e.error("Notifications oData read failed. Error: "+t);return})};this._fioriClientStep=function(){if(this._isFioriClientMode()){G=F.FIORI_CLIENT;this._addPushNotificationHandler();this.getUnseenNotificationsCount().done(function(e){this._setNativeIconBadge(e,function(){})}.bind(this)).fail(function(){})}else{this._webSocketStep()}};this._webSocketStep=function(){G=F.WEB_SOCKET;this._establishWebSocketConnection()};this._webSocketRecoveryStep=function(){if(k===false){k=true;S=setTimeout(function(){this._webSocketStep()}.bind(this),B)}else{this._activatePollingAfterInterval()}};this._activatePollingAfterInterval=function(){var e=p.pollingIntervalInSeconds||u;clearTimeout(T);T=setTimeout(this._activatePolling.bind(this),a.sanitizeTimeoutDelay(e*1e3))};this._activatePolling=function(){var e=p.pollingIntervalInSeconds||u;G=F.POLLING;this._readNotificationsData(true);clearTimeout(T);T=setTimeout(this._activatePolling.bind(this,e,false),a.sanitizeTimeoutDelay(e*1e3))};this._formatAsDate=function(e){return new Date(e)};this._notificationAlert=function(e){if(w===false){return}var i,s=[],n=0;for(i in e){if(this.lastNotificationDate&&this._formatAsDate(e[i].CreatedAt)>this.lastNotificationDate){if(e[i].Priority==="HIGH"){s.push(e[i])}}if(n<this._formatAsDate(e[i].CreatedAt)){n=this._formatAsDate(e[i].CreatedAt)}}if(this.lastNotificationDate&&s&&s.length>0){t.getEventBus().publish("sap.ushell.services.Notifications","onNewNotifications",s)}this.lastNotificationDate=n};this._getFioriClientRemainingDelay=function(){return R-(new Date-h)};this._establishWebSocketConnection=function(){var t=this,i=false,n;try{v=this._getWebSocketObjectObject(p.webSocketUrl||c,[s.SUPPORTED_PROTOCOLS.v10]);v.attachMessage(this,function(e){n=e.getParameter("pcpFields");if(n&&n.Command&&n.Command==="Notification"){t._readNotificationsData(true)}});v.attachOpen(this,function(){t._checkWebSocketActivity().done(function(e){if(!e){i=true;v.close();t._activatePollingAfterInterval()}});e.info("Notifications UShell service WebSocket: webSocket connection opened")});v.attachClose(this,function(s){e.warning("Notifications UShell service WebSocket: attachClose called with code: "+s.mParameters.code+" and reason: "+s.mParameters.reason);if(!E&&!i){t._webSocketRecoveryStep()}});v.attachError(this,function(){e.warning("Notifications UShell service WebSocket: attachError called!")})}catch(t){e.error("Exception occurred while creating new sap.ui.core.ws.SapPcpWebSocket. Message: "+t.message)}};this._isFioriClientMode=function(){return!(sap.FioriClient===undefined)};this._isPackagedMode=function(){return window.fiori_client_appConfig&&window.fiori_client_appConfig.prepackaged===true};this._setNativeIconBadge=function(e){if(sap.Push!==undefined&&sap.Push.setBadgeNumber!==undefined){sap.Push.setBadgeNumber(e,function(){})}};this._setNativeIconBadgeWithDelay=function(){setTimeout(function(){this.getUnseenNotificationsCount().done(function(e){this._setNativeIconBadge(e)}.bind(this)).fail(function(){})}.bind(this),4e3)};this._getIntentsFromConfiguration=function(e){var t=[];if(e&&e.length>0){var i;for(var s=0;s<e.length;s++){i=e[s].intent;t.push(i)}}return t};this._handlePushedNotification=function(e){var i,s,n,o,c=[],u;if(e!==undefined){if(e.additionalData===undefined||e.additionalData.foreground===true){this._readNotificationsData(true)}else{if(e.additionalData&&e.additionalData.NavigationTargetObject){s=e.additionalData.NavigationTargetObject}else{s=e.NavigationTargetObject}if(e.additionalData&&e.additionalData.NavigationTargetAction){n=e.additionalData.NavigationTargetAction}else{n=e.NavigationTargetAction}if(e.additionalData&&e.additionalData.NavigationTargetParam){o=e.additionalData.NavigationTargetParam}else{o=e.NavigationTargetParam}if(o){if(typeof o==="string"||o instanceof String){c[0]=o}else if(Array.isArray(o)===true){c=o}}i=e.NotificationId;if(s&&n){if(typeof r!=="undefined"&&r.getHash()===s+"-"+n){u=t.byId("viewPortContainer");if(u){u.switchState("Center")}}a.toExternalWithParameters(s,n,c)}this.markRead(i);this._readNotificationsData(true)}}};this._registerForPush=function(){sap.Push.initPush(this._handlePushedNotification.bind(this))};this._addPushNotificationHandler=function(){document.addEventListener("deviceready",this._registerForPush.bind(this),false)};this._isIntentBasedConsumption=function(){return b};this._getConsumedIntents=function(e){var t="",i;if(!this._isIntentBasedConsumption()){return t}if(y.length>0){if(e!==U.GET_BADGE_NUMBER){t="&"}for(i=0;i<y.length;i++){if(e===U.GET_BADGE_NUMBER){if(i===0){t=y[i]}else{t=t+","+y[i]}}else{t=t+"NavigationIntent%20eq%20%27"+y[i]+"%27"}}}return t};this._revalidateCsrfToken=function(){var e;P=undefined;Y=false;e=this.getNotificationsBufferBySortingType(U.NOTIFICATIONS_BY_DATE_DESCENDING,0,1);return e.promise()};this._csrfTokenInvalid=function(e){var t=e.response;var i=t&&t.statusCode===403;var s=t?t.headers["x-csrf-token"]:"";var n=s.toLowerCase()==="required";return i&&n};this._invalidCsrfTokenRecovery=function(t,i,s){var n=this,o=this._revalidateCsrfToken(),r;J=true;o.done(function(){r=i.apply(n,s);r.done(function(e){J=false;t.resolve(e)});r.fail(function(e){J=false;if(e.response&&e.response.statusCode===200&&e.response.body){t.resolve(e.response.body)}else{t.reject(e)}})});o.fail(function(i){J=false;t.reject(i);e.error("Notification service - oData markRead failed: ",i.message,"sap.ushell.services.Notifications")})};this._notificationsAscendingSortBy=function(e,t){e.sort(function(e,i){var s=e[t],n=i[t];if(s===n){s=e.id;n=i.id}return n>s?-1:1});return e};this._getWebSocketObjectObject=function(e,t){return new s(e,t)};this.getOperationEnum=function(){return U};this._readUserSettingsFlagsFromPersonalization=function(){this._getUserSettingsPersonalizer().then(function(t){t.getPersData().done(function(e){if(e===undefined){this._writeUserSettingsFlagsToPersonalization({highPriorityBannerEnabled:w})}else{w=e.highPriorityBannerEnabled}L=true;M.resolve()}.bind(this)).fail(function(){e.error("Reading User Settings flags from Personalization service failed")})}.bind(this)).catch(function(t){e.error("Personalization service does not work:");e.error(t.name+": "+t.message);e.error("Reading User Settings flags from Personalization service failed")})};this._writeUserSettingsFlagsToPersonalization=function(t){var i=new jQuery.Deferred;this._getUserSettingsPersonalizer().then(function(e){e.setPersData(t).done(i.resolve).fail(i.reject)}).catch(function(t){e.error("Personalization service does not work:");e.error(t.name+": "+t.message);i.reject(t)});return i.promise()};this._getUserSettingsPersonalizer=function(){if(!this.oUserSettingsPersonalizerPromise){this.oUserSettingsPersonalizerPromise=sap.ushell.Container.getServiceAsync("Personalization").then(function(e){var t={keyCategory:e.constants.keyCategory.FIXED_KEY,writeFrequency:e.constants.writeFrequency.LOW,clientStorageAllowed:true};var i={container:"sap.ushell.services.Notifications",item:"userSettingsData"};return e.getPersonalizer(i,t)})}return this.oUserSettingsPersonalizerPromise};this._updateCSRF=function(e){if(Y===true||e.headers===undefined){return}if(!this._getHeaderXcsrfToken()){P=e.headers["x-csrf-token"]||e.headers["X-CSRF-Token"]||e.headers["X-Csrf-Token"]}if(!this._getDataServiceVersion()){O=e.headers.DataServiceVersion||e.headers["odata-version"]}Y=true};this._userSettingInitialization=function(){var e,t,i,s={settingsAvailable:false,mobileAvailable:false,emailAvailable:false},n,o,r,a;this._readUserSettingsFlagsFromPersonalization();e=this._readSettingsFromServer();t=this._readMobileSettingsFromServer();i=this._readEmailSettingsFromServer();n=[e,t,i];e.done(function(){s.settingsAvailable=true});t.done(function(e){o=JSON.parse(e);r=o.successStatus;if(r){j=e?o.IsActive:false;s.mobileAvailable=j}else{j=false;s.mobileAvailable=false}});i.done(function(e){o=JSON.parse(e);a=o.successStatus;if(a){W=e?o.IsActive:false;s.emailAvailable=W}else{W=false;s.emailAvailable=false}});jQuery.when.apply(jQuery,n).then(function(){H.resolve(s)})};this._closeConnection=function(){if(!E){if(G===F.WEB_SOCKET&&v){v.close();E=true}if(G===F.POLLING&&T){clearTimeout(T);E=true}}};this._resumeConnection=function(){if(E){E=false;this._webSocketStep()}}}f.hasNoAdapter=true;return f},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PageBuilding", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(e,t){this.getFactory=function(){return e.getFactory()};this.getPage=function(t){return e.getFactory().createPage(t)};this.getPageSet=function(t){var r=new jQuery.Deferred;e.getFactory().createPageSet(t,r.resolve.bind(r),r.reject.bind(r));return r.promise()}}e.hasNoAdapter=false;return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PagePersistence", [],function(){"use strict";function t(){this._init.apply(this,arguments)}t.prototype._init=function(t,e){this._oServiceConfiguration=e;this.oAdapter=t;this._pagesCache=[]};t.prototype.getPage=function(t){if(!this._pagesCache[t]){this._pagesCache[t]=this.oAdapter.getPage(t)}return this._pagesCache[t]};t.prototype.getPages=function(t){return this.oAdapter.getPages(t)};t.hasNoAdapter=false;return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PageReferencing", ["sap/ushell/services/_PageReferencing/PageReferencer"],function(e){"use strict";function r(){}r.prototype.createReferencePage=function(r){return e.createReferencePage(r)};r.hasNoAdapter=true;return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Pages", ["sap/base/Log","sap/ushell/utils/RestrictedJSONModel","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/deepExtend","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/base/util/ObjectPath"],function(e,i,t,n,r,a,o,s,d,c,u,l){"use strict";var h=function(){this.COMPONENT_NAME="sap/ushell/services/Pages";this._oCdmServicePromise=sap.ushell.Container.getServiceAsync("CommonDataModel");this._oCSTRServicePromise=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution");this._oPagesModel=new i({pages:[]});this._bImplicitSaveEnabled=true;this._aPagesToBeSaved=[]};h.prototype._generateId=function(e){var i=[];var t=this.getModel().getProperty(this.getPagePath(e));t.sections.forEach(function(e){i.push(e.id);e.visualizations.forEach(function(e){i.push(e.id)})});return o.generateUniqueId(i)};h.prototype.getModel=function(){return this._oPagesModel};h.prototype.enableImplicitSave=function(e){this._bImplicitSaveEnabled=e};h.prototype.getPageIndex=function(e){var i=this._oPagesModel.getProperty("/pages");for(var t=0;t<i.length;++t){if(i[t].id===e){return t}}return undefined};h.prototype.getPagePath=function(e){var i=this.getPageIndex(e);if(typeof i==="undefined"){return""}return"/pages/"+i};h.prototype.loadPage=function(i){var t=this.getPagePath(i);if(t){return Promise.resolve(t)}o.setPerformanceMark(["FLP-Pages-Service-loadPage-start[",i,"]"].join(""));return this._oCdmServicePromise.catch(function(i){e.error("Pages - loadPage: Couldn't resolve CDM Service.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){return Promise.all([e.getPage(i),e.getCachedVisualizations(),e.getApplications(),e.getCachedVizTypes()])}).then(function(e){var i=e[0];var t=e[1];var n=e[2];var r=e[3];return this._getModelForPage(i,t,n,r)}.bind(this)).then(function(e){var t=this._oPagesModel.getProperty("/pages/").length;var n="/pages/"+t;this._oPagesModel._setProperty(n,e);o.setPerformanceMark(["FLP-Pages-Service-loadPage-end[",i,"]"].join(""));return n}.bind(this)).catch(function(i){e.error("Pages - loadPage: Failed to gather site data.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this))};h.prototype.loadPages=function(e){return this._oCdmServicePromise.then(function(i){return i.getPages(e)}).then(function(){return Promise.all(e.map(function(e){return this.loadPage(e)}.bind(this)))}.bind(this)).then(function(i){var t={};e.forEach(function(e,n){t[e]=i[n]});return t})};h.prototype.findVisualization=function(i,t,n,r){return this._oCdmServicePromise.catch(function(i){e.error("Pages - findVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(a){return Promise.all([this.loadPage(i),a.getCachedVisualizations(),a.getApplications()]).then(function(e){var a=e[0];var o=this.getModel().getProperty(a+"/sections")||[];return o.reduce(function(e,a,o){if(t&&a.id!==t){return e}var s=a.visualizations.reduce(function(e,i,t){if(n&&i.vizId===n||r&&i.id===r){e.push(t)}return e},[]);if(s.length){e.push({pageId:i,sectionIndex:o,vizIndexes:s})}return e},[])}.bind(this)).catch(function(i){e.error("Pages - findVisualization: Couldn't load page, get visualizations or applications.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this))}.bind(this))};h.prototype.moveVisualization=function(i,n,r,a,o){if(n===a&&r===o){return Promise.resolve({visualizationIndex:o})}this.setPersonalizationActive(true);var s=this._oPagesModel.getProperty("/pages/"+i);var d=s.id;var c=s.sections;var u=c[n];var l=c[a];var h=u.id;var v=l.id;var f=u.visualizations[r];var g=f.id;u.visualizations=u.visualizations.concat([]);l.visualizations=l.visualizations.concat([]);u.visualizations.splice(r,1);if(o===-1){o=l.visualizations.length}l.visualizations.splice(o,0,f);var P;if(l.visualizations[o]){P=o-1}else{P=l.visualizations.length-2}var p;if(l.visualizations[P]){p=l.visualizations[P].id}if(u.default&&!u.visualizations.length){c.splice(n,1)}this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(d)}).catch(function(i){e.error("Pages - moveVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.sections[h];var r=i.layout.vizOrder;var a=i.viz;var o=e.payload.sections[v];var s=o.layout.vizOrder;var c=o.viz;var u=t(a[g]);var l=r.indexOf(g);r.splice(l,1);var f=p?s.indexOf(p)+1:0;s.splice(f,0,g);if(h!==v){delete a[g];c[g]=u}if(i.default&&!Object.keys(a).length){delete e.payload.sections[h];e.payload.layout.sectionOrder.splice(n,1)}return this._conditionalSavePersonalization(d)}.bind(this)).then(function(){return{visualizationIndex:o}}).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.deleteVisualization=function(i,t,n){var r=this._oPagesModel.getProperty("/pages/"+i);var a=r.sections[t];if(a.default&&a.visualizations.length<2){return this.deleteSection(i,t)}this.setPersonalizationActive(true);var o=a.visualizations;var s=o[n];o.splice(n,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r.id)}).catch(function(i){e.error("Pages - deleteVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.sections[a.id].layout.vizOrder;var t=e.payload.sections[a.id].viz;var n=i.indexOf(s.id);delete t[s.id];if(n>-1){i.splice(n,1)}return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype._getSectionIndex=function(e,i){var t=this.getModel().getProperty(e+"/sections")||[];var n=0;for(;n<t.length;n+=1){if(t[n].id===i){return n}}};h.prototype._getVisualizationData=function(e,i,t,n,r,a,o){var s=n||{vizId:i};var d={applications:r,visualizations:t,vizTypes:a};var u=c.getVizData(d,s,o);if(!u.id){u.id=this._generateId(e)}return u};h.prototype.addVisualization=function(i,t,n,r){return this._oCdmServicePromise.catch(function(i){e.error("Pages - addVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(o){return Promise.all([this.loadPage(i),o.getVisualizations(),o.getApplications(),o.getVizTypes()]).catch(function(i){e.error("Pages - addVisualization: Personalization cannot be saved: Failed to load page, get visualizations or get applications.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(s){var d=s[0];var c=s[1];var u=s[2];var l=s[3];var h=this._getSectionIndex(d,t);var v=this.getModel().getProperty(d+"/sections")||[];var f=this._getVisualizationData(i,n,c,null,u,l);if(r){f.displayFormatHint=r}var g;for(var P=0;P<v.length;P++){if(v[P].default){g=P}}if(h!==undefined||g!==undefined){this.setPersonalizationActive(true);var p=h!==undefined?h:g||0;var z=d+"/sections/"+p+"/visualizations";this.getModel().getProperty(z).push(f);this.getModel().refresh();return o.getPage(i).catch(function(i){e.error("Pages - addVisualization: Personalization cannot be saved: Failed to get page.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var a=e.payload.sections[t||e.payload.layout.sectionOrder[0]];a.layout.vizOrder.push(f.id);a.viz[f.id]={id:f.id,vizId:n};if(r){a.viz[f.id].displayFormatHint=r}return this._conditionalSavePersonalization(i)}.bind(this))}var m=parseInt(d.split("/")[2],10);return this.addSection(m,0,{title:a.i18n.getText("DefaultSection.Title"),default:true,visualizations:[f]})}.bind(this))}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.copyVisualization=function(e,i,t){var n=t.isBookmark;if(!n){return this.addVisualization(e,i,t.vizId,t.displayFormatHint)}return this.addBookmarkToPage(e,{title:t.title,subtitle:t.subtitle,url:t.targetURL,icon:t.icon,info:t.info,serviceUrl:t.indicatorDataSource?t.indicatorDataSource.path:"",serviceRefreshInterval:t.indicatorDataSource?t.indicatorDataSource.refresh:"",numberUnit:t.numberUnit,vizType:t.vizType,vizConfig:t.vizConfig},i)};h.prototype.moveSection=function(i,t,n){if(t===n){return Promise.resolve()}this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i+"/id");var a=this._oPagesModel.getProperty("/pages/"+i+"/sections");var o=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+t);var s=o.id;a.splice(t,1);if(t<n){n--}a.splice(n,0,o);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r)}).catch(function(i){e.error("Pages - moveSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.layout.sectionOrder;i.splice(i.indexOf(s),1);i.splice(n,0,s);return this._conditionalSavePersonalization(r)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.addSection=function(i,t,n){this.setPersonalizationActive(true);var r=n||{};var a=this._oPagesModel.getProperty("/pages/"+i+"/sections");var o=this._oPagesModel.getProperty("/pages/"+i+"/id");var s={id:r.id!==undefined?r.id:this._generateId(o),title:r.title!==undefined?r.title:"",visible:r.visible!==undefined?r.visible:true,preset:r.preset!==undefined?r.preset:false,locked:r.locked!==undefined?r.locked:false,default:r.default!==undefined?r.default:false,visualizations:r.visualizations!==undefined?r.visualizations:[]};a.splice(t,0,s);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(o)}).catch(function(i){e.error("Pages - addSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i={id:s.id,title:s.title,visible:s.visible,preset:s.preset,locked:s.locked,default:s.default,layout:{vizOrder:[]},viz:{}};if(s.visualizations){var n=0;var r;for(;n<s.visualizations.length;n++){r=s.visualizations[n];i.layout.vizOrder.push(r.id);if(r.isBookmark){i.viz[r.id]=c.getVizRef(r)}else{i.viz[r.id]={id:r.id,vizId:r.vizId};if(r.displayFormatHint){i.viz[r.id].displayFormatHint=r.displayFormatHint}}}}e.payload.layout.sectionOrder.splice(t,0,s.id);e.payload.sections[s.id]=i;return this._conditionalSavePersonalization(o)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.deleteSection=function(i,t){this.setPersonalizationActive(true);var n=this._oPagesModel.getProperty("/pages/"+i+"/id");var r=this._oPagesModel.getProperty("/pages/"+i+"/sections");var a=r[t].id;r.splice(t,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(n)}).catch(function(i){e.error("Pages - deleteSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){delete e.payload.sections[a];e.payload.layout.sectionOrder.splice(t,1);return this._conditionalSavePersonalization(n)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.setSectionVisibility=function(i,t,n){this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i+"/id");var a=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+t+"/id");var o=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+t);if(o.visible===n){return Promise.resolve()}o.visible=n;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r)}).catch(function(i){e.error("Pages - setSectionVisibility: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){e.payload.sections[a].visible=n;return this._conditionalSavePersonalization(r)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.renameSection=function(i,t,n){this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i);var a=r.sections[t];a.title=n;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r.id)}).catch(function(i){e.error("Pages - renameSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){e.payload.sections[a.id].title=n;return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.resetSection=function(i,n){this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i+"/id");var a=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+n+"/id");return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getPage(r),e.getOriginalPage(r),e.getCachedVizTypes()])}).catch(function(i){e.error("Pages - resetSection: Personalization cannot be saved: Failed to gather data from CDM Service.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e[0];var t=e[1];var n=e[2];var r=e[3];var a=e[4];return Promise.all([this._getModelForPage(r,i,t,a),n,r])}.bind(this)).then(function(e){var o=e[0];var s=e[1];var d=e[2];var c=t(o.sections.find(function(e){return e.id===a}),20);var u=c.visualizations.map(function(e){return e.id});var l=this._oPagesModel.getProperty("/pages/"+i);l.sections.forEach(function(e){if(c.id!==e.id){e.visualizations.forEach(function(i){if(u.indexOf(i.id)!==-1){var n=this._generateId(r);var a=t(s.payload.sections[e.id].viz[i.id]);delete s.payload.sections[e.id].viz[i.id];var o=s.payload.sections[e.id].layout.vizOrder.indexOf(a.id);a.id=n;s.payload.sections[e.id].viz[n]=a;s.payload.sections[e.id].layout.vizOrder[o]=n;i.id=n}}.bind(this))}}.bind(this));this._oPagesModel._setProperty("/pages/"+i+"/sections/"+n,c);s.payload.sections[c.id]=d.payload.sections[c.id];return this._conditionalSavePersonalization(s.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.resetPage=function(i){this.setPersonalizationActive(true);var n=this._oPagesModel.getProperty("/pages/"+i+"/id");return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getPage(n),e.getOriginalPage(n),e.getCachedVizTypes()])}).catch(function(i){e.error("Pages - resetPage: Personalization cannot be saved: Failed to gather data from CDM Service.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e[0];var t=e[1];var n=e[2];var r=e[3];var a=e[4];return Promise.all([this._getModelForPage(r,i,t,a),n,r])}.bind(this)).then(function(e){var n=e[0];var r=e[1];var a=e[2];this._oPagesModel._setProperty("/pages/"+i,n);r.payload=t(a.payload);return this._conditionalSavePersonalization(r.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.setPersonalizationActive=function(e){if(!this._bDirtyState&&e===true){this._bDirtyState=true;this._oCopiedModelData=t(this._oPagesModel.getProperty("/"),20)}else if(this._bDirtyState&&e===false){this._oPagesModel._setData(this._oCopiedModelData);this._bDirtyState=false}};h.prototype.savePersonalization=function(i){var n;if(!i){n=t(this._aPagesToBeSaved)}else{n=[i]}return this._oCdmServicePromise.then(function(e){return Promise.all(n.map(function(i){var t=this._aPagesToBeSaved.indexOf(i);this._aPagesToBeSaved.splice(t,1);return new Promise(function(t,n){e.save(i).then(t,n)}).catch(function(e){if(this._aPagesToBeSaved.indexOf(i)===-1){this._aPagesToBeSaved.push(i)}return Promise.reject(e)}.bind(this))}.bind(this)))}.bind(this)).then(function(){this._bDirtyState=false}.bind(this)).catch(function(i){e.error("Pages - savePersonalization: Personalization cannot be saved: CDM Service cannot be retrieved or the save process encountered an error.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this))};h.prototype._conditionalSavePersonalization=function(e){if(this._bImplicitSaveEnabled){return this.savePersonalization(e)}if(this._aPagesToBeSaved.indexOf(e)===-1){this._aPagesToBeSaved.push(e)}return Promise.resolve()};h.prototype._getModelForPage=function(i,t,n,r){var d={id:i&&i.identification&&i.identification.id||"",title:i&&i.identification&&i.identification.title||"",description:"",sections:[]};o.setPerformanceMark(["FLP-Pages-Service-getModelForPage-start[",d.id,"]"].join(""));return Promise.all([this._oCSTRServicePromise]).catch(function(e){return Promise.reject(e)}).then(function(c){var u=c[0];var l=s.last("/core/catalog/enableHideGroups");return Promise.all(i.payload.layout.sectionOrder.map(function(o){var s=i.payload.sections[o];var c={id:s.id||"",title:s.default?a.i18n.getText("DefaultSection.Title"):s.title||"",visualizations:[],visible:!l||(s.visible!==undefined?s.visible:true),locked:s.locked!==undefined?s.locked:false,preset:s.preset!==undefined?s.preset:true,default:s.default!==undefined?s.default:false};d.sections.push(c);return Promise.all(s.layout.vizOrder.map(function(a){var o=s.viz[a];var d=o.vizId;return u.getSystemContext(o.contentProviderId).then(function(a){var s=this._getVisualizationData(i.identification.id,d,t,o,n,r,a);c.visualizations.push(s);return this._isIntentSupported(s,u).then(function(i){if(!i){var t=c.visualizations.findIndex(function(e){return e.id===s.id});c.visualizations.splice(t,1);e.warning("The visualization "+s.vizId+" is filtered out, because it does not have a supported intent.")}})}.bind(this))}.bind(this)))}.bind(this))).then(function(){o.setPerformanceMark(["FLP-Pages-Service-getModelForPage-end[",d.id,"]"].join(""));return d})}.bind(this))};h.prototype.removeUnsupportedVisualizations=function(e,i){return this._oCSTRServicePromise.then(function(t){var n=this.getModel().getProperty("/pages/"+e+"/sections/"+i+"/visualizations/");var r=[];for(var a=n.length-1;a>=0;--a){r.push(this._isIntentSupported(n[a],t).then(function(e,i){if(!i){n.splice(e,1)}return i}.bind(this,a)))}return Promise.all(r).then(function(e){if(e.indexOf(false)!==-1){this.getModel().refresh()}}.bind(this))}.bind(this))};h.prototype._isIntentSupported=function(e,i){if(e.target===undefined){return Promise.resolve(false)}if(e.target.type==="URL"){if(u.isStandardVizType(e.vizType)){return Promise.resolve(!!e.target.url)}return Promise.resolve(true)}return new Promise(function(t,n){i.isIntentSupported([e.targetURL]).then(function(i){t(i[e.targetURL].supported)}).fail(function(){t(false)})})};h.prototype.addBookmarkToPage=function(i,t,n,r){if(!i){return Promise.reject("Pages - addBookmarkToPage: Adding bookmark tile failed: No page id is provided.")}var o=c.getBookmarkVizTypeIds(t);this.setPersonalizationActive(true);return Promise.all([this._oCdmServicePromise,this._oCSTRServicePromise]).then(function(e){var t=e[0];var n=e[1];var a=o.map(function(e){return t.getVizType(e)});return Promise.all(a).then(function(e){var t={};e.forEach(function(e,i){t[o[i]]=e;return t});return Promise.all([this.loadPage(i),t,n.getSystemContext(r)])}.bind(this))}.bind(this)).catch(function(i){e.error("Pages - addBookmarkToPage: Personalization cannot be saved: Could not load page.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(o){var s=o[0];var u=o[1];var h=o[2];var v={id:this._generateId(i),vizType:t.vizType,title:t.title,subTitle:t.subtitle,icon:t.icon,info:t.info,numberUnit:t.numberUnit,target:d.toTargetFromHash(t.url),indicatorDataSource:{path:t.serviceUrl,refresh:t.serviceRefreshInterval},vizConfig:t.vizConfig,isBookmark:true};if(t.dataSource){v.dataSource={type:t.dataSource.type,settings:{odataVersion:l.get(["dataSource","settings","odataVersion"],t)}}}if(r){v.contentProviderId=r}var f=this._getVisualizationData(i,undefined,{},v,{},u,h);var g=parseInt(/pages\/(\d+)/.exec(s)[1],10);var P=this._oPagesModel.getProperty(s);var p;if(n){p=P.sections.find(function(e){return e.id===n});if(!p){e.error("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.");return Promise.reject("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.")}}else{p=P.sections.find(function(e){return e.default});if(!p){return this.addSection(g,0,{title:a.i18n.getText("DefaultSection.Title"),default:true,visualizations:[f]})}}p.visualizations.push(f);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(i)}).catch(function(i){e.error("Pages - addBookmarkToPage: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var t=e.payload.sections[p.id];t.layout.vizOrder.push(f.id);t.viz[f.id]=c.getVizRef(f);return this._conditionalSavePersonalization(i)}.bind(this))}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype._visitPages=function(e){return this._oCdmServicePromise.then(function(e){return e.getAllPages()}).then(function(i){i=i||[];i.forEach(function(i){e(i)})})};h.prototype._visitSections=function(e){return this._visitPages(function(i){var t=i.payload&&i.payload.sections||{};Object.keys(t).forEach(function(n){e(t[n],i)})})};h.prototype._visitVizReferences=function(e){return this._visitSections(function(i,t){var n=i.viz||{};Object.keys(n).forEach(function(r){e(n[r],i,t)})})};h.prototype._findBookmarks=function(e){var i=[];return Promise.resolve().then(function(){var t=d.toTargetFromHash(e.url);t=c.harmonizeTarget(t);return this._visitVizReferences(function(n,r,a){if(n.isBookmark&&e.vizType===n.vizType&&(n.contentProviderId||"")===(e.contentProviderId||"")&&d.isSameTarget(t,n.target)){i.push({vizRefId:n.id,sectionId:r.id,pageId:a.identification.id})}}).then(function(){return i})}.bind(this))};h.prototype.countBookmarks=function(e){return this._findBookmarks(e).then(function(e){return e.length})};h.prototype.deleteBookmarks=function(e,i,t){var n=0;return this._findBookmarks(e).then(function(e){return e.reduce(function(e,r){if(i&&r.pageId!==i){return e}if(t&&r.sectionId!==t){return e}return e.then(function(){return this.findVisualization(r.pageId,r.sectionId,null,r.vizRefId)}.bind(this)).then(function(e){var i=e[0];var t=this.getPageIndex(i.pageId);return this.deleteVisualization(t,i.sectionIndex,i.vizIndexes[0])}.bind(this)).then(function(){n=n+1}).catch(function(){})}.bind(this),Promise.resolve())}.bind(this)).then(function(){return n})};h.prototype.updateBookmarks=function(i,t){if(!i||!i.url||typeof i.url!=="string"){e.error("Fail to update bookmark. No valid URL");return Promise.reject("Invalid URL provided")}if(!t||typeof t!=="object"){e.error("Fail to update bookmark. No valid parameters, URL is: "+i.url);return Promise.reject("Missing parameters")}var n=0;return Promise.all([this._findBookmarks(i)]).then(function(e){var i=e[0];return i.reduce(function(e,i){return e.then(function(){return this.findVisualization(i.pageId,i.sectionId,null,i.vizRefId)}.bind(this)).then(function(e){var i=e[0];var n=this.getPageIndex(i.pageId);var r={subtitle:t.subtitle,icon:t.icon,info:t.info,numberUnit:t.numberUnit,indicatorDataSource:{path:t.serviceUrl,refresh:t.serviceRefreshInterval},vizConfig:t.vizConfig};if(t.title){r.title=t.title}if(t.url){r.target=c.harmonizeTarget(d.toTargetFromHash(t.url))}return this.updateVisualization(n,i.sectionIndex,i.vizIndexes[0],r)}.bind(this)).then(function(){n=n+1}).catch(function(){})}.bind(this),Promise.resolve())}.bind(this)).then(function(){return n})};h.prototype.updateVisualization=function(e,i,a,o){return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getCachedVizTypes()])}).then(function(s){var u=s[0];var l=s[1];var h=s[2];var v=this._oPagesModel.getProperty("/pages/"+e);var f=v.sections[i];var g=f.visualizations;var P=g[a];var p={};this.setPersonalizationActive(true);if(this._isPropertyChanged(P.title,o.title)){p.title=o.title}if(o.target&&!d.isSameTarget(P.target,o.target)){p.target=o.target}if(this._isPropertyChanged(P.subtitle,o.subtitle)){p.subtitle=o.subtitle}if(this._isPropertyChanged(P.icon,o.icon)){p.icon=o.icon}if(this._isPropertyChanged(P.info,o.info)){p.info=o.info}if(this._isPropertyChanged(P.numberUnit,o.numberUnit)){p.numberUnit=o.numberUnit}if(this._isPropertyChanged(P.displayFormatHint,o.displayFormatHint)){p.displayFormatHint=o.displayFormatHint}if(o.indicatorDataSource&&P.indicatorDataSource&&(this._isPropertyChanged(P.indicatorDataSource.path,o.indicatorDataSource.path)||this._isPropertyChanged(P.indicatorDataSource.refresh,o.indicatorDataSource.refresh))){p.indicatorDataSource=t(P.indicatorDataSource);n(p.indicatorDataSource,o.indicatorDataSource)}if(o.vizConfig){P.vizConfig=r({},P.vizConfig,o.vizConfig);p.vizConfig=P.vizConfig}n(P,p);var z=c.getVizRef(P);P=this._getVisualizationData(v.id,z.vizId,u,z,l,h);g[a]=P;this._oPagesModel.refresh();return this._updateVisualizationCDMData(v.id,f.id,P.id,p).then(function(){return{pageId:v.id,sectionId:f.id,vizRefId:P.id}})}.bind(this))};h.prototype._updateVisualizationCDMData=function(i,t,r,a){return this._oCdmServicePromise.then(function(e){return e.getPage(i)}).catch(function(i){e.error("Pages - updateVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.sections[t].viz[r];var o=c.getVizRef(a);o.vizConfig=a.vizConfig;n(i,o);return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype._isPropertyChanged=function(e,i){if((i||i==="")&&e!==i){return true}return false};h.hasNoAdapter=true;return h},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Personalization", ["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/base/Object","sap/ui/core/Core","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/ContextContainer","sap/ushell/services/_Personalization/WindowAdapter","sap/ushell/services/_Personalization/TransientPersonalizer","sap/ushell/services/_Personalization/PersonalizationContainer","sap/ushell/services/_Personalization/Personalizer","sap/ushell/services/personalization/VariantSetAdapter","sap/ushell/services/_Personalization/Variant","sap/ushell/services/_Personalization/VariantSet","sap/ushell/services/_Personalization/WindowAdapterContainer"],function(e,t,n,r,jQuery,a,i,o,s,p,d,u,c,l,f,h,_){"use strict";function v(e,t,n,r){this._oConfig=r&&r.config||{};this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new p(this,e)};this._oAdapterWindowOnly={lazy:false,instance:new p(this,undefined)};this._oContainerMap=new a.Map;this._oPendingOperationsMap=new a.Map}v.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseded by subsequent save";v.prototype.constants=o;v.prototype._configureAppVariantStorage=function(e){var t=this;var n="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!e){e={adapter:{module:n}}}if(Object.keys(e).length===0||e.enabled===false){return}var r=e.adapter&&e.adapter.module||n;var a=r.split(".").join("/");var i=function(){t._oAppVariantAdapterLoadPromise=t._oAppVariantAdapterLoadPromise||function(){var e=new jQuery.Deferred;try{sap.ui.require([a],n)}catch(t){e.reject(t)}function n(n){try{var r=new n;var a=new p(t,r);e.resolve(a)}catch(t){e.reject(t)}}return e.promise()}();return t._oAppVariantAdapterLoadPromise};return{lazy:true,create:i}};v.prototype.getGeneratedKey=function(){return a.generateRandomKey()};v.prototype.getPersonalizer=function(e,t,n){n=n||this._getApplicationComponent();return new c(this,this._oAdapterWithBackendAdapter.instance,e,t,n)};v.prototype._getApplicationComponent=function(){var e=t._sOwnerId;if(e){var a=r.getComponent(e);if(n.isA(a,"sap.ui.core.UIComponent")){return a}}return undefined};v.prototype.getTransientPersonalizer=function(){return new d};v.prototype.getContainer=function(e,t,n){n=n||this._getApplicationComponent();return this._createContainer(e,t,false,n)};v.prototype.createEmptyContainer=function(e,t,n){n=n||this._getApplicationComponent();return this._createContainer(e,t,true,n)};v.prototype._createContainer=function(e,t,n,r){var o=this;var p=new jQuery.Deferred;if(typeof e!=="string"){throw new a.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ")}var d=!!(i.isAppVariant(r)&&(!t||!t.shared)&&this._oAppVariantAdapterWithBackendAdapter);var u=i.adjustScope(t);var c=i.addContainerPrefix(e);if(d){var l=r.getManifestObject();u.component=r;u.appVarId=l.getEntry("/sap.ui5/appVariantId");u.appVersion=l.getEntry("/sap.app/applicationVersion/version");c+="#"+l.getEntry("/sap.ui5/appVariantId")}var f=d?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;var h=o._oAdapterWindowOnly;var _=i.pickAdapter(t,h,f);i.loadAdapter(_).then(function(e){var t;var a=new s(o,e,c,u,r);var i=e&&e.supportsGetWithoutSubsequentLoad===true;if(n&&i){t=new jQuery.Deferred;t.resolve(a)}else{t=a.load()}t.fail(function(){p.reject()}).done(function(){if(n||a._isExpired()){a.clear()}p.resolve(a)})},function(e){p.reject(e)});return p.promise()};v.prototype.delContainer=function(e,t){var n={};var r="";var a=this;t=a._adjustScope(t);r=i.addContainerPrefix(e);n=new jQuery.Deferred;var o=a._pendingContainerOperations_cancelAddNext(e,null);o.always(function(){a.getContainer(e,t).fail(function(){a._pendingContainerOperations_cancelAddNext(e,n);n.reject()}).done(function(){var o;a._pendingContainerOperations_cancelAddNext(e,n);o=t.validity===0?a._oAdapterWindowOnly:a._oAdapterWithBackendAdapter;i.loadAdapter(o).then(function(e){e.delAdapterContainer(r,t).fail(function(){n.reject()}).done(function(){n.resolve()})},function(){n.reject()})})});return n.promise()};v.prototype._pendingContainerOperations_flushAddNext=function(e,t){var n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;if(typeof n._sapFnSave==="function"){var r=n._sapFnSave;n._sapFnSave=undefined;r()}return n};v.prototype._pendingContainerOperations_cancelAddNext=function(e,t){var n;n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}if(n._sapTimeoutId){clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;n.resolve(v.prototype.SAVE_DEFERRED_DROPPED)}return n};v.prototype.getPersonalizationContainer=function(e){var t="";var n={};var r={};if(typeof e!=="string"){throw new a.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ")}t=i.addContainerPrefix(e);if(this._oContainerMap.containsKey(t)){return this._oContainerMap.get(t).promise()}r=new jQuery.Deferred;n=new u(this._oAdapterWithBackendAdapter.instance,t);n.done(function(e){r.resolve(e)}).fail(function(e){r.reject(e)});this._oContainerMap.put(t,r);return r.promise()};v.prototype.delPersonalizationContainer=function(e){var t={};var n="";var r=this;n=i.addContainerPrefix(e);t=new jQuery.Deferred;this.getPersonalizationContainer(e).fail(function(){t.reject()}).done(function(){r._oAdapterWithBackendAdapter.instance.delAdapterContainer(n).fail(function(){t.reject()}).done(function(){r._oContainerMap.remove(n);t.resolve()})});return t.promise()};v.prototype._getBackendAdapter=function(){return this._oAdapterWithBackendAdapter.instance._oBackendAdapter};v.prototype.resetEntirePersonalization=function(){var e=this._getBackendAdapter();return this.isResetEntirePersonalizationSupported().then(function(t){if(t){return e.resetEntirePersonalization()}return Promise.reject()})};v.prototype.isResetEntirePersonalizationSupported=function(){var t=this._getBackendAdapter();if(typeof t.resetEntirePersonalization!=="function"){return Promise.resolve(false)}if(typeof t.isResetEntirePersonalizationSupported==="function"){return t.isResetEntirePersonalizationSupported().then(function(e){return e}).catch(function(t){e.error("isResetEntirePersonalizationSupported failed with error: "+t.toString());return Promise.reject(t)})}return Promise.resolve(true)};v.prototype._adjustScope=i.adjustScope;v.hasNoAdapter=false;v.ContextContainer=s;v.Variant=f;v.VariantSet=h;v.VariantSetAdapter=l;v.WindowAdapter=p;v.WindowAdapterContainer=_;return v},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PluginManager", ["sap/base/Log","sap/ui/thirdparty/jquery","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface","sap/ushell/services/_PluginManager/Extensions","sap/ushell/UI5ComponentType","sap/ushell/utils"],function(e,jQuery,n,i,t,o){"use strict";var r="sap.ushell.services.PluginManager";var a="sap-ushell-plugin-type";var s="RendererExtensions";var l="sap.ushell.components.shell.defaults";var u=[s,"UserDefaults","UserImage","AppWarmup"];function g(g,c,f){var p=this;this._oPluginCollection={};this._oCategoryLoadingProgress={};this._mInitializedComponentPromise={};this._sPluginAgentsNames="";this._oConfig=f&&f.config||{};if(this._oConfig.isBlueBox===undefined){this._oConfig.isBlueBox=false}u.forEach(function(e){p._oPluginCollection[e]={};p._oCategoryLoadingProgress[e]=new jQuery.Deferred});this._handlePluginCreation=function(n,i,t,a){var s=this,l=s._oPluginCollection[n][i];o.setPerformanceMark("FLP -- PluginManager.loadPlugin["+n+"]["+i+"]");try{if(l.hasOwnProperty("component")){if(s._mInitializedComponentPromise.hasOwnProperty(l.component)){s._mInitializedComponentPromise[l.component].then(function(){s._instantiateComponent(l,t,a)},function(){s._instantiateComponent(l,t,a)})}else{s._mInitializedComponentPromise[l.component]=s._instantiateComponent(l,t,a)}}else{e.error("Invalid plugin configuration. The plugin "+i+" must contain a <component> key",r)}}catch(n){e.error("Error while loading bootstrap plugin: "+l.component||"",r);if(t){t.reject(n)}}};this._getFileNameForXhrAuth=function(){return"Component-preload.js"};this._handleXhrAuthentication=function(n,i){var t;if(n&&["true",true,"X"].indexOf(n["sap-ushell-xhr-authentication"])>-1){if(!i){e.error(["Illegal state: configuration parameter 'sap-ushell-xhr-authentication-timeout' set, but no component URL specified.","XHR authentication request will not be sent. Please check the target mapping definitions for plug-ins","and the application index."].join(" "),undefined,r);return jQuery.when()}if(n.hasOwnProperty("sap-ushell-xhr-authentication-timeout")){t=parseInt(n["sap-ushell-xhr-authentication-timeout"],10);if(isNaN(t)){e.error(["Invalid value for configuration parameter 'sap-ushell-xhr-authentication-timeout' for plug-in component with URL '",i,"': '",n["sap-ushell-xhr-authentication-timeout"],"' is not a number. Timeout will be ignored."].join(""),undefined,r)}else{sap.ushell.Container.setXhrLogonTimeout(i,t)}}return jQuery.ajax(i+"/"+this._getFileNameForXhrAuth(),{dataType:"text"})}return jQuery.when()};this._instantiateComponent=function(n,o,a){var s=new jQuery.Deferred,l=JSON.parse(JSON.stringify(n)),u={ui5ComponentName:l.component,url:l.url,getExtensions:i.bind(null,n.component)};function g(n){return function(i){n=n||"Cannot create UI5 plugin component: (componentId/appdescrId :"+u.ui5ComponentName+")\n"+i+" properties "+JSON.stringify(u)+"\n This indicates a plugin misconfiguration, see e.g. Note 2316443.";i=i||"";e.error(n,i.stack,r);if(o){o.reject.apply(this,arguments)}s.reject.apply(this,arguments)}}l.name=l.component;delete l.component;u.applicationDependencies=l;if(l.config){u.applicationConfiguration=l.config;delete l.config}u.loadDefaultDependencies=false;if(a!==undefined){u.oPostMessageInterface=a}sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(e){this._handleXhrAuthentication(u.applicationConfiguration,l.url).done(function(){e.createComponent(u,{},[],t.Plugin).done(function(e){if(o){o.resolve(e)}s.resolve.apply(this,arguments)}).fail(g())}).fail(g("XHR logon for FLP plugin failed"))}.bind(this)).catch(g());return s.promise()};this.getSupportedPluginCategories=function(){return JSON.parse(JSON.stringify(u))};this.getRegisteredPlugins=function(){return JSON.parse(JSON.stringify(this._oPluginCollection))};this.registerPlugins=function(n){var i=this,t,o,l,g=[],c,f;if(!n){return}if(this._oConfig.isBlueBox===true){c=new URLSearchParams(window.location.search).get("sap-plugins");if(c&&c.length>0){c=","+c+","}else{c=undefined}}Object.keys(n).sort().forEach(function(p){t=n[p]||{};o=t.config||{};l=o[a]||"";if(t.enabled===false){return}if(!i._isFormFactorSupported(t)){e.info("Plugin '"+p+"' filtered from result: form factor not supported");return}if(i._oConfig.isBlueBox===true){if(t.config&&t.config["sap-plugin-agent"]===true){f=t.config["sap-plugin-agent-id"]||p;if(c){if(c.indexOf(","+f+",")<0){return}}else{return}}}if(t.enabled===undefined){t.enabled=true}if(t.hasOwnProperty("module")){var d=(t.module||"").replace(/\./g,"/");e.error("Plugin "+p+" cannot get registered, because the module mechanism for plugins is not valid anymore. Plugins need to be defined as SAPUI5 components.",r);try{sap.ui.requireSync(d)}catch(n){e.error("Plugin module "+d+" is not found.")}return}if(o&&o.hasOwnProperty(a)){if(u&&Array.prototype.indexOf.call(u,l)!==-1){if(g.indexOf(l)===-1){g.push(l)}i._oPluginCollection[l][p]=JSON.parse(JSON.stringify(t))}else{e.warning("Plugin "+p+" will not be inserted into the plugin collection of the PluginManager, because of unsupported category "+l,r)}}else{i._oPluginCollection[s][p]=JSON.parse(JSON.stringify(t));if(g.indexOf(s)===-1){g.push(s)}}});try{if(i._oConfig.isBlueBox!==true){i._buildNamesOfPluginsWithAgents()}}catch(n){e.error("failed to build plugin agents names list",n.message||n.toString(),"sap.ushell.services.PluginManager")}g.forEach(function(e){if(i._oCategoryLoadingProgress.hasOwnProperty(e)&&i._oCategoryLoadingProgress[e].state()==="resolved"){i.loadPlugins(e)}})};this._isFormFactorSupported=function(e){var n=e.deviceTypes,i=o.getFormFactor();if(n&&n[i]===false){return false}return true};this.getPluginLoadingPromise=function(e){if(this._oCategoryLoadingProgress.hasOwnProperty(e)){return this._oCategoryLoadingProgress[e].promise()}};this.loadPlugins=function(i){var t=this,a,g,c,f;o.setPerformanceMark("FLP -- PluginManager.startLoadPlugins["+i+"]");if(i===s){f=n.getInterface()}if(u&&Array.prototype.indexOf.call(u,i)!==-1){if(t._oCategoryLoadingProgress[i].pluginLoadingTriggered===undefined){t._oCategoryLoadingProgress[i].pluginLoadingTriggered=true}if(Object.keys(t._oPluginCollection[i]).length>0){a=[];c=Object.keys(t._oPluginCollection[i]);if(new URLSearchParams(window.location.search).get("sap-ushell-xx-pluginmode")==="discard"&&(i==="RendererExtensions"||i==="AppWarmup")){c=c.filter(function(e){return t._oPluginCollection[i][e].component===l})}c.forEach(function(e){var n=t._oPluginCollection[i][e];if(!n.loaded){n.loaded=true;g=new jQuery.Deferred;a.push(g.promise());t._handlePluginCreation(i,e,g,f)}});if(a.length>0){jQuery.when.apply(undefined,a).done(function(){o.setPerformanceMark("FLP -- PluginManager.endLoadPlugins["+i+"]");t._oCategoryLoadingProgress[i].resolve()}).fail(t._oCategoryLoadingProgress[i].reject.bind())}}else{t._oCategoryLoadingProgress[i].resolve()}}else{e.error("Plugins with category "+i+" cannot be loaded by the PluginManager",r);t._oCategoryLoadingProgress[i].reject("Plugins with category "+i+" cannot be loaded by the PluginManager")}return t._oCategoryLoadingProgress[i].promise()};this._buildNamesOfPluginsWithAgents=function(){var e=this,n="",i;Object.keys(e._oPluginCollection).forEach(function(t){Object.keys(e._oPluginCollection[t]).forEach(function(o){i=e._oPluginCollection[t][o];if(i&&i.enabled&&i.enabled===true){if(i.config&&i.config["sap-plugin-agent"]===true){n+=(i.config["sap-plugin-agent-id"]||o)+","}}})});if(n.endsWith(",")){n=n.slice(0,-1)}this._sPluginAgentsNames=n};this._getNamesOfPluginsWithAgents=function(){return this._sPluginAgentsNames}}g.hasNoAdapter=true;return g},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ReferenceResolver", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ui/core/CalendarType","sap/ui/core/Configuration","sap/ui/core/format/DateFormat","sap/ui/model/odata/ODataUtils","sap/ui/model/odata/v4/ODataUtils","sap/ui/thirdparty/jquery","sap/ushell/User"],function(e,t,r,a,n,s,i,l,jQuery,u){"use strict";var o="sap.ushell.services.ReferenceResolver";function f(){this.getValue=function(e){var t=new jQuery.Deferred;var r;if(e==="User.env.sap-ui-legacy-date-format"){r=n.getFormatSettings().getLegacyDateFormat()}if(e==="User.env.sap-ui-legacy-number-format"){r=n.getFormatSettings().getLegacyNumberFormat()}if(e==="User.env.sap-ui-legacy-time-format"){r=n.getFormatSettings().getLegacyTimeFormat()}if(e==="User.env.sap-language"){r=sap.ushell.Container.getUser().getLanguage()}if(e==="User.env.sap-languagebcp47"){r=sap.ushell.Container.getUser().getLanguageBcp47()}if(e==="User.env.sap-accessibility"){r=sap.ushell.Container.getUser().getAccessibilityMode()?"X":undefined}if(e==="User.env.sap-statistics"){r=n.getStatistics()?"true":undefined}if(e==="User.env.sap-theme"){r=sap.ushell.Container.getUser().getTheme(u.prototype.constants.themeFormat.THEME_NAME_PLUS_URL)}if(e==="User.env.sap-theme-name"){r=sap.ushell.Container.getUser().getTheme()}if(e==="User.env.sap-theme-NWBC"){r=sap.ushell.Container.getUser().getTheme(u.prototype.constants.themeFormat.NWBC)}t.resolve({value:r});return t.promise()}}function c(n,u,c){this._getUserEnvReferenceResolver=function(){if(!this.oUserEnvReferenceResolver){this.oUserEnvReferenceResolver=new f}return this.oUserEnvReferenceResolver};this.resolveReferences=function(t,a){var n=this;var s=new jQuery.Deferred;var i=[];var l=true;var u={};var f={};var c=sap.ushell.Container.getServiceAsync("UserDefaultParameters");var d,v;if(!a){v=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext()})}else{v=Promise.resolve(a)}var m=t.map(function(t){var r;if(t.indexOf("User.env.")===0){r=t;f[r]=1}if(t.indexOf("UserDefault.")===0){r=n._extractAnyUserDefaultReferenceName(t);u[r]=1}if(typeof r!=="string"){l=false;e.error("'"+t+"' is not a legal reference name",null,o)}return{full:t,name:r}});if(!l){return s.reject("One or more references could not be resolved").promise()}Promise.all([v,c]).then(function(e){var t=e[0];var a=e[1];Object.keys(u).forEach(function(e){i.push(a.getValue(e,t))});Object.keys(f).forEach(function(e){d=d||n._getUserEnvReferenceResolver();i.push(d.getValue(e))});jQuery.when.apply(jQuery,i).done(function(){var e={};var t=0,a=arguments;Object.keys(u).forEach(function(e){u[e]=a[t];t=t+1});Object.keys(f).forEach(function(e){f[e]=a[t];t=t+1});m.forEach(function(t){var a;if(t.full.indexOf("UserDefault.extended.")===0){a=n.mergeSimpleAndExtended(u[t.name]);if(!r(a)){e[t.full]=a}else{e[t.full]=undefined}}else if(t.full.indexOf("UserDefault.")===0){e[t.full]=u[t.name].value}else if(t.full.indexOf("User.env.")===0){e[t.full]=f[t.name].value}});s.resolve(e)})});return s.promise()};this._extractAnyUserDefaultReferenceName=function(e){var t=this.extractExtendedUserDefaultReferenceName(e);if(typeof t==="string"){return t}return this.extractUserDefaultReferenceName(e)};this.extractExtendedUserDefaultReferenceName=function(e){if(typeof e!=="string"||e.indexOf("UserDefault.extended.")!==0){return undefined}return e.replace(/^UserDefault[.]extended[.]/,"")};this.extractUserDefaultReferenceName=function(e){if(typeof e!=="string"||e.indexOf("UserDefault.")!==0||e.indexOf("UserDefault.extended.")===0){return undefined}return e.replace(/^UserDefault[.]/,"")};this.mergeSimpleAndExtended=function(e){var r=t({},e.extendedValue);if(typeof e.value==="string"){if(!Array.isArray(r.Ranges)){r.Ranges=[]}r.Ranges.push({Sign:"I",Option:"EQ",Low:e.value,High:null})}return r};function d(e){var t=/{([^}%]*%%[^%]+%%)}?/g,r=/([^%]*)%%/,a=/%%([^%]+)%%/,n,s,i,l=[];n=t.exec(e);while(n){s=r.exec(n[1]);i=a.exec(n[1]);l.push({edmType:s[1],name:i[1]});n=t.exec(e)}return l}this._extractUrlPlaceholders=function(e,t){var r;var a;var n=[];r=/[^(?]*/.exec(e);a=r===null?[]:d(r[0]);a.forEach(function(e){n.push(e.name)});r=/[(?][^]*/.exec(e);a=r===null?[]:d(r[0]);var s=a.filter(function(e){var r=e.name;if(t.test(r)){return true}n.push(r);return false});return{extractedReferences:s,ignoredReferences:n}};this._replaceUrlPlaceholders=function(e,t,r){var a=e;var n=[];var s=r?l.formatLiteral.bind(l):i.formatValue.bind(i);t.forEach(function(e){var t=e.name;var r=null;var i=false;while(r!==a){r=a;if(e.value!==undefined){var l=s(e.value,e.edmType);a=a.replace("{"+e.edmType+"%%"+t+"%%}",window.encodeURIComponent(l))}else{i=true;a=a.replace("{"+e.edmType+"%%"+t+"%%}","")}}if(i){n.push(t)}});return{resolvedUrl:a,placeholdersWithoutValue:n}};this.resolveUserDefaultParameters=function(e,t){var r=new jQuery.Deferred;var a=this._extractUrlPlaceholders(e,/^UserDefault\.(?!extended\.).+/);var n=a.extractedReferences;var s=a.ignoredReferences;if(n.length===0){r.resolve({url:e,defaultsWithoutValue:[],ignoredReferences:s});return r.promise()}var i=n.map(function(e){return e.name});this.resolveReferences(i,t).done(function(t){n.forEach(function(e){e.value=t[e.name]});var a=this._replaceUrlPlaceholders(e,n);r.resolve({url:a.resolvedUrl,defaultsWithoutValue:a.placeholdersWithoutValue,ignoredReferences:s})}.bind(this));return r.promise()};this._loadDynamicDateRange=function(){return sap.ui.getCore().loadLibrary("sap.ui.unified",{async:true}).then(function(){return new Promise(function(e){sap.ui.require(["sap/m/DynamicDateRange"],function(t){e(t)})})})};this._rSemanticDateRangeRegex=/^DynamicDate\..+/;this.resolveSemanticDateRanges=function(t,r){var a=this._extractUrlPlaceholders(t,this._rSemanticDateRangeRegex);var n=a.extractedReferences;var s=a.ignoredReferences;if(n.length===0){return Promise.resolve({url:t,hasSemanticDateRanges:false,invalidSemanticDates:[],ignoredReferences:s})}var i=["2.0","4.0"];if(!r||!i.includes(r)){return Promise.reject("Invalid OData version: "+r)}var l=r==="4.0";return this._resolveSemanticDateRanges(n,l).then(function(a){var i=this._replaceUrlPlaceholders(t,a,l);if(e.getLevel()>=e.Level.DEBUG){var u=a.filter(function(e){return"value"in e});e.debug("Resolving semantic date ranges \n"+"- OData Version: "+r+"\n"+"- URL: "+t+"\n"+"- ignoring references: "+JSON.stringify(s,null,4)+"\n"+"- resolved semantic date ranges: "+JSON.stringify(u,null,4)+"\n"+"- invalid semantic date ranges:"+JSON.stringify(i.placeholdersWithoutValue,null,4)+"\n"+"- final URL: "+i.resolvedUrl,null,o)}return{url:i.resolvedUrl,hasSemanticDateRanges:n.length>0,invalidSemanticDates:i.placeholdersWithoutValue,ignoredReferences:s}}.bind(this))};this._resolveSemanticDateRanges=function(e,t){var r=this._getDateTimeFormatters();return this._loadDynamicDateRange().then(function(a){return e.map(function e(n){var s={name:n.name,edmType:n.edmType};var i=n.name.split(".");var l={operator:i[1],values:[]};var u;if(i.length===3){u=i[2]}else if(i.length===4){l.values.push(i[2]);u=i[3]}else if(i.length===5){l.values=i.slice(2,4);u=i[4]}var o;try{o=a.toDates(l)}catch(e){return s}if(i.length>=3&&u!=="start"&&u!=="end"){return s}var f;if(u==="end"){f=o[1]}else{f=o[0]}if(!f){return s}switch(n.edmType){case"Edm.String":s.value=r.string.format(f);break;case"Edm.Date":s.value=r.date.format(f);break;case"Edm.DateTime":f.setUTCFullYear(f.getFullYear(),f.getMonth(),f.getDate());f.setUTCHours(0,0,0,0);s.value=f;break;case"Edm.DateTimeOffset":if(t){s.value=r.dateTimeOffsetV4.format(f,true)}else{s.value=f}break;default:break}return s})})};this._getDateTimeFormatters=function(){if(!this._oDateTimeFormatters){this._oDateTimeFormatters={string:s.getDateInstance({pattern:"yyyyMMdd",calendarType:a.Gregorian}),date:s.getDateInstance({pattern:"yyyy-MM-dd",calendarType:a.Gregorian}),dateTimeOffsetV4:s.getDateInstance({pattern:"yyyy-MM-dd'T'HH:mm:ss'Z'",calendarType:a.Gregorian})}}return this._oDateTimeFormatters};this.hasSemanticDateRanges=function(e){var t=this._extractUrlPlaceholders(e,this._rSemanticDateRangeRegex);return t.extractedReferences.length>0}}c.hasNoAdapter=true;return c},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Search", [],function(){"use strict";function e(e,t){this.init.apply(this,arguments)}e.prototype={init:function(e,t,r,i){this.oAdapter=e;this.oContainerInterface=t;this.appSearchDeferred=null},getAppSearch:function(){if(this.appSearchPromise){return this.appSearchPromise}this.appSearchPromise=new Promise(function(e){sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){sap.ui.require(["sap/esh/search/ui/appsearch/AppSearch"],function(t){e(new t({}))})})});return this.appSearchPromise},isSearchAvailable:function(){return this.oAdapter.isSearchAvailable()},prefetch:function(){return this.getAppSearch().then(function(e){return e.prefetch()})},queryApplications:function(e){e.top=e.top||10;e.skip=e.skip||0;return this.getAppSearch().then(function(t){return t.search(e).then(function(t){return{totalResults:t.totalCount,searchTerm:e.searchTerm,getElements:function(){return t.tiles}}})})}};e.hasNoAdapter=false;return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/SearchCEP", ["sap/base/Log"],function(e){"use strict";var r="sap.ushell.services.SearchCEP";var t={count:0,data:[]};function a(e,r,t,a){this.oAdapter=e}a.prototype.execSearch=function(t){var a=this;return new Promise(function(o){a.oAdapter.execSearch(t).then(o,function(t){e.error("execSearch of the adapter failed",t,r);o({})})})};a.prototype.suggest=function(e){return this.search(e)};a.prototype.search=function(e){if(typeof this.oAdapter.search==="function"){return this.oAdapter.search(e)}return Promise.resolve(t)};a.hasNoAdapter=false;return a},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/SearchableContent", ["sap/ushell/Config","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/adapters/cdm/v3/_LaunchPage/readPages","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/base/util/values","sap/ushell/library","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/base/Log","sap/ushell/utils/UrlParsing"],function(e,t,i,a,n,r,o,s,l){"use strict";var u=r.DisplayFormat;var c=function(){};c.COMPONENT_NAME="sap/ushell/services/SearchableContent";c.prototype.getApps=function(){if(e.last("/core/spaces/enabled")){return this._getPagesAppData().then(this._filterGetApps)}return this._getLaunchPageAppData().then(this._filterGetApps).then(function(e){s.debug("SearchableContent@getApps in classic mode found "+e.length+" apps");return e}).catch(function(e){s.error("SearchableContent@getApps in classic mode failed",e);return Promise.reject(e)})};c.prototype._filterGetApps=function(e){e.forEach(function(e){var t=e.visualizations;var i=[];e.visualizations=[];t.forEach(function(t){var a=JSON.stringify({title:t.title,subtitle:t.subtitle,icon:t.icon,vizType:t.vizType});if(i.indexOf(a)===-1){e.visualizations.push(t);i.push(a)}})});return e.filter(function(e){return e.visualizations.length>0})};c.prototype._getLaunchPageAppData=function(){return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){this._oLaunchPageService=e;return this._collectLaunchPageTiles()}.bind(this)).then(function(e){var t=e[0];var i=e[1];var a=t.concat(i);return Promise.all(a.map(function(e){var i=t.includes(e);var a={tileId:null,tile:e};var n;try{if(i){a.tileId=this._oLaunchPageService.getCatalogTileId(e)}else{a.tileId=this._oLaunchPageService.getTileId(e)}n=this._oLaunchPageService.getCatalogTilePreviewTitle(e)}catch(e){s.error("Could not get search data from tile "+a.tileId,e)}if(!n){return new Promise(function(t,a){if(i){this._oLaunchPageService.getCatalogTileViewControl(e).done(t).fail(a)}else{this._oLaunchPageService.getTileView(e).done(t).fail(a)}}.bind(this)).then(function(e){a.view=e;return a}).catch(function(e){s.error("Could not get search data from tile "+a.tileId,e);return a})}return Promise.resolve(a)}.bind(this)))}.bind(this)).then(function(e){var t={};var i=e.map(function(e){try{return this._buildVizDataFromLaunchPageTile(e.tile)}catch(t){s.error("Could not get search data from tile "+e.tileId,t);return null}}.bind(this)).filter(function(e){return e});e.forEach(function(e){var t=e.view;if(t){if(!t.destroy){s.error("The tile with id '"+e.tileId+"' does not implement mandatory function destroy")}else{t.destroy()}}});i.forEach(function(e){var i=e.targetURL;if(i){if(t[i]){t[i].visualizations.push(e)}else{t[i]=this._buildAppDataFromViz(e)}}}.bind(this));return n(t)}.bind(this))};c.prototype._collectLaunchPageTiles=function(){var e=this._oLaunchPageService.getGroups().then(function(e){return e.reduce(function(e,t){return Promise.all([e,this._oLaunchPageService.getGroupTilesForSearch(t)]).then(function(e){var t=e[0];var i=e[1];return t.concat(i)})}.bind(this),Promise.resolve([]))}.bind(this));var t=this._oLaunchPageService.getCatalogs().then(function(e){return e.reduce(function(e,t){return Promise.all([e,this._oLaunchPageService.getCatalogTiles(t)]).then(function(e){var t=e[0];var i=e[1];return t.concat(i)})}.bind(this),Promise.resolve([]))}.bind(this));return Promise.all([t,e])};c.prototype._getPagesAppData=function(){var e;var t;return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return Promise.all([e.getAllPages({personalizedPages:true}),e.getApplications(),e.getVisualizations(),e.getVizTypes(),sap.ushell.Container.getServiceAsync("ClientSideTargetResolution")])}).then(function(i){var a=i[0];var n=i[1];var r=i[2];var o=i[3];var s=i[4];t={applications:n,visualizations:r,vizTypes:o};e={};this._applyCdmVisualizations(t,e);this._applyCdmPages(t,a,e);return this._filterAppDataByIntent(e,s)}.bind(this)).then(function(){this._applyCdmApplications(t,e);return n(e)}.bind(this))};c.prototype._filterAppDataByIntent=function(e,t){var i=Object.keys(e).map(function(e){return l.isIntentUrlAsync(e).then(function(t){return t?e:null})});return Promise.all(i).then(function(i){var a=i.filter(function(e){return!!e});if(a.length===0){return}return new Promise(function(i,n){t.isIntentSupported(a).then(function(t){Object.keys(t).forEach(function(i){if(!t[i].supported&&e[i]){delete e[i]}})}).always(i)})})};c.prototype._applyCdmApplications=function(e,i){Object.keys(i).forEach(function(a){try{var n=i[a].visualizations;var r=n.find(function(e){return e.target.appId&&e.target.inboundId});if(r){var o=e.applications[r.target.appId];var l=t.getInbound(o,r.target.inboundId);i[a]=this._buildAppDataFromAppAndInbound(o,l);i[a].visualizations=n;i[a].target=n[0].target}else{i[a]=this._buildAppDataFromViz(n[0]);i[a].visualizations=n;i[a].target=n[0].target}}catch(e){s.error("Could not get search data from application "+a,e)}}.bind(this))};c.prototype._applyCdmVisualizations=function(e,t){Object.keys(e.visualizations).forEach(function(i){try{var n={vizId:i,displayFormatHint:u.Standard};var r=a.getVizData(e,n);this._changeVizType(r);var o=r.targetURL;r.preview=true;if(o){if(t[o]){t[o].visualizations.push(r)}else{t[o]={visualizations:[r]}}}}catch(e){s.error("Could not get search data from visualization "+i,e)}}.bind(this))};c.prototype._applyCdmPages=function(e,t,n){t.forEach(function(t){var r=i.getVisualizationReferences(t);r.forEach(function(t){try{if(t.displayFormatHint&&t.displayFormatHint!==u.Standard){t=Object.assign({},t);t.displayFormatHint=u.Standard}var i=a.getVizData(e,t);this._changeVizType(i);var r=i.targetURL;i.preview=true;if(r){if(n[r]){n[r].visualizations.push(i)}else{n[r]={visualizations:[i]}}}}catch(e){s.error("Could not get search data from vizReference "+t.id,e)}}.bind(this))}.bind(this))};c.prototype._changeVizType=function(e){if(e._instantiationData.platform==="CDM"&&!o.isStandardVizType(e.vizType)){e.vizType="sap.ushell.StaticAppLauncher";e._instantiationData.vizType={"sap.ui5":{componentName:"sap.ushell.components.tiles.cdm.applauncher"}}}};c.prototype._buildAppDataFromAppAndInbound=function(e,i){return{id:t.getId(e),title:i.title||t.getTitle(e),subtitle:i.subTitle||t.getSubTitle(e),icon:i.icon||t.getIcon(e),info:i.info||t.getInfo(e),keywords:i.keywords||t.getKeywords(e),technicalAttributes:t.getTechnicalAttributes(e),visualizations:[]}};c.prototype._buildAppDataFromViz=function(e){return{id:e.vizId,title:e.title,subtitle:e.subtitle,icon:e.icon,info:e.info,keywords:e.keywords,technicalAttributes:[],target:e.target,visualizations:[e]}};c.prototype._buildVizDataFromLaunchPageTile=function(e){var t;if(this._oLaunchPageService.getCatalogTileTargetURL(e)&&this._oLaunchPageService.isTileIntentSupported(e)){t={id:this._oLaunchPageService.getTileId(e)||this._oLaunchPageService.getCatalogTileId(e),vizId:this._oLaunchPageService.getCatalogTileId(e)||this._oLaunchPageService.getTileId(e)||"",vizType:"",title:this._oLaunchPageService.getCatalogTilePreviewTitle(e)||this._oLaunchPageService.getCatalogTileTitle(e)||this._oLaunchPageService.getTileTitle(e)||"",subtitle:this._oLaunchPageService.getCatalogTilePreviewSubtitle(e)||"",icon:this._oLaunchPageService.getCatalogTilePreviewIcon(e)||"sap-icon://business-objects-experience",info:this._oLaunchPageService.getCatalogTilePreviewInfo(e)||"",keywords:this._oLaunchPageService.getCatalogTileKeywords(e)||[],target:{type:"URL",url:this._oLaunchPageService.getCatalogTileTargetURL(e)},targetURL:this._oLaunchPageService.getCatalogTileTargetURL(e)};if(e.getChip){t._instantiationData={platform:"LAUNCHPAGE",launchPageTile:e}}else{t._instantiationData={platform:"CDM",vizType:{"sap.ui5":{componentName:"sap.ushell.components.tiles.cdm.applauncher"}}}}}return t};c.hasNoAdapter=true;return c},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ShellNavigation", ["sap/ushell/services/ShellNavigationHashChanger","sap/m/MessageBox","sap/ui/core/routing/HashChanger"],function(t,i,e){"use strict";var a=i.Action;var n=i.Icon;function s(i,s,h){function r(){sap.ui.require(["sap/m/MessageBox"],function(t){t.show("Due to a configuration change on the server,\nclient and server are out of sync.\n We strongly recommend to reload the page soon.\nReload page now?",{icon:n.ERROR,title:"Client out of sync with server.",actions:[a.YES,a.NO],onClose:function(t){if(t===a.YES){window.setTimeout(function(){window.location.reload()},0)}}})})}var o=h&&h.config;this.hashChanger=new t(o);this._navigationFilterForForwardingToRegisteredRouters=function(t,i){var e=this._aRouters.some(function(t){return t.match(i)});if(e){var a=t.getCurrentApplication();var n=a&&a.componentInstance&&!a.homePage;if(n){var s=a.componentInstance.getRouter();if(s){s.stop()}}return this.NavigationFilterStatus.Keep}return this.NavigationFilterStatus.Continue};this.getNavigationContext=function(){var t=this.hashChanger.getCurrentNavigationState();var i=!this.hashChanger.isInnerAppNavigation(t.oldHash,t.newHash);return{status:t.status,isCrossAppNavigation:i,innerAppRoute:this.hashChanger.getHash()}};this.isInitialNavigation=function(){return this._bIsInitialNavigation};this.setIsInitialNavigation=function(t){this._bIsInitialNavigation=t};this.hrefForExternal=function(t,i,e,a){return this.hashChanger.hrefForExternal(t,i,e,a)};this.hrefForAppSpecificHash=function(t){return this.hashChanger.hrefForAppSpecificHash(t)};this.compactParams=function(t,i,e,a){return this.hashChanger.compactParams(t,i,e,a)};this.toExternal=function(t,i,e){return this.hashChanger.toExternal(t,i,e)};this.toAppHash=function(t,i){this.hashChanger.toAppHash(t,i)};this.init=function(t){this._bIsInitialNavigation=true;hasher.prependHash="";e.replaceHashChanger(this.hashChanger);var i=sap.ui.getCore().getEventBus();i.subscribe("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",r);this.hashChanger.initShellNavigation(t);this._enableHistoryEntryReplacedDetection();return this};this._enableHistoryEntryReplacedDetection=function(){this._lastHashChangeMode=null;this._fnOriginalSetHash=hasher.setHash;this._fnOriginalReplaceHash=hasher.replaceHash;hasher.setHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="setHash";return this._fnOriginalSetHash.apply(hasher,arguments)}.bind(this);hasher.replaceHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="replaceHash";return this._fnOriginalReplaceHash.apply(hasher,arguments)}.bind(this)};this.wasHistoryEntryReplaced=function(){return this._lastHashChangeMode==="replaceHash"};this.resetHistoryEntryReplaced=function(){this._lastHashChangeMode=null};this.replaceHashWithoutNavigation=function(t){hasher.changed.active=false;this._fnOriginalSetHash(t);hasher.changed.active=true};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(t){this.hashChanger.registerNavigationFilter(t)};this._aRouters=[];this.registerExtraRouter=function(t){this._aRouters.push(t)};this.unregisterNavigationFilter=function(t){this.hashChanger.unregisterNavigationFilter(t)};this.registerNavigationFilter(function(){if(!this._hashChangedByApp){this.resetHistoryEntryReplaced()}this._hashChangedByApp=undefined;return this.NavigationFilterStatus.Continue}.bind(this));this.registerPrivateFilters=function(t){this.registerNavigationFilter(this._navigationFilterForForwardingToRegisteredRouters.bind(this,t))}}s.hasNoAdapter=true;return s},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ShellNavigationHashChanger", ["sap/ushell/library","sap/ushell/utils/UrlShortening","sap/ushell/utils/UrlParsing","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/hasher","sap/ushell/TechnicalParameters","sap/base/util/merge","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/deepEqual"],function(e,t,a,i,r,n,s,o,jQuery,h,p){"use strict";var l=e.NavigationState;var u={HASH_SET:{name:"hashSet",historyEntry:true},HASH_REPLACED:{name:"hashReplaced",historyEntry:false},SHELL_HASH_CHANGED:{name:"shellHashChanged",historyEntry:true,usedByUi5HistoryDetection:true,ui5EventParameterNames:{oldHash:"oldAppSpecificRouteNoSeparator",newHash:"newAppSpecificRouteNoSeparator"},updateHashOnly:true},SHELL_HASH_PARAMETER_CHANGED:{name:"shellHashParameterChanged",historyEntry:null},HASH_CHANGED:{name:"hashChanged",historyEntry:false,usedByUi5HistoryDetection:true,ui5EventParameterNames:{newHash:"newHash",fullHash:"fullHash"}}};var c=i.extend("sap.ushell.services.ShellNavigationHashChanger",{constructor:function(e){this.oServiceConfig=e;this._oNavigationState={};i.apply(this);this._initializedByShellNav=false;this._bReloadApplication=false;this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon",Keep:"Keep"};this.getRelevantEventsInfo=function(){return this._getAllEvents().filter(function(e){return e.usedByUi5HistoryDetection}).map(function(e){var t={name:e.name,paramMapping:e.ui5EventParameterNames};if(e.updateHashOnly!==undefined){t.updateHashOnly=e.updateHashOnly}return t})}}});c.prototype.privgetCurrentShellHash=function(){var e=this.privsplitHash(r.getHash());return{hash:"#"+(e&&e.shellPart?e.shellPart:"")}};c.prototype.privconstructHash=function(e){var t=this.privgetCurrentShellHash();t.hash+=e;return t};c.prototype.privconstructShellHash=function(e){return a.constructShellHash(e)};c.prototype.privsplitHash=function(e){if(e===undefined||e===null||e===""){return{shellPart:null,appSpecificRoute:null,intent:null,params:null}}var t=a.parseShellHash(e);if(t===undefined||t===null){return null}var i=t.params&&!o(t.params)?t.params:null;var r=t.appSpecificRoute;t.appSpecificRoute=undefined;return{shellPart:this.privstripLeadingHash(this.privconstructShellHash(t))||null,appSpecificRoute:r||null,intent:t.semanticObject&&t.action&&t.semanticObject+"-"+t.action+(t.contextRaw||"")||null,params:i}};c.prototype.privsetHash=function(e,t,a){r.prependHash="";e=this.privstripLeadingHash(e);t=t||"";if(a===undefined){a=true}if(a){this.fireEvent(u.HASH_SET.name,{sHash:t});r.setHash(e)}else{this.fireEvent(u.HASH_REPLACED.name,{sHash:t});r.replaceHash(e)}};c.prototype.privstripLeadingHash=function(e){if(e[0]==="#"){return e.substring(1)}return e};c.prototype.registerNavigationFilter=function(e){if(typeof e!=="function"){throw new Error("fnFilter must be a function")}this.aNavigationFilters.push(e)};c.prototype.unregisterNavigationFilter=function(e){if(typeof e!=="function"){throw new Error("fnFilter must be a function")}this.aNavigationFilters=this.aNavigationFilters.filter(function(t){return t!==e})};function f(e,t,a){this.oAppState=undefined;this.oPromise=(new jQuery.Deferred).resolve();this.getNextKey=function(){this.oAppState=e.createEmptyAppState(t,a);return this.oAppState.getKey()};this.store=function(e){var t;this.oAppState.setData(e);t=this.oAppState.save();this.oPromise=jQuery.when(this.oPromise,t)};this.getPromise=function(){return this.oPromise}}c.prototype.compactParams=function(e,i,r,n){var s=new jQuery.Deferred;var o=a.constructShellHash({target:{semanticObject:"SO",action:"action"},params:e});if(e===undefined||Object.keys(e).length===0){return s.resolve(e).promise()}sap.ushell.Container.getServiceAsync("AppState").then(function(e){var h=new f(e,r,n);var p=t.compactHash(o,i,h);var l=a.parseParameters(p.hash.match(/\?.*/)[0]);var u=h.getPromise();u.done(function(){s.resolve(l)}).fail(function(e){s.reject(e)})});return s.promise()};c.prototype.hrefForExternal=function(e,t,a,i){function r(e,t){if(t===true){e.hash=encodeURI(e.hash)}else{e=encodeURI(e)}return e}if(i){var n=new jQuery.Deferred;this.hrefForExternalNoEncAsync(e,t,a).then(function(e){n.resolve(r(e,t))}).catch(n.reject.bind(n));return n}var s=this.hrefForExternalNoEnc(e,t,a);return r(s,t)};c.prototype.hrefForExternalNoEnc=function(e,t,a,i){h.error("Deprecated API call of 'sap.ushell.services.ShellNavigationHashChanger.hrefForExternalNoEnc'. Please use 'hrefForExternalNoEncAsync' instead",null,"sap.ushell.services.ShellNavigationHashChanger");if(i){var r=new jQuery.Deferred;this.hrefForExternalNoEncAsync(e,t,a).then(r.resolve).catch(r.reject);return r.promise()}var n;var s=sap.ushell.Container.getService("AppState");var o=new f(s,a);var p=this.privhrefForExternalNoEnc(e,o);if(t===true){n={hash:p.hash,params:p.params,skippedParams:p.skippedParams}}else{n=p.hash}return n};c.prototype.hrefForExternalNoEncAsync=function(e,t,a){return sap.ushell.Container.getServiceAsync("AppState").then(function(i){var r;var n=new f(i,a);var s=this.privhrefForExternalNoEnc(e,n);if(t===true){r={hash:s.hash,params:s.params,skippedParams:s.skippedParams}}else{r=s.hash}return new Promise(function(e,t){n.getPromise().done(function(){e(r)}).fail(t)})}.bind(this))};c.prototype.privhrefForExternalNoEnc=function(e,a){var i;if(e===undefined){return this.privgetCurrentShellHash()}if(e&&e.target&&(typeof e.target.semanticObject==="string"||typeof e.target.shellHash==="string")){i="#"+this.privconstructShellHash(e);return t.compactHash(i,undefined,a)}return this.privgetCurrentShellHash()};c.prototype.privgetAppHash=function(e){var t;if(e&&e.target&&typeof e.target.shellHash==="string"){var i=a.parseShellHash(e.target.shellHash);t=i&&i.appSpecificRoute;t=t&&t.substring(2)}return t};c.prototype.hrefForAppSpecificHash=function(e){return encodeURI(this.privconstructHash(this.privappHashPrefix+e).hash)};c.prototype.toExternal=function(e,t,a){return sap.ushell.Container.getServiceAsync("AppState").then(function(i){var r=new f(i,t);var n=this.privhrefForExternalNoEnc(e,r).hash;var s=this.privgetAppHash(e);this.privsetHash(n,s,a)}.bind(this))};c.prototype.toAppHash=function(e,t){var a=this.privconstructHash(this.privappHashPrefix+e).hash;this.privsetHash(a,e,t)};c.prototype.initShellNavigation=function(e){if(this._initializedByShellNav){h.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false}this.privfnShellCallback=e;r.changed.add(this.treatHashChanged,this);if(!r.isActive()){r.initialized.addOnce(this.treatHashChanged,this);r.init()}else{this.treatHashChanged(r.getHash())}this._initializedByShellNav=true;return true};c.prototype.init=function(){if(this._initialized){h.info("init already called on this ShellNavigationHashChanger instance.");return false}var e=this.privsplitHash(r.getHash());var t=(e&&e.appSpecificRoute||"  ").substring(2);var a=t?"&/":"";var i=e&&e.shellPart||"";this.fireEvent(u.HASH_CHANGED.name,{newHash:t,fullHash:i+a+t});this._initialized=true;return true};c.prototype._removeInnerAppSeparator=function(e){return(e||"").replace("&/","")};c.prototype._setNavigationStatus=function(e){this._oNavigationState.status=e};c.prototype._trackNavigation=function(e,t){this._oNavigationState.newHash=e;this._oNavigationState.oldHash=t};c.prototype.getCurrentNavigationState=function(){return this._oNavigationState};c.prototype.treatHashChanged=function(e,i){this._trackNavigation(e,i);this._setNavigationStatus(l.InProgress);if(this.inAbandonFlow){this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}var n;e=t.expandHash(e);i=t.expandHash(i);var s=this.privsplitHash(e);var o=this.privsplitHash(i);if(!s){var p=new Error("Illegal new hash - cannot be parsed: '"+e+"'");this.fireEvent(u.SHELL_HASH_CHANGED.name,{newShellHash:e,newAppSpecificRoute:null,fullHash:e,oldShellHash:o?o.shellPart:i,error:p});this.privfnShellCallback(e,null,o?o.shellPart:i,o?o.appSpecificRoute:null,p);this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}if(!o){o={shellPart:i,appSpecificRoute:null}}for(var c=0;c<this.aNavigationFilters.length;c++){try{var f;var v=this.aNavigationFilters[c].call(undefined,e,i);var H=v;if(typeof v!=="string"){H=v.status;f=v.hash}if(H===this.NavigationFilterStatus.Custom){if(f&&f.length>0){this.inAbandonFlow=true;r.replaceHash(f);this.inAbandonFlow=false}this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}if(H===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;r.replaceHash(i);this.inAbandonFlow=false;this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}if(H===this.NavigationFilterStatus.Keep){n=true}}catch(e){h.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigation")}}if(n){this.fireEvent(u.HASH_CHANGED.name,{newHash:e,oldHash:i,fullHash:e});this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}var S=i===undefined;var g=this._compareHashes(s,o,S);var d=g.sameIntent&&g.sameParameters&&g.sameAppSpecificRoute;if(d){h.info("Navigation happened but hash stayed the same",null,"sap.ushell.services.ShellNavigation");this.fireEvent(u.HASH_CHANGED.name,{newHash:this._removeInnerAppSeparator(s.appSpecificRoute),oldHash:this._removeInnerAppSeparator(o.appSpecificRoute),fullHash:e});this._setNavigationStatus(l.Finished);sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");this.setReloadApplication(false);return}var m=g.sameIntent&&g.sameParameters;if(m){if(this.getReloadApplication()){this.setReloadApplication(false)}else{var A=this._removeInnerAppSeparator(s.appSpecificRoute);var y=this._removeInnerAppSeparator(o.appSpecificRoute);h.info("Inner App Hash changed from '"+y+"' to '"+A+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(u.HASH_CHANGED.name,{newHash:A,oldHash:y,fullHash:e});this._setNavigationStatus(l.Finished);sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");return}}if(g.sameIntent&&this.hasListeners(u.SHELL_HASH_PARAMETER_CHANGED.name)){var E=a.paramsToString(s.params);var N=a.paramsToString(o.params);h.info("Shell hash parameters changed from '"+N+"' to '"+E+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(u.SHELL_HASH_PARAMETER_CHANGED.name,{oNewParameters:s.params,oOldParameters:o.params});this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}h.info("Outer shell hash changed from '"+i+"' to '"+e+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(u.SHELL_HASH_CHANGED.name,{newShellHash:s.shellPart,newAppSpecificRoute:s.appSpecificRoute,fullHash:e,oldShellHash:o.shellPart,oldAppSpecificRoute:o.appSpecificRoute,error:"",oldAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(o.appSpecificRoute),newAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(s.appSpecificRoute)});this.privfnShellCallback(s.shellPart,s.appSpecificRoute,o.shellPart,o.appSpecificRoute);if(g.sameIntent){sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation")}this._setNavigationStatus(l.Finished);this.setReloadApplication(false)};c.prototype._parametersChanged=function(e,t){return!p(e,t)};c.prototype._compareHashes=function(e,t,a){return{sameIntent:this._haveSameIntent(e,t)&&!a,sameParameters:this.haveSameIntentParameters(e.params,t.params),sameAppSpecificRoute:e.appSpecificRoute===t.appSpecificRoute}};c.prototype.setHash=function(e){this.toAppHash(e,true)};c.prototype.replaceHash=function(e){this.toAppHash(e,false)};c.prototype.getHash=function(){return this.getAppHash()};c.prototype.getAppHash=function(){var e=this.privsplitHash(r.getHash());var t=(e&&e.appSpecificRoute||"  ").substring(2);return t};c.prototype.destroy=function(){r.changed.remove(this.treatHashChanged,this);i.prototype.destroy.apply(this,arguments)};c.prototype._getAllEvents=function(){return Object.keys(u).map(function(e){return u[e]})};c.prototype.getReplaceHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===false}).map(function(e){return e.name})};c.prototype.getSetHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===true}).map(function(e){return e.name})};c.prototype.isInnerAppNavigation=function(e,t){var a=this.privsplitHash(e)||{};var i=this.privsplitHash(t)||{};var r=t===undefined;var n=this._haveSameIntent(a,i)&&!r;var s=this.haveSameIntentParameters(a.params,i.params);return n&&s};c.prototype._haveSameIntent=function(e,t){return e.intent===t.intent};c.prototype._removeNonIntentParameters=function(e){var t=n.getParameters({isIntentParameter:false});var a;if(e){for(var i=0;i<t.length;i++){a=t[i];if(e[a.name]){delete e[a.name]}}}return e||{}};c.prototype.haveSameIntentParameters=function(e,t){var a=s({},e);var i=s({},t);return!this._parametersChanged(this._removeNonIntentParameters(a),this._removeNonIntentParameters(i))};c.prototype.getReloadApplication=function(){return this._bReloadApplication};c.prototype.setReloadApplication=function(e){this._bReloadApplication=e};return c});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/SmartNavigation", ["sap/ui/thirdparty/jquery","sap/ushell/utils","sap/ushell/services/AppConfiguration","sap/base/Log","sap/ushell/utils/UrlParsing"],function(jQuery,e,t,r,n){"use strict";function a(e,t,r){this._oServiceConfig=r;this._oCrossAppNavigationServicePromise=sap.ushell.Container.getServiceAsync("CrossApplicationNavigation");this._oPersonalizationServicePromise=sap.ushell.Container.getServiceAsync("Personalization");this._oHashCodeCache={"":0}}a.STATISTIC_COLLECTION_WINDOW_DAYS=90;a.PERS_CONTAINER_KEY_PREFIX="ushell.smartnav.";a.ONE_DAY_IN_MILLISECOND=24*60*60*1e3;a.prototype.getLinks=function(e){var n=new jQuery.Deferred;r.error("Call to deprecated service: 'SmartNavigation.getLinks'. Please use 'CrossApplicationNavigation.getLinks' instead",null,"sap.ushell.services.SmartNavigation");this._oCrossAppNavigationServicePromise.then(function(a){var i=a.getLinks(e);if(!this._isTrackingEnabled(this._oServiceConfig)){i.done(n.resolve).fail(n.reject);return}var o=t.getCurrentApplication();var s=o.sShellHash;var l=o.componentHandle;if(o.componentHandle){l=o.componentHandle.getInstance()}if(!s){r.warning("Call to SmartNavigation#getLinks() simply delegated to CrossApplicationNavigation#getLinks()"+" because AppConfiguration#getCurrentApplication()#sShellHash evaluates to undefined.");i.done(n.resolve).fail(n.reject);return}var c=this._getNavigationOccurrences(s,l);jQuery.when(i,c).done(function(e,t){if(t.length===0){n.resolve(e);return}var r=this._prepareLinksForSorting(e,t);e=r.sort(function(e,t){return t.clickCount-e.clickCount});n.resolve(e)}.bind(this)).fail(n.reject)}.bind(this)).catch(n.reject);return n.promise()};a.prototype.toExternal=function(e){var n=arguments;r.error("Call to deprecated service: 'SmartNavigation.toExternal'. Please use 'CrossApplicationNavigation.toExternal' instead",null,"sap.ushell.services.SmartNavigation");this._oCrossAppNavigationServicePromise.then(function(a){if(!this._isTrackingEnabled(this._oServiceConfig)){a.toExternal.apply(a,n);return}var i=t.getCurrentApplication();var o=i.sShellHash;var s=i.componentHandle;if(i.componentHandle){s=i.componentHandle.getInstance()}if(!o){r.warning("Current shell hash could not be identified. Navigation will not be tracked.",null,"sap.ushell.services.SmartNavigation");a.toExternal.apply(a,n);return}var l=this._getHashFromOArgs(e.target);if(!l){r.warning("Destination hash does not conform with the ushell guidelines. Navigation will not be tracked.",null,"sap.ushell.services.SmartNavigation");a.toExternal.apply(a,n);return}this._recordNavigationOccurrences(o,l,s).then(function(){a.toExternal.apply(a,n)})}.bind(this))};a.prototype.hrefForExternal=function(){r.error("Deprecated API call of 'sap.ushell.services.SmartNavigation.hrefForExternal'. Please use 'hrefForExternalAsync' instead.",null,"sap.ushell.services.SmartNavigation");var e=sap.ushell.Container.getService("CrossApplicationNavigation");return e.hrefForExternal.apply(e,arguments)};a.prototype.hrefForExternalAsync=function(){var e=arguments;r.error("Call to deprecated service: 'SmartNavigation.hrefForExternalAsync'. Please use 'CrossApplicationNavigation.hrefForExternalAsync' instead",null,"sap.ushell.services.SmartNavigation");return this._oCrossAppNavigationServicePromise.then(function(t){return t.hrefForExternalAsync.apply(t,e)})};a.prototype.getPrimaryIntent=function(){var e=new jQuery.Deferred;var t=arguments;r.error("Call to deprecated service: 'SmartNavigation.getPrimaryIntent'. Please use 'CrossApplicationNavigation.getPrimaryIntent' instead",null,"sap.ushell.services.SmartNavigation");this._oCrossAppNavigationServicePromise.then(function(r){r.getPrimaryIntent.apply(r,t).done(e.resolve).fail(e.reject)}).catch(e.reject);return e.promise()};a.prototype.trackNavigation=function(e){r.error("Call to deprecated service: 'SmartNavigation.trackNavigation'.",null,"sap.ushell.services.SmartNavigation");if(!this._isTrackingEnabled(this._oServiceConfig)){r.debug("Call to SmartNavigation#trackNavigation() ignored because Service is not enabled via Configuration",null,"sap.ushell.services.SmartNavigation");return jQuery.when(null)}var n=e.target;var a=t.getCurrentApplication();var i=a.sShellHash;var o;if(!i){r.warning("Call to SmartNavigation#trackNavigation() simply ignored"+" because AppConfiguration#getCurrentApplication()#sShellHash evaluates to undefined.");return jQuery.when(null)}o=this._getHashFromOArgs(n);if(!o){r.warning("Navigation not tracked - no valid destination provided",null,"sap.ushell.services.SmartNavigation");return jQuery.when(null)}r.debug("Navigation to "+o+" was tracked out of "+i,null,"sap.ushell.services.SmartNavigation");return this._recordNavigationOccurrences(i,o,a.componentHandle.getInstance())};a.prototype._isTrackingEnabled=function(t){return e.isDefined(t)&&e.isDefined(t.config)&&e.isDefined(t.config.isTrackingEnabled)?t.config.isTrackingEnabled:false};a.prototype._getHashCode=function(e){var t=e+"";if(this._oHashCodeCache[t]){return this._oHashCodeCache[t]}var r=0;var n=t.length;while(n--){r=(r<<5)-r+(t.charCodeAt(n)|0);r|=0}this._oHashCodeCache[t]=r;return r};a.prototype._getBaseHashPart=function(e){var t=n.parseShellHash(e);if(t&&t.semanticObject&&t.action){return t.semanticObject+"-"+t.action}throw"Invalid intent `"+e+"`"};a.prototype._getHashFromOArgs=function(e){if(!e){return null}if(e.shellHash&&n.parseShellHash(e.shellHash)){return this._getBaseHashPart(e.shellHash)}if(e.semanticObject&&e.action){return e.semanticObject+"-"+e.action}return null};a.prototype._getPersContainerKey=function(e){return a.PERS_CONTAINER_KEY_PREFIX+this._getHashCode(e)};a.prototype._getNavigationOccurrences=function(e,t){var r=new jQuery.Deferred;var n=this._getPersContainerKey(e);this._oPersonalizationServicePromise.then(function(e){var a=e.getContainer(n,{keyCategory:e.constants.keyCategory.FIXED_KEY,writeFrequency:e.constants.writeFrequency.HIGH,clientStorageAllowed:true},t);a.done(function(e){var t=e.getItemKeys();var n=t.map(function(t){var r=e.getItemValue(t);var n=Object.keys(r.actions);return n.map(function(e){var n=r.actions[e];var a=n.dailyFrequency.reduce(function(e,t){return e+t},0);return{intent:t+"-"+e,clickCount:a}})});var a=n.reduce(function(e,t){Array.prototype.push.apply(e,t);return e},[]);r.resolve(a)})}).catch(r.reject);return r.promise()};a.prototype._prepareLinksForSorting=function(e,t){var r={};t.forEach(function(e){r[e.intent]=e});e.forEach(function(e){var t=this._getBaseHashPart(e.intent);var n=r[t];e.clickCount=n?n.clickCount:0}.bind(this));return e};a.prototype._recordNavigationOccurrences=function(e,t,r){var a=n.parseShellHash(t);var i=this._getPersContainerKey(e);var o=a.semanticObject;var s=new jQuery.Deferred;this._oPersonalizationServicePromise.then(function(e){var t=e.getContainer(i,{keyCategory:e.constants.keyCategory.FIXED_KEY,writeFrequency:e.constants.writeFrequency.HIGH,clientStorageAllowed:true},r);t.done(function(e){var t=e.getItemValue(o);var r=a.action;if(!t){t={actions:{},latestVisit:Date.now(),dailyFrequency:[0]}}var n=t.actions[r];if(!n){n={latestVisit:Date.now(),dailyFrequency:[0]};t.actions[r]=n}this._updateHistoryEntryWithCurrentUsage(t);this._updateHistoryEntryWithCurrentUsage(n);e.setItemValue(o,t);e.save().done(s.resolve).fail(s.reject)}.bind(this)).fail(s.reject)}.bind(this)).catch(s.reject);return s.promise()};a.prototype._updateHistoryEntryWithCurrentUsage=function(e){var t=Date.now();var r=t-e.latestVisit;var n=Math.floor(r/a.ONE_DAY_IN_MILLISECOND);while(n--){e.dailyFrequency.unshift(0);if(e.dailyFrequency.length>a.STATISTIC_COLLECTION_WINDOW_DAYS){e.dailyFrequency.pop()}}++e.dailyFrequency[0];e.latestVisit=t;return e};a.hasNoAdapter=true;return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/SpaceContent", ["sap/ushell/Config","sap/base/util/deepClone","sap/ushell/library","sap/ui/thirdparty/hasher","sap/ushell/utils/WindowUtils","sap/base/Log"],function(e,t,n,a,i,r){"use strict";var o=n.AppType;var u=function(){};u.prototype.isPersonalizationEnabled=function(){return e.last("/core/shell/enablePersonalization")};u.prototype.getPage=function(e){var n;return sap.ushell.Container.getServiceAsync("Pages").then(function(t){n=t;return n.loadPage(e)}).then(function(e){return t(n.getModel().getProperty(e),20)})};u.prototype.getPages=function(e){var n;return sap.ushell.Container.getServiceAsync("Pages").then(function(t){n=t;return n.loadPages(e)}).then(function(e){var a={};Object.keys(e).forEach(function(i){a[i]=t(n.getModel().getProperty(e[i]),20)});return a})};u.prototype.addSection=function(e,t,n){return sap.ushell.Container.getServiceAsync("Pages").then(function(a){var i=a.getPageIndex(e);return a.addSection(i,t,n)})};u.prototype.addVisualization=function(e,t,n){return sap.ushell.Container.getServiceAsync("Pages").then(function(a){return a.addVisualization(e,t,n)})};u.prototype.moveVisualization=function(e,t,n,a,i){return sap.ushell.Container.getServiceAsync("Pages").then(function(r){var o=r.getPageIndex(e);return r.moveVisualization(o,t,n,a,i)})};u.prototype.updateVisualization=function(e,t,n,a){var i={displayFormatHint:a.displayFormatHint,title:a.title,subtitle:a.subtitle,info:a.info};return sap.ushell.Container.getServiceAsync("Pages").then(function(a){var r=a.getPageIndex(e);return a.updateVisualization(r,t,n,i)})};u.prototype.deleteVisualization=function(e,t,n){return sap.ushell.Container.getServiceAsync("Pages").then(function(a){var i=a.getPageIndex(e);return a.deleteVisualization(i,t,n)})};u.prototype.instantiateVisualization=function(e){return sap.ushell.Container.getServiceAsync("VisualizationInstantiation").then(function(t){return t.instantiateVisualization(e)})};u.prototype.launchTileTarget=function(t,n){if(typeof t!=="string"){r.error("Invalid target URL",null,"sap.ushell.services.SpaceContent");return}if(t.indexOf("#")===0){a.setHash(t)}else{if(n){var u=e.last("/core/shell/enableRecentActivity")&&e.last("/core/shell/enableRecentActivityLogging");if(u){var s={title:n,appType:o.URL,url:t,appId:t};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(s)}}i.openURL(t,"_blank")}};u.prototype.getUserDefaultParameter=function(e){var t;var n;return Promise.all([sap.ushell.Container.getServiceAsync("ClientSideTargetResolution"),sap.ushell.Container.getServiceAsync("UserDefaultParameters")]).then(function(e){n=e[0];t=e[1];return n.getSystemContext("")}).then(function(n){return new Promise(function(a,i){t.getValue(e,n).done(a).fail(i)})}).then(function(e){if(!e.value&&!e.extendedValue){return null}var t={};if(e.value){t.value=e.value}if(e.extendedValue){t.extendedValue=e.extendedValue}return t})};u.hasNoAdapter=true;return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/SupportTicket", ["sap/ushell/Config"],function(e){"use strict";function t(t,n,i,r){this.createTicket=function(e){return t.createTicket(e)};this.isEnabled=function(){return e.last("/core/extension/SupportTicket")}}t.hasNoAdapter=false;return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/URLParsing", ["sap/base/Log","sap/ui/base/Object","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(t,e,s,r){"use strict";function n(){this.getShellHash=function(t){return r.getShellHash(t)};this.getHash=function(t){return r.getHash(t)};this.isIntentUrl=function(e){t.error("Deprecated API call of 'sap.ushell.URLParsing.isIntentUrl'. Please use 'isIntentUrlAsync' instead",null,"sap.ushell.services.URLParsing");return r.isIntentUrl(e)};this.isIntentUrlAsync=function(t){return r.isIntentUrlAsync(t)};this.parseParameters=function(t){return r.parseParameters(t)};this.paramsToString=function(t){return r.paramsToString(t)};this.privparamsToString=function(t,e,s){return r.privparamsToString(t,e,s)};this.parseShellHash=function(t){return r.parseShellHash(t)};this.privstripLeadingHash=function(t){return r.privstripLeadingHash(t)};this.splitHash=function(t){return r.splitHash(t)};this.constructShellHash=function(t){return r.constructShellHash(t)};this.addSystemToServiceUrl=function(t,r){var n,a,i=r;if(!t||t.indexOf("/")!==0||t.indexOf("//")===0){throw new s.Error("Invalid URL: "+t,"sap.ushell.services.URLParsing")}if(e.isA(r,"sap.ui.core.Component")){a=typeof r.getComponentData==="function"&&r.getComponentData();i=a&&a.startupParameters&&a.startupParameters["sap-system"]&&a.startupParameters["sap-system"][0]}n=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!i&&!r&&n&&n.url){i=new URL(n.url,window.location.href).searchParams.get("sap-system")}if(/^[^?]*(;mo([/;?]|$))/.test(t)){}else if(/^[^?]*(;o=([/;?]|$))/.test(t)){t=t.replace(/;o=([/;?]|$)/,(i?";o="+i:"")+"$1")}else if(!/^[^?]*;o=/.test(t)&&i){t=t.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+i+"$2")}sap.ushell.Container.addRemoteSystemForServiceUrl(t);return t}}n.hasNoAdapter=true;return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/URLShortening", ["sap/ushell/utils/UrlShortening"],function(n){"use strict";function e(){this.compactHash=n.compactHash.bind(n);this.checkHashLength=n.checkHashLength.bind(n);this.expandHash=n.expandHash.bind(n);this.expandParamGivenRetrievalFunction=n.expandParamGivenRetrievalFunction.bind(n)}e.hasNoAdapter=true;return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/URLTemplate", ["sap/ushell/utils","sap/base/Log"],function(e,t){"use strict";function s(){this._init.apply(this,arguments)}s.prototype._init=function(e){this.oAdapter=e};s.prototype.handlePostTemplateProcessing=function(e,t,s){if(this.oAdapter&&this.oAdapter.handlePostTemplateProcessing){return this.oAdapter.handlePostTemplateProcessing(e,t,s)}else{return Promise.resolve(e)}};s.hasNoAdapter=false;s.useConfiguredAdapterOnly=true;return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Ui5ComponentHandle", function(){"use strict";var t=function(t){this._oComponent=t};t.onBeforeApplicationInstanceCreated=function(){sap.ui.require(["sap/ushell/Fiori20AdapterTest"],function(){})};t.prototype.getInstance=function(){return this._oComponent};t.prototype.getMetadata=function(){return this._oComponent.getMetadata()};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Ui5ComponentLoader", ["sap/ushell/Config","sap/ushell/utils","sap/ushell/services/Ui5ComponentHandle","sap/ushell/services/_Ui5ComponentLoader/utils","sap/ushell/EventHub","sap/ui/thirdparty/jquery"],function(e,o,t,n,r,jQuery){"use strict";function s(s,a,i,c){this._oServiceConfig=c&&c.config||{};this._oAdapter=s;this._logStackTrace=function(e,o){var t=JSON.stringify(e,null,4);n.logInstantiateComponentError(e.name,o+"",o.status,o.stack,t);return Promise.reject(o)};this.modifyComponentProperties=function(e,o){if(!this._oAdapter.modifyComponentProperties){return Promise.resolve(e)}return this._oAdapter.modifyComponentProperties(e.componentProperties,o).then(function(o){e.componentProperties=o;return e})};this.createComponent=function(e,o,t,n){var r=new jQuery.Deferred,s=this;this.createComponentData(e,o,t).then(function(e){return s.modifyComponentProperties(e,n)}).then(function(e){s.instantiateComponent(e).then(r.resolve,r.reject)},function(){r.resolve(e)});return r.promise()};this.createComponentData=function(t,r,s){var a=this;return new Promise(function(i,c){var l={};var u=t||{};var p=n.shouldLoadCoreExt(u);var m=e.last("/core/customPreload/enabled");var d=p&&m;var C=n.shouldLoadDefaultDependencies(u,a._oServiceConfig);var f=o.getParameterValueBoolean("sap-ushell-nocb");var h=u.applicationDependencies||{};var v=n.constructAppComponentId(r||{});var P=e.last("/core/customPreload/coreResourcesComplement");var g;var R;n.logAnyApplicationDependenciesMessages(h.name,h.messages);if(!u.ui5ComponentName){c();return}delete u.loadCoreExt;delete u.loadDefaultDependencies;g=n.createComponentData(u.componentData||{},u.url,u.applicationConfiguration,u.reservedParameters);if(u.getExtensions){g.getExtensions=u.getExtensions;delete u.getExtensions}if(u.oPostMessageInterface){g.oPostMessageInterface=u.oPostMessageInterface;delete u.oPostMessageInterface}R=n.createComponentProperties(d,C,f,s,u.applicationDependencies||{},u.ui5ComponentName,u.url,v,P);l.componentData=g;l.componentProperties=R;l.appPropertiesSafe=u;l.loadCoreExt=p;i(l)})};this.instantiateComponent=function(e){var o=e.componentProperties;var s=e.componentData;var a=e.appPropertiesSafe;var i=e.loadCoreExt;t.onBeforeApplicationInstanceCreated.call(null,o);var c=new jQuery.Deferred;n.createUi5Component(o,s).then(function(e){var o=new t(e);a.componentHandle=o;var n=i;if(n){a.coreResourcesFullyLoaded=n;r.emit("CoreResourcesComplementLoaded",{status:"success"})}c.resolve(a)}).fail(this._logStackTrace.bind(this,o)).catch(c.reject);return c.promise()};this.getCoreResourcesComplementBundle=function(){return e.last("/core/customPreload/enabled")?e.last("/core/customPreload/coreResourcesComplement"):[]};this.loadCoreResourcesComplement=function(){if(!this.loadCoreResourcesComplementPromise){this.loadCoreResourcesComplementPromise=new Promise(function(e,o){n.loadBundle(this.getCoreResourcesComplementBundle()).then(function(){r.emit("CoreResourcesComplementLoaded",{status:"success"});e()}).catch(function(){r.emit("CoreResourcesComplementLoaded",{status:"failed"});o()})}.bind(this));this.loadCoreResourcesComplementPromise.finally(function(){this.loadCoreResourcesComplementPromise=undefined}.bind(this))}return this.loadCoreResourcesComplementPromise};r.once("loadCoreResourcesComplement").do(function(){this.loadCoreResourcesComplement()}.bind(this))}s.hasNoAdapter=false;return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UsageAnalytics", ["sap/base/Log","sap/ui/core/Core","sap/ui/core/Configuration","sap/ui/Device","sap/ui/thirdparty/jquery"],function(e,t,s,i,jQuery){"use strict";function n(n,a,r){var o=r&&r.config||{},u=[],l=false,c=false,d,f;window.oCustomProperties={};this.setLegalText=function(e){d=e;if(f){this.init(f.usageAnalyticsTitle,f.iAgree,f.iDisagree,f.remindMeLater)}};this.getLegalText=function(){return d};this.setTrackUsageAnalytics=function(t){var s=jQuery.Deferred();var i=sap.ushell.Container.getUser();var n=i.getTrackUsageAnalytics();sap.ushell.Container.getServiceAsync("UserInfo").then(function(a){if(n!==t){i.setTrackUsageAnalytics(t);var r=a.updateUserPreferences(i);r.done(function(){i.resetChangedProperty("trackUsageAnalytics");if(!c&&t){this.start()}else if(c&&t===false){window.swa.disable()}else if(c&&t){window.swa.enable()}s.resolve()}.bind(this));r.fail(function(t){i.setTrackUsageAnalytics(n);i.resetChangedProperty("trackUsageAnalytics");e.error(t);s.reject(t)})}else{s.resolve()}}.bind(this)).catch(function(){e.error("Getting UserInfo service failed.");s.reject("Getting UserInfo service failed.")});return s.promise()};this.showLegalPopup=function(){sap.ui.require(["sap/m/Text","sap/m/Dialog","sap/m/Button","sap/m/library"],function(e,t,s,n){var a=n.ButtonType;var r=new t("agreementMessageBox",{title:f.usageAnalyticsTitle,type:"Message",stretch:i.system.phone,buttons:[new s("remindMeLaterButton",{text:f.remindMeLater,press:function(){r.close()}}),new s("iAgreeButton",{text:f.iAgree,type:a.Emphasized,press:function(){this.setTrackUsageAnalytics(true);r.close()}.bind(this)}),new s("iDisagreeButton",{text:f.iDisagree,press:function(){this.setTrackUsageAnalytics(false);r.close()}.bind(this)})],afterClose:function(){r.destroy()},content:new e({text:d})}).addStyleClass("sapUshellUsageAnalyticsPopUp").addStyleClass("sapContrastPlus");r.open()}.bind(this))};this.systemEnabled=function(){if(!o.enabled||!o.pubToken||this.isSetUsageAnalyticsPermitted()&&!d){if(!o.pubToken){e.warning("No valid pubToken was found in the service configuration")}if(!d){e.warning("No Legal text message found.")}return false}return true};this.userEnabled=function(){var e=sap.ushell.Container.getUser();if(!this.systemEnabled()){return false}return e.getTrackUsageAnalytics()};this.start=function(){t.getEventBus().publish("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted");this._initUsageAnalyticsLogging();c=true;window.swa.custom2={ref:s.getLanguage()}};this.init=function(e,t,s,i){f={usageAnalyticsTitle:e,iAgree:t,iDisagree:s,remindMeLater:i};if(this.systemEnabled()&&!c){if(!this.isSetUsageAnalyticsPermitted()){this.start()}else if(d){if(this.userEnabled()===true){this.start()}else if(this.userEnabled()===null||this.userEnabled()===undefined){this.showLegalPopup()}}}};this.setCustomAttributes=function(e){var t,s="attribute",i,n="custom",a,r,o="customFunction";if(!this.userEnabled()&&this.isSetUsageAnalyticsPermitted()){return}for(t=1;t<6;t++){a=n.concat(t+4);if(window.swa[a]!==undefined){continue}i=s+t;if(e[i]===undefined){continue}if(jQuery.isFunction(e[i])){r=o+t;window[r]=e[i];window.swa[a]={ref:r}}else{window.swa[a]={ref:e[i]}}}};this.logCustomEvent=function(e,t,s){if(!this.userEnabled()&&this.isSetUsageAnalyticsPermitted()){return}if(!this._isAnalyticsScriptLoaded()){this._addDelayedEvent(e,t,s);return}if(s){s.unshift(t);s.unshift(e);window.swa.trackCustomEvent.apply(window.swa.trackCustomEvent,s)}else{window.swa.trackCustomEvent(e,t)}};window._trackingScriptsLoaded=function(){var e,t;l=true;for(e=0;e<u.length;e++){t=u[e];this.logCustomEvent(t.eventType,t.customEventValue,t.aAdditionalValues)}u=null};this._initUsageAnalyticsLogging=function(){if(window.swa===undefined){window.swa={}}window.swa.pubToken=o.pubToken;window.swa.baseUrl=o.baseUrl;window.swa.bannerEnabled=false;window.swa.loggingEnabled=true;window.swa.visitorCookieTimeout=63113852;window.swa.dntLevel=1;window.swa.trackerReadyCallback=window._trackingScriptsLoaded.bind(this);window.swa.clicksEnabled=o.logClickEvents!==false;window.swa.pageLoadEnabled=o.logPageLoadEvents!==false;this._handlingTrackingScripts()};this._handlingTrackingScripts=function(){var t=document,s=t.createElement("script"),i=t.getElementsByTagName("script")[0];s.onerror=function(){e.warning("SWA scripts not loaded!")};s.defer=true;s.async=true;s.src=window.swa.baseUrl+"js/privacy.js";i.parentNode.insertBefore(s,i)};this._isAnalyticsScriptLoaded=function(){return l};this.isSetUsageAnalyticsPermitted=function(){if(o.setUsageAnalyticsPermitted===undefined){return true}return o.setUsageAnalyticsPermitted};this._addDelayedEvent=function(e,t,s){var i={eventType:e,customEventValue:t,aAdditionalValues:s};u.push(i)}}n.hasNoAdapter=true;return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserDefaultParameterPersistence", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery"],function(e,t,r,jQuery){"use strict";var n=["value","extendedValue","noEdit","alwaysAskPlugin","_shellData","pluginData"];function i(e){this._oAdapter=e;this._oData={}}i.prototype._cleanseValue=function(e){var r=t({},e);for(var i in r){if(r.hasOwnProperty(i)&&n.indexOf(i)<0){delete r[i]}}return r};i.prototype._getSystemContextPromise=function(t){if(!t){e.warning("UserDefaultParameterPersistence: The systemContext was not provided, using defaultSystemContext as fallback");return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext()})}return Promise.resolve(t)};i.prototype.loadParameterValue=function(t,n){var i=new jQuery.Deferred;this._getSystemContextPromise(n).then(function(n){var s=r.get([n.id,t],this._oData);if(s!==undefined){i.resolve(s)}else{this._oAdapter.loadParameterValue(t,n).done(function(s){var a=this._cleanseValue(s);r.set([n.id,t],a,this._oData);e.debug('[UserDefaults] Fetched "'+t+'" for SystemContext='+n.id+" from Persistence",JSON.stringify(a,null,2));i.resolve(a)}.bind(this)).fail(i.reject.bind(this))}}.bind(this));return i.promise()};i.prototype.saveParameterValue=function(t,n,i){var s=new jQuery.Deferred;var a;this._getSystemContextPromise(i).then(function(i){if(!n){return this.deleteParameter(t,i).done(s.resolve).fail(s.reject)}a=this._cleanseValue(n);if(n&&n.noStore===true){e.debug('[UserDefaults] Skipped Save "'+t+'" for SystemContext='+i.id,"noStore=true");return s.resolve()}e.debug('[UserDefaults] Saving "'+t+'" for SystemContext='+i.id+" to Persistence",JSON.stringify(a,null,2));r.set([i.id,t],a,this._oData);return this._oAdapter.saveParameterValue(t,a,i).done(s.resolve).fail(s.reject)}.bind(this));return s.promise()};i.prototype.deleteParameter=function(t,r){var n=new jQuery.Deferred;this._getSystemContextPromise(r).then(function(r){if(this._oData[r.id]){e.debug('[UserDefaults] Deleting "'+t+'" for SystemContext='+r.id+" from Persistence");delete this._oData[r.id][t]}return this._oAdapter.deleteParameter(t,r).done(n.resolve).fail(n.reject)}.bind(this));return n.promise()};i.prototype.getStoredParameterNames=function(e){var t=new jQuery.Deferred;this._getSystemContextPromise(e).then(function(e){this._oAdapter.getStoredParameterNames(e).done(function(e){e.sort();t.resolve(e)}).fail(t.reject.bind(t))}.bind(this));return t.promise()};i.hasNoAdapter=false;return i},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserDefaultParameters", ["sap/base/Log","sap/base/util/deepEqual","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ui/base/EventProvider","sap/ui/thirdparty/jquery","sap/ushell/utils"],function(e,t,a,n,r,jQuery,i){"use strict";var s="valueStored";var o=["value","noEdit","noStore","extendedValue","alwaysAskPlugin"];function u(u,l,f,d){this._aPlugins=[];this._oUserDefaultParametersNames={};this._oWasParameterPersisted={};var c=this;var h=new r;function m(e){var t=typeof e.getComponentData==="function"&&e.getComponentData()&&e.getComponentData().config&&e.getComponentData().config["sap-priority"]||0;if(typeof t!=="number"||isNaN(t)){return 0}return t}this._insertPluginOrdered=function(e,t){var a=m(t),n,r;for(n=0;n<e.length&&t;++n){r=m(e[n]);if(t&&a>r){e.splice(n,0,t);t=undefined}}if(t){e.push(t)}return e};this.registerPlugin=function(e){this._aPlugins=this._insertPluginOrdered(this._aPlugins,e)};this._getUserDefaultValueFromPlugin=function(t,a,n,r){var i;if(typeof t.getUserDefault==="function"){i=new Promise(function(i,s){t.getUserDefault(a,r,n).done(function(s){var o=s||r;var u=this._getComponentNameOfPlugin(t);e.debug('[UserDefaults] Fetched "'+a+'" for SystemContext='+n.id+" from Plugin="+u,JSON.stringify(o,null,2));i(o)}.bind(this)).fail(function(){e.error('invocation of getUserDefault("'+a+'") for plugin '+c._getComponentNameOfPlugin(t)+" rejected.",null,"sap.ushell.services.UserDefaultParameters");i(r)})}.bind(this))}else{i=Promise.resolve(r)}return i};this._iterateOverPluginsToGetDefaultValue=function(t,a,n,r){return new Promise(function(i,s){r.loadPlugins("UserDefaults").done(function(){var e=this._aPlugins.reduce(function(e,a){var r=e.then(this._getUserDefaultValueFromPlugin.bind(this,a,t,n));return r}.bind(this),Promise.resolve(a));e.then(i)}.bind(this)).fail(function(){e.error("Cannot get value for "+t+". One or more plugins could not be loaded.");s("Initialization of plugins failed")})}.bind(this))};this._getStoreDate=function(){return(new Date).toString()};this._storeValue=function(e,t,a,n){if(a&&t.extendedValue){return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(r){return new Promise(function(i){r.getUserDefaultParameterNames(n).done(function(r){var s=this._extractKeyArrays(r);var o=s.extended.indexOf(e)<0;this._saveParameterValue(e,t,a,o,n).then(i)}.bind(this)).fail(function(){this._saveParameterValue(e,t,a,false,n).then(i)}.bind(this))}.bind(this))}.bind(this))}return this._saveParameterValue(e,t,a,false,n)};this._saveParameterValue=function(e,t,n,r,o){if(r){t.extendedValue=undefined}if(n&&this._valueIsEmpty(t)){t=undefined;this._oWasParameterPersisted[e]=false}else{t._shellData=a({storeDate:this._getStoreDate()},t._shellData)}return sap.ushell.Container.getServiceAsync("UserDefaultParameterPersistence").then(function(a){return new Promise(function(n){a.saveParameterValue(e,t,o).always(function(){var a={parameterName:e,parameterValue:i.clone(t||{}),systemContext:o};h.fireEvent(s,a);n(e)})})})};this._getPersistedValue=function(e,t){return new Promise(function(a,n){sap.ushell.Container.getServiceAsync("UserDefaultParameterPersistence").then(function(r){r.loadParameterValue(e,t).done(a).fail(n)})})};this._valueIsEmpty=function(e){return!e||!e.value&&!e.extendedValue};this._haveSameMembersValue=function(e,a,n){return n.every(function(n){return e[n]===a[n]||t(e[n],a[n])})};this._getUserDefaultParameterNames=function(e){if(!this._oUserDefaultParametersNames[e.id]){this._oUserDefaultParametersNames[e.id]=new Promise(function(t){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(a){a.getUserDefaultParameterNames(e).done(function(e){var a=this._extractKeyArrays(e);var n=a.extended;var r=a.allParameters;var i=this._arrayToObject(r);t({aAllParameterNames:r,aExtendedParameterNames:n,oMetadataObject:i})}.bind(this))}.bind(this))}.bind(this))}return this._oUserDefaultParametersNames[e.id]};this._isRelevantParameter=function(e,t){return this._getUserDefaultParameterNames(t).then(function(t){if(!t.aAllParameterNames||t.aAllParameterNames.indexOf(e)===-1){throw new Error('The given parameter "'+e+'" is not part of the list of parameters for the given system context.')}})};this.hasRelevantMaintainableParameters=function(e){var t=false;var a=[];return new Promise(function(r){this._getUserDefaultParameterNames(e).then(function(i){if(!n(i)&&i.aAllParameterNames){i.aAllParameterNames.forEach(function(n){var r=this.getValue(n,e);a.push(r);r.done(function(e){if(e&&!e.hasOwnProperty("noEdit")){t=true}})}.bind(this));jQuery.when.apply(undefined,a).done(function(){r(t)}).fail(function(){r()})}else{r()}}.bind(this))}.bind(this))};this.getValue=function(e,t){var a=new jQuery.Deferred;this._isRelevantParameter(e,t).then(function(){return this._getPersistedValue(e,t).then(function(t){this._oWasParameterPersisted[e]=true;return t||{}}.bind(this)).catch(function(){return{value:undefined}})}.bind(this)).then(function(e){var t=i.clone(e);var n=!e._shellData&&this._valueIsEmpty(e)||e.noStore||e.alwaysAskPlugin;if(!n){a.resolve(e);return}return Promise.all([t,e,sap.ushell.Container.getServiceAsync("PluginManager")])}.bind(this)).then(function(n){var r=n[0];var i=n[1];var s=n[2];return this._iterateOverPluginsToGetDefaultValue(e,i,t,s).then(function(n){if(!this._oWasParameterPersisted[e]||!this._haveSameMembersValue(r,n,o)){this._oWasParameterPersisted[e]=true;this._storeValue(e,n,false,t).then(function(){a.resolve(n)})}else{a.resolve(n)}}.bind(this)).catch(a.reject)}.bind(this)).catch(function(){a.resolve({value:undefined})});return a.promise()};this._addParameterValuesToParameters=function(e,t,a){var n=new jQuery.Deferred;var r=[];t.forEach(function(t){var n=this.getValue(t,a);r.push(n);n.done(function(a){e[t].valueObject=a})}.bind(this));jQuery.when.apply(jQuery,r).done(n.resolve.bind(n,e)).fail(n.reject.bind(n,e));return n.promise()};this._arrayToObject=function(e){var t={};e.forEach(function(e){t[e]={}});return t};this._getComponentNameOfPlugin=function(e){try{return e.getMetadata().getComponentName()||""}catch(e){return"'name of plugin could not be determined'"}};this._getEditorDataAndValue=function(t,n,r,i,s){var o=this;var u=[];var l=[];this._aPlugins.forEach(function(t){if(typeof t.getEditorMetadata==="function"){var a=new jQuery.Deferred;u.push(a);try{var n=u.length-1;t.getEditorMetadata(i,s).done(function(e){l[n]=e}).always(a.resolve).fail(function(){e.error("EditorMetadata for plugin "+o._getComponentNameOfPlugin(t)+"cannot be invoked.",null,"sap.ushell.services.UserDefaultParameters");a.resolve()})}catch(t){e.error("Error invoking getEditorMetaData on plugin: "+t+t.stack,null,"sap.ushell.services.UserDefaultParameters");a.resolve()}}});jQuery.when.apply(jQuery,u).done(function(){var u=[];var f=l.reverse().reduce(function(e,t){n.forEach(function(a){if(t[a]&&t[a].editorMetadata){e[a].editorMetadata=t[a].editorMetadata}});return e},i);n.forEach(function(e){if(!(f[e]&&f[e].editorMetadata)){u.push(e)}});o._addParameterValuesToParameters(f,n,s).done(function(n){var i=a({},n),s;r.forEach(function(e){if(i[e]){i[e].editorMetadata=i[e].editorMetadata||{};i[e].editorMetadata.extendedUsage=true}});s=Object.keys(i).splice(0);s.forEach(function(e){var t;if(i[e].valueObject&&i[e].valueObject.noEdit===true){delete i[e];t=u.indexOf(e);if(t>=0){u.splice(t,1)}}});if(u.length>0){e.error('The following parameter names have no editor metadata and thus likely no configured plugin:\n"'+u.join('",\n"')+'".')}t.resolve(i)}).fail(t.reject.bind(t))})};this.editorGetParameters=function(t){var a=new jQuery.Deferred;Promise.all([sap.ushell.Container.getServiceAsync("PluginManager"),this._getUserDefaultParameterNames(t)]).then(function(n){var r=n[0];var i=n[1];if(i.oMetadataObject.length===0){a.resolve({})}else{r.loadPlugins("UserDefaults").done(function(){this._getEditorDataAndValue(a,i.aAllParameterNames,i.aExtendedParameterNames,i.oMetadataObject,t)}.bind(this)).fail(function(){e.error("One or more plugins could not be loaded");a.reject("Initialization of plugins failed")})}}.bind(this));return a.promise()};this._extractKeyArrays=function(e){var t={simple:e&&e.simple&&Object.keys(e.simple).sort()||[],extended:e&&e.extended&&Object.keys(e.extended).sort()||[]};var a=t.extended.filter(function(e){return t.simple.indexOf(e)<0});t.allParameters=t.simple.concat(a).sort();return t};this.editorSetValue=function(e,t,a){var n=new jQuery.Deferred;this._storeValue(e,t,true,a).then(n.resolve);return n.promise()};this.attachValueStored=function(e){h.attachEvent(s,e)};this.detachValueStored=function(e){h.detachEvent(s,e)}}u.hasNoAdapter=true;return u},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserInfo", ["sap/base/Log","sap/ushell/Config","sap/ushell/User"],function(e,t,r){"use strict";function s(t,r){this.getId=function(){return sap.ushell.Container.getUser().getId()};this.getFirstName=function(){return sap.ushell.Container.getUser().getFirstName()};this.getLastName=function(){return sap.ushell.Container.getUser().getLastName()};this.getFullName=function(){return sap.ushell.Container.getUser().getFullName()};this.getEmail=function(){return sap.ushell.Container.getUser().getEmail()};this.getUser=function(){return sap.ushell.Container.getUser()};this.getShellUserInfo=function(){return Promise.resolve({id:this.getId(),email:this.getEmail(),firstName:this.getFirstName(),lastName:this.getLastName(),fullName:this.getFullName()})};this.getThemeList=function(){var r=t.getThemeList();r.fail(function(){e.error("getThemeList failed")});return r};this.updateUserPreferences=function(){var r=t.updateUserPreferences(sap.ushell.Container.getUser());r.fail(function(){e.error("updateAttributes: ")});return r};this.getLanguageList=function(){var r=t.getLanguageList();r.fail(function(){e.error("getLanguageList failed")});return r};this.getUserSettingList=function(){var r=t.getUserProfilePropertyValueLists();r.fail(function(){e.error("getUserProfilePropertyValueLists failed")});return r};this.getUserSettingListEditSupported=function(){if(typeof t.getUserProfilePropertyValueLists!=="undefined"){return true}return false}}s.hasNoAdapter=false;return s},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserRecents", ["sap/ui/base/Object","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/base/util/ObjectPath","./_UserRecents/RecentsList","./_UserRecents/RecentActivity","./_UserRecents/RecentAppsUsage"],function(e,jQuery,t,o,c,r,n){"use strict";var a=e.extend("sap.ushell.services.UserRecents",{constructor:function(){this.oRecentSearches=new c("RecentSearches",10,a._compareSearchItems);this.oRecentDataSources=new c("RecentDataSources",6,a._compareDataSources);this.oRecentApps=new c("RecentApps",6,a._compareApps);this.oRecentActivity=new r(500);this.oAppsUsage=new n}});a._compareSearchItems=function(e,t){var o=false;if(e.oDataSource&&t.oDataSource){if(e.oDataSource.objectName&&t.oDataSource.objectName){o=e.sTerm===t.sTerm&&e.oDataSource.objectName.value===t.oDataSource.objectName.value}if(!e.oDataSource.objectName&&!t.oDataSource.objectName){o=e.sTerm===t.sTerm}}if(!e.oDataSource&&!t.oDataSource){o=e.sTerm===t.sTerm}return o};a._compareDataSources=function(e,t){if(e.objectName&&t.objectName){return e.objectName.value===t.objectName.value}return false};a._compareApps=function(e,t){return e.semanticObject===t.semanticObject&&e.action===t.action};a.prototype.addActivity=function(e){var t=new jQuery.Deferred;this.oRecentActivity.newItem(e).done(function(){this.oRecentActivity.getRecentItems().done(t.resolve).fail(t.reject)}.bind(this)).fail(t.reject);return t.promise()};a.prototype.clearRecentActivities=function(){return this.oRecentActivity.clearAllActivities()};a.prototype.getRecentActivity=function(){return this.oRecentActivity.getRecentItems()};a.prototype.getFrequentActivity=function(){return this.oRecentActivity.getFrequentItems()};a.prototype.noticeDataSource=function(e){var t=o.get("objectName.value",e)||"";var c=o.get("objectName",e)||"";var r=t.toLowerCase()==="$$all$$";var n=c.toLowerCase()==="$$all$$";if(!r&&!n){var a=new jQuery.Deferred;this.oRecentDataSources.newItem(e).done(function(){this.oRecentDataSources.getRecentItems().done(a.resolve).fail(a.reject)}.bind(this)).fail(a.reject);return a.promise()}return this.oRecentDataSources.getRecentItems()};a.prototype.addDataSourceActivity=a.prototype.noticeDataSource;a.prototype.getRecentDataSources=function(){return this.oRecentDataSources.getRecentItems()};a.prototype.noticeSearch=function(e){var t=new jQuery.Deferred;this.oRecentSearches.newItem(e).done(function(){this.oRecentSearches.getRecentItems().done(t.resolve).fail(t.reject)}.bind(this)).fail(t.reject);return t.promise()};a.prototype.addSearchActivity=a.prototype.noticeSearch;a.prototype.getRecentSearches=function(){return this.oRecentSearches.getRecentItems()};a.prototype.noticeApp=function(e){var t=new jQuery.Deferred;this.oRecentApps.newItem(e).done(function(){this.oRecentApps.getRecentItems().done(t.resolve).fail(t.reject)}.bind(this)).fail(t.reject);return t.promise()};a.prototype.addAppActivity=a.prototype.noticeApp;a.prototype.getRecentApps=function(){return this.oRecentApps.getRecentItems()};a.prototype.addAppUsage=function(e){var o=t.getBasicHash(e);this.oAppsUsage.addAppUsage(o)};a.prototype.getAppsUsage=function(){return this.oAppsUsage.getAppsUsage()};a.hasNoAdapter=true;return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/VisualizationDataProvider", ["sap/ushell/resources","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/base/Log","sap/ushell/Config"],function(i,t,jQuery,e,a,o,r){"use strict";var l=e.DisplayFormat;function n(){this.S_COMPONENT_NAME="sap.ushell.services.VisualizationDataProvider";this._init.apply(this,arguments)}n.prototype._init=function(i){this.oLaunchPageAdapter=i;this.oCatalogTilePromise=null};n.prototype._getCatalogTileIndex=function(){if(this._oCatalogTileIndexPromise){return this._oCatalogTileIndexPromise}var i=this.oLaunchPageAdapter;return i._getCatalogTileIndex()};n.prototype._getCatalogTiles=function(){if(this.oCatalogTilePromise){return this.oCatalogTilePromise}var i=this.oLaunchPageAdapter;this.oCatalogTilePromise=new Promise(function(t,e){i.getCatalogs().then(function(a){var o=[];var l=[];var n=[];var s={};for(var u=0;u<a.length;u++){if(typeof a[u].ui2catalog==="undefined"||a[u].ui2catalog.getType()!=="REMOTE"){o.push(i.getCatalogTiles(a[u]).then(function(i){l.push(i)}))}}jQuery.when.apply(null,o).done(function(){n=[].concat.apply([],l);for(var e=0;e<n.length;e++){var a=i.getCatalogTileId(n[e]);if(r.last("/core/stableIDs/enabled")){a=i.getStableCatalogTileId(n[e])}s[a]=n[e]}t(s)}).fail(e)}).fail(e)});return this.oCatalogTilePromise};n.prototype.getVisualizationData=function(){var t;var e=this.oLaunchPageAdapter;if(this._oVisualizationDataPromise){return this._oVisualizationDataPromise}this._oVisualizationDataPromise=Promise.all([this._getCatalogTiles(),this._getCatalogTileIndex()]).then(function(i){var a=i[0];t=i[1];var o=Object.keys(a).filter(function(i){return e.isTileIntentSupported(a[i])}).map(function(i){var t=a[i];if(!e.getCatalogTilePreviewTitle(t)){return new Promise(function(i,a){e.getCatalogTileViewControl(t).done(i).fail(a)}).then(function(e){return{id:i,catalogTile:t,view:e}})}return Promise.resolve({id:i,catalogTile:t})});return Promise.all(o)}).then(function(i){return i.reduce(function(i,a){var o=a.id;var r=a.view;var l=a.catalogTile;var n=l.getChip().getBaseChipId();i.visualizations[o]={vizType:n,title:e.getCatalogTilePreviewTitle(l),subTitle:e.getCatalogTilePreviewSubtitle(l),icon:e.getCatalogTilePreviewIcon(l),info:e.getCatalogTilePreviewInfo(l),keywords:e.getCatalogTileKeywords(l),size:e.getCatalogTileSize(l),indicatorDataSource:e.getCatalogTilePreviewIndicatorDataSource(l),url:e.getCatalogTileTargetURL(l),numberUnit:e.getCatalogTileNumberUnit(l),isCustomTile:e.isCustomTile&&e.isCustomTile(l)};if(r){r.destroy()}if(t[o]){i.visualizations[o]._instantiationData={platform:"ABAP",simplifiedChipFormat:false,chip:t[o]}}if(i.visualizations[o].isCustomTile&&!i.vizTypes[n]){i.vizTypes[n]={id:n,url:undefined,vizOptions:{displayFormats:this._getDisplayFormats(l,i.visualizations[o].size)},tileSize:i.visualizations[o].size}}return i}.bind(this),{visualizations:{},vizTypes:{},page:{}})}.bind(this)).catch(function(t){var e={component:this.S_COMPONENT_NAME,description:i.i18n.getText("VisualizationDataProvider.CannotLoadData"),detail:t};return Promise.reject(e)}.bind(this));return this._oVisualizationDataPromise};n.prototype._getDisplayFormats=function(i,t){var e=["tile"];var a="tile";var o=i.getContract("types");if(o){e=o.getAvailableTypes();a=o.getDefaultType()}return{supported:this._mapDisplayFormats(e,t),default:this._mapDisplayFormats([a],t)[0]}};n.prototype._mapDisplayFormats=function(i,t){var e={tile:l.Standard,tilewide:l.StandardWide,link:l.Compact,flat:l.Flat,flatwide:l.FlatWide};return i.map(function(i){i=e[i];if(i===l.Standard&&t==="1x2"){return l.StandardWide}return i})};n.prototype.loadVizType=function(i){var t={chipId:i};return a.loadChipInstanceFromSimplifiedChip(t).then(function(t){var e=a.getTileSize(t);return{id:i,url:undefined,vizOptions:{displayFormats:this._getDisplayFormats(t,e)},tileSize:e}}.bind(this)).catch(function(t){o.error("The chipInstance '"+i+"' could not be loaded: ",t)})};n.hasNoAdapter=false;return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/VisualizationInstantiation", ["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/ushell/services/_VisualizationInstantiation/VizInstanceAbap","sap/ushell/services/_VisualizationInstantiation/VizInstanceCdm","sap/ushell/services/_VisualizationInstantiation/VizInstanceLaunchPage","sap/ushell/services/_VisualizationInstantiation/VizInstanceLink","sap/m/library","sap/ushell/library","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations"],function(t,e,a,i,n,s,o,r,d,c){"use strict";var l=s.LoadState;var u=o.DisplayFormat;function p(){}p.prototype.instantiateVisualization=function(s){var o;var p=r.get("_instantiationData.platform",s);var v={vizRefId:s.id,title:s.title,subtitle:s.subtitle,icon:s.icon,keywords:s.keywords,instantiationData:s._instantiationData,indicatorDataSource:s.indicatorDataSource,dataSource:s.dataSource,contentProviderId:s.contentProviderId,vizConfig:s.vizConfig,supportedDisplayFormats:s.supportedDisplayFormats,displayFormat:s.displayFormatHint,numberUnit:s.numberUnit,dataHelpId:s.vizId,preview:s.preview};if(v.indicatorDataSource){v.indicatorDataSource.ui5object=true}if((p==="ABAP"||p==="CDM")&&v.displayFormat===u.Compact){this._cleanInstantiationDataForLink(v);p="LINK"}switch(p){case"ABAP":o=new e(v);break;case"CDM":o=new a(v);break;case"LINK":o=new n(v);break;case"LAUNCHPAGE":o=new i(v);break;default:return new t({state:l.Failed})}o.setTargetURL(s.targetURL);if(p!=="LINK"){o.setInfo(s.info)}if(c.isStandardVizType(s.vizType)){try{o.load().then(function(){d.emit("VizInstanceLoaded",s.id)})}catch(t){o.setState(l.Failed);d.emit("VizInstanceLoaded",s.id)}}else{o.setState(l.Loading);d.once("CoreResourcesComplementLoaded").do(function(){try{o.load(true).then(function(){o.setState(l.Loaded)})}catch(t){o.setState(l.Failed)}})}return o};p.prototype._cleanInstantiationDataForLink=function(t){delete t.info;delete t.icon;delete t.keywords;delete t.instantiationData;delete t.dataSource;delete t.contentProviderId;delete t.vizConfig;delete t.numberUnit;delete t.indicatorDataSource;delete t.preview};p.hasNoAdapter=true;return p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/AppState", ["sap/base/Log","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";function e(e,n,r,a,o,h,c,p,_){this._oServiceInstance=e;this._sKey=n;this._sData=a;this._sAppName=o;this._sACHComponent=h;this._bTransient=c;this._bModifiable=r;this._sPersistencyMethod=p;this._oPersistencySettings=_;if(this._bModifiable){this.setData=function(e){try{this._sData=JSON.stringify(e)}catch(e){t.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined}};this.save=s.bind(this);this.delete=i.bind(this)}}function s(){var t=new jQuery.Deferred;this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent,this._bTransient,this._sPersistencyMethod,this._oPersistencySettings).done(function(){t.resolve()}).fail(function(e){t.reject(e)});return t.promise()}function i(){var t=new jQuery.Deferred;this._oServiceInstance._deleteAppState(this._sKey).done(function(){t.resolve()}).fail(function(e){t.reject(e)});return t.promise()}e.prototype.getData=function(){var e;if(this._sData===undefined||this._sData===""){return undefined}try{e=JSON.parse(this._sData)}catch(e){t.error("Could not parse ["+this._sData+"]"+e)}return e};e.prototype.getPersistencyMethod=function(){return this._sPersistencyMethod};e.prototype.getPersistencySettings=function(){return this._oPersistencySettings};e.prototype.getKey=function(){return this._sKey};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/AppStatePersistencyMethod", [],function(){"use strict";function t(){this.PersonalState="PersonalState";this.ACLProtectedState="ACLProtectedState";this.PublicState="PublicState";this.AuthorizationProtectedState="AuthorizationProtectedState"}return new t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/AppStatePersistencySettings", [],function(){"use strict";function i(i,t,e,s){this.CreatorUserID=i;this.SelectedUserIDs=t;this.RetrievalMapping=e;this.Expiration=s}return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/LimitedBuffer", [],function(){"use strict";function t(t){this.index=-1;this.capacity=t;this.array=[]}t.prototype._clear=function(){this.array=[];this.index=-1};t.prototype.addAsHead=function(t,i,e,a){this.index=(this.index+1)%this.capacity;this.array[this.index]={key:t,value:i,persistencyMethod:e,persistencySettings:a}};t.prototype.getByKey=function(t){var i,e;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===t){return this.array[e]}}return undefined};t.prototype.deleteByKey=function(t){var i,e,a=false;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===t){delete this.array[e];a=true}}return a};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/Sequentializer", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(){this.oLastPromise=new jQuery.Deferred;this.oLastPromise.resolve()}e.prototype.addToQueue=function(e){var r=new jQuery.Deferred;this.oLastPromise.always(function(){var t=e();t.done(function(){r.resolve.apply(r,arguments)}).fail(function(){r.reject.apply(r,arguments)})});this.oLastPromise=r;return r.promise()};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/SequentializingAdapter", ["sap/ushell/services/_AppState/Sequentializer"],function(e){"use strict";function t(t){this._oSequentializer=new e;this._oUnderlyingAdapter=t}t.prototype.saveAppState=function(e,t,r,n,i,p,d){var o;o=this._oUnderlyingAdapter.saveAppState.bind(this._oUnderlyingAdapter,e,t,r,n,i,p,d);return this._oSequentializer.addToQueue(o)};t.prototype.loadAppState=function(e){return this._oUnderlyingAdapter.loadAppState(e)};t.prototype.deleteAppState=function(e){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.deleteAppState){return this._oUnderlyingAdapter.deleteAppState(e)}};t.prototype.getSupportedPersistencyMethods=function(){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.getSupportedPersistencyMethods){return this._oUnderlyingAdapter.getSupportedPersistencyMethods()}return[]};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/WindowAdapter", ["sap/ushell/services/_AppState/LimitedBuffer","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,jQuery){"use strict";var r=500;var a=18;function o(){this._init.apply(this,arguments)}o.prototype._init=function(t,a,p){var n=p&&p.config&&p.config.initialAppStates||{};var i=p&&p.config&&p.config.initialAppStatesPromise;this._oServiceInstance=t;this._oBackendAdapter=a;if(!o.prototype.data){o.prototype.data=new e(r)}if(i){i.then(function(e){if(typeof e==="object"){Object.keys(e).forEach(function(t){o.prototype.data.addAsHead(t,e[t])})}})}Object.keys(n).forEach(function(e){o.prototype.data.addAsHead(e,n[e])})};o.prototype.saveAppState=function(e,t,r,a,p,n,i,s){this.sComponent=p;var d=new jQuery.Deferred;o.prototype.data.addAsHead(e,r,i,s);if(this._oBackendAdapter&&!n){return this._oBackendAdapter.saveAppState(e,t,r,a,p,i,s)}d.resolve();return d.promise()};o.prototype._checkIfTransient=function(e){return e.startsWith("TAS")};o.prototype.loadAppState=function(e){var r=new jQuery.Deferred,p=o.prototype.data.getByKey(e);if(p){setTimeout(function(){r.resolve(e,p.value,p.persistencyMethod,p.persistencySettings)},0);return r.promise()}try{if(window.opener&&window.opener.sap&&window.opener.sap.ushell){var n=window.opener.sap.ui.require("sap/ushell/services/AppState").WindowAdapter.prototype.data.getByKey(e);if(n){r.resolve(e,n.value);return r.promise()}}}catch(e){if(e.code===a){t.warning("AppState.js - loadAppState: Opener is not of the same origin and cannot be used for AppState resolving.")}else{t.warning("AppState.js - loadAppState: Opener is a FLP but AppState could not get resolved from there.")}}if(this._oBackendAdapter&&!this._checkIfTransient(e)){this._oBackendAdapter.loadAppState(e).done(function(e,t,a,p){o.prototype.data.addAsHead(e,t);r.resolve(e,t,a,p)}).fail(r.reject.bind(r));return r.promise()}r.reject("AppState.js - loadAppState: Application State could not be loaded");return r.promise()};o.prototype.deleteAppState=function(e){var t=new jQuery.Deferred;o.prototype.data.deleteByKey(e);if(this._oBackendAdapter&&this._oBackendAdapter.deleteAppState&&!this._checkIfTransient(e)){return this._oBackendAdapter.deleteAppState(e)}t.resolve();return t.promise()};o.prototype.getSupportedPersistencyMethods=function(){if(this._oBackendAdapter&&this._oBackendAdapter.getSupportedPersistencyMethods){return this._oBackendAdapter.getSupportedPersistencyMethods()}return[]};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/Formatter", [],function(){"use strict";function e(e){return"#"+e.semanticObject+"-"+e.action+"{"+n(e.signature)+"}"}function r(e){var r=e.match(/^#(.+?)-(.+?)({(.+)})?$/);if(!r){throw"Cannot parse inbound"}var n={semanticObject:r[1],action:r[2],signature:{parameters:{}}};if(!r[3]){return n}n.signature=a(r[4]);return n}function n(e){var r=e||{},n=r.parameters||{},a={optional:"[FORMAT]",required:"FORMAT"},t={regexp:"/VALUE/",reference:"@VALUE@",value:"VALUE",plain:"VALUE",_unknown:"?VALUE?"},u={allowed:"<+>",notallowed:"<->",ignored:"<o>",_unknown:"<?>"};var i=n&&Object.prototype.toString.apply(n)==="[object Object]"&&Object.keys(n).length>0;if(!i){return"<no params>"+(u[r.additionalParameters]||u._unknown)}var o=[];Object.keys(n).forEach(function(e){var r=n[e],u=r.required?"required":"optional",i=r.filter&&r.filter.value,l=r.defaultValue&&r.defaultValue.value,f=r.filter&&r.filter.format||"plain",s=r.defaultValue&&r.defaultValue.format||"plain";var c=[],p=t[f]||t._unknown,d=t[s]||t._unknown;if(i){c.push(a["required"].replace("FORMAT",p.replace("VALUE",i)))}if(l){c.push(a["optional"].replace("FORMAT",d.replace("VALUE",l)))}o.push(a[u].replace("FORMAT",e+":"+c.join("")))});return o.join(",")+(u[r.additionalParameters]||u._unknown)}function a(e){function r(e){var r=[{re:new RegExp(/^[/](.+)[/]$/),format:"regexp"},{re:new RegExp(/^[@](.+)[@]$/),format:"reference"},{re:new RegExp(/^[?](.+)[?]$/),format:"???"}].reduce(function(r,n){var a=e.match(n.re);if(r){return r}if(!a){return null}return{format:n.format,value:a[1]}},null);if(r){return r}return{value:e}}function n(e){var n,a,t,u,i,o,l,f,s,c,p,d;d="<no params>";n="[^\\]\\[]";p="("+n+"+?):("+n+"*)(.*)";c="\\["+p+"\\]";s=d+"|"+c+"|"+p;f=new RegExp("^"+s+"$");i={success:false,name:null,value:{}};l=e.match(f);if(!l){return i}o=l.shift();while(l.length>0){u=l.shift();t=l.shift();a=l.shift();if(u){i.name=u;if(t){i.value.filter=r(t)}if(a){i.value.defaultValue=r(a.replace(/\[(.+)\]/,"$1"))}i.value.required=o.charAt(0)!=="["}}i.success=true;return i}function a(e){return[{"<+>":"allowed"},{"<->":"notallowed"},{"<o>":"ignored"}].reduce(function(r,n,a,t){if(r){return r}var u=Object.keys(n)[0];if(e===u){return n[u]}return null},null)}function t(e){var r=[];e.split(":").reduce(function(e,n,a,t){var u,i,o;if(a===0){return n}if(a<t.length-1){o=n.split(",");if(o.length>1){i=o.pop();u=o.join(",")}else{return e+":"+n}}else{u=n}r.push([e,u].join(":"));return i},"");return r}var u={parameters:{}};var i=e.substr(e.length-3,3);var o=!!i.match(/<[?o+-]>/);var l=e;if(o){l=e.substr(0,e.length-3)}var f=t(l);f.forEach(function(r){var a=n(r);if(!a.success){throw new Error("Cannot parse parameters from "+e)}if(a.name){u.parameters[a.name]=a.value}});if(o){var s=a(i);if(s){u.additionalParameters=a(i)}}else{u.additionalParameters="ignored"}return u}return{formatInboundSignature:n,parseInboundSignature:a,parseInbound:r,formatInbound:e}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/InboundIndex", ["sap/base/util/ObjectPath","sap/base/Log"],function(e,n){"use strict";function t(){return this.index.all}function i(e){if(e==="*"||e===undefined){return this.index.all}return(this.index.segment[e]||[]).concat(this.index.always)}function a(e){return e.map(function(e){return this.index.tag[e]||[]},this).reduce(function(e,n){Array.prototype.push.apply(e,n.filter(function(e){return e.isAlreadyInUnion?false:e.isAlreadyInUnion=true}));return e},[]).map(function(e){delete e.isAlreadyInUnion;return e})}var r={getSegment:i,getAllInbounds:t,getSegmentByTags:a};function u(n,t){var i=e.get("signature.parameters.sap-tag.defaultValue.value",n);if(!i){return}if(!t.tag[i]){t.tag[i]=[]}t.tag[i].push(n)}function s(e,n){var t=e.semanticObject;if(t==="*"){n.always.push(e)}else{if(!n.segment[t]){n.segment[t]=[]}n.segment[t].push(e)}}function o(e){var t={all:e,segment:{},always:[],tag:{}};e.forEach(function(e,i){if(!e){n.warning("Void inbound provided to indexer","the inbound will be skipped");return}u(e,t);s(e,t)});r.index=t;return r}return{createIndex:o,private:{tagInbound:u,createIndex:o,segmentInbound:s}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/InboundProvider", ["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/InboundIndex"],function(n,e){"use strict";function t(){this._init.apply(this,arguments)}t.prototype._init=function(n){this._fnRetrieveInbounds=n;this._oInboundsRetrievalPromise=null};t.prototype.getInbounds=function(n){if(n){return this._getSomeInbounds(n)}return this._getAllInbounds()};t.prototype._getSomeInbounds=function(t){var i=this;return new Promise(function(o,s){i._fnRetrieveInbounds(t).done(function(t){o(e.createIndex(t.concat(n.getInbounds())))}).fail(function(){s.apply(null,arguments)})})};t.prototype._getAllInbounds=function(){var t=this;if(this._oInboundsRetrievalPromise){return this._oInboundsRetrievalPromise}this._oInboundsRetrievalPromise=new Promise(function(i,o){t._fnRetrieveInbounds().done(function(t){i(e.createIndex((t||[]).concat(n.getInbounds())))}).fail(function(){o.apply(null,arguments)})});return this._oInboundsRetrievalPromise};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/ParameterMapping", ["sap/base/Log"],function(e){"use strict";function a(a){var t={},n=a.intentParamsPlusAllDefaults;Object.keys(n).sort().forEach(function(s){var i=r(s,a.inbound.signature,n[s]);if(Array.isArray(a.intentParamsPlusAllDefaults[s])){if(t[i]){e.error('collision of values during parameter mapping : "'+s+'" -> "'+i+'"')}else{t[i]=a.intentParamsPlusAllDefaults[s]}}});a.mappedIntentParamsPlusSimpleDefaults=t}function r(e,a,r){if(!r||!Array.isArray(r)){return e}if(a&&a.parameters&&a.parameters[e]&&a.parameters[e].renameTo){return a.parameters[e].renameTo}return e}return{mapParameterNamesAndRemoveObjects:a,getRenameParameterName:r}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/generic/app/navigation/service/SelectionVariant"],function(e,t,r){"use strict";var a="sap.ushell.services.ClientSideTargetResolution.PrelaunchOperations";function n(e){if(!e){return Promise.resolve(null)}return sap.ushell.Container.getServiceAsync("AppState").then(function(t){return new Promise(function(r,a){t.getAppState(e).done(function(e){r(e)}).fail(function(e){a(e)})})})}function i(e,t,r,a,n){if(e.startupParametersModified){t.mappedIntentParamsPlusSimpleDefaults=a}if(e.defaultedParameterNamesModified){t.mappedDefaultedParamNames=n}if(e.selectionVariantModified){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){var a=e.createEmptyAppState(undefined,true);a.setData({selectionVariant:r.toJSONObject()});return new Promise(function(e,r){a.save().done(function(){t.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[a.getKey()];e(t)}).fail(function(e){r(e)})})})}return Promise.resolve(t)}function o(e){var t=e.type;switch(t){case"merge":case"split":return t+" - source: "+e.source+" & target: "+e.target;case"delete":return t+" - target: "+e.target;default:return""}}function s(e,t){if(t.getSelectOption(e)){return t.getSelectOption(e)[0].Low}return undefined}function u(e,t){if(t.getSelectOption(e)){return t.getSelectOption(e)[0].High}return undefined}function l(e,t){if(t[e]){return t[e][0]}return undefined}function f(e,t,r){var a=e.source[0],n=e.source[1],i=s(a,t),o=s(n,t),u=l(a,r),f=l(n,r),d,p,c=e.target;function m(e,t){if(t===undefined||e===t){return e}return undefined}if(i&&o){d=m(i,u);p=m(o,f)}else if(u&&f){d=m(u,i);p=m(f,o)}if(d&&p&&!t.getSelectOption(c)&&!r.hasOwnProperty(c)){t.addSelectOption(c,"I","BT",d,p);return{selectionVariantModified:true,startupParametersModified:false,defaultedParameterNamesModified:false}}return{}}function d(t,r,a){var n=t.target,i=t.source;if(!r.getSelectOption(i)){e.error("Invalid split operation: "+i+" does not exist in selection variant");return false}if(r.getSelectOption(n[0])){e.error("Invalid split operation: "+n[0]+" already exists in selection variant");return false}if(r.getSelectOption(n[1])){e.error("Invalid split operation: "+n[1]+" already exists in selection variant");return false}if(a[n[0]]){e.error("Invalid split operation: "+n[0]+" already exists in startup parameters");return false}if(a[n[1]]){e.error("Invalid split operation: "+n[1]+" already exists in startup parameters");return false}return true}function p(e,t,r){var a=e.target,n=e.source,i=d(e,t,r);if(i){var o=s(n,t),l=u(n,t);t.addSelectOption(a[0],"I","EQ",o,null);r[a[0]]=[o];t.addSelectOption(a[1],"I","EQ",l||o,null);r[a[1]]=[l||o];return{selectionVariantModified:true,startupParametersModified:true,defaultedParameterNamesModified:false}}return{}}function c(t,r,a,n){var i=t.target,o={selectionVariantModified:false,startupParametersModified:false,defaultedParameterNamesModified:false};for(var s=0;s<i.length;s++){var u=i[s];if(u==="sap-xapp-state"){e.warning("Cannot execute delete: 'sap-xapp-state' is not allowed to be deleted");continue}if(r.getParameter(u)){r.removeParameter(u);o.selectionVariantModified=true}if(r.getSelectOption(u)){r.removeSelectOption(u);o.selectionVariantModified=true}if(a[u]){delete a[u];o.startupParametersModified=true}var l=n.indexOf(u);if(l>-1){n.splice(l,1);o.defaultedParameterNamesModified=true}}return o}function m(t){var r;if(t===""){return[]}t=t.replaceAll("“",'"');t=t.replaceAll("”",'"');try{r=JSON.parse(t)}catch(t){e.error("Cannot parse operation array: sap-prelaunch-operations should be in json format.");return[]}if(!Array.isArray(r)){e.error("Invalid operation array: sap-prelaunch-operations should be an array.");return[]}return r}function g(t){if(t.length===0){return null}var r={split:true,merge:true,delete:true};var a=t.filter(function(e){return!r[e.type]});if(a.length>0){e.error("Invalid operation: the following sap-prelaunch-operations are invalid: "+a.join(", "));return null}var n=t.some(function(e){return e.type==="split"&&e.target[0]===e.target[1]});if(n){e.error("Invalid operation: split operation contains the same target value. Use two different target values instead.");return null}var i=t.some(function(e){if(e.type==="split"){return!e.hasOwnProperty("source")||!e.hasOwnProperty("target")||typeof e.source!=="string"||!Array.isArray(e.target)||Object.keys(e).length!==3||Object.keys(e.target).length!==2}if(e.type==="merge"){return!e.hasOwnProperty("source")||!e.hasOwnProperty("target")||typeof e.target!=="string"||!Array.isArray(e.source)||Object.keys(e).length!==3||Object.keys(e.source).length!==2}if(e.type==="delete"){return!e.hasOwnProperty("target")||!Array.isArray(e.target)||Object.keys(e).length!==2}});if(i){e.error("Invalid operation: one or more operations are specified in an incorrect format.");return null}return t}function v(e){var t=m(e);return g(t)}function y(t,r,n,i){var s=e.getLevel()>=e.Level.DEBUG?[]:null,u={selectionVariantModified:false,startupParametersModified:false};r.forEach(function(r){var a={};switch(r.type){case"split":a=p(r,t,n);break;case"merge":a=f(r,t,n);break;case"delete":a=c(r,t,n,i);break;default:e.error("Invalid operation: "+r.type+" prelaunch operation type is not supported")}if(s){var l=Object.keys(a).length!==0?"✅":"❌";s.push(l+" "+o(r))}if(Object.keys(a).length===0){e.warning("Cannot execute "+o(r))}u.selectionVariantModified=u.selectionVariantModified||a.selectionVariantModified;u.startupParametersModified=u.startupParametersModified||a.startupParametersModified;u.defaultedParameterNamesModified=u.defaultedParameterNamesModified||a.defaultedParameterNamesModified});if(s){e.debug(a+"\n"+s.join("\n"))}return u}function P(e,a){if(!a){return Promise.resolve(e)}var o=e.mappedIntentParamsPlusSimpleDefaults,s=e.mappedDefaultedParamNames,u=o["sap-xapp-state"]&&o["sap-xapp-state"][0],l=v(a);if(!l||l.length===0){return Promise.resolve(e)}return n(u).then(function(a){var n=a?a.getData():{},u=t({},o),f=t([],s),d;if(n.selectionVariant){d=new r(JSON.stringify(n.selectionVariant))}else{d=new r}var p=y(d,l,u,f);return i(p,e,d,u,f)})}return{executePrelaunchOperations:P,parseAndValidateOperations:v}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/Search", ["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/TechnicalParameters","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,r,n,a,i,jQuery){"use strict";var u=[undefined,"GUI","WDA","UI5"];function s(e,t){var r=e.inbound.resolutionResult;if(!r){return""}return["applicationType","ui5ComponentName","url","additionalInformation","text"].map(function(e){if(t){return r.hasOwnProperty(e)?e+":"+r[e]:""}return r.hasOwnProperty(e)?r[e]:""}).join("")}function o(e){return e.sort(function(e,t){if((e["sap-priority"]||0)-(t["sap-priority"]||0)!==0){return-((e["sap-priority"]||0)-(t["sap-priority"]||0))}if(e.priorityString<t.priorityString){return 1}if(e.priorityString>t.priorityString){return-1}var r=s(e);var n=s(t);if(r<n){return 1}else if(r>n){return-1}return 0})}function l(e,t){var r;if(e&&e["sap-priority"]&&e["sap-priority"][0]){r=parseInt(e["sap-priority"][0],10);if(!isNaN(r)){t["sap-priority"]=r}}return}function f(e,t,r,n){var a;if(!t){return true}if(!e&&e!==""){return false}a=t.value;if(t.format==="reference"){if(/UserDefault\.extended\./.test(a)){i.error("Illegal inbound: extended user default '"+a+"' used as filter");return false}if(r.hasOwnProperty(a)){return e===r[a]}n[a]=true;return true}if(t.format==="value"||t.format==="plain"||t.format===undefined){return e===t.value}else if(t.format==="regexp"){return!!e.match("^"+t.value+"$")}i.error("Illegal oFilter format");return false}function c(e){return e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult["sap.ui"]&&e.inbound.resolutionResult["sap.ui"].technology}function d(e){return e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult.appId}function p(e,t,r,n,a){var i={},u={};Object.keys(e).forEach(function(t){if(t!=="sap-ushell-defaultedParameterNames"){i[t]=e[t]}});if(!t){return i}Object.keys(t).forEach(function(e){var a=t[e],s,o=false;if(!i[e]&&a.hasOwnProperty("defaultValue")){if(a.defaultValue.format&&a.defaultValue.format==="reference"){s=a.defaultValue.value;if(r.hasOwnProperty(s)){if(typeof r[s]==="string"){i[e]=[r[s]];o=true}else if(typeof r[s]==="object"){i[e]=r[s];o=true}}else{i[e]=[a.defaultValue];n.push(a.defaultValue.value)}}else{i[e]=[a.defaultValue.value];o=true}if(o){u[e]=true}}});Object.keys(u).sort().forEach(function(e){a.push(e)});return i}function m(e,t){e.resolutionResult={contentProviderId:t.contentProviderId};if(t&&t.resolutionResult&&t.resolutionResult.hasOwnProperty("sap.platform.runtime")){e.resolutionResult["sap.platform.runtime"]=t.resolutionResult["sap.platform.runtime"]}Object.keys(e.intentParamsPlusAllDefaults).slice(0).forEach(function(t){if(!Array.isArray(e.intentParamsPlusAllDefaults[t])){if(!e.resolutionResult.oNewAppStateMembers){e.resolutionResult.oNewAppStateMembers={}}e.resolutionResult.oNewAppStateMembers[t]=e.intentParamsPlusAllDefaults[t]}})}function h(e,t){e.forEach(function(e){t[e]=true})}function v(e){var t=e.intentParamsPlusAllDefaults["sap-ui-tech-hint"]&&e.intentParamsPlusAllDefaults["sap-ui-tech-hint"][0];var r=e.defaultedParamNames&&e.defaultedParamNames.indexOf("sap-ui-tech-hint")>=0;if(t&&c(e)===t){return r?1:2}return 0}function P(e){var t=e.intentParamsPlusAllDefaults["sap-ui-app-id-hint"]&&e.intentParamsPlusAllDefaults["sap-ui-app-id-hint"][0];if(t&&t===d(e)){return 1}return 0}function g(e,t){function r(e){var t="000"+e;return t.substr(t.length-3)}return["AIDM="+P(e),"CURCP="+(t.isCurrentContentProvider?"1":"0"),e.genericSO?"g":"x","TECM="+v(e),"MTCH="+r(t.countMatchingParams),"MREQ="+r(t.countMatchingRequiredParams),"NFIL="+r(t.countMatchingFilterParams),"NDEF="+r(t.countDefaultedParams),"POT="+r(t.countPotentiallyMatchingParams),"RFRE="+r(999-t.countFreeInboundParams),"TECP="+y(e)].join(" ")}function y(e){var t=c(e);var r=u.indexOf(t);return Math.max(0,r)}function b(e,t){var r=false;if(e.signature.additionalParameters==="allowed"||e.signature.additionalParameters==="ignored"){return true}if(e.signature.additionalParameters==="notallowed"||e.signature.additionalParameters===undefined){r=Object.keys(t).every(function(t){return!(!e.signature.parameters[t]&&t.indexOf("sap-")!==0)})}else{i.error("Unexpected value of inbound for signature.additionalParameters")}return r}function R(e,t,r,a,i){function u(e,t,r){var a=n.formatInbound(r);e[a]=t.noMatchReason+(t.noMatchDebug?"| DEBUG: "+t.noMatchDebug:"")}var s=a?a():(new jQuery.Deferred).resolve(null).promise();return s.then(function(n){var a=t.reduce(function(t,a){var s=a.contentProviderId||"";var o=r[s]||{};if(!t.missingReferences[s]){t.missingReferences[s]={}}var l=M(e,a,o,t.missingReferences[s],n?n[s]:null);if(l.matches){t.matchResults.push(l)}else if(i){u(t.noMatchReasons,l,a)}return t},{matchResults:[],noMatchReasons:{},missingReferences:{}});return jQuery.when(a)})}function O(e,t,r,n,a,i){var u=Object.keys(e).every(function(r){var n=t[r],u=n&&n[0],s=e[r];if(s.required&&(u===null||u===undefined)){return false}if(s.filter){if(!f(u,s.filter,a,i)){return false}}return true});return u}function I(e,t,r,n,i){var u=e.signature.parameters,s=0,o=0,l=0,f=0,c=false,d={};function p(e){return!a.isTechnicalParameter(e)}var m=Object.keys(r).filter(p);var h=n.filter(p);Object.keys(u).filter(p).forEach(function(e){var n=t[e],a=n&&n[0],i=u[e],c=r.hasOwnProperty(e);if(c){++s;if(i.filter){++l}if(i.required){++o}}else if(a===null||a===undefined){++f}});if(i){d.countPotentiallyMatchingParams=m.filter(function(e){return u.hasOwnProperty(e)}).length}else{d.countPotentiallyMatchingParams=m.length}if(r&&r["sap-app-origin-hint"]&&(r["sap-app-origin-hint"][0]||r["sap-app-origin-hint"][0]==="")){var v=r["sap-app-origin-hint"][0];c=v===e.contentProviderId}d.countDefaultedParams=h.length;d.countMatchingParams=s;d.countMatchingRequiredParams=o;d.countMatchingFilterParams=l;d.countFreeInboundParams=f;d.isCurrentContentProvider=c;return d}function M(e,a,i,u,s){var o={inbound:a};function f(e,t,r){e.matches=false;e.noMatchReason=t;e.noMatchDebug=r;return e}function d(t){t.matches=true;t.matchesVirtualInbound=r.isVirtualInbound(a);t.parsedIntent=e;return t}var v=a.semanticObject==="*";o.genericSO=v;var P=e.semanticObject===undefined||e.semanticObject===a.semanticObject||v;if(!P){return f(o,'Semantic object "'+e.semanticObject+'" did not match')}var y=e.action===undefined||e.action===a.action;if(!y){return f(o,'Action "'+e.action+'" did not match')}var R=!a.deviceTypes||e.formFactor===undefined||a.deviceTypes[e.formFactor];if(!R){return f(o,'Form factor "'+e.formFactor+'" did not match',"Inbound: ["+Object.keys(a.deviceTypes).filter(function(e){return!!a.deviceTypes[e]}).join(", ")+"]")}var M=e.params&&e.params["sap-ui-tech-hint"]&&e.params["sap-ui-tech-hint"][0];if(e.treatTechHintAsFilter&&M){var D=c({inbound:a});if(D!==M){return f(o,'Tech Hint as filter "'+M+'" did not match',"Inbound: ["+D+"]")}}var j=[],A=[],w=e.params||{};var S=p(w,a.signature&&a.signature.parameters,i,j,A);var T=S["sap-system"]&&S["sap-system"][0],F=S["sap-app-origin"]&&S["sap-app-origin"][0],C=a.contentProviderId;if(F&&F!==C){return f(o,'Contetn provider as filter "'+F+'" did not match',"Inbound: ["+C+"]")}if(T&&typeof C==="string"&&s&&!s[T]){return f(o,'Data origin "'+T+'" is not compatible with the content provider "'+C+'"',"Inbound: ["+Object.keys(s).join(", ")+"]")}o.intentParamsPlusAllDefaults=S;o.defaultedParamNames=A;l(S,o);var N=O(a.signature.parameters,S,w,A,i,u);if(!N){return f(o,"Inbound parameter signature did not match",n.formatInboundSignature(a.signature))}var x=t.constructParameterDominatorMap(a.signature.parameters);var E=t.findDominatedDefaultParameters(S,A,x);var k=A.filter(function(e){return!E[e]});var V=t.filterObjectKeys(S,function(e){return!E[e]});if(!b(a,V)){return f(o,"Additional parameters not allowed",n.formatInboundSignature(a.signature))}var U=a.signature.additionalParameters==="ignored";if(U){t.filterObjectKeys(V,function(e){if(e.indexOf("sap-")===0){return true}if(a.signature.parameters.hasOwnProperty(e)){return true}return false},true)}var q=I(a,S,w,A,U);m(o,a);o.intentParamsPlusAllDefaults=V;o.defaultedParamNames=k;o.priorityString=g(o,q);h(j,u);return d(o)}return{match:R,matchOne:M,sortMatchingResultsDeterministic:o,matchesFilter:f,checkAdditionalParameters:b,addDefaultParameterValues:p,extractSapPriority:l,serializeMatchingResult:s}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/StagedLogger", ["sap/base/Log","sap/ushell/services/_ClientSideTargetResolution/Utils"],function(e,n){"use strict";var o={};function r(e){var n;var r;var t=e();if(!t.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #begin method of StagedLogger.")}n=t.logId;if(o[n]){throw new Error("'cannot call #begin twice with same log id: '"+n+"'")}else{o[n]={}}r=o[n];r.title=t.title||null;r.moduleName=t.moduleName||null;var l=function(e,n){if(n===1){return e}return l(e,n-1)+e};r.stages=t.stages.map(function(e){return[e,l("-",e.length)]});return n}function t(e){var n,r,t,l,i,a,g,u;u=e();if(!u.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.")}n=u.logId;a=u.stage;i=u.prefix;l=u.lines;t=u.line;g=u.number;if(!l&&t&&i){t=i+" "+t}r=o[n].stages[a-1];if(t){r.push(t)}if(l){if(i){i=(t?" ":"")+i}var d=l.map(function(e,n){return(g?n+1:"")+(i?i+" ":"")+e});r.push.apply(r,d)}}function l(n){var r,t,l;r=n();if(!r.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.")}l=r.logId;t=o[l];if(typeof t!=="object"){throw new Error("Logger .end was called on an already ended logger")}var i=t.stages.map(function(e){return e.join("\n")}).join("\n\n");e.debug("[REPORT #"+l+"] "+t.title,"\n"+i+"\n",t.moduleName);delete o[l]}function i(){return o}return{begin:function(){if(e.getLevel()>=e.Level.DEBUG){r.apply(null,arguments)}},log:function(){if(e.getLevel()>=e.Level.DEBUG){t.apply(null,arguments)}},end:function(){if(e.getLevel()>=e.Level.DEBUG){l.apply(null,arguments)}},_getLogs:i}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/SystemContext", ["sap/base/util/ObjectPath","sap/ui/thirdparty/URI"],function(t,r){"use strict";var e={};e._getProtocol=function(){return new r(window.location.toString()).protocol()};e.createSystemContextFromSystemAlias=function(e){return{id:e.id,label:e.label||e.id,getFullyQualifiedXhrUrl:function(i){var n=new r(i).protocol();if(n==="http"||n==="https"){return i}var o=this._getProtocol();var a="";if(o==="https"){a=t.get("https.xhr.pathPrefix",e)||""}else if(o==="http"){a=t.get("http.xhr.pathPrefix",e)||""}if(a){if(i.indexOf("dynamic_dest")>-1){return i}return r.joinPaths(a,i).query(new r(i).query()).href()}return i}.bind(this),getProperty:function(r){var i=t.get("properties",e)||{};return i[r]}}};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/Utils", ["sap/base/util/deepExtend"],function(e){"use strict";function r(e,r,t){var n={};r.forEach(function(a){var i=t[a].dominatedBy;var u=i.some(function(t){var n=!!e[t];var i=t!==a;var u=r.indexOf(t)===-1;return n&&u&&i});if(u){n[a]=true}});return n}function t(e){var r={},t={};Object.keys(e).forEach(function(n){var a=e[n].renameTo||n;t[a]=t[a]||{renameTo:a,dominatedBy:[]};t[a].dominatedBy.push(n);t[a].dominatedBy=t[a].dominatedBy.sort();r[n]=t[a]});return r}function n(r,t,n){var a=n?r:e({},r);Object.keys(a).forEach(function(e){if(t(e)===false){delete a[e]}});return a}function a(e,r){var t;t=Object.keys(e).reduce(function(t,n){var a=e[n];if(r(n,a)){t[n]=a}return t},{});return t}function i(e,r){return r.every(function(r){var t,n,a;a=r.name;n=r.options;t=e[a];return Object.keys(n).every(function(e){var r=n[e];if(e==="required"){return!!(t||{}).required===r}return false})})}function u(e,r){var t={};e.forEach(function(e){if(r[e]){t[e]=r[e];delete r[e]}});return t}return{inboundSignatureMeetsParameterOptions:i,filterObjectKeys:n,filterObject:a,constructParameterDominatorMap:t,findDominatedDefaultParameters:r,extractParameters:u}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds", [],function(){"use strict";var e={};var a=[{hideIntentLink:true,semanticObject:"Action",action:"search",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.renderers.fiori2.search.searchComponent",additionalInformation:"SAPUI5.Component=sap.ushell.renderers.fiori2.search.searchComponent",url:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/search/searchComponent"),loadCoreExt:true,loadDefaultDependencies:false}},{hideIntentLink:true,semanticObject:"FLPPageTemplate",action:"manage",deviceTypes:{desktop:true,tablet:false,phone:false},signature:{parameters:{pageId:{required:false,defaultValue:{value:""}},mode:{required:false,defaultValue:{value:"view"}}},additionalParameters:"notallowed"},resolutionResult:{applicationType:"URL",ui5ComponentName:"nw.core.flp.pagecomposer.conf",additionalInformation:"SAPUI5.Component=nw.core.flp.pagecomposer.conf",url:"/sap/bc/ui5_ui5/sap/sui_paget_man",applicationDependencies:{manifest:"/sap/bc/lrep/content/apps/nw.core.flp.pagecomposer.conf/app/sap/sui_paget_man/manifest.appdescr",name:"nw.core.flp.pagecomposer.conf",self:{name:"nw.core.flp.pagecomposer.conf",url:"/sap/bc/ui5_ui5/sap/sui_paget_man"},asyncHints:{libs:[{name:"nw.core.flp.transport.cust",url:{final:false,url:"/sap/bc/ui5_ui5/sap/sui_tr_cust"}}]}},async:true,loadDefaultDependencies:false}}];e.isVirtualInbound=function(e){return a.some(function(a){return a===e})};e.getInbounds=function(){return a};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing", ["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/navigationMode","sap/ushell/services/AppConfiguration","sap/ushell/Config","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/ui/generic/app/navigation/service/SelectionVariant","sap/base/Log"],function(e,t,a,n,r,jQuery,i,s,o,u,l){"use strict";function p(e,a){var n=new jQuery.Deferred,r,i=e.resolutionResult,s=e.inbound&&(e.inbound.signature||{}),o=c(i)||s.additionalParameters==="ignored"||b(e);if(!o){m(n,e);return n.promise()}var u=e.intentParamsPlusAllDefaults["sap-xapp-state"]&&e.intentParamsPlusAllDefaults["sap-xapp-state"][0];if(u){v(a,u).then(h).then(function(o){if(c(i)){var u=t.constructParameterDominatorMap(s.parameters);Object.keys(i.oNewAppStateMembers).forEach(function(e){var t=u[e].dominatedBy;if(g(o,t)){delete i.oNewAppStateMembers[e]}})}var l=s.additionalParameters==="ignored";if(!c(i)&&!b(e)&&!l){m(n,e);return}r=a.createEmptyAppState(undefined,true);if(r){r.setData(o);f(r,e,n)}},function(){delete i.oNewAppStateMembers;m(n,e);return});return n.promise()}if(c(i)){var l=a.createEmptyAppState(undefined,true);f(l,e,n);return n.promise()}m(n,e);return n.promise()}function f(e,t,a){var n=e.getData()||{},r,i={},s=t.inbound.signature,o=t.resolutionResult;if(n.selectionVariant){r=new u(JSON.stringify(n.selectionVariant))}else{r=new u}if(c(o)){Object.keys(o.oNewAppStateMembers).forEach(function(e){r.massAddSelectOption(e,o.oNewAppStateMembers[e].Ranges)})}var l=s.additionalParameters==="ignored";r=P(r,i,s.parameters,l);if(r.getParameterNames().length!==0||r.getSelectOptionsPropertyNames().length!==0||i.deleted){n.selectionVariant=r.toJSONObject()}if(!i.changed&&!i.deleted&&!c(o)){m(a,t);return}e.setData(n);e.save().done(function(){t.intentParamsPlusAllDefaults["sap-xapp-state"]=[e.getKey()];t.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[e.getKey()];m(a,t)})}function m(t,s){var o;A(s);O(s);o=a.compute(i.get("inbound.resolutionResult.applicationType",s),(s.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(s.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(n.getCurrentApplication()||{}).applicationType,r.last("/core/navigation/enableInPlaceForClassicUIs"));e.shallowMergeObject(s.resolutionResult,o);delete s.resolutionResult.oNewAppStateMembers;t.resolve(s)}function c(e){return e.oNewAppStateMembers&&!s(e.oNewAppStateMembers)}function d(e,t){return Array.isArray(e)&&e.some(function(e){return t.indexOf(e)!==-1})}function g(e,t){if(e&&e.selectionVariant){var a=new u(JSON.stringify(e.selectionVariant)),n=a.getSelectOptionsPropertyNames()||[],r=a.getParameterNames()||[];if(d(n,t)||d(r,t)){return true}}return false}function P(e,t,a,n){var r=new u,i=e.getParameterNames()||[],s=e.getSelectOptionsPropertyNames()||[],o,p;i.forEach(function(i){o=e.getParameter(i);if(n&&!a[i]){t.deleted=true;return}if(a[i]&&a[i].renameTo){if(r.getParameter(a[i].renameTo)===undefined&&r.getSelectOption(a[i].renameTo)===undefined){r.addParameter(a[i].renameTo,o);t.changed=true}else{l.error("renaming of appstate creates duplicates "+i+"->"+a[i].renameTo)}}else if(r.getParameter(i)===undefined&&r.getSelectOption(i)===undefined){r.addParameter(i,o)}});s.forEach(function(i){p=e.getSelectOption(i);if(n&&!a[i]){t.deleted=true;return}if(a[i]&&a[i].renameTo){if(r.getSelectOption(a[i].renameTo)===undefined&&r.getParameter(a[i].renameTo)===undefined){r.massAddSelectOption(a[i].renameTo,p);t.changed=true}else{l.error("renaming of appstate creates duplicates "+i+"->"+a[i].renameTo)}}else if(r.getSelectOption(i)===undefined&&r.getParameter(i)===undefined){r.massAddSelectOption(i,p)}});i.forEach(function(t){e.removeParameter(t)});s.forEach(function(t){e.removeSelectOption(t)});r.getParameterNames().forEach(function(t){e.addParameter(t,r.getParameter(t))});r.getSelectOptionsPropertyNames().forEach(function(t){e.massAddSelectOption(t,r.getSelectOption(t))});return e}function S(e){if(e===undefined||o(e)){return false}return true}function b(e){return e.inbound&&e.inbound.signature&&e.inbound.signature.parameters&&Object.keys(e.inbound.signature.parameters).some(function(t){return!!e.inbound.signature.parameters[t].renameTo})}function A(e){e.defaultedParamNames=e.defaultedParamNames.filter(function(t){if(e.intentParamsPlusAllDefaults[t]&&!Array.isArray(e.intentParamsPlusAllDefaults[t])){if(!(e.resolutionResult.oNewAppStateMembers&&e.resolutionResult.oNewAppStateMembers[t])){return false}}return true})}function O(e){var t=i.get("inbound.signature.parameters",e)||{},a={};e.defaultedParamNames.forEach(function(e){var n=t[e]&&t[e].renameTo||e;if(a[n]){l.error("renaming of defaultedParamNames creates duplicates"+e+"->"+n)}else{a[n]=true}});e.mappedDefaultedParamNames=Object.keys(a).sort()}function h(e){if(S(e)){return Promise.reject()}return Promise.resolve(e)}function v(e,t){return new Promise(function(a,n){e.getAppState(t).done(function(e){a(e.getData())}).fail(function(e){n(e)})})}return{mixAppStateIntoResolutionResultAndRename:p,_hasRenameTo:b}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CommonDataModel/PersonalizationProcessor", ["sap/base/Log","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery"],function(e,r,i,o,t,jQuery){"use strict";function a(){}a.prototype._getItemIndex=function(e,r){var i;for(i=0;i<e.length;i++){if(e[i].id===r){break}}i=i>=e.length?-1:i;return i};a.prototype._applyRenameGroup=function(e,r,i){var o,t=false;if(!r){return false}if(e&&i&&i.groups&&i.groups[e]){o=i.groups[e];if(o.identification&&o.identification.title){i.groups[e].identification.title=r;t=true}}return t};a.prototype._applyGroupVisibility=function(e,r,i){var o=false;if(r===undefined){return false}if(e&&i&&i.groups&&i.groups[e]){i.groups[e].identification.isVisible=r;o=true}return o};a.prototype.mixinPersonalization=function(e,r){var i=new jQuery.Deferred,t=this;if(!r||o(r)){return i.resolve(e).promise()}if(r.groups){Object.keys(r.groups).forEach(function(i){var o=r.groups[i];if(e.groups[i]){if(o.identification){if(o.identification.title){t._applyRenameGroup(i,o.identification.title,e)}if(o.identification.hasOwnProperty("isVisible")&&o.identification.isVisible===false){t._applyGroupVisibility(i,false,e)}}}})}this._applyAddGroups(e,r);if(r.removedGroups&&Array.isArray(r.removedGroups)){r.removedGroups.forEach(function(r){t._applyRemoveGroup(e,r)})}this._applyMoveGroup(e,r);this._applyItemChanges(e,r);this._applyTileSettings(e,r);return i.resolve(e).promise()};a.prototype._applyAddGroups=function(e,i){var o=[];e.site=e.site||{};e.site.payload=e.site.payload||{};e.site.payload.groupsOrder=e.site.payload.groupsOrder||[];e.groups=e.groups||{};if(Array.isArray(i.groupOrder)){e.site.payload.groupsOrder.forEach(function(e){if(i.groupOrder.indexOf(e)===-1){if(i.removedGroups&&i.removedGroups.indexOf(e)===-1||!i.removedGroups){o.push(e)}}})}if(Array.isArray(i.groupOrder)&&i.addedGroups&&Object.keys(i.addedGroups).length>0){Object.keys(i.addedGroups).forEach(function(o){e.groups[o]=r(i.addedGroups[o],20);e.groups[o].payload.isPreset=false});e.site.payload.groupsOrder=i.groupOrder}o.forEach(function(r){e.site.payload.groupsOrder.push(r)})};a.prototype._checkRenameGroup=function(e,r,i,o){if(e&&r&&i){if(i[e]){if(r[e].identification.title!==i[e].identification.title){o=o||{};o.groups=o.groups||{};o.groups[e]=o.groups[e]||{};o.groups[e].identification=o.groups[e].identification||{};o.groups[e].identification.title=r[e].identification.title}}}return o};a.prototype._applyTileSettings=function(e,r){var i,o;if(!r.modifiedTiles){return}i=Object.keys(e.groups).map(function(e){return this[e]},e.groups);o=Object.keys(r.modifiedTiles).map(function(e){return this[e]},r.modifiedTiles);i.some(function(e){["tiles","links"].forEach(function(r){if(e.payload[r]){e.payload[r].some(function(e){var r;o.some(function(i,o){if(i.id===e.id){if(i.title!==undefined){e.title=i.title}if(i.subTitle!==undefined){e.subTitle=i.subTitle}if(i.info!==undefined){e.info=i.info}if(i.displayFormatHint!==undefined){e.displayFormatHint=i.displayFormatHint}r=o;return true}return false});if(r!==undefined){o.splice(r,1)}return o.length===0})}});return o.length===0})};a.prototype._checkGroupVisibility=function(e,r,i,o){if(e&&r&&i){if(i[e]){if(r[e].identification.isVisible!==i[e].identification.isVisible&&typeof r[e].identification.isVisible==="boolean"){o=o||{};o.groups=o.groups||{};o.groups[e]=o.groups[e]||{};o.groups[e].identification=o.groups[e].identification||{};o.groups[e].identification.isVisible=r[e].identification.isVisible}}}return o};a.prototype._addGroupToPersonalizationDelta=function(e,r,o){var t=false,a,s;if(e&&e.site&&e.site.payload&&e.site.payload.groupsOrder&&e.groups&&o&&e.groups[o]&&r){a=e.site.payload.groupsOrder;s=e.groups[o];r.addedGroups=r.addedGroups||{};r.addedGroups[o]={};r.addedGroups[o].identification=i({},s.identification);r.addedGroups[o].payload=i({},s.payload);r.addedGroups[o].payload.tiles=[];r.addedGroups[o].payload.links=[];r.groupOrder=a;t=true}return t};a.prototype.extractPersonalization=function(e,r){var i=new jQuery.Deferred,t,a={},s,p,n=this;if(e&&e.groups&&r&&r.groups){t=e.groups;s=r.groups;p=this._getExtractHelperObject(r,e,a);Object.keys(s).forEach(function(i){n._checkRemoveGroup(e,a,i);n._extractFromOriginalSiteOneGroup(r,p,i,"tiles");n._extractFromOriginalSiteOneGroup(r,p,i,"links")});Object.keys(t).forEach(function(r){if(s[r]){n._checkRenameGroup(r,t,s,a);n._checkGroupVisibility(r,t,s,a)}else{n._addGroupToPersonalizationDelta(e,a,r)}n._extractFromPersonalizedSiteOneGroup(e,p,r,"tiles");n._extractFromPersonalizedSiteOneGroup(e,p,r,"links")});this._checkMoveGroup(e,r,a);this._cleanupRemovedGroups(r,a);if(p.oPersonalizationDelta.movedTiles&&o(p.oPersonalizationDelta.movedTiles)){delete p.oPersonalizationDelta.movedTiles}if(p.oPersonalizationDelta.movedLinks&&o(p.oPersonalizationDelta.movedLinks)){delete p.oPersonalizationDelta.movedLinks}}if(r._version){a._version=r._version}return i.resolve(a).promise()};a.prototype._checkRemoveGroup=function(e,r,i){var o=false;if(e&&e.groups&&r&&i){if(!e.groups[i]){r.removedGroups=r.removedGroups||[];r.groupOrder=r.groupOrder||[];if(r.removedGroups.indexOf(i)===-1){r.removedGroups.push(i)}if(e.site&&e.site.payload&&e.site.payload.groupsOrder&&Array.isArray(e.site.payload.groupsOrder)){r.groupOrder=e.site.payload.groupsOrder.slice(0)}}o=true}return o};a.prototype._applyRemoveGroup=function(e,r){var i,o,t;if(e&&e.groups&&e.site&&e.site.payload&&e.site.payload.groupsOrder&&r){i=e.groups;o=e.site.payload.groupsOrder;t=o.indexOf(r);if(!(t===-1)){o.splice(t,1);delete i[r];return true}}return false};a.prototype._checkMoveGroup=function(e,r,i){var o,t,a=false,s=false;if(e.site&&e.site.payload&&Array.isArray(e.site.payload.groupsOrder)&&r.site&&r.site.payload&&Array.isArray(r.site.payload.groupsOrder)){o=e.site.payload.groupsOrder;t=r.site.payload.groupsOrder;if(o.length===t.length){a=function(){var e=false,r;for(r=0;r<t.length;r++){if(t[r]!==o[r]){e=true;break}}return e}();if(a){i.groupOrder=o;s=true}}}return s};a.prototype._applyMoveGroup=function(e,r){var i=false;if(Array.isArray(r.groupOrder)){e.site=e.site||{};e.site.payload=e.site.payload||{};if(!Array.isArray(e.site.payload.groupsOrder)){e.site.payload.groupsOrder=[]}if(e.site.payload.groupsOrder.length===r.groupOrder.length){e.site.payload.groupsOrder=r.groupOrder;i=true}}return i};a.prototype._getHashedItemsFromSite=function(e){var r=null;if(e&&e.groups){if(Object.keys(e.groups).length>0){r={};Object.keys(e.groups).forEach(function(i){var o=e.groups[i],t;r[i]={};if(o.payload){["tiles","links"].forEach(function(e){r[i][e]={};if(Array.isArray(o.payload[e])){t=o.payload[e];t.forEach(function(o,t){var a;if(o&&o.id){a=o.id;r[i][e][a]={iIndex:t,sItemId:o}}})}})}})}}return r};a.prototype._getExtractHelperObject=function(e,r,i){var o=null;o={};o.oHashedItemsOriginal=this._getHashedItemsFromSite(e)||{};o.oHashedItemsPersonalized=this._getHashedItemsFromSite(r);o.oPersonalizationDelta=i;return o};a.prototype._extractFromOriginalSiteOneGroup=function(e,r,i,o){var t=false,a,s,p,n="movedTiles";o=o||"tiles";if(o!=="tiles"){n="movedLinks"}p=function(e,r){s[e]=s[e]?s[e]:{};s[e].fromGroup=r;s[e].toGroup=null};if(r&&r.oHashedItemsPersonalized&&r.oPersonalizationDelta&&e&&e.groups&&e.groups[i]&&e.groups[i].payload&&Array.isArray(e.groups[i].payload[o])){a=e.groups[i].payload[o];r.oPersonalizationDelta[n]=r.oPersonalizationDelta[n]?r.oPersonalizationDelta[n]:{};s=r.oPersonalizationDelta[n];if(r.oHashedItemsPersonalized[i]){a.forEach(function(e){if(!r.oHashedItemsPersonalized[i][o][e.id]){p(e.id,i)}});t=true}else{a.forEach(function(e){p(e.id,i)});t=true}}return t};a.prototype._extractPersonalizationDeltaForTile=function(e,r,i,a){var s=t.get(["oHashedItemsOriginal",i,a,e.id,"sItemId"],r);if(!s){return false}var p={};if(e.title!==s.title){p.title=e.title}if(e.subTitle!==s.subTitle){p.subTitle=e.subTitle}if(e.info!==s.info){p.info=e.info}if(e.displayFormatHint!==s.displayFormatHint&&!(e.displayFormatHint==="default"&&!s.displayFormatHint)){p.displayFormatHint=e.displayFormatHint}if(o(p)){return false}if(!r.oPersonalizationDelta.modifiedTiles){r.oPersonalizationDelta.modifiedTiles={}}var n=r.oPersonalizationDelta.modifiedTiles;p.id=e.id;n[e.id]=p;return true};a.prototype._extractFromPersonalizedSiteOneGroup=function(r,i,o,t){var a=false,s,p,n=false,l,u=this,d="movedTiles";t=t||"tiles";if(t!=="tiles"&&t!=="links"){return a}if(t!=="tiles"){d="movedLinks"}if(i&&i.oPersonalizationDelta&&r&&r.groups&&r.groups[o]&&r.groups[o].payload&&Array.isArray(r.groups[o].payload[t])){l=r.groups[o].payload[t];i.oPersonalizationDelta[d]=i.oPersonalizationDelta[d]?i.oPersonalizationDelta[d]:{};s=i.oPersonalizationDelta[d];p=[];l.forEach(function(r,a){if(!r){return}p.push(r.id);if(i.oHashedItemsOriginal[o]&&i.oHashedItemsOriginal[o][t][r.id]){if(s[r.id]){e.error("Extract personalization failed","The Tile ID "+r.id+" is not unique in the site","PersonalizationProcessor");delete s[r.id]}if(i.oHashedItemsOriginal[o][t][r.id].iIndex!==a){n=true}u._extractPersonalizationDeltaForTile(r,i,o,t)}else{n=true;if(s[r.id]){if(s[r.id].fromGroup&&s[r.id].fromGroup!==o){if(!s[r.id].toGroup){s[r.id].toGroup=o;u._extractPersonalizationDeltaForTile(r,i,s[r.id].fromGroup,t)}}}else{s[r.id]={};s[r.id].fromGroup=null;s[r.id].toGroup=o;s[r.id].item=r}}});if(n){i.oPersonalizationDelta.groups=i.oPersonalizationDelta.groups||{};i.oPersonalizationDelta.groups[o]=i.oPersonalizationDelta.groups[o]||{};i.oPersonalizationDelta.groups[o].payload=i.oPersonalizationDelta.groups[o].payload||{};if(t==="tiles"){i.oPersonalizationDelta.groups[o].payload.tileOrder=p}else{i.oPersonalizationDelta.groups[o].payload.linkOrder=p}}a=true}return a};a.prototype._cleanupRemovedGroups=function(e,r){var i,o;if(r.removedGroups&&r&&Array.isArray(r.removedGroups)&&r.removedGroups.length>0){r.removedGroups.forEach(function(t){if(e&&e.groups&&e.groups[t]&&e.groups[t].payload){[{sType:"tiles",sPersonalizationDeltaType:"movedTiles"},{sType:"links",sPersonalizationDeltaType:"movedLinks"}].forEach(function(a){if(Array.isArray(e.groups[t].payload[a.sType])){i=e.groups[t].payload[a.sType];i.forEach(function(e){if(r[a.sPersonalizationDeltaType]){o=r[a.sPersonalizationDeltaType][e.id];if(o&&o.fromGroup&&o.fromGroup===t&&!o.toGroup){delete r[a.sPersonalizationDeltaType][e.id]}}})}})}})}};a.prototype._setItemOrderOnSiteCollection=function(e,r){var i=true,o=e.length,t,a={},s,p,n,l;if(!Array.isArray(e)||!Array.isArray(e)||e.length!==r.length){return false}t=e.splice(0,e.length);for(s=0;s<r.length;s++){n=r[s];p=t.shift();if(p&&n===p.id){e.push(p)}else if(a[n]){e.push(a[n]);delete a[n];if(p){a[p.id]=p}}else if(p){a[p.id]=p;l=false;while(t.length>0){p=t.shift();if(n===p.id){e.push(p);l=true;break}else{a[p.id]=p}}if(!l){i=false}}}if(e.length!==o){i=false}return i};a.prototype._setItemOrderOnSiteGroupForItemType=function(e,r,i){var o=true,t,a;if(i==="tiles"||i==="links"){a=i==="tiles"?"tileOrder":"linkOrder"}else{return false}if(r.payload&&Array.isArray(r.payload[a])&&r.payload[a].length>0){if(e.payload&&Array.isArray(e.payload[i])&&e.payload[i].length>0){t=this._setItemOrderOnSiteCollection(e.payload[i],r.payload[a]);if(!t){o=false}}else{o=false}}return o};a.prototype._setItemOrderOnSite=function(e,r){var i=true,o,t=this;if(e.groups&&r.groups){Object.keys(r.groups).forEach(function(a){if(r.groups[a]&&e.groups[a]){o=t._setItemOrderOnSiteGroupForItemType(e.groups[a],r.groups[a],"tiles");if(!o){i=false}o=t._setItemOrderOnSiteGroupForItemType(e.groups[a],r.groups[a],"links");if(!o){i=false}}})}return i};a.prototype._applyMoveItemsWithoutOrder=function(e,r,i){var t=true,a,s,p="tileOrder",n,l,u,d=[],f=this;function y(o,t){var a=true;if(e.groups[t]&&e.groups[t].payload&&r.groups&&r.groups[t]&&r.groups[t].payload&&Array.isArray(r.groups[t].payload[p])&&r.groups[t].payload[p].length>0){if(!Array.isArray(e.groups[t].payload[i])){e.groups[t].payload[i]=[]}e.groups[t].payload[i].push(o)}else{a=false}return a}if(i==="tiles"||i==="links"){s=i==="tiles"?"movedTiles":"movedLinks";p=i==="tiles"?"tileOrder":"linkOrder"}else{return false}if(!e||!e.groups||!e.site||!e.site.payload||!Array.isArray(e.site.payload.groupsOrder)||!r){return false}if(r[s]){Object.keys(r[s]).forEach(function(p){n=r[s][p];if(n.fromGroup){if(n.toGroup){if(n.fromGroup!==n.toGroup){if(e.groups[n.fromGroup]&&e.groups[n.fromGroup].payload&&Array.isArray(e.groups[n.fromGroup].payload[i])){d=e.groups[n.fromGroup].payload[i];l=f._getItemIndex(d,p);if(l>=0){u=d.splice(l,1);a=y(u[0],n.toGroup);if(!a){t=false}}else{t=false}}else{t=false}}else{t=false}}else if(e.groups[n.fromGroup]&&e.groups[n.fromGroup].payload&&Array.isArray(e.groups[n.fromGroup].payload[i])){d=e.groups[n.fromGroup].payload[i];l=f._getItemIndex(d,p);if(l>=0){d.splice(l,1)}else{t=false}}else{t=false}}else if(n.toGroup){if(n.item&&!o(n.item)){a=y(n.item,n.toGroup);if(!a){t=false}}else{t=false}}else{t=false}})}return t};a.prototype._applyItemChanges=function(e,r){var i=true,o;o=this._applyMoveItemsWithoutOrder(e,r,"tiles");if(!o){i=false}o=this._applyMoveItemsWithoutOrder(e,r,"links");if(!o){i=false}if(r.groups){o=this._setItemOrderOnSite(e,r);if(!o){i=false}}return i};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CommonDataModel/SiteConverter", ["sap/base/Log"],function(e){"use strict";var i=function(){};i.prototype.convertTo=function(i,t){if(t._version==="3.0.0"||t.identification&&t.payload){switch(i){case"3.0.0":return this._convertPageToSite(t);case"3.1.0":return this._convertSiteToPage(t);default:e.error("The received version for the site/page conversion is not supported");return{}}}else{e.error("The site converter did not receive a correct page/site object.");return{}}};i.prototype._convertPageToSite=function(e){var i={groups:{},_version:"3.0.0",site:{identification:e.identification,payload:{groupsOrder:e.payload.layout.sectionOrder}}};var t=e.payload.sections;for(var o=0;o<Object.keys(t).length;o++){var r=Object.keys(t)[o];var a=e.payload.sections[r];i.groups[r]={identification:{id:a.id,title:a.title},payload:{tiles:this._convertVizPayloadObjectToArray(a)}};if("visible"in a){i.groups[r].identification.isVisible=a.visible}if("preset"in a){i.groups[r].payload.isPreset=a.preset}if("locked"in a){i.groups[r].payload.locked=a.locked}if("default"in a){i.groups[r].payload.isDefaultGroup=a.default}}return i};i.prototype._convertSiteToPage=function(e){var i={identification:e.site.identification,payload:{layout:{sectionOrder:e.site.payload.groupsOrder},sections:{}}};var t=e.groups;var o;var r;var a;for(var n=0;n<Object.keys(t).length;n++){o=Object.keys(t)[n];r=e.groups[o];a=this._createVizPayloadObject(r.payload.tiles);i.payload.sections[o]={id:r.identification.id,title:r.identification.title,layout:a.layout,viz:a.viz};var s=i.payload.sections[o];if("isVisible"in r.identification){s.visible=r.identification.isVisible}if("isPreset"in r.payload){s.preset=r.payload.isPreset}if("locked"in r.payload){s.locked=r.payload.locked}if("isDefaultGroup"in r.payload){s.default=r.payload.isDefaultGroup}}return i};i.prototype._createVizPayloadObject=function(e){var i=[];var t={};var o=e.reduce(function(e,t){i.push(t.id);e[t.id]=t;return e},{});t.layout={vizOrder:i};t.viz=o;return t};i.prototype._convertVizPayloadObjectToArray=function(e){return e.layout.vizOrder.reduce(function(i,t){i.push(e.viz[t]);return i},[])};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig", ["sap/ushell/Config","sap/ushell/System","sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig"],function(e,t,r){"use strict";var a={};var n=[{contentProviderName:"featured",adapter:"sap.ushell.adapters.cdm.v3.StaticGroupsAdapter",configSwitch:"/core/home/featuredGroup/enable",system:{alias:"",platform:"cdm"},configHandler:function(){var t=e.last("/core/shell/enableRecentActivity")&&e.last("/core/shell/model/currentState/showRecentActivity"),a=t&&e.last("/core/home/featuredGroup/frequentCard"),n=t&&e.last("/core/home/featuredGroup/recentCard");return r.getMockAdapterConfig(a,n)}}];a._getConfigAdapters=function(){n.forEach(function(e){e.system=new t(e.system)});return n};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig", ["sap/ushell/resources"],function(e){"use strict";var t={},a=e.i18n.getText("featuredGroup.title"),i=e.i18n.getText("recentActivities"),n=e.i18n.getText("frequentActivities"),r=e.i18n.getText("top",4),s={_version:"3.0.0",site:{identification:{version:"3.0",id:"c9dcc1f3-dec0-4db4-91d3-639bf38d91ce",title:"Featured Group",description:"Sample site for featured group cards"},payload:{groupsOrder:["FeaturedGroupCards"]}},catalogs:{},vizTypes:{"sap.ushell.Card":{"sap.app":{id:"sap.ushell.Card",type:"card",applicationVersion:{version:"1.0.0"}},"sap.ui":{deviceTypes:{desktop:true,tablet:true,phone:true}}}},visualizations:{FrequentCard:{vizType:"sap.ushell.Card",businessApp:"fin.cash.bankmaster.manage.BusinessApp",target:{appId:"fin.cash.bankmaster.manage",inboundId:"Bank-manage",parameters:{}},vizConfig:{"sap.flp":{columns:"4",rows:"4"},"sap.app":{id:"FrequentCard",type:"card"},"sap.card":{extension:"module:sap/ushell/ui/cards/FrequentActivitiesExtension",data:{extension:{method:"getData"}},type:"List",header:{title:n,status:{text:r},actions:[{type:"Navigation",parameters:{openUI:"FrequentActivities"}}]},content:{maxItems:4,item:{title:{value:"{Name}"},description:{value:"{Description}"},highlight:"{Highlight}",icon:{src:"{Icon}",label:"icon"},actions:[{type:"Navigation",enabled:"{Enabled}",parameters:{title:"{Name}",url:"{Url}",intentSemanticObject:"{Intent/SemanticObject}",intentAction:"{Intent/Action}",intentAppRoute:"{Intent/AppSpecificRoute}",intentParameters:"{Intent/Parameters}"}}]}}}}},RecentCard:{vizType:"sap.ushell.Card",businessApp:"fin.cash.bankmaster.manage.BusinessApp",target:{appId:"fin.cash.bankmaster.manage",inboundId:"Bank-manage",parameters:{}},vizConfig:{"sap.flp":{columns:"4",rows:"4"},"sap.app":{id:"RecentCard",type:"card"},"sap.card":{extension:"module:sap/ushell/ui/cards/RecentActivitiesExtension",type:"List",data:{extension:{method:"getData"}},header:{title:i,status:{text:r},actions:[{type:"Navigation",parameters:{openUI:"RecentActivities"}}]},content:{maxItems:4,item:{title:{label:"{{title_label}}",value:"{Name}"},description:{label:"{{description_label}}",value:"{Description}"},icon:{src:"{Icon}",label:"icon"},highlight:"{Highlight}",actions:[{type:"Navigation",enabled:"{Enabled}",parameters:{title:"{Name}",url:"{Url}",intentSemanticObject:"{Intent/SemanticObject}",intentAction:"{Intent/Action}",intentAppRoute:"{Intent/AppSpecificRoute}",intentParameters:"{Intent/Parameters}"}}]}}}}}},applications:{},groups:{FeaturedGroupCards:{identification:{id:"FeaturedGroupCards",title:a},contentProvider:"featured",isFeatured:true,payload:{locked:true,tiles:[{id:"frequentCard",vizId:"FrequentCard",contentProvider:"featured"},{id:"recentCard",vizId:"RecentCard",contentProvider:"featured"}],links:[],groups:[]}}},systemAliases:{}};t.getMockAdapterConfig=function(e,t){var a=s.groups.FeaturedGroupCards.payload.tiles,i=s.visualizations;for(var n=0;n<a.length;n++){var r=a[n],p=!e&&r.vizId==="FrequentCard",o=!t&&r.vizId==="RecentCard";if(p||o){delete i[r.vizId];a.splice(n,1);n--}}return s};return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CrossApplicationNavigation/utils", ["sap/base/util/ObjectPath","sap/base/Log","sap/ushell/utils/UrlParsing"],function(e,t,r){"use strict";var a={};a.extractGetLinksParameterOptions=function(e){return a.parseGetLinksParameters(e).filter(function(e){return Object.keys(e.options).length>0}).map(function(e){return{name:e.name,options:e.options}})};a.extractGetLinksParameterDefinition=function(e){return a.parseGetLinksParameters(e).reduce(function(e,t){e[t.name]=t.value;return e},{})};a.parseGetLinksParameters=function(e){if(Object.prototype.toString.apply(e)!=="[object Object]"){return[]}var t=JSON.parse(JSON.stringify(e));return Object.keys(t).map(function(e){var r=t[e];var a={};if(Object.prototype.toString.apply(r)==="[object Object]"){r=r.value;delete t[e].value;a=t[e]}return{name:e,value:r,options:a}})};a.safeParseToObject=function(e){try{return JSON.parse(e)}catch(r){t.error("Cannot parse the given string to object",e,"sap.ushell.services.CrossApplicationNavigation")}return null};a.createAppStateFromData=function(e){t.error("Deprecated API call of '_CrossApplicationNavigation.utils.createAppStateFromData'. Please use 'createAppStateFromDataAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");var r=sap.ushell.Container.getService("AppState");var a=r.createEmptyAppState(null);a.setData(e);a.save();return a.getKey()};a.createAppStateFromDataAsync=function(e){return sap.ushell.Container.getServiceAsync("AppState").then(function(t){var r=t.createEmptyAppState(null);r.setData(e);r.save();return r.getKey()})};a.extractParameter=function(n,i){var s;var c=null;if(typeof n==="string"){if(n.indexOf(i+"=")===-1){return{intent:n,data:null}}var p=r.parseShellHash(n);if(!p){return{intent:n,data:null}}c=p.params[i];delete p.params[i];s=r.constructShellHash(p);return{intent:s,data:c}}if(Object.prototype.toString.apply(n)==="[object Object]"){var o=e.get("target.shellHash",n);if(typeof o==="string"){var u=a.extractParameter(o,i);n.target.shellHash=u.intent;return{intent:n,data:u.data}}var l=n.params;if(l&&l[i]){c=typeof l[i]==="string"?[l[i]]:l[i];delete l[i]}return{intent:n,data:c}}t.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:n}};a.addXAppStateFromParameter=function(e,t){var r=a.extractParameter(e,t);var n=r.intent;var i=r.data&&r.data[0];if(!i){return}var s=a.safeParseToObject(i);if(!s){return}var c=a.createAppStateFromData(s);a.injectParameter(n,"sap-xapp-state",c)};a.addXAppStateFromParameterAsync=function(e,t){var r=a.extractParameter(e,t);var n=r.intent;var i=r.data&&r.data[0];if(!i){return Promise.resolve()}var s=a.safeParseToObject(i);if(!s){return Promise.resolve()}return a.createAppStateFromDataAsync(s).then(function(e){a.injectParameter(n,"sap-xapp-state",e)})};a.injectParameter=function(t,n,i){if(typeof t==="string"){var s=r.parseShellHash(t);s.params[n]=i;return r.constructShellHash(s)}if(Object.prototype.toString.apply(t)==="[object Object]"){var c=e.get("target.shellHash",t);if(typeof c==="string"){t.target.shellHash=a.injectParameter(c,n,i);return t}if(!t.params){t.params={}}t.params[n]=i}return t};a._injectParameters=function(e){var t=e.inject;var r=e.injectEmptyString||{};var n=e.type;var i=e.args;function s(e,t){return e||e===""&&t}if(n.isPlainObject(i)){if(i.target&&i.target.shellHash){if(typeof i.target.shellHash==="string"){i.target.shellHash=a._injectParameters({inject:t,injectEmptyString:r,type:e.type,args:i.target.shellHash})}return i}var c=Object.keys(t).reduce(function(e,a){var n=t[a];var i=r[a]===true;if(s(n,i)&&typeof e==="string"){var c=new RegExp("[&]"+a);var p=!c.test(e);if(p){var o=e?"&":"";e+=o+a+"="+n}}else if(s(n,i)&&!e.hasOwnProperty(a)){e[a]=n}return e},i.params||{});if(c&&Object.keys(c).length>0){i.params=c}return i}var p=i;if(p){Object.keys(t).forEach(function(e){var a=t[e];var n=r[e]===true;var i=new RegExp("[?&]"+e);var c=!i.test(p);if(s(a,n)&&c){var o=p.indexOf("?")>-1?"&":"?";p+=o+e+"="+a}})}return p};a.injectStickyParameters=function(e){t.error("Deprecated API call of '_CrossApplicationNavigation.utils.injectStickyParameters'. Please use 'injectStickyParametersAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");var r=sap.ushell.Container.getService("AppLifeCycle");return a._injectStickyParameters(e,r)};a.injectStickyParametersAsync=function(e){return sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(t){return a._injectStickyParameters(e,t)})};a._injectStickyParameters=function(e,t){if(!t||Object.keys(t).length<=0){return e.args}var r=t.getCurrentApplication();if(!r||Object.keys(r).length<=0){return e.args}var n=e.appLifeCycle;var i=e.technicalParameters;var s=i.getParameters({sticky:true}).reduce(function(e,t){var a=t.name;var s=r.componentInstance;var c=r.applicationType;var p;if(c==="UI5"){p={}}else{p=n.getCurrentApplication().container}var o=i.getParameterValueSync(a,s,p,c);var u=t.stickyName||a;e[u]=o;return e},{});var c={type:e.type,inject:s,args:e.args};return a._injectParameters(c)};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_MessageBroker/MessageBrokerEngine", ["sap/base/Log","sap/base/util/deepExtend"],function(e,s){"use strict";var n=true,r={},t={},i={},a={};r[window.location.origin]=true;var c=function(){this.setEnabled=function(e){n=e};this.processPostMessage=function(s){if(!n){return Promise.reject()}var r=s.oMessageData,t=r.body,i=s.oMessage,a=i.origin,c=i.source;t.requestId=r.request_id;if(!c){var l="Missing iframe object in PostMessage request";e.error(l,null,"sap.ushell.services.MessageBroker");return Promise.reject(l)}return this._handlePostMessageRequest(t,c,a)};this.connect=function(s){var r;if(!n){return Promise.reject()}if(typeof s!=="string"||!s.length){r="Missing required parameter client id"}else if(i[s]){r="Client is already connected"}else{i[s]=true;return Promise.resolve()}e.error(r,null,"sap.ushell.services.MessageBroker");return Promise.reject(r)};this.disconnect=function(s){var r;if(!n){return Promise.reject()}if(typeof s!=="string"||!s.length){r="Missing required parameter client id"}else if(!i[s]){r="Client is already disconnected"}else{for(var c in t){var l=t[c];for(var o in l){var u=l[o];if(u.clientId===s){l.splice(o,1);break}}}if(a[s]&&a[s].channels.length){this._emitEvent("clientUnsubscribed",s,a[s].channels);delete a[s]}delete i[s];return Promise.resolve()}e.error(r,null,"sap.ushell.services.MessageBroker");return Promise.reject(r)};this.subscribe=function(s,r,c,l,o,u){var d,f="clientSubscribed",h=[],g=false;if(!n){return Promise.reject()}if(typeof s!=="string"||!s.length||!r.length||typeof o!=="object"&&(typeof c!=="function"||typeof l!=="function")){d="Missing required parameter(s)"}else if(!i[s]){d="Client is not connected"}else{for(var v in r){var p=r[v];var b={clientId:s,subscribedChannels:r,messageCallback:c,clientConnectionCallback:l,iframe:o||{},origin:u||"",isUI5:!o};if(!t[p.channelId]){t[p.channelId]=[]}var m=t[p.channelId].find(function(e){return e.clientId===s});if(!m){t[p.channelId].push(b)}if(a[s]){var I=a[s].channels.find(function(e){return e.channelId===p.channelId});if(!I){a[s].channels.push(p)}}}if(!a[s]){g=true;var M={clientId:s,channels:r};a[s]=M;h=Object.values(a).filter(function(e){return e.clientId!==s})}if(Object.keys(a).length>1){this._emitEvent(f,s,r)}if(g){setTimeout(function(){if(h.length){h.forEach(function(e){if(!o){l(f,e.clientId,e.channels)}else{var s={clientId:e.clientId,channels:e.channels,channelId:"sap.ushell.MessageBroker",messageName:f};var n=this._buildPostMessageObject("event",s);this._sendPostMessageToClient(n,o,u,false)}}.bind(this))}}.bind(this),1e3)}return Promise.resolve()}e.error(d,null,"sap.ushell.services.MessageBroker");return Promise.reject(d)};this.unsubscribe=function(s,r){var c;if(!n){return Promise.reject()}if(typeof s!=="string"||!s.length||!Array.isArray(r)||!r.length){c="Missing required parameter(s)";e.error(c,null,"sap.ushell.services.MessageBroker");return Promise.reject(c)}if(!i[s]){c="Client is not connected";e.error(c,null,"sap.ushell.services.MessageBroker");return Promise.reject(c)}for(var l in r){var o=r[l];if(t[o.channelId]){var u=t[o.channelId];for(var d in u){var f=u[d];if(f.clientId===s){var h=a[s].channels;a[s].channels=h.filter(function(e){return e.channelId!==o.channelId});u.splice(d,1);break}}}else{var g="Unknown channel Id: "+o.channelId;e.warning(g,null,"sap.ushell.services.MessageBroker")}}this._emitEvent("clientUnsubscribed",s,r);return Promise.resolve()};this.publish=function(s,r,a,c,l,o){var u,d=[];if(!n){return Promise.reject()}if(!i[r]){u="Client is not connected";e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)}if(!t[s]){u="Unknown channel Id: "+s;e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)}var f=t[s].find(function(e){return e.clientId===r});if(!f){u="Client is not subscribed to the provided channel";e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)}for(var h in l){var g=l[h];if(g==="*"){d=t[s].concat();break}else{var v=t[s].find(function(e){return e.clientId===g});if(v){d.push(this._deepCopy(v))}}}if(d.length){this._sendMessage(d,s,a,c,r,o);return Promise.resolve()}u="Target client(s) not found in the provided channel";e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)};this.addAcceptedOrigin=function(s){if(!n){return}if(typeof s==="string"&&s.length>0){r[s]=true}else{e.warning("Missing required parameter sOrigin",null,"sap.ushell.services.MessageBroker")}};this.removeAcceptedOrigin=function(e){if(!n){return}delete r[e]};this.getAcceptedOrigins=function(){if(!n){return}return Object.keys(r)};this.getSubscribedClients=function(){if(!n){return}return this._deepCopy(t)};this._emitEvent=function(e,s,n){var r={};for(var i in t){var a=t[i];for(var c in a){var l=a[c];if(l.clientId!==s&&!r[l.clientId]){var o={clientId:s,channels:n};if(l.isUI5!==false){l.clientConnectionCallback(e,s,n)}else{o.channelId="sap.ushell.MessageBroker";o.messageName=e;var u=this._buildPostMessageObject("event",o);this._sendPostMessageToClient(u,l.iframe,l.origin,false)}r[l.clientId]=true}}}};this._sendMessage=function(e,s,n,r,t,i){for(var a in e){var c=e[a];if(c.clientId!==t){if(c.isUI5!==false){c.messageCallback(t,s,r,i)}else{var l={clientId:t,channelId:s,messageName:r,data:i};var o=this._buildPostMessageObject("request",l);this._sendPostMessageToClient(o,c.iframe,c.origin,false)}}}};this._callApi=function(e,s){return this[e].apply(this,s)};this._handlePostMessageRequest=function(e,s,n){return new Promise(function(r,t){var i,a=false,c=e.clientId,l=e.channelId,o=e.requestId,u=e.messageName,d=e.subscribedChannels,f=e.targetClientIds,h=e.data;var g={connect:[c],disconnect:[c],subscribe:[c,d,null,null,s,n],unsubscribe:[c,d],publish:[l,c,o,u,f,h]};var v={channelId:l,clientId:c,messageName:u,requestId:o};switch(u){case"connect":case"disconnect":case"subscribe":case"unsubscribe":i=u;a=true;break;default:i="publish";break}var p=this._buildPostMessageObject("response",v);this._callApi(i,g[i]).then(function(e){return r({_noresponse_:true})}).catch(function(e){a=false;return t(e)}).finally(function(){if(a){p.body.status="accepted";this._sendPostMessageToClient(p,s,n,false)}}.bind(this))}.bind(this))};this._sendPostMessageToClient=function(e,s,n,r){return new Promise(function(t,i){sap.ui.require(["sap/ushell/components/applicationIntegration/application/Application"],function(a){a.postMessageToIframeObject(e,s,n,r).then(t,i)})})};this._buildPostMessageObject=function(e,s){function n(e,s){var n=Date.now().toString();return{type:"request",request_id:n,service:e,body:s}}function r(e,s,n,r){return{type:"response",request_id:s,service:e,status:r?"success":"error",body:n}}var t="sap.ushell.services.MessageBroker",i={request:{channelId:s.channelId,clientId:s.clientId,messageName:s.messageName},response:{channelId:s.channelId,clientId:s.clientId,correlationMessageId:s.requestId,messageName:s.messageName},event:{channelId:s.channelId,clientId:s.clientId,messageName:s.messageName}};switch(e){case"event":i.event.channels=s.channels;break;case"request":if(s.data){i[e].data=s.data}break}var a={request:[t,i.request],response:[t,s.requestId,i.response,true],event:[t,i.event]};var c=e==="response"?r:n;return c.apply(this,a[e])};this._buildFunctionName=function(e,s){s=s.charAt(0).toUpperCase()+s.substring(1);return e+s};this._deepCopy=function(e){return s(e)}};return new c},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_PageReferencing/PageReferencer", ["sap/base/util/deepExtend","sap/ui/thirdparty/jquery"],function(n,jQuery){"use strict";var e={};function t(n,e){var t={};n.forEach(function(n){n.viz.forEach(function(n){var i=n.target;if(i&&!t[i]){t[i]=e.resolveHashFragment(i)}})});return new Promise(function(n,e){var i=[];Object.keys(t).forEach(function(n){i.push(t[n])});jQuery.when.apply(null,i).then(function(){var e=arguments;Object.keys(t).forEach(function(n,i){t[n]=e[i].inboundPermanentKey});n(t)},e)})}function i(n,e){return{inboundPermanentKey:n[e.target],vizId:e.tileCatalogId}}function r(n,e){return{id:e.id,title:e.title,visualizations:e.viz.map(i.bind(null,n))}}e.createReferencePage=function(e,i){i=i||[];return sap.ushell.Container.getServiceAsync("NavTargetResolution").then(t.bind(null,i)).then(function(t){var a=n({},e);a.sections=i.map(r.bind(null,t));return Promise.resolve(a)})};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/ContextContainer", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ui/core/format/DateFormat","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,n,i,o,jQuery,r){"use strict";function a(){this._init.apply(this,arguments)}a.prototype._init=function(n,i,r,a,s){this._oService=n;this._sContainerKey=r;this._oAdapterContainer={};this._oScope=a||t.adjustScope(a);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;var p;if(!(s instanceof o)&&s!==undefined){throw new Error("oComponent passed must be a UI5 Component or must be undefined")}if(s&&s.getMetadata&&s.getMetadata().getComponentName){p=s.getMetadata().getComponentName()}this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new e.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._oAdapterContainer=i.getAdapterContainer(this._sContainerKey,this._oScope,p);return this};a.prototype.getValidity=function(){return this._oScope.validity};a.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new e.Map};a.prototype.load=function(){var t={},n,i=this;t=new jQuery.Deferred;if(!this._sContainerKey){throw new e.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this.clear();n=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,t);n.always(function(){i._oAdapterContainer.load().fail(function(){t.reject()}).done(function(){i._copyFromAdapter();if(i._isExpired()){i.clear()}t.resolve()})});return t.promise()};a.prototype._copyFromAdapter=function(){var e=this,t;t=e._oAdapterContainer.getItemKeys().splice(0);t.forEach(function(t){e._oItemMap.put(t,JSON.stringify(e._oAdapterContainer.getItemValue(t)))});this._aLoadedItemKeys=e._oItemMap.keys().splice(0)};a.prototype._isExpired=function(){var e,t,o;if(this.getValidity()===Infinity||this.getValidity()===0){return false}t=this._getItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);e=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});o=e.format(this._getNow(),true);return t&&o>t};a.prototype._getNow=function(){return new Date};a.prototype._copyToAdapterUpdatingValidity=function(){var e=[],o=[],r=this,a,s,p,_;if(this._clear){e=this._oAdapterContainer.getItemKeys().splice(0);e.forEach(function(e){r._oAdapterContainer.delItem(e)});this._clear=false}if(this.getValidity()===Infinity||this.getValidity()===0){this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE)}else{s=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});a=this._getNow();_=s.format(a,true);p=s.format(new Date(a.getTime()+this.getValidity()*6e4),true);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE,this._oScope);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE,p);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE,_)}e=this._oItemMap.keys();e.forEach(function(e){r._oAdapterContainer.setItemValue(e,t.cloneToObject(r._oItemMap.get(e)))});o=this._aLoadedItemKeys.filter(function(t){return!(e.indexOf(t)>-1)});o.forEach(function(e){r._oAdapterContainer.delItem(e)})};a.prototype.save=function(){var e,t,n=this;this._copyToAdapterUpdatingValidity();e=new jQuery.Deferred;t=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,e);t.always(function(){try{n._oAdapterContainer.save().fail(function(){e.reject()}).done(function(){e.resolve()})}catch(t){e.reject()}});return e.promise()};a.prototype.saveDeferred=function(e){var t,n,i=this;this._copyToAdapterUpdatingValidity();t=new jQuery.Deferred;n=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,t);function o(){n.always(function(){try{i._oAdapterContainer.save().fail(function(){t.reject()}).done(function(){t.resolve()})}catch(e){t.reject()}})}t._sapFnSave=o;t._sapTimeoutId=setTimeout(o,e);return t.promise()};a.prototype.flush=function(){var e,t;this._copyToAdapterUpdatingValidity();e=new jQuery.Deferred;t=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,e);t.fail(function(){e.reject()}).done(function(){e.resolve()});return e.promise()};a.prototype.getItemKeys=function(){var e=this._oItemMap.keys().filter(function(e){return e.indexOf(n.S_ITEM_PREFIX)===0});return e.map(function(e){return e.replace(n.S_ITEM_PREFIX,"","")})};a.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0)};a.prototype.getItemValue=function(e){return this._getItemValueInternal(n.S_ITEM_PREFIX,e)};a.prototype._getItemValueInternal=function(e,n){if(typeof n!=="string"||typeof e!=="string"){return undefined}return t.cloneToObject(this._oItemMap.get(e+n))};a.prototype.containsItem=function(e){if(typeof e!=="string"){return undefined}return this._oItemMap.containsKey(n.S_ITEM_PREFIX+e)};a.prototype.setItemValue=function(e,t){this._setItemValueInternal(n.S_ITEM_PREFIX,e,t)};a.prototype._setItemValueInternal=function(t,n,i){if(typeof n!=="string"||typeof t!=="string"){throw new e.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization"," ")}if(n.length>40){r.error('Personalization Service item key/variant set name ("'+n+'") should be less than 40 characters [current :'+n.length+"]")}this._oItemMap.put(t+n,JSON.stringify(i))};a.prototype.delItem=function(e){this._delItemInternal(n.S_ITEM_PREFIX,e)};a.prototype._delItemInternal=function(e,t){if(typeof t!=="string"){return undefined}if(typeof e!=="string"){return undefined}this._oItemMap.remove(e+t)};a.prototype.getKey=function(){return this._sContainerKey.substring(n.S_CONTAINER_PREFIX.length)};a.prototype.getUnmodifiableContainer=function(){var t=this;if(!this._oUnmodifiableContainer){this._oUnmodifiableContainer=function(){var n={};["clear","delItem","flush","load","save","saveDeferred","setItemValue"].forEach(function(t){n[t]=function(t){throw new e.Error("Function "+t+" can't be called on unmodifiable container","ContextContainer"," ")}.bind(undefined,t)});["containsItem","getItemKeys","getItemValue","getUnmodifiableContainer","getValidity"].forEach(function(e){if(t[e]){n[e]=t[e].bind(t)}});return n}()}return this._oUnmodifiableContainer};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainer", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariantSet","sap/ui/thirdparty/jquery"],function(t,e,n,r,jQuery){"use strict";function i(e,n){this._sContainerKey=n;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var r={},i=this;this._init();r=new jQuery.Deferred;if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new t.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._oAdapterContainer=e.getAdapterContainer(this._sContainerKey);this.load().fail(function(){r.reject()}).done(function(){r.resolve(i)});return r.promise()}i.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new t.Map;this._oItemMap=new t.Map};i.prototype.load=function(){var i={},a=[],o=[],s=[],p=[],u=this;function _(t){var r=[],i=[];r=t.filter(function(t){return t.indexOf(n.S_ITEM_PREFIX)!==0});if(r.length===0){return t}i=t.filter(function(t){return t.indexOf(n.S_ITEM_PREFIX)===0});r.forEach(function(t){var r={},a="";a=n.S_ITEM_PREFIX+t;r=e.clone(u._oAdapterContainer.getItemValue(t));u._oAdapterContainer.setItemValue(a,r);u._oAdapterContainer.delItem(t);if(i&&Array.prototype.indexOf.call(i,a)===-1){i.push(a)}});return i}i=new jQuery.Deferred;if(!this._sContainerKey){throw new t.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._init();this._oAdapterContainer.load().fail(function(){i.reject()}).done(function(){a=u._oAdapterContainer.getItemKeys().splice(0);o=a.filter(function(t){return t.indexOf(n.S_VARIANT_PREFIX)===0});o.forEach(function(t){var e={};e=new r(t,u._oAdapterContainer);u._oVariantSetMap.put(t,e)});s=a.filter(function(t){return t.indexOf(n.S_VARIANT_PREFIX)!==0});p=_(s);p.forEach(function(t){u._oItemMap.put(t,e.clone(u._oAdapterContainer.getItemValue(t)))});u._aLoadedVariantSetKeys=u._oVariantSetMap.keys().splice(0);u._aLoadedItemKeys=u._oItemMap.keys().splice(0);i.resolve()});return i.promise()};i.prototype.save=function(){var t,e;this._serializeVariantSets();this._serializeItems();t=new jQuery.Deferred;function n(){t.resolve()}function r(){t.reject()}try{e=this._oAdapterContainer.save();e.fail(r);e.done(n)}catch(e){t.reject()}return t.promise()};i.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(t){return t.replace(n.S_ITEM_PREFIX,"","")})};i.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.get(n.S_ITEM_PREFIX+t)};i.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.containsKey(n.S_ITEM_PREFIX+t)};i.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}this._oItemMap.put(n.S_ITEM_PREFIX+e,r)};i.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}if(this.containsItem(t)){this._oItemMap.remove(n.S_ITEM_PREFIX+t)}};i.prototype._serializeItems=function(){var t=[],n=[],r=this;t=this._oItemMap.keys();t.forEach(function(t){r._oAdapterContainer.setItemValue(t,e.clone(r._oItemMap.get(t)))});n=this._aLoadedItemKeys.filter(function(e){return!(t.indexOf(e)>-1)});n.forEach(function(t){r._oAdapterContainer.delItem(t)})};i.prototype.getVariantSetKeys=function(){var t=[],e=[];e=this._oVariantSetMap.keys();t=e.map(function(t){return t.replace(n.S_VARIANT_PREFIX,"","")});return t};i.prototype.containsVariantSet=function(t){return this._oVariantSetMap.containsKey(n.S_VARIANT_PREFIX+t)};i.prototype.getVariantSet=function(t){var e,r={};e=n.S_VARIANT_PREFIX+t;r=this._oVariantSetMap.get(e);return r};i.prototype.addVariantSet=function(e){var i={},a={},o="";if(this.containsVariantSet(e)){throw new t.Error("Container already contains a variant set with key '"+e+"': sap.ushell.services.Personalization"," ")}o=n.S_VARIANT_PREFIX+e;i={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(o,i);a=new r(o,this._oAdapterContainer);this._oVariantSetMap.put(o,a);return a};i.prototype._serializeVariantSets=function(){var t=[],n=[],r=this;t=this._oVariantSetMap.keys();t.forEach(function(t){var n={},i={};n=r._oVariantSetMap.get(t);i=n._serialize();r._oAdapterContainer.setItemValue(t,e.clone(i))});n=this._aLoadedVariantSetKeys.filter(function(e){return!(t.indexOf(e)>-1)});n.forEach(function(t){r._oAdapterContainer.delItem(t)})};i.prototype.delVariantSet=function(t){var e="";e=n.S_VARIANT_PREFIX+t;this._oVariantSetMap.remove(e);return this._oAdapterContainer.delItem(e)};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainerVariant", ["sap/ushell/utils"],function(t){"use strict";function e(e,r,n){if(typeof e!=="string"){throw new t.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ")}if(typeof r!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(n&&typeof n!=="object"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}this._oVariantKey=e;this._oVariantName=r;this._oItemMap=new t.Map;this._oItemMap.entries=n||{}}e.prototype.getVariantKey=function(){return this._oVariantKey};e.prototype.getVariantName=function(){return this._oVariantName};e.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.get(t)};e.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}return this._oItemMap.put(e,r)};e.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.containsKey(t)};e.prototype.getItemKeys=function(){return this._oItemMap.keys()};e.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.remove(t)};e.prototype._serialize=function(){var t=[],e={},r={},n=this;e.name=this.getVariantName();t=this._oItemMap.keys();t.forEach(function(t){r[t]=n.getItemValue(t)});e.variantData=r;return e};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainerVariantSet", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/PersonalizationContainerVariant"],function(t,a,r){"use strict";function e(e,n){var i,s,o,p,u;this._sVariantSetKey=e;this._oAdapterContainer=n;this._oVariantNameMap=new t.Map;this._oVariantMap=new t.Map;i=a.clone(this._oAdapterContainer.getItemValue(e));if(i.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=i.currentVariant}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}if(i.hasOwnProperty("variants")){for(s in i.variants){if(i.variants.hasOwnProperty(s)){o=i.variants[s].name;p=i.variants[s].variantData;if(this._oVariantNameMap.containsKey(o)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{this._oVariantNameMap.put(o,s);u=new r(s,o,p);this._oVariantMap.put(s,u)}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return this}e.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey};e.prototype.setCurrentVariantKey=function(t){this._sCurrentVariantKey=t};e.prototype.getVariantKeys=function(){return this._oVariantMap.keys()};e.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries))};e.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}return this._oVariantMap.get(t)};e.prototype.getVariantKeyByName=function(t){if(typeof t!=="string"){return undefined}return this._oVariantNameMap.get(t)};e.prototype.containsVariant=function(t){if(typeof t!=="string"){return undefined}return this._oVariantMap.containsKey(t)};e.prototype.addVariant=function(a){var e=0,n="",i={};e=parseInt(this._oVariantMap.keys().sort(function(t,a){return t-a}).reverse()[0],10);n=isNaN(e)?"0":(e+1).toString();if(this._oVariantMap.containsKey(n)){throw new t.Error("Variant key '"+n+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this._oVariantNameMap.containsKey(a)){throw new t.Error("Variant name '"+a+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(a)+"' New key: '"+n+"') ': sap.ushell.services.Personalization"," ")}i=new r(n,a);this._oVariantMap.put(n,i);this._oVariantNameMap.put(a,n);return i};e.prototype._serialize=function(){var t=[],a={},r={},e=this;a.currentVariant=this._sCurrentVariantKey;t=this.getVariantKeys();t.forEach(function(t){var a={};a=e._oVariantMap.get(t);r[t]=a._serialize()});a.variants=r;return a};e.prototype.delVariant=function(t){var a=this._oVariantMap.get(t);if(a){this._oVariantNameMap.remove(a.getVariantName());this._oVariantMap.remove(t)}};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/Personalizer", ["sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,jQuery,t){"use strict";function n(t,n,r,i,o){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=n;this._oService=t;this._oScope=i;this._oComponent=o;if(!r||!r.container||!r.item||typeof r.container!=="string"||typeof r.item!=="string"){throw new e.Error("Invalid input for oPersId: sap.ushell.services.Personalization"," ")}this._sPersContainer=r.container;this._sPersItem=r.item}n.prototype._getContainer=function(e){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(e,this._oScope,this._oComponent)}return this._oGetContainerPromise};n.prototype.getPersData=function(){var e={},n=this;e=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){e.reject()}).done(function(t){e.resolve(t.getItemValue(n._sPersItem))});e.fail(function(){t.error("Fail to get Personalization data for Personalizer container: "+n._sPersContainer)});return e.promise()};n.prototype.setPersData=function(e){var n={},r=this;n=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){n.reject()}).done(function(t){t.setItemValue(r._sPersItem,e);t.save().fail(function(){n.reject()}).done(function(){n.resolve()})});n.fail(function(){t.error("Fail to set Personalization data for Personalizer container: "+r._sPersContainer)});return n.promise()};n.prototype.delPersData=function(){var e={},n=this,r;e=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){e.reject()}).done(function(t){t.delItem(n._sPersItem);t.save().fail(function(){e.reject()}).done(function(){e.resolve()})});r=e.promise();r.fail(function(){t.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer)});return r};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/TransientPersonalizer", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(){this._oValue=undefined}e.prototype.getPersData=function(){var e;e=new jQuery.Deferred;e.resolve(this._oValue);return e.promise()};e.prototype.setPersData=function(e){var t;t=new jQuery.Deferred;this._oValue=e;t.resolve();return t.promise()};e.prototype.delPersData=function(){var e;e=new jQuery.Deferred;this._oValue=undefined;e.resolve();return e.promise()};e.prototype.setValue=function(e){this._oValue=e};e.prototype.getValue=function(){return this._oValue};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/Variant", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils"],function(t,a){"use strict";function e(a,e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ")}if(typeof r!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}this._oVariantSet=a;this._sVariantKey=e;this._sVariantName=r}e.prototype.getVariantKey=function(){return this._sVariantKey};e.prototype.getVariantName=function(){return this._sVariantName};e.prototype.setVariantName=function(a){var e=this._oVariantSet._getVariantSet(),r;if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this._oVariantSet.getVariantKeyByName(a)!==undefined){throw new t.Error("Variant with name '"+a+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(Object.prototype.hasOwnProperty.call(e,"variants")&&Object.prototype.hasOwnProperty.call(e.variants,this._sVariantKey)){r=e.variants[this._sVariantKey];r.name=a;this._sVariantName=a;this._oVariantSet._serialize()}else{throw new t.Error("Variant does not longer exist"," ")}};e.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}var e=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(e,t)&&a.clone(e[t])};e.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}var i,n=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!n){throw new t.Error("Variant does not longer exist"," ")}if(!n.variantData){n.variantData={}}i=n.variantData;i[e]=a.clone(r);this._oVariantSet._serialize()};e.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}var a=this.oAccess.variantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(a,t)};e.prototype.getItemKeys=function(){var t=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,a,e=[];for(a in t){if(Object.prototype.hasOwnProperty.call(t,a)){e.push(a)}}e.sort();return e};e.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete a[t];this._oVariantSet._serialize()};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/VariantSet", ["sap/ushell/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariant","sap/ushell/services/_Personalization/Variant"],function(t,a,e,r){"use strict";function n(r,n){var i,s,o=new t.Map,p=new t.Map,l,h;this._oContextContainer=n;this._sVariantSetKey=r;this._oVariantSetData=this._oContextContainer._getItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(i in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,i)){s=this._oVariantSetData.variants[i].name;l=this._oVariantSetData.variants[i].variantData;if(o.containsKey(s)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{o.put(s,i);h=new e(i,s,l);p.put(i,h)}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return this}n.prototype._getVariantSet=function(){return this._oVariantSetData};n.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData)};n.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant};n.prototype.setCurrentVariantKey=function(t){this._getVariantSet().currentVariant=t;this._serialize()};n.prototype.getVariantKeys=function(){var a=new t.Map,e=this._getVariantSet(this._sVariantSetKey),r;if(Object.prototype.hasOwnProperty.call(e,"variants")){for(r in e.variants){if(Object.prototype.hasOwnProperty.call(e.variants,r)){a.put(r,"dummy")}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return a.keys()};n.prototype.getVariantNamesAndKeys=function(){var a=new t.Map,e=new t.Map,r=this._getVariantSet(this._sVariantSetKey),n,i;if(Object.prototype.hasOwnProperty.call(r,"variants")){for(n in r.variants){if(Object.prototype.hasOwnProperty.call(r.variants,n)){i=r.variants[n].name;if(a.containsKey(i)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{a.put(i,n)}e.put(n,"dummy")}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return a.entries};n.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}var a=this._getVariantSet(this._sVariantSetKey),e,n,i;if(Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,t)){e=a.variants[t].name;i=a.variants[t].variantData;n=new r(this,t,e,i);return n}return undefined};n.prototype.getVariantKeyByName=function(a){if(typeof a!=="string"){return undefined}var e=this._getVariantSet(this._sVariantSetKey),r;if(Object.prototype.hasOwnProperty.call(e,"variants")){for(r in e.variants){if(Object.prototype.hasOwnProperty.call(e.variants,r)){if(a===e.variants[r].name){return r}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return undefined};n.prototype.containsVariant=function(t){var a=this._getVariantSet();if(typeof t!=="string"){return undefined}return Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,t)};n.prototype.addVariant=function(a){var e=[],n=0,i="",s={};e=this.getVariantKeys();n=parseInt(e.sort(function(t,a){return t-a}).reverse()[0],10);i=isNaN(n)?"0":(n+1).toString();if(e.indexOf(i)>=0){throw new t.Error("Variant key '"+i+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this.getVariantKeyByName(a)!==undefined){throw new t.Error("Variant name '"+a+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(a)+"' New key: '"+i+"') ': sap.ushell.services.Personalization"," ")}s=new r(this,i,a);this._getVariantSet(this._sVariantSetKey).variants[i]={name:a,variantData:{}};this._serialize();return s};n.prototype.delVariant=function(t){var a;if(typeof t!=="string"){return undefined}a=this._getVariantSet();if(a&&a.variants){delete this._oVariantSetData.variants[t]}this._serialize()};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/VariantSetAdapter", ["sap/ushell/services/personalization/VariantSetAdapter","sap/base/Log"],function(e,a){"use strict";a.error("sap.ushell.services.Personalization.VariantSetAdapter has been deprecated. Please use sap.ushell.services.personalization.VariantSetAdapter instead");return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/WindowAdapter", ["sap/ui/thirdparty/jquery","sap/ushell/services/_Personalization/WindowAdapterContainer"],function(jQuery,e){"use strict";var t=function(e,t){this._oBackendAdapter=t;if(t){this.supportsGetWithoutSubsequentLoad=t.supportsGetWithoutSubsequentLoad}};t.prototype.data={};t.prototype.getAdapterContainer=function(r,n,o){var a=this._oBackendAdapter&&this._oBackendAdapter.getAdapterContainer(r,n,o);return new e(r,n,a,t)};t.prototype.delAdapterContainer=function(e,r){var n=new jQuery.Deferred;delete t.prototype.data[e];if(this._oBackendAdapter){this._oBackendAdapter.delAdapterContainer(e,r).done(function(){n.resolve()}).fail(function(e){n.reject(e)})}else{n.resolve()}return n.promise()};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/WindowAdapterContainer", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ui/thirdparty/jquery"],function(e,t,jQuery){"use strict";function n(t,n,o,i){this._oBackendContainer=o;this._oItemMap=new e.Map;this._sContainerKey=t;this.WindowAdapter=i}function o(e){var t,n=e.getItemKeys();for(t=0;t<n.length;t=t+1){e.delItem(n[t])}}n.prototype.load=function(){var e=new jQuery.Deferred,n,i,a=this;if(this.WindowAdapter.prototype.data[this._sContainerKey]){this._oItemMap.entries=t.clone(this.WindowAdapter.prototype.data[this._sContainerKey]);if(this._oBackendContainer){o(this._oBackendContainer);i=this.getItemKeys();for(n=0;n<i.length;n=n+1){this._oBackendContainer.setItemValue(i[n],this._oItemMap.get(i[n]))}}e.resolve()}else if(this._oBackendContainer){this._oBackendContainer.load().done(function(){i=a._oBackendContainer.getItemKeys();for(n=0;n<i.length;n=n+1){a.setItemValue(i[n],a._oBackendContainer.getItemValue(i[n]))}this.WindowAdapter.prototype.data[a._sContainerKey]=t.clone(a._oItemMap.entries);e.resolve()}.bind(this)).fail(function(t){e.reject(t)})}else{this.WindowAdapter.prototype.data[this._sContainerKey]={};e.resolve()}return e.promise()};n.prototype.save=function(){var e=new jQuery.Deferred;this.WindowAdapter.prototype.data[this._sContainerKey]=t.clone(this._oItemMap.entries);if(this._oBackendContainer){this._oBackendContainer.save().done(function(){e.resolve()}).fail(function(t){e.reject(t)})}else{e.resolve()}return e.promise()};n.prototype.getItemKeys=function(){return this._oItemMap.keys()};n.prototype.containsItem=function(e){this._oItemMap.containsKey(e)};n.prototype.getItemValue=function(e){return this._oItemMap.get(e)};n.prototype.setItemValue=function(e,t){this._oItemMap.put(e,t);if(this._oBackendContainer){this._oBackendContainer.setItemValue(e,t)}};n.prototype.delItem=function(e){this._oItemMap.remove(e);if(this._oBackendContainer){this._oBackendContainer.delItem(e)}};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/constants", [],function(){"use strict";return{keyCategory:{FIXED_KEY:"FIXED_KEY",GENERATED_KEY:"GENERATED_KEY"},writeFrequency:{HIGH:"HIGH",LOW:"LOW"}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/constants.private", [],function(){"use strict";return{S_CONTAINER_PREFIX:"sap.ushell.personalization#",S_ITEM_PREFIX:"ITEM#",S_VARIANT_PREFIX:"VARIANTSET#",S_ABAPTIMESTAMPFORMAT:"yyyyMMddHHmmss",S_ADMIN_PREFIX:"ADMIN#",S_ITEMKEY_SCOPE:"sap-ushell-container-scope",S_ITEMKEY_STORAGE:"sap-ushell-container-storageUTCTimestamp",S_ITEMKEY_EXPIRE:"sap-ushell-container-expireUTCTimestamp"}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/utils", ["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,jQuery,r){"use strict";function n(e,t){var r;for(r in t){if(typeof t[r]!=="function"){if(t.hasOwnProperty(r)){if(r===e){return true}}}}return false}function i(e){if(e.length>40){r.error('Personalization Service container key ("'+e+'") should be less than 40 characters [current :'+e.length+"]")}return t.S_CONTAINER_PREFIX+e}function a(e,t,r){if(e&&e.validity===0){return t}return r}function u(t){var r={validity:Infinity,keyCategory:e.keyCategory.GENERATED_KEY,writeFrequency:e.writeFrequency.HIGH,clientStorageAllowed:false};if(t){r.validity=t.validity;if(r.validity===null||r.validity===undefined||typeof r.validity!=="number"){r.validity=Infinity}if(!(typeof r.validity==="number"&&(r.validity>=0&&r.validity<1e3||r.validity===Infinity))){r.liftime=Infinity}r.keyCategory=n(t.keyCategory,e.keyCategory)?t.keyCategory:r.keyCategory;r.writeFrequency=n(t.writeFrequency,e.writeFrequency)?t.writeFrequency:r.writeFrequency;if(typeof t.clientStorageAllowed==="boolean"&&(t.clientStorageAllowed===true||t.clientStorageAllowed===false)){r.clientStorageAllowed=t.clientStorageAllowed}}return r}function l(e){if(!e.lazy){return jQuery.when(e.instance)}try{return e.create.call(null)}catch(e){return(new jQuery.Deferred).reject(e).promise()}}function o(e){if(!e){return false}var t=e.getManifestObject();if(!t){return false}var r=t.getEntry("/sap.ui5/appVariantId");if(!r){return false}var n=t.getComponentName();if(r===n){return false}return true}function f(e){if(e===undefined){return undefined}try{return JSON.parse(e)}catch(e){return undefined}}function y(e){if(e===undefined){return undefined}try{return JSON.parse(JSON.stringify(e))}catch(e){return undefined}}return{adjustScope:u,cloneToObject:f,clone:y,addContainerPrefix:i,pickAdapter:a,isAppVariant:o,loadAdapter:l}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_PluginManager/Extensions", ["sap/ushell/services/_PluginManager/HeaderExtensions","sap/ushell/services/_PluginManager/MenuExtensions"],function(e,n){"use strict";var r={Header:i,Menu:s};function s(e){return Promise.resolve(n(e))}function i(){return Promise.resolve(e)}function u(e,n){var s=r[n];if(!s){return Promise.reject("Unsupported extension: '"+n+"'")}return s(e)}return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_PluginManager/HeaderExtensions", ["sap/ushell/EventHub"],function(e){"use strict";function t(t,n,r){e.emit("setHeaderCentralAreaElement",{id:t,currentState:n,states:r})}return{setHeaderCentralAreaElement:t}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_PluginManager/MenuExtensions", [],function(){"use strict";function n(n){return function e(r){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.getEntryProvider(n,r)})}}return function(e){return{getMenuEntryProvider:n(e)}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Ui5ComponentLoader/utils", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/UriParameters","sap/ui/core/Component","sap/ui/core/util/AsyncHintsHelper","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/bootstrap/common/common.load.core-min"],function(e,a,t,r,n,jQuery,s,i){"use strict";function o(e,a){var t=new jQuery.Deferred;e.componentData=a;if(e.manifest===undefined){e.manifest=false}else if(a.technicalParameters&&a.technicalParameters.hasOwnProperty("sap-ui-fl-version")){if(typeof e.manifest==="string"&&e.manifest.length>0){var n=new s(e.manifest);n.addQuery("version",a.technicalParameters["sap-ui-fl-version"][0]);e.manifest=n.toString()}}r.create(e).then(function(e){t.resolve(e)},function(e){t.reject(e)});return t.promise()}function p(e){var a=true;if(e.hasOwnProperty("loadCoreExt")){a=e.loadCoreExt}return a}function u(e,a){var t=true;if(e.hasOwnProperty("loadDefaultDependencies")){t=e.loadDefaultDependencies}if(a&&a.hasOwnProperty("loadDefaultDependencies")){t=t&&a.loadDefaultDependencies}return t}function c(e){var a=e.semanticObject||null;var t=e.action||null;if(!a||!t){return null}return"application-"+a+"-"+t+"-component"}function l(e){return e&&e.indexOf("?")>=0}function f(e){var a=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return e.replace(a,"")}function d(e){if(!e){return e}var a=e.indexOf("?");if(a>=0){return e.slice(0,a)}return e}function m(a,t,r,n,s){var i="The issue is most likely caused by application "+a,o="Failed to load UI5 component with properties: '"+s+"'.";if(n){o+=" Error likely caused by:\n"+n}else{o+=" Error: '"+t+"'"}if(r==="parsererror"){i+=", as one or more of its resources could not be parsed"}i+=". Please create a support incident and assign it to the support component of the respective application.";e.error(i,o,a)}function y(e){var a=t.fromURL(e||window.location.href).mParams,r=a["sap-xapp-state"],n=a["sap-xapp-state-data"],s;delete a["sap-xapp-state"];delete a["sap-xapp-state-data"];s={startupParameters:a};if(n){s["sap-xapp-state"]=n}if(r){s["sap-xapp-state"]=r}return s}function h(a,t){if(!Array.isArray(t)){return}t.forEach(function(t){var r=String.prototype.toLowerCase.call(t.severity||"");r=["trace","debug","info","warning","error","fatal"].indexOf(r)!==-1?r:"error";e[r](t.text,t.details,a)})}function v(a){if(!Array.isArray(a)){e.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null}return Promise.all(a.map(function(e){return sap.ui.loader._.loadJSResourceAsync(e)})).catch(function(t){e.error("Ui5ComponentLoader: failed to load bundle resources: ["+a.join(", ")+"]");return Promise.reject(t)})}function x(e,t,r,s,i,o,p,u,c){var l=a({},i);if(!l.asyncHints){l.asyncHints=t?{libs:["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]}:{}}if(e){l.asyncHints.preloadBundles=l.asyncHints.preloadBundles||[];l.asyncHints.preloadBundles=l.asyncHints.preloadBundles.concat(c)}if(s){l.asyncHints.waitFor=s}if(!l.name){l.name=o}if(p){l.url=d(p)}if(u){l.id=u}if(r&&l.asyncHints){n.modifyUrls(l.asyncHints,f)}return l}function P(e,t,r,n){var s=a({startupParameters:{}},e);if(r){s.config=r}if(n){s.technicalParameters=n}if(l(t)){var i=y(t);s.startupParameters=i.startupParameters;if(i["sap-xapp-state-data"]){s["sap-xapp-state"]=i["sap-xapp-state-data"]}if(i["sap-xapp-state"]){s["sap-xapp-state"]=i["sap-xapp-state"]}}return s}return{constructAppComponentId:c,getParameterMap:y,logAnyApplicationDependenciesMessages:h,logInstantiateComponentError:m,shouldLoadCoreExt:p,shouldLoadDefaultDependencies:u,urlHasParameters:l,removeParametersFromUrl:d,createUi5Component:o,loadBundle:v,createComponentProperties:x,createComponentData:P}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_UserRecents/RecentActivity", ["./UserRecentsBase","sap/base/Log","sap/base/util/extend","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/EventHub","sap/ushell/library"],function(e,t,i,r,jQuery,n,s){"use strict";var a=s.AppType;var o=e.extend("sap.ushell.services.RecentActivity",{constructor:function(t){e.call(this,"RecentActivity",t,o._compareItems)}});o.MAX_DAYS=30;o.ITEM_COUNT=30;o._compareItems=function(e,t){if(e.appType===t.appType){if(e.appType!==a.APP){return e.url===t.url}return e.appId===t.appId}else if(e.appType===a.APP||t.appType===a.APP){return e.appId===t.appId&&e.url===t.url}return false};o.prototype._updateIfAlreadyIn=function(t,r){return this.oRecentActivities.recentUsageArray.some(function(n){var s;if(o._compareItems(n.oItem,t)){if(t.appType===n.oItem.appType||t.appType!==a.APP){i(n.oItem,t);n.iTimestamp=r;n.oItem.timestamp=r;n.mobile=undefined;n.tablet=undefined;n.desktop=undefined;if(t.appType===n.oItem.appType||t.appType!==a.APP&&n.oItem.appType!==a.APP){n.aUsageArray[n.aUsageArray.length-1]+=1;n.iCount+=1}this.oRecentActivities.recentUsageArray.sort(e._itemSorter)}s=true}else{s=false}return s}.bind(this))};o.prototype._insertNew=function(e,t,i){e.timestamp=t;if(i){e.icon=i}var r={oItem:e,iTimestamp:t,aUsageArray:[1],iCount:1,mobile:undefined,tablet:undefined,desktop:undefined};if(this.oRecentActivities.recentUsageArray.length===this.iMaxItems){this.oRecentActivities.recentUsageArray.pop()}this.oRecentActivities.recentUsageArray.unshift(r)};o.prototype.newItem=function(e){var t=new jQuery.Deferred;var i=Date.now();var r=this.getActivityIcon(e.appType,e.icon);var s;var a=this.getDayFromDateObj(new Date);this._load().done(function(o){this.oRecentActivities=this.getRecentActivitiesFromLoadedData(o);if(a!==this.oRecentActivities.recentDay){this.addNewDay();this.oRecentActivities.recentDay=a}s=this._updateIfAlreadyIn(e,i);if(!s){this._insertNew(e,i,r)}this._save(this.oRecentActivities).done(function(){n.emit("newUserRecentsItem",this.oRecentActivities);t.resolve()}.bind(this)).fail(function(){t.reject()})}.bind(this));return t.promise()};o.prototype.getActivityIcon=function(e,t){switch(e){case a.SEARCH:return t||"sap-icon://search";case a.COPILOT:return t||"sap-icon://co";case a.URL:return t||"sap-icon://internet-browser";default:return t||"sap-icon://product"}};o.prototype.clearAllActivities=function(){var e=new jQuery.Deferred;this._save([]).done(function(){n.emit("userRecentsCleared",Date.now());e.resolve()}).fail(function(){e.reject()});return e.promise()};o.prototype.getRecentItemsHelper=function(e){var t=new jQuery.Deferred;var i;var n;var s;var a=false;var o=[];var c=[];var p=this.getDayFromDateObj(new Date);if(r.system.desktop){s="desktop"}else if(r.system.tablet){s="tablet"}else{s="mobile"}this._load().done(function(r){this.oRecentActivities=this.getRecentActivitiesFromLoadedData(r);var u=false;var f;if(p!==this.oRecentActivities.recentDay){this.addNewDay();this.oRecentActivities.recentDay=p;u=true}for(i=0;i<this.oRecentActivities.recentUsageArray.length&&!a;i++){n=this.oRecentActivities.recentUsageArray[i];if(n[s]===undefined){if(!(n.oItem.url[0]==="#")){c.push(n.oItem.url)}else if(n.oItem.url.indexOf("?")>-1){f=n.oItem.url.substring(n.oItem.url.indexOf("?"));if(f.indexOf("&/")>-1){f=f.substring(0,f.indexOf("&/"))}o.push(n.oItem.appId+f)}else{o.push(n.oItem.appId)}}else{a=true}}if(c.length>0){var v;for(i=0;i<this.oRecentActivities.recentUsageArray.length;i++){if(!(this.oRecentActivities.recentUsageArray[i].oItem.url[0]==="#")){v=this.oRecentActivities.recentUsageArray[i];v[s]=true}}if(o.length<=0){this._save(this.oRecentActivities).done(function(){var i=this._getRecentItemsForDevice(s,this.oRecentActivities,e);t.resolve(i)}.bind(this)).fail(function(){t.reject()})}}if(o.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.isIntentSupported(o).done(function(r){a=false;for(i=0;i<this.oRecentActivities.recentUsageArray.length&&!a;i++){n=this.oRecentActivities.recentUsageArray[i];if(n[s]===undefined){f="";if(n.oItem.url.indexOf("?")>-1){f=n.oItem.url.substring(n.oItem.url.indexOf("?"));if(f.indexOf("&/")>-1){f=f.substring(0,f.indexOf("&/"))}}var o=r[n.oItem.appId+f];n[s]=!!(o&&o.supported)}else if(n.oItem.url[0]==="#"){a=true}}this._save(this.oRecentActivities).done(function(){var i=this._getRecentItemsForDevice(s,this.oRecentActivities,e);t.resolve(i)}.bind(this)).fail(function(){t.reject()})}.bind(this)).fail(function(e){t.reject(e)})}.bind(this))}else if(o.length<=0&&c.length<=0){if(u){this._save(this.oRecentActivities).done(function(){var i=this._getRecentItemsForDevice(s,this.oRecentActivities,e);t.resolve(i)}.bind(this)).fail(function(){t.reject()})}else{var l=this._getRecentItemsForDevice(s,this.oRecentActivities,e);t.resolve(l)}}}.bind(this)).fail(function(){t.reject()});return t.promise()};o.prototype._getRecentItemsForDevice=function(e,t,i){var r=[];var n=0;var s;for(var a=0;a<t.recentUsageArray.length&&(!i||n<i);a++){s=t.recentUsageArray[a];if(s[e]){r.push(s);n++}}return r};o.prototype.getRecentItems=function(){var e=new jQuery.Deferred;this.getRecentItemsHelper(o.ITEM_COUNT).done(function(t){e.resolve(jQuery.map(t,function(e){return e.oItem}))}).fail(function(){e.reject()});return e.promise()};o.prototype.getFrequentItems=function(){var e=new jQuery.Deferred;this.getRecentItemsHelper().done(function(t){var i;var r=0;var n=[];var s;var a=t[0]?new Date(t[0].iTimestamp):undefined;var c;for(i=0;i<t.length&&r<o.MAX_DAYS;i++){s=t[i];if(s.iCount>1){n.push(s)}c=new Date(s.iTimestamp);if(a.toDateString()!==c.toDateString()){r++;a=c}}n.sort(function(e,t){return t.iCount-e.iCount});n=n.slice(0,o.ITEM_COUNT);e.resolve(jQuery.map(n,function(e){return e.oItem}))}).fail(function(){e.reject()});return e.promise()};o.prototype.addNewDay=function(){var e;for(var t=0;t<this.oRecentActivities.recentUsageArray.length;t++){if(this.oRecentActivities.recentUsageArray[t].aUsageArray){e=this.oRecentActivities.recentUsageArray[t].aUsageArray}else{e=[];this.oRecentActivities.recentUsageArray[t].aUsageArray=e;this.oRecentActivities.recentUsageArray[t].iCount=0}e[e.length]=0;if(e.length>o.MAX_DAYS){this.oRecentActivities.recentUsageArray[t].iCount-=e[0];e.shift()}}};o.prototype.getDayFromDateObj=function(e){return e.getUTCFullYear()+"/"+(e.getUTCMonth()+1)+"/"+e.getUTCDate()};o.prototype.getRecentActivitiesFromLoadedData=function(e){var i;if(Array.isArray(e)){i={recentDay:null,recentUsageArray:e}}else{i=e||{recentDay:null,recentUsageArray:[]}}i.recentUsageArray=(i.recentUsageArray||[]).filter(function(e){var i=e&&e.oItem&&e.oItem.url;if(!i){t.error("FLP Recent Activity",e,"is not valid. The activity is removed from the list.")}return i});return i};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_UserRecents/RecentAppsUsage", ["./UserRecentsBase","sap/base/Log","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(e,t,a,jQuery){"use strict";var s=e.extend("sap.ushell.services.RecentAppsUsage",{constructor:function(){e.call(this,"AppsUsage")}});s.MAX_DAYS=30;s.prototype.init=function(){var e=this.getDayFromDateObj(new Date);var a=false;if(this._oInitDeferred===undefined){this._oInitDeferred=new jQuery.Deferred}if(!a||e!==this.oAppsUsageData.recentDay){a=true;this._load().done(function(t){this.oAppsUsageData=t||{recentDay:null,recentAppsUsageMap:{}};this.calculateInitialUsage(e);this._oInitDeferred.resolve(this.oAppsUsageData)}.bind(this)).fail(function(){t.error("UShell-lib ; RecentAppsUsage ; Load data in Init failed");this._oInitDeferred.reject()}.bind(this))}return this._oInitDeferred.promise()};s.prototype.calculateInitialUsage=function(e){if(e!==this.oAppsUsageData.recentDay){this.addNewDay();this.oAppsUsageData.recentDay=e;setTimeout(function(){this.cleanUnusedHashes()}.bind(this),3e3);this.saveAppsUsage(this.oAppsUsageData)}};s.prototype.addAppUsage=function(e){if(!a.validHash(e)){return(new jQuery.Deferred).reject("Non valid hash").promise()}return this.init().done(function(){var t=this.oAppsUsageData.recentAppsUsageMap[e]||[];if(t.length===0){t[0]=1}else{t[t.length-1]+=1}this.oAppsUsageData.recentAppsUsageMap[e]=t;this.saveAppsUsage(this.oAppsUsageData)}.bind(this)).fail(function(){t.error("Ushell-lib ; addAppUsage ; Initialization falied!")})};s.prototype.getAppsUsage=function(){var e;var t=new jQuery.Deferred;this.init().done(function(){e=this.summarizeUsage();t.resolve(e)}.bind(this)).fail(function(){t.reject("Not initialized yet")});return t.promise()};s.prototype.summarizeUsage=function(){var e={};var t,a;var s=true;for(var i in this.oAppsUsageData.recentAppsUsageMap){e[i]=this.getHashUsageSum(i);if(s){t=a=e[i];s=false}else if(e[i]<a){a=e[i]}else if(e[i]>t){t=e[i]}}return{usageMap:e,maxUsage:t,minUsage:a}};s.prototype.addNewDay=function(){var e;for(var t in this.oAppsUsageData.recentAppsUsageMap){e=this.oAppsUsageData.recentAppsUsageMap[t];e[e.length]=0;if(e.length>s.MAX_DAYS){e=e.shift()}}};s.prototype.cleanUnusedHashes=function(){var e;for(var t in this.oAppsUsageData.recentAppsUsageMap){e=this.getHashUsageSum(t);if(e===0){delete this.oAppsUsageData.recentAppsUsageMap[t]}}};s.prototype.getHashUsageSum=function(e){var t=0;var a;var s=this.oAppsUsageData.recentAppsUsageMap[e];var i=s.length;for(a=0;a<i;a++){t+=s[a]}return t};s.prototype.saveAppsUsage=function(e){return this._save(e).fail(function(){t.error("Ushell-lib ; saveAppsUsage ; Save action failed")})};s.prototype.getDayFromDateObj=function(e){return e.getUTCFullYear()+"/"+(e.getUTCMonth()+1)+"/"+e.getUTCDate()};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_UserRecents/RecentsList", ["./UserRecentsBase","sap/ui/thirdparty/jquery"],function(e,jQuery){"use strict";var t=e.extend("sap.ushell.services.RecentsList");t.prototype._updateIfAlreadyIn=function(e,t){return this.aRecents.some(function(i){var s;if(this._compareItems(i.oItem,e)){i.oItem=e;i.iTimestamp=t;i.iCount=i.iCount+1;s=true}else{s=false}return s}.bind(this))};t.prototype._insertNew=function(t,i){var s={oItem:t,iTimestamp:i,iCount:1};if(this.aRecents.length===this.iMaxItems){this.aRecents.sort(e._itemSorter);this.aRecents.pop()}this.aRecents.push(s)};t.prototype.clearAllActivities=function(){return this._save([])};t.prototype.newItem=function(e){var t=new jQuery.Deferred;var i=Date.now();var s;this._load().done(function(n){this.aRecents=n||[];s=this._updateIfAlreadyIn(e,i);if(!s){this._insertNew(e,i)}this._save(this.aRecents).done(function(){t.resolve()}).fail(function(){t.reject()})}.bind(this));return t.promise()};t.prototype.getRecentItems=function(){var t=new jQuery.Deferred;this._load().done(function(i){i=i||[];i.sort(e._itemSorter);this.aRecents=i.slice(0,this.iMaxItems);t.resolve(jQuery.map(this.aRecents,function(e){return e.oItem}))}.bind(this));return t.promise()};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_UserRecents/UserRecentsBase", ["sap/ui/base/Object","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,r,jQuery){"use strict";var t="sap.ushell.services.UserRecents";var s=e.extend("sap.ushell.services.UserRecentsBase",{constructor:function(e,r,s){this.aRecents=[];this.iMaxItems=r;this._oPersonalizerPromise=sap.ushell.Container.getServiceAsync("Personalization").then(function(r){return r.getPersonalizer({container:t,item:e})});this._compareItems=s}});s.prototype._load=function(){var e=new jQuery.Deferred;this._oPersonalizerPromise.then(function(r){r.getPersData().done(e.resolve).fail(e.reject)}).catch(function(t){r.error("Personalization service does not work:");r.error(t.name+": "+t.message);e.reject(t)});return e.promise()};s.prototype._save=function(e){var t=new jQuery.Deferred;this._oPersonalizerPromise.then(function(r){r.setPersData(e).done(t.resolve).fail(t.reject)}).catch(function(e){r.error("Personalization service does not work:");r.error(e.name+": "+e.message);t.reject(e)});return t.promise()};s._itemSorter=function(e,r){return r.iTimestamp-e.iTimestamp};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstance", ["sap/m/ActionSheet","sap/m/Button","sap/m/GenericTile","sap/m/library","sap/m/Popover","sap/m/Text","sap/m/VBox","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Icon","sap/ui/events/PseudoEvents","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(e,t,i,o,n,s,a,r,l,c,u,p,h,d,f){"use strict";var g=o.PlacementType;var y=o.FrameType;var m=o.GenericTileScope;var v=o.LoadState;var A=o.TileSizeBehavior;var _=h.DisplayFormat;var T=r.extend("sap.ushell.ui.launchpad.VizInstance",{metadata:{library:"sap.ushell",properties:{title:{type:"string",defaultValue:"",bindable:true},subtitle:{type:"string",defaultValue:"",bindable:true},height:{type:"int",defaultValue:2},width:{type:"int",defaultValue:2},info:{type:"string",defaultValue:"",bindable:true},icon:{type:"sap.ui.core.URI",defaultValue:"",bindable:true},numberUnit:{type:"string",defaultValue:"",bindable:true},state:{type:"sap.m.LoadState",defaultValue:v.Loaded,bindable:true},sizeBehavior:{type:"sap.m.TileSizeBehavior",defaultValue:A.Responsive,bindable:true},editable:{type:"boolean",defaultValue:false,bindable:true},removable:{type:"boolean",defaultValue:true,bindable:true},clickable:{type:"boolean",defaultValue:true,bindable:true},active:{type:"boolean",defaultValue:false},targetURL:{type:"string"},indicatorDataSource:{type:"object",defaultValue:undefined},dataSource:{type:"object",defaultValue:undefined},keywords:{type:"string[]",defaultValue:[]},instantiationData:{type:"object",defaultValue:{}},contentProviderId:{type:"string",defaultValue:""},vizConfig:{type:"object"},supportedDisplayFormats:{type:"string[]",defaultValue:[_.Standard]},dataHelpId:{type:"string",defaultValue:""},vizRefId:{type:"string",defaultValue:""},displayFormat:{type:"string",defaultValue:_.Standard},preview:{type:"boolean",defaultValue:false}},defaultAggregation:"tileActions",aggregations:{content:{type:"sap.ui.core.Control",multiple:false},tileActions:{type:"sap.m.Button",forwarding:{getter:"_getTileActionSheet",aggregation:"buttons"}}},events:{press:{parameters:{scope:{type:"sap.m.GenericTileScope"},action:{type:"string"}}},beforeActionSheetOpen:{},afterActionSheetClose:{}}},renderer:f});T.prototype.init=function(){this._customTileActions=[];var e=new i({frameType:this._formatPlaceholderFrameType(this.getDisplayFormat()),state:this.getState()});this.setAggregation("content",e)};T.prototype.setDisplayFormat=function(e){this.setProperty("displayFormat",e);this._setSize();var t=this.getContent();if(t&&t.isA("sap.m.GenericTile")){t.setFrameType(this._formatPlaceholderFrameType(e))}return this};T.prototype.setState=function(e){this.setProperty("state",e);var t=this.getContent();if(t&&t.isA("sap.m.GenericTile")){t.setState(e)}return this};T.prototype.setEditable=function(e){this.setProperty("editable",e);this.setTileEditable(e);return this};T.prototype.setTileEditable=function(e){var t=e?m.ActionMore:m.Display;var i=this.getContent();if(i&&i.isA("sap.m.GenericTile")){i.setScope(t)}return this};T.prototype._formatPlaceholderFrameType=function(e){this._setSize();switch(e){case _.Flat:return y.OneByHalf;case _.FlatWide:return y.TwoByHalf;case _.StandardWide:return y.TwoByOne;default:return y.OneByOne}};T.prototype.exit=function(){if(this._oActionModeButtonIconVBox){this._oActionModeButtonIconVBox.destroy()}if(this._oActionDivCenter){this._oActionDivCenter.destroy()}if(this._oActionSheet){this._oActionSheet.destroy()}if(this._oRemoveIconVBox){this._oRemoveIconVBox.destroy()}};T.prototype.getLayout=function(){return{columns:this.getWidth(),rows:this.getHeight()}};T.prototype.setContent=function(e){var t=this.getLayoutData();if(t&&t.isA("sap.f.GridContainerItemLayoutData")){t.setRows(this.getHeight());t.setColumns(this.getWidth())}var i=this.getDataHelpId();var o=this.getVizRefId();if(i){e.data("help-id",i,true);e.data("tile-id",i,true)}else{e.data("tile-id",o,true)}this.setAggregation("content",e)};T.prototype._getTileActionSheet=function(){if(!this._oActionSheet){this._oActionSheet=new e({placement:g.VerticalPreferedBottom});this._oActionSheet.attachAfterClose(this.fireAfterActionSheetClose.bind(this))}return this._oActionSheet};T.prototype._destroyCustomTileActions=function(){this._customTileActions.forEach(function(e){this.removeTileAction(e);e.destroy()}.bind(this));this._customTileActions=[]};T.prototype._addCustomTileActions=function(){if(this._oCustomTileActionsPromise){return this._oCustomTileActionsPromise}this._destroyCustomTileActions();var e=sap.ushell.Container.getRenderer();this._oCustomTileActionsPromise=e.getCustomTileActions(this).then(function(e){e.forEach(function(e){var i=new t(e);this._customTileActions.push(i);this.addTileAction(i)}.bind(this));this._oCustomTileActionsPromise=null}.bind(this));return this._oCustomTileActionsPromise};T.prototype._onActionMenuIconPressed=function(){if(this._oActionModeIcon){if(!this._getTileActionSheet().isOpen()){this.fireBeforeActionSheetOpen()}var e=p.last("/core/extension/enableTileColors");if(e){this._addCustomTileActions()}if(this.getTileActions().length===0){this._openNoActionsPopover();return}this._getTileActionSheet().openBy(this._oActionModeIcon)}};T.prototype.getFocusDomRef=function(){if(this.getEditable()){return this._oActionModeIcon&&this._oActionModeIcon.getFocusDomRef()}var e=this.getContent();var t=e.findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")});if(t.length){return t[0].getFocusDomRef()}if(this._oComponent&&this._oComponent.findAggregatedObjects){t=this._oComponent.findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")});if(t.length){return t[0].getFocusDomRef()}}return e.getFocusDomRef()};T.prototype.onclick=function(e){if(this._preventDefault(e)){this.firePress({scope:"Display",action:"Press"})}else if(this._oRemoveIconVBox&&this._oRemoveIconVBox.getDomRef().contains(e.target)){this.firePress({scope:"Actions",action:"Remove"})}else if(this.getEditable()){this._onActionMenuIconPressed()}};T.prototype.onBeforeRendering=function(){var e=this.getDomRef();if(e){e.removeEventListener("keyup",this._fnKeyupHandler);e.removeEventListener("touchend",this._fnTouchendHandler)}};T.prototype._openNoActionsPopover=function(){new n({placement:g.VerticalPreferedBottom,showHeader:false,content:new s({text:d.i18n.getText("tileHasNoActions")})}).addStyleClass("sapUiContentPadding").openBy(this._oActionModeIcon)};T.prototype.onAfterRendering=function(){var e=this.getDomRef();this._fnKeyupHandler=this.onkeyup.bind(this);this._fnTouchendHandler=this.onclick.bind(this);e.addEventListener("keyup",this._fnKeyupHandler,true);e.addEventListener("touchend",this._fnTouchendHandler,true)};T.prototype.onkeyup=function(e){if(this.getEditable()){if(u.events.sapdelete.fnCheck(e)||u.events.sapbackspace.fnCheck(e)){this.firePress({scope:"Actions",action:"Remove"})}if(u.events.sapspace.fnCheck(e)||u.events.sapenter.fnCheck(e)){this._preventDefault(e)}}};T.prototype._preventDefault=function(e){if(this.getEditable()||!this.getClickable()){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();return false}return true};T.prototype.load=function(){return Promise.resolve()};T.prototype._setSize=function(){var e={};switch(this.getDisplayFormat()){case _.Flat:e.width=2;e.height=1;break;case _.FlatWide:e.width=4;e.height=1;break;case _.StandardWide:e.width=4;e.height=2;break;default:e.width=2;e.height=2;break}this.setWidth(e.width);this.setHeight(e.height)};T.prototype.getAvailableDisplayFormats=function(){var e;var t=this.getSupportedDisplayFormats();var i=this.getDisplayFormat();e=t.filter(function(e){return e!==i});var o=e.indexOf("compact");var n=this.getTitle();var s=this.getTargetURL();if(o>-1&&(!n||!s)){e.splice(o,1)}return e};T.prototype._getRemoveIconVBox=function(){if(!this._oRemoveIconVBox){var e=l.getLibraryResourceBundle("sap.m");var t=new c({id:this.getId()+"-action-remove",alt:e.getText("GENERICTILE_ACTIONS_ARIA_TEXT"),decorative:false,noTabStop:true,src:"sap-icon://decline",tooltip:d.i18n.getText("removeButtonTitle")}).addStyleClass("sapUshellTileDeleteIconInnerClass sapMPointer");this._oRemoveIconVBox=new a({items:[t]}).addStyleClass("sapUshellTileDeleteIconOuterClass sapUshellTileDeleteClickArea sapMPointer");this._oRemoveIconVBox.setParent(this)}return this._oRemoveIconVBox};T.prototype._getActionModeButtonIconVBox=function(){if(!this._oActionModeButtonIconVBox){var e=l.getLibraryResourceBundle("sap.m");this._oActionModeIcon=new c({id:this.getId()+"-action-more",decorative:false,alt:e.getText("LIST_ITEM_NAVIGATION"),noTabStop:true,press:[this._onActionMenuIconPressed,this],src:"sap-icon://overflow",tooltip:d.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner sapMPointer");this._oActionModeButtonIconVBox=new a({items:[this._oActionModeIcon]}).addStyleClass("sapUshellTileActionIconDivBottom sapMPointer");this._oActionModeButtonIconVBox.setParent(this)}return this._oActionModeButtonIconVBox};return T});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstanceAbap", ["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/m/library","sap/base/Log","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(t,i,e,n,s,a){"use strict";var r=i.LoadState;var o=n.DisplayFormat;var p=t.extend("sap.ushell.ui.launchpad.VizInstanceAbap",{metadata:{library:"sap.ushell"},renderer:a});p.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oChipInstancePromise=sap.ushell.Container.getServiceAsync("PageBuilding").then(function(t){var i=t.getFactory();var e=this.getInstantiationData();var n;var a;if(!e.simplifiedChipFormat){n={chipId:e.chip.id,chip:e.chip}}else{var r=e.chip||{};a=r.bags;n={chipId:r.chipId,configuration:r.configuration?JSON.stringify(r.configuration):"{}"}}var o=i.createChipInstance(n);s.addBagDataToChipInstance(o,a);return o}.bind(this))};p.prototype.load=function(t){return this._oChipInstancePromise.then(function(t){this._oChipInstance=t;return new Promise(this._oChipInstance.load)}.bind(this)).then(function(){if(this.getPreview()){var t=this._oChipInstance.getContract("preview");if(t){t.setEnabled(true)}}return this._oChipInstance.getImplementationAsSapui5Async()}.bind(this)).then(function(t){this._setChipInstanceType();this.setContent(t);if(t.getComponentInstance&&t.getComponentInstance()){t.getComponentInstance().setParent(this)}return Promise.resolve()}.bind(this)).catch(function(t){this.setState(r.Failed);return Promise.reject(t)}.bind(this))};p.prototype._setChipInstanceType=function(){var t=this._oChipInstance.getContract("types");if(t){t.setType(this._mapDisplayFormatToChip(this.getDisplayFormat()))}};p.prototype._mapDisplayFormatToChip=function(t){var i={};i[o.Standard]="tile";i[o.StandardWide]="tile";i[o.Compact]="link";i[o.Flat]="flat";i[o.FlatWide]="flatwide";return i[t]};p.prototype._setVisible=function(t){var i=this._oChipInstance&&!this._oChipInstance.isStub()&&this._oChipInstance.getContract("visible");if(i){i.setVisible(t)}};p.prototype.refresh=function(){if(this._oChipInstance){this._oChipInstance.refresh()}};p.prototype.setActive=function(t,i){this._setVisible(t);if(i){this.refresh()}return this.setProperty("active",t,false)};return p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstanceCdm", ["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/m/library","sap/ui/core/Component","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/ui/core/ComponentContainer","sap/ushell/UI5ComponentType","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(t,e,n,o,i,a,r,s){"use strict";var p=e.LoadState;var u=t.extend("sap.ushell.ui.launchpad.VizInstanceCdm",{metadata:{library:"sap.ushell"},renderer:s});u.prototype.load=function(t){var e;if(t===true){e=this._loadCustomVizType()}else{e=this._loadStandardVizType()}return e.then(function(t){this._oComponent=t;var e=new a({component:t});t.setParent(this);this.setContent(e);this._setComponentTileVisible(this.getActive());this.setTileEditable(this.getEditable())}.bind(this)).catch(function(t){this.setState(p.Failed);return Promise.reject(t)}.bind(this))};u.prototype._loadStandardVizType=function(){var t=this._getComponentConfiguration();return n.create(t)};u.prototype._loadCustomVizType=function(){var t=this._getCustomComponentConfiguration();var e={};var n=[];return sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(o){var i=o.createComponent(t,e,n,r.Visualization);return new Promise(function(t,e){i.done(function(e){t(e)})})}).then(function(t){if(t&&t.componentHandle&&t.componentHandle.getInstance){return t.componentHandle.getInstance()}throw new Error("Create component failed: no instance found in the component handle.")})};u.prototype._getComponentConfiguration=function(){var t=this.getInstantiationData().vizType;var e=this.getVizConfig();var n=o.get(["sap.platform.runtime","componentProperties"],t);n=i({},this._getComponentProperties(),n);var a={name:t["sap.ui5"].componentName,componentData:{properties:n},url:o.get(["sap.platform.runtime","componentProperties","url"],t),manifest:o.get(["sap.platform.runtime","componentProperties","manifest"],t),asyncHints:o.get(["sap.platform.runtime","componentProperties","asyncHints"],t)};var r=o.get(["sap.platform.runtime","includeManifest"],t);var s=o.get(["sap.platform.runtime","includeManifest"],e);if(r||s){a.manifest=i({},t,e)}if(typeof a.manifest==="object"){n.manifest=a.manifest}return a};u.prototype._getCustomComponentConfiguration=function(){var t=this._getComponentConfiguration();var e={loadCoreExt:true,loadDefaultDependencies:false,componentData:t.componentData,url:t.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:t,ui5ComponentName:t.name};return e};u.prototype._getComponentProperties=function(){return{title:this.getTitle(),subtitle:this.getSubtitle(),icon:this.getIcon(),info:this.getInfo(),indicatorDataSource:this.getIndicatorDataSource(),dataSource:this.getDataSource(),contentProviderId:this.getContentProviderId(),targetURL:this.getTargetURL(),displayFormat:this.getDisplayFormat(),numberUnit:this.getNumberUnit()}};u.prototype._setComponentTileVisible=function(t){if(this._oComponent&&typeof this._oComponent.tileSetVisible==="function"){this._oComponent.tileSetVisible(t)}};u.prototype.setActive=function(t,e){this._setComponentTileVisible(t);if(e){this.refresh()}return this.setProperty("active",t,false)};u.prototype.setTileEditable=function(t){if(this._oComponent&&typeof this._oComponent.tileSetEditMode==="function"){this._oComponent.tileSetEditMode(t)}return this};u.prototype.refresh=function(){if(this._oComponent&&typeof this._oComponent.tileRefresh==="function"){this._oComponent.tileRefresh()}};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstanceLaunchPage", ["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/ushell/library","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(e,t,i){"use strict";var a=t.DisplayFormat;var n=e.extend("sap.ushell.ui.launchpad.VizInstanceLaunchPage",{metadata:{library:"sap.ushell"},renderer:i});n.prototype.load=function(){var e=this.getInstantiationData().launchPageTile;return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(t){return new Promise(function(i,a){t.getCatalogTileViewControl(e).done(i).fail(function(){t.getTileView(e).done(i).fail(a)})}).then(function(i){this._setDisplayFormatFromTileSize(e,t);this.setContent(i)}.bind(this))}.bind(this))};n.prototype._setDisplayFormatFromTileSize=function(e,t){var i=t.getTileSize(e);if(i==="1x2"){this.setDisplayFormat(a.StandardWide)}else{this.setDisplayFormat(a.Standard)}};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstanceLink", ["sap/m/library","sap/ushell/library","sap/m/GenericTile","sap/m/Button","sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/m/ActionSheet"],function(t,e,i,s,o,r,a,n,l){"use strict";var p=t.GenericTileMode;var u=t.GenericTileScope;var h=e.AppType;var c=e.DisplayFormat;var d=i.extend("sap.ushell.ui.launchpad.VizInstanceLink",{metadata:{library:"sap.ushell",properties:{title:{type:"string",defaultValue:"",group:"Appearance",bindable:true},subtitle:{type:"string",defaultValue:"",group:"Appearance",bindable:true},editable:{type:"boolean",defaultValue:false,group:"Behavior",bindable:true},removable:{type:"boolean",defaultValue:true,group:"Behavior",bindable:true},active:{type:"boolean",group:"Misc",defaultValue:false},targetURL:{type:"string",group:"Misc"},mode:{type:"sap.m.GenericTileMode",group:"Appearance",defaultValue:p.LineMode},displayFormat:{type:"string",defaultValue:c.Compact},supportedDisplayFormats:{type:"string[]",defaultValue:[c.Compact]},dataHelpId:{type:"string",defaultValue:""},vizRefId:{type:"string",defaultValue:""}},defaultAggregation:"tileActions",aggregations:{tileActions:{type:"sap.m.Button",forwarding:{getter:"_getTileActionSheet",aggregation:"buttons"}}},events:{beforeActionSheetOpen:{},afterActionSheetClose:{}}},renderer:i.getMetadata().getRenderer()});d.prototype.init=function(){i.prototype.init.apply(this,arguments);this.attachPress(this._handlePress,this);this._customTileActions=[]};d.prototype.exit=function(){if(this._oActionSheet){this._oActionSheet.destroy()}};d.prototype._getTileActionSheet=function(){if(!this._oActionSheet){this._oActionSheet=new l;this._oActionSheet.attachAfterClose(this.fireAfterActionSheetClose.bind(this))}return this._oActionSheet};d.prototype._destroyCustomTileActions=function(){this._customTileActions.forEach(function(t){this.removeTileAction(t);t.destroy()}.bind(this));this._customTileActions=[]};d.prototype._addCustomTileActions=function(){if(this._oCustomTileActionsPromise){return this._oCustomTileActionsPromise}this._destroyCustomTileActions();var t=sap.ushell.Container.getRenderer();this._oCustomTileActionsPromise=t.getCustomTileActions(this).then(function(t){t.forEach(function(t){var e=new s(t);this._customTileActions.push(e);this.addTileAction(e)}.bind(this));this._oCustomTileActionsPromise=null}.bind(this));return this._oCustomTileActionsPromise};d.prototype._handlePress=function(){if(this.getEditable()){if(!this._getTileActionSheet().isOpen()){this.fireBeforeActionSheetOpen()}var t=a.last("/core/extension/enableTileColors");if(t){this._addCustomTileActions()}this._getTileActionSheet().openBy(this);return}var e=this.getTargetURL();if(!e){return}if(e[0]==="#"){r.setHash(e)}else{var i=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(i){var s={title:this.getTitle(),appType:h.URL,url:this.getTargetURL(),appId:this.getTargetURL()};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(s)}n.openURL(e,"_blank")}};d.prototype.load=o.prototype.load;d.prototype.setVizRefId=function(t){if(!this.getDataHelpId()){this.data("tile-id",t,true)}return this.setProperty("vizRefId",t)};d.prototype.setDataHelpId=function(t){this.data("help-id",t,true);this.data("tile-id",t,true);return this.setProperty("dataHelpId",t)};d.prototype.setTitle=function(t){this.setHeader(t);return this.setProperty("title",t)};d.prototype.setSubtitle=function(t){this.setSubheader(t);return this.setProperty("subtitle",t)};d.prototype.setTargetURL=function(t){this.setUrl(t);return this.setProperty("targetURL",t)};d.prototype.setProperty=function(t,e,s){if(t==="title"){this.setProperty("header",e,s)}if(t==="subtitle"){this.setProperty("subheader",e,s)}if(t==="targetURL"){this.setProperty("url",e,s)}if(t==="editable"){if(e&&this.getRemovable()){this.setProperty("scope",u.Actions,s)}else if(e){this.setProperty("scope",u.ActionMore,s)}else{this.setProperty("scope",u.Display,s)}}if(t==="removable"){var o=this.getEditable();if(e&&o){this.setProperty("scope",u.Actions,s)}else if(o){this.setProperty("scope",u.ActionMore,s)}else{this.setProperty("scope",u.Display,s)}}return i.prototype.setProperty.apply(this,arguments)};d.prototype.getAvailableDisplayFormats=o.prototype.getAvailableDisplayFormats;return d});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,n){var t=this._prepareControlsToBeRendered(n);e.openStart("div",n);e.class("sapUshellVizInstance");if(n.getEditable()){e.class("sapUshellVizInstanceEdit")}e.openEnd();t.forEach(function(n){e.renderControl(n)});e.close("div")};e._prepareControlsToBeRendered=function(e){var n=[e.getContent()];if(e.getEditable()){if(e.getRemovable()){var t=e._getRemoveIconVBox();n.unshift(t)}var o=e._getActionModeButtonIconVBox();n.push(o)}return n};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/personalization/VariantSetAdapter", ["sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/VariantSet"],function(t,n,e){"use strict";function r(t){this._oContextContainer=t}r.prototype.save=function(){return this._oContextContainer.save()};r.prototype.getVariantSetKeys=function(){var n=this._oContextContainer._getInternalKeys(),e=[];e=n.map(function(n){return n.replace(t.S_VARIANT_PREFIX,"","")});return e};r.prototype.containsVariantSet=function(t){return this.getVariantSetKeys().indexOf(t)>=0};r.prototype.getVariantSet=function(n){var r=this._oContextContainer._getItemValueInternal(t.S_VARIANT_PREFIX,n);if(!r){return undefined}return new e(n,this._oContextContainer)};r.prototype.addVariantSet=function(r){var a={},i={};if(this.containsVariantSet(r)){throw new n.Error("Container already contains a variant set with key '"+r+"': sap.ushell.services.Personalization"," ")}a={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(t.S_VARIANT_PREFIX,r,a);i=new e(r,this._oContextContainer);return i};r.prototype.delVariantSet=function(n){this._oContextContainer._delItemInternal(t.S_VARIANT_PREFIX,n)};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin", ["sap/ui/core/Core","sap/ui/core/support/Plugin","sap/ui/model/json/JSONModel","sap/m/Button","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/Label","sap/m/Text","sap/m/MessageStrip","sap/m/FlexBox","sap/ui/model/resource/ResourceModel","sap/m/SearchField","sap/m/MessageBox","sap/base/util/isEmptyObject"],function(e,t,n,r,i,a,o,s,u,p,l,f,c,g){"use strict";var d;var y=t.extend("sap.ushell.support.plugins.flpConfig.FlpConfigurationPlugin",{constructor:function(e){d=new l({bundleName:"sap/ushell/support/plugins/flpConfig/i18n/FlpConfigurationPlugin"});t.apply(this,["sapUiFlpConfigurationPlugin",d.getResourceBundle().getText("PLUGIN_NAME"),e]);this._oSupportStub=e;if(this.runsAsToolPlugin()){this._aEventIds=[this.getId()+"ReceiveData"]}else{this._aEventIds=[this.getId()+"RequestData"]}}});y.prototype.isToolPlugin=function(){return true};y.prototype.isAppPlugin=function(){return true};y.prototype.init=function(){t.prototype.init.apply(this,arguments);if(this.runsAsToolPlugin()){setTimeout(function(){this.requestData()}.bind(this),500);var n=e.createRenderManager();n.openStart("div",this.getId());n.openEnd();n.close("div");n.flush(this.dom());n.destroy()}else{}};y.prototype.exit=function(){t.prototype.exit.apply(this,arguments)};y.prototype.requestData=function(){this._oSupportStub.sendEvent(this.getId()+"RequestData",{eventData:{data:{}}})};y.prototype.onsapUiFlpConfigurationPluginRequestData=function(e){var t={};this.prepareForSending(window["sap-ushell-config"],t);this._oSupportStub.sendEvent(this.getId()+"ReceiveData",{eventData:{data:t}})};y.prototype.onsapUiFlpConfigurationPluginReceiveData=function(t){this.flpConfig=t.getParameter("eventData").data;e.loadLibrary("sap.ui.table",{async:true}).then(function(){sap.ui.require(["sap/ui/table/TreeTable","sap/ui/table/Column","sap/ui/table/library"],function(e,t,n){this.getFlpConfigurationPluginUI(null,e,t,n.SelectionMode)}.bind(this))}.bind(this))};function h(){var t=0;var n=e.byId("sap-ui-support-flpConfigurationPlugin-TabBar").getSelectedKey();var r=e.byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel().getData();if(Array.isArray(r[n])){r[n].forEach(function(e,i){var a=v(r[n][i],n);if(t<a){t=a}});if(t>0){e.byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+n).expandToLevel(t-1)}else{c.error(new o({text:e.byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel("i18n").getResourceBundle().getText("MISSING_HIERARCHY_LEVEL")}))}}}function b(){var t=e.byId("sap-ui-support-flpConfigurationPlugin-TabBar").getSelectedKey();e.byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+t).collapseAll()}y.prototype.onPressSearchNewModel=function(t){var r;var i;var a;var o;var s;var u;var p;var l;var f;var c=[];var g={};var d="";var y={};var h={};var b=e.byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel("Full");var E=t.getParameter("query");if(!b){b=e.byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel().getData()}else{b=b.getData()}Object.keys(b).forEach(function(e){g[e]=0});if(E){for(var S in b){d=S;r=[];w(b[S],S,d,r,E);h[S]=r}Object.keys(h).forEach(function(e){o=h[e];for(var t=0;t<o.length;t++){s=o[t].split(".");u=[];for(var n=0;n<s.length;n++){if(!isNaN(parseInt(s[n],10))){u.push(parseInt(s[n],10))}else{u.push(s[n])}}for(var r=0;r<u.length;r+=2){p={property:""};p[u[0]]=[];if(isNaN(parseInt(u[r],10))){i=u.slice(0,r+1);if(!I(y,i)&&typeof I(y,u.slice(0,u.length-2))!=="object"){P(y,i,[p],u[0],i.length)}f=I(b,u.slice(0,r+2));if(f&&I(y,u.slice(0,r+2))){T(y,f.property,u.slice(0,r+2).toString()+",property")}else if(r!==u.length-2){c.push(u.slice(0,r+2).toString())}}}a=u.slice(0);P(y,u,{property:"",value:""},u[0],i.length);f=I(b,a);if(f){T(y,f.value,a.toString()+",value");T(y,f.property,a.toString()+",property")}}c.forEach(function(e){f=I(b,e.split(","));if(f&&I(y,e.split(","))){T(y,f.property,e+",property")}});c=[];if(y[e]&&Array.isArray(y[e][0][e])&&y[e][0][e].length===0){y[e]=y[e].splice(1)}});e.byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new n(y));e.byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new n(b),"Full");var x=0;Object.keys(g).forEach(function(t){l=t;if(y[l]&&Array.isArray(y[l])){y[l].forEach(function(e,t){var n=v(y[l][t],l);if(x<n){x=n}})}e.byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+t).expandToLevel(x-1);e.byId(t).setCount(C(y[t],t,0))})}else{Object.keys(g).forEach(function(t){e.byId(t).setCount(C(b[t],t,0))});e.byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new n(b))}};function v(e,t){var n=0;if(e[t]){e[t].forEach(function(e){var r=v(e,t);if(r>n){n=r}})}return n+1}function I(e,t){for(var n=0;n<t.length;n++){if(e){e=e[t[n]]}}return e}function C(e,t,n){if(Array.isArray(e)){e.forEach(function(e){if(e[t]){n=C(e[t],t,n)}else{n+=1}});return n}return undefined}function T(e,t,n){var r=n.split(",");for(var i=0;i<r.length-1;i++){e=e[r[i]]}e[r[r.length-1]]=t}function P(e,t,n,r,i){if(t.length===1){e[t[0]]=n}else{var a=t.shift();e[a]=P(typeof e[a]==="undefined"?{}:e[a],t,n,r,i)}if(e[r]&&e.property&&e.value){delete e.value;e.property=""}return e}function w(e,t,n,r,i){e.forEach(function(e,a){if(e[t]){n=n+"."+a+"."+t;n=w(e[t],t,n,r,i)}else if(e.property.indexOf(i)>-1){n=n+"."+a;r.push(n);n=n.substring(0,n.lastIndexOf("."))}});n=n.substring(0,n.lastIndexOf("."));if(isNaN(parseInt(n.substr(n.lastIndexOf(".")+1),10))){return n}return n.substring(0,n.lastIndexOf("."))}function E(e,t){if(typeof e!=="object"){return[{property:t,value:e}]}return Object.keys(e).map(function(n){var r={property:n};var i=e[n];if(typeof i==="object"&&i!==null&&!g(i)&&!Array.isArray(i)){r[t]=E(i,t);return r}else{try{r.value=JSON.stringify(i)}catch(e){r.value=i}}return r})}y.prototype.prepareForSending=function(e,t){Object.keys(e).forEach(function(n){var r=e[n];switch(typeof r){case"object":if(r===null){t[n]=r;return}else if(Array.isArray(r)){t[n]=[]}else{t[n]={}}this.prepareForSending(e[n],t[n]);break;case"undefined":t[n]="undefined";return;case"function":return;default:t[n]=e[n];return}}.bind(this))};y.prototype.getNewConfigJSON=function(e){var t={};Object.keys(e).forEach(function(n){t[n]=E(e[n],n)});return t};y.prototype.getFlpConfigurationPluginUI=function(t,l,c,y){var v,I,T,P={};T=this.getNewConfigJSON(this.flpConfig);v=new n(T);for(var w in T){P[w]=C(T[w],w,0)}if(!e.byId("sap-ui-support-flpConfigurationPlugin-TabBar")){if(!T||g(T)){new u({text:d.getResourceBundle().getText("ERROR_MESSAGE"),type:"Warning",showIcon:true,showCloseButton:false}).placeAt(this.getId())}else{I=new i("sap-ui-support-flpConfigurationPlugin-TabBar",{headerMode:"Inline"});Object.keys(this.flpConfig).forEach(function(e,t){I.insertItem(new a(e,{key:e,text:e,count:P[e],content:[new l("sap-ui-support-flpConfigurationPlugin-TreeTable"+e,{rows:"{/"+e+"/}",selectionMode:y.None,enableCellFilter:true,extension:[new p({items:[new r({icon:"sap-icon://expand",text:"{i18n>EXPAND_BUTTON}",press:h}),new r({icon:"sap-icon://collapse",text:"{i18n>COLLAPSE_BUTTON}",press:b})]})],columns:[new c({label:new o({text:"{i18n>COLUMN_PROPERTY}"}),template:new s({text:"{property}"})}),new c({label:new o({text:"{i18n>COLUMN_VALUE}"}),template:new s({text:"{value}"})})]})]}),t)});var E=new f({search:this.onPressSearchNewModel});E.placeAt(this.getId());I.setModel(v);I.setModel(d,"i18n");I.placeAt(this.getId())}}};return y});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/AppContainer", ["sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Element","sap/ui/Device","sap/base/Log","./AppContainerRenderer"],function(e,t,r,o,i,a){"use strict";var n=e.extend("sap.ushell.ui.AppContainer",{metadata:{library:"sap.ushell",properties:{visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{pages:{type:"sap.ui.core.Control",multiple:true,singularName:"pages"}},events:{beforeNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}},afterNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}}}},renderer:a});n.prototype.addPages=function(e){if(this.getPages().indexOf(e)>-1){return}if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",true)}else{e.toggleStyleClass("hidden",true)}this.addAggregation("pages",e,true);var r=this.getDomRef();if(r){var o=t.createRenderManager();o.render(e,r);o.destroy()}};n.prototype.addCenterViewPort=n.prototype.addPages;n.prototype.removeCenterViewPort=function(e){this.removeAggregation("pages",e,true)};n.prototype.getCurrentCenterPage=function(){return this.getPages().reduce(function(e,t){if(t&&t.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){return!t.hasStyleClass("sapUShellApplicationContainerIframeHidden")?t.getId():e}return t&&!t.hasStyleClass("hidden")?t.getId():e},null)};n.prototype.navTo=function(e,r){var a=t.byId(r),n=this.getCurrentCenterPage(),s=t.byId(n)||null,p=sap.ushell.Container.getRenderer("fiori2").byId("Shell-home-component-container"),l=p&&p.getId(),d=n&&l===n,u=l===r;if(e!=="centerViewPort"){i.error("Navigation to "+e+" is not allowed in Fiori3");return}if(this.getPages().indexOf(a)===-1){i.error("AppContainer: invalid navigation target");return}if(o.system.desktop&&d){this._saveFocus()}if(n!==r){this.fireBeforeNavigate({toId:r,to:a,fromId:n,from:s})}this.getPages().forEach(function(e){if(e){if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",e.getId()!==r)}else{e.toggleStyleClass("hidden",e.getId()!==r)}}});if(o.system.desktop&&u){this._restoreFocus()}if(n!==r){this.fireAfterNavigate({toId:r,to:a,fromId:n,from:s})}};n.prototype._restoreFocus=function(){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){var r;if(this.sLastFocusId){e.registerAppKeysHandler(this.fnLastAppKeyHandler);r=t.byId(this.sLastFocusId);if(r){r.focus()}}}.bind(this))};n.prototype._saveFocus=function(){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){var t=r.closestTo(document.activeElement);this.sLastFocusId=t?t.getId():null;this.fnLastAppKeyHandler=e.getAppKeysHandler()}.bind(this))};n.prototype.getViewPortControl=function(e,t){return this.getPages().reduce(function(r,o){return e==="centerViewPort"&&o&&o.getId()===t?o:r},null)};var s=function(){};n.prototype.switchState=s;n.prototype._handleSizeChange=s;n.prototype.shiftCenterTransitionEnabled=s;n.prototype.shiftCenterTransition=s;n.prototype.addLeftViewPort=s;n.prototype.addRightViewPort=s;n.prototype.attachAfterSwitchState=s;n.prototype.detachAfterSwitchState=s;n.prototype.attachAfterSwitchStateAnimationFinished=s;n.prototype.detachAfterSwitchStateAnimationFinished=s;n.prototype.getCurrentState=function(){return"Center"};return n});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/ui/AppContainerRenderer", ["sap/ushell/resources"],function(e){"use strict";var n={apiVersion:2};n.render=function(n,r){if(!r.getVisible()){return}n.openStart("main",r);n.attr("role","main");n.attr("aria-label",e.i18n.getText("ShellContent.AriaLabel"));n.openEnd();r.getPages().forEach(function(e){n.renderControl(e)});n.close("main")};return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/ContentNodeSelector", ["sap/base/util/deepClone","sap/m/Token","sap/ui/core/Core","sap/ui/core/Fragment","sap/ui/core/XMLComposite","sap/ui/Device","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/library","sap/ushell/resources"],function(e,t,o,n,i,a,s,r,l,d,u,p){"use strict";var g=u.ContentNodeType;var c=i.extend("sap.ushell.ui.ContentNodeSelector",{metadata:{library:"sap.ushell",associations:{labelId:{type:"sap.ui.core.Control",multiple:false}},events:{selectionChanged:{},valueHelpEndButtonPressed:{}}}});c.prototype.init=function(){this._oModel=new l({items:[],suggestions:[],isSpaces:d.last("/core/spaces/enabled")});this._oDeviceModel=new l(a);this.setModel(this._oModel,"_internal");this.setModel(this._oDeviceModel,"_device");this.setModel(p.getTranslationModel(),"_i18n");var e=this.getAggregation("_content");e.addValidator(this._validateItem.bind(this));this.setBusyIndicatorDelay(0);this._loadContentNodes().then(this._overwriteLabel.bind(this))};c.prototype._overwriteLabel=function(){var e=this.getLabelId();var t=o.byId(e);if(t&&typeof t.setText==="function"){if(this._oModel.getProperty("/isSpaces")){t.setText(p.i18n.getText("contentNodeSelectorHomepagePages"))}else{t.setText(p.i18n.getText("contentNodeSelectorHomepageGroups"))}}if(t&&typeof t.setRequired==="function"&&t.isPropertyInitial("required")){t.setRequired(true)}if(t&&typeof t.setLabelFor==="function"){t.setLabelFor(this)}};c.prototype.exit=function(){this._oModel.destroy();this._oDeviceModel.destroy()};c.prototype.getSelectedContentNodes=function(){var t=this.getAggregation("_content");var o=t.getTokens();return o.map(function(t){var o=t.getBindingContext("_internal").getObject();var n=e(o);delete n.selected;delete n.spaceTitles;return n})};c.prototype._getMyHomeEnablement=function(){return new Promise(function(e,t){var o=d.last("/core/spaces/myHome/enabled");var n=sap.ushell.Container.getUser().getShowMyHome();e(o&&n)})};c.prototype._filterPersonalizableContentNodes=function(e){if(!Array.isArray(e)){return[]}return e.reduce(function(e,t){if(this._bShowOnlyMyHome&&t.id!==this._sMyHomeSpaceId&&t.id!==this._sMyHomePageId){return e}t.children=this._filterPersonalizableContentNodes(t.children);if(t.type===g.HomepageGroup||t.type===g.Space||t.type===g.Page&&t.isContainer){e.push(t)}return e}.bind(this),[])};c.prototype._loadContentNodes=function(){this.setBusy(true);return Promise.all([sap.ushell.Container.getServiceAsync("Bookmark"),this._getMyHomeEnablement()]).then(function(t){var o=t[0];var n=t[1];var i=d.last("/core/shell/enablePersonalization");this._bShowOnlyMyHome=!i&&n;this._sMyHomeSpaceId=d.last("/core/spaces/myHome/myHomeSpaceId");this._sMyHomePageId=d.last("/core/spaces/myHome/myHomePageId");return o.getContentNodes().then(function(t){t=e(t);t=this._filterPersonalizableContentNodes(t);c._normalizeContentNodes(t);this._oModel.setProperty("/items",t);var o=c._getSuggestions(t);for(var n=0;n<o.length;n++){o[n].selected=false}this._oModel.setProperty("/suggestions",o);this.setBusy(false)}.bind(this))}.bind(this))};c.prototype._showValueHelp=function(e){var t=e.getSource();var o=t.getValue();if(!this._oValueHelpDialog){n.load({id:this.getId()+"-ValueHelpDialog",name:"sap.ushell.ui.ContentNodeSelectorValueHelp",controller:this}).then(function(e){this.addDependent(e);this._oValueHelpDialog=e;this._openValueHelpDialog(o)}.bind(this))}else{this._openValueHelpDialog(o)}};c.prototype._openValueHelpDialog=function(e){var t=n.byId(this.getId()+"-ValueHelpDialog","ContentNodesTree");t.expandToLevel(1);this._oValueHelpDialog.open();var o=n.byId(this.getId()+"-ValueHelpDialog","ContentNodesSearch");o.setValue(e);this._onValueHelpSearch()};c.prototype._onValueHelpSearch=function(){var e=n.byId(this.getId()+"-ValueHelpDialog","ContentNodesSearch");var t=e.getValue();var o=n.byId(this.getId()+"-ValueHelpDialog","ContentNodesTree");var i=o.getBinding("items");i.filter(new s({path:"label",operator:r.Contains,value1:t}))};c.prototype._onValueHelpBeginButtonPressed=function(){var e=n.byId(this.getId()+"-ValueHelpDialog","ContentNodesTree");var t=e.getSelectedContextPaths();var o=this.getAggregation("_content");o.destroyTokens();var i;var a;for(var s=0;s<t.length;s++){a=t[s];var r=this.getModel("_internal");var l=o.getAggregation("tokens").map(function(e){return e.getProperty("key")}).indexOf(r.getProperty(a).id);if(l<0){i=this._createToken(a);o.addValidateToken({token:i})}}o.setValue("");this._oValueHelpDialog.close()};c.prototype._onValueHelpEndButtonPressed=function(){this.fireValueHelpEndButtonPressed();this._oValueHelpDialog.close()};c.prototype._onTokenUpdate=function(e){var t=e.getParameter("addedTokens");var o=e.getParameter("removedTokens");this._setTokensSelected(t,true);this._setTokensSelected(o,false);setTimeout(this.fireSelectionChanged.bind(this),0)};c.prototype._setTokensSelected=function(e,t){var o;for(var n=0;n<e.length;n++){o=e[n].getBindingContext("_internal");o.getModel().setProperty(o.getPath("selected"),t)}};c.prototype._validateItem=function(e){if(e.suggestedToken){return e.suggestedToken}var t=e.suggestionObject;if(!t){return null}var o=t.getBindingContext("_internal");return this._createToken(o.getPath())};c.prototype._createToken=function(e){var o=new t({key:"{_internal>id}",text:"{_internal>label}"});o.bindObject({path:e,model:"_internal"});return o};c._getSuggestions=function(e){var t=[];c._getChildren(e,t);return t};c._getChildren=function(e,t){var o;for(var n=0;n<e.length;n++){o=e[n];if(o.isContainer&&t.indexOf(o)===-1){t.push(o)}if(o.children){c._getChildren(o.children,t)}}};c._normalizeContentNodes=function(e){var t={};c._visitPages(e,function(e,o){o.spaceTitles=o.spaceTitles||[];if(t[o.id]){t[o.id].spaceTitles.push(e.label);return t[o.id]}o.spaceTitles.push(e.label);t[o.id]=o;return o})};c._visitPages=function(e,t){if(e===undefined||e===null){return}for(var o=0;o<e.length;o++){var n=e[o];if(n.type!==g.Space){return}if(n.children){for(var i=0;i<n.children.length;i++){var a=n.children[i];n.children[i]=t(n,a)}}}};c.prototype.clearSelection=function(){var e=this.getAggregation("_content");var t=e.getTokens();t.forEach(function(e){var t=e.getBindingContext("_internal");this._oModel.setProperty(t.getPath("selected"),false)}.bind(this));e.destroyTokens()};c.prototype.setValueState=function(e){var t=this.getAggregation("_content");t.setValueState(e)};c.prototype.setValueStateText=function(e){var t=this.getAggregation("_content");t.setValueStateText(e)};return c});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/ContentNodeTreeItem", ["sap/m/StandardTreeItem"],function(e){"use strict";var t=e.extend("sap.ushell.ui.bookmark.ContentNodeTreeItem",{metadata:{library:"sap.ushell",properties:{selectable:{type:"boolean",defaultValue:true,group:"Behavior"}}},renderer:e.getMetadata().getRenderer()});t.prototype.setSelected=function(t){this._bSelected=t;return e.prototype.setSelected.apply(this,arguments)};t.prototype.setSelectable=function(t){this.setProperty("selectable",t,false);if(t){e.prototype.setSelected.call(this,this._bSelected)}return this};t.prototype.isSelectable=function(){return this.getSelectable()};t.prototype.getModeControl=function(){if(!this.getSelectable()){return null}return e.prototype.getModeControl.apply(this,arguments)};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/CustomGroupHeaderListItem", ["sap/m/GroupHeaderListItem","sap/m/Text","./CustomGroupHeaderListItemRenderer"],function(t,e,i){"use strict";var s=t.extend("sap.ushell.ui.CustomGroupHeaderListItem",{metadata:{library:"sap.ushell",properties:{description:{type:"string",group:"Data",defaultValue:null}},aggregations:{_titleText:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_descriptionText:{type:"sap.m.Text",multiple:false,visibility:"hidden"}}},renderer:i});s.prototype.setTitle=function(t){this.setProperty("title",t);var i=this.getAggregation("_titleText");if(i){i.setText(t)}else{this.setAggregation("_titleText",new e({text:t}),true)}};s.prototype.setDescription=function(t){this.setProperty("description",t);var i=this.getAggregation("_descriptionText");if(i){i.setText(t)}else{this.setAggregation("_descriptionText",new e({text:t}),true)}};s.prototype.getContentAnnouncement=function(){return this.getTitle()+", "+this.getDescription()};s.prototype.setCount=function(){return this};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/CustomGroupHeaderListItemRenderer", ["sap/ui/core/library","sap/ui/core/Renderer","sap/m/GroupHeaderListItemRenderer","sap/ushell/library"],function(e,t,r,n){"use strict";var i=e.TextDirection;var s=t.extend(r);s.apiVersion=2;s.renderLIAttributes=function(e,t){r.renderLIAttributes(e,t);e.class("sapUshellCGHLIContent")};s.renderLIContent=function(e,t){var r=t.getTitleTextDirection();e.openStart("span");e.class("sapMGHLITitle");if(r!==i.Inherit){e.attr("dir",r.toLowerCase())}e.openEnd();e.renderControl(t.getAggregation("_titleText"));if(t.getDescription()){e.voidStart("br");e.voidEnd();e.openStart("span");e.class("sapUshellCGHLIDescription");e.openEnd();e.renderControl(t.getAggregation("_descriptionText"));e.close("span")}e.close("span")};return s});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/QuickAccess", ["sap/ui/core/Core","sap/ui/core/Fragment","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/library","sap/ushell/Config","sap/ushell/resources","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/utils/AppType"],function(e,t,i,s,n,c,o,r,a,l){"use strict";var u=n.AppType;var h={oModel:new s({recentActivities:[],frequentActivities:[]}),_createQuickAccessDialog:function(s){return t.load({name:"sap.ushell.ui.QuickAccess",type:"XML",controller:this}).then(function(t){this.oQuickAccessDialog=t;this.oQuickAccessDialog.setModel(this.oModel);this.oQuickAccessDialog.attachAfterClose(function(){this.oQuickAccessDialog.destroy();if(i.system.desktop){var t=e.byId(s);if(t){t.focus()}else{sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){e.goToLastVisitedTile()})})}}}.bind(this));e.byId("mainShell").addDependent(this.oQuickAccessDialog);return this.oQuickAccessDialog}.bind(this))},_updateQuickAccessDialog:function(e){var t=e.getContent()[0];t.setBusy(true);return sap.ushell.Container.getServiceAsync("UserRecents").then(function(e){return Promise.all([new Promise(function(t){e.getRecentActivity().then(function(e){t(e.map(function(e){e.timestamp=r.formatDate(e.timestamp);return e}))},function(){t([])})}),new Promise(function(t){e.getFrequentActivity().then(function(e){t(e)},function(){t([])})})])}).then(function(i){var s=i[0];var n=i[1];this.oModel.setData({recentActivities:s,frequentActivities:n});this._setDialogContentHeight(e,Math.max(s.length,n.length));t.setBusy(false)}.bind(this))},_setDialogContentHeight:function(e,t){var i=(t+.5)*4+2.75;if(i<18){i=18}else if(i>42){i=42}e.setContentHeight(i+"rem")},_closeDialog:function(){this.oQuickAccessDialog.close()},_titleFormatter:function(e,t){if(t===u.SEARCH){e='"'+e+'"'}return e},_descriptionFormatter:function(e){if(e===u.SEARCH){return o.i18n.getText("recentActivitiesSearchDescription")}return l.getDisplayName(e)},_itemPress:function(e){var t=e.getParameter("listItem").getBindingContextPath();var i=this.oModel.getProperty(t);if(i.url[0]==="#"){window.hasher.setHash(i.url);this._closeDialog()}else{var s=c.last("/core/shell/enableRecentActivity")&&c.last("/core/shell/enableRecentActivityLogging");if(s){var n={title:i.title,appType:u.URL,url:i.url,appId:i.url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(n)}a.openURL(i.url,"_blank")}}};return{openQuickAccessDialog:function(e,t){return h._createQuickAccessDialog(t).then(function(t){var i=t.getContent()[0];h._updateQuickAccessDialog(t);i.setSelectedKey(e);t.open()})},_getQuickAccess:function(){return h}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/ShellHeader", ["sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/theming/Parameters","sap/ui/Device","sap/ui/dom/units/Rem","sap/base/Log","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/ShellHeaderRenderer","sap/ushell/utils","sap/ushell/utils/WindowUtils"],function(e,t,i,o,a,r,s,n,l,h,u,p,g){"use strict";var d="sapUshellShellShowSearchOverlay";var f=0;var c;var m;var y=sap.ui.require.toUrl("sap/ushell/themes/base/img/SAPLogo.svg");var v=e.extend("sap.ushell.ui.ShellHeader",{metadata:{library:"sap.ushell",properties:{logo:{type:"sap.ui.core.URI",defaultValue:""},showLogo:{type:"boolean",defaultValue:true},homeUri:{type:"sap.ui.core.URI",defaultValue:"#"},searchState:{type:"string",defaultValue:"COL"},ariaLabel:{type:"string"},centralAreaElement:{type:"string",defaultValue:null},title:{type:"string",defaultValue:""}},aggregations:{headItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},headEndItems:{type:"sap.ui.core.Control",multiple:true},search:{type:"sap.ui.core.Control",multiple:false},appTitle:{type:"sap.ushell.ui.shell.ShellAppTitle",multiple:false}},associations:{},events:{searchSizeChanged:{}}},renderer:u});v.prototype.setHomeUri=function(e){if(g.hasInvalidProtocol(e)){r.fatal("Tried to set a URL with an invalid protocol as the home uri. Setting to an empty string instead.",null,"sap/ushell/ui/ShellHeader");e=""}this._bHomeIsRoot=p.isRootIntent(e);return this.setProperty("homeUri",e)};v.prototype.SearchState={COL:"COL",EXP:"EXP",EXP_S:"EXP_S"};v.prototype.init=function(){o.media.attachHandler(this.invalidate,this,o.media.RANGESETS.SAP_STANDARD_EXTENDED);o.resize.attachHandler(this.refreshLayout,this);this.getCustomLogoAltText();s.once("ShellNavigationInitialized").do(function(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){this._rerenderLogoNavigationFilterBound=this._rerenderLogoNavigationFilter.bind(this,e);e.registerNavigationFilter(this._rerenderLogoNavigationFilterBound);this._rerenderLogoNavigationFilterBound.detach=function(){e.unregisterNavigationFilter(this._rerenderLogoNavigationFilterBound)}}.bind(this))}.bind(this))};v.prototype.exit=function(){o.media.detachHandler(this.invalidate,this,o.media.RANGESETS.SAP_STANDARD_EXTENDED);o.resize.detachHandler(this.refreshLayout,this);if(this._rerenderLogoNavigationFilterfnRerenderLogoNavigationFilter){this._rerenderLogoNavigationFilterfnRerenderLogoNavigationFilter.detach()}};v.prototype.setFocusOnShellHeader=function(e){if(e){var t=this.getHeadEndItems();if(t.length>0){t[t.length-1].focus()}else{this.getAppTitle().focus()}}else{var i=this.getHeadItems();if(i.length>0){i[0].focus()}else{this.getAppTitle().focus()}}};v.prototype.onsapspace=function(e){if(e.target===this.getDomRef("logo")){this._setLocationHref(e.target.href)}};v.prototype._setLocationHref=function(e){if(g.hasInvalidProtocol(e)){r.fatal("Tried to navigate to URL with an invalid protocol. Preventing navigation.",null,"sap/ushell/ui/ShellHeader");return}window.location.href=e};v.prototype.onAfterRendering=function(){var e=this.getDomRef();if(!c&&document.body.getBoundingClientRect().height===0){e.style.visibility="hidden";e.style.height="2.75rem";return}this.refreshLayout()};v.prototype.onThemeChanged=function(e){var t=false;if(c!==e.theme){c=e.theme;t=true}if(m!==this.getLogo()){m=this.getLogo();t=true}if(t){this.invalidate()}};v.prototype.getLogo=function(){if(this.getProperty("logo")!==""){return this.getProperty("logo")}var e=i.get({name:"sapUiGlobalLogo",callback:function(){this.invalidate()}});if(e==="none"){return y}if(e){var t=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(e);if(t){return t[1]}}return undefined};v.prototype.getCustomLogoAltText=function(){var e=n.last("/core/companyLogo/accessibleText");var i;delete this._sCustomAltText;if(e){try{var o=JSON.parse(e);if(o){i=t.getConfiguration().getLanguage();this._sCustomAltText=o[i];if(!this._sCustomAltText){Object.keys(o).forEach(function(e){if(e.indexOf(i)===0){this._sCustomAltText=o[e]}}.bind(this))}if(!this._sCustomAltText){Object.keys(o).forEach(function(e){if(i.indexOf(e)===0){this._sCustomAltText=o[e]}}.bind(this))}if(!this._sCustomAltText){this._sCustomAltText=o.default}}}catch(t){r.warning("Custom logo image ALT text is not a JSON string.",e);this._sCustomAltText=e}}};v.prototype.getLogoAltText=function(e){if(!e){return""}if(e===y){return h.i18n.getText("sapLogoText")}return this._sCustomAltText||h.i18n.getText("SHELL_LOGO_TOOLTIP")};v.prototype.refreshLayout=function(){if(!this.getDomRef()){return}this._setAppTitleFontSize();this._adjustAppTitleTooltip();if(this.getSearchVisible()){var e=this.getDomRef("hdr-search");e.style.display="none";this._hideElementsForSearch();e.style.display="";e.style["max-width"]=f+"rem";this.fireSearchSizeChanged({remSize:a.fromPx(e.getBoundingClientRect().width),isFullWidth:this.isPhoneState()||this.getDomRef("hdr-end").style.display==="none"})}};v.prototype._setAppTitleFontSize=function(){if(this.isExtraLargeState()){return}var e=this.getDomRef("hdr-begin"),t=window.document.getElementById("shellAppTitle"),i="sapUshellHeadTitleWithSmallerFontSize";if(e&&t){t.classList.remove(i);t.style.overflow="visible";var o=e.getBoundingClientRect(),a=o.x+o.width,r=t.getBoundingClientRect(),s=r.x+r.width;if(s>a){t.classList.add(i)}t.style.overflow=""}};v.prototype._adjustAppTitleTooltip=function(){var e=t.byId("shellAppTitle");if(e){var i=e.getDomRef("button");var o=i&&i.firstChild;if(o){var a;var r=n.last("/core/shell/model/currentState/stateName");var s=n.last("/core/services/allMyApps/enabled");var l=(r==="app"||r==="home")&&s;var u=t.byId(e.getNavigationMenu());var p=u&&u.getItems()&&u.getItems().length>0;if(l||p){a=h.i18n.getText("shellNavMenu_openMenuTooltip")}else{var g=o.offsetWidth<o.scrollWidth;a=g?e.getText():null}if(e.getTooltip()!==a){e.setTooltip(a)}}}};v.prototype.removeHeadItem=function(e){if(typeof e==="number"){e=this.getHeadItems()[e]}this.removeAggregation("headItems",e)};v.prototype.addHeadItem=function(e){this.addAggregation("headItems",e)};v.prototype.isExtraLargeState=function(){return o.media.getCurrentRange(o.media.RANGESETS.SAP_STANDARD_EXTENDED).from===1440};v.prototype.isPhoneState=function(){var e=o.media.getCurrentRange(o.media.RANGESETS.SAP_STANDARD).name;var t=this.getDomRef().getBoundingClientRect().width>f;return o.system.phone||e==="Phone"||!t};v.prototype.setSearchState=function(e,t,i){if(this.SearchState[e]&&this.getSearchState()!==e){if(typeof t==="boolean"){i=t;t=undefined}this.setProperty("searchState",e,false);var o=e!=="COL";document.body.classList.toggle(d,o&&i);f=o?t||35:0}};v.prototype._hideElementsForSearch=function(){if(this.isExtraLargeState()){return}var e,t=this.getDomRef("hdr-search-container"),i=this.getDomRef("hdr-begin"),o=this.getDomRef("hdr-center"),r=this.getDomRef("hdr-end");if(this.getSearchState()==="EXP"||this.isPhoneState()){e=a.toPx(f+3)}else{e=a.toPx(9+.5)}var s=[i];Array.prototype.forEach.call(i.childNodes,function(e){s.unshift(e)});if(o){s.unshift(o)}i.style.flexBasis="";r.style.display="";s.forEach(function(e){if(e.getAttribute("id")==="shellAppTitle"){e.classList.remove("sapUiPseudoInvisibleText")}else{e.style.display=""}});var n;for(var l=0;l<s.length;l++){n=s[l];if(e>t.getBoundingClientRect().width){if(n.getAttribute("id")==="shellAppTitle"){n.classList.add("sapUiPseudoInvisibleText")}else{n.style.display="none";if(o&&l===0){i.style.flexBasis="auto"}}}else{return}}if(a.toPx(f)>t.getBoundingClientRect().width){r.style.display="none"}};v.prototype.getSearchWidth=function(){return f};v.prototype.isHomepage=function(){var e=window.hasher&&"#"+window.hasher.getHash()||"";var t=new RegExp("[?]"+"(?:"+"(?!&[/])."+")*");var i=e.replace(t,"");return p.isRootIntent(i)||i==="#Launchpad-openFLPPage"};v.prototype._rerenderLogoNavigationFilter=function(e,t,i){var o=e.hashChanger.isInnerAppNavigation(t,i);if(o){this.invalidate()}return e.NavigationFilterStatus.Continue};v.prototype.getSearchVisible=function(){return this.getSearchState()!==this.SearchState.COL};v.prototype.getCentralControl=function(){return t.byId(this.getCentralAreaElement())};v.prototype.setNoLogo=function(){this.setLogo(undefined)};v.prototype._getLeanMode=function(){return sap.ushell.Container.getRenderer().getSapUshellConfigParam()==="lean"};return v});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/ShellHeaderRenderer", ["sap/ushell/resources","sap/ui/Device"],function(e,t){"use strict";var r={apiVersion:2};r.render=function(t,r){var a=r.getId();var l=r.getCentralControl();t.openStart("header",r);if(!r.getVisible()){t.style("display","none")}t.class("sapUshellShellHeader");t.class("sapContrastPlus");t.attr("aria-label",e.i18n.getText("Shell_Header_AriaLabel"));t.attr("data-sap-ui-customfastnavgroup","true");t.openEnd();t.openStart("div");t.attr("id",a+"-hdr-begin");t.class("sapUshellShellHeadBegin");if(l){t.class("sapUshellHeadWithCenter")}t.openEnd();this.renderHeaderItems(t,r);this.renderLogo(t,r);this.renderTitle(t,r);t.close("div");if(l){t.openStart("div",l);t.attr("id",a+"-hdr-center");t.class("sapUshellShellHeadCenter");t.openEnd();t.renderControl(l);t.close("div")}t.openStart("div");t.attr("id",a+"-hdr-search-container");t.class("sapUshellShellHeadSearchContainer");t.openEnd();this.renderSearch(t,r);t.close("div");t.openStart("div");t.attr("id",a+"-hdr-end");t.class("sapUshellShellHeadEnd");t.openEnd();this.renderHeaderEndItems(t,r);t.close("div");t.close("header")};r.renderSearch=function(e,t){var r=t.getSearch();e.openStart("div");e.attr("id",t.getId()+"-hdr-search");e.class("sapUshellShellSearch");e.style("max-width",t.getSearchWidth()+"rem");if(t.getSearchState()==="COL"){e.style("display","none")}e.openEnd();if(r){e.renderControl(r)}e.close("div")};r.renderTitle=function(e,t){var r=t.getTitle();e.renderControl(t.getAppTitle());if(r&&t.isExtraLargeState()){e.openStart("div");e.attr("id",t.getId()+"-hdr-shell-title");e.class(t.getAppTitle()?"sapUshellShellHeadSubtitle":"sapUshellShellHeadTitle");e.openEnd();e.openStart("h2");e.class("sapUshellHeadTitle");e.attr("aria-level","2");e.attr("title",r);e.openEnd();e.text(r);e.close("h2");e.close("div")}};r.renderHeaderItems=function(e,t){var r=t.getHeadItems();r.forEach(function(t){e.renderControl(t)})};r.renderHeaderEndItems=function(e,t){t.getHeadEndItems().forEach(e.renderControl)};r.renderLogo=function(t,r){var a=r.getLogo();if(!r.getShowLogo()||a===undefined){return}var l=r._getLeanMode();var n=r._bHomeIsRoot?e.i18n.getText("homeBtn_tooltip_text"):e.i18n.getText("lastPage_tooltip");t.openStart(l?"div":"a");t.attr("id",r.getId()+"-logo");t.class("sapUshellShellIco");if(l){t.class("sapUshellLean")}else{t.attr("href",r.getHomeUri());t.attr("title",n);t.attr("role","button")}t.openEnd();t.voidStart("img");t.attr("id",r.getId()+"-icon");t.attr("alt",r.getLogoAltText(a));t.attr("src",a);t.voidEnd();t.close(l?"div":"a")};return r},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/appfinder/AppBox", ["sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/appfinder/AppBoxRenderer"],function(e,t,s,o,i,n){"use strict";var p=e.extend("sap.ushell.ui.appfinder.AppBox",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null},url:{type:"string",group:"Misc",defaultValue:null},navigationMode:{type:"string",group:"Misc",defaultValue:null}},aggregations:{pinButton:{type:"sap.m.Button",multiple:false}},events:{press:{},afterRendering:{}}},renderer:n});p.prototype.init=function(){this._oIcon=(new t).addStyleClass("sapUshellAppBoxIcon")};p.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments);this._oIcon.destroy()};p.prototype.onAfterRendering=function(){var e=this.$("title"),t=this.$("subTitle");var s=parseInt(e.css("lineHeight"),10),o=e.height();if(o/s>1){e.addClass("sapUshellAppBoxHeaderElementTwoLines");t.addClass("sapUshellAppBoxHeaderElementOneLine")}else{e.addClass("sapUshellAppBoxHeaderElementOneLine");t.addClass("sapUshellAppBoxHeaderElementTwoLines")}this.fireAfterRendering()};p.prototype.setIcon=function(e){this.setProperty("icon",e);this._oIcon.setSrc(s.isIconURI(e)?e:null)};p.prototype._getAriaLabel=function(){var e=this.getTitle(),t=this.getSubtitle(),s=this.getNavigationMode();if(t){e+=" "+t}if(s){e+=" "+i.i18n.getText(s+"NavigationMode")}return e};p.prototype.onclick=p.prototype.firePress;p.prototype.onsapspace=function(e){e.preventDefault();this.firePress(e)};p.prototype.onsapenter=p.prototype.onsapspace;return p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/appfinder/AppBoxRenderer", ["sap/ushell/resources"],function(e){"use strict";var t={apiVersion:2};t.render=function(t,l){t.openStart("li",l);t.class("sapUshellAppBox");t.attr("aria-label",l._getAriaLabel());t.attr("aria-roledescription",e.i18n.getText("tile"));t.attr("aria-describedby",l.getId());t.openEnd();t.openStart("div");t.class("sapUshellAppBoxInner");t.openEnd();var s=l.getIcon();if(s){t.renderControl(l._oIcon)}t.openStart("div");if(s){t.class("sapUshellAppBoxHeader")}else{t.class("sapUshellAppBoxHeaderNoIcon")}t.openEnd();t.openStart("div",l.getId()+"-title");t.class("sapUshellAppBoxTitle");t.openEnd();t.text(l.getTitle());t.close("div");if(l.getSubtitle()){t.openStart("div",l.getId()+"-subTitle");t.class("sapUshellAppBoxSubtitle");t.openEnd();t.text(l.getSubtitle());t.close("div")}t.close("div");t.close("div");t.openStart("div");t.class("sapUshellAppBoxActionsArea");if(l.getTitle){t.attr("role","toolbar");t.attr("aria-label",l.getTitle())}t.openEnd();t.renderControl(l.getPinButton());t.close("div");t.close("li")};return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/appfinder/PinButton", ["sap/m/Button","sap/ushell/library","sap/ushell/ui/appfinder/PinButtonRenderer"],function(e,t,n){"use strict";var r=e.extend("sap.ushell.ui.appfinder.PinButton",{metadata:{library:"sap.ushell",properties:{selected:{type:"boolean",group:"Appearance",defaultValue:false}}},renderer:n});r.prototype.onAfterRendering=function(){this.$("inner").toggleClass("sapUshellPinSelected",this.getSelected())};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/appfinder/PinButtonRenderer", ["sap/m/ButtonRenderer","sap/ui/core/Renderer"],function(e,r){"use strict";var t=r.extend(e);t.apiVersion=2;t.renderAccessibilityAttributes=function(e,r,t){t.pressed=r.getSelected()};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/bookmark/SaveOnPage.controller", ["sap/ui/core/mvc/Controller","sap/ushell/resources","sap/ui/thirdparty/hasher","sap/ui/core/library"],function(e,t,o,r){"use strict";var i=r.ValueState;return e.extend("sap.ushell.ui.bookmark.SaveOnPage",{onInit:function(){var e=this.getView();e.setModel(t.i18nModel,"i18n");this.byId("bookmarkTitleInput").attachLiveChange(function(){if(this.getValue()===""){this.setValueStateText(t.i18n.getText("bookmarkTitleInputError"));this.setValueState(i.Error)}else{this.setValueState(i.None)}});this.oContentNodeSelector=this.byId("SelectedNodesComboBox");this.oContentNodeSelector.attachSelectionChanged(function(){var e=this.getSelectedContentNodes();if(Array.isArray(e)&&e.length<1){this.setValueStateText(t.i18n.getText("bookmarkPageSelectError"));this.setValueState(i.Error)}else{this.setValueState(i.None)}})},removeFocusFromTile:function(){this.getView().getDomRef().querySelector(".sapMGT").removeAttribute("tabindex")},getBookmarkTileData:function(){var e=this.getView();var t=e.getModel();var r=e.getViewData();var i;if(r.customUrl){if(typeof r.customUrl==="function"){i=r.customUrl()}else{i=r.customUrl}}else{i=o.getHash()?"#"+o.getHash():window.location.href}var n={title:t.getProperty("/title"),subtitle:t.getProperty("/subtitle"),url:i,icon:t.getProperty("/icon"),info:t.getProperty("/info"),numberUnit:t.getProperty("/numberUnit"),serviceUrl:typeof r.serviceUrl==="function"?r.serviceUrl():r.serviceUrl,dataSource:t.getProperty("/dataSource"),serviceRefreshInterval:t.getProperty("/serviceRefreshInterval"),contentNodes:this.oContentNodeSelector.getSelectedContentNodes(),keywords:t.getProperty("/keywords")};var s=["title","subtitle","info"];s.forEach(function(e){n[e]=(n[e]||"").substring(0,256).trim()});return n},onValueHelpEndButtonPressed:function(){if(this.oContentNodeSelector&&this.oContentNodeSelector.fireSelectionChanged){this.oContentNodeSelector.fireSelectionChanged()}}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/cards/FrequentActivitiesExtension", ["sap/ui/integration/Extension","sap/ushell/utils/UrlParsing","sap/ushell/utils/AppType","sap/ushell/library","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(e,t,i,n,r,s,a){"use strict";var o=n.AppType;function c(e,t){if(t===o.SEARCH){return'"'+e+'"'}return e}function u(e){if(e===o.SEARCH){return a.i18n.getText("recentActivitiesSearchDescription")}return i.getDisplayName(e)}return e.extend("sap.ushell.ui.cards.FrequentActivitiesExtension",{init:function(){e.prototype.init.apply(this,arguments);this.oUserRecentsPromise=sap.ushell.Container.getServiceAsync("UserRecents");this.oCrossAppNavPromise=sap.ushell.Container.getServiceAsync("CrossApplicationNavigation")},exit:function(){e.prototype.exit.apply(this,arguments);s.on("newUserRecentsItem").off();s.on("userRecentsCleared").off()},onCardReady:function(){s.on("newUserRecentsItem").do(function(){this.getCard().refreshData()}.bind(this));s.on("userRecentsCleared").do(function(){this.getCard().refreshData()}.bind(this))},getData:function(){if(!r.last("/core/shell/model/enableTrackingActivity")){return Promise.resolve([])}if(this._sortedData){return Promise.resolve(this._resolvedData)}return this.oUserRecentsPromise.then(function(e){return new Promise(function(t,i){e.getFrequentActivity().done(t).fail(i)})}).then(this._getActivitiesAsCardItems.bind(this)).then(this._checkEnabled.bind(this))},_getActivitiesAsCardItems:function(e){var i=[];for(var n=0;n<e.length;n++){if(e[n].url&&e[n].url!==""){var r=t.parseShellHash(e[n].url);var s={Name:c(e[n].title,e[n].appType),Description:u(e[n].appType),Icon:e[n].icon||"sap-icon://product",Url:e[n].url};if(r){s.Intent={SemanticObject:r.semanticObject,Action:r.action,Parameters:r.params,AppSpecificRoute:r.appSpecificRoute}}else{s.Url=e[n].url}i.push(s)}}return i},_checkEnabled:function(e){var t=e.map(function(e){return this._isActionEnabled(e).then(function(t){e.Enabled=t;return e})}.bind(this));return Promise.all(t)},_isActionEnabled:function(e){var i=t.parseShellHash(e.Url);if(!i){return Promise.resolve(true)}var n=i.params;var r={target:{semanticObject:i.semanticObject,action:i.action},params:n};return this.oCrossAppNavPromise.then(function(e){return new Promise(function(t){e.isNavigationSupported([r]).done(function(e){t(e[0].supported)}).fail(function(){t(false)})})})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/cards/RecentActivitiesExtension", ["sap/ui/integration/Extension","sap/ushell/utils/UrlParsing","sap/ushell/utils/AppType","sap/ushell/library","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(e,t,n,i,r,s,a){"use strict";var o=i.AppType;function c(e,t){if(t===o.SEARCH){return'"'+e+'"'}return e}function u(e){if(e===o.SEARCH){return a.i18n.getText("recentActivitiesSearchDescription")}return n.getDisplayName(e)}return e.extend("sap.ushell.ui.cards.RecentActivitiesExtension",{init:function(){e.prototype.init.apply(this,arguments);this.oUserRecentsPromise=sap.ushell.Container.getServiceAsync("UserRecents");this.oCrossAppNavPromise=sap.ushell.Container.getServiceAsync("CrossApplicationNavigation")},exit:function(){e.prototype.exit.apply(this,arguments);s.on("newUserRecentsItem").off();s.on("userRecentsCleared").off()},onCardReady:function(){s.on("newUserRecentsItem").do(function(){this.getCard().refreshData()}.bind(this));s.on("userRecentsCleared").do(function(){this.getCard().refreshData()}.bind(this))},getData:function(){if(!r.last("/core/shell/model/enableTrackingActivity")){return Promise.resolve([])}return this.oUserRecentsPromise.then(function(e){return new Promise(function(t,n){e.getRecentActivity().done(t).fail(n)})}).then(this._getActivitiesAsCardItems.bind(this)).then(this._checkEnabled.bind(this))},_getActivitiesAsCardItems:function(e){var n=[];for(var i=0;i<e.length;i++){if(e[i].url&&e[i].url!==""){var r=t.parseShellHash(e[i].url);var s={Name:c(e[i].title,e[i].appType),Description:u(e[i].appType),Icon:e[i].icon||"sap-icon://product",Url:e[i].url};if(r){s.Intent={SemanticObject:r.semanticObject,Action:r.action,Parameters:r.params,AppSpecificRoute:r.appSpecificRoute}}else{s.Url=e[i].url}n.push(s)}}return n},_checkEnabled:function(e){var t=e.map(function(e){return this._isActionEnabled(e).then(function(t){e.Enabled=t;return e})}.bind(this));return Promise.all(t)},_isActionEnabled:function(e){var n=t.parseShellHash(e.Url);if(!n){return Promise.resolve(true)}var i=n.params;var r={target:{semanticObject:n.semanticObject,action:n.action},params:i};return this.oCrossAppNavPromise.then(function(e){return new Promise(function(t){e.isNavigationSupported([r]).done(function(e){t(e[0].supported)}).fail(function(){t(false)})})})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/AboutButton", ["sap/m/ButtonRenderer","sap/ushell/resources","sap/ushell/ui/launchpad/ActionItem"],function(t,e,o){"use strict";var i=o.extend("sap.ushell.ui.footerbar.AboutButton",{metadata:{library:"sap.ushell"},renderer:t});i.prototype.init=function(){if(o.prototype.init){o.prototype.init.apply(this,arguments)}this.setIcon("sap-icon://hint");this.setText(e.i18n.getText("about"));this.attachPress(this.showAboutDialog)};i.prototype.showAboutDialog=function(){return new Promise(function(t,o){sap.ui.require(["sap/ushell/ui/footerbar/AboutDialog.controller","sap/ui/core/Fragment"],function(i,n){n.load({id:"aboutDialogFragment",name:"sap.ushell.ui.footerbar.AboutDialog",type:"XML",controller:new i}).then(function(o){o.setModel(e.getTranslationModel(),"i18n");o.open();t()}).catch(o)})})};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/AboutDialog.controller", ["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ushell/services/AppConfiguration","sap/ushell/Config","sap/ushell/resources","sap/base/Log","sap/base/util/isEmptyObject","sap/ui/Device"],function(e,t,n,o,i,r,a,s,l){"use strict";return e.extend("sap.ushell.ui.footerbar.AboutDialog.controller",{onBeforeOpen:function(){this._setupAboutDialogModel()},onClose:function(){this._getDialog().close()},onAfterClose:function(){this._getDialog().destroy()},_getDialog:function(){if(!this.oAboutDialog){this.oAboutDialog=t.byId("aboutDialogFragment","aboutDialog")}return this.oAboutDialog},_setupAboutDialogModel:function(){this._setupAppInfoModel().catch(function(e){a.error("Failed to setup application info model.",e)});var e=this._getDialog(),t=this._getSystemInformation(),o=this._getUserEnvironmentInformation(),i=new n(t),r=new n(o);e.setModel(i,"SysInfo");e.setModel(r,"UserEnvInfo")},_setupAppInfoModel:function(){var e=["appId","appVersion","appSupportInfo","technicalAppComponentId","appFrameworkId","appFrameworkVersion","appTitle"],t=this._getDialog();return new Promise(function(i,r){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(t){var n=t.getCurrentApplication();return Promise.all([n.getInfo(e),this._getContentProviderLabel(n)])}.bind(this)).then(function(r){var a=o.getMetadata(),s=r[0]||{},l=r[1];e=e.concat(["contentProviderLabel"]);s.appTitle=s.appTitle&&typeof s.appTitle==="string"&&s.appTitle.length>0?s.appTitle:a.title;s.contentProviderLabel=l;var u=this._buildApplicationInformationObject(e,s);t.setModel(new n(u),"AppInfo");i()}.bind(this)).catch(function(e){r(e)})}.bind(this))},_buildApplicationInformationObject:function(e,t){var n={},o;for(var i=0;i<e.length;i++){o=e[i];if(t[o]){n[o]={label:r.i18n.getText(o),text:t[o]}}}return n},_getSystemInformation:function(){var e=sap.ushell.Container.getLogonSystem(),t=e.getProductName(),n=e.getProductVersion(),o=e.getSystemName(),i=e.getSystemRole(),a=e.getTenantRole(),s={};if(t){s.productName={label:r.i18n.getText("productName"),text:t}}if(n){s.productVersion={label:r.i18n.getText("productVersionFld"),text:n}}if(o){s.systemName={label:r.i18n.getText("systemName"),text:o}}if(i){s.systemRole={label:r.i18n.getText("systemRole"),text:i}}if(a){s.tenantRole={label:r.i18n.getText("tenantRole"),text:a}}return s},_getUserEnvironmentInformation:function(){var e={};e.userAgentFld={label:r.i18n.getText("userAgentFld"),text:navigator.userAgent};var t=this._getDeviceType(),n=this._isTouchSupported(),o=sap.ushell.Container.getUser(),i=o.getTheme(),a=o.getContentDensity()==="cozy";if(t){e.deviceType={label:r.i18n.getText("deviceType"),text:t}}e.touchSupported={label:r.i18n.getText("touchSupported"),text:n?r.i18n.getText("yes"):r.i18n.getText("no")};e.activeTheme={label:r.i18n.getText("activeTheme"),text:i};e.optimizedForTouch={label:r.i18n.getText("AppearanceContentDensityLabel"),text:a?r.i18n.getText("yes"):r.i18n.getText("no")};return e},_getContentProviderLabel:function(e){if(i.last("/core/contentProviders/providerInfo/enabled")){return e.getSystemContext().then(function(e){return e.label})}return Promise.resolve(undefined)},_getDeviceType:function(){var e;if(l.system.combi){e=r.i18n.getText("configuration.form_factor_combi")}else if(l.system.desktop){e=r.i18n.getText("configuration.form_factor_desktop")}else if(l.system.tablet){e=r.i18n.getText("configuration.form_factor_tablet")}else if(l.system.phone){e=r.i18n.getText("configuration.form_factor_phone")}return e},_isTouchSupported:function(){return l.support.touch&&(l.system.tablet||l.system.phone||l.system.combi)},calculateNumberOfColumns:function(e){if(!this.isFormVisible(e)){return 1}return Object.keys(e).length>1?2:1},isFormVisible:function(e){return!!e&&!s(e)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/AddBookmarkButton", ["sap/base/Log","sap/m/Button","sap/m/ButtonRenderer","sap/m/Dialog","sap/m/library","sap/m/MessageBox","sap/m/Text","sap/m/VBox","sap/ui/core/library","sap/ui/core/mvc/View","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/library","sap/ushell/resources"],function(e,t,o,i,r,s,a,n,l,u,p,d,h,c,g){"use strict";var f=r.ButtonType;var y=l.ValueState;var m=l.mvc.ViewType;var v=t.extend("sap.ushell.ui.footerbar.AddBookmarkButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"function",group:"Misc",defaultValue:null},afterPressHandler:{type:"function",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},info:{type:"string",group:"Misc",defaultValue:null},tileIcon:{type:"string",group:"Appearance",defaultValue:null},numberUnit:{type:"string",group:"Appearance",defaultValue:null},keywords:{type:"string",group:"Misc",defaultValue:null},customUrl:{type:"any",group:"Misc",defaultValue:null},serviceUrl:{type:"any",group:"Misc",defaultValue:null},dataSource:{type:"any",group:"Misc",defaultValue:null},serviceRefreshInterval:{type:"string",group:"Misc",defaultValue:null},showGroupSelection:{type:"boolean",group:"Misc",defaultValue:true},showPageSelection:{type:"boolean",group:"Misc",defaultValue:true},appData:{type:"object",group:"Misc",defaultValue:null,deprecated:true}}},renderer:o});v.prototype.init=function(){if(t.prototype.init){t.prototype.init.apply(this,arguments)}this.bSpaceEnabled=h.last("/core/spaces/enabled");this.bMyHomeEnabled=h.last("/core/spaces/myHome/enabled");this.setIcon("sap-icon://add-favorite");this.setText(g.i18n.getText("addToHomePageBtn"));this.setEnabled();this.oModel=new d({showGroupSelection:true,showPageSelection:true,title:"",subtitle:"",numberValue:0,info:"",icon:"",numberUnit:"",keywords:""});this.attachPress(function(){var e=this.getBeforePressHandler();if(e){e()}this.showAddBookmarkDialog()}.bind(this))};v.prototype.exit=function(){if(this.oDialog){this.oDialog.destroy()}if(this.oModel){this.oModel.destroy()}if(t.prototype.exit){t.prototype.exit.apply(this,arguments)}};v.prototype.setBookmarkTileView=function(e){this.bookmarkTileView=e};v.prototype.getBookmarkTileView=function(){return this.bookmarkTileView};v.prototype.showAddBookmarkDialog=function(){var e=this.getAppData()||{};var t={serviceUrl:this.getServiceUrl()||e.serviceUrl,customUrl:this.getCustomUrl()||e.customUrl};this.oModel.setProperty("/serviceUrl",!!t.serviceUrl);var o;if(this.bSpaceEnabled){o=u.create({type:m.XML,viewName:"sap.ushell.ui.bookmark.SaveOnPage",viewData:t})}else{o=u.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view",viewData:t})}return o.then(function(e){this.setBookmarkTileView(e);e.setModel(this.oModel);return new Promise(function(t,o){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout"],function(o,i){this.oSimpleForm=new o({id:"bookmarkFormId",layout:i.ResponsiveGridLayout,content:[e],editable:true}).addStyleClass("sapUshellAddBookmarkForm");t(this._openDialog(this.oSimpleForm))}.bind(this))}.bind(this))}.bind(this))};v.prototype._openDialog=function(e){this.oDialog=new i({id:"bookmarkDialog",title:g.i18n.getText("addToHomePageBtn"),contentWidth:"25rem",content:e,beginButton:new t("bookmarkOkBtn",{text:g.i18n.getText("saveBtn"),type:f.Emphasized,press:[this._handleOKButtonPress,this]}),endButton:new t("bookmarkCancelBtn",{text:g.i18n.getText("cancelBtn"),press:[this._handleCancelButtonPress,this]}),stretch:p.system.phone,horizontalScrolling:false,afterClose:function(){var e=this.getAfterPressHandler();if(e){e()}this._restoreDialogEditableValuesToDefault();this.oDialog.destroy();delete this.oDialog}.bind(this)}).addStyleClass("sapContrastPlus");this.oDialog.open();return this.oDialog};v.prototype._handleOKButtonPress=function(){if(this.bSpaceEnabled){this._handleOKButtonPressSpacesMode()}else{this._handleOKButtonPressClassicMode()}};v.prototype._handleCancelButtonPress=function(){if(this.bSpaceEnabled){this._handleCancelButtonPressSpacesMode()}else{this._handleCancelButtonPressClassicMode()}};v.prototype.setTitle=function(e){this.setProperty("title",e,true);this.oModel.setProperty("/title",e);return this};v.prototype.setSubtitle=function(e){this.setProperty("subtitle",e,true);this.oModel.setProperty("/subtitle",e);return this};v.prototype.setInfo=function(e){this.setProperty("info",e,true);this.oModel.setProperty("/info",e);return this};v.prototype.setTileIcon=function(e){this.setProperty("tileIcon",e,true);this.oModel.setProperty("/icon",e);return this};v.prototype.setShowGroupSelection=function(e){this.setProperty("showGroupSelection",e,true);this.oModel.setProperty("/showGroupSelection",e);return this};v.prototype.setNumberUnit=function(e){this.setProperty("numberUnit",e,true);this.oModel.setProperty("/numberUnit",e);return this};v.prototype.setServiceRefreshInterval=function(e){this.setProperty("serviceRefreshInterval",e,true);this.oModel.setProperty("/serviceRefreshInterval",e);return this};v.prototype.setDataSource=function(e){this.setProperty("dataSource",e,true);this.oModel.setProperty("/dataSource",e);return this};v.prototype.setKeywords=function(e){this.setProperty("keywords",e,true);this.oModel.setProperty("/keywords",e);return this};v.prototype.setAppData=function(e){this.setProperty("appData",e,true);var t=["showGroupSelection","title","subtitle","info","icon","numberUnit","keywords","serviceRefreshInterval","dataSource"];var o=["showInfo","showPreview"];Object.keys(e).forEach(function(i){if(t.indexOf(i)>-1){var r=i==="icon"?"tileIcon":i;this.setProperty(r,e[i],true)}if(t.indexOf(i)>-1||o.indexOf(i)>-1){this.oModel.setProperty("/"+i,e[i])}}.bind(this));return this};v.prototype._restoreDialogEditableValuesToDefault=function(){if(this.oModel){this.oModel.setProperty("/title",this.getTitle());this.oModel.setProperty("/subtitle",this.getSubtitle());this.oModel.setProperty("/info",this.getInfo())}};v.prototype._handleCancelButtonPressSpacesMode=function(){var e=this.getBookmarkTileView().getController();var t=e.getBookmarkTileData();if(t.title||t.subtitle||t.info||t.contentNodes.length){var o=g.i18n.getText("SaveAsTileDialog.MessageBox.Action.Discard");var i=g.i18n.getText("SaveAsTileDialog.MessageBox.Message.Discard");var r=g.i18n.getText("SaveAsTileDialog.MessageBox.Title.Discard");s.show(i,{title:r,actions:[o,s.Action.CANCEL],emphasizedAction:o,onClose:function(e){if(e===o){this.oDialog.close()}}.bind(this)})}else{this.oDialog.close()}};v.prototype._handleOKButtonPressSpacesMode=function(){var t=this.getBookmarkTileView().getController();var o=t.getBookmarkTileData();var i=true;if(o.contentNodes.length===0){var r=t.byId("SelectedNodesComboBox");if(r){r.setValueState(y.Error);r.setValueStateText(g.i18n.getText("bookmarkPageSelectError"));i=false}}if(!o.title||o.title.length<1){var s=t.byId("bookmarkTitleInput");if(s){s.setValueState(y.Error);s.setValueStateText(g.i18n.getText("bookmarkTitleInputError"));i=false}}if(!i){sap.ushell.Container.getServiceAsync("Message").then(function(e){e.info(g.i18n.getText("SaveAsTileDialog.MessageToast.ValidationFailed"))});return}this.oDialog.setBusy(true);var a=sap.ushell.Container.getServiceAsync("Bookmark");var n=o.contentNodes.map(function(t){return a.then(function(e){return e.addBookmark(o,t)}).then(function(){return{pageId:t.id,status:"resolved"}}).catch(function(o){e.error("Failed to add one a bookmark: ",o,"sap.ushell.ui.footerbar.AddBookmarkButton");return{pageId:t.id,error:o,status:"failed"}})});Promise.all(n).then(function(e){sap.ushell.Container.getServiceAsync("Message").then(function(t){var i=e.filter(function(e){return e.status==="resolved"}).length;var r=e.filter(function(e){return e.status==="failed"});if(i===1){t.info(g.i18n.getText("SaveAsTileDialog.MessageToast.TileCreatedInPage"))}else if(i>1){t.info(g.i18n.getText("SaveAsTileDialog.MessageToast.TileCreatedInPages"))}if(r.length){this._showErrorDialog(r,i,o.title)}this.oDialog.setBusy(false);this.oDialog.close()}.bind(this))}.bind(this))};v.prototype._showErrorDialog=function(e,t,o){sap.ushell.Container.getServiceAsync("Message").then(function(i){var r,s;if(e.length===1){if(t===0){r=g.i18n.getText("SaveAsTileDialog.MessageBox.SinglePageError")}else{r=g.i18n.getText("SaveAsTileDialog.MessageBox.OnePageError")}s=g.i18n.getText("SaveAsTileDialog.MessageBox.PageErrorDetail",[o,e[0].pageId])}else if(e.length>1){if(t===0){r=g.i18n.getText("SaveAsTileDialog.MessageBox.AllPagesError")}else{r=g.i18n.getText("SaveAsTileDialog.MessageBox.SomePagesError")}var l=e.map(function(e){return e.pageId}).join("\n");s=g.i18n.getText("SaveAsTileDialog.MessageBox.PagesErrorDetail",[o,l])}var u=new n({items:[new a({text:s}).addStyleClass("sapUiSmallMarginBottom"),new a({text:e.map(function(e){return e.error}).join("\n")}).addStyleClass("sapUiSmallMarginBottom"),new a({text:g.i18n.getText("SaveAsTileDialog.MessageBox.PageErrorSolution")})]});i.errorWithDetails(r,u)})};v.prototype._handleCancelButtonPressClassicMode=function(){this.oDialog.close()};v.prototype._handleOKButtonPressClassicMode=function(){var t=this.getBookmarkTileView();var o=t.getController();var i=o.getBookmarkTileData();if(!i.title||i.title.length<1){var r=t.getTitleInput();if(r){r.setValueState(y.Error);r.setValueStateText(g.i18n.getText("bookmarkTitleInputError"));return Promise.reject()}}this.oDialog.setBusy(true);var s=i.group?i.group.object:"";delete i.group;return Promise.all([sap.ushell.Container.getServiceAsync("Bookmark"),sap.ushell.Container.getServiceAsync("Message")]).then(function(t){var o=t[0];var r=t[1];return new Promise(function(e,t){o.addBookmark(i,s).done(e).fail(t)}).then(function(){r.info(g.i18n.getText("tile_created_msg"))}).catch(function(t){e.error("Failed to add bookmark",t,"sap.ushell.ui.footerbar.AddBookmarkButton");r.error(g.i18n.getText("fail_to_add_tile_msg"))})}).finally(function(){this.oDialog.setBusy(false);this.oDialog.close()}.bind(this))};v.prototype.setEnabled=function(o){var i="",r=true,s;if(sap.ushell.renderers&&sap.ushell.renderers.fiori2&&sap.ushell.renderers.fiori2.RendererExtensions){s=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration();if(s.appState){i=s.appState}if(s.enablePersonalization!==undefined){r=s.enablePersonalization}if(!r&&this.bSpaceEnabled&&this.bMyHomeEnabled){r=true}}if(i==="headerless"||i==="standalone"||i==="embedded"||i==="merged"||!r){o=false}if(!sap.ushell.Container){if(this.getEnabled()){e.warning("Disabling 'Save as Tile' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.AddBookmarkButton")}o=false}t.prototype.setEnabled.call(this,o);if(!o){this.addStyleClass("sapUshellAddBookmarkButton")}};return v});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/ContactSupportButton", ["sap/base/Log","sap/m/ButtonRenderer","sap/m/library","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/ActionItem"],function(t,e,n,i,jQuery,a,o,s,l){"use strict";var r=n.ButtonType;var u=l.extend("sap.ushell.ui.footerbar.ContactSupportButton",{metadata:{library:"sap.ushell"},renderer:e});u.prototype.init=function(){if(l.prototype.init){l.prototype.init.apply(this,arguments)}this.setIcon("sap-icon://email");this.setText(o.i18n.getText("contactSupportBtn"));this.attachPress(this.showContactSupportDialog);this.setEnabled()};u.prototype.showContactSupportDialog=function(){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout","sap/m/TextArea","sap/m/Input","sap/m/Link","sap/m/Label","sap/m/Text","sap/m/Dialog","sap/m/Button","sap/ushell/UserActivityLog"],function(t,e,n,a,l,u,h,p,c,d){var x="",g="",m="",C=[],f,b;b=function(){this.oDialog.removeContent(this.oBottomSimpleForm.getId());this.oBottomSimpleForm.destroy();if(this.oClientContext.navigationData.applicationInformation){x=this.oClientContext.navigationData.applicationInformation.applicationType;g=this.oClientContext.navigationData.applicationInformation.url;m=this.oClientContext.navigationData.applicationInformation.additionalInformation}C.push(new h({text:this.translationBundle.getText("loginDetails")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));C.push(new u({text:this.translationBundle.getText("userFld")}));C.push(new h({text:this.oClientContext.userDetails.fullName||""}));C.push(new u({text:this.translationBundle.getText("serverFld")}));C.push(new h({text:window.location.host}));if(this.oClientContext.userDetails.eMail&&this.oClientContext.userDetails.eMail!==""){C.push(new u({text:this.translationBundle.getText("eMailFld")}));C.push(new h({text:this.oClientContext.userDetails.eMail||""}))}C.push(new u({text:this.translationBundle.getText("languageFld")}));C.push(new h({text:this.oClientContext.userDetails.Language||""}));if(this.oClientContext.shellState==="app"||this.oClientContext.shellState==="standalone"){C.push(new h({text:""}));C.push(new h({text:this.translationBundle.getText("navigationDataFld")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));C.push(new u({text:this.translationBundle.getText("hashFld")}));C.push(new h({text:this.oClientContext.navigationData.navigationHash||""}));C.push(new h({text:""}));C.push(new h({text:this.translationBundle.getText("applicationInformationFld")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));C.push(new u({text:this.translationBundle.getText("applicationTypeFld")}));C.push(new h({text:x}));C.push(new u({text:this.translationBundle.getText("urlFld")}));C.push(new h({text:g}));C.push(new u({text:this.translationBundle.getText("additionalInfoFld")}));C.push(new h({text:m}))}this.oBottomSimpleForm=new t("technicalInfoBox",{layout:e.ResponsiveLayout,content:C}).addStyleClass("sapUshellTechnicalInfoBox");if(i.os.ios&&i.system.phone){this.oBottomSimpleForm.addStyleClass("sapUshellContactSupportFixWidth")}f=this.oBottomSimpleForm.onAfterRendering;this.oBottomSimpleForm.onAfterRendering=function(){f.apply(this,arguments);var t=jQuery(this.getDomRef());t.attr("tabIndex",0);setTimeout(function(){this.focus()}.bind(t),700)};this.oDialog.addContent(this.oBottomSimpleForm)}.bind(this);this._embedLoginDetailsInBottomForm=b;this.translationBundle=o.i18n;this.oClientContext=d.getMessageInfo();this.oLink=new l({text:this.translationBundle.getText("technicalDataLink")});this.oBottomSimpleForm=new t("bottomForm",{editable:false,content:[this.oLink]});this.sendButton=new c("contactSupportSendBtn",{text:this.translationBundle.getText("sendBtn"),type:r.Emphasized,enabled:true,press:function(){this.oSubjectInput.fireChange();this.oTextArea.fireChange();if(this.oSubjectInput.getValueState()!=="Error"&&this.oTextArea.getValueState()!=="Error"){sap.ushell.Container.getServiceAsync("SupportTicket").then(function(t){var e=this.oSubjectInput.getValue();var n=this.oTextArea.getValue();t.createTicket({subject:e,text:n,clientContext:this.oClientContext}).then(function(){sap.ushell.Container.getServiceAsync("Message").then(function(t){t.info(this.translationBundle.getText("supportTicketCreationSuccess"))}.bind(this))}.bind(this)).catch(function(){sap.ushell.Container.getServiceAsync("Message").then(function(t){t.error(this.translationBundle.getText("supportTicketCreationFailed"))}.bind(this))}.bind(this));this.oDialog.close()}.bind(this))}}.bind(this)});this.cancelButton=new c("contactSupportCancelBtn",{text:this.translationBundle.getText("cancelBtn"),press:function(){this.oDialog.close()}.bind(this)});var S=function(t){var e=t.getSource();if(!e.getValue()){if(e.getId()==="subjectInput"){e.setValueStateText(this.translationBundle.getText("subjectEmptyErrorMessage"))}if(e.getId()==="textArea"){e.setValueStateText(this.translationBundle.getText("txtAreaEmptyErrorMessage"))}e.setValueState("Error")}else{e.setValueState("None")}}.bind(this);this.oSubjectLabel=new u("subjectLabel",{text:this.translationBundle.getText("subjectLabel"),required:true});this.oSubjectInput=new a("subjectInput",{});this.oSubjectInput.attachLiveChange(S);this.oSubjectInput.attachChange(S);this.oTextAreaLabel=new u("textAreaLabel",{text:this.translationBundle.getText("txtAreaLabel"),required:true});this.oTextArea=new n("textArea",{rows:7});this.oTextArea.attachLiveChange(S);this.oTextArea.attachChange(S);this.oTopSimpleForm=new t("topForm",{editable:false,content:[this.oSubjectLabel,this.oSubjectInput,this.oTextAreaLabel,this.oTextArea],layout:e.ResponsiveGridLayout});this.oDialog=new p({id:"ContactSupportDialog",title:this.translationBundle.getText("contactSupportBtn"),contentWidth:"29.6rem",leftButton:this.sendButton,rightButton:this.cancelButton,initialFocus:"subjectInput",afterOpen:function(){jQuery("#textArea").on("focusout",function(){window.scrollTo(0,0)})},afterClose:function(){this.oDialog.destroy();if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("userActionsMenuHeaderButton").focus()}}.bind(this)}).addStyleClass("sapUshellContactSupportDialog").addStyleClass("sapContrastPlus");this.oSubjectInput.setPlaceholder(this.translationBundle.getText("subjectPlaceHolderHeader"));this.oTextArea.setPlaceholder(this.translationBundle.getText("txtAreaPlaceHolderHeader"));this.oLink.attachPress(b.bind(this));this.oDialog.addCustomData(new s({key:"aria-label",value:this.translationBundle.getText("ContactSupportArialLabel"),writeToDom:true}));this.oDialog.addContent(this.oTopSimpleForm);this.oDialog.addContent(this.oBottomSimpleForm);this.oDialog.open()}.bind(this))};u.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){t.warning("Disabling 'Contact Support' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.ContactSupportButton")}e=false}l.prototype.setEnabled.call(this,e)};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/JamDiscussButton", ["sap/base/Log","sap/m/Button","sap/m/ButtonRenderer","sap/ui/core/Core","sap/ushell/resources"],function(s,e,t,i,n){"use strict";var a=e.extend("sap.ushell.ui.footerbar.JamDiscussButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},jamData:{type:"object",group:"Misc",defaultValue:null}}},renderer:t});a.prototype.init=function(){var s=this;if(e.prototype.init){e.prototype.init.apply(this,arguments)}this.setEnabled();this.setIcon("sap-icon://discussion-2");this.setText(n.i18n.getText("discussBtn"));this.attachPress(function(){if(s.getBeforePressHandler()){s.getBeforePressHandler()()}this.showDiscussDialog(s.getAfterPressHandler())})};a.prototype.showDiscussDialog=function(s){if(!this.discussComponent){this.discussComponent=i.createComponent({name:"sap.collaboration.components.fiori.feed.dialog"})}this.discussComponent.setSettings(this.getJamData());this.discussComponent.open();if(s){s()}};a.prototype.setEnabled=function(t){if(!sap.ushell.Container){if(this.getEnabled()){s.warning("Disabling JamDiscussButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamDiscussButton")}t=false}else{var i=sap.ushell.Container.getUser();if(!(i&&i.isJamActive())){if(this.getEnabled()){s.info("Disabling JamDiscussButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamDiscussButton")}t=false;this.setVisible(false)}}e.prototype.setEnabled.call(this,t)};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/JamShareButton", ["sap/base/Log","sap/collaboration/components/fiori/sharing/dialog/Component","sap/m/Button","sap/m/ButtonRenderer","sap/ui/core/Core","sap/ushell/library","sap/ushell/resources"],function(e,t,i,o,n,s,a){"use strict";var r=i.extend("sap.ushell.ui.footerbar.JamShareButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},jamData:{type:"object",group:"Misc",defaultValue:null}}},renderer:o});r.prototype.init=function(){if(i.prototype.init){i.prototype.init.apply(this,arguments)}this.setEnabled();this.setIcon("sap-icon://share-2");this.setText(a.i18n.getText("shareBtn"));this.attachPress(function(){if(this.getBeforePressHandler()){this.getBeforePressHandler()()}this.showShareDialog(this.getAfterPressHandler())}.bind(this))};r.prototype.showShareDialog=function(t){function i(){this.shareComponent.setSettings(this.getJamData());this.shareComponent.open();if(t){t()}}if(!this.shareComponent){this.shareComponent=n.createComponent({name:"sap.collaboration.components.fiori.sharing.dialog"})}if(sap.ushell.Container&&sap.ushell.Container.inAppRuntime()){this.adjustFLPUrl(this.getJamData()).then(function(){i.call(this)}.bind(this),function(t){e.error("Could not retrieve FLP URL",t,"sap.ushell.ui.footerbar.JamShareButton")})}else{i.call(this)}};r.prototype.exit=function(){if(this.shareComponent){this.shareComponent.destroy()}if(i.prototype.exit){i.prototype.exit.apply(this,arguments)}};r.prototype.setEnabled=function(t){if(sap.ushell.Container){var o=sap.ushell.Container.getUser();if(!(o&&o.isJamActive())){if(!t){e.info("Disabling JamShareButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamShareButton")}t=false;this.setVisible(false)}}else{if(!t){e.warning("Disabling JamShareButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamShareButton")}t=false}i.prototype.setEnabled.call(this,t)};r.prototype.adjustFLPUrl=function(e){if(e&&e.object&&e.object.id&&typeof e.object.id==="string"&&e.object.id===document.URL){return sap.ushell.Container.getFLPUrl(true).then(function(t){e.object.id=t})}return Promise.resolve()};return r},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/LogoutButton", ["sap/base/Log","sap/m/ButtonRenderer","sap/m/MessageBox","sap/ui/core/ElementMetadata","sap/ushell/resources","sap/ushell/ui/launchpad/ActionItem","sap/ushell/ui/launchpad/LoadingDialog"],function(t,e,n,i,o,s,a){"use strict";var l=n.Action;var u=n.Icon;var r=s.extend("sap.ushell.ui.footerbar.LogoutButton",{metadata:{library:"sap.ushell"},renderer:e});r.prototype.init=function(){if(s.prototype.init){s.prototype.init.apply(this,arguments)}this.setIcon("sap-icon://log");this.setTooltip(o.i18n.getText("signoutBtn_tooltip"));this.setText(o.i18n.getText("signoutBtn_title"));this.attachPress(this.logout);this.setEnabled()};r.prototype.logout=function(){var t=true,e=false,s=new a({text:""});sap.ushell.Container.getGlobalDirty().done(function(r){t=false;if(e===true){s.exit();s=new a({text:""})}var p=o.i18n,g;if(r===sap.ushell.Container.DirtyState.DIRTY){g={message:p.getText("unsaved_data_warning_popup_message"),icon:u.WARNING,messageTitle:p.getText("unsaved_data_warning_popup_title")}}else{g={message:p.getText("signoutConfirmationMsg"),icon:u.QUESTION,messageTitle:p.getText("signoutMsgTitle")}}n.show(g.message,g.icon,g.messageTitle,[l.OK,l.CANCEL],function(t){if(t===l.OK){s.openLoadingScreen();s.showAppInfo(o.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.logout()}},i.uid("confirm"))});if(t===true){s.openLoadingScreen();e=true}};r.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){t.warning("Disabling 'Logout' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.LogoutButton")}e=false}s.prototype.setEnabled.call(this,e)};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/SaveAsTile.controller", ["sap/ui/core/mvc/Controller","sap/base/Log","sap/ushell/resources","sap/ui/core/library","sap/ui/thirdparty/hasher"],function(e,t,r,i,o){"use strict";var n=i.ValueState;return e.extend("sap.ushell.ui.footerbar.SaveAsTile",{onInit:function(){var e=this.getView();e.getTitleInput().attachLiveChange(function(){if(this.getValue()===""){this.setValueStateText(r.i18n.getText("bookmarkTitleInputError"));this.setValueState(n.Error)}else{this.setValueState(n.None)}})},loadPersonalizedGroups:function(){return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){return new Promise(function(t,r){e.getGroupsForBookmarks().done(t).fail(r)})}).then(function(e){var t=this.getView().getModel();t.setProperty("/groups",e);t.setProperty("/groups/length",e.length)}.bind(this)).catch(function(){t.error("SaveAsTile controller: Unable to determine targets for bookmark placement.")})},getLocalizedText:function(e,t){return t?r.i18n.getText(e,t):r.i18n.getText(e)},getBookmarkTileData:function(){var e=this.getView();var t=e.getModel();var r=e.getViewData();var i;if(e.oGroupsSelect&&e.oGroupsSelect.getSelectedItem()){i=e.oGroupsSelect.getSelectedItem().getBindingContext().getObject()}var n;if(r.customUrl){if(typeof r.customUrl==="function"){n=r.customUrl()}else{n=r.customUrl}}else{n=o.getHash()?"#"+o.getHash():window.location.href}var s={title:t.getProperty("/title")||"",subtitle:t.getProperty("/subtitle")||"",url:n,icon:t.getProperty("/icon")||"",info:t.getProperty("/info")||"",numberUnit:t.getProperty("/numberUnit")||"",serviceUrl:typeof r.serviceUrl==="function"?r.serviceUrl():r.serviceUrl,dataSource:t.getProperty("/dataSource"),serviceRefreshInterval:t.getProperty("/serviceRefreshInterval"),group:i,keywords:t.getProperty("/keywords")||""};s.title=s.title.substring(0,256).trim();s.subtitle=s.subtitle.substring(0,256).trim();s.info=s.info.substring(0,256).trim();if(s.serviceUrl===undefined){delete s["serviceUrl"];delete s["serviceRefreshInterval"]}return s},onExit:function(){var e=this.getView();var t=e.getTileView();t.destroy()}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/SaveAsTile.view", ["sap/m/FlexBox","sap/m/GenericTile","sap/m/Input","sap/m/Label","sap/m/library","sap/m/NumericContent","sap/m/Select","sap/m/TileContent","sap/ui/core/HTML","sap/ui/core/ListItem","sap/ui/core/mvc/View","sap/ui/model/BindingMode","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/ui/launchpad/Tile","sap/ushell/ui/footerbar/SaveAsTile.controller"],function(e,t,i,l,o,s,n,a,r,u,p,h,jQuery,d,c){"use strict";var w=o.FlexJustifyContent;var b=o.FlexRendertype;var v=o.FlexAlignItems;return p.extend("sap.ushell.ui.footerbar.SaveAsTile",{getControllerName:function(){return"sap.ushell.ui.footerbar.SaveAsTile"},createContent:function(){this.oResourceBundle=d.i18n;this.viewData=this.getViewData()||{};this.appData=this.viewData.appData||{};this.oTitleInput=new i("bookmarkTitleInput",{placeholder:this.oResourceBundle.getText("bookmarkDialogoTitle_tooltip"),value:{path:"/title",mode:h.TwoWay}}).addStyleClass("sapUshellInputField");this.oSubTitleInput=new i("bookmarkSubTitleInput",{placeholder:this.oResourceBundle.getText("bookmarkDialogoSubTitle_tooltip"),value:{path:"/subtitle",mode:h.TwoWay}}).addStyleClass("sapUshellInputField");this.oInfoInput=new i("bookmarkInfoInput",{placeholder:this.oResourceBundle.getText("bookmarkDialogoDescription_tooltip"),value:{path:"/info",mode:h.TwoWay},visible:"{/showInfo}"}).addStyleClass("sapUshellInputField");var o;if(this.viewData.serviceUrl){o=new t({header:"{/title}",subheader:"{/subtitle}",size:"Auto",tileContent:[new a({size:"Auto",footer:"{/info}",unit:"{/numberUnit}",content:[new s({value:"{/numberValue}",truncateValueTo:5,icon:"{/icon}",withMargin:false,width:"100%"})]})]})}else{o=new t({header:"{/title}",subheader:"{/subtitle}",size:"Auto",tileContent:[new a({size:"Auto",footer:"{/info}",content:new s({icon:"{/icon}",value:" ",width:"100%",withMargin:false})})]})}this.setTileView(o);var p=new c({long:false,tileViews:[o],afterRendering:function(){var e=jQuery(this.getDomRef()),t=e.find(".sapMGT");t.removeAttr("tabindex")}}).addStyleClass("sapUshellBookmarkFormPreviewTileMargin");var m=new r("previewBackgroundElement",{content:"<div class='sapUshellShellBG sapContrastPlus sapUiStrongBackgroundColor'></div>"});var T=new e("saveAsTileHBox",{items:[m,p],alignItems:v.Center,justifyContent:w.Center,renderType:b.Bare,visible:"{/showPreview}"}).addStyleClass("sapUshellShellBG").addStyleClass("sapUshellBookmarkFormPreviewBoxBottomMargin");this.oGroupsSelect=new n("groupsSelect",{items:{path:"/groups",template:new u({text:"{title}"})},width:"100%",visible:{parts:["/showGroupSelection","/groups"],formatter:function(e,t){if(e&&!(t&&t.length)){this.oController.loadPersonalizedGroups()}return e}.bind(this)}});var f=new l("previewLbl",{text:this.oResourceBundle.getText("previewFld"),labelFor:T,visible:"{/showPreview}"});var g=new l("titleLbl",{required:true,text:" "+this.oResourceBundle.getText("titleFld"),labelFor:this.oTitleInput});var I=new l("subtitleLbl",{text:this.oResourceBundle.getText("subtitleFld"),labelFor:this.oSubTitleInput});var S=new l("infoLbl",{text:this.oResourceBundle.getText("tileSettingsDialog_informationField"),labelFor:this.oInfoInput,visible:"{/showInfo}"});var x=this.oResourceBundle.getText("GroupListItem_label");var B=new l("groupLbl",{text:x,labelFor:this.oGroupsSelect,visible:"{/showGroupSelection}"});return[f,T,g,this.oTitleInput,I,this.oSubTitleInput,S,this.oInfoInput,B,this.oGroupsSelect]},getTitleInput:function(){return this.oTitleInput},getTileView:function(){return this.tileView},setTileView:function(e){this.tileView=e}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/SendAsEmailButton", ["sap/base/Log","sap/m/Button","sap/m/ButtonRenderer","sap/m/library","sap/ushell/Config","sap/ushell/resources"],function(e,t,i,s,n,r){"use strict";var a=s.URLHelper;var l=t.extend("sap.ushell.ui.footerbar.SendAsEmailButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"Function",group:"Misc",defaultValue:null},afterPressHandler:{type:"Function",group:"Misc",defaultValue:null}}},renderer:i});l.prototype.init=function(){if(t.prototype.init){t.prototype.init.apply(this,arguments)}this.setIcon("sap-icon://email");this.setText(r.i18n.getText("sendEmailBtn"));this.setTooltip(r.i18n.getText("sendEmailBtn_tooltip"));this.attachPress(function(){var e=this.getBeforePressHandler();if(e){e()}this.sendAsEmailPressed(this.getAfterPressHandler())}.bind(this))};l.prototype.sendAsEmailPressed=function(t){if(sap.ushell.Container.inAppRuntime()){sap.ui.require(["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e){e.sendMessageToOuterShell("sap.ushell.services.ShellUIService.sendEmailWithFLPButton",{bSetAppStateToPublic:true})})}else{var i=document.URL;var s=n.last("/core/shellHeader/application").title;var l=s===undefined?r.i18n.getText("linkToApplication"):r.i18n.getText("linkTo")+" '"+s+"'";sap.ushell.Container.getServiceAsync("AppState").then(function(t){t.setAppStateToPublic(i).done(function(e){a.triggerEmail(null,l,e)}).fail(e.error)})}if(t){t()}};return l});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AccessibilityCustomData", ["sap/ui/core/CustomData","sap/ui/core/Configuration"],function(e,t){"use strict";var a=e.extend("sap.ushell.ui.launchpad.AccessibilityCustomData",{metadata:{library:"sap.ushell"}});a.prototype._checkWriteToDom=function(){var a=t.getAccessibility();if(!a){return null}var i=this.getKey();var r=e.prototype._checkWriteToDom.apply(this,arguments);if(r&&(i.indexOf("aria-")===0||i==="role"||i==="tabindex")){r.key=r.key.replace(/^data-/,"")}return r};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/ActionItem", ["sap/m/Button","sap/m/ButtonRenderer","sap/m/library"],function(e,t,r){"use strict";var s=r.ButtonType;var a=e.extend("sap.ushell.ui.launchpad.ActionItem",{metadata:{library:"sap.ushell",properties:{actionType:{type:"string",group:"Appearance",defaultValue:"standard"}},events:{press:{},afterRendering:{}}},renderer:t});a.prototype.setActionType=function(e){if(!this.sOrigType){this.sOrigType=this.getType()}this.setType(e==="action"?s.Unstyled:this.sOrigType||s.Standard);this.setProperty("actionType",e,true)};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AnchorItem", ["sap/ui/core/Control","sap/ushell/ui/launchpad/AnchorItemRenderer","sap/ushell/library"],function(e,t){"use strict";var i=e.extend("sap.ushell.ui.launchpad.AnchorItem",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},selected:{type:"boolean",group:"Misc",defaultValue:false},groupId:{type:"string",group:"Misc",defaultValue:null},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},helpId:{type:"string",group:"Misc",defaultValue:null},index:{type:"int",group:"Misc",defaultValue:null},isGroupVisible:{type:"boolean",group:"Misc",defaultValue:true},isGroupRendered:{type:"boolean",group:"Misc",defaultValue:false},isGroupDisabled:{type:"boolean",group:"Misc",defaultValue:false},locked:{type:"boolean",group:"Misc",defaultValue:false},posinset:{type:"int",group:"Misc",defaultValue:0},setsize:{type:"int",group:"Misc",defaultValue:0}},events:{press:{},afterRendering:{},visibilityChanged:{}}},renderer:t});i.prototype.init=function(){this.addDelegate({onAfterRendering:this.fireAfterRendering.bind(this),onclick:this.firePress.bind(this),onsapenter:this.firePress.bind(this),onsapspace:function(e){e.preventDefault();this.firePress()}.bind(this)})};i.prototype.setVisible=function(e,t){this.setProperty("visible",e,t);this.fireVisibilityChanged();return this};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AnchorItemRenderer", function(){"use strict";var e={apiVersion:2,render:function(e,t){var s=t.getGroupId(),a=t.getSelected();e.openStart("li",t);e.attr("modelGroupId",s);e.attr("role","tab");e.attr("aria-selected",a);e.class("sapUshellAnchorItem");if(t.getSetsize()){e.attr("aria-posinset",t.getPosinset());e.attr("aria-setsize",t.getSetsize())}if(t.getHelpId()){if(t.getDefaultGroup()){e.class("help-id-homeAnchorNavigationBarItem")}else{e.class("help-id-anchorNavigationBarItem")}e.attr("data-help-id",t.getHelpId())}if(a){e.attr("tabindex","0");e.class("sapUshellAnchorItemSelected")}if(!t.getVisible()||!t.getIsGroupVisible()){e.class("sapUshellShellHidden")}e.openEnd();e.openStart("div",t.getId()+"-inner");e.class("sapUshellAnchorItemInner");if(t.getIsGroupDisabled()){e.class("sapUshellAnchorItemDisabled")}e.openEnd();e.text(t.getTitle());e.close("div");e.close("li")}};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AnchorNavigationBar", ["./AnchorNavigationBarRenderer","sap/base/util/isEmptyObject","sap/m/Bar","sap/m/Button","sap/ui/core/Configuration","sap/ui/core/Core","sap/ui/core/ResizeHandler","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources"],function(e,t,s,i,o,r,l,n,jQuery,h,a){"use strict";var f=s.extend("sap.ushell.ui.launchpad.AnchorNavigationBar",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},selectedItemIndex:{type:"int",group:"Misc",defaultValue:0},overflowEnabled:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{groups:{type:"sap.ushell.ui.launchpad.AnchorItem",multiple:true,singularName:"group"}},events:{afterRendering:{},itemPress:{}}},renderer:e});f.prototype.init=function(){this.bGroupWasPressed=false;this.bIsRtl=o.getRTL();this._bIsRenderedCompletely=false;this.fnNavigationBarItemsVisibility=this.setNavigationBarItemsVisibility.bind(this);this.fnAdjustVisibleAnchorItemsAccessibility=this.adjustVisibleAnchorItemsAccessibility.bind(this)};f.prototype.onBeforeRendering=function(){if(this._sResizeListenerId){l.deregister(this._sResizeListenerId);this._sResizeListenerId=null}var e=window.document.getElementsByClassName("sapUshellAnchorNavigationBarItemsScroll")[0];if(e){e.removeEventListener("scroll",this.fnNavigationBarItemsVisibility)}};f.prototype.onAfterRendering=function(){var e=this.getDomRef();if(this._bIsRenderedCompletely){this.reArrangeNavigationBarElements();this.adjustVisibleAnchorItemsAccessibility();var t=window.document.getElementsByClassName("sapUshellAnchorNavigationBarItemsScroll")[0];if(t){t.addEventListener("scroll",this.fnNavigationBarItemsVisibility)}if(e){this._sResizeListenerId=l.register(e,this.reArrangeNavigationBarElements.bind(this))}}};f.prototype.openOverflowPopup=function(){var e=jQuery(".sapUshellAnchorItemOverFlow").hasClass("sapUshellAnchorItemOverFlowOpen");if(this.oOverflowButton&&!e){this.oOverflowButton.firePress()}};f.prototype.closeOverflowPopup=function(){if(this.oPopover){this.oPopover.close()}};f.prototype.reArrangeNavigationBarElements=function(){this.anchorItems=this.getVisibleGroups();var e=this.getSelectedItemIndex()||0;if(this.anchorItems.length){this.adjustItemSelection(e)}if(n.system.phone&&this.anchorItems.length){this.anchorItems.forEach(function(e){e.setIsGroupVisible(false)});this.anchorItems[this.getSelectedItemIndex()].setIsGroupVisible(true)}else{setTimeout(function(){this.setNavigationBarItemsVisibility()}.bind(this),200)}};f.prototype._scrollToGroupByGroupIndex=function(e,t){var s=n.system.tablet?".sapUshellAnchorNavigationBarItemsScroll":".sapUshellAnchorNavigationBarItems";var i=document.documentElement.querySelector(s);var o=this.anchorItems[e].getDomRef();if(i&&o){var r=i.getBoundingClientRect();var l=o.getBoundingClientRect();var h=jQuery(i);var a=this.bIsRtl?h.scrollLeftRTL():i.scrollLeft;var f;if(l.left<r.left){f=l.left-r.left-16}else if(l.right>r.right){f=l.right-r.right+16}if(f){if(this.bIsRtl){h.scrollLeftRTL(a+f)}else{i.scrollLeft=a+f}}this.setNavigationBarItemsVisibility()}};f.prototype.setNavigationBarItemsVisibility=function(){if(!n.system.phone){this.setNavigationBarItemsVisibilityOnDesktop()}else if(this.anchorItems&&this.anchorItems.length>0){this.oOverflowButton.removeStyleClass("sapUshellShellHidden");var e=this.getSelectedItemIndex()||0;if(this.oPopover){this.oPopover.setTitle(this.anchorItems[e].getTitle())}}};f.prototype.setNavigationBarItemsVisibilityOnDesktop=function(){if(this.anchorItems.length&&(!this.isMostRightAnchorItemVisible()||!this.isMostLeftAnchorItemVisible())){this.oOverflowButton.removeStyleClass("sapUshellShellHidden")}else if(this.oOverflowButton){this.oOverflowButton.addStyleClass("sapUshellShellHidden")}if(this.bIsRtl){if(this.anchorItems.length&&!this.isMostLeftAnchorItemVisible()){this.oOverflowRightButton.removeStyleClass("sapUshellShellHidden")}else if(this.oOverflowRightButton){this.oOverflowRightButton.addStyleClass("sapUshellShellHidden")}if(this.anchorItems.length&&!this.isMostRightAnchorItemVisible()){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden")}else if(this.oOverflowLeftButton){this.oOverflowLeftButton.addStyleClass("sapUshellShellHidden")}}else{if(this.anchorItems.length&&!this.isMostLeftAnchorItemVisible()){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden")}else if(this.oOverflowLeftButton){this.oOverflowLeftButton.addStyleClass("sapUshellShellHidden")}if(this.anchorItems.length&&!this.isMostRightAnchorItemVisible()){this.oOverflowRightButton.removeStyleClass("sapUshellShellHidden")}else if(this.oOverflowRightButton){this.oOverflowRightButton.addStyleClass("sapUshellShellHidden")}}};f.prototype.adjustItemSelection=function(e){setTimeout(function(){if(this.anchorItems&&this.anchorItems.length){this.anchorItems.forEach(function(e){e.setSelected(false)});if(e>=0&&e<this.anchorItems.length){this.anchorItems[e].setSelected(true);this._scrollToGroupByGroupIndex(e)}}}.bind(this),50)};f.prototype.isMostRightAnchorItemVisible=function(){var e=jQuery(".sapUshellAnchorNavigationBarInner"),s=!t(e)?e.width():0,i=!t(e)&&e.offset()?e.offset().left:0,o=this.bIsRtl?this.anchorItems[0].getDomRef():this.anchorItems[this.anchorItems.length-1].getDomRef(),r=!t(o)?jQuery(o).width():0,l;if(r<0){r=80}l=o&&jQuery(o).offset()?jQuery(o).offset().left:0;return Math.ceil(l)+r<=i+s};f.prototype.isMostLeftAnchorItemVisible=function(){var e=jQuery(".sapUshellAnchorNavigationBarInner"),s=!t(e)&&e.offset()&&e.offset().left||0,i=this.bIsRtl?this.anchorItems[this.anchorItems.length-1].getDomRef():this.anchorItems[0].getDomRef(),o=!t(i)&&jQuery(i).offset()?jQuery(i).offset().left:0;return Math.ceil(o)>=s};f.prototype.setSelectedItemIndex=function(e){if(e!==undefined){this.setProperty("selectedItemIndex",e,true)}};f.prototype.setOverflowEnabled=function(e){this.setProperty("overflowEnabled",e);if(this.oOverflowButton){this.oOverflowButton.setEnabled(e)}};f.prototype._getOverflowLeftArrowButton=function(){if(!this.oOverflowLeftButton){this.oOverflowLeftButton=new i({icon:"sap-icon://slim-arrow-left",tooltip:a.i18n.getText("scrollToTop"),press:function(){this._scrollToGroupByGroupIndex(0)}.bind(this)}).addStyleClass("sapUshellShellHidden");this.oOverflowLeftButton._bExcludeFromTabChain=true}return this.oOverflowLeftButton};f.prototype._getOverflowRightArrowButton=function(){if(!this.oOverflowRightButton){this.oOverflowRightButton=new i({icon:"sap-icon://slim-arrow-right",tooltip:a.i18n.getText("scrollToEnd"),press:function(){this._scrollToGroupByGroupIndex(this.anchorItems.length-1)}.bind(this)}).addStyleClass("sapUshellShellHidden");this.oOverflowRightButton._bExcludeFromTabChain=true}return this.oOverflowRightButton};f.prototype._getOverflowButton=function(){if(!this.oOverflowButton){this.oOverflowButton=new i("sapUshellAnchorBarOverflowButton",{icon:"sap-icon://slim-arrow-down",tooltip:a.i18n.getText("more_groups"),enabled:this.getOverflowEnabled(),press:function(){this._togglePopover()}.bind(this)}).addStyleClass("sapUshellShellHidden")}return this.oOverflowButton};f.prototype._togglePopover=function(){sap.ui.require(["sap/m/Popover","sap/ui/model/Filter","sap/ushell/ui/launchpad/GroupListItem","sap/m/List","sap/m/library"],function(e,t,s,i,l){var n=l.ListMode;if(!this.oPopover){this.oList=new i({mode:n.SingleSelectMaster,rememberSelections:false,selectionChange:function(e){this.fireItemPress({group:e.getParameter("listItem")});this.oPopover.close()}.bind(this)});this.oPopover=new e("sapUshellAnchorBarOverflowPopover",{showArrow:false,showHeader:false,placement:"Left",content:[this.oList],horizontalScrolling:false,beforeOpen:function(){var e=jQuery(".sapUshellAnchorItemOverFlow"),t=o.getRTL(),s=t?-1*e.outerWidth():e.outerWidth();this.setOffsetX(s)},afterClose:function(){jQuery(".sapUshellAnchorItemOverFlow").removeClass("sapUshellAnchorItemOverFlowOpen");jQuery(".sapUshellAnchorItemOverFlow").toggleClass("sapUshellAnchorItemOverFlowPressed",false)}}).addStyleClass("sapUshellAnchorItemsPopover").addStyleClass("sapContrastPlus")}if(this.oPopover.isOpen()){this.oPopover.close()}else{this.anchorItems=this.getVisibleGroups();this.oList.setModel(this.getModel());var h=this.getModel().getProperty("/tileActionModeActive");var a=new t("","EQ","a");a.fnTest=function(e){if(!e.visibilityModes[h?1:0]){return false}return e.isGroupVisible||h};this.oList.bindItems({path:"/groups",template:new s({title:"{title}",groupId:"{groupId}",index:"{index}"}),filters:[a]});var f=jQuery(".sapUshellAnchorItemSelected").attr("id");var p=r.byId(f);this.oList.getItems().forEach(function(e){if(p.mProperties.groupId===e.mProperties.groupId){e.addStyleClass("sapUshellAnchorPopoverItemSelected")}else{e.addStyleClass("sapUshellAnchorPopoverItemNonSelected")}});jQuery(".sapUshellAnchorItemOverFlow").toggleClass("sapUshellAnchorItemOverFlowPressed",true);this.oPopover.openBy(this.oOverflowButton)}}.bind(this))};f.prototype.getVisibleGroups=function(){return this.getGroups().filter(function(e){return e.getVisible()})};f.prototype._setRenderedCompletely=function(e){this._bIsRenderedCompletely=e};f.prototype.handleAnchorItemPress=function(e){this.bGroupWasPressed=true;this.fireItemPress({group:e.getSource(),manualPress:true})};f.prototype.adjustVisibleAnchorItemsAccessibility=function(){var e=this.getVisibleGroups(),t=e.length;e.forEach(function(e,s){e.setPosinset(s+1);e.setSetsize(t)})};f.prototype.addGroup=function(e,t){e.attachVisibilityChanged(this.fnAdjustVisibleAnchorItemsAccessibility);return this.addAggregation("groups",e,t)};f.prototype.insertGroup=function(e,t,s){e.attachVisibilityChanged(this.fnAdjustVisibleAnchorItemsAccessibility);return this.insertAggregation("groups",e,t,s)};f.prototype.removeGroup=function(e,t){e.detachVisibilityChanged(this.fnAdjustVisibleAnchorItemsAccessibility);return this.removeAggregation("groups",e,t)};f.prototype.exit=function(){if(this.oOverflowLeftButton){this.oOverflowLeftButton.destroy()}if(this.oOverflowRightButton){this.oOverflowRightButton.destroy()}if(this.oOverflowButton){this.oOverflowButton.destroy()}if(this.oPopover){this.oPopover.destroy()}if(s.prototype.exit){s.prototype.exit.apply(this,arguments)}if(this._sResizeListenerId){l.deregister(this._sResizeListenerId);this._sResizeListenerId=null}};return f});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AnchorNavigationBarRenderer", ["sap/ushell/resources","sap/ui/core/library"],function(e,t){"use strict";var r=t.AccessibleLandmarkRole;var a={apiVersion:2};a.render=function(t,a){t.openStart("div",a);t.attr("role",r.Navigation);t.attr("aria-label",e.i18n.getText("Dashboard.Page.Header.AriaLabel"));t.attr("data-sap-ui-customfastnavgroup","true");t.class("sapUshellAnchorNavigationBar");t.class("sapMPageHeader");t.class("sapMIBar-CTX");t.class("sapMHeader-CTX");t.openEnd();t.openStart("div");t.class("sapUshellAnchorNavigationBarInner");t.openEnd();if(a.getGroups().length>0){a._setRenderedCompletely(true);t.openStart("div");t.class("sapUshellAnchorLeftOverFlowButton");t.accessibilityState(a._getOverflowLeftArrowButton(),{hidden:true});t.openEnd();t.renderControl(a._getOverflowLeftArrowButton());t.close("div");t.openStart("div");t.class("sapUshellAnchorNavigationBarItems");t.openEnd();t.openStart("ul");t.class("sapUshellAnchorNavigationBarItemsScroll");t.accessibilityState(a,{role:"tablist",label:e.i18n.getText("AnchorNavigationBar_AriaLabel")});t.openEnd();this.renderAnchorNavigationItems(t,a);t.close("ul");t.close("div");t.openStart("div");t.class("sapUshellAnchorRightOverFlowButton");t.accessibilityState(a._getOverflowRightArrowButton(),{hidden:true});t.openEnd();t.renderControl(a._getOverflowRightArrowButton());t.close("div");t.openStart("div");t.class("sapUshellAnchorItemOverFlow");t.accessibilityState(a._getOverflowButton(),{hidden:true});t.openEnd();t.renderControl(a._getOverflowButton());t.close("div")}t.close("div");t.close("div")};a.renderAnchorNavigationItems=function(e,t){t.getGroups().forEach(function(t){e.renderControl(t)})};a.shouldAddIBarContext=function(){return false};return a},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/CatalogEntryContainer", ["sap/base/Log","sap/ui/core/Control","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/TileContainerUtils"],function(e,t,i,n,a){"use strict";var s=t.extend("sap.ushell.ui.launchpad.CatalogEntryContainer",{metadata:{library:"sap.ushell",properties:{header:{type:"string",group:"Appearance",defaultValue:null},catalogSearchTerm:{type:"string",group:"Appearance",defaultValue:null},catalogTagSelector:{type:"object",group:"Appearance",defaultValue:null}},aggregations:{appBoxesContainer:{type:"sap.ushell.ui.appfinder.AppBox",multiple:true},customTilesContainer:{type:"sap.ushell.ui.launchpad.Tile",multiple:true}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.attr("aria-labeledby",t.getId()+"-title");e.attr("role","group");e.class("sapUshellTileContainer");e.class("sapUshellCatalogTileContainer");e.openEnd();e.openStart("div");e.class("sapUshellTileContainerContent");e.attr("tabindex","-1");e.openEnd();var i=t.getHeader();if(i){if(n.i18n.hasText(i)){i=n.i18n.getText(i)}e.openStart("div");e.class("sapUshellTileContainerHeader");e.class("sapUshellCatalogTileContainerHeader");e.attr("id",t.getId()+"-groupheader");e.openEnd();e.openStart("div");e.class("sapUshellCatalogTileContainerHeaderInner");e.attr("id",t.getId()+"-title");e.openEnd();e.openStart("h2");e.class("sapUshellContainerTitle");e.class("sapUshellCatalogContainerTitle");e.attr("title",i);e.attr("aria-level","2");e.openEnd();e.text(i);e.close("h2");e.close("div");e.close("div")}var a=t.getAppBoxesContainer();var s;var l=t.getCustomTilesContainer();if(a.length>0||l.length>0){e.openStart("ul");e.class("sapUshellInner");e.openEnd();for(s=0;s<a.length;s++){e.renderControl(a[s])}if(a.length&&l.length){e.voidStart("br");e.voidEnd()}for(s=0;s<l.length;s++){e.renderControl(l[s])}e.close("ul")}e.close("div");e.close("div")}}});s.prototype.setAfterHandleElements=function(e){this.onAfterHandleElements=e};s.prototype.onAfterUpdate=function(e){this.fnCallback=e};s.prototype.updateAggregation=function(t){e.debug("Updating CatalogEntryContainer. Reason: ",t)};s.prototype.addNewItem=function(e,t){if(this.catalogState[t]!=="full"&&this.getAllocatedUnits&&!this.getAllocatedUnits()){this.catalogState[t]="partial";return false}if(t==="customTilesContainer"){var i=e.getObject&&e.getObject().src;if(i!==undefined){var n;if(i.Chip!==undefined&&i.Chip.getContract!==undefined){n=i.Chip.getContract("preview")}else if(i.getContract!==undefined){n=i.getContract("preview")}if(n!==undefined){n.setEnabled(true)}}sap.ushell.Container.getServiceAsync("LaunchPage").then(function(t){t.getCatalogTileViewControl(e.getProperty("src")).done(function(t){e.getProperty("content")[0]=t})})}var s=a.createNewItem.bind(this)(e,t);a.addNewItem.bind(this)(s,t);var l=t==="appBoxesContainer"?this.getAppBoxesContainer():this.getCustomTilesContainer(),r=e.getPath();this.indexingMaps[t].onScreenPathIndexMap[r]={aItemsRefrenceIndex:l.length-1,isVisible:true};return true};s.prototype.getNumberResults=function(){return{nAppboxes:this.nNumberOfVisibileElements.appBoxesContainer,nCustom:this.nNumberOfVisibileElements.customTilesContainer}};s.prototype.handleElements=function(e){var t=e,i=this.mBindingInfos[t].binding,n=i.getContexts(),s,l,r;if(!this.catalogState){this.catalogState={}}if(!this.catalogState[e]){this.catalogState[e]="start"}if(!this.indexingMaps){this.indexingMaps={}}if(!this.nNumberOfVisibileElements){this.nNumberOfVisibileElements=[]}if(!this.nNumberOfVisibileElements.customTilesContainer){this.nNumberOfVisibileElements.customTilesContainer=0}if(!this.nNumberOfVisibileElements.appBoxesContainer){this.nNumberOfVisibileElements.appBoxesContainer=0}if(!this.filters){this.filters={}}s=t==="appBoxesContainer"?this.getAppBoxesContainer():this.getCustomTilesContainer();this.indexingMaps[t]=a.indexOnScreenElements(s,false);r=a.markVisibleOnScreenElementsSearchCatalog(n,this.indexingMaps[t],true);if(a.createMissingElementsInOnScreenElementsSearchCatalog(this.indexingMaps[t],n,r,this.addNewItem.bind(this),s,this.filters[t],t,this.processFiltering.bind(this))){if(this.getAllocatedUnits&&this.getAllocatedUnits()){this.catalogState[e]="full"}}s=t==="appBoxesContainer"?this.getAppBoxesContainer():this.getCustomTilesContainer();l=a.showHideTilesAndHeaders(this.indexingMaps[t],s);this.nNumberOfVisibileElements[t]=l.nCountVisibElelemnts;if(this.fnCallback){this.fnCallback(this)}if(this.onAfterHandleElements){this.onAfterHandleElements(this)}};s.prototype.processFiltering=function(e,t){var i=e.getPath();if(t){var n=this.indexingMaps[t].onScreenPathIndexMap[i];if(n.isVisible&&this.currElementVisible){this.currElementVisible()}}};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/CatalogsContainer", ["sap/base/Log","sap/ui/core/Control","sap/ui/performance/Measurement","sap/ushell/library","sap/ushell/ui/launchpad/TileContainerUtils"],function(t,e,i,n,a){"use strict";var s=e.extend("sap.ushell.ui.launchpad.CatalogsContainer",{metadata:{library:"sap.ushell",properties:{categoryFilter:{type:"string",defaultValue:"ALL"},categoryAllocateTiles:{type:"int",defaultValue:"0"}},aggregations:{catalogs:{type:"sap.ushell.ui.launchpad.CatalogEntryContainer",multiple:true}}},renderer:{apiVersion:2,render:function(t,e){var i=e.getCatalogs();t.openStart("div",e);t.class("sapUshellCatalogsContainer");t.openEnd();for(var n=0,a=i.length;n<a;++n){t.renderControl(i[n])}t.close("div")}}});s.prototype.onBeforeRendering=function(){if(this.getCatalogs().length){this.setBusy(false)}};s.prototype.setPagingManager=function(t){i.start("FLP:DashboardManager.CatalogsRendering","CatalogsRendering","FLP");i.pause("FLP:DashboardManager.CatalogsRendering");this.oPagingManager=t};s.prototype.updateAllocatedUnits=function(t){this.nAllocatedUnits=t};s.prototype.applyPagingCategoryFilters=function(t,e){var i=this.getCatalogs();this.nAllocatedUnits=t;if(e&&e!=="All"){this.sCatalogTerm=e}else{this.sCatalogTerm=""}if(!this.filters){this.filters={}}if(!this.filters.catalogEntry){this.filters.catalogEntry=function(t){var e=t.getPath(),i=t.getProperty("title")===this.sCatalogTerm,n;if(!this.sCatalogTerm){return}n=this.indexingMaps.onScreenPathIndexMap[e];if(n){n.isVisible=i}}.bind(this)}if(!this.filters.pagination){this.filters.pagination=function(t){var e=t.getPath(),i;i=this.indexingMaps.onScreenPathIndexMap[e];if(!this.nAllocatedUnits){i.isVisible=false}}.bind(this)}if(!this.indexingMaps){return}this.indexingMaps=a.indexOnScreenElements(i);a.applyFilterOnAllItems(this.mBindingInfos.catalogs,this.filters,this.processFiltering.bind(this));if(this.indexingMaps){a.showHideTilesAndHeaders(this.indexingMaps,this.getCatalogs())}};s.prototype.processFiltering=function(t){var e=this.getCatalogs(),i=t.getPath(),n=this.indexingMaps.onScreenPathIndexMap[i],a=e[n.aItemsRefrenceIndex],s;if(n.isVisible&&(!this.catalogPagination[i]||this.catalogPagination[i]==="start")){if(this.catalogPagination[i]===undefined){this.catalogPagination[i]="start";a.catalogState={}}else if(this.catalogPagination[i]==="start"){var l=a.nNumberOfVisibileElements;this.nAllocatedUnits+=l.appBoxesContainer+l.customTilesContainer}s=this.nAllocatedUnits;a.handleElements("appBoxesContainer");a.handleElements("customTilesContainer");if(a.catalogState.appBoxesContainer==="full"&&a.catalogState.customTilesContainer==="full"){this.catalogPagination[i]="full"}if(s-this.nAllocatedUnits>0){this.bSearchResults=true}else{n.isVisible=false}}else if(n.isVisible&&this.catalogPagination[i]==="full"){var o=a.nNumberOfVisibileElements;var r=o.appBoxesContainer+o.customTilesContainer;if(r===0){n.isVisible=false}}};s.prototype.resetCatalogPagination=function(){this.catalogPagination={}};s.prototype.updateAggregation=function(n){t.debug("Updating TileContainer. Reason: ",n);try{i.resume("FLP:DashboardManager.CatalogsRendering");this.filterElements();i.pause("FLP:DashboardManager.CatalogsRendering")}catch(t){e.prototype.updateAggregation.apply(this,arguments)}};s.prototype.addNewItem=function(t,e){var i,n,s,l=t.getPath();i=a.createNewItem.bind(this)(t,e);if(!i.filters){i.filters={};i.filters.appBoxesContainer={};i.filters.customTilesContainer={};i.filters.appBoxesContainer.pagination=function(t){var e=this.indexingMaps.appBoxesContainer.onScreenPathIndexMap[t.getPath()];if(this.getAllocatedUnits){e.isVisible=!!this.getAllocatedUnits()}}.bind(i);i.filters.customTilesContainer.pagination=function(t){var e=this.indexingMaps.customTilesContainer.onScreenPathIndexMap[t.getPath()];if(this.getAllocatedUnits){e.isVisible=!!this.getAllocatedUnits()}}.bind(i)}i.nAllocatedUnits=this.nAllocatedUnits;i.getAllocatedUnits=function(){return this.nAllocatedUnits}.bind(this);i.elementFiltered=function(t){n=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits+=t*n;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);i.elementsVisible=function(t){n=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits-=t*n;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);i.newElementCreated=function(t,e){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);i.currElementVisible=function(){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);a.addNewItem.bind(this)(i,e);s=this.getCatalogs();this.indexingMaps.onScreenPathIndexMap[l]={aItemsRefrenceIndex:s.length-1,isVisible:true};return true};s.prototype.handleFilters=function(){if(!this.catalogPagination){this.catalogPagination={}}if(!this.catalogsElementsMap){this.catalogsElementsMap={}}if(!this.filters){this.filters={}}};s.prototype.setHandleSearchCallback=function(t){this.handleSearchCallback=t};s.prototype.filterElements=function(){var t="catalogs",e=this.mBindingInfos[t].binding,i=e.getContexts(),n=this.getCatalogs(),s;if(!this.indexingMaps){this.indexingMaps=a.indexOnScreenElements(n)}this.handleFilters();s=a.markVisibleOnScreenElements(i,this.indexingMaps,false);if(!a.validateOrder(i,n,s)){throw true}a.createMissingElementsInOnScreenElements(this.indexingMaps,i,s,this.addNewItem.bind(this),n,this.filters,t);n=this.getCatalogs();a.showHideTilesAndHeaders(this.indexingMaps,n);if(this.handleSearchCallback){this.handleSearchCallback()}};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/DashboardGroupsContainer", ["sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/InvisibleText","sap/ushell/Config","sap/ushell/library","sap/ushell/override","sap/ushell/resources","sap/ushell/utils","./DashboardGroupsContainerRenderer"],function(e,t,r,i,o,s,a,n,l,p){"use strict";var u=t.extend("sap.ushell.ui.launchpad.DashboardGroupsContainer",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},displayMode:{type:"string",defaultValue:null}},aggregations:{groups:{type:"sap.ui.core.Control",multiple:true,singularName:"group"}},events:{afterRendering:{}}},renderer:p});u.prototype.init=function(){this.addInvisibleAccessabilityTexts()};u.prototype.exit=function(){if(this.oTileText){this.oTileText.destroy()}if(this.oTileEditModeText){this.oTileEditModeText.destroy()}t.prototype.exit.apply(this,arguments)};u.prototype.updateGroups=a.updateAggregatesFactory("groups");u.prototype.onAfterRendering=function(){var e=this,t={bUseUniqueMark:true};l.setPerformanceMark("FLP-TimeToInteractive_tilesLoaded",t);e.fireAfterRendering()};u.prototype.getGroupControlByGroupId=function(e){try{var t=this.getGroups();for(var r=0,i=t.length;r<i;++r){if(t[r].getGroupId()===e){return t[r]}}}catch(e){}return null};u.prototype.addLinksToUnselectedGroups=function(){var t=this.getGroups();t.forEach(function(t,r){if(!t.getIsGroupSelected()){e.prototype.updateAggregation.call(t,"links")}})};u.prototype.removeLinksFromAllGroups=function(){var e=this.getGroups();e.forEach(function(e,t){var r=e.getLinks();if(r.length){if(r[0].getMetadata().getName()==="sap.m.GenericTile"){e.removeAllLinks()}else{for(var i=0;i<r.length;i++){r[i].destroy()}}}})};u.prototype.removeLinksFromUnselectedGroups=function(){var e=this.getGroups();e.forEach(function(e,t){var r=e.getLinks();if(r.length&&!e.getIsGroupSelected()){if(r[0].getMetadata().getName()==="sap.m.GenericTile"){e.removeAllLinks()}else{for(var i=0;i<r.length;i++){r[i].destroy()}}}})};u.prototype.addInvisibleAccessabilityTexts=function(){this.oTileText=new i("sapUshellDashboardAccessibilityTileText",{text:n.i18n.getText("tile")}).toStatic();var e=r.getLibraryResourceBundle("sap.m");if(e){this.oTileEditModeText=new i("sapUshellDashboardAccessibilityTileEditModeText",{text:e.getText("LIST_ITEM_NAVIGATION")}).toStatic()}};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/DashboardGroupsContainerRenderer", ["sap/ushell/utils"],function(e){"use strict";var a={apiVersion:2};a.render=function(a,r){a.openStart("div",r);a.attr("data-sap-ui-customfastnavgroup","true");a.class("sapUshellDashboardGroupsContainer");if(r.getAccessibilityLabel()){a.accessibilityState(r,{role:"navigation",label:r.getAccessibilityLabel()})}a.openEnd();var s=r.getGroups();var t;for(var o=0;o<s.length;o++){t=s[o];a.openStart("div");a.class("sapUshellDashboardGroupsContainerItem");if(t.getIsGroupLocked()||t.getDefaultGroup()){a.class("sapUshellDisableDragAndDrop")}a.openEnd();a.renderControl(t);a.close("div")}a.close("div");e.setPerformanceMark("FLP -- dashboardgroupscontainer renderer")};return a},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/ExtendedChangeDetection", ["sap/ui/base/ManagedObject","sap/ushell/Config"],function(e,t){"use strict";var i=e.extend("sap.ushell.ui.launchpad.ExtendedChangeDetection",{metadata:{library:"sap.ushell",events:{itemDeleted:{},itemAdded:{},itemsReordered:{}}},constructor:function(i,n,r){e.call(this);this._oAggregation=n.getMetadata().getAggregation(i);this._oControl=n;this._sAggregationName=i;this._aSiblingAggregationNames=r;var a=t.last("/core/spaces/extendedChangeDetection/enabled");if(a){this._oControl[this._oAggregation._sUpdater]=this._updateAggregation.bind(this);this._oControl.bUseExtendedChangeDetection=true}}});i.oUpdateFromSiblingCache={};i.prototype._updateAggregation=function(){var e=this._oControl.getBindingInfo(this._sAggregationName);var t=e.binding;var i=this._isUpdateFromSibling();var n=t.aLastContextData||[];var r=n.map(function(t){try{var i=JSON.parse(t);return i[e.key]}catch(e){return t}});var a=t.getContexts();var o=a.map(function(t){return t.getProperty(e.key)});var g=a.diff;var s;var d=[];var h=[];var l={};var f=false;var u=false;if(g){for(s=0;s<g.length;s++){var _=g[s];if(_.type==="insert"){d.push({item:o[_.index],index:_.index})}if(_.type==="delete"){h.push({item:r[_.index-d.length],index:_.index-d.length});r.splice(_.index-d.length,1)}}for(s=0;s<h.length;s++){l[h[s].item]=this._oControl.removeAggregation(this._sAggregationName,h[s].index,true)}for(s=0;s<d.length;s++){var p=d[s];var m=l[p.item];if(m&&!(g.length>=2&&g[0].index===g[1].index)){this._oControl.insertAggregation(this._sAggregationName,m,p.index,true);delete l[p.item]}else{this._createAndInsertItem(a[p.index],e,p.index);u=true}}f=!!Object.keys(l).length;for(var c in l){l[c].destroy();delete l[c]}}else if(!(i&&o.length===0&&r.length===0)){this._createAndInsertItems(a,e);u=true}else{return}this._updateBindingContexts(a);if(a.length===0){this._oControl.invalidate()}if(f){this.fireItemDeleted()}if(u){this.fireItemAdded()}if(!f&&!u&&g){this.fireItemsReordered()}if(g&&g.length&&!i){this._refreshSiblingBindings()}};i.prototype._isUpdateFromSibling=function(){var e=this._oControl.getId()+":"+this._sAggregationName;if(i.oUpdateFromSiblingCache[e]){delete i.oUpdateFromSiblingCache[e];return true}return false};i.prototype._refreshSiblingBindings=function(){if(this._aSiblingAggregationNames){for(var e=0;e<this._aSiblingAggregationNames.length;++e){var t=this._aSiblingAggregationNames[e];var n=this._oControl.getId()+":"+t;var r=this._oControl.getBinding(t);i.oUpdateFromSiblingCache[n]=true;r.refresh(true)}}};i.prototype._createAndInsertItems=function(e,t){this._oAggregation.destroy(this._oControl);for(var i=0;i<e.length;i++){this._createAndInsertItem(e[i],t,i)}};i.prototype._createAndInsertItem=function(e,t,i){var n=t.factory(null,e);this._oControl.insertAggregation(this._sAggregationName,n,i,true)};i.prototype._updateBindingContexts=function(e){var t=this._oAggregation.get(this._oControl);for(var i=0;i<t.length;i++){t[i].setBindingContext(e[i])}};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/FailedTileDialog", ["sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(e,i){"use strict";return function(){function t(e){if(!e){throw new Error("Could not find the Tile of the given control")}if(e.isA(["sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.LinkTileWrapper"])){return e}return t(e.getParent())}function o(e){if(!e){throw new Error("Could not find the Group of the given control")}if(e.isA("sap.ushell.ui.launchpad.TileContainer")){return e}return o(e.getParent())}function n(e){var i={};var n=t(e);if(n.getDebugInfo){var r=n.getDebugInfo();if(r){i=JSON.parse(r);i.debugInfo=r}}if(n.getTileCatalogId){var l=n.getTileCatalogId();if(l){i.chipId=decodeURIComponent(l)}}var a=o(e);var u=a.getBindingContext();if(u){var d=u.getProperty("object");if(d){i.groupId=d.getId()}}return i}this.openFor=function(t){function o(e){if(!e){throw new Error("Could not find the View of the given control")}return e.isA("sap.ui.core.mvc.View")?e:o(e.getParent())}var r=o(t);if(!r.oFailedTileDialog){return e.load({id:r.createId("failedTileDialogFragment"),name:"sap.ushell.ui.launchpad.FailedTileDialog",controller:this}).then(function(e){e.setModel(new i({}));e.bindObject({path:"/"});r.oFailedTileDialog=e;r.addDependent(r.oFailedTileDialog);this.openFor(t)}.bind(this))}var l=r.oFailedTileDialog.getModel();l.setProperty("/",n(t));l.setProperty("/showDetails",false);r.oFailedTileDialog.open();return Promise.resolve()};this.onShowDetails=function(e){e.getSource().getModel().setProperty("/showDetails",true)};this.onClose=function(e){e.getSource().getParent().close()}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/GroupHeaderActions", ["sap/m/Button","sap/m/library","sap/ui/core/Control","sap/ushell/library"],function(t,e,o){"use strict";var n=e.ButtonType;var i=e.PlacementType;var r=o.extend("sap.ushell.ui.launchpad.GroupHeaderActions",{metadata:{library:"sap.ushell",properties:{isOverflow:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}}},renderer:{apiVersion:2,render:function(t,e){t.openStart("div",e);t.openEnd();var o=e.getContent();if(e.getTileActionModeActive()){if(e.getIsOverflow()){var n=o.some(function(t){return t.getVisible()});if(n){t.renderControl(e._getOverflowButton())}}else{o.forEach(function(e){t.renderControl(e)})}}t.close("div")}}});r.prototype.exit=function(){if(this._oOverflowButton){this._oOverflowButton.destroy()}if(this._oActionSheet){this._oActionSheet.destroy()}};r.prototype._getOverflowButton=function(){if(!this._oOverflowButton){this._oOverflowButton=new t({icon:"sap-icon://overflow",type:n.Transparent,enabled:"{= !${/editTitle}}",press:function(){sap.ui.require(["sap/m/ActionSheet"],function(t){if(!this._oActionSheet){this._oActionSheet=new t({placement:i.Auto})}this._oActionSheet.destroyButtons();this.getContent().forEach(function(t){var e=t.clone();e.setModel(t.getModel());e.setBindingContext(t.getBindingContext());this._oActionSheet.addButton(e)}.bind(this));this._oActionSheet.openBy(this._oOverflowButton)}.bind(this))}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");this._oOverflowButton.setParent(this)}return this._oOverflowButton};return r});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/ui/launchpad/GroupListItem", ["sap/m/ListItemBase","sap/ushell/library","sap/ushell/utils","./GroupListItemRenderer"],function(e,t,r,i){"use strict";var s=e.extend("sap.ushell.ui.launchpad.GroupListItem",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},show:{type:"boolean",group:"Misc",defaultValue:true},groupId:{type:"string",group:"Misc",defaultValue:null},index:{type:"int",group:"Misc",defaultValue:null},numberOfTiles:{type:"int",group:"Misc",defaultValue:0},isGroupVisible:{type:"boolean",group:"Misc",defaultValue:true}},events:{press:{},afterRendering:{}}},renderer:i});s.prototype.exit=function(){e.prototype.exit.apply(this,arguments)};s.prototype.onAfterRendering=function(){this.fireAfterRendering()};s.prototype.groupHasVisibleTiles=function(){var e=this.getModel().getProperty("/groups/"+this.getIndex()+"/tiles");var t=this.getModel().getProperty("/groups/"+this.getIndex()+"/links");return r.groupHasVisibleTiles(e,t)};s.prototype.onclick=function(){this.firePress({id:this.getId()})};s.prototype.setGroupId=function(e){this.setProperty("groupId",e,true);return this};s.prototype.setTitle=function(e){this.setProperty("title",e);this.$().find(".sapMSLITitleOnly").text(e);return this};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/GroupListItemRenderer", ["sap/m/ListItemBaseRenderer","sap/ui/core/Renderer"],function(e,s){"use strict";var t=s.extend(e);t.apiVersion=2;t.renderLIAttributes=function(e){e.class("sapUshellGroupLI");e.class("sapUshellGroupListItem")};t.renderLIContent=function(e,s){e.openStart("div",s);e.class("sapMSLIDiv");e.class("sapMSLITitleDiv");if(!s.getVisible()){e.style("display","none")}e.openEnd();e.openStart("div",s);e.class("sapMSLITitleOnly");e.openEnd();e.text(s.getTitle());e.close("div");e.close("div")};return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LinkTileWrapper", ["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/Core","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/ui/launchpad/AccessibilityCustomData","./LinkTileWrapperRenderer"],function(e,t,i,s,jQuery,o,l,a){"use strict";var r=i.extend("sap.ushell.ui.launchpad.LinkTileWrapper",{metadata:{library:"sap.ushell",properties:{uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},tileCatalogIdStable:{type:"string",group:"Misc",defaultValue:null},target:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},debugInfo:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},footItems:{type:"sap.ui.core.Control",multiple:true,singularName:"footItem"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{}}},renderer:a});r.prototype.destroy=function(e){this.destroyTileViews();i.prototype.destroy.call(this,e)};r.prototype.addTileView=function(e,i){e.setParent(null);e.addCustomData(new l({key:"tabindex",value:"-1",writeToDom:true}));t.prototype.addAggregation.call(this,"tileViews",e,i)};r.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0}};r.prototype.onAfterRendering=function(){this.fireAfterRendering()};r.prototype.onclick=r.prototype._onPress;r.prototype.onsapenter=r.prototype._launchTileViaKeyboard;r.prototype.onsapspace=r.prototype._launchTileViaKeyboard;r.prototype._launchTileViaKeyboard=function(t){e.info("Tile pressed:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");s.getEventBus().publish("launchpad","dashboardTileLinkClick");if(this.getTileActionModeActive()){return}else if(this._getTileState()==="Failed"){this._onFailedStatePress()}else if(t.target.tagName!=="BUTTON"){var i=this.getTileViews()[0],o=false;if(i.firePress){i.firePress()}else{while(i.getContent&&!o){i=i.getContent()[0];if(i.firePress){i.firePress();o=true}}}}};r.prototype._onPress=function(t){e.info("Tile pressed:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");s.getEventBus().publish("launchpad","dashboardTileLinkClick");if(!this.getTileActionModeActive()&&this._getTileState()==="Failed"){this._onFailedStatePress()}};r.prototype._onFailedStatePress=function(){if(!this.getTileActionModeActive()&&this._getTileState()==="Failed"){if(!this.FailedTileDialog){sap.ui.require(["sap/ushell/ui/launchpad/FailedTileDialog"],function(e){this.FailedTileDialog=new e;this._onFailedStatePress()}.bind(this))}else{this.FailedTileDialog.openFor(this)}return}};r.prototype._getTileState=function(){var e=this.getTileViews();var t;for(var i=0;i<e.length&&!t;++i){if(e[i].isA("sap.m.GenericTile")){t=e[i]}}if(!t){throw new Error("Could not find the wrapped Tile")}return t.getState()};r.prototype.setVisible=function(e){this.setProperty("visible",e,true);return this.toggleStyleClass("sapUshellHidden",!e)};r.prototype.setAnimationRendered=function(e){this.setProperty("animationRendered",e,true)};r.prototype._handleTileShadow=function(e,t){if(e.length){e.unbind("mouseenter mouseleave");var i,s=e.css("border").split("px")[0],o=this.getModel();if(s>0){i=e.css("border-color")}else{i=this.getRgba()}e.hover(function(){if(!o.getProperty("/tileActionModeActive")){var t=jQuery(e).css("box-shadow"),s=t?t.split(") ")[1]:null,l;if(s){l=s+" "+i;jQuery(this).css("box-shadow",l)}}},function(){jQuery(this).css("box-shadow","")})}};r.prototype.setUuid=function(e){this.setProperty("uuid",e,true);return this};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LinkTileWrapperRenderer", ["sap/base/Log","sap/m/GenericTile","sap/m/library","sap/ushell/resources"],function(e,a,t,i){"use strict";var l=t.GenericTileMode;var n=t.LoadState;var s={apiVersion:2};s.render=function(t,s){var r=null;var o=s.getModel();function d(){r=new a({header:i.i18n.getText("cannotLoadTile"),mode:l.LineMode,state:n.Failed})}try{r=s.getTileViews()[0]}catch(a){e.warning("Failed to load tile view: ",a.message);d()}if(!r){e.warning("Failed to load tile view: the control has no tileViews");d()}t.openStart("div",s);if(o&&o.getProperty("/enableHelp")){t.attr("data-help-id",s.getTileCatalogId());if(s.getTileCatalogIdStable()){t.attr("data-help-id2",s.getTileCatalogIdStable())}}t.class("sapUshellLinkTile");if(!s.getVisible()){t.class("sapUshellHidden")}if(s.getIsLocked()){t.class("sapUshellLockedTile")}t.attr("tabindex","-1");t.openEnd();t.renderControl(r);t.close("div")};return s},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LoadingDialog", ["sap/m/Label","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/Popup","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./LoadingDialogRenderer"],function(e,t,i,s,o,a,n,l){"use strict";var p=t.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{iconUri:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},text:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},loadAnimationWithInterval:{type:"boolean",group:"Appearance",defaultValue:true}}},renderer:l});p.prototype.init=function(){this._oPopup=new s;this._oPopup.restoreFocus=false;this._oPopup.setShadow(false);this._oPopup.setModal(true,"sapUshellLoadingDialog");this.oIcon=new i;this._oLabel=new e(this.getId()+"loadingLabel").addStyleClass("sapUshellLoadingDialogLabel");this.sState="idle";this.sLoadingString=a.i18n.getText("genericLoading").replace("..."," ")};p.prototype.exit=function(){this._oPopup.close();this._oPopup.destroy();this.oIcon.destroy();this._oLabel.destroy()};p.prototype.isOpen=function(){return this._oPopup.isOpen()};p.prototype.openLoadingScreen=function(){if(this.sState==="idle"){this.sState="busy"}if(this.getLoadAnimationWithInterval()){this.addStyleClass("sapUshellVisibilityHidden");this._iTimeoutId=setTimeout(function(){this.removeStyleClass("sapUshellVisibilityHidden");this.focus()}.bind(this),3e3)}else{this.removeStyleClass("sapUshellVisibilityHidden");this.focus()}if(!this.getVisible()){this.setVisible(true);this.$().show()}if(!this.isOpen()){this._oPopup.setContent(this);this._oPopup.setPosition("center center","center center",document,"0 0","fit");this._oPopup.open()}};p.prototype.showAppInfo=function(e,t,i){this.setText(e);this.setIconUri(t);this.oIcon.setSrc(t);this._oLabel.setText(e);this._oLabel.addCustomData(new n({key:"aria-hidden",value:"true",writeToDom:true}));var s=this.getDomRef("accessibility-helper");if(s&&i){s.innerText=this.sLoadingString}};p.prototype.closeLoadingScreen=function(){if(this._iTimeoutId){clearTimeout(this._iTimeoutId)}if(this.getVisible()){this.sState="idle";this.setVisible(false);this.$().hide();this._oPopup.close()}};return p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LoadingDialogRenderer", [],function(){"use strict";var e={apiVersion:2,render:function(e,n){var t=n.getTooltip_AsString();e.openStart("div",n);e.class("sapUshellLoadingDialogControl");if(t){e.attr("title",t)}e.openEnd();this.renderAppInfo(e,n);e.close("div")},renderAppInfo:function(e,n){e.openStart("div");e.class("sapUshellLoadingDialogAppData");e.openEnd();if(n.getIconUri()){e.renderControl(n.oIcon)}e.openStart("span",n.getId()+"-accessibility-helper");e.class("sapUshellAccessibilityHelper");e.attr("aria-live","rude");e.attr("aria-relevant","additions text");e.openEnd();e.close("span");e.renderControl(n._oLabel);e.close("div")}};return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/Page", ["sap/m/Button","sap/m/library","sap/m/Text","sap/ui/core/Control","sap/ui/core/dnd/DragDropInfo","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/ExtendedChangeDetection","./PageRenderer"],function(e,t,i,n,o,s,a,r,u,d,c){"use strict";var l=t.ButtonType;var p=a.TextAlign;var g=a.InvisibleMessageMode;var h=r.DisplayFormat;var f=n.extend("sap.ushell.ui.launchpad.Page",{metadata:{library:"sap.ushell",properties:{edit:{type:"boolean",group:"Misc",defaultValue:false},enableSectionReordering:{type:"boolean",group:"Misc",defaultValue:false},dataHelpId:{type:"string",group:"Misc",defaultValue:""},noSectionsText:{type:"string",group:"Misc",defaultValue:""},showNoSectionsText:{type:"boolean",group:"Misc",defaultValue:true},showTitle:{type:"boolean",group:"Misc",defaultValue:false},title:{type:"string",group:"Misc",defaultValue:""}},defaultAggregation:"sections",aggregations:{sections:{type:"sap.ushell.ui.launchpad.Section",multiple:true,dnd:true},messageStrip:{type:"sap.m.MessageStrip",multiple:false},_addSectionButtons:{type:"sap.m.Button",multiple:true,visibility:"hidden"},_noSectionText:{type:"sap.m.Text",multiple:false,visibility:"hidden"}},events:{addSectionButtonPressed:{parameters:{index:{type:"int"}}},sectionDrop:{parameters:{draggedControl:{type:"sap.ushell.ui.launchpad.Section"},droppedControl:{type:"sap.ushell.ui.launchpad.Section"},dropPosition:{type:"string"}}}}},renderer:c});f.prototype.enhanceAccessibilityState=function(e,t){delete t.readonly};f.prototype.init=function(){this.setAggregation("_noSectionText",new i({text:u.i18n.getText("Page.NoSectionText"),width:"100%",textAlign:p.Center}));this._oDragDropInfo=new o({sourceAggregation:"sections",targetAggregation:"sections",dropPosition:"Between",dragStart:function(e){if(e.getParameter("target").getDefault()){e.preventDefault()}},dragEnter:function(e){if(e.getParameter("target").getDefault()){e.preventDefault()}},drop:function(e){this.fireSectionDrop(e.getParameters())}.bind(this)});this.addDelegate({onsappageup:this._handleKeyboardPageNavigation.bind(this),onsappagedown:this._handleKeyboardPageNavigation.bind(this),onsapdown:this._handleKeyboardArrowNavigation.bind(this,false),onsapdownmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsapup:this._handleKeyboardArrowNavigation.bind(this,false),onsapupmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsaphome:this._handleKeyboardHomeEndNavigation.bind(this),onsaphomemodifiers:this._handleKeyboardHomeEndNavigation.bind(this),onsapend:this._handleKeyboardHomeEndNavigation.bind(this),onsapendmodifiers:this._handleKeyboardHomeEndNavigation.bind(this),onfocusin:this._saveFocus.bind(this),onsapskipback:this._handleSkipBack.bind(this),onsapskipforward:this._handleSkipForward.bind(this),onBeforeFastNavigationFocus:this._handleBeforeFastNavigationFocus.bind(this)});this._oSectionsChangeDetection=new d("sections",this);this._oSectionsChangeDetection.attachItemDeleted(this.invalidate,this);this._oSectionsChangeDetection.attachItemsReordered(this.invalidate,this);this._oInvisibleMessageInstance=s.getInstance()};f.prototype._saveFocus=function(e){var t=e.srcControl;if(t.isA("sap.m.VBox")){var i=t.getParent();if(i){if(i.indexOfVisualization(this._oLastFocusedViz)===-1){this._oLastFocusedViz=i.getVisualizations()[0];this._oLastFocusedSection=this._oLastFocusedViz?undefined:i}}else{this._oLastFocusedViz=undefined;this._oLastFocusedSection=undefined}}else if(t.isA("sap.f.GridContainer")){var n=t.getItems();this._oLastFocusedViz=n.find(function(t){var i=t.getDomRef();return i&&i.parentNode===e.target})}else if(t.isA("sap.ushell.ui.launchpad.VizInstanceLink")){this._oLastFocusedViz=t}};f.prototype._handleSkipBack=function(e){if(this.getEdit()){var t;var i=e.srcControl;if(i.isA("sap.f.GridContainer")||i.isA("sap.ushell.ui.launchpad.VizInstanceLink")){t=this._getAncestorSection(i)}if(t){e.preventDefault();t.focus()}}};f.prototype._handleSkipForward=function(e){var t,i;var n=e.srcControl;if(n.isA("sap.m.VBox")){i=n.getParent()}if(i){if(i.indexOfVisualization(this._oLastFocusedViz)!==-1){t=this._oLastFocusedViz}else{t=i.getAllItems()[0]}}if(t){e.preventDefault();this._focusVisualization(t)}};f.prototype._handleBeforeFastNavigationFocus=function(e){var t=this.getSections();var i=this.getEdit();if(i&&this._oLastFocusedSection){this._oLastFocusedSection.focus()}else if(i&&e.forward&&this._oLastFocusedViz){this._getAncestorSection(this._oLastFocusedViz).focus()}else if(this._oLastFocusedViz&&this._oLastFocusedViz.getDomRef()){this._focusVisualization(this._oLastFocusedViz)}else if(i&&e.forward&&t.length>0){this._getFirstVisibleSection().focus()}else if(i&&!e.forward&&t.length>0){var n=t[0];if(n.getAllItems().length===0){n.focus()}else{this._focusVisualization(n.getAllItems()[0])}}else{var o=t.find(function(e){return e.getDomRef()&&e.getAllItems().length>0});this._focusVisualization(o.getAllItems()[0])}e.preventDefault()};f.prototype._getAncestorSection=function(e){if(!e){return null}if(e.isA("sap.ushell.ui.launchpad.Section")){return e}else if(e.getParent){return this._getAncestorSection(e.getParent())}return null};f.prototype.exit=function(){this._oDragDropInfo.destroy();this._oSectionsChangeDetection.destroy()};f.prototype.onBeforeRendering=function(){var t=this.getSections().length;var i=this.getAggregation("_addSectionButtons")||[];var n;for(var o=i.length;o<t+1;o++){n=new e({type:l.Transparent,icon:"sap-icon://add",text:u.i18n.getText("Page.Button.AddSection"),press:this.fireAddSectionButtonPressed.bind(this,{index:o})});n.addStyleClass("sapUshellPageAddSectionButton");this.addAggregation("_addSectionButtons",n)}};f.prototype.getFocusDomRef=function(){var e=this.getAggregation("_addSectionButtons")||[];if(!this.getSections().length&&e.length&&this.getEdit()){return e[0].getFocusDomRef()}return this.getDomRef()};f.prototype.setEnableSectionReordering=function(e){if(e===undefined||this.getEnableSectionReordering()===e){return this}this.setProperty("enableSectionReordering",!!e,true);if(e){this.addDragDropConfig(this._oDragDropInfo)}else{this.removeDragDropConfig(this._oDragDropInfo)}return this};f.prototype.setNoSectionsText=function(e){if(e===undefined||this.getNoSectionsText()===e){return this}this.setProperty("noSectionsText",e,true);var t=this.getAggregation("_noSectionText");t.setText(e||u.i18n.getText("Page.NoSectionText"));return this};f.prototype._focusVisualization=function(e){if(!e){return}else if(e.isA("sap.ushell.ui.launchpad.VizInstanceLink")){e.focus()}else{e.getDomRef().parentElement.focus()}};f.prototype._focusNextVisualization=function(e){var t=this.getSections();var i=this.indexOfSection(e.section);var n=e.event.getParameter?e.event.getParameter("event"):e.event;var o=n.target.firstElementChild;var s,a;while(true){if(e.direction==="up"){i--}else{i++}s=t[i];if(!s){return}a=s.focusVisualization({keycode:n.keyCode,ref:o});if(a){n.preventDefault();return}}};f.prototype._handleKeyboardPageNavigation=function(e){if(this._isFocusInInput()){return}var t=this.getSections();for(var i=0;i<t.length;i++){var n=t[i].getDomRef();if(n.contains(window.document.activeElement)){this._focusNextVisualization({event:e,section:t[i],direction:e.type==="sappagedown"?"down":"up",prefIndex:0});return}}};f.prototype._handleKeyboardArrowNavigation=function(e,t){if(e&&!this.getEnableSectionReordering()||e&&!t.ctrlKey){return}var i=this.getSections();var n,o,s;for(var a=0;a<i.length;a++){n=i[a-1];o=i[a];s=i[a+1];if(window.document.activeElement===o.getFocusDomRef()){if(t.type==="sapup"&&n){n.focus()}else if(t.type==="sapdown"&&s){s.focus()}else if(t.type==="sapupmodifiers"&&n){if(n.getDefault()){return}this.fireSectionDrop({draggedControl:o,droppedControl:n,dropPosition:"Before"});t.preventDefault();t.stopPropagation()}else if(t.type==="sapdownmodifiers"&&s){if(o.getDefault()){return}this.fireSectionDrop({draggedControl:o,droppedControl:s,dropPosition:"After"});t.preventDefault();t.stopPropagation()}return}}};f.prototype._isFocusInInput=function(){var e=(document.activeElement||{}).tagName;return e==="INPUT"||e==="TEXTAREA"};f.prototype._handleKeyboardHomeEndNavigation=function(e){if(this._isFocusInInput()){return}var t,i;var n=false;if(e.type==="saphome"){i=this._getSectionAreaItems(e.srcControl)}else if(e.type==="saphomemodifiers"){t=this._getFirstVisibleSection(true)}else if(e.type==="sapend"){i=this._getSectionAreaItems(e.srcControl);n=true}else if(e.type==="sapendmodifiers"){t=this._getLastVisibleSection(true);n=true}if(t){i=t.getAllItems()}if(n){this._focusVisualization(i[i.length-1])}else{this._focusVisualization(i[0])}e.preventDefault();e.stopPropagation()};f.prototype._getFirstVisibleSection=function(e){var t=this.getSections();return t.find(function(t){return this._isSectionVisible(t,e)}.bind(this))};f.prototype._getLastVisibleSection=function(e){var t=this.getSections().reverse();return t.find(function(t){return this._isSectionVisible(t,e)}.bind(this))};f.prototype._isSectionVisible=function(e,t){var i=t?false:this.getEdit();return i||e.getVisualizations().length>0&&e.getDomRef()&&e.getShowSection()};f.prototype._getSectionAreaItems=function(e){var t,i;var n=e.getBindingContext();if(n){i=n.getProperty("displayFormatHint")}var o=this.getSections();var s=o.find(function(t){var i=t.getDomRef();return i&&i.contains(e.getDomRef())});if(s){switch(i){case h.Compact:return s.getCompactItems();case h.Standard:case h.StandardWide:return s.getDefaultItems();case h.Flat:case h.FlatWide:return s.getFlatItems();default:t=s.getDefaultItems();if(t.length>0){return t}t=s.getFlatItems();if(t.length>0){return t}t=s.getCompactItems();return t}}return[]};f.prototype._getCurrentlyFocusedSection=function(){var e=this.getSections();var t=window.document.activeElement;return e.find(function(e){return e.getDomRef().contains(t)})};f.prototype._handleSectionBorderReached=function(e){this._focusNextVisualization(e.getParameters())};f.prototype.addAggregation=function(e,t){n.prototype.addAggregation.apply(this,arguments);if(e==="sections"){t.attachEvent("borderReached",this._handleSectionBorderReached.bind(this))}return this};f.prototype.insertAggregation=function(e,t){n.prototype.insertAggregation.apply(this,arguments);if(e==="sections"){t.attachEvent("borderReached",this._handleSectionBorderReached.bind(this))}return this};f.prototype.announceMove=function(){var e=u.i18n.getText("PageRuntime.Message.SectionMoved");this._oInvisibleMessageInstance.announce(e,g.Polite)};return f});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/PageRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,t){var a=t.getSections();var i=a.length;var r=t.getDataHelpId();var n=t.getTitle();var o;var s;e.openStart("div",t);e.class("sapUshellPage");e.class("sapContrastPlus");e.attr("aria-label",n);e.attr("data-sap-ui-customfastnavgroup","true");if(r){e.attr("data-help-id",r)}e.openEnd();if(t.getEdit()&&t.getAggregation("messageStrip")){e.renderControl(t.getAggregation("messageStrip"))}e.openStart("h2",t.getId()+"-title");e.class("sapMTitle");e.class("sapUshellPageTitle");if(!t.getShowTitle()){e.class("sapUiPseudoInvisibleText")}e.attr("aria-level","2");e.openEnd();e.text(n);e.close("h2");if(t.getEdit()&&!i){e.renderControl(t.getAggregation("_addSectionButtons")[0])}if(!i&&t.getShowNoSectionsText()){e.renderControl(t.getAggregation("_noSectionText"))}for(s=0;s<i;s++){o=a[s];if(t.getEdit()||o.getShowSection()&&o.getVisible()){e.openStart("div");e.class("sapUshellPageSection");e.openEnd();e.renderControl(o);if(t.getEdit()){e.renderControl(t.getAggregation("_addSectionButtons")[s+1])}e.close("div")}}e.close("div")};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/PlusTile", ["sap/ui/core/Icon","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/PlusTileRenderer","sap/ushell/ui/launchpad/Tile"],function(e,t,o,i,n){"use strict";var s=n.extend("sap.ushell.ui.launchpad.PlusTile",{metadata:{library:"sap.ushell",properties:{groupId:{type:"string",group:"Misc",defaultValue:""},enableHelp:{type:"boolean",group:"Misc",defaultValue:false}},events:{press:{}}},renderer:i});s.prototype.init=function(){this.oIcon=new e({src:"sap-icon://add",tooltip:o.i18n.getText("openAppFinder_tooltip")})};s.prototype.exit=function(){if(this.oIcon){this.oIcon.destroy()}};s.prototype.onclick=function(){var e=this.getParent().getBindingContext().getObject();if(!e.object){return}this.firePress()};s.prototype.onsapspace=s.onclick;s.prototype.onsapenter=s.onclick;return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/PlusTileRenderer", ["sap/ushell/resources","sap/ushell/Config"],function(l,s){"use strict";var e={apiVersion:2,render:function(e,a){e.openStart("li",a);e.attr("tabindex","-1");e.class("sapUshellTile");e.class("sapUshellPlusTile");e.class("sapContrastPlus");e.class("sapMGT");if(s.last("/core/home/sizeBehavior")==="Small"){e.class("sapUshellSmall")}if(a.getEnableHelp()){e.class("help-id-plusTile")}e.attr("aria-label",l.i18n.getText("TilePlus_label"));e.openEnd();e.renderControl(a.oIcon);e.close("li")}};return e},true);
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/Section", ["sap/base/Log","sap/base/util/deepClone","sap/f/GridContainerItemLayoutData","sap/m/library","sap/ui/core/Core","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ui/core/XMLComposite","sap/ui/events/KeyCodes","sap/ui/model/Filter","sap/ushell/resources","sap/ushell/ui/launchpad/ExtendedChangeDetection","sap/ushell/library","sap/f/dnd/GridDropInfo","sap/f/GridContainer","sap/ushell/ui/launchpad/section/CompactArea","sap/ui/core/Element"],function(t,e,a,i,r,o,n,s,l,u,p,d,g,f,h,c,m){"use strict";var y=i.TileSizeBehavior;var v=n.InvisibleMessageMode;var b=g.DisplayFormat;function C(t,e,a){if(!Array.isArray(e)||!e.length){return null}if(t&&t.getDomRef){t=t.getDomRef()}if(!t){return e[a?e.length-1:0]}function i(t,e){var a=t.left+t.right-e.left-e.right;var i=t.top+t.bottom-e.top-e.bottom;return a*a+i*i}function r(t){var e=t.querySelector(".sapMGTLineStyleHelper");return(e||t).getBoundingClientRect()}var o=r(t);var n=null;var s=0;var l;var u;var p;for(var d=e.length-1;d>=0;d--){u=e[d].getDomRef();if(u){l=r(u);if(!l.width&&!l.height){continue}if(a&&l.top>=o.top||!a&&l.bottom<=o.bottom){continue}p=i(l,o);if(!n||p<s){n=e[d];s=p}}}return n}var A=s.extend("sap.ushell.ui.launchpad.Section",{metadata:{library:"sap.ushell",properties:{editable:{type:"boolean",group:"Misc",defaultValue:false},dataHelpId:{type:"string",group:"Misc",defaultValue:""},default:{type:"boolean",group:"Misc",defaultValue:false},enableAddButton:{type:"boolean",group:"Behavior",defaultValue:true},enableDeleteButton:{type:"boolean",group:"Behavior",defaultValue:true},enableGridBreakpoints:{type:"boolean",group:"Appearance",defaultValue:false},enableGridContainerQuery:{type:"boolean",group:"Appearance",defaultValue:false},enableResetButton:{type:"boolean",group:"Behavior",defaultValue:true},enableShowHideButton:{type:"boolean",group:"Behavior",defaultValue:true},enableVisualizationReordering:{type:"boolean",group:"Behavior",defaultValue:false},noVisualizationsText:{type:"string",group:"Appearance",defaultValue:p.i18n.getText("Section.NoVisualizationsText")},title:{type:"string",group:"Appearance",defaultValue:""},showNoVisualizationsText:{type:"boolean",group:"Behavior",defaultValue:false},showSection:{type:"boolean",group:"Misc",defaultValue:true},showLinks:{type:"boolean",group:"Behavior",defaultValue:true},sizeBehavior:{type:"sap.m.TileSizeBehavior",group:"Misc",defaultValue:y.Responsive},gridContainerGap:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerGapXS:{type:"string",group:"Appearance",defaultValue:"0.475rem"},gridContainerGapS:{type:"string",group:"Appearance",defaultValue:"0.475rem"},gridContainerGapM:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerGapL:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerGapXL:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerRowSize:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeXS:{type:"string",group:"Appearance",defaultValue:"4.375rem"},gridContainerRowSizeS:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeM:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeL:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeXL:{type:"string",group:"Appearance",defaultValue:"5.25rem"},_duringDrag:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"visualizations",aggregations:{visualizations:{type:"sap.ui.core.Control",bindable:"bindable",multiple:true},defaultItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--defaultArea",aggregation:"items",forwardBinding:false},dnd:true},flatItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--flatArea",aggregation:"items",forwardBinding:false},dnd:true},compactItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--compactArea",aggregation:"items",forwardBinding:false},dnd:true}},events:{add:{},delete:{},reset:{},titleChange:{},visualizationDrop:{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}},areaDragEnter:{parameters:{originalEvent:{type:"sap.ui.base.Event"},dragControl:{type:"sap.ui.core.Control"},sourceArea:{type:"string"},targetArea:{type:"string"}}},sectionVisibilityChange:{parameters:{visible:{type:"boolean"}}},borderReached:{parameters:{event:{type:"jQuery.Event"}}}}},resourceModel:p.i18nModel});function I(e){for(var a in b){if(e.displayFormatHint===b[a]){return b[a]}}if(e.displayFormatHint&&e.displayFormatHint!=="tile"){t.error("DisplayFormat '"+e.displayFormatHint+"' not valid - 'standard' is used")}return b.Standard}function V(){return new u({path:"",caseSensitive:true,test:function(t){var e=I(t);return e===b.Standard||e===b.StandardWide}})}function S(){return new u({path:"",caseSensitive:true,test:function(t){var e=I(t);return e===b.Flat||e===b.FlatWide}})}function D(){return new u({path:"",caseSensitive:true,test:function(t){return I(t)===b.Compact}})}A.prototype.bindAggregation=function(a,i){if(a==="visualizations"){if(i.filters){t.error("bind visualizations with pre-existing filters is not implemented.")}var r=e(i);r.filters=V();s.prototype.bindAggregation.call(this,"defaultItems",r);var o=e(i);o.filters=S();s.prototype.bindAggregation.call(this,"flatItems",o);var n=e(i);n.filters=D();s.prototype.bindAggregation.call(this,"compactItems",n)}else{s.prototype.bindAggregation.call(this,a,i)}return this};A.prototype.getAllItems=function(){return this.getDefaultItems().concat(this.getFlatItems(),this.getCompactItems())};A.prototype.getVisualizations=function(){var t=this.getAllItems();t.sort(function(e,a){var i=e.getBindingContext().getPath();var r=parseInt(i.split("/").pop(),10);i=a.getBindingContext().getPath();var o=parseInt(i.split("/").pop(),10);if(r===o){r=t.indexOf(e);o=t.indexOf(a)}return r<o?-1:1});return t};A.prototype.filterVisualizations=function(t){var e=t?new u({filters:[V(),t],and:true}):V();var a=t?new u({filters:[S(),t],and:true}):S();var i=t?new u({filters:[D(),t],and:true}):D();this.getBinding("defaultItems").filter(e);this.getBinding("flatItems").filter(a);this.getBinding("compactItems").filter(i)};A.prototype.indexOfVisualization=function(t){return this.getVisualizations().indexOf(t)};A.prototype.addVisualization=function(e,a){t.error("Section.prototype.addVisualization should not be called");return this.addAggregation("visualizations",e,a)};A.prototype.insertVisualization=function(e,a,i){t.error("Section.prototype.insertVisualization should not be called");return this.insertAggregation("visualizations",e,a,i)};A.prototype.removeVisualization=function(e,a){t.error("Section.prototype.removeVisualization should not be called");return this.removeAggregation("visualizations",e,a)};A.prototype.onBorderReached=function(t){var e;var a=t.getParameter("event");var i=a.keyCode;var r=a.type;var o=m.closestTo(a.target.firstElementChild);switch(i){case l.ARROW_UP:e=this.getClosestVizualization(o,true);break;case l.ARROW_DOWN:e=this.getClosestVizualization(o,false);break;case l.ARROW_LEFT:case l.ARROW_RIGHT:return;default:break}if(e){this._focusItem(this.getItemPosition(e));a.preventDefault()}else{this.fireBorderReached({event:t,section:this,direction:r==="sapnext"?"down":"up"})}};A.prototype.handleEmptyContentAreas=function(){var t=!!this.getDefaultItems().length,e=!!this.getFlatItems().length,a=!!this.getCompactItems().length,i=!t&&!a&&!e;this.oVBox.toggleStyleClass("sapUshellSectionNoVisualizations",i);this.oDefaultArea.toggleStyleClass("sapUshellSectionDefaultArea",t);this.oFlatArea.toggleStyleClass("sapUshellSectionFlatArea",e);var r=this.oVBox.getDomRef&&this.oVBox.getDomRef();if(r&&this.getEditable()&&this.getShowNoVisualizationsText()&&i){r.setAttribute("aria-describedBy",this.byId("noVisualizationsText").getId())}else if(r){r.removeAttribute("aria-describedBy")}};A.prototype.init=function(){this.oVBox=this.byId("content");this.oDefaultArea=this.byId("defaultArea");this.oFlatArea=this.byId("flatArea");this.oCompactArea=this.byId("compactArea");this.oNoVisualizationsText=this.byId("noVisualizationsText");this.oCompactArea.setVisible(true);var t=function(){var t=this.oVBox.getDomRef();if(t){var e;if(this.getTitle().trim()){e=p.i18n.getText("Section.Description",this.getTitle())}else{e=p.i18n.getText("Section.Description.EmptySectionTitle")}t.setAttribute("aria-label",e)}}.bind(this);this.oVBox.addEventDelegate({onBeforeRendering:function(){this.byId("title-edit").detachChange(t)}.bind(this),onAfterRendering:function(){var e=this.oVBox.getDomRef();if(this.getEditable()){e.setAttribute("tabindex","0")}t();e.setAttribute("role","group");this.byId("title-edit").attachChange(t)}.bind(this)});this.oDefaultArea.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});this.oFlatArea.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});this.oCompactArea.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});this.oDefaultArea.attachBorderReached(this.onBorderReached.bind(this));this.oFlatArea.attachBorderReached(this.onBorderReached.bind(this));this.oCompactArea.attachBorderReached(this.onBorderReached.bind(this));this._oInvisibleMessageInstance=o.getInstance();this._oDefaultItemsChangeDetection=new d("defaultItems",this,["flatItems","compactItems"]);this._oFlatItemsChangeDetection=new d("flatItems",this,["defaultItems","compactItems"]);this._oCompactItemsChangeDetection=new d("compactItems",this,["defaultItems","flatItems"]);this._fnGlobalDragStart=function(){this.setProperty("_duringDrag",true)}.bind(this);this._fnGlobalDragEnd=function(){this.setProperty("_duringDrag",false)}.bind(this);document.addEventListener("dragstart",this._fnGlobalDragStart,false);document.addEventListener("dragend",this._fnGlobalDragEnd,false)};A.prototype.destroy=function(){s.prototype.destroy.apply(this,arguments);this._oDefaultItemsChangeDetection.destroy();this._oFlatItemsChangeDetection.destroy();this._oCompactItemsChangeDetection.destroy();document.removeEventListener("dragstart",this._fnGlobalDragStart,false);document.removeEventListener("dragend",this._fnGlobalDragEnd,false);if(this.oCompactItemsNavigation){this.oCompactArea.removeDelegate(this.oCompactItemsNavigation);this.oCompactItemsNavigation.destroy();this.oCompactItemsNavigation=null}if(this._oInvisibleMessageInstance){this._oInvisibleMessageInstance.destroy()}s.prototype.destroy.apply(this,arguments)};A.prototype.setEditable=function(t){if(t===undefined||this.getEditable()===t){return this}this.setProperty("editable",!!t,true);this.oVBox.toggleStyleClass("sapUshellSectionEdit",!!t);return this};A.prototype._showHidePressed=function(t){var e=r.getLibraryResourceBundle("sap.m");this._oInvisibleMessageInstance.announce([p.i18n.getText(t?"Section.nowBeingShown":"Section.nowBeingHidden"),p.i18n.getText("Section.ButtonLabelChanged"),p.i18n.getText(t?"Section.Button.Hide":"Section.Button.Show"),e.getText("ACC_CTR_TYPE_BUTTON")].join(" "),v.Polite);this.setShowSection(t)};A.prototype.setShowSection=function(t){if(t===undefined||this.getShowSection()===t){return this}this.setProperty("showSection",t,true);this.oVBox.toggleStyleClass("sapUshellSectionHidden",!t);this.fireSectionVisibilityChange({visible:t});return this};A.prototype._reorderVisualizations=function(t){this.fireVisualizationDrop(t.getParameters())};A.prototype.getClosestVizualization=function(t,e){var a=this.getAllItems();return C(t,a,e)};A.prototype.getClosestVizIndex=function(t,e){var a=this.getClosestVizualization(t,e);return a?this.indexOfVisualization(a):-1};A.prototype.getClosestCompactItemIndex=function(t,e){var a=C(t,this.getCompactItems(),e);if(a){return this.indexOfVisualization(a)}return e?this.getVisualizations().length:0};A.prototype._onDragEnter=function(t){var e=t.getParameter("dragSession");var a=e.getDragControl();var i=a.getParent();var r=e.getDropControl&&e.getDropControl();if(!r){return}if(!r.data("area")){r=r.getParent()}if(r.data("default")&&!i.data("default")){t.preventDefault()}this.fireAreaDragEnter({originalEvent:t,dragControl:a,sourceArea:i.data("area"),targetArea:r.data("area")})};A.prototype.addAggregation=function(t,e){if(t==="defaultItems"||t==="flatItems"){this._addVisualizationLayoutData(e)}s.prototype.addAggregation.apply(this,arguments);this.handleEmptyContentAreas();return this};A.prototype.insertAggregation=function(t,e){if(t==="defaultItems"||t==="flatItems"){this._addVisualizationLayoutData(e,t)}s.prototype.insertAggregation.apply(this,arguments);this.handleEmptyContentAreas();return this};A.prototype._getVisualizationLayoutData=function(t){if(t.getLayout){return t.getLayout()}return{rows:2,columns:2}};A.prototype._getFlatVisualizationLayoutData=function(t){if(t.getLayout){return t.getLayout()}return{rows:1,columns:2}};A.prototype._addVisualizationLayoutData=function(t,e){if(!t.getLayoutData()){var i=e==="defaultItems"?this._getVisualizationLayoutData(t):this._getFlatVisualizationLayoutData(t);t.setLayoutData(new a(i))}};A.prototype._getDefaultDropIndicatorSize=function(t){return this._getDropIndicatorSize(t,b.Standard)};A.prototype._getFlatDropIndicatorSize=function(t){return this._getDropIndicatorSize(t,b.Flat)};A.prototype._getDropIndicatorSize=function(t,e){var a=t.getParent();var i=a&&a.data("area");if(e===i&&t.getLayoutData){var r=t.getLayoutData();return{rows:r.getRows(),columns:r.getColumns()}}var o={};var n=[];if(t.getSupportedDisplayFormats){n=t.getSupportedDisplayFormats()}if(e===b.Flat){o.rows=1;o.columns=2;if(!n.includes(b.Flat)&&n.includes(b.FlatWide)){o.columns=4}}else{o.rows=2;o.columns=2;if(!n.includes(b.Standard)&&n.includes(b.StandardWide)){o.columns=4}}return o};A.prototype.getItemPosition=function(t){if(isFinite(t)){t=this.getVisualizations()[t]}var e=this.oDefaultArea.getItems().indexOf(t);if(e>=0){return{index:e,area:b.Standard}}e=this.oFlatArea.getItems().indexOf(t);if(e>=0){return{index:e,area:b.Flat}}e=this.oCompactArea.getItems().indexOf(t);if(e>=0){return{index:e,area:b.Compact}}return{index:-1,area:b.Standard}};A.prototype._focusItem=function(t){window.setTimeout(function(){var e=t&&t.area?t.area:b.Standard;var a=t&&t.index?t.index:t;var i=this.oDefaultArea.getItems().length;var r=this.oFlatArea.getItems().length;var o=this.oCompactArea.getItems().length;if(isNaN(a)||a<0){a=0}if(e===b.Standard&&i===0){e=b.Flat}if(e===b.Flat&&r===0){e=b.Compact}if(e===b.Compact&&o===0){e=b.Standard}if(i+r+o===0){e="section"}switch(e){case"section":this.focus();break;case b.Flat:if(a>=r){a=r-1}this.oFlatArea.focusItem(a);break;case b.Compact:this.oCompactArea.focusItem(a);break;default:if(a>=i){a=i-1}this.oDefaultArea.focusItem(a);break}}.bind(this),0)};A.prototype.focusVisualization=function(t){var e;if(!this.getShowSection()&&!this.getEditable()){return false}var a=this.getAllItems();if(!a.length){return false}if(t&&t.area){this._focusItem(t);return true}if(t&&t.getMetadata){e=t}if(!e&&t&&t.keycode){switch(t.keycode){case l.ARROW_UP:e=this.getClosestVizualization(t.ref,true);break;case l.ARROW_DOWN:e=this.getClosestVizualization(t.ref,false);break;case l.ARROW_LEFT:t=-1;break;default:break}}if(!e&&t===-1){e=a[a.length-1]}if(!e){e=a[0]}this._focusItem(this.getItemPosition(e));return true};return A});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/Tile", ["sap/base/Log","sap/m/Text","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Icon","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./TileRenderer"],function(e,t,i,o,s,n,jQuery,a,l,r,c){"use strict";var u=o.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{long:{type:"boolean",group:"Misc",defaultValue:false},uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},tileCatalogIdStable:{type:"string",group:"Misc",defaultValue:null},isCustomTile:{type:"boolean",group:"Misc",defaultValue:false},target:{type:"string",group:"Misc",defaultValue:null},debugInfo:{type:"string",group:"Misc",defaultValue:null},rgba:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},showActionsIcon:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},navigationMode:{type:"string",group:"Misc",defaultValue:null},isDraggedInTabBarToSourceGroup:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},pinButton:{type:"sap.ui.core.Control",multiple:true,singularName:"pinButton"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{},deletePress:{}}},renderer:c});u.prototype.init=function(){this.addDelegate({onsapenter:this._launchTileViaKeyboard,onsapspace:this._launchTileViaKeyboard},this)};u.prototype.exit=function(){if(this.actionSheetIcon){this.actionSheetIcon.destroy()}if(this.actionIcon){this.actionIcon.destroy()}if(this.failedToLoadViewText){this.failedToLoadViewText.destroy()}};u.prototype.getFailedtoLoadViewText=function(){if(!this.failedToLoadViewText){this.failedToLoadViewText=new t({text:l.i18n.getText("Tile.failedToLoadView")})}return this.failedToLoadViewText};u.prototype.getActionSheetIcon=function(){if(!this.getTileActionModeActive()){return undefined}if(!this.actionSheetIcon){this.actionSheetIcon=new n({src:"sap-icon://overflow",tooltip:l.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner")}return this.actionSheetIcon};u.prototype.ontap=function(){e.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");this.firePress()};u.prototype.destroy=function(e){this.destroyTileViews();o.prototype.destroy.call(this,e)};u.prototype.addTileView=function(e,t){e.setParent(null);i.prototype.addAggregation.call(this,"tileViews",e,t)};u.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0}};u.prototype.onBeforeRendering=function(){var e=this.getDomRef();if(e){var t=e.querySelector("a.sapUshellTileInner");if(t){t.onclick=null}if(document.activeElement===e){this.bFocused=true}this.sTabIndex=e.getAttribute("tabindex");if(this.sTabIndex){e.removeAttribute("tabindex")}}};u.prototype.onAfterRendering=function(){if(this.getIsDraggedInTabBarToSourceGroup()){var e=this.getParent();e.removeAggregation("tiles",this,false)}var t=this.getDomRef();if(t){if(this.sTabIndex){t.setAttribute("tabindex",this.sTabIndex);delete this.sTabIndex}if(this.bFocused){t.focus();delete this.bFocused}}this._redrawRGBA();this._disableInnerLink();this.fireAfterRendering()};u.prototype._disableInnerLink=function(){var e=this.getDomRef();var t=e.querySelector("a.sapUshellTileInner");if(t){t.onclick=function(e){e.preventDefault()}}};u.prototype._launchTileViaKeyboard=function(e){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()})}else{this._announceLoadingApplication();if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],i=false,o,s;if(t.firePress){t.firePress({id:this.getId()})}else if(t.getComponentInstance){o=t.getComponentInstance();if(o._oController&&o._oController.oView.getContent()){s=o._oController.oView.getContent()[0];if(s&&s.firePress){s.firePress({id:this.getId()})}}}else{while(t.getContent&&!i){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});i=true}}}}}};u.prototype.onfocusin=function(){var t=this.getDomRef();if(!t.classList.contains("sapUshellPlusTile")){var i=this.$().prevUntil("h3"),o;if(i.length>0){o=i[i.length-1].previousSibling}else{o=t.previousSibling}var s=t.querySelector(".sapUshellTileInner");if(s&&s.children&&s.children[0]){var n=[];if(o){n.push("sapUshellCatalogAccessibilityTileText")}else{n.push("sapUshellDashboardAccessibilityTileText")}var a=this.getNavigationMode();if(a){var r=l.i18n.getText(a+"NavigationMode");if(r){var c=this.getId()+"-navigationMode";if(!document.getElementById(c)){var u=document.createElement("div");u.setAttribute("id",c);u.style.display="none";u.innerText=r;s.appendChild(u)}n.push(c)}else{e.warning("The navigation mode is of a unkown mode, it can not be read!")}}n.push(s.children[0].getAttribute("id"));var d=t.querySelector(".sapUshellTileDeleteClickArea .sapUiIcon");if(d){n.push(d.id)}if(o){n.push(o.getAttribute("id"))}if(this.getTileActionModeActive()){n.push("sapUshellDashboardAccessibilityTileEditModeText")}t.setAttribute("aria-labelledby",n.join(" "))}}};u.prototype.onclick=function(e){if(this.getTileActionModeActive()){var t=e.originalEvent.srcElement;if(jQuery(t).closest(".sapUshellTileDeleteClickArea").length>0){this.fireDeletePress()}else{this.fireCoverDivPress({id:this.getId()})}}else{this._announceLoadingApplication()}};u.prototype._announceLoadingApplication=function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-appInfo"),t=l.i18n.getText("screenReaderNavigationLoading");if(e){e.setAttribute("role","alert");e.innerText=t;setTimeout(function(){e.removeAttribute("role");e.innerText=""},0)}};u.prototype._initDeleteAction=function(){var e=this;if(!this.deleteIcon){this.deleteIcon=new n({src:"sap-icon://decline",tooltip:l.i18n.getText("removeButtonTitle")});this.deleteIcon.addEventDelegate({onclick:function(t){e.fireDeletePress();t.stopPropagation()}});this.deleteIcon.addStyleClass("sapUshellTileDeleteIconInnerClass");this.deleteIcon.addCustomData(new r({key:"aria-label",value:l.i18n.getText("removeButtonLabel"),writeToDom:true}))}return this.deleteIcon};u.prototype.setShowActionsIcon=function(e){if(e){if(!this.actionIcon){this.actionIcon=new n({size:"1rem",src:"sap-icon://overflow",press:function(){this.fireShowActions();this.addStyleClass("showTileActionsIcon");var e=s.getEventBus(),t=function(i,o,s){s.removeStyleClass("showTileActionsIcon");e.unsubscribe("dashboard","actionSheetClose",t)};e.subscribe("dashboard","actionSheetClose",t)}.bind(this)}).addStyleClass("sapUshellTileActionsIconClass")}}this.setProperty("showActionsIcon",e)};u.prototype.setIsDraggedInTabBarToSourceGroup=function(e){this.setProperty("isDraggedInTabBarToSourceGroup",e);this.setVisible(!e)};u.prototype.setRgba=function(e){this.setProperty("rgba",e);this._redrawRGBA()};u.prototype._redrawRGBA=function(){var e=this.getRgba(),t=this.$();if(e&&t){var i=this.getModel();t.css("background-color",e);t.unbind("mouseenter mouseleave");var o,s=t.css("border").split("px")[0];if(s>0){o=t.css("border-color")}else{o=e}t.hover(function(){if(i&&!i.getProperty("/tileActionModeActive")){var e=t.css("box-shadow"),s=e?e.split(") ")[1]:null;if(s){t.css("box-shadow",s+" "+o)}}},function(){t.css("box-shadow","")})}};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileContainer", ["sap/base/Log","sap/m/Input","sap/m/library","sap/m/Text","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Icon","sap/ushell/override","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/PlusTile","sap/ushell/utils","sap/ushell/ui/launchpad/TileContainerRenderer"],function(e,t,i,o,s,r,a,l,n,u,p,d,f,h){"use strict";var g=i.HeaderLevel;var c=r.extend("sap.ushell.ui.launchpad.TileContainer",{metadata:{library:"sap.ushell",properties:{scrollType:{type:"string",group:"Misc",defaultValue:"item"},animationSpeed:{type:"int",group:"Misc",defaultValue:500},groupId:{type:"string",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:true},showPlaceholder:{type:"boolean",group:"Misc",defaultValue:true},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},isLastGroup:{type:"boolean",group:"Misc",defaultValue:false},headerText:{type:"string",group:"Misc",defaultValue:null},headerLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:g.H2},groupHeaderLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:g.H4},showGroupHeader:{type:"boolean",group:"Misc",defaultValue:true},homePageGroupDisplay:{type:"string",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},sortable:{type:"boolean",group:"Misc",defaultValue:true},showNoData:{type:"boolean",group:"Misc",defaultValue:false},noDataText:{type:"string",group:"Misc",defaultValue:p.i18n.getText("noFilteredItems")},isGroupLocked:{type:"boolean",group:"Misc",defaultValue:null},isGroupSelected:{type:"boolean",group:"Misc",defaultValue:false},editMode:{type:"boolean",group:"Misc",defaultValue:false},showBackground:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Misc",defaultValue:"sap-icon://locked"},showIcon:{type:"boolean",group:"Misc",defaultValue:false},deluminate:{type:"boolean",group:"Misc",defaultValue:false},showMobileActions:{type:"boolean",group:"Misc",defaultValue:false},enableHelp:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},hidden:{type:"boolean",group:"Misc",defaultValue:false},transformationError:{type:"boolean",group:"Misc",defaultValue:false},supportLinkPersonalization:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tiles:{type:"sap.ui.core.Control",multiple:true,singularName:"tile"},links:{type:"sap.ui.core.Control",multiple:true,singularName:"link"},beforeContent:{type:"sap.ui.core.Control",multiple:true,singularName:"beforeContent"},afterContent:{type:"sap.ui.core.Control",multiple:true,singularName:"afterContent"},headerActions:{type:"sap.ui.core.Control",multiple:true,singularName:"headerAction"}},events:{afterRendering:{},add:{},titleChange:{}}},renderer:h});c.prototype.init=function(){this.bIsFirstTitleChange=true;this._sDefaultValue=p.i18n.getText("new_group_name");this.oNoLinksText=new o({text:p.i18n.getText("emptyLinkContainerInEditMode")}).addStyleClass("sapUshellNoLinksAreaPresentTextInner");this.oTransformationErrorText=new o({text:p.i18n.getText("transformationErrorText")}).addStyleClass("sapUshellTransformationErrorText");this.oTransformationErrorIcon=new l({src:"sap-icon://message-error"}).addStyleClass("sapUshellTransformationErrorIcon");this.oIcon=new l({src:this.getIcon()}).addStyleClass("sapUshellContainerIcon");this.oPlusTile=new d({groupId:this.getGroupId(),enableHelp:this.getEnableHelp(),press:[this.fireAdd,this]}).setParent(this);var e=function(){this.getDomRef("groupheader").focus();this._stopEdit();var t=this.oEditInputField.getDomRef();if(t){t.removeEventListener("focusout",e)}}.bind(this);this.oEditInputField=new t({placeholder:this._sDefaultValue,value:this.getHeaderText()}).addEventDelegate({onBeforeRendering:function(){var t=this.oEditInputField.getDomRef();if(t){t.removeEventListener("focusout",e)}}.bind(this),onAfterRendering:function(){var t=this.oEditInputField.$("inner");t.focus();t.selectText(0,t.val().length);var i=this.oEditInputField.getDomRef();if(i){i.addEventListener("focusout",e)}}.bind(this)}).addStyleClass("sapUshellTileContainerTitleInput");if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){if(e.isLinkPersonalizationSupported()){c.prototype.isLinkPersonalizationOveride()}})}this.fnTitleTextClickHandler=this._titleTextClickHandler.bind(this)};c.prototype.onBeforeRendering=function(){var e=this.getDomRef("titleText");if(e){e.removeEventListener("click",this.fnTitleTextClickHandler)}var t=this.getTiles();var i=this.getLinks();var o=t.concat(i);o.forEach(function(e){var t=e.getDomRef();if(t){var i=t.getAttribute("data-oldTabindex");if(i){t.setAttribute("tabindex",i);t.removeAttribute("data-oldTabindex")}else{t.removeAttribute("tabindex")}}})};c.prototype.onAfterRendering=function(){var e=this.getDomRef("titleText");if(e){e.addEventListener("click",this.fnTitleTextClickHandler)}var t=this.getTiles();var i=this.getLinks();var o=t.concat(i);o.forEach(function(e){var t=e.getDomRef();if(t){var i=t.getAttribute("tabindex");if(i){t.setAttribute("data-oldTabindex",i)}t.setAttribute("tabindex","-1")}});var s=t.filter(function(e){return e.isA("sap.ui.integration.widgets.Card")});this._resizeCards(s);a.getEventBus().publish("launchpad","GroupHeaderVisibility");this.fireAfterRendering()};c.prototype._titleTextClickHandler=function(){var e=this.getModel()&&this.getModel().getProperty("/enableRenameLockedGroup"),t=(e||!this.getIsGroupLocked())&&!this.getDefaultGroup()&&this.getTileActionModeActive();this.setEditMode(t)};c.prototype.updateAggregation=n.updateAggregation;c.prototype.setGroupId=function(e,t){this.setProperty("groupId",e,t);this.oPlusTile.setGroupId(e,t);return this};c.prototype.setShowIcon=function(e,t){this.setProperty("showIcon",e,t);this.oIcon.toggleStyleClass("sapUshellContainerIconHidden",!e);return this};c.prototype.groupHasTiles=function(){var e="",t=this.getTiles(),i=[];if(this.getBindingContext()){e=this.getBindingContext().sPath;t=this.getModel().getProperty(e).tiles}return f.groupHasVisibleTiles(t,i)};c.prototype.getInnerContainersDomRefs=function(){var e=this.getDomRef();if(!e){return null}return[e.querySelector(".sapUshellTilesContainer-sortable"),e.querySelector(".sapUshellLineModeContainer")]};c.prototype.isLinkPersonalizationOveride=function(){c.prototype.updateLinks=function(e){var t=this.getParent(),i=t&&t.getDisplayMode&&t.getDisplayMode()==="tabs";if(i&&!this.getTileActionModeActive()){t.removeLinksFromUnselectedGroups()}if(this.getLinks().length>0){this.removeAllLinks()}s.prototype.updateAggregation.call(this,"links")};c.prototype.destroyLinks=function(t){e.debug("link is destroyed because: "+t,null,"sap.ushell.ui.launchpad.TileContainer")}};c.prototype._resizeCards=function(e){var t,i,o=5.5,s=.4375,r,a,l,n;for(var u=0;u<e.length;u++){t=e[u];i=t.getManifest();r=i["sap.flp"].rows;a=i["sap.flp"].columns;l=a*o+(a-3)*s+"rem";n=r*o+(r-1)*s+"rem";t.setHeight(n);t.setWidth(l)}};c.prototype.setEditMode=function(e,t){this.setProperty("editMode",e,t);if(e){this.oEditInputField.setValue(this.getHeaderText())}var i=this.getModel();if(i){i.setProperty("/editTitle",e)}};c.prototype._stopEdit=function(){var e=this.getHeaderText();var t=this.oEditInputField.getValue(),i;t=t.substring(0,256).trim()||this._sDefaultValue;i=t!==e;if(this.bIsFirstTitleChange&&t===this.oEditInputField.getPlaceholder()){i=true}this.bIsFirstTitleChange=false;if(this.getModel()&&this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",false,false)}if(i){this.fireTitleChange({newTitle:t});this.setHeaderText(t)}this.setEditMode(false)};c.prototype.exit=function(){if(this.oNoLinksText){this.oNoLinksText.destroy()}if(this.oTransformationErrorText){this.oTransformationErrorText.destroy()}if(this.oTransformationErrorIcon){this.oTransformationErrorIcon.destroy()}if(this.oIcon){this.oIcon.destroy()}if(this.oPlusTile){this.oPlusTile.destroy()}if(this.oEditInputField){this.oEditInputField.destroy()}var e=this.getDomRef("titleText");if(e){e.removeEventListener("click",this.fnTitleTextClickHandler)}if(r.prototype.exit){r.prototype.exit.apply(this,arguments)}};return c});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileContainerRenderer", ["sap/ushell/resources","sap/ushell/utils","sap/ushell/bootstrap/common/common.load.model","sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/core/CustomData"],function(e,t,o,a,s,i){"use strict";var r={apiVersion:2};r.oModel=o.getModel();r.render=function(o,a){var r=a.getHeaderActions(),n=a.getBeforeContent(),l=a.getAfterContent(),d=a.getLinks(),c=d.length,p=this;o.openStart("div",a);o.class("sapUshellTileContainer");if(!a.getVisible()){o.class("sapUshellHidden")}if(a.getDeluminate()){o.class("sapUshellDisableLockedGroupDuringDrag")}if(a.getEditMode()){o.class("sapUshellEditing")}if(a.getHidden()){o.class("sapUshellTileContainerEditModeHidden")}if(!a.getShowEmptyLinksArea()){o.class("sapUshellLinksAreaHidden")}if(a.getShowEmptyLinksAreaPlaceHolder()){o.class("sapUshellTileContainerEditMode");o.class("sapUshellTileContainerTabsModeEmptyLinksArea")}else{o.class("sapUshellEmptyLinksAreaPlaceHolder")}o.openEnd();if(n.length&&a.getTileActionModeActive()){o.openStart("div");o.class("sapUshellTileContainerBeforeContent");o.class("sapContrastPlus");o.openEnd();n.forEach(function(e){o.renderControl(e)});o.close("div")}o.openStart("div");o.class("sapUshellTileContainerContent");if(a.getIsGroupLocked()){o.class("sapUshellTileContainerLocked")}if(a.getDefaultGroup()){o.class("sapUshellTileContainerDefault")}if(a.getShowBackground()){o.class("sapUshellTileContainerEditMode")}o.openEnd();if(a.getShowBackground()){o.openStart("div");o.class("sapUshellGroupBackgroundContainer");o.class("sapContrastPlus");o.openEnd();o.close("div")}if(a.getShowHeader()){o.openStart("div",a.getId()+"-groupheader");o.class("sapUshellTileContainerHeader");o.class("sapContrastPlus");if(!a.getShowGroupHeader()){o.class("sapUshellFirstGroupHeaderHidden");o.class("sapUiPseudoInvisibleText")}if(a.getTileActionModeActive()){o.attr("tabindex","0")}var g;if(a.getDefaultGroup()){g=e.i18n.getText("ariaLabelEditModeGroupDefault",a.getHeaderText())}else if(a.getIsGroupLocked()){g=e.i18n.getText("ariaLabelEditModeGroupLocked",a.getHeaderText())}else{g=e.i18n.getText("ariaLabelEditModeGroup",a.getHeaderText())}o.attr("aria-label",g);o.openEnd();o.openStart("div",a.getId()+"-title");o.class("sapUshellContainerTitleFlex");o.openEnd();if(a.getEditMode()){o.renderControl(a.oEditInputField)}else{var u=a.getHeaderLevel().toLowerCase();o.openStart(u,a.getId()+"-titleText");o.class("sapUshellContainerTitle");o.attr("title",a.getHeaderText());o.attr("data-role","group");if(a.getTileActionModeActive()&&!a.getIsGroupLocked()&&!a.getDefaultGroup()){o.attr("tabindex","0")}o.openEnd();o.text(a.getHeaderText());o.close(u)}if(a.getIsGroupLocked()){o.renderControl(a.oIcon)}else if(a.getTileActionModeActive()){o.openStart("div");o.class("sapUshellContainerHeaderActions");o.openEnd();r.forEach(function(e){o.renderControl(e)});o.close("div")}o.close("div");o.close("div")}o.openStart("ul");o.class("sapUshellTilesContainer-sortable");o.class("sapUshellInner");o.openEnd();var f=false;a.getTiles().forEach(function(e){if(e.getVisible()){f=true}if(p._isUserActivityCard(e)){p._updateUserActivityCardVisibility(e)}o.renderControl(e)});if(a.getShowPlaceholder()){o.renderControl(a.oPlusTile)}if(a.getShowNoData()){this.renderNoData(o,a,!f)}o.close("ul");var h=a.getSupportLinkPersonalization();if(c>0||h){o.openStart("div");o.class("sapUshellLineModeContainer");if(!c&&h){o.class("sapUshellNoLinksAreaPresent");if(a.getTransformationError()){o.class("sapUshellNoLinksAreaPresentError")}o.openEnd();o.openStart("div");o.class("sapUshellNoLinksAreaPresentText");o.openEnd();o.renderControl(a.oNoLinksText);o.close("div")}else{o.openEnd()}if(h){if(a.getTransformationError()){o.openStart("div");o.class("sapUshellTransformationError");if(!a.transformationError){o.style("display","none")}o.openEnd();o.openStart("div");o.class("sapUshellTransformationErrorInnerWrapper");o.openEnd();o.renderControl(a.oTransformationErrorIcon);o.renderControl(a.oTransformationErrorText);o.close("div");o.close("div")}o.openStart("div");o.class("sapUshellLinksInnerContainer");o.openEnd();var C,T,v,E;d.forEach(function(e,t){C=e.getCustomData();T=false;v=false;E=false;C.forEach(function(o){if(o.getKey()==="aria-posinset"){o.setValue((t+1).toString());o.setWriteToDom(true);T=true}else if(o.getKey()==="aria-setsize"){o.setValue(c.toString());o.setWriteToDom(true);v=true}else if(o.getKey()==="help-id"){o.setValue(e.getBindingContext()&&e.getBindingContext().getProperty("tileCatalogId"));o.setWriteToDom(true);E=true}else if(o.getKey()==="help-id2"){o.setValue(e.getBindingContext()&&e.getBindingContext().getProperty("tileCatalogIdStable"));o.setWriteToDom(true);E=true}});if(!T){e.addCustomData(new s({key:"aria-posinset",value:(t+1).toString(),writeToDom:true}))}if(!v){e.addCustomData(new s({key:"aria-setsize",value:c.toString(),writeToDom:true}))}if(e.getModel()&&e.getModel().getProperty("/enableHelp")&&!E){e.addCustomData(new i({key:"help-id",value:e.getBindingContext()&&e.getBindingContext().getProperty("tileCatalogId"),writeToDom:true}));e.addCustomData(new i({key:"help-id2",value:e.getBindingContext()&&e.getBindingContext().getProperty("tileCatalogIdStable"),writeToDom:true}))}e.addStyleClass("sapUshellLinkTile");if(a.getIsGroupLocked()){e.addStyleClass("sapUshellLockedTile")}o.renderControl(e)});o.close("div")}else{d.forEach(function(e){o.renderControl(e)})}o.close("div")}o.close("div");if(l.length&&a.getTileActionModeActive()){o.openStart("div");o.class("sapUshellTileContainerAfterContent");o.class("sapContrastPlus");o.openEnd();l.forEach(function(e){o.renderControl(e)});o.close("div")}o.close("div");t.setPerformanceMark("FLP -- tile container renderer")};r.renderNoData=function(e,t,o){e.openStart("div",t.getId()+"-listNoData");e.class("sapUshellNoFilteredItems");e.class("sapUiStrongBackgroundTextColor");e.openEnd();e.text(o?t.getNoDataText():"");e.close("div")};r._isUserActivityCard=function(t){if(typeof t.getManifest!=="function"){return false}var o=t.getManifest();var a=o&&o["sap.card"]&&o["sap.card"].header&&o["sap.card"].header.title;return a===e.i18n.getText("recentActivities")||a===e.i18n.getText("frequentActivities")};r._updateUserActivityCardVisibility=function(e){e.setVisible(a.last("/core/shell/model/enableTrackingActivity"));a.on("/core/shell/model/enableTrackingActivity").do(function(t){e.setVisible(t)})};return r},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileContainerUtils", ["sap/base/util/uid"],function(e){"use strict";var n={};n.showHideTilesAndHeaders=function(e,n){var t,r,i,a=0,s=0;for(t in e.onScreenPathIndexMap){if(e.onScreenPathIndexMap.hasOwnProperty(t)){i=e.onScreenPathIndexMap[t];r=n[i.aItemsRefrenceIndex];if(r.getVisible()&&!i.isVisible){s++}r.setVisible(i.isVisible);if(i.isVisible){a++}}}return{nCountVisibElelemnts:a,nCountFilteredElement:s}};n.applyFilterOnItem=function(e,n,t,r){var i;for(i in n){if(n.hasOwnProperty(i)){n[i](e)}}if(t){t(e,r)}};n.createNewItem=function(n,t){var r=this.mBindingInfos[t],i=r.factory,a=function(n){var t=this.getId()+"-"+e(),a=i(t,n);a.setBindingContext(n,r.model);return a}.bind(this);return a(n)};n.addNewItem=function(e,n){var t=this.getMetadata().getJSONKeys()[n];this[t._sMutator](e);return true};n.createMissingElementsInOnScreenElements=function(e,t,r,i,a,s,l){var f,o,u=t.length;for(o=r;o<u;o++){f=t[o].getPath();if(!e.onScreenPathIndexMap[f]){if(i(t[o],l)==false){return false}n.applyFilterOnItem(t[o],s)}else{throw true}}return true};n.createMissingElementsInOnScreenElementsSearchCatalog=function(e,t,r,i,a,s,l,f){var o,u,h=t.length;for(u=0;u<h;u++){o=t[u].getPath();if(!e.onScreenPathIndexMap[o]){if(i(t[u],l)==false){return false}}n.applyFilterOnItem(t[u],s,f,l)}return true};n.applyFilterOnAllItems=function(e,t,r){var i;var a=e.binding,s;if(!a){return}s=a.getContexts();for(i=0;i<s.length;i++){n.applyFilterOnItem(s[i],t,r)}};n.validateOrder=function(e,n,t){var r,i,a,s,l,f,o,u;if(e[t]&&n.length>0){r=n[n.length-1].getBindingContext().getPath();i=e[t].getPath();s=r.split("/");l=i.split("/");for(f=0;f<s.length&&f<l.length;f++){o=s[f];u=l[f];if(!!parseInt(o,10)&&!!parseInt(u,10)){if(parseInt(o,10)>parseInt(u,10)){return false}else if(parseInt(o,10)<parseInt(u,10)){return true}}else{for(a=0;a<u.length&&a<o.length;a++){if(o[a].charCodeAt()>u[a].charCodeAt()){return false}else if(o[a].charCodeAt()<u[a].charCodeAt()){return true}}}}}return true};n.markVisibleOnScreenElements=function(e,n,t){var r=0,i,a=e.length;for(r=0;r<a;r++){i=e[r].getPath();if(n.onScreenPathIndexMap[i]){if(t){n.onScreenPathIndexMap[i].isVisible=true}}else{return r}}return r};n.markVisibleOnScreenElementsSearchCatalog=function(e,n,t){var r=0,i,a=e.length;for(r=0;r<a;r++){i=e[r].getPath();if(n.onScreenPathIndexMap[i]){if(t){n.onScreenPathIndexMap[i].isVisible=true}}}return r};n.indexOnScreenElements=function(e,n){var t,r,i={onScreenPathIndexMap:{}},a=e.length,s,l=true;if(n===false){l=false}for(r=0;r<a;r++){s=e[r];if(s.getBindingContext()){t=s.getBindingContext().getPath();if(!i.onScreenPathIndexMap[t]){i.onScreenPathIndexMap[t]={aItemsRefrenceIndex:r,isVisible:l}}}}return i};return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileRenderer", ["sap/base/Log","sap/ushell/Config"],function(e,l){"use strict";var i={apiVersion:2};i.render=function(i,t){var n=null;try{n=t.getTileViews()[0]}catch(l){e.warning("Failed to load tile view: ",l.message);n=t.getFailedtoLoadViewText()}var s=t.getParent();if(!s){return}i.openStart("li",t);if(l.last("/core/shell/model/enableHelp")){i.attr("data-help-id",t.getTileCatalogId());if(t.getTileCatalogIdStable()){i.attr("data-help-id2",t.getTileCatalogIdStable())}}i.class("sapUshellTile");if(t.getTileActionModeActive()){i.class("sapUshellTileWrapper")}if(n&&n.getContent){var o=n.getContent();o.forEach(function(e){if(e.isA("sap.m.GenericTile")){i.class("sapUshellFeedTileBG")}})}if(t.getLong()){i.class("sapUshellLong")}if(!t.getVisible()){i.class("sapUshellHidden")}if(t.getIsLocked()){i.class("sapUshellLockedTile")}if(l.last("/core/home/sizeBehavior")==="Small"){i.class("sapUshellSmall")}var a=s.getId()+"-titleText";i.attr("aria-describedby",a);i.openEnd();if(t.getTileActionModeActive()){this.renderTileActionMode(i,t);this.renderTileView(i,t,n)}else{i.openStart("div");i.class("sapUshellTileWrapper");i.openEnd();this.renderTileView(i,t,n);if(t.getShowActionsIcon()){i.renderControl(t.actionIcon)}i.close("div");this.renderTileActionsContainer(i,n,t.getPinButton())}i.close("li")};i.renderTileActionsContainer=function(e,l,i){i=i.length?i[0]:undefined;if(i){i.addStyleClass("sapUshellActionButton");e.openStart("div");e.class("sapUshellTilePinButtonOverlay");if(l.getHeader){e.attr("role","toolbar");e.attr("aria-label",l.getHeader())}e.openEnd();e.renderControl(i);e.close("div")}};i.renderTileView=function(e,l,i){e.openStart("div");e.class("sapUshellTileInner");if(l.getTileActionModeActive()){e.class("sapUshellTileActionBG")}e.openEnd();e.renderControl(i);e.close("div")};i.renderTileActionMode=function(e,l){e.openStart("div");e.class("sapUshellTileActionLayerDiv");e.openEnd();if(!l.getIsLocked()){e.openStart("div");e.class("sapUshellTileDeleteClickArea");e.openEnd();e.openStart("div");e.class("sapUshellTileDeleteIconOuterClass");e.openEnd();e.renderControl(l._initDeleteAction());e.close("div");e.close("div")}e.openStart("div");e.class("sapUshellTileActionDivCenter");e.openEnd();e.close("div");e.openStart("div");e.class("sapUshellTileActionIconDivBottom");e.openEnd();e.openStart("div");e.class("sapUshellTileActionIconDivBottomInnerDiv");e.openEnd();e.renderControl(l.getActionSheetIcon());e.close("div");e.close("div");e.close("div")};return i},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileState", ["sap/ui/core/Control","sap/ui/core/Icon","sap/ushell/resources","sap/ui/core/HTML","./TileStateRenderer","sap/ushell/library"],function(t,e,i,s,n){"use strict";var o=t.extend("sap.ushell.ui.launchpad.TileState",{metadata:{library:"sap.ushell",properties:{state:{type:"string",group:"Misc",defaultValue:"Loaded"}},events:{press:{}}},renderer:n});o.prototype.init=function(){this._rb=i.i18n;this._sFailedToLoad=this._rb.getText("cannotLoadTile");this._oWarningIcon=new e(this.getId()+"-warn-icon",{src:"sap-icon://notification",size:"1.37rem"}).addStyleClass("sapSuiteGTFtrFldIcnMrk");this.attachPress(this._onPress)};o.prototype.onclick=function(){this.firePress()};o.prototype._onPress=function(t){if(this.getState()!=="Failed"){return}if(!this.FailedTileDialog){sap.ui.require(["sap/ushell/ui/launchpad/FailedTileDialog"],function(e){this.FailedTileDialog=new e;this._onPress(t)}.bind(this))}else{this.FailedTileDialog.openFor(this)}};o.prototype._getBusyContainer=function(){if(!this._oBusyContainer){this._oBusyContainer=new s({content:"<div class='sapUshellTileStateLoading'><div>"});this._oBusyContainer.setBusyIndicatorDelay(0);this._oBusyContainer.setBusy(true)}return this._oBusyContainer};o.prototype.exit=function(){this._oWarningIcon.destroy();if(this._oBusyContainer){this._oBusyContainer.destroy()}};o.prototype.setState=function(t,e){this.setProperty("state",t,e);return this};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileStateRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,t){e.openStart("div",t);e.class("sapUshellGT");e.openEnd();var a=t.getState();e.openStart("div",t.getId()+"-overlay");e.class("sapUshellOverlay");if(a==="Failed"){e.attr("title",t._sFailedToLoad)}e.openEnd();switch(a){case"Loading":var l=t._getBusyContainer();e.renderControl(l);break;case"Failed":e.openStart("div",t.getId()+"-failed-ftr");e.class("sapUshellTileStateFtrFld");e.openEnd();e.openStart("div",t.getId()+"-failed-icon");e.class("sapUshellTileStateFtrFldIcn");e.openEnd();e.renderControl(t._oWarningIcon);e.close("div");e.openStart("div",t.getId()+"-failed-text");e.class("sapUshellTileStateFtrFldTxt");e.openEnd();e.text(t._sFailedToLoad);e.close("div");e.close("div");break;default:}e.close("div");e.close("div")};return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/ViewPortState", function(){"use strict"},false);
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/section/CompactArea", ["sap/ui/core/Control","sap/ui/events/KeyCodes","sap/ushell/library","./CompactAreaRenderer"],function(e,t,o,r){"use strict";var n=e.extend("sap.ushell.ui.launchpad.section.CompactArea",{metadata:{library:"sap.ushell",properties:{showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},enableLinkReordering:{type:"boolean",group:"Behavior",defaultValue:false}},dnd:{draggable:false,droppable:true},aggregations:{items:{type:"sap.ui.core.Control",singularName:"item",multiple:true,dnd:true}},events:{borderReached:{parameters:{event:{type:"jQuery.Event"}}},itemDrop:{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}}}},renderer:r});n.prototype.onBorderReached=this.fireBorderReached;n.prototype.onsapnext=function(e){e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_RIGHT){var o=this.getFocusedItemIndex();if(o>=0&&o<this.getItems().length-1){this.focusItem(o+1);return}}this.fireBorderReached({event:e})};n.prototype.onsapprevious=function(e){e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_LEFT){var o=this.getFocusedItemIndex();if(o>0){this.focusItem(o-1);return}}this.fireBorderReached({event:e})};n.prototype.onsapnextmodifiers=function(e){if(!this.getEnableLinkReordering()){return}var o=this.getFocusedItemIndex();var r=this.getItems();e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_RIGHT&&o>-1&&o<r.length-1){this.fireItemDrop({draggedControl:r[o],droppedControl:r[o+1],dropPosition:"After",browserEvent:e})}if(e.keyCode===t.ARROW_DOWN&&o>-1){this.fireItemDrop({draggedControl:r[o],droppedControl:null,dropPosition:"After",browserEvent:e})}};n.prototype.onsappreviousmodifiers=function(e){if(!this.getEnableLinkReordering()){return}var o=this.getFocusedItemIndex();var r=this.getItems();e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_LEFT&&o>0){this.fireItemDrop({draggedControl:r[o],droppedControl:r[o-1],dropPosition:"Before",browserEvent:e})}if(e.keyCode===t.ARROW_UP&&o>-1){this.fireItemDrop({draggedControl:r[o],droppedControl:null,dropPosition:"Before",browserEvent:e})}};n.prototype.focusItem=function(e){e=e||0;var t=this.getItems();if(e===-1||e>=t.length){e=t.length-1}if(e>=0){var o=t[e].getFocusDomRef()||t[e].getDomRef();(o.querySelector("a")||o).focus()}else{this.focus()}};n.prototype.onmousedown=function(e){var t=this.getDOMItemIndex(e.srcControl.getDomRef());var o=this.getFocusedItemIndex();if(o<0){o=0}if(t<0){window.setTimeout(function(){this.focusItem(o)}.bind(this),0)}};n.prototype.getDOMItemIndex=function(e){var t=-1;this.getItems().forEach(function(o,r){var n=o.getDomRef();if(n&&n.contains(e)){t=r}});return t};n.prototype.onfocusin=function(e){if(document.activeElement===this.getDomRef()){this.focusItem(0)}};n.prototype.getFocusedItemIndex=function(){return this.getDOMItemIndex(document.activeElement)};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/section/CompactAreaRenderer", ["sap/ushell/resources"],function(e){"use strict";var t={apiVersion:2};t.render=function(t,r){t.openStart("div",r);if(!r.getVisible()){t.style("display","none")}t.attr("role","group");t.attr("aria-label",e.i18n.getText("Section.CompactArea.Description"));t.style("width","100%");t.class("sapUshellSectionCompactArea");t.openEnd();r.getItems().forEach(t.renderControl);t.close("div")};return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ContentRenderer", ["sap/ui/base/Object","sap/ui/core/Core"],function(e,t){"use strict";var r=e.extend("sap.ushell.ui.shell.ContentRenderer",{constructor:function(r,i,n,s){e.apply(this);this._id=i;this._cntnt=n;this._ctrl=r;this._rm=t.createRenderManager();this._cb=s||function(){}},destroy:function(){this._rm.destroy();delete this._rm;delete this._id;delete this._cntnt;delete this._cb;delete this._ctrl;if(this._rerenderTimer){clearTimeout(this._rerenderTimer);delete this._rerenderTimer}e.prototype.destroy.apply(this,arguments)},render:function(){if(!this._rm){return}if(this._rerenderTimer){clearTimeout(this._rerenderTimer)}this._rerenderTimer=setTimeout(function(){var e=document.getElementById(this._id);var t=e!=null;if(t){if(typeof this._cntnt==="string"){var r=this._ctrl.getAggregation(this._cntnt,[]);for(var i=0;i<r.length;i++){this._rm.renderControl(r[i])}}else{this._cntnt(this._rm)}this._rm.flush(e)}this._cb(t)}.bind(this),0)}});return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/FloatingContainer", ["sap/ui/core/Configuration","sap/ui/core/Control","sap/ui/core/Core","sap/ui/Device","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/EventHub","sap/ushell/library"],function(e,t,i,n,o,jQuery,s,r,a){"use strict";var l=t.extend("sap.ushell.ui.shell.FloatingContainer",{metadata:{library:"sap.ushell",properties:{visible:{type:"boolean",defaultValue:true}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.class("sapUshellFloatingContainer");if(!t.getVisible()){e.class("sapUshellShellHidden")}e.openEnd();if(t.getContent()&&t.getContent().length){e.renderControl(t.getContent()[0])}e.close("div")}}});l.prototype.init=function(){n.resize.attachHandler(l.prototype._handleResize,this);this.oStorage=new s(s.Type.local,"com.sap.ushell.adapters.local.FloatingContainer")};l.prototype.onAfterRendering=function(){if(this._bFirstRenderingDone){return}this._bFirstRenderingDone=true;this.adjustPosition()};l.prototype._getWindowHeight=function(){return jQuery(window).height()};l.prototype._setContainerHeight=function(e,t){e.css("max-height",t)};l.prototype._getWrapper=function(){return this.getDomRef()&&this.getDomRef().parentNode};l.prototype._isDocked=function(){var e=this._getWrapper();return e&&e.classList.contains("sapUshellContainerDocked")};l.prototype._getDockingDirection=function(){var e=this._isDocked();if(!e){return null}var t=this._getWrapper();return t.classList.contains("sapUshellContainerDockedStart")?"start":"end"};l.prototype._handleResize=function(t){o.start("FLP:FloatingContainer_handleResize","resizing floating container","FLP");var s=jQuery(window).width();var a=this._getWrapper();var l=!!a;var p=this._isDocked();if(l&&!p){a.style.cssText=this.oStorage.get("floatingContainerStyle");this.adjustPosition(t)}else if(l&&p){var h=this._getDockingDirection();if(h==="end"){var u;if(e.getRTL()){jQuery(a).css("left",416/s*100+"%");u=416/s*100+"%;"}else{jQuery(a).css("left",100-416/s*100+"%");u=100-416/s*100+"%;"}a.style.cssText="left:"+u+a.style.cssText.substring(a.style.cssText.indexOf("top"));this.oStorage.put("floatingContainerStyle",a.style.cssText)}}if(p){i.getEventBus().publish("launchpad","shellFloatingContainerDockedIsResize");r.emit("ShellFloatingContainerDockedIsResized",Date.now())}var c=n.media.getCurrentRange(n.media.RANGESETS.SAP_STANDARD);if(c.name!=="Desktop"&&p){r.emit("ShellFloatingContainerUndockOnResize",Date.now())}o.end("FLP:FloatingContainer_handleResize")};l.prototype._isSSize=function(){return window.matchMedia?window.matchMedia("(max-width: 417px)").matches:false};l.prototype.adjustPosition=function(t){var i=t?t.width:jQuery(window).width();var n=t?t.height:jQuery(window).height();var o=this.getDomRef();var s=jQuery(o).width();var r=jQuery(o).height();var a,l,p,h;var u=e.getRTL();var c=this._isSSize();var d=this._getWrapper();if(d){p=d.style.left.replace("%","");p=i*p/100;h=d.style.top.replace("%","");h=n*h/100;if(!isNaN(p)&&!isNaN(h)&&!c){if(u){a=p<s||p>i;if(a){p=p<s?s:i}}else{a=p<0||i<p+s;if(a){p=p<0?0:i-s}}l=h<0||n<h+r;if(l){h=h<0?0:n-r}if(!a&&!l){d.style.left=p*100/i+"%";d.style.top=h*100/n+"%";d.style.position="absolute";return}d.style.left=p*100/i+"%";d.style.top=h*100/n+"%";d.style.position="absolute"}}};l.prototype.handleDrop=function(){var e=this._getWrapper();if(e){this.adjustPosition();this.oStorage.put("floatingContainerStyle",e.style.cssText)}};l.prototype.setContent=function(e){if(this.getDomRef()){var t=i.createRenderManager();t.renderControl(e);t.flush(this.getDomRef());t.destroy()}this.setAggregation("content",e,true)};l.prototype.setVisible=function(e){var t=this.getDomRef();if(t){t.classList.toggle("sapUshellShellHidden",!e)}if(e&&!this._isDocked()){this._handleResize()}this.setProperty("visible",e,true)};l.prototype.exit=function(){n.resize.detachHandler(l.prototype._resizeHandler,this)};return l});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/NavigationMiniTile", ["sap/ui/core/Control","sap/ui/core/IconPool","sap/ushell/library"],function(e,t){"use strict";var n=e.extend("sap.ushell.ui.shell.NavigationMiniTile",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},intent:{type:"string",group:"Misc",defaultValue:null}},aggregations:{},events:{press:{}}},renderer:{apiVersion:2,render:function(e,n){var a=n.getTitle();var s=n.getSubtitle();var i=n.getIcon();var l=t.createControlByURI(i);e.openStart("div",n);e.attr("tabindex","-1");e.class("sapUshellNavMiniTile");e.attr("role","listitem");e.attr("aria-label",s?a+" "+s:a);e.openEnd();e.openStart("div");e.openEnd();e.openStart("span");e.class("sapUshellNavMiniTileTitle");e.openEnd();if(a){e.text(a)}e.close("span");e.close("div");e.openStart("div");e.openEnd();if(l){e.openStart("span");e.class("sapUshellNavMiniTileIcon");e.openEnd();e.renderControl(l);e.close("span")}else{e.openStart("span");e.class("sapUshellNavMiniTileSubtitle");e.openEnd();e.text(s||"");e.close("span")}e.close("div");e.close("div")}}});n.prototype.ontap=function(){this.firePress({})};n.prototype.onsapenter=function(){this.firePress({})};n.prototype.onsapspace=function(){this.firePress({})};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/OverflowListItem", ["sap/m/StandardListItem","sap/ui/core/CustomData","sap/ushell/library","sap/ushell/ui/shell/ShellHeadItem"],function(e,t,a,r){"use strict";var o=r.getMetadata().getProperties();var l=e.extend("sap.ushell.ui.shell.OverflowListItem",{metadata:{library:"sap.ushell",properties:{floatingNumber:{type:o.floatingNumber.type,group:o.floatingNumber.group,defaultValue:o.floatingNumber.defaultValue},floatingNumberMaxValue:{type:o.floatingNumberMaxValue.type,group:o.floatingNumberMaxValue.group,defaultValue:o.floatingNumberMaxValue.defaultValue},floatingNumberType:{type:o.floatingNumberType.type,group:o.floatingNumberType.group,defaultValue:o.floatingNumberType.defaultValue}}},renderer:{apiVersion:2}});l.prototype.init=r.prototype.init;l.prototype.onBeforeRendering=r.prototype.onBeforeRendering;l.prototype.tooltipFormatter=r.prototype.tooltipFormatter;l.prototype.floatingNumberFormatter=r.prototype.floatingNumberFormatter;l.prototype._getImage=function(){var a=this._oImage;if(!a){a=e.prototype._getImage.call(this)}if(this.getFloatingNumber()>0){a.addStyleClass("sapUshellShellHeadItmCounter");a.addCustomData(new t({key:"counter-content",value:this.floatingNumberFormatter(),writeToDom:true}))}else{a.removeStyleClass("sapUshellShellHeadItmCounter")}this._oImage=a;return this._oImage};return l},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/RightFloatingContainer", ["sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ui/core/Configuration","sap/ushell/resources","sap/ushell/library"],function(e,jQuery,t,i){"use strict";var n=e.extend("sap.ushell.ui.shell.RightFloatingContainer",{metadata:{library:"sap.ushell",properties:{size:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"56px"},top:{type:"string",group:"Appearance",defaultValue:"0"},right:{type:"string",group:"Appearance",defaultValue:"0"},textVisible:{type:"boolean",group:"Appearance",defaultValue:true},insertItemsWithAnimation:{type:"boolean",group:"Appearance",defaultValue:true,deprecated:true},hideItemsAfterPresentation:{type:"boolean",group:"Appearance",defaultValue:false},enableBounceAnimations:{type:"boolean",group:"Appearance",defaultValue:false},actAsPreviewContainer:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{floatingContainerItems:{type:"sap.ui.core.Control",multiple:true}},events:{afterRendering:{}}},renderer:{apiVersion:2,render:function(e,n){var a=t.getRTL();e.openStart("aside",n);e.class("sapUshellRightFloatingContainer");e.style("top",n.getTop()+"rem");e.attr("aria-label",i.i18n.getText("FloatingContainer_AriaLabel"));e.style(a?"left":"right",n.getRight());e.attr("data-role","alert");e.openEnd();e.openStart("ul");e.class("sapUshellNotificationListContainer");e.attr("role","list");e.openEnd();this.renderFloatingContainerItems(e,n);e.close("ul");e.close("aside")},renderFloatingContainerItems:function(e,t){var i=t.getInsertItemsWithAnimation(),n=t.getActAsPreviewContainer(),a=t.getFloatingContainerItems(),s;for(s=0;s<a.length;s++){if(n&&!i){a[s].addStyleClass("sapUshellNonAnimatedNotificationListItem")}else if(a[s].hasStyleClass("sapUshellNonAnimatedNotificationListItem")){a[s].addStyleClass("sapUshellNotificationsListItem");a[s].addStyleClass("sapUshellRightFloatingContainerItemBackToViewport");a[s].addStyleClass("sapUshellRightFloatingContainerItemHidden");a[s].addStyleClass("sapUshellRightFloatingContainerItmHeightVisible");a[s].removeStyleClass("sapUshellNonAnimatedNotificationListItem")}e.renderControl(a[s])}}}});n.prototype.init=function(){var e;jQuery(window).bind("resize",function(){clearTimeout(e);e=setTimeout(this._handleResize.bind(this),100)}.bind(this));this.iRequiredItemsNumber=5};n.prototype.onBeforeRendering=function(){};n.prototype._setSize=function(){};n.prototype._handleResize=function(){if(this.getDomRef()&&this.getFloatingContainerItems().length){var e=this.iRequiredItemsNumber,t=window.innerHeight,i=this.getDomRef(),n=i.getBoundingClientRect().top,a=jQuery(".sapUiSizeCompact").length>0?56:64,s=this.$().find("li").eq(0),o,l;if(!s.length){return}o=s[0].clientHeight;var r=jQuery("#sapUshellDashboardFooter").outerHeight();this.iRequiredItemsNumber=Math.min(parseInt((t-n-a-r)/o,10),5);if(e!==this.iRequiredItemsNumber){l=this.getFloatingContainerItems();for(var u=0;u<l.length;u++){if(u<this.iRequiredItemsNumber||isNaN(this.iRequiredItemsNumber)){l[u].removeStyleClass("sapUshellShellHidden")}else{l[u].addStyleClass("sapUshellShellHidden")}}}}};n.prototype.onAfterRendering=function(){this.fireAfterRendering();setTimeout(function(){this._handleResize()}.bind(this),500);this.addStyleClass("sapContrastPlus");this.addStyleClass("sapContrast");this.addStyleClass("sapUshellNotificationsListItem")};n.prototype.setVisible=function(e){this.setProperty("visible",e,true);if(e){jQuery(this.getDomRef()).css("visibility","visible")}else{jQuery(this.getDomRef()).css("visibility","hidden")}};n.prototype.setFloatingContainerItemsVisiblity=function(e){var t=this.getFloatingContainerItems(),i=e?300:0,n=this.getInsertItemsWithAnimation(),a=function(i){if(e){t[i].removeStyleClass("sapUshellRightFloatingContainerItemBounceOut").addStyleClass("sapUshellRightFloatingContainerItemBounceIn")}else{t[i].removeStyleClass("sapUshellRightFloatingContainerItemBounceIn").addStyleClass("sapUshellRightFloatingContainerItemBounceOut")}};for(var s=0;s<t.length;s++){(function(s){return function(){if(n){setTimeout(function(){a(s)},i+s*100)}else{t[s].setVisible(e)}}})(s)()}};n.prototype._animationBouncer=function e(t){var i=function(){if(!e._animationQueue.length){e._itemTimeoutId=undefined;return}var t=e._animationQueue.shift();t.addStyleClass("sapUshellRightFloatingContainerItmHeightVisible").addStyleClass("sapUshellRightFloatingContainerItemBounceIn");e._itemTimeoutId=setTimeout(i,100)};if(!e._animationQueue){e._animationQueue=[]}e._animationQueue.push(t);if(e._mainTimeoutId||e._itemTimeoutId){return}e._mainTimeoutId=setTimeout(function(){e._mainTimeoutId=undefined;i()},500)};n.prototype.addFloatingContainerItem=function(e){this.addAggregation("floatingContainerItems",e);e.addStyleClass("sapContrastPlus");if(this.getInsertItemsWithAnimation()){e.addStyleClass("sapUshellNotificationsListItem");e.addStyleClass("sapUshellRightFloatingContainerItemHidden");if(this.getEnableBounceAnimations()){n.prototype._animationBouncer(e)}else{setTimeout(function(){var t=this.getFloatingContainerItems();if(t.length>5){var i=t[t.length-1];i.addStyleClass("sapUshellRightFloatingContainerHideLastItem")}e.addStyleClass("sapUshellRightFloatingContainerItemBackToViewport").addStyleClass("sapUshellRightFloatingContainerItmHeightVisible")}.bind(this),500)}}else if(this.getActAsPreviewContainer()){e.addStyleClass("sapUshellNonAnimatedNotificationListItem")}if(this.getHideItemsAfterPresentation()){setTimeout(function(){e.removeStyleClass("sapUshellRightFloatingContainerItemBackToViewport")},5e3)}};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellAppTitle", ["sap/ushell/library","sap/m/Bar","sap/m/Button","sap/m/Title","sap/m/library","sap/m/Popover","sap/m/ResponsivePopover","sap/m/ToggleButton","sap/ui/core/Core","sap/ui/core/IconPool","sap/ui/Device","sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources","sap/ui/performance/Measurement","sap/ushell/services/AllMyApps"],function(e,t,o,l,s,p,n,i,r,a,h,u,c,v,A){"use strict";var y=e.AppTitleState;var d=e.AllMyAppsState;var f=s.PlacementType;var g=o.extend("sap.ushell.ui.shell.ShellAppTitle",{metadata:{library:"sap.ushell",associations:{navigationMenu:{type:"sap.ushell.ui.shell.ShellNavigationMenu"},allMyApps:{type:"sap.ui.core.mvc.View"}},events:{textChanged:{deprecated:true}}},renderer:{apiVersion:2,render:function(e,t){var o=t._getControlVisibilityAndState(),l=t.getText(),s=t.getModel();e.openStart("h1",t);e.class("sapUshellHeadTitle");if(o||h.system.phone){e.class("sapUshellAppTitleClickable")}e.attr("aria-level","1");e.openEnd();e.openStart("div",t.getId()+"-button");e.class("sapUshellAppTitle");if(o||h.system.phone){e.attr("tabindex","0")}if(t.getTooltip_AsString()){e.attr("title",t.getTooltip_AsString())}if(o){e.attr("role","button");e.attr("aria-haspopup","dialog");if(s&&g._getCurrentState()===y.AllMyAppsOnly){e.attr("aria-label",v.i18n.getText("ShowAllMyApps_AriaLabel",[l]))}else{e.attr("aria-label",v.i18n.getText("ShellNavigationMenu_AriaLabel",[l]))}}e.openEnd();if(h.media.getCurrentRange(h.media.RANGESETS.SAP_STANDARD).name!=="Phone"){e.openStart("span");e.class("sapUshellAppTitleText");e.openEnd();e.text(l||"");e.close("span")}if(o&&l){e.openStart("span");e.class("sapUshellShellHeadAction");e.openEnd();e.renderControl(t.oIcon);e.close("span")}e.close("div");e.close("h1")}}});g.prototype.init=function(){o.prototype.init.apply(this,arguments);this.oIcon=a.createControlByURI(a.getIconURI("slim-arrow-down"));this.oIcon.addStyleClass("sapUshellAppTitleMenuIcon");if(h.system.desktop){this.addEventDelegate({onkeydown:function(e){if(e.altKey&&e.keyCode===40){this.onclick(e)}}.bind(this)})}};g.prototype.getFocusDomRef=function(){return this.getDomRef("button")};g._getCurrentState=function(){return u.last("/core/shellHeader/ShellAppTitleState")};g.prototype.onclick=function(e){e.preventDefault();this.firePress();if(!this._getControlVisibilityAndState()){if(h.system.phone){window.hasher.setHash(u.last("/core/shellHeader/rootIntent"))}return}if(g._getCurrentState()===y.AllMyAppsOnly){A.start("FLP:ShellAppTitle.onClick","Click ShellAppTitle in HOME state, Launching AllMyApps","FLP");this._openCloseAllMyAppsPopover();return}this._openCloseNavMenuPopover()};g.prototype._openCloseAllMyAppsPopover=function(){if(!this.oAllMyAppsPopover){this.oAllMyAppsPopover=this._createAllMyAppsPopover()}if(this.oAllMyAppsPopover){if(this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close()}else{this.oAllMyAppsPopover.openBy(this)}}};g.prototype._openCloseNavMenuPopover=function(){if(!this.oNavMenuPopover){this.oNavMenuPopover=this._createNavMenuPopover()}this.getModel().setProperty("/ShellAppTitleState",y.ShellNavMenu);if(this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close()}else{this.oNavMenuPopover.openBy(this)}if(this.oNavMenuPopover.getFooter()){var e=u.last("/core/shell/model/currentState/stateName");this.oNavMenuPopover.getFooter().setVisible(e==="home"||e==="app")}};g.prototype._getControlVisibilityAndState=function(){A.start("FLP:ShellAppTitle.getControlVisibilityAndState","Check AllMyApps and NavShellMenu visibility","FLP");var e=this.getModel(),t=u.last("/core/shell/model/currentState/stateName"),o=this._isNavMenuEnabled(),l=o;if(!e){return false}if(t==="app"||t==="home"){var s=u.last("/core/services/allMyApps/enabled");l=s||o;if(s&&o){e.setProperty("/ShellAppTitleState",y.ShellNavMenu)}else if(!s&&o){e.setProperty("/ShellAppTitleState",y.ShellNavMenuOnly)}else if(s&&!o){e.setProperty("/ShellAppTitleState",y.AllMyAppsOnly)}}else{e.setProperty("/ShellAppTitleState",y.ShellNavMenuOnly)}A.end("FLP:ShellAppTitle.getControlVisibilityAndState");return l};g.prototype._createAllMyAppsPopover=function(){var e=r.byId(this.getAllMyApps());if(!e){return null}var t=new n("sapUshellAllMyAppsPopover",{placement:f.Bottom,title:"",showArrow:true,customHeader:this._getPopoverHeader(),verticalScrolling:false,showHeader:{path:"/ShellAppTitleState",formatter:function(e){return e!==y.ShellNavMenu}},content:[e],contentHeight:"28rem",contentWidth:"56rem"}).addStyleClass("sapContrastPlus");t.setModel(this.getModel());t.attachAfterOpen(function(){e.getController()._afterOpen();var o=t.getCustomHeader(),l=o.getContentLeft()[0],s=o.getContentLeft()[1];if(s.getVisible()){s.firePress();s.setPressed(true)}l.focus()});t.attachAfterClose(function(){this._bPressedSpace=false;if(!h.system.phone&&!(this.oNavMenuPopover&&this.oNavMenuPopover.isOpen())){this.focus()}}.bind(this));return t};g.prototype._createNavMenuPopover=function(){var e=r.byId(this.getNavigationMenu());var t=new p("sapUshellAppTitlePopover",{placement:f.Bottom,title:"",showArrow:true,showHeader:{path:"/ShellAppTitleState",formatter:function(e){return e!==y.ShellNavMenu}},contentWidth:"20rem",content:e}).addStyleClass("sapContrastPlus");if(u.last("/core/services/allMyApps/enabled")){t.setFooter(this._getPopoverFooterContent())}t.addStyleClass("sapUshellAppTitleNavigationMenuPopover");t.setModel(this.getModel());u.emit("/core/shell/model/allMyAppsMasterLevel",d.FirstLevel);t.attachBeforeOpen(function(){e._beforeOpen()});t.attachAfterOpen(function(){e.$().on("touchmove.scrollFix",function(e){e.stopPropagation()});e._afterOpen()});t.attachAfterClose(function(){this._bPressedSpace=false;if(!h.system.phone&&!(this.oAllMyAppsPopover&&this.oAllMyAppsPopover.isOpen())){this.focus()}}.bind(this));return t};g.prototype._getPopoverHeader=function(){var e=new l({text:v.i18n.getText("allMyApps_headerTitle"),level:"H1"});var o=new t("sapUshellShellAppPopoverHeader",{contentLeft:[this._createPopoverBackButton(),this._createPopoverToggleButton()],contentMiddle:[e]});return o};g.prototype.onAfterRendering=function(){var e=r.byId("shell-header");if(e){e.refreshLayout()}};g.prototype._createPopoverBackButton=function(){var e=new o("sapUshellAppTitleBackButton",{icon:a.getIconURI("nav-back"),press:[this._popoverBackButtonPressHandler,this],tooltip:v.i18n.getText("backBtn_tooltip"),visible:this.getAllMyAppsController().getBackButtonVisible()});e.addStyleClass("sapUshellCatalogNewGroupBackButton");return e};g.prototype._popoverBackButtonPressHandler=function(){var e=this.getAllMyAppsController(),t=e.getCurrentState();if(t===d.FirstLevel||t===d.FirstLevelSpread){if(g._getCurrentState()!==y.AllMyAppsOnly){this.getModel().setProperty("/ShellAppTitleState",y.ShellNavMenu);this.oAllMyAppsPopover.close();this.oNavMenuPopover.openBy(this)}}else if(t===d.SecondLevel){e.switchToInitialState()}else{e.handleSwitchToMasterAreaOnPhone()}e.updateHeaderButtonsState()};g.prototype._createPopoverToggleButton=function(){var e=this.getAllMyAppsController();var t=new i("sapUshellAllMyAppsToggleListButton",{icon:a.getIconURI("sap-icon://menu2"),press:function(t){e.switchToInitialState();this.setTooltip(t.getParameter("pressed")?v.i18n.getText("ToggleButtonHide"):v.i18n.getText("ToggleButtonShow"))},tooltip:v.i18n.getText("ToggleButtonShow"),visible:e.getToggleListButtonVisible()});h.media.attachHandler(function(){t.setVisible(e.getToggleListButtonVisible())},this,h.media.RANGESETS.SAP_STANDARD);t.addStyleClass("sapUshellAllMyAppsToggleListButton");return t};g.prototype._getPopoverFooterContent=function(){var e=this,l;l=new o("allMyAppsButton",{text:v.i18n.getText("allMyApps_launchingButtonTitle"),press:function(){e._openCloseAllMyAppsPopover();if(e.oAllMyAppsPopover){A.start("FLP:ShellNavMenu.footerClick","Click the footer of ShellNavMenu, Launching AllMyApps","FLP");e.getModel().setProperty("/ShellAppTitleState",y.AllMyApps);e.oNavMenuPopover.close()}},visible:{path:"/ShellAppTitleState",formatter:function(e){return e===y.ShellNavMenu}}});var s=new t("shellpopoverFooter",{contentMiddle:[l]});this.addCustomData(l,"role","button");this.addCustomData(l,"aria-label",v.i18n.getText("allMyApps_launchingButtonTitle"));return s};g.prototype._isNavMenuEnabled=function(){var e=r.byId(this.getNavigationMenu());return e?e.getItems()&&e.getItems().length>0:false};g.prototype.addCustomData=function(e,t,o){e.addCustomData(new c({key:t,value:o,writeToDom:true}))};g.prototype.close=function(){if(this.oNavMenuPopover&&this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close()}if(this.oAllMyAppsPopover&&this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close()}};g.prototype.setTooltip=function(e){this.setAggregation("tooltip",e);this.oIcon.setTooltip(e)};g.prototype.getAllMyAppsController=function(){var e=r.byId(this.getAllMyApps());return e.getController()};g.prototype.onkeyup=function(e){if(e.keyCode===32){this.onclick(e)}};g.prototype.onsapenter=g.prototype.onclick;g.prototype.exit=function(){var e=r.byId(this.getNavigationMenu()),t=r.byId(this.getAllMyApps());if(e){e.destroy()}if(t){t.destroy()}if(this.oAllMyAppsPopover){this.oAllMyAppsPopover.destroy()}if(this.oNavMenuPopover){this.oNavMenuPopover.destroy()}if(this.oIcon){this.oIcon.destroy()}};return g},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellFloatingAction", ["sap/ui/thirdparty/jquery","sap/m/Button","./ShellFloatingActionRenderer","sap/ushell/library"],function(jQuery,t,e){"use strict";var i=t.extend("sap.ushell.ui.shell.ShellFloatingAction",{metadata:{library:"sap.ushell"},renderer:e});i.prototype.init=function(){this.addStyleClass("sapUshellShellFloatingAction");if(t.prototype.init){t.prototype.init.apply(this,arguments)}};i.prototype.exit=function(){t.prototype.exit.apply(this,arguments)};i.prototype.onAfterRendering=function(){if(this.data("transformY")){this.removeStyleClass("sapUshellShellFloatingActionTransition");jQuery(this.getDomRef()).css("transform","translateY("+this.data("transformY")+")")}else{this.addStyleClass("sapUshellShellFloatingActionTransition")}};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellFloatingActionRenderer", ["sap/ui/core/Renderer","sap/m/ButtonRenderer"],function(e,r){"use strict";var n=e.extend(r);n.apiVersion=2;return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellFloatingActions", ["sap/ui/core/Control","sap/ushell/library","sap/ushell/resources","./ShellFloatingAction"],function(t,e,i,n){"use strict";var o=t.extend("sap.ushell.ui.shell.ShellFloatingActions",{metadata:{library:"sap.ushell",properties:{isFooterVisible:{type:"boolean",defaultValue:false}},aggregations:{floatingActions:{type:"sap.ushell.ui.shell.ShellFloatingAction",multiple:true,singularName:"floatingAction"}}},renderer:{apiVersion:2,render:function(t,e){var i=e.getFloatingActions();t.openStart("div",e);t.class("sapUshellShellFloatingActions");t.openEnd();if(i.length){var n;if(i.length===1){n=i[0]}else{n=e._createMultipleFloatingActionsButton(i);i.forEach(function(e){e.setVisible(false);t.renderControl(e)})}t.renderControl(n)}t.close("div")}}});o.prototype._createMultipleFloatingActionsButton=function(t){var e;var o=this;return new n({id:this.getId()+"-multipleFloatingActions",icon:"sap-icon://add",visible:true,press:function(){if(!this.hasStyleClass("sapUshellShellFloatingActionRotate")){this.addStyleClass("sapUshellShellFloatingActionRotate");if(!e){e=parseInt(this.$().outerHeight(),10)+parseInt(o.$().css("bottom"),10)}t.forEach(function(t){t.setVisible(true)});setTimeout(function(){t.forEach(function(t,i){var n=e*(i+1);t.$().css("transform","translateY(-"+n+"px)");t.data("transformY","-"+n+"px")})},0)}else{this.removeStyleClass("sapUshellShellFloatingActionRotate");t.forEach(function(t){t.$().css("transform","translateY(0)")});setTimeout(function(){t.forEach(function(t){t.setVisible(false);t.data("transformY",undefined)})},150)}},tooltip:i.i18n.getText("XXX")})};o.prototype.removeFloatingAction=function(t){if(typeof t==="number"){t=this.getAggregation("floatingActions")[t]}this.removeAggregation("floatingActions",t);return this};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellHeadItem", ["sap/base/util/ObjectPath","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/InvisibleText","sap/ushell/library","sap/ushell/resources"],function(e,t,a,i,r,o){"use strict";var n=r.FloatingNumberType;var l=t.extend("sap.ushell.ui.shell.ShellHeadItem",{metadata:{library:"sap.ushell",properties:{startsSection:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},showSeparator:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},enabled:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Appearance",defaultValue:false},showMarker:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},target:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Accessibility",defaultValue:null},ariaHidden:{type:"boolean",group:"Accessibility",defaultValue:false},ariaHaspopup:{type:"string",group:"Accessibility",defaultValue:""},text:{type:"string",group:"Appearance",defaultValue:null},floatingNumber:{type:"int",group:"Appearance",defaultValue:null},floatingNumberMaxValue:{type:"int",group:"Appearance",defaultValue:999},floatingNumberType:{type:"string",group:"Appearance",defaultValue:n.None}},events:{press:{}}},renderer:{apiVersion:2,render:function(e,t){var i=t.getTarget();e.openStart("a",t);e.attr("tabindex","0");if(i){e.attr("href",i)}e.attr("role",i?"link":"button");var r=t.getAriaLabel();if(r){e.attr("aria-label",r)}var o=t.getAriaHidden();if(o){e.attr("aria-hidden",o)}var n=t.getAriaHaspopup();if(n){e.attr("aria-haspopup",n)}e.attr("aria-describedby",t._oAriaDescribedbyText.getId());if(t.getTooltip_AsString()){e.attr("title",t.getTooltip_AsString())}if(t.getFloatingNumber()>0){e.attr("data-counter-content",t.floatingNumberFormatter());e.class("sapUshellShellHeadItmCounter")}e.class("sapUshellShellHeadItm");if(!t.getEnabled()){e.class("sapUshellShellHeadItmDisabled")}if(t.getSelected()){e.class("sapUshellShellHeadItmSel")}var l=t.getText();var s=t.getTooltip_AsString();if(l||s){e.attr("title",s||l)}e.openEnd();e.openStart("span");e.class("sapUshellShellHeadItmCntnt");var u=t.getIcon();var p=a.isIconURI(u)&&a.getIconInfo(u);if(p){e.style("font-family",p.fontFamily);e.openEnd();e.text(p.content)}else{e.openEnd();e.voidStart("img");e.attr("id",t.getId()+"-img-inner");e.attr("src",u);e.voidEnd()}e.close("span");e.close("a")}}});l.prototype.init=function(){this._oAriaDescribedbyText=new i(this.getId()+"-describedby").toStatic();this.addDependent(this._oAriaDescribedbyText)};l.prototype.onBeforeRendering=function(){switch(this.getFloatingNumberType()){case n.None:this._oAriaDescribedbyText.setText("");break;default:var e=this.getFloatingNumber();if(!e){this._oAriaDescribedbyText.setText("")}else{var t=this.getFloatingNumberMaxValue();this._oAriaDescribedbyText.setText(e>t?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",t):o.i18n.getText("NotificationToggleButton.NewNotifications",e))}break}};l.prototype.tooltipFormatter=function(e){var t=typeof e!=="undefined"?e:this.getFloatingNumber();var a=this.getFloatingNumberMaxValue();switch(this.getFloatingNumberType()){default:case n.None:return"";case n.Notifications:if(!t){return o.i18n.getText("NotificationToggleButton.NoNewNotifications")}return t>a?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",a):o.i18n.getText("NotificationToggleButton.NewNotifications",t);case n.OverflowButton:var i=o.i18n.getText("shellHeaderOverflowBtn_tooltip");if(!t){return i}i+=" ("+(t>a?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",a):o.i18n.getText("NotificationToggleButton.NewNotifications",t))+")";return i}};l.prototype.floatingNumberFormatter=function(e){var t=typeof e!=="undefined"?e:this.getFloatingNumber();var a=this.getFloatingNumberMaxValue();return t>a?a+"+":t.toString()};l.prototype.onclick=function(e){if(this.getEnabled()){this.firePress();if(!this.getTarget()){e.preventDefault()}}};l.prototype.onkeyup=function(e){var t=e.originalEvent;var a=t.key;var i=t.shiftKey;if(["Enter"," "].includes(a)&&!i){this.onclick(e)}};e.set("sap.ui.unified.ShellHeadItem",l);return l},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellNavigationMenu", ["sap/base/Log","sap/m/FlexBox","sap/m/Bar","sap/ui/core/Icon","sap/m/Title","sap/m/Label","sap/m/List","sap/m/VBox","sap/ui/core/Control","sap/ui/core/Core","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","sap/ushell/library","sap/ushell/resources"],function(e,t,i,s,o,n,r,a,l,h,p,jQuery,d,u,c){"use strict";var f=l.extend("sap.ushell.ui.shell.ShellNavigationMenu",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},showRelatedApps:{type:"boolean",defaultValue:true}},aggregations:{items:{type:"sap.m.ListItem",group:"Misc",defaultValue:null,singularName:"item"},miniTiles:{type:"sap.ushell.ui.shell.NavigationMiniTile",group:"Misc",defaultValue:null,singularName:"miniTile"}},events:{}},renderer:{apiVersion:2,render:function(e,t){var i;e.openStart("div",t);e.openEnd();e.renderControl(t.oTitleBar);if(t.oItemsList){e.renderControl(t.oItemsList)}if(t.getShowRelatedApps()){i=t.getMiniTiles();if(i&&i.length>0){e.renderControl(t.oRelatedAppsVbox)}}e.close("div")}}});var m=function(e){this.init(e)};m.prototype.init=function(e){this.keyCodes=d;this.jqElement=e.$();this.jqElement.on("keydown.keyboardNavigation",this.keydownHandler.bind(this))};m.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation")}delete this.jqElement};m.prototype.keydownHandler=function(e){switch(e.keyCode){case this.keyCodes.ARROW_UP:this.upDownHandler(e,true);break;case this.keyCodes.ARROW_DOWN:this.upDownHandler(e,false);break;case this.keyCodes.ARROW_LEFT:this.leftRightHandler(e,false);break;case this.keyCodes.ARROW_RIGHT:this.leftRightHandler(e,true);break;case this.keyCodes.HOME:this.homeEndHandler(e,true);break;case this.keyCodes.END:this.homeEndHandler(e,false);break;case this.keyCodes.PAGE_UP:this.homeEndHandler(e,true);break;case this.keyCodes.PAGE_DOWN:this.homeEndHandler(e,false);break;case this.keyCodes.TAB:if(e&&e.shiftKey){this._setItemFocus(e,jQuery("#sapUshellNavHierarchyItems li:[tabindex='0']"))}else{this._setItemFocus(e,jQuery("#allMyAppsButton"))}break;default:break}};m.prototype.upDownHandler=function(e,t){var i=jQuery(document.activeElement);if(!i.hasClass("sapUshellNavMiniTile")){return false}var s=i.parent().parent();var o=i.parent().index();var n=s.children();var r;if(t){r=o-3;if(r<0){r+=9}}else{r=(o+3)%n.length}var a=n[r].children[0];this._setItemFocus(e,jQuery(a))};m.prototype.leftRightHandler=function(e,t){var i=t?"next":"prev",s,o,n,r,a,l,h=jQuery(document.activeElement);if(!h.hasClass("sapUshellNavMiniTile")){return false}s=h.parent();o=s[i]();n=o.index();r=s.parent();if(n===-1){a=t?0:r.children().length-1}else{a=n}l=r.children()[a].children[0];if(!l){return false}this._setItemFocus(e,jQuery(l))};m.prototype.homeEndHandler=function(e,t){var i=t?"first":"last";var s=jQuery(document.activeElement);if(!s.hasClass("sapUshellNavMiniTile")){return false}e.preventDefault();var o=this.jqElement.find(".sapUshellNavMiniTile")[i]();this._setItemFocus(e,o)};m.prototype._setItemFocus=function(e,t){e.preventDefault();e.stopImmediatePropagation();jQuery(".sapUshellNavMiniTile").attr("tabindex",-1);t.attr("tabindex",0);t.focus()};m.prototype.setFocusToLastFocusedMiniTile=function(e){var t=jQuery(".sapUshellNavMiniTile[tabindex='0']");if(t&&t[0]){this._setItemFocus(e,jQuery(t))}else{this._setItemFocus(e,jQuery(jQuery(".sapUshellNavMiniTile")[0]))}};f.prototype.init=function(){};f.prototype._createItemsList=function(){this.oItemsList=new r("sapUshellNavHierarchyItems")};f.prototype._createMiniTilesBox=function(){this.oMiniTilesBox=new t("sapUshellNavRelatedAppsFlexBox",{justifyContent:"Center"})};f.prototype._beforeOpen=function(){if(!this.bInitialized){this.oTitle=new o("navMenuInnerTitle",{level:"H1"});this.oIconControl=new s;this.oTitleBar=new i("navMenuTitleBar",{contentLeft:[this.oIconControl,this.oTitle]});this.oRelatedAppsTitle=new n("sapUshellRelatedAppsLabel",{text:c.i18n.getText("shellNavMenu_relatedApps")});if(!this.oMiniTilesBox){this._createMiniTilesBox()}this.oRelatedAppsVbox=new a("sapUshellRelatedAppsItems",{items:[this.oRelatedAppsTitle,this.oMiniTilesBox]});this._extendInnerControlsForAccKeyboard();this.bInitialized=true}this.oTitle.setText(this.getTitle());this.oIconControl.setSrc(this.getIcon()||"sap-icon://folder")};f.prototype._afterOpen=function(){if(p.system.desktop){if(this.keyboardNavigation){this.keyboardNavigation.destroy()}this.keyboardNavigation=new m(this.oMiniTilesBox)}};f.prototype._extendInnerControlsForAccKeyboard=function(){if(p.system.desktop){this.oItemsList.addEventDelegate({onsaptabnext:function(e){if(jQuery(".sapUshellNavMiniTile").length){this.keyboardNavigation.setFocusToLastFocusedMiniTile(e)}else{var t=h.byId("allMyAppsButton");this.keyboardNavigation._setItemFocus(e,jQuery(t.getDomRef()))}}.bind(this)})}};f.prototype.getMiniTiles=function(){if(this.oMiniTilesBox){return this.oMiniTilesBox.getItems()}return[]};f.prototype.insertMiniTile=function(e,t){if(!this.oMiniTilesBox){this._createMiniTilesBox()}this.oMiniTilesBox.insertItem(e,t);return this};f.prototype.addMiniTile=function(t){if(!this.oMiniTilesBox){this._createMiniTilesBox()}if(this.oMiniTilesBox.getItems().length<9){this.oMiniTilesBox.addItem(t)}else{e.warning("ShellNavigationMenu.addMiniTile - miniTiles aggregation is already at maximum size of 9 elements "+"- current item was not added.")}return this};f.prototype.removeMiniTile=function(e){if(this.oMiniTilesBox){this.oMiniTilesBox.removeItem(e)}return this};f.prototype.removeAllMiniTiles=function(){if(this.oMiniTilesBox){this.oMiniTilesBox.removeAllItems()}return this};f.prototype.destroyMiniTiles=function(){if(this.oMiniTilesBox){this.oMiniTilesBox.destroyItems()}return this};f.prototype.indexOfMiniTile=function(e){if(this.oMiniTilesBox){return this.oMiniTilesBox.indexOfItem(e)}return-1};f.prototype.getItems=function(){if(this.oItemsList){return this.oItemsList.getItems()}return[]};f.prototype.insertItem=function(e,t){if(!this.oItemsList){this._createItemsList()}e=this._extendHierarchyItemForAcc(e);this.oItemsList.insertItem(e,t);return this};f.prototype.addItem=function(e){if(!this.oItemsList){this._createItemsList()}e=this._extendHierarchyItemForAcc(e);this.oItemsList.addItem(e);return this};f.prototype.removeItem=function(e){if(this.oItemsList){this.oItemsList.removeItem(e)}return this};f.prototype.removeAllItems=function(){if(this.oItemsList){this.oItemsList.removeAllItems()}return this};f.prototype.destroyItems=function(){if(this.oItemsList){this.oItemsList.destroyItems()}return this};f.prototype.indexOfItem=function(e){if(this.oItemsList){return this.oItemsList.indexOfItem(e)}return-1};f.prototype._extendHierarchyItemForAcc=function(e){if(p.system.desktop){e.addEventDelegate({onsapspace:function(e){this.firePress()}.bind(e)})}return e};f.prototype.exit=function(){if(this.oItemsList){this.oItemsList.destroy()}if(this.oMiniTilesBox){this.oMiniTilesBox.destroy()}if(this.bInitialized){this.oTitleBar.destroy();this.oRelatedAppsVbox.destroy();this.oRelatedAppsTitle.destroy()}if(this.keyboardNavigation){this.keyboardNavigation.destroy()}};f.prototype.onAfterRendering=function(){jQuery("#sapUshellAppTitlePopover-intHeader").css("height",0);var e=jQuery("#sapUshellNavHierarchyItems ul");e.attr("role","menu");e.attr("aria-label",c.i18n.getText("ShellNavigationMenu_HierarchyItemsAriaLabel"));jQuery("#sapUshellNavHierarchyItems li").attr("role","menuitem");var t=jQuery("#sapUshellNavRelatedAppsFlexBox");t.attr("role","list");t.attr("aria-labelledBy","sapUshellRelatedAppsLabel");var i=jQuery(".sapUshellNavMiniTile");for(var s=0;s<i.length;s++){jQuery(i[s]).attr("aria-setsize",i.length);jQuery(i[s]).attr("aria-posinset",s+1)}var o=this.oTitle.getDomRef();if(o){var n=o.firstChild;if(n){var r=o.getBoundingClientRect().right<n.getBoundingClientRect().right;var a=r?this.getTitle():null;if(this.oTitle.getTooltip()!==a){this.oTitle.setTooltip(a);this.oTitle.rerender()}}}};return f});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/SidePane", ["sap/ui/Device","sap/ui/core/Control","sap/ushell/resources","sap/ushell/library"],function(e,t,n,i){"use strict";var a=t.extend("sap.ushell.ui.shell.SidePane",{metadata:{library:"sap.ushell",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("aside",t);e.class("sapUshellSidePane");e.attr("aria-label",n.i18n.getText("SidePane_AriaLabel"));e.style("width",t._getContentWidth());e.openEnd();var i=t.getContent();i.forEach(function(t){e.renderControl(t)});e.close("aside")}}});a._WIDTH_PHONE=13;a._WIDTH_TABLET=13;a._WIDTH_DESKTOP=15;a.prototype.init=function(){e.resize.attachHandler(this._handleResize,this)};a.prototype._getContentWidth=function(){var t=e.media.getCurrentRange(e.media.RANGESETS.SAP_STANDARD).name;var n=a["_WIDTH_"+t.toUpperCase()]+"rem";return n};a.prototype._handleResize=function(){var e=this._getContentWidth();var t=this.getDomRef();if(t){t.style.height="";t.style.width=e}};a.prototype.exit=function(){e.resize.detachHandler(this._handleResize,this)};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/SubHeader", ["sap/ui/core/Control","sap/ushell/library"],function(t,n){"use strict";var e=t.extend("sap.ushell.ui.shell.SubHeader",{metadata:{library:"sap.ushell",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}}},renderer:{apiVersion:2,render:function(t,n){t.openStart("div",n);t.class("sapUshellSubHeader");t.openEnd();t.close("div")}}});e.prototype.init=function(){this.aContent=[]};e.prototype.onAfterRendering=function(){var t=this.getContent();if(t.length){t[0].placeAt(this.getDomRef(),"only")}};e.prototype.addContent=function(t){this.aContent.push(t);this.invalidate()};e.prototype.removeContent=function(t){var n=this.aContent.findIndex(function(n){return n===t});if(n>-1){this.aContent.splice(n,1)}this.invalidate();return t};e.prototype.getContent=function(){return this.aContent};e.prototype.destroyContent=function(){for(var t=0;this.aContent.length>t;t++){this.aContent[t].destroy();delete this.aContent[t]}this.aContent=[];this.invalidate()};e.exit=function(){this.destroyContent();this.aContent=null};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/SysInfoBar", ["sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/Icon","sap/ushell/library","sap/m/Bar","sap/m/Label","sap/ui/core/CustomData","./SysInfoBarRenderer"],function(e,t,s,o,a,r,i,l){"use strict";var n={orange:"sapUshellSysInfoBarOrange",red:"sapUshellSysInfoBarRed",pink:"sapUshellSysInfoBarPink",violet:"sapUshellSysInfoBarViolet",blue:"sapUshellSysInfoBarBlue",green:"sapUshellSysInfoBarGreen",grey:"sapUshellSysInfoBarGrey"};var p=e.extend("sap.ushell.ui.shell.SysInfoBar",{metadata:{library:"sap.ushell",defaultAggregation:"_bar",properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:""},text:{type:"string",group:"Misc",defaultValue:""},subText:{type:"string",group:"Misc",defaultValue:""},color:{type:"string",group:"Misc",defaultValue:"orange"}},aggregations:{_bar:{type:"sap.m.Bar",multiple:false,visibility:"hidden"}}},renderer:l});p.prototype.init=function(){var e=new a({id:this.getId()+"-bar"}).addStyleClass("sapUshellSysInfoBar");e._setRootAccessibilityRole("complementary");e.data("sap-ui-fastnavgroup","false",false);this._oText=new r({id:this.getId()+"-text",text:this.getText(),design:"Bold"}).addStyleClass("sapUshellSysInfoBarText");this._oSubText=new r({id:this.getId()+"-subText",text:this.getSubText()}).addStyleClass("sapUshellSysInfoBarText");this.setAggregation("_bar",e,true);var t=new i({key:"help-id",value:"FLP-SysInfoBar",writeToDom:true});this.addCustomData(t)};p.prototype.exit=function(){this._oIcon=null;this._oText=null;this._oSubText=null};p.prototype.onBeforeRendering=function(){var e=this.getAggregation("_bar");e.removeAllContentMiddle();e.addContentMiddle(this._oIcon);e.addContentMiddle(this._oText);e.addContentMiddle(this._oSubText);if(this._isMappedColor(this.getColor())){this.addStyleClass(this._getMappedColorClass(this.getColor()))}else{this.addStyleClass("sapUshellSysInfoBarCustom")}};p.prototype.setText=function(e){this.setProperty("text",e,true);this._oText.setText(e)};p.prototype.setSubText=function(e){this.setProperty("subText",e,true);this._oSubText.setText(e)};p.prototype.setIcon=function(e){if(t.isIconURI(e)){if(this._oIcon){this._oIcon.destroy();this._oIcon=null}this._oIcon=t.createControlByURI({id:this.getId()+"-icon",src:e,densityAware:true,useIconTooltip:true},s).addStyleClass("sapUshellSysInfoBarText");this.invalidate()}else if(this._oIcon){this._oIcon.destroy();this._oIcon=null}this.setProperty("icon",e)};p.prototype.setColor=function(e){var t=this.getColor();if(this._isMappedColor(t)&&this.hasStyleClass(this._getMappedColorClass(t))){this.removeStyleClass(this._getMappedColorClass(t))}this.setProperty("color",e)};p.prototype._isMappedColor=function(e){return!!n[e]};p.prototype._getMappedColorClass=function(e){return n[e]||""};return p});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/SysInfoBarRenderer", ["sap/ushell/resources"],function(e){"use strict";var o={apiVersion:2};o.render=function(o,r){o.openStart("div",r);o.accessibilityState(r,{role:"complementary",label:e.i18n.getText("SysInfoBarAriaLabel",[r._oText.getText(),r._oSubText.getText()])});o.class("sapUshellSysInfoBar");if(!r._isMappedColor(r.getColor())){o.style("border","1px solid "+r.getColor());o.style("background-color",r.getColor())}o.openEnd();o.renderControl(r.getAggregation("_bar"));o.close("div")};return o},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ToolArea", ["sap/ui/core/Control","sap/ushell/library"],function(e){"use strict";var t=e.extend("sap.ushell.ui.shell.ToolArea",{metadata:{library:"sap.ushell",aggregations:{toolAreaItems:{type:"sap.ushell.ui.shell.ToolAreaItem",multiple:true}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.class("sapUshellToolArea");if(!t.hasItemsWithText()){e.class("sapUshellToolAreaTextHidden")}e.openEnd();e.openStart("div");e.attr("id",t.getId()+"-cntnt");e.class("sapUshellToolAreaContainer");e.openEnd();var l=t.getToolAreaItems(),s,o;for(s=0;s<l.length;s++){o=l[s];if(o.getVisible()){e.openStart("div");e.class("sapUshellToolAreaContent");if(o.getSelected()){e.class("sapUshellToolAreaItemSelected")}e.openEnd();e.renderControl(o);e.close("div");e.openStart("div");e.class("sapUshellToolAreaContentSeparator");e.openEnd();e.close("div")}}e.close("div");e.close("div")}}});t.prototype.hasItemsWithText=function(){var e=this.getToolAreaItems(),t,l;for(t=0;t<e.length;t++){l=e[t];if(l.getVisible()&&l.getText()){return true}}return false};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ToolAreaItem", ["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/core/IconPool","sap/ushell/library"],function(jQuery,e,t){"use strict";var a=e.extend("sap.ushell.ui.shell.ToolAreaItem",{metadata:{library:"sap.ushell",properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false},text:{type:"string",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},expandable:{type:"boolean",group:"Appearance",defaultValue:false}},events:{press:{},expand:{}}},renderer:{apiVersion:2,render:function(e,a){var l;e.openStart("div",a);if(!a.getIcon()){e.class("sapUshellToolAreaItmTextOnly")}else{e.class("sapUshellToolAreaItm")}if(!a.getVisible()){e.class("sapUshellShellHidden")}if(a.getAriaLabel()){e.accessibilityState(a,{label:this.getAriaLabel(),role:"button"})}var s=a.getTooltip_AsString();if(s){e.attr("title",s)}e.openEnd();if(a.getIcon()){l=t.createControlByURI(a.getIcon());l.setUseIconTooltip(false);l.addStyleClass("sapUshellToolAreaItemIcon");e.renderControl(l)}if(a.getText()){e.openStart("span");e.class("sapUshellToolAreaItemText");e.openEnd();e.text(a.getText());e.close("span")}if(a.getExpandable()){this.renderExpandable(e)}e.close("div")},renderExpandable:function(e){var a=t.createControlByURI("sap-icon://icon-dropdown");a.addStyleClass("sapUshellToolAreaItemExpandable");e.renderControl(a)}}});a.prototype.onclick=function(e){if(this.$().parent().hasClass("sapUshellToolAreaItemSelected")){this.setSelected(false)}else{this.setSelected(true)}if(e.target.className.indexOf("sapUshellToolAreaItemExpandable")>0){this.fireExpand()}else{this.firePress()}};a.prototype.onsapenter=a.prototype.onclick;a.prototype.setExpandable=function(e){e=!!e;this.setProperty("expandable",e,true);this.$().toggleClass("sapUshellToolAreaItemExpandable",e)};a.prototype.setSelected=function(e){e=!!e;if(e){var t=jQuery(".sapUshellToolAreaItemSelected");t.each(function(){jQuery(this).removeClass("sapUshellToolAreaItemSelected")})}this.setProperty("selected",e,true);this.$().parent().toggleClass("sapUshellToolAreaItemSelected",e)};a.prototype.setVisible=function(e){var t=this.getParent()&&this.getParent().getDomRef();this.setProperty("visible",!!e,t);this.$().toggleClass("sapUshellShellHidden",!e)};a.prototype.setAriaLabel=function(e){this.setProperty("ariaLabel",e);return this};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/DynamicTile", ["sap/ushell/library","./TileBase","./DynamicTileRenderer"],function(e,a,t){"use strict";var r=e.ui.tile.State;var u=e.ui.tile.StateArrow;var l=a.extend("sap.ushell.ui.tile.DynamicTile",{metadata:{library:"sap.ushell",properties:{numberValue:{type:"string",group:"Data",defaultValue:"0.0"},numberState:{type:"State",group:"Appearance",defaultValue:r.Neutral},numberUnit:{type:"string",group:"Data",defaultValue:null},numberDigits:{type:"int",group:"Appearance",defaultValue:0},stateArrow:{type:"StateArrow",group:"Appearance",defaultValue:u.None},numberFactor:{type:"string",group:"Data",defaultValue:null}}},renderer:t});return l});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/DynamicTileRenderer", ["sap/ui/core/Renderer","sap/ui/core/format/NumberFormat","../../library","./TileBaseRenderer","sap/ushell/resources"],function(e,t,a,i,r){"use strict";var s=a.ui.tile.State;var l=a.ui.tile.StateArrow;var n=r.i18n;var o=e.extend(i);o.apiVersion=2;o.renderPart=function(e,a){var i=a.getNumberValue(),r=a.getNumberFactor(),o=i.toString(),c=a.getIcon()?4:5,u=this._shouldProcessDigits(o,a);if(o.length>c||u){var m=this._normalizeNumber(i,c,r,a);r=m.numberFactor;o=m.displayNumber}else if(o!==""){var d=t.getFloatInstance({maxFractionDigits:c});o=d.format(i)}e.openStart("div");e.class("sapUshellDynamicTile");e.openEnd();e.openStart("div");e.class("sapUshellDynamicTileData");e.class(s[a.getNumberState()]?"sapUshellDynamicTileData"+a.getNumberState():"sapUshellDynamicTileData"+s.Neutral);e.openEnd();e.openStart("div");e.class("sapUshellDynamicTileIndication");e.openEnd();if(l[a.getStateArrow()]){e.openStart("div");e.class("sapUshellDynamicTileStateArrow");e.class("sapUshellDynamicTileData"+l[a.getStateArrow()]);e.openEnd();e.close("div")}e.voidStart("br");e.voidEnd();e.openStart("div");e.class("sapUshellDynamicTileNumberFactor");e.accessibilityState(a,{label:n.getText("TileUnits_lable")+r});e.openEnd();e.text(r);e.close("div");e.close("div");e.openStart("div");e.class("sapUshellDynamicTileNumber");if(o&&o!==""){e.accessibilityState(a,{label:n.getText("TileValue_lable")+o});e.openEnd();e.text(o)}else{e.openEnd();e.text(a.getNumberValue())}e.close("div");e.close("div");e.close("div")};o._normalizeNumber=function(e,a,i,r){var s;if(isNaN(e)){s=e}else{var l=t.getFloatInstance({maxFractionDigits:r.getNumberDigits()});if(!i){var n=Math.abs(e);if(n>=1e9){i="B";e/=1e9}else if(n>=1e6){i="M";e/=1e6}else if(n>=1e3){i="K";e/=1e3}}s=l.format(e)}var o=s;var c=o[a-1];a-=c==="."||c===","?1:0;o=o.substring(0,a);return{displayNumber:o,numberFactor:i}};o._shouldProcessDigits=function(e,t){var a=t.getNumberDigits(),i;if(e.indexOf(".")!==-1){i=e.split(".")[1].length;if(i>a){return true}}return false};o.getInfoPrefix=function(e){return e.getNumberUnit()};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/ImageTile", ["sap/ushell/library","./TileBase","./ImageTileRenderer"],function(e,r,a){"use strict";var l=r.extend("sap.ushell.ui.tile.ImageTile",{metadata:{library:"sap.ushell",properties:{imageSource:{type:"string",group:"Appearance",defaultValue:null}}},renderer:a});return l});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/ImageTileRenderer", ["sap/ui/core/Renderer","./TileBaseRenderer"],function(e,r){"use strict";var t=e.extend(r);t.apiVersion=2;t.renderPart=function(e,r){e.voidStart("img");e.class("sapUshellImageTile");e.attr("src",r.getImageSource());e.attr("alt"," ");e.voidEnd()};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/StaticTile", ["sap/ushell/library","sap/ushell/ui/tile/TileBase","sap/ushell/ui/tile/StaticTileRenderer"],function(e,l,i){"use strict";var a=l.extend("sap.ushell.ui.tile.StaticTile",{metadata:{library:"sap.ushell"},renderer:i});return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/StaticTileRenderer", ["sap/ui/core/Renderer","./TileBaseRenderer"],function(e,n){"use strict";var r=e.extend(n);r.apiVersion=2;r.renderPart=function(e,n){e.openStart("span");e.class("sapUshellStaticTile");e.openEnd();e.close("span")};return r});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/ui/tile/TileBase", ["sap/ushell/library","sap/ui/core/Control","sap/ushell/library","./TileBaseRenderer"],function(e,t,a,r){"use strict";var l=e.ui.tile.State;var u=t.extend("sap.ushell.ui.tile.TileBase",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Data",defaultValue:null},subtitle:{type:"string",group:"Data",defaultValue:null},icon:{type:"string",group:"Data",defaultValue:null},info:{type:"string",group:"Data",defaultValue:null},infoState:{type:"sap.ushell.ui.tile.State",defaultValue:l.Neutral},targetURL:{type:"string",group:"Behavior",defaultValue:null},highlightTerms:{type:"any",group:"Appearance",defaultValue:[]}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},events:{press:{}}},renderer:r});u.prototype.ontap=function(e){this.firePress({})};u.prototype.onsapenter=function(e){this.firePress({})};u.prototype.onsapspace=function(e){this.firePress({})};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/TileBaseRenderer", ["sap/ushell/library","sap/ushell/resources","sap/base/security/encodeXML","sap/ui/core/Icon"],function(e,t,l,i){"use strict";var s=e.ui.tile.State;var a={apiVersion:2};var n=t.i18n;a.highlight=function(e,t){var i,s,a=l(t).replace(/&#xa;/g,"<br>");if(e&&e.length&&e.length>0){for(i=0;i<e.length;i=i+1){s=new RegExp("("+l(e[i]).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")+")","gi");a=a.replace(s,"<b>$1</b>")}}return a};a.render=function(e,t){var l,a;e.openStart("div",t);if(t.getTargetURL()){e.attr("data-targeturl",t.getTargetURL())}e.class("sapUshellTileBase");e.openEnd();e.openStart("div");e.class("sapUshellTileBaseHeader");e.openEnd();e.openStart("h3");e.class("sapUshellTileBaseTitle");e.accessibilityState(t,{label:n.getText("tileTypeListItem")+n.getText("TileDetails_lable")+n.getText("TileTitle_lable")+t.getTitle(),level:"3"});e.openEnd();e.unsafeHtml(this.highlight(t.getHighlightTerms(),t.getTitle()||""));e.close("h3");if(t.getSubtitle()){e.openStart("h4");e.class("sapUshellTileBaseSubtitle");e.accessibilityState(t,{label:n.getText("TileSubTitle_lable")+t.getSubtitle(),level:"4"});e.openEnd();e.unsafeHtml(this.highlight(t.getHighlightTerms(),t.getSubtitle()));e.close("h4")}e.close("div");if(typeof this.renderPart==="function"){this.renderPart(e,t)}if(t.getIcon()){a=new i({src:t.getIcon()});a.addStyleClass("sapUshellTileBaseIcon");e.renderControl(a)}if(t.getInfo()||typeof this.getInfoPrefix==="function"&&this.getInfoPrefix(t)){e.openStart("div");e.class("sapUshellTileBaseInfo");e.class(t.getInfoState()?"sapUshellTileBase"+t.getInfoState():"sapUshellTileBase"+s.Neutral);e.accessibilityState(t,{label:n.getText("TileInfo_lable")+t.getInfo()});e.openEnd();if(typeof this.getInfoPrefix==="function"){l=this.getInfoPrefix(t);e.text(l)}if(t.getInfo()){if(l){e.text(", ")}e.unsafeHtml(this.highlight(t.getHighlightTerms(),t.getInfo()))}e.close("div")}e.close("div")};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/utils", ["sap/ushell/EventHub","sap/ui/thirdparty/jquery"],function(e,jQuery){"use strict";function n(n){var r=new jQuery.Deferred,t,s,i=0,u=0,f=0,a=[],o=[],p,c={refresh:false};function l(e){if(e&&e.refresh===true){c.refresh=true}f++;r.notify()}function h(e){o.push({entry:p,message:e});u++;r.notify()}var d=e.last("UserSettingsOpened")||{};Object.keys(d).forEach(function(e){var r=parseInt(e,10);s=n[r].onSave();s.done(l);p=n[r].title;s.fail(h);a.push(s);i++});t=jQuery.when.apply(null,a);t.done(function(){e.emit("UserSettingsOpened",null);r.resolve(c)});r.progress(function(){if(u>0&&u+f===i){r.reject(o)}});return r.promise()}return{saveUserPreferenceEntries:n}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/ShellUIService", ["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","./_ShellUIService/shelluiservice.class.factory"],function(e,r,c,i){"use strict";return i({serviceRegistry:e,serviceFactory:r,service:c})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/UserStatus", ["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","sap/ui/base/EventProvider"],function(e,t,a,r){"use strict";var s={statusChanged:"statusChanged",serviceStateChanged:"serviceStateChanged"};var i=a.extend("sap.ushell.ui5service.UserStatus",{init:function(){i.prototype.isEnabled=false;e.register("sap.ushell.ui5service.UserStatus",new t(i));this.oEventProvider=new r;i.prototype.AvailableStatus={AVAILABLE:"AVAILABLE",AWAY:"AWAY",BUSY:"BUSY",APPEAR_OFFLINE:"APPEAR_OFFLINE"}},exit:function(){this.oEventProvider.destroy()}});i.prototype.setEnabled=function(e){this.oEventProvider.fireEvent(s.serviceStateChanged,{data:e});i.prototype.isEnabled=e;return};i.prototype.setStatus=function(e){if(!i.prototype.isEnabled){throw new Error("Unable to change status because the UserStatus service is disabled.")}if(!i.prototype.AvailableStatus[e]&&e!==null){throw new Error("Enter a valid status.")}this.oEventProvider.fireEvent(s.statusChanged,{data:e})};i.prototype.attachStatusChanged=function(e){this.oEventProvider.attachEvent(s.statusChanged,e)};i.prototype.detachStatusChanged=function(e){this.oEventProvider.detachEvent(s.statusChanged,e)};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/_ShellUIService/shelluiservice.class.factory", ["sap/ui/base/EventProvider","sap/ui/thirdparty/hasher","sap/base/util/isPlainObject","sap/base/util/Version","sap/base/Log","sap/ushell/utils/UrlParsing","sap/ui/core/Configuration"],function(e,t,n,r,i,a,o){"use strict";return function(s){var c=s.serviceRegistry,l=s.serviceFactory,u=s.service;var h;var d=new e;var p={hierarchyChanged:"hierarchyChanged",relatedAppsChanged:"relatedAppsChanged",titleChanged:"titleChanged",backNavigationChanged:"backNavigationChanged"};var v;var f=u.extend("sap.ushell.ui5service.ShellUIService",{init:function(){var e=this,t=this.getInterface();t.init=function(){e._amendPublicServiceInstance.call(e,this)};c.register("sap.ushell.ui5service.ShellUIService",new l(t))},_setActiveComponentId:function(e){v=e},_getActiveComponentId:function(){return v},_shouldEnableAutoHierarchy:function(e){return typeof e.getManifestEntry==="function"&&e.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setHierarchy")==="auto"},_shouldEnableAutoTitle:function(e){return typeof e.getManifestEntry==="function"&&e.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setTitle")==="auto"},_enableAutoHierarchy:function(e){var t=this;var n=e.getRouter&&e.getRouter();if(!n){i.error("Could not enable automatic setHierarchy on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return}n.attachTitleChanged(function(e){var n=e.getParameter("history");t.setHierarchy(n.reverse().map(function(e){var n=t._getCurrentShellHashWithoutAppRoute();return{title:e.title,intent:n+"&/"+e.hash}}))})},_enableAutoTitle:function(e){var t=this;var n=e.getRouter&&e.getRouter();if(!n){i.error("Could not enable automatic setTitle on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return}var r=n.getTitleHistory()[0];if(r&&r.title){setTimeout(function(){t.setTitle(r.title)},0)}n.attachTitleChanged(function(e){var n=e.getParameter("title");t.setTitle(n)})},_getCurrentShellHashWithoutAppRoute:function(){var e="#"+t.getHash();var n=a.getShellHash(e);if(!n){i.error("Cannot get the current shell hash","UrlParsing service returned a falsy value for "+e,"sap.ushell.ui5service.ShellUIService");return""}return"#"+n},_getEventProvider:function(){return d},_getLastSetTitle:function(){return h},_ensureArrayOfObjectOfStrings:function(e,t){var r=Array.isArray(e)&&e.every(function(e){return n(e)&&Object.keys(e).length>0&&Object.keys(e).every(function(t){return typeof e[t]==="string"})});if(!r){i.error("'"+t+"' was called with invalid parameters","An array of non-empty objects with string values is expected","sap.ushell.ui5service.ShellUIService")}return r},_ensureFunction:function(e,t){var n=typeof e;if(n!=="function"){i.error("'"+t+"' was called with invalid arguments","the parameter should be a function, got '"+n+"' instead","sap.ushell.ui5service.ShellUIService");return false}return true},_ensureString:function(e,t){var n=typeof e;if(n!=="string"){i.error("'"+t+"' was called with invalid arguments","the parameter should be a string, got '"+n+"' instead","sap.ushell.ui5service.ShellUIService");return false}return true},_addCallAllowedCheck:function(e,t){var n=this;e[t]=function(){var r=e.getContext();if(!r||r.scopeObject.getId()!==v){i.warning("Call to "+t+" is not allowed","This may be caused by an app component other than the active '"+v+"' that tries to call the method","sap.ushell.ui5service.ShellUIService");return undefined}if(t==="setHierarchy"&&r.scopeType==="component"&&r.scopeObject&&n._shouldEnableAutoHierarchy(r.scopeObject)){i.warning("Call to "+t+" is not allowed","The app defines that setHierarchy should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined}if(t==="setTitle"&&r.scopeType==="component"&&r.scopeObject&&n._shouldEnableAutoTitle(r.scopeObject)){i.warning("Call to "+t+" is not allowed","The app defines that setTitle should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined}return n[t].apply(e,arguments)}},_amendPublicServiceInstance:function(e){var t=this,n;n=e.getContext();if(typeof n==="undefined"){return}["setTitle","setHierarchy","setRelatedApps","setBackNavigation"].forEach(function(n){t._addCallAllowedCheck(e,n)});var r=n.scopeObject;if(n.scopeType==="component"&&r){this._setActiveComponentId(r.getId());if(this._shouldEnableAutoHierarchy(r)){this._enableAutoHierarchy(r)}if(this._shouldEnableAutoTitle(r)){this._enableAutoTitle(r)}return}i.error("Invalid context for ShellUIService interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.ui5service.ShellUIService")},setHierarchy:function(e){if(typeof e!=="undefined"&&!f.prototype._ensureArrayOfObjectOfStrings(e,"setHierarchy")){return}var t=this.getContext().scopeObject;d.fireEvent(p.hierarchyChanged,{data:e,component:t})},setTitle:function(e){if(typeof e!=="undefined"&&!f.prototype._ensureString(e,"setTitle")){return}var t=this.getContext().scopeObject,n;h=e;n={data:e,component:t};if(typeof arguments[1]==="boolean"&&arguments[1]){n.bAcceptEmptyString=true}d.fireEvent(p.titleChanged,n)},setBackNavigation:function(e){if(typeof e!=="undefined"&&!f.prototype._ensureFunction(e,"setBackNavigation")){return}var t=this.getContext().scopeObject;d.fireEvent(p.backNavigationChanged,{data:e,component:t})},getTitle:function(){return this._getLastSetTitle()},setRelatedApps:function(e){if(typeof e!=="undefined"&&!f.prototype._ensureArrayOfObjectOfStrings(e,"setRelatedApps")){return}var t=this.getContext().scopeObject;d.fireEvent(p.relatedAppsChanged,{data:e,component:t})},getUxdVersion:function(){if(new r(o.getVersion()).compareTo("1.37.0")>=0){return 2}return 1},_attachHierarchyChanged:function(e){this._getEventProvider().attachEvent(p.hierarchyChanged,e)},_detachHierarchyChanged:function(e){this._getEventProvider().detachEvent(p.hierarchyChanged,e)},_attachTitleChanged:function(e){this._getEventProvider().attachEvent(p.titleChanged,e)},_attachBackNavigationChanged:function(e){this._getEventProvider().attachEvent(p.backNavigationChanged,e)},_detachBackNavigationChanged:function(e){this._getEventProvider().detachEvent(p.backNavigationChanged,e)},_detachTitleChanged:function(e){this._getEventProvider().detachEvent(p.titleChanged,e)},_attachRelatedAppsChanged:function(e){this._getEventProvider().attachEvent(p.relatedAppsChanged,e)},_detachRelatedAppsChanged:function(e){this._getEventProvider().detachEvent(p.relatedAppsChanged,e)}});return f}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils", ["sap/base/Log","sap/base/util/ObjectPath","sap/base/util/uid","sap/base/util/UriParameters","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/utils/clone","sap/ushell/utils/UrlParsing","sap/ushell/utils/objectOperations","sap/ushell/utils/type","sap/ui/core/Configuration"],function(e,t,r,n,i,jQuery,a,o,s,u,l,c){"use strict";var f={};f.isArray=l.isArray;f.isPlainObject=l.isPlainObject;f.isDefined=l.isDefined;f.clone=o;f.getMember=u.getMember;f.updateProperties=u.updateProperties;f.getNestedObjectProperty=u.getNestedObjectProperty;f.removeDuplicatedActions=function(e){if(Array.isArray(e)){var t=e.reduce(function(e,t){if(e.indexOf(t)<0){e.push(t)}return e},[]);return t}return e};f.storeSapSystemData=function(t,r){var n,i,a,o=[t.id];if(arguments.length>1){o.unshift(r)}try{a=JSON.stringify(t)}catch(t){e.error("Cannot stringify and store expanded system data: "+t)}if(a){i=f.getLocalStorage();n=f.generateLocalStorageKey("sap-system-data",o);i.setItem(n,a)}};f.getLocalSystemInSidFormat=function(){var e=sap.ushell.Container.getLogonSystem(),t=e.getName(),r=e.getClient();return"sid("+t+"."+r+")"};f.matchesLocalSid=function(e){return f.getLocalSystemInSidFormat().toLowerCase()===e.toLowerCase()};f.storeSapSystemToLocalStorage=function(e){var t=(e||{}).params;if(!t||!t.hasOwnProperty("sap-system")){return}if(f.isPlainObject(t["sap-system"])){var r=t["sap-system"],n=t["sap-system-src"];if(typeof n==="string"){f.storeSapSystemData(r,n);t["sap-system-src"]=n}else{f.storeSapSystemData(r)}t["sap-system"]=r.id}else if(f.matchesLocalSid(t["sap-system"])){delete t["sap-system"]}};f.setPerformanceMark=function(e,t){if(performance&&performance.mark){if(!t){t={}}if(t.bUseUniqueMark){if(t.bUseLastMark){performance.clearMarks(e)}else if(performance.getEntriesByName(e,"mark").length>0){return}}performance.mark(e)}};f.setPerformanceMeasure=function(e,t,r){if(performance&&performance.measure&&t&&r){performance.measure(e,t,r)}};f.Error=function(t,r){this.name="sap.ushell.utils.Error";this.message=t;e.error(t,null,r)};f.Error.prototype=new Error;f.localStorageSetItem=function(t,r,n){var i;try{localStorage.setItem(t,r);if(n){i=document.createEvent("StorageEvent");i.initStorageEvent("storage",false,false,t,"",r,"",localStorage);dispatchEvent(i)}}catch(t){e.warning("Error calling localStorage.setItem(): "+t,null,"sap.ushell.utils")}};f.getLocalStorage=function(){return window.localStorage};f.getLocalStorageItem=function(e){return window.localStorage.getItem(e)};f.generateUniqueId=function(e){var t,r,n;if(Array.isArray(e)){r=e;n=function(e){return r.indexOf(e)===-1}}else{n=e}do{t=f._getUid()}while(!n(t));return t};f._getUid=function(){return r()};f.reload=function(){location.reload()};f.calculateOrigin=function(e){var t;if(e.origin){return e.origin}if(e.protocol&&e.hostname){return e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")}if(e.href){t=new a(e.href);return t.protocol()+"://"+t.hostname()+(t.port()?":"+t.port():"")}return undefined};f.getPrivateEpcm=function(){if(window.external&&window.external&&typeof window.external.getPrivateEpcm!=="undefined"){return window.external.getPrivateEpcm()}return undefined};f.hasNativeNavigationCapability=function(){return f.isFeatureBitEnabled(1)};f.getShellType=function(){return f.isFeatureBitEnabled(1)?"NWBC":"FLP"};f.hasNativeLogoutCapability=function(){return f.isFeatureBitEnabled(2)};f.hasNavigationModeCapability=function(){return f.isFeatureBitEnabled(4)};f.hasFLPReadyNotificationCapability=function(){return f.isFeatureBitEnabled(8)};f.hasFLPReady2NotificationCapability=function(){return f.isFeatureBitEnabled(16)};f.isFeatureBitEnabled=function(t){var r="0",n;n=f.getPrivateEpcm();if(n){try{r=n.getNwbcFeatureBits();e.debug("Detected epcm getNwbcFeatureBits returned feature bits: "+r)}catch(t){e.error("failed to get feature bit vector via call getNwbcFeatureBits on private epcm object",t.stack,"sap.ushell.utils")}}return(parseInt(r,16)&t)>0};f.isApplicationTypeEmbeddedInIframe=function(e){return e==="NWBC"||e==="TR"||e==="WCF"};f.appendSapShellParam=function(e,t){var r=t==="TR"?"":"-NWBC",n=f.getUi5Version();if(n){e+=e.indexOf("?")>=0?"&":"?";e+="sap-shell="+encodeURIComponent("FLP"+n+r)}return e};function p(e){var t=/\d+\.\d+\.\d+/.exec(e);if(t&&t[0]){return t[0]}return undefined}f.getUi5VersionAsync=function(){return new Promise(function(t,r){sap.ui.require(["sap/ui/VersionInfo"],function(r){r.load().then(function(e){t(p(e.version))}).catch(function(){e.error("sap ui version could not be determined, using Configuration.getVersion() (core version) as fallback");t(p(c.getVersion()))})})})};f.getUi5Version=function(){var t;try{t=sap.ui.getVersionInfo().version}catch(r){e.error("sap ui version could not be determined, using Configuration.getVersion() (core version) as fallback "+r);t=c.getVersion()}return p(t)};f.isNativeWebGuiNavigation=function(e){var r=t.get("applicationType",e);var n=t.get("appCapabilities.nativeNWBCNavigation",e);if(this.hasNativeNavigationCapability()&&(r==="TR"||n)){return true}return false};f.Map=function(){this.entries={}};f.Map.prototype.put=function(e,t){var r=this.get(e);this.entries[e]=t;return r};f.Map.prototype.containsKey=function(e){if(typeof e!=="string"){throw new f.Error("Not a string key: "+e,"sap.ushell.utils.Map")}return Object.prototype.hasOwnProperty.call(this.entries,e)};f.Map.prototype.get=function(e){if(this.containsKey(e)){return this.entries[e]}};f.Map.prototype.keys=function(){return Object.keys(this.entries)};f.Map.prototype.remove=function(e){delete this.entries[e]};f.Map.prototype.toString=function(){var e=["sap.ushell.utils.Map("];e.push(JSON.stringify(this.entries));e.push(")");return e.join("")};f.getParameterValueBoolean=function(e,t){var r=n.fromQuery(t||window.location.search),i=r.getAll(e),a=["true","x"],o=["false",""],s;if(!i||i.length===0){return undefined}s=i[0].toLowerCase();if(a.indexOf(s)>=0){return true}if(o.indexOf(s)>=0){return false}return undefined};f.call=function(t,r,n){var i;if(n){setTimeout(function(){f.call(t,r,false)},0);return}try{t()}catch(t){i=t.message||t.toString();e.error("Call to success handler failed: "+i,t.stack,"sap.ushell.utils");if(r){r(i)}}};f.handleTilesVisibility=function(){f.getVisibleTiles()};f.refreshTiles=function(){sap.ui.getCore().getEventBus().publish("launchpad","refreshTiles")};f.setTilesNoVisibility=function(){sap.ui.getCore().getEventBus().publish("launchpad","setTilesNoVisibility")};f.getBasicHash=function(t){if(!f.validHash(t)){e.debug("Utils ; getBasicHash ; Got invalid hash");return false}var r=s.parseShellHash(t);return r?r.semanticObject+"-"+r.action:t};f.validHash=function(e){return e&&e.constructor===String&&e.trim()!==""};f.getFormFactor=function(){var e=i.system;if(e.desktop){return e.SYSTEMTYPE.DESKTOP}if(e.tablet){return e.SYSTEMTYPE.TABLET}if(e.phone){return e.SYSTEMTYPE.PHONE}return undefined};f.getVisibleTiles=function(){var e=document.body.clientHeight;var t=sap.ui.getCore().byId("dashboardGroups");var r=sap.ui.getCore().byId("viewPortContainer");var n=0;var i=[];var a=[];var o=sap.ui.getCore().getEventBus();var s,u,l,c,p,d,g,h,m,y,v,b,w,S,E,C,T;if(window.document.hidden){o.publish("launchpad","onHiddenTab")}if(t&&t.getGroups()&&r){b=jQuery(t.getDomRef());w=b?b.is(":visible"):false;S=t.getGroups();for(s=0;s<S.length;s=s+1){c=S[s];p=c.getTiles();d=c.getLinks();E=[p,d];for(l=0;l<E.length;l++){C=E[l];if(C){for(u=0;u<C.length;u++){g=C[u];if(!w||window.document.hidden){i.push(g)}else{h=jQuery(g.getDomRef());m=h.offset();if(m){y=h.offset().top;v=y+h.height();T=c.getVisible()&&v>n-300&&y<e+300;if(T){a.push({oTile:f.getTileModel(g),iGroup:s,bIsExtanded:!(v>n)||!(y<e)})}else if(a.length>0){o.publish("launchpad","visibleTilesChanged",a);return i}i.push(g)}}}}}}}if(a.length>0){o.publish("launchpad","visibleTilesChanged",a)}return i};f.getTileModel=function(e){var t;if(e.isA("sap.ui.integration.widgets.Card")){t=e.getBindingContext("ushellCardModel")}else{t=e.getBindingContext()}return t.getObject()?t.getObject():null};f.getTileObject=function(e){var t;if(e.isA("sap.ui.integration.widgets.Card")){t=e.getBindingContext("ushellCardModel")}else{t=e.getBindingContext()}return t.getObject()?t.getObject().object:null};f.recalculateBottomSpace=function(){var e=jQuery("#dashboardGroups").find(".sapUshellTileContainer:visible"),t=e.last(),r=jQuery(".sapUshellShellHead > header").height(),n=t.parent().height(),i=parseInt(t.find(".sapUshellContainerTitle").css("margin-top"),10),a=parseInt(jQuery(".sapUshellDashboardGroupsContainer").css("padding-bottom"),10),o;if(e.length===1){o=0}else{o=jQuery(window).height()-r-n-i-a;o=o<0?0:o}jQuery(".sapUshellDashboardGroupsContainer").css("margin-bottom",o+"px")};f.calcVisibilityModes=function(e,t){var r=true,n=true,a=e.pendingLinks&&e.pendingLinks.length?e.pendingLinks:e.links,o=f.groupHasVisibleTiles(e.tiles,a);if(!o&&(!t||e.isGroupLocked||e.isDefaultGroup||i.system.phone||i.system.tablet&&!i.system.desktop)){r=false}if(!o&&!t){n=false}return[r,n]};f.groupHasVisibleTiles=function(e,t){var r=false,n,i,a=!e?[]:e,o=!t?[]:t;a=a.concat(o);if(!a.length){return false}for(n=0;n<a.length;n=n+1){i=a[n];if(i.isTileIntentSupported){r=true;break}}return r};f.invokeUnfoldingArrayArguments=function(t,r){var n=this,i,a,o,s,u;if(!Array.isArray(r[0])){return t.apply(this,r)}i=r[0];if(i.length===0){return(new jQuery.Deferred).resolve([]).promise()}a=new jQuery.Deferred;o=[];s=[];u=(new jQuery.Deferred).resolve();i.forEach(function(r,i){if(!Array.isArray(r)){var a="Expected Array as nTh Argument of multivalue invocation: "+"first Argument must be array of array of arguments: single valued f(p1,p2), f(p1_2,p2_2), f(p1_3,p2_3) : "+"multivalued : f([[p1,p2],[p1_2,p2_2],[p1_3,p2_3]]";e.error(a);throw new Error(a)}var l=t.apply(n,r),c=new jQuery.Deferred;l.done(function(){var e=Array.prototype.slice.call(arguments);s[i]=e;c.resolve()}).fail(c.reject.bind(c));o.push(c.promise());u=jQuery.when(u,c)});jQuery.when.apply(jQuery,o).done(function(){a.resolve(s)}).fail(function(){a.reject("failure")});return a.promise()};f._getCurrentDate=function(){return new Date};f._convertToUTC=function(e){return Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())};f.formatDate=function(e){var t,r,n,i,a,o;var s=sap.ui.require("sap/ushell/resources");if(!s){throw new Error("sap/ushell/resources was not required before utils.formatDate usage!")}t=f._convertToUTC(new Date(e));r=f._convertToUTC(f._getCurrentDate());n=r-t;i=parseInt(n/(1e3*60*60*24),10);if(i>0){if(i===1){return s.i18n.getText("time_day",i)}return s.i18n.getText("time_days",i)}a=parseInt(n/(1e3*60*60),10);if(a>0){if(a===1){return s.i18n.getText("time_hour",a)}return s.i18n.getText("time_hours",a)}o=parseInt(n/(1e3*60),10);if(o>0){if(o===1){return s.i18n.getText("time_minute",o)}return s.i18n.getText("time_minutes",o)}return s.i18n.getText("just_now")};f.toExternalWithParameters=function(e,t,r){return Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("CrossApplicationNavigation")]).then(function(n){var i=n[0];var a=n[1];var o={};var s=t.split("&/");if(s.length>1){o.appSpecificRoute="&/"+s[1]}o.target={semanticObject:e,action:s[0]};if(r&&r.length>0){o.params={};r.forEach(function(e){o.params[e.Key]=e.Value})}return a.toExternal({target:{shellHash:i.constructShellHash(o)}})})};f.moveElementInsideOfArray=function(e,t,r){if(!f.isArray(e)||t===undefined||r===undefined){throw new Error("Incorrect input parameters passed")}if(t>=e.length||r>=e.length||r<0||t<0){throw new Error("Index out of bounds")}var n=e.splice(t,1)[0];e.splice(r,0,n);return e};f.shallowMergeObject=function(e){return Array.prototype.slice.call(arguments,1,arguments.length).map(function(e){return{sourceObject:e,properties:Object.keys(e)}}).reduce(function(e,t){t.properties.forEach(function(r){e[r]=t.sourceObject[r]});return e},e)};f.getLocationHref=function(){return window.location.href};f.getLocationSearch=function(){return window.location.search};f.windowLocationReload=function(){window.location.reload(true)};f.windowLocationAssign=function(e){window.location.assign(e)};f.generateLocalStorageKey=function(e,t){var r=t.length;if(r===0){throw new Error("At least one id should be provided when generating the local storage key")}var n="$";if(r===2){n="#"}else if(r>2){n="@"+r+"@"}return e+n+t.join(":")};f.urlParametersToString=function(e,t,r){return s.privparamsToString(e,t,r)};f.isRootIntent=function(e){if(typeof e!=="string"){throw new Error("The given intent must be a string")}var r="renderers.fiori2.componentData.config.rootIntent";var n=t.get(r,window["sap-ushell-config"])||"#Shell-home";var i=n.replace("#","");var a=e.replace("#","");return a===""||a===i};f.isFlpHomeIntent=function(e){if(!e){e=window.location.hash;if(!e){e=t.get("renderers.fiori2.componentData.config.rootIntent",window["sap-ushell-config"])||"Shell-home"}}else if(typeof e!=="string"){throw new Error("The given intent must be a string")}var r=e.replace("#","");return r.indexOf("Shell-home")===0||r.indexOf("Launchpad-openFLPPage")===0||r.indexOf("Launchpad-openWorkPage")===0};f.generateRandomKey=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var t="";var r=new window.Uint32Array(40);window.crypto.getRandomValues(r);var n=function(t){var n=r[t]%e.length;return e[n]};while(t.length<40){t+=n(t.length)}return t};f.copyToClipboard=function(e){var t;var r=document.createElement("textarea");try{r.contentEditable=true;r.readonly=false;r.textContent=e;document.documentElement.appendChild(r);r.select();document.execCommand("copy");t=true}catch(e){t=false}finally{r.parentNode.removeChild(r)}return t};f._getUserSettingPersContainer=function(){return sap.ushell.Container.getServiceAsync("Personalization").then(function(e){var t={container:"sap.ushell.usersettings.personalization",item:"data"};var r={validity:"Infinity",keyCategory:e.constants.keyCategory.GENERATED_KEY,writeFrequency:e.constants.writeFrequency.HIGH,clientStorageAllowed:false};return e.getPersonalizer(t,r)})};f.getHideEmptySpacesEnabled=function(){return new Promise(function(e){sap.ui.require(["sap/ushell/Config"],function(t){e(t)})}).then(function(e){var t=e.last("/core/spaces/hideEmptySpaces/enabled");if(!t){return Promise.resolve(false)}return f._getUserSettingPersContainer().then(function(e){return new Promise(function(t,r){e.getPersData().done(t).fail(r)})}).then(function(t){var r=(t||{}).hideEmptySpaces!==false;if(e.last("/core/spaces/hideEmptySpaces/userEnabled")!==r){e.emit("/core/spaces/hideEmptySpaces/userEnabled",r)}return r})})};f.setHideEmptySpacesEnabled=function(e){return new Promise(function(e){sap.ui.require(["sap/ushell/Config"],function(t){e(t)})}).then(function(t){var r=t.last("/core/spaces/hideEmptySpaces/enabled");if(!r){return Promise.resolve()}return f._getUserSettingPersContainer().then(function(r){return new Promise(function(e,t){r.getPersData().done(e).fail(t)}).then(function(n){n=n||{};var i=n.hideEmptySpaces!==false;if(i===!!e){return Promise.resolve()}n.hideEmptySpaces=e;return new Promise(function(e,t){r.setPersData(n).done(e).fail(t)}).then(function(){t.emit("/core/spaces/hideEmptySpaces/userEnabled",e)})})})})};f.sanitizeTimeoutDelay=function(e){if(typeof e!=="number"){throw new Error("Invalid type! Expected type 'number'.")}var t=2147483647;return e>t?t:e};return f},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/AppType", ["sap/ushell/library","sap/ushell/resources"],function(e,t){"use strict";var p=e.AppType;var r={};r.getDisplayName=function(e){switch(e){case p.OVP:return t.i18n.getText("Apptype.OVP");case p.SEARCH:return t.i18n.getText("Apptype.SEARCH");case p.FACTSHEET:return t.i18n.getText("Apptype.FACTSHEET");case p.COPILOT:return t.i18n.getText("Apptype.COPILOT");case p.URL:return t.i18n.getText("Apptype.URL");default:return t.i18n.getText("Apptype.APP")}};return r});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/DynamicTileRequest", ["sap/ushell/utils/HttpClient","sap/ui/thirdparty/URI","sap/base/util/isEmptyObject","sap/base/util/UriParameters","sap/base/Log","sap/ui/core/Configuration","sap/base/util/ObjectPath"],function(e,t,n,r,s,i,a){"use strict";var o="sap.ushell.utils.DynamicTileRequest";function u(e,t,n,r,i){this.fnSuccess=t;this.fnError=n;this.sUrl=e;this._sODataVersion=a.get(["dataSource","settings","odataVersion"],i);this._bResolveSemanticDateRanges=true;this.oReferenceResolverPromise=sap.ushell.Container.getServiceAsync("ReferenceResolver");this.oPromise=this._resolveUserDefaults(e,r).then(function(e){if(e){this.sUrlResolvedUserDefaults=e;this.refresh()}}.bind(this)).catch(function(e){s.error("Was not able to create a DynamicTileRequest:",e,o)})}u.prototype.refresh=function(){if(!this.oRequest){this.oRequest=this._resolveSemanticDateRanges().then(function(e){if(e){return this._sendRequest(e)}}.bind(this))}};u.prototype._resolveSemanticDateRanges=function(){if(!this._bResolveSemanticDateRanges){return Promise.resolve(this.sUrlResolvedUserDefaults)}return this.oReferenceResolverPromise.then(function(e){return e.resolveSemanticDateRanges(this.sUrlResolvedUserDefaults,this._sODataVersion)}.bind(this)).then(function(e){if(e.ignoredReferences&&e.ignoredReferences.length>0||e.invalidSemanticDates&&e.invalidSemanticDates.length>0){var t=[].concat(e.invalidSemanticDates||[],e.ignoredReferences||[]);s.error("The service URL contains invalid Reference(s): "+t.join(", "),"",o);return}this._bResolveSemanticDateRanges=e.hasSemanticDateRanges;return e.url}.bind(this)).catch(function(e){s.error("Could not resolve semantic date ranges:",e,o);return Promise.reject(e)})};u.prototype._sendRequest=function(n){var r=new t(n).escapeQuerySpace(false);var s=i.getSAPLogonLanguage();if(s&&!r.hasQuery("sap-language")){r.addQuery("sap-language",s)}var a=false;if(r.is("relative")){a=true;r=r.absoluteTo(location.href)}var o=this._getHeaders(a);this.oConfig={headers:o};this._sUrlBasePath=r.origin();this._sUrlRequest=r.href();this.oClient=new e(this._sUrlBasePath,this.oConfig);return this.oClient.get(r.relativeTo(this._sUrlBasePath).href()).then(this._onSuccess.bind(this)).catch(this._onError.bind(this))};u.prototype.abort=function(){if(this.oRequest&&this.oClient){this.oClient.abortAll();this.oClient=null;this.oRequest=null;return true}return false};u.prototype._onSuccess=function(e){var t;try{t=JSON.parse(e.responseText)}catch(e){throw new Error("Was not able to parse response of dynamic tile request")}this.oClient=null;this.oRequest=null;var n;if(typeof t==="object"){t=t.d?t.d:t;var s=r.fromURL(this._sUrlRequest);if(s.get("$inlinecount")==="allpages"){n={number:t.__count}}else if(s.get("$count")==="true"){n={number:t["@odata.count"]}}else{n=this._extractData(t)}}else if(typeof t==="string"||typeof t==="number"){n={number:t}}this.fnSuccess(n)};u.prototype._onError=function(e){this.oClient=null;this.oRequest=null;this.fnError(e)};u.prototype._extractData=function(e){var t=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];var r=Object.keys(e).reduce(function(n,r){if(t.indexOf(r)>-1){n[r]=e[r]}return n},{});if(!n(r)){return r}var s=Object.keys(e)[0];if(s!==undefined&&Object.keys(e).length===1){return Object.keys(e[s]).reduce(function(n,r){if(t.indexOf(r)>-1){n[r]=e[s][r]}return n},{})}return{}};u.prototype._getHeaders=function(e){var t={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":i.getLanguage()||"",Accept:"application/json, text/plain"};var n=i.getSAPLogonLanguage();if(n){t["sap-language"]=n}if(e){var r=sap.ushell.Container.getLogonSystem();var s=r&&r.getClient();if(s){t["sap-client"]=s}}return t};u.prototype._resolveUserDefaults=function(e,t){var n;return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return Promise.all([e.getSystemContext(t),this.oReferenceResolverPromise])}.bind(this)).then(function(t){var r=t[0];n=t[1];return new Promise(function(t,s){n.resolveUserDefaultParameters(e,r).done(t).fail(s)})}).then(function(e){if(e.defaultsWithoutValue&&e.defaultsWithoutValue.length>0){s.error("The service URL contains User Default(s) with no set value: "+e.defaultsWithoutValue.join(", "),"",o);return}if(e.ignoredReferences&&e.ignoredReferences.length>0){var t=e.ignoredReferences.filter(function(e){return!e.startsWith("DynamicDate")});if(t.length>0){s.error("The service URL contains invalid Reference(s): "+t.join(", "),"",o);return}}return e.url})};u.prototype.destroy=function(){this.abort();this.fnError=null;this.fnSuccess=null};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/HttpClient", ["sap/ui/core/Configuration","sap/ui/thirdparty/URI","sap/ushell/utils"],function(e,t,s){"use strict";var r=function(e,s){this._oOngoingRequests={};this._oCSRFTokens={};this._oDefaultOptions={headers:s&&s.headers||{}};if(typeof e==="string"){this._oBasePath=new t(e)}else{this._oDefaultOptions={headers:e&&e.headers||{}}}};r.prototype.get=function(e,t){return this._executeRequest("GET",e,t)};r.prototype.put=function(e,t){return this._executeRequest("PUT",e,t)};r.prototype.post=function(e,t){return this._executeRequest("POST",e,t)};r.prototype.patch=function(e,t){return this._executeRequest("PATCH",e,t)};r.prototype.delete=function(e,t){return this._executeRequest("DELETE",e,t)};r.prototype.options=function(e,t){return this._executeRequest("OPTIONS",e,t)};r.prototype.abortAll=function(){Object.keys(this._oOngoingRequests).forEach(function(e){this._oOngoingRequests[e].abort()}.bind(this))};r.prototype._executeRequest=function(r,o,n){var i=new Error("The provided resource path is not a valid URL.");var a={};var u=e.getStatisticsEnabled();if(u){a["sap-statistics"]=u}try{var h;var c=new t(o);if(!c.is("url")){return Promise.reject(i)}if(this._oBasePath){h=c.absoluteTo(this._oBasePath)}else{h=c}var d=new XMLHttpRequest;d._sapUshellHttpClientId=s.generateUniqueId(Object.keys(this._oOngoingRequests));this._oOngoingRequests[d._sapUshellHttpClientId]=d;var f=Object.assign({},a,this._oDefaultOptions.headers,n&&n.headers);return this._getCSRFTokenHeader(r,h).then(function(e){Object.assign(f,e);return new Promise(function(e,t){var s=h.href();d.onload=this._onLoad.bind(this,e,t,{xhr:d,method:r,url:s,data:n});d.onerror=function(){t.call(this,this._getFormattedResponse(d))}.bind(this);d.onabort=function(){d.bAborted=true;t.call(this,this._getFormattedResponse(d))}.bind(this);d.onloadend=function(){delete this._oOngoingRequests[d._sapUshellHttpClientId]}.bind(this);d.open(r,s);Object.keys(f).forEach(function(e){d.setRequestHeader(e,f[e])});var o=n&&n.data||"";if(typeof o!=="string"){o=JSON.stringify(o)}d.send(o)}.bind(this))}.bind(this))}catch(e){return Promise.reject(i)}};r.prototype._getCSRFTokenHeader=function(e,t){var s="",r="";switch(e){case"HEAD":case"GET":case"OPTIONS":return Promise.resolve({"x-csrf-token":"fetch"});case"POST":s=this._getCSRFTokenKey(t);if(this._oCSRFTokens[s]){return Promise.resolve({"x-csrf-token":this._oCSRFTokens[s]})}r=t.href();if(this._oBasePath){r=this._oBasePath.origin()+this._oBasePath.directory()}return this._executeRequest("HEAD",r).then(function(e){var t=this._getCSRFTokenFromHeader(e.responseHeaders);if(!t){throw new Error("CSRF Token couldn't be fetched.")}return{"x-csrf-token":t}}.bind(this));case"PATCH":case"PUT":case"DELETE":s=this._getCSRFTokenKey(t);if(this._oCSRFTokens[s]){return Promise.resolve({"x-csrf-token":this._oCSRFTokens[s]})}r=t.href();if(this._oBasePath){r=this._oBasePath.origin()+this._oBasePath.directory()}return this._executeRequest("OPTIONS",r).then(function(e){var t=this._getCSRFTokenFromHeader(e.responseHeaders);if(!t){throw new Error("CSRF Token couldn't be fetched.")}return{"x-csrf-token":t}}.bind(this));default:return Promise.resolve({})}};r.prototype._onLoad=function(e,s,r){var o=this._getFormattedResponse(r.xhr);var n=this._getCSRFTokenFromHeader(o.responseHeaders);if(n){var i=this._getCSRFTokenKey(new t(r.url));if(n.toLowerCase()==="required"&&o.status===403){delete this._oCSRFTokens[i];return this._executeRequest(r.method,r.url,r.data).then(e).catch(s)}this._oCSRFTokens[i]=n}if(o.status>=200&&o.status<300){return e(o)}return s(o)};r.prototype._getCSRFTokenKey=function(e){if(this._oBasePath){return this._oBasePath.origin()+this._oBasePath.directory()}return e.origin()+e.directory()};r.prototype._getCSRFTokenFromHeader=function(e){var t=e.filter(function(e){return e.name==="x-csrf-token"})[0];return t&&t.value};r.prototype._getFormattedResponse=function(e){return{aborted:e.bAborted||false,status:e.status,statusText:e.statusText,responseText:e.responseText,responseHeaders:e.getAllResponseHeaders().split(/\r\n/g).filter(function(e){return e.length>0}).map(function(e){var t=e.split(":");return{name:t[0].trim(),value:t[1].trim()}})}};return r},true);
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/RestrictedJSONModel", ["sap/ui/model/json/JSONModel"],function(t){"use strict";function e(){throw new Error("sap.ushell.utils.RestrictedJSONModel : Function not supported")}return t.extend("sap.ushell.utils.RestrictedJSONModel",{constructor:function(){t.prototype.constructor.apply(this,arguments);this.setDefaultBindingMode("OneWay");this.setDefaultBindingMode=e;this.setData=e;this.setJSON=e;this.setProperty=e;this.loadData=e},_setData:function(){t.prototype.setData.apply(this,arguments)},_setJSON:function(){this.setData=t.prototype.setData;t.prototype.setJSON.apply(this,arguments);this.setData=e},_setProperty:function(){this.setData=t.prototype.setData;t.prototype.setProperty.apply(this,arguments);this.setData=e}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/UrlParsing", ["sap/ui/thirdparty/URI","sap/base/util/UriParameters","sap/base/Log"],function(e,t,n){"use strict";function r(){}var a=/^(([A-Za-z0-9_/]+)-([A-Za-z0-9_/-]+)(~([A-Z0-9a-z=+/]+))?)?([?]([^&]|(&[^/]))*&?)?$/;r.getShellHash=function(e){var t=/[^#]*#(([^&]|&[^/])*)(&\/.*)?/,n=t.exec(e);if(n){return n[1]}return undefined};r.getHash=function(e){var t=/#(.*)/,n=t.exec(e);if(n){return n[1]}return undefined};r.isIntentUrl=function(e){return this._isIntentUrl(e,window.location.href)};r.isIntentUrlAsync=function(e){return new Promise(function(e,t){sap.ushell.Container.getFLPUrlAsync(true).done(e).fail(t)}).then(function(t){return this._isIntentUrl(e,t)}.bind(this))};r._isIntentUrl=function(t,n){var a=/^#/,i,s,o,u,p,c;if(typeof t!=="string"){return false}if(!a.test(t)){i=new e(t).normalize();o=i.protocol()+"://"+i.host()+i.pathname();s=new e(n).normalize();u=s.protocol()+"://"+s.host()+s.pathname();if(o!==u){return false}}p=r.getHash(t);if(!p){return false}c=r.parseShellHash(p);if(c&&c.semanticObject&&c.action){return true}return false};r.parseParameters=function(e){var n=t.fromQuery(e);var r=n.keys();var a=r.next();var i={};while(a.done===false){i[decodeURIComponent(a.value)]=n.getAll(a.value);a=r.next()}return i};function i(e,t,n){var r,a,i,s,o,u="";t=t||"&";n=n||"=";r="";a=null;o=[];for(a in e){if(e.hasOwnProperty(a)){o.push(a)}}o.sort();for(i=0;i<o.length;i=i+1){a=o[i];if(Array.isArray(e[a])){for(s=0;s<e[a].length;s=s+1){u+=r+encodeURIComponent(a)+n+encodeURIComponent(e[a][s]);r=t}}else{u+=r+encodeURIComponent(a)+n+encodeURIComponent(e[a]);r=t}}return u}r.paramsToString=function(e){return i(e)};r.privparamsToString=function(e,t,n){return i(e,t,n)};r.parseShellHash=function(e){var t=a,n,i,s,o,u,p,c;if(!e){return undefined}n=r.splitHash(e);p=t.exec(n.shellPart);if(p){i=p[2];s=p[3];o=p[5];u=p[6];c=r.parseParameters(u);return{semanticObject:i,action:s,contextRaw:o,params:c,appSpecificRoute:n.appSpecificRoute}}if(n.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:n.appSpecificRoute}}return undefined};r.privstripLeadingHash=function(e){if(e[0]==="#"){return e.substring(1)}return e};r.splitHash=function(e){var t=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/,n,r,i;if(e===undefined||e===null||e===""){return{}}n=t.exec(e);r=n[1];if(r!==""&&!a.test(r)){return{}}i=n[2];if(r||i){return{shellPart:r,appSpecificRoute:i}}return{}};function s(e,t){if(t){return e+t}return e}r.constructShellHash=function(e){var t,a,i,o=null,u,p=[],c="?",f=null;if(!e){return""}if(!e.target){e.target={};e.target.semanticObject=e.semanticObject;e.target.action=e.action;e.target.contextRaw=e.contextRaw}if(e.target.shellHash||e.target.shellHash===""){i=r.privstripLeadingHash(e.target.shellHash);return s(i,e.appSpecificRoute)}if(e.target.semanticObject&&e.target.action){t=e.target.semanticObject+"-"+e.target.action.replace(/[?].*/,"")}else{return s("",e.appSpecificRoute)}if(e.target.contextRaw){t+="~"+e.target.contextRaw}c="?";f=null;p=[];for(f in e.params){if(e.params.hasOwnProperty(f)){p.push(f)}}a=e.params&&JSON.parse(JSON.stringify(e.params))||{};if(e.appStateKey){p.push("sap-xapp-state");a["sap-xapp-state"]=e.appStateKey}p.sort();for(u=0;u<p.length;u=u+1){f=p[u];if(Array.isArray(a[f])){if(a[f].length>1){n.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!")}for(o=0;o<a[f].length;o=o+1){t+=c+encodeURIComponent(f)+"="+encodeURIComponent(a[f][o]);c="&"}}else{t+=c+encodeURIComponent(f)+"="+encodeURIComponent(a[f]);c="&"}}return s(t,e.appSpecificRoute)};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/UrlShortening", ["sap/base/Log","sap/ushell/utils/UrlParsing"],function(t,e){"use strict";function a(){var a=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(e,a){var r,s;if(typeof e!=="string"||/^[A-Z0-9]{40,41}$/.test(e)){return e}try{r=JSON.parse(e)}catch(a){t.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return e}s=a&&a.getNextKey();this._storeValue(s,r,a);return s};this.compactHash=function(r,s,i){var n,p,h,c,o,u=[this.ABBREV_PARAM_NAME,"sap-system","sap-xapp-state"];if(s){s.forEach(function(t){u.push(t)})}n=e.parseShellHash(r);if(!n){t.error("the URL "+r+" is not compliant. It may break the product and cause unwanted navigation behavior.");return{hash:r}}c="";if(r.charAt(0)==="#"){c="#"}var f=n&&n.params&&n.params["sap-xapp-state"]&&n.params["sap-xapp-state"][0];if(f){n.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(f,i)];r=c+e.constructShellHash({target:{semanticObject:n.semanticObject,action:n.action,contextRaw:n.contextRaw},params:n.params,appSpecificRoute:n.appSpecificRoute})}if(typeof r!=="string"||r.length<a.URL_LENGTH_LIMIT){return{hash:r}}if(n&&(n.params&&n.params[a.ABBREV_PARAM_NAME])){return{hash:r}}p=i&&i.getNextKey();h=this._splitParameters(n.params,u,p);if(!h.key){return{hash:r}}o=e.paramsToString(h.tailParams);this._storeValue(h.key,o,i);return{hash:c+e.constructShellHash({target:{semanticObject:n.semanticObject,action:n.action,contextRaw:n.contextRaw},params:h.headParams,appSpecificRoute:n.appSpecificRoute}),params:h.headParams,skippedParams:h.tailParams}};this.checkHashLength=function(r){var s,i,n;if(typeof r!=="string"||r.length<a.URL_LENGTH_LIMIT){return{hash:r}}s=e.parseShellHash(r);n="";if(r.charAt(0)==="#"){n="#"}i=this._splitParameters(s.params,[],"DummyKey");if(i.key){t.error("Application startup parameter length exceeds "+a.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete i.headParams[this.ABBREV_PARAM_NAME];return{hash:n+e.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:i.headParams,appSpecificRoute:s.appSpecificRoute}),params:i.headParams,skippedParams:i.tailParams}}t.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:r}};this._findIndex=function(t,e){var a=t.indexOf(e);if(a>=0){return a}a=-1;t.every(function(t,r){if(t.length>0&&t[t.length-1]==="*"&&t.substring(0,t.length-1)===e.substring(0,t.length-1)){a=r;return false}return true});return a};this._cmpByList=function(t,e,a){var r,s;t=t||[];if(e===a){return 0}r=this._findIndex(t,e);s=this._findIndex(t,a);if(r>=0&&s>=0){if(r-s!==0){return r-s}if(e<a){return-1}if(e>a){return+1}return 0}if(r>=0){return-1}if(s>=0){return+1}if(e<a){return-1}return+1};this._sortByPriority=function(t,e){return t.sort(this._cmpByList.bind(this,e))};this._splitParameters=function(e,a,r){var s,i,n,p={},h={},c=false,o,u,f=0,l,m=[];if(!r||typeof r!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!")}for(s in e){if(Object.prototype.hasOwnProperty.call(e,s)){m.push(s)}}m.sort();m=this._sortByPriority(m,a);for(n=0;n<m.length;n=n+1){s=m[n];o=e[s];if(o.length>1){t.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!")}for(i=0;i<o.length;i=i+1){u=e[s][i];l=s.length+u.length;if(l+f>this.URL_PARAMS_LENGTH_LIMIT){if(h[s]){h[s].push(u)}else{h[s]=[u]}c=true}else if(p[s]){p[s].push(u)}else{p[s]=[u]}f=f+l+1}}if(c){p[this.ABBREV_PARAM_NAME]=[r]}return{key:r,tailParams:h,headParams:p}};this.expandHash=function(t){var e=function(t){return a._retrieveValue(t)};return this.expandParamGivenRetrievalFunction(t,this.ABBREV_PARAM_NAME,e)};this.expandParamGivenRetrievalFunction=function(t,a,r){var s,i,n,p,h;if(typeof t!=="string"){return t}s=e.parseShellHash(t);n=s&&s.params&&s.params[a]&&s.params[a][0];if(!n){return t}p="";if(t.charAt(0)==="#"){p="#"}i=r(n);if(!i){return t}h=this._blendParameters(s.params,a,i);return p+e.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:h,appSpecificRoute:s.appSpecificRoute})};this._retrieveValue=function(){return undefined};this._storeValue=function(t,e,a){if(a&&typeof a.store==="function"){a.store(e)}};this._blendParameters=function(t,a,r){var s=e.parseParameters("?"+r),i;delete t[a];for(i in s){if(Object.prototype.hasOwnProperty.call(s,i)){if(t[i]){t[i]=t[i].concat(s[i])}else{t[i]=s[i]}}}return t}}var r=new a;return r},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/WindowUtils", ["sap/base/Log","sap/ui/util/isCrossOriginURL","sap/ushell/utils","sap/base/util/UriParameters"],function(e,r,n,t){"use strict";var i={};i.hasInvalidProtocol=function(e){var r=document.createElement("a");r.setAttribute("href",e);if(r.protocol==="javascript:"){return true}return false};i.isCrossOriginUrl=function(e){return r(e)};i.openURL=function(r,n,t,i){var o=i===undefined?true:i,a=this.isCrossOriginUrl(r);t=t||"";if(o&&this.hasInvalidProtocol(r)){e.fatal("Tried to open a URL with an invalid protocol",null,"sap/ushell/utils/WindowUtils");throw new Error("Tried to open a URL with an invalid protocol")}if(a){if(t.toLowerCase().indexOf("noopener")===-1){if(t!==""){t+=","}t+="noopener"}if(t.toLowerCase().indexOf("noreferrer")===-1){t+=",noreferrer"}window.open(r,n,t);return true}return window.open(r,n,t)};i.getLeanURL=function(r,n){var t=r||n;if(this.hasInvalidProtocol(t)){e.fatal("Tried to construct a lean URL for input containing an invalid protocol",null,"sap/ushell/utils/WindowUtils");return""}if((t||"").charAt(0)!=="#"){return t}var i=window.location.search;if(!i){i="?appState=lean"}else if(i.indexOf("appState=")>=-1){i+="&appState=lean"}return window.location.origin+window.location.pathname+i+t};i._getAdjustedQueryString=function(e,r){if((!e||e.length===0)&&(!r||r.length===0)){return null}var i=t.fromQuery(window.location.search);var o=Array.from(i.keys()).reduce(function(e,r){e[r]=i.getAll(r);return e},{});if(e&&e.length>0){e.forEach(function(e){var r=Object.keys(e)[0];if(r){o[r]=e[r]}})}if(r&&r.length>0){r.forEach(function(e){delete o[e]})}return n.urlParametersToString(o)};i.refreshBrowser=function(e,r){var t=n.getLocationHref();var o=n.getLocationSearch();var a=i._getAdjustedQueryString(e,r);if(a){t=t.replace(o,"?"+a)}if(n.getLocationHref()===t){n.windowLocationReload()}else{n.windowLocationAssign(t)}};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/chipsUtils", ["sap/base/Log","sap/base/util/ObjectPath"],function(e,t){"use strict";var i="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER",r="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER";var n={};n.getCatalogTilePreviewTitle=function(e){var t=n.getBagText(e,"tileProperties","display_title_text");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewTitle()||undefined};n.getCatalogTilePreviewSubtitle=function(e){var t=n.getBagText(e,"tileProperties","display_subtitle_text");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewSubtitle()||undefined};n.getCatalogTilePreviewIcon=function(e){var t=n._getConfigurationProperty(e,"tileConfiguration","display_icon_url");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewIcon()||undefined};n.getCatalogTileTargetURL=function(e){var t=n._getConfigurationProperty(e,"tileConfiguration","navigation_target_url");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getTargetUrl()||undefined};n.getCatalogTileNumberUnit=function(e){return n._getConfigurationProperty(e,"tileConfiguration","display_number_unit")};n.getCatalogTilePreviewInfo=function(e){return n.getBagText(e.getChip(),"tileProperties","display_info_text")};n.getCatalogTileSize=function(e){return n.getTileSize(e)};n.getCatalogTilePreviewIndicatorDataSource=function(e){var t;var i=n._getAppLauncherTileConfiguration(e);if(n._isAppLauncher(e)&&i&&i.service_url){t={path:i.service_url,refresh:i.service_refresh_interval}}return t};n._getConfigurationProperty=function(e,t,i){var r,n;try{r=e.getConfigurationParameter(t);n=JSON.parse(r)}catch(e){return}if(n[i]!==undefined){return n[i]}};n.getBagText=function(e,t,i){if(e.getBagIds().indexOf(t)>-1&&e.getBag(t).getTextNames().indexOf(i)>-1){return e.getBag(t).getText(i)}};n.getTileSize=function(e){var t=!e.isStub()&&e.getConfigurationParameter("row")||"1",i=!e.isStub()&&e.getConfigurationParameter("col")||"1";return t+"x"+i};n._getAppLauncherTileConfiguration=function(t){var i,r=t.getConfigurationParameter("tileConfiguration");try{i=JSON.parse(r||"{}")}catch(i){e.error("Tile with ID '"+t.getId()+"' has a corrupt configuration containing a 'tileConfiguration' value '"+r+"' which could not be parsed. If present, a (stringified) JSON is expected as value.",i.message,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{}}return i};n._isAppLauncher=function(e){var t=e.getChip().getBaseChipId();return t===i||t===r};n.getTileConfigurationFromSimplifiedChip=function(e){var t;try{t=JSON.parse(e.configuration.tileConfiguration)}catch(e){t={}}return t};n.getTargetUrlFromSimplifiedChip=function(e,t){var i=this.getCustomTileTargetFromSimplified(e);if(i){return"#"+t.constructShellHash(i)}var r=this.getTileConfigurationFromSimplifiedChip(e);return r.navigation_target_url};n.getIndicatorDataSourceFromSimplifiedChip=function(e){var t=this.getTileConfigurationFromSimplifiedChip(e);var i=t.service_url;if(!i){return undefined}return{path:i,refresh:t.service_refresh_interval}};n.getTileSizeFromSimplifiedChip=function(e){var t=e.configuration;var i=t.row||1;var r=t.col||1;return i+"x"+r};n.getNumberUnitFromSimplifiedChip=function(e){var t=this.getTileConfigurationFromSimplifiedChip(e);return t.display_number_unit};n.getInfoFromSimplifiedChip=function(e){var t=e.bags.tileProperties;return t&&t.texts.display_info_text};n.getKeywordsFromSimplifiedChip=function(e){var t=e.bags.tileProperties;var i=t&&t.texts.display_search_keywords;if(i){return i.trim().split(/\s*,\s*/g)}return[]};n.isCustomTileFromSimplifiedChip=function(e){var t=e.chipId;return t!==i&&t!==r};n.loadChipInstanceFromSimplifiedChip=function(e){var t=e.bags;var i={chipId:e.chipId,configuration:e.configuration?JSON.stringify(e.configuration):"{}"};return sap.ushell.Container.getServiceAsync("PageBuilding").then(function(e){var r=e.getFactory();var n=r.createChipInstance(i);this.addBagDataToChipInstance(n,t);return new Promise(function(e,t){n.load(e,t)}).then(function(){return n})}.bind(this))};n.addBagDataToChipInstance=function(t,i){if(!i){return}var r;for(var n in i){var a=i[n];var o=t.getBag(n);try{for(r in a.properties){o.setProperty(r,a.properties[r])}for(r in a.texts){o.setText(r,a.texts[r])}}catch(t){e.error("chipsUtils.addBagDataToChipInstance: "+t.toString())}}};n.getCustomTileTargetFromSimplified=function(e){if(e.chipId==="X-SAP-UI2-CHIP:/UI2/AR_SRVC_NEWS"){return{target:{semanticObject:"NewsFeed",action:"displayNewsList"}}}var t=JSON.parse(e.configuration.tileConfiguration||"{}");var i=JSON.parse(t.TILE_PROPERTIES||"{}");if(i.semanticObject&&i.semanticAction){return{target:{semanticObject:i.semanticObject,action:i.semanticAction},params:{EvaluationId:[i.evaluationId]}}}return null};return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/clone", ["sap/ushell/utils/type"],function(e){"use strict";function r(r){function n(r){return e.isPlainObject(r)?{}:[]}function t(r){if(r instanceof Promise){return false}return e.isPlainObject(r)||e.isArray(r)}function a(r){if(e.isPlainObject(r)){return Object.keys(r).map(function(e){return{key:e,value:r[e]}})}var n=r.length;var t=[];for(var a=0;a<n;a++){t.push({value:r[a]})}return t}function u(r,n){var t=e.isPlainObject(n)?function(e,r){r[e.key]=e.value}:function(e,r){r.push(e.value)};t(r,n)}function i(e,r,n){r.push(e.length);Array.prototype.push.apply(n,e)}if(!t(r)){return r}var s=n(r);var f=[s];var l=[];var v=[];var c=new WeakMap;c.set(r,s);i(a(r),v,l);while(f.length>0){var o=f.shift();var p=v.shift();l.splice(0,p).forEach(function(e){var r=e.value;if(!t(r)){u(e,o);return}var s=r;var p=c.get(s);if(p){u({key:e.key,value:p},o);return}var h=n(s);c.set(s,h);u({key:e.key,value:h},o);f.push(h);i(a(s),v,l)})}return s}return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/objectOperations", [],function(){"use strict";var r={};r.getMember=function(r,e){var n=e.split("."),t=r;if(!r){return undefined}n.forEach(function(r){if(typeof t!=="object"){return undefined}t=t[r.replace(/[|]/g,".")]});return t};r.updateProperties=function(r,e){Object.keys(r).forEach(function(n){if(e.hasOwnProperty(n)){r[n]=e[n]}})};r.getNestedObjectProperty=function(r,e,n){var t="Missing or invalid parameter";if(!r||!Array.isArray(r)||r.length==0||!e){throw new Error(t)}if(Array.isArray(e)&&e.length!=r.length){throw new Error(t)}var i=e;if(!Array.isArray(e)){i=Array.apply(null,Array(r.length)).map(function(){return e})}var u=r.reduce(function(r,e,n){if(r!==undefined){return r}return this.getMember(e,i[n])}.bind(this),undefined);return u!=undefined?u:n};return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/type", [],function(){"use strict";function t(t){return Object.prototype.toString.apply(t)==="[object Array]"}function e(t){return Object.prototype.toString.apply(t)==="[object Object]"}function n(t){return typeof t!=="undefined"}return{isArray:t,isPlainObject:e,isDefined:n}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/utilsCdm", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ushell/utils/objectOperations","sap/ushell/utils/UrlParsing"],function(e,t,a,i,s){"use strict";function o(e,t){return i.getMember(e,t)}function p(e,a,i){a=t({},a);i=t({},i);var s={};s.semanticObject=a.semanticObject;s.action=a.action;s.title=a.title||o(i,"sap|app.title");s.info=a.info||o(i,"sap|app.info");s.icon=a.icon||o(i,"sap|ui.icons.icon");s.subTitle=a.subTitle||o(i,"sap|app.subTitle");s.shortTitle=a.shortTitle||o(i,"sap|app.shortTitle");var p,n,r,l,u,c,f=false;var m=o(i,"sap|platform|runtime");s.resolutionResult=t({},m);if(m){s.resolutionResult["sap.platform.runtime"]=t({},m)}if(o(i,"sap|ui.technology")==="GUI"){s.resolutionResult["sap.gui"]=o(i,"sap|gui")}if(o(i,"sap|ui.technology")==="WDA"){s.resolutionResult["sap.wda"]=o(i,"sap|wda")}if(o(i,"sap|ui.technology")==="URL"){if(i["sap.url"]){s.resolutionResult["sap.platform.runtime"]=s.resolutionResult["sap.platform.runtime"]||{};s.resolutionResult.url=i["sap.url"].uri;s.resolutionResult["sap.platform.runtime"].url=i["sap.url"].uri}else if(m&&m.uri){s.resolutionResult["sap.platform.runtime"].url=m.uri;s.resolutionResult.url=m.uri}}if(!s.resolutionResult["sap.ui"]){s.resolutionResult["sap.ui"]={}}s.resolutionResult["sap.ui"].technology=o(i,"sap|ui.technology");s.resolutionResult.applicationType=this._formatApplicationType(s.resolutionResult,i);s.resolutionResult.systemAlias=s.resolutionResult.systemAlias||a.systemAlias;s.resolutionResult.systemAliasSemantics="apply";s.resolutionResult.text=s.title;s.deviceTypes=o(i,"sap|ui.deviceTypes")||{};s.resolutionResult.appId=o(i,"sap|app.id");["desktop","tablet","phone"].forEach(function(e){if(Object.prototype.hasOwnProperty.call(a.deviceTypes||{},e)){s.deviceTypes[e]=a.deviceTypes[e]}if(!Object.prototype.hasOwnProperty.call(s.deviceTypes,e)){s.deviceTypes[e]=true}s.deviceTypes[e]=!!s.deviceTypes[e]});s.signature=a.signature||{};s.signature.parameters=s.signature.parameters||{};s.signature.additionalParameters=(a.signature||{}).additionalParameters||"allowed";var d=a.indicatorDataSource||o(i,"sap|app.crossNavigation.inbounds."+e+".indicatorDataSource");var y=d?"#Shell-dynamicTile":"#Shell-staticTile";if(o(i,"sap|app.type")==="tile"||o(i,"sap|flp.type")==="tile"){y=s.resolutionResult;y.url=o(i,"sap|platform|runtime.componentProperties.url");y.componentName=o(i,"sap|ui5.componentName");if(o(i,"sap|platform|runtime.includeManifest")){y.componentProperties=y.componentProperties||{};y.componentProperties.manifest=t({},i);delete y.componentProperties.manifest["sap.platform.runtime"]}l=o(i,"sap|app.crossNavigation.outbounds.target");f=true}if(o(i,"sap|app.type")==="plugin"||o(i,"sap|flp.type")==="plugin"){return undefined}if(o(i,"sap|flp.tileSize")){p=o(i,"sap|flp.tileSize")}if(o(i,"sap|app.description")){n=o(i,"sap|app.description")}if(o(i,"sap|ui.technology")==="GUI"&&o(i,"sap|gui.transaction")){r=o(i,"sap|gui.transaction")}if(o(i,"sap|ui.technology")==="WDA"&&o(i,"sap|wda.applicationId")){r=o(i,"sap|wda.applicationId")}if(o(i,"sap|app.dataSources")){u=o(i,"sap|app.dataSources")}if(o(i,"sap|app.id")){c=o(i,"sap|app.id")}s.tileResolutionResult={appId:c,title:s.title,subTitle:s.subTitle,icon:s.icon,size:p,info:s.info,tileComponentLoadInfo:y,indicatorDataSource:d,dataSources:u,description:n,runtimeInformation:m,technicalInformation:r,deviceTypes:s.deviceTypes};s.tileResolutionResult.isCustomTile=f;if(l){s.tileResolutionResult.targetOutbound=l}return s}function n(e,t){var a=e.applicationType;if(a){return a}var i=o(t,"sap|platform|runtime.componentProperties.self.name")||o(t,"sap|ui5.componentName");if(o(t,"sap|flp.appType")==="UI5"||o(t,"sap|ui.technology")==="UI5"){e.applicationType="SAPUI5";e.additionalInformation="SAPUI5.Component="+i;e.url=o(t,"sap|platform|runtime.componentProperties.url");e.applicationDependencies=o(t,"sap|platform|runtime.componentProperties");return"SAPUI5"}if(o(t,"sap|ui.technology")==="GUI"){e.applicationType="TR";e["sap.gui"]=o(t,"sap|gui");e.systemAlias=o(t,"sap|app.destination.name");return"TR"}if(o(t,"sap|ui.technology")==="WDA"){e.applicationType="WDA";e["sap.wda"]=o(t,"sap|wda");e.systemAlias=o(t,"sap|app.destination.name");return"WDA"}if(o(t,"sap|ui.technology")==="URL"){e.applicationType="URL";e.systemAlias=o(t,"sap|app.destination.name")}return"URL"}function r(t){if(!t){return[]}var a=[];try{var i=Object.keys(t.applications||{}).sort();i.forEach(function(i){try{var s=t.applications[i];var p=o(s,"sap|app.crossNavigation.inbounds");if(p){var n=Object.keys(p).sort();n.forEach(function(e){var t=p[e];var i=this.mapOne(e,t,s);if(i){a.push(i)}}.bind(this))}}catch(t){e.error("Error in application "+i+": "+t,t.stack)}}.bind(this))}catch(t){e.error(t);e.error(t.stack);return[]}return a}function l(e){var t,i,o;t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};i=a.get("signature.parameters",e)||{};Object.keys(i).forEach(function(e){if(i[e].filter&&Object.prototype.hasOwnProperty.call(i[e].filter,"value")&&(i[e].filter.format===undefined||i[e].filter.format==="plain")){t.params[e]=[i[e].filter.value]}if(i[e].launcherValue&&Object.prototype.hasOwnProperty.call(i[e].launcherValue,"value")&&(i[e].launcherValue.format===undefined||i[e].launcherValue.format==="plain")){t.params[e]=[i[e].launcherValue.value]}});o=s.constructShellHash(t);if(!o){return undefined}return o}function u(e){var t,a,i;t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};a=e.parameters||{};Object.keys(a).forEach(function(e){if(a.hasOwnProperty(e)&&typeof a[e].value==="object"){t.params[e]=[a[e].value.value]}});i=s.constructShellHash(t);if(!i){return undefined}return i}return{formatSite:r,toHashFromInbound:l,toHashFromOutbound:u,mapOne:p,_formatApplicationType:n}},true);
sap.ui.require.preload({
	"sap/ushell/appRuntime/ui5/AppRuntime.js":function(){
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
prepareModules();sap.ui.define(["sap/ui/core/Core","sap/base/Log","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/m/library","sap/ui/core/BusyIndicator","sap/ui/core/ComponentContainer","sap/ui/core/Popup","sap/ui/core/routing/History","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/appRuntime/ui5/AppCommunicationMgr","sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/performance/FesrEnhancer","sap/ushell/appRuntime/ui5/renderers/fiori2/AccessKeysAgent","sap/ushell/appRuntime/ui5/services/AppConfiguration","sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent","sap/ushell/appRuntime/ui5/services/ShellUIService","sap/ushell/appRuntime/ui5/SessionHandlerAgent","sap/ushell/EventHub","sap/ushell/iconfonts","sap/ushell/UI5ComponentType","sap/ushell/ui5service/UserStatus","sap/ushell/utils/UrlParsing","sap/ushell/utils/WindowUtils","sap/ushell/appRuntime/ui5/AppRuntimeContext","sap/ui/core/Configuration"],function(e,t,i,n,a,s,r,p,u,o,l,jQuery,c,h,d,f,m,g,v,y,C,A,S,R,b,I,P,w,U,M){"use strict";var F=s.URLHelper;m.init();var H,D=(new c).search(true),L,O=false,T,k=false,B=false,E=false,N=false,x=false,_;function W(){this.main=function(){var e,i=Promise.resolve(),n=Promise.resolve(),a=Promise.resolve(),s=H._getURI();jQuery("body").css("height","100%").css("width","100%");h.init(true);f.sendMessageToOuterShell("sap.ushell.appRuntime.iframeIsBusy",{bValue:true});this.getPageConfig(s);H.setModulePaths();e=H.loadAdditionalLibs();if(s.hasOwnProperty("sap-remote-intent")){i=f.sendMessageToOuterShell("sap.ushell.services.UserInfo.getLocaleData",undefined,undefined,3e3,{})}U.setAppLifeCycleAgent(y);y.expandSapIntentParams(H._getURI()).then(function(s){var r,p;if(s.hasOwnProperty("sap-remote-intent")===true){U.setIsScube(true);p=s["sap-remote-intent"];if(p===undefined){t.error("Application cannot be opened. 'sAppIntent' is undefined")}U.setRemoteSystemId(s["sap-remote-system"]);H.adjustIframeURL()}else{r=s["sap-ui-app-id"]}H.init();var u=new Promise(function(e){sap.ui.require(["sap/ushell/appRuntime/ui5/services/UserInfo"],e)});if(U.getIsScube()===true){a=H.initServicesContainer()}else{n=H.initServicesContainer()}e.push(a);Promise.all(e).then(function(){if(U.getIsScube()===true){sap.ushell.Container.getServiceAsync("CommonDataModel")}Promise.all([n,H.getAppInfo(r,p),u,i]).then(function(e){var t=e[1].oResolvedHashFragment,i=e[1].oParsedHash,n=e[3]||{};H._setUI5LocaleAttributes(n);A.init();g.init();H._setInitialAppRoute();H.createApplication(r,s,t,p,i).then(function(e){H.renderApplication(e);f.sendMessageToOuterShell("sap.ushell.appRuntime.iframeIsBusy",{bValue:false})})})})})};this._setUI5LocaleAttributes=function(e){if(Object.keys(e).length>0){var t=M.getFormatSettings();if(e.dateFormatShort){t.setDatePattern("short",e.dateFormatShort)}if(e.dateFormatMedium){t.setDatePattern("medium",e.dateFormatMedium)}if(e.numberFormatGroup){t.setNumberSymbol("group",e.numberFormatGroup)}if(e.numberFormatDecimal){t.setNumberSymbol("decimal",e.numberFormatDecimal)}if(e.timeFormatShort){t.setTimePattern("short",e.timeFormatShort)}if(e.timeFormatMedium){t.setTimePattern("medium",e.timeFormatMedium)}if(e.calendarMapping){t.setLegacyDateCalendarCustomizing(e.calendarMapping)}if(e.timeZone){M.setTimezone(e.timeZone)}if(e.currencyFormats){t.setCustomCurrencies(e.currencyFormats)}}};this._setInitialAppRoute=function(){var e=P.parseShellHash(l.getHash());if(e&&e.appSpecificRoute&&e.appSpecificRoute.length>0){f.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.setInnerAppRoute",{appSpecificRoute:decodeURIComponent(e.appSpecificRoute)})}};this._getURI=function(){return(new c).query(true)};this.init=function(){R.registerFiori2IconFont();x=this._getURIParams()["sap-manifest-width"];v.setFullWidthFromManifest(x);d.registerCommHandlers({"sap.ushell.appRuntime":{oServiceCalls:{hashChange:{executeServiceCallFn:function(e){var t=e.oMessageData.body.sHash;if(typeof t==="string"){var i=P.parseShellHash(t),n=P.parseShellHash(l.getHash());if(i&&n&&i.semanticObject===n.semanticObject&&i.action===n.action){l.replaceHash(t)}}return(new jQuery.Deferred).resolve().promise()}},setDirtyFlag:{executeServiceCallFn:function(e){var t=e.oMessageData.body.bIsDirty;if(t!==sap.ushell.Container.getDirtyFlag()){sap.ushell.Container.setDirtyFlag(t)}return(new jQuery.Deferred).resolve().promise()}},getDirtyFlag:{executeServiceCallFn:function(e){return(new jQuery.Deferred).resolve(sap.ushell.Container.getDirtyFlag()).promise()}},themeChange:{executeServiceCallFn:function(e){var t=e.oMessageData.body.currentThemeId;sap.ushell.Container.getUser().setTheme(t);return(new jQuery.Deferred).resolve().promise()}},buttonClick:{executeServiceCallFn:function(e){sap.ushell.renderers.fiori2.Renderer.handleHeaderButtonClick(e.oMessageData.body.buttonId);return(new jQuery.Deferred).resolve().promise()}},uiDensityChange:{executeServiceCallFn:function(e){var t=e.oMessageData.body.isTouch;jQuery("body").toggleClass("sapUiSizeCompact",t==="0").toggleClass("sapUiSizeCozy",t==="1");return(new jQuery.Deferred).resolve().promise()}},handleDirtyStateProvider:{executeServiceCallFn:function(e){return(new jQuery.Deferred).resolve(sap.ushell.Container.handleDirtyStateProvider(e.oMessageData.body.oNavigationContext)).promise()}}}},"sap.ushell.services.MessageBroker":{oServiceCalls:{_execute:{executeServiceCallFn:function(e){return sap.ushell.Container.getServiceAsync("MessageBroker").then(function(t){return t.handleMessage(e.oMessageData.body)})}}}}})};this.handleLinkElementOpen=function(e,t){try{if(t.isDefaultPrevented&&t.isDefaultPrevented()===true){return}var i=t.target;if(i&&i.tagName==="A"&&i.href&&i.href.indexOf("#")>0){if(i.target==="_blank"){var n=H.rebuildNewAppUrl(i.href,e);if(n!==i.href){w.openURL(n);t.preventDefault()}}else if(i.target===undefined||i.target===""){var a=i.href.split("#"),s=document.URL.split("#");if(a[0]===s[0]){var r=a[1]&&a[1].split("&/"),p=s[1]&&s[1].split("&/");if(typeof r[0]==="string"&&typeof p[0]==="string"&&r[0]!==p[0]){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{shellHash:a[1]}})});t.preventDefault()}}}}}catch(e){}};this.rebuildNewAppUrl=function(e,t){var i=e.split("#");if(i[0].length===0||i[0]===document.URL.split("#")[0]){return t+"#"+i[1]}return e};this.getPageConfig=function(e){var t,i={};N=D["sap-spaces"]==="true";t=jQuery("meta[name='sap.ushellConfig.ui5appruntime']")[0];if(t!==undefined){i=JSON.parse(t.content);if(N===true){i.ushell=i.ushell||{};i.ushell.spaces={enabled:true}}}window["sap-ushell-config"]=n({},j(),i);if(e.hasOwnProperty("sap-remote-intent")){var a=window["sap-ushell-config"].bootstrapPlugins;if(a&&a.hasOwnProperty("WAPluginAgent")&&a["WAPluginAgent"].hasOwnProperty("config")){delete a["WAPluginAgent"].config["sap-plugin-agent"]}}};this.setModulePaths=function(){if(window["sap-ushell-config"].modulePaths){var e=Object.keys(window["sap-ushell-config"].modulePaths),t;for(var i in e){t=e[i];(function(e){var t={};t[e.replace(/\./g,"/")]=window["sap-ushell-config"].modulePaths[e];sap.ui.loader.config({paths:t})})(t)}}};this.loadAdditionalLibs=function(){var t=i.get("ui5.libs",window["sap-ushell-config"])||{},n=[];Object.keys(t).forEach(function(i){if(t[i]===true){n.push(e.loadLibrary(i,{async:true}))}});return n};this.adjustIframeURL=function(){};this.initServicesContainer=function(){return new Promise(function(e){sap.ui.require(["sap/ushell/appRuntime/ui5/services/Container"],function(t){t.bootstrap("apprt",{apprt:"sap.ushell.appRuntime.ui5.services.adapters"}).then(function(){sap.ushell.Container.getFLPUrlAsync().then(function(e){jQuery(document).on("click.appruntime",H.handleLinkElementOpen.bind(H,e));jQuery(document).on("keydown.appruntime",function(t){if(t.code==="Enter"){return H.handleLinkElementOpen(e,t)}})});sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){_=t;_.init(function(){});y.setShellNavigationService(_);H._enableHistoryEntryReplacedDetection();e()})})})})};this._enableHistoryEntryReplacedDetection=function(){this._fnOriginalSetHash=l.setHash;this._fnOriginalReplaceHash=l.replaceHash;l.setHash=function(){if(l.disableCFLPUpdate===true){return this._fnOriginalSetHash.apply(l,arguments)}if(U.checkDataLossAndContinue()){return this._fnOriginalSetHash.apply(l,arguments)}}.bind(this);l.replaceHash=function(){if(l.disableCFLPUpdate===true){return this._fnOriginalReplaceHash.apply(l,arguments)}if(U.checkDataLossAndContinue()){return this._fnOriginalReplaceHash.apply(l,arguments)}}.bind(this)};this._getURIParams=function(){return D};this.getAppInfo=function(e,t){var i,n,s;if(e){i=window["sap-ushell-config"].ui5appruntime.config.appIndex.data;n=window["sap-ushell-config"].ui5appruntime.config.appIndex.module;s=window["sap-ushell-config"].ui5appruntime.config.appIndex.enableCache}return new Promise(function(r){if(e&&i&&!a(i)){y.init(n,H.createApplication.bind(H),H.renderApplication.bind(H),s,e,i);r({oResolvedHashFragment:i})}else{y.init(n,H.createApplication.bind(H),H.renderApplication.bind(H),s);y.getAppInfo(e,document.URL,t).then(r)}})};this.setHashChangedCallback=function(){if(B===true){return}function e(e,t){if(l.disableCFLPUpdate===true){return}if(e&&typeof e==="string"&&e.length>0){if(t&&typeof t==="string"&&t.length>0){var i=e.split("&/"),n=t.split("&/");if(i[0]!==n[0]){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.toExternal({target:{shellHash:e}})});return}}f.sendMessageToOuterShell("sap.ushell.appRuntime.hashChange",{newHash:e,direction:o.getInstance().getDirection()})}}l.changed.add(e.bind(this),this);B=true};this.createApplication=function(e,i,n,a,s){var r=P.getHash(window.location.href);return new Promise(function(o){var l="";if(i.hasOwnProperty("sap-history-dir")){l=i["sap-history-dir"];_.hashChanger.fireEvent("hashReplaced",{hash:_.hashChanger.getHash(),direction:l});t.debug("AppRuntime.createApplication :: Informed by the FLP, to change the History direction "+"property in the Iframe to: "+l)}L=new p({id:(U.getIsScube()===true?a:e)+"-content",width:"100%",height:"100%"});L.addStyleClass("sapAppRuntimeBaseStyle");var c="0";if(D.hasOwnProperty("sap-touch")){c=D["sap-touch"];if(c!=="0"&&c!=="1"){c="0"}}jQuery("body").toggleClass("sapUiSizeCompact",c==="0").toggleClass("sapUiSizeCozy",c==="1");if(E===false){var h=new C({scopeObject:L,scopeType:"component"});h.setBackNavigation();new I({scopeObject:L,scopeType:"component"});y.setShellUIService(h);sap.ushell.renderers.fiori2.utils.init();if(u.attachBlockLayerStateChange){u.attachBlockLayerStateChange(function(e){f.sendMessageToOuterShell("sap.ushell.services.ShellUIService.showShellUIBlocker",{bShow:e.getParameters().visible})})}E=true}(U.getIsScube()?Promise.resolve(""):y.getApplicationParameters(i)).then(function(t){n.url+=t;H.setHashChangedCallback();Promise.all([sap.ushell.Container.getServiceAsync("Ui5ComponentLoader"),sap.ushell.Container.getServiceAsync("AppLifeCycle")]).then(function(t){var i=t[0];var p=t[1];if(n.asyncHints&&Array.isArray(n.asyncHints.libs)){n.asyncHints.libs=n.asyncHints.libs.filter(function(e){return e.name!=="sap.ushell"})}var u,l;if(U.getIsScube()===true){u=n;l=s}else{u={ui5ComponentName:e,applicationDependencies:n,url:n.url};l=P.parseShellHash(r)}i.createComponent(u,l,[],b.Application).then(function(e){var t;if(U.getIsScube()===true){try{if(r&&r.indexOf("Shell-startIntent")===0){t=e.componentHandle.getMetadata().getManifestEntry("/sap.app/title");if(typeof t==="string"){f.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setTitle",{sTitle:t})}}}catch(e){}}L.setComponent(e.componentHandle.getInstance());y.setCurrentApp(L,a||"",u.ui5ComponentName);m.setAppShortId(e.componentHandle);p.prepareCurrentAppObject("UI5",e.componentHandle.getInstance(),false,undefined);var i=p.getCurrentApplication();i.getInfo(["appFrameworkVersion","appSupportInfo","appId","appVersion"]).then(function(e){for(var i in e){if(e[i]===undefined||e[i]===""){delete e[i]}}e.appFrameworkId="UI5";e.technicalAppComponentId=u.ui5ComponentName;if(typeof t==="string"){e.appTitle=t}y.setCurrentAppAttributes(e);setTimeout(function(){f.sendMessageToOuterShell("sap.ushell.services.AppLifeCycle.setNewAppInfo",{info:e})},500)});H.considerChangingTheDefaultFullWidthVal(e);H.overrideUrlHelperFuncs();o(e)})})})})};this.considerChangingTheDefaultFullWidthVal=function(e){if(x===true||x==="true"){S.emit("appWidthChange",false);var t=e.componentHandle.getInstance();var i=t.getMetadata();var n;if(i){n=t.getMetadata().getManifestEntry("/sap.ui/fullWidth");if(n===true||n==="true"){S.emit("appWidthChange",true)}else if(n===undefined){n=t.getMetadata().getManifestEntry("/sap.ui5/config/fullWidth");if(n===true||n==="true"){S.emit("appWidthChange",true)}}}}};this.overrideUrlHelperFuncs=function(){if(O===true){return}O=true;if(F){F.triggerEmail=function(e,t,i,n,a){f.sendMessageToOuterShell("sap.ushell.services.ShellUIService.sendEmail",{sTo:e,sSubject:t,sBody:i,sCc:n,sBcc:a,sIFrameURL:document.URL,bSetAppStateToPublic:true})};T=F.redirect;F.redirect=function(e,t){if(e&&t===true&&e.indexOf("#")>=0){sap.ushell.Container.getFLPUrlAsync().then(function(i){var n=H.rebuildNewAppUrl(e,i);T.call(F,n,t)})}else{T.call(F,e,t)}}}};this.loadPlugins=function(){if(k===true){return}k=true;sap.ushell.Container.getServiceAsync("PluginManager").then(function(e){s(e);if(U.getIsScube()===false){W(e)}e.loadPlugins("RendererExtensions")})};function s(e){e.registerPlugins({RTAPluginAgent:{component:"sap.ushell.appRuntime.ui5.plugins.rtaAgent",url:sap.ui.require.toUrl("sap/ushell/appRuntime/ui5/plugins/rtaAgent"),config:{"sap-plugin-agent":true}}})}function W(e){e.registerPlugins({WAPluginAgent:{component:"sap.ushell.appRuntime.ui5.plugins.scriptAgent",url:sap.ui.require.toUrl("sap/ushell/appRuntime/ui5/plugins/scriptAgent"),config:{"sap-plugin-agent":true,scube:false}}})}this.renderApplication=function(e){L.placeAt("content");r.hide();setTimeout(function(){if(e.componentHandle.getInstance().active){e.componentHandle.getInstance().active()}H.loadPlugins()},0)}}function j(){return{services:{CrossApplicationNavigation:{module:"sap.ushell.appRuntime.ui5.services.CrossApplicationNavigation",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},NavTargetResolution:{module:"sap.ushell.appRuntime.ui5.services.NavTargetResolution",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},ShellNavigation:{module:"sap.ushell.appRuntime.ui5.services.ShellNavigation",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},AppConfiguration:{module:"sap.ushell.appRuntime.ui5.services.AppConfiguration"},Bookmark:{module:"sap.ushell.appRuntime.ui5.services.Bookmark",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},LaunchPage:{module:"sap.ushell.appRuntime.ui5.services.LaunchPage",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},UserInfo:{module:"sap.ushell.appRuntime.ui5.services.UserInfo",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},AppState:{module:"sap.ushell.appRuntime.ui5.services.AppState",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},PluginManager:{config:{isBlueBox:true}},Menu:{module:"sap.ushell.appRuntime.ui5.services.Menu",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},CommonDataModel:{module:"sap.ushell.appRuntime.ui5.services.CommonDataModel",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},ReferenceResolver:{module:"sap.ushell.appRuntime.ui5.services.ReferenceResolver"},MessageBroker:{module:"sap.ushell.appRuntime.ui5.services.MessageBroker"},Ui5ComponentLoader:{config:{loadDefaultDependencies:false}}},ushell:{customPreload:{enabled:false}}}}var z=new W;H=z;z.main();return z});function prepareModules(){"use strict";sap.ui.require(["sap/ui/core/BusyIndicator"],function(e){try{if(apprtBIdiv){document.body.classList.remove("apprtBIbg");apprtBIdiv.parentNode.removeChild(apprtBIdiv);apprtBIstyle.parentNode.removeChild(apprtBIstyle)}e.show(0)}catch(t){e.show(0)}});if(document.URL.indexOf("ui5appruntime")>0){sap.ui.define("sap/ushell/URLTemplateProcessor",[],function(){return{}});sap.ui.define("sap/ushell/_ApplicationType/wdaResolution",[],function(){return{}});sap.ui.define("sap/ushell/_ApplicationType/guiResolution",[],function(){return{}});if(document.URL.indexOf("sap-ui-app-id=")>0){sap.ui.define("sap/ushell/ApplicationType",[],function(){return{URL:{type:"URL"},WDA:{type:"WDA"},TR:{type:"TR"},NWBC:{type:"NWBC"},WCF:{type:"WCF"},SAPUI5:{type:"SAPUI5"}}})}sap.ui.define("sap/ushell/components/applicationIntegration/AppLifeCycle",[],function(){return{}});sap.ui.define("sap/ushell/services/_AppState/WindowAdapter",[],function(){return function(){}});sap.ui.define("sap/ushell/services/_AppState/SequentializingAdapter",[],function(){return function(){}});sap.ui.define("sap/ushell/services/_AppState/Sequentializer",[],function(){return function(){}});sap.ui.define("sap/ushell/services/Configuration",[],function(){function e(){this.attachSizeBehaviorUpdate=function(){};this.hasNoAdapter=true}e.hasNoAdapter=true;return e});sap.ui.define("sap/ushell/services/_PluginManager/Extensions",[],function(){return function(){}});sap.ui.define("sap/ushell/services/_MessageBroker/MessageBrokerEngine",[],function(){return function(){}});sap.ui.define("sap/ushell/bootstrap/common/common.load.core-min",[],function(){return{loaded:false,load:function(e){}}})}}
this.prepareModules=prepareModules;
},
	"sap/ushell/appRuntime/ui5/BusyIndicator.js":'// Copyright (c) 2009-2023 SAP SE, All Rights Reserved\nvar apprtBIdiv,apprtBIstyle;document.addEventListener("DOMContentLoaded",function(){try{apprtBIstyle=document.createElement("style");apprtBIstyle.type="text/css";apprtBIstyle.innerHTML=".apprtBIbg {background-color:#636363} "+".apprtBIcenter {position: absolute;top: 50%;left: 50%;margin-top: -50px;margin-left: -100px;width: 200px;height: 100px;} "+".apprtBIcir {height: 30px;width: 30px;border-radius:50%;transform: scale(0);background-color:#0854a0;animation: apprtBIscaling 1.8s ease-in-out infinite;display: inline-block;margin:.1rem;} "+".apprtBIcir:nth-child(0) {animation-delay:0s;} "+".apprtBIcir:nth-child(1) {animation-delay:0.2s;} "+".apprtBIcir:nth-child(2) {animation-delay:0.4s;} "+".apprtBIcir:nth-child(3) {animation-delay:0.6s;} "+"@keyframes apprtBIscaling {0%, 100% {transform: scale(0.2);} 40% {transform: scale(1);} 50% {transform: scale(1);}}";document.getElementsByTagName("head")[0].appendChild(apprtBIstyle);document.body.classList.add("apprtBIbg");apprtBIdiv=document.createElement("div");apprtBIdiv.classList.add("apprtBIcenter");document.body.appendChild(apprtBIdiv);var t;t=document.createElement("div");t.classList.add("apprtBIcir");apprtBIdiv.appendChild(t);t=document.createElement("div");t.classList.add("apprtBIcir");apprtBIdiv.appendChild(t);t=document.createElement("div");t.classList.add("apprtBIcir");apprtBIdiv.appendChild(t);document.body.style.height="100%";document.body.style.width="100%"}catch(t){}});\n//# sourceMappingURL=BusyIndicator.js.map',
	"sap/ushell/appRuntime/ui5/libsPreload.js":function(){
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
try{document.getElementById("sap-ui-bootstrap").setAttribute("data-sap-ui-libs","sap.ui.core,sap.m,sap.ui.fl")}catch(t){}try{document.getElementById("sap-ui-bootstrap").setAttribute("data-sap-ui-compatVersion","edge")}catch(t){}
},
	"sap/ushell/appRuntime/ui5/plugins/rtaAgent/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""],"fallbackLocale":""},"id":"sap.ushell.appRuntime.ui5.plugins.rtaAgent","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA","embeddedBy":"../../../../","resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":[],"deviceTypes":{"desktop":true,"tablet":true,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.73.1","libs":{"sap.ui.core":{"minVersion":"1.73.1"},"sap.ui.fl":{"minVersion":"1.73.1"}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":[""],"fallbackLocale":""}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/appRuntime/ui5/plugins/rtaShell/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""],"fallbackLocale":""},"id":"sap.ushell.appRuntime.ui5.plugins.rtaShell","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA","embeddedBy":"../../../../","resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":[],"deviceTypes":{"desktop":true,"tablet":true,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.73.1","libs":{"sap.ui.core":{"minVersion":"1.73.1"},"sap.ui.fl":{"minVersion":"1.73.1"}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":[""],"fallbackLocale":""}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/appRuntime/ui5/plugins/scriptAgent/manifest.json":'{"_version":"1.0.0","sap.app":{"_version":"1.0.0","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""],"fallbackLocale":""},"id":"sap.ushell.appRuntime.ui5.plugins.waAgent.Component","title":"","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-FLP-FE-AI","embeddedBy":"../../../../","resources":"resources.json"},"sap.ui":{"_version":"1.0.0","technology":"UI5","supportedThemes":[],"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"_version":"1.0.0","contentDensities":{"compact":true,"cozy":true},"dependencies":{"minUI5Version":"1.70.0","libs":{"sap.ui.core":{"minVersion":"1.70.0"}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":[""],"fallbackLocale":""}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/bootstrap/cdm/cdm-def-loader.js":'// Copyright (c) 2009-2023 SAP SE, All Rights Reserved\nvar sAsyncLoader=document.getElementById("sap-ui-bootstrap").getAttribute("data-sap-ui-async");if(sAsyncLoader&&sAsyncLoader.toLowerCase()==="true"){sap.ui.require(["sap/ushell/bootstrap/cdm/cdm-def"])}else{sap.ui.requireSync("sap/ushell/bootstrap/cdm/cdm-def")}\n//# sourceMappingURL=cdm-def-loader.js.map',
	"sap/ushell/bootstrap/ui5loader-config.js":function(){
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
(function(){"use strict";var o=window.sap&&window.sap.ui&&window.sap.ui.loader;if(!o){throw new Error("FLP bootstrap: ui5loader is needed, but could not be found")}var i={},e=document.getElementById("sap-ui-bootstrap"),s=e&&e.getAttribute("src"),n=/^((?:.*\/)?resources\/~\d{14}~\/)/,t;if(s&&n.test(s)){t=n.exec(s)[1];window["sap-ui-config"]=window["sap-ui-config"]||{};window["sap-ui-config"].resourceRoots=window["sap-ui-config"].resourceRoots||{};window["sap-ui-config"].resourceRoots[""]=t}o.config(i)})();
},
	"sap/ushell/components/appfinder/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.appfinder","applicationVersion":{"version":"1.115.1"},"i18n":{"bundleUrl":"../../renderers/fiori2/resources/resources.properties","fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"component","title":"{{Component.AppFinder.Title}}","resources":"resources.json"},"sap.ui":{"fullWidth":true,"hideLightBackground":true,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.appfinder","rootView":{"viewName":"module:sap/ushell/components/appfinder/AppFinderView","async":true},"dependencies":{"minUI5Version":"1.30","libs":{"sap.ui.core":{},"sap.m":{}}},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlId":"catalogViewMasterDetail","controlAggregation":"detailPages","clearAggregation":false,"async":true},"routes":[{"name":"userMenu","pattern":"userMenu/:filters:"},{"name":"sapMenu","pattern":"sapMenu/:filters:"},{"name":"catalog","pattern":["catalog/:filters:","",":filters:"]}]},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/cards/Card.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.cards.Card"><GenericTile\n        header="{/data/display_title_text}"\n        subheader="{/data/display_subtitle_text}"\n        press="onPress"><TileContent footer="{i18n>cardTileCaption}" /></GenericTile></mvc:View>\n',
	"sap/ushell/components/cards/Configuration.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:codeeditor="sap.ui.codeeditor"\n    controllerName="sap.ushell.components.cards.Configuration"\n    height="100%"><VBox fitContainer="true" justifyContent="SpaceBetween"><MessageStrip\n            id="messageStrip"\n            showIcon="true"\n            showCloseButton="false"\n            type="Warning"\n            visible="{/config/displayOriginalLanguageWarning}"\n            text="{\n                parts: [\n                    \'i18n>edit_configuration.original_locale_not_fit_message\',\n                    \'/config/originalLanguage\',\n                    \'/config/sapLogonLanguage\'\n                ],\n                \'formatter\': \'.formatter\'\n            }" /><Title text="{i18n>configuration.category.card_manifest}" class="sapUiTinyMargin" /><codeeditor:CodeEditor id="manifestEditor" value="{/data/editorValue}" editable="{/config/manifestEditorEditable}" type="json"><codeeditor:layoutData><FlexItemData growFactor="1" /></codeeditor:layoutData></codeeditor:CodeEditor></VBox></mvc:View>\n',
	"sap/ushell/components/cepsearchresult/app/Main.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc"\n  xmlns="sap.m"\n  xmlns:f="sap.f"\n  xmlns:wp="sap.ushell.components.workPageBuilder.controls"\n  width="100%"\n  height="100%"\n  controllerName="sap.ushell.components.cepsearchresult.app.Main"\n  class="sapUiCEPSRApp"\n  visible="false"><VBox id="searchResultHeader" class="sapUiCEPSRHeader"><f:DynamicPageTitle><f:heading><Title id="titleText"/></f:heading><f:navigationActions><Button id="titleButton" icon="sap-icon://overflow" type="Transparent" press="openTitleMenu"/></f:navigationActions></f:DynamicPageTitle><IconTabHeader id="searchCategoriesTabs" mode="Inline" select=".tabSelectionChange" class="sapUiCEPSRTabs"></IconTabHeader></VBox><VBox class="sapUiCEPSRAppScroll"><wp:WorkPage><wp:WorkPageRow><wp:WorkPageColumn columnWidth="24"><wp:WorkPageCell id="contentCell"></wp:WorkPageCell></wp:WorkPageColumn></wp:WorkPageRow></wp:WorkPage></VBox></mvc:View>\n',
	"sap/ushell/components/cepsearchresult/app/cards/searchresultwidget/manifest.json":'{"sap.app":{"id":"sap.ushell.components.cepsearchresult.app.cards.searchresultwidget","type":"card","title":"{{CARD.Widget.Title}}","subTitle":"{{CARD.Widget.SubTitle}}","applicationVersion":{"version":"1.0.0"},"i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"shortTitle":"{{CARD.Widget.SubTitle}}","info":"{{CARD.Widget.SubTitle}}","description":"{{CARD.Widget.SubTitle}}","tags":{"keywords":[]}},"sap.ui":{"technology":"UI5","icons":{"icon":"sap-icon://search"}},"sap.ui5":{"dependencies":{"minUI5Version":"1.106","libs":{"sap.m":{},"sap.f":{},"sap.ui.integration":{}},"components":{"sap.ushell.components.cepsearchresult.app":{"minVersion":"1.100.0","lazy":true}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}}},"sap.card":{"type":"Component","extension":"./Extension","configuration":{"editor":"Config","parameters":{"init":{"value":false},"category":{"value":"app"},"searchTerm":{"value":""},"header":{"value":"default"},"headerNavigation":{"value":true},"view":{"value":"list"},"pageSize":{"value":5},"footer":{"value":"paginator"},"highlightResult":{"value":false}}},"header":{"title":"Custom Title (($count))","subtitle":"Custom Subtitle \'($searchText)\'","visible":"{= ${parameters>/header/value} !== \'none\' && ${parameters>/init/value}}","icon":{"src":"sap-icon://search","shape":"Square","backgroundColor":"Accent10"},"actions":[{"type":"Navigation","enabled":"{parameters>/headerNavigation/value}","parameters":{"ibnTarget":{"semanticObject":"WorkZoneSearchResult","action":"display"},"ibnParams":{"searchTerm":"{parameters>/searchTerm/value}","category":"{parameters>/category/value}","filter":""}}}]}}}',
	"sap/ushell/components/cepsearchresult/app/manifest.json":'{"sap.app":{"id":"sap.ushell.components.cepsearchresult.app","type":"application","applicationVersion":{"version":"1.0.0"},"i18n":{"bundleUrl":"i18n/i18n.properties"},"title":"{{SEARCHRESULTAPP.App.Title}}","subTitle":"{{SEARCHRESULTAPP.App.SubTitle}}"},"sap.ui":{"_version":"1.1.0","icons":{"icon":"sap-icon://search"},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":[]},"sap.ui5":{"dependencies":{"libs":{"sap.ui.core":{},"sap.m":{},"sap.ui.integration":{}}},"config":{"fullWidth":true},"rootView":{"viewName":"sap.ushell.components.cepsearchresult.app.Main","type":"XML","async":true},"models":{"appI18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"resources":{"css":[{"uri":"./css/style.css"}]},"contentDensities":{"compact":true,"cozy":true},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}}}',
	"sap/ushell/components/contentFinder/manifest.json":'{"_version":"1.39.0","sap.app":{"id":"sap.ushell.components.contentFinder","applicationVersion":{"version":"1.115.1"},"i18n":"./resources/resources.properties","ach":"CA-FLP-FE-UI","type":"component","title":""},"sap.ui":{"fullWidth":false,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.contentFinder","dependencies":{"minUI5Version":"1.99","libs":{"sap.ui.core":{},"sap.m":{},"sap.f":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"resources/resources.properties"}},"rootView":{"viewName":"sap.ushell.components.contentFinder.view.ContentFinderDialog","type":"XML","async":true}}}',
	"sap/ushell/components/contentFinder/view/AppSearch.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:f="sap.f"\n    xmlns:l="sap.ui.layout"\n    xmlns:grid="sap.ui.layout.cssgrid"\n    controllerName="sap.ushell.components.contentFinder.controller.AppSearch"\n    id="sapContentFinderAppSearch"\n    height="100%"><l:FixFlex minFlexSize="1px"><l:fixContent><OverflowToolbar\n                id="appSearchOverflowToolbar"\n                asyncMode="false"\n                style="Clear"\n                class="sapCepContentFinderToolbar sapUiSmallMarginTop sapUiTinyMarginBottom sapCepContentFinderBeginEndPadding"><Title id="appBoxContainerTitle" titleStyle="H5" text="{\n                    parts: [\n                        \'/activeNavigationTarget\',\n                        \'/appSearch/searchTerm\',\n                        \'/appSearch/showSelectedPressed\',\n                        \'/appSearch/selectedAppCount\',\n                        \'/appSearch/visualizations/tiles\',\n                        \'/appSearch/visualizations/cards\',\n                        \'/appSearch/filteredAppCount\'\n                    ], formatter: \'.formatter.formatAppSearchTitle\' }"><layoutData><OverflowToolbarLayoutData minWidth="6rem" shrinkable="true" priority="High"/></layoutData></Title><ToolbarSpacer/><SearchField\n                    id="appSearchField"\n                    value="{/appSearch/searchTerm}"\n                    placeholder="{i18n>ContentFinder.AppSearch.SearchPlaceholder}"\n                    liveChange=".onAppSearch"><layoutData><OverflowToolbarLayoutData minWidth= "6rem" maxWidth="13.75rem" shrinkable="true" priority="NeverOverflow"/></layoutData></SearchField><ToggleButton\n                    id="showAllSelectedBtn"\n                    visible="{= ${/activeNavigationTarget} === ${/navigationTargets/appSearchTiles}}"\n                    pressed="{/appSearch/showSelectedPressed}"\n                    enabled="{= ${/appSearch/selectedAppCount} > 0 || ${/appSearch/showSelectedPressed} }"\n                    icon="sap-icon://multi-select"\n                    tooltip="{i18n>ContentFinder.AppSearch.Button.Tooltip.ShowSelected}"\n                    press=".onShowSelectedPressed"><layoutData><OverflowToolbarLayoutData shrinkable="false" priority="Low"/></layoutData></ToggleButton></OverflowToolbar></l:fixContent><l:flexContent><Page\n                showHeader="false"\n                class="sapUiResponsiveContentPadding"\n                busy="{= !${/appSearch/visualizationsLoaded}}"><f:GridList\n                    id="tilesGridList"\n                    includeItemInSelection="true"\n                    mode="MultiSelect"\n                    items="{/appSearch/visualizations/tiles}"\n                    selectionChange=".onAppBoxSelected"\n                    visible="{= ${/activeNavigationTarget} === ${/navigationTargets/appSearchTiles}}"><f:customLayout><grid:GridResponsiveLayout containerQuery="true"><grid:layout><grid:GridSettings\n                                    gridTemplateColumns="repeat(auto-fill, 19.0625rem)"\n                                    gridAutoRows="12.75rem"\n                                    gridGap="1rem"\n                                /></grid:layout></grid:GridResponsiveLayout></f:customLayout><core:Fragment fragmentName="sap.ushell.components.contentFinder.view.AppSearchBox" type="XML" /></f:GridList><f:GridList\n                    id="cardsGridList"\n                    includeItemInSelection="true"\n                    mode="SingleSelectMaster"\n                    items="{/appSearch/visualizations/cards}"\n                    selectionChange=".onAppBoxSelectedAndClose"\n                    visible="{= ${/activeNavigationTarget} === ${/navigationTargets/appSearchCards}}"><f:customLayout><grid:GridResponsiveLayout containerQuery="true"><grid:layout><grid:GridSettings\n                                    gridTemplateColumns="repeat(auto-fill, 19.0625rem)"\n                                    gridAutoRows="12.75rem"\n                                    gridGap="1rem"\n                                /></grid:layout></grid:GridResponsiveLayout></f:customLayout><core:Fragment fragmentName="sap.ushell.components.contentFinder.view.AppSearchBox" type="XML" /></f:GridList></Page></l:flexContent></l:FixFlex></mvc:View>\n',
	"sap/ushell/components/contentFinder/view/AppSearchBox.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:launchpad="sap.ushell.ui.launchpad"><CustomListItem class="sapUshellCepAppBox" highlight="{= ${added} ? \'Information\' : \'None\'}" selected="{selected}" accDescription="{:= ${parts: [\'title\', \'subtitle\', \'added\'], formatter: \'.formatAppBoxAccDescription\'}}"><customData><launchpad:AccessibilityCustomData writeToDom="true" key="help-id" value="{:= ${dataHelpId}}"/></customData><VBox justifyContent="SpaceBetween" fitContainer="true"><HBox alignItems="Stretch"><layoutData><FlexItemData shrinkFactor="0" growFactor="0"/></layoutData><VBox class="sapUiTinyMarginEnd"><Avatar src="{:= icon}" backgroundColor="Transparent" showBorder="true" displaySize="XS"/></VBox><VBox justifyContent="Center"><Text wrapping="true" maxLines="2" text="{:= ${title}}" class="sapUshellCepAppBoxTitle"\n                          visible="{:= !!${title}}" tooltip="{:= ${title}}"/><Text wrapping="false" text="{:= ${subtitle}}" width="13rem"\n                          class="sapUshellCepAppBoxSubtitle"\n                          visible="{:= !!${subtitle}}" tooltip="{:= ${subtitle}}"/></VBox></HBox><VBox><layoutData><FlexItemData shrinkFactor="1" growFactor="1"/></layoutData></VBox><HBox height="64px" alignItems="Stretch" class="sapUiTinyMarginBottom"><layoutData><FlexItemData shrinkFactor="0" growFactor="0"/></layoutData><VBox class="sapUiTinyMarginEnd sapUshellCepAppBoxLabel" justifyContent="Start"><Label showColon="true" text="{:= ${i18n>ContentFinder.AppSearch.Label.FioriId}}" class="sapUiTinyMarginEnd"/><Label showColon="true" text="{:= ${i18n>ContentFinder.AppSearch.Label.Information}}" class="sapUiTinyMarginEnd"/></VBox><VBox width="0px" justifyContent="Start" class="sapUshellCepAppBoxValue"><layoutData><FlexItemData growFactor="1"/></layoutData><Text wrapping="false" text="{:= ${appId} || ${i18n>ContentFinder.AppSearch.Text.FieldEmpty}}" tooltip="{:= ${appId} || ${i18n>ContentFinder.AppSearch.Text.FieldEmpty}}"/><Text wrapping="false" text="{:= ${info} || ${i18n>ContentFinder.AppSearch.Text.FieldEmpty}}" tooltip="{:= ${info} || ${i18n>ContentFinder.AppSearch.Text.FieldEmpty}}"/></VBox></HBox><HBox justifyContent="SpaceBetween" alignItems="Center" height="2rem"><layoutData><FlexItemData shrinkFactor="0" growFactor="0"/></layoutData><Button icon="sap-icon://action" type="Transparent" visible="false" tooltip="{:= ${i18n>ContentFinder.AppSearch.Button.Tooltip.LaunchApplication}}" /><Button text="{:= ${i18n>ContentFinder.AppSearch.Button.Preview}}" iconFirst="false" icon="sap-icon://navigation-down-arrow" visible="false" type="Transparent" /></HBox></VBox></CustomListItem></core:FragmentDefinition>\n',
	"sap/ushell/components/contentFinder/view/AppSearchPaginated.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:f="sap.f"\n    xmlns:l="sap.ui.layout"\n    xmlns:grid="sap.ui.layout.cssgrid"\n    controllerName="sap.ushell.components.contentFinder.controller.AppSearch"\n    id="sapContentFinderAppSearch"\n    height="100%"\n    class="sapUiSizeCompact"><l:FixFlex minFlexSize="1px"><l:fixContent><OverflowToolbar\n                id="appSearchOverflowToolbar"\n                asyncMode="false"\n                style="Clear"\n                class="sapCepContentFinderToolbar sapUiSmallMarginTop sapUiTinyMarginBottom sapCepContentFinderBeginEndPadding"><Title id="appBoxContainerTitle" titleStyle="H5" text="{\n                    parts: [\n                        \'/activeNavigationTarget\',\n                        \'/appSearch/searchTerm\',\n                        \'/appSearch/showSelectedPressed\',\n                        \'/appSearch/selectedAppCount\',\n                        \'/appSearch/visualizations/tiles\',\n                        \'/appSearch/visualizations/cards\',\n                        \'/appSearch/restrictedVisualizations\',\n                        \'/appSearch/filteredAppCount\',\n                        \'/appSearch/totalCount\'\n                    ], formatter: \'.formatter.formatAppSearchTitle\' }"><layoutData><OverflowToolbarLayoutData minWidth="6rem" shrinkable="true" priority="High"/></layoutData></Title><ToolbarSpacer/><SearchField\n                    id="appSearchField"\n                    value="{/appSearch/searchTerm}"\n                    placeholder="{i18n>ContentFinder.AppSearch.SearchPlaceholder}"\n                    search=".onSearch"><layoutData><OverflowToolbarLayoutData minWidth= "6rem" maxWidth="13.75rem" shrinkable="true" priority="NeverOverflow"/></layoutData></SearchField><ToggleButton\n                    id="showAllSelectedBtn"\n                    visible="{= ${/activeNavigationTarget} === ${/navigationTargets/appSearchTiles}}"\n                    pressed="{/appSearch/showSelectedPressed}"\n                    enabled="{= ${/appSearch/selectedAppCount} > 0 || ${/appSearch/showSelectedPressed} }"\n                    icon="sap-icon://multi-select"\n                    tooltip="{i18n>ContentFinder.AppSearch.Button.Tooltip.ShowSelected}"\n                    press=".onShowSelectedPressed"><layoutData><OverflowToolbarLayoutData shrinkable="false" priority="Low"/></layoutData></ToggleButton></OverflowToolbar></l:fixContent><l:flexContent><Page\n                showHeader="false"\n                class="sapUiResponsiveContentPadding"\n                busy="{= !${/appSearch/visualizationsLoaded}}"><f:GridList\n                    id="tilesGridList"\n                    includeItemInSelection="true"\n                    mode="MultiSelect"\n                    growing="true"\n                    growingScrollToLoad="true"\n                    growingThreshold="{/appSearch/growingThreshold}"\n                    updateStarted=".onUpdateStarted"\n                    items="{/appSearch/visualizations/tiles}"\n                    selectionChange=".onAppBoxSelected"\n                    visible="{= ${/activeNavigationTarget} === ${/navigationTargets/appSearchTiles}}"><f:customLayout><grid:GridResponsiveLayout containerQuery="true"><grid:layout><grid:GridSettings\n                                    gridTemplateColumns="repeat(auto-fill, 19.0625rem)"\n                                    gridAutoRows="12.75rem"\n                                    gridGap="1rem"\n                                /></grid:layout></grid:GridResponsiveLayout></f:customLayout><core:Fragment fragmentName="sap.ushell.components.contentFinder.view.AppSearchBox" type="XML" /></f:GridList><f:GridList\n                    id="cardsGridList"\n                    includeItemInSelection="true"\n                    mode="SingleSelectMaster"\n                    growing="true"\n                    growingScrollToLoad="true"\n                    growingThreshold="{/appSearch/growingThreshold}"\n                    updateStarted=".onUpdateStarted"\n                    items="{/appSearch/visualizations/cards}"\n                    selectionChange=".onAppBoxSelectedAndClose"\n                    visible="{= ${/activeNavigationTarget} === ${/navigationTargets/appSearchCards}}"><f:customLayout><grid:GridResponsiveLayout containerQuery="true"><grid:layout><grid:GridSettings\n                                    gridTemplateColumns="repeat(auto-fill, 19.0625rem)"\n                                    gridAutoRows="12.75rem"\n                                    gridGap="1rem"\n                                /></grid:layout></grid:GridResponsiveLayout></f:customLayout><core:Fragment fragmentName="sap.ushell.components.contentFinder.view.AppSearchBox" type="XML" /></f:GridList></Page></l:flexContent></l:FixFlex></mvc:View>\n',
	"sap/ushell/components/contentFinder/view/ContentFinderDialog.view.xml":'<mvc:View\n    id="contentFinderDialogView"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    height="100%"\n    controllerName="sap.ushell.components.contentFinder.controller.ContentFinderDialog"\n    core:require="{ formatMessage: \'sap/base/strings/formatMessage\' }"><Dialog\n        id="contentFinderDialog"\n        contentWidth="64.5rem"\n        contentHeight="80%"\n        resizable="true"\n        closeOnNavigation="true"\n        class="sapUiNoContentPadding"\n        horizontalScrolling="false"\n        verticalScrolling="false"\n        afterClose=".onClose"><customHeader><OverflowToolbar><Button icon="sap-icon://nav-back"\n                        id="sapContentFinderBackButton"\n                        visible="{= ${/activeNavigationTarget} !== ${/navigationTargets/widgetGallery} &amp;&amp; !${/restrictedMode}}"\n                        press=".onBackButtonPressed"/><Title text="{\n                    parts: [\n                        \'/activeNavigationTarget\'\n                    ], formatter: \'.formatter.formatDialogTitle\' }" /><ToolbarSpacer /></OverflowToolbar></customHeader><content><NavContainer id="contentFinderNavContainer"><Page\n                    id="contentFinderWidgetGalleryPage"\n                    enableScrolling="false"\n                    showHeader="false"><mvc:XMLView\n                        height="100%"\n                        viewName="sap.ushell.components.contentFinder.view.WidgetGallery" /></Page><Page\n                    id="contentFinderAppSearchPage"\n                    enableScrolling="false"\n                    showHeader="false"><mvc:XMLView\n                        height="100%"\n                        viewName="sap.ushell.components.contentFinder.view.AppSearch" /></Page></NavContainer></content><beginButton><Button id="sapContentFinderAddButton"\n                    type="Emphasized"\n                    visible="{\n                        parts: [\n                            \'/activeNavigationTarget\'\n                        ], formatter: \'.formatter.addButtonIsVisibleInAppSearch\' }"\n                    text="{parts: [{path: \'i18n>ContentFinder.Button.Add\'}, {path: \'/appSearch/selectedAppCount\'}],\n                    formatter: \'formatMessage\' }"\n                    enabled="{= ${/appSearch/selectedAppCount} > 0}"\n                    press=".onAddButtonPressed"/></beginButton><endButton><Button id="sapContentFinderCancelButton"\n                    text="{i18n>ContentFinder.Button.Cancel}"\n                    press=".onCancelButtonPressed"/></endButton></Dialog></mvc:View>\n',
	"sap/ushell/components/contentFinder/view/WidgetGallery.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:core="sap.ui.core"\n    xmlns:l="sap.ui.layout"\n    xmlns:cssgrid="sap.ui.layout.cssgrid"\n    xmlns:f="sap.f"\n    controllerName="sap.ushell.components.contentFinder.controller.WidgetGallery"\n    id="sapContentFinderWidgetGallery"\n    height="100%"><VBox class="sapCepContentFinderBeginEndPadding sapUiSmallMarginTop sapUiTinyMarginBottom"><Title id="widgetGalleryTitle" titleStyle="H5" text="{i18n>ContentFinder.WidgetGallery.AllWidgets.Title}"><layoutData><OverflowToolbarLayoutData minWidth="6rem" shrinkable="true" priority="High"/></layoutData></Title></VBox><VBox items="{path: \'/widgetGallery/widgetGroups\'}" class="sapCepContentFinderBeginEndPadding"><items><VBox class="sapUiTinyMarginBottom"><OverflowToolbar asyncMode="true" style="Clear" class="sapCepContentFinderToolbar" visible="{= !!${title}}"><Title titleStyle="H6" text="{title}" /></OverflowToolbar><f:GridList\n                        id="sapCepContentFinderGridList"\n                        mode="None"\n                        items="{\n                            path: \'widgets\',\n                            templateShareable: false,\n                            key: \'id\'\n                        }"><f:customLayout><cssgrid:GridResponsiveLayout containerQuery="true"><cssgrid:layout><cssgrid:GridSettings gridGap="1.5rem"\n                                                      gridTemplateColumns="repeat(2, calc(50% - 0.75rem))"\n                                                      gridAutoRows="5rem"/></cssgrid:layout></cssgrid:GridResponsiveLayout></f:customLayout><f:GridListItem type="Active" press=".onSelectWidgetType"><HBox alignItems="Center" height="100%" class="sapUiSmallMarginEnd"><Avatar src="{icon}" class="sapUiSmallMarginEnd sapUiSmallMarginBegin"\n                                    backgroundColor="Placeholder"><layoutData><FlexItemData maxHeight="3rem" /></layoutData></Avatar><VBox><Title text="{title}" titleStyle="H6" wrapping="true" /><Label text="{description}" visible="{= !!${description}}" wrapping="true" /></VBox></HBox></f:GridListItem></f:GridList></VBox></items></VBox></mvc:View>\n',
	"sap/ushell/components/homeApp/error/HomeAppError.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:launchpad="sap.ushell.ui.launchpad"\n    controllerName="sap.ushell.components.homeApp.error.HomeAppError"\n    height="100%"><MessagePage\n        id="errorPage"\n        showHeader="false"\n        icon="{/icon}"\n        text="{/text}"\n        description="{/description}"><buttons><Button\n                text="{i18n>HomeApp.CannotLoadApp.CopyButton}"\n                press=".onCopyErrorDetailsPress" /></buttons></MessagePage></mvc:View>',
	"sap/ushell/components/homeApp/error/manifest.json":'{"_version":"1.0.0","sap.fiori":{"registrationIds":[""]},"sap.app":{"id":"sap.ushell.components.homeApp.error","applicationVersion":{"version":"1.0.0"},"i18n":{"bundleUrl":"../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"component","title":"","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.homeApp.error","rootView":{"viewName":"sap.ushell.components.homeApp.error.HomeAppError","type":"XML","async":true},"dependencies":{"minUI5Version":"1.100","libs":{"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/homepage/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.homepage","applicationVersion":{"version":"1.115.1"},"i18n":{"bundleUrl":"../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"component","title":"{{Component.Homepage.Title}}","resources":"resources.json"},"sap.ui":{"fullWidth":true,"hideLightBackground":true,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.homepage","dependencies":{"minUI5Version":"1.30","libs":{"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/pages/MoveVisualization.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><SelectDialog\n        items="{}"\n        search="_onMoveTileSearch"\n        title="{i18n>PageRuntime.Dialog.Title.MoveVisualization}"\n        confirm="_confirmSelect"\n        cancel="_onMoveTileDialogClose"\n        contentWidth="400px"\n        contentHeight="auto"><StandardListItem title="{title}" /></SelectDialog></core:FragmentDefinition>\n',
	"sap/ushell/components/pages/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.pages","applicationVersion":{"version":"1.115.1"},"i18n":{"bundleUrl":"../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"component","title":"","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.pages","rootView":{"viewName":"sap.ushell.components.pages.view.PageRuntime","type":"XML","async":true},"dependencies":{"minUI5Version":"1.72","libs":{"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/pages/view/ImportDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n                         xmlns:core="sap.ui.core"><Dialog title="{i18n>MyHome.ImportDialog.Title}" class="sapUiContentPadding" contentWidth="30rem"><content><Text text="{i18n>MyHome.ImportDialog.Info}" class="sapUiSmallMarginBottom" /><List\n                items="{/PersonalizedGroups}"\n                mode="MultiSelect"\n                growingThreshold="50"\n                class="sapUiSmallMarginBottom"\n                includeItemInSelection="true"\n                busy="{/busy}"><StandardListItem\n                    title="{title}"\n                    selected="{selected}" /></List></content><beginButton><Button\n                text="{i18n>MyHome.ImportDialog.Button.AddAppsToPage}"\n                press=".doImport"\n                type="Emphasized"\n                enabled="{= !${/busy}}"/></beginButton><endButton><Button text="{i18n>MyHome.ImportDialog.Button.Cancel}" press=".close" /></endButton></Dialog></core:FragmentDefinition>\n',
	"sap/ushell/components/pages/view/MessageStrip.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n                         xmlns:core="sap.ui.core"><MessageStrip\n        text="{i18n>MyHome.InitialPage.MessageStrip.Text}"\n        showIcon="true"\n        visible="{view>/personalizationAvailable}"\n        close=".onMessageStripClose"\n        showCloseButton="true"><link><Link text="{i18n>MyHome.InitialPage.MessageStrip.Link}" press=".onImportDialogPress"/></link></MessageStrip></core:FragmentDefinition>\n',
	"sap/ushell/components/pages/view/MyHomeStart.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.pages.controller.MyHome"><Page showHeader="false"><core:Fragment fragmentName="sap.ushell.components.pages.view.MessageStrip" type="XML" class="sapUiSmallMargin" /><VBox\n              class="sapUiSmallMargin"\n              alignItems="Center"\n              justifyContent="Center"><IllustratedMessage\n                illustrationSize="Scene"\n                illustrationType="sapIllus-NoData"\n                title="{i18n>MyHome.InitialPage.Title}"\n                description="{i18n>MyHome.InitialPage.Description}"><additionalContent><Button text="{i18n>MyHome.InitialPage.Button.EditPage}"\n                            press=".onEditPress"/></additionalContent></IllustratedMessage></VBox></Page></mvc:View>\n',
	"sap/ushell/components/pages/view/PageRuntime.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns:data="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"\n    xmlns:launchpad="sap.ushell.ui.launchpad"\n    controllerName="sap.ushell.components.pages.controller.PageRuntime"\n    height="100%"><NavContainer id="pagesRuntimeNavContainer"><NavContainer id="pagesNavContainer" pages="{/pages}"><pages><Page\n                    data:pageId="{id}"\n                    showHeader="false"\n                    backgroundDesign="Transparent"\n                    floatingFooter="true"><content><launchpad:Page\n                            edit="{viewSettings>/actionModeEditActive}"\n                            dataHelpId="Page-{id}"\n                            sections="{\n                                path: \'sections\',\n                                templateShareable: false,\n                                key: \'id\'\n                            }"\n                            addSectionButtonPressed=".handleEditModeAction(\'addSection\', $event, ${$source>/}, ${$parameters>/})"\n                            enableSectionReordering="{viewSettings>/actionModeEditActive}"\n                            sectionDrop=".handleEditModeAction(\'moveSection\', $event, ${$source>/}, ${$parameters>/})"><launchpad:sections><launchpad:Section\n                                    title="{title}"\n                                    class="sapContrastPlus"\n                                    sizeBehavior="{viewSettings>/sizeBehavior}"\n                                    dataHelpId="Section-{id}"\n                                    default="{default}"\n                                    visualizations="{\n                                        path: \'visualizations\',\n                                        factory: \'._visualizationFactory\',\n                                        key: \'id\'\n                                    }"\n                                    gridContainerGap="{viewSettings>/gridContainerGap/gridContainerGap}"\n                                    gridContainerGapXS="{viewSettings>/gridContainerGap/gridContainerGapXS}"\n                                    gridContainerGapS="{viewSettings>/gridContainerGap/gridContainerGapS}"\n                                    gridContainerGapM="{viewSettings>/gridContainerGap/gridContainerGapM}"\n                                    gridContainerGapL="{viewSettings>/gridContainerGap/gridContainerGapL}"\n                                    gridContainerGapXL="{viewSettings>/gridContainerGap/gridContainerGapXL}"\n                                    gridContainerRowSize="{viewSettings>/gridContainerRowSize/gridContainerRowSize}"\n                                    gridContainerRowSizeXS="{viewSettings>/gridContainerRowSize/gridContainerRowSizeXS}"\n                                    gridContainerRowSizeS="{viewSettings>/gridContainerRowSize/gridContainerRowSizeS}"\n                                    gridContainerRowSizeM="{viewSettings>/gridContainerRowSize/gridContainerRowSizeM}"\n                                    gridContainerRowSizeL="{viewSettings>/gridContainerRowSize/gridContainerRowSizeL}"\n                                    gridContainerRowSizeXL="{viewSettings>/gridContainerRowSize/gridContainerRowSizeXL}"\n                                    enableGridBreakpoints="false"\n                                    enableGridContainerQuery="{viewSettings>/ushellContainerDocked}"\n                                    editable="{viewSettings>/actionModeEditActive}"\n                                    add=".handleEditModeAction(\'addVisualization\', $event, ${$source>/}, ${$parameters>/})"\n                                    delete=".handleEditModeAction(\'deleteSection\', $event, ${$source>/}, ${$parameters>/})"\n                                    reset=".handleEditModeAction(\'resetSection\', $event, ${$source>/}, ${$parameters>/})"\n                                    sectionVisibilityChange=".handleEditModeAction(\'changeSectionVisibility\', $event, ${$source>/}, ${$parameters>/})"\n                                    titleChange=".handleEditModeAction(\'changeSectionTitle\', $event, ${$source>/}, ${$parameters>/})"\n                                    enableVisualizationReordering="{viewSettings>/personalizationEnabled}"\n                                    areaDragEnter=".onAreaDragEnter"\n                                    visualizationDrop=".moveVisualization($event, ${$source>/}, ${$parameters>/})"\n                                    showSection="{visible}"\n                                    visible="{= !!${visualizations}.length || ${viewSettings>/actionModeEditActive} }"\n                                    noVisualizationsText="{i18n>PageRuntime.EditMode.EmptySection}"\n                                    showNoVisualizationsText="{viewSettings>/actionModeEditActive}"\n                                    enableAddButton="{viewSettings>/showAddButton}"\n                                    enableResetButton="{ parts: [\'id\', \'preset\'], formatter: \'._sectionEnableReset\'}"\n                                    enableDeleteButton="{ parts: [\'id\', \'preset\'], formatter: \'._sectionEnableDelete\'}"\n                                    enableShowHideButton="{viewSettings>/showHideButton}" /></launchpad:sections><launchpad:dragDropConfig><dnd:DropInfo\n                                    groupName="Section"\n                                    targetAggregation="sections"\n                                    dragEnter=".onDragEnter"\n                                    drop=".moveVisualization($event, ${$source>/}, ${$parameters>/})" /></launchpad:dragDropConfig></launchpad:Page></content><footer><Bar class="sapUshellDashboardFooter" visible="{viewSettings>/actionModeActive}"><contentRight><Button\n                                    text="{i18n>closeEditMode}"\n                                    type="Emphasized"\n                                    press=".handleEditModeAction(\'save\', $event, ${$source>/}, ${$parameters>/})" /></contentRight><customData><core:CustomData\n                                    key="sap-ui-fastnavgroup"\n                                    value="true"\n                                    writeToDom="true" /></customData></Bar></footer><landmarkInfo><PageAccessibleLandmarkInfo\n                            rootRole="Region"\n                            rootLabel="{i18n>PageSectionRegion}"\n                            headerRole="None"\n                            contentRole="None"\n                            footerRole="None" /></landmarkInfo></Page></pages><customData><core:CustomData\n                    key="help-id"\n                    value="{= ${viewSettings>/personalizationEnabled} ? \'general-page-id-pers-allowed\' : \'general-page-id-no-pers-allowed\'}"\n                    writeToDom="true" /></customData></NavContainer><MessagePage\n            id="errorPage"\n            showHeader="false"\n            icon="{errorPage>/icon}"\n            text="{errorPage>/text}"\n            description="{errorPage>/description}"><buttons><Button\n                    text="{i18n>PageRuntime.CannotLoadPage.DetailsButton}"\n                    visible="{= !!${errorPage>/details} &amp;&amp; !${errorPage>/description}}"\n                    press="._pressViewDetailsButton" /><Button\n                    text="{i18n>PageRuntime.CannotLoadPage.CopyButton}"\n                    visible="{= !!${errorPage>/details}}"\n                    press="._copyToClipboard" /></buttons></MessagePage><Page\n            id="emptyPage"\n            showHeader="false" /></NavContainer></mvc:View>\n',
	"sap/ushell/components/runtimeSwitcher/manifest.json":'{"_version":"1.39.0","sap.app":{"id":"sap.ushell.components.runtimeSwitcher","applicationVersion":{"version":"1.115.1"},"ach":"CA-FLP-FE-COR","type":"component","title":""},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.runtimeSwitcher","rootView":{"viewName":"sap.ushell.components.runtimeSwitcher.view.RuntimeSwitcher","type":"XML","async":true},"componentUsages":{"pagesComponent":{"name":"sap.ushell.components.pages","componentData":{"navigationDisabled":true},"lazy":true},"workpageComponent":{"name":"sap.ushell.components.workPageRuntime","componentData":{"navigationDisabled":true},"lazy":true}}}}',
	"sap/ushell/components/runtimeSwitcher/view/RuntimeSwitcher.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.runtimeSwitcher.controller.RuntimeSwitcher"\n    height="100%"><NavContainer id="switcherNavContainer"><Page\n            id="emptyPage"\n            showHeader="false" /><Page\n            id="pagesRuntime"\n            enableScrolling="false"\n            showHeader="false"><core:ComponentContainer\n                height="100%"\n                usage="pagesComponent"\n                manifest="true"\n                componentCreated=".pageComponentCreated"\n                async="true"/></Page><Page\n            id="workpagesRuntime"\n            enableScrolling="false"\n            showHeader="false"><core:ComponentContainer\n                height="100%"\n                usage="workpageComponent"\n                manifest="true"\n                componentCreated=".workPageComponentCreated"\n                async="true"/></Page></NavContainer></mvc:View>\n',
	"sap/ushell/components/shell/MenuBar/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.shell.MenuBar","applicationVersion":{"version":"1.115.1"},"i18n":{"bundleUrl":"../../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"type":"component","title":"","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"dependencies":{"minUI5Version":"1.114","libs":{"sap.ui.core":{},"sap.m":{},"sap.tnt":{}}},"models":{},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/MenuBar/view/MenuBar.view.xml":'<mvc:View xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.shell.MenuBar.controller.MenuBar"\n    displayBlock="true"><IconTabHeader\n        class="sapUshellShellTabBar"\n        ariaTexts="{viewConfiguration>/ariaTexts}"\n        mode="Inline"\n        items="{\n            path: \'menu>/\',\n            factory: \'._menuFactory\'\n        }"\n        selectedKey="{viewConfiguration>/selectedKey}"\n        select=".onMenuItemSelection"><customData><core:CustomData\n                key="sap-ui-fastnavgroup"\n                value="true"\n                writeToDom="true"/></customData></IconTabHeader></mvc:View>\n',
	"sap/ushell/components/shell/MenuBar/view/MenuBarPersonalization.view.xml":'<mvc:View xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:tnt="sap.tnt"\n    controllerName="sap.ushell.components.shell.MenuBar.controller.MenuBar"\n    displayBlock="true"><tnt:ToolHeader\n        id= "navigationBar"\n        class="sapUshellShellToolHeader"><core:ComponentContainer\n            manifest="true"\n            async="true"\n            propagateModel="true"\n            name="sap.ushell.components.shell.NavigationBarMenu"\n            lifecycle="Container"\n            id="navigationBarMenu" /><IconTabHeader\n            class="sapUshellShellTabBar"\n            ariaTexts="{viewConfiguration>/ariaTexts}"\n            mode="Inline"\n            items="{\n                path: \'menu>/\',\n                filters: { path: \'pinned\', operator: \'EQ\', value1: true },\n                sorter: { path: \'pinnedSortOrder\', descending: false },\n                factory: \'._menuFactory\'\n            }"\n            selectedKey="{viewConfiguration>/selectedKey}"\n            select=".onMenuItemSelection"></IconTabHeader><tnt:customData><core:CustomData\n                key="sap-ui-fastnavgroup"\n                value="true"\n                writeToDom="true"/></tnt:customData></tnt:ToolHeader></mvc:View>\n',
	"sap/ushell/components/shell/NavigationBarMenu/manifest.json":'{"_version":"1.48.0","sap.app":{"id":"sap.ushell.components.shell.NavigationBarMenu","applicationVersion":{"version":"1.115.1"},"i18n":{"bundleUrl":"../../../renderers/fiori2/resources/resources.properties","fallbackLocale":"en"},"type":"component","ach":"CA-FLP-FE-COR","title":"{{Component.NavigationBarMenu.Title}}","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"phone":true,"tablet":true}},"sap.ui5":{"rootView":{"viewName":"sap.ushell.components.shell.NavigationBarMenu.view.NavigationBarMenu","type":"XML","async":true},"dependencies":{"minUI5Version":"1.114","libs":{"sap.m":{},"sap.tnt":{},"sap.ui.core":{}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"sap.ushell.renderers.fiori2.resources.resources"}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/NavigationBarMenu/view/CustomTreeItem.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><CustomTreeItem tooltip="{spaces>title}"><content><HBox\n                alignItems="Center"\n                width="100%"><Text\n                    text="{spaces>title}"\n                    tooltip="{spaces>title}"><layoutData><FlexItemData growFactor="1" /></layoutData></Text><Button\n                    type="Transparent"\n                    class="sapUiTinyMarginEnd"\n                    icon="{= ${spaces>pinned} ? \'sap-icon://pushpin-on\' : \'sap-icon://pushpin-off\' }"\n                    press=".handlePinButtonPress"\n                    tooltip="{= ${spaces>pinned} ? ${i18n>NavigationBarMenu.Button.UnpinSpace} :\n                ${i18n>NavigationBarMenu.Button.PinSpace} }"\n                    visible="{= ${spaces>pinned} === undefined ? false : true }"></Button></HBox></content></CustomTreeItem></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/NavigationBarMenu/view/NavigationBarMenu.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    id="NavigationBarMenu"\n    controllerName="sap.ushell.components.shell.NavigationBarMenu.controller.NavigationBarMenu"><Button\n        id="navigationBarMenuButton"\n        icon="sap-icon://menu2"\n        press=".openNavigationBarMenuPopover"\n        tooltip="{i18n>MenuBar.Personalization.Button}"\n        ariaHasPopup="Dialog"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData><customData><core:CustomData\n                key="help-id"\n                value="shell-navigationBarPersonalizationButton"\n                writeToDom="true" /></customData></Button></mvc:View>\n',
	"sap/ushell/components/shell/NavigationBarMenu/view/NavigationBarMenuPopover.fragment.xml":'<core:FragmentDefinition\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><Popover\n        id="NavigationBarMenuPopover"\n        class="sapUiContentPadding"\n        placement="Bottom"\n        showHeader="false"\n        modal="false"\n        initialFocus="PinnedSpaces"\n        contentWidth="30rem"><content><Tree\n                id="PinnedSpaces"\n                showSeparators="None"\n                noDataText="{i18n>NavigationBarMenu.PinnedSpaces.NoDataText}"\n                updateFinished="._onPinnedSpacesUpdateFinished"><dragDropConfig><dnd:DragDropInfo\n                        sourceAggregation="items"\n                        targetAggregation="items"\n                        dropPosition="Between"\n                        drop=".rearrangePinnedSpaces" /></dragDropConfig><headerToolbar><Toolbar><Title\n                            id="PinnedSpacesTreeTitle"\n                            text="{i18n>NavigationBarMenu.PinnedSpaces.Title}" /><ToolbarSpacer /><Button\n                            id="UnpinAllSpaces"\n                            text="{i18n>NavigationBarMenu.Button.UnpinAll}"\n                            tooltip="{i18n>NavigationBarMenu.Button.UnpinAll.Tooltip}"\n                            press=".unpinAllSpaces"></Button></Toolbar></headerToolbar></Tree><Tree\n                id="AllSpaces"\n                showSeparators="None"\n                noDataText="{i18n>NavigationBarMenu.AllSpaces.NoDataText}"\n                items="{path: \'spaces>/\', parameters: {arrayNames: [\'menuEntries\']}, factory: \'.allSpacesFactory\'}"><headerToolbar><Toolbar><Title text="{i18n>NavigationBarMenu.AllSpaces.Title}" /></Toolbar></headerToolbar><dependents><core:Fragment\n                        fragmentName="sap.ushell.components.shell.NavigationBarMenu.view.CustomTreeItem"\n                        type="XML" /></dependents></Tree></content></Popover></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/Notifications/Notifications.view.xml":'<mvc:View\n    controllerName="sap.ushell.components.shell.Notifications.Notifications"\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:core="sap.ui.core"\n    class="sapUshellNotificationsView"><IconTabBar\n        id="notificationIconTabBar"\n        backgroundDesign="Transparent"\n        headerBackgroundDesign="Transparent"\n        expandable="false"\n        selectedKey="sapUshellNotificationIconTabByDate"\n        select="onTabSelected"\n        class="sapUshellNotificationTabBar"><items><IconTabFilter\n                id="sapUshellNotificationIconTabByDate"\n                key="sapUshellNotificationIconTabByDate"\n                text="{i18n>notificationsSortByDate}"><NotificationList\n                    id="sapUshellNotificationsListDate"\n                    class="sapUshellNotificationsList sapContrastPlus"\n                    showSeparators="Inner"\n                    mode="None"\n                    noDataText="{i18n>noNotificationsMsg}"\n                    growing="true"\n                    growingThreshold="10"\n                    growingScrollToLoad="true"\n                    updateStarted=".onListUpdateStarted"\n                    items="{path: \'/notificationsByDateDescending/aNotifications\', templateShareable: true}"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsListItem" type="XML"/></NotificationList></IconTabFilter><IconTabFilter\n                id="sapUshellNotificationIconTabByType"\n                key="sapUshellNotificationIconTabByType"\n                text="{i18n>notificationsSortByType}"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsGroupListItem" type="XML"/></IconTabFilter><IconTabFilter\n                id="sapUshellNotificationIconTabByPrio"\n                key="sapUshellNotificationIconTabByPrio"\n                text="{i18n>notificationsSortByPriority}"><NotificationList\n                    id="sapUshellNotificationsListPriority"\n                    class="sapUshellNotificationsList sapContrastPlus"\n                    mode="None"\n                    noDataText="{i18n>noNotificationsMsg}"\n                    growing="true"\n                    growingThreshold="10"\n                    growingScrollToLoad="true"\n                    updateStarted=".onListUpdateStarted"\n                    items="{path: \'/notificationsByPriorityDescending/aNotifications\', templateShareable: true}"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsListItem" type="XML"/></NotificationList></IconTabFilter></items></IconTabBar></mvc:View>\n',
	"sap/ushell/components/shell/Notifications/NotificationsGroupListItem.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    core:require="{\n        utils: \'sap/ushell/utils\'\n    }"><NotificationList\n        id="sapUshellNotificationsListType"\n        class="sapUshellNotificationsList sapContrastPlus"\n        mode="SingleSelect"\n        showSeparators="Inner"\n        noDataText="{i18n>noNotificationsMsg}"\n        items="{/notificationsByTypeDescending}"><NotificationListGroup\n            title="{GroupHeaderText}"\n            collapsed="{Collapsed}"\n            showEmptyGroup="true"\n            showItemsCounter="false"\n            enableCollapseButtonWhenEmpty="true"\n            autoPriority="false"\n            datetime="{ path: \'CreatedAt\', formatter: \'utils.formatDate\' }"\n            priority="{ path: \'Priority\', formatter: \'.priorityFormatter\' }"\n            busy="{= !!${Busy}}"\n            buttons="{\n                path: \'Actions\',\n                templateShareable: true,\n                sorter: { path: \'Nature\', descending: true }\n            }"\n            items="{\n                path: \'aNotifications\',\n                templateShareable: true\n            }"\n            close="onNotificationGroupItemClose"\n            onCollapse="onNotificationGroupItemCollapse"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsListItem" type="XML" /><buttons><Button text="{GroupActionText}" press=".onNotificationGroupItemButtonPress" /></buttons></NotificationListGroup></NotificationList></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/Notifications/NotificationsListItem.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    core:require="{Utils: \'sap/ushell/utils\'}"><NotificationListItem\n        class="sapUshellNotificationsListItem sapContrastPlus"\n        press="onNotificationItemPress"\n        close="onNotificationItemClose"\n        datetime="{path: \'CreatedAt\', formatter: \'Utils.formatDate\'}"\n        description="{SubTitle}"\n        title="{= ${SensitiveText} ? ${SensitiveText} : ${Text}}"\n        buttons="{\n            path: \'Actions\',\n            sorter: {\n                path: \'Nature\',\n                descending: true\n            },\n            templateShareable: true\n        }"\n        unread="{= !${IsRead}}"\n        busy="{= ${Busy} ? ${Busy} : false}"\n        priority="{ path: \'Priority\', formatter: \'.priorityFormatter\'}"><buttons><Button\n                text="{ActionText}"\n                press="onNotificationItemButtonPress"/></buttons></NotificationListItem></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/ProductSwitch/ProductSwitch.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.f"><ResponsivePopover\n        id="sapUshellProductSwitchPopover"\n        placement="Bottom"\n        showArrow="true"\n        showHeader="false"\n        title="{i18n>productSwitch}"\n        class="sapUshellPopupContainer sapContrastPlus"><content><f:ProductSwitch change="onProductItemPress" items="{/}"><f:items><f:ProductSwitchItem title="{title}" src="{visual/icon}" subTitle="{subtitle}" targetSrc="{targetUrl}" /></f:items></f:ProductSwitch></content></ResponsivePopover></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/Search/manifest.json":'{"_version":"1.34.0","sap.app":{"id":"sap.ushell.components.shell.Search","applicationVersion":{"version":"1.115.1"},"i18n":{"bundleUrl":"../../../renderers/fiori2/resources/resources.properties","fallbackLocale":"en"},"type":"component","title":"","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"dependencies":{"minUI5Version":"1.92","libs":{"sap.m":{},"sap.ui.layout":{}}},"models":{},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/SearchCEP/SearchFieldFragment.fragment.xml":'<core:FragmentDefinition\n    height="100%"\n    xmlns:core="sap.ui.core"\n    xmlns="sap.m"><Popover\n        initialFocus="CEPSearchField"\n        id="searchFieldPopover"\n        placement="Bottom"\n        showArrow="false"\n        showHeader="false"\n        offsetX="-13"\n        beforeOpen=".onBeforeOpen"\n        afterOpen=".onAfterOpen"\n        afterClose=".onAfterClose"\n        horizontalScrolling="false"><content><SearchField\n                id="CEPSearchField"\n                width="99%"\n                placeholder="{i18n>search}"\n                tooltip="{i18n>search}"\n                enableSuggestions="true"\n                search=".onSearch"\n                suggest=".onSuggest"\n                class="sapUshellCEPListCenter"\n            /><List id="SearchHistoryList"\n                  visible="false"\n                  showSeparators="None"\n                  xmlns="sap.m"\n                  items="{\n                      path: \'searchTerms>/\'\n              }"\n                  itemPress=".onRecentSearchPress"\n                  growing="true"\n                  showNoData="false"\n                  updateStarted=".onGrowingStarted"\n                  growingThreshold="2"\n                  growingScrollToLoad="false"><StandardListItem\n                    type="Active"\n                    title="{searchTerms>text}"\n                    icon="sap-icon://history"\n                    iconDensityAware="false"\n                    class="sapUiTinyMarginBeginEnd"/></List><List id="FrequentlyUsedAppsList"\n                  visible="false"\n                  showSeparators="None"\n                  xmlns="sap.m"\n                  items="{\n                      path: \'freqUsedApps>/\'\n              }"\n                  itemPress=".onFreqUsedAppsPress"\n                  class="sapUiTinyMarginEnd sapUiTinyMarginTopBottom"\n                  growing="true"\n                  showNoData="false"\n                  growingThreshold="6"\n                  growingScrollToLoad="false"><StandardListItem\n                    type="Active"\n                    title="{freqUsedApps>title}"\n                    icon="{freqUsedApps>icon}"\n                    iconDensityAware="false"\n                    class="sapUiTinyMarginBeginEnd"/></List><List id="ProductsList"\n                  showSeparators="None"\n                  visible="false"\n                  xmlns="sap.m"\n                  items="{\n                                    path: \'productsResults>/\'\n                                }"\n                  itemPress=".onProductsPress"\n                  class="sapUiTinyMarginEnd sapUiTinyMarginTopBottom"\n                  growing="true"\n                  growingThreshold="6"\n                  growingScrollToLoad="false"><StandardListItem\n                    type="Active"\n                    title="{productsResults>text}"\n                    icon="{productsResults>icon}"\n                    iconDensityAware="false"\n                    class="sapUiTinyMarginBeginEnd"\n                /></List><List id="SearchResultList"\n                  showSeparators="None"\n                  visible="false"\n                  xmlns="sap.m"\n                  items="{\n                                    path: \'searchResults>/\'\n                                }"\n                  itemPress=".onSearchResultPress"\n                  class="sapUiTinyMarginEnd sapUiTinyMarginTopBottom"\n                  growing="true"\n                  growingThreshold="6"\n                  updateFinished=".onGrowingFinishedResults"\n                  growingScrollToLoad="false"><StandardListItem\n                    type="Active"\n                    title="{searchResults>text}"\n                    icon="{searchResults>icon}"\n                    iconDensityAware="false"\n                    class="sapUiTinyMarginBeginEnd"\n                /></List><List id="ExternalSearchAppsList"\n                  showSeparators="None"\n                  visible="false"\n                  xmlns="sap.m"\n                  items="{\n                                    path: \'externalSearchResults>/\'\n                                }"\n                  itemPress=".onExternalSearchResultPress"\n                  class="sapUiTinyMarginEnd sapUiTinyMarginTopBottom"\n                  growing="true"\n                  showNoData="false"\n                  growingThreshold="6"\n                  growingScrollToLoad="false"><StandardListItem\n                    type="Active"\n                    title="{externalSearchResults>text}"\n                    icon="{externalSearchResults>icon}"\n                    iconDensityAware="false"\n                    class="sapUiTinyMarginBeginEnd"\n                /></List></content></Popover></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/Settings/ContentWrapper.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    core:require="{\n        coreLibrary: \'sap/ui/core/library\'\n    }"><Page\n        class="sapUsheUserSettingDetaildPage"\n        showHeader="false"><content><ObjectHeader\n                title="{entryInfo>/title}"\n                titleLevel="{= coreLibrary.TitleLevel.H3}"\n                visible="{entryInfo>/showHeader}"\n                backgroundDesign="Solid"\n                class="sapUshellUserSettingDetailHeader"/><IconTabBar\n                expandable="false"\n                items="{entryInfo>/tabs}"\n                visible="{= ${entryInfo>/tabs}.length > 1}"\n                select=".onTabSelected"><items><IconTabFilter text="{entryInfo>groupingTabTitle}"><customData><core:CustomData key="help-id" value="{entryInfo>groupingTabHelpId}" writeToDom="{= !!${entryInfo>groupingTabHelpId}}" /></customData></IconTabFilter></items></IconTabBar></content></Page></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/Settings/ErrorContent.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><FlexBox\n        height="5rem"\n        alignItems="Center"\n        justifyContent="Center"><items><Text text="{/errorMessage}"/></items></FlexBox></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/Settings/UserSettings.view.xml":'<mvc:View\n    displayBlock="true"\n    controllerName="sap.ushell.components.shell.Settings.UserSettings"\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:core="sap.ui.core"><Dialog\n        id="userSettingsDialog"\n        class="sapUshellUserSetting sapContrastPlus"\n        showHeader="false"\n        contentHeight="42rem"\n        contentWidth="58rem"\n        afterClose="._afterClose"\n        escapeHandler="._handleCancel"\n        stretch="{device>/system/phone}"><customHeader><Bar id="settingsBar"><contentLeft><Button id="userSettingsNavBackButton"\n                        icon="sap-icon://nav-back"\n                        press="._navBackButtonPressHandler"\n                        tooltip="{i18n>ToggleButtonShow}"\n                        visible="false"/><ToggleButton id="userSettingsMenuButton"\n                        icon="sap-icon://menu2"\n                        press="._navToggleButtonPressHandler"\n                        tooltip="{i18n>ToggleButtonShow}"\n                        visible="false"/></contentLeft><contentMiddle><Title\n                        text="{i18n>userSettings}"/></contentMiddle></Bar></customHeader><content><Page\n                class="sapUshellSettingsPage"\n                showHeader="false"><content><SplitApp id="settingsApp"\n                        defaultTransitionNameDetail="show"\n                        mode="{= ${device>/system/desktop} ? \'StretchCompressMode\' : \'ShowHideMode\'}"><masterPages><Page id="userSettingMaster"\n                                class="sapUshellUserSettingMaster"\n                                showHeader="false"><content><List id="userSettingEntryList"\n                                        items="{/entries}"\n                                        mode="SingleSelectMaster"\n                                        selectionChange="._itemPress"><StandardListItem\n                                            class="sapUshellUserSettingMasterListItem"\n                                            title= "{title}"\n                                            description="{\n                                                parts: [\'id\', \'tabs\', \'results>/entries\'],\n                                                formatter: \'._formatDescription\'\n                                            }"\n                                            icon="{= !!${icon} ? ${icon} : \'sap-icon://action-settings\' }"\n                                            iconDensityAware="false"\n                                            visible="{visible}"\n                                            type="{= ${device>/system/phone} ? \'Navigation\' : \'Inactive\'}"><customData><core:CustomData key="help-id" value="{entryHelpID}" writeToDom="{= !!${entryHelpID}}" /></customData></StandardListItem></List></content></Page></masterPages></SplitApp></content><footer><OverflowToolbar><Button\n                            id="userSettingsMessagePopoverBtn"\n                            visible="false"\n                            press="._handleMessagePopoverPress"\n                            icon="sap-icon://message-error"\n                            ariaHasPopup="Dialog"/><ToolbarSpacer/><Button\n                            id="userSettingSaveButton"\n                            text="{i18n>saveBtn}"\n                            type="Emphasized"\n                            press="._handleSaveButtonPress"/><Button\n                            id="userSettingCancelButton"\n                            text="{i18n>cancelBtn}"\n                            press="._handleCancel"/></OverflowToolbar></footer></Page></content></Dialog></mvc:View>\n',
	"sap/ushell/components/shell/Settings/appearance/Appearance.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.shell.Settings.appearance.Appearance"><IconTabBar ariaTexts="{/ariaTexts}" id="idIconTabBar" applyContentPadding="true" expandable="false"><items><IconTabFilter text="{i18n>AppearanceThemeMenu}" key="themeListTab"><List\n                    items="{/options}"\n                    includeItemInSelection="true"\n                    mode="{= ${config>/themeConfigurable} ? \'SingleSelectMaster\' : \'None\'}"\n                    selectionChange="onSelectHandler"\n                    id="themeList"><items><CustomListItem selected="{isSelected}" visible="{isVisible}" class="sapUshellAppearanceCustomListItem"><customData><core:CustomData key="themeid" value="{id}" writeToDom="true" /></customData><HBox><HBox class="sapUshellAppearanceItemViewLeft"><core:Icon\n                                        src="{= ${isSapTheme} ? undefined : \'sap-icon://palette\'}"\n                                        color="{config>/sapUiContentIconColor}"\n                                        size="1.75rem"\n                                        class="sapUshellAppearanceIcon" /><Text text="{= ${combineName} ? ${combineName} : ${name}}" class="sapUshellAppearanceItemText"><layoutData><FlexItemData styleClass="sapUshellAppearanceFlexItemText" /></layoutData></Text></HBox><HBox class="sapUshellAppearanceItemViewRight"><core:Icon\n                                        src="sap-icon://sys-enter-2"\n                                        visible="{= !!${isSelected}}"\n                                        color="{config>/sapUiContentIconColor}"\n                                        size="1.375rem" /></HBox></HBox></CustomListItem></items></List></IconTabFilter><IconTabFilter text="{i18n>AppearanceLayoutAndBehaviorMenu}" id="DisplaySettingsTab" key="displaySettingsTab"><HBox\n                    visible="{config>/showContentProviderInfoOnVisualizationsConfigurable}"\n                    alignItems="Start"\n                    justifyContent="End"\n                    class="sapUshellAppearanceBox"><Label\n                        id="showContentProviderInfoOnVisualizationsLabel"\n                        labelFor="showContentProviderInfoOnVisualizationsCheckbox"\n                        text="{i18n>AppearanceShowContentProviderInfoOnVisualizationsLabel}"\n                        class="sapUshellAppearanceLabel"\n                        width="auto"\n                        textAlign="{config>/textAlign}" /><VBox alignItems="Baseline" class="sapUshellAppearanceContentDensityText"><CheckBox\n                            id="showContentProviderInfoOnVisualizationsCheckbox"\n                            selected="{config>/showContentProviderInfoOnVisualizationsSelected}" /><Text\n                            id="showContentProviderInfoOnVisualizationsDescription"\n                            text="{i18n>AppearanceShowContentProviderInfoOnVisualizationsText}"\n                            class="sapUshellFlpSettingsDescription" /></VBox></HBox><HBox alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label\n                        labelFor="contentDensityCheckBox"\n                        text="{i18n>AppearanceContentDensityLabel}"\n                        class="sapUshellAppearanceLabel"\n                        width="auto"\n                        textAlign="{config>/textAlign}" /><VBox alignItems="Baseline" class="sapUshellAppearanceContentDensityText"><CheckBox\n                            id="contentDensityCheckBox"\n                            selected="{config>/isCozyContentMode}"\n                            enabled="{config>/contentDensityConfigurable}" /><Text text="{i18n>appearanceCompactCozyDescriptionText}" class="sapUshellFlpSettingsDescription" /></VBox></HBox><HBox visible="{config>/sizeBehaviorConfigurable}" alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label text="{i18n>AppearanceTileSizeLabel}"\n                        class="sapUshellAppearanceLabel"\n                        width="auto"\n                        textAlign="{config>/textAlign}"\n                        labelFor="tileSizeRadioButtonGroup"\n                        id="sapUshellAppearanceTileSizeLabel" /><VBox class="sapUshellAppearanceTileSizeText"><RadioButtonGroup selectedIndex="{config>/tileSize}" id="tileSizeRadioButtonGroup"><buttons><RadioButton\n                                    text="{i18n>AppearanceTileSizeSmall}"\n                                    class="sapUshellAppearanceTileSizeSmall"\n                                    ariaLabelledBy="sapUshellAppearanceTileSizeLabel" /><RadioButton\n                                    text="{i18n>AppearanceTileSizeLarge}"\n                                    class="sapUshellAppearanceTileSizeLarge"\n                                    ariaLabelledBy="sapUshellAppearanceTileSizeLabel" /></buttons></RadioButtonGroup><Text text="{i18n>appearanceTileSizeDescriptionText}" class="sapUshellFlpSettingsDescription" /></VBox></HBox><HBox visible="{darkMode>/enabled}" alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label\n                        visible="{darkMode>/detectionSupported}"\n                        labelFor="{= ${darkMode>/detectionSupported} ? \'darkModeDetectionSwitcher\' : \'darkModeSwitcher\'}"\n                        text="{i18n>AppearanceDarkModeLabel}"\n                        class="sapUshellAppearanceLabel"\n                        width="auto"\n                        textAlign="{config>/textAlign}" /><VBox visible="{darkMode>/detectionSupported}" alignItems="Baseline" class="sapUshellAppearanceContentDensityText"><CheckBox\n                            id="darkModeDetectionSwitcher"\n                            select="changeSystemModeDetection"\n                            selected="{darkMode>/detectionEnabled}" /><Text text="{i18n>AppearanceDarkModeDetectionText}" class="sapUshellFlpSettingsDescription" /></VBox></HBox></IconTabFilter></items></IconTabBar></mvc:View>\n',
	"sap/ushell/components/shell/Settings/homepage/HomepageSetting.view.xml":'<mvc:View\n      width="100%"\n      xmlns="sap.m"\n      xmlns:lf="sap.ui.layout.form"\n      xmlns:mvc="sap.ui.core.mvc"><lf:SimpleForm><lf:content><Label id="anchorBarLabel"\n                class="sapUshellFlpSettingsLabel"\n                text="{i18n>AnchorBarLabel}"/><VBox><items><RadioButtonGroup id="anchorBarDisplayMode" selectedIndex="{/displayMode}"\n                        ariaLabelledBy="anchorBarLabel"\n                        ariaDescribedBy="anchorBarDescription"><buttons><RadioButton id="anchorBarScrollModeRBtn"\n                                text="{i18n>anchorBarScrollMode}"/><RadioButton id="anchorBarTabModeRBtn"\n                                text="{i18n>anchorBarTabMode}"/></buttons></RadioButtonGroup><VBox class ="sapUshellFlpSettingsDescriptionBorder"><items><Text id="anchorBarDescription"\n                                class="sapUshellFlpSettingsDescription"\n                                text="{i18n>homePageGroupDisplayDescriptionText}"/><Text\n                                class="sapUshellFlpSettingsDescription"\n                                text="{i18n>homePageGroupDisplayDescriptionText_secondParagraph}"\n                                visible="{/personalisationEnabled}"/></items></VBox></items></VBox></lf:content></lf:SimpleForm></mvc:View>\n',
	"sap/ushell/components/shell/Settings/notifications/NotificationsSetting.view.xml":'<mvc:View\n    controllerName="sap.ushell.components.shell.Settings.notifications.NotificationsSetting"\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"><VBox class="sapUiSmallMargin"><CheckBox id="showHighPrioCheckbox" selected="{/flags/highPriorityBannerEnabled}" text="{i18n>Label.ShowAlertsForHighNotifications}"/><Table\n            class="sapUiForceWidthAuto"\n            id="table"\n            sticky="ColumnHeaders"\n            fixedLayout="false"\n            items="{\n                path: \'/rows\',\n                sorter: { path: \'NotificationTypeDesc\' }\n            }"><columns><Column id="columnNotificationType"><ObjectIdentifier text="{i18n>notificationType_column}" /></Column><Column id="columnMobileNotification" visible="{/flags/mobileNotificationsEnabled}" minScreenWidth="Tablet" demandPopin="true"><Text id="columnMobileText" text="{i18n>iOSNotification_column}" /></Column><Column id="columnEmail" visible="{/flags/emailNotificationsEnabled}" minScreenWidth="Tablet" demandPopin="true"><Text id="columnEmailText" text="{i18n>eMailFld}" /></Column><Column id="columnHighPriority" minScreenWidth="Tablet" demandPopin="true"><Text id="columnHighPriorityText" text="{i18n>highNotificationsBanner_column}"/></Column><Column id="columnEnable" minScreenWidth="Tablet"><Text id="columnEnableText" text="{i18n>Notifications_Settings_Show_Type_column}"/></Column></columns><items><ColumnListItem id="columnListItemNotifications" type="Inactive"><cells><ObjectIdentifier id="objectIdentifierTitle" title="{NotificationTypeDesc}"/></cells><cells><CheckBox\n                            id="cellCheckboxMobile"\n                            selected="{= !${DoNotDeliverMob}}"\n                            select=".onSelectMobile"/></cells><cells><CheckBox\n                            id="cellCheckboxEmail"\n                            visible="{= ${IsEmailEnabled} &amp;&amp; ${IsEmailIdMaintained} &amp;&amp; !${DoNotDeliver} }"\n                            selected="{= !${DoNotDeliverEmail}}"\n                            select=".onSelectEmail"/></cells><cells><CheckBox\n                            id="cellCheckboxHighPrio"\n                            selected="{= ${PriorityDefault} === \'HIGH\'}"\n                            select=".onSelectHighPriority"/></cells><cells><Switch\n                                id="cellSwitchEnable"\n                                state="{= !${DoNotDeliver}}"\n                                change=".onEnableSwitchChange"\n                                customTextOn=" "\n                                customTextOff=" "/></cells></ColumnListItem></items></Table></VBox></mvc:View>\n',
	"sap/ushell/components/shell/Settings/search/Search.view.xml":'<mvc:View width="100%" controllerName="sap.ushell.components.shell.Settings.search.Search"\r\n  xmlns="sap.m"\r\n  xmlns:mvc="sap.ui.core.mvc"><VBox id="searchContent" class="sapUshellUserSettingDetailContent" /></mvc:View>',
	"sap/ushell/components/shell/Settings/spaces/SpacesSetting.view.xml":'<mvc:View\n    controllerName="sap.ushell.components.shell.Settings.spaces.SpacesSetting"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"><VBox class="sapUiSmallMargin"><CheckBox\n            text="{i18n>spacesModeLabel}"\n            visible="{/spaces/visible}"\n            selected="{/spaces/selected}"><customData><core:CustomData key="help-id" value="SpacesEntry-spacesMode" writeToDom="true" /></customData></CheckBox><VBox class="sapUshellFlpSettingsDescriptionBorder" visible="{/spaces/visible}"><Text class="sapUshellFlpSettingsDescription sapUshellFlpSettingsWide" text="{i18n>spacesModeDescriptionText}"/></VBox><CheckBox\n            text="{i18n>hideEmptySpacesLabel}"\n            visible="{/hideEmptySpaces/visible}"\n            selected="{/hideEmptySpaces/selected}"><customData><core:CustomData key="help-id" value="SpacesEntry-hideEmptySpaces" writeToDom="true" /></customData></CheckBox><VBox class="sapUshellFlpSettingsDescriptionBorder" visible="{/hideEmptySpaces/visible}"><Text class="sapUshellFlpSettingsDescription sapUshellFlpSettingsWide" text="{i18n>hideEmptySpacesDescriptionText}"/></VBox><CheckBox\n            text="{i18n>showMyHomeLabel}"\n            visible="{/showMyHome/visible}"\n            selected="{/showMyHome/selected}"><customData><core:CustomData key="help-id" value="SpacesEntry-showMyHome" writeToDom="true" /></customData></CheckBox><VBox class="sapUshellFlpSettingsDescriptionBorder" visible="{/showMyHome/visible}"><Text class="sapUshellFlpSettingsDescription sapUshellFlpSettingsWide" text="{i18n>showMyHomeDescriptionText}"/></VBox><CheckBox\n            text="{i18n>showMyHomeImportLabel}"\n            visible="{/showMyHomeImport/visible}"\n            selected="{/showMyHomeImport/selected}"><customData><core:CustomData key="help-id" value="SpacesEntry-showMyHomeImport" writeToDom="true" /></customData></CheckBox><VBox class="sapUshellFlpSettingsDescriptionBorder" visible="{/showMyHomeImport/visible}"><Text class="sapUshellFlpSettingsDescription sapUshellFlpSettingsWide" text="{i18n>showMyHomeImportDescription}"/></VBox></VBox></mvc:View>\n',
	"sap/ushell/components/shell/Settings/userAccount/UserAccountImgConsentSelector.fragment.xml":'<core:FragmentDefinition height="100%" width="100%" xmlns="sap.m" xmlns:core="sap.ui.core"><VBox><CheckBox id="imageConsentForUserCheckBox" selected="{config>/isImageConsentForUser}" text="{i18n>imgConsentMsg}"/><Panel expandable="true" headerText="{i18n>userImageConsentDialogShowTermsOfUse}" width="auto"><content><Text text="{i18n>userImageConsentDialogTermsOfUse}"/></content></Panel></VBox></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/Settings/userAccount/UserAccountSelector.view.xml":'<mvc:View\n\t\tcontrollerName="sap.ushell.components.shell.Settings.userAccount.UserAccountSelector"\n\t\txmlns="sap.m"\n\t\txmlns:mvc="sap.ui.core.mvc"\n\t\txmlns:core="sap.ui.core"><ObjectHeader icon="{config>/icon}" title="{config>/name}" backgroundDesign="Solid" class="sapUshellUserSettingDetailHeader"/><IconTabBar applyContentPadding="true" backgroundDesign="Transparent"><items><IconTabFilter text="{i18n>UserAccountFld}" key="userAccountSetting"><core:Fragment fragmentName="sap.ushell.components.shell.Settings.userAccount.UserAccountSetting" type="XML"></core:Fragment></IconTabFilter><IconTabFilter visible = "{config>/imgConsentEnabled}" text="{i18n>ProfileImgId}" key="userAccountImgConsentSelector"><core:Fragment fragmentName="sap.ushell.components.shell.Settings.userAccount.UserAccountImgConsentSelector" type="XML"></core:Fragment></IconTabFilter></items></IconTabBar></mvc:View>\n',
	"sap/ushell/components/shell/Settings/userAccount/UserAccountSetting.fragment.xml":'<core:FragmentDefinition\n    height="100%"\n    width="100%"\n    xmlns="sap.m"\n    xmlns:form="sap.ui.layout.form"\n    xmlns:core="sap.ui.core"><VBox class="sapUiSmallMargin"><form:SimpleForm editable="false" layout="ResponsiveGridLayout" labelSpanS="5" columnsM="7"><Label text="{i18n>UserAccountNameFld}" labelFor="userAccountuserName"/><Text text="{config>/name}" id="userAccountuserName"/><Label text="{i18n>UserAccountEmailFld}" labelFor="userAccountuserMail"/><Text text="{config>/mail}" id="userAccountuserMail"/><Label text="{i18n>UserAccountServerFld}" labelFor="userAccountuserServer"/><Text text="{config>/server}" id="userAccountuserServer"/></form:SimpleForm></VBox><VBox id="userAccountPersonalizationSection" class="sapUiSmallMargin"\n        visible="{config>/isResetPersonalizationVisible}"><Label text="{i18n>userAccountPersonalizationLabel}"/><Button id="resetPersonalizationButton" text="{i18n>userAccountResetPersonalizationButton}"\n            press="showMessageBoxWarningDeletePersonalization"/><Text class="sapUshellFlpSettingsWideDescription" text="{i18n>userAccountResetPersonalizationDescriptionText}"/></VBox></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/Settings/userAccount/UserAccountSetting.view.xml":'<mvc:View\n        controllerName="sap.ushell.components.shell.Settings.userAccount.UserAccountSelector"\n        xmlns:core="sap.ui.core"\n        xmlns:mvc="sap.ui.core.mvc"\n        xmlns="sap.m"><ObjectHeader\n        icon="{config>/icon}"\n        iconDensityAware="false"\n        title="{config>/name}"\n        backgroundDesign="Solid"\n        class="sapUshellUserSettingDetailHeader"/><core:Fragment fragmentName="sap.ushell.components.shell.Settings.userAccount.UserAccountSetting" type="XML"></core:Fragment></mvc:View>\n',
	"sap/ushell/components/shell/Settings/userActivities/UserActivitiesSetting.view.xml":'<mvc:View\n    controllerName="sap.ushell.components.shell.Settings.userActivities.UserActivitiesSetting"\n    xmlns="sap.m"\n    xmlns:lf="sap.ui.layout.form"\n    xmlns:mvc="sap.ui.core.mvc"><lf:SimpleForm id="userActivitiesForm" layout="ResponsiveGridLayout" class="sapUiSmallMarginBegin"><lf:content><VBox><CheckBox id="enableTrackingCheckbox" selected="{/checkboxIsChecked}" text="{i18n>trackingLabel}" wrapping="true"/><Button text="{i18n>cleanActivityLabel}" press=".onClearHistory" visible="{/checkboxIsChecked}"/></VBox></lf:content></lf:SimpleForm></mvc:View>\n',
	"sap/ushell/components/shell/Settings/userDefaults/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"sap.ushell.components.shell.Settings.userDefaults","applicationVersion":{"version":"1.0.0"},"i18n":{"bundleUrl":"../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"application"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"rootView":{"viewName":"sap.ushell.components.shell.Settings.userDefaults.view.UserDefaultsSetting","type":"XML","async":true,"id":"defaultParametersSelectorView"},"dependencies":{"minUI5Version":"1.82","libs":{"sap.m":{},"sap.ui.comp":{},"sap.ui.layout":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/Settings/userDefaults/view/ExtendedValueDialog.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:valueHelp="sap.ui.comp.valuehelpdialog"\n    xmlns:core="sap.ui.core"><valueHelp:ValueHelpDialog\n        id="extendedValueDialog"\n        basicSearchText="{/label}"\n        title="{/label}"\n        supportRanges="true"\n        supportRangesOnly="true"\n        key="{/key}"\n        displayFormat="UpperCase"\n        descriptionKey="{/label}"\n        filterMode="true"\n        stretch="{device>/system/phone}"\n        cancel=".closeValueHelp"\n        afterClose=".afterCloseValueHelp"></valueHelp:ValueHelpDialog></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/Settings/userDefaults/view/UserDefaultsSetting.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:smartvariants="sap.ui.comp.smartvariants"\n    xmlns:userDefaults="sap.ushell.components.shell.Settings.userDefaults"\n    controllerName="sap.ushell.components.shell.Settings.userDefaults.controller.UserDefaultsSetting"><VBox visible="{= ${systemContexts>/systemContexts}.length > 1}" class="sapUshellSystemContextsSelection"><HBox alignItems="Center"><Label labelFor="systemContextSelect" text="{i18n>userDefaultsSystemTitle}" /><Select\n                id="systemContextSelect"\n                selectedKey="{systemContexts>/selectedKey}"\n                items="{systemContexts>/systemContexts}"\n                change=".handleSystemContextChanged"><core:ListItem text="{systemContexts>label}" key="{systemContexts>id}" /></Select></HBox><Text class="sapUshellFlpSettingsWideDescription" text="{i18n>userDefaultsSystemContextInfo}" /></VBox><VBox><smartvariants:SmartVariantManagement\n            id="defaultSettingsVariantManagement"\n            class="sapUshellSmartVariantManagement"\n            showSetAsDefault="false"\n            visible="false"\n            standardItemText="{i18n>userDefaultsStandardView}" /></VBox><Text\n        text="{i18n>userDefaultsDiffState}"\n        visible="{ path: \'DirtyState>/selectedVariant\', formatter: \'.displayDiffText\' }"\n        class="sapUshellDefaultValuesDirtyState sapUiTinyMarginTop" /><userDefaults:UserDefaultsForm id="userDefaultsForm" persistencyKey="UserDefaultsFormPersKey" /></mvc:View>\n',
	"sap/ushell/components/shell/Settings/userLanguageRegion/LanguageRegionSelector.view.xml":'<mvc:View controllerName="sap.ushell.components.shell.Settings.userLanguageRegion.LanguageRegionSelector"\n    xmlns="sap.m"\n    xmlns:form="sap.ui.layout.form"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:core="sap.ui.core"><VBox class="sapUiSmallMargin" visible="{= !!${/isSettingsLoaded}}"><form:SimpleForm id="languageForm" editable="true" layout="ResponsiveGridLayout" labelSpanS="5" columnsM="7"><Label text="{i18n>languageAndRegionTit}" visible="{= !${/languageList}}" labelFor="languageSelectionInput"/><Text id="languageSelectionInput" text="{/selectedLanguageText}" visible="{= !${/languageList} }"/><Label text="{i18n>languageAndRegionTit}" visible="{= !!${/languageList}}" labelFor="languageSelectionSelect"/><ComboBox id="languageSelectionSelect" visible="{= !!${/languageList} }" items="{/languageList}" selectedKey="{/selectedLanguage}" width="100%" change="._handleSelectChange"><core:Item key="{key}" text="{text}" /></ComboBox><Label text="{i18n>dateFormatFld}" visible="{= !${/DateFormatList}}" labelFor="dateFormatCombo"/><Text id="dateFormatCombo" visible="{= !${/DateFormatList}}" text="{/selectedDatePattern}" /><Label text="{i18n>dateFormatFld}" visible="{= !!${/DateFormatList}}" labelFor="DateFormatSelectionSelect"/><Select id="DateFormatSelectionSelect" visible="{= !!${/DateFormatList}}" items="{/DateFormatList}" width="100%" selectedKey="{/selectedDatePattern}"><core:Item key="{value}" text="{description}" /></Select><Label text="{i18n>timeFormatFld}" visible="{= !${/TimeFormatList}}" labelFor="hoursSegmentedButton"/><SegmentedButton id="hoursSegmentedButton" visible="{= !${/TimeFormatList}}" enabled="false" selectedKey="{/selectedTimeFormat}"><items><SegmentedButtonItem key="12h" text="{i18n>btn12h}" /><SegmentedButtonItem key="24h" text="{i18n>btn24h}" /></items></SegmentedButton><Label text="{i18n>timeFormatFld}" visible="{= !!${/TimeFormatList}}" labelFor="TimeFormatSelectionSelect"/><Select id="TimeFormatSelectionSelect" visible="{= !!${/TimeFormatList}}" items="{/TimeFormatList}" width="100%" selectedKey="{/selectedTimeFormat}"><core:Item key="{value}" text="{description}" /></Select><Label text="{i18n>timeZoneFld}" visible="{= ${/isEnableUserProfileSetting}}" labelFor="TimeZoneSelectionSelect" /><ComboBox\n                    id="TimeZoneSelectionSelect"\n                    visible="{= !!${/TimeZoneList}}"\n                    items="{\n                        path: \'/TimeZoneList\',\n                        sorter: { path: \'description\' }\n                    }"\n                    width="100%"\n                    selectedKey="{/selectedTimeZone}"\n                ><core:Item key="{value}" text="{description}" /></ComboBox><Label visible="{= !${/isTimeZoneFromServerInUI5}}"/><Text text="{i18n>TimeZoneHelpingText}" class="sapUshellFlpSettingsHint" visible="{= !${/isTimeZoneFromServerInUI5}}" width="100%"/><Label text="{i18n>numberFormatFld}" visible="{= ${/isEnableUserProfileSetting}}" labelFor="NumberFormatSelectionSelect" /><Select id="NumberFormatSelectionSelect" visible="{= !!${/NumberFormatList}}" items="{/NumberFormatList}" width="100%" selectedKey="{/selectedNumberFormat}"><core:Item key="{value}" text="{description}" /></Select></form:SimpleForm><Text text="{i18n>LanguageAndRegionHelpingText}" class="sapUshellFlpSettingsWideDescription" visible="{= !!${/languageList}}" width="100%"/></VBox></mvc:View>\n',
	"sap/ushell/components/shell/Settings/userProfiling/UsageAnalyticsSelector.view.xml":'<mvc:View\n      width="100%"\n      controllerName="sap.ushell.components.shell.Settings.userProfiling.UsageAnalyticsSelector"\n      xmlns="sap.m"\n      xmlns:mvc="sap.ui.core.mvc"><VBox class="sapUiSmallMarginTop"><CheckBox text="{i18n>allowTracking}" selected="{/isTrackingUsageAnalytics}"/><VBox class="sapUshellFlpSettingsDescriptionBorder"><Text class="sapUshellFlpSettingsDescription" text="{/legalText}"/></VBox></VBox></mvc:View>\n',
	"sap/ushell/components/shell/Settings/userProfiling/UserProfiling.view.xml":'<mvc:View\n      width="100%"\n      controllerName="sap.ushell.components.shell.Settings.userProfiling.UserProfiling"\n      xmlns="sap.m"\n      xmlns:mvc="sap.ui.core.mvc"><VBox id="profilingContent" class="sapUshellUserSettingDetailContent" /></mvc:View>\n',
	"sap/ushell/components/shell/UserActionsMenu/UserActionsMenuPopover.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><Popover\n        id="sapUshellUserActionsMenuPopover"\n        placement="Bottom"\n        showArrow="true"\n        showHeader="false"\n        class="sapUshellPopupContainer sapContrastPlus"><content><List\n                class="sapUshellPopoverList"\n                showSeparators="None"\n                includeItemInSelection="true"\n                items="{\n                    path: \'/actions\',\n                    factory: \'.userActionsMenuPopoverItemFactory\'\n                }"><headerToolbar><Toolbar style="Clear"><Title level="H1" text="{/userName}" /></Toolbar></headerToolbar></List></content></Popover></core:FragmentDefinition>\n',
	"sap/ushell/components/tiles/action/ActionTile.view.xml":'<View\n    xmlns="sap.ui.core.mvc"\n    xmlns:ushell="sap.ushell.ui.tile"\n    controllerName="sap.ushell.components.tiles.action.ActionTile"\n    height="100%"\n    width="100%"><ushell:TileBase\n        id="actionTile"\n        title="{i18n>tile.display.action_chip}"\n        subtitle="{/displayText}"\n        icon="sap-icon://action"\n        press="onPress" /></View>\n',
	"sap/ushell/components/tiles/action/Configuration.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:form="sap.ui.layout.form"\n    xmlns:layout="sap.ui.layout"\n    xmlns:table="sap.ui.table"\n    controllerName="sap.ushell.components.tiles.action.Configuration"><MessageStrip\n        type="Warning"\n        enableFormattedText="true"\n        showIcon="true"\n        showCloseButton="false"\n        class="sapUiResponsiveMargin"\n        visible="{= !!${/config/deprecation_text}}"\n        text="{/config/deprecation_text}" /><form:Form id="configuration" maxContainerCols="2" minWidth="1024" editable="true"><form:layout><form:ResponsiveGridLayout /></form:layout><form:FormContainer id="categoryChipConfiguration" title="{i18n>configuration.category.action_chip_configuration}"><form:FormElement label="{i18n>configuration.semantic_object}"><Input\n                    id="semantic_objectInput"\n                    width="100%"\n                    tooltip="{i18n>configuration.semantic_object.tooltip}"\n                    maxLength="30"\n                    liveChange="onConfigurationInputChange"\n                    valueHelpRequest="onValueHelpRequest"\n                    showValueHelp="true"\n                    showSuggestion="true"\n                    value="{/value}"\n                    enabled="{/config/editable}" /></form:FormElement><form:FormElement label="{i18n>configuration.semantic_action}"><Input\n                    id="semantic_actionInput"\n                    value="{/config/semantic_action}"\n                    maxLength="50"\n                    liveChange="onConfigurationInputChange"\n                    enabled="{/config/editable}"\n                    valueHelpRequest="onActionValueHelpRequest"\n                    showValueHelp="true"\n                    showSuggestion="true"\n                    width="100%"\n                    tooltip="{i18n>configuration.semantic_action.tooltip}" /></form:FormElement></form:FormContainer><form:FormContainer id="categoryTargetApplication" title="{i18n>configuration.category.target_application}"><form:FormElement id="targetType" label="{i18n>configuration.target_applicationType}"><ComboBox\n                    id="targetTypeInput"\n                    selectedKey="{/config/navigation_provider}"\n                    enabled="{/config/editable}"\n                    selectionChange="onApplicationTypeChange" /></form:FormElement><form:FormElement id="application_description" label="{i18n>configuration.target_application.description}"><Input\n                    id="target_application_descriptionInput"\n                    value="{/config/display_title_text}"\n                    liveChange="onConfigurationInputChange"\n                    width="100%"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.target_application.description.tooltip}" /></form:FormElement><form:FormElement id="application_url" label="{i18n>configuration.target_application.url}"><Input\n                    id="target_application_urlInput"\n                    value="{/config/url}"\n                    enabled="{/config/editable}"\n                    maxLength="512"\n                    liveChange="onConfigurationInputChange"\n                    width="100%" tooltip="{i18n>configuration.target_application.url.tooltip}" /></form:FormElement><form:FormElement id="application_component" label="{i18n>configuration.target_application.component}"><Input\n                    id="target_application_componentInput"\n                    value="{/config/ui5_component}"\n                    enabled="{/config/editable}"\n                    liveChange="onConfigurationInputChange"\n                    width="100%"\n                    tooltip="{i18n>configuration.target_application.component.tooltip}" /></form:FormElement><form:FormElement id="navigation_provider_role" label="{i18n>configuration.navigation_provider_role}"><Input\n                    id="navigation_provider_roleInput"\n                    valueHelpRequest="onRoleValueHelpRequest"\n                    showValueHelp="true"\n                    showTableSuggestionValueHelp="true"\n                    enabled="{/config/editable}"\n                    showSuggestion="true"\n                    value="{/value}"\n                    width="100%"\n                    maxLength="10"\n                    class="sapUshellTargetMappingToUpperCase"\n                    tooltip="{i18n>configuration.navigation_provider_role.tooltip}"\n                    liveChange="onConfigurationInputChange"><suggestionColumns><Column hAlign="Begin" popinDisplay="Inline" demandPopin="true"><Label text="{i18n>configuration.navigation_provider_role}" /></Column><Column hAlign="Begin" popinDisplay="Inline" demandPopin="true"><Label text="{i18n>configuration.navigation_provider_instance}" /></Column></suggestionColumns></Input></form:FormElement><form:FormElement id="navigation_provider_instance"\n                label="{i18n>configuration.navigation_provider_instance}"><Input\n                    id="navigation_provider_instanceInput"\n                    value="{/value}"\n                    width="100%"\n                    maxLength="32"\n                    valueHelpRequest="onInstanceValueHelpRequest"\n                    enabled="{/config/editable}"\n                    showValueHelp="true"\n                    showSuggestion="true"\n                    suggest="instanceSuggest"\n                    tooltip="{i18n>configuration.navigation_provider_instance.tooltip}"\n                    liveChange="onConfigurationInputChange"\n                    class="sapUshellTargetMappingToUpperCase" /></form:FormElement><form:FormElement id="target_application_alias" label="{i18n>configuration.target_application_alias}"><Input\n                    id="target_application_aliasInput"\n                    value="{/value}"\n                    width="100%"\n                    valueHelpRequest="onAliasValueHelpRequest"\n                    enabled="{/config/editable}"\n                    showValueHelp="true"\n                    showSuggestion="true"\n                    suggest="aliasSuggest"\n                    tooltip="{i18n>configuration.target_application_alias.tooltip}"\n                    liveChange="onConfigurationInputChange" /></form:FormElement><form:FormElement id="target_application_id" label="{i18n>configuration.target_application_id}"><Input\n                    id="target_application_idInput"\n                    value="{/config/target_application_id}"\n                    width="100%"\n                    maxLength="32"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.target_application_id.tooltip}"\n                    liveChange="onConfigurationInputChange" /></form:FormElement><form:FormElement id="target_transaction" label="{i18n>configuration.target_transaction}"><Input\n                    id="target_transactionInput"\n                    value="{/config/transaction/code}"\n                    width="100%"\n                    maxLength="20"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.target_transaction.tooltip}"\n                    liveChange="onConfigurationInputChange" /></form:FormElement><form:FormElement id="target_wcf_application_id" label="{i18n>configuration.target_wcf.application_id}"><Input\n                    id="target_wcf_application_idInput"\n                    value="{/config/wcf/application_id}"\n                    width="100%"\n                    maxLength="30"\n                    enabled="{/config/editable}"\n                    liveChange="onConfigurationInputChange" /></form:FormElement><form:FormElement id="target_web_dynpro_application" label="{i18n>configuration.target_web_dynpro.application}"><Input\n                    id="target_web_dynpro_applicationInput"\n                    value="{/config/web_dynpro/application}"\n                    width="100%"\n                    maxLength="30"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.target_web_dynpro_application.tooltip}"\n                    liveChange="onConfigurationInputChange" /></form:FormElement><form:FormElement id="target_web_dynpro_configuration" label="{i18n>configuration.target_web_dynpro.configuration}"><Input\n                    id="target_web_dynpro_configurationInput"\n                    value="{/config/web_dynpro/configuration}"\n                    width="100%"\n                    maxLength="32"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.target_web_dynpro_application.tooltip}"\n                    liveChange="onConfigurationInputChange" /></form:FormElement><form:FormElement id="target_system_alias" label="{i18n>configuration.target_system_alias}"><Input\n                    id="target_system_aliasInput"\n                    value="{/config/target_system_alias}"\n                    width="100%"\n                    maxLength="30"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.target_system_alias.tooltip}"\n                    liveChange="onConfigurationInputChange" /></form:FormElement><form:FormElement id="urlt_application_component" label="{i18n>configuration.target_application.component}"><Input\n                    id="urlt_application_componentInput"\n                    value="{/config/url_template/parameters/ui5ComponentName}"\n                    enabled="{/config/editable}"\n                    liveChange="onConfigurationInputChange"\n                    width="100%"\n                    tooltip="{i18n>configuration.target_application.component.tooltip}" /></form:FormElement><form:FormElement id="target_urlt_system_alias" label="{i18n>configuration.target_system_alias}"><Input\n                    id="target_urlt_system_aliasInput"\n                    value="{/config/url_template/parameters/systemAlias}"\n                    width="100%"\n                    maxLength="30"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.target_system_alias.tooltip}"\n                    liveChange="onConfigurationInputChange" /></form:FormElement><form:FormElement id="application_type_deprecated"><MessageStrip text="{i18n>applicationTypeDeprecated}" type="Warning" showIcon="true" /></form:FormElement></form:FormContainer><form:FormContainer id="categoryGeneral" title="{i18n>configuration.category.general}"><form:layoutData><layout:GridData span="L12 M12 S12" /></form:layoutData><form:FormElement label="{i18n>configuration.display_info_text}"><Input\n                    id="additionalInfo"\n                    value="{/config/display_info_text}"\n                    enabled="{/config/editable}"\n                    width="100%"\n                    liveChange="onConfigurationInputChange" /></form:FormElement><form:FormElement label="{i18n>configuration.form_factor}" tooltip="{i18n>configuration.form_factor.tooltip}"><CheckBox\n                    id="desktopCB"\n                    text="{i18n>configuration.form_factor_desktop}"\n                    select="onFormFactorChange"\n                    selected="{/config/desktopChecked}"\n                    enabled="{/config/manualFormFactor}" /><CheckBox\n                    id="tabletCB"\n                    text="{i18n>configuration.form_factor_tablet}"\n                    select="onFormFactorChange"\n                    selected="{/config/tabletChecked}"\n                    enabled="{/config/manualFormFactor}" /><CheckBox\n                    id="phoneCB"\n                    text="{i18n>configuration.form_factor_phone}"\n                    select="onFormFactorChange"\n                    selected="{/config/phoneChecked}"\n                    enabled="{/config/manualFormFactor}" /></form:FormElement><form:FormElement label="{i18n>configuration.signature.table.title}"><VBox><table:Table\n                        id="mappingSignatureTable"\n                        rows="{/config/rows}"\n                        selectionBehavior="Row"\n                        selectionMode="Multi"\n                        visibleRowCount="5"\n                        enableColumnReordering="false"\n                        rowHeight="30px"><table:Column id="nameCol" width="82px"><Label text="{i18n>configuration.signature.table.name}" /><table:template><Input\n                                    value="{name}"\n                                    editable="{editable}"\n                                    placeholder="{i18n>configuration.signature.table.nameFieldLbl}"\n                                    change="checkDuplicateNames" /></table:template></table:Column><table:Column id="mandatoryCol" width="92px" hAlign="Center"><Label text="{i18n>configuration.signature.table.mandatory}" /><table:template><CheckBox selected="{mandatory}" editable="{editable}" select="handleMandatoryChange" /></table:template></table:Column><table:Column id="valueCol" width="85px"><Label text="{i18n>configuration.signature.table.value}" /><table:template><Input value="{value}" editable="{editable}" enabled="{valEnabled}" /></table:template></table:Column><table:Column id="isRegExCol" width="162px" hAlign="Center"><Label text="{i18n>configuration.signature.table.isRegEx}" /><table:template><CheckBox selected="{isRegularExpression}" editable="{editable}" enabled="{valEnabled}" /></table:template></table:Column><table:Column id="defValueCol" width="110px"><Label text="{i18n>configuration.signature.table.defaultValue}" /><table:template><Input value="{defaultValue}" editable="{editable}" enabled="{defValEnabled}" /></table:template></table:Column><table:Column id="renameToCol" width="82px" visible="{= ${/config/navigation_provider} !== \'LPD\' }"><Label\n                                text="{i18n>configuration.signature.table.renameTo}"\n                                tooltip="{i18n>configuration.signature.table.renameTo.tooltip}" /><table:template><Input value="{rename_to}" editable="{editable}" /></table:template></table:Column></table:Table><HBox wrap="Wrap"><CheckBox\n                            id="isUnknownAllowed"\n                            text="{i18n>configuration.signature.table.allowUndefined}"\n                            enabled="{/config/editable}"\n                            selected="{/config/isUnknownAllowed}"\n                            width="400px"><layoutData><FlexItemData growFactor="1"/></layoutData></CheckBox><Button\n                            id="addRow"\n                            enabled="{/config/editable}"\n                            text="{i18n>configuration.signature.table.add}"\n                            press="addRow"\n                            width="100px" /><Button\n                            id="deleteRow"\n                            enabled="{/config/editable}"\n                            text="{i18n>configuration.signature.table.delete}"\n                            press="deleteRow"\n                            width="100px" /></HBox></VBox></form:FormElement></form:FormContainer></form:Form></mvc:View>\n',
	"sap/ushell/components/tiles/applauncher/Configuration.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:form="sap.ui.layout.form"\n    xmlns:layout="sap.ui.layout"\n    xmlns:table="sap.ui.table"\n    controllerName="sap.ushell.components.tiles.applauncher.Configuration"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" visible="false" class="sapUiResponsiveMargin" /><MessageStrip\n        type="Warning"\n        enableFormattedText="true"\n        showIcon="true"\n        showCloseButton="false"\n        class="sapUiResponsiveMargin"\n        visible="{= !!${/config/deprecation_text}}"\n        text="{/config/deprecation_text}" /><form:SimpleForm id="configuration" maxContainerCols="2" minWidth="1024" editable="true"><form:content><core:Title id="categoryCommon" text="{i18n>configuration.category.general}" /><Label text="{i18n>configuration.display_title_text}" /><Input\n                id="titleInput"\n                value="{/config/display_title_text}"\n                enabled="{/config/editable}"\n                width="100%"\n                tooltip="{i18n>configuration.display_title_text.tooltip}"\n                editable="{/config/isLocaleSuitable}" /><Label text="{i18n>configuration.display_subtitle_text}" /><Input\n                id="subtitleInput"\n                value="{/config/display_subtitle_text}"\n                enabled="{/config/editable}"\n                width="100%"\n                tooltip="{i18n>configuration.display_subtitle_text.tooltip}"\n                editable="{/config/isLocaleSuitable}" /><Label text="{i18n>configuration.keywords}" /><Input\n                id="keywordsInput"\n                value="{/config/display_search_keywords}"\n                enabled="{/config/editable}"\n                width="100%"\n                tooltip="{i18n>configuration.keywords.tooltip}"\n                editable="{/config/isLocaleSuitable}" /><Label text="{i18n>configuration.display_icon_url}" /><Input\n                id="iconInput"\n                value="{/config/display_icon_url}"\n                enabled="{/config/editable}"\n                placeholder="sap-icon://inbox"\n                tooltip="{i18n>configuration.display_icon_url.tooltip}"\n                liveChange="onConfigurationInputChange"\n                valueHelpRequest="onIconValueHelpRequest"\n                showValueHelp="true" /><Label text="{i18n>configuration.display_info_text}" /><Input\n                id="infoInput"\n                value="{/config/display_info_text}"\n                enabled="{/config/editable}"\n                width="100%"\n                tooltip="{i18n>configuration.display_info_text.tooltip}"\n                editable="{/config/isLocaleSuitable}" /><core:Title id="categoryNavigation" text="{i18n>configuration.category.navigation}" /><Label text="{i18n>configuration.navigation_use_semantic_object}" /><CheckBox\n                id="useLpdCheckbox"\n                selected="{/config/navigation_use_semantic_object}"\n                tooltip="{i18n>configuration.navigation_use_semantic_object.tooltip}"\n                select="onCheckBoxChange"\n                enabled="{/config/editable}" /><Label text="{i18n>configuration.semantic_object}" /><Input\n                id="navigation_semantic_objectInput"\n                width="100%"\n                tooltip="{i18n>configuration.semantic_object.tooltip}"\n                maxLength="30"\n                liveChange="onConfigurationInputChange"\n                valueHelpRequest="onValueHelpRequest"\n                showValueHelp="true"\n                showSuggestion="true"\n                enabled="{= ${/enabled} &amp;&amp; ${/config/editable}}"\n                value="{/value}" /><Label text="{i18n>configuration.navigation_semantic_action}" /><Input\n                id="navigation_semantic_actionInput"\n                value="{/config/navigation_semantic_action}"\n                width="100%"\n                enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}"\n                maxLength="50"\n                valueHelpRequest="onActionValueHelpRequest"\n                showValueHelp="true"\n                showSuggestion="true"\n                tooltip="{i18n>configuration.navigation_semantic_action.tooltip}"\n                liveChange="onConfigurationInputChange" /><Label text="{i18n>configuration.navigation_semantic_parameters}" /><Input\n                id="navigation_semantic_parametersInput"\n                value="{/config/navigation_semantic_parameters}"\n                width="100%"\n                enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}"\n                tooltip="{i18n>configuration.navigation_semantic_parameters.tooltip}" /><Label text="{i18n>configuration.navigation_target_url}" /><Input\n                id="targetUrl"\n                value="{/config/navigation_target_url}"\n                type="Url"\n                width="100%"\n                tooltip="{i18n>configuration.navigation_target_url.tooltip}" /><Label /><core:Title id="categoryTileActions" text="{i18n>configuration.category.tile_actions}" /><table:Table\n                id="tileActions"\n                rows="{/config/tile_actions_rows}"\n                selectionBehavior="Row"\n                selectionMode="Multi"\n                visibleRowCount="3"\n                enableColumnReordering="false"\n                rowHeight="30px"><table:Column id="menuItem" width="80px" tooltip="{i18n>configuration.tile_actions.table.menu_item_tooltip}"><Label text="{i18n>configuration.tile_actions.table.menu_item}" /><table:template><Input value="{menu_title}" editable="{editable}" valueState="{valueState}" /></table:template></table:Column><table:Column id="targetType" width="85px" tooltip="{i18n>configuration.tile_actions.table.target_type_tooltip}"><Label text="{i18n>configuration.tile_actions.table.target_type}" /><table:template><ComboBox\n                            id="targetTypeCB"\n                            value="{target_type}"\n                            editable="{editable}"\n                            change="handleTargetTypeChange" /></table:template></table:Column><table:Column\n                    id="navigationTarget"\n                    width="162px"\n                    tooltip="{i18n>configuration.tile_actions.table.navigation_target_tooltip}"><Label text="{i18n>configuration.tile_actions.table.navigation_target}" /><table:template><Input\n                            liveChange="onConfigurationInputChange"\n                            valueHelpRequest="onTileActionValueHelp"\n                            showValueHelp="{isTargetTypeIntent}"\n                            showSuggestion="{isTargetTypeIntent}"\n                            value="{navigation_target}"\n                            editable="{editable}" /></table:template></table:Column><table:Column id="action" width="85px" tooltip="{i18n>configuration.tile_actions.table.action_tooltip}"><Label text="{i18n>configuration.tile_actions.table.action}" /><table:template><Input value="{action}" enabled="{isTargetTypeIntent}" editable="{editable}" /></table:template></table:Column><table:Column id="icon" width="110px" tooltip="{i18n>configuration.tile_actions.table.icon_tooltip}"><Label text="{i18n>configuration.tile_actions.table.icon}" /><table:template><Input\n                            value="{icon}"\n                            placeholder="sap-icon://inbox"\n                            editable="{editable}"\n                            valueStateText="{iconValueStateText}"\n                            valueState="{iconValueState}"\n                            liveChange="onConfigurationInputChange"\n                            valueHelpRequest="onTileActionIconValueHelp"\n                            showValueHelp="true" /></table:template></table:Column></table:Table><Label /><HBox alignItems="End" justifyContent="End"><Button\n                    id="addRow"\n                    text="{i18n>configuration.tile_actions.table.add}"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.tile_actions.table.add_tooltip}"\n                    press="addRow"\n                    width="100px" /><Button\n                    id="deleteRow"\n                    text="{i18n>configuration.tile_actions.table.remove}"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.tile_actions.table.remove_tooltip}"\n                    press="deleteRow"\n                    width="100px" /></HBox></form:content></form:SimpleForm><HBox visible="false"><Dialog\n            id="selectIconDialog"\n            leftButton="ok"\n            rightButton="cancel"\n            title="{i18n>configuration.select_icon}"\n            class="sapContrastPlus"><content><layout:ResponsiveFlowLayout id="icons" /><HBox visible="true"><Button id="ok" enabled="{/config/ok.enabled}" text="{i18n>configuration.ok}" /><Button id="cancel" text="{i18n>configuration.cancel}" press="onSelectIconClose" /></HBox></content></Dialog></HBox></mvc:View>\n',
	"sap/ushell/components/tiles/applauncherdynamic/Configuration.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:form="sap.ui.layout.form"\n    xmlns:layout="sap.ui.layout"\n    xmlns:table="sap.ui.table"\n    controllerName="sap.ushell.components.tiles.applauncherdynamic.Configuration"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" visible="false" class="sapUiResponsiveMargin" /><MessageStrip\n        type="Warning"\n        enableFormattedText="true"\n        showIcon="true"\n        showCloseButton="false"\n        class="sapUiResponsiveMargin"\n        visible="{= !!${/config/deprecation_text}}"\n        text="{/config/deprecation_text}" /><form:SimpleForm id="configuration" maxContainerCols="8" minWidth="1024" editable="true"><form:content><core:Title id="categoryCommon" text="{i18n>configuration.category.general}" /><Label text="{i18n>configuration.display_title_text}" /><Input\n                id="titleInput"\n                value="{/config/display_title_text}"\n                width="100%"\n                tooltip="{i18n>configuration.display_title_text.tooltip}" enabled="{/config/editable}"\n                editable="{/config/isLocaleSuitable}" /><Label text="{i18n>configuration.display_subtitle_text}" /><Input\n                id="subtitleInput"\n                value="{/config/display_subtitle_text}"\n                enabled="{/config/editable}"\n                tooltip="{i18n>configuration.display_subtitle_text.tooltip}"\n                editable="{/config/isLocaleSuitable}" /><Label text="{i18n>configuration.keywords}" /><Input\n                id="keywordsInput"\n                value="{/config/display_search_keywords}"\n                enabled="{/config/editable}"\n                width="100%"\n                tooltip="{i18n>configuration.keywords.tooltip}"\n                editable="{/config/isLocaleSuitable}" /><Label text="{i18n>configuration.display_icon_url}" /><Input\n                id="iconInput"\n                value="{/config/display_icon_url}"\n                enabled="{/config/editable}"\n                placeholder="sap-icon://inbox"\n                tooltip="{i18n>configuration.display_icon_url.tooltip}"\n                liveChange="onConfigurationInputChange"\n                valueHelpRequest="onIconValueHelpRequest"\n                showValueHelp="true" /><Label text="{i18n>configuration.display_info_text}" /><Input\n                id="infoInput"\n                value="{/config/display_info_text}"\n                width="100%"\n                enabled="{/config/editable}"\n                tooltip="{i18n>configuration.display_info_text.tooltip}"\n                editable="{/config/isLocaleSuitable}" /><Label text="{i18n>configuration.display_number_unit}" /><Input\n                id="number_unitInput"\n                value="{/config/display_number_unit}"\n                width="100%"\n                enabled="{/config/editable}"\n                tooltip="{i18n>configuration.display_number_unit.tooltip}" /><core:Title id="categoryDynamicData" text="{i18n>configuration.category.dynamic_data}" /><Label text="{i18n>configuration.service_url}" /><Input\n                id="serviceUrlInput"\n                value="{/config/service_url}"\n                width="100%"\n                enabled="{/config/editable}"\n                tooltip="{i18n>configuration.service_url.tooltip}" /><Label text="{i18n>configuration.service_refresh_interval}" /><Input\n                id="refreshInput"\n                value="{/config/service_refresh_interval}"\n                type="Number"\n                enabled="{/config/editable}"\n                placeholder="{i18n>configuration.seconds}"\n                tooltip="{i18n>configuration.seconds.tooltip}" /><core:Title id="categoryNavigation" text="{i18n>configuration.category.navigation}" /><Label text="{i18n>configuration.navigation_use_semantic_object}" /><CheckBox\n                id="useLpdCheckbox"\n                selected="{/config/navigation_use_semantic_object}"\n                select="onCheckBoxChange"\n                tooltip="{i18n>configuration.navigation_use_semantic_object.tooltip}"\n                enabled="{/config/editable}" /><Label text="{i18n>configuration.semantic_object}" /><Input\n                id="navigation_semantic_objectInput"\n                width="100%"\n                tooltip="{i18n>configuration.semantic_object.tooltip}"\n                maxLength="30"\n                liveChange="onConfigurationInputChange"\n                valueHelpRequest="onValueHelpRequest"\n                showValueHelp="true"\n                showSuggestion="true"\n                enabled="{= ${/enabled} &amp;&amp; ${/config/editable}}"\n                value="{/value}" /><Label text="{i18n>configuration.navigation_semantic_action}" /><Input\n                id="navigation_semantic_actionInput"\n                value="{/config/navigation_semantic_action}"\n                width="100%"\n                maxLength="50"\n                enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}"\n                tooltip="{i18n>configuration.navigation_semantic_action.tooltip}"\n                liveChange="onConfigurationInputChange"\n                valueHelpRequest="onActionValueHelpRequest"\n                showValueHelp="true"\n                showSuggestion="true" /><Label text="{i18n>configuration.navigation_semantic_parameters}" /><Input\n                id="navigation_semantic_parametersInput"\n                value="{/config/navigation_semantic_parameters}"\n                width="100%"\n                enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}"\n                tooltip="{i18n>configuration.navigation_semantic_parameters.tooltip}" /><Label text="{i18n>configuration.navigation_target_url}" /><Input\n                id="targetUrl"\n                value="{/config/navigation_target_url}"\n                type="Url"\n                width="100%"\n                tooltip="{i18n>configuration.navigation_target_url.tooltip}" /><core:Title id="categoryTileActions" text="{i18n>configuration.category.tile_actions}" /><table:Table\n                id="tileActions"\n                rows="{/config/tile_actions_rows}"\n                selectionBehavior="Row"\n                selectionMode="Multi"\n                visibleRowCount="3"\n                enableColumnReordering="false"\n                rowHeight="30px"><table:Column id="menuItem" width="80px" tooltip="{i18n>configuration.tile_actions.table.menu_item_tooltip}"><Label text="{i18n>configuration.tile_actions.table.menu_item}" /><table:template><Input value="{menu_title}" enabled="{editable}" valueState="{valueState}" /></table:template></table:Column><table:Column\n                    id="targetType"\n                    width="85px"\n                    tooltip="{i18n>configuration.tile_actions.table.target_type_tooltip}"><Label text="{i18n>configuration.tile_actions.table.target_type}" /><table:template><ComboBox\n                            id="targetTypeCB"\n                            value="{target_type}"\n                            enabled="{editable}"\n                            change="handleTargetTypeChange" /></table:template></table:Column><table:Column\n                    id="navigationTarget"\n                    width="162px"\n                    tooltip="{i18n>configuration.tile_actions.table.navigation_target_tooltip}"><Label text="{i18n>configuration.tile_actions.table.navigation_target}" /><table:template><Input\n                            liveChange="onConfigurationInputChange"\n                            valueHelpRequest="onTileActionValueHelp"\n                            showValueHelp="{isTargetTypeIntent}"\n                            showSuggestion="{isTargetTypeIntent}"\n                            value="{navigation_target}"\n                            enabled="{editable}" /></table:template></table:Column><table:Column id="action" width="85px" tooltip="{i18n>configuration.tile_actions.table.action_tooltip}"><Label text="{i18n>configuration.tile_actions.table.action}" /><table:template><Input value="{action}" enabled="{isTargetTypeIntent}" /></table:template></table:Column><table:Column id="icon" width="110px" tooltip="{i18n>configuration.tile_actions.table.icon_tooltip}"><Label text="{i18n>configuration.tile_actions.table.icon}" /><table:template><Input\n                            value="{icon}"\n                            placeholder="sap-icon://inbox"\n                            enabled="{/config/editable}"\n                            valueState="{iconValueState}"\n                            valueStateText="{iconValueStateText}"\n                            liveChange="onConfigurationInputChange"\n                            valueHelpRequest="onTileActionIconValueHelp"\n                            showValueHelp="true" /></table:template></table:Column></table:Table><Label /><HBox alignItems="End" justifyContent="End"><Button\n                    id="addRow"\n                    text="{i18n>configuration.tile_actions.table.add}"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.tile_actions.table.add_tooltip}"\n                    press="addRow"\n                    width="100px" /><Button\n                    id="deleteRow"\n                    text="{i18n>configuration.tile_actions.table.remove}"\n                    enabled="{/config/editable}"\n                    tooltip="{i18n>configuration.tile_actions.table.remove_tooltip}"\n                    press="deleteRow"\n                    width="100px" /></HBox></form:content></form:SimpleForm><HBox visible="false"><Dialog\n            id="selectIconDialog"\n            class="sapContrastPlus"\n            leftButton="ok"\n            rightButton="cancel"\n            title="{i18n>configuration.select_icon}"><content><layout:ResponsiveFlowLayout id="icons" /><HBox visible="true"><Button id="ok" enabled="{/config/ok.enabled}" text="{i18n>configuration.ok}" /><Button id="cancel" text="{i18n>configuration.cancel}" press="onSelectIconClose" /></HBox></content></Dialog></HBox></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncher/StaticTile.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.tiles.cdm.applauncher.StaticTile"\n    height="100%"\n    width="100%"><GenericTile\n        additionalTooltip="{/properties/contentProviderLabel}"\n        systemInfo="{= ${/properties/showContentProviderInfoOnVisualizations} ? ${/properties/contentProviderLabel} : \'\'}"\n        frameType="{/properties/frameType}"\n        header="{/properties/title}"\n        mode="{/properties/mode}"\n        scope="{/properties/scope}"\n        sizeBehavior="{/properties/sizeBehavior}"\n        subheader="{/properties/subtitle}"\n        url="{\n            path: \'/properties/targetURL\',\n            formatter: \'._getLeanUrl\'\n        }"\n        wrappingType="{/properties/wrappingType}"\n        press=".onPress"><dependents><TileContent id="standardTileContent" footer="{/properties/info}" /><TileContent id="imageTileContent" footer="{/properties/info}"><ImageContent src="{/properties/icon}" /></TileContent></dependents></GenericTile></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncher/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncher","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","tags":{"keywords":[]},"ach":"CA-FE-FLP-COR"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncher","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncher.StaticTile","type":"XML"},"handleValidation":false,"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile"\n    height="100%"\n    width="100%"><GenericTile\n        additionalTooltip="{/properties/contentProviderLabel}"\n        systemInfo="{= ${/properties/showContentProviderInfoOnVisualizations} ? ${/properties/contentProviderLabel} : \'\'}"\n        frameType="{/properties/frameType}"\n        header="{/properties/title}"\n        scope="{/properties/scope}"\n        sizeBehavior="{/properties/sizeBehavior}"\n        subheader="{/properties/subtitle}"\n        url="{\n            path: \'/properties/targetURL\',\n            formatter: \'._getLeanUrl\'\n        }"\n        wrappingType="{/properties/wrappingType}"\n        press=".onPress"><TileContent\n            id="numericTileContent"\n            footer="{/properties/info}"\n            footerColor="{\n                path: \'/properties/infoState\',\n                formatter: \'._formatValueColor\'\n            }"\n            unit="{/properties/number_unit}"><NumericContent\n                icon="{/properties/icon}"\n                indicator="{/properties/number_state_arrow}"\n                scale="{/properties/number_factor}"\n                truncateValueTo="5"\n                value="{/properties/number_value}"\n                valueColor="{\n                    path: \'/properties/number_value_state\',\n                    formatter: \'._getValueColor\'\n                }"\n                withMargin="false"\n                width="100%" /></TileContent></GenericTile></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncherdynamic","_version":"1.0.0","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","description":"","tags":{"keywords":[]},"ach":"CA-FLP-FE-COR"},"sap.ui":{"_version":"1.1.0","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncherdynamic","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile","type":"JS"},"handleValidation":false}}',
	"sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.view.js":function(){
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.require(["sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/commons/HarveyBallMicroChart","sap/suite/ui/commons/HarveyBallMicroChartItem","sap/suite/ui/commons/TileContent","sap/suite/ui/commons/GenericTile"],function(e,a,i,t,s,o,l){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorHarveyBall.HarveyBallTile",{getControllerName:function(){},createContent:function(){var e=new t({total:"{/value}",size:"{/size}",totalLabel:"{/totalLabel}",items:[new s({fraction:"{/fractionValue}",fractionLabel:"{/fractionLabel}",color:"{/color}"})]});var a=new o({size:"{/size}",content:e});this.oTile=new l({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[a]})}})});
},
	"sap/ushell/components/tiles/indicatorTileUtils/indicatorTileHelper.js":function(){
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper");sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper=function(t){this.tile=t};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setErrorState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Failed)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadingState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loading)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadedState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loaded)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendDown=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Down)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendUp=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Up)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendNeutral=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.None)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdGood=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdBad=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdCritical=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdNeutral=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.calculateThreshold=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTile=function(t){this.tile=t};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.getTile=function(){return this.tile}})();
},
	"sap/ushell/components/visualizationOrganizer/VisualizationOrganizerPopover.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><Popover\n        id="sapUshellVisualizationOrganizerPopover"\n        class="sapContrastPlus"\n        placement="VerticalPreferredBottom"\n        contentHeight="220px"\n        modal="true"\n        titleAlignment="Start"\n        showHeader="true"\n        title="{i18n>VisualizationOrganizer.Title}"><subHeader><HBox class="sapUiTinyMarginBeginEnd sapUiTinyMarginTop"><SearchField\n                    id="sapUshellVisualizationOrganizerSearch"\n                    tooltip="{i18n>VisualizationOrganizer.SearchField.Tooltip}"\n                    search="._onSearch"\n                    width="auto"/><ToggleButton id="sapUshellVisualizationOrganizerSelectedPages"\n                    icon="sap-icon://multi-select"\n                    press="._onSearch"\n                    class="sapUiTinyMarginBeginEnd"\n                tooltip="{i18n>VisualizationOrganizer.ToggleButton.Tooltip}"/></HBox></subHeader><content><List\n                id="sapUshellVisualizationOrganizerSpacesList"\n                mode="MultiSelect"\n                items="{\n                    path: \'/pages\',\n                    sorter: { path: \'\', group: \'.groupBySpace\' },\n                    groupHeaderFactory: \'.getGroupHeader\'\n                }"\n                noDataText="{i18n>VisualizationOrganizer.PagesList.NoDataText}"\n                selectionChange=".onSelectionChange"><items><StandardListItem\n                        title="{title}"\n                        type="Active"\n                        selected="{selected}"\n                        press=".pagePressed"/></items></List></content><footer><Bar><contentRight><Button\n                        id="sapUshellVisualizationOrganizerOKButton"\n                        text="{i18n>okBtn}"\n                        type="Emphasized"\n                        press=".okay"/><Button\n                        id="sapUshellVisualizationOrganizerCloseButton"\n                        text="{i18n>cancelBtn}"\n                        press=".cancel"/></contentRight></Bar></footer></Popover></core:FragmentDefinition>\n',
	"sap/ushell/components/workPageBuilder/manifest.json":'{"_version":"1.39.0","sap.app":{"id":"sap.ushell.components.workPageBuilder","applicationVersion":{"version":"1.115.1"},"i18n":"./resources/resources.properties","ach":"CA-FLP-FE-UI","type":"component","title":""},"sap.ui":{"fullWidth":false,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"resources/resources.properties"}},"componentName":"sap.ushell.components.workPageBuilder","componentUsages":{"ContentFinderAppSearch":{"name":"sap.ushell.components.contentFinderAppSearch","lazy":true},"ContentFinder":{"name":"sap.ushell.components.contentFinder","lazy":true}},"rootView":{"viewName":"sap.ushell.components.workPageBuilder.view.WorkPageBuilder","type":"XML","async":true},"dependencies":{"minUI5Version":"1.99","libs":{"sap.ui.core":{},"sap.m":{},"sap.f":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/workPageBuilder/view/WorkPageBuilder.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns:cep="sap.ushell.components.workPageBuilder.controls"\n    controllerName="sap.ushell.components.workPageBuilder.controller.WorkPageBuilder"\n    id="sapCepWorkPageBuilder"\n    height="100%"><Page\n        id="sapCepPage"\n        showHeader="false"\n        showFooter="{= !!${/editMode} &amp;&amp; !!${/showFooter} }"\n        backgroundDesign="Transparent"\n        floatingFooter="true"><cep:WorkPage\n            id="sapCepWorkPage"\n            editMode="{/editMode}"\n            emptyIllustrationTitle="{i18n>WorkPage.EmptyPage.Title}"\n            emptyIllustrationMessage="{i18n>WorkPage.EmptyPage.Message}"\n            emptyIllustrationButtonText="{i18n>WorkPage.EmptyPage.Button.Add}"\n            rows="{path: \'Rows\', templateShareable: false, key: \'Id\'}"\n            loaded="{/loaded}"\n            addFirstRow=".onAddFirstRow"><cep:title><Title text="{Descriptor/title}" level="H2" titleStyle="H3"\n                    visible="{= !!${Descriptor/title}}"/></cep:title><cep:WorkPageRow\n                id="sapCepRow"\n                addRowButtonTooltip="{i18n>WorkPage.Row.AddRowButtonTooltip}"\n                editMode="{/editMode}"\n                maxColumns="{/maxColumns}"\n                columns="{path: \'Columns\', templateShareable:false, key: \'Id\'}"\n                addRow=".onAddRow"><cep:controlButtons><Button\n                        id="sapCepRowButtonDelete"\n                        class="sapCepWorkPageRowControlButton"\n                        press=".onDeleteRow"\n                        icon="sap-icon://delete"\n                        tooltip="{i18n>WorkPage.Row.OverflowToolbar.DeleteRowButtonTooltip}"\n                        visible="{/editMode}"/></cep:controlButtons><cep:headerBar><OverflowToolbar id="sapCepRowOverflowToolbar" class="sapCepRowOverflowToolbar"\n                        visible="{= ${/editMode} || !!${Descriptor/title} }"><Label id="sapCepLabelTitle" labelFor="sapCepRowInputTitle"\n                            text="{i18n>WorkPage.Row.OverflowToolbar.RowTitleLabel}" visible="{/editMode}"><layoutData><OverflowToolbarLayoutData group="1"/></layoutData></Label><Input id="sapCepRowInputTitle" value="{Descriptor/title}" editable="true"\n                            placeholder="{i18n>WorkPage.Row.OverflowToolbar.RowTitleOptional}"\n                            change=".onEditTitle" visible="{/editMode}"><layoutData><OverflowToolbarLayoutData group="1" shrinkable="true" minWidth="12rem"/></layoutData></Input></OverflowToolbar></cep:headerBar><cep:messageStrip><MessageStrip\n                        type="Warning"\n                        showIcon="true"\n                        text="{i18n>WorkPage.Row.MessageStrip.DeprecatedColumnCount}"\n                        class="sapCepRowMessageStrip"\n                        visible="{= ${/editMode} &amp;&amp; ${Columns}.length > ${/maxColumns}}"/></cep:messageStrip><cep:title><Title id="sapCepRowTitle" wrapping="true" class="sapCepRowSectionTitle" text="{Descriptor/title}"\n                        visible="{= !${/editMode} }"/></cep:title><cep:WorkPageColumn\n                    id="sapCepColumn"\n                    editMode="{/editMode}"\n                    columnWidth="{Descriptor/columnWidth}"\n                    deleteColumnButtonTooltip="{i18n>WorkPage.Column.DeleteColumnButtonTooltip}"\n                    addColumnButtonTooltip="{i18n>WorkPage.Column.AddColumnButtonTooltip}"\n                    addWidgetButtonText="{i18n>WorkPage.Column.AddWidgetButtonText}"\n                    columnResized=".onResize"\n                    columnResizeCompleted=".onResizeCompleted"\n                    cells="{path: \'Cells\', templateShareable:false, key: \'Id\'}"\n                    addColumn=".onAddColumn"\n                    removeColumn=".onDeleteColumn"\n                    addWidget=".openWidgetGallery"><cep:WorkPageCell\n                        id="sapCepCell"\n                        editMode="{/editMode}"\n                        widgets="{path: \'Widgets\', factory: \'.widgetFactory\', key: \'Id\'}"\n                        tileMode="{\n                            parts: [\n                                { path: \'Widgets\' }\n                            ], formatter: \'.tileMode\'\n                        }"\n                        moveVisualization=".onGridDrop"\n                        gridColumnsChange=".onGridColumnsChange"\n                        deleteWidgetTooltip="{i18n>WorkPage.WidgetContainer.DeleteWidgetButtonTooltip}"\n                        addApplicationButtonText="{i18n>WorkPage.Section.AddVizInstanceButtonText}"\n                        gridContainerGap="{viewSettings>/gridContainerGap/gridContainerGap}"\n                        gridContainerGapXS="{viewSettings>/gridContainerGap/gridContainerGapXS}"\n                        gridContainerGapS="{viewSettings>/gridContainerGap/gridContainerGapS}"\n                        gridContainerGapM="{viewSettings>/gridContainerGap/gridContainerGapM}"\n                        gridContainerGapL="{viewSettings>/gridContainerGap/gridContainerGapL}"\n                        gridContainerGapXL="{viewSettings>/gridContainerGap/gridContainerGapXL}"\n                        gridContainerRowSize="{viewSettings>/gridContainerRowSize/gridContainerRowSize}"\n                        gridContainerRowSizeXS="{viewSettings>/gridContainerRowSize/gridContainerRowSizeXS}"\n                        gridContainerRowSizeS="{viewSettings>/gridContainerRowSize/gridContainerRowSizeS}"\n                        gridContainerRowSizeM="{viewSettings>/gridContainerRowSize/gridContainerRowSizeM}"\n                        gridContainerRowSizeL="{viewSettings>/gridContainerRowSize/gridContainerRowSizeL}"\n                        gridContainerRowSizeXL="{viewSettings>/gridContainerRowSize/gridContainerRowSizeXL}"\n                        emptyIllustrationTitle="{i18n>WorkPage.Cell.EmptyIllustrationTitle}"\n                        emptyIllustrationMessage="{i18n>WorkPage.Cell.EmptyIllustrationDescription}"\n                        gridContainerBorderReached=".onGridContainerBorderReached"><cep:headerBar><OverflowToolbar id="sapCepCellOverflowToolbar" class="sapCepOverflowToolbarCell"\n                                height="4rem"\n                                visible="{= ${/editMode} || !!${Descriptor/title} }"><ToolbarSpacer/><Button\n                                    class="sapCepWorkPageCellControlButtons"\n                                    icon="sap-icon://add"\n                                    press=".openTilesAppSearch"\n                                    tooltip="{i18n>WorkPage.Cell.HeaderBar.AddTilesTooltip}"\n                                    visible="{\n                                        parts: [\n                                            { path: \'Widgets\' },\n                                            { path: \'/editMode\' }\n                                        ], formatter: \'.showAppSearchButton\'\n                                    }"\n                                    type="Ghost"/><Button\n                                    class="sapCepWorkPageCellControlButtons"\n                                    icon="sap-icon://delete"\n                                    press=".onDeleteCell"\n                                    tooltip="{i18n>WorkPage.Cell.HeaderBar.DeleteWidgetTooltip}"\n                                    type="Ghost"/></OverflowToolbar></cep:headerBar></cep:WorkPageCell><cep:dragDropConfig><dnd:DropInfo\n                            drop=".onCellDrop($event)"\n                            enabled="{/editMode}"\n                            targetAggregation="cells"\n                            dragEnter=".onCellDragEnter"\n                            dropPosition="On"\n                        /></cep:dragDropConfig></cep:WorkPageColumn></cep:WorkPageRow></cep:WorkPage><footer><Bar id="sapCepFooterBar"><contentRight><Button\n                        text="{i18n>WorkPage.EditMode.Save}"\n                        enabled="{/workPageHasChanges}"\n                        type="Emphasized"\n                        press=".saveEditChanges"/><Button\n                        text="{i18n>WorkPage.EditMode.Cancel}"\n                        press=".cancelEditChanges"/></contentRight></Bar></footer></Page></mvc:View>\n',
	"sap/ushell/components/workPageBuilder/view/WorkPageRowDeleteDialog.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><Dialog\n        id="sapCepWorkPageRowDeleteDialog"\n        type="Message"\n        title="{i18n>WorkPage.Row.DeleteDialog.Title}"><Text text="{i18n>WorkPage.Row.DeleteDialog.ConfirmText}" /><beginButton><Button type="Emphasized" text="{i18n>WorkPage.Row.DeleteDialog.Button.Confirm}" /></beginButton><endButton><Button text="{i18n>WorkPage.Row.DeleteDialog.Button.Cancel}" press=".onRowDeleteCancel" /></endButton></Dialog></core:FragmentDefinition>\n',
	"sap/ushell/components/workPageRuntime/manifest.json":'{"_version":"1.39.0","sap.app":{"id":"sap.ushell.components.workPageRuntime","applicationVersion":{"version":"1.115.1"},"ach":"CA-FLP-FE-UI","type":"component","title":""},"sap.ui":{"fullWidth":false,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentUsages":{"pageBuilder":{"name":"sap.ushell.components.workPageBuilder","lazy":true}},"componentName":"sap.ushell.components.workPageRuntime","rootView":{"viewName":"sap.ushell.components.workPageRuntime.view.WorkPageRuntime","type":"XML","async":true},"dependencies":{"minUI5Version":"1.99","libs":{"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/workPageRuntime/view/WorkPageRuntime.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.workPageRuntime.controller.WorkPageRuntime"\n    height="100%"><NavContainer id="workpageNavContainer"><Page\n            id="workPage"\n            busy="{= !${/loaded}}"\n            enableScrolling="false"\n            showHeader="false"><core:ComponentContainer\n                height="100%"\n                usage="pageBuilder"\n                manifest="true"\n                async="true"\n                componentCreated="onWorkPageBuilderCreated"\n            /></Page><MessagePage\n            id="errorPage"\n            showHeader="false"\n            description="" /><Page\n            id="emptyPage"\n            showHeader="false" /></NavContainer></mvc:View>\n',
	"sap/ushell/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell","type":"library","embeds":["appRuntime/ui5/plugins/rtaAgent","appRuntime/ui5/plugins/rtaShell","appRuntime/ui5/plugins/scriptAgent","components/appfinder","components/cepsearchresult/app","components/cepsearchresult/app/cards/searchresultwidget","components/contentFinder","components/homeApp/error","components/homepage","components/pages","components/runtimeSwitcher","components/shell/MenuBar","components/shell/NavigationBarMenu","components/shell/Search","components/shell/Settings/userDefaults","components/tiles/cdm/applauncher","components/tiles/cdm/applauncherdynamic","components/workPageBuilder","components/workPageRuntime","plugins/appwarmup","plugins/ghostapp","plugins/rta","plugins/rta-personalize","renderers/fiori2/search/searchComponent"],"applicationVersion":{"version":"1.115.1"},"title":"SAP library: sap.ushell","description":"SAP library: sap.ushell","ach":"CA-FLP-FE-UI","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.115","libs":{"sap.f":{"minVersion":"1.115.1","lazy":true},"sap.m":{"minVersion":"1.115.1"},"sap.ui.core":{"minVersion":"1.115.1"},"sap.ui.layout":{"minVersion":"1.115.1","lazy":true},"sap.suite.ui.commons":{"minVersion":"1.115.0","lazy":true},"sap.suite.ui.microchart":{"minVersion":"1.115.1","lazy":true},"sap.ui.comp":{"minVersion":"1.115.1","lazy":true},"sap.ui.export":{"minVersion":"1.115.1","lazy":true},"sap.collaboration":{"minVersion":"1.115.0","lazy":true},"sap.ui.table":{"minVersion":"1.115.1","lazy":true},"sap.ui.integration":{"minVersion":"1.115.1","lazy":true},"sap.ui.generic.app":{"minVersion":"1.115.0","lazy":true},"sap.esh.search.ui":{"minVersion":"1.115.0","lazy":true}}},"library":{"i18n":false,"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}',
	"sap/ushell/plugins/appwarmup/manifest.json":'{"_version":"1.1.0","sap.app":{"_version":"1.1.0","id":"sap.ushell.plugins.appwarmup","type":"component","applicationVersion":{"version":"1.0.0"}},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.54.0","libs":{"sap.ui.core":{"minVersion":"1.54.0"}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/plugins/ghostapp/manifest.json":'{"_version":"1.2.0","sap.app":{"_version":"1.2.0","id":"sap.ushell.plugins.ghostapp","i18n":"i18n/i18n.properties","type":"application","applicationVersion":{"version":"11.7.0-SNAPSHOT"},"title":"Warmup Application","description":"List report app for code warm-up during idle time","tags":{"keywords":[]},"ach":"MM-FIO-IM-SGM","dataSources":{"mainService":{"uri":"/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/","settings":{"localUri":"localService/metadata.xml"}}},"offline":false,"resources":"resources.json","sourceTemplate":{"id":"ui5template.smarttemplate","version":"1.0.0"}},"sap.fiori":{"_version":"1.1.0","registrationIds":["F0000"],"archeType":"analytical"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_bluecrystal"]},"sap.ui5":{"_version":"1.1.0","services":{"ShellUIService":{"factoryName":"sap.ushell.plugins.appwarmup.ShellUIService"}},"resources":{"js":[],"css":[]},"config":{"sapFiori2Adaptation":true},"dependencies":{"minUI5Version":"1.53.0-SNAPSHOT","libs":{"sap.ui.core":{},"sap.m":{"lazy":false},"sap.ui.comp":{"lazy":false},"sap.ui.generic.app":{"minVersion":"1.34.0"},"sap.uxap":{"lazy":false},"sap.suite.ui.generic.template":{}}},"models":{"":{"dataSource":"mainService","preload":true,"type":"sap.ushell.plugins.ghostapp.FakeModel","settings":{"defaultBindingMode":"TwoWay","defaultCountMode":"Inline","tokenHandling":false,"refreshAfterChange":false}}},"extends":{"extensions":{}},"contentDensities":{"compact":true,"cozy":true},"componentName":"sap.ushell.plugins.ghostapp"},"sap.ui.generic.app":{"_version":"1.1.0","settings":{"ghostapp":true},"pages":[{"entitySet":"MaterialMultiStockByDates","component":{"name":"sap.suite.ui.generic.template.ListReport","list":true,"settings":{"smartVariantManagement":true}}}]},"sap.platform.abap":{"_version":"1.1.0","uri":"/sap/bc/ui5_ui5/sap/stock_multimas1"},"sap.platform.hcp":{"_version":"1.1.0","uri":""},"sap.copilot":{"_version":"1.0.0","contextAnalysis":{"allowAddingObjectsFromAppScreenToCollection":false}}}',
	"sap/ushell/plugins/rta-personalize/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"id":"sap.ushell.plugins.rta-personalize","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA","resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.dt":{"minVersion":"1.30.1","lazy":true},"sap.ui.rta":{"minVersion":"1.30.1","lazy":true}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/plugins/rta/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"id":"sap.ushell.plugins.rta","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA","resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.dt":{"minVersion":"1.30.1","lazy":true},"sap.ui.rta":{"minVersion":"1.30.1","lazy":true},"sap.ui.fl":{}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/renderers/fiori2/HeadEndItemsOverflowPopover.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><Popover\n        id="headEndItemsOverflow"\n        placement="Bottom"\n        showHeader="false"\n        showArrow="true"\n        class="sapUshellPopupContainer sapContrastPlus"\n        afterClose=".destroyHeadEndItemsOverflow"><content><List\n                id="headEndItemsOverflowList"\n                class="sapUshellPopoverList"\n                showSeparators="None"\n                items="{\n                    path: \'/headEndItems\',\n                    filters: {\n                        path: \'\',\n                        test: \'.isHeadEndItemInOverflow\'\n                    },\n                    factory: \'.headEndItemsOverflowItemFactory\'\n                }" /></content></Popover></core:FragmentDefinition>\n',
	"sap/ushell/renderers/fiori2/allMyApps/AllMyApps.view.xml":'<mvc:View\n    controllerName="sap.ushell.renderers.fiori2.allMyApps.AllMyApps"\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    height="100%"><SplitApp\n        id="sapUshellAllMyAppsMasterDetail"\n        mode="{= ${/isPhoneWidth} ? \'ShowHideMode\' : \'StretchCompressMode\'}"\n        class="sapUshellAllMyAppsView"><masterPages><Page id="sapUshellAllMyAppsMasterPage" showHeader="false"><landmarkInfo><PageAccessibleLandmarkInfo\n                        rootLabel="{i18n>allMyApps_CatalogsList}"/></landmarkInfo><content><List\n                        id="sapUshellAllMyAppsDataSourcesList"\n                        tooltip="{i18n>catalogSelect_tooltip}"\n                        rememberSelections="true"\n                        items="{allMyAppsModel>/AppsData}"\n                        showNoData="false"\n                        growingThreshold="100"\n                        mode="SingleSelectMaster"\n                        itemPress=".handleMasterListItemPress"\n                        selectionChange=".handleMasterListItemPress"><StandardListItem\n                            title="{allMyAppsModel>title}"\n                            wrapping="true"\n                            type="{\n                                parts: [\'allMyAppsModel>type\', \'/allMyAppsMasterLevel\'],\n                                formatter: \'.formatListItemType\'\n                            }"></StandardListItem></List></content></Page></masterPages><detailPages><Page id="sapUshellAllMyAppsDetailsPage" showHeader="false"><landmarkInfo><PageAccessibleLandmarkInfo\n                        rootLabel="{i18n>allMyApps_ListOfApps}"/></landmarkInfo><content><Title id="sapUshellAllMyAppsDetailsHeaderLabel" wrapping="true" class="sapUiSmallMarginTopBottom"/><ScrollContainer\n                            id="allMyAppsScrollContainer"\n                            class="sapUshellAllMyAppsDetailsItemContainer"\n                            horizontal="false"\n                            vertical="true"><content><List id="oItemsContainerlist" items="{allMyAppsModel>apps}"><CustomListItem\n                                        class="sapUshellAllMyAppsListItem"\n                                        type="Active"\n                                        press=".onAppItemClick"><content><VBox><Label text="{allMyAppsModel>title}" class="sapUshellAllMyAppsItemTitle"/><Label\n                                                text="{allMyAppsModel>subTitle}"\n                                                visible="{= !!${allMyAppsModel>subTitle}}"\n                                                class="sapUshellAllMyAppsItemSubTitle"/></VBox></content></CustomListItem></List></content></ScrollContainer><VBox\n                        id="sapUshellAllMyAppsCustomPanel"\n                        visible="{= !!${allMyAppsModel>numberCustomTiles}}"\n                        class="sapUshellAllMyAppsCustomPanel"><Text id="sapUshellAllMyAppsCustomPanelLabel" text="{allMyAppsModel>sCustomLabel}"/><Link\n                            id="sapUshellAllMyAppsCustomPanelLink"\n                            visible="{allMyAppsModel>/catalogEnabled}"\n                            text="{allMyAppsModel>sCustomLink}"\n                            press=".handleCustomPanelLinkPress"/></VBox></content></Page><Page id="sapUshellAllMyAppsEmptyDetailsPage" showHeader="false" enableScrolling="false"><content><Label class="sapUshellAllMyAppsEmptyDetailsPageText" text="{i18n>AllMyAppsEmptyText}" textAlign="Center"/></content></Page></detailPages></SplitApp></mvc:View>\n',
	"sap/ushell/renderers/fiori2/search/searchComponent/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.renderers.fiori2.search.searchComponent","applicationVersion":{"version":"1.115.1"},"type":"component"},"sap.ui5":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true},"dependencies":{"minUI5Version":"1.72","libs":{"sap.m":{},"sap.esh.search.ui":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/ui/ContentNodeSelector.control.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m"><MultiInput\n        id="multiInput"\n        ariaLabelledBy="ContentNodeLabel"\n        valueHelpRequest="._showValueHelp"\n        suggestionRows="{path: \'_internal>/suggestions\', templateShareable: false}"\n        tokenUpdate="._onTokenUpdate"\n        required="true"><suggestionColumns><Column><Label text="{= ${_internal>/isSpaces} ? ${_i18n>contentNodeSelectorPage} : ${_i18n>contentNodeSelectorHomepageGroup}}"/></Column><Column visible="{_internal>/isSpaces}"><Label text="{_i18n>contentNodeSelectorSpace}"/></Column></suggestionColumns><suggestionRows><ColumnListItem><cells><Label text="{_internal>label}"/><Label text="{= ${_internal>spaceTitles}.join(\', \')}" visible="{_internal>/isSpaces}"/></cells></ColumnListItem></suggestionRows></MultiInput></core:FragmentDefinition>\n',
	"sap/ushell/ui/ContentNodeSelectorValueHelp.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:ushell="sap.ushell.ui"><Dialog\n        title="{= ${_internal>/isSpaces} ? ${_i18n>valueHelpDialogTitlePages} : ${_i18n>valueHelpDialogTitleGroups}}"\n        contentWidth="25rem"\n        stretch="{_device>/system/phone}"\n        horizontalScrolling="false"><subHeader><Toolbar><SearchField\n                    id="ContentNodesSearch"\n                    search="._onValueHelpSearch"\n                    width="100%"></SearchField></Toolbar></subHeader><content><Tree\n                id="ContentNodesTree"\n                items="{path: \'_internal>/items\', templateShareable: false}"\n                mode="MultiSelect"\n                includeItemInSelection="true"\n                rememberSelections="true"><items><ushell:ContentNodeTreeItem\n                        selectable="{_internal>isContainer}"\n                        title="{_internal>label}"\n                        selected="{_internal>selected}"/></items></Tree></content><beginButton><Button id="AddButton" text="{_i18n>valueHelpDialogButtonApply}" type="Emphasized" press="._onValueHelpBeginButtonPressed"/></beginButton><endButton><Button text="{_i18n>valueHelpDialogButtonCancel}" press="._onValueHelpEndButtonPressed"/></endButton></Dialog></core:FragmentDefinition>\n',
	"sap/ushell/ui/QuickAccess.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog\n        id="quickAccess"\n        class="sapContrastPlus"\n        title="{i18n>quickAccessDialog_title}"\n        verticalScrolling="false"\n        contentWidth="25rem"\n        draggable="true"\n        resizable="true"\n        stretch="{device>/system/phone}"><buttons><Button id="quickAccessCloseButton"\n                text="{i18n>closeBtn}"\n                press="._closeDialog"/></buttons><content><IconTabBar id="quickAccessIconTabBar"\n                class="sapUshellUserActionsMenuTabBar"\n                stretchContentHeight="true"\n                backgroundDesign="Transparent"\n                expandable="false"><items><IconTabFilter id="recentActivityFilter"\n                        text="{i18n>recentActivities}"><content><ScrollContainer horizontal="false" vertical="true" height="100%" width="100%"><List id="sapUshellActivityListrecentActivities"\n                                    showSeparators="None"\n                                    items="{/recentActivities}"\n                                    noDataText="{i18n>recentActivitiesNoDataText}"\n                                    itemPress="._itemPress"><items><StandardListItem\n                                            class="sapUshellQuickAccessListIcon"\n                                            type="Active"\n                                            title="{\n                                                parts: [\n                                                    {path:\'title\'},\n                                                    {path:\'appType\'}\n                                                ],\n                                                formatter:\'._titleFormatter\'\n                                            }"\n                                            description="{\n                                                parts: [\n                                                    {path:\'appType\'}\n                                                ],\n                                                formatter:\'._descriptionFormatter\'\n                                            }"\n                                            icon="{= ${icon} ? ${icon} : \'sap-icon://header\'}"\n                                            iconInset="false"\n                                            info="{timestamp}"/></items></List></ScrollContainer></content></IconTabFilter><IconTabFilter id="frequentlyUsedFilter"\n                        text="{i18n>frequentActivities}"><content><ScrollContainer horizontal="false" vertical="true" height="100%" width="100%"><List id="sapUshellActivityListfrequentActivities"\n                                      showSeparators="None"\n                                      items="{/frequentActivities}"\n                                      noDataText="{i18n>frequentActivitiesNoDataText}"\n                                      itemPress="._itemPress"><items><StandardListItem\n                                            class="sapUshellQuickAccessListIcon"\n                                            type="Active"\n                                            title="{\n                                                    parts: [\n                                                        {path:\'title\'},\n                                                        {path:\'appType\'}\n                                                    ],\n                                                    formatter:\'._titleFormatter\'\n                                                }"\n                                            description="{\n                                                    parts: [\n                                                        {path:\'appType\'}\n                                                    ],\n                                                formatter:\'._descriptionFormatter\'\n                                            }"\n                                            icon="{= ${icon} ? ${icon} : \'sap-icon://header\'}"\n                                            iconInset="false"/></items></List></ScrollContainer></content></IconTabFilter></items></IconTabBar></content></Dialog></core:FragmentDefinition>\n',
	"sap/ushell/ui/RendererRootView.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.ushell.ui.shell"\n    xmlns:m="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ui="sap.ushell.ui"\n><ui:AppContainer id="viewPortContainer" beforeNavigate=".onBeforeNavigate" afterNavigate=".onAfterNavigate"/></core:FragmentDefinition>\n',
	"sap/ushell/ui/ShellHeader.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.ushell.ui"\n    xmlns:core="sap.ui.core"\n    xmlns:shell="sap.ushell.ui.shell"><ShellHeader\n        id="shell-header"\n        showLogo="{/showLogo}"\n        visible="{/headerVisible}"\n        homeUri="{/homeUri}"\n        headItems="{ path: \'/headItems\', factory: \'.shellUpdateAggItem\' }"\n        headEndItems="{ path: \'/headEndItems\', factory: \'.shellUpdateAggItem\', filters: [{ path: \'\', test: \'.isHeadEndItemNotInOverflow\' }] }"\n        centralAreaElement="{/centralAreaElement}"\n        title="{/title}"><appTitle><shell:ShellAppTitle\n                id="shellAppTitle"\n                text="{/application/title}" /></appTitle></ShellHeader></core:FragmentDefinition>\n',
	"sap/ushell/ui/bookmark/SaveOnPage.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:launchpad="sap.ushell.ui.launchpad"\n    xmlns:ushell="sap.ushell.ui"\n    controllerName="sap.ushell.ui.bookmark.SaveOnPage"><Label id="previewLbl" text="{i18n>previewFld}" visible="{/showPreview}" labelFor="saveAsTileHBox" /><FlexBox\n        id="saveAsTileHBox"\n        class="sapUshellShellBG sapUshellBookmarkFormPreviewBoxBottomMargin sapUshellSaveAsTileHBox"\n        alignItems="Center"\n        justifyContent="Center"\n        renderType="Bare"\n        visible="{/showPreview}"><items><core:HTML\n                id="previewBackgroundElement"\n                content="&lt;div class=&quot;sapUshellShellBG sapContrastPlus sapUiStrongBackgroundColor&quot;&gt;&lt;/div&gt;" /><launchpad:Tile\n                class="sapUshellBookmarkFormPreviewTileMargin"\n                long="false"\n                afterRendering=".removeFocusFromTile"><launchpad:tileViews><GenericTile header="{/title}" subheader="{/subtitle}" size="Auto"><TileContent size="Auto" footer="{/info}" unit="{= ${/serviceUrl} ? ${/numberUnit} : \'\'}"><NumericContent\n                                icon="{/icon}"\n                                value="{= ${/serviceUrl} ? ${/numberValue} : \' \' }"\n                                width="100%"\n                                truncateValueTo="5"\n                                withMargin="false" /></TileContent></GenericTile></launchpad:tileViews></launchpad:Tile></items></FlexBox><Label id="titleLbl" text="{i18n>titleFld}" labelFor="bookmarkTitleInput" /><Input\n        id="bookmarkTitleInput"\n        required="true"\n        class="sapUshellInputField"\n        ariaLabelledBy="titleLbl"\n        placeholder="{i18n>bookmarkDialogoTitle_tooltip}"\n        value="{/title}" /><Label id="subtitleLbl" text="{i18n>subtitleFld}" labelFor="bookmarkSubTitleInput" /><Input\n        id="bookmarkSubTitleInput"\n        class="sapUshellInputField"\n        ariaLabelledBy="subtitleLbl"\n        placeholder="{i18n>bookmarkDialogoSubTitle_tooltip}"\n        value="{/subtitle}" /><Label id="infoLbl" text="{i18n>tileSettingsDialog_informationField}" labelFor="bookmarkInfoInput" /><Input\n        id="bookmarkInfoInput"\n        class="sapUshellInputField"\n        ariaLabelledBy="infoLbl"\n        placeholder="{i18n>bookmarkDialogoDescription_tooltip}"\n        value="{/info}"\n        visible="{/showInfo}" /><Label id="ContentNodeLabel" /><ushell:ContentNodeSelector\n        id="SelectedNodesComboBox"\n        labelId="ContentNodeLabel"\n        valueHelpEndButtonPressed=".onValueHelpEndButtonPressed" /></mvc:View>',
	"sap/ushell/ui/footerbar/AboutDialog.fragment.xml":'<core:FragmentDefinition\n        xmlns="sap.m"\n        xmlns:core="sap.ui.core"\n        xmlns:form="sap.ui.layout.form"><Dialog\n        id="aboutDialog"\n        title="{i18n>about}"\n        contentWidth="40rem"\n        horizontalScrolling="false"\n        beforeOpen=".onBeforeOpen"\n        class="sapContrastPlus"\n        afterClose=".onAfterClose"><content><form:SimpleForm\n                id="aboutDialogApplicationForm"\n                editable="false"\n                layout="ColumnLayout"\n                visible="{ path: \'AppInfo>/\', formatter: \'.isFormVisible\' }"\n                columnsM="{ path: \'AppInfo>/\', formatter: \'.calculateNumberOfColumns\' }"\n                columnsL="{ path: \'AppInfo>/\', formatter: \'.calculateNumberOfColumns\' }"\n                columnsXL="{ path: \'AppInfo>/\', formatter: \'.calculateNumberOfColumns\' }"\n                labelSpanM="12"\n                labelSpanL="12"\n                labelSpanXL="12"><form:title><core:Title text="{i18n>aboutCategoryApplication}" level="H3"></core:Title></form:title><Label id="appInfoAppTitleLabel" visible="{= !!${AppInfo>/appTitle/label}}" text="{AppInfo>/appTitle/label}"/><Text id="appInfoAppTitleText" visible="{= !!${AppInfo>/appTitle/label}}" text="{AppInfo>/appTitle/text}"/><Label id="appInfoAppIdLabel" visible="{= !!${AppInfo>/appId/label}}" text="{AppInfo>/appId/label}"/><Text id="appInfoAppIdText" visible="{= !!${AppInfo>/appId/label}}" text="{AppInfo>/appId/text}"/><Label id="appInfoAppVersionLabel" visible="{= !!${AppInfo>/appVersion/label}}" text="{AppInfo>/appVersion/label}"/><Text id="appInfoAppVersionText" visible="{= !!${AppInfo>/appVersion/label}}" text="{AppInfo>/appVersion/text}"/><Label id="appInfoAppSupportInfoLabel" visible="{= !!${AppInfo>/appSupportInfo/label}}" text="{AppInfo>/appSupportInfo/label}"/><Text id="appInfoAppSupportInfoText" visible="{= !!${AppInfo>/appSupportInfo/label}}" text="{AppInfo>/appSupportInfo/text}"/><Label id="appInfoTechnicalAppComponentIdLabel" visible="{= !!${AppInfo>/technicalAppComponentId/label}}" text="{AppInfo>/technicalAppComponentId/label}"/><Text id="appInfoTechnicalAppComponentIdText" visible="{= !!${AppInfo>/technicalAppComponentId/label}}" text="{AppInfo>/technicalAppComponentId/text}"/><Label id="appInfoAppFrameworkIdLabel" visible="{= !!${AppInfo>/appFrameworkId/label}}" text="{AppInfo>/appFrameworkId/label}"/><Text id="appInfoAppFrameworkIdText" visible="{= !!${AppInfo>/appFrameworkId/label}}" text="{AppInfo>/appFrameworkId/text}"/><Label id="appInfoAppFrameworkVersionLabel" visible="{= !!${AppInfo>/appFrameworkVersion/label}}" text="{AppInfo>/appFrameworkVersion/label}"/><Text id="appInfoAppFrameworkVersionText" visible="{= !!${AppInfo>/appFrameworkVersion/label}}" text="{AppInfo>/appFrameworkVersion/text}"/><Label id="appInfoContentProviderLabel" visible="{= !!${AppInfo>/contentProviderLabel/label}}" text="{AppInfo>/contentProviderLabel/label}"/><Text id="appInfoContentProviderText" visible="{= !!${AppInfo>/contentProviderLabel/label}}" text="{AppInfo>/contentProviderLabel/text}"/></form:SimpleForm><form:SimpleForm\n                id="aboutDialogSystemForm"\n                editable="false"\n                layout="ColumnLayout"\n                visible="{ path: \'SysInfo>/\', formatter: \'.isFormVisible\' }"\n                columnsM="{ path: \'SysInfo>/\', formatter: \'.calculateNumberOfColumns\' }"\n                columnsL="{ path: \'SysInfo>/\', formatter: \'.calculateNumberOfColumns\' }"\n                columnsXL="{ path: \'SysInfo>/\', formatter: \'.calculateNumberOfColumns\' }"\n                labelSpanM="12"\n                labelSpanL="12"\n                labelSpanXL="12"><form:title><core:Title text="{i18n>aboutCategorySystem}" level="H3"></core:Title></form:title><Label id="sysInfoProductNameLabel" visible="{= !!${SysInfo>/productName/label}}" text="{SysInfo>/productName/label}"/><Text id="sysInfoProductNameText" visible="{= !!${SysInfo>/productName/label}}" text="{SysInfo>/productName/text}"/><Label id="sysInfoProductVersionLabel" visible="{= !!${SysInfo>/productVersion/label}}" text="{SysInfo>/productVersion/label}"/><Text id="sysInfoProductVersionText" visible="{= !!${SysInfo>/productVersion/label}}" text="{SysInfo>/productVersion/text}"/><Label id="sysInfoSystemNameLabel" visible="{= !!${SysInfo>/systemName/label}}" text="{SysInfo>/systemName/label}"/><Text id="sysInfoSystemNameText" visible="{= !!${SysInfo>/systemName/label}}" text="{SysInfo>/systemName/text}"/><Label id="sysInfoSystemRoleLabel" visible="{= !!${SysInfo>/systemRole/label}}" text="{SysInfo>/systemRole/label}"/><Text id="sysInfoSystemRoleText" visible="{= !!${SysInfo>/systemRole/label}}" text="{SysInfo>/systemRole/text}"/><Label id="sysInfoTenantRoleLabel" visible="{= !!${SysInfo>/tenantRole/label}}" text="{SysInfo>/tenantRole/label}"/><Text id="sysInfoTenantRoleText" visible="{= !!${SysInfo>/tenantRole/label}}" text="{SysInfo>/tenantRole/text}"/></form:SimpleForm><form:SimpleForm\n                id="aboutDialogUserForm"\n                editable="false"\n                layout="ColumnLayout"\n                visible="{ path: \'UserEnvInfo>/\', formatter: \'.isFormVisible\' }"\n                columnsM="{ path: \'UserEnvInfo>/\', formatter: \'.calculateNumberOfColumns\' }"\n                columnsL="{ path: \'UserEnvInfo>/\', formatter: \'.calculateNumberOfColumns\' }"\n                columnsXL="{ path: \'UserEnvInfo>/\', formatter: \'.calculateNumberOfColumns\' }"\n                labelSpanM="12"\n                labelSpanL="12"\n                labelSpanXL="12"><form:title><core:Title text="{i18n>aboutCategoryUser}" level="H3"></core:Title></form:title><Label id="userEnvInfoDeviceTypeLabel" visible="{= !!${UserEnvInfo>/deviceType/label}}" text="{UserEnvInfo>/deviceType/label}"/><Text id="userEnvInfoDeviceTypeText" visible="{= !!${UserEnvInfo>/deviceType/label}}" text="{UserEnvInfo>/deviceType/text}"/><Label id="userEnvInfoActiveThemeLabel" visible="{= !!${UserEnvInfo>/activeTheme/label}}" text="{UserEnvInfo>/activeTheme/label}"/><Text id="userEnvInfoActiveThemeText" visible="{= !!${UserEnvInfo>/activeTheme/label}}" text="{UserEnvInfo>/activeTheme/text}"/><Label id="userEnvInfoOptimizedForTouchLabel" visible="{= !!${UserEnvInfo>/optimizedForTouch/label}}" text="{UserEnvInfo>/optimizedForTouch/label}"/><Text id="userEnvInfoOptimizedForTouchText" visible="{= !!${UserEnvInfo>/optimizedForTouch/label}}" text="{UserEnvInfo>/optimizedForTouch/text}"/><Label id="userEnvInfoTouchSupportedLabel" visible="{= !!${UserEnvInfo>/touchSupported/label}}" text="{UserEnvInfo>/touchSupported/label}"/><Text id="userEnvInfoTouchSupportedText" visible="{= !!${UserEnvInfo>/touchSupported/label}}" text="{UserEnvInfo>/touchSupported/text}"/><Label id="userEnvInfoUserAgentFldLabel" visible="{= !!${UserEnvInfo>/userAgentFld/label}}" text="{UserEnvInfo>/userAgentFld/label}"/><Text id="userEnvInfoUserAgentFldText" visible="{= !!${UserEnvInfo>/userAgentFld/label}}" text="{UserEnvInfo>/userAgentFld/text}"/></form:SimpleForm></content><beginButton><Button\n                id="aboutDialogCloseButton"\n                text="{i18n>closeBtn}"\n                type="Transparent"\n                press=".onClose" /></beginButton></Dialog></core:FragmentDefinition>\n',
	"sap/ushell/ui/launchpad/FailedTileDialog.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:formLayout="sap.ui.layout.form"><Dialog\n        id="failedTileDialog"\n        title="{i18n>cannotLoadTile}"\n        type="Message"\n        state="Error"\n        contentWidth="480px"\n        class="sapUiNoContentPadding"><content><VBox id="vBox" class="sapUiSmallMargin"><Text id="failedMessageText" text="{i18n>FailedTileDialog.Message.Text}" /><Link id="showDetailsLink" text="{i18n>FailedTileDialog.ShowDetails.Text}" visible="{= !${showDetails}}" press=".onShowDetails" class="sapUiSmallMarginTop" /></VBox><formLayout:SimpleForm id="simpleForm" visible="{showDetails}" layout="ResponsiveGridLayout" editable="false"><formLayout:content><Label id="groupIdLabel" visible="{= !!${groupId}}" text="{i18n>FailedTileDialog.groupId.Label}" /><Text id="groupId" visible="{= !!${groupId}}" text="{groupId}" /><Label id="chipTitleLabel" visible="{= !!${chipTitle}}" text="{i18n>FailedTileDialog.chipTitle.Label}" /><Text id="chipTitle" visible="{= !!${chipTitle}}" text="{chipTitle}" /><Label id="chipDescriptionLabel" visible="{= !!${chipDescription}}" text="{i18n>FailedTileDialog.chipDescription.Label}" /><Text id="chipDescription" visible="{= !!${chipDescription}}" text="{chipDescription}" /><Label id="chipInstanceIdLabel" visible="{= !!${chipInstanceId}}" text="{i18n>FailedTileDialog.chipInstanceId.Label}" /><Text id="chipInstanceId" visible="{= !!${chipInstanceId}}" text="{chipInstanceId}" /><Label id="chipIdLabel" visible="{= !!${chipId}}" text="{i18n>FailedTileDialog.chipId.Label}" /><Text id="chipId" visible="{= !!${chipId}}" text="{chipId}" /><Label id="catalogIdLabel" visible="{= !!${catalogId}}" text="{i18n>FailedTileDialog.catalogId.Label}" /><Text id="catalogId" visible="{= !!${catalogId}}" text="{catalogId}" /><Label id="completelyLoadedLabel" visible="{= typeof ${completelyLoaded} === \'boolean\'}" text="{i18n>FailedTileDialog.completelyLoaded.Label}" /><Text id="completelyLoaded" visible="{= typeof ${completelyLoaded} === \'boolean\'}" text="{completelyLoaded}" /><Label id="debugInfoLabel" visible="{= !!${debugInfo}}" text="{i18n>FailedTileDialog.debugInfo.Label}" /><Text id="debugInfo" visible="{= !!${debugInfo}}" text="{debugInfo}" /></formLayout:content></formLayout:SimpleForm></content><endButton><Button id="closeButton" text="{i18n>closeBtn}" press=".onClose" /></endButton></Dialog></core:FragmentDefinition>\n',
	"sap/ushell/ui/launchpad/Section.control.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns:f="sap.f"\n    xmlns:fdnd="sap.f.dnd"\n    xmlns:section="sap.ushell.ui.launchpad.section"\n    core:require="{\n        ushellLibrary: \'sap/ushell/library\'\n    }"><VBox id="content" class="sapUshellSection"><items><Title\n                id="title"\n                class="sapUshellSectionTitle sapContrastPlus"\n                text="{$this>title}"\n                level="H3"\n                visible="{= !${$this>editable} &amp;&amp; ${$this>showSection}}" /><OverflowToolbar id="header" class="sapUshellSectionHeader" visible="{$this>editable}"><Text\n                    id="titleLabel"\n                    text="{$this>title}"\n                    visible="{= ${$this>editable} &amp;&amp; ${$this>default}}"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData></Text><Label\n                    id="label"\n                    text="{$this.i18n>Section.Label.Title}"\n                    labelFor="title-edit"\n                    visible="{= ${$this>editable} &amp;&amp; !${$this>default}}"\n                    showColon="true"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData></Label><Input\n                    id="title-edit"\n                    value="{$this>title}"\n                    editable="{= !${$this>default}}"\n                    visible="{= !${$this>default}}"\n                    placeholder="{$this.i18n>Section.TitlePlaceholder}"\n                    valueLiveUpdate="true"\n                    maxLength="100"\n                    change=".fireTitleChange"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" shrinkable="true" minWidth="10rem" maxWidth="40rem" /></layoutData></Input><ToolbarSpacer /><Button\n                    id="addVisualization"\n                    text="{$this.i18n>Section.Button.AddVisualization}"\n                    type="Transparent"\n                    press=".fireAdd"\n                    visible="{= ${$this>enableAddButton} &amp;&amp; !${$this>default}}" /><Button id="showHide"\n                    text="{= ${$this>showSection} ? ${$this.i18n>Section.Button.Hide} : ${$this.i18n>Section.Button.Show}}"\n                    type="Transparent"\n                    press="._showHidePressed(!${$this>showSection})"\n                    visible="{= ${$this>enableShowHideButton} &amp;&amp; !${$this>default}}" /><Button id="reset"\n                    text="{$this.i18n>Section.Button.Reset}"\n                    type="Transparent"\n                    press=".fireReset"\n                    visible="{= ${$this>enableResetButton} &amp;&amp; !${$this>default}}" /><Button\n                    id="delete"\n                    text="{$this.i18n>Section.Button.Delete}"\n                    type="Transparent"\n                    press=".fireDelete"\n                    visible="{= ${$this>enableDeleteButton} &amp;&amp; !${$this>default}}" /></OverflowToolbar><Text id="noVisualizationsText"\n                class="sapUshellSectionNoVisualizationsText"\n                text="{$this>noVisualizationsText}"\n                textAlign="Center"\n                visible="{= ${$this>editable} &amp;&amp; ${$this>showNoVisualizationsText}}" /><f:GridContainer\n                id="defaultArea"\n                class="sapUshellSectionGridContainer"\n                containerQuery="{$this>enableGridContainerQuery}"\n                minHeight="0"\n                visible="{= ${$this>editable} || ${$this>showSection} }"><f:customData><core:CustomData key="default" value="{$this>default}" /><core:CustomData key="area" value="{= ushellLibrary.DisplayFormat.Standard}" /></f:customData><f:layout><f:GridContainerSettings\n                        rowSize="{= ${$this>gridContainerRowSize}}"\n                        columnSize="{= ${$this>gridContainerRowSize}}"\n                        gap="{= ${$this>gridContainerGap}}" /></f:layout><f:layoutXS><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 4 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeXS}}"\n                        columnSize="{= ${$this>gridContainerRowSizeXS}}"\n                        gap="{= ${$this>gridContainerGapXS}}" /></f:layoutXS><f:layoutS><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 4 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeS}}"\n                        columnSize="{= ${$this>gridContainerRowSizeS}}"\n                        gap="{= ${$this>gridContainerGapS}}" /></f:layoutS><f:layoutM><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 6 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeM}}"\n                        columnSize="{= ${$this>gridContainerRowSizeM}}"\n                        gap="{= ${$this>gridContainerGapM}}" /></f:layoutM><f:layoutL><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? ${$this>sizeBehavior} === \'Small\' ? 12 : 10 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeL}}"\n                        columnSize="{= ${$this>gridContainerRowSizeL}}"\n                        gap="{= ${$this>gridContainerGapL}}" /></f:layoutL><f:layoutXL><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? ${$this>sizeBehavior} === \'Small\' ? 16 : 14 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeXL}}"\n                        columnSize="{= ${$this>gridContainerRowSizeXL}}"\n                        gap="{= ${$this>gridContainerGapXL}}" /></f:layoutXL><f:dragDropConfig><dnd:DragInfo enabled="{$this>enableVisualizationReordering}" groupName="Section" sourceAggregation="items" /><fdnd:GridDropInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="Section"\n                        dropLayout="Horizontal"\n                        dropPosition="Between"\n                        targetAggregation="items"\n                        dropIndicatorSize="._getDefaultDropIndicatorSize"\n                        dragEnter="._onDragEnter"\n                        drop="._reorderVisualizations" /></f:dragDropConfig></f:GridContainer><f:GridContainer\n                id="flatArea"\n                class="sapUshellSectionGridContainer"\n                containerQuery="{$this>enableGridContainerQuery}"\n                minHeight="0"\n                visible="{= ${$this>editable} || ${$this>showSection} }"><f:customData><core:CustomData key="default" value="{$this>default}" /><core:CustomData key="area" value="{= ushellLibrary.DisplayFormat.Flat}" /></f:customData><f:layout><f:GridContainerSettings\n                        rowSize="{= ${$this>gridContainerRowSize}}"\n                        columnSize="{= ${$this>gridContainerRowSize}}"\n                        gap="{= ${$this>gridContainerGap}}" /></f:layout><f:layoutXS><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 4 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeXS}}"\n                        columnSize="{= ${$this>gridContainerRowSizeXS}}"\n                        gap="0.5rem" /></f:layoutXS><f:layoutS><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 4 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeS}}"\n                        columnSize="{= ${$this>gridContainerRowSizeS}}"\n                        gap="0.5rem" /></f:layoutS><f:layoutM><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 6 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeM}}"\n                        columnSize="{= ${$this>gridContainerRowSizeM}}"\n                        gap="{= ${$this>gridContainerGapM}}" /></f:layoutM><f:layoutL><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? ${$this>sizeBehavior} === \'Small\' ? 12 : 10 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeL}}"\n                        columnSize="{= ${$this>gridContainerRowSizeL}}"\n                        gap="{= ${$this>gridContainerGapL}}" /></f:layoutL><f:layoutXL><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? ${$this>sizeBehavior} === \'Small\' ? 16 : 14 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeXL}}"\n                        columnSize="{= ${$this>gridContainerRowSizeXL}}"\n                        gap="{= ${$this>gridContainerGapXL}}" /></f:layoutXL><f:dragDropConfig><dnd:DragInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="{= ${$this>_duringDrag} ? \'Section\' : \'FlatArea\'}"\n                        sourceAggregation="items" /><fdnd:GridDropInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="{= ${$this>_duringDrag} ? \'Section\' : \'FlatArea\'}"\n                        dropLayout="Horizontal"\n                        dropPosition="Between"\n                        targetAggregation="items"\n                        dropIndicatorSize="._getFlatDropIndicatorSize"\n                        dragEnter="._onDragEnter"\n                        drop="._reorderVisualizations" /></f:dragDropConfig></f:GridContainer><section:CompactArea\n                id="compactArea"\n                class="sapUshellSectionGridContainer"\n                visible="{= ${$this>editable} || ${$this>showSection} }"\n                itemDrop="._reorderVisualizations"\n                enableLinkReordering="{$this>enableVisualizationReordering}"><section:customData><core:CustomData key="default" value="{$this>default}" /><core:CustomData key="area" value="{= ushellLibrary.DisplayFormat.Compact}" /></section:customData><section:dragDropConfig><dnd:DragInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="{= ${$this>_duringDrag} ? \'Section\' : \'CompactArea\'}"\n                        sourceAggregation="items" /><dnd:DropInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="{= ${$this>_duringDrag} ? \'Section\' : \'CompactArea\'}"\n                        dropLayout="Horizontal"\n                        dropPosition="Between"\n                        targetAggregation="items"\n                        dragEnter="._onDragEnter"\n                        drop="._reorderVisualizations" /><dnd:DropInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="{= ${$this>_duringDrag} ? \'Section\' : \'CompactArea\'}"\n                        dragEnter="._onDragEnter"\n                        drop="._reorderVisualizations" /></section:dragDropConfig></section:CompactArea></items><customData><core:CustomData\n                key="help-id"\n                value="{= ${$this>default} ? \'recently-added-apps\' : ${$this>dataHelpId}}"\n                writeToDom="{= ${$this>default} || !!${$this>dataHelpId}}" /></customData></VBox></core:FragmentDefinition>\n'
});
//# sourceMappingURL=library-preload.js.map
