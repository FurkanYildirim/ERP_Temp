// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/deepExtend","sap/base/util/UriParameters","sap/ui/core/Component","sap/ui/core/util/AsyncHintsHelper","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/bootstrap/common/common.load.core-min"],function(e,a,t,r,n,jQuery,s,i){"use strict";function o(e,a){var t=new jQuery.Deferred;e.componentData=a;if(e.manifest===undefined){e.manifest=false}else if(a.technicalParameters&&a.technicalParameters.hasOwnProperty("sap-ui-fl-version")){if(typeof e.manifest==="string"&&e.manifest.length>0){var n=new s(e.manifest);n.addQuery("version",a.technicalParameters["sap-ui-fl-version"][0]);e.manifest=n.toString()}}r.create(e).then(function(e){t.resolve(e)},function(e){t.reject(e)});return t.promise()}function p(e){var a=true;if(e.hasOwnProperty("loadCoreExt")){a=e.loadCoreExt}return a}function u(e,a){var t=true;if(e.hasOwnProperty("loadDefaultDependencies")){t=e.loadDefaultDependencies}if(a&&a.hasOwnProperty("loadDefaultDependencies")){t=t&&a.loadDefaultDependencies}return t}function c(e){var a=e.semanticObject||null;var t=e.action||null;if(!a||!t){return null}return"application-"+a+"-"+t+"-component"}function l(e){return e&&e.indexOf("?")>=0}function f(e){var a=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return e.replace(a,"")}function d(e){if(!e){return e}var a=e.indexOf("?");if(a>=0){return e.slice(0,a)}return e}function m(a,t,r,n,s){var i="The issue is most likely caused by application "+a,o="Failed to load UI5 component with properties: '"+s+"'.";if(n){o+=" Error likely caused by:\n"+n}else{o+=" Error: '"+t+"'"}if(r==="parsererror"){i+=", as one or more of its resources could not be parsed"}i+=". Please create a support incident and assign it to the support component of the respective application.";e.error(i,o,a)}function y(e){var a=t.fromURL(e||window.location.href).mParams,r=a["sap-xapp-state"],n=a["sap-xapp-state-data"],s;delete a["sap-xapp-state"];delete a["sap-xapp-state-data"];s={startupParameters:a};if(n){s["sap-xapp-state"]=n}if(r){s["sap-xapp-state"]=r}return s}function h(a,t){if(!Array.isArray(t)){return}t.forEach(function(t){var r=String.prototype.toLowerCase.call(t.severity||"");r=["trace","debug","info","warning","error","fatal"].indexOf(r)!==-1?r:"error";e[r](t.text,t.details,a)})}function v(a){if(!Array.isArray(a)){e.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null}return Promise.all(a.map(function(e){return sap.ui.loader._.loadJSResourceAsync(e)})).catch(function(t){e.error("Ui5ComponentLoader: failed to load bundle resources: ["+a.join(", ")+"]");return Promise.reject(t)})}function x(e,t,r,s,i,o,p,u,c){var l=a({},i);if(!l.asyncHints){l.asyncHints=t?{libs:["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]}:{}}if(e){l.asyncHints.preloadBundles=l.asyncHints.preloadBundles||[];l.asyncHints.preloadBundles=l.asyncHints.preloadBundles.concat(c)}if(s){l.asyncHints.waitFor=s}if(!l.name){l.name=o}if(p){l.url=d(p)}if(u){l.id=u}if(r&&l.asyncHints){n.modifyUrls(l.asyncHints,f)}return l}function P(e,t,r,n){var s=a({startupParameters:{}},e);if(r){s.config=r}if(n){s.technicalParameters=n}if(l(t)){var i=y(t);s.startupParameters=i.startupParameters;if(i["sap-xapp-state-data"]){s["sap-xapp-state"]=i["sap-xapp-state-data"]}if(i["sap-xapp-state"]){s["sap-xapp-state"]=i["sap-xapp-state"]}}return s}return{constructAppComponentId:c,getParameterMap:y,logAnyApplicationDependenciesMessages:h,logInstantiateComponentError:m,shouldLoadCoreExt:p,shouldLoadDefaultDependencies:u,urlHasParameters:l,removeParametersFromUrl:d,createUi5Component:o,loadBundle:v,createComponentProperties:x,createComponentData:P}},false);
//# sourceMappingURL=utils.js.map