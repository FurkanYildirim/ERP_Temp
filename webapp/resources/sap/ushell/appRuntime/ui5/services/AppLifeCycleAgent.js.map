{"version":3,"file":"AppLifeCycleAgent.js","names":["sap","ui","define","AppRuntimePostMessageAPI","AppRuntimeService","extend","UriParameters","URI","Device","BusyIndicator","FesrEnhancer","EventHub","Log","hasher","Core","oUrlParsing","AppRuntimeContext","assert","resources","AppLifeCycleAgent","that","this","sAppResolutionModule","oAppResolution","bEnableAppResolutionCache","oAppResolutionCache","fnCreateApplication","oCachedApplications","oRouterDisableRetriggerApplications","oAppDirtyStateProviders","oAppBackNavigationFunc","oRunningApp","fnRenderApp","oShellUIService","sDatalossMessage","oShellNavigationService","init","sModule","ofnCreateApplication","ofnRenderApp","bEnableCache","sAppId","oAppInfo","resetCurrentApp","undefined","addAppInfoToCache","registerCommHandlers","oServiceCalls","create","executeServiceCallFn","oMessageData","oMsg","JSON","parse","oMessage","data","destroy","store","restore","on","do","oData","componentId","disable","sendMessageToOuterShell","isStateful","isKeepAlive","isIframeValid","isIframeBusy","browserI18n","getTranslationModel","window","navigator","language","getResourceBundle","getText","onbeforeunload","ushell","Container","getDirtyFlag","Promise","fnResolve","fnReject","sUrl","sAppIntent","oParsedShellIntent","sScubeAppIntent","sKeepAliveAppKey","bValue","startInteraction","body","getIsScube","fromURL","get","sHash","indexOf","parseShellHash","params","disableCFLPUpdate","replaceHash","browser","chrome","show","_resetBackNavigationCallback","getEventBus","publish","getAppInfo","then","values","length","Object","keys","find","sCachedKey","ui5ComponentName","oResolvedHashFragment","sCacheId","expandSapIntentParams","query","oURLParameters","oParsedHash","oResolutionResult","deletedKeepAliveId","appDestroy","oApplication","sId","e","error","document","URL","stack","oApp","resolve","sStorageKey","cleanDirtyStateProviderArray","setAppShortId","oCachedEntry","cloneCurrentAppEntry","_getBackNavigationCallback","getComponentInstance","setVisible","getAsyncDirtyStateProviders","isKeepAliveSupported","deactivate","suspend","getRouter","stop","bRouterDisableRetrigger","setAsyncDirtyStateProviders","setBackNavigation","activate","initialize","setTimeout","info","oAppAttributes","oUrlParameters","hasOwnProperty","sAppStateKey","sParameters","oUrlParametersExpanded","sError","addAppParamsToIntent","getApplicationParameters","oStartupParameters","sSapIntentParam","sStartupParametersWithoutSapIntentParam","buildFinalParamsString","sSimpleParams","sIntentParams","sParams","startsWith","toString","sMoreParams","appId","removeSearch","getServiceAsync","oNavTargetResolution","resolveHashFragmentLocal","done","fail","sMsg","fnGetAppInfo","stringify","require","replace","oObj","setCurrentApp","setCurrentAppAttributes","oEntry","setShellUIService","oService","setShellNavigationService","checkDataLossAndContinue","getNavigationContext","confirm","setDirtyFlag"],"sources":["AppLifeCycleAgent-dbg.js"],"mappings":"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"}