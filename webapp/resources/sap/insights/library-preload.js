//@ui5-bundle sap/insights/library-preload.js
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 * This extension is for OVP Analytical cards delivered in 2208.
 */
sap.ui.predefine("sap/insights/CardExtension", ["sap/ui/integration/Extension","sap/ui/core/format/NumberFormat","sap/fe/navigation/SelectionVariant","sap/base/Log","sap/ui/core/format/DateFormat","sap/ui/core/library","sap/m/library","sap/ui/integration/util/Utils","sap/m/DynamicDateUtil","sap/ui/core/Core","sap/fe/navigation/NavError","sap/insights/utils/UrlGenerateHelper","sap/insights/utils/AppConstants","sap/ui/core/date/UI5Date"],function(e,t,r,a,i,n,s,o,l,f,c,u,g,m){"use strict";var p=n.ValueState;var v=s.ValueColor;var d={StateValues:{None:"None",Negative:"Error",Critical:"Warning",Positive:"Success"},ColorValues:{None:"Neutral",Negative:"Error",Critical:"Critical",Positive:"Good"}};var h=a.getLogger("sap.insights.CardExtension");var b=function(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1};var S=function(e,t){var r;if(t){r=t.None;if(e&&e.EnumMember){var a=e.EnumMember;if(b(a,"Negative")){r=t.Negative}else if(b(a,"Critical")){r=t.Critical}else if(b(a,"Positive")){r=t.Positive}}}return r};var N=function(e,t,r,a,i,n,s){var o={};o.EnumMember="None";var l=Number.NEGATIVE_INFINITY;var f=Number.POSITIVE_INFINITY;if(!i&&i!==0&&(r||r===0)){i=r}if(!n&&n!==0&&(a||a===0)){n=a}if(!r&&r!==0){r=l}if(!a&&a!==0){a=f}if(e!==undefined){e=Number(e);if(b(t,"Minimize")||b(t,"Minimizing")){if((n||n===0)&&(a||a===0)){if(e<=parseFloat(n)){o.EnumMember="Positive"}else if(e>parseFloat(a)){o.EnumMember="Negative"}else{o.EnumMember="Critical"}}}else if(b(t,"Maximize")||b(t,"Maximizing")){if((i||i===0)&&(r||r===0)){if(e>=parseFloat(i)){o.EnumMember="Positive"}else if(e<parseFloat(r)){o.EnumMember="Negative"}else{o.EnumMember="Critical"}}}else if(b(t,"Target")){if((n||n===0)&&(a||a===0)&&(i||i===0)&&(r||r===0)){if(e>=parseFloat(i)&&e<=parseFloat(n)){o.EnumMember="Positive"}else if(e<parseFloat(r)||e>parseFloat(a)){o.EnumMember="Negative"}else{o.EnumMember="Critical"}}}}return S(o,s)};var O=function(e,t,r,a){if(!e||!t){return}e=Number(e);if(!a&&e-t>=0){return"Up"}if(!r&&e-t<=0){return"Down"}if(t&&a&&e-t>=a){return"Up"}if(t&&r&&e-t<=r){return"Down"}};var P=function(e,r,a){var i=r||{},n=e;var s=t.getFloatInstance({minFractionDigits:i.NumberOfFractionalDigits,maxFractionDigits:i.NumberOfFractionalDigits,style:"short",showScale:true,shortRefNumber:n});var o=s.format(Number(n)),l=s.getScale()||"";if(!a&&o){var f=o[o.length-1];return f===l?o.slice(0,o.length-1):o}if(a&&i.percentageAvailable){return l+"%"}if(a&&!i.percentageAvailable){return l}return""};var y=function(){var e=this.getCard().getCombinedParameters();return e._headerDataUrl};var D=function(){var e=this.getCard().getCombinedParameters();return e._contentDataUrl};var I=function(e,r,a){var i,n,s;if(isNaN(+e)){return""}if(e==0){s=r}else{s=e}if(a.NumberOfFractionalDigits){n=+a.NumberOfFractionalDigits}if(r){i=r}else if(a.manifestTarget){i=a.manifestTarget}if(!n||n<0){n=0}else if(n>2){n=2}if(i){var o=t.getFloatInstance({minFractionDigits:n,maxFractionDigits:n,style:"short",showScale:true,shortRefNumber:s});return o.format(+i)}};var C=function(e,r,a){var i,n;if(isNaN(+e)){return""}e=+e;if(a.NumberOfFractionalDigits){i=+a.NumberOfFractionalDigits}if(r){n=+r}else if(a.manifestTarget){n=+a.manifestTarget}if(!i||i<0){i=0}else if(i>2){i=2}if(n){var s=(e-n)/n;var o=t.getPercentInstance({style:"short",minFractionDigits:i,maxFractionDigits:i,showScale:true});return o.format(s)}};var F=function(e){var t={};t.EnumMember="None";if(Number(e)===1){t.EnumMember="Negative"}else if(Number(e)===2){t.EnumMember="Critical"}else if(Number(e)===3){t.EnumMember="Positive"}return S(t,d.ColorValues)};var w=function(){var e=arguments[arguments.length-1];var t=1;return N(arguments[0],e.sImprovementDirection,e.bIsDeviationLowBinding?arguments[t++]:e.deviationLow,e.bIsDeviationHighBinding?arguments[t++]:e.deviationHigh,e.bIsToleranceLowBinding?arguments[t++]:e.toleranceLow,e.bIsToleranceHighBinding?arguments[t++]:e.toleranceHigh,e.oCriticalityConfigValues)};var E=function(){var e=arguments[arguments.length-1];var t=1;return O(arguments[0],e.bIsRefValBinding?arguments[t++]:e.referenceValue,e.bIsDownDiffBinding?arguments[t++]:e.downDifference,e.bIsUpDiffBinding?arguments[t++]:e.upDifference)};var V=function(e){var t;var r=arguments[arguments.length-1],a=r&&r.propertyType;switch(a){case"yearmonth":var i=parseInt(e.substr(0,4),10),n=e.substr(4),s=parseInt(n,10)-1;t=m.getInstance(Date.UTC(i,s));break;case"yearquarter":var i=parseInt(e.substr(0,4),10),o=e.substr(4),l=parseInt(o,10)*3-2,s=l-1;t=m.getInstance(Date.UTC(i,s));break;case"yearweek":var i=parseInt(e.substr(0,4),10),f=e.substr(4),c=1+(parseInt(f,10)-1)*7;t=m.getInstance(Date.UTC(i,0,c));break;default:break}return t};var M=function(e,t){if(e){var r=o.parseJsonDateTime(e);return i.getInstance(t).format(m.getInstance(r),t.bUTC)}};var T=function(e){if(e){var r=t.getIntegerInstance({minFractionDigits:0,maxFractionDigits:1,decimalSeparator:".",style:"short"});return r.format(Number(e))}};var x=function(){var e=arguments[0],r=arguments[1],a=Number(arguments[2]),i=arguments[3];var n=t.getCurrencyInstance({style:"short",showMeasure:true,shortRefNumber:e.scaleFactor,minFractionDigits:e.numberOfFractionalDigits,maxFractionDigits:e.numberOfFractionalDigits});var s=n.format(a,i);if(!r){return s}else{var o=arguments[arguments.length-1];return s+" ("+o+")"}};var U=function(e,r,a,i,n){var s;if(e){e.maxFractionDigits=e.numberOfFractionalDigits||0;e.minFractionDigits=e.numberOfFractionalDigits||0;e.style=e.style||"short";e.showScale=e.showScale||true;e.shortRefNumber=e.scaleFactor;s=t.getFloatInstance(e)}var o=[];if(!isNaN(parseFloat(a))&&s){o.push(s.format(a))}else{o.push(a)}if(!isNaN(parseFloat(i))&&s){o.push(s.format(i))}else{o.push(i)}if(!isNaN(parseFloat(n))&&s){o.push(s.format(n))}else{o.push(n)}var l="";if(r&&r.length){r.forEach(function(e){if(typeof e==="number"){l=l+o[e]}else{l=l+e}})}return l};var A=function(e,t){if(t==="state"){switch(String(e)){case"1":case"Error":return p.Error;case"2":case"Warning":return p.Warning;case"3":case"Success":return p.Success;default:return p.None}}if(t==="color"){switch(String(e)){case"1":case"Error":return v.Error;case"2":case"Critical":return v.Critical;case"3":case"Good":return v.Good;default:return v.Neutral}}};var H=function(e,t,r){var a;if(r&&r.indexOf("sap.ui.model.odata.v4.ODataModel")>-1){a=this.getCard().getModel().getProperty("/content/value")||this.getCard().getModel().getProperty("/value")||[]}else{a=this.getCard().getModel().getProperty("/content/d/results")||this.getCard().getModel().getProperty("/d/results")||[]}var i=a.map(function(t){return t[e]});if(i.indexOf("0")===-1){i.push(0)}return Math[t].apply(Math,i)};var L=function(e,t,r){var a=1;var i=2;var n=4;for(var s in e){if(e.hasOwnProperty(s)){var o=e[s];if(o instanceof Date){o=o.toJSON()}else if(Array.isArray(o)||o&&typeof o==="object"){o=JSON.stringify(o)}else if(typeof o==="number"||typeof o==="boolean"){o=o.toString()}if(o===""){if(r&a){h.info("Semantic attribute "+s+" is an empty string and due to the chosen Suppression Behiavour is being ignored.");continue}}if(o===null){if(r&i){throw new h.error("NavigationHandler.INVALID_INPUT")}else{h.warning("Semantic attribute "+s+" is null and ignored for mix in to selection variant");continue}}if(o===undefined){if(r&n){throw new h.error("NavigationHandler.INVALID_INPUT")}else{h.warning("Semantic attribute "+s+" is undefined and ignored for mix in to selection variant");continue}}if(typeof o==="string"||o instanceof String){t.addSelectOption(s,"I","EQ",o)}else{throw new h.error("NavigationHandler.INVALID_INPUT")}}}return t};var J=function(e,t,a){var i=new r(t);var n=new r;if(i.getFilterContextUrl()){n.setFilterContextUrl(i.getFilterContextUrl())}if(i.getParameterContextUrl()){n.setParameterContextUrl(i.getParameterContextUrl())}if(Array.isArray(e)){e.forEach(function(e){L(e,n,a)})}else{L(e,n,a)}var s=i.getParameterNames();var o;for(o=0;o<s.length;o++){if(!n.getSelectOption(s[o])){n.addSelectOption(s[o],"I","EQ",i.getParameter(s[o]))}}var l=i.getSelectOptionsPropertyNames();for(o=0;o<l.length;o++){var f=i.getSelectOption(l[o]);if(!n.getSelectOption(l[o])){for(var c=0;c<f.length;c++){n.addSelectOption(l[o],f[c].Sign,f[c].Option,f[c].Low,f[c].High)}}}return n};function _(e){if(e){if(e.hasOwnProperty("SelectionVariantID")){delete e.SelectionVariantID}else if(e.hasOwnProperty("PresentationVariantID")){delete e.PresentationVariantID}delete e.Text;delete e.ODataFilterExpression;delete e.Version;delete e.FilterContextUrl;delete e.ParameterContextUrl;return e}return e}var k=function(e){try{if(JSON.parse(e)){return true}}catch(e){return false}};var B=function(e){var t=e&&e.length===1,r=e&&e[0];return t&&r["Option"]==="EQ"&&!r["High"]&&r["Low"]&&r["Sign"]==="I"};function R(e,t){var r=this.getCard().getManifestEntry("sap.card"),a=r&&r.configuration.parameters,i=new sap.fe.navigation.SelectionVariant,n=a._relevantODataFilters.value||[];e=e&&JSON.parse(e);var s=e&&e.sensitiveProps,o=r&&r.header.actions[0].parameters.ibnParams,l=r&&r.content.actions[0].parameters.ibnParams;n.forEach(function(e){var t=k(a[e].value);if(t&&!(s&&s[e])){var r=JSON.parse(a[e].value);var n=r.SelectOptions.Ranges;if(n&&n.length){var f=B(n);if(o[e]&&l[e]){if(f){o[e]=n[0].Low;l[e]=n[0].Low}else if(!f){delete l[e];delete o[e];i.massAddSelectOption(e,n)}}else{i.massAddSelectOption(e,n)}}}});if(t){var f=Object.keys(t)||[];for(var c=0;c<f.length;c++){if(s&&s[f[c]]||f[c]==="__metadata"){delete t[f[c]]}}var u=J(t,i&&i.toJSONObject());u=_(u.toJSONObject());e.selectionVariant=u}if(e&&e.sensitiveProps){delete e.sensitiveProps}return JSON.stringify(e)}var j=function(e){var t=i.getDateInstance({pattern:"''yyyy-MM-dd'T'HH:mm:ss.SSS'Z'''",calendarType:"Gregorian"});if(e){var r=t.format(e,true);return String(r).replace(/'/g,"")}};var G=function(e){var t=i.getDateInstance({pattern:"''yyyy-MM-dd'T'HH:mm:ss.SSS''",calendarType:"Gregorian"});var r=e instanceof Date?e:m.getInstance(e);var a=t.format(r);return String(a).replace(/'/g,"")};function Q(e,t,r,a,i,n){var s=l.toDates(e)||[];var o=s[0]&&s[0].oDate;var f=s[1]&&s[1].oDate;var c="",u="";if(a["sap:filter-restriction"]==="single-value"){if(t==="datetime"){c=G(o);if(c&&n&&n.ibnParams){n.ibnParams[r]=c}}else if(t==="string"){c=j(o);if(c&&n&&n.ibnParams){n.ibnParams[r]=c}}i.massAddSelectOption(r,[{Sign:"I",Option:"EQ",Low:c,High:null}])}else if(a["sap:filter-restriction"]==="interval"){if(t==="datetime"){c=G(o);u=G(f);if(c&&u){i.massAddSelectOption(r,[{Sign:"I",Option:"BT",Low:c,High:u}])}}else if(t==="string"){c=j(o);u=j(f);if(c&&u){i.massAddSelectOption(r,[{Sign:"I",Option:"BT",Low:c,High:u}])}}}}function q(e){var t={};var a;if(typeof e==="string"){a=new r(e)}else if(typeof e==="object"){a=e}else{throw new c("NavigationHandler.INVALID_INPUT")}var i=a.getSelectOptionsPropertyNames();for(var n=0;n<i.length;n++){var s=a.getSelectOption(i[n]);if(s.length===1&&s[0].Sign==="I"&&s[0].Option==="EQ"){t[i[n]]=s[0].Low}}var o=a.getParameterNames();for(var n=0;n<o.length;n++){var l=a.getParameter(o[n]);t[o[n]]=l}return t}function z(e,t){var a=this.getCard().getManifestEntry("sap.card"),i=a&&a.configuration.parameters,n=new r,s=i._relevantODataFilters.value||[],o=e&&JSON.parse(e)||{},l=o&&o.parameters,f=l&&l.ibnParams,c=f&&f.sensitiveProps,u=o&&o.sensitiveProps,m=i._semanticDateRangeSetting,p,v=[];if(m){p=JSON.parse(m.value);v=Object.keys(p)||[]}var d={};if(v.length){v.forEach(function(e){var t=i[e]||{};var r=k(t.value)?JSON.parse(t.value):t.value;var a=t.type;var s="";var l=t.description&&JSON.parse(t.description),f=l&&l.operator,m=c&&c[e]||u&&u.includes(e);if(g.DATE_OPTIONS.DATE_LIST.includes(f)&&!m){var v=r&&r.SelectOptions&&r.SelectOptions[0]&&r.SelectOptions[0].Ranges;if(v&&v.length){n.massAddSelectOption(e,v)}else{if(a==="datetime"){s=G(r)}else if(a==="string"){s=r.toString()}n.massAddSelectOption(e,[{Sign:"I",Option:"EQ",Low:s,High:null}])}}else if(f&&!m){Q(l,a,e,p[e],n,o)}})}i._relevantODataParameters.value.forEach(function(e){var t=c&&c[e]||u&&u.includes(e);if(i[e]&&i[e].value&&!v.includes(e)&&!t){if(f){f[e]=i[e].value}else if(o&&o.ibnParams){o.ibnParams[e]=i[e].value}n.massAddSelectOption(e,[{Sign:"I",Option:"EQ",Low:i[e].value,High:null}])}});s.forEach(function(e){var t=k(i[e].value);if(t&&v.indexOf(e)===-1&&(c&&!c[e]||u&&!u.includes(e))){var r=JSON.parse(i[e].value);var a=r.SelectOptions&&r.SelectOptions.Ranges||r.SelectOptions&&r.SelectOptions[0]&&r.SelectOptions[0].Ranges;if(a&&a.length){var s=B(a);if(s){if(f){f[e]=a[0].Low}else if(o&&o.ibnParams){o.ibnParams[e]=a[0].Low}}else{if(f&&f[e]&&!s){delete f[e]}}n.massAddSelectOption(e,a)}}});var h=t||{};var b=Object.keys(h)||[];for(var S=0;S<b.length;S++){if(c&&c[b[S]]||u&&u.includes(b[S])||b[S]==="__metadata"){delete h[b[S]]}}var N=J(h,n&&n.toJSONObject());var O=q(N);N=_(N.toJSONObject());if(f&&f.presentationVariant){d["presentationVariant"]=f.presentationVariant}else if(o&&o.ibnParams&&o.ibnParams.presentationVariant){d["presentationVariant"]=o.ibnParams.presentationVariant}if(N.Parameters.length||N.SelectOptions.length){d["selectionVariant"]=N}if(l&&!l.ibnParams){l.ibnParams={}}if(d["selectionVariant"]||d["presentationVariant"]){if(l&&l.ibnParams){l.ibnParams["sap-xapp-state-data"]=JSON.stringify(d)}else if(o&&o.ibnParams){o.ibnParams["sap-xapp-state-data"]=JSON.stringify(d)}}if(f&&f.sensitiveProps){delete f.sensitiveProps}if(o&&o.sensitiveProps){delete o.sensitiveProps}for(var P in O){if(l&&l.ibnParams){l.ibnParams[P]=O[P]}else if(o&&o.ibnParams){o.ibnParams[P]=O[P]}}if(f){delete f.selectionVariant;delete f.presentationVariant}if(o&&o.ibnParams&&o.ibnParams.presentationVariant){delete o.ibnParams.presentationVariant}return o.parameters?o.parameters:o}function W(){var e={descriptorContent:{}};e.descriptorContent=this.getCard().getManifestEntry("/");var t=Z(e,"header");return t}function Y(){var e={descriptorContent:{}};e.descriptorContent=this.getCard().getManifestEntry("/");var t=e.descriptorContent["sap.card"]["configuration"]["csrfTokens"]["token1"].data.request.url;var r=Z(e,"content");if(e.descriptorContent["sap.card"]["data"]["request"]&&e.descriptorContent["sap.card"]["data"]["request"]["batch"]){return r}return t+"/"+r}function Z(e,t){var r=u.processPrivateParams(e,null,true);if(t==="header"&&r.header){return r.header}else if(t==="content"&&r.content){return r.content}}function K(){var e=window["sap-ushell-config"],t=e&&e.ushell,r=t&&t.homeApp;return!!r}return e.extend("sap.insights.CardExtension",{init:function(){e.prototype.init.apply(this,arguments);this.setFormatters({kpiformatter:P,formatHeaderUrl:y.bind(this),formatContentUrl:D.bind(this),returnPercentageChange:C,targetValueFormatter:I,kpiValueCriticality:F,formatValueColor:w,formatTrendIcon:E,formatDateValue:V,addPropertyValueToAppState:R.bind(this),getNavigationContext:z.bind(this),formatDate:M,formatNumber:U,formatCurrency:x,formatHeaderCount:T,formatCriticality:A,getMinMax:H.bind(this),formatHeaderDataUrlForSemanticDate:W.bind(this),formatContentDataUrlForSemanticDate:Y.bind(this)})},loadDependencies:function(){var e=this.getCard(),t=e.getManifestEntry("/sap.card/type"),r=[];if(!K()){r.push(new Promise(function(e){sap.ui.require(["sap/insights/HandleNonS4Environment"],function(t){t.initialize(this);e()}.bind(this))}.bind(this)))}if(t==="Analytical"){r.push(f.loadLibrary("sap.viz",{async:true}).then(function(){return new Promise(function(e){sap.ui.require(["sap/insights/OVPChartFormatter"],function(t){t.registerCustomFormatters();e()})})}))}return Promise.all(r)}})});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/CardHelper", ["sap/base/Log","sap/ui/model/json/JSONModel","sap/ui/core/Core"],function(e,t,r){"use strict";var a="/sap/opu/odata4/ui2/insights_srv/srvd/ui2/";var i=a+"insights_cards_repo_srv/0001/";var n="INSIGHTS_CARDS";var s=a+"insights_cards_read_srv/0001/"+n;var o="POST";var d="PUT";var c=e.getLogger("sap.insights.CardHelper");var u=sap.ui.getCore().getLibraryResourceBundle("sap.insights");var p="sap.insights.preview.Preview",l="sap.insights.selection.Selection",h="sap.insights.selection.SelectionDialog",f="sap.insights.copy.Copy",g="sap.insights.houseOfCards.HouseOfCardsDialog",C="sap.insights.configure.ColumnListDialog";function v(e){return i+n+"('"+e+"')"}function m(){return fetch(i,{method:"HEAD",headers:{"X-CSRF-Token":"Fetch"}}).then(function(e){var t=e.headers.get("X-CSRF-Token");if(e.ok&&t){return t}M(u.getText("tokenFetchError"))})}function y(e,t,r){if([d,o].indexOf(r)===-1){M("Method not supported.")}var a=e["sap.app"].id;var s=r===d?v(a):i+n;e={descriptorContent:JSON.stringify(e),id:a};var c=JSON.stringify(e);return fetch(s,{method:r,headers:{"X-CSRF-Token":t,"content-type":"application/json;odata.metadata=minimal;charset=utf-8"},body:c}).then(function(e){return e.json()}).then(function(e){if(e.error){M(e.error.message)}return JSON.parse(e.descriptorContent)})}function b(e,t){var r=i+n+"/com.sap.gateway.srvd.ui2.insights_cards_repo_srv.v0001.setRank?";var a=JSON.stringify({changedCards:JSON.stringify(e)});return fetch(r,{method:o,headers:{"X-CSRF-Token":t,"content-type":"application/json;odata.metadata=minimal;charset=utf-8"},body:a}).then(function(e){return e.json()}).then(function(e){if(e.error){M(e.error.message)}e.value.forEach(function(e){if(e.descriptorContent){e.descriptorContent=JSON.parse(e.descriptorContent)}});return e.value})}function P(e){var t=e.split(".");if(t[0]!=="user"){M("sap.app.id value should start with user.<id>.")}}function w(e,t){return fetch(v(e),{method:"DELETE",headers:{"X-CSRF-Token":t}}).then(function(e){return e.ok?{}:e.json()}).then(function(t){if(t.error){M(t.error.message)}return e})}function L(){var e="sap.insights is not enabled for this system.";var t="ux.eng.s4producthomes1";try{var r=window["sap-ushell-config"];var a=r.apps.insights.enabled;var i=r.ushell.homeApp.component.name;var n=i===t;var s=r.ushell.spaces.myHome.enabled;var o=r.ushell.spaces.enabled;if(a&&s&&n&&o){return Promise.resolve(true)}return Promise.reject(new Error(e))}catch(t){return Promise.reject(new Error(e))}}function M(e){c.error(e);throw new Error(e)}function S(e){var t=false;if(e&&e.parameters&&e.parameters.ibnTarget&&e.parameters.ibnTarget.semanticObject&&e.parameters.ibnTarget.action){t=true}if(e&&e.ibnTarget&&e.ibnTarget.semanticObject&&e.ibnTarget.action){t=true}return t}function _(e){var t=false;if(!e["sap.app"]){c.error("Invalid card manifest. sap.app namespace do not exists.");t=true}if(!t&&!e["sap.app"].id){c.error("Invalid card manifest. sap.app.id do not exists.");t=true}if(!t){P(e["sap.app"].id,false)}if(!t&&!e["sap.app"].type){c.error("Invalid card manifest. sap.app.type do not exists.");t=true}if(!t&&e["sap.app"].type.toLowerCase()!=="card"){c.error("Invalid card manifest. invalid value for sap.app.type, expected card.");t=true}if(!t&&!e["sap.card"]){c.error("Invalid card manifest. sap.card namespace do not exists.");t=true}if(!t&&!e["sap.card"].type){c.error("Invalid card manifest. sap.card.type do not exists.");t=true}var r=["Analytical","List","Table"];if(!t&&r.indexOf(e["sap.card"].type)===-1){c.error("Invalid card manifest. Invalid value for sap.card.type. Supported types: "+r);t=true}if(!t&&!e["sap.insights"]){c.error("Invalid card manifest. sap.insights namespace do not exists.");t=true}if(!t&&!e["sap.insights"].parentAppId){c.error("Invalid card manifest. sap.insights.parentAppId do not exists.");t=true}if(!t&&!e["sap.insights"].cardType){c.error("Invalid card manifest. sap.insights.cardType do not exists.");t=true}if(!t&&e["sap.insights"].cardType!=="RT"){c.error("Invalid card manifest. Invalid value for sap.insights.cardType, supported value is RT");t=true}if(!t&&!e["sap.insights"].versions||!e["sap.insights"].versions.ui5){c.error("Invalid card manifest. Invalid value for sap.insights version");t=true}if(!t&&e["sap.insights"].templateName==="OVP"){var a,i,n,s=false,o=e["sap.card"].type;if(o==="Analytical"){a=e["sap.card"].content.actions||[];i=e["sap.card"].header.actions||[];a=a.filter(function(e){return e.type==="Navigation"&&e.parameters&&e.parameters.ibnTarget&&e.parameters.ibnTarget.semanticObject&&e.parameters.ibnTarget.action});i=i.filter(function(e){return e.type==="Navigation"&&e.parameters&&e.parameters.ibnTarget&&e.parameters.ibnTarget.semanticObject&&e.parameters.ibnTarget.action});if(a.length>0||i.length>0){s=true}if(e["sap.card"].configuration.parameters.state&&e["sap.card"].configuration.parameters.state.value){n=JSON.parse(e["sap.card"].configuration.parameters.state.value);s=S(n)}}if(o==="List"||o==="Table"){a=(o==="List"?e["sap.card"].content.item.actions:e["sap.card"].content.row.actions)||[];i=e["sap.card"].header.actions||[];a=a.filter(function(e){return e.type==="Navigation"});i=i.filter(function(e){return e.type==="Navigation"});if(a.length>0||i.length>0){var d={},p={};if(e["sap.card"].configuration.parameters.headerState&&e["sap.card"].configuration.parameters.headerState.value){d=JSON.parse(e["sap.card"].configuration.parameters.headerState.value)}if(e["sap.card"].configuration.parameters.lineItemState&&e["sap.card"].configuration.parameters.lineItemState.value){p=JSON.parse(e["sap.card"].configuration.parameters.lineItemState.value)}var l=S(d),h=S(p);s=l||h}}if(!s){c.error("Invalid card manifest. Card should have navigation.");t=true}}if(t){throw new Error(u.getText("invalidManifest"))}}var T={localCardCache:{},userCardModel:(new t).setDefaultBindingMode("OneWay"),suggestedCardModel:(new t).setDefaultBindingMode("OneWay"),parentAppDetailsCache:{},_mergeCard:function(e,t,r){try{if(!r){_(e)}}catch(e){return Promise.reject(e)}this.suggestedCardModel.setProperty("/isLoading",true);return m().then(function(r){return y(e,r,t)}).then(function(e){this.localCardCache={};this.suggestedCardModel.setProperty("/isLoading",false);return e}.bind(this)).catch(function(e){this.suggestedCardModel.setProperty("/isLoading",false);return Promise.reject(e)}.bind(this))},createCard:function(e,t){return this._mergeCard(e,o,t)},updateCard:function(e,t){return this._mergeCard(e,d,t)},deleteCard:function(e){try{P(e)}catch(e){return Promise.reject(e)}this.suggestedCardModel.setProperty("/isLoading",true);return m().then(function(t){return w(e,t)}).then(function(e){this.localCardCache={};this.suggestedCardModel.setProperty("/isLoading",false);return e}.bind(this))},getUserCards:function(e){if(e){this.localCardCache={}}if(this.localCardCache.userCards){return Promise.resolve(this.localCardCache.userCards)}var t=s+"?$orderby=rank";return this._readCard(t).then(function(e){this.localCardCache.userCards=e;return e}.bind(this))},getUserCardModel:function(e){return this.getUserCards(e).then(function(e){var t=e.filter(function(e){return e.visibility});this.userCardModel.setProperty("/cards",e);this.userCardModel.setProperty("/cardCount",e.length);this.userCardModel.setProperty("/visibleCardCount",t.length);return this.userCardModel}.bind(this))},getSuggestedCards:function(){if(this.localCardCache.suggestedCards){return Promise.resolve(this.localCardCache.suggestedCards)}var e=s+"?$filter=visibility eq true&$select=descriptorContent,visibility,rank&$orderby=rank&$skip=0&$top=10";return this._readCard(e).then(function(e){this.localCardCache.suggestedCards=e;return e}.bind(this))},getSuggestedCardModel:function(){return this.getSuggestedCards().then(function(e){this.suggestedCardModel.setProperty("/cards",e);this.suggestedCardModel.setProperty("/cardCount",e.length);this.suggestedCardModel.setProperty("/isLoading",false);return this.suggestedCardModel}.bind(this))},_readCard:function(e){return fetch(e).then(function(e){if(e.ok){return e.json()}M("Cannot read user's suggested cards.")}).then(function(e){e.value.forEach(function(e){if(e.descriptorContent){e.descriptorContent=JSON.parse(e.descriptorContent)}});return e.value})},setCardsRanking:function(e){this.suggestedCardModel.setProperty("/isLoading",true);return m().then(function(t){return b(e,t)}).then(function(e){this.localCardCache={};this.suggestedCardModel.setProperty("/isLoading",false);return e}.bind(this))},_refreshUserCards:function(e){this.suggestedCardModel.setProperty("/isLoading",true);var t=e?{deleteAllCards:"X"}:{};return new Promise(function(e){fetch(i,{method:"HEAD",headers:{"X-CSRF-Token":"Fetch"}}).then(function(r){var a=r.headers.get("X-CSRF-Token");fetch(i+n+"/com.sap.gateway.srvd.ui2.insights_cards_repo_srv.v0001.deleteCards?",{method:"POST",headers:{"X-CSRF-Token":a,"content-type":"application/json;odata.metadata=minimal;charset=utf-8"},body:JSON.stringify(t)}).then(function(){this.localCardCache={};this.suggestedCardModel.setProperty("/isLoading",false);e()}.bind(this))}.bind(this))}.bind(this))},getParentAppDetails:function(e){if(this.parentAppDetailsCache[e.descriptorContent["sap.app"].id]){return Promise.resolve(this.parentAppDetailsCache[e.descriptorContent["sap.app"].id])}var t={};return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(r){var a=r._oAdapter._aInbounds||[];var i=a.find(function(t){return t.resolutionResult&&t.resolutionResult.applicationDependencies&&t.resolutionResult.applicationDependencies.name===e.descriptorContent["sap.insights"].parentAppId});if(i){t.semanticObject=i.semanticObject;t.action=i.action;t.semanticURL="#"+i.semanticObject+"-"+i.action;t.title=e.descriptorContent["sap.app"].title;this.parentAppDetailsCache[e.descriptorContent["sap.app"].id]=t}return t}.bind(this))}};var O={_oViewCache:{},_getLoadLibraryPromise:function(e){var t;switch(e){case p:t=Promise.all([r.loadLibrary("sap.m"),r.loadLibrary("sap.ui.integration"),r.loadLibrary("sap.viz")]);break;case l:case h:case g:t=Promise.all([r.loadLibrary("sap.m"),r.loadLibrary("sap.ui.core"),r.loadLibrary("sap.f"),r.loadLibrary("sap.ui.integration"),r.loadLibrary("sap.ui.layout"),r.loadLibrary("sap.viz")]);break;case C:case f:t=Promise.all([r.loadLibrary("sap.m"),r.loadLibrary("sap.ui.core"),r.loadLibrary("sap.f"),r.loadLibrary("sap.ui.integration"),r.loadLibrary("sap.ui.layout")]);break;default:break}return t},_getXMLView:function(e,t){return new Promise(function(r,a){if(this._oViewCache[e]){return r(this._oViewCache[e])}return this._getLoadLibraryPromise(e).then(function(){return sap.ui.core.mvc.XMLView.create({viewName:e,id:t?t:""}).then(function(t){this._oViewCache[e]=t;return r(this._oViewCache[e])}.bind(this))}.bind(this))}.bind(this))},showCardPreview:function(e,t,r){if(!this.oCardLoadPromise){this.oCardLoadPromise=this._getXMLView(p).then(function(a){return a.getController().showPreview(e,t,r)}).finally(function(){this.oCardLoadPromise=null}.bind(this))}return this.oCardLoadPromise},_getPreviewModelProperty:function(e){return this._getXMLView(p).then(function(t){var r=t.getController().getView().getModel("cardPreviewModel");return r.getProperty(e)})},_setPreviewModelProperty:function(e,t){return this._getXMLView(p).then(function(r){var a=r.getController().getView().getModel("cardPreviewModel");return a.setProperty(e,t)})},_showCardSelectionDialog:function(e){return this._getXMLView(h).then(function(t){return t.getController().showSelectionDialog(e)})},_showCardConfigureDialog:function(e){return this._getXMLView(C).then(function(t){var r=t.getController().getView().getModel("configureView");if(!r.getProperty("/bDialogOpen")){return t.getController().showColumnListDialog(e)}}).catch(function(e){return Promise.reject(e)})},showHouseOfCardsDialog:function(e){return this._getXMLView(g).then(function(t){return t.getController().showHouseOfCardsDialog(e)})},_setHoCModelProperty:function(e,t){return this._getXMLView(g).then(function(r){var a=r.getController().getView().getModel("hocModel");return a.setProperty(e,t)})}};return{getServiceAsync:function(e){return L().then(function(){if(e==="UIService"){return O}return T}).catch(function(e){return Promise.reject(e)})}}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 * This code handles S/4 cards in SAP Start and SAP Mobile Start
 */
sap.ui.predefine("sap/insights/HandleNonS4Environment", ["sap/ushell/utils/UrlParsing","sap/ui/core/Core","sap/base/Log"],function(a,t,e){"use strict";var r="(runtimeURL)";var n=t.getConfiguration().getSAPLogonLanguage();var i=function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var t="";var e=new window.Uint32Array(40);window.crypto.getRandomValues(e);var r=function(t){var r=e[t]%a.length;return a[r]};while(t.length<40){t+=r(t.length)}return t};var s=function(t,e){var r=JSON.parse(JSON.stringify(t)),n="",i={};if(r.ibnParams&&r.ibnParams["sap-xapp-state-data"]){delete r.ibnParams["sap-xapp-state-data"]}i={target:r.ibnTarget,params:r.ibnParams};if(e){i.appStateKey=e}n=a.constructShellHash(i);n=encodeURI(n);n="#"+n;return n};var o=function(a){var t;if(a){var e=a.getHostInstance();if(e){t=e.getDestination(r,a)}}if(!t){t=Promise.reject("S/4 runtime destination URL could not be determined!")}return t};var u=function(a){var t=a;if(t.indexOf("?")<0){t+="?"}else{t+="&"}t+="sap-language="+n;return t};var p=function(a,t,r){var n={id:t,sessionKey:"",component:"",appName:"",value:r.replaceAll("{","\\{")};return a.request({url:"{{destinations.service}}/sap/opu/odata/UI2/INTEROP/GlobalContainers",method:"POST",parameters:n,headers:{Accept:"application/json","X-CSRF-Token":"{{csrfTokens.token1}}","content-type":"application/json"}}).then(function(a){return}).catch(function(a){e.error("FAILED to save sap-xapp-state-data in S/4")})};var c=function(a){if(a.getParameter("type")!=="Navigation"){return}var t=this.getCard();var r=a.getParameter("parameters");if(r&&r.url){return}var n=r&&r.ibnParams&&r.ibnParams["sap-xapp-state-data"];var c=n?i():"";var v=s(r,c);var l=Promise.resolve();if(v){a.preventDefault(true);if(n){l=p(t,c,r.ibnParams["sap-xapp-state-data"])}l.then(function(){return o(this._oCard)}.bind(this)).then(function(a){if(a){var t=u(a);t+=v;this.getCard().triggerAction({type:"Navigation",parameters:{url:t,target:"_blank"}})}}.bind(this)).catch(function(a){e.error(a)})}};var v=function(a){a.attachAction(c.bind(a))};return{initialize:v,_:{createAppStateId:i,getIntent:s,getRuntimeDestinationUrl:o,addQueryParameter:u,saveXAppState:p,handleAction:c}}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 * This extension is for OVP cards delivered in 2203 onwards.
 */
sap.ui.predefine("sap/insights/OVPCardExtension", ["sap/ui/integration/Extension","sap/ui/core/format/NumberFormat","sap/fe/navigation/SelectionVariant","sap/base/Log","sap/ui/core/format/DateFormat","sap/ui/core/library","sap/m/library","./OVPChartFormatter","sap/ui/integration/util/Utils","sap/m/DynamicDateUtil","sap/ui/core/date/UI5Date"],function(e,t,r,a,i,n,o,s,l,f,u){"use strict";var c=o.ValueColor,g=n.ValueState;var m={StateValues:{None:"None",Negative:"Error",Critical:"Warning",Positive:"Success"},ColorValues:{None:"Neutral",Negative:"Error",Critical:"Critical",Positive:"Good"}};var v=a.getLogger("sap.insights.CardExtension");var p=function(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1};var d=function(e,t){var r;if(t){r=t.None;if(e&&e.EnumMember){var a=e.EnumMember;if(p(a,"Negative")){r=t.Negative}else if(p(a,"Critical")){r=t.Critical}else if(p(a,"Positive")){r=t.Positive}}}return r};var b=function(e,t,r,a,i,n,o){var s={};s.EnumMember="None";var l=Number.NEGATIVE_INFINITY;var f=Number.POSITIVE_INFINITY;if(!i&&i!==0&&(r||r===0)){i=r}if(!n&&n!==0&&(a||a===0)){n=a}if(!r&&r!==0){r=l}if(!a&&a!==0){a=f}if(e!==undefined){e=Number(e);if(p(t,"Minimize")||p(t,"Minimizing")){if((n||n===0)&&(a||a===0)){if(e<=parseFloat(n)){s.EnumMember="Positive"}else if(e>parseFloat(a)){s.EnumMember="Negative"}else{s.EnumMember="Critical"}}}else if(p(t,"Maximize")||p(t,"Maximizing")){if((i||i===0)&&(r||r===0)){if(e>=parseFloat(i)){s.EnumMember="Positive"}else if(e<parseFloat(r)){s.EnumMember="Negative"}else{s.EnumMember="Critical"}}}else if(p(t,"Target")){if((n||n===0)&&(a||a===0)&&(i||i===0)&&(r||r===0)){if(e>=parseFloat(i)&&e<=parseFloat(n)){s.EnumMember="Positive"}else if(e<parseFloat(r)||e>parseFloat(a)){s.EnumMember="Negative"}else{s.EnumMember="Critical"}}}}return d(s,o)};var h=function(e,t,r,a){if(!e||!t){return}e=Number(e);if(!a&&e-t>=0){return"Up"}if(!r&&e-t<=0){return"Down"}if(t&&a&&e-t>=a){return"Up"}if(t&&r&&e-t<=r){return"Down"}};var N=function(e,r,a){var i=r||{},n=e;var o=t.getFloatInstance({minFractionDigits:i.NumberOfFractionalDigits,maxFractionDigits:i.NumberOfFractionalDigits,style:"short",showScale:true,shortRefNumber:n});var s=o.format(Number(n)),l=o.getScale()||"";if(!a&&s){var f=s[s.length-1];return f===l?s.slice(0,s.length-1):s}if(a&&i.percentageAvailable){return l+"%"}if(a&&!i.percentageAvailable){return l}return""};var S=function(){var e=this.getCard().getCombinedParameters();return e._headerDataUrl};var D=function(){var e=this.getCard().getCombinedParameters();return e._contentDataUrl};var I=function(e,r,a){var i,n,o;if(isNaN(+e)){return""}if(e==0){o=r}else{o=e}if(a.NumberOfFractionalDigits){n=+a.NumberOfFractionalDigits}if(r){i=r}else if(a.manifestTarget){i=a.manifestTarget}if(!n||n<0){n=0}else if(n>2){n=2}if(i){var s=t.getFloatInstance({minFractionDigits:n,maxFractionDigits:n,style:"short",showScale:true,shortRefNumber:o});return s.format(+i)}};var y=function(e,r,a){var i,n;if(isNaN(+e)){return""}e=+e;if(a.NumberOfFractionalDigits){i=+a.NumberOfFractionalDigits}if(r){n=+r}else if(a.manifestTarget){n=+a.manifestTarget}if(!i||i<0){i=0}else if(i>2){i=2}if(n){var o=(e-n)/n;var s=t.getPercentInstance({style:"short",minFractionDigits:i,maxFractionDigits:i,showScale:true});return s.format(o)}};var O=function(e){var t={};t.EnumMember="None";if(Number(e)===1){t.EnumMember="Negative"}else if(Number(e)===2){t.EnumMember="Critical"}else if(Number(e)===3){t.EnumMember="Positive"}return d(t,m.ColorValues)};var F=function(){var e=arguments[arguments.length-1];var t=1;return b(arguments[0],e.sImprovementDirection,e.bIsDeviationLowBinding?arguments[t++]:e.deviationLow,e.bIsDeviationHighBinding?arguments[t++]:e.deviationHigh,e.bIsToleranceLowBinding?arguments[t++]:e.toleranceLow,e.bIsToleranceHighBinding?arguments[t++]:e.toleranceHigh,e.oCriticalityConfigValues)};var C=function(){var e=arguments[arguments.length-1];var t=1;return h(arguments[0],e.bIsRefValBinding?arguments[t++]:e.referenceValue,e.bIsDownDiffBinding?arguments[t++]:e.downDifference,e.bIsUpDiffBinding?arguments[t++]:e.upDifference)};var E=function(e){var t;var r=arguments[arguments.length-1],a=r&&r.propertyType;switch(a){case"yearmonth":var i=parseInt(e.substr(0,4),10),n=e.substr(4),o=parseInt(n,10)-1;t=u.getInstance(Date.UTC(i,o));break;case"yearquarter":var i=parseInt(e.substr(0,4),10),s=e.substr(4),l=parseInt(s,10)*3-2,o=l-1;t=u.getInstance(Date.UTC(i,o));break;case"yearweek":var i=parseInt(e.substr(0,4),10),f=e.substr(4),c=1+(parseInt(f,10)-1)*7;t=u.getInstance(Date.UTC(i,0,c));break;default:break}return t};var P=function(e,t){var r=l.parseJsonDateTime(e);return i.getInstance(t).format(u.getInstance(r),t.bUTC)};var w=function(e,r,a,i){var n;if(e){e.maxFractionDigits=e.numberOfFractionalDigits||0;e.minFractionDigits=e.numberOfFractionalDigits||0;e.style=e.style||"short";e.showScale=e.showScale||true;e.shortRefNumber=e.scaleFactor;n=t.getFloatInstance(e)}var o=[];if(!isNaN(parseFloat(a))&&n){o.push(n.format(a))}else{o.push(a)}if(!isNaN(parseFloat(i))&&n){o.push(n.format(i))}else{o.push(i)}var s="";if(r&&r.length){r.forEach(function(e){if(typeof e==="number"){s=s+o[e]}else{s=s+e}})}return s};var V=function(e,t){if(t==="state"){switch(String(e)){case"1":case"Error":return g.Error;case"2":case"Warning":return g.Warning;case"3":case"Success":return g.Success;case"4":case"Information":return g.Information;default:return g.None}}if(t==="color"){switch(String(e)){case"1":case"Error":return c.Error;case"2":case"Critical":return c.Critical;case"3":case"Good":return c.Good;case"4":case"Neutral":return c.Neutral;default:return c.None}}};var M=function(e,t){var r=this.getCard().getModel().getProperty("/content/d/results")||this.getCard().getModel().getProperty("/d/results")||[];return Math[t].apply(Math,r.map(function(t){return t[e]}))};var T=function(e,t,r){var a=1;var i=2;var n=4;for(var o in e){if(e.hasOwnProperty(o)){var s=e[o];if(s instanceof Date){s=s.toJSON()}else if(Array.isArray(s)||s&&typeof s==="object"){s=JSON.stringify(s)}else if(typeof s==="number"||typeof s==="boolean"){s=s.toString()}if(s===""){if(r&a){v.info("Semantic attribute "+o+" is an empty string and due to the chosen Suppression Behiavour is being ignored.");continue}}if(s===null){if(r&i){throw new v.error("NavigationHandler.INVALID_INPUT")}else{v.warning("Semantic attribute "+o+" is null and ignored for mix in to selection variant");continue}}if(s===undefined){if(r&n){throw new v.error("NavigationHandler.INVALID_INPUT")}else{v.warning("Semantic attribute "+o+" is undefined and ignored for mix in to selection variant");continue}}if(typeof s==="string"||s instanceof String){t.addSelectOption(o,"I","EQ",s)}else{throw new v.error("NavigationHandler.INVALID_INPUT")}}}return t};var x=function(e,t,a){var i=new r(t);var n=new r;if(i.getFilterContextUrl()){n.setFilterContextUrl(i.getFilterContextUrl())}if(i.getParameterContextUrl()){n.setParameterContextUrl(i.getParameterContextUrl())}if(Array.isArray(e)){e.forEach(function(e){T(e,n,a)})}else{T(e,n,a)}var o=i.getParameterNames();var s;for(s=0;s<o.length;s++){if(!n.getSelectOption(o[s])){n.addSelectOption(o[s],"I","EQ",i.getParameter(o[s]))}}var l=i.getSelectOptionsPropertyNames();for(s=0;s<l.length;s++){var f=i.getSelectOption(l[s]);if(!n.getSelectOption(l[s])){for(var u=0;u<f.length;u++){n.addSelectOption(l[s],f[u].Sign,f[u].Option,f[u].Low,f[u].High)}}}return n};function U(e){if(e){if(e.hasOwnProperty("SelectionVariantID")){delete e.SelectionVariantID}else if(e.hasOwnProperty("PresentationVariantID")){delete e.PresentationVariantID}delete e.Text;delete e.ODataFilterExpression;delete e.Version;delete e.FilterContextUrl;delete e.ParameterContextUrl;return e}return e}var H=function(e){try{if(JSON.parse(e)){return true}}catch(e){return false}};var A=function(e){var t=e&&e.length===1,r=e&&e[0];return t&&r["Option"]==="EQ"&&!r["High"]&&r["Low"]&&r["Sign"]==="I"};var L=function(e){var t=i.getDateInstance({pattern:"''yyyy-MM-dd'T'HH:mm:ss.SSS'Z'''",calendarType:"Gregorian"});if(e){var r=t.format(e,true);return String(r).replace(/'/g,"")}};var _=function(e){var t=i.getDateInstance({pattern:"''yyyy-MM-dd'T'HH:mm:ss.SSS''",calendarType:"Gregorian"});var r=e instanceof Date?e:u.getInstance(e);var a=t.format(r);return String(a).replace(/'/g,"")};var J=function(e,t,r){var a=[];if(e.operation==="DATE"&&e.value1){a=f.toDates({values:[e.value1],operator:e.operation})||[]}else{a=f.toDates({values:[],operator:e.operation})||[]}var i=a[0]&&a[0].oDate;var n=a[1]&&a[1].oDate;var o="",s="";if(e["sap:filter-restriction"]==="single-value"){if(e.type==="Edm.DateTime"&&i instanceof Date){o=_(i);if(o){t.massAddSelectOption(r,[{Sign:"I",Option:e.operator,Low:o,High:null}])}}else if(e.type==="Edm.String"){o=L(i);if(o){t.massAddSelectOption(r,[{Sign:"I",Option:e.operator,Low:o,High:null}])}}}else if(e["sap:filter-restriction"]==="interval"){if(e.type==="Edm.DateTime"){if(i instanceof Date){o=_(i)}if(n instanceof Date){s=_(n)}if(o&&s){t.massAddSelectOption(r,[{Sign:"I",Option:e.operator,Low:o,High:s}])}}else if(e.type==="Edm.String"){if(i instanceof Date){o=L(i)}if(n instanceof Date){s=L(n)}if(o&&s){t.massAddSelectOption(r,[{Sign:"I",Option:e.operator,Low:o,High:s}])}}}};function k(e,t){var a=this.getEventingParent().getManifest()["sap.card"],i=a&&a.configuration.parameters,n=new r,o=i._relevantODataFilters.value||[],s=i._mandatoryODataParameters.value||[],e=e&&JSON.parse(e)||{},l=e.parameters||{},f=l.ibnParams||{},u=f.sensitiveProps||{};var c={};s.forEach(function(e){var t=H(i[e].value);if(t&&!u[e]){var r=JSON.parse(i[e].value);if(r&&r.operation){J(r,n,e)}}});o.forEach(function(e){var t=H(i[e].value);if(t&&!u[e]){var r=JSON.parse(i[e].value);if(r&&r.operation){J(r,n,e)}else{var a=r.SelectOptions.Ranges||r.SelectOptions&&r.SelectOptions[0]&&r.SelectOptions[0].Ranges;if(a&&a.length){var o=A(a);if(o){f[e]=a[0].Low}else{if(f[e]&&!o){delete f[e]}n.massAddSelectOption(e,a)}}}}});var g=t||{};var m=Object.keys(g)||[];for(var v=0;v<m.length;v++){if(u&&u[m[v]]||m[v]==="__metadata"){delete g[m[v]]}}var p=x(g,n&&n.toJSONObject());p=U(p.toJSONObject());if(f.presentationVariant){c["presentationVariant"]=f.presentationVariant}if(p.Parameters.length||p.SelectOptions.length){c["selectionVariant"]=p}if(!l.ibnParams){l.ibnParams={}}if(c["selectionVariant"]||c["presentationVariant"]){l.ibnParams["sap-xapp-state-data"]=JSON.stringify(c)}if(f&&f.sensitiveProps){delete f.sensitiveProps}delete f.selectionVariant;delete f.presentationVariant;return e}return e.extend("sap.insights.CardExtension",{init:function(){e.prototype.init.apply(this,arguments);s.registerCustomFormatters();this.setFormatters({kpiformatter:N,formatHeaderUrl:S.bind(this),formatContentUrl:D.bind(this),returnPercentageChange:y,targetValueFormatter:I,kpiValueCriticality:O,formatValueColor:F,formatTrendIcon:C,formatDateValue:E,addPropertyValueToAppState:k.bind(this),formatDate:P,formatNumber:w,formatCriticality:V,getMinMax:M.bind(this)})}})});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/OVPChartFormatter", ["sap/viz/library","sap/viz/ui5/format/ChartFormatter","sap/viz/ui5/api/env/Format","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/ui/core/date/UI5Date"],function(t,e,r,a,n,i){"use strict";var o=10;var s=[{prefix:"CURR",fn:f},{prefix:"axisFormatter",fn:u},{prefix:"0.0%",fn:m}];var c=["YearMonthDay","YearMonth","MMM","YearQuarter","Quarter","YearWeek","Week"];function f(t,e){var r;if(t===-1){r=a.getCurrencyInstance({style:"short",currencyCode:false})}else{r=a.getCurrencyInstance({style:"short",currencyCode:false,minFractionDigits:t,maxFractionDigits:t})}return r.format(Number(e))}function u(t,e){var r;if(t===-1){r=a.getFloatInstance({style:"short"})}else{r=a.getFloatInstance({style:"short",minFractionDigits:t,maxFractionDigits:t?t:1})}return r.format(Number(e))}function m(t,e){var r;if(t===-1){r=a.getPercentInstance({style:"short",minFractionDigits:1,maxFractionDigits:1})}else{r=a.getPercentInstance({style:"short",minFractionDigits:t,maxFractionDigits:t})}return r.format(Number(e))}function g(t,e){if(e.constructor===Date){var r=n.getDateTimeInstance({pattern:t});if(t==="YearMonthDay"){r=n.getDateInstance({style:"medium"})}if(t==="YearMonth"||t==="MMM"){r=n.getDateTimeInstance({format:"MMM"})}if(t==="YearQuarter"||t==="Quarter"){r=n.getDateTimeInstance({format:"QQQ"})}if(t==="YearWeek"||t==="Week"){r=n.getDateTimeInstance({format:"www"})}e=r.format(i.getInstance(e),true)}return e}return{registerCustomFormatters:function(){var t=e.getInstance();var a=[];s.forEach(function(t){a.push({name:t.prefix,fn:t.fn.bind(null,2)});for(var e=-1;e<=o;e++){var r="/"+e+"/";a.push({name:t.prefix+r,fn:t.fn.bind(null,e)})}});c.forEach(function(t){a.push({name:t,fn:g.bind(null,t)})});a.forEach(function(e){t.registerCustomFormatter(e.name,e.fn)});r.numericFormatter(t)}}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/base/Base.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","../utils/MetadataAnalyser","../utils/SelectionVariantHelper","sap/fe/navigation/SelectionVariant","sap/m/Token","../utils/oDataModelProvider","sap/ui/core/CustomData","sap/m/DynamicDateUtil","sap/ui/comp/util/DateTimeUtil","sap/ui/core/format/DateFormat","../utils/AppConstants","../utils/UrlGenerateHelper","sap/ui/core/IconPool","sap/base/util/deepClone","sap/ui/core/date/UI5Date","../utils/V4MetadataAnalyser","sap/ui/mdc/MultiValueField","sap/ui/mdc/field/MultiValueFieldItem","sap/ui/layout/form/SimpleForm","sap/m/Toolbar","sap/m/Title","sap/m/Text"],function(e,t,a,r,i,n,o,s,l,d,u,g,c,p,f,h,m,v,y,S,C,b,T){"use strict";var D="smartForm";var _="copyCardSmartForm";return e.extend("sap.insights.base.BaseController",{constructor:function(){this._oParentViewModel=new t({oCard:{}});this.oSmartFormMap={};this.oDraftCardParams={};this.bEnableCardEdit=true},_createOdataModelsforDialog:function(e){var t=[];e.forEach(function(e){t.push(o.getOdataModel(e.descriptorContent["sap.app"].dataSources))});if(t.length){return Promise.all(t)}},setFilterTextForNoData:function(e,t,a){sap.ui.getCore().loadLibrary("sap.ui.comp",{async:true}).then(function(){sap.ui.require(["sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/ui/comp/smartform/Layout","sap/m/Text"],function(r,i,n,o){e.removeAllGroups();var s=new r;var l=new i;var d=new o({text:t?this.i18Bundle.getText("noFilterMsg"):this.i18Bundle.getText("noFilterLoaded"),textAlign:"Center"});l.addElement(d);s.addGroupElement(l);e.setLayout(new n);e.addGroup(s);if(a){e.getAggregation("content").getLayout().setBackgroundDesign("Transparent")}}.bind(this))}.bind(this))},_setSmartFormForCardEdit:function(e){if(e&&e.descriptorContent&&e.descriptorContent["sap.app"]){var t=e.descriptorContent["sap.app"];var a=t&&t.dataSources;var r=a&&a.filterService;if(r&&r.settings&&r.settings.odataVersion===g.ODATA_VERSION_2){this._oParentViewModel.setProperty("/oCard",e);var i=e.descriptorContent["sap.app"].id,n=this.oSmartFormMap[i]&&!this.smartFormEditable?Promise.resolve(this.oSmartFormMap[i]):this._createSmartFormForCardEdit(e,this.smartFormEditable);n.then(function(t){if(this.smartFormEditable){t.setEditable(true)}var a=this.byId(D)||this.byId(_);a.removeAllItems();var r=e.descriptorContent["sap.app"].dataSources;o.getOdataModel(r).then(function(e){var r=e&&e.loaded;var i=false;if(t.getGroups()&&t.getGroups().length&&t.getGroups()[0].getGroupElements()){i=t.getGroups()[0].getGroupElements().some(function(e){return e.getElements().some(function(e){return e.getVisible()})})}if(t.getAggregation("content").getFormContainers().length&&r&&i){t.setVisible(true);setTimeout(function(){var e=t.getAggregation("content").getLayout();if(e){e.setBackgroundDesign("Transparent")}a.addItem(t)},0)}else{this.setFilterTextForNoData(t,r,true);a.addItem(t)}}.bind(this))}.bind(this))}else if(r&&r.settings&&r.settings.odataVersion===g.ODATA_VERSION_4){this.createSimpleForm(e)}}},_search:function(e,t){return t?t.split("/").reduce(function(e,t){return e&&t?e[t]:e},e):undefined},_fetchParameterizedFilters:function(e,t){var a=this._search(e,"/sap.card/configuration/parameters"),r=this._search(a,"/_relevantODataParameters/value")||[];return r.reduce(function(r,i){return r.then(function(r){return m.getAnnotations(t,e,i,["@com.sap.vocabularies.Common.v1.Label","@com.sap.vocabularies.UI.v1.Hidden"]).then(function(e){var t=e[0],o=e[1],s=a[i].value,l=a[i].label;if(s&&!o){r.push({name:t||i,tokens:[new n({key:s,text:l?l:s})]})}return Promise.resolve(r)})})},Promise.resolve([]))},_fetchRelevantFilters:function(e,t){var a=this._search(e,"/sap.card/configuration/parameters"),n=this._search(a,"/_relevantODataFilters/value")||[];return n.reduce(function(n,o){return n.then(function(n){return m.getAnnotations(t,e,o,["@com.sap.vocabularies.Common.v1.Label","@com.sap.vocabularies.UI.v1.Hidden"]).then(function(e){var t=e[0],s=e[1],l=a[o].value,d=new i(l),u=d.getSelectOption(o);if(u.length&&!s){var g=r.getTokenFromSelectOptions(u,o);n.push({name:t||o,tokens:g})}return Promise.resolve(n)})})},Promise.resolve([]))},_generateMutltiValueField:function(e){var a=new t(e.map(function(e){return{key:e.getKey(),name:e.getText()}}));var r=new v({editMode:"Display",display:"Description",width:"100%",items:{path:"/",template:new y({description:"{name}",key:"{key}"})}});r.setModel(a);return r},createSimpleForm:function(e){o.getOdataModel(this._search(e,"/descriptorContent/sap.app/dataSources")).then(function(t){var a=this.byId(D),r=e.descriptorContent,i=t.oData,n=this._search(r,"/sap.app/id"),o=function(e){return new T({text:e,textAlign:"Center"})};a.removeAllItems();this._oSimpleForm=this._oSimpleForm||{};if(!this._oSimpleForm[n]){this._oSimpleForm[n]=new S({layout:"ColumnLayout",editable:false,toolbar:new C({style:"Clear",content:[new b({text:this.i18Bundle.getText("filterBy"),titleStyle:"H5"})]})});if(t.loaded){Promise.all([this._fetchRelevantFilters(r,i),this._fetchParameterizedFilters(r,i)]).then(function(e){var t=e[0],a=e[1];if(t.length||a.length){a.concat(t).forEach(function(e){this._oSimpleForm[n].addContent(new sap.m.Label({text:e.name}));this._oSimpleForm[n].addContent(this._generateMutltiValueField(e.tokens))}.bind(this))}else{this._oSimpleForm[n].addContent(o(this.i18Bundle.getText("noFilterMsg")))}}.bind(this))}else{this._oSimpleForm[n].addContent(o(this.i18Bundle.getText("noFilterLoaded")))}}a.addItem(this._oSimpleForm[n])}.bind(this))},_createSmartFormForCardEdit:function(e){return new Promise(function(t){sap.ui.getCore().loadLibraries(["sap.ui.comp","sap.m"],{async:true}).then(function(){sap.ui.require(["sap/ui/comp/smartmultiinput/SmartMultiInput","sap/ui/comp/smartform/SmartForm","sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/ui/comp/smartform/Layout","sap/m/Title","sap/m/Toolbar"],function(l,d,u,g,p,f,m){var v=e.descriptorContent;var y=v["sap.card"].configuration.parameters;var S=v["sap.insights"].filterEntitySet;var C=y&&y._entitySet.value;var b=v["sap.app"].dataSources;o.getOdataModel(b).then(function(o){var b=o&&o.loaded;this._oParentViewModel.setProperty("/oCard",e);var T={layout:new p({labelSpanS:6}),customToolbar:new m({content:[new f({text:this.i18Bundle.getText("filterBy"),titleStyle:"H5"})],style:"Clear"})};var D=new d(T);var _=new u;var E=[],P=[],F=[],I=[],O,V,k=[];if(y){E=y._mandatoryODataParameters.value||[];P=y._mandatoryODataFilters.value||[];F=y._relevantODataParameters.value||[];I=y._relevantODataFilters.value||[];V=y._semanticDateRangeSetting;if(V){O=JSON.parse(V.value);k=Object.keys(O)||[]}}D.attachEditToggled(function(e){var t=e.getParameters().editable;var a=e.getSource().getGroups()&&e.getSource().getGroups().length?e.getSource().getGroups()[0]:null;if(t&&a){a.getGroupElements().forEach(function(e){e.getFields().forEach(function(e){e.attachInnerControlsCreated(function(e){var t=e.getSource(),a=t.getBindingPath("value");if((E.includes(a)||P.includes(a))&&t.getProperty("editable")){t.setMandatory(true)}else if(t.getMandatory()){t.setMandatory(false)}t.checkClientError()})})})}});var A=function(e,t){if(t){var a=new s({key:"date",value:t});e.insertCustomData(a)}};var x=o&&a.getParameterisedEntitySetByEntitySet(o.oData,S);var M=x?a.getPropertyNamesOfEntitySet(o.oData,x):[];if(b){if(F.length){F.forEach(function(e){var t=x;var r=true;if(M.indexOf(e)===-1){t=C;r=false}var i=a.isValueListWithFixedValues(o.oData,t,e);var s=a.isDate(o.oData,t,e);var d=k.includes(e);var u=new g;var p=new l({entitySet:t,value:"{"+e+"}",editable:r,visible:r,singleTokenMode:true,supportRanges:false,innerControlsCreated:this._handleVisibilityChange.bind(this,d,true)});if(i){p.attachInnerControlsCreated(function(e){var t=e.getSource();if(t.getMode()==="edit"){var a=t.getInnerControls();if(Array.isArray(a)&&a.length){var r=t.getAggregation("_initialTokens");if(t.getSingleTokenMode()){var i=a[0],n=Array.isArray(r)&&r.length?r[0]:null;if(i.setForceSelection){i.setForceSelection(false);if(n){i.setSelectedKey(n.getKey())}else{i.setSelectedItem(null)}}}else{var o=a[0];if(Array.isArray(r)&&r.length){o.setSelectedKeys(r.map(function(e){return e.getKey()}))}}if(t.getMandatory()){t.checkClientError()}}}});p.checkClientError=function(){return this._checkClientError(p)}.bind(this);p.attachSelectionChange(this._handleParameterSelectionChange.bind(this))}else{if(d){p.addStyleClass("semanticDateInsight")}p.attachTokenUpdate(this._handleParameterTokenUpdate.bind(this,null,d))}var f=y[e].value;var m=y[e].label;if(f){var v=new n({key:f,text:m?m:f});if(s){if(!k.includes(e)){A(v,h.getInstance(f))}else{if(O&&this.smartFormEditable){var S=this._getOptionsForDynamicDate(O,e);var b=this.byId("hiddenDDR");b.setStandardOptions(S)}f=c.formatSemanticDateTime(f,"Parameter")[0];A(v,f)}}if(i&&p.getInnerControls().length){var T=p.getInnerControls()[0];T.setSelectedKey(v.getKey())}p.addAggregation("_initialTokens",v)}if(f&&p.getVisible()){u.addElement(p);_.addGroupElement(u)}else if(this.bEnableCardEdit&&p.getVisible()){u.addElement(p);_.addGroupElement(u)}this._attachInitialiseToGroupElement(u)}.bind(this))}var w=a.getPropertyNamesOfEntitySet(o.oData,S);I.forEach(function(e){var t=e;if(!(t==="DisplayCurrency"&&F.indexOf("P_DisplayCurrency")>-1)){var n=S;var s=true;if(w.indexOf(t)===-1){var d="P_"+t;if(M.indexOf(d)>-1){n=x;t=d}else{n=C;s=false}}var u=a.isValueListWithFixedValues(o.oData,n,t);var p=a.isDate(o.oData,n,t);var f=k.includes(t);var m=new g;var v;if(t.indexOf("P_")===0){v=true}else{v=a.getPropertyFilterRestrictionByEntitySet(o.oData,n,t)}var b=new l({entitySet:n,value:"{"+t+"}",editable:s,visible:s,supportRanges:!v,singleTokenMode:v,innerControlsCreated:this._handleVisibilityChange.bind(this,f,false)});if(u){b.attachInnerControlsCreated(function(e){var t=e.getSource();if(t.getMode()==="edit"){var a=t.getInnerControls();if(Array.isArray(a)&&a.length){var r=t.getAggregation("_initialTokens");if(t.getSingleTokenMode()){var i=a[0],n=Array.isArray(r)&&r.length?r[0]:null;if(i.setForceSelection){i.setForceSelection(false);if(n){i.setSelectedKey(n.getKey())}else{i.setSelectedItem(null)}}}else{var o=a[0];if(Array.isArray(r)&&r.length){o.setSelectedKeys(r.map(function(e){return e.getKey()}))}}if(t.getMandatory()){t.checkClientError()}}}});b.checkClientError=function(){return this._checkClientError(b)}.bind(this);b.attachSelectionChange(this._handleFilterSelectionChange.bind(this))}else{if(f){b.setSingleTokenMode(true);b.addStyleClass("semanticDateInsight")}b.attachTokenUpdate(this._handleFilterTokenUpdate.bind(this,null,f))}var T=new i(y[e].value);var D=T.getSelectOption(e);if(D&&D.length){var E=[],P=[];E=r.getTokenFromSelectOptions(D,e);E.forEach(function(t,a){if(p){if(!k.includes(e)){A(t,h.getInstance(t.getKey()))}else{if(O&&this.smartFormEditable){var r=this._getOptionsForDynamicDate(O,e);var i=this.byId("hiddenFilterDDR");i.setStandardOptions(r)}P=c.formatSemanticDateTime(null,D[a],"Filter");P=c.formatSemanticDateTime(D[a],"Filter");P.forEach(function(e){A(t,e)})}}if(u&&b.getInnerControls().length){var n=b.getInnerControls()[0];n.setSelectedKey(t.getKey())}b.addAggregation("_initialTokens",t)}.bind(this));m.addElement(b);_.addGroupElement(m)}else if(this.bEnableCardEdit){m.addElement(b);_.addGroupElement(m)}this._attachInitialiseToGroupElement(m)}}.bind(this))}if(_.getAggregation("formElements")&&_.getAggregation("formElements").length){D.addGroup(_)}var N=v["sap.app"].id;if(b){D.setModel(o.oData)}this.oSmartFormMap[N]=D;t(D)}.bind(this))}.bind(this))}.bind(this))}.bind(this))},_handleVisibilityChange:function(e,t,a){var r=a.getSource();var i=this.byId(D);var n=i&&i.getItems()[0];var o=false;if(e&&r.getMode()==="edit"){var s=t?this.byId("hiddenDDR"):this.byId("hiddenFilterDDR");s.setValue(null);var l=r.getBinding("value").sPath;var d=r.getInnerControls();if(d.length){var u=d[0];r.setShowValueHelp(false);r.setShowSuggestion(false);if(!sap.ui.getCore().byId(u.getId()+"-dynamicDateIcon")){u.addEndIcon({id:u.getId()+"-dynamicDateIcon",src:p.getIconURI("check-availability"),press:t?this._handleParameterTokenUpdate.bind(this,r,true):this._handleFilterTokenUpdate.bind(this,r,true)});u.attachLiveChange(function(){this.bValueApplied=true;u.setValue("");s.attachEventOnce("change",null,t?this._onSemanticParameterDateChange.bind(this,l,r):this._onSemanticFilterDateChange.bind(this,l,r),s);s.openBy(r.getDomRef())}.bind(this))}}}setTimeout(function(){if(n){var e=n.getGroups()&&n.getGroups().length?n.getGroups()[0]:null;var t=e&&e.getGroupElements();if(t&&t.length){t.forEach(function(t){var a=t.getFields();a.forEach(function(e){if(!this.smartFormEditable&&e.getId()===r.getId()&&(e.getTokens&&e.getTokens().length===0)){t.removeField(e)}if(t.getVisible()&&e.getVisible()&&e.getTokens&&e.getTokens().length){o=true}}.bind(this));if(!t.getFields().length){e.removeGroupElement(t)}}.bind(this))}}if(!o&&i){i.removeAllItems();this.setFilterTextForNoData(n,true,false);i.addItem(n)}}.bind(this),0)},_handleFilterTokenUpdate:function(e,t,n){var o=e?e:n.getSource();if(o.getMandatory()){o.checkClientError()}var s=o.getBinding("value").sPath;var l=o.getTokens();var u=this._oParentViewModel.getProperty("/oCard");var c=u.descriptorContent["sap.app"].id;var p=o.getModel();var f=a.isDate(p,o.getEntitySet(),s);var m,v="",y,S={value:"",label:"",description:""};y=u.descriptorContent["sap.card"].configuration.parameters;if(t&&(!l.length||e)){m=this.byId("hiddenFilterDDR");m.attachEventOnce("change",null,this._onSemanticFilterDateChange.bind(this,s,o),m);this.bValueApplied=true;m.openBy(o.getDomRef());if(!l.length){S.value=r.getEmptySVStringforProperty(s)}else{v=m._parseValue(l[0].getKey());if(v){m.setValue(v)}else{S.description=m.getValue()?JSON.stringify(m.getValue()):"";if(!m.getValue()&&y[s]&&y[s].description){var C;S.description=y[s].description;S.value=y[s].value;C=JSON.parse(S.description);C.values.forEach(function(e,t){if(g.DATE_OPTIONS.DATE_LIST.includes(C.operator)){var a=h.getInstance(e);if(e.match&&!(e.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3})Z$/gm)&&e.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3})Z$/gm).length)){C.values[t]=d.utcToLocal(a);if(!["DATETIMERANGE","FROMDATETIME","TODATETIME","DATETIME"].includes(C.operator)){C.values[t]=d.normalizeDate(C.values[t],true)}}else{C.values[t]=a}}});m.setValue(C)}else{m.setValue(m.getValue())}}}}else if(l.length){var b=new i;var T=[];var D="";l.forEach(function(e){D="";if(e.data("selectOption")){var t=e.data("selectOption");if(!t.Text){t.Text=e.getText?e.getText():null}T.push(t)}else if(e.data("range")){var a=e.data("range");var i=r.getSelectOptionFromRange(a,e.getText());T.push(i)}else if(f){var n=p.formatValue(e.getKey(),"Edm.DateTime");b.addSelectOption(s,"I","EQ",n,null,n)}else if(o._parseValue){var l=o._parseValue(e.getKey());D=e.getText()?e.getText():e.getKey();b.addSelectOption(s,"I","EQ",l,null,D)}else{D=e.getText()?e.getText():e.getKey();b.addSelectOption(s,"I","EQ",e.getKey(),null,D)}});b.massAddSelectOption(s,T);S.value=b.toJSONString()}else{S.value=r.getEmptySVStringforProperty(s)}this.oDraftCardParams[c][s]=S.value?S:this.oDraftCardParams[c][s]},getLabelForField:function(e,t,a,r){if(e&&t){var i=r==="Parameter"?this.byId("hiddenDDR"):this.byId("hiddenFilterDDR");var n=i.getIdForLabel()||"";n=n.substring(0,n.lastIndexOf("-"));if(n){var o=sap.ui.getCore().byId(n);return o&&o.getValue()}else if(i&&i.getProperty("value")){return i.getProperty("value")}else if(a&&typeof a.getTokens==="function"){var s=a.getTokens()||[],l=s.map(function(e){return e.getText()});return{type:"filters",value:l}}}},_handleFilterSelectionChange:function(e){var t=e.getParameters();var a=e.getSource().getBinding("value").getPath();var o=this._oParentViewModel.getProperty("/oCard");var s=o.descriptorContent["sap.app"].id;var l=e.getSource();var d=new i;var u="",g={value:"",label:"",description:""};if(t.selectedItem){l.setValueState("None");var c=e.getParameter("selectedItem");if(c){u=c.getText()?c.getText():c.getKey();l.removeAllAggregation("_initialTokens");l.addAggregation("_initialTokens",new n({key:c.getKey(),text:u}));d.addSelectOption(a,"I","EQ",c.getKey(),null,u);g.value=d.toJSONString()}else{g.value=r.getEmptySVStringforProperty(a)}}else{var p=e.getSource().getInnerControls()[0].getSelectedItems();if(p.length){l.setValueState("None");l.removeAllAggregation("_initialTokens");p.forEach(function(e){u=e.getText()?e.getText():e.getKey();l.addAggregation("_initialTokens",new n({key:e.getKey(),text:u}));d.addSelectOption(a,"I","EQ",e.getKey(),null,u)});g.value=d.toJSONString()}else{g.value=r.getEmptySVStringforProperty(a)}}this.oDraftCardParams[s][a]=g},_handleParameterSelectionChange:function(e){var t=e.getParameter("selectedItem");var a=e.getSource(),r="";var i={value:"",label:"",description:""};if(t){a.setValueState("None");r=t.getText()?t.getText():t.getKey();i.value=t.getKey();i.label=r}a.removeAllAggregation("_initialTokens");a.addAggregation("_initialTokens",new n({key:i.value,text:i.label}));var o=e.getSource().getBinding("value").getPath();var s=this._oParentViewModel.getProperty("/oCard").descriptorContent["sap.app"].id;this.oDraftCardParams[s][o]=i},_handleParameterTokenUpdate:function(e,t,r){var i=e?e:r.getSource();if(i.getMandatory()){i.checkClientError()}var n=i.getBinding("value").sPath;var o=i.getTokens();var s=this._oParentViewModel.getProperty("/oCard").descriptorContent["sap.app"].id;var l={value:"",label:"",description:""};var d=i.getModel();var u=a.isDate(d,i.getEntitySet(),n);var p,f;if(t&&(!o.length||e)){f=this.byId("hiddenDDR");f.attachChange(this._onSemanticParameterDateChange.bind(this,n,i));f.openBy(i.getDomRef())}if(o.length){l.label=o[0].getText()?o[0].getText():o[0].getKey();if(t&&!f){f=this.byId("hiddenDDR")}if(f&&f._parseValue){p=f._parseValue(o[0].getKey());if(p){f.setValue(p);l.value=c.getDateRangeValue(p,true);l.description=JSON.stringify(p);var m=this.getLabelForField(n,p,e,"Parameter");var v="";var y=p.operator==="DATE";if(m&&typeof m==="string"){v=m.substring(0,m.indexOf("(")-1);if(!v&&y){v=m}}l.label=v?v:p.operator}else{l.value=o[0].getKey();if(Date.parse(l.value)){l.value=h.getInstance(l.value)}l.description=f.getValue()?JSON.stringify(f.getValue()):"";var S=this._oParentViewModel.getProperty("/oCard").descriptorContent["sap.card"].configuration.parameters;if(!f.getValue()&&S[n]&&S[n].description){var C;l.description=S[n].description;C=JSON.parse(l.description);if(g.DATE_OPTIONS.DATE_LIST.includes(C.operator)){C.values[0]=h.getInstance(C.values[0]);l.value=typeof o[0].getKey()==="string"?h.getInstance(o[0].getKey()):o[0].getKey()}f.setValue(C)}else{f.setValue(f.getValue())}}}else{p=i._parseValue&&i._parseValue(o[0].getKey());if(u&&p){p=i.getModel().formatValue(p,i.getDataType());l.value=p}else if(p){l.value=p}else{p=o[0].getKey();l.value=p}}}this.oDraftCardParams[s][n]=l},_mergeDraftParamsIncard:function(e){var t=e.descriptorContent["sap.card"].configuration.parameters;var a=e.descriptorContent["sap.app"].id;var r=this.oDraftCardParams[a];Object.keys(r).forEach(function(e){if(r[e]){if(t[e]){if(t[e].type==="datetime"&&typeof t[e].value==="string"&&t[e].value.includes("operation")){var a=JSON.parse(t[e].value);a.operation=r[e];t[e].value=JSON.stringify(a)}else{t[e].value=r[e].value?r[e].value:r[e];if(r[e].label){t[e].label=r[e].label}t[e].description=r[e].description}}else if(e.indexOf("P_")===0&&t[e.replace("P_","")]){r[e.replace("P_","")]=r[e].replace("P_","");t[e.replace("P_","")].value=r[e].replace("P_","");delete r[e]}}});c.processPrivateParams(e,r);Object.keys(t).forEach(function(e){var a=t[e].value;if(t[e].type==="datetime"&&typeof a==="string"&&a.includes("datetime")){a=a.split("datetime");a=a[a.length-1];a=a.replace(/["']/g,"");t[e].value=a}});return e},_checkClientError:function(e){var t=e.getSingleTokenMode()?!e.getInnerControls()[0].getSelectedKey():!e.getInnerControls()[0].getSelectedKeys().length,a=e.getMandatory()&&t;e.setValueState(a?"Error":"None");return a},_attachInitialiseToGroupElement:function(e){if(e.getFields()&&e.getFields().length){e.getFields()[0].attachInitialise(function(){if(e.getFields().length&&e.getLabelControl()&&!e.getLabelControl().getText()){var t=e.getFields()[0].getBindingPath("value");if(t&&e.getFields()[0].getVisible()){e.getFields()[0].setTextLabel(t)}}})}},_onSemanticParameterDateChange:function(e,t,a){var r=a.getParameter("value");var i=this._oParentViewModel.getProperty("/oCard");var o=i.descriptorContent["sap.app"].id;var s=this.getLabelForField(e,r,t,"Parameter");var l="";var d=r.operator==="DATE";if(s&&typeof s==="string"){l=s.substring(0,s.indexOf("(")-1);if(!l&&d){l=s}}if(!this.oDraftCardParams[o][e]){this.oDraftCardParams[o][e]={}}this.oDraftCardParams[o][e].value=d?r.values[0]:r.operator;this.oDraftCardParams[o][e].label=d?r.values[0]:r.operator;this.oDraftCardParams[o][e].description=JSON.stringify(r);t.getInnerControls()[0].setTokens([]);if(l){this.oDraftCardParams[o][e].label=l}var u=new n({key:this.oDraftCardParams[o][e].value,text:this.oDraftCardParams[o][e].label});t.getInnerControls()[0].setTokens([u]);var g=a.getParameter("valid");t.setValueState(g?"None":"Error")},_onSemanticFilterDateChange:function(e,t,a){if(this.bValueApplied){var n=a.getParameter("value");var o=this.getLabelForField(e,n,t,"Filter");var s=f(n);var l=c.getDateRangeValue(s,false,o);var d=this._oParentViewModel.getProperty("/oCard");var u=d.descriptorContent["sap.app"].id;var g=new i;if(!l.High){l.High=""}if(!this.oDraftCardParams[u][e]){this.oDraftCardParams[u][e]={}}g.addSelectOption(e,"I",l.Option,l.Low,l.High,l.Text);this.oDraftCardParams[u][e].value=g.toJSONString();this.oDraftCardParams[u][e].description=JSON.stringify(s);t.getInnerControls()[0].setTokens([]);var p=r.getTokenFromSelectOptions(g.getSelectOption(e),e);t.getInnerControls()[0].setTokens(p);var h=a.getParameter("valid");t.setValueState(h?"None":"Error");this.bValueApplied=false}},_getOptionsForDynamicDate:function(e,t){var a;if(e[t]["sap:filter-restriction"]==="single-value"){a=g.DATE_OPTIONS.SINGLE_OPTIONS}else if(e[t]["sap:filter-restriction"]==="interval"){a=g.DATE_OPTIONS.RANGE_OPTIONS;a=a.concat(g.DATE_OPTIONS.SINGLE_OPTIONS)}if(e&&e[t].exclude){a=a.filter(function(a){return!e[t].selectedValues.includes(a)})}return a}})});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 * This extension is for OVP Analytical cards delivered in 2208.
 */
sap.ui.predefine("sap/insights/base/InMemoryCachingHost", ["sap/ui/integration/Host"],function(t){"use strict";var e={};var n={};return t.extend("sap.insights.InMemoryCachingHost",{clearCache:function(t){if(t){e[t]=n[t]={}}else{e=n={}}},_fetchData:function(n,r,i,a){return t.prototype.fetch.call(this,n,r,i).then(function(t){e[a][n]=t;return e[a][n]}).catch(function(t){var r={error:t.toString()};var i=new Response(JSON.stringify(r),{headers:{"Content-Type":"application/json"}});e[a][n]=i;return e[a][n]})},_isCSRFFetchCall:function(t){return t.method==="HEAD"},fetch:function(r,i,a,s){var c=s.getManifestEntry("sap.app").id;e[c]=e[c]?e[c]:{};n[c]=n[c]?n[c]:{};if(this._isCSRFFetchCall(a)){return t.prototype.fetch.call(this,r,i,a)}else if(!e[c][r]&&!n[c][r]){n[c][r]=this._fetchData(r,i,a,c);return n[c][r]}else if(!e[c][r]&&n[c][r]){return n[c][r]}else{return new Promise(function(t){t(e[c][r])})}}})});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/configure/ColumnList.controller", ["sap/ui/model/json/JSONModel","sap/ui/model/resource/ResourceModel","../base/Base.controller","../CardHelper","sap/m/MessageToast","sap/base/Log","sap/ui/Device","../utils/AppConstants","../utils/DeviceType","../utils/Transformations","sap/ui/model/Filter","sap/ui/model/FilterOperator","../base/InMemoryCachingHost","../utils/CardPreviewManager"],function(e,t,i,o,r,s,n,a,l,g,d,u,C,h){"use strict";var f=s.getLogger("sap.insights.configure.ColumnList");return i.extend("sap.insights.configure.ColumnList",{onInit:function(){this._oConfigureViewModel=new e({oOrgCard:{},oConfCard:{},aCards:[],bDialogOpen:false,visibleColumnCount:0});this.getView().setModel(this._oConfigureViewModel,"configureView");var i=sap.ui.getCore().getLibraryResourceBundle("sap.insights");this.getView().setModel(new t({bundle:i}),"i18n");this.i18Bundle=this.getView().getModel("i18n").getResourceBundle();n.resize.attachHandler(this._adjustLayoutStyles.bind(this));this._adjustLayoutStyles();if(this._oConfigureViewModel.getProperty("/bDesktop")===true){this._oConfigureViewModel.setProperty("/bShowCardPreview",true)}var o=this.getView().byId("navCon");var r=this._getHoCView();r.then(function(e){o.addPage(e)});var s=this.createId("transactionalCardHost");this.host=new C(s,{action:function(e){var t=e.getParameter("card")||{};if(this.getView().getModel("configureView")){this.getView().getModel("configureView").setProperty("/oConfCard",t.getManifest())}}.bind(this)})},_getHoCView:function(){return o.getServiceAsync("UIService").then(function(e){return e._getXMLView("sap.insights.houseOfCards.HouseOfCardsDialog","hocViewPage")})},_getConfigureCardPage:function(){return this.getView().byId("insightCardColumnPage")},showColumnListDialog:function(e){try{this.orgCard=e;this._oConfigureViewModel.setProperty("/bTransform",true);this.initConfigureCard(e,false);this._getColumnListDialog().open();this._oConfigureViewModel.setProperty("/bDialogOpen",true)}catch(e){throw new Error(e)}},save:function(){var e=this._oConfigureViewModel.getProperty("/oConfCard");if(e["sap.card"].header.title){e["sap.insights"].visible=true;this._getColumnListDialog().setBusy(true);var t=h.insertActionsManifest(e,this._oConfigureViewModel.getProperty("/oOrgCard"));o.getServiceAsync().then(function(e){e.createCard(t).then(function(e){r.show(this.i18Bundle.getText("Card_Created"));this._getColumnListDialog().setBusy(false);this._getColumnListDialog().close();this.closeDialog()}.bind(this)).catch(function(e){r.show(e.message);this._getColumnListDialog().setBusy(false);this.closeDialog()}.bind(this))}.bind(this))}else{var i=this.getView().byId("titleTextInput");i.focus()}},_getColumnListDialog:function(){return this.getView().byId("insightsColumnListDialog")},_callPreview:function(e){var t,i;i=this._oConfigureViewModel.getProperty("/bDesktop");if(this.getView().byId("navCon")&&this.getView().byId("navCon").getCurrentPage().sId===this.getView().byId("insightCardColumnPage").sId){this._oConfigureViewModel.setProperty("/bShowPreview",true);t=i?"previewCard":"previewColCardSD"}else if(this.getView().byId("navCon")&&this.getView().byId("navCon").getCurrentPage().sId===this.getView().byId("insightCardPreviewPage").sId){this._oConfigureViewModel.setProperty("/bShowCardPreview",true);t=i?"previewCardLS":"previewCardSD"}else if(this.getView().byId("navCon")&&this.getView().byId("navCon").getCurrentPage().sId===this.getView().byId("insightsHoCView").sId){this._oConfigureViewModel.setProperty("/bShowHoCPage",true)}if(this.getView().byId(t)){this.getView().byId(t).refresh()}},_callPreviewPage:function(e){this._oConfigureViewModel.setProperty("/bShowPreview",false);this._oConfigureViewModel.setProperty("/bPreview",true);this._oConfigureViewModel.setProperty("/bShowCardPreview",false);if(this.getView().byId("navCon")){var t=this.getView().byId("insightCardPreviewPage");var i=this._oConfigureViewModel.getProperty("/bDesktop");var o=i?"previewCardLS":"previewCardSD";if(this.getView().byId(o)){this.getView().byId(o).refresh()}var r=this.getView().byId("titleTextInput");if(e){if(e["sap.card"].header.title&&e["sap.card"].header.title.trim()){this.getView().byId("nextButton").setEnabled(true);r.setValueState("None");r.setValueStateText("")}else{this.getView().byId("nextButton").setEnabled(false);r.setValueState("Error");r.setValueStateText(this.i18Bundle.getText("INT_Preview_Title_ValueStateText"))}}this.getView().byId("navCon").to(t)}},_callShowPreview:function(e){this._oConfigureViewModel.setProperty("/bShowPreview",true);this._oConfigureViewModel.setProperty("/bRefresh",false);var t=this._oConfigureViewModel.getProperty("/bDesktop");var i=t?"previewCard":"previewColCardSD";if(this.getView().byId(i)){this.getView().byId(i).refresh()}},_callClosePreview:function(e){if(this.getView().byId("navCon")&&this.getView().byId("navCon").getCurrentPage().sId===this.getView().byId("insightCardColumnPage").sId){this._oConfigureViewModel.setProperty("/bShowPreview",false)}else if(this.getView().byId("navCon")&&this.getView().byId("navCon").getCurrentPage().sId===this.getView().byId("insightCardPreviewPage").sId){this._oConfigureViewModel.setProperty("/bShowCardPreview",false)}},closeDialog:function(){this._getColumnListDialog().close()},afterCloseDialog:function(){o.getServiceAsync("UIService").then(function(e){return e._setPreviewModelProperty("/bConfigureOpen",false).then(function(){this._oConfigureViewModel.setProperty("/bShowPreview",false);this._oConfigureViewModel.setProperty("/bPreview",false);this._oConfigureViewModel.setProperty("/bDialogOpen",false);this._oConfigureViewModel.setProperty("/bShowHoCPage",false);this._oConfigureViewModel.setProperty("/columnPage",false);this._oConfigureViewModel.setProperty("/oConfCard",{});this._oConfigureViewModel.setProperty("/oOrgCard",{});if(this.getView().byId("columnSearch")){this.getView().byId("columnSearch").setValue("");this.onColumnSearch()}}.bind(this)).then(function(){return e._setHoCModelProperty("/oSelected",{})})}.bind(this))},_adjustLayoutStyles:function(){var e=l.getDialogBasedDevice();if(e===a.DEVICE_TYPES.Desktop){this._oConfigureViewModel.setProperty("/bDesktop",true)}else{this._oConfigureViewModel.setProperty("/bDesktop",false)}},handleTitleChange:function(e){var t=e.getSource();var i=t.getValue().trim();var o;if(this._oConfigureViewModel.getProperty("/bDesktop")){o=this.getView().byId("previewCardLS")}else{o=this.getView().byId("previewCardSD")}if(i){this.getView().byId("nextButton").setEnabled(true);t.setValueState("None");t.setValueStateText("");if(o.getCardHeader()){o.getCardHeader().setTitle(i)}}else{t.setValueState("Error");t.setValueStateText(this.i18Bundle.getText("INT_Preview_Title_ValueStateText"));this.getView().byId("nextButton").setEnabled(false)}o.refresh()},handleSubTitleChange:function(e){var t=e.getSource();var i=t.getValue();var o;if(this._oConfigureViewModel.getProperty("/bDesktop")){o=this.getView().byId("previewCardLS")}else{o=this.getView().byId("previewCardSD")}if(o.getCardHeader()){o.getCardHeader().setSubtitle(i)}o.refresh()},initConfigureCard:function(e,t){var i=e,o;var r=sap.ui.getCore().byId("myhomeSettingsView--INSIGHTS_CARDS");this._oConfigureViewModel.setProperty("/oOrgCard",i);o=JSON.parse(JSON.stringify(i));o=h.getCardPreviewManifest(o);this._oConfigureViewModel.setProperty("/oConfCard",o);var s=this._oConfigureViewModel.createBindingContext("/oConfCard");this.getView().byId("insightCardColumnPage").setBindingContext(s,"configureCardView");this._oConfigureViewModel.setProperty("/visibleColumnCount",0);this._oConfigureViewModel.setProperty("/bMainIndicator",false);this._oConfigureViewModel.setProperty("/bShowMainIndicator",false);this._oConfigureViewModel.setProperty("/bRefresh",true);if(o){var n=o["sap.card"];if(n.type==="Table"){var a=this._oConfigureViewModel.getProperty("/bDesktop");var l=a?this.getView().byId("columnSegButton"):this.getView().byId("sdColumnSegButton");l.setSelectedKey("list");this.setColumnAndKPIValue(o,r)}else if(n.type==="Analytical"){this._oConfigureViewModel.setProperty("/bShowHoCPage",true);this._callPreviewPage(o)}}},onColumnSearch:function(e){var t="";if(e){t=e.getSource().getValue()}var i=new d("title",u.Contains,t);var o=[];o.push(i);var r=this.byId("insightsCardsEditColumnsListTable");var s=r.getBinding("items");s.filter(o,"Test")},onSegmentedSelectionChange:function(e){var t=this._oConfigureViewModel.getProperty("/bDesktop");var i=t?this.byId("columnSegButton"):this.byId("sdColumnSegButton"),o=i.getSelectedKey();if(o==="table"){var r=g.createListOptions(this._oConfigureViewModel.getProperty("/oConfCard"));var s=r.filter(function(e){if(e){return e["sap.card"].type==="Table"}});if(s.length){this._oConfigureViewModel.setProperty("/oConfCard",s[0]);var n=s[0]["sap.card"].content.row.columns;this._oConfigureViewModel.setProperty("/cardColumn",n)}}else if(o==="list"){var a=g.createTableOptions(this._oConfigureViewModel.getProperty("/oConfCard"));var l=a.filter(function(e){if(e){return e["sap.card"].type==="List"}});if(l.length){this._oConfigureViewModel.setProperty("/oConfCard",l[0]);var d=l[0]["sap.card"].content.item.attributes;this._oConfigureViewModel.setProperty("/cardColumn",d)}}},setColumnAndKPIValue:function(e){var t=e["sap.card"];if(t.type==="Table"){var i;i=t.content.row.columns;this._oConfigureViewModel.setProperty("/cardColumn",i);var o=i.map(function(e){e["visible"]=e["visible"]?e["visible"]:false;return e}).filter(function(e){return e.visible});this._oConfigureViewModel.setProperty("/visibleColumnCount",o.length);var r=g.createTableOptions(this._oConfigureViewModel.getProperty("/oConfCard"));var s=r.filter(function(e){return e["sap.card"].type==="List"});if(s.length){this._oConfigureViewModel.setProperty("/oConfCard",s[0]);var n=s[0]["sap.card"].content.item.attributes;this._oConfigureViewModel.setProperty("/cardColumn",n)}}this._callPreviewPage(e)},_onColumnDrop:function(e){var t=e.getParameter("dropPosition"),i=e.getParameter("draggedControl"),o=i.getBindingContextPath().split("/"),r=Number(o[2]),s=e.getParameter("droppedControl"),n=s.getBindingContextPath().split("/"),a=Number(n[2]),l=this._oConfigureViewModel.getProperty("/cardColumn");if(t==="Before"&&r===a-1){a--}else if(t==="After"&&r===a+1){a++}if(r!==a){if(t==="Before"&&r<a){a--}else if(t==="After"&&r>a){a++}var g=l.splice(r,1)[0];l.splice(a,0,g);this._oConfigureViewModel.setProperty("/cardColumn",l);if(this._oConfigureViewModel.getProperty("/bDesktop")===true){this._callShowPreview(this._oConfigureViewModel.getProperty("/oConfCard"))}}},_callNextPage:function(e){try{var t=sap.ui.getCore().byId("hocViewPage");if(e){var i=e["sap.card"];if(i.type==="Table"||i.type==="List"){var o=this._oConfigureViewModel.getProperty("/bDesktop");var s=o?this.getView().byId("columnSegButton"):this.getView().byId("sdColumnSegButton");if(!s.getSelectedKey()){s.setSelectedKey("list")}if(!this._oConfigureViewModel.getProperty("/columnPage")){this.getView().byId("columnSearch").setValue("");this.onColumnSearch()}this._oConfigureViewModel.setProperty("/oConfCard",e);var n=this.getView().byId("insightCardColumnPage");if(this._oConfigureViewModel.getProperty("/bDesktop")){this.getView().byId("previewCard").refresh()}else{this.getView().byId("previewColCardSD").refresh()}this._oConfigureViewModel.setProperty("/columnPage",true);this.getView().byId("navCon").to(n)}else if(i.type==="Analytical"){if(t){t.getController().showHouseOfCardsDialog(e);if(!this._oConfigureViewModel.getProperty("/bShowHoCPage")){sap.ui.getCore().byId("chartTypeSearch").setValue("");t.getController().onChartTypeSearch()}this.getView().byId("navCon").to(t)}else{this._getHoCView().then(function(t){t.getController().showHouseOfCardsDialog(e);this.getView().byId("navCon").to(t)}.bind(this))}}else{this._callPreview(e)}}this._oConfigureViewModel.setProperty("/bPreview",false)}catch(e){f.error(e.message);r.show(e.message);throw new Error(e)}},_formatTitle:function(e){var t=e.replace("{","").replace("}","");return t},handleKPIVisibilityToggle:function(e,t){var i=e.getSource();var o=i.getSelected();var r=this._oConfigureViewModel.getProperty("/oConfCard");var s=r["sap.card"];var n=s.header.type;if(o&&n!=="Numeric"){s.header.type="Numeric"}else{s.header.type="Default"}this._oConfigureViewModel.setProperty("/bShowMainIndicator",o)},handleColumnVisibilityToggle:function(e){var t=e.getSource();var i=t.getBindingContext("configureView").getPath();var o=this._oConfigureViewModel.getProperty(i);var r=t.getSelected();o["visible"]=r;var s=this._oConfigureViewModel.getProperty("/visibleColumnCount");this._oConfigureViewModel.setProperty("/visibleColumnCount",r?s+1:s-1);this._oConfigureViewModel.setProperty("/bRefresh",true);if(this._oConfigureViewModel.getProperty("/bDesktop")===true){this._callShowPreview(this._oConfigureViewModel.getProperty("/oConfCard"))}},navigateToCopy:function(e){var t=JSON.parse(JSON.stringify(this._oConfigureViewModel.getProperty("/oOrginalManifest")));t.descriptorContent=JSON.parse(JSON.stringify(e));var i=this.oSelectionController.byId("insightsCopyCardView");this.oNavCon.to(i);i.getController().initCopyCard(t)},onNavBack:function(){var e=this.getView().byId("insightCardPreviewPage").sId;var t=this.getView().byId("navCon").getCurrentPage().getModel("configureView");if(e===this.getView().byId("navCon").getPreviousPage().sId){if(t&&t.getProperty("/oConfCard")){this._callPreviewPage(t.getProperty("/oConfCard"))}else{this._callPreviewPage()}}}})});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/copy/Copy.controller", ["sap/ui/model/json/JSONModel","sap/ui/model/resource/ResourceModel","../base/Base.controller","../CardHelper","sap/m/MessageToast","sap/base/Log","../utils/CardPreviewManager"],function(e,t,r,i,o,a,s){"use strict";var d=a.getLogger("sap.insights.CardHelper");return r.extend("sap.insights.copy.Copy",{onInit:function(){this._oCopyCardViewModel=new e({oOrgCard:{},oCard:{},aCards:[]});this.getView().setModel(this._oCopyCardViewModel,"copyCardView");var r=sap.ui.getCore().getLibraryResourceBundle("sap.insights");this.getView().setModel(new t({bundle:r}),"i18n");this.i18Bundle=this.getView().getModel("i18n").getResourceBundle();this.smartFormEditable=true},_getCopyCardPage:function(){return this.getView().byId("copyCardPage")},initCopyCard:function(e){var t=e.descriptorContent["sap.app"].id;if(this.oDraftCardParams){this.oDraftCardParams[t]={}}i.getServiceAsync().then(function(e){return e.getUserCards().then(function(e){this._oCopyCardViewModel.setProperty("/aCards",e)}.bind(this))}.bind(this));var r=e;this._oCopyCardViewModel.setProperty("/oOrgCard",r);var o=JSON.parse(JSON.stringify(r));this._oCopyCardViewModel.setProperty("/oCard",o);var a=s.getCardPreviewManifest(e.descriptorContent);this._oCopyCardViewModel.setProperty("/previewDescriptor",a);var d=this._oCopyCardViewModel.createBindingContext("/oCard");this.byId("copyCardPreview").refresh();this.getView().byId("copyCardPage").setBindingContext(d,"copyCardView");this.getView().byId("CopyCardsEditTitleField").setValueState("None");this._setSmartFormForCopyCard(e)},handleCopyCardDialogCancel:function(){this.byId("CopyCardsEditTitleField").setValueState("None");this.isCopyCardDialogOpen=false;this._getCopyCardPage().close()},_setSmartFormForCopyCard:function(e){this.byId("copyCardSmartForm").removeAllItems();this._setSmartFormForCardEdit(e)},_handleCardPreviewPress:function(e){if(this._oCopyCardViewModel.getProperty("/oCard").descriptorContent["sap.card"].header.title){var t=this._mergeDraftParamsIncard(this._oCopyCardViewModel.getProperty("/oCard"));this._oCopyCardViewModel.setProperty("/oCard",t);var r=s.getCardPreviewManifest(t.descriptorContent);this._oCopyCardViewModel.setProperty("/previewDescriptor",r);this._oCopyCardViewModel.refresh();this.byId("copyCardPreview").refresh()}},handleCardsInputChange:function(e){var t=e.getSource(),r=t.getValue(),i=t.getId();if(i&&i.includes("CopyCardsEditTitleField")){if(!r){t.setValueState("Error")}else{t.setValueState("None")}this._oCopyCardViewModel.getProperty("/oCard").descriptorContent["sap.card"].header.title=r}else if(i&&i.includes("CopyCardsEditSubTitleField")){this._oCopyCardViewModel.getProperty("/oCard").descriptorContent["sap.card"].header.subTitle=r}},handleCardCopyPress:function(){var e=this.byId("copyCardSmartForm"),t=e&&e.getItems()[0];if(t&&!t.getSmartFields().some(function(e){return e.checkClientError({handleSuccess:true})})){if(this._oCopyCardViewModel.getProperty("/oCard").descriptorContent["sap.card"].header.title){this._getCopyCardPage().setBusy(true);var r=this._oCopyCardViewModel.getProperty("/oOrgCard");var a=r.descriptorContent["sap.app"].id;var s=this._oCopyCardViewModel.getProperty("/oCard");var n=a+"."+Date.now();var C=this._oCopyCardViewModel.getProperty("/aCards")||[];this.oDraftCardParams[n]={};s=this._mergeDraftParamsIncard(s);s.descriptorContent["sap.app"].id=n;var p=C.filter(function(e){return e.visibility});s.descriptorContent["sap.insights"].visible=p.length<10?true:false;s.visibility=p.length<10?true:false;s.descriptorContent["sap.insights"].parentAppId=r.descriptorContent["sap.insights"].parentAppId;s.descriptorContent["sap.insights"].isDtCardCopy=false;s.descriptorContent["sap.ui5"].componentName=n;var l=false;if(s.descriptorContent["sap.card"]&&s.descriptorContent["sap.card"].extension&&s.descriptorContent["sap.card"].extension==="module:sap/insights/OVPCardExtension"){l=true}i.getServiceAsync().then(function(e){e.createCard(s.descriptorContent,l).then(function(){var t=r.descriptorContent["sap.card"].header.title;var i=this.i18Bundle.getText("copyCardSuccessMsg",t);o.show(i);e.getUserCardModel();var a=this.getView().getParent().getPages()[0];this.getView().getParent().to(a)}.bind(this)).catch(function(e){o.show(e.message)}).finally(function(){this._getCopyCardPage().setBusy(false)}.bind(this))}.bind(this))}}else{d.error(this.i18Bundle.getText("cardCopyErrorMsg"))}},onNavBack:function(){this.getView().getParent().back()}})});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/houseOfCards/HouseOfCards.controller", ["sap/ui/core/mvc/Controller","sap/ui/integration/widgets/Card","sap/ui/integration/Host","../utils/Transformations","sap/ui/model/resource/ResourceModel","sap/ui/model/json/JSONModel","../CardHelper","../utils/CardPreviewManager","sap/ui/Device","../utils/AppConstants","../utils/DeviceType","sap/ui/model/Filter","sap/ui/model/FilterOperator","../base/InMemoryCachingHost"],function(e,t,o,r,i,a,s,n,d,c,h,l,g,f){"use strict";return e.extend("sap.insights.houseofcards.houseofcards",{onInit:function(){var e=this.createId("HouseOfCardsHost");this.I18_BUNDLE=sap.ui.getCore().getLibraryResourceBundle("sap.insights");this.getView().setModel(new i({bundle:this.I18_BUNDLE}),"i18n");this._oHocViewModel=new a({oCard:{},oSelected:{},bShowPreview:false,aCards:[],aPreviewCards:[],aAllowedChartTypes:[],sOriginalChartType:""});this.getView().setModel(this._oHocViewModel,"hocModel");d.resize.attachHandler(this._adjustLayoutStyles.bind(this));this._adjustLayoutStyles();this.host=new f(e,{action:function(e){var t=e.getParameter("card")||{};if(this.getView().getModel("configureView")){this.getView().getModel("configureView").setProperty("/oConfCard",t.getManifest())}}.bind(this)})},onChartTypePress:function(e){var t=e.getParameter("listItem");if(t.getBindingContext("hocModel")){var o=t.getBindingContext("hocModel").getPath();var r=this._oHocViewModel.getProperty(o);var i=this.byId("CardContainer");var a;var s=i.getItems();var n=this._oHocViewModel.getProperty("/selectedPath");s.forEach(function(e){if(e.getBindingContext("hocModel")){var t=e.getBindingContext("hocModel").getPath();if(t===n&&n!==o){a=e}}});if(a){a.removeStyleClass("sapThemeHighlight-asBorderColor")}this._oHocViewModel.setProperty("/oSelected",r);this._oHocViewModel.setProperty("/selectedPath",o);var d=o.split("/");var c=d[d.length-1];var h=this._oHocViewModel.getProperty("/aCards/"+c);if(this.getView().getModel("configureView")){this.getView().getModel("configureView").setProperty("/oConfCard",h);this.getView().byId("previewCardHoCSD").refresh()}var l=this.getView().byId("hocChartCombo");l.setSelectedKey(r["sap.card"].content.chartType)}},onChartTypeSearch:function(e){var t="";if(e){t=e.getSource().getValue()}var o=new l("sap.card/content/chartType",g.Contains,t);var r=[];r.push(o);var i=this.byId("insightsCardsTypeTable");var a=i.getBinding("items");a.filter(r,"Application")},_onCardLoadFailure:function(e,t){this.byId("CardContainer").removeItem(e.sId)},_onCardStateChanged:function(e){var t=e.getAggregation("_content")&&e.getAggregation("_content").getAggregation("_content");if(t&&t.attachRenderComplete){t.attachRenderComplete(function(t){var o=t.getSource()._errorType;if(o){this.byId("CardContainer").removeItem(e.sId)}}.bind(this))}var o=e.getManifest()["sap.card"].content.chartType;var r=this._oHocViewModel.getProperty("/sOriginalChartType");if(!n.hasVizData(e)&&o!==r){var i=this._oHocViewModel.getProperty("/aPreviewCards");var a=i.findIndex(function(e){return e["sap.card"].content.chartType===o});if(a>-1){this.byId("CardContainer").removeItem(a);i.splice(a,1);this._oHocViewModel.setProperty("/aPreviewCards",i)}}},createHouseOfCards:function(){var e=this._oHocViewModel.getProperty("/oCard");var t=e["sap.card"].content.chartType;this._oHocViewModel.setProperty("/sOriginalChartType",t);this._oHocViewModel.setProperty("/aCards",[]);this._oHocViewModel.setProperty("/aPreviewCards",[]);var o=this.byId("CardContainer");var i=JSON.parse(JSON.stringify(e));var a=i["sap.card"];var s=o.getMetadata().getDefaultAggregation();var d=[],c=[];var h;o.removeAllAggregation(s.name);if(a.type==="Analytical"){var l=e["sap.insights"].allowedChartTypes;var g=[];if(l){this._oHocViewModel.setProperty("/aAllowedChartTypes",l);g=l.map(function(e){return e.key});var f=g.filter(function(e){return!!e});if(f.length===0){g=l.map(function(e){return e.chart})}}d=r.transformAnalyticalManifest(i,g)}else if(a.type==="List"){d=r.createListOptions(i)}else if(a.type==="Table"){d=r.createTableOptions(i)}d=d.filter(function(e){return!!e});if(d.length===0){d.push(i)}else{var p=d.findIndex(function(e){return e["sap.card"].content.chartType===t});d.splice(p,1);d.unshift(i)}d.forEach(function(e){var t=JSON.parse(JSON.stringify(e));var o=n.getCardPreviewManifest(t);c.push(o)});this._oHocViewModel.setProperty("/aCards",d);this._oHocViewModel.setProperty("/aPreviewCards",c);if(!this._oHocViewModel.getProperty("/selectedPath")){this.byId("idHoCScrollContainer").scrollTo(0);var C=this.byId("chartTypeSearch");C.setValue("");this.onChartTypeSearch()}if(!this._oHocViewModel.getProperty("/oSelected")||Object.keys(this._oHocViewModel.getProperty("/oSelected")).length===0){this._oHocViewModel.setProperty("/oSelected",c[0]);if(this.getView().getModel("configureView")){this.getView().getModel("configureView").setProperty("/oConfCard",d[0])}this._oHocViewModel.setProperty("/selectedPath","/aPreviewCards/0")}else{h=this._oHocViewModel.getProperty("/oSelected");var y=this.getView().getModel("configureView").getProperty("/oConfCard");h["sap.card"].header.title=y["sap.card"].header.title;h["sap.card"].header.subTitle=y["sap.card"].header.subTitle;this.getView().byId("previewCardHoC").refresh()}h=this._oHocViewModel.getProperty("/oSelected");var u=this.getView().byId("hocChartCombo");u.setSelectedKey(h["sap.card"].content.chartType)},onCardRender:function(e){var t=e.getSource();t.attachManifestApplied(function(e){var t=e.getSource();var o=this.byId("CardContainer");var r=o.getItems();r.forEach(function(e){if(e.getBindingContext("hocModel")){var o=e.getBindingContext("hocModel").getPath();if(this._oHocViewModel.getProperty("/selectedPath")===o&&e.sId===t.sId){e.addStyleClass("sapThemeHighlight-asBorderColor");e.focus();this.byId("idHoCScrollContainer").scrollToElement(e)}}}.bind(this));if(t.getCardHeader()){var i=t.getCardHeader();i.addStyleClass("sapFCardHeaderToolbarFocused")}t.attachEvent("_error",this._onCardLoadFailure.bind(this,t));t.attachEvent("stateChanged",this._onCardStateChanged.bind(this,t))}.bind(this));var o=t.getDomRef();o.removeEventListener("click",this.onClickFunction.bind(this,t));o.addEventListener("click",this.onClickFunction.bind(this,t),{capture:true})},setBorderStyleSelectedCard:function(e){var t=this.byId("CardContainer");var o=t.getItems();var r;o.forEach(function(t){if(t.getBindingContext("hocModel")){var o=t.getBindingContext("hocModel").getPath();if(e&&!r&&o===e){r=t}}});if(r){setTimeout(function(){r.addStyleClass("sapThemeHighlight-asBorderColor")},0);r.focus()}},onClickFunction:function(e,t){var o=this.byId("CardContainer");var r;var i=o.getItems();var a=this._oHocViewModel.getProperty("/selectedPath");i.forEach(function(o){if(o.getBindingContext("hocModel")){var i=o.getBindingContext("hocModel").getPath();if(t&&!e&&i===t){e=o}if(i===a&&a!==t){r=o}}});if(o.getItems()[0].hasStyleClass("sapThemeHighlight-asBorderColor")){o.getItems()[0].removeStyleClass("sapThemeHighlight-asBorderColor")}else if(r){r.removeStyleClass("sapThemeHighlight-asBorderColor")}if(e){setTimeout(function(){e.addStyleClass("sapThemeHighlight-asBorderColor")},0);e.focus();this.byId("idHoCScrollContainer").scrollToElement(e);var s=e.getBindingContext("hocModel").getPath();this._oHocViewModel.setProperty("/selectedPath",s);var n=s.split("/");var d=n[n.length-1];var c=this._oHocViewModel.getProperty("/aCards/"+d);this._oHocViewModel.setProperty("/oSelected",e.getManifest());if(this.getView().getModel("configureView")){this.getView().getModel("configureView").setProperty("/oConfCard",c);this.getView().byId("previewCardHoC").refresh()}var h=this.getView().byId("hocChartCombo");h.setSelectedKey(e.getManifest()["sap.card"].content.chartType)}},saveCard:function(e){return new Promise(function(t){s.getServiceAsync("UIService").then(function(o){var r=e.getManifestRawJson();var i=this.byId("houseofcardseditordialog");if(i){i.close()}o.showCardPreview(r,false,true).then(function(){t()})}.bind(this))}.bind(this))},setChartDetail:function(e,t){var o=c.CHART_TYPE_DETAILS;if(t==="icon"){return o[e]?o[e].icon:o["default"].icon}if(t==="title"){return o[e]?o[e].title:e.replaceAll("_"," ")}},_adjustLayoutStyles:function(){var e=h.getDialogBasedDevice();if(e===c.DEVICE_TYPES.Desktop){this._oHocViewModel.setProperty("/bDesktop",true)}else{this._oHocViewModel.setProperty("/bDesktop",false)}},showHouseOfCardsDialog:function(e){this._oHocViewModel.setProperty("/oCard",e);if(this._oHocViewModel.getProperty("/bDesktop")){this._oHocViewModel.setProperty("/bShowPreview",true)}else{this._oHocViewModel.setProperty("/bShowPreview",false)}if(!Object.keys(this._oHocViewModel.getProperty("/oSelected")).length){this._oHocViewModel.setProperty("/selectedPath","");if(this.getView().byId("chartTypeSearch")){this.getView().byId("chartTypeSearch").setValue("");this.onChartTypeSearch()}this.createHouseOfCards()}else if(this._oHocViewModel.getProperty("/selectedPath")){this.setBorderStyleSelectedCard(this._oHocViewModel.getProperty("/selectedPath"))}},_callPreview:function(e){var t=this._oHocViewModel.getProperty("/bDesktop");var o=t?"previewCardHoC":"previewCardHoCSD";this._oHocViewModel.setProperty("/bShowPreview",true);if(this.getView().byId(o)){this.getView().byId(o).refresh()}},_callShowPreview:function(e){this._oHocViewModel.setProperty("/bShowPreview",true);var t=this._oHocViewModel.getProperty("/bDesktop");var o=t?"previewCardHoC":"previewCardHoCSD";if(this.getView().byId(o)){this.getView().byId(o).refresh()}},_callClosePreview:function(e){this._oHocViewModel.setProperty("/bShowPreview",false)},selectionChange:function(e){var t=e.getParameters();var o=t.selectedItem;var r=o&&o.getBindingContext("hocModel").getPath();this.onClickFunction(null,r)},closeDialog:function(){var e=this.byId("houseofcardseditordialog");s.getServiceAsync("UIService").then(function(t){var o=this._oHocViewModel.getProperty("/oCard");if(e){e.close()}t.showCardPreview(o,false,true)}.bind(this))},formatChartName:function(e){var t=this._oHocViewModel.getProperty("/aAllowedChartTypes");var o=t.find(function(t){return t.key===e});if(o){return o.text}return e}})});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/library", ["sap/ui/core/Core","sap/ui/core/library"],function(){"use strict";var e=sap.ui.getCore().initLibrary({name:"sap.insights",dependencies:["sap.ui.core"],types:[],interfaces:[],controls:[],elements:[],version:"1.115.0",extensions:{}});return e});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/preview/Preview.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/model/resource/ResourceModel","sap/m/MessageToast","../CardHelper","sap/base/util/UriParameters","../utils/CardPreviewManager","sap/ui/Device","../utils/DeviceType","../utils/AppConstants","sap/base/Log"],function(e,t,r,i,s,a,o,n,d,l,g){var u=g.getLogger("sap.insights.preview.Preview");return e.extend("sap.insights.preview.Preview",{onInit:function(){this._oPreviewModel=new t({descriptor:{},previewDescriptor:{},oConfCard:{},oOrgCard:{}});this.getView().setModel(this._oPreviewModel,"cardPreviewModel");this.I18_BUNDLE=sap.ui.getCore().getLibraryResourceBundle("sap.insights");this.getView().setModel(new r({bundle:this.I18_BUNDLE}),"i18n");n.resize.attachHandler(this._adjustLayoutStyles.bind(this));this._adjustLayoutStyles();if(this._oPreviewModel.getProperty("/bDesktop")===true){this._oPreviewModel.setProperty("/bShowCardPreview",true)}},save:function(){var e=this.getView().getModel("cardPreviewModel").getProperty("/oConfCard");if(e["sap.card"].header.title.trim()){e["sap.insights"].visible=true;this._getPreviewDialog().setBusy(true);var t=o.insertActionsManifest(e,this.getView().getModel("cardPreviewModel").getProperty("/oOrgCard"));s.getServiceAsync().then(function(e){e.createCard(t).then(function(e){i.show(this.I18_BUNDLE.getText("Card_Created"));this._getPreviewDialog().setBusy(false);this.cancel()}.bind(this)).catch(function(e){i.show(e.message);this._getPreviewDialog().setBusy(false)}.bind(this))}.bind(this))}else{var r=this.getView().byId("titleTextInput");r.focus()}},_adjustLayoutStyles:function(){var e=d.getDialogBasedDevice();if(e===l.DEVICE_TYPES.Desktop){this._oPreviewModel.setProperty("/bDesktop",true)}else{this._oPreviewModel.setProperty("/bDesktop",false)}},cancel:function(){this._oPreviewModel.setProperty("/bShowCardPreview",false);this._getPreviewDialog().close()},handleTitleChange:function(e){var t=e.getSource();var r=t.getValue().trim();var i;if(this._oPreviewModel.getProperty("/bDesktop")){i=this.getView().byId("defaultPreviewCardLS")}else{i=this.getView().byId("defaultPreviewCardSD")}if(r){t.setValueState("None");t.setValueStateText("");if(i.getCardHeader()){i.getCardHeader().setTitle(r)}this.getView().byId("addPreviewCard").setEnabled(true)}else{t.setValueState("Error");t.setValueStateText(this.I18_BUNDLE.getText("INT_Preview_Title_ValueStateText"));this.getView().byId("addPreviewCard").setEnabled(false)}i.refresh()},handleSubTitleChange:function(e){var t=e.getSource();var r=t.getValue();var i;if(this._oPreviewModel.getProperty("/bDesktop")){i=this.getView().byId("defaultPreviewCardLS")}else{i=this.getView().byId("defaultPreviewCardSD")}if(i.getCardHeader()){i.getCardHeader().setSubtitle(r)}i.refresh()},handleVisibilityChange:function(e){var t=this.getView().getModel("cardPreviewModel");var r=e.getParameter("state");var i=t.getProperty("/descriptor");i["sap.insights"].visible=r;t.setProperty("/descriptor",i)},showCardSelectionDialog:function(){this._getPreviewDialog().close();var e=this.getView().getModel("cardPreviewModel");var t=e.getProperty("/descriptor");s.getServiceAsync("UIService").then(function(e){e._showCardSelectionDialog(t)})},_getPreviewDialog:function(){return this.getView().byId("previewDialog")},_onCardManifestApplied:function(e){var t=e.getSource();t.attachEvent("_error",this._onCardLoadFailure.bind(this,t));t.attachEvent("stateChanged",this._onCardStateChanged.bind(this,t));t.attachEvent("_contentReady",this._onCardContentReady.bind(this,t))},_onCardLoadFailure:function(e,t){if(t&&t.getParameters()&&t.getParameters().message){}},_onCardStateChanged:function(e){var t=this.getView().getModel("cardPreviewModel");var r=e.getManifest();var i=r["sap.card"].header.title;if(e.isReady()&&!this.bCardError&&i&&i.trim()){t.setProperty("/bAddButton",true)}else{t.setProperty("/bAddButton",false)}},_onCardContentReady:function(e){var t=this.getView().getModel("cardPreviewModel");if(o.hasVizData(e)){t.setProperty("/bCardHasData",true)}else{t.setProperty("/bCardHasData",false)}},_callPreview:function(e){var t,r;r=this._oPreviewModel.getProperty("/bDesktop");this._oPreviewModel.setProperty("/bShowCardPreview",true);t=r?"defaultPreviewCardLS":"defaultPreviewCardSD";if(this.getView().byId(t)){this.getView().byId(t).refresh()}},_callClosePreview:function(e){this._oPreviewModel.setProperty("/bShowCardPreview",false)},showPreview:function(e,t,r){var i=this.getView().getModel("cardPreviewModel");return s.getServiceAsync().then(function(s){return s.getUserCards().then(function(s){var a=s.filter(function(e){return e.visibility});if(a.length>9){e["sap.insights"].visible=false}i.setProperty("/oOrgCard",e);var n=JSON.parse(JSON.stringify(e));i.setProperty("/descriptor",e);n=o.getCardPreviewManifest(e);i.setProperty("/oConfCard",n);if(!r){i.setProperty("/bAddButton",false)}this.bCardError=false;var d=this.getView().byId("titleTextInput");d.setValueState("None");var l=e["sap.card"];if((l.type==="Table"||l.type==="Analytical")&&t&&!i.getProperty("/bConfigureOpen")&&!r){i.setProperty("/bConfigureOpen",true);return this.showCardConfigureDialog(e)}else if(!t){this._formatTitle(d.getValue());this._getPreviewDialog().open();i.setProperty("/bConfigureOpen",false);return Promise.resolve()}}.bind(this))}.bind(this)).catch(function(e){if(i.getProperty("/bConfigureOpen")){i.setProperty("/bConfigureOpen",false)}u.error(e.message);return Promise.reject(e)})},_formatTitle:function(e){var t=this.getView().byId("titleTextInput");if(e&&e.trim()){t.setValueState("None");t.setValueStateText("");this.getView().byId("addPreviewCard").setEnabled(true)}else{t.setValueState("Error");t.setValueStateText(this.I18_BUNDLE.getText("INT_Preview_Title_ValueStateText"));this.getView().byId("addPreviewCard").setEnabled(false)}},showHouseOfCardsDialog:function(e){this.getView().setBusy(true);var t=this.getView().getModel("cardPreviewModel").getProperty("/descriptor");s.getServiceAsync("UIService").then(function(e){e.showHouseOfCardsDialog(t).then(function(){this.getView().setBusy(false);this._getPreviewDialog().close()}.bind(this))}.bind(this)).catch(function(e){i.show(e.message)})},showCardConfigureDialog:function(e){return s.getServiceAsync("UIService").then(function(t){return t._showCardConfigureDialog(e).then(function(){this.getView().setBusy(false);return Promise.resolve()}.bind(this))}.bind(this)).catch(function(e){i.show(e.message);u.error(e.message);return Promise.reject(e)})},isConfigureEnabled:function(){var e=a.fromQuery(window.location.search).get("configure-cards")||"";return e.toUpperCase()==="TRUE"?true:false}})});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/selection/Selection.controller", ["sap/ui/model/resource/ResourceModel","../CardHelper","sap/m/MessageBox","sap/m/MessageToast","../base/Base.controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/util/UriParameters","sap/m/FormattedText","sap/m/Link","sap/ui/core/Fragment","../utils/CardRanking","../utils/BatchHelper","../utils/CardPreviewManager","sap/ui/model/json/JSONModel","../base/InMemoryCachingHost"],function(e,t,i,r,n,s,a,o,d,l,g,c,h,p,u,v){return n.extend("sap.insights.selection.Selection",{onInit:function(){var t=sap.ui.getCore().getLibraryResourceBundle("sap.insights");this.getView().setModel(new e({bundle:t}),"i18n");this.i18Bundle=this.getView().getModel("i18n").getResourceBundle();this.oNavCon=this.getView().byId("selectionNavCon");this.oNavCon.setBusy(true);this.bHasRankingProperty=true;this.getView().setModel(new u({selectionDialogOpen:false}),"cardSelectionModel");this.initUserCards();var i=this.createId("ManageCardHost");this.host=new v(i);this.getView().addDependent(this.host)},showSelectionDialog:function(e){this.orgCard=e;this.getView().getModel("cardSelectionModel").setProperty("/selectionDialogOpen",true);this._getSelectionDialog().open()},_getSelectionDialog:function(){return this.getView().byId("insightsSelectionDialog")},_getSelectionFragment:function(){return this.getView().byId("flexContainerCardsContent")},_getCardListPage:function(){return this.getView().byId("insightCardPage")},_getPreviewPage:function(){return this.getView().byId("previewPage")},closeDialog:function(){t.getServiceAsync("UIService").then(function(e){this.oNavCon.to(this._getCardListPage());this.getView().getModel("cardSelectionModel").setProperty("/selectionDialogOpen",false);this._getSelectionDialog().close();e.showCardPreview(this.orgCard,true)}.bind(this))},isConfigureEnabled:function(){var e=o.fromQuery(window.location.search).get("configure-cards")||"";return e.toUpperCase()==="TRUE"?true:false},handleCardListItemPress:function(e,t){var i=this.getView().getModel("view");i.setProperty("/showConfigButton",false);if(e){this.currentCardPreviewPath=e.getSource().getBindingContextPath()}else if(t){this.currentCardPreviewPath=t.getBindingContextPath()}var r=i.getProperty(this.currentCardPreviewPath);var n=r.descriptorContent["sap.card"].header.title;i.setProperty("/selectedCardTitle",n);var s=i.getProperty(this.currentCardPreviewPath).descriptorContent["sap.card"];var a=s.header.mainIndicator;if((s.type==="Table"||a)&&this.isConfigureEnabled()){i.setProperty("/showConfigButton",true)}var o=this.getView().byId("previewPage");this.oNavCon.to(o);var d=i.createBindingContext(this.currentCardPreviewPath);var l=p.getCardPreviewManifest(r.descriptorContent);i.setProperty("/previewDescriptor",l);this.byId("insightsPreviewOverflowLayer").setBindingContext(d,"view");var g=this.byId("smartForm");g.removeAllItems();this._setSmartFormForCardEdit(i.getProperty(this.currentCardPreviewPath));this.oCardHelperServiceInstance.getParentAppDetails(i.getProperty(this.currentCardPreviewPath)).then(function(e){i.setProperty("/parentAppTitle",e.title);i.setProperty("/parentAppUrl",e.semanticURL);i.setProperty("/parentAppsectionVisible",this.getIsNavigationEnabled(e))}.bind(this))},setCopyVisible:function(){var e=this.getView().getModel("view");e.setProperty("/showCopyButton",false);e.setProperty("/showFilterBy",false);var t=e.getProperty("/previewDescriptor");if(t){var i=t["sap.app"].dataSources;var r=i.filterService;var n=r&&r.uri;var s=r&&r.settings;if(n&&s){e.setProperty("/showFilterBy",true)}if(e.getProperty("/showFilterBy")&&t["sap.insights"].isDtCardCopy){e.setProperty("/showCopyButton",true)}}},handleCardVisibilityToggle:function(e){this._getSelectionFragment().setBusy(true);var t=e.getSource();var i=t.getBindingContext("view").getPath();var n=this.getView().getModel("view").getProperty(i);var s=t.getSelected();n.visibility=s;n.descriptorContent["sap.insights"].visible=s;this.setSelectedCards();this.oCardHelperServiceInstance.updateCard(n.descriptorContent,true).then(function(){this._getSelectionFragment().setBusy(false)}.bind(this)).catch(function(e){n.visibility=!s;n.descriptorContent["sap.insights"].visible=!s;this.getView().getModel("view").refresh();this._getSelectionFragment().setBusy(false);r.show(e.message)}.bind(this))},setSelectedCards:function(){var e=this.byId("insightsCardsListTable");if(e){this.getView().getModel("view").setProperty("/visibleCardCount",this.getSelectedCards().length)}},onEditInsightCardsDrop:function(e){if(!this.bHasRankingProperty){r.show(this.i18Bundle.getText("cardDnDUnavailable"));return}var t=e.getParameter("draggedControl"),i=t.getParent().indexOfItem(t),n=e.getParameter("droppedControl"),s=t.getParent().indexOfItem(n);if(i!==s){var a=this._setCardsRanking(i,s);a=a.map(function(e){var t=e.descriptorContent["sap.app"].id;e.descriptorContent["sap.insights"].ranking=e.rank;e.descriptorContent=JSON.stringify(e.descriptorContent);return{id:t,descriptorContent:e.descriptorContent}});try{this._getSelectionFragment().setBusy(true);h.createMultipartRequest(a).then(function(){return this.initUserCards(true)}.bind(this)).finally(function(){this._getSelectionFragment().setBusy(false)}.bind(this))}catch(e){this._getSelectionFragment().setBusy(false)}}},handleCardDeleteConfirm:function(){i.show(this.i18Bundle.getText("deleteCardMsg"),{icon:i.Icon.WARNING,title:this.i18Bundle.getText("delete"),actions:[i.Action.DELETE,i.Action.CANCEL],emphasizedAction:i.Action.DELETE,onClose:function(e){if(e===i.Action.DELETE){this.handleCardDelete(this.currentCardPreviewPath)}}.bind(this)})},handleCardDelete:function(e){var t=this.getView().getModel("view");this._getPreviewPage().setBusy(true);var i=t.getProperty(e);var n=i.descriptorContent["sap.app"].id;var s=i.descriptorContent["sap.card"].header.title;this.oCardHelperServiceInstance.deleteCard(n).then(function(){this._getPreviewPage().setBusy(false);r.show(this.i18Bundle.getText("deleteCardSuccess",s));var e=t.getProperty("/cards").filter(function(e){return e.descriptorContent["sap.app"].id!==n});var i=e.filter(function(e){return e.visibility});t.setProperty("/cards",e);t.setProperty("/cardCount",e.length);t.setProperty("/visibleCardCount",i.length);this.setDTCards();this.oNavCon.back();this.setSelectedCards()}.bind(this)).catch(function(e){this._getPreviewPage().setBusy(false);r.show(e.message)}.bind(this))},getSelectedCards:function(){var e=this.getView().getModel("view").getProperty("/cards");e=e.filter(function(e){return e.visibility});return e},initUserCards:function(e){return t.getServiceAsync().then(function(t){this.oCardHelperServiceInstance=t;return this.oCardHelperServiceInstance.getUserCardModel(e).then(function(e){this.getView().setModel(e,"view");var t=this.getView().getModel("view").getProperty("/cards");var i=0;t.forEach(function(e){if(e.visibility){if(++i>10){e.visibility=false}}if(e.rank===0){e.rank=500}if(!e.descriptorContent["sap.insights"].ranking||e.descriptorContent["sap.insights"].ranking!==e.rank){this.bHasRankingProperty=false}}.bind(this));var r=this.getView().getModel("view");r.setProperty("/cards",t);r.setProperty("/bShowMainIndicator",false);r.setProperty("/bMainIndicator",false);this.oSmartFormMap={};this._createOdataModelsforDialog(t);this.setDTCards();var n=this.isDeleteAllCardsEnabled();r.setProperty("/deleteAllEnabled",n);this.oNavCon.setBusy(false);this.getView().getModel("cardSelectionModel").setProperty("/selectionDialogOpen",false);return Promise.resolve()}.bind(this))}.bind(this))},_setCardsRanking:function(e,t){var i=this.byId("insightsCardsListTable").getItems().map(function(e){return e.getBindingContext("view").getObject()});if(e<t){return c.reorder(i,e,t+1)}return c.reorder(i,e,t)},onNavBack:function(){this.oNavCon.back()},navigateToCopyCard:function(){var e=this.getView().byId("insightsCopyCardView");var t=this.getView().getModel("view").getProperty(this.currentCardPreviewPath);this.oNavCon.to(e);e.getController().initCopyCard(t)},navigateToConfigureCard:function(){var e=this.getView().byId("insightsConfigureCardView");var t=this.getView().getModel("view").getProperty(this.currentCardPreviewPath);e.getController().initConfigureCard(t,true)},onCardSearch:function(e){var t=e.getSource().getValue();var i=new s("descriptorContent/sap.card/header/title",a.Contains,t);var r=[];r.push(i);var n=this.byId("insightsCardsListTable");var o=n.getBinding("items");o.filter(r,"Application")},refreshCardList:function(){var e=this.isDeleteAllCardsEnabled(),t;if(e){t=this.i18Bundle.getText("deleteAllCardsMsg")}else{var r=this.getView().getModel("view").getProperty("/DTCards");var n="<p>"+this.i18Bundle.getText("refreshAllCards")+"</p>";n+="<ul>";r.forEach(function(e){n+='<li class="sapUiTinyMarginBottom">'+e.descriptorContent["sap.card"].header.title+"</li>"});n+="</ul>";t=new d({htmlText:n})}i.show(t,{icon:i.Icon.WARNING,title:this.i18Bundle.getText("refresh"),actions:[i.Action.OK,i.Action.CANCEL],emphasizedAction:i.Action.OK,onClose:function(t){if(t===i.Action.OK){this.oNavCon.setBusy(true);this.oCardHelperServiceInstance._refreshUserCards(e).then(function(){this.initUserCards()}.bind(this))}}.bind(this)})},isDeleteAllCardsEnabled:function(){var e=o.fromQuery(window.location.search).get("delete-all-cards")||"";return e.toUpperCase()==="TRUE"?true:false},navigateToParentApp:function(){var e=this.getView().getModel("view");var t=e.getProperty("/parentAppUrl");sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{shellHash:t}});this.oNavCon.back()}.bind(this))},showCardPreviewPopover:function(e){var t=this.getView().getModel("view");var i=e.getSource().getParent().getBindingContext("view").getPath();var r=t.getProperty(i);var n=e.getSource();var s=p.getCardPreviewManifest(r.descriptorContent);t.setProperty("/previewDescriptor",s);if(!this._oCardPreviewPopover){g.load({id:"cardPreviewPopover",name:"sap.insights.selection.cardPreviewPopover",controller:this}).then(function(e){this._oCardPreviewPopover=e;this.getView().addDependent(e);e.openBy(n)}.bind(this))}else{this._oCardPreviewPopover.openBy(n)}},navigateToCardPreview:function(e){var t=this.getView().getModel("view");var i=t.getProperty("/cards");var r=i.findIndex(function(t){return t.descriptorContent["sap.app"].id===e});if(r!==-1){var n=this.getView().byId("insightsCardsListTable").getItems();this.handleCardListItemPress(null,n[r])}},getIsNavigationEnabled:function(e){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){return t.isNavigationSupported([{target:{semanticObject:e.semanticObject,action:e.action}}])}).then(function(e){return e[0].supported||false})},setDTCards:function(){var e=this.getView().getModel("view");var t=e.getProperty("/cards");var i=t.filter(function(e){return e.descriptorContent["sap.insights"].isDtCardCopy});e.setProperty("/DTCards",i)}})});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/AppConstants", [],function(){"use strict";return{DATE_OPTIONS:{SINGLE_OPTIONS:["DATE","YESTERDAY","TOMORROW","TODAY","FIRSTDAYWEEK","LASTDAYWEEK","FIRSTDAYMONTH","LASTDAYMONTH","FIRSTDAYQUARTER","LASTDAYQUARTER","FIRSTDAYYEAR","LASTDAYYEAR"],RANGE_OPTIONS:["THISWEEK","LASTWEEK","NEXTWEEK","THISMONTH","LASTMONTH","NEXTMONTH","THISQUARTER","LASTQUARTER","NEXTQUARTER","QUARTER1","QUARTER2","QUARTER3","QUARTER4","THISYEAR","LASTYEAR","NEXTYEAR","YEARTODATE","DATETOYEAR","DATERANGE","DATETIMERANGE","FROM","FROMDATETIME","LASTDAYS","LASTMONTHS","LASTQUARTERS","LASTWEEKS","LASTYEARS","NEXTDAYS","NEXTMONTHS","NEXTQUARTERS","NEXTWEEKS","NEXTYEARS","SPECIFICMONTH","TO","TODATETIME","TODAYFROMTO"],DATE_LIST:["DATE","DATERANGE","DATETIME","DATETIMERANGE","FROM","TO","FROMDATETIME","TODATETIME","SPECIFICMONTH"],SPECIAL_RANGE:["LASTDAYS","LASTMONTHS","LASTQUARTERS","LASTWEEKS","LASTYEARS","NEXTDAYS","NEXTMONTHS","NEXTQUARTERS","NEXTWEEKS","NEXTYEARS","TODAYFROMTO"]},DEVICE_TYPES:{Desktop:"Desktop",Tablet:"Tablet",Mobile:"Mobile"},CHART_TYPE_DETAILS:{bar:{icon:"sap-icon://horizontal-bar-chart",title:"Bar Chart"},column:{icon:"sap-icon://vertical-bar-chart",title:"Column Chart"},dual_column:{icon:"sap-icon://vertical-bar-chart",title:"Dual Column Chart"},dual_bar:{icon:"sap-icon://horizontal-bar-chart",title:"Dual Bar Chart"},stacked_bar:{icon:"sap-icon://full-stacked-chart",title:"Stacked Bar Chart"},stacked_column:{icon:"sap-icon://vertical-stacked-chart",title:"Stacked Column Chart"},line:{icon:"sap-icon://line-chart",title:"Line Chart"},dual_line:{icon:"sap-icon://line-chart",title:"Dual Line Chart"},combination:{icon:"sap-icon://business-objects-experience",title:"Combination Chart"},bullet:{icon:"sap-icon://horizontal-bullet-chart",title:"Bullet Chart"},time_bullet:{icon:"sap-icon://horizontal-bullet-chart",title:"Time Bullet Chart"},bubble:{icon:"sap-icon://product",title:"Bubble Chart"},time_bubble:{icon:"sap-icon://product",title:"Time Bubble Chart"},pie:{icon:"sap-icon://pie-chart",title:"Pie Chart"},donut:{icon:"sap-icon://donut-chart",title:"Donut Chart"},timeseries_column:{icon:"sap-icon://vertical-bar-chart",title:"TimeSeries Column Chart"},timeseries_line:{icon:"sap-icon://line-chart",title:"TimeSeries Line Chart"},timeseries_scatter:{icon:"sap-icon://scatter-chart",title:"TimeSeries Scatter Chart"},timeseries_bubble:{icon:"sap-icon://product",title:"TimeSeries Bubble Chart"},timeseries_stacked_column:{icon:"sap-icon://vertical-stacked-chart",title:"TimeSeries Stacked Column Chart"},timeseries_100_stacked_column:{icon:"sap-icon://full-stacked-column-chart",title:"TimeSeries 100% Stacked Column Chart"},timeseries_bullet:{icon:"sap-icon://horizontal-bullet-chart",title:"TimeSeries Bullet Chart"},timeseries_waterfall:{icon:"sap-icon://vertical-waterfall-chart",title:"TimeSeries Waterfall Chart"},timeseries_stacked_combination:{icon:"sap-icon://business-objects-experience",title:"Timeseries Stacked Combination Chart"},scatter:{icon:"sap-icon://scatter-chart",title:"Scatter Plot"},vertical_bullet:{icon:"sap-icon://vertical-bullet-chart",title:"Vertical Bullet Chart"},dual_stacked_bar:{icon:"sap-icon://full-stacked-chart",title:"Dual Stacked Bar Chart"},"100_stacked_bar":{icon:"sap-icon://full-stacked-chart",title:"100% Stacked Bar Chart"},"100_dual_stacked_bar":{icon:"sap-icon://full-stacked-chart",title:"100% Dual Stacked Bar Chart"},dual_stacked_column:{icon:"sap-icon://vertical-stacked-chart",title:"Dual Stacked Column Chart"},"100_stacked_column":{icon:"sap-icon://full-stacked-column-chart",title:"100% Stacked Column Chart"},"100_dual_stacked_column":{icon:"sap-icon://vertical-stacked-chart",title:"100% Dual Stacked Column Chart"},stacked_combination:{icon:"sap-icon://business-objects-experience",title:"Stacked Combination Chart"},horizontal_stacked_combination:{icon:"sap-icon://business-objects-experience",title:"Horizontal Stacked Combination Chart"},dual_stacked_combination:{icon:"sap-icon://business-objects-experience",title:"Dual Stacked Combination Chart"},dual_horizontal_stacked_combination:{icon:"sap-icon://business-objects-experience",title:"Dual Horizontal Stacked Combination Chart"},heatmap:{icon:"sap-icon://heatmap-chart",title:"Heat Map"},waterfall:{icon:"sap-icon://vertical-waterfall-chart",title:"Waterfall Chart"},horizontal_waterfall:{icon:"sap-icon://horizontal-waterfall-chart",title:"Horizontal Waterfall Chart"},treemap:{icon:"sap-icon://product",title:"Tree Map"},area:{icon:"sap-icon://product",title:"Area Chart"},radar:{icon:"sap-icon://product",title:"Radar Chart"},dual_combination:{icon:"sap-icon://business-objects-experience",title:"Dual Combination Chart"},dual_horizontal_combination:{icon:"sap-icon://business-objects-experience",title:"Dual Horizontal Combination Chart"},default:{icon:"sap-icon://product"}},ODATA_VERSION_2:"2.0",ODATA_VERSION_4:"4.0"}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/BatchHelper", ["sap/ui/base/Object","sap/base/Log"],function(t,e){"use strict";var r=t.extend("ux.eng.s4producthomes1.utils.BatchHelper",{});var n="/sap/opu/odata4/ui2/insights_srv/srvd/ui2/";var s=n+"insights_cards_repo_srv/0001/";var i=sap.ui.getCore().getLibraryResourceBundle("sap.insights");var a=e.getLogger("sap.insights.CardHelper");var o;function h(t){this.url="INSIGHTS_CARDS('"+t.id+"')";this.mOptions={};this.batchRequests=[];this.payload=t;this.boundary="batch_id_"+Date.now()+"_01";this.mOptions.headers={};this.mOptions.method="PUT";this.mOptions.headers["content-type"]="multipart/mixed;boundary="+this.boundary;this.mOptions.headers["X-CSRF-Token"]=o;return this}function u(){return fetch(s,{method:"HEAD",headers:{"X-CSRF-Token":"Fetch"}}).then(function(t){var e=t.headers.get("X-CSRF-Token");if(t.ok&&e){return e}var r=i.getText("tokenFetchError");a.error(r);throw new Error(r)})}h.prototype.addRequest=function(t){this.batchRequests.push(t)};h.prototype._constructBody=function(){var t="--"+this.boundary;var e="\r\n";var r="Content-Type:application/http"+e+"Content-Transfer-Encoding:binary"+e;var n="changeset_001";var s="--"+n;var i="Content-Type: multipart/mixed; boundary="+n+e;var a=t+e+i;a+=e+s;for(var o=0;o<this.batchRequests.length;o++){var h=this.batchRequests[o];a+=e+r;a+="Content-ID: "+(o+1)+e+e;a+=h.mOptions.method+" "+h.url+" HTTP/1.1 "+e;a+="sap-context-accept: header"+e+"Content-Type:application/json"+e+e;a+=JSON.stringify(this.batchRequests[o].payload)+e+e;a+=s;if(o===this.batchRequests.length-1){a+="--"+e;a+=t+"--"}}return a};function p(t){var e=[];var r=[];var n=[];try{r=t.split("\r\n")}catch(t){throw new Error}r.forEach(function(t){if(t!==""){n.push(t)}});var s="";for(var i=1;i<n.length-1;i++){s=n[i].includes("Content-Type: ")?n[i].split("Content-Type: ")[1]:s;if(n[i+1].includes(n[0])){if(s==="application/json"){n[i]=JSON.parse(n[i]);e.push(n[i])}else{e.push(n[i])}}}return e}r.createMultipartRequest=function(t){return u().then(function(e){this.url="/sap/opu/odata4/ui2/insights_srv/srvd/ui2/insights_cards_repo_srv/001/$batch";this.batchRequests=[];var r;o=e;for(var n=0;n<t.length;n++){var s=t[n];var i=new h(s);if(!r){r=i}r.addRequest(i)}return this.fetchData(r)}.bind(this))};r.fetchData=function(t){t.mOptions.body=t._constructBody();t.mOptions.method="POST";return fetch(this.url,t.mOptions).then(function(t){if(t.ok===false){throw new Error}return t.text()}).then(function(t){return p(t)})};return r});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/CardPreviewManager", [],function(){function t(t){return t&&Array.isArray(t)&&t.length}function a(a){var e=JSON.parse(JSON.stringify(a));var n=e["sap.card"].type;if(t(e["sap.card"].header.actions)){e["sap.card"].header.actions=[];delete e["sap.card"].header.actions}if(n==="Analytical"&&t(e["sap.card"].content.actions)){e["sap.card"].content.actions=[];delete e["sap.card"].content.actions}else if(n==="List"&&t(e["sap.card"].content.item.actions)){e["sap.card"].content.item.actions=[];delete e["sap.card"].content.item.actions}else if(n==="Table"&&t(e["sap.card"].content.row.actions)){e["sap.card"].content.row.actions=[];delete e["sap.card"].content.row.actions}return e}function e(a,e){var n=JSON.parse(JSON.stringify(e)),c=JSON.parse(JSON.stringify(a));var r=c["sap.card"].type,i=n["sap.card"].type;if(t(n["sap.card"].header.actions)){c["sap.card"].header["actions"]=n["sap.card"].header.actions}if(r==="Analytical"&&t(n["sap.card"].content.actions)){c["sap.card"].content.actions=n["sap.card"].content.actions}else if(r===i){if(r==="List"&&t(n["sap.card"].content.item.actions)){c["sap.card"].content.item.actions=n["sap.card"].content.item.actions}else if(r==="Table"&&t(n["sap.card"].content.row.actions)){c["sap.card"].content.row.actions=n["sap.card"].content.row.actions}}else if(i==="List"&&t(n["sap.card"].content.item.actions)){c["sap.card"].content.row.actions=n["sap.card"].content.item.actions}else{c["sap.card"].content.item.actions=n["sap.card"].content.row.actions}return c}function n(t){if(t.getAggregation("_content")&&t.getAggregation("_content").getAggregation("_content")&&t.getAggregation("_content").getAggregation("_content")._getVizDataset){if(t.getAggregation("_content").getAggregation("_content")._errorType){return false}var a=t.getAggregation("_content").getAggregation("_content")._getVizDataset();var e=a&&a._FlatTableD&&a._FlatTableD._data&&Array.isArray(a._FlatTableD._data)&&a._FlatTableD._data.length;if(e){return true}}return false}return{getCardPreviewManifest:a,hasVizData:n,insertActionsManifest:e}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/CardRanking", ["./BatchHelper"],function(r){"use strict";function n(r,n){if(!r){r="!"}if(!n){n="~"}return String.fromCharCode(Math.floor((r.charCodeAt(0)+n.charCodeAt(0))/2))}function e(r,e){if(!r){r="!"}if(!e){e="~"}if(r>=e){throw new Error("Second Argument should be greater than the first one")}var t="";var a=r.length>e.length?r.length:e.length;for(var o=0;o<a;o++){t+=n(r[o],e[o])}if(t===r){return t+"0"}else if(t>=e){throw new Error("No Mid possible between "+r+" and "+e)}return t}function t(r){var n=r.length;var e=0;for(var t=0;t<n;t++){e+=r.charCodeAt(t)*Math.pow(10,n-t-1)}return e}function a(r,n){return Math.abs(t(r)-t(n))}function o(r,n,t){var i=[];var f=a(r[n-1].rank,r[n].rank);var u=a(r[t].rank,r[t+1].rank);var h,c,d;if(f>u){h=n-1;d=c=n}else{d=h=t;c=t+1}try{r[d].rank=e(r[h].rank,r[c].rank)}catch(n){i=i.concat(o(r,h,c));r[d].rank=e(r[h].rank,r[c].rank)}i.push(r[d]);return i}function i(r,n,t){var a=[],i=r[n],f=t-1,u=t,h=r[f],c=r[u],d=h?h.rank:undefined,k=c?c.rank:undefined;try{i.rank=e(d,k)}catch(n){a=a.concat(o(r,f,u));i.rank=e(d,k)}a.push(i);return a}return{reorder:i}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/DeviceType", ["sap/ui/base/Object","sap/ui/Device","./AppConstants"],function(e,i,t){"use strict";var s={phone:240,tablet:600,desktop:1024,xxsmall:240,xsmall:320,small:480,medium:560,large:768,xlarge:960,xxlarge:1120,xxxlarge:1440};var a=e.extend("sap.insights.utils.DeviceType",{});a.getDeviceType=function(){var e;if(i.resize.width>=s.xsmall&&i.resize.width<s.tablet){e=t.DEVICE_TYPES.Mobile}else if(i.resize.width>=s.tablet&&i.resize.width<s.desktop){e=t.DEVICE_TYPES.Tablet}else{e=t.DEVICE_TYPES.Desktop}return e};a.getDialogBasedDevice=function(){var e;if(i.resize.width<1024){e=t.DEVICE_TYPES.Mobile}else{e=t.DEVICE_TYPES.Desktop}return e};a.getDeviceWidth=function(){return i.resize.width};return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/MetadataAnalyser", [],function(){"use strict";return{getPropertyNamesOfEntitySet:function(t,e){if(!t||!t.getMetaModel){return[]}var a=t.getMetaModel();var r=a.getODataEntitySet(e);var n=[];if(r){var i=a.getODataEntityType(r.entityType);i.property.forEach(function(t){n.push(t.name)})}return n},getParameterisedEntitySetByEntitySet:function(t,e){if(!t||!t.getMetaModel){return}var a=t.getMetaModel();var r=a.getODataEntitySet(e);if(r){var n=a.getODataEntityType(r.entityType);var i=n.navigationProperty;if(!i){return}var o=i.filter(function(t){var e=a.getODataAssociationEnd(n,t.name);var r=a.getODataEntityType(e.type);return r["sap:semantics"]==="parameters"&&r.key});if(o&&o.length){return a.getODataAssociationSetEnd(n,o[0].name).entitySet}}return},getPropertyFilterRestrictionByEntitySet:function(t,e,a){if(!t||!t.getMetaModel){return false}var r=t.getMetaModel();var n=r.getODataEntitySet(e);if(n){var i=r.getODataEntityType(n.entityType);var o;o=i.property.find(function(t){return t.name===a});if(o&&o["sap:filter-restriction"]&&o["sap:filter-restriction"]==="single-value"){return true}}return false},isDate:function(t,e,a){if(!t||!t.getMetaModel){return false}var r=t.getMetaModel(),n=r.getODataEntitySet(e);if(!n){return false}var i=r.getODataEntityType(n.entityType),o=i.property.find(function(t){return t.name===a});return o&&o.type==="Edm.DateTime"},isValueListWithFixedValues:function(t,e,a){if(!t||!t.getMetaModel){return false}var r=t.getMetaModel(),n=r.getODataEntitySet(e),i,o;if(n){var u=r.getODataEntityType(n.entityType),y=u.property.find(function(t){return t.name===a}),f="com.sap.vocabularies.Common.v1.ValueList",s="com.sap.vocabularies.Common.v1.ValueListWithFixedValues",l=y&&y[f],p=y&&y[s],g=y&&y["sap:value-list"];i=l&&g==="fixed-values";o=!!p&&p.Bool==="true"}return i||o||false}}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/SelectionVariantHelper", ["sap/base/security/encodeURL","sap/m/Token","sap/ui/core/CustomData"],function(e,a,r){"use strict";var t=function(e){return"("+e+")"};var n=function(e,a,r){var t="or";var n=a;if(r==="E"){t="and"}if(e===""){return n}return[e,t,n].join(" ")};var o=function(e,a){if(a==="number"){return e+"m"}if(!(a==="integer"||a==="boolean"||a==="datetime")){return"'"+e+"'"}return e};var i=function(e,a,r,i){var u="";a.forEach(function(a){var s;switch(a.Option){case"BT":s=t([e,"ge",o(a.Low,i),"and",e,"le",o(a.High,i)].join(" "));break;case"CP":if(a.Low.match(/^[*]\\*(.*)\\*[*]$/)){a.Low=a.Low.slice(1,-1)}s="substringof("+o(a.Low,i)+","+e+")";break;default:s=[e,a.Option.toLowerCase(),o(a.Low,i)].join(" ");break}u=n(u,s,r)});return u};var u=function(e,a,r){var n=[],o=[];a.forEach(function(e){if(e.Sign==="I"){if(e.Option==="NE"){o.push(e)}else{n.push(e)}}else{if(e.Option==="NE"){n.push(e)}else{o.push(e)}}});var u=i(e,n,"I",r);var s=[];if(u){s.push(t(u))}var c=i(e,o,"E",r);if(c){s.push(t(c))}return s.join(" and ")};var s=function(a,r){var t=[];a.getSelectOptionsPropertyNames().forEach(function(e){t.push(u(e,a.getSelectOption(e),r[e]))});return t.length?"$filter="+e(t.join(" and ")):null};var c=function(a,r){var n="";a.getParameterNames().forEach(function(e){if(n!==""){n+=","}n+=e+"=";var t=a.getParameter(e);n+=o(t,r[e])});return n===""?null:t(e(n))};var f=function(e){var a=e.Option;switch(e.Option){case"CP":var r=e.Low;var t=r.indexOf("*")===0;var n=r.indexOf("*",1)===r.length-1;if(t&&!n){a="StartsWith"}else if(!t&&n){a="EndsWith"}else if(t&&n){a="Contains"}break;case"EQ":if(e.Low===""){a="Empty"}break}return a};var v=function(e,a){return new r({key:"range",value:{exclude:e.Sign==="E",keyField:a,operation:f(e),value1:e.Option==="CP"?e.Low.replace(/\*/g,""):e.Low,value2:e.High}})};var w=function(e,n){var o=[];var i=0;e.forEach(function(e){var u="";var s="";switch(e.Option){case"BT":u+=e.Low+" .. "+e.High;s="range_"+i++;break;case"CP":u+=e.Low;s="range_"+i++;break;case"EQ":if(e.Low===""){u+="<EMPTY>";s="<EMPTY>"}else{u+=e.Text?e.Text:e.Low;s=e.Low}break;case"NE":u+="!"+e.Low;s="range_"+i++;break;case"GT":u+=">"+e.Low;s="range_"+i++;break;case"GE":u+=">="+e.Low;s="range_"+i++;break;case"LT":u+="<"+e.Low;s="range_"+i++;break;case"LE":u+="<="+e.Low;s="range_"+i++;break}if(e.Sign==="E"){u="!"+t(u)}var c=new a({key:s,text:e.Text?e.Text:u});if(s!==e.Low){c.addCustomData(v(e,n))}c.addCustomData(new r({key:"selectOption",value:e}));o.push(c)});return o};var l=function(){var e=new sap.fe.navigation.SelectionVariant;return e.toJSONString()};var p=function(e){switch(e.Option){case"BT":e.Text+=e.Low+" .. "+e.High;break;case"EQ":if(e.Low===""){e.Text+="<EMPTY>"}else{e.Text+=e.Low}break;case"NE":e.Text+="!"+e.Low;break;case"GT":e.Text+=">"+e.Low;break;case"GE":e.Text+=">="+e.Low;break;case"LT":e.Text+="<"+e.Low;break;case"LE":e.Text+="<="+e.Low;break;default:e.Text+=e.Low;break}return e.Text};var L=function(e,a){var r={Sign:e.exclude?"E":"I",Option:e.operation,Low:e.value1.toString(),High:e.value2?e.value2.toString():"",Text:a?a:""};switch(e.operation){case"Contains":r.Option="CP";if(e.value1){r.Low="*"+e.value1+"*"}break;case"StartsWith":r.Option="CP";if(e.value1){r.Low=e.value1+"*"}break;case"EndsWith":r.Option="CP";if(e.value1){r.Low="*"+e.value1}break;case"Empty":r.Option="EQ";r.Low="";break}if(!r.Text){r.Text=p(r)}return r};return{getFilterQueryFromSV:s,getParameterQueryFromSV:c,getTokenFromSelectOptions:w,getEmptySVStringforProperty:l,getSelectOptionFromRange:L}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/Transformations", ["sap/ui/base/BindingParser"],function(e){var r=function(r){var a=e.complexParser(r);return a.path||a.parts&&a.parts[0].path};var a={bar_series:["bar","column","line","bullet","stacked_bar","stacked_column","vertical_bullet","100_stacked_bar","100_stacked_column","waterfall","horizontal_waterfall","area","radar"],pie_series:["pie","donut"]};var t={bar_series:a["bar_series"].concat("combination","stacked_combination","horizontal_stacked_combination"),pie_series:a["pie_series"],dual_series:["dual_bar","dual_column","dual_line","dual_stacked_bar","dual_stacked_column","dual_combination","dual_horizontal_combination","dual_stacked_combination","dual_horizontal_stacked_combination","100_dual_stacked_bar","100_dual_stacked_column"],scatter_series:["scatter"],heatmap_series:["heatmap"],bubble_series:["bubble"]};var n=function(e){var r=e.content.measures.length;return r>1?t:a};var i=function(e,r){var a=null;var t=Object.keys(r);t.forEach(function(t){if(r[t].includes(e)){a=t}});return a};var s=function(e,r){var a=[];r.forEach(function(r){var t=JSON.parse(e);var n=t["sap.card"];var i=n.content;i.chartType=r;a.push(t)});return a};var u=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=false}n.feeds=[{uid:"categoryAxis",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})},{uid:"valueAxis",type:"Measure",values:n.measures.map(function(e){return e.label||e.name})}];return s(JSON.stringify(a),r)};var l=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=true}n.feeds=[{uid:"size",type:"Measure",values:n.measures.map(function(e){return e.label||e.name})},{uid:"color",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})}];return s(JSON.stringify(a),r)};var c=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=false}n.feeds=[{uid:"categoryAxis",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})}].concat(n.measures.map(function(e,r){return{uid:"valueAxis"+(r===0?"":r+1),type:"Measure",values:[e.label||e.name]}}));return s(JSON.stringify(a),r)};var o=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=false}n.feeds=[{uid:"color",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})}].concat(n.measures.map(function(e,r){var a="valueAxis";if(r!==0){if(r===1){a="valueAxis2"}else{if(r!==n.measures.length-1){a=a+(r+1)}if(r===n.measures.length-1){a="bubbleWidth"}}}return{uid:a,type:"Measure",values:[e.label||e.name]}}));return s(JSON.stringify(a),r)};var d=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=true}n.feeds=[{uid:"color",type:"Measure",values:[n.measures[0].name||n.measures[0].label]},{uid:"categoryAxis",type:"Dimension",values:n.dimensions.map(function(e){return e.name||e.label})}];return s(JSON.stringify(a),r)};var p=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.measures.length<3){return null}if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=true}n.feeds=[{uid:"color",type:"Dimension",values:[n.dimensions[0].name||n.dimensions[0].label]},{uid:"valueAxis",type:"Measure",values:[n.measures[0].name||n.measures[0].label]},{uid:"valueAxis2",type:"Measure",values:[n.measures[1].name||n.measures[1].label]},{uid:"bubbleWidth",type:"Measure",values:[n.measures[2].name||n.measures[2].label]}];return s(JSON.stringify(a),r)};var f=function(e,r,a){switch(r){case"bar_series":return u(e,a);case"pie_series":return l(e,a);case"dual_series":return c(e,a);case"scatter_series":return o(e,a);case"heatmap_series":return d(e,a);case"bubble_series":return p(e,a);default:return null}};function v(e,r){var a=n(e["sap.card"]);var t=e["sap.card"].content.chartType;var u=JSON.stringify(e);var l=[];var c=Object.keys(a);if(r&&Array.isArray(r)&&r.length){r.forEach(function(e){var r=i(e,a);if(r){l=l.concat(f(u,r,[e]))}else{l.push(null)}})}else{e["sap.card"].data.request["timeout"]=1e5;c.forEach(function(e){var r=a[e];if(r.includes(t)){l=l.concat(s(u,r))}else{l=l.concat(f(u,e,r))}})}return l}var m=[function e(r){return r},function e(r){var a=r["sap.card"].content.item;if(a.chart){if(!a.info&&a.chart.displayValue){a.info={value:a.chart.displayValue};if(a.chart.color){a.info.state=a.chart.color}}delete a.chart;return r}return null},function e(r){var a=r["sap.card"].content.item;if(a.info){delete a.info;return r}return null},function e(r){var a=r["sap.card"].content.item;if(a.attributes&&a.attributes.length>0){delete a.attributes;delete a.attributesLayoutType;return r}return null},function e(a){var t=a["sap.card"].content.item;if(t.info){a["sap.card"].content.group={title:t.info.value,order:{path:r(t.info.value),dir:"DESC"}};delete t.info;return a}return null},function e(a){var t=a["sap.card"].content.item;if(t.attributes&&t.attributes.length>0){a["sap.card"].content.group={title:t.attributes[0].value,order:{path:r(t.attributes[0].value),dir:"DESC"}};delete t.attributes;delete t.attributesLayoutType;return a}return null},function e(r){var a=r["sap.card"].content;var t=a.item;var n=[];var i=[];if(t.title){n.push({value:t.title})}if(t.actions&&t.actions.length){i=i.concat(t.actions)}if(t.chart&&t.chart.displayValue){n.push({value:t.chart.displayValue});if(t.chart.color){n[n.length-1].state=t.chart.color}}if(t.attributes&&t.attributes.length>0){n=n.concat(t.attributes)}if(t.info){n.push(t.info)}if(n.length>0){a.row={columns:n};if(i.length>0){a.row["actions"]=i}delete a.item;r["sap.card"].type="Table";return r}return null}];function b(e,r){var a=JSON.stringify(e);return r.map(function(e){var r=JSON.parse(a);return e(r)})}function h(e){return b(e,m)}var _=[function e(r){return r},function e(r){var a=r["sap.card"].content;var t={attributesLayoutType:"OneColumn"};var n=a.row.columns||[];if(n.length>0){n.forEach(function(e,r){t.attributes=t.attributes||[];t.attributes.push(e)});if(a.row.actions&&a.row.actions.length){t["actions"]=a.row.actions}r["sap.card"].type="List";a.item=t;delete a.row;return r}return null}];function y(e){return b(e,_)}var g=[function e(r){var a=r["sap.card"].content;var t=a.data;var n=a.dimensions||[];var i=a.measures||[];var s=n.map(function(e){return{title:e.label,value:e.displayValue||e.value}});s=s.concat(i.map(function(e){return{title:e.label,value:e.value}}));if(s.length>0){r["sap.card"].type="Table";r["sap.card"].content={data:t,row:{columns:s}};return r}return null}];function O(e){return b(e,g)}return{transformAnalyticalManifest:v,createListOptions:h,createTableOptions:y,createChartToListOrTableOptions:O}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/UrlGenerateHelper", ["../utils/SelectionVariantHelper","sap/fe/navigation/SelectionVariant","sap/m/DynamicDateUtil","sap/ui/comp/util/DateTimeUtil","sap/ui/core/format/DateFormat","../utils/AppConstants","sap/ui/model/odata/v2/ODataModel","sap/ui/core/date/UI5Date"],function(e,t,a,r,i,n,o,l){function u(a,r,i){var n=a.descriptorContent["sap.card"].configuration.parameters;var u=a.descriptorContent["sap.card"]["data"]["request"];var v=false,m={},d={};if(u&&u.batch){v=true;m=u.batch.header||{};d=u.batch.content||{}}var T=a&&n._headerDataUrl,E=a&&n._contentDataUrl;var g=new t;var D=n._relevantODataFilters.value;var h=n._relevantODataParameters.value;var S=n._semanticDateRangeSetting,y=[];if(S){S=JSON.parse(S.value);y=Object.keys(S)||[]}D.forEach(function(e){var a=new t(n[e].value);var r=a.getSelectOption(e);var i=[];if(r&&r.length){if(y.includes(e)){i=p(r[0],"Filter");if(i.length){r[0].Low=i[0];r[0].High=i[1]?i[1]:null;if(r[0].Low&&r[0].High&&r[0].Option!=="BT"){r[0].Option="BT"}g.massAddSelectOption(e,r)}else if(o&&o.prototype.formatValue&&r[0]){r[0].Low=o.prototype.formatValue(r[0].Low,"Edm.DateTime");if(r[0].High){r[0].High=o.prototype.formatValue(r[0].High,"Edm.DateTime")}g.massAddSelectOption(e,r)}}else{if(o&&o.prototype.formatValue&&r[0]&&n[e].type==="datetime"){r[0].Low=o.prototype.formatValue(r[0].Low,"Edm.DateTime");if(r[0].High){r[0].High=o.prototype.formatValue(r[0].High,"Edm.DateTime")}g.massAddSelectOption(e,r)}g.massAddSelectOption(e,r)}}});h.forEach(function(e){var t="";if(n[e].value){if(n[e].value.value){t=n[e].value.value.toString()}else if(n[e].value instanceof Date){t=n[e].value}else{t=n[e].value.toString()}}if(n[e].type==="datetime"&&!y.includes(e)&&!t.includes("datetime")){if(o&&o.prototype.formatValue){t=o.prototype.formatValue(t,"Edm.DateTime");g.addParameter(e,t)}}else if(n[e].type==="datetime"&&y.includes(e)){t=typeof n[e].value==="string"&&Date.parse(n[e].value)?p(l.getInstance(t),"Parameter"):p(t,"Parameter");g.addParameter(e,t[0])}else{g.addParameter(e,t)}});var A=n._entitySet.value;var O=A;if(h.length){var I={};h.forEach(function(e){I[e]=n[e].type});O+=e.getParameterQueryFromSV(g,I);var M=O;if(M&&Array.isArray(M.match(/%27datetime[a-zA-Z0-9%-:]*[,)%2c]/gm))&&M.match(/%27datetime[a-zA-Z0-9%-:]*[,)%2c]/gm).length){O=c(M)}}if(n._urlSuffix.value){O+=n._urlSuffix.value}var H={};D.forEach(function(e){H[e]=n[e].type});var R=e.getFilterQueryFromSV(g,H);var N=R;if(N&&Array.isArray(N.match(/%27datetime[a-zA-Z0-9%-:]*[,)%2c]/gm))&&N.match(/%27datetime[a-zA-Z0-9%-:]*[,)%2c]/gm).length){R=c(N)}var L="",Q="",_="",F="",x={header:"",content:""};if(v){L=f(n,"_header",R,a.descriptorContent["sap.card"].type);Q=L?O+"?"+L:O;if(T&&T.value){var P=s(y,Q);if(P){m.url="{= extension.formatters.formatHeaderDataUrlForSemanticDate() }";T.value=""}else{T.value=Q;if(r){r._headerDataUrl=T.value}}}else if(T){x.header=Q}}if(n._contentDataUrl){_=f(n,"_content",R,a.descriptorContent["sap.card"].type);F=_?O+"?"+_:O;if(n._contentDataUrl.value){var U=s(y,F);if(U){if(v){d.url="{= extension.formatters.formatContentDataUrlForSemanticDate() }"}else{u.url="{= extension.formatters.formatContentDataUrlForSemanticDate() }"}E.value=""}else{E.value=F;if(r){r._contentDataUrl=E.value}}}else{x.content=F;return x}if(i){x.header=Q;x.content=F;return x}}}function s(e,t){var a=e.length?e:[];if(a.length&&t){return a.some(function(e){return t&&t.indexOf(e)>-1})}}function f(e,t,a,r){var i=[];if(a){i.push(a)}if(e[t+"SelectQuery"]&&e[t+"SelectQuery"].value){i.push(e[t+"SelectQuery"].value)}if(e[t+"ExpandQuery"]&&e[t+"ExpandQuery"].value){i.push(e[t+"ExpandQuery"].value)}if(e[t+"SortQuery"]&&e[t+"SortQuery"].value){var n=e[t+"SortQuery"].value;i.push(decodeURI(n)===n?encodeURI(n):n)}if(r==="Table"||r==="List"){i.push("$inlinecount=allpages");i.push("$skip=0&$top=13")}else{if(e[t+"TopQuery"]&&e[t+"TopQuery"].value){i.push(e[t+"TopQuery"].value)}if(e[t+"SkipQuery"]&&e[t+"SkipQuery"].value){i.push(e[t+"SkipQuery"].value)}}return i.length?i.join("&"):null}function c(e){var t=e.match(/%27datetime[a-zA-Z0-9%-:]*[,)%2c]/gm).length;var a=function(){var t=e.match(/%27datetime[a-zA-Z0-9%-:]*[,)%2c]/gm)[0];var a=t;a=a.replace("%27","");var r=a.lastIndexOf("%27");var i=a.substr(0,r)+a.substr(r+3,a.length-1);return i};for(var r=0;r<t;r++){e=e.replace(e.match(/%27datetime[a-zA-Z0-9%-:]*[,)%2c]/gm)[0],a)}return e}function p(e,t){var r,i=[],o=[],l=false;if(t==="Parameter"){r=e}else if(t==="Filter"){e=typeof e==="string"?JSON.parse(e):e;r=e.Low;if(n.DATE_OPTIONS.SPECIAL_RANGE.includes(r)){i=e.High.split(",")}}var u;if(n.DATE_OPTIONS.RANGE_OPTIONS.includes(r)||n.DATE_OPTIONS.SINGLE_OPTIONS.includes(r)){if(t==="Filter"){u=a.toDates({values:i,operator:r});o.push(u[0].oDate);o.push(u[1].oDate)}else{u=a.toDates({values:i,operator:r});o.push(u[0].oDate)}}if(["DATETIMERANGE","FROMDATETIME","TODATETIME","DATETIME"].includes(r)){l=true}if(o.length){o=v(o,true,l);return o}else if(Date(e)instanceof Date||e instanceof Date||Date.parse(e)){return v([e],true,l)}return[]}function v(e,t,a){var n;e.forEach(function(o,u){if(o.match){if(o.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3})Z?$/gm)&&o.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3})Z?$/gm).length){o=l.getInstance(o)}}o=r.localToUtc(o);if(!a){o=r.normalizeDate(o,true)}if(t){n=i.getDateInstance({pattern:"'datetime'''yyyy-MM-dd'T'HH:mm:ss''",calendarType:"Gregorian"});e[u]=n.format(o,true)}else{var s=i.getDateInstance({pattern:"''yyyy-MM-dd'T'HH:mm:ss.SSS''",calendarType:"Gregorian"});var f=o instanceof Date?o:l.getInstance(o);var c=s.format(f);e[u]=String(c).replace(/'/g,"")}});return e}function m(e,t,r){var i=r;if(e&&t){var n=e.operator;if(n!=="DATE"){return n}else{return e.values[0]}}if(!t){var o=e.operator;var l=e.values;var u="";if(o){switch(o){case"DATE":case"DATERANGE":case"SPECIFICMONTH":case"DATETIMERANGE":case"DATETIME":u="";if(typeof i==="string"){u=i}var s=a.toDates(e);l=s;var f=v(l,false,o==="DATETIMERANGE"||o==="DATETIME");if(!f[1]){f[1]=""}var c={Low:f[0],High:f[1],Option:"BT",Text:u};if(c){c.Text=u;return c}break;case"FROM":case"TO":case"FROMDATETIME":case"TODATETIME":u="";if(typeof i==="string"){u=i}var p=v(l,false,o==="FROMDATETIME"||o==="TODATETIME"),m;m=o==="FROM"||o==="FROMDATETIME"?"GE":"LE";var d={Low:p[0],High:"",Option:m,Text:u};if(d){d.Text=u;return d}break;case"LASTDAYS":case"LASTWEEKS":case"LASTMONTHS":case"LASTQUARTERS":case"LASTYEARS":case"NEXTDAYS":case"NEXTWEEKS":case"NEXTMONTHS":case"NEXTQUARTERS":case"NEXTYEARS":u="";if(typeof i==="string"){u=i}return{Low:o,High:l[0].toString(),Option:"BT",Text:u};case"TODAYFROMTO":u="";if(typeof i==="string"){u=i}var T=l&&l[0];var E=l&&l[1];return{Low:o,High:T.toString()+","+E.toString(),Option:"BT",Text:u};default:u="";if(typeof i==="string"){u=i.substring(0,i.indexOf("(")-1)}return{Low:o,High:null,Option:"EQ",Text:u}}}}}return{processPrivateParams:u,formatSemanticDateTime:p,getDateRangeValue:m}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/V4MetadataAnalyser", [],function(){"use strict";return{_search:function(t,e){return e?e.split("/").reduce(function(t,e){return t&&e?t[e]:t},t):undefined},getAnnotations:function(t,e,n,r){return this._fetchEntitySetName(t,e,n).then(function(e){return Promise.all(r.map(function(r){return this.getMetadataProperty(t,e,n,r)}.bind(this)))}.bind(this))},_fetchEntitySetName:function(t,e,n){var r=this._search(e,"/sap.card/configuration/parameters/_entitySet/value"),i=this._search(e,"/sap.card/configuration/parameters/_relevantODataParameters/value"),a=this._search(e,"/sap.insights/filterEntitySet"),s="";return this.getMetadataProperty(t,r).then(function(e){if(e){if(Object.keys(e).includes(n)){s=r}else if(!i.includes(n)){s=a}else{var u=this._search(e,"/Parameters/$Type"),c=u.split("."),h=c[c.length-1];return this.getMetadataProperty(t,h).then(function(t){return Object.keys(t).includes(n)?h:a})}}return s}.bind(this))},getMetadataProperty:function(t,e,n,r){if(!t||!t.getMetaModel){return false}return t.getMetaModel().requestObject("/"+e+"/"+(n||"")+(r||""))}}});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/insights/utils/oDataModelProvider", ["sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/v4/ODataModel","./AppConstants"],function(e,t,r){var a={};function n(t){var a=t.filterService;var n=a&&a.uri;var i=a&&a.settings;var o=[];if(i){i.annotations.forEach(function(e){var r=t[e];var a=r.uri;o.push(a)});if(i.odataVersion===r.ODATA_VERSION_2){return new e(n,{annotationURI:o,loadAnnotationsJoined:true})}}}function i(e){var t=e.filterService.uri;var r=n(e);a[t]={oData:r,loaded:undefined};return new Promise(function(e){if(r){r.attachMetadataLoaded(function(r){return r.getSource().getMetaModel().loaded().then(function(){a[t].loaded=true;e(a[t])})});r.attachMetadataFailed(function(){a[t].loaded=false;e(a[t])})}else{e(a[t])}})}function o(e){var a=e.filterService;var n=a&&a.uri;var i=a&&a.settings;var o=[];if(i){i.annotations.forEach(function(t){var r=e[t];var a=r.uri;o.push(a)});if(i.odataVersion===r.ODATA_VERSION_4){return new t({serviceUrl:n})}}}function u(e){var t=e.filterService.uri,r=o(e);a[t]={oData:r};return new Promise(function(e){r.getMetaModel().requestData().then(function(){a[t].loaded=true}).catch(function(){a[t].loaded=false}).finally(function(){e(a[t])})})}function f(e){if(e.filterService&&e.filterService.uri){var t=e.filterService,n=e.filterService.uri;if(a[n]){return Promise.resolve(a[n])}else if(t.settings&&t.settings.odataVersion===r.ODATA_VERSION_2){return i(e)}else if(t.settings&&t.settings.odataVersion===r.ODATA_VERSION_4){return u(e)}}else{return Promise.resolve(undefined)}}return{getOdataModel:f}});
sap.ui.require.preload({
	"sap/insights/configure/ColumnList.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns:l="sap.ui.layout"\n    xmlns:f="sap.f"\n    xmlns:w="sap.ui.integration.widgets"\n    xmlns:grid="sap.ui.layout.cssgrid"><Page id="insightCardColumnPage" title="{i18n>INT_PREVIEW_POPOVER_BUTTON_TITLE}" titleLevel="H1" showHeader="true" showSubHeader="true" backgroundDesign="List" enableScrolling="false" showNavButton="{= ${configureView>/bCalledInternally} ? true : false}" navButtonPress=".onNavBack(${configureView>/})" ><headerContent><Button text="{i18n>INT_DIALOG_CardPreview}"\n                press="._callPreview(${configureView>/oConfCard})" visible="{=  (!${configureView>/bDesktop} &amp;&amp; !${configureView>/bShowPreview}) ? true : false}" enabled="true"/><Button\n                text="{i18n>INT_DIALOG_HidePreview}"\n                press="._callClosePreview(${configureView>/oConfCard})" visible="{= (${configureView>/bShowPreview} &amp;&amp; !${configureView>/bDesktop})  ? true : false}" enabled="true"/></headerContent><content><VBox id="flexContainerColumnContent" height="100%"  width="100%" direction="Row" justifyContent="SpaceBetween"><FlexBox  id="editColumnInsightsCardsFlex" height="100%" width="{= ( ${configureView>/bDesktop}) ? \'62%\' : \'100%\'}"  direction="Column"><VBox id="insightsColumnEditVBox" direction="Column" class="sapUiSmallMarginBegin sapUiSmallMarginTop sapUiTinyMarginBottom" visible="{= (${configureView>/bDesktop} ||  (!${configureView>/bDesktop} &amp;&amp; !${configureView>/bShowPreview})) ? true : false}"><Title text="{i18n>INT_COLUMN_TITLE}" level="H4"/><Text text="{i18n>INT_COLUMN_SUBTITLE}" /></VBox><FlexBox  id="insightsColumnEditFlexBox" height="92%" width="95%" class="sapUiSmallMarginBegin sapUiSmallMarginEnd" visible="{= (${configureView>/bDesktop} ||  (!${configureView>/bDesktop} &amp;&amp; !${configureView>/bShowPreview})) ? true : false}" direction="Column" renderType="Bare"><VBox renderType="Bare"><SearchField id="columnSearch" placeholder="{i18n>INT_COL_SEARCH}" width="{= !${configureView>/bDesktop} ? \'90%\' : \'100%\'}" liveChange=".onColumnSearch" class="sapUiTinyMarginBottom"/></VBox><ScrollContainer id="idEditColumnsScrollContainer" vertical="true" horizontal="false" height="90%" width="100%"><Table id="insightsCardsEditColumnsListTable" fixedLayout="true" class="sapContrastPlus" items="{path: \'configureView>/cardColumn\'}"><columns><Column id="editColumnsTableCheckBox" hAlign="Center" width="{= ${configureView>/bDesktop} ? \'10%\' : \'20%\'}"/><Column id="editColumnsName"  width="{= ${configureView>/bDesktop} ? \'90%\' : \'80%\'}"/></columns><dragDropConfig><dnd:DragInfo\n                                        id="idColumnDrag"\n                                        groupName="editColumns"\n                                        sourceAggregation="items" /><dnd:DropInfo\n                                        id="idColumnDrop"\n                                        groupName="editColumns"\n                                        targetAggregation="items"\n                                        dropPosition="On"\n                                        drop="._onColumnDrop" /></dragDropConfig><items><ColumnListItem id="editColumnsListItem"><cells ><HBox class="sapUiNoPadding"><core:Icon id="columnSelectDnDIcon" src="sap-icon://BusinessSuiteInAppSymbols/icon-grip" class="insightsDndIcon" /><CheckBox id="editColumnsSelecttest" selected="{= ${configureView>visible} ? true : false}"  enabled="{= !(!${configureView>visible} &amp;&amp; (${configureView>/visibleColumnCount} &gt; 2)) ? true : false}" select=".handleColumnVisibilityToggle" /></HBox></cells><cells><ObjectIdentifier id="editColumnsTitleName" title="{configureView>title}" class="sapUiNoPadding" tooltip="{configureView>title}"/></cells></ColumnListItem></items></Table></ScrollContainer></FlexBox><FlexBox id="previewColCardFlex"  direction="Column" height="100%" width="100%" visible="{= (!${configureView>/bDesktop} &amp;&amp; ${configureView>/bShowPreview}) ? true : false}"><VBox id="previewVBoxSD" direction="Column" class="sapUiSmallMarginBegin sapUiTinyMarginTop" backgroundDesign="Solid" ><Label id="labelColLayout" text="{i18n>INT_COL_LAYOUT}"/><SegmentedButton id="sdColumnSegButton" width="3.75rem" selectionChange="onSegmentedSelectionChange"  tooltip="{i18n>INT_LAYOUT_TOOLTIP}" ><items><SegmentedButtonItem icon="sap-icon://list" key="list" /><SegmentedButtonItem icon="sap-icon://table-view" key="table"/></items></SegmentedButton></VBox><VBox id="previewColCardVBox" width="100%" height="100%" visible="{= (!${configureView>/bDesktop} &amp;&amp; ${configureView>/bShowPreview}) ? true : false}"  alignItems="Center"  backgroundDesign="Solid" justifyContent="SpaceAround"><ScrollContainer id="colCardsScrollSD" vertical="true" horizontal="false" height="100%" ><w:Card id="previewColCardSD" manifest="{configureView>/oConfCard}" host="transactionalCardHost" width="19rem" height="32rem" previewMode="{= ${configureView>/visibleColumnCount} &gt; 0 ? \'Off\' : \'Abstract\'}" class="sapUiTinyMarginBeginEnd sapUiTinyMarginTopBottom"/><HBox id="insightsColCardLayerSD" class="sapMFlexBoxJustifyCenter" height="0" visible="{= ${configureView>/oConfCard/sap.card/type}  === \'Analytical\' ? false : true}"><HBox id="insightsColOverflowInnerHBoxSD" class="insightsCardOverflowLayer insightsPreviewCardOverLay insightsColOverLayPositionSD"/></HBox></ScrollContainer></VBox></FlexBox></FlexBox><FlexBox id="columnPreviewCardFlexbox" direction="Column" width="38%" height="100%" visible="{= (${configureView>/bDesktop} ) ? true : false}" class="sapMPageBgStandard" renderType="Bare"><ScrollContainer id="colCardsScroll" vertical="true" horizontal="false" height="100%"><Panel id="previewPanelContainer" expanded="false" height="100%"   backgroundDesign="Transparent"><headerToolbar  ><Toolbar style="Clear"  design="Auto" class="sapThemeBaseBG"><HBox id="idPreviewTextHBox"  width="100%" justifyContent="Start" backgroundDesign="Transparent" renderType="Bare" ><Title id="insightPreviewText" text="{i18n>INT_DIALOG_TITLE_CardPreview}" class="sapUiTinyMarginTop sapUiSmallMarginEnd" textAlign="Left"/><SegmentedButton  id="columnSegButton" width="3.75rem"  selectionChange="onSegmentedSelectionChange" tooltip="{i18n>INT_LAYOUT_TOOLTIP}"><items><SegmentedButtonItem icon="sap-icon://list" key="list" /><SegmentedButtonItem icon="sap-icon://table-view" key="table"/></items></SegmentedButton></HBox></Toolbar></headerToolbar><VBox id="idCardsPreviewVBox"  height="100%" alignItems="Center" backgroundDesign="Transparent" justifyContent="SpaceAround" ><w:Card id="previewCard" manifest="{configureView>/oConfCard}" host="transactionalCardHost" width="19rem" height="33rem" previewMode="{= ${configureView>/visibleColumnCount} &gt; 0 ? \'Off\' : \'Abstract\'}"/><HBox id="insightsColCardLayer" class="sapMFlexBoxJustifyCenter" height="0" visible="{= ${configureView>/oConfCard/sap.card/type}  === \'Analytical\' ? false : true}" ><HBox id="insightsColOverflowInnerHBox" class="insightsCardOverflowLayer insightsPreviewCardOverLay insightsColOverLayPositionLS"/></HBox></VBox></Panel></ScrollContainer></FlexBox></VBox></content></Page></core:FragmentDefinition>',
	"sap/insights/configure/ColumnList.view.xml":'<mvc:View displayBlock="true" \n   controllerName="sap.insights.configure.ColumnList"\n  xmlns="sap.m"\n  xmlns:mvc="sap.ui.core.mvc"\n  xmlns:core="sap.ui.core"\n  xmlns:f="sap.ui.layout.form"\n  xmlns:l="sap.ui.layout"><core:Fragment fragmentName="sap.insights.configure.ColumnList" type="XML" /></mvc:View>',
	"sap/insights/configure/ColumnListDialog.view.xml":'<mvc:View displayBlock="true" controllerName="sap.insights.configure.ColumnList" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"><Dialog id="insightsColumnListDialog"   contentHeight="42.8rem" contentWidth="65.6rem"  verticalScrolling="false" horizontalScrolling="false" class="sapContrastPlus" resizable="false" draggable="true" showHeader="false" afterClose="afterCloseDialog"><content><Page id="insightCardDialogPage" title="{i18n>INT_PREVIEW_POPOVER_BUTTON_TITLE}" titleLevel="H1" showHeader="false" showSubHeader="true" backgroundDesign="List" enableScrolling="false" showNavButton="{= ${configureView>/bCalledInternally} ? true : false}" navButtonPress=".onNavBack(${configureView>/})" ><content><NavContainer id="navCon" initialPage="insightCardColumnPage"><core:Fragment  fragmentName="sap.insights.configure.ColumnList" type="XML" /><core:Fragment fragmentName="sap.insights.configure.PreviewCard" type="XML" /></NavContainer></content><footer><OverflowToolbar><ToolbarSpacer/><Button id="backButton" text="{i18n>INT_DIALOG_BACK}" visible="{= !${configureView>/bPreview} ? true : false}" press=".onNavBack"/><Button id="addButton" text="{i18n>INT_DIALOG_Ok}"  press=".save(${configureView>/oConfCard})" visible="{= (!${configureView>/bPreview} || !${configureView>/bTransform}) ? true : false}"  type="Emphasized" enabled="{= ((${configureView>/visibleColumnCount} &gt; 0) || ${configureView>/bShowHoCPage} || ${configureView>/oConfCard/sap.card/type} === \'Analytical\') ? true : false}"/><Button id="nextButton" text="{i18n>INT_DIALOG_NEXT}"  press="._callNextPage(${configureView>/oConfCard})" visible="{= (${configureView>/bPreview})? true : false}" type="Emphasized"/><Button id="cancelButton" text="{i18n>INT_DIALOG_CANCEL}" press=".closeDialog"/></OverflowToolbar></footer></Page></content></Dialog></mvc:View>',
	"sap/insights/configure/PreviewCard.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns:l="sap.ui.layout"\n    xmlns:f="sap.f"\n    xmlns:form="sap.ui.layout.form"\n    xmlns:w="sap.ui.integration.widgets"><Page id="insightCardPreviewPage" title="{i18n>INT_PREVIEW_POPOVER_BUTTON_TITLE}" titleLevel="H1" class="sapMPageBgStandard" showHeader="true" showSubHeader="true" backgroundDesign="List" enableScrolling="false" showNavButton="{= ${configureView>/bCalledInternally} ? true : false}" navButtonPress=".onNavBack(${configureView>/})"><headerContent><Button\n                text="{i18n>INT_DIALOG_CardPreview}"\n                press="._callPreview(${configureView>/oConfCard})" visible="{= (!${configureView>/bDesktop} &amp;&amp; !${configureView>/bPreview} &amp;&amp; !${configureView>/bShowCardPreview}) ? true : false}" enabled="true"/><Button\n                text="{i18n>INT_DIALOG_HidePreview}"\n                press="._callClosePreview(${configureView>/oConfCard})" visible="{= (${configureView>/bShowCardPreview} &amp;&amp; !${configureView>/bDesktop})  ? true : false}" enabled="true"/></headerContent><content><VBox id="previewAddCardVBox" height="100%"  width="100%" direction="Row" justifyContent="SpaceBetween"><FlexBox  id="previewAddFlexBox" height="100%" width="{= ( ${configureView>/bDesktop} &amp;&amp; (${configureView>/oConfCard/sap.card/type} === \'Analytical\')) ? \'62%\' : \'100%\'}"  direction="Column"><VBox  direction="Column"  class="sapUiSmallMarginBegin"><Title id="previewCardInfoTitle" text="{i18n>INT_CARD_TITLEINFO}" level="H4" class="sapUiSmallMarginTop"/><Text id="previewCardInfoSubtitle" text="{i18n>INT_CARD_SUBTITLE}" /></VBox><VBox  id="previewFormFlexBox" height="100%" width="100%" visible="{= (${configureView>/bDesktop} ||  (!${configureView>/bDesktop} &amp;&amp; !${configureView>/bShowCardPreview})) ? true : false}" ><form:SimpleForm id="previewForm" width="100%" layout="ResponsiveGridLayout" editable="true" adjustLabelSpan="true"><Label id="labelTitle" class="sapUiTinyMarginTop" text="{i18n>INT_Preview_CARDTITLE}"  required="true" labelFor="titleTextInput"/><Input id="titleTextInput" ariaLabelledBy="previewCardInfoTitle previewCardInfoSubtitle labelTitle" change=".handleTitleChange" value="{configureView>/oConfCard/sap.card/header/title}" /><Label id="labelSubTitle" text="{i18n>INT_Preview_SubTitleTitleField_Label}" class="sapUiTinyMarginTop" labelFor="subTitleTextInput"/><Input id="subTitleTextInput" change=".handleSubTitleChange" value="{configureView>/oConfCard/sap.card/header/subTitle}"/></form:SimpleForm></VBox><FlexBox id="panelFlex1" height="100%" width="100%" visible="{= (!${configureView>/bDesktop} &amp;&amp; ${configureView>/bShowCardPreview}) ? true : false}" justifyContent="Center"><ScrollContainer id="previewCardsScrollSD" vertical="true" horizontal="false" height="100%" ><VBox height="100%" id="previewCardVBox" width="100%" alignItems="Center" backgroundDesign="Solid" justifyContent="SpaceAround" class="sapUiSmallMarginTop sapUiTinyMarginBottom"><w:Card id="previewCardSD" manifest="{configureView>/oConfCard}" host="transactionalCardHost" width="19rem" height="33rem" /><HBox id="insightsPreviewCardLayerSD" class="sapMFlexBoxJustifyCenter" height="0" visible="{= ${configureView>/oConfCard/sap.card/type}  === \'Analytical\' ? false : true}"><HBox id="insightsPCOverflowInnerHBoxSD" class="insightsCardOverflowLayer insightsPreviewCardOverLay insightsColOverLayPositionSD"/></HBox></VBox></ScrollContainer></FlexBox></FlexBox><FlexBox id="previewCardFlexbox" direction="Column" width="38%" height="100%" visible="{= (${configureView>/bDesktop}) ? true : false}" class="sapMPageBgStandard"  renderType="Bare"><ScrollContainer id="previewCardsScroll" vertical="true" horizontal="false" height="100%"><Toolbar id="previewToolBar" width="100%" height="2.7rem" style="Clear" design="Auto" class="sapThemeBaseBG"><HBox id="previewCardTextHBox"  class="sapUiTinyMarginBegin" width="100%" justifyContent="Start" backgroundDesign="Transparent"><Title id="insightPreviewCardText" text="{i18n>INT_DIALOG_TITLE_CardPreview}" class="sapUiTinyMarginTop" textAlign="Left" /></HBox></Toolbar><FlexBox id="panelFlex" height="calc(100% - 2.8rem)" backgroundDesign="Transparent" justifyContent="Center"><Panel height="100%" id="previewPanelContainer1" expanded="false"  backgroundDesign="Transparent"><VBox height="100%" id="idCardsPreviewVBox1" alignItems="Center" backgroundDesign="Transparent" justifyContent="SpaceAround" ><w:Card id="previewCardLS" manifest="{configureView>/oConfCard}" host="transactionalCardHost" width="19rem" height="33rem" previewMode="{= (${configureView>/visibleColumnCount} &gt; 0  || ${configureView>/oConfCard/sap.card/type} === \'Analytical\') ? \'Off\' : \'Abstract\'}" /></VBox></Panel></FlexBox></ScrollContainer></FlexBox></VBox></content></Page></core:FragmentDefinition>',
	"sap/insights/copy/Copy.view.xml":'<mvc:View displayBlock="true" \n  controllerName="sap.insights.copy.Copy"\n  xmlns="sap.m"\n  xmlns:mvc="sap.ui.core.mvc"\n  xmlns:core="sap.ui.core"\n  xmlns:w="sap.ui.integration.widgets"\n  xmlns:f="sap.ui.layout.form"\n  xmlns:l="sap.ui.layout"><Page id="copyCardPage" backgroundDesign="List" enableScrolling="true" title="{i18n>copyCard}"><headerContent><VBox direction="Row"><Button\n                        class="sapUiTinyMarginEnd"\n                        type="Emphasized"\n                        text="{i18n>save}"\n                        press=".handleCardCopyPress"/><Button\n                        text="{i18n>cancelButton}"\n                        press=".onNavBack"/></VBox></headerContent><FlexBox id="CopyCardFlexWrapper" alignItems="Start" justifyContent="SpaceBetween" height="100%" direction="Column" class="sapUiTinyMarginBegin sapUiSmallMarginEnd"><Title id="CopyCardEditDetailsTitle" text="{i18n>editDetails}" titleStyle="H5" width="100%" class="sapUiSmallMarginTop sapUiSmallMarginBegin" /><f:SimpleForm id="CopyCardsEditDetailsForm" class="sapContrastPlus sapUiSmallMarginBegin" backgroundDesign="Transparent" width="100%" editable="true" layout="ColumnLayout"><f:content><Label id="CopyCardsEditTitleLabel" text="{i18n>title}" required="true" /><Input id="CopyCardsEditTitleField" value="{copyCardView>descriptorContent/sap.card/header/title}" change=".handleCardsInputChange" valueStateText="{i18n>emptyTitle}" /><Label id="CopyCardsEditSubTitleLabel" text="{i18n>subTitle}" /><Input id="CopyCardsEditSubTitleField" value="{copyCardView>descriptorContent/sap.card/header/subTitle}" change=".handleCardsInputChange"/></f:content></f:SimpleForm><FlexBox id="copyCardSmartForm" class="sapUiTinyMarginTop" justifyContent="Center" direction="Column" width="100%"/><DynamicDateRange id="hiddenDDR" hideInput="true"/><DynamicDateRange id="hiddenFilterDDR" hideInput="true"/><VBox id="CopyCardPreviewVBoxWrapper" class="sapUiMediumMarginTop" backgroundDesign="Transparent" height="100%" width="100%" ><HBox id="CopyCardPreviewHBox" alignItems="Center" justifyContent="SpaceBetween" width="100%"><Title id="CopyCardPreviewTitle" text="{i18n>preview}" titleStyle="H5" class="sapUiSmallMarginBegin" /><Button type="Transparent" id="CopyCardPreviewRefreshButton" text="{i18n>refresh}" press="_handleCardPreviewPress"/></HBox><VBox id="CopyCardsPreviewVBox" alignItems="Center" class="sapUiMediumMarginBottom"><w:Card id="copyCardPreview" manifest="{copyCardView>/previewDescriptor}" parameters="{copyCardView>params}" width="17rem" height="23.5rem"/><HBox id="insightsCopyOverflowLayer" class="sapMFlexBoxJustifyCenter" height="0" visible="{= ${copyCardView>descriptorContent/sap.card/type}  === \'Analytical\' ? false : true}"><HBox  id="insightsCopyOverflowInnerHBox" class="insightsCardOverflowLayer insightsCardOverflowTop insightsPreviewOverLaySize"/></HBox></VBox></VBox></FlexBox></Page></mvc:View>',
	"sap/insights/houseOfCards/HouseOfCardsDialog.view.xml":'<mvc:View displayBlock="true"  height="100%" controllerName="sap.insights.houseOfCards.HouseOfCards" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:l="sap.ui.layout"\n    xmlns:f="sap.f"\n    xmlns:w="sap.ui.integration.widgets"\n    xmlns:grid="sap.ui.layout.cssgrid"><Page id="insightHouseOfCardPage"  title="{i18n>INT_PREVIEW_POPOVER_BUTTON_TITLE}" titleLevel="H1" showHeader="true" showSubHeader="true" backgroundDesign="List" enableScrolling="false" showNavButton="{= ${configureView>/bCalledInternally} ? true : false}" navButtonPress=".onNavBack(${configureView>/})" ><headerContent><Button text="{i18n>INT_DIALOG_CardPreview}"\n            press="._callPreview(${hocModel>/oSelected})"  visible="{=  (!${hocModel>/bDesktop} &amp;&amp; !${hocModel>/bShowPreview}) ? true : false}" /><Button text="{i18n>INT_DIALOG_HidePreview}"\n              press="._callClosePreview(${hocModel>/oSelected})" visible="{=  (!${hocModel>/bDesktop} &amp;&amp; ${hocModel>/bShowPreview}) ? true : false}" /></headerContent><content><VBox id="hocbox1" height="100%"  width="100%" direction="Row" justifyContent="SpaceBetween"><FlexBox  id="hocflexbox1" height="100%" width="{= (${hocModel>/bShowPreview}  &amp;&amp; ${hocModel>/bDesktop}) ? \'62%\' : \'100%\'}"  direction="Column"  justifyContent="Center"><FlexBox id="cardContainerFlex" renderType="Bare" height="{= (!${hocModel>/bDesktop} &amp;&amp; !${hocModel>/bShowPreview}) ? \'4rem\' : \'100%\'}" visible="{= ${hocModel>/bDesktop} || (!${hocModel>/bDesktop} &amp;&amp; !${hocModel>/bShowPreview}) ? true : false}" direction="Column"><VBox id="chartSelectVBox" direction="Column"  class="sapUiSmallMarginBegin" visible="{= ${hocModel>/bDesktop} || (!${hocModel>/bDesktop} &amp;&amp; !${hocModel>/bShowPreview}) ? true : false}"><Title id="previewChartInfoTitle" text="{i18n>INT_CHART_TITLE}" level="H4" class="sapUiSmallMarginTop"/><Text id="previewChartInfoSubTitle" text="{i18n>INT_CHART_SUBTITLE}" /></VBox><FlexBox  id="hocflexbox3" height="calc(100% - 4rem)" width="100%" visible="{= ${hocModel>/bDesktop} ? true : false}" direction="Column" renderType="Bare"><ComboBox id="hocChartCombo" ariaLabelledBy="previewChartInfoTitle previewChartInfoSubTitle hocChartCombo" items="{path: \'hocModel>/aPreviewCards\'}" class="sapUiSmallMarginBegin sapUiTinyMarginTopBottom" maxWidth="33%" selectionChange="selectionChange"><core:Item id="hocChartComboItem" key="{hocModel>sap.card/content/chartType}" text="{parts: [ {path: \'hocModel>sap.card/content/chartType\'}, {value: \'title\'}], formatter: \'.setChartDetail\'}"/></ComboBox><ScrollContainer id="idHoCScrollContainer" vertical="true" horizontal="false" height="100%" width="100%"><VBox id="CardContainer" fitContainer="true" alignItems="Start" justifyContent="Start" renderType="Bare" alignContent="Start" wrap="Wrap"  width="100%" direction="Row"  items="{path: \'hocModel>/aPreviewCards\'}"><w:Card id="insightsCard" width="17rem" height="29.5rem" manifest="{= ${hocModel>}}" host="HouseOfCardsHost" class="sapUiSmallMarginBegin sapUiTinyMarginTopBottom" manifestReady="onCardRender"/></VBox></ScrollContainer></FlexBox></FlexBox><FlexBox id="panelFlexCard" width="100%" height="calc(100% - 3rem)" visible="{= !${hocModel>/bDesktop} ? true : false}" direction="Column" renderType="Bare"><FlexBox  height="100%"  width="100%" id="previewPanelCardContainer" visible="{= (!${hocModel>/bDesktop} &amp;&amp; !${hocModel>/bShowPreview}) ? true : false}" direction="Column" renderType="Bare" ><SearchField id="chartTypeSearch" ariaLabelledBy="previewChartInfoTitle previewChartInfoSubTitle chartTypeSearch" placeholder="{i18n>INT_CHART_SEARCH}" width="90%" class="sapUiSmallMarginBegin"  liveChange=".onChartTypeSearch"/><ScrollContainer id="insightsCardsTypeScroll" vertical="true" horizontal="false" height="94%" width="100%" class="sapUiTinyMarginTop"><Table id="insightsCardsTypeTable" width="90%" fixedLayout="true"\tmode="SingleSelectMaster"  itemPress="onChartTypePress" class="sapContrastPlus sapUiSmallMarginBeginEnd" items="{path: \'hocModel>/aPreviewCards\'}"><columns><Column id="chartIconColumn" hAlign="Center" width="{= ${hocModel>/bDesktop} ? \'10%\' : \'20%\'}"/><Column id="chartTypeNameColumn" width="{= ${hocModel>/bDesktop} ? \'90%\' : \'80%\'}"/></columns><items><ColumnListItem id="typeListItem"  type="Active" selected="{= ${hocModel>sap.card/content/chartType} ===   ${hocModel>/oSelected/sap.card/content/chartType} ? true : false}"><cells ><HBox class="sapUiNoPadding"><core:Icon id="chartIcon"  src="{parts: [ {path: \'hocModel>sap.card/content/chartType\'}, {value: \'icon\'}], formatter: \'.setChartDetail\'}"/></HBox></cells><cells><ObjectIdentifier id="chartTypeName" title="{parts: [ {path: \'hocModel>sap.card/content/chartType\'}, {value: \'title\'}], formatter: \'.setChartDetail\'}" class="sapUiNoPadding" tooltip="{hocModel>sap.card/content/chartType}"/></cells></ColumnListItem></items></Table></ScrollContainer></FlexBox><FlexBox id="panelFlexHoC" height="100%" width="100%" visible="{= (!${hocModel>/bDesktop} &amp;&amp; ${hocModel>/bShowPreview}) ? true : false}" renderType="Bare" justifyContent="Center"><ScrollContainer id="hoCCardsScrollSD" vertical="true" horizontal="false" height="100%" ><VBox height="100%" id="previewCardHoCVBox" width="100%" visible="{= (!${hocModel>/bDesktop} &amp;&amp; ${hocModel>/bShowPreview}) ? true : false}"  alignItems="Center" backgroundDesign="Solid" class="sapUiSmallMarginTop sapUiTinyMarginBottom"><w:Card id="previewCardHoCSD" manifest="{hocModel>/oSelected}" width="19rem" height="33rem" class="sapUiTinyMarginBeginEnd"/></VBox></ScrollContainer></FlexBox></FlexBox></FlexBox><FlexBox id="hocflexbox2" direction="Column" width="38%" height="100%" visible="{= (${hocModel>/bDesktop}) ? true : false}" class="sapMPageBgStandard" renderType="Bare" fitContainer="true"><ScrollContainer id="hoCCardsScroll" vertical="true" horizontal="false" height="100%"><Panel id="hocPreviewPanelContainer" expanded="false" height="100%"  backgroundDesign="Transparent"><headerToolbar  ><Toolbar id="hocPreviewToolBar" width="100%" height="2.7rem" style="Clear" design="Auto" class="sapThemeBaseBG"><HBox id="hocPreviewCardTextHBox"  width="100%" justifyContent="Start" backgroundDesign="Transparent"><Title id="hocInsightPreviewCardText" text="{i18n>INT_DIALOG_TITLE_CardPreview}" class="sapUiTinyMarginTop" textAlign="Left" /></HBox></Toolbar></headerToolbar><VBox height="calc(100% - 2.8rem)" id="hocCardsPreviewVBox1"  alignItems="Center" backgroundDesign="Transparent" justifyContent="SpaceAround"  ><w:Card id="previewCardHoC" manifest="{ path: \'hocModel>/oSelected\', mode: \'TwoWay\' }" host="HouseOfCardsHost" width="19rem" height="33rem" /></VBox></Panel></ScrollContainer></FlexBox></VBox></content></Page></mvc:View>',
	"sap/insights/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.insights","type":"library","embeds":[],"applicationVersion":{"version":"1.115.0"},"title":"SAP UI library: sap.insights","description":"SAP UI library: sap.insights","ach":"CA-FLP-EXT-INS","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.115","libs":{"sap.ui.core":{"minVersion":"1.115.0"},"sap.viz":{"minVersion":"1.115.0","lazy":true},"sap.m":{"minVersion":"1.115.0","lazy":true},"sap.ui.integration":{"minVersion":"1.115.0","lazy":true},"sap.f":{"minVersion":"1.115.0","lazy":true},"sap.ui.layout":{"minVersion":"1.115.0","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}',
	"sap/insights/preview/Preview.view.xml":'<mvc:View displayBlock="true" controllerName="sap.insights.preview.Preview" xmlns="sap.m" xmlns:w="sap.ui.integration.widgets"  xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"  xmlns:form="sap.ui.layout.form" id="previewView"><Dialog id="previewDialog" resizable="false" contentHeight="42.8rem" contentWidth="65.6rem" draggable="true" showHeader="false"><content><Page id="insightCardPreviewPage" title="{i18n>INT_PREVIEW_POPOVER_BUTTON_TITLE}"  titleLevel="H1" class="sapMPageBgStandard" showHeader="true" showSubHeader="true" backgroundDesign="List" enableScrolling="false"><headerContent><Button\n                text="{i18n>INT_DIALOG_CardPreview}"\n                press="._callPreview(${cardPreviewModel>/oConfCard})" visible="{= (!${cardPreviewModel>/bDesktop} &amp;&amp; !${cardPreviewModel>/bShowCardPreview}) ? true : false}" enabled="true"/><Button\n                text="{i18n>INT_DIALOG_HidePreview}"\n                press="._callClosePreview(${cardPreviewModel>/oConfCard})" visible="{= (${cardPreviewModel>/bShowCardPreview} &amp;&amp; !${cardPreviewModel>/bDesktop})  ? true : false}" enabled="true"/></headerContent><content><VBox id="defaultVBox" height="100%"  width="100%" direction="Row" justifyContent="SpaceBetween"><FlexBox  id="defaultFlexBox" height="100%" width="{= ( ${cardPreviewModel>/bDesktop} &amp;&amp; (${cardPreviewModel>/oConfCard/sap.card/type} === \'Analytical\')) ? \'62%\' : \'100%\'}"  direction="Column"><VBox id="defaultInfoVBox" direction="Column"  class="sapUiSmallMarginBegin" visible="{= (${cardPreviewModel>/bDesktop} ||  (!${cardPreviewModel>/bDesktop} &amp;&amp; !${cardPreviewModel>/bShowCardPreview})) ? true : false}"><Title id="defaultTitle" text="{i18n>INT_CARD_TITLEINFO}" level="H4" class="sapUiSmallMarginTop"/><Text id="defaultSubText" text="{i18n>INT_CARD_SUBTITLE}" /></VBox><VBox  id="defaultPreviewFormFlex" height="100%" width="100%" visible="{= (${cardPreviewModel>/bDesktop} ||  (!${cardPreviewModel>/bDesktop} &amp;&amp; !${cardPreviewModel>/bShowCardPreview})) ? true : false}" ><form:SimpleForm id="defaultPreviewForm" width="100%" layout="ResponsiveGridLayout" editable="true" adjustLabelSpan="true"><Label id="labelTitle" class="sapUiTinyMarginTop" text="{i18n>INT_Preview_CARDTITLE}"  required="true" labelFor="titleTextInput"/><Input id="titleTextInput" ariaLabelledBy="defaultTitle defaultSubText labelTitle" change=".handleTitleChange" value="{cardPreviewModel>/oConfCard/sap.card/header/title}"/><Label id="labelSubTitle" text="{i18n>INT_Preview_SubTitleTitleField_Label}" class="sapUiTinyMarginTop" labelFor="subTitleTextInput"/><Input id="subTitleTextInput" change=".handleSubTitleChange" value="{cardPreviewModel>/oConfCard/sap.card/header/subTitle}"/></form:SimpleForm></VBox><FlexBox id="defaultPreviewFlexBox" height="100%" width="100%" visible="{= (!${cardPreviewModel>/bDesktop} &amp;&amp; ${cardPreviewModel>/bShowCardPreview}) ? true : false}" justifyContent="Center" ><ScrollContainer id="defaultPreviewScrollSD" vertical="true" horizontal="false" height="100%" ><VBox height="100%" id="defaultPreviewCardVBox" width="100%" alignItems="Center" backgroundDesign="Transparent" justifyContent="SpaceAround" class="sapUiSmallMarginTop sapUiTinyMarginBottom"><w:Card id="defaultPreviewCardSD" manifest="{cardPreviewModel>/oConfCard}"  manifestApplied="._onCardManifestApplied($event)" width="19rem" height="33rem" class="sapUiTinyMarginBeginEnd" /><HBox id="insightsPreviewOverflowLayerSD" class="sapMFlexBoxJustifyCenter" height="0" visible="{= ${cardPreviewModel>/oConfCard/sap.card/type}  === \'Analytical\' ? false : true}"><HBox id="insightsPreviewOverflowInnerHBoxSD" class="insightsCardOverflowLayer insightsPreviewCardOverLay insightsPreviewOVPOverLayPositionSD"/></HBox></VBox></ScrollContainer></FlexBox></FlexBox><FlexBox id="defaultPreviewFlex" direction="Column" width="38%" height="100%" visible="{= (${cardPreviewModel>/bDesktop}) ? true : false}" class="sapMPageBgStandard"  renderType="Bare"><ScrollContainer id="defaultPreviewScroll" vertical="true" horizontal="false" height="100%"><Toolbar id="defaultPreviewToolBar" width="100%" height="2.7rem" style="Clear" design="Auto" class="sapThemeBaseBG"><HBox id="defaultPreviewHBox"  width="100%" class="sapUiTinyMarginBegin" justifyContent="Start" backgroundDesign="Transparent"><Title id="defaultPreviewCardText" text="{i18n>INT_DIALOG_TITLE_CardPreview}" class="sapUiTinyMarginTop" textAlign="Left"/></HBox></Toolbar><FlexBox id="defaultPreviewPanelFlex" height="calc(100% - 2.8rem)" backgroundDesign="Transparent" justifyContent="Center"><Panel id="defaultPreviewPanel" expanded="false" height="100%"   backgroundDesign="Transparent"><VBox id="defaultPreviewVBox" height="100%" alignItems="Center" backgroundDesign="Transparent" justifyContent="SpaceAround" ><w:Card id="defaultPreviewCardLS" manifest="{cardPreviewModel>/oConfCard}" width="19rem" height="33rem" manifestApplied="._onCardManifestApplied($event)"/><HBox id="insightsCardOverflowLayer" class="sapMFlexBoxJustifyCenter" height="0" visible="{= ${cardPreviewModel>/oConfCard/sap.card/type}  === \'Analytical\' ? false : true}"><HBox id="insightsCardOverflowInnerHBox" class="insightsCardOverflowLayer insightsPreviewCardOverLay insightsPreviewOVPOverLayPositionLS"/></HBox></VBox></Panel></FlexBox></ScrollContainer></FlexBox></VBox></content></Page></content><buttons><Button text="{i18n>INT_DIALOG_Ok}" id="addPreviewCard" type="Emphasized" press=".save" enabled="{= ${cardPreviewModel>/bAddButton} ? true : false}"/><Button text="{i18n>INT_DIALOG_CANCEL}"  id="cancelCardCreate" press=".cancel" /></buttons></Dialog></mvc:View>',
	"sap/insights/selection/CardList.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns:l="sap.ui.layout"\n    xmlns:f="sap.f"\n    xmlns:w="sap.ui.integration.widgets"><Page id="insightCardPage" showHeader="false" backgroundDesign="List" enableScrolling="false"><FlexBox id="flexContainerCardsContent" class="flexContainerCards" alignItems="Start" justifyContent="Start" height="100%" width="100%" direction="Column"><VBox id="insightCardMessageVBox" alignItems="Start" width="calc(100% - 2rem)" class="sapUiSmallMarginTop sapUiSmallMarginBegin" visible="{= ${view>/cardCount} === 0 ? false : true}"><MessageStrip id="insightMaxCardMsg" text="{i18n>insightMaxCardText}" type="Warning" showIcon="true" visible="{= ${view>/visibleCardCount} &gt; 9 ? true : false}"/><Text id="insightCardText" text="{i18n>insightCardTabText}" class="sapUiSmallMarginTop" textAlign="Begin"  width="100%" visible="{= (${view>/visibleCardCount} &lt; 10 &amp;&amp; ${view>/cards/length} &gt; 0) ? true : false}"/><HBox id="insightCardMessageHBox" class="sapUiTinyMarginTop" alignItems="Center" visible="{= ${view>/deleteAllEnabled} ? true : ${view>/DTCards/length} &gt; 0}"><Text id="insightsRefreshText" text="{i18n>refreshText}" /><Button\n                        id="insightsRefreshIcon"\n                        tooltip="{i18n>refresh}"\n                        icon="sap-icon://refresh"\n                        type="Transparent"\n                        press="refreshCardList" /></HBox></VBox><VBox id="insightCardTitleVBox" width="calc(100% - 2rem)" class="sapUiSmallMarginTop sapUiSmallMarginBegin" visible="{= ${view>/cardCount} === 0 ? false : true}"><Title id="availableInsightsCardsTitle" text="{i18n>availableCards} ({view>/visibleCardCount}/{view>/cardCount})" titleStyle="H5"/><SearchField ariaLabelledBy="availableInsightsCardsTitle" id="editInsightsSearch" liveChange=".onCardSearch" width="100%"/></VBox><FlexBox id="editInsightsCardsFlex" class="sapUiSmallMarginBegin sapUiSmallMarginTop flexContainerCards" alignItems="Start" justifyContent="Start" height="100%" width="calc(100% - 2rem)" direction="Row" visible="{= ${view>/cardCount} === 0 ? false : true}"><VBox id="insightsCardsVBox" height="100%" width="100%" justifyContent="Start" direction="Column"><ScrollContainer id="idCardsScrollContainer" vertical="true" horizontal="false" height="100%" width="100%"><Table id="insightsCardsListTable" class="sapContrastPlus" items="{path: \'view>/cards\'}"><columns><Column id="idTableCheckBoxColumn" hAlign="Center" width="14%"/><Column id="idSectionTitleColumn" width="86%"/></columns><dragDropConfig><dnd:DragInfo\n                                    id="idCardsDragInfo"\n                                    groupName="editInsightCards"\n                                    sourceAggregation="items" /><dnd:DropInfo\n                                    id="idCardsDropInfo"\n                                    groupName="editInsightCards"\n                                    targetAggregation="items"\n                                    dropPosition="On"\n                                    drop=".onEditInsightCardsDrop" /></dragDropConfig><items><ColumnListItem id="idCardsListItem" press=".handleCardListItemPress" class="insightsListItem insightsListMargin" type="Navigation"><cells><HBox><core:Icon id="editInsightsCardsDnDIcon" src="sap-icon://BusinessSuiteInAppSymbols/icon-grip" class="insightsDndIcon" /><CheckBox id="idSectionsSelect" selected="{view>visibility}" blocked="{= !${view>visibility} &amp;&amp; ${view>/visibleCardCount} === 10 ? true : false}" select=".handleCardVisibilityToggle" class="layoutCheckbox"  /></HBox></cells><cells><VBox id="idInsightsTilesVBox"><Link id="idCardTitle" text="{view>descriptorContent/sap.card/header/title}" wrapping="true" press=".showCardPreviewPopover"/><HBox id="textHBox" visible="{= ${view>descriptorContent/sap.card/header/subTitle} ? true : false }"><Text text="{view>descriptorContent/sap.card/header/subTitle}"/></HBox></VBox></cells></ColumnListItem></items></Table></ScrollContainer></VBox></FlexBox><ScrollContainer id="idNoInsightsCardsScrollContainer" visible="{= ${view>/cardCount} === 0 ? true : false}" vertical="true" horizontal="false" height="100%" width="100%"><f:IllustratedMessage id="editInsightNoInsightsCardsMsg" class="sapFIllustratedMessageAlign sapFFrequentIllustratedMessageAlign sapUiMargin-24Top" illustrationSize="Auto" illustrationType="sapIllus-SimpleEmptyList" title="{i18n>editInsightsEmptyCardTitle}" description="{i18n>editInsightsEmptyCardSubTitle}"/></ScrollContainer></FlexBox></Page></core:FragmentDefinition>',
	"sap/insights/selection/CardPreview.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:l="sap.ui.layout"\n    xmlns:f="sap.f"\n    xmlns:w="sap.ui.integration.widgets"><FlexBox id="idCardsPreviewFlex" height="100%" direction="Column" class="sapUiTinyMarginBegin"><ScrollContainer id="idCardsPreviewContainer" vertical="true" horizontal="false" height="100%"><VBox id="idPreviewTitleVBox" height="100%" width="100%"><Title id="previewTitle" text="{i18n>preview}" titleStyle="H4" class="sapUiSmallMargin" /><VBox id="idCardsPreviewVBox" alignItems="Center" justifyContent="Center"><w:Card id="previewCard" manifest="{view>/previewDescriptor}" width="17rem" height="23.5rem" visible="{= ${view>/cards/length} === 0 ? false : true}" host="ManageCardHost" manifestReady=".setCopyVisible()"/><HBox id="insightsPreviewOverflowLayer" class="sapMFlexBoxJustifyCenter" height="0" visible="{= ${view>descriptorContent/sap.card/type}  === \'Analytical\' ? false : true}"><HBox id="insightsPreviewOverflowInnerHBox" class="insightsCardOverflowLayer insightsCardOverflowTop insightsPreviewOverLaySize"/></HBox></VBox><FlexBox id="smartForm" class="sapUiTinyMarginTop" justifyContent="Center" direction="Column" visible="{= ${view>/showFilterBy}}"/><HBox id="otherSectionHBox" direction="Column" visible="{view>/parentAppsectionVisible}"><VBox id="otherSectionTitleVBox" width="100%"><Title id="otherSectionTitle" text="{i18n>otherSectionTitle}" titleStyle="H5" class="sapUiSmallMargin" /></VBox><l:Grid\n                        id="parentAppLinkGrid"\n                        width="100%"\n                        vSpacing="0"\n                        hSpacing="1"\n                        position="Left"\n                        defaultSpan="XL6 L6 M4 S6"\n                        defaultIndent="XL0 L0 M0 S0"><VBox id="parentAppLabelVBox" width="100%" alignItems="End" class="sapUiSmallMarginEnd"><Label id="parentAppLabel" text="{i18n>parentApp}" /></VBox><VBox id="parentAppLinkVBox" width="100%"><Link id="parentAppLink" text="{view>/parentAppTitle}" ariaLabelledBy="parentAppLabel parentAppLink" wrapping="true" press=".navigateToParentApp"/></VBox></l:Grid></HBox></VBox><VBox></VBox></ScrollContainer></FlexBox></core:FragmentDefinition>',
	"sap/insights/selection/Selection.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns:l="sap.ui.layout"\n    xmlns:f="sap.f"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:w="sap.ui.integration.widgets"><NavContainer id="selectionNavCon"><core:Fragment fragmentName="sap.insights.selection.CardList" type="XML" /><Page id="previewPage" showNavButton="true" navButtonPress="onNavBack" backgroundDesign="Transparent" title="{view>/selectedCardTitle}"><headerContent><VBox direction="Row"><Button\n                            class="sapUiTinyMarginEnd"\n                            text="{i18n>delete}"\n                            press=".handleCardDeleteConfirm"/><Button\n                            text="{i18n>copy}"\n                            press=".navigateToCopyCard" visible="{= (${view>/showCopyButton} &amp;&amp; !${cardSelectionModel>/selectionDialogOpen}) ? true : false}"/></VBox></headerContent><core:Fragment fragmentName="sap.insights.selection.CardPreview" type="XML" /></Page><mvc:XMLView viewName="sap.insights.copy.Copy" id="insightsCopyCardView" /></NavContainer></core:FragmentDefinition>',
	"sap/insights/selection/Selection.view.xml":'<mvc:View displayBlock="true" controllerName="sap.insights.selection.Selection" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"><core:Fragment fragmentName="sap.insights.selection.Selection" type="XML" /></mvc:View>',
	"sap/insights/selection/SelectionDialog.view.xml":'<mvc:View displayBlock="true" controllerName="sap.insights.selection.Selection" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"><Dialog id="insightsSelectionDialog" title="{i18n>CARD_SELECTION_DIALOG_HEADER}" contentHeight="65rem" contentWidth="32rem" verticalScrolling="false" class="sapContrastPlus" resizable="false" draggable="true"><content><core:Fragment fragmentName="sap.insights.selection.Selection" type="XML" /></content><buttons><Button id="idSectionsCancelBtn" text="{i18n>INT_DIALOG_Close}" type="Transparent" press=".closeDialog" /></buttons></Dialog></mvc:View>',
	"sap/insights/selection/cardPreviewPopover.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n    xmlns:w="sap.ui.integration.widgets"><Popover id="idCardPreviewPopover" class="sapContrastPlus previewPopoverBackground" title="{i18n>preview}" placement="VerticalPreferredBottom" initialFocus="idCardPreviewPopover" showHeader="true"><VBox id="idPreviewCardsVBox" alignItems="Center" justifyContent="Center" class="sapUiSmallMargin"><w:Card id="previewCards" host="ManageCardHost" manifest="{view>/previewDescriptor}" width="17rem" height="23.5rem" /><HBox id="insightsPreviewPopoverOverflowLayer" class="sapMFlexBoxJustifyCenter" height="0" visible="{= ${view>descriptorContent/sap.card/type}  === \'Analytical\' ? false : true}"><HBox id="insightsPreviewPopoverOverflowInnerHBox" class="insightsCardOverflowLayer insightsCardOverflowTop insightsPreviewOverLaySize"/></HBox></VBox></Popover></core:FragmentDefinition>'
});
//# sourceMappingURL=library-preload.js.map
