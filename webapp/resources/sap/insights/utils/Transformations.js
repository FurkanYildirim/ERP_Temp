/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/base/BindingParser"],function(e){var r=function(r){var a=e.complexParser(r);return a.path||a.parts&&a.parts[0].path};var a={bar_series:["bar","column","line","bullet","stacked_bar","stacked_column","vertical_bullet","100_stacked_bar","100_stacked_column","waterfall","horizontal_waterfall","area","radar"],pie_series:["pie","donut"]};var t={bar_series:a["bar_series"].concat("combination","stacked_combination","horizontal_stacked_combination"),pie_series:a["pie_series"],dual_series:["dual_bar","dual_column","dual_line","dual_stacked_bar","dual_stacked_column","dual_combination","dual_horizontal_combination","dual_stacked_combination","dual_horizontal_stacked_combination","100_dual_stacked_bar","100_dual_stacked_column"],scatter_series:["scatter"],heatmap_series:["heatmap"],bubble_series:["bubble"]};var n=function(e){var r=e.content.measures.length;return r>1?t:a};var i=function(e,r){var a=null;var t=Object.keys(r);t.forEach(function(t){if(r[t].includes(e)){a=t}});return a};var s=function(e,r){var a=[];r.forEach(function(r){var t=JSON.parse(e);var n=t["sap.card"];var i=n.content;i.chartType=r;a.push(t)});return a};var u=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=false}n.feeds=[{uid:"categoryAxis",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})},{uid:"valueAxis",type:"Measure",values:n.measures.map(function(e){return e.label||e.name})}];return s(JSON.stringify(a),r)};var l=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=true}n.feeds=[{uid:"size",type:"Measure",values:n.measures.map(function(e){return e.label||e.name})},{uid:"color",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})}];return s(JSON.stringify(a),r)};var c=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=false}n.feeds=[{uid:"categoryAxis",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})}].concat(n.measures.map(function(e,r){return{uid:"valueAxis"+(r===0?"":r+1),type:"Measure",values:[e.label||e.name]}}));return s(JSON.stringify(a),r)};var o=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=false}n.feeds=[{uid:"color",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})}].concat(n.measures.map(function(e,r){var a="valueAxis";if(r!==0){if(r===1){a="valueAxis2"}else{if(r!==n.measures.length-1){a=a+(r+1)}if(r===n.measures.length-1){a="bubbleWidth"}}}return{uid:a,type:"Measure",values:[e.label||e.name]}}));return s(JSON.stringify(a),r)};var d=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=true}n.feeds=[{uid:"color",type:"Measure",values:[n.measures[0].name||n.measures[0].label]},{uid:"categoryAxis",type:"Dimension",values:n.dimensions.map(function(e){return e.name||e.label})}];return s(JSON.stringify(a),r)};var p=function(e,r){var a=JSON.parse(e);var t=a["sap.card"];var n=t.content;if(n.measures.length<3){return null}if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=true}n.feeds=[{uid:"color",type:"Dimension",values:[n.dimensions[0].name||n.dimensions[0].label]},{uid:"valueAxis",type:"Measure",values:[n.measures[0].name||n.measures[0].label]},{uid:"valueAxis2",type:"Measure",values:[n.measures[1].name||n.measures[1].label]},{uid:"bubbleWidth",type:"Measure",values:[n.measures[2].name||n.measures[2].label]}];return s(JSON.stringify(a),r)};var f=function(e,r,a){switch(r){case"bar_series":return u(e,a);case"pie_series":return l(e,a);case"dual_series":return c(e,a);case"scatter_series":return o(e,a);case"heatmap_series":return d(e,a);case"bubble_series":return p(e,a);default:return null}};function v(e,r){var a=n(e["sap.card"]);var t=e["sap.card"].content.chartType;var u=JSON.stringify(e);var l=[];var c=Object.keys(a);if(r&&Array.isArray(r)&&r.length){r.forEach(function(e){var r=i(e,a);if(r){l=l.concat(f(u,r,[e]))}else{l.push(null)}})}else{e["sap.card"].data.request["timeout"]=1e5;c.forEach(function(e){var r=a[e];if(r.includes(t)){l=l.concat(s(u,r))}else{l=l.concat(f(u,e,r))}})}return l}var m=[function e(r){return r},function e(r){var a=r["sap.card"].content.item;if(a.chart){if(!a.info&&a.chart.displayValue){a.info={value:a.chart.displayValue};if(a.chart.color){a.info.state=a.chart.color}}delete a.chart;return r}return null},function e(r){var a=r["sap.card"].content.item;if(a.info){delete a.info;return r}return null},function e(r){var a=r["sap.card"].content.item;if(a.attributes&&a.attributes.length>0){delete a.attributes;delete a.attributesLayoutType;return r}return null},function e(a){var t=a["sap.card"].content.item;if(t.info){a["sap.card"].content.group={title:t.info.value,order:{path:r(t.info.value),dir:"DESC"}};delete t.info;return a}return null},function e(a){var t=a["sap.card"].content.item;if(t.attributes&&t.attributes.length>0){a["sap.card"].content.group={title:t.attributes[0].value,order:{path:r(t.attributes[0].value),dir:"DESC"}};delete t.attributes;delete t.attributesLayoutType;return a}return null},function e(r){var a=r["sap.card"].content;var t=a.item;var n=[];var i=[];if(t.title){n.push({value:t.title})}if(t.actions&&t.actions.length){i=i.concat(t.actions)}if(t.chart&&t.chart.displayValue){n.push({value:t.chart.displayValue});if(t.chart.color){n[n.length-1].state=t.chart.color}}if(t.attributes&&t.attributes.length>0){n=n.concat(t.attributes)}if(t.info){n.push(t.info)}if(n.length>0){a.row={columns:n};if(i.length>0){a.row["actions"]=i}delete a.item;r["sap.card"].type="Table";return r}return null}];function b(e,r){var a=JSON.stringify(e);return r.map(function(e){var r=JSON.parse(a);return e(r)})}function h(e){return b(e,m)}var _=[function e(r){return r},function e(r){var a=r["sap.card"].content;var t={attributesLayoutType:"OneColumn"};var n=a.row.columns||[];if(n.length>0){n.forEach(function(e,r){t.attributes=t.attributes||[];t.attributes.push(e)});if(a.row.actions&&a.row.actions.length){t["actions"]=a.row.actions}r["sap.card"].type="List";a.item=t;delete a.row;return r}return null}];function y(e){return b(e,_)}var g=[function e(r){var a=r["sap.card"].content;var t=a.data;var n=a.dimensions||[];var i=a.measures||[];var s=n.map(function(e){return{title:e.label,value:e.displayValue||e.value}});s=s.concat(i.map(function(e){return{title:e.label,value:e.value}}));if(s.length>0){r["sap.card"].type="Table";r["sap.card"].content={data:t,row:{columns:s}};return r}return null}];function O(e){return b(e,g)}return{transformAnalyticalManifest:v,createListOptions:h,createTableOptions:y,createChartToListOrTableOptions:O}});
//# sourceMappingURL=Transformations.js.map