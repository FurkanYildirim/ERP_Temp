{"version":3,"file":"ContextBasedAdaptationsAPI.js","names":["sap","ui","define","Adaptations","FeaturesAPI","FlexObjectFactory","ManifestUtils","FlexObjectState","Layer","LayerUtils","FlexUtils","FlexInfoSession","Storage","Versions","JSONModel","_mInstances","ContextBasedAdaptationsAPI","getFlexReferenceForControl","oControl","sReference","Error","handleResponseForVersioning","oResponse","nExpectedStatus","mPropertyBag","bDelete","updateModelFromBackend","reference","appId","layer","then","onAllChangesSaved","contextBasedAdaptation","Promise","resolve","initialize","reject","control","sLayer","bContextBasedAdaptationsEnabled","isContextBasedAdaptationAvailable","bContextBasedAdaptationsEnabledResponse","oAdaptationsPromise","load","adaptations","oAdaptations","oFlexInfoSession","get","oDisplayedAdaptation","adaptationId","find","oAdaptation","id","createModel","oModel","aAdaptations","Array","isArray","length","allAdaptations","count","displayedAdaptation","contextBasedAdaptationsEnabled","updateAdaptations","aContextBasedAdaptations","filter","oAdapation","iIndex","rank","type","Type","Default","setProperty","updateBindings","insertAdaptation","oNewAdaptation","getProperty","splice","priority","deleteAdaptation","iModelCount","sToBeDisplayedAdaptationId","oDefaultAdaptation","pop","push","switchDisplayedAdaptation","sAdaptationId","getIndexByAdaptationId","oNewDisplayedAdaptation","updateAdaptationContent","oContextBasedAdaptation","title","contexts","aDisplayedAdaptation","iAdaptationIndex","findIndex","undefined","getAdaptationsModel","hasAdaptationsModel","getDisplayedAdaptationId","this","adaptationExists","clearInstances","refreshAdaptationModel","getNewVariantId","mFileNames","sOldVariantId","copyVariants","aVariants","aCopiedFlexObjects","sContextBasedAdaptationId","forEach","oChange","oCopiedVariant","createFromFileContent","cloneFileContentWithNewId","sFileName","getId","setAdaptationId","set","copyChanges","aChanges","createDefaultFileName","split","oCopiedChange","getFileType","getSelector","variantId","getContent","defaultVariantName","getVariantReference","setVariantReference","defaultVariant","copyVariantsAndChanges","aFlexObjects","Map","oFlexObject","isA","map","convertToFileContent","getParentVersion","getVersionsModel","create","flexObject","parentVersion","bind","getFlexObjects","selector","invalidateCache","includeCtrlVariants","includeDirtyChanges","currentLayer","CUSTOMER","aCustomerFlexObjects","filterChangeOrChangeDefinitionsByCurrentLayer","aCopiedChanges","writeChange","flexObjects","transport","isLegacyVariant","update","reorder","parameters","priorities","version","remove"],"sources":["ContextBasedAdaptationsAPI-dbg.js"],"mappings":"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"}