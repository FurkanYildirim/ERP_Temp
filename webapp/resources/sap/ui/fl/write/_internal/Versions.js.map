{"version":3,"file":"Versions.js","names":["sap","ui","define","Settings","ChangePersistenceFactory","Storage","Version","JSONModel","BindingMode","_mInstances","MODEL_SIZE_LIMIT","BACKEND_REQUEST_LIMIT","createModel","bVersioningEnabled","aVersions","oModel","_prepareVersionsModel","setDefaultBindingMode","OneWay","setSizeLimit","setDirtyChanges","bDirtyChanges","setProperty","updateDraftVersion","updateBindings","getProperty","bBackendDraft","bDraftAvailable","Number","Draft","_doesDraftExistInVersions","splice","version","type","Type","filenames","isPublished","shift","bActivateEnabled","oVersionsModel","sPersistedBasisForDisplayedVersion","bPublishVersionEnabled","sActiveVersion","Original","aDraftFilenames","length","forEach","oVersion","Active","Inactive","publishVersionEnabled","versioningEnabled","versions","backendDraft","dirtyChanges","draftAvailable","activateEnabled","activeVersion","persistedVersion","displayedVersion","draftFilenames","_removeDirtyChanges","mPropertyBag","oDirtyChangeInfo","aDirtyChanges","aChangePersistences","changePersistences","oChangePersistence","getDirtyChanges","concat","oChange","deleteChange","_getDirtyChangesInfo","oDirtyChangesInfo","dirtyChangesExist","reference","oChangePersistenceForAppDescriptorChanges","getChangePersistenceForComponent","push","nonNormalizedReference","some","_updateVersionModelWhenDiscardOrActivate","iNewVersion","Versions","initialize","sReference","sLayer","layer","limit","getInstance","then","oSettings","bVersionsEnabled","isVersioningEnabled","aVersionsPromise","load","Promise","resolve","getVersionsModel","hasVersionsModel","Error","clearInstances","updateModelFromBackend","onAllChangesSaved","contextBasedAdaptation","activate","bDraftExists","reject","bDirtyChangesExists","oVersionEntry","discardDraft","bBackendDraftExists","oDiscardPromise","bDirtyChangesRemoved","backendChangesDiscarded","dirtyChangesDiscarded","publish","sMessage","bIsPublishedOrOlderVersion"],"sources":["Versions-dbg.js"],"mappings":";;;;;AAMAA,IAAIC,GAAGC,OAAO,CACb,8BACA,qCACA,oCACA,8BACA,8BACA,4BACE,SACFC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,aAEA,IAAIC,EAAc,CAAC,EACnB,IAAIC,EAAmB,EAGvB,IAAIC,EAAwBD,EAAmB,EAE/C,SAASE,EAAYC,EAAoBC,GACxC,IAAIC,EAASC,EAAsBH,EAAoBC,GAEvDC,EAAOE,sBAAsBT,EAAYU,QACzCH,EAAOI,aAAaT,GAEpBK,EAAOK,gBAAkB,SAAUC,GAClCN,EAAOO,YAAY,gBAAiBD,GACpCN,EAAOQ,qBACPR,EAAOS,eAAe,KACvB,EAEAT,EAAOQ,mBAAqB,WAC3B,IAAIT,EAAYC,EAAOU,YAAY,aACnC,IAAIZ,EAAqBE,EAAOU,YAAY,sBAC5C,IAAIJ,EAAgBN,EAAOU,YAAY,iBACvC,IAAIC,EAAgBX,EAAOU,YAAY,iBACvC,IAAIE,EAAkBd,IAAuBQ,GAAiBK,GAC9DX,EAAOO,YAAY,kBAAmBK,GAEtC,GAAIN,EAAe,CAClBN,EAAOO,YAAY,oBAAqBhB,EAAQsB,OAAOC,MACxD,CAGA,IAAKC,EAA0BhB,IAAca,EAAiB,CAC7Db,EAAUiB,OAAO,EAAG,EAAG,CAACC,QAAS1B,EAAQsB,OAAOC,MAAOI,KAAM3B,EAAQ4B,KAAKL,MAAOM,UAAW,GAAIC,YAAa,OAC9G,CAGA,GAAIN,EAA0BhB,KAAea,EAAiB,CAC7Db,EAAUuB,QACVtB,EAAOO,YAAY,oBAAqBP,EAAOU,YAAY,qBAC5D,CAEA,IAAIa,EAAmBvB,EAAOU,YAAY,uBAAyBV,EAAOU,YAAY,kBACtFV,EAAOO,YAAY,mBAAoBgB,EACxC,EAEA,OAAOvB,CACR,CAEA,SAASC,EAAsBH,EAAoBC,EAAWyB,GAC7D,IAAIC,EACJ,IAAIC,EAAyB,MAC7B,IAAIC,EAAiBpC,EAAQsB,OAAOe,SACpC,IAAIjB,EAAgBI,EAA0BhB,GAC9C,IAAI8B,EAAkB,GAEtB,GAAI9B,EAAU+B,OAAS,EAAG,CACzBL,EAAqC1B,EAAU,GAAGkB,OACnD,KAAO,CACNQ,EAAqClC,EAAQsB,OAAOe,QACrD,CAEA7B,EAAUgC,QAAQ,SAAUC,GAC3B,GAAIA,EAASf,UAAY1B,EAAQsB,OAAOC,MAAO,CAC9CkB,EAASd,KAAO3B,EAAQ4B,KAAKL,MAC7BkB,EAASX,YAAc,MACvBQ,EAAkBG,EAASZ,SAC5B,KAAO,CACN,GAAIO,IAAmBpC,EAAQsB,OAAOe,SAAU,CAE/CI,EAASd,KAAO3B,EAAQ4B,KAAKc,OAC7BN,EAAiBK,EAASf,OAC3B,KAAO,CACNe,EAASd,KAAO3B,EAAQ4B,KAAKe,QAC9B,CAGA,GAAKF,EAASf,UAAYQ,GAAwCO,EAASX,cAAgB,MAAQ,CAClGK,EAAyB,IAC1B,CACD,CACD,GAEA,GAAIF,EAAgB,CACnBA,EAAejB,YAAY,yBAA0BmB,GACrDF,EAAejB,YAAY,qBAAsBT,GACjD0B,EAAejB,YAAY,YAAaR,GACxCyB,EAAejB,YAAY,gBAAiBI,GAC5Ca,EAAejB,YAAY,gBAAiB,OAC5CiB,EAAejB,YAAY,kBAAmBI,GAC9Ca,EAAejB,YAAY,mBAAoBI,GAC/Ca,EAAejB,YAAY,iBAAkBoB,GAC7CH,EAAejB,YAAY,oBAAqBkB,GAChDD,EAAejB,YAAY,oBAAqBkB,GAChDD,EAAejB,YAAY,kBAAmBsB,GAC9CL,EAAef,eAAe,KAC/B,KAAO,CACNe,EAAiB,IAAIhC,EAAU,CAC9B2C,sBAAuBT,EACvBU,kBAAmBtC,EACnBuC,SAAUtC,EACVuC,aAAc3B,EACd4B,aAAc,MACdC,eAAgB7B,EAChB8B,gBAAiB9B,EACjB+B,cAAef,EACfgB,iBAAkBlB,EAClBmB,iBAAkBnB,EAClBoB,eAAgBhB,GAElB,CAEA,OAAOL,CACR,CAEA,SAASsB,EAAoBC,EAAcC,GAE1C,IAAIC,EAAgB,GACpB,IAAIC,EAAsBF,EAAiBG,mBAC3CD,EAAoBnB,QAAQ,SAAUqB,GACrCH,EAAgBG,EAAmBC,kBAAkBC,SACrDL,EAAclB,QAAQ,SAASwB,GAC9BH,EAAmBI,aAAaD,EAAS,KAC1C,EACD,GACA,OAAON,EAAcnB,OAAS,CAC/B,CAEA,SAAS2B,EAAqBV,GAC7B,IAAIW,EAAoB,CACvBC,kBAAmB,MACnBR,mBAAoB,IAGrB,GAAIJ,EAAaa,UAAW,CAC3B,IAAIC,EAA4CxE,EAAyByE,iCAAiCf,EAAaa,WACvH,GAAIC,EAA0CR,kBAAkBvB,OAAS,EAAG,CAC3E4B,EAAkBC,kBAAoB,KACtCD,EAAkBP,mBAAmBY,KAAKF,EAC3C,CACD,CACA,GAAId,EAAaiB,uBAAwB,CACxC,IAAIZ,EAAqB/D,EAAyByE,iCAAiCf,EAAaiB,wBAChG,GAAIZ,EAAmBC,kBAAkBvB,OAAS,EAAG,CACpD4B,EAAkBC,kBAAoB,KACtCD,EAAkBP,mBAAmBY,KAAKX,EAC3C,CACD,CACA,OAAOM,CACR,CAEA,SAAS3C,EAA0BhB,GAClC,OAAOA,EAAUkE,KAAK,SAASjC,GAC9B,OAAOA,EAASf,UAAY1B,EAAQsB,OAAOC,KAC5C,EACD,CAEA,SAASoD,EAAyClE,EAAQmE,GACzDnE,EAAOO,YAAY,gBAAiB,OACpCP,EAAOO,YAAY,gBAAiB,OACpCP,EAAOO,YAAY,kBAAmB,OACtCP,EAAOO,YAAY,mBAAoB,OACvCP,EAAOO,YAAY,oBAAqB4D,GACxCnE,EAAOO,YAAY,oBAAqB4D,GACxCnE,EAAOS,eAAe,KACvB,CAWA,IAAI2D,EAAW,CAAC,EAUhBA,EAASC,WAAa,SAAStB,GAC9B,IAAIuB,EAAavB,EAAaa,UAC9B,IAAIW,EAASxB,EAAayB,MAC1BzB,EAAa0B,MAAQ7E,EAErB,OAAOR,EAASsF,cACdC,KAAK,SAAUC,GACf,IAAIC,EAAmBD,EAAUE,oBAAoBP,GAErD,GAAI7E,GAAeA,EAAY4E,IAAe5E,EAAY4E,GAAYC,GAAS,CAC9E,OAAO7E,EAAY4E,GAAYC,EAChC,CACA,IAAIQ,EAAmBF,EAAmBvF,EAAQ+C,SAAS2C,KAAKjC,GAAgBkC,QAAQC,QAAQ,IAChG,OAAOH,EACLJ,KAAK,SAAU5E,GACf,OAAOF,EAAYgF,EAAkB9E,EACtC,GACC4E,KAAK,SAAU3E,GACfN,EAAY4E,GAAc5E,EAAY4E,IAAe,CAAC,EACtD5E,EAAY4E,GAAYC,GAAU7E,EAAY4E,GAAYC,IAAW,CAAC,EACtE7E,EAAY4E,GAAYC,GAAUvE,EAClC,OAAON,EAAY4E,GAAYC,EAChC,EACF,EACF,EAUAH,EAASe,iBAAmB,SAASpC,GACpC,IAAIuB,EAAavB,EAAaa,UAC9B,IAAIW,EAASxB,EAAayB,MAE1B,IAAKJ,EAASgB,iBAAiBrC,GAAe,CAC7C,MAAMsC,MAAM,iCAAmCf,EAAa,gBAAkBC,EAAS,0BACxF,CAEA,IAAIb,EAAoBD,EAAqBV,GAC7C,GAAIW,EAAkBC,kBAAmB,CACxCjE,EAAY4E,GAAYC,GAAQ/D,mBAAmBuC,EACpD,CACA,OAAOrD,EAAY4E,GAAYC,EAChC,EAEAH,EAASgB,iBAAmB,SAASrC,GACpC,IAAIuB,EAAavB,EAAaa,UAC9B,IAAIW,EAASxB,EAAayB,MAC1B,OAAO9E,EAAY4E,IAAe5E,EAAY4E,GAAYC,EAC3D,EAEAH,EAASkB,eAAiB,WACzB5F,EAAc,CAAC,CAChB,EAUA0E,EAASmB,uBAAyB,SAASxC,GAC1C,GAAIqB,EAASgB,iBAAiBrC,GAAe,CAC5CA,EAAa0B,MAAQ7E,EACrB,OAAON,EAAQ+C,SAAS2C,KAAKjC,GAC5B4B,KAAK,SAAU5E,GACf,IAAIyB,EAAiB4C,EAASe,iBAAiBpC,GAC/C,OAAO9C,EAAsBuB,EAAed,YAAY,sBAAuBX,EAAWyB,EAC3F,EACD,CACD,EAWA4C,EAASoB,kBAAoB,SAAUzC,GACtC,IAAI/C,EAASoE,EAASe,iBAAiBpC,GACvC,IAAIjD,EAAqBE,EAAOU,YAAY,sBAC5C,IAAIJ,EAAgBN,EAAOU,YAAY,iBACvC,IAAImB,EAAkB7B,EAAOU,YAAY,mBACzCV,EAAOO,YAAY,kBAAmBsB,EAAgByB,OAAOP,EAAaF,iBAC1E7C,EAAOO,YAAY,gBAAiB,MACpCP,EAAOO,YAAY,gBAAiBT,GAAsBQ,KAAmByC,EAAa0C,wBAC1FzF,EAAOQ,qBAEPR,EAAOO,YAAY,oBAAqBhB,EAAQsB,OAAOC,OACvDd,EAAOS,eAAe,KACvB,EAiBA2D,EAASsB,SAAW,SAAS3C,GAC5B,IAAI/C,EAASoE,EAASe,iBAAiBpC,GACvC,IAAIhD,EAAYC,EAAOU,YAAY,aACnC,IAAIiF,EAAe5E,EAA0BhB,GAC7C,IAAI4B,EAAiB3B,EAAOU,YAAY,kBACxC,GAAIqC,EAAaH,mBAAqBjB,EAAgB,CACrD,OAAOsD,QAAQW,OAAO,4BACvB,CACA7C,EAAa9B,QAAU8B,EAAaH,iBAEpC,IAAII,EAAmBS,EAAqBV,GAC5C,IAAIG,EAAsBF,EAAiBG,mBAC3C,IAAI0C,EAAsB3C,EAAoBe,KAAK,SAAUb,GAC5D,OAAOA,EAAmBC,kBAAkBvB,OAAS,CACtD,GAEA,GAAI+D,EAAqB,CACxB,OAAOZ,QAAQW,OAAO,yBACvB,CAEA,OAAOtG,EAAQ+C,SAASqD,SAAS3C,GAChC4B,KAAK,SAAU3C,GACfjC,EAAUgC,QAAQ,SAAU+D,GAC3BA,EAAc5E,KAAO3B,EAAQ4B,KAAKe,QACnC,GACAF,EAASd,KAAO3B,EAAQ4B,KAAKc,OAC7BD,EAASX,YAAc,MACvB,GAAIsE,EAAc,CACjB5F,EAAUuB,OACX,CACAvB,EAAUiB,OAAO,EAAG,EAAGgB,GACvBhC,EAAOO,YAAY,iBAAkByB,EAASf,SAC9CjB,EAAOO,YAAY,yBAA0B,MAC7CP,EAAOO,YAAY,kBAAmB,IACtC2D,EAAyClE,EAAQgC,EAASf,QAC3D,EACD,EAYAmD,EAAS2B,aAAe,SAAShD,GAChC,IAAI/C,EAASoE,EAASe,iBAAiBpC,GACvC,IAAIW,EAAoBD,EAAqBV,GAC7C,IAAIiD,EAAsBhG,EAAOU,YAAY,iBAC7C,IAAIuF,EAAkBD,EAAsB1G,EAAQ+C,SAAS0D,aAAahD,GAAgBkC,QAAQC,UAElG,OAAOe,EAAgBtB,KAAK,WAC3B,IAAI5E,EAAYC,EAAOU,YAAY,aACnCX,EAAUuB,QACV4C,EAAyClE,EAAQA,EAAOU,YAAY,mBAGpE,IAAIwF,EAAuBpD,EAAoBC,EAAcW,GAC7D,MAAO,CACNyC,wBAAyBH,EACzBI,sBAAuBF,EAEzB,EACD,EAaA9B,EAASiC,QAAU,SAAStD,GAC3B,IAAI/C,EAASoE,EAASe,iBAAiB,CACtCvB,UAAWb,EAAaa,UACxBY,MAAOzB,EAAayB,QAErB,OAAOlF,EAAQ+C,SAASgE,QAAQtD,GAC9B4B,KAAK,SAAU2B,GAEf,GAAIA,IAAa,SAAWA,IAAa,SAAU,CAClDtG,EAAOO,YAAY,yBAA0B,OAC7C,IAAIR,EAAYC,EAAOU,YAAY,aACnC,IAAI6F,EAA6B,MACjCxG,EAAUgC,QAAQ,SAAUC,GAC3B,GAAIA,EAASX,YAAa,CACzB,MACD,CACA,GAAIW,EAASf,UAAY8B,EAAa9B,QAAS,CAC9CsF,EAA6B,IAC9B,CACA,GAAIA,IAA+BvE,EAASX,YAAa,CACxDW,EAASX,YAAc,IACxB,CACD,EACD,CACA,OAAOiF,CACR,EACF,EAEA,OAAOlC,CACR"}