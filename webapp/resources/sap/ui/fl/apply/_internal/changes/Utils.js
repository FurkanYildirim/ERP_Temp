/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/Utils"],function(e,n,r){"use strict";function t(e,n){if(n||e.hasApplyProcessStarted()){return false}return true}var a={getControlIfTemplateAffected:function(e,n,r){var t=r.modifier;var a={originalControl:n};var i=e.getOriginalSelector();if(e.getContent().boundAggregation&&i){a.control=t.bySelector(i,r.appComponent,r.view);a.controlType=t.getControlType(a.control);a.bTemplateAffected=true}else{a.control=n;a.controlType=t.getControlType(n);a.bTemplateAffected=false}return a},getChangeHandler:function(e,t,a){var i=a.modifier.getLibraryName(t.control);return Promise.all([r.requireAsync("sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerRegistration"),i]).then(function(e){return e[0].waitForChangeHandlerRegistration(e[1])}).then(function(){var r=e.getChangeType();var i=e.getLayer();return n.getChangeHandler(r,t.controlType,t.control,a.modifier,i)})},checkIfDependencyIsStillValidSync:function(n,a,i,l){var o=r.getChangeFromChangesMap(i.mChanges,l);var c=a.bySelector(o.getSelector(),n);var g=e.sync.hasChangeApplyFinishedCustomData(c,o);return t(o,g)},checkIfDependencyIsStillValid:function(n,a,i,l){var o=r.getChangeFromChangesMap(i.mChanges,l);var c=a.bySelector(o.getSelector(),n);return e.hasChangeApplyFinishedCustomData(c,o,a).then(t.bind(null,o))},filterChangeByView:function(e,n){var r=e.modifier;var t=e.appComponent;var a=n.getSelector();if(!a){return false}if(a.viewSelector){var i=r.getControlIdBySelector(a.viewSelector,t);return i===e.viewId}var l=a.id;if(l){var o;if(n.getSelector().idIsLocal){if(t){o=t.getLocalId(e.viewId)}}else{o=e.viewId}var c=0;var g;do{c=l.indexOf("--",c);g=l.slice(0,c);c++}while(g!==o&&c>0);return g===o}return false}};return a});
//# sourceMappingURL=Utils.js.map