{"version":3,"file":"VariantManagementState.js","names":["sap","ui","define","_omit","_pick","ObjectPath","JsControlTreeModifier","VariantsApplyUtil","DataSelector","States","FlexState","LayerUtils","Utils","VariantManagementState","mCurrentVariantReferences","getInitialCurrentVariant","sReference","aCtrlVariantManagementChanges","aVariants","oComponentData","getComponentData","aVariantReferencesFromUrl","get","VARIANT_TECHNICAL_PARAMETER","aVariantIds","map","oVariant","getId","oDesiredSelectedVariantId","find","sVariantId","includes","reverse","oVariantManagementChange","getContent","defaultVariant","sDesiredDefaultVariantId","createVariantManagement","aFlexObjects","sVMReference","sCurrentVariantReference","aRelevantVariants","filter","oFlexObject","getVariantManagementReference","getFileType","getSelector","id","set","currentVariant","variants","variantManagementChanges","createVariantEntry","oVariantInstance","instance","variantChanges","controlChanges","bCorrectFlexObjectType","isA","bOwnControlChange","getVariantReference","bControlChangeOfReferencedVariant","bLowerLayerChange","compareAgainstCurrentLayer","getLayer","key","title","getName","layer","favorite","getFavorite","executeOnSelect","getExecuteOnSelection","visible","getVisible","author","getSupportInformation","user","contexts","getContexts","isStandardVariant","getStandardVariant","applyVariantChange","oVariantEntry","oVariantChange","oVariantManagementsMap","getChangeType","getText","Error","applyVariantManagementChange","oVariantManagementEntry","sDesiredDefaultVariant","some","createVariantsMap","forEach","push","findVariant","Object","values","oVariantManagement","sort","oVariant1","oVariant2","toLowerCase","aCurrentVariantChanges","modified","oChange","isPersisted","getSavedToVariant","oVariantsMap","oFoundVariant","oVariantsMapEntry","oVariantManagementMapDataSelector","parameterKey","parentDataSelector","getFlexObjectsDataSelector","executeFunction","oVariantManagementsDataSelector","oVariantsDataSelector","sVariantReference","resetCurrentVariantReferences","getVariantManagementMap","addFakeStandardVariant","sComponentId","oStandardVariantInstance","this","reference","addFakeStandardVariantToExternalData","clearFakeStandardVariants","resetFakeStandardVariants","getControlChangesForVariant","mPropertyBag","aResult","getVariant","includeDirtyChanges","getState","LifecycleState","PERSISTED","getVariantChangesForVariant","sVReference","vReference","variantManagementReference","vmReference","variantReference","getCurrentVariantReference","oVariantManagementSection","getVariantManagementReferences","keys","getInitialChanges","reduce","aInitialChanges","mArguments","assign","concat","setCurrentVariant","newVReference","checkUpdate","waitForInitialVariantChanges","aControls","aCurrentControls","oSelector","oControl","bySelector","appComponent","indexOfObject","selector","length","flexController","waitForChangesToBeApplied","Promise","resolve"],"sources":["VariantManagementState-dbg.js"],"mappings":"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"}