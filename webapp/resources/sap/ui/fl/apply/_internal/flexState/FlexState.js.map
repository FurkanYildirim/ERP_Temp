{"version":3,"file":"FlexState.js","names":["sap","ui","define","_omit","each","merge","ObjectPath","Log","Component","FlexObjectFactory","prepareAppDescriptorMap","prepareChangesMap","prepareCompVariantsMap","DataSelector","InitialPrepareFunctions","Loader","ManifestUtils","FlexInfoSession","LayerUtils","requireAsync","Utils","FlexState","_mInstances","_mNavigationHandlers","_mInitPromises","_oShellNavigationService","_oURLParsingService","_oChangePersistenceFactory","_mFlexObjectInfo","appDescriptorChanges","prepareFunction","pathInResponse","changes","initialPreparationFunctionName","variants","compVariants","_mExternalData","flexObjects","enhancePropertyBag","mPropertyBag","oComponent","get","componentId","componentData","getComponentData","manifest","rawManifest","getManifestObject","reference","getFlexReference","createFlexObjects","oStorageResponse","aRuntimePersistence","sKey","vValue","Array","isArray","forEach","oChangeDef","push","createFromFileContent","runInitialPreparation","sMapName","sPreparationFunctionName","fnPreparation","undefined","initializeState","sReference","oUpdate","updateInstance","oFlexObjectsDataSelector","id","parameterKey","executeFunction","oData","oPersistence","runtimePersistence","concat","runtimeOnlyData","getInstanceEntryOrThrowError","Error","preparedMaps","unfilteredStorageResponse","storageResponse","callPrepareFunction","checkUpdate","getAppDescriptorMap","getChangesMap","getCompVariantsMap","buildRuntimePersistence","aExternalFlexObjects","oFlexInstance","Object","keys","externalData","initializeNewInstance","bDataUpdated","filterByMaxLayer","set","mResponse","mFilteredReturn","mFlexObjects","oURLParsingService","getUShellService","isLayerFilteringRequired","iIndex","mFlexObjectInfo","sPath","filterChangeDefinitionsByMaxLayer","loadFlexData","then","partialFlexState","registerMaxLayerHandler","storeInfoInSession","freeze","oResponse","oFlexInfoSession","getByReference","info","assign","setByReference","oShellNavigationService","handleMaxLayerChange","bind","registerNavigationFilter","deRegisterMaxLayerHandler","unregisterNavigationFilter","sNewHash","sOldHash","sCurrentMaxLayer","getMaxLayerTechnicalParameter","sPreviousMaxLayer","rebuildFilteredResponse","oError","error","message","NavigationFilterStatus","Continue","checkPartialFlexState","mInitProperties","partialFlexData","reInitialize","checkComponentId","sFlexInstanceComponentId","loadUShellServices","Promise","all","aServices","catch","sServiceName","getUshellContainer","lazyLoadModules","oModule","initialize","sFlexReference","mEvaluatedProperties","isInitialized","getFlexReferenceForControl","control","clearAndInitialize","clearState","clearCachedResult","_instanceCache","hasOwnProperty","removeDirtyChanges","setInitialNonFlCompVariantData","sPersistencyKey","oStandardVariant","aVariants","sSVMControlId","standardVariant","controlId","getInitialNonFlCompVariantData","resetInitialNonFlCompVariantData","addFakeStandardVariantToExternalData","sComponentId","oStandardVariantInstance","resetFakeStandardVariants","addDirtyFlexObject","oFlexObject","removeDirtyFlexObject","aFlexObjects","indexOf","splice","getFlexObjectsDataSelector","getUIChanges","getAppDescriptorChanges","getUI2Personalization","ui2personalization","getStorageResponse","resolve","getFlexObjectsFromStorageResponse"],"sources":["FlexState-dbg.js"],"mappings":"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"}