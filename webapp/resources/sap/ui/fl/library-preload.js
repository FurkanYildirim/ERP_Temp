//@ui5-bundle sap/ui/fl/library-preload.js
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/Cache", ["sap/base/util/ObjectPath","sap/base/Log","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/api/ControlVariantApplyAPI"],function(e,n,t,a){"use strict";var r=function(){};function c(e){switch(e.fileType){case"change":if(e.selector&&e.selector.persistencyKey){return["comp","changes"]}if(e.variantReference){return"variantDependentControlChanges"}return"changes";case"ctrl_variant":return"variants";case"ctrl_variant_change":return"variantChanges";case"ctrl_variant_management_change":return"variantManagementChanges";case"variant":return["comp","variants"];default:return undefined}}function i(n,a){var r=t.getFlexObjectsFromStorageResponse(n);var i=c(a);return e.get(i,r)}function l(e,n){if(!n){return e}return e===r.NOTAG?e.replace(/>$/,"".concat("-",n,">")):e.concat("-",n)}function o(e){return e.replace(/(^W\/|")/g,"")}r.NOTAG="<NoTag>";r.clearEntries=function(){t.clearState()};r.getChangesFillingCache=function(e,n,a){var r=Promise.resolve();if(a){r=t.clearAndInitialize(n)}return r.then(function(){return t.getStorageResponse(e.name)}).catch(function(){return{}})};r.getCacheKey=function(e,t){if(!e||!e.name||!t){n.warning("Not all parameters were passed to determine a flexibility cache key.");return Promise.resolve(r.NOTAG)}return this.getChangesFillingCache(e).then(function(e){if(e&&e.cacheKey){return o(e.cacheKey)}return r.NOTAG}).then(function(e){var n=t.getModel(a.getVariantModelName());if(!n){return e}var r=n.getVariantManagementControlIds();var c=n.getCurrentControlVariantIds().filter(function(e){return!r.includes(e)});return l(e,c.join("-"))})};r.addChange=function(e,n){var a=i(e.name,n);if(!a){return}a.push(n);t.getFlexObjectsDataSelector().checkUpdate({reference:e.name})};r.updateChange=function(e,n){var a=i(e.name,n);if(!a){return}for(var r=0;r<a.length;r++){if(a[r].fileName===n.fileName){a.splice(r,1,n);break}}t.getFlexObjectsDataSelector().checkUpdate({reference:e.name})};r.deleteChange=function(e,n){var a=i(e.name,n);if(!a){return}for(var r=0;r<a.length;r++){if(a[r].fileName===n.fileName){a.splice(r,1);break}}t.getFlexObjectsDataSelector().checkUpdate({reference:e.name})};r.removeChanges=function(e,n){var a=t.getFlexObjectsFromStorageResponse(e.name);if(!a){return}a.changes=a.changes.filter(function(e){return n.indexOf(e.fileName)===-1});t.getFlexObjectsDataSelector().checkUpdate({reference:e.name})};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/ChangePersistence", ["sap/base/util/restricted/_union","sap/base/util/includes","sap/base/util/merge","sap/base/util/UriParameters","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Component","sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/apply/_internal/flexObjects/FlexObject","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/registry/Settings","sap/ui/fl/write/_internal/condenser/Condenser","sap/ui/fl/write/_internal/Storage","sap/ui/fl/write/api/Version","sap/ui/fl/Cache","sap/ui/fl/LayerUtils","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/model/json/JSONModel","sap/ui/performance/Measurement"],function(e,t,n,a,r,i,s,o,h,l,c,g,f,p,u,d,C,m,y,v,_,S,D,b,L,E){"use strict";var I=function(e){this._mComponent=e;this._mChanges=f.createEmptyDependencyMap();this._bChangesMapCreated=false;this._mChangesInitial=n({},this._mChanges);if(!this._mComponent||!this._mComponent.name){r.error("The Control does not belong to an SAPUI5 component. Personalization and changes for this control might not work as expected.");throw new Error("Missing component name.")}this._aDirtyChanges=[];this._oMessagebundle=undefined;this._mChangesEntries={};this._bHasChangesOverMaxLayer=false;this.HIGHER_LAYER_CHANGES_EXIST="higher_layer_changes_exist"};function F(e,t){var n;if(t instanceof l){n=t;this._mChangesEntries[n.getId()]=n}else{if(!this._mChangesEntries[t.fileName]){this._mChangesEntries[t.fileName]=c.createFromFileContent(t)}n=this._mChangesEntries[t.fileName];n.setState(g.LifecycleState.PERSISTED)}return n}I.prototype.getComponentName=function(){return this._mComponent.name};I.prototype.getCacheKey=function(e){return _.getCacheKey(this._mComponent,e)};function O(e){var t;var n;var a;var r;if(e instanceof l){var i=e;t=i.getFileType();a=i.getVariantReference();r=i.getSelector()&&i.getSelector().id}else{var s=e;t=s.fileType;n=s.variantManagementReference;a=s.variantReference;r=s.selector&&s.selector.id}var o=false;if(t==="ctrl_variant"||t==="ctrl_variant_change"||t==="ctrl_variant_management_change"){o=n||a||r}return t==="change"||o}I.prototype.getChangesForComponent=function(e,t){return b.getUShellService("URLParsing").then(function(n){this._oUShellURLParsingService=n;return _.getChangesFillingCache(this._mComponent,e,t)}.bind(this)).then(function(e,t){var a=n({},t);var r=e&&e.component&&b.getAppComponentForControl(e.component);var i=d.isStorageResponseFilled(a.changes);if(!i){return[]}var s=a.changes.changes;if(!this._oMessagebundle&&a.messagebundle&&r){if(!r.getModel("i18nFlexVendor")){if(s.some(function(e){return e.layer===D.VENDOR})){this._oMessagebundle=a.messagebundle;var o=new L(this._oMessagebundle);r.setModel(o,"i18nFlexVendor")}}}var h=e&&e.currentLayer;var l=!(e&&e.ignoreMaxLayerParameter);var c=function(){return true};if(h){s=S.filterChangeOrChangeDefinitionsByCurrentLayer(s,h)}else if(S.isLayerFilteringRequired(this._oUShellURLParsingService)&&l){c=M.bind(this);s=s.filter(c)}else if(this._bHasChangesOverMaxLayer&&!l){this._bHasChangesOverMaxLayer=false;return this.HIGHER_LAYER_CHANGES_EXIST}var g=a.changes&&e&&e.includeCtrlVariants;var f=this._getAllCtrlVariantChanges(a,g,c);s=s.concat(f);return this._checkAndGetChangeInstances(s,a)}.bind(this,e))};I.prototype._checkAndGetChangeInstances=function(e,t){return e.filter(O).map(F.bind(this,t))};function M(e){if(S.isOverMaxLayer(x(e),this._oUShellURLParsingService)){if(!this._bHasChangesOverMaxLayer){this._bHasChangesOverMaxLayer=true}return false}return true}function x(e){var t;if(typeof e.isA==="function"&&(e.isA("sap.ui.fl.apply._internal.flexObjects.FlVariant")||e.isA("sap.ui.fl.apply._internal.flexObjects.UIChange"))){t=e.getLayer()}else{t=e.layer}return t}I.prototype._getAllCtrlVariantChanges=function(e,t,n){if(!t){return p.getInitialChanges({reference:this._mComponent.name})}return["variants","variantChanges","variantDependentControlChanges","variantManagementChanges"].reduce(function(t,n){if(e.changes[n]){return t.concat(e.changes[n])}return t},[]).filter(n)};I.prototype.loadChangesMapForComponent=function(e){return this.getChangesForComponent({component:e}).then(t.bind(this));function t(t){E.start("fl.createDependencyMap","Measurement of creating initial dependency map");this._mChanges=f.createEmptyDependencyMap();t.forEach(this.addChangeAndUpdateDependencies.bind(this,e));this._mChangesInitial=n({},this._mChanges);E.end("fl.createDependencyMap","Measurement of creating initial dependency map");this._bChangesMapCreated=true;return this.getChangesMapForComponent.bind(this)}};I.prototype.getOpenDependentChangesForControl=function(e,t){return f.getOpenDependentChangesForControl(this._mChanges,i.getControlIdBySelector(e,t),t)};function A(e){var t=n({},this._mChangesInitial.mDependencies);return t[e.getId()]}function U(e,n,a,r){var s;var o=[];e.controlsDependencies.forEach(function(e){if(!i.bySelector(e,a)){s=i.getControlIdBySelector(e,a);o.push(e);this._mChanges.mControlsWithDependencies[s]=this._mChanges.mControlsWithDependencies[s]||[];if(!t(this._mChanges.mControlsWithDependencies[s],r.getId())){this._mChanges.mControlsWithDependencies[s].push(r.getId())}}}.bind(this));e.dependencies=n;e.controlsDependencies=o;if(n.length||o.length){this._mChanges.mDependencies[r.getId()]=e}}I.prototype.copyDependenciesFromInitialChangesMap=function(e,t,n){var a=A.call(this,e);if(a){var r=[];a.dependencies.forEach(function(n){if(t(n)){this._mChanges.mDependentChangesOnMe[n]=this._mChanges.mDependentChangesOnMe[n]||[];this._mChanges.mDependentChangesOnMe[n].push(e.getId());r.push(n)}}.bind(this));U.call(this,a,r,n,e)}return this._mChanges};I.prototype.addChangeAndUpdateDependencies=function(e,t,n){t.setInitialApplyState();if(n){f.insertChange(t,this._mChanges,n)}f.addChangeAndUpdateDependencies(t,e,this._mChanges)};I.prototype._addRunTimeCreatedChangeAndUpdateDependencies=function(e,t){f.addRuntimeChangeAndUpdateDependencies(t,e,this._mChanges,this._mChangesInitial)};I.prototype.getChangesMapForComponent=function(){return this._mChanges};I.prototype.getAllUIChanges=function(t){var n=e(this.getChangesMapForComponent().aChanges,t.includeDirtyChanges&&this.getDirtyChanges()).filter(function(e){return Boolean(e)&&e.getFileType()==="change"&&S.compareAgainstCurrentLayer(e.getLayer(),t.layer)===0});return n};I.prototype.isChangeMapCreated=function(){return this._bChangesMapCreated};I.prototype.getChangesForView=function(e){return this.getChangesForComponent(e).then(function(t){return t.filter(h.filterChangeByView.bind(undefined,e))})};I.prototype.addChange=function(e,t){var n=this.addDirtyChange(e);this._addRunTimeCreatedChangeAndUpdateDependencies(t,n);this._mChangesEntries[n.getId()]=n;this._addPropagationListener(t);return n};I.prototype.addDirtyChange=function(e){var t;if(typeof e.isA==="function"&&e.isA("sap.ui.fl.apply._internal.flexObjects.FlexObject")){t=e}else{t=c.createFromFileContent(e)}if(this._aDirtyChanges.indexOf(t)===-1){this._aDirtyChanges.push(t);u.addDirtyFlexObject(this._mComponent.name,t)}return t};I.prototype._addPropagationListener=function(e){var t=b.getAppComponentForControl(e);if(t instanceof s){var n=function(e){return!e._bIsSapUiFlFlexControllerApplyChangesOnControl};var a=t.getPropagationListeners().every(n);if(a){var r=sap.ui.require("sap/ui/fl/FlexControllerFactory");var i=r.create(this.getComponentName());var h=o.applyAllChangesForControl.bind(o,this.getChangesMapForComponent.bind(this),t,i);h._bIsSapUiFlFlexControllerApplyChangesOnControl=true;t.addPropagationListener(h)}}};I.prototype._deleteNotSavedChanges=function(e,t,n){e.filter(function(e){return!t.some(function(t){return e.getId()===t.getId()})}).forEach(function(e){if(n){this.removeChange(e);_.deleteChange(this._mComponent,e.convertToFileContent())}else{this.deleteChange(e)}}.bind(this))};function R(e,t){var n=e.map(function(e){return e[t]()});var a=n.filter(function(e,t,n){return n.indexOf(e)===t});return a.length===1}function T(e,t,n){var r=false;if(!e||t.length<2||!R(t,"getLayer")){return false}if(n){r=true}else{var i=t[0].getLayer();if([D.CUSTOMER,D.USER].includes(i)){r=true}}var s=a.fromURL(window.location.href);if(s.has("sap-ui-xx-condense-changes")){r=s.get("sap-ui-xx-condense-changes")==="true"}return r}function P(e){var t=C.getInstanceOrUndef()&&C.getInstanceOrUndef().isCondensingEnabled();if(t&&!R(e,"getNamespace")){t=false}return t}function N(e,t,n,a){this._massUpdateCacheAndDirtyState(t,n);this._deleteNotSavedChanges(e,t,a)}function V(e,t,n,a){if(!e.length&&!n){return[]}var r=this._mChanges.aChanges.filter(function(e){if(a===D.CUSTOMER&&t){return e.getState()===g.LifecycleState.PERSISTED&&t.includes(e.getId())}return e.getState()===g.LifecycleState.PERSISTED&&S.compareAgainstCurrentLayer(e.getLayer(),a)===0});return r.concat(e)}function j(e){if(e.length){var t=q(e);var n=true;if(C.getInstanceOrUndef()&&C.getInstanceOrUndef().hasPersoConnector()){var a=B(e);n=a.length===1}return t.length===1&&n}return true}function w(e,t,n,a,r,i){var s=[];var o=Promise.resolve();var h=i.filter(function(e){if(e.getState()===g.LifecycleState.DELETED){s.push(e);return false}return true});if(s.length){o=this.saveSequenceOfDirtyChanges(s,a,n)}return o.then(function(){if(h.length){return y.write({layer:e,flexObjects:k(h),transport:t,isLegacyVariant:false,parentVersion:n}).then(function(e){N.call(this,r,h,a);return e}.bind(this))}return this._deleteNotSavedChanges(r,i)}.bind(this))}I.prototype.saveDirtyChanges=function(e,t,n,a,r,i,s){var o=n||this._aDirtyChanges;var h=o.length&&o[0].getLayer()||s;var l=V.call(this,o,r,i,h);var c=P(l)&&T(e,l,i);var g=c?l:o;var f=g.slice(0);var p=q(o);if(j(o)){var u=Promise.resolve(f);if(T(e,f,i)){u=m.condense(e,f)}return u.then(function(e){var n=p[0];if(c){return y.condense({allChanges:g,condensedChanges:e,layer:h,transport:n,isLegacyVariant:false,parentVersion:a}).then(function(n){N.call(this,g,e,t,true);return n}.bind(this))}return w.call(this,h,n,a,t,g,e)}.bind(this))}return this.saveSequenceOfDirtyChanges(o,t,a)};I.prototype.saveSequenceOfDirtyChanges=function(e,t,n){var a;if(n){var r=e.filter(function(e){return e.getState()===g.LifecycleState.NEW});a=[].concat(r).shift()}return e.reduce(function(e,r){return e.then(H.bind(undefined,r,a,n)).then(this._updateCacheAndDirtyState.bind(this,r,t))}.bind(this),Promise.resolve())};function H(e,t,n){switch(e.getState()){case g.LifecycleState.NEW:if(n!==undefined){n=e===t?n:v.Number.Draft}return y.write({layer:e.getLayer(),flexObjects:[e.convertToFileContent()],transport:e.getRequest(),parentVersion:n});case g.LifecycleState.DELETED:return y.remove({flexObject:e.convertToFileContent(),layer:e.getLayer(),transport:e.getRequest(),parentVersion:n});default:return Promise.resolve()}}I.prototype._updateCacheAndDirtyState=function(e,t){this._aDirtyChanges=this._aDirtyChanges.filter(function(t){return e.getId()!==t.getId()});if(!t){switch(e.getState()){case g.LifecycleState.NEW:e.setState(g.LifecycleState.PERSISTED);_.addChange(this._mComponent,e.convertToFileContent());break;case g.LifecycleState.DELETED:_.deleteChange(this._mComponent,e.convertToFileContent());break;case g.LifecycleState.DIRTY:e.setState(g.LifecycleState.PERSISTED);_.updateChange(this._mComponent,e.convertToFileContent());break;default:}}};I.prototype._massUpdateCacheAndDirtyState=function(e,t){e.forEach(function(e){this._updateCacheAndDirtyState(e,t)},this)};function q(e){var t=[];e.forEach(function(e){var n=e.getRequest();if(t.indexOf(n)===-1){t.push(n)}});return t}function B(e){var t=[];e.forEach(function(e){var n=e.getLayer();if(t.indexOf(n)===-1){t.push(n)}});return t}function k(e){var t=[];e.forEach(function(e){t.push(e.convertToFileContent())});return t}I.prototype.getDirtyChanges=function(){return this._aDirtyChanges};I.prototype.deleteChange=function(e,t){var n=this._aDirtyChanges.indexOf(e);if(n>-1){if(e.getState()===g.LifecycleState.DELETED){return}this._aDirtyChanges.splice(n,1);u.removeDirtyFlexObject(this._mComponent.name,e);this._deleteChangeInMap(e,t);return}e.markForDeletion();this.addDirtyChange(e);this._deleteChangeInMap(e,t)};I.prototype.removeChange=function(e){var t=this._aDirtyChanges.indexOf(e);if(t>-1){this._aDirtyChanges.splice(t,1);u.removeDirtyFlexObject(this._mComponent.name,e)}this._deleteChangeInMap(e)};I.prototype._deleteChangeInMap=function(e,t){var n=e.getId();f.removeChangeFromMap(this._mChanges,n);f.removeChangeFromDependencies(t?this._mChangesInitial:this._mChanges,n)};function W(e,t){return(t.getRequest()==="$TMP"||t.getRequest()==="")&&t.getLayer()===e}function G(e,t){return t.getState()===g.LifecycleState.PERSISTED&&t.getLayer()===e}function Y(){var e=[];var t=u.getCompVariantsMap(this.getComponentName());for(var n in t){for(var a in t[n].byId){e.push(t[n].byId[a])}}return e}I.prototype.transportAllUIChanges=function(e,t,n,a){return this.getChangesForComponent({currentLayer:n,includeCtrlVariants:true}).then(function(r){var i=Y.call(this);r=r.concat(i.filter(W.bind(this,n)));return y.publish({transportDialogSettings:{rootControl:e,styleClass:t},layer:n,reference:this.getComponentName(),localChanges:r,appVariantDescriptors:a})}.bind(this))};I.prototype._getChangesFromMapByNames=function(e){return this._mChanges.aChanges.filter(function(t){return e.indexOf(t.getId())!==-1})};I.prototype.removeDirtyChanges=function(e,t,n,a,r){var s=[].concat(e||[]);var o=this._aDirtyChanges;var h=o.filter(function(e){var o=true;if(s.length&&!s.includes(e.getLayer())){return false}if(a&&e.getSupportInformation().generator!==a){return false}if(n){var h=e.getSelector();o=n.getId()===i.getControlIdBySelector(h,t)}if(r){o=o&&r.indexOf(e.getChangeType())!==-1}return o});h.forEach(function(e){var t=o.indexOf(e);o.splice(t,1);u.removeDirtyFlexObject(this._mComponent.name,e)}.bind(this));return Promise.resolve(h)};I.prototype.resetChanges=function(e,t,n,a){var r=n&&n.length>0;var i=a&&a.length>0;var s=C.getInstanceOrUndef()&&C.getInstanceOrUndef().isPublicLayerAvailable();var o=t===undefined&&n===undefined&&a===undefined;var h=[];if(s&&o){h=Y.call(this).filter(G.bind(this,e))}return this.getChangesForComponent({currentLayer:e,includeCtrlVariants:true}).then(function(s){s=s.concat(h);var o={reference:this.getComponentName(),layer:e,changes:s};if(t){o.generator=t}if(r){o.selectorIds=n}if(i){o.changeTypes=a}return y.reset(o)}.bind(this)).then(function(e){var t=[];if(n||a){var r=[];if(e&&e.response&&e.response.length>0){e.response.forEach(function(e){r.push(e.fileName)})}_.removeChanges(this._mComponent,r);t=this._getChangesFromMapByNames(r)}return t}.bind(this))};return I});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/ChangePersistenceFactory", ["sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/ChangePersistence"],function(e,n){"use strict";var t={};t._instanceCache={};t.getChangePersistenceForComponent=function(e){var r=t._instanceCache[e];if(!r){var a={name:e};r=new n(a);t._instanceCache[e]=r}return r};t.getChangePersistenceForControl=function(n){var r;r=e.getFlexReferenceForControl(n);return t.getChangePersistenceForComponent(r)};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/FlexController", ["sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/Utils","sap/ui/fl/Layer","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/write/_internal/Versions","sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/changes/Reverter","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/api/ControlVariantApplyAPI","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/util/reflection/XmlTreeModifier","sap/ui/core/Component","sap/base/Log"],function(e,t,n,r,o,i,a,s,p,h,c,l,u,f,g){"use strict";function C(e,t,n){return Promise.resolve().then(function(){if(n.length!==0){n.reverse();return a.revertMultipleChanges(n,{appComponent:e,modifier:l,flexController:this})}}.bind(this)).then(function(){if(e){var r=e.getModel(c.getVariantModelName());if(r){if(!t){s.update({parameters:[],updateURL:true,updateHashEntry:true,model:r})}}}return n})}var d=function(e){this._oChangePersistence=undefined;this._sComponentName=e||"";if(this._sComponentName){this._oChangePersistence=r.getChangePersistenceForComponent(this.getComponentName())}};d.prototype.getComponentName=function(){return this._sComponentName};d.prototype.setVariantSwitchPromise=function(e){this._oVariantSwitchPromise=e};d.prototype.waitForVariantSwitch=function(){if(!this._oVariantSwitchPromise){this._oVariantSwitchPromise=Promise.resolve()}return this._oVariantSwitchPromise};d.prototype.createBaseChange=function(e,t){if(!t){throw new Error("No application component found. To offer flexibility a valid relation to its owning component must be present.")}e.reference=this.getComponentName();e.packageName="$TMP";var n=p.createUIChange(e);if(e.variantReference){n.setVariantReference(e.variantReference)}return n};d.prototype._createChange=function(n,r,o){var i=o&&(o.controlType||t.getControlType(o));var a=this.createBaseChange(n,r);return e.getChangeHandler(a.getChangeType(),i,o,l,a.getLayer()).then(function(e){if(e){return e.completeChangeContent(a,n,{modifier:l,appComponent:r,view:t.getViewForControl(o)})}throw new Error("Change handler could not be retrieved for change "+JSON.stringify(n)+".")}).then(function(){a.setState(h.LifecycleState.NEW);return a}).catch(function(e){return Promise.reject(e)})};d.prototype.createChangeWithExtensionPointSelector=function(e,n){return Promise.resolve().then(function(){if(!n){throw new Error("A flexibility change on extension point cannot be created without a valid extension point reference.")}var r=n.view;var o=t.getAppComponentForControl(r);e.selector={name:n.name,viewSelector:l.getSelector(r.getId(),o)};return o}).then(function(t){return this._createChange(e,t)}.bind(this))};d.prototype.createChangeWithControlSelector=function(e,n){var r;return(new t.FakePromise).then(function(){if(!n){throw new Error("A flexibility change cannot be created without a targeted control.")}var o=n.id||n.getId();if(!e.selector){e.selector={}}r=n.appComponent||t.getAppComponentForControl(n);if(!r){throw new Error("No application component found. To offer flexibility, the control with the ID '"+o+"' has to have a valid relation to its owning application component.")}Object.assign(e.selector,l.getSelector(o,r));return r}).then(function(t){return this._createChange(e,t,n)}.bind(this))};d.prototype.addChange=function(e,n){return this.createChangeWithControlSelector(e,n).then(function(e){var r=t.getAppComponentForControl(n);e._ignoreOnce=true;this.addPreparedChange(e,r);e.setQueuedForApply();return e}.bind(this))};d.prototype.addPreparedChange=function(e,t){this._oChangePersistence.addChange(e,t);return e};d.prototype.deleteChange=function(e){this._oChangePersistence.deleteChange(e)};d.prototype.applyChange=function(e,n){var r={modifier:l,appComponent:t.getAppComponentForControl(n),view:t.getViewForControl(n)};return i.applyChangeOnControl(e,n,r).then(function(t){if(!t.success){var n=t.error||new Error("The change could not be applied.");this._oChangePersistence.deleteChange(e,true);throw n}return e}.bind(this))};function m(e,n,r,o,i){var a=y(e,o);if(!a){return[]}i.push(e);var s=e.getId();var p=n[s]&&n[s].dependencies||[];for(var h=0,c=p.length;h<c;h++){var l=t.getChangeFromChangesMap(r,p[h]);a=m(l,n,r,o,i);if(a.length===0){i=[];break}delete n[s]}return i}function y(e,t){var n=e.getDependentControlSelectorList();n.push(e.getSelector());return!n.some(function(e){return!l.bySelector(e,t)})}d.prototype.waitForChangesToBeApplied=function(e){var t=e.map(function(e){return this._waitForChangesToBeApplied(e)}.bind(this));return Promise.all(t).then(function(){return undefined})};d.prototype._waitForChangesToBeApplied=function(e){function n(t){return!t.isCurrentProcessFinished()&&(e.changeTypes.length===0||e.changeTypes.includes(t.getChangeType()))}e.changeTypes=e.changeTypes||[];var r=e.selector.id&&sap.ui.getCore().byId(e.selector.id)||e.selector;var o=this._oChangePersistence.getChangesMapForComponent();var i=[];var a=Object.assign({},o.mDependencies);var s=o.mChanges;var p=s[r.getId()]||[];var h=p.filter(n);var c=e.selector.appComponent||t.getAppComponentForControl(r);var l=[];h.forEach(function(e){var t=m(e,a,o.mChanges,c,[]);t.forEach(function(e){if(l.indexOf(e)===-1){l.push(e)}})});l.forEach(function(e){i=i.concat(e.addChangeProcessingPromises())},this);i.push(this.waitForVariantSwitch());return Promise.all(i)};d.prototype._removeOtherLayerChanges=function(e,t,r){if(r&&t){var o=Object.values(n).filter(function(e){return e!==t});return this.removeDirtyChanges(o,e,undefined,undefined,undefined,true)}return Promise.resolve()};d.prototype.saveAll=function(e,t,r,i,a,s){var p;var h;if(r){var c=o.getVersionsModel({reference:this._sComponentName,layer:n.CUSTOMER});p=c.getProperty("/persistedVersion");h=c.getProperty("/draftFilenames")}return this._removeOtherLayerChanges(e,i,a).then(this._oChangePersistence.saveDirtyChanges.bind(this._oChangePersistence,e,t,undefined,p,h,s,i)).then(function(e){if(r&&e&&e.response){var t=e.response;var n=[];if(Array.isArray(t)){t.forEach(function(e){n.push(e.fileName)});t=t[0]}o.onAllChangesSaved({reference:t.reference,layer:t.layer,draftFilenames:n})}return e})};d.prototype.processXmlView=function(e,n){var r=f.get(n.componentId);var o=t.getAppComponentForControl(r);n.appComponent=o;n.modifier=u;n.view=e;return this._oChangePersistence.getChangesForView(n).then(i.applyAllChangesForXMLView.bind(i,n)).catch(v.bind(this,n.view))};function v(e,t){g.error("Error processing view "+t+".");return e}d.prototype.getComponentChanges=function(e,t){return this._oChangePersistence.getChangesForComponent(e,t)};d.prototype.getOpenDependentChangesForControl=function(e,t){return this._oChangePersistence.getOpenDependentChangesForControl(e,t)};d.prototype.resetChanges=function(e,t,n,r,o){return this._oChangePersistence.resetChanges(e,t,r,o).then(C.bind(this,n,undefined))};d.prototype.removeDirtyChanges=function(e,t,n,r,o,i){return this._oChangePersistence.removeDirtyChanges(e,t,n,r,o).then(C.bind(this,t,i))};d.prototype.applyVariantChanges=function(e,n){var r;return e.reduce(function(e,t){return e.then(function(){var e={modifier:l,appComponent:n};this._oChangePersistence._addRunTimeCreatedChangeAndUpdateDependencies(n,t);r=e.modifier.bySelector(t.getSelector(),n);if(r){return i.applyChangeOnControl(t,r,e)}g.error("A flexibility change tries to change a nonexistent control.")}.bind(this))}.bind(this),new t.FakePromise)};d.prototype.saveSequenceOfDirtyChanges=function(e,t){return this._oChangePersistence.saveDirtyChanges(t,false,e)};return d});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/FlexControllerFactory", ["sap/base/Log","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/FlexController","sap/ui/fl/Utils"],function(e,r,t,n){"use strict";var a={};a._instanceCache={};a.create=function(e){var r=a._instanceCache[e];if(!r){r=new t(e);a._instanceCache[e]=r}return r};a.createForControl=function(t){try{var o=n.getAppComponentForControl(t);var i=r.getFlexReferenceForControl(o||t);return a.create(i)}catch(r){e.error(r.message,undefined,"sap.ui.fl.FlexControllerFactory")}};return a},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/Layer", [],function(){"use strict";return{USER:"USER",PUBLIC:"PUBLIC",CUSTOMER:"CUSTOMER",CUSTOMER_BASE:"CUSTOMER_BASE",PARTNER:"PARTNER",VENDOR:"VENDOR",BASE:"BASE"}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/LayerUtils", ["sap/base/util/UriParameters","sap/ui/thirdparty/hasher","sap/ui/fl/Layer"],function(e,r,t){"use strict";var n=[t.BASE,t.VENDOR,t.PARTNER,t.CUSTOMER_BASE,t.CUSTOMER,t.PUBLIC,t.USER];var a={};n.forEach(function(e,r){a[e]=r});function i(r){return e.fromQuery(window.location.search).get(r)}var u={_mLayersIndex:a,_sTopLayer:n[n.length-1],FL_MAX_LAYER_PARAM:"sap-ui-fl-max-layer",isValidLayer:function(e){return Object.keys(t).some(function(r){return r===e})},isVendorLayer:function(){return this.getCurrentLayer()===t.VENDOR},isCustomerDependentLayer:function(e){return[t.PUBLIC,t.CUSTOMER,t.CUSTOMER_BASE].indexOf(e)>-1},isDeveloperLayer:function(e){return u.compareAgainstCurrentLayer(e,t.CUSTOMER)===-1},doesCurrentLayerRequirePackage:function(){var e=this.getCurrentLayer();return e===t.VENDOR||e===t.PARTNER||e===t.CUSTOMER_BASE},getMaxLayer:function(e){var t=u.getMaxLayerTechnicalParameter(r.getHash(),e);return t||i(this.FL_MAX_LAYER_PARAM)||u._sTopLayer},getLayerIndex:function(e){return this._mLayersIndex[e]},isOverMaxLayer:function(e,r){return this.isOverLayer(e,this.getMaxLayer(r))},isOverLayer:function(e,r){return this.getLayerIndex(e)>this.getLayerIndex(r)},compareAgainstCurrentLayer:function(e,r){var t=r||u.getCurrentLayer();if(this.getLayerIndex(t)>this.getLayerIndex(e)||!e){return-1}else if(this.getLayerIndex(t)===this.getLayerIndex(e)){return 0}return 1},isLayerFilteringRequired:function(e){return this._sTopLayer!==this.getMaxLayer(e)},isSapUiLayerParameterProvided:function(){return!!i("sap-ui-layer")},getCurrentLayer:function(){var e=i("sap-ui-layer")||"";return e.toUpperCase()||t.CUSTOMER},filterChangeDefinitionsByMaxLayer:function(e,r){return e.filter(function(e){return!e.layer||!u.isOverMaxLayer(e.layer,r)})},filterChangeOrChangeDefinitionsByCurrentLayer:function(e,r){if(!r){return e}return e.filter(function(e){var t=e.getLayer&&e.getLayer()||e.layer;return r===t})},getMaxLayerTechnicalParameter:function(e,r){if(r){var t=r.parseShellHash(e)||{};if(t.params&&t.params.hasOwnProperty(this.FL_MAX_LAYER_PARAM)){return t.params[this.FL_MAX_LAYER_PARAM][0]}}return undefined}};return u});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/Scenario", [],function(){"use strict";return{AppVariant:"APP_VARIANT",VersionedAppVariant:"VERSIONED_APP_VARIANT",AdaptationProject:"ADAPTATION_PROJECT",FioriElementsFromScratch:"FE_FROM_SCRATCH",UiAdaptation:"UI_ADAPTATION"}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/Utils", ["sap/base/strings/formatMessage","sap/base/util/ObjectPath","sap/base/util/isPlainObject","sap/base/util/uid","sap/base/util/UriParameters","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/base/ManagedObject","sap/ui/core/util/reflection/BaseTreeModifier","sap/ui/core/Component","sap/ui/fl/Scenario","sap/ui/thirdparty/hasher","sap/ui/core/mvc/View","sap/ui/core/Configuration"],function(e,t,r,n,a,i,o,s,u,f,p,c,g,l){"use strict";function m(e){if(e&&e.getEntry){return e.getEntry("sap.app")&&e.getEntry("sap.app").type}return e&&e["sap.app"]&&e["sap.app"].type}function h(e,t){if(e&&e.startupParameters&&t){if(Array.isArray(e.startupParameters[t])){return e.startupParameters[t][0]}}}var d={formatAndLogMessage:function(t,r,n,a){var o=r.join(" ");o=e(o,n);i[t](o,a||"")},isVariantByStartupParameter:function(e){if(e){var t=this.getAppComponentForControl(e);if(t&&t.getComponentData){return!!h(t.getComponentData(),"sap-app-id")}}return false},getAppDescriptor:function(e){if(e){var t=this.getAppComponentForControl(e);if(t&&t.getMetadata){var r=t.getMetadata();if(r&&r.getManifestObject){return r.getManifestObject().getJson()}}}},getSiteIdByComponentData:function(e){return h(e,"hcpApplicationId")},isBinding:function(e){return typeof e==="string"&&!!s.bindingParser(e)||r(e)&&((e.hasOwnProperty("path")||e.hasOwnProperty("parts"))&&!e.hasOwnProperty("ui5object"))},isChangeRelatedToVariants:function(e){return e.getFileType()==="ctrl_variant_change"||e.getFileType()==="ctrl_variant_management_change"||e.getFileType()==="ctrl_variant"||e.getVariantReference()},getComponentForControl:function(e){function t(e){var r=f.getOwnerIdFor(e);if(!r){if(e&&typeof e.getParent==="function"){var n=e.getParent();if(n){return t(n)}}}return r||""}if(e){var r=t(e);if(r){return f.get(r)}}},getAppComponentForControl:function(e){var t=e instanceof f?e:d.getComponentForControl(e);if(t&&t.getAppComponent&&t.getAppComponent()instanceof f){return t.getAppComponent()}if(t&&t.oComponentData&&t.oComponentData.appComponent){return t.oComponentData.appComponent}if(t&&t.getManifestEntry){var r=t.getManifestEntry("sap.app");if(r&&r.type&&r.type!=="application"){if(t instanceof f){t=d.getComponentForControl(t)}return this.getAppComponentForControl(t)}}return t},getViewForControl:function(e){if(e instanceof g){return e}if(e&&typeof e.getParent==="function"){e=e.getParent();return d.getViewForControl(e)}},getClient:function(){var e;var t;e=a.fromQuery(window.location.search);t=e.get("sap-client");return t||undefined},getLrepUrl:function(){var e=l.getFlexibilityServices();var t=e.find(function(e){return e.connector==="LrepConnector"});return t?t.url:""},getCurrentLanguage:function(){var e=l.getLanguage();return d.convertBrowserLanguageToISO639_1(e)},convertBrowserLanguageToISO639_1:function(e){if(!e||typeof e!=="string"){return""}var t=e.indexOf("-");if(t<0&&e.length<=2){return e.toUpperCase()}if(t>0&&t<=2){return e.substring(0,t).toUpperCase()}return""},getControlType:function(e){var t;if(e&&typeof e.getMetadata==="function"){t=e.getMetadata();if(t&&typeof t.getElementName==="function"){return t.getElementName()}}},checkControlId:function(e,t){if(!t){e=e instanceof s?e:sap.ui.getCore().byId(e);t=d.getAppComponentForControl(e)}return u.checkControlId(e,t)},hasLocalIdSuffix:u.hasLocalIdSuffix,getParsedURLHash:function(e){if(e){return e.parseShellHash(c.getHash())||{}}return{}},getUrlParameter:function(e){return a.fromQuery(window.location.search).get(e)},getUshellContainer:function(){return t.get("sap.ushell.Container")},createDefaultFileName:function(e){var t=n().replace(/-/g,"_");if(e){t+="_"+e}return t},createNamespace:function(e,t){var r="changes";if(t==="ctrl_variant"){r="variants"}var n=e.reference.replace(".Component","");var a="apps/"+n+"/"+r+"/";return a},buildLrepRootNamespace:function(e,t,r){var n="apps/";var a=new Error("Error in sap.ui.fl.Utils#buildLrepRootNamespace: ");if(!e){a.message+="for every scenario you need a base ID";throw a}switch(t){case p.VersionedAppVariant:if(!r){a.message+="in a versioned app variant scenario you additionally need a project ID";throw a}n+=e+"/appVariants/"+r+"/";break;case p.AppVariant:if(!r){a.message+="in an app variant scenario you additionally need a project ID";throw a}n+=e+"/appVariants/"+r+"/";break;case p.AdaptationProject:if(!r){a.message+="in a adaptation project scenario you additionally need a project ID";throw a}n+=e+"/adapt/"+r+"/";break;case p.FioriElementsFromScratch:case p.UiAdaptation:default:n+=e+"/"}return n},isApplication:function(e){var t=m(e);return t==="application"},isApplicationComponent:function(e){return e instanceof f&&d.isApplication(e.getManifestObject())},isEmbeddedComponent:function(e){return e instanceof f&&m(e.getManifestObject())==="component"},indexOfObject:function(e,t){var r=-1;e.some(function(e,n){var a;var i;if(!e){a=[]}else{a=Object.keys(e)}if(!t){i=[]}else{i=Object.keys(t)}var o=a.length===i.length;var s=o&&!a.some(function(r){return e[r]!==t[r]});if(s){r=n}return s});return r},execPromiseQueueSequentially:function(e,t,r){if(e.length===0){if(r){return Promise.resolve()}return new d.FakePromise}var n=e.shift();if(typeof n==="function"){var a;try{a=n()}catch(e){a=Promise.reject(e)}return a.then(function(){if(!r&&a instanceof Promise){r=true}}).catch(function(e){var r="Error during execPromiseQueueSequentially processing occurred";r+=e?": "+e.message:"";i.error(r,e);if(t){throw new Error(r)}}).then(function(){return this.execPromiseQueueSequentially(e,t,r)}.bind(this))}i.error("Changes could not be applied, promise not wrapped inside function.");return this.execPromiseQueueSequentially(e,t,r)},FakePromise:function(e,t,r){d.FakePromise.fakePromiseIdentifier="sap.ui.fl.Utils.FakePromise";this.vValue=e;this.vError=t;this.bContinueWithFakePromise=arguments.length<3||r===d.FakePromise.fakePromiseIdentifier;var n=function(e,t){try{var r=t(e,d.FakePromise.fakePromiseIdentifier);if(o.isThenable(r)){return r}return new d.FakePromise(r)}catch(e){var n=e;return new d.FakePromise(undefined,n)}};d.FakePromise.prototype.then=function(e,t){if(!this.bContinueWithFakePromise){return Promise.resolve(e(this.vValue))}if(!this.vError){return n(this.vValue,e)}else if(t){return n(this.vError,t)}return this};d.FakePromise.prototype.catch=function(e){if(!this.bContinueWithFakePromise){return Promise.reject(e(this.vError))}if(this.vError){return n(this.vError,e)}return this};if(this.vValue instanceof Promise||this.vValue instanceof d.FakePromise){return this.vValue}},getChangeFromChangesMap:function(e,t){var r;Object.keys(e).forEach(function(n){e[n].some(function(e){if(e.getId()===t){r=e;return true}})});return r},handleUrlParameters:function(e,t,r,n){if(this.hasParameterAndValue(t,r,n)){if(e.startsWith("?")){e=e.substr(1,e.length)}var a=e.split("&").filter(function(e){return e!==t+"="+r});e="";if(a.length>0){e="?"+a.join("&")}}else{e+=(e.length>0?"&":"?")+t+"="+r}return e},hasParameterAndValue:function(e,t,r){return this.getParameter(e,r)===t},getParameter:function(e,t){if(t){var r=d.getParsedURLHash(t);return r.params&&r.params[e]&&r.params[e][0]}return d.getUrlParameter(e)},findAggregation:function(e,t){if(e){if(e.getMetadata){var r=e.getMetadata();var n=r.getAllAggregations();if(n){return n[t]}}}return undefined},getAggregation:function(e,t){var r=d.findAggregation(e,t);if(r){return e[r._sGetter]()}return undefined},getProperty:function(e,t){var r=e.getMetadata().getPropertyLikeSetting(t);if(r){var n=r._sGetter;return e[n]()}return undefined},getUShellService:function(e){if(e){var t=this.getUshellContainer();if(t){return t.getServiceAsync(e)}}return Promise.resolve()},getUShellServices:function(e){var t=e.map(function(e){return this.getUShellService(e)}.bind(this));return Promise.all(t).then(function(t){return e.reduce(function(e,r,n){e[r]=t&&t[n];return e},{})})}};return d},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/ChangesController", ["sap/ui/fl/FlexControllerFactory","sap/ui/fl/Utils"],function(t,e){"use strict";var r={getFlexControllerInstance:function(e){if(typeof e==="string"){return t.create(e)}if(typeof e.appId==="string"){return t.create(e.appId)}var r=e.appComponent||e;return t.createForControl(r)},getAppComponentForSelector:function(t){if(typeof t.appId==="string"){return t}return t.appComponent||e.getAppComponentForControl(t)}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/DelegateMediator", ["sap/base/Log","sap/base/util/merge","sap/base/util/restricted/_pick","sap/ui/fl/requireAsync","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,t,r,n,a){"use strict";var i={};i._mDefaultDelegateItems={};i.types={READONLY:"readonly",WRITEONLY:"writeonly",COMPLETE:"complete"};function o(e,t){if(t){return t}if(e.getModel){var r=e.getModel();if(!r){return undefined}return r.getMetadata().getName()}}function u(e,t){t=o(e,t);var r=i._mDefaultDelegateItems[t];return(r||[]).map(function(e){e.payload={};return e})}function l(t,r,a){if(!a.length){return Promise.resolve([])}var i=[];a.forEach(function(a){i.push(function(i){return n(a.name).then(function(e){a.instance=e||{};i.push(a);return i}).catch(function(n){e.error("Failed to load the delegate for the control "+t.getId(r)+"\n"+n.message);return i})})});return i.reduce(function(e,t){return e.then(t)},Promise.resolve([]))}function s(e){return e&&typeof e==="function"}function f(e){return e.delegateType===i.types.COMPLETE||s(e.instance.getPropertyInfo)&&(s(e.instance.createLabel)||s(e.instance.createLayout))}function c(e){return e.delegateType===i.types.READONLY||s(e.instance.getPropertyInfo)}function d(e){return e.delegateType===i.types.WRITEONLY||s(e.instance.createLabel)||s(e.instance.createLayout)}function p(e,t){e.names.push(t.name);if(t.requiredLibraries){e.requiredLibraries=Object.assign(e.requiredLibraries||{},t.requiredLibraries)}if(t.payload&&!e.payload){e.payload=t.payload}return e}function g(e,n){e=p(e,n);return t(e,{instance:r(n.instance,["getPropertyInfo","getRepresentedProperties"])})}function m(e,n){e=p(e,n);return t(e,{instance:r(n.instance,["createLabel","createControlForProperty","createLayout"])})}function y(e,n){e=p(e,n);return t(e,r(n,"instance"))}function T(e){var t={names:[],instance:{},modelType:e.length&&e[0].modelType};var r=true;var n=true;for(var a=e.length-1;a>=0;a--){var i=e[a];if(f(i)){if(r&&n){t=y(t,i)}else if(r){t=g(t,i)}else if(n){t=m(t,i)}break}else if(c(i)&&r){t=g(t,i);r=false}else if(d(i)&&n){t=m(t,i);n=false}}return e.length?t:undefined}function h(e,t){return new Promise(function(r,n){if(!e){n(new Error("The control parameter is missing"))}if(!t){n(new Error("The modifier parameter is missing"))}if(!e){n(new Error("The input control should be available"))}if(t===a&&(!e.isA||!e.isA("sap.ui.base.ManagedObject"))){n(new Error("The input control should be a managed object"))}r()})}function D(e){return Object.values(i.types).some(function(t){return t===e.delegateType})}function b(e){var t=i._mDefaultDelegateItems[e.modelType]||[];var r=t.map(function(e){return e.delegateType});return r.indexOf(i.types.COMPLETE)>-1||r.indexOf(e.delegateType)>-1||e.delegateType===i.types.COMPLETE&&r.length}i.getKnownDefaultDelegateLibraries=function(){return["sap.ui.comp"]};i.getRequiredLibrariesForDefaultDelegate=function(e,t,r){r=o(t,r);var n=i._mDefaultDelegateItems[r]||[];return n.reduce(function(t,r){var n=e.indexOf(r.name)>-1;return t.concat(Object.keys(n&&r.requiredLibraries||{}))},[])};i.isDelegateRegistered=function(e){return!!i._mDefaultDelegateItems[e]};i.registerDefaultDelegate=function(e){if(!(e.modelType&&e.delegate)){throw new Error("'modelType' and 'delegate' properties are required for registration!")}e.delegateType=e.delegateType||i.types.COMPLETE;if(e.delegateType&&!D(e)){throw new Error("default 'delegateType': "+e.delegateType+" is invalid!")}if(b(e)){throw new Error("modelType "+e.modelType+"is already defined!")}if(!i._mDefaultDelegateItems[e.modelType]){i._mDefaultDelegateItems[e.modelType]=[]}i._mDefaultDelegateItems[e.modelType].push({name:e.delegate,requiredLibraries:e.requiredLibraries,delegateType:e.delegateType,modelType:e.modelType})};i.getDelegateForControl=function(e,t,r,n){return h(e,t).then(function(){return t.getFlexDelegate(e)}).then(function(a){var i=n&&u(e,r)||[];if(a){i.push(a)}return l(t,e,i)}).then(T.bind(this))};i.clear=function(){i._mDefaultDelegateItems={}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/Applier", ["sap/base/Log","sap/ui/core/Element","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/Utils"],function(e,n,r,t,o,a,i){"use strict";var s=new i.FakePromise;function l(e,n){var r=e.getSelector&&e.getSelector();if(!r||!r.id&&!r.name){return Promise.reject(Error("No selector in change found or no selector ID."))}function t(e){if(i.indexOfObject(n.failedSelectors,e)>-1){throw Error("A change depending on that control already failed, so the current change is skipped")}}return n.modifier.bySelectorTypeIndependent(r,n.appComponent,n.view).then(function(o){if(!o){throw Error("A flexibility change tries to change a nonexistent control.")}t(r);var a=e.getDependentControlSelectorList();a.forEach(function(e){var r=n.modifier.bySelector(e,n.appComponent,n.view);if(!r){throw new Error("A dependent selector control of the flexibility change is not available.")}t(e)});return o})}function c(e){return e.modifier.targets==="xmlTree"}function f(e,n,r,a,i){var s=o.getControlIfTemplateAffected(n,e,i);var l=i.modifier;var f=!!t.getAppliedCustomDataValue(s.control,n,l);var u=t.hasChangeApplyFinishedCustomData(s.control,n,l);var d=n.isApplyProcessFinished();var g=i.appComponent;if(d&&!u){if(!c(i)){var p=o.checkIfDependencyIsStillValid.bind(null,g,l,r);a._oChangePersistence.copyDependenciesFromInitialChangesMap(n,p,g)}n.setInitialApplyState()}else if(!d&&u){if(f){n.setRevertData(t.getParsedRevertDataFromCustomData(s.control,n,l));n.markSuccessful()}else{n.markFailed()}}else if(d&&u){n.markSuccessful()}}function u(e,n){var r;if(c(n)&&e.getJsOnly()){r="Change cannot be applied in XML. Retrying in JS."}if(r){e.setInitialApplyState();throw Error(r)}}function d(e,r,o,a){return Promise.resolve().then(function(){if(o instanceof n){r.control=o}if(r.control){return a.modifier.updateAggregation(r.originalControl,e.getContent().boundAggregation)}return undefined}).then(function(){return t.addAppliedCustomData(r.control,e,a,c(a))}).then(function(){var n={success:true};e.markSuccessful(n);return n})}function g(e,n,r,o){var a=c(o);var s={success:false,error:e};var l=n.getId();var f="Change ''{0}'' could not be applied.";var u=e instanceof Error;var d=t.getCustomDataIdentifier(false,u,a);switch(d){case t.notApplicableChangesCustomDataKey:i.formatAndLogMessage("info",[f,e.message],[l]);break;case t.failedChangesCustomDataKeyXml:i.formatAndLogMessage("warning",[f,"Merge error detected while processing the XML tree."],[l],e.stack);break;case t.failedChangesCustomDataKeyJs:i.formatAndLogMessage("error",[f,"Merge error detected while processing the JS control tree."],[l],e.stack);break}return t.addFailedCustomData(r.control,n,o,d).then(function(){if(a){n.setInitialApplyState()}else{n.markFailed(s)}return s})}function p(n,r){var t=r.getChangeType();var o=r.getSelector().id;var a=r.getNamespace()+r.getId()+"."+r.getFileType();var i="A flexibility change could not be applied.";i+="\nThe displayed UI might not be displayed as intedend.";if(n.message){i+="\n   occurred error message: '"+n.message+"'"}i+="\n   type of change: '"+t+"'";i+="\n   LRep location of the change: "+a;i+="\n   id of targeted control: '"+o+"'.";e.warning(i,undefined,"sap.ui.fl.apply._internal.changes.Applier")}function h(e,n,t){var o={appComponent:t,modifier:r};var a=r.bySelector(e.originalSelectorToBeAdjusted,t);var i=n.getBindingInfo(e.getContent().boundAggregation).template;if(a.getParent()){var s=[];var l=a;do{s.push({aggregation:l.sParentAggregationName,index:l.getParent().getAggregation(l.sParentAggregationName).indexOf(l)});l=l.getParent()}while(l.getParent());s.reverse();s.forEach(function(e){i=i.getAggregation(e.aggregation)[e.index]})}e.addDependentControl(i,"originalSelector",o)}function m(e,n,r){var t=e.findIndex(function(e){return e.handler===n});if(t<0){t=e.length;e.push({handler:n,controls:[]})}if(!e[t].controls.includes(r)){e[t].controls.push(r)}}var v={addPreConditionForInitialChangeApplying:function(e){s=s.then(function(){return e})},applyChangeOnControl:function(e,n,r){var t=o.getControlIfTemplateAffected(e,n,r);var a=r.changeHandler?Promise.resolve(r.changeHandler):o.getChangeHandler(e,t,r);return a.then(function(n){u(e,r);return n}).then(function(n){if(e.hasApplyProcessStarted()){return e.addPromiseForApplyProcessing().then(function(n){e.markSuccessful();return n})}else if(!e.isApplyProcessFinished()){return(new i.FakePromise).then(function(){e.startApplying();return n.applyChange(e,t.control,r)}).then(function(n){return d(e,t,n,r)}).catch(function(n){return g(n,e,t,r)})}var o={success:true};e.markSuccessful(o);return o}).catch(function(e){return{success:false,error:e}})},applyAllChangesForControl:function(e,n,t,o){var l=e();var c=o.getId();var u=l.mChanges[c]||[];var d={modifier:r,appComponent:n,view:i.getViewForControl(o)};u.forEach(function(e){f(o,e,l,t,d);if(!e.isApplyProcessFinished()&&!e._ignoreOnce){e.setQueuedForApply()}});s=s.then(function(e,r){var t=[];var o=e.getId();var s=l.mChanges[o]||[];var c;if(l.mControlsWithDependencies[o]){a.removeControlsDependencies(l,o);c=true}s.forEach(function(i){if(i.originalSelectorToBeAdjusted){h(i,e,n);delete i.originalSelectorToBeAdjusted}if(i._ignoreOnce){delete i._ignoreOnce}else if(i.isApplyProcessFinished()){a.resolveDependenciesForChange(l,i.getId(),o)}else if(!l.mDependencies[i.getId()]){t.push(function(){return v.applyChangeOnControl(i,e,r).then(function(){a.resolveDependenciesForChange(l,i.getId(),o)})})}else{var s=v.applyChangeOnControl.bind(v,i,e,r);a.addChangeApplyCallbackToDependency(l,i.getId(),s)}});if(s.length||c){return i.execPromiseQueueSequentially(t).then(function(){return a.processDependentQueue(l,n,o)})}return undefined}.bind(null,o,d));return s},applyAllChangesForXMLView:function(n,r){if(!Array.isArray(r)){var t="No list of changes was passed for processing the flexibility on view: "+n.view+".";e.error(t,undefined,"sap.ui.fl.apply._internal.changes.Applier");r=[]}var a=[];n.failedSelectors=[];return r.reduce(function(e,r){var t;return e.then(l.bind(null,r,n)).then(function(e){t=e;var a=o.getControlIfTemplateAffected(r,t,n);return o.getChangeHandler(r,a,n)}).then(function(e){n.changeHandler=e;r.setQueuedForApply();f(t,r,undefined,undefined,n);if(!r.isApplyProcessFinished()){if(typeof n.changeHandler.onAfterXMLChangeProcessing==="function"){m(a,n.changeHandler,t)}return v.applyChangeOnControl(r,t,n)}return{success:true}}).then(function(e){if(!e.success){throw Error(e.error)}}).catch(function(e){r.getDependentSelectorList().forEach(function(e){if(i.indexOfObject(n.failedSelectors,e)===-1){n.failedSelectors.push(e)}});p(e,r)})},new i.FakePromise).then(function(){delete n.failedSelectors;a.forEach(function(r){r.controls.forEach(function(t){try{r.handler.onAfterXMLChangeProcessing(t,n)}catch(n){e.error("Error during onAfterXMLChangeProcessing",n)}})});return n.view})}};return v});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/FlexCustomData", ["sap/ui/fl/Utils","sap/base/Log","sap/ui/core/CustomData"],function(a,t){"use strict";var e={};e.appliedChangesCustomDataKey="sap.ui.fl.appliedChanges";e.failedChangesCustomDataKeyJs="sap.ui.fl.failedChanges.js";e.failedChangesCustomDataKeyXml="sap.ui.fl.failedChanges.xml";e.notApplicableChangesCustomDataKey="sap.ui.fl.notApplicableChanges";function u(a,t,e,u){var s=u.modifier.getCustomDataInfo(a,t);if(!s.customData){return u.modifier.createAndAddCustomData(a,t,e,u.appComponent)}return Promise.resolve(u.modifier.setProperty(s.customData,"value",e))}function s(a,t){var e=t.getRevertData();if(a&&e!==undefined){return JSON.stringify(e)}return"true"}e.getAppliedCustomDataValue=function(a,t,u){var s=u.getCustomDataInfo(a,e._getCustomDataKey(t,e.appliedChangesCustomDataKey));return s.customDataValue};e.getParsedRevertDataFromCustomData=function(a,u,s){var o=e.getAppliedCustomDataValue(a,u,s);try{return o&&JSON.parse(o)}catch(a){t.error("Could not parse revert data from custom data",o);return undefined}};e.hasChangeApplyFinishedCustomData=function(a,t,u){var s=u.getCustomDataInfo(a,e._getCustomDataKey(t,e.appliedChangesCustomDataKey));if(s.customData){return true}var o=u.getCustomDataInfo(a,e._getCustomDataKey(t,e.failedChangesCustomDataKeyJs));if(o.customData){return true}var r=u.getCustomDataInfo(a,e._getCustomDataKey(t,e.notApplicableChangesCustomDataKey));if(r.customData){return true}return false};e.addAppliedCustomData=function(a,t,o,r){var n=s(r,t);var i=e._getCustomDataKey(t,e.appliedChangesCustomDataKey);return u(a,i,n,o)};e.addFailedCustomData=function(a,t,s,o){var r=e._getCustomDataKey(t,o);return u(a,r,"true",s)};e.destroyAppliedCustomData=function(a,t,u){var s=e._getCustomDataKey(t,e.appliedChangesCustomDataKey);var o=u.getCustomDataInfo(a,s);if(o.customData){u.destroy(o.customData)}};e.getCustomDataIdentifier=function(a,t,u){if(a){return e.appliedChangesCustomDataKey}if(!t){return e.notApplicableChangesCustomDataKey}if(u){return e.failedChangesCustomDataKeyXml}return e.failedChangesCustomDataKeyJs};e._getCustomDataKey=function(a,t){return t+"."+a.getId()};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/Reverter", ["sap/base/Log","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/Utils"],function(e,r,n,t){"use strict";var o={};function i(e){if(!e.isApplyProcessFinished()&&e.hasApplyProcessStarted()){return e.addPromiseForApplyProcessing().then(function(r){if(r&&r.error){e.markRevertFinished(r.error);throw Error(r.error)}})}return Promise.resolve()}function a(e,n,t,i){return o.revertChangeOnControl(e,n,t).then(function(t){r.destroyAppliedCustomData(t||n,e,i.modifier);if(t){i.flexController._oChangePersistence._deleteChangeInMap(e)}})}o.revertChangeOnControl=function(r,t,o){var a=n.getControlIfTemplateAffected(r,t,o);var l;return n.getChangeHandler(r,a,o).then(function(e){l=e}).then(i.bind(null,r)).then(function(){if(r.isSuccessfullyApplied()){r.startReverting();return l.revertChange(r,a.control,o)}throw Error("Change was never applied")}).then(function(){a.control=o.modifier.bySelector(r.getSelector(),o.appComponent,o.view);if(a.bTemplateAffected){return o.modifier.updateAggregation(a.control,r.getContent().boundAggregation)}return undefined}).then(function(){r.markRevertFinished();return a.control}).catch(function(n){var t="Change could not be reverted: "+n.message;e.error(t);r.markRevertFinished(t);return false})};o.revertMultipleChanges=function(r,n){var o=[];r.forEach(function(r){r.setQueuedForRevert();o.push(function(){var o=r.getSelector&&r.getSelector();var i=n.modifier.bySelector(o,n.appComponent);if(!i){e.warning("A flexibility change tries to revert changes on a nonexistent control with id "+o.id);return new t.FakePromise}var l={modifier:n.modifier,appComponent:n.appComponent,view:t.getViewForControl(i)};return a(r,i,l,n)})});return t.execPromiseQueueSequentially(o)};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/Utils", ["sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/requireAsync","sap/ui/fl/Utils"],function(e,r,t,n){"use strict";function a(e,r){if(r||e.hasApplyProcessStarted()){return false}return true}var i={getControlIfTemplateAffected:function(e,r,t){var n=t.modifier;var a={originalControl:r};var i=e.getOriginalSelector();if(e.getContent().boundAggregation&&i){a.control=n.bySelector(i,t.appComponent,t.view);a.controlType=n.getControlType(a.control);a.bTemplateAffected=true}else{a.control=r;a.controlType=n.getControlType(r);a.bTemplateAffected=false}return a},getChangeHandler:function(e,n,a){var i=a.modifier.getLibraryName(n.control);return Promise.all([t("sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerRegistration"),i]).then(function(e){return e[0].waitForChangeHandlerRegistration(e[1])}).then(function(){var t=e.getChangeType();var i=e.getLayer();return r.getChangeHandler(t,n.controlType,n.control,a.modifier,i)})},checkIfDependencyIsStillValid:function(r,t,i,o){var l=n.getChangeFromChangesMap(i.mChanges,o);if(!l){return false}var f=t.bySelector(l.getSelector(),r);var c=e.hasChangeApplyFinishedCustomData(f,l,t);return a(l,c)},filterChangeByView:function(e,r){var t=e.modifier;var n=e.appComponent;var a=r.getSelector();if(!a){return false}if(a.viewSelector){var i=t.getControlIdBySelector(a.viewSelector,n);return i===e.viewId}var o=a.id;if(o){var l;if(r.getSelector().idIsLocal){if(n){l=n.getLocalId(e.viewId)}}else{l=e.viewId}var f=0;var c;do{f=o.indexOf("--",f);c=o.slice(0,f);f++}while(c!==l&&f>0);return c===l}return false}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/Applier", ["sap/base/util/isEmptyObject","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory"],function(e,t){"use strict";var n="$sap.ui.fl.changes";function r(e){var r=e&&e.getEntry&&e.getEntry(n)&&e.getEntry(n).descriptor||[];return r.map(function(e){return t.createAppDescriptorChange(e)})}var a={applyChanges:function(t,n,r){return r.registry().then(function(e){var t=n.map(function(t){return e[t.getChangeType()]&&e[t.getChangeType()]()});return Promise.all(t)}).then(function(a){a.forEach(function(a,s){try{var i=n[s];t=a.applyChange(t,i);if(!a.skipPostprocessing&&!e(i.getTexts())){t=r.processTexts(t,i.getTexts())}}catch(e){r.handleError(e)}});return t})},applyChangesIncludedInManifest:function(e,t){var a=r(e);var s=e.getJson();delete s[n];if(a.length>0){return this.applyChanges(s,a,t).then(function(){return})}return Promise.resolve()}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ApplyStrategyFactory", ["sap/ui/fl/requireAsync","sap/base/Log"],function(e,r){"use strict";var n={registry:function(){return e("sap/ui/fl/apply/_internal/changes/descriptor/Registration")},handleError:function(e){r.error(e)},processTexts:function(e,n){var t=JSON.stringify(e);Object.keys(n).forEach(function(e){if(n[e].value[""]){t=t.replace("{{"+e+"}}",n[e].value[""])}else{r.error("Text change has to contain default language")}});return JSON.parse(t)}};var t={getRuntimeStrategy:function(){return n}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/Preprocessor", ["sap/ui/fl/apply/_internal/changes/descriptor/Applier","sap/ui/fl/apply/_internal/changes/descriptor/ApplyStrategyFactory","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/performance/Measurement","sap/ui/fl/Utils"],function(e,t,n,a,i,r){"use strict";var s={preprocessManifest:function(s,p){if(!r.isApplication(s,true)||!p.id){return Promise.resolve(s)}i.start("flexStateInitialize","Initialization of flex state",["sap.ui.fl"]);var l=p.componentData||{};var f=a.getFlexReference({manifest:s,componentData:l});if(!a.getChangeManifestFromAsyncHints(p.asyncHints)){n.initialize({componentData:l,asyncHints:p.asyncHints,rawManifest:s,componentId:p.id,reference:f,partialFlexState:true}).then(i.end.bind(undefined,"flexStateInitialize"));return Promise.resolve(s)}return n.initialize({componentData:l,asyncHints:p.asyncHints,rawManifest:s,componentId:p.id,reference:f,partialFlexState:true}).then(function(){i.end("flexStateInitialize");i.start("flexAppDescriptorMerger","Client side app descriptor merger",["sap.ui.fl"]);var a=Object.assign({},s);var r=n.getAppDescriptorChanges(f);return e.applyChanges(a,r,t.getRuntimeStrategy())}).then(function(e){i.end("flexAppDescriptorMerger");return e})}};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/controlVariants/URLHandler", ["sap/ui/core/Component","sap/base/Log","sap/base/util/deepEqual","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/ui/base/ManagedObjectObserver","sap/ui/thirdparty/hasher","sap/base/util/includes","sap/ui/fl/apply/_internal/controlVariants/Utils"],function(e,a,r,t,n,o,i,s,l,p){"use strict";var m={};var c={};function d(e,a){var r=[];return e.reduce(function(e,t){var n=a.getVariantManagementReference(t).variantManagementReference;if(n){if(l(r,n)){e.updateRequired=true;return e}r.push(n)}if(n&&a.oData[n].currentVariant!==t){e.updateRequired=true;if(a.oData[n].currentVariant!==a.oData[n].defaultVariant){e.parameters.push(a.oData[n].currentVariant)}}else{e.parameters.push(t)}return e},{updateRequired:false,parameters:[]})}function u(e,a){var r=n.get(["params",p.VARIANT_TECHNICAL_PARAMETER],e);if(r){var t=d(r,a);if(t.updateRequired){c.update({updateURL:!a._bDesignTimeMode,parameters:t.parameters,updateHashEntry:true,model:a})}}}function f(e,r){try{var t=e.getUShellService("URLParsing");if(t){var n=t.parseShellHash(r);u(n,e)}}catch(e){a.error(e.message)}var o=e.getUShellService("ShellNavigation");return o&&o.NavigationFilterStatus.Continue}function v(e){var a=e.getUShellService("ShellNavigation");if(!m[e.sFlexReference]){m[e.sFlexReference]=f.bind(null,e);if(a){a.registerNavigationFilter(m[e.sFlexReference])}}}function A(e){var a=e.getUShellService("ShellNavigation");if(a){a.unregisterNavigationFilter(m[e.sFlexReference]);delete m[e.sFlexReference]}}function h(e){var t=e.model;var n=t.getUShellService("URLParsing");var o=t.getUShellService("CrossApplicationNavigation");var i=n&&n.parseShellHash(s.getHash());if(i&&i.params){var l=Object.assign({},i.params);var m=t.oAppComponent&&t.oAppComponent.getComponentData&&t.oAppComponent.getComponentData()&&t.oAppComponent.getComponentData().technicalParameters;if(!m){a.warning("Component instance not provided, so technical parameters in component data and browser history remain unchanged")}if(e.parameters.length===0){delete i.params[p.VARIANT_TECHNICAL_PARAMETER];m&&delete m[p.VARIANT_TECHNICAL_PARAMETER]}else{i.params[p.VARIANT_TECHNICAL_PARAMETER]=e.parameters;m&&(m[p.VARIANT_TECHNICAL_PARAMETER]=e.parameters)}if(e.silent){s.changed.active=false;s.replaceHash(n.constructShellHash(i));s.changed.active=true}else if(!r(l,i.params)){o.toExternal({target:{semanticObject:i.semanticObject,action:i.action,context:i.contextRaw},params:i.params,appSpecificRoute:i.appSpecificRoute,writeHistory:false})}}}function R(e){var a={index:-1};var r=e.model;var n=r.getUShellService("URLParsing");var o=n&&n.parseShellHash(s.getHash()).params;if(o){a.parameters=[];if(r._bDesignTimeMode){o[p.VARIANT_TECHNICAL_PARAMETER]=c.getStoredHashParams(e)}if(Array.isArray(o[p.VARIANT_TECHNICAL_PARAMETER])){o[p.VARIANT_TECHNICAL_PARAMETER]=o[p.VARIANT_TECHNICAL_PARAMETER].map(decodeURIComponent);o[p.VARIANT_TECHNICAL_PARAMETER].some(function(t,n){if(r.getVariant(t,e.vmReference)){a.index=n;return true}return false})}}return t(a,o&&o[p.VARIANT_TECHNICAL_PARAMETER]&&{parameters:o[p.VARIANT_TECHNICAL_PARAMETER]})}function g(e){var a=e.getUShellService("URLParsing");var r=a&&a.parseShellHash(s.getHash());return r&&r.params&&r.params[p.VARIANT_TECHNICAL_PARAMETER]}c.variantTechnicalParameterName="sap-ui-fl-control-variant-id";c.initialize=function(e){var a=e.model;var r=a.getUShellService("URLParsing");var t=r&&r.parseShellHash(s.getHash());var n=t&&t.params&&t.params[p.VARIANT_TECHNICAL_PARAMETER];c.attachHandlers(e);c.update({model:a,parameters:n,updateHashEntry:Array.isArray(n)&&n.length>0});u(t,a)};c.updateVariantInURL=function(e){var a=c.removeURLParameterForVariantManagement(e);if(!a.parameters){return}var r=a.parameters||[];var t=a.index;var n=e.newVReference===e.model.oData[e.vmReference].defaultVariant;if(!n){if(t===-1){r=r.concat([e.newVReference])}else{r=r.slice(0,t).concat([e.newVReference],r.slice(t))}}if(!n||t>-1){c.update({parameters:r,updateURL:!e.model._bDesignTimeMode,updateHashEntry:true,model:e.model})}};c.removeURLParameterForVariantManagement=function(e){var a=R(e);if(a.index>-1){a.parameters.splice(a.index,1)}return a};c.attachHandlers=function(a){function r(){return a.model._oVariantSwitchPromise.then(function(){a.model._oHashData.controlPropertyObservers.forEach(function(e){e.destroy()});A(a.model);a.model.destroy();a.model.oComponentDestroyObserver.unobserve(a.model.oAppComponent,{destroy:true});a.model.oComponentDestroyObserver.destroy()})}v(a.model);if(!a.model.oComponentDestroyObserver&&a.model.oAppComponent instanceof e){a.model.oComponentDestroyObserver=new i(r.bind(null));a.model.oComponentDestroyObserver.observe(a.model.oAppComponent,{destroy:true})}};c.registerControl=function(e){if(e.updateURL){e.model._oHashData.variantControlIds.push(e.vmReference)}};c.update=function(e){if(!e.model._oHashData){e.model._oHashData={hashParams:[],controlPropertyObservers:[],variantControlIds:[]}}if(!e||!Array.isArray(e.parameters)){a.info("Variant URL parameters could not be updated since invalid parameters were received");return}if(e.updateURL){h(e)}if(e.updateHashEntry&&!o(e.model)){e.model._oHashData.hashParams=e.parameters}};c.getStoredHashParams=function(e){return Array.prototype.slice.call(e.model._oHashData.hashParams)};c.handleModelContextChange=function(e){var a="modelContextChange";function r(a,r){var t=r.model.getVariantManagementReferenceForControl(a.getSource());var n=r.model._oHashData.variantControlIds;var o=n.indexOf(t);if(o>-1){n.slice(o).forEach(function(a){if(R({vmReference:a,model:e.model}).index===-1){r.model.switchToDefaultForVariantManagement(a)}})}}var t=new i(function(t){if(t.current===true&&t.old===false){t.object.attachEvent(a,{model:e.model},r)}else if(t.current===false&&t.old===true){t.object.detachEvent(a,r)}});t.observe(e.vmControl,{properties:["resetOnContextChange"]});e.model._oHashData.controlPropertyObservers.push(t);if(e.vmControl.getResetOnContextChange()!==false){e.vmControl.attachEvent(a,{model:e.model},r)}};c.clearAllVariantURLParameters=function(e){if(g(e.model)){c.update({updateURL:true,parameters:[],updateHashEntry:false,model:e.model})}};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/controlVariants/Utils", ["sap/ui/core/Core","sap/ui/fl/Utils"],function(e,t){"use strict";function r(e,t){if(!t){return undefined}if(e.indexOf(t.getId())>-1){return t.getId()}return r(e,t.getParent())}function n(r,n){var a=t.getAppComponentForControl(r);var o=a.getRootControl();var i=[];if(!n&&o.getDomRef()){i=Array.from(o.getDomRef().querySelectorAll(".sapUiFlVarMngmt"))}if(n||i.length===0){i=Array.from(e.getStaticAreaRef().querySelectorAll(".sapUiFlVarMngmt"))}return i.map(function(e){return e.id})}var a={DEFAULT_AUTHOR:"SAP",VARIANT_TECHNICAL_PARAMETER:"sap-ui-fl-control-variant-id",compareVariants:function(e,t){if(e.getName().toLowerCase()<t.getName().toLowerCase()){return-1}else if(e.getName().toLowerCase()>t.getName().toLowerCase()){return 1}return 0},getIndexToSortVariant:function(e,t){var r=e.length;e.some(function(e,n){if(a.compareVariants(t.instance,e.instance)<0){r=n;return true}});return r},getRelevantVariantManagementControlId:function(t,a,o){var i={};if(!a||!a.length){a=n(t,o)}var u=a.reduce(function(t,r){var n=e.byId(r);if(n){var a=n.getFor();a.forEach(function(e){i[e]=r});t=t.concat(a)}return t},[]);var f=r(u,t);return i[f]},belongsToVariantManagement:function(e){var t=n(e);return!!a.getRelevantVariantManagementControlId(e,t)},getAllVariantManagementControlIds:function(e){return n(e)}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/AppDescriptorChange", ["sap/ui/fl/apply/_internal/flexObjects/FlexObject"],function(e){"use strict";var t=e.extend("sap.ui.fl.apply._internal.flexObjects.AppDescriptorChange",{metadata:{properties:{appDescriptorChange:{type:"boolean",defaultValue:true}}}});t.getMappingInfo=function(){return Object.assign(e.getMappingInfo(),{appDescriptorChange:"appDescriptorChange"})};t.prototype.getMappingInfo=function(){return t.getMappingInfo()};t.prototype.getSelector=function(){return{}};t.prototype.isValidForDependencyMap=function(){return false};t.prototype.getVariantReference=function(){return undefined};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/CompVariant", ["sap/base/util/restricted/_pick","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/Variant","sap/ui/fl/LayerUtils","sap/ui/fl/Layer","sap/ui/fl/registry/Settings","sap/ui/fl/Utils"],function(t,e,r,n,i,a,s){"use strict";var o=r.extend("sap.ui.fl.apply._internal.flexObjects.CompVariant",{metadata:{properties:{persisted:{type:"boolean",defaultValue:true},persistencyKey:{type:"string"}},aggregations:{revertData:{type:"sap.ui.base.ManagedObject",multiple:true,singularName:"revertData"},changes:{type:"sap.ui.base.ManagedObject",multiple:true}}},constructor:function(t){r.apply(this,arguments);this.setFileType("variant");if(t.favorite!==undefined){this.setFavorite(!!t.favorite)}else if(t.layer===i.VENDOR||t.layer===i.CUSTOMER_BASE){this.setFavorite(true)}}});o.STANDARD_VARIANT_ID="*standard*";o.getMappingInfo=function(){return Object.assign(r.getMappingInfo(),{persistencyKey:"selector.persistencyKey",variantId:"variantId"})};o.prototype.getMappingInfo=function(){return o.getMappingInfo()};function p(t){var e=a.getInstanceOrUndef();var r=e&&e.getUserId();return!r||!t||r.toUpperCase()===t.toUpperCase()}function u(t,e,r){if(e){return t===e}else if(t===i.USER){return true}var s=a.getInstanceOrUndef();if(n.isSapUiLayerParameterProvided()){e=n.getCurrentLayer()}else if(!e){e=s.isPublicLayerAvailable()?i.PUBLIC:i.CUSTOMER}var o=t===e;var u=s.isKeyUser()||p(r);return o&&u}function f(t){return!t||s.getCurrentLanguage()===t}function c(t,e){var r=a.getInstanceOrUndef();if(!r){return true}if(!t||!e){return true}var n=r.getSystem();var i=r.getClient();return n===t&&e===i}o.prototype.getPackage=function(){return this.getFlexObjectMetadata().packageName};o.prototype.isVariant=function(){return true};o.prototype.isRenameEnabled=function(t){return!this.getStandardVariant()&&this.isEditEnabled(t)&&f(this.getSupportInformation().originalLanguage)};o.prototype.isEditEnabled=function(t){var e=t&&n.isDeveloperLayer(t);var r=c(this.getSupportInformation().sourceSystem,this.getSupportInformation().sourceClient);var i=u(this.getLayer(),t,this.getOwnerId());return e||r&&i};o.prototype.isDeleteEnabled=function(t){var e=c(this.getSupportInformation().sourceSystem,this.getSupportInformation().sourceClient);return e&&u(this.getLayer(),t,this.getOwnerId())&&!this.getStandardVariant()};o.prototype.storeFavorite=function(t){if(t!==this.getFavorite()){this.setState(e.LifecycleState.DIRTY);this.setFavorite(t)}};o.prototype.getOwnerId=function(){return this.getSupportInformation().user||""};o.prototype.storeContent=function(t){this.setContent(t)};o.prototype.storeExecuteOnSelection=function(t){if(t!==this.getExecuteOnSelection()){this.setState(e.LifecycleState.DIRTY);this.setExecuteOnSelection(t)}};o.prototype.storeName=function(t){this.setName(t)};o.prototype.storeContexts=function(t){this.setContexts(t);this.setState(e.LifecycleState.DIRTY)};o.prototype.cloneFileContentWithNewId=function(){var t=r.prototype.cloneFileContentWithNewId.apply(this,arguments);t.variantId=t.fileName;return t};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/CompVariantRevertData", ["sap/ui/fl/apply/_internal/flexObjects/RevertData"],function(e){"use strict";return e.extend("sap.ui.fl.apply._internal.flexObjects.CompVariantRevertData",{metadata:{properties:{change:{type:"object"}}}})});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/ControllerExtensionChange", ["sap/ui/fl/apply/_internal/flexObjects/FlexObject"],function(e){"use strict";var t=e.extend("sap.ui.fl.apply._internal.flexObjects.ControllerExtensionChange",{metadata:{properties:{controllerName:{type:"string"}}}});t.getMappingInfo=function(){return Object.assign(e.getMappingInfo(),{controllerName:"selector.controllerName"})};t.prototype.getMappingInfo=function(){return t.getMappingInfo()};t.prototype.getSelector=function(){return{controllerName:this.getControllerName()}};t.prototype.getVariantReference=function(){return undefined};t.prototype.isValidForDependencyMap=function(){return false};t.prototype.setInitialApplyState=function(){};t.prototype.getModuleName=function(){return this.getFlexObjectMetadata().moduleName};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/FlVariant", ["sap/ui/core/Core","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexObjects/Variant"],function(e,t,n){"use strict";var a=n.extend("sap.ui.fl.apply._internal.flexObjects.FlVariant",{metadata:{properties:{variantReference:{type:"string"},variantManagementReference:{type:"string"},visible:{type:"boolean",defaultValue:true}}},constructor:function(a,i){if(typeof a!=="string"&&a!==undefined){i=a;a=i&&i.id}i.fileType="ctrl_variant";if(i.favorite===undefined){i.favorite=true}n.apply(this,arguments);if(!this.getName()&&i.content&&i.content.title){this.setName(i.content.title)}var r=this.getName().match(/.i18n>(\w+)./);if(r){this.setName(e.getLibraryResourceBundle("sap.ui.fl").getText(r[1]))}var o=this.getSupportInformation();if(this.getId()===this.getVariantManagementReference()){this.setStandardVariant(true);if(!o.user){o.user=t.DEFAULT_AUTHOR;this.setSupportInformation(o)}}}});a.getMappingInfo=function(){return Object.assign(n.getMappingInfo(),{variantReference:"variantReference",variantManagementReference:"variantManagementReference"})};a.prototype.getMappingInfo=function(){return a.getMappingInfo()};a.prototype.cloneFileContentWithNewId=function(){var e=n.prototype.cloneFileContentWithNewId.apply(this,arguments);e.variantReference=e.fileName;return e};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/FlexObject", ["sap/base/util/deepClone","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/restricted/_omit","sap/ui/base/ManagedObject","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/Layer","sap/ui/fl/registry/Settings","sap/ui/fl/Utils"],function(t,e,a,n,r,i,o,s,p,u){"use strict";var c=i.extend("sap.ui.fl.apply._internal.flexObjects.FlexObject",{metadata:{properties:{adaptationId:{type:"string"},state:{type:"string",defaultValue:o.LifecycleState.NEW},fileType:{type:"string",defaultValue:"change"},layer:{type:"string"},flexObjectMetadata:{type:"object",defaultValue:{}},supportInformation:{type:"object",defaultValue:{}},content:{type:"any",defaultValue:{}},texts:{type:"object",defaultValue:{}}}},constructor:function(){i.apply(this,arguments);var t=this.getFlexObjectMetadata();var e=t.reference;if(e){t.namespace=t.namespace||u.createNamespace({reference:e},this.getFileType());t.projectId=t.projectId||e}this.setFlexObjectMetadata(t);var a=this.getSupportInformation();a.originalLanguage=a.originalLanguage||u.getCurrentLanguage();this.setSupportInformation(a)}});c.getMappingInfo=function(){return Object.assign({},{"flexObjectMetadata.changeType":"changeType","flexObjectMetadata.reference":"reference","flexObjectMetadata.namespace":"namespace","flexObjectMetadata.creation":"creation","flexObjectMetadata.projectId":"projectId","flexObjectMetadata.packageName":"packageName","flexObjectMetadata.moduleName":"moduleName","supportInformation.generator":"support.generator","supportInformation.service":"support.service","supportInformation.sourceSystem":"sourceSystem","supportInformation.sourceClient":"sourceClient","supportInformation.user":"support.user","supportInformation.sapui5Version":"support.sapui5Version","supportInformation.sourceChangeFileName":"support.sourceChangeFileName","supportInformation.compositeCommand":"support.compositeCommand","supportInformation.command":"support.command","supportInformation.oDataInformation":"oDataInformation","supportInformation.originalLanguage":"originalLanguage",adaptationId:"adaptationId",layer:"layer",fileType:"fileType",id:"fileName",content:"content",texts:"texts"})};c.prototype.getMappingInfo=function(){return c.getMappingInfo()};c.prototype.setContent=function(t,e){this.setProperty("content",t);if(!e){this.setState(o.LifecycleState.DIRTY)}return this};c.prototype.getFlexObjectMetadata=function(){return Object.assign({},this.getProperty("flexObjectMetadata"))};c.prototype.getSupportInformation=function(){return Object.assign({},this.getProperty("supportInformation"))};function f(t,e){if(!Object.values(o.LifecycleState).includes(t)){return false}if(e===o.LifecycleState.NEW&&t===o.LifecycleState.DIRTY){return false}return true}c.prototype.setState=function(t){var e=this.getState();if(e!==t&&f(t,e)){this._sPreviousState=e;this.setProperty("state",t)}return this};c.prototype.isPersisted=function(){return this.getState()===o.LifecycleState.PERSISTED};c.prototype.markForDeletion=function(){this.setState(o.LifecycleState.DELETED)};c.prototype.restorePreviousState=function(){if(this._sPreviousState){this.setState(this._sPreviousState);delete this._sPreviousState}};c.prototype.isChangeFromOtherSystem=function(){var t=this.getSupportInformation().sourceSystem;var e=this.getSupportInformation().sourceClient;if(!t||!e){return false}var a=p.getInstanceOrUndef();if(!a){return true}var n=a.getSystem();var r=a.getClient();if(!n||!r){return false}return t!==n||e!==r};c.prototype.getNamespace=function(){return this.getFlexObjectMetadata().namespace};c.prototype.getChangeType=function(){return this.getFlexObjectMetadata().changeType};c.prototype.isUserDependent=function(){return this.getLayer()===s.USER};c.prototype.getText=function(t){var e=this.getTexts()[t]||{};return e.value||""};c.prototype.setText=function(t,e,a,n){var r=Object.assign({},this.getTexts());var i={value:e};if(a){i.type=a}r[t]=Object.assign({},r[t],i);this.setTexts(r);if(!n){this.setState(o.LifecycleState.DIRTY)}return this};c.prototype.setRequest=function(t){this._sRequest=t};c.prototype.getRequest=function(){return this._sRequest||""};c.prototype.getDefinition=function(){return this.convertToFileContent()};c.prototype.getCreation=function(){return this.getFlexObjectMetadata().creation};c.prototype.setCreation=function(t){var e=this.getFlexObjectMetadata();e.creation=t;this.setFlexObjectMetadata(e)};function l(t){return t.length?t.charAt(0).toUpperCase()+t.slice(1):t}function g(t){return typeof this[t]==="function"?this[t].bind(this):function(){throw new Error(t+" is not a valid mutator")}}function h(e){var a=e.split(".");a[0]=l(a[0]);var r=a.shift();var i=g.call(this,"get"+r);var o=g.call(this,"set"+r);return{getValue:function(){var e=t(i());if(a.length>0){return n.get(a,e)}return e},setValue:function(e){var r=t(i());if(a.length>0){n.set(a,e,r)}else{r=e}o(r);return this}.bind(this)}}c.prototype.convertToFileContent=function(){var t={};Object.entries(this.getMappingInfo()).forEach(function(e){var a=h.call(this,e[0]).getValue();if(a!==undefined){n.set(e[1],a,t)}}.bind(this));return t};function y(t,e){var a=h.call(this,t);var n=a.getValue();if(n!==e){a.setValue(e)}}c.mapFileContent=function(e,n){var r=Object.values(n);var i={};var o=function(t,e,s){var p=s?s+"."+t:t;var u=r.indexOf(p);if(u>=0){var c=Object.keys(n)[u];i[c]=e}else if(a(e)){Object.entries(e).forEach(function(t){o(t[0],t[1],p)})}};Object.entries(t(e,15)).forEach(function(t){o(t[0],t[1])});return i};c.prototype.update=function(t){var e=r(t,["fileName"]);var a=c.mapFileContent(e,this.getMappingInfo());Object.entries(a).forEach(function(t){y.call(this,t[0],t[1])}.bind(this))};c.prototype.setResponse=function(t){if(!t||e(t)){return}this.update(t);this.setState(o.LifecycleState.PERSISTED)};c.prototype.cloneFileContentWithNewId=function(){var t=this.convertToFileContent();t.fileName=u.createDefaultFileName(t.fileName.split("_").pop());return t};return c});
/* !
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory", ["sap/base/util/restricted/_pick","sap/base/util/ObjectPath","sap/ui/core/Core","sap/ui/fl/apply/_internal/flexObjects/AppDescriptorChange","sap/ui/fl/apply/_internal/flexObjects/CompVariant","sap/ui/fl/apply/_internal/flexObjects/ControllerExtensionChange","sap/ui/fl/apply/_internal/flexObjects/FlexObject","sap/ui/fl/apply/_internal/flexObjects/FlVariant","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/UIChange","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Utils"],function(e,t,n,r,a,i,o,c,s,l,p,u,f){"use strict";var g={BASE_FLEX_OBJECT:o,COMP_VARIANT_OBJECT:a,FL_VARIANT_OBJECT:c,CONTROLLER_EXTENSION:i,APP_DESCRIPTOR_CHANGE:r,UI_CHANGE:l};function m(e){if(e.fileType==="variant"){return g.COMP_VARIANT_OBJECT}else if(e.fileType==="ctrl_variant"){return g.FL_VARIANT_OBJECT}else if(e.changeType==="codeExt"){return g.CONTROLLER_EXTENSION}else if(e.appDescriptorChange){return g.APP_DESCRIPTOR_CHANGE}return g.UI_CHANGE}function C(e){var t=e.type||e.changeType;var r=e.fileName||e.id||f.createDefaultFileName(t);return{id:r,adaptationId:e.adaptationId,layer:e.layer,content:e.content,texts:e.texts,supportInformation:{service:e.ODataService,oDataInformation:e.oDataInformation,command:e.command,compositeCommand:e.compositeCommand,generator:e.generator,sapui5Version:n.getConfiguration().getVersion().toString(),sourceChangeFileName:e.support&&e.support.sourceChangeFileName,sourceSystem:e.sourceSystem,sourceClient:e.sourceClient,originalLanguage:e.originalLanguage,user:e.user},flexObjectMetadata:{changeType:t,reference:e.reference,packageName:e.packageName,projectId:e.projectId}}}var O={};O.createFromFileContent=function(e,r,a){var i=Object.assign({},e);var c=r||m(i);if(!c){throw new Error("Unknown file type")}i.support=Object.assign({generator:"FlexObjectFactory.createFromFileContent",sapui5Version:n.getConfiguration().getVersion().toString()},i.support||{});var l=c.getMappingInfo();var p=o.mapFileContent(i,l);var u=Object.entries(p).reduce(function(e,n){t.set(n[0].split("."),n[1],e);return e},{});var f=new c(u);if(a){f.setProperty("state",s.LifecycleState.PERSISTED)}return f};O.createUIChange=function(e){var t=C(e);if(!t.layer){t.layer=e.isUserDependent?p.USER:u.getCurrentLayer()}t.selector=e.selector;t.jsOnly=e.jsOnly;t.variantReference=e.variantReference;t.fileType=e.fileType||"change";return new l(t)};O.createAppDescriptorChange=function(e){e.compositeCommand=e.compositeCommand||e.support&&e.support.compositeCommand;var t=C(e);return new r(t)};O.createControllerExtensionChange=function(e){e.generator=e.generator||"FlexObjectFactory.createControllerExtensionChange";e.changeType="codeExt";e.content={codeRef:e.codeRef};var t=C(e);t.flexObjectMetadata.moduleName=e.moduleName;t.controllerName=e.controllerName;return new i(t)};O.createFlVariant=function(e){e.generator=e.generator||"FlexObjectFactory.createFlVariant";var t=C(e);t.variantManagementReference=e.variantManagementReference;t.variantReference=e.variantReference;t.contexts=e.contexts;t.texts={variantName:{value:e.variantName,type:"XFLD"}};return new c(t)};O.createCompVariant=function(e){e.generator=e.generator||"FlexObjectFactory.createCompVariant";e.user=t.get("support.user",e);var n=C(e);n.variantId=e.variantId||n.id;n.contexts=e.contexts;n.favorite=e.favorite;n.persisted=e.persisted;n.persistencyKey=e.persistencyKey||t.get("selector.persistencyKey",e);if(e.layer===p.VENDOR||e.layer===p.CUSTOMER_BASE){n.favorite=true}if(e.executeOnSelection!==undefined){n.executeOnSelection=e.executeOnSelection}else{n.executeOnSelection=n.content&&(n.content.executeOnSelect||n.content.executeOnSelection)}return new a(n)};return O});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/RevertData", ["sap/ui/base/ManagedObject"],function(e){"use strict";return e.extend("sap.ui.fl.apply._internal.flexObjects.RevertData",{metadata:{properties:{type:{type:"string"},content:{type:"object"}}}})});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/States", [],function(){"use strict";return{LifecycleState:{NEW:"NEW",PERSISTED:"NONE",DELETED:"DELETE",DIRTY:"UPDATE"},ApplyState:{INITIAL:"initial",APPLYING:"applying",REVERTING:"reverting",REVERT_FINISHED:"revert finished",APPLY_SUCCESSFUL:"apply successful",APPLY_FAILED:"apply failed"},Operations:{APPLY:"apply",REVERT:"revert"}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/UIChange", ["sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/ui/fl/apply/_internal/flexObjects/FlexObject","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/Utils"],function(e,t,s,r,o){"use strict";var n=s.extend("sap.ui.fl.apply._internal.flexObjects.UIChange",{metadata:{properties:{selector:{type:"object",defaultValue:{}},dependentSelectors:{type:"object",defaultValue:{}},applyState:{type:"string",defaultValue:r.ApplyState.NEW},jsOnly:{type:"boolean"},variantReference:{type:"string"},savedToVariant:{type:"boolean"},revertData:{type:"any",defaultValue:null}},aggregations:{},associations:{},events:{}},constructor:function(){s.apply(this,arguments);this._oChangeProcessingPromises={};this.setInitialApplyState()}});n.getMappingInfo=function(){return Object.assign(s.getMappingInfo(),{selector:"selector",dependentSelectors:"dependentSelector",jsOnly:"jsOnly",variantReference:"variantReference"})};n.prototype.getMappingInfo=function(){return n.getMappingInfo()};n.prototype.setQueuedForRevert=function(){if(this._aQueuedProcesses[this._aQueuedProcesses.length-1]!==r.Operations.REVERT){this._aQueuedProcesses.unshift(r.Operations.REVERT)}};n.prototype.isQueuedForRevert=function(){return this._aQueuedProcesses.indexOf(r.Operations.REVERT)>-1};n.prototype.setQueuedForApply=function(){if(this._aQueuedProcesses[this._aQueuedProcesses.length-1]!==r.Operations.APPLY){this._aQueuedProcesses.unshift(r.Operations.APPLY)}};n.prototype.isQueuedForApply=function(){return this._aQueuedProcesses.indexOf(r.Operations.APPLY)>-1};n.prototype.setInitialApplyState=function(){this._aQueuedProcesses=[];delete this._ignoreOnce;this.setApplyState(r.ApplyState.INITIAL);this._oChangeProcessedPromise={};this._oChangeProcessedPromise.promise=new Promise(function(e){this._oChangeProcessedPromise.resolveFunction={resolve:e}}.bind(this))};n.prototype.isInInitialState=function(){return this._aQueuedProcesses.length===0&&this.getApplyState()===r.ApplyState.INITIAL};n.prototype.isValidForDependencyMap=function(){return!!this.getSelector().id};n.prototype.startApplying=function(){this.setApplyState(r.ApplyState.APPLYING)};n.prototype.markFinished=function(e,t){this._aQueuedProcesses.pop();this._resolveChangeProcessingPromiseWithError(r.Operations.APPLY,e);var s=t!==false?r.ApplyState.APPLY_SUCCESSFUL:r.ApplyState.APPLY_FAILED;this.setApplyState(s)};n.prototype.markSuccessful=function(e){this.markFinished(e,true)};n.prototype.markFailed=function(e){this.markFinished(e,false)};n.prototype.startReverting=function(){this.setApplyState(r.ApplyState.REVERTING)};n.prototype.markRevertFinished=function(e){this._aQueuedProcesses.pop();this._resolveChangeProcessingPromiseWithError(r.Operations.REVERT,e);this.setApplyState(r.ApplyState.REVERT_FINISHED)};n.prototype.hasApplyProcessStarted=function(){return this.getApplyState()===r.ApplyState.APPLYING};n.prototype.isSuccessfullyApplied=function(){return this.getApplyState()===r.ApplyState.APPLY_SUCCESSFUL};n.prototype.hasApplyProcessFailed=function(){return this.getApplyState()===r.ApplyState.APPLY_FAILED};n.prototype.isApplyProcessFinished=function(){return this.isSuccessfullyApplied()||this.hasApplyProcessFailed()};n.prototype.hasRevertProcessStarted=function(){return this.getApplyState()===r.ApplyState.REVERTING};n.prototype.isRevertProcessFinished=function(){return this.getApplyState()===r.ApplyState.REVERT_FINISHED};n.prototype.isCurrentProcessFinished=function(){return this._aQueuedProcesses.length===0&&this.getApplyState()!==r.ApplyState.INITIAL};n.prototype.addChangeProcessingPromise=function(e){if(!this._oChangeProcessingPromises[e]){this._oChangeProcessingPromises[e]={};this._oChangeProcessingPromises[e].promise=new Promise(function(t){this._oChangeProcessingPromises[e].resolveFunction={resolve:t}}.bind(this))}return this._oChangeProcessingPromises[e].promise};n.prototype.addChangeProcessingPromises=function(){var e=[];if(this.getApplyState()===r.ApplyState.INITIAL&&this._oChangeProcessedPromise){e.push(this._oChangeProcessedPromise.promise)}this._aQueuedProcesses.forEach(function(t){e.push(this.addChangeProcessingPromise(t))},this);return e};n.prototype.addPromiseForApplyProcessing=function(){return this.addChangeProcessingPromise(r.Operations.APPLY)};n.prototype._resolveChangeProcessingPromiseWithError=function(e,t){if(this._oChangeProcessingPromises[e]){this._oChangeProcessingPromises[e].resolveFunction.resolve(t);delete this._oChangeProcessingPromises[e]}if(this._oChangeProcessedPromise){this._oChangeProcessedPromise.resolveFunction.resolve(t);this._oChangeProcessedPromise=null}};n.prototype.hasRevertData=function(){return this.getRevertData()!==null};n.prototype.resetRevertData=function(){this.setRevertData(null)};n.prototype.setDependentSelectors=function(e){this.setProperty("dependentSelectors",e);delete this._aDependentSelectorList};n.prototype.addDependentControl=function(t,s,r,o){if(!t){throw new Error("Parameter vControl is mandatory")}if(!s){throw new Error("Parameter sAlias is mandatory")}if(!r||e(r)){throw new Error("Parameter mPropertyBag is mandatory")}var n=Object.assign({},this.getDependentSelectors());if(n[s]){throw new Error("Alias '"+s+"' already exists in the change.")}var i=r.modifier;var a=r.appComponent;if(Array.isArray(t)){var p=[];t.forEach(function(e){p.push(i.getSelector(e,a,o))});n[s]=p}else{n[s]=i.getSelector(t,a,o)}this.setDependentSelectors(n);delete this._aDependentSelectorList};n.prototype.getDependentControl=function(e,t){var s=[];if(!e){throw new Error("Parameter sAlias is mandatory")}if(!t){throw new Error("Parameter mPropertyBag is mandatory")}var r=t.modifier;var o=t.appComponent;var n=this.getDependentSelectors()[e];if(Array.isArray(n)){n.forEach(function(e){s.push(r.bySelector(e,o,t.view))});return s}return r.bySelector(n,o,t.view)};n.prototype.getDependentSelectorList=function(){var e=[this.getSelector()];if(!this._aDependentSelectorList){if(!this.getOriginalSelector()){Object.entries(this.getDependentSelectors()).some(function(t){var s=t[1];if(!Array.isArray(s)){s=[s]}s.forEach(function(t){if(t&&o.indexOfObject(e,t)===-1){e.push(t)}})})}this._aDependentSelectorList=e}return this._aDependentSelectorList};n.prototype.getDependentControlSelectorList=function(){var e=this.getDependentSelectorList().concat();if(e.length>0){var t=this.getSelector();var s=o.indexOfObject(e,t);if(s>-1){e.splice(s,1)}}return e};n.prototype.getOriginalSelector=function(){return this.getDependentSelectors().originalSelector};n.prototype.setExtensionPointInfo=function(e){this._oExtensionPointInfo=e};n.prototype.getExtensionPointInfo=function(){if(t(this._oExtensionPointInfo)){return Object.assign({},this._oExtensionPointInfo)}return this._oExtensionPointInfo};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/UpdatableChange", ["sap/ui/fl/apply/_internal/flexObjects/UIChange"],function(e){"use strict";var t=e.extend("sap.ui.fl.apply._internal.flexObjects.UpdatableChange",{metadata:{aggregations:{revertInfo:{type:"sap.ui.base.ManagedObject",multiple:true,singularName:"revertInfo"}}}});t.getMappingInfo=function(){return Object.assign(e.getMappingInfo(),{})};t.prototype.popLatestRevertInfo=function(){var e=this.getRevertInfo().pop();this.removeRevertInfo(e);return e};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/Variant", ["sap/ui/fl/apply/_internal/flexObjects/FlexObject"],function(t){"use strict";var e=t.extend("sap.ui.fl.apply._internal.flexObjects.Variant",{metadata:{properties:{favorite:{type:"boolean",defaultValue:false},executeOnSelection:{type:"boolean",defaultValue:false},standardVariant:{type:"boolean",defaultValue:false},contexts:{type:"object",defaultValue:{}},variantId:{type:"string"}}},constructor:function(){t.apply(this,arguments);if(!this.getVariantId()){this.setVariantId(this.getId())}}});e.getMappingInfo=function(){return Object.assign(t.getMappingInfo(),{favorite:"favorite",executeOnSelection:"executeOnSelection",standardVariant:"standardVariant",contexts:"contexts"})};e.prototype.getMappingInfo=function(){return e.getMappingInfo()};e.prototype.getName=function(){return this.getText("variantName")};e.prototype.setName=function(t,e){this.setText("variantName",t,"XFLD",e)};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/DataSelector", ["sap/ui/base/ManagedObject"],function(t){"use strict";var e=t.extend("sap.ui.fl.apply._internal.flexState.DataSelector",{metadata:{properties:{parentDataSelector:{type:"object"},cachedResult:{type:"any"},parameterKey:{type:"string"},initFunction:{type:"function"},executeFunction:{type:"function"},updateListeners:{type:"function[]",defaultValue:[]},checkInvalidation:{type:"function",defaultValue:function(){return true}}}},constructor:function(){t.apply(this,arguments);this._mInitialized={};if(this.getParameterKey()){this.setCachedResult({})}var e=this.getParentDataSelector();if(e){this.onParentSelectorUpdate=this.checkUpdate.bind(this);e.addUpdateListener(this.onParentSelectorUpdate)}}});e.prototype.addUpdateListener=function(t){var e=this.getUpdateListeners();if(!e.includes(t)){this.setUpdateListeners([].concat(e,t))}};e.prototype.removeUpdateListener=function(t){var e=this.getUpdateListeners();this.setUpdateListeners(e.filter(function(e){return e!==t}))};e.prototype.exit=function(){var t=this.getParentDataSelector();if(t){t.removeUpdateListener(this.onParentSelectorUpdate)}};e.prototype._getParameterizedCachedResult=function(t){var e=this.getParameterKey();if(e){var a=t[e];return this.getCachedResult()[a]}return this.getCachedResult()};e.prototype._clearCache=function(t){if(t){this._setParameterizedCachedResult(t,null)}else{var e=!!this.getParameterKey();this.setCachedResult(e?{}:null)}};e.prototype.clearCachedResult=function(t){this._clearCache(t);this.getUpdateListeners().forEach(function(t){t()})};e.prototype._setParameterizedCachedResult=function(t,e){var a=this.getParameterKey();if(a&&t){var i={};var r=t[a];i[r]=e;return this.setCachedResult(Object.assign({},this.getCachedResult(),i))}return this.setCachedResult(e)};e.prototype.get=function(t){var e=this.getParameterKey();if(e&&!(t||{})[e]){throw new Error("Parameter '"+e+"' is missing")}var a=this._getParameterizedCachedResult(t);if(a!==null&&a!==undefined){return a}var i=this.getParentDataSelector();var r=i&&i.get(t);var n=(t||{})[e];if(!this._mInitialized[n]&&this.getInitFunction()){this.getInitFunction()(r,n);this._mInitialized[n]=true}var s=this.getExecuteFunction()(r,n);this._setParameterizedCachedResult(t,s);return s};e.prototype.checkUpdate=function(t){if(this.getCheckInvalidation()(t)===true){this._clearCache(t);this.getUpdateListeners().forEach(function(t){t()})}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/FlexState", ["sap/base/util/restricted/_omit","sap/base/util/each","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/Log","sap/ui/core/Component","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexState/appDescriptorChanges/prepareAppDescriptorMap","sap/ui/fl/apply/_internal/flexState/changes/prepareChangesMap","sap/ui/fl/apply/_internal/flexState/compVariants/prepareCompVariantsMap","sap/ui/fl/apply/_internal/flexState/DataSelector","sap/ui/fl/apply/_internal/flexState/InitialPrepareFunctions","sap/ui/fl/apply/_internal/flexState/Loader","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/_internal/FlexInfoSession","sap/ui/fl/LayerUtils","sap/ui/fl/requireAsync","sap/ui/fl/Utils"],function(e,n,t,r,a,i,o,c,s,f,l,p,u,g,d,m,h,v){"use strict";var x={};var F={};var S={};var b={};var R;var O;var D;var C={appDescriptorChanges:{prepareFunction:c,pathInResponse:[]},changes:{initialPreparationFunctionName:"uiChanges",prepareFunction:s,pathInResponse:["changes"]},variants:{initialPreparationFunctionName:"variants",pathInResponse:["variants","variantChanges","variantDependentControlChanges","variantManagementChanges"]},compVariants:{prepareFunction:f,pathInResponse:["comp.variants","comp.standardVariants","comp.defaultVariants","comp.changes"]}};var j={compVariants:{},flexObjects:{}};function y(e){var n=i.get(e.componentId);e.componentData=e.componentData||n.getComponentData()||{};e.manifest=e.manifest||e.rawManifest||n.getManifestObject();e.reference=e.reference||g.getFlexReference(e)}function I(e){var t=[];n(e.changes,function(e,r){if(Array.isArray(r)){r.forEach(function(e){t.push(o.createFromFileContent(e,null,true))})}else if(e==="comp"){n(r,function(e,n){n.forEach(function(e){t.push(o.createFromFileContent(e,null,true))})})}});return t}function P(e,n){var t=C[e].initialPreparationFunctionName;var r=p[t];if(r){return r(n)}return undefined}function V(e,n,t){var r=P(e,n);if(r){N(t,r)}}var U=new l({id:"flexObjects",parameterKey:"reference",executeFunction:function(e,n){if(!F[n]){return[]}var t=F[n].runtimePersistence;return t.flexObjects.concat(t.runtimeOnlyData.flexObjects||[],j.flexObjects[n][F[n].componentId]||[])}});function M(e,n){if(!F[e]){throw new Error("State is not yet initialized")}if(!F[e].preparedMaps[n]){var t={unfilteredStorageResponse:F[e].unfilteredStorageResponse,storageResponse:F[e].storageResponse,componentId:F[e].componentId,componentData:F[e].componentData,reference:e,runtimePersistence:F[e].runtimePersistence};F[e].preparedMaps[n]=x.callPrepareFunction(n,t);V(n,t,e)}return F[e].preparedMaps[n]}function N(e,n){F[e]=t(F[e],n);U.checkUpdate({reference:e})}function z(e){return M(e,"appDescriptorChanges")}function L(e){return M(e,"changes")}function _(e){return M(e,"compVariants")}function k(e,n){var r={flexObjects:I(e),runtimeOnlyData:{flexObjects:[]}};Object.keys(C).forEach(function(a){var i=P(a,{storageResponse:e,externalData:n});if(i){r=t(r,i)}});return r}function E(e){var n=e.reference;var t=false;if(!F[n].componentData){var a=i.get(e.componentId);F[n].componentData=a?a.getComponentData():e.componentData;t=true}if(!F[n].storageResponse){F[n].storageResponse=w(F[n].unfilteredStorageResponse);delete F[n].runtimePersistence;t=true}if(!r.get(["flexObjects",n,e.componentId],j)){r.set(["flexObjects",n,e.componentId],[],j)}if(!F[n].runtimePersistence){F[n].runtimePersistence=k(F[n].storageResponse,j.flexObjects[n][e.componentId]||[]);t=true}if(t){U.checkUpdate({reference:n})}}function w(e){var a=t({},e);var i=a.changes;var o=Q("URLParsing");if(m.isLayerFilteringRequired(o)){n(C,function(e,n){n.pathInResponse.forEach(function(e){r.set(e,m.filterChangeDefinitionsByMaxLayer(r.get(e,i),o),i)})})}return a}function A(e){b[e.reference]=u.loadFlexData(e).then(function(n){F[e.reference]=t({},{unfilteredStorageResponse:n,preparedMaps:{},componentId:e.componentId,componentData:e.componentData,partialFlexState:e.partialFlexState});T(e.reference);B(e.reference,n);Object.freeze(F[e.reference].storageResponse);Object.freeze(F[e.reference].unfilteredStorageResponse);return n});return b[e.reference]}function B(e,n){var t=n&&n.changes||{};var r=d.getByReference(e);if(r===null){r={}}if(t.info!==undefined){r=Object.assign(r,t.info)}d.setByReference(r,e)}function T(e){var n=Q("ShellNavigation");if(n&&!S[e]){S[e]=K.bind(null,e);n.registerNavigationFilter(S[e])}}function q(e){var n=Q("ShellNavigation");if(n){if(S[e]){n.unregisterNavigationFilter(S[e]);delete S[e]}}}function K(e,n,t){var r=Q("ShellNavigation");if(r){try{var i=m.getMaxLayerTechnicalParameter(n,Q("URLParsing"));var o=m.getMaxLayerTechnicalParameter(t,Q("URLParsing"));if(i!==o){x.rebuildFilteredResponse(e)}}catch(e){a.error(e.message)}return r.NavigationFilterStatus.Continue}return undefined}function G(e){var n=F[e.reference];if(n.partialFlexState===true&&e.partialFlexState!==true){n.partialFlexState=false;e.partialFlexData=t({},n.unfilteredStorageResponse.changes);e.reInitialize=true}return e}function H(e){var n=F[e.reference].componentId;if(!e.reInitialize&&n!==e.componentId){e.reInitialize=true}return e}function J(){return Promise.all([v.getUShellService("ShellNavigation"),v.getUShellService("URLParsing")]).then(function(e){R=e[0];O=e[1]}).catch(function(e){a.error("Error getting service from Unified Shell: "+e.message)})}function Q(e){if(v.getUshellContainer()){if(e==="ShellNavigation"){return R}else if(e==="URLParsing"){return O}}return undefined}function W(){return h("sap/ui/fl/ChangePersistenceFactory").then(function(e){D=e}).catch(function(e){a.error("Error loading modules: "+e.message)})}x.initialize=function(e){return Promise.all([J(),W()]).then(function(){y(e);var n=e.reference;if(b[n]){return b[n].then(G.bind(null,e)).then(H).then(function(e){return e.reInitialize?A(e):F[n].unfilteredStorageResponse})}return A(e)}).then(function(e){E(e)}.bind(null,e))};x.isInitialized=function(e){var n=e.reference?e.reference:g.getFlexReferenceForControl(e.control);return!!F[n]};x.clearAndInitialize=function(e){y(e);x.clearState(e.reference);return x.initialize(e)};x.clearState=function(e){if(e){q(e);delete F[e];delete b[e];U.clearCachedResult({reference:e});if(D&&(D._instanceCache||{}).hasOwnProperty(e)){D._instanceCache[e].removeDirtyChanges()}}else{Object.keys(F).forEach(function(e){q(e)});F={};b={};U.clearCachedResult()}};x.setInitialNonFlCompVariantData=function(e,n,t,r,a){j.compVariants[e]=j.compVariants[e]||{};j.compVariants[e][n]={};j.compVariants[e][n].standardVariant=t;j.compVariants[e][n].variants=r;j.compVariants[e][n].controlId=a};x.getInitialNonFlCompVariantData=function(e){return j.compVariants[e]};x.resetInitialNonFlCompVariantData=function(e){delete j.compVariants[e]};x.addFakeStandardVariantToExternalData=function(e,n,t){if(!j.flexObjects[e]){j.flexObjects[e]={}}if(!j.flexObjects[e][n]){j.flexObjects[e][n]=[]}j.flexObjects[e][n].push(t);U.checkUpdate({reference:e})};x.resetFakeStandardVariants=function(e,n){if(j.flexObjects[e]){delete j.flexObjects[e][n];U.clearCachedResult({reference:e})}};x.rebuildFilteredResponse=function(e){if(F[e]){F[e].preparedMaps={};F[e].storageResponse=w(F[e].unfilteredStorageResponse);F[e].runtimePersistence=k(F[e].storageResponse,j.flexObjects[e][F[e].componentId]||[]);U.checkUpdate({reference:e})}};x.addDirtyFlexObject=function(e,n){if(F[e]){F[e].runtimePersistence.flexObjects.push(n);U.checkUpdate({reference:e})}};x.removeDirtyFlexObject=function(e,n){if(F[e]){var t=F[e].runtimePersistence.flexObjects;var r=t.indexOf(n);t.splice(r,1);U.checkUpdate({reference:e})}};x.getFlexObjectsDataSelector=function(){return U};x.getUIChanges=function(e){return L(e).changes};x.getAppDescriptorChanges=function(e){return z(e).appDescriptorChanges};x.getUI2Personalization=function(e){return F[e].unfilteredStorageResponse.changes.ui2personalization};x.getCompVariantsMap=function(e){return _(e)};x.callPrepareFunction=function(e,n){return C[e].prepareFunction(n)};x.getStorageResponse=function(e){if(b[e]){return b[e].then(function(){return F[e].unfilteredStorageResponse})}return Promise.resolve()};x.getFlexObjectsFromStorageResponse=function(e){return F[e]&&F[e].unfilteredStorageResponse.changes};x.getComponentData=function(e){return F[e]&&F[e].componentData};return x});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/InitialPrepareFunctions", ["sap/base/util/includes","sap/ui/core/Core","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/Layer"],function(e,a,n,t,r){"use strict";var i={};i.variants=function(i){var s=(i.storageResponse.changes.variants||[]).map(function(e){return e.fileName}).concat(i.externalData.filter(function(e){return e.getFileType()==="ctrl_variant"}).map(function(e){return e.getId()}));var c={runtimeOnlyData:{flexObjects:[]}};var l=[].concat(i.storageResponse.changes.variants||[]).concat(i.storageResponse.changes.variantDependentControlChanges||[]).concat(i.storageResponse.changes.variantChanges||[]);l.forEach(function(i){var l=i.fileType==="ctrl_variant_change"?i.selector.id:i.variantReference;if(l&&!e(s,l)){var o=a.getLibraryResourceBundle("sap.ui.fl");var u=t.createFlVariant({id:l,variantManagementReference:l,variantName:o.getText("STANDARD_VARIANT_TITLE"),layer:r.BASE,user:n.DEFAULT_AUTHOR,reference:i.reference});c.runtimeOnlyData.flexObjects.push(u);s.push(l)}});return c};i.uiChanges=function(){};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/Loader", ["sap/ui/base/ManagedObject","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/initial/_internal/Storage","sap/ui/fl/Utils"],function(e,n,t,a){"use strict";function r(e){if(typeof e==="string"){e={id:e}}e.idIsLocal=true;return e}function i(e,n){if(e){[n.changes,n.variantChanges,n.variantDependentControlChanges,n.variantManagementChanges].forEach(function(e){e.forEach(function(e){if(!e.selector.idIsLocal){e.selector=r(e.selector);if(e.dependentSelector){Object.keys(e.dependentSelector).forEach(function(n){if(Array.isArray(e.dependentSelector[n])){e.dependentSelector[n]=e.dependentSelector[n].map(r)}else{e.dependentSelector[n]=r(e.dependentSelector[n])}})}}})})}return n}function o(n){["changes","variantChanges","variantDependentControlChanges","variantManagementChanges"].forEach(function(t){n[t]=n[t].filter(function(n){try{var t=new e(n.fileName)}catch(e){return false}t.destroy();return true})});return n}function c(e){return e&&!!n.getOvpEntry(e)}function s(e){return{changes:e,cacheKey:e.cacheKey}}return{loadFlexData:function(e){var r=n.getBaseComponentNameFromManifest(e.manifest);if(e.partialFlexData){return t.completeFlexData({reference:e.reference,componentName:r,partialFlexData:e.partialFlexData}).then(s)}var f=e.reInitialize?undefined:n.getCacheKeyFromAsyncHints(e.reference,e.asyncHints);return t.loadFlexData({preview:n.getPreviewSectionFromAsyncHints(e.asyncHints),reference:e.reference,componentName:r,cacheKey:f,siteId:a.getSiteIdByComponentData(e.componentData),appDescriptor:e.manifest.getRawJson?e.manifest.getRawJson():e.manifest,version:e.version,allContexts:e.allContexts,adaptationId:e.adaptationId}).then(o.bind()).then(i.bind(undefined,c(e.manifest))).then(s)}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/ManifestUtils", ["sap/ui/fl/Utils"],function(e){"use strict";function t(e,t){if(e&&e.requests&&Array.isArray(e.requests)){return e.requests.find(function(e){return e.name==="sap.ui.fl.changes"&&(!t||e.reference===t)})}}function n(e){var t=e.manifest;var n=e.componentData||{};if(n.startupParameters){if(Array.isArray(n.startupParameters["sap-app-id"])){return n.startupParameters["sap-app-id"][0]}}var a=t.getEntry?t.getEntry("sap.ui5"):t["sap.ui5"];if(a){if(a.appVariantId){return a.appVariantId}if(a.componentName){return a.componentName}}return r(t)}function r(e){if(e){var t="${pro"+"ject.art"+"ifactId}";var n=e.getEntry?e.getEntry("sap.app"):e["sap.app"];var r=n&&n.id;if(r===t){if(e.getComponentName){return e.getComponentName()}if(e.name){return e.name}}return r}throw new Error("No Manifest received, descriptor changes are not possible")}var a={getAppIdFromManifest:r,getFlexReference:n,getFlexReferenceForControl:function(t){var r=e.getAppComponentForControl(t);return r&&n({manifest:r.getManifestObject(),componentData:r.getComponentData()})},getOvpEntry:function(e){return e.getEntry?e.getEntry("sap.ovp"):e["sap.ovp"]},getCacheKeyFromAsyncHints:function(e,n){var r=t(n,e);if(r){return r.cachebusterToken||"<NO CHANGES>"}},getPreviewSectionFromAsyncHints:function(e){var n=t(e);if(n){return n.preview}},getChangeManifestFromAsyncHints:function(e){var n=t(e);if(n){return false}return true},getBaseComponentNameFromManifest:function(e){var t=e.getEntry?e.getEntry("sap.ui5"):e["sap.ui5"];return t&&t.componentName||r(e)},isFlexExtensionPointHandlingEnabled:function(t){var n=e.getAppComponentForControl(t);return!!(n&&n.getManifestEntry("sap.ui5")&&n.getManifestEntry("sap.ui5").flexExtensionPointEnabled)}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/appDescriptorChanges/prepareAppDescriptorMap", ["sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory"],function(e){"use strict";return function(n){var r=n.storageResponse.changes.appDescriptorChanges||[];var t=r.map(function(n){return e.createFromFileContent(n)});return{appDescriptorChanges:t}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler", ["sap/base/util/includes","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Utils"],function(e,n,t){"use strict";var d="sap.ui.fl:PendingChange";var i={};function c(e,t){return n.getControlIdBySelector(e,t)}function s(e){return{changeObject:e,dependencies:[],controlsDependencies:[],dependentIds:[]}}function a(e,n,t){r(t,n,e);o(t,n)}function o(n,t){if(!e(n.aChanges,t)){n.aChanges.push(t)}}function r(n,t,d){if(!n.mChanges[d]){n.mChanges[d]=[]}if(!e(n.mChanges[d],t)){n.mChanges[d].push(t)}}function p(e,n,t){var d=e.getSelector();if(d){if(d.id){a(c(d,n),e,t)}else{o(t,e)}}return t.aChanges}function f(e,n){return e.some(function(e){return e.id===n.id&&e.idIsLocal===n.idIsLocal})}function u(e,n,t,d,i,s,a){var o=t.getDependentSelectorList();n.some(function(n){if(f(o,n)){var r=c(n,i);var p=d&&s.indexOf(e)<s.indexOf(t);if(p){l(t,e,r,a,true)}else{l(e,t,r,a)}return true}})}function h(e,n,t,d){if(e.isValidForDependencyMap()){var i=e.getDependentSelectorList();g(e,i,n,d);var c=t.indexOf(e);var s=c<t.length-1;var a=t.slice();a.splice(c,1);a.reverse().forEach(function(c){if(c.isValidForDependencyMap()){u(e,i,c,s,n,t,d)}})}}function g(e,n,t,d){if(n.length){var i=n.map(function(e){return c(e,t)});if(!d.mDependencies[e.getId()]){d.mDependencies[e.getId()]=s(e)}d.mDependencies[e.getId()].controlsDependencies=i;i.forEach(function(n){d.mControlsWithDependencies[n]=d.mControlsWithDependencies[n]||[];d.mControlsWithDependencies[n].push(e.getId())})}}function l(n,t,d,i,c){if(m(n,t,d,i,c)){i.mDependencies[n.getId()].dependencies.push(t.getId());if(!e(i.mDependencies[n.getId()].dependentIds,d)){i.mDependencies[n.getId()].dependentIds.push(d)}if(!i.mDependentChangesOnMe[t.getId()]){i.mDependentChangesOnMe[t.getId()]=[]}i.mDependentChangesOnMe[t.getId()].push(n.getId())}}function m(n,t,d,i,c){var s=!c&&e(i.mDependencies[n.getId()].dependentIds,d);var a=false;if(i.mDependentChangesOnMe[t.getId()]){i.mDependentChangesOnMe[t.getId()].some(function(t){a=e(i.mDependencies[n.getId()].dependencies,t);return a})}return!s&&!a}function D(e,n){var c=[];var s=[];var a=[];if(e.dependencyRemovedInLastBatch[n]){e.dependencyRemovedInLastBatch[n].forEach(function(n){var t=e.mDependencies[n];if(t&&t.dependencies.length===0&&!(t.controlsDependencies&&t.controlsDependencies.length)){s.push(n);c.push(t.changeObject.getId());if(t[d]){a.push(function(){return t[d]()})}}})}return t.execPromiseQueueSequentially(a).then(function(n,t,d){delete e.dependencyRemovedInLastBatch[d];t.forEach(function(n){delete e.mDependencies[n]});n.forEach(function(n){i.resolveDependenciesForChange(e,n,d)});return!!n.length}.bind(undefined,c,s,n))}i.createEmptyDependencyMap=function(){return{aChanges:[],mChanges:{},mDependencies:{},mDependentChangesOnMe:{},mControlsWithDependencies:{},dependencyRemovedInLastBatch:{}}};i.addChangeAndUpdateDependencies=function(e,n,t){var d=p(e,n,t);h(e,n,d,t)};i.insertChange=function(e,n,t){var d=n&&n.aChanges&&n.aChanges.indexOf(t);if(d>-1){n.aChanges.splice(d+1,0,e)}};i.addRuntimeChangeAndUpdateDependencies=function(e,n,t,d){var i=p(e,n,t);h(e,n,i,d)};i.processDependentQueue=function(e,n,t){return D(e,t).then(function(t,d){if(d){return i.processDependentQueue(e,n,t)}}.bind(undefined,t))};i.addChangeApplyCallbackToDependency=function(e,n,t){e.mDependencies[n][d]=t};i.removeControlsDependencies=function(n,t){var d=n.mControlsWithDependencies[t];if(d){d.forEach(function(d){var i=n.mDependencies[d];if(i&&i.controlsDependencies&&i.controlsDependencies.length){var c=i.controlsDependencies.indexOf(t);if(c>-1){i.controlsDependencies.splice(c,1);delete n.mControlsWithDependencies[t];n.dependencyRemovedInLastBatch[t]=n.dependencyRemovedInLastBatch[t]||[];if(!e(n.dependencyRemovedInLastBatch[t],d)){n.dependencyRemovedInLastBatch[t].push(d)}}}});delete n.mControlsWithDependencies[t]}};i.resolveDependenciesForChange=function(n,t,d){var i=n.mDependentChangesOnMe[t];if(i){i.forEach(function(i){var c=n.mDependencies[i];var s=c?c.dependencies.indexOf(t):-1;if(s>-1){c.dependencies.splice(s,1);n.dependencyRemovedInLastBatch[d]=n.dependencyRemovedInLastBatch[d]||[];if(!e(n.dependencyRemovedInLastBatch[d],i)){n.dependencyRemovedInLastBatch[d].push(i)}}});delete n.mDependentChangesOnMe[t]}};i.removeChangeFromMap=function(e,n){Object.keys(e.mChanges).some(function(t){var d=e.mChanges[t];var i=d.map(function(e){return e.getId()}).indexOf(n);if(i!==-1){d.splice(i,1);return true}});var t=e.aChanges.map(function(e){return e.getId()}).indexOf(n);if(t!==-1){e.aChanges.splice(t,1)}};i.removeChangeFromDependencies=function(e,n,t){i.resolveDependenciesForChange(e,n,t);delete e.mDependencies[n]};i.getOpenDependentChangesForControl=function(e,t,d){var i=[];Object.keys(e.mDependencies).forEach(function(c){e.mDependencies[c].changeObject.getDependentSelectorList().forEach(function(s){if(n.getControlIdBySelector(s,d)===t){i.push(e.mDependencies[c].changeObject)}})});return i};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/changes/prepareChangesMap", [],function(){"use strict";return function(){}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger", ["sap/ui/fl/apply/_internal/flexObjects/CompVariant","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/base/Log"],function(e,t,n){"use strict";var a={addFavorite:function(e){e.setFavorite(true)},removeFavorite:function(e){e.setFavorite(false)},updateVariant:function(e,t){var n=t.getContent();if(n.executeOnSelection!==undefined){e.setExecuteOnSelection(n.executeOnSelection)}if(n.favorite!==undefined){e.setFavorite(n.favorite)}if(n.contexts){e.setContexts(n.contexts)}if(n.variantContent){e.setContent(n.variantContent,true)}var a=t.getText("variantName");if(a){e.setName(a,true)}},standardVariant:function(e,t){e.setExecuteOnSelection(t.getContent().executeOnSelect)}};function i(e){var t={};e.changes.forEach(function(e){var n=e.getSelector().variantId||e.getContent().key;if(!t[n]){t[n]=[]}t[n].push(e)});return t}function r(e,t){n.error("No change handler for change with the ID '"+t.getId()+"' and type '"+t.getChangeType()+"' defined.\n"+"The variant '"+e.getId()+"'was not modified'")}function o(n,a){var i={fileName:a.fileName,variantId:a.id||e.STANDARD_VARIANT_ID,persisted:a.persisted,content:a.content||{},texts:{variantName:{value:a.name||""}},selector:{persistencyKey:n}};if(a.favorite!==undefined){i.favorite=a.favorite}if(a.executeOnSelection!==undefined){i.executeOnSelection=a.executeOnSelection}if(a.adaptationId!==undefined){i.adaptationId=a.adaptationId}return t.createCompVariant(i)}function d(e,t){var n=a[t.getChangeType()]||r;n(e,t);e.addChange(t)}function f(e,t){var n=t.getVariantId();if(e[n]){e[n].forEach(function(e){d(t,e)})}}return{merge:function(e,t,n){var a=t.nonPersistedVariants.concat(t.variants);var r=i(t);var d;a.forEach(function(e){if(e.getContent()&&e.getContent().standardvariant){d=e}});if(!d){d=o(e,n)}else{a=a.filter(function(e){return!e.getContent()||!e.getContent().standardvariant})}a.forEach(f.bind(undefined,r));d.setFavorite(true);d.setStandardVariant(true);t.byId[d.getVariantId()]=d;var c=t.standardVariantChange;if(c){r[d.getVariantId()]=r[d.getVariantId()]||[];r[d.getVariantId()].push(c);r[d.getVariantId()].sort(function(e,t){if(e.getCreation()<t.getCreation()){return-1}if(e.getCreation()>t.getCreation()){return 1}return 0})}f(r,d);t.standardVariant=d;return{standardVariant:d,variants:a}},createVariant:function(e,t){return o(e,t)},applyChangeOnVariant:d}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/compVariants/prepareCompVariantsMap", ["sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/UpdatableChange","sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger"],function(e,a,n,t){"use strict";function r(e,a){e[a]=e[a]||{byId:{},variants:[],nonPersistedVariants:[],changes:[],defaultVariants:[],standardVariantChange:undefined,standardVariant:undefined};return e[a]}function i(e,a,n,i){n=n||[];var s=r(e,a);s.controlId=i;s.nonPersistedVariants.forEach(function(e){delete s.byId[e.getId()]});s.nonPersistedVariants=n.map(function(e){var n=Object.assign({id:e.id,persisted:false},e);n=t.createVariant(a,n);s.byId[e.id]=n;return n});return s}function s(t,i,s){var d=t[i].map(function(t){var r;if(i==="variants"){r=e.createCompVariant(t)}else{r=e.createFromFileContent(t,n)}r.setState(a.LifecycleState.PERSISTED);return r});d.forEach(function(e){var a=e.getPersistencyKey?e.getPersistencyKey():e.getSelector().persistencyKey;r(s,a).byId[e.getId()]=e;switch(i){case"standardVariants":r(s,a).standardVariantChange=e;break;default:r(s,a)[i].push(e)}})}return function(e){var a={};a._getOrCreate=r.bind(undefined,a);a._initialize=i.bind(undefined,a);if(e.storageResponse.changes.comp){["variants","changes","defaultVariants","standardVariants"].forEach(function(n){s(e.storageResponse.changes.comp,n,a)})}return a}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/controlVariants/Switcher", ["sap/base/util/restricted/_pick","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/changes/Reverter"],function(e,n,r){"use strict";function t(r){var t=n.getControlChangesForVariant(Object.assign(e(r,["vmReference","variantsMap","reference"]),{vReference:r.currentVReference}));var a=n.getControlChangesForVariant(Object.assign(e(r,["vmReference","variantsMap","reference"]),{vReference:r.newVReference}));var i=Object.keys(r.changesMap).reduce(function(e,n){return e.concat(r.changesMap[n])},[]);var s=i.map(function(e){return e.getId()});var c=t.reduce(function(e,n){var r=s.indexOf(n.getId());if(r>-1){e=e.concat(i[r])}return e},[]);var o=[];if(a.length>0){o=c.slice();c.some(function(e){if(a[0]&&e.getId()===a[0].getId()){a.shift();o.shift()}else{return true}})}else{o=c}var l={changesToBeReverted:o.reverse(),changesToBeApplied:a};return l}var a={switchVariant:function(e){return Promise.resolve().then(function(){e.changesMap=e.flexController._oChangePersistence.getChangesMapForComponent().mChanges;var a=t(e);return r.revertMultipleChanges(a.changesToBeReverted,e).then(e.flexController.applyVariantChanges.bind(e.flexController,a.changesToBeApplied,e.appComponent)).then(n.setCurrentVariant.bind(null,e))})}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState", ["sap/base/util/restricted/_omit","sap/base/util/restricted/_pick","sap/base/util/ObjectPath","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexState/DataSelector","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/LayerUtils","sap/ui/fl/Utils"],function(e,t,n,r,a,i,c,f,u,o){"use strict";var s={};var l={};function g(e,t,r){var i=f.getComponentData(e);var c=n.get(["technicalParameters",a.VARIANT_TECHNICAL_PARAMETER],i)||[];var u=r.map(function(e){return e.getId()});var o=u.find(function(e){return c.includes(e)});if(o){return o}return t.reverse().map(function(e){return e.getContent().defaultVariant}).find(function(e){return u.includes(e)})}function v(e,t,r,a){var i=(l[r]||{})[a];var c=t.filter(function(e){return a===e.getVariantManagementReference()});if(!i||!c.find(function(e){return e.getId()===i})){var f=e.filter(function(e){return e.getFileType()==="ctrl_variant_management_change"&&a===e.getSelector().id});i=g(r,f,c)||a;n.set([r,a],i,l)}return{defaultVariant:a,currentVariant:i,variants:[],variantManagementChanges:e.filter(function(e){return e.getFileType()==="ctrl_variant_management_change"&&e.getSelector().id===a})}}function d(e,t){return{instance:t,variantChanges:e.filter(function(e){return e.getFileType()==="ctrl_variant_change"&&e.getSelector().id===t.getId()}),controlChanges:e.filter(function(e){var n=e.isA("sap.ui.fl.apply._internal.flexObjects.UIChange");if(!n){return false}var r=e.getVariantReference()===t.getId();var a=e.getVariantReference()===t.getVariantReference();var i=u.compareAgainstCurrentLayer(e.getLayer(),t.getLayer())===-1;return r||a&&i}),key:t.getId(),title:t.getName(),layer:t.getLayer(),favorite:t.getFavorite(),executeOnSelect:t.getExecuteOnSelection(),visible:t.getVisible(),author:t.getSupportInformation().user,contexts:t.getContexts(),isStandardVariant:t.getStandardVariant()}}function p(e,t,n,r){switch(t.getChangeType()){case"setTitle":e.title=t.getText("title");break;case"setFavorite":e.favorite=t.getContent().favorite;break;case"setExecuteOnSelect":e.executeOnSelect=t.getContent().executeOnSelect;break;case"setVisible":e.visible=t.getContent().visible;var a=e.instance.getVariantManagementReference();if(l[n][a]===e.key&&!e.visible){l[n][a]=a;r[a].currentVariant=a}break;case"setContexts":e.contexts=t.getContent().contexts;break;default:throw Error("Unknown ctrl_variant_change type")}}function m(e,t){var n=t.getContent().defaultVariant;if(e.variants.some(function(e){return e.key===n})){e.defaultVariant=n}}function V(e,t){var n=e.filter(function(e){return e.getFileType()==="ctrl_variant"});var r={};n.forEach(function(a){var i=a.getVariantManagementReference();if(!r[i]){r[i]=v(e,n,t,i)}r[i].variants.push(d(e,a))});e.filter(function(e){return e.getFileType()==="ctrl_variant_change"}).forEach(function(e){var n=C(r,e);p(n,e,t,r)});e.filter(function(e){return e.getFileType()==="ctrl_variant_management_change"}).forEach(function(e){var t=r[e.getSelector().id];if(t){m(t,e)}});Object.values(r).forEach(function(e){e.variants.sort(function(e,t){if(e.isStandardVariant){return-1}if(t.isStandardVariant){return 1}return e.title.toLowerCase()<t.title.toLowerCase()?-1:1});var t=e.variants.find(function(t){return t.key===e.currentVariant}).controlChanges;e.modified=t.some(function(e){return!e.isPersisted()&&!e.getSavedToVariant()})});return r}function C(e,t){var n;Object.values(e).some(function(e){return e.variants.some(function(e){if(t.getSelector().id===e.key){n=e;return true}return false})});return n}var h=new i({id:"variantManagementMap",parameterKey:"reference",parentDataSelector:f.getFlexObjectsDataSelector(),executeFunction:V});var S=new i({id:"variantManagements",parameterKey:"variantManagementReference",parentDataSelector:h,executeFunction:function(e,t){return e[t]}});var y=new i({id:"variants",parameterKey:"variantReference",parentDataSelector:S,executeFunction:function(e,t){return e.variants.find(function(e){return e.instance.getId()===t})}});s.resetCurrentVariantReferences=function(){l={}};s.getVariantManagementMap=function(){return h};s.addFakeStandardVariant=function(e,t,n,r){var a=this.getVariantManagementMap().get({reference:e});if(!a[n]){f.addFakeStandardVariantToExternalData(e,t,r)}};s.clearFakeStandardVariants=function(e,t){f.resetFakeStandardVariants(e,t)};s.getControlChangesForVariant=function(e){var t=[];var n=s.getVariant(e);if(n){t=n.controlChanges.filter(function(t){return e.includeDirtyChanges!==false||t.getState()===c.LifecycleState.PERSISTED})}return t};s.getVariantChangesForVariant=function(e){var t=s.getVariant(e);return t&&t.variantChanges||{}};s.getVariant=function(e){var t=e.vReference||S.get({variantManagementReference:e.vmReference,reference:e.reference}).defaultVariant;return y.get({variantManagementReference:e.vmReference,variantReference:t,reference:e.reference})};s.getCurrentVariantReference=function(e){var t=S.get({variantManagementReference:e.vmReference,reference:e.reference});return t.currentVariant};s.getVariantManagementReferences=function(e){var t=h.get({reference:e});return Object.keys(t)};s.getInitialChanges=function(e){var t=h.get({reference:e.reference});return Object.keys(t).reduce(function(n,r){if(e.vmReference&&e.vmReference===r||!e.vmReference){var a=Object.assign({},e,{vmReference:r,vReference:t[r].currentVariant,includeDirtyChanges:false});return n.concat(s.getControlChangesForVariant(a))}return n},[])};s.setCurrentVariant=function(e){n.set([e.reference,e.vmReference],e.newVReference,l);h.checkUpdate({reference:e.reference})};s.waitForInitialVariantChanges=function(e){var t=s.getInitialChanges({vmReference:e.vmReference,reference:e.reference});var n=t.reduce(function(t,n){var a=n.getSelector();var i=r.bySelector(a,e.appComponent);if(i&&o.indexOfObject(t,{selector:i})===-1){t.push({selector:i})}return t},[]);return n.length?e.flexController.waitForChangesToBeApplied(n):Promise.resolve()};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/preprocessors/ComponentLifecycleHooks", ["sap/base/Log","sap/ui/fl/apply/_internal/changes/descriptor/Applier","sap/ui/fl/apply/_internal/changes/descriptor/ApplyStrategyFactory","sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/apply/api/ControlVariantApplyAPI","sap/ui/fl/variants/VariantModel","sap/ui/fl/FlexControllerFactory","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/performance/Measurement"],function(e,n,t,o,r,a,i,s,l,p,c,u){"use strict";var d={};d._componentInstantiationPromises=new WeakMap;var f={};function m(n,t){if(c.getUshellContainer()){return Promise.resolve(n)}var o=window.sessionStorage.getItem("sap.ui.rta.restart."+p.CUSTOMER);if(o){var r=a.getFlexReferenceForControl(t);if(o!==r&&o!=="true"){e.error("an application component was started "+"which does not match the component for which the restart was triggered:\n"+"Triggering component: "+o+"\n"+"Started component: "+r);return Promise.resolve(n)}return new Promise(function(e,o){Promise.all([sap.ui.getCore().loadLibrary("sap.ui.rta",{async:true}),t.rootControlLoaded()]).then(function(){sap.ui.require(["sap/ui/rta/api/startKeyUserAdaptation"],function(o){o({rootControl:t});e(n)})}).catch(function(e){o(e)})})}return Promise.resolve(n)}function g(e){var n=l.createForControl(e);var t;return n._oChangePersistence.loadChangesMapForComponent(e).then(function(r){var a=o.applyAllChangesForControl.bind(o,r,e,n);a._bIsSapUiFlFlexControllerApplyChangesOnControl=true;e.addPropagationListener(a);t=d._createVariantModel(n,e);return t.initialize()}).then(function(){e.setModel(t,i.getVariantModelName());u.end("flexProcessing");return t}).then(function(n){return m(n,e)})}function h(e,n){if(c.isApplicationComponent(e)){var t=e.getId();r.rebuildFilteredResponse(a.getFlexReferenceForControl(e));var o=r.initialize({componentId:t,asyncHints:n.asyncHints}).then(g.bind(this,e)).then(function(){if(f[t]){f[t].forEach(function(n){var t=e.getModel(i.getVariantModelName());n.setModel(t,i.getVariantModelName())});delete f[t]}});d._componentInstantiationPromises.set(e,o);return o}else if(c.isEmbeddedComponent(e)){var s=c.getAppComponentForControl(e);if(s&&c.isApplicationComponent(s)){if(d._componentInstantiationPromises.has(s)){return d._componentInstantiationPromises.get(s).then(function(){var n=s.getModel(i.getVariantModelName());e.setModel(n,i.getVariantModelName())})}f[s.getId()]=f[s.getId()]||[];f[s.getId()].push(e)}return Promise.resolve()}return Promise.resolve()}function C(e,o){if(!c.isApplication(o)||!e.id){return Promise.resolve()}r.initialize({componentData:e.componentData||e.settings&&e.settings.componentData,asyncHints:e.asyncHints,manifest:o,componentId:e.id});return n.applyChangesIncludedInManifest(o,t.getRuntimeStrategy())}d._createVariantModel=function(e,n){return new s({},{flexController:e,appComponent:n})};d.instanceCreatedHook=function(){return h.apply(undefined,arguments)};d.componentLoadedHook=function(){return C.apply(undefined,arguments)};return d});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/preprocessors/ControllerExtension", ["sap/ui/core/Component","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/Utils","sap/base/Log"],function(e,n,t,r,o){"use strict";var i=function(){};function s(e){return e.getChangeType()==="codeExt"}function a(e,n){var t=n.getSelector().controllerName;return e===t}function u(e){if(e.length===0){return Promise.resolve([])}return new Promise(function(n){sap.ui.require(e,function(){n(Array.prototype.slice.call(arguments))},function(e){o.error("Code Extension not found",e.message);n([])})})}i.prototype.getControllerExtensions=function(i,c,f){if(f){if(!c){o.warning("No component ID for determining the anchor of the code extensions was passed.");return Promise.resolve([])}var l=e.get(c);var p=r.getAppComponentForControl(l);if(!p){o.warning("No application component for determining the anchor of the code extensions was identified.");return Promise.resolve([])}if(!r.isApplication(p.getManifestObject())){return Promise.resolve([])}var g=n.getFlexReferenceForControl(p);var m=t.getChangePersistenceForComponent(g);return m.getChangesForComponent().then(function(e){var n=e.filter(function(e){return s(e)&&a(i,e)}).map(function(e){return e.getModuleName()});return u(n)})}o.warning("Synchronous extensions are not supported via UI5 Flexibility");return[]};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/preprocessors/EventHistory", ["sap/ui/core/Core"],function(e){"use strict";var n=function(){};n._aEventIds=["ControlForPersonalizationRendered"];n._aUnsubscribedEventIds=[];n._oHistory={};n.start=function(){n._aEventIds.forEach(function(s){if(n._aUnsubscribedEventIds.indexOf(s)===-1){e.getEventBus().subscribe("sap.ui",s,n.saveEvent);n._oHistory[s]=[]}})};n.saveEvent=function(e,s,t){var r={channelId:e,eventId:s,parameters:t.getId()};if(n._oHistory[s]){var i=n._oHistory[s].some(function(e){return e.channelId===r.channelId&&e.eventId===r.eventId&&e.parameters===r.parameters});if(!i){n._oHistory[s].push(r)}}};n.getHistoryAndStop=function(s){e.getEventBus().unsubscribe("sap.ui",s,n.saveEvent);n._addUnsubscribedEvent(s);return n._oHistory[s]||[]};n._addUnsubscribedEvent=function(e){if(n._aUnsubscribedEventIds.indexOf(e)===-1){n._aUnsubscribedEventIds.push(e)}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/preprocessors/RegistrationDelegator", ["sap/ui/core/mvc/Controller","sap/ui/core/mvc/XMLView","sap/ui/core/Component","sap/ui/core/ExtensionPoint","sap/ui/fl/apply/_internal/changes/descriptor/Preprocessor","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/apply/_internal/preprocessors/EventHistory","sap/ui/fl/apply/_internal/preprocessors/ComponentLifecycleHooks","sap/ui/fl/apply/_internal/DelegateMediator","sap/ui/fl/apply/api/DelegateMediatorAPI","sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerRegistration","sap/ui/core/Configuration","sap/ui/fl/apply/_internal/preprocessors/ControllerExtension","sap/ui/fl/apply/_internal/preprocessors/XmlPreprocessor"],function(e,n,r,i,s,t,o,a,l,p,c,f){"use strict";var u={};function d(){r._fnOnInstanceCreated=a.instanceCreatedHook}function g(){c.registerPredefinedChangeHandlers();c.getChangeHandlersOfLoadedLibsAndRegisterOnNewLoadedLibs()}function y(){r._fnLoadComponentCallback=a.componentLoadedHook}function P(){e.registerExtensionProvider("sap/ui/fl/apply/_internal/preprocessors/ControllerExtension")}function _(){if(n.registerPreprocessor){n.registerPreprocessor("viewxml","sap.ui.fl.apply._internal.preprocessors.XmlPreprocessor",true)}}function C(){o.start()}function m(){r._fnPreprocessManifest=s.preprocessManifest}function x(e){if(t.isFlexExtensionPointHandlingEnabled(e)){return"sap/ui/fl/apply/_internal/extensionPoint/Processor"}if(f.getDesignMode()){return"sap/ui/fl/write/_internal/extensionPoint/Processor"}return undefined}function D(){i.registerExtensionProvider(x)}function E(){p.registerDefaultDelegate({modelType:"sap.ui.model.odata.v4.ODataModel",delegate:"sap/ui/fl/write/_internal/delegates/ODataV4ReadDelegate",delegateType:l.types.READONLY})}u.registerAll=function(){C();g();y();P();d();_();m();D();E()};return u});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/preprocessors/XmlPreprocessor", ["sap/ui/core/Component","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/FlexControllerFactory","sap/ui/fl/Utils","sap/ui/fl/ChangePersistenceFactory","sap/base/Log"],function(e,r,n,t,i,o){"use strict";var a=function(){};a.process=function(i,a){try{if(!a||a.sync){o.warning("Flexibility feature for applying changes on an XML view is only available for "+"asynchronous views; merge is be done later on the JS controls.");return i}a.viewId=a.id;var s=e.get(a.componentId);if(!s){o.warning("View is generated without a component. Flexibility features are not possible.");return Promise.resolve(i)}var l=t.getAppComponentForControl(s);if(!t.isApplication(l.getManifestObject())){return Promise.resolve(i)}var c=r.getFlexReferenceForControl(l);var p=n.create(c);return p.processXmlView(i,a).then(function(){o.debug("flex processing view "+a.id+" finished");return i}).catch(function(){o.warning("Error happens when getting flex cache key! flexibility XML view preprocessing is skipped. "+"The processing will be done later on the JS controls.");return Promise.resolve(i)})}catch(e){var u="view "+a.id+": "+e;o.info(u);return Promise.resolve(i)}};a.getCacheKey=function(n){var o=e.get(n.componentId);var a=t.getAppComponentForControl(o);if(t.isVariantByStartupParameter(a)){return Promise.resolve()}var s=r.getFlexReferenceForControl(a);var l=i.getChangePersistenceForComponent(s);return l.getCacheKey(a)};return a},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/api/ControlVariantApplyAPI", ["sap/base/Log","sap/ui/core/Component","sap/ui/core/Core","sap/ui/core/Element","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/fl/Utils"],function(e,t,n,r,a,o){"use strict";var i="$FlexVariants";function l(e){var t=e.getModel(i);if(t){return Promise.resolve(t)}return new Promise(function(n){function r(){t=e.getModel(i);if(t){e.detachModelContextChange(r);n(t)}}e.attachModelContextChange(r)})}var c={getVariantModelName:function(){return i},clearVariantParameterInURL:function(t){var n;var r=o.getAppComponentForControl(t.control);var l=r&&r.getModel(i);if(!l){e.error("Variant model could not be found on the provided control");return}if(t.control.isA("sap.ui.fl.variants.VariantManagement")){var c=l.getLocalId(t.control.getId(),r);var d=a.removeURLParameterForVariantManagement({model:l,vmReference:c});n=d.parameters}a.update({parameters:n||[],updateURL:true,updateHashEntry:!!l,model:l||{},silent:!l})},activateVariant:function(a){function l(t){e.error(t);return Promise.reject(t)}var c;if(typeof a.element==="string"){c=t.get(a.element);if(!(c instanceof t)){c=n.byId(a.element);if(!(c instanceof r)){return l(Error("No valid component or control found for the provided ID"))}}}else if(a.element instanceof t||a.element instanceof r){c=a.element}var d=o.getAppComponentForControl(c);if(!d){return l(Error("A valid variant management control or component (instance or ID) should be passed as parameter"))}var p=d.getModel(i);if(!p){return l(Error("No variant management model found for the passed control or application component"))}var f=p.getVariantManagementReference(a.variantReference).variantManagementReference;if(!f){return l(Error("A valid control or component, and a valid variant/ID combination are required"))}return p.waitForVMControlInit(f).then(function(){return p.updateCurrentVariant({variantManagementReference:f,newVariantReference:a.variantReference,appComponent:d})}).catch(function(t){e.error(t);throw t})},attachVariantApplied:function(e){var t=e.selector.id&&sap.ui.getCore().byId(e.selector.id)||e.selector;var n=o.getAppComponentForControl(t);l(n).then(function(n){n.attachVariantApplied({vmControlId:e.vmControlId,control:t,callback:e.callback,callAfterInitialVariant:e.callAfterInitialVariant})})},detachVariantApplied:function(e){var t=e.selector.id&&sap.ui.getCore().byId(e.selector.id)||e.selector;var n=o.getAppComponentForControl(t);l(n).then(function(n){n.detachVariantApplied(e.vmControlId,t.getId())})}};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/api/DelegateMediatorAPI", ["sap/ui/fl/apply/_internal/DelegateMediator"],function(e){"use strict";var t={registerDefaultDelegate:function(t){e.registerDefaultDelegate(t)},getDelegateForControl:function(t){return e.getDelegateForControl(t.control,t.modifier,t.modelType,t.supportsDefault)},getKnownDefaultDelegateLibraries:function(){return e.getKnownDefaultDelegateLibraries()},getRequiredLibrariesForDefaultDelegate:function(t){return e.getRequiredLibrariesForDefaultDelegate(t.delegateName,t.control,t.modelType)}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/api/FlexRuntimeInfoAPI", ["sap/base/util/includes","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/FlexControllerFactory","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(e,t,r,n,o,l,a,i,s){"use strict";var c={isPersonalized:function(n){function o(e){t.error(e);return Promise.reject(e)}function l(e){return e.getFileType()==="change"}function c(t,n,o){var l=n.map(function(e){return e.id||e.getId()});var a=o.getSelector();var i=r.getControlIdBySelector(a,t);return e(l,i)}function u(t,r){return Array.isArray(t)&&t.length>0?e(t,r.getChangeType()):true}if(!n.selectors||n.selectors.length===0){return o("At least one control ID has to be provided as a parameter")}var p=n.selectors[0].appComponent||s.getAppComponentForControl(n.selectors[0]);if(!p){return o("App Component could not be determined")}var f=a.createForControl(p);return f.getComponentChanges({currentLayer:i.USER,includeCtrlVariants:true}).then(function(e){return e.filter(c.bind(this,p,n.selectors)).filter(u.bind(this,n.changeTypes)).some(l)}.bind(this))},waitForChanges:function(e){var t;var r;if(e.element){t=[{selector:e.element}];r=e.element}else if(e.selectors){t=e.selectors.map(function(e){return{selector:e}});r=e.selectors[0]}else if(e.complexSelectors){t=e.complexSelectors;r=e.complexSelectors[0].selector}return l.getFlexControllerInstance(r).waitForChangesToBeApplied(t)},isFlexSupported:function(e){return!!s.getAppComponentForControl(e.element)},hasVariantManagement:function(e){return n.belongsToVariantManagement(e.element)},getFlexReference:function(e){return o.getFlexReferenceForControl(e.element)}};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/AddIFrame", ["sap/ui/fl/changeHandler/common/revertAddedControls","sap/ui/fl/changeHandler/common/getTargetAggregationIndex","sap/ui/fl/changeHandler/common/createIFrame","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t,n,r){"use strict";var o={};o.applyChange=function(e,r,o){var a=o.modifier;var i=e.getContent();var g=o.view;var c=i.targetAggregation;var s;var f;return Promise.resolve().then(a.findAggregation.bind(a,r,c)).then(function(n){if(!n){throw new Error("The given Aggregation is not available in the given control: "+a.getId(r))}return t(e,r,o)}).then(function(t){s=t;return n(e,o,i.selector)}).then(function(e){f=e;return a.insertAggregation(r,c,f,s,g)}).then(function(){e.setRevertData([a.getId(f)])})};o.revertChange=e;o.completeChangeContent=function(e,t,n){var r=n.modifier;var o=n.appComponent;["targetAggregation","baseId","url"].forEach(function(e){if(!Object.prototype.hasOwnProperty.call(t.content,e)){throw new Error("Attribute missing from the change specific content '"+e+"'")}});var a=Object.assign({},t.content);a.selector=r.getSelector(a.baseId,o);e.setContent(a)};o.getChangeVisualizationInfo=function(e){return{affectedControls:[e.getContent().selector]}};o.getCondenserInfo=function(e){var t=e.getContent();return{classification:r.Create,uniqueKey:"iFrame",affectedControl:t.selector,targetContainer:e.getSelector(),targetAggregation:t.targetAggregation,setTargetIndex:function(e,t){e.getContent().index=t},getTargetIndex:function(e){return e.getContent().index},update:function(e,t){Object.assign(e.getContent(),t)}}};return o},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/AddXML", ["sap/ui/fl/changeHandler/BaseAddXml"],function(e){"use strict";var t={};t.applyChange=function(t,n,r){var g=t.getContent();var a={aggregationName:g.targetAggregation,index:g.index};return e.applyChange(t,n,r,a)};t.revertChange=e.revertChange;t.completeChangeContent=function(t,n){var r={};if(n.targetAggregation){r.targetAggregation=n.targetAggregation}else{e._throwMissingAttributeError("targetAggregation")}if(n.index!==undefined){r.index=n.index}else{e._throwMissingAttributeError("index")}e.completeChangeContent(t,n,r)};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/AddXMLAtExtensionPoint", ["sap/ui/fl/changeHandler/BaseAddXml"],function(e){"use strict";var n={};function t(e){var n=e.index;if(e.referencedExtensionPoint){n+=t(e.referencedExtensionPoint)}return n}n.applyChange=function(n,i,r){var o=r.view;var a=r.modifier;var u=n.getSelector();var f;return Promise.resolve().then(function(){var e=n.getExtensionPointInfo&&n.getExtensionPointInfo();if(!e){return a.getExtensionPointInfo(u.name,o)}return e}).then(function(s){f=s;if(!f){throw new Error("AddXMLAtExtensionPoint-Error: Either no Extension-Point found by name '"+(u&&u.name)+"' or multiple Extension-Points available with the given name in the view (view.id='"+(o&&a.getId(o))+"'). Multiple Extension-points with the same name in one view are not supported!")}(f.defaultContent||[]).forEach(function(e){if(e){a.destroy(e)}});f.defaultContent=[];f.index=t(f);if(a.targets==="xmlTree"){f.skipAdjustIndex=true}return e.applyChange(n,i,r,f)}).then(function(e){if(f.ready){f.ready(e)}return true})};n.revertChange=e.revertChange;n.completeChangeContent=function(n,t){e.completeChangeContent(n,t)};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/Base", ["sap/base/util/LoaderExtensions"],function(e){"use strict";var t={setTextInChange:function(e,t,n,r){if(!e.texts){e.texts={}}if(!e.texts[t]){e.texts[t]={}}e.texts[t].value=n;e.texts[t].type=r},instantiateFragment:function(t,n){var r=t.getFlexObjectMetadata();var a=r.moduleName;if(!a){return Promise.reject(new Error("The module name of the fragment is not set. This should happen in the backend"))}var i=n.viewId?n.viewId+"--":"";var o=r.projectId||"";var s=t.getExtensionPointInfo&&t.getExtensionPointInfo()&&t.getExtensionPointInfo().fragmentId||"";var u=o&&s?".":"";var f=i+o+u+s;var c=n.modifier;var v=n.view;return Promise.resolve().then(function(){var t=e.loadResource(a,{dataType:"text"});return c.instantiateFragment(t,f,v).catch(function(e){throw new Error("The following XML Fragment could not be instantiated: "+t+" Reason: "+e.message)})})},markAsNotApplicable:function(e,t){var n={message:e};if(!t){throw n}return Promise.reject(n)}};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/BaseAddViaDelegate", ["sap/ui/fl/changeHandler/condenser/Classification","sap/ui/fl/changeHandler/Base","sap/ui/fl/apply/api/DelegateMediatorAPI","sap/base/util/merge","sap/base/util/ObjectPath"],function(e,t,n,r,o){"use strict";function a(e){return typeof e==="function"}function i(e){if(e.modelType){return e.modelType}else if(e.oDataServiceVersion){return"sap.ui.model.odata.v2.ODataModel"}}var l={createAddViaDelegateChangeHandler:function(l){function u(e){return e+l.fieldSuffix}function d(e,t){if(a(l[t])){return!!l[t](e)}return!!l[t]}function f(e){return d(e,"skipCreateLabel")}function c(e){return d(e,"skipCreateLayout")}function p(e,t){var r=t.modifier.bySelector(e.getSelector(),t.appComponent);var o=i(e.getContent());return n.getDelegateForControl({control:r,modifier:t.modifier,modelType:o,supportsDefault:l.supportsDefault}).then(function(t){var n=!a(t.instance.createLayout);return n||c(e.getSupportInformation().oDataInformation)})}function g(e,t,n){var o=r({},t);o.fieldSelector.id=u(o.fieldSelector.id);return n.createControlForProperty(o).then(function(r){if(f(e)){return r}var o=t.modifier.getId(r.control);t.labelFor=o;return n.createLabel(t).then(function(e){return{label:e,control:r.control,valueHelp:r.valueHelp}})})}function s(e,t,n,i){var u=r({aggregationName:l.aggregationName,payload:t.payload||{},parentSelector:e.parentId},n);var d=t.instance;return Promise.resolve().then(function(){if(a(d.createLayout)&&!c(i)){return d.createLayout(u)}}).then(function(e){if(o.get("control",e)){e.layoutControl=true;return e}return g(i,u,d)})}return{applyChange:function(e,o,a){var u=a.appComponent;var d=e.getContent();var f=e.getSupportInformation().oDataInformation;var c=d.newFieldSelector;var p={appComponent:a.appComponent,view:a.view,fieldSelector:c,bindingPath:d.bindingPath,modifier:a.modifier,element:o};if(a.modifier.bySelector(c,u,a.view)){return t.markAsNotApplicable("Control to be created already exists:"+(c.id||c),true)}var g={newFieldSelector:c};e.setRevertData(g);var v=i(d);return n.getDelegateForControl({control:o,modifier:a.modifier,modelType:v,supportsDefault:l.supportsDefault}).then(function(e){return s(d,e,p,f)}).then(function(t){var n=r({},{control:o,innerControls:t,change:e},a);return Promise.resolve().then(function(){return l.addProperty(n)}).then(function(){if(t.valueHelp){var n=a.modifier.getSelector(a.modifier.getId(t.valueHelp),u);var r=e.getRevertData();r.valueHelpSelector=n;e.setRevertData(r)}})})},revertChange:function(e,t,n){var o=n.appComponent;var i=n.modifier;var u=e.getRevertData().newFieldSelector;var d=e.getRevertData().valueHelpSelector;var f=i.bySelector(u,o);var c=e.getDependentControl(l.parentAlias,n)||t;return Promise.resolve().then(i.removeAggregation.bind(i,c,l.aggregationName,f)).then(i.destroy.bind(i,f)).then(function(){if(d){var e=i.bySelector(d,o);return Promise.resolve().then(i.removeAggregation.bind(i,c,"dependents",e)).then(i.destroy.bind(i,e))}}).then(function(){var o=r({},{control:t,change:e},n);if(a(l.revertAdditionalControls)){return Promise.resolve().then(function(){return l.revertAdditionalControls(o)}).then(function(){e.resetRevertData()})}})},completeChangeContent:function(e,t,n){var r=n.appComponent;var o={};if(t.parentId){if(a(l.mapParentIdIntoChange)){l.mapParentIdIntoChange(e,t,n)}else{e.addDependentControl(t.parentId,l.parentAlias,n)}try{o.parentId=n.modifier.getSelector(t.parentId,r)}catch(e){}}else{throw new Error("mSpecificChangeInfo.parentId attribute required")}if(t.bindingPath){o.bindingPath=t.bindingPath}else{throw new Error("mSpecificChangeInfo.bindingPath attribute required")}if(t.newControlId){o.newFieldSelector=n.modifier.getSelector(t.newControlId,r)}else{throw new Error("mSpecificChangeInfo.newControlId attribute required")}if(t.index===undefined){throw new Error("mSpecificChangeInfo.targetIndex attribute required")}else{o.newFieldIndex=t.index}if(t.oDataServiceVersion){o.oDataServiceVersion=t.oDataServiceVersion}if(t.modelType&&l.supportsDefault){o.modelType=t.modelType}e.setContent(o)},getChangeVisualizationInfo:function(e){var t=e.getRevertData();if(t&&t.labelSelector){return{affectedControls:[t.labelSelector]}}return{affectedControls:[e.getContent().newFieldSelector]}},getCondenserInfo:function(t,n){return p(t,n).then(function(n){if(!n){return undefined}if(!t.getContent().newFieldSelector||!t.getContent().parentId||!l.aggregationName){return undefined}return{affectedControl:t.getContent().newFieldSelector,classification:e.Create,targetContainer:t.getContent().parentId,targetAggregation:l.aggregationName,setTargetIndex:function(e,t){var n=e.getContent();n.newFieldIndex=t;e.setContent(n)},getTargetIndex:function(e){return e.getContent().newFieldIndex}}})}}}};return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/BaseAddXml", ["sap/ui/fl/changeHandler/Base","sap/base/util/LoaderExtensions","sap/ui/fl/changeHandler/common/revertAddedControls","sap/ui/fl/Utils"],function(e,t,r,n){"use strict";var a={};a.applyChange=function(r,o,i,u){var s=i.modifier;var c=i.view;var g=u.aggregationName;var f;var h=u.index;var l=[];var d=r.getFlexObjectMetadata().moduleName;var m;var v;var p=function(){var e=[];v.forEach(function(t,r){var n=function(){return Promise.resolve().then(s.insertAggregation.bind(s,o,g,t,h+r,c,u.skipAdjustIndex)).then(function(){l.push({id:s.getId(t),aggregationName:g})})};e.push(n)});return n.execPromiseQueueSequentially(e,true,true).then(function(){r.setRevertData(l);return v})};return Promise.resolve().then(s.findAggregation.bind(s,o,g)).then(function(e){f=e;if(!f){return Promise.reject(new Error("The given Aggregation is not available in the given control: "+s.getId(o)))}return t.loadResource(d,{dataType:"text"})}).then(function(t){m=t;return e.instantiateFragment(r,i)}).then(function(e){v=e;var t=[];v.forEach(function(e,r){var n=function(){return Promise.resolve().then(s.validateType.bind(s,e,f,o,m,r)).then(function(e){if(!e){a._destroyArrayOfControls(v);return Promise.reject(new Error("The content of the xml fragment does not match the type of the targetAggregation: "+f.type))}})};t.push(n)});return n.execPromiseQueueSequentially(t,true,true).then(p)})};a.revertChange=r;a._throwMissingAttributeError=function(e){throw new Error("Attribute missing from the change specific content '"+e+"'")};a._destroyArrayOfControls=function(e){e.forEach(function(e){if(e.destroy){e.destroy()}})};a.completeChangeContent=function(e,t,r){r=r||{};if(t.fragmentPath){r.fragmentPath=t.fragmentPath}else{a._throwMissingAttributeError("fragmentPath")}e.setContent(r);var n=e.getFlexObjectMetadata().reference.replace(/\.Component/g,"").replace(/\./g,"/");n+="/changes/";n+=r.fragmentPath;var o=e.getFlexObjectMetadata();o.moduleName=n;e.setFlexObjectMetadata(o)};return a},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/BaseRename", ["sap/base/Log","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t){"use strict";var r={createRenameChangeHandler:function(r){r.changePropertyName=r.changePropertyName||"newText";return{applyChange:function(e,t,n){var a=n.modifier;var o=r.propertyName;var i=e.getText(r.changePropertyName);return Promise.resolve().then(function(){if(i){return a.getPropertyBindingOrProperty(t,o).then(function(r){e.setRevertData(r);return a.setPropertyBindingOrProperty(t,o,i)})}return undefined})},revertChange:function(t,n,a){var o=a.modifier;var i=r.propertyName;var u=t.getRevertData();if(u||u===""){o.setPropertyBindingOrProperty(n,i,u);t.resetRevertData();return}e.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.")},completeChangeContent:function(e,t,n){var a=r.changePropertyName;var o=r.translationTextType;return Promise.resolve().then(function(){return n.modifier.bySelector(e.getSelector(),n.appComponent)}).then(function(r){e.setContent({originalControlType:n.modifier.getControlType(r)});if(typeof t.value==="string"){e.setText(a,t.value,o)}else if(typeof t.content.value==="string"){e.setText(a,t.content.value,o)}else{return Promise.reject(new Error("oSpecificChangeInfo.value attribute required"))}})},getCondenserInfo:function(e){return{affectedControl:e.getSelector(),classification:t.LastOneWins,uniqueKey:r.propertyName||r.changePropertyName}},getChangeVisualizationInfo:function(e){var t=e.getTexts()&&e.getTexts()[r.changePropertyName];return{descriptionPayload:{originalLabel:e.getRevertData(),newLabel:t&&t.value}}}}}};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/BaseTreeModifier", ["sap/ui/core/util/reflection/BaseTreeModifier"],function(e){"use strict";return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/HideControl", ["sap/base/Log","sap/ui/fl/changeHandler/condenser/Classification","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,t,n){"use strict";var r="visible";var i={};i.applyChange=function(e,t,n){var r=n.modifier;return Promise.resolve().then(r.getVisible.bind(r,t)).then(function(n){e.setRevertData({originalValue:n});r.setVisible(t,false)})};i.revertChange=function(t,n,r){var i=t.getRevertData();return Promise.resolve().then(function(){if(i){r.modifier.setVisible(n,i.originalValue);t.resetRevertData()}else{e.error("Attempt to revert an unapplied change.")}})};i.completeChangeContent=function(){};i.getCondenserInfo=function(e){return{affectedControl:e.getSelector(),classification:t.Reverse,uniqueKey:r}};i.getChangeVisualizationInfo=function(e,t){var r=e.getSelector();var i=n.bySelector(r,t);return{affectedControls:[r],displayControls:[i.getParent().getId()]}};return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/MoveControls", ["sap/base/Log","sap/ui/fl/changeHandler/condenser/Classification","sap/ui/fl/Utils"],function(e,t,r){"use strict";var n={};n.SOURCE_ALIAS="source";n.TARGET_ALIAS="target";n.MOVED_ELEMENTS_ALIAS="movedElements";function o(e,t,r,n){if(!e){return Promise.reject(new Error("No change instance"))}var o=e.getContent();if(!o||!o.movedElements||o.movedElements.length===0){return Promise.reject(new Error("Change format invalid"))}if(!o.source||!o.source.selector){return Promise.reject(new Error("No source supplied for move"))}if(!o.target||!o.target.selector){return Promise.reject(new Error("No target supplied for move"))}if(!t.bySelector(o.source.selector,n,r)){return Promise.reject(new Error("Move source parent not found"))}if(!t.bySelector(o.target.selector,n,r)){return Promise.reject(new Error("Move target parent not found"))}if(!o.source.selector.aggregation){return Promise.reject(new Error("No source aggregation supplied for move"))}if(!o.target.selector.aggregation){return Promise.reject(new Error("No target aggregation supplied for move"))}return Promise.resolve()}function a(e,t,r,n){if(!e.selector&&!e.id){return Promise.reject(new Error("Change format invalid - moveElements element has no id attribute"))}if(typeof e.targetIndex!=="number"){return Promise.reject(new Error("Missing targetIndex for element with id '"+e.selector.id+"' in movedElements supplied"))}return Promise.resolve().then(t.bySelector.bind(t,e.selector||e.id,r,n)).then(function(t){if(!t){return Promise.reject(new Error("Control to move was not found. Id: '"+e.selector.id+"'"))}return t})}function i(e){if(!e.movedElements){return Promise.reject(new Error("mSpecificChangeInfo.movedElements attribute required"))}if(e.movedElements.length===0){return Promise.reject(new Error("MovedElements array is empty"))}e.movedElements.forEach(function(e){if(!e.id){throw new Error("MovedControls element has no id attribute")}if(typeof e.sourceIndex!=="number"){throw new Error("SourceIndex attribute at MovedElements element is no number")}if(typeof e.targetIndex!=="number"){throw new Error("TargetIndex attribute at MovedElements element is no number")}});return Promise.resolve()}function s(e,t,r){delete t.source.publicAggregation;delete t.target.publicAggregation;var n;var o;return Promise.resolve().then(function(){return t.source.parent||e.bySelector(t.source.id,r)}).then(function(o){n=o;return t.target.parent||e.bySelector(t.target.id,r)}).then(function(a){o=a;var i=t.source.aggregation;var s=t.target.aggregation;var g={aggregation:t.source.aggregation,type:e.getControlType(n)};var u={aggregation:t.target.aggregation,type:e.getControlType(o)};var c={source:{id:n.getId(),aggregation:i,type:g.type,selector:e.getSelector(t.source.id,r,g)},target:{id:o.getId(),aggregation:s,type:u.type,selector:e.getSelector(t.target.id,r,u)},movedElements:t.movedElements};return c})}n.applyChange=function(e,t,n){var i=n.modifier;var s=n.view;var g=n.appComponent;var u;var c;var l;var d;var v;var m;var f;var h=false;var E=e.getContent();var p=[];var C=[];return o(e,i,s,g).then(function(){E.movedElements.forEach(function(e){var t=function(){return Promise.resolve().then(a.bind(null,e,i,g,s)).then(function(e){u=e;c=i.getParent(u);return n.sourceAggregation||i.getParentAggregationName(u,c)}).then(function(e){d=e;return i.bySelector(E.target.selector,g,s)}).then(function(e){l=e;v=n.targetAggregation||E.target.selector.aggregation;return i.findIndexInParentAggregation(u)}).then(function(t){m=t;f=e.targetIndex;if(m>-1){if(m===f&&d===v&&i.getParent(u)===l){m=e.sourceIndex;d=n.sourceAggregation||E.source.selector.aggregation;h=true;return i.bySelector(E.source.selector,g,s)}}return Promise.resolve()}).then(function(e){if(e){c=e}if(m>-1){p.unshift({index:m,aggregation:d,sourceParent:i.getSelector(c,g)})}if(!h){return Promise.resolve().then(i.removeAggregation.bind(i,c,d,u)).then(i.insertAggregation.bind(i,l,v,u,f,s))}return Promise.resolve()})};C.push(t)},this);return r.execPromiseQueueSequentially(C,true,true)}.bind(this)).then(function(){e.setRevertData(p)})};n.revertChange=function(t,n,i){var s=i.modifier;var g=i.view;var u=i.appComponent;var c=t.getContent();var l;var d;var v;var m;var f;var h;return o(t,s,g,u).then(s.bySelector.bind(s,c.source.selector,u,g)).then(function(e){l=e;v=c.source.selector.aggregation;m=c.target.selector.aggregation;return s.bySelector(c.target.selector,u,g)}).then(function(n){d=n;var o=t.getRevertData();c.movedElements.reverse();var i=[];c.movedElements.forEach(function(t,r){var n=function(){return Promise.resolve().then(a.bind(this,t,s,u,g)).then(function(n){f=n;if(!f){e.warning("Element to move not found");return Promise.reject()}h=t.sourceIndex;if(o){var a=o[r];v=a.aggregation;h=a.index;return s.bySelector(a.sourceParent,u,g)}return Promise.resolve()}).then(function(e){if(e){l=e}return s.removeAggregation(d,m,f)}).then(function(){return s.insertAggregation(l,v,f,h,g)})}.bind(this);i.push(n)},this);return r.execPromiseQueueSequentially(i,true,true)}.bind(this)).then(function(){t.resetRevertData()})};n.completeChangeContent=function(e,t,r){var o=r.modifier;var a=r.appComponent;return i(t).then(s.bind(this,o,t,a)).then(function(t){var i={movedElements:[],source:{selector:t.source.selector},target:{selector:t.target.selector}};var s=[];t.movedElements.forEach(function(g){var u=Promise.resolve().then(function(){return g.element||o.bySelector(g.id,a)}).then(function(s){i.movedElements.push({selector:o.getSelector(s,a),sourceIndex:g.sourceIndex,targetIndex:g.targetIndex});e.addDependentControl(t.source.id,n.SOURCE_ALIAS,r);e.addDependentControl(t.target.id,n.TARGET_ALIAS,r);e.addDependentControl(t.movedElements.map(function(e){return e.id}),n.MOVED_ELEMENTS_ALIAS,r)});s.push(u)});return Promise.all(s).then(function(){e.setContent(i)})})};n.getCondenserInfo=function(e){var r=e.getContent();var n=e.getRevertData()[0];return{affectedControl:r.movedElements[0].selector,classification:t.Move,sourceContainer:n.sourceParent,targetContainer:r.target.selector,sourceIndex:n.index,sourceAggregation:n.aggregation,targetAggregation:r.target.selector.aggregation,setTargetIndex:function(e,t){var r=e.getContent();r.movedElements[0].targetIndex=t;e.setContent(r)},getTargetIndex:function(e){return e.getContent().movedElements[0].targetIndex},setIndexInRevertData:function(e,t){var r=e.getRevertData();r[0].index=t;e.setRevertData(r)}}};n.getChangeVisualizationInfo=function(e){var t=e.getContent();var r=e.getRevertData()[0];return{affectedControls:[t.movedElements[0].selector],dependentControls:[t.source.selector],descriptionPayload:{sourceContainer:r.sourceParent,targetContainer:t.target.selector}}};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/MoveElements", ["sap/base/Log","sap/ui/fl/Utils"],function(e,r){"use strict";var t={};t.CHANGE_TYPE="moveElements";function n(e,r,t,n){if(!e){return Promise.reject(new Error("No change instance"))}var o=e.getContent();if(!o||!o.movedElements||o.movedElements.length===0){return Promise.reject(new Error("Change format invalid"))}if(!e.getSelector().aggregation){return Promise.reject(new Error("No source aggregation supplied via selector for move"))}if(!o.target||!o.target.selector){return Promise.reject(new Error("No target supplied for move"))}if(!r.bySelector(o.target.selector,n,t)){return Promise.reject(new Error("Move target parent not found"))}if(!o.target.selector.aggregation){return Promise.reject(new Error("No target aggregation supplied for move"))}return Promise.resolve()}function o(e,r,t,n){if(!e.selector&&!e.id){return Promise.reject(new Error("Change format invalid - moveElements element has no id attribute"))}if(typeof e.targetIndex!=="number"){return Promise.reject(new Error("Missing targetIndex for element with id '"+e.selector.id+"' in movedElements supplied"))}return Promise.resolve().then(function(){return r.bySelector(e.selector||e.id,t,n)})}function i(r,t,n,i,a,g,s,u){var c;return o(r,t,n,i).then(function(n){c=n;if(!c){e.warning("Element to move not found");return Promise.reject()}return Promise.resolve().then(t.removeAggregation.bind(t,a,s,c)).then(t.insertAggregation.bind(t,g,u,c,r.targetIndex,i))})}t.applyChange=function(e,t,o){var a=o.modifier;var g=o.view;var s=o.appComponent;var u=e.getContent();var c;var l;var m;return n(e,a,g,s).then(function(){c=e.getSelector().aggregation;l=u.target.selector.aggregation;return a.bySelector(u.target.selector,s,g)}).then(function(e){m=e;var n=[];u.movedElements.forEach(function(e){n.push(i.bind(null,e,a,s,g,t,m,c,l))});return r.execPromiseQueueSequentially(n,true,true)})};t.completeChangeContent=function(){throw new Error("Using deprecated change handler. Please consider using 'MoveControls' instead")};t.getSpecificChangeInfo=function(e,r){var t=r.source.parent||e.bySelector(r.source.id);var n=r.target.parent||e.bySelector(r.target.id);var o=r.source.aggregation;var i=r.target.aggregation;var a={source:{id:t.getId(),aggregation:o,type:e.getControlType(t)},target:{id:n.getId(),aggregation:i,type:e.getControlType(n)},movedElements:r.movedElements};return a};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/PropertyBindingChange", ["sap/base/Log","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t){"use strict";var n={};n.applyChange=function(e,t,n){var r=e.getContent();var i=r.property;var o=r.newBinding;var a=n.modifier;return Promise.resolve().then(a.getPropertyBindingOrProperty.bind(a,t,i)).then(function(n){e.setRevertData({originalValue:n});a.setPropertyBinding(t,i,o)})};n.revertChange=function(t,n,r){var i=t.getRevertData();if(i){var o=t.getContent();var a=o.property;var s=i.originalValue;var p=r.modifier;p.setPropertyBindingOrProperty(n,a,s);t.resetRevertData()}else{e.error("Attempt to revert an unapplied change.")}};n.completeChangeContent=function(e,t){if(!t.content){throw new Error("oSpecificChangeInfo attribute required")}e.setContent(t.content)};n.getCondenserInfo=function(e){return{affectedControl:e.getSelector(),classification:t.LastOneWins,uniqueKey:e.getContent().property}};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/PropertyChange", ["sap/ui/fl/Utils","sap/ui/fl/changeHandler/condenser/Classification","sap/base/Log","sap/base/util/isPlainObject"],function(e,t,n,r){"use strict";var i={};function a(t){return e.isBinding(t)||r(t)}function o(e,t,n,r){try{if(a(n)){r.setPropertyBinding(e,t,n)}else{r.setProperty(e,t,n)}}catch(e){throw new Error("Applying property changes failed: "+e)}}i.applyChange=function(e,t,n){var r=e.getContent();var i=r.property;var a=r.newValue;var s=n.modifier;return Promise.resolve().then(s.getPropertyBindingOrProperty.bind(s,t,i)).then(function(n){e.setRevertData({originalValue:n});o(t,i,a,s)})};i.revertChange=function(e,t,r){var i=e.getRevertData();if(i){var a=e.getContent();var s=a.property;var c=i.originalValue;var p=r.modifier;o(t,s,c,p);e.resetRevertData()}else{n.error("Attempt to revert an unapplied change.")}};i.completeChangeContent=function(e,t){if(!t.content){throw new Error("oSpecificChangeInfo attribute required")}e.setContent(t.content)};i.getCondenserInfo=function(e){return{affectedControl:e.getSelector(),classification:t.LastOneWins,uniqueKey:e.getContent().property}};return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/StashControl", ["sap/ui/fl/LayerUtils","sap/ui/fl/changeHandler/condenser/Classification","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,n,t){"use strict";var r={};r.applyChange=function(n,t,r){var i;var a=r.modifier;return Promise.resolve().then(a.getStashed.bind(a,t)).then(function(e){i=e;return a.findIndexInParentAggregation(t)}).then(function(r){this.setChangeRevertData(n,i,r);if(e.isDeveloperLayer(n.getLayer())){return a.setStashed(t,true)}return a.setVisible(t,false)}.bind(this))};function i(e,n,t,r){var i;if(e!==n.originalIndex){var a=r.getParent(t);return Promise.return().then(r.getParentAggregationName.bind(r,t)).then(function(e){i=e;return r.removeAggregation(a,i,t)}).then(r.insertAggregation.bind(r,a,i,t,n.originalIndex))}return Promise.resolve()}r.revertChange=function(n,t,r){var a=n.getRevertData();var o=r.modifier;return Promise.resolve().then(function(){if(e.isDeveloperLayer(n.getLayer())){var s=o.setStashed(t,a.originalValue,r.appComponent);if(s){return Promise.resolve().then(o.findIndexInParentAggregation.bind(o,s)).then(function(e){return i(e,a,s,o)})}return Promise.resolve()}return o.setVisible(t,!a.originalValue)}).then(function(){n.resetRevertData()})};r.completeChangeContent=function(){};r.setChangeRevertData=function(e,n,t){e.setRevertData({originalValue:n,originalIndex:t})};r.getCondenserInfo=function(e){return{affectedControl:e.getSelector(),classification:n.Reverse,uniqueKey:"stashed"}};r.getChangeVisualizationInfo=function(e,n){var r=e.getSelector();var i=t.bySelector(r,n);return{affectedControls:[r],displayControls:[i.getParent().getId()]}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/UnhideControl", ["sap/base/Log","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t){"use strict";var n="visible";var r={};r.applyChange=function(e,t,r){var i=r.modifier;return Promise.resolve().then(i.getProperty.bind(i,t,n)).then(function(n){e.setRevertData({originalValue:n});r.modifier.setVisible(t,true)})};r.revertChange=function(t,n,r){var i=t.getRevertData();if(i){r.modifier.setVisible(n,i.originalValue);t.resetRevertData()}else{e.error("Attempt to revert an unapplied change.")}};r.completeChangeContent=function(){};r.getCondenserInfo=function(e){return{affectedControl:e.getSelector(),classification:t.Reverse,uniqueKey:n}};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/UnstashControl", ["sap/ui/fl/changeHandler/condenser/Classification"],function(e){"use strict";var n={};n.applyChange=function(e,n,t){var r=e.getContent();var a=t.modifier;var i=false;var o;return Promise.resolve().then(a.getStashed.bind(a,n)).then(function(s){e.setRevertData({originalValue:s});o=a.setStashed(n,i,t.appComponent)||n;if(r.parentAggregationName){var g=r.parentAggregationName;var u=a.getParent(o);return Promise.resolve().then(a.removeAggregation.bind(a,u,g,o)).then(a.insertAggregation.bind(a,u,g,o,r.index,t.view))}return undefined}).then(function(){return o})};n.revertChange=function(e,n,t){var r=e.getRevertData();t.modifier.setStashed(n,r.originalValue);e.resetRevertData()};n.completeChangeContent=function(e,n){if(n.content){e.setContent(n.content)}};n.getCondenserInfo=function(n){return{affectedControl:n.getSelector(),classification:e.Reverse,uniqueKey:"stashed"}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/UpdateIFrame", ["sap/base/util/extend","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t){"use strict";var n={};var r=["width","height","url","_settings"];function i(e,t){var n={};var i=[];r.forEach(function(r){var o=Promise.resolve().then(e.getProperty.bind(e,t,r)).then(function(e){if(e!==undefined){n[r]=e}});i.push(o)});return Promise.all(i).then(function(){return n})}function o(t,n,r){var i=e({_settings:r},r);return Promise.resolve().then(t.applySettings.bind(t,n,i))}n.applyChange=function(e,t,n){var r=n.modifier;return r.getControlMetadata(t).then(function(e){if(e.getName()!=="sap.ui.fl.util.IFrame"){return Promise.reject(new Error("UpdateIFrame only for sap.ui.fl.util.IFrame"))}return i(r,t)}).then(function(n){e.setRevertData({originalSettings:n});return o(r,t,e.getContent())})};n.revertChange=function(e,t,n){var r=e.getRevertData();return Promise.resolve().then(function(){if(r){if(r.originalSettings._settings&&r.originalSettings._settings.url){r.originalSettings.url=r.originalSettings._settings.url}return o(n.modifier,t,r.originalSettings)}return Promise.reject(new Error("Attempt to revert an unapplied change."))}).then(function(){e.resetRevertData()})};n.completeChangeContent=function(e,t){if(!t.content||!Object.keys(t.content).some(function(e){return r.indexOf(e)!==-1})){throw new Error("oSpecificChangeInfo attribute required")}e.setContent(t.content)};n.getCondenserInfo=function(e){return{classification:t.Update,affectedControl:e.getSelector(),uniqueKey:"iFrame",updateContent:e.getContent()}};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/common/ChangeCategories", [],function(){"use strict";return{ADD:"add",MOVE:"move",RENAME:"rename",COMBINESPLIT:"combinesplit",REMOVE:"remove",OTHER:"other"}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/common/createIFrame", ["sap/ui/fl/util/IFrame"],function(){"use strict";return function(e,t,r,n){var i=t.modifier;var a=e.getContent();var o=t.view;var u=t.appComponent;var s={_settings:{}};["url","width","height"].forEach(function(e){var t=a[e];s[e]=t;s._settings[e]=t});if(n){s.renameInfo=n;s.asContainer=true}return Promise.resolve().then(function(){return i.createControl("sap.ui.fl.util.IFrame",u,o,r,s,false)})}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/common/getTargetAggregationIndex", [],function(){"use strict";return function(e,n,r){var t=r.modifier;var i=e.getContent();var o=i.targetAggregation;var g=i.index;if(g===undefined){return Promise.resolve().then(t.getAggregation.bind(t,n,o)).then(function(e){return e.length})}return Promise.resolve(g)}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/common/revertAddedControls", ["sap/ui/fl/Utils"],function(e){"use strict";return function(t,r,n){var o=n.modifier;var i=t.getContent().targetAggregation;var a=n.view||e.getViewForControl(r);var u=n.appComponent;var g=t.getRevertData()||[];return g.reduce(function(e,t){return e.then(function(){var e;if(typeof t==="string"){e=t}else{e=t.id;i=i||t.aggregationName}return o.bySelector(e,u,a)||a&&a.createId&&o.bySelector(a.createId(e))}).then(function(e){if(e.destroy){return e.destroy()}return o.removeAggregation(r,i,e)})},Promise.resolve()).then(function(){t.resetRevertData()})}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/condenser/Classification", [],function(){"use strict";return{LastOneWins:"lastOneWins",Reverse:"reverse",Move:"move",Create:"create",Destroy:"destroy",Update:"update"}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/Storage", ["sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/initial/_internal/StorageResultMerger","sap/ui/fl/initial/_internal/storageResultDisassemble","sap/ui/fl/write/api/Version","sap/ui/fl/Utils","sap/ui/fl/write/_internal/FlexInfoSession"],function(e,n,r,t,i,a){"use strict";function l(e,n,r){if(!n.layers||n.layers[0]!=="ALL"&&n.layers.indexOf("CUSTOMER")===-1){delete e.version;return e}if(o(r.reference)){e.allContexts=true}if(r.version!==undefined){e.version=r.version;return e}var a=i.getUrlParameter(t.UrlParameter);if(a===null){delete e.version}else{e.version=parseInt(a)}return e}function o(e){var n=a.getByReference(e);return n&&n.initialAllContexts}function s(n,r){var t=r.map(function(r){var t=Object.assign({},n,{url:r.url,path:r.path});t=l(t,r,n);return r.loadConnectorModule.loadFlexData(t).then(function(n){return n||e.getEmptyFlexDataResponse()}).catch(e.logAndResolveDefault.bind(undefined,e.getEmptyFlexDataResponse(),r,"loadFlexData"))});return Promise.all(t)}function u(e){var n=[];e.forEach(function(e){if(Array.isArray(e)){n=n.concat(e)}else{n.push(e)}});return n}function f(e){return e.map(function(e){return r(e)})}function c(e){return Promise.resolve(e).then(u).then(f).then(u).then(n.merge)}function d(n){return e.getStaticFileConnector().then(s.bind(this,n))}var p={};p.completeFlexData=function(e){if(!e||!e.reference){return Promise.reject("No reference was provided")}return Promise.all([d(e),e.partialFlexData]).then(c)};p.loadFlexData=function(n){if(!n||!n.reference){return Promise.reject("No reference was provided")}return e.getLoadConnectors().then(s.bind(this,n)).then(c)};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/StorageResultMerger", ["sap/base/util/merge","sap/base/util/ObjectPath"],function(n,a){"use strict";var e={};function r(n,e){var r=n.reduce(function(n,r){if(a.get(e,r)){return n.concat(a.get(e,r))}return n},[]);var t=[];return r.filter(function(n){var a=n.fileName;var e=t.indexOf(a)!==-1;if(e){return false}t.push(a);return true})}function t(a){return a.reduce(function(a,e){return n({},a,e.ui2personalization)},{})}function i(n){return n.reduce(function(n,a){return a.cacheKey?n+=a.cacheKey:n},"")||null}e.merge=function(n){var a={appDescriptorChanges:r(n,"appDescriptorChanges"),changes:r(n,"changes"),ui2personalization:t(n),comp:{variants:r(n,"comp.variants"),changes:r(n,"comp.changes"),defaultVariants:r(n,"comp.defaultVariants"),standardVariants:r(n,"comp.standardVariants")},variants:r(n,"variants"),variantChanges:r(n,"variantChanges"),variantDependentControlChanges:r(n,"variantDependentControlChanges"),variantManagementChanges:r(n,"variantManagementChanges"),cacheKey:i(n)};var e=r(n,"info");if(e.length>0){a.info=e[0]}return a};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/StorageUtils", ["sap/base/security/encodeURLParameters","sap/base/Log","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/base/util/isEmptyObject","sap/ui/core/Configuration"],function(n,e,t,r,a,o){"use strict";var i={load:{LrepConnector:"sap/ui/fl/initial/_internal/connectors/LrepConnector",NeoLrepConnector:"sap/ui/fl/initial/_internal/connectors/NeoLrepConnector",PersonalizationConnector:"sap/ui/fl/initial/_internal/connectors/PersonalizationConnector",KeyUserConnector:"sap/ui/fl/initial/_internal/connectors/KeyUserConnector",StaticFileConnector:"sap/ui/fl/initial/_internal/connectors/StaticFileConnector",ObjectStorageConnector:"sap/ui/fl/apply/_internal/connectors/ObjectStorageConnector",JsObjectConnector:"sap/ui/fl/write/_internal/connectors/JsObjectConnector",ObjectPathConnector:"sap/ui/fl/write/_internal/connectors/ObjectPathConnector",LocalStorageConnector:"sap/ui/fl/write/_internal/connectors/LocalStorageConnector",SessionStorageConnector:"sap/ui/fl/write/_internal/connectors/SessionStorageConnector"},write:{LrepConnector:"sap/ui/fl/write/_internal/connectors/LrepConnector",NeoLrepConnector:"sap/ui/fl/write/_internal/connectors/NeoLrepConnector",PersonalizationConnector:"sap/ui/fl/write/_internal/connectors/PersonalizationConnector",KeyUserConnector:"sap/ui/fl/write/_internal/connectors/KeyUserConnector",StaticFileConnector:"sap/ui/fl/write/_internal/connectors/StaticFileConnector",JsObjectConnector:"sap/ui/fl/write/_internal/connectors/JsObjectConnector",ObjectPathConnector:"sap/ui/fl/write/_internal/connectors/ObjectPathConnector",LocalStorageConnector:"sap/ui/fl/write/_internal/connectors/LocalStorageConnector",SessionStorageConnector:"sap/ui/fl/write/_internal/connectors/SessionStorageConnector"}};var c="sap/ui/fl/initial/_internal/connectors/";var s={connector:"StaticFileConnector"};function l(n,e){var t=[];if(!n){t=e}else{t=n.filter(function(n){return e.indexOf(n)!==-1||e[0]==="ALL"})}return t}function u(n,e,t){return t.map(function(n){var t=n.connector;var r;if(!n.loadConnector&&!n.applyConnector&&!n.loadConnector){r=e?i.load[t]:i.write[t]}else if(e){r=n.loadConnector||n.applyConnector}else{r=n.writeConnector||"sap/ui/fl/write/connectors/BaseConnector"}return r})}function p(n,e,t){var r=u(n,e,t);return new Promise(function(n){sap.ui.require(r,function(){Array.from(arguments).forEach(function(n,r){if(!t[r].layers){t[r].layers=n.layers}else{t[r].layers=l(t[r].layers,n.layers)}if(e){t[r].loadConnectorModule=n}else{t[r].writeConnectorModule=n}});n(t)})})}return{getConnectors:function(n,e){var t=o.getFlexibilityServices();var r=[];if(e){r=[s]}r=r.concat(t);return p(n,e,r)},getLoadConnectors:function(){return this.getConnectors(c,true)},getStaticFileConnector:function(){return p(c,true,[s])},logAndResolveDefault:function(n,t,r,a){e.error("Connector ("+t.connector+") failed call '"+r+"': "+a+"\nApplication startup continues without data from this storage.");return n},filterAndSortResponses:function(n){var e=[];Object.keys(n).forEach(function(t){e.push(n[t])});e=e.filter(function(n){return n.changes.length>0||n.appDescriptorChanges.length>0||n.variants.length>0||n.variantChanges.length>0||n.variantManagementChanges.length>0||n.variantDependentControlChanges.length>0||n.comp.variants.length>0||n.comp.changes.length>0||n.comp.defaultVariants.length>0||n.comp.standardVariants.length>0});e.sort(function(n,e){return n.index-e.index});return e},sortFlexObjects:function(n){n.sort(function(n,e){return new Date(n.creation)-new Date(e.creation)})},getGroupedFlexObjects:function(n){this.sortFlexObjects(n);var e={};Object.keys(t).forEach(function(n){e[n]=this.getEmptyFlexDataResponse();e[n].index=r.getLayerIndex(n)}.bind(this));n.forEach(function(n){var t=n.layer;if(n.fileType==="ctrl_variant"&&n.variantManagementReference){e[t].variants.push(n)}else if(n.fileType==="ctrl_variant_change"){e[t].variantChanges.push(n)}else if(n.fileType==="ctrl_variant_management_change"){e[t].variantManagementChanges.push(n)}else if(n.fileType==="variant"){e[t].comp.variants.push(n)}else if(n.fileType==="change"){if(n.variantReference){e[t].variantDependentControlChanges.push(n)}else if(n.appDescriptorChange){e[t].appDescriptorChanges.push(n)}else{switch(n.changeType){case"addFavorite":case"removeFavorite":case"updateVariant":e[t].comp.changes.push(n);break;case"defaultVariant":e[t].comp.defaultVariants.push(n);break;case"standardVariant":e[t].comp.standardVariants.push(n);break;default:e[t].changes.push(n)}}}});return e},getEmptyFlexDataResponse:function(){return Object.assign({},{appDescriptorChanges:[],changes:[],comp:{variants:[],changes:[],defaultVariants:[],standardVariants:[]},variants:[],variantChanges:[],variantDependentControlChanges:[],variantManagementChanges:[],ui2personalization:{}})},isStorageResponseFilled:function(n){return Object.keys(n||{}).some(function(e){if(Array.isArray(n[e])){return n[e].length!==0}return!a(n[e])})}}});
/*!
* OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerRegistration", ["sap/ui/core/Core","sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/changeHandler/AddXML","sap/ui/fl/changeHandler/AddXMLAtExtensionPoint","sap/ui/fl/changeHandler/HideControl","sap/ui/fl/changeHandler/MoveControls","sap/ui/fl/changeHandler/MoveElements","sap/ui/fl/changeHandler/PropertyBindingChange","sap/ui/fl/changeHandler/PropertyChange","sap/ui/fl/changeHandler/StashControl","sap/ui/fl/changeHandler/UnhideControl","sap/ui/fl/changeHandler/UnstashControl"],function(e,n,a,r,t,i,o,s,l,d,h,g){"use strict";var f={hideControl:t,moveElements:o,moveControls:i,stashControl:d,unhideControl:h,unstashControl:g};var u={addXML:a,addXMLAtExtensionPoint:r,propertyBindingChange:s,propertyChange:l};var c={};function C(e,n){c[e]=n;n.catch(function(){}).then(function(){delete c[e]})}function p(e){return n.registerChangeHandlersForLibrary(e)}function H(e){if(e.getParameter("operation")==="add"){var n=e.getParameter("metadata");var a=n.sName;var r=n&&n.extensions&&n.extensions.flChangeHandlers;if(r){var t=p(r);C(a,t)}}}var v={getChangeHandlersOfLoadedLibsAndRegisterOnNewLoadedLibs:function(){var n=e.getLoadedLibraries();e.attachLibraryChanged(H);var a=[];Object.values(n).forEach(function(e){if(e.extensions&&e.extensions.flChangeHandlers){a.push(p(e.extensions.flChangeHandlers))}});return Promise.all(a)},waitForChangeHandlerRegistration:function(e){if(c[e]){return c[e].catch(function(){})}return Promise.resolve()},registerPredefinedChangeHandlers:function(){n.registerPredefinedChangeHandlers(f,u)}};return v});
/*!
* OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage", ["sap/base/util/each","sap/base/Log","sap/ui/fl/Layer","sap/ui/fl/registry/Settings","sap/ui/fl/requireAsync"],function(e,n,r,a,t){"use strict";var o={};var i={};var l={};var s={};function u(e){if(!e.changeHandler){n.error("sap.ui.fl.registry.ChangeRegistryStorage: changeHandler required");return false}return true}function f(e){if(typeof e.changeHandler==="string"){return t(e.changeHandler.replace(/\./g,"/")).then(function(n){e.changeHandler=n;return e.changeHandler})}return e.changeHandler}function c(e,n){var r={};if(!n||!n.changeHandler){r.changeHandler=n}else{r=n}if(r.changeHandler==="default"){r.changeHandler=s.defaultChangeHandlers[e]}else if(Object.keys(s.developerChangeHandlers||{}).includes(e)){throw Error("You can't use a custom change handler for the following Developer Mode change type: "+e+". Please use 'default' instead.")}return r}function g(n){l={};e(n,function(e,n){var r={controlType:"defaultActiveForAll",changeHandler:n,layers:a.getDeveloperModeLayerPermissions(),changeType:e};l[e]=r})}function h(n,r,t){t=c(r,t);var o=Object.assign({},a.getDefaultLayerPermissions());if(t.layers){e(t.layers,function(e,n){if(o[e]===undefined){throw Error("The Layer '"+e+"' is not supported. Please only use supported layers")}o[e]=n})}var i={controlType:n,changeHandler:t.changeHandler,layers:o,changeType:r};return u(i)?i:undefined}function d(e,n,r){var a=h(e,n,r);if(a){i[e]=i[e]||{};i[e][n]=a}}function y(r,a){var o=Promise.resolve(a);var i="ChangeHandlerStorage.registerChangeHandlersForControl.skip_next_then";if(typeof a==="string"){o=t(a+".flexibility").catch(function(e){n.error("Flexibility change handler registration failed.\nControlType: "+r+"\n"+e.message);return Promise.resolve(i)})}return o.then(function(n){if(n!==i){e(n,function(e,n){d(r,e,n)})}}).catch(function(e){n.error(e.message)})}function p(e,n,a){var t=i[e]&&i[e][n]||l[n];if(!t){throw Error("No Change handler registered for the Control and Change type")}a=a===r.PUBLIC?r.USER:a;if(!t.layers[a]){throw Error("Change type "+n+" not enabled for layer "+a)}return t}function v(e,r,a,o){var i=o.getChangeHandlerModulePath(a);if(typeof i!=="string"){return Promise.resolve(undefined)}return t(i).then(function(n){var a=n[e];if(a){return h(r,e,a)}}).catch(function(e){n.error("Flexibility registration for control "+o.getId(a)+" failed to load module "+i+"\n"+e.message)})}o.getChangeHandler=function(e,n,r,a,t){return v(e,n,r,a).then(function(r){var a=r||p(n,e,t);return f(a)}).then(function(e){if(typeof e.completeChangeContent!=="function"||typeof e.applyChange!=="function"||typeof e.revertChange!=="function"){throw new Error("The ChangeHandler is either not available or does not have all required functions")}return e})};o.registerPredefinedChangeHandlers=function(e,n){s.defaultChangeHandlers=e;s.developerChangeHandlers=n;g(n)};o.registerChangeHandlersForLibrary=function(n){var r=[];e(n,function(e,n){r.push(y(e,n))});return Promise.all(r)};o.clearAll=function(){i={};l={};s={}};o.registerChangeHandlersForControl=function(e,n){return y(e,n)};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/BackendConnector", ["sap/ui/fl/initial/_internal/connectors/Utils","sap/base/util/restricted/_pick"],function(e,n){"use strict";return{xsrfToken:undefined,settings:undefined,sendRequest:function(t){var i=n(t,["version","allContexts"]);if(this.isLanguageInfoRequired){e.addLanguageInfo(i)}var s=e.getUrl(this.ROUTES.DATA,t,i);return e.sendRequest(s,"GET",{initialConnector:this,xsrfToken:this.xsrfToken}).then(function(e){var n=e.response;if(e.etag){n.cacheKey=e.etag}if(n.settings){this.settings=n.settings}return n}.bind(this))},loadFlexData:function(e){return this.sendRequest(e).then(function(e){e.changes=e.changes.concat(e.compVariants||[]);return e})}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/KeyUserConnector", ["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/Layer"],function(e,n,a){"use strict";var t="/flex/keyuser";var c="/v2";var r=e({},n,{layers:[a.CUSTOMER,a.PUBLIC],API_VERSION:c,ROUTES:{DATA:t+c+"/data/"},isLanguageInfoRequired:true,loadFlexData:function(e){return n.sendRequest.call(r,e).then(function(e){e.contents.map(function(e,n,a){a[n].changes=(e.changes||[]).concat(e.compVariants)});e.contents.cacheKey=e.cacheKey;return e.contents})}});return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/LrepConnector", ["sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/Utils","sap/ui/dom/includeScript","sap/base/util/restricted/_pick"],function(e,t,i,n){"use strict";var s={DATA:"/flex/data/",MODULES:"/flex/modules/"};return{layers:["ALL"],xsrfToken:undefined,settings:undefined,_loadModules:function(e){return new Promise(function(t,n){i(e,undefined,t,n)})},_addClientInfo:function(e){var i=t.getUrlParameter("sap-client");if(!e&&i){e={}}if(i){e["sap-client"]=i}},loadFlexData:function(t){if(t.cacheKey==="<NO CHANGES>"){return Promise.resolve()}var i=n(t,["version","allContexts","adaptationId"]);this._addClientInfo(i);e.addSAPLogonLanguageInfo(i);var a;if(t.appDescriptor&&t.appDescriptor["sap.app"]){a=t.appDescriptor["sap.app"].id}if(t.preview){t.reference=t.preview.reference;i.upToLayerType=t.preview.maxLayer}var r=e.getUrl(s.DATA,t,i);return e.sendRequest(r,"GET",{initialConnector:this,xsrfToken:this.xsrfToken,siteId:t.siteId,sAppDescriptorId:a}).then(function(n){var a=n.response;if(n.etag){a.cacheKey=n.etag}else if(t.cacheKey){a.cacheKey=t.cacheKey}a.changes=a.changes.concat(a.compVariants||[]);if(a.settings){this.settings=a.settings;this.settings.isVariantAdaptationEnabled=!!this.settings.isPublicLayerAvailable;this.settings.isContextSharingEnabled=true;this.settings.isLocalResetEnabled=true}if(!a.loadModules){return a}var r=e.getUrl(s.MODULES,t,i);return this._loadModules(r).then(function(){return a})}.bind(this))}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/NeoLrepConnector", ["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/LrepConnector"],function(e,n){"use strict";return e({},n,{})});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/PersonalizationConnector", ["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/Layer"],function(a,e,n){"use strict";var i="/flex/personalization";var r="/v1";var t=a({},e,{layers:[n.USER],ROUTES:{DATA:i+r+"/data/"}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/StaticFileConnector", ["sap/base/Log","sap/base/util/LoaderExtensions","sap/ui/core/Configuration"],function(e,r,n){"use strict";function a(a,o){var i=a.replace(/\./g,"/")+"/changes/"+o+".json";var t=!!sap.ui.loader._.getModuleState(i);var s=n;if(t||s.getDebug()||s.getComponentPreload()==="off"){try{return r.loadResource(i)}catch(r){if(r.name.includes("SyntaxError")){e.error(r)}e.warning("flexibility did not find a "+o+".json for the application: "+a)}}}return{loadFlexData:function(e){var r=e.componentName;if(!r){r=e.reference.replace(/.Component/g,"")}var n=a(r,"flexibility-bundle");if(n){n.changes=n.changes.concat(n.compVariants);delete n.compVariants;return Promise.resolve(n)}var o=a(r,"changes-bundle");if(o){return Promise.resolve({changes:o})}return Promise.resolve()}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/Utils", ["sap/base/security/encodeURLParameters","sap/ui/core/Configuration"],function(e,t){"use strict";var s=2e4;var n=function(e,t){var s=new Error(e.statusText);s.status=e.status;s.userMessage=t;return s};var r=function(e){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl").getText(e)};return{addLanguageInfo:function(e){if(!e){throw new Error("No parameters map were passed")}e["sap-language"]=t.getLanguage()},addSAPLogonLanguageInfo:function(e){if(!e){throw new Error("No parameters map were passed")}e["sap-language"]=t.getSAPLogonLanguage()},getUrl:function(t,s,n){if(!t||!s.url){throw new Error("Not all necessary parameters were passed")}var r=s.url+t;if(s.cacheKey){r+="~"+s.cacheKey+"~/"}if(s.reference){r+=s.reference}else if(s.fileName){r+=s.fileName}if(n){Object.keys(n).forEach(function(e){if(n[e]===undefined){delete n[e]}});var a=e(n);if(a.length>0){r+="?"+a}}return r},sendRequest:function(e,t,a){t=t||"GET";t=t.toUpperCase();return new Promise(function(o,i){var p=new XMLHttpRequest;p.open(t,e);p.timeout=s;if((t==="GET"||t==="HEAD")&&(!a||!a.initialConnector||!a.initialConnector.xsrfToken)){p.setRequestHeader("X-CSRF-Token","fetch")}if((t==="POST"||t==="PUT"||t==="DELETE")&&a&&a.initialConnector&&a.initialConnector.xsrfToken){p.setRequestHeader("X-CSRF-Token",a.initialConnector.xsrfToken)}if(a&&a.contentType){p.setRequestHeader("Content-Type",a.contentType)}if(a&&a.siteId){p.setRequestHeader("X-LRep-Site-Id",a.siteId)}if(a&&a.sAppDescriptorId){p.setRequestHeader("X-LRep-AppDescriptor-Id",a.sAppDescriptorId)}if(a&&a.dataType){p.responseType=a.dataType}p.onload=function(){if(p.status>=200&&p.status<400){try{var t={};if(p.status!==204&&p.status!==205){if(!p.response&&p.responseText){p.response=p.responseText}t.response=p.response;if(t.response&&typeof t.response==="string"&&p.getResponseHeader("content-type")&&p.getResponseHeader("content-type").indexOf("json")>0){t.response=JSON.parse(t.response)}}t.status=p.status;if(p.getResponseHeader("X-CSRF-Token")){if(!e.match(/\/~.*~/g)){t.xsrfToken=p.getResponseHeader("X-CSRF-Token");if(a&&a.initialConnector){a.initialConnector.xsrfToken=t.xsrfToken}}}if(p.getResponseHeader("Etag")){t.etag=p.getResponseHeader("Etag")}o(t)}catch(e){e.userMessage=r("MSG_LOADING_SERVER_RESPONSE_ERROR");i(e)}}else{var s="";try{var f=typeof p.response==="string"?JSON.parse(p.response):p.response;if(Array.isArray(f.messages)&&f.messages.length){s=f.messages.reduce(function(e,t){return e.concat(t.severity==="Error"?t.text+"\n":"")},s)}}catch(e){}i(n(p,s))}};p.ontimeout=function(){i(n(p,r("MSG_CONNECTION_TIMEOUT_ERROR")))};p.onerror=function(){i(n(p,r("MSG_NETWORK_ERROR")))};if(a&&a.payload){p.send(a.payload)}else{p.send()}})}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/storageResultDisassemble", ["sap/ui/fl/initial/_internal/StorageUtils","sap/base/util/merge","sap/base/util/isEmptyObject"],function(a,e,n){"use strict";function t(a,e){if(e.content.fileName!==e.content.variantManagementReference){a.push(e.content)}e.controlChanges.forEach(function(e){a.push(e)});for(var n in e.variantChanges){a=a.concat(e.variantChanges[n])}return a}function r(a){var e=true;if(a){Object.keys(a).some(function(n){if(a[n].length){e=false;return true}})}return e}return function(i){var s;if(!n(i.variantSection)){s=i.changes||[];for(var c in i.variantSection){var o=i.variantSection[c];for(var u in o.variantManagementChanges){s=s.concat(o.variantManagementChanges[u])}s=o.variants.reduce(t,s)}var f=a.getGroupedFlexObjects(s);var v=a.filterAndSortResponses(f);delete i.changes;delete i.variantSection;e(v[0]||{},i);return v}if(r(i.comp)){s=i.changes||[];i.comp={variants:[],changes:[],defaultVariants:[],standardVariants:[]};s.slice().reverse().forEach(function(a,e,n){var t=false;if(a.fileType==="variant"){i.comp.variants.unshift(a);t=true}else{switch(a.changeType){case"addFavorite":case"removeFavorite":case"updateVariant":i.comp.changes.unshift(a);t=true;break;case"defaultVariant":i.comp.defaultVariants.unshift(a);t=true;break;case"standardVariant":i.comp.standardVariants.unshift(a);t=true;break;default:break}}if(t){var r=n.length-1-e;i.changes.splice(r,1)}})}return[i]}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/interfaces/BaseLoadConnector", [],function(){"use strict";var e={loadFlexData:function(){return Promise.reject("loadFlexData is not implemented")}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/interfaces/Delegate", [],function(){"use strict";return{getPropertyInfo:function(){return Promise.reject("not implemented")},getRepresentedProperties:function(){return Promise.reject("not implemented")},createLabel:function(){return Promise.reject("not implemented")},createControlForProperty:function(){return Promise.reject("not implemented")},createLayout:function(){return Promise.reject("not implemented")}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/library", ["sap/ui/fl/apply/_internal/preprocessors/RegistrationDelegator","sap/ui/fl/Utils","sap/ui/fl/Layer","sap/ui/fl/Scenario","sap/ui/fl/changeHandler/condenser/Classification","sap/ui/core/Configuration","sap/ui/core/library","sap/m/library"],function(e,i,a,r,s,n){"use strict";var l=sap.ui.getCore().initLibrary({name:"sap.ui.fl",version:"1.115.1",controls:["sap.ui.fl.variants.VariantManagement","sap.ui.fl.util.IFrame"],dependencies:["sap.ui.core","sap.m"],designtime:"sap/ui/fl/designtime/library.designtime",extensions:{flChangeHandlers:{"sap.ui.fl.util.IFrame":"sap/ui/fl/util/IFrame"},"sap.ui.support":{publicRules:true}}});l.condenser={Classification:s};l.Scenario=r;e.registerAll();function t(){var e=i.getUshellContainer();if(e){return e.getLogonSystem().isTrial()}return false}if(t()){n.setFlexibilityServices([{connector:"LrepConnector",url:"/sap/bc/lrep",layers:[]},{connector:"LocalStorageConnector",layers:[a.CUSTOMER,a.PUBLIC,a.USER]}])}return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/registry/Settings", ["sap/ui/fl/write/_internal/Storage","sap/ui/fl/Utils","sap/base/Log","sap/base/util/UriParameters"],function(t,e,n,r){"use strict";function o(t){if(t&&t.logonUser){return Promise.resolve(t.logonUser)}var r=e.getUshellContainer();if(r){return e.getUShellService("UserInfo").then(function(t){var e=t.getUser();return e&&e.getId()}).catch(function(t){n.error("Error getting service from Unified Shell: "+t.message)})}return Promise.resolve()}var i=function(t){if(!t){throw new Error("no flex settings provided")}this._oSettings=t};i.attachEvent=function(t,e){i._oEventProvider.attachEvent(t,e)};i.detachEvent=function(t,e){i._oEventProvider.detachEvent(t,e)};i.getInstance=function(){if(i._instance){return Promise.resolve(i._instance)}if(i._oLoadSettingsPromise){return i._oLoadSettingsPromise}return i._loadSettings()};i._loadSettings=function(){var e;var r=t.loadFeatures().then(function(t){e=t;return o(e)}).then(function(t){if(!e){n.error("The request for flexibility settings failed; A default response is generated and returned to consuming APIs");e={isKeyUser:false,isKeyUserTranslationEnabled:false,isVariantSharingEnabled:false,isVariantPersonalizationEnabled:true,isAtoAvailable:false,isAtoEnabled:false,isAppVariantSaveAsEnabled:false,isContextSharingEnabled:true,isContextBasedAdaptationEnabled:false,isCondensingEnabled:false,isProductiveSystem:true,isPublicLayerAvailable:false,isLocalResetEnabled:false,isVariantAdaptationEnabled:false,versioning:{},_bFlexChangeMode:false,_bFlexibilityAdaptationButtonAllowed:false}}e.userId=t;return i._storeInstance(e)});i._oLoadSettingsPromise=r;return r};i._storeInstance=function(t){if(!i._instance){i._instance=new i(t)}return i._instance};i.getInstanceOrUndef=function(){return i._instance};i.getDefaultLayerPermissions=function(){return{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,PUBLIC:false,USER:false}};i.getDeveloperModeLayerPermissions=function(){return{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:false,PUBLIC:false,USER:false}};i.prototype._getBooleanProperty=function(t){return this._oSettings[t]||false};i.prototype.isKeyUser=function(){return this._getBooleanProperty("isKeyUser")};i.prototype.isKeyUserTranslationEnabled=function(){return this._getBooleanProperty("isKeyUserTranslationEnabled")};i.prototype.isPublicLayerAvailable=function(){return this._getBooleanProperty("isPublicLayerAvailable")};i.prototype.isVariantAdaptationEnabled=function(){return this._getBooleanProperty("isVariantAdaptationEnabled")};i.prototype.isAppVariantSaveAsEnabled=function(){return!this.isContextBasedAdaptationEnabled()&&this._getBooleanProperty("isAppVariantSaveAsEnabled")};i.prototype.isContextBasedAdaptationEnabled=function(){var t=r.fromQuery(window.location.search);var e=t.get("sap-ui-xx-rta-adaptations");return e==="true"||this._getBooleanProperty("isContextBasedAdaptationEnabled")};i.prototype.isVersioningEnabled=function(t){return!!(this._oSettings.versioning[t]||this._oSettings.versioning["ALL"])};i.prototype.isModelS=function(){return this._getBooleanProperty("isAtoAvailable")};i.prototype.isAtoEnabled=function(){return this._getBooleanProperty("isAtoEnabled")};i.prototype.isAtoAvailable=function(){return this._getBooleanProperty("isAtoAvailable")};i.prototype.isProductiveSystem=function(){return this._getBooleanProperty("isProductiveSystem")};i.prototype.isVariantSharingEnabled=function(){return this._getBooleanProperty("isVariantSharingEnabled")};i.prototype.isPublicFlVariantEnabled=function(){return this._getBooleanProperty("isPublicFlVariantEnabled")};i.prototype.isContextSharingEnabled=function(){return this._getBooleanProperty("isContextSharingEnabled")};i.prototype.isVariantPersonalizationEnabled=function(){return this._getBooleanProperty("isVariantPersonalizationEnabled")};i.prototype.isCondensingEnabled=function(){return this._getBooleanProperty("isCondensingEnabled")};i.prototype.hasPersoConnector=function(){return this._getBooleanProperty("hasPersoConnector")};i.prototype.isSystemWithTransports=function(){return!!(this._oSettings.system&&this._oSettings.client)};i.prototype.isPublishAvailable=function(){return!!this._oSettings.isPublishAvailable};i.prototype.isProductiveSystemWithTransports=function(){return this.isProductiveSystem()&&this.isSystemWithTransports()};i.prototype.isLocalResetEnabled=function(){return this._getBooleanProperty("isLocalResetEnabled")};i.prototype.getSystem=function(){return this._oSettings.system};i.prototype.getClient=function(){return this._oSettings.client};i.prototype._getHostname=function(){return document.location.hostname};i.prototype.isCustomerSystem=function(){var t=this._oSettings.systemType;var e={CUSTOMER:true,SAP:false}[t];var n=this._getHostname();return e!==undefined?e:!(n==="localhost"||n==="127.0.0.1")};i.prototype.getUserId=function(){return this._oSettings.userId};return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/requireAsync", [],function(){"use strict";return function(n){return new Promise(function(i,u){sap.ui.require([n],function(n){i(n)},function(n){u(n)})})}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/util/IFrame", ["../library","sap/ui/core/Control","sap/ui/model/json/JSONModel","./getContainerUserInfo","sap/base/util/extend","sap/base/util/restricted/_CancelablePromise","sap/base/security/URLListValidator","sap/base/Log","./IFrameRenderer","sap/ui/core/library"],function(e,t,i,r,s,o,n,a,l){"use strict";function u(e){if(e.parts&&e.formatter){return e.formatter.apply(null,e.parts.map(function(e){if(e.model){return"{"+e.model+">"+e.path+"}"}return"{"+e.path+"}"}))}return e}var p=t.extend("sap.ui.fl.util.IFrame",{metadata:{library:"sap.ui.fl",properties:{url:{type:"sap.ui.core.URI",group:"Misc",defaultValue:""},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"50vh"},title:{type:"string",group:"Misc",defaultValue:undefined},asContainer:{type:"boolean",group:"Misc",defaultValue:undefined},renameInfo:{type:"object",group:"Data",defaultValue:null},_settings:{type:"object",group:"Data",defaultValue:null}},designtime:"sap/ui/fl/designtime/util/IFrame.designtime"},init:function(){if(t.prototype.init){t.prototype.init.apply(this,arguments)}this._oInitializePromise=r().then(function(e){this._oUserModel=new i(e);this.setModel(this._oUserModel,"$user")}.bind(this))},waitForInit:function(){return this._oInitializePromise?this._oInitializePromise:Promise.reject()},setUrl:function(e){var t=decodeURI(e)===e?encodeURI(e):e;if(p.isValidUrl(t)){if(this._oSetUrlPromise){this._oSetUrlPromise.cancel();delete this._oSetUrlPromise}this.setProperty("url","");this._oSetUrlPromise=new o(function(e,t,i){i.shouldReject=false;setTimeout(e,0)});this._oSetUrlPromise.then(function(){this.setProperty("url",t)}.bind(this))}else{a.error("Provided URL is not valid as an IFrame src")}return this},applySettings:function(e){t.prototype.applySettings.apply(this,arguments);if(e){var i=this.getProperty("_settings")||{};if(e._settings){s(i,e._settings)}else{Object.keys(e).filter(function(t){return!!e[t]}).forEach(function(t){i[t]=u(e[t])})}this.setProperty("_settings",i)}},exit:function(){if(this._oUserModel){this._oUserModel.destroy();delete this._oUserModel}},renderer:l});p.isValidUrl=function(e){return!n.entries().some(function(e){return/javascript/i.test(e.protocol)})&&n.validate(e)};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/util/IFrameRenderer", [],function(){"use strict";function t(t,e,o){if(o!==""||o.toLowerCase()==="auto"){t.style(e,o)}}var e={apiVersion:2};e.render=function(e,o){e.openStart("iframe",o);t(e,"width",o.getWidth());t(e,"height",o.getHeight());e.style("display","block");e.style("border","none");e.attr("sandbox","allow-forms allow-popups allow-scripts allow-same-origin allow-modals");e.attr("src",o.getUrl());var r=o.getTitle();if(r){e.attr("title",r)}e.openEnd();e.close("iframe")};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/util/ManagedObjectModel", ["sap/ui/core/Element","sap/ui/model/base/ManagedObjectModel"],function(e,t){"use strict";function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}var i=e.extend("sap.ui.fl.util.ManagedObjectModel",{metadata:{library:"sap.ui.fl",properties:{data:{type:"object"},name:{type:"string",defaultValue:"$sap.ui.fl.ManagedObjectModel"}},associations:{object:{type:"sap.ui.core.Element"}}},constructor:function(){e.apply(this,arguments);this._oManagedObjectModel=new t(sap.ui.getCore().byId(this.getObject()),this.getData());["data","name","object"].forEach(function(e){this["set"+a(e)]=function(){throw new Error("sap.ui.fl.util.ManagedObjectModel: Can't change the value of `"+e+"` after the object is initialized. Please recreate the object with correct values in the constructor.")}},this)}});i.prototype.setParent=function(t){var a=this.getParent();if(a){a.setModel(null,this.getName())}if(t){t.setModel(this._oManagedObjectModel,this.getName())}e.prototype.setParent.apply(this,arguments)};i.prototype.exit=function(){this._oManagedObjectModel.destroy()};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/util/getContainerUserInfo", ["sap/ui/fl/Utils","sap/base/Log"],function(e,r){"use strict";function t(e){if(!e){return""}return e}return function(){var n=e.getUshellContainer();if(n){return e.getUShellService("UserInfo").then(function(e){if(!e){return{}}var r=e.getUser();if(!r){return{}}var n=t(r.getEmail());var i;if(n){i=t(/@(.*)/.exec(n)[1])}else{i=""}return{fullName:t(r.getFullName()),firstName:t(r.getFirstName()),lastName:t(r.getLastName()),email:n,domain:i}}).catch(function(e){r.error("Unexpected exception when reading shell user info: "+e.toString());return{}})}return Promise.resolve({})}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/variants/VariantManagement", ["sap/ui/model/Context","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/VariantItem","sap/m/VariantManagement","sap/ui/fl/apply/api/ControlVariantApplyAPI","sap/ui/fl/registry/Settings","sap/ui/core/Control","sap/ui/core/library","sap/base/Log"],function(t,e,a,n,i,o,r,s,l,h){"use strict";var p=l.TitleLevel;var c=s.extend("sap.ui.fl.variants.VariantManagement",{metadata:{interfaces:["sap.ui.core.IShrinkable","sap.m.IOverflowToolbarContent","sap.m.IToolbarInteractiveControl"],library:"sap.ui.fl",designtime:"sap/ui/fl/designtime/variants/VariantManagement.designtime",properties:{updateVariantInURL:{type:"boolean",group:"Misc",defaultValue:false},resetOnContextChange:{type:"boolean",group:"Misc",defaultValue:true},modelName:{type:"string",group:"Misc",defaultValue:""},editable:{type:"boolean",group:"Misc",defaultValue:true},showSetAsDefault:{type:"boolean",group:"Misc",defaultValue:true},manualVariantKey:{type:"boolean",group:"Misc",defaultValue:false},inErrorState:{type:"boolean",group:"Misc",defaultValue:false},executeOnSelectionForStandardDefault:{type:"boolean",group:"Misc",defaultValue:false},displayTextForExecuteOnSelectionForStandardVariant:{type:"string",group:"Misc",defaultValue:""},headerLevel:{type:"sap.ui.core.TitleLevel",group:"Appearance",defaultValue:p.Auto},titleStyle:{type:"sap.ui.core.TitleLevel",group:"Appearance",defaultValue:p.Auto},maxWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"}},events:{initialized:{},save:{parameters:{name:{type:"string"},overwrite:{type:"boolean"},key:{type:"string"},execute:{type:"boolean"},public:{type:"boolean"},def:{type:"boolean"},tile:{type:"boolean"}}},cancel:{},manage:{parameters:{renamed:{type:"object[]"},deleted:{type:"string[]"},exe:{type:"object[]"},def:{type:"string"}}},select:{parameters:{key:{type:"string"}}}},associations:{for:{type:"sap.ui.core.Control",multiple:true}},aggregations:{_embeddedVM:{type:"sap.m.VariantManagement",multiple:false,visibility:"hidden"}}},renderer:{apiVersion:2,render:function(t,e){t.openStart("div",e);t.style("max-width",e.getMaxWidth());t.openEnd();t.renderControl(e._oVM);t.close("div")}}});c.prototype.init=function(){s.prototype.init.apply(this);this.addStyleClass("sapUiFlVarMngmt");this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");this.setModelName(o.getVariantModelName());this.attachModelContextChange(this._setModel,this);this._oVM=new i(this.getId()+"-vm");this.setAggregation("_embeddedVM",this._oVM,true);this._aCancelEventHandlers=[];this._aSaveEventHandlers=[];this._aManageEventHandlers=[];this._aSelectEventHandlers=[];this._oVM.attachManage(this._fireManage,this);this._oVM.attachCancel(this._fireCancel,this);this._oVM.attachSave(this._fireSave,this);this._oVM.attachSelect(this._fireSelect,this);this._updateWithSettingsInfo()};c.prototype.getOverflowToolbarConfig=function(){return{canOverflow:false,invalidationEvents:["save","manage","select"]}};c.prototype.attachCancel=function(t,e,a){this.attachEvent("cancel",t,e,a);return this};c.prototype._findCallback=function(t,e,a){var n=-1;t.some(function(t,i){if(t.fCallback===e&&t.oObj===a){n=i}return n>=0});return n};c.prototype.detachCancel=function(t,e){var a=this._findCallback(this._aCancelEventHandlers,t,e);if(a>=0){this.detachEvent("cancel",t,e);this._aCancelEventHandlers.splice(a,1)}return this};c.prototype.fireManage=function(t){this._oVM.fireManage(t)};c.prototype.fireSave=function(t){this._oVM.fireSave(t)};c.prototype._fireCancel=function(t){for(var e=0;e<this._aCancelEventHandlers.length;e++){t.oSource=this;this._aCancelEventHandlers[e].fCallbackBound(t,this._aCancelEventHandlers[e].mProps)}};c.prototype.attachSave=function(t,e,a){this.attachEvent("save",t,e,a);return this};c.prototype.detachSave=function(t,e){var a=this._findCallback(this._aSaveEventHandlers,t,e);if(a>-1){this.detachEvent("save",t,e);this._aSaveEventHandlers.splice(a,1)}return this};c.prototype._fireSave=function(t){this._handleAllListeners(t,this._aSaveEventHandlers)};c.prototype.hasListeners=function(t){var e=["save","select","cancel","manage"];if(e.indexOf(t)>-1){var a=null;if(t==="select"){a=this._aSelectEventHandlers}else if(t==="save"){a=this._aSaveEventHandlers}else if(t==="manage"){a=this._aManageEventHandlers}else if(t==="cancel"){a=this._aCancelEventHandlers}return a.length>0}return s.prototype.hasListeners.apply(this,arguments)};c.prototype.attachEvent=function(t,e,a,n){var i=["save","select","cancel","manage"];if(i.indexOf(t)>-1){var o=null;var r=a;if(typeof e==="function"){r=e;n=a;e=undefined}n=n===this?undefined:n;if(t==="select"){o=this._aSelectEventHandlers}else if(t==="save"){o=this._aSaveEventHandlers}else if(t==="manage"){o=this._aManageEventHandlers}else if(t==="cancel"){o=this._aCancelEventHandlers}o.push({fCallback:r,fCallbackBound:n?r.bind(n):r,oObj:n,mProps:e})}else{s.prototype.attachEvent.apply(this,arguments)}};c.prototype.attachEventOnce=function(t,e,a,n){var i;if(t==="manage"){i=this._findCallback(this._aManageEventHandlers,a,n);if(i>-1&&this._aManageEventHandlers[i].bOnce){this._aManageEventHandlers.splice(i,1)}this.attachManage(e,a,n);i=this._findCallback(this._aManageEventHandlers,a,n);if(i>-1){this._aManageEventHandlers[i].bOnce=true}}else if(t==="save"){i=this._findCallback(this._aSaveEventHandlers,a,n);if(i>-1&&this._aSaveEventHandlers[i].bOnce){this._aSaveEventHandlers.splice(i,1)}this.attachSave(e,a,n);i=this._findCallback(this._aSaveEventHandlers,a,n);if(i>-1){this._aSaveEventHandlers[i].bOnce=true}}else if(t==="select"){i=this._findCallback(this._aSelectEventHandlers,a,n);if(i>-1&&this._aSelectEventHandlers[i].bOnce){this._aSelectEventHandlers.splice(i,1)}this.attachSelect(e,a,n);i=this._findCallback(this._aSelectEventHandlers,a,n);if(i>-1){this._aSelectEventHandlers[i].bOnce=true}}else{s.prototype.attachEventOnce.apply(this,arguments)}};c.prototype.attachManage=function(t,e,a){this.attachEvent("manage",t,e,a);return this};c.prototype._handleAllListeners=function(t,e){var a=0;var n=[];while(a<e.length){t.oSource=this;e[a].fCallbackBound(t,e[a].mProps);if(e[a]){if(e[a].hasOwnProperty("bOnce")&&e[a].bOnce){n.push(a)}a+=1}}for(a=n.length-1;a>-1;a--){e.splice(n[a],1)}};c.prototype._fireManage=function(t){this._handleAllListeners(t,this._aManageEventHandlers)};c.prototype.detachManage=function(t,e){var a=this._findCallback(this._aManageEventHandlers,t,e);if(a>-1){this.detachEvent("manage",t,e);this._aManageEventHandlers.splice(a,1)}return this};c.prototype.attachSelect=function(t,e,a){this.attachEvent("select",t,e,a);return this};c.prototype._fireSelect=function(t){this._handleAllListeners(t,this._aSelectEventHandlers)};c.prototype.detachSelect=function(t,e){var a=this._findCallback(this._aSelectEventHandlers,t,e);if(a>-1){this.detachEvent("select",t,e);this._aSelectEventHandlers.splice(a,1)}return this};c.prototype._createSaveAsDialog=function(){this._oVM._createSaveAsDialog()};c.prototype._handleVariantSaveAs=function(t){this._oVM._handleVariantSaveAs(t)};c.prototype.getFocusDomRef=function(){if(this._oVM){return this._oVM.oVariantPopoverTrigger.getFocusDomRef()}return null};c.prototype.getManageDialog=function(){if(this._oVM){return this._oVM.oManagementDialog}return null};c.prototype.getVariants=function(){var t=[];if(this.oContext&&this.oContext.getObject()){t=this.oContext.getObject().variants.filter(function(t){if(!t.hasOwnProperty("visible")){return true}return t.visible})}return t};c.prototype.getTitle=function(){return this._oVM.getTitle()};c.prototype.refreshTitle=function(){this._oVM.refreshTitle()};c.prototype.setPopoverTitle=function(t){this._oVM.setPopoverTitle(t);return this};c.prototype.setHeaderLevel=function(t){this.setProperty("headerLevel",t);this._oVM.setLevel(t);return this};c.prototype.setTitleStyle=function(t){this.setProperty("titleStyle",t);this._oVM.setTitleStyle(t);return this};c.prototype.setEditable=function(t){this.setProperty("editable",t);this._oVM.setShowFooter(t);return this};c.prototype.setShowExecuteOnSelection=function(t){this._oVM.setSupportApplyAutomatically(t);return this};c.prototype.setShowSetAsDefault=function(t){this.setProperty("showSetAsDefault",t);this._oVM.setSupportDefault(t);return this};c.prototype.setExecuteOnSelectionForStandardDefault=function(t){this.setProperty("executeOnSelectionForStandardDefault",t);this._oVM.setExecuteOnSelectionForStandardDefault(t);return this};c.prototype.setDisplayTextForExecuteOnSelectionForStandardVariant=function(t){this.setProperty("displayTextForExecuteOnSelectionForStandardVariant",t);this._oVM.setDisplayTextForExecuteOnSelectionForStandardVariant(t);return this};c.prototype.setManualVariantKey=function(t){this.setProperty("manualVariantKey",t);this._oVM._setShowManualVariantKey(t);return this};c.prototype.setInErrorState=function(t){this.setProperty("inErrorState",t);this._oVM.setInErrorState(t);return this};c.prototype.openManagementDialog=function(t,e,a){this._oVM.openManagementDialog(t,e,a)};c.prototype.openSaveAsDialogForKeyUser=function(t,e){this._oVM.openSaveAsDialog(t,e)};c.prototype.setEditable=function(t){this._oVM.setProperty("showFooter",t);return this};c.prototype.setCurrentVariantKey=function(t){this._oVM.setSelectedKey(t)};c.prototype.getCurrentVariantKey=function(){return this._oVM.getSelectedKey()};c.prototype.setDefaultVariantKey=function(t){this._oVM.setDefaultKey(t)};c.prototype.getDefaultVariantKey=function(){return this._oVM.getDefaultKey()};c.prototype.enteringDesignMode=function(){this._oVM.setDesignMode(true)};c.prototype.leavingDesignMode=function(){this._oVM.setDesignMode(false)};c.prototype.getModified=function(){return this._oVM.getModified()};c.prototype.setModified=function(t){this._oVM.setModified(t)};c.prototype.getStandardVariantKey=function(){return this._oVM.getStandardVariantKey()};c.prototype._getEmbeddedVM=function(){return this._oVM};c.prototype._updateWithSettingsInfo=function(){r.getInstance().then(function(t){if(this._oVM){this._oVM.setShowSaveAs(t.isVariantPersonalizationEnabled());this._oVM.setSupportPublic(t.isPublicFlVariantEnabled())}}.bind(this)).catch(function(t){h.error(t)})};c.prototype.getModelName=function(){return this.getProperty("modelName")};c.prototype.setModelName=function(t){if(this.getModelName()){this.oContext=null;this._aCancelEventHandlers=[];this._aSaveEventHandlers=[];this._aManageEventHandlers=[];this._aSelectEventHandlers=[]}this.setProperty("modelName",t);return this};c.prototype.reinitialize=function(){this.oContext=null;this._setModel()};c.prototype._setModel=function(){this._setBindingContext()};c.prototype._setBindingContext=function(){var e;var a;var n=this.getModelName();if(!this.oContext){e=this.getModel(n);if(e){a=this._getLocalId(e);if(a){this.oContext=new t(e,"/"+a);this.setBindingContext(this.oContext,n);if(e.registerToModel){e.registerToModel(this)}this.fireInitialized();this._oVM.setModel(e,n);this._oVM.setSupportDefault(true);this._createItemsModel(n);this._oVM.bindProperty("selectedKey",{path:this.oContext+"/currentVariant",model:n});this._oVM.bindProperty("defaultKey",{path:this.oContext+"/defaultVariant",model:n});this._oVM.bindProperty("modified",{path:this.oContext+"/modified",model:n});this._oVM.bindProperty("supportFavorites",{path:this.oContext+"/showFavorites",model:n});this._oVM.bindProperty("supportApplyAutomatically",{path:this.oContext+"/showExecuteOnSelection",model:n});this._oVM.bindProperty("showFooter",{path:this.oContext+"/variantsEditable",model:n});this._oVM.setPopoverTitle(this._oRb.getText("VARIANT_MANAGEMENT_VARIANTS"))}}}};c.prototype._createItemsModel=function(t){var i=new n({key:"{"+t+">key}",title:"{"+t+">title}",sharing:"{"+t+">sharing}",remove:"{"+t+">remove}",favorite:"{"+t+">favorite}",originalFavorite:"{"+t+">originalFavorite}",executeOnSelect:"{"+t+">executeOnSelect}",originalExecuteOnSelect:"{"+t+">originalExecuteOnSelect}",rename:"{"+t+">rename}",originalTitle:"{"+t+">originalTitle}",visible:"{"+t+">visible}",changeable:"{"+t+">change}",author:"{"+t+">author}",contexts:"{"+t+">contexts}",originalContexts:"{"+t+">originalContexts}"});this._oVM.bindAggregation("items",{path:this.oContext+"/variants",model:t,template:i,filters:new e({path:"visible",operator:a.EQ,value1:true})})};c.prototype._getLocalId=function(t){var e=this.getModelName();if(!e){return null}if(e!==o.getVariantModelName()){return this.getId()}return t.getVariantManagementReferenceForControl(this)};c.prototype._getInnerItems=function(){var t=[];if(this.oContext&&this.oContext.getObject()){t=this.oContext.getObject().variants.filter(function(t){if(!t.hasOwnProperty("visible")){return true}return t.visible})}return t};c.prototype._getInnerItemByKey=function(t){var e=null;var a=this._getInnerItems();a.some(function(a){if(a.key===t){e=a}return e!==null});return e};c.prototype.registerApplyAutomaticallyOnStandardVariant=function(t){this._fRegisteredApplyAutomaticallyOnStandardVariant=t;return this};c.prototype.getApplyAutomaticallyOnVariant=function(t){var e=false;if(t){e=t.executeOnSelect;if(this._fRegisteredApplyAutomaticallyOnStandardVariant&&this.getDisplayTextForExecuteOnSelectionForStandardVariant()&&t.key===this._oVM.getStandardVariantKey()){try{e=this._fRegisteredApplyAutomaticallyOnStandardVariant(t)}catch(t){h.error("callback for determination of apply automatically on standard variant failed")}}}return e};c.prototype.exit=function(){this._oVM.detachManage(this._fireManage,this);this._oVM.detachCancel(this._fireCancel,this);this._oVM.detachSelect(this._fireSelect,this);this._oVM.detachSave(this._fireSave,this);s.prototype.exit.apply(this,arguments);this._oVM=undefined;this._fRegisteredApplyAutomaticallyOnStandardVariant=null;this.oContext=undefined;this._oRb=undefined;this._aCancelEventHandlers=undefined;this._aSaveEventHandlers=undefined;this._aManageEventHandlers=undefined;this._aSelectEventHandlers=undefined};c.prototype.addFor=function(t){this.addAssociation("for",t);return this};c.prototype._getToolbarInteractive=function(){return true};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/variants/VariantModel", ["sap/base/util/restricted/_omit","sap/base/util/restricted/_isEqual","sap/base/util/each","sap/base/util/includes","sap/base/util/isEmptyObject","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/BusyIndicator","sap/ui/core/Core","sap/ui/fl/apply/_internal/changes/Reverter","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexState/controlVariants/Switcher","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Utils","sap/ui/fl/registry/Settings","sap/ui/fl/write/api/ContextBasedAdaptationsAPI","sap/ui/model/json/JSONModel"],function(e,t,a,n,r,i,o,s,c,l,f,h,u,p,g,d,v,m,C,V,y,R,D){"use strict";var b={};function S(e,t){return F(function(e,t){var a=t.model;var n=t.vmReference;var r=false;var i=o.get([n,"modified"],a.oData);var s=e.key;var c=e.key;return Promise.resolve().then(function(){if(o.get([n,"currentVariant"],a.oData)&&a.oData[n].currentVariant!==a.oData[n].originalCurrentVariant){c=a.oData[n].originalCurrentVariant;r=true;return a.updateCurrentVariant({variantManagementReference:n,newVariantReference:s,appComponent:a.oAppComponent,internallyCalled:true})}}).then(function(){if(i){var e=d.getControlChangesForVariant({reference:a.sFlexReference,vmReference:n,vReference:c});return x({changes:e,vmReference:n,vReference:c,revert:!r,model:a})}return Promise.resolve()}).then(function(){if(!r){a.callVariantSwitchListeners(n,a.oData[n].currentVariant)}})}.bind(null,e.getParameters(),t),t.model)}function x(e){var t=e.model._getDirtyChangesFromVariantChanges(e.changes);t=t.reverse();return Promise.resolve().then(function(){if(e.revert){return h.revertMultipleChanges(t,{appComponent:e.model.oAppComponent,modifier:c,flexController:e.model.oFlexController})}return undefined}).then(function(){t.forEach(function(t){e.model.oFlexController.deleteChange(t)})})}function F(e,t){t._oVariantSwitchPromise=t._oVariantSwitchPromise.catch(function(){}).then(e);t.oFlexController.setVariantSwitchPromise(t._oVariantSwitchPromise);return t._oVariantSwitchPromise}function I(e,t){b[e]=t}function M(e,t){return g.switchVariant(e).then(function(){if(this.oData[e.vmReference].updateVariantInURL){u.updateVariantInURL({vmReference:e.vmReference,newVReference:e.newVReference,model:this})}this.callVariantSwitchListeners(e.vmReference,e.newVReference,undefined,t)}.bind(this))}function P(e){var t=y.getInstanceOrUndef();if(t&&!t.isVariantPersonalizationEnabled()){e.remove=false;e.rename=false;e.change=false}}function E(e){var t=y.getInstanceOrUndef();var a=t&&(t.isKeyUser()||!t.getUserId()||t.isPublicFlVariantEnabled()&&t.getUserId().toUpperCase()===e.author.toUpperCase());e.remove=a;e.rename=a;e.change=a}function U(e,t,a){var n=a?C.getCurrentLayer():m.USER;if(e.layer===n&&e.key!==t){return true}return false}function _(e){return new Promise(function(t){if(e.getDomRef()){t()}else{e.addEventDelegate({onAfterRendering:function(){t()}})}})}function L(){var e=V.getUshellContainer();if(e){var t=[V.getUShellService("UserInfo"),V.getUShellService("URLParsing"),V.getUShellService("CrossApplicationNavigation"),V.getUShellService("ShellNavigation")];return Promise.all(t).then(function(e){I("UserInfo",e[0]);I("URLParsing",e[1]);I("CrossApplicationNavigation",e[2]);I("ShellNavigation",e[3])}).catch(function(e){throw new Error("Error getting service from Unified Shell: "+e)})}}function A(e){e.originalTitle=e.title;e.originalFavorite=e.favorite;e.originalExecuteOnSelect=e.executeOnSelect;e.originalVisible=e.visible;e.originalContexts=e.contexts}function T(e,t){return i({},e.find(function(e){return e.key===t}))}var O=D.extend("sap.ui.fl.variants.VariantModel",{constructor:function(e,t){this.pSequentialImportCompleted=Promise.resolve();D.apply(this,[e]);this.sharing={PRIVATE:"private",PUBLIC:"public"};this.oFlexController=t.flexController;this.oChangePersistence=this.oFlexController._oChangePersistence;this.sFlexReference=this.oChangePersistence.getComponentName();this.oAppComponent=t.appComponent;this._oResourceBundle=f.getLibraryResourceBundle("sap.ui.fl");this._oVariantSwitchPromise=Promise.resolve();this._oVariantAppliedListeners={};this.fnUpdateListener=this.updateData.bind(this);this.oDataSelector=d.getVariantManagementMap();this.oDataSelector.addUpdateListener(this.fnUpdateListener);this.updateData()}});O.prototype.updateData=function(){var e=this.oDataSelector.get({reference:this.sFlexReference});var t=Object.assign({},this.getData());Object.entries(e).forEach(function(e){var a=e[0];var n=Object.assign({},e[1]);if(!t[a]){t[a]={}}t[a].variants=n.variants.map(function(e){var n=(t[a].variants||[]).find(function(t){return t.key===e.key});A(e);return Object.assign({},n||{},e)});t[a].currentVariant=n.currentVariant;t[a].originalCurrentVariant=n.currentVariant;t[a].defaultVariant=n.defaultVariant;t[a].originalDefaultVariant=n.defaultVariant;t[a].modified=n.modified});this.setData(t)};O.prototype.invalidateMap=function(){this.oDataSelector.checkUpdate({reference:this.sFlexReference})};O.prototype.initialize=function(){return Promise.all([y.getInstance(),L()]).then(function(){u.initialize({model:this})}.bind(this))};O.prototype.updateCurrentVariant=function(e){var t={vmReference:e.variantManagementReference,currentVReference:this.oData[e.variantManagementReference].originalCurrentVariant,newVReference:e.newVariantReference,flexController:this.oFlexController,appComponent:e.appComponent||this.oAppComponent,modifier:c,reference:this.sFlexReference};if(e.internallyCalled){return M.call(this,t,e.scenario)}return F(M.bind(this,t,e.scenario),this)};O.prototype.getCurrentVariantReference=function(e){return this.oData[e].currentVariant};O.prototype.getVariantManagementReference=function(e){var t="";var a=-1;Object.keys(this.oData).some(function(n){return this.oData[n].variants.some(function(r,i){if(r.key===e){t=n;a=i;return true}})}.bind(this));return{variantManagementReference:t,variantIndex:a}};O.prototype.getVariant=function(e,t){var a=t||this.getVariantManagementReference(e).variantManagementReference;return T(this.oData[a].variants,e)};O.prototype.getVariantTitle=function(e,t){return T(this.oData[t].variants,e).title};function w(e,t){var a=d.getVariantChangesForVariant({vmReference:e,reference:this.sFlexReference});var n=this.oData[e].defaultVariant;if(t.getExecuteOnSelectionForStandardDefault()&&n===e&&!a.setExecuteOnSelect){var r=T(this.oData[e].variants,e);r.instance.setExecuteOnSelection(true);this.oData[e].variants[0].originalExecuteOnSelect=true;this.oData[e].variants[0].executeOnSelect=true;return true}return false}O.prototype.attachVariantApplied=function(e){var t=f.byId(e.vmControlId);var a=this.getVariantManagementReferenceForControl(t);return this.waitForVMControlInit(a).then(function(e,a){if(!this._oVariantAppliedListeners[e]){this._oVariantAppliedListeners[e]={}}var n=w.call(this,e,t);if(a.callAfterInitialVariant||n){var r={appComponent:this.oAppComponent,reference:this.sFlexReference,vmReference:e,flexController:this.oFlexController};d.waitForInitialVariantChanges(r).then(function(){var t=this.oData[e].currentVariant;this.callVariantSwitchListeners(e,t,a.callback)}.bind(this))}return _(a.control).then(function(){if(v.getRelevantVariantManagementControlId(a.control,this.getVariantManagementControlIds())===a.vmControlId){this.oData[e].showExecuteOnSelection=true;this.checkUpdate(true);this._oVariantAppliedListeners[e][a.control.getId()]=a.callback}else{s.error("Error in attachVariantApplied: The passed VariantManagement ID does not match the responsible VariantManagement control")}}.bind(this))}.bind(this,a,e))};O.prototype.callVariantSwitchListeners=function(e,t,n,r){if(this._oVariantAppliedListeners[e]){var i=T(this.oData[e].variants,t);if(r){i.createScenario=r}if(n){n(i)}else{a(this._oVariantAppliedListeners[e],function(e,t){t(i)})}}};O.prototype.detachVariantApplied=function(e,t){var a=this.getVariantManagementReferenceForControl(f.byId(e));if(this._oVariantAppliedListeners[a]){delete this._oVariantAppliedListeners[a][t]}};O.prototype.eraseDirtyChangesOnVariant=function(e,t){var a=d.getControlChangesForVariant({reference:this.sFlexReference,vmReference:e,vReference:t});var n=this._getDirtyChangesFromVariantChanges(a);return x({changes:a,vmReference:e,vReference:t,model:this,revert:true}).then(function(){return n})};O.prototype.addAndApplyChangesOnVariant=function(e){return e.reduce(function(e,t){return e.then(function(){this.oFlexController.addPreparedChange(t,this.oAppComponent);var e=f.byId(c.getControlIdBySelector(t.getSelector(),this.oAppComponent));return this.oFlexController.applyChange(t,e)}.bind(this))}.bind(this),Promise.resolve())};O.prototype._getVariantTitleCount=function(e,t){var a=this.getData();return a[t].variants.reduce(function(t,a){if(e.toLowerCase()===a.title.toLowerCase()&&a.visible){t++}return t},0)};function k(e,t){var a={id:t.newVariantReference,variantName:t.title,contexts:t.contexts,layer:t.layer,adaptationId:t.adaptationId,reference:e.getFlexObjectMetadata().reference,generator:t.generator,variantManagementReference:t.variantManagementReference};if(t.currentVariantComparison===1){if(t.sourceVariantSource.instance.getLayer()===t.layer){a.variantReference=t.sourceVariantSource.instance.getVariantReference()}else{a.variantReference=e.getVariantReference()}}else if(t.currentVariantComparison===0){a.variantReference=e.getVariantReference()}else if(t.currentVariantComparison===-1){a.variantReference=t.sourceVariantReference}return p.createFlVariant(a)}O.prototype._duplicateVariant=function(t){var a=t.sourceVariantReference;var n=t.variantManagementReference;var r=this.getVariant(a);var o=d.getControlChangesForVariant({vmReference:n,vReference:a,reference:this.sFlexReference}).map(function(e){return e.convertToFileContent()});t.currentVariantComparison=C.compareAgainstCurrentLayer(r.instance.getLayer(),t.layer);if(t.currentVariantComparison===1){t.sourceVariantSource=this.getVariant(r.instance.getVariantReference())}var s={layer:t.layer,control:this.oAppComponent,reference:this.sFlexReference};var c=R.hasAdaptationsModel(s);if(c){t.adaptationId=R.getDisplayedAdaptationId(s)}else{e(t,"adaptationId")}var l={instance:k(r.instance,t),controlChanges:o,variantChanges:{}};o=l.controlChanges.slice();var f={};l.controlChanges=o.reduce(function(e,a){if(C.compareAgainstCurrentLayer(a.layer,t.layer)>=0){f=i({},a);f.layer=t.layer;f.variantReference=l.instance.getId();if(!f.support){f.support={}}f.support.sourceChangeFileName=a.fileName;f.packageName="$TMP";f.fileName=V.createDefaultFileName(f.changeType);e.push(p.createFromFileContent(f))}return e},[]);return l};O.prototype.copyVariant=function(e){var t=this._duplicateVariant(e);t.generator=e.generator;var a=y.getInstanceOrUndef().getUserId()?y.getInstanceOrUndef().getUserId():undefined;if(e.layer===m.VENDOR){a="SAP"}this.oData[e.variantManagementReference].variants.push({key:t.instance.getId(),rename:true,change:true,remove:true,sharing:e.layer===m.USER?this.sharing.PRIVATE:this.sharing.PUBLIC,author:a});var n=[];if(e.layer===m.PUBLIC){t.instance.setFavorite(false);var r={selector:c.getSelector(e.newVariantReference,e.appComponent),changeType:"setFavorite",fileType:"ctrl_variant_change",generator:e.generator,layer:m.USER,content:{favorite:true}};n.push(this.oFlexController.createBaseChange(r,e.appComponent))}[t.instance].concat(t.controlChanges).forEach(function(e){n.push(this.oChangePersistence.addDirtyChange(e))}.bind(this));return this.updateCurrentVariant({variantManagementReference:e.variantManagementReference,newVariantReference:t.instance.getId(),appComponent:e.appComponent,internallyCalled:true,scenario:"saveAs"}).then(function(){return n})};O.prototype.removeVariant=function(e){var t=this.oChangePersistence.getDirtyChanges().filter(function(t){return t.getVariantReference&&t.getVariantReference()===e.variant.getId()||t.getId()===e.variant.getId()});return this.updateCurrentVariant({variantManagementReference:e.variantManagementReference,newVariantReference:e.sourceVariantReference,appComponent:e.component}).then(function(){t.forEach(function(e){this.oChangePersistence.deleteChange(e)}.bind(this))}.bind(this))};O.prototype.collectModelChanges=function(e,a){var n=this.getData()[e];var r=n.variants;var i=[];var o={};var s=y.getInstanceOrUndef();r.forEach(function(e){var n=s&&s.isPublicFlVariantEnabled()&&e.layer===m.PUBLIC?m.PUBLIC:a;if(e.originalTitle!==e.title){o={variantReference:e.key,changeType:"setTitle",title:e.title,originalTitle:e.originalTitle,layer:n};i.push(o)}if(e.originalFavorite!==e.favorite){o={variantReference:e.key,changeType:"setFavorite",favorite:e.favorite,originalFavorite:e.originalFavorite,layer:a};i.push(o)}if(e.originalExecuteOnSelect!==e.executeOnSelect){o={variantReference:e.key,changeType:"setExecuteOnSelect",executeOnSelect:e.executeOnSelect,originalExecuteOnSelect:e.originalExecuteOnSelect,layer:n};i.push(o)}if(!e.visible&&e.originalVisible){o={variantReference:e.key,changeType:"setVisible",visible:false,layer:n};i.push(o)}if(!t(e.originalContexts,e.contexts)){o={variantReference:e.key,changeType:"setContexts",layer:a,contexts:e.contexts,originalContexts:e.originalContexts};i.push(o)}});if(n.originalDefaultVariant!==n.defaultVariant){o={variantManagementReference:e,changeType:"setDefault",defaultVariant:n.defaultVariant,originalDefaultVariant:n.originalDefaultVariant,layer:a};i.push(o)}return i};O.prototype.manageVariants=function(e,t,a,n,r){return new Promise(function(i){e.attachEventOnce("manage",{resolve:i,variantManagementReference:t,layer:a},this.fnManageClickRta,this);e.openManagementDialog(true,n,r)}.bind(this))};O.prototype.addVariantChange=function(e,t){var a=this.setVariantProperties(e,t);var n={};n.changeType=t.changeType;n.layer=t.layer;n.generator=t.generator;var r={layer:t.layer,control:t.appComponent,reference:this.sFlexReference};if(R.hasAdaptationsModel(r)){n.adaptationId=R.getDisplayedAdaptationId(r)}if(t.changeType==="setDefault"){n.fileType="ctrl_variant_management_change";n.selector=c.getSelector(e,t.appComponent)}else{n.fileType="ctrl_variant_change";n.selector=c.getSelector(t.variantReference,t.appComponent)}var i=this.oFlexController.createBaseChange(n,t.appComponent);i.setContent(a);if(t.changeType==="setTitle"){i.setText("title",t.title,"XFLD")}this.oChangePersistence.addDirtyChange(i);return i};O.prototype.deleteVariantChange=function(e,t,a){this.setVariantProperties(e,t);this.oChangePersistence.deleteChange(a)};O.prototype.setVariantProperties=function(e,t){var a=this.getData();var n=this.getVariant(t.variantReference,e).instance;var r={};switch(t.changeType){case"setTitle":n.setName(t.title,true);break;case"setFavorite":r.favorite=t.favorite;n.setFavorite(t.favorite);break;case"setExecuteOnSelect":r.executeOnSelect=t.executeOnSelect;n.setExecuteOnSelection(t.executeOnSelect);break;case"setVisible":r.visible=t.visible;r.createdByReset=false;n.setVisible(t.visible);break;case"setContexts":r.contexts=t.contexts;n.setContexts(t.contexts);break;case"setDefault":r.defaultVariant=t.defaultVariant;var i=u.getStoredHashParams({model:this});if(i){if(a[e].defaultVariant!==a[e].currentVariant&&i.indexOf(a[e].currentVariant)===-1){u.update({parameters:i.concat(a[e].currentVariant),updateURL:!this._bDesignTimeMode,updateHashEntry:true,model:this})}else if(a[e].defaultVariant===a[e].currentVariant&&i.indexOf(a[e].currentVariant)>-1){i.splice(i.indexOf(a[e].currentVariant),1);u.update({parameters:i,updateURL:!this._bDesignTimeMode,updateHashEntry:true,model:this})}}break;default:break}return r};O.prototype._ensureStandardVariantExists=function(t){var a=this.getData();var n=a[t]||{};var i=e(n,["initPromise"]);if(!a[t]||r(i)){var o=p.createFlVariant({id:t,variantManagementReference:t,variantName:this._oResourceBundle.getText("STANDARD_VARIANT_TITLE"),user:v.DEFAULT_AUTHOR,layer:m.BASE,reference:this.sFlexReference});d.addFakeStandardVariant(this.sFlexReference,this.oAppComponent.getId(),t,o)}};O.prototype.setModelPropertiesForControl=function(e,t,a){this.oData[e].showFavorites=true;var n=this._bDesignTimeMode;if(n!==t){this._bDesignTimeMode=t;if(t){u.clearAllVariantURLParameters({model:this})}else if(n){u.update({parameters:u.getStoredHashParams({model:this}),updateURL:true,updateHashEntry:false,model:this})}}if(!(typeof this.fnManageClick==="function"&&typeof this.fnManageClickRta==="function")){this._initializeManageVariantsEvents()}a.detachManage(this.fnManageClick,this);if(t&&this.oData[e]._isEditable){this.oData[e].variantsEditable=false;this.oData[e].variants.forEach(function(a){a.rename=true;a.change=true;a.sharing=this.sharing.PUBLIC;a.remove=U(a,e,t)}.bind(this))}else if(this.oData[e]._isEditable){a.attachManage({variantManagementReference:e},this.fnManageClick,this);this.oData[e].variantsEditable=true;this.oData[e].variants.forEach(function(a){a.remove=U(a,e,t);switch(a.layer){case m.USER:a.rename=true;a.change=true;a.sharing=this.sharing.PRIVATE;P(a);break;case m.PUBLIC:a.sharing=this.sharing.PUBLIC;E(a);break;default:a.rename=false;a.change=false;a.sharing=this.sharing.PUBLIC}}.bind(this))}else{this.oData[e].variantsEditable=false;this.oData[e].variants.forEach(function(e){e.remove=false;e.rename=false;e.change=false})}};O.prototype._initializeManageVariantsEvents=function(){this.fnManageClickRta=function(e,t){var a=this.collectModelChanges(t.variantManagementReference,t.layer);t.resolve(a)};this.fnManageClick=function(e,t){if(!this.oFlexController||!this.getData()){return}var a=this.collectModelChanges(t.variantManagementReference,m.USER);var n=[];a.forEach(function(e){e.appComponent=this.oAppComponent;n.push(this.addVariantChange(t.variantManagementReference,e))}.bind(this));this.oChangePersistence.saveDirtyChanges(this.oAppComponent,false,n)}};function B(e,t,a,n){if(!this._bDesignTimeMode){return e.saveSequenceOfDirtyChanges(t,n).then(function(e){if(e){var t=e.response[0];this.oData[a].variants.forEach(function(e){if(e.key===t.fileName){e.author=t.support.user}})}}.bind(this))}return Promise.resolve()}O.prototype._handleSaveEvent=function(e){if(!this._bDesignTimeMode){var t=e.getSource();var a=e.getParameters();return this._handleSave(t,a)}return Promise.resolve()};O.prototype._handleSave=function(e,t){var a=V.getAppComponentForControl(e);var n=this.getLocalId(e.getId(),a);var r;return F(function(e,t,a){var n=a.def;var i=a.execute;var o=this.getCurrentVariantReference(e);var s=d.getControlChangesForVariant({reference:this.sFlexReference,vmReference:e,vReference:o});if(a.overwrite){return this.oFlexController.saveSequenceOfDirtyChanges(this._getDirtyChangesFromVariantChanges(s),t)}var c=a.layer||(a.public?m.PUBLIC:m.USER);var l=a.layer||m.USER;var f=a.newVariantReference||V.createDefaultFileName("flVariant");var h={variantManagementReference:e,appComponent:t,layer:c,title:a.name,contexts:a.contexts,sourceVariantReference:o,newVariantReference:f,generator:a.generator};return this.copyVariant(h).then(function(a){if(n){var c={changeType:"setDefault",defaultVariant:f,originalDefaultVariant:this.oData[e].defaultVariant,appComponent:t,layer:l,variantManagementReference:e};var h=this.addVariantChange(e,c);a.push(h)}if(i){var u={changeType:"setExecuteOnSelect",executeOnSelect:true,variantReference:f,appComponent:t,layer:l,variantManagementReference:e};var p=this.addVariantChange(e,u);a.push(p)}r=a;return x({changes:s,vmReference:e,vReference:o,model:this}).then(B.bind(this,this.oFlexController,a,e,t))}.bind(this))}.bind(this,n,a,t),this).then(function(){return r})};O.prototype.getLocalId=function(e,t){return c.getSelector(e,t).id};O.prototype.getVariantManagementReferenceForControl=function(e){var t=e.getId();var a=V.getAppComponentForControl(e);return a&&a.getLocalId(t)||t};O.prototype.switchToDefaultForVariantManagement=function(e){if(this.oData[e].currentVariant!==this.oData[e].defaultVariant){l.show(200);this.updateCurrentVariant({variantManagementReference:e,newVariantReference:this.oData[e].defaultVariant}).then(function(){l.hide()})}};O.prototype.switchToDefaultForVariant=function(e){Object.keys(this.oData).forEach(function(t){if(!e||this.oData[t].currentVariant===e){this.switchToDefaultForVariantManagement(t)}}.bind(this))};O.prototype.registerToModel=function(e){var t=this.getVariantManagementReferenceForControl(e);this._ensureStandardVariantExists(t);this.oData[t]._isEditable=e.getEditable();this.oData[t].showExecuteOnSelection=false;e.attachEvent("select",{vmReference:t,model:this},S);e.attachSave(this._handleSaveEvent,this);this.setModelPropertiesForControl(t,false,e);var a=e.getUpdateVariantInURL();this.oData[t].updateVariantInURL=a;u.registerControl({vmReference:t,updateURL:!!a,model:this});u.handleModelContextChange({model:this,vmControl:e});if(this.oData[t].initPromise){this.oData[t].initPromise.resolveFunction();delete this.oData[t].initPromise}this.oData[t].init=true;var n={appComponent:this.oAppComponent,reference:this.sFlexReference,vmReference:t,flexController:this.oFlexController};this._oVariantSwitchPromise=this._oVariantSwitchPromise.then(d.waitForInitialVariantChanges.bind(undefined,n))};O.prototype.waitForVMControlInit=function(e){if(!this.oData[e]){this.oData[e]={}}else if(this.oData[e].init){return Promise.resolve()}this.oData[e].initPromise={};this.oData[e].initPromise.promise=new Promise(function(t){this.oData[e].initPromise.resolveFunction=t}.bind(this));return this.oData[e].initPromise.promise};O.prototype._getDirtyChangesFromVariantChanges=function(e){var t=e.map(function(e){return e.getId()});return this.oChangePersistence.getDirtyChanges().filter(function(e){return n(t,e.getId())&&!e.getSavedToVariant()})};O.prototype.getCurrentControlVariantIds=function(){return Object.keys(this.oData||{}).reduce(function(e,t){return e.concat([this.oData[t].currentVariant])}.bind(this),[])};O.prototype.getVariantManagementControlIds=function(){var e;return Object.keys(this.oData||{}).reduce(function(t,a){if(this.oAppComponent.byId(a)){e=this.oAppComponent.createId(a)}else{e=a}t.push(e);return t}.bind(this),[])};O.prototype.destroy=function(){this.oDataSelector.removeUpdateListener(this.fnUpdateListener);d.clearFakeStandardVariants(this.sFlexReference,this.oAppComponent.getId());D.prototype.destroy.apply(this)};O.prototype.getUShellService=function(e){return V.getUshellContainer()&&b[e]};return O});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/FlexInfoSession", ["sap/ui/fl/apply/_internal/flexState/ManifestUtils"],function(e){"use strict";var n={};var t="sap.ui.fl.info.";function r(e){return t+(e||"true")}n.get=function(t){var r=e.getFlexReferenceForControl(t);return n.getByReference(r)};n.getByReference=function(e){return JSON.parse(window.sessionStorage.getItem(r(e)))};n.set=function(t,r){var o=e.getFlexReferenceForControl(r);n.setByReference(t,o)};n.setByReference=function(e,n){window.sessionStorage.setItem(r(n),JSON.stringify(e))};n.remove=function(n){var t=e.getFlexReferenceForControl(n);window.sessionStorage.removeItem(r(t))};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/Storage", ["sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/write/_internal/StorageFeaturesMerger","sap/ui/fl/apply/_internal/flexObjects/States","sap/base/util/ObjectPath"],function(e,t,n,r){"use strict";var i="sap/ui/fl/write/_internal/connectors/";function a(){return e.getConnectors(i,false)}function o(e,t){var n=t.filter(function(t){return t.layers.indexOf("ALL")!==-1||t.layers.indexOf(e)!==-1});if(n.length===1){return n[0]}if(n.length===0){throw new Error("No Connector configuration could be found to write into layer: "+e)}if(n.length>1){throw new Error("sap.ui.core.Configuration 'flexibilityServices' has a misconfiguration: Multiple Connector configurations were found to write into layer: "+e)}}function u(t){var n=t.map(function(t){return t.writeConnectorModule.loadFeatures({url:t.url}).then(function(e){return{features:e,layers:t.layers}}).catch(e.logAndResolveDefault.bind(null,{features:{},layers:t.layers},t,"loadFeatures"))});return Promise.all(n)}function d(e){if(!e){return Promise.reject("No layer was provided")}return a().then(o.bind(this,e))}function s(e){if(e.draft){return new Promise(function(t,n){sap.ui.require(["sap/ui/fl/write/api/FeaturesAPI"],function(r){r.isVersioningEnabled(e.layer).then(function(r){if(r){t()}else{n("Draft is not supported for the given layer: "+e.layer)}})})})}return Promise.resolve()}function c(e,t){var r=t.filter(function(t){return t.getState()===n.LifecycleState.NEW&&t.getFileType()===e.getFileType()});var i=r.findIndex(function(t){return t.getId()===e.getId()});return i}function l(e){var t;if(e.allChanges&&e.allChanges.length&&e.condensedChanges){t={namespace:e.allChanges[0].convertToFileContent().namespace,layer:e.layer};var r=0;var i=false;e.allChanges.forEach(function(a,o){var u=a.getFileType();if(u==="ctrl_variant"){return}var d=c(a,e.condensedChanges);if(a.condenserState){var s=false;if(a.condenserState==="delete"){if(a.getState()===n.LifecycleState.PERSISTED||a.getState()===n.LifecycleState.DELETED){if(!t.delete){t.delete={}}if(!t.delete[u]){t.delete[u]=[]}t.delete[u].push(a.getId())}r++}else if(e.condensedChanges.length){s=e.allChanges[o].getId()!==e.condensedChanges[o-r].getId()}if((a.condenserState==="select"&&a.getState()!==n.LifecycleState.NEW||a.condenserState==="update")&&s&&!i){var l=e.condensedChanges.slice(o-r).map(function(e){return e.getId()});if(!t.reorder){t.reorder={}}if(!t.reorder[u]){t.reorder[u]=[]}t.reorder[u]=l;i=true}if(a.condenserState==="select"&&a.getState()===n.LifecycleState.NEW){if(!t.create){t.create={}}if(!t.create[u]){t.create[u]=[]}t.create[u][d]={};t.create[u][d][a.getId()]=a.convertToFileContent()}else if(a.condenserState==="update"){if(!t.update){t.update={}}if(!t.update[u]){t.update[u]=[]}var f=t.update[u].length;t.update[u][f]={};t.update[u][f][a.getId()]={content:a.getContent()}}delete a.condenserState}else if(a.getState()===n.LifecycleState.NEW){if(!t.create){t.create={}}if(!t.create[u]){t.create[u]=[]}t.create[u][d]={};t.create[u][d][a.getId()]=a.convertToFileContent()}})}return t}function f(e,t){return s(t).then(d.bind(undefined,t.layer)).then(function(n){t.url=n.url;var i=r.get(e,n.writeConnectorModule);return i.call(n.writeConnectorModule,t)})}var g={};g.write=function(e){return f("write",e)};g.condense=function(e){var t=l(e);if(!t){return Promise.reject("No changes were provided")}if(t.create||t.reorder||t.update||t.delete){var n=t.create&&t.create.change?t.create.change:[];e.flexObjects=t;return f("condense",e).then(function(e){if(e&&e.status&&e.status===205&&n.length){var t=n.map(function(e){return Object.values(e).pop()});e.response=t}return e})}return Promise.resolve()};g.remove=function(e){return f("remove",e)};g.update=function(e){return f("update",e)};g.reset=function(e){return f("reset",e)};g.getFlexInfo=function(e){return f("getFlexInfo",e)};g.getContexts=function(e){return f("getContexts",e)};g.loadContextDescriptions=function(e){return f("loadContextDescriptions",e)};g.isContextSharingEnabled=function(e){return f("isContextSharingEnabled",e)};g.loadFeatures=function(){return a().then(u).then(t.mergeResults)};g.publish=function(e){return f("publish",e)};g.contextBasedAdaptation={create:function(e){return a().then(f.bind(undefined,"contextBasedAdaptation.create",e))},reorder:function(e){return a().then(f.bind(undefined,"contextBasedAdaptation.reorder",e))},update:function(e){return a().then(f.bind(undefined,"contextBasedAdaptation.update",e))},load:function(e){return a().then(f.bind(undefined,"contextBasedAdaptation.load",e))},writeChange:function(e){return g.write(e)},remove:function(e){return a().then(f.bind(undefined,"contextBasedAdaptation.remove",e))}};g.versions={load:function(e){return a().then(f.bind(undefined,"versions.load",e))},activate:function(e){return a().then(f.bind(undefined,"versions.activate",e))},discardDraft:function(e){return a().then(f.bind(undefined,"versions.discardDraft",e))},publish:function(e){return a().then(f.bind(undefined,"versions.publish",e))}};g.translation={getSourceLanguages:function(e){return a().then(f.bind(undefined,"translation.getSourceLanguages",e))},getTexts:function(e){return a().then(f.bind(undefined,"translation.getTexts",e))},postTranslationTexts:function(e){return a().then(f.bind(undefined,"translation.postTranslationTexts",e))}};return g});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/StorageFeaturesMerger", ["sap/base/util/merge"],function(e){"use strict";var n={isKeyUser:false,isKeyUserTranslationEnabled:false,isVariantSharingEnabled:false,isPublicFlVariantEnabled:false,isVariantPersonalizationEnabled:true,isContextSharingEnabled:true,isAtoAvailable:false,isAtoEnabled:false,versioning:{},isProductiveSystem:true,isPublicLayerAvailable:false,isLocalResetEnabled:false,isZeroDowntimeUpgradeRunning:false,system:"",client:""};function i(e){var n={};var i=!!e.features.isVersioningEnabled;e.layers.forEach(function(e){n[e]=i});return n}return{mergeResults:function(a){var s=n;a.forEach(function(n){Object.keys(n.features).forEach(function(e){if(e!=="isVersioningEnabled"){s[e]=n.features[e]}});s.versioning=e(s.versioning,i(n));if(n.isContextSharingEnabled!==undefined){s.isContextSharingEnabled=n.isContextSharingEnabled}});return s}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/Versions", ["sap/ui/fl/registry/Settings","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/write/_internal/Storage","sap/ui/fl/write/api/Version","sap/ui/model/json/JSONModel","sap/ui/model/BindingMode"],function(e,r,t,n,i,s){"use strict";var a={};var o=9;var f=o+1;function d(e,r){var t=l(e,r);t.setDefaultBindingMode(s.OneWay);t.setSizeLimit(o);t.setDirtyChanges=function(e){t.setProperty("/dirtyChanges",e);t.updateDraftVersion();t.updateBindings(true)};t.updateDraftVersion=function(){var e=t.getProperty("/versions");var r=t.getProperty("/versioningEnabled");var i=t.getProperty("/dirtyChanges");var s=t.getProperty("/backendDraft");var a=r&&(i||s);t.setProperty("/draftAvailable",a);if(i){t.setProperty("/displayedVersion",n.Number.Draft)}if(!v(e)&&a){e.splice(0,0,{version:n.Number.Draft,type:n.Type.Draft,filenames:[],isPublished:false})}if(v(e)&&!a){e.shift();t.setProperty("/displayedVersion",t.getProperty("/persistedVersion"))}var o=t.getProperty("/displayedVersion")!==t.getProperty("/activeVersion");t.setProperty("/activateEnabled",o)};return t}function l(e,r,t){var s;var a=false;var o=n.Number.Original;var f=v(r);var d=[];if(r.length>0){s=r[0].version}else{s=n.Number.Original}r.forEach(function(e){if(e.version===n.Number.Draft){e.type=n.Type.Draft;e.isPublished=false;d=e.filenames}else{if(o===n.Number.Original){e.type=n.Type.Active;o=e.version}else{e.type=n.Type.Inactive}if(e.version===s&&e.isPublished===false){a=true}}});if(t){t.setProperty("/publishVersionEnabled",a);t.setProperty("/versioningEnabled",e);t.setProperty("/versions",r);t.setProperty("/backendDraft",f);t.setProperty("/dirtyChanges",false);t.setProperty("/draftAvailable",f);t.setProperty("/activateEnabled",f);t.setProperty("/activeVersion",o);t.setProperty("/persistedVersion",s);t.setProperty("/displayedVersion",s);t.setProperty("/draftFilenames",d);t.updateBindings(true)}else{t=new i({publishVersionEnabled:a,versioningEnabled:e,versions:r,backendDraft:f,dirtyChanges:false,draftAvailable:f,activateEnabled:f,activeVersion:o,persistedVersion:s,displayedVersion:s,draftFilenames:d})}return t}function u(e,r){var t=[];var n=r.changePersistences;n.forEach(function(e){t=e.getDirtyChanges().concat();t.forEach(function(r){e.deleteChange(r,true)})});return t.length>0}function c(e){var t={dirtyChangesExist:false,changePersistences:[]};if(e.reference){var n=r.getChangePersistenceForComponent(e.reference);if(n.getDirtyChanges().length>0){t.dirtyChangesExist=true;t.changePersistences.push(n)}}if(e.nonNormalizedReference){var i=r.getChangePersistenceForComponent(e.nonNormalizedReference);if(i.getDirtyChanges().length>0){t.dirtyChangesExist=true;t.changePersistences.push(i)}}return t}function v(e){return e.some(function(e){return e.version===n.Number.Draft})}function p(e,r){e.setProperty("/backendDraft",false);e.setProperty("/dirtyChanges",false);e.setProperty("/draftAvailable",false);e.setProperty("/activateEnabled",false);e.setProperty("/displayedVersion",r);e.setProperty("/persistedVersion",r);e.updateBindings(true)}var y={};y.initialize=function(r){var n=r.reference;var i=r.layer;r.limit=f;return e.getInstance().then(function(e){var s=e.isVersioningEnabled(i);if(a&&a[n]&&a[n][i]){return a[n][i]}var o=s?t.versions.load(r):Promise.resolve([]);return o.then(function(e){return d(s,e)}).then(function(e){a[n]=a[n]||{};a[n][i]=a[n][i]||{};a[n][i]=e;return a[n][i]})})};y.getVersionsModel=function(e){var r=e.reference;var t=e.layer;if(!y.hasVersionsModel(e)){throw Error("Versions Model for reference '"+r+"' and layer '"+t+"' were not initialized.")}var n=c(e);if(n.dirtyChangesExist){a[r][t].updateDraftVersion(e)}return a[r][t]};y.hasVersionsModel=function(e){var r=e.reference;var t=e.layer;return a[r]&&a[r][t]};y.clearInstances=function(){a={}};y.updateModelFromBackend=function(e){if(y.hasVersionsModel(e)){e.limit=f;return t.versions.load(e).then(function(r){var t=y.getVersionsModel(e);return l(t.getProperty("/versioningEnabled"),r,t)})}};y.onAllChangesSaved=function(e){var r=y.getVersionsModel(e);var t=r.getProperty("/versioningEnabled");var i=r.getProperty("/dirtyChanges");var s=r.getProperty("/draftFilenames");r.setProperty("/draftFilenames",s.concat(e.draftFilenames));r.setProperty("/dirtyChanges",true);r.setProperty("/backendDraft",t&&i||!!e.contextBasedAdaptation);r.updateDraftVersion();r.setProperty("/persistedVersion",n.Number.Draft);r.updateBindings(true)};y.activate=function(e){var r=y.getVersionsModel(e);var i=r.getProperty("/versions");var s=v(i);var a=r.getProperty("/activeVersion");if(e.displayedVersion===a){return Promise.reject("Version is already active")}e.version=e.displayedVersion;var o=c(e);var f=o.changePersistences;var d=f.some(function(e){return e.getDirtyChanges().length>0});if(d){return Promise.reject("unsaved changes exists")}return t.versions.activate(e).then(function(e){i.forEach(function(e){e.type=n.Type.Inactive});e.type=n.Type.Active;e.isPublished=false;if(s){i.shift()}i.splice(0,0,e);r.setProperty("/activeVersion",e.version);r.setProperty("/publishVersionEnabled",true);r.setProperty("/draftFilenames",[]);p(r,e.version)})};y.discardDraft=function(e){var r=y.getVersionsModel(e);var n=c(e);var i=r.getProperty("/backendDraft");var s=i?t.versions.discardDraft(e):Promise.resolve();return s.then(function(){var t=r.getProperty("/versions");t.shift();p(r,r.getProperty("/activeVersion"));var s=u(e,n);return{backendChangesDiscarded:i,dirtyChangesDiscarded:s}})};y.publish=function(e){var r=y.getVersionsModel({reference:e.reference,layer:e.layer});return t.versions.publish(e).then(function(t){if(t!=="Error"&&t!=="Cancel"){r.setProperty("/publishVersionEnabled",false);var n=r.getProperty("/versions");var i=false;n.forEach(function(r){if(r.isPublished){return}if(r.version===e.version){i=true}if(i&&!r.isPublished){r.isPublished=true}})}return t})};return y});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/condenser/Condenser", ["sap/base/util/each","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Core","sap/ui/fl/changeHandler/condenser/Classification","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/apply/_internal/flexObjects/UIChange","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/write/_internal/condenser/classifications/LastOneWins","sap/ui/fl/write/_internal/condenser/classifications/Reverse","sap/ui/fl/write/_internal/condenser/classifications/Update","sap/ui/fl/write/_internal/condenser/UIReconstruction","sap/ui/fl/write/_internal/condenser/Utils","sap/ui/fl/Utils","sap/ui/performance/Measurement","sap/base/util/restricted/_isEqual"],function(e,n,t,r,a,i,o,s,f,c,u,d,l,p,g,h,C,v){"use strict";var E={};var y="unclassified";var S={lastOneWins:u,reverse:d,update:l};var _=["affectedControl","sourceContainer","targetContainer","updateControl"];function I(e,n){var t=e[o.Move];return n.classification===o.Create&&t&&t[t.length-1].targetContainer===n.targetContainer}function N(e,n){return n.classification===o.Move&&e[o.Destroy]}function m(e,n){return n.classification===o.Create&&e[o.Destroy]}function T(e,n,t,r){if(!N(e,t)&&!m(e,t)){var a=t.classification;if(!e[a]){t.change=r;r.condenserState="select";e[a]=[t]}else{r.condenserState="delete"}e[a][0].updateChange=r}else{r.condenserState="delete"}if(I(e,t)||m(e,t)){if(e[o.Move]){e[o.Move].forEach(function(e){e.change.condenserState="delete"});delete e[o.Move]}if(e[o.Destroy]){e[o.Destroy].forEach(function(e){e.change.condenserState="delete"});delete e[o.Destroy]}}return p.addChange(n,t)}function A(e,n,t){if(!e[n.classification]){e[n.classification]={}}var r=e[n.classification];S[n.classification].addToChangesMap(r,n,t);return Promise.resolve()}function O(e,n,t,r,a){if(!e[r.type]){e[r.type]={}}var i=e[r.type];if(r.type===g.NOT_INDEX_RELEVANT){return A(i,r,a)}t.push(a);if(!i[r.targetAggregation]){i[r.targetAggregation]={}}return T(i[r.targetAggregation],n,r,a)}function D(e,n,t){if(!e[n]){e[n]=[]}e[n].push(t);t.condenserState="select"}function R(e,n){var t=a.getControlIdBySelector(n.getSelector(),e);var r=i.byId(t);if(r){var o={modifier:a,appComponent:e,view:h.getViewForControl(r)};var f=s.getControlIfTemplateAffected(n,r,o);return Promise.resolve(s.getChangeHandler(n,f,o)).then(function(e){if(e&&typeof e.getCondenserInfo==="function"){return e.getCondenserInfo(n,o)}return undefined}).then(function(e){if(e&&f.bTemplateAffected){b(e,n)}return e}).catch(function(){return undefined})}return Promise.resolve()}function b(e,n){var t=n.getOriginalSelector();var r=n.getSelector();_.forEach(function(n){if(e[n]&&e[n]===r){e[n]=t}})}function x(e,n,r,i){var s=n!==undefined?n.affectedControl:a.getControlIdBySelector(r.getSelector(),i);if(!e[s]){e[s]={}}if(n&&n.updateControl){var f=n.updateControl;var c=[g.NOT_INDEX_RELEVANT,o.Update,n.uniqueKey];var u=t.get(c,e[f]);if(u){t.set(c,u,e[s]);delete e[f][g.NOT_INDEX_RELEVANT][o.Update][n.uniqueKey]}}return e[s]}function L(e,n,t,r,a){return a.reduce(function(a,i){return a.then(M.bind(this,e,n,t,r,i))}.bind(this),Promise.resolve())}function M(e,n,t,r,a){return R(e,a).then(function(i){w(i,e);var o=x(n,i,a,e);if(i!==undefined){U(i);return O(o,t,r,i,a).then(function(){if(i.update){V(o,i,a)}})}D(o,y,a);n[y]=true;return undefined})}function U(e){if(S[e.classification]){e.type=g.NOT_INDEX_RELEVANT}else{e.type=g.INDEX_RELEVANT}}function w(e,n){_.forEach(function(t){if(e&&e[t]){e[t]=a.getControlIdBySelector(e[t],n)}})}function V(e,n,r){var a=[g.NOT_INDEX_RELEVANT,o.Update,n.uniqueKey];var i=t.get(a,e);if(i){i.change.condenserState="delete";if(r.condenserState==="delete"){return}n.update(r,i.updateContent);delete e[g.NOT_INDEX_RELEVANT][o.Update][n.uniqueKey];if(r.isPersisted()){r.condenserState="update"}}}function P(t,r){e(t,function(e,a){if(S[e]&&S[e].getChangesFromMap){S[e].getChangesFromMap(t,e).forEach(function(e){r.push(e)})}else if(n(a)){return P(a,r)}else if(Array.isArray(a)){a.forEach(function(e){if(e instanceof f){r.push(e)}else{r.push(e.change)}})}});return r}function X(e){return P(e,[])}function q(t,r){e(t,function(e,t){if(n(t)){q(t,r)}else if(Array.isArray(t)){t.forEach(function(e){if(!(e instanceof f)){r.push(e)}})}});return r}function j(e,n){n.sort(function(n,t){return e.indexOf(n)-e.indexOf(t)})}function K(e,n){n.sort(function(n,t){return e.indexOf(n.change)-e.indexOf(t.change)})}function B(e,n){var t=e.map(function(e){return e.getId()});n.forEach(function(n){if(t.indexOf(n.getId())===-1){e.push(n)}})}function F(e,n,t){e.forEach(function(e){var r=e.updateChange;if(r&&!v(r.getContent(),e.change.getContent())&&r.getState()!==c.LifecycleState.NEW){var a=e.change;if(r.getId()!==a.getId()){var i=a.getContent();r.setContent(i);r.setRevertData(a.getRevertData());a.condenserState="delete";n=n.map(function(e){if(e.getId()===a.getId()){return r}return e});t.forEach(function(e,n){t[n]=e.map(function(e){if(e.getId()===a.getId()){return r}return e})})}else{r.setState(c.LifecycleState.DIRTY)}r.condenserState="update"}});return n}E.condense=function(e,n){C.start("Condenser_overall","Condenser overall - CondenserClass",["sap.ui.fl","Condenser"]);var t={};var a={};var i=[];var o=[];var s=[];n.slice(0).reverse().forEach(function(e){if(e instanceof f){if(e.getState()===c.LifecycleState.DELETED){e.condenserState="delete"}else if(e.isSuccessfullyApplied()){s.push(e)}else{o.push(e)}}else{o.push(e)}});C.start("Condenser_defineMaps","defining of maps - CondenserClass",["sap.ui.fl","Condenser"]);return L(e,t,a,i,s).then(function(){C.end("Condenser_defineMaps");var e=t[y];if(!e){p.compareAndUpdate(t,a)}var s=X(t);if(e){i.forEach(function(e){e.condenserState="select"});B(s,i)}s=s.concat(o);j(n,s);if(!e){C.start("Condenser_handleIndexRelatedChanges","handle index related changes - CondenserClass",["sap.ui.fl","Condenser"]);var f=true;var c=q(t,[]);K(n,c);var u;try{C.start("Condenser_sort","sort index related changes - CondenserClass",["sap.ui.fl","Condenser"]);u=p.sortIndexRelatedChanges(a,c)}catch(e){r.error("Error during Condensing: "+e.message,"No Condensing performed for index-relevant changes.");f=false}C.end("Condenser_sort");if(f){s=s.filter(function(e){return e.condenserState!=="delete"});c=c.filter(function(e){return e.change.condenserState!=="delete"});s=F(c,s,u);j(n,s);u.forEach(function(e){p.swapChanges(e,s)})}else{i.forEach(function(e){e.condenserState="select"});B(s,i);j(n,s)}C.end("Condenser_handleIndexRelatedChanges")}C.end("Condenser_overall");return s})};return E});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/condenser/UIReconstruction", ["sap/base/util/restricted/_isEqual","sap/base/util/each","sap/base/util/ObjectPath","sap/ui/fl/changeHandler/condenser/Classification","sap/ui/fl/write/_internal/condenser/classifications/Create","sap/ui/fl/write/_internal/condenser/classifications/Destroy","sap/ui/fl/write/_internal/condenser/classifications/Move","sap/ui/fl/write/_internal/condenser/Utils"],function(n,e,t,r,i,a,c,f){"use strict";var o={};var s={create:i,destroy:a,move:c};function u(n,t){e(n,function(n,r){e(r,function(e,i){t(r,n,i,e)})})}function l(n,e,t){n.splice(t,0,n.splice(e,1)[0])}function h(n,e){var t={};u(n,function(n,r,i,a){var c=i[f.TARGET_UI];var o=i[f.INITIAL_UI];e.forEach(function(n){var e=c.indexOf(n.affectedControl)>-1||o.indexOf(n.affectedControl)>-1;if(a===n.targetAggregation&&e){if(!t[r]){t[r]={}}var i=t[r];if(!i[a]){i[a]=[]}var f=i[a];f.push(n)}})});return t}function d(n){return!n.some(function(n){return n.classification!==r.Create})}function v(n){return!n.some(function(n){return f.isUnknown(n)})}function g(n){return n.getTargetIndex(n.change)}function I(n){n.sort(function(n,e){var t=g(n);var r=g(e);return t-r})}function E(n){return!n.some(function(n){return!f.isUnknown(n)})}function T(e,t){var r;if(e.length<t.length){r=t.slice(e.length);if(!E(r)){return false}t=t.slice(0,e.length)}else if(e.length>t.length){r=e.slice(t.length,e.length);if(!E(r)){return false}e=e.slice(0,t.length)}return n(e,t)}function p(n,e,t,r,i){var a={};i.forEach(function(n){var r=n.targetContainer;if(!a[r]){a[r]={}}var i=a[r];if(!i[e]){i[e]=f.initializeArrayWithPlaceholders(0,t.length-1)}s[n.classification].simulate(i[e],n,t)});var c=a[n][e];if(T(r,c)){i.forEach(function(n){if(n.sameIndex){n.change.condenserState="delete"}});return true}return false}function _(n,e){function t(n,e){if(g(e)!==n){var t=e.change.getState();e.setTargetIndex(e.change,n);e.change.setState(t);if(e.change.isPersisted()){e.change.condenserState="update"}}}function i(e,i,a){a[f.TARGET_UI].forEach(function(e,i){if(!f.isUnknown(e)){var a=n[e];var c=a[f.INDEX_RELEVANT];u(c,function(n,e,a,c){if(c!==r.Destroy){a.forEach(t.bind(this,i))}})}})}u(e,i)}function A(n,e){u(e,function(e,t,r,i){var a=r[f.INITIAL_UI];var c=r[f.TARGET_UI];if(T(a,c)){c.forEach(function(e){var t=n[e];if(t!==undefined){u(t[f.INDEX_RELEVANT],function(n,e,t){t.forEach(function(n){n.change.condenserState="delete"})});delete t[f.INDEX_RELEVANT]}});delete e[i]}})}function U(n,e){u(e,function(e,r,i,a){var c=i[f.INITIAL_UI];var o=i[f.TARGET_UI];c.forEach(function(e,r){var i=n[e];if(!i||!t.get([f.INDEX_RELEVANT,a],i)){var c=f.PLACEHOLDER+r;var s=o.indexOf(e);if(s>=0){o[s]=c}}})})}o.swapChanges=function(n,e){var t=n.map(function(n){return e.indexOf(n)}).sort();n.forEach(function(n){e[t.shift()]=n})};o.sortIndexRelatedChanges=function(n,e){var t=[];var r=h(n,e);u(r,function(e,r,i,a){var c=n[r][a][f.TARGET_UI];var o=n[r][a][f.INITIAL_UI];var s=true;if(v(c)||d(i)){I(i);s=p(r,a,o,c,i)}else if(!p(r,a,o,c,i)){s=false;var u=i.length;while(u!==0&&!s){var h=0;var g=1;while(g<i.length&&!s){l(i,h,g);s=p(r,a,o,c,i);h++;g++}u--}}if(!s){throw Error("no correct sorting found for the container: "+r)}i=i.filter(function(n){return n.change.condenserState!=="delete"});t.push(i.map(function(n){if(n.revertIndex>-1){n.setIndexInRevertData(n.change,n.revertIndex);n.sourceIndex=n.revertIndex}return n.change}))});return t};o.addChange=function(n,e){return s[e.classification].addToReconstructionMap(n,e)};o.compareAndUpdate=function(n,e){A(n,e);U(n,e);_(n,e)};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/condenser/Utils", ["sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Core"],function(e,n){"use strict";var i={};i.TARGET_UI="targetUI";i.INITIAL_UI="initialUI";i.PLACEHOLDER="X";i.INDEX_RELEVANT="indexRelevant";i.NOT_INDEX_RELEVANT="notIndexRelevant";function t(e,n){return(Math.max(e,n)||0)+1}i.getInitialUIContainerElementIds=function(e,n,t,r){if(!e[n]){e[n]={}}var a=e[n];if(!a[t]){a[t]={}}var f=a[t];if(!f[i.TARGET_UI]){f[i.TARGET_UI]=r}if(!f[i.INITIAL_UI]){f[i.INITIAL_UI]=r.slice(0)}return f[i.INITIAL_UI]};i.getContainerElementIds=function(i,t,r,a){var f=n.byId(i);return Promise.resolve(r||e.getAggregation(f,t)).then(function(e){return e.map(function(e){return a?e[a]:e.getId()})})};i.initializeArrayWithPlaceholders=function(e,n){var r=t(n,e);return Array(r).fill(i.PLACEHOLDER).map(function(e,n){return e+n})};i.extendArrayWithPlaceholders=function(e,n,r){var a=t(n,r);if(e.length<a){var f;for(var l=e.length;l<=a;l++){f=i.PLACEHOLDER+e.length;e.splice(e.length,0,f)}}};i.extendElementsArray=function(e,n,t,r){i.extendArrayWithPlaceholders(e,n,t);var a=e.indexOf(r);var f=e.indexOf(i.PLACEHOLDER+n);if(a!==n&&n!==undefined){if(a>=0){i.shiftElement(e,a,n)}else if(f>-1){e[f]=r}else if(i.isUnknown(e[n])){e[n]=r}}};i.shiftElement=function(e,n,i){e.splice(i,0,e.splice(n,1)[0])};i.isUnknown=function(e){if(e!==undefined&&e.indexOf(i.PLACEHOLDER)===0){var n=e.slice(1,e.length);var t=parseInt(n);if(isNaN(t)){return false}return true}return false};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/condenser/classifications/Create", ["sap/ui/core/Core","sap/ui/fl/write/_internal/condenser/Utils"],function(e,t){"use strict";return{addToReconstructionMap:function(n,r){var a=e.byId(r.affectedControl);var i=r.targetAggregation||a&&a.sParentAggregationName;return t.getContainerElementIds(r.targetContainer,i,r.customAggregation,r.affectedControlIdProperty).then(function(e){var a=t.getInitialUIContainerElementIds(n,r.targetContainer,r.targetAggregation,e);var i=a.indexOf(r.affectedControl);if(i>-1){a.splice(i,1)}})},simulate:function(e,t){e.splice(t.getTargetIndex(t.change),0,t.affectedControl)}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/condenser/classifications/Destroy", ["sap/ui/fl/write/_internal/condenser/Utils"],function(e){"use strict";return{addToReconstructionMap:function(t,n){return e.getContainerElementIds(n.targetContainer,n.targetAggregation,n.customAggregation,n.affectedControlIdProperty).then(function(r){var i=e.getInitialUIContainerElementIds(t,n.targetContainer,n.targetAggregation,r);if(i.length-1<n.sourceIndex){while(i.length-1<n.sourceIndex){var o=i.length;i.splice(i.length,0,e.PLACEHOLDER+o)}i[n.sourceIndex]=n.affectedControl}else{i.splice(n.sourceIndex,0,n.affectedControl)}})},simulate:function(t,n,r){var i=t.indexOf(n.affectedControl);if(i===-1){var o=e.PLACEHOLDER+r.indexOf(n.affectedControl);i=t.indexOf(o)}n.revertIndex=i;if(i>-1){t.splice(i,1)}}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/condenser/classifications/LastOneWins", [],function(){"use strict";return{addToChangesMap:function(e,n,t){if(!e[n.uniqueKey]){e[n.uniqueKey]=[t];t.condenserState="select"}else{t.condenserState="delete"}}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/condenser/classifications/Move", ["sap/ui/fl/write/_internal/condenser/Utils"],function(e){"use strict";return{addToReconstructionMap:function(t,n){return Promise.all([e.getContainerElementIds(n.sourceContainer,n.sourceAggregation,n.customAggregation,n.affectedControlIdProperty),e.getContainerElementIds(n.targetContainer,n.targetAggregation,n.customAggregation,n.affectedControlIdProperty)]).then(function(r){var a=r[0];var i=r[1];var o;var g;if(n.targetContainer===n.sourceContainer&&n.targetAggregation===n.sourceAggregation){o=e.getInitialUIContainerElementIds(t,n.targetContainer,n.targetAggregation,i);g=o.indexOf(n.affectedControl);e.shiftElement(o,g,n.sourceIndex)}else{o=e.getInitialUIContainerElementIds(t,n.targetContainer,n.targetAggregation,i);g=o.indexOf(n.affectedControl);o.splice(g,1);o=e.getInitialUIContainerElementIds(t,n.sourceContainer,n.sourceAggregation,a);o.splice(n.sourceIndex,0,n.affectedControl)}})},simulate:function(t,n,r){var a=n.affectedControl;var i=r.indexOf(a);e.extendElementsArray(t,i,undefined,a);var o=t.indexOf(a);var g=n.getTargetIndex(n.change);if(i===-1){t.splice(g,0,a)}else{t.splice(g,0,t.splice(o,1)[0])}n.sameIndex=o===g;n.revertIndex=o}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/condenser/classifications/Reverse", ["sap/base/util/each"],function(e){"use strict";return{addToChangesMap:function(e,n,t){if(!e[n.uniqueKey]){e[n.uniqueKey]=[]}e[n.uniqueKey].push(t)},getChangesFromMap:function(n,t){var u=[];e(n[t],function(e,n){n.reverse();var t;n.forEach(function(e,u){if(t&&t.getChangeType()!==e.getChangeType()){t=null;n[u].condenserState="delete";n[u-1].condenserState="delete"}else{t=e;if(u>0){n[u-1].condenserState="delete"}n[u].condenserState="select"}});if(t){u.push(t)}});return u}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/condenser/classifications/Update", ["sap/base/util/each"],function(e){"use strict";return{addToChangesMap:function(e,n,t){if(!e[n.uniqueKey]){n.change=t;e[n.uniqueKey]=n;t.condenserState="select"}else{t.condenserState="delete"}},getChangesFromMap:function(n,t){var a=[];e(n[t],function(e,n){a.push(n.change)});return a}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/flexState/FlexObjectState", ["sap/base/util/restricted/_omit","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/apply/api/ControlVariantApplyAPI","sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState","sap/ui/fl/write/_internal/Versions","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/LayerUtils","sap/ui/fl/Utils"],function(e,t,r,n,a,i,o,l,c,s,f,u,p){"use strict";var g={};function C(e){e.reference=i.getFlexReferenceForControl(e.selector);return a.initialize({componentId:e.componentId||p.getAppComponentForControl(e.selector).getId(),reference:e.reference,componentData:{},manifest:{}})}function y(e){var t=a.getCompVariantsMap(e.reference);var n=[];if(e.invalidateCache){var i=a.getInitialNonFlCompVariantData(e.reference);if(i){Object.keys(i).forEach(function(e){t._initialize(e,i[e].variants,i[e].controlId);r.merge(e,t[e],i[e].standardVariant)})}}for(var o in t){var l=t[o];for(var c in l.byId){n.push(l.byId[c])}}return u.filterChangeOrChangeDefinitionsByCurrentLayer(n,e.currentLayer)}function h(e){var t=i.getFlexReferenceForControl(e.selector);return c.persistAll(t)}function v(e){if(!e.reference){var t=o.getAppComponentForSelector(e.selector);e.reference=i.getFlexReferenceForControl(t)}return f.getChangePersistenceForComponent(e.reference)}function d(e,t){var r=p.getAppComponentForControl(t);var a=r.getModel(l.getVariantModelName());var i;if(a){var o=a&&a.sFlexReference;i=n.getVariantManagementReferences(o)}else{i=[]}if(i.length===0){return e}var c=i.map(function(e){return a.getCurrentVariantReference(e)});return e.filter(function(e){return e.getFileType()!=="change"||c.some(function(t){return e.getVariantReference()===t||!e.getVariantReference()})})}function F(t){var r=v(t);return r.getChangesForComponent(e(t,["invalidateCache","selector"]),t.invalidateCache).then(function(e){var n=[];if(t.includeDirtyChanges){n=r.getDirtyChanges();if(t.currentLayer){n=n.filter(function(e){return e.getLayer()===t.currentLayer})}}var a=e.concat(n);if(t.onlyCurrentVariants){return d(a,t.selector)}return a})}function m(e,t){var r=o.getFlexControllerInstance(e.selector);return r.saveAll(t,e.skipUpdateCache,e.draft,e.layer,e.removeOtherLayerChanges,e.condenseAnyLayer)}g.getFlexObjects=function(e){return C(e).then(function(){return F(e)}).then(function(t){return y(e).concat(t)})};g.getDirtyFlexObjects=function(e){e.includeDirtyChanges=true;var r=v(e);var n=r.getDirtyChanges();var a=y(e);return n.concat(a).filter(function(e){return e.getState()!==t.LifecycleState.PERSISTED})};g.hasDirtyFlexObjects=function(e){var t=o.getAppComponentForSelector(e.selector);var r=i.getFlexReferenceForControl(t);if(f.getChangePersistenceForComponent(r).getDirtyChanges().length>0){return true}return c.hasDirtyChanges(r)};g.saveFlexObjects=function(t){var r=o.getAppComponentForSelector(t.selector);t.reference=i.getFlexReferenceForControl(t.selector);return h(t).then(m.bind(this,t,r)).then(function(){if(t.version!==undefined&&s.hasVersionsModel(t)){var n=s.getVersionsModel(t);t.version=n.getProperty("/displayedVersion")}if(t.layer){t.currentLayer=t.layer}t.componentId=r.getId();t.invalidateCache=true;return g.getFlexObjects(e(t,"skipUpdateCache"))})};return g});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState", ["sap/base/util/restricted/_omit","sap/base/util/restricted/_pick","sap/base/util/UriParameters","sap/ui/core/Core","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/flexObjects/CompVariant","sap/ui/fl/apply/_internal/flexObjects/CompVariantRevertData","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexObjects/RevertData","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/UpdatableChange","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger","sap/ui/fl/registry/Settings","sap/ui/fl/write/_internal/Storage","sap/ui/fl/write/_internal/Versions","sap/ui/fl/write/api/Version"],function(e,t,n,a,r,i,o,s,c,p,u,f,l,v,g,d,y,C){"use strict";function S(e,t){var n=h("/draftFilenames",t);if(n){return e.getState()===u.LifecycleState.NEW||n.includes(e.getId())}return true}function h(e,t){var t={reference:t.reference,layer:t.layer};if(y.hasVersionsModel(t)){return y.getVersionsModel(t).getProperty(e)}return undefined}function m(e,t){var n=e.getFlexObjectMetadata?e.getFlexObjectMetadata().changeType:e.getChangeType();if(!["defaultVariant","updateVariant"].includes(n)){return false}var a=e.getLayer()===t.layer;var r=e.getFlexObjectMetadata().packageName;var i=!r||r==="$TMP";return a&&i&&S(e,t)}function V(e,t){if(t.isVariant&&t.isVariant()){return e.variants}var n=t.getChangeType();switch(n){case"defaultVariant":return e.defaultVariants;case"standardVariant":return e.standardVariants;default:return e.changes}}function x(e,t){for(var n=0;n<e.length;n++){if(e[n].fileName===t.fileName){e.splice(n,1,t);break}}}function O(e,t,n){return d.update({flexObject:e.convertToFileContent(),layer:e.getLayer(),transport:e.getRequest(),parentVersion:n}).then(function(t){if(t&&t.response){e.setResponse(t.response);if(n){y.onAllChangesSaved({reference:t.response.reference,layer:t.response.layer,draftFilenames:t.response.fileName})}}else{e.setState(u.LifecycleState.PERSISTED)}}).then(function(){var n=V(t.changes.comp,e);var a=e.convertToFileContent();x(n,a);return a})}function I(e,t){for(var n=e.length-1;n>=0;n--){var a=e[n].fileName||e[n].getId()&&e[n].getId();if((a||e[n].getId())===t){e.splice(n,1);break}}}function T(e,t){delete t.byId[e.getId()];if(e.getChangeType()==="standardVariant"){t.standardVariantChange=undefined}else{I(V(t,e),e.getId())}}function b(e,t,n,a){var r=e.convertToFileContent();return d.remove({flexObject:r,layer:e.getLayer(),transport:e.getRequest(),parentVersion:a}).then(function(){T(e,t)}).then(y.updateModelFromBackend.bind(this,{reference:r.reference,layer:r.layer})).then(function(){I(V(n.changes.comp,e),r.fileName);return r})}function D(e){var t={};if(typeof e.texts==="object"){Object.keys(e.texts).forEach(function(n){t[n]={value:e.texts[n],type:"XFLD"}})}return t}function E(e){return e&&[u.LifecycleState.NEW,u.LifecycleState.DIRTY,u.LifecycleState.DELETED].includes(e.getState())}function U(e){return e.variants.concat(e.changes).concat(e.defaultVariants).concat(e.standardVariantChange)}function R(e){if(e.layer){return e.layer}if(e.isUserDependent){return r.USER}var t=n.fromQuery(window.location.search).get("sap-ui-layer")||"";t=t.toUpperCase();if(t){return t}if(!e.fileType==="variant"){return r.CUSTOMER}var a=g.getInstanceOrUndef().isPublicLayerAvailable();return a?r.PUBLIC:r.CUSTOMER}function N(e){var t=l.getCompVariantsMap(e.reference)._getOrCreate(e.persistencyKey);return t.byId[e.id]}function F(e){if(e instanceof o){e.removeAllRevertData()}}function L(e,t){e.storeExecuteOnSelection(t.executeOnSelection);e.storeFavorite(t.favorite);e.storeContexts(t.contexts);e.storeName(t.name);e.storeContent(t.content||e.getContent());return e}function M(e,t){e.setExecuteOnSelection(t.executeOnSelection);e.setFavorite(t.favorite);e.setContexts(t.contexts);e.setName(t.name);e.setContent(t.content||e.getContent());return e}function j(e){if(e.layer===r.VENDOR){e.support={user:"SAP"}}else if(g.getInstanceOrUndef()&&g.getInstanceOrUndef().getUserId()){e.support={user:g.getInstanceOrUndef().getUserId()}}}var A={};A.checkSVMControlsForDirty=function(e){var t=l.getCompVariantsMap(e);return Object.values(t).some(function(e){var t=e.controlId&&a.byId(e.controlId);return t&&t.getModified()})};A.setDefault=function(e){var t={defaultVariantName:e.defaultVariantId};e.layer=e.layer||n.fromQuery(window.location.search).get("sap-ui-layer")||r.USER;var o=l.getCompVariantsMap(e.reference)._getOrCreate(e.persistencyKey);var s="defaultVariant";var u=o.defaultVariants;var v=u[u.length-1];if(!v||!m(v,e)){var g={fileName:i.createDefaultFileName(s),fileType:"change",changeType:s,layer:e.layer,content:t,namespace:i.createNamespace(e,"changes"),reference:e.reference,selector:{persistencyKey:e.persistencyKey},support:e.support||{}};g.support.generator=g.support.generator||"CompVariantState."+s;g.support.sapui5Version=a.getConfiguration().getVersion().toString();v=c.createFromFileContent(g,f);o.defaultVariants.push(v);o.byId[v.getId()]=v;v.addRevertInfo(new p({type:A.operationType.NewChange}))}else{v.addRevertInfo(new p({type:A.operationType.ContentUpdate,content:{previousState:v.getState(),previousContent:v.getContent()}}));v.setContent(t)}return v};A.revertSetDefaultVariantId=function(e){var t=l.getCompVariantsMap(e.reference)._getOrCreate(e.persistencyKey);var n=t.defaultVariants;var a=n[n.length-1];var r=a.popLatestRevertInfo();if(r.getType()===A.operationType.ContentUpdate){a.setContent(r.getContent().previousContent);a.setState(r.getContent().previousState)}else{a.setState(u.LifecycleState.DELETED);t.defaultVariants.pop()}};A.addVariant=function(t){if(!t){return undefined}var n=t.changeSpecificData;n.layer=R(n);n.changeType=n.type;n.texts=D(n);j(n);var a=Object.assign({},n,e(t,"changeSpecificData"));var r=c.createCompVariant(a);var i=l.getCompVariantsMap(t.reference);var o=i._getOrCreate(t.persistencyKey);o.variants.push(r);o.byId[r.getId()]=r;return r};A.updateVariant=function(e){function n(t,n){var a=t.getLayer()===n;var r=t.getFlexObjectMetadata().packageName;var i=!r||r==="$TMP";var o=t.getChanges().some(function(e){return e.getLayer()===n});return t.getPersisted()&&a&&i&&!o&&S(t,e)}function a(t){return t.getChanges().reverse().find(function(t){return t.getChangeType()==="updateVariant"&&m(t,e)})}function r(e,t,n,a){var r={type:n,change:a,content:{previousState:t.getState(),previousContent:t.getContent(),previousFavorite:t.getFavorite(),previousExecuteOnSelection:t.getExecuteOnSelection(),previousContexts:t.getContexts(),previousName:t.getName(),previousAction:e.action}};t.addRevertData(new s(r))}function i(e,t){r(e,t,A.operationType.ContentUpdate);if(e.executeOnSelection!==undefined){t.storeExecuteOnSelection(e.executeOnSelection)}if(e.favorite!==undefined){t.storeFavorite(e.favorite)}if(e.contexts){t.storeContexts(e.contexts)}if(e.name){t.storeName(e.name)}if(e.transportId){t.setRequest(e.transportId)}t.storeContent(e.content||t.getContent())}function o(e,n,a){var i=a.getRevertData()||[];var o=Object.assign({},a.getContent());var s={previousContent:Object.assign({},o),previousState:a.getState(),change:t(Object.assign({},e),["favorite","executeOnSelection","contexts","content","name"])};i.push(s);a.setRevertData(i);if(e.executeOnSelection!==undefined){o.executeOnSelection=e.executeOnSelection}if(e.favorite!==undefined){o.favorite=e.favorite}if(e.contexts){o.contexts=e.contexts}if(e.content){o.variantContent=e.content}if(e.name){a.setText("variantName",e.name)}a.setContent(o);if(e.transportId){a.setRequest(e.transportId)}r(e,n,A.operationType.UpdateVariantViaChangeUpdate,a);v.applyChangeOnVariant(n,a)}function p(e,t){function n(t){var n=l.getCompVariantsMap(e.reference);var a=t.getSelector().persistencyKey;n[a].changes.push(t);n[a].byId[t.getId()]=t}var a={};["favorite","executeOnSelection","contexts"].forEach(function(t){if(e[t]!==undefined){a[t]=e[t]}});if(e.content!==undefined){a.variantContent=e.content}var i=c.createUIChange({changeType:"updateVariant",layer:f,fileType:"change",reference:e.reference,packageName:e.packageName,content:a,selector:{persistencyKey:e.persistencyKey,variantId:t.getVariantId()}});if(e.changeSpecificData&&e.changeSpecificData.adaptationId!==undefined){i.setAdaptationId(e.changeSpecificData.adaptationId)}if(e.name){i.setText("variantName",e.name,"XFLD",true)}if(e.transportId){i.setRequest(e.transportId)}n(i);r(e,t,A.operationType.NewChange,i);v.applyChangeOnVariant(t,i)}var u=N(e);var f=R(e);if(n(u,f)){i(e,u)}else{var g=a(u);if(g){o(e,u,g)}else{p(e,u)}}return u};A.discardVariantContent=function(e){var t=N(e);var n=t.getRevertData();if(n.length!==0){var a=n.slice().reverse().some(function(t){if(t.getContent().previousAction===A.updateActionType.SAVE){e.content=t.getContent().previousContent;e.action=A.updateActionType.DISCARD;return true}});if(!a){e.content=n[0].getContent().previousContent;e.action=A.updateActionType.DISCARD}A.updateVariant(e)}return t};A.updateActionType={UPDATE:"update",SAVE:"save",DISCARD:"discard",UPDATE_METADATA:"update_metadata"};A.operationType={StateUpdate:"StateUpdate",ContentUpdate:"ContentUpdate",NewChange:"NewChange",UpdateVariantViaChange:"UpdateVariantViaChange",UpdateVariantViaChangeUpdate:"UpdateVariantViaChangeUpdate"};A.removeVariant=function(e){var t=N(e);var n=t.getState();if(!e.revert){var a=new s({type:A.operationType.StateUpdate,content:{previousState:n}});t.addRevertData(a)}if(n===u.LifecycleState.NEW){var r=l.getCompVariantsMap(e.reference);var i=r._getOrCreate(e.persistencyKey);T(t,i);return t}t.markForDeletion();return t};A.revert=function(e){function n(t){var n=t.getSelector().persistencyKey;var a=l.getCompVariantsMap(e.reference);delete a[n].byId[t.getId()];a[n].changes=a[n].changes.filter(function(e){return e!==t})}var a=N(e);var r=a.getRevertData().pop();a.removeRevertData(r);var i=r.getContent();var o;switch(r.getType()){case A.operationType.ContentUpdate:L(a,Object.assign({name:i.previousName,content:i.previousContent,favorite:i.previousFavorite,executeOnSelection:i.previousExecuteOnSelection,contexts:i.previousContexts},t(e,["reference","persistencyKey","id"])));break;case A.operationType.NewChange:o=r.getChange();a.removeChange(o);n(o);M(a,Object.assign({name:i.previousName,content:i.previousContent,favorite:i.previousFavorite,executeOnSelection:i.previousExecuteOnSelection,contexts:i.previousContexts},t(e,["reference","persistencyKey","id"])));break;case A.operationType.UpdateVariantViaChangeUpdate:o=r.getChange();M(a,Object.assign({name:i.previousName,content:i.previousContent,favorite:i.previousFavorite,executeOnSelection:i.previousExecuteOnSelection,contexts:i.previousContexts},t(e,["reference","persistencyKey","id"])));var s=o.getRevertData().pop();o.setContent(s.previousContent);o.setState(s.previousState);break;case A.operationType.StateUpdate:default:break}a.setState(i.previousState);return a};A.overrideStandardVariant=function(e){var t=l.getCompVariantsMap(e.reference)[e.persistencyKey];var n=t.byId[t.standardVariant.getVariantId()];n.setExecuteOnSelection(!!e.executeOnSelection);var a=n.getChanges();n.removeAllChanges();a.forEach(function(e){v.applyChangeOnVariant(n,e)})};A.persist=function(e){function t(e,t,n){if(e.getLayer()===r.PUBLIC){e.setFavorite(false)}return d.write({flexObjects:[e.convertToFileContent()],layer:e.getLayer(),transport:e.getRequest(),isLegacyVariant:e.isVariant&&e.isVariant(),parentVersion:n}).then(function(t){if(t&&t.response&&t.response[0]){e.setResponse(t.response[0]);if(n){y.onAllChangesSaved({reference:t.response[0].reference,layer:t.response[0].layer,draftFilenames:[t.response[0].fileName]})}}else{e.setState(u.LifecycleState.PERSISTED)}}).then(function(){var n=e.convertToFileContent();V(t.changes.comp,e).push(n);return n})}function n(e,n,a,r){switch(e.getState()){case u.LifecycleState.NEW:F(e);return t(e,a,r);case u.LifecycleState.DIRTY:F(e);return O(e,a,r);case u.LifecycleState.DELETED:F(e);return b(e,n,a,r);default:break}}var a=e.reference;var i=e.persistencyKey;var o=l.getCompVariantsMap(a);var s=o._getOrCreate(i);return l.getStorageResponse(a).then(function(e){var t=U(s).filter(E);var a=t.map(function(a,r){if(r===0){var i=h("/persistedVersion",{layer:a.getLayer(),reference:a.getFlexObjectMetadata().reference});return n(a,s,e,i).then(function(){var a=t.map(function(t,a){if(a!==0){var r=i?C.Number.Draft:undefined;return n(t,s,e,r)}});return a})}});return Promise.all(a)})};A.persistAll=function(t){var n=e(l.getCompVariantsMap(t),"_getOrCreate","_initialize");var a=Object.keys(n).map(function(e){return A.persist({reference:t,persistencyKey:e})});return Promise.all(a)};A.hasDirtyChanges=function(e){var t=l.getCompVariantsMap(e);var n=[];for(var a in t){var r=t[a];for(var i in r.byId){n.push(r.byId[i])}}return n.some(function(e){return e.getState()!==u.LifecycleState.PERSISTED&&!(e.getVariantId&&e.getVariantId()==="*standard*")})};return A});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/Adaptations", [],function(){"use strict";return{UrlParameter:"sap-ui-fl-adaptation",Type:{Default:"DEFAULT",Baseline:"BASELINE",ContextBased:"CONTEXTBASED"}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/ContextBasedAdaptationsAPI", ["sap/ui/fl/write/api/Adaptations","sap/ui/fl/write/api/FeaturesAPI","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/_internal/flexState/FlexObjectState","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Utils","sap/ui/fl/write/_internal/FlexInfoSession","sap/ui/fl/write/_internal/Storage","sap/ui/fl/write/_internal/Versions","sap/ui/model/json/JSONModel"],function(e,t,a,r,n,i,o,d,p,l,s,c){"use strict";var u={};var f={};function y(e){var t=r.getFlexReferenceForControl(e);if(!t){throw Error("The application ID could not be determined")}return t}function v(e,t,a,r){if(r){return s.updateModelFromBackend({reference:a.appId,layer:a.layer}).then(function(){return e})}s.onAllChangesSaved({reference:a.appId,layer:a.layer,contextBasedAdaptation:true});return Promise.resolve(e)}f.initialize=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}var a=y(e.control);e.reference=a;var r=e.layer;if(u&&u[a]&&u[a][r]){return Promise.resolve(u[a][r])}var n;return t.isContextBasedAdaptationAvailable(r).then(function(t){n=t;var a=n?f.load(e):Promise.resolve({adaptations:[]});return a}).then(function(t){var a=p.get(e.control)||{};var r=t.adaptations[0];if(a.adaptationId){r=t.adaptations.find(function(e){return e.id===a.adaptationId})||r}return f.createModel(t.adaptations,r,n)}).then(function(e){u[a]=u[a]||{};u[a][r]=u[a][r]||{};u[a][r]=e;return u[a][r]})};f.createModel=function(t,a,r){if(!Array.isArray(t)){throw Error("Adaptations model can only be initialized with an array of adaptations")}if(r&&!a){throw Error("Invalid call, must pass displayed adaptation")}if(!r&&t.length){throw Error("Invalid call, must not pass adaptations if feature is disabled")}var n=new c({allAdaptations:[],adaptations:[],count:0,displayedAdaptation:{},contextBasedAdaptationsEnabled:r});n.updateAdaptations=function(t){var a=t.filter(function(t,a){t.rank=a+1;return t.type!==e.Type.Default});n.setProperty("/adaptations",a);n.setProperty("/allAdaptations",t);n.setProperty("/count",a.length);n.updateBindings(true)};n.insertAdaptation=function(e){var t=n.getProperty("/allAdaptations");t.splice(e.priority,0,e);delete e.priority;n.updateAdaptations(t)};n.deleteAdaptation=function(){var e=n.getProperty("/displayedAdaptation").rank-1;var t=n.getProperty("/adaptations");var a=n.getProperty("/count");var r;if(a>1){r=t[e+(e===a-1?-1:1)].id}t.splice(e,1);var i=n.getProperty("/allAdaptations").pop();t.push(i);n.updateAdaptations(t);return r};n.switchDisplayedAdaptation=function(e){var t=n.getIndexByAdaptationId(e);var a=t?n.getProperty("/allAdaptations")[t]:n.getProperty("/allAdaptations")[0];n.setProperty("/displayedAdaptation",a);n.updateBindings(true)};n.updateAdaptationContent=function(e){var t=n.getProperty("/allAdaptations");var a=n.getProperty("/displayedAdaptation").rank-1;t[a].title=e.title;t[a].contexts=e.contexts;if(a!==e.priority){var r=t.splice(a,1);t.splice(e.priority,0,r[0])}n.updateAdaptations(t)};n.getIndexByAdaptationId=function(e){var t=n.getProperty("/allAdaptations");var a=t.findIndex(function(t){return t.id===e});return a>-1?a:undefined};if(t.length>0){n.updateAdaptations(t);n.setProperty("/displayedAdaptation",a)}return n};f.getAdaptationsModel=function(e){if(!e.layer){throw Error("No layer was provided")}if(!e.control){throw Error("No control was provided")}e.reference=y(e.control);var t=e.reference;var a=e.layer;if(!f.hasAdaptationsModel(e)){throw Error("Adaptations model for reference '"+t+"' and layer '"+a+"' were not initialized.")}return u[t][a]};f.getDisplayedAdaptationId=function(t){var a=this.getAdaptationsModel(t).getProperty("/displayedAdaptation/id");return a!==e.Type.Default?a:undefined};f.hasAdaptationsModel=function(e){var t=e.reference;var a=e.layer;return u[t]&&u[t][a]};f.adaptationExists=function(e){var t=e.reference;var a=e.layer;return this.hasAdaptationsModel({reference:t,layer:a})&&u[t][a].getProperty("/count")>0};f.clearInstances=function(){u={}};f.refreshAdaptationModel=function(e){this.clearInstances();return this.initialize(e).then(function(e){return e.getProperty("/displayedAdaptation/id")})};function A(e,t){return e.get(t)||t}function g(e,t,r,n){e.forEach(function(e){var i=a.createFromFileContent(e.cloneFileContentWithNewId());var o=i.getId();i.setAdaptationId(n);t.push(i);r.set(e.getId(),o)})}function h(e,t,r,n){e.forEach(function(e){var i=d.createDefaultFileName(e.getId().split("_").pop());var o=a.createFromFileContent(e.cloneFileContentWithNewId(i));if(e.getFileType()==="change"){if(e.getSelector().variantId){o.getSelector().variantId=A(r,o.getSelector().variantId)}else if(e.getContent().defaultVariantName){o.getContent().defaultVariantName=A(r,o.getContent().defaultVariantName)}if(e.getVariantReference()){o.setVariantReference(A(r,o.getVariantReference()))}}else if(e.getFileType()==="ctrl_variant_change"&&e.getSelector().id){o.getSelector().id=A(r,o.getSelector().id)}else if(e.getFileType()==="ctrl_variant_management_change"&&e.getContent().defaultVariant){o.getContent().defaultVariant=A(r,o.getContent().defaultVariant)}o.setAdaptationId(n);t.push(o)})}function I(e,t){var a=[];var r=[];var n=[];var i=new Map;e.forEach(function(e){if(e.isA("sap.ui.fl.apply._internal.flexObjects.Variant")){r.push(e)}else{n.push(e)}});g(r,a,i,t);h(n,a,i,t);return a.map(function(e){return e.convertToFileContent()})}function m(e){return s.getVersionsModel({layer:e.layer,reference:e.appId}).getProperty("/persistedVersion")}f.create=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}if(!e.contextBasedAdaptation){return Promise.reject("No contextBasedAdaptation was provided")}e.contextBasedAdaptation.id=d.createDefaultFileName();e.appId=y(e.control);return l.contextBasedAdaptation.create({layer:e.layer,flexObject:e.contextBasedAdaptation,appId:e.appId,parentVersion:m(e)}).then(function(t){var a=this.getAdaptationsModel(e);a.insertAdaptation(e.contextBasedAdaptation);return v(t,201,e)}.bind(this)).then(function(){return n.getFlexObjects({selector:e.control,invalidateCache:false,includeCtrlVariants:true,includeDirtyChanges:true,currentLayer:i.CUSTOMER})}).then(function(t){var a=o.filterChangeOrChangeDefinitionsByCurrentLayer(t,i.CUSTOMER);var r=I(a,e.contextBasedAdaptation.id);return l.contextBasedAdaptation.writeChange({layer:e.layer,flexObjects:r,transport:"",isLegacyVariant:false,parentVersion:m(e)})})};f.update=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}if(!e.contextBasedAdaptation){return Promise.reject("No contextBasedAdaptation was provided")}if(!e.adaptationId){return Promise.reject("No adaptationId was provided")}e.appId=y(e.control);return l.contextBasedAdaptation.update({layer:e.layer,flexObject:e.contextBasedAdaptation,appId:e.appId,adaptationId:e.adaptationId,parentVersion:m(e)}).then(function(t){return v(t,200,e)})};f.reorder=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}if(!e.parameters||!e.parameters.priorities){return Promise.reject("No valid priority list was provided")}e.appId=y(e.control);return l.contextBasedAdaptation.reorder({layer:e.layer,flexObjects:e.parameters,appId:e.appId,parentVersion:m(e)}).then(function(t){return v(t,204,e)})};f.load=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}e.appId=y(e.control);return l.contextBasedAdaptation.load({layer:e.layer,appId:e.appId,version:m(e)}).then(function(e){if(!e){e={adaptations:[]}}return e})};f.remove=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}if(!e.adaptationId){return Promise.reject("No adaptationId was provided")}e.appId=y(e.control);return l.contextBasedAdaptation.remove({layer:e.layer,appId:e.appId,adaptationId:e.adaptationId,parentVersion:m(e)}).then(function(t){return v(t,204,e,true)})};return f});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/FeaturesAPI", ["sap/ui/fl/registry/Settings","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(n,e,t){"use strict";var i={isPublishAvailable:function(){return n.getInstance().then(function(n){return n.isPublishAvailable()||!n.isProductiveSystem()&&n.isSystemWithTransports()})},isSaveAsAvailable:function(i){return Promise.all([n.getInstance(),t.getUShellService("CrossApplicationNavigation")]).then(function(n){var t=n[0];var r=n[1];return t.isAppVariantSaveAsEnabled()&&i===e.CUSTOMER&&r!==undefined}).catch(function(){return false})},isContextBasedAdaptationAvailable:function(t){return n.getInstance().then(function(n){if(n.isContextBasedAdaptationEnabled()&&t===e.CUSTOMER){return true}return false})},isKeyUser:function(){return n.getInstance().then(function(n){return n.isKeyUser()})},isVersioningEnabled:function(e){return n.getInstance().then(function(n){return n.isVersioningEnabled(e)})},isKeyUserTranslationEnabled:function(t){if(t===e.CUSTOMER){return n.getInstance().then(function(n){return n.isKeyUserTranslationEnabled()})}return Promise.resolve(false)},isContextSharingEnabled:function(t){if(t!==e.CUSTOMER){return Promise.resolve(false)}return n.getInstance().then(function(n){return n.isContextSharingEnabled({layer:t})})}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/Version", [],function(){"use strict";return{Number:{Original:"-1",Draft:"0"},UrlParameter:"sap-ui-fl-version",Type:{Active:"active",Draft:"draft",Inactive:"inactive"}}});
sap.ui.require.preload({
	"sap/ui/fl/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.fl","type":"library","embeds":["support/apps/contentbrowser","variants/context"],"applicationVersion":{"version":"1.115.1"},"title":"SAPUI5 library with sap.ui.fl controls.","description":"SAPUI5 library with sap.ui.fl controls.","ach":"CA-UI5-FL","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_hcb"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.115","libs":{"sap.ui.core":{"minVersion":"1.115.1"},"sap.m":{"minVersion":"1.115.1"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.ui.fl.variants.VariantManagement","sap.ui.fl.util.IFrame"],"elements":[],"types":[],"interfaces":[]}}}}'
},"sap/ui/fl/library-preload");
sap.ui.loader.config({bundlesUI5:{
"sap/ui/fl/library-preload-apply.js":['sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetMinUI5Version.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetFlexExtensionPointEnabled.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModelEnhanceWith.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModel.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddLibrary.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddComponentUsages.js','sap/ui/fl/apply/_internal/changes/descriptor/ovp/DeleteCard.js','sap/ui/fl/apply/_internal/changes/descriptor/ovp/ChangeCard.js','sap/ui/fl/apply/_internal/changes/descriptor/ovp/AddNewCard.js','sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetRegistrationIds.js','sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetAbstract.js','sap/ui/fl/apply/_internal/changes/descriptor/app/SetTitle.js','sap/ui/fl/apply/_internal/changes/descriptor/app/RemoveAllInboundsExceptOne.js','sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeInbound.js','sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeDataSource.js','sap/ui/fl/apply/_internal/changes/descriptor/app/AddNewInbound.js','sap/ui/fl/apply/_internal/changes/descriptor/app/AddAnnotationsToOData.js','sap/ui/fl/apply/_internal/flexState/compVariants/Utils.js','sap/ui/fl/apply/_internal/flexState/changes/ExtensionPointState.js','sap/ui/fl/apply/_internal/flexState/UI2Personalization/UI2PersonalizationState.js','sap/ui/fl/apply/_internal/changes/descriptor/RegistrationBuild.js','sap/ui/fl/apply/_internal/changes/descriptor/Registration.js','sap/ui/fl/apply/_internal/changes/descriptor/ApplyUtil.js','sap/ui/fl/apply/_internal/extensionPoint/Processor.js','sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils.js','sap/ui/fl/apply/_internal/connectors/ObjectStorageConnector.js','sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes.js','sap/ui/fl/apply/api/UI2PersonalizationApplyAPI.js','sap/ui/fl/apply/api/SmartVariantManagementApplyAPI.js','sap/ui/fl/util/IFrame.flexibility.js','sap/ui/fl/transport/TransportSelection.js','sap/ui/fl/transport/TransportDialog.js','sap/ui/fl/util/changePropertyValueByPath.js','sap/ui/fl/util/DescriptorChangeCheck.js','sap/ui/fl/write/api/ChangesWriteAPI.js','sap/ui/fl/write/_internal/connectors/LrepConnector.js','sap/ui/fl/write/_internal/transport/TransportSelection.js','sap/ui/fl/write/_internal/transport/TransportDialog.js','sap/ui/fl/descriptorRelated/api/DescriptorChangeFactory.js','sap/ui/fl/write/_internal/appVariant/AppVariantInlineChangeFactory.js','sap/ui/fl/write/connectors/BaseConnector.js','sap/ui/fl/write/_internal/connectors/Utils.js','sap/ui/fl/write/_internal/transport/Transports.js','sap/ui/fl/descriptorRelated/internal/Utils.js','sap/ui/fl/write/_internal/appVariant/AppVariantInlineChange.js'],
"sap/ui/fl/library-preload-write.js":['sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/booleanEditor/BooleanEditor.js','sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/validators/IsRequired.js','sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/getEditorConfig.js','sap/ui/fl/write/_internal/fieldExtensibility/cap/dialog/CustomFieldCAPDialog.js','sap/ui/fl/write/_internal/fieldExtensibility/cap/CAPAccess.js','sap/ui/fl/write/api/connectors/ObjectStorageConnector.js','sap/ui/fl/write/api/connectors/FileListBaseConnector.js','sap/ui/fl/write/_internal/fieldExtensibility/Utils.js','sap/ui/fl/write/_internal/fieldExtensibility/UriParser.js','sap/ui/fl/write/_internal/fieldExtensibility/SingleTenantABAPExtensibilityVariant.js','sap/ui/fl/write/_internal/fieldExtensibility/ServiceValidation.js','sap/ui/fl/write/_internal/fieldExtensibility/MultiTenantABAPExtensibilityVariant.js','sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariantFactory.js','sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariant.js','sap/ui/fl/write/_internal/fieldExtensibility/ABAPAccess.js','sap/ui/fl/write/_internal/extensionPoint/Registry.js','sap/ui/fl/write/_internal/extensionPoint/Processor.js','sap/ui/fl/write/_internal/delegates/ODataV4ReadDelegate.js','sap/ui/fl/write/_internal/connectors/SessionStorageConnector.js','sap/ui/fl/write/_internal/connectors/PersonalizationConnector.js','sap/ui/fl/write/_internal/connectors/ObjectStorageConnector.js','sap/ui/fl/write/_internal/connectors/ObjectPathConnector.js','sap/ui/fl/write/_internal/connectors/NeoLrepConnector.js','sap/ui/fl/write/_internal/connectors/LocalStorageConnector.js','sap/ui/fl/write/_internal/connectors/KeyUserConnector.js','sap/ui/fl/write/_internal/connectors/JsObjectConnector.js','sap/ui/fl/write/_internal/connectors/BackendConnector.js','sap/ui/fl/write/_internal/appVariant/AppVariantFactory.js','sap/ui/fl/write/_internal/appVariant/AppVariant.js','sap/ui/fl/write/api/VersionsAPI.js','sap/ui/fl/write/api/UI2PersonalizationWriteAPI.js','sap/ui/fl/write/api/TranslationAPI.js','sap/ui/fl/write/api/SmartVariantManagementWriteAPI.js','sap/ui/fl/write/api/SmartBusinessWriteAPI.js','sap/ui/fl/write/api/ReloadInfoAPI.js','sap/ui/fl/write/api/PersistenceWriteAPI.js','sap/ui/fl/write/api/LocalResetAPI.js','sap/ui/fl/write/api/FieldExtensibility.js','sap/ui/fl/write/api/ExtensionPointRegistryAPI.js','sap/ui/fl/write/api/ControlPersonalizationWriteAPI.js','sap/ui/fl/write/api/ContextSharingAPI.js','sap/ui/fl/write/api/AppVariantWriteAPI.js','sap/ui/fl/write/_internal/SaveAs.js','sap/ui/fl/descriptorRelated/api/DescriptorVariantFactory.js','sap/ui/fl/descriptorRelated/api/DescriptorInlineChangeFactory.js','sap/ui/fl/util/resolveBinding.js','sap/ui/fl/FakeLrepLocalStorage.js','sap/ui/fl/FakeLrepConnectorSessionStorage.js','sap/ui/fl/FakeLrepConnectorLocalStorage.js','sap/ui/fl/FakeLrepConnector.js','sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/timeEditor/TimeEditor.js','sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/rangeEditor/RangeEditor.js','sap/ui/fl/variants/context/Component.js','sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/timeEditor/TimeEditor.fragment.xml','sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/rangeEditor/RangeEditor.fragment.xml','sap/ui/fl/write/_internal/fieldExtensibility/cap/dialog/CustomFieldCAPDialog.fragment.xml','sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/booleanEditor/BooleanEditor.fragment.xml','sap/ui/fl/variants/context/view/ContextVisibility.view.xml','sap/ui/fl/variants/context/controller/ContextVisibility.controller.js']
}});
//# sourceMappingURL=library-preload.js.map
