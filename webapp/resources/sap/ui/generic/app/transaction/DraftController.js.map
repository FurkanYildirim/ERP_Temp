{"version":3,"file":"DraftController.js","names":["sap","ui","define","jQuery","BaseController","DraftContext","Log","Context","ActionUtil","DraftController","extend","metadata","publicMethods","constructor","oModel","oQueue","oDraftMergeTimer","apply","this","sName","_oContext","prototype","getDraftContext","_oModel","createDraft","sEntitySet","sPath","mParameters","that","Error","Promise","resolve","reject","fnSuccess","oData","oResponse","responseData","httpResponse","createdContext","fnError","oError","deleteCreatedEntry","createEntry","properties","predefinedValues","success","error","batchGroupId","changeSetId","canonicalRequest","expand","validateDraft","oContext","getModel","getObject","getPath","IsActiveEntity","oImport","getODataDraftFunctionImportName","_callAction","prepareDraft","urlParameters","activateDraft","oPrepareParameters","oActivateParameters","pPrepare","pActivate","all","editDraft","sImportName","discardDraft","mParam","sFunctionImport","_remove","getDraftForActive","$expand","_read","then","hasOwnProperty","context","getContext","getKey","SiblingEntity","getDraftForActiveEntity","oPromise","oPromise2","noShowSuccessToast","forceSubmit","_normalizeError","triggerSubmitChanges","_returnPromiseAll","createNewDraftEntity","vPredefinedValues","bCanonicalRequest","oParameters","fnSetBusy","Function","sId4BatchGroupAndChangeSet","mParameters1","sRootExpand","oContextForNewAction","bUseNewActionForCreate","oFunctionImport","_oMeta","getODataFunctionImport","oPromise0","oLibraryResourceBundle","getCore","getLibraryResourceBundle","sFunctionImportDialogTitleText","String","oFunctionImportDialogInfo","getTitleText","getText","sFunctionImportDialogActionButtonText","getActionButtonText","oSkipProperties","ResultIsActiveEntity","bIsDraft","isDraftEnabled","oActionProcessor","controller","oController","contexts","applicationController","oApplicationController","operationGrouping","undefined","mAdditionalParamData","isCreationScenario","call","executionPromise","oPromise1","aResponse","Array","isArray","_normalizeResponse","response","oResponseOut","fnPromise1Callback","bIsActiveEntity","bHasDraftEntity","oResponseEntity","_oDraftUtil","isActiveEntity","hasDraftEntity","mParameters2","failedMsg","createEditDraftEntity","bPreserveChanges","successMsg","PreserveChanges","validateDraftEntity","saveAndPrepareDraftEntity","binding","refresh","prepareDraftEntity","activateDraftEntity","bIsLenient","sExpand","oActivateDraftPromise","oTriggerSubmitPromise","sHandling","headers","Prefer","sETag","getETag","oActivationPromise","fnResolve","fnReject","fnCallerFunc","detachOnQueueCompleted","aResponses","_oQueue","_aQueue","length","attachOnQueueCompleted","hasDraft","hasActiveEntity","destroy"],"sources":["DraftController-dbg.js"],"mappings":"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"}