{"version":3,"file":"TransactionController.js","names":["sap","ui","define","jQuery","BaseController","DraftController","ModelUtil","extend","Log","TransactionController","metadata","publicMethods","constructor","oModel","oQueue","mParams","oDraftMergeTimer","apply","this","sName","_oDraft","noBatchGroups","setDeferredGroups","setChangeGroups","groupId","changeSetId","single","getInterface","prototype","setBatchStrategy","bSingle","n","mChangeBatchGroups","_oModel","getChangeGroups","getDraftController","_oQueue","_oDraftMergeTimer","editEntity","oContext","bPreserveChanges","sRootExpand","that","Promise","resolve","oDraftContext","sEntitySet","getDraftContext","getEntitySetFromContext","isDraftEnabled","_oDraftUtil","isActiveEntity","getObject","createEditDraftEntity","context","deleteEntity","vEntity","mParameters","bIsLenient","oPromise","oPromise2","sPath","oDraftController","model","Context","getPath","batchGroupId","successMsg","failedMsg","forceSubmit","sHandling","headers","Prefer","undefined","discardDraft","_remove","then","oResponse","_normalizeResponse","oResponseOut","_normalizeError","triggerSubmitChanges","_returnPromiseAll","deleteEntities","aEntities","aPromises","bIsStrict","fnResolve","fnReject","i","length","push","_atLeastOnePromiseResolved","invokeAction","sFunctionName","hasClientMessages","urlParameters","_callAction","oOut","refresh","resetChanges","aKeys","propertyChanged","sProperty","oBinding","binding","checkUpdateOnChange","getBoundContext","hasDraftPreparationAction","saveAndPrepareDraftEntity","onlyIfPending","noShowResponse","noBlockUI","getDefaultValues","aContexts","aPredefinedValues","sNavigationProperty","sFunctionImportName","oEntityObject","aEntityTypeProperties","Error","oMetaModel","getModel","getMetaModel","oEntityType","getODataEntityType","getODataEntitySet","entityType","forEach","oNavProperty","name","oChildEntityType","getODataAssociationEnd","type","property","getODataFunctionImport","parameter","sDefaultValueFunctionPath","getDefaultValuesFunction","sDefaultValuesFunctionImport","split","error","sETag","getETag","httpResponse","statusCode","oResult","responseData","oDefaultValue","oProperty","hasOwnProperty","aFinalValues","oPredefinedValue","oExistingValues","sProp","oEntitySet","sDefaultValue","String","updateMultipleEntities","aContextToBeUpdated","aUpdatePromise","iIndex","oUpdatePromise","_updateEntity","sContextPath","oUpdateData","destroy"],"sources":["TransactionController-dbg.js"],"mappings":"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"}