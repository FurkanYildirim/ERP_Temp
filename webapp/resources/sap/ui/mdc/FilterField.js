/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/field/FieldBase","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/enums/FieldDisplay","sap/base/util/merge","sap/base/util/deepEqual"],function(t,e,r,i,o){"use strict";var p=t.extend("sap.ui.mdc.FilterField",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/field/FilterField.designtime",properties:{operators:{type:"string[]",group:"Data",defaultValue:[]},defaultOperator:{type:"string",group:"Data",defaultValue:null},propertyKey:{type:"string",group:"Data",defaultValue:""}},events:{change:{parameters:{value:{type:"string"},valid:{type:"boolean"},conditions:{type:"object[]"},promise:{type:"boolean"}}}}},renderer:e});p.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["operators","propertyKey"]})};p.prototype.exit=function(){t.prototype.exit.apply(this,arguments)};p.prototype.getPropertyKey=function(){var t=this.getProperty("propertyKey");if(!t){t=this.getFieldPath()}return t};p.prototype.setProperty=function(e,r,i){if(e==="conditions"&&this.isInvalidInput()&&o(this.getConditions(),this.validateProperty(e,r))){if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true)}this.resetInvalidInput()}return t.prototype.setProperty.apply(this,arguments)};p.prototype.observeChanges=function(e){t.prototype.observeChanges.apply(this,arguments);if(e.name==="operators"){if(e.current.length===0){t.prototype.getSupportedOperators.apply(this,[])}else{this.setProperty("_operators",e.current,true)}this.updateInternalContent()}else if(e.name==="propertyKey"){this.updateInternalContent()}};p.prototype.fireChangeEvent=function(t,e,r,o){var p;if(t){if(e){if(t.length==1){p=t[0].values[0]}}else{p=r}}this.fireChange({value:p,valid:e,conditions:i([],t),promise:o})};p.prototype.getSupportedOperators=function(){var e=this.getOperators();if(e.length===0){e=t.prototype.getSupportedOperators.apply(this,arguments)}else{this.setProperty("_operators",e,true)}return e};p.prototype.setOperators=function(t){var e=[];if(!Array.isArray(t)){t=t.split(",")}t.forEach(function(t){if(typeof t==="string"){e.push(t)}else{e.push(t.name)}});this.setProperty("operators",e);return this};p.prototype.addOperator=function(t){var e=this.getSupportedOperators();var r=t;if(typeof t!=="string"){r=t.name}if(e.indexOf(r)<0){e.push(r);this.setOperators(e)}return this};p.prototype.addOperators=function(t){if(!Array.isArray(t)){t=[t]}t.forEach(function(t){this.addOperator(t)}.bind(this));return this};p.prototype.removeOperator=function(t){var e=this.getSupportedOperators();var r=t;if(typeof t!=="string"){r=t.name}if(e.indexOf(r)>-1){e.splice(e.indexOf(r),1);this.setOperators(e)}};p.prototype.removeOperators=function(t){if(!Array.isArray(t)){t=[t]}t.forEach(function(t){this.removeOperator(t)}.bind(this))};p.prototype.removeAllOperators=function(){this.setOperators([])};p.prototype.setDefaultOperator=function(t){var e=t;if(t&&typeof t!=="string"){e=t.name}this.setProperty("defaultOperator",e);return this};p.prototype.checkCreateInternalContent=function(){if(!this.isFieldDestroyed()&&!this.isPropertyInitial("dataType")){var e=this._getValueHelp();var i=sap.ui.getCore().byId(e);var o=this.getBindingInfo("conditions");var p=this.getBinding("conditions");if(this.getDisplay()!==r.Value&&e&&(!i||o&&!p)){return}this.getContentFactory().retrieveDataType();t.prototype.checkCreateInternalContent.apply(this,arguments)}};p.prototype.handleModelContextChange=function(e){t.prototype.handleModelContextChange.apply(this,arguments);if(this.getCurrentContent().length===0){this.triggerCheckCreateInternalContent()}};p.prototype.isSearchField=function(){if(this.isPropertyInitial("propertyKey")){return t.prototype.isSearchField.apply(this,arguments)}else{var e=this.getPropertyKey();var r=new RegExp("^\\*(.*)\\*|\\$search$");return r.test(e)&&this.getMaxConditions()===1}};return p});
//# sourceMappingURL=FilterField.js.map