/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/field/content/DefaultContent","sap/ui/mdc/enums/BaseType","sap/ui/mdc/enums/OperatorValueType","sap/ui/mdc/util/DateUtil","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/core/library","sap/ui/model/Filter"],function(e,t,a,r,i,n,l){"use strict";var o=n.CalendarType;var d;var p;var s=Object.assign({},e,{getEditMultiLine:function(){return[null]},getEdit:function(){return["sap/m/DynamicDateRange","sap/ui/mdc/condition/OperatorDynamicDateOption","sap/ui/mdc/field/DynamicDateRangeConditionsType","sap/m/library","sap/m/DynamicDateFormat"]},getEditOperator:function(){return{EQ:{name:"sap/m/DatePicker",create:this._createDatePickerControl},BT:{name:"sap/m/DateRangeSelection",create:this._createDateRangePickerControl}}},getEditForHelp:function(){return e.getEdit.apply(this,arguments)},getUseDefaultFieldHelp:function(){return{name:"defineConditions",oneOperatorSingle:false,oneOperatorMulti:true,single:false,multi:true}},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.DateContent - createEditMultiLine not defined!")},_createDatePickerControl:function(e,t,a){var r=t[0];var i=e.getConditionsType();e.setHideOperator(true);this._adjustDataTypeForDate(e);var n=new r(a,{value:{path:"$field>/conditions",type:i},displayFormat:e.getDisplayFormat(),valueFormat:e.getValueFormat(),placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",liveChange:e.getHandleContentLiveChange(),change:e.getHandleContentChange()});if(n.setDisplayFormatType){n.setDisplayFormatType(e.getCalendarType())}if(n.setSecondaryCalendarType){n.setSecondaryCalendarType(e.getSecondaryCalendarType())}n._setPreferUserInteraction(true);e.setAriaLabelledBy(n);return[n]},_createDateRangePickerControl:function(e,t,a){var r=t[0];var i=e.getConditionsType();this._adjustDataTypeForDate(e);var n=new r(a,{value:{path:"$field>/conditions",type:i},displayFormat:e.getDisplayFormat(),valueFormat:e.getValueFormat(),delimiter:"...",displayFormatType:e.getCalendarType(),secondaryCalendarType:e.getSecondaryCalendarType(),placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",liveChange:e.getHandleContentLiveChange(),change:e.getHandleContentChange()});n._setPreferUserInteraction(true);e.setAriaLabelledBy(n);return[n]},_adjustDataTypeForDate:function(e){var t=e.retrieveDataType();var a=t.getFormatOptions();this._getDatePattern(e,a);if(!a||a.style||!a.pattern||a.pattern!==e.getValueFormat()||!a.calendarType||a.calendarType!==o.Gregorian){e.setDateOriginalType(e.getDataType());e.setDataType(r.createInternalType(t,e.getValueFormat()));e.updateConditionType()}},_getDatePattern:function(e,a){var r=e.getField().getBaseType();switch(r){case t.Date:e.setValueFormat("yyyy-MM-dd");break;case t.DateTime:e.setValueFormat("yyyy-MM-dd'T'HH:mm:ss");break;case t.Time:e.setValueFormat("HH:mm:ss");break;default:return}e.setDisplayFormat("medium");if(a){if(a.style){e.setDisplayFormat(a.style)}else if(a.pattern){e.setDisplayFormat(a.pattern)}if(a.calendarType){e.setCalendarType(a.calendarType)}if(a.secondaryCalendarType){e.setSecondaryCalendarType(a.secondaryCalendarType)}}},createEdit:function(e,t,a){var r=t[0];var i=t[1];var n=t[2];var o=t[3];if(!d||!p){d=o.StandardDynamicDateRangeKeys;p=t[4]}var s=e.getConditionsType(false,n);var u=function(t){return this._getDateRangeStandardOptions(t,e)}.bind(this);var c=new l({path:"/",test:function(t){var a=e.getField().getBaseType();return!this._getDateRangeStandardOption(t,a)}.bind(this)});var g=function(t,r){var n=e.getField().getBaseType();var l=r.getObject();return this._createOperatorDynamicDateOption(l,e,i,n,a)}.bind(this);var y=new r(a,{value:{path:"$field>/conditions",type:s},formatter:this._getDateRangeFormatter(e),placeholder:"{$field>/placeholder}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",standardOptions:{path:"$field>/_operators",formatter:u},customOptions:{path:"$field>/_operators",filters:c,factory:g},change:e.getHandleContentChange()});e.setAriaLabelledBy(r);return[y]},createEditForHelp:function(t,a,r){return e.createEdit.apply(this,arguments)},_getDateRangeStandardOptions:function(e,t){if(!e||e.length===0){e=t.getField().getSupportedOperators()}var a=[];var r=t.getField().getBaseType();for(var i=0;i<e.length;i++){var n=e[i];var l=this._getDateRangeStandardOption(n,r);if(l){a.push(l)}}return a},_getDateRangeStandardOption:function(e,t){var a=i.getOperator(e);return i.getDynamicDateOptionForOperator(a,d,t)},_createOperatorDynamicDateOption:function(e,t,r,n,l){var o=i.getOperator(e);var d;if(o){var p=i.getCustomDynamicDateOptionForOperator(o,n);var s=t.retrieveDataType();var u=[];for(var c=0;c<o.valueTypes.length;c++){if(o.valueTypes[c]&&o.valueTypes[c]!==a.Static){u.push("custom")}}d=new r(l+"--"+p,{key:p,operator:o,type:s,baseType:n,valueTypes:u})}return d},_getDateRangeFormatter:function(e){var a=e.retrieveDataType();var r=e.getField().getBaseType();var i=a.getFormatOptions();var n={};var l={};if(i.style){n.style=i.style}else if(i.pattern){n.pattern=i.pattern}if(r===t.DateTime){l.datetime=n}l.date=n;return p.getInstance(l)}});return s});
//# sourceMappingURL=DateContent.js.map