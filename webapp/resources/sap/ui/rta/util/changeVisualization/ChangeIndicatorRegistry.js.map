{"version":3,"file":"ChangeIndicatorRegistry.js","names":["sap","ui","define","includes","values","_omit","Log","ManagedObject","JsControlTreeModifier","ElementUtil","ChangesWriteAPI","FlUtils","ChangeCategories","ChangeStates","ChangeIndicatorRegistry","extend","metadata","properties","changeCategories","type","defaultValue","rootControlId","constructor","prototype","apply","this","arguments","_oRegisteredChanges","_oChangeIndicators","exit","reset","getAllRegisteredChanges","map","oChange","Object","assign","getRegisteredChangeIds","keys","getRegisteredChange","sChangeId","getSelectorsWithRegisteredChanges","oChangeIndicators","sPreviousAffectedElementId","addSelector","sSelectorId","sAffectedElementId","oChangeIndicatorData","bDependent","undefined","push","id","change","getId","dependent","affectedElementId","displayElementsKey","visualizationInfo","displayElementIds","toString","descriptionPayload","forEach","sId","iIndex","affectedElementIds","getRelevantChangesWithSelector","oSelectors","aRelevantChanges","aRelevantChangesForSelector","filter","concat","getChangeIndicator","getChangeIndicators","registerChange","sCommandName","oVersionsModel","oAppComponent","getAppComponentForControl","getElementInstance","getRootControlId","getVisualizationInfo","then","mChangeVisualizationInfo","aCategories","getChangeCategories","sChangeCategory","category","find","sChangeCategoryName","OTHER","aChangeStates","aDraftChangesList","getData","draftFilenames","getState","getDraftAndDirtyStates","DRAFT","ALL","commandName","changeCategory","changeStates","bind","getSelectorIds","aSelectorList","vSelector","oElement","bySelector","Boolean","getInfoFromChangeHandler","oInfoFromChangeHandler","mVisualizationInfo","aChangeSelectors","getSelector","aAffectedElementSelectors","affectedControls","oChangeOriginalSelector","getOriginalSelector","aDisplayElementSelectors","dependentElementIds","dependentControls","displayControls","updateRequired","oSelector","oControl","getChangeHandler","changeType","getChangeType","element","modifier","layer","getLayer","oChangeHandler","getChangeVisualizationInfo","isSuccessfullyApplied","catch","vErr","error","Promise","resolve","registerChangeIndicator","oChangeIndicator","sKeyToRemove","removeRegisteredChange","oIndicator","destroy","removeOutdatedRegisteredChanges","removeRegisteredChangesWithoutVizInfo","length"],"sources":["ChangeIndicatorRegistry-dbg.js"],"mappings":"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"}