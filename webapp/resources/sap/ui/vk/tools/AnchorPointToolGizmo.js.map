{"version":3,"file":"AnchorPointToolGizmo.js","names":["sap","ui","define","getResourceBundle","THREE","BufferGeometryUtils","Gizmo","AnchorPointToolGizmoRenderer","CoordinateSystem","AxisColours","AnchorPointToolOperation","assert","AnchorPointToolGizmo","extend","metadata","library","prototype","init","apply","this","_createEditingForm","_gizmoIndex","_handleIndex","_viewport","_tool","_sceneGizmo","Scene","light","DirectionalLight","position","set","add","AmbientLight","_touchAreas","Group","_gizmo","_matViewProj","Matrix4","_gizmoSize","_moveDelta","Vector3","_rotationDelta","createGizmoArrow","dir","color","touchAreas","arrowLength","lineRadius","coneHeight","coneRadius","touchRadius","multiplyScalar","lineGeometry","CylinderGeometry","m","makeBasis","y","z","x","setPosition","clone","applyMatrix4","material","MeshLambertMaterial","transparent","line","Mesh","matrixAutoUpdate","userData","coneGeometry","cone","touchGeometry","touchGeometry2","mergedGeometry","mergeBufferGeometries","createGizmoPlane","a","b","colors","Float32Array","geometry","BufferGeometry","vertices","setAttribute","Float32BufferAttribute","setIndex","MeshBasicMaterial","opacity","visible","side","DoubleSide","plane","lineVertices","Line","LineBasicMaterial","vertexColors","linewidth","window","devicePixelRatio","createGizmoArc","axis","radius","segments","TorusGeometry","Math","PI","rotateY","rotateX","arc","createTouchArc","i","arcMaterial","_arcMesh","_axisTitles","_createAxisTitles","_line","LineSegments","frustumCulled","hasDomElement","_updateHandlesVisibility","allowOperation","getAllowOperation","enableMovement","Rotate","enableRotation","Move","children","_initAnchorPoint","viewport","_anchorPoint","show","tool","hide","pos","copy","updateMatrixWorld","setQuaternion","quaternion","getGizmoCount","getTouchObject","scale","arrowHighlighting","highlightHandle","index","hoverMode","arrow","highlight","setHex","colorAttr","attributes","copyArray","needsUpdate","selectHandle","_units","setText","getText","String","fromCharCode","_editingForm","rerender","setShouldRenderFrame","beginGesture","_isMoved","_isRotated","_originPosition","setFromMatrixPosition","matrixWorld","_originQuaternion","endGesture","fireMoved","fireRotated","_setOffset","offset","gizmoIndex","fireEvent","_move","matInv","invert","setFromMatrixScale","newPos","sub","multiply","posAttribute","getAttribute","array","toArray","computeBoundingBox","abs","max","setRGB","move","_setRotationAxisAngle","axisIndex","angle1","angle2","deltaAngle","euler","Euler","fromArray","MathUtils","radToDeg","_rotate","i1","i2","n","ceil","setComponent","cos","sin","push","indices","geom","_deactivateScreenAlignment","quat","Quaternion","setFromEuler","rotate","degToRad","_getValueLocaleOptions","useGrouping","minimumFractionDigits","maximumFractionDigits","getValue","setFromMatrixColumn","normalize","dot","rotation","reorder","setValue","value","quat2","setFromQuaternion","expandBoundingBox","boundingBox","_expandBoundingBox","getCamera","getCameraRef","_updateGizmoTransformation","camera","multiplyMatrices","projectionMatrix","matrixWorldInverse","_getGizmoScale","setScalar","_updateAxisTitles","_getEditingFormPosition","direction","basis","_extractBasis","render","getMetadata","getName","renderer","getRenderer","clearDepth","_updateEditingForm"],"sources":["AnchorPointToolGizmo-dbg.js"],"mappings":"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"}