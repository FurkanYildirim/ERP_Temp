{"version":3,"file":"Gizmo.js","names":["sap","ui","define","vkLibrary","mLibrary","Input","Label","coreLibrary","Control","CoordinateSystem","AxisColours","ToolNodeSet","THREE","GizmoPlacementMode","AnimationTrackType","InputType","Gizmo","extend","metadata","library","renderer","render","rm","control","prototype","hasDomElement","_drawText","canvas","text","fontSize","drawBorder","pixelRatio","window","devicePixelRatio","w","width","h","height","halfWidth","halfHeight","ctx","getContext","clearRect","font","textAlign","textBaseline","fillStyle","globalAlpha","filter","fillText","beginPath","arc","Math","PI","closePath","lineWidth","strokeStyle","stroke","_createTextMesh","color","document","createElement","this","texture","Texture","needsUpdate","material","MeshBasicMaterial","map","transparent","alphaTest","premultipliedAlpha","side","DoubleSide","mesh","Mesh","PlaneGeometry","userData","_createAxisTitles","size","drawCircle","addNegativeAxes","group","Group","add","x","y","z","_extractBasis","matrix","basis","Vector3","extractBasis","normalize","_updateAxisTitles","obj","gizmo","camera","distance","scale","matrixWorld","children","forEach","child","i","offset","constructor","getComponent","position","copy","multiplyScalar","quaternion","setScalar","_updateSelection","viewStateManager","nodes","_tool","getNodeSet","Highlight","enumerateSelection","nodeRef","push","node","enumerateOutlinedNodes","_nodes","length","every","v","_cleanTempData","nodeInfo","ignore","parent","l","_getOffsetForRestTransformation","bind","setPlacementMode","placementMode","_placementMode","_getAnchorPoint","_viewport","_anchorPoint","_getSelectionCenter","target","setFromMatrixPosition","_nodeUserDataMap","get","Rest","offsetWTranslation","center","boundingBox","getCenter","applyMatrix4","_getGizmoScale","getRenderer","getCamera","getCameraRef","pos4","Vector4","_matViewProj","getSize","Vector2","projectionMatrix","elements","_getEffectiveParent","_viewStateManager","joints","getJoints","n","joint","skipUpdateJointNode","clear","_sequence","_prepareForCreatingKey","playback","_playback","Map","set","trans","getTransformation","restTrans","getRestTransformation","wrestTrans","getRestTransformationWorld","wtrans","getTransformationWorld","pos","translation","sc","quatRest","Quaternion","matRest","Matrix4","compose","matRestInv","invert","initialTranslation","slice","initialScale","initialQuaternion","matInitial","clone","matInitialInv","quatInitialDiff","multiply","quatInitialDiffInv","matInitialDiff","Box3","expandByObject","offsetWTranslationCenter","euler","animationPlayer","getAnimationPlayer","data","getAnimatedProperty","Rotate","offsetToPrevious","Euler","startEuler","eulerInParentCoors","startEulerInParentCoors","_updateGizmoObjectTransformation","moveToCenter","anchorPoint","nodeWorldMatrix","parentWorldMatrix","_coordinateSystem","Custom","Local","Parent","effParent","decompose","setPosition","Screen","_gizmoSize","makeBasis","copyPosition","matrixAutoUpdate","updateMatrixWorld","_expandBoundingBox","visibleOnly","gizmoCount","getGizmoCount","multiplyMatrices","matrixWorldInverse","_updateGizmoTransformation","_sceneGizmo","_createEditingForm","units","_label","m","addStyleClass","_units","_input","type","Number","maxLength","TextAlign","Right","change","event","setValue","getParameter","_editingForm","HBox","items","onkeydown","ontap","ontouchstart","setMarked","_getValueLocaleOptions","useGrouping","_updateEditingForm","active","axisIndex","label","domRef","getDomRef","getShowEditingUI","setText","rerender","labelDomRef","style","Color","getStyle","getValue","toLocaleString","_getEditingFormPosition","gizmoPosition","_gizmo","sub","viewportRect","getBoundingClientRect","formRect","alignRight","dx","dy","MathUtils","clamp","max","min","left","round","top","transform","display"],"sources":["Gizmo-dbg.js"],"mappings":"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"}