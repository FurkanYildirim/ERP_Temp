{"version":3,"file":"RotateToolHandler.js","names":["sap","ui","define","EventProvider","Menu","MenuItem","getResourceBundle","THREE","CoordinateSystem","RotateToolHandler","extend","metadata","library","constructor","tool","this","_priority","_tool","_gizmo","getGizmo","_rect","_rayCaster","Raycaster","linePrecision","_handleIndex","_gizmoIndex","_matrixOrigin","Matrix4","_levelingQuaternion","Quaternion","_mouse","Vector2","_mouseOrigin","prototype","_updateMouse","event","size","getViewport","getRenderer","getSize","x","width","y","height","setFromCamera","getCamera","getCameraRef","_updateHandles","hoverMode","prevHandleIndex","n","type","i","l","getGizmoCount","touchObj","getTouchObject","intersects","intersectObject","length","children","indexOf","object","copy","matrixWorld","_getLevelingQuaternion","_objectSize","_getObjectSize","_getGizmoScale","position","highlightHandle","setShouldRenderFrame","hover","_inside","_gesture","handled","click","selectHandle","_getMouseAngle","ray","delta","_rotationPoint","clone","sub","origin","dist","_rotationAxis","dot","direction","mouseDirection","multiplyScalar","normalize","Math","atan2","_axis2","_axis1","beginGesture","Vector3","setFromMatrixColumn","crossVectors","setFromMatrixPosition","abs","cos","PI","matCamera","_startAngle","_prevDeltaAngle","move","angle1","deltaAngle","sign","angle2","getEnableStepping","step","steps","sizes","MathUtils","degToRad","angle","round","getEnableSnapping","getDetector","detect","viewport","_viewport","gizmo","detectType","handleIndex","isFinite","_setRotationAxisAngle","endGesture","contextMenu","getAllowContextMenu","menu","items","text","getText","key","World","Local","Screen","Custom","itemSelected","item","getParameters","setCoordinateSystem","getKey","bind","openAsContextMenu","_getOffset","obj","rectangle","getBoundingClientRect","p","left","window","pageXOffset","top","pageYOffset","id","getIdForLabel","domobj","document","getElementById","o","w","offsetWidth","h","offsetHeight"],"sources":["RotateToolHandler-dbg.js"],"mappings":"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"}