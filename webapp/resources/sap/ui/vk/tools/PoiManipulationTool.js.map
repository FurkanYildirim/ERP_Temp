{"version":3,"file":"PoiManipulationTool.js","names":["sap","ui","define","Tool","THREE","PoiToolHandler","PoiToolGizmo","PoiHelper","ToolNodeSet","NodeContentType","PoiManipulationTool","extend","metadata","library","properties","nodeSet","type","defaultValue","Highlight","aggregations","buttons","multiple","events","editing","parameters","nodeRef","removing","moving","x","y","z","nodesProperties","moved","constructor","sId","mSettings","apply","this","arguments","_viewport","_poiHelper","setAggregation","_handler","_buttonPosition","Vector2","_selectedPoi","Set","prototype","init","call","_editButton","m","Button","icon","ButtonType","Neutral","press","event","fireEditing","values","next","value","bind","addStyleClass","_deleteButton","fireRemoving","addAggregation","setButtonsVisibility","attachMoved","getParameter","i","length","node","_gizmo","getIgnoreNonPoiNode","_vkGetNodeContentType","Symbol","adjustPoi","setFootprint","getSelectedPois","pois","vsm","_viewStateManager","getSymbolNodes","forEach","poi","getSelectionState","push","_updateSelectedPoi","symbolNodes","includes","delete","add","_updateButtonPosition","nodeRect","getPoiRect","nodeBoundingBox","Box3","expandByObject","center","Vector3","getCenter","nodeCenter","projectToScreen","getCamera","buttonx","width","buttony","height","set","handlePoiSelectionChange","setActive","activeViewport","updateButtons","getGizmo","show","rerender","_addLocoHandler","attachSelectionChanged","_removeLocoHandler","detachSelectionChanged","hide","getButtons","buttonsDom","btn","getVisible","getDomRef","parentElement","size","style","display","left","top","visible","setVisible","addButtons","controls","Array","isArray","ctr"],"sources":["PoiManipulationTool-dbg.js"],"mappings":"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"}