{"version":3,"file":"Detector.js","names":["sap","ui","define","THREE","Detector","this","_verticesMap","Map","_objArr","_collidedUuids","Set","_sourceObjects","_targetObjects","_srcBoxHelper","_sourceBox","Box3","_originPos","Vector3","_targetBoxHelper","_targetBoxes","_detectDistance","_direction","_isReady","_finalDistance","_finalSnaps","_intersectDistance","Number","NEGATIVE_INFINITY","_collidedUuid","_isMoved","_detectType","move","detectMove","bind","scale","detectScale","rotate","detectRotate","prototype","isReady","setMoved","value","getObjArray","addObjFromScene","viewport","sceneRef","_scene","getSceneRef","vsm","_viewStateManager","length","clear","traverse","child","isMesh","find","o","uuid","push","vArr","getVertices","geometry","userData","renderGroup","set","setSource","viewStateManager","selectedNodes","enumerateSelection","nodeRef","obj","pop","setSelectionStates","children","_isGroup","meshes","node","type","BoxHelper","update","setFromObject","_sourceSize","getSize","_calculateInitialDetectDistance","setTarget","vec","pos1","viewportSize","getRenderer","Vector2","x","y","camera","getCamera","getCameraRef","unproject","sub","position","normalize","distance","z","copy","add","multiplyScalar","pos2","viewWidth","distanceTo","Math","abs","computeBoundingSphere","filter","forEach","to","toBoxHelper","toBox","updateTargetBox","tbHelper","i","l","vertices","isGeometry","isBufferGeometry","attribute","attributes","undefined","v","vStr","firstVertex","lastVertex","count","fromBufferAttribute","JSON","stringify","clone","findClosestVertex","radius","object","get","vertex","localPosition","worldToLocal","il","localToWorld","findClosestSnap","targetObj","increment","snap","intersectDetect","interObjArr","snaps","originBBoxExp","expandByScalar","targetIdx","findIndex","t","has","intersectsBox","detectCollisionGJK","getFinalSnaps","finalSnaps","size","snapsArray","Array","from","keys","minSnap","q","ql","objFound","currDistance","nextSnap","nextDistance","snapMove","option","_op","gizmo","_tool","_handler","_gesture","_moveDelta","_move","setShouldRenderFrame","detect","snapScale","_scaleDelta","equals","gsArray","toArray","s","setComponent","_scale","snapRotate","angle2","angle1","_setRotationAxisAngle","handleIndex","_calculateDetectDistance","sourceSize","direction","newDetectDistance","halfBoundingBox","raycaster","Raycaster","_snapAction","debounce","intersectObjects","cid","cobj","delete","_gizmoPos","_gizmo","getWorldPosition","srcWorldPos","rg","tmpSphere","boundingSphere","Sphere","newFromPackedArray","sphereRadius","applyMatrix4","matrixWorld","bSphere","targetBBox","intersectsSphere","pointToSource","_radius","axisIndex","_axis","setFromMatrixColumn","_matOrigin","transformDirection","subVectors","crossVectors","_rotationDelta","getComponent","negate","rotatePlane","Plane","tempTargets","intersectsPlane","detectOptions","getCenter","detectType","finalDirection","func","wait","timeout","that","args","arguments","clearTimeout","setTimeout","apply","target","MAX_ITERATIONS","GJK","shape1","shape2","simplex","n","d","support","dot","tmp","tmp2","cross","face","a","aO","ab","ac","ad","abc","acd","oneFace","twoFaces","dir","p1","getFarthestPoint","p2","shape","p","proj","abp","acp","adb","ABC","ACD","ADB","tests","start","performance","now","isCollide","console","log"],"sources":["Detector-dbg.js"],"mappings":"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"}