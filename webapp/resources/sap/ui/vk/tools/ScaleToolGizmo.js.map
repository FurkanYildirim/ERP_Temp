{"version":3,"file":"ScaleToolGizmo.js","names":["sap","ui","define","THREE","Gizmo","ScaleToolGizmoRenderer","CoordinateSystem","AxisColours","AnimationTrackType","assert","Log","ScaleToolGizmo","extend","metadata","library","prototype","init","apply","this","_createEditingForm","_gizmoIndex","_handleIndex","_value","Vector3","setScalar","_scaleDelta","_viewport","_tool","_nonUniformScaleEnabled","_sceneGizmo","Scene","light","DirectionalLight","position","set","add","AmbientLight","_gizmo","Group","_touchAreas","_coordinateSystem","World","_nodes","_matViewProj","Matrix4","_gizmoSize","arrowLength","boxSize","touchBoxSize","createGizmoBox","dir","color","touchAreas","m","makeBasis","y","z","x","boxGeometry","BoxGeometry","applyMatrix4","material","MeshLambertMaterial","transparent","box","Mesh","userData","copy","lineRadius","lineGeometry","CylinderGeometry","setPosition","clone","multiplyScalar","line","renderOrder","touchGeometry","createGizmoTriangle","a","b","BufferGeometry","vertices","Float32Array","setAttribute","Float32BufferAttribute","colors","Line","LineBasicMaterial","vertexColors","linewidth","window","devicePixelRatio","triangleGeometry","triVertices","setIndex","triangle","MeshBasicMaterial","opacity","side","DoubleSide","visible","boxMaterial","_axisTitles","_createAxisTitles","_updateGizmoPartVisibility","hasDomElement","screenSystem","Screen","gizmoObjects","children","touchObjects","resetValues","setCoordinateSystem","coordinateSystem","setNonUniformScaleEnabled","value","show","viewport","tool","length","_sequence","_updateSelection","_viewStateManager","nodesProperties","_getNodesProperties","fireEvent","hide","_cleanTempData","_updateEditingForm","getGizmoCount","Local","Parent","getTouchObject","i","_updateGizmoObjectTransformation","arrowHighlighting","highlightHandle","index","hoverMode","highlightAll","obj","highlight","setHex","axisTitle","colorAttr","geometry","attributes","copyArray","needsUpdate","selectHandle","gizmoIndex","getAutoResetValues","setShouldRenderFrame","beginGesture","_beginValue","_matOrigin","matrixWorld","forEach","nodeInfo","scaleOrigin","node","scale","matOrigin","parent","matParentInv","invert","_prepareForCreatingScaleKey","sequence","_printEventInfo","event","debug","properties","name","offsetToRest","offsetToPrevious","absolute","world","restDifference","restDifferenceInCoordinates","property","rtransform","getRelativeTransformation","slice","_getEffectiveParent","skipUpdateJointNode","_setJointNodeOffsets","Scale","offsetScale","_setJointNodeMatrix","_playback","sequenceOffset","_getEndPropertyInPreviousPlayback","transform","getTransformation","wtrans","getTransformationWorld","_nodeUserDataMap","get","gmat","sc","wmatScale","matScale","initialScale","quaternionVector","Quaternion","quaternion","rotMat","makeRotationFromQuaternion","initialRotMat","initialQuaternion","vx","vy","vz","extractBasis","rvx","rvy","rvz","dot","multiply","decompose","indices","_alignAxesBetweenGizmoAndNodeCoordinates","Math","abs","push","bind","endGesture","fireScaled","withNode","getClosestAligned","v","v1","v2","v3","d1","d2","d3","nodeMat","normalize","gizmoMat","gvx","gvy","gvz","_scale","changeSigns","scaleVector","appliedScalePositive","multiplyVectors","updateMatrix","ignore","multiplyMatrices","matrix","nmat","elements","smat","te","_setScale","getValue","getComponent","setValue","axisScale","setComponent","expandBoundingBox","boundingBox","_expandBoundingBox","getCamera","getCameraRef","viewStateManager","call","getEnableSnapping","getDetector","setSource","handleSelectionChanged","_getObjectScale","objectIndex","_getObjectSize","Box3","isEmpty","size","getSize","_updateGizmoTransformation","gi","camera","_updateAxisTitles","_getEditingFormPosition","direction","setFromMatrixColumn","render","getMetadata","getName","renderer","getRenderer","projectionMatrix","matrixWorldInverse","clearDepth","l"],"sources":["ScaleToolGizmo-dbg.js"],"mappings":"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"}