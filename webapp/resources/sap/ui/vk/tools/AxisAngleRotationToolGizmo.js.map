{"version":3,"file":"AxisAngleRotationToolGizmo.js","names":["sap","ui","define","Log","THREE","Gizmo","AxisAngleRotationToolGizmoRenderer","AxisColours","AnimationTrackType","assert","AxisAngleRotationToolGizmo","extend","metadata","library","axisColors","y","z","math2PI","Math","PI","mathHalfPI","fontSize","degToRad","MathUtils","radToDeg","prototype","init","apply","this","_createEditingForm","String","fromCharCode","_gizmoIndex","_handleIndex","_value","Vector3","_rotationDelta","_viewport","_tool","_sceneGizmo","Scene","light","DirectionalLight","position","set","add","AmbientLight","_gizmo","Group","_touchAreas","_nodes","_matViewProj","Matrix4","_gizmoSize","createTouchCircle","axis","radius","segments","geometry","TorusGeometry","rotateY","rotateX","rotateZ","Mesh","MeshBasicMaterial","opacity","transparent","i","sphere","IcosahedronGeometry","setComponent","_createGizmoObject","gizmo","userData","createGizmoCircle","color","circle","matrixAutoUpdate","createGizmoArrow","dir","arrowLength","lineRadius","coneHeight","coneRadius","multiplyScalar","material","MeshLambertMaterial","lineGeometry","CylinderGeometry","m","makeBasis","x","setPosition","clone","applyMatrix4","line","coneGeometry","cone","axisArrow","BufferGeometry","setAttribute","Float32BufferAttribute","Float32Array","arrowProjection","Line","LineDashedMaterial","scale","dashSize","gapSize","computeLineDistances","AxesHelper","arcMeshes","arcMesh","vertexColors","side","DoubleSide","depthWrite","visible","push","valueLabels","valueMesh","_createTextMesh","renderOrder","depthTest","axisTitles","_createAxisTitles","setScalar","titleDistance","children","hasDomElement","resetValues","show","viewport","tool","handleSelectionChanged","fireEvent","nodesProperties","_getNodesProperties","hide","_cleanTempData","_updateEditingForm","getGizmoCount","length","getTouchObject","copyObjectTransformation","_updateGizmoObjectTransformation","highlightHandle","index","gizmoIndex","hoverMode","gi","gc","arrow","setHex","axisTitle","_snapToAxis","dy","dz","beginGesture","_rotate","Euler","endGesture","selectHandle","_updateEditValue","setShouldRenderFrame","dest","src","quaternion","copy","updateMatrix","updateMatrixWorld","axisToAzimuth","atan2","axisToElevation","sqrt","azimuthElevationToAxis","azimuth","elevation","sa","sin","ca","cos","se","ce","updateArcMesh","axisIndex","angle1","angle2","c","Color","vertices","colors","r","g","b","i1","i2","deltaAngle","n","min","max","ceil","abs","mr","lerp","f","a","cf","indices","geom","setIndex","_updateGizmoObject","angle","euler","circleZ","setFromEuler","circleX","setFromMatrixColumn","matrix","projectionLength","updateValueLabel","forEach","nodeInfo","beginAngle","beginAzimuth","beginElevation","getValues","fireRotated","drawText","canvas","text","pixelRatio","window","devicePixelRatio","w","width","h","height","hw","hh","ctx","getContext","font","textMetrics","measureText","dx","clearRect","beginPath","arc","lineTo","closePath","globalAlpha","fillStyle","fill","lineWidth","strokeStyle","stroke","textAlign","Device","browser","chrome","firefox","textBaseline","fillText","actualBoundingBoxDescent","value","toLocaleString","useGrouping","minimumFractionDigits","maximumFractionDigits","texture","map","image","needsUpdate","_calculateRotationQuaternion","fromArray","effectiveParent","_getEffectiveParent","node","parent","transformDirection","matrixWorld","invert","Quaternion","setFromAxisAngle","_updateNodeRotation","multiplyQuaternions","skipUpdateJointNode","_viewStateManager","_setJointNodeOffsets","Rotate","clamp","_setRotationAxisAngle","rotate","_getValueLocaleOptions","getValue","getComponent","setValue","rotateBy","setAxis","Array","isArray","values","_getNodeInfoByNode","nodes","l","setValues","expandBoundingBox","boundingBox","_expandBoundingBox","getCamera","getCameraRef","_updateSelection","viewStateManager","call","getEnableSnapping","getDetector","setSource","event","count","remove","_getObjectSize","objectIndex","Box3","isEmpty","size","getSize","obj","setFromMatrixPosition","setFromRotationMatrix","_getGizmoScale","_getValuePosition","out","vi","applyEuler","_pos","_updateGizmoTransformation","camera","child","multiply","_getEditingFormPosition","render","getMetadata","getName","renderer","getRenderer","multiplyMatrices","projectionMatrix","matrixWorldInverse","clearDepth","_getOffsetForRestTransformation"],"sources":["AxisAngleRotationToolGizmo-dbg.js"],"mappings":"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"}