{"version":3,"file":"MeasurementToolGizmo.js","names":["sap","ui","define","core","Log","Edge","Face","Vertex","MeshAnalyzer","MeshAnalyzer2D","Settings","State","Gizmo","THREE","MeasurementToolGizmo","extend","metadata","library","basePrototype","getMetadata","getParent","getClass","prototype","hasDomElement","init","call","this","_viewport","_surface","_tool","_vsm","_settings","_state","Off","_hoverPoint","_currentFeature","_currentFeatureIndex","_firstFeature","_secondFeature","_vertexFeatures","_edgeFeatures","_faceFeatures","_currentMeasurement","_meshAnalyzerMap","Map","_is2D","setCurrentFeatureIndex","index","error","delta","push","pop","splice","_createMeshAnalyzer","nodeRef","meshAnalyzer","indexCount","lineCount","processNode","geometry","isBufferGeometry","pos","getAttribute","idx","getIndex","rg","userData","renderGroup","i","start","count","v0","Vector3","fromArray","array","v1","v2","applyMatrix4","matrixWorld","addTriangle","x","y","z","children","forEach","pass","finishMeshBuilding","_createMeshAnalyzer2D","getCamera","_getViewBox","_getMeshAnalyzer","existing","get","set","show","viewport","tool","getMeasurementSurface","byId","getViewStateManager","getScene","getName","load","SearchingFirstFeature","hide","surface","fi","fc","length","removeFeature","ei","ec","vi","vc","removeMeasurement","vsm","outlinedNodeRef","setOutliningStates","_computeSphereRadius","point","r","sp","_camera","_worldToScreen","p0","_screenToWorld","Math","abs","viewportRect","getDomRef","getBoundingClientRect","halfWidth","width","halfHeight","height","cameraRef","getCameraRef","worldPoint","screenPoint","clone","project","rx","ry","ip","sign","unprojected","unproject","d","distanceTo","_replaceCurrentFeature","feature","featureId","needToUpdate","addFeature","getContext","getFeatureId","setContext","setFeatureId"],"sources":["MeasurementToolGizmo-dbg.js"],"mappings":"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"}