{"version":3,"file":"AnchorPointTool.js","names":["sap","ui","define","THREE","Tool","AnchorPointToolHandler","AnchorPointToolGizmo","AnchorPointToolOperation","AnchorPointTool","extend","metadata","library","properties","enableStepping","type","defaultValue","showEditingUI","allowOperation","All","allowContextMenu","position","quaternion","events","moving","parameters","x","y","z","moved","rotating","rotated","constructor","sId","mSettings","apply","this","arguments","_viewport","_handler","_gizmo","prototype","init","call","setFootprint","gizmo","setAggregation","setProperty","setViewport","viewport","_deactivateScreenAlignment","getGizmo","_initAnchorPoint","setActive","value","activeViewport","gizmoContainer","show","_addLocoHandler","_removeLocoHandler","hide","queueCommand","command","isViewportType","setShowEditingUI","setShouldRenderFrame","setAllowOperation","_updateHandlesVisibility","move","rotate","moveTo","target","useObjectsOrigin","nodeRefs","Array","isArray","pos","Vector3","Matrix4","decompose","Quaternion","count","center","forEach","nodeRef","updateWorldMatrix","add","setFromMatrixPosition","matrixWorld","multiplyScalar","boundingBox","Box3","expandByObject","getCenter","setPosition","alignTo","setQuaternion","alignToWorld","alignToScreen","_activateScreenAlignment","alignToScreenCallback","camera","getCamera","getCameraRef","bind","attachCameraChanged","detachCameraChanged","Error"],"sources":["AnchorPointTool-dbg.js"],"mappings":"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"}