{"version":3,"file":"Scene.js","names":["sap","ui","define","Log","SceneBase","NodeHierarchy","RenderMode","THREE","BufferGeometryUtils","ThreeExtensions","ThreeUtils","uid","Scene","extend","metadata","library","constructor","scene","call","this","_id","_scene","_sceneBuilder","_defaultNodeHierarchy","_currentViewStateManager","_animationSequenceMap","Map","_initialView","_materialMap","_annotationMap","prototype","init","_outlineColor","Vector4","_outlineMaterial","ShaderMaterial","uniforms","color","value","vertexShader","join","fragmentShader","depthWrite","depthFunc","LessEqualDepth","polygonOffset","polygonOffsetFactor","blending","NormalBlending","clipping","_solidWhiteMaterial","MeshBasicMaterial","clearThreeScene","all3DNodes","allGroupNodes","getAllTHREENodes","sceneUD","userData","geometryClusters","concat","currentClusters","clear","instanceDataTexture","currentInstanceIndex","disposedBufferGeometries","disposedMaterials","forEach","n3d","Mesh","has","geometry","uuid","disposeGeometry","set","material","disposeMaterial","originalMaterial","parent","remove","gn","destroy","setDoubleSided","setProperty","traverse","node","undefined","originalMaterialSide","FrontSide","materialUserData","side","DoubleSide","setViewStateManager","getViewStateManager","getId","getDefaultNodeHierarchy","_computeBoundingBox","visibleOnly","ignoreDynamicObjects","ignore2DObjects","boundingBox","Box3","clusters","length","clusterBox","iCluster","lCluster","union","_expandBoundingBox","getSceneRef","setSceneBuilder","sceneBuilder","getSceneBuilder","nodeRefToPersistentId","nodeRefs","Array","isArray","map","nodeRef","_vkPersistentId","persistentIdToNodeRef","pIDs","pID","getNode","setNodePersistentId","sid","sceneId","_addAnnotation","annotationId","annotationInfo","_hasAnnotation","_getAnnotations","_removeAnnotationsForNode","delete","annotation","id","setAnnotationPersistentId","get","enumerateMaterials","topNode","createNodeProxy","distEpsilon","compare","a","b","dx","x","dy","y","z","quickSort","array","beginIndex","endIndex","partitionIndex","partition","pivotValue","i","swap","j","temp","OutlineGeometry","thresholdAngle","_this","BufferGeometry","Object","setPrototypeOf","type","positionAttribute","isBufferGeometry","getAttribute","index","computeBoundingBox","size","Vector3","getSize","Math","max","vertexCount","count","indices","indexCount","ei","fi","vertices","fromArray","itemSize","uniqueVertices","changes","push","newIndices","c","edges","key","v","dir1","dir2","faceNormals","copy","sub","crossVectors","normalize","edge1","edge2","min","index1","index2","face1","face2","thresholdDot","cos","MathUtils","DEG2RAD","positions","normals1","normals2","e","dot","cross","vertex","normal1","normal2","setAttribute","Float32BufferAttribute","create","box3IsNull","box","prepareNodeGeometry","rg","renderGroup","clusterVertices","clusterIndices","getIndex","firstVertex","indexStart","start","Uint16Array","ii","BufferAttribute","subarray","lastVertex","setIndex","clone","l","createMergedGeometry","isMesh","skipIt","nodeGeometry","children","child","childGeometry","updateMatrix","applyMatrix4","matrix","mergeBufferGeometries","setMeshMaterial","newMaterial","defaultMaterial","_vkUpdateMaterialColor","_vkUpdateMaterialOpacity","restoreMeshMaterial","_createOutlineGeometry","renderMode","_vkTraverseMeshNodes","isOutline","visible","hasOutline","mergedGeometry","outlineGeometry","line","LineSegments","renderOrder","matrixWorldNeedsUpdate","add","err","error","name","isLineBasicMaterial","isLineMaterial","LineIllustration","ShadedIllustration","emissive","multiplyScalar","addScalar","bind","_hideOutlineGeometry","getInitialView","setInitialView","view","getMaterial","materialId","setMaterial","clearMaterials","_getNativeMaterial","getMaterialRef","_setNodeMaterial","_setSubmeshMaterial","initialMaterialId","initialMaterial"],"sources":["Scene-dbg.js"],"mappings":"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"}