{"version":3,"file":"ThreeUtils.js","names":["sap","ui","define","THREE","Log","MarchingCubes","ObjectType","ThreeUtilsZeroBuffer","Float32Array","ThreeUtils","createWebGLImageRenderer","imageCanvas","width","height","renderer","WebGLRenderer","canvas","preserveDrawingBuffer","antialias","alpha","setSize","outputColorSpace","LinearSRGBColorSpace","createWebGLRenderer","devicePixelRatio","enableShadowMap","setPixelRatio","shadowMap","enabled","_disposeMaterial","oMaterial","map","dispose","lightMap","bumpMap","normalMap","specularMap","envMap","alphaMap","emissiveMap","aoMap","disposeMaterial","disposeObject","oThreeObject","Mesh","Line","Box3Helper","geometry","material","disposeGeometry","getAllTHREENodes","nodeList","all3DNodes","allGroupNodes","error","forEach","n","push","Light","Camera","Group","children","length","vertex","Vector3","computeBoundingBoxExcludingHotSpotAndPMI","object","box","makeEmpty","updateMatrixWorld","traverse","node","userData","objectType","Hotspot","PMI","i","count","isGeometry","vertices","copy","applyMatrix4","matrixWorld","expandByPoint","isBufferGeometry","attribute","attributes","position","rg","renderGroup","firstVertex","lastVertex","fromBufferAttribute","computeObjectOrientedBoundingBox","parent","matrix","clone","matrixAutoUpdate","identity","computeClusterBoundingBoxes","clusters","data","nativeScene","textureUpdateResults","data8","Uint8Array","buffer","cluster","instances","repeats","j","jCount","instanceIndex","k","offset","t","w","additionals","maxRadiusSq","tm","Matrix4","m","elements","vec","iCount","Box3","sphereCenter","additionalRenderables","renderInstanceCount","instanceIndices","x","y","z","Math","max","distanceToSquared","boundingBox","isEmpty","boundingSphere","getCenter","Sphere","sqrt","initClustersBeforeProcessingHierarchy","processUpdatedDataTexture","dataTexture","updatedFrom","updatedTo","oldVal","textureUpdateParams","min","perTexel","perLine","image","yOffset","floor","lastLine","ceil","xOffset","dataOffset","needsUpdate","prepareTextureUpdateResults","numClusters","previousResults","Uint32Array","newResults","set","updateDataTexels","textureDataArray","len","ofs","clusterIndex","patchNodeVisibilityInDataTexture","zeroBuf","l","removeNodeFromClusterRenderingRecursive","updateNodeClusterRenderingInfo","geometryClusters","scratchBuf","ud","scratch8","initialMaterialId","materialId","highlightingColor","defaultMaterial","transparent","highlightColor","tintColor","ce","emissive","cs","specular","r","g","b","color","rgbb","isMesh","isLine","recursiveDecode","decoded","gx","gy","gz","curLevel","maxLevel","ptrs","dimension","code","shrinkWrap","buf","last","dim2","rerun","buildSquare","config","bb","output","vo","pos","nx","ny","nz","points","normals","undefined","indices","initArrayBoundingBox","bbox","quants","buildShrinkWrapSquares","dimensionX","dimensionY","dimensionZ","dimensionXY","allocMeshData","actualPointCount","actualTriangleCount","desiredPointCount","desiredTriangleCount","limitPointElementCount","useActual","pointCount","elementCount","Uint16Array","uvs","downsampleVoxels","src","dst","dimensions","dx","Infinity","dy","dz","sd","dxy","nxy","buildEmptyMesh","flags","ret","buildTemporaryMesh","triangleCount","innerBoxes","forceSingleCube","limitPointTriangleCount","unlimitedBudget","donePoints","numSquares","decodedBuf","pow","ptrsDecode","numVertices","maxVertices","march","maxSquares","decodedBuf2","use2","attempt","updateClusterAttrib","name","start","newValues","attrib","getAttribute","array","ur","updateRange","updateClusterIndices","vertexStart","indexStart","indexCount","getIndex","dstArray","ii","updateClusterGeometry","descriptor","vertexCount","increaseCurrentInstance","nativeSceneUD","currentInstanceIndex","maxInstanceIndex","partitionCluster","geometries","clusterDefinitions","geometryToClusterMap","geo","current","currentIndex","verts","elems","submesh"],"sources":["ThreeUtils-dbg.js"],"mappings":"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"}