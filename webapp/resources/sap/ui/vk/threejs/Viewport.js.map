{"version":3,"file":"Viewport.js","names":["sap","ui","define","vkCore","ViewportBase","ResizeHandler","KeyCodes","Loco","THREE","ViewStateManager","ViewportGestureHandler","OrthographicCamera","PerspectiveCamera","NodesTransitionHelper","Messages","ManagedObjectObserver","ViewportRenderer","CameraProjectionType","CameraFOVBindingType","VisibilityMode","ZoomTo","SelectionMode","RenderMode","getResourceBundle","cssColorToColor","VkViewStateManager","ThreeJSViewStateManager","ThreeJSViewStateManagerV2","HitTester","Scene","ContentDeliveryService","ThreeUtils","Annotation","MeasurementSurface","NodeContentType","assert","Log","core","findIndexInArray","ColorManagement","enabled","Viewport","extend","metadata","library","events","cameraChanged","parameters","position","quaternion","zoom","enableEventBubbling","frameRenderingFinished","basePrototype","getMetadata","getParent","getClass","prototype","PropertyBinding","GetterByBindingType","buffer","offset","this","targetObject","propertyName","init","call","_measurementSurface","_renderer","_totalGpuAllocated","_totalGpuUpdated","_imageCanvas","_canvas","_registryEntry","_width","_height","_resizeListenerId","_handleResize","bind","_renderLoopRequestId","_renderLoop","_shouldRenderFrame","_shouldProcessHierarchy","_shouldDoTraversalRendering","_clippingPlanes","_hitTester","_scene","_camera","_upAxis","backgroundColorTop","Vector4","backgroundColorBottom","_updateColor","getBackgroundColorTop","getBackgroundColorBottom","_checkBackgroundColor","_backgroundMaterial","ShaderMaterial","uniforms","topColor","value","bottomColor","vertexShader","join","fragmentShader","side","DoubleSide","depthTest","depthWrite","blending","NoBlending","_backgroundCamera","Camera","_backgroundScene","add","Mesh","PlaneGeometry","_underlayGroup","Group","_overlayGroup","_xrayColor1","_xrayColor2","_xrayMaterial","color1","color2","depthFunc","LessDepth","NormalBlending","clipping","transparent","_viewportGestureHandler","_loco","addHandler","_zoomedObject","_cdsLoader","attachCameraChanged","event","setShouldRenderFrame","_sceneObserver","_currentViewIndex","_currentView","getEventBus","subscribe","_onViewStateApplied","attachLocalizationChanged","_onLocalizationChanged","cameraUpdateCompleted","params","fireViewFinished","viewIndex","exit","detachLocalizationChanged","unsubscribe","destroy","removeHandler","deregister","_stopRenderLoop","tools","getTools","i","length","tool","byId","setActive","_setContent","setCamera","_eyePointLight","detachSceneUpdated","_handleCdsSceneUpdate","surface","getMeasurements","update","getCamera","onSetViewStateManager","viewStateManager","_viewStateManager","attachVisibilityChanged","_onVisibilityChanged","attachOpacityChanged","attachTintColorChanged","attachHighlightColorChanged","attachTransformationChanged","attachOutlineColorChanged","attachOutlineWidthChanged","attachOutliningChanged","_onOutliningOrSelectionChanged","attachSelectionChanged","onUnsetViewStateManager","detachOutliningChanged","detachSelectionChanged","detachVisibilityChanged","detachOpacityChanged","detachTintColorChanged","detachHighlightColorChanged","detachTransformationChanged","detachOutlineColorChanged","detachOutlineWidthChanged","_startRenderLoop","window","requestAnimationFrame","cancelAnimationFrame","setBackgroundColorTop","setBackgroundColorBottom","setClippingPlanes","clippingPlanes","onBeforeRendering","onAfterRendering","domRef","getDomRef","append","register","size","width","clientWidth","height","clientHeight","getSafeArea","resize","canvas","webGLCanvas","domElement","devicePixelRatio","Math","floor","style","adjustWebGLRendererSize","measurementSurfaceDomRef","fireResize","setScene","scene","nodeHierarchy","getDefaultNodeHierarchy","detachNodeRemoving","_onNodeRemoving","detachNodeCreated","_onNodeCreated","deregisterRendering","_homeCamera","disconnect","nativeScene","_getNativeScene","observe","properties","_backgroundNode","findBackgroundNode","children","group","private","name","PointLight","attachNodeCreated","attachNodeRemoving","initialView","getInitialView","_getViewStateManagerThreeJS","activateView","_clearAnnotations","getScene","getSceneRef","_getNativeCamera","getCameraRef","clearAll","destroyAnnotations","getAnnotations","forEach","annotation","autoGenerated","removeAnnotation","_annotationsCreated","evt","nodeRef","getParameter","_vkGetNodeContentType","view","getCurrentView","getNodeInfos","push","target","visible","annotationId","userData","treeNode","annotations","_getAnnotations","annotationInfo","node","createAnnotation","addAnnotation","setDisplay","getNodeRef","camera","cam","clone","getRenderer","_implementation","destColor","cssColor","color","Color","red","green","blue","alpha","x","r","y","g","z","b","w","colorTop","_backgroundColor","_handleLoadingFinished","_contentLoadingFinished","_createAnnotations","skipHierarchyProcessing","shouldRenderFrame","setRenderMode","renderMode","setProperty","LineIllustration","ShadedIllustration","SolidOutline","_createOutlineGeometry","_hideOutlineGeometry","hitTest","options","nativeCamera","vsm","applyNodeStates","clientLeft","clientTop","revertNodeStates","_isRedlineActivated","isRedlineActivated","bgNodeNameToProjectionType","sphere","plane","nodes","Background","undefined","bgNode","visibleNodes","hiddenNodes","getBackgroundProjection","_isPanoramicActivated","_isPlanarActivated","tap","isDoubleClick","hit","object","tapObject","fireNodeClicked","getFreezeCamera","hitForDB","zoomObject","picked","fireNodesPicked","exclusiveSelectionHandler","getSelectionMode","Exclusive","Sticky","stickySelectionHandler","offscreenPosition","rotateDelta","panDelta","onkeydown","isMarked","cameraController","keyCode","ARROW_LEFT","ARROW_RIGHT","ARROW_UP","ARROW_DOWN","ctrlKey","altKey","metaKey","delta","_cameraController","beginGesture","shiftKey","pan","rotate","endGesture","preventDefault","stopPropagation","PLUS","NUMPAD_MINUS","NUMPAD_PLUS","$","gizmo","getGizmoForContainer","handleSelectionChanged","setSelectionRect","rect","_selectionRect","x1","y1","x2","y2","posArray","geom","BufferGeometry","setAttribute","Float32BufferAttribute","LineLoop","LineBasicMaterial","linewidth","posAttribute","geometry","getAttribute","array","set","needsUpdate","animateCameraUpdate","getIsModified","setIsModified","_playTransition","_playHighlight","getAutoStartRendering","_setJointNodeMatrix","render","_updateDynamicObjects","renderer","viewport","viewportSize","Vector2","backgroundProjection","root","_vkDynamicObjects","parent","_vkUpdate","_renderDetailViews","boundingBox","eyePointLight","_vkDetailViews","sort","a","renderOrder","detailView","_render","_prepareForRenderingRecursive","geometryClusters","scratchBuf","textureDataArray","textureUpdateResults","force","noClusters","removeNodeFromClusterRenderingRecursive","renderStage","matrixAutoUpdate","matrixWorldNeedsUpdate","matrixWorld","copy","matrix","multiplyMatrices","updateNodeClusterRenderingInfo","l","setChildrenVisibility","child","timerStart","performance","now","setViewport","sceneUD","currentScene","updateMatrix","dataTexture","instanceDataTexture","dataTextureArray","image","data","prepareTextureUpdateResults","instanceScratchBuffer","Float32Array","timerWorldMatrixRecursiveBegin","shouldUpdateSelectionBoxes","initClustersBeforeProcessingHierarchy","iRootChild","lenRootChild","rootChild","timerWorldMatrixRecursiveEnd","matrixWorldAutoUpdate","doTraversalRendering","timerDataTextureBegin","processUpdatedDataTexture","computeClusterBoundingBoxes","timerDataTextureEnd","_updateBoundingBoxes","timerComputeBoundingBoxBegin","timerComputeBoundingBoxEnd","getUsingDefaultClipPlanes","isOrthographicCamera","_computeBoundingBox","_expandBoundingBoxWithSelected","isEmpty","adjustZoom","expandBoundingBox","adjustClipPlanes","autoClear","setClearColor","clear","clearDepth","getRenderMode","XRay","lightNode","_selectedNodes","remove","specularMap","overrideMaterial","timerRenderBegin","timerRenderEnd","renderInfo","info","renderedFrameNumber","frame","rr","calls","tris","triangles","tMatrix","toFixed","tBBox","tRender","tTexture","lines","points","vramAllocated","vramUpdated","getShowSelectionBoundingBoxes","boundingBoxesScene","_boundingBoxesScene","_renderOutline","webGLRenderer","targetCanvas","targetContext","getContext","targetWidth","targetHeight","drawImage","timerFinish","tail","debug","fireFrameRenderingFinished","getImage","includeSelection","min","document","createElementNS","createWebGLImageRenderer","currentBKTop","currentBKBottom","body","appendChild","vpCamera","updateMatrixWorld","selectedNodes","enumerateSelection","setSelectionState","imageData","toDataURL","removeChild","dispose","getMaterialImage","material","margin","MathUtils","clamp","cameraRef","SphereGeometry","Box3","_expandBoundingBox","_vkZoomTo","materials","Array","isArray","results","getObjectImage","getObjectImageEx","includeOverlay","nodeRefs","slice","filter","useViewportCamera","up","setFromMatrixColumn","normalize","getWorldPosition","sub","getWorldDirection","Vector3","multiplyScalar","updateProjectionMatrix","getSize","traverseVisible","Symbol","_vkSetOpacity","includeUnderlay","type","encoderOptions","content","apply","arguments","builders","setFov","euler","upAxis","Euler","degToRad","zoomTo","Quaternion","setFromEuler","loaders","getSceneBuilder","_fireSceneUpdated","attachSceneUpdated","attachLoadingFinished","attachInitialViewCompleted","_fireLoadingFinished","detachLoadingFinished","detachInitialViewCompleted","registerRendering","backgroundTopColor","getStyle","backgroundBottomColor","setScale","channel","eventId","source","_ignoreAnimationPosition","ignoreAnimationPosition","playViewGroup","skipCameraTransitionAnimation","_activateSingleView","viewGroups","getViewGroups","that","viewGroup","getViews","modelView","indexOf","fireViewActivated","publish","getTopColor","getBottomColor","timeInterval","flyToTime","transitionEffect","_fadeOutBackground","_fadeInBackground","timeIntervalCameraChange","pauseWhenNoCameraChange","hasAnimation","activateCamera","timeIntervalForTransition","_startTransition","_readyForAnimationTimer","clearTimeout","setTimeout","fireReadyForAnimation","_startHighlight","max","resetCurrentView","_resetNodesMaterialAndOpacityByCurrentView","_resetNodesStatusByCurrentView","error","what","crossFadeSeconds","All","Visible","Selected","Node","Restore","getText","NodeSetIsolation","RestoreRemoveIsolation","ViewLeft","setFromAxisAngle","PI","ViewRight","ViewTop","ViewBottom","ViewBack","ViewFront","dx","dy","isTurnTableMode","getViewInfo","query","viewInfo","rotation","reorder","yaw","radToDeg","pitch","roll","projectionType","Orthographic","Perspective","bindingType","Vertical","fullWidth","fullHeight","offsetX","offsetY","fieldOfView","fov","zoomFactor","matrices","matrixWorldInverse","elements","projection","projectionMatrix","visibility","visibilityMode","mode","Complete","allVisibility","getVisibilityComplete","hidden","getShouldTrackVisibilityChanges","changes","getVisibilityChanges","warning","VIT32","summary","code","selection","_getSelectionComplete","setViewInfo","flyToDuration","viCamera","newCamera","aspect","setViewOffset","isPerspectiveCamera","veIdToNodeRefMap","Map","getNodeHierarchy","allNodeRefs","findNodesByName","nodeProxy","createNodeProxy","veId","getVeId","destroyNodeProxy","visibleVeIds","hiddenVeIds","setVisibilityState","get","Differences","resetVisibility","getVisibilityState","VIT28","selected","unselected","setSelectionStates","outlined","unoutlined","setOutliningStates","queueCommand","command","getOutputSize","boundingClientRect","getBoundingClientRect","viewportWidth","viewportHeight","relevantDimension","left","top","sideLength","projectToScreen","viewportRect","halfWidth","halfHeight","screenPoint","project","depth","_createAndAddAnnotation","annotationData","annotationControl","nodeInfo","annotationType","annotationNode","nodeRefToPersistentId","delay","getAnimate","getDisplay","getAnimationDelay","setAnimationDelay","setBackgroundNode","currBackgroundNode","backgroundNodes","reduce","nodeInfos","currNode","setView","parametricContent","materialId","sceneId","backgroundNode","createNode","assignMaterialToNodes","cameraView","normalizeRectangle","computedStyle","getComputedStyle","saWidth","parseFloat","saLeft","newX","saHeight","saTop","newY","deNormalizeRectangle","saHalfWidth","saHCenter","abs","newWidth","saHalfHeight","saVCenter","newHeight","registryEntries","registryEntryIndex","registryEntry","createWebGLRenderer","viewports","invalidate","viewportIndex","firstViewport","createElement","splice","lastViewport","renderLists","maxWidth","maxHeight","setSize","getMeasurementSurface"],"sources":["Viewport-dbg.js"],"mappings":"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"}