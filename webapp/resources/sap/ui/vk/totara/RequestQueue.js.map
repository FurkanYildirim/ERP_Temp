{"version":3,"file":"RequestQueue.js","names":["sap","ui","define","TotaraUtils","Command","ResourceQueue","getBatchSize","this","globalList","Set","waitingList","Map","requestedList","prototype","push","id","requestData","has","add","set","setBatchSizeInfo","batchSizeInfo","fetchBatch","batchSize","maxBatchStringLength","Number","MAX_SAFE_INTEGER","separatorLength","batch","batchStringLength","iterator","keys","entry","next","i","done","value","toString","length","delete","pop","isReady","clear","isEmpty","size","isWaiting","isInitialViewCompleted","map","values","isInitial","GeometryResourceQueue","getMaxBatchDataSize","call","priorityMap","sortedList","Object","create","constructor","setData","data","get","assign","Array","from","sort","a","b","priority","maxBatchDataSize","maxBatchSubmeshCount","batchDataSize","batchSubmeshCount","dataSize","submeshCount","RequestQueue","context","sceneId","token","generateToken","loader","meshes","getMeshesBatchSize","bind","materials","getMaterialsBatchSize","textures","geomMeshes","getGeomMeshesBatchSize","getGeomMeshesMaxBatchDataSize","annotations","getAnnotationsBatchSize","parametric","getParametricsBatchSize","views","thumbnails","tracks","getTracksBatchSize","sequences","getSequencesBatchSize","highlights","isWaitingForContent","clearContent","createGetContentCommand","commandName","ids","extraOptions","options","parseInt","createRequestCommand","removeFirstFromMap","generateRequestCommand","command","meshIds","getMesh","getGeomMesh","method","getAnnotation","parameters","annotationIds","Error","getParametric","getMaterial","materialIds","getImage","getSequence","getTrack","getView","viewId","query","configureSceneViewQuery","getHighlightStyle"],"sources":["RequestQueue-dbg.js"],"mappings":"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"}