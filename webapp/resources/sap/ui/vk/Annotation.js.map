{"version":3,"file":"Annotation.js","names":["sap","ui","define","Control","vkCore","AnnotationStyle","NodeUtils","FormattedText","RTE","rteLibrary","AnnotationRenderer","core","Annotation","extend","metadata","library","properties","annotationId","name","nodeRef","text","type","defaultValue","style","Default","display","animate","animationDelay","selected","editable","xCoordinate","yCoordinate","xOffset","yOffset","height","width","associations","viewport","multiple","aggregations","textEditor","constructor","sId","mSettings","apply","this","arguments","_viewport","_topLimit","_leftLimit","prototype","setViewport","vp","setAssociation","byId","getViewport","getSafeArea","getDomRef","safeBox","getBoundingClientRect","viewBox","widthMargin","left","heightMargin","top","rect","normalizeRectangle","_firePositionChanged","annotation","getEventBus","publish","x","getXCoordinate","y","getYCoordinate","_fireSizeChanged","annotationWidth","annotationHeight","getTargetNodes","_targetNodes","getAttachmentNode","_attachmentNode","setAttachmentNode","attNode","rerender","getDisplay","getNodeRef","vsm","getViewStateManager","getVisibilityState","getProperty","setDisplay","visible","setProperty","_reverse","invalidate","getSelected","getSelectionState","setSelected","getEditable","_setMaxZ","setSelectionState","that","onscroll","ev","textDivDom","_textDiv","stopPropagation","scrollTo","scrollLeft","deltaX","scrollTop","deltaY","_localScroll","document","addEventListener","removeEventListener","undefined","_moving","setAnnotationId","newId","oldAnnotationId","getAnnotationId","sourceData","getScene","setAnnotationPersistentId","view","getCurrentView","getNodeInfos","forEach","nodeInfo","_getNodeRefScreenCenter","node","center","centerOfNodes","projectToScreen","getCamera","_getSortIndex","zIndex","aNode","screenPoint","Math","floor","depth","_getOpacity","annotations","getAnnotations","atn","push","length","zIndexes","Array","from","zMax","max","zMin","min","_updateBlocked","targetNode","nodeScreen","hitNode","hitTest","visibility","subNodes","_vkTraverseMeshNodes","indexOf","object","worldPos","getTransformationWorld","translation","hitPos","setName","getName","setText","html","getTextEditor","value","_textWidth","_textHeight","addStyleClass","getAnimate","getStyle","Random","Expand","_setSpanText","setHtmlText","update","textValue","newText","i","setStyle","val","getText","setAnimate","maxZ","map","ant","onclick","evt","_firstClick","setTimeout","tapObject","bind","openEditor","rte","editorType","EditorType","TinyMCE4","getWidth","getHeight","destroy","setTextEditor","closeEditor","getValue","destroyTextEditor","onAfterRendering","_initialOffsetWidth","offsetWidth","_initialOffsetHeight","offsetHeight","getAnimationDelay","domRef","delay","animationName","children","getElementsByTagName","styleObjects","className","j","randomDelay","random","animationDuration","animationTimingFunction","animationIterationCount","animationDirection","animationFillMode","k","setXCoordinate","setYCoordinate","setWidth","setHeight","setEditableState","setEditable","_previousState","annotationRect","scale","setY","deNormalizeRectangle","testHeight","getNativeApi","_resized","rectText","bBox","clientHeight","scrollHeight","round","toString","setX","testWidth","clientWidth","scrollWidth","maxWidth","rightEnd","position","textRect","_resizeEnd","_handleViewportStop","ontouchstart","currentSize","Map","editableAnnotations","getEditableAnnotations","filter","computedStyle","window","getComputedStyle","textWidth","parseInt","slice","textHeight","textMaxWidth","set","gripElements","childNodes","resizer","strategies","sapUiVizKitAnnotationElement0","gripNW","sapUiVizKitAnnotationElement1","gripN","sapUiVizKitAnnotationElement2","gripNE","sapUiVizKitAnnotationElement3","gripE","sapUiVizKitAnnotationElement4","gripSE","sapUiVizKitAnnotationElement5","gripS","sapUiVizKitAnnotationElement6","gripSW","sapUiVizKitAnnotationElement7","gripW","resize","gripHandler","oEvent","event","resizeHandler","targetTouches","target","offsetTop","_offsetTop","offsetLeft","_initialX","clientX","_initialY","clientY","onMouseMove","_viewportGestureHandler","_gesture","_currentX","_currentY","setTranslate","onMouseUp","disX","disY","oTarget","jQuery","currentTarget","control","$","rteIfr","cover","attr","css","opacity","offset","append","onmousemove","deltaWidth","deltaHeight","onmouseup","remove","size","get","_textMaxWidth","ontouchmove","ontouchend","setSize","isVisible","isSelected","annotationNodeElement","annotationLeaderLine","viewportRect","attNodeScreen","normRect","getXOffset","getYOffset","annotationNodeScreen","Explode","Square","posX","posY","leaderOptions","isElbow","toHeight","setLeaderLineSVG","transform","parseFloat","substring","_offsetLeft","to","leaderLineSVG","options","fromRect","toRect","x1","y1","x2","y2","classList","contains","add","svgLeft","svgTop","abs","startX","startY","pathway","leaderLine","getAttribute","setAttribute","getTotalLength","setLeaderLine","line","fT","tT","fL","tL","topSide","leftSide","sqrt","angle","PI","acos","getTransform","annotationNode","updateMatrix","vk","TransformationMatrix","convertTo4x3","matrix","elements","setTransform","updateNodeId","nodeId","userData","setNodePersistentId","setInitialOffset","values","next","nomPos","targetNodePos","initialX","initialY","fitToText","maxHeight","div","createElement","innerHTML","body","appendChild","removeChild","getStyles","styles","darkThemeSrc","lightThemeSrc","createAnnotation","divAnnotation","escapeCharacters","replaceAll","id","attachment","targetNodes","_getBackgroundColor","color","label","colour","colorArray"],"sources":["Annotation-dbg.js"],"mappings":"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"}