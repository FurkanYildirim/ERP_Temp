{"version":3,"file":"Viewport.js","names":["sap","ui","define","vkCore","ViewportBase","ResizeHandler","KeyCodes","Loco","ViewStateManagerVK","ViewStateManagerSVG","ViewportHandler","VisibilityMode","ZoomTo","SelectionMode","NodeContentType","getResourceBundle","Messages","Scene","OrthographicCamera","MeasurementSurface","Rectangle","HotspotHelper","colorToCSSColor","cssColorToColor","colorToABGR","abgrToColor","Log","core","Viewport","extend","metadata","library","events","cameraChanged","parameters","offset","zoom","enableEventBubbling","hotspotEnter","nodeRef","hotspotLeave","basePrototype","getMetadata","getParent","getClass","prototype","init","call","this","_measurementSurface","_resizeListenerId","_animLoopRequestId","_animLoopFunction","_animLoop","bind","_width","_height","_camera","_gestureX","_gestureY","_scene","_selectionRect","material","lineColor","lineStyle","dashPattern","_styles","Map","raster","rasterImage","document","createElement","vectorImage","Image","bmpCanvas","rasterMode","useRasterMode","delayEnd","endRasterModeTimer","updateImageTimer","bmpDrawRequestId","nodesThreshold","onload","viewBox","updateImageSize","width","height","ctx","getContext","clearRect","drawImage","_requestBmpDraw","_viewportHandler","_loco","addHandler","_hotspotHelper","_currentViewIndex","_currentView","getEventBus","subscribe","_onViewStateApplied","attachLocalizationChanged","_onLocalizationChanged","exit","detachLocalizationChanged","unsubscribe","destroy","removeHandler","deregister","setScene","_renderer","tools","getTools","i","length","tool","byId","setActive","event","surface","getMeasurements","update","getCamera","onBeforeRendering","onAfterRendering","register","_handleResize","domRef","getDomRef","append","root","getRootElement","_setDomRef","getElementById","uid","_svgElement","parentNode","size","clientWidth","clientHeight","oldWidth","oldHeight","_initialZoom","_initialPosition","zoomTo","All","_updateViewBox","fireCameraChanged","_getViewBox","measurementSurfaceDomRef","style","fireResize","previousSibling","_invalidateRasterImage","scene","getDefaultNodeHierarchy","detachNodeCreated","_nodeCreatedHandler","clear","setCamera","nh","findNodesByName","attachNodeCreated","initialView","getInitialView","activateView","_onContentLoadingFinished","camera","createdNode","getParameter","_vkGetNodeContentType","Annotation","children","type","invalidate","getScene","onSetViewStateManager","viewStateManager","_viewStateManager","attachOutliningChanged","_onOutliningOrSelectionChanged","attachSelectionChanged","onUnsetViewStateManager","detachOutliningChanged","detachSelectionChanged","_getViewStateManagerSVG","_implementation","hitTest","x","y","withTolerance","exactHitObject","ignoreHotspots","vsm","rootElement","viewportRect","getBoundingClientRect","htmlElement","htmlElements","elementsFromPoint","hit","id","elem","_getSceneTreeElement","Hotspot","elementFromPoint","toleranceX","toleranceY","y2","x2","tap","isDoubleClick","focus","node","tapObject","fireNodeClicked","getFreezeCamera","zoomedObject","Node","Visible","picked","fireNodesPicked","getSelectionMode","Exclusive","exclusiveSelectionHandler","Sticky","stickySelectionHandler","offscreenPosition","rotateDelta","panDelta","onkeydown","isMarked","keyCode","ARROW_LEFT","ARROW_RIGHT","ARROW_UP","ARROW_DOWN","ctrlKey","altKey","metaKey","delta","beginGesture","shiftKey","pan","rotate","endGesture","preventDefault","stopPropagation","PLUS","NUMPAD_MINUS","NUMPAD_PLUS","D","_dumpSceneData","gizmo","getGizmoForContainer","handleSelectionChanged","setSelectionRect","rect","removeAttribute","_transformRect","setAttribute","x1","y1","_select","selection","Set","_findRectElementsRecursive","_mask","Array","from","getImage","topColor","bottomColor","includeSelection","_setContent","content","apply","arguments","setScale","onSetContentConnector","contentConnector","attachContentLoadingFinished","onUnsetContentConnector","detachContentLoadingFinished","nodeHierarchy","vsmMask","color","getShowAllHotspots","getShowAllHotspotsTintColor","hotspotNodes","getHotspotNodeIds","forEach","hotspotNode","updateHotspot","undefined","setHotspotColor","getDisableHotspotHovering","addClass","getZoomFactor","getPosition","lerp","a","b","f","smootherStep","edge0","edge1","Math","min","max","anim","_anim","start","end","timeNow","Date","now","time","duration","oldOffsetX","offsetX","oldOffsetY","offsetY","oldZoom","_redlineHandler","window","requestAnimationFrame","_endRasterMode","getCurrentView","channel","eventId","source","view","viewGroups","getViewGroups","that","viewGroup","getViews","modelView","indexOf","fireViewActivated","viewIndex","publish","getTopColor","isArray","setBackgroundColorTop","red","floor","green","blue","alpha","getBottomColor","setBackgroundColorBottom","ignoreAnimationPosition","rerender","fireViewFinished","resetCurrentView","_resetNodesStatusByCurrentView","what","crossFadeSeconds","margin","boundingBox","Infinity","_expandBoundingBoxRecursive","Selected","enumerateSelection","Restore","error","getText","NodeSetIsolation","RestoreRemoveIsolation","ViewLeft","ViewRight","ViewTop","ViewBottom","ViewBack","ViewFront","newCamera","_zoomTo","_activateCamera","flyToDuration","_startRasterMode","image","devicePixelRatio","clearTimeout","setTimeout","_updateRasterImage","sizeExtension","round","scaleX","scaleY","viewBoxExtended","join","svgContent","XMLSerializer","serializeToString","data","encodeURIComponent","src","display","clearRasterMode","dx","dy","z","_MIN_ZOOM","hover","activeHotspotChanged","_hotspotElement","fireHotspotLeave","getHotspotColorABGR","fireHotspotEnter","_bmpDraw","resetTransform","imageViewBox","oldPos","_worldToScreen","newPos","translate","scale","imageSmoothingEnabled","imageSmoothingQuality","getViewInfo","query","viewInfo","visibility","visibilityMode","mode","Complete","allVisibility","getVisibilityComplete","visible","hidden","getShouldTrackVisibilityChanges","changes","getVisibilityChanges","warning","VIT32","summary","code","_getSelectionComplete","setViewInfo","_setViewBox","veIdToNodeRefMap","getNodeHierarchy","allNodeRefs","nodeProxy","createNodeProxy","veId","getVeId","destroyNodeProxy","set","visibleVeIds","hiddenVeIds","setVisibilityState","get","Differences","resetVisibility","getVisibilityState","VIT28","info","selected","unselected","push","setSelectionStates","queueCommand","command","getOutputSize","boundingClientRect","viewportWidth","viewportHeight","relevantDimension","left","top","sideLength","setShouldRenderFrame","_isPanoramicActivated","setShowAllHotspots","value","setProperty","nodes","hotspotElement","setDisableHotspotHovering","removeClass","setHotspotColorABGR","showHotspots","nodeRefs","show","hotspotColor","setCustomHotspotColor","_getFillStyleId","element","highlightColor","tintColor","fillStyle","veid","fill","has","attributes","_setFillStyleAttributes","name","_getLineStyleId","materialId","_setLineStyleAttributes","getMeasurementSurface","getShowAllHotspotsTintColorDef","rgbaToCSS","r","g","hex","toString","padStart","level","getLevel","setLevel","Level","INFO","count","treeDepth","leafNodes","emptyLeafNodes","e","getElementsByTagName","n","parent","t","tagName","projectToScreen","screenPos"],"sources":["Viewport-dbg.js"],"mappings":"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"}