/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/ovp/cards/generic/base/table/BaseTable.controller","sap/ovp/filter/FilterUtils","sap/ui/core/Core","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/Filterhelper"],function(t,e,i,r,a){"use strict";return t.extend("sap.ovp.cards.v4.table.Table",{onInit:function(){t.prototype.onInit.apply(this,arguments);var r=this;this.eventhandler=function(t,i,a){e.applyFiltersToV4Card(a,r)};this.GloabalEventBus=i.getEventBus();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",r.eventhandler)}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!r.checkIfAPIIsUsed(this)){var e=this.getCardPropertiesModel();var i=this.getOwnerComponent().getModel("ui").getData().cards;var n=[];var s=this.getEntitySet()&&this.getEntitySet()["$Type"];var l=s&&this.getMetaModel().getContext("/"+s);if(l){var o=l.getObject();this.selectionVaraintFilter=a.getSelectionVariantFilters(i,e,this.getEntityType())}var p=this.oCardComponentData.mainComponent;if(p.getGlobalFilter()){n=a._getEntityRelevantFilters(o,p.oGlobalFilter.getFilters())}if(p.getMacroFilterBar()){var g=p.aFilters;n=a._getEntityRelevantFilters(o,g)}n=a.mergeFilters(n,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(n)}if(this.getKPIBinding()){this.getKPIBinding().filter(n)}}}})});
//# sourceMappingURL=Table.controller.js.map