/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/ovp/cards/generic/base/list/BaseList.controller","sap/ovp/filter/FilterUtils","sap/ui/core/Core","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/Filterhelper"],function(t,e,i,n,r){"use strict";return t.extend("sap.ovp.cards.v4.list.List",{onInit:function(){t.prototype.onInit.apply(this,arguments);var n=this;this.eventhandler=function(t,i,r){e.applyFiltersToV4Card(r,n)};this.GloabalEventBus=i.getEventBus();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",n.eventhandler)}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!n.checkIfAPIIsUsed(this)){var e=this.getCardPropertiesModel();var i=this.getOwnerComponent().getModel("ui").getData().cards;var a=[];var s=this.getEntitySet()&&this.getEntitySet()["$Type"];var o=s&&this.getMetaModel().getContext("/"+s);if(o){var l=o.getObject();this.selectionVaraintFilter=r.getSelectionVariantFilters(i,e,this.getEntityType())}var p=this.oCardComponentData.mainComponent;if(p.getGlobalFilter()){a=r._getEntityRelevantFilters(l,p.oGlobalFilter.getFilters())}if(p.getMacroFilterBar()){var g=p.aFilters;a=r._getEntityRelevantFilters(l,g)}a=r.mergeFilters(a,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(a)}if(this.getKPIBinding()){this.getKPIBinding().filter(a)}}},onExit:function(){t.prototype.onExit.apply(this,arguments)}})});
//# sourceMappingURL=List.controller.js.map