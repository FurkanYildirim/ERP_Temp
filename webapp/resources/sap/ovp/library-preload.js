//@ui5-bundle sap/ovp/library-preload.js
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/Component", ["sap/fe/core/AppComponent","sap/base/util/ObjectPath","sap/ui/model/json/JSONModel","sap/ovp/ui/DashboardLayoutUtil","sap/ui/core/mvc/ViewType","sap/ui/model/resource/ResourceModel","sap/ovp/app/resources","sap/ui/core/CustomData","sap/base/util/merge","sap/base/util/isEmptyObject","sap/ovp/app/OVPLogger","sap/ui/Device","sap/ovp/cards/CommonUtils","sap/ovp/placeholder/placeholderHelper","sap/m/App","sap/m/DynamicDateUtil","sap/ovp/cards/MetadataAnalyser","sap/ovp/cards/charts/VizAnnotationManager","sap/ui/core/mvc/XMLView","sap/ui/core/Core","sap/insights/CardHelper","sap/ui/VersionInfo","sap/suite/ui/commons/collaboration/CollaborationHelper","sap/ui/rta/RuntimeAuthoring"],function(e,t,i,r,n,a,o,s,l,u,p,g,f,c,d,h,v,y,m,b,C,P,E,S){"use strict";var T=new p("OVP.app.Component");return e.extend("sap.ovp.app.Component",{metadata:{manifest:"json",routing:{config:{routerClass:"sap.m.routing.Router"},targets:{},routes:[]},properties:{cardContainerFragment:{type:"string",defaultValue:"sap.ovp.app.CardContainer"},dashboardLayoutUtil:{type:"sap.ovp.ui.DashboardLayoutUtil"},designtimePath:{type:"string",defaultValue:"sap/ovp/ui/OVPWrapper.designtime"}},designtime:{actions:{},tool:{start:function(e){var t=e.getModel("ui");if(t){t.setProperty("/bRTAActive",true)}},stop:function(e){var t=e.getModel("ui");if(t){t.setProperty("/bRTAActive",false)}}},aggregations:{rootControl:{actions:{},propagateMetadata:function(){return{}}}}},version:"1.115.0",library:"sap.ovp.app",dependencies:{libs:["sap.ovp"],components:[]},config:{fullWidth:true,hideLightBackground:true}},onServicesStarted:function(){},getRoutingService:function(){return{beforeExit:function(){}}},_getOvpCardOriginalConfig:function(e){var t=this.getOvpConfig();return t.cards[e]},suspend:function(){},restore:function(){var e=this.ovpConfig.cards,t=this.createId("mainView"),i=this.byId(t);var r=this.ovpConfig.refreshStrategyOnAppRestore&&this.ovpConfig.refreshStrategyOnAppRestore.entitySets;if(typeof r==="object"){var n=Object.keys(r);var a=e.filter(function(e){return n.includes(e.settings.entitySet)});for(var o=0;o<a.length;o++){var s=a[o];var l=i.createId(s.id);var u=this.byId(l);var p=u.getComponentInstance()&&u.getComponentInstance().getRootControl()&&u.getComponentInstance().getRootControl().getController();if(p){p.refreshCardContent()}}}y.formatChartAxes()},getOvpConfig:function(){var e;var t=[];var i=this.getMetadata();while(i&&i.getComponentName()!=="sap.ovp.app"){e=i.getManifestEntry("sap.ovp");if(e){t.unshift(e)}i=i.getParent()}t.unshift({});t.unshift(true);e=l.apply(l,t);return e},_removeExtraArrayElements:function(e,t){var i=e["staticContent"],r=t["staticContent"],n=e["tabs"],a=t["tabs"];if(i&&r){if(i.length>r.length){e["staticContent"].splice(r.length,i.length-r.length)}}if(n&&a){if(n.length>a.length){e["tabs"].splice(a.length,n.length-a.length)}}},_emptyAllArrayElements:function(e,t){var i=e["staticContent"],r=t["staticContent"],n=e["tabs"],a=t["tabs"];if(i&&r){for(var o=0;o<i.length;o++){e["staticContent"][o]={}}}if(n&&a){for(var o=0;o<n.length;o++){e["tabs"][o]={}}}},_mergeObjects:function(e,t){for(var i in t){if(t.hasOwnProperty(i)){var r=t[i];if(typeof r=="object"&&e[i]){if(r.operation==="DELETE"){delete e[i]}else{this._mergeObjects(e[i],r)}}else{if(typeof r=="object"&&!e[i]&&r.operation==="DELETE"){continue}e[i]=r}}}return e},_mergeLayerObject:function(e,t){if(!e[t+".settings"]){return e}var i=l({},e["settings"]),r=l({},e[t+".settings"]);this._removeExtraArrayElements(i,r);this._emptyAllArrayElements(i,r);e["settings"]=this._mergeObjects(i,r);return e},_mergeKeyUserChanges:function(e){if(!e.hasOwnProperty("customer.settings")&&!e.hasOwnProperty("customer_base.settings")&&!e.hasOwnProperty("vendor.settings")){return e}e=this._mergeLayerObject(e,"vendor");e=this._mergeLayerObject(e,"customer_base");e=this._mergeLayerObject(e,"customer");return e},_getFullyQualifiedNameForEntity:function(e,t){var i="",r;if(!e){return""}if(e.indexOf(".")>-1){return e}var n=t.getMetaModel();if(f.isODataV4(t)){var a=n.getObject("/");var o=a[e];i=o.$Type;return i}else{var s=n&&n.getODataEntityContainer();i=s&&s.namespace;if(i&&!(e.indexOf(i)>-1)){r=i+"."+e}else{r=e}return r}},_getDatePropertiesFromEntitySet:function(e,t,i){var r=[],n=[];var a=e.getMetaModel();var o=a&&a.getODataEntityContainer();var s=o.entitySet.filter(function(e){return e.entityType===i});var l=s.length>0?s[0]:{};var p=v.checkAnalyticalParameterisedEntitySet(e,l.name);if(p){var g=v.getParametersByEntitySet(e,l.name);if(g.entitySetName){r=v.getPropertyOfEntitySet(e,g.entitySetName);r.forEach(function(e){e._filterRestriction="single-value"})}}r=r.concat(t.property);for(var c in r){var d={};if(f.isDate(r[c])){d.PropertyPath=r[c].name}if(!u(d)){n.push(d)}}return n},_getAllControlConfiguration:function(e,t,i){for(var r=0;r<e.length;r++){if(i[e[r].PropertyPath]){var n=false;for(var a=0;a<t.length;a++){if(t[a].PropertyPath===e[r].PropertyPath){n=true}}if(!n){e[r].bNotPartOfSelectionField=true;t.push(e[r])}}}return t},_getSettingsForDateProperties:function(e,t){var i={};for(var r in e){if(t.fields&&t.fields[e[r].PropertyPath]){i[e[r].PropertyPath]=this.getConditionTypeForDateSetting(t.fields[e[r].PropertyPath])}else{if(t.customDateRangeImplementation||t.filter||t.selectedValues){i[e[r].PropertyPath]=this.getConditionTypeForDateSetting(t)}}}return i},getConditionTypeForDateSetting:function(e){if(e.customDateRangeImplementation){return{customDateRangeImplementation:e.customDateRangeImplementation}}else if(e.filter){return{filter:e.filter}}else if(e.selectedValues){return{selectedValues:e.selectedValues,exclude:e.exclude!==undefined?e.exclude:true}}else if(e.defaultValue){return{defaultValue:e.defaultValue}}return undefined},createXMLView:function(e){if(this.getRouter()){this.getRouter().initialize()}var a=this.getMetadata().getManifestEntry("sap.app");var o=this.getMetadata().getManifestEntry("sap.ui");var p=t.get("icons.icon",o);var c=this.getModel(e.globalFilterModel);var d=c&&c.getMetaModel();this.setModel(c);var v=this.getMetadata().getComponentName();var y=v.replace(/\./g,"/");e.baseUrl=sap.ui.require.toUrl(y);e.useMacroFilterBar=c?f.isODataV4(c):false;if(e.smartVariantRequired===undefined||e.smartVariantRequired===null){e.smartVariantRequired=true}if(e.enableLiveFilter===undefined||e.enableLiveFilter===null){e.enableLiveFilter=true}if(e.showDateInRelativeFormat===undefined||e.showDateInRelativeFormat===null){e.showDateInRelativeFormat=true}if(e.filterSettings&&e.filterSettings.dateSettings&&e.filterSettings.dateSettings.useDateRange!==undefined&&e.useDateRangeType!==undefined){throw new Error("Defining both useDateRange and useDateRangeType in the manifest is not allowed")}e.useDateRangeType=e.filterSettings&&e.filterSettings.dateSettings&&e.filterSettings.dateSettings.useDateRange!==undefined?e.filterSettings.dateSettings.useDateRange:e.useDateRangeType;if(e.useDateRangeType===undefined||e.useDateRangeType===null){e.useDateRangeType=false}if(e.bHeaderExpanded===undefined||e.bHeaderExpanded===null){e.bHeaderExpanded=g.system.desktop?true:false}if(e.chartSettings===undefined||e.chartSettings===null){e.chartSettings={}}if(e.chartSettings.showDataLabel===undefined||e.chartSettings.showDataLabel===null){e.chartSettings.showDataLabel=false}if(e.globalFilterEntitySet&&e.globalFilterEntitySet!==" "){var b=d&&d.getODataEntitySet(e.globalFilterEntitySet);e.globalFilterEntityType=b&&b.entityType}var C=e.globalFilterEntityType;if(e.globalFilterEntityType&&e.globalFilterEntityType!==" "&&e.globalFilterEntityType.length>0){e.globalFilterEntityType=this._getFullyQualifiedNameForEntity(e.globalFilterEntityType,c);e.globalFilterEntityTypeNQ=e.globalFilterEntityType.split(".").pop()}var P=new i(e);var E=S.willRTAStartAfterReload();P.setProperty("/bRTAActive",E);P.setProperty("/applicationId",t.get("id",a));P.setProperty("/title",t.get("title",a));P.setProperty("/description",t.get("description",a));if(e.globalFilterEntityType){var T,O;if(f.isODataV4(c)){T=d.getObject("/"+e.globalFilterEntityType+"@com.sap.vocabularies.UI.v1.SelectionFields");O=d.getObject("/"+e.globalFilterEntityType);P.setProperty("/mainEntityVersion","ODataV4")}else{O=d.getODataEntityType(e.globalFilterEntityType);T=l([],O["com.sap.vocabularies.UI.v1.SelectionFields"]);P.setProperty("/mainEntityVersion","ODataV2");if(e.filterSettings&&e.filterSettings.dateSettings){var F=this._getDatePropertiesFromEntitySet(c,O,e.globalFilterEntityType);var D=this._getSettingsForDateProperties(F,e.filterSettings.dateSettings);if(P.getProperty("/useDateRangeType")&&D&&!u(D)){P.setProperty("/useDateRangeType",false);F.forEach(function(e){if(!D.hasOwnProperty(e["PropertyPath"])||!D[e["PropertyPath"]]){var t=e["PropertyPath"];D[t]={selectedValues:h.getAllOptionKeys().toString(),exclude:false}}})}T=this._getAllControlConfiguration(F,T,D);P.setProperty("/datePropertiesSettings",D)}}P.setProperty("/allControlConfiguration",T);P.setProperty("/mainEntityType",O)}if(p){if(p.indexOf("sap-icon")<0&&p.charAt(0)!=="/"){p=e.baseUrl+"/"+p}P.setProperty("/icon",p)}var _=e.cards;var R=[];var A;for(var M in _){if(_.hasOwnProperty(M)&&_[M]){A=this._mergeKeyUserChanges(_[M]);A.id=M;R.push(A)}}R.sort(function(e,t){if(e.id<t.id){return-1}else if(e.id>t.id){return 1}else{return 0}});P.setProperty("/cards",R);if(this.inResizableTestMode()===true){e.containerLayout="resizable"}if(e.containerLayout&&e.containerLayout==="resizable"){P.setProperty("/cardContainerFragment","sap.ovp.app.DashboardCardContainer");P.setProperty("/dashboardLayout",e.resizableLayout);var w=new r(P);this.setDashboardLayoutUtil(w)}else{P.setProperty("/cardContainerFragment",this.getCardContainerFragment())}this.setModel(P,"ui");var V=this._getOvpLibResourceBundle();this.setModel(V,"ovplibResourceBundle");var O;if(f.isODataV4(c)){O="/"+e.globalFilterEntityType}else{O=d&&d.getODataEntityType(e.globalFilterEntityType,true)}var I=this.createId("mainView");var L=new i({});var x=new m(I,{height:"100%",preprocessors:{xml:{bindingContexts:{ui:P.createBindingContext("/"),meta:d.createBindingContext(O),contextPath:d.createBindingContext("/"+C),entitySet:C,converterContext:L.createBindingContext("/")},models:{ui:P,meta:d,contextPath:d,metaModel:d,converterContext:L}}},type:n.XML,viewName:"sap.ovp.app.Main",async:true,customData:[new s({key:"sap-ui-custom-settings",value:{"sap.ui.dt":{designtime:"sap/ovp/ui/OVPWrapper.designtime"}}})]});x.bindElement({path:"/",model:"internal"});return x},_showErrorPage:function(){var e=new m({height:"100%",type:n.XML,viewName:"sap.ovp.app.Error"});var t=this._getOvpLibResourceBundle();e.setModel(t,"ovplibResourceBundle");this.setAggregation("rootControl",e);if(this.oContainer){this.oContainer.invalidate()}},_formParamString:function(e){var t=Object.keys(e);var i;var r="?";for(i=0;i<t.length;i++){r=r+t[i]+"="+e[t[i]]+"&"}return r.slice(0,-1)},_checkForAuthorizationForCards:function(e){var t=b.getConfiguration();var i=t&&t.getDesignMode();if(i){return Promise.resolve(e)}var r=[];var n=[];for(var a in e.cards){var o=e.cards[a];if(o&&o.settings&&o.settings.requireAppAuthorization){n.push(a);r.push({target:{shellHash:o.settings.requireAppAuthorization}})}}if(r.length>0&&sap.ushell&&sap.ushell.Container){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){return e.isNavigationSupported(r)}).then(function(t){var i=n.filter(function(e,i){if(!t[i].supported){return e}});for(var r=0;r<i.length;r++){for(var a in e.cards){if(i[r]===a){delete e.cards[a];break}}}return Promise.resolve(e)}).catch(function(e){T.error(e);return Promise.reject(e)})}else{return Promise.resolve(e)}},_checkForAuthorizationForLineItems:function(){return new Promise(function(e,t){var i=[],r=[];var n=this.getOvpConfig();var a=n["cards"];for(var o in a){if(a.hasOwnProperty(o)&&a[o]){var s=a[o];var l=s.settings;if((s.template==="sap.ovp.cards.linklist"||s.template==="sap.ovp.cards.v4.linklist")&&l.listFlavor==="standard"&&l.staticContent){var u=l.staticContent;for(var p=0;p<u.length;p++){if(u[p].semanticObject||u[p].action){var g="#"+u[p].semanticObject+"-"+u[p].action;if(u[p].params){var f=this._formParamString(u[p].params);g=g+f}if(r.indexOf(o)===-1){r.push(o)}if(i.indexOf(g)===-1){i.push(g)}}}}}}this._oCardsWithStaticContent=r;if(sap.ushell&&sap.ushell.Container){sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(i).done(function(t){var i=this.getOvpConfig();for(var r in t){if(t.hasOwnProperty(r)&&t[r].supported===false){for(var n=0;n<this._oCardsWithStaticContent.length;n++){var a=i["cards"][this._oCardsWithStaticContent[n]].settings.staticContent;for(var o=a.length-1;o>=0;o--){var s="#"+a[o].semanticObject+"-"+a[o].action;if(a[o].params){var l=this._formParamString(a[o].params);s=s+l}if(r===s){a.splice(o,1)}}i["cards"][this._oCardsWithStaticContent[n]].settings.staticContent=a}}}delete this._oCardsWithStaticContent;e(i)}.bind(this)).fail(function(e){T.error(e);t(e)})}else{e(n)}}.bind(this))},createContent:function(){if(E&&E.processAndExpandHash&&typeof E.processAndExpandHash==="function"){E.processAndExpandHash().catch(function(e){T.error(e)}).finally(function(){this._createContent()}.bind(this))}else{this._createContent()}},_createContent:function(){var e=this.getOvpConfig();var t=this.getModel(e.globalFilterModel);var i=[this._checkForAuthorizationForLineItems(e),o.pResourcePromise,this._isInsightRTEnabled(),P.load({library:"sap.ui.core"}),this._isTeamsModeActive()];if(f.isODataV4(t)){i.unshift(t&&t.getMetaModel().requestObject("/"+e.globalFilterModel))}else{i.unshift(t&&t.getMetaModel().loaded())}if(t&&!this.getAggregation("rootControl")){Promise.all(i).then(function(e){var t=e[3];this.ovpConfig=e[1];this.ovpConfig.sapUICoreVersionInfo=e[4];this.ovpConfig.isTeamsModeActive=e[5];this.ovpConfig.enableV4Insight=this._isInsightEnabledForV4Cards();if(this._isInsightDTEnabled()){this.ovpConfig.bInsightDTEnabled=true;return Promise.resolve(this.ovpConfig)}else{if(t){this.ovpConfig.bInsightRTEnabled=true}return this._checkForAuthorizationForCards(this.ovpConfig)}}.bind(this)).then(function(e){this.oOvpConfig=e;this.runAsOwner(function(){var e=this.createId("host"),t=new d(e),i=this.createXMLView(this.oOvpConfig);i.loaded().then(function(){if(c.isPlaceHolderEnabled()){t.addPage(i);this.setAggregation("rootControl",t);c.showPlaceholder(t)}else{this.setAggregation("rootControl",i)}this.oContainer.invalidate()}.bind(this))}.bind(this))}.bind(this));if(!f.isODataV4(t)){t.attachMetadataFailed(function(){this._showErrorPage()}.bind(this))}}},_getOvpLibResourceBundle:function(){if(!this.ovplibResourceBundle){var e=b.getLibraryResourceBundle("sap.ovp");this.ovplibResourceBundle=e?new a({bundleUrl:e.oUrlInfo.url,bundle:e}):null}return this.ovplibResourceBundle},createMapForEntityContainer:function(e){var t={};var i=e.entitySet;for(var r=0;r<i.length;r++){t[i[r].name]=i[r].entityType}return t},inResizableTestMode:function(){return this._getQueryParamUpToTop("resizableTest")=="true"},_isInsightEnabledForV4Cards:function(){return this._getQueryParamUpToTop("enable-v4-insight")==="true"},_isInsightDTEnabled:function(){return this._getQueryParamUpToTop("mode")==="myInsight"||this._getQueryParamUpToTop("mode")==="DT"},_isInsightRTEnabled:function(){var e=this._getQueryParamUpToTop("mode")==="RT";return new Promise(function(t,i){if(!C||!C.getServiceAsync){t(e);return}return C.getServiceAsync().then(function(i){t(!!i||e)}).catch(function(i){T.info("Failed to get CardHelperServiceInstance."+i);t(e)})})},_isTeamsModeActive:function(){var e=false;return new Promise(function(t,i){if(E&&E.isTeamsModeActive&&typeof E.isTeamsModeActive==="function"){return E.isTeamsModeActive().then(function(t){e=t}).catch(function(e){T.error("Failed to get Collaboration Helper."+e)}).finally(function(){t(e)})}else{t(e)}})},_getQueryParamUpToTop:function(e){var t=window;var i=this.getQueryParam(t.location.search,e);if(i!=null){return i}if(t==t.parent){return null}t=t.parent;return null},getQueryParam:function(e,t){var i=null;if(!e){return i}if(e.indexOf("?")!=-1){e=e.substring(e.indexOf("?"))}if(e.length>1&&e.indexOf(t)!=-1){e=e.substring(1);var r=e.split("&");for(var n=0;n<r.length;n++){var a=r[n].split("=");if(a[0]==t){i=a[1];break}}}return i}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/FilterHelper", ["sap/ui/model/Filter"],function(t){"use strict";function n(t,n,r,a){var i=[];if(n.length>0&&t){var o=t.entityType;var f=e(t.property,n[0],t.name,o,r,a);if(f){i.push(f)}}return i}function e(n,a,i,o,f,p){if(!a._bMultiFilter){a.sPath=a.sPath.split("/").pop();var s=r(n,a.sPath,i,o,f,p);if(s){a.sPath=s;return a}}else{var u=a.aFilters;var m,v=[];if(u){for(var c=0;c<u.length;c++){m=e(n,u[c],i,o,f,p);if(m){v.push(m)}}if(v.length>0){return new t(v,a.bAnd)}}}}function r(t,n,e,r,a,i){var o,f;for(o=0;o<t.length;o++){if(t[o].name===n){f=t[o].name;return f}if("P_"+t[o].name===n||t[o].name==="P_"+n){f=t[o].name;return f}}if(!e||!r||!a||!i){return}var p=a&&a.oMetadata&&a.oMetadata._getEntityTypeByName(e);var s=i.oMetadata._getEntityTypeByName(r);if(!p||!s){return}var u="com.sap.vocabularies.Common.v1.SemanticObject";var m="com.sap.vocabularies.Common.v1.SemanticObjectMapping";var v=a.oAnnotations.getAnnotationsData();if(!v||!v.propertyAnnotations){return}var c=v.propertyAnnotations[p.namespace+"."+p.name];var l=i.oAnnotations.getAnnotationsData();if(!l||!l.propertyAnnotations){return}var y=l.propertyAnnotations[s.namespace+"."+s.name];var g=y&&y[n];if(!g||!g[u]){return}var h,P,A,b,d;for(h in c){P=c[h];if(P[u]&&P[u].String===g[u].String){A=P[m];if(!A){continue}b=A.length;d="";while(b--){if(A[b].SemanticObjectProperty.String===n){d=A[b].LocalProperty.PropertyPath;break}}if(d!==""){for(o=0;o<t.length;o++){if(t[o].name===d){f=t[o].name;return f}}}}}return f}function a(t,n){return t}return{getEntityRelevantFilters:n,mergeFilters:a}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/Main.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/odata/ODataUtils","sap/ovp/cards/generic/Component","sap/ovp/cards/v4/generic/Component","sap/ui/generic/app/navigation/service/NavigationHandler","sap/ovp/cards/CommonUtils","sap/ovp/cards/PersonalizationUtils","sap/ui/model/Filter","sap/fe/navigation/SelectionVariant","sap/ui/comp/state/UIState","sap/ui/Device","sap/ovp/ui/SmartphoneHeaderToggle","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/ODataMetadata","sap/ui/model/analytics/odata4analytics","sap/ovp/support/lib/CommonMethods","sap/ovp/app/resources","sap/ovp/app/TemplateBaseExtension","sap/ui/core/mvc/ControllerExtension","sap/ovp/app/OVPUtils","sap/ovp/app/ShareUtils","sap/base/security/encodeURL","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ui/fl/apply/api/FlexRuntimeInfoAPI","sap/ui/core/CustomData","sap/ovp/app/OVPLogger","sap/base/util/isEmptyObject","sap/ovp/cards/semanticDateRangeTypeHelper","sap/ovp/placeholder/placeholderHelper","sap/ui/core/Component","sap/ui/base/Event","sap/ui/core/Core","sap/ovp/app/ManageCardsUtils"],function(t,e,a,i,r,s,n,o,l,d,h,f,u,g,c,p,v,m,y,b,C,F,P,jQuery,S,M,O,A,V,_,w,E,I,L,D){"use strict";var T=new A("OVP.app.Main");var R="sap.ovp.app.customData",x="sap.ovp.app.extensionData",B;return t.extend("sap.ovp.app.Main",{getCustomAppStateDataExtension:function(t){},restoreCustomAppStateDataExtension:function(t){},getCustomFilters:function(){},onCustomActionPress:function(t){},onCustomParams:function(t){},modifyStartupExtension:function(t){},getCustomMessage:function(t,e){},onBeforeRebindPageExtension:function(){},oRefreshTimer:null,nRefreshInterval:0,filterItemInFocus:null,bFinishedCardsCreationProcess:false,storeIncomingDeltaChanges:function(t){this.deltaCardsInfo=t?t:[]},appendIncomingDeltaChange:function(t){this.deltaChanges.push(t)},templateBaseExtension:m,onInit:function(){this.bDeltaChangesEnabled=false;this.bResetChartAxisFormatter=false;this.deltaChanges=[];this._initFlexibilityPersonalization();this.globalEventBus=L.getEventBus();this.oShareUtils=new C(this);this.oManageCardsUtils=new D(this);this.getView().loaded().then(function(){var t=this.getOwnerComponent();var e=t.getMetadata();if(t&&e&&e.getManifest()){p.setAppComponent(this.getOwnerComponent())}p.setApplicationStatus(p.mApplicationStatus.LOADING);p.publishEvent("elements","ViewRenderingStarted",{});this.oContainer=sap.ushell&&sap.ushell.Container;this.aErrorCards=[];this.oCardsModels={};this.aFilters=[];this.errorHandlingObject={atLeastOneRequestSuccess:false,errorLoadingTimeout:{}};this.sPreviousEntityType="";this.sCurrentEntityType="";this.oLoadedComponents={};this.bGlobalFilterLoaded=false;this.bGoButtonPressed=false;this.bSearchButtonPressed=false;this.fnMacroFilterBarLoaded=undefined;this.isInitialLoading=true;this.isMacroFilterBar;var a=this.getUIModel();this.bDisableErrorPage=a&&a.getProperty("/disableErrorPage");this.oNavigationHandler=this.oNavigationHandler||new r(this);this.getLayout().addStyleClass("ovpLayoutElement");this.oState={};this.oState.oSmartFilterbar=this.byId("ovpGlobalFilter");this._initGlobalFilter();this.oShareUtils.init();s.enable(this,this.oNavigationHandler);this._loadCardComponent("sap.ovp.cards.error");B=this.getView().byId("sapOvpShareButton");if(B){B.attachBrowserEvent("click",function(){this.onShareButtonPress()}.bind(this))}}.bind(this))},onShareButtonPress:function(){if(B&&B.getVisible()&&B.getEnabled()){this.oShareUtils.onShareButtonAvailableAndPressed(B)}},performRecreationOfCard:function(t){t.settings.baseUrl=this._getBaseUrl();this._clearStoredEntities();this._initCardModel(t.model);t=this._getTemplateForChart(t);this._loadCardComponent(t.template);this._createModelViewMap(t);if(t.settings.tabs&&t.settings.selectedKey){var e=t.settings.selectedKey-1;t.settings.measureAggregate=t.settings.tabs[e].measureAggregate}jQuery.when(this.createCard(t)).then(function(){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){var e=this.getLayout().getDashboardLayoutUtil();if(e){var a=e.getDashboardLayoutModel();var i=a.getCardById(t.id);e._sizeCard(i);a.extractCurrentLayoutVariant()}}}.bind(this))},onExit:function(){this.bResetChartAxisFormatter=true},_getOriginalCardDescriptorById:function(t){if(!t){return null}var e=this.getView().byId(t);var a=e.getComponentInstance();var i=a.getComponentData();var r=i.appComponent;return r._getOvpCardOriginalConfig(t)},recreateCard:function(t){var e=t.cardId;var a=this._getCardFromManifest(e);var i=this._getOriginalCardDescriptorById(e);if(a.template=="sap.ovp.cards.charts.analytical"||a.template=="sap.ovp.cards.charts.smart.chart"||a.template=="sap.ovp.cards.v4.charts.analytical"){a.settings.chartAnnotationPath=t.chartAnnotationPath;a.settings.colorPalette=t.colorPalette;a.settings.bEnableStableColors=t.bEnableStableColors;if(t.navigation){a.settings.navigation=t.navigation}}if(t.entitySet){a.settings.entitySet=t.entitySet}a.settings.annotationPath=t.annotationPath;a.settings.dynamicSubtitleAnnotationPath=t.dynamicSubtitleAnnotationPath;a.settings.presentationAnnotationPath=t.presentationAnnotationPath;a.settings.selectionAnnotationPath=t.selectionAnnotationPath;a.settings.selectionPresentationAnnotationPath=t.selectionPresentationAnnotationPath;a.settings.kpiAnnotationPath=t.kpiAnnotationPath;a.settings.dataPointAnnotationPath=t.dataPointAnnotationPath;a.settings.identificationAnnotationPath=t.identificationAnnotationPath;a.settings.headerAnnotationPath=t.headerAnnotationPath;a.settings.staticParameters=i&&i.settings&&i.settings.staticParameters;if(t.staticParameters){a.settings.staticParameters=t.staticParameters}if(t.customParams){a.settings.customParams=t.customParams}var r=a.settings.selectedKey;a.settings.selectedKey=t.selectedKey;if(a){this.performRecreationOfCard(a)}var s={changeType:"viewSwitch",content:{cardId:t.cardId,selectedKey:t.selectedKey,oldKey:r},isUserDependent:true};n.savePersonalization(s,this.getView())},recreateRTAClonedCard:function(t){var e=this._getCardFromManifest(t.id);if(e){e.settings=t.settings;this.performRecreationOfCard(e)}},onBeforeRendering:function(){},onRequestSent:function(t){this.destroyErrorCardsAndReplaceWithOriginal()},onRequestCompleted:function(t){if(t&&t.getParameters()&&t.getParameters().success){var e=t.getParameters().response&&t.getParameters().response.responseText?JSON.parse(t.getParameters().response.responseText):"";if(e&&e.d&&e.d.results&&e.d.results.length==0){this.fVerifyAndSetErrorOrCustomMessageCard(t,true)}}else if(t&&t.getParameters()&&t.getParameters().response&&t.getParameters().response.statusCode!==0){this.fVerifyAndSetErrorOrCustomMessageCard(t,false)}},fVerifyAndSetErrorOrCustomMessageCard:function(t,a){var i;var r=this.getView().getModel("ui").getProperty("/aOrderedCards");for(i in r){var n=this.getView().byId(r[i].id);var o=n&&n.getComponentInstance();var l=o&&o.getComponentData();var d=o&&o.getRootControl();var h=d&&d.getController();var f=h&&h.getCardItemsBinding();if(f&&!s.isODataV4(h.oView.getModel())){var u=t.getParameters().url;var g=f.sCustomParams;var c=f.sFilterParams;var p=f.sPath.replace("/","");var v=f.sRangeParams;var m=f.sCountMode&&f.sCountMode.indexOf("Inline");var y=f.sSortParams;var b=t.getSource().sServiceUrl;var C=t.oSource&&t.oSource.oMetadata;var F=h.getEntityType();var P=this.getView().getModel();var M=h.oView.getModel();var O=this._getEntityRelevantFilters(F,this.aFilters,M,P);var A;try{A=e.createFilterParams(O,C,F)}catch(t){T.error("applying filter on a card which is not valid")}if(c&&A){c="("+c.replaceAll("$filter=","")+")";A="("+A.replaceAll("$filter=","")+")";c="$filter="+c+"%20and%20"+A}u=u.split(p).join("").split(g).join("").split(c).join("").split(v).join("").split(y).join("").split(b).join("").split(A).join("").split("?").join("").split("&").join("").split("/").join("");if(!m){u=u.split("$inlinecount=allpages").join("")}var V=l&&l.cardId;var _=this._getCardFromManifest(V);if(u){var w=/sap-client=[0-9][0-9][0-9]/i;u=u.replace(w,"")}if(_&&!u){var E=S({},t);var I=S({},_);var L=this.getCustomMessage(E,I.id);L=L&&typeof L==="object"?L:"";if(a&&!L){return}if(L){if(a&&L.hasOwnProperty("sMessage")&&L.sMessage&&typeof L.sMessage==="string"){t.getParameters().response.statusText=L.sMessage;if(L.hasOwnProperty("sIcon")&&L.sIcon&&typeof L.sIcon==="string"&&L.sIcon.indexOf("sap-icon")!==-1){t.getParameters().response.sIcon=L.sIcon}}else if(!a&&L.hasOwnProperty("sMessage")&&L.sMessage&&typeof L.sMessage==="string"){t.getParameters().response.statusText=L.sMessage}}if(this.aErrorCards.indexOf(V)==-1){this.aErrorCards.push(_.id)}else{o.destroy()}this.createErrorCard(_,t)}}}},onAfterRendering:function(){p.setApplicationStatus(p.mApplicationStatus.RENDERED);p.publishEvent("elements","ViewRendered",{});this.oModelViewMap={};this.oAppStatePromise=null;if(this.getView().getModel("ui").getProperty("/refreshIntervalInMinutes")){this.nRefreshInterval=this.getView().getModel("ui").getProperty("/refreshIntervalInMinutes");this.nRefreshInterval=(this.nRefreshInterval<=1?1:this.nRefreshInterval)*6e4}var t=this._getCardsModel();var e=[];var a;for(a in t){if(e.indexOf(t[a].model)==-1){e.push(t[a].model)}}var i=this.getOwnerComponent();if(i){for(a in e){var r=i.getModel(e[a]);if(r&&s.isODataV4(r)){setTimeout(this.destroyErrorCardsAndReplaceWithOriginal.bind(this),0)}else if(r){r.attachRequestCompleted(this.onRequestCompleted.bind(this));r.attachRequestSent(this.onRequestSent.bind(this))}}}if(this.initialized){return}this.initialized=true;Promise.all([this.oFlexibilityPersonalizationPromise,this.oGlobalFilterLoadedPromise]).then(function(){this.isMacroFilterBar=this.getMacroFilterBar()!==undefined;this.getView().byId("ovpFilterNotFulfilledPage").setVisible(false);this.getView().byId("ovpCardPage").setVisible(true);this.persistencyVariantLoaded=true;var t;var e=[],a=[];this.aManifestOrderedCards=this._getCardArrayAsVariantFormat(this.getLayout().getContent());for(var i=0;i<this.aManifestOrderedCards.length;i++){t=this._getCardFromManifest(this.aManifestOrderedCards[i].id);if(t&&t.settings&&t.settings.requireAppAuthorization){e.push({id:t.id,cardIntent:t.settings.requireAppAuthorization});a.push(t.settings.requireAppAuthorization)}}var r=this._mergeLREPContent(this.aManifestOrderedCards);this.getView().getModel("ui").setProperty("/aOrderedCards",r);var s=r.some(function(t){return t.visibility});this.organizeCards(r);if(!s){w.hidePlaceholder()}}.bind(this));if(h.system.phone){f.enable(this)}},organizeCards:function(t){var e;var a=[];this.updateLayoutWithOrderedCards();this.updateDashboardLayoutCards(t);if(this.isDragAndDropEnabled()){if(sap.ushell&&sap.ushell.Container){this._initShowHideCardsButton()}}this._clearStoredEntities();t=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var i=0;i<t.length;i++){if(t[i].visibility){e=this._getCardFromManifest(t[i].id);if(e){a.push(e)}}}for(var i=0;i<a.length;i++){this._initCardModel(a[i].model);this._loadCardComponent(a[i].template);this._createModelViewMap(a[i])}setTimeout(function(){this.getLayout().addStyleClass("ovpLayoutElementShow")}.bind(this),0);var r=this.fGetViewSwitchIndex(a);var s=[];for(var i=0,n=0;n<a.length;i++,n++){while(a[n].id!==t[i].id){i++}e=a[n];if(!e.settings.title){T.error("title is mandatory for card ID : "+e.id)}if(e.settings.tabs){var o=0;var l=r&&r.hasOwnProperty(e.id)?r[e.id]:"";if(l&&typeof l=="number"&&l>0&&l<=e.settings.tabs.length){o=l>=1?l-1:l;this.setOrderedCardsSelectedKey(e.id,l)}else if(t[i].selectedKey&&e.settings.tabs.length>=t[i].selectedKey){o=t[i].selectedKey-1}this.initializeTabbedCard(e,o)}e=this._getTemplateForChart(e);this._loadCardComponent(e.template);e.settings.baseUrl=this._getBaseUrl();s.push(this.createCard(e))}Promise.all(s).then(function(){this.bFinishedCardsCreationProcess=true}.bind(this));if(this.busyDialog){this.busyDialog.close()}},_getTemplateForChart:function(t){if(t.template==="sap.ovp.cards.charts.smart.chart"){var e=this.getView();var a=e.getModel(t.model);var i=a.getMetaModel();var r=i.getODataEntitySet(t.settings.entitySet);var s=i.getODataEntityType(r.entityType);var n;var o;var l;var d=false;var h;if(t&&t.settings){if(!d&&t.settings.kpiAnnotationPath){var f=s[t.settings.kpiAnnotationPath];h=f.Detail.DefaultPresentationVariant&&f.Detail.DefaultPresentationVariant.Path;if(h){l=this._getTemplateForChartFromVisualization(h,t,a,r,s);d=l.bTemplateUpdated;if(d){t=l.oCard;return t}}}if(!d&&t.settings.selectionPresentationAnnotationPath){var u=s[t.settings.selectionPresentationAnnotationPath];if(u){h=u.PresentationVariant&&u.PresentationVariant.Path;if(h){l=this._getTemplateForChartFromVisualization(h,t,a,r,s);d=l.bTemplateUpdated;if(d){t=l.oCard;return t}}}}if(!d&&t.settings.presentationAnnotationPath){h=t.settings.presentationAnnotationPath;l=this._getTemplateForChartFromVisualization(h,t,a,r,s);d=l.bTemplateUpdated;if(d){t=l.oCard;return t}}if(!d&&t.settings.chartAnnotationPath){n=s[t.settings.chartAnnotationPath];o=n&&n.ChartType&&n.ChartType.EnumMember;if(o&&o.split("/")[1]==="Donut"){t.template="sap.ovp.cards.charts.analytical"}else{t.template="sap.ovp.cards.charts.smart.chart"}}}}return t},_getTemplateForChartFromVisualization:function(t,e,a,i,r){if(/^@/.test(t)){t=t.slice(1)}e.settings.presentationAnnotationPath=t;var s=r[t]&&r[t].Visualizations;var n;var o;var l;var d=false;if(s&&s.length>0){for(n=0;n<s.length;n++){var h=s[n].AnnotationPath;if(!h){return{oCard:e,bTemplateUpdated:d}}h.trim();if(h.startsWith("@")){h=h.slice(1)}if(h.indexOf("Chart")!=-1){e.settings.chartAnnotationPath=h;o=r[h];l=o&&o.ChartType&&o.ChartType.EnumMember;if(l&&l.split("/")[1]==="Donut"){e.template="sap.ovp.cards.charts.analytical"}else{e.template="sap.ovp.cards.charts.smart.chart"}}d=true}}return{oCard:e,bTemplateUpdated:d}},_createModelViewMap:function(t){if(!t||!t.settings||!t.model){return}if(!t.settings.entitySet||t.settings.entitySet===""){return}if(!t.template.startsWith("sap.ovp.cards")){return}var e=t.model;if(!this.oModelViewMap[e]){this.oModelViewMap[e]={}}this.oModelViewMap[e][t.id]=true},setTabIndex:function(t){if(typeof t=="object"){this.oTabIndexList=t}else{this.oTabIndexList={}}},getTabIndex:function(){return this.oTabIndexList},fGetViewSwitchIndex:function(t){var e=this.getGlobalFilter();var a=e&&e.getUiState();var i=a&&a.getSelectionVariant()?JSON.stringify(a.getSelectionVariant()):"{}";var r=JSON.parse(i);var s=S({},r);var n=[];if(t&&t.length>0){for(var o=0;o<t.length;o++){var l=S({},t[o]);n.push(l)}}this.onBeforeRebindPageExtension(n,s);return this.getTabIndex()},changeViewSwitchForVisibleCard:function(){var t=this.getView().getModel("ui").getProperty("/aOrderedCards");if(t&&t.length>0){var e=[],a=[];for(var i=0;i<t.length;i++){e.push(this._getCardFromManifest(t[i].id))}var r=this.fGetViewSwitchIndex(e);if(r&&typeof r=="object"){a=Object.keys(r)}if(a&&a.length>0){for(var i=0;i<t.length;i++){if(t[i]&&t[i].visibility==true){var s=this._getCardFromManifest(t[i].id);if(s&&s.settings&&s.settings.tabs&&s.settings.hasOwnProperty("selectedKey")){var n=r&&r.hasOwnProperty(s.id)?r[s.id]:"";var o=s.settings.selectedKey;if(n&&typeof n=="number"&&n<=s.settings.tabs.length&&n!==o){this.setOrderedCardsSelectedKey(s.id,n);var l={};l=s.settings.tabs[n-1];var d={cardId:s.id,selectedKey:n};for(var h in l){d[h]=l[h]}this.recreateCard(d)}}}}}}},setOrderedCardsSelectedKey:function(t,e){var a=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var i=0;i<a.length;i++){if(a[i]&&a[i].id==t){a[i].selectedKey=e;break}}this.getView().getModel("ui").setProperty("/aOrderedCards",a)},getOrderedCardsSelectedKey:function(t){var e=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var a=0;a<e.length;a++){if(e[a]&&e[a].id==t){return e[a].selectedKey}}},initializeTabbedCard:function(t,e){if(t.template=="sap.ovp.cards.charts.analytical"||t.template=="sap.ovp.cards.charts.smart.chart"||t.template=="sap.ovp.cards.v4.charts.analytical"){t.settings.chartAnnotationPath=t.settings.tabs[e].chartAnnotationPath;t.settings.colorPalette=t.settings.tabs[e].colorPalette;t.settings.bEnableStableColors=t.settings.tabs[e].bEnableStableColors;if(t.settings.tabs[e].navigation){t.settings.navigation=t.settings.tabs[e].navigation}}if(t.settings.tabs[e].entitySet){t.settings.entitySet=t.settings.tabs[e].entitySet}t.settings.annotationPath=t.settings.tabs[e].annotationPath;t.settings.dynamicSubtitleAnnotationPath=t.settings.tabs[e].dynamicSubtitleAnnotationPath;t.settings.presentationAnnotationPath=t.settings.tabs[e].presentationAnnotationPath;t.settings.selectionAnnotationPath=t.settings.tabs[e].selectionAnnotationPath;t.settings.selectionPresentationAnnotationPath=t.settings.tabs[e].selectionPresentationAnnotationPath;t.settings.kpiAnnotationPath=t.settings.tabs[e].kpiAnnotationPath;t.settings.dataPointAnnotationPath=t.settings.tabs[e].dataPointAnnotationPath;t.settings.identificationAnnotationPath=t.settings.tabs[e].identificationAnnotationPath;t.settings.params=t.settings.tabs[e].params;t.settings.measureAggregate=t.settings.tabs[e].measureAggregate;t.settings.selectedKey=e+1;if(!t.settings.staticParameters){t.settings.staticParameters=t.settings.tabs[e].staticParameters}if(!t.settings.customParams){t.settings.customParams=t.settings.tabs[e].customParams}},_getLibraryResourceBundle:function(){if(!this.oLibraryResourceBundle){this.oLibraryResourceBundle=L.getLibraryResourceBundle("sap.ovp")}return this.oLibraryResourceBundle},_getOvplibResourceBundle:function(){return this.getOwnerComponent()._getOvpLibResourceBundle()},_getCardsModel:function(){if(!this.oCards){var t=this.getUIModel();this.oCards=t.getProperty("/cards")}return this.oCards},_getBaseUrl:function(){var t=this.getUIModel();if(!this.sBaseUrl){this.sBaseUrl=t.getProperty("/baseUrl")}return this.sBaseUrl},_getApplicationId:function(){var t=this.getUIModel();return t.getProperty("/applicationId")},_getCardFromManifest:function(t){var e=this._getCardsModel();for(var a=0;a<e.length;a++){if(e[a].id===t){return e[a]}}if(!t.includes("ObjectStream")){T.error("Card id "+t+" is not available in the manifest")}return null},_getCardArrayAsVariantFormat:function(t){var e=[];for(var a=0;a<t.length;a++){var i=this._getCardId(t[a].getId());e.push({id:i,visibility:t[a].getVisible()});var r;if(this.getView()&&this.getView().byId){if(this.getView().byId(i).getComponentInstance()){r=this.getView().byId(i).getComponentInstance().getComponentData().settings.selectedKey}}if(r){e[e.length-1].selectedKey=r}}return e},_mergeLREPContent:function(t){var e=[];var a=false;if(this.bDeltaChangesEnabled&&Array.isArray(this.deltaCardsInfo)&&this.deltaCardsInfo.length>0){t=n.addMissingCardsFromManifest(t,this.deltaCardsInfo);a=true}if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(!a){t=this.getLayout().getLayoutDataJSON()}e=n.mergeChanges(t,this.deltaChanges);this._bDashboardLayoutLrepActive=true;this.getLayout().getDashboardLayoutModel().setLayoutVars(e)}else{e=n.mergeChanges(t,this.deltaChanges)}return e?e:[]},updateLayoutWithOrderedCards:function(){var t=this.getLayout();var e=this.getView().getModel("ui").getProperty("/aOrderedCards");t.removeAllContent();var a,i=false;if(this.getView().getModel("ui")&&this.getView().getModel("ui").getProperty("/cards")){a=this.getView().getModel("ui").getProperty("/cards");for(var r=0;r<a.length;r++){i=false;for(var s=0;s<e.length;s++){if(a[r].id==e[s].id){i=true;break}}if(!i&&this.getView().byId(a[r].id)){this.getView().byId(a[r].id).destroy()}}}for(var r=0;r<e.length;r++){var n=this.getView().byId(e[r].id);if(n){n.setVisible(e[r].visibility);t.addContent(n)}}},_updateErrorCardsArray:function(t){var e;for(e=0;e<t.length;e++){var a=this.aErrorCards.indexOf(t[e].id);if(a>-1&&t[e].visibility==false){this.aErrorCards.splice(a,1)}}},updateDashboardLayoutCards:function(t){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(this.getLayout().getDashboardLayoutUtil()){this.getLayout().getDashboardLayoutUtil().updateCardVisibility(t)}}},resetDashboardLayout:function(){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(this.getLayout().getDashboardLayoutUtil()){this.getLayout().getDashboardLayoutUtil().resetToManifest()}this.getLayout().rerender()}},_getCardArrayAsVariantFormatDashboard:function(){var t=[];var e=this.getLayout();var a=e.dashboardLayoutUtil.aCards;e.dashboardLayoutUtil.dashboardLayoutModel._sortCardsByRow(a);a.forEach(function(e){t.push({id:e.id,visibility:e.dashboardLayout.visible})});return t},_fnIsLoadDataOnGoButton:function(t){var e=this.getView().byId("ovpFilterNotFulfilledPage");var a;e.setVisible(true);var i=this.getUIModel().getProperty("/smartVariantRequired");if(!i){w.hidePlaceholder();return false}var r=this&&this.getView().byId("ovpMain");if(!this.oState.oSmartFilterbar.isCurrentVariantStandard()){a=this.oState.oSmartFilterbar.isCurrentVariantExecuteOnSelectEnabled();w.hidePlaceholder();if(!a){r.setHeaderExpanded(true)}if(t&&!a){e.setVisible(false)}return false}var s=this.getUIModel().getProperty("/dataLoadSettings");var n=s?s.loadDataOnAppLaunch:"ifAnyFilterExist";if(!["ifAnyFilterExist","always","never"].includes(n)){T.error("dataLoadSetting is incorrect. It should be one of ifAnyFilterExist,always,never")}var o=false,l=true;if(n==="ifAnyFilterExist"){var d=this.oState.oSmartFilterbar.getFiltersWithValues();o=true;l=d.length?true:false}else if(n==="always"){o=true}else if(n==="never"){o=false}if(o){var h=this.oState.oSmartFilterbar.getSmartVariant();if(h){h.setExecuteOnStandard(true);o=h.getExecuteOnStandard();a=this.oState.oSmartFilterbar.isCurrentVariantExecuteOnSelectEnabled();if(a){this.oState.oSmartFilterbar.search()}}}if(!a||!o){r.setHeaderExpanded(true)}if(t&&(!a||!o)){e.setVisible(false)}b.loadingState.GLOBALFILTERFILLED=o;if(!o||!t||!l){w.hidePlaceholder()}return o&&t&&l},verifyGlobalFilterLoaded:function(){var t=this.getUIModel().getProperty("/enableLiveFilter");var e=this.getGlobalFilter();var a=true;var i=e.determineMandatoryFilterItems();var r,s=e.getFilterData(),n;if(i&&s){var o=i.length;while(o--){r=i[o];n=e.determineControlByFilterItem(r,true);if(n){if(!e._checkForValues(s,r,n)){a=false;break}}}}if(!this.bGlobalFilterLoaded&&t===false){if(!a){var l=h&&h.system&&h.system.phone;if(l){var d=this&&this.getView().byId("ovpMain"),f=d&&d.getHeaderExpanded();if(!f){d.setHeaderExpanded(true)}}if(w.hidePlaceholderNeeded()){w.hidePlaceholder()}}return this._fnIsLoadDataOnGoButton(a)}if(a){if(e.validateMandatoryFields()){b.loadingState.GLOBALFILTERFILLED=true;return true}}else if(!a){if(w.hidePlaceholderNeeded()){w.hidePlaceholder()}}this.getView().byId("ovpMain").setHeaderExpanded(true);this.getView().byId("ovpFilterNotFulfilledPage").setVisible(true);b.loadingState.GLOBALFILTERFILLED=false;return false},onGlobalFilterChange:function(t){this.filterChanged=true;if(this.bGlobalFilterInitialized){var e=this.getGlobalFilter();var a=e.getLiveMode();var i=this.getLayout();var r=t.getParameter("afterFilterDataUpdate");if(!a&&i&&!r){i.setActive(false)}else{i.setActive(true);this.changeViewSwitchForVisibleCard()}}},destroyErrorCardsAndReplaceWithOriginal:function(){if(this.isModelRefreshTriggered||this.filterChanged||this.bGoButtonPressed||this.bSearchButtonPressed){var t;var e=Object.assign({},this.aErrorCards);for(t in e){var a=this.getView().byId(e[t]);var i=a&&a.getComponentInstance();var r=i&&i.getComponentData();var s=r&&r.cardId;var n=this._getCardFromManifest(s);i.destroy();var o=this.aErrorCards.indexOf(s);if(o>-1){this.aErrorCards.splice(o,1)}this.createCard(n)}this.isModelRefreshTriggered=false}},onTriggerFilterSearch:function(){var t=this.getGlobalFilter();if(t&&t.validateMandatoryFields()&&V(t.verifySearchAllowed())){this.onGlobalFilterSearch()}if(this.getMacroFilterBar()){this.onMacroFilterBarSearch()}},onGlobalFilterSearch:function(){if(this.filterChanged||this.bGoButtonPressed||this.bSearchButtonPressed){var t=this.getGlobalFilter();var e=this.getLayout();if(e){e.setActive(true)}if(this.aErrorCards&&this.aErrorCards.length>0){this.destroyErrorCardsAndReplaceWithOriginal()}if(t&&!t.isDialogOpen()){this._storeCurrentAppStateAndAdjustURL()}if(t&&t.getLiveMode()&&t._bResetFiltersDialogTriggered){this._storeCurrentAppStateAndAdjustURL()}this._clearStoredEntities();var a=[];if(this.oGlobalFilter["_aFields"].length>0){a=this.oGlobalFilter["_aFields"]}else{var i=this.oGlobalFilter["_aFilterBarViewMetadata"];for(var r=0;r<i.length;r++){var n=i[r];for(var o=0;o<n.fields.length;o++){a.push(n.fields[o])}}}for(var r=0;r<a.length;r++){if(a[r].control){var l=document.getElementById(a[r].control.sId);if(jQuery(l).hasClass("sapMFocus")){this.filterItemInFocus=a[r].control;break}}}var d="ovp-"+(new Date).getTime();this._processFilters();this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters);if(this.nRefreshInterval!==0){if(this.oRefreshTimer!==null){clearTimeout(this.oRefreshTimer)}this.attachRefreshInterval(this.nRefreshInterval)}for(var h in this.oCardsModels){if(this.oCardsModels.hasOwnProperty(h)&&!s.isODataV4(this.oCardsModels[h])){try{this.oCardsModels[h].refresh(false,false,d)}catch(t){T.warning(t)}}}this.filterChanged=false;this.bGoButtonPressed=false;this.bSearchButtonPressed=false;this._clearStoredEntities()}},_clearStoredEntities:function(){if(this.sPreviousEntityType){this.sPreviousEntityType=""}if(this.sCurrentEntityType){this.sCurrentEntityType=""}},_processSFBFilters:function(){var t=this.getGlobalFilter();var e=t.getFilters();var a=this.getCustomFilters();var i=true;var r;var s=function(t,e){if(!(t instanceof y)){throw new Error("State must always be set with respect to a ControllerExtension")}if(!i){throw new Error("State must always be provided synchronously")}if(e){r=e}};this.templateBaseExtension.addFilters(s);i=false;var n=[];if(a&&a instanceof o){n.push(a)}if(r&&r instanceof o){n.push(r)}if(n.length!==0){var l=[];if(e&&e.length>0){n.push(e[0])}l.push(new o(n,true));if(l.length>0){e=l}}this.aFilters=e},_processFilters:function(){if(this.getGlobalFilter()){this.aFilters=[];this._processSFBFilters()}else if(this.getMacroFilterBar()){this.aFilters=this.aFilters||[]}else{this.aFilters=[]}},_processSearch:function(){var t,e;var a=this.getGlobalFilter();if(!a){return}var i=a.getParameters();var e=i&&i["custom"];if(!e){return}for(var r in e){t=r+"="+F(e[r])}return t},_collapseHeaderForPage:function(){var t=h&&h.system&&h.system.phone;if(t){var e=this.getGlobalFilter();var a=this&&this.getView().byId("ovpMain"),i=a&&a.getHeaderExpanded();if(i&&e.validateMandatoryFields()){a.setHeaderExpanded(false)}}},_initGlobalFilter:function(){var t=this.getGlobalFilter();if(!t){var e=this.getLayout();var a=this.getOwnerComponent().oOvpConfig;if(e&&a&&(a.globalFilterEntitySet||a.globalFilterEntityType)){e.setActive(false)}var i=this.getMacroFilterBar();if(!i){this.bGlobalFilterLoaded=true;this._parseNavigationVariant();return}this.getView().byId("ovpMain").setHeaderExpanded(true);this.getView().byId("ovpFilterNotFulfilledPage").setVisible(true);b.loadingState.GLOBALFILTERFILLED=false;this.oGlobalFilterLoadedPromise=new Promise(function(t,e){this.fnMacroFilterBarLoaded=t;w.hidePlaceholder()}.bind(this));return}t.attachFiltersDialogClosed(this._storeCurrentAppStateAndAdjustURL.bind(this));var r=t.getVariantManagement();if(r){r.attachAfterSave(function(t){this._storeCurrentAppStateAndAdjustURL(undefined,true)}.bind(this))}this.oGlobalFilterLoadedPromise=new Promise(function(e,a){t.attachInitialized(function(){this._parseNavigationVariant();if(this.oParseNavigationPromise){var a;this.oParseNavigationPromise.then(function(t){var e=t&&t[0];var i=t&&t[1];var r=t&&t[2];if(e){a=Promise.resolve(this._setNavigationVariantToGlobalFilter(e,i,r)).then(function(){this.filterChanged=false}.bind(this))}}.bind(this));this.oParseNavigationPromise.catch(function(){T.error("Could not parse navigation variant from URL")});this.oParseNavigationPromise.finally(function(){Promise.all([a]).then(function(){this.bGlobalFilterInitialized=true;if(t&&this.verifyGlobalFilterLoaded()){e()}}.bind(this))}.bind(this))}else if(t&&this.verifyGlobalFilterLoaded()){e()}},this);t.attachSearch(function(){if(t.validateMandatoryFields()){if(!this.bGlobalFilterLoaded){e();this.bGlobalFilterLoaded=true;if(!t.isDialogOpen()){this._storeCurrentAppStateAndAdjustURL()}var a=this.getLayout();if(a){a.setActive(true)}return}this.onGlobalFilterSearch()}},this);t.attachFilterChange(this.onGlobalFilterChange,this);t._oSearchButton&&t._oSearchButton.attachPress(function(){this.bGoButtonPressed=true;this._collapseHeaderForPage();var t=this.getLayout();if(t){t.setActive(true)}}.bind(this))}.bind(this));this.oGlobalFilterLoadedPromise.then(function(e){this.bGlobalFilterLoaded=true;this._collapseHeaderForPage();t._oBasicSearchField&&t._oBasicSearchField.attachSearch(function(){this.bSearchButtonPressed=true}.bind(this))}.bind(this))},_loadCardComponent:function(t){var e=t.replace(/\./g,"/");var a=sap.ui.require.toUrl(e);if(!this.oLoadedComponents[t]){this.oLoadedComponents[t]=E.load({name:t,url:a,manifest:false}).then(function(t){return t})}},_initCardModel:function(t){var e=false;if(this.oCardsModels[t]||!t){return}this.oCardsModels[t]=this.getView().getModel(t);if(!s.isODataV4(this.getView().getModel(t))){if(!this.oCardsModels[t].bUseBatch){this.oCardsModels[t].setUseBatch(false)}else{this.oCardsModels[t].setUseBatch(true)}}if(this.getGlobalFilter()||this.getMacroFilterBar()){e=true}if(!s.isODataV4(this.oCardsModels[t])){this._overrideCardModelRead(this.oCardsModels[t],e)}},getVisibleCustomFields:function(){var t=this.getGlobalFilter();var e=t.getAllFilterItems(true);var a,i,r=[];if(e){a=e.length;while(a--){i=e[a];if(i&&i.getVisibleInFilterBar()){r.push(i.getName())}}}var s,n,o,l=t.getFilterBarViewMetadata();var d=[];if(l){s=l.length;while(s--){o=l[s].fields;if(o){n=o.length;while(n--){if(o[n].isCustomFilterField&&r.indexOf(o[n].fieldName)>-1){d.push({name:o[n].fieldName})}}}}}return d},_showErrorPage:function(t){if(this.bDisableErrorPage){return}var e=this.getView().byId("ovpErrorPage");var a=this.getView().byId("ovpMain");if(t){e.setVisible(true);a.setVisible(false);return}e.setVisible(false);a.setVisible(true)},_removeFilter:function(t,e){var a=t.lastIndexOf(e);var i=t.indexOf(e);if(a===-1||i===-1){return t}var r="%20and%20";var s=t.substring(a).indexOf(r);s=s!==-1?a+s:s;var n=t.substring(0,i).lastIndexOf(r);if(s===-1&&n===-1){if(t.lastIndexOf("$filter=")===0){return t.slice(0,8)}else{return""}}else if(n===-1){if(t.lastIndexOf("$filter=")===0){return t.slice(0,8)+t.slice(s+r.length)}else{return t.slice(s+r.length)}}else if(s===-1){return t.slice(0,n)}else{return t.slice(0,n)+t.slice(s)}},_removeRelevantFilterRecursively:function(t,e){if(!t._bMultiFilter){if(t.sPath===e){return undefined}return t}else{t.aFilters.forEach(function(a,i){t.aFilters[i]=this._removeRelevantFilterRecursively(a,e)}.bind(this));for(var a=0;a<t.aFilters.length;a++){if(!t.aFilters[a]){t.aFilters.splice(a,1);a--}}if(t.aFilters.length>0){return t}else{return undefined}}},_removeRelevantFilter:function(t,e){if(!t||t.length===0){return t}t[0]=this._removeRelevantFilterRecursively(t[0],e);return!t[0]?undefined:t},_getFilterPreference:function(t){var e;var a=this._getCardFromManifest(t);if(a){if(a.settings.tabs){var i=0;var r=a.settings.selectedKey;if(r&&a.settings.tabs.length>=r){i=r-1}e=a.settings.tabs[i].mFilterPreference}else{e=a.settings.mFilterPreference}}return e},_getFilterPreferenceFromUrlParams:function(t){var e=t.urlParameters;var a;var i="cardId=";var r=-1;if(e){for(var s=0;s<e.length;s++){if(e[s].lastIndexOf(i)>=0){r=s;break}}if(r>=0){var n=e[r].lastIndexOf(i);var o=e[r].slice(n+i.length);a=this._getFilterPreference(o);if(n>0){e[r]=e[r].slice(0,n-1)}else{e.splice(r,1)}}}return a},_addRelevantFilters:function(t,a,i,r){var s=t.urlParameters;var n=-1;if(s){for(var o=0;o<s.length;o++){if(s[o].lastIndexOf("$filter=",0)===0){n=o;break}}}if(this.aRelevantFilters&&this.aRelevantFilters.length>0){if(n>=0){var l=e.createFilterParams(this.aRelevantFilters,a.oMetadata,i).substr(8);if(r&&r.filterAll==="card"){s[n]=s[n]}else if(r&&r.filterAll==="global"){s[n]=s[n].slice(0,8)+l}else if(r&&(r.cardFilter||r.globalFilter)){if(Array.isArray(r.cardFilter)&&r.cardFilter.length>0){r.cardFilter.forEach(function(t){l=this._removeFilter(l,t)}.bind(this))}if(Array.isArray(r.globalFilter)&&r.globalFilter.length>0){r.globalFilter.forEach(function(t){s[n]=this._removeFilter(s[n],t)}.bind(this))}if(l===""&&s[n].length===8){s.splice(n,1)}else if(l===""){s[n]=s[n]}else if(s[n].length===8){s[n]=s[n]+l}else{if(this.aRelevantFilters.length===1){l="("+l+")"}s[n]=s[n].slice(0,8)+"("+s[n].slice(8,s[n].length)+")%20and%20"+l}}else{if(this.aRelevantFilters.length===1){l="("+l+")"}s[n]=s[n].slice(0,8)+"("+s[n].slice(8,s[n].length)+")%20and%20"+l}}else{if(r&&r.filterAll==="card"){t.filters=undefined}else if(r&&r.filterAll==="global"){t.filters=this.aRelevantFilters}else if(r&&(r.cardFilter||r.globalFilter)){if(Array.isArray(r.cardFilter)&&r.cardFilter.length>0){r.cardFilter.forEach(function(t){this.aRelevantFilters=this._removeRelevantFilter(this.aRelevantFilters,t)}.bind(this))}if(this.aRelevantFilters&&this.aRelevantFilters.length>0){t.filters=this.aRelevantFilters}}else{t.filters=this.aRelevantFilters}}}else{if(n>=0){if(r&&r.filterAll==="card"){s[n]=s[n]}else if(r&&r.filterAll==="global"){s.splice(n,1)}else if(r&&r.globalFilter){if(Array.isArray(r.globalFilter)&&r.globalFilter.length>0){r.globalFilter.forEach(function(t){s[n]=this._removeFilter(s[n],t)}.bind(this))}if(s[n].length===8){s.splice(n,1)}}}}return t},removeInternalParamValue:function(t,e){return t&&t.reduce(function(t,a){if(a&&a.includes(e)){a=a.substring(0,a.indexOf(e)-1)}if(a){t.push(a)}return t},[])},_overrideCardModelRead:function(t,e){var a=t.read;var i=this;t.read=function(){var r=arguments[1];if(!r){r={};Array.prototype.push.call(arguments,r)}var s=i._getEntityTypeFromPath(t,arguments[0],r.context,false);var n=i._getEntitySetFromEntityType(t,s);var o=r&&r.urlParameters;var l=false;if(o&&Array.isArray(o)){l=o.some(function(t){return t&&t.indexOf("_requestFrom=ovp_internal")>-1})}else if(o&&typeof o==="object"){l=o["_requestFrom"]==="ovp_internal"}if(!l){return a.apply(t,arguments)}if(o&&Array.isArray(o)){o=i.removeInternalParamValue(o,"_requestFrom=ovp_internal");r.urlParameters=o}else if(o&&typeof o==="object"&&l){delete o["_requestFrom"]}var d=i._getFilterPreferenceFromUrlParams(r);if(e){i._processFilters();var h=i.getGlobalFilter();var f=i.getMacroFilterBar();var u=h!==undefined?h.getModel():f.getModel();if(!i.aFilters){i.aFilters=[]}var g=false;var c;var p=n["Org.OData.Capabilities.V1.SearchRestrictions"];if(n["sap:searchable"]==="true"||p&&p.Searchable&&p.Searchable.Bool&&p.Searchable.Bool==="true"){c=i._processSearch()}i.sCurrentEntityType=s.entityType;if(i.sPreviousEntityType!==i.sCurrentEntityType){i.sPreviousEntityType=i.sCurrentEntityType;g=true}if(!i.aRelevantFilters){i.aRelevantFilters=[];g=true}if(g){i.aRelevantFilters=[];if(s){i.aRelevantFilters=i._getEntityRelevantFilters(s,i.aFilters,t,u)}}r=i._addRelevantFilters(r,t,s,d);var v=r.urlParameters;if(c){v[v.length]=c}if(h&&h.getConsiderAnalyticalParameters()){var m=h.getAnalyticBindingPath();var y,b,C;if(m&&m.length>0){if(s.entityType===h.getEntityType()){b=arguments[0];y=arguments[0].indexOf("$");if(y>0){b=arguments[0].substring(0,y-1)}C=m;if(b!==C){arguments[0]=arguments[0].replace(b,C)}}else{var F=i._getParametersFromEntityPath(arguments[0]);var P=i._getParametersFromEntityPath(m);var S,M,O;if(F&&F.length>0){var A=i._getEntityTypeFromPath(t,arguments[0],r.context,true);for(var V=0;V<P.length;V++){S=i._getPropertyMapping(F,P[V].name,A.name,h.getEntityType(),t,h.getModel());if(S){M=S+"=.*?[,)]";O=arguments[0].match(new RegExp(M));if(O&&O.length>0){b=O[0].slice(0,-1);C=S+"="+P[V].sValue;if(b!==C){arguments[0]=arguments[0].replace(b,C)}}}}}}}}}var _=t.getMetaModel();var w=_.getODataEntityType(n.entityType);v=i._getExpandPropertiesForSmartCharts(v,_,w);var E=arguments[1].success;arguments[1].success=function(t,e){return function(){if(!e.errorHandlingObject.atLeastOneRequestSuccess){e.errorHandlingObject.atLeastOneRequestSuccess=true;e._showErrorPage(false)}if(e.filterItemInFocus!=null){e.filterItemInFocus.focus();e.filterItemInFocus=null}if(e.nRefreshInterval!==0){if(e.oRefreshTimer!==null){clearTimeout(e.oRefreshTimer)}e.attachRefreshInterval(e.nRefreshInterval)}return t.apply(this,arguments)}}(E,i);var I=arguments[1].error;arguments[1].error=function(t,e){return function(){if(!e.errorHandlingObject.atLeastOneRequestSuccess){clearTimeout(e.errorHandlingObject.errorLoadingTimeout);e.errorHandlingObject.errorLoadingTimeout=setTimeout(function(){if(!e.errorHandlingObject.atLeastOneRequestSuccess){e._showErrorPage(true)}},9e3)}return t.apply(this,arguments)}}(I,i);var L=a.apply(t,arguments);return L}},showErrorCardForMissingParam:function(t,e){var a=t[0];var i=t[1].urlParameters;for(var r in i){a=a+i[r]}var s=new I;s.mParameters={url:a,response:{statusText:v.getText("Missing_Param_Text")}};s.oSource=e;setTimeout(function(){this.fVerifyAndSetErrorOrCustomMessageCard(s,false)}.bind(this),0)},_checkMandatoryParams:function(t,e,a){var i=new c.Model(c.Model.ReferenceByModel(t));var r=i.findQueryResultByName(e);var s=r&&r.getParameterization();if(!s){return true}var n=s.getAllParameterNames();var o=a.match(/\(.*\)/g);if(n.length>0&&o===null){return false}var l=o[0].replace("(","").replace(")","").split(",");if(l.length===n.length){for(var d in l){var h=l[d].split("=")[1];if(h.indexOf("%27")>-1){h=h.split("%27")[1]}if(h.length===0){return false}}}else{return false}},_getExpandPropertiesForSmartCharts:function(t,e,a){var i;var r="";var s;var n;var o;var l="$expand";var d=false;var h=false;var f;var u;var g;var c="com.sap.vocabularies.Common.v1.Text";var p=a&&a.property;if(!t||!(t.length>0)){return t}for(var v=0;v<t.length;v++){if(t[v].indexOf("$expand")>-1){return t}}for(var m=0;m<t.length;m++){if(t[m].indexOf("$select")>-1){h=true;u=t[m];o=t[m].split("$select=");if(o&&o[1]){f=decodeURIComponent(o[1]);i=f.split(",");if(!i||!(i.length>1)){return t}}break}}if(!h){return t}if(!i||!(i.length>0)||!p||!(p.length>0)){return t}for(var y=0;y<i.length;y++){for(var b=0;b<p.length;b++){if(i[y]==(p[b]&&p[b].name)){if(p[b]&&p[b]["sap:aggregation-role"]&&p[b]["sap:aggregation-role"]=="dimension"){if(!p[b][c]||!p[b][c].Path||!(p[b][c].Path.indexOf("/")>0)){break}r=p[b][c].Path;s=r.split("/");if(!s.length){break}n=e.getODataAssociationEnd(a,s[0]);if(!n){break}if(!d){l=l+"="+s[0];d=true}else if(d){l=l+","+s[0]}g=u+","+r}break}}}if(g&&l){t[m]=g;t.push(l)}return t},attachRefreshInterval:function(t){this.oRefreshTimer=setTimeout(function(){this._processFilters();this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters);var t=this.getLayout();if(t&&t.getActive()){for(var e in this.oCardsModels){this.isModelRefreshTriggered=true;if(!s.isODataV4(this.oCardsModels[e])){this.oCardsModels[e].refresh(false,false)}}}}.bind(this),t)},_getEntityTypeFromPath:function(t,e,a,i){var r=u.prototype._normalizePath.apply(t,[e,a]);if(i){r=e.replace(/^\/|\/$/g,"").split("/")[0];if(r.indexOf("(")!=-1){r=r.substring(0,r.indexOf("("))}}var s=g.prototype._getEntityTypeByPath.apply(t.oMetadata,[r]);return s},_getEntitySetFromEntityType:function(t,e){if(!t||!e){return}var a=t.getMetaModel();var i=a&&a.getODataEntityContainer();var r=i&&i.entitySet;if(!r||!Array.isArray(r)){return}var s=r.length;for(var n=0;n<s;n++){if(r[n].entityType===e.entityType){return r[n]}}},_getPropertyMapping:function(t,e,a,i,r,s){var n,o;for(n=0;n<t.length;n++){if(t[n].name===e){o=t[n].name;return o}if("P_"+t[n].name===e||t[n].name==="P_"+e){o=t[n].name;return o}}if(!a||!i||!r||!s){return}var l=r.oMetadata._getEntityTypeByName(a);var d=s.oMetadata._getEntityTypeByName(i);if(!l||!d){return}var h="com.sap.vocabularies.Common.v1.SemanticObject";var f="com.sap.vocabularies.Common.v1.SemanticObjectMapping";var u=r.oAnnotations.getAnnotationsData();if(!u||!u.propertyAnnotations){return}var g=u.propertyAnnotations[l.namespace+"."+l.name];var c=s.oAnnotations.getAnnotationsData();if(!c||!c.propertyAnnotations){return}var p=c.propertyAnnotations[d.namespace+"."+d.name];var v=p&&p[e];if(!v||!v[h]){return}var m,y,b,C,F;for(m in g){y=g[m];if(y[h]&&y[h].String===v[h].String){b=y[f];if(!b){continue}C=b.length;F="";while(C--){if(b[C].SemanticObjectProperty.String===e){F=b[C].LocalProperty.PropertyPath;break}}if(F!==""){for(n=0;n<t.length;n++){if(t[n].name===F){o=t[n].name;return o}}}}}return o},_getParametersFromEntityPath:function(t){t=t.split("?")[0];var e=t.match(/\(.*=.*\)/);var a=[];if(!e){return a}var i=e[0].slice(1,-1).trim().split(/\=|\,/);for(var r=0;r<i.length;r=r+2){a.push({name:i[r],sValue:i[r+1]})}return a},_checkRelevantFiltersRecursive:function(t,e,a,i,r,s){if(!e._bMultiFilter){e.sPath=e.sPath.split("/").pop();var n=this._getPropertyMapping(t,e.sPath,a,i,r,s);if(n){e.sPath=n;return e}}else{var l=e.aFilters;var d,h=[];if(l){for(var f=0;f<l.length;f++){d=this._checkRelevantFiltersRecursive(t,l[f],a,i,r,s);if(d){h.push(d)}}if(h.length>0){return new o(h,e.bAnd)}}}},_getEntityRelevantFilters:function(t,e,a,i){var r=[];if(e.length>0&&t){var s=this.isMacroFilterBar?t.entityType:this.getGlobalFilter().getEntityType();var n=this._checkRelevantFiltersRecursive(t.property,e[0],t.name,s,a,i);if(n){r.push(n)}}return r},_checkIsCardValid:function(t){var e=t+".Component";var r,s;sap.ui.require(e);var n=P.get(e);if(!n){return false}if(n!==a&&!(n.prototype instanceof a||n.prototype instanceof i)){return false}if((r=n.getMetadata())&&(s=r.getCustomizing())){if(s["sap.ui.viewReplacements"]&&s["sap.ui.viewReplacements"]["sap.ovp.cards.generic.Card"]){return false}}if(n.prototype.createContent!=a.prototype.createContent&&n.prototype.createContent!=i.prototype.createContent){return false}if(n.prototype.getPreprocessors!=a.prototype.getPreprocessors&&n.prototype.getPreprocessors!=i.prototype.getPreprocessors){return false}return true},_createCardComponent:function(t,e,a){var i=t.getModel("@i18n");if(a.template&&this._checkIsCardValid(a.template)){var r={name:a.template,manifest:false,componentData:{model:e,modelName:a.model,i18n:i,cardId:a.id,settings:a.settings,appComponent:this.getOwnerComponent(),mainComponent:this}};var s=this.getGlobalFilter();if(a.errorReason){r.componentData.errorReason=a.errorReason}if(s){r.componentData.globalFilter={getUiState:s.getUiState.bind(s)}}var n=t;this.getOwnerComponent().runAsOwner(function(){E.create(r).then(function(t){var e=t.getComponentData().cardId;var a=n.byId(e);a.setPropagateModel(true);var i=a.getComponentInstance();a.setComponent(t);if(i){setTimeout(function(){i.destroy()},0)}})})}else{T.error("Could not create Card from '"+a.template+"' template. Card is not valid.")}},createErrorCard:function(t,e){var a=S({},t,{template:"sap.ovp.cards.error"});a.errorReason=Object.assign({},e);a.settings.oldTemplate=t.template;a.settings.template="sap.ovp.cards.error";this.oLoadedComponents[a.settings.template].then(function(){this._createCardComponent(this.getView(),undefined,a)}.bind(this))},createCard:function(t){var e=this.getView();var a=e.getModel(t.model);var i;if(s.isODataV4(a)){i=[a.getMetaModel().requestObject("/"+t.settings.entitySet),this.oGlobalFilterLoadedPromise,this.oLoadedComponents[t.template]]}else{i=[a.getMetaModel().loaded(),this.oGlobalFilterLoadedPromise,this.oLoadedComponents[t.template],this.oLoadedComponents["sap.ovp.cards.error"]]}return Promise.all(i).then(function(){this._createCardComponent(e,a,t)}.bind(this),function(e){T.error("Can't load card with id:'"+t.id+"' and type:'"+t.template+"', reason:"+e)})},_getCardId:function(t){var e=this.getView().getId()+"--";var a="mainView--";if(t.indexOf(e)!=-1){var i=t.indexOf(e)+e.length;return t.substring(i)}if(t.indexOf(a)!==-1){var i=t.indexOf(a)+a.length;return t.substring(i)}return t},_initFlexibilityPersonalization:function(){var t=this.getLayout();var e="sap/ovp/flexibility/changeHandler/PersonalizationChangeHandler";var a=t.getContent();if(a&&a.length){for(var i=0;i<a.length;i++){a[i].addCustomData(new O({key:"sap-ui-custom-settings",value:{"sap.ui.fl":{flexibility:e}}}))}this.oFlexibilityPersonalizationPromise=new Promise(function(t,e){M.waitForChanges({selectors:a}).then(function(){if(this.deltaChanges.length>0){this.bDeltaChangesEnabled=true}t()}.bind(this),function(e){t()})}.bind(this))}},layoutChanged:function(t){var e=t.getParameter("positionChanges");var a=[],i=[];var r,s;if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){var o=this.getLayout().dashboardLayoutUtil.dashboardLayoutModel.iColCount;if(e){for(var l=e.length-1;l>=0;l--){r=e[l];s=r.content.cardId;if(r.content.dashboardLayout.oldRow===r.content.dashboardLayout.row&&r.content.dashboardLayout.oldColumn===r.content.dashboardLayout.column&&r.content.dashboardLayout.oldRowSpan===r.content.dashboardLayout.rowSpan&&r.content.dashboardLayout.oldColSpan===r.content.dashboardLayout.colSpan){continue}if(i[s]){i[s].content.dashboardLayout.oldRow=r.content.dashboardLayout.oldRow;continue}i[s]=r}Object.keys(i).forEach(function(t){var e=i[t];if(e.content.dashboardLayout.oldRow===e.content.dashboardLayout.row&&e.content.dashboardLayout.oldColumn===e.content.dashboardLayout.column&&e.content.dashboardLayout.oldRowSpan===e.content.dashboardLayout.rowSpan&&e.content.dashboardLayout.oldColSpan===e.content.dashboardLayout.colSpan){return}a.push(i[t])});a.forEach(function(t){var e=t.content.dashboardLayout;t.content.dashboardLayout={};t.content.dashboardLayout["C"+o]=e})}}else{var d=this.getLayout().getContent();var h=this._getCardArrayAsVariantFormat(d);this.getView().getModel("ui").setProperty("/aOrderedCards",h);a=e}if(a.length>0){n.savePersonalization(a,this.getView())}},saveVariant:function(t){var e=this;this.smartVariandManagement.getVariantsInfo(function(t){var a=null;if(t&&t.length>0){a=t[0].key}var i=a!==null;var r={name:"Personalisation",global:false,overwrite:i,key:a,def:true};e.smartVariandManagement.fireSave(r)})},getLayout:function(){return this.getView()?this.getView().byId("ovpLayout"):null},_initShowHideCardsButton:function(){var t=sap.ushell.Container.getRenderer("fiori2");if(t){var e={controlType:"sap.ushell.ui.launchpad.ActionItem",bCurrentState:true,oControlProperties:{icon:"sap-icon://dimension",id:this.createId("managecards"),text:v.getText("MANAGE_CARDS_TITLE"),tooltip:v.getText("MANAGE_CARDS_TITLE"),press:this.oManageCardsUtils.onManageCardsMenuButtonPress.bind(this.oManageCardsUtils)},bIsVisible:true,aStates:["app"]};t.addUserAction(e)}},createOrDestroyCards:function(t,e,a){var i=-1,r=[],s=[];for(var n=0;n<e.length;n++){if(t[n].id==e[n].id){i=n}else{i=this.getCardIndexInArray(t,e[n].id)}var o=this.getView().byId(e[n].id);var l=o.getComponentInstance();if(a){if(l){l.destroy()}}if(e[n].visibility!=t[i].visibility||a){if(e[n].visibility===true){var d=this._getCardFromManifest(e[n].id);r.push({oCard:d,sCreateOrDestroy:"create"});s.push(d)}else if(l){r.push({oCard:l,sCreateOrDestroy:"destroy"})}}}var h=this.fGetViewSwitchIndex(s);if(r&&r.length>0){var f=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var u=0;u<r.length;u++){if(r[u]&&r[u].oCard&&r[u].hasOwnProperty("sCreateOrDestroy")&&r[u].sCreateOrDestroy=="create"){var g=r[u].oCard;if(g){g.settings.baseUrl=this._getBaseUrl();this._clearStoredEntities();this._initCardModel(g.model);g=this._getTemplateForChart(g);this._loadCardComponent(g.template);this._createModelViewMap(g);if(g.settings.tabs){var c=0;var p=[];p.push(g);var v=h&&h.hasOwnProperty(g.id)?h[g.id]:"";var m=this.getOrderedCardsSelectedKey(g.id);if(v&&typeof v=="number"&&v<=g.settings.tabs.length&&v!==m){c=v>=1?v-1:v;this.setOrderedCardsSelectedKey(g.id,v)}else if(f[u].selectedKey&&g.settings.tabs.length>=f[u].selectedKey){c=f[u].selectedKey-1}this.initializeTabbedCard(g,c)}this.createCard(g)}}else if(r[u]&&r[u].oCard&&r[u].hasOwnProperty("sCreateOrDestroy")&&r[u].sCreateOrDestroy=="destroy"){r[u].oCard.destroy()}}}},getCardIndexInArray:function(t,e){for(var a=0;a<t.length;a++){if(t[a].id==e){return a}}return-1},rerenderCards:function(t){var e=this.getView().getModel("ui").getProperty("/aOrderedCards");this.createOrDestroyCards.apply(this,[e,t,false]);this.getView().getModel("ui").setProperty("/aOrderedCards",t);this.updateDashboardLayoutCards(t);this.updateLayoutWithOrderedCards();n.savePersonalization(this.visibilityChanges,this.getView());for(var a=0;a<t.length;a++){var i=t[a];var r=this.aErrorCards.indexOf(i.id);if(r>-1&&i.visibility==false){this.aErrorCards.splice(r,1)}}},isDragAndDropEnabled:function(){return!h.system.phone},getGlobalFilter:function(){if(!this.oGlobalFilter){this.oGlobalFilter=this.getView().byId("ovpGlobalFilter")}return this.oGlobalFilter},getMacroFilterBar:function(){if(!this.oMacroFilterBar){this.oMacroFilterBar=this.getView().byId("ovpGlobalMacroFilter")}return this.oMacroFilterBar},getUIModel:function(){if(!this.oUIModel){var t=this.getOwnerComponent();this.oUIModel=t&&t.getModel("ui")}return this.oUIModel},_parseNavigationVariant:function(){if(!this.oContainer){this.oParseNavigationPromise=Promise.resolve();return}var t=this.oNavigationHandler;this.oParseNavigationPromise=new Promise(function(e,a){return t.parseNavigation().done(function(t,a,i){e([t,a,i])}).fail(function(){a()})})},_setUiStateToGlobalFilter:function(t,e,a){var i=this.getGlobalFilter();var r=new d({selectionVariant:t.toJSONObject()});i.setUiState(r,{replace:a,strictMode:false});e=e.concat(t.getParameterNames().concat(t.getSelectOptionsPropertyNames()));e=e.filter(function(t,e,a){return a.indexOf(t)==e});return e},_processModifyStartupExtension:function(t){if(!t){t=[]}var e=this.getGlobalFilter();var a=e.getUiState();var i=new l(a.getSelectionVariant());var r=JSON.parse(JSON.stringify(i));return new Promise(function(e,a){Promise.all([this.modifyStartupExtension(i),this.templateBaseExtension.provideStartupExtension(i)]).then(function(){if(JSON.stringify(i)!==JSON.stringify(r)){try{t=this._setUiStateToGlobalFilter(i,t,true)}catch(e){T.error("Error with modifyStartupExtension, falling back to default behavior"+e);t=this._setUiStateToGlobalFilter(r,t,true)}}e(t)}.bind(this))}.bind(this))},_addFieldsToSFBAdvancedArea:function(t){var e;var a=this.getGlobalFilter();if(t&&t.length>0){e=t.length;while(e--){a.addFieldToAdvancedArea(t[e])}}},_restoreAppState:function(t){this.restoreCustomAppStateDataExtension(t._CUSTOM);var e=t._EXTENSION;if(!e){return}var a=true;var i=function(t){if(!(t instanceof y)){throw new Error("State must always be retrieved with respect to a ControllerExtension")}var i=t.getMetadata().getNamespace();if(!a){throw new Error("State must always be restored synchronously")}return e[i]};this.templateBaseExtension.restoreExtensionAppStateData(i);a=false},_setNavigationVariantToGlobalFilter:function(t,e,a){return new Promise(function(i,r){var s=this.getGlobalFilter();var n=this.getUIModel()&&this.getUIModel().oData;var o=this.oState&&this.oState.oSmartFilterbar;var h=this.oGlobalFilter&&this.oGlobalFilter.getUiState().getSemanticDates();if(!s){return}switch(a){case"iAppState":if(this.getUIModel()&&this.getUIModel().getProperty("/bRTAActive")){i();break}if(t.selectionVariant){var f=JSON.parse(t.selectionVariant);if(f.SelectionVariantID.length!==0){var u=s.getVariantManagement().getVariantItems().map(function(t){return t.getKey()});var g=f.SelectionVariantID;if(u.indexOf(g)===-1){i();break}}var c,p,v=false;var m,y,b,C;var F,P,S;s.clearVariantSelection();f=JSON.parse(t.selectionVariant);s.setCurrentVariantId(f.SelectionVariantID);P=s.getUiState({allFilters:false});y=P&&JSON.stringify(P.getSelectionVariant());C=s.getFilterData()._CUSTOM;C=typeof C=="undefined"?{}:C;F=new d({selectionVariant:t.oSelectionVariant.toJSONObject(),semanticDates:t.semanticDates});s.setUiState(F,{replace:true,strictMode:false});c=new l(t.selectionVariant);p=c.getParameterNames().concat(c.getSelectOptionsPropertyNames());for(var M=0;M<p.length;M++){s.addFieldToAdvancedArea(p[M])}S=s.getUiState({allFilters:false});m=S&&JSON.stringify(S.getSelectionVariant());if(y!==m){v=true}if(t.customData&&Object.keys(t.customData).length>0){var b=t.customData;this._restoreAppState(b);if(JSON.stringify(C)!==JSON.stringify(b)){v=true}}s.getSmartVariant().currentVariantSetModified(v);s._updateToolbarText()}i();break;case"xAppState":case"URLParams":var O=[];var A=new l(t.oSelectionVariant.toJSONObject());var V=new l(t.oDefaultedSelectionVariant.toJSONObject());if(!t.bNavSelVarHasDefaultsOnly&&!A.isEmpty()){s.clearVariantSelection();s.clear();O=this._setUiStateToGlobalFilter(A,O,true)}if(t.bNavSelVarHasDefaultsOnly&&!V.isEmpty()&&s.getCurrentVariantId()===""){var w=this._mergeDefaultWithSFBVariant(V,new l(JSON.stringify(s.getUiState().getSelectionVariant())));O=this._setUiStateToGlobalFilter(w,O,true)}if(s.getCurrentVariantId()!==""){this._setDisplayCurrency(V)}Promise.resolve(this._processModifyStartupExtension(O)).then(function(a){this._addFieldsToSFBAdvancedArea(a);if(this.oGlobalFilter.isCurrentVariantStandard()&&t.bNavSelVarHasDefaultsOnly!==false&&this.oGlobalFilter.getSmartVariant()){_.setSemanticDateRangeDefaultValue(n,o,h,e||{});this.oGlobalFilter.getSmartVariant().currentVariantSetModified(false)}i()}.bind(this));break;case"initial":Promise.resolve(this._processModifyStartupExtension()).then(function(a){this._addFieldsToSFBAdvancedArea(a);if(this.oGlobalFilter.isCurrentVariantStandard()&&t.bNavSelVarHasDefaultsOnly!==false&&this.oGlobalFilter.getSmartVariant()){_.setSemanticDateRangeDefaultValue(n,o,h,e||{});this.oGlobalFilter.getSmartVariant().currentVariantSetModified(false)}i()}.bind(this));break;default:break}}.bind(this))},_mergeDefaultWithSFBVariant:function(t,e){if(t.isEmpty()){return e}var a=new l;var i,r;[e,t].forEach(function(t){i=t.getSelectOptionsPropertyNames();i.forEach(function(e){a.removeSelectOption(e);if(!a.getParameter(e)){a.massAddSelectOption(e,t.getSelectOption(e))}});r=t.getParameterNames();r.forEach(function(e){a.removeParameter(e);if(!a.getSelectOption(e)){a.addParameter(e,t.getParameter(e))}})});return a},_setDisplayCurrency:function(t){var e=this.getGlobalFilter();if(!e){return}var a,i;var r=e.getAnalyticalParameters();if(r&&r.length>0){a=r.length;while(a--){if(r[a].name==="P_DisplayCurrency"||r[a].name==="DisplayCurrency"){i=r[a];break}}}if(!i){return}var s=e.getFilters([i.fieldName]);var n=s&&s[0]&&s[0].oValue1;if(n&&n!==" "){return}var o,h;if(i.name.indexOf("P_")===0){h=i.name;o=i.name.substr(2)}else{h="P_"+i.name;o=i.name}if(t&&!t.isEmpty()){var f;n=t.getParameter(o);if(!n||n===" "){n=t.getParameter(h)}if(!n||n===" "){f=t.getSelectOption(o);n=f&&f[0]&&f[0].Low}if(!n||n===" "){f=t.getSelectOption(h);n=f&&f[0]&&f[0].Low}}if(!n||n===" "){n=i.defaultPropertyValue}if(!n||n===" "){return}var u=new l;u.addParameter(i.name,n);var g=new d({selectionVariant:u.toJSONObject()});e.setUiState(g,{replace:false,strictMode:false})},_getCustomAppState:function(){var t={},e={};this.getCustomAppStateDataExtension(t);if(!V(t)){e[R]=t}var a;var i=true;var r=function(t,e){if(!(t instanceof y)){throw new Error("State must always be set with respect to a ControllerExtension")}if(!i){throw new Error("State must always be provided synchronously")}if(e){a=a||Object.create(null);var r=t.getMetadata().getNamespace();a[r]=e}};this.templateBaseExtension.provideExtensionAppStateData(r);i=false;if(a){e[x]=a}return e},onBeforeSFBVariantSave:function(){var t=this._getCustomAppState();var e=this.getGlobalFilter().getFilterData();var a,i=this.getGlobalFilter().getBasicSearchControl();if(i&&i.getValue){a=i.getValue()}e._CUSTOM=t[R];e._EXTENSION=t[x];this.getGlobalFilter().setFilterData(e,true);if(a){this.getGlobalFilter().getBasicSearchControl().setValue(a)}this.getGlobalFilter().fireFilterChange()},onAfterSFBVariantLoad:function(){var t=this.getGlobalFilter().getFilterData();var e=this.getUIModel().getProperty("/enableLiveFilter");if(e){this.getGlobalFilter().fireFilterChange()}if(t){this._restoreAppState(t)}},onAssignedFiltersChanged:function(t){if(t.getSource()&&this.getView().byId("ovpFilterText")){this.getView().byId("ovpFilterText").setText(t.getSource().retrieveFiltersWithValuesAsText())}},_CustomFilterField:function(t,e){for(var a in t){if(t.hasOwnProperty(a)){e[a]=t[a]}}},_getCurrentAppState:function(t){var e=this.getGlobalFilter();if(!e){return}var a={};var i=this._getCustomAppState();var r={_CUSTOM:i[R],_EXTENSION:i[x]};if(!t){if(r._CUSTOM){this._CustomFilterField(r._CUSTOM,a)}if(r._EXTENSION){var s=Object.keys(r._EXTENSION);if(s){this._CustomFilterField(r._EXTENSION[s],a)}}if(!V(a)){var n=this.getGlobalFilter().getFilterData();n._CUSTOM=a;this.getGlobalFilter().setFilterData(n,true)}}var o=e.getUiState({allFilters:false});var d=o&&o.getSelectionVariant();if(e.getSmartVariant().currentVariantGetModified()){d.SelectionVariantID=""}var h=d&&JSON.stringify(d);var f=new l(h);return{selectionVariant:f.toJSONString(),semanticDates:o.getSemanticDates(),customData:r}},_storeCurrentAppStateAndAdjustURL:function(t,e){if(this.getUIModel()&&this.getUIModel().getProperty("/bRTAActive")){return}if(t&&!t.oSource._bDirtyViaDialog){return}if(!this.bGlobalFilterLoaded){return}if(!this.oNavigationHandler){return}if(this.oAppStatePromise){this.rejectPreviousPromise&&this.rejectPreviousPromise("skip")}this.oAppStatePromise=new Promise(function(t,a){this.rejectPreviousPromise=a;var i=this._getCurrentAppState(e);var r=this.oNavigationHandler.storeInnerAppStateWithImmediateReturn(i,true);r.promise.then(function(e){t(e)},function(t){a(t.getErrorCode())})}.bind(this));var a=function(t){this.oAppStatePromise=null;if(t&&t.length>0){this.oNavigationHandler.replaceHash(t);return}throw"AppState key is empty"};var i=function(t){this.oAppStatePromise=null;if(t==="skip"){throw t}throw"Something went wrong while storing AppState - "+t};this.oAppStatePromise.then(a.bind(this),i.bind(this)).catch(function(t){if(t==="skip"){return}})},setTitle:function(t,e,a){var i="";if(t){i=t}else if(e){i=e}else{i=a}return i},onMacroFilterBarSearch:function(t){this._collapseHeaderForPage();if(this.fnMacroFilterBarLoaded!==undefined){this.fnMacroFilterBarLoaded();b.loadingState.GLOBALFILTERFILLED=true;this.getView().byId("ovpFilterNotFulfilledPage").setVisible(false);this.bGlobalFilterLoaded=true}this.bGoButtonPressed=true;var e=this.getLayout();if(e){e.setActive(true)}if(this.aErrorCards&&this.aErrorCards.length>0){this.destroyErrorCardsAndReplaceWithOriginal()}this._clearStoredEntities();if(t){this.aFilters=t.getParameter("filters")}var a="ovp-"+(new Date).getTime();for(var i in this.oCardsModels){if(this.oCardsModels.hasOwnProperty(i)&&!s.isODataV4(this.oCardsModels[i])){try{this.oCardsModels[i].refresh(false,false,a)}catch(t){T.warning(t)}}}this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/ManageCardsUtils", ["sap/ui/base/Object","sap/ui/model/json/JSONModel","sap/ui/fl/write/api/ControlPersonalizationWriteAPI","sap/ui/core/Fragment","sap/ovp/cards/PersonalizationUtils","sap/ovp/cards/CommonUtils"],function(a,e,r,t,i,s){"use strict";return a.extend("sap.ovp.app.ManageCardsUtils",{constructor:function(a){if(!a){throw new Error("Main Controller is required to initialize ManageCardsUtil")}},onManageCardsMenuButtonPress:function(){this.aManageCardsDialogModelState=[];var a=s.getApp();var d=this;var o={onManageCardOkButtonPressed:function(e){if(e.getParameters().reason==="Ok"){var r=a.byId("manageCardsSelectionPanel").getP13nData();var t=a.getUIModel().getProperty("/aOrderedCards");var s=[];var o=r.length;for(var n=0;n<o;n++){if(r[n].visible!==t[n].visible){s.push({changeType:"visibility",content:{cardId:r[n].id,visibility:r[n].visible},isUserDependent:true})}r[n].visibility=r[n].visible}a.createOrDestroyCards.apply(a,[d.aManageCardsDialogModelState,r,false]);a.getUIModel().setProperty("/aOrderedCards",r);a.updateDashboardLayoutCards(r);a.updateLayoutWithOrderedCards();i.savePersonalization(s,a.getView());for(var n=0;n<r.length;n++){var l=r[n];var g=a.aErrorCards.indexOf(l.id);if(g>-1&&l.visibility==false){a.aErrorCards.splice(g,1)}}document.querySelector(".sapFAvatar").focus()}var v=a.byId("manageCardsSelectionPanel");var p=a.byId("manageCardsDialog");if(v&&p){v.destroy();p.destroy()}},onManageCardResetButtonPressed:function(){var e=a.getLayout().getMetadata().getName();var t=a.getUIModel();var i=t.getProperty("/aOrderedCards");a.createOrDestroyCards.apply(a,[i,a.aManifestOrderedCards,e==="sap.ovp.ui.DashboardLayout"?true:false]);t.setProperty("/aOrderedCards",a.aManifestOrderedCards);a.resetDashboardLayout();a.updateDashboardLayoutCards(a.aManifestOrderedCards);a.updateLayoutWithOrderedCards();d.manageCardsDialog.getModel().setProperty("/cards",a.aManifestOrderedCards);var s=[];for(var o=0;o<i.length;o++){s.push(a.getView().byId(i[o].id))}var n=d.enhanceOrderedCardsForP13NDialog(i);var l=a.byId("manageCardsSelectionPanel");l.setP13nData(n);r.reset({selectors:s}).finally(function(){document.querySelector(".sapFAvatar").focus()})}};this.oManageCardsFragment=t.load({id:a.getView().getId(),name:"sap.ovp.app.ManageCard",controller:o}).then(function(r){d.manageCardsDialog=r;var t=a.getUIModel().getProperty("/aOrderedCards");var i=Object.assign([],t);d.aManageCardsDialogModelState=d.getManageCardsDialogModelState(t);var s=new e({cards:i});d.manageCardsDialog.setModel(s);a.getView().addDependent(d.manageCardsDialog);d.openManageCardsDialog(t)})},openManageCardsDialog:function(a){var e=s.getApp();var r=this.enhanceOrderedCardsForP13NDialog(a);var t=e.byId("manageCardsDialog");var i=e.byId("manageCardsSelectionPanel");i.setP13nData(r);t.open()},enhanceOrderedCardsForP13NDialog:function(a){var e=[];var r=s.getApp();a.forEach(function(a){e.push(a["id"])});var t=r._getCardsModel();var i=[];var d=r.getLayout().getMetadata().getName();if(d==="sap.ovp.ui.DashboardLayout"){var o=r._getCardArrayAsVariantFormatDashboard();o.forEach(function(a){var r=t.find(function(e){return e.id===a.id});if(e.indexOf(a.id)!=-1){i.push({id:a.id,visibility:a.visibility,visible:a.visibility,name:a.id,label:r.settings.title})}});a=i}else if(d==="sap.ovp.ui.EasyScanLayout"){var n=r.getLayout().getContent();var t=r._getCardsModel();n.forEach(function(a){var r=a.getId();var s=r.split("--").pop();var d=t.find(function(a){return a.id===s});if(e.indexOf(s)!=-1){i.push({id:s,visibility:a.getVisible(),visible:a.getVisible(),name:s,label:d.settings.title})}});a=i}this.aManageCardsDialogModelState=this.getManageCardsDialogModelState(a);r.getUIModel().setProperty("/aOrderedCards",a);this.manageCardsDialog.getModel().setProperty("/cards",a);return a},getManageCardsDialogModelState:function(a){var e=[];for(var r=0;r<a.length;r++){e.push({id:a[r].id,visibility:a[r].visibility})}return e}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/NavigationHelper", ["sap/fe/navigation/PresentationVariant","sap/ovp/cards/AnnotationHelper","sap/ovp/cards/CommonUtils","sap/ovp/cards/Integration/Helpers/Filters","sap/ovp/helpers/ODataAnnotationHelper","sap/ovp/cards/NavigationHelper"],function(t,e,a,r,i,n){"use strict";function o(t){if(t.startsWith("#")){t=t.slice(1)}var e=t.split("-");var a=e[0]||"";var r=e[1]?e[1].split("?")[0]:"";var i={};var n=e[1]?e[1].split("?")[1]:undefined;if(n){var o=n.split("&");for(var s=0;s<o.length;s++){var c=o[s];var l=c.split("=")[0];var v=c.split("=")[1];i[l]=v}}return{semanticObject:a,action:r,parameters:i}}function s(t){if(!t){return false}var e=t.getEntityType();var a=t.getCardPropertiesModel();if(e&&a){var r=a.getProperty("/identificationAnnotationPath");var o=i.getRecords(e,r,t.getView().getModel());var s=t.getModel();if(n.isNavigationInAnnotation(s,o)){return true}}var c=a&&a.getProperty("/template");var l=["sap.ovp.cards.table","sap.ovp.cards.list","sap.ovp.cards.v4.table","sap.ovp.cards.v4.list"];return l.indexOf(c)>-1&&n.checkLineItemNavigation(t.getModel(),t.getEntityType(),a)}function c(t,e){var a=t.getCardPropertiesModel();var r=n.getEntityNavigationEntries(null,t.getModel(),t.getEntityType(),a)||[];var i=r.length>0?r[0]:{};if(e.cardComponentName==="List"||e.cardComponentName==="Table"){var o=t.getCardItemsBinding(),s=o&&o.getAllCurrentContexts(),c=s&&s[0],v=n.getEntityNavigationEntries(c,t.getModel(),t.getEntityType(),a,a.getProperty("/annotationPath")),p=v.length>0?v[0]:{};var u={};var f={};if(i&&i.type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){f=l(t,i)}else if(i&&i.type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){f=g(t,i)}if(p&&p.type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){u=l(t,p)}else if(p&&p.type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){u=g(t,p)}if(u.semanticObject&&u.action&&f.semanticObject&&f.action){f["lineItemSemanticObject"]=u.semanticObject;f["lineItemAction"]=u.action}else if(u.semanticObject&&u.action){u["lineItemSemanticObject"]=u.semanticObject;u["lineItemAction"]=u.action;u.semanticObject="";u.action="";return u}return f}if(i&&i.type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return l(t,i)}if(i&&i.type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return g(t,i)}}function l(t,e){if(!sap.ushell.Container){return}var a=sap.ushell.Container.getService("URLParsing");if(!a.isIntentUrl(e.url)){return{type:"url",url:e.url}}else{var r=g(t,e);if(r.semanticObject){return r}else{var i=a.parseShellHash(e.url);return g(t,i)}}}function v(t){var e=u(t);var i=e&&e["sNavPresentationVariant"];if(i&&!a.isJSONData(i)){e["sNavPresentationVariant"]=r.removeExtraInfoVariant(i)}return e}function p(t){var e=[];for(var a=0;a<t.property.length;a++){if(t.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]&&t.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"].Bool){e.push(t.property[a].name)}}return e}function u(r){var i=r.getCardPropertiesModel(),n=i&&i.getProperty("/staticContent");var o,s;var c=r.getModel();var l=a.isODataV4(c);if(!n){var v=e.getCardSorters(r.getCardPropertiesModel(),l);var u=r.getEntityType();s=v&&new t(v);o=i&&i.getProperty("/staticParameters")}var g=p(u);return{sensitiveProperties:g,staticPropertyMap:o,sNavPresentationVariant:s?s.toJSONObject():null}}function g(t,e){return{type:"intent",semanticObject:e.semanticObject,action:e.action,staticParams:v(t)}}function f(t,e){if(t&&t.length){var r=a.isODataV4(e);for(var i=0;i<t.length;i++){var n=t[i];if(r&&n.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return true}else if(!r&&n.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return true}}}return false}function d(t,e,a){if(e&&t){var r=t.getProperty("/identificationAnnotationPath");var n=i.getRecords(e,r,a);return f(n,a)}return false}function m(t,e){if(e&&t){if(t.getProperty("/template")==="sap.ovp.cards.charts.analytical"){var a=t.getProperty("/kpiAnnotationPath");if(a){var r=e[a];if(r&&r.Detail){var i=r.Detail.SemanticObject&&r.Detail.SemanticObject.String;var n=r.Detail.Action&&r.Detail.Action.String;if(i&&n){return true}}}}}return false}function y(t,e,a){if(e&&t){var r=t.getProperty("/annotationPath");var n=i.getRecords(e,r,a);return f(n,a)}return false}return{getNavigationIntentFromAuthString:o,bCheckNavigationForCard:s,getNavigationParameters:c,checkLineItemNavigation:y,checkIdentificationAnnotationNavigation:d,checkKPIAnnotationNavigation:m}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Fiori Element logger which prefix Fiori Elements for the log along with component
 */
sap.ui.predefine("sap/ovp/app/OVPLogger", ["sap/ui/base/Object","sap/base/Log"],function(e,t){"use strict";var s="FioriElements: ";return e.extend("sap.ui.base.Log",{constructor:function(e){return t.getLogger(s+e)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/OVPUtils", ["sap/base/util/isPlainObject"],function(e){"use strict";var t={bCRTLPressed:false};t.constants={explace:"explace",inplace:"inplace"};t.Annotations={dataPoint:"dataPoint",title:"title",subTitle:"subtitle",valueSelectionInfo:"value Selection Info",listFlavor:"listFlavor"};t.Layers={vendor:"VENDOR",customer:"CUSTOMER",customer_base:"CUSTOMER_BASE"};t.loadingState={ERROR:"Error",LOADING:"Loading",GLOBALFILTERFILLED:false};t.merge=function(){var t,i,n,a,o,r,l=arguments[0]||{},s=1,f=arguments.length,u=false;if(typeof l==="boolean"){u=l;l=arguments[1]||{};s=2}if(typeof l!=="object"&&typeof l!=="function"){l={}}if(f===s){l=this;--s}for(;s<f;s++){if((t=arguments[s])==null){continue}for(i in t){n=l[i];a=t[i];if(l===a){continue}if(u&&a&&(e(a)||(o=Array.isArray(a)))){if(o){o=false;r=n&&Array.isArray(n)?n:[]}else{r=n&&e(n)?n:{}}l[i]=this.merge(u,r,a)}else if(a!==undefined){l[i]=a}}}return l};return t},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/ShareUtils", ["sap/ui/base/Object","sap/m/library","sap/m/MenuItem","sap/ui/core/Core","sap/ui/core/Fragment","sap/ui/core/CustomData","sap/base/util/ObjectPath","sap/ui/thirdparty/hasher","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/collaboration/ServiceContainer","sap/ui/performance/trace/FESRHelper"],function(e,t,r,o,a,i,n,s,l,c,u){"use strict";return e.extend("sap.ovp.app.ShareUtils",{constructor:function(e){if(!e){throw new Error("controller is undefined!")}this.oController=e},init:function(){this._createModelForTile();this._checkJamAuth()},onShareButtonAvailableAndPressed:function(e){var n=this.oController._getLibraryResourceBundle();var s=this.oController.getUIModel();var h=s&&s.getProperty("/title");var p=this;var m;var d={shareEmailPressed:function(){t.URLHelper.triggerEmail(null,n.getText("Email_Subject",[h]),document.URL)},shareMSTeamsPressed:function(){var e="";var t=s.getProperty("/subtitle");if(t&&t.length>0){e=s.getProperty("/appTitle")||"";t=h+" - "+t}else{t="";e=h}var r={url:document.URL,appTitle:e,subTitle:t,minifyUrlForChat:true};p.oSuiteCollaborationService.share(this.getCustomData()[0].getValue(),r)},shareJamPressed:function(){var e=o.createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:document.URL,share:h}}});e.open()},shareTilePressed:function(){m.firePress()}};if(this.oShareActionSheet){this.oShareActionSheet.destroy()}this.oSharePageFragment=a.load({name:"sap.ovp.app.SharePage",controller:d}).then(function(e){p.oController.getView().addDependent(e);return e});this.oSharePageFragment.then(function(t){p.oShareActionSheet=t;m=new l("",{customUrl:s.getProperty("/tileInfo").tileCustomURL(),title:h,tileIcon:s.getProperty("/icon")||"sap-icon://bookmark"});s.setProperty("/tileVisible",m.getEnabled());s.setProperty("/tileIcon",m.getIcon());s.setProperty("/tileText",m.getText());var o=2;if(!s.getProperty("/jamVisible")){o=1}c.getServiceAsync().then(function(t){p.oSuiteCollaborationService=t;var a=p.oSuiteCollaborationService.getOptions();if(Array.isArray(a)&&a.length>0){a.forEach(function(e){if(Array.isArray(e.subOptions)&&e.subOptions.length>1){var t=[];e.subOptions.forEach(function(e){var o=new r({text:e.text,icon:e.icon,press:d.shareMSTeamsPressed});o.addCustomData(new i({key:"data",value:e}));u.setSemanticStepname(o,"press",e.fesrStepName);t.push(o)});p.oShareActionSheet.insertItem(new r({text:e.text,icon:e.icon,items:t}),o)}else{var a=new r({text:e.text,icon:e.icon,press:d.shareMSTeamsPressed});a.addCustomData(new i({key:"data",value:e}));u.setSemanticStepname(a,"press",e.fesrStepName);p.oShareActionSheet.insertItem(a,o)}o++})}p.oShareActionSheet.openBy(e)})})},_checkJamAuth:function(){var e=n.get("sap.ushell.Container.getUser");var t=this.oController.getUIModel();if(t){t.setProperty("/jamVisible",!!e&&e().isJamActive())}},_createModelForTile:function(){var e=this.oController.getUIModel();var t,r=e&&e.getProperty("/title");var o={tileTitle:r,tileCustomURL:function(){t=s.getHash();return t?"#"+t:window.location.href}};if(e){e.setProperty("/tileInfo",o)}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/TemplateBaseExtension", ["sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution"],function(e,t){"use strict";return e.extend("sap.ovp.app.TemplateBaseExtension",{metadata:{methods:{provideExtensionAppStateData:{public:true,final:false,overrideExecution:t.After},restoreExtensionAppStateData:{public:true,final:false,overrideExecution:t.After},addFilters:{public:true,final:false,overrideExecution:t.After},provideStartupExtension:{public:true,final:false,overrideExecution:t.After},provideExtensionNavigation:{public:true,final:false,overrideExecution:t.After},provideCustomActionPress:{public:true,final:false,overrideExecution:t.After},provideCustomParameter:{public:true,final:false,overrideExecution:t.After}}},provideExtensionAppStateData:function(e){},restoreExtensionAppStateData:function(e){},addFilters:function(e){},provideStartupExtension:function(e){},provideExtensionNavigation:function(e,t,i){},provideCustomActionPress:function(e){},provideCustomParameter:function(e){}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileOverview This file handles the resource bundles for ovp framework.
 */
sap.ui.predefine("sap/ovp/app/resources", ["sap/ui/model/resource/ResourceModel","sap/ovp/app/OVPLogger","sap/ui/core/Core"],function(e,r,o){"use strict";var u={};u.oResourceBundle=null;u.oResourceModel=null;var n=new r("OVP.app.resources");u.pResourcePromise=o.getLibraryResourceBundle("sap.ovp",true).then(function(r){if(!r){return Promise.reject("Bundle creation failure")}u.oResourceBundle=r;u.oResourceModel=new e({bundleUrl:r.oUrlInfo.url,bundle:r});return Promise.resolve()},function(e){throw e});u.pResourcePromise.catch(function(e){n.error("sap.ovp resource library bundle error:"+e)});u.getText=function(e,r){if(r&&r.length>0){return this.oResourceBundle?this.oResourceBundle.getText(e,r):null}else{return this.oResourceBundle?this.oResourceBundle.getText(e):null}};u.getProperty=function(e){return this.oResourceModel?this.oResourceModel.getProperty(e):null};return u},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/ActionUtils", ["sap/ui/layout/form/SimpleForm","sap/ui/comp/smartfield/SmartField","sap/ui/comp/smartfield/SmartLabel","sap/ui/comp/library"],function(a,e,r,t){"use strict";var n=t.smartfield.JSONType;return{getActionInfo:function(a,e,r){var t=a.getModel().getMetaModel();var n=e.action.split("/")[1];var o=a.getObject();var i={oContext:a,sFunctionImportPath:e.action,sFunctionLabel:e.label,oFunctionImport:t.getODataFunctionImport(n),parameterData:{},allParameters:[]};var l;if(i.oFunctionImport.parameter){var s=this._getKeyProperties(r);for(var m=0;m<i.oFunctionImport.parameter.length;m++){var u=i.oFunctionImport.parameter[m];this._addParamLabel(u,r,t);if(s[u.name]){u.isKey=true}if(typeof u.nullable==="undefined"){u.nullable=true}if(o.hasOwnProperty(u.name)){l=o[u.name]}else{l=""}i.parameterData[u.name]=l;i.allParameters.push(u)}}return i},_getKeyProperties:function(a){var e={};if(a&&a.key&&a.key.propertyRef){for(var r=0;r<a.key.propertyRef.length;r++){var t=a.key.propertyRef[r].name;e[t]=true}}return e},_addParamLabel:function(a,e,r){if(e&&a&&!a["com.sap.vocabularies.Common.v1.Label"]){var t=r.getODataProperty(e,a.name,false);if(t&&t["com.sap.vocabularies.Common.v1.Label"]){a["com.sap.vocabularies.Common.v1.Label"]=t["com.sap.vocabularies.Common.v1.Label"]}else if(t&&t["sap:label"]){a["sap:label"]=t["sap:label"]}}},buildParametersForm:function(t,o){function i(a){var e="";if(a["com.sap.vocabularies.Common.v1.Label"]){e=a["com.sap.vocabularies.Common.v1.Label"].String}else if(a["sap:label"]){e=a["sap:label"]}else{e=a.name}return e}var l=new a({editable:true});var s=[];for(var m=0;m<t.allParameters.length;m++){var u=t.allParameters[m];var p=i(u);var v="{/"+u.name+"}";var f=null;var d=u.type;var c=u.maxLength?parseInt(u.maxLength,10):undefined;if(d==="Edm.Boolean"){f=n.Boolean}else if(d==="Edm.Byte"||d==="Edm.SByte"||d==="Edm.Int16"||d==="Edm.Int32"){f=n.Integer}else{f=n.String}var y=this._isMandatoryParameter(u);var b=new e({value:v,mandatory:y,jsontype:f,maxLength:c,editable:!u.isKey});b.attachChange(o);s.push(b);var g=new r;g.setRequired(y&&!u.isKey);g.setText(p);g.setLabelFor(b);l.addContent(g);l.addContent(b)}return l},getParameters:function(a,e){var r=this._validateParametersValue(a,e);return r.preparedParameterData},mandatoryParamsMissing:function(a,e){var r=this._validateParametersValue(a,e);return r.missingMandatoryParameters&&r.missingMandatoryParameters.length>0},_validateParametersValue:function(a,e){var r=[];var t=a.getObject("/");var n={};var o,i;for(var l=0;l<e.parameter.length;l++){var s=e.parameter[l];var m=s.name;if(t.hasOwnProperty(m)){o=t[m];i=this._isMandatoryParameter(s);if(o===undefined||o===""){if(i){if(s.type==="Edm.Boolean"){n[m]=false}else{r.push(s)}}}else{n[m]=o}}else{throw new Error("Unknown parameter: "+m)}}return{preparedParameterData:n,missingMandatoryParameters:r}},_isMandatoryParameter:function(a){return!this._toBoolean(a.nullable)},_toBoolean:function(a){if(typeof a==="string"){var e=a.toLowerCase();return!(e=="false"||e==""||e==" ")}return!!a}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Any function that needs to be exported(used outside this file) via namespace should be defined as
 * a function and then added to the return statement at the end of this file
 */
sap.ui.predefine("sap/ovp/cards/AnnotationHelper", ["sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/ovp/cards/CommonUtils","sap/ui/model/odata/AnnotationHelper","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/model/FilterOperator","sap/ui/Device","sap/ovp/app/resources","sap/base/strings/formatMessage","sap/base/util/isPlainObject","sap/base/util/each","sap/ovp/cards/MetadataAnalyser","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/base/util/isEmptyObject","sap/ui/comp/odata/type/FiscalDate","sap/ui/comp/odata/FiscalFormat","sap/ui/core/library","sap/ovp/cards/Constants","sap/ovp/helpers/V4/MetadataAnalyzer","sap/ovp/app/OVPUtils"],function(e,t,r,a,i,n,o,l,u,s,f,c,p,v,g,m,h,P,y,d,C){"use strict";var b={TEXT:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT:"com.sap.vocabularies.UI.v1.TextArrangement",UOM:"Org.OData.Measures.V1.Unit",ISO_CURRENCY:"Org.OData.Measures.V1.ISOCurrency"};var T={TEXT_LAST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast",TEXT_FIRST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst",TEXT_ONLY:"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly",TEXT_SEPARATE:"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"};var D=new v("OVP.cards.AnnotationHelper");function I(e,t){if(!t){return""}var r=Ze(e);if(t.Label){return r?t.Label:t.Label.String}var a=e.getSetting&&e.getSetting("ovpCardProperties");var i=a&&a.getProperty("/metaModel");var n=a&&a.getProperty("/entityType");if(!i||!n){return""}var o;if(t.Value){o=r?t.Value.$Path:t.Value.Path}if(t.Target){var l=r?"/"+w(n.$Type,t,e):w(n.$path,t,e);var u=l&&i.getProperty(l);o=r?u&&u.Value.$Path:u&&u.Value.Path}if(!o||!o.length>0||o===" "){return""}var s=r?i.getData()["$Annotations"][n.$Type+"/"+o]:i.getODataProperty(n,o);if(!s){return""}var f="";if(r){f=s["@com.sap.vocabularies.Common.v1.Label"]||""}else{f=s["sap:label"]||(s["com.sap.vocabularies.Common.v1.Label"]||"").String||""}return f}I.requiresIContext=true;function O(e){if(e.EdmType==="Edm.DateTime"||e.EdmType==="Edm.DateTimeOffset"){return"Right"}return"Left"}O.requiresContext=true;function V(e,t){if(e.getSetting){var r=e.getSetting("_ovpCache");if(r){return r[t]}}return undefined}function F(e,t,r){if(e.getSetting){var a=e.getSetting("_ovpCache");if(a){a[t]=r}}}function S(e,t,r){var a,i;if(t){a=t.None;i=r?e&&e.$EnumMember:e&&e.EnumMember;if(i){if(x(i,"Negative")){a=t.Negative}else if(x(i,"Critical")){a=t.Critical}else if(x(i,"Positive")){a=t.Positive}}}return a}function N(e){if(e=="Error"){e=1}else if(e=="Warning"){e=2}else if(e=="Success"){e=3}else{e=0}return e}function x(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}function E(t,r,a,i,n,o,l,u){if(typeof t=="string"&&u){t=e.getIntegerInstance().parse(t)}var s={};s.EnumMember="None";var f=Number.NEGATIVE_INFINITY;var c=Number.POSITIVE_INFINITY;if(!n&&n!==0&&(a||a===0)){n=a}if(!o&&o!==0&&(i||i===0)){o=i}if(!a&&a!==0){a=f}if(!i&&i!==0){i=c}if(t!==undefined){t=Number(t);if(x(r,"Minimize")||x(r,"Minimizing")){if((o||o===0)&&(i||i===0)){if(t<=parseFloat(o)){s.EnumMember="Positive"}else if(t>parseFloat(i)){s.EnumMember="Negative"}else{s.EnumMember="Critical"}}}else if(x(r,"Maximize")||x(r,"Maximizing")){if((n||n===0)&&(a||a===0)){if(t>=parseFloat(n)){s.EnumMember="Positive"}else if(t<parseFloat(a)){s.EnumMember="Negative"}else{s.EnumMember="Critical"}}}else if(x(r,"Target")){if((o||o===0)&&(i||i===0)&&(n||n===0)&&(a||a===0)){if(t>=parseFloat(n)&&t<=parseFloat(o)){s.EnumMember="Positive"}else if(t<parseFloat(a)||t>parseFloat(i)){s.EnumMember="Negative"}else{s.EnumMember="Critical"}}}}return S(s,l,false)}function A(t,r,a,i,n){if(n&&typeof t=="string"){t=e.getIntegerInstance().parse(t)}if(!t||!r){return}t=Number(t);if(!i&&t-r>=0){return"Up"}if(!a&&t-r<=0){return"Down"}if(r&&i&&t-r>=i){return"Up"}if(r&&a&&t-r<=a){return"Down"}}function R(e,t){var r=e.getPath(0)+"-DataFields-Sorted";var a=V(e,r);var i=Ze(e);if(!a){var n=M(e,t);var o=n.map(function(e){return i?e.Value.$Path:e.Value.Path});o=o.filter(function(e){return!!e});var l,u,s;a=t.filter(function(e){s=e&&e.Value||{};l=(i?s.$Path:s.Path)||"";u=(i?e.$Type:e.RecordType)||"";return u==="com.sap.vocabularies.UI.v1.DataField"&&o.indexOf(l)===-1});a=q(a,e);F(e,r,a)}return a}R.requiresIContext=true;function M(e,t,r){var a=e.getPath(0)+"-DataPoints-Sorted";var i=V(e,a);var n=Ze(e);if(!i){if(r){i=t.filter(function(e){return $(e,n)})}else{i=t.filter(function(e){return U(e,n)})}i=q(i,e);var o;for(var l=0;l<i.length;l++){o=e.getPath(0).substr(0,e.getPath(0).lastIndexOf("/")+1);i[l]=e.getModel(0).getProperty(w(o,i[l],e));o=""}F(e,a,i)}return i}M.requiresIContext=true;function U(e,t){var r=t?e&&e.$Type:e&&e.RecordType;var a=e&&e.Target||{};var i=(t?a.$AnnotationPath:a.AnnotationPath)||"";return r==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)}function $(e,t){var r=t?e&&e.$Type:e&&e.RecordType||"";var a=e&&e.Target||{};var i=(t?a.$AnnotationPath:a.AnnotationPath)||"";return r==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)||r==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.match(/@com.sap.vocabularies.Communication.v1.Contact.*/)}function _(e){if(!e||!e.Criticality||!e.Criticality.Path){return}return"{path:'"+e.Criticality.Path+"'}"}function w(e,t,r){var a=Ze(r);if(a){return e+t.Target.$AnnotationPath}if(e&&!x(e,"/")){e+="/"}return e+t.Target.AnnotationPath.slice(1)}function L(e,t){var r,a;var i=Ze(t);var n=i?e["@com.sap.vocabularies.UI.v1.Importance"]:e["com.sap.vocabularies.UI.v1.Importance"];if(n){r=i?n.$EnumMember:n.EnumMember;switch(r){case"com.sap.vocabularies.UI.v1.ImportanceType/High":a=1;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":a=2;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Low":a=3;break}}else{a=4}return a}function q(e,t){if(e.length<2){return e}var r=parseInt(e.length/2,10);var a=e.slice(0,r);var i=e.slice(r,e.length);return B(q(a,t),q(i,t),t)}function B(e,t,r){var a=[];while(e.length&&t.length){var i=L(e[0],r),n=L(t[0],r);if(i<=n){a.push(e.shift())}else{a.push(t.shift())}}while(e.length){a.push(e.shift())}while(t.length){a.push(t.shift())}return a}function H(e,t,r){var a=R(e,t)[r];if(a){return J(e,a)}return""}function j(e,t,r){var a=R(e,t)[r];return I(e,a)}function k(e,t,r){var a=t.filter(U);a=q(a,e);if(!a||!a.length||!a.length>0){return""}return I(e,a[0])}function Y(e,t,r,a){var i=M(e,t)[r];if(!i){return""}var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var l=n.getProperty("/metaModel");return z(e,i,o,l,a)}function X(e,t,r){var a=M(e,t)[r];return a&&a.Criticality?true:false}function G(e,t,r){var a=M(e,t)[r];var i=a.Criticality.Path;return"{path:'"+i+"'}"}function z(e,t,r,a,i){if(!t||!t.Value){return""}var n=e.getSetting("ovpCardProperties");var o=false;if(n){var l=n.getProperty("/ignoreSapText");o=l==undefined?o:l}var u=a.getODataProperty(r,t.Value.Path);var s=false;if(o==true){if(u&&(u["com.sap.vocabularies.Analytics.v1.Measure"]||u["sap:aggregation-role"]=="measure")){s=true}}if(!s&&u){var f;if(u[b.TEXT]){f=u[b.TEXT].String?u[b.TEXT].String:u[b.TEXT].Path}else if(u["sap:text"]){f=u["sap:text"]}if(f){u=a.getODataProperty(r,f);t={Value:{Path:u.name}}}}return J(e,t,i)}function J(e,t,r,i){if(t.Value.Apply){return a.format(e,t.Value)}var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var l=n.getProperty("/metaModel");return W(e,t,o,l,r,i)}J.requiresIContext=true;function K(e,t,r,i){if(!r||typeof i!=="string"){return i}var n=r[b.TEXT]||r["sap:text"];if(!n){return i}var o,l;o=r[b.TEXT_ARRANGEMENT];l=o&&o.EnumMember;if(!l){o=n&&n[b.TEXT_ARRANGEMENT];l=o&&o.EnumMember}if(!l){o=t&&t[b.TEXT_ARRANGEMENT];l=o&&o.EnumMember}var u;if(typeof n==="object"){u=a.format(e,n)}else{u=a.format(e,{Path:n})}if(!u||u===" "){return i}if(!l){return i+" ("+u+")"}var s;switch(l){case T.TEXT_FIRST:s=u+" ("+i+")";break;case T.TEXT_LAST:s=i+" ("+u+")";break;case T.TEXT_ONLY:s=u;break;case T.TEXT_SEPARATE:s=i+" ("+u+")";break;default:s=i;break}return s}function W(e,t,r,i,n,o,l){if(t.Value.Apply){return a.format(e,t.Value)}var u=t.Value.Path?t.Value.Path:t.Value.String;var s=i.getODataProperty(r,u),f="",c,p;var v=e.getSetting("ovpCardProperties");var g=v&&v.getProperty("/contentFragment");if(!o){if(t.Value.Path&&t.Value.Path.split("/").length>1){s=ae(i,r,t.Value.Path,e)}if(!s){return""}if(s["type"]==="Edm.DateTime"||s["type"]==="Edm.DateTimeOffset"){var m={relative:true,relativeScale:"auto"},h=v&&v.getProperty("/showDateInRelativeFormat");if(h!==undefined&&!h){m={style:"medium"}}c="sap.ovp.cards.AnnotationHelper.formatDate";p={dateFormat:m,bUTC:s["type"]==="Edm.DateTime"?true:false,functionName:c};f=Z([t.Value.Path?t.Value.Path:s.name],c,p)}else if(t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits||s["scale"]){var P=t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits?t.ValueFormat.NumberOfFractionalDigits.Int:0,y;var d=t.ValueFormat&&t.ValueFormat.ScaleFactor&&t.ValueFormat.ScaleFactor.Decimal;if(s[b.ISO_CURRENCY]){y=s[b.ISO_CURRENCY].Path?s[b.ISO_CURRENCY].Path:s[b.ISO_CURRENCY].String}else if(s[b.UOM]){y=s[b.UOM].Path?s[b.UOM].Path:s[b.UOM].String}else if(s["sap:unit"]){y=s["sap:unit"]}var C=y?i.getODataProperty(r,y):null,T=[t.Value.Path?t.Value.Path:s.name];if(P>2){P=2}p={numberOfFractionalDigits:P,scaleFactor:d};if(s[b.ISO_CURRENCY]){var D=s[b.ISO_CURRENCY];if(D.Path){c="sap.ovp.cards.AnnotationHelper.formatCurrency";T.push(D.Path)}else if(D.String){p.currencyString=D.String;c="sap.ovp.cards.AnnotationHelper.formatCurrency"}}else if(C&&(C[b.ISO_CURRENCY]||C["sap:semantics"]==="currency-code")){c="sap.ovp.cards.AnnotationHelper.formatCurrency";T.push(y)}else{c="sap.ovp.cards.AnnotationHelper.formatNumberCalculation"}p.functionName=c;f=Z(T,c,p)}else{if(l){f=a.simplePath(e,t.Value)}else{var I=a.format(e.getModel()?e:e.getInterface(0),t.Value);var O=I.split(",");var V=[];if(O.length>1){for(var F=0;F<O.length;F++){if(O[F].indexOf("path:")>=0||O[F].indexOf("type:")>=0){V.push(O[F])}}if(V.length>0){f=f+V.join(",");if(f.substring(f.length-1)!=="}"){f=f+"}"}}}else{f=I}}}if(g){f=K(e,r,s,f)}if(s&&s[b.UOM]){var S=s[b.UOM];if(S.Path){f+=" "+Z([S.Path]);f+=" "+Q(S.Path,i,r,e)}else if(S.String){if(S.String!=="%"){f+=" "}f+=S.String}}}if(!n){if(s[b.ISO_CURRENCY]){var D=s[b.ISO_CURRENCY];if(D){if(D.Path){f+=" "+Z([D.Path]);f+=" "+Q(D.Path,i,r,e)}else if(D.String){f+=" "+D.String}}}}if(f[0]===" "){f=f.substring(1)}return f}function Q(e,t,r,a){if(e){var i,n,o;var l=Ze(a);if(e.split("/").length>1){i=ae(t,r,e,a);n=ge(t,r,e,a)}else{i=l?Yt(t,r,e):t.getODataProperty(r,e)}if(i){o=l?i["@"+b.TEXT]&&i["@"+b.TEXT].$Path:i[b.TEXT]&&i[b.TEXT].Path||i["sap:text"]}if(o&&n){o=n+"/"+o}if(o){return" ({"+o+"})"}return""}}function Z(e,t,r,a){var i="",n=e.length;if(n>1||r){i="{parts:[";for(var o=0;o<n;o++){if(a){i+="{path: '"+e[o]+"',type:'sap.ui.model.odata.type.String'}"+(o===n-1&&!r?"]":", ")}else{i+="{path: '"+e[o]+"'}"+(o===n-1&&!r?"]":", ")}}if(r){var l="{value:"+JSON.stringify(r)+", model: 'ovpCardProperties'}";i+=l+"]"}}else{i="{path: '"+e[0]+"'"}i+=(t?", formatter: '"+t+"'":"")+"}";return i}function ee(){var t=arguments[arguments.length-1],r=arguments[0];var a=e.getFloatInstance({style:"short",showMeasure:false,shortRefNumber:t.scaleFactor,minFractionDigits:t.numberOfFractionalDigits,maxFractionDigits:t.numberOfFractionalDigits});if(typeof r=="string"&&t.bODataV4){r=e.getIntegerInstance().parse(r)}return a.format(Number(r))}function te(){var e=arguments[arguments.length-1],r=arguments[0];var a=t.getInstance(e.dateFormat);if(!r){r="";return r}return a.format(new Date(r),e.bUTC)}function re(){var t=arguments[arguments.length-1],r=Number(arguments[0]),a=arguments[1];var i="";var n=e.getCurrencyInstance({style:"short",showMeasure:false,shortRefNumber:t.scaleFactor,minFractionDigits:t.numberOfFractionalDigits,maxFractionDigits:t.numberOfFractionalDigits});if(typeof r=="string"&&t.bODataV4){r=e.getIntegerInstance().parse(r)}if(a){i=n.format(r,a)}else{i=t.currencyString?n.format(r,t.currencyString):n.format(r)}return i}function ae(e,t,r,a){var i=r.split("/");var n=Ze(a);if(i.length>1){if(n){for(var o=0;o<i.length-1;o++){t=e.getProperty("/"+t.$Type)[i[o]]}return Yt(e,t,i[i.length-1])}else{for(var o=0;o<i.length-1;o++){var l=e.getODataAssociationEnd(t,i[o]);if(l){t=e.getODataEntityType(l.type)}}return e.getODataProperty(t,i[i.length-1])}}}function ie(e,t,r){var a=M(e,t);var i=y.Criticality.StateValues;var n=a[r];if(!n){return i.None}if(n.Criticality){return ue(e,n,i)}return fe(e,n,i)}function ne(e,t,r){var a=M(e,t);if(a&&a.length){var i=a[0];if(i&&(i.Criticality||i.CriticalityCalculation)){return true}}return false}function oe(e,t,r){if(ne(e,t,r)){return""}return"sapUiChartPaletteQualitativeHue1"}oe.requiresIContext=true;function le(e,t,r){var a=M(e,t),i=y.Criticality.ColorValues;var n=i.None;if(a.length>r){var o=a[r];if(o&&o.Criticality){n=ue(e,o,i)}else{n=fe(e,o,i)}}return n}function ue(e,t,r){var n=r.None;var o;var l=t.Criticality;var s=Ze(e);if(l){o="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+r.Negative+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Critical'') || ({0} === ''2'') || ({0} === 2) ? ''"+r.Critical+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+r.Positive+"'' : "+"''"+r.None+"'' '}'";if(l.Path&&!s){var f="$"+a.simplePath(e,l);n=u(o,f)}else if(s&&l.$Path){var f="$"+i.format(l,{context:e});n=u(o,f)}else if(l.EnumMember||l.$EnumMember){var c=s?l.$EnumMember:l.EnumMember;var p="'"+c+"'";n=u(o,p)}else{D.warning("Case not supported, returning the default Neutral state")}}else{D.warning("Case not supported, returning the default Neutral state")}return n}function se(e,t,r){var a=M(e,t);var i="None";if(a.length>r){var n=a[r];if(n&&n.Criticality&&n.Criticality.Path){i=G(e,t,r)}else{i=fe(e,n,y.Criticality.StateValues);i=N(i)}}return i}function fe(e,t,r,a){var i=Ze(e);var n=r.None;var o=t&&t.Value||{};var l=i?o.$Path:o.Path;if(t.Criticality){n=S(t.Criticality,r,i)}else if(t.CriticalityCalculation&&l){n=ce(e,t,r,a)}return n}function ce(e,t,r,a){var i=Ze(e);var n=xe(t.Value,i,a);var o=i?t.CriticalityCalculation.ImprovementDirection.$EnumMember:t.CriticalityCalculation.ImprovementDirection.EnumMember;var l=xe(t.CriticalityCalculation.DeviationRangeLowValue,i,a);var u=xe(t.CriticalityCalculation.DeviationRangeHighValue,i,a);var s=xe(t.CriticalityCalculation.ToleranceRangeLowValue,i,a);var f=xe(t.CriticalityCalculation.ToleranceRangeHighValue,i,a);var c=ve(l);var p=ve(u);var v=ve(s);var g=ve(f);var m="sap.ovp.cards.AnnotationHelper.formatColor";var h={deviationLow:l,deviationHigh:u,toleranceLow:s,toleranceHigh:f,bIsDeviationLowBinding:c,bIsDeviationHighBinding:p,bIsToleranceLowBinding:v,bIsToleranceHighBinding:g,sImprovementDirection:o,oCriticalityConfigValues:r,functionName:m,bODataV4:i};var P="{value:"+JSON.stringify(h)+", model: 'ovpCardProperties'}";var y="parts: ["+n;y+=c?","+l:"";y+=p?","+u:"";y+=v?","+s:"";y+=g?","+f:"";y+=","+P;y+="]";return"{"+y+", formatter: '"+m+"'}"}function pe(){var e=arguments[arguments.length-1];var t=1;if(e&&e.bODataV4){return E(arguments[0],e.sImprovementDirection,e.bIsDeviationLowBinding?parseFloat(arguments[t++].split(",").join("")):e.deviationLow,e.bIsDeviationHighBinding?parseFloat(arguments[t++].split(",").join("")):e.deviationHigh,e.bIsToleranceLowBinding?parseFloat(arguments[t++].split(",").join("")):e.toleranceLow,e.bIsToleranceHighBinding?parseFloat(arguments[t++].split(",").join("")):e.toleranceHigh,e.oCriticalityConfigValues,e.bODataV4)}return E(arguments[0],e.sImprovementDirection,e.bIsDeviationLowBinding?arguments[t++]:e.deviationLow,e.bIsDeviationHighBinding?arguments[t++]:e.deviationHigh,e.bIsToleranceLowBinding?arguments[t++]:e.toleranceLow,e.bIsToleranceHighBinding?arguments[t++]:e.toleranceHigh,e.oCriticalityConfigValues,e.bODataV4)}function ve(e){return typeof e==="string"&&e.charAt(0)==="{"}function ge(e,t,r,a){var i="";var n=r.split("/");var o=Ze(a);if(n.length>1){if(o){n.pop();i=n.join("/")}else{for(var l=0;l<n.length-1;l++){var u=e.getODataAssociationEnd(t,n[l]);if(u){t=e.getODataEntityType(u.type);if(i){i=i+"/"}i=i+n[l]}else{return i}}}}return i}function me(e){var t;if(e&&typeof e.getData==="function"){var r=e.getData();if(r.tabs){var a=0;var i=r.selectedKey;if(i&&r.tabs.length>=i){a=i-1}t=r.tabs[a].mFilterPreference}else{t=r.mFilterPreference}}return!!t}function he(e,t){var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/addODataSelect");var i=r.getProperty("/metaModel");var n=i.getODataEntityType(t.entityType);var o=n[r.getProperty("/selectionAnnotationPath")];var l=n[r.getProperty("/presentationAnnotationPath")];var u="/"+t.name;var s=Array.prototype.slice.call(arguments,2);var f=e.getSetting("ovpCardProperties"),p=f.getProperty("/parameters");var v=Ze(e);if(o||!!p){if(o&&o.Parameters&&o.Parameters.length>0||!!p){u=c.resolveParameterizedEntitySet(e.getSetting("dataModel"),t,o,p)}}if(r.getProperty("/cardLayout")&&r.getProperty("/cardLayout/noOfItems")){var g="{path: '"+u+"', length: "+ +r.getProperty("/cardLayout/noOfItems")}else{var g="{path: '"+u+"', length: "+Ee(r)}var m=[];if(a){m=ye(e,i,n,s);var h=r.getProperty("/template");if(h!="sap.ovp.cards.charts.analytical"&&h!="sap.ovp.cards.charts.smart.chart"){var P=be(l);for(var y=0;y<P.length;y++){if(m.indexOf(P[y])===-1){m.push(P[y])}}}}var d=Pe(i,n,s,e);var C=me(r);var b=false;if(C||m.length>0||d.length>0){g=g+", parameters: {"}if(m.length>0||d.length>0){if(m.length>0){g=g+"select: '"+m.join(",")+"'";b=true}if(d.length>0){if(m.length>0){g=g+", "}g=g+"expand: '"+d.join(",")+"'";b=true}if(C){g=g+", "}}if(C){g=g+"custom: {cardId: '"+r.getProperty("/cardId")+"'"+", _requestFrom: 'ovp_internal'}";b=false}else if(!g.includes(", parameters: {")){g=g+", parameters: {custom: {_requestFrom: 'ovp_internal'}}";b=false}else if(b){g=g+", custom: {_requestFrom: 'ovp_internal'}"}if(C||m.length>0||d.length>0){g=g+"}"}var T=Ce(r,l,v);if(T.length>0){g=g+", sorter:"+JSON.stringify(T)}var D=Ve(r,o);if(D.length>0){g=g+", filters:"+JSON.stringify(D)}g=g+"}";return g}he.requiresIContext=true;function Pe(e,t,r,a){var i=[];var n,o,l,u;for(var s=0;s<r.length;s++){if(!r[s]){continue}n=t.$path+"/"+r[s];o=e.createBindingContext(n);l=o.getObject();l=l?l:[];for(var f=0;f<l.length;f++){if(l[f].Value&&l[f].Value.Path){u=ge(e,t,l[f].Value.Path,a);if(u&&i.indexOf(u)===-1){i.push(u)}var c=e.getODataProperty(t,l[f].Value.Path);if(c){var p;if(c[b.UOM]){p=c[b.UOM].Path}else if(c[b.ISO_CURRENCY]){p=c[b.ISO_CURRENCY].Path}else if(c[b.TEXT]){p=c[b.TEXT].Path}if(p&&p.split("/").length>1){u=ge(e,t,p,a);if(u&&i.indexOf(u)===-1){i.push(u)}}else{var v=e.getODataProperty(t,p);if(v){var g=v[b.TEXT]&&v[b.TEXT].Path;if(g&&g.split("/").length>1){u=ge(e,t,g,a);if(u&&i.indexOf(u)===-1){i.push(u)}}}}}}}}return i}function ye(e,t,i,n){var o=[];var l,u,f;for(var c=0;c<n.length;c++){if(!n[c]){continue}l=i.$path+"/"+n[c];u=t.createBindingContext(l);var v={};if(e&&e.bDummyContext){p(v,e,u,true)}else{v=e}f=u.getObject();if(!f){f=[]}else if(s(f)){if(f.Data){f=f.Data}else{f=[]}}var g;var m;var h;var P;for(var y=0;y<f.length;y++){m=[];g=f[y];h="";P=g.RecordType;if(P==="com.sap.vocabularies.UI.v1.DataField"){h=W(v,g,i,t,undefined,undefined,true)}else if(P==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var d=w(i.$path,g,e);h=z(v,t.getProperty(d),i,t);var C=_(t.getProperty(d));if(C&&C.length>0){h+=C}}else if(P==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&g.Url){var b;if(!g.Url.UrlRef){b=a.format(v,g.Url)}if(b&&b.substring(0,2)==="{="){h=b}}if(h){var T=a.simplePath(v,g.Value);if(h.indexOf("(")<0&&h!==T){h=[].concat(T,h).join(" ")}m=de(h)}if(m&&m.length>0){var D;for(var I=0;I<m.length;I++){D=m[I];if(!o[D]){o[D]=true;var O=r.getUnitColumn(D,i);if(O&&O!==D){o[O]=true}var V=jt(t,i,D,e);if(V&&V!==D){o[V]=true}}}}}}return Object.keys(o)}function de(e){var t,r=0,a=e.length,i="",n;for(t=0;t<a;t++){n=e.charAt(t);if(!n){return}switch(n){case"{":r++;break;case"}":r--;break;default:if(r<=0){continue}break}i+=n}e=i;var o=/\${([a-zA-Z0-9\_|\/]*)/g;var l=/[^[{]*[a-zA-Z0-9\_]/g;var u=/path *\: *\'([a-zA-Z0-9\_]+)*\'/g;var s,f,c=[];if(e.indexOf("{parts:[")!==-1){e=e.replace("{parts:[","");e=e.replace("]","");e=e.replace(e.lastIndexOf("}",""))}if(e.substring(0,2)==="{="){s=o;f=1}else if(e.indexOf("path")!==-1){if(e.indexOf("{value")>0){var p=0;var t=e.indexOf("{value")+5;var v;while(t<a){if(e[t]==="}"&&p===0){v=t;break}if(e[t]==="{"){p+=1}if(e[t]==="}"){p-=1}t++}e=e.slice(0,e.indexOf("{value"))+e.slice(v)}if(e.indexOf("constraints:{")!==-1){var p=0;var t=e.indexOf("constraints:{")+12;var v;while(t<a){if(e[t]==="{"){p+=1}if(e[t]==="}"){p-=1;if(p===0){v=t;break}}t++}e=e.slice(0,e.indexOf("constraints:{")-1)+e.slice(v+1)}var g=l.exec(e);while(g){if(g[0].indexOf("path")===-1&&g[0].indexOf("@i18n")!==0&&g[0].indexOf("model: 'ovpCardProperties'")<=-1){c.push(g[0])}g=l.exec(e)}s=u;f=1}else{s=l;f=0}var m=s.exec(e);while(m){if(m[f]&&m[f].indexOf("@i18n")!==0){c.push(m[f])}m=s.exec(e)}return c}function Ce(e,t,r){var a=[];var i,n;var o=e.getProperty("/sortBy");if(o){var l=e.getProperty("/sortOrder");if(l&&l.toLowerCase()!=="descending"){n=false}else{n=true}i={path:o,descending:n};a.push(i)}var u=t&&t.SortOrder||undefined;var s,o;if(u){for(var f=0;f<u.length;f++){s=u[f];o=r?s.Property.$PropertyPath:s.Property.PropertyPath;n=Fe(s.Descending,true);i={path:o,descending:n};a.push(i)}}return a}function be(e){var t=[];var r=e&&e.RequestAtLeast||undefined;if(r){for(var a=0;a<r.length;a++){if(r[a].PropertyPath){t.push(r[a].PropertyPath)}}}return t}function Te(e,t){var r=e.getProperty("/entityType");var a=r[e.getProperty("/selectionAnnotationPath")];return{filters:Ve(e,a,t),parameters:Ie(a,t)}}function De(e,t){if(!e){return}var r=e.getProperty("/entityType");var a=r[e.getProperty("/presentationAnnotationPath")];var i=Ce(e,a,t);var n=[];var o,l=i.length;for(o=0;o<l;o++){if(!i[o].path){continue}n.push({Property:i[o].path,Descending:i[o].descending})}if(n.length>0){return{SortOrder:n}}}function Ie(e,t){var r,a=[];if(!e||!e.Parameters){return a}var i=e.Parameters.length;for(var n=0;n<i;n++){r=e.Parameters[n];if(!r.PropertyName||!r.PropertyName.PropertyPath){continue}if(!r.PropertyValue){D.error("Missing value for parameter "+r.PropertyName.PropertyPath);continue}a[a.length]={path:r.PropertyName.PropertyPath,value:Ne(r.PropertyValue,t)}}return a}function Oe(e){var t={},r=[],a=false,i=["NE","NotContains","NotStartsWith","NotEndsWith"],n={},o=[],l={};e.forEach(function(e){t[e.path]=t[e.path]+1||1});e.forEach(function(u){if(t[u.path]>1){r=e.filter(function(e){return e&&e.path===u.path});a=r.some(function(e){return i.indexOf(e.operator)>-1&&e.sign==="I"});if(a&&!l[u.path]){n={filters:r,and:true};o.push(n);l[u.path]=true}else if(!l[u.path]){o.push(u)}}else{o.push(u)}});return o}function Ve(e,t,r){var a=[];var i=e.getProperty("/filters");if(i){a=a.concat(i)}var o=t&&t.SelectOptions;var l,u,s;if(o){for(var f=0;f<o.length;f++){l=o[f];u=r?l.PropertyName.$PropertyPath:l.PropertyName.PropertyPath;for(var c=0;c<l.Ranges.length;c++){s=l.Ranges[c];var p=r?s.Sign.$EnumMember:s.Sign.EnumMember;var v=r?s.Option.$EnumMember:s.Option.EnumMember;if(p){var g={path:u,operator:v.split("/")[1],value1:Ne(s.Low,r),value2:Ne(s.High,r),sign:p==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(g.sign==="E"&&g.operator!==n.EQ){D.error("Exclude sign is supported only with EQ operator");continue}if(g.sign==="E"&&g.operator===n.EQ){g.operator=n.NE;g.sign="I"}if(g.operator==="CP"&&g.sign==="I"){var m=n.Contains;var h=g.value1;if(h){var P=h.indexOf("*");var y=h.lastIndexOf("*");if(P>-1){if(P===0&&y!==h.length-1){m=n.EndsWith;h=h.substring(1,h.length)}else if(P!==0&&y===h.length-1){m=n.StartsWith;h=h.substring(0,h.length-1)}else{h=h.substring(1,h.length-1)}}}g.operator=m;g.value1=h}a.push(g)}}}}a=Oe(a);return a}function Fe(e,t){if(e&&e.Boolean){if(e.Boolean.toLowerCase()==="true"){return true}else if(e.Boolean.toLowerCase()==="false"){return false}}else if(e&&e.Bool){if(e.Bool.toLowerCase()==="true"){return true}else if(e.Bool.toLowerCase()==="false"){return false}}return t}function Se(e,t){var r;if(e){if(e.String){r=Number(e.String)}else if(e.Int){r=Number(e.Int)}else if(e.Decimal){r=Number(e.Decimal)}else if(t&&e.$Decimal){r=Number(e.$Decimal)}else if(e.Double){r=Number(e.Double)}else if(e.Single){r=Number(e.Single)}else if(t&&typeof e==="number"){return e}}return r}function Ne(e,t){var r;if(e){if(e.String||e.String===""){r=e.String}else if(t&&typeof e=="string"){r=e}else if(e.Boolean||e.Bool){r=Fe(e)}else if(e.DateTime){r=e.DateTime}else if(e.DateTimeOffset){r=e.DateTimeOffset}else{r=Se(e,t)}}return r}function xe(e,t,r){if(e){var a=t?e.$Path:e.Path;if(a){return r?"{path:'"+a+"Agg"+"', type:'sap.ui.model.odata.type.Decimal'}":"{path:'"+a+"'}"}else{return Ne(e,t)}}else{return""}}function Ee(e){var t=e.getProperty("/contentFragment");var r=e.getProperty("/listType");var a=e.getProperty("/listFlavor");var i;var n="desktop";if(o.system.phone){n="phone"}else if(o.system.tablet){n="tablet"}if(t=="sap.ovp.cards.list.List"){if(r=="extended"){if(a=="bar"){i=y.ItemLength["List_extended_bar"]}else{i=y.ItemLength["List_extended"]}}else if(a=="bar"){i=y.ItemLength["List_condensed_bar"]}else{i=y.ItemLength["List_condensed"]}}else if(t=="sap.ovp.cards.table.Table"){i=y.ItemLength["Table"]}else if(t=="sap.ovp.cards.stack.Stack"){if(e.getProperty("/objectStreamCardsNavigationProperty")){i=y.ItemLength["Stack_complex"]}else{i=y.ItemLength["Stack_simple"]}}if(i){return i[n]}return 5}function Ae(e){var t=e.getObject();var r=M(e,t,true);var a,i;var n=Ze(e);var o,l;var u=r.map(function(e){a=e&&e.Value;i=e&&e.fn;if(a&&(a.Path||a.$Path)){return n?a.$Path:a.Path}else if(i&&(i.Path||i.$Path)){return n?i.$Path:i.Path}});t.filter(function(e,r){o=n?e.$Type:e.RecordType;l=n?e.Value&&e.Value.$Path:e.Value&&e.Value.Path;if(o==="com.sap.vocabularies.UI.v1.DataField"&&u.indexOf(l)>-1){t.splice(r,1)}});if(n){return e.sPath}}Ae.requiresIContext=true;function Re(e,t){var r=M(e,t);return r.length}Re.requiresIContext=true;function Me(e,t){return Ue(e,t,0)}Me.requiresIContext=true;function Ue(e,t,r){var a=M(e,t),i=a[r],n=i&&i.Value,o=Ze(e),l=o?n&&n.$Path:n&&n.Path;return l||""}function $e(e,t){return j(e,t,0)}$e.requiresIContext=true;function _e(e,t){return j(e,t,1)}_e.requiresIContext=true;function we(e,t){return j(e,t,2)}we.requiresIContext=true;function Le(e,t,r){return H(e,t,r)}Le.requiresIContext=true;function qe(e,t,r){return Y(e,t,r)}qe.requiresIContext=true;function Be(e,t,r,a){var i=Re(e,t);if(i>0){return qe(e,t,r)}else{return Le(e,t,a)}}Be.requiresIContext=true;function He(e,t,r){return nt(e,t,r)}He.requiresIContext=true;function je(e,t){return k(e,t,0)}je.requiresIContext=true;function ke(e,t){var r=Ze(e);var n;for(var o=0;o<t.length;o++){var l=t[o];n=r?l.$Type:l.RecordType;if(n==="com.sap.vocabularies.UI.v1.DataField"){if(l.IconUrl&&l.IconUrl.String){return l.IconUrl.String}if(r&&l.IconUrl&&l.IconUrl.$Path){return i.format(l.IconUrl,{context:e})}if(!r&&l.IconUrl&&l.IconUrl.Path){return a.simplePath(e,l.IconUrl)}}}}ke.requiresIContext=true;function Ye(e,t,r){var a="";var i;if(Array.isArray(t)){i=M(e,t)[r]}else{var n=Object.assign({},t);var o=Object.assign({},e);i=at(o,n)}if(!i||!i.Value){return a}var l=e.getSetting("ovpCardProperties");var u=l&&l.getProperty("/entityType");var s=l&&l.getProperty("/metaModel");var f=Ze(e);var c=f?s&&s.getData()["$Annotations"][u.$Type+"/"+i.Value.$Path]:s&&s.getODataProperty(u,i.Value.Path);var p=f?c&&c["@"+b.ISO_CURRENCY]:c&&c[b.ISO_CURRENCY];if(p&&!f){if(p.Path){a+=" "+Z([p.Path]);a+=" "+Q(p.Path,s,u,e)}else if(p.String){a+=" "+p.String}}else if(p&&f){if(p.$Path){a+=" "+Z([p.$Path])}else{a+=" "+p}a+=" "+Q(p.$Path,s,u,e)}return a}Ye.requiresIContext=true;function Xe(e,t,r,a){return Y(e,t,r,a)}Xe.requiresIContext=true;function Ge(e,t){return ie(e,t,0)}Ge.requiresIContext=true;function ze(e,t){return le(e,t,0)}ze.requiresIContext=true;function Je(e,t){return ie(e,t,1)}Je.requiresIContext=true;function Ke(e,t){return ie(e,t,2)}Ke.requiresIContext=true;function We(e,t){return se(e,t,0)}We.requiresIContext=true;function Qe(e){var t={};t.EnumMember="None";if(Number(e)===1){t.EnumMember="Negative"}else if(Number(e)===2){t.EnumMember="Critical"}else if(Number(e)===3){t.EnumMember="Positive"}return S(t,y.Criticality.ColorValues,false)}function Ze(e){var t=e&&typeof e.getModel==="function"&&e.getModel(0)&&e.getModel(0).oModel;return t&&r.isODataV4(t)||false}function et(e,t){var r=Ze(e),a=t&&t.Criticality||{},i=r?a.$Path:a.Path;if(i&&r){return"{parts: [{path:'"+i+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.kpiValueCriticality'}"}else if(i&&!r){return"{parts: [{path:'"+t.Criticality.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.kpiValueCriticality'}"}else{return fe(e,t,y.Criticality.ColorValues,r)}}et.requiresIContext=true;function tt(e,t){return X(e,t,0)}tt.requiresIContext=true;function rt(e,t){var r=M(e,t)[0];return r&&(r.Criticality||r.CriticalityCalculation)?true:false}rt.requiresIContext=true;function at(e,t){var r=e.getPath(0);var a=r.slice(0,r.lastIndexOf("/"));a=a.slice(0,a.lastIndexOf("/"));var i=w(a,t,e);t=e.getModel(0).getProperty(i);return t}function it(e,t){if(!t){return""}return J(e,t)}it.requiresIContext=true;function nt(e,t,r,n){var o;var l=Ze(e);var u=n==undefined?r:R(e,r)[n];var s=e.getSetting("ovpCardProperties");var f=s.getProperty("/metaModel");var c=l?t.$Type:f.getODataEntityType(t.entityType);var p=l?f.getData()["$Annotations"][c+"/"+u.Value.$Path]:c.property;if(p&&l){o=p["@com.sap.vocabularies.Common.v1.SemanticObject"];if(o){return i.format(o,e.getModel()?{context:e}:{context:e.getInterface(0)})}else{return""}}if(p&&!l){for(var v=0;v<p.length;v++){if(u.Value.Path===p[v].name){o=p[v]["com.sap.vocabularies.Common.v1.SemanticObject"];if(o){return a.format(e,o)}else{return""}}}}}function ot(e,t,r){var a=Ze(e);var i=t&&t.Value;var n=t&&t[r]&&t[r].Value;var o=a?i&&i.$Path:i&&i.Path;var l=a?n&&n.$Path:n&&n.Path;var u=r===undefined?o:l;var s=u.indexOf("/")!=-1?u.split("/")[0]:"";return s}ot.requiresIContext=true;function lt(e,t){var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/metaModel");var i=Ze(e);var n=i?a.getData()["$Annotations"][t.$Type]:a.getODataEntityType(t.entityType);var o="com.sap.vocabularies.Communication.v1.Contact";if(i){o="@"+o}return n&&n[o]?true:false}lt.requiresIContext=true;function ut(e,t,r){if(!t){return""}var a=e.getSetting("ovpCardProperties");var i=a.getProperty("/entityType");var n=a.getProperty("/metaModel");var o=Object.assign({},t);var l=Object.assign({},e);t=at(l,o);return z(e,t,i,n,r)}ut.requiresIContext=true;function st(e,t){var r=Object.assign({},t);var a=Object.assign({},e);var i="None",n=y.Criticality.StateValues;t=at(a,r);if(t&&t.Criticality){i=ue(e,t,n)}else{i=fe(e,t,n)}return i}st.requiresIContext=true;function ft(e,t){var r=Object.assign({},t);var a=Object.assign({},e);t=at(a,r);if(t&&t.Criticality){return true}}ft.requiresIContext=true;function ct(e,t){var r=Object.assign({},t);var a=Object.assign({},e);var i=e.getSetting("ovpCardProperties");var n=i.getProperty("/entityType");var o=i.getProperty("/metaModel");var l=Ze(e);t=at(a,r);if(!t){return}var u=l?o.getProperty("/"+n.$Type)[t.Value.$Path]:o.getODataProperty(n,t.Value.Path);var s=l?u&&u.$Type:u&&u.type;if(t&&s=="Edm.String"&&(t.Criticality||t.CriticalityCalculation)){return"Center"}if(u&&(s=="Edm.DateTime"||s=="Edm.DateTimeOffset")){return"Right"}}ct.requiresIContext=true;function pt(e,t){var r=Object.assign({},t);var a=Object.assign({},e);t=at(a,r);var i="None";if(t&&t.Criticality&&t.Criticality.Path){i="{path:'"+t.Criticality.Path+"'}"}else{i=fe(e,t,y.Criticality.StateValues);i=N(i)}return i}pt.requiresIContext=true;function vt(e,t){var r;var a=Ze(e);var i;for(var n=0;n<t.length;n++){r=t[n];i=a?r.$Type:r.RecordType;if(i==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||i==="com.sap.vocabularies.UI.v1.DataFieldForAction"||i==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return true}}return false}vt.requiresIContext=true;function gt(e,t){var r=M(e,t)[0];var a=Ze(e);var i=r&&r.Value;var n=a?i&&i.$Path:i&&i.Path;if(n){var o=e.getPath(0).substr(0,e.getPath(0).lastIndexOf("/")+1);var l=e.getModel(0);var u;if(!a){u=l.getProperty(o)}var s=a?l.getData(n):l.getODataProperty(u,n);var f=o.substr(1,o.length-2);if(s&&s[b.UOM]&&!a){return s[b.UOM].String==="%"}if(a&&s&&s[f][r.Value.$Path][b.UOM]){return s[b.UOM].String==="%"}}return false}gt.requiresIContext=true;function mt(e){var t=e.getObject();var r=e.getModel();var a=r.getProperty("/metaModel");var i=a.getODataEntitySet(r.getProperty("/entitySet"));var n=a.getODataEntityType(i.entityType);t=n.$path+"/"+t;return a.createBindingContext(t)}function ht(e,t,r){var a=e.getServiceMetadata().dataServices.schema[0].association;for(var i=0;i<a.length;i++){if(r+"."+a[i].name===t){return a[i]}}}function Pt(e,t,r){var a=Ze(e);var i=t.filter(function(e){return a?e.$Type==="com.sap.vocabularies.UI.v1.DataField":e.RecordType==="com.sap.vocabularies.UI.v1.DataField"});var n=q(i,e);if(n){return n[r]}return}function yt(e,t,r){if(!r||!r.length||r.length===0){return false}r=Pt(e,r,0);return nt(e,t,r)}yt.requiresIContext=true;function dt(e,t,r){if(!r||!r.length||r.length===0){return false}r=Pt(e,r,1);return nt(e,t,r)}dt.requiresIContext=true;function Ct(e,t,r){var a=Ze(e);var i,n,o;var l=t.filter(function(e){i=a?e.$Type:e.RecordType;o=e&&e.Target||{};n=a?o.$AnnotationPath:o.AnnotationPath||"";return i==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&n.indexOf("@com.sap.vocabularies.Communication.v1.Contact")!==-1});var u=q(l,e);if(u){return u[r]}return}function bt(e,t){if(!t||!t.length||t.length===0){return false}var r=Ct(e,t,0);if(r){return true}return false}bt.requiresIContext=true;function Tt(e,t,a,i){var n,o,l;if(a&&a.Value&&a.Value.Path){n=a.Value.Path}else if(a&&a.Description&&a.Description.Value&&a.Description.Value.Path){n=a.Description.Value.Path}if(a&&a.Description&&a.Description.Path){o=a.Description.Path}else if(a&&a.Title&&a.Title.Path){l=a.Title.Path}var u="";var s=i&&i.Parameters;var f="";var p=e.getSetting("ovpCardProperties"),v=p.getProperty("/parameters");s=s||!!v;if(s){var g=e.getSetting("dataModel");var m=c.resolveParameterizedEntitySet(g,t,i,v);u+="{path: '"+m+"'"}else{u+="{path: '/"+t.name+"'"}u+=", length: 1";var h=e.getSetting("ovpCardProperties");var P=h.getProperty("/entityType");var y=r.getUnitColumn(n,P);var d=Ve(h,i);if(d.length>0){f+=", filters: "+JSON.stringify(d)}var C=[];C.push(n);if(o){C.push(o)}else if(l){C.push(l)}if(a&&a.Criticality&&a.Criticality.Path){C.push(a.Criticality.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.DeviationRangeLowValue&&a.CriticalityCalculation.DeviationRangeLowValue.Path){C.push(a.CriticalityCalculation.DeviationRangeLowValue.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.ToleranceRangeLowValue&&a.CriticalityCalculation.ToleranceRangeLowValue.Path){C.push(a.CriticalityCalculation.ToleranceRangeLowValue.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.DeviationRangeHighValue&&a.CriticalityCalculation.DeviationRangeHighValue.Path){C.push(a.CriticalityCalculation.DeviationRangeHighValue.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.ToleranceRangeHighValue&&a.CriticalityCalculation.ToleranceRangeHighValue.Path){C.push(a.CriticalityCalculation.ToleranceRangeHighValue.Path)}if(y){C.push(y)}if(a&&a.TrendCalculation&&a.TrendCalculation.ReferenceValue&&a.TrendCalculation.ReferenceValue.Path){C.push(a.TrendCalculation.ReferenceValue.Path)}var b=me(p);var T=b?", custom: {cardId: '"+p.getProperty("/cardId")+"', _requestFrom: 'ovp_internal'}":", custom: {_requestFrom: 'ovp_internal'}";return u+", parameters:{select:'"+C.join(",")+"'"+T+"}"+f+"}"}Tt.requiresIContext=true;function Dt(e,t){if(!t||!t.Value){return""}var r=Ze(e);var a=r?t.Value.$Path:t.Value.Path;if(!a){return""}var i=e.getSetting("ovpCardProperties");var n=i.getProperty("/entityType");var o=i.getProperty("/metaModel");var l=r?Yt(o,n,a):o.getODataProperty(n,a);var u=t&&t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits;var s=u&&u.Int;if(l[b.UOM]){var f=l[b.UOM];if(f.String=="%"){i.oData.percentageAvailable=true}}if(u&&r){i.oData.NumberOfFractionalDigits=u}else if(!r&&s){i.oData.NumberOfFractionalDigits=s}var c={NumberOfFractionalDigits:i.oData.NumberOfFractionalDigits||0,percentageAvailable:i.oData.percentageAvailable||false};var p="sap.ovp.cards.AnnotationHelper.KpiValueFormatter";var v=r?a+"Agg":a;var g=[v];return Z(g,p,c,r)}Dt.requiresIContext=true;function It(){var t=arguments[arguments.length-1],r=arguments[0];var a=e.getFloatInstance({minFractionDigits:t.NumberOfFractionalDigits,maxFractionDigits:t.NumberOfFractionalDigits,style:"short",showScale:true,shortRefNumber:r});if(t.percentageAvailable){return a.format(Number(r))+" %"}else{return a.format(Number(r))}}function Ot(e,t){if(!t||!t.Value||!t.Value.Path&&!t.Value.$Path||!t.TrendCalculation){return""}var r=Ze(e);var a=xe(t.Value,r,r);var i=xe(t.TrendCalculation.ReferenceValue,r,r);var n=xe(t.TrendCalculation.DownDifference,r,r);var o=xe(t.TrendCalculation.UpDifference,r,r);var l=ve(i);var u=ve(n);var s=ve(o);var f={referenceValue:i,downDifference:n,upDifference:o,bIsRefValBinding:l,bIsDownDiffBinding:u,bIsUpDiffBinding:s,bODataV4:r};var c="{value:"+JSON.stringify(f)+", model: 'ovpCardProperties'}";var p="parts: ["+a;p+=l?","+i:"";p+=u?","+n:"";p+=s?","+o:"";p+=","+c;p+="]";var v="sap.ovp.cards.AnnotationHelper.formatTrendIcon";return"{"+p+", formatter: '"+v+"'}"}Ot.requiresIContext=true;function Vt(){var e=arguments[arguments.length-1];var t=1;return A(arguments[0],e.bIsRefValBinding?arguments[t++]:e.referenceValue,e.bIsDownDiffBinding?arguments[t++]:e.downDifference,e.bIsUpDiffBinding?arguments[t++]:e.upDifference,e.bODataV4)}function Ft(e,t){if(!t||!t.TrendCalculation||!t.TrendCalculation.ReferenceValue){return""}var r=Ze(e);var a=e.getSetting("ovpCardProperties");var i=t&&t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits;if(r&&i){a.oData.NumberOfFractionalDigits=i}else if(!r&&i&&i.Int){a.oData.NumberOfFractionalDigits=i.Int}if(t.TrendCalculation.ReferenceValue.Path&&!r){return"{parts: [{path:'"+t.Value.Path+"'}, {path:'"+t.TrendCalculation.ReferenceValue.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnPercentageChange'}"}if(t.TrendCalculation.ReferenceValue.$Path&&r){return"{parts: [{path:'"+t.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}, {path:'"+t.TrendCalculation.ReferenceValue.$Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnPercentageChange'}"}if(r){return"{parts: [{path:'"+t.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnPercentageChange'}"}else{return"{parts: [{path:'"+t.Value.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnPercentageChange'}"}}Ft.requiresIContext=true;function St(t,r){var a,i,n,o,l=false;if(typeof t=="string"){t=e.getIntegerInstance().parse(t)}if(isNaN(+t)){return""}o=t==0?r:t;i=this.getModel("ovpCardProperties");if(i.getProperty("/iNumberOfFractionalDigits")){n=+i.getProperty("/iNumberOfFractionalDigits")}if(i.getProperty("/bPercentageAvailableForTarget")){l=true}if(r){a=r}else{if(i.getProperty("/sManifestTargetValue")){a=i.getProperty("/sManifestTargetValue")}}if(!n||n<0){n=0}else if(n>2){n=2}if(a){var u=e.getFloatInstance({minFractionDigits:n,maxFractionDigits:n,style:"short",showScale:true,shortRefNumber:o});if(l){return u.format(+a)+" %"}else{return u.format(+a)}}}function Nt(e,t){if(!t||!t.TrendCalculation||!t.TrendCalculation.ReferenceValue){return""}if(!t||!t.Value||!t.Value.Path&&!t.Value.$Path){return""}var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/entityType");var i=r.getProperty("/metaModel");var n=Ze(e);var o=t&&t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits;var l=o&&o.Int;if(l&&!n){r.setProperty("/iNumberOfFractionalDigits",l)}else if(n&&o){r.setProperty("/iNumberOfFractionalDigits",o)}if(t.TrendCalculation.ReferenceValue&&!n){if(t.TrendCalculation.ReferenceValue.String){r.setProperty("/sManifestTargetValue",t.TrendCalculation.ReferenceValue.String);return"{parts: [{path:'"+t.Value.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.TargetValueFormatter'}"}if(t.TrendCalculation.ReferenceValue.Path){var u=i.getODataProperty(a,t.TrendCalculation.ReferenceValue.Path);if(u[b.UOM]){var s=u[b.UOM];if(s.String=="%"){r.setProperty("/bPercentageAvailableForTarget",true)}}return"{parts: [{path:'"+t.Value.Path+"'},{path:'"+t.TrendCalculation.ReferenceValue.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.TargetValueFormatter'}"}}else if(n&&t.TrendCalculation.ReferenceValue){if(t.TrendCalculation.ReferenceValue.$Path){var u=Yt(i,a,t.TrendCalculation.ReferenceValue.$Path);if(u[b.UOM]){var s=u[b.UOM];if(s.String=="%"){r.setProperty("/bPercentageAvailableForTarget",true)}}return"{parts: [{path:'"+t.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'},{path:'"+t.TrendCalculation.ReferenceValue.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.AnnotationHelper.TargetValueFormatter'}"}if(t.TrendCalculation.ReferenceValue){r.setProperty("/sManifestTargetValue",t.TrendCalculation.ReferenceValue);return"{parts: [{path:'"+t.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.AnnotationHelper.TargetValueFormatter'}"}}}Nt.requiresIContext=true;function xt(t,r){var a,i,n;if(typeof t=="string"){t=e.getIntegerInstance().parse(t)}if(isNaN(+t)){return""}t=+t;n=this.getModel("ovpCardProperties");if(n.getProperty("/iNumberOfFractionalDigits")){a=+n.getProperty("/iNumberOfFractionalDigits")}if(r){i=+r}else{if(n.getProperty("/sManifestTargetValue")){i=+n.getProperty("/sManifestTargetValue")}}if(!a||a<0){a=0}else if(a>2){a=2}if(i){var o=(t-i)/i;var l=e.getPercentInstance({style:"short",minFractionDigits:a,maxFractionDigits:a,showScale:true});return l.format(o)}}function Et(e,t){var r=Ze(e);if(t&&t.GroupBy&&!g(t.GroupBy)){return r?t.GroupBy[0].hasOwnProperty("$PropertyPath"):t.GroupBy[0].hasOwnProperty("PropertyPath")}return false}Et.requiresIContext=true;function At(e,t){var r;for(var a=0;e&&a<e.length;a++){if(e[a].value==t){r=e[a];break}}return r?r.name:null}function Rt(e,t){return At(e,t)}function Mt(e,t){var r=At(e,t);return r?r:l.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION")}function Ut(e,t){var r="";var a=t&&t.GroupBy;if(!a){return r}var i=Ze(e);var n=e.getSetting("ovpCardProperties").getProperty("/metaModel");var o=e.getSetting("ovpCardProperties").getProperty("/entityType");var u;if(t.GroupBy.constructor===Array){u=t.GroupBy}else if(!t.GroupBy.Collection){return r}else{u=t.GroupBy.Collection}var s;var c;f(u,function(){c=i?this.$PropertyPath:this.PropertyPath;s=Ht(n,o,c,e);if(!s){return}r+=s;r+=", "});if(r[r.length-1]===" "&&r[r.length-2]===","){r=r.substring(0,r.length-2)}return r==""?"":l.getText("By",[r])}Ut.requiresIContext=true;function $t(e,t,r){var a=true;var i=Ze(e);var n=r["SelectOptions"].length-1;if(t.PropertyName.PropertyPath===r["SelectOptions"][n].PropertyName.PropertyPath){a=false}t=[t];var o=e.getSetting("ovpCardProperties");var l=o.getProperty("/entityType");var u=o.getProperty("/metaModel");var s=Ve(o,t,i);if(s.length==0){return""}var f;var c;f=s[0].path;c=jt(u,l,f,e);if(c!==f){return""}var p=u.getODataProperty(l,t[0].PropertyName.PropertyPath)["type"];var v=qt(s,p);if(a===true){return v+", "}return v}$t.requiresIContext=true;function _t(e,t,r){var a=!(t.index===r.length-1);var i=e.getSetting("ovpCardProperties");var n=i.getProperty("/metaModel");var o=i.getProperty("/entityType");var l=n.getODataProperty(o,r[t.index].path)["type"];var u=qt([r[t.index]],l);if(a===true){return u+", "}return u}_t.requiresIContext=true;function wt(e){return e.id}function Lt(e){return e.id}function qt(e,t){var r=[];for(var a=0;a<e.length;a++){r.push(Bt(e[a],t))}return r.join(", ")}function Bt(e,r){var a=false;var i,n=t.getInstance({style:"medium"});if(r==="Edm.DateTime"){i=n.format(new Date(e.value1))}else if(r==="Edm.DateTimeOffset"){i=n.format(new Date(e.value1),true)}else{i=e.value1}if(e.operator[0]==="N"){a=true}if(e.value2){if(r==="Edm.DateTime"){i+=" - "+n.format(new Date(e.value1))}else if(r==="Edm.DateTimeOffset"){i+=" - "+n.format(new Date(e.value1),true)}else{i+=" - "+e.value1}}if(a){i=l.getText("kpiHeader_Filter_NotOperator",[i])}return i}function Ht(e,t,r,a){return kt(e,t,r,"com.sap.vocabularies.Common.v1.Label",a)}function jt(e,t,r,a){return kt(e,t,r,"sap:text",a)}function kt(e,t,r,a,i){var n=Ze(i);var o;if(n){o={};o[r]=Yt(e,t,r)}else{o=e.getODataProperty(t,r)}if(!o){D.error("No Property Found for with Name '"+r+" For Entity-Type '"+t.name+"'");return}if(n){if(o[r].annotations){var l=o[r].annotations["@"+a]}if(l){return l}return Object.keys(o)[0]}else{var l=o[a];if(l){if(a==="com.sap.vocabularies.Common.v1.Label"){return l.String}return l}return o.name}}function Yt(e,t,r){var a=e.getData().$Annotations[t.$Type+"/"+r];var i=d.getEntitySetName(e,t.$Type);var n=e.getObject("/"+i+"/"+r);var o=C.merge(true,{},a,n);return o}function Xt(e,t){var r=Ze(e);var a=e.getSetting("ovpCardProperties");if(!t||!t.Value||!t.Value.Path&&!t.Value.$Path){return""}var i={NumberOfFractionalDigits:a.oData.NumberOfFractionalDigits||0,percentageAvailable:a.oData.percentageAvailable||false};var n="sap.ovp.cards.AnnotationHelper.KpiValueFormatter";var o=r?t.Value.$Path:t.Value.Path;var l=[o];return Z(l,n,i)}Xt.requiresIContext=true;function Gt(e,t){return t&&t.hasOwnProperty(e)}function zt(e,t){var r;if(t[e].customDateRangeImplementation){return t[e].customDateRangeImplementation}else if(t[e].filter){r={module:"sap.ui.comp.config.condition.DateRangeType",operations:{filter:t[e].filter}};return JSON.stringify(r)}else if(t[e].selectedValues){r={module:"sap.ui.comp.config.condition.DateRangeType",operations:{filter:[{path:"key",contains:t[e].selectedValues,exclude:t[e].exclude}]}};return JSON.stringify(r)}else if(t[e].defaultValue){r={module:"sap.ui.comp.config.condition.DateRangeType"};return JSON.stringify(r)}}function Jt(e){if(e){return undefined}return"_BASIC"}function Kt(e,t){if(t==="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"){var r=e.substring(0,4);var a=e.substring(4);while(a.length<3){a="0"+a}var i=m.oDateFormats[t];var n={UTC:false,style:"medium"};var o=h.getDateInstance(Object.assign({format:i,calendarType:P.CalendarType.Gregorian},n));var l=o.getPattern();if(l==="PPP/YYYY"){return a+"/"+r}else if(l==="PPP.YYYY"){return a+"."+r}else{return a+r}}else{return e}}return{getFormattedFiscalData:Kt,getGroupID:Jt,getConditionTypeForDateProperties:zt,isDateRangeType:Gt,TextArrangementType:T,getLabelForDataItem:I,setAlignmentForDataPoint:O,colorPaletteForComparisonMicroChart:oe,formatField:J,checkFilterPreference:me,formatItems:he,getCardSelections:Te,getCardSorters:De,getFilters:Ve,getPrimitiveValue:Ne,getAnnotationLabel:Rt,getApplicationName:Mt,removeDuplicateDataField:Ae,getDataPointsCount:Re,getFirstDataPointValue:Me,getFirstDataFieldName:$e,getSecondDataFieldName:_e,getRequestFields:be,getThirdDataFieldName:we,formatDataFieldValueOnIndex:Le,formatDataPointValueOnIndex:qe,formatDataPointOrField:Be,formatsemanticObjectOfDataFieldGeneric:He,getLabelForFirstDataPoint:je,formatImageUrl:ke,formatUnit:Ye,formatObjectNumber:Xe,formatFirstDataPointState:Ge,formatFirstDataPointColor:ze,formatSecondDataPointState:Je,formatThirdDataPointState:Ke,formatFirstDataPointStateForSmartField:We,formatKPIHeaderState:et,isFirstDataPointCriticality:tt,isFirstDataPointCriticalityForTableStatus:rt,getSortedDataFields:R,getSortedDataPoints:M,formatDataFieldValueGeneric:it,formatDataPointValue:ut,formatDataPointStateGeneric:st,checkCriticalityGeneric:ft,checkCriticalityGenericForTableStatus:ct,formatDataPointStateForSmartFieldGeneric:pt,hasActions:vt,isFirstDataPointPercentageUnit:gt,resolveEntityTypePath:mt,getAssociationObject:ht,semanticObjectOfFirstDataField:yt,semanticObjectOfSecondDataField:dt,isFirstContactAnnotation:bt,getAggregateNumber:Tt,KpiValueFormatter:It,kpiValueCriticality:Qe,formThePathForAggregateNumber:Dt,formThePathForTrendIcon:Ot,formPathForPercentageChange:Ft,TargetValueFormatter:St,formPathForTargetValue:Nt,returnPercentageChange:xt,isPresentationVarientPresent:Et,listGroupBy:Ut,formTheFilterByString:$t,formTheFilterByStringNotFromSelVar:_t,formTheIdForFilter:wt,formTheIdForFilterNotFromSelVar:Lt,_criticality2state:S,_calculateCriticalityState:E,_calculateTrendDirection:A,_getPropertiesFromBindingString:de,sortCollectionByImportance:q,checkNavTargetForContactAnno:ot,checkForContactAnnotation:lt,getKPIHeaderAggregateNumber:Xt,formatColor:pe,formatTrendIcon:Vt,formatNumberCalculation:ee,formatCurrency:re,formatDate:te,getSapTextPathForUOM:Q,getPathOrPrimitiveValue:xe,getSorters:Ce,_getItemsLength:Ee,isODataV4Context:Ze,_generatePathForField:Z,_getNavigationSuffix:ae,_getNavigationPrefix:ge,_getEntityTypeForODataV4Model:Yt,_formatValueFromTarget:at}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/AppSettingsUtils", ["sap/m/Dialog","sap/m/Button","sap/ui/model/json/JSONModel","sap/ui/core/mvc/ViewType","sap/ovp/app/resources","sap/base/util/merge","sap/ui/core/mvc/XMLView","sap/ui/core/Core"],function(e,t,o,i,a,n,s,l){"use strict";var r={dialogBox:undefined,oSaveButton:undefined,oResetButton:undefined,oOvpResourceBundle:l.getLibraryResourceBundle("sap.ovp"),getDialogBox:function(l){return new Promise(function(r,d){var u,g,p,c;if(!this.dialogBox){this.oSaveButton=new t({text:a&&a.getText("save"),type:"Emphasized"});var h=new t({text:a&&a.getText("cancelBtn")});this.oResetButton=new t({text:a&&a.getText("resetButton")});this.dialogBox=new e({title:a&&a.getText("settingsDialogTitle"),buttons:[this.oSaveButton,h,this.oResetButton],afterClose:function(e){this.dialogBox.destroyContent()}.bind(this)});this.dialogBox.addStyleClass("sapOvpSettingsDialogBox");this.dialogBox.setBusyIndicatorDelay(0);h.attachPress(function(e){this.dialogBox.close()}.bind(this))}if(l.getParent()){u=l.getParent().getModel("ui").getData();g=n({},u);var B=l.getModel(g.globalFilterModel),y=B.getMetaModel(),v=y.getODataEntityContainer().entitySet;g["allEntityTypes"]=[];for(var x=0;v&&x<v.length;x++){var f=v[x].entityType;g["allEntityTypes"].push({name:y.getODataEntityType(f).name})}if(g.globalFilterEntityType){g.showGlobalFilters=true}else{g.showGlobalFilters=false}if(!g.containerLayout){g.containerLayout="fixed"}c=new o(g);p=new s("appSettingsView",{viewName:"sap.ovp.cards.rta.AppSettingsDialog",type:i.XML});p.setModel(c);var w=this.oOvpResourceBundle?a.oResourceModel:null;p.setModel(w,"ovpResourceModel");this.dialogBox.addContent(p);p.loaded().then(function(e){r(this.dialogBox)}.bind(this))}}.bind(this))}};return r},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/CommonUtils", ["sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/Device","sap/base/util/UriParameters","sap/base/util/each","sap/ui/model/json/JSONModel","sap/ovp/app/OVPLogger"],function(e,t,r,a,n,s){"use strict";var i=new s("OVP.cards.CommonUtils");return{app:undefined,navigationHandler:undefined,supportedCardTypes:["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.v4.linklist","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"],ovpConstantModel:new n({dontIncludeUOM:true,firstDataPointIndex:0,secondDataPointIndex:1,thirdDataPointIndex:2,fourthDataPointIndex:3,fifthDataPointIndex:4,sixthDataPointIndex:5,firstDataFieldIndex:0,secondDataFieldIndex:1,thirdDataFieldIndex:2,fourthDataFieldIndex:3,fifthDataFieldIndex:4,sixthDataFieldIndex:5}),deviceModel:new n(t).setDefaultBindingMode("OneWay"),checkIfCardTypeSupported:function(e){return this.supportedCardTypes.indexOf(e)!==-1},enable:function(e,t){this.app=e;this.navigationHandler=t},getApp:function(){return this.app},getNavigationHandler:function(){return this.navigationHandler},createKeyForCB:function(e,t){return e.indexOf(t)+1},createCardComponent:function(t,r,a,n,s){return e.createCardComponent(t,r,a,n,s)},_getLayer:function(){var e=r.fromURL(window.location.href);return e.get("sap-ui-layer")},getQueryParameterValue:function(e){var t=r.fromURL(window.location.href);return t.get(e)},_getLayerNamespace:function(){var e=this._getLayer();if(!e){return"customer"}return e.toLowerCase()},getUnitColumn:function(e,t,r){var a,n=t.property;var s,i;var o="Org.OData.Measures.V1.ISOCurrency";var u="Org.OData.Measures.V1.Unit";for(var c=0,p=n.length;c<p;c++){if(n[c].name!==e){continue}if(n[c].hasOwnProperty(o)){s=n[c][o].Path;i=n[c][o].String;if(s){return s}else{return r?i:""}}if(n[c].hasOwnProperty(u)){s=n[c].hasOwnProperty(u).Path;i=n[c][u].String;if(s){a=s}else{a=r?i:""}if(a&&a!="%"){return a}else{return null}}if(n[c].hasOwnProperty("sap:unit")){return n[c]["sap:unit"]}break}return null},getUnitColumnForODataV4:function(e,t,r,a){var n,s;var i="@Org.OData.Measures.V1.ISOCurrency";var o=t.getObject("/"+r+"/"+e+"@");if(o&&o[i]){n=o[i].$Path;s=o[i].$String;if(n){return n}else{return a?s:""}}return null},onHeaderClicked:function(){},onContentClicked:function(e){},getContentDensityClass:function(){if(this._sContentDensityClass===undefined){if(document.body.classList.contains("sapUiSizeCozy")||document.body.classList.contains("sapUiSizeCompact")){if(document.body.classList.contains("sapUiSizeCozy")===true){this._sContentDensityClass="sapUiSizeCozy"}else if(document.body.classList.contains("sapUiSizeCompact")===true){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass=""}}else if(!t.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}}return this._sContentDensityClass},_setCardpropertyDensityAttribute:function(){var e=this.getContentDensityClass();if(e==="sapUiSizeCompact"){return"compact"}else if(e==="sapUiSizeCozy"){return"cozy"}else if(!t.support.touch){return"compact"}else{return"cozy"}},getPixelPerRem:function(){var e=parseFloat(getComputedStyle(document.documentElement).fontSize);return e},showODataErrorMessages:function(e){var t=[],r,n,s="";if(e&&e.responseText){var o=e.responseText;if(o){try{n=JSON.parse(o)}catch(e){i.error("Failed parsing response as JSON: "+o)}if(n&&n.error){r=n.error}}}if(r&&r.innererror&&r.innererror.errordetails){t=r.innererror.errordetails}if(r&&r.message&&Array.isArray(t)){t.unshift({message:r.message.value,severity:"error"})}if(t&&t.length>0){var u={};a(t,function(e,t){var r=t.message;if(r.endsWith(".")){r=r.substr(0,r.length-1)}if(!u[r]){u[r]=true;s=s+r+" "}})}return s},isODataV4:function(e){return e&&e.getODataVersion&&e.getODataVersion()=="4.0"||false},isJSONData:function(e){try{if(JSON.parse(e)){return true}}catch(e){return false}},isDate:function(e){if((e["type"]==="Edm.DateTime"&&e["sap:display-format"]==="Date"||e["type"]==="Edm.String"&&e["com.sap.vocabularies.Common.v1.IsCalendarDate"]&&e["com.sap.vocabularies.Common.v1.IsCalendarDate"].Bool==="true")&&(e["sap:filter-restriction"]==="interval"||e["sap:filter-restriction"]==="single-value"||e["_filterRestriction"]==="single-value")){return true}return false},updatePropertyValueForObject:function(e,t,r){if(e&&t&&r){if(r==="unitOfMeasurement"){e["unitOfMeasurement"]="{"+t+"}"}else if(Array.isArray(t)&&t.length){e[r]=t}else if(!Array.isArray(t)){e[r]=t}}},removePrefixAndReturnLocalId:function(e){if(e.indexOf("---")>-1){return e.split("---")[1]}return e}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Constants", [],function(){"use strict";return{ItemLength:{List_condensed:{phone:5,tablet:5,desktop:5},List_extended:{phone:3,tablet:3,desktop:3},List_condensed_bar:{phone:5,tablet:5,desktop:5},List_extended_bar:{phone:3,tablet:3,desktop:3},Table:{phone:5,tablet:5,desktop:5},Stack_simple:{phone:20,tablet:20,desktop:20},Stack_complex:{phone:5,tablet:5,desktop:5}},Criticality:{StateValues:{None:"None",Negative:"Error",Critical:"Warning",Positive:"Success"},ColorValues:{None:"Neutral",Negative:"Error",Critical:"Critical",Positive:"Good"}}}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Filterhelper", ["sap/base/util/isEmptyObject","sap/ui/model/Filter","sap/ovp/cards/AnnotationHelper"],function(e,t,n){"use strict";function r(e){var t;if(e){if(e.settings.tabs){var n=0;var r=e.settings.selectedKey;if(r&&e.settings.tabs.length>=r){n=r-1}t=e.settings.tabs[n]["selectionAnnotationPath"]}else{t=e.settings["selectionAnnotationPath"]}}return t}return{_getEntityRelevantFilters:function(e,t){var n=[];if(t.length>0&&e){var r=this._checkRelevantFiltersRecursive(e,t[0]);if(r){n.push(r)}}return n},_checkRelevantFiltersRecursive:function(e,n){if(!n._bMultiFilter){n.sPath=n.sPath.split("/").pop();var r=this._getPropertyMapping(e,n.sPath);if(r){n.sPath=r;return n}}else{var i=n.aFilters;var a,s=[];if(i){for(var u=0;u<i.length;u++){a=this._checkRelevantFiltersRecursive(e,i[u]);if(a){s.push(a)}}if(s.length>0){return new t(s,n.bAnd)}}}},_getPropertyMapping:function(e,t){if(t in e){return t}},mergeFilters:function(n,r){if(r&&r.length===0&&r&&n.length===0){return[]}var i=[];if(r&&r.length>0){var a=[];var s={};r.forEach(function(e){if(s[e.path]){s[e.path].push(new t(e))}else{s[e.path]=[new t(e)]}});Object.keys(s).forEach(function(e){a.push(new t({filters:s[e],and:false}))});i.push(new t({filters:a,and:true}))}if(!e(n[0])){i.push(n[0])}return new t({filters:i,and:true})},getSelectionVariantFilters:function(e,t,i){var a=t.getData(),s=e.filter(function(e){return e.id===a.cardId})[0],u="@"+r(s),l=i[u];return l?n.getFilters(t,l,true):[]},formatLiteral:function(e,t){var n=/'/g;if(e===undefined){throw new Error("Illegal value: undefined")}if(e===null){return"null"}switch(t){case"Edm.Binary":return"binary'"+e+"'";case"Edm.Boolean":case"Edm.Byte":case"Edm.Double":case"Edm.Int16":case"Edm.Int32":case"Edm.SByte":case"Edm.Single":return String(e);case"Edm.Date":case"Edm.DateTimeOffset":case"Edm.Decimal":case"Edm.Guid":case"Edm.Int64":case"Edm.TimeOfDay":return e;case"Edm.Duration":return"duration'"+e+"'";case"Edm.String":return"'"+e.replace(n,"''")+"'";default:throw new Error("Unsupported type: "+t)}}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/AnalyticalCard", ["sap/ovp/cards/charts/Utils","sap/ovp/cards/Integration/Helpers/i18n","sap/ovp/cards/Integration/Helpers/Batch","sap/ovp/app/OVPUtils","sap/ovp/cards/CommonUtils","sap/ovp/helpers/ODataAnnotationHelper","sap/ovp/helpers/ODataDelegator"],function(e,t,a,r,n,i,s){"use strict";var o={},l=0,u=0,p={},g={},c={};function d(e,t){if(o&&!o[e]){o[e]=t}else{o[e]=r.merge(true,{},o[e],t)}}function f(){l=0;u=0;p={}}function v(e,t){var a=e&&e.getFeeds(),r;for(var n=0;n<a.length;n++){if(a[n]&&a[n].getValues()&&a[n].getValues().indexOf(t)>-1){r=n;p[r]=p[r]+1||0}}return{sFeedNo:r,count:p[r]}}function m(e,t,a){if(!g[e]){g[e]={}}g[e][t]=a}function y(e,t){if(g){if(g[e]){return g[e][t]}}}function h(e,t){c[e]=t}function P(e){return c&&c[e]}function T(t,a,r,n){if(t==="date"){var i=s.getPropertyFromEntityType(a,r,n);var o=e.getSemanticProperties(i);var l=o&&o.propertyType;if(l){var u={propertyType:l};return"{= extension.formatters.formatDateValue(${"+a+"},"+JSON.stringify(u)+")}"}return"{= format.dateTime(${"+a+"}, {pattern: 'YYYY-MM-dd'}) }"}return"{"+a+"}"}function V(e,t,a){if(a){return a}else if(t){return"{"+t+"}"}else{return e.getProperty("displayValue")||""}}function M(e,r,s){var p=e.entityType,g=e.vizFrame,c=e.cardComponentData.cardId,d=e.view,m=a.getBatchObject(e,s["configuration"]),h=d.getModel();var P=i.getRecords(p,r,h);var M=P.Title&&P.Title.String||"",b=g.getVizType(),_=c,D=c,F,z;if(!M&&g.getVizProperties()&&g.getVizProperties().title&&g.getVizProperties().title.text){M=g.getVizProperties().title.text}if(M&&!M.startsWith("{")){F=M.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");F=c+"_"+F.replace(/ /g,"_");z=M;t.seti18nValueToMap("content.chartProperties.title.text","{{"+F+"}}",true);t.inserti18nPayLoad(c,F,M,"Title","chart Title")}else if(M.includes("@i18n&gt;")){var B=M.split("@i18n&gt;");z="{{"+B[1]+"}"}else if(M.includes("@i18n>")){var B=M.split("@i18n>");z="{{"+B[1]+"}"}var O=function(e,a,r){return function(n){var i=n.getBinding("displayValue"),s=i&&i.getPath(),o=n.getBinding("value"),u=o&&o.getPath(),p=n.getName(),g=p.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var c="";if(u){c=y(a,u)}e=e+"_"+g.replace(/ /g,"_")+"_"+l;t.inserti18nPayLoad(a,e,p,"Label","chart dimension name");t.seti18nValueToMap("content.dimensions."+l+".label","{{"+e+"}}",true);var d=n.getParent().getParent(),f=v(d,p);t.seti18nValueToMap("content.feeds."+f.sFeedNo+".values."+f.count,"{{"+e+"}}",true);l=l+1;return{label:p,value:T(n.getProperty("dataType"),u,r,o.getModel()),dataType:n.getProperty("dataType"),displayValue:V(n,s,c)}}};var x=function(e){return function(a){var r=a.getBinding("value"),i=r&&r.getPath(),s=a.getName(),o=s.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");if(n.isODataV4(r.getModel())){i=i+"Aggregate"}e=e+"_"+o.replace(/ /g,"_")+"_"+u;t.inserti18nPayLoad(c,e,s,"Label","chart measure name");t.seti18nValueToMap("content.measures."+u+".label","{{"+e+"}}",true);var l=a.getParent().getParent(),p=v(l,s);t.seti18nValueToMap("content.feeds."+p.sFeedNo+".values."+p.count,"{{"+e+"}}",true);u=u+1;return{label:s,value:"{"+i+"}"}}};f();var N={chartType:b,chartProperties:o&&o[g&&g.getId()]||{},title:{text:z,visible:true,alignment:"left"},dimensions:g.getDataset().getDimensions().map(O(D,c,p)),measures:g.getDataset().getMeasures().map(x(_)),feeds:g.getFeeds().map(function(e){return{type:e.getType(),uid:e.getUid(),values:e.getValues()}}),data:{path:a.getBatchRequestPath("/content/d/results",h)},actionableArea:"Chart"};if(!m.header){N.data.path=a.getBatchRequestPath("/d/results",h)}return N}return{setVizPropertyMap:d,setDimensionPath:m,setUoMForSubTitle:h,getUoMForSubTitle:P,createChartContent:M}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/Batch", ["sap/fe/navigation/SelectionVariant","sap/ui/model/Filter","sap/ovp/cards/Integration/Helpers/Filters","sap/ovp/app/FilterHelper","sap/base/security/encodeURL","sap/ovp/cards/CommonUtils","sap/ui/model/odata/ODataUtils","sap/ui/model/FilterProcessor","sap/ovp/cards/MetadataAnalyser"],function(t,e,a,r,n,i,l,o,s){"use strict";var u={contentDataUrlUpdated:false,headerDataUrlUpdated:false};function f(t,e){var a=t.split(/\?/);var r=a[1]&&a[1].replace(/^.*\?/,"").split(/&/);var n="";r&&r.forEach(function(t){if(t.indexOf(e)===-1){if(n.length===0){n+=t}else{n+="&"+t}}});return a[0]+(n!==""?"?"+n:"")}function v(t,e){if(t&&e){if(t.indexOf("?")===-1){t+="?"+e}else{t+="&"+e}}return t}function d(t,e){var a=t.split(/\?/);if(a.length>1){var r=a[1].replace(/^.*\?/,"").split(/&/);var n=r.filter(function(t){return t.includes(e)});return n.length===1?n[0]:""}return""}function g(t,e,a,r){if(r){var n=a&&a._oFilterProvider;var l=n&&n._oParameterization;var o=l&&l.getNavigationPropertyToQueryResult();return{_entitySet:{value:l&&l.getName()},_urlSuffix:{value:"/"+o}}}else{var s=e&&e.getModel(),u=s&&s.getMetaModel(),f="";if(!i.isODataV4(s)){var v=u&&u.getODataEntityContainer(),d=t&&t.startsWith("/")?t.substr(1):t,g=v&&v["entitySet"];g=g.filter(function(t){return t&&t.name&&d&&d.startsWith(t.name)});f=g[0]&&g[0].name}else{f=e.oCardComponentData.settings.entitySet}var p=t.split("/").length>2?t.substring(t.lastIndexOf("/")):"";return{_entitySet:{value:f},_urlSuffix:{value:p}}}}function p(t){var e=t.cardComponentData.mainComponent;var a=t.view.getController();var r=e.getGlobalFilter();var n=a.getCardItemsBinding().getPath();var i;if(r&&r.getConsiderAnalyticalParameters()){var l=r.getAnalyticBindingPath();var o=a.getEntitySet().entityType;var u=r.getEntityType();if(l&&l.length>0){if(o===u){i=g(l,a,r,true);return{sPath:l,_entitySet:i._entitySet,_urlSuffix:i._urlSuffix}}}else{var f=a.getCardPropertiesModel().getProperty("/selectionAnnotationPath");var v=t.entityType[f];var d=s.resolveParameterizedEntitySet(a.getModel(),t.entitySet,v);i=g(d,a,r,false);return{sPath:d,_entitySet:i._entitySet,_urlSuffix:i._urlSuffix}}}i=g(n,a,r,false);return{sPath:"",_entitySet:i._entitySet,_urlSuffix:i._urlSuffix}}function c(t,e){var a=e.oMainComponent,r=a.getGlobalFilter(),n=r&&r.getAnalyticBindingPath();var l=e.getModel();var o=l.getMetaModel();if(!i.isODataV4(l)){var s=e.getEntityType().name;var u=o.getODataEntityContainer();var f=u.entitySet.filter(function(t){return t.entityType===u.namespace+"."+s});var v=f.length>0?f[0]:{}}else{var s=e.oCardComponentData.settings.entitySet;var u=o.getObject("/");var v=u[s];v.entityType=v.$Type}if(r&&r.getConsiderAnalyticalParameters()){var n=r.getAnalyticBindingPath();var d,g,p;if(n&&n.length>0){if(v.entityType===r.getEntityType()){g=t;d=t.indexOf("$");if(d>0){g=t.substring(0,d-1)}p=n;if(p.startsWith("/")){p=p.slice(1)}if(g!==p){t=t.replace(g,p)}}else{var c=a._getParametersFromEntityPath(t);var h=a._getParametersFromEntityPath(n);var m,y,_;var U={};if(c&&c.length>0){var D=a._getEntityTypeFromPath(l,t,U.context,true);for(var P=0;P<h.length;P++){m=a._getPropertyMapping(c,h[P].name,D.name,r.getEntityType(),l,r.getModel());if(m){y=m+"=.*?[,)]";_=t.match(new RegExp(y));if(_&&_.length>0){g=_[0].slice(0,-1);p=m+"="+h[P].sValue;if(g!==p){t=t.replace(g,p)}}}}}}}}return t}function h(t,e,a,r){var i=t.view.getModel("ovpCardProperties");var l=i&&i.getProperty("/bInsightRTEnabled");var o="";if(l||r){o+=U(t)}else{o+=m(t,e)}var s=d(a,"$filter");if(s.length>0){s=decodeURIComponent(s);s=s.replace("$filter=","");s=!s.startsWith("(")?"("+s+")":s}if(o.length>0&&s.length>0){o=!o.startsWith("(")?"("+o+")":o;o+=" and "}o+=s;if(o.length!==0){return"$filter="+n(o)}return""}function m(r,n){var i=r.cardComponentData.mainComponent;var l=i.getGlobalFilter();var o=l&&l.getUiState();var s=l&&l.determineMandatoryFilterItems();var u=n.parameters._mandatoryODataFilters.value;var f=new t(o&&o.getSelectionVariant());if(!s||s.length===0||(!u||u.length===0)){return""}else{var v=[];for(var d=0;d<u.length;d++){var g=u[d];var p=f.getSelectOption(g);var c=new e(p);var h=c.aFilters&&c.aFilters.length||0;var m=[];for(var y=0;y<h;y++){var _=c.aFilters[y];var U=a.getSingleFilterValue(_,g);if(U.length>0){m.push(U)}}if(m.length>0){var D=m.join(" or ");D="("+D+")";v.push(D)}}return v.length>0?v.join(" and "):""}}function y(t,e){t&&t.forEach(function(t){if(t&&t.getFilters()){y(t.getFilters(),e)}else if(t&&t.getPath()&&e.indexOf(t.getPath())===-1){e.push(t.getPath())}});return e}function _(t,e){if(t&&e){var a=t&&t.property.filter(function(t){return e.indexOf(t.name)>-1})||[];a.forEach(function(t){var e=t.type||"";if(!e.startsWith("Edm")){t.type="Edm."+t.type}})}}function U(t){var e=t.view;var a=e.getController();var n=a.getEntityType(),i=a.oMainComponent.getGlobalFilter(),s=i&&i.getModel(),u=a.getView().getModel("ovpCardProperties"),f=u&&u.getProperty("/entityType"),v=f&&f.name,d=a.oMainComponent.aFilters;if(n&&s&&v){var g=r.getEntityRelevantFilters(n,d,v,s);if(g.length){var p=o.groupFilters(g),c=y(g,[]),h=e&&e.getModel()&&e.getModel().oMetadata;_(n,c);var m=l.createFilterParams(p,h,n);if(m.length){m=m.replace("$filter=","");m=decodeURIComponent(m);return m}return""}}return""}function D(t,e,a,r){var n=t.view;if(!n){return{}}var l=t.cardComponentData.model.sServiceUrl;var o=n.getController();var s=a?o.getKPIBinding():o.getCardItemsBinding();var u=s&&s.sRangeParams||"";if(t.cardComponentName==="List"||t.cardComponentName==="Table"){u="$skip=0&$top=13"}var g=p(t);var m=s&&s.getDownloadUrl()||"";var y;if(m){m=f(m,"sap-client");m=f(m,"_requestFrom");if(!i.isODataV4(n.getModel())){m=m.split(l+"/")[1]}else{m=m.split(l)[1]}m=c(m,o);y=h(t,e,m,r);if(y.length>0){m=f(m,"$filter");m=v(m,y)}var _=d(m,"$inlinecount");if(_.length===0&&(t.cardComponentName==="List"||t.cardComponentName==="Table")&&!i.isODataV4(n.getModel())){var U="$inlinecount=allpages";m=v(m,U)}if(u){m=v(m,u)}}return{sPath:m,_entitySet:g._entitySet,_urlSuffix:g._urlSuffix}}function P(t,e,a){if(!u.headerDataUrlUpdated){var r=this._getRequestUrlAndEntityInfo(t,e,true,a);e["parameters"]["_headerDataUrl"]={value:r.sPath}}if(!u.contentDataUrlUpdated){var n=this._getRequestUrlAndEntityInfo(t,e,false,a)||"";e["parameters"]["_contentDataUrl"]={value:n.sPath}}u.contentDataUrlUpdated=false;u.headerDataUrlUpdated=false}function S(t,e){var a=t.cardComponentData.settings,r=t.entitySet.name||a.entitySet,n={};if(r.endsWith("Results")){r=r.replace("Results","")}if(a.dataPointAnnotationPath||a.kpiAnnotationPath){var i=this._getRequestUrlAndEntityInfo(t,e,true)||"";e["parameters"]["_headerDataUrl"]={value:i.sPath};if(i.sPath){n.header={method:"GET",url:i.sPath,headers:{Accept:"application/json","Accept-Language":"{{parameters.LOCALE}}"},retryAfter:30}}}var l=this._getRequestUrlAndEntityInfo(t,e,false)||"";e["parameters"]["_contentDataUrl"]={value:l.sPath};if(l.sPath){n.content={method:"GET",url:l.sPath,headers:{Accept:"application/json","Accept-Language":"{{parameters.LOCALE}}"}}}if(l._entitySet||l._urlSuffix){e["parameters"]["_entitySet"]=l._entitySet;e["parameters"]["_urlSuffix"]=l._urlSuffix}return n}function C(t){var e=t.configuration.parameters;var a=e._mandatoryODataParameters.value;var r=e._mandatoryODataFilters.value;var n=r.some(function(t){var a=e[t]&&e[t].value;var r=true;if(a&&i.isJSONData(a)){a=JSON.parse(a);var n=a&&a["SelectOptions"];n.forEach(function(t){if(t&&t["Ranges"]&&t["Ranges"].length>0){r=false}});return r}return false});var l=a.some(function(t){return e[t]&&!e[t].value});if(n||l){if(!e._headerDataUrl){e._headerDataUrl={value:""}}if(!e._contentDataUrl){e._contentDataUrl={value:""}}e._headerDataUrl.value="";e._contentDataUrl.value="";u.headerDataUrlUpdated=true;u.contentDataUrlUpdated=true}}function E(t){var e=t&&t.data&&t.data.request,a=t&&t.configuration.parameters._headerDataUrl,r=t&&t.configuration.parameters._contentDataUrl,n=t.configuration.parameters._semanticDateRangeSetting;if(e&&e.batch&&n){var i=e.batch.header||{},l=e.batch.content||{};i.url="{= extension.formatters.formatHeaderDataUrlForSemanticDate() }";a.value="";l.url="{= extension.formatters.formatContentDataUrlForSemanticDate() }";r.value="";u.headerDataUrlUpdated=true;u.contentDataUrlUpdated=true}else if(e&&e.url&&n){e.url="{= extension.formatters.formatContentDataUrlForSemanticDate() }";r.value="";u.contentDataUrlUpdated=true}}function F(t,e){if(!i.isODataV4(e)){return t}else{return t.replace("d/results","value")}}function O(t,e){if(!i.isODataV4(e)){return t}else{return t.replace("d/__count","@odata.count")}}return{_getQueryParam:d,_removeQueryParam:f,_getRequestUrlAndEntityInfo:D,getBatchObject:S,enhanceHeaderAndContentURL:C,updateBatchObject:P,enhanceHeaderAndContentURLForSemanticDate:E,getBatchRequestPath:F,getBatchResultCount:O}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/CardAction", ["sap/ovp/app/NavigationHelper","sap/ovp/cards/CommonUtils","sap/ovp/cards/NavigationHelper"],function(e,a,t){"use strict";return{getCardActions:function(r,i){var n={header:{enabled:false,actions:[]},content:{enabled:false,actions:[]}};var s=false,o=false;var c=r.view;var m=c.getController();var l={};if(r.cardComponentName==="Analytical"){o=!t.checkHeaderNavigationDisabledForAnalyticalCard(m.getCardPropertiesModel())}s=e.bCheckNavigationForCard(m);if(!s){return n}l=e.getNavigationParameters(m,r);if(l===undefined){return n}if(r.cardComponentName==="List"||r.cardComponentName==="Table"){o=l["semanticObject"]&&l["action"]}var p={ibnTarget:{},ibnParams:{}};var u={type:"Navigation"};var v={type:"Navigation"};if(l&&l.type==="url"){p={type:"Navigation",parameters:{target:"_self"}};a.updatePropertyValueForObject(p.parameters,l.url,"url")}else{if(l.semanticObject||l.action||l.staticParams){p.ibnTarget={semanticObject:l.semanticObject,action:l.action};if(!i.configuration.parameters.state&&r.cardComponentName==="Analytical"){i.configuration.parameters.state={value:""}}var g=[];if(l.staticParams){if(l.staticParams.sNavPresentationVariant){p.ibnParams.presentationVariant=l.staticParams.sNavPresentationVariant}if(l.staticParams.sensitiveProperties){g=l.staticParams.sensitiveProperties}var f=l.staticParams.staticPropertyMap;var b=f&&Object.keys(f)||[];for(var d=0;d<b.length;d++){if(b[d]&&f[b[d]]&&!g.includes(b[d])){p.ibnParams[b[d]]=f[b[d]]}}}p.sensitiveProps=g}}n.content.enabled=true;n.content.actions.push(v);if(o){n.header.enabled=true;n.header.actions.push(u)}if(r.cardComponentName==="Analytical"){a.updatePropertyValueForObject(u,"{= extension.formatters.getNavigationContext(${parameters>/state/value})}","parameters");a.updatePropertyValueForObject(v,"{= extension.formatters.getNavigationContext(${parameters>/state/value}, ${})}","parameters");i.configuration.parameters.state.value=JSON.stringify(p)}else{if(p.ibnTarget["semanticObject"]&&p.ibnTarget["action"]){a.updatePropertyValueForObject(u,"{= extension.formatters.getNavigationContext(${parameters>/headerState/value})}","parameters");i.configuration.parameters.headerState={value:""};i.configuration.parameters.headerState.value=JSON.stringify(p);l["lineItemSemanticObject"]=l["lineItemSemanticObject"]||p.ibnTarget["semanticObject"];l["lineItemAction"]=l["lineItemAction"]||p.ibnTarget["action"]}if(l["lineItemSemanticObject"]&&l["lineItemAction"]){p.ibnTarget["semanticObject"]=l["lineItemSemanticObject"];p.ibnTarget["action"]=l["lineItemAction"];a.updatePropertyValueForObject(v,"{= extension.formatters.getNavigationContext(${parameters>/lineItemState/value}, ${})}","parameters");i.configuration.parameters.lineItemState={value:""};i.configuration.parameters.lineItemState.value=JSON.stringify(p)}}return n}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/CardHeader", ["sap/ovp/cards/Integration/Helpers/i18n","sap/ovp/app/resources"],function(t,e){"use strict";function a(e,a,r,i){var n=e.data.request.batch&&e.data.request.batch.header;if(i&&i>0){var o="";if(a.valueSelectionInfo&&n||a.description){var s=t.createKeysFromText(r,a.valueSelectionInfo||a.description,"Label","card valueselection info","header.details");var l=s.isNew?s.text:s.key;var p=s.key;e.configuration.parameters._detailsString1={value:l};t.seti18nValueToMap("configuration.parameters._detailsString1.value",p,s.isNew);o="{{parameters._detailsString1}} | "}var d=t.createKeysFromText(r,a.tabs[i-1].value,"Label","card view switch text","header.details");var u=d.isNew?d.text:d.key;var c=d.key;e.configuration.parameters._detailsString2={value:u};t.seti18nValueToMap("configuration.parameters._detailsString2.value",c,d.isNew);o=o+"{{parameters._detailsString2}}";t.seti18nValueToMap("header.details",o,false);return o}if(a.valueSelectionInfo&&n||a.description){t.createKeysFromText(r,a.valueSelectionInfo||a.description,"Label","card valueselection info","header.details")}return n&&a.valueSelectionInfo?a.valueSelectionInfo:a.description}function r(t){var e={path:[]};if(t&&t.parts){for(var a=0;a<t.parts.length;a++){if(t.parts[a].path){e.path.push(t.parts[a].path)}else if(t.parts[a].model=="ovpCardProperties"){e.ovpProp=t.parts[a].value}}return e}}function i(t){var e=t.getBindingInfo?t.getBindingInfo("text").parts:"";var a=[];a[0]=e&&e.length?e[0].path:"";a[1]=e&&e.length>1?e[1].path:"";if(a.length){return a}else{return[]}}function n(t){if(t.cardComponentData.settings.dataPointAnnotationPath||t.cardComponentData.settings.kpiAnnotationPath){return"Numeric"}else if(t.cardComponentData.settings.tabs){return t.cardComponentData.settings.tabs[0].dataPointAnnotationPath||t.cardComponentData.settings.tabs[0].kpiAnnotationPath?"Numeric":"Default"}return"Default"}function o(a){var n=a.cardComponent.getRootControl();var o=n.byId("kpiNumberValue");if(o){var s=o.getBindingInfo?o.getBindingInfo("value"):"";var l=o.getBindingInfo?o.getBindingInfo("valueColor"):"";var p=o.getBindingInfo?o.getBindingInfo("indicator"):""}var d=n.byId("ovpTargetValue");var u=n.byId("kpiNumberPercentage");var c={path:[]};if(s&&s.parts){for(var g=0;g<s.parts.length;g++){if(s.parts[g].path){c.path.push(s.parts[g].path)}else if(s.parts[g].model=="ovpCardProperties"){c.ovpProp=s.parts[g].value}}c.valueColor=l?r(l):"";c.indicator=p?r(p):""}if(d){c.target={parts:[],text:e.getText("KPI_Target_Text")};c.target.parts=c.target.parts.concat(i(d));var f=a.cardComponentData.cardId+"_"+"KPI_Target_Text";t.seti18nValueToMap("header.sideIndicators.0.title","{{"+f+"}}",true);t.inserti18nPayLoad(a.cardComponentData.cardId,f,e.getText("KPI_Target_Text"),"Label","target Label")}if(u){c.deviation={parts:[],text:e.getText("KPI_Deviation_Text")};c.deviation.parts=c.deviation.parts.concat(i(u));var v=a.cardComponentData.cardId+"_"+"KPI_Deviation_Text";if(d){t.seti18nValueToMap("header.sideIndicators.1.title","{{"+v+"}}",true)}else{t.seti18nValueToMap("header.sideIndicators.0.title","{{"+v+"}}",true)}t.inserti18nPayLoad(a.cardComponentData.cardId,v,e.getText("KPI_Deviation_Text"),"Label","deviation label")}return c}function s(t,e,a){if(t.parts.length>1&&t.parts[1]){return"{= extension.formatters."+a+"(${"+t.parts[0]+"}, ${"+t.parts[1]+"},{NumberOfFractionalDigits:"+e.getProperty("/iNumberOfFractionalDigits")+", manifestTarget:"+e.getProperty("/sManifestTargetValue")+"})}"}return"{= extension.formatters."+a+"(${"+t.parts[0]+"},"+null+",{NumberOfFractionalDigits:"+e.getProperty("/iNumberOfFractionalDigits")+", manifestTarget:"+e.getProperty("/sManifestTargetValue")+"})}"}function l(t,e,a){var r="";r="{= extension.formatters.kpiformatter(${"+t[0]+"},{NumberOfFractionalDigits:"+e.NumberOfFractionalDigits+", percentageAvailable:"+e.percentageAvailable+"}";r+=a?","+a+")}":")}";return r}return{generateDetailsExpression:a,getHeaderDetails:n,mainIndicatorDetails:o,targetDeviationValuePath:s,mainIndicatorNumberPath:l}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/ContentHelper", ["sap/ovp/cards/Integration/Helpers/Batch"],function(t){"use strict";var r={formatDate:"sap.ovp.cards.AnnotationHelper.formatDate",formatColor:"sap.ovp.cards.AnnotationHelper.formatColor",formatCurrency:"sap.ovp.cards.AnnotationHelper.formatCurrency",formatNumberCalculation:"sap.ovp.cards.AnnotationHelper.formatNumberCalculation"};function e(t){if(t===null||t===undefined){return}if(t.indexOf("{")!==-1){return t}return"{"+t+"}"}function a(r,e){if(!r){return{path:t.getBatchRequestPath("/d/results",e)}}return{path:t.getBatchRequestPath("/content/d/results",e)}}function n(t){if(t&&typeof t==="string"&&t.length>0){return t.startsWith("{")&&t.endsWith("}")}return false}function o(t){if(t&&typeof t==="string"&&t.length>0){return t.startsWith("{=")&&t.endsWith("}")}return false}function i(t,r){var e;if(o(t)){return t}if(n(t)){e="$"+t}else{e="'"+t+"'"}return"{= extension.formatters.formatCriticality("+e+", '"+r+"')}"}function f(t,r,a,n){if(!t||!r){return null}try{var o=t.getBindingInfo(r);var i;if(o){if(o.formatter&&o.formatter.name==="formatCurrency"){var f=t.getBindingInfo("unit");i=s(o,n,f);return a?i:e(i)}if(o.parts&&o.parts.length){i=o.parts.length===1?s(o):s(o,n);return a?i:e(i)}i=t.getBindingPath(r);return a?i:e(i)}else{return t.getProperty(r)}}catch(t){return}}function u(t){var r=[];if(Array.isArray(t)){t.forEach(function(t){r.push("${"+t+"}")})}return r.join()}function s(t,e,a){var n=[],o,i,f,s=false,l=false;var m,c;if(t&&t.parts){t.parts.forEach(function(t){if(t.path){if(t.model==="@i18n"&&e){e[t.path]={value:"{{"+t.path+"}}"};n.push("parameters>/"+t.path+"/value");l=true}else{n.push(t.path)}}if(t.model==="ovpCardProperties"&&t.value){f=t.value.functionName;if(t.value.dateFormat){i=t.value.dateFormat;i.bUTC=t.value.bUTC||false}else{i=t.value}}else if(t.model==="@i18n"){s=true}});if(n.length===1){o=n[0]}if(t.type&&t.type.oFormat){t.formatter={name:"formatter",textFragments:[0]};i=t.type.oFormat.oFormatOptions}if(t.formatter&&t.formatter.textFragments!==true){var p=null;if(i){var h=Object.assign({},i);delete h.functionName;p=JSON.stringify(h).replaceAll('"',"'")}switch(f){case r.formatDate:if(!o){return"{= extension.formatters.formatDate("+u(n)+", "+p+")}"}return"{= extension.formatters.formatDate(${"+o+"}, "+p+")}";case r.formatColor:if(!o){return"{= extension.formatters.formatValueColor("+u(n)+","+JSON.stringify(i)+")}"}return"{= extension.formatters.formatValueColor(${"+o+"},"+JSON.stringify(i)+")}";case r.formatCurrency:a&&a.parts.forEach(function(t){n.push(t.path)});var g=n.length===4;return"{= extension.formatters.formatCurrency("+p+","+g+","+u(n)+")}";case r.formatNumberCalculation:var m=t.formatter.textFragments||[0];c=JSON.stringify(m).replaceAll('"',"'");return"{= extension.formatters.formatNumber("+p+","+c+","+u(n)+")}";default:var c=null;if(t.formatter.textFragments){c=JSON.stringify(t.formatter.textFragments).replaceAll('"',"'");return"{= extension.formatters.formatNumber("+p+","+c+","+u(n)+")}"}}}if(s&&!l){return"{{"+o+"}}"}return o}}function l(r,e){var a="";if(r){a=t.getBatchResultCount("/content/d/__count",e)}else{a=t.getBatchResultCount("/d/__count",e)}return{text:"{= ${"+a+"} === '0' ? '' : extension.formatters.formatHeaderCount( ${"+a+"}) }"}}return{getHeaderStatus:l,addBrackets:e,buildValueStateExpression:i,getBindingPathOrValue:f,getData:a,isAnExpression:o}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/Filters", ["sap/ovp/cards/MetadataAnalyser","sap/ovp/cards/CommonUtils","sap/fe/navigation/SelectionVariant","sap/ovp/cards/Integration/Helpers/i18n","sap/ovp/cards/NavigationHelper","sap/m/DynamicDateUtil"],function(e,t,a,r,n,i){"use strict";var o={};function l(){o={}}function s(e){if(e){if(e.hasOwnProperty("SelectionVariantID")){delete e.SelectionVariantID}else if(e.hasOwnProperty("PresentationVariantID")){delete e.PresentationVariantID}delete e.Text;delete e.ODataFilterExpression;delete e.Version;delete e.FilterContextUrl;delete e.ParameterContextUrl;return e}return e}function u(e,t,a){var r;e.forEach(function(e){r=e&&e.Ranges;t.massAddSelectOption(a,r)})}function f(e){var r,n,i;var o=0;for(var l in e){var f=new a;if(e.hasOwnProperty(l)&&e[l]){r=e[l].value;if(r&&typeof r==="string"&&t.isJSONData(r)){r=JSON.parse(r);if(typeof r!=="object"){e[l].value=r.toString();continue}n=r.SelectOptions&&r.SelectOptions[0];if(n&&n.Ranges&&n.Ranges.length===1){i=n.Ranges[0]||{};if(i.Option==="EQ"&&!i.Low){n.Ranges=[];e[l].value=JSON.stringify(r)}}}else if(r&&Array.isArray(r)){var c,g;for(o=0;o<r.length;o++){c=JSON.parse(r[o]);g=c&&c.SelectOptions||[];u(g,f,l)}f=s(f&&f.toJSONObject());e[l].value=JSON.stringify(f)}}}}function c(e,t){var a,r="";t&&t.getAllFiltersWithValues().filter(function(n){a=n.getName();if(a.includes(e)||a===e){r=t&&t.getFilterData()&&t.getFilterData()[a]||""}});return r}function g(t,a,r,n){var i=t.getMetaModel().getODataEntityType(a.entityType)||{};var o=n.view.getModel("ovpCardProperties");var l=i[o.getProperty("/selectionAnnotationPath")]||{};var s=o.getProperty("/parameters")||[];var u=n.cardComponentData.mainComponent.oGlobalFilter;var f=[];var c=e.checkAnalyticalParameterisedEntitySet(t,a.name);if(c){f=e.resolveAnalyticalParameterizedEntitySet(t,a,l,s,u,true)||[]}else{var g=e.getParametersByEntitySet(t,a.name);if(g&&g.entitySetName){f=e.getPropertyOfEntitySet(t,g.entitySetName)||[]}}return f.filter(function(e){return e&&e.name===r})}function p(e,t,a,r){if(a){var n=g(e,t,a,r)||[],i=n[0]||{},o=i["com.sap.vocabularies.Common.v1.FilterDefaultValue"]||{},l=Object.keys(o)||[];return o[l[0]]||i.defaultValue}}function v(e,t){var a=t&&t.getFilterData();return a&&(a["$Parameter."+e]||a[e])||""}function m(e,t,a){if(e){var r=t&&t.property&&t.property.filter(function(t){return t&&t.name===e})||[];if(!r.length){r=a&&a.property&&a.property.filter(function(t){return t&&t.name===e})}}var n=r&&r.length?r[0]:{};var i=n&&n["com.sap.vocabularies.Common.v1.FilterDefaultValue"]||{};var o=Object.keys(i);return n&&(o&&o.length&&i[o[0]]||n.defaultValue)}function d(e){var a;var r=[];if(e&&Array.isArray(e)){e.forEach(function(e){if(e){a=s(JSON.parse(e));r.push(JSON.stringify(a))}});return r}else if(e&&t.isJSONData(e)){a=s(JSON.parse(e));return JSON.stringify(a)}}function S(e){var t="";if(!e){return null}if(e.type){t=e.type.startsWith("Edm.")?e.type.split("Edm.")[1]:e.type}var a={Boolean:"boolean",Byte:"integer",SByte:"integer",Int16:"integer",Int32:"integer",Int64:"number",Single:"number",Double:"number",Float:"number",Decimal:"number",Guid:"string",String:"string",Date:"date",DateTime:"datetime",DateTimeOffset:"datetime",Time:"datetime",Binary:"",Stream:"",TimeOfDay:"",Duration:""};if(t&&t==="string"){return t}else if(t&&a[t]){return a[t]}else{return"string"}}function y(e){var t=[];var a=e&&e.RequestAtLeast||undefined;if(a){for(var r=0;r<a.length;r++){if(a[r].PropertyPath){t.push(a[r].PropertyPath)}}}return t}function T(e,t,a,r){var n="";if(Array.isArray(t)){t.filter(function(t){if(t&&t.includes(e.Low)){n=t}})}else if(typeof t==="string"){n=t}if(!n&&e.Low&&e.High){var i=a&&a.getFilterData()||{},o=i[r]||{};if(o.ranges){var l=o.ranges||[];var s=l.filter(function(t){return t.value1===e.Low});var u=s[0]||{};n=u.tokenText||""}}return n}function O(e,t,a,r){var n=e&&e.getUiState(),i=n&&n.getSelectionVariant(),o=i&&i.SelectOptions||[],l=false;o.filter(function(e){return e&&e["PropertyName"]===t}).map(function(n){l=true;var i=n&&n.Ranges||[];i.forEach(function(n){var i=T(n,r,e,t);a.addSelectOption(t,n.Sign,n.Option,n.Low,n.High,i)})});if(!l){a.addSelectOption(t,"I","EQ","")}}function D(e,t){var a;var r=/'/g;switch(e.Option){case"BT":a=t+" ge "+"'"+e.Low.replace(r,"''")+"'"+" and "+t+" le "+"'"+e.High.replace(r,"''")+"'";break;case"NB":a=t+" lt "+"'"+e.Low.replace(r,"''")+"'"+" or "+t+" gt "+"'"+e.High.replace(r,"''")+"'";break;case"EQ":case"GE":case"GT":case"LE":case"LT":case"NE":a=t+" "+e.Option.toLowerCase()+" "+"'"+e.Low.replace(r,"''")+"'";break;case"Contains":case"EndsWith":case"NotContains":case"NotEndsWith":case"NotStartsWith":case"StartsWith":a=e.Option.toLowerCase().replace("not","not ")+"("+t+","+"'"+e.Low.replace(r,"''")+"'"+")";break;default:throw new Error("Unsupported operator: "+e.Option)}return a}function E(e){var t=e&&e.cardComponentData,a=t&&t.appComponent,r=a&&a.ovpConfig,n=r&&r.datePropertiesSettings;if(n){return n}}function A(e,t){if(e&&t){var a=t.getAllFilterItems()||[];return a.filter(function(t){var a=t&&t.getProperty("name");return a==="$Parameter."+e||a===e})[0]}}function R(e,t){if(t&&!e["sap:filter-restriction"]){var a=["DATE","YESTERDAY","TODAY","TOMORROW","FIRSTDAYWEEK","LASTDAYWEEK","FIRSTDAYMONTH","LASTDAYMONTH","FIRSTDAYQUARTER","LASTDAYQUARTER","FIRSTDAYYEAR","LASTDAYYEAR"],r=i.getAllOptionKeys(),n=r.filter(function(e){return a.indexOf(e)===-1}),o=t.getStandardOptions(),l=o.some(function(e){return n.indexOf(e)>-1});e["_filterRestriction"]=l?"interval":"single-value"}}function C(e,t){var a=false;if(e&&t){var r=e.cardComponentData.mainComponent.oGlobalFilter,n=t.name,i=A(n,r),o=i&&i.getControl(),a=o&&o.getMetadata()&&o.getMetadata().getName()==="sap.m.DynamicDateRange";if(a){R(t,o)}}return a}function P(e){var t=E(e);var a=t&&Object.keys(t);if(a&&a.length){a.forEach(function(e){if(o[e]){var a=t[e]&&Object.keys(t[e])||[];a.forEach(function(a){if(a&&a!=="defaultValue"&&a!=="customDateRangeImplementation"){o[e][a]=t[e][a]}})}})}return o}function h(e,t){if(t){o[e.name]={"sap:filter-restriction":"single-value"}}else{o[e.name]={"sap:filter-restriction":e["sap:filter-restriction"]||e["_filterRestriction"]}}}function N(e,t){var a=E(e);if(a&&a[t]&&a[t]["defaultValue"]){return a[t]["defaultValue"]["operation"]}else{var r=e.cardComponentData.appComponent.getManifestObject().getRawJson();var n=r&&r["sap.ovp"];var i=n&&n.filterSettings&&n.filterSettings.dateSettings&&n.filterSettings.dateSettings.fields;return i&&i[t]&&i[t]["defaultValue"]&&i[t]["defaultValue"]["operation"]}}function b(e,t){var a=e&&e.getUiState(),r=a&&a.getSelectionVariant(),n=r&&r.SelectOptions||[];var i=n.filter(function(e){return e&&e["PropertyName"]===t});i=i&&i[0]||[];var o=i.Ranges||[];return o&&o[0]}function I(e){var t=["DATE","DATETIME"];return t.indexOf(e)>-1}function L(e){if(e){var t=e.conditionTypeInfo,a=t&&t.data;if(I(a.operation)&&a.value1){return JSON.stringify(a.value1)}return a.operation}}function V(e,t,a){var r=v(e.name,t);var n=r&&r.conditionTypeInfo;var i=n&&n.data&&n.data["operation"];var o=r&&r["ranges"];var l=o&&o[0];if(i){switch(i){case"DATE":case"DATERANGE":case"SPECIFICMONTH":case"FROM":case"TO":case"DATETIME":case"DATETIMERANGE":case"FROMDATETIME":case"TODATETIME":var s=T({Low:l.Low},a,t,e.name);var u=b(t,e.name);if(u){u.Text=s;return u}break;case"LASTDAYS":case"LASTWEEKS":case"LASTMONTHS":case"LASTQUARTERS":case"LASTYEARS":case"NEXTDAYS":case"NEXTWEEKS":case"NEXTMONTHS":case"NEXTQUARTERS":case"NEXTYEARS":var f=n&&n.data&&n.data.value1;var s=T({Low:f},a,t,e.name);return{Low:i,High:f.toString(),Option:"BT",Text:s};case"TODAYFROMTO":var c=n&&n.data&&n.data.value1;var g=n&&n.data&&n.data.value2;var s=T({Low:c},a,t,e.name);return{Low:i,High:c.toString()+","+g.toString(),Option:"BT",Text:s};default:var s=T({Low:i},a,t,e.name)||"";s=s.substring(0,s.indexOf("(")-1);return{Low:i,High:null,Option:"EQ",Text:s}}}}function w(e,t){var a=t.cardComponentData.mainComponent.oGlobalFilter;var r=A(e,a);var n=r&&r.getControl();var i=n&&n.getValue();var o=n&&n.getMetadata()&&n.getMetadata().getName()==="sap.m.DynamicDateRange";var l=t.view.getModel("ovpCardProperties");var s=l&&l.getProperty("/bInsightRTEnabled");if(i&&o&&s){return JSON.stringify(i)}else{var u=N(t,e)||"";return JSON.stringify({operator:u,values:[]})}}function F(e,t,a,r,n){var i=e.view.getModel("ovpCardProperties"),o=i&&i.getProperty("/bInsightRTEnabled"),l=e.cardComponentData.mainComponent.oGlobalFilter,s=N(e,t.name)||a;if(o){var u=V(t,l,n);if(u){r.addSelectOption(t.name,"I",u.Option,u.Low,u.High,u.Text)}else{r.addSelectOption(t.name,"I","EQ","",null,"")}}else if(s){r.addSelectOption(t.name,"I","EQ",s,null,s)}else{r.addSelectOption(t.name,"I","EQ","",null,"")}}function M(e,t){if(t&&e){var a=t.getFiltersWithValues()||[],r="",n=a.filter(function(t){r=t&&t.getName();return r===e||"$Parameter."+e===r});var i=n&&n[0]&&n[0].getControl();if(i&&i.getMetadata()&&i.getMetadata().getName()==="sap.m.DynamicDateRange"){var o=i.getIdForLabel()||"";o=o.substring(0,o.lastIndexOf("-"));if(o){var l=sap.ui.getCore().byId(o);return l&&l.getValue()}}else if(i&&i.getProperty("value")){return i.getProperty("value")}else if(i&&typeof i.getTokens==="function"){var s=i.getTokens()||[],u=s.map(function(e){return e.getText()});return{type:"filters",value:u}}}}function x(e,t,a,n,i,o){var l=M(e,t);var s=n.view.getModel("ovpCardProperties");var u=s&&s.getProperty("/bInsightRTEnabled");if(l&&typeof l==="string"&&(u||i)){if(!a[e]){a[e]={}}a[e]["label"]=l;if(i&&!u){var f="configuration.parameters."+e+".label",c=n.cardComponentData.cardId,g=c+"_configuration_parameters_"+e+"_label";r.seti18nValueToMap(f,"{{"+g+"}}",true);l=o?i:l;r.inserti18nPayLoad(c,g,l,"Label","Configuration Parameter label")}return l}else if(l&&l.value&&l.type==="filters"){return l.value}}function Y(e,t){var r=new a,i=e.view,o=i&&i.getBindingContext(),l=i&&i.getController();n.processCustomParameters(l.oCardComponentData.mainComponent,l.getCardPropertiesModel(),o&&o.getAllData(),r,{});var s=r&&r.getSelectOptionsPropertyNames()||[];var u=r&&r.selectOptions||{};s.forEach(function(e){var a={parameters:[],SelectOptions:[{PropertyName:e,Ranges:u[e]}]};if(t[e]){t[e].value=JSON.stringify(a)}else{t[e]={value:JSON.stringify(a)}}});return s}function J(e,t){var a=e.cardComponentData.mainComponent.oGlobalFilter;if(a&&a.getConsiderAnalyticalParameters()){var r=e.view.getController().getCardItemsBinding(),n=r&&r.getPath()||"",i=a.getAnalyticalParameters()||[];i.forEach(function(e){var a=t.some(function(t){return t.name===e.name});if(!a&&n.indexOf(e.name)>-1){t.push(e)}})}}return{enhanceVariant:d,updateRangeValue:f,getPropertyType:S,getParameterValue:c,getRequestAtLeastFields:y,getFilterDefaultValue:m,getParameterDefaultValue:p,addFiltervalues:O,getParameterActualValue:v,removeExtraInfoVariant:s,getSingleFilterValue:D,getSemanticDateConfiguration:P,IsSemanticDateRangeValid:C,getDateRangeValueForParameters:L,getDateRangeControlValue:w,getDateOperationValue:I,getLabelForConfigParams:x,getRelatedTextToRange:T,setFilterRestrictionToSemanticDateRange:h,addDateRangeValueToSV:F,getDateRangeDefaultValue:N,addCustomNavigationParametersToManifest:Y,resetSemanticDateRangeConfig:l,handleConsiderAnalyticalParameters:J}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/IntegrationCardPersonalization", ["sap/m/MessageToast","sap/ovp/app/OVPLogger","sap/ovp/app/resources","sap/ui/thirdparty/jquery"],function(e,t,n,jQuery){"use strict";var r="ovp-based-integration-cards";var o=new t("sap.ovp.cards.Integration.Helpers.IntegrationCardPersonalization");var a=function(e){this.oContainer=e};a.prototype.writeManifest=function(t,r){var a=false;if(a){jQuery.ajax({type:"POST",url:"/editor/card/"+t.split(":")[0],headers:{"Content-Type":"application/json"},data:JSON.stringify(r),success:function(e){o.info("Success:",e)},error:function(e){o.error("Error:",e)}})}else{try{this.oContainer.setItemValue(t,r);this.oContainer.save().then(function(){e.show(n.getText("INT_CARD_ADD_SUCCESS"))}).catch(function(t){e.show(n.getText("INT_CARD_ADD_ERROR"))})}catch(t){e.show(n.getText("INT_CARD_ADD_ERROR"))}}};a.prototype.readManifest=function(e){var t=this.oContainer.getItemValue(e);return t};a.prototype.readAllManifests=function(){var e=this.oContainer.getItemKeys()||[];return e.map(function(e){return this.readManifest(e)}.bind(this))};a.prototype.deleteAllManifests=function(){this.oContainer.clear();this.oContainer.save().then(function(){e.show("All Cards have been removed from my insights")}).catch(function(t){e.show("Error: Cards couldn't be removed")})};return{create:function(e){return sap.ushell.Container.getServiceAsync("Personalization").then(function(e){var t={shared:true};return e.getContainer(r,t)}).then(function(e){return new a(e)})}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/ListContentHelper", ["sap/ovp/cards/Integration/Helpers/ContentHelper"],function(e){"use strict";function a(a){var t=a.view.byId("DataField")||a.view.byId("DataField1");var r=a.itemBindingInfo.template;if(t){return e.getBindingPathOrValue(t,"text",false,a.parameters)}else{return e.getBindingPathOrValue(r,"title",false,a.parameters)}}function t(a){var t=a.itemBindingInfo.template,r=a.cardComponentData.settings.listType,i,n;if(r==="condensed"){if(t.getMetadata().getName()==="sap.m.StandardListItem"){i=e.getBindingPathOrValue(t,"info",false,a.parameters);n=e.getBindingPathOrValue(t,"infoState",false,a.parameters)}else{var s=a.view.byId("DataPoint2");i=e.getBindingPathOrValue(s,"number",false,a.parameters);n=e.getBindingPathOrValue(s,"state",false,a.parameters)}}else{if(t.getMetadata().getName()==="sap.m.CustomListItem"){var s=a.view.byId("DataPoint2");if(s){i=e.getBindingPathOrValue(s,"number",false,a.parameters);n=e.getBindingPathOrValue(s,"state",false,a.parameters)}var l=a.view.byId("DataField2Link");if(l){i=e.getBindingPathOrValue(l,"text",false,a.parameters)}}else{i=e.getBindingPathOrValue(t,"number",false,a.parameters);n=e.getBindingPathOrValue(t,"numberState",false,a.parameters)}}return{value:i,state:n?e.buildValueStateExpression(n,"state"):"None"}}function r(e,a){if(Array.isArray(e)&&a){e.push({value:a})}}function i(e){for(var a=e.length-1;a>-1;a--){var t=e[a];if(!t.value){e.pop()}else{return}}}function n(a){var t={Error:"Error",Information:"Information",None:"None",Success:"Success",Warning:"Warning"};var n=[];if(a&&a.itemBindingInfo){var s=a.itemBindingInfo.template;if(s.getMetadata().getName()==="sap.m.CustomListItem"){var l=e.getBindingPathOrValue(a.view.byId("DataField2"),"text",false,a.parameters);r(n,l);var u=e.getBindingPathOrValue(a.view.byId("DataPoint3"),"number",false,a.parameters);r(n,u)}var g=s.getAggregation("attributes");if(g&&g.length){n.push({value:e.getBindingPathOrValue(g[0],"text",false,a.parameters)})}var o=s.getAggregation("firstStatus");if(o){var d=e.getBindingPathOrValue(o,"state",false,a.parameters)||"None";n.push({value:e.getBindingPathOrValue(o,"text",false,a.parameters),state:t[d]||e.buildValueStateExpression(d,"state")||"None"})}if(g&&g.length>1){n.push({value:e.getBindingPathOrValue(g[1],"text",false,a.parameters)})}var m=s.getAggregation("secondStatus");if(m){var f=e.getBindingPathOrValue(m,"state",false,a.parameters)||"None";n.push({value:e.getBindingPathOrValue(m,"text",false,a.parameters),state:t[f]||e.buildValueStateExpression(f,"state")||"None"})}}i(n);return n}function s(a){var t=a.itemBindingInfo.template;if(t&&t.getMetadata().getName()==="sap.m.StandardListItem"){return e.getBindingPathOrValue(t,"description",false,a.parameters)}if(t&&t.getMetadata().getName()==="sap.m.CustomListItem"){var r=a.view.byId("contactLink");return e.getBindingPathOrValue(r,"text",false,a.parameters)}}function l(a){var t=a.itemBindingInfo.template;if(t&&t.getMetadata().getName()==="sap.m.StandardListItem"){return{src:e.getBindingPathOrValue(t,"icon",false,a.parameters)||"default",shape:"Square"}}}function u(e){var r={title:a(e)};var i=t(e);if(i.value){r.info=i}var u=s(e);if(u){r.description=u}var g=n(e);if(g.length){r.attributesLayoutType="TwoColumns";r.attributes=g}if(e.cardComponentData.settings.imageSupported){r.icon=l(e)}if(d(e)){r.chart=o(e)}return r}function g(a,t,r){return"{= extension.formatters.getMinMax('"+a+"', '"+t+"', '"+r+"', $"+e.addBrackets(a)+")}"}function o(a){var t={type:"Bullet"};var r=a.view.byId("BarChartDataPoint");var i=a.view.byId("DataPoint1")||a.view.byId("BarChartStateValue")||a.view.byId("BarChartValue");var n=e.getBindingPathOrValue(r.getData()[0],"value",true,a.parameters);var s=e.getBindingPathOrValue(i,"number",false,a.parameters);var l=e.getBindingPathOrValue(r.getData()[0],"value",false,a.parameters);var u=e.getBindingPathOrValue(r.getData()[0],"color",false,a.parameters);t.value=l?"{= parseFloat($"+e.addBrackets(l)+")}":null;t.displayValue=e.isAnExpression(s)?s:t.value;t.color=u?e.buildValueStateExpression(u,"color"):"None";var o=a.view.getModel("minMaxModel").getProperty("/isPercentage");var d=a.view.getModel();t.minValue=o?0:g(n,"min",d);t.maxValue=o?100:g(n,"max",d);return t}function d(e){return e.view.byId("BarChartDataPoint")}function m(a,t){if(!a){return{}}var r={};a.parameters=t.configuration.parameters;r.data=e.getData(t.data.request.batch,a.view.getModel());r.item=u(a);return r}return{getListContent:m}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/TableContentHelper", ["sap/ovp/cards/Integration/Helpers/ContentHelper","sap/ovp/cards/Integration/Helpers/i18n"],function(e,t){"use strict";function a(e,t){var a=[],n=0;var r=e.view.byId("ovpTable").getAggregation("columns");for(var i=0;i<r.length&&a.length<t;i++){if(r[i].getVisible()){a[n]=i;n++}}return a}function n(a,n,r,i,l){var s=a[n[r]];if(s){var g=e.getBindingPathOrValue(s.getHeader(),"text",false,l);var o,u;if(g&&!g.startsWith("{")){o=g.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");o=i+"_"+o.replace(/ /g,"_");u=g;t.seti18nValueToMap("content.row.columns."+r+".title","{{"+o+"}}",true);t.inserti18nPayLoad(i,o,u,"Column header","column "+r+" title value")}return{header:g,hAlign:s.getHAlign()}}return{}}function r(t,a){if(!t){return{}}var n,r,i,l,s,g={};n=t.getMetadata().getName();switch(n){case"sap.m.VBox":var o=t.getAggregation("items");if(o.length){o.forEach(function(t){r=e.getBindingPathOrValue(t,"text",false,a);if(r){g.value=r}})}break;case"sap.ui.comp.navpopover.SmartLink":g.value=e.getBindingPathOrValue(t,"text",false,a);break;case"sap.m.Text":g.value=e.getBindingPathOrValue(t,"text",false,a);break;case"sap.ui.comp.smartfield.SmartField":g.value=e.getBindingPathOrValue(t,"value",false,a);i=t.getControlProposal().getObjectStatus?t.getControlProposal().getObjectStatus():"None";l=e.getBindingPathOrValue(i,"criticality",false,a);g.state=l&&l!=="None"?e.buildValueStateExpression(l,"state"):"None";break;case"sap.m.ObjectNumber":g.value=e.getBindingPathOrValue(t,"number",false,a);s=e.getBindingPathOrValue(t,"state",false,a);g.state=s&&s!=="None"?e.buildValueStateExpression(s,"state"):"None";break}return g}function i(t,i){if(!t){return{}}var l=t.cardComponentData.cardId;var s=i.configuration.parameters;var g=t.view.byId("ovpTable").getAggregation("columns");var o=t.itemBindingInfo&&t.itemBindingInfo.template.getAggregation("cells");var u=a(t,3);var c=[];for(var v=0;v<u.length;v++){var d=n(g,u,v,l,s);var f=r(o[u[v]],s);if(Object.keys(d).length||Object.keys(f).length){c.push({title:d.header,value:f.value,state:f.state,actions:f.actions,hAlign:d.hAlign})}}return{data:e.getData(i.data.request.batch,t.view.getModel()),row:{columns:c}}}return{getTableContent:i}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/i18n", ["sap/ovp/app/OVPLogger","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";var e=new t("sap.ovp.cards.Integration.Helpers.i18n");var r={"content.chartProperties.color.title.text":{keyType:"Label",comment:"Colour text label for chart"},"content.chartProperties.size.title.text":{keyType:"Label",comment:"Size text label for chart"},"content.chartProperties.categoryAxis.title.text":{keyType:"Title",comment:"Category Axis text title for chart"},"content.chartProperties.valueAxis.title.text":{keyType:"Title",comment:"Value Axis text title for chart"},"content.chartProperties.actualValues.title.text":{keyType:"Title",comment:"Actual Values text title for chart"},"content.chartProperties.targetValues.title.text":{keyType:"Title",comment:"Target Values text title for chart"}};var i={};var a=[];function n(t,e,r){if(e.startsWith("{{")&&r){e="{{INT_CARD_"+e.split("{{")[1]}i[t]=e}function s(t,e){if(typeof t[e]==="object"){return t[e]}return{object:t,key:e}}function o(t){var e=i;var r;for(var a in e){r=a.split(".").reduce(s,t);if(!r.object[r["key"]]&&e[a]){r.object[r["key"]]=e[a]}else if(r.object[r["key"]].trim().length>0){r.object[r["key"]]=e[a]}}}function l(t,e){var r={Title:"XTIT:",Label:"XFLD:",Button:"XBUT:","Column header":"XCOL:"};var i=r[t]||"";return i+" "+e}function c(t,e,r,i,n){var s={comment:l(i,t+" "+n),key:"INT_CARD_"+e,value:r};if(s.value.trim().length>0){a.push(s)}}function u(t,e){var r=[],i=-1;while((i=t.indexOf(e,i+1))!==-1){r.push(i)}return r}function p(){if(a.length>0){var t=a.map(function(t){return t.key+t.comment});for(var r=0;r<t.length;r++){var i=u(t,t[r]),n;if(i.length>1){n=0;for(var s=1;s<i.length;s++){a.splice(i[s]-n,1);t.splice(i[s]-n,1);n++}}}jQuery.ajax({type:"POST",url:"/editor/i18n",headers:{"Content-Type":"application/json"},data:JSON.stringify(a),success:function(t){e.info("Success:",t)},error:function(t){e.error("Error:",t)}}).done(function(t){e.info("Data Saved: "+t)})}}function f(){a=[];i={}}function v(t,e){if(!t||!e){return}for(var i in r){var a=h(t,i);if(!a){continue}var n=a.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var s=e+"_"+n.replace(/ /g,"_")+"_"+i.replaceAll(".","_");var o=r[i].keyType;var l=r[i].comment;this.seti18nValueToMap(i,"{{"+s+"}}",true);this.inserti18nPayLoad(e,s,a,o,l)}}function h(t,e){return e.split(".").reduce(function(t,e){return(t||{})[e]},t)}function y(t,e,r,i){var a="INT_CARD_";var n=i.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var s=e+"_"+n.replace(/ /g,"_");this.inserti18nPayLoad(e,s,t,r,i);return"{{"+a+s+"}}"}function g(t,e,r){var i=e&&e["sap.app"];var a={title:"",subtitle:""};if(i){var n=i.title||"";var s=i["subtitle"]||i["description"]||"";var o=r.cardComponentData.cardId;if(n&&n.startsWith("{")){a.title=n}else if(n){n=t.title;a.title=y(n,o,"Title","App Title")}if(s&&s.startsWith("{")){a.subtitle=s}else if(s){s=t.subtitle||t.description;a.subtitle=y(s,o,"Title","App Subtitle")}}return a}function T(t,e,r,i,a){if(e&&!e.startsWith("{")){var n=a&&a.split(".").join("_");var s=t+"_"+n+"_"+i.replace(/ /g,"_");this.seti18nValueToMap(a,"{{"+s+"}}",true);this.inserti18nPayLoad(t,s,e,r,i);return{key:"{{"+s+"}}",text:e,isNew:true}}return{key:e,isNew:false}}function d(t,e,r){var i=t.substring(2,t.length-2),a="configuration."+i,n=h(e["sap.card"],a),s=n&&n.value;if(s&&s.startsWith("{{")){s=s.substring(2,s.length-2);n.value=r.getProperty(s)}}function m(t,e){var r=t["sap.card"]["header"],i=r.details;if(i&&i.startsWith("{{")){if(i.indexOf("parameters")>-1){var a=i.indexOf("|")>-1;if(a){var n=i.split("|")||[];n.forEach(function(r){r=r.trim();d(r,t,e)})}else{d(i,t,e)}}else{var s=i.substring(2,i.length-2);r.details=e.getProperty(s)}}}function b(t,e){var r="";if(t&&t.startsWith("{{")){r=t.substring(2,t.length-2);return e.getProperty(r)}return t}function x(t,e){if(t&&e){var r=t["sap.app"],i=t["sap.card"]["header"];r.title=b(r.title,e);r.subTitle=b(r.subTitle,e);i.title=b(i.title,e);i.subTitle=b(i.subTitle,e);m(t,e)}}return{seti18nValueToMap:n,inserti18nKeysManifest:o,inserti18nPayLoad:c,writei18nPayload:p,reseti18nProperties:f,replaceStringsWithKeys:v,getKeysForAppProperties:g,createKeysFromText:T,fnReplacei18nKeysWithText:x,getI18nValueOrDefaultString:b}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Integration/IntegrationCard", ["sap/ui/integration/widgets/Card","sap/ovp/cards/Integration/Helpers/IntegrationCardPersonalization","sap/ovp/app/OVPLogger","sap/ovp/app/NavigationHelper","sap/ovp/cards/Integration/Helpers/AnalyticalCard","sap/ovp/cards/Integration/Helpers/i18n","sap/ovp/cards/Integration/Helpers/Batch","sap/ovp/cards/Integration/Helpers/Filters","sap/ovp/app/resources","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ovp/cards/MetadataAnalyser","sap/ovp/helpers/ODataDelegator","sap/ovp/cards/Integration/Helpers/CardHeader","sap/fe/navigation/SelectionVariant","sap/ovp/cards/CommonUtils","sap/ui/core/Core","sap/ovp/cards/Integration/Helpers/ListContentHelper","sap/ovp/cards/Integration/Helpers/ContentHelper","sap/ovp/cards/Integration/Helpers/TableContentHelper","sap/insights/CardHelper","sap/m/MessageToast","sap/ovp/cards/Integration/Helpers/CardAction","sap/ovp/cards/NavigationHelper"],function(e,t,a,r,n,i,o,s,l,p,d,u,c,v,g,f,m,h,y,P,b,C,T,S){"use strict";var D=new a("sap.ovp.cards.Integration.IntegrationCard");var O="module:sap/insights/CardExtension";var V="";var w=function(e,t,a,r,n){var i=e&&e.getBinding(t);var o,s,l,p,d,u;var c,v,g;var f=r&&n!="sap.ovp.cards.charts.analytical"&&n!="sap.ovp.cards.charts.smart.chart";if(i){o=i.aApplicationFilters;s=i.getPath();l=i.mParameters.select;p=k(l&&l.split(","));l=p&&p.join();d=i.sSortParams;u=i.sRangeParams;c=i&&i.sCustomParams;v=c&&c.split("&");v=v&&v.filter(function(e){return e.indexOf("$expand")>-1});g=v&&v[0]}var m=u&&u.split("&")||[];var h,y;for(var P=0;P<m.length;P++){var b=m[P];if(b.indexOf("$skip")>-1){h=b.split("&")[0]}if(b.indexOf("$top")>-1){y=b.split("&")[0]}}if(f&&a&&a.length){var C=l&&l.split(",")||[];a.forEach(function(e){if(!C.includes(e)){C.push(e)}});l=C.join(",")}return{sBindingPath:s,aApplicationFilters:o,sSelect:l?"$select="+l:"",sSortParameters:d?d:"",skip:h?h:"",top:y?y:"",sExpandParam:g||""}};var I=function(e,t){var a=e.view.getController(),r=a.oCardComponentData&&a.oCardComponentData.mainComponent,n=S.getEntityNavigationParameters(r,a.getModel(),e.cardComponentData,a.getCardPropertiesModel(),a.getEntityType()),i=n&&n.sNavSelectionVariant,o=i&&JSON.parse(i),s=o&&o.SelectOptions||[];return s.filter(function(e){return t.indexOf(e["PropertyName"])>-1})};var M=function(e,t,a,r,n){var i=n.view.getModel(),o=n&&n.entityType,s=o&&o.property;var l,p=[],d,c,v=o&&o.name,g=t&&t.name;var f=i.oMetadata._getEntityTypeByName(v);var m=a&&a.oMetadata._getEntityTypeByName(g);if(!f&&!m){return}else if(f&&!m){p=[f.property]}else if(f&&m){p=[f.property,m.property]}for(var h=0;h<p.length;h++){s=JSON.parse(JSON.stringify(p[h]));for(var y=0;y<s.length;y++){if(s[y].name===e){l=s[y];return l}if("P_"+s[y].name===e||s[y].name==="P_"+e||"$Parameter.P_"+s[y].name===e||s[y].name==="$Parameter.P_"+e){l=s[y];if(l&&u.checkAnalyticalParameterisedEntitySet(i,n.entitySet.name)){d=r.length&&F(e,r)}return d&&d.length?d[0]:l}}}if(u.checkAnalyticalParameterisedEntitySet(i,n.entitySet.name)){c=r.length&&F(e,r);if((!c||!c.length)&&e.includes("/")){var P=e.split("/");c=P.length&&F(P[P.length-1],r)}}if(c&&c.length){return c[0]}return undefined};var x=function(e,t){var a;if(e&&e[t]){return e[t]}else if(e&&e.extensions){a=e.extensions;for(var r=0;r<a.length;r++){if(a[r].name===t){return a[r].value}}}return""};var F=function(e,t){return t.filter(function(t){if(t.name===e||"P_"+t.name===e||t.name==="P_"+e||"$Parameter.P_"+t.name===e||t.name==="$Parameter.P_"+e||t.name==="$Parameter."+e||"$Parameter."+t.name===e){return t}})};var N=function(e){return e["sap:filterable"]?e["sap:filterable"]!=="false":true};var R=function(e,t,a){var r=t.filter(function(t){var a=e.some(function(e){return e===t.name});return N(t)&&a})||[];if(a&&a.length>0){e.forEach(function(e){var t="P_"+e.name;if(a.includes(t)){r.push(e)}})}return r};var E=function(e){var t=[];if(e&&e.extensions){t=e.extensions;for(var a=0;a<t.length;a++){if(t[a].name==="parameter"&&t[a].value==="mandatory"){return e.name}else if(t[a].name==="required-in-filter"&&t[a].value==="true"){return e.name}}}};var A=function(e,t){if(t&&t.length){var a=t.filter(function(t){return t.name===e.name});return a&&a[0]}};var _=function(e,t,a,r,n,i,o){var l=o.cardComponentData.mainComponent.oGlobalFilter,p=o.view.getModel("ovpCardProperties"),d=p&&p.getProperty("/bInsightRTEnabled");var u="";if(e["PropertyName"]&&e["PropertyName"]["PropertyPath"]){var c=e["PropertyName"]["PropertyPath"],v=l&&l.getEntityType(),f=l&&l.getModel(),m=f&&f.getMetaModel(),h=m.getODataEntityType(v),y=l.getConsiderAnalyticalParameters();var P;if(y){P=a.filter(function(e){return e.name===c})[0]}if(!P){P=M(c,h,f,a,o)}if(e["PropertyValue"]&&e["PropertyValue"]["String"]){c=P&&P.name?P.name:c;var b=E(P);var C=s.getParameterActualValue(c,l);var T=s.IsSemanticDateRangeValid(o,P);if(b&&r.includes(b)){n.push(b);if(!T){t[c]={value:d&&C?C:e["PropertyValue"]["String"],type:s.getPropertyType(P),description:P&&P.description?P.description:null,label:s.getLabelForConfigParams(c,l,t,o,e["PropertyValue"]["String"])}}else{u=s.getDateRangeControlValue(c,o)}t[c]["description"]=u||x(P,"description")}else if(b){i.push(b);var S=new g;var D=s.getLabelForConfigParams(c,l,t,o,e["PropertyValue"]["String"])||[];var O="";if(d&&C){O=s.getRelatedTextToRange({Low:C},D,l,c);S.addSelectOption(c,"I","EQ",C,null,O)}else{O=s.getRelatedTextToRange({Low:e["PropertyValue"]["String"]},D,l,c);S.addSelectOption(c,"I","EQ",e["PropertyValue"]["String"],null,O)}var T=s.IsSemanticDateRangeValid(o,P);if(!T){t[c]={value:S.toJSONString(),type:s.getPropertyType(P),description:P&&P.description?P.description:null};t[c].value=s.enhanceVariant(t[c].value)}else{u=s.getDateRangeControlValue(c,o)}t[c]["description"]=u||x(P,"description")}}}};var k=function(e){return e&&e.filter(function(t,a){return e.indexOf(t)===a})};var L=function(e,t){if(!f.isODataV4(t)){return e.property.map(function(e){return e.name})}else{return Object.keys(e.property)}};var H=function(e){var t={filters:{}};var a=t.filters;var n=e.cardComponentData.mainComponent.oGlobalFilter;var i=n&&n.getModel();var o=n&&n.getEntityType();var l=e.view.getModel();var p=e.entityType,d,v=[];var f=[],m=[],h=[],y=[],P,b,C=[];var T=[];var S=i&&i.getMetaModel();var D=S&&S.getODataEntityContainer();var O=S.getODataEntityType(o);var V=D&&D.entitySet&&D.entitySet.filter(function(e){return e.entityType===o});var w=V&&V.length>0?V[0]:{};var F=[];if(i){var N=u.checkAnalyticalParameterisedEntitySet(i,w&&w.name);if(N){var H=c.getParametersByEntitySet(i,w);if(H.entitySetName){F=H.parameters||[]}}}var j=c.getParametersByEntitySet(l,e.entitySet).parameters;s.handleConsiderAnalyticalParameters(e,j);var U=e.view.getModel("ovpCardProperties");var J=U&&U.getProperty("/bInsightRTEnabled");var Q="";j.forEach(function(t){var r="";var o=E(t);var p=s.getParameterDefaultValue(i,w,o,e);var d=s.getParameterDefaultValue(l,e.entitySet,o,e);var u=p||d||t.defaultValue||"";var c=s.getParameterActualValue(t.name,n);Q=s.getLabelForConfigParams(t.name,n,a,e,u);var g=s.IsSemanticDateRangeValid(e,t);if(g){var f=c.conditionTypeInfo;var m=f&&f.data&&f.data["operation"];s.setFilterRestrictionToSemanticDateRange(t,true);u=s.getDateRangeDefaultValue(e,t.name)||u;c=s.getDateRangeValueForParameters(c)||c;var y=s.getDateOperationValue(m)||false;if(!y){if(J&&Q&&typeof Q==="string"){Q=Q.substring(0,Q.indexOf("(")-1)}else if(u){Q=u;s.getLabelForConfigParams(t.name,n,a,e,u,true)}}r=s.getDateRangeControlValue(t.name,e)}if(o){h.push(t.name)}a[t.name]={value:J&&c?c:u,type:s.getPropertyType(t),description:r||t&&t.description,label:Q||""};a[t.name]["description"]=r||x(t,"description");v.push(t.name);C.push(t.name)});F=F.filter(function(e){return!C.includes(e)});if(p&&p.property&&O&&O.property){var $=L(p,l);T=R($,O.property,F)}for(var B=0;B<T.length;B++){var q="";var K=T[B],W="";var z=A(K,p.property);var X=E(z);var G=s.getFilterDefaultValue(K.name,O,p)||K.defaultValue||"";var Y=s.getParameterActualValue(K.name,n);if(C.includes(K.name)){Q=s.getLabelForConfigParams(K.name,n,a,e,G);var Z=s.IsSemanticDateRangeValid(e,K);if(Z){s.setFilterRestrictionToSemanticDateRange(K,true);G=s.getDateRangeDefaultValue(e,K.name)||G;Y=s.getDateRangeValueForParameters(Y)||Y;if(J&&Q&&typeof Q==="string"){Q=Q.substring(0,Q.indexOf("(")-1)}else if(G){Q=G;s.getLabelForConfigParams(K.name,n,a,e,G,true)}q=s.getDateRangeControlValue(K.name,e)}a[K.name]={value:J&&Y?Y:G,type:s.getPropertyType(K),description:q||K&&K.description,label:Q};if(X){h.push(X)}v.push(K.name)}else{P=new g;var ee=s.getLabelForConfigParams(K.name,n,a,e,G);var Y;var Z=s.IsSemanticDateRangeValid(e,K);if(Z){s.setFilterRestrictionToSemanticDateRange(K,false);s.addDateRangeValueToSV(e,K,G,P,ee);q=s.getDateRangeControlValue(K.name,e)}else{if(J){s.addFiltervalues(n,K.name,P,ee)}else if(G){var te=s.getRelatedTextToRange({Low:G},ee,n,K.name);P.addSelectOption(K.name,"I","EQ",G,null,te)}else{P.addSelectOption(K.name,"I","EQ",W)}}a[K.name]={value:P.toJSONString(),type:s.getPropertyType(K),description:q||K&&K.description};a[K.name].value=s.enhanceVariant(a[K.name].value);if(X){y.push(X)}f.push(K.name)}a[K.name]["description"]=q||x(K,"description")}var ae=e.cardComponentData.settings["selectionAnnotationPath"];var re=e.entityType[ae]&&JSON.parse(JSON.stringify(e.entityType[ae]));var ne=[],ie;var oe;for(var se in re){if(re.hasOwnProperty(se)){ie="";var le=Array.isArray(re[se])&&re[se];if(se==="Parameters"){for(var pe=0;le&&pe<le.length;pe++){if(le[pe]["PropertyName"][["PropertyPath"]].includes("/")){var de=le[pe]["PropertyName"][["PropertyPath"]].split("/");v.push(de[de.length-1])}else{v.push(le[pe]["PropertyName"][["PropertyPath"]])}ie=le[pe];_(ie,a,j,C,h,y,e)}}else if(se==="SelectOptions"){ne=re["SelectOptions"];for(var ue=0;le&&ue<le.length;ue++){oe=ne[ue]["PropertyName"]["PropertyPath"];oe=oe&&oe.replace("/",".");var ce=e.view;var ve=ce.getController();var ge=r.getNavigationParameters(ve,e);var fe=ge.staticParams.sensitiveProperties;if(ne[ue].Ranges){if(m.indexOf(oe)===-1&&fe.indexOf(oe)===-1){m.push(oe);f.push(oe)}}else{f.push(oe);ie=le[ue];_(ie,a,j,C,h,y,e)}}b=I(e,m)}}}if(b){b.forEach(function(t){var r=t&&t.PropertyName;var o=s.getLabelForConfigParams(r,n,a,e)||[];var l=t&&t.Ranges||[];l.forEach(function(e){var t=s.getRelatedTextToRange(e,o,n,r);if(t){e.Text=t}});var p={Parameters:[],SelectOptions:[t]};var u=M(r,O,i,j,e);if(u){r=u.name}a[r]={value:JSON.stringify(p),type:s.getPropertyType(u),description:u&&u.description};a[r]["description"]=x(d,"description");var c=E(u);if(c&&C.includes(c)){h.push(c)}else if(c){y.push(c)}})}var me=k(f);var he=k(v);var ye=k(h);var Pe=k(y);var be=s.addCustomNavigationParametersToManifest(e,a);s.updateRangeValue(a);a["_relevantODataFilters"]={value:me};a["_relevantODataParameters"]={value:he};a["_mandatoryODataParameters"]={value:ye};a["_mandatoryODataFilters"]={value:Pe};a["_customFilters"]={value:be};return t};var j=function(e,t,a){var r="";if(t){for(var n=0;n<e.length;n++){r=r+"${"+e[n]+"},"}}if(a){if(t){return"{= extension.formatters.formatValueColor("+r+JSON.stringify(t)+")}"}else if(e.length){return"{= extension.formatters.kpiValueCriticality(${"+e[0]+"})}"}}else{return"{= extension.formatters.formatTrendIcon("+r+JSON.stringify(t)+")}"}};var U=function(e,t,a){var r=e.view.getModel("ovpCardProperties");var n=e.entityType[r.getProperty("/presentationAnnotationPath")];var i=s.getRequestAtLeastFields(n);var o=r.getProperty("/addODataSelect");var l=r.getProperty("/template");if(e){var p,d="";switch(e.cardComponentName){case"Analytical":var u=e.vizFrame;p=u&&u.getParent();d="data";break;case"List":p=e.view.byId("ovpList");d="items";break;case"Table":p=e.view.byId("ovpTable");d="items";break}var c=w(p,d,i,o,l);a["_contentSkipQuery"]={value:c.skip};if(e.cardComponentName==="List"||e.cardComponentName==="Table"){a["_contentTopQuery"]={value:"$top=13"}}else{a["_contentTopQuery"]={value:c.top}}a["_contentSortQuery"]={value:c.sSortParameters};a["_contentSelectQuery"]={value:c.sSelect};a["_contentExpandQuery"]={value:c.sExpandParam}}if(t==="Numeric"){var v=e.view.byId("kpiHBoxNumeric");var g=w(v,"items",i,o,l);a["_headerSkipQuery"]={value:g.skip};a["_headerTopQuery"]={value:g.top};a["_headerSortQuery"]={value:g.sSortParameters};a["_headerSelectQuery"]={value:g.sSelect};a["_headerExpandQuery"]={value:g.sExpandParam}}};var J=function(e,t){var a=e.cardComponentData.settings;var n=e.view;var i=n&&n.getController();var o=i.oCardComponentData&&i.oCardComponentData.mainComponent;var s=S.getEntityNavigationParameters(o,i.getModel(),e.cardComponentData,i.getCardPropertiesModel(),i.getEntityType()).sNavSelectionVariant;s=s?JSON.parse(s):"";var l=s&&s.SelectOptions;var p=a.requireAppAuthorization;var d={},u={},c={},v={};if(p){d=r.getNavigationIntentFromAuthString(p);c=d.parameters}var g=Object.keys(c);if(g.length>0){for(var m=0;m<g.length;m++){if(!Array.isArray(c[g[m]])){u[g[m]]={defaultValue:{value:c[g[m]]}}}}}if(l&&l.length){l.forEach(function(e){var a=e["PropertyName"];var r=t.filters._relevantODataFilters.value.includes(a),n=t.filters._relevantODataParameters.value.includes(e["PropertyName"]);var i;if(e&&a&&!u[a]&&e.Ranges.length&&e.Ranges[0].Option==="EQ"&&!(r||n)){i=e.Ranges[0].Low;if(i!==undefined||i!==null){try{i=JSON.parse(e.Ranges[0].Low)}catch(e){}if(!Array.isArray(i)){u[a]=i}}}})}v={inbounds:{intent:{signature:{additionalParameters:"allowed"}}}};f.updatePropertyValueForObject(v.inbounds.intent,d.semanticObject,"semanticObject");f.updatePropertyValueForObject(v.inbounds.intent,d.action,"action");f.updatePropertyValueForObject(v.inbounds.intent.signature,u&&Object.keys(u).length?u:null,"parameters");return v};var Q=function(e,t){if(!e||!t){return}var a=e.getMetaModel();var r=a&&a.getODataEntityContainer();var n=r&&r.entitySet;if(!n||!Array.isArray(n)){return}var i=n.length;for(var o=0;o<i;o++){if(n[o].entityType===t){return n[o].name}}};var $=function(e,t,a){if(e.startsWith("/sap/opu/odata")&&!e.endsWith(".xml")){return{uri:e,type:"ODataAnnotation"}}else if((!e.startsWith("/sap/opu/odata")||e.startsWith("/sap/opu/odata"))&&e.endsWith(".xml")){if(t&&a["sap.platform.abap"]){var r=a["sap.platform.abap"].uri;if(e.indexOf("./")===0){e=e.replace("./","")}else if(e.indexOf("/")===0){e=e.replace("/","")}else if(e.indexOf("../")===0){e=e.replace("../","")}e=r+"/"+e}return{uri:e,type:"XML"}}};var B=function(e,t){var a=e.cardComponentData.model.sServiceUrl;var r=e.view.getModel();var n;if(!f.isODataV4(r)){n="{{destinations.service}}"+a+"/$batch"}else{n="{{destinations.service}}"+a+"$batch"}var i={};var s=o.getBatchObject(e,t["configuration"]);i["request"]={url:n,method:"POST",headers:{Accept:"multipart/mixed","X-CSRF-Token":"{{csrfTokens.token1}}"},batch:s};if(i.request.batch.header){i.request.batch.header.url="{{parameters._headerDataUrl}}"}i.request.batch.content.url="{{parameters._contentDataUrl}}";if(!s.header){var l=i["request"].batch.content;l.headers["X-CSRF-Token"]="{{csrfTokens.token1}}";if(!f.isODataV4(r)){l.url="{{destinations.service}}"+a+"/"+l.url}else{l.url="{{destinations.service}}"+a+l.url}i["request"]=l}return i};var q=function(e){var t=e.cardComponentData.model.sServiceUrl;var a={};a["parameters"]=H(e)["filters"];a["destinations"]={service:{name:"(default)",defaultUrl:"/"}};a["csrfTokens"]={token1:{data:{request:{url:"{{destinations.service}}"+t,method:"HEAD",headers:{"X-CSRF-Token":"Fetch"}}}}};return a};var K=function(e,t,a){var r=v.getHeaderDetails(e),s=e.cardComponentData.cardId,l=e.cardComponentData.appComponent.getManifestObject().getRawJson(),p=l["sap.ovp"]["cards"][s].settings,d=e.cardComponentData.settings,u=d&&d.selectedKey,c,g=e.view.getModel();U(e,r,t["configuration"]["parameters"]);var m=t.extension&&r==="Numeric"?v.mainIndicatorDetails(e):"";var h=m&&m.path&&m.path.length?v.mainIndicatorNumberPath(m.path,m.ovpProp):"";i.createKeysFromText(s,p.title,"Title","card Title","header.title");i.createKeysFromText(s,p.subTitle,"Title","card subTitle","header.subTitle");var P=m&&m.valueColor?j(m.valueColor.path,m.valueColor.ovpProp,true):null;var b=m&&m.indicator?j(m.indicator.path,m.indicator.ovpProp,false):null;var C=m&&m.target?m.target:null;var T=m&&m.deviation?m.deviation:null;var S="",D,O="",V,w=[],I={},M={};if(C&&C.parts.length){S=v.targetDeviationValuePath(C,e.view.getModel("ovpCardProperties"),"targetValueFormatter");D=e.view.getModel("ovpCardProperties").getProperty("/bPercentageAvailableForTarget")?"%":null;if(S){f.updatePropertyValueForObject(M,m.target.text,"title");f.updatePropertyValueForObject(M,S,"number");f.updatePropertyValueForObject(M,D,"unit");w.push(M)}}if(m&&m.ovpProp){V=v.mainIndicatorNumberPath(m.path,m.ovpProp,true)}if(T&&T.parts.length){O=v.targetDeviationValuePath(T,e.view.getModel("ovpCardProperties"),"returnPercentageChange");M={};if(O){f.updatePropertyValueForObject(M,m.deviation.text,"title");f.updatePropertyValueForObject(M,O,"number");w.push(M)}}var x=n.getUoMForSubTitle(s);if(r!=="Default"){I={type:r,title:p.title,subTitle:p.subTitle,details:v.generateDetailsExpression(t,p,s,u)};f.updatePropertyValueForObject(I,x,"unitOfMeasurement");f.updatePropertyValueForObject(I,w,"sideIndicators");if(h){I["mainIndicator"]={};f.updatePropertyValueForObject(I.mainIndicator,h,"number");f.updatePropertyValueForObject(I.mainIndicator,P,"state");f.updatePropertyValueForObject(I.mainIndicator,b,"trend");f.updatePropertyValueForObject(I.mainIndicator,V,"unit")}c=I}else{c={type:r,title:p.title,subTitle:p.subTitle,details:v.generateDetailsExpression(t,p,s,u)}}if(a){c.data={path:o.getBatchRequestPath("/header/d/results/0",g)}}if(c.details){c.type="Numeric"}if(t["type"]==="List"||t["type"]==="Table"){c.status=y.getHeaderStatus(a,g)}return c};var W=function(e,t){var a=e.cardComponentData.settings;var r;switch(t["type"]){case"Analytical":r=n.createChartContent(e,a.chartAnnotationPath,t);r.chartProperties["title"]=r.title;delete r.title;break;case"List":r=h.getListContent(e,t);break;case"Table":r=P.getTableContent(e,t);break;default:r={};break}return r};var z=function(e){var t={},a=e.cardComponentData.cardId;t["extension"]=O;t["type"]=e.cardComponentName;t["configuration"]=q(e);t["data"]=B(e,t);t["header"]=K(e,t,t["data"].request.batch);t["content"]=W(e,t);var r=s.getSemanticDateConfiguration(e)||{};if(Object.keys(r).length){t["configuration"]["parameters"]["_semanticDateRangeSetting"]={value:JSON.stringify(r)}}i.replaceStringsWithKeys(t,a);var n=e.view.getModel("ovpCardProperties");var l=n&&n.getProperty("/bInsightDTEnabled");if(l){o.updateBatchObject(e,t["configuration"],true)}return t};var X=function(e){var t=e.cardComponentData.appComponent.getManifest()["sap.app"],a=t.id,r=e.cardComponentData.settings,n=e.cardComponentData.cardId,o=e.cardComponentData.appComponent.getManifestObject().getRawJson(),s=o["sap.app"].i18n&&o["sap.app"].i18n.bundleUrl||o["sap.app"].i18n,l=o["sap.platform.abap"]&&o["sap.platform.abap"].uri,p=r&&r.selectedKey,d=e.view.getModel("ovpCardProperties"),u=d&&d.getProperty("/bInsightRTEnabled");var c=o["sap.fiori"]&&o["sap.fiori"].registrationIds&&o["sap.fiori"].registrationIds[0]||a,v=p?c+".cards."+n+".tab_"+p:c+".cards."+n;var g=p?"../../../":"../../";V=g+s;if(l){if(l.startsWith("/")){l=l.substring(1)}s=l+"/"+s}if(u){v="user."+v+"."+Date.now()}var f;if(u){f={title:t&&t.title||"",subtitle:t&&(t.subtitle||t.description)||""}}else{f=i.getKeysForAppProperties(t,o,e)}var m=f&&f.title,h=f&&f.subtitle,y=H(e),P={id:v,type:"card",embeddedBy:g,i18n:g+s,tags:{keywords:["Analytical","Card","Line","Sample"]},crossNavigation:J(e,y),dataSources:{}};if(m){P.title=m}if(h){P.subTitle=h}var b=e.cardComponentData.appComponent.getManifest()["sap.ovp"];var C=b.globalFilterModel;var T=e.cardComponentData.appComponent.getManifest()["sap.ui5"].models[C].dataSource;var S=t.dataSources;var D=S[T];var O={},w=[],I="",M;if(D&&D.settings){var x=D.settings.annotations,F;x.length&&x.forEach(function(e){for(var t in S){F=S[e].uri;if(t===e&&F){w.push(t);O[t]=$(F,u,o);break}}});if(D&&D.uri){M=$(D.uri,u,o)}I=D.settings&&D.settings["odataVersion"]}P.dataSources=O;P.dataSources["filterService"]={uri:D&&D.uri,settings:{annotations:w,odataVersion:I?I:"2.0"},type:M&&M.type};return P};var G=function(e){var t=e.cardComponentData.appComponent.getManifest()["sap.app"],a=t.id,r=e.cardComponentData.appComponent.getManifest()["sap.ovp"],n=e.view.getModel("ovpCardProperties"),i=n&&n.getProperty("/bInsightRTEnabled"),o="",s=e.cardComponentData.mainComponent.oGlobalFilter,l=s&&s.getEntityType(),p=e.cardComponentData.mainComponent.getOwnerComponent(),d=p.oOvpConfig.sapUICoreVersionInfo||{};if(!r.globalFilterEntitySet){o=Q(s&&s.getModel(),l)}return{templateName:"OVP",parentAppId:a,filterEntitySet:r.globalFilterEntitySet?r.globalFilterEntitySet:o,cardType:i?"RT":"DT",versions:{ui5:d.version+"-"+d.buildTimestamp}}};var Y=function(e){var t={};t["sap.card"]=z(e);t["sap.app"]=X(e);t["sap.insights"]=G(e);var a=T.getCardActions(e,t["sap.card"]);if(a.header.enabled){t["sap.card"].header.actions=a.header.actions}if(a.content.enabled){switch(e.cardComponentName){case"Analytical":t["sap.card"].content.actions=a.content.actions;break;case"List":t["sap.card"].content.item.actions=a.content.actions;break;case"Table":t["sap.card"].content.row.actions=a.content.actions;break}}s.resetSemanticDateRangeConfig();return t};var Z=function(e,t,a){var r=e["sap.card"]["header"][a];if(r&&r.startsWith("{{")){var n=r.split("{{")[1].split("}}")[0];var i=t.view.getModel("@i18n")||t.view.getModel("i18n");r=i?i.getProperty(n):undefined}return r?r:""};var ee=function(e,t,a,r){r.valueState=t;r.valueStateText=a;e.setValueState(r.valueState);e.setValueStateText(r.valueStateText)};var te={createManifestFor:Y,saveCardManifest:function(e,a){t.create().then(function(t){if(!a){var r=e["sap.app"].id;t.writeManifest(r,e)}})},downloadCardManifest:function(e){},createCard:function(t){var a=Y(t),r=window.location.origin,n=r+"/resources",i=new e({height:"533px",width:"314px",manifest:a,baseUrl:n});return i},UpdateManifestDeltaChanges:function(e,t,a,r){var n={_version:"1.1.0",contentDensities:{compact:true,cozy:true},dependencies:{libs:{"sap.insights":{lazy:false}}}};e["sap.ui5"]=n;if(e["sap.app"]["i18n"]!==V){e["sap.app"]["i18n"]=V}o.enhanceHeaderAndContentURLForSemanticDate(e["sap.card"]);o.enhanceHeaderAndContentURL(e["sap.card"]);var s=t.view.getModel("ovpCardProperties");var l=s&&s.getProperty("/bInsightRTEnabled");var p=s&&s.getProperty("/bInsightDTEnabled");if(p){var d=Z(e,t,"title");var u=Z(e,t,"subTitle");var c=m.byId(a+"--titleTextInput");if(c&&c.getValue()){var v=m.byId(a+"--subTitleTextInput");var g=t.cardComponentData.cardId;if(this.titleChanged&&c.getValue()!==d){i.createKeysFromText(g,c.getValue(),"Title","card Title","header.title");this.titleChanged=false}var f=v.getValue();var h=v&&f&&this.subTitleChanged&&f!==u;if(h){i.createKeysFromText(g,f,"Title","card subTitle","header.subTitle");this.subTitleChanged=false}else if(v&&!f){this.subTitleChanged=false;delete e["sap.card"].header.subTitle}}i.inserti18nKeysManifest(e["sap.card"]);i.writei18nPayload();o.updateBatchObject(t,e["sap.card"]["configuration"],false);if(r==="Create"){this.saveCardManifest(e,l)}else if(r==="Download"){this.downloadCardManifest(e)}i.reseti18nProperties()}else if(l){var y=t.view.getModel("@i18n")||t.view.getModel("i18n");if(e["sap.card"].type==="Analytical"){e["sap.card"]["content"].chartProperties.title.text=i.getI18nValueOrDefaultString(e["sap.card"]["content"].chartProperties.title.text,y)}else if(e["sap.card"].type==="Table"){var P=e["sap.card"].content.row.columns;if(Array.isArray(P)&&P.length){P.forEach(function(e,t){P[t].title=i.getI18nValueOrDefaultString(e.title,y)})}}else if(e["sap.card"].type==="List"){var b=e["sap.card"]["content"];var C=(((b||{}).item||{}).info||{}).value;var T=C&&C.split(",").slice(-1);var S=T&&T[0]&&T[0].split("/")[1];var D=e["sap.card"].configuration.parameters;var O=D[S]&&D[S].value;if(O&&O.startsWith("{{")){D[S].value=y.getProperty(S)}}i.fnReplacei18nKeysWithText(e,y)}},showCard:function(e){var t=e.view.getModel("ovpCardProperties"),a=t&&t.getProperty("/bInsightRTEnabled"),r=t&&t.getProperty("/bInsightDTEnabled"),n=this.createCard(e),o=n.getManifest();if(a){this.UpdateManifestDeltaChanges(o,e);return b.getServiceAsync("UIService").then(function(e){return e.showCardPreview(o).then(function(){return Promise.resolve(o)})}).catch(function(e){C.show(e.message)})}else if(r){return new Promise(function(t,a){var r=l.oResourceModel,s=Z(o,e,"title"),u=Z(o,e,"subTitle"),c={draggable:true,cardTitle:s,cardSubTitle:u,valueState:s?"None":"Error",valueStateText:s?"":l.getText("INT_Preview_Title_ValueStateText")},v=new d({dialogSettings:c}),g=f.getApp().getOwnerComponent(),h=g.createId("integrationCardPreview");this.handleCancel=function(){this.previewDialogPromise.then(function(e){e.close();i.reseti18nProperties();e.destroy();this.titleChanged=false;this.subTitleChanged=false}.bind(this))};this.handleTitleLiveChange=function(e){var t=e.getSource();var a=t.getValue();this.previewDialogPromise.then(function(){if(a&&n.getCardHeader().getTitle()!==a){ee(t,"None","",c);n.getCardHeader().setTitle(a);this.titleChanged=true}else if(!a){this.titleChanged=true;ee(t,"Error",l.getText("INT_Preview_Title_ValueStateText"),c)}else{ee(t,"None","",c)}}.bind(this))};this.handleSubTitleLiveChange=function(e){var t=e.getSource();var a=t.getValue();this.previewDialogPromise.then(function(){if(n.getCardHeader().getSubtitle()!==a){n.getCardHeader().setSubtitle(a);this.subTitleChanged=true}}.bind(this))};this.confirmActionHandler=function(){var a=m.byId(h+"--titleTextInput");var r=a&&a.getValue()&&a.getValue().trim();if(r.length===0){ee(a,"Error",l.getText("INT_Preview_Title_ValueStateText"),c);a.focus()}else{this.previewDialogPromise.then(function(a){this.UpdateManifestDeltaChanges(o,e,h,"Create");a.close();a.destroy();t(o)}.bind(this))}};this.downloadCardManifestHandler=function(){this.previewDialogPromise.then(function(a){this.UpdateManifestDeltaChanges(o,e,h,"Download");a.close();a.destroy();t(o)}.bind(this))};this.previewDialogPromise=p.load({id:h,type:"XML",name:"sap.ovp.cards.Integration.Preview",controller:this}).then(function(t){t.setModel(v);t.setModel(e.view.getModel("i18n"),"i18n");t.setModel(r,"ovpResourceModel");var a=m.byId(h+"--subFlexBoxNew");a.addItem(n);this.titleChanged=false;this.subTitleChanged=false;if(e.cardComponentName!=="Analytical"){m.byId(h+"--ovpIntPreviewOverflowLayer").setVisible(true)}t.open();return t}.bind(this)).catch(function(e){D.error("Integration card preview fragment failed to load, "+e)})}.bind(this))}},getFilterDetails:H};return te},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileoverview
 * This file is intended to do all the operations like, property extraction, parsing on Metadata(OData V2) of the application.
 */
sap.ui.predefine("sap/ovp/cards/MetadataAnalyser", ["sap/ovp/app/OVPLogger","sap/base/security/encodeURL","sap/ui/model/analytics/odata4analytics","sap/fe/navigation/SelectionVariant","sap/base/util/each"],function(e,t,a,r,n){"use strict";var i=new e("OVP.cards.MetadataAnalyser");function o(e,t){if(!e||!e.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var a=e.getMetaModel();var r=a.getODataEntitySet(t);var n=a.getODataEntityType(r.entityType);return n.property?Array.from(n.property):[]}function s(e,t,a){if(!e||!e.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var r=e.getMetaModel();var n={entitySetName:null,parameters:[],navPropertyName:null};var i=r.getODataEntitySet(t);var o=r.getODataEntityType(i.entityType);var s=o.navigationProperty;if(!s){return n}s.filter(function(e){var t=r.getODataAssociationEnd(o,e.name);var s=r.getODataEntityType(t.type);if(s["sap:semantics"]==="parameters"&&s.key){n.entitySetName=r.getODataAssociationSetEnd(o,e.name).entitySet;for(var m=0;m<s.key.propertyRef.length;m++){if(a){var p=s.property;for(var y=0;y<p.length;y++){if(p[y].name===s.key.propertyRef[m].name){n.parameters.push(p[y]);n.entitySetName=r.getODataAssociationSetEnd(o,e.name).entitySet}}}else{n.parameters.push(s.key.propertyRef[m].name)}}var l=s.navigationProperty;var u=l.some(function(e){var t=r.getODataAssociationEnd(s,e.name).type;t===i.entityType?n.navPropertyName=e.name:Function.prototype();return n.navPropertyName});return u&&n.navPropertyName&&n.entitySetName}return false});return n}function m(e,t){if(!e||!e.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var a=e.getMetaModel();var r=a.getODataEntitySet(t);if(r&&r.entityType){var n=a.getODataEntityType(r.entityType);if(n["sap:semantics"]&&n["sap:semantics"]==="aggregate"){return true}}return false}function p(e,t){return t.property.filter(function(t){return t.name===e})}function y(e,t){return e.filter(function(e){if(e.name===t){return e}})}function l(e,a,r,n){var m="";var p=[];if(n&&n.Parameters){e.parameters.forEach(function(r){n.Parameters.forEach(function(n){var i=n.PropertyName.PropertyPath.split("/");i=i[i.length-1];if(i===r){var o=n.PropertyValue.String;o=t(a.formatValue(o,e["parameterType"][r]));p.push(i+"="+o)}})});var l=n.Parameters.map(function(e){return e&&e.PropertyName&&e.PropertyName.PropertyPath});var u=s(a,r.name);if(u.entitySetName){var f=o(a,u.entitySetName);var v=u.parameters.filter(function(e){return!l.includes(e)});for(var g=0;g<v.length;g++){var P=v[g].split("/");var c=P[P.length-1];var h=y(f,c);var d=false;if(h.length>0){var S=h[0];d=S.type==="Edm.String"&&S["sap:parameter"]==="optional"}if(d){p.push(c+"="+"")}}}}else{m="/"+r.name;i.error("SelectionParameters","There are no parameters to resolve");return m}try{m="/"+e.entitySetName+"("+p.join(",")+")/"+e.navPropertyName}catch(e){m="/"+r.name;i.error("getEntitySetPathWithParameters","binding path with parameters failed - "+e||e.message)}return m}function u(e,t,m,p,l,u){var f=[];var v="";var g=new a.Model(a.Model.ReferenceByModel(e));var P=g.findQueryResultByName(t.name);var c=new a.QueryResultRequest(P);var h=P.getParameterization();if(!h){v="/"+t.name;return u?f:v}if(l){var d=l.getAnalyticalParameters()}if(h){var S;c.setParameterizationRequest(new a.ParameterizationRequest(h));if(m&&m.Parameters){n(m.Parameters,function(){if(this.RecordType==="com.sap.vocabularies.UI.v1.IntervalParameter"){S=this.PropertyNameFrom.PropertyPath.split("/");c.getParameterizationRequest().setParameterValue(S[S.length-1],this.PropertyValueFrom.String,this.PropertyValueTo.String)}else{S=this.PropertyName.PropertyPath.split("/");c.getParameterizationRequest().setParameterValue(S[S.length-1],this.PropertyValue.String)}});var E=m.Parameters.map(function(e){return e&&e.PropertyName&&e.PropertyName.PropertyPath});var N=s(e,t.name);if(N.entitySetName){var M=o(e,N.entitySetName);var O=N.parameters.filter(function(e){return!E.includes(e)});for(var R=0;R<O.length;R++){S=O[R].split("/");var T=S[S.length-1];var w=y(M,T);var D=false;if(w.length>0){var V=w[0];D=V.type==="Edm.String"&&V["sap:parameter"]==="optional";f.push(V)}if(D){c.getParameterizationRequest().setParameterValue(T,"")}}}}else if(p&&p.length>0){n(p,function(){c.getParameterizationRequest().setParameterValue(this.path,this.value)})}else if(d&&d.length>0){var z=l&&l.getUiState({allFilters:false});var A=z?JSON.stringify(z.getSelectionVariant()):"{}";var m=new r(A);for(var b in h.getAllParameters()){for(var R=0;R<d.length;R++){if(d[R]&&d[R].name==b){var q=d[R].name;var k=m.getParameter(q);if(!k){var F=m.getSelectOption(q);k=F&&F[0]&&F[0].Low}c.getParameterizationRequest().setParameterValue(b,k)}}}}else{v="/"+t.name;i.error("SelectionParameters","There are no parameters to resolve");return u?f:v}}try{v=c.getURIToQueryResultEntitySet()}catch(e){P=c.getQueryResult();v="/"+P.getEntitySet().getQName();i.error("getEntitySetPathWithParameters","binding path with parameters failed - "+e||e.message)}return u?f:v}function f(e,t,a,r,n){var i="";if(m(e,t.name)){i=u(e,t,a,r,n)}else{var p=s(e,t.name);var y=o(e,t.name);var f={};if(p){p["parameters"].forEach(function(e){y.forEach(function(t){if(t["name"]==e){f[e]=t["type"]}})});p["parameterType"]=f;i=l(p,e,t,a)}else{i="/"+t.name}}return i}return{getPropertyOfEntitySet:o,getParametersByEntitySet:s,checkAnalyticalParameterisedEntitySet:m,getPropertyFromEntityType:p,resolveTransactionalParameterizedEntitySet:l,resolveAnalyticalParameterizedEntitySet:u,resolveParameterizedEntitySet:f}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/NavigationHelper", ["sap/ovp/cards/AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/core/CustomData","sap/ovp/cards/CommonUtils","sap/fe/navigation/SelectionVariant","sap/fe/navigation/PresentationVariant","sap/ovp/cards/jUtils","sap/base/util/merge","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/ovp/app/OVPLogger","sap/m/MessageToast","sap/ui/core/library","sap/ui/model/FilterOperator","sap/ui/generic/app/library","sap/ui/thirdparty/jquery","sap/ovp/app/resources","sap/m/MessageBox"],function(e,t,a,r,i,n,o,s,l,c,v,p,u,f,m,g,jQuery,d,h){"use strict";var y=new p("OVP.cards.NavigationHelper");var S=f.TextDirection;function P(n,o,s,l,c,v){if(!s){return[]}var p=[];var u=l.getProperty("/template");var f=i.isODataV4(o);if(!c&&!n){if(!v){var m=l.getProperty("/kpiAnnotationPath");if(m&&u==="sap.ovp.cards.charts.analytical"){c=m;var g=s[c];var d=g&&g.Detail;if(d){var h=d.SemanticObject&&d.SemanticObject.String;var S=d.Action&&d.Action.String;if(d.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){if(h&&S){p.push({type:d.RecordType,semanticObject:h,action:S,label:""})}else{y.error("Invalid Semantic object and action configured for annotation "+d.RecordType)}}}else{throw new Error("KPI does not have a KPIDetailType annotation")}}}}if(!c){var v=l.getProperty("/identificationAnnotationPath");var P=v?v.split(","):[];if(P&&P.length>1){c=P[0]}else{c=v}}if(f){c="@"+c}var b=s[c];if(Array.isArray(b)){b=e.sortCollectionByImportance(b);for(var I=0;I<b.length;I++){var F=f?b[I].$Type:b[I].RecordType;var O=f?b[I].Label:b[I].Label&&b[I].Label.String;if(F==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var h=f?b[I].SemanticObject:b[I].SemanticObject.String;var S=f?b[I].Action:b[I].Action.String;p.push({type:F,semanticObject:h,action:S,label:O||null})}if(F==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&!b[I].Url.UrlRef){var A=o.getMetaModel();var C,D;if(f){C=n?n.getInterface(0).getPath():"/"+l.getInterface().getData().entitySet;var V=A.createBindingContext(C);D=a.format(b[I].Url,{context:V})}else{C=s.$path;var V=A.createBindingContext(C);D=t.format(V,b[I].Url)}var k=new r({key:"url",value:D});if(n&&u==="sap.ovp.cards.charts.analytical"){o=n.getModel()}k.setModel(o);k.setBindingContext(n);var x=k.getValue();var N=f?b[I].Value:b[I].Value.String;p.push({type:F,url:x,value:N,label:O||null})}}}return p}function b(e){if(!e){return false}var t=e.getProperty("/template");var a=e.getProperty("/navigation");return a==="noHeaderNav"&&["sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.v4.charts.analytical"].indexOf(t)>-1}function I(e,t){var a=i.isODataV4(e);if(t&&t.length){for(var r=0;r<t.length;r++){var n=t[r];var o=a?n.$Type:n.RecordType;if(o==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||o==="com.sap.vocabularies.UI.v1.DataFieldForAction"||o==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return true}}}return false}function F(e,t){var a=i.isODataV4(e);if(t){var r=a?"@com.sap.vocabularies.UI.v1.LineItem":"com.sap.vocabularies.UI.v1.LineItem";var n=t[r];var o=a?n&&n[0].$Type:n&&n[0].RecordType;if(o){return o==="com.sap.vocabularies.UI.v1.DataFieldForAction"||o==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"}}return false}function O(e,t,a){var r=i.isODataV4(e);var n=a&&a.getProperty("/annotationPath");if(t&&n){n=r?"@"+n:n;var o=t[n];return this.isNavigationInAnnotation(e,o)}return false}function A(e,t,a){var r=i.isODataV4(e);var n=a&&a.getProperty("/template");if(t&&a){var o=a.getProperty("/identificationAnnotationPath");var s=o;var l=a.getProperty("/contentFragment");if(l==="sap.ovp.cards.stack.Stack"||l==="sap.ovp.cards.quickview.Quickview"){var c=o?o.split(","):[];if(c&&c.length>1){if(l==="sap.ovp.cards.stack.Stack"){s=c[0]}else{s=c[1]}}}var v=r?t["@"+s]:t[s];if(this.isNavigationInAnnotation(e,v)){return true}if(n==="sap.ovp.cards.charts.analytical"||n==="sap.ovp.cards.v4.charts.analytical"){var p=a.getProperty("/kpiAnnotationPath");if(t&&p){var u=t[p];if(u&&u.Detail){var f=u.Detail.SemanticObject&&u.Detail.SemanticObject.String;var m=u.Detail.Action&&u.Detail.Action.String;if(f&&m){return true}}}}}else if(a&&(n==="sap.ovp.cards.linklist"||n==="sap.ovp.cards.v4.linklist")&&a.getProperty("/staticContent")&&a.getProperty("/targetUri")){return true}return false}function C(e,t){for(var a=0;a<e.property.length;a++){var r=e.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"];var i=r&&r.Bool;if(i){t.removeSelectOption(e.property[a].name)}}}function D(e,t){for(var a in e.property){if(typeof e.property[a]==="object"&&e.property[a].$kind==="Property"){var r=e.property[a];var i=r.annotations&&r.annotations["@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]||false;if(i){t.removeSelectOption(a)}}}}function V(e){var t=e.getParameterNames();for(var a=0;a<t.length;a++){if(e.getParameter(t[a])===""){e.removeParameter(t[a])}}var r=e.getSelectOptionsPropertyNames();for(a=0;a<r.length;a++){var i=e.getSelectOption(r[a]);for(var n=0;n<i.length;n++){if(i[n].Low===""&&!i[n].High){i.splice(n,1);n--}}e.removeSelectOption(r[a]);if(i.length>0){e.massAddSelectOption(r[a],i)}}return e}function k(e,t){var a=e.sFunctionLabel||"";var r={batchGroupId:"Changes",changeSetId:"Changes",urlParameters:t,forceSubmit:true,context:e.oContext,functionImport:e.oFunctionImport};var n=new Promise(function(t,i){var n=e.oContext.getModel();var o;o="/"+r.functionImport.name;n.callFunction(o,{method:r.functionImport.httpMethod,urlParameters:r.urlParameters,batchGroupId:r.batchGroupId,changeSetId:r.changeSetId,headers:r.headers,success:function(e,a){t(a)},error:function(e){e.actionText=a;i(e)}})});n.then(function(e){return u.show(d.getText("Toast_Action_Success"),{duration:1e3})},function(e){var t=i.showODataErrorMessages(e);if(t===""&&e.actionText){t=d.getText("Toast_Action_Error")+' "'+e.actionText+'"'+"."}return h.error(t,{title:d.getText("OVP_GENERIC_ERROR_TITLE"),onClose:null,styleClass:"",initialFocus:null,textDirection:S.Inherit})})}function x(e){var t;if(e&&e.mainComponent){t=e.mainComponent._getFilterPreference(e.cardId)}return t}function N(e,t){var a=[];if(e&&e.filterAll==="card"){a=t.getSelectOptionsPropertyNames()}else if(e&&e.cardFilter){a=e.cardFilter}a.forEach(function(e){if(e!=="$.basicSearch"){t.removeSelectOption(e)}});return t}function E(e,t){var a=true;if(e&&e.filterAll==="global"){a=false}else if(e&&e.globalFilter){if(e.globalFilter.indexOf(t)>=0){a=false}}return a}function L(e,t){var a=e&&e.getUiState({allFilters:false});var r=a?JSON.stringify(a.getSelectionVariant()):"{}";var i=new n(r);var o,s,l,c;var v=this.getFilterPreference();i=this.removeFilterFromGlobalFilters(v,i);var p=t.filters;var u=t.parameters;for(var f=0;f<p.length;f++){o=p[f];if(o.path&&o.operator&&typeof o.value1!=="undefined"){s=o.value1.toString();l=typeof o.value2!=="undefined"?o.value2.toString():undefined;if(this._checkIfCardFiltersAreValid(v,o.path)){i.addSelectOption(o.path,o.sign,o.operator,s,l)}}}var m,g,d;for(var h=0;h<u.length;h++){c=u[h];if(!c.path||!c.value){continue}m=c.path.split("/").pop();m=m.split(".").pop();if(m.indexOf("P_")===0){g=m;d=m.substr(2)}else{g="P_"+m;d=m}if(i.getParameter(g)){continue}if(i.getParameter(d)){continue}i.addParameter(m,c.value)}return i}function T(e,t,a,r,i){if(!e||!t){return}var n;if(a&&a.bStaticLinkListIndex){var o=t.getProperty("/staticContent");n=o[a.iStaticLinkListIndex]["customParams"];a=null}else{n=t.getProperty("/customParams")}if(!n||!e.templateBaseExtension.provideCustomParameter||!e.onCustomParams){return}var p=e.templateBaseExtension.provideCustomParameter(n)?e.templateBaseExtension.provideCustomParameter(n):e.onCustomParams(n);if(!p||!s.checkIfFunction(p)){return}var u=l({},a);var f=l({},r);var m;try{m=p(u,f)}catch(e){y.error("Could not process custom navigation parameters for the card. Plese check the implementation for the custom parameters extension implementation",e)}if(!m||!Array.isArray(m)&&!c(m)){return}var g=c(m);if(g&&v(m)){return}var d=g&&(!!m.bIgnoreEmptyString||!!m.ignoreEmptyString);var h=g?m.aSelectionVariant||m.selectionVariant:m;if(!Array.isArray(h)){return}var S,P,b,I,F,O;P=h.length;for(S=0;S<P;S++){b=h[S];if(!b){continue}I=b.path;F=b.value1;O=b.value2;if(!I||typeof I!=="string"||I===""){y.error("Custom Variant property path '"+I+"' should be valid string");continue}if(!(F||F===0||F===false||F==="")){continue}F=F.toString();O=O&&O.toString();if(a){delete a[I]}if(i){delete i[I]}if(F===""&&d){r.removeSelectOption(I)}r.addSelectOption(I,b.sign,b.operator,F,O)}if(d){this._removeEmptyStringsFromSelectionVariant(r)}return d}function U(t,a,r,s,l,c,v,p){var u={};var f,d,h;var y=r?r.globalFilter:undefined;var S=s&&s.getProperty("/staticContent");var P=i.isODataV4(a);if(!S){var b=e.getCardSelections(s,P);var I=b.filters;var F=b.parameters;I&&I.forEach(function(e){e.path=e.path.replace("/",".");switch(e.operator){case m.NE:e.operator=m.EQ;e.sign="E";break;case m.Contains:e.operator="CP";var t=e.value1;e.value1="*"+t+"*";break;case m.EndsWith:e.operator="CP";var t=e.value1;e.value1="*"+t;break;case m.StartsWith:e.operator="CP";var t=e.value1;e.value1=t+"*"}});b.filters=I;if(p&&c&&c.hasOwnProperty("$isOthers")){var O=p.getOtherNavigationDimensions();for(var A in O){var C=O[A];for(var D=0;D<C.length;D++){b.filters.push({path:A,operator:"EQ",value1:C[D],sign:"E"})}}}F&&F.forEach(function(e){e.path=e.path.replace("/",".")});b.parameters=F;var V=e.getCardSorters(s,P);if(c){var A;for(var D=0;l.property&&D<l.property.length;D++){A=l.property[D].name;var k=c[A];if(c.hasOwnProperty(A)){if(Array.isArray(c[A])&&c[A].length===1){u[A]=c[A][0]}else if(jQuery.type(k)!=="object"){u[A]=k}}}}var x=s&&s.getProperty("/kpiAnnotationPath");var N=s&&s.getProperty("/template");if(x&&N==="sap.ovp.cards.charts.analytical"){var E=l[x];var L=E&&E.Detail;if(L&&L.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){u["kpiID"]=E.ID.String}}d=V&&new o(V);f=this._buildSelectionVariant(y,b);h=s&&s.getProperty("/staticParameters")}else{var T=y&&y.getUiState({allFilters:false});var U=T?JSON.stringify(T.getSelectionVariant()):"{}";f=new n(U);var _=r||null;var w=this.getFilterPreference(_);f=this.removeFilterFromGlobalFilters(w,f);if(S[v.iStaticLinkListIndex].params){h=S[v.iStaticLinkListIndex].params}else if(S[v.iStaticLinkListIndex].staticParameters){h=S[v.iStaticLinkListIndex].staticParameters}}var j;if(v&&!v.bStaticLinkListIndex){j=this.processCustomParameters(t,s,v,f,u)}else if(v&&v.bStaticLinkListIndex){j=this.processCustomParameters(t,s,v,f)}else{j=this.processCustomParameters(t,s,u,f)}var M=j?g.navigation.service.SuppressionBehavior.ignoreEmptyString:undefined;if(h){for(var A in h){if(!u.hasOwnProperty(A)){u[A]=h[A]}}}var B=i.getNavigationHandler();var R=B&&B.mixAttributesAndSelectionVariant(u,f.toJSONString(),M);if(!S){if(P){this._removeSensitiveAttributesFromNavSelectionVariantForODataV4Model(l,R)}else{this._removeSensitiveAttributesFromNavSelectionVariantForODataV2Model(l,R)}}return{sNavSelectionVariant:R?R.toJSONString():null,sNavPresentationVariant:d?d.toJSONString():null}}return{_checkIfCardFiltersAreValid:E,processCustomParameters:T,_removeSensitiveAttributesFromNavSelectionVariantForODataV2Model:C,_removeSensitiveAttributesFromNavSelectionVariantForODataV4Model:D,_removeEmptyStringsFromSelectionVariant:V,_buildSelectionVariant:L,getEntityNavigationEntries:P,checkHeaderNavigationDisabledForAnalyticalCard:b,isNavigationInAnnotation:I,checkNavigationForLinkedList:F,checkLineItemNavigation:O,checkNavigation:A,callFunction:k,getFilterPreference:x,removeFilterFromGlobalFilters:N,getEntityNavigationParameters:U}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/OVPCardAsAPIUtils", ["sap/ovp/app/OVPLogger","sap/ui/core/Component"],function(t,e){"use strict";var a=new t("OVP.cards.OVPCardsAsAPIUtils");var n=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line","sap.ovp.cards.v4.charts.analytical","sap.ovp.cards.v4.charts.smart.chart","sap.ovp.cards.v4.charts.bubble","sap.ovp.cards.v4.charts.donut","sap.ovp.cards.v4.charts.line","sap.ovp.cards.error"];function s(){return n}function i(t,e,n){var s={};s.message=t;if(n){s._oError=n;s.getActualError=function(){return s._oError}}a.error(s.message);e(s)}function r(t){var e=false;var a=t.getOwnerComponent();if(!!a){var n=a.getComponentData();if(!!n&&n.ovpCardsAsApi){e=true}}return e}function o(t,e){var a=e.manifest;var n;for(var s in a.cards){n=s}var i=a.cards[n];if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.settings.chartAnnotationPath=t.chartAnnotationPath;i.settings.navigation=t.navigation}if(t.entitySet){i.settings.entitySet=t.entitySet}i.settings.annotationPath=t.annotationPath;i.settings.dynamicSubtitleAnnotationPath=t.dynamicSubtitleAnnotationPath;i.settings.presentationAnnotationPath=t.presentationAnnotationPath;i.settings.selectionAnnotationPath=t.selectionAnnotationPath;i.settings.selectionPresentationAnnotationPath=t.selectionPresentationAnnotationPath;i.settings.kpiAnnotationPath=t.kpiAnnotationPath;i.settings.dataPointAnnotationPath=t.dataPointAnnotationPath;i.settings.identificationAnnotationPath=t.identificationAnnotationPath;i.settings.headerAnnotationPath=t.headerAnnotationPath;i.settings.selectedKey=t.selectedKey;if(i){a.cards[n]=i;d.createCardComponent(e.parentView,a,e.containerId,e.selectionVariant)}}function p(t){var e=true;if(t.template==="sap.ovp.cards.error"||(t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&t.settings.staticContent){e=false}return e}function l(t,e){var a=[],n=[],s,i;var r=e.getSelectOptionsPropertyNames();for(s=0;s<r.length;s++){var o=e.getSelectOption(r[s]);if(o&&o.length>0){for(i=0;i<o.length;i++){if(o[i]){var p={path:r[s],operator:o[i].Option,value1:o[i].Low,sign:o[i].Sign};if(o[i].High){p.value2=o[i].High}a.push(p)}}}}var l=e.getParameterNames();for(s=0;s<l.length;s++){var c={path:l[s],value:e.getParameter(l[s])};n.push(c)}t.settings.filters=a;t.settings.parameters=n;return t}function c(t,a,s,r,o){return new Promise(function(c,d){var v,f,h="";if(!!a){for(var u in a.cards){if(a.cards.hasOwnProperty(u)){v=a.cards[u];f=u}}if(!!v&&!!f){if(!!v.template&&!!v.settings&&(!!v.model||!p(v))){if(n.indexOf(v.template)!==-1){if(!!s&&typeof s==="string"){if(!!t){var g=!v.model?undefined:t.getModel(v.model);var m;if(!p(v)){m=Promise.resolve()}else{if(g&&g.getODataVersion&&g.getODataVersion()=="4.0"){m=g.getMetaModel().requestObject("/"+v.settings.entitySet)}else{m=g.getMetaModel().loaded()}}m.then(function(){var n=false;if(r){v=l(v,r);n=true}v.settings.ignoreSelectionVariant=n;var p={name:v.template,componentData:{model:g,ovpCardsAsApi:true,parentView:t,manifest:a,containerId:s,selectionVariant:r,fnCheckNavigation:o,showDateInRelativeFormat:a.showDateInRelativeFormat,disableTableCardFlexibility:a.disableTableCardFlexibility,template:v.template,i18n:t.getModel("@i18n"),cardId:f,settings:v.settings,appComponent:null,mainComponent:null}};e.create(p).then(function(e){var a=t.byId(s);if(!!a){var n=a.getComponentInstance();e.setModel(g);a.setComponent(e);if(n){setTimeout(function(){n.destroy()},0)}c(true)}else{h="Component Container '"+s+"' is not present in the current View";i(h,d)}},function(t){h="Component creation failed";i(h,d,t)})},function(t){h="MetaModel was not loaded";i(h,d,t)})}else{h="First argument oView is null";i(h,d)}}else{h="ContainerId should be of type string and not null";i(h,d)}}else{h=v.template+" card type is not supported in the API";i(h,d)}}else{h="Cards template or model or settings are not defined";i(h,d)}}else{h="Cards manifest entry or cardId is null";i(h,d)}}else{h="Second argument oManifest is null";i(h,d)}})}var d={createCardComponent:c,recreateCard:o,checkIfAPIIsUsed:r,getSupportedCardTypes:s};return d},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/PayLoadUtils", ["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/app/OVPUtils","sap/base/util/merge","sap/ui/model/odata/CountMode"],function(jQuery,t,e,i,a,s){"use strict";function n(t,e,i,a){return t+"_sap.ovp.cards."+e+"."+i+"."+a}function r(t){return{type:"XTIT",maxLength:40,value:{"":t}}}function o(){return{i18n:"../i18n/i18n.properties"}}function d(t,e,i){var a=t+"["+e+"]";if(i){a+="/"+i}return a}function f(t,e){var i=e._getCardsModel();for(var a=0;a<i.length;a++){if(i[a].id===t){return true}}return false}function l(t,e,i){var a={propertyPath:t,operation:e};if(i){a["propertyValue"]=i}return a}function g(t){delete t.id;delete t.dashboardLayout;delete t.settings.baseUrl;delete t.settings.cloneCard;delete t.settings.newCard;delete t["customer.settings"];delete t["customer_base.settings"];delete t["vendor.settings"];if(t.settings["staticContent"]){for(var e=0;e<t.settings["staticContent"].length;e++){delete t.settings["staticContent"][e].id}}}function c(e,i,a,s){if(a){if(e===t._getLayerNamespace()+".settings"){a[s]={operation:"DELETE"}}}else{if(e===t._getLayerNamespace()+".settings"){K.aEntityPropertyChange.push(l(i,"UPSERT",{operation:"DELETE"}))}else{K.aEntityPropertyChange.push(l(i,"DELETE"))}}}function p(e){K.aEntityPropertyChange.push(l(t._getLayerNamespace()+".settings","UPSERT",e[t._getLayerNamespace()+".settings"]))}function u(e,a,s,o,d,f){var g;var c=t._getLayer();if(!K.oText){K.oText={}}if(!c||c===i.Layers.customer){g=n(K.sApplicationId,K.sCardId,e,s);K.oText[g]=r(o)}else{var p=false;for(var u in d.ai18nProperties){if(d.ai18nProperties[u].value===o){g=d.ai18nProperties[u].key;p=true;break}}if(!p){g=n(K.sApplicationId,K.sCardId,e,s)}K.oText[g]=r(o)}if(f){f[s]="{{"+g+"}}"}else{var h=a+"/"+s;K.aEntityPropertyChange.push(l(h,"UPSERT","{{"+g+"}}"))}}function h(a,s,n,r){var o=this._oCardManifestSettings,d=this._oOriginalCardManifestSettings;for(var f=0;f<n.length;f++){if(!d[n[f]]&&o[n[f]]||d[n[f]]&&o[n[f]]&&d[n[f]]!=o[n[f]]){if(r){u(a,a,n[f],o[n[f]],o,s[a])}else{u(a,a,n[f],o[n[f]],o)}var l=t._getLayer();if(!l||l===i.Layers.customer){s.settings[n[f]]=o[n[f]]}else{var g=e.oI18nValueProperty;if(g[n[f]]){s.settings[n[f]]=this._oCardManifestSettings[g[n[f]]]}else{s.settings[n[f]]=o[n[f]]}}}else if(!o[n[f]]&&d[n[f]]){if(r){c(a,a+"/"+n[f],s[a],n[f])}else{c(a,a+"/"+n[f])}delete s.settings[n[f]]}}}function C(t,e,i,a){var s=t+"/"+e;if(a){a[e]=i}else{K.aEntityPropertyChange.push(l(s,"UPSERT",i))}}function v(t,e,i,a){var s=this._oCardManifestSettings,n=this._oOriginalCardManifestSettings;for(var r=0;r<i.length;r++){if(!n[i[r]]&&s[i[r]]||n[i[r]]&&s[i[r]]&&n[i[r]]!=s[i[r]]||typeof n[i[r]]==="boolean"&&typeof s[i[r]]==="boolean"&&n[i[r]]!=s[i[r]]){if(a){C(t,i[r],s[i[r]],e[t])}else{C(t,i[r],s[i[r]])}e.settings[i[r]]=s[i[r]]}else if(!s[i[r]]&&n[i[r]]){if(a){c(t,t+"/"+i[r],e[t],i[r])}else{c(t,t+"/"+i[r])}delete e.settings[i[r]]}}}function m(i,a){var s=e.cardSettings["settings"],n=e.cardSettings["text"];if(i===t._getLayerNamespace()+".settings"){if(a[t._getLayerNamespace()+".settings"]){h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false)}else{a[t._getLayerNamespace()+".settings"]={};h.bind(this)(i,a,n,true);v.bind(this)(i,a,s,true);p(a)}}else{h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false)}}function y(t,e,i,a,s,n){var r=this._oCardManifestSettings;var o=r[s];for(var f=0;f<o.length;f++){for(var l=0;l<a.length;l++){if(o[f][a[l]]){var g=d(t+"/"+s,f),c=t+"."+s+"."+f;if(n){u(c,g,a[l],o[f][a[l]],r,e[t][s][f])}else{u(c,g,a[l],o[f][a[l]],r,i[f])}}}}if(!n){C(t,s,i)}}function S(t,i){var a=e.cardSettingsArrayLevel[i]["onlyTabLevelProps"],s=false;for(var n=0;a&&n<a.length;n++){if(a[n]===t){s=true;break}}return s}function _(t,e,i,a,s,n){var r=this._oCardManifestSettings,o;for(o=0;o<i.length;o++){if(r[i[o]]&&!S(i[o],s)){if(n){u(t,t,i[o],r[i[o]],r,e[t])}else{u(t,t,i[o],r[i[o]],r)}e.settings[i[o]]=r[i[o]]}}for(o=0;o<a.length;o++){if(r[a[o]]&&!S(a[o],s)){if(n){C(t,a[o],r[a[o]],e[t])}else{C(t,a[o],r[a[o]])}e.settings[a[o]]=r[a[o]]}}if(n){c(t,t+"/"+s,e[t],s)}else{c(t,t+"/"+s)}delete e.settings[s]}function b(t,e,i,a,s,n,r){var o;for(o=0;o<a.length;o++){if(e[t][a[o]]){if(r){c(t,t+"/"+a[o],e[t],a[o])}else{c(t,t+"/"+a[o])}delete e.settings[a[o]]}}for(o=0;o<s.length;o++){if(e[t][s[o]]){if(r){c(t,t+"/"+s[o],e[t],s[o])}else{c(t,t+"/"+s[o])}delete e.settings[s[o]]}}y.bind(this)(t,e,i,a,n,r)}function M(t,i){return jQuery.map(a({},t),function(t){var a=e.cardSettingsArrayLevel[i]["text"],s,n=e.cardSettingsArrayLevel[i]["settings"],r={};for(s=0;s<a.length;s++){if(t[a[s]]){r[a[s]]=t[a[s]]}}for(s=0;s<n.length;s++){if(t[n[s]]||t[n[s]]===""){r[n[s]]=t[n[s]]}}return r})}function P(t,i,a,s){var n=e.cardSettingsArrayLevel[a]["checkForRemoval"],r,o;for(r=0;r<n.length;r++){if(!i[0][n[r]]){o=t.indexOf(n[r]);if(s==="remove"){if(o>-1){t.splice(o,1)}}else if(s==="add"){if(o===-1){t.push(n[r])}}}}return t}function I(i,a,s,n,r,o){var d=e.cardSettingsArrayLevel[r]["text"],f=e.cardSettingsArrayLevel[r]["settings"],l=M(s,r);if(s&&n){a.settings[r]=M(s,r);if(i===t._getLayerNamespace()+".settings"){a[i][r]=M(s,r)}y.bind(this)(i,a,l,d,r,o)}else if(!s&&n){_.bind(this)(i,a,d,f,r,o)}else if(s&&!n){a.settings[r]=M(s,r);if(i===t._getLayerNamespace()+".settings"){a[i][r]=M(s,r)}f=P(f,l,r,"remove");b.bind(this)(i,a,l,d,f,r,o);f=P(f,l,r,"add")}}function L(t,e,i){var a=this._oCardManifestSettings["staticContent"],s=this._oOriginalCardManifestSettings["staticContent"],n=this._oCardManifestSettings["tabs"],r=this._oOriginalCardManifestSettings["tabs"];if(a||s){I.bind(this)(t,e,a,s,"staticContent",i)}else if(n||r){I.bind(this)(t,e,n,r,"tabs",i)}}function A(i,a){var s=e.cardSettingsForComplex["settings"],n=e.cardSettingsForComplex["text"];if(i===t._getLayerNamespace()+".settings"){if(a[t._getLayerNamespace()+".settings"]){h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false);L.bind(this)(i,a,false)}else{a[t._getLayerNamespace()+".settings"]={};h.bind(this)(i,a,n,true);v.bind(this)(i,a,s,true);L.bind(this)(i,a,true);p(a)}}else{h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false);L.bind(this)(i,a,false)}}function x(t,e){var i=this._oCardManifestSettings["staticContent"],a=this._oOriginalCardManifestSettings["staticContent"],s=this._oCardManifestSettings["tabs"],n=this._oOriginalCardManifestSettings["tabs"];if(i||a||s||n){A.bind(this)(t,e)}else{m.bind(this)(t,e)}}function N(i){var a=e.AllCardSettingsForKPICard,s,n=this._oCardManifestSettings,r={model:t._getLayerNamespace()+".kpi_card_model_"+i.getTrimmedDataURIName(n.selectedKPI.ODataURI),template:"sap.ovp.cards.charts.analytical",settings:{}};for(s=0;s<a.length;s++){if(n[a[s]]){r.settings[a[s]]=n[a[s]]}}if(n["addCustomParameters"]){r.settings.staticParameters={};var o=n["aAllStaticParameters"];if(Array.isArray(o)&&o.length>0){for(var d=0;d<o.length;d++){var f=o[d];r.settings.staticParameters[f.key]=f.value}}}return r}function w(){var t=this._oCardManifestSettings["staticContent"],i=e.cardSettingsArrayLevel["staticContent"]["text"],a,s,n=e.cardSettingsArrayLevel["staticContent"]["settings"],r=this._oCardManifestSettings,o=e.cardSettingsForStaticLinkListCard,d={template:"sap.ovp.cards.linklist",settings:{staticContent:[]}};for(s=0;s<o.length;s++){if(r[o[s]]){d.settings[o[s]]=r[o[s]]}}for(s=0;s<t.length;s++){d.settings["staticContent"].push({});for(a=0;a<i.length;a++){if(t[s][i[a]]){d.settings["staticContent"][s][i[a]]=t[s][i[a]]}}for(a=0;a<n.length;a++){if(t[s][n[a]]){d.settings["staticContent"][s][n[a]]=t[s][n[a]]}}}return d}function D(t){var i=e.NewCardSettings,a;var s=this._oCardManifestSettings;i.forEach(function(t){if(t.template===this._oCardManifestSettings.template){a=t}}.bind(this));var n={model:this._oCardManifestSettings.model,template:a.template,settings:{}};if(!this._oCardManifestSettings["tabs"]){var r=a.cardSettings;var o=e.oI18nValueProperty;for(var d=0;d<r.length;d++){if(!t.bAddNewCardFlag){if(s[r[d]]){n.settings[r[d]]=s[r[d]]}}else{if(s[r[d]]){if(o[r[d]]){n.settings[r[d]]=this._oCardManifestSettings[o[r[d]]]}else{n.settings[r[d]]=s[r[d]]}}}}}else{var f=a.text;for(var d=0;d<f.length;d++){if(s[f[d]]){n.settings[f[d]]=s[f[d]]}}var l=this._oCardManifestSettings["tabs"],g=M(l,"tabs"),c=this._oCardManifestSettings.defaultViewSelected;n.settings["tabs"]=g;n.settings.selectedKey=c}return n}function T(t,e){var i=[];if(e){for(var a in e){var s=e[a];i.push({key:a,value:s.value[""],textType:s.type})}if(i.length){writeToI18n("/"+t+"/webapp/i18n",i)}}}function E(t,i,a,s){var o,d,f,l,g,c=a.settings["staticContent"],p=a.settings["tabs"];var u=e.cardSettingsWithText;var h=e.oI18nKeyValueProperty;for(d=0;d<u.length;d++){var C;if(typeof u[d]=="string"){if(a.settings[u[d]]){if(!o){o={}}if(s){if(!s.bAddNewCardFlag){C=n(t,i,"settings",u[d])}else{for(var v in h){if(u[d]===v){C=this._oCardManifestSettings[h[v]]?this._oCardManifestSettings[h[v]]:n(t,i,"settings",u[d]);break}}}}else{C=n(t,i,"settings",u[d])}o[C]=r(a.settings[u[d]]);a.settings[u[d]]="{{"+C+"}}"}}else if(typeof u[d]=="object"){if(u[d].hasOwnProperty("staticContent")){if(c){for(f=0;f<c.length;f++){for(l=0;l<u[d]["staticContent"].length;l++){g=u[d]["staticContent"][l];if(c[f][g]){if(!o){o={}}C=n(t,i,"settings.staticContent."+f,g);o[C]=r(c[f][g]);a.settings["staticContent"][f][g]="{{"+C+"}}"}}}}}else if(u[d].hasOwnProperty("tabs")){if(p){for(f=0;f<p.length;f++){for(l=0;l<u[d]["tabs"].length;l++){g=u[d]["tabs"][l];if(p[f][g]){if(!o){o={}}C=n(t,i,"settings.tabs."+f,g);o[C]=r(p[f][g]);a.settings["tabs"][f][g]="{{"+C+"}}"}}}}}}}return o}function F(t,e,i){var a=false;for(var s=0;s<i.length;s++){if(i[s].id!==e&&i[s].model===t){a=true;break}}return a}function O(t,e,i,a,s){var n={};n["appDescriptorChange"]={parameters:t};if(e){n["appDescriptorChange"]["texts"]=e}if(a){n["flexibilityChange"]={newAppDescriptor:i,oldAppDescriptor:a}}else{n["flexibilityChange"]=i}if(s){n["viewSwitchChange"]=s}return n}function U(e,i){var s={card:{}},n={},r=e.oMainComponent,d=r._getApplicationId(),l,c={},p=t.getQueryParameterValue("fiori-tools-rta-mode");if(e.bAddNewCardFlag){l=D.bind(this)(e)}else if(e.bNewStaticLinkListCardFlag){l=w.bind(this)(e)}else if(e.bNewKPICardFlag){l=N.bind(this)(e)}var u=t._getLayerNamespace()+i,h=1;while(f(u+"_N"+h,r)){h++}u=u+"_N"+h;g(l);n=a({},l);n.id=u;if(this._oCardManifestSettings.selectedKPI){n.settings.selectedKPI=a({},this._oCardManifestSettings.selectedKPI)}c.oFlexCardManifest=n;c.oText=E.bind(this)(d,u,l,e);if(p){T(d,a({},c.oText));c.oText=o()}s.card[u]=l;c.oParameters=s;return c}var K={sApplicationId:"",sCardId:"",aEntityPropertyChange:[],oText:undefined,getPayLoadForEditCard:function(e){var i=e.oAppDescriptor.id,s={cardId:i},n,r,d=a({},e.oAppDescriptor),f=a({},e.oAppDescriptor),l,g,c=t.getQueryParameterValue("fiori-tools-rta-mode");l=i.lastIndexOf(t._getLayerNamespace()+".",0)===0?"settings":t._getLayerNamespace()+".settings";K.sApplicationId=e.sApplicationId;K.sCardId=i;K.aEntityPropertyChange=[];K.oText=undefined;x.bind(this)(l,d);n=a({},K.oText);if(c){T(K.sApplicationId,K.oText);n=o()}r=K.aEntityPropertyChange;if(r.length===1){s["entityPropertyChange"]=r[0]}else{s["entityPropertyChange"]=r}if(this._oCardManifestSettings["tabs"]){var p=this._oCardManifestSettings.defaultViewSelected,u=this._oOriginalCardManifestSettings.selectedKey;u=u&&u>0?u:1;if(p&&p>0&&p!==u){g={cardId:i,selectedKey:p,oldKey:u}}d.settings.selectedKey=p}return O(s,n,d,f,g)},getPayLoadForCloneCard:function(e){return new Promise(function(i,s){var n={card:{}},r,d={},l=e.getComponentInstance().getComponentData(),c=l.mainComponent,p=c._getApplicationId(),u=a({},c._getCardFromManifest(l.cardId)),h=t.getQueryParameterValue("fiori-tools-rta-mode");var C=t._getLayerNamespace()+"."+u.id,v=1;while(f(C+"_C"+v,c)){v++}C=C+"_C"+v;g(u);d=a({},u);d.id=C;d.settings.title=d.settings.title+" "+v;u.settings.title=u.settings.title+" "+v;if(u.settings.defaultSpan&&u.settings.defaultSpan.showOnlyHeader){u.settings.defaultSpan.rows=12}r=E(p,C,u);if(h){T(p,a({},r));r=o()}n.card[C]=u;i(O(n,r,d))})},getPayLoadForNewStaticLinkListCard:function(t){var e=U.bind(this)(t,".newStaticLinkListCard");return O(e.oParameters,e.oText,e.oFlexCardManifest)},getPayLoadForNewKPICard:function(t){var e=U.bind(this)(t,".newKPICard"),i=t.oAppComponent,a=e.oFlexCardManifest,n=e.oParameters,r=a.model+"_ANNO",o=t.getDataSources(r),d=true,f=0;if(o[r]){if(o[r].uri!==this._oCardManifestSettings.selectedKPI.ModelURI){while(o[r+"_"+f]){f++}r=r+"_"+f}else{d=false}}var l=i.getModel(a.model);if(!l){n["model"]={};n["model"][a.model]={dataSource:a.model,settings:{defaultCountMode:s.None}};n["dataSource"]={};n["dataSource"][a.model]={uri:this._oCardManifestSettings.selectedKPI.ODataURI,type:"OData",settings:{annotations:[r],localUri:""}};if(d){n["dataSource"][r]={uri:this._oCardManifestSettings.selectedKPI.ModelURI,type:"ODataAnnotation",settings:{localUri:""}};a.settings["sAnnoKey"]=r}}var g=O(n,e.oText,e.oFlexCardManifest);if(d&&l){g["addODataAnnotation"]={parameters:{dataSourceId:a.model,annotations:[r],dataSource:{}}};g["addODataAnnotation"].parameters.dataSource[r]={uri:this._oCardManifestSettings.selectedKPI.ModelURI,type:"ODataAnnotation",settings:{localUri:""}};g["flexibilityChange"].settings["sAnnoKey"]=r}return g},getPayLoadForNewCard:function(t){var e=U.bind(this)(t,".newCard"),i=e.oParameters;if(t.newDataSource){var a=t.oAppComponent,n=e.oFlexCardManifest,r=t.newDataSourceModel.serviceAnnotation,o=t.getDataSources(r),d=true,f=0;if(o[r]){if(o[r].uri!==t.newDataSourceModel.serviceAnnotationURI){while(o[r+"_"+f]){f++}r=r+"_"+f}else{d=false}}var l=a.getModel(n.model);if(!l){i["model"]={};i["model"][n.model]={dataSource:n.model,settings:{defaultCountMode:s.None}};i["dataSource"]={};i["dataSource"][n.model]={uri:t.newDataSourceModel.serviceURI,type:"OData",settings:{annotations:[r],localUri:""}};if(d){i["dataSource"][r]={uri:t.newDataSourceModel.serviceAnnotationURI,type:"ODataAnnotation",settings:{localUri:""}}}}}return O(e.oParameters,e.oText,e.oFlexCardManifest)},getPayLoadForRemoveCard:function(t){var e={},i={},a=t.getComponentInstance().getComponentData(),s=a.cardId;e["cardId"]=s;i.id=t.getId();var n=O(e,null,i),r=a.mainComponent.getUIModel().getProperty("/cards");if(!F(a.modelName,s,r)&&!!a.modelName){n["removeDataSourceChange"]=[];var o=a.appComponent.getMetadata(),d=o.getManifestEntry("sap.ui5").models[a.modelName].dataSource,f=o.getManifestEntry("sap.app").dataSources[d].settings.annotations;f.forEach(function(t){n["removeDataSourceChange"].push({parameters:{dataSourceId:t}})})}return n}};return K},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/PersonalizationUtils", ["sap/ovp/cards/CommonUtils","sap/ui/fl/write/api/ControlPersonalizationWriteAPI","sap/ovp/app/OVPLogger"],function(a,r,n){"use strict";var e=new n("OVP.cards.PersonanlizationUtils");function t(a,r){r.every(function(r){if(r.id===a.cardId){r.selectedKey=a.selectedKey;return false}return true});return r}function o(a,r){r.every(function(r){if(r.id===a.cardId){r.visibility=a.visibility;return false}return true});return r}function i(r,n,e){var t=a.getApp(),o=t._getCardId(r.id);n.every(function(a){if(a.id===o){a.visibility=e;return false}return true});return n}function u(a,r){var n=[];var e,t;e=r.filter(function(a){return a.visibility});r.forEach(function(a,r){if(!a.visibility){n.push({card:a,index:r})}});if(!e[a.oldPosition]||!e[a.position]){return r}t=e[a.oldPosition];e[a.oldPosition]=e[a.position];e[a.position]=t;n.forEach(function(a){e.splice(a.index,0,a.card)});r=e;return r}function s(a,r){r.every(function(r){if(r.id===a.cardId){Object.keys(a.dashboardLayout).forEach(function(n){if(!r.dashboardLayout[n]){r.dashboardLayout[n]={}}if(a.dashboardLayout[n].rowSpan){r.dashboardLayout[n].rowSpan=a.dashboardLayout[n].rowSpan}if(a.dashboardLayout[n].colSpan){r.dashboardLayout[n].colSpan=a.dashboardLayout[n].colSpan}if(a.dashboardLayout[n].maxColSpan){r.dashboardLayout[n].maxColSpan=a.dashboardLayout[n].maxColSpan}if(a.dashboardLayout[n].noOfItems){r.dashboardLayout[n].noOfItems=a.dashboardLayout[n].noOfItems}if(a.dashboardLayout[n].hasOwnProperty("autoSpan")){r.dashboardLayout[n].autoSpan=a.dashboardLayout[n].autoSpan}if(a.dashboardLayout[n].row){r.dashboardLayout[n].row=a.dashboardLayout[n].row}if(a.dashboardLayout[n].column){r.dashboardLayout[n].col=a.dashboardLayout[n].column}if(a.dashboardLayout[n].hasOwnProperty("showOnlyHeader")){r.dashboardLayout[n].showOnlyHeader=a.dashboardLayout[n].showOnlyHeader}});return false}return true});return r}function d(a,r){if(!Array.isArray(r)||!a){return a}var n=[];a.forEach(function(a){var r={};Object.keys(a).forEach(function(n){r[n]=a[n]});n.push(r)});var e={VENDOR:[],CUSTOMER_BASE:[],CUSTOMER:[],USER:[]};var d=r.reduce(function(a,r){a[r.getLayer()].push(r);return a},e);var c=[].concat(d["VENDOR"],d["CUSTOMER_BASE"],d["CUSTOMER"],d["USER"]);c.forEach(function(a){switch(a.getChangeType()){case"viewSwitch":n=t(a.getContent(),n);break;case"visibility":n=o(a.getContent(),n);break;case"hideCardContainer":n=i(a.getContent().card,n,false);break;case"unhideCardContainer":n=i(a.getContent().card,n,true);break;case"position":n=u(a.getContent(),n);break;case"dragOrResize":n=s(a.getContent(),n);break;default:break}});return n}function c(a,r){var n=a.filter(function(a){var n=false;r.forEach(function(r){if(a.id===r.id){n=true;return}});return!n});return r.concat(n)}function f(n,t){var o=a.getApp();var i={};if(o.getOwnerComponent()){i=o.getOwnerComponent().oOvpConfig}if(o.getUIModel().getProperty("/bRTAActive")||i.bInsightDTEnabled){return}var u=t?t.byId("ovpLayout"):null;var s=[],d=[],c=[];if(!Array.isArray(n)){n=[n]}n.forEach(function(a){var r=a.content.cardId;a.jsOnly=true;s.push({selectorElement:t.byId(r),changeSpecificData:a});d.push(t.byId(r));c.push(a.changeType)});r.isCondensingEnabled().then(function(a){if(a){return y(s,u)}else{return h(d,c).finally(function(){return y(s,u)})}}).then(function(){e.info("Personalization changes have been saved in lrep backend")}).catch(function(a){e.error("Personalization changes were not saved",a)})}function h(a,n){return r.reset({selectors:a,changeTypes:n})}function y(a,n){return r.add({changes:a},true).then(function(a){return r.save({changes:a,selector:n})})}var l={mergeChanges:d,addMissingCardsFromManifest:c,savePersonalization:f};return l},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/SettingsUtils", ["sap/m/Dialog","sap/m/Button","sap/ovp/cards/PayLoadUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/m/MessagePopover","sap/m/MessagePopoverItem","sap/m/Link","sap/m/MessageBox","sap/ovp/cards/AnnotationHelper","sap/ui/core/mvc/ViewType","sap/ui/model/json/JSONModel","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode","sap/ui/core/mvc/XMLView","sap/ui/core/Core"],function(e,t,a,i,r,n,s,o,l,d,p,c,u,f,g,h,v,y,m,C,b,S){"use strict";var P=g;var w=new y("OVP.cards.SettingsUtils");function O(e,t,a){var r=e.getComponentInstance(),s=r.getComponentData(),o=s.appComponent,l=s.mainComponent,d=a?"":s.cardId,p=d+"Dialog",c=a?"":s.modelName,u=!c?undefined:o.getModel(c),f=t.getModel().getData(),g={cards:{}};g.cards[p]={template:f.template,settings:f};if(ce.bNewKPICardFlag){var h=f.selectedKPI;u=new m(h.ODataURI,{annotationURI:h.ModelURI,defaultCountMode:C.None});c=n._getLayerNamespace()+".kpi_card_model_"+V(h.ODataURI)}if(u&&!!c){g.cards[p].model=c;t.setModel(u,c)}g.cards[p]=l._getTemplateForChart(g.cards[p]);t.getController()._oManifest=g;if(ce.bNewKPICardFlag){u.getMetaModel().loaded().then(function(){var e=i.createCardComponent(t,g,"dialogCard");e.then(function(){t.setBusy(false)}).catch(function(){L(g.cards[p].settings,"OVP_KEYUSER_ANNOTATION_FAILURE");D(t,g,p)})},function(e){w.error(e)});u.attachMetadataFailed(function(){L(g.cards[p].settings,"OVP_KEYUSER_METADATA_FAILURE");D(t,g,p)})}else{i.createCardComponent(t,g,"dialogCard")}}function I(e,t){if(!this.oNewDataSources[e]){this.oNewDataSources[e]={uri:t}}}function E(e){if(this.oNewDataSources[e]){delete this.oNewDataSources[e]}}function T(e){var t=this.oAppComponent.getMetadata(),a=t.getManifestEntry("sap.app").dataSources;if(this.oNewDataSources[e]){return this.oNewDataSources}return a}function V(e){var t=e.split("/");return t[t.length-1]?t[t.length-1]:t[t.length-2]}function D(e,t,a){t.cards[a].template="sap.ovp.cards.error";t.cards[a].model=undefined;var r=i.createCardComponent(e,t,"dialogCard");var n=e.getController();r.then(function(){e.setBusy(false);n.setBusy(false)}).catch(function(){e.setBusy(false);n.setBusy(false)})}function L(e,t){if(e){e.errorStatusText=g.getText(t)}}function A(e){if(e.indexOf("#")!==-1){return e.split("#")[1]}else{return"Default"}}function x(e,t){if(e){var a,i,r;if(e.indexOf("{")===0&&e.indexOf("}")===e.length-1){e=e.slice(1,-1);if(e.indexOf(">")!=-1){a=e.split(">");r=a[0];i=a[1]}else if(e.indexOf("&gt;")!=-1){a=e.split("&gt;");r=a[0];i=a[1]}if(!!i&&r==="@i18n"&&ce.oi18nModel){return ce.oi18nModel.getProperty(i)}else{return e}}else{return e}}else{return t}}function _(e,t,a,i){if(t[e]&&t[e][a]){var r=typeof t[e][a]==="string"?t[e][a]:t[e][a].String;return x(r,i)}else{return i}}function k(e,t){var a=A(t),i=g.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[a]);i=i?i:a;if(t.indexOf(",")!==-1){t=t.split(",")[0]}if(t.indexOf(".Identification")!==-1){if(e[t]){var r=c.sortCollectionByImportance(e[t]);for(var n=0;n<r.length;n++){var s=r[n];if(s.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(s&&s["Label"]){return x(s["Label"].String,i)}else{return s["SemanticObject"].String+"-"+s["Action"].String}}if(s.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(s&&s["Label"]){return x(s["Label"].String,i)}else{return s["Url"].String}}}}return g.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION")}else if(t.indexOf(".LineItem")!==-1){var o=c.sortCollectionByImportance(e[t]);o.forEach(function(e,t){if(e["RecordType"]&&e["RecordType"].indexOf(".DataField")!==-1&&e["Label"]){o[t]["Label"]={String:x(e["Label"].String,i)}}});return o}else if(t.indexOf(".HeaderInfo")!==-1){if(e[t]&&e[t]["Description"]&&e[t]["Description"].Label){return x(e[t]["Description"].Label.String,i)}else{return i}}else if(t.indexOf(".PresentationVariant")!==-1||t.indexOf(".SelectionVariant")!==-1||t.indexOf(".SelectionPresentationVariant")!==-1){return _(t,e,"Text",i)}else if(t.indexOf(".DataPoint")!==-1){return _(t,e,"Title",i)}else if(t.indexOf(".Chart")!==-1){return _(t,e,"Description",i)}else if(t.indexOf(".FieldGroup")!==-1){return _(t,e,"Label",i)}else{var l="";if(a!=="Default"){l="#"+a}var d="com.sap.vocabularies.Common.v1.Label"+l;if(e[t]&&e[t][d]){return x(e[t][d].String,i)}else{return i}}}function N(e,t){var a=A(t),i=g.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[a]);i=i?i:a;if(t.indexOf(",")!==-1){t=t.split(",")[0]}if(t.indexOf(".Identification")!==-1){if(e[t]){var r=c.sortCollectionByImportance(e[t]);for(var n=0;n<r.length;n++){var s=r[n];if(s.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(s&&s["Label"]){return x(s["Label"],i)}else{return s["SemanticObject"]+"-"+s["Action"]}}if(s.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(s&&s["Label"]){return x(s["Label"],i)}else{return s["Url"]}}}}return g.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION")}else if(t.indexOf(".LineItem")!==-1){var r=c.sortCollectionByImportance(e[t]);r.forEach(function(e,t){if(e["$Type"]&&e["$Type"].indexOf(".DataField")!==-1&&e["Label"]){r[t]["Label"]=x(e["Label"],i)}});return r}else if(t.indexOf(".HeaderInfo")!==-1){if(e[t]&&e[t]["Description"]&&e[t]["Description"].Label){return x(e[t]["Description"].Label,i)}else{return i}}else if(t.indexOf(".PresentationVariant")!==-1||t.indexOf(".SelectionVariant")!==-1||t.indexOf(".SelectionPresentationVariant")!==-1){return _(t,e,"Text",i)}else if(t.indexOf(".DataPoint")!==-1){return _(t,e,"Title",i)}else if(t.indexOf(".Chart")!==-1){return _(t,e,"Description",i)}else if(t.indexOf(".FieldGroup")!==-1){return _(t,e,"Label",i)}else{var o="";if(a!=="Default"){o="#"+a}var l="com.sap.vocabularies.Common.v1.Label"+o;if(e[t]&&e[t][l]){return x(e[t][l],i)}else{return i}}}function R(e,t,a){switch(t){case"cardPreview":return i.getSupportedCardTypes().indexOf(e)!==-1;case"noOfRows":case"noOfColumns":case"stopResizing":var r=["sap.ovp.cards.stack"];return r.indexOf(e)===-1;case"listType":case"listFlavor":var n=["sap.ovp.cards.list","sap.ovp.cards.v4.list"];return n.indexOf(e)!==-1;case"listFlavorForLinkList":var s=["sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist"];return s.indexOf(e)!==-1;case"isViewSwitchSupportedCard":case"showViewSwitch":case"kpiHeader":var o=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"];return o.indexOf(e)!==-1;case"chartSPVorKPI":case"chart":var l=["sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"];return l.indexOf(e)!==-1;case"sortOrder":case"sortBy":case"lineItem":if(!a){var d=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];return d.indexOf(e)!==-1}else{var d=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.stack"];return d.indexOf(e)!==-1}break;case"identification":var p=["sap.ovp.cards.stack"];return p.indexOf(e)!==-1;case"addViewSwitch":var c=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];return c.indexOf(e)!==-1;case"addKPIHeader":var c=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical"];return c.indexOf(e)!==-1;case"selecionOrPresentation":var u=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist"];return u.indexOf(e)!==-1;case"addODataSelect":var f=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.stack"];return f.indexOf(e)!==-1;case"addCustomActions":var f=["sap.ovp.cards.stack"];return f.indexOf(e)!==-1;case"setCardProperties":if(a){var d=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.stack"];return d.indexOf(e)!==-1}break;default:break}}function M(e){return!!e.kpiAnnotationPath}function F(e){return!!e.selectionPresentationAnnotationPath}function B(e){return F(e)||M(e)}function K(e){return e.substring(e.lastIndexOf("_")+1,e.length).indexOf("C")!==-1}function U(e){if(e.NewKPICard){return e.NewKPICard}else if(e.selectedKPICardID){return e.selectedKPICardID.indexOf("newKPICard")!==-1}else{return false}}function H(e,t,a,i,r){var n=true;var s=true;var o=false;var l=false;var d=false;if(a){if(e.mainViewSelected){s=false}else{n=false}}if(e.addNewCard&&e.model){var l=true;if(e.template){d=true;if(e.entitySet){o=true}}}var p;switch(t){case"cardPreview":p=R(e.template,"cardPreview");break;case"noOfRows":case"noOfColumns":case"stopResizing":p=n&&R(e.template,t);break;case"title":p=n;break;case"dynamicSwitchSubTitle":p=n&&!!e.dynamicSubTitle;break;case"enableAddToInsights":p=n&&!!e.enableAddToInsights;break;case"dynamicSwitchStateSubTitle":p=!!e.dynamicSubtitleAnnotationPath;break;case"subTitle":if(!e.addNewCard){if(!e.subTitle){e.subTitle=" ";p=true}else{p=n&&!e.dynamicSubtitleAnnotationPath}}else{p=n}break;case"dynamicSubTitle":p=n&&!!e.dynamicSubtitleAnnotationPath;break;case"valueSelectionInfo":if(!e.addNewCard){if(!e.valueSelectionInfo){e.valueSelectionInfo=" "}p=n&&R(e.template,"kpiHeader")&&!!e.dataPointAnnotationPath&&!U(e)}else{p=n&&l&&d&&o&&e.addKPIHeaderCheckBox&&R(e.template,"addKPIHeader")}break;case"dataPoint":if(!e.addNewCard){p=s&&!M(e)&&R(e.template,"kpiHeader")&&!!e.dataPointAnnotationPath}else{p=s&&l&&d&&o&&e.addKPIHeaderCheckBox&&R(e.template,"addKPIHeader")}break;case"listType":case"listFlavor":case"listFlavorForLinkList":if(!e.addNewCard){p=n&&R(e.template,t)}else{p=n&&l&&d&&o&&R(e.template,t)}break;case"identification":if(!e.addNewCard){p=s&&!e.staticContent&&!R(e.template,t)}else{p=s&&l&&d&&o&&!R(e.template,t)}break;case"selectionPresentationVariant":if(!e.addNewCard){p=s&&F(e)&&!M(e)&&R(e.template,"kpiHeader")}else{p=s&&l&&d&&o&&R(e.template,"selecionOrPresentation")&&!!(Array.isArray(e.selectionPresentationVariant)&&e.selectionPresentationVariant.length)}break;case"KPI":case"dataPointSelectionMode":if(!e.addNewCard){p=s&&M(e)&&!F(e)&&R(e.template,"chart")&&!U(e)}else{p=s&&l&&d&&o&&R(e.template,"chart")}break;case"presentationVariant":case"selectionVariant":if(!e.addNewCard){p=s&&!B(e)&&!e.staticContent&&R(e.template,"kpiHeader")}else{p=s&&l&&d&&o&&!(Array.isArray(e.selectionPresentationVariant)&&e.selectionPresentationVariant.length)&&R(e.template,"selecionOrPresentation")}break;case"kpiHeader":p=n&&!M(e)&&R(e.template,t);break;case"lineItem":case"chart":if(!e.addNewCard){p=s&&!B(e)&&R(e.template,t)}else{p=s&&l&&d&&o&&R(e.template,t,e.addNewCard)}break;case"chartSPVorKPI":p=s&&B(e)&&!U(e)&&R(e.template,t);break;case"presentationVariantSPVorKPI":case"selectionVariantSPVorKPI":p=s&&B(e)&&!U(e)&&!e.staticContent&&R(e.template,"kpiHeader");break;case"showViewName":p=a&&s;break;case"showDefaultView":if(a&&s){if(e.defaultViewSelected!=e.selectedKey){p=true}}else{p=false}break;case"showEntitySet":if(a&&s){if(e.selectedKey>0&&e.tabs[e.selectedKey-1].entitySet){p=true}else{p=false}}else{p=false}break;case"showMore":case"removeVisual":case"lineItemSubTitle":case"lineItemTitle":case"staticLink":case"links":var c=(e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&!!e.staticContent;if(t==="staticLink"){p=c&&!!e.staticContent[i].targetUri}else if(t==="links"){p=c&&!!e.staticContent[i].semanticObject}else if(t==="removeVisual"){p=c&&(!!e.staticContent[i].targetUri||!!e.staticContent[i].semanticObject)}else{p=c}break;case"selectCardType":p=n&&l;break;case"addKPIHeader":p=n&&l&&d&&R(e.template,t);break;case"setEntitySet":p=s&&l&&d;break;case"setCardProperties":p=n&&l&&d&&o&&R(e.template,t,e.addNewCard);break;case"setGeneralCardProperties":p=n&&l&&d&&o;break;case"setAnnotationCardProperties":p=s&&l&&d&&o;break;case"subTitleRequired":p=l&&d&&o&&e.addKPIHeaderCheckBox;break;case"addODataSelect":if(!e.addNewCard){p=s&&R(e.template,t)}else{p=s&&l&&d&&o&&R(e.template,t)}break;case"isViewSwitchSupportedCard":case"showViewSwitch":p=l&&d&&(o||!!e.showViewSwitchButton)&&R(e.template,t);break;case"dataSource":p=n;break;case"dataSourceExisting":p=!e.newDataSource;break;case"dataSourceNew":p=e.newDataSource;break;case"addCustomActions":p=n&&R(e.template,t);break;default:break}return p}function W(e){var t=false;this.oVisibility.viewSwitchEnabled=false;this.oVisibility.showViewSwitch=false;if(!this.bAddNewCardFlag){if(R(e.template,"isViewSwitchSupportedCard")&&!U(e)){if(e.tabs&&e.tabs.length){t=true;this.oVisibility.showViewSwitch=true}this.oVisibility.viewSwitchEnabled=true}}else{if(e.tabs&&e.tabs.length){t=true;this.oVisibility.showViewSwitch=H(e,"showViewSwitch")}this.oVisibility.viewSwitchEnabled=H(e,"isViewSwitchSupportedCard")}this.oVisibility.cardPreview=H(e,"cardPreview");this.oVisibility.stopResizing=H(e,"stopResizing",t);this.oVisibility.noOfRows=H(e,"noOfRows",t);this.oVisibility.noOfColumns=H(e,"noOfColumns",t);this.oVisibility.title=H(e,"title",t);this.oVisibility.subTitle=H(e,"subTitle",t);this.oVisibility.valueSelectionInfo=H(e,"valueSelectionInfo",t);this.oVisibility.listType=H(e,"listType",t);this.oVisibility.listFlavor=H(e,"listFlavor",t);this.oVisibility.listFlavorForLinkList=H(e,"listFlavorForLinkList",t);if((e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&!!e.staticContent){var a=e.staticContent,i={},r={},n={},s={};for(var o=0;o<a.length;o++){var l=a[o].index;i[l]=H(e,"staticLink",null,o);r[l]=H(e,"links",null,o);n[l]=H(e,"removeVisual",null,o);s[l]=H(e,"showMore",null,o)}this.oVisibility.staticLink=i;this.oVisibility.links=r;this.oVisibility.removeVisual=n;this.oVisibility.showMore=s}this.oVisibility.lineItemTitle=H(e,"lineItemTitle");this.oVisibility.lineItemSubTitle=H(e,"lineItemSubTitle");this.oVisibility.showViewName=H(e,"showViewName",t);this.oVisibility.showDefaultView=H(e,"showDefaultView",t);this.oVisibility.showEntitySet=H(e,"showEntitySet",t);this.aVariantNames.forEach(function(a){this.oVisibility[a.sPath]=H(e,a.sPath,t)&&!!e[a.sPath]&&!!e[a.sPath].length}.bind(this));this.oVisibility.kpiHeader=H(e,"kpiHeader",t)&&!!e["dataPoint"]&&!!e["dataPoint"].length;this.oVisibility.dynamicSwitchSubTitle=H(e,"dynamicSwitchSubTitle",t);this.oVisibility.dynamicSwitchStateSubTitle=H(e,"dynamicSwitchStateSubTitle",t);this.oVisibility.dataSource=H(e,"dataSource",t);this.oVisibility.dataSourceExisting=H(e,"dataSourceExisting",t);this.oVisibility.dataSourceNew=H(e,"dataSourceNew",t);this.oVisibility.selectCardType=H(e,"selectCardType",t);this.oVisibility.addKPIHeader=H(e,"addKPIHeader",t);this.oVisibility.setEntitySet=H(e,"setEntitySet",t);this.oVisibility.setCardProperties=H(e,"setCardProperties",t);this.oVisibility.setGeneralCardProperties=H(e,"setGeneralCardProperties",t);this.oVisibility.subTitleRequired=H(e,"subTitleRequired",t);this.oVisibility.dataPointSelectionMode=H(e,"dataPointSelectionMode",t);var d;for(var o=0;o<this.aVisiblePropertiesForAnnotation.length;o++){if(this.oVisibility[this.aVisiblePropertiesForAnnotation[o].sProperty]){d=true;break}}this.oVisibility.setAnnotationCardProperties=d?H(e,"setAnnotationCardProperties",t):false;this.oVisibility.addODataSelect=H(e,"addODataSelect",t);this.oVisibility.addCustomActions=H(e,"addCustomActions",t);this.oVisibility.moveToTheTop=false;this.oVisibility.moveUp=false;this.oVisibility.moveDown=false;this.oVisibility.moveToTheBottom=false;this.oVisibility.delete=false}function Y(e){var t=e.getProperty("/staticContent");for(var a=0;a<t.length;a++){t[a].index="Index--"+(a+1)}e.setProperty("/staticContent",t)}function j(e){var t=0;for(var a=e.length-1;a>=0;a--){if(/^\d+$/.test(e[a])){t=parseInt(e[a],10);break}}return t}function z(e){var t=e&&e.metaModel&&e.metaModel.oModel;var a=n.isODataV4(t);if(e.lineItem){e.lineItem.forEach(function(t){if(a&&t.value==="@"+e.annotationPath||t.value===e.annotationPath){e.lineItemQualifier=t.name}})}if(e.tabs&&e.tabs.length&&e.selectedKey){e.viewName=e.tabs[e.selectedKey-1].value;e.isDefaultView=false;if(e.selectedKey===e.defaultViewSelected){e.isDefaultView=true}}var i=e.sortOrder;e.sortOrder="descending";if(i&&i.toLowerCase()!=="descending"){e.sortOrder="ascending"}e.isExtendedList=false;if(e.listType==="extended"){e.isExtendedList=true}e.bInsightsEnable=false;if(e.enableAddToInsights){e.bInsightsEnable=true}e.isBarList=false;if(e.listFlavor==="bar"){e.isBarList=true}e.hasKPIHeader=false;if(e.dataPointAnnotationPath){e.hasKPIHeader=true}return e}function G(e){var t=e&&e.metaModel&&e.metaModel.oModel;var a=n.isODataV4(t);var i=e.kpiAnnotationPath;var r=e.template;var s=a?e.entityType.$Type:e.entityType;var o="";if(i&&s&&r==="sap.ovp.cards.charts.analytical"){var l=s[i];var d=l&&l.Detail;if(d&&d.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"&&d.SemanticObject&&d.Action){o="#"+d.SemanticObject.String+"-"+d.Action.String}}e["KPINav"]=o}function $(e){var t=[],a=e.metaModel,i=!!a?a.getODataEntityContainer().entitySet:[],r=a&&a.getODataEntityContainer().namespace+".";i.forEach(function(i){if(!e.addNewCard){var n=g.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[i.name]),s=a.getODataEntityType(i.entityType)["sap:label"];t.push({name:x(s,n),value:i.name})}else{var n=g.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[i.name]),s=a.getODataEntityType(i.entityType)["sap:label"],o=i.entityType.split(r)[1];t.push({name:x(s,n),value:i.name,entityType:o})}});if(t.length>0){e["allEntitySet"]=t}}function Q(e){var t=e.metaModel,a=t.getObject("/"),i=Object.keys(a),r=[],n=[];for(var s=0;s<i.length;s++){if(i[s].startsWith("$")){continue}r.push({name:i[s],entityType:a[i[s]].$Type})}var o=t.getData();var l=o.$EntityContainer;var d=l?l.split("."):"";d.pop();var p=d.join(".")+".";r.forEach(function(t){var a=g.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[t.name]);var i=o&&o[t.entityType]&&o[t.entityType]["sap:label"];if(!e.addNewCard){n.push({name:x(i,a),value:t.name})}else{var r=t.entityType.split(p)[1];n.push({name:x(i,a),value:t.name,entityType:r})}});if(n.length>0){e["allEntitySet"]=n}}function X(e){var t=e.metaModel&&e.metaModel.getObject("/dataServices/schema")&&e.metaModel.getObject("/dataServices/schema")[0].entityType;if(t){t.forEach(function(t){var a=0;this.aVariantNames.forEach(function(e){for(var i in t){if(i.indexOf(e.sVariant)!==-1){a++}}});if(!a){e.allEntitySet=e.allEntitySet.filter(function(e){return e.entityType!==t.name})}}.bind(this))}}function q(e){var t=e&&e.metaModel&&e.metaModel.oModel;var a=n.isODataV4(t);var i;if(a){i=e.metaModel.getData()["$Annotations"][e.entityType.$Type]}else{i=e.entityType}if(!e["allEntitySet"]){if(a){Q(e)}else{$(e)}}G(e);if(e.addNewCard){X.call(this,e)}this.aVariantNames.forEach(function(t){var r=[],n=1;for(var s in i){if(i.hasOwnProperty(s)&&s.indexOf(t.sVariant)!==-1){if(t.sVariant===".LineItem"){var o={name:P.getText("OVP_KEYUSER_LABEL_LINEITEM_OPTIONS",[n]),value:a?s.substring(1):s,fields:a?N(i,s):k(i,s)};r.push(o);n++}else{r.push({name:a?N(i,s):k(i,s),value:a?s.substring(1):s})}}}if(r.length!==0){e[t.sPath]=r}});if(a){var r=pe(e);e["modelProperties"]=r.map(function(e){return{name:e,value:e}})}else if(e.entityType&&e.entityType.property){e["modelProperties"]=e.entityType.property.map(function(e){return{name:e.name,value:e.name}})}if(!!e.tabs&&e.tabs.length){var s=false,o=e.tabs[e.tabs.length-1].value,l=o.split(" ");e.newViewCounter=j(l);e.defaultViewSelected=e.selectedKey;e.isViewResetEnabled=false;e.aViews=[{text:P&&P.getText("OVP_KEYUSER_LABEL_MAIN_VIEW"),key:0,isLaterAddedView:false,isViewResetEnabled:false}];s=e.tabs.some(function(e){return e.dataPointAnnotationPath});e.tabs.forEach(function(t,a){var i=t.value;if(s&&!t.dataPointAnnotationPath&&t.dataPoint&&t.dataPoint.length){t.dataPointAnnotationPath=t.dataPoint[0].value}if(a+1===e.selectedKey){i=t.value;if(P){i+=" ("+P.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}else{i+=" (Default view)"}}e.aViews.push({text:i,key:a+1,initialSelectedKey:a+1,isLaterAddedView:false,isViewResetEnabled:false})})}else if(R(e.template,"isViewSwitchSupportedCard")){e.newViewCounter=0;e.aViews=[{text:P.getText("OVP_KEYUSER_SHOWS_DIFFERENT_VIEWS"),key:0,initialSelectedKey:0,isLaterAddedView:false,isViewResetEnabled:false}]}return e}function J(e){var t=e.getData();if(sap.ushell&&sap.ushell.Container){sap.ushell.Container.getService("CrossApplicationNavigation").getLinks().done(function(a){var i=[],r={};for(var n=0;n<a.length;n++){i.push(a[n].intent);r[a[n].intent]=a[n].text}sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(i).done(function(a){var i=[];for(var n in a){if(a.hasOwnProperty(n)&&a[n].supported===true&&r&&r[n]){i.push({name:r[n],value:n})}}var s=t;if(i.length!==0||i.length!==0){s["links"]=i}e.refresh()}).fail(function(e){w.error(e)})}).fail(function(e){w.error(e)})}}function Z(e){this.oResetButton.setEnabled(e)}function ee(e){this.oSaveButton.setEnabled(e);var t=this.oMessagePopOver.getModel(),a=t.getProperty("/Counter/Error");this.bError=a>0}function te(e){var t=new RegExp("http(s)?://(www.)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?","i");return t.test(e)}function ae(e,t){if(t==="targetUri"){return!te(e)&&(!!e||e==="")}else{return!e.trim().length}}function ie(e){var t=e.getParameter("path"),a="",i,r,n,s,o,l;if(t==="/title"||t==="title"||t==="/viewName"||t==="targetUri"||t==="value"){var d=e.getParameter("value"),p=ae(d,t),c,u=e.getParameter("context");if(t==="/viewName"){c=e.getSource().getProperty("/selectedKey");a=g.getText("OVP_KEYUSER_INPUT_ERROR_VIEW_NAME");t="/tabs/"+(c-1)+"/value"}if(t==="value"){a=g.getText("OVP_KEYUSER_INPUT_ERROR_VIEW_NAME");t=u.getPath()+"/"+t}if(t.indexOf("/title")!==-1){a=g.getText("OVP_KEYUSER_INPUT_ERROR")}if(u&&u.getPath().indexOf("staticContent")!==-1){i=u.getPath().split("/");if(t==="title"){a=g.getText("OVP_KEYUSER_INPUT_ERROR_RECORD_TITLE")+(parseInt(i[i.length-1],10)+1)}else if(t==="targetUri"){a=g.getText("OVP_KEYUSER_INPUT_ERROR_RECORD_URL")+" "+(parseInt(i[i.length-1],10)+1)}t=u.getPath()+"/"+t}n=this.oMessagePopOver.getModel();s=n.getProperty("/Messages");o=n.getProperty("/Counter/All");l=n.getProperty("/Counter/Error");if(p){ee.bind(this)(true);for(r=0;r<s.length;r++){if(s[r].fieldName===t){s.splice(r,1);o--;l--;r--}}s.push({type:"Error",title:a,fieldName:t,counter:l+1});o++;l++}else{ee.bind(this)(true);for(r=0;r<s.length;r++){if(s[r].fieldName===t){s.splice(r,1);o--;l--;r--}}}n.setProperty("/Messages",s);n.setProperty("/Counter/All",o);n.setProperty("/Counter/Error",l);n.refresh(true)}else if(t==="/staticContent,title"||t==="/staticContent,targetUri"||t==="/tabs,value"){i=t.split(",");n=this.oMessagePopOver.getModel();s=n.getProperty("/Messages");o=n.getProperty("/Counter/All");l=n.getProperty("/Counter/Error");ee.bind(this)(true);for(r=0;r<s.length;r++){if(s[r].fieldName.indexOf(i[0])!==-1&&s[r].fieldName.indexOf(i[1])!==-1){s.splice(r,1);o--;l--;r--}}n.setProperty("/Messages",s);n.setProperty("/Counter/All",o);n.setProperty("/Counter/Error",l);n.refresh(true)}}function re(){var e=this.oMessagePopOver.getModel();e.setProperty("/Messages",[]);e.setProperty("/Counter/All",0);e.setProperty("/Counter/Error",0);e.setProperty("/Counter/Success",0);e.setProperty("/Counter/Warning",0);e.setProperty("/Counter/Information",0);e.refresh(true)}function ne(){var e=new d({text:"Show more information",href:"",target:"_blank"});var t=new l({type:"{type}",title:"{title}",description:"{description}",subtitle:"{subtitle}",counter:"{counter}",fieldName:"{fieldName}",link:e});this.oMessagePopOver=new o({items:{path:"/Messages",template:t}});var a={Counter:{All:0,Error:0,Success:0,Warning:0,Information:0},Messages:[]};var i=new f(a);this.oMessagePopOver.setModel(i);this.oMessagePopOverButton.setModel(i)}function se(e,t){var a=e.byId("sapOvpSettingsForm");if(a){var i=a.getDomRef();if(i){i.style.width=t}}}function oe(e){var t=this.dialogBox.getContent()[0],a=t.getModel(),i=t.getModel("deviceMediaProperties");switch(e.name){case"S":case"M":i.setProperty("/deviceMedia","Column");se(t,"100%");break;case"L":case"XL":default:i.setProperty("/deviceMedia","Row");se(t,"calc(100% - "+(a.getProperty("/dialogBoxWidth")+1)+"rem)");break}i.refresh(true)}function le(){s.media.detachHandler(oe.bind(this),null,"SettingsViewRangeSet");s.media.removeRangeSet("SettingsViewRangeSet")}function de(){s.media.initRangeSet("SettingsViewRangeSet",[520,760,960],"px",["S","M","L","XL"]);s.media.attachHandler(oe.bind(this),null,"SettingsViewRangeSet");oe.bind(this)(s.media.getCurrentRange("SettingsViewRangeSet"))}function pe(e){var t=e.entitySet,a=e.metaModel,i=a.getObject("/"+t),r=i.$Type,n=a.getObject("/"+r),s=Object.keys(n);var o=s.filter(function(e){return!e.startsWith("$")});return o}var ce={dialogBox:undefined,oSaveButton:undefined,oResetButton:undefined,oMessagePopOverButton:undefined,oMessagePopOver:undefined,oAppDescriptor:undefined,oOriginalAppDescriptor:undefined,oMainComponent:undefined,oAppComponent:undefined,oNewDataSources:{},sApplicationId:"",oi18nModel:undefined,iContentHeightForDialog:38,iContentHeightForDialogWithViewSwitch:33,aVariantNames:r.aVariantNames,aVisiblePropertiesForAnnotation:r.aVisiblePropertiesForAnnotation,getDataSources:T,removeDataSources:E,setDataSources:I,attachWindowResizeHandler:de,detachWindowResizeHandler:le,settingFormWidth:se,addKPINavApplicationName:G,addManifestSettings:z,setVisibilityForFormElements:W,getVisibilityOfElement:H,checkForEmptyString:x,enableResetButton:Z,enableSaveButton:ee,checkClonedCard:K,resetErrorHandling:re,createErrorCard:D,setErrorMessage:L,getQualifier:A,getTrimmedDataURIName:V,addSupportingObjects:q,oVisibility:r.oVisibility,bError:false,bNewStaticLinkListCardFlag:false,bNewKPICardFlag:false,bAddNewCardFlag:false,aListType:r.aListType,aListFlavour:r.aListFlavour,aDataPointSelectionMode:r.aDataPointSelectionMode,aSortOrder:r.aSortOrder,aCardType:r.aCardType,aLinkListFlavour:r.aLinkListFlavour,getDialogBox:function(a){return new Promise(function(i,o){if(!this.dialogBox){this.oSaveButton=new t("settingsSaveBtn",{text:g.getText("save"),type:"Emphasized"});var l=new t("settingsCancelBtn",{text:g.getText("cancelBtn")});this.oResetButton=new t("settingsResetBtn",{text:g.getText("resetCardBtn")});this.oMessagePopOverButton=new t("settingsMessagePopOverBtn",{text:"{/Counter/All}",type:"Emphasized",icon:"sap-icon://message-popup",visible:"{= ${/Counter/All} === 0 ? false : true}"}).addStyleClass("sapOvpSettingsMessagePopOverBtn");this.dialogBox=new e("settingsDialog",{title:g.getText("settingsDialogTitle"),buttons:[this.oMessagePopOverButton,this.oSaveButton,l,this.oResetButton],afterClose:function(e){var t=this.dialogBox.getContent()[0],a=t.byId("sapOvpSettingsLineItemTitle"),i=t.byId("sapOvpSettingsLineItemSubTitle");if(a){a.destroy()}if(i){i.destroy()}this.bNewStaticLinkListCardFlag=false;this.bNewKPICardFlag=false;this.bAddNewCardFlag=false;this.newDataSource=false;this.dialogBox.destroyContent();this.detachWindowResizeHandler()}.bind(this)});this.dialogBox.setBusyIndicatorDelay(0);l.attachPress(function(e){this.dialogBox.close()}.bind(this))}this.oResetButton.setVisible(!this.bNewKPICardFlag);ne.bind(this)();var d=this.bNewStaticLinkListCardFlag||this.bNewKPICardFlag||this.bAddNewCardFlag;var p=a.getComponentInstance(),c=p.getRootControl().getModel("ovpCardProperties"),h;this.oi18nModel=p.getComponentData().i18n;if(this.bNewStaticLinkListCardFlag){h={title:"New Title",subTitle:"New Subtitle",staticContent:[],listFlavor:"standard",template:"sap.ovp.cards.linklist",layoutDetail:c.getProperty("/layoutDetail")}}else if(this.bNewKPICardFlag){var y=p.getComponentData().mainComponent.getView().getModel("JSONModelForSSB").getProperty("/d/results"),m=y[0];h={entitySet:m.ODataEntityset,kpiAnnotationPath:"com.sap.vocabularies.UI.v1.KPI#"+m.KPIQualifier,title:m.GroupTitle,subTitle:m.KPITitle,template:"sap.ovp.cards.charts.analytical",layoutDetail:c.getProperty("/layoutDetail"),selectedKPI:m,errorStatusText:undefined,KPIData:y}}else if(this.bAddNewCardFlag){h={addNewCard:true,newDataSource:false,title:"",subTitle:"",cardType:this.aCardType,aListType:this.aListType,aListFlavour:this.aListFlavour,valueSelectionInfo:"",navigation:this.aDataPointSelectionMode,aLinkListFlavour:this.aLinkListFlavour,authorization:""}}else{h=c.getData()}var C=v({},h);C=q.call(this,C);C=this.addManifestSettings(C);var P=new f(C),w=a.getDomRef().offsetHeight,I=new f(s.system),E=new f({deviceMedia:"Row"}),T=p.getComponentData(),V=T.mainComponent,D=T.appComponent,L=d?"":T.cardId;this.oAppComponent=D;this.oAppDescriptor=V._getCardFromManifest(L);this.sApplicationId=V._getApplicationId();this.oMainComponent=V;this.oOriginalAppDescriptor=D._getOvpCardOriginalConfig(L);I.setDefaultBindingMode("OneWay");C.dialogBoxHeight=w;C.dialogBoxWidth=20;var A=[];if(C.customParams||C.staticParameters){P.setProperty("/addCustomParameters",true);if(C.staticParameters&&Object.keys(C.staticParameters).length){for(var x in C.staticParameters){A.push({key:x,value:C.staticParameters[x]})}P.setProperty("/aAllStaticParameters",A)}}else{P.setProperty("/addCustomParameters",false)}var _=n._getLayer();var k=n.getQueryParameterValue("fiori-tools-rta-mode");if(k){P.setProperty("/layer",_);P.setProperty("/bFioriToolsRTAMode",k);if(C.objectStreamCardsSettings&&C.objectStreamCardsSettings.customActions){P.setProperty("/addCustomActions",true)}else{P.setProperty("/addCustomActions",false)}var N=p.getComponentData().appComponent.sId;var M=S.byId(N+"---mainView").getModel("i18n");var F=M.oData.bundle&&M.oData.bundle.oi18nModel;if(Array.isArray(F)&&F[0]&&F[0].aPropertyFiles[0]&&F[0].aPropertyFiles[0].mProperties){var B=F[0].aPropertyFiles[0].mProperties;var K=[];var U=[];var H=[];var W=[];if(!C.addNewCard){var j=r.oI18nKeyValueProperty;for(var x in j){if(x==="title"){U.push({key:"",value:C[x]})}if(x==="subTitle"){H.push({key:"",value:C[x]})}if(x==="valueSelectionInfo"){W.push({key:"",value:C[x]})}}for(var x in B){if(B.hasOwnProperty(x)){U.push({key:x,value:B[x]})}}for(var x in B){if(B.hasOwnProperty(x)){H.push({key:x,value:B[x]})}}for(var x in B){if(B.hasOwnProperty(x)){W.push({key:x,value:B[x]})}}P.setProperty("/ai18nPropertiesAndTitle",U);P.setProperty("/ai18nPropertiesAndSubTitle",H);P.setProperty("/ai18nPropertiesAndValSelInfo",W)}for(var x in B){if(B.hasOwnProperty(x)){K.push({key:x,value:B[x]})}}P.setProperty("/ai18nProperties",K)}}if(C.template==="sap.ovp.cards.linklist"||C.template==="sap.ovp.cards.v4.linklist"){P.setProperty("/listFlavorName",g.getText("OVP_KEYUSER_CAROUSEL"))}else{P.setProperty("/listFlavorName",g.getText("OVP_KEYUSER_BARLIST"))}if(C.layoutDetail==="resizable"){var z=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];if(!C.defaultSpan){C.defaultSpan={};P.setProperty("/defaultSpan/cols",P.getProperty("/cardLayout/colSpan"));P.setProperty("/defaultSpan/rows",z.indexOf(C.template)>-1?P.getProperty("/cardLayout/noOfItems"):P.getProperty("/cardLayout/rowSpan"))}else{if(!C.defaultSpan.rows){P.setProperty("/defaultSpan/rows",z.indexOf(C.template)>-1?P.getProperty("/cardLayout/noOfItems"):P.getProperty("/cardLayout/rowSpan"))}if(!C.defaultSpan.cols){P.setProperty("/defaultSpan/cols",P.getProperty("/cardLayout/colSpan"))}}C.NoOfColumns=[];var G=1,$=6;for(var Q=G;Q<=$;Q++){C.NoOfColumns.push({value:Q})}if(R(C.template,"chart")||C.template==="sap.ovp.cards.linklist"||C.template==="sap.ovp.cards.v4.linklist"){var X=a.getComponentInstance().getComponentData().mainComponent,Z=X.getLayout(),ee=Z.getDashboardLayoutUtil(),te=V._getCardId(a.getId()),ae=ee.calculateCardProperties(te),re=ee._getCardController(te).getView().byId("bubbleText")?43:0,se=ae.headerHeight+ae.dropDownHeight+re+50,oe=Math.ceil(ae.minCardHeight/ee.getRowHeightPx())+1;C.NoOfRows=[];C.NoOfRows.push({name:"None",value:0});C.NoOfRows.push({name:"Small",value:oe});C.NoOfRows.push({name:"Standard",value:Math.ceil((se+480)/ee.getRowHeightPx())+1});if(this.bNewStaticLinkListCardFlag||this.bNewKPICardFlag){P.setProperty("/defaultSpan/cols",1);P.setProperty("/defaultSpan/rows",oe)}}}if(C.addNewCard){P.setProperty("/addViewSwitchCheckBox",false);P.setProperty("/addKPIHeaderCheckBox",false);var le=[];var de=V.oCardsModels;if(de){for(var x in de){if(x.indexOf("kpi_card_model_")<0){le.push(Object.assign({},{Title:x},de[x]))}}P.setProperty("/datasources",le);P.setProperty("/datasourcesFromManifest",le)}}var pe={};var ce=new f(pe);J(ce);if((C.template==="sap.ovp.cards.linklist"||C.template==="sap.ovp.cards.v4.linklist")&&C.staticContent){Y(P);P.setProperty("/lineItemId","linkListItem--1");P.setProperty("/lineItemIdCounter",C.staticContent.length)}if(C.template==="sap.ovp.cards.charts.analytical"){var ue=V._getCardId(a.getId());P.setProperty("/NewKPICard",this.bNewKPICardFlag);P.setProperty("/selectedKPICardID",ue)}this.setVisibilityForFormElements(C);var fe=new f(this.oVisibility);if(!this.bAddNewCardFlag){P.attachPropertyChange(ie.bind(this))}var ge=new b("settingsView",{viewName:"sap.ovp.cards.rta.SettingsDialog",type:u.XML,preprocessors:{xml:{bindingContexts:{ovpCardProperties:P.createBindingContext("/")},models:{ovpCardProperties:P,deviceSystemProperties:I}}}});ge.setModel(ce,"staticCardProperties");var he=g.oResourceModel;ge.setModel(P);ge.setModel(he,"ovpResourceModel");ge.setModel(E,"deviceMediaProperties");ge.setModel(fe,"visibility");if(this.oi18nModel){ge.setModel(this.oi18nModel,"@i18n")}this.dialogBox.addContent(ge);this.attachWindowResizeHandler();ge.loaded().then(function(e){if(!this.bAddNewCardFlag){var t=e.byId("dialogCard");if(!t.getVisible()){t=e.byId("dialogCardNoPreview");var r=ge.getModel().getProperty("/template").split("."),n=r[r.length-1],s=g.getText("OVP_KEYUSER_NO_CARD_PREVIEW_MSG",[n]);t.setText(s)}else{t.setWidth(C.dialogBoxWidth+"rem")}}O(a,e,d);this.dialogBox.open();e.getController().settingsResolve=i}.bind(this))}.bind(this))}};ce.fnEditCardHandler=function(e,t){var a=e.getComponentInstance().getComponentData().mainComponent,i=a.getLayout(),r=a.getUIModel();return ce.getDialogBox(e).then(function(t){var s=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_changeCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"editCardSettings",content:t.flexibilityChange}}];if(t.viewSwitchChange){s.push({selectorControl:n.getApp().getLayout(),changeSpecificData:{changeType:"viewSwitch",content:t.viewSwitchChange}})}if(r.getProperty("/containerLayout")==="resizable"){var o=i.getDashboardLayoutModel(),l=i.getDashboardLayoutUtil(),d=a._getCardId(e.getId()),p=o.getCardById(d),c=l.calculateCardProperties(d),u=o.getColCount(),f="C"+u,g=t.flexibilityChange.newAppDescriptor.settings.defaultSpan,h,v=[];if(g&&g.cols){s.forEach(function(e){if(e.changeSpecificData.changeType==="editCardSettings"){var t=e.changeSpecificData.content.oldAppDescriptor;t.settings.defaultSpan={rowSpan:p.dashboardLayout.rowSpan,colSpan:p.dashboardLayout.colSpan,showOnlyHeader:p.dashboardLayout.showOnlyHeader}}});if(g.rows===0){p.dashboardLayout.autoSpan=false;h=Math.ceil((c.headerHeight+2*l.CARD_BORDER_PX)/l.getRowHeightPx())}else{p.dashboardLayout.autoSpan=true;var y=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];if(y.indexOf(p.template>-1)){p.dashboardLayout.noOfItems=g.rows}else{h=g.rows}}o._arrangeCards(p,{row:h,column:g.cols},"resize",v);o._removeSpaceBeforeCard(v);v.forEach(function(e){var t={};t.dashboardLayout={};t.cardId=e.content.cardId;t.dashboardLayout[f]=e.content.dashboardLayout;s.push({selectorControl:n.getApp().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:t}})})}}return s})};ce.fnCloneCardHandler=function(e,t){return a.getPayLoadForCloneCard(e).then(function(t){return[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}]})};ce.fnAddStaticLinkListCardHandler=function(e,t){ce.bNewStaticLinkListCardFlag=true;return ce.getDialogBox(e).then(function(t){return[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}]})};ce.fnAddKPICardHandler=function(e,t){ce.bNewKPICardFlag=true;return ce.getDialogBox(e).then(function(t){var a=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}];if(t.addODataAnnotation){a.push({appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_addAnnotationsToOData",content:t.addODataAnnotation}})}return a})};ce.fnAddNewCardHandler=function(e,t){ce.bAddNewCardFlag=true;return ce.getDialogBox(e).then(function(t){var a=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}];if(t.addODataAnnotation){a.push({appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_addAnnotationsToOData",content:t.addODataAnnotation}})}return a})};ce.fnRemoveCardHandler=function(e,t){return new Promise(function(t,i){p.confirm(g.getText("OVP_KEYUSER_MESSAGE_BOX_WARNING_MESSAGE_DELETE"),{actions:[p.Action.DELETE,p.Action.CANCEL],icon:p.Icon.WARNING,title:g.getText("OVP_KEYUSER_MESSAGE_BOX_TITLE_DELETE"),initialFocus:p.Action.CANCEL,onClose:function(r){if(r==="DELETE"){t(a.getPayLoadForRemoveCard(e))}else{i(null)}}})}).then(function(t){var a=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_removeCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"removeCardContainer",content:t.flexibilityChange}}];if(t.removeDataSourceChange){t.removeDataSourceChange.forEach(function(t){a.push({appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_removeDataSource",content:t}})})}return a},function(e){return[]})};return ce},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/ViewCacheHelper", ["sap/ui/core/cache/CacheManager","sap/ui/core/Component","sap/ovp/app/OVPLogger"],function(e,r,n){"use strict";var a=new n("ovp.cards.ViewCacheHelper");function t(e){var n;while(e){var a=r.getOwnerComponentFor(e);if(a){e=n=a}else{if(e instanceof r){n=e}e=e.getParent&&e.getParent()}}return n}function o(e){var r=t(e);var n=r&&r.getMetadata().getName();var a=[n||window.location.host+window.location.pathname,e.getId().split("_Tab")[0]];var o=a.join("_");return Promise.resolve(o)}function i(r){return o(r).then(function(r){return e.delWithFilters({prefix:r})}).catch(function(e){a.error(e)})}return{clearViewCacheForTabbedCard:i}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/OVPVizDataHandler", ["sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/ovp/cards/charts/Utils","sap/ovp/cards/AnnotationHelper","sap/ovp/app/resources","sap/base/util/each","sap/base/util/merge","sap/ovp/cards/Integration/Helpers/AnalyticalCard"],function(e,t,a,r,s,n,i,o){"use strict";return e.extend("sap.ovp.cards.charts.OVPVizDataHandler",{metadata:{aggregations:{data:{type:"sap.ui.core.Element"},aggregateData:{type:"sap.ui.core.Element"},content:{multiple:false}},properties:{chartType:{defaultValue:false},dependentDataReceived:{defaultValue:false},scale:{defaultValue:""},entitySet:{}}},renderer:function(e,t){e.openStart("div",t).openEnd();if(t.getContent()){e.renderControl(t.getContent())}e.close("div")},mergeDatasets:function(e,a,r){var l=this;var p=this.getModel();var u=e.mParameters;var d=i({},this.dataSet);if(u){var g=u.select.split(",")}var c=e.getPath().substring(1);var v=-1;if(c){v=c.indexOf("Parameters")}if(v>=0){c=c.substr(0,c.indexOf("Parameters"))}var f=p.getMetaModel();var h=this.getEntitySet();var y=f.getODataEntitySet(h);var m=f.getODataEntityType(y.entityType);var D=[];var b=[];for(var P=0;P<m.property.length;P++){if(m.property[P]["com.sap.vocabularies.Analytics.v1.Measure"]||m.property[P].hasOwnProperty("sap:aggregation-role")&&m.property[P]["sap:aggregation-role"]==="measure"){if(g&&g.indexOf(m.property[P].name)!==-1){D.push(m.property[P].name)}}else{if(g&&g.indexOf(m.property[P].name)!==-1){b.push(m.property[P].name)}}}if(d&&d.results){for(var P=0;P<d.results.length-2;P++){for(var S=0;S<D.length;S++){d.results[0][D[S]]=Number(d.results[0][D[S]])+Number(d.results[P+1][D[S]])}}var C=d.__count-d.results.length;var A={};A.results=[];A.results[0]=d.results[0];var O;if(d.__count>d.results.length){var x=i({},this.aggregateSet);if(x&&x.results&&d.results.length<d.__count){n(D,function(e){x.results[0][D[e]]=String(Number(l.aggregateSet.results[0][D[e]])-Number(A.results[0][D[e]]))});n(b,function(e){x.results[0][b[e]]=s.getText("OTHERS_DONUT",[C+1])});x.results[0].$isOthers=true;O=x.results[0]}}if(O){a.results.push(O)}var T=r.getModel("ovpCardProperties");var E=T&&T.getProperty("/bEnableStableColors");var M=T&&T.getProperty("/colorPalette");var R=m[T&&T.getProperty("/chartAnnotationPath")];if(R.DimensionAttributes.length===1&&E&&r.getVizType()==="donut"&&M&&M instanceof Object){var w=R.DimensionAttributes[0].Dimension.PropertyPath;if(M instanceof Array){var I=M.map(function(e){return e.color});var B=I.slice()}else{var N=JSON.parse(JSON.stringify(M))}var V=r.getVizProperties();if(!V){var k={plotArea:{dataPointStyle:{rules:[]}}};V=k}else if(V&&!V.plotArea){V.plotArea={dataPointStyle:{rules:[]}}}if(r&&V&&V.plotArea){if(!V.plotArea.dataPointStyle){V.plotArea.dataPointStyle={rules:[]}}else{V.plotArea.dataPointStyle.rules=[]}var _=f.getODataProperty(m,w);if(_){var z=_["com.sap.vocabularies.Common.v1.Label"]?_["com.sap.vocabularies.Common.v1.Label"].String:w;var U;if(_["com.sap.vocabularies.Common.v1.Text"]){U=_["com.sap.vocabularies.Common.v1.Text"]["Path"]}else if(_["sap:text"]){U=_["sap:text"]}else{U=_}var j=function(e,t,r,s){var n={dataContext:{},properties:{color:I&&I[e]||r&&r[s]},displayName:a.results[t][U]};n.dataContext[z]=a.results[t][w];return n};if(M instanceof Array){n(M,function(e,t){for(var r=0;r<a.results.length;r++){if(a.results[r][w]===t.dimensionValue){var s=j(e,r,t);V.plotArea.dataPointStyle["rules"].push(s);B.splice(e,1)}}})}else{for(var H=0;H<a.results.length;H++){if(M.hasOwnProperty(a.results[H][w])){var F=a.results[H][w];var J={};J[F]=M[F];var L=j(P,H,J,F);V.plotArea.dataPointStyle["rules"].push(L);delete N[F]}}}if(x&&x.results&&Array.isArray(x.results)){V.plotArea.dataPointStyle["rules"].push({callback:function(e){if(e&&e[z].lastIndexOf("Others")!=-1){return true}},properties:{color:B&&B.length?I[I.length-1]:Object.keys(N).length&&N[Object.keys(N)[0]]},displayName:x.results[0][w]})}}}r.setVizProperties(V);if(T&&T.getProperty("/bInsightEnabled")){var q=r.getId(),Y=i({},V);o.setVizPropertyMap(q,Y)}}}var $=new t;$.setData(a.results);r.setModel($,"analyticalmodel")},updateBindingContext:function(){var s=this.getBinding("data");var o=this.getBinding("aggregateData");var l=this;if(this.chartBinding==s){return}else{this.chartBinding=s;if(s){var l=this;s.attachEvent("dataReceived",function(e){l.dataSet=e&&e.getParameter("data");l.oDataClone=i({},l.dataSet);if(l.getChartType()=="donut"&&l.getBinding("aggregateData")!==undefined){if(l.getDependentDataReceived()===true||l.getDependentDataReceived()==="true"){l.mergeDatasets(s,l.oDataClone,l.getContent());l.setDependentDataReceived(false)}else{l.setDependentDataReceived(true)}}else{var o=new t;if(l.dataSet){var p=l.getEntitySet();var u=s.getModel();var d=a.cacheODataMetadata(u);var g=d[p];var c=a.getSemanticProperties(g);var v=c&&c.aTimeAxisProperties||[];var f=c&&c.oTimeAxisPropertiesAndSemantics||{};if(v&&v.length){if(l.dataSet.results&&l.dataSet.results.length){n(l.dataSet.results,function(e,t){n(v,function(e,a){if(t.hasOwnProperty(a)){var s=t[a];var n,i,o,l,p,u,d;switch(f[a]["sap:semantics"]){case"yearmonth":n=parseInt(s.substr(0,4),10);i=s.substr(4);p=parseInt(i,10)-1;t[a]=new Date(Date.UTC(n,p));break;case"yearquarter":n=parseInt(s.substr(0,4),10);o=s.substr(4);l=parseInt(o,10)*3-2;p=l-1;t[a]=new Date(Date.UTC(n,p));break;case"yearweek":n=parseInt(s.substr(0,4),10);u=s.substr(4);var d=1+(parseInt(u,10)-1)*7;t[a]=new Date(Date.UTC(n,0,d));break;case"fiscalyearperiod":var g="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod";var c=r.getFormattedFiscalData(s,g);t[a]=c;break;default:break}}})})}}o.setData(l.dataSet.results);l.oDataClone=i({},l.dataSet)}l.getContent().setModel(o,"analyticalmodel");l.mergeDatasets(s,l.oDataClone,l.getContent())}})}e.prototype.updateBindingContext.apply(this,arguments)}if(this.chartAggrBinding==o){return}else{this.chartAggrBinding=o;if(o){var l=this;o.attachEvent("dataReceived",function(e){l.aggregateSet=e&&e.getParameter("data");if(l.getChartType()=="donut"){if(l.getDependentDataReceived()===true||l.getDependentDataReceived()==="true"){l.oDataClone=i({},l.dataSet);l.mergeDatasets(s,l.oDataClone,l.getContent());l.setDependentDataReceived(false)}else{l.setDependentDataReceived(true)}}else{var a=new t;a.setData(l.aggregateSet.results);l.getContent().setModel(a,"analyticalmodel")}})}e.prototype.updateBindingContext.apply(this,arguments)}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileOverview Miscellaneous utility functions for legacy cards.
 * See VizAnnotationManager.js for generic card methods.
 * This file can be safely deleted when legacy cards deprecate.
 */
sap.ui.predefine("sap/ovp/cards/charts/Utils", ["sap/base/util/each","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/cards/charts/config"],function(e,t,r,a){"use strict";var i={};var n={CHART_QUALIFIER_KEY:"chartAnnotationPath",SELVAR_QUALIFIER_KEY:"selectionAnnotationPath",PREVAR_QUALIFIER_KEY:"presentationAnnotationPath",ERROR_NO_CHART:'Analytic cards require valid "chartAnnotationPath" '+"configured in manifest.json",LABEL_KEY:"sap:label",TEXT_KEY:"sap:text",TYPE_KEY:"type"};var o={CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",CACHING_ERROR:"no model defined while caching OdataMetaData"};var s=new r("OVP.charts.Utils");function u(e,t){if(!t){return""}var r=e.getSetting("ovpCardProperties");if(!r){return""}var a=r.oData;if(!a){return""}var i=a&&a[t]?a[t]:"";return i===""?"":i.split("#")[1]}i.getAllColumnTexts=function(e){return l("sap:text",e)};i.formDimensionPath=function(e){var t="{"+e+"}";var r=this.getModel("ovpCardProperties").getProperty("/entityType");if(!r){return t}var a=f(r);if(!a||!a[e]){return t}var n=a[e];if(n=="Edm.DateTime"){return"{path:'"+e+"', formatter: 'sap.ovp.cards.charts.VizAnnotationManager.returnDateFormat'}"}var o=i.getAllColumnTexts(r);if(!o){return t}t="{"+(o[e]||e)+"}";return t};function l(e,t){var r={};var a=t.property;for(var i=0,n=a.length;i<n;i++){if(a[i].hasOwnProperty(e)&&e=="com.sap.vocabularies.Common.v1.Label"){r[a[i].name]=a[i][e].String}else if(a[i].hasOwnProperty(e)){r[a[i].name]=a[i][e]}else{r[a[i].name]=a[i].name}}return r}function p(e){return l("com.sap.vocabularies.Common.v1.Label",e)}function f(e){return l("type",e)}var c={};i.LineChart=function(){function t(t,i,n){var o=r(t,n).split(",");var s=a(t,i).split(",");var u=[];e(o,function(e,t){u.push(t)});var l=[];e(s,function(e,t){l.push(t)});var p=true;var f=t.getSetting("ovpCardProperties").getProperty("/navigation");if(f=="chartNav"){p=false}var p=p?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{   visible:false,   text: '"+u.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, categoryAxis:{  title:{   visible:false,   text: '"+l.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, general: { groupData: false }, interaction:{  noninteractiveMode: "+p+",  selectability: {   legendSelection: false,   axisLabelSelection: false,   mode: 'EXCLUSIVE',   plotLassoSelection: false,   plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }"}t.requiresIContext=true;function r(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var i=p(a);var n=[];e(r,function(e,t){n.push(i[t.Measure.PropertyPath]||t.Measure.PropertyPath)});return n.join(",")}r.requiresIContext=true;function a(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var i=p(a);var o=[];var s;var l;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Category"){l=i[t.Dimension.PropertyPath];o.push(l?l:t.Dimension.PropertyPath)}});if(o.length<1){l=i[r[0].Dimension.PropertyPath];o.push(l?l:r[0].Dimension.PropertyPath)}s=u(t,n.CHART_QUALIFIER_KEY);c[s]=o;return o.join(",")}a.requiresIContext=true;function i(t,r){var a=[];var i;var o=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!o){return""}var s=p(o);var l;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Series"){l=s[t.Dimension.PropertyPath];a.push(l?l:t.Dimension.PropertyPath)}});i=u(t,n.CHART_QUALIFIER_KEY);a=a.filter(function(e){if(!c[i]){return true}return e!==c[i][0]});return a.join(",")}i.requiresIContext=true;function o(e,t){return i(e,t)!==""}o.requiresIContext=true;return{getVizProperties:t,getValueAxisFeed:r,getCategoryAxisFeed:a,getColorFeed:i,testColorFeed:o}}();i.BubbleChart=function(){function t(t,r,n){var o=a(t,n).split(",");var s=i(t,n).split(",");var u=[];e(o,function(e,t){u.push(t)});var l=[];e(s,function(e,t){l.push(t)});var p=true;var f=t.getSetting("ovpCardProperties").getProperty("/navigation");if(f=="chartNav"){p=false}var p=p?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{ visible:true, text: '"+u.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, valueAxis2:{  title:{ visible:true, text: '"+l.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, categoryAxis:{  title:{ visible:true  },  label:{ formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, interaction:{  noninteractiveMode: "+p+",  selectability: { legendSelection: false, axisLabelSelection: false, mode: 'EXCLUSIVE', plotLassoSelection: false, plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }"}t.requiresIContext=true;function r(t,r){var a;if(!t||!t.getSetting||!(a=t.getSetting("ovpCardProperties"))){return[""]}var i=a.getProperty("/entityType");if(!i){return[""]}var n=p(i);var o=[null,null,null];var s=["Axis1","Axis2","Axis3"];e(r,function(e,t){if(s.indexOf(t.Role.EnumMember.split("/")[1])>-1){if(o[0]===null){o[0]=n[t.Measure.PropertyPath]||t.Measure.PropertyPath}else if(o[1]===null){o[1]=n[t.Measure.PropertyPath]||t.Measure.PropertyPath}else if(o[2]==null){o[2]=n[t.Measure.PropertyPath]||t.Measure.PropertyPath}}});return o}r.requiresIContext=true;function a(e,t){return r(e,t)[0]}a.requiresIContext=true;function i(e,t){return r(e,t)[1]}i.requiresIContext=true;function n(e,t){return r(e,t)[2]}n.requiresIContext=true;function o(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var i=p(a);var n=[];var o;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Series"){o=i[t.Dimension.PropertyPath];n.push(o?o:t.Dimension.PropertyPath)}});return n.join(",")}o.requiresIContext=true;function s(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var i=p(a);var n=[];var o;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Category"){o=i[t.Dimension.PropertyPath];n.push(o?o:t.Dimension.PropertyPath)}});return n.join(",")}s.requiresIContext=true;function u(e,t){return o(e,t)!==""}u.requiresIContext=true;function l(e,t){return s(e,t)!==""}l.requiresIContext=true;return{getVizProperties:t,getMeasurePriorityList:r,getValueAxisFeed:a,getValueAxis2Feed:i,getBubbleWidthFeed:n,getColorFeed:o,getShapeFeed:s,testColorFeed:u,testShapeFeed:l}}();i.validateMeasuresDimensions=function(e,t){var r=null;var a=null;if(!e.getDataset()){s.error("OVP-AC: "+t+" Card Error: No Dataset defined for chart.");return false}r=e.getDataset().getMeasures();a=e.getDataset().getDimensions();switch(t){case"Bubble":if(r.length!==3||a.length<1||!r[0].getName()||!r[1].getName()||!r[2].getName()||!a[0].getName()){s.error("OVP-AC: Bubble Card Error: Enter exactly 3 measures and at least 1 dimension.");return false}break;case"Donut":if(r.length!==1||a.length!==1||!r[0].getName()||!a[0].getName()){s.error("OVP-AC: Donut Card Error: Enter exactly 1 measure and 1 dimension.");return false}break;case"Line":if(r.length<1||a.length<1||!r[0].getName()||!a[0].getName()){s.error("OVP-AC: Line Card Error: Configure at least 1 dimensions and 1 measure.");return false}break}return true};i.getSortAnnotationCollection=function(e,t,r){if(t&&t.SortOrder&&t.SortOrder.Path&&t.SortOrder.Path.indexOf("@")>=0){var a=t.SortOrder.Path.split("@")[1];var i=e.getServiceAnnotations()[r.entityType];return i[a]}return t.SortOrder};i.oFullConfig=null;i.getConfig=function(e){if(!this.oFullConfig){try{this.oFullConfig=a.getChartsConfiguration()}catch(e){s.error(o.CONFIG_LOAD_ERROR+e)}}if(!e){return this.oFullConfig}var r;try{r=e.EnumMember.split("/")[1]}catch(e){s.error(o.CARD_ERROR+o.INVALID_CHARTTYPE+o.ANNO_REF);return{}}if(!this.oFullConfig[r]){s.error(o.INVALID_CONFIG+r+" "+o.CONFIG_JSON);return{}}var i;if((i=this.oFullConfig[r].reference)&&this.oFullConfig[i]){var n=t({},this.oFullConfig[i]);this.oFullConfig[r]=n}return this.oFullConfig[r]};i.oCachedMetaModel={};i.cacheODataMetadata=function(t){if(!t){s.error(o.CARD_ERROR+o.CACHING_ERROR);return}var r=this.oCachedMetaModel[t.getId()];if(!r){r={};var a=t.getMetaModel();var i=a&&a.getODataEntityContainer();var n,u;e(i.entitySet,function(t,i){n=a.getODataEntityType(i.entityType);u={};e(n.property,function(e,t){u[t.name]=t});r[i.name]=u});this.oCachedMetaModel[t.getId()]=r}return r};i.getSemanticProperties=function(t){var r={aTimeAxisProperties:[],oTimeAxisPropertiesAndSemantics:{},propertyType:""};if(t){var a=Object.keys(t);if(a&&a.length){e(a,function(e,a){if(t[a]["type"]==="Edm.String"){if(t[a]["sap:semantics"]==="yearmonth"||t[a]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={"sap:semantics":"yearmonth"};r.propertyType="yearmonth"}else if(t[a]["sap:semantics"]==="yearquarter"||t[a]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={"sap:semantics":"yearquarter"};r.propertyType="yearquarter"}else if(t[a]["sap:semantics"]==="yearweek"||t[a]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={"sap:semantics":"yearweek"};r.propertyType="yearweek"}else if(t[a]["sap:semantics"]==="fiscalyearperiod"||t[a]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={"sap:semantics":"fiscalyearperiod"}}}})}}return r};i.isDataSetEmpty=function(e){if(e&&e.getSource()&&e.getSource().getCurrentContexts()){return e.getSource().getCurrentContexts().length===0}};return i},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileOverview Library to Manage rendering of Viz Charts.
 * Any function that needs to be exported(used outside this file) via namespace should be defined as
 * a function and then added to the return statement at the end of this file
 */
sap.ui.predefine("sap/ovp/cards/charts/VizAnnotationManager", ["sap/ui/thirdparty/jquery","sap/ovp/cards/charts/Utils","sap/ui/model/odata/CountMode","sap/ovp/cards/AnnotationHelper","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/viz/ui5/api/env/Format","sap/viz/ui5/controls/VizTooltip","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ui/core/Element","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/each","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/base/util/isEmptyObject","sap/ovp/cards/Integration/Helpers/AnalyticalCard","sap/ovp/cards/NavigationHelper","sap/ovp/cards/Constants","sap/ovp/cards/MetadataAnalyser"],function(jQuery,e,t,r,a,i,n,o,s,l,u,f,c,v,p,m,g,A,d,h,P,E,C,y){"use strict";var _={LABEL_KEY:"sap:label",LABEL_KEY_V4:"com.sap.vocabularies.Common.v1.Label",TEXT_KEY:"sap:text",TEXT_KEY_V4:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT_ANNO:"com.sap.vocabularies.UI.v1.TextArrangement",TYPE_KEY:"type",DISPLAY_FORMAT_KEY:"sap:display-format",SEMANTICS_KEY:"sap:semantics",UNIT_KEY:"sap:unit",UNIT_KEY_V4_ISOCurrency:"Org.OData.Measures.V1.ISOCurrency",UNIT_KEY_V4_Unit:"Org.OData.Measures.V1.Unit",CURRENCY_CODE:"currency-code",NAME_KEY:"name",NAME_CAP_KEY:"Name",EDM_TYPE:"type",EDM_INT32:"Edm.Int32",EDM_INT64:"Edm.Int64",SCATTER_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Scatter",BUBBLE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bubble",LINE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Line",COLUMNSTACKED_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked",VERTICALBULLET_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/VerticalBullet",COLUMN_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Column",BAR_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bar",COMBINATION_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Combination",DONUT_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Donut"};var I={CARD_WARNING:"OVP-AC: Analytic card: Warning: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",DATA_ANNO_ERROR:"OVP-AC: Analytic card Error:",CARD_ANNO_ERROR:"OVP-AC: Analytic card: Error ",CHART_ANNO_ERROR:"OVP-AC: Analytic card: Error ",INVALID_CHART_ANNO:"OVP-AC: Analytic Cards: Invalid Chart Annotation.",ANALYTICAL_CONFIG_ERROR:"Analytic card configuration error",CACHING_ERROR:"no model defined while caching OdataMetaData",INVALID_MAXITEMS:"maxItems is Invalid. ",NO_DATASET:"OVP-AC: Analytic Cards: Could not obtain dataset.",SORTORDER_WARNING:"SortOrder is present in PresentationVariant, but it is empty or not well formed.",BOOLEAN_ERROR:"Boolean value is not present in PresentationVariant.",IS_MANDATORY:"is mandatory.",IS_MISSING:"is missing.",NOT_WELL_FORMED:"is not found or not well formed)",MISSING_CHARTTYPE:"Missing ChartType in ",CHART_ANNO:"Chart Annotation.",DATA_ANNO:"Data Annotation",CARD_ANNO:"card annotation.",CARD_CONFIG:"card configuration.",CARD_CONFIG_ERROR:"Could not obtain configuration for ",CARD_CONTAINER_ERROR:"Could not obtain card container. ",DATA_UNAVAIALABLE:"No data available.",CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",ENTER_INTEGER:"Please enter an Integer.",NO_CARD_MODEL:"Could not obtain Cards model.",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_REDUNDANT:"Invalid/redundant role configured for ",CHART_IS:"chart is/are ",CARD_CONFIG_JSON:"card from config.json",ALLOWED_ROLES:"Allowed role(s) for ",DIMENSIONS_MANDATORY:"DimensionAttributes are mandatory.",MEASURES_MANDATORY:"MeasureAttributes are mandatory.",CARD_LEAST:"card: Enter at least ",CARD_MOST:"card: Enter at most ",FEEDS:"feed(s).",MIN_FEEDS:"Minimum number of feeds required for ",FEEDS_OBTAINED:"card is not configured. Obtained ",FEEDS_REQUIRED:"feed(s), Required: ",INVALID_SEMANTIC_MEASURES:"More than one measure is being semantically coloured",INVALID_IMPROVEMENT_DIR:"No Improvement Direction Found",INVALID_CRITICALITY:"Invalid criticality values",INVALID_DIMMEAS:"Invalid number of Measures or Dimensions",INVALID_FORECAST:"Invalid/Redundant Datapoint or Forecast measure",INVALID_TARGET:"Invalid/Redundant Datapoint or Target measure",ERROR_MISSING_AXISSCALES:"Minimum and Maximum values are mandatory for AxisScale MinMax to work"};var T=["year","yearweek","yearmonth","yearquarter"];var N=[_.COLUMNSTACKED_CHARTTYPE,_.DONUT_CHARTTYPE,_.COLUMN_CHARTTYPE,_.BAR_CHARTTYPE,_.VERTICALBULLET_CHARTTYPE,_.LINE_CHARTTYPE,_.COMBINATION_CHARTTYPE,_.BUBBLE_CHARTTYPE];var R=[_.COLUMNSTACKED_CHARTTYPE];var D;var b=new d("OVP.charts.VizAnnotationManager");function S(a,i,n,o,s,l,u){var f="{";if(!a||!a.getSetting("ovpCardProperties")){b.error(I.ANALYTICAL_CONFIG_ERROR);f+="}";return f}var c=a.getSetting("dataModel");var v;if(u&&u.EnumMember){v=u.EnumMember.split("/");if(v&&v[1]==="Donut"){c.setDefaultCountMode(t.Inline)}if(v&&v[1]!="Donut"&&s===undefined){return null}}var p=[];var m=[];var d=[];var h=[];var P=[];var E=[];var C=[];var T=n&&n.Parameters;var N=o&&o.SortOrder;var R=o&&o.MaxItems,D=null;var S;var L;var V;var Y=null;var x=_.TEXT_KEY;var F=_.TEXT_KEY_V4;var U=_.UNIT_KEY;var K=_.UNIT_KEY_V4_ISOCurrency;var B=_.UNIT_KEY_V4_Unit;var w={};if(R){D=R.Int32?R.Int32:R.Int}if(D){if(D==="0"){b.error("OVP-AC: Analytic card Error: maxItems is configured as "+D);f+="}";return f}if(!/^\d+$/.test(D)){b.error("OVP-AC: Analytic card Error: maxItems is Invalid. Please enter an Integer.");f+="}";return f}}var k=a.getSetting("ovpCardProperties"),z=k.getProperty("/parameters"),j=k.getProperty("/metaModel");T=T||!!z;if(T){var W=y.resolveParameterizedEntitySet(c,i,n,z);f+="path: '"+W+"'"}else{f+="path: '/"+i.name+"'"}var X=[];Y=a.getSetting("ovpCardProperties").getProperty("/entitySet");if(!c||!Y){return f}var q=ve(c,Y);var Q=a.getSetting("ovpCardProperties").getProperty("/cardLayout");var Z=1,J;var $=H();var ee;var te;if(s&&Q&&Q.colSpan&&Q.colSpan>1){J=Q.colSpan-Z;for(var re in $){if((te=$[re].reference)&&$[te]){var ae=A({},$[te]);$[re]=ae}if(re===v[1]||$[re].time&&$[re].time.type===v[1].toLowerCase()){ee=$[re];break}}var ie=G(s,ee,c,Y);if(ie){ee=ee.time}else{ee=ee.default}var ne=a.getSetting("ovpCardProperties").getProperty("/dataStep");if(!ne){if(ee.resize&&ee.resize.hasOwnProperty("dataStep")&&!isNaN(ee.resize.dataStep)){ne=ee.resize.dataStep}}ne=parseInt(ne,10);if(J>0&&ne&&!isNaN(ne)){D=parseInt(D,10)+ne*J}}if(n){var k=a.getSetting("ovpCardProperties");X=r.getFilters(k,n)}if(X.length>0){f+=", filters: "+JSON.stringify(X)}if(N){var oe=o.SortOrder;if(!oe.length){oe=e.getSortAnnotationCollection(c,o,i)}if(oe.length<1){b.warning(I.CARD_WARNING+I.SORTORDER_WARNING)}else{var se="";var le;var ue;var fe;for(var ce=0;ce<oe.length;ce++){le=oe[ce];fe=le.Property.PropertyPath;C.push(fe);if(typeof le.Descending==="undefined"){ue="true"}else{var pe=le.Descending.Bool||le.Descending.Boolean;if(!pe){b.warning(I.CARD_WARNING+I.BOOLEAN_ERROR);ue="true"}else{ue=pe.toLowerCase()==="true"?"true":"false"}}se=se+"{path: '"+fe+"',descending: "+ue+"},"}f+=", sorter: ["+se.substring(0,se.length-1)+"]"}}var me=a.getSetting("ovpCardProperties").getProperty("/entityType");g(l,function(e,t){S=t.Measure.PropertyPath;if(t.DataPoint&&t.DataPoint.AnnotationPath){var r=me[t.DataPoint.AnnotationPath.substring(1)];if(r.ForecastValue&&(r.ForecastValue.PropertyPath||r.ForecastValue.Path)){var a=r.ForecastValue.PropertyPath||r.ForecastValue.Path;P.push(a);if(q&&q[a]){var i;if(q[a][K]){i=q[a][K].Path?q[a][K].Path:undefined}else if(q[a][B]){i=q[a][B].Path?q[a][B].Path:undefined}else if(q[a][U]){i=q[a][U]}if(i){if((P?Array.prototype.indexOf.call(P,i):-1)===-1){P.push(i)}}}}if(r.TargetValue&&(r.TargetValue.PropertyPath||r.TargetValue.Path)){var n=r.TargetValue.PropertyPath||r.TargetValue.Path;P.push(n);if(q&&q[n]){var i;if(q[n][K]){i=q[n][K].Path?q[n][K].Path:undefined}else if(q[n][B]){i=q[n][B].Path?q[n][B].Path:undefined}else if(q[n][U]){i=q[n][U]}if(i){if((P?Array.prototype.indexOf.call(P,i):-1)===-1){P.push(i)}}}}}P.push(S);if(q&&q[S]){if(q[S][F]){if(q[S][F].String&&S!=q[S][F].String){P.push(q[S][F].String?q[S][F].String:S)}else if(q[S][F].Path&&S!=q[S][F].Path){P.push(q[S][F].Path?q[S][F].Path:S)}}else if(q[S][x]&&S!=q[S][x]){P.push(q[S][x]?q[S][x]:S)}}if(q&&q[S]){var i;if(q[S][K]){i=q[S][K].Path?q[S][K].Path:undefined}else if(q[S][B]){i=q[S][B].Path?q[S][B].Path:undefined}else if(q[S][U]){i=q[S][U]}if(i){if((P?Array.prototype.indexOf.call(P,i):-1)===-1){P.push(i)}}}});g(s,function(e,t){S=t.Dimension.PropertyPath;p.push(S);if(q&&q[S]){if(q[S][F]){if(q[S][F].String&&S!=q[S][F].String){p.push(q[S][F].String?q[S][F].String:S)}else if(q[S][F].Path&&S!=q[S][F].Path){V=q[S][F].Path;var r=V.split("/");if(r.length>1){L=O(j,me,V);if(L!==""){p.push(V);m.push(L);h=M(j,me,V);if(h.length>0){d=d.concat(h)}}}else{p.push(V?V:S)}}}else if(q[S][x]&&S!=q[S][x]){p.push(q[S][x]?q[S][x]:S)}}});if(d.length>0){var ge=0;while(ge<d.length){if(p.indexOf(d[ge])!==-1){d.splice(ge,1)}else{ge++}}}if(P.length>0){g(P,function(e,t){w[t]=true})}if(p.length>0){g(p,function(e,t){w[t]=true})}f+=", parameters: {select:'"+[].concat(p,P).join(",");var Ae=j.getODataEntityType(i.entityType);if(Ae){var de=r.getRequestFields(o);if(de&&de.length>0){g(de,function(e,t){if(!w.hasOwnProperty(t)){w[t]=true;E.push(t)}});if(E.length>0){f+=","+E.join(",")}}}if(C.length>0){var he=[];g(C,function(e,t){if(!w.hasOwnProperty(t)){he.push(t)}});if(he.length>0){f+=","+he.join(",")}}if(m.length>0){f+="'"+","+" expand:'"+m.join(",")}var Pe=r.checkFilterPreference(a.getSetting("ovpCardProperties"));if(Pe){f+="', custom: {cardId: '"+a.getSetting("ovpCardProperties").getProperty("/cardId")+"', _requestFrom: 'ovp_internal'}}"}else{f+="', custom: {_requestFrom: 'ovp_internal'}}"}if(v&&v[1]==="Donut"&&s===undefined){f+=", length: 1"}else if(v&&v[1]==="Donut"&&s&&D){f+=", length: "+(parseInt(D,10)+1)}else if(D){f+=", length: "+D}f+="}";return f}S.requiresIContext=true;function O(e,t,r){var a="";var i=r.split("/");if(i.length>1){for(var n=0;n<i.length-1;n++){var o=e.getODataAssociationEnd(t,i[n]);if(o){t=e.getODataEntityType(o.type);if(a){a=a+"/"}a=a+i[n]}else{return a}}}return a}function M(e,t,r){var a=[];var i=[];var n;var o=r.split("/");if(o.length>1){for(var s=0;s<o.length-1;s++){var l=e.getODataAssociationEnd(t,o[s]);if(l){t=e.getODataEntityType(l.type);if(t){i=t&&t.key&&t.key.propertyRef;for(var u=0;u<i.length;u++){n=o[s]+"/"+i[u].name;a.push(n)}}}}}return a}function L(e,t){var r=false;var a;if(e.DataPoint&&e.DataPoint.AnnotationPath){var i=t[e.DataPoint.AnnotationPath.substring(1)];if(i&&i.ForecastValue&&(i.ForecastValue.PropertyPath||i.ForecastValue.Path)){r=true;a=e}}if(r===true){return a}else{b.warning(I.CARD_WARNING+I.INVALID_FORECAST);return undefined}}function V(e,t){var r=false;var a;if(e.DataPoint&&e.DataPoint.AnnotationPath){var i=t[e.DataPoint.AnnotationPath.substring(1)];if(i&&i.TargetValue&&(i.TargetValue.PropertyPath||i.TargetValue.Path)){r=true;a=e}}if(r===true){return a}else{b.warning(I.CARD_WARNING+I.INVALID_TARGET);return undefined}}function Y(e,t){var r;g(t,function(t,a){if(a.name===e){if(a["com.sap.vocabularies.Common.v1.Label"]){r=a["com.sap.vocabularies.Common.v1.Label"].String?a["com.sap.vocabularies.Common.v1.Label"].String:a["com.sap.vocabularies.Common.v1.Label"].Path}else if(a["sap:label"]){r=a["sap:label"]}return false}});return r}function x(e,t){var r=true;if(t==="line"||t==="column"||t==="bar"){g(e,function(e,t){if(t.getUid()==="valueAxis"||t.getUid()==="categoryAxis"){if(t.getValues().length!=1){r=false;b.warning(I.CARD_WARNING+I.INVALID_DIMMEAS);return false}}})}else if(t==="vertical_bullet"){g(e,function(e,t){if(t.getUid()==="actualValues"||t.getUid()==="categoryAxis"){if(t.getValues().length!=1){r=false;b.warning(I.CARD_WARNING+I.INVALID_DIMMEAS);return false}}})}if(r===true){return true}}function F(e,t,r){var a=_.TYPE_KEY;if(!e||!e[t]||!e[t][a]){return r}var i=["Edm.Int","Edmt.Int16","Edm.Int32","Edm.Int64","Edm.Decimal"];var n=e[t][a];if((i?Array.prototype.indexOf.call(i,n):-1)!==-1){return Number(r)}return r}function U(e){if(e){return e}return""}function K(){var e={locale:function(){},format:function(e,t){var r="";if(t){r=t.split("/")}if(r.length>0){var n,o;if(r.length===3){n=Number(r[1]);o=Number(r[2]);if(isNaN(n)){n=-1}if(isNaN(o)){o=0}}else{n=2;o=0}if(r[0]==="ShortFloat_MFD2"){var l;l=a.getFloatInstance({style:"short",maxFractionDigits:2});return l.format(Number(e))}if(r[0]==="axisFormatter"||r[0]==="ShortFloat"){var l;l=a.getFloatInstance({style:"short",minFractionDigits:n,maxFractionDigits:n?n:1});if(r[0]==="ShortFloat"){l=a.getFloatInstance({style:"short",minFractionDigits:n,maxFractionDigits:n})}if(n===-1){l=a.getFloatInstance({style:"short"})}return l.format(Number(e))}else if(r[0]==="tooltipNoScaleFormatter"){var u=a.getFloatInstance({style:"short",currencyCode:false,shortRefNumber:o,showScale:false,minFractionDigits:n,maxFractionDigits:n});if(n===-1){u=a.getFloatInstance({minFractionDigits:0,currencyCode:false})}return u.format(Number(e))}else if(r[0]==="CURR"){var f=a.getCurrencyInstance({style:"short",currencyCode:false,minFractionDigits:n,maxFractionDigits:n});if(n===-1){f=a.getCurrencyInstance({style:"short",currencyCode:false})}return f.format(Number(e))}else if(r[0].search("%")!==-1){var c=a.getPercentInstance({style:"short",minFractionDigits:n,maxFractionDigits:n});if(n===-1){c=a.getPercentInstance({style:"short",minFractionDigits:1,maxFractionDigits:1})}e=c.format(Number(e));return e}}if(e.constructor===Date){var v=i.getDateTimeInstance({pattern:t});if(t==="YearMonthDay"){v=i.getDateInstance({style:"medium"})}if(t==="YearMonth"||t==="MMM"){v=i.getDateTimeInstance({format:"MMM"})}if(t==="YearQuarter"||t==="Quarter"){v=i.getDateTimeInstance({format:"QQQ"})}if(t==="YearWeek"||t==="Week"){v=i.getDateTimeInstance({format:"www"})}var p=s.getApp();var m=p&&p.bResetChartAxisFormatter;if(m&&t==="hh:mm"){var g=e.toLocaleTimeString();var A=g.split(":");e=A[0]+":"+A[1];return e}var d=m?false:true;e=v.format(new Date(e),d)}return e}};n.numericFormatter(e)}function B(e,t){var r=e.getModel();var a=e.getVizType();if(a!="line"&&a!="bubble"){return}if(!t){t=a==="line"?"categoryAxis":"valueAxis"}var i=e.getModel("ovpCardProperties").getProperty("/entitySet");if(!r||!i){return}var n=ve(r,i);var o=e.getFeeds();for(var s=0;s<o.length;s++){if(o[s].getUid()===t){var l=o[s].getValues();if(!l){return}for(var u=0;u<l.length;u++){if(n[l[u][_.TYPE_KEY]]!="Edm.DateTime"){return}}e.setVizProperties({categoryAxis:{title:{visible:false}}});var f=e&&e.getModel("ovpCardProperties");if(f&&f.getProperty("/bInsightEnabled")){var c=e&&e.getId();P.setVizPropertyMap(c,{categoryAxis:{title:{visible:false}}})}return}}}function w(e,t,r,a,i,n){a=typeof a==="undefined"?false:a;var o=false;var s;if(!e&&a){b.error(i+I.CARD_ERROR+r+I.IS_MANDATORY);return o}if(!e){b.warning(i+I.CARD_WARNING+r+I.IS_MISSING);o=true;return o}s=t[e];if(!s||typeof s!=="object"){var l=a?b.error:b.warning;l(i+I.CARD_ERROR+"in "+r+". ("+e+" "+I.NOT_WELL_FORMED);return o}if(n&&n==="sap.ovp.cards.charts.analytical.analyticalChart"&&r==="Chart Annotation"&&(!s.ChartType||!s.ChartType.EnumMember)){b.error(i+I.CARD_ERROR+I.MISSING_CHARTTYPE+I.CHART_ANNO);return o}o=true;return o}function k(e){var t=false;if(!e){return t}var r;var a;var i;var n;var o;var s;var l;var u="";var f;var c=e.getView();if(c){u="["+c.getId()+"] "}if(!(f=e.getCardPropertiesModel())){b.error(u+I.CARD_ERROR+"in "+I.CARD_CONFIG+I.NO_CARD_MODEL);return t}l=f.getProperty("/entityType");if(!l||h(l)){b.error(u+I.CARD_ERROR+"in "+I.CARD_ANNO);return t}r=f.getProperty("/selectionAnnotationPath");a=f.getProperty("/chartAnnotationPath");n=f.getProperty("/presentationAnnotationPath");o=f.getProperty("/identificationAnnotationPath");s=f.getProperty("/dataPointAnnotationPath");i=f.getProperty("/contentFragment");t=w(r,l,"Selection Variant",false,u);t=w(a,l,"Chart Annotation",true,u,i)&&t;t=w(n,l,"Presentation Variant",false,u)&&t;t=w(o,l,"Identification Annotation",true,u)&&t;t=w(s,l,"Data Point",false,u)&&t;return t}function z(e,t,r){}function H(t){return e.getConfig(t)}function G(e,t,r,a){var i=false;var n;var o;var s;var l;var u;var f;if(!t.time||h(t.time)){return i}if(!e){return i}for(var c=0;c<e.length;c++){if(!e[c].Dimension||!(o=e[c].Dimension.PropertyPath)){return i}n=ve(r,a);if(n&&n[o]){s=n[o][_.TYPE_KEY];l=n[o][_.DISPLAY_FORMAT_KEY];u=n[o][_.SEMANTICS_KEY];f=n[o]["com.sap.vocabularies.Common.v1.IsCalendarYear"]||n[o]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]||n[o]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]||n[o]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]}if(s&&s.lastIndexOf("Edm.Date",0)===0){if(s.toLowerCase()==="edm.datetime"){if(l&&l.toLowerCase()==="date"){i=true}}else{i=true}}if(s==="Edm.String"&&(f||u&&T.indexOf(u)>-1)){i=true}if(i){e.unshift(e.splice(c,1)[0]);break}}return i}function j(e,t,r){var a="";var i=H(t);var n,o;if(!i){return a}a=i.default.type;n=e.getSetting("dataModel");o=e.getSetting("ovpCardProperties").getProperty("/entitySet");if(G(r,i,n,o)){a=i.time.type}return a}j.requiresIContext=true;function W(e,t,r){if(!e.length){return}var a=r==="dimension"?"Dimension":"Measure";var i=[];g(e,function(e,t){if(!t||!t[a]||!t[a].PropertyPath){b.error(I.INVALID_CHART_ANNO);return false}i.push(t[a].PropertyPath)});var n=jQuery.map(t.feeds,function(e){if(e.type===r){if(e.role){return e.role.split("|")}return[]}});n=jQuery.grep(n,function(e,t){return(n?Array.prototype.indexOf.call(n,e):-1)===t}).join(", ");b.error(I.CARD_ERROR+I.INVALID_REDUNDANT+r+"(s) "+i.join(", ")+". "+I.ALLOWED_ROLES+t.type+I.CHART_IS+n)}function X(e,t){var r;if(e){if(e.String){r=e.String}else if(e.Boolean||e.Bool){r=q(e)}else{r=Q(e,t)}}return r}function q(e,t){if(e&&e.Boolean){if(e.Boolean.toLowerCase()==="true"){return true}else if(e.Boolean.toLowerCase()==="false"){return false}}else if(e&&e.Bool){if(e.Bool.toLowerCase()==="true"){return true}else if(e.Bool.toLowerCase()==="false"){return false}}return t}function Q(e,t){var r;if(e){if(e.String){r=Number(e.String)}else if(e.Int){r=Number(e.Int)}else if(e.Decimal){r=Number(e.Decimal)}else if(e.Double){r=Number(e.Double)}else if(e.Single){r=Number(e.Single)}}if(t){var i=a.getFloatInstance({style:"short",minFractionDigits:2,maxFractionDigits:2});if(r){r=i.format(Number(r))}}return r}function Z(e,t){function a(e){if(e){if(e.Path){return"{path:'"+e.Path+"'}"}else{return X(e)}}else{return""}}var i=e[e.measureNames];if(t&&t.CriticalityCalculation&&t.CriticalityCalculation.ImprovementDirection){var n=t.CriticalityCalculation.ImprovementDirection.EnumMember;var o=a(t.CriticalityCalculation.DeviationRangeLowValue);var s=a(t.CriticalityCalculation.DeviationRangeHighValue);var l=a(t.CriticalityCalculation.ToleranceRangeLowValue);var u=a(t.CriticalityCalculation.ToleranceRangeHighValue);return r._calculateCriticalityState(i,n,o,s,l,u,C.Criticality.StateValues)}else{var f=t.Criticality.EnumMember;var c=f?f.split("/"):[];if(c){return c[1]}}}function J(e,t,r){var a,i;g(t,function(t,r){if(r["com.sap.vocabularies.Common.v1.Label"]&&r["com.sap.vocabularies.Common.v1.Label"].String===e.measureNames){a=r.name;return false}else if(r["com.sap.vocabularies.Common.v1.Label"]&&r["com.sap.vocabularies.Common.v1.Label"].Path===e.measureNames){a=r.name;return false}else if(r["sap:label"]===e.measureNames){a=r.name;return false}});g(r,function(e,t){if(t.Measure.PropertyPath===a){if(!t.DataPoint||!t.DataPoint.AnnotationPath){return false}i=t.DataPoint.AnnotationPath;return false}});return i}function $(e,t){if(e){if(e.Path){return e.Path}else{return X(e,t)}}else{return""}}function ee(e,t){function r(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}var a=false;g(e,function(e,i){if(i.DataPoint&&i.DataPoint.AnnotationPath){var n=t[i.DataPoint.AnnotationPath.substring(1)];if(n&&n.CriticalityCalculation&&n.CriticalityCalculation.ImprovementDirection&&n.CriticalityCalculation.ImprovementDirection.EnumMember){var o=n.CriticalityCalculation.ImprovementDirection.EnumMember;var s=$(n.CriticalityCalculation.DeviationRangeLowValue);var l=$(n.CriticalityCalculation.DeviationRangeHighValue);var u=$(n.CriticalityCalculation.ToleranceRangeLowValue);var f=$(n.CriticalityCalculation.ToleranceRangeHighValue);if(r(o,"Minimize")||r(o,"Minimizing")){if(f&&l){a=true;return false}else{b.warning(I.CARD_WARNING+I.INVALID_CRITICALITY)}}else if(r(o,"Maximize")||r(o,"Maximizing")){if(u&&s){a=true;return false}else{b.warning(I.CARD_WARNING+I.INVALID_CRITICALITY)}}else if(r(o,"Target")){if(u&&s&&f&&l){a=true;return false}else{b.warning(I.CARD_WARNING+I.INVALID_CRITICALITY)}}}else if(n&&n.Criticality){a=true;return false}else{b.warning(I.CARD_WARNING+I.INVALID_IMPROVEMENT_DIR)}}});if(a===true&&e.length>1){b.warning(I.CARD_WARNING+I.INVALID_SEMANTIC_MEASURES)}return a}function te(e,t,r,a){function i(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}var n=[null,null];var o=true;var s=e.Measure.PropertyPath;if(r[s]){if(r[s][_.LABEL_KEY_V4]){s=ce(r[s][_.LABEL_KEY_V4].String?r[s][_.LABEL_KEY_V4].String:r[s][_.LABEL_KEY_V4].Path,a,r)}else if(r[s][_.LABEL_KEY]){s=r[s][_.LABEL_KEY]}else if(s){s=s}}var l=e.DataPoint.AnnotationPath;var u=t[l.substring(1)];if(!u.CriticalityCalculation||!u.CriticalityCalculation.ImprovementDirection||!u.CriticalityCalculation.ImprovementDirection.EnumMember){return n}var f=u.CriticalityCalculation.ImprovementDirection.EnumMember;var c=$(u.CriticalityCalculation.DeviationRangeLowValue,o);var v=$(u.CriticalityCalculation.DeviationRangeHighValue,o);var m=$(u.CriticalityCalculation.ToleranceRangeLowValue,o);var g=$(u.CriticalityCalculation.ToleranceRangeHighValue,o);if(i(f,"Minimize")||i(f,"Minimizing")){if(g&&v){n[0]=p.getText("MINIMIZING_LESS",[s,g]);n[1]=p.getText("MINIMIZING_MORE",[s,v]);n[2]=p.getText("MINIMIZING_CRITICAL",[g,s,v])}}else if(i(f,"Maximize")||i(f,"Maximizing")){if(m&&c){n[0]=p.getText("MAXIMISING_MORE",[s,m]);n[1]=p.getText("MAXIMISING_LESS",[s,c]);n[2]=p.getText("MAXIMIZING_CRITICAL",[c,s,m])}}else if(i(f,"Target")){if(m&&c&&g&&v){n[0]=p.getText("TARGET_BETWEEN",[m,s,g]);n[1]=p.getText("TARGET_AROUND",[s,c,v]);n[2]=p.getText("TARGET_CRITICAL",[c,s,m,g,v])}}return n}function re(e,t,r){if(t&&t.DataPoint&&t.DataPoint.AnnotationPath){var a=r[t.DataPoint.AnnotationPath.substring(1)];var i,n;if(a&&a.ValueFormat){i=a.ValueFormat}else if(a&&a.NumberFormat){i=a.NumberFormat}if(i&&i.NumberOfFractionalDigits&&i.NumberOfFractionalDigits.Int){n=i.NumberOfFractionalDigits.Int;if(e<Number(n)){e=Number(n)}}}return e}function ae(e,t,r){if(t&&t.DataPoint&&t.DataPoint.AnnotationPath){var a=r[t.DataPoint.AnnotationPath.substring(1)];var i,n;if(a&&a.ValueFormat){i=a.ValueFormat}else if(a&&a.NumberFormat){i=a.NumberFormat}if(i){if(i.ScaleFactor&&i.ScaleFactor.Decimal){n=Number(i.ScaleFactor.Decimal)}else if(i.ScaleFactor&&i.ScaleFactor.Int){n=Number(i.ScaleFactor.Int)}if(!isNaN(n)){if(e===undefined){e=Number(n)}else if(e>Number(n)){e=Number(n)}}}}return e}function ie(e,t){if(e&&e[t]&&(e[t]["Org.OData.Measures.V1.ISOCurrency"]||e[t][_.SEMANTICS_KEY]&&e[t][_.SEMANTICS_KEY]===_.CURRENCY_CODE)){return true}return false}function ne(e,t,r){if(e[t[r].PropertyPath][_.EDM_TYPE]===_.EDM_INT32){return true}return false}function oe(e,t,r){if(e[t[r].PropertyPath][_.EDM_TYPE]===_.EDM_INT64){return true}return false}function se(e,t,r){var a,i,n,s,v;var m,d,h,E,y,T=false;var S;var O,M,F;var U,K=[],B=[];var w;var k;var z=r&&r.getView();var j,X;var q=z&&z.getModel("ui");var Q=q&&q.getProperty("/chartSettings");a=e.getModel("ovpCardProperties");if(l.checkIfAPIIsUsed(r)){T=a&&a.getData()&&a.getData().showDataLabel}v=Q?Q.showDataLabel:T;m=e.getVizType();d=H();for(var $ in d){if((k=d[$].reference)&&d[k]){var se=A({},d[k]);d[$]=se}if(d[$].default.type===m||d[$].time&&d[$].time.type===m){h=d[$];break}}if(!h){b.error(I.CARD_ERROR+"in "+I.CARD_CONFIG+I.CARD_CONFIG_ERROR+m+" "+I.CARD_CONFIG_JSON);return}if(!a){b.error(I.CARD_ERROR+"in "+I.CARD_CONFIG+I.NO_CARD_MODEL);return}var fe=e.getModel();var ge=a.getProperty("/entitySet");if(!fe||!ge){return}i=a.getProperty("/entityType");if(!i){b.error(I.CARD_ANNO_ERROR+"in "+I.CARD_ANNO);return}var Ae=ve(fe,ge);n=a.getProperty("/chartAnnotationPath");if(!n||!(s=i[n])){b.error(I.CARD_ANNO_ERROR+"in "+I.CARD_ANNO);return}var de=le(i,n,e);if(!(E=s.DimensionAttributes)||!E.length){b.error(I.CHART_ANNO_ERROR+"in "+I.CHART_ANNO+" "+I.DIMENSIONS_MANDATORY);return}var he;if(!(y=s.MeasureAttributes)||!y.length){b.error(I.CHART_ANNO_ERROR+"in "+I.CHART_ANNO+" "+I.MEASURES_MANDATORY);return}else{var Pe=y[0].DataPoint?i[y[0].DataPoint.AnnotationPath.substring(1)]:null;var Ee=Pe&&Pe.ValueFormat&&Pe.ValueFormat.NumberOfFractionalDigits&&Pe.ValueFormat.NumberOfFractionalDigits.Int;he=Ee?Ee:0}w=G(E,h,fe,ge);if(w){h=h.time}else{h=h.default}var Ce=a.getProperty("/ChartProperties")||a.getProperty("/chartProperties");if(a&&a.getProperty("/tabs")&&Ce===undefined){j=z.byId("ovp_card_dropdown");X=parseInt(j.getSelectedKey(),10);Ce=a.getProperty("/tabs")&&a.getProperty("/tabs")[X-1]&&(a.getProperty("/tabs")[X-1]["ChartProperties"]||a.getProperty("/tabs")[X-1]["chartProperties"])}var ye=false;var _e=he>0?"tooltipNoScaleFormatter/"+he.toString()+"/":"tooltipNoScaleFormatter/-1/";var Re=new o({formatString:_e});Re.connect(e.getVizUid());Re.connect(e.getVizUid());e._oOvpVizFrameTooltip=Re;[h.dimensions,h.measures].forEach(function(e,t){var r=t?y:E;var a=t?"measure(s)":"dimension(s)";if(e.min&&r.length<e.min){b.error(I.CARD_ERROR+"in "+m+" "+I.CARD_LEAST+e.min+" "+a);ye=true}if(e.max&&r.length>e.max){b.error(I.CARD_ERROR+"in "+m+I.CARD_MOST+e.max+" "+a);ye=true}});if(ye){return}var De=true;if(h.properties&&h.properties.hasOwnProperty("hideLabel")&&!h.properties["hideLabel"]){De=false}var be=true;var Se=false;if(m==="donut"){Se=true}e.removeAllAggregation();S={legend:{isScrollable:false},title:{visible:true},interaction:{noninteractiveMode:be?false:true,selectability:{legendSelection:Se?true:false,axisLabelSelection:false,mode:"EXCLUSIVE",plotLassoSelection:false,plotStdSelection:true},zoom:{enablement:"disabled"}},plotArea:{window:{start:"firstDataPoint",end:"lastDataPoint"},dataLabel:{visible:v||Se?true:false,type:"value"},dataPoint:{invalidity:"ignore"},alignment:{vertical:"top"}},categoryAxis:{label:{truncatedLabelRatio:.15}},general:{groupData:false,showAsUTC:true}};if(h.properties&&h.properties.semanticColor===true&&ee(y,i)){var Oe=p.getText("GOOD");var Me=p.getText("BAD");var Le=p.getText("CRITICAL");var Ve=p.getText("OTHERS");if(y.length===1){var Ye=te(y[0],i,Ae,e);var Oe=Ye[0]||Oe,Me=Ye[1]||Me,Le=Ye[2]||Le,Ve=p.getText("OTHERS")}S.plotArea.dataPointStyle={rules:[{callback:function(e){var t=J(e,Ae,y);if(!t){return false}var r=i[t.substring(1)];var a=Z(e,r);if(a===C.Criticality.StateValues.Positive){return true}else if(a==="Positive"){return true}},properties:{color:"sapUiChartPaletteSemanticGoodLight1"},displayName:Oe},{callback:function(e){var t=J(e,Ae,y);if(!t){return false}var r=i[t.substring(1)];var a=Z(e,r);if(a===C.Criticality.StateValues.Critical){return true}else if(a==="Critical"){return true}},properties:{color:"sapUiChartPaletteSemanticCriticalLight1"},displayName:Le},{callback:function(e){var t=J(e,Ae,y);if(!t){return false}var r=i[t.substring(1)];var a=Z(e,r);if(a===C.Criticality.StateValues.Negative){return true}else if(a==="Negative"){return true}},properties:{color:"sapUiChartPaletteSemanticBadLight1"},displayName:Me},{callback:function(e){var t=J(e,Ae,y);if(!t){return false}var r=i[t.substring(1)];var a=Z(e,r);if(a===C.Criticality.StateValues.None){return true}else if(a==="Neutral"){return true}},properties:{color:"sapUiChartPaletteSemanticNeutralLight1"},displayName:Ve}]}}var xe=a.getProperty("/bEnableStableColors");var Fe=a.getProperty("/colorPalette");var Ue;if(!xe&&N.indexOf(s.ChartType.EnumMember)>=0&&Fe&&Object.keys(Fe).length>=2&&Object.keys(Fe).length<=4){g(E,function(e,t){if(t&&t.Role&&t.Role.EnumMember==="com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series"){Ue=t.Dimension&&t.Dimension.PropertyPath;return}});var Ke;if(Ue){if(Ae&&Ae[Ue]){if(Ae[Ue][_.LABEL_KEY_V4]){Ke=ce(Ae[Ue][_.LABEL_KEY_V4].String?Ae[Ue][_.LABEL_KEY_V4].String:Ae[Ue][_.LABEL_KEY_V4].Path,e,Ae)}else if(Ae[Ue][_.LABEL_KEY]){Ke=Ae[Ue][_.LABEL_KEY]}else if(Ue){Ke=Ue}}if(Fe instanceof Array){var Be=Fe.map(function(e){return e.color});var we=Fe.map(function(e){return e.legendText});var ke=we[0]!=undefined?we[0]:p.getText("OTHERS");var ze=we[1]!=undefined?we[1]:p.getText("BAD");var He=we[2]!=undefined?we[2]:p.getText("CRITICAL");var Ge=we[3]!=undefined?we[3]:p.getText("GOOD")}S.plotArea.dataPointStyle={rules:[{callback:function(e){if(e&&(e[Ke]==="3"||e[Ke]===3)){if(Fe instanceof Array){if(Fe.length<4){return false}}else if(Fe&&!Fe.hasOwnProperty(3)){return false}return true}},properties:{color:Fe instanceof Array&&Be.length?Be[3]:Fe[3]&&Fe[3]["color"]},displayName:Ge||Fe[3]&&Fe[3]["legendText"]},{callback:function(e){if(e&&(e[Ke]==="2"||e[Ke]===2)){if(Fe instanceof Array){if(Fe.length<3){return false}}else if(Fe&&!Fe.hasOwnProperty(2)){return false}return true}},properties:{color:Fe instanceof Array&&Be.length?Be[2]:Fe[2]&&Fe[2]["color"]},displayName:He||Fe[2]&&Fe[2]["legendText"]},{callback:function(e){if(e&&(e[Ke]==="1"||e[Ke]===1)){return true}},properties:{color:Fe instanceof Array&&Be.length?Be[1]:Fe[1]&&Fe[1]["color"]},displayName:ze||Fe[1]&&Fe[1]["legendText"]},{callback:function(e){if(e&&(e[Ke]==="0"||e[Ke]===0)){return true}},properties:{color:Fe instanceof Array&&Be.length?Be[0]:Fe[0]&&Fe[0]["color"]},displayName:ke||Fe[0]&&Fe[0]["legendText"]}]};var je;if(a&&a.getProperty("/bInsightEnabled")){je=A({},S.plotArea.dataPointStyle);var We=Ae&&Ae[Ue]&&Ae[Ue].type||"";je.rules.forEach(function(e,t,r){delete e["callback"];e.dataContext={};if(We){e.dataContext[Ke]=We==="Edm.String"?r.length-1-t+"":r.length-1-t}else{e.dataContext[Ke]=r.length-1-t+""}})}}}var Xe=false;var qe=false;if(s.ChartType.EnumMember===_.SCATTER_CHARTTYPE||s.ChartType.EnumMember===_.BUBBLE_CHARTTYPE||s.ChartType.EnumMember===_.LINE_CHARTTYPE){if(s&&s.AxisScaling&&s.AxisScaling.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"){var Qe=s.AxisScaling;if(Qe.AutoScaleBehavior&&Qe.AutoScaleBehavior.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisAutoScaleBehaviorType"){var Ze=Qe.AutoScaleBehavior;if(Ze.ZeroAlwaysVisible&&Ze.ZeroAlwaysVisible.Bool=="true"){S.plotArea.adjustScale=false;Xe=true}else if(Ze.DataScope){S.plotArea.adjustScale=true;Xe=true}}else if(Qe.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"&&Qe.ScaleBehavior&&Qe.ScaleBehavior.EnumMember){var Je=Qe.ScaleBehavior.EnumMember;var $e=Je.substring(Je.lastIndexOf("/")+1,Je.length);if($e=="FixedScale"){qe=true}}}else if(s&&s.AxisScaling&&s.AxisScaling.EnumMember){var et=s.AxisScaling.EnumMember.substring(s.AxisScaling.EnumMember.lastIndexOf("/")+1,s.AxisScaling.EnumMember.length);switch(et){case"AdjustToDataIncluding0":S.plotArea.adjustScale=false;Xe=true;break;case"AdjustToData":S.plotArea.adjustScale=true;Xe=true;break;case"MinMaxValues":qe=true;break;default:break}}if(qe){var tt=[];if(s["MeasureAttributes"][0]&&s["MeasureAttributes"][0].DataPoint&&s["MeasureAttributes"][0].DataPoint.AnnotationPath){var rt=s["MeasureAttributes"][0].DataPoint.AnnotationPath;var at=rt.substring(rt.lastIndexOf("@")+1,rt.length);if(i&&i[at]){var it=i[at];if(it&&it.MaximumValue&&it.MaximumValue.Decimal&&it.MinimumValue&&it.MinimumValue.Decimal){tt.push({feed:"valueAxis",max:it.MaximumValue.Decimal,min:it.MinimumValue.Decimal});Xe=true}else{b.error(I.ERROR_MISSING_AXISSCALES)}}}if(s.ChartType.EnumMember!==_.LINE_CHARTTYPE&&s["MeasureAttributes"][1]&&s["MeasureAttributes"][1].DataPoint&&s["MeasureAttributes"][1].DataPoint.AnnotationPath){var rt=s["MeasureAttributes"][1].DataPoint.AnnotationPath;var at=rt.substring(rt.lastIndexOf("@")+1,rt.length);if(i&&i[at]){var it=i[at];if(it&&it.MaximumValue&&it.MaximumValue.Decimal&&it.MinimumValue&&it.MinimumValue.Decimal){tt.push({feed:"valueAxis2",max:it.MaximumValue.Decimal,min:it.MinimumValue.Decimal});Xe=true}else{b.error(I.ERROR_MISSING_AXISSCALES)}}}e.setVizScales(tt)}}M=E.slice();F=y.slice();var nt=0;var ot=0;var st;var lt;var ut=false;var ft=false;var ct;var vt=[];var pt=[],mt=[];if((m==="column"||m==="bar"||m==="vertical_bullet")&&h.feeds&&h.feeds.length>0){var gt;for(gt=0;gt<h.feeds.length;gt++){if(h.feeds[gt].uid==="color"){h.feeds.splice(gt,1);break}}for(gt=0;gt<h.feeds.length;gt++){if(h.feeds[gt].uid==="categoryAxis"){delete h.feeds[gt].role;break}}if(a.getProperty("/colorPalette")){for(gt=0;gt<h.feeds.length;gt++){if(h.feeds[gt].uid==="categoryAxis"){h.feeds[gt].role="Category";break}}h.feeds.push({uid:"color",min:1,type:"dimension",role:"Series"})}}g(h.feeds,function(t,r){var n=r.uid;var o=[];if(r.type){var s,l,v;if(r.type==="dimension"){s=E.length;l="Dimension";v="dimensions";O=M;U=K}else{s=y.length;l="Measure";v="measures";O=F;U=B}var p=0,A=s;if(r.min){p=p>r.min?p:r.min}if(r.max){A=A<r.max?A:r.max}if(!r.role){var d=O.length;for(var C=0;C<d&&o.length<A;++C){var T=O[C];O.splice(C,1);--d;--C;o.push(T);if(Ae[T[l].PropertyPath][_.UNIT_KEY_V4_ISOCurrency]){ct=Ae[T[l].PropertyPath][_.UNIT_KEY_V4_ISOCurrency].Path?Ae[T[l].PropertyPath][_.UNIT_KEY_V4_ISOCurrency].Path:undefined}else if(Ae[T[l].PropertyPath][_.UNIT_KEY_V4_Unit]){ct=Ae[T[l].PropertyPath][_.UNIT_KEY_V4_Unit].Path?Ae[T[l].PropertyPath][_.UNIT_KEY_V4_Unit].Path:undefined}else if(Ae[T[l].PropertyPath][_.UNIT_KEY]){ct=Ae[T[l].PropertyPath][_.UNIT_KEY]}if(ie(Ae,ct)){ut=true}else{ft=true}if(!ut){nt=re(nt,T,i);st=ae(st,T,i)}else{ot=re(ot,T,i);lt=ae(lt,T,i)}}}else{var N=r.role.split("|");g(N,function(e,t){if(o.length===A){return false}var r=O.length;for(var a=0;a<r&&o.length<A;++a){var n=O[a];if(n&&n.Role&&n.Role.EnumMember&&n.Role.EnumMember.split("/")&&n.Role.EnumMember.split("/")[1]){var s=n.Role.EnumMember.split("/")[1];if(s===t){O.splice(a,1);--r;--a;o.push(n);if(Ae[n[l].PropertyPath][_.UNIT_KEY_V4_ISOCurrency]){ct=Ae[n[l].PropertyPath][_.UNIT_KEY_V4_ISOCurrency].Path?Ae[n[l].PropertyPath][_.UNIT_KEY_V4_ISOCurrency].Path:undefined}else if(Ae[n[l].PropertyPath][_.UNIT_KEY_V4_Unit]){ct=Ae[n[l].PropertyPath][_.UNIT_KEY_V4_Unit].Path?Ae[n[l].PropertyPath][_.UNIT_KEY_V4_Unit].Path:undefined}else if(Ae[n[l].PropertyPath][_.UNIT_KEY]){ct=Ae[n[l].PropertyPath][_.UNIT_KEY]}if(ie(Ae,ct)){ut=true}else{ft=true}if(!ut){nt=re(nt,n,i);st=ae(st,n,i)}else{ot=re(ot,n,i);lt=ae(lt,n,i)}}}else if((U?Array.prototype.indexOf.call(U,n):-1)===-1){U.push(n)}}});if(o.length<A){g(U,function(e,t){var r;var a;if((r=h[v].defaultRole)&&(N?Array.prototype.indexOf.call(N,r):-1)!==-1&&(a=(O?Array.prototype.indexOf.call(O,t):-1)!==-1)){O.splice(a,1);o.push(t);if(Ae[t[l].PropertyPath][_.UNIT_KEY_V4_ISOCurrency]){ct=Ae[t[l].PropertyPath][_.UNIT_KEY_V4_ISOCurrency].Path?Ae[t[l].PropertyPath][_.UNIT_KEY_V4_ISOCurrency].Path:undefined}else if(Ae[t[l].PropertyPath][_.UNIT_KEY_V4_Unit]){ct=Ae[t[l].PropertyPath][_.UNIT_KEY_V4_Unit].Path?Ae[t[l].PropertyPath][_.UNIT_KEY_V4_Unit].Path:undefined}else if(Ae[t[l].PropertyPath][_.UNIT_KEY]){ct=Ae[t[l].PropertyPath][_.UNIT_KEY]}if(ie(Ae,ct)){ut=true}else{ft=true}if(!ut){nt=re(nt,t,i);st=ae(st,t,i)}else{ot=re(ot,t,i);lt=ae(lt,t,i)}if(o.length===A){return false}}})}if(o.length<p){b.error(I.CARD_ERROR+I.MIN_FEEDS+m+" "+I.FEEDS_OBTAINED+o.length+" "+I.FEEDS_REQUIRED+p+" "+I.FEEDS);return false}}if(o.length){var R=[];var L;if(!(L=e.getDataset())){b.error(I.NO_DATASET);return false}D=i;g(o,function(t,r){if(!r||!r[l]||!r[l].PropertyPath){b.error(I.INVALID_CHART_ANNO);return false}var i=r[l].PropertyPath;var o=i;var s=i;var c=null;if(Ae&&Ae[i]){if(Ae[i][_.LABEL_KEY_V4]){if(Ae[i][_.LABEL_KEY_V4].String){o=ce(Ae[i][_.LABEL_KEY_V4].String,e,Ae)}else if(Ae[i][_.LABEL_KEY_V4].Path){o=Ae[i][_.LABEL_KEY_V4].Path}else{o=i}}else if(Ae[i][_.LABEL_KEY]){o=Ae[i][_.LABEL_KEY]}else if(i){o=i}if(Ae[i][_.TEXT_KEY_V4]){s=Ae[i][_.TEXT_KEY_V4].String?Ae[i][_.TEXT_KEY_V4].String:Ae[i][_.TEXT_KEY_V4].Path}else if(Ae[i][_.TEXT_KEY]){s=Ae[i][_.TEXT_KEY]}else if(i){s=i}c=Ae[i][_.TYPE_KEY]||null}var v,p={};p[i]=s;if((c==="Edm.DateTime"||c==="Edm.DateTimeOffset")&&s===i){v="{path:'"+i+"', formatter: 'sap.ovp.cards.charts.VizAnnotationManager.returnDateFormat'}"}else{if(Ae[i]&&Ae[i][_.TEXT_KEY_V4]&&Ae[i][_.TEXT_KEY_V4][_.TEXT_ARRANGEMENT_ANNO]){var m,g;m=Ae[i][_.TEXT_ARRANGEMENT_ANNO];g=m&&m.EnumMember;if(!g){m=Ae[i][_.TEXT_KEY_V4][_.TEXT_ARRANGEMENT_ANNO];g=m&&m.EnumMember}if(!g){var A=D;m=A&&A[_.TEXT_ARRANGEMENT_ANNO];g=m&&m.EnumMember}switch(g){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":v="{"+s+"}"+" "+"("+"{"+i+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":v="{"+i+"}"+" "+"("+"{"+s+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":v="{"+s+"}";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeperate":v="{"+i+"}"+" "+"("+"{"+s+"}"+")";break;default:v="{"+i+"}";p[i]=i;break}}else{v="{"+s+"}"}if(a&&a.getProperty("/bInsightEnabled")){P.setDimensionPath(a.getData().cardId,i,v)}}R.push(o);if(l==="Dimension"){if(n==="waterfallType"){var d=new u({name:o,value:"{"+i+"}"})}else{var d=new u({name:o,value:"{"+i+"}",displayValue:v})}var h=Ae[i][_.SEMANTICS_KEY];var E=Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYear"]&&Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYear"].Bool||Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]&&Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"].Bool||Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]&&Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"].Bool||Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]&&Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"].Bool;if(w&&(c==="Edm.DateTime"||E||c==="Edm.DateTimeOffset"||h&&h.lastIndexOf("year",0)===0)){d.setDataType("date")}L.addDimension(d);if((mt?Array.prototype.indexOf.call(mt,o):-1)===-1){mt.push(o)}}else{L.addMeasure(new f({name:o,value:"{"+i+"}"}));if((pt?Array.prototype.indexOf.call(pt,o):-1)===-1&&n!="bubbleWidth"){pt.push(o)}}});e.addFeed(new c({uid:n,type:l,values:R}));if(n==="categoryAxis"){S[n]={title:{visible:De?false:true,text:R.join(", ")},label:{formatString:ut?"CURR":"axisFormatter",truncatedLabelRatio:.15}}}else{S[n]={title:{visible:De?false:true,text:R.join(", ")},label:{formatString:ut?"CURR":"axisFormatter"}}}vt.push(S[n]);if(h.hasOwnProperty("vizProperties")){var V=0;var Y=h.vizProperties.length;var x;var k;for(;V<Y;V++){if(h.vizProperties[V].hasOwnProperty("value")){k=h.vizProperties[V].value}if(h.vizProperties[V].hasOwnProperty("path")){x=h.vizProperties[V].path.split(".");var z=x.length;var H,G;var j;for(var W=0,j=x[0],H=S,G=Ce;W<z;++W){if(W===z-1){if(G&&G.hasOwnProperty(j)){if(m==="donut"&&(G[j]==="value"||G[j]==="percentage")){k=G[j]}else if(m!="donut"){k=G[j]}}if(Xe&&j!="adjustScale"||!Xe&&j==="adjustScale"||!Xe&&j!="adjustScale"){H[j]=k}break}H[j]=H[j]||{};H=H[j];if(G){G[j]=G[j]||{};G=G[j]}j=x[W+1]}}}}if(r.hasOwnProperty("vizProperties")){var t=0;var X=r.vizProperties.length;var q;var Q;var Z;for(;t<X;t++){if(r.vizProperties[t].hasOwnProperty("method")){Q=r.vizProperties[t].method;switch(Q){case"count":q=R.length;if(r.vizProperties[t].hasOwnProperty("min")&&q<=r.vizProperties[t].min){q=r.vizProperties[t].min}else if(r.vizProperties[t].hasOwnProperty("max")&&q>=r.vizProperties[t].max){q=r.vizProperties[t].max}break;default:break}}else if(r.vizProperties[t].hasOwnProperty("value")){q=r.vizProperties[t].value}if(r.vizProperties[t].hasOwnProperty("path")){Z=r.vizProperties[t].path.split(".");var J=Z.length;for(var C=0,$=Z[0],ee=S;C<J;++C){if(C===J-1){ee[$]=q;break}ee[$]=ee[$]||{};ee=ee[$];$=Z[C+1]}}}}}}});var At=e.getFeeds();if(h.properties&&h.properties.semanticPattern===true&&x(At,m)){g(At,function(t,r){if(At[t].getType()==="Measure"&&(At[t].getUid()==="valueAxis"||At[t].getUid()==="actualValues")){var a;g(y,function(e,r){var n=Y(r.Measure.PropertyPath,Ae);if(n===At[t].getValues()[0]){a=L(r,i);return false}});if(a){var n=Y(a.Measure.PropertyPath,Ae);var o=i[a.DataPoint.AnnotationPath.substring(1)].ForecastValue.PropertyPath||i[a.DataPoint.AnnotationPath.substring(1)].ForecastValue.Path;var s=Y(o,Ae);var l=p.getText("ACTUAL",[n]);var u=p.getText("FORECAST",[s]);S.plotArea.dataPointStyle={rules:[{dataContext:{MeasureNamesDimension:n},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"line",lineColor:"sapUiChartPaletteSequentialHue1Light1"},displayName:l},{dataContext:{MeasureNamesDimension:s},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"dotted",lineColor:"sapUiChartPaletteSequentialHue1Light1",pattern:"diagonalLightStripe"},displayName:u}]};e.getDataset().addMeasure(new f({name:s,value:"{"+o+"}"}));var c=At[t].getValues();c.push(s);At[t].setValues(c)}return false}})}var dt=false;if(Fe&&Fe.dimensionSettings&&Object.keys(Fe.dimensionSettings).length>0){var ht=Object.keys(Fe.dimensionSettings);for(var Pt=0;Pt<ht.length;Pt++){var Et=ht[Pt];var Ct=Fe.dimensionSettings[Et];if(Object.keys(Ct).length>10){dt=true;break}}}if(xe&&R.indexOf(s.ChartType.EnumMember)>=0&&!dt){var yt=[];var _t=true;for(var Pt=0;Pt<E.length;Pt++){var It=E[Pt].Dimension.PropertyPath;yt.push(It)}for(var Pt=0;Pt<yt.length;Pt++){var Et=yt[Pt];if(ht.indexOf(Et)>-1){var Tt=Fe.dimensionSettings[Et];var Nt=Object.keys(Tt);var Rt=[];for(var Pt=0;Pt<Nt.length;Pt++){var Dt=Tt[Nt[Pt]];Rt.push(Dt)}_t=_t&&Rt.every(Te)}}if(_t){var bt=[];for(var Pt=0;Pt<yt.length;Pt++){var Et=yt[Pt];if(ht.indexOf(Et)>-1){var Tt=Fe.dimensionSettings[Et];var Nt=Object.keys(Tt);var Rt=[];for(var Pt=0;Pt<Nt.length;Pt++){var Dt=Tt[Nt[Pt]];Rt.push(Dt)}Ie(Rt);for(var St=0;St<Rt.length;St++){var Ot=Rt[St].dimensionValue;var Mt=Rt[St].color;var Dt={properties:{color:Mt}};Dt.dataContext={};var Lt=ue(Ae,e,Et);Dt.dataContext[Lt]=Ot;Dt.displayName=Ot;bt.push(Dt)}}}S.plotArea.dataPointStyle=S.plotArea.dataPointStyle||{};S.plotArea.dataPointStyle["rules"]=bt}else{var bt=[];for(var Pt=0;Pt<yt.length;Pt++){var Et=yt[Pt];if(ht.indexOf(Et)>-1){var Tt=Fe.dimensionSettings[Et];var Nt=Object.keys(Tt);var Rt=[];for(var Pt=0;Pt<Nt.length;Pt++){var Dt=Tt[Nt[Pt]];Rt.push(Dt)}Ie(Rt);var Vt=Rt.map(Ne)}}S.legend.order=function(e,t){var r=Vt.indexOf(e);var a=Vt.indexOf(t);return r>a?1:-1}}}if(h.properties&&h.properties.semanticPattern===true&&x(At,m)&&e.getVizType()==="vertical_bullet"){g(At,function(t,r){if(At[t].getType()==="Measure"&&(At[t].getUid()==="valueAxis"||At[t].getUid()==="actualValues")){var a;g(y,function(e,r){var n=Y(r.Measure.PropertyPath,Ae);if(n===At[t].getValues()[0]){a=V(r,i);return false}});if(a){var n=i[a.DataPoint.AnnotationPath.substring(1)].TargetValue.PropertyPath||i[a.DataPoint.AnnotationPath.substring(1)].TargetValue.Path;var o=Y(n,Ae);e.getDataset().addMeasure(new f({name:o,value:"{"+n+"}"}));e.addFeed(new c({uid:"targetValues",type:"Measure",values:[o]}))}return false}})}if(ut&&ft){b.warning(p.getText("Currency_non_currency_measure"))}g(At,function(e,t){var r=t.getProperty("type");if(r==="Measure"){var a=t.getProperty("values");var i=true;var n=s.MeasureAttributes.filter(function(e){return a.indexOf(Ae[e[r]["PropertyPath"]][_.LABEL_KEY])>=0||a.indexOf(Ae[e[r]["PropertyPath"]][_.LABEL_KEY_V4])>=0});g(n,function(e,t){if(ne(Ae,t,r)||oe(Ae,t,r)){i=false}else{i=true;return false}});if(!i){S[t.getProperty("uid")]["label"]["allowDecimals"]=false}}});var Yt;if(lt===undefined){lt=""}if(st===undefined){st=""}if(ut){Yt=me(lt,ut)}else{Yt=me(st,ut)}if(t){t.setScale(Yt)}var xt=pe(pt,mt,de);var Ft="";g(At,function(e,t){var r="-1";var a=t.getProperty("type");if(a==="Measure"){var n=vt.filter(function(e){var r=e["title"]["text"].split(",").filter(function(e){if(t.getValues().indexOf(e.trim())>=0){return true}else{return false}});if(r.length>0){return true}else{return false}});if(n&&n.length){var o=t.getValues();if(o&&o.length){g(o,function(e,t){var n=t.trim();var o=y.filter(function(e){if(e["Measure"]&&e["Measure"]["PropertyPath"]){var t=e["Measure"]["PropertyPath"];if(Ae[t]&&Ae[t][_.LABEL_KEY]===n||Ae[t]&&Ae[t][_.LABEL_KEY_V4]===n){return true}else{return false}}});if(o&&o.length){var s=o[0];if(!ne(Ae,s,a)&&!oe(Ae,s,a)){var l="";if(s&&s["DataPoint"]&&s["DataPoint"]["AnnotationPath"]&&s["DataPoint"]["AnnotationPath"]){l=s["DataPoint"]["AnnotationPath"]&&s["DataPoint"]["AnnotationPath"].substring(1);if(l!=""){var u;u=i[l]&&i[l]["ValueFormat"]&&i[l]["ValueFormat"]["NumberOfFractionalDigits"]&&i[l]["ValueFormat"]["NumberOfFractionalDigits"]["Int"];r=u>r?u:r}}}else{r=r<"0"?"0":r}}})}}if(n&&n[0]&&n[0].label&&n[0].label.formatString){var s=n[0].label.formatString}Ft="";if(ut){if(s==="CURR"){Ft="CURR/"+r.toString()+"/"}else{Ft="axisFormatter/"+r.toString()+"/"}}else{Ft="axisFormatter/"+r.toString()+"/"}if(n&&n[0]){n[0].label.formatString=Ft}}});if(m==="vertical_bullet"){S["valueAxis"]={title:{visible:De?false:true},label:{formatString:Ft}}}var Ut="";var Kt="";if(ut){Ut=ot.toString();Kt="CURR/"+ot.toString()+"/"}else{Ut=nt.toString();Kt="axisFormatter/"+nt.toString()+"/"}if(m==="donut"||v){S.plotArea.dataLabel.formatString=Kt;if(S.plotArea.dataLabel.type==="percentage"){S.plotArea.dataLabel.formatString="0.0%/"+Ut+"/"}}W(M,h,"dimension");W(F,h,"measure");if(w){var Bt=E[0].Dimension.PropertyPath;if(Ae[Bt][_.SEMANTICS_KEY]==="yearmonth"||Ae[Bt]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){S.timeAxis.levels=["year","month"]}else if(Ae[Bt][_.SEMANTICS_KEY]==="yearquarter"||Ae[Bt]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){S.timeAxis.levels=["year","quarter"]}else if(Ae[Bt][_.SEMANTICS_KEY]==="yearweek"||Ae[Bt]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){S.timeAxis.levels=["year","week"]}else if(Ae[Bt][_.SEMANTICS_KEY]==="year"||Ae[Bt]["com.sap.vocabularies.Common.v1.IsCalendarYear"]){S.timeAxis.levels=["year"]}}S.title={text:de?de:xt,alignment:"left",layout:{respectPlotPosition:false},style:{fontFamily:"72, 72full, Arial, Helvetica, sans-serif !important",fontSize:".875rem",fontWeight:"normal"}};e.setVizProperties(S);if(a&&a.getProperty("/bInsightEnabled")){var wt=e&&e.getId();var kt=A({},S);if(je!==undefined){kt.plotArea.dataPointStyle=je}P.setVizPropertyMap(wt,kt)}}function le(e,t,r){var a="";var i=e&&e[t]&&e[t].Title;if(i){a=i.String;var n=r.getModel("@i18n")?r.getModel("@i18n"):r.getModel("i18n");if(a.match(/{[@]?i18n>.+}/gi)||a.match(/{[@]?i18n&gt;.+}/gi)){var o=n.getResourceBundle();var s=a.indexOf(">")>-1?a.indexOf(">"):a.indexOf("&gt;")+3;var l=a.substring(s+1,a.length-1);a=o.getText(l)}}return a}function ue(e,t,r){var a="";if(e&&e[r]){if(e[r][_.LABEL_KEY_V4]){a=ce(e[r][_.LABEL_KEY_V4].String?e[r][_.LABEL_KEY_V4].String:e[r][_.LABEL_KEY_V4].Path,t,e)}else if(e[r][_.LABEL_KEY]){a=e[r][_.LABEL_KEY]}else if(r){a=r}}return a}function fe(e,t){if(e&&(e.getVizType()==="bubble"||e.getVizType()==="scatter")){return}var r,a,i,n;var o;var s=_.UNIT_KEY;var l=_.UNIT_KEY_V4_ISOCurrency;var u=_.UNIT_KEY_V4_Unit;var f;var c=[];if(!(r=e.getModel("ovpCardProperties"))){b.error(I.CARD_ERROR+"in "+I.CARD_CONFIG+I.NO_CARD_MODEL);return}var v=e.getModel();var m=r.getProperty("/entitySet");if(!v||!m){return}a=r.getProperty("/entityType");if(!a){b.error(I.CARD_ANNO_ERROR+"in "+I.CARD_ANNO);return}var A=ve(v,m);i=r.getProperty("/chartAnnotationPath");if(!i||!(n=a[i])){b.error(I.CARD_ANNO_ERROR+"in "+I.CARD_ANNO);return}if(!(o=n.MeasureAttributes)||!o.length){b.error(I.CHART_ANNO_ERROR+"in "+I.CHART_ANNO+" "+I.MEASURES_MANDATORY);return}g(o,function(e,t){f=t.Measure.PropertyPath;if(t.DataPoint&&t.DataPoint.AnnotationPath){var r=a[t.DataPoint.AnnotationPath.substring(1)];if(r.ForecastValue&&(r.ForecastValue.PropertyPath||r.ForecastValue.Path)){c.push(r.ForecastValue.PropertyPath||r.ForecastValue.Path)}}c.push(f)});var d=t?t.results:null;var h="";var P=true;var E=[];var C=e.getFeeds();g(C,function(e,t){if(t.getType()==="Measure"){E=E.concat(t.getValues())}});if(d){g(c,function(t,r){var a=ue(A,e,r);if((E?Array.prototype.indexOf.call(E,a):-1)!=-1){if(A&&A[r]){var i;if(A[r][l]){i=A[r][l].Path?A[r][l].Path:A[r][l].String}else if(A[r][u]){i=A[r][u].Path?A[r][u].Path:A[r][u].String}else if(A[r][s]){i=A[r][s]}if(!i){P=false;return false}if(i&&A[i]){for(var t=0;t<d.length;t++){var n=d[t];if(P){if(h&&n[i]&&n[i]!=""&&h!=""&&h!=n[i]){P=false;break}}h=n[i];if(!h){P=false;break}}}}}})}var y="";if(P){if(h!=""){y=p.getText("IN_NO_SCALE",[h]);y=" "+y}var T=e.data("aria-label");if(T&&y&&T.indexOf(y)===-1){var N=T+y;e.data("aria-label",N,true)}var R=e.getVizProperties().title&&e.getVizProperties().title.text;if(R){var D=R.indexOf("|");if(D!==-1){var S=R.slice(D+2);if(S!==h){R=R.slice(0,D-1)}}var O={title:{visible:true,text:S===h?R:R+y,alignment:"left",layout:{respectPlotPosition:false},style:{fontFamily:"72, 72full, Arial, Helvetica, sans-serif !important",fontSize:".875rem",fontWeight:"normal"}}};e.setVizProperties(O)}}}function ce(e,t,r){var a;var i;var n;if(e&&e.indexOf("{")===0){e=e.slice(1,-1);if(e.indexOf(">")!=-1){n=e.split(">");a=n[0];i=n[1]}else if(e.indexOf("&gt;")!=-1){n=e.split("&gt;");a=n[0];i=n[1]}try{e=t.getModel(a).getProperty(i)}catch(t){e=r[e][_.LABEL_KEY_V4].String;b.error("Unable to read labels from resource file",t)}}return e}function ve(t,r){var a=e.cacheODataMetadata(t);if(!a){return undefined}return a[r]}function pe(e,t,r){var a="",i="",n="";if(r){a=r}if(e&&e.length>1){for(var o=0;o<e.length-1;o++){if(i!=""){i+=", "}i+=e[o]}i=p.getText("MEAS_DIM_TITLE",[i,e[o]])}else if(e){i=e[0]}if(t&&t.length>1){for(var o=0;o<t.length-1;o++){if(n!=""){n+=", "}n+=t[o]}n=p.getText("MEAS_DIM_TITLE",[n,t[o]])}else if(t){n=t[0]}if(a===""){r=p.getText("NO_CHART_TITLE",[i,n])}return r}function me(e,t){var r=1;var i;if(t){var n=a.getCurrencyInstance({style:"short",currencyCode:false,shortRefNumber:e});i=n.format(Number(r))}else{var o=a.getFloatInstance({style:"short",shortRefNumber:e});i=o.format(Number(r))}var s=i.slice(-1);return s}function ge(e,t){e.attachSelectData(function(a){var n=m.bCRTLPressed?m.constants.explace:m.constants.inplace;m.bCRTLPressed=false;var o=e.getModel("ovpCardProperties");var u=e.getModel();var f=o.getProperty("/entitySet");var c=ve(u,f);var v=[],p=[];var A={},d={};var h=e.getDataset().getDimensions();var P;for(var C=0;C<h.length;C++){v.push(h[C].getName())}var y=e.getDataset().getBinding("data").getCurrentContexts().map(function(e){return e.getObject()});if(a.getParameter("data")&&a.getParameter("data")[0]&&a.getParameter("data")[0].data){p=Object.keys(a.getParameter("data")[0].data);P=a.getParameter("data")[0].data._context_row_number;var I=e.getDataset().getBinding("data").getContexts()[P];var T=E.getEntityNavigationEntries(I,u,t.getEntityType(),t.getCardPropertiesModel())[0];if(y[P].$isOthers&&y[P].$isOthers===true){var N={},R=[];for(var D=0;D<v.length;D++){for(var b=0;b<p.length;b++){if(v[D]===p[b]){for(var S in c){if(c.hasOwnProperty(S)){var O=c[S][_.LABEL_KEY]||c[S][_.NAME_KEY]||c[S][_.NAME_CAP_KEY];if(O===p[b]){R.push(S)}}}}}}for(var C=0;C<R.length;C++){N[R[C]]=[];for(var D=0;D<y.length-1;D++){if(D!=P){N[R[C]].push(y[D][R[C]])}}}var M={$isOthers:true};var L={getObject:function(){return M},getOtherNavigationDimensions:function(){return N}};if(l.checkIfAPIIsUsed(t)){if(t.checkAPINavigation()){s.onContentClicked(L)}}else{if(T){t.doNavigation(L,T,n)}}}else{for(var D=0;D<v.length;D++){for(var b=0;b<p.length;b++){if(v[D]===p[b]){for(var S in c){if(c.hasOwnProperty(S)){var O=c[S][_.LABEL_KEY_V4]&&c[S][_.LABEL_KEY_V4].String||c[S][_.LABEL_KEY]||c[S][_.NAME_KEY]||c[S][_.NAME_CAP_KEY];if(O.match(/{@i18n>.+}/gi)){var V=this.getModel("@i18n").getResourceBundle();O=V.getText(O.substring(O.indexOf(">")+1,O.length-1))}if(O===p[b]){A[S]=y[P][S]}}}}for(var S in y[P]){if(c.hasOwnProperty(S)){d[S]=y[P][S]}}}}if(A){g(Object.keys(A),function(e,t){if(c[t]["type"]==="Edm.String"){if(c[t]["sap:semantics"]==="yearmonth"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){A[t]=A[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYMM"}).format(A[t]):A[t]}else if(c[t]["sap:semantics"]==="yearquarter"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){A[t]=A[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYQ"}).format(A[t]):A[t]}else if(c[t]["sap:semantics"]==="yearweek"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){A[t]=A[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYww"}).format(A[t]):A[t]}else if(c[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]&&c[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"].Bool){var r=A[t];if(r.includes(".")){A[t]=r.split(".").reverse().join("")}else if(r.includes("/")){A[t]=r.split("/").reverse().join("")}}}})}if(d){g(Object.keys(d),function(e,t){if(c[t]["type"]==="Edm.String"){if(c[t]["sap:semantics"]==="yearmonth"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){d[t]=d[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYMM"}).format(d[t]):d[t]}else if(c[t]["sap:semantics"]==="yearquarter"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){d[t]=d[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYQ"}).format(d[t]):d[t]}else if(c[t]["sap:semantics"]==="yearweek"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){d[t]=d[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYww"}).format(d[t]):d[t]}else if(c[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]&&c[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"].Bool){var r=d[t];if(r.includes(".")){d[t]=r.split(".").reverse().join("")}else if(r.includes("/")){d[t]=r.split("/").reverse().join("")}}}})}var Y=o.getProperty("/entityType"),x=Y[o.getProperty("/presentationAnnotationPath")];if(Y){var F=r.getRequestFields(x);if(F&&F.length>0){g(F,function(e,t){if(!A.hasOwnProperty(t)){A[t]=y[P][t]}})}}var L={getObject:function(){return A},getAllData:function(){return d}};if(l.checkIfAPIIsUsed(t)){if(t.checkAPINavigation()){s.onContentClicked(L)}}else{if(T){t.doNavigation(L,T,n)}}}}})}function Ae(e){if(e.EnumMember.endsWith("Bubble")){return true}else{return false}}function de(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Dimension||!e[0].Dimension.PropertyPath){b.error(I.CHART_ANNO_ERROR+"in "+I.CHART_ANNO+" "+I.DIMENSIONS_MANDATORY);return t}t=true;return t}function he(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Measure||!e[0].Measure.PropertyPath){b.error(I.CHART_ANNO_ERROR+"in "+I.CHART_ANNO+" "+I.MEASURES_MANDATORY);return t}t=true;return t}function Pe(e){return e.name}function Ee(e){if(e&&e.indexOf("#")!=-1){var t=e.split("#");if(t.length>1){return t[1]}}return""}function Ce(e,t){var r=t.getModel("ovpCardProperties");var a=ye(t);var i=+a.itemsLength;var n=+r.getProperty("/dataStep");if(i&&n){var o=e.colSpan-1;if(o>=0){i+=n*o;_e(t,i)}}}function ye(e){var t=e.getModel("ovpCardProperties");var r=t.getProperty("/entityType");var a=t.getProperty("/presentationAnnotationPath");var i=r.hasOwnProperty(a)&&r[a];var n=i&&i.MaxItems;if(n){var o=n.Int32?n.Int32:n.Int;return{itemsLength:+o,dataStep:+t.getProperty("/dataStep")}}}function _e(e,t){var r,a={},i=[];var n=e.getVizType();var o=e.getModel("ovpCardProperties");var s=o.getProperty("/entityType");var l=o.getProperty("/chartAnnotationPath");var u=s[l];var f=e.getParent();var c=f.getBinding("data");a.path=c.getPath();a.parameters={};if(c.mParameters&&c.mParameters.select){a.parameters.select=c.mParameters.select}a.parameters.custom=a.parameters.custom||{};a.parameters.custom._requestFrom="ovp_internal";a.filters=c.aApplicationFilters;a.sorter=c.aSorters;a.length=n==="donut"?t+1:t;a.template=new v;f.bindAggregation("data",a);if(n==="donut"){g(u.MeasureAttributes,function(e,t){i.push(t.Measure.PropertyPath)});r={};r.path=c.getPath();r.parameters={};r.parameters.select=i.join(",");r.filters=c.aApplicationFilters;r.sorter=c.aSorters;r.length=1;r.template=new v;f.bindAggregation("aggregateData",r)}f.updateBindingContext()}function Ie(e){e.sort(function(e,t){if(e.index<t.index){return-1}if(e.index>t.index){return 1}return 0})}function Te(e){return e.color!==undefined}function Ne(e){return e.dimensionValue}return{constants:_,errorMessages:I,formatItems:S,formatByType:F,returnDateFormat:U,formatChartAxes:K,hideDateTimeAxis:B,checkExists:w,validateCardConfiguration:k,checkNoData:z,getConfig:H,hasTimeSemantics:G,getChartType:j,getPrimitiveValue:X,formThePathForCriticalityStateCalculation:Z,checkFlag:ee,buildVizAttributes:se,setChartUoMTitle:fe,getMetadata:ve,getSelectedDataPoint:ge,checkBubbleChart:Ae,dimensionAttrCheck:de,measureAttrCheck:he,getEntitySet:Pe,getAnnotationQualifier:Ee,reprioritizeContent:Ce,getMaxItems:ye,getLabelFromAnnotationPath:ce,getChartTitle:le}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/analytical/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/jUtils","sap/ovp/cards/charts/VizAnnotationManager"],function(e,a,t){"use strict";return e.extend("sap.ovp.cards.charts.analytical.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},contentFragment:{type:"string",defaultValue:"sap.ovp.cards.charts.analytical.analyticalChart"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.charts.analytical.analyticalChart"},enableAddToInsights:{type:"boolean",defaultValue:true}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.viz"],components:[]},config:{}},onAfterRendering:function(){a.setAttributeToMultipleElements(".tabindex0","tabindex",0);a.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/analytical/analyticalChart.controller", ["sap/ovp/cards/generic/Card.controller","sap/ovp/cards/charts/VizAnnotationManager","sap/viz/ui5/data/FlattenedDataset","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/app/resources","sap/base/util/each","sap/ovp/app/OVPLogger","sap/ui/core/Fragment","sap/ovp/filter/FilterUtils","sap/ui/core/Core","sap/ovp/cards/Integration/IntegrationCard","sap/ui/Device","sap/ovp/cards/charts/Utils","sap/ui/dom/units/Rem","sap/m/MessageBox"],function(t,e,a,i,r,s,o,n,d,h,l,u,p,g,v){"use strict";var c=new o("OVP.analytical.analyticalChart");return t.extend("sap.ovp.cards.charts.analytical.analyticalChart",{onInit:function(){t.prototype.onInit.apply(this,arguments);e.formatChartAxes();var a=this;this.eventhandler=function(t,e,i){d.applyFiltersToV2Card(i,a)};this.GloabalEventBus=h.getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",a.eventhandler)}this.iPreviousRowSpan=0;this.bdataLoadedToEnableAddToInsight=false},onBeforeRendering:function(){if(this.bCardProcessed){return}e.validateCardConfiguration(this);var t=this.getView().byId("analyticalChart");var i=this.getOwnerComponent().getComponentData();if(t){t.setHeight("21rem")}if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"&&i&&i.appComponent){var r=i.appComponent.getDashboardLayoutUtil();var s=r.dashboardLayoutModel.getCardById(i.cardId);if(s.dashboardLayout.autoSpan&&t){t.setHeight("21rem")}}var o=this.getView().byId("vbLayout");var d;var h=false;var l=new a({data:{path:"/"}});this.isVizPropSet=h;this.oDataSet=l;this.vizFrame=t;this.vbLayout=o;if(!t){c.error(e.constants.ERROR_NO_CHART+": ("+this.getView().getId()+")")}else{this.vbLayout.setBusy(true);d=t.getModel("ovpCardProperties").getProperty("/navigation");if(d===undefined||d=="datapointNav"||d!="headerNav"){e.getSelectedDataPoint(t,this)}t.destroyDataset();var u=t.getParent().getBinding("data");this._handleKPIHeader();if(u&&u.getPath()){u.attachDataReceived(this.onDataReceived.bind(this));u.attachDataRequested(this.onDataRequested.bind(this))}else{n.load("sap.ovp.cards.charts.generic.noData").then(function(t){var e=this.getCardContentContainer();e.removeAllItems();e.addItem(t)}.bind(this))}t.addEventDelegate({onmouseover:function(){var e=t._oOvpVizFrameTooltip;if(e){e._oPopup.close()}}})}this.bCardProcessed=true},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!i.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var a=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var r=document.getElementById(a);var s=this.getHeaderHeight();if(!e.dashboardLayout.autoSpan){if(r){var o=r.getElementsByClassName("sapOvpWrapper")[0];if(o){o.style.height=e.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}}}if(e.dashboardLayout.showOnlyHeader){r.classList.add("sapOvpMinHeightContainer")}var n=this.getView().byId("analyticalChart");if(n){n.setHeight(this._calculateVizFrameHeight()+"px");this._calculateWidth()}}},onDataReceived:function(t){var a=this;var i=this.getView().byId("analyticalChart");var o=this.getView().byId("bubbleText");var n=r.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");i.setDataset(this.oDataSet);var d=i.getParent();if(!this.isVizPropSet){e.buildVizAttributes(i,d,this);this.isVizPropSet=true;if(o!=undefined){var h=i.getFeeds();s(h,function(t,e){if(h[t].getUid()=="bubbleWidth"){o.setText(n+" "+h[t].getValues())}})}e.hideDateTimeAxis(i)}if(this.getCardPropertiesModel()&&this.getCardPropertiesModel().getData()&&this.getCardPropertiesModel().getData().colorPalette&&i.getVizType()==="stacked_column"){var l=i.getDataset().getDimensions(),g=i.getFeeds(),v,c;for(var y=0;y<g.length;y++){if(g[y].getUid()==="color"){v=g[y].getValues()[0];break}}for(var b=0;b<l.length;b++){if(l[b].getName()===v){c=l[b];break}}if(v&&c){var f={};f["bDescending"]=true;c.setSorter(f)}}var C=t?t.getParameter("data"):null;e.setChartUoMTitle(i,C);if(this.bFlag==true){this.bFlag=false;this.vbLayout.setBusy(false)}else{setTimeout(function(){a.vbLayout.setBusy(false);a.bdataLoadedToEnableAddToInsight=true},0)}e.checkNoData(t,this.getCardContentContainer(),i);if(u.system.phone){if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var m=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var P=Math.max(m.dashboardLayout.rowSpan,this.iPreviousRowSpan);this.iPreviousRowSpan=P}if(p.isDataSetEmpty(t)){i.setHeight(50+"px")}else{var D=this._calculateVizFrameHeight();if(D!==undefined&&typeof D==="number"){i.setHeight(D+"px")}}}},onDataRequested:function(){this.vbLayout.setBusy(true)},getCardItemsBinding:function(){var t=this.getView().byId("analyticalChart");if(t&&t.getParent()){return t.getParent().getBinding("data")}return null},resizeCard:function(t){var a=this.getCardPropertiesModel();this.newCardLayout=t;a.setProperty("/cardLayout/rowSpan",t.rowSpan);a.setProperty("/cardLayout/colSpan",t.colSpan);var i=this.getCardPropertiesModel().getProperty("/cardLayout");var o=this.getHeaderHeight();var n=this.getView().getDomRef().querySelectorAll(".sapOvpWrapper");for(var d=0;d<n.length;d++){n[d].style.height=t.rowSpan*i.iRowHeightPx+2-(o+2*i.iCardBorderPx)+"px"}var h=this.getView().byId("analyticalChart");var l=this.getView().byId("bubbleText");if(h){if(h.getVizType()==="timeseries_bubble"||h.getVizType()==="bubble"){if(i.colSpan>1){l.setVisible(false)}else{l.setVisible(true)}}h.setHeight(this._calculateVizFrameHeight()+"px");this._calculateWidth()}var u=this.getView().byId("ovpCardContentContainer").getDomRef();if(u){if(!t.showOnlyHeader){u.classList.remove("sapOvpContentHidden")}else{u.classList.add("sapOvpContentHidden")}}var p=r.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");this.vizFrame.setDataset(this.oDataSet);var g=h.getParent();if(!this.isVizPropSet){e.buildVizAttributes(h,g,this);this.isVizPropSet=true;if(l!=undefined){var v=h.getFeeds();s(v,function(t,e){if(v[t].getUid()=="bubbleWidth"){l.setText(p+" "+v[t].getValues())}})}e.hideDateTimeAxis(h)}e.reprioritizeContent(this.newCardLayout,h)},_calculateVizFrameHeight:function(){var t;if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.getView().byId("analyticalChart");var a=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var i=this.getView().getController();var r=this.getItemHeight(i,"toolbar");var s=this.getHeaderHeight();var o=(e.getVizType()==="timeseries_bubble"||e.getVizType()==="bubble")&&a.dashboardLayout.colSpan===1?43:0;var n=u.system.phone&&this.iPreviousRowSpan>0?this.iPreviousRowSpan:a.dashboardLayout.rowSpan;t=n*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX+r+o+30);var d=e.sId;var h=this._calculateVizLegendGroupHeight(t);var l=this.getView().byId(d);if(l){l.setVizProperties(h)}}else{t=g.toPx(21)}return t},_calculateVizLegendGroupHeight:function(t){var e;if(t<=270){e=.1}else{var a=240;e=(t-a)/t}var i={legendGroup:{layout:{height:e}}};return i},_calculateWidth:function(){var t=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var e=this.getView().byId("analyticalChart");if(t){var a=parseInt(t.dashboardLayout.width,10);var i=e.getVizType();var r=e.sId;if(i==="donut"){var s=this._calculateVizLegendGroupWidth(a);var o=this.getView().byId(r);if(o){o.setVizProperties(s)}}}},_calculateVizLegendGroupWidth:function(t){var e;if(t<=600){e=.25}else if(t<=900){e=.55}else if(t>=1200){e=.7}else{e=.65}var a={legendGroup:{layout:{maxWidth:e}}};return a},refreshCard:function(){this.getView().rerender()},onShowInsightCardPreview:function(){var t=this.getView();var e=t.getController();var a=e.oCardComponentData;var i=this;if(this.checkIBNNavigationExistsForCard()){l.showCard({vizFrame:e.vizFrame,entitySet:e.entitySet,entityType:e.entityType,cardComponentName:"Analytical",cardComponentData:a,cardComponent:e.oCardComponent,view:t}).then(function(t){i.saveGeneratedCardManifest(t)})}else{v.error(r.getText("INT_IBN_NAVIGATION_NOT_FOUND_ERROR_MESSAGE_TEXT"))}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/config", [],function(){"use strict";var e={getChartsConfiguration:function(){return{Line:{default:{type:"line",vizProperties:[{path:"plotArea.isSmoothed",value:false}],properties:{semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"valueAxis.label.allowDecimals",value:true}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",type:"dimension",role:"Series"}]},time:{type:"timeseries_line",vizProperties:[{path:"plotArea.isSmoothed",value:false},{path:"timeAxis.levels",value:[]}],dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension"},{uid:"color",type:"dimension",role:"Series"}]}},Bubble:{default:{type:"bubble",properties:{hideLabel:false},vizProperties:[{path:"plotArea.adjustScale",value:true}],dimensions:{max:4},measures:{min:3,max:3,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",role:"Axis1|Axis2|Axis3",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"valueAxis2",min:1,max:1,type:"measure",role:"Axis2|Axis1|Axis3",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.4}]},{uid:"bubbleWidth",min:1,max:1,type:"measure",role:"Axis3|Axis1|Axis2"},{uid:"shape",max:2,type:"dimension",role:"Category"},{uid:"color",max:2,type:"dimension",role:"Series",vizProperties:[{path:"plotArea.colorDepth",method:"count",min:1,max:2}]}]},time:{type:"timeseries_bubble",properties:{hideLabel:false},dimensions:{min:1,max:1,defaultRole:"Series"},measures:{min:2,max:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"},{uid:"bubbleWidth",min:1,max:1,type:"measure",role:"Axis3|Axis1|Axis2"}]}},Donut:{default:{type:"donut",vizProperties:[{path:"plotArea.dataLabel.type",value:"value"}],dimensions:{min:1},measures:{min:1,max:1},resize:{dataStep:10},feeds:[{uid:"size",min:1,max:1,type:"measure"},{uid:"color",min:1,type:"dimension"}]}},Column:{default:{type:"column",properties:{semanticColor:true,semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",min:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_column",properties:{semanticColor:true},dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},Bar:{default:{type:"bar",properties:{semanticColor:true,semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category",vizProperties:[{path:"categoryAxis.layout.width",value:.33}]},{uid:"color",min:1,type:"dimension",role:"Series"}]}},ColumnStacked:{default:{type:"stacked_column",dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",type:"dimension",role:"Series"}]},time:{type:"timeseries_stacked_column",properties:{semanticColor:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"color",min:0,type:"dimension",role:"Series"}]}},VerticalBullet:{default:{type:"vertical_bullet",properties:{semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"actualValues",min:1,type:"measure",role:"Axis1"},{uid:"targetValues",type:"measure",role:"Axis2"},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",min:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_bullet",dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"actualValues",min:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"targetValues",type:"measure",role:"Axis2"},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"color",min:0,type:"dimension",role:"Series"}]}},Combination:{default:{type:"combination",dimensions:{min:1,defaultRole:"Category"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",min:2,vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"color",type:"dimension",role:"Series"},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"}]},time:{type:"timeseries_combination",dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:2,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},Scatter:{default:{type:"scatter",vizProperties:[{path:"plotArea.markerSize",value:""}],properties:{hideLabel:false},dimensions:{min:1,max:2},measures:{min:2,max:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",min:1,max:1,role:"Axis1|Axis2|Axis3",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"valueAxis2",type:"measure",min:1,max:1,vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.4}]},{uid:"color",type:"dimension",max:1,role:"Series"},{uid:"shape",type:"dimension",max:1,role:"Category"}]},time:{type:"timeseries_scatter",dimensions:{min:1,max:3,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"shape",type:"dimension",min:0,role:"Category2"},{uid:"color",type:"dimension",min:0,role:"Series"}]}},Waterfall:{default:{type:"waterfall",properties:{semanticColor:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"waterfallType",max:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_waterfall",properties:{semanticColor:true},dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},CombinationDual:{default:{type:"dual_combination",properties:{hideLabel:false},dimensions:{min:1},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.5}]},{uid:"valueAxis2",min:1,type:"measure",role:"Axis2",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.5}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"}]},time:{type:"dual_timeseries_combination",properties:{hideLabel:false},dimensions:{min:1,max:1,defaultRole:"Series"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.5}]},{uid:"valueAxis2",min:1,type:"measure",role:"Axis2",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.5}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},vertical_bullet:{reference:"VerticalBullet"},StackedColumn:{reference:"ColumnStacked"}}}};return{getChartsConfiguration:e.getChartsConfiguration}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/generic/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/jUtils"],function(t,e){"use strict";return t.extend("sap.ovp.cards.charts.generic.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},selectionAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.SelectionVariant"},chartAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Chart"},presentationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.PresentationVariant"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},dataPointAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.DataPoint"}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},addTabindex:function(){e.setAttributeToMultipleElements(".tabindex0","tabindex",0);e.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)},onAfterRendering:function(){this.addTabindex()}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/custom/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.custom.Component",{metadata:{properties:{contentFragment:{type:"string"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/error/Component", ["sap/ovp/cards/generic/Component"],function(r){"use strict";var e=r.extend("sap.ovp.cards.error.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.error.Error"},state:{type:"string",defaultValue:"Error"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.error.Error"}},version:"1.115.0",library:"sap.ovp"}});return e});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/error/Error.controller", ["sap/ovp/cards/generic/Card.controller","sap/ovp/app/OVPLogger"],function(t,a){"use strict";var e=new a("OVP.error.Error");return t.extend("sap.ovp.cards.error.Error",{onInit:function(){t.prototype.onInit.apply(this,arguments)},adjustCardSize:function(){var t=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);if(t.template!=="sap.ovp.cards.stack"){var a=this.oMainComponent&&this.oMainComponent.getLayout();var e=a.getDashboardLayoutUtil();var o=e.getCardDomId(this.sCardId);var r=document.getElementById(o);var n=this.getHeaderHeight();r.getElementsByClassName("contentOfError")[0].style.height=r.getElementsByClassName("sapOvpCardContentContainer")[0].style.height=t.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX-(n+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}},onAfterRendering:function(){if(this.oMainComponent&&this.oMainComponent.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){t.prototype.onAfterRendering.apply(this,arguments);this.adjustCardSize()}},resizeCard:function(){try{this.adjustCardSize()}catch(t){e.warning("OVP resize: "+this.cardId+" catch "+t.toString())}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/Card.controller", ["sap/ui/core/mvc/Controller","sap/ovp/cards/ActionUtils","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/core/ResizeHandler","sap/ui/core/format/NumberFormat","sap/m/MessageBox","sap/ui/generic/app/navigation/service/NavError","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/Button","sap/ui/thirdparty/jquery","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/KeyCodes","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/cards/jUtils","sap/base/util/isEmptyObject","sap/ui/util/openWindow","sap/ovp/placeholder/placeholderHelper","sap/ui/core/Component","sap/ui/core/Fragment","sap/ovp/app/NavigationHelper","sap/ovp/cards/NavigationHelper","sap/ovp/helpers/V4/MetadataAnalyzer","sap/ovp/cards/Integration/Helpers/AnalyticalCard"],function(t,e,a,i,n,r,o,s,d,l,p,jQuery,g,h,c,f,v,u,C,m,y,b,I,D,P,w,S){"use strict";var V=new v("ovp.generic.Card");return t.extend("sap.ovp.cards.generic.Card",{initKeyboardNavigation:function(){var t=function(t){this.init(t)};t.prototype.layoutItemFocusHandler=function(){var t=jQuery(document.activeElement);if(t){var e=t.find("[aria-label]");var a,i="";if(t.find(".valueStateText").length==1){var n=t.find(".valueStateText").find(".sapMObjectNumberText").text();var r=t.find(".valueStateText").find(".sapUiInvisibleText").text();t.find(".valueStateText").attr("aria-label",n+" "+r);t.find(".valueStateText").attr("aria-labelledby","")}t.find("[role='listitem']").attr("aria-label","");if(t.hasClass("sapOvpCardHeader")&&!t.hasClass("sapOvpStackCardContent")){var o="";var s=t.find(".cardHeaderType");if(s.length===0){var d=g.getText("CardHeaderType");o="cardHeaderType_"+(new Date).getTime();var l='<div id="'+o+'" class="cardHeaderType" aria-label="'+d+'" hidden></div>';t.append(l)}else{o=s[0].id}i+=o+" "}for(a=0;a<e.length;a++){if(e[a].getAttribute("role")==="heading"){i+=e[a].id+" "}}if(t.hasClass("sapOvpCardHeader")){var p=t.find(".cardHeaderText");if(p.length!==0){for(var a=0;a<p.length;a++){if(i.indexOf(p[a].id)===-1){i+=p[a].id+" "}}}}if(i.length){t.attr("aria-labelledby",i)}if(t.prop("nodeName")==="LI"&&t.find(".linkListHasPopover").length!==0){if(t.find("#hasDetails").length===0){t.append("<div id='hasDetails' hidden>"+g.getText("HAS_DETAILS")+"</div>");t.attr("aria-describedby","hasDetails")}}var h=t.attr("id");if(h&&h.indexOf("ovpTable")!=-1&&t.find("[role='Link']")&&!t.hasClass("sapUiCompSmartLink")){var c=t.closest("td").attr("data-sap-ui-column"),f=t.closest("tbody").siblings().children().filter("tr").children();for(var a=0;a<f.length;a++){if(f[a].getAttribute("data-sap-ui")==c&&f[a].hasChildNodes("span")){var v=f[a].firstElementChild.getAttribute("id");t.attr("aria-labelledby",v)}}}}};t.prototype.init=function(t){this.cardLayout=t;this.keyCodes=c;this.jqElement=jQuery(t.getView().$());this.jqElement=this.jqElement.parent().parent().parent();this.jqElement.on("focus.keyboardNavigation",this.layoutItemFocusHandler.bind(this))};this.keyboardNavigation=new t(this)},onInit:function(){this.oCardComponent=this.getOwnerComponent();this.oCardComponentData=this.oCardComponent&&this.oCardComponent.getComponentData();this.oMainComponent=this.oCardComponentData&&this.oCardComponentData.mainComponent;this.sCardId=this.oCardComponentData.cardId;var t=this.getView().mPreprocessors.xml[0].ovpCardProperties.oData.state;if(t!=="Error"){var e=this.getView().byId("ovpCardHeader");if(!!e){e.attachBrowserEvent("click",this.onHeaderClick.bind(this));e.addEventDelegate({onkeydown:function(t){if(!t.shiftKey&&t.keyCode==13){t.preventDefault();this.onHeaderClick(t)}else if(!t.shiftKey&&t.keyCode==32){t.preventDefault()}}.bind(this)});e.addEventDelegate({onkeyup:function(t){if(!t.shiftKey&&t.keyCode==32){t.preventDefault();this.onHeaderClick(t)}}.bind(this)})}}var a=this.getView().byId("kpiNumberValue");if(a){a.addEventDelegate({onAfterRendering:function(){var t=a.$();var e=t.find(".sapMNCValueScr");var i=t.find(".sapMNCScale");e.attr("aria-label",e.text());i.attr("aria-label",i.text());var n=this.getView().byId("ovpCardHeader").getDomRef();var r=this.getOwnerComponent().getComponentData();if(!!r&&!!r.appComponent){var o=r.appComponent;if(!!o.getModel("ui")){var s=o.getModel("ui");if(!!s.getProperty("/containerLayout")&&s.getProperty("/containerLayout")==="resizable"){var d=r.appComponent.getDashboardLayoutUtil();if(!!d){d.setKpiNumericContentWidth(n)}}}}}.bind(this)})}},exit:function(){if(this.resizeHandlerId){n.deregister(this.resizeHandlerId)}},onExit:function(){if(this.GloabalEventBus){var t=this;this.GloabalEventBus.unsubscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler)}},onAfterRendering:function(){var t=this.getView().byId("ovpCardHeader");var e=t&&t.getDomRef();var a=this.getView().byId("ovpHeaderTitle");var r=this.getView().byId("ovpQuickviewCardHeader");if(e&&!e.getAttribute("ariaLabelledBy")){if(a&&a.getText()){var o=a.getDomRef().getAttribute("id");e.setAttribute("arialabelledby",o)}else if(r&&r.getText()){var s=r.getDomRef().getAttribute("id");e.setAttribute("arialabelledby",s)}}var d=this.getCardPropertiesModel();this.enableClick=true;var l=d.getProperty("/contentFragment"),p=this.getOwnerComponent().getComponentData(),g=this.getCardItemsBinding();if(!g&&y.hidePlaceholderNeeded()){y.hidePlaceholder()}this._handleCountHeader();this._handleKPIHeader();var h=d.getProperty("/selectedKey");if(h&&d.getProperty("/state")!=="Loading"){var c=this.getView().byId("ovp_card_dropdown");if(c){c.setSelectedKey(h);var f=this.getView().getModel("ui");if(f&&f.getProperty("/bSelectionChanged")){var v=document.getElementById(c.sId);v&&v.focus();f.setProperty("/bSelectionChanged",false)}}}try{var p=this.getOwnerComponent().getComponentData();var C=p&&p.appComponent;if(C){if(C.getModel("ui")){var m=C.getModel("ui");if(m.getProperty("/containerLayout")==="resizable"){var b=C.getDashboardLayoutUtil();if(b){this.oDashboardLayoutUtil=b;this.cardId=p.cardId;if(b.isCardAutoSpan(p.cardId)){this.resizeHandlerId=n.register(this.getView(),function(t){V.info("DashboardLayout autoSize:"+t.target.id+" -> "+t.size.height);b.setAutoCardSpanHeight(t)})}}}}}}catch(t){V.error("DashboardLayout autoSpan check failed.")}if(this.oDashboardLayoutUtil&&this.oDashboardLayoutUtil.isCardAutoSpan(this.cardId)){var I=jQuery("#"+this.oDashboardLayoutUtil.getCardDomId(this.cardId));if(this.oView.$().outerHeight()>I.innerHeight()){this.oDashboardLayoutUtil.setAutoCardSpanHeight(null,this.cardId,this.oView.$().height())}}var D=false;var w=this.getModel();var S=this.getEntityType();if(p&&p.mainComponent){var M=p.mainComponent;if(M.bGlobalFilterLoaded){D=!P.checkHeaderNavigationDisabledForAnalyticalCard(d)&&P.checkNavigation(w,S,d)}}else if(i.checkIfAPIIsUsed(this)){D=this.checkAPINavigation()}var T=d.getProperty("/state");if(T!=="Loading"&&T!=="Error"){var N=d.getProperty("/template");if(N==="sap.ovp.cards.stack"){if(!D){var O=this.getView().byId("ViewAll");if(O){O=O.getDomRef();O&&O.parentNode.removeChild(O)}}}}if(l==="sap.ovp.cards.stack.Stack"){var A=this.getView().getDomRef();var E=A&&A.querySelector(".sapOvpCardContentContainer");if(E){E.style.borderTop="none"}}if(D){if(l?l!=="sap.ovp.cards.quickview.Quickview":true){if(l==="sap.ovp.cards.stack.Stack"){var A=this.getView().getDomRef();var H=A.querySelectorAll(".sapOvpCardContentRightHeader");if(H.length!==0){u.addClassToAllElements(H,"sapOvpCardNavigable")}}else{this.getView().addStyleClass("sapOvpCardNavigable")}}if(l&&l==="sap.ovp.cards.quickview.Quickview"){var k=this.byId("ovpCardHeader");if(k){k.addStyleClass("sapOvpCardNavigable")}}}else{if(l){this.getView().addStyleClass("ovpNonNavigableItem");var k=this.byId("ovpCardHeader");if(k){k.$().removeAttr("role");k.addStyleClass("ovpNonNavigableItem")}var x=P.checkLineItemNavigation(w,S,d);if(!x){switch(l){case"sap.ovp.cards.list.List":case"sap.ovp.cards.v4.list.List":var L=this.getView().byId("listItem");if(L){L.setType("Inactive")}break;case"sap.ovp.cards.table.Table":case"sap.ovp.cards.v4.table.Table":var L=this.getView().byId("tableItem");if(L){L.setType("Inactive")}break;case"sap.ovp.cards.linklist.LinkList":case"sap.ovp.cards.v4.linklist.LinkList":if(!P.checkNavigationForLinkedList(w,S)){var L=this.getView().byId("ovpCLI");if(L){L.setType("Inactive")}}break}}}}var F=this.getView().byId("ovp_card_dropdown");var _=this.getView().byId("ovp_card_dropdown_label");if(F){F.addAriaLabelledBy(_.getId())}if(i.checkIfAPIIsUsed(this)){this.initKeyboardNavigation()}if(this.getView()&&this.getView().byId("sapOvpCardAdditionalActions")){this.getView().byId("sapOvpCardAdditionalActions").setEnabled(true)}},checkAPINavigation:function(){var t=this.getOwnerComponent().getComponentData(),e=t.fnCheckNavigation&&typeof t.fnCheckNavigation==="function",a=e?t.fnCheckNavigation:null;if(a){if(a()){return true}}else{var i=this.getCardPropertiesModel();return!P.checkHeaderNavigationDisabledForAnalyticalCard(i)&&P.checkNavigation(this.getModel(),this.getEntityType(),i)}return false},onHeaderClick:function(t){var e=t&&t.target&&t.target.id;if(e&&e.indexOf("sapOvpCardAdditionalActions")>-1){return}var n=t.ctrlKey||t.metaKey?h.constants.explace:h.constants.inplace;if(i.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onHeaderClicked()}}else{var r=this.getCardPropertiesModel();var o=r.getProperty("/template");var s=r.getProperty("/targetUri");if((o=="sap.ovp.cards.linklist"||o=="sap.ovp.cards.v4.linklist")&&r.getProperty("/staticContent")!==undefined&&s){window.location.href=s}else if(r.getProperty("/staticContent")!==undefined&&s===""){return}else if(P.checkHeaderNavigationDisabledForAnalyticalCard(r)){return}else{this.doNavigation(this.getView().getBindingContext(),null,n)}}},resizeCard:function(t){V.info(t);if(this.resizeHandlerId){n.deregister(this.resizeHandlerId);this.resizeHandlerId=null}},_handleCountHeader:function(){var t=this.getView().byId("ovpCountHeader");if(t){var e=this.getCardItemsBinding();if(e){if(e.isLengthFinal()&&e.getLength()>0){this.setHeaderCounter(e,t)}e.attachDataReceived(function(a){if(y.hidePlaceholderNeeded()){y.hidePlaceholder()}this.setHeaderCounter(e,t,a)}.bind(this));e.attachChange(function(a){this.setHeaderCounter(e,t,a)}.bind(this))}}else{var e=this.getCardItemsBinding();if(e){e.attachDataReceived(function(){if(y.hidePlaceholderNeeded()){y.hidePlaceholder()}})}}},setHeaderCounter:function(t,e,a){var i;if(t.isLengthFinal()){i=t.getLength()}else{if(a&&a.getParameters().data&&a.getParameters().data.results){i=a.getParameters().data.results.length}}var n=t.getCurrentContexts().length;var o,s="";var d=r.getIntegerInstance({minFractionDigits:0,maxFractionDigits:1,decimalSeparator:".",style:"short"});n=parseFloat(n,10);var l=this.getOwnerComponent().getComponentData();if(l&&l.appComponent){var p=l.appComponent;if(p.getModel("ui")){var h=p.getModel("ui");if(h.getProperty("/containerLayout")!=="resizable"){if(i!==0){i=d.format(Number(i))}if(n!==0){n=d.format(Number(n))}}else{o=p.getDashboardLayoutUtil().dashboardLayoutModel.getCardById(l.cardId)}}}if(n===0||i===0){s=""}else if(o&&o.dashboardLayout.showOnlyHeader){s=g.getText("Count_Header_Total",[i])}else if(i!=n){s=g.getText("Count_Header",[n,i])}e.setText(s);e.addEventDelegate({onAfterRendering:function(){var t=e.$();t.attr("aria-label",s)}})},getKPIBinding:function(){var t=this.byId("kpiHBoxNumeric"),e=t&&t.getBindingInfo("items")&&t.getBindingInfo("items").binding;return e},getCardItemsBinding:function(){},onActionPress:function(t){var e=t.getSource(),a=this._getActionObject(e),i=e.getBindingContext();if(a.type.indexOf("DataFieldForAction")!==-1){this.doAction(i,a)}else{this.doNavigation(i,a)}},_getActionObject:function(t){var e=t.getCustomData();var a={};for(var i=0;i<e.length;i++){a[e[i].getKey()]=e[i].getValue()}return a},doNavigation:function(t,e,a){if(!a){a=h.constants.inplace}if(!this.enableClick){return}this.enableClick=false;setTimeout(function(){this.enableClick=true}.bind(this),1e3);if(!this.oMainComponent){return}if(!e){e=P.getEntityNavigationEntries(t,this.getModel(),this.getEntityType(),this.getCardPropertiesModel())[0]}var i=f({},t);var n=f({},e);var r=this.oMainComponent.doCustomNavigation&&this.oMainComponent.doCustomNavigation(this.sCardId,i,n);var o=this.oMainComponent.templateBaseExtension&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation(this.sCardId,i,n);var s;if(r){s=r}if(o){s=o}if(s){var d=s.type;if(d&&typeof d==="string"&&d.length>0){d=d.split(".").pop().split("/").pop().toLowerCase();switch(d){case"datafieldwithurl":s.type="com.sap.vocabularies.UI.v1.DataFieldWithUrl";break;case"datafieldforintentbasednavigation":s.type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";break}e=s}}function l(a){if(!a){a=h.constants.inplace}if(e){switch(e.type){case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":this.doNavigationWithUrl(t,e,a);break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":this.doIntentBasedNavigation(t,e,false,a);break;case"com.sap.vocabularies.UI.v1.KPIDetailType":this.doIntentBasedNavigation(t,e,false,a);break}}}if(!this.oMainComponent.oAppStatePromise){l.call(this,a)}else{this.oMainComponent.oAppStatePromise.then(l.bind(this,a))}},doNavigationWithUrl:function(t,e,a){if(!a){a=h.constants.inplace}if(!(sap.ushell&&sap.ushell.Container)){if(e&&e.url){m(e.url,"newWindow")}return}var i=sap.ushell.Container.getService("URLParsing");if(!i.isIntentUrl(e.url)){m(e.url,"newWindow")}else{var n=i.parseShellHash(e.url);var r=n.appSpecificRoute?true:false;this.doIntentBasedNavigation(t,n,r,a)}},fnHandleError:function(t){if(t instanceof s){if(t.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){o.show(g.getText("OVP_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:g.getText("OVP_GENERIC_ERROR_TITLE")})}else{o.show(t.getErrorCode(),{title:g.getText("OVP_GENERIC_ERROR_TITLE")})}}},doCrossApplicationNavigation:function(t,e){var a="#"+t.semanticObject+"-"+t.action;if(t.params){var i=this.oCardComponent&&this.oCardComponent.getComponentData();var n=i&&i.appComponent;if(n){var r=n._formParamString(t.params);a=a+r}}var o=this;if(!sap.ushell.Container){return}sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported([a]).done(function(t){if(t[a].supported===true){if(!!e.params){if(typeof e.params=="string"){try{e.params=JSON.parse(e.params)}catch(t){V.error("Could not parse the Navigation parameters");return}}}var i=o.getOwnerComponent().getComponentData();var n=i?i.globalFilter:undefined;var r=n&&n.getUiState({allFilters:false});var d=r?JSON.stringify(r.getSelectionVariant()):"{}";n=JSON.parse(d);var l=P.getFilterPreference(i);n=P.removeFilterFromGlobalFilters(l,n);if(!e.params){e.params={}}if(!!n&&!!n.SelectOptions){for(var p=0;p<n.SelectOptions.length;p++){var g=n.SelectOptions[p].Ranges;if(!!g){var h=[];for(var c=0;c<g.length;c++){if(g[c].Sign==="I"&&g[c].Option==="EQ"){h.push(g[c].Low)}}e.params[n.SelectOptions[p].PropertyName]=h}}}sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(e)}else{var f=new s("NavigationHandler.isIntentSupported.notSupported");o.fnHandleError(f)}}).then(function(){V.error("Could not get authorization from isIntentSupported")})},doIntentBasedNavigation:function(t,e,i,n){if(!n){n=h.constants.inplace}var r=this.oCardComponent&&this.oCardComponent.getComponentData();if(r&&r.appComponent&&r.appComponent.ovpConfig&&r.appComponent.ovpConfig.isTeamsModeActive){n=h.constants.explace}if(sap.ushell&&!sap.ushell.Container){return}var o,s,d,l=t?t.getObject():null;var p=this.getCardPropertiesModel(),g=p.getProperty("/customParams");if(t&&typeof t.getAllData==="function"&&g){d=t.getAllData()}else if(p.getProperty("/staticContent")){d={iStaticLinkListIndex:e.iStaticLinkListIndex,bStaticLinkListIndex:true}}if(l&&l.__metadata){delete l.__metadata}var c=a.getNavigationHandler();if(c){if(e){var r=this.getOwnerComponent().getComponentData();var f=this.getEntityType();o=P.getEntityNavigationParameters(this.oMainComponent,this.getModel(),r,p,f,l,d,t);s={target:{semanticObject:e.semanticObject,action:e.action},appSpecificRoute:e.appSpecificRoute,params:o.sNavSelectionVariant};var v={};if(o.sNavPresentationVariant){v.presentationVariant=o.sNavPresentationVariant}if(i){if(e&&e.semanticObject&&e.action){var u=this.getCardPropertiesModel().getProperty("/staticParameters");s.params=!!u?u:{};this.doCrossApplicationNavigation(e,s)}}else{c.navigate(s.target.semanticObject,s.target.action,s.params,null,this.fnHandleError,v,n)}}}},doAction:function(t,a){this.actionData=e.getActionInfo(t,a,this.getEntityType());if(this.actionData.allParameters.length>0){this._loadParametersForm()}else{P.callFunction(this.actionData)}},getModel:function(){if(this.getView()){return this.getView().getModel()}},getMetaModel:function(){if(this.getModel()){return this.getModel().getMetaModel()}},getCardPropertiesModel:function(){if(!this.oCardPropertiesModel||C(this.oCardPropertiesModel)){this.oCardPropertiesModel=this.getView().getModel("ovpCardProperties")}return this.oCardPropertiesModel},getCardContentContainer:function(){if(!this.cardContentContainer){this.cardContentContainer=this.getView().byId("ovpCardContentContainer")}return this.cardContentContainer},_loadParametersForm:function(){var t=new d;t.setData(this.actionData.parameterData);var a=this;var i=new l("ovpCardActionDialog",{title:this.actionData.sFunctionLabel,afterClose:function(){i.destroy()}}).addStyleClass("sapUiNoContentPadding");var n=new p({text:this.actionData.sFunctionLabel,press:function(t){var n=e.getParameters(t.getSource().getModel(),a.actionData.oFunctionImport);i.close();P.callFunction(a.actionData,n)}});var r=new p({text:"Cancel",press:function(){i.close()}});i.setBeginButton(n);i.setEndButton(r);var o=function(t){var i=e.mandatoryParamsMissing(t.getSource().getModel(),a.actionData.oFunctionImport);n.setEnabled(!i)};var s=e.buildParametersForm(this.actionData,o);i.addContent(s);i.setModel(t);i.open()},setErrorState:function(){var t=this.getOwnerComponent();if(!t||!t.oContainer){return}var e=t.oContainer;var a=this.getCardPropertiesModel();var i={name:"sap.ovp.cards.loading",componentData:{model:this.getView().getModel(),settings:{category:a.getProperty("/category"),title:a.getProperty("/title"),description:a.getProperty("/description"),entitySet:a.getProperty("/entitySet"),state:h.loadingState.ERROR,template:a.getProperty("/template")}}};b.create(i).then(function(a){e.setComponent(a);setTimeout(function(){t.destroy()},0)})},changeSelection:function(t,e,a){if(!e){var n=this.getView().byId("ovp_card_dropdown");t=parseInt(n.getSelectedKey(),10);if(this.getView()){this.getView().getModel("ui").setProperty("/bSelectionChanged",true)}}var r={};if(!e){r=this.getCardPropertiesModel().getProperty("/tabs")[t-1]}else{r=a.tabs[t-1]}var o={cardId:this.getOwnerComponent().getComponentData().cardId,selectedKey:t};for(var s in r){o[s]=r[s]}if(i.checkIfAPIIsUsed(this)){i.recreateCard(o,this.getOwnerComponent().getComponentData())}else{this.getOwnerComponent().getComponentData().mainComponent.recreateCard(o);this.getOwnerComponent().getComponentData().mainComponent.setOrderedCardsSelectedKey(this.getOwnerComponent().getComponentData().cardId,t)}},getItemHeight:function(t,e,a){if(!!t){var i=t.getView().byId(e);var n=0;if(!!i){if(a){if(i.getItems()[0]&&i.getItems()[0].getDomRef()){n=u.getOuterHeight(i.getItems()[0].getDomRef())}}else{if(i.getDomRef()){n=u.getOuterHeight(i.getDomRef())}}}return n}},getEntitySet:function(){if(!this.entitySet){var t=this.getCardPropertiesModel().getProperty("/entitySet");if(a.isODataV4(this.getView().getModel())){this.entitySet=this.getMetaModel()&&this.getMetaModel().getObject("/"+t)}else{this.entitySet=this.getMetaModel().getODataEntitySet&&this.getMetaModel().getODataEntitySet(t)}}return this.entitySet},getEntityType:function(){if(!this.entityType){if(a.isODataV4(this.getView().getModel())){var t=this.getMetaModel();var e=this.getEntitySet();if(t&&e){var i=t.getData().$Annotations[e.$Type];var n={property:t.getObject("/"+e.$Type+"/")};this.entityType=h.merge(true,{},i,n)}}else{if(this.getMetaModel()&&this.getEntitySet()){this.entityType=this.getMetaModel().getODataEntityType(this.getEntitySet().entityType)}}}return this.entityType},_handleKPIHeader:function(){if(a.isODataV4(this.getView().getModel())){this._handleKPIHeaderForODataV4()}else{this._handleKPIHeaderForODataV2()}},_handleKPIHeaderForODataV2:function(){var t,e;if(this.getView()&&this.getView().getDomRef()){t=this.getView().getDomRef().getElementsByClassName("numericContentHbox");e=this.getView().getDomRef().getElementsByClassName("noDataSubtitle")}else{return}if(t||e){var a=this.getKPIBinding();if(a){a.attachDataReceived(function(i){var n=i.getParameter("data")&&i.getParameter("data").results&&i.getParameter("data").results[0];var r=a.getLength();if(t[0]){t[0].style.visibility=null;if(r===0){this._setSubTitleWithUnitOfMeasureForODataV2(n,false);t[0].style.visibility="hidden"}else{this._setSubTitleWithUnitOfMeasureForODataV2(n,true);t[0].style.visibility="visible"}}if(e.length!==0){e[0].style.display="none";if(r===0){e[0].style.display="flex"}}}.bind(this))}}},_handleKPIHeaderForODataV4:function(){var t,e;if(this.getView()&&this.getView().getDomRef()){t=this.getView().getDomRef().getElementsByClassName("numericContentHbox");e=this.getView().getDomRef().getElementsByClassName("noDataSubtitle")}else{return}if(t||e){var a=this.getKPIBinding();if(a){a.attachDataReceived(function(i){var n=i.getSource().getCurrentContexts().map(function(t){return t&&t.getObject()})[0];var r=a.getLength();if(t[0]){t[0].style.visibility=null;if(r===0){t[0].style.visibility="hidden"}else{this._setSubTitleWithUnitOfMeasureForODataV4(n);t[0].style.visibility="visible"}}if(e.length!==0){e[0].style.display="none";if(r===0){e[0].style.display="flex"}}}.bind(this))}}},_setSubTitleWithUnitOfMeasureForODataV2:function(t,e){var i=this.getCardPropertiesModel();if(!!i){var n=i.getData();var r=this.getView().byId("SubTitle-Text");var o="";if(!!r){r.setText(n.subTitle);if(!!n&&!!n.entityType&&!!n.dataPointAnnotationPath&&e){var s=i.getData().entityType;var d=n.dataPointAnnotationPath.split("/");var l=d.length===1?s[n.dataPointAnnotationPath]:s[d[0]][d[1]];var p;if(l&&l.Value&&l.Value.Path){p=l.Value.Path}else if(l&&l.Description&&l.Description.Value&&l.Description.Value.Path){p=l.Description.Value.Path}if(!!p){var h=a.getUnitColumn(p,s);var c;if(!!h&&!!t){o=h;c=t[h]}else{c=a.getUnitColumn(p,s,true);o=c}if(i.getProperty("/bInsightEnabled")){S.setUoMForSubTitle(i.getData().cardId,o)}var f=g.getText("SubTitle_IN");if(!!n.subTitle&&!!f&&!!c){r.setText(n.subTitle+" "+f+" "+c);var v=r.getAggregation("customData");if(v){var u;for(u in v){var C=v[u];if(C.getKey()==="aria-label"){C.setValue(n.subTitle+" "+f+" "+c);break}}}}}}}}},_setSubTitleWithUnitOfMeasureForODataV4:function(t){var e=this.getCardPropertiesModel();if(!!e){var i=e.getData();var n=this.getView().byId("SubTitle-Text");var r="";if(!!n){n.setText(i.subTitle);if(!!i&&!!i.entityType&&!!i.dataPointAnnotationPath){var o=this.getEntityType();var s=i.dataPointAnnotationPath.split("/");var d=s.length===1?o["@"+i.dataPointAnnotationPath]:o["@"+s[0]]["@"+s[1]];var l;if(d&&d.Value&&d.Value.$Path){l=d.Value.$Path}else if(d&&d.Description&&d.Description.Value&&d.Description.Value.$Path){l=d.Description.Value.$Path}var p=this.getMetaModel();var h=this.getEntitySet();var c=w.getEntitySetName(p,h.$Type);if(!!l){var f=a.getUnitColumnForODataV4(l,p,c);var v;if(!!f&&!!t){r=f;v=t[f]}else{v=a.getUnitColumnForODataV4(l,p,c,true);r=v}if(e.getProperty("/bInsightEnabled")){S.setUoMForSubTitle(e.getData().cardId,r)}var u=g.getText("SubTitle_IN");if(!!i.subTitle&&!!u&&!!v){n.setText(i.subTitle+" "+u+" "+v);var C=n.getAggregation("customData");if(C){var m;for(m in C){var y=C[m];if(y.getKey()==="aria-label"){y.setValue(i.subTitle+" "+u+" "+v);break}}}}}}}}},getHeaderHeight:function(){var t=this.getItemHeight(this,"ovpCardHeader"),e=this.getOwnerComponent()?this.getOwnerComponent().getComponentData():null;if(e&&e.appComponent){var a=e.appComponent.getDashboardLayoutUtil(),i=a.getDashboardLayoutModel().getCardById(e.cardId);if(t!==0){i.dashboardLayout.headerHeight=t}}return t},onShowAdditionalCardActions:function(t){var e=t.getSource();t.cancelBubble();if(!this.additionalCardActionsMenu){this.additionalCardActionsMenu=I.load({id:this.getView().getId(),name:"sap.ovp.cards.generic.HeaderActions",controller:this}).then(function(t){this.getView().addDependent(t);return t}.bind(this))}var a=this;this.additionalCardActionsMenu.then(function(t){var i=a.getView(),n=i.byId("ovpAddToInsightButton"),r=n&&n.getEnabled();if(!r&&a.bdataLoadedToEnableAddToInsight){n.setEnabled(true)}t.openBy(e)})},checkIBNNavigationExistsForCard:function(){var t=this.getCardPropertiesModel(),e=this.getEntityType(),a=t.getProperty("/contentFragment"),i=this.getView().getModel();if(t&&e&&a){var n=["sap.ovp.cards.list.List","sap.ovp.cards.v4.list.List","sap.ovp.cards.table.Table","sap.ovp.cards.v4.table.Table"];if(n.includes(a)){var r=D.checkIdentificationAnnotationNavigation(t,e,i),o=D.checkLineItemNavigation(t,e,i);return r||o}if(a==="sap.ovp.cards.charts.analytical.analyticalChart"||a==="sap.ovp.cards.v4.charts.analytical.analyticalChart"){var s=P.checkHeaderNavigationDisabledForAnalyticalCard(t),d=D.checkIdentificationAnnotationNavigation(t,e,i),l=D.checkKPIAnnotationNavigation(t,e),p=s&&d;return p||d||l}}return false},saveGeneratedCardManifest:function(t){var e=this.oCardComponentData.cardId,a=this.oCardComponentData.settings.selectedKey,i=this.getView(),n=i.getModel("ovpCardProperties"),r=n&&n.getProperty("/bInsightDTEnabled");if(r){var o=a?e+"/tab_"+a:e;jQuery.ajax({type:"POST",url:"/editor/card/"+o+"/manifest",headers:{"Content-Type":"application/json"},data:JSON.stringify(t),success:function(t){V.info("Success:",t)},error:function(t){V.error("Error:",t)}})}},refreshCardContent:function(){var t=this.getCardPropertiesModel();if(t){var e=t.getProperty("/template");if(e&&!e.startsWith("sap.ovp.cards")){if(typeof this.onRefresh==="function"){this.onRefresh()}return}}if(this.getKPIBinding()){this.getKPIBinding().refresh()}if(this.getCardItemsBinding()){this.getCardItemsBinding().refresh()}},onCardManage:function(){this.oMainComponent.oManageCardsUtils.onManageCardsMenuButtonPress()}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/Component", ["sap/ovp/cards/generic/base/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.generic.Component",{metadata:{properties:{contentFragment:{type:"string"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.Card"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.Header"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false},enableAddToInsights:{type:"boolean",defaultValue:false},showRefresh:{type:"boolean",defaultValue:true}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/Component", ["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ui/model/resource/ResourceModel","sap/ui/core/mvc/ViewType","sap/base/util/merge","sap/ovp/app/OVPUtils","sap/ovp/app/OVPLogger","sap/ui/core/mvc/XMLView","sap/ui/base/Object","sap/ui/core/Core"],function(e,t,a,n,i,o,r,s,l,p,d,c){"use strict";var u=new l("OVP.generic.base.Component");return e.extend("sap.ovp.cards.generic.base.Component",{metadata:{properties:{contentFragment:{type:"string"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.Card"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.Header"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false},enableAddToInsights:{type:"boolean",defaultValue:false}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},setSelectionVariant:function(e,t){if(/^@/.test(e)){e=e.slice(1)}t.selectionAnnotationPath=e},setPresentationVariant:function(e,t,a){if(/^@/.test(e)){e=e.slice(1)}t.presentationAnnotationPath=e;var n=e.split("/");var i=n.length===1?a[e].Visualizations:a[n[0]][n[1]][n[2]].Visualizations;var o;for(o=0;o<i.length;o++){var r=i[o].AnnotationPath;if(r){if(/^@/.test(r)){r=r.slice(1)}if(/.LineItem/.test(r)){t.annotationPath=r;break}}}for(o=0;o<i.length;o++){var r=i[o].AnnotationPath;if(r){if(/^@/.test(r)){r=r.slice(1)}if(/.Chart/.test(r)){t.chartAnnotationPath=r;break}}}},setDataPointAnnotationPath:function(e,t){if(/^@/.test(e)){e=e.slice(1)}t.dataPointAnnotationPath=e},getCustomPreprocessor:function(){},getPreprocessors:function(e){var i=this.getComponentData(),o=i.settings,l=i.model,p,d,c,u;if(o.description&&!o.subTitle){o.subTitle=o.description}if(l&&a.isODataV4(l)){p=l&&l.getMetaModel();var f="/"+o.entitySet;var d=p.getObject(f);u=p.createBindingContext(f);if(d&&d["$Type"]){c=p.createBindingContext("/"+d["$Type"])}}else if(l&&o.entitySet){p=l&&l.getMetaModel();var v=p.getODataEntitySet(o.entitySet);var h=p.getODataEntitySet(o.entitySet,true);d=p.getODataEntityType(v.entityType);u=p.createBindingContext(h);c=p.createBindingContext(d.$path)}var g=this._getCardPropertyDefaults();var m=this._completeLayoutDefaults(g,o);var y,C;if(i.appComponent&&i.appComponent.getModel("ui")&&i.appComponent.getModel("ui").oData){var b=i.appComponent.getModel("ui").oData;y=b.showDateInRelativeFormat;C=b.disableTableCardFlexibility}else{if(i.showDateInRelativeFormat){y=i.showDateInRelativeFormat}if(i.disableTableCardFlexibility){C=i.disableTableCardFlexibility}}if(i.ovpCardsAsApi&&i.parentView&&typeof i.parentView.getViewName==="function"&&i.parentView.getViewName()!=="sap.ovp.cards.rta.SettingsDialog"){i.settings.enableAddToInsights=false}var P=i&&i.appComponent&&i.appComponent.ovpConfig||{};var D=true;if(i.ovpCardsAsApi){D=false}var V=P.bInsightDTEnabled||P.bInsightRTEnabled||false;if(P.isTeamsModeActive){V=false}var I={metaModel:p,entityType:d,webkitSupport:n.browser.webkit,layoutDetail:m&&m.cardLayout?m.cardLayout.containerLayout:"fixed",bInsightDTEnabled:P.bInsightDTEnabled||false,bInsightRTEnabled:P.bInsightRTEnabled||false,bInsightEnabled:V,showDateInRelativeFormat:y,disableTableCardFlexibility:C,cardId:i.cardId,enableAdditionalActionsManageCards:D};if(!!i&&!!i.cardId){var A=i.mainComponent;var T=null;if(!!A){T=A._getCardFromManifest(i.cardId)?A._getCardFromManifest(i.cardId).template:null}else{T=i.template}if(!!T){I.template=T}var M=["sap.ovp.cards.v4.charts.analytical","sap.ovp.cards.v4.table","sap.ovp.cards.v4.list"];if(P.enableV4Insight&&M.includes(T)){i.settings.enableAddToInsights=true}}g.densityStyle=a._setCardpropertyDensityAttribute();if(i.errorReason){var S=i.errorReason;var L=S.getParameters?S.getParameters():S.mParameters;var w="sap-icon://message-error";if(L&&L.response){g.errorStatusCode=L.response.statusCode;g.errorStatusText=L.response.statusText;g.responseText=L.response.responseText;g.sMessageIcon=L.response.sIcon?L.response.sIcon:w}}if(m){I.cardLayout=m.cardLayout}if(g.state!=="Error"){if(o&&o.kpiAnnotationPath){var O=d[o.kpiAnnotationPath];var R=g.contentFragment;if(O&&["sap.ovp.cards.charts.analytical.analyticalChart","sap.ovp.cards.v4.charts.analytical.analyticalChart","sap.ovp.cards.charts.smart.analyticalChart"].includes(R)){var x=O.SelectionVariant&&O.SelectionVariant.Path?O.SelectionVariant.Path:o.kpiAnnotationPath+"/SelectionVariant";if(x){this.setSelectionVariant(x,o)}var F=O.Detail&&O.Detail.DefaultPresentationVariant&&O.Detail.DefaultPresentationVariant.Path?O.Detail.DefaultPresentationVariant.Path:o.kpiAnnotationPath+"/Detail/DefaultPresentationVariant";if(F){this.setPresentationVariant(F,o,d)}var B=O.DataPoint&&O.DataPoint.Path?O.DataPoint.Path:o.kpiAnnotationPath+"/DataPoint";if(B){this.setDataPointAnnotationPath(B,o)}}}else if(o&&o.selectionPresentationAnnotationPath){var k=d[o.selectionPresentationAnnotationPath];if(k){var x=k.SelectionVariant&&k.SelectionVariant.Path;if(x){this.setSelectionVariant(x,o)}var F=k.PresentationVariant&&k.PresentationVariant.Path;if(F){this.setPresentationVariant(F,o,d)}}}}if(i.ovpCardsAsApi&&o.ignoreSelectionVariant){o.selectionAnnotationPath="";var _=[];for(var E=0;!!o.filters&&E<o.filters.length;E++){_.push({id:"headerFilterText--"+(E+1),index:E})}o.idForExternalFilters=_}if(!!I.entityType&&!!o.selectionAnnotationPath&&!!I.entityType[o.selectionAnnotationPath]){var U=I.entityType[o.selectionAnnotationPath].SelectOptions;for(var j=0;!!U&&j<U.length;j++){U[j].id="headerFilterText--"+(j+1)}I.entityType[o.selectionAnnotationPath].SelectOptions=U}if((I.template==="sap.ovp.cards.linklist"||I.template==="sap.ovp.cards.v4.linklist")&&!!o.staticContent){for(var N=0;N<o.staticContent.length;N++){o.staticContent[N].id="linkListItem--"+(N+1)}if(o.staticContent){g.showRefresh=false}}else if(I.template==="sap.ovp.cards.charts.analytical"||I.template==="sap.ovp.cards.v4.charts.analytical"){o.dataStep=o.dataStep?o.dataStep:10}g=s.merge(true,{},I,g,o);var H=new t(g);var K={xml:{bindingContexts:{entityType:c,entitySet:u},models:{device:a.deviceModel,entityType:p,entitySet:p,ovpMeta:p,ovpCardProperties:H,ovplibResourceBundle:e,ovpConstants:a.ovpConstantModel},ovpCardProperties:H,dataModel:l,_ovpCache:{}}};return r({},this.getCustomPreprocessor(),K)},_completeLayoutDefaults:function(e,t){var a={},n=this.getComponentData(),i=null,o=null;if(n.appComponent){i=n.appComponent.getOvpConfig()}if(!i){return null}if(i.containerLayout==="resizable"&&n.cardId&&e.contentFragment!=="sap.ovp.cards.quickview.Quickview"){o=n.appComponent.getDashboardLayoutUtil();var r=n.cardId;var s=o.aCards.filter(function(e){return e.id===r});a.cardLayout=s[0].dashboardLayout;a.cardLayout.containerLayout=i.containerLayout;a.cardLayout.iRowHeightPx=o.ROW_HEIGHT_PX;a.cardLayout.iCardBorderPx=o.CARD_BORDER_PX;a.cardLayout.headerHeight=s[0].dashboardLayout.headerHeight}return a},_getCardPropertyDefaults:function(){var e={};var t=this.getMetadata().getAllProperties();var a;for(var n in t){a=t[n];if(a.defaultValue!==undefined){e[a.name]=a.defaultValue}}return e},getOvplibResourceBundle:function(){if(!this.ovplibResourceBundle){var e=c.getLibraryResourceBundle("sap.ovp");this.ovplibResourceBundle=e?new i({bundleUrl:e.oUrlInfo.url}):null}return this.ovplibResourceBundle},_getCacheKeys:function(){var e=this.getComponentData&&this.getComponentData();if(e.ovpCardsAsApi){return}if(e.appComponent&&!d.isA(e.appComponent,"sap.ui.base.ManagedObject")){return}var t=e&&e.settings&&e.settings.isObjectStream;if(t){return}var a=e&&e.model;if(a){var n=[];if(a.metadataLoaded&&typeof a.metadataLoaded==="function"){var i=a.metadataLoaded().then(function(e){var t;if(e&&e.lastModified){t=new Date(e.lastModified).getTime()+""}else{u.error("No valid cache key segment last modification date provided by the OData Model");t=(new Date).getTime()+""}return t});n.push(i)}if(a.annotationsLoaded&&typeof a.metadataLoaded==="function"){var o=a.annotationsLoaded().then(function(e){var t=0;if(e){for(var a=0;a<e.length;a++){if(e[a].lastModified){var n=new Date(e[a].lastModified).getTime();if(n>t){t=n}}}}if(t===0){u.error("No valid cache key segment last modification date provided by OData annotations");t=(new Date).getTime()}return t+""});n.push(o)}return n}},createContent:function(){var e=this.getComponentData&&this.getComponentData();var t=e.model;var n;var i;var r=e&&e.mainComponent;var s=r&&r.oModelViewMap;var l=e&&e.modelName;var d=function(){if(t&&l){t.bIncludeInCurrentBatch=false;if(s&&l&&s[l]&&s[l][e.cardId]){delete s[l][e.cardId];if(Object.keys(s[l]).length>0){t.bIncludeInCurrentBatch=true}}}};if(e&&e.mainComponent){n=e.mainComponent._getOvplibResourceBundle()}else{n=this.getOvplibResourceBundle()}i=this.getPreprocessors(n);var c={preprocessors:i,type:o.XML,viewName:a.isODataV4(t)?"sap.ovp.cards.v4.generic.Card":"sap.ovp.cards.generic.Card"};var u=this._getCacheKeys();if(u&&u.length&&u.length>0){c.async=true;c.cache={keys:u}}var f=this._getCardPropertyDefaults().state;var v=e.cardId+(f?f:"Original");if(!f){v=v+(e.settings.selectedKey?"_Tab"+e.settings.selectedKey:"")}if(t&&t.bUseBatch&&!c.async){d()}if(e.appComponent&&typeof e.appComponent.createId==="function"){v=e.appComponent.createId(v)}var h=new p(e.containerId==="dialogCard"?undefined:v,c);if(c.async){var g=h.onControllerConnected;h.onControllerConnected=function(){if(t&&t.bUseBatch){d()}g.apply(h,arguments)}}h.setModel(t);if(e.i18n){h.setModel(e.i18n,"@i18n")}h.setModel(i.xml.ovpCardProperties,"ovpCardProperties");h.setModel(n,"ovplibResourceBundle");return h}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/linklist/BaseLinklist.controller", ["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/m/List","sap/ui/core/ResizeHandler","sap/m/MessageToast","sap/m/Image","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ovp/app/OVPLogger","sap/ui/util/openWindow","sap/ovp/cards/NavigationHelper"],function(t,jQuery,e,i,s,a,r,n,o,d,h,l,g){"use strict";var c=27,f=8,p=8,u=8,v="ovpLinkList",I="pictureCarousel",L="ovpCardHeader",C="sapMCrslActive";var m={onBeforeRendering:function(t){this.itemOnBeforeRendering(t)}};var y={onAfterRendering:function(t){this.itemOnAfterRendering(t)}};var P=new h("ovp.cards.generic.base.linklist.BaseLinklist");return t.extend("sap.ovp.cards.generic.base.linklist",{onInit:function(){t.prototype.onInit.apply(this,arguments);this.oListRow=this.byId("ovpListRow");if(this.oListRow){this.oListRow.addStyleClass("ovpListRowNoData")}this._bInitialLoad=true;this._bListenerAttached=false;this._bListeningPopOver=false},onBeforeRendering:function(t){var e=this.getCardPropertiesModel();if(e.getProperty("/listFlavor")==="standard"&&!e.getProperty("/staticContent")){var i=this.byId("ovpCLI");if(i){i.addEventDelegate(m,this)}}},onAfterRendering:function(i){t.prototype.onAfterRendering.apply(this,arguments);this.attachingListenerToTheEventRefresh();var s=this.getCardPropertiesModel();var a=s.getProperty("/cardLayout/rowSpan");var r=s.getProperty("/cardLayout/colSpan");switch(s.getProperty("/listFlavor")){case"standard":if(s.getProperty("/staticContent")){if(r&&a){if(!this._bInitialLoad&&this._aLinkListIds){this._mergeAllTheDataInOneList()}if(a===1){this._aLinkListIds=[v];this._setListColumnWidthInStandardCard(1)}else{this._itemOnEventBuildStandard(s,r,a,true)}}else{this._aLinkListIds=[v];this._setListColumnWidthInStandardCard(1)}}break;case"carousel":var n=this.byId(I);if(n.getId().indexOf(".")!==-1){var o=n.$();o.off("beforeSlide");o.on("beforeSlide",this.onBeforeSlide);o.trigger("beforeSlide",[1,1])}if(s.getProperty("/staticContent")){if(a&&!(!s.getProperty("/defaultSpan")&&s.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(a)}else{this._setListHeightInCarouselCard(-1)}this._setCarouselImageProperties()}else{n.addEventDelegate(y,this)}break;default:break}if(!e.checkIfAPIIsUsed(this)&&s.getProperty("/layoutDetail")==="resizable"){var d=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var h=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var l=document.getElementById(h);d.dashboardLayout.showOnlyHeader?l.classList.add("sapOvpMinHeightContainer"):l.classList.remove("sapOvpMinHeightContainer")}},onBeforeSlide:function(t,e,i){if(t.target!=this){return}var s=this.id+"-pageIndicator",a=document.getElementById(s);var r=a.querySelector("[data-slide='"+e+"']");r.classList.remove(C);r=a.querySelector("[data-slide='"+i+"']");r.classList.add(C)},getCardItemsBinding:function(){var t=this.getView().byId("ovpLinkList");var e=this.getView().byId("pictureCarousel");if(t){return t.getBinding("items")}else if(e){return e.getBinding("pages")}else{return null}},attachingListenerToTheEventRefresh:function(){var t=this.getCardItemsBinding();var e=this.getCardPropertiesModel();if(t){if(!this._bListenerAttached){t.attachRefresh(function(){if(this._aLinkListIds){for(var t=1;t<this._aLinkListIds.length;t++){var e=this.byId(this._aLinkListIds[t]);var i=e.getItems().length;e.getItems().splice(0,i);e.destroy()}this._aLinkListIds.splice(0,this._aLinkListIds.length)}if(this._oListRest){this._oListRest.destroy()}}.bind(this));t.attachChange(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter();if(e.getProperty("/listFlavor")==="carousel"){var i=this.byId(I);i.addEventDelegate(y,this)}if(e.getProperty("/listFlavor")==="standard"){var s=t.getLength();if(s===0){var a=this.byId(v).$().parent();a.width("100%")}}}.bind(this))}else if(this._aLinkListIds){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter()}this._bListenerAttached=true}},settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter:function(){if(this._aLinkListIds){var t=this.getCardPropertiesModel();var e=t.getProperty("/cardLayout/rowSpan");if(!t.getProperty("/defaultSpan")&&t.getProperty("/cardLayout/autoSpan")){e=this.getSpansWhenNoDefaultSpanMentioned()}var i=t.getProperty("/cardLayout/colSpan");if(e){this._setListHeightInStandardCard(e)}if(i){this._setListColumnWidthInStandardCard(this._iVisibleColums)}else{this._setListColumnWidthInStandardCard(1)}}},itemOnBeforeRendering:function(t){var e,i=this.getCardPropertiesModel();switch(i.getProperty("/listFlavor")){case"standard":if(!i.getProperty("/defaultSpan")&&!i.getProperty("/staticContent")&&i.getProperty("/cardLayout/autoSpan")){e=this.getSpansWhenNoDefaultSpanMentioned()}else{e=i.getProperty("/cardLayout/rowSpan")}var s=i.getProperty("/cardLayout/colSpan");var a=this.byId(v);var r=a.getItems();for(var n=0;n<r.length;n++){r[n].removeEventDelegate(m)}if(this._bInitialLoad){this._itemOnEventBuildStandard(i,s,e,true)}else{this._itemOnEventBuildStandard(i,s,e,false)}break;case"carousel":P.info("FYI: currently nothing special to handle here");break;default:break}},getSpansWhenNoDefaultSpanMentioned:function(){var t=this.getCardPropertiesModel();var e=t.getProperty("/staticContent");var i=e&&e.length||this.getCardItemsBinding()&&this.getCardItemsBinding().getLength()||0;var s=e?this.getItemHeight(this,v,true):t.getProperty("/cardLayout/itemHeight");var a=0;var r=this.byId(L);if(r){a=r.$().outerHeight()}var n=t.getProperty("/cardLayout/iRowHeightPx");return Math.ceil((s*Math.min(i,6)+(a+p+u))/n)},itemOnAfterRendering:function(t){var e=this.getCardPropertiesModel();var i=e.getProperty("/cardLayout/rowSpan");var s=e.getProperty("/cardLayout/colSpan");switch(e.getProperty("/listFlavor")){case"standard":try{var a=this.byId(v);var r=a.getItems(this._aLinkListIds[this._aLinkListIds.length-1]);r[r.length-1].removeEventDelegate(y)}catch(t){P.info("FYI: Unable to remove the delagted event at the last item of the last list")}if(!e.getProperty("/defaultSpan")&&e.getProperty("/cardLayout/autoSpan")){i=this.getSpansWhenNoDefaultSpanMentioned()}if(i){this._setListHeightInStandardCard(i)}if(s){this._setListColumnWidthInStandardCard(this._iVisibleColums)}else{this._setListColumnWidthInStandardCard(1)}break;case"carousel":try{var n=this.byId(I);n.removeEventDelegate(y)}catch(t){P.info("FYI: Unable to remove the delagted event on the carousel")}if(i&&!(!e.getProperty("/defaultSpan")&&e.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(i)}else{this._setListHeightInCarouselCard(-1)}this._setCarouselImageProperties();break;default:break}this._bInitialLoad=false},_itemOnEventBuildStandard:function(t,e,i,a){var r;var n=this.byId(v);var o=this.getView().byId(this.getView().getId()+"--RestOfData");if(o){o.destroy()}if(a&&this._oListRest===undefined){this._oListRest=new s(this.getView().getId()+"--RestOfData",{})}this._aLinkListIds=[v];this._iAvailableItems=n.getItems().length;var d=t.getProperty("/cardLayout/items");if(d!==undefined){this._iNoOfItemsPerColumn=d;r=d;this._iVisibleColums=1}else{var h=t.getProperty("/staticContent")?this.getItemHeight(this,v,true):t.getProperty("/cardLayout/itemHeight");var l=this._getListHeightInStandardCard(i);this._iNoOfItemsPerColumn=Math.floor(l/h);var g=Math.ceil(this._iAvailableItems/this._iNoOfItemsPerColumn);this._iVisibleColums=Math.min(g,e);r=this._iVisibleColums*this._iNoOfItemsPerColumn}if(r>this._iAvailableItems){r=this._iAvailableItems}else{for(var c=r;c<this._iAvailableItems;c++){n.getItems()[c].setVisible(false)}}if(this._iVisibleColums>1){var f=this.byId("ovpListRow");var p=this._iNoOfItemsPerColumn;var u=0;for(var I=this._iNoOfItemsPerColumn;I<r;I++){if(p>=this._iNoOfItemsPerColumn){p=0;u++;var L=v+u;var C=new s(this.getView().getId()+"--"+L,{showSeparators:n.getProperty("showSeparators")});this._aLinkListIds.push(L);if(n.hasStyleClass("_iNoOfItemsPerColumnPaddingCozy")){C.addStyleClass("sapOvpLinkListStandardPaddingCozy")}else{C.addStyleClass("sapOvpLinkListStandardPaddingCompact")}f.addItem(C)}C.addItem(n.getItems()[this._iNoOfItemsPerColumn]);p++}if(C){var m=C.getItems();m[m.length-1].addEventDelegate(y,this)}}else{if(a){this.itemOnAfterRendering(null)}else{var P=n.getItems();P[P.length-1].addEventDelegate(y,this)}}},resizeCard:function(t,e){var i=this.getCardPropertiesModel();i.setProperty("/cardLayout/rowSpan",t.rowSpan);i.setProperty("/cardLayout/colSpan",t.colSpan);i.setProperty("/cardLayout/itemHeight",e.itemHeight);switch(i.getProperty("/listFlavor")){case"standard":this._resizeStandard(t,i);break;case"carousel":this._resizeCarousel(t);break;default:break}if(this.resizeHandlerId){a.deregister(this.resizeHandlerId);this.resizeHandlerId=null}var s=this.getView().byId("ovpCardContentContainer").getDomRef();if(s){if(t.showOnlyHeader){s.classList.add("sapOvpContentHidden")}else{s.classList.remove("sapOvpContentHidden")}}},_mergeAllTheDataInOneList:function(){var t=this._aLinkListIds.length;var e=this.getView().byId("ovpLinkList");var i=-1;for(var s=0;s<e.getItems().length;s++){if(!e.getItems()[s].getVisible()){i=s;break}}for(var a=1;a<t;a++){var r=this.getView().byId(this._aLinkListIds[a]);var n=r.getItems().length;for(var o=0;o<n;o++){if(i===-1){e.addItem(r.getItems()[0])}else{e.insertItem(r.getItems()[0],i);i++}}r.destroy()}},_resizeStandard:function(t,e){if(this._aLinkListIds){this._mergeAllTheDataInOneList();var i=this.getView().byId("ovpLinkList");this._aLinkListIds.splice(0,this._aLinkListIds.length);var s=this._oListRest.getItems().length;try{for(var a=0;a<s;a++){i.addItem(this._oListRest.getItems()[0])}}catch(t){P.info("Error: "+t)}for(var r=0;r<i.getItems().length;r++){i.getItems()[r].setVisible(true)}if(!i){var n=this.byId(v).$().parent();n.width("100%");var o=e.getProperty("/cardLayout/rowSpan");if(o){this._setListHeightInStandardCard(o)}}var d=i.getBindingInfo("items");var h=e.getProperty("/staticContent")?this.getItemHeight(this,v,true):e.getProperty("/cardLayout/itemHeight");var l=this._getListHeightInStandardCard(t.rowSpan);var g=Math.floor(l/h)*t.colSpan;this._bInitialLoad=false;jQuery(this.getView().$()).find(".sapOvpWrapper").css({height:l+"px"});if(d){if(g>this._iAvailableItems&&d.length<=this._iAvailableItems){d.length=g;i.bindItems(d);this._bListenerAttached=false;this.attachingListenerToTheEventRefresh()}else{this._itemOnEventBuildStandard(e,t.colSpan,t.rowSpan,false)}}else{this._itemOnEventBuildStandard(e,t.colSpan,t.rowSpan,false)}}},_resizeCarousel:function(t){this._setListHeightInCarouselCard(t.rowSpan);this._setCarouselImageProperties()},_setListHeightInCarouselCard:function(t){var e=0,i=this.byId(I);if(t!==-1){var s=0;var a=this.byId(L);if(a){s=a.$().outerHeight()}var r=this.getCardPropertiesModel();var n=r.getProperty("/cardLayout/iRowHeightPx");e=t*n-(s+c+f);i.$().height(e+16)}else{var o=i.$().width(),d=null,h=i.getPages(),l=0;for(var g=0;g<h.length;g++){d=h[g];if(d&&d.getItems().length>1){l=Math.max(l,d.getItems()[0].$().outerHeight())}}var p=i.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight();e=o+(l+p);i.$().height(e)}},_setCarouselImageProperties:function(){var t=this.byId(I),e=t.getPages(),i=t.$().height(),s=e.length>1?t.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight():0,a=null,r=null,o=0,d,h;for(var l=0;l<e.length;l++){a=e[l];if(a){d=a.getAggregation("items")&&a.getItems()[0];if(d){o=d.hasStyleClass("sapOvpCarouselContentHeader")?d.$().outerHeight():0;h=a.getItems()[a.getItems().length-1];r=h.getAggregation("items")&&h.getItems()[0];if(r instanceof n){this._setCarouselImageHeight(r,i-o-s)}}}}},_setCarouselImageHeight:function(t,e){var i=t.getDomRef().naturalHeight;if(i!==0){i<e?t.setHeight(i+"px"):t.setHeight(e+"px")}},_setListHeightInStandardCard:function(t){var e=0;var i;var s;i=this.byId(v);if(i){e=this._getListHeightInStandardCard(t);s=i.$().parent();s.height(e)}if(this._aLinkListIds){for(var a=1;a<this._aLinkListIds.length;a++){i=this.byId(this._aLinkListIds[a]);e=this._getListHeightInStandardCard(t);s=i.$().parent();s.height(e)}}},_getListHeightInStandardCard:function(t){var e=0;var i=this.getCardPropertiesModel();if(t){var s=0;var a=this.byId(L);if(a){s=a.$().outerHeight()}var r=i.getProperty("/cardLayout/iRowHeightPx");e=t*r-(s+p+u)}return e},_setListColumnWidthInStandardCard:function(t){var e;var i;var s="100%";if(this._aLinkListIds){if(this._aLinkListIds.length>1){for(var a=0;a<this._aLinkListIds.length;a++){e=this.byId(this._aLinkListIds[a]);i=e.$().parent();s=100/t+"%";i.width(s)}}else{e=this.byId(this._aLinkListIds[0]);if(e){i=e.$().parent();i.width(s)}}}},onLinkListItemPressLocalData:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("targetUri");var a=t.getSource().data("openInNewWindow");var r=this.getView().getModel("ovpCardProperties").getProperty("/baseUrl");if(s){s=this.buildUrl(r,s);if(a==="true"){l(s,"newWindow")}else{window.location.href=s}}}},onLinkListActionPressLocalData:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:this.onFuImpSuccess.bind(this),error:this.onFuImpFailed.bind(this)})}},onFuImpSuccess:function(t){r.show(o.getText("Toast_Action_Success"),{duration:3e3})},onFuImpFailed:function(t){r.show(o.getText("Toast_Action_Error"),{duration:3e3})},onLinkListItemPress:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=g.getEntityNavigationEntries(t.getSource().getBindingContext(),this.getModel(),this.getEntityType(),this.getCardPropertiesModel(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(t.getSource().getBindingContext(),a[0],s)}},onLinkPopover:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s;switch(this.getCardPropertiesModel().getProperty("/listFlavor")){case"standard":s=t.getSource().getParent().getAggregation("items")[0];break;case"carousel":s=t.getSource().getParent().getAggregation("items")[0];break;default:break}var a=this.getCardPropertiesModel();if(a.getProperty("/listFlavor")==="carousel"){var r=this.byId(I);r.addEventDelegate(y,this)}s.bindElement(t.getSource().getBindingContext().getPath());s.openBy(t.getSource());if(!this._bListeningPopOver){s.attachAfterOpen(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter()}.bind(this))}this._bListeningPopOver=true}},onLinkListLineItemUrl:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s,a="com.sap.vocabularies.UI.v1.LineItem",r;if(i.isODataV4(this.getView().getModel())){r=this.entityType["@"+a][0].Url}else{r=this.entityType[a][0].Url}if(r.hasOwnProperty("String")){s=r.String}else{var n=g.getEntityNavigationEntries(t.getSource().getBindingContext(),this.getModel(),this.getEntityType(),this.getCardPropertiesModel(),a)[0];s=n.url}if(s){window.location.href=s}else{P.info("LinkList Standard Card: No Navigation on line item")}}},onLinkNavigationSingleTarget:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=g.getEntityNavigationEntries(t.getSource().getBindingContext(),this.getModel(),this.getEntityType(),this.getCardPropertiesModel(),undefined);this.doNavigation(t.getSource().getBindingContext(),a[0],s)}},onLinkNavigation:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{if(sap.ushell.Container.getService("CrossApplicationNavigation")){var s=t.getSource().getBindingContext();if(s.getProperty("SemanticObject")){var a={target:{semanticObject:s.getProperty("SemanticObject"),action:s.getProperty("SemanticAction")}};sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(a)}}}},buildUrl:function(t,e){if(e.lastIndexOf(t,0)===0||e.indexOf("://")>0){return e}else if(e.lastIndexOf("/",0)===0){return t+e}else{return t+"/"+e}},onLinkListActionPress:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:this.onFuImpSuccess.bind(this),error:this.onFuImpFailed.bind(this)})}},onLinkListSemanticObjectPressLocalData:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=parseInt(t.getSource().data("contentRowIndex"),10);this._oStaticContent=this.getCardPropertiesModel().getProperty("/staticContent");if(this._oStaticContent[a].semanticObject&&this._oStaticContent[a].action){var n={semanticObject:this._oStaticContent[a].semanticObject,action:this._oStaticContent[a].action,iStaticLinkListIndex:a};this.doIntentBasedNavigation(null,n,false,s)}else{r.show(o.getText("Toast_Action_Error"),{duration:3e3})}}},onExit:function(){t.prototype.onExit.apply(this,arguments)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/linklist/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.generic.base.linklist.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.linklist.LinkList"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.base.linklist.BaseLinklist"},communicationPath:{type:"string",defaultValue:"com.sap.vocabularies.Communication.v1.Contact"},headerAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.HeaderInfo"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},getCustomPreprocessor:function(){}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/list/BaseList.controller", ["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/cards/AnnotationHelper","sap/ovp/app/OVPUtils","sap/ovp/app/OVPLogger","sap/ovp/cards/NavigationHelper","sap/ovp/cards/Integration/IntegrationCard","sap/m/MessageBox","sap/ovp/app/resources","sap/ovp/cards/ViewCacheHelper"],function(e,jQuery,t,a,i,n,s,o,r,d,p,g,l){"use strict";var h=new o("ovp.cards.generic.base.list.BaseList");return e.extend("sap.ovp.cards.generic.base.list",{counter:0,minMaxModel:{},bdataLoadedToEnableAddToInsight:false,onInit:function(){e.prototype.onInit.apply(this,arguments);this.counter=0;this.minMaxModel=new t;this.minMaxModel.setData({minValue:0,maxValue:0});this.getView().setModel(this.minMaxModel,"minMaxModel")},onContactDetailsLinkPress:function(e){var t,a,i;a=e.getSource();t=a.getParent().getAggregation("items")[0];i=a.getBindingContext();if(!i){return}t.bindElement(i.getPath());t.openBy(a)},onAfterRendering:function(){e.prototype.onAfterRendering.apply(this,arguments);var t=this.getCardPropertiesModel().getProperty("/imageSupported");var i=this.getCardPropertiesModel().getProperty("/densityStyle");if(t){var n=this.byId("ovpList");n.attachUpdateFinished(function(){this._addImageCss(i)}.bind(this))}if(!a.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var s=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var o=Math.max(s.dashboardLayout.headerHeight,this.getHeaderHeight());var r=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var d=document.getElementById(r);if(!s.dashboardLayout.autoSpan){d.getElementsByClassName("sapOvpWrapper")[0].style.height=s.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX-(o+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}if(s.dashboardLayout.showOnlyHeader){d.classList.add("sapOvpMinHeightContainer")}}var p=this.getCardItemsBinding();if(p&&p.getPath()){p.attachDataReceived(this.onDataReceived.bind(this))}},onDataReceived:function(){this.bdataLoadedToEnableAddToInsight=true},_addImageCss:function(e){var t=this.byId("ovpList");var a=t.getItems();var i=false;var n=t.getDomRef().getAttribute("class");if(e==="cozy"){n=n+" sapOvpListImageCozy"}else{n=n+" sapOvpListImageCompact"}t.getDomRef().setAttribute("class",n);a.forEach(function(e){if(e.getIcon().indexOf("icon")!=-1){i=true}});a.forEach(function(t){var a=t.getDomRef();var n;if(a&&a.children[0]&&a.children[0].children[0]){n=a.children[0].children[0]}var s=t.getDescription();var o=t.getIcon();var r=i;var d=t.getTitle();var p=d.split(" ").map(function(e){return e?e[0].toUpperCase():""}).join("").substring(0,2);if(o!=""&&o.indexOf("icon")==-1){i=false}if(i&&a.children[0]){jQuery(a.children[0]).addClass("sapOvpIconListItem")}else if(a.children[0]){jQuery(a.children[0]).addClass("sapOvpImageListItem")}if(n&&e==="cozy"&&i===false){if(n){var g=n.getAttribute("class");g=g+" sapOvpImageCozy";n.setAttribute("class",g)}}var l="";if(i===true&&s===""){l=e==="compact"?"sapOvpListWithIconNoDescCompact":"sapOvpListWithIconNoDescCozy"}else if(i===false&&s===""){l=e==="compact"?"sapOvpListWithImageNoDescCompact":"sapOvpListWithImageNoDescCozy"}else{l=e==="compact"?"sapOvpListWithImageIconCompact":"sapOvpListWithImageIconCozy"}t.addStyleClass(l);if(a&&a.children[0]&&o===""&&a.children[0].id!=="ovpIconImagePlaceHolder"){var h=document.createElement("div");h.innerText=p;h.setAttribute("id","ovpIconImagePlaceHolder");h.className=i===true?"sapOvpIconPlaceHolder":"sapOvpImagePlaceHolder";if(i===false&&e==="cozy"){h.className=h.className+" sapOvpImageCozy"}a.insertBefore(h,a.children[0])}i=r})},onListItemPress:function(e){var t=s.bCRTLPressed?s.constants.explace:s.constants.inplace;s.bCRTLPressed=false;if(a.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(e)}}else{var n=r.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getModel(),this.getEntityType(),this.getCardPropertiesModel(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),n[0],t)}},getCardItemsBinding:function(){var e=this.getView().byId("ovpList");return e&&e.getBinding("items")},_getMinMaxObjectFromContext:function(e){this.counter++;var t=this.getModel();var a=i.isODataV4(t);var s=a?this.getEntitySet():this.getEntityType(),o=this.getCardPropertiesModel().getProperty("/annotationPath"),o=a?"@"+o:o,r=a?this.getMetaModel().getData(o).$Annotations[s.$Type][o]:s[o],d=a?this.getMetaModel().createBindingContext("/"+s.$Type+"/@"+o):this.getMetaModel().createBindingContext(s.$path+"/"+o),p={minValue:0,maxValue:0};var g=n.isFirstDataPointPercentageUnit(d,r);if(g){p.minValue=0;p.maxValue=100;p.isPercentage=true;return p}var l=n.getFirstDataPointValue(d,r),h=this.getView().byId("ovpList"),c=h.getBinding("items"),v=c.getCurrentContexts();for(var m=0;e?m<e:m<v.length;m++){var u=a?v[m].getValue(l):t.getOriginalProperty(l,v[m]),f=parseFloat(u,10);if(f<p.minValue){p.minValue=f}else if(f>p.maxValue){p.maxValue=f}}return p},_updateMinMaxModel:function(e){var t=this._getMinMaxObjectFromContext(e);this.minMaxModel.setData({minValue:t.minValue,maxValue:t.maxValue,isPercentage:t.isPercentage||false});this.minMaxModel.refresh();return t},returnBarChartValue:function(e){this._updateMinMaxModel();var t=parseFloat(e,10);return t},getCardItemBindingInfo:function(){var e=this.getView().byId("ovpList");return e.getBindingInfo("items")},resizeCard:function(e,t){var a,i,n;try{var s=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),o=this.getCardItemBindingInfo(),r=this.getHeaderHeight(),d=this.getView(),p=d.byId("ovpCardContentContainer").getDomRef();if(e.showOnlyHeader){p.classList.add("sapOvpContentHidden");a=0}else{p.classList.remove("sapOvpContentHidden");n=r+t.dropDownHeight;i=e.rowSpan*e.iRowHeightPx-n;a=Math.abs(Math.floor(i/t.itemHeight));s.style.height=e.rowSpan*e.iRowHeightPx+"px"}p.style.height=e.rowSpan*e.iRowHeightPx-(r+2*e.iCardBorderPx)+"px";if(a!==o.length){o.length=a;e.noOfItems=o.length;this._updateMinMaxModel(o.length);this.getCardItemsBinding().refresh();var g=this.getCardPropertiesModel().getProperty("/tabs");if(g&&g.length>0){l.clearViewCacheForTabbedCard(d)}}else{this._handleCountHeader()}}catch(e){h.warning("OVP resize: "+this.cardId+" catch "+e.toString())}},onShowInsightCardPreview:function(){var e=this.getView();var t=e.getController();var a=t.oCardComponentData;var i=this;if(this.checkIBNNavigationExistsForCard()){d.showCard({entitySet:t.entitySet,entityType:t.entityType,cardComponentName:"List",cardComponentData:a,cardComponent:t.oCardComponent,itemBindingInfo:i.getCardItemBindingInfo(),view:e}).then(function(e){i.saveGeneratedCardManifest(e)})}else{p.error(g.getText("INT_IBN_NAVIGATION_NOT_FOUND_ERROR_MESSAGE_TEXT"))}},onExit:function(){e.prototype.onExit.apply(this,arguments)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/list/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.generic.base.list.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.list.List"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.base.list.BaseList"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:true}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.suite.ui.microchart"],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/table/BaseTable.controller", ["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/OVPUtils","sap/ovp/app/OVPLogger","sap/ui/core/Core","sap/ovp/cards/Integration/IntegrationCard","sap/m/MessageBox","sap/ovp/app/resources","sap/ovp/cards/NavigationHelper","sap/ovp/cards/ViewCacheHelper"],function(e,jQuery,t,a,i,o,n,s,r,d,g,h){"use strict";var p=new o("ovp.cards.generic.base.table.BaseTable");return e.extend("sap.ovp.cards.generic.base.table",{bdataLoadedToEnableAddToInsight:false,onInit:function(){e.prototype.onInit.apply(this,arguments)},onColumnListItemPress:function(e){var o=i.bCRTLPressed?i.constants.explace:i.constants.inplace;i.bCRTLPressed=false;if(t.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e)}}else{var n=g.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getModel(),this.getEntityType(),this.getCardPropertiesModel(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),n[0],o)}},onContactDetailsLinkPress:function(e){if(this.oPopover){this.oPopover.setVisible(false)}var t,a;t=e.getSource();this.oPopover=t.getParent().getAggregation("items")[0];a=t.getBindingContext();if(!a){return}this.oPopover.bindElement(a.getPath());this.oPopover.setVisible(true);this.oPopover.openBy(t)},getCardItemsBinding:function(){var e=this.getView().byId("ovpTable");return e.getBinding("items")},onAfterRendering:function(){e.prototype.onAfterRendering.apply(this,arguments);var a=this.getOwnerComponent().getComponentData();var i=this.getCardPropertiesModel();if(!t.checkIfAPIIsUsed(this)&&i.getProperty("/layoutDetail")==="resizable"){var o=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(a.cardId);var n=Math.max(o.dashboardLayout.headerHeight,this.getHeaderHeight());var s=this.oDashboardLayoutUtil.getCardDomId(a.cardId);var r=document.getElementById(s);if(!o.dashboardLayout.autoSpan){r.getElementsByClassName("sapOvpWrapper")[0].style.height=o.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+1-(n+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}if(o.dashboardLayout.showOnlyHeader){r.classList.add("sapOvpMinHeightContainer")}this.addColumnInTable(jQuery(r),{colSpan:o.dashboardLayout.colSpan})}else{var d=this.getView().byId("ovpTable");var g=d.getAggregation("columns");for(var h=0;h<3;h++){if(g[h]){g[h].setStyleClass("sapTableColumnShow").setVisible(true)}}}var p=this.getCardItemsBinding();if(p&&p.getPath()){p.attachDataReceived(this.onDataReceived.bind(this))}},onDataReceived:function(){this.bdataLoadedToEnableAddToInsight=true},getCardItemBindingInfo:function(){var e=this.getView().byId("ovpTable");return e.getBindingInfo("items")},addColumnInTable:function(e,t){if(t.colSpan>=1){if(jQuery(e).find("tr").length!=0){var a=n.byId(jQuery(e).find(".sapMList").attr("id"));var i=a.getAggregation("columns");var o=t.colSpan;var s=o+1;for(var r=0;r<6;r++){if(i[r]){if(r<=s){i[r].setStyleClass("sapTableColumnShow").setVisible(true)}else{i[r].setStyleClass("sapTableColumnHide").setVisible(false)}}}}}},resizeCard:function(e,t){var a,i,o,i;try{var n=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),s=this.getCardItemBindingInfo(),r=this.getHeaderHeight(),d=this.getView(),g=d.byId("ovpCardContentContainer").getDomRef();if(e.showOnlyHeader){g.classList.add("sapOvpContentHidden");a=0}else{g.classList.remove("sapOvpContentHidden");o=r+t.dropDownHeight;i=e.rowSpan*e.iRowHeightPx-o-t.itemHeight;a=Math.abs(Math.floor(i/t.itemHeight));n.style.height=e.rowSpan*e.iRowHeightPx+"px"}g.style.height=e.rowSpan*e.iRowHeightPx-(r+2*e.iCardBorderPx)+"px";this.addColumnInTable(d.getDomRef(),e);if(a!==s.length){s.length=a;e.noOfItems=s.length;this.getCardItemsBinding().refresh();var l=this.getCardPropertiesModel().getProperty("/tabs");if(l&&l.length>0){h.clearViewCacheForTabbedCard(d)}}else{this._handleCountHeader()}}catch(e){p.warning("OVP resize: "+this.cardId+" catch "+e.toString())}},onExit:function(){e.prototype.onExit.apply(this,arguments)},onShowInsightCardPreview:function(){var e=this.getView();var t=e.getController();var a=t.oCardComponentData;var i=this;if(this.checkIBNNavigationExistsForCard()){s.showCard({entitySet:t.entitySet,entityType:t.entityType,cardComponentName:"Table",cardComponentData:a,cardComponent:t.oCardComponent,itemBindingInfo:i.getCardItemBindingInfo(),view:e}).then(function(e){i.saveGeneratedCardManifest(e)})}else{r.error(d.getText("INT_IBN_NAVIGATION_NOT_FOUND_ERROR_MESSAGE_TEXT"))}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/table/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.generic.base.table.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.table.Table"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.base.table.BaseTable"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:true}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/jUtils", [],function(){"use strict";return{setAttributeToMultipleElements:function(e,t,n){var r=document.querySelectorAll(e);for(var l=0;l<r.length;l++){r[l].setAttribute(t,n)}},getElementWidth:function(e){return parseFloat(getComputedStyle(e.getDomRef(),null).width.replace("px",""))},getElementHeight:function(e){return parseFloat(getComputedStyle(e.getDomRef(),null).height.replace("px",""))},removeElementById:function(e){var t=document.getElementById(e);if(t){t.parentNode.removeChild(t)}return},addClassToAllElements:function(e,t){if(e){if(e.length){e.forEach(function(e){e.classList.add(t)})}else{e.classList.add(t)}}},removeClassToAllElements:function(e,t){if(e){if(e.length){e.forEach(function(e){e.classList.remove(t)})}else{e.classList.remove(t)}}},checkIfFunction:function(e){if(typeof e==="function"){return true}return false},getIndex:function(e){var t=e.parentNode.childNodes;var n=0;for(var r=0;r<t.length;r++){if(t[r]==e){return n}if(t[r].nodeType==1){n++}}return-1},addStyleToAllElements:function(e,t,n){if(e){if(e.length){e.forEach(function(e){e.style[t]=n})}else{e.style[t]=n}}},addAttributeToAllElements:function(e,t,n){if(e){if(e.length){e.forEach(function(e){e.setAttribute(t,n)})}else{e.setAttribute(t,n)}}},getOuterHeight:function(e){var t=e.offsetHeight;var n=getComputedStyle(e);t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10);return t},removeAttributesFromAll:function(e,t,n){if(e){e.forEach(function(e){var r=e.querySelectorAll(t);if(r){for(var l=0;l<r.length;l++){r[l].removeAttribute(n)}}})}}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/linklist/AnnotationHelper", ["sap/ovp/cards/AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/ovp/cards/MetadataAnalyser"],function(e,t,r){"use strict";function a(e){var t=[];var r,a;var n=e.getProperty("/sortBy");if(n){var i=e.getProperty("/sortOrder");if(i&&i.toLowerCase()!=="descending"){a=false}else{a=true}r={path:n,descending:a};t.push(r)}return t}function n(t,n,i){var o=t.getSetting("ovpCardProperties");var s=o.getProperty("/metaModel");var f=e.isODataV4Context(t);var u=f?n:s.getODataEntityType(n.entityType);var l=f?"/"+o.getProperty("/entitySet"):"/"+n.name;var d;var p=o.getProperty("/selectionAnnotationPath");if(f&&p){var g="@"+p;d=s.getData()["$Annotations"][u.$Type][g]}else{d=u[p]}var c;var y=o.getProperty("/layoutDetail");if(y==="resizable"){var v=o.getProperty("/cardLayout");if(v){if(o.getProperty("/listFlavor")==="standard"){var P="";for(var x in i){P+=x}var m=o.getProperty("/cardLayout/iRowHeigthPx");if(m===undefined){m=16}var h;if(o.getProperty("/densityStyle")==="cozy"){h=72;if(P.indexOf("Description")===-1&&(P.indexOf("Title")>0&&P.indexOf("ImageUrl")>0||P.indexOf("Title")>0&&P.indexOf("TypeImageUrl")>0)){h=56}else if(P.indexOf("Description")===-1&&P.indexOf("Title")>0){h=48}}else{h=60;if(P.indexOf("Description")===-1&&(P.indexOf("Title")>0&&P.indexOf("ImageUrl")>0||P.indexOf("Title")>0&&P.indexOf("TypeImageUrl")>0)){h=48}else if(P.indexOf("Description")===-1&&P.indexOf("Title")>0){h=40}}o.setProperty("/cardLayout/itemHeight",h);if(!o.getProperty("/defaultSpan")&&o.getProperty("/cardLayout/autoSpan")){c=o.getProperty("/cardLayout/noOfItems");var O=Math.ceil((c*h+o.getProperty("/cardLayout/headerHeight")+2*o.getProperty("/cardLayout/iCardBorderPx"))/m);o.setProperty("/cardLayout/noOfItems",O)}else{var I=Math.floor(v.rowSpan*m-o.getProperty("/cardLayout/headerHeight")-2*o.getProperty("/cardLayout/iCardBorderPx"));c=Math.floor(I/h)*v.colSpan}}}}else{c=6}var C=t.getSetting("ovpCardProperties"),S=C.getProperty("/parameters");if(d||!!S){if(d&&d.Parameters||!!S){l=r.resolveParameterizedEntitySet(t.getSetting("dataModel"),n,d,S)}}var L="{path: '"+l+"', length: "+c;var w=a(o);if(w.length>0){L=L+", sorter:"+JSON.stringify(w)}var D=e.getFilters(o,d,f);if(D.length>0){L=L+", filters:"+JSON.stringify(D)}var U=e.checkFilterPreference(o);if(f){if(U){L=L+", parameters:{custom: {cardId: '"+o.getProperty("/cardId")+"'}}"}}else{if(U){L=L+", parameters:{custom: {cardId: '"+o.getProperty("/cardId")+"', _requestFrom: 'ovp_internal'}}"}else{L=L+", parameters:{custom: {_requestFrom: 'ovp_internal'}}"}}L=L+"}";return L}n.requiresIContext=true;function i(e,t){var r=e.getModel().getProperty("/baseUrl");return p(r,t)}i.requiresIContext=true;function o(e,r){var a=true;var n=t.format(e,r);if(n.toLowerCase().indexOf("icon")>0){a=false}return a}o.requiresIContext=true;function s(e){var t=true;if(!e){return null}else if(e.toLowerCase().indexOf("icon")>0){t=false}return t}function f(e){var t=new RegExp("http(s)?://(www.)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?","i");return t.test(e)}function u(t,r){var a=e.isODataV4Context(t);var n;if(!a){if(r.hasOwnProperty("Path")){n="{"+r.Path+"}"}else{n=r.String}}else{if(r.hasOwnProperty("$Path")){n="{"+r.$Path+"}"}else{n=r}}return n}u.requiresIContext=true;function l(t,r){var a=e.isODataV4Context(t);return a?"{"+r+"}":"{"+r.String+"}"}l.requiresIContext=true;function d(e){if(e){return 1}return 0}function p(e,t){if(!t){return undefined}else if(t.lastIndexOf(e,0)===0||t.indexOf("://")>0){return t}else if(t.lastIndexOf("/",0)===0){return e+t}else{return e+"/"+t}}function g(e,t,r){var a;if(typeof r==="object"){a=r[e]}else{a=typeof r==="boolean"?r:true}return!t[e]&&a}function c(e,t,r){var a="";if(e){if(t&&r){a="#"+t+"-"+r;for(var n=0;n<e.length;n++){if(e[n].value===a){return e[n].name}}a=""}else{return e[0].name}}return a}function y(e,t){return p(e.baseUrl,t)}function v(e){return this.getModel("contentRow").aBindings[0].getContext().getPath().replace("/staticContent/","")}function P(t,r){var a=e.isODataV4Context(t);if(!a){return r.Path&&"{"+r.Path+"}"||r.String||""}else{return r.$Path&&"{"+r.$Path+"}"||r||""}}P.requiresIContext=true;return{formatItems:n,formatUrl:i,isImageUrl:o,isImageUrlStaticData:s,isValidURL:f,getIconPath:u,formatString:l,linkedAction:d,formUrl:p,isVisible:g,getApplicationName:c,getImageUrl:y,contentRowIndex:v,getAvatarInitials:P,getSorters:a}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/linklist/Component", ["sap/ovp/cards/generic/base/linklist/Component","sap/ovp/cards/linklist/AnnotationHelper"],function(t,n){"use strict";return t.extend("sap.ovp.cards.linklist.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.linklist.LinkList"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.linklist.LinkList"},communicationPath:{type:"string",defaultValue:"com.sap.vocabularies.Communication.v1.Contact"},headerAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.HeaderInfo"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/linklist/LinkList.controller", ["sap/ovp/cards/generic/base/linklist/BaseLinklist.controller","sap/ovp/filter/FilterUtils","sap/ui/core/Core"],function(i,t,e){"use strict";return i.extend("sap.ovp.cards.linklist.LinkList",{onInit:function(){i.prototype.onInit.apply(this,arguments);var n=this;this.eventhandler=function(i,e,s){t.applyFiltersToV2Card(s,n)};this.GloabalEventBus=e.getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",n.eventhandler)}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/list/Component", ["sap/ovp/cards/generic/base/list/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.list.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.list.List"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.list.List"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:true}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.suite.ui.microchart"],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/list/List.controller", ["sap/ovp/cards/generic/base/list/BaseList.controller","sap/ovp/filter/FilterUtils","sap/ui/core/Core"],function(t,e,i){"use strict";return t.extend("sap.ovp.cards.list.List",{onInit:function(){t.prototype.onInit.apply(this,arguments);var n=this;this.eventhandler=function(t,i,o){e.applyFiltersToV2Card(o,n)};this.GloabalEventBus=i.getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",n.eventhandler)}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/quickview/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.quickview.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.quickview.Quickview"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.quickview.Quickview"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Facets"},footerFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.ActionsFooter"}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/quickview/Quickview.controller", ["sap/ovp/cards/generic/Card.controller","sap/m/Button"],function(t,e){"use strict";return t.extend("sap.ovp.cards.quickview.Quickview",{onInit:function(){t.prototype.onInit.apply(this,arguments);this.bCustomActionFlag=true},onBeforeRendering:function(){var t=this.byId("ovpQuickviewCardHeader");if(t){var n=t.getText();var o=n.substring(0);if(n[0]===":"){o=n.substring(2)}else if(n[n.length-2]===":"){o=n.substring(0,n.length-2)}t.setText(o);var r=t.getCustomData();if(r){for(var i=0;i<r.length;++i){if(r[i].getProperty("key")==="aria-label"){r[i].setValue(o)}}}}var s=this.getCardPropertiesModel();var a=s.getProperty("/showFirstActionInFooter")?s.getProperty("/showFirstActionInFooter"):false;var p=this.byId("ovpActionFooter");if(!a){if(p){var g=p.getContent();if(g&&g.length){for(var i=0,f=g.length;i<f;i++){if(g[i]instanceof e){g[i].setVisible(false);break}}}}}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);var n=this.getCardPropertiesModel();var o=this.byId("ovpActionFooter");if(!!this.bCustomActionFlag){var r=n.getProperty("/customActions");if(!!o&&!!r&&!!r.length){for(var i=0;i<r.length;i++){var s=r[i].text;var a=null,p;if(this.getOwnerComponent()&&this.getOwnerComponent().getComponentData()){a=this.getOwnerComponent().getComponentData().mainComponent}if(!!a&&!!s&&!!r[i].press){p=a.templateBaseExtension.provideCustomActionPress(r[i].press)?a.templateBaseExtension.provideCustomActionPress(r[i].press):a.onCustomActionPress(r[i].press);if(typeof p==="function"){var g=new e({text:s,press:p.bind(this),type:"Transparent"});var f=n.getProperty("/showFirstActionInFooter");var v=f?0:1;var l=r[i].position+v;var c=o.getContent().length;if(l<1+v&&l>c-1){o.addContent(g)}else{o.insertContent(g,l)}}}}}this.bCustomActionFlag=false}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/AppSettingsDialog.controller", ["sap/ui/core/mvc/Controller","sap/ovp/cards/AppSettingsUtils","sap/ui/model/json/JSONModel","sap/base/util/merge"],function(t,e,n,s){"use strict";return t.extend("sap.ovp.cards.rta.AppSettingsDialog",{onInit:function(){e.oResetButton.attachPress(this.onResetButton,this)},onAfterRendering:function(){this.setEnablePropertyForResetAndSaveButton(false);this._ovpManifestSettings=this.getView().getModel().getData();this._originalOVPManifestSettings=s({},this._ovpManifestSettings)},onResetButton:function(){this.setEnablePropertyForResetAndSaveButton(false);this._ovpManifestSettings=s({},this._originalOVPManifestSettings);var t=new n(this._ovpManifestSettings);this.getView().setModel(t);this.getView().getModel().refresh()},onChange:function(){this.setEnablePropertyForResetAndSaveButton(true)},setEnablePropertyForResetAndSaveButton:function(t){e.oResetButton.setEnabled(t);e.oSaveButton.setEnabled(t)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SelectIcons.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectIcons",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var a=e.getParameter("query"),o=null,l=[];for(var g=0;g<n.length;g++){l.push(new t(n[g],i.Contains,a))}if(a){o=new t(l,false)}this.getView().byId(r).getBinding("items").filter(o,"Application")},filterTable:function(e){var t=this.getView(),i=t.getModel(),n=i.getProperty("/tableName"),r;if(n==="IconTable"){this._filterTable(e,["Icon","Name"],"IconTable");r=t.byId("IconTable").getBinding("items").getLength();i.setProperty("/NoOfIcons",r)}else if(n==="ImageTable"){this._filterTable(e,["Name"],"ImageTable");r=t.byId("ImageTable").getBinding("items").getLength();i.setProperty("/NoOfImages",r)}i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=this.getView().getModel(),r=n.getProperty("/tableName"),a;if(r==="IconTable"){a=i.getProperty("Icon")}else if(r==="ImageTable"){a=i.getProperty("Image")}this.updateIconPath(a)},onSelectionChange:function(e){var t=e.getParameter("item").getKey(),i=this.getView().getModel();i.setProperty("/tableName",t);i.refresh(true)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SelectKPI.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectKPI",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var o=e.getParameter("query"),a=null,l=[];for(var s=0;s<n.length;s++){l.push(new t(n[s],i.Contains,o))}if(o){a=new t(l,false)}this.getView().byId(r).getBinding("items").filter(a,"Application")},onSearch:function(e){var t=this.getView(),i=t.getModel(),n;this._filterTable(e,["GroupTitle","KPITitle","GroupID","KPIID","KPIQualifier"],"KPITable");n=t.byId("KPITable").getBinding("items").getLength();i.setProperty("/NoOfKPIItem",n);i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=i.getObject();this.updateKPIItemPath(n,e)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SelectLineItem.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectLineItem",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var a=e.getParameter("query"),l=null,o=[];for(var s=0;s<n.length;s++){o.push(new t(n[s],i.Contains,a))}if(a){l=new t(o,false)}this.getView().byId(r).getBinding("items").filter(l,"Application")},filterTable:function(e){var t=this.getView(),i=t.getModel(),n;this._filterTable(e,["Label","VisibleFields"],"LineItemTable");n=t.byId("LineItemTable").getBinding("items").getLength();i.setProperty("/NoOfLineItem",n);i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=i.getObject();this.updateLineItemPath(n)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SelectLinks.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectLinks",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var a=e.getParameter("query"),o=null,l=[];for(var s=0;s<n.length;s++){l.push(new t(n[s],i.Contains,a))}if(a){o=new t(l,false)}this.getView().byId(r).getBinding("items").filter(o,"Application")},filterTable:function(e){var t=this.getView(),i=t.getModel(),n;this._filterTable(e,["name","value"],"LinkTable");n=t.byId("LinkTable").getBinding("items").getLength();i.setProperty("/NoOfLinks",n);i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=i.getProperty("value");this.updateLinkPath(n)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SettingsDialog.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/SettingsUtils","sap/ovp/cards/PayLoadUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/ChangeReason","sap/ovp/cards/linklist/AnnotationHelper","sap/ovp/cards/v4/V4AnnotationHelper","sap/ovp/cards/AnnotationHelper","sap/ui/core/IconPool","sap/ui/core/mvc/ViewType","sap/m/Dialog","sap/m/Button","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/deepEqual","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ui/base/Event","sap/ui/core/mvc/XMLView","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode"],function(e,t,i,a,s,n,o,r,l,d,h,g,u,c,f,p,S,P,v,C,b,m,y,_,I,V,E,O){"use strict";var w=new _("OVP.rta.SettingDialog");return e.extend("sap.ovp.cards.rta.SettingsDialog",{_oCardManifestSettings:{},_aRefreshNotRequired:n._aRefreshNotRequired,_aRefreshRequired:n._aRefreshRequired,_updateManifestProperties:n._updateManifestProperties,aVariantNames:n.aVariantNames,oOvpResourceBundle:C,oMandatoryPropertiesKey:n.oMandatoryPropertiesKey,onInit:function(){a.oSaveButton.attachPress(this.onSaveButtonPress,this);a.oResetButton.attachPress(this.onResetButton,this);a.oMessagePopOverButton.attachPress(this.handleMessagePopoverPress,this)},onAfterRendering:function(){a.dialogBox.addStyleClass("sapOvpSettingsDialogBox");this.setEnablePropertyForResetAndSaveButton(false);this._oCardManifestSettings=this.getView().getModel().getData();this._oOriginalCardManifestSettings=y({},this._oCardManifestSettings);var e=this.getView(),t=e.getModel();if(!this._oCardManifestSettings.addNewCard){var i=e.byId("dialogCard");if(!i.getVisible()){i=e.byId("dialogCardNoPreview")}i.getDomRef().style.minHeight=this._oCardManifestSettings.dialogBoxHeight+"px";e.byId("dialogCardOverlay").getDomRef().style.minHeight=this._oCardManifestSettings.dialogBoxHeight+"px";a.settingFormWidth(e,"calc(100% - "+(this._oCardManifestSettings.dialogBoxWidth+1)+"rem)");setTimeout(function(){var e=this.getView().byId("dialogCard");if(e&&e.getVisible()){e.setBusy(false)}}.bind(this),2e3)}if(this._oCardManifestSettings.staticContent){this.handleErrorHandling(t,"title","/staticContent");this.handleErrorHandling(t,"targetUri","/staticContent")}if(a.bNewKPICardFlag){var s=e.getModel();var n=e.byId("sapOvpKPITable").getBinding("items").getLength();s.setProperty("/NoOfKPIItem",n);s.setProperty("/NoKPI",n)}},validateInputField:function(e){var t=e.getSource();var i=t.getValue().trim().length;if(!i){t.setValue(t.getValue().trim())}if(!this._oCardManifestSettings.addNewCard){this.updateCard(e)}else{this.setEnablePropertyForResetAndSaveButton(true)}},addView:function(e){this._oCardManifestSettings.showViewSwitchButton=true;this.setEnablePropertyForResetAndSaveButton(true);var t,i=this._oCardManifestSettings,a=this.getView().getModel();if(!i.addNewCard){if(i.dataPointAnnotationPath&&i.dataPoint&&i.dataPoint.length){t=i.dataPoint[0].value}}if(i.tabs&&i.tabs.length){i.newViewCounter++;if(!i.addNewCard){if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.tabs.push({chartAnnotationPath:i.chart[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter})}else{i.tabs.push({annotationPath:i.lineItem[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter})}}else{i.tabs.push({entitySet:"",value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter})}var s=i.tabs.length;i.aViews.push({text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter,key:s,isLaterAddedView:true,isViewResetEnabled:false});if(!i.addNewCard){var o=i.defaultViewSelected;if(i.tabs[o-1].entitySet){i.tabs[s-1].entitySet=i.allEntitySet[0].value}}this.selectViewSwitch(e,s)}else{i.tabs=[{}];n.tabFields.forEach(function(e){if(!i.addNewCard){if(e!=="entitySet"){i.tabs[0][e]=i[e]}}else{i.tabs[0][e]=i[e]}});i.tabs[0].value=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 1";if(!i.addNewCard){if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.tabs.push({chartAnnotationPath:i.chart[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2"})}else{i.tabs.push({annotationPath:i.lineItem[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2"})}}else{i.tabs.push({entitySet:"",value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2"})}i.selectedKey=1;i.defaultViewSelected=1;i.aViews=[{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_MAIN_VIEW"),key:0,isLaterAddedView:false,isViewResetEnabled:false},{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 1 ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")",key:1,initialSelectedKey:1,isLaterAddedView:false,isViewResetEnabled:false},{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2",key:2,isLaterAddedView:true,isViewResetEnabled:false}];i.newViewCounter=2;this.selectViewSwitch(e,1)}this.handleErrorHandling(a,"value","/tabs")},deleteView:function(e){this.setEnablePropertyForResetAndSaveButton(true);var t=this._oCardManifestSettings,i=parseInt(t.selectedKey,10),s=this.getView().getModel();t.tabs.splice(i-1,1);t.aViews.splice(i,1);if(i===t.defaultViewSelected){t.defaultViewSelected=1;t.aViews[i].text=t.aViews[i].text+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}t.aViews.forEach(function(e,t){if(t>=i){e.key--}});this.handleErrorHandling(s,"value","/tabs");if(t.tabs.length==1){n.tabFields.forEach(function(e){var i=t.tabs[0][e];if(e!=="entitySet"||e==="entitySet"&&i){t[e]=i}});delete t.selectedKey;delete t.defaultViewSelected;delete t.tabs;delete t.aViews;t.aViews=[{text:this.oOvpResourceBundle.getText("OVP_KEYUSER_SHOWS_DIFFERENT_VIEWS"),key:0,initialSelectedKey:0,isLaterAddedView:false,isViewResetEnabled:false}];a.addManifestSettings(t);a.setVisibilityForFormElements(t);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!t.addNewCard){this._fCardWithRefresh()}}else{t.selectedKey=1;this.selectViewSwitch(e,t.selectedKey)}},resetView:function(){var e=this._oCardManifestSettings,t=this.getView().getModel(),i=parseInt(e.selectedKey,10),s=e.aViews[i],o=e.defaultViewSelected;if(!s.isLaterAddedView){var r=e.dataPointAnnotationPath?true:false,l=this._oOriginalCardManifestSettings.dataPointAnnotationPath?true:false;if(i){var d=e.aViews[i].initialSelectedKey;n.tabFields.forEach(function(t){if(t!=="dataPointAnnotationPath"||r){if(this._oOriginalCardManifestSettings.tabs&&this._oOriginalCardManifestSettings.tabs.length){var a=this._oOriginalCardManifestSettings.tabs[d-1][t];if(t!=="entitySet"||t==="entitySet"&&a){e[t]=a;e.tabs[i-1][t]=e[t]}}else{if(t!=="entitySet"){e[t]=this._oOriginalCardManifestSettings[t];e.tabs[i-1][t]=e[t]}}}}.bind(this));if(!this._oOriginalCardManifestSettings.tabs||!this._oOriginalCardManifestSettings.tabs.length){e.newViewCounter++;e.tabs[i-1].value=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}if(i===e.defaultViewSelected){e.aViews[i].text=e.tabs[i-1].value+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}else{e.aViews[i].text=e.tabs[i-1].value}}else{n.mainFields.forEach(function(t){e[t]=this._oOriginalCardManifestSettings[t]}.bind(this));if(r!==l){if(l){e.tabs.forEach(function(t){if(t.prevDataPointAnnotationPath){t.dataPointAnnotationPath=t.prevDataPointAnnotationPath}else{t.dataPointAnnotationPath=e.dataPoint[0].value}});e.dataPointAnnotationPath=e.tabs[o].dataPointAnnotationPath}else{e.tabs.forEach(function(e){e.prevDataPointAnnotationPath=e.dataPointAnnotationPath;e.dataPointAnnotationPath=undefined})}}}}else{var h;if(e.dataPointAnnotationPath){h=e.dataPoint[0].value}e.newViewCounter++;if(e.template==="sap.ovp.cards.charts.analytical"||e.template==="sap.ovp.cards.charts.smart.chart"){e.tabs[i-1]={chartAnnotationPath:e.chart[0].value,dataPointAnnotationPath:h,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}}else{e.tabs[i-1]={annotationPath:e.lineItem[0].value,dataPointAnnotationPath:h,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}}if(i===e.defaultViewSelected){e.aViews[i].text=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}else{e.aViews[i].text=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}n.tabFields.forEach(function(t){var a=e.tabs[i-1][t];if(t!=="entitySet"||t==="entitySet"&&a){e[t]=a}})}this.handleErrorHandling(t,"value","/tabs");e.isViewResetEnabled=false;e.aViews[i].isViewResetEnabled=false;a.addManifestSettings(e);a.setVisibilityForFormElements(e);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!e.addNewCard){this._fCardWithRefresh()}},selectViewSwitch:function(e,t){var i=this._oCardManifestSettings,s=this.getView().getModel();if(!t){t=e.getSource().getSelectedIndex()}if(this.defaultViewSwitch){this.defaultViewSwitch.setEnabled(true)}this.setEnablePropertyForResetAndSaveButton(true);var o=i.metaModel,r,l=i.defaultViewSelected;if(!t){i.selectedKey=t;i.mainViewSelected=true;i.isViewResetEnabled=i.aViews[t].isViewResetEnabled;n.tabFields.forEach(function(e){var t=i.tabs[l-1][e];if(e!=="entitySet"||e==="entitySet"&&t){i[e]=t}});this.handleErrorHandling(s,"value","/tabs");if(i.tabs[l-1].entitySet){r=o.getODataEntitySet(i.tabs[l-1].entitySet);i.entityType=o.getODataEntityType(r.entityType);this.resetSupportingObjectsOnEntitySetChange(i,l)}a.addManifestSettings(i);a.setVisibilityForFormElements(i);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!i.addNewCard){this._fCardWithRefresh()}}else{i.mainViewSelected=false;i.isViewResetEnabled=i.aViews[t].isViewResetEnabled;if(!i.addNewCard){var d=this.getView().byId("dialogCard");if(d.getVisible()){var h=d.getComponentInstance().getRootControl();var g=h.getController();g.changeSelection(t,true,i);this.handleErrorHandling(s,"value","/tabs");if(i.tabs[t-1].entitySet){r=o.getODataEntitySet(i.tabs[t-1].entitySet);i.entityType=o.getODataEntityType(r.entityType);this.resetSupportingObjectsOnEntitySetChange(i,l)}a.addManifestSettings(i);a.setVisibilityForFormElements(i);n.tabFields.forEach(function(e){var a=i.tabs[t-1][e];if(e!=="entitySet"||e==="entitySet"&&a){i[e]=a}});if(!!i.kpiAnnotationPath){this.setAnnotationPathInModel(i,"sapOvpSettingsKPIAnnotation",i.kpiAnnotationPath)}if(!!i.selectionPresentationAnnotationPath){this.setAnnotationPathInModel(i,"sapOvpSettingsFilterAndPresentedBy",i.selectionPresentationAnnotationPath)}this.getView().getModel("visibility").refresh();this.getView().getModel().refresh()}}else{if(!!i.tabs[t-1].entitySet){r=o.getODataEntitySet(i.tabs[t-1].entitySet);i.entityType=o.getODataEntityType(r.entityType);a.addManifestSettings(i)}this.aVariantNames.forEach(function(e){if(this._oCardManifestSettings[e.sPath]){this._oCardManifestSettings[e.sPath]=[]}}.bind(this));this.resetSupportingObjectsOnEntitySetChange(i,l);i.selectedKey=t;n.tabFields.forEach(function(e){var a=i.tabs[t-1][e];i[e]=a});a.setVisibilityForFormElements(i);this.getView().byId("sapOVPEntitySetList").setValue(i.tabs[t-1].entitySet);this.getView().getModel().refresh();this.getView().getModel("visibility").refresh()}}},resetSupportingObjectsOnEntitySetChange:function(e,t){e=a.addSupportingObjects(e);var i=e.defaultViewSelected;if(i){e.aViews[i].text=e.tabs[i-1].value}e.aViews[t].text+=" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";e.defaultViewSelected=t},setAnnotationPathInModel:function(e,t,i){if(e.entityType[i]){this.setVariant(e,i)}if(t==="sapOvpSettingsKPIAnnotation"){a.addKPINavApplicationName(e)}},setCurrentActivePageForCarouselCard:function(e){var t=this.getView().byId("dialogCard");if(t.getVisible()){var i=t.getComponentInstance(),a=i.getRootControl(),s=a.byId("pictureCarousel");if(s){var n=s.getPages(),o=n[e];s.setActivePage(o)}}},onSelectionChange:function(e){var t=e.getSource(),i=t.getModel(),a=i.getData().staticContent,s=t.getSelectedItem(),n=s.getBindingContext().getObject(),o=t.getModel("visibility");for(var r=0;r<a.length;r++){if(a[r].id===n.id){o.setProperty("/moveToTheTop",!(a.length===1||r===0));o.setProperty("/moveUp",!(a.length===1||r===0));o.setProperty("/moveDown",!(a.length===1||r===a.length-1));o.setProperty("/moveToTheBottom",!(a.length===1||r===a.length-1));o.setProperty("/delete",true);i.setProperty("/selectedItemIndex",r);o.refresh(true);if(e.getParameter("listItem")){this.setCurrentActivePageForCarouselCard(r)}break}}},handleErrorForProperty:function(e,t,i){e.firePropertyChange({context:e.getContext(i?i:"/"),path:t,value:e.getProperty(i?i+"/"+t:t),reason:d.Change})},handleErrorHandling:function(e,t,i){var a=e.getProperty(i);e.firePropertyChange({context:e.getContext(i),path:i+","+t,value:e.getProperty(i),reason:d.Change});for(var s=0;s<a.length;s++){var n=i+"/"+s;e.firePropertyChange({context:e.getContext(n),path:t,value:e.getProperty(n+"/"+t),reason:d.Change})}},setEnablePropertyForResetAndSaveButton:function(e){a.enableResetButton(e);a.enableSaveButton(e)},getValueInRemString:function(e){return e+"rem"},_getSelectedItemIndex:function(e){return e.getProperty("/selectedItemIndex")},_getLastItemIndex:function(e){return this._getStaticContentArray(e).length-1},_getStaticContentArray:function(e){return e.getProperty("/staticContent")},_setStaticContentArray:function(e,t){e.setProperty("/staticContent",t)},_setSelectedItemAndScrollToElement:function(e,t){var i=this.getView(),a=i.byId("sapOvpStaticLinkListLineItem"),s=i.byId("scrollContainer"),n=i.getModel();this.handleErrorHandling(n,"title","/staticContent");this.handleErrorHandling(n,"targetUri","/staticContent");var o=a.getItems()[e];if(t){this._oList=a;this._oItem=o;this._oScrollContainer=s;var r={onAfterRendering:function(e){this._oList.removeEventDelegate(this._oDelegateOnAfter);this._oScrollContainer.scrollToElement(this._oItem);delete this._oDelegateOnAfter;delete this._oList;delete this._oScrollContainer;delete this._oItem}};this._oDelegateOnAfter=r;a.addEventDelegate(r,this)}else{s.scrollToElement(o)}a.setSelectedItem(o);a.fireSelectionChange()},_arrangeStaticContent:function(e,t,i){var a=this._getStaticContentArray(e);a.splice(i,0,a.splice(t,1)[0]);this._setStaticContentArray(e,a);this._setSelectedItemAndScrollToElement(i)},getIndexFromIdForStaticLinkList:function(e){var t=e.split("-");return t[t.length-1]},_getImageData:function(){var e=[];e.push({Name:"AW.png",Image:h.formUrl(this.getView().getModel().getProperty("/baseUrl"),"img/AW.png")});return e},_getIconData:function(e){var t=c.getIconNames(),i=[];if(e){var a=e.split("://")[1],s=t.indexOf(a);t.splice(s,1);i.push({Name:a,Icon:c.getIconURI(a)})}for(var n=0;n<t.length;n++){i.push({Name:t[n],Icon:c.getIconURI(t[n])})}return i},_getLinkListItemId:function(e,t){return e.getProperty("/staticContent/"+t+"/index")},_makeLinkListItemId:function(e){return"linkListItem--"+e},_makeLinkListItemIndex:function(e){return"Index--"+e},getIconAndImageDataModel:function(e){var i=this._getIconData(e),a=this._getImageData();return new t({Icons:i,Images:a,NoOfIcons:i.length,NoOfImages:a.length})},destroyTemplatesAndObjects:function(){var e=this.getView();var t=e.byId("tableFilterImage");if(t){t.destroy()}var i=e.byId("tableFilter");if(i){i.destroy()}var a=e.byId("tableFilterLinks");if(a){a.destroy()}delete this._oEvent;delete this._iCurrentRow;delete this._oModel;delete this._oVisibilityModel;delete this._oIconsDialogContentView;delete this._oLinksDialogContentView;delete this._oLineItemDialogContentView;delete this._oKPIItemDialogContentView},onExternalUrlChange:function(e){this.setEnablePropertyForResetAndSaveButton(true)},onLinkSourceChange:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=e.getParameter("selectedIndex"),o=a.getProperty("/staticLink"),r=a.getProperty("/links"),l=this._getLinkListItemId(i,parseInt(s,10));if(n===0){o[l]=false;r[l]=true;i.setProperty("/staticContent/"+s+"/targetUri",undefined)}else{o[l]=true;r[l]=false;i.setProperty("/staticContent/"+s+"/semanticObject",undefined);i.setProperty("/staticContent/"+s+"/action",undefined);i.setProperty("/staticContent/"+s+"/targetUri","")}a.setProperty("/staticLink",o);a.setProperty("/links",r);a.refresh(true);i.refresh(true);this.handleErrorForProperty(i,"targetUri","/staticContent/"+s);this.setEnablePropertyForResetAndSaveButton(true)},onRemoveVisualPress:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=this._getLinkListItemId(i,parseInt(s,10)),o=a.getProperty("/removeVisual");o[n]=false;a.setProperty("/removeVisual",o);a.refresh(true);i.setProperty("/staticContent/"+s+"/imageUri",undefined);i.refresh(true);this.updateCard(e,"sapOvpSettingsStaticLinkListRemoveVisual")},createValueHelpDialogForInternalUrl:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("staticCardProperties"),s=t.getModel("visibility"),n=this.getIndexFromIdForStaticLinkList(t.getId());this.attachBrowserHeightChangeHandler();var o=new I;this._oEvent=Object.assign(o,e);this._iCurrentRow=n;this._oModel=i;this._oVisibilityModel=s;var r=new S("linksCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.linksDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_SELECT_APPLICATION_DIALOG"),buttons:[r]}).addStyleClass("sapOvpSettingsDialogBox");a.setProperty("/densityStyle",this.getDensityStyle());a.setProperty("/NoOfLinks",a.getProperty("/links").length);var l=new V("linksDialogContent",{viewName:"sap.ovp.cards.rta.SelectLinks",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:a.createBindingContext("/")},models:{tableRows:a}}}});l.setModel(a);l.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.linksDialog.addContent(l);l.loaded().then(function(e){this._oLinksDialogContentView=e;e.getController().updateLinkPath=function(e){var t=e.slice(1).split(/-(.+)/),i=t[0],a=t[1];this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/semanticObject",i);this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/action",a);this._oModel.refresh(true);this.setEnablePropertyForResetAndSaveButton(true);this.cleanAndCloseDialog(r)}.bind(this);r.attachPress(function(){this.cleanAndCloseDialog(r)}.bind(this));this.linksDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},onChangeVisualPress:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=i.getProperty("/staticContent/"+s+"/imageUri"),o=h.isImageUrlStaticData(n);this.attachBrowserHeightChangeHandler();var r=new I;this._oEvent=Object.assign(r,e);this._iCurrentRow=s;this._oModel=i;this._oVisibilityModel=a;var l=new S("iconsCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.iconsDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_SELECT_VISUAL_DIALOG"),buttons:[l]}).addStyleClass("sapOvpSettingsDialogBox");var d=o?this.getIconAndImageDataModel():this.getIconAndImageDataModel(n);d.setProperty("/densityStyle",this.getDensityStyle());var g=new V("iconsDialogContent",{viewName:"sap.ovp.cards.rta.SelectIcons",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:d.createBindingContext("/")},models:{tableRows:d}}}});d.setProperty("/tableName","IconTable");g.setModel(d);g.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.iconsDialog.addContent(g);g.loaded().then(function(e){this._oIconsDialogContentView=e;e.getController().updateIconPath=function(e){var t=this._getLinkListItemId(this._oModel,parseInt(this._iCurrentRow,10)),i=this._oVisibilityModel.getProperty("/removeVisual");i[t]=true;this._oVisibilityModel.setProperty("/removeVisual",i);this._oVisibilityModel.refresh(true);this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/imageUri",e);this._oModel.refresh(true);this.updateCard(this._oEvent,"sapOvpSettingsStaticLinkListChangeVisual");this.cleanAndCloseDialog(l)}.bind(this);l.attachPress(function(){this.cleanAndCloseDialog(l)}.bind(this));this.iconsDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},getDensityStyle:function(){if(!v.support.touch){return"compact"}else{return"cozy"}},cleanAndCloseDialog:function(e){if(this._oIconsDialogContentView){this._oIconsDialogContentView.destroy()}if(this._oLinksDialogContentView){this._oLinksDialogContentView.destroy()}if(this._oLineItemDialogContentView){this._oLineItemDialogContentView.destroy()}if(this._oKPIItemDialogContentView){this._oKPIItemDialogContentView.destroy()}this.destroyTemplatesAndObjects();if(this.iconsDialog){this.iconsDialog.close()}if(this.linksDialog){this.linksDialog.close()}if(this.lineItemDialog){this.lineItemDialog.close()}if(this.KPIItemDialog){this.KPIItemDialog.close()}e.destroy();this.detachBrowserHeightChangeHandler()},attachBrowserHeightChangeHandler:function(){v.resize.attachHandler(this.browserHeightChange,this)},detachBrowserHeightChangeHandler:function(){v.resize.detachHandler(this.browserHeightChange,this)},browserHeightChange:function(e){var t,i,s;if(this.iconsDialog&&this._oIconsDialogContentView){t=this.iconsDialog;i=this._oIconsDialogContentView;s="iconsScrollContainer"}else if(this.linksDialog&&this._oLinksDialogContentView){t=this.linksDialog;i=this._oLinksDialogContentView;s="linksScrollContainer"}else if(this.lineItemDialog&&this._oLineItemDialogContentView){t=this.lineItemDialog;i=this._oLineItemDialogContentView;s="lineItemScrollContainer"}else if(this.KPIItemDialog&&this._oKPIItemDialogContentView){t=this.KPIItemDialog;i=this._oKPIItemDialogContentView;s="KPIItemScrollContainer"}if(t&&i&&s){var n=t.getDomRef(),o=e?e.height*93/100:a.dialogBox.getDomRef().getBoundingClientRect().height,r=n.getBoundingClientRect().height,l=Math.max(o,r)-P.getPixelPerRem()*9,d=i.byId(s);d.setHeight(l+"px")}},handleMessagePopoverPress:function(e){a.oMessagePopOver.openBy(e.getSource())},onShowMorePress:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=this._getLinkListItemId(i,parseInt(s,10)),o=a.getProperty("/showMore/"+n);if(o){a.setProperty("/showMore/"+n,false)}else{a.setProperty("/showMore/"+n,true)}a.refresh(true)},onPressDelete:function(e){var t=new I;this._oEvent=Object.assign(t,e);o.confirm(this.oOvpResourceBundle.getText("OVP_KEYUSER_MESSAGE_BOX_INFORMATION_MESSAGE_INFO"),{actions:[o.Action.OK,o.Action.CANCEL],icon:o.Icon.INFORMATION,title:this.oOvpResourceBundle.getText("OVP_KEYUSER_MESSAGE_BOX_TITLE_INFO"),initialFocus:o.Action.CANCEL,onClose:function(e){if(e==="OK"){var t=this._oEvent.getSource(),i=t.getModel("visibility"),a=t.getModel(),s=this._getStaticContentArray(a),n=this._getSelectedItemIndex(a),o=this._getLinkListItemId(a,n),r=i.getProperty("/staticLink"),l=i.getProperty("/links"),d=i.getProperty("/removeVisual"),h=i.getProperty("/showMore");delete r[o];delete l[o];delete d[o];delete h[o];i.setProperty("/staticLink",r);i.setProperty("/links",l);i.setProperty("/removeVisual",d);i.setProperty("/showMore",h);s.splice(n,1);this._setStaticContentArray(a,s);a.refresh(true);if(s.length>0){this._setSelectedItemAndScrollToElement(Math.min(parseInt(n,10),s.length-1),true)}if(s.length<=1){i.setProperty("/delete",false)}i.refresh(true);this.updateCard(this._oEvent,"sapOvpSettingsStaticLinkListDelete")}delete this._oEvent}.bind(this)})},onPressAdd:function(e){var t=e.getSource(),i=t.getModel("visibility"),a=t.getModel(),s=this._getStaticContentArray(a),n=a.getProperty("/lineItemIdCounter"),o=this._makeLinkListItemId(n+1),r=this._makeLinkListItemIndex(n+1),l=i.getProperty("/staticLink"),d=i.getProperty("/links"),h=i.getProperty("/removeVisual"),g=i.getProperty("/showMore");a.setProperty("/lineItemIdCounter",n+1);s.unshift({id:o,index:r,title:"Default Title",subTitle:"Default SubTitle",imageUri:"",imageAltText:"",targetUri:"",openInNewWindow:""});l[r]=true;d[r]=false;h[r]=false;g[r]=false;i.setProperty("/staticLink",l);i.setProperty("/links",d);i.setProperty("/removeVisual",h);i.setProperty("/showMore",g);i.refresh(true);this._setStaticContentArray(a,s);a.refresh(true);this._setSelectedItemAndScrollToElement(0);this.updateCard(e,"sapOvpSettingsStaticLinkListAdd")},onPressMoveToTheTop:function(e){var t=e.getSource().getModel();this._arrangeStaticContent(t,this._getSelectedItemIndex(t),0);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onPressMoveUp:function(e){var t=e.getSource().getModel(),i=this._getSelectedItemIndex(t);this._arrangeStaticContent(t,i,i-1);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onPressMoveDown:function(e){var t=e.getSource().getModel(),i=this._getSelectedItemIndex(t);this._arrangeStaticContent(t,i,i+1);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onPressMoveToTheBottom:function(e){var t=e.getSource().getModel(),i=this._getSelectedItemIndex(t),a=this._getLastItemIndex(t);this._arrangeStaticContent(t,i,a);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onResetButton:function(){this._oCardManifestSettings=y({},this._oOriginalCardManifestSettings);var e=this.getView().getModel();e.setProperty("/",this._oCardManifestSettings);a.setVisibilityForFormElements(this._oCardManifestSettings);this.getView().getModel("visibility").refresh();if(this._oCardManifestSettings.layoutDetail==="resizable"){if(this._oCardManifestSettings.stopResizing){this.getView().byId("sapOvpSettingsStopResize").setState(false)}else if(!this._oCardManifestSettings.stopResizing){this.getView().byId("sapOvpSettingsStopResize").setState(true)}}a.resetErrorHandling();this.setEnablePropertyForResetAndSaveButton(false);if(!this._oCardManifestSettings.addNewCard){this._fCardWithRefresh()}},handleValueStateofComboBox:function(e,t,i,s){var n=a.oMessagePopOver.getModel(),o=n.getProperty("/Messages"),r=n.getProperty("/Counter/All"),l=n.getProperty("/Counter/Error");this.bError=true;var d=true;if(s){for(var h=0;h<o.length;h++){if(o[h].fieldName===t){d=false}}if(d){o.push({type:"Error",title:e,fieldName:t,counter:l+1});r++;l++;this.getView().byId(i).setValueState("Error")}}else{this.bError=false;for(var h=0;h<o.length;h++){if(o[h].fieldName===t){o.splice(h,1);r--;l--;h--}}this.getView().byId(i).setValueState("None")}if(!o.length){this.setEnablePropertyForResetAndSaveButton(true)}n.setProperty("/Messages",o);n.setProperty("/Counter/All",r);n.setProperty("/Counter/Error",l);n.refresh(true)},validateComboBox:function(e,t,i){var a;if(t==="KPICheckBox"&&i&&e.entitySet||t==="entitySet"&&e.addKPIHeaderCheckBox){if(e.title===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR");this.handleValueStateofComboBox(a,b.Annotations.title,"sapOvpCardTitle",true)}else{this.handleValueStateofComboBox("",b.Annotations.title,"sapOvpCardTitle",false)}if(e.subTitle===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SUBTITLE");this.handleValueStateofComboBox(a,b.Annotations.subTitle,"sapOvpCardSubTitle",true)}else{this.handleValueStateofComboBox("",b.Annotations.subTitle,"sapOvpCardSubTitle",false)}if(e.valueSelectionInfo===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SELECTIONVALUEINFO");this.handleValueStateofComboBox(a,b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",true)}else{this.handleValueStateofComboBox("",b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",false)}if(e.dataPointAnnotationPath===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_DATAPOINT");this.handleValueStateofComboBox(a,b.Annotations.dataPoint,"sapOvpDataPoint",true)}else{this.handleValueStateofComboBox("",b.Annotations.dataPoint,"sapOvpDataPoint",false)}}else if(t==="entitySet"){a=C.getText("OVP_KEYUSER_INPUT_ERROR");this.handleValueStateofComboBox(a,b.Annotations.title,"sapOvpCardTitle",true);if(e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist"){a=C.getText("OVP_KEYUSER_LISTFLAVOR_ERROR");this.handleValueStateofComboBox(a,b.Annotations.listFlavor,"sapOVPLinkListFlavor",true)}}else if(t==="KPICheckBox"&&!i&&e.entitySet){this.handleValueStateofComboBox("",b.Annotations.subTitle,"sapOvpCardSubTitle",false);this.handleValueStateofComboBox("",b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",false);this.handleValueStateofComboBox("",b.Annotations.dataPoint,"sapOvpDataPoint",false)}else{if(t==="title"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR",b.Annotations.title,"sapOvpCardTitle")}if(t==="subTitle"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SUBTITLE",b.Annotations.subTitle,"sapOvpCardSubTitle")}if(t==="valueSelectionInfo"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SELECTIONVALUEINFO",b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo")}if(t==="dataPointAnnotationPath"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_DATAPOINT",b.Annotations.dataPoint,"sapOvpDataPoint")}if(t==="listFlavor"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_LISTFLAVOR_ERROR",b.Annotations.listFlavor,"sapOVPLinkListFlavor")}}},onComboBoxSelection:function(e,t,i,a,s){var n;if(e[t]===""){n=C.getText(i);this.handleValueStateofComboBox(n,a,s,true)}else{this.handleValueStateofComboBox(n,a,s,false)}},onSaveButtonPress:function(){if(!this._oCardManifestSettings.addNewCard){if(a.bError||this.bError){a.oMessagePopOverButton.firePress()}else{this.createAndSubmitChange.bind(this)()}}else{this.createAndSubmitChange.bind(this)()}},onResizingChange:function(e){var t=e.getParameter("state");this._oCardManifestSettings.stopResizing=!t;this.updateCard(e)},onNumberOfRowsChanged:function(e){var t=+this._oCardManifestSettings.defaultSpan.rows;this._oCardManifestSettings.defaultSpan.rows=t;this._oCardManifestSettings.defaultSpan.showOnlyHeader=t===0;this._oCardManifestSettings.cardLayout.showOnlyHeader=t===0;var i=["sap.ovp.cards.list","sap.ovp.cards.table"];if(i.indexOf(this._oCardManifestSettings.template)!==-1){this._oCardManifestSettings.cardLayout.noOfItems=t}else{this._oCardManifestSettings.cardLayout.rowSpan=t}this.updateCard(e)},onNumberOfColumnsChanged:function(e){this._oCardManifestSettings.defaultSpan.cols=+this._oCardManifestSettings.defaultSpan.cols;this.updateCard(e)},setBusy:function(e){if(e){this.getView().addStyleClass("dialogContainerOverlay");var t=this.getView().byId("dialogCard");if(t.getVisible()&&t.getComponentInstance()){t.getComponentInstance().getRootControl().setBusy(e)}}else{this.getView().removeStyleClass("dialogContainerOverlay");setTimeout(function(){var t=this.getView().byId("dialogCard");if(t.getVisible()&&t.getComponentInstance()){t.getComponentInstance().getRootControl().setBusy(e)}}.bind(this),2e3)}},_fCardWithoutRefresh:function(e,t){var i=this.getView(),a=this._oCardManifestSettings,s=i.byId("dialogCard").getComponentInstance(),n=s.getRootControl(),o=n.getController(),r=o.getCardPropertiesModel(),l,d,h=false,g;if(a.tabs&&a.tabs.length){h=true;g=parseInt(a.selectedKey,10)}if(t.formElementId==="sapOvpSettingsLineItemTitle"||t.formElementId==="sapOvpSettingsLineItemSubTitle"){l=n.byId(t.cardElementId+"--"+i.getModel().getProperty("/lineItemId"))}else{l=n.byId(t.cardElementId);if(!l){this._fCardWithRefresh(e,t.cardElementId)}}switch(t.formElementId){case"sapOvpSettingsLineItemTitle":case"sapOvpSettingsLineItemSubTitle":case"sapOvpSettingsTitle":case"sapOvpSettingsValueSelectionInfo":if(l){l.setText(e.getSource().getValue())}break;case"sapOvpSettingsSubTitle":r.setProperty("/subTitle",e.getSource().getValue());o._setSubTitleWithUnitOfMeasure(undefined,true);break;case"sapOvpSettingsViewName":var u=a.viewName;d=i.getModel();l.getItems()[g-1].setText(u);a.tabs[g-1].value=u;if(a.defaultViewSelected===g){u=u+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}a.aViews[g].text=u;d.refresh();break;case"sapOvpDefaultViewSwitch":if(e.getSource().getState()){var c=a.defaultViewSelected;d=i.getModel();a.defaultViewSelected=g;a.aViews[c].text=a.tabs[c-1].value;a.aViews[g].text+=" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";d.refresh();this.defaultViewSwitch=e.getSource();this.defaultViewSwitch.setEnabled(false)}break;case"sapOvpSettingsIdentification":if(h){a.tabs[g-1][t.updateProperty]=a[t.updateProperty]}break;case"sapOvpSettingsKPIHeaderSwitch":var f=i.getModel("visibility"),p=f.getData();p.dataPoint=false;p.valueSelectionInfo=false;if(h){a.tabs.forEach(function(e){e.prevDataPointAnnotationPath=e.dataPointAnnotationPath;e.dataPointAnnotationPath=undefined})}else{var S=a.dataPointAnnotationPath;if(S){a.prevDataPointAnnotationPath=S}a.dataPointAnnotationPath=undefined}f.refresh(true);l.destroy();break;default:break}},_fCardWithRefresh:function(e,t){var s,o,r,l,d,h=this._oCardManifestSettings,g=this.getView(),u=g.byId("dialogCard"),c=!u.getComponentInstance()?undefined:u.getComponentInstance().getComponentData(),f=!c?"Dialog":c.cardId,p=!c?undefined:c.manifest.cards[f].model,S={cards:{}},v=false,C;if(h.tabs&&h.tabs.length){v=true;C=parseInt(h.selectedKey,10)}switch(t){case"subTitleSwitch":r=this.getView();l=r.getModel("visibility");if(e.getSource().getState()){if(v){o=h.defaultViewSelected;h.tabs.forEach(function(e){s=e.prevDynamicSubtitleAnnotationPath;if(s){e.dynamicSubtitleAnnotationPath=s}else{e.dynamicSubtitleAnnotationPath=h.dynamicSubTitle[0].value}});h.dynamicSubtitleAnnotationPath=h.tabs[o-1].dynamicSubtitleAnnotationPath}else{s=h.prevDynamicSubtitleAnnotationPath;if(s){h.dynamicSubtitleAnnotationPath=s}else{h.dynamicSubtitleAnnotationPath=h.dynamicSubTitle[0].value}}if(c.template!=="sap.ovp.cards.linklist"&&c.template!=="sap.ovp.cards.v4.linklist"){g.byId("sapOvpSettingsDynamicSubTitle").setSelectedKey(h.dynamicSubtitleAnnotationPath)}}else{if(v){h.tabs.forEach(function(e){e.prevDynamicSubtitleAnnotationPath=e.dynamicSubtitleAnnotationPath;e.dynamicSubtitleAnnotationPath=undefined});h.dynamicSubtitleAnnotationPath=undefined}else{var b=h.dynamicSubtitleAnnotationPath;if(b){h.prevDynamicSubtitleAnnotationPath=b}h.dynamicSubtitleAnnotationPath=undefined}}l.setProperty("/subTitle",a.getVisibilityOfElement(h,"subTitle",v));l.setProperty("/dynamicSubTitle",a.getVisibilityOfElement(h,"dynamicSubTitle",v)&&!!h["dynamicSubTitle"]&&!!h["dynamicSubTitle"].length);l.refresh(true);break;case"enableAddToInsights":h[t]=e.getSource().getState()?true:false;break;case"kpiHeader":r=this.getView();l=r.getModel("visibility");d=l.getData();d.valueSelectionInfo=true;d.dataPoint=true;if(h.tabs&&h.tabs.length){d.dataPoint=a.getVisibilityOfElement(h,"dataPoint",true)}if(!h.valueSelectionInfo){h.valueSelectionInfo=" "}if(v){o=h.defaultViewSelected;h.tabs.forEach(function(e){s=e.prevDataPointAnnotationPath;if(s){e.dataPointAnnotationPath=s}else{e.dataPointAnnotationPath=h.dataPoint[0].value}});h.dataPointAnnotationPath=h.tabs[o-1].dataPointAnnotationPath}else{s=h.prevDataPointAnnotationPath;if(s){h.dataPointAnnotationPath=s}else{h.dataPointAnnotationPath=h.dataPoint[0].value}}l.refresh(true);break;case"listType":h[t]=e.getSource().getState()?"extended":"condensed";break;case"listFlavor":h[t]=e.getSource().getState()?"bar":"";break;case"entitySet":if(v){h.tabs[C-1][t]=h[t];n.resetTabFields.forEach(function(e){delete h.tabs[C-1][e];delete h[e]});var m=h.metaModel,y=m.getODataEntitySet(h.tabs[C-1].entitySet),_=h.defaultViewSelected;h.entityType=m.getODataEntityType(y.entityType);this.resetSupportingObjectsOnEntitySetChange(h,_)}break;case"kpiAnnotationPath":if(v){h.tabs[C-1][t]=h[t]}var I=g.byId("sapOvpSettingsKPIAnnotation").getSelectedKey();if(h.entityType[I]){this.setVariant(h,I)}a.addKPINavApplicationName(h);this.getView().getModel().refresh(true);break;case"selectionPresentationAnnotationPath":if(v){h.tabs[C-1][t]=h[t]}var I=g.byId("sapOvpSettingsFilterAndPresentedBy").getSelectedKey();if(h.entityType[I]){this.setVariant(h,I)}this.getView().getModel().refresh(true);break;case"listFlavorForLinkList":case"annotationPath":case"chartAnnotationPath":case"presentationAnnotationPath":case"selectionAnnotationPath":case"dynamicSubtitleAnnotationPath":case"dataPointAnnotationPath":if(v){h.tabs[C-1][t]=h[t]}break;case"noOfRows":case"ovpHeaderTitle":case"add":case"removeVisual":case"changeVisual":case"sort":case"delete":break;default:break}S.cards[f]={settings:h};if(a.bNewKPICardFlag){S.cards[f].template=h.template}else{S.cards[f].template=c.template}if(a.bNewKPICardFlag){if(p&&g.getModel(p)){g.getModel(p).destroy();g.setModel(null,p)}var V=this._oCardManifestSettings.selectedKPI,M=new E(V.ODataURI,{annotationURI:V.ModelURI,defaultCountMode:O.None});p=P._getLayerNamespace()+".kpi_card_model_"+a.getTrimmedDataURIName(V.ODataURI);g.setModel(M,p)}if(!!p){S.cards[f].model=p}if(a.bNewKPICardFlag){M.getMetaModel().loaded().then(function(){var e=i.createCardComponent(g,S,"dialogCard");e.then(function(){g.setBusy(false);this.setBusy(false)}.bind(this)).catch(function(){a.setErrorMessage(S.cards[f].settings,"OVP_KEYUSER_ANNOTATION_FAILURE");a.createErrorCard(g,S,f)})}.bind(this),function(e){w.error(e);this.setBusy(false);g.setBusy(false)}.bind(this));M.attachMetadataFailed(function(){a.setErrorMessage(S.cards[f].settings,"OVP_KEYUSER_METADATA_FAILURE");a.createErrorCard(g,S,f)})}else{this.createCard(g,S)}},setVariant:function(e,t){var i=e.entityType[t];var a=i.SelectionVariant&&i.SelectionVariant.Path;if(/^@/.test(a)){a=a.slice(1)}e.selectionAnnotationPath=a;var s;if(t.indexOf(".KPI")!==-1){s=i.Detail&&i.Detail.DefaultPresentationVariant&&i.Detail.DefaultPresentationVariant.Path}else if(t.indexOf(".SelectionPresentationVariant")!==-1){s=i.PresentationVariant&&i.PresentationVariant.Path}if(/^@/.test(s)){s=s.slice(1)}e.presentationAnnotationPath=s;var n=e.entityType[e.presentationAnnotationPath]&&e.entityType[e.presentationAnnotationPath].Visualizations;for(var o=0;o<n.length;o++){var r=n[o].AnnotationPath;if(r){if(/^@/.test(r)){r=r.slice(1)}if(/.Chart/.test(r)){e.chartAnnotationPath=r;break}}}},createCard:function(e,t){this.setBusy(true);var a=i.createCardComponent(e,t,"dialogCard");a.then(function(){this.setBusy(false);var e=this.getView().byId("sapOvpStaticLinkListLineItem");if(e){var t=e.getSelectedItem();if(t){var i=t.getId(),a=this.getIndexFromIdForStaticLinkList(i);this.setCurrentActivePageForCarouselCard(a)}}}.bind(this));a.catch(function(){this.setBusy(false)}.bind(this))},updateCard:function(e,t){var i=this._oCardManifestSettings,a=this.getView().byId("dialogCard");this.setEnablePropertyForResetAndSaveButton(true);if(a.getVisible()){if(i.tabs&&i.tabs.length){var s=parseInt(i.selectedKey,10);i.isViewResetEnabled=true;i.aViews[s].isViewResetEnabled=true}var n=e.getSource(),o=t?t:n.getId(),r=false;if(o.indexOf("sapOvpStaticLinkListLineItem")!==-1){var l=n.getModel(),d=l.getData().staticContent,h=this.getIndexFromIdForStaticLinkList(o);this.setCurrentActivePageForCarouselCard(h);l.setProperty("/lineItemId",d[h].id);if(o.indexOf("sapOvpSettingsLineItemTitle")!==-1){o="sapOvpSettingsLineItemTitle"}else if(o.indexOf("sapOvpSettingsLineItemSubTitle")!==-1){o="sapOvpSettingsLineItemSubTitle"}}for(var g=0;g<this._aRefreshNotRequired.length;g++){if(o.indexOf(this._aRefreshNotRequired[g].formElementId)>-1){if(this._aRefreshNotRequired[g].isKpiSwitch&&e.getSource().getState()){break}this._fCardWithoutRefresh(e,this._aRefreshNotRequired[g]);r=true;break}}if(!r){for(var u=0;u<this._aRefreshRequired.length;u++){if(o.indexOf(this._aRefreshRequired[u].formElementId)>-1){this.setBusy(true);this._fCardWithRefresh(e,this._aRefreshRequired[u].updateProperty);break}}}var c=P.getQueryParameterValue("fiori-tools-rta-mode");if(c){for(var f in this.oMandatoryPropertiesKey){if(o.indexOf(this.oMandatoryPropertiesKey[f])>-1){var p=false,S=f+"Key",v=f+"Property";i[f]=e.getParameter("value");i[v]=e.getParameter("value");for(var f in i.ai18nProperties){if(i.ai18nProperties[f].value===e.getParameter("value")){i[S]=i.ai18nProperties[f].key;p=true;break}}if(!p){i[S]=""}break}}}}},onExit:function(){a.oSaveButton.detachPress(this.onSaveButtonPress,this);a.oResetButton.detachPress(this.onResetButton,this);a.oMessagePopOverButton.detachPress(this.handleMessagePopoverPress,this)},getListItems:function(){var e=[],t=this._oCardManifestSettings,i=this.getView(),s=i.byId("dialogCard"),n=s.getComponentInstance().getComponentData();var o=n.model.getMetaModel();var r=P.isODataV4(n.model);var l=r?"/"+t.entityType.$Type+"/@"+t.annotationPath:t.entityType.$path+"/"+t.annotationPath;var d=o.getContext(o.resolve(l,this.oView.getBindingContext()));var h=2,g=1,c=0;if(t.listFlavor==="bar"){h=1;g=2}if(t.listType&&t.listType.toLowerCase()==="extended"){h=6;g=3;c=3;if(t.listFlavor==="bar"){h=5}}else if(t.contentFragment==="sap.ovp.cards.table.Table"||t.contentFragment==="sap.ovp.cards.table.v4.Table"){h=3;g=1;c=1}t.lineItem.forEach(function(t){var i=u.getSortedDataPoints(d,t.fields);var s=u.getSortedDataFields(d,t.fields);var n=[],o=[],l=a.getQualifier(t.value);i.forEach(function(e){if(e.Title){var t=r?e.Title:e.Title.String;o.push(a.checkForEmptyString(t,""))}else{o.push(C.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[l]))}});s.forEach(function(e){if(e.Label){var t=r?e.Label:e.Label.String;n.push(t)}else{n.push(C.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[l]))}});var f=Math.min(o.length,g),p=Math.min(c,f),S=n.slice(0,h-p).concat(o.slice(0,f));S.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)});e.push({Value:t.value,Label:t.name,VisibleFields:S.toString()})});return e},onSearch:function(e){var t=this.getView(),i=t.getModel(),a;this._filterTable(e,["GroupTitle","KPITitle","GroupID","KPIID","KPIQualifier"],"sapOvpKPITable");a=t.byId("sapOvpKPITable").getBinding("items").getLength();i.setProperty("/NoOfKPIItem",a);i.refresh(true)},_filterTable:function(e,t,i){var a=e.getParameter("query"),s=null,n=[];for(var o=0;o<t.length;o++){n.push(new r(t[o],l.Contains,a))}if(a){s=new r(n,false)}this.getView().byId(i).getBinding("items").filter(s,"Application")},onItemPress:function(e){this.getView().setBusy(true);this.getView().setBusyIndicatorDelay(0);var t=e.getSource(),i=t.getBindingContext(),a=i.getObject();this.getView().byId("sapOvpSettingsTitle").setValue(a.GroupTitle);this.getView().byId("sapOvpSettingsSubTitle").setValue(a.KPITitle);this.onKPIUpdate(a);this.updateCard(e,"sapOvpSettingsNewKPICard")},onKPIUpdate:function(e){this._oCardManifestSettings.entitySet=e.ODataEntityset;this._oCardManifestSettings.kpiAnnotationPath="com.sap.vocabularies.UI.v1.KPI#"+e.KPIQualifier;this._oCardManifestSettings.title=e.GroupTitle;this._oCardManifestSettings.subTitle=e.KPITitle;this._oCardManifestSettings.template="sap.ovp.cards.charts.analytical";this._oCardManifestSettings.selectedKPI=e},onSeePress:function(){this.attachBrowserHeightChangeHandler();var e=new S("KPIItemCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.KPIItemDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_KPI_DIALOG_TITLE"),buttons:[e]}).addStyleClass("sapOvpSettingsDialogBox");var i=new t({KPIItem:this._oCardManifestSettings.KPIData});i.setSizeLimit(this._oCardManifestSettings.KPIData.length);i.setProperty("/densityStyle",this.getDensityStyle());i.setProperty("/NoOfKPIItem",i.getProperty("/KPIItem").length);var a=new V("KPIItemDialogContent",{viewName:"sap.ovp.cards.rta.SelectKPI",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:i.createBindingContext("/")},models:{tableRows:i}}}});a.setModel(i);a.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.KPIItemDialog.addContent(a);a.loaded().then(function(t){this._oKPIItemDialogContentView=t;t.getController().updateKPIItemPath=function(t,i){this.getView().setBusy(true);this.getView().setBusyIndicatorDelay(0);this.getView().byId("sapOvpSettingsTitle").setValue(t.GroupTitle);this.getView().byId("sapOvpSettingsSubTitle").setValue(t.KPITitle);this.onKPIUpdate(t);this.updateCard(i,"sapOvpSettingsNewKPICard");this.cleanAndCloseDialog(e)}.bind(this);e.attachPress(function(){this.cleanAndCloseDialog(e)}.bind(this));this.KPIItemDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},openLineItemValueHelpDialog:function(e){this.attachBrowserHeightChangeHandler();var i=new I;this._oEvent=Object.assign(i,e);var s=new S("lineItemCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.lineItemDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LINEITEM_ANNO"),buttons:[s]}).addStyleClass("sapOvpSettingsDialogBox");var n=new t({lineItem:this.getListItems()});n.setProperty("/densityStyle",this.getDensityStyle());n.setProperty("/NoOfLineItem",n.getProperty("/lineItem").length);var o=new V("lineItemDialogContent",{viewName:"sap.ovp.cards.rta.SelectLineItem",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:n.createBindingContext("/")},models:{tableRows:n}}}});o.setModel(n);o.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.lineItemDialog.addContent(o);o.loaded().then(function(e){this._oLineItemDialogContentView=e;e.getController().updateLineItemPath=function(e){var t=e.Value,i=this._oCardManifestSettings,n;if(i.tabs&&i.tabs.length){n=parseInt(i.selectedKey,10)}i.lineItemQualifier=a.getQualifier(t);i.annotationPath=t;if(i.tabs&&i.tabs.length){i.tabs[n-1].annotationPath=i.annotationPath}this.getView().byId("sapOvpSettingsLineItem").setValue(e.Label);this._fCardWithRefresh(this._oEvent,"annotationPath");this.setEnablePropertyForResetAndSaveButton(true);if(i.tabs&&i.tabs.length){i.isViewResetEnabled=true;i.aViews[n].isViewResetEnabled=true}this.cleanAndCloseDialog(s)}.bind(this);s.attachPress(function(){this.cleanAndCloseDialog(s)}.bind(this));this.lineItemDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},createAndSubmitChange:function(){var e;if(a.bNewStaticLinkListCardFlag){e=s.getPayLoadForNewStaticLinkListCard.bind(this)(a)}else if(a.bNewKPICardFlag){e=s.getPayLoadForNewKPICard.bind(this)(a)}else if(a.bAddNewCardFlag){e=s.getPayLoadForNewCard.bind(this)(a)}else{e=s.getPayLoadForEditCard.bind(this)(a)}this.settingsResolve(e);a.dialogBox.close()},setMandatoryFieldState:function(e,t){t.setProperty("/dataPoint",e);t.setProperty("/valueSelectionInfo",e);t.setProperty("/requiredSubTitle",e);var i=t.getData(),s=false;for(var n=0;n<a.aVisiblePropertiesForAnnotation.length;n++){if(i[a.aVisiblePropertiesForAnnotation[n].sProperty]){s=true;break}}t.setProperty("/setAnnotationCardProperties",s)},EnableKPIHeaderFields:function(e){var t=this.getView().getModel("visibility");if(!e){this.setMandatoryFieldState(false,t)}else{this.setMandatoryFieldState(true,t)}},onCardTypeSelected:function(e){var t=e.getParameters().id;this._oCardManifestSettings.template=e.getSource().getSelectedKey();this.getView().byId("sapOVPAddKpiCheckBoxID").setSelected(false);this.getView().byId("sapOVPAddODataSelect").setSelected(false);this._oCardManifestSettings.addKPIHeaderCheckBox=false;this.EnableKPIHeaderFields(this._oCardManifestSettings.addKPIHeaderCheckBox);this.resetPropertiesVisibility(t,this._oCardManifestSettings)},onDatasourceComboboxChanged:function(e){var t=e.getParameters().id;this._oCardManifestSettings.model=e.getParameters().value;this._oCardManifestSettings.allEntitySet="";if(!a.newDataSource){var i=this._oCardManifestSettings.datasources;for(var s=0;s<i.length;s++){if(i[s].Title===this._oCardManifestSettings.model){this._oCardManifestSettings.metaModel=i[s].oMetaModel}}a.addSupportingObjects(this._oCardManifestSettings);if(this._oCardManifestSettings.allEntitySet.length===0){this._oCardManifestSettings.model="";this.resetPropertiesVisibility(t,this._oCardManifestSettings);var n=C.getText("OVP_KEYUSER_NO_RELEVANT_ANNOTATION");this.handleValueStateofComboBox(n,"datasSourceExisting","sapOVPDataSourceExistingComboBox",true)}else{this.handleValueStateofComboBox("","datasSourceExisting","sapOVPDataSourceExistingComboBox",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings)}}else{var o=this._oCardManifestSettings.datasources.filter(function(e){return e.Title===this._oCardManifestSettings.model}.bind(this));getMetaModelForNewDataSource(o,a.sApplicationId).then(function(e){if(e){a.newDataSourceModel=e.modelInformation;e.getODataEntityContainer=function(){return e.oEntityContainers};e.getObject=function(t){return e.oSchema};e.getODataEntityType=function(t){var i=e.oSchema[0].entityType.filter(function(i){var a=t.substr((e.oEntityContainers.namespace+".").length);return i.name===a});return i[0]};this._oCardManifestSettings.metaModel=e;a.addSupportingObjects(this._oCardManifestSettings);if(this._oCardManifestSettings.allEntitySet.length===0){this._oCardManifestSettings.model="";this.resetPropertiesVisibility(t,this._oCardManifestSettings);var i=C.getText("OVP_KEYUSER_NO_RELEVANT_ANNOTATION");this.handleValueStateofComboBox(i,"datasSourceNew","sapOVPDataSourceNewInput",true)}else{this.handleValueStateofComboBox("","datasSourceNew","sapOVPDataSourceNewInput",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings)}}else{this._oCardManifestSettings.model="";this.resetPropertiesVisibility(t,this._oCardManifestSettings);var i=C.getText("OVP_KEYUSER_UNAVAILABLE_DATASOURCE");this.handleValueStateofComboBox(i,"datasSourceNew","sapOVPDataSourceNewInput",true)}}.bind(this))}},onEntitySetChanged:function(e,t){var i=this._oCardManifestSettings.metaModel.getObject("/dataServices/schema")[0].entityType;this.aVariantNames.forEach(function(e){if(this._oCardManifestSettings[e.sPath]){this._oCardManifestSettings[e.sPath]=[]}}.bind(this));for(var s in i){if(i[s].name===e){this._oCardManifestSettings.entityType=i[s];break}}a.addSupportingObjects(this._oCardManifestSettings);this.getView().byId("sapOVPAddODataSelect").setSelected(false);this.resetPropertiesVisibility(t,this._oCardManifestSettings)},addStaticParameterRow:function(){var e=this.getView().getModel();var t=e.getProperty("/aAllStaticParameters");if(t&&t.length){t.push({key:"",value:""})}else{t=[];t.push({key:"",value:""})}e.setProperty("/aAllStaticParameters",t)},addActionRow:function(){var e=this.getView().getModel();var t=e.getProperty("/objectStreamCardsSettings/customActions");if(t&&t.length){t.push({text:"",press:"",position:""})}else{t=[];t.push({text:"",press:"",position:""})}e.setProperty("/objectStreamCardsSettings/customActions",t)},onParameterDelete:function(e){var t=this.getView().getModel();var i=t.getProperty("/aAllStaticParameters");var a=e.getSource().getBindingContext().getObject()&&e.getSource().getBindingContext().getObject()["key"];i=i.filter(function(e){return e["key"]!=a});t.setProperty("/aAllStaticParameters",i);if(!m(this._oCardManifestSettings.staticParameters,this._oOriginalCardManifestSettings.staticParameters)){this.setEnablePropertyForResetAndSaveButton(true)}this.getView().getModel().refresh()},onActionDelete:function(e){var t=this.getView().getModel();var i=t.getProperty("/objectStreamCardsSettings/customActions");var a=e.getSource().getBindingContext().getObject()&&e.getSource().getBindingContext().getObject()["text"];i=i.filter(function(e){return e["text"]!=a});t.setProperty("/objectStreamCardsSettings/customActions",i);if(!m(this._oCardManifestSettings.objectStreamCardsSettings,this._oOriginalCardManifestSettings.objectStreamCardsSettings)){this.setEnablePropertyForResetAndSaveButton(true)}},updateProperty:function(e){var t=e.getSource().getId();var i=false,s;if(this._oCardManifestSettings.tabs&&this._oCardManifestSettings.tabs.length){i=true;s=parseInt(this._oCardManifestSettings.selectedKey,10);this._oCardManifestSettings.isViewResetEnabled=true;this._oCardManifestSettings.aViews[s].isViewResetEnabled=true}for(var n=0;n<this._updateManifestProperties.length;n++){if(t.indexOf(this._updateManifestProperties[n].formElementId)>-1){var o=this._updateManifestProperties[n].formElement;switch(o){case"entitySet":var r=e.getSource().getSelectedKey();if(!i){this._oCardManifestSettings["entitySet"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["entitySet"]=e.getParameter("value")}this.onEntitySetChanged(r,t);if(this._oCardManifestSettings["entitySet"].length!==0){this.validateComboBox(this._oCardManifestSettings,"entitySet")}break;case"identificationAnnotationPath":if(!i){this._oCardManifestSettings["identificationAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["identificationAnnotationPath"]=e.getParameter("value")}break;case"selectionPresentationAnnotationPath":if(!i){this._oCardManifestSettings["selectionPresentationAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["selectionPresentationAnnotationPath"]=e.getParameter("value")}break;case"selectionAnnotationPath":if(!i){this._oCardManifestSettings["selectionAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["selectionAnnotationPath"]=e.getParameter("value")}break;case"presentationAnnotationPath":if(!i){this._oCardManifestSettings["presentationAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["presentationAnnotationPath"]=e.getParameter("value")}break;case"annotationPath":if(!i){this._oCardManifestSettings["annotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["annotationPath"]=e.getParameter("value")}break;case"listType":this._oCardManifestSettings.listType=e.getSource().getSelectedKey();break;case"listFlavor":this._oCardManifestSettings.listFlavor=e.getSource().getSelectedKey();if(t.indexOf("sapOVPLinkListFlavor")!==-1){this.validateComboBox(this._oCardManifestSettings,"listFlavor")}break;case"KPICheckBox":this._oCardManifestSettings.addKPIHeaderCheckBox=e.getParameter("selected");this.EnableKPIHeaderFields(this._oCardManifestSettings.addKPIHeaderCheckBox);this.validateComboBox(this._oCardManifestSettings,"KPICheckBox",this._oCardManifestSettings.addKPIHeaderCheckBox);break;case"dataPointAnnotationPath":if(!i){this._oCardManifestSettings["dataPointAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["dataPointAnnotationPath"]=e.getParameter("value")}this.validateComboBox(this._oCardManifestSettings,"dataPointAnnotationPath");break;case"addODataSelectCheckBox":this._oCardManifestSettings.addODataSelectCheckBox=e.getParameter("selected");break;case"requireAppAuthorization":this._oCardManifestSettings.requireAppAuthorization=e.getParameter("value");break;case"kpiAnnotationPath":if(!i){this._oCardManifestSettings["kpiAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["kpiAnnotationPath"]=e.getParameter("value")}this._oCardManifestSettings.kpiAnnotationPath=e.getParameter("value");break;case"navigationPath":this._oCardManifestSettings.navigationPath=e.getParameter("value");break;case"title":case"subTitle":case"valueSelectionInfo":var l=false;var d=o+"Key";var h=o+"Property";this._oCardManifestSettings[o]=e.getParameter("value");this._oCardManifestSettings[h]=e.getParameter("value");for(var g in this._oCardManifestSettings.ai18nProperties){if(this._oCardManifestSettings.ai18nProperties[g].value===e.getParameter("value")){this._oCardManifestSettings[d]=this._oCardManifestSettings.ai18nProperties[g].key;l=true;break}}if(!l){this._oCardManifestSettings[d]=""}this.validateComboBox(this._oCardManifestSettings,o);break;case"existingDatasSource":if(e.mParameters.selected){a.newDataSource=false;this._oCardManifestSettings.newDataSource=false;this.handleValueStateofComboBox("","datasSourceExisting","sapOVPDataSourceExistingComboBox",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings);var u=this.getView().getModel();u.setProperty("/datasources",this._oCardManifestSettings.datasourcesFromManifest)}break;case"newDatasSource":if(e.mParameters.selected){a.newDataSource=true;this._oCardManifestSettings.newDataSource=true;this.handleValueStateofComboBox("","datasSourceNew","sapOVPDataSourceNewInput",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings);this.getView().setBusy(true);getNewDataSources(a.sApplicationId).then(function(e){this.getView().setBusy(false);var t=e.results;var i=this.getView().getModel();i.setSizeLimit(t.length);i.setProperty("/datasources",t)}.bind(this))}break;default:break}}}},resetPropertiesVisibility:function(e,t){if(e.indexOf("sapOVPExistingDataSource")!==-1||e.indexOf("sapOVPNewDataSource")!==-1){this._updateManifestProperties.forEach(function(e){if(!e.formElementId.includes("sapOVPExistingDataSource")&&!e.formElementId.includes("sapOVPNewDataSource")){if(e.formElementId.includes("sapOVPAddODataSelect")){t[e.formElement]=false}else{t[e.formElement]=""}}});t.model=""}else if(e.indexOf("sapOVPDataSource")!==-1){this._updateManifestProperties.forEach(function(i){if(!i.formElementId.includes("sapOVPExistingDataSource")&&!i.formElementId.includes("sapOVPNewDataSource")&&!e.includes(i.formElementId)){if(i.formElementId.includes("sapOVPAddODataSelect")){t[i.formElement]=false}else{t[i.formElement]=""}}})}else if(e.indexOf("sapOVPCardType")!==-1){this._updateManifestProperties.forEach(function(e){if(!(e.formElementId.includes("sapOVPDataSource")||e.formElementId.includes("sapOVPCardType"))){if(e.formElementId.includes("sapOVPAddODataSelect")){t[e.formElement]=false}else{t[e.formElement]=""}}})}else if(e.indexOf("sapOVPEntitySetList")!==-1){var i=this.getView().getModel("visibility").getData().showViewSwitch;this._updateManifestProperties.forEach(function(e){if(!(e.formElementId.includes("sapOVPDataSource")||e.formElementId.includes("sapOVPCardType")||e.formElementId.includes("sapOVPEntitySetList"))){if(e.formElementId.includes("sapOVPAddODataSelect")){t[e.formElement]=false}else{if(!i){t[e.formElement]=""}else{n.tabFields.forEach(function(e){if(e!=="entitySet"&&e!=="value"){t[e]=""}})}}}})}a.resetErrorHandling();this.setEnablePropertyForResetAndSaveButton(false);a.setVisibilityForFormElements(t);this.getView().getModel().refresh();this.getView().getModel("visibility").refresh()}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SettingsDialogConstants", [],function(){"use strict";return{aVariantNames:[{sVariant:".SelectionVariant",sPath:"selectionVariant"},{sVariant:".PresentationVariant",sPath:"presentationVariant"},{sVariant:".SelectionPresentationVariant",sPath:"selectionPresentationVariant"},{sVariant:".KPI",sPath:"KPI"},{sVariant:".Identification",sPath:"identification"},{sVariant:".DataPoint",sPath:"dataPoint",isMandatoryField:true},{sVariant:".Chart",sPath:"chart",isMandatoryField:true},{sVariant:".Chart",sPath:"chartSPVorKPI",isMandatoryField:true},{sVariant:".SelectionVariant",sPath:"selectionVariantSPVorKPI"},{sVariant:".PresentationVariant",sPath:"presentationVariantSPVorKPI"},{sVariant:".LineItem",sPath:"lineItem",isMandatoryField:true},{sVariant:".HeaderInfo",sPath:"dynamicSubTitle",isMandatoryField:true}],aVisiblePropertiesForAnnotation:[{sProperty:"selectionVariant"},{sProperty:"presentationVariant"},{sProperty:"selectionPresentationVariant"},{sProperty:"KPI"},{sProperty:"identification"},{sProperty:"dataPoint"},{sProperty:"dataPointSelectionMode"},{sProperty:"lineItem"}],tabFields:["entitySet","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","value"],mainFields:["title","subTitle","valueSelectionInfo","listType","listFlavor","sortOrder","sortBy","stopResizing","defaultSpan"],resetTabFields:["dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","selectionPresentationAnnotationPath","kpiAnnotationPath"],cardSettingsForStaticLinkListCard:["title","subTitle","listFlavor","stopResizing","defaultSpan"],AllCardSettingsForKPICard:["title","subTitle","stopResizing","defaultSpan","entitySet","kpiAnnotationPath","identificationAnnotationPath"],allCardSettings:["entitySet","listType","listFlavor","sortOrder","sortBy","imageUri","targetUri","enableAddToInsights","openInNewWindow","semanticObject","action","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","stopResizing","defaultSpan"],cardSettingsArrayLevel:{staticContent:{text:["title","subTitle","imageAltText"],settings:["imageUri","targetUri","openInNewWindow","semanticObject","action"]},tabs:{text:["value"],settings:["entitySet","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","navigation"],onlyTabLevelProps:["value"],checkForRemoval:["entitySet"]}},cardSettingsForComplex:{text:["title","subTitle","valueSelectionInfo","itemText"],settings:["listType","listFlavor","sortOrder","sortBy","stopResizing","defaultSpan","customParams","staticParameters","objectStreamCardsSettings","enableAddToInsights"]},cardSettings:{text:["title","subTitle","valueSelectionInfo","itemText"],settings:["listType","listFlavor","sortOrder","sortBy","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","stopResizing","defaultSpan","customParams","staticParameters","objectStreamCardsSettings","enableAddToInsights"]},cardSettingsWithText:["title","subTitle","valueSelectionInfo","itemText",{staticContent:["title","subTitle","imageAltText"]},{tabs:["value"]}],oVisibility:{cardPreview:true,stopResizing:false,noOfRows:false,noOfColumns:false,title:true,showEntitySet:false,dynamicSwitchStateSubTitle:false,dynamicSwitchSubTitle:false,enableAddToInsights:true,dynamicSubTitle:false,subTitle:true,kpiHeader:true,valueSelectionInfo:true,listType:true,listFlavor:true,selectionVariantSPVorKPI:true,presentationVariantSPVorKPI:true,chartSPVorKPI:true,selectionPresentationVariant:true,KPI:true,selectionVariant:true,presentationVariant:true,lineItem:true,identification:true,dataPoint:true,chart:true,links:false,lineItemTitle:false,lineItemSubTitle:false,staticLink:false,viewSwitch:false,moveToTheTop:false,moveUp:false,moveDown:false,moveToTheBottom:false,delete:false,showMore:true,removeVisual:false,selectCard:false,addKPIHeader:false,setEntitySet:false,setCardProperties:false,setGeneralCardProperties:false,requiredSubTitle:false,showNewCardTypes:false,addCustomActions:false},oI18nKeyValueProperty:{title:"titleKey",subTitle:"subTitleKey",valueSelectionInfo:"valueSelectionInfoKey"},oI18nValueProperty:{title:"title",subTitle:"subTitle",valueSelectionInfo:"valueSelectionInfo"},oMandatoryPropertiesKey:{title:"sapOvpSettingsTitle",subTitle:"sapOvpSettingsSubTitle",valueSelectionInfo:"sapOvpSettingsValueSelectionInfo"},_aRefreshNotRequired:[{formElementId:"sapOvpSettingsTitle",cardElementId:"ovpHeaderTitle"},{formElementId:"sapOvpSettingsViewName",cardElementId:"ovp_card_dropdown"},{formElementId:"sapOvpDefaultViewSwitch",cardElementId:""},{formElementId:"sapOvpSettingsSubTitle",cardElementId:"SubTitle-Text"},{formElementId:"sapOvpSettingsLineItemTitle",cardElementId:"linkListTitleLabel"},{formElementId:"sapOvpSettingsLineItemSubTitle",cardElementId:"linkListSubTitleLabel"},{formElementId:"sapOvpSettingsValueSelectionInfo",cardElementId:"ovpValueSelectionInfo"},{formElementId:"sapOvpSettingsIdentification",cardElementId:"",updateProperty:"identificationAnnotationPath"},{formElementId:"sapOvpSettingsKPIHeaderSwitch",cardElementId:"kpiHeader",isKpiSwitch:true}],_aRefreshRequired:[{formElementId:"sapOvpSettingsKPIHeaderSwitch",updateProperty:"kpiHeader"},{formElementId:"sapOvpSettingsSwitchSubTitle",updateProperty:"subTitleSwitch"},{formElementId:"sapOvpSettingsSwitchInsight",updateProperty:"enableAddToInsights"},{formElementId:"sapOvpSettingsListType",updateProperty:"listType"},{formElementId:"sapOvpSettingsListFlavorForList",updateProperty:"listFlavor"},{formElementId:"sapOvpSettingsListFlavorForLinkList",updateProperty:"listFlavorForLinkList"},{formElementId:"sapOvpSettingsSortOrder",updateProperty:"sortOrder"},{formElementId:"sapOvpSettingsSortBy",updateProperty:"sortBy"},{formElementId:"sapOvpSettingsDynamicSubTitle",updateProperty:"dynamicSubtitleAnnotationPath"},{formElementId:"sapOvpSettingsFilterAndPresentedBy",updateProperty:"selectionPresentationAnnotationPath"},{formElementId:"sapOvpSettingsFilterBy",updateProperty:"selectionAnnotationPath"},{formElementId:"sapOvpSettingsPresentedBy",updateProperty:"presentationAnnotationPath"},{formElementId:"sapOvpSettingsDataPoint",updateProperty:"dataPointAnnotationPath"},{formElementId:"sapOvpSettingsChart",updateProperty:"chartAnnotationPath"},{formElementId:"sapOvpSettingsLineItem",updateProperty:"annotationPath"},{formElementId:"sapOvpSettingsEntitySet",updateProperty:"entitySet"},{formElementId:"sapOvpSettingsStaticLinkListDelete",updateProperty:"delete"},{formElementId:"sapOvpSettingsStaticLinkListAdd",updateProperty:"add"},{formElementId:"sapOvpSettingsStaticLinkListSort",updateProperty:"sort"},{formElementId:"sapOvpSettingsStaticLinkListChangeVisual",updateProperty:"changeVisual"},{formElementId:"sapOvpSettingsStaticLinkListRemoveVisual",updateProperty:"removeVisual"},{formElementId:"sapOvpSettingsNumberOfRows",updateProperty:"noOfRows"},{formElementId:"sapOvpSettingsKPIAnnotation",updateProperty:"kpiAnnotationPath"},{formElementId:"sapOvpSettingsNewKPICard",updateProperty:""}],aListType:[{key:"condensed",name:"Condensed"},{key:"extended",name:"Extended"}],aListFlavour:[{key:"standard",name:"Standard"},{key:"bar",name:"Bar"}],aLinkListFlavour:[{key:"carousel",name:"Carousel"},{key:"standard",name:"Standard"}],aDataPointSelectionMode:[{key:"dataPointNav",name:"Data Point Navigation"},{key:"chartNav",name:"Chart Navigation"}],_updateManifestProperties:[{formElementId:"sapOVPExistingDataSource",formElement:"existingDatasSource"},{formElementId:"sapOVPNewDataSource",formElement:"newDatasSource"},{formElementId:"sapOVPDataSourceExistingComboBox",formElement:"datasSourceExisting"},{formElementId:"sapOVPDataSourceNewInput",formElement:"datasSourceNew"},{formElementId:"sapOVPCardType",formElement:"template"},{formElementId:"sapOVPEntitySetList",formElement:"entitySet"},{formElementId:"sapOvpCardTitle",formElement:"title"},{formElementId:"sapOvpCardTitle",formElement:"titleKey"},{formElementId:"sapOvpCardTitle",formElement:"titleProperty"},{formElementId:"sapOvpCardSubTitle",formElement:"subTitle"},{formElementId:"sapOvpCardSubTitle",formElement:"subTitleKey"},{formElementId:"sapOvpCardSubTitle",formElement:"subTitleProperty"},{formElementId:"sapOVPIdentification",formElement:"identificationAnnotationPath"},{formElementId:"sapOVPSelectionPresentationVariant",formElement:"selectionPresentationAnnotationPath"},{formElementId:"sapOVPSelectionVariant",formElement:"selectionAnnotationPath"},{formElementId:"sapOVPPresentationVariant",formElement:"presentationAnnotationPath"},{formElementId:"sapOVPAnnotationPath",formElement:"annotationPath"},{formElementId:"sapOvpSettingsSwitchInsights",updateProperty:"enableAddToInsights"},{formElementId:"sapOVPListType",formElement:"listType"},{formElementId:"sapOVPListFlavor",formElement:"listFlavor"},{formElementId:"sapOVPAddKpiCheckBoxID",formElement:"KPICheckBox"},{formElementId:"sapOvpDataPoint",formElement:"dataPointAnnotationPath"},{formElementId:"sapOVPAddODataSelect",formElement:"addODataSelectCheckBox"},{formElementId:"sapOvpCardProperiesAuthorization",formElement:"requireAppAuthorization"},{formElementId:"sapOvpKpiAnnotationPath",formElement:"kpiAnnotationPath"},{formElementId:"sapOVPDataPointSelectionMode",formElement:"navigationPath"},{formElementId:"sapOVPLinkListFlavor",formElement:"listFlavor"},{formElementId:"sapOvpValueSelectionInfo",formElement:"valueSelectionInfo"},{formElementId:"sapOvpSettingsTitle",formElement:"title"},{formElementId:"sapOvpSettingsSubTitle",formElement:"subTitle"}],aCardType:[{template:"sap.ovp.cards.list",text:"List"},{template:"sap.ovp.cards.linklist",text:"Link List"},{template:"sap.ovp.cards.v4.linklist",text:"Link List"},{template:"sap.ovp.cards.table",text:"Table"},{template:"sap.ovp.cards.stack",text:"Stack"},{template:"sap.ovp.cards.charts.analytical",text:"Analytical"}],NewCardSettings:[{template:"sap.ovp.cards.linklist",cardSettings:["title","subTitle","listFlavor","entitySet","requireAppAuthorization","annotationPath","identificationAnnotationPath","selectionAnnotationPath","presentationAnnotationPath","selectionPresentationAnnotationPath"],text:["title","subTitle","listFlavor","requireAppAuthorization"]},{template:"sap.ovp.cards.list",cardSettings:["title","subTitle","listType","listFlavor","entitySet","enableAddToInsights","requireAppAuthorization","annotationPath","identificationAnnotationPath","selectionAnnotationPath","presentationAnnotationPath","selectionPresentationAnnotationPath","addODataSelect","dataPointAnnotationPath","valueSelectionInfo"],text:["title","subTitle","listType","listFlavor","requireAppAuthorization","addODataSelect","valueSelectionInfo"]},{template:"sap.ovp.cards.table",cardSettings:["title","subTitle","entitySet","enableAddToInsights","requireAppAuthorization","annotationPath","identificationAnnotationPath","selectionAnnotationPath","presentationAnnotationPath","selectionPresentationAnnotationPath","addODataSelect","dataPointAnnotationPath","valueSelectionInfo"],text:["title","subTitle","requireAppAuthorization","addODataSelect","valueSelectionInfo"]},{template:"sap.ovp.cards.stack",cardSettings:["title","subTitle","entitySet","requireAppAuthorization","annotationPath","addODataSelect"],text:["title","subTitle","requireAppAuthorization","addODataSelect"]},{template:"sap.ovp.cards.charts.analytical",cardSettings:["title","subTitle","entitySet","enableAddToInsights","requireAppAuthorization","kpiAnnotationPath","identificationAnnotationPath","navigationPath","dataPointAnnotationPath","valueSelectionInfo"],text:["title","subTitle","requireAppAuthorization","valueSelectionInfo"]}]}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Any function that needs to be exported(used outside this file) via namespace should be defined as
 * a function and then added to the return statement at the end of this file
 */
sap.ui.predefine("sap/ovp/cards/semanticDateRangeTypeHelper", [],function(){"use strict";function e(e,t,i,n){if(e.filterSettings&&e.filterSettings.dateSettings&&e.filterSettings.dateSettings.fields){var a=e.filterSettings.dateSettings.fields;Object.entries(a).forEach(function(e){var a=-1;if(i&&i.Dates){a=i.Dates.findIndex(function(t){return t.PropertyName===e[0]})}if((a===-1||Object.keys(n).indexOf(e[0])===-1)&&e[1].defaultValue){t.getConditionTypeByKey(e[0])&&t.getConditionTypeByKey(e[0]).setOperation(e[1].defaultValue.operation)}})}}return{setSemanticDateRangeDefaultValue:e}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/stack/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.stack.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.stack.Stack"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.stack.Stack"},contentPosition:{type:"string",defaultValue:"Right"},objectStreamCardsSettings:{type:"object",defaultValue:{}},objectStreamCardsTemplate:{type:"string",defaultValue:"sap.ovp.cards.quickview"},objectStreamCardsNavigationProperty:{type:"string"}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/stack/Stack.controller", ["sap/ovp/cards/generic/Card.controller","sap/m/library","sap/ui/thirdparty/jquery","sap/ovp/ui/ObjectStream","sap/ovp/cards/AnnotationHelper","sap/ui/Device","sap/ui/base/BindingParser","sap/ui/core/ComponentContainer","sap/m/Link","sap/ovp/ui/CustomData","sap/ui/core/Icon","sap/m/FlexItemData","sap/m/Text","sap/m/VBox","sap/ovp/app/resources","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ui/core/Component","sap/ui/core/Core","sap/ovp/cards/NavigationHelper"],function(t,e,jQuery,i,a,r,o,n,s,d,l,c,p,h,C,u,v,g,m,f){"use strict";var b=new v("OVP.stack.Stack");return t.extend("sap.ovp.cards.stack.Stack",{onInit:function(){t.prototype.onInit.apply(this,arguments);var e=this._oCard=this.getView().byId("stackContent");e.addEventDelegate({onclick:this.openStack.bind(this),onkeydown:function(t){if(!t.shiftKey&&(t.keyCode==13||t.keyCode==32)){t.preventDefault();this.openStack()}}.bind(this)});if(r.system.phone){this.bAfterColumnUpdateAttached=false;this.bDeviceOrientationAttached=false}this.quickViewCardContextArray=[];this.bQuickViewCardRendered=false;this.initialLoadCardLength=10;this.quickViewCardCount=0;this._createObjectStream()},onExit:function(){if(this.oObjectStream){this.oObjectStream.destroy()}},addPlaceHolder:function(t){var e=this.getView();var i=e.getModel("ovpCardProperties");var a=i.getProperty("/objectStreamCardsNavigationProperty");var r=a?true:false;if(!r){var o=f.getEntityNavigationEntries(null,this.getModel(),this.getEntityType(),i);if(o.length>0){var n=o[0].label;if(this.sPlaceHolderText==undefined){this.sPlaceHolderText=C.getText("PlaceHolder_default")}var s=this._createPlaceHolder(t,this.sPlaceHolderText,n);var d=this;s.addEventDelegate({onclick:function(){d.doNavigation(null)}});this.oObjectStream.setPlaceHolder(s)}}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);this.ovpLayout=m.byId(this.oCardComponent._sOwnerId+"---mainView--ovpLayout");if(r.system.phone){this._cardWidth=this.getView().$().width();if(!this.bAfterColumnUpdateAttached){var e=this.getOwnerComponent().getComponentData();if(e&&e.mainComponent&&e.appComponent.oOvpConfig&&e.appComponent.oOvpConfig.containerLayout!=="resizable"){var i=e.mainComponent,a=i.byId("ovpLayout");a.attachAfterColumnUpdate(function(t){this._setObjectStreamCardsSize(false)}.bind(this));this.bAfterColumnUpdateAttached=true}}if(!this.bDeviceOrientationAttached){r.orientation.attachHandler(function(t){this._setObjectStreamCardsSize(true)}.bind(this))}}if(this.bSetErrorState&&this.bSetErrorState===true){this.setErrorState();return}var o=this.getView();if(this.oObjectStream){var n=this.oObjectStream.getBinding("content");n.attachDataRequested(function(){if(this.getView().byId("stackSize")!==undefined&&this.getView().byId("stackTotalSize")!==undefined){jQuery(this.getView().byId("stackSize").getDomRef()).css("visibility","hidden");jQuery(this.getView().byId("stackTotalSize").getDomRef()).css("visibility","hidden")}},this);n.attachDataReceived(function(){var t=this.getView().getModel("ovpCardProperties").getObject("/category"),e=n.getCurrentContexts().length,i=n.getLength();o.byId("stackSize").setText(e);o.byId("stackTotalSize").setText(C.getText("Total_Size_Stack_Card",[i]));var a=this.getView().byId("stackContent").getDomRef();jQuery(a).attr("aria-label",C.getText("stackCardContent",[e,i,t]));var r=this.getView().byId("stackSize").getDomRef();jQuery(r).attr("aria-label",C.getText("stackCard",[e]));this.addPlaceHolder(i);if(this.getView().byId("stackSize")!==undefined&&this.getView().byId("stackTotalSize")!==undefined){jQuery(this.getView().byId("stackSize").getDomRef()).css("visibility","visible");jQuery(this.getView().byId("stackTotalSize").getDomRef()).css("visibility","visible")}var s=this.getView().getDomRef();var d=jQuery(s).find(".sapOvpCardContentContainer");if(i!==0){if(d.length!==0){d.addClass("sapOvpCardNavigable")}}else{if(d.length!==0){var l=d.find("[role='button']");if(l.length!==0){l.removeAttr("role")}}}},this);this.addPlaceHolder("");if(n.bPendingRequest===false){n.fireDataReceived()}if(f.checkNavigation(this.getModel(),this.getEntityType(),this.getCardPropertiesModel())){this.oObjectStream.getTitle().addStyleClass("sapOvpCardNavigable")}}},getCardItemsBinding:function(){return this&&this.oObjectStream&&this.oObjectStream.getBinding("content")},_setObjectStreamCardsSize:function(t){var e=this.getView().$().width();if(this._cardWidth!=e||t){this.oObjectStream.setCardsSize(e);this._cardWidth=e}},_createObjectStream:function(){if(this.oObjectStream instanceof i){return}var t=this.getOwnerComponent();var e=t.getComponentData&&t.getComponentData();var r;var l;if(e.i18n){this.oi18n=e.i18n}if(e&&e.mainComponent){r=e.mainComponent._getOvplibResourceBundle()}else{r=t.getOvplibResourceBundle()}l=t.getPreprocessors(r);this.oModel=e.model;this.oCardPropsModel=l.xml.ovpCardProperties;var c=this.oCardPropsModel.getProperty("/entitySet");var p=this.oCardPropsModel.getProperty("/objectStreamCardsSettings");this.oObjectStreamCardsSettings=p;var h=this.oModel.getMetaModel();var C=h.getODataEntitySet(c);var u=h.getODataEntityType(C.entityType);var v=this.oCardPropsModel.getProperty("/annotationPath");var g=v?v.split(","):[];if(e){this.oAppComponent=e.appComponent;this.oOwner=e.mainComponent}if(this.oOwner){this.oGlobalFilter=this.oOwner.getView().byId("ovpGlobalFilter")}function m(t){if(t==="ovpCardProperties"){return this.oCardPropsModel}else if(t==="dataModel"){return this.oModel}else if(t==="_ovpCache"){return{}}}var f=[{getSetting:m.bind(this),bDummyContext:true},C].concat(g);var y=a.formatItems.apply(this,f);var S=o.complexParser(y);var w=this.oCardPropsModel.getProperty("/objectStreamCardsNavigationProperty");this.bStackFlavorAssociation=w?true:false;this.oStackFilterMapping;var k=this.oCardPropsModel.getProperty("/objectStreamCardsTemplate");if(this.bStackFlavorAssociation){if(k==="sap.ovp.cards.quickview"){b.error("objectStreamCardsTemplate cannot be 'sap.ovp.cards.quickview' when objectStreamCardsNavigationProperty is provided");this.bSetErrorState=true;return}this.oStackFilterMapping=this._determineFilterPropertyId(this.oModel,C,u,w);p.entitySet=this.oModel.getMetaModel().getODataAssociationSetEnd(u,w).entitySet}else{if(k!=="sap.ovp.cards.quickview"){b.error("objectStreamCardsTemplate must be 'sap.ovp.cards.quickview' when objectStreamCardsNavigationProperty is not provided");this.bSetErrorState=true;return}var P=null;var O=this.oCardPropsModel.getProperty("/identificationAnnotationPath");var x=O?O.split(","):[];if(x&&x.length>1){P=x[1]}if(P){p.identificationAnnotationPath=P}if(u["com.sap.vocabularies.UI.v1.HeaderInfo"]&&u["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName&&u["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String){p.title=u["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String}else{p.title=u.name}p.entitySet=c}p.isObjectStream=true;S.factory=function(t,e){var i=new n;this.quickViewCardContextArray.push({sId:t,oContext:e,oComponentContainer:i});return i}.bind(this);S.clearQuickViewCard=function(){this.quickViewCardContextArray=[]}.bind(this);var j=this.oCardPropsModel.getObject("/title");this.sPlaceHolderText=this.oCardPropsModel.getObject("/itemText");var V=new s({text:j,subtle:true,press:this.handleObjectStreamTitlePressed.bind(this)}).addStyleClass("sapOvpObjectStreamHeader");V.addCustomData(new d({key:"tabindex",value:"0",writeToDom:true}));V.addCustomData(new d({key:"aria-label",value:j,writeToDom:true}));this.oObjectStream=new i(this.getView().getId()+"_ObjectStream",{title:V,content:S});this.oObjectStream.setModel(this.oModel)},_renderQuickViewCards:function(t,e,i){return new Promise(function(a,r){var o=this.oCardPropsModel.getProperty("/objectStreamCardsSettings"),n;if(this.bStackFlavorAssociation){n={filters:[{path:this.oStackFilterMapping.foreignKey,operator:"EQ",value1:e.getProperty(this.oStackFilterMapping.key)}]};o=u({},n,this.oObjectStreamCardsSettings)}var s={name:this.oCardPropsModel.getProperty("/objectStreamCardsTemplate"),componentData:{cardId:t,model:this.oModel,settings:o,appComponent:this.oAppComponent,mainComponent:this.oOwner},manifest:false};if(this.oGlobalFilter){s.componentData.globalFilter={getUiState:this.oGlobalFilter.getUiState.bind(this.oGlobalFilter)}}var d=this.oi18n;g.create(s).then(function(t){t.setBindingContext(e);if(d){t.setModel(d,"@i18n")}i.setComponent(t);a();i.setBindingContext=function(e){t.setBindingContext(e)}})}.bind(this))},_determineFilterPropertyId:function(t,e,i,r){var o,n=i.namespace,s,d;for(var l=0;l<i.navigationProperty.length;l++){if(i.navigationProperty[l].name===r){o=i.navigationProperty[l];break}}s=o.relationship;d=a.getAssociationObject(t,s,n);var c=d.referentialConstraint,p={};if(c){p.foreignKey=c.dependent.propertyRef[0].name;p.key=c.principal.propertyRef[0].name;return p}},_createPlaceHolder:function(t,i,a){var r=new l({src:"sap-icon://display-more",useIconTooltip:false,layoutData:new c({alignSelf:e.FlexAlignSelf.Center,styleClass:"sapOvpStackPlaceHolderIconContainer"})});r.addStyleClass("sapOvpStackPlaceHolderIcon");var o=t+" "+i;var n=C.getText("SeeMoreContentAppName",[o,a]);var s=new p({text:n,textAlign:"Center",layoutData:new c({alignSelf:e.FlexAlignSelf.Center,maxWidth:"14rem"})});s.addCustomData(new d({key:"role",value:"heading",writeToDom:true}));s.addCustomData(new d({key:"aria-label",value:n,writeToDom:true}));s.addStyleClass("sapOvpStackPlaceHolderTextLine");var u=new h({items:[s]});u.addStyleClass("sapOvpStackPlaceHolderLabelsContainer");u.addCustomData(new d({key:"tabindex",value:"0",writeToDom:true}));u.addCustomData(new d({key:"role",value:"button",writeToDom:true}));var v=new h({items:[r,u]});v.addStyleClass("sapOvpStackPlaceHolder");v.addEventDelegate({onkeydown:function(t){if(!t.shiftKey&&(t.keyCode==13||t.keyCode==32)){t.preventDefault();t.srcControl.$().click()}}});return v},_openStack:function(){if(this.oObjectStream){var t=this.oObjectStream.getBinding("content");if(t.getCurrentContexts().length>0){var e=this.getView().$().width();this.getView().addDependent(this.oObjectStream);this.oObjectStream.setModel(this.getView().getModel("@i18n"),"@i18n");this.oObjectStream.open(e,this._oCard)}}if(this.ovpLayout){this.ovpLayout.setActive(true)}if(this.oObjectStream.getNewContentAvailable()){if(this.quickViewCardContextArray.length>10){var i=[];for(var a=this.initialLoadCardLength;a<this.quickViewCardContextArray.length;a++){i.push(this._renderQuickViewCards(this.quickViewCardContextArray[a].sId,this.quickViewCardContextArray[a].oContext,this.quickViewCardContextArray[a].oComponentContainer))}}this.oObjectStream.setNewContentAvailable(false)}},openStack:function(){if(this.ovpLayout){this.ovpLayout.setActive(false)}if(this.oObjectStream.getNewContentAvailable()){var t=[];var e=this.quickViewCardContextArray.length<=this.initialLoadCardLength?this.quickViewCardContextArray.length:this.initialLoadCardLength;for(var i=this.quickViewCardCount;i<e;i++){t.push(this._renderQuickViewCards(this.quickViewCardContextArray[i].sId,this.quickViewCardContextArray[i].oContext,this.quickViewCardContextArray[i].oComponentContainer))}Promise.all(t).then(function(){this.bQuickViewCardRendered=true;this._openStack()}.bind(this))}else{this._openStack()}},handleObjectStreamTitlePressed:function(t){this.doNavigation(null)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/table/Component", ["sap/ovp/cards/generic/base/table/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.table.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.table.Table"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.table.Table"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:true}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/table/Table.controller", ["sap/ovp/cards/generic/base/table/BaseTable.controller","sap/ovp/filter/FilterUtils","sap/ui/core/Core"],function(e,t,n){"use strict";return e.extend("sap.ovp.cards.table.Table",{onInit:function(){e.prototype.onInit.apply(this,arguments);var i=this;this.eventhandler=function(e,n,a){t.applyFiltersToV2Card(a,i)};this.GloabalEventBus=n.getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",i.eventhandler)}},onAfterRendering:function(){e.prototype.onAfterRendering.apply(this,arguments)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Any function that needs to be exported(used outside this file) via namespace should be defined as
 * a function and then added to the return statement at the end of this file
 */
sap.ui.predefine("sap/ovp/cards/v4/V4AnnotationHelper", ["sap/ovp/cards/CommonUtils","sap/ui/model/odata/v4/AnnotationHelper","sap/ovp/cards/MetadataAnalyser","sap/ovp/helpers/V4/MetadataAnalyzer","sap/ovp/cards/AnnotationHelper"],function(e,t,a,r,i){"use strict";var n={TEXT:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT:"com.sap.vocabularies.UI.v1.TextArrangement",UOM:"Org.OData.Measures.V1.Unit",ISO_CURRENCY:"Org.OData.Measures.V1.ISOCurrency"};var o={TEXT_LAST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast",TEXT_FIRST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst",TEXT_ONLY:"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly",TEXT_SEPARATE:"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"};function l(e,t,a){var r=i.getSortedDataFields(e,t)[a];if(r){return c(e,r)}return""}function u(e,t,a,r){var n=i.getSortedDataPoints(e,t)[a];if(!n){return""}var o=e.getSetting("ovpCardProperties");var l=o.getProperty("/entityType");var u=o.getProperty("/metaModel");return g(e,n,l,u,r)}function g(e,t,a,r,i){if(!t||!t.Value){return""}var o=e.getSetting("ovpCardProperties");var l=false;if(o){var u=o.getProperty("/ignoreSapText");l=u==undefined?l:u}var g=r.getData()["$Annotations"][a.$Type+"/"+t.Value.$Path];var s=false;if(l==true){if(g&&(g["@com.sap.vocabularies.Analytics.v1.Measure"]||g["sap:aggregation-role"]=="measure")){s=true}}if(!s&&g){var p;if(g[n.TEXT]){p=g[n.TEXT]?g[n.TEXT]:g[n.TEXT].$Path}else if(g["sap:text"]){p=g["sap:text"]}if(p){t={Value:{$Path:p}}}}return c(e,t,i)}function c(e,a,r,i){if(a.Value.Apply){return t.format(e,a.Value)}var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var l=n.getProperty("/metaModel");return p(e,a,o,l,r,i)}c.requiresIContext=true;function s(e,a,r,i){var e=!e.getPath()?e.getInterface(0):e;if(!r||typeof i!=="string"){return i}var l=r.annotations&&r.annotations["@"+n.TEXT];var u=Object.keys(a.$NavigationPropertyBinding);if(!l||u&&u.indexOf(l&&l.$Path&&l.$Path.split("/")[0])===-1){return i}var g,c;g=r.annotations["@"+n.TEXT+"@"+n.TEXT_ARRANGEMENT];c=g&&g.$EnumMember;if(!c){g=l&&l["@"+n.TEXT_ARRANGEMENT];c=g&&g.$EnumMember}if(!c){g=a&&a[n.TEXT_ARRANGEMENT];c=g&&g.$EnumMember}var s=t.format(l,{context:e});if(!s||s===" "){return i}if(!c){return i+" ("+s+")"}var p;switch(c){case o.TEXT_FIRST:p=s+" ("+i+")";break;case o.TEXT_LAST:p=i+" ("+s+")";break;case o.TEXT_ONLY:p=s;break;case o.TEXT_SEPARATE:p=i+" ("+s+")";break;default:p=i;break}return p}function p(e,a,o,l,u,g,c){if(a.Value.Apply){return t.format(e,a.Value)}var p=a.Value.$Path||a.Value.String;var f=i._getEntityTypeForODataV4Model(l,o,p),v="",h,y;var P=e.getSetting("ovpCardProperties");var m=P&&P.getProperty("/contentFragment");if(!g){if(a.Value.$Path&&a.Value.$Path.split("/").length>1){f=i._getNavigationSuffix(l,o,a.Value.$Path,e)}if(!f){return""}if(f.$Type==="Edm.DateTime"||f.$Type==="Edm.DateTimeOffset"){var T={relative:true,relativeScale:"auto"},C=P&&P.getProperty("/showDateInRelativeFormat");if(C!==undefined&&!C){T={style:"medium"}}y={dateFormat:T,bUTC:f.$Type==="Edm.DateTime"?true:false};h="sap.ovp.cards.AnnotationHelper.formatDate";v=i._generatePathForField([a.Value.$Path||p.split("/")[p.split("/").length-1]],h,y)}else if(a.ValueFormat&&a.ValueFormat.NumberOfFractionalDigits>=0||f["scale"]){var d=a.ValueFormat&&a.ValueFormat.NumberOfFractionalDigits||0,$=a.ValueFormat&&a.ValueFormat.ScaleFactor&&a.ValueFormat.ScaleFactor.$Decimal,V;if(f&&f["@"+n.ISO_CURRENCY]){V=f["@"+n.ISO_CURRENCY].$Path||f["@"+n.ISO_CURRENCY]}else if(f&&f["@"+n.UOM]){V=f["@"+n.UOM].$Path||f["@"+n.UOM]}else if(f&&f["@sap:unit"]){V=f["@sap:unit"]}var O=r.getODataPropertyFromV4Metadata(l,o.$Type,V),E=[a.Value.$Path||p.split("/")[p.split("/").length-1]];if(d>2){d=2}y={numberOfFractionalDigits:d,scaleFactor:$,bODataV4:i.isODataV4Context(e)};if(f&&f["@"+n.ISO_CURRENCY]){var R=f["@"+n.ISO_CURRENCY];if(R.$Path){h="sap.ovp.cards.AnnotationHelper.formatCurrency";E.push(R.$Path)}else if(R.String){y.currencyString=R.String;h="sap.ovp.cards.AnnotationHelper.formatCurrency"}}else if(O&&(O[n.ISO_CURRENCY]||O["sap:semantics"]==="currency-code")){h="sap.ovp.cards.AnnotationHelper.formatCurrency";E.push(V)}else{h="sap.ovp.cards.AnnotationHelper.formatNumberCalculation"}y.functionName=h;v=i._generatePathForField(E,h,y)}else{if(c){v=t.format(a.Value,{context:e})}else{var A=t.format(a.Value,e.getModel()?{context:e}:{context:e.getInterface(0)});var x=A.split(",");var S=[];if(x.length>1){for(var D=0;D<x.length;D++){if(x[D].indexOf("path:")>=0||x[D].indexOf("type:")>=0){S.push(x[D])}}if(S.length>0){v=v+S.join(",");if(v.substring(v.length-1)!=="}"){v=v+"}"}}}else{v=A}}}if(m){v=s(e,o,f,v)}if(f&&f["@"+n.UOM]){var I=f["@"+n.UOM];if(I.$Path){v+=" "+i._generatePathForField([I.$Path]);v+=" "+i.getSapTextPathForUOM(I.$Path,l,o,e)}else if(I.String){if(I.String!=="%"){v+=" "}v+=I.String}}}if(!u){if(f&&f["@"+n.ISO_CURRENCY]){var R=f["@"+n.ISO_CURRENCY];if(R){if(R.$Path){v+=" "+i._generatePathForField([R.$Path])}else{v+=" "+R}v+=" "+i.getSapTextPathForUOM(R.$Path,l,o,e)}}}if(v[0]===" "){v=v.substring(1)}v=v.replace("\\","");v=v.replace("\\","");v=v.replace("Unsupported: ","");v=v.replace("$P","p");return v}function f(e,t){var r=e.getSetting("ovpCardProperties");var n=r.getProperty("/metaModel");var o=n.getData();var l=t;var u,g,c,s;if(r.getProperty("/selectionAnnotationPath")){u="@"+r.getProperty("/selectionAnnotationPath");g=o["$Annotations"][l.$Type][u]}if(r.getProperty("/presentationAnnotationPath")){c=r.getProperty("/presentationAnnotationPath");c="@"+c;s=o["$Annotations"][l.$Type][c]}var p="/"+r.getProperty("/entitySet");var f=Array.prototype.slice.call(arguments,2);var h=e.getSetting("ovpCardProperties"),y=h.getProperty("/parameters");if(g||!!y){if(g&&g.Parameters&&g.Parameters.length>0||!!y){p=a.resolveParameterizedEntitySet(e.getSetting("dataModel"),t,g,y)}}if(r.getProperty("/cardLayout")&&r.getProperty("/cardLayout/noOfItems")){var P="{path: '"+p+"', length: "+ +r.getProperty("/cardLayout/noOfItems")}else{var P="{path: '"+p+"', length: "+i._getItemsLength(r)}var m=v(n,l.$Type,f,e);var T=i.checkFilterPreference(r);if(T||m.length>0){P=P+", parameters: {"}if(m.length>0){if(m.length>0){P=P+"$expand: '"+m.join(",")+"'"}if(T){P=P+", "}}if(T){P=P+"custom: {cardId: '"+r.getProperty("/cardId")+"'}"}if(T||m.length>0){P=P+", $count: true}"}else{P=P+", parameters: {$count:true}"}var C=i.getSorters(r,s,true);if(C.length>0){P=P+", sorter:"+JSON.stringify(C)}var d=i.getFilters(r,g,true);if(d.length>0){P=P+", filters:"+JSON.stringify(d)}P=P+"}";return P}f.requiresIContext=true;function v(e,t,a,r){var n=[];var o,l;for(var u=0;u<a.length;u++){if(!a[u]){continue}o=e.getData()["$Annotations"][t]["@"+a[u]];o=o?o:[];for(var g=0;g<o.length;g++){if(o[g].Value&&o[g].Value.$Path){l=i._getNavigationPrefix(e,t,o[g].Value.$Path,r);if(l&&n.indexOf(l)===-1){n.push(l)}}}}return n}function h(e,t,a){return l(e,t,a)}h.requiresIContext=true;function y(e,t,a){return u(e,t,a)}y.requiresIContext=true;function P(e,t,a,r){var n=i.getDataPointsCount(e,t);if(n>0){return y(e,t,a)}else{return h(e,t,r)}}P.requiresIContext=true;function m(e,t,a,r){return u(e,t,a,r)}m.requiresIContext=true;function T(e,t){if(!t){return""}return c(e,t)}T.requiresIContext=true;function C(e,t,a){if(!t){return""}var r=e.getSetting("ovpCardProperties");var n=r.getProperty("/entityType");var o=r.getProperty("/metaModel");var l=Object.assign({},t);var u=Object.assign({},e);t=i._formatValueFromTarget(u,l);return g(e,t,n,o,a)}C.requiresIContext=true;function d(e){var t=e.getObject();var a=e.getModel();var r=a.getProperty("/metaModel");var i="/"+a.getProperty("/entitySet");var n=r.getObject(i);t="/"+n.$Type+"/@"+t;return r.createBindingContext(t)}function $(t,n,o,l){var u;if(o&&o.Value&&o.Value.$Path){u=o.Value.$Path}else if(o&&o.Description&&o.Description.Value&&o.Description.Value.$Path){u=o.Description.Value.$Path}var g="";var c=l&&l.Parameters;var s="";var p=t.getSetting("ovpCardProperties"),f=p.getProperty("/parameters");c=c||!!f;var v=t.getSetting("dataModel");var h=t.getModel(0);var y=r.getEntitySetName(h,n.$Type);if(c){var P=a.resolveParameterizedEntitySet(v,n,l,f);g+="{path: '"+P+"'"}else{g+="{path: '/"+y+"'"}g+=", length: 1";var m=t.getSetting("ovpCardProperties");var T=m.getProperty("/entityType");var C=h.getObject("/"+y+"/");var d,$;for(d in C){if(d.startsWith("$")){continue}$=T.$Type.concat("/",d);C[d].annotations=h.getData(d).$Annotations[$]}var O=i.getFilters(m,l,true);if(O.length>0){s+=", filters: "+JSON.stringify(O)}var E=[];var R=v.oMetaModel.getData().$Annotations;var A;var x=m.getProperty("/measureAggregate");if(x&&x.hasOwnProperty(u)){A=x[u]}else{A=V(u,R,n.$Type)}E.push("'"+u+"Agg' : { 'name' : '"+u+"', 'with' : '"+A+"'}");if(o&&o.Criticality&&o.Criticality.$Path){A=V(o.Criticality.$Path,R,n.$Type);E.push("'"+o.Criticality.$Path+"Agg' : { 'name' : '"+o.Criticality.$Path+"', 'with' : '"+A+"'}")}if(o&&o.CriticalityCalculation&&o.CriticalityCalculation.DeviationRangeLowValue&&o.CriticalityCalculation.DeviationRangeLowValue.$Path){A=V(o.CriticalityCalculation.DeviationRangeLowValue.$Path,R,n.$Type);E.push("'"+o.CriticalityCalculation.DeviationRangeLowValue.$Path+"Agg' : { 'name' : '"+o.CriticalityCalculation.DeviationRangeLowValue.$Path+"', 'with' : '"+A+"'}")}if(o&&o.CriticalityCalculation&&o.CriticalityCalculation.ToleranceRangeLowValue&&o.CriticalityCalculation.ToleranceRangeLowValue.$Path){var A=V(o.CriticalityCalculation.ToleranceRangeLowValue.$Path,R,n.$Type);E.push("'"+o.CriticalityCalculation.ToleranceRangeLowValue.$Path+"Agg' : { 'name' : '"+o.CriticalityCalculation.ToleranceRangeLowValue.$Path+"', 'with' : '"+A+"'}")}if(o&&o.CriticalityCalculation&&o.CriticalityCalculation.DeviationRangeHighValue&&o.CriticalityCalculation.DeviationRangeHighValue.$Path){var A=V(o.CriticalityCalculation.DeviationRangeHighValue.$Path,R,n.$Type);E.push("'"+o.CriticalityCalculation.DeviationRangeHighValue.$Path+"Agg' : { 'name' : '"+o.CriticalityCalculation.DeviationRangeHighValue.$Path+"', 'with' : '"+A+"'}")}if(o&&o.CriticalityCalculation&&o.CriticalityCalculation.ToleranceRangeHighValue&&o.CriticalityCalculation.ToleranceRangeHighValue.$Path){var A=V(o.CriticalityCalculation.ToleranceRangeHighValue.$Path,R,n.$Type);E.push("'"+o.CriticalityCalculation.ToleranceRangeHighValue.$Path+"Agg' : { 'name' : '"+o.CriticalityCalculation.ToleranceRangeHighValue.$Path+"', 'with' : '"+A+"'}")}if(o&&o.TrendCalculation&&o.TrendCalculation.ReferenceValue&&o.TrendCalculation.ReferenceValue.$Path){var A=V(o.TrendCalculation.ReferenceValue.$Path,R,n.$Type);E.push("'"+o.TrendCalculation.ReferenceValue.$Path+"Agg' : { 'name' : '"+o.TrendCalculation.ReferenceValue.$Path+"', 'with' : '"+A+"'}")}var S=i.checkFilterPreference(p);var D=S?", custom: {cardId: '"+p.getProperty("/cardId")+"'}":"";var I=e.getUnitColumnForODataV4(u,h,y);var F=I?", group: {"+I+": {}}":"";var M="parameters:{'$$aggregation' : {'aggregate' : {"+E.join(",")+"}"+F+"}"+D+"}";return g+", "+M+s+"}"}$.requiresIContext=true;function V(e,t,a){var r=t[a+"/"+e];if(r["@Org.OData.Aggregation.V1.default"]){return r["@Org.OData.Aggregation.V1.default"].$EnumMember.split("/")[1].toLowerCase()}return"sum"}function O(e,a){for(var r=0;r<a.length;r++){if(a[r].type.$EnumMember.indexOf("ContactInformationType/work")>=0){var i=t.format(a[r].address,{context:e});return i}}return""}O.requiresIContext=true;function E(e,a){for(var r=0;r<a.length;r++){if(a[r].type.$EnumMember.indexOf("PhoneType/work")>=0){var i=t.format(a[r].uri,{context:e});return i}}return""}E.requiresIContext=true;function R(e,a){for(var r=0;r<a.length;r++){if(a[r].type.$EnumMember.indexOf("PhoneType/cell")>=0){var i=t.format(a[r].uri,{context:e});return i}}return""}R.requiresIContext=true;function A(e,a){for(var r=0;r<a.length;r++){if(a[r].type.$EnumMember.indexOf("PhoneType/fax")>=0){var i=t.format(a[r].uri,{context:e});return i}}return""}A.requiresIContext=true;return{TextArrangementType:o,formatField:c,formatItems:f,formatDataFieldValueOnIndex:h,formatDataPointValueOnIndex:y,formatDataPointOrField:P,formatObjectNumber:m,formatDataFieldValueGeneric:T,formatDataPointValue:C,resolveEntityTypePath:d,getAggregateNumber:$,getEmail:O,getPhone:E,getDevice:R,getPhoneType:A}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/OVPVizDataHandler", ["sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/ovp/cards/v4/charts/Utils","sap/ovp/cards/AnnotationHelper","sap/ovp/app/resources","sap/base/util/each","sap/base/util/merge"],function(e,t,a,r,s,n,i){"use strict";return e.extend("sap.ovp.cards.v4.charts.OVPVizDataHandler",{metadata:{aggregations:{data:{type:"sap.ui.core.Element"},aggregateData:{type:"sap.ui.core.Element"},content:{multiple:false}},properties:{chartType:{defaultValue:false},dependentDataReceived:{defaultValue:false},scale:{defaultValue:""},entitySet:{}}},renderer:function(e,t){e.openStart("div",t).openEnd();if(t.getContent()){e.renderControl(t.getContent())}e.close("div")},mergeDatasets:function(e,a,r){var o=this;var l=this.getModel();var u=e.mParameters;var p=i([],this.dataSet);if(u){var c=u["$apply"]}var d=e.getPath().substring(1);var g=-1;if(d){g=d.indexOf("Parameters")}if(g>=0){d=d.substr(0,d.indexOf("Parameters"))}var v=l.getMetaModel();var f=this.getEntitySet();var h=v.getData("/")["$Annotations"];var m=[];var y=[];for(var D in h){if(h[D]["@com.sap.vocabularies.Analytics.v1.Measure"]){if(c&&c.includes(D.split("/")[1])){m.push(D.split("/")[1])}}else{if(c&&c.includes(D.split("/")[1])){y.push(D.split("/")[1])}}}if(p){for(var b=0;b<p.length-2;b++){for(var C=0;C<m.length;C++){if(p[0]){p[0][m[C]]=Number(p[0][m[C]])+Number(p[b+1][m[C]])}}}p.__count=p.length;var S=p.__count-p.length;var P={};P.results=[];P.results[0]=p[0];var A;if(p.__count>p.length){var O=i({},this.aggregateSet);if(O&&O.results&&p.results.length<p.__count){n(m,function(e){O.results[0][m[e]]=String(Number(o.aggregateSet.results[0][m[e]])-Number(P.results[0][m[e]]))});n(y,function(e){O.results[0][y[e]]=s.getText("OTHERS_DONUT",[S+1])});O.results[0].$isOthers=true;A=O.results[0];if(A){a.results.splice(-1,1)}}}if(A){a.results.push(A)}var x=r.getModel("ovpCardProperties");var M=x&&x.getProperty("/bEnableStableColors");var T=x&&x.getProperty("/colorPalette");var E=h[f]["@"+(x&&x.getProperty("/chartAnnotationPath"))];if(E.DimensionAttributes.length===1&&M&&r.getVizType()==="donut"&&T&&T instanceof Object){var I=E.DimensionAttributes[0].Dimension.$PropertyPath;if(T instanceof Array){var k=T.map(function(e){return e.color});var R=k.slice()}else{var w=JSON.parse(JSON.stringify(T))}var B=r.getVizProperties();if(!B){var N={plotArea:{dataPointStyle:{rules:[]}}};B=N}else if(B&&!B.plotArea){B.plotArea={dataPointStyle:{rules:[]}}}if(r&&B&&B.plotArea){if(!B.plotArea.dataPointStyle){B.plotArea.dataPointStyle={rules:[]}}else{B.plotArea.dataPointStyle.rules=[]}var V=x.getProperty("/entityType");var _=v.getData()["$Annotations"][V.$Type+"/"+I];if(_){var $=_["@com.sap.vocabularies.Common.v1.Label"]?_["@com.sap.vocabularies.Common.v1.Label"]:I;var j;if(_["@com.sap.vocabularies.Common.v1.Text"]){j=_["@com.sap.vocabularies.Common.v1.Text"]["$Path"]}else if(_["sap:text"]){j=_["sap:text"]}else{j=_}var U=function(e,t,r,s){var n={dataContext:{},properties:{color:k&&k[e]||r&&r[s]},displayName:a.results[t][j]};n.dataContext[$]=a.results[t][I];return n};if(T instanceof Array){n(T,function(e,t){for(var r=0;r<a.results.length;r++){if(a.results[r][I]===t.dimensionValue){var s=U(e,r,t);B.plotArea.dataPointStyle["rules"].push(s);R.splice(e,1)}}})}else{for(var Y=0;Y<a.results.length;Y++){if(T.hasOwnProperty(a.results[Y][I])){var D=a.results[Y][I];var z={};z[D]=T[D];var F=U(b,Y,z,D);B.plotArea.dataPointStyle["rules"].push(F);delete w[D]}}}if(O){B.plotArea.dataPointStyle["rules"].push({callback:function(e){if(e&&e[$].lastIndexOf("Others")!=-1){return true}},properties:{color:R&&R.length?k[k.length-1]:Object.keys(w).length&&w[Object.keys(w)[0]]},displayName:O.results[0][I]})}}}r.setVizProperties(B)}}var H=new t;var J=[];for(var b=0;b<a.results.length;b++){var q={};for(var Y=0;Y<y.length;Y++){q[y[Y]]=a.results[b]&&a.results[b][y[Y]]}for(var L=0;L<m.length;L++){q[m[L]]=a.results[b]&&(a.results[b][m[L]+"Aggregate"]||a.results[b][m[L]])}J.push(q)}H.setData(J);r.setModel(H,"analyticalmodel")},updateBindingContext:function(){var s=this.getBinding("data");var o=this.getBinding("aggregateData");var l=this;if(this.chartBinding==s){return}else{this.chartBinding=s;if(s){var l=this;s.attachEvent("dataReceived",function(e){if(a.checkIfDataExistInEvent(e)){l.dataSet=e&&e.getSource().getCurrentContexts().map(function(e){return e&&e.getObject()});l.oDataClone={results:i([],l.dataSet)};if(l.getChartType()=="donut"&&l.getBinding("aggregateData")!==undefined){if(l.getDependentDataReceived()===true||l.getDependentDataReceived()==="true"){l.mergeDatasets(s,l.oDataClone,l.getContent());l.setDependentDataReceived(false)}else{l.setDependentDataReceived(true)}}else{var o=new t;if(l.dataSet){var u=l.getEntitySet().split(".")[l.getEntitySet().split(".").length-1];var p=s.getModel();var c=a.cacheODataMetadata(p);var d=[];var g={};var v=c[u];if(v){var f=Object.keys(v)}if(f&&f.length){n(f,function(e,t){if(v[t].$Type==="Edm.String"){var a=l.getModel().getMetaModel().getObject("/"+l.getEntitySet()+"/"+t+"@");if(a["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){d.push(t);g[t]={"sap:semantics":"yearmonth"}}else if(a["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){d.push(t);g[t]={"sap:semantics":"yearquarter"}}else if(a["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){d.push(t);g[t]={"sap:semantics":"yearweek"}}else if(a["@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){d.push(t);g[t]={"sap:semantics":"fiscalyearperiod"}}}})}if(d&&d.length){if(l.dataSet&&l.dataSet.length){n(l.dataSet,function(e,t){n(d,function(e,a){if(t&&t.hasOwnProperty(a)){var s=t[a];var n,i,o,l,u,p,c;switch(g[a]["sap:semantics"]){case"yearmonth":n=parseInt(s.substr(0,4),10);i=s.substr(4);u=parseInt(i,10)-1;t[a]=new Date(Date.UTC(n,u));break;case"yearquarter":n=parseInt(s.substr(0,4),10);o=s.substr(4);l=parseInt(o,10)*3-2;u=l-1;t[a]=new Date(Date.UTC(n,u));break;case"yearweek":n=parseInt(s.substr(0,4),10);p=s.substr(4);var c=1+(parseInt(p,10)-1)*7;t[a]=new Date(Date.UTC(n,0,c));break;case"fiscalyearperiod":var d="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod";var v=r.getFormattedFiscalData(s,d);t[a]=v;break;default:break}}})})}}o.setData(l.dataSet);l.oDataClone={results:i([],l.dataSet)}}l.getContent().setModel(o,"analyticalmodel");l.mergeDatasets(s,l.oDataClone,l.getContent())}}})}e.prototype.updateBindingContext.apply(this,arguments)}if(this.chartAggrBinding==o){return}else{this.chartAggrBinding=o;if(o){var l=this;o.attachEvent("dataReceived",function(e){l.aggregateSet=e&&e.getParameter("data");if(l.getChartType()=="donut"){if(l.getDependentDataReceived()===true||l.getDependentDataReceived()==="true"){l.oDataClone=i({},l.dataSet);l.mergeDatasets(s,l.oDataClone,l.getContent());l.setDependentDataReceived(false)}else{l.setDependentDataReceived(true)}}else{var a=new t;a.setData(l.aggregateSet.results);l.getContent().setModel(a,"analyticalmodel")}})}e.prototype.updateBindingContext.apply(this,arguments)}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileOverview Miscellaneous utility functions for legacy cards.
 * See VizAnnotationManager.js for generic card methods.
 * This file can be safely deleted when legacy cards deprecate.
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/Utils", ["sap/base/util/each","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/cards/v4/charts/config"],function(e,t,r,n){"use strict";var i={};var a={CHART_QUALIFIER_KEY:"chartAnnotationPath",SELVAR_QUALIFIER_KEY:"selectionAnnotationPath",PREVAR_QUALIFIER_KEY:"presentationAnnotationPath",ERROR_NO_CHART:'Analytic cards require valid "chartAnnotationPath" '+"configured in manifest.json",LABEL_KEY:"sap:label",TEXT_KEY:"sap:text",TYPE_KEY:"type"};var o={CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",CACHING_ERROR:"no model defined while caching OdataMetaData"};var u=new r("OVP.v4.charts.Utils");function s(e,t){if(!t){return""}var r=e.getSetting("ovpCardProperties");if(!r){return""}var n=r.oData;if(!n){return""}var i=n&&n[t]?n[t]:"";return i===""?"":i.split("#")[1]}i.getAllColumnTexts=function(e){return l("sap:text",e)};i.formDimensionPath=function(e){var t="{"+e+"}";var r=this.getModel("ovpCardProperties").getProperty("/entityType");if(!r){return t}var n=g(r);if(!n||!n[e]){return t}var a=n[e];if(a=="Edm.DateTime"){return"{path:'"+e+"', formatter: 'sap.ovp.cards.charts.VizAnnotationManager.returnDateFormat'}"}var o=i.getAllColumnTexts(r);if(!o){return t}t="{"+(o[e]||e)+"}";return t};function l(e,t){var r={};var n=t.property;for(var i=0,a=n.length;i<a;i++){if(n[i].hasOwnProperty(e)&&e=="com.sap.vocabularies.Common.v1.Label"){r[n[i].name]=n[i][e].String}else if(n[i].hasOwnProperty(e)){r[n[i].name]=n[i][e]}else{r[n[i].name]=n[i].name}}return r}function f(e){return l("com.sap.vocabularies.Common.v1.Label",e)}function g(e){return l("type",e)}var c={};i.LineChart=function(){function t(t,i,a){var o=r(t,a).split(",");var u=n(t,i).split(",");var s=[];e(o,function(e,t){s.push(t)});var l=[];e(u,function(e,t){l.push(t)});var f=true;var g=t.getSetting("ovpCardProperties").getProperty("/navigation");if(g=="chartNav"){f=false}var f=f?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{   visible:false,   text: '"+s.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, categoryAxis:{  title:{   visible:false,   text: '"+l.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, general: { groupData: false }, interaction:{  noninteractiveMode: "+f+",  selectability: {   legendSelection: false,   axisLabelSelection: false,   mode: 'EXCLUSIVE',   plotLassoSelection: false,   plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }"}t.requiresIContext=true;function r(t,r){var n=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!n){return""}var i=f(n);var a=[];e(r,function(e,t){a.push(i[t.Measure.PropertyPath]||t.Measure.PropertyPath)});return a.join(",")}r.requiresIContext=true;function n(t,r){var n=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!n){return""}var i=f(n);var o=[];var u;var l;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Category"){l=i[t.Dimension.PropertyPath];o.push(l?l:t.Dimension.PropertyPath)}});if(o.length<1){l=i[r[0].Dimension.PropertyPath];o.push(l?l:r[0].Dimension.PropertyPath)}u=s(t,a.CHART_QUALIFIER_KEY);c[u]=o;return o.join(",")}n.requiresIContext=true;function i(t,r){var n=[];var i;var o=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!o){return""}var u=f(o);var l;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Series"){l=u[t.Dimension.PropertyPath];n.push(l?l:t.Dimension.PropertyPath)}});i=s(t,a.CHART_QUALIFIER_KEY);n=n.filter(function(e){if(!c[i]){return true}return e!==c[i][0]});return n.join(",")}i.requiresIContext=true;function o(e,t){return i(e,t)!==""}o.requiresIContext=true;return{getVizProperties:t,getValueAxisFeed:r,getCategoryAxisFeed:n,getColorFeed:i,testColorFeed:o}}();i.BubbleChart=function(){function t(t,r,a){var o=n(t,a).split(",");var u=i(t,a).split(",");var s=[];e(o,function(e,t){s.push(t)});var l=[];e(u,function(e,t){l.push(t)});var f=true;var g=t.getSetting("ovpCardProperties").getProperty("/navigation");if(g=="chartNav"){f=false}var f=f?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{ visible:true, text: '"+s.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, valueAxis2:{  title:{ visible:true, text: '"+l.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, categoryAxis:{  title:{ visible:true  },  label:{ formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, interaction:{  noninteractiveMode: "+f+",  selectability: { legendSelection: false, axisLabelSelection: false, mode: 'EXCLUSIVE', plotLassoSelection: false, plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }"}t.requiresIContext=true;function r(t,r){var n;if(!t||!t.getSetting||!(n=t.getSetting("ovpCardProperties"))){return[""]}var i=n.getProperty("/entityType");if(!i){return[""]}var a=f(i);var o=[null,null,null];var u=["Axis1","Axis2","Axis3"];e(r,function(e,t){if(u.indexOf(t.Role.EnumMember.split("/")[1])>-1){if(o[0]===null){o[0]=a[t.Measure.PropertyPath]||t.Measure.PropertyPath}else if(o[1]===null){o[1]=a[t.Measure.PropertyPath]||t.Measure.PropertyPath}else if(o[2]==null){o[2]=a[t.Measure.PropertyPath]||t.Measure.PropertyPath}}});return o}r.requiresIContext=true;function n(e,t){return r(e,t)[0]}n.requiresIContext=true;function i(e,t){return r(e,t)[1]}i.requiresIContext=true;function a(e,t){return r(e,t)[2]}a.requiresIContext=true;function o(t,r){var n=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!n){return""}var i=f(n);var a=[];var o;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Series"){o=i[t.Dimension.PropertyPath];a.push(o?o:t.Dimension.PropertyPath)}});return a.join(",")}o.requiresIContext=true;function u(t,r){var n=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!n){return""}var i=f(n);var a=[];var o;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Category"){o=i[t.Dimension.PropertyPath];a.push(o?o:t.Dimension.PropertyPath)}});return a.join(",")}u.requiresIContext=true;function s(e,t){return o(e,t)!==""}s.requiresIContext=true;function l(e,t){return u(e,t)!==""}l.requiresIContext=true;return{getVizProperties:t,getMeasurePriorityList:r,getValueAxisFeed:n,getValueAxis2Feed:i,getBubbleWidthFeed:a,getColorFeed:o,getShapeFeed:u,testColorFeed:s,testShapeFeed:l}}();i.validateMeasuresDimensions=function(e,t){var r=null;var n=null;if(!e.getDataset()){u.error("OVP-AC: "+t+" Card Error: No Dataset defined for chart.");return false}r=e.getDataset().getMeasures();n=e.getDataset().getDimensions();switch(t){case"Bubble":if(r.length!==3||n.length<1||!r[0].getName()||!r[1].getName()||!r[2].getName()||!n[0].getName()){u.error("OVP-AC: Bubble Card Error: Enter exactly 3 measures and at least 1 dimension.");return false}break;case"Donut":if(r.length!==1||n.length!==1||!r[0].getName()||!n[0].getName()){u.error("OVP-AC: Donut Card Error: Enter exactly 1 measure and 1 dimension.");return false}break;case"Line":if(r.length<1||n.length<1||!r[0].getName()||!n[0].getName()){u.error("OVP-AC: Line Card Error: Configure at least 1 dimensions and 1 measure.");return false}break}return true};i.getSortAnnotationCollection=function(e,t,r){if(t&&t.SortOrder&&t.SortOrder.Path&&t.SortOrder.Path.indexOf("@")>=0){var n=t.SortOrder.Path.split("@")[1];var i=e.getServiceAnnotations()[r.entityType];return i[n]}return t.SortOrder};i.oFullConfig=null;i.getConfig=function(e){if(!this.oFullConfig){try{this.oFullConfig=t({},n.getChartsConfiguration())}catch(e){u.error(o.CONFIG_LOAD_ERROR+e)}}if(!e){return this.oFullConfig}var r;try{r=e.$EnumMember.split("/")[1]}catch(e){u.error(o.CARD_ERROR+o.INVALID_CHARTTYPE+o.ANNO_REF);return{}}if(!this.oFullConfig[r]){u.error(o.INVALID_CONFIG+r+" "+o.CONFIG_JSON);return{}}var i;if((i=this.oFullConfig[r].reference)&&this.oFullConfig[i]){var a=t({},this.oFullConfig[i]);this.oFullConfig[r]=a}return this.oFullConfig[r]};i.oCachedMetaModel={};i.cacheODataMetadata=function(t){if(!t){u.error(o.CARD_ERROR+o.CACHING_ERROR);return}var r=this.oCachedMetaModel[t.getId()];if(!r){r={};var n=t.getMetaModel();var i=n&&n.getObject("/");var a,s;e(i,function(t,i){if(t!="$kind"){a=n.getObject("/"+i.$Type);s={};e(a,function(e,t){if(t.$kind&&t.$kind=="Property"){s[e]=t}});r[t]=s}});this.oCachedMetaModel[t.getId()]=r}return r};i.checkIfDataExistInEvent=function(e){if(e&&e.getSource()&&e.getSource().getCurrentContexts()){var t=e.getSource().getCurrentContexts().some(function(e){return typeof e==="undefined"});return!t}return false};i.isDataSetEmpty=function(e){if(e&&e.getSource()&&e.getSource().getCurrentContexts()){return e.getSource().getCurrentContexts().length===0}};return i},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileOverview Library to Manage rendering of Viz Charts.
 *
 * Any function that needs to be exported(used outside this file) via namespace should be defined as
 * a function and then added to the return statement at the end of this file
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/VizAnnotationManager", ["sap/ui/thirdparty/jquery","sap/ovp/cards/v4/charts/Utils","sap/ovp/cards/AnnotationHelper","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/viz/ui5/api/env/Format","sap/viz/ui5/controls/VizTooltip","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ui/core/Element","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/each","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/base/util/isEmptyObject","sap/ovp/helpers/V4/MetadataAnalyzer","sap/ovp/cards/Integration/Helpers/AnalyticalCard","sap/ovp/cards/NavigationHelper","sap/ovp/cards/Constants","sap/ovp/cards/MetadataAnalyser"],function(jQuery,e,t,a,r,i,n,o,s,l,u,f,c,v,p,g,m,A,d,h,P,y,E,C){"use strict";var _={LABEL_KEY:"sap:label",LABEL_KEY_V4:"com.sap.vocabularies.Common.v1.Label",TEXT_KEY:"sap:text",TEXT_KEY_V4:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT_ANNO:"com.sap.vocabularies.UI.v1.TextArrangement",TYPE_KEY:"$Type",DISPLAY_FORMAT_KEY:"sap:display-format",SEMANTICS_KEY:"sap:semantics",UNIT_KEY:"sap:unit",UNIT_KEY_V4_ISOCurrency:"Org.OData.Measures.V1.ISOCurrency",UNIT_KEY_V4_Unit:"Org.OData.Measures.V1.Unit",CURRENCY_CODE:"currency-code",NAME_KEY:"name",NAME_CAP_KEY:"Name",EDM_TYPE:"type",EDM_INT32:"Edm.Int32",EDM_INT64:"Edm.Int64",SCATTER_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Scatter",BUBBLE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bubble",LINE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Line",COLUMNSTACKED_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked",VERTICALBULLET_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/VerticalBullet",COLUMN_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Column",BAR_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bar",COMBINATION_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Combination",DONUT_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Donut",V4_ANNOTATION:"annotations"};var T={CARD_WARNING:"OVP-AC: Analytic card: Warning: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",DATA_ANNO_ERROR:"OVP-AC: Analytic card Error:",CARD_ANNO_ERROR:"OVP-AC: Analytic card: Error ",CHART_ANNO_ERROR:"OVP-AC: Analytic card: Error ",INVALID_CHART_ANNO:"OVP-AC: Analytic Cards: Invalid Chart Annotation.",ANALYTICAL_CONFIG_ERROR:"Analytic card configuration error",CACHING_ERROR:"no model defined while caching OdataMetaData",INVALID_MAXITEMS:"maxItems is Invalid. ",NO_DATASET:"OVP-AC: Analytic Cards: Could not obtain dataset.",SORTORDER_WARNING:"SortOrder is present in PresentationVariant, but it is empty or not well formed.",BOOLEAN_ERROR:"Boolean value is not present in PresentationVariant.",IS_MANDATORY:"is mandatory.",IS_MISSING:"is missing.",NOT_WELL_FORMED:"is not found or not well formed)",MISSING_CHARTTYPE:"Missing ChartType in ",CHART_ANNO:"Chart Annotation.",DATA_ANNO:"Data Annotation",CARD_ANNO:"card annotation.",CARD_CONFIG:"card configuration.",CARD_CONFIG_ERROR:"Could not obtain configuration for ",CARD_CONTAINER_ERROR:"Could not obtain card container. ",DATA_UNAVAIALABLE:"No data available.",CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",ENTER_INTEGER:"Please enter an Integer.",NO_CARD_MODEL:"Could not obtain Cards model.",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_REDUNDANT:"Invalid/redundant role configured for ",CHART_IS:"chart is/are ",CARD_CONFIG_JSON:"card from config.json",ALLOWED_ROLES:"Allowed role(s) for ",DIMENSIONS_MANDATORY:"DimensionAttributes are mandatory.",MEASURES_MANDATORY:"MeasureAttributes are mandatory.",CARD_LEAST:"card: Enter at least ",CARD_MOST:"card: Enter at most ",FEEDS:"feed(s).",MIN_FEEDS:"Minimum number of feeds required for ",FEEDS_OBTAINED:"card is not configured. Obtained ",FEEDS_REQUIRED:"feed(s), Required: ",INVALID_SEMANTIC_MEASURES:"More than one measure is being semantically coloured",INVALID_IMPROVEMENT_DIR:"No Improvement Direction Found",INVALID_CRITICALITY:"Invalid criticality values",INVALID_DIMMEAS:"Invalid number of Measures or Dimensions",INVALID_FORECAST:"Invalid/Redundant Datapoint or Forecast measure",INVALID_TARGET:"Invalid/Redundant Datapoint or Target measure",ERROR_MISSING_AXISSCALES:"Minimum and Maximum values are mandatory for AxisScale MinMax to work"};var I=["year","yearweek","yearmonth","yearquarter"];var N=[_.COLUMNSTACKED_CHARTTYPE,_.DONUT_CHARTTYPE,_.COLUMN_CHARTTYPE,_.BAR_CHARTTYPE,_.VERTICALBULLET_CHARTTYPE,_.LINE_CHARTTYPE,_.COMBINATION_CHARTTYPE,_.BUBBLE_CHARTTYPE];var R=[_.COLUMNSTACKED_CHARTTYPE];var D;var b=new A("OVP.charts.VizAnnotationManager");function O(e,t,a){var r=e.getMetaModel().getObject("/"+t+"/"+a+"@");return r["@com.sap.vocabularies.Common.v1.IsCalendarYear"]||r["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]||r["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]||r["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]}function S(a,r,i,n,o,s,l){var u="{";if(!a||!a.getSetting("ovpCardProperties")){b.error(T.ANALYTICAL_CONFIG_ERROR);u+="}";return u}var f=a.getSetting("dataModel");var c;if(l&&l.$EnumMember){c=l.$EnumMember.split("/");if(c&&c[1]!="Donut"&&o===undefined){return null}}var v=[];var p=[];var A=[];var d=[];var P=[];var y=[];var E=[];var I=[];var N=i&&i.Parameters;var R=n&&n.SortOrder;var D=n&&n.MaxItems,O=null;var S;var Y;var x;var F=null;var $=_.TEXT_KEY;var U=_.TEXT_KEY_V4;var K=_.UNIT_KEY;var w="@"+_.UNIT_KEY_V4_ISOCurrency;var B="@"+_.UNIT_KEY_V4_Unit;var k={};if(typeof D==="number"||typeof D==="string"&&!isNaN(D)){O=parseInt(D,10)}if(O){if(O==="0"){b.error("OVP-AC: Analytic card Error: maxItems is configured as "+O);u+="}";return u}if(!/^\d+$/.test(O)){b.error("OVP-AC: Analytic card Error: maxItems is Invalid. Please enter an Integer.");u+="}";return u}}var z=a.getSetting("ovpCardProperties"),H=z.getProperty("/parameters");var W=z.getProperty("/metaModel");var X=z.getProperty("/measureAggregate");var q=h.getEntitySetName(W,r.$Type);N=N||!!H;if(N){var Q=C.resolveParameterizedEntitySet(f,r,i,H);u+="path: '"+Q+"'"}else{u+="path: '/"+q+"'"}var Z=[];F=a.getSetting("ovpCardProperties").getProperty("/entitySet");if(!f||!F){return u}var J=ge(f,F);Ne(f,J,r.$Type);var ee=a.getSetting("ovpCardProperties").getProperty("/cardLayout");var te=1,ae;var re=G();var ie;var ne;if(o&&ee&&ee.colSpan&&ee.colSpan>1){ae=ee.colSpan-te;for(var oe in re){if((ne=re[oe].reference)&&re[ne]){var se=m({},re[ne]);re[oe]=se}if(oe===c[1]||re[oe].time&&re[oe].time.type===c[1].toLowerCase()){ie=re[oe];break}}var le=j(o,ie,f,F);if(le){ie=ie.time}else{ie=ie.default}var ue=a.getSetting("ovpCardProperties").getProperty("/dataStep");if(!ue){if(ie.resize&&ie.resize.hasOwnProperty("dataStep")&&!isNaN(ie.resize.dataStep)){ue=ie.resize.dataStep}}ue=parseInt(ue,10);if(ae>0&&ue&&!isNaN(ue)){O=parseInt(O,10)+ue*ae}}if(i){var z=a.getSetting("ovpCardProperties");Z=t.getFilters(z,i,true)}var fe=a.getSetting("ovpCardProperties").getProperty("/entityType");g(s,function(e,t){S=t.Measure.$PropertyPath;if(t.DataPoint&&t.DataPoint.AnnotationPath){var a=fe[t.DataPoint.AnnotationPath.substring(1)];if(a.ForecastValue&&(a.ForecastValue.PropertyPath||a.ForecastValue.Path)){var r=a.ForecastValue.PropertyPath||a.ForecastValue.Path;P.push(a.ForecastValue.PropertyPath||a.ForecastValue.Path);if(J&&J[r]){var i;if(J[r].annotations&&J[r].annotations[w]){i=J[r].annotations[w].$Path?J[r].annotations[w].$Path:undefined}else if(J[r].annotations&&J[r].annotations[B]){i=J[r].annotations[B].$Path?J[r].annotations[B].$Path:undefined}else if(J[r][K]){i=J[r][K]}if(i){if((y?Array.prototype.indexOf.call(y,i):-1)===-1){y.push(i)}}}}if(a.TargetValue&&(a.TargetValue.PropertyPath||a.TargetValue.Path)){var n=a.TargetValue.PropertyPath||a.TargetValue.Path;P.push(a.TargetValue.PropertyPath||a.TargetValue.Path);if(J&&J[n]){var i;if(J[n].annotations&&J[n].annotations[w]){i=J[n].annotations[w].$Path?J[n].annotations[w].$Path:undefined}else if(J[n].annotations&&J[n].annotations[B]){i=J[n].annotations[B].$Path?J[n].annotations[B].$Path:undefined}else if(J[n][K]){i=J[n][K]}if(i){if((y?Array.prototype.indexOf.call(y,i):-1)===-1){y.push(i)}}}}}P.push(S);if(J&&J[S]){if(J[S][U]){if(J[S][U].String&&S!=J[S][U].String){P.push(J[S][U].String?J[S][U].String:S)}else if(J[S][U].Path&&S!=J[S][U].Path){P.push(J[S][U].Path?J[S][U].Path:S)}}else if(J[S][$]&&S!=J[S][$]){P.push(J[S][$]?J[S][$]:S)}}if(J&&J[S]){var i;if(J[S].annotations&&J[S].annotations[w]){i=J[S].annotations[w].$Path?J[S].annotations[w].$Path:undefined}else if(J[S].annotations&&J[S].annotations[B]){i=J[S].annotations[B].$Path?J[S].annotations[B].$Path:undefined}else if(J[S][K]){i=J[S][K]}if(i){if((y?Array.prototype.indexOf.call(y,i):-1)===-1){y.push(i)}}}});g(o,function(e,t){S=t.Dimension.$PropertyPath;v.push(S);if(J&&J[S]){if(J[S]["annotations"]&&J[S]["annotations"]["@"+U]){if(typeof J[S]["annotations"]["@"+U]==="string"&&J[S]["annotations"]["@"+U]&&S!=J[S]["annotations"]["@"+U]){v.push(J[S]["annotations"]["@"+U])}else if(J[S]["annotations"]["@"+U].$Path&&S!=J[S]["annotations"]["@"+U].$Path){x=J[S]["annotations"]["@"+U].$Path;var a=x.split("/");if(a.length>1){Y=M(W,fe,x);if(Y!==""){v.push(x);p.push(Y);d=L(W,fe,x);if(d.length>0){A=A.concat(d)}}}else{v.push(x?x:S)}}}else if(J[S][$]&&S!=J[S][$]){v.push(J[S][$]?J[S][$]:S)}}});if(A.length>0){var ce=0;while(ce<A.length){if(v.indexOf(A[ce])!==-1){A.splice(ce,1)}else{ce++}}}if(P.length>0){g(P,function(e,t){t+="Aggregate";k[t]=true})}if(v.length>0){g(v,function(e,t){k[t]=true})}if(R){var ve=n.SortOrder;if(!ve.length){ve=e.getSortAnnotationCollection(f,n,r)}if(ve.length<1){b.warning(T.CARD_WARNING+T.SORTORDER_WARNING)}else{var pe="";var me;var Ae;var de;for(var he=0;he<ve.length;he++){me=ve[he];de=me.Property.$PropertyPath;if(P.includes(de)){de+="Aggregate"}I.push(de);if(typeof me.Descending==="undefined"){Ae="true"}else{var Pe=me.Descending.Bool||me.Descending.Boolean;if(!Pe){b.warning(T.CARD_WARNING+T.BOOLEAN_ERROR);Ae="true"}else{Ae=Pe.toLowerCase()==="true"?"true":"false"}}pe=pe+"{path: '"+de+"',descending: "+Ae+"},"}u+=", sorter: ["+pe.substring(0,pe.length-1)+"]"}}var ye=V(y,v);if(I.length>0){g(I,function(e,t){if(!k.hasOwnProperty(t)){ye.push(t)}})}u+=", parameters: {$apply:'groupby(("+ye.join(",")+"),";u+="aggregate(";var Ee=[];P.forEach(function(e,t){var a=X&&X["Axis"+(t+1)];var r=a?a:"sum";var i=[e," with ",r," as ",e,"Aggregate"].join("");Ee.push(i)});u+=Ee.join(",");u+="))";var Ce=W.getObject("/"+r.$Type);if(Ce){var _e=t.getRequestFields(n);if(_e&&_e.length>0){g(_e,function(e,t){if(!k.hasOwnProperty(t)){k[t]=true;E.push(t)}});if(E.length>0){u+=","+E.join(",")}}}if(p.length>0){u+="'"+","+" expand:'"+p.join(",")}var Te=t.checkFilterPreference(a.getSetting("ovpCardProperties"));if(Te){u+="', custom: {cardId: '"+a.getSetting("ovpCardProperties").getProperty("/cardId")+"'}}"}else{u+="'}"}if(c&&c[1]==="Donut"&&o===undefined){u+=", length: 1"}else if(c&&c[1]==="Donut"&&o&&O){u+=", length: "+(parseInt(O,10)+1)}else if(O){u+=", length: "+O}if(Z.length>0&&ye.length>0){var Ie=Z.every(function(e){return ye.indexOf(e.path)!==-1});var Re=Ie?JSON.stringify(Z):"[]";u+=", filters: "+Re}u+="}";return u}S.requiresIContext=true;function M(e,t,a){var r="";var i=a.split("/");if(i.length>1){for(var n=0;n<i.length-1;n++){var o=e.getODataAssociationEnd(t,i[n]);if(o){t=e.getODataEntityType(o.type);if(r){r=r+"/"}r=r+i[n]}else{return r}}}return r}function V(e,t){var a=e.length>0?t.concat(e):t;return a.filter(function(e,t){return a.indexOf(e)===t})}function L(e,t,a){var r=[];var i=[];var n;var o=a.split("/");if(o.length>1){for(var s=0;s<o.length-1;s++){var l=e.getODataAssociationEnd(t,o[s]);if(l){t=e.getODataEntityType(l.type);if(t){i=t&&t.key&&t.key.propertyRef;for(var u=0;u<i.length;u++){n=o[s]+"/"+i[u].name;r.push(n)}}}}}return r}function Y(e,t){var a=false;var r;if(e.DataPoint&&e.DataPoint.AnnotationPath){var i=t[e.DataPoint.AnnotationPath.substring(1)];if(i&&i.ForecastValue&&(i.ForecastValue.PropertyPath||i.ForecastValue.Path)){a=true;r=e}}if(a===true){return r}else{b.warning(T.CARD_WARNING+T.INVALID_FORECAST);return undefined}}function x(e,t){var a=false;var r;if(e.DataPoint&&e.DataPoint.AnnotationPath){var i=t[e.DataPoint.AnnotationPath.substring(1)];if(i&&i.TargetValue&&(i.TargetValue.PropertyPath||i.TargetValue.Path)){a=true;r=e}}if(a===true){return r}else{b.warning(T.CARD_WARNING+T.INVALID_TARGET);return undefined}}function F(e,t){var a;g(t,function(t,r){if(r.name===e){if(r["com.sap.vocabularies.Common.v1.Label"]){a=r["com.sap.vocabularies.Common.v1.Label"].String?r["com.sap.vocabularies.Common.v1.Label"].String:r["com.sap.vocabularies.Common.v1.Label"].Path}else if(r["sap:label"]){a=r["sap:label"]}return false}});return a}function $(e,t){var a=true;if(t==="line"||t==="column"||t==="bar"){g(e,function(e,t){if(t.getUid()==="valueAxis"||t.getUid()==="categoryAxis"){if(t.getValues().length!=1){a=false;b.warning(T.CARD_WARNING+T.INVALID_DIMMEAS);return false}}})}else if(t==="vertical_bullet"){g(e,function(e,t){if(t.getUid()==="actualValues"||t.getUid()==="categoryAxis"){if(t.getValues().length!=1){a=false;b.warning(T.CARD_WARNING+T.INVALID_DIMMEAS);return false}}})}if(a===true){return true}}function U(e,t,a){var r=_.TYPE_KEY;if(!e||!e[t]||!e[t][r]){return a}var i=["Edm.Int","Edmt.Int16","Edm.Int32","Edm.Int64","Edm.Decimal"];var n=e[t][r];if((i?Array.prototype.indexOf.call(i,n):-1)!==-1){return Number(a)}return a}function K(e){if(e){return e}return""}function w(e){var t={locale:function(){},format:function(e,t){var i="";if(t){i=t.split("/")}if(i.length>0){var n,s;if(i.length===3){n=Number(i[1]);s=Number(i[2]);if(isNaN(n)){n=-1}if(isNaN(s)){s=0}}else{n=2;s=0}if(i[0]==="axisFormatter"||i[0]==="ShortFloat"){var l;l=a.getFloatInstance({style:"short",minFractionDigits:n,maxFractionDigits:n?n:1});if(i[0]==="ShortFloat"){l=a.getFloatInstance({style:"short",minFractionDigits:n,maxFractionDigits:n})}if(n===-1){l=a.getFloatInstance({style:"short"})}return l.format(Number(e))}else if(i[0]==="tooltipNoScaleFormatter"){var u=a.getFloatInstance({style:"short",currencyCode:false,shortRefNumber:s,showScale:false,minFractionDigits:n,maxFractionDigits:n});if(n===-1){u=a.getFloatInstance({minFractionDigits:0,currencyCode:false})}return u.format(Number(e))}else if(i[0]==="CURR"){var f=a.getCurrencyInstance({style:"short",currencyCode:false,minFractionDigits:n,maxFractionDigits:n});if(n===-1){f=a.getCurrencyInstance({style:"short",currencyCode:false})}return f.format(Number(e))}else if(i[0].search("%")!==-1){var c=a.getPercentInstance({style:"short",minFractionDigits:n,maxFractionDigits:n});if(n===-1){c=a.getPercentInstance({style:"short",minFractionDigits:1,maxFractionDigits:1})}e=c.format(Number(e));return e}}if(e.constructor===Date){var v=r.getDateTimeInstance({pattern:t});if(t==="YearMonthDay"){v=r.getDateInstance({style:"medium"})}if(t==="YearMonth"||t==="MMM"){v=r.getDateTimeInstance({format:"MMM"})}if(t==="YearQuarter"||t==="Quarter"){v=r.getDateTimeInstance({format:"QQQ"})}if(t==="YearWeek"||t==="Week"){v=r.getDateTimeInstance({format:"www"})}var p=o.getApp();var g=p&&p.bResetChartAxisFormatter;if(g&&t==="hh:mm"){var m=e.toLocaleTimeString();var A=m.split(":");e=A[0]+":"+A[1];return e}var d=g?false:true;e=v.format(new Date(e),d)}return e}};i.numericFormatter(t)}function B(e,t){var a=e.getModel();var r=e.getVizType();if(r!="line"&&r!="bubble"){return}if(!t){t=r==="line"?"categoryAxis":"valueAxis"}var i=e.getModel("ovpCardProperties").getProperty("/entitySet");if(!a||!i){return}var n=ge(a,i);var o=e.getFeeds();for(var s=0;s<o.length;s++){if(o[s].getUid()===t){var l=o[s].getValues();if(!l){return}for(var u=0;u<l.length;u++){if(n[l[u][_.TYPE_KEY]]!="Edm.DateTime"){return}}e.setVizProperties({categoryAxis:{title:{visible:false}}});var f=e&&e.getModel("ovpCardProperties");if(f&&f.getProperty("/bInsightEnabled")){var c=e&&e.getId();P.setVizPropertyMap(c,{categoryAxis:{title:{visible:false}}})}return}}}function k(e,t,a,r,i,n){r=typeof r==="undefined"?false:r;var o=false;var s;if(!e&&r){b.error(i+T.CARD_ERROR+a+T.IS_MANDATORY);return o}if(!e){b.warning(i+T.CARD_WARNING+a+T.IS_MISSING);o=true;return o}s=t["@"+e];if(!s||typeof s!=="object"){var l=r?b.error:b.warning;l(i+T.CARD_ERROR+"in "+a+". (@"+e+" "+T.NOT_WELL_FORMED);return o}if(n&&n==="sap.ovp.cards.v4.charts.analytical.analyticalChart"&&a==="Chart Annotation"&&(!s.ChartType||!s.ChartType.$EnumMember)){b.error(i+T.CARD_ERROR+T.MISSING_CHARTTYPE+T.CHART_ANNO);return o}o=true;return o}function z(e){var t=false;if(!e){return t}var a;var r;var i;var n;var o;var s;var l;var u="";var f;var c=e.getView();if(c){u="["+c.getId()+"] "}if(!(f=e.getCardPropertiesModel())){b.error(u+T.CARD_ERROR+"in "+T.CARD_CONFIG+T.NO_CARD_MODEL);return t}l=f.getProperty("/entityType");var v=e.getMetaModel();var p=v.getData().$Annotations[l.$Type];if(!l||d(l)){b.error(u+T.CARD_ERROR+"in "+T.CARD_ANNO);return t}a=f.getProperty("/selectionAnnotationPath");r=f.getProperty("/chartAnnotationPath");n=f.getProperty("/presentationAnnotationPath");o=f.getProperty("/identificationAnnotationPath");s=f.getProperty("/dataPointAnnotationPath");i=f.getProperty("/contentFragment");t=k(a,p,"Selection Variant",false,u);t=k(r,p,"Chart Annotation",true,u,i)&&t;t=k(n,p,"Presentation Variant",false,u)&&t;t=k(o,p,"Identification Annotation",true,u)&&t;t=k(s,p,"Data Point",false,u)&&t;return t}function H(e,t,a){}function G(t){return e.getConfig(t)}function j(e,t,a,r){var i=false;var n;var o;var s;var l;var u;var f;if(!t.time||d(t.time)){return i}if(!e){return i}for(var c=0;c<e.length;c++){if(!e[c].Dimension||!(o=e[c].Dimension.$PropertyPath)){return i}n=ge(a,r);if(n&&n[o]){s=n[o][_.TYPE_KEY];l=n[o][_.DISPLAY_FORMAT_KEY];u=n[o][_.SEMANTICS_KEY];f=O(a,r,o)}if(s&&s.lastIndexOf("Edm.Date",0)===0){if(s.toLowerCase()==="edm.datetime"){if(l&&l.toLowerCase()==="date"){i=true}}else{i=true}}if(s==="Edm.String"&&(f||u&&I.indexOf(u)>-1)){i=true}if(i){e.unshift(e.splice(c,1)[0]);break}}return i}function W(e,t,a){var r="";var i=G(t);var n,o;if(!i){return r}r=i.default.type;n=e.getSetting("dataModel");o=e.getSetting("ovpCardProperties").getProperty("/entitySet");if(j(a,i,n,o)){r=i.time.type}return r}W.requiresIContext=true;function X(e,t,a){if(!e.length){return}var r=a==="dimension"?"Dimension":"Measure";var i=[];g(e,function(e,t){if(!t||!t[r]||!t[r].PropertyPath){b.error(T.INVALID_CHART_ANNO);return false}i.push(t[r].PropertyPath)});var n=jQuery.map(t.feeds,function(e){if(e.type===a){if(e.role){return e.role.split("|")}return[]}});n=jQuery.grep(n,function(e,t){return(n?Array.prototype.indexOf.call(n,e):-1)===t}).join(", ");b.error(T.CARD_ERROR+T.INVALID_REDUNDANT+a+"(s) "+i.join(", ")+". "+T.ALLOWED_ROLES+t.type+T.CHART_IS+n)}function q(e,t){var a;if(e){if(e.String){a=e.String}else if(e.Boolean||e.Bool){a=Q(e)}else{a=Z(e,t)}}return a}function Q(e,t){if(e&&e.Boolean){if(e.Boolean.toLowerCase()==="true"){return true}else if(e.Boolean.toLowerCase()==="false"){return false}}else if(e&&e.Bool){if(e.Bool.toLowerCase()==="true"){return true}else if(e.Bool.toLowerCase()==="false"){return false}}return t}function Z(e,t){var r;if(e){if(e.String){r=Number(e.String)}else if(e.Int){r=Number(e.Int)}else if(e.Decimal){r=Number(e.Decimal)}else if(e.Double){r=Number(e.Double)}else if(e.Single){r=Number(e.Single)}}if(t){var i=a.getFloatInstance({style:"short",minFractionDigits:2,maxFractionDigits:2});if(r){r=i.format(Number(r))}}return r}function J(e,a){function r(e){if(e){if(e.Path){return"{path:'"+e.Path+"'}"}else{return q(e)}}else{return""}}var i=e[e.measureNames];if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.ImprovementDirection){var n=a.CriticalityCalculation.ImprovementDirection.EnumMember;var o=r(a.CriticalityCalculation.DeviationRangeLowValue);var s=r(a.CriticalityCalculation.DeviationRangeHighValue);var l=r(a.CriticalityCalculation.ToleranceRangeLowValue);var u=r(a.CriticalityCalculation.ToleranceRangeHighValue);return t._calculateCriticalityState(i,n,o,s,l,u,E.Criticality.StateValues)}else{var f=a.Criticality.EnumMember;var c=f?f.split("/"):[];if(c){return c[1]}}}function ee(e,t,a){var r,i;g(t,function(t,a){if(a["com.sap.vocabularies.Common.v1.Label"]&&a["com.sap.vocabularies.Common.v1.Label"].String===e.measureNames){r=a.name;return false}else if(a["com.sap.vocabularies.Common.v1.Label"]&&a["com.sap.vocabularies.Common.v1.Label"].Path===e.measureNames){r=a.name;return false}else if(a["sap:label"]===e.measureNames){r=a.name;return false}});g(a,function(e,t){if(t.Measure.PropertyPath===r){if(!t.DataPoint||!t.DataPoint.AnnotationPath){return false}i=t.DataPoint.AnnotationPath;return false}});return i}function te(e,t){if(e){if(e.Path){return e.Path}else{return q(e,t)}}else{return""}}function ae(e,t){function a(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}var r=false;g(e,function(e,i){if(i.DataPoint&&i.DataPoint.AnnotationPath){var n=t[i.DataPoint.AnnotationPath.substring(1)];if(n&&n.CriticalityCalculation&&n.CriticalityCalculation.ImprovementDirection&&n.CriticalityCalculation.ImprovementDirection.EnumMember){var o=n.CriticalityCalculation.ImprovementDirection.EnumMember;var s=te(n.CriticalityCalculation.DeviationRangeLowValue);var l=te(n.CriticalityCalculation.DeviationRangeHighValue);var u=te(n.CriticalityCalculation.ToleranceRangeLowValue);var f=te(n.CriticalityCalculation.ToleranceRangeHighValue);if(a(o,"Minimize")||a(o,"Minimizing")){if(f&&l){r=true;return false}else{b.warning(T.CARD_WARNING+T.INVALID_CRITICALITY)}}else if(a(o,"Maximize")||a(o,"Maximizing")){if(u&&s){r=true;return false}else{b.warning(T.CARD_WARNING+T.INVALID_CRITICALITY)}}else if(a(o,"Target")){if(u&&s&&f&&l){r=true;return false}else{b.warning(T.CARD_WARNING+T.INVALID_CRITICALITY)}}}else if(n&&n.Criticality){r=true;return false}else{b.warning(T.CARD_WARNING+T.INVALID_IMPROVEMENT_DIR)}}});if(r===true&&e.length>1){b.warning(T.CARD_WARNING+T.INVALID_SEMANTIC_MEASURES)}return r}function re(e,t,a,r){function i(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}var n=[null,null];var o=true;var s=e.Measure.PropertyPath;if(a[s]){if(a[s][_.LABEL_KEY_V4]){s=pe(a[s][_.LABEL_KEY_V4].String?a[s][_.LABEL_KEY_V4].String:a[s][_.LABEL_KEY_V4].Path,r,a)}else if(a[s][_.LABEL_KEY]){s=a[s][_.LABEL_KEY]}else if(s){s=s}}var l=e.DataPoint.AnnotationPath;var u=t[l.substring(1)];if(!u.CriticalityCalculation||!u.CriticalityCalculation.ImprovementDirection||!u.CriticalityCalculation.ImprovementDirection.EnumMember){return n}var f=u.CriticalityCalculation.ImprovementDirection.EnumMember;var c=te(u.CriticalityCalculation.DeviationRangeLowValue,o);var p=te(u.CriticalityCalculation.DeviationRangeHighValue,o);var g=te(u.CriticalityCalculation.ToleranceRangeLowValue,o);var m=te(u.CriticalityCalculation.ToleranceRangeHighValue,o);if(i(f,"Minimize")||i(f,"Minimizing")){if(m&&p){n[0]=v.getText("MINIMIZING_LESS",[s,m]);n[1]=v.getText("MINIMIZING_MORE",[s,p]);n[2]=v.getText("MINIMIZING_CRITICAL",[m,s,p])}}else if(i(f,"Maximize")||i(f,"Maximizing")){if(g&&c){n[0]=v.getText("MAXIMISING_MORE",[s,g]);n[1]=v.getText("MAXIMISING_LESS",[s,c]);n[2]=v.getText("MAXIMIZING_CRITICAL",[c,s,g])}}else if(i(f,"Target")){if(g&&c&&m&&p){n[0]=v.getText("TARGET_BETWEEN",[g,s,m]);n[1]=v.getText("TARGET_AROUND",[s,c,p]);n[2]=v.getText("TARGET_CRITICAL",[c,s,g,m,p])}}return n}function ie(e,t,a){if(t&&t.DataPoint&&t.DataPoint.AnnotationPath){var r=a[t.DataPoint.AnnotationPath.substring(1)];var i,n;if(r&&r.ValueFormat){i=r.ValueFormat}else if(r&&r.NumberFormat){i=r.NumberFormat}if(i&&i.NumberOfFractionalDigits&&i.NumberOfFractionalDigits.Int){n=i.NumberOfFractionalDigits.Int;if(e<Number(n)){e=Number(n)}}}return e}function ne(e,t,a){if(t&&t.DataPoint&&t.DataPoint.AnnotationPath){var r=a[t.DataPoint.AnnotationPath.substring(1)];var i,n;if(r&&r.ValueFormat){i=r.ValueFormat}else if(r&&r.NumberFormat){i=r.NumberFormat}if(i){if(i.ScaleFactor&&i.ScaleFactor.Decimal){n=Number(i.ScaleFactor.Decimal)}else if(i.ScaleFactor&&i.ScaleFactor.Int){n=Number(i.ScaleFactor.Int)}if(!isNaN(n)){if(e===undefined){e=Number(n)}else if(e>Number(n)){e=Number(n)}}}}return e}function oe(e,t){if(e&&e[t]&&(e[t]["Org.OData.Measures.V1.ISOCurrency"]||e[t][_.SEMANTICS_KEY]&&e[t][_.SEMANTICS_KEY]===_.CURRENCY_CODE)){return true}return false}function se(e,t,a){if(e[t[a].$PropertyPath].$Type===_.EDM_INT32){return true}return false}function le(e,t,a){if(e[t[a].$PropertyPath].$Type===_.EDM_INT64){return true}return false}function ue(e,t,a){var r,i,o,c,A;var d,h,y,C,I,S=false;var M;var V,L,U;var K,w=[],B=[];var k;var z;var H=a&&a.getView();var W,q;var Q=H&&H.getModel("ui");var Z=Q&&Q.getProperty("/chartSettings");r=e.getModel("ovpCardProperties");if(s.checkIfAPIIsUsed(a)){S=r&&r.getData()&&r.getData().showDataLabel}A=Z?Z.showDataLabel:S;d=e.getVizType();h=G();for(var te in h){if((z=h[te].reference)&&h[z]){var ue=m({},h[z]);h[te]=ue}if(h[te].default.type===d||h[te].time&&h[te].time.type===d){y=h[te];break}}if(!y){b.error(T.CARD_ERROR+"in "+T.CARD_CONFIG+T.CARD_CONFIG_ERROR+d+" "+T.CARD_CONFIG_JSON);return}if(!r){b.error(T.CARD_ERROR+"in "+T.CARD_CONFIG+T.NO_CARD_MODEL);return}var ve=e.getModel();var de=r.getProperty("/entitySet");if(!ve||!de){return}var he=r.getProperty("/entityType").$Type;var Pe=a.getMetaModel().getData().$Annotations[he];var ye={property:a.getMetaModel().getObject("/"+he+"/")};i=p.merge(true,{},Pe,ye);if(!i){b.error(T.CARD_ANNO_ERROR+"in "+T.CARD_ANNO);return}var Ee=ge(ve,de);Ne(ve,Ee,he);o=r.getProperty("/chartAnnotationPath");if(!o||!(c=i["@"+o])){b.error(T.CARD_ANNO_ERROR+"in "+T.CARD_ANNO);return}var Ce=ce(i,o,e);if(!(C=c.DimensionAttributes)||!C.length){b.error(T.CHART_ANNO_ERROR+"in "+T.CHART_ANNO+" "+T.DIMENSIONS_MANDATORY);return}var _e;if(!(I=c.MeasureAttributes)||!I.length){b.error(T.CHART_ANNO_ERROR+"in "+T.CHART_ANNO+" "+T.MEASURES_MANDATORY);return}else{var Te=I[0].DataPoint?i[I[0].DataPoint.AnnotationPath.substring(1)]:null;var Ie=Te&&Te.ValueFormat&&Te.ValueFormat.NumberOfFractionalDigits&&Te.ValueFormat.NumberOfFractionalDigits;_e=Ie?Ie:0}k=j(C,y,ve,de);if(k){y=y.time}else{y=y.default}var Oe=r.getProperty("/ChartProperties")||r.getProperty("/chartProperties");if(r&&r.getProperty("/tabs")&&Oe===undefined){W=H.byId("ovp_card_dropdown");q=parseInt(W.getSelectedKey(),10);Oe=r.getProperty("/tabs")&&r.getProperty("/tabs")[q-1]&&(r.getProperty("/tabs")[q-1]["ChartProperties"]||r.getProperty("/tabs")[q-1]["chartProperties"])}var Se=false;var Me=_e>0?"tooltipNoScaleFormatter/"+_e.toString()+"/":"tooltipNoScaleFormatter/-1/";var Ve=new n({formatString:Me});Ve.connect(e.getVizUid());Ve.connect(e.getVizUid());e._oOvpVizFrameTooltip=Ve;[y.dimensions,y.measures].forEach(function(e,t){var a=t?I:C;var r=t?"measure(s)":"dimension(s)";if(e.min&&a.length<e.min){b.error(T.CARD_ERROR+"in "+d+" "+T.CARD_LEAST+e.min+" "+r);Se=true}if(e.max&&a.length>e.max){b.error(T.CARD_ERROR+"in "+d+T.CARD_MOST+e.max+" "+r);Se=true}});if(Se){return}var Le=true;if(y.properties&&y.properties.hasOwnProperty("hideLabel")&&!y.properties["hideLabel"]){Le=false}var Ye=true;var xe=false;if(d==="donut"){xe=true}e.removeAllAggregation();M={legend:{isScrollable:false},title:{visible:true},interaction:{noninteractiveMode:Ye?false:true,selectability:{legendSelection:xe?true:false,axisLabelSelection:false,mode:"EXCLUSIVE",plotLassoSelection:false,plotStdSelection:true},zoom:{enablement:"disabled"}},plotArea:{window:{start:"firstDataPoint",end:"lastDataPoint"},dataLabel:{visible:A||xe?true:false,type:"value"},dataPoint:{invalidity:"ignore"},alignment:{vertical:"top"}},categoryAxis:{label:{truncatedLabelRatio:.15}},general:{groupData:false,showAsUTC:true}};if(y.properties&&y.properties.semanticColor===true&&ae(I,i)){var Fe=v.getText("GOOD");var $e=v.getText("BAD");var Ue=v.getText("CRITICAL");var Ke=v.getText("OTHERS");if(I.length===1){var we=re(I[0],i,Ee,e);var Fe=we[0]||Fe,$e=we[1]||$e,Ue=we[2]||Ue,Ke=v.getText("OTHERS")}M.plotArea.dataPointStyle={rules:[{callback:function(e){var t=ee(e,Ee,I);if(!t){return false}var a=i[t.substring(1)];var r=J(e,a);if(r===E.Criticality.StateValues.Positive){return true}else if(r==="Positive"){return true}},properties:{color:"sapUiChartPaletteSemanticGoodLight1"},displayName:Fe},{callback:function(e){var t=ee(e,Ee,I);if(!t){return false}var a=i[t.substring(1)];var r=J(e,a);if(r===E.Criticality.StateValues.Critical){return true}else if(r==="Critical"){return true}},properties:{color:"sapUiChartPaletteSemanticCriticalLight1"},displayName:Ue},{callback:function(e){var t=ee(e,Ee,I);if(!t){return false}var a=i[t.substring(1)];var r=J(e,a);if(r===E.Criticality.StateValues.Negative){return true}else if(r==="Negative"){return true}},properties:{color:"sapUiChartPaletteSemanticBadLight1"},displayName:$e},{callback:function(e){var t=ee(e,Ee,I);if(!t){return false}var a=i[t.substring(1)];var r=J(e,a);if(r===E.Criticality.StateValues.None){return true}else if(r==="Neutral"){return true}},properties:{color:"sapUiChartPaletteSemanticNeutralLight1"},displayName:Ke}]}}var Be=r.getProperty("/bEnableStableColors");var ke=r.getProperty("/colorPalette");var ze;if(!Be&&N.indexOf(c.ChartType.$EnumMember)>=0&&ke&&Object.keys(ke).length>=2&&Object.keys(ke).length<=4){g(C,function(e,t){if(t&&t.Role&&t.Role.$EnumMember==="com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series"){ze=t.Dimension&&t.Dimension.$PropertyPath;return}});var He;if(ze){if(Ee&&Ee[ze]){if(Ee[ze][_.LABEL_KEY_V4]){He=pe(Ee[ze][_.LABEL_KEY_V4]?Ee[ze][_.LABEL_KEY_V4]:Ee[ze][_.LABEL_KEY_V4].Path,e,Ee)}else if(Ee[ze][_.LABEL_KEY]){He=Ee[ze][_.LABEL_KEY]}else if(ze){He=ze}}if(ke instanceof Array){var Ge=ke.map(function(e){return e.color});var je=ke.map(function(e){return e.legendText});var We=je[0]!=undefined?je[0]:v.getText("OTHERS");var Xe=je[1]!=undefined?je[1]:v.getText("BAD");var qe=je[2]!=undefined?je[2]:v.getText("CRITICAL");var Qe=je[3]!=undefined?je[3]:v.getText("GOOD")}M.plotArea.dataPointStyle={rules:[{callback:function(e){if(e&&(e[He]==="3"||e[He]===3)){if(ke instanceof Array){if(ke.length<4){return false}}else if(ke&&!ke.hasOwnProperty(3)){return false}return true}},properties:{color:ke instanceof Array&&Ge.length?Ge[3]:ke[3]&&ke[3]["color"]},displayName:Qe||ke[3]&&ke[3]["legendText"]},{callback:function(e){if(e&&(e[He]==="2"||e[He]===2)){if(ke instanceof Array){if(ke.length<3){return false}}else if(ke&&!ke.hasOwnProperty(2)){return false}return true}},properties:{color:ke instanceof Array&&Ge.length?Ge[2]:ke[2]&&ke[2]["color"]},displayName:qe||ke[2]&&ke[2]["legendText"]},{callback:function(e){if(e&&(e[He]==="1"||e[He]===1)){return true}},properties:{color:ke instanceof Array&&Ge.length?Ge[1]:ke[1]&&ke[1]["color"]},displayName:Xe||ke[1]&&ke[1]["legendText"]},{callback:function(e){if(e&&(e[He]==="0"||e[He]===0)){return true}},properties:{color:ke instanceof Array&&Ge.length?Ge[0]:ke[0]&&ke[0]["color"]},displayName:We||ke[0]&&ke[0]["legendText"]}]};var Ze;if(r&&r.getProperty("/bInsightEnabled")){Ze=m({},M.plotArea.dataPointStyle);var Je=Ee&&Ee[ze]&&Ee[ze][_.TYPE_KEY]||"";Ze.rules.forEach(function(e,t,a){delete e["callback"];e.dataContext={};if(Je){e.dataContext[He]=Je==="Edm.String"?a.length-1-t+"":a.length-1-t}else{e.dataContext[He]=a.length-1-t+""}})}}}var et=false;var tt=false;if(c.ChartType.$EnumMember===_.SCATTER_CHARTTYPE||c.ChartType.$EnumMember===_.BUBBLE_CHARTTYPE||c.ChartType.$EnumMember===_.LINE_CHARTTYPE){if(c&&c.AxisScaling&&c.AxisScaling.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"){var at=c.AxisScaling;if(at.AutoScaleBehavior&&at.AutoScaleBehavior.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisAutoScaleBehaviorType"){var rt=at.AutoScaleBehavior;if(rt.ZeroAlwaysVisible&&rt.ZeroAlwaysVisible=="true"){M.plotArea.adjustScale=false;et=true}else if(rt.DataScope){M.plotArea.adjustScale=true;et=true}}else if(at.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"&&at.ScaleBehavior&&at.ScaleBehavior.$EnumMember){var it=at.ScaleBehavior.$EnumMember;var nt=it.substring(it.lastIndexOf("/")+1,it.length);if(nt=="FixedScale"){tt=true}}}else if(c&&c.AxisScaling&&c.AxisScaling.$EnumMember){var ot=c.AxisScaling.$EnumMember.substring(c.AxisScaling.$EnumMember.lastIndexOf("/")+1,c.AxisScaling.$EnumMember.length);switch(ot){case"AdjustToDataIncluding0":M.plotArea.adjustScale=false;et=true;break;case"AdjustToData":M.plotArea.adjustScale=true;et=true;break;case"MinMaxValues":tt=true;break;default:break}}if(tt){var st=[];if(c["MeasureAttributes"][0]&&c["MeasureAttributes"][0].DataPoint&&c["MeasureAttributes"][0].DataPoint.AnnotationPath){var lt=c["MeasureAttributes"][0].DataPoint.AnnotationPath;var ut=lt.substring(lt.lastIndexOf("@")+1,lt.length);if(i&&i[ut]){var ft=i[ut];if(ft&&ft.MaximumValue&&ft.MaximumValue&&ft.MinimumValue&&ft.MinimumValue){st.push({feed:"valueAxis",max:ft.MaximumValue,min:ft.MinimumValue});et=true}else{b.error(T.ERROR_MISSING_AXISSCALES)}}}if(c.ChartType.$EnumMember!==_.LINE_CHARTTYPE&&c["MeasureAttributes"][1]&&c["MeasureAttributes"][1].DataPoint&&c["MeasureAttributes"][1].DataPoint.AnnotationPath){var lt=c["MeasureAttributes"][1].DataPoint.AnnotationPath;var ut=lt.substring(lt.lastIndexOf("@")+1,lt.length);if(i&&i[ut]){var ft=i[ut];if(ft&&ft.MaximumValue&&ft.MaximumValue&&ft.MinimumValue&&ft.MinimumValue){st.push({feed:"valueAxis2",max:ft.MaximumValue,min:ft.MinimumValue});et=true}else{b.error(T.ERROR_MISSING_AXISSCALES)}}}e.setVizScales(st)}}L=C.slice();U=I.slice();var ct=0;var vt=0;var pt;var gt;var mt=false;var At=false;var dt;var ht=[];var Pt=[],yt=[];if((d==="column"||d==="bar"||d==="vertical_bullet")&&y.feeds&&y.feeds.length>0){var Et;for(Et=0;Et<y.feeds.length;Et++){if(y.feeds[Et].uid==="color"){y.feeds.splice(Et,1);break}}for(Et=0;Et<y.feeds.length;Et++){if(y.feeds[Et].uid==="categoryAxis"){delete y.feeds[Et].role;break}}if(r.getProperty("/colorPalette")){for(Et=0;Et<y.feeds.length;Et++){if(y.feeds[Et].uid==="categoryAxis"){y.feeds[Et].role="Category";break}}y.feeds.push({uid:"color",min:1,type:"dimension",role:"Series"})}}g(y.feeds,function(t,a){var n=a.uid;var o=[];if(a.type){var s,c,v;if(a.type==="dimension"){s=C.length;c="Dimension";v="dimensions";V=L;K=w}else{s=I.length;c="Measure";v="measures";V=U;K=B}var p=0,m=s;if(a.min){p=p>a.min?p:a.min}if(a.max){m=m<a.max?m:a.max}if(!a.role){var A=V.length;for(var h=0;h<A&&o.length<m;++h){var E=V[h];V.splice(h,1);--A;--h;o.push(E);if(Ee[E[c].$PropertyPath][_.UNIT_KEY_V4_ISOCurrency]){dt=Ee[E[c].$PropertyPath][_.UNIT_KEY_V4_ISOCurrency].$Path?Ee[E[c].$PropertyPath][_.UNIT_KEY_V4_ISOCurrency].$Path:undefined}else if(Ee[E[c].$PropertyPath][_.UNIT_KEY_V4_Unit]){dt=Ee[E[c].$PropertyPath][_.UNIT_KEY_V4_Unit].$Path?Ee[E[c].$PropertyPath][_.UNIT_KEY_V4_Unit].$Path:undefined}else if(Ee[E[c].$PropertyPath][_.UNIT_KEY]){dt=Ee[E[c].$PropertyPath][_.UNIT_KEY]}if(oe(Ee,dt)){mt=true}else{At=true}if(!mt){ct=ie(ct,E,i);pt=ne(pt,E,i)}else{vt=ie(vt,E,i);gt=ne(gt,E,i)}}}else{var N=a.role.split("|");g(N,function(e,t){if(o.length===m){return false}var a=V.length;for(var r=0;r<a&&o.length<m;++r){var n=V[r];if(n&&n.Role&&n.Role.$EnumMember&&n.Role.$EnumMember.split("/")&&n.Role.$EnumMember.split("/")[1]){var s=n.Role.$EnumMember.split("/")[1];if(s===t){V.splice(r,1);--a;--r;o.push(n);if(Ee[n[c].$PropertyPath][_.UNIT_KEY_V4_ISOCurrency]){dt=Ee[n[c].$PropertyPath][_.UNIT_KEY_V4_ISOCurrency].$Path?Ee[n[c].$PropertyPath][_.UNIT_KEY_V4_ISOCurrency].$Path:undefined}else if(Ee[n[c].$PropertyPath][_.UNIT_KEY_V4_Unit]){dt=Ee[n[c].$PropertyPath][_.UNIT_KEY_V4_Unit].$Path?Ee[n[c].$PropertyPath][_.UNIT_KEY_V4_Unit].$Path:undefined}else if(Ee[n[c].$PropertyPath][_.UNIT_KEY]){dt=Ee[n[c].$PropertyPath][_.UNIT_KEY]}if(oe(Ee,dt)){mt=true}else{At=true}if(!mt){ct=ie(ct,n,i);pt=ne(pt,n,i)}else{vt=ie(vt,n,i);gt=ne(gt,n,i)}}}else if((K?Array.prototype.indexOf.call(K,n):-1)===-1){K.push(n)}}});if(o.length<m){g(K,function(e,t){var a;var r;if((a=y[v].defaultRole)&&(N?Array.prototype.indexOf.call(N,a):-1)!==-1&&(r=(V?Array.prototype.indexOf.call(V,t):-1)!==-1)){V.splice(r,1);o.push(t);if(Ee[t[c].$PropertyPath][_.UNIT_KEY_V4_ISOCurrency]){dt=Ee[t[c].$PropertyPath][_.UNIT_KEY_V4_ISOCurrency].$Path?Ee[t[c].$PropertyPath][_.UNIT_KEY_V4_ISOCurrency].$Path:undefined}else if(Ee[t[c].$PropertyPath][_.UNIT_KEY_V4_Unit]){dt=Ee[t[c].$PropertyPath][_.UNIT_KEY_V4_Unit].$Path?Ee[t[c].$PropertyPath][_.UNIT_KEY_V4_Unit].$Path:undefined}else if(Ee[t[c].$PropertyPath][_.UNIT_KEY]){dt=Ee[t[c].$PropertyPath][_.UNIT_KEY]}if(oe(Ee,dt)){mt=true}else{At=true}if(!mt){ct=ie(ct,t,i);pt=ne(pt,t,i)}else{vt=ie(vt,t,i);gt=ne(gt,t,i)}if(o.length===m){return false}}})}if(o.length<p){b.error(T.CARD_ERROR+T.MIN_FEEDS+d+" "+T.FEEDS_OBTAINED+o.length+" "+T.FEEDS_REQUIRED+p+" "+T.FEEDS);return false}}if(o.length){var R=[];var S;if(!(S=e.getDataset())){b.error(T.NO_DATASET);return false}D=i;g(o,function(t,a){if(!a||!a[c]||!a[c].$PropertyPath){b.error(T.INVALID_CHART_ANNO);return false}var i=a[c].$PropertyPath;var o=i;var s=i;var f=null;if(Ee&&Ee[i]){if(Ee[i]["annotations"]){if(Ee[i]["annotations"]["@"+_.LABEL_KEY_V4]){if(Ee[i]["annotations"]["@"+_.LABEL_KEY_V4]instanceof String&&Ee[i]["annotations"]["@"+_.LABEL_KEY_V4]){o=pe(Ee[i]["annotations"]["@"+_.LABEL_KEY_V4],e,Ee)}else if(Ee[i]["annotations"]["@"+_.LABEL_KEY_V4].$Path){o=Ee[i]["annotations"]["@"+_.LABEL_KEY_V4].$Path}else{o=Ee[i]["annotations"]["@"+_.LABEL_KEY_V4]}}else if(Ee[i]["annotations"]["@"+_.LABEL_KEY]){o=Ee[i]["annotations"]["@"+_.LABEL_KEY]}else if(i){o=i}if(Ee[i]["annotations"]["@"+_.TEXT_KEY_V4]){s=Ee[i]["annotations"]["@"+_.TEXT_KEY_V4].$String?Ee[i]["annotations"]["@"+_.TEXT_KEY_V4].$String:Ee[i]["annotations"]["@"+_.TEXT_KEY_V4].$Path}else if(Ee[i]["annotations"]["@"+_.TEXT_KEY]){s=Ee[i]["annotations"]["@"+_.TEXT_KEY]}}else if(i){s=i}f=Ee[i].$Type||null}var v;if((f==="Edm.DateTime"||f==="Edm.DateTimeOffset")&&s===i){v="{path:'"+i+"', formatter: 'sap.ovp.cards.v4.charts.VizAnnotationManager.returnDateFormat'}"}else{if(Ee[i]&&Ee[i]["annotations"]&&Ee[i]["annotations"]["@"+_.TEXT_KEY_V4]&&Ee[i]["annotations"]["@"+_.TEXT_KEY_V4+"@"+_.TEXT_ARRANGEMENT_ANNO]){var p,g;p=Ee[i]["annotations"]["@"+_.TEXT_KEY_V4+"@"+_.TEXT_ARRANGEMENT_ANNO];g=p&&p.$EnumMember;if(!g){p=Ee[i]["annotations"]["@"+_.TEXT_KEY_V4]["@"+_.TEXT_ARRANGEMENT_ANNO];g=p&&p.$EnumMember}if(!g){var m=D;p=m&&m["@"+_.TEXT_ARRANGEMENT_ANNO];g=p&&p.$EnumMember}switch(g){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":v="{"+s+"}"+" "+"("+"{"+i+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":v="{"+i+"}"+" "+"("+"{"+s+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":v="{"+s+"}";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeperate":v="{"+i+"}"+" "+"("+"{"+s+"}"+")";break;default:v="{"+i+"}";break}}else{v="{"+s+"}"}if(r&&r.getProperty("/bInsightEnabled")){P.setDimensionPath(r.getData().cardId,i,v)}}R.push(o);if(c==="Dimension"){if(n==="waterfallType"){var A=new l({name:o,value:"{"+i+"}"})}else{var A=new l({name:o,value:"{"+i+"}",displayValue:v})}var d=Ee[i][_.SEMANTICS_KEY];var h=O(e.getModel(),de,i);if(k&&(f==="Edm.DateTime"||h||f==="Edm.DateTimeOffset"||d&&d.lastIndexOf("year",0)===0)){A.setDataType("date")}S.addDimension(A);if((yt?Array.prototype.indexOf.call(yt,o):-1)===-1){yt.push(o)}}else{S.addMeasure(new u({name:o,value:"{"+i+"}"}));if((Pt?Array.prototype.indexOf.call(Pt,o):-1)===-1&&n!="bubbleWidth"){Pt.push(o)}}});e.addFeed(new f({uid:n,type:c,values:R}));if(n==="categoryAxis"){M[n]={title:{visible:Le?false:true,text:R.join(", ")},label:{formatString:mt?"CURR":"axisFormatter",truncatedLabelRatio:.15}}}else{M[n]={title:{visible:Le?false:true,text:R.join(", ")},label:{formatString:mt?"CURR":"axisFormatter"}}}ht.push(M[n]);if(y.hasOwnProperty("vizProperties")){var Y=0;var x=y.vizProperties.length;var F;var $;for(;Y<x;Y++){if(y.vizProperties[Y].hasOwnProperty("value")){$=y.vizProperties[Y].value}if(y.vizProperties[Y].hasOwnProperty("path")){F=y.vizProperties[Y].path.split(".");var z=F.length;var H,G;var j;for(var W=0,j=F[0],H=M,G=Oe;W<z;++W){if(W===z-1){if(G&&G.hasOwnProperty(j)){if(d==="donut"&&(G[j]==="value"||G[j]==="percentage")){$=G[j]}else if(d!="donut"){$=G[j]}}if(et&&j!="adjustScale"||!et&&j==="adjustScale"||!et&&j!="adjustScale"){H[j]=$}break}H[j]=H[j]||{};H=H[j];if(G){G[j]=G[j]||{};G=G[j]}j=F[W+1]}}}}if(a.hasOwnProperty("vizProperties")){var t=0;var X=a.vizProperties.length;var q;var Q;var Z;for(;t<X;t++){if(a.vizProperties[t].hasOwnProperty("method")){Q=a.vizProperties[t].method;switch(Q){case"count":q=R.length;if(a.vizProperties[t].hasOwnProperty("min")&&q<=a.vizProperties[t].min){q=a.vizProperties[t].min}else if(a.vizProperties[t].hasOwnProperty("max")&&q>=a.vizProperties[t].max){q=a.vizProperties[t].max}break;default:break}}else if(a.vizProperties[t].hasOwnProperty("value")){q=a.vizProperties[t].value}if(a.vizProperties[t].hasOwnProperty("path")){Z=a.vizProperties[t].path.split(".");var J=Z.length;for(var h=0,ee=Z[0],te=M;h<J;++h){if(h===J-1){te[ee]=q;break}te[ee]=te[ee]||{};te=te[ee];ee=Z[h+1]}}}}}}});var Ct=e.getFeeds();if(y.properties&&y.properties.semanticPattern===true&&$(Ct,d)){g(Ct,function(t,a){if(Ct[t].getType()==="Measure"&&(Ct[t].getUid()==="valueAxis"||Ct[t].getUid()==="actualValues")){var r;g(I,function(e,a){var n=F(a.Measure.$PropertyPath,Ee);if(n===Ct[t].getValues()[0]){r=Y(a,i);return false}});if(r){var n=F(r.Measure.$PropertyPath,Ee);var o=i[r.DataPoint.AnnotationPath.substring(1)].ForecastValue.PropertyPath||i[r.DataPoint.AnnotationPath.substring(1)].ForecastValue.Path;var s=F(o,Ee);var l=v.getText("ACTUAL",[n]);var f=v.getText("FORECAST",[s]);M.plotArea.dataPointStyle={rules:[{dataContext:{MeasureNamesDimension:n},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"line",lineColor:"sapUiChartPaletteSequentialHue1Light1"},displayName:l},{dataContext:{MeasureNamesDimension:s},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"dotted",lineColor:"sapUiChartPaletteSequentialHue1Light1",pattern:"diagonalLightStripe"},displayName:f}]};e.getDataset().addMeasure(new u({name:s,value:"{"+o+"}"}));var c=Ct[t].getValues();c.push(s);Ct[t].setValues(c)}return false}})}var _t=false;if(ke&&ke.dimensionSettings&&Object.keys(ke.dimensionSettings).length>0){var Tt=Object.keys(ke.dimensionSettings);for(var It=0;It<Tt.length;It++){var Nt=Tt[It];var Rt=ke.dimensionSettings[Nt];if(Object.keys(Rt).length>10){_t=true;break}}}if(Be&&R.indexOf(c.ChartType.$EnumMember)>=0&&!Boolean(_t)){var Dt=[];var bt=true;for(var It=0;It<C.length;It++){var Ot=C[It].Dimension.$PropertyPath;Dt.push(Ot)}for(var It=0;It<Dt.length;It++){var Nt=Dt[It];if(Tt.indexOf(Nt)>-1){var St=ke.dimensionSettings[Nt];var Mt=Object.keys(St);var Vt=[];for(var It=0;It<Mt.length;It++){var Lt=St[Mt[It]];Vt.push(Lt)}bt=bt&&Vt.every(De)}}if(bt){var Yt=[];for(var It=0;It<Dt.length;It++){var Nt=Dt[It];if(Tt.indexOf(Nt)>-1){var St=ke.dimensionSettings[Nt];var Mt=Object.keys(St);var Vt=[];for(var It=0;It<Mt.length;It++){var Lt=St[Mt[It]];Vt.push(Lt)}Re(Vt);for(var xt=0;xt<Vt.length;xt++){var Ft=Vt[xt].dimensionValue;var $t=Vt[xt].color;var Lt={properties:{color:$t}};Lt.dataContext={};var Ut=fe(Ee,e,Nt);Lt.dataContext[Ut]=Ft;Lt.displayName=Ft;Yt.push(Lt)}}}M.plotArea.dataPointStyle=M.plotArea.dataPointStyle||{};M.plotArea.dataPointStyle["rules"]=Yt}else{var Yt=[];for(var It=0;It<Dt.length;It++){var Nt=Dt[It];if(Tt.indexOf(Nt)>-1){var St=ke.dimensionSettings[Nt];var Mt=Object.keys(St);var Vt=[];for(var It=0;It<Mt.length;It++){var Lt=St[Mt[It]];Vt.push(Lt)}Re(Vt);var Kt=Vt.map(be)}}M.legend.order=function(e,t){var a=Kt.indexOf(e);var r=Kt.indexOf(t);return a>r?1:-1}}}if(y.properties&&y.properties.semanticPattern===true&&$(Ct,d)&&e.getVizType()==="vertical_bullet"){g(Ct,function(t,a){if(Ct[t].getType()==="Measure"&&(Ct[t].getUid()==="valueAxis"||Ct[t].getUid()==="actualValues")){var r;g(I,function(e,a){var n=F(a.Measure.PropertyPath,Ee);if(n===Ct[t].getValues()[0]){r=x(a,i);return false}});if(r){var n=i[r.DataPoint.AnnotationPath.substring(1)].TargetValue.PropertyPath||i[r.DataPoint.AnnotationPath.substring(1)].TargetValue.Path;var o=F(n,Ee);e.getDataset().addMeasure(new u({name:o,value:"{"+n+"}"}));e.addFeed(new f({uid:"targetValues",type:"Measure",values:[o]}))}return false}})}if(mt&&At){b.warning(v.getText("Currency_non_currency_measure"))}g(Ct,function(e,t){var a=t.getProperty("type");if(a==="Measure"){var r=t.getProperty("values");var i=true;var n=c.MeasureAttributes.filter(function(e){var t=e[a].$PropertyPath;var i=Ee[t];return Object.keys(i).length>0&&r.indexOf(t)>=0});g(n,function(e,t){if(se(Ee,t,a)||le(Ee,t,a)){i=false}else{i=true;return false}});if(!i){M[t.getProperty("uid")]["label"]["allowDecimals"]=false}}});var wt;if(gt===undefined){gt=""}if(pt===undefined){pt=""}if(mt){wt=Ae(gt,mt)}else{wt=Ae(pt,mt)}if(t){t.setScale(wt)}var Bt=me(Pt,yt,Ce);var kt="";g(Ct,function(e,t){var a="-1";var r=t.getProperty("type");if(r==="Measure"){var n=ht.filter(function(e){var a=e["title"]["text"].split(",").filter(function(e){if(t.getValues().indexOf(e.trim())>=0){return true}else{return false}});if(a.length>0){return true}else{return false}});if(n&&n.length){var o=t.getValues();if(o&&o.length){g(o,function(e,t){var n=t.trim();var o=I.filter(function(e){if(e["Measure"]&&e["Measure"]["PropertyPath"]){var t=e["Measure"]["PropertyPath"];if(Ee[t]&&Ee[t][_.LABEL_KEY]===n||Ee[t]&&Ee[t][_.LABEL_KEY_V4]===n){return true}else{return false}}});if(o&&o.length){var s=o[0];if(!se(Ee,s,r)&&!le(Ee,s,r)){var l="";if(s&&s["DataPoint"]&&s["DataPoint"]["AnnotationPath"]&&s["DataPoint"]["AnnotationPath"]){l=s["DataPoint"]["AnnotationPath"]&&s["DataPoint"]["AnnotationPath"].substring(1);if(l!=""){var u;u=i[l]&&i[l]["ValueFormat"]&&i[l]["ValueFormat"]["NumberOfFractionalDigits"]&&i[l]["ValueFormat"]["NumberOfFractionalDigits"]["Int"];a=u>a?u:a}}}else{a=a<"0"?"0":a}}})}}if(n&&n[0]&&n[0].label&&n[0].label.formatString){var s=n[0].label.formatString}kt="";if(mt){if(s==="CURR"){kt="CURR/"+a.toString()+"/"}else{kt="axisFormatter/"+a.toString()+"/"}}else{kt="axisFormatter/"+a.toString()+"/"}if(n&&n[0]){n[0].label.formatString=kt}}});if(d==="vertical_bullet"){M["valueAxis"]={title:{visible:Le?false:true},label:{formatString:kt}}}var zt="";var Ht="";if(mt){zt=vt.toString();Ht="CURR/"+vt.toString()+"/"}else{zt=ct.toString();Ht="axisFormatter/"+ct.toString()+"/"}if(d==="donut"||A){M.plotArea.dataLabel.formatString=Ht;if(M.plotArea.dataLabel.type==="percentage"){M.plotArea.dataLabel.formatString="0.0%/"+zt+"/"}}X(L,y,"dimension");X(U,y,"measure");if(k){var Gt=C[0].Dimension.$PropertyPath;var jt=e.getModel().getMetaModel().getObject("/"+de+"/"+Gt+"@");if(jt["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){M.timeAxis.levels=["year","month"]}else if(jt["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){M.timeAxis.levels=["year","quarter"]}else if(jt["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){M.timeAxis.levels=["year","week"]}else if(jt["@com.sap.vocabularies.Common.v1.IsCalendarYear"]){M.timeAxis.levels=["year"]}}M.title={text:Ce?Ce:Bt,alignment:"left",layout:{respectPlotPosition:false},style:{fontFamily:"72, 72full, Arial, Helvetica, sans-serif !important",fontSize:".875rem",fontWeight:"normal"}};e.setVizProperties(M);if(r&&r.getProperty("/bInsightEnabled")){var Wt=e&&e.getId();var Xt=m({},M);if(Ze!==undefined){Xt.plotArea.dataPointStyle=Ze}P.setVizPropertyMap(Wt,Xt)}}function fe(e,t,a){var r="";if(e&&e[a]){if(e[a].annotations&&e[a].annotations["@"+_.LABEL_KEY_V4]){r=pe(e[a].annotations["@"+_.LABEL_KEY_V4],t,e)}else if(e[a][_.LABEL_KEY]){r=e[a][_.LABEL_KEY]}else if(a){r=a}}return r}function ce(e,t,a){var r="";var i=e&&e["@"+t]&&e["@"+t].Title;if(i){r=i;var n=a.getModel("@i18n")?a.getModel("@i18n"):a.getModel("i18n");if(r.match(/{[@]?i18n>.+}/gi)||r.match(/{[@]?i18n&gt;.+}/gi)){var o=n.getResourceBundle();var s=r.indexOf(">")>-1?r.indexOf(">"):r.indexOf("&gt;")+3;var l=r.substring(s+1,r.length-1);r=o.getText(l)}}return r}function ve(e,t,a){if(e&&(e.getVizType()==="bubble"||e.getVizType()==="scatter")){return}var r,i,n,o;var s;var l=_.UNIT_KEY;var u="@"+_.UNIT_KEY_V4_ISOCurrency;var f="@"+_.UNIT_KEY_V4_Unit;var c;var p=[];if(!(r=e.getModel("ovpCardProperties"))){b.error(T.CARD_ERROR+"in "+T.CARD_CONFIG+T.NO_CARD_MODEL);return}var m=e.getModel();var A=r.getProperty("/entitySet");if(!m||!A){return}i=a[r.getProperty("/entityType").$Type];if(!i){b.error(T.CARD_ANNO_ERROR+"in "+T.CARD_ANNO);return}var d=ge(m,A);n=r.getProperty("/chartAnnotationPath");if(!n||!(o=i["@"+n])){b.error(T.CARD_ANNO_ERROR+"in "+T.CARD_ANNO);return}if(!(s=o.MeasureAttributes)||!s.length){b.error(T.CHART_ANNO_ERROR+"in "+T.CHART_ANNO+" "+T.MEASURES_MANDATORY);return}g(s,function(e,t){c=t.Measure.$PropertyPath;if(t.DataPoint&&t.DataPoint.AnnotationPath){var a=i[t.DataPoint.AnnotationPath.substring(1)];if(a.ForecastValue&&(a.ForecastValue.PropertyPath||a.ForecastValue.Path)){p.push(a.ForecastValue.PropertyPath||a.ForecastValue.Path)}}p.push(c)});var h=t?t:null;var P="";var y=true;var E=[];var C=e.getFeeds();g(C,function(e,t){if(t.getType()==="Measure"){E=E.concat(t.getValues())}});if(h){g(p,function(t,a){var r=fe(d,e,a);if((E?Array.prototype.indexOf.call(E,r):-1)!=-1){if(d&&d[a]){var i;if(d[a].annotations[u]){i=d[a].annotations[u].$Path?d[a].annotations[u].$Path:d[a].annotations[u].$String}else if(d[a].annotations[f]){i=d[a].annotations[f].$Path?d[a].annotations[f].$Path:d[a].annotations[f].$String}else if(d[a][l]){i=d[a][l]}if(!i){y=false;return false}if(i&&d[i]){for(var t=0;t<h.length;t++){var n=h[t];if(y){if(P&&n[i]&&n[i]!=""&&P!=""&&P!=n[i]){y=false;break}}P=n[i];if(!P){y=false;break}}}}}})}var I="";if(y){if(P!=""){I=v.getText("IN_NO_SCALE",[P]);I=" "+I}var N=e.data("aria-label");if(N&&I&&N.indexOf(I)===-1){var R=N+I;e.data("aria-label",R,true)}var D=e.getVizProperties().title&&e.getVizProperties().title.text;if(D){var O=D.indexOf("|");if(O!==-1){var S=D.slice(O+2);if(S!==P){D=D.slice(0,O-1)}}var M={title:{visible:true,text:S===P?D:D+I,alignment:"left",layout:{respectPlotPosition:false},style:{fontFamily:"72, 72full, Arial, Helvetica, sans-serif !important",fontSize:".875rem",fontWeight:"normal"}}};e.setVizProperties(M)}}}function pe(e,t,a){var r;var i;var n;if(e&&e.indexOf("{")===0){e=e.slice(1,-1);if(e.indexOf(">")!=-1){n=e.split(">");r=n[0];i=n[1]}else if(e.indexOf("&gt;")!=-1){n=e.split("&gt;");r=n[0];i=n[1]}try{e=t.getModel(r).getProperty(i)}catch(t){e=a[e][_.LABEL_KEY_V4].String;b.error("Unable to read labels from resource file",t)}}return e}function ge(t,a){var r=e.cacheODataMetadata(t);if(!r){return undefined}return r[a]}function me(e,t,a){var r="",i="",n="";if(a){r=a}if(e&&e.length>1){for(var o=0;o<e.length-1;o++){if(i!=""){i+=", "}i+=e[o]}i=v.getText("MEAS_DIM_TITLE",[i,e[o]])}else if(e){i=e[0]}if(t&&t.length>1){for(var o=0;o<t.length-1;o++){if(n!=""){n+=", "}n+=t[o]}n=v.getText("MEAS_DIM_TITLE",[n,t[o]])}else if(t){n=t[0]}if(r===""){a=v.getText("NO_CHART_TITLE",[i,n])}return a}function Ae(e,t){var r=1;var i;if(t){var n=a.getCurrencyInstance({style:"short",currencyCode:false,shortRefNumber:e});i=n.format(Number(r))}else{var o=a.getFloatInstance({style:"short",shortRefNumber:e});i=o.format(Number(r))}var s=i.slice(-1);return s}function de(e,a){e.attachSelectData(function(i){var n=p.bCRTLPressed?p.constants.explace:p.constants.inplace;p.bCRTLPressed=false;var l=e.getModel("ovpCardProperties");var u=e.getModel();var f=l.getProperty("/entitySet");var c=ge(u,f);var v=[],m=[];var A={},d={};var h=e.getDataset().getDimensions();var P;var E=l.getProperty("/entityType");var C=a.getMetaModel().getData()["$Annotations"];for(var T=0;T<h.length;T++){v.push(h[T].getName())}var I=e.getDataset().getBinding("data").getCurrentContexts().map(function(e){return e.getObject()});if(i.getParameter("data")&&i.getParameter("data")[0]&&i.getParameter("data")[0].data){m=Object.keys(i.getParameter("data")[0].data);P=i.getParameter("data")[0].data._context_row_number;var N=e.getDataset().getBinding("data").getContexts()[P];var R=y.getEntityNavigationEntries(N,u,a.getEntityType(),a.getCardPropertiesModel())[0];if(I[P].$isOthers&&I[P].$isOthers===true){var D={},b=[];for(var O=0;O<v.length;O++){for(var S=0;S<m.length;S++){if(v[O]===m[S]){for(var M in c){if(c.hasOwnProperty(M)){var V=c[M][_.LABEL_KEY]||c[M][_.NAME_KEY]||c[M][_.NAME_CAP_KEY];if(V===m[S]){b.push(M)}}}}}}for(var T=0;T<b.length;T++){D[b[T]]=[];for(var O=0;O<I.length-1;O++){if(O!=P){D[b[T]].push(I[O][b[T]])}}}var L={$isOthers:true};var Y={getObject:function(){return L},getOtherNavigationDimensions:function(){return D}};if(s.checkIfAPIIsUsed(a)){if(a.checkAPINavigation()){o.onContentClicked(Y)}}else{if(R){a.doNavigation(Y,R,n)}}}else{for(var O=0;O<v.length;O++){for(var S=0;S<m.length;S++){if(v[O]===m[S]){for(var M in c){if(C[E.$Type+"/"+M]){var V=typeof C[E.$Type+"/"+M]["@"+_.LABEL_KEY_V4]==="string"&&C[E.$Type+"/"+M]["@"+_.LABEL_KEY_V4]||C[E.$Type+"/"+M][_.LABEL_KEY]||C[E.$Type+"/"+M][_.NAME_KEY]||C[E.$Type+"/"+M][_.NAME_CAP_KEY]||M;if(V.match(/{@i18n>.+}/gi)){var x=this.getModel("@i18n").getResourceBundle();V=x.getText(V.substring(V.indexOf(">")+1,V.length-1))}if(V===m[S]){A[M]=I[P][M]}}}}for(var M in I[P]){if(c.hasOwnProperty(M)){d[M]=I[P][M]}}}}if(A){g(Object.keys(A),function(e,t){var a=c[t]&&c[t]["annotations"];if(c[t]["$Type"]==="Edm.String"){if(c[t]["sap:semantics"]==="yearmonth"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){A[t]=A[t].constructor===Date?r.getDateTimeInstance({pattern:"YYYYMM"}).format(A[t]):A[t]}else if(c[t]["sap:semantics"]==="yearquarter"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){A[t]=A[t].constructor===Date?r.getDateTimeInstance({pattern:"YYYYQ"}).format(A[t]):A[t]}else if(c[t]["sap:semantics"]==="yearweek"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){A[t]=A[t].constructor===Date?r.getDateTimeInstance({pattern:"YYYYww"}).format(A[t]):A[t]}else if(c[t]["@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){var i=A[t];if(i.includes(".")){A[t]=i.split(".").reverse().join("")}else if(i.includes("/")){A[t]=i.split("/").reverse().join("")}}}})}if(d){g(Object.keys(d),function(e,t){var a=c[t]&&c[t]["annotations"];if(c[t]["$Type"]==="Edm.String"){if(c[t]["sap:semantics"]==="yearmonth"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){d[t]=d[t].constructor===Date?r.getDateTimeInstance({pattern:"YYYYMM"}).format(d[t]):d[t]}else if(c[t]["sap:semantics"]==="yearquarter"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){d[t]=d[t].constructor===Date?r.getDateTimeInstance({pattern:"YYYYQ"}).format(d[t]):d[t]}else if(c[t]["sap:semantics"]==="yearweek"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){d[t]=d[t].constructor===Date?r.getDateTimeInstance({pattern:"YYYYww"}).format(d[t]):d[t]}else if(c[t]["@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){var i=d[t];if(i.includes(".")){d[t]=i.split(".").reverse().join("")}else if(i.includes("/")){d[t]=i.split("/").reverse().join("")}}}})}var F=E[l.getProperty("/presentationAnnotationPath")];if(E){var $=t.getRequestFields(F);if($&&$.length>0){g($,function(e,t){if(!A.hasOwnProperty(t)){A[t]=I[P][t]}})}}var Y={getObject:function(){return A},getAllData:function(){return d}};if(s.checkIfAPIIsUsed(a)){if(a.checkAPINavigation()){o.onContentClicked(Y)}}else{if(R){a.doNavigation(Y,R,n)}}}}})}function he(e){if(e.$EnumMember.endsWith("Bubble")){return true}else{return false}}function Pe(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Dimension||!e[0].Dimension.$PropertyPath){b.error(T.CHART_ANNO_ERROR+"in "+T.CHART_ANNO+" "+T.DIMENSIONS_MANDATORY);return t}t=true;return t}function ye(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Measure||!e[0].Measure.$PropertyPath){b.error(T.CHART_ANNO_ERROR+"in "+T.CHART_ANNO+" "+T.MEASURES_MANDATORY);return t}t=true;return t}function Ee(e){e=e["$Type"];return e}function Ce(e){if(e&&e.indexOf("#")!=-1){var t=e.split("#");if(t.length>1){return t[1]}}return""}function _e(e,t){var a=t.getModel("ovpCardProperties");var r=Te(t);var i=+r.itemsLength;var n=+a.getProperty("/dataStep");if(i&&n){var o=e.colSpan-1;if(o>=0){i+=n*o;Ie(t,i)}}}function Te(e){var t=e.getModel("ovpCardProperties");var a=t.getProperty("/entityType");var r=t.getProperty("/presentationAnnotationPath");var i=a.hasOwnProperty(r)&&a[r];var n=i&&i.MaxItems;if(typeof n==="number"||typeof n==="string"&&!isNaN(n)){var o=parseInt(n,10);return{itemsLength:+o,dataStep:+t.getProperty("/dataStep")}}}function Ie(e,t){var a,r={},i=[];var n=e.getVizType();var o=e.getModel("ovpCardProperties");var s=o.getProperty("/entityType");var l=o.getProperty("/chartAnnotationPath");var u=s[l];var f=e.getParent();var v=f.getBinding("data");r.path=v.getPath();r.parameters={};if(v.mParameters&&v.mParameters.select){r.parameters.select=v.mParameters.select}r.parameters.custom=r.parameters.custom||{};r.parameters.custom._requestFrom="ovp_internal";r.filters=v.aApplicationFilters;r.sorter=v.aSorters;r.length=n==="donut"?t+1:t;r.template=new c;f.bindAggregation("data",r);if(n==="donut"){g(u.MeasureAttributes,function(e,t){i.push(t.Measure.PropertyPath)});a={};a.path=v.getPath();a.parameters={};a.parameters.select=i.join(",");a.filters=v.aApplicationFilters;a.sorter=v.aSorters;a.length=1;a.template=new c;f.bindAggregation("aggregateData",a)}f.updateBindingContext()}function Ne(e,t,a){var r=e.getMetaModel().getData().$Annotations;for(var i in t){if(r[a+"/"+i]&&!t[i]["annotations"]){t[i]["annotations"]=r[a+"/"+i]}}}function Re(e){e.sort(function(e,t){if(e.index<t.index){return-1}if(e.index>t.index){return 1}return 0})}function De(e){return e.color!==undefined}function be(e){return e.dimensionValue}return{constants:_,errorMessages:T,formatItems:S,formatByType:U,returnDateFormat:K,formatChartAxes:w,hideDateTimeAxis:B,checkExists:k,validateCardConfiguration:z,checkNoData:H,getConfig:G,hasTimeSemantics:j,getChartType:W,getPrimitiveValue:q,formThePathForCriticalityStateCalculation:J,checkFlag:ae,buildVizAttributes:ue,setChartUoMTitle:ve,getMetadata:ge,getSelectedDataPoint:de,checkBubbleChart:he,dimensionAttrCheck:Pe,measureAttrCheck:ye,getEntitySet:Ee,getAnnotationQualifier:Ce,reprioritizeContent:_e,getMaxItems:Te,getLabelFromAnnotationPath:pe,formGroupByList:V,getChartTitle:ce}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/analytical/Component", ["sap/ovp/cards/v4/generic/Component","sap/ovp/cards/v4/charts/VizAnnotationManager","sap/ovp/cards/jUtils"],function(e,a,t){"use strict";return e.extend("sap.ovp.cards.v4.charts.analytical.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.KPIHeader"},contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.charts.analytical.analyticalChart"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.charts.analytical.analyticalChart"},enableAddToInsights:{type:"boolean",defaultValue:false}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.viz"],components:[]},config:{}},onAfterRendering:function(){t.setAttributeToMultipleElements(".tabindex0","tabindex",0);t.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/analytical/analyticalChart.controller", ["sap/ovp/cards/generic/Card.controller","sap/ovp/cards/v4/charts/VizAnnotationManager","sap/viz/ui5/data/FlattenedDataset","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/app/resources","sap/base/util/each","sap/ovp/app/OVPLogger","sap/ovp/cards/Filterhelper","sap/ovp/cards/v4/charts/Utils","sap/ovp/cards/Integration/IntegrationCard","sap/ovp/filter/FilterUtils","sap/ui/core/Fragment","sap/ui/core/Core","sap/ui/Device","sap/ui/dom/units/Rem","sap/ui/model/json/JSONModel","sap/m/MessageBox"],function(t,e,a,i,r,s,o,n,d,l,h,g,p,u,v,c,y){"use strict";var b=new o("OVP.v4.analytical.analyticalChart");return t.extend("sap.ovp.cards.charts.v4.analytical.analyticalChart",{onInit:function(){t.prototype.onInit.apply(this,arguments);var a=this;this.eventhandler=function(t,e,i){h.applyFiltersToV4AnalyticalCard(i,a)};this.GloabalEventBus=p.getEventBus();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",a.eventhandler)}e.formatChartAxes();this.iPreviousRowSpan=0;var i=new c({error:false});this.getView().setModel(i,"oAnalyticalCardErrorModel");this.bdataLoadedToEnableAddToInsight=false},onBeforeRendering:function(){if(this.bCardProcessed){return}e.validateCardConfiguration(this);var t=this.getView().byId("analyticalChart");var i=this.getOwnerComponent().getComponentData();if(t){t.setHeight("21rem")}if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"&&i&&i.appComponent){var r=i.appComponent.getDashboardLayoutUtil();var s=r.dashboardLayoutModel.getCardById(i.cardId);if(s.dashboardLayout.autoSpan&&t){t.setHeight("21rem")}}var o=this.getView().byId("vbLayout");var n;var d=false;var l=new a({data:{path:"/"}});this.isVizPropSet=d;this.oDataSet=l;this.vizFrame=t;this.vbLayout=o;if(!t){b.error(e.constants.ERROR_NO_CHART+": ("+this.getView().getId()+")")}else{this.vbLayout.setBusy(true);n=t.getModel("ovpCardProperties").getProperty("/navigation");if(n===undefined||n=="datapointNav"||n!="headerNav"){e.getSelectedDataPoint(t,this)}t.destroyDataset();var h=t.getParent().getBinding("data");this._handleKPIHeader();if(h&&h.getPath()){h.attachDataReceived(this.onDataReceived.bind(this));h.attachDataRequested(this.onDataRequested.bind(this))}else{g.load("sap.ovp.cards.charts.generic.noData").then(function(t){var e=this.getCardContentContainer();e.removeAllItems();e.addItem(t)}.bind(this))}t.addEventDelegate({onmouseover:function(){var e=t._oOvpVizFrameTooltip;if(e){e._oPopup.close()}}})}this.bCardProcessed=true},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!i.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var a=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var r=document.getElementById(a);var s=this.getHeaderHeight();if(!e.dashboardLayout.autoSpan){if(r){var o=r.getElementsByClassName("sapOvpWrapper")[0];if(o){o.style.height=e.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}}}if(e.dashboardLayout.showOnlyHeader){r.classList.add("sapOvpMinHeightContainer")}var d=this.getView().byId("analyticalChart");if(d){d.setHeight(this._calculateVizFrameHeight()+"px");this._calculateWidth()}}if(!i.checkIfAPIIsUsed(this)){var l=this.getCardPropertiesModel();var g=this.getOwnerComponent().getModel("ui").getData().cards;var p=this.getEntitySet()&&this.getEntitySet()["$Type"];var u=p&&this.getMetaModel().getContext("/"+p);if(u){this.selectionVaraintFilter=n.getSelectionVariantFilters(g,l,this.getEntityType())}var v=this.oCardComponentData.mainComponent;var c=[];if(v.getGlobalFilter()){c=v.oGlobalFilter.getFilters()}if(v.getMacroFilterBar()){c=v.aFilters}h.applyFiltersToV4AnalyticalCard(c,this)}},onDataReceived:function(t){if(d.checkIfDataExistInEvent(t)){var a=this;var i=this.getView().byId("analyticalChart");var o=this.getView().byId("bubbleText");var n=r.getText("BUBBLESIZE");var l=a.getMetaModel().getData()["$Annotations"];this.oDataSet.bindData("analyticalmodel>/","");i.setDataset(this.oDataSet);var h=i.getParent();if(!this.isVizPropSet){e.buildVizAttributes(i,h,this);this.isVizPropSet=true;if(o!=undefined){var g=i.getFeeds();s(g,function(t,e){if(g[t].getUid()=="bubbleWidth"){o.setText(n+" "+g[t].getValues())}})}e.hideDateTimeAxis(i)}if(this.getCardPropertiesModel()&&this.getCardPropertiesModel().getData()&&this.getCardPropertiesModel().getData().colorPalette&&i.getVizType()==="stacked_column"){var p=i.getDataset().getDimensions(),v=i.getFeeds(),y,b;for(var f=0;f<v.length;f++){if(v[f].getUid()==="color"){y=v[f].getValues()[0];break}}for(var C=0;C<p.length;C++){if(p[C].getName()===y){b=p[C];break}}if(y&&b){var m={};m["bDescending"]=true;b.setSorter(m)}}var I=t?t.getSource().getCurrentContexts().map(function(t){return t&&t.getObject()}):null;e.setChartUoMTitle(i,I,l);if(this.bFlag==true){this.bFlag=false;this.vbLayout.setBusy(false)}else{setTimeout(function(){a.vbLayout.setBusy(false);a.bdataLoadedToEnableAddToInsight=true},0)}e.checkNoData(t,this.getCardContentContainer(),i);if(u.system.phone){if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var P=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var V=Math.max(P.dashboardLayout.rowSpan,this.iPreviousRowSpan);this.iPreviousRowSpan=V}if(d.isDataSetEmpty(t)){i.setHeight(50+"px")}else{var D=this._calculateVizFrameHeight();if(D!==undefined&&typeof D==="number"){i.setHeight(D+"px")}}}}else if(t&&t.getParameters().error){this.vbLayout.setBusy(false);var w=new c({error:true});this.getView().setModel(w,"oAnalyticalCardErrorModel")}},onDataRequested:function(){this.vbLayout.setBusy(true)},getCardItemsBinding:function(){var t=this.getView().byId("analyticalChart");if(t&&t.getParent()){return t.getParent().getBinding("data")}return null},resizeCard:function(t){var a=this.getCardPropertiesModel();this.newCardLayout=t;a.setProperty("/cardLayout/rowSpan",t.rowSpan);a.setProperty("/cardLayout/colSpan",t.colSpan);var i=this.getCardPropertiesModel().getProperty("/cardLayout");var o=this.getHeaderHeight();var n=this.getView().getDomRef().querySelectorAll(".sapOvpWrapper");for(var d=0;d<n.length;d++){n[d].style.height=t.rowSpan*i.iRowHeightPx+2-(o+2*i.iCardBorderPx)+"px"}var l=this.getView().byId("analyticalChart");var h=this.getView().byId("bubbleText");if(l){if(l.getVizType()==="timeseries_bubble"||l.getVizType()==="bubble"){if(i.colSpan>1){h.setVisible(false)}else{h.setVisible(true)}}l.setHeight(this._calculateVizFrameHeight()+"px");this._calculateWidth()}var g=this.getView().byId("ovpCardContentContainer").getDomRef();if(g){if(!t.showOnlyHeader){g.classList.remove("sapOvpContentHidden")}else{g.classList.add("sapOvpContentHidden")}}var p=r.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");this.vizFrame.setDataset(this.oDataSet);var u=l.getParent();if(!this.isVizPropSet){e.buildVizAttributes(l,u,this);this.isVizPropSet=true;if(h!=undefined){var v=l.getFeeds();s(v,function(t,e){if(v[t].getUid()=="bubbleWidth"){h.setText(p+" "+v[t].getValues())}})}e.hideDateTimeAxis(l)}e.reprioritizeContent(this.newCardLayout,l)},_calculateVizFrameHeight:function(){var t;if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.getView().byId("analyticalChart");var a=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var i=this.getView().getController();var r=this.getItemHeight(i,"toolbar");var s=this.getHeaderHeight();var o=(e.getVizType()==="timeseries_bubble"||e.getVizType()==="bubble")&&a.dashboardLayout.colSpan===1?43:0;var n=u.system.phone&&this.iPreviousRowSpan>0?this.iPreviousRowSpan:a.dashboardLayout.rowSpan;t=n*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX+r+o+30);var d=e.sId;var l=this._calculateVizLegendGroupHeight(t);var h=this.getView().byId(d);if(h){h.setVizProperties(l)}}else{t=v.toPx(21)}return t},_calculateVizLegendGroupHeight:function(t){var e;if(t<=270){e=.1}else{var a=240;e=(t-a)/t}var i={legendGroup:{layout:{height:e}}};return i},_calculateWidth:function(){var t=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var e=this.getView().byId("analyticalChart");if(t){var a=parseInt(t.dashboardLayout.width,10);var i=e.getVizType();var r=e.sId;if(i==="donut"){var s=this._calculateVizLegendGroupWidth(a);var o=this.getView().byId(r);if(o){o.setVizProperties(s)}}}},_calculateVizLegendGroupWidth:function(t){var e;if(t<=600){e=.25}else if(t<=900){e=.55}else if(t>=1200){e=.7}else{e=.65}var a={legendGroup:{layout:{maxWidth:e}}};return a},refreshCard:function(){this.getView().rerender()},onShowInsightCardPreview:function(t){var e=this.getView();var a=e.getController();var i=a.oCardComponentData;var s=this;if(this.checkIBNNavigationExistsForCard()){l.showCard({vizFrame:a.vizFrame,entitySet:a.entitySet,entityType:a.entityType,cardComponentName:"Analytical",cardComponentData:i,cardComponent:a.oCardComponent,view:e}).then(function(t){s.saveGeneratedCardManifest(t)})}else{y.error(r.getText("INT_IBN_NAVIGATION_NOT_FOUND_ERROR_MESSAGE_TEXT"))}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/config", [],function(){"use strict";var e={getChartsConfiguration:function(){return{Line:{default:{type:"line",vizProperties:[{path:"plotArea.isSmoothed",value:false}],properties:{semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"valueAxis.label.allowDecimals",value:true}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",type:"dimension",role:"Series"}]},time:{type:"timeseries_line",vizProperties:[{path:"plotArea.isSmoothed",value:false},{path:"timeAxis.levels",value:[]}],dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension"},{uid:"color",type:"dimension",role:"Series"}]}},Bubble:{default:{type:"bubble",properties:{hideLabel:false},vizProperties:[{path:"plotArea.adjustScale",value:true}],dimensions:{max:4},measures:{min:3,max:3,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",role:"Axis1|Axis2|Axis3",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"valueAxis2",min:1,max:1,type:"measure",role:"Axis2|Axis1|Axis3",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.4}]},{uid:"bubbleWidth",min:1,max:1,type:"measure",role:"Axis3|Axis1|Axis2"},{uid:"shape",max:2,type:"dimension",role:"Category"},{uid:"color",max:2,type:"dimension",role:"Series",vizProperties:[{path:"plotArea.colorDepth",method:"count",min:1,max:2}]}]},time:{type:"timeseries_bubble",properties:{hideLabel:false},dimensions:{min:1,max:1,defaultRole:"Series"},measures:{min:2,max:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"},{uid:"bubbleWidth",min:1,max:1,type:"measure",role:"Axis3|Axis1|Axis2"}]}},Donut:{default:{type:"donut",vizProperties:[{path:"plotArea.dataLabel.type",value:"value"}],dimensions:{min:1},measures:{min:1,max:1},resize:{dataStep:10},feeds:[{uid:"size",min:1,max:1,type:"measure"},{uid:"color",min:1,type:"dimension"}]}},Column:{default:{type:"column",properties:{semanticColor:true,semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",min:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_column",properties:{semanticColor:true},dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},Bar:{default:{type:"bar",properties:{semanticColor:true,semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category",vizProperties:[{path:"categoryAxis.layout.width",value:.33}]},{uid:"color",min:1,type:"dimension",role:"Series"}]}},ColumnStacked:{default:{type:"stacked_column",dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",type:"dimension",role:"Series"}]},time:{type:"timeseries_stacked_column",properties:{semanticColor:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"color",min:0,type:"dimension",role:"Series"}]}},VerticalBullet:{default:{type:"vertical_bullet",properties:{semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"actualValues",min:1,type:"measure",role:"Axis1"},{uid:"targetValues",type:"measure",role:"Axis2"},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",min:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_bullet",dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"actualValues",min:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"targetValues",type:"measure",role:"Axis2"},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"color",min:0,type:"dimension",role:"Series"}]}},Combination:{default:{type:"combination",dimensions:{min:1,defaultRole:"Category"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",min:2,vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"color",type:"dimension",role:"Series"},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"}]},time:{type:"timeseries_combination",dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:2,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},Scatter:{default:{type:"scatter",vizProperties:[{path:"plotArea.markerSize",value:""}],properties:{hideLabel:false},dimensions:{min:1,max:2},measures:{min:2,max:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",min:1,max:1,role:"Axis1|Axis2|Axis3",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"valueAxis2",type:"measure",min:1,max:1,vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.4}]},{uid:"color",type:"dimension",max:1,role:"Series"},{uid:"shape",type:"dimension",max:1,role:"Category"}]},time:{type:"timeseries_scatter",dimensions:{min:1,max:3,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"shape",type:"dimension",min:0,role:"Category2"},{uid:"color",type:"dimension",min:0,role:"Series"}]}},Waterfall:{default:{type:"waterfall",properties:{semanticColor:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"waterfallType",max:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_waterfall",properties:{semanticColor:true},dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},CombinationDual:{default:{type:"dual_combination",properties:{hideLabel:false},dimensions:{min:1},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.5}]},{uid:"valueAxis2",min:1,type:"measure",role:"Axis2",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.5}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"}]},time:{type:"dual_timeseries_combination",properties:{hideLabel:false},dimensions:{min:1,max:1,defaultRole:"Series"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.5}]},{uid:"valueAxis2",min:1,type:"measure",role:"Axis2",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.5}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},vertical_bullet:{reference:"VerticalBullet"},StackedColumn:{reference:"ColumnStacked"}}}};return{getChartsConfiguration:e.getChartsConfiguration}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/generic/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/jUtils"],function(t,e){"use strict";return t.extend("sap.ovp.cards.charts.generic.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},selectionAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.SelectionVariant"},chartAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Chart"},presentationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.PresentationVariant"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},dataPointAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.DataPoint"}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},addTabindex:function(){e.setAttributeToMultipleElements(".tabindex0","tabindex",0);e.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)},onAfterRendering:function(){this.addTabindex()}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/custom/Component", ["sap/ovp/cards/v4/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.v4.custom.Component",{metadata:{properties:{contentFragment:{type:"string"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/generic/Component", ["sap/ovp/cards/generic/base/Component","sap/ovp/cards/v4/V4AnnotationHelper"],function(e,t){"use strict";return e.extend("sap.ovp.cards.v4.generic.Component",{metadata:{properties:{contentFragment:{type:"string"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.Card"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.Header"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false},enableAddToInsights:{type:"boolean",defaultValue:false}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/linklist/Component", ["sap/ovp/cards/generic/base/linklist/Component"],function(t){"use strict";return t.extend("sap.ovp.cards.v4.linklist.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.linklist.LinkList"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.linklist.LinkList"},communicationPath:{type:"string",defaultValue:"com.sap.vocabularies.Communication.v1.Contact"},headerAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.HeaderInfo"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/linklist/LinkList.controller", ["sap/ovp/cards/generic/base/linklist/BaseLinklist.controller","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/Filterhelper","sap/ovp/filter/FilterUtils","sap/ui/core/Core"],function(t,e,i,n,r){"use strict";return t.extend("sap.ovp.cards.v4.linklist.LinkList",{onInit:function(){t.prototype.onInit.apply(this,arguments);var e=this;this.eventhandler=function(t,i,r){n.applyFiltersToV4Card(r,e)};this.GloabalEventBus=r.getEventBus();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",e.eventhandler)}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!e.checkIfAPIIsUsed(this)){var n=this.getCardPropertiesModel();var r=this.getOwnerComponent().getModel("ui").getData().cards;var a=[];var s=this.getEntitySet()&&this.getEntitySet()["$Type"];var l=s&&this.getMetaModel().getContext("/"+s);if(l){var o=l.getObject();this.selectionVaraintFilter=i.getSelectionVariantFilters(r,n,this.getEntityType())}var p=this.oCardComponentData.mainComponent;if(p.getGlobalFilter()){a=i._getEntityRelevantFilters(o,p.oGlobalFilter.getFilters())}if(p.getMacroFilterBar()){var g=p.aFilters;a=i._getEntityRelevantFilters(o,g)}a=i.mergeFilters(a,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(a)}if(this.getKPIBinding()){this.getKPIBinding().filter(a)}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/list/Component", ["sap/ovp/cards/v4/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.v4.list.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.list.List"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.list.List"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:false}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.suite.ui.microchart"],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/list/List.controller", ["sap/ovp/cards/generic/base/list/BaseList.controller","sap/ovp/filter/FilterUtils","sap/ui/core/Core","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/Filterhelper"],function(t,e,i,n,r){"use strict";return t.extend("sap.ovp.cards.v4.list.List",{onInit:function(){t.prototype.onInit.apply(this,arguments);var n=this;this.eventhandler=function(t,i,r){e.applyFiltersToV4Card(r,n)};this.GloabalEventBus=i.getEventBus();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",n.eventhandler)}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!n.checkIfAPIIsUsed(this)){var e=this.getCardPropertiesModel();var i=this.getOwnerComponent().getModel("ui").getData().cards;var a=[];var s=this.getEntitySet()&&this.getEntitySet()["$Type"];var o=s&&this.getMetaModel().getContext("/"+s);if(o){var l=o.getObject();this.selectionVaraintFilter=r.getSelectionVariantFilters(i,e,this.getEntityType())}var p=this.oCardComponentData.mainComponent;if(p.getGlobalFilter()){a=r._getEntityRelevantFilters(l,p.oGlobalFilter.getFilters())}if(p.getMacroFilterBar()){var g=p.aFilters;a=r._getEntityRelevantFilters(l,g)}a=r.mergeFilters(a,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(a)}if(this.getKPIBinding()){this.getKPIBinding().filter(a)}}},onExit:function(){t.prototype.onExit.apply(this,arguments)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/table/Component", ["sap/ovp/cards/generic/base/table/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.v4.table.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.table.Table"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.table.Table"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:false}},version:"1.115.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/table/Table.controller", ["sap/ovp/cards/generic/base/table/BaseTable.controller","sap/ovp/filter/FilterUtils","sap/ui/core/Core","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/Filterhelper"],function(t,e,i,r,a){"use strict";return t.extend("sap.ovp.cards.v4.table.Table",{onInit:function(){t.prototype.onInit.apply(this,arguments);var r=this;this.eventhandler=function(t,i,a){e.applyFiltersToV4Card(a,r)};this.GloabalEventBus=i.getEventBus();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",r.eventhandler)}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!r.checkIfAPIIsUsed(this)){var e=this.getCardPropertiesModel();var i=this.getOwnerComponent().getModel("ui").getData().cards;var n=[];var s=this.getEntitySet()&&this.getEntitySet()["$Type"];var l=s&&this.getMetaModel().getContext("/"+s);if(l){var o=l.getObject();this.selectionVaraintFilter=a.getSelectionVariantFilters(i,e,this.getEntityType())}var p=this.oCardComponentData.mainComponent;if(p.getGlobalFilter()){n=a._getEntityRelevantFilters(o,p.oGlobalFilter.getFilters())}if(p.getMacroFilterBar()){var g=p.aFilters;n=a._getEntityRelevantFilters(o,g)}n=a.mergeFilters(n,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(n)}if(this.getKPIBinding()){this.getKPIBinding().filter(n)}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/filter/FilterUtils", ["sap/ovp/cards/Filterhelper","sap/ovp/app/FilterHelper","sap/ovp/app/OVPLogger","sap/ui/base/SyncPromise","sap/ui/model/FilterOperator"],function(e,t,r,a,i){"use strict";var n=new r("sap.ovp.filter.filterUtils");var l={applyFiltersToV2Card:function(e,r){var a=r.getEntityType(),i=r.oMainComponent.getMacroFilterBar()||r.oMainComponent.getGlobalFilter(),l=i&&i.getModel(),o=r.getView().getModel("ovpCardProperties"),s=o&&o.getProperty("/entityType"),p=s&&s.name;if(a&&l&&p){var g=t.getEntityRelevantFilters(a,e,p,l);var d=t.mergeFilters(g,r.selectionVaraintFilter);try{var c=r.getCardItemsBinding();if(c){c.filter(d)}if(r.getKPIBinding()){r.getKPIBinding().filter(d)}}catch(e){n.error(e)}}},applyFiltersToV4Card:function(t,r){if(r.getView().getModel().getMetaModel().getData){var a=r.getView().getModel().getMetaModel().getData();var i=r.getView().getModel("ovpCardProperties").getProperty("/entityType");var l=i&&i["$Type"];if(l){var o=e._getEntityRelevantFilters(a[l],t);o=e.mergeFilters(o,r.selectionVaraintFilter);try{r.getCardItemsBinding().filter(o);if(r.getKPIBinding()){r.getKPIBinding().filter(o)}}catch(e){n.error(e)}}}},applyFiltersToV4AnalyticalCard:function(t,r){if(r.getView().getModel().getMetaModel().getData){var a=r.getView().getModel().getMetaModel().getData();var i=r.getView().getModel("ovpCardProperties").getData().entityType.$Type;var l=e._getEntityRelevantFilters(a[i],t);l=e.mergeFilters(l,r.selectionVaraintFilter);var o=r.getCardItemsBinding();try{if(l&&l.aFilters){this.fetchFilter(l,o,{}).then(function(e){var t=o.mParameters.$apply.split("/").length>1?r.getCardItemsBinding().mParameters.$apply.split("/")[1]:r.getCardItemsBinding().mParameters.$apply.split("/")[0];o.mParameters.$apply="filter("+e+")/"+t;o.setAggregation()}).catch(function(e){n.error(e)})}else{if(o.mParameters.$apply.split("/").length>1){o.mParameters.$apply=o.mParameters.$apply.split("/")[1];o.setAggregation()}}if(r.getKPIBinding()){r.getKPIBinding().filter(l)}}catch(e){n.error(e)}}},fetchFilter:function(e,t,r,n){var l;var o=t.oModel.getMetaModel();var s=o.getMetaContext(t.oModel.resolve(t.sPath,t.oContext));if(!e){return a.resolve()}if(e.aFilters){return a.all(e.aFilters.map(function(a){return this.fetchFilter(a,t,r,e.bAnd)},this)).then(function(t){return this.wrap(t.join(e.bAnd?" and ":" or "),n&&!e.bAnd)}.bind(this))}l=o.resolve(this.replaceLambdaVariables(e.sPath,r),s);return o.fetchObject(l).then(function(t){var a,o,s;if(!t){throw new Error("Type cannot be determined, no metadata for path: "+l)}s=e.sOperator;if(s===i.All||s===i.Any){a=e.oCondition;o=e.sVariable;if(s===i.Any&&!a){return e.sPath+"/any()"}r=Object.create(r);r[o]=this.replaceLambdaVariables(e.sPath,r);return this.fetchFilter(a,r).then(function(t){return e.sPath+"/"+e.sOperator.toLowerCase()+"("+o+":"+t+")"})}return this.getSingleFilterValue(e,t.$Type,n)}.bind(this))},wrap:function(e,t){return t?"("+e+")":e},replaceLambdaVariables:function(e,t){var r=e.split("/");r[0]=t[r[0]];return r[0]?r.join("/"):e},getSingleFilterValue:function(t,r,a){var n,l,o,s;function p(e){return o?"tolower("+e+")":e}o=r==="Edm.String"&&t.bCaseSensitive===false;l=p(decodeURIComponent(t.sPath));s=p(e.formatLiteral(t.oValue1,r));switch(t.sOperator){case i.BT:n=l+" ge "+s+" and "+l+" le "+p(e.formatLiteral(t.oValue2,r));break;case i.NB:n=this.wrap(l+" lt "+s+" or "+l+" gt "+p(e.formatLiteral(t.oValue2,r)),a);break;case i.EQ:case i.GE:case i.GT:case i.LE:case i.LT:case i.NE:n=l+" "+t.sOperator.toLowerCase()+" "+s;break;case i.Contains:case i.EndsWith:case i.NotContains:case i.NotEndsWith:case i.NotStartsWith:case i.StartsWith:n=t.sOperator.toLowerCase().replace("not","not ")+"("+l+","+s+")";break;default:throw new Error("Unsupported operator: "+t.sOperator)}return n}};return{applyFiltersToV2Card:l.applyFiltersToV2Card,applyFiltersToV4Card:l.applyFiltersToV4Card,applyFiltersToV4AnalyticalCard:l.applyFiltersToV4AnalyticalCard,fetchFilter:l.fetchFilter,wrap:l.wrap,replaceLambdaVariables:l.replaceLambdaVariables,getSingleFilterValue:l.getSingleFilterValue}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/DashboardLayout.flexibility", ["sap/ovp/flexibility/changeHandler/CardChangeHandler","sap/ovp/flexibility/changeHandler/RemoveCardContainer","sap/ui/dt/OverlayRegistry","sap/ui/core/ComponentContainer","sap/m/MessageToast","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/SettingsUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/resources","sap/base/util/merge","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode"],function(e,t,a,o,r,n,d,s,i,l,u,g){"use strict";return{moveControls:{changeHandler:"default",layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},unhideControl:e.UnhideControlConfig,unhideCardContainer:e.UnhideCardContainer,hideCardContainer:e.HideCardContainer,removeCardContainer:t,editCardSettings:{changeHandler:{applyChange:function(e,t,a){var o=s.getApp(),r=o.getView(),d=e.getContent(),i=d.newAppDescriptor,l=r.byId(i.id),u=o.getLayout(),g=u.getDashboardLayoutModel(),C=u.getDashboardLayoutUtil(),p=g.getCardById(i.id),c=C.calculateCardProperties(i.id),y=i.settings.defaultSpan&&i.settings.defaultSpan.rows,f=i.settings.defaultSpan&&i.settings.defaultSpan.cols,h=g.getColCount()+1,S=[],v=false;e.setRevertData(d.oldAppDescriptor);if(l){if(i.settings.tabs){var b=i.settings.selectedKey;if(!b||b<1){b=1}n.tabFields.forEach(function(e){var t=i.settings.tabs[b-1][e];if(e!=="entitySet"||e==="entitySet"&&t){delete i.settings[e]}if(t){i.settings[e]=t}})}if(typeof y==="number"){if(y===0){p.dashboardLayout.showOnlyHeader=true;y=Math.ceil((c.headerHeight+2*C.CARD_BORDER_PX)/C.getRowHeightPx())}else{p.dashboardLayout.showOnlyHeader=false;if(i.template==="sap.ovp.cards.list"||i.template==="sap.ovp.cards.table"){p.dashboardLayout.noOfItems=y}}}if(f){if(p.dashboardLayout.column+f>h){p.dashboardLayout.maxColSpan=f;f=h-p.dashboardLayout.column}v=true}if(v){g._arrangeCards(p,{row:y,column:f},"resize",S);g._removeSpaceBeforeCard(S);C._positionCards(g.aCards);v=false}var m=l.getComponentInstance();m.destroy()}o.recreateRTAClonedCard(i);return true},revertChange:function(e,t,a){var o=s.getApp(),r=o.getView(),n=e.getRevertData(),d=r.byId(n.id),i=o.getLayout(),l=i.getDashboardLayoutModel(),u=i.getDashboardLayoutUtil(),g=l.getCardById(n.id),C=n.settings.defaultSpan&&n.settings.defaultSpan.rowSpan,p=n.settings.defaultSpan&&n.settings.defaultSpan.colSpan,c=n.settings.defaultSpan&&n.settings.defaultSpan.showOnlyHeader,y=[];if(d){g.dashboardLayout.rowSpan=C;g.dashboardLayout.colSpan=p;g.dashboardLayout.showOnlyHeader=c;l._arrangeCards(g,{row:C,column:p},"resize",y);l._removeSpaceBeforeCard(y);u._positionCards(l.aCards);var f=d.getComponentInstance();f.destroy()}o.recreateRTAClonedCard(n);e.resetRevertData();return true},completeChangeContent:function(e,t,a){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},newCardSettings:{changeHandler:{applyChange:function(e,t,n){var C=s.getApp(),p=C.getView(),c=e.getContent();e.setRevertData(c.id);var y=new o(p.getId()+"--"+c.id),f=n.appComponent,h=C.getUIModel(),S=h.getProperty("/cards"),v=C.getLayout(),b=v.getDashboardLayoutUtil(),m=v.getDashboardLayoutModel(),L=c.id.indexOf("newStaticLinkListCard_N")!==-1&&!d.checkClonedCard(c.id),R=c.id.indexOf("newKPICard_N")!==-1&&!d.checkClonedCard(c.id),D=c.id.indexOf("newCard_N")!==-1&&!d.checkClonedCard(c.id),w=d.newDataSource;if(R){var M=c.settings.selectedKPI,U=new u(M.ODataURI,{annotationURI:M.ModelURI,defaultCountMode:g.None}),_=c.model;if(c.settings["sAnnoKey"]){d.setDataSources(c.settings["sAnnoKey"],M.ModelURI)}p.setModel(U,_);f.setModel(U,_)}if(w&&!f.getModel(c.model)){var I=new u(d.newDataSourceModel.serviceURI,{annotationURI:d.newDataSourceModel.serviceAnnotationURI,defaultCountMode:g.None}),_=c.model;d.setDataSources(d.newDataSourceModel.serviceAnnotation,d.newDataSourceModel.serviceAnnotationURI);p.setModel(I,_);f.setModel(I,_)}c.settings.baseUrl=C._getBaseUrl();if(L||R||D){c.settings.newCard=true;m._setCardSpanFromDefault(c);c.dashboardLayout.row=1;c.dashboardLayout.column=1}else{c.settings.cloneCard=true}var O=-1,A;for(A=0;A<S.length;A++){if(c.id.lastIndexOf(s._getLayerNamespace()+"."+S[A].id,0)===0){O=A;var E=m.getCardById(S[A].id);c.dashboardLayout=l({},E.dashboardLayout);var T=c.dashboardLayout.column+c.dashboardLayout.colSpan;c.dashboardLayout.column=T<m.getColCount()?T:1;break}}S.splice(O+1,0,c);b.getCards().splice(O+1,0,c);h.setProperty("/cards",S);v.insertContent(y,O+1);setTimeout(function(){var e=a.getOverlay(y);e.setSelected(true);e.focus();var t=L||R||D?i.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_NEW"):i.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_CLONE");r.show(t,{duration:1e4})},0);C.recreateRTAClonedCard(c);return true},revertChange:function(e,t,a){var o=a.appComponent,r=s.getApp(),n=r.getView(),i=e.getRevertData(),l=e.getContent();var u=n.byId(i),g=r.getUIModel(),C=g.getProperty("/cards"),p=r.getLayout(),c=p.getDashboardLayoutUtil(),y=p.getDashboardLayoutModel(),f=c.getCards();var h=-1,S,v,b=-1;for(S=0;S<C.length;S++){if(i===C[S].id){h=S;break}}C.splice(h,1);for(v=0;v<f.length;v++){if(i===f[v].id){b=v;break}}f.splice(b,1);y._removeSpaceBeforeCard();g.setProperty("/cards",C);if(u){var m=u.getComponentInstance(),L=m.getComponentData(),R=L.cardId.indexOf("newKPICard_N")!==-1&&!d.checkClonedCard(i);if(R){var D=L.modelName,w=n.getModel(D);w.destroy();if(l.settings["sAnnoKey"]){d.removeDataSources(l.settings["sAnnoKey"])}n.setModel(null,D);o.setModel(null,D)}m.destroy()}p.removeContent(h);u.destroy();e.resetRevertData();return true},completeChangeContent:function(e,t,a){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},dragAndDropUI:{changeHandler:{applyChange:function(e,t,a){var o=s.getApp(),r=e.getContent(),n=o.getLayout(),d=n.getDashboardLayoutUtil(),i=n.getDashboardLayoutModel(),l=i.getCardById(r.cardId),u="C"+i.getColCount(),g=[];e.setRevertData(r);i._arrangeCards(l,{row:r.dashboardLayout[u].row,column:r.dashboardLayout[u].column},"drag",g);i._removeSpaceBeforeCard(g);d._positionCards(i.aCards);return true},revertChange:function(e,t,a){var o=s.getApp(),r=e.getContent(),n=o.getLayout(),d=n.getDashboardLayoutUtil(),i=n.getDashboardLayoutModel(),l=i.getCardById(r.cardId),u="C"+i.getColCount(),g=[];i._arrangeCards(l,{row:r.dashboardLayout[u].oldRow,column:r.dashboardLayout[u].oldColumn},"drag",g);if(r.dashboardLayout[u].oldColSpan){i._arrangeCards(l,{row:r.dashboardLayout[u].rowSpan,column:r.dashboardLayout[u].oldColSpan},"resize",g)}i._removeSpaceBeforeCard(g);d._positionCards(i.aCards);e.resetRevertData();return true},completeChangeContent:function(e,t,a){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},viewSwitch:e.PersonalizationDefaultConfig,visibility:e.PersonalizationDefaultConfig,dragOrResize:e.PersonalizationDefaultConfig}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/EasyScanLayout.flexibility", ["sap/ovp/flexibility/changeHandler/CardChangeHandler","sap/ovp/flexibility/changeHandler/RemoveCardContainer","sap/ui/dt/OverlayRegistry","sap/ui/core/ComponentContainer","sap/m/MessageToast","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/SettingsUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/resources","sap/base/util/merge","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode"],function(e,t,n,o,r,a,i,s,d,l,C,g){"use strict";return{moveControls:{changeHandler:"default",layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},unhideControl:e.UnhideControlConfig,unhideCardContainer:e.UnhideCardContainer,hideCardContainer:e.HideCardContainer,removeCardContainer:t,editCardSettings:{changeHandler:{applyChange:function(e,t,n){var o=s.getApp(),r=o.getView(),i=e.getContent(),d=i.newAppDescriptor,l=r.byId(d.id);e.setRevertData(i.oldAppDescriptor);if(l){if(d.settings.tabs){var C=d.settings.selectedKey;if(!C||C<1){C=1}a.tabFields.forEach(function(e){var t=d.settings.tabs[C-1][e];if(e!=="entitySet"||e==="entitySet"&&t){delete d.settings[e]}if(t){d.settings[e]=t}})}var g=l.getComponentInstance();g.destroy()}o.recreateRTAClonedCard(d);return true},revertChange:function(e,t,n){var o=s.getApp(),r=o.getView(),a=e.getRevertData(),i=r.byId(a.id);if(i){var d=i.getComponentInstance();d.destroy()}o.recreateRTAClonedCard(a);e.resetRevertData();return true},completeChangeContent:function(e,t,n){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},newCardSettings:{changeHandler:{applyChange:function(e,t,a){var l=s.getApp(),u=l.getView(),p=e.getContent();e.setRevertData(p.id);var c=new o(u.getId()+"--"+p.id),v=a.appComponent,f=l.getUIModel(),y=f.getProperty("/cards"),S=l.getLayout(),R=p.id.indexOf("newStaticLinkListCard_N")!==-1&&!i.checkClonedCard(p.id),m=p.id.indexOf("newKPICard_N")!==-1&&!i.checkClonedCard(p.id),M=p.id.indexOf("newCard_N")!==-1&&!i.checkClonedCard(p.id),U=i.newDataSource;if(m){var h=p.settings.selectedKPI,A=new C(h.ODataURI,{annotationURI:h.ModelURI,defaultCountMode:g.None}),D=p.model;if(p.settings["sAnnoKey"]){i.setDataSources(p.settings["sAnnoKey"],h.ModelURI)}u.setModel(A,D);v.setModel(A,D)}if(U&&!v.getModel(p.model)){var E=new C(i.newDataSourceModel.serviceURI,{annotationURI:i.newDataSourceModel.serviceAnnotationURI,defaultCountMode:g.None}),D=p.model;i.setDataSources(i.newDataSourceModel.serviceAnnotation,i.newDataSourceModel.serviceAnnotationURI);u.setModel(E,D);v.setModel(E,D)}p.settings.baseUrl=l._getBaseUrl();if(R||m||M){p.settings.newCard=true}else{p.settings.cloneCard=true}var O=-1,P;for(P=0;P<y.length;P++){if(p.id.lastIndexOf(s._getLayerNamespace()+"."+y[P].id,0)===0){O=P;break}}y.splice(O+1,0,p);f.setProperty("/cards",y);S.insertContent(c,O+1);setTimeout(function(){var e=n.getOverlay(c);e.setSelected(true);e.focus();var t=R||m||M?d.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_NEW"):d.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_CLONE");r.show(t,{duration:1e4})},0);l.recreateRTAClonedCard(p);return true},revertChange:function(e,t,n){var o=n.appComponent,r=s.getApp(),a=r.getView(),d=e.getRevertData(),l=e.getContent();var C=a.byId(d),g=r.getUIModel(),u=g.getProperty("/cards"),p=r.getLayout();var c=-1,v;for(v=0;v<u.length;v++){if(d===u[v].id){c=v;break}}u.splice(c,1);g.setProperty("/cards",u);if(C){var f=C.getComponentInstance(),y=f.getComponentData(),S=y.cardId.indexOf("newKPICard_N")!==-1&&!i.checkClonedCard(d);if(S){var R=y.modelName,m=a.getModel(R);m.destroy();if(l.settings["sAnnoKey"]){i.removeDataSources(l.settings["sAnnoKey"])}a.setModel(null,R);o.setModel(null,R)}f.destroy()}p.removeContent(c);C.destroy();e.resetRevertData();return true},completeChangeContent:function(e,t,n){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},dragAndDropUI:{changeHandler:{applyChange:function(e,t,o){var r=s.getApp(),a=e.getContent(),i=l({},a),d=r.getUIModel(),C=d.getProperty("/cards"),g=r.getLayout(),u;u=i.position;i.position=i.oldPosition;i.oldPosition=u;e.setRevertData(i);u=C[a.position];C[a.position]=C[a.oldPosition];C[a.oldPosition]=u;d.setProperty("/cards",C);var p=g.getContent()[a.position],c=g.getContent()[a.oldPosition];g.removeContent(c);g.insertContent(c,a.position);g.removeContent(p);g.insertContent(p,a.oldPosition);setTimeout(function(){var e=n.getOverlay(c);e.setSelected(true);e.focus()},0);return true},revertChange:function(e,t,o){var r=s.getApp(),a=e.getRevertData(),i=r.getUIModel(),d=i.getProperty("/cards"),l=r.getLayout(),C;C=d[a.position];d[a.position]=d[a.oldPosition];d[a.oldPosition]=C;i.setProperty("/cards",d);var g=l.getContent()[a.position],u=l.getContent()[a.oldPosition];l.removeContent(u);l.insertContent(u,a.position);l.removeContent(g);l.insertContent(g,a.oldPosition);setTimeout(function(){var e=n.getOverlay(u);e.setSelected(true);e.focus()},0);e.resetRevertData();return true},completeChangeContent:function(e,t,n){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},viewSwitch:e.PersonalizationDefaultConfig,visibility:e.PersonalizationDefaultConfig,position:e.PersonalizationDefaultConfig}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/changeHandler/CardChangeHandler", ["sap/ovp/cards/CommonUtils"],function(e){"use strict";function r(){return{changeHandler:{},layers:{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,USER:true}}}function t(r){var t=r.getContent();if(!t.card){var n={card:{id:e.removePrefixAndReturnLocalId(t.id),idIsLocal:true}};return n}return t}var n={changeHandler:{applyChange:function(r,t,n){var a=e.getApp();a.appendIncomingDeltaChange(r);return},completeChangeContent:function(e,r,t){return},revertChange:function(e,r,t){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};var a={changeHandler:"default",layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};var i=r();var o=r();i.changeHandler.applyChange=function(e,r,n){e.setContent(t(e));return l(e,r,n,false)};i.changeHandler.revertChange=function(e,r,t){return d(e,r,t,true)};i.changeHandler.completeChangeContent=function(r,t,n){var a=e.removePrefixAndReturnLocalId(t.removedElement.id);var i={card:{id:a,idIsLocal:true}};return Promise.resolve().then(function(){r.setContent(i)})};o.changeHandler.applyChange=function(e,r,n){e.setContent(t(e));return l(e,r,n,true)};o.changeHandler.revertChange=function(e,r,t){return d(e,r,t,false)};o.changeHandler.completeChangeContent=function(r,t,n){var a=e.removePrefixAndReturnLocalId(t.revealedElementId);var i={card:{id:a,idIsLocal:true}};return Promise.resolve().then(function(){r.setContent(i)})};function d(r,t,n,a){var i=n.modifier,o=n.appComponent,d=e.getApp(),l=d.getUIModel(),s=d.getLayout(),u=o.createId(r.getRevertData().id),C=i.bySelector(r.getRevertData(),o);i.setVisible(C,a);r.resetRevertData();if(l.getProperty("/containerLayout")==="resizable"){var c=s.getDashboardLayoutUtil();c.updateCardVisibility([{id:c.getCardIdFromComponent(u),visibility:a}])}s.rerender();return Promise.resolve(true)}function l(r,t,n,a){var i=n.modifier,o=e.getApp(),d=o&&o.getView();if(!d){throw new Error("Main view is not initialized yet.")}var l=o.getUIModel(),s=o.getLayout(),u=r.getContent(),C=n.appComponent,c=C.createId(u.card.id),g=i.bySelector(u.card,C,d);var f=o.deltaChanges.filter(function(e){return e.getSelector().id===u.card.id&&e.getChangeType()==="visibility"});if(o.aManifestOrderedCards){for(var v=0;v<o.aManifestOrderedCards.length;v++){var p=c;var h=p.indexOf("---")+3;var m=p.substring(h);if(o.aManifestOrderedCards[v].id===m.split("--")[1]){o.oView.oController.aManifestOrderedCards[v].visibility=r.getChangeType()==="hideCardContainer"?false:true}}}if(!o.aManifestOrderedCards||f.length===0){r.setRevertData(u.card);i.setVisible(g,a);if(l.getProperty("/containerLayout")==="resizable"){var y=s.getDashboardLayoutUtil();if(y.aCards){y.updateCardVisibility([{id:y.getCardIdFromComponent(c),visibility:a}])}o.appendIncomingDeltaChange(r)}if(a){var I=d.byId(c);if(!I.getComponentInstance()&&o.bFinishedCardsCreationProcess){var R=o._getCardFromManifest(o._getCardId(c));o.recreateRTAClonedCard(R)}}s.rerender();return Promise.resolve(true)}return Promise.resolve(false)}return{HideCardContainer:i,UnhideCardContainer:o,PersonalizationDefaultConfig:n,UnhideControlConfig:a}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/changeHandler/PersonalizationChangeHandler", ["sap/ovp/cards/CommonUtils","sap/ui/fl/changeHandler/condenser/Classification"],function(e,n){"use strict";var t={changeHandler:{applyChange:function(n,t,i){var r=e.getApp();r.appendIncomingDeltaChange(n);return},getCondenserInfo:function(e){return{affectedControl:e.getSelector(),classification:n.LastOneWins,uniqueKey:e.getSelector().id+"-"+e.getChangeType()}},completeChangeContent:function(e,n,t){return},revertChange:function(e,n,t){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};return{viewSwitch:t,visibility:t,position:t,dragOrResize:t}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/changeHandler/RemoveCardContainer", ["sap/m/MessageToast","sap/ovp/app/resources","sap/ovp/cards/CommonUtils"],function(e,t,r){"use strict";var a={changeHandler:{},layers:{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};a.changeHandler.applyChange=function(a,i,o){var n=o.modifier,s=r.getApp(),d=s.getView(),p=s.getUIModel(),g=p.getProperty("/cards"),l=s.getLayout(),u=a.getContent().id,c=s._getCardId(u),C=o.appComponent,y={id:u,isLocalId:false},f=n.bySelector(y,C,d),v;for(v=0;v<g.length;v++){if(g[v].id===c){break}}var b=g.splice(v,1);p.setProperty("/cards",g);a.setRevertData({id:u,oCard:b[0],index:v});n.setVisible(f,false);if(p.getProperty("/containerLayout")==="resizable"){var m=l.getDashboardLayoutUtil();if(m.aCards){m.updateCardVisibility([{id:m.getCardIdFromComponent(u),visibility:false}])}}var h=t.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_REMOVE",[f.getComponentInstance().getComponentData().settings.title]);e.show(h,{duration:1e4});l.rerender();return true};a.changeHandler.revertChange=function(e,t,a){var i=a.modifier,o=r.getApp(),n=o.getUIModel(),s=n.getProperty("/cards"),d=o.getLayout(),p=e.getRevertData(),g=i.bySelector(p.id);s.splice(p.index,0,p.oCard);n.setProperty("/cards",s);i.setVisible(g,true);e.resetRevertData();if(n.getProperty("/containerLayout")==="resizable"){var l=d.getDashboardLayoutUtil();l.updateCardVisibility([{id:l.getCardIdFromComponent(p.id),visibility:true}])}d.rerender();return true};a.changeHandler.completeChangeContent=function(e,t,r){return};return a},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/helpers/ODataAnnotationHelper", ["sap/ovp/cards/CommonUtils"],function(t){"use strict";function i(i,n,s){if(t.isODataV4(s)){n="@"+n}return i[n]}return{getRecords:i}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/helpers/ODataDelegator", ["sap/ovp/cards/CommonUtils","sap/ovp/cards/MetadataAnalyser","sap/ovp/helpers/V4/MetadataAnalyzer"],function(t,e,r){"use strict";function a(a,n){if(!t.isODataV4(a)){return e.getParametersByEntitySet(a,n.name,true)}else{return r.getParametersByEntitySet(a,n,true)}}function n(a,n,s){if(!t.isODataV4(s)){return e.getPropertyFromEntityType(a,n)}else{return r.getPropertyFromEntityType(a,n)}}return{getParametersByEntitySet:a,getPropertyFromEntityType:n}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/helpers/V4/MetadataAnalyzer", [],function(){"use strict";function e(e,t){var r=e.getObject("/");for(var a in r){if(typeof r[a]==="object"&&r[a].$Type===t){return a}}}function t(t,r,a){if(!a){return null}var n=e(t,r);return t.getObject("/"+n+"/"+a)||null}function r(t,r,a){if(!t||!t.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var n=t.getMetaModel();var o={entitySetName:null,parameters:[],navPropertyName:null};var i=n.getData()[r.$Type];var y=[];for(var p in i){if(i[p].$kind==="NavigationProperty"){y.push(i[p])}}if(y.length===0){return o}y.filter(function(t){var i=n.getData()[t.$Type];var y=n.getData().$Annotations[t.$Type];if(y&&y["@SAP__common.ResultContext"]&&i.$Key.length>0){o.entitySetName=e(n,t.$Type);for(var p=0;p<i.$Key.length;p++){if(a){var u=[];for(var f in i){if(i[f].$kind==="Property"){u.push(f)}}for(var v=0;v<u.length;v++){if(u[v]===i.$Key[p]){o.parameters.push({name:u[v]});o.entitySetName=e(n,t.$Type)}}}else{o.parameters.push({name:i.$Key[p]})}}var m=[];for(var s in i){if(i[s].$kind==="NavigationProperty"){m.push(i[s])}}var l=m.some(function(e){e.$Type===r.$Type?o.navPropertyName=e.$Type:Function.prototype();return o.navPropertyName});return l&&o.navPropertyName&&o.entitySetName}return false});return o}function a(e,t){return Array.of(t.property[e])}return{getEntitySetName:e,getODataPropertyFromV4Metadata:t,getParametersByEntitySet:r,getPropertyFromEntityType:a}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Initialization Code and shared classes of library sap.ovp (1.115.0)
 */
sap.ui.predefine("sap/ovp/library", ["sap/ui/core/Core","sap/ui/core/library","sap/ui/layout/library","sap/ui/generic/app/library","sap/m/library","sap/f/library","sap/ui/comp/library","sap/ui/rta/library","sap/suite/ui/microchart/library","sap/viz/library","sap/fe/placeholder/library","sap/fe/macros/library","sap/insights/library","sap/suite/ui/commons/library"],function(a){"use strict";var i=a.initLibrary({name:"sap.ovp",dependencies:["sap.ui.core","sap.ui.layout","sap.ui.generic.app","sap.m","sap.f","sap.ui.comp","sap.ui.rta","sap.suite.ui.microchart","sap.viz","sap.fe.placeholder","sap.fe.macros","sap.insights","sap.suite.ui.commons","sap.ui.integration"],types:[],interfaces:[],controls:[],elements:[],version:"1.115.0",extensions:{flChangeHandlers:{"sap.ovp.ui.EasyScanLayout":"sap/ovp/flexibility/EasyScanLayout","sap.ovp.ui.DashboardLayout":"sap/ovp/flexibility/DashboardLayout"},"sap.ui.support":{diagnosticPlugins:["sap/ovp/support/DiagnosticsTool/DiagnosticsTool"]}}});return i});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/placeholder/placeholderHelper", ["sap/base/util/UriParameters","sap/ui/core/Placeholder"],function(e,l){"use strict";var a={isPlaceHolderEnabled:function(){var l=window["sap-ushell-config"]&&window["sap-ushell-config"].apps&&window["sap-ushell-config"].apps.placeholder&&window["sap-ushell-config"].apps.placeholder.enabled,a=e.fromQuery(window.location.search).get("sap-ui-xx-placeholder");return l===false||a==="false"?false:true},getPlaceholderInfo:function(){return new l({html:"sap/fe/placeholder/view/PlaceholderOVP.fragment.html",autoClose:true})},showPlaceholder:function(e){if(this.isPlaceHolderEnabled()&&!this.bPlaceholderShown){this.navContainer=e;this.bPlaceholderShown=true;e.showPlaceholder({placeholder:this.getPlaceholderInfo()})}},hidePlaceholder:function(){if(this.bPlaceholderShown){var e=this.navContainer;e&&e.hidePlaceholder();this.bPlaceholderShown=false}},hidePlaceholderNeeded:function(){return this.bPlaceholderShown}};return a});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/support/DiagnosticsTool/DiagnosticsTool", ["sap/ui/thirdparty/jquery","sap/ui/core/support/Plugin","sap/ui/core/format/DateFormat","sap/ui/model/json/JSONModel","sap/ovp/support/lib/CommonChecks","sap/ovp/support/lib/CommonMethods","sap/ui/core/mvc/XMLView","sap/ui/core/IntervalTrigger","sap/ui/core/Core"],function(jQuery,e,t,n,a,i,o,s,r){"use strict";var u="sapUiSupportFioriElementsPluginOVP";function p(e){var p,l,f=u+"-View",c=[],d=r.getEventBus(),m,v,g,h,S,w=10,R;function b(){return u}function O(e){var n=t.getDateInstance({source:{pattern:"YYYYMMdd"},style:"short"});return n.format(n.parse(String(e).substring(0,8)))}function A(e){var t=window.location.origin;var n=window.location.pathname;var i=e||a.getComponentIDByStructure();if(i){m=a.getManifestPath(i);if(m){var o=a.getManifestURL(t,n,m);if(o){return o}}}return""}function D(e,t,n,a,i){if(e==="string"){c.push({order:n,name:t,type:e,value:a});return true}else if(e==="link"){c.push({order:n,name:t,type:e,value:a,target:i});return true}else if(e==="group"){c.push({order:n,name:t,type:e});return true}return false}function E(e,t,n){return D("string",e,t,n,"")}function I(e,t,n,a){return D("link",e,t,n,a)}function j(e,t){return D("group",e,t,"","")}function C(e){if(!(e&&i.hasObjectContent(e))){return undefined}if(!(e.getMetadata()&&i.hasObjectContent(e.getMetadata()))){return undefined}var t=e.getMetadata();if(!(t.getManifest()&&i.hasObjectContent(t.getManifest()))){return undefined}return t.getManifest()}function N(e){c=[];E("Error",0,e);H()}function y(e){var t=a.getUI5VersionInfo();try{if(t&&i.hasObjectContent(t)){E("OpenUI5 Version",e,t.version+" (built at "+O(t.buildTimestamp)+")");return true}else{E("OpenUI5 Version",e,"ERROR: OpenUI5 version is not available!");return false}}catch(n){E("OpenUI5 Version",e,t&&t.version+', detailed UI5 version info is not available! Possible reason: missing file "sap-ui-version.json"');return true}}function P(e){var t=i.getApplicationName(window.location.href);if(t){I("Application URL",e,"#"+t,window.location.href);return true}else{E("Application URL",e,"ERROR: Could not extract application name (#semanticObject-action) from URL!");return false}}function L(e){if(m&&v){var t=m;if(m.indexOf("./")===0){t=m.substring(2,m.length)}I("Manifest",e,t,v);return true}else{E("Manifest",e,"ERROR: Could not generate link to manifest.json! Possible reason: The application did not finish loading or is not a Fiori Elements application.");return false}}function U(e){if(!h){return false}var t=a.getRegistrationIDsByManifest(h);if(t&&Array.isArray(t)&&t.length>0){E(t.length>1?"Fiori IDs":"Fiori ID",e,i.concatStrings(t));return true}return false}function F(e){var t=a.getApplicationComponentByManifest(h);if(t){E("Application Component (ACH)",e,t);return true}else{E("Application Component (ACH)",e,"ERROR: Path /sap.app/ach not found in manifest.json! Possible reason: Invalid manifest.json");return false}}function M(e){var t=a.getApplicationIDByManifest(h);if(t){E("Application ID",e,t);return true}else{E("Application ID",e,"ERROR: Path /sap.app/id not found in manifest.json! Possible reason: Invalid manifest.json");return false}}function V(e){if(h){var t=a.getFloorplanByManifest(h)}else{t=a.getFloorplanByStructure()}if(!a.isValidFloorplan(t)){t=a.mFloorplans.UNKNOWN}if(t===a.mFloorplans.UNKNOWN){E("Floorplan Component (ACH)",e,a.getTicketComponentForFloorplan(t)+" (ERROR: Unknown floorplan! Possible reason: Invalid manifest.json)");return false}else{E("Floorplan Component (ACH)",e,a.getTicketComponentForFloorplan(t)+" ("+t+")");return true}}function T(e,t){if(!(h&&i.hasObjectContent(h))){return false}if(!(h["sap.app"]&&h["sap.app"].dataSources&&h["sap.app"].dataSources[e])){E("OData Service Metadata",t,"ERROR: Data source "+e+" not found at /sap.app/dataSources/"+e+" in manifest.json! Possible reason: Invalid manifest.json");return false}if(!h["sap.app"].dataSources[e].uri){E("OData Service Metadata",t,"ERROR: Data source URI not found at /sap.app/dataSources/"+e+"/uri in manifest.json! Possible reason: Invalid manifest.json");return false}var n=h["sap.app"].dataSources[e].uri;if(n.lastIndexOf("/")!==n.length-1){n+="/"}n+="$metadata";I("OData Metadata",t,n,window.location.origin+n);return true}function k(e,t){if(!(h&&i.hasObjectContent(h)&&g)){return false}if(!(h["sap.app"]&&h["sap.app"].dataSources&&h["sap.app"].dataSources[e])){E("Annotations",t,"ERROR: Data source "+e+" not found at /sap.app/dataSources/"+e+" in manifest.json! Possible reason: Invalid manifest.json");return false}if(!(h["sap.app"].dataSources[e].settings&&h["sap.app"].dataSources[e].settings.annotations&&h["sap.app"].dataSources[e].settings.annotations!==[])){E("Annotations",t,"ERROR: Data source "+e+" has no annotations at /sap.app/dataSources/"+e+"/settings/annotations in manifest.json! Possible reason: Invalid manifest.json");return false}var n=h["sap.app"].dataSources[e].settings.annotations;n=n.reverse();for(var a in n){if(!n.hasOwnProperty(a)){continue}var o=n[a];if(h["sap.app"].dataSources[o]){var s=h["sap.app"].dataSources[o].uri;if(!s){continue}var r="";var u="";if(s.indexOf("/")===0){u="Backend Annotation";r=window.location.origin}else{u="Local Annotation";r=g;if(r.lastIndexOf("/")!==r.length-1){r+="/"}}u+=" (Prio. "+parseInt(parseInt(a,10)+1,10)+")";I(u,t,h["sap.app"].dataSources[o].uri,r+h["sap.app"].dataSources[o].uri)}}return true}function B(e){if(!h){return}var t=0;function n(e){t+=.01;return e+t}if(!(h["sap.ui5"]&&h["sap.ui5"].models)){E("Data Sources",e,"ERROR: Path /sap.ui5/models not found in manifest.json! Possible reason: Invalid manifest.json");return}var a=h["sap.ui5"].models;var o=[];for(var s in a){if(!a.hasOwnProperty(s)){continue}if(a[s]&&a[s].dataSource&&a[s].dataSource!==""){var r=false;for(var u in o){if(!o.hasOwnProperty(u)){continue}if(o[u].dataSource===a[s].dataSource){r=true;break}}var p=s===""?"mainService":s;if(!r){o.push({models:[p],dataSource:a[s].dataSource})}else{o[u].models.push(p)}}}if(o.length===0){E("Data Sources",e,"ERROR: No models with data sources found in manifest.json! Possible reason: Invalid manifest.json");return}for(var l in o){if(!o.hasOwnProperty(l)){continue}if(!(h["sap.app"]&&h["sap.app"].dataSources)){E("Data Sources",e,"ERROR: No data sources found at /sap.app/dataSources in manifest.json! Possible reason: Invalid manifest.json");return}if(!h["sap.app"].dataSources[o[l].dataSource]){E("Data Sources",e,"ERROR: Data source "+o[l].dataSource+" not found at /sap.app/dataSources/"+o[l].dataSource+" in manifest.json! Possible reason: Invalid manifest.json");return}j(i.concatStrings(o[l].models),n(e));T(o[l].dataSource,n(e));k(o[l].dataSource,n(e))}}function x(e){var t=r.byId(e);if(t){return t}else{return new o(e,{viewName:"sap.ovp.support.DiagnosticsTool.view.DiagnosticsTool",viewData:{plugin:p}})}}function G(){var e=x(f);e.placeAt(u);var t=new n;e.setModel(t,"data")}function K(){p=this;l=window.location.hash.slice(1);if(e.isToolStub()){if(!e.hasListeners(u+"SetData")){e.attachEvent(u+"SetData",z)}if(!e.hasListeners(u+"UpdateStatus")){e.attachEvent(u+"UpdateStatus",Q)}if(!e.hasListeners(u+"ShowDataRefreshed")){e.attachEvent(u+"ShowDataRefreshed",Z)}window.fioriElementsPluginID=u;G()}else{if(!e.hasListeners(u+"GetData")){e.attachEvent(u+"GetData",$)}d.unsubscribe("elements","ViewRendered",ee);d.unsubscribe("elements","ViewRenderingStarted",ee);d.subscribe("elements","ViewRendered",ee);d.subscribe("elements","ViewRenderingStarted",ee);if("onhashchange"in window){window.addEventListener("hashchange",te)}}$()}function W(){if(e.isToolStub()){window.fnFEPluginToolInstanceExit=undefined;e.detachEvent(u+"SetData",z);e.detachEvent(u+"UpdateStatus",Q);e.detachEvent(u+"ShowDataRefreshed",Z);x(f).destroy()}else{window.fnFEPluginAppInstanceExit=undefined;e.detachEvent(u+"GetData",$);d.unsubscribe("elements","ViewRendered",ee);d.unsubscribe("elements","ViewRenderingStarted",ee);if("onhashchange"in window){window.removeEventListener("hashchange",te)}}}function J(){e.sendEvent(u+"GetData",{})}function H(){var t=new n;c.sort(i.getDynamicComparator("order"));var a=(new Date).toLocaleTimeString([],{hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"});var o=true;if(!c||c.length===0){o=false}var s=i.getApplicationStatus();if(!s){i.setApplicationStatus(i.mApplicationStatus.UNKNOWN);s=i.mApplicationStatus.UNKNOWN}var r="";if(s===i.mApplicationStatus.FAILED){r="The application did not finish loading or is no Fiori Elements application! The shown data below could be collected anyway. If the application finishes loading, the data will be updated automatically."}t.setData({properties:c,url:window.location.href,origin:window.location.origin,retrieval:a,copyEnabled:o,status:s,statusMessage:r});e.sendEvent(u+"SetData",JSON.parse(t.getJSON()))}function Y(t,n){e.sendEvent(u+"UpdateStatus",{timeLeft:t,status:n})}function q(){e.sendEvent(u+"ShowDataRefreshed",{})}function X(e){if(v){g=a.getRootPath(v)}c=[];H();y(1);P(2);L(3);H();if(e&&h&&i.hasObjectContent(h)){U(3);F(4);V(5);B(6);H();q()}else if(v){jQuery.when(i.getFileFromURI(v)).done(function(e){h=e;U(3);M(4);F(5);V(6);B(7)}).fail(function(){E("Manifest",3,"ERROR: Could not access manifest.json even though link could be generated! Possible reason: missing permission to access file.")}).always(function(){H();q()})}}function $(){h=undefined;v=undefined;g=undefined;var e=i.getApplicationStatus();var t=i.getAppComponent();var n=false;if(!(e&&i.isValidApplicationStatus(e))){e=i.mApplicationStatus.UNKNOWN}if(e===i.mApplicationStatus.LOADING){ee();return}else if(e===i.mApplicationStatus.FAILED){var o=C(t);if(o&&i.hasObjectContent(o)){h=o;if(h&&h["sap.app"]&&h["sap.app"].id){v=A(h["sap.app"].id);if(!v){n=true}}else{n=true}}else{N("Could not load any data because manifest and component of current application are unknown!");q();return}}else if(e===i.mApplicationStatus.RENDERED){v=A();if(!v){o=C(t);if(o&&i.hasObjectContent(o)){h=o;if(h&&h["sap.app"]&&h["sap.app"].id){v=A(h["sap.app"].id);if(!v){n=true}}else{n=true}}else{N("Could not load any data because manifest and component of current application are unknown!");q();return}}}else if(e===i.mApplicationStatus.UNKNOWN){if(a.getFloorplanByStructure()!==a.mFloorplans.UNKNOWN){h=a.getManifestByStructure();if(h&&i.hasObjectContent(h)){if(h&&h["sap.app"]&&h["sap.app"].id){v=A(h["sap.app"].id);if(!v){n=true}}else{n=true}}}else{N("Could not load any data because manifest and component of current application are unknown!");q();return}}X(n)}function z(e){var t=new n;t.setJSON(JSON.stringify(e.getParameters()));var a=x(f);a.setModel(t,"data");a.invalidate()}function Q(e){var t=e.getParameters();x(f).getController().updateStatus(t.timeLeft,t.status)}function Z(){var e=x(f);e.getController().showDataRefreshed()}function _(){var e=i.getApplicationStatus();if(R>0){Y(R,e)}else{R=w;i.setApplicationStatus(i.mApplicationStatus.FAILED);Y(0,i.mApplicationStatus.FAILED);S.removeListener(_);S=undefined;$()}R--}function ee(e,t){if(t==="ViewRenderingStarted"||!t&&i.getApplicationStatus()===i.mApplicationStatus.LOADING){i.setApplicationStatus(i.mApplicationStatus.LOADING);if(!S){R=w;S=new s(1e3);S.addListener(_)}}else if(t==="ViewRendered"){i.setApplicationStatus(i.mApplicationStatus.RENDERED);R=w;if(S){S.removeListener(_);S=undefined}$()}}function te(e){function t(e){for(var t=0;t<e.length;t++){if(e[t]==="/"||e[t]==="&"||e[t]==="?"||e[t]==="~"){return t}}return e.length}function n(e,n){if(!e||!n){return false}if(e===n){return true}var a=t(e);var i=t(n);if(a!==i){return false}else if(e.substr(0,a)===n.substr(0,i)){return true}return false}var a,o,s=false;if(e.originalEvent.oldURL&&e.originalEvent.newURL){a=e.originalEvent.oldURL.split("#")[1];o=e.originalEvent.newURL.split("#")[1]}else{a=l;o=window.location.hash.slice(1);l=o}if(a.length>=o.length){s=n(o,a)}else{s=n(a,o)}if(!s){i.setApplicationStatus(i.mApplicationStatus.LOADING);i.setAppComponent(undefined);ee();R=w/2}}return{init:K,exit:W,getId:b,onRefresh:J}}return e.extend("sap.ovp.support.DiagnosticsTool.DiagnosticsTool",{constructor:function(t){e.apply(this,[u,"SAP Fiori Elements",t]);Object.assign(this,p(t))}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/support/DiagnosticsTool/controller/DiagnosticsTool.controller", ["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/ovp/support/lib/Documentation","sap/ui/thirdparty/jquery","sap/ovp/app/OVPLogger"],function(e,t,o,a,jQuery,r){"use strict";var i=new r("OVP.controller.DiagnosticsTool");function n(){this.getView().attachAfterRendering(function(){u()})}function s(){var e=this.getView().getModel("data");if(e.getProperty("/status")==="Loading"){t.show("Application is still loading");return}var o=(new Date).toLocaleTimeString([],{hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"});e.setData({properties:null,retrieval:o,copyEnabled:false});e.updateBindings();this.getView().getViewData().plugin.onRefresh()}function l(){var e="\r\n";var r="- ";var i=this.getView().getModel("data").getData();if(!(i&&i.properties&&i.url)){o.error("Could not copy data to your clipboard! No data collected",{title:"Error"});return}var n=i.properties;var s="*************+Extracted by SAP Fiori Elements Diagnostics Plugin [FEDiagnosticOVP]+*************"+e;s+=r+"Extracted on "+(new Date).toUTCString()+e;s+=r+"Host: "+i.origin+e;s+=r+"Application status: "+i.status+e;if(i.statusMessage){s+=r+"Notice: "+i.statusMessage+e}s+=r+"Documentation: "+a.getDocuURL()+e;s+=e;s+="APP DATA"+e;for(var l=0,c=n.length;l<c;l++){if(n[l].type==="string"){s+=r+n[l].name+": "+n[l].value+e}else if(n[l].type==="link"){s+=r+n[l].name+": "+n[l].target+e}else if(n[l].type==="group"){s+="Group: "+n[l].name+e}}s+=e;s+="**************************"+e;s+=e;s+=e;s+="PROVIDE"+e;s+=r+"User/Password: <user>/<password>"+e;s+=r+"Steps to recreate the issue: <maybe also provide master data, pictures or video>"+e;var d=this.getView().byId("CopyDataTextArea").getId();var u=document.getElementById(d);u.style.display="block";u.value=s;u.select();try{var p=document.execCommand("copy");if(p){t.show("Ticket relevant information copied to clip board")}else{o.error("Could not copy data to your clipboard! You can copy it manually from here: "+e+e+s,{title:"Error"})}}catch(t){o.error("Could not copy data to your clipboard! You can copy it manually from here: "+e+e+s,{title:"Error"})}finally{u.style.display="none"}}function c(){var e="<br/>",r="</span>"+e,i="<span>",n=i+"- ",s=this.getView().getModel("data").getData();if(!(s&&s.properties&&s.url)){o.error("Could not copy data to your clipboard! No data collected",{title:"Error"});return}var c=s.properties,d=document.getElementById(this.getView().byId("CopyDataHTML").getId()),u=d[0];var p=i+"*************+Extracted by SAP Fiori Elements Diagnostics Plugin [FEDiagnosticOVP]+*************"+r;p+=n+"Extracted on "+(new Date).toUTCString()+r;p+=n+'Host: <a href="'+s.url+'" rel="noopener noreferrer">'+s.origin+"</a>"+r;p+=n+"Application status: "+s.status+r;if(s.statusMessage){p+=n+"Notice: "+s.statusMessage+r}p+=n+"Documentation: "+'<a href="'+a.getDocuURL()+'" rel="noopener noreferrer">'+a.getDocuURL()+"</a>"+r;p+=e;p+=i+"APP DATA"+r;for(var g=0,f=c.length;g<f;g++){if(c[g].type==="string"){p+=n+c[g].name+": "+c[g].value+r}else if(c[g].type==="link"){p+=n+c[g].name+': <a href="'+c[g].target+'" rel="noopener noreferrer">'+c[g].value+"</a>"+r}else if(c[g].type==="group"){p+=i+"Group: "+c[g].name+r}}p+=i+"**************************"+r;p+=e;p+=i+"PROVIDE"+r;p+=i+"User/Password: &lt;user&gt;/&lt;password&gt;"+r;p+=i+"Steps to recreate the issue: &lt;maybe also provide master data, pictures or video&gt;"+r;function m(){try{document.getSelection().removeAllRanges()}catch(e){return function(){}}}d.empty();u.insertAdjacentHTML("beforeend",p);try{var y=document.createRange();m();y.selectNode(u);document.getSelection().addRange(y);document.execCommand("copy");m();t.show("Ticket relevant information copied to clip board with HTML format")}catch(e){m();l()}finally{d.empty()}}function d(){a.openDocumentation()}function u(){var e=jQuery(".diagnosticPropertiesGroupHeaderContent");if(e.length===0){i.debug("No headers found which should be customized");return}var t,o,a;for(var r=0;r<e.length;r++){t=jQuery(e[r]);o=t.parents("td:first");a=jQuery("#"+o[0].id);a.addClass("diagnosticPropertiesGroupHeader");a.attr("colspan",2);a.next().remove()}}function p(e,t){var o=this.getView().getModel("data");o.setData({timeLeft:e,status:t})}function g(){if(window.fioriElementsPluginID){var e=document.getElementById(window.fioriElementsPluginID);if(e&&e.parent()&&!e.parent().hasClass("sapUiSupportHidden")){t.show("Data refreshed")}}}return e.extend("sap.ovp.support.DiagnosticsTool.controller.DiagnosticsTool",{onInit:n,onRefreshData:s,onCopyDataPlain:l,onCopyDataHTML:c,onShowDocumentation:d,updateStatus:p,showDataRefreshed:g})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Static class with reusable checks to collect data from Fiori Elements application.
 */
sap.ui.predefine("sap/ovp/support/lib/CommonChecks", ["sap/ovp/support/lib/CommonMethods","sap/ui/thirdparty/jquery","sap/ui/core/Core","sap/ovp/cards/CommonUtils"],function(e,jQuery,t,n){"use strict";var r={UNKNOWN:"Unknown",LISTREPORT:"sap.suite.ui.generic.template.ListReport",ANALYTICALLISTPAGE:"sap.suite.ui.generic.template.AnalyticalListPage",OVERVIEWPAGE:"sap.ovp"};var i={UNKNOWN:"CA-UI5-ST",LISTREPORT:"CA-UI5-ST",ANALYTICALLISTPAGE:"CA-UI5-ST-ALP",OVERVIEWPAGE:"CA-UI5-ST-OVP"};function a(){var e=n.getApp();if(e){var t=e.getOwnerComponent().oOvpConfig;return t.sapUICoreVersionInfo}}function p(e){return e&&e["sap.app"]&&e["sap.app"].ach?e["sap.app"].ach:""}function o(e){if(e&&e["sap.app"]&&e["sap.app"].id){if(e["sap.app"].id==="${project"+".artifactId}"){return g()}return e["sap.app"].id}return""}function s(e){return e&&e["sap.fiori"]&&e["sap.fiori"].registrationIds&&e["sap.fiori"].registrationIds.length>0?e["sap.fiori"].registrationIds:[]}function u(e,t){for(var n=0;n<e.length;n++){if(e[n]&&e[n].id&&e[n].id.indexOf(t)!==-1){return e[n].id.split("::")[0]}}return""}function f(){var n=jQuery(".sapUiXMLView"),r=jQuery(".ovpWrapper"),i="::sap.suite.ui.generic.template",a;if(r&&r.length&&r.length>0){n=r.closest(".sapUiXMLView");if(n&&n.length&&n.length>0&&n[0]&&n[0].id&&t.byId(n[0].id)&&t.byId(n[0].id).getController()&&t.byId(n[0].id).getController().getOwnerComponent()&&t.byId(n[0].id).getController().getOwnerComponent().getMetadata()&&t.byId(n[0].id).getController().getOwnerComponent().getMetadata().getManifest()){a=t.byId(n[0].id).getController().getOwnerComponent().getMetadata().getManifest()}else{return undefined}}else if(n&&n.length&&n.length>0){for(var p=0;p<n.length;p++){if(n[p].id.indexOf(i)!==-1){if(t.byId(n[p].id)&&t.byId(n[p].id).getController()&&t.byId(n[p].id).getController().getOwnerComponent()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata().getManifest()){a=t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata().getManifest();break}}}if(!a||!e.hasObjectContent(a)){return undefined}if(a&&e.hasObjectContent(a)&&a["sap.app"]&&a["sap.app"].id&&a["sap.app"].id==="${project"+".artifactId}"){a["sap.app"].id=u(n,i)}}else{return undefined}return a}function g(){var t=f(),n,r,i="::sap.suite.ui.generic.template";if(t&&e.hasObjectContent(t)&&t["sap.app"]&&t["sap.app"].id){n=jQuery(".sapUiXMLView");r=jQuery(".ovpWrapper");if(r&&r.length&&r.length>0){n=r.closest(".sapUiXMLView")}if(n&&n.length&&n.length>0){return u(n,i)}}return""}function l(e){if(!e){return""}var t=e.replace(/\./g,"/");return sap.ui.require.toUrl(t,"/manifest.json")}function c(e,t,n){if(!e||!n){return""}if(n.indexOf("./")===0||n.indexOf("../")===0){if(!t){return""}return e+t.substring(0,t.lastIndexOf("/")+1)+n}if(n.indexOf("/")===0){return e+n}return""}function d(e){if(e){return e.replace("manifest.json","")}return""}function I(e){if(!e){return false}for(var t in r){if(!r.hasOwnProperty(t)){continue}if(r[t]===e){return true}}return false}function C(e){if(e===r.UNKNOWN){return i.UNKNOWN}else if(e===r.LISTREPORT){return i.LISTREPORT}else if(e===r.ANALYTICALLISTPAGE){return i.ANALYTICALLISTPAGE}else if(e===r.OVERVIEWPAGE){return i.OVERVIEWPAGE}else{return i.UNKNOWN}}function O(e){return e&&e.hasOwnProperty("sap.ovp")&&Object.keys(e["sap.ovp"]).length!==0}function A(e){if(!(e&&e["sap.ui.generic.app"]&&e["sap.ui.generic.app"].pages&&e["sap.ui.generic.app"].pages!==[])){return false}var t=e["sap.ui.generic.app"].pages;for(var n in t){if(t.hasOwnProperty(n)){if(t[n]&&t[n].component&&t[n].component.name&&t[n].component.name==="sap.suite.ui.generic.template.ListReport"){return true}}}return false}function m(e){if(!(e&&e["sap.ui.generic.app"]&&e["sap.ui.generic.app"].pages&&e["sap.ui.generic.app"].pages!==[])){return false}var t=e["sap.ui.generic.app"].pages;for(var n in t){if(t.hasOwnProperty(n)){if(t[n]&&t[n].component&&t[n].component.name&&t[n].component.name==="sap.suite.ui.generic.template.AnalyticalListPage"){return true}}}return false}function L(e){if(e){if(O(e)){return r.OVERVIEWPAGE}else if(A(e)){return r.LISTREPORT}else if(m(e)){return r.ANALYTICALLISTPAGE}}return r.UNKNOWN}function y(){return O(f())}function P(){return A(f())}function E(){return m(f())}function T(){var e=f();if(O(e)){return r.OVERVIEWPAGE}else if(A(e)){return r.LISTREPORT}else if(m(e)){return r.ANALYTICALLISTPAGE}return r.UNKNOWN}return{mFloorplans:r,mTicketComponents:i,getUI5VersionInfo:a,getApplicationComponentByManifest:p,getApplicationIDByManifest:o,getRegistrationIDsByManifest:s,getComponentIDByStructure:g,getManifestByStructure:f,getManifestPath:l,getManifestURL:c,getRootPath:d,isValidFloorplan:I,getTicketComponentForFloorplan:C,isOverviewPageByManifest:O,isListReportByManifest:A,isAnalyticalListPageByManifest:m,getFloorplanByManifest:L,isOverviewPageByStructure:y,isListReportByStructure:P,isAnalyticalListPageByStructure:E,getFloorplanByStructure:T}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Static class with reusable methods for Fiori Elements application.
 */
sap.ui.predefine("sap/ovp/support/lib/CommonMethods", ["sap/ui/thirdparty/jquery","sap/ovp/app/OVPLogger","sap/ui/core/Core"],function(jQuery,n,e){"use strict";var t={UNKNOWN:"Unknown",FAILED:"Failed",LOADING:"Loading",RENDERED:"Rendered"};var r=t.UNKNOWN;var i={};var u=new n("OVP.lib.CommonMethods");function f(n){var e=1;if(n[0]==="-"){e=-1;n=n.substr(1)}return function(t,r){if(!t[n]){return e===1?1:-1}else if(!r[n]){return e===1?-1:1}var i=0;if(t[n]<r[n]){i=-1}else if(t[n]>r[n]){i=1}return i*e}}function s(n){if(n){return jQuery.getJSON(n)}return undefined}function o(n){for(var e in t){if(t[e]===n){return true}}return false}function a(){return r}function l(n){r=o(n)?n:t.UNKNOWN}function p(){return i}function c(n){i=n;return true}function v(n,t,r){u.info("Global event '"+t+"' published on channel '"+n+"'");e.getEventBus().publish(n,t,r)}function g(n){if(!n||n.length<1){return""}var e="";for(var t=0;t<n.length;t++){if(!n[t]||!(typeof n[t]==="string")){continue}if(e){e+=", "}e+=n[t]}return e}function d(n){if(!n){return false}return Object.keys(n).length>0}function h(n){if(!n){return""}var e=n.split("#");if(e.length<2){return""}else{var t=e[1];var r=t.indexOf("~");var i=t.indexOf("?");var u=t.indexOf("/");var f=t.indexOf("&");if(r&&r!==-1&&(r<i||i===-1)&&(r<u||u===-1)&&(r<f||f===-1)){return t.substr(0,r)}else if(i&&i!==-1&&(i<r||r===-1)&&(i<u||u===-1)&&(i<f||f===-1)){return t.substr(0,i)}else if(u&&u!==-1&&(u<r||r===-1)&&(u<i||i===-1)&&(u<f||f===-1)){return t.substr(0,u)}else if(f&&f!==-1&&(f<r||r===-1)&&(f<i||i===-1)&&(f<u||u===-1)){return t.substr(0,f)}else{return t}}}function N(n){if(!n){return""}var e=n.split("#");if(e.length<=0){return""}else if(e.length===1){return e[0]}else{return e[0]+"#"+h(n)}}return{mApplicationStatus:t,getDynamicComparator:f,getFileFromURI:s,isValidApplicationStatus:o,getApplicationStatus:a,setApplicationStatus:l,getAppComponent:p,setAppComponent:c,publishEvent:v,concatStrings:g,hasObjectContent:d,getApplicationName:h,shortenURL:N}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/support/lib/Documentation", ["sap/m/library","sap/ui/VersionInfo"],function(e,n){"use strict";var t="https://ui5.sap.com/";var r="03265b0408e2432c9571d6b3feb6b1fd";function i(){return n.load().then(function(e){var n=e.version;if(n.indexOf("-SNAPSHOT")!==-1){return t+"#/topic/"+r}else{return t+n+"/#/topic/"+r}})}function o(){i().then(function(n){e.URLHelper.redirect(n,true)})}return{getDocuURL:i,openDocumentation:o}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/Card", ["sap/ui/core/Control"],function(e){"use strict";return e.extend("sap.ovp.ui.Card",{metadata:{library:"sap.ovp",designTime:false,aggregations:{innerCard:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"innerCard"},init:function(){},renderer:function(e,r){e.openStart("div",r);e.class("sapOvpBaseCardWrapper");e.openEnd();e.renderControl(r.getAggregation("innerCard"));e.close("div")}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/CardContentContainer", ["sap/m/FlexBox"],function(e){"use strict";var n=e.extend("sap.ovp.ui.CardContentContainer",{metadata:{library:"sap.ovp"},renderer:{render:function(e,n){e.openStart("div",n);e.class("sapOvpCardContentContainer").class("sapMTBStandard");e.openEnd();var r=n.getItems();for(var a=0;a<r.length;a++){e.renderControl(r[a])}e.close("div")}}});return n});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/ComponentContainerDesigntimeMetadata", ["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/cards/SettingsUtils","sap/ui/dt/plugin/ElementMover","sap/ui/dt/OverlayRegistry","sap/ui/dt/OverlayUtil","sap/ui/rta/plugin/Plugin","sap/ui/rta/util/BindingsExtractor","sap/ui/dt/MetadataPropagationUtil","sap/ui/rta/Utils","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ovp/app/OVPLogger","sap/ui/model/json/JSONModel"],function(jQuery,e,t,a,n,r,o,i,d,s,l,u,g,c){"use strict";var p=e.getApp();var f=false;var v=new g("OVP.ui.ComponentContainerDesigntimeMetadata");var C=function(){var e="https://"+window.location.host+"/sap/opu/odata/SSB/SMART_BUSINESS_DESIGNTIME_SRV/KPIs";jQuery.ajax({type:"GET",url:e,dataType:"json",async:false,headers:"",success:function(e,t,a){var n={d:{results:[]}};n.d.results=e.d.results.filter(function(e){return!!e.ModelURI});f=n.d.results.length>0;if(f){var r=new c;r.setData(n);p.getView().setModel(r,"JSONModelForSSB")}},error:function(e){v.error(e)}})};C();var y=new a,h=function(e){e.setTargetZone(false)},m=function(e){e.setTargetZone(true)},E=function(e){var t=e.getChildren();var a=t.filter(function(e){return e.isTargetZone()});if(a.length>0){return a[0]}else{return null}},_=function(e){var t=y.getMovedOverlay();if(!t){return false}var a=false;if(!(e.getElement()===t.getElement())){var n=E(e);if(n){a=true}else if(r.isInTargetZoneAggregation(e)){a=true}}if(a){t.setSelected(true);setTimeout(function(){t.focus()},0)}return a},S=function(e,t){var a=e.getChildren();a.forEach(function(e){t(e)})},O=function(e,t){var a=n.getOverlay(e),o=a&&a.getParentElementOverlay(),i=o&&r.findAllSiblingOverlaysInContainer(a,o);i&&i.forEach(function(e){S(e,t)})};var I=a.prototype.checkTargetZone;a.prototype.checkTargetZone=function(e,t,a){var n=t?t:this.getMovedOverlay();var r=I.apply(this,arguments);if(!r){return Promise.resolve(false)}var l=n.getElement();var u=e.getParent();var g=n.getRelevantContainer();var c=u.getElement();var p=e.getDesignTimeMetadata();var f=d.getRelevantContainerForPropagation(p.getData(),l);f=f?f:c;if(!g||!f||!o.prototype.hasStableId(u)||g!==f){return Promise.resolve(false)}if(n.getParent().getElement()!==c){var v=i.getBindings(l,l.getModel());if(Object.keys(v).length>0&&l.getBindingContext()&&c.getBindingContext()){var C=s.getEntityTypeByPath(l.getModel(),l.getBindingContext().getPath());var y=s.getEntityTypeByPath(c.getModel(),c.getBindingContext().getPath());if(!(C===y)){return Promise.resolve(false)}}}return Promise.resolve(true)};a.prototype.deactivateAllTargetZones=function(e){O(e,h)};a.prototype.activateAllValidTargetZones=function(e){O(e,m)};var T={name:{singular:l.getText("Card"),plural:l.getText("Cards")},actions:{remove:{name:l.getText("OVP_KEYUSER_MENU_HIDE_CARD"),changeType:"hideCardContainer",changeOnRelevantContainer:true},reveal:{changeType:"unhideCardContainer",changeOnRelevantContainer:true,getLabel:function(e){var t=this._getCardId(e.getId()),a=this._getCardFromManifest(t);if(a){var n=a.settings;if(n.title){return n.title}else if(n.category){return n.category}else if(n.subTitle){return n.subTitle}return a.cardId}else{v.error("Card id "+t+" is not present in the manifest");return""}}.bind(p)}}};var L=e._getLayer();var b=e.getQueryParameterValue("fiori-tools-rta-mode");T.actions["settings"]=function(a){if(!a.getComponentInstance()){return{}}var o=a.getComponentInstance().getComponentData(),i=o.mainComponent,d=i._getCardFromManifest(o.cardId);if(!d||!e.checkIfCardTypeSupported(d.template)){return{}}var s={EditCard:{icon:"sap-icon://edit",name:l.getText("OVP_KEYUSER_MENU_EDIT_CARD"),isEnabled:function(e){return true},changeOnRelevantContainer:true,handler:t.fnEditCardHandler},CloneCard:{icon:"sap-icon://value-help",name:l.getText("OVP_KEYUSER_MENU_CLONE_CARD"),isEnabled:function(e){return true},handler:t.fnCloneCardHandler}};if(!L||L===u.Layers.customer){s["Cut"]={icon:"sap-icon://scissors",name:l.getText("OVP_KEYUSER_MENU_CUT_CARD"),isEnabled:function(e){return true},changeOnRelevantContainer:true,handler:function(e,t){var a=n.getOverlay(e),r=y.getMovedOverlay();if(r){r.removeStyleClass("sapUiDtOverlayCutted");y.setMovedOverlay(null);y.deactivateAllTargetZones(e)}y.setMovedOverlay(a);a.addStyleClass("sapUiDtOverlayCutted");y.activateAllValidTargetZones(e);return Promise.resolve([]).then(function(){return[]})}};s["Paste"]={icon:"sap-icon://paste",name:l.getText("OVP_KEYUSER_MENU_PASTE_CARD"),isEnabled:function(e){var t=n.getOverlay(e),a=E(t);return!!(a||r.isInTargetZoneAggregation(t))},changeOnRelevantContainer:true,handler:function(t,a){var o=n.getOverlay(t),i=y.getMovedOverlay();if(i){var d=i.getElement(),s=o.getElement(),l=r.getParentInformation(i),u=r.getParentInformation(o),g=t.getComponentInstance().getComponentData().mainComponent,c=g.getLayout(),p=g.getUIModel(),f={},v={},C=[];if(p.getProperty("/containerLayout")==="resizable"){var h=c.getDashboardLayoutModel(),m=g._getCardId(d.getId()),E=g._getCardId(t.getId()),S=h.getCardById(m),O=h.getCardById(E),I=h.getColCount(),T="C"+I,L=[];f.cardId=m;f.dashboardLayout={};f.dashboardLayout[T]={row:O.dashboardLayout.row,oldRow:S.dashboardLayout.row,column:O.dashboardLayout.column,oldColumn:S.dashboardLayout.column};if(O.dashboardLayout.column+S.dashboardLayout.colSpan>I+1){f.dashboardLayout[T].colSpan=O.dashboardLayout.colSpan;f.dashboardLayout[T].oldColSpan=S.dashboardLayout.colSpan;f.dashboardLayout[T].rowSpan=S.dashboardLayout.rowSpan;f.dashboardLayout[T].oldRowSpan=S.dashboardLayout.rowSpan}C.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:f}});C.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"dragAndDropUI",content:f}});h._arrangeCards(S,{row:O.dashboardLayout.row,column:O.dashboardLayout.column},"drag",L);h._removeSpaceBeforeCard(L);L.forEach(function(t){var a={};a.dashboardLayout={};a.cardId=t.content.cardId;a.dashboardLayout[T]=t.content.dashboardLayout;C.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:a}})})}else{var b=u.parent.getContent().filter(function(e){return e.getVisible()});f={cardId:g._getCardId(d.getId()),position:b.indexOf(s),oldPosition:b.indexOf(d)};C.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{changeType:"position",content:f}});v={cardId:g._getCardId(d.getId()),position:u.index,oldPosition:l.index};C.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"dragAndDropUI",content:v}})}}_(o);if(i){i.removeStyleClass("sapUiDtOverlayCutted");y.setMovedOverlay(null);y.deactivateAllTargetZones(t);return Promise.resolve(C).then(function(e){return e})}}};s["AddStaticLinkListCard"]={icon:"sap-icon://form",name:l.getText("OVP_KEYUSER_MENU_CREATE_LINK_LIST_CARD"),isEnabled:function(e){return true},handler:t.fnAddStaticLinkListCardHandler};if(f){s["AddKPICard"]={icon:"sap-icon://kpi-corporate-performance",name:l.getText("OVP_KEYUSER_MENU_ADD_KPI_CARD"),isEnabled:function(e){return true},handler:t.fnAddKPICardHandler}}}else if(L&&L===u.Layers.customer_base||b){s["AddCard"]={icon:"sap-icon://add-activity",name:l.getText("OVP_KEYUSER_MENU_AddCard"),isEnabled:function(e){return true},handler:t.fnAddNewCardHandler}}s["RemoveCard"]={icon:"sap-icon://delete",name:l.getText("OVP_KEYUSER_MENU_REMOVE_CARD"),isEnabled:function(t){var a=t.getComponentInstance().getComponentData().settings;return t.getId().indexOf(e._getLayerNamespace()+".")!==-1&&!a.cloneCard&&!a.newCard},handler:t.fnRemoveCardHandler};return s};return T},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/CustomData", ["sap/ui/core/CustomData","sap/ovp/app/OVPLogger","sap/ui/core/Core","sap/ui/core/library"],function(t,e,i,r){"use strict";var o=r.ID;var a=new e("OVP.ui.CustomData");var t=t.extend("sap.ovp.ui.CustomData");t.prototype._checkWriteToDom=function(t){var e=this.getKey().toLowerCase(),r=i.getConfiguration().getAccessibility();if(!r){return}if(!this.getWriteToDom()){return null}var u=this.getValue();if(typeof u!="string"){a.error("CustomData with key "+e+" should be written to HTML of "+t+" but the value is not a string.");return null}if(!o.isValid(e)||e.indexOf(":")!=-1){a.error("CustomData with key "+e+" should be written to HTML of "+t+" but the key is not valid (must be a valid sap.ui.core.ID without any colon).");return null}if(e==window._FASTNAVIGATIONKEY){u=/^\s*(x|true)\s*$/i.test(u)?"true":"false"}else if(e.indexOf("sap-ui")==0){a.error("CustomData with key "+e+" should be written to HTML of "+t+" but the key is not valid (may not start with 'sap-ui').");return null}return{key:e,value:u}};return t});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/DashboardLayout", ["sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/core/ResizeHandler","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/KeyCodes","sap/ui/events/F6Navigation","sap/ui/core/Core","sap/ui/dom/jquery/Selectors"],function(t,jQuery,a,e,s,o,r,i,n){"use strict";var d=t.extend("sap.ovp.ui.DashboardLayout",{metadata:{designTime:true,library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},defaultAggregation:"content",events:{afterRendering:{},afterDragEnds:{}},properties:{dragAndDropRootSelector:{group:"Misc",type:"string"},dragAndDropEnabled:{group:"Misc",type:"boolean",defaultValue:true},debounceTime:{group:"Misc",type:"int",defaultValue:150}}},renderer:{apiVersion:2,render:function(t,e){var s=function(t){return t.getVisible()};var o=function(t){var a=this.getId();var e=a.indexOf("---")+3;var s=a.substring(e);return t.id===s.split("--")[1]};var r=e.$().width();var i=n.getConfiguration().getRTL();var d=e.dashboardLayoutUtil.updateLayoutData(r?r:window.innerWidth);var l=e.dashboardLayoutUtil.getCards(d.colCount);var u=e.getContent().filter(s);t.openStart("div",e);t.class("sapUshellEasyScanLayout");t.class("sapOvpDashboard");if(!a.system.phone){t.class("sapOvpDashboardDragAndDrop")}if(i){t.style("margin-right",d.marginPx+"px")}else{t.style("margin-left",d.marginPx+"px")}t.openEnd();t.openStart("div");t.class("sapUshellEasyScanLayoutInner");t.accessibilityState(undefined,{role:"list"});t.attr("aria-label","Cards");if(l.length>0){t.attr("tabindex",0)}t.openEnd();if(l.length>0){var h={},p,c,y,f=e.getDashboardLayoutModel().getColCount();for(p=0,c=u.length;p<c;p++){var b=["easyScanLayoutItemWrapper","sapOvpDashboardLayoutItem"];h=l.filter(o.bind(u[p]))[0];e.dashboardLayoutUtil.setCardCssValues(h);y=h.dashboardLayout.column+h.dashboardLayout.colSpan===f+1;if(y){h.dashboardLayout.colSpan===1?b.push("sapOvpNotResizableLeftRight"):b.push("sapOvpNotResizableRight")}if(h.template==="sap.ovp.cards.stack"||h.settings.stopResizing||!a.system.desktop){b.push("sapOvpDashboardLayoutItemNoDragIcon")}t.openStart("div",e.dashboardLayoutUtil.getCardDomId(h.id));for(var g=0;g<b.length;g++){t.class(b[g])}var m="translate3d("+h.dashboardLayout.left+" ,"+h.dashboardLayout.top+" ,0px)";t.style("transform",m);t.style("-ms-transform",m);t.style("-moz-transform",m);t.style("-webkit-transform",m);t.style("height",h.dashboardLayout.height);t.style("width",h.dashboardLayout.width);t.attr("aria-setsize",c);t.attr("aria-posinset",p+1);t.attr("tabindex",0);t.accessibilityState(undefined,{role:"listitem"});t.openEnd();t.renderControl(u[p]);t.openStart("div").class("lastElement").accessibilityState(undefined,{role:"none"}).attr("tabindex",0).openEnd();t.close("div");t.close("div")}}t.close("div");t.openStart("div");t.class("after");if(l.length>0){t.attr("tabindex",0).accessibilityState(undefined,{role:"none"})}t.openEnd();t.close("div");t.close("div")}},init:function(){this.oColumnLayoutData={};this.resizeHandlerId=this.initResizeHandler();var t=n.getComponent(this._sOwnerId);this.dashboardLayoutUtil=t.getDashboardLayoutUtil();this.dashboardLayoutUtil.setLayout(this);if(this.dashboardLayoutUtil.dashboardLayoutModel.getCards().length===0){this.data("sap-ui-fastnavgroup","false",false)}else{this.data("sap-ui-fastnavgroup","true",true)}},exit:function(){if(this.resizeHandlerId){e.deregister(this.resizeHandlerId)}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy();delete this.layoutDragAndDrop}},onBeforeRendering:function(){},onAfterRendering:function(){this.keyboardNavigation=new l(this);if(!this.getDragAndDropRootSelector()){this.setDragAndDropRootSelector("#"+this.getId())}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy()}if(this.getDragAndDropEnabled()){this.layoutDragAndDrop=this.dashboardLayoutUtil.getRearrange({rootSelector:this.getDragAndDropRootSelector(),layout:this});this.dashboardLayoutUtil.setAriaPos();this.fireAfterRendering()}},getLayoutDataJSON:function(){return this.dashboardLayoutUtil.getDashboardLayoutModel().getLayoutVariants4Pers()},filterVisibleCards:function(t){return t.getVisible()},getDashboardLayoutUtil:function(){return this.dashboardLayoutUtil},getDashboardLayoutModel:function(){return this.dashboardLayoutUtil.getDashboardLayoutModel()},getVisibleLayoutItems:function(){var t=this.getContent();var a=t.filter(this.filterVisibleCards);return a},initResizeHandler:function(){var t;var a=this.getDebounceTime();var s=function(e){window.clearTimeout(t);t=window.setTimeout(this.oControl.resizeHandler.bind(this,e),a)};return e.register(this,s)},resizeHandler:function(t){this.oControl.dashboardLayoutUtil.resizeLayout(t.size.width)},setActive:function(t){if(t){this.removeStyleClass("ovpOverlay")}else{this.addStyleClass("ovpOverlay")}},getActive:function(){return!this.hasStyleClass("ovpOverlay")}});var l=function(t){this.init(t)};l.prototype.init=function(t){this.sCurrentFocusId="";this.layoutUtil=t.getDashboardLayoutUtil();this.layoutModel=t.getDashboardLayoutModel();this.keyCodes=r;this.jqElement=t.$();this.bIgnoreSelfFocus=false;this.sLastFocusableCard=null;this.lastFocussedElement=null;this.jqElement.on("keydown",this.keyDownHandler.bind(this));this.jqElement.on("keyup",this.keyUpHandler.bind(this));this.jqElement.find(".sapUshellEasyScanLayoutInner").on("focus.keyboardNavigation",this.layoutFocusHandler.bind(this));this.jqElement.on("focus.keyboardNavigation",".easyScanLayoutItemWrapper",this.layoutItemFocusHandler.bind(this));document.querySelector("body").addEventListener("keyup",this.bodyKeyupHandler.bind(this));document.querySelector("body").addEventListener("keydown",this.bodyKeydownHandler.bind(this));var a=this.layoutClickHandler.bind(this);var e=document.querySelectorAll(".ovpWrapper .sapFDynamicPageContent");for(var s=0;s<e.length;s++){e[s].addEventListener("click",a)}this.jqElement.find(".after").on("focus.keyboardNavigation",this.afterFocusHandler.bind(this))};l.prototype.spacebarHandler=function(t){o.bCRTLPressed=t.ctrlKey||t.metaKey;var a=n.byId(t.target.id);if(a&&a.mEventRegistry.hasOwnProperty("press")){var e="#"+t.target.id;var s=document.querySelectorAll(e);for(var r=0;r<s.length;r++){s[r].classList.add("sapMLIBActive")}a.firePress()}};l.prototype.bodyKeyupHandler=function(t){if(t.ctrlKey||t.metaKey){o.bCRTLPressed=false}};l.prototype.bodyKeydownHandler=function(t){if(t.ctrlKey||t.metaKey){o.bCRTLPressed=true}};l.prototype.layoutItemFocusHandler=function(){var t=jQuery(document.activeElement);if(t){var a,e="";if(t.find(".valueStateText").length==1){var o=t.find(".valueStateText").find(".sapMObjectNumberText").text();var r=t.find(".valueStateText").find(".sapUiInvisibleText").text();t.find(".valueStateText").attr("aria-label",o+" "+r);t.find(".valueStateText").attr("aria-labelledby","")}t.find("[role='listitem']").attr("aria-label","");if(t.hasClass("easyScanLayoutItemWrapper")){var i="";var n=t.find(".cardCount");if(n.length===0){i="countDiv_"+(new Date).getTime();var d='<div id="'+i+'" class="cardCount"'+'" hidden></div>';t.append(d)}else{i=n[0].id}e+=i+" ";var l=t.find(".cardType");if(l.length!==0){e+=l[0].id+" "}}var u="cardHeaderType_";if(t.hasClass("sapOvpCardHeader")&&!t.hasClass("sapOvpStackCardContent")){var h="";var p=t.find(".cardHeaderType");if(p.length===0){var c=s.getText("CardHeaderType");h=u+(new Date).getTime();var y='<div id="'+h+'" class="cardHeaderType" aria-label="'+c+'" hidden></div>';t.append(y)}else{h=p[0].id}e+=h+" "}var f,b;if(t.hasClass("easyScanLayoutItemWrapper")){b=t.find(".sapOvpCardHeader");f=b.find("[aria-label]")}else{f=t.find("[aria-label]")}var g=t.find(".sapOvpStackCardHeader").length!==1;var m=t.find(".sapOvpExtendedBarListHBox,.sapOvpBarCondensedList,.sapOvpObjectListItem,.sapOvpStandardListItem").length===0;if(g&&m){for(a=0;a<f.length;a++){if(!f[a].id.includes(u)&&!f[a].id.includes("sapOvpCardAdditionalActions")){e+=f[a].id+" "}}}if(t.hasClass("sapOvpCardHeader")){var v=t.find(".cardHeaderText");if(v.length!==0){for(var a=0;a<v.length;a++){if(e.indexOf(v[a].id)===-1){e+=v[a].id+" "}}}}if(e.length){t.attr("aria-labelledby",e)}if(t.prop("nodeName")==="LI"&&t.find(".linkListHasPopover").length!==0){if(t.find("#hasDetails").length===0){t.append("<div id='hasDetails' hidden>"+s.getText("HAS_DETAILS")+"</div>");t.attr("aria-describedby","hasDetails")}}var C=t.attr("id");if(C&&C.indexOf("ovpTable")!=-1&&t.find("[role='Link']")&&!t.hasClass("sapUiCompSmartLink")){var L=t.closest("td").attr("data-sap-ui-column"),S=t.closest("tbody").siblings().children().filter("tr").children();for(var a=0;a<S.length;a++){if(S[a].getAttribute("data-sap-ui")==L&&S[a].hasChildNodes("span")){var E=S[a].firstElementChild.getAttribute("id");t.attr("aria-labelledby",E)}}}}};l.prototype.layoutFocusHandler=function(t){if(jQuery(t.relatedTarget).hasClass("easyScanLayoutItemWrapper")){return}if(this.sLastFocusableCard){this.sLastFocusableCard=jQuery(this.sLastFocusableCard);if(!this.sLastFocusableCard.is(this.lastFocussedElement)&&t.relatedTarget){this.sLastFocusableCard.focus();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard}else{this.lastFocussedElement=undefined}return}this.jqElement.find(".easyScanLayoutItemWrapper").first().focus();this.sLastFocusableCard=this.jqElement.find(".easyScanLayoutItemWrapper").first();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard};l.prototype.layoutClickHandler=function(t){if(t&&t.target&&t.target.getAttribute("id")&&t.target.getAttribute("id").indexOf("mainView")!==-1){if(this.sLastFocusableCard){this.sLastFocusableCard.focus();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard;return}this.jqElement.find(".easyScanLayoutItemWrapper").first().focus();this.sLastFocusableCard=this.jqElement.find(".easyScanLayoutItemWrapper").first();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard}};l.prototype.ctrlArrowHandler=function(t,a){var e=this.layoutUtil.dashboardLayoutModel.getCardById(a),s=t.dashboardLayout.row,o=e.dashboardLayout.row,r=e.dashboardLayout.column,i=[],n;if(o>s&&e.dashboardLayout.rowSpan>=t.dashboardLayout.rowSpan){n=s+e.dashboardLayout.rowSpan}else{n=o}this.layoutUtil.dashboardLayoutModel._arrangeCards(t,{row:n,column:r},"drag",i);this.layoutUtil.dashboardLayoutModel._removeSpaceBeforeCard(i);this.layoutUtil._positionCards(this.layoutModel.aCards);this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:i})};l.prototype.shiftArrowHandler=function(t,a,e){if(t.template==="sap.ovp.cards.stack"){return}this.resizeStartHandler(t,e);var s=this.layoutUtil.calculateCardProperties(t.id),o=s.leastHeight+2*this.layoutUtil.CARD_BORDER_PX,r=Math.ceil(o/this.layoutUtil.getRowHeightPx());if(a.rowSpan<=r){a.rowSpan=r;a.showOnlyHeader=true;e.classList.add("sapOvpMinHeightContainer")}else{a.showOnlyHeader=false;e.classList.remove("sapOvpMinHeightContainer")}var i=this.layoutUtil.dashboardLayoutModel.resizeCard(t.id,a,true,this.layoutUtil.dragOrResizeChanges);this.resizeStopHandler(i.resizeCard,e)};l.prototype.resizeStartHandler=function(t,a){this.layoutUtil.dragOrResizeChanges=[];this.layoutUtil.resizeStartCard={cardId:t.id,rowSpan:t.dashboardLayout.rowSpan,colSpan:t.dashboardLayout.colSpan,maxColSpan:t.dashboardLayout.maxColSpan,noOfItems:t.dashboardLayout.noOfItems,autoSpan:t.dashboardLayout.autoSpan,showOnlyHeader:t.dashboardLayout.showOnlyHeader};a.classList.add("sapOvpCardResize");t.dashboardLayout.autoSpan=false};l.prototype.resizeStopHandler=function(t,a){a.classList.remove("sapOvpCardResize");a.style.zIndex="auto";this.layoutUtil._sizeCard(t);this.layoutUtil._positionCards(this.layoutModel.aCards);t.dashboardLayout.maxColSpan=t.dashboardLayout.colSpan;this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:t.id,dashboardLayout:{rowSpan:t.dashboardLayout.rowSpan,oldRowSpan:this.layoutUtil.resizeStartCard.rowSpan,colSpan:t.dashboardLayout.colSpan,oldColSpan:this.layoutUtil.resizeStartCard.colSpan,maxColSpan:t.dashboardLayout.maxColSpan,oldMaxColSpan:this.layoutUtil.resizeStartCard.maxColSpan,noOfItems:t.dashboardLayout.noOfItems,oldNoOfItems:this.layoutUtil.resizeStartCard.noOfItems,autoSpan:t.dashboardLayout.autoSpan,oldAutoSpan:this.layoutUtil.resizeStartCard.autoSpan,showOnlyHeader:t.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:this.layoutUtil.resizeStartCard.showOnlyHeader}},isUserDependent:true});this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges})};l.prototype.keyUpHandler=function(t){switch(t.keyCode){case this.keyCodes.SPACE:this.spacebarHandler(t);break;case this.keyCodes.F6:if(t.shiftKey){var a=document.getElementsByClassName("sapUshellEasyScanLayoutInner");if(a[0].firstElementChild){document.getElementById(a[0].firstElementChild.id).focus()}this.handleScrollBar(true)}break;default:break}};l.prototype.keyDownHandler=function(t){var a=document.activeElement,e=this.layoutUtil.getCardId(a.id),s=Object.assign([],this.layoutModel.aCards),o=this.layoutModel.getCardById(e),r=this.layoutModel.iColCount,d={},l,u,h,p,c,y,f,b,g=n.getConfiguration().getRTL(),m=jQuery(document.activeElement);this.layoutModel._sortCardsByRow(s);for(var v=1;v<=r;v++){d[v]=[]}for(var C=0;C<s.length;C++){l=s[C].dashboardLayout.column;u=s[C].dashboardLayout.colSpan;if(u===1){d[l].push(s[C])}else{for(var L=l;L<l+u;L++){d[L].push(s[C])}}}if(o){p=this.getCardPosition(e,d[o.dashboardLayout.column])}if(this.layoutUtil.getCards().length===0){this.sLastFocusableCard=null}switch(t.keyCode){case this.keyCodes.TAB:if(t.shiftKey){this.shiftTabButtonHandler(t)}else{this.tabButtonHandler(t)}break;case this.keyCodes.F6:t.stopImmediatePropagation();if(t.shiftKey){this.bIgnoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus();i.handleF6GroupNavigation(t);var S=document.activeElement;this.sCurrentFocusId=S.id;if(this.sCurrentFocusId){document.getElementById(this.sCurrentFocusId).focus()}}else{this.bIgnoreSelfFocus=true;var E=this.jqElement.scrollTop();this.jqElement.find(".after").focus();i.handleF6GroupNavigation(t);this.jqElement.scrollTop(E);var I=document.getElementById("shell-header")&&document.getElementById("shell-header").firstChild;var F=I&&I.firstChild;if(F&&F.tabIndex===0){document.getElementById(F.id).focus()}this.handleScrollBar(true)}break;case this.keyCodes.F7:t.preventDefault();if(m.hasClass("easyScanLayoutItemWrapper")){m.find(":sapTabbable").first().focus()}else{m.closest(".easyScanLayoutItemWrapper").focus()}break;case this.keyCodes.ARROW_UP:t.preventDefault();h=o.dashboardLayout.column;p--;c=d[h][p]&&d[h][p].id;if(c&&t.ctrlKey){this.ctrlArrowHandler(o,c);this.setFocusOnCard(e)}else if(t.shiftKey){b={rowSpan:o.dashboardLayout.rowSpan-3,colSpan:o.dashboardLayout.colSpan};this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else if(m&&m.hasClass("easyScanLayoutItemWrapper")){this.setFocusOnCard(c);this.handleScrollBar(false)}break;case this.keyCodes.ARROW_DOWN:t.preventDefault();h=o.dashboardLayout.column;p++;c=d[h][p]&&d[h][p].id;if(c&&t.ctrlKey){this.ctrlArrowHandler(o,c);this.setFocusOnCard(e)}else if(t.shiftKey){if((o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==="carousel"&&o.dashboardLayout.rowSpan>=45){return}b={rowSpan:o.dashboardLayout.rowSpan+3,colSpan:o.dashboardLayout.colSpan};this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else{this.setFocusOnCard(c)}break;case this.keyCodes.ARROW_LEFT:var O=jQuery(document.activeElement);if(!O.hasClass("easyScanLayoutItemWrapper")){return}t.preventDefault();h=o.dashboardLayout.column;h--;if(!d[h]||!d[h][p]){do{if(h===0){h=r;p--;break}if(p<0){break}h--}while(!d[h]||!d[h][p])}c=d[h][p]&&d[h][p].id;if(c&&t.ctrlKey){this.ctrlArrowHandler(o,c);this.setFocusOnCard(e)}else if(t.shiftKey){if(g){if(o.template==="sap.ovp.cards.list"&&o.dashboardLayout.colSpan===2||(o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==="carousel"&&o.dashboardLayout.colSpan===3){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan+1}}else{if(o.dashboardLayout.colSpan===1){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan-1}}this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else{this.setFocusInCaseOfSpace(o,"Left");t.stopImmediatePropagation()}break;case this.keyCodes.ARROW_RIGHT:t.preventDefault();h=o.dashboardLayout.column+o.dashboardLayout.colSpan;if(!d[h]||!d[h][p]){do{if(h>r){h=1;p++;break}h++}while(!d[h]||!d[h][p])}c=d[h][p]&&d[h][p].id;if(c&&t.ctrlKey){this.ctrlArrowHandler(o,c);this.setFocusOnCard(e)}else if(t.shiftKey){if(g){if(o.dashboardLayout.colSpan===1){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan-1}}else{if(o.template==="sap.ovp.cards.list"&&o.dashboardLayout.colSpan===2||(o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==="carousel"&&o.dashboardLayout.colSpan===3){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan+1}}this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else{this.setFocusInCaseOfSpace(o,"Right");t.stopImmediatePropagation()}break;case this.keyCodes.PAGE_UP:t.preventDefault();h=o.dashboardLayout.column;if(t.altKey==true){h===1?p=0:h=1;c=d[h][p]&&d[h][p].id}else{y=d[h].length-1;for(var v=y;v>0;v--){f=document.getElementById(this.layoutUtil.getCardDomId(d[h][v].id));if(f.getBoundingClientRect().bottom<0){c=d[h][v].id;break}}if(!c){c=d[h][0].id}}this.setFocusOnCard(c);break;case this.keyCodes.PAGE_DOWN:t.preventDefault();h=o.dashboardLayout.column;if(t.altKey==true){c=h+o.dashboardLayout.colSpan>r?s[s.length-1].id:d[r][p]&&d[r][p].id}else{var D=jQuery(window).height();y=d[h].length;for(var v=0;v<y;v++){f=document.getElementById(this.layoutUtil.getCardDomId(d[h][v].id));if(f.getBoundingClientRect().top>D){c=d[h][v].id;break}}if(!c){c=d[h][y-1].id}}this.setFocusOnCard(c);break;case this.keyCodes.HOME:t.preventDefault();h=o.dashboardLayout.column;if(t.ctrlKey==true){p===0?h=1:p=0}else{h===1?p=0:h=1}c=d[h][p]&&d[h][p].id;this.setFocusOnCard(c);break;case this.keyCodes.END:t.preventDefault();h=o.dashboardLayout.column;if(t.ctrlKey==true){var w=d[h].length-1;c=w===p?s[s.length-1].id:d[h][w]&&d[h][w].id}else{c=h+o.dashboardLayout.colSpan>r?s[s.length-1].id:d[r][p]&&d[r][p].id}this.setFocusOnCard(c);break;case this.keyCodes.ENTER:t.stopImmediatePropagation();this.spacebarHandler(t);break;default:break}};l.prototype.handleScrollBar=function(t){var a=this.layoutUtil.componentDomId+"--ovpMain";if(a){var e=n.byId(a);if(e){setTimeout(function(){var a=e.getScrollDelegate();if(a){var s=a.getScrollTop();var o=document.activeElement.getBoundingClientRect().top;var r=t?0:s-o-32;a.scrollTo(0,r)}},0)}}};l.prototype.setFocusInCaseOfSpace=function(t,a){var e=Object.assign([],this.layoutModel.aCards),s=this.layoutUtil.ariaPos,o=s[t.id],r=e.filter(function(t){return a==="Right"?s[t.id]===o+1:s[t.id]===o-1},s);this.setFocusOnCard(r[0]&&r[0].id)};l.prototype.setFocusOnCard=function(t){if(t){var a=document.getElementById(this.layoutUtil.getCardDomId(t));a&&a.focus();this.sLastFocusableCard=a;this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard}};l.prototype.getCardPosition=function(t,a){for(var e=0;e<a.length;e++){if(a[e].id===t){break}}return e};l.prototype.tabButtonHandler=function(t){var a=jQuery(document.activeElement);this.lastFocussedElement=a;if(a.hasClass("easyScanLayoutItemWrapper")){return}var e=a.closest(".easyScanLayoutItemWrapper");if(!e.length){return}var s=e.find(jQuery(".lastElement"));if(a.is(s)){t.stopPropagation();t.stopImmediatePropagation();var o=this.jqElement.scrollTop();this._ignoreSelfFocus=true;this.jqElement.find(".after").focus();this.jqElement.scrollTop(o)}};l.prototype.shiftTabButtonHandler=function(t){var a=jQuery(document.activeElement);if(a.hasClass("after")&&this.lastFocussedElement){this.lastFocussedElement.focus();return}if(!a.hasClass("easyScanLayoutItemWrapper")){return}this._ignoreSelfFocus=true;this.lastFocussedElement=a;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus()};l.prototype.afterFocusHandler=function(t){t.stopImmediatePropagation();if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return}var a,e;if(this.lastFocussedElement&&this.lastFocussedElement.hasClass("lastElement")){a=this.jqElement.find(this.lastFocussedElement.parent());e=a.find(":sapTabbable").last()}else if(this.lastFocussedElement&&this.lastFocussedElement.hasClass("easyScanLayoutItemWrapper")){e=this.lastFocussedElement}else{a=this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first();e=a.find(":sapTabbable").last()}if(!e.length){e=a}e.focus()};return d});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/DashboardLayoutModel", ["sap/ovp/cards/CommonUtils","sap/base/util/merge"],function(a,o){"use strict";var t=function(a,o,t,r){this.uiModel=a;this.setColCount(o);this.aCards=[];this.oLayoutVars=null;this.iDisplaceRow=null;this.iDummyRow=999;this.iRowHeightPx=t;this.iCardBorderPx=r};t.prototype.setColCount=function(a){if(!a){this.iColCount=5}else if(a!==this.iColCount){this.iColCount=a}};t.prototype.setLayoutVars=function(a){if(Array.isArray(a)&&a.length>0){this.oLayoutVars=a}this._buildGrid()};t.prototype.updateCardVisibility=function(a){var o,t;function r(o){return o.id===a[s].id}for(var s=0;s<a.length;s++){o=this.oLayoutVars.filter(r);t=this.aCards.filter(r);if(!a[s].visibility){o[0].dashboardLayout["C"+this.iColCount].row=this._findHighestOccupiedRow();t[0].dashboardLayout.row=o[0].dashboardLayout["C"+this.iColCount].row}o[0].visibility=a[s].visibility;t[0].dashboardLayout.visible=a[s].visibility}};t.prototype.getColCount=function(){return this.iColCount};t.prototype.getCards=function(a){if(this.aCards.length===0||a&&a!==this.iColCount){if(a){this.setColCount(a)}this._buildGrid()}return this.aCards};t.prototype.getCardById=function(a){var o=null,t=0;for(t=0;t<this.aCards.length;t++){o=this.aCards[t];if(o.id===a){break}}return o};t.prototype.getLayoutVariants4Pers=function(){return JSON.parse(JSON.stringify(this.oLayoutVars))};t.prototype._readVariants=function(){var a,o,t=this.uiModel.getProperty("/dashboardLayout");function r(a){return a.id===o}if(!!t){for(var s in t){if(t.hasOwnProperty(s)&&t[s]){a=t[s];a.id=s;for(o in a){var e=this.oLayoutVars.filter(r);if(e.length>0){var d="C"+ +a.id.replace(/[^0-9\.]/g,"");var i=e[0].dashboardLayout[d];var n=this.aCards.filter(r);if(Array.isArray(n)&&n.length>0){if(i){i.row=a[o].row;i.col=a[o].col;i.colSpan=n[0].template==="sap.ovp.cards.stack"?1:Math.min(a[o].colSpan,this.iColCount);i.maxColSpan=a[o].maxColSpan;i.noOfItems=a[o].rowSpan}else{e[0].dashboardLayout[d]={row:a[o].row,col:a[o].col,colSpan:n[0].template==="sap.ovp.cards.stack"?1:Math.min(a[o].colSpan,this.iColCount),maxColSpan:a[o].maxColSpan,noOfItems:a[o].rowSpan,autoSpan:n[0].template==="sap.ovp.cards.stack"?false:true}}e[0].visibility=a[o].visible?a[o].visible:true}}}}}}};t.prototype.resetToManifest=function(){this.oLayoutVars=null;for(var a=0;a<this.aCards.length;a++){this.aCards[a].dashboardLayout={}}this._buildGrid(true)};t.prototype._buildGrid=function(a){if(this.aCards.length===0||a){this.aCards=o([],this.uiModel.getProperty("/cards"))}if(a||!this.oLayoutVars||this.oLayoutVars[0]&&!this.oLayoutVars[0].dashboardLayout){this.oLayoutVars=[];this._sliceSequenceSausage()}else{this._sliceSequenceSausage(this.oLayoutVars)}this._readVariants()};t.prototype._displaceCardToEnd=function(a){a.dashboardLayout.column=1;if(!this.iDisplaceRow){this.iDisplaceRow=this._findHighestOccupiedRow()}a.dashboardLayout.row=this.iDisplaceRow;this.iDisplaceRow+=a.dashboardLayout.rowSpan;var o=this.oLayoutVars.filter(function(o){return o.id===a.id});if(o.length>0){o[0].dashboardLayout["C"+this.iColCount].row=a.dashboardLayout.row}};t.prototype._setCardSpanFromDefault=function(a){if(!a.dashboardLayout){a.dashboardLayout={}}var o=this._getDefaultCardItemHeightAndCount(a);if(!a.settings.defaultSpan){if(a.template!=="sap.ovp.cards.linklist"&&a.template!=="sap.ovp.cards.v4.linklist"){a.dashboardLayout.rowSpan=12}else if(a.template==="sap.ovp.cards.linklist"||a.template==="sap.ovp.cards.v4.linklist"){a.dashboardLayout.rowSpan=1}a.dashboardLayout.colSpan=1;a.dashboardLayout.maxColSpan=1;a.dashboardLayout.noOfItems=o.noOfItems;a.dashboardLayout.autoSpan=a.template==="sap.ovp.cards.stack"?false:true;a.dashboardLayout.showOnlyHeader=false}else{if(a.settings.defaultSpan.showOnlyHeader){a.dashboardLayout.rowSpan=Math.ceil((o.headerHeight+2*this.iCardBorderPx)/this.iRowHeightPx);a.dashboardLayout.noOfItems=0;a.dashboardLayout.autoSpan=false;a.dashboardLayout.showOnlyHeader=true}else{if(a.template==="sap.ovp.cards.linklist"||a.template==="sap.ovp.cards.v4.linklist"){a.dashboardLayout.rowSpan=a.settings.defaultSpan.rows?a.settings.defaultSpan.rows:1;a.dashboardLayout.autoSpan=false}else{a.dashboardLayout.rowSpan=8;a.dashboardLayout.autoSpan=true}a.dashboardLayout.noOfItems=a.settings.defaultSpan.rows?a.settings.defaultSpan.rows:o.noOfItems;a.dashboardLayout.showOnlyHeader=false}if(a.template==="sap.ovp.cards.stack"){a.dashboardLayout.colSpan=1;a.dashboardLayout.autoSpan=false}else{a.dashboardLayout.colSpan=a.settings.defaultSpan.cols?Math.min(a.settings.defaultSpan.cols,this.iColCount):1}a.dashboardLayout.maxColSpan=a.settings.defaultSpan.cols?a.settings.defaultSpan.cols:1}a.dashboardLayout.visible=true;a.dashboardLayout.itemHeight=o.itemHeight;a.dashboardLayout.headerHeight=o.headerHeight};t.prototype._sliceSequenceSausage=function(a){var o=0,t=0,r=0,s=0,e=0,d={},i=[],n="C"+this.iColCount,u;for(o=0;o<this.iColCount;o++){i.push({col:o+1,rows:0})}function h(a){return a.id===d.id}function l(a,o){return o!==a}for(o=0;o<this.aCards.length;o++){d=this.aCards[o];if(!d.dashboardLayout){d.dashboardLayout={}}if(!a){this._setCardSpanFromDefault(d)}else{var y=a.filter(h);if(y.length>0){var p=y[0].dashboardLayout,L=p[n],b=Object.keys(p),c=b.filter(l.bind(this,n));if(c.length>0){u=p[c];if(u){this._mergeLayoutVariants(d.dashboardLayout,u)}}else{this._mergeLayoutVariants(d.dashboardLayout,L);continue}}else{d.dashboardLayout.row=this.iDummyRow;d.dashboardLayout.column=1;var f={};var C={row:d.dashboardLayout.row,col:d.dashboardLayout.column,rowSpan:d.dashboardLayout.rowSpan,colSpan:d.dashboardLayout.colSpan,maxColSpan:d.dashboardLayout.maxColSpan,noOfItems:d.dashboardLayout.noOfItems,autoSpan:d.dashboardLayout.autoSpan,showOnlyHeader:d.dashboardLayout.showOnlyHeader};f[n]=C;a.push({id:d.id,visibility:d.dashboardLayout.visible,selectedKey:d.settings.selectedKey,dashboardLayout:f});continue}}d.dashboardLayout.colSpan=d.dashboardLayout.maxColSpan;d.dashboardLayout.colSpan=d.dashboardLayout.colSpan>this.iColCount?this.iColCount:d.dashboardLayout.colSpan;r=s<this.iColCount?s+1:1;if(r+d.dashboardLayout.colSpan-1>this.iColCount){d.dashboardLayout.colSpan=this.iColCount-r+1}s=r+d.dashboardLayout.colSpan-1;d.dashboardLayout.column=r;e=0;if(Array.isArray(y)&&y.length>0&&!y[0].visibility){d.dashboardLayout.row=this.iDummyRow}else{for(t=d.dashboardLayout.column;t<d.dashboardLayout.column+d.dashboardLayout.colSpan;t++){if(i[t-1].rows>e){e=i[t-1].rows}}d.dashboardLayout.row=e+1;for(t=d.dashboardLayout.column;t<d.dashboardLayout.column+d.dashboardLayout.colSpan;t++){i[t-1].rows=e+d.dashboardLayout.rowSpan}}}this.extractCurrentLayoutVariant()};t.prototype._mergeLayoutVariants=function(a,o){if(o.rowSpan){a.rowSpan=o.rowSpan}if(o.colSpan){a.colSpan=o.colSpan}if(o.maxColSpan){a.maxColSpan=o.maxColSpan}if(o.noOfItems){a.noOfItems=o.noOfItems}if(o.hasOwnProperty("autoSpan")){a.autoSpan=o.autoSpan}if(o.row){a.row=o.row}if(o.col){a.column=o.col}if(o.hasOwnProperty("showOnlyHeader")){a.showOnlyHeader=o.showOnlyHeader}};t.prototype._sortCardsByRow=function(a){a.sort(function(a,o){if(!a.dashboardLayout&&o.dashboardLayout){return 1}else if(a.dashboardLayout&&!o.dashboardLayout){return-1}if(a.dashboardLayout.column&&a.dashboardLayout.row&&a.dashboardLayout.row===o.dashboardLayout.row){if(a.dashboardLayout.column<o.dashboardLayout.column){return-1}else if(a.dashboardLayout.column>o.dashboardLayout.column){return 1}}else if(a.dashboardLayout.row){return a.dashboardLayout.row-o.dashboardLayout.row}else{return 0}})};t.prototype.resizeCard=function(a,o,t,r){var s=this.getCardById(a);if(!s){return[]}var e=o.colSpan-s.dashboardLayout.colSpan;var d=o.rowSpan-s.dashboardLayout.rowSpan;s.dashboardLayout.showOnlyHeader=o.showOnlyHeader;if(e===0&&d===0){return{resizeCard:s,affectedCards:[]}}else if(t&&s.dashboardLayout.autoSpan){s.dashboardLayout.autoSpan=false}if(!t||d&&e===0){this._arrangeCards(s,{row:o.rowSpan,column:s.dashboardLayout.colSpan},"resize",r)}else{this._arrangeCards(s,{row:o.rowSpan,column:o.colSpan},"resize",r)}return{resizeCard:s,affectedCards:this._removeSpaceBeforeCard(r)}};t.prototype._removeSpaceBeforeCard=function(a){this._sortCardsByRow(this.aCards);var o={};for(var t=1;t<=this.iColCount;t++){o[t]=1}for(var r=0;r<this.aCards.length;r++){var s=this.aCards[r].dashboardLayout.column,e=this.aCards[r].dashboardLayout.column+this.aCards[r].dashboardLayout.colSpan-1;if(this.aCards[r].dashboardLayout.visible){if(e>this.iColCount){e=this.iColCount;var d=this.iColCount-this.aCards[r].dashboardLayout.column+1;if(a){a.push({changeType:"dragOrResize",content:{cardId:this.aCards[r].id,dashboardLayout:{colSpan:d,oldColSpan:this.aCards[r].dashboardLayout.colSpan}},isUserDependent:true})}this.aCards[r].dashboardLayout.colSpan=d}if(this.aCards[r].dashboardLayout.colSpan>1){var i=[];for(var n=s;n<=e;n++){i.push(o[n])}var u=Math.max.apply(Math,i);for(var h=s;h<=e;h++){o[h]=u+this.aCards[r].dashboardLayout.rowSpan}if(a&&u!==this.aCards[r].dashboardLayout.row){a.push({changeType:"dragOrResize",content:{cardId:this.aCards[r].id,dashboardLayout:{row:u,oldRow:this.aCards[r].dashboardLayout.row}},isUserDependent:true})}this.aCards[r].dashboardLayout.row=u}else{if(this.aCards[r].dashboardLayout.row!==o[s]){if(a){a.push({changeType:"dragOrResize",content:{cardId:this.aCards[r].id,dashboardLayout:{row:o[s],oldRow:this.aCards[r].dashboardLayout.row}},isUserDependent:true})}this.aCards[r].dashboardLayout.row=o[s]}o[s]=this.aCards[r].dashboardLayout.row+this.aCards[r].dashboardLayout.rowSpan}}}return this.aCards};t.prototype._arrangeCards=function(a,t,r,s){var e=o({},a);var d=false;if(r==="drag"&&a.dashboardLayout.column===t.column&&t.row!==a.dashboardLayout.row){d=true}this._sortCardsByRow(this.aCards);var i=[];var n=false;var u;if(r==="drag"){a.dashboardLayout.row=t.row;a.dashboardLayout.column=t.column}else if(r==="resize"){a.dashboardLayout.rowSpan=t.row;a.dashboardLayout.colSpan=t.column}i.push(a);for(var h=0;h<i.length;h++){for(var l=0;l<this.aCards.length;l++){if(i[h].id===this.aCards[l].id||!i[h].dashboardLayout.visible){continue}else{n=this._checkOverlapOfCards(i[h],this.aCards[l]);if(n===true){if(d){if(t.row<e.dashboardLayout.row&&t.row===this.aCards[l].dashboardLayout.row){i[h].dashboardLayout.row=this.aCards[l].dashboardLayout.row;u=this.aCards[l].dashboardLayout.row;this.aCards[l].dashboardLayout.row=i[h].dashboardLayout.row+i[h].dashboardLayout.rowSpan;if(s){s.push({changeType:"dragOrResize",content:{cardId:this.aCards[l].id,dashboardLayout:{row:this.aCards[l].dashboardLayout.row,oldRow:u}},isUserDependent:true})}}else if(t.row>e.dashboardLayout.row+this.aCards[l].dashboardLayout.rowSpan){u=this.aCards[l].dashboardLayout.row;this.aCards[l].dashboardLayout.row=e.dashboardLayout.row;i[h].dashboardLayout.row=this.aCards[l].dashboardLayout.row+this.aCards[l].dashboardLayout.rowSpan;i.push(i[h]);if(s){s.push({changeType:"dragOrResize",content:{cardId:this.aCards[l].id,dashboardLayout:{row:this.aCards[l].dashboardLayout.row,oldRow:u}},isUserDependent:true})}}}else{u=this.aCards[l].dashboardLayout.row;this.aCards[l].dashboardLayout.row=i[h].dashboardLayout.row+i[h].dashboardLayout.rowSpan;i.push(this.aCards[l]);if(s){s.push({changeType:"dragOrResize",content:{cardId:this.aCards[l].id,dashboardLayout:{row:this.aCards[l].dashboardLayout.row,oldRow:u}},isUserDependent:true})}}}}}}};t.prototype._checkOverlapOfCards=function(a,o){var t=a.dashboardLayout.row;var r=a.dashboardLayout.row+a.dashboardLayout.rowSpan;var s=a.dashboardLayout.column;var e=a.dashboardLayout.column+a.dashboardLayout.colSpan;var d=o.dashboardLayout.row;var i=o.dashboardLayout.row+o.dashboardLayout.rowSpan;var n=o.dashboardLayout.column;var u=o.dashboardLayout.column+o.dashboardLayout.colSpan;var h=false,l=false;if(n>=s&&n<e||u>s&&u<=e||n<=s&&u>=e){h=true}if(d>=t&&d<r||i>t&&i<=r||d<=t&&i>=r){l=true}return h&&l};t.prototype.extractCurrentLayoutVariant=function(){var a=0;var o={};var t=[];function r(a){return a.id===o.id}for(a=0;a<this.aCards.length;a++){o=this.aCards[a];t=this.oLayoutVars.filter(r);var s={};var e={row:o.dashboardLayout.row,col:o.dashboardLayout.column,rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan,maxColSpan:o.dashboardLayout.maxColSpan,noOfItems:o.dashboardLayout.noOfItems,autoSpan:o.dashboardLayout.autoSpan,showOnlyHeader:o.dashboardLayout.showOnlyHeader};s["C"+this.iColCount]=e;if(!(Array.isArray(t)&&t.length!==0)){this.oLayoutVars.push({id:o.id,visibility:o.dashboardLayout.visible,selectedKey:o.settings.selectedKey,dashboardLayout:s})}else{t[0].selectedKey=o.settings.selectedKey||t[0].selectedKey;t[0].dashboardLayout={};t[0].dashboardLayout["C"+this.iColCount]=e}}};t.prototype._findHighestOccupiedRow=function(){var a=0,o=[];function t(a){return a.dashboardLayout.column===s}function r(a,o,t){return a.dashboardLayout.row===Math.max.apply(Math,t.map(function(a){return a.dashboardLayout.row}))}for(var s=1;s<=this.iColCount;s++){var e=this.aCards.filter(t);if(!!e){var d=e.filter(r)[0];if(!!d){var i=d.dashboardLayout.row===undefined?0:+d.dashboardLayout.row;var n=d.dashboardLayout.rowSpan===undefined?0:+d.dashboardLayout.rowSpan;o.push(i+n)}}}a=Math.max.apply(Math,o.map(function(a){return a}));return a};t.prototype._getDefaultCardItemHeightAndCount=function(o){var t=a._setCardpropertyDensityAttribute();var r={List_condensed:{itemLength:5,itemHeight:64},List_condensed_imageSupported_cozy:{itemLength:5,itemHeight:72},List_condensed_imageSupported_compact:{itemLength:5,itemHeight:60},List_extended:{itemLength:3,itemHeight:97},List_condensed_bar:{itemLength:5,itemHeight:65},List_extended_bar:{itemLength:3,itemHeight:95},Table:{itemLength:5,itemHeight:48},Linklist:{itemLength:6,itemHeight:0}};var s={KPIHeader:{1:{1:158,2:174},2:{1:179,2:195},3:{1:201,2:223}},NormalHeader:{1:{1:82,2:98},2:{1:103,2:119},3:{1:125,2:141}}};var e=22;var d=21;var i=0;if(o){var n=o.template,u=o.settings.listType,h=o.settings.listFlavor,l=o.settings.imageSupported,y=0,p=0;if(n=="sap.ovp.cards.list"||n=="sap.ovp.cards.v4.list"){if(u=="extended"){if(h=="bar"){y=r["List_extended_bar"]["itemLength"];p=r["List_extended_bar"]["itemHeight"]}else{y=r["List_extended"]["itemLength"];p=r["List_extended"]["itemHeight"]}}else{if(h=="bar"){y=r["List_condensed_bar"]["itemLength"];p=r["List_condensed_bar"]["itemHeight"]}else{if(l==="true"){if(t==="cozy"){p=r["List_condensed_imageSupported_cozy"]["itemHeight"]}else{p=r["List_condensed_imageSupported_compact"]["itemHeight"]}}else{p=r["List_condensed"]["itemHeight"]}y=r["List_condensed"]["itemLength"]}}}else if(n=="sap.ovp.cards.table"||n=="sap.ovp.cards.v4.table"){y=r["Table"]["itemLength"];p=r["Table"]["itemHeight"]}else if(n==="sap.ovp.cards.linklist"||n.template==="sap.ovp.cards.v4.linklist"){y=r["Linklist"]["itemLength"];p=r["Linklist"]["itemHeight"]}var L=o.settings.defaultSpan&&o.settings.defaultSpan.minimumTitleRow?o.settings.defaultSpan.minimumTitleRow:1;var b=o.settings.defaultSpan&&o.settings.defaultSpan.minimumSubTitleRow?o.settings.defaultSpan.minimumSubTitleRow:1;var c=o.settings.dataPointAnnotationPath||o.settings.tabs&&o.settings.tabs[0].dataPointAnnotationPath?"KPIHeader":"NormalHeader";i=s[c][L][b];if(c==="KPIHeader"){if(o.settings.showFilterInHeader===true){i+=e}if(o.settings.showSortingInHeader===true){i+=d}}return{noOfItems:y,itemHeight:p,headerHeight:i}}};return t},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/DashboardLayoutRearrange", ["sap/ovp/ui/UIActions","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/cards/jUtils","sap/ui/core/Core"],function(t,a,jQuery,e,s,o,i){"use strict";var l=new s("OVP.ui.DashboardLayoutRearrange");var r=function(t){this.init(t)};r.prototype.init=function(a){a.beforeDragCallback=this._beforeDragHandler.bind(this);a.dragStartCallback=this._dragStartHandler.bind(this);a.dragMoveCallback=this._dragMoveHandler.bind(this);a.dragEndCallback=this._dragEndHandler.bind(this);a.resizeStartCallback=this._resizeStartHandler.bind(this);a.resizeMoveCallback=this._resizeMoveHandler.bind(this);a.resizeEndCallback=this._resizeEndHandler.bind(this);a.endCallback=this._endHandler.bind(this);this.placeHolderClass=a.placeHolderClass;this.layout=a.layout;this.settings=a;this.destroy();this.uiActions=new t(this.settings).enable();this.aCardsOrder=null;this.aCards=a.aCards;this.layoutUtil=a.layoutUtil;this.verticalMargin=null;this.horizontalMargin=null;this.top=null;this.left=null;this.width=null;this.layoutOffset=null;this.jqLayout=null;this.jqLayoutInner=null;this.isRTLEnabled=null;this.rowHeight=a.rowHeight;this.floaterData=null;this.resizeData={};this.updatedScrollTop=0;this.SCROLL_OFFSET=16};r.prototype.destroy=function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null}};r.prototype._resizeStartHandler=function(t,s){if(!a.system.desktop){return}if(this.layoutUtil&&this.layoutUtil.sLastFocusableCard){jQuery(this.layoutUtil.sLastFocusableCard).blur()}var o=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(s.id));if(o.template==="sap.ovp.cards.stack"||o.settings.stopResizing){return}this.layoutUtil.dragOrResizeChanges=[];this.layoutUtil.startResizeCardConfig=e([],this.layoutUtil.getCards());this.layoutUtil.resizeStartCard={cardId:o.id,rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan,maxColSpan:o.dashboardLayout.maxColSpan,noOfItems:o.dashboardLayout.noOfItems,autoSpan:o.dashboardLayout.autoSpan,showOnlyHeader:o.dashboardLayout.showOnlyHeader,row:o.dashboardLayout.row,column:o.dashboardLayout.column};if(window.getSelection){var i=window.getSelection();i.removeAllRanges()}s.classList.add("sapOvpCardResize");o.dashboardLayout.autoSpan=false;this.initCardsSettings()};r.prototype._resizeEndHandler=function(t,e){if(e){e.classList.remove("sapOvpCardResize");if(this.uiActions.isResizeX&&!this.uiActions.isResizeY&&e.classList.contains("sapOvpNotResizableLeftRight")){return}this.updatedScrollTop=0;e.style.zIndex="auto";var s=this.layoutUtil.changedCards.resizeCard;if(s){s.dashboardLayout.maxColSpan=s.dashboardLayout.colSpan;this.layoutUtil._sizeCard(s);this.layoutUtil.dragOrResizeChanges=[];var i=this.layoutUtil.getCards();var l=this.layoutUtil.startResizeCardConfig;for(var r=0;r<i.length;r++){var d=i[r];var h=n(l,d.id);var u=h[0];this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:d.id,dashboardLayout:{row:d.dashboardLayout.row,oldRow:u.dashboardLayout.row,column:d.dashboardLayout.column,oldColumn:u.dashboardLayout.column,rowSpan:d.dashboardLayout.rowSpan,oldRowSpan:u.dashboardLayout.rowSpan,colSpan:d.dashboardLayout.colSpan,oldColSpan:u.dashboardLayout.colSpan,maxColSpan:d.dashboardLayout.maxColSpan,oldMaxColSpan:u.dashboardLayout.maxColSpan,noOfItems:d.dashboardLayout.noOfItems,oldNoOfItems:u.dashboardLayout.noOfItems,autoSpan:d.dashboardLayout.autoSpan,oldAutoSpan:u.dashboardLayout.autoSpan,showOnlyHeader:d.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:u.dashboardLayout.showOnlyHeader}},isUserDependent:true})}}this.layoutUtil.changedCards={};if(a.system.desktop){document.querySelector("body").classList.remove("sapOVPDisableUserSelect","sapOVPDisableImageDrag")}jQuery(this.settings.wrapper).removeClass("dragAndDropMode");o.removeElementById("sapOvpOverlayDivForCursor");o.removeElementById("ovpResizeRubberBand");this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges});this.layoutUtil.setAriaPos();this.layoutUtil.startResizeCardConfig=[];if(window.getSelection){var p=window.getSelection();p.removeAllRanges()}}};r.prototype._resizeMoveHandler=function(t){if(!a.system.desktop){return}if(t.element){var e,s,o,i,r=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(t.element.id));if(r.template==="sap.ovp.cards.stack"||r.settings.stopResizing){return}var n=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var d=n.offsetHeight;var h=n.getBoundingClientRect();if(t.evt.clientY-n.offsetTop+this.SCROLL_OFFSET>d){n.scrollTop=n.scrollTop+this.SCROLL_OFFSET;this.updatedScrollTop+=this.SCROLL_OFFSET}else if(t.evt.clientY-n.offsetTop<h.top+this.SCROLL_OFFSET&&n.scrollTop!==0){n.scrollTop=n.scrollTop-this.SCROLL_OFFSET;this.updatedScrollTop-=this.SCROLL_OFFSET}s=this.layoutUtil.calculateCardProperties(r.id);e=this._calculateMinimumCardHeight(t);if(e.ghostWidthCursor<=this.layoutUtil.getColWidthPx()&&this.uiActions.isResizeX&&!this.uiActions.isResizeY){return}i=e.ghostHeightCursor;o=e.ghostWidthCursor<=this.layoutUtil.getColWidthPx()?this.layoutUtil.getColWidthPx():e.ghostWidthCursor;if(!this.uiActions.isResizeY){if(t.element.classList.contains("sapOvpNotResizableLeftRight")||t.element.classList.contains("sapOvpNotResizableRight")&&e.ghostWidthCursor>r.dashboardLayout.colSpan*this.layoutUtil.getColWidthPx()){return}else{l.info("Not a valid scenario")}if((r.template==="sap.ovp.cards.list"||r.template==="sap.ovp.cards.v4.list")&&o>this.layoutUtil.getColWidthPx()*2||(r.template==="sap.ovp.cards.linklist"||r.template==="sap.ovp.cards.v4.linklist")&&r.settings.listFlavor==="carousel"&&o>this.layoutUtil.getColWidthPx()*3){return}}if((r.template==="sap.ovp.cards.linklist"||r.template==="sap.ovp.cards.v4.linklist")&&r.settings.listFlavor==="carousel"&&i>this.layoutUtil.getRowHeightPx()*45){t.element.classList.add("sapOvpNotResizableDown");return}var u=s.leastHeight+2*this.layoutUtil.CARD_BORDER_PX;var p=s.minCardHeight+2*this.layoutUtil.CARD_BORDER_PX;t.element.classList.remove("sapOvpMinHeightContainer");if(i<=u){i=u;t.element.classList.add("sapOvpMinHeightContainer");this.resizeData.showOnlyHeader=true}else if(i>u&&i<=p){var y=(u+p)/2;if(i>y){i=p;this.resizeData.showOnlyHeader=false}else{i=u;t.element.classList.add("sapOvpMinHeightContainer");this.resizeData.showOnlyHeader=true}}else{if(!this.uiActions.isResizeX&&(r.template==="sap.ovp.cards.list"||r.template==="sap.ovp.cards.v4.list"||r.template==="sap.ovp.cards.table"||r.template==="sap.ovp.cards.v4.table")){var c=s.headerHeight+s.dropDownHeight+2*this.layoutUtil.CARD_BORDER_PX;var g=Math.round((i-c)/s.itemHeight);i=g*s.itemHeight+c}this.resizeData.showOnlyHeader=false}this._addOverLay(e.cursor);this.resizeData.colSpan=Math.round(o/this.layoutUtil.getColWidthPx());this.resizeData.rowSpan=Math.ceil(i/this.layoutUtil.getRowHeightPx());this.layoutUtil.updateCardSize(r.id,i,o,this.resizeData.rowSpan);this.showGhostWhileResize(t,r);if(this.resizeData.colSpan&&this.resizeData.rowSpan){this.layoutUtil.resizeCard(t.element.getAttribute("id"),this.resizeData,this.layoutUtil.dragOrResizeChanges)}this.resizeData={};this.layoutUtil.setKpiNumericContentWidth(t.element)}};r.prototype._beforeDragHandler=function(t,e){if(t.type==="mousedown"){t.preventDefault()}if(a.browser.mobile){this.selectableElemets=jQuery(e).find(".sapUiSelectable");this.selectableElemets.removeClass("sapUiSelectable")}jQuery(this.settings.wrapper).addClass("dragAndDropMode")};r.prototype._dragStartHandler=function(t,s){if(a.system.desktop){document.querySelector("body").classList.add("sapOVPDisableUserSelect","sapOVPDisableImageDrag")}if(this.layoutUtil&&this.layoutUtil.sLastFocusableCard){jQuery(this.layoutUtil.sLastFocusableCard).blur()}this.layoutUtil.dragOrResizeChanges=[];var o=this.layoutUtil.getCardId(s.id);var i=this.layoutUtil.dashboardLayoutModel.getCardById(o);this.layoutUtil.dragStartCardsConfig=e([],this.layoutUtil.getCards(this.columnCount));this.layoutUtil.dragStartCard={cardId:i.id,row:i.dashboardLayout.row,column:i.dashboardLayout.column,rowSpan:i.dashboardLayout.rowSpan,colSpan:i.dashboardLayout.colSpan,maxColSpan:i.dashboardLayout.maxColSpan,noOfItems:i.dashboardLayout.noOfItems,autoSpan:i.dashboardLayout.autoSpan,showOnlyHeader:i.dashboardLayout.showOnlyHeader};l.info(s);if(window.getSelection){var r=window.getSelection();r.removeAllRanges()}this.initCardsSettings();var n=s.children[0].getBoundingClientRect();this.floaterData={width:n.width,height:n.height,startLeft:n.left-this.layoutOffset.left,startTop:n.top-this.layoutOffset.top}};r.prototype._dragMoveHandler=function(t){if(t.element){var a=0;var e=0;var s=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var o=document.getElementsByClassName("sapFDynamicPageTitleWrapper")[0].offsetHeight;if(document.getElementsByClassName("sapUshellShellHeadSearchContainer")[0]){e=document.getElementsByClassName("sapUshellShellHeadSearchContainer")[0].offsetHeight}var i=s.offsetHeight;var l=s.getBoundingClientRect();var r;if(document.getElementsByClassName("sapFDynamicPageHeader")[0]){a=document.getElementsByClassName("sapFDynamicPageHeader")[0].offsetHeight}if(t.evt.clientY-s.offsetTop+this.SCROLL_OFFSET>i){s.scrollTop=s.scrollTop+this.SCROLL_OFFSET;r=s.scrollTop}else if(t.evt.clientY-s.offsetTop<l.top+this.SCROLL_OFFSET&&s.scrollTop!==0){s.scrollTop=s.scrollTop-this.SCROLL_OFFSET;r=s.scrollTop}else{r=s.scrollTop}this.floaterData.id=t.element.id;this.floaterData.left=t.clone.getBoundingClientRect().left;this.floaterData.top=t.clone.getBoundingClientRect().top+r-(o+a+e);var n=Math.round(this.floaterData.left/this.layoutUtil.getColWidthPx());var d={row:Math.round(this.floaterData.top/this.layoutUtil.getRowHeightPx())+1,column:this.isRTLEnabled?this.columnCount-n:n+1};d.row=d.row<=0?1:d.row;d.column=d.column<=1?1:d.column;var h=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(this.floaterData.id));if(d.column+h.dashboardLayout.colSpan>this.columnCount){d.column=this.columnCount-h.dashboardLayout.colSpan+1}this.floaterData.row=d.row;this.floaterData.column=d.column;jQuery.when(this.layoutUtil.dashboardLayoutModel._arrangeCards(h,this.floaterData,"drag",this.layoutUtil.dragOrResizeChanges)).done(function(){this.layoutUtil._positionCards(this.aCards);this.layoutUtil.dashboardLayoutModel._removeSpaceBeforeCard()}.bind(this));this.showGhostWhileDragMove({row:h.dashboardLayout.row,column:h.dashboardLayout.column},t)}};r.prototype._dragEndHandler=function(t,e,s){if(e){var i=e.getBoundingClientRect();var l=s.getBoundingClientRect();var r=window.getComputedStyle(s).transform.split(",");var d=i.top-l.top;var h=i.left-l.left;var u=parseInt(r[4],10)+h;var p=parseInt(r[5],10)+d;s.style[this.layoutUtil.cssVendorTransition]="transform 0.3s cubic-bezier(0.46, 0, 0.44, 1)";u=Math.abs(u)-8<0?0:u-8;p=Math.abs(p)-8<0?0:p-8;s.style[this.layoutUtil.cssVendorTransform]="translate3d("+u+"px, "+p+"px, 0px) ";this.layoutUtil._positionCards(this.aCards);jQuery(s).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(t){o.removeElementById("ovpDashboardLayoutMarker");this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.dragOrResizeChanges=[];var s=this.layoutUtil.getCards();var i=this.layoutUtil.dragStartCardsConfig;for(var l=0;l<s.length;l++){var r=s[l];var d=n(i,r.id);var h=d[0];this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:r.id,dashboardLayout:{row:r.dashboardLayout.row,oldRow:h.dashboardLayout.row,column:r.dashboardLayout.column,oldColumn:h.dashboardLayout.column,rowSpan:r.dashboardLayout.rowSpan,oldRowSpan:h.dashboardLayout.rowSpan,colSpan:r.dashboardLayout.colSpan,oldColSpan:h.dashboardLayout.colSpan,maxColSpan:r.dashboardLayout.maxColSpan,oldMaxColSpan:h.dashboardLayout.maxColSpan,noOfItems:r.dashboardLayout.noOfItems,oldNoOfItems:h.dashboardLayout.noOfItems,autoSpan:r.dashboardLayout.autoSpan,oldAutoSpan:h.dashboardLayout.autoSpan,showOnlyHeader:r.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:h.dashboardLayout.showOnlyHeader}},isUserDependent:true})}this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges});if(a.system.desktop){document.body.classList.remove("sapOVPDisableUserSelect");document.body.classList.remove("sapOVPDisableImageDrag")}jQuery(this.settings.wrapper).removeClass("dragAndDropMode");if(window.getSelection){var u=window.getSelection();u.removeAllRanges()}this.uiActions.removeClone();e.classList.remove(this.placeHolderClass);var p=this.layoutUtil.dashboardLayoutModel._findHighestOccupiedRow()+32;o.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayoutInner"),"height",p+"px");o.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayoutInner"),"zIndex","1");o.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayout"),"height",p+"px");this.layoutUtil.setAriaPos();this.layoutUtil.dragStartCardsConfig=[]}.bind(this))}};r.prototype._endHandler=function(t,e){l.info(e);if(a.browser.mobile&&this.selectableElemets){this.selectableElemets.addClass("sapUiSelectable")}};r.prototype.initCardsSettings=function(){this.jqLayout=this.layout.$();this.jqLayoutInner=this.jqLayout.children().first();var t=this.jqLayout.scrollTop();var a=this.jqLayoutInner.height();this.isRTLEnabled=i.getConfiguration().getRTL();this.aCardsOrder=[];this.layoutOffset=this.jqLayout.offset();this.corrY=this.jqLayout.get(0).getBoundingClientRect().top+this.jqLayout.scrollTop();this.corrX=this.layoutOffset.left;this.columnCount=this.layoutUtil.dashboardLayoutModel.getColCount();var e=this.layout.getVisibleLayoutItems();if(!e){return}function s(t){return t.$().parent()[0]}this.aCardsOrder=e.map(s);var o=this.jqLayoutInner.children().first();var l=this.isRTLEnabled?"margin-left":"margin-right";this.verticalMargin=parseInt(o.css(l),10);var r=this.aCardsOrder[0];var n=r.getBoundingClientRect();var d=this.jqLayoutInner[0].getBoundingClientRect();this.horizontalMargin=parseInt(jQuery(r).css("margin-bottom"),10);this.verticalMargin=this.horizontalMargin;this.top=n.top-d.top;this.left=n.left-d.left;this.width=r.offsetWidth;jQuery(this.aCardsOrder).css("position","absolute");this.drawLayout(this.aCardsOrder);this.jqLayoutInner.height(a);this.jqLayout.scrollTop(t)};r.prototype.drawLayout=function(t){function a(t){var a=jQuery(t).position();t.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";t.style[this.layoutUtil.cssVendorTransform]="translate3d("+a.left+","+a.top+", 0px) "}var e=t.length;if(e>0){for(var s=0;s<e;s++){requestAnimationFrame(a.bind(this,t[s]))}}};r.prototype.showGhostWhileDragMove=function(t,a){var e=document.getElementById("ovpDashboardLayoutMarker"),s=(t.column-1)*this.layoutUtil.getColWidthPx(),o={top:(t.row-1)*this.layoutUtil.getRowHeightPx()+this.layoutUtil.CARD_BORDER_PX,left:this.isRTLEnabled?-s-this.layoutUtil.CARD_BORDER_PX:s+this.layoutUtil.CARD_BORDER_PX};if(!e){var i=document.createElement("div");i.id="ovpDashboardLayoutMarker";i.position="absolute";i.style.height=this.floaterData.height+"px";i.style.width=this.floaterData.width+"px";i.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) ";document.getElementsByClassName("sapUshellEasyScanLayoutInner")[0].appendChild(i)}else{e.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";e.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) "}a.element.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";a.element.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) "};r.prototype.showGhostWhileResize=function(t,a){var e=document.getElementById("ovpResizeRubberBand"),s=(a.dashboardLayout.column-1)*this.layoutUtil.getColWidthPx(),o={top:(a.dashboardLayout.row-1)*this.layoutUtil.getRowHeightPx()+this.layoutUtil.CARD_BORDER_PX,left:this.isRTLEnabled?-s-this.layoutUtil.CARD_BORDER_PX:s+this.layoutUtil.CARD_BORDER_PX},i=this.resizeData.rowSpan*this.layoutUtil.getRowHeightPx()-2*this.layoutUtil.CARD_BORDER_PX+2,l=this.resizeData.colSpan*this.layoutUtil.getColWidthPx()-2*this.layoutUtil.CARD_BORDER_PX+2;if(!e){var r=document.createElement("div");r.id="ovpResizeRubberBand";r.classList.add("ovpResizeRubberBand");r.position="absolute";r.style.height=i+"px";r.style.width=l+"px";r.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";r.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) ";t.element.parentElement.appendChild(r)}else{e.style.height=i+"px";e.style.width=l+"px"}};r.prototype._addOverLay=function(t){var a=document.getElementById("sapOvpOverlayDivForCursor");if(!a){var e=document.createElement("div");e.id="sapOvpOverlayDivForCursor";e.style.cursor=t;this.jqLayout[0].appendChild(e)}else{a.style.cursor=t}};r.prototype._calculateMinimumCardHeight=function(t){var a=t.element.getBoundingClientRect(),e=a.top,s=a.right,o,i,l;if(this.uiActions.isResizeX&&!this.uiActions.isResizeY){o=this.isRTLEnabled?s-t.moveX:t.moveX-a.left;i=a.height;l="ew-resize"}else if(!this.uiActions.isResizeX&&this.uiActions.isResizeY){o=a.width;i=t.moveY-e;l="ns-resize"}else{o=this.isRTLEnabled?s-t.moveX:t.moveX-a.left;i=t.moveY-e;l=this.isRTLEnabled?"nesw-resize":"nwse-resize"}return{ghostWidthCursor:o,ghostHeightCursor:i,cursor:l}};function n(t,a){return t.filter(function(t){return t.id===a})}return r});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/DashboardLayoutUtil", ["sap/ovp/ui/DashboardLayoutRearrange","sap/ovp/ui/DashboardLayoutModel","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/cards/jUtils","sap/ovp/ui/cardPositionHelper","sap/ui/core/Core"],function(t,a,o,e,jQuery,s,r,i,d,n){"use strict";var h=new r("OVP.ui.DashboardLayoutUtil");var l=function(t){this.aCards=null;this.ROW_HEIGHT_PX=16;this.MIN_COL_WIDTH_PX=320;this.CARD_BORDER_PX=8;this.EXTRA_MARGIN=8;this.oLayoutData={layoutWidthPx:1680,contentWidthPx:1600,colCount:5,previousColCount:0,colWidthPx:this.MIN_COL_WIDTH_PX,rowHeightPx:this.ROW_HEIGHT_PX,marginPx:this.convertRemToPx(3)-this.CARD_BORDER_PX};this.dashboardLayoutModel=new a(t,this.oLayoutData.colCount,this.ROW_HEIGHT_PX,this.CARD_BORDER_PX);this.layoutDomId="";this.oLayoutCtrl={};this.componentDomId="";this.lastTriggeredColWidth=0;this.changedCards={};this.isRTLEnabled=n.getConfiguration().getRTL();switch(true){case e.browser.webkit:this.cssVendorTransition="-webkit-transition";this.cssVendorTransform="-webkit-transform";break;case e.browser.msie:this.cssVendorTransition="-ms-transition";this.cssVendorTransform="-ms-transform";break;case e.browser.mozilla:this.cssVendorTransition="-moz-transition";this.cssVendorTransform="-moz-transform";break;default:this.cssVendorTransition="transition";this.cssVendorTransform="transform"}};l.prototype.setLayout=function(t){this.oLayoutCtrl=t;this.layoutDomId=t.getId();var a=this.layoutDomId.indexOf("---")+3;var o=this.layoutDomId.substring(0,a);var e=this.layoutDomId.substring(a);this.componentDomId=o+e.split("--")[0]};l.prototype.getDashboardLayoutModel=function(){return this.dashboardLayoutModel};l.prototype.updateCardVisibility=function(t){this.dashboardLayoutModel.updateCardVisibility(t);this.aCards=this.dashboardLayoutModel.getCards(this.oLayoutData.colCount);this.dashboardLayoutModel._removeSpaceBeforeCard();this._setCardsCssValues(this.aCards);this._positionCards(this.aCards)};l.prototype.updateLayoutData=function(t){var a=this.oLayoutData.marginPx,o=0,s=320,r=1024,i=this.CARD_BORDER_PX,d=this.EXTRA_MARGIN,n=t+a,h,l;this.oLayoutData.layoutWidthPx=t;if(n<=s){a=this.convertRemToPx(.5)-i;o=e.system.desktop?16:0}else if(n<=r){a=this.convertRemToPx(1)-i;o=e.system.desktop?8:0}else{a=this.convertRemToPx(3)-i}if(a!==this.oLayoutData.marginPx){this.oLayoutData.marginPx=a;jQuery(".sapUshellEasyScanLayout").css({"margin-left":a+"px"})}this.oLayoutData.contentWidthPx=t-a-o;this.oLayoutData.previousColCount=this.oLayoutData.colCount;this.oLayoutData.colCount=Math.round(this.oLayoutData.contentWidthPx/this.MIN_COL_WIDTH_PX);if(this.oLayoutData.colCount===0){this.oLayoutData.colCount=1}this.oLayoutData.colWidthPx=this.oLayoutData.contentWidthPx/this.oLayoutData.colCount;if(jQuery(".sapOvpDashboardDragAndDrop").length>0&&jQuery(".easyScanLayoutItemWrapper").length>0){h=jQuery(".sapOvpDashboardDragAndDrop")[0].offsetLeft+d;if(jQuery(".sapOvpDashboardDragAndDrop")[0].offsetLeft<40){l=h+8}else{l=h}}else{h=a+d;l=a+o+d}if(e.system.desktop){jQuery(".ovpWrapper .sapFDynamicPageTitle").css({"margin-left":h+"px","margin-right":l+"px"});jQuery(".ovpWrapper .sapFDynamicPageHeader").css({"margin-left":h+"px","margin-right":l+"px"})}jQuery(".ovpWrapper .sapFDynamicPageTitle").css({visibility:"visible"});return this.oLayoutData};l.prototype.getRearrange=function(a){var o={containerSelector:".sapUshellEasyScanLayoutInner",wrapper:".sapUshellEasyScanLayout",draggableSelector:".easyScanLayoutItemWrapper",placeHolderClass:"dashboardLayoutItemWrapper-placeHolder",cloneClass:"easyScanLayoutItemWrapperClone",moveTolerance:10,switchModeDelay:500,isTouch:!e.system.desktop,debug:false,aCards:this.aCards,layoutUtil:this,rowHeight:this.oLayoutData.rowHeightPx,colWidth:this.oLayoutData.colWidthPx};return new t(s(o,a))};l.prototype.resizeLayout=function(t){var a=this.oLayoutData.colCount;var o=false;if(this.oLayoutData.layoutWidthPx!==t&&t!==0){this.updateLayoutData(t);o=Math.abs(this.lastTriggeredColWidth-this.oLayoutData.colWidthPx)>this.convertRemToPx(.5);this.aCards=this.dashboardLayoutModel.getCards(this.oLayoutData.colCount);for(var e=0;e<this.aCards.length;e++){var s=this.aCards[e];this.setCardCssValues(s);var r=document.getElementById(this.getCardDomId(s.id));if(r){r.style.width=s.dashboardLayout.width;r.style.height=s.dashboardLayout.height;if(a!==this.oLayoutData.colCount){r.style[this.cssVendorTransition]="all 0.25s ease"}else{r.style[this.cssVendorTransition]=""}r.style[this.cssVendorTransform]="translate3d("+s.dashboardLayout.left+" ,"+s.dashboardLayout.top+", 0px)";this.setKpiNumericContentWidth(r)}if(a!==this.oLayoutData.colCount&&o){this._triggerCardResize(s)}}this.dashboardLayoutModel._removeSpaceBeforeCard();this.oLayoutCtrl.fireAfterDragEnds();if(o){this.lastTriggeredColWidth=this.oLayoutData.colWidthPx}this.setAriaPos()}};l.prototype.getCards=function(t){if(this.aCards&&this.oLayoutData.previousColCount===t){return this.aCards}this._setColCount(t);this.aCards=this.dashboardLayoutModel.getCards(t);this._setCardsCssValues(this.aCards);return this.aCards};l.prototype.resetToManifest=function(){this.aCards=[];this.dashboardLayoutModel.resetToManifest()};l.prototype.getCardDomId=function(t){return this.layoutDomId+"--"+t};l.prototype.getCardId=function(t){var a=t.indexOf("---")+3;var o=t.substring(a);return o?o.split("--")[2]:""};l.prototype.getCardIdFromComponent=function(t){var a=t.indexOf("---")+3;var o=t.substring(a);return o?o.split("--")[1]:""};l.prototype.isCardAutoSpan=function(t){return this.dashboardLayoutModel.getCardById(t).dashboardLayout.autoSpan};l.prototype.setAutoCardSpanHeight=function(t,a,o){var e,s,r;if(!a&&t&&t.target.parentElement){var i=t.target.parentElement.parentElement.id;var d=i.indexOf("---")+3;var n=i.substring(d);a=n.split("--")[1]}var h=o;if(!h&&t){h=t.size.height}if(this.isCardAutoSpan(a)){r=this.dashboardLayoutModel.getCardById(a);if(r.dashboardLayout.showOnlyHeader){e=Math.ceil((h+2*this.CARD_BORDER_PX)/this.getRowHeightPx())}else{e=Math.round((h+2*this.CARD_BORDER_PX)/this.getRowHeightPx())}s=this.dashboardLayoutModel.resizeCard(a,{rowSpan:e,colSpan:1},false);this._sizeCard(s.resizeCard);this._positionCards(s.affectedCards);this.setAriaPos()}};l.prototype.calculateCardProperties=function(t){var a=this._getCardController(t);var o=this.dashboardLayoutModel.getCardById(t);var e=250,s,r,d,n,h;if(a){h=a.getItemHeight(a,"ovpCardHeader");s=h===0?o.dashboardLayout.headerHeight:h;r=a.getItemHeight(a,"toolbar");if(o.template==="sap.ovp.cards.list"||o.template==="sap.ovp.cards.v4.list"){h=a.getItemHeight(a,"ovpList",true);d=h===0?o.dashboardLayout.itemHeight:h;n=s+r+d}else if(o.template==="sap.ovp.cards.table"||o.template==="sap.ovp.cards.v4.table"){d=o.dashboardLayout.itemHeight;n=s+r+2*d}else if(o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist"){if(o.settings.listFlavor==="carousel"){n=s+i.getOuterHeight(document.querySelector(".sapOvpCarouselContentHeader"))+240+i.getOuterHeight(document.querySelector(".sapMCrslControlsBottom.sapMCrslControls"))}else{d=a.getItemHeight(a,"ovpLinkList",true);var l=a.getView().getModel("ovpCardProperties").getProperty("/densityStyle");if(l==="cozy"){n=s+r+d+8}else{n=s+r+d+4}}}else if(o.template==="sap.ovp.cards.charts.analytical"){var p=a.getView().byId("bubbleText")?43:0;n=s+r+e+p+50}else{n=s+r}return{headerHeight:s,dropDownHeight:r,itemHeight:d,minCardHeight:n,leastHeight:s}}};l.prototype._sizeCard=function(t){if(!t){return}var a=document.getElementById(this.getCardDomId(t.id));t.dashboardLayout.width=t.dashboardLayout.colSpan*this.oLayoutData.colWidthPx+"px";t.dashboardLayout.height=t.dashboardLayout.rowSpan*this.oLayoutData.rowHeightPx+"px";if(a){a.style.height=t.dashboardLayout.height;a.style.width=t.dashboardLayout.width;this._triggerCardResize(t)}this.dashboardLayoutModel._removeSpaceBeforeCard();var o=this.dashboardLayoutModel._findHighestOccupiedRow()+32;jQuery(".sapUshellEasyScanLayoutInner").css({height:o+"px"});jQuery(".sapUshellEasyScanLayout").css({height:o+"px"})};l.prototype._triggerCardResize=function(t){var a=t.dashboardLayout,o=t.id,e=this._getCardComponentDomId(o),s=document.getElementById(e),r=this._getCardController(o),i,d,n;try{if((a.autoSpan||!a.visible)&&r){d=r.getCardItemsBinding();i=this.calculateCardProperties(o);if(d&&i){var l=d.getLength();var p=l?Math.min(l,t.dashboardLayout.noOfItems):t.dashboardLayout.noOfItems;var u=l===0?t.dashboardLayout.noOfItems:p;var y=a.rowSpan*this.ROW_HEIGHT_PX;var c=y-(i.headerHeight+2*this.CARD_BORDER_PX);if(t.template==="sap.ovp.cards.table"||t.template==="sap.ovp.cards.v4.table"){r.addColumnInTable(s,a)}else if(t.template==="sap.ovp.cards.list"||t.template==="sap.ovp.cards.v4.list"){n=u*i.itemHeight+i.dropDownHeight;s.style.height=Math.min(n,c)+t.dashboardLayout.headerHeight+"px"}}return}}catch(t){h.warning("Card auto span failed for card "+o+" and error is  "+t.toString())}a.iRowHeightPx=this.getRowHeightPx();a.iCardBorderPx=this.CARD_BORDER_PX;try{if(r){i=this.calculateCardProperties(o);r.resizeCard(a,i)}else{h.warning("OVP resize: no controller found for "+o)}}catch(t){h.warning("OVP resize: "+o+" catch "+t.toString())}};l.prototype._positionCards=function(t){if(!t){return}var a={},o=false;t.forEach(function(t){if(!t.dashboardLayout.visible){return}a=this._mapGridToPositionPx(t.dashboardLayout);t.dashboardLayout.top=a.top;t.dashboardLayout.left=a.left;var e=document.getElementById(this.getCardDomId(t.id));if(e){e.classList.remove("sapOvpNotResizableLeftRight","sapOvpNotResizableRight","sapOvpNotResizableDown");e.style[this.cssVendorTransition]="all 0.15s ease";e.style[this.cssVendorTransform]="translate3d("+a.left+" ,"+a.top+", 0px)";o=t.dashboardLayout.column+t.dashboardLayout.colSpan===this.oLayoutData.colCount+1;if(o){if(t.dashboardLayout.colSpan===1){e.classList.add("sapOvpNotResizableLeftRight")}else{e.classList.add("sapOvpNotResizableRight")}}if((t.template==="sap.ovp.cards.list"||t.template==="sap.ovp.cards.v4.list")&&t.dashboardLayout.colSpan===2||(t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&t.settings.listFlavor==="carousel"&&t.dashboardLayout.colSpan===3){e.classList.add("sapOvpNotResizableRight")}if((t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&t.settings.listFlavor==="carousel"&&t.dashboardLayout.rowSpan===45){e.classList.add("sapOvpNotResizableDown")}}}.bind(this))};l.prototype.updateCardSize=function(t,a,o){var e=this.dashboardLayoutModel.getCardById(t);var s=this._getCardController(t);var r=document.getElementById(this.getCardDomId(t));r.style.height=a+"px";r.style.width=o+"px";r.style[this.cssVendorTransition]="none";r.style.zIndex=10;if((e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&e.settings.listFlavor==="carousel"){s.getView().byId("pictureCarousel").$().css("height",a-(e.dashboardLayout.headerHeight+2*this.CARD_BORDER_PX)+"px")}};l.prototype.resizeCard=function(t,a,o){this.changedCards=this.dashboardLayoutModel.resizeCard(this.getCardId(t),a,true,o);this._positionCards(this.changedCards.affectedCards)};l.prototype._mapGridToPositionPx=function(t){var a=(t.column-1)*this.getColWidthPx();var o={top:(t.row-1)*this.getRowHeightPx()+"px",left:(this.isRTLEnabled?-a:a)+"px"};return o};l.prototype._getCardComponentDomId=function(t){return this.componentDomId+"--"+t};l.prototype._getCardController=function(t){var a=null;var o=n.byId(this._getCardComponentDomId(t));if(o){var e=o.getComponentInstance();if(e){a=e.getAggregation("rootControl").getController()}}return a};l.prototype._setCardsCssValues=function(t){var a=0;for(a=0;a<t.length;a++){this.setCardCssValues(t[a])}};l.prototype.setCardCssValues=function(t){var a=(t.dashboardLayout.column-1)*this.oLayoutData.colWidthPx;t.dashboardLayout.top=(t.dashboardLayout.row-1)*this.oLayoutData.rowHeightPx+"px";t.dashboardLayout.width=t.dashboardLayout.colSpan*this.oLayoutData.colWidthPx+"px";t.dashboardLayout.height=t.dashboardLayout.rowSpan*this.oLayoutData.rowHeightPx+"px";t.dashboardLayout.left=(this.isRTLEnabled?-a:a)+"px"};l.prototype.convertRemToPx=function(t){var a=t;if(typeof t==="string"||t instanceof String){a=t.length>0?parseInt(t.split("rem")[0],10):0}return a*o.getPixelPerRem()};l.prototype.convertPxToRem=function(t){var a=t;if(typeof t==="string"||t instanceof String){a=t.length>0?parseFloat(t.split("px")[0],10):0}return a/o.getPixelPerRem()};l.prototype.setKpiNumericContentWidth=function(t){var a=t.getElementsByClassName("sapOvpKpiContent");if(!!a&&a.length>0){var o=a[0];var e=8;var s=16;o.style.width=this.getColWidthPx()-(2*e+2*s)+"px"}};l.prototype.getLayoutWidthPx=function(){return this.oLayoutData.colCount*this.oLayoutData.colWidthPx};l.prototype.getColWidthPx=function(){return this.oLayoutData.colWidthPx};l.prototype.getRowHeightPx=function(){return this.oLayoutData.rowHeightPx};l.prototype._setColCount=function(t){this.oLayoutData.colCount=t};l.prototype.setAriaPos=function(){var t=[];this.ariaPos={};this.aCards.forEach(function(a){if(a.dashboardLayout.visible===true){a.visited=false;if(t[a.dashboardLayout.column-1]){t[a.dashboardLayout.column-1].push(a)}else{t[a.dashboardLayout.column-1]=[a]}}});t.forEach(function(t){t.sort(function(t,a){if(t.dashboardLayout.row<a.dashboardLayout.row){return-1}else if(t.dashboardLayout.row>a.dashboardLayout.row){return 1}else{return 0}})});d.setAriaPosition(t,this)};return l},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/EasyScanLayout", ["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/ui/UIActions","sap/ui/Device","sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/F6Navigation","sap/ui/events/KeyCodes","sap/ovp/cards/jUtils","sap/ui/core/Core","sap/ui/dom/jquery/Selectors"],function(jQuery,e,t,a,i,n,s,r,o,l,d,u){"use strict";var p=function(e){this.init(e)};p.prototype.init=function(e){e.beforeDragCallback=this._beforeDragHandler.bind(this);e.dragStartCallback=this._dragStartHandler.bind(this);e.dragMoveCallback=this._dragMoveHandler.bind(this);e.dragEndCallback=this._dragEndHandler.bind(this);e.endCallback=this._endHandler.bind(this);this.layout=e.layout;this.afterReplaceElements=e.afterReplaceElements||function(){};this.settings=e;delete e.afterReplaceElements;this.destroy();this.uiActions=new t(this.settings).enable();this.aCardsOrder=null;this.verticalMargin=null;this.horizontalMargin=null;this.columnCount=null;this.top=null;this.left=null;this.width=null;this.layoutOffset=null;this.jqLayout=null;this.jqLayoutInner=null;this.isRTLEnabled=null;this.lastCollidedEl=null;this.lastCollisionTop=null;this.SCROLL_OFFSET=16};p.prototype.findCollision=function(e,t,a){var i;for(var n=0;n<a.length;n++){var s=a[n];var r=!(s.posDnD.right<e||s.posDnD.left>e);var o=!(s.posDnD.bottom<t||s.posDnD.top>t);if(r&&o){i=s;break}}return i};p.prototype.isCollisionTop=function(e,t,a){var i=(a.posDnD.bottom-a.posDnD.top)/2+a.posDnD.top;var n=!(i<t||a.posDnD.top>t);return n};p.prototype._dragMoveHandler=function(e,t){var a=e.element;var i=e.moveX-this.layoutOffset.left;var n=e.moveY-this.jqLayout.get(0).getBoundingClientRect().top+this.jqLayout.scrollTop();if(!t){var s=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var r=s.offsetHeight;var o=s.getBoundingClientRect();if(e.evt.clientY-s.offsetTop+this.SCROLL_OFFSET>r){s.scrollTop=s.scrollTop+this.SCROLL_OFFSET}else if(e.evt.clientY-s.offsetTop<o.top+this.SCROLL_OFFSET&&s.scrollTop!==0){s.scrollTop=s.scrollTop-this.SCROLL_OFFSET}}var l=this.findCollision(i,n,this.aCardsOrder);if(!l){return}var d=this.isCollisionTop(i,n,l);if(l===a){this.lastCollidedEl=l;return}if(l===this.lastCollidedEl){if(this.lastCollisionTop===d){return}if(this.lastCollisionTop){this.lastCollisionTop=d;if(a.posDnD.top>l.posDnD.top){return}}else{this.lastCollisionTop=d;if(a.posDnD.top<l.posDnD.top){return}}}if(this.lastCollidedEl&&this.lastCollidedEl!==l&&this.lastCollidedEl!==a&&this.lastCollidedEl.posDnD.left===l.posDnD.left&&this.lastCollidedEl.posDnD.left===a.posDnD.left){l=this.lastCollidedEl}this.dragAndDropElement(a,l);this.lastCollidedEl=this.findCollision(i,n,this.aCardsOrder);if(this.lastCollidedEl){this.lastCollisionTop=this.isCollisionTop(i,n,this.lastCollidedEl)}};p.prototype.dragAndDropElement=function(e,t){if(e&&t){this.aCardsOrder=this.dragAndDropSwapElement(e,t,this.aCardsOrder);this.drawLayout(this.aCardsOrder)}};p.prototype.dragAndDropSwapElement=function(e,t,a){var i=a.slice();var n=a.indexOf(e);var s=a.indexOf(t);i[s]=e;i[n]=t;if(!!this.positionChanges&&t&&t.children){var r=t.children[0].getAttribute("id");this.positionChanges.push({changeType:"position",content:{cardId:r.substring(r.indexOf("mainView--")+10,r.length),position:n,oldPosition:s},isUserDependent:true})}return i};p.prototype.dragAndDropSwapElementForKeyboardNavigation=function(e,t){if(e&&t){var a=this.layout.getVisibleLayoutItems().map(function(e){return e.$().parent()[0]});var i=0;for(var n=0;n<a.length;n++){if(a[n]===e){a[n]=t;i++;continue}if(a[n]===t){a[n]=e;i++;continue}}if(i===2){this.afterReplaceElements(a)}}};p.prototype.initCardsSettingsForDragAndDrop=function(){this.jqLayout=this.layout.$();this.jqLayoutInner=this.jqLayout.children().first();var e=this.jqLayout.scrollTop();var t=this.jqLayoutInner.height();this.isRTLEnabled=u.getConfiguration().getRTL()?1:-1;this.aCardsOrder=[];this.layoutOffset=this.jqLayout.offset();if(a.system.tablet===true&&a.system.desktop===false){this.jqLayout.css("height",this.jqLayoutInner.height())}var i=this.layout.getVisibleLayoutItems();if(!i){return}this.aCardsOrder=i.map(function(e){var t=e.$().parent()[0];t.posDnD={width:t.offsetWidth,height:t.offsetHeight};t.style.width=t.offsetWidth+"px";return t});var n=this.jqLayoutInner.children().first();var s=this.isRTLEnabled===1?"margin-left":"margin-right";this.verticalMargin=parseInt(n.css(s),10);var r=this.aCardsOrder[0];this.horizontalMargin=parseInt(getComputedStyle(r)["margin-bottom"],10);this.columnCount=this.layout.getColumnCount();this.top=r.getBoundingClientRect().top-this.jqLayoutInner[0].getBoundingClientRect().top;this.left=r.getBoundingClientRect().left-this.jqLayoutInner[0].getBoundingClientRect().left;this.width=r.offsetWidth;d.addStyleToAllElements(this.aCardsOrder,"position","absolute");this.drawLayout(this.aCardsOrder);this.jqLayoutInner.height(t);this.jqLayout.scrollTop(e)};p.prototype.drawLayout=function(e){var t=[];for(var a=0;a<this.columnCount;a++){t[a]=0}for(var i=0;i<e.length;i++){var n=i%this.columnCount;var s=t[n]++;var r=this.left-this.isRTLEnabled*(n*this.verticalMargin+n*this.width);var o=this.top;var l=e[i];for(var d=0;d<s;d++){o+=this.horizontalMargin;var u=i-(d+1)*this.columnCount;o+=e[u].posDnD.height}l.posDnD.top=o;l.posDnD.bottom=o+l.posDnD.height;l.posDnD.left=r;l.posDnD.right=r+l.posDnD.width;this.updateElementCSS(e[i])}};p.prototype.updateElementCSS=function(e){d.addStyleToAllElements(e,"top",e.posDnD.top);d.addStyleToAllElements(e,"left",e.posDnD.left)};p.prototype._dragStartHandler=function(e,t){this.positionChanges=[];if(a.system.desktop){d.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableUserSelect");d.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableImageDrag")}if(window.getSelection){var i=window.getSelection();i.removeAllRanges()}this.initCardsSettingsForDragAndDrop()};p.prototype._beforeDragHandler=function(e,t){if(a.browser.mobile){this.selectableElemets=jQuery(t).find(".sapUiSelectable");this.selectableElemets.removeClass("sapUiSelectable")}jQuery(this.settings.wrapper).addClass("dragAndDropMode")};p.prototype._dragEndHandler=function(e,t){this.lastCollidedEl=null;if(e.type=="mouseup"||e.type=="touchend"){if(this.aCardsOrder){this.afterReplaceElements(this.aCardsOrder)}}if(a.system.desktop){d.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableUserSelect");d.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableImageDrag")}jQuery(this.settings.wrapper).removeClass("dragAndDropMode");if(this.jqLayoutInner){this.jqLayoutInner.removeAttr("style")}if(this.aCardsOrder){jQuery(this.aCardsOrder).removeAttr("style")}this.uiActions.removeClone()};p.prototype._endHandler=function(e,t){if(a.browser.mobile&&this.selectableElemets){this.selectableElemets.addClass("sapUiSelectable")}};p.prototype.getSwapItemsFunction=function(){return this.dragAndDropSwapElementForKeyboardNavigation.bind(this)};p.prototype.destroy=function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null}};var h={buildReplaceItemsInstance:function(e){var t={containerSelector:".sapUshellEasyScanLayoutInner",wrapper:".sapUshellEasyScanLayout",draggableSelector:".easyScanLayoutItemWrapper",placeHolderClass:"easyScanLayoutItemWrapper-placeHolder",cloneClass:"easyScanLayoutItemWrapperClone",moveTolerance:10,switchModeDelay:800,isTouch:!a.system.desktop,debug:false};e=Object.assign({},t,e);return new p(e)}};var c=function(e,t){this.init(e,t)};c.prototype.init=function(e,t){this.easyScanLayout=e;this.swapItemsFunction=typeof t==="function"?t:function(){};this.keyCodes=l;this.jqElement=e.$();this.jqElement.on("keydown",this.keydownHandler.bind(this));this.jqElement.on("keyup",this.keyupHandler.bind(this));document.querySelector("body").addEventListener("keyup",this.bodyKeyupHandler.bind(this));document.querySelector("body").addEventListener("keydown",this.bodyKeydownHandler.bind(this));this.jqElement.find(".after").on("focus.keyboardNavigation",this.afterFocusHandler.bind(this));this.jqElement.find(".sapUshellEasyScanLayoutInner").on("focus.keyboardNavigation",this.layoutFocusHandler.bind(this));this.jqElement.on("focus.keyboardNavigation",".easyScanLayoutItemWrapper",this.layoutItemFocusHandler.bind(this));this._ignoreSelfFocus=false;this.swapSourceElement=null;this.lastFocussedElement=null;this.lastFocussedClassId=null;this.jqElement.on("keyup",this.ctrlArrowUpDownHandler.bind(this))};c.prototype.ctrlArrowUpDownHandler=function(e){switch(e.keyCode){case this.keyCodes.PAGE_UP:if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,true)}break;case this.keyCodes.PAGE_DOWN:if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,false)}break;default:break}};c.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation");this.jqElement.find(".after").off(".keyboardNavigation");this.jqElement.find(".sapUshellEasyScanLayoutInner").off(".keyboardNavigation")}delete this.jqElement;delete this.easyScanLayout};c.prototype.getVisibleLayoutItems=function(){var e=this.easyScanLayout.getContent();var t=e.filter(function(e){return e.getVisible()});return t};c.prototype.afterFocusHandler=function(){if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return}var e=this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first();var t=e.find(":sapTabbable").last();if(!t.length){t=e}t.focus()};c.prototype.layoutFocusHandler=function(){if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return}this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first().focus();this.handleScrollBar(true)};c.prototype.layoutItemFocusHandler=function(){var e=jQuery(document.activeElement);if(e){var t,a="";if(e.find(".valueStateText").length==1){var i=e.find(".valueStateText").find(".sapMObjectNumberText").text();var n=e.find(".valueStateText").find(".sapUiInvisibleText").text();e.find(".valueStateText").attr("aria-label",i+" "+n);e.find(".valueStateText").attr("aria-labelledby","")}e.find("[role='listitem']").attr("aria-label","");if(e.hasClass("easyScanLayoutItemWrapper")){var r="";var o=e.find(".cardCount");if(o.length===0){r="countDiv_"+(new Date).getTime();var l='<div id="'+r+'" class="cardCount"'+'" hidden></div>';e.append(l)}else{r=o[0].id}a+=r+" ";var d=e.find(".cardType");if(d.length!==0){a+=d[0].id+" "}}if(e.hasClass("sapOvpCardHeader")&&!e.hasClass("sapOvpStackCardContent")){var u="";var p=e.find(".cardHeaderType");if(p.length===0){var h=s.getText("CardHeaderType");u="cardHeaderType_"+(new Date).getTime();var c='<div id="'+u+'" class="cardHeaderType" aria-label="'+h+'" hidden></div>';e.append(c)}else{u=p[0].id}a+=u+" "}var f,y;if(e.hasClass("easyScanLayoutItemWrapper")){y=e.find(".sapOvpCardHeader");f=y.find("[aria-label]")}else{f=e.find("[aria-label]")}var m=e.find(".sapOvpStackCardHeader").length!==1;var g=e.find(".sapOvpExtendedBarListHBox,.sapOvpBarCondensedList,.sapOvpObjectListItem,.sapOvpStandardListItem").length===0;if(m&&g){for(t=0;t<f.length;t++){a+=f[t].id+" "}}if(e.hasClass("sapOvpCardHeader")){var v=e.find(".cardHeaderText");if(v.length!==0){for(var t=0;t<v.length;t++){if(a.indexOf(v[t].id)===-1){a+=v[t].id+" "}}}}if(a.length){e.attr("aria-labelledby",a)}if(e.prop("nodeName")==="LI"&&e.find(".linkListHasPopover").length!==0){if(e.find("#hasDetails").length===0){e.append("<div id='hasDetails' hidden>"+s.getText("HAS_DETAILS")+"</div>");e.attr("aria-describedby","hasDetails")}}var C=e.attr("id");if(C&&C.indexOf("ovpTable")!=-1&&e.find("[role='Link']")&&!e.hasClass("sapUiCompSmartLink")){var b=e.closest("td").attr("data-sap-ui-column"),S=e.closest("tbody").siblings().children().filter("tr").children();for(var t=0;t<S.length;t++){if(S[t].getAttribute("data-sap-ui")==b&&S[t].hasChildNodes("span")){var E=S[t].firstElementChild.getAttribute("id");e.attr("aria-labelledby",E)}}}}};c.prototype._getLayoutItemIndex=function(e){if(!e.hasClass("easyScanLayoutItemWrapper")){return false}var t=e.children().attr("id");var a=false;this.getVisibleLayoutItems().forEach(function(e,i){if(t==e.getId()){a=i}});return a};c.prototype._changeItemsFocus=function(e){var t=document.querySelectorAll(".easyScanLayoutItemWrapper");d.addAttributeToAllElements(t,"tabindex","-1");e.attr("tabindex",0);setTimeout(function(){e.focus()},500)};c.prototype._swapItemsFocus=function(e,t,a){e.preventDefault();t.attr("tabindex","-1");setTimeout(function(){a.attr("tabindex","0").focus()},0)};c.prototype.tabButtonHandler=function(e){var t=jQuery(document.activeElement);this.lastFocussedElement=t;if(t.hasClass("easyScanLayoutItemWrapper")){return}var a=t.closest(".easyScanLayoutItemWrapper");if(!a.length){return}var i=a.find(jQuery(".lastElement"));if(t.is(i)){e.stopPropagation();e.stopImmediatePropagation();var n=this.jqElement.scrollTop();this._ignoreSelfFocus=true;this.jqElement.find(".after").focus();this.jqElement.scrollTop(n)}};c.prototype.f7Handler=function(e){var t=jQuery(document.activeElement);if(t.hasClass("easyScanLayoutItemWrapper")){t.find(":sapTabbable").first().focus()}else{t.closest(".easyScanLayoutItemWrapper").focus()}e.preventDefault()};c.prototype.shiftTabButtonHandler=function(e){var t=jQuery(document.activeElement);if(t.hasClass("after")){this.lastFocussedElement.focus();return}if(!t.hasClass("easyScanLayoutItemWrapper")){return}this._ignoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus()};c.prototype.arrowUpDownHandler=function(e,t){e.preventDefault();var a=t?"prev":"next";var i=jQuery(document.activeElement);if(!i.hasClass("sapOvpCardHeader")){var n=jQuery(i)[a](".easyScanLayoutItemWrapper");if(!n.is(i)){this._swapItemsFocus(e,i,n)}}};c.prototype.arrowRightLeftHandler=function(e,t){var a=t?1:-1;var i=jQuery(document.activeElement);var n=this._getLayoutItemIndex(i);if(n===false){return}var s=this.getVisibleLayoutItems()[n+a];if(s){this._swapItemsFocus(e,i,s.$().parent())}};c.prototype.altPageUpAndHomeHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a===false){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s;var r=this.getVisibleLayoutItems();if(n==0){s=r[0]}else{s=r[a-n]}this._swapItemsFocus(e,t,s.$().parent())};c.prototype.altPageDownAndEndHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a===false){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s;var r=this.getVisibleLayoutItems();if(n==i-1||a+(i-n)>r.length){s=r[r.length-1]}else{s=r[a+(i-n-1)]}this._swapItemsFocus(e,t,s.$().parent())};c.prototype.ctrlHomeHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a===false){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s=this.getVisibleLayoutItems();var r=s[n];var o=r.$().parent();if(o.is(t)){o=s[0].$().parent()}this._swapItemsFocus(e,t,o)};c.prototype.ctrlEndHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a<0){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s;var r=this.getVisibleLayoutItems();for(var o=r.length-1;o>=0;o--){if(o%i==n){s=r[o];break}}var l=s.$().parent();if(l.is(t)){l=r[r.length-1].$().parent()}this._swapItemsFocus(e,t,l)};c.prototype.pageUpDownHandler=function(e,t){var a=t?"prev":"next";var i=jQuery(document.activeElement);if(!i.hasClass("easyScanLayoutItemWrapper")){return}if(!i[a]().length){return}var n=false;var s=i;var r=jQuery(window).height();while(!n){var o=s[a]();if(!o.length){n=s;break}if(!t&&o.offset().top>r){n=o;break}var l=o.offset().top;var d=0;if(l){d=l<0?-1:1}if(t&&d<=0){n=o;break}s=o}this._swapItemsFocus(e,i,n)};c.prototype.ctrlArrowHandler=function(e){if(this.swapSourceElement==null){this.swapSourceElement=jQuery(document.activeElement);if(!this.swapSourceElement.hasClass("easyScanLayoutItemWrapper")){this.endSwap()}else{this.jqElement.on("keyup.keyboardNavigation",this.keyupHandler.bind(this));this.jqElement.addClass("dragAndDropMode");this.swapSourceElement.addClass("dragHovered")}}};c.prototype.keyupHandler=function(e){if(this.swapSourceElement!=null&&e.keyCode===this.keyCodes.CONTROL){var t=jQuery(document.activeElement);if(t.hasClass("easyScanLayoutItemWrapper")){this.swapItemsFunction(this.swapSourceElement[0],t[0]);this._changeItemsFocus(this.swapSourceElement)}this.endSwap()}else if(e.keyCode===this.keyCodes.SPACE){this.spacebarHandler(e)}else if(e.keyCode===this.keyCodes.F6){if(e.shiftKey){var a=document.getElementsByClassName("sapUshellEasyScanLayoutInner");var i=a[0].firstElementChild;if(i.firstElementChild){document.getElementsByClassName(i.firstElementChild.className)[0].focus()}this.handleScrollBar(true)}}};c.prototype.endSwap=function(e){this.swapSourceElement.removeClass("dragHovered");this.jqElement.removeClass("dragAndDropMode");this.swapSourceElement=null;this.jqElement.off("keyup.keyboardNavigation")};c.prototype.checkIfSwapInterrupted=function(e){if(this.swapSourceElement!=null&&e.keyCode!=this.keyCodes.ARROW_LEFT&&e.keyCode!=this.keyCodes.ARROW_RIGHT&&e.keyCode!=this.keyCodes.ARROW_UP&&e.keyCode!=this.keyCodes.ARROW_DOWN){this.endSwap()}};c.prototype.spacebarHandler=function(e){r.bCRTLPressed=e.ctrlKey||e.metaKey;var t=u.byId(e.target.id);if(t&&t.mEventRegistry.hasOwnProperty("press")){var a="#"+e.target.id;d.addClassToAllElements(document.querySelectorAll(a),"sapMLIBActive");t.firePress()}};c.prototype.bodyKeyupHandler=function(e){if(e.ctrlKey||e.metaKey){r.bCRTLPressed=false}};c.prototype.bodyKeydownHandler=function(e){if(e.ctrlKey||e.metaKey){r.bCRTLPressed=true}};c.prototype.keydownHandler=function(e){this.checkIfSwapInterrupted(e);switch(e.keyCode){case this.keyCodes.TAB:e.shiftKey?this.shiftTabButtonHandler(e):this.tabButtonHandler(e);break;case this.keyCodes.F6:if(e.shiftKey){this._ignoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus();o.handleF6GroupNavigation(e)}else{this._ignoreSelfFocus=true;var t=this.jqElement.scrollTop();this.jqElement.find(".after").focus();o.handleF6GroupNavigation(e);this.jqElement.scrollTop(t);this.handleScrollBar(true)}break;case this.keyCodes.F7:this.f7Handler(e);break;case this.keyCodes.ARROW_UP:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowUpDownHandler(e,true);this.handleScrollBar(false);break;case this.keyCodes.ARROW_DOWN:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowUpDownHandler(e,false);break;case this.keyCodes.ARROW_RIGHT:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowRightLeftHandler(e,true);break;case this.keyCodes.ARROW_LEFT:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowRightLeftHandler(e,false);break;case this.keyCodes.HOME:e.ctrlKey==true?this.ctrlHomeHandler(e):this.altPageUpAndHomeHandler(e);break;case this.keyCodes.END:e.ctrlKey==true?this.ctrlEndHandler(e):this.altPageDownAndEndHandler(e);break;case this.keyCodes.PAGE_UP:e.altKey==true?this.altPageUpAndHomeHandler(e):this.pageUpDownHandler(e,true);if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,true)}break;case this.keyCodes.PAGE_DOWN:e.altKey==true?this.altPageDownAndEndHandler(e):this.pageUpDownHandler(e,false);if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,false)}break;case this.keyCodes.ENTER:this.spacebarHandler(e);break;default:break}};c.prototype.handleScrollBar=function(e){var t=this.easyScanLayout._sOwnerId+"---mainView--ovpMain";if(t){var a=u.byId(t);if(a){setTimeout(function(){var t=a.getScrollDelegate();if(t){var i=document.activeElement.getBoundingClientRect().height;var n=t.getScrollTop();var s=e?0:n-i-32;t.scrollTo(0,s)}},0)}}};var f=i.extend("sap.ovp.ui.EasyScanLayout",{metadata:{designTime:true,library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},defaultAggregation:"content",events:{afterRendering:{},afterDragEnds:{},afterColumnUpdate:{}},properties:{useMediaQueries:{group:"Misc",type:"boolean",defaultValue:false},dragAndDropRootSelector:{group:"Misc",type:"string"},dragAndDropEnabled:{group:"Misc",type:"boolean",defaultValue:true},debounceTime:{group:"Misc",type:"int",defaultValue:150}}},renderer:{render:function(e,t){var a=u.getComponent(t._sOwnerId)&&u.getComponent(t._sOwnerId).oOvpConfig.cards;e.openStart("div",t);e.class("sapUshellEasyScanLayout");e.openEnd();e.openStart("div");e.class("sapUshellEasyScanLayoutInner");e.attr("role","list");e.attr("aria-label","Cards");if(a&&a.length>0){e.attr("tabindex",0)}e.openEnd();var i=t.columnCount;var n=Array.apply(null,new Array(i)).map(function(){return[]});var s=t.getContent().filter(function(e){return e.getVisible()});for(var r=0;r<s.length;r++){n[r%i].push(s[r])}var o=1;n.forEach(function(t){e.openStart("div");e.class("easyScanLayoutColumn");e.accessibilityState(undefined,{role:"list"});e.openEnd();t.forEach(function(t,a){e.openStart("div");if(o===1){e.attr("tabindex",0)}else{e.attr("tabindex",-1)}e.class("easyScanLayoutItemWrapper");e.accessibilityState(undefined,{role:"listitem"});e.attr("aria-setsize",s.length);e.attr("aria-posinset",o);o++;e.openEnd();e.renderControl(t);e.openStart("div").class("lastElement").accessibilityState(undefined,{role:"none"}).attr("tabindex",0).openEnd();e.close("div");e.close("div")});e.close("div")});e.close("div");e.openStart("div");e.class("after");if(a&&a.length>0){e.attr("tabindex",0).accessibilityState(undefined,{role:"none"})}e.openEnd();e.close("div")}}});var y=function(){return[{minWidth:0,styleClass:"columns-blank",columnCount:1},{minWidth:240,styleClass:"columns-block",columnCount:1},{minWidth:352,styleClass:"columns-narrow",columnCount:1},{minWidth:433,styleClass:"columns-wide",columnCount:1},{minWidth:704,styleClass:"columns-narrow",columnCount:2},{minWidth:864,styleClass:"columns-wide",columnCount:2},{minWidth:1024,styleClass:"columns-narrow",columnCount:3},{minWidth:1280,styleClass:"columns-wide",columnCount:3},{minWidth:1440,styleClass:"columns-narrow",columnCount:4},{minWidth:1800,styleClass:"columns-wide",columnCount:4},{minWidth:2560,styleClass:"columns-narrow",columnCount:5},{minWidth:3008,styleClass:"columns-wide",columnCount:5},{minWidth:3600,styleClass:"columns-narrow",columnCount:4},{minWidth:3840,styleClass:"columns-wide",columnCount:4},{minWidth:5120,styleClass:"columns-wide",columnCount:5},{minWidth:6016,styleClass:"columns-wide",columnCount:5}]};f.prototype.init=function(){this.columnResolutionList=y();this.columnCount=this.columnResolutionList[0].columnCount;this.columnStyle="";this.updateColumnClass(this.columnResolutionList[0].styleClass);var e=a.browser.msie&&a.browser.version>9;if(e&&this.getUseMediaQueries()){this.mediaQueryList=this.initMediaListeners(this.columnResolutionList)}else{this.resizeHandlerId=this.initResizeHandler(this.columnResolutionList)}if(u.getComponent(this._sOwnerId)&&u.getComponent(this._sOwnerId).oOvpConfig.cards.length===0){this.data("sap-ui-fastnavgroup","false",false)}else{this.data("sap-ui-fastnavgroup","true",true)}};var m;var g=function(e,t,a){var i=function(e,t){this.updateColumnClass(t);this.refreshColumnCount(e,this.getContent())};if(a.matches){window.clearTimeout(m);m=window.setTimeout(i.bind(this,e,t),this.getDebounceTime())}};var v=function(e,t){var a=e.minWidth;var i=t&&t.minWidth;return"(min-width: "+a+"px)"+(i?" and (max-width: "+(i-1)+"px)":"")};f.prototype.initMediaListeners=function(e){var t=[];for(var a=0;a<e.length;a++){var i=v(e[a],e[a+1]);var n=window.matchMedia(i);var s=g.bind(this,e[a].columnCount,e[a].styleClass);n.addListener(s);n.bindedListener=s;s(n);t.push(n)}return t};f.prototype.initResizeHandler=function(e){var t;var a=this.getDebounceTime();var i=function(){window.clearTimeout(t);t=window.setTimeout(this.oControl.resizeHandler.bind(this,e),a)};return n.register(this,i)};f.prototype.resizeHandler=function(e){var t=this.iWidth;var a=this;var i=this.oControl;var n;if(document.querySelectorAll(".ovpWrapper .sapFDynamicPageContent").length>0){t=window.innerWidth}for(var s=0;s<e.length;s++){if(!e[s+1]){n=e[s];break}if(e[s].minWidth<=t&&e[s+1].minWidth>t){n=e[s];break}}i.refreshColumnCount(n.columnCount,i.getContent(),a);i.updateColumnClass(n.styleClass);i.fireAfterColumnUpdate(n)};f.prototype.getColumnWidth=function(e){var t;switch(e){case"columns-blank":t=0;break;case"columns-narrow":t=20;break;case"columns-wide":t=25;break;default:break}return t};f.prototype.refreshColumnCount=function(e,t,a){this.columnCount=e;var i=jQuery();for(var n=0;n<e;n++){i=i.add("<div class='easyScanLayoutColumn'></div>")}var s=t.filter(function(e){return e.getVisible()});var r=1;for(var o=0;o<s.length;o++){jQuery(s[o].getDomRef()).parent().attr("aria-posinset",r);r++;i.get(o%e).appendChild(s[o].getDomRef().parentNode)}this.$().children(".sapUshellEasyScanLayoutInner").empty().append(i);if(a&&a.iWidth){this.headerMargin(a)}};f.prototype.headerMargin=function(t){var i=0,n=0;var s=t.iWidth;var r,o,l,d=0,u,p=0;var h=y();var c=e.getPixelPerRem();var f=parseInt(window.getComputedStyle(document.querySelector(".ovpWrapper .sapFDynamicPageTitleWrapper"),null).getPropertyValue("width").split("px")[0],10)*1/c;if(document.querySelectorAll(".ovpWrapper .sapFDynamicPageContent").length>0){s=window.innerWidth}for(var m=0;m<h.length;m++){if(!h[m+1]){r=h[m];break}if(h[m].minWidth<=s&&h[m+1].minWidth>s){r=h[m];break}}u=this.getColumnWidth(r.styleClass);l=r.columnCount*u+(r.columnCount-1)*1;o=(f-l)/2;if(a.system.desktop){jQuery(".ovpWrapper .sapFDynamicPageTitle").css({"margin-left":o+"rem","margin-right":o+"rem"});jQuery(".ovpWrapper .sapFDynamicPageHeader").css({"margin-left":o+"rem","margin-right":o+"rem"})}jQuery(".ovpWrapper .sapFDynamicPageTitle").css({visibility:"visible"});if(a.system.desktop){f=document.body.clientWidth;if(document.querySelectorAll(".ovpWrapper .sapFDynamicPageContentFitContainer").length>0){i=document.querySelectorAll(".ovpWrapper .sapFDynamicPageContentFitContainer")[0].clientWidth}if(f===i){var g=document.querySelector(".ovpWrapper .sapFDynamicPageTitle")||undefined;var v=g&&getComputedStyle(g)["margin-left"];var C=g&&getComputedStyle(g)["margin-right"];if(typeof v==="string"||v instanceof String){v=v.length>0?parseInt(v.split("px")[0],10):0}if(typeof C==="string"||C instanceof String){C=C.length>0?parseInt(C.split("px")[0],10):0}d=jQuery(".ovpWrapper .sapFDynamicPageScrollBar").css("width");if(typeof d==="string"||d instanceof String){p=d.length>0?parseInt(d.split("px")[0],10):0}d=p;n=d/2;v=(v+n)/(c*1);C=(C+n)/(c*1);jQuery(".ovpWrapper .sapFDynamicPageTitle").css({"margin-left":v+"rem","margin-right":C+"rem",visibility:"visible"});jQuery(".ovpWrapper .sapFDynamicPageHeader").css({"margin-left":v+"rem","margin-right":C+"rem"})}}};f.prototype.getColumnCount=function(){return this.columnCount};f.prototype.getVisibleLayoutItems=function(){var e=this.getContent();var t=e.filter(function(e){return e.getVisible()});return t};f.prototype.updateColumnClass=function(e){if(this.columnStyle===e){return}this.removeStyleClass(this.columnStyle);this.addStyleClass(e);this.columnStyle=e};f.prototype.afterDragAndDropHandler=function(e){var t=this.removeAllAggregation("content",true);var a=[];var i=0;e.forEach(function(e,t){var i=e.children[0].getAttribute("id");var n=u.byId(i);a.push(n);jQuery(e).attr("aria-posinset",t+1)});for(var n=0;n<t.length;n++){if(t[n].getVisible()){this.addAggregation("content",a[i],true);i++}else{this.addAggregation("content",t[n],true)}}this.fireAfterDragEnds({positionChanges:this.layoutDragAndDrop.positionChanges});this.refreshColumnCount(this.getColumnCount(),this.getContent())};f.prototype.setActive=function(e){if(e){this.removeStyleClass("ovpOverlay")}else{this.addStyleClass("ovpOverlay")}};f.prototype.getActive=function(){return!this.hasStyleClass("ovpOverlay")};f.prototype.onAfterRendering=function(){if(!this.getDragAndDropRootSelector()){this.setDragAndDropRootSelector("#"+this.getId())}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy()}if(this.getDragAndDropEnabled()){this.layoutDragAndDrop=h.buildReplaceItemsInstance({afterReplaceElements:this.afterDragAndDropHandler.bind(this),rootSelector:this.getDragAndDropRootSelector(),layout:this})}if(this.keyboardNavigation){this.keyboardNavigation.destroy()}var e=this.layoutDragAndDrop?this.layoutDragAndDrop.getSwapItemsFunction():null;this.keyboardNavigation=new c(this,e);this.fireAfterRendering()};f.prototype.exit=function(){if(this.mediaQueryList){this.mediaQueryList.forEach(function(e){e.removeListener(e.bindedListener)});delete this.mediaQueryList}if(this.resizeHandlerId){n.deregister(this.resizeHandlerId)}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy();delete this.layoutDragAndDrop}};return f});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/OVPControllerExtensionTemplate", ["sap/ui/core/mvc/Controller","sap/ui/core/mvc/ControllerExtension","sap/m/MessageToast","sap/ui/util/openWindow"],function(e,n,o,s){"use strict";return n.extend("{{controllerExtensionName}}",{})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/OVPWrapper", ["sap/ui/core/Control"],function(e){"use strict";return e.extend("sap.ovp.ui.OVPWrapper",{metadata:{library:"sap.ovp",designTime:true,aggregations:{DynamicPage:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"DynamicPage"},init:function(){},renderer:function(e,a){e.openStart("div",a);e.class("ovpWrapper");e.openEnd();e.renderControl(a.getAggregation("DynamicPage"));e.close("div")}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/ObjectStream", ["sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/core/Control","sap/m/Dialog","sap/ovp/app/resources","sap/ui/events/KeyCodes","sap/base/util/uid","sap/m/Button","sap/ui/core/Core","./ObjectStreamRenderer","sap/ui/dom/jquery/Selectors"],function(jQuery,t,e,s,i,a,r,o,n,l){"use strict";var p=null;var h=function(t){this.init(t)};h.prototype.init=function(t){this.objectStream=t;this.keyCodes=a;this.jqElement=t.$();this.jqElement.on("keydown.keyboardNavigation",this.keydownHandler.bind(this));this.jqElement.on("focus.keyboardNavigation",".sapOvpObjectStreamItem",this.ObjectStreamFocusAccessabilityHandler.bind(this))};h.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation")}delete this.jqElement;delete this.objectStream};h.prototype._swapItemsFocus=function(t,e,s){t.preventDefault();e.attr("tabindex","-1");s.attr("tabindex","0").focus()};h.prototype.ObjectStreamFocusAccessabilityHandler=function(){var t=document.activeElement;t=jQuery(t);if(t){var e=t.find("[aria-label]");var s,i="";for(s=0;s<e.length;s++){if(e[s].getAttribute("role")=="heading"){i+=e[s].id+" "}}if(i.length){t.attr("aria-labelledby",i)}if(t.hasClass("sapOvpCardHeader")){t.closest(".sapOvpObjectStreamItem").removeAttr("aria-labelledby")}}};h.prototype.tabButtonHandler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamItem")){return}if(e.hasClass("sapOvpObjectStreamClose")){t.preventDefault();this.jqElement.find(".sapOvpObjectStreamItem:sapTabbable").focus();return}var s=e.closest(".sapOvpObjectStreamItem");if(!s.length){return}var i=s.find(":sapTabbable");if(i.eq(i.length-1).is(e)){t.preventDefault();this.jqElement.find("a.sapOvpObjectStreamHeader").focus()}};h.prototype.shiftTabButtonHandler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamItem")){t.preventDefault();this.jqElement.find(".sapOvpObjectStreamClose").focus()}if(e.hasClass("sapOvpObjectStreamClose")){t.preventDefault();this.jqElement.find("a.sapOvpObjectStreamHeader").focus()}if(e.hasClass("sapOvpObjectStreamHeader")){t.preventDefault();this.jqElement.find(".sapOvpObjectStreamItem:sapTabbable *:sapTabbable").last().focus();return}};h.prototype.enterHandler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamClose")){t.preventDefault();this.objectStream.getParent().close();if(p){p.focus()}return}if(e.hasClass("sapOvpObjectStreamItem")&&!e.next().length){e.children().click();return}};h.prototype.f6Handler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamClose")){this.jqElement.find(".sapOvpObjectStreamItem").attr("tabindex","-1").first().attr("tabindex","0").focus()}else{this.jqElement.find(".sapOvpObjectStreamClose").focus()}};h.prototype.f7Handler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamItem")){e.find(":sapTabbable").first().focus()}else{e.closest(".sapOvpObjectStreamItem").focus()}t.preventDefault()};h.prototype.leftRightHandler=function(t,e){var s=e?"next":"prev";var i=jQuery(document.activeElement);if(!i.hasClass("sapOvpObjectStreamItem")){return false}var a=i[s]();if(!a.length){return}this._swapItemsFocus(t,i,a)};h.prototype.homeEndHandler=function(t,e){var s=e?"first":"last";var i=jQuery(document.activeElement);if(!i.hasClass("sapOvpObjectStreamItem")){return false}t.preventDefault();var a=this.jqElement.find(".sapOvpObjectStreamItem")[s]();this._swapItemsFocus(t,i,a)};h.prototype.pageUpDownHandler=function(t,e){var s=e?"prev":"next";var i=jQuery(document.activeElement);if(!i.hasClass("sapOvpObjectStreamItem")){return}if(!i[s]().length){return}var a=false;var r=i;var o=window.innerWidth;while(!a){var n=r[s]();if(!n.length){a=r;break}if(!e&&n.offset().left>o){a=n;break}if(e&&n.offset().left+n.outerHeight()<=0){a=n;break}r=n}this._swapItemsFocus(t,i,a)};h.prototype.keydownHandler=function(t){switch(t.keyCode){case this.keyCodes.TAB:t.shiftKey?this.shiftTabButtonHandler(t):this.tabButtonHandler(t);break;case this.keyCodes.ENTER:case this.keyCodes.SPACE:this.enterHandler(t);break;case this.keyCodes.F6:this.f6Handler(t);break;case this.keyCodes.F7:this.f7Handler(t);break;case this.keyCodes.ARROW_UP:case this.keyCodes.ARROW_LEFT:this.leftRightHandler(t,false);break;case this.keyCodes.ARROW_DOWN:case this.keyCodes.ARROW_RIGHT:this.leftRightHandler(t,true);break;case this.keyCodes.HOME:this.homeEndHandler(t,true);break;case this.keyCodes.END:this.homeEndHandler(t,false);break;case this.keyCodes.PAGE_UP:this.pageUpDownHandler(t,true);break;case this.keyCodes.PAGE_DOWN:this.pageUpDownHandler(t,false);break;default:break}};var c=e.extend("sap.ovp.ui.ObjectStream",{metadata:{library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true},placeHolder:{type:"sap.ui.core.Control",multiple:false},title:{type:"sap.ui.core.Control",multiple:false}}},renderer:l});c.prototype.init=function(){var t=this;this._closeButton=new o({icon:"sap-icon://decline",tooltip:i.getText("close"),type:"Transparent",press:function(){t.getParent().close()}})};c.prototype._startScroll=function(t){this._direction=t;var e=this.wrapper.scrollWidth-this.wrapper.offsetWidth-Math.abs(this.wrapper.scrollLeft);var s;if(t=="left"){s=this.rtl&&!this.scrollReverse?e:this.wrapper.scrollLeft;if(s<=0){return}this.jqRightEdge.css("opacity",1)}else{s=this.rtl&&!this.scrollReverse?Math.abs(this.wrapper.scrollLeft):e;if(s<=0){return}this.jqLeftEdge.css("opacity",1)}var i=s*3;var a=t=="left"?s:~s+1;jQuery(this.container).one("transitionend",function(){this._mouseLeave({data:this})}.bind(this));this.container.style.transition="transform "+i+"ms linear";this.container.style.transform="translate("+a+"px, 0px) scale(1) translateZ(0px) "};c.prototype._mouseLeave=function(e){var s=window.getComputedStyle(e.data.container).transform;e.data.container.style.transform=s;e.data.container.style.transition="";this.rtl=n.getConfiguration().getRTL();var i;var a=s.split(",");if(s.substr(0,8)=="matrix3d"){i=parseInt(a[12],10)}else if(s.substr(0,6)=="matrix"){i=parseInt(a[4],10)}if(isNaN(i)){return}e.data.container.style.transform="none";if(t.browser.msie){i=this.rtl?~i:i}e.data.wrapper.scrollLeft+=~i+(e.data._direction=="left"?-5:5);e.data._checkEdgesVisibility()};var d;c.prototype.debounceScrollHandler=function(){window.clearTimeout(d);d=window.setTimeout(this._checkEdgesVisibility.bind(this),150)};c.prototype._initScrollVariables=function(){var e=this.$();this.container=e.find(".sapOvpObjectStreamScroll").get(0);this.rtl=n.getConfiguration().getRTL();this.wrapper=e.find(".sapOvpObjectStreamCont").get(0);this.scrollReverse=this.scrollReverse||this.wrapper.scrollLeft>0;this.shouldShowScrollButton=!t.system.phone&&!t.system.tablet||t.system.combi;this.jqRightEdge=e.find(".sapOvpOSEdgeRight");this.jqLeftEdge=e.find(".sapOvpOSEdgeLeft");if(this.shouldShowScrollButton){this.jqRightEdge.add(this.jqLeftEdge).on("mouseenter.objectStream",this,this._mouseEnter).on("mouseleave.objectStream",this,this._mouseLeave);jQuery(this.wrapper).on("scroll.objectStream",this.debounceScrollHandler.bind(this))}else{this.jqLeftEdge.css("display","none");this.jqRightEdge.css("display","none")}this._checkEdgesVisibility()};c.prototype._afterOpen=function(){if(t.os.ios&&this.$().length){this.$().on("touchmove.scrollFix",function(t){t.stopPropagation()})}var e=this.$().find("a.sapOvpObjectStreamHeader");e.removeAttr("aria-describedby");e.removeAttr("href");var s=e.attr("id");e.parent("div").attr("aria-labelledby",s);e.focus();if(this.keyboardNavigation){this.keyboardNavigation.destroy()}this.keyboardNavigation=new h(this);this._initScrollVariables();this.jqBackground=jQuery("<div id='objectStreamBackgroundId' class='objectStreamNoBackground'></div>");jQuery("#sap-ui-static").prepend(this.jqBackground);this.jqBackground.on("click.closePopup",function(){this._oPopup.close()}.bind(this));jQuery(".sapUshellEasyScanLayout").addClass("bluredLayout");var i=this.$().find(".sapOvpObjectStreamItem");for(var a=0;a<i.length;a++){var r=jQuery(i[a]).find(".sapOvpActionFooter");if(r.find("button").length==0){r.attr("tabindex","-1")}}};c.prototype._beforeClose=function(){if(t.os.ios&&this.$().length){this.$().off(".scrollFix")}this.keyboardNavigation.destroy();this.jqBackground.remove();this.jqLeftEdge.add(this.jqRightEdge).add(this.wrapper).off(".objectStream");jQuery(".sapUshellEasyScanLayout").removeClass("bluredLayout");this._oPopup=undefined};c.prototype._mouseEnter=function(t){var e="right";if(t.target==t.data.jqRightEdge.get(0)||t.currentTarget==t.data.jqRightEdge.get(0)){e=n.getConfiguration().getRTL()?"left":"right"}if(t.target==t.data.jqLeftEdge.get(0)||t.currentTarget==t.data.jqLeftEdge.get(0)){e=n.getConfiguration().getRTL()?"right":"left"}t.data._startScroll(e)};c.prototype._checkEdgesVisibility=function(){var t=this.wrapper.scrollLeft;var e=this.wrapper.scrollWidth-this.wrapper.offsetWidth-this.wrapper.scrollLeft;var s=t==0?0:1;var i=e==0?0:1;if(n.getConfiguration().getRTL()&&this.scrollReverse){this.jqLeftEdge.css("opacity",i);this.jqRightEdge.css("opacity",s);this.jqRightEdge.css("z-index",s===0?0:1)}else{this.jqLeftEdge.css("opacity",s);this.jqRightEdge.css("opacity",i);this.jqRightEdge.css("z-index",i===0?0:1)}};c.prototype._createPopup=function(){this._oPopup=new s({showHeader:false,afterOpen:this._afterOpen.bind(this),beforeClose:this._beforeClose.bind(this),content:[this],stretch:t.system.phone}).removeStyleClass("sapUiPopupWithPadding").addStyleClass("sapOvpStackedCardPopup");this._oPopup.oPopup.setModal(false)};c.prototype.open=function(t,e){if(!this._oPopup){this._createPopup()}this._cardWidth=t;p=e;this.setCardsSize(this._cardWidth);this._oPopup.open()};c.prototype.onBeforeRendering=function(){var t=this.getBinding("content");var e=this.getPlaceHolder();if(t&&t.getLength()<=20){this.setPlaceHolder(null);if(e){e.destroy()}}};c.prototype.onAfterRendering=function(){if(!this._oPopup||!this._oPopup.isOpen()||!this.getContent().length){return}setTimeout(function(){this._initScrollVariables()}.bind(this))};c.prototype.exit=function(){if(this._oPopup){this._oPopup.destroy()}if(this.jqBackground){this.jqBackground.remove()}this._closeButton.destroy();if(this._oScroller){this._oScroller.destroy();this._oScroller=null}};c.prototype.setCardsSize=function(e){var s=parseInt(window.getComputedStyle(document.documentElement).fontSize,10);var i=t.system.phone?document.body.clientHeight/s-4.5:28.75;var a=this.getContent();a.map(function(t){t.setWidth(e+"px");t.setHeight(i+"rem")});var r=this.getPlaceHolder();if(r){r.setWidth(e+"px");r.setHeight(i+"rem")}};c.prototype.getNewContentAvailable=function(){return this.onRefreshNewContent};c.prototype.setNewContentAvailable=function(t){this.onRefreshNewContent=t};c.prototype.updateContent=function(t){var e=this.mBindingInfos["content"],s=e.binding,i=s.getContexts(e.startIndex,e.length);if(t==="change"){e.clearQuickViewCard();var a=e.factory,o=0,n=this.getContent(),l=function(t){var s=this.getId()+"-"+r(),i=a(s,t);i.setBindingContext(t,e.model);this.addContent(i)};var p=l.bind(this);if(n.length<i.length){for(o=0;o<n.length;++o){n[o].destroy()}n.length=0;this.setNewContentAvailable(true);for(o=0;o<i.length;o++){p(i[o])}}if(!this.getNewContentAvailable()){for(o=0;o<i.length;++o){n[o].setBindingContext(i[o],e.model)}}if(n.length>=i.length){for(o=0;o<n.length;++o){n[o].destroy()}n.length=i.length;this.setNewContentAvailable(true);for(o=0;o<i.length;o++){p(i[o])}}}};return c});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/ObjectStreamRenderer", ["sap/ovp/app/resources"],function(e){"use strict";var t={apiVersion:2};t.render=function(t,i){if(!i.getVisible()){return}t.openStart("div",i);t.accessibilityState(undefined,{role:"dialog"});t.accessibilityState(i,{label:i.getTitle()});t.class("sapOvpObjectStream");t.openEnd();t.openStart("div");t.openEnd();var a=i.getTitle();if(a){t.renderControl(a)}t.close("div");t.openStart("div");t.attr("tabindex",0);t.class("sapOvpObjectStreamClose");t.accessibilityState(undefined,{role:"button"});t.accessibilityState(i,{label:"close"});t.openEnd();t.renderControl(i._closeButton);t.close("div");t.openStart("div",i.getId()+"-cont");t.class("sapOvpObjectStreamCont");t.openEnd();t.openStart("div",i.getId()+"-scroll");t.accessibilityState(undefined,{role:"list"});t.class("sapOvpObjectStreamScroll");t.openEnd();var n=i.getContent();var s=i.getPlaceHolder();n.forEach(function(e,i){t.openStart("div");t.class("sapOvpObjectStreamItem");t.attr("tabindex",i==0?0:-1);t.accessibilityState(undefined,{role:"listitem"});t.attr("aria-label"," ");t.attr("aria-setsize",s?n.length+1:n.length);t.attr("aria-posinset",i+1);t.openEnd();t.renderControl(e);t.close("div")});if(s){t.openStart("div");t.class("sapOvpObjectStreamItem");t.attr("tabindex",!n.length?0:-1);t.accessibilityState(undefined,{role:"listitem"});t.attr("aria-setsize",n.length+1);t.attr("aria-posinset",n.length+1);t.openEnd();t.renderControl(s);t.close("div")}t.close("div");t.openStart("div",i.getId()+"-leftedge");t.class("sapOvpOSEdgeLeft");t.openEnd();t.icon("sap-icon://slim-arrow-left",[],{title:e.getText("PREVIOUS")});t.close("div");t.openStart("div",i.getId()+"-rightedge");t.class("sapOvpOSEdgeRight");t.openEnd();t.icon("sap-icon://slim-arrow-right",[],{title:e.getText("NEXT")});t.close("div");t.close("div");t.close("div")};t.renderFooterContent=function(e,t){};return t},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/SmartphoneHeaderToggle", [],function(){"use strict";return{threshold:10,headerVisible:true,startY:undefined,app:undefined,jqView:undefined,startHandler:function(e){if(this.app.getGlobalFilter()&&this.app.getGlobalFilter().hasOwnProperty("getVisible")&&this.app.getGlobalFilter().getVisible()){return}this.startY=e.touches[0].pageY},resizeHandler:function(){if(!this.headerVisible){this.animateHeader.call(this,this.headerVisible)}},animateHeader:function(e){var i=this.jqView.find(".ovpApplication > .sapUiFixFlexFixed > .sapMVBox");var t=this.jqView.find(".ovpApplication > .sapUiFixFlexFlexible");var s=t.children();var a;if(e){a="translateY(0px)";i.add(t).css({transform:a,"-webkit-transform":a});t.one("transitionend",function(e){if(this.headerVisible){s.css({bottom:"0px"})}}.bind(this))}else{var r=this.getView().byId("ovpMain").getHeader();if(r){var n=r.$().height();s.css({bottom:"-"+n+"px"});a="translateY(-"+n+"px)";t.add(i).css({transform:a,"-webkit-transform":a})}}},moveHandler:function(e){var i=e.touches[0].pageY;if(typeof this.startY==="undefined"){if(this.app.getGlobalFilter()&&this.app.getGlobalFilter().hasOwnProperty("getVisible")&&this.app.getGlobalFilter().getVisible()){return}this.startY=i}if(Math.abs(this.startY-i)<this.threshold){return}if(this.startY>i&&this.headerVisible){this.headerVisible=false;this.startY=i;this.animateHeader.call(this,this.headerVisible)}if(this.startY<i&&!this.headerVisible){this.headerVisible=true;this.startY=i;this.animateHeader.call(this,this.headerVisible)}},endHandler:function(){this.startY=undefined;return},enable:function(e){this.app=e;this.view=this.app.getView();this.jqView=this.view.$();this.jqView.on("touchstart.headerHiding",this.startHandler.bind(this));this.jqView.on("touchmove.headerHiding",this.moveHandler.bind(this));this.jqView.on("touchend.headerHiding touchcancel.headerHiding touchleave.headerHiding",this.endHandler.bind(this));window.addEventListener("resize.headerHiding",this.resizeHandler.bind(this))},disable:function(){this.jqView.off("touchstart.headerHiding touchmove.headerHiding touchend.headerHiding touchcancel.headerHiding touchleave.headerHiding");window.removeEventListener("resize.headerHiding")}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/UIActions", ["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/events/KeyCodes","sap/ui/core/Core"],function(jQuery,e,t,s){"use strict";return e.extend("sap.ovp.ui.UIActions",{constructor:function(e){if(!e||!e.rootSelector||!e.containerSelector||!e.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.")}this.captureStart=null;this.captureMove=null;this.captureEnd=null;this.clickCallback=null;this.clickEvent=null;this.clickHandler=null;this.clone=null;this.cloneClass=null;this.container=null;this.contextMenuEvent=null;this.debug=false;this.dragMoveCallback=null;this.draggable=null;this.placeHolderClass=null;this.draggableSelector=null;this.doubleTapCallback=null;this.doubleTapDelay=null;this.element=null;this.swapTargetElement=null;this.endX=null;this.endY=null;this.isTouch=null;this.lastElement=null;this.lastTapTime=null;this.lockMode=null;this.log=null;this.mode=null;this.mouseDownEvent=null;this.mouseMoveEvent=null;this.mouseUpEvent=null;this.keyUpEvent=null;this.moveTolerance=null;this.moveX=null;this.moveY=null;this.noop=null;this.preventClickFlag=false;this.preventClickTimeoutId=null;this.scrollContainer=null;this.scrollContainerSelector=null;this.scrollEvent=null;this.scrollTimer=null;this.startX=null;this.startY=null;this.switchModeDelay=null;this.tapsNumber=null;this.timer=null;this.scrollHandler=null;this.touchCancelEvent=null;this.dragStartCallback=null;this.dragEndCallback=null;this.endCallback=null;this.touchEndEvent=null;this.touchMoveEvent=null;this.beforeDragCallback=null;this.touchStartEvent=null;this.wrapper=null;this.wrapperRect=null;this.scrollEdge=100;this.isRTLEnabled=null;this.resizeStartCallback=null;this.resizeMoveCallback=null;this.resizeEndCallback=null;this.isResize=null;this.isResizeX=null;this.isResizeY=null;this.resizeHandleDistance=null;this.layoutDetails=null;this.init=function(e){this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.resizeHandleDistance=16;this.isResize=false;this.isResizeX=false;this.isResizeY=false;this.noop=function(){};this.isTouch=e.isTouch?!!e.isTouch:false;this.container=document.querySelector(e.containerSelector);this.scrollContainerSelector=e.scrollContainerSelector||e.containerSelector;this.switchModeDelay=e.switchModeDelay||1500;this.moveTolerance=e.moveTolerance===0?0:e.moveTolerance||1e3;this.draggableSelector=e.draggableSelector;this.mode="normal";this.debug=e.debug||false;this.root=document.querySelector(e.rootSelector);this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.lockMode=false;this.placeHolderClass=e.placeHolderClass||"";this.cloneClass=e.cloneClass||"";this.wrapper=e.wrapperSelector?document.querySelector(e.wrapperSelector):this.container.parentNode;this.clickCallback=typeof e.clickCallback==="function"?e.clickCallback:this.noop;this.beforeDragCallback=typeof e.beforeDragCallback==="function"?e.beforeDragCallback:this.noop;this.doubleTapCallback=typeof e.doubleTapCallback==="function"?e.doubleTapCallback:this.noop;this.dragEndCallback=typeof e.dragEndCallback==="function"?e.dragEndCallback:this.noop;this.endCallback=typeof e.endCallback==="function"?e.endCallback:this.noop;this.dragStartCallback=typeof e.dragStartCallback==="function"?e.dragStartCallback:this.noop;this.dragMoveCallback=typeof e.dragMoveCallback==="function"?e.dragMoveCallback:this.noop;this.doubleTapDelay=e.doubleTapDelay||500;this.wrapperRect=this.wrapper.getBoundingClientRect();this.scrollEvent="scroll";this.touchStartEvent="touchstart";this.touchMoveEvent="touchmove";this.touchEndEvent="touchend";this.mouseDownEvent="mousedown";this.mouseMoveEvent="mousemove";this.mouseUpEvent="mouseup";this.keyUpEvent="keyup";this.contextMenuEvent="contextmenu";this.touchCancelEvent="touchcancel";this.clickEvent="click";this.layoutDetails=e.layout?e.layout.dashboardLayoutUtil:null;this.isRTLEnabled=s.getConfiguration().getRTL();this.resizeStartCallback=typeof e.resizeStartCallback==="function"?e.resizeStartCallback:this.noop;this.resizeMoveCallback=typeof e.resizeMoveCallback==="function"?e.resizeMoveCallback:this.noop;this.resizeEndCallback=typeof e.resizeEndCallback==="function"?e.resizeEndCallback:this.noop;if(this.wrapper){jQuery(this.wrapper).css({position:"relative",top:0,left:0,right:0,bottom:0,"-webkit-transform":"translateZ(0)",transform:"translateZ(0)"})}};this.forEach=function(e,t){return Array.prototype.forEach.call(e,t)};this.indexOf=function(e,t){return Array.prototype.indexOf.call(e,t)};this.insertBefore=function(e,t,s){var i,l,n;n=Array.prototype.splice;i=this.indexOf(e,t);l=this.indexOf(e,s);n.call(e,l-(i<l?1:0),0,n.call(e,i,1)[0])};this.logToConsole=function(){window.console.log.apply(console,arguments)};this.getDraggableElement=function(e){var t;this.draggable=jQuery(this.draggableSelector,this.container);while(typeof t==="undefined"&&e!==this.root){if(this.indexOf(this.draggable,e)>=0){t=e}e=e.parentNode}return t};this.captureStart=function(e){var t;if(e.type==="touchstart"&&e.touches.length===1){t=e.touches[0]}else if(e.type==="mousedown"){t=e;if(e.which!==1){return}}if(t){this.element=this.getDraggableElement(t.target);this.startX=t.pageX;this.startY=t.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.element){var s=jQuery(this.element);var i=s.offset().left;var l=s.offset().top;var n=s.height();var a=s.width();if(this.layoutDetails){var o=this.isRTLEnabled?this.startX-i<this.resizeHandleDistance:i+a-this.startX<this.resizeHandleDistance;var r=l+n-this.startY<this.resizeHandleDistance;if(o||r){if(o&&r){this.isResizeX=false;this.isResizeY=false}else if(!o&&r){this.isResizeX=false;this.isResizeY=true}else if(o&&!r){this.isResizeX=true;this.isResizeY=false}this.isResize=true}}else{var h=i+a-this.startX;var c=l+n-this.startY;if(h<this.resizeHandleDistance&&c<this.resizeHandleDistance){this.isResize=true}}}if(this.lastTapTime&&this.lastElement&&this.element&&this.lastElement===this.element&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element}this.log("captureStart("+this.startX+", "+this.startY+")")}};this.startHandler=function(e){this.log("startHandler");this.captureStart(e);if(this.element){this.beforeDragCallback(e,this.element);if(this.lockMode===false){if(this.tapsNumber===2){this.mode="double-tap";return}if(e.type==="touchstart"){this.timer=setTimeout(function(){if(this.isResize){this.log("mode switched to resize");this.mode="resize";this.resizeStartCallback(e,this.element)}else{this.log("mode switched to drag");this.mode="drag";this.createClone();this.dragStartCallback(e,this.element)}}.bind(this),this.switchModeDelay)}}}}.bind(this);this.captureMove=function(e){var t;if(e.type==="touchmove"&&e.touches.length===1){t=e.touches[0]}else if(e.type==="mousemove"){t=e}if(t){this.moveX=t.pageX;this.moveY=t.pageY;this.log("captureMove("+this.moveX+", "+this.moveY+")")}};this.moveHandler=function(e){this.log("moveHandler");this.captureMove(e);switch(this.mode){case"normal":if(Math.abs(this.startX-this.moveX)>this.moveTolerance||Math.abs(this.startY-this.moveY)>this.moveTolerance){if(e.type==="touchmove"){this.log("-> normal");clearTimeout(this.timer);delete this.timer}else if(this.element){if(this.isResize){this.log("mode switched to resize");this.mode="resize"}else{this.log("mode switched to drag");this.mode="drag";this.createClone()}}}break;case"drag":e.preventDefault();this.log("-> drag");this.mode="drag-and-scroll";window.addEventListener(this.mouseUpEvent,this.endHandler,true);window.addEventListener(this.keyUpEvent,this.endHandler,true);this.translateClone();this.scrollContainer=document.querySelector(this.scrollContainerSelector);if(e.type==="mousemove"){this.dragStartCallback(e,this.element)}break;case"drag-and-scroll":e.stopPropagation();e.preventDefault();this.log("-> drag-and-scroll");this.translateClone();this.dragMoveCallback({evt:e,clone:this.clone,element:this.element,draggable:this.draggable,moveX:this.moveX,moveY:this.moveY});break;case"resize":e.preventDefault();this.log("-> resize");this.mode="resize-and-scroll";window.addEventListener(this.mouseUpEvent,this.endHandler,true);this.scrollContainer=document.querySelector(this.scrollContainerSelector);if(e.type==="mousemove"){this.resizeStartCallback(e,this.element)}break;case"resize-and-scroll":e.stopPropagation();e.preventDefault();this.log("-> resize-and-scroll");this.resizeMoveCallback({evt:e,element:this.element,draggable:this.draggable,moveX:this.moveX,moveY:this.moveY});break;default:break}}.bind(this);this.captureEnd=function(e){var t;if((e.type==="touchend"||e.type==="touchcancel")&&e.changedTouches.length===1){t=e.changedTouches[0]}else if(e.type==="mouseup"){t=e}if(t){this.endX=t.pageX;this.endY=t.pageY;this.log("captureEnd("+this.endX+", "+this.endY+")")}};this.contextMenuHandler=function(e){if(this.isTouch){e.preventDefault()}}.bind(this);this.clickHandler=function(e){var t=document.getElementsByClassName("viz-controls-chartTooltip");var i=t&&t[0]&&t[0].id;var l=s.byId(i);if(l){var n=l&&l.aDelegates[0]&&l.aDelegates[0].oDelegate;if(n){n.close()}}if(this.preventClickFlag){this.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(this.preventClickTimeoutId)}this.clickCallback()}.bind(this);this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){this.preventClickFlag=false}.bind(this),100)};this.endHandler=function(e){this.log("endHandler");if(e.type==this.keyUpEvent&&e.which==t.ESCAPE||e.type==this.mouseUpEvent||e.type==this.touchEndEvent){this.captureEnd(e);switch(this.mode){case"normal":this.log("-> normal");break;case"drag":this.log("-> drag");this.dragEndCallback(e,this.element,this.clone);this.preventClick();break;case"drag-and-scroll":this.log("-> drag-and-scroll");window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.dragEndCallback(e,this.element,this.clone);this.preventClick();e.stopPropagation();e.preventDefault();break;case"double-tap":this.log("-> double-tap");this.doubleTapCallback(e,this.element);break;case"resize":this.log("-> resize");this.isResize=false;this.resizeEndCallback(e,this.element);this.preventClick();break;case"resize-and-scroll":this.log("-> resize-and-scroll");window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.isResize=false;this.resizeEndCallback(e,this.element);this.preventClick();e.stopPropagation();e.preventDefault();break;default:break}if(this.element){this.endCallback(e,this.element)}clearTimeout(this.timer);delete this.timer;this.lastMoveX=0;this.lastMoveY=0;this.swapTargetElement=null;this.element=null;this.mode="normal"}}.bind(this);this.defaultDragStartHandler=function(e){e.preventDefault()};this.scrollHandler=function(){clearTimeout(this.scrollTimer);this.lockMode=true;this.scrollTimer=setTimeout(function(){this.lockMode=false}.bind(this),500)}.bind(this);this.createClone=function(){var e,t;if(this.clone){this.removeClone()}t=this.element.getBoundingClientRect();this.clone=this.element.cloneNode(true);var s=this.element.querySelectorAll("canvas");if(s.length){var i=this.clone.querySelectorAll("canvas");for(var l=0;l<s.length;l++){i[l].getContext("2d").drawImage(s[l],0,0)}}this.clone.className+=" "+this.cloneClass;if(!this.layoutDetails){this.element.className+=" "+"easyScanLayoutItemWrapper-placeHolder"}else{this.element.className+=" "+"dashboardLayoutItemWrapper-placeHolder"}e=this.clone.style;e.position="absolute";e.display="block";e.top=t.top-this.root.getBoundingClientRect().top+"px";e.left=t.left-this.root.getBoundingClientRect().left+"px";e.width=t.width+"px";e.zIndex="100";e.webkitTransition="-webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.mozTransition="-moz-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.msTransition="-ms-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.transition="transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.webkitTransform="translate3d(0px, 0px, 0px) ";e.mozTransform="translate3d(0px, 0px, 0px) ";e.msTransform="translate3d(0px, 0px, 0px) ";e.transform="translate3d(0px, 0px, 0px) ";this.root.appendChild(this.clone);this.log("createClone")};this.removeClone=function(){if(this.element!==null&&typeof this.element!=="undefined"){this.element.className=this.element.className.split(" "+this.placeHolderClass).join("")}if(this.clone!==null){this.clone.parentElement.removeChild(this.clone);this.clone=null;this.log("removeClone")}};this.translateClone=function(){var e,t;e=this.moveX-this.startX;t=this.moveY-this.startY;if(this.clone&&e&&t){this.clone.style.webkitTransform="translate3d("+e+"px, "+t+"px, 0px)";this.clone.style.mozTransform="translate3d("+e+"px, "+t+"px, 0px)";this.clone.style.msTransform="translate("+e+"px, "+t+"px)";this.clone.style.transform="translate3d("+e+"px, "+t+"px, 0px)";this.log("translateClone ("+e+", "+t+")")}};this.enable=function(){this.log("enable");this.root.addEventListener(this.touchStartEvent,this.startHandler,false);this.root.addEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.addEventListener(this.touchEndEvent,this.endHandler,false);this.root.addEventListener(this.touchCancelEvent,this.endHandler,false);this.root.addEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.addEventListener(this.mouseDownEvent,this.startHandler,false);this.root.addEventListener(this.mouseUpEvent,this.endHandler,false);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.wrapper.addEventListener(this.scrollEvent,this.scrollHandler,false);return this};this.disable=function(){this.log("disable");this.root.removeEventListener(this.touchStartEvent,this.startHandler,false);this.root.removeEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.touchEndEvent,this.endHandler,false);this.root.removeEventListener(this.mouseDownEvent,this.startHandler,false);this.root.removeEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.mouseUpEvent,this.endHandler,false);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.touchCancelEvent,this.endHandler,false);this.wrapper.removeEventListener(this.scrollEvent,this.scrollHandler,false);return this};this.init(e);this.getMove=function(){return{x:this.moveX,y:this.moveY}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/cardPositionHelper", [],function(){"use strict";var t={getDependentColumns:function(t,e,o,n){var s=[];var a={};var r=function(e,o,n,s,r){if(t&&o){a[t.id]=true;e.forEach(function(t){if((t.dashboardLayout.row<o||t.dashboardLayout.row===o&&t.dashboardLayout.column<n)&&!r[t.id]&&!t.visited){s.push(t);r[t.id]=true}else if(t.dashboardLayout.row+t.dashboardLayout.rowSpan===o&&!r[t.id]&&!t.visited){r[t.id]=true;s.push(t)}},this)}}.bind(this);for(var u=0;u<this.allColumns.length;u++){r(this.allColumns[u],e,n,s,a)}return s},getNextIndexColumns:function(t,e,o,n,s,a,r){var u=function(t,e,o,n,s,a,r,u){t[e].visited=true;o[t[e].id]=n+1;s.rowValue=a+r;s.Result=true;var i=u.getCardDomId(t[e].id)&&document.getElementById(u.getCardDomId(t[e].id));if(i){i.ariaPosInSet=n+1}};var i={Result:false,rowValue:""},d=t[s]&&t[s].dashboardLayout&&t[s].dashboardLayout.row,l=t[s]&&t[s].dashboardLayout&&t[s].dashboardLayout.rowSpan,f=t[s]&&t[s].dashboardLayout&&t[s].dashboardLayout.column;if(d===e&&f===o&&t[s]&&!t[s].visited){u(t,s,n,a,i,d,l,r)}else{var h=this.getDependentColumns(t[s],d,l,f);if(h&&!h.length&&t[s]){u(t,s,n,a,i,d,l,r)}}return i},processAllColumns:function(t,e,o,n,s,a){var r;for(var u=0;u<t.length;u++){var i=t[u];if(i&&i.length&&i[n[u]]&&!i[n[u]].visited){r=this.getNextIndexColumns(i,e[u],i[n[u]].dashboardLayout.column,o,n[u],s,a);if(r.Result){e[u]=r.rowValue;s=s+1;n[u]=n[u]+1}}}var d=function(t){return t.some(function(t){return t.some(function(t){return t.visited===false})})};if(!d(t)){return}this.processAllColumns(t,e,o,n,s,a)},fnSetAriaPos:function(t,e){var o=e.ariaPos,n=0,s=[],a=[],r=[];for(var u=0;u<t.length;u++){s[u]=0;a[u]=1;r[u]=t[u]||[]}this.allColumns=r;this.processAllColumns(r,a,o,s,n,e)}};return{setAriaPosition:t.fnSetAriaPos,getNextIndexColumns:t.getNextIndexColumns,getDependentColumns:t.getDependentColumns,processAllColumns:t.processAllColumns}});
sap.ui.require.preload({
	"sap/ovp/app/CardContainer.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sap.ui.fl="sap.ui.fl"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:EasyScanLayout \n        id="ovpLayout" \n        dragAndDropRootSelector=".ovpApplication" \n        afterDragEnds="layoutChanged"\n        dragAndDropEnabled="{path:\'ui>\', formatter:\'.isDragAndDropEnabled\'}"><ovp:content><template:repeat list="{ui>/cards}" var="card"><core:ComponentContainer id="{card>id}"/></template:repeat></ovp:content><ovp:customData><ovp:CustomData key="role" value="region" writeToDom="true" /><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>Cards}" writeToDom="true" /></ovp:customData></ovp:EasyScanLayout></core:FragmentDefinition>\n',
	"sap/ovp/app/DashboardCardContainer.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sap.ui.fl="sap.ui.fl"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:DashboardLayout \n        id="ovpLayout" \n        dragAndDropRootSelector=".ovpApplication" \n        afterDragEnds="layoutChanged"\n        dragAndDropEnabled="{path:\'ui>\', formatter:\'.isDragAndDropEnabled\'}"><ovp:content><template:repeat \n                list="{ui>/cards}" \n                var="card"><core:ComponentContainer id="{card>id}"/></template:repeat></ovp:content><ovp:customData><ovp:CustomData key="role" value="region" writeToDom="true" /><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>Cards}" writeToDom="true" /></ovp:customData></ovp:DashboardLayout></core:FragmentDefinition>',
	"sap/ovp/app/Error.view.xml":'<mvc:View\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:mvc="sap.ui.core.mvc"><MessagePage \r\n        icon="sap-icon://message-error" \r\n        text="{ovplibResourceBundle>LOAD_DATA_ERROR_PAGE}"\r\n        description="{ovplibResourceBundle>LOAD_DATA_ERROR_CONTENT}"\r\n        showHeader="false"></MessagePage></mvc:View>',
	"sap/ovp/app/HeaderCommands.fragment.xml":'<core:FragmentDefinition \n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:core="sap.ui.core"><core:CommandExecution execute="onShareButtonPress" command="Share"/><core:CommandExecution execute="onTriggerFilterSearch" command="Search"/></core:FragmentDefinition>',
	"sap/ovp/app/Main.view.xml":'<mvc:View\n    controllerName="sap.ovp.app.Main"\n    xmlns="sap.m"\n    xmlns:variants="sap.ui.comp.smartvariants"\n    xmlns:core="sap.ui.core"\n    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:f="sap.f"\n    xmlns:v="sap.ui.fl.variants"\n    xmlns:macros="sap.fe.macros"><MessagePage \n        id="ovpErrorPage" \n        icon="sap-icon://message-error" \n        text="{ovplibResourceBundle>LOAD_DATA_ERROR_HEADER}"\n        description="{ovplibResourceBundle>LOAD_DATA_ERROR_CONTENT}"\n        showHeader="false" \n        visible="false"></MessagePage><ovp:OVPWrapper id="ovpWrapper"><f:DynamicPage \n            id="ovpMain" \n            class="ovpApplication" \n            preserveHeaderStateOnScroll="false" \n            headerExpanded="{ui>/bHeaderExpanded}"><f:dependents><core:Fragment fragmentName="sap.ovp.app.HeaderCommands" type="XML"/></f:dependents><template:if test="{= !${ui>/globalFilterEntityType} &amp;&amp; !${ui>/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui>/description} ? false : true}"><f:title><f:DynamicPageTitle id="ovpMainPageTitle" areaShrinkRatio="0:1.6:1.6"><f:heading><HBox class="ovpDescription"><template:if test="{= ${ui>/useMacroFilterBar} === false &amp;&amp; !${ui>/smartVariantRequired}}"><template:then><Title text="{parts: [{path:\'ui>/subTitleIfVariantMgmtHidden\'}, {path:\'ui>/description\'}, {path:\'ui>/title\'}], formatter: \'.setTitle\'}"/></template:then></template:if><template:if test="{= ${ui>/useMacroFilterBar} === false &amp;&amp; ${ui>/smartVariantRequired} === true || (!${ui>/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui>/description} &amp;&amp; !${ui>/title})}"><variants:SmartVariantManagement \n                                        id="ovpPageVariant"\n                                        persistencyKey="ovpGlobalFilter"\n                                        visible="{= ${ui>/globalFilterEntityType} ? true : false}" \n                                        showShare="true" \n                                        showExecuteOnSelection="true"\n                                        displayTextForExecuteOnSelectionForStandardVariant="{= (${ui>/dataLoadSettings/loadDataOnAppLaunch} === \'ifAnyFilterExist\' || ${ui>/dataLoadSettings/loadDataOnAppLaunch} === undefined) ? \'{ovplibResourceBundle>ST_LIST_DISPLAY_TEXT_FOR_EXECUTE_ON_SELECTION}\' : undefined}"/></template:if><template:if test="{= ${ui>/useMacroFilterBar} === true &amp;&amp; !${ui>/smartVariantRequired}}"><template:then><Title text="{parts: [{path:\'ui>/subTitleIfVariantMgmtHidden\'}, {path:\'ui>/description\'}, {path:\'ui>/title\'}], formatter: \'.setTitle\'}"/></template:then></template:if><template:if test="{= ${ui>/useMacroFilterBar} === true &amp;&amp; ${ui>/smartVariantRequired} === true &amp;&amp; ${ui>/globalFilterEntityType} || (!${ui>/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui>/description} &amp;&amp; !${ui>/title} &amp;&amp; ${ui>/globalFilterEntityType})}"><v:VariantManagement id="ovpGlobalMacroFilterVariantMGMT" for="ovpGlobalMacroFilter"/></template:if></HBox></f:heading><f:actions><ToolbarSpacer /><core:ExtensionPoint name="SmartFilterBarGlobalActionExtension"/><MenuButton \n                                id="sapOvpShareButton"\n                                icon="sap-icon://action"\n                                tooltip="{ovplibResourceBundle>shareBtn} (Shift+Ctrl+S)"\n                                text=""\n                                visible="{= (${ui>/globalFilterEntityType} &amp;&amp; ${ui>/smartVariantRequired} &amp;&amp; !${ui>/isTeamsModeActive})}"\n                                type="Transparent"><layoutData><OverflowToolbarLayoutData closeOverflowOnInteraction="false"/></layoutData></MenuButton></f:actions><f:snappedContent><Text id="ovpFilterText"></Text></f:snappedContent></f:DynamicPageTitle></f:title></template:if><template:if test="{ui>/globalFilterEntityType}"><f:header><f:DynamicPageHeader id="ovpPageHeader" pinnable="true"><template:if test="{= ${ui>/useMacroFilterBar} === false }"><template:then><f:content><template:if test="{= ${ui>/smartVariantRequired} === true || !${ui>/description}}"><template:then><core:Fragment fragmentName="sap.ovp.app.SmartFilterBarWithVariant" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.app.SmarFilterBarWithoutVariant" type="XML"/></template:else></template:if></f:content></template:then></template:if><template:if test="{= ${ui>/useMacroFilterBar} === true }"><f:content><macros:FilterBar\n                                    id="ovpGlobalMacroFilter"\n                                    metaPath="@com.sap.vocabularies.UI.v1.SelectionFields"\n                                    search=".onMacroFilterBarSearch"\n                                /></f:content></template:if></f:DynamicPageHeader></f:header></template:if><f:content><VBox height="inherit"><VBox \n                        id="ovpFilterNotFulfilledPage" \n                        visible="false" \n                        fitContainer="true" \n                        alignItems="Center" \n                        justifyContent="Center" \n                        height="300px"><Text text="{ovplibResourceBundle>FILTER_NOT_FULFILLED_CONTENT}" /></VBox><VBox id="ovpCardPage" visible="true" height="inherit"><core:Fragment fragmentName="{ui>/cardContainerFragment}" type="XML"/></VBox></VBox></f:content></f:DynamicPage></ovp:OVPWrapper></mvc:View>',
	"sap/ovp/app/ManageCard.fragment.xml":'<core:FragmentDefinition \n    xmlns:core="sap.ui.core"\n    xmlns:p13n="sap.m.p13n"\n    class="sapUiContentPadding"><p13n:Popup close="onManageCardOkButtonPressed" warningText="{ovplibResourceBundle>MANAGE_CARDS_WARNING_TEXT}" reset=".onManageCardResetButtonPressed"\n        id="manageCardsDialog" \n        class="sapOVPCardsVisibilityDialog" \n        title="{ovplibResourceBundle>MANAGE_CARDS_TITLE}"><p13n:panels><p13n:SelectionPanel id="manageCardsSelectionPanel" enableCount="true" enableReorder="false" showHeader="true" change="onCardVisibilityChange"/></p13n:panels></p13n:Popup></core:FragmentDefinition>\n',
	"sap/ovp/app/SharePage.fragment.xml":'<core:FragmentDefinition \n\txmlns="sap.m" \n\txmlns:core="sap.ui.core"><Menu><MenuItem \n\t\t\tid="ShareEmailButton"\n\t\t\ticon="sap-icon://email"\n\t\t\tpress="shareEmailPressed"\n\t\t\ttext="{ovplibResourceBundle>Email_Text}"\n\t\t\tclass="sapMFlexBox"/><MenuItem \n\t\t\tid="shareJamButton"\n\t\t\ticon="sap-icon://share-2"\n\t\t\tpress="shareJamPressed"\n\t\t\ttext="{ovplibResourceBundle>share_jam}"\n\t\t\tclass="sapMFlexBox"\n\t\t\tvisible="{ui>/jamVisible}"/><MenuItem \n\t\t\tid="BookmarkButton"\n\t\t\ticon="{ui>/tileIcon}"\n\t\t\tpress="shareTilePressed"\n\t\t\ttext="{ui>/tileText}"\n\t\t\tvisible="{ui>/tileVisible}" \n\t\t\tclass="sapMFlexBox"/></Menu></core:FragmentDefinition>\n',
	"sap/ovp/app/SmarFilterBarWithoutVariant.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><smartFilterBar:SmartFilterBar \n        id="ovpGlobalFilter"\n        entitySet="{ui>/globalFilterEntitySet}"\n        entityType="{ui>/globalFilterEntityType}"\n        filterBarExpanded="false"\n        assignedFiltersChanged="onAssignedFiltersChanged"\n        useToolbar="false"\n        showMessages="false"\n        liveMode="{ui>/enableLiveFilter}"\n        enableBasicSearch="{ui>/showBasicSearch}"\n        considerAnalyticalParameters="{ui>/considerAnalyticalParameters}"\n        search="cmd:Search"\n        useDateRangeType="{ui>/useDateRangeType}"><template:if test="{meta>}"><smartFilterBar:controlConfiguration><template:with \n                    path=\'ui>allControlConfiguration\'\n                    var=\'selectionField\'><template:repeat list="{selectionField>}"><template:if test="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'sap.ovp.cards.AnnotationHelper.isDateRangeType\'}"><template:then><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="{path: \'selectionField>bNotPartOfSelectionField\', formatter: \'sap.ovp.cards.AnnotationHelper.getGroupID\'}"\n                                    conditionType="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getConditionTypeForDateProperties\'}"/></template:then><template:else><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="_BASIC"/></template:else></template:if></template:repeat></template:with><template:if test="{= ${ui>globalFilterEntitySet}}"><template:then><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntitySet}"/></template:then><template:elseif test="{= ${ui>globalFilterEntityType}}"><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityTypeNQ}"/><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityType}"/></template:elseif></template:if></smartFilterBar:controlConfiguration></template:if><smartFilterBar:customData><core:CustomData key="dateFormatSettings" value=\'\\{"UTC":true,"style":"medium"\\}\'/></smartFilterBar:customData></smartFilterBar:SmartFilterBar></core:FragmentDefinition>',
	"sap/ovp/app/SmartFilterBarWithVariant.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><smartFilterBar:SmartFilterBar \n        id="ovpGlobalFilter"\n        entitySet="{ui>/globalFilterEntitySet}"\n        entityType="{ui>/globalFilterEntityType}"\n        persistencyKey="ovpGlobalFilter"\n        filterBarExpanded="true"\n        showMessages="false"\n        beforeVariantSave="onBeforeSFBVariantSave"\n        afterVariantLoad="onAfterSFBVariantLoad"\n        assignedFiltersChanged="onAssignedFiltersChanged"\n        useToolbar="false"\n        smartVariant="ovpPageVariant"\n        useDateRangeType="{ui>/useDateRangeType}"\n        liveMode="{ui>/enableLiveFilter}"\n        enableBasicSearch="{ui>/showBasicSearch}"\n        search="cmd:Search"\n        considerAnalyticalParameters="{ui>/considerAnalyticalParameters}"><template:if test="{meta>}"><smartFilterBar:controlConfiguration><template:with \n                    path=\'ui>allControlConfiguration\'\n                    var=\'selectionField\'><template:repeat list="{selectionField>}"><template:if test="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'sap.ovp.cards.AnnotationHelper.isDateRangeType\'}"><template:then><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="{path: \'selectionField>bNotPartOfSelectionField\', formatter: \'sap.ovp.cards.AnnotationHelper.getGroupID\'}"\n                                    conditionType="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getConditionTypeForDateProperties\'}" /></template:then><template:else><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="_BASIC" /></template:else></template:if></template:repeat></template:with><template:if test="{= ${ui>globalFilterEntitySet}}"><template:then><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntitySet}"/></template:then><template:elseif test="{= ${ui>globalFilterEntityType}}"><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityTypeNQ}"/><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityType}"/></template:elseif></template:if></smartFilterBar:controlConfiguration></template:if><smartFilterBar:customData><core:CustomData key="dateFormatSettings" value=\'\\{"UTC":true,"style":"medium"\\}\'/></smartFilterBar:customData></smartFilterBar:SmartFilterBar></core:FragmentDefinition>',
	"sap/ovp/app/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","id":"sap.ovp.app","type":"application","i18n":{"bundleUrl":"../messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"applicationVersion":{"version":"1.115.0"},"title":"{{TITLE}}","description":"{{DESCRIPTION}}","tags":{"keywords":["{{TITLE}}"]},"ach":"CA-UI5-ST-OVP","embeddedBy":"../","offline":false,"resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"_version":"1.1.0","services":{"ShellUIService":{"factoryName":"sap.ushell.ui5service.ShellUIService"},"routingService":{"factoryName":"","startup":"none"}},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.ui.comp":{"minVersion":"1.30.1"},"sap.ui.generic.app":{"minVersion":"1.30.1"},"sap.ui.layout":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.rta":{"minVersion":"1.30.1"},"sap.f":{"minVersion":"1.41.0"},"sap.suite.ui.microchart":{"minVersion":"1.41.0"},"sap.viz":{"minVersion":"1.41.0"},"sap.fe.placeholder":{"minVersion":"1.96.0"},"sap.fe.macros":{"minVersion":"1.96.0"},"sap.insights":{"minVersion":"1.105.0"},"sap.suite.ui.commons":{"minVersion":"1.108.0"},"sap.ui.integration":{"minVersion":"1.102.0"}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"../messagebundle.properties","settings":{"supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"}}},"commands":{"Share":{"name":"Share","shortcut":"Shift+Ctrl+S"},"Search":{"name":"Search","shortcut":"Enter"}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ovp/cards/Integration/Preview.fragment.xml":'<Dialog\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:w="sap.ui.integration.widgets"\n    xmlns:smartForm="sap.ui.comp.smartform"\n\txmlns:smartField="sap.ui.comp.smartfield"\n    title="{ovpResourceModel>INT_ADD_CARD_TO_REPOSITORY_DT}"\n    resizable="true"\n    contentWidth= "352px"\n    contentHeight = "712px"\n    draggable="true"><content><NavContainer id="navCon"><Page id="previewPage" showHeader="false" backgroundDesign="Transparent"><FlexBox\n                    direction="Column" \n                    id="flexBoxNew" \n                    justifyContent="Center" \n                    class="sapUiNoMargin sapMPageBgSolid" ><Title \n                        id="previewTitle" \n                        text="{ovpResourceModel>INT_Preview_Title}" \n                        class="sapUiSmallMarginBegin sapUiTinyMarginTop"\n                        visible="false"/><FlexBox \n                        justifyContent="Center" \n                        id="subFlexBoxNew"  \n                        class="sapUiTinyMargin sapUiSmallMarginTopBottom"/><HBox id="ovpIntPreviewOverflowLayer" class="sapMFlexBoxJustifyCenter" height="0" visible="false"><HBox class="ovpIntPreviewOverflowLayer"/></HBox></FlexBox><VBox class="sapUiSmallMargin"><FlexBox direction="Column"><items><Label \n                                id="labelTitle" \n                                text="{ovpResourceModel>INT_Preview_TitleField_Label}"\n                                required="true"\n                                visible="true" \n                                labelFor="titleTextInput"/><Input \n                                id="titleTextInput" \n                                visible="true"\n                                liveChange=".handleTitleLiveChange" \n                                value="{/dialogSettings/cardTitle}" \n                                valueState="{/dialogSettings/valueState}" \n                                valueStateText="{/dialogSettings/valueStateText}"/><Label \n                                id="labelSubTitle" \n                                text="{ovpResourceModel>INT_Preview_SubTitleTitleField_Label}"\n                                required="false" \n                                class="sapUiTinyMarginTop"\n                                visible="true" \n                                labelFor="subTitleTextInput"/><Input  \n                                id="subTitleTextInput"\n                                visible="true" \n                                value="{/dialogSettings/cardSubTitle}"\n                                liveChange=".handleSubTitleLiveChange"/></items></FlexBox></VBox></Page><Page id="filterDetailPage"><FlexBox direction="Column" class="sapUiContentPadding" id="flexBoxFilterPage" justifyContent="Center"></FlexBox></Page></NavContainer></content><buttons><Button text="{ovpResourceModel>INT_DIALOG_Ok}" type="Emphasized" press=".confirmActionHandler"/><Button text="{ovpResourceModel>INT_DIALOG_CANCEL}" press=".handleCancel" /></buttons></Dialog>',
	"sap/ovp/cards/charts/analytical/analyticalChart.fragment.xml":'<core:FragmentDefinition \n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:suite="sap.suite.ui.commons" \n\txmlns:viz="sap.viz.ui5.controls"\n\txmlns:dataSet="sap.viz.ui5.data" \n\txmlns:feed="sap.viz.ui5.controls.common.feeds"\n\txmlns:ovp="sap.ovp.ui" \n\txmlns:charts="sap.ovp.cards.charts"><VBox class="ovpChartTitleVBox cardType" id="vbLayout"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>analyticalCardType}" writeToDom="true" /></customData><template:with \n\t\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\tvar=\'chart\'><template:with \n\t\t\t\tpath="ovpCardProperties>/selectionAnnotationPath"\n\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\tvar=\'selVar\'><template:with \n\t\t\t\t\tpath="ovpCardProperties>/presentationAnnotationPath"\n\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\tvar=\'preVar\'><template:if test="{chart>}"><template:if test="{path:\'chart>DimensionAttributes\', formatter: \'sap.ovp.cards.charts.VizAnnotationManager.dimensionAttrCheck\'}"><template:if test="{path:\'chart>MeasureAttributes\', formatter: \'sap.ovp.cards.charts.VizAnnotationManager.measureAttrCheck\'}"><template:if test="{chart>ChartType}"><template:if test="{preVar>MaxItems}"><template:then><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.charts.VizAnnotationManager.formatItems\'}"\n\t\t\t\t\t\t\t\t\t\t\t\taggregateData="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>undefined\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="analyticalChart" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{path: \'chart>Title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:then><template:else><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="analyticalChart" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{path: \'chart>Title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:else></template:if></template:if></template:if></template:if></template:if></template:with></template:with></template:with></VBox><template:with \n\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\tvar=\'chart\'><template:if test="{chart>}"><template:if test="{chart>ChartType}"><template:if test="{path:\'chart>ChartType\',formatter:\'sap.ovp.cards.charts.VizAnnotationManager.checkBubbleChart\'}"><Text id="bubbleText" class="ovpChartFooter"/></template:if></template:if></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/charts/generic/noData.fragment.xml":'<core:FragmentDefinition \n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns="sap.m"><FlexBox alignItems="Center" justifyContent="SpaceAround" class="noDataSection"><Text maxLines="1" text="{ovplibResourceBundle>noData}"><customData><ovp:CustomData \n\t\t\t\t\tkey="aria-label"\n\t\t\t\t\tvalue="{ovplibResourceBundle>noData}"\n\t\t\t\t\twriteToDom="true" /><ovp:CustomData key="tabindex" value="0" writeToDom="true" /></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/error/Error.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><MessagePage \n        id="sapOvpErrorCard" \n        icon="{ovpCardProperties>/sMessageIcon}" \n        text="{ovpCardProperties>/errorStatusText}"\n        description="" \n        class="{= ${ovpCardProperties>/oldTemplate} === \'sap.ovp.cards.stack\' ? \'stackContentOfError\' : \'contentOfError\' }"\n        showHeader="false" /></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Action.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{=  ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAction\' ||\n                           ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\'||\n                           ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldWithUrl\'}"><Button \n            text="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n            press="onActionPress" \n            type="Transparent"><layoutData><OverflowToolbarLayoutData moveToOverflow="true" stayInOverflow="false"/></layoutData><customData><core:CustomData key="type" value="{dataField>RecordType}"/><template:if test="{= ${dataField>SemanticObject}}"><core:CustomData \n                        key="semanticObject"\n                        value="{path: \'dataField>SemanticObject\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField>Url}}"><core:CustomData \n                        key="url"\n                        value="{path: \'dataField>Url\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField>Action}}"><core:CustomData \n                    key="action"\n                    value="{path: \'dataField>Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></template:if><core:CustomData \n                    key="label"\n                    value="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></customData></Button></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ActionsFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with \n        path=\'ovpCardProperties>/identificationAnnotationPath\' \n        helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n        var=\'identification\'><template:if test="{path: \'identification>\', formatter: \'sap.ovp.cards.AnnotationHelper.hasActions\'}"><OverflowToolbar id="ovpActionFooter" class="sapOvpActionFooter"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true" /><ovp:CustomData key="role" value="toolbar" writeToDom="true" /></customData><ToolbarSpacer/><template:repeat\n                        list="{path:\'identification>\',\n                                filters: [\n                                    {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'High\'},\n                                    {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Medium\'}\n                                ],\n                                sorter: [{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\'}]\n                             }" \n                        var="dataField"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:repeat><template:repeat\n                        list="{path:\'identification>\',\n                                filters: [\n                                    {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Low\'}\n                                ]\n                             }" \n                        var="dataField"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:repeat><template:repeat \n                    list="{path:\'identification>\'}" \n                    var="dataField"><template:if test="{=  !${dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:if></template:repeat></OverflowToolbar></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Card.view.xml":'<mvc:View\n    controllerName="{ovpCardProperties>/controllerName}"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox class="sapOvpCardOverlaySideContainer sapOvpCardRightOverlayCursor"></VBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/cloneCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_COPY}" class="sapOvpNewBadgeText"/></HBox></FlexBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/newCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_NEW}" class="sapOvpNewBadgeText"/></HBox></FlexBox><template:if test="{= ${ovpCardProperties>/contentPosition} === \'Right\'}" ><template:then><core:Fragment fragmentName="sap.ovp.cards.generic.ContentRight" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.generic.ContentMiddle" type="XML"/></template:else></template:if><template:if test="{device>/support/touch}"><template:then><core:HTML content="&lt;div&gt;&lt;/div&gt;"></core:HTML></template:then><template:else><core:HTML content="&lt;div;&gt;&lt;/div&gt;"></core:HTML></template:else></template:if><HBox class="sapOvpCardOverlayContainer sapOvpCardBottomOverlayCursor"></HBox></mvc:View>',
	"sap/ovp/cards/generic/ContactDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContactDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickViewPage \n        header="{ovplibResourceBundle>CONTACT_INFO}"\n        icon="{= ${contact>photo} ? ${path: \'contact>photo\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : \'sap-icon://person-placeholder\'}"\n        title="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n        description="{path: \'contact>role\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><QuickViewGroup><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_JOB_TITLE}" \n                type="text"\n                value="{path: \'contact>title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                visible="{= !!${contact>title}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_DEPARTMENT}" \n                type="text"\n                value="{path: \'contact>org\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                visible="{= !!${contact>org}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_EMAIL}" \n                type="email"\n                value="{path: \'contact>email/[${type/EnumMember}.indexOf(\\\'ContactInformationType/work\\\')>=0]/address\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                visible="{= !!${path: \'contact>email/[${type/EnumMember}.indexOf(\\\'ContactInformationType/work\\\')>=0]/address\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} }"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_PHONE}" \n                type="phone"\n                value="{= ${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/work\\\')>=0]/uri\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}.replace(\'tel:\',\'\') }"\n                visible="{= !!${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/work\\\')>=0]/uri\'} }"/><QuickViewGroupElement  \n                label="{ovplibResourceBundle>CONTACT_MOBILE}" \n                type="{= (${device>/system/phone} || ${device>/system/tablet})  ? \'mobile\'  : \'phone\' }"\n                value="{= ${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/cell\\\')>=0]/uri\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}.replace(\'tel:\',\'\') }"\n                visible="{= !!${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/cell\\\')>=0]/uri\'} }"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_FAX}" \n                type="text"\n                value="{= ${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/fax\\\')>=0]/uri\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}.replace(\'tel:\',\'\') }"\n                visible="{= !!${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/fax\\\')>=0]/uri\'} }"/></QuickViewGroup></QuickViewPage></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContentMiddle.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl"><VBox class="sapOvpBaseCard"><template:if test="{ovpCardProperties>/headerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerFragment}" type="XML"/></template:if><ovp:CardContentContainer \n\t\t\t\tid="ovpCardContentContainer" \n\t\t\t\tclass="{= ${ovpCardProperties>/cardLayout/containerLayout} === \'resizable\' &amp;&amp; ${ovpCardProperties>/cardLayout/showOnlyHeader} === true ? \'sapOvpWrapper sapOvpContentHidden\' :  \'sapOvpWrapper\'}"><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' || !${ovpCardProperties>/reason} || ${ovpCardProperties>/state} === \'undefined\'}" ><template:if test="{ovpCardProperties>/tabs}"><Toolbar id="toolbar" class="sapOvpDropDown {= ${ovpCardProperties>/densityStyle} === \'compact\' ? \'sapUiSizeCompact dropDrownCompact\' : \'sapUiSizeCozy sapOvpDropDownPadding dropDrownCozy\' }"><core:InvisibleText id="ovp_card_dropdown_label" text="{ovplibResourceBundle>OVP_CARD_DROP_DOWN_LABEL}" /><Select \n\t\t\t\t\t\t\t\tid="ovp_card_dropdown" \n\t\t\t\t\t\t\t\tselectedKey="1" \n\t\t\t\t\t\t\t\tchange="changeSelection"><template:repeat \n\t\t\t\t\t\t\t\t\tlist="{ovpCardProperties>/tabs}" \n\t\t\t\t\t\t\t\t\tvar="tab"><core:Item\n\t\t\t\t\t\t\t\t\t\tid ="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'sap.ovp.cards.CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\tkey="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'sap.ovp.cards.CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{tab>value}"></core:Item></template:repeat></Select></Toolbar></template:if><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></template:if></ovp:CardContentContainer><template:if\n\t\t\t\ttest="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\' || ${ovpCardProperties>/layoutDetail} !== \'resizable\' || ${ovpCardProperties>/state} === \'Loading\' || ${ovpCardProperties>/reason}}"><template:if test="{ovpCardProperties>/footerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/footerFragment}" type="XML"/></template:if></template:if></VBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContentRight.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl" class = "cardType"><HBox class="sapOvpBaseCard sapOvpCardRightContent"><FlexBox class="sapOvpCardContentRightHeader"><core:Fragment fragmentName="sap.ovp.cards.generic.Header" type="XML"/><layoutData><FlexItemData growFactor="1" baseSize="1rem"/></layoutData></FlexBox><ovp:CardContentContainer id="ovpCardContentContainer"><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></ovp:CardContentContainer></HBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/generic/CountFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"><Text id="ovpCountFooter" class="sapOvpCardFooter"><customData><ovp:CustomData key="role" value="heading" writeToDom="true" /></customData></Text></core:FragmentDefinition>',
	"sap/ovp/cards/generic/CountHeader.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m" \n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"><FlexBox class = "sapOvpHeaderCountMainDiv"><Text id="ovpCountHeader" class="sapOvpHeaderCounter" maxLines="1"><customData><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Header.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox \n        id="ovpCardHeader"\n        class="{= ${ovpCardProperties>/category} || ${ovpCardProperties>/title} || ${ovpCardProperties>/subTitle} ? \'sapOvpCardHeader sapUiContentPadding\' : \'sapOvpCardHeader sapOvpCardHideHeader\' } \n               {= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\' ? \'sapOvpStackCardHeader\' :  \'\'} \n               {= ${ovpCardProperties>/bInsightRTEnabled} ? \'sapOvpCardInsightRunTime\' :  \'\' } \n               {= ${ovpCardProperties>/bInsightDTEnabled} ? \'sapOvpCardInsightDesignTime\' :  \'\' }"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\'}"><template:then><template:with \n                    path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n                    var="header"><Text \n                        id="ovpQuickviewCardHeader"\n                        text="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}"\n                        class="sapOvpCardTitle tabindex-1"><customData><ovp:CustomData key="aria-label" value="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.generic.Title" type="XML"/></template:else></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} !== \'sap.ovp.cards.quickview.Quickview\'}"><core:Fragment fragmentName="sap.ovp.cards.generic.SubTitle" type="XML"/></template:if><template:if test="{ovpCardProperties>/headerExtensionFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerExtensionFragment}" type="XML"/></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\'}"><FlexBox class="sapOvpCardViewAllContainer"><Text\n                    id= "ViewAll"\n                    text="{ovplibResourceBundle>View_All_Stack_Card}"\n                    class="sapOvpCardViewAll cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>View_All_Stack_Card}" writeToDom="true" /></customData></Text></FlexBox></template:if></VBox></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/HeaderActions.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"><Menu><MenuItem\n\t\t\tvisible="{= ${ovpCardProperties>/showRefresh} }"\n\t\t\ticon="sap-icon://refresh"\n\t\t\tid = "ovpRefreshCardButton"\n\t\t\tpress="refreshCardContent"\n\t\t\ttext="{ovplibResourceBundle>OVP_REFRESH_CARD}"\n\t\t\tclass="sapMFlexBox"/><MenuItem\n\t\t\tvisible="{= ${ovpCardProperties>/bInsightEnabled} &amp;&amp; ${ovpCardProperties>/enableAddToInsights} }"\n\t\t\tid = "ovpAddToInsightButton"\n\t\t\ticon="sap-icon://add-folder"\n\t\t\tpress="onShowInsightCardPreview"\n\t\t\ttext="{= ${ovpCardProperties>/bInsightRTEnabled} ? ${ovplibResourceBundle>INT_PREVIEW_POPOVER_BUTTON_TITLE_RT} : ${ovplibResourceBundle>INT_ADD_CARD_TO_REPOSITORY_DT} }"\n\t\t\tclass="sapMFlexBox"\n\t\t\tenabled="false"\n\t\t\t/><MenuItem\n\t\t\ticon="sap-icon://dimension"\n\t\t\tid = "ovpManageCardsButton"\n\t\t\tpress="onCardManage"\n\t\t\ttext="{ovplibResourceBundle>MANAGE_CARDS_TITLE}"\n\t\t\tvisible="{= ${ovpCardProperties>/enableAdditionalActionsManageCards} }"\n\t\t\tclass="sapMFlexBox"/></Menu></core:FragmentDefinition>',
	"sap/ovp/cards/generic/KPIHeader.fragment.xml":'<core:FragmentDefinition \n    xmlns="sap.m"\n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" ><template:with \n        path="ovpCardProperties>/dataPointAnnotationPath"\n        helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n        var=\'dataPoint\'><template:with \n            path="ovpCardProperties>/selectionAnnotationPath"\n            helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n            var=\'selVar\'><template:with \n                path="ovpCardProperties>/presentationAnnotationPath"\n                helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n                var=\'preVar\'><template:if test="{dataPoint>}"><VBox id="kpiHeader" class="sapOVPKpiHeaderVbox tabindex-1"><template:if test="{dataPoint>Value/Path}"><FlexBox \n                                items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}"\n                                id="kpiHBoxNumeric" \n                                class="numericContentHbox sapUiTinyMarginTop sapOvpKPIHeaderAggregateNumber" ><items><HBox class="innerNumericContentHbox sapOvpKpiContent" alignItems="End" justifyContent="SpaceBetween"><NumericContent \n                                            id="kpiNumberValue"\n                                            size="M" \n                                            truncateValueTo="8"\n                                            indicator="{parts:[{path:\'dataPoint>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formThePathForTrendIcon\'}"\n                                            value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formThePathForAggregateNumber\'}"\n                                            formatterValue="true"\n                                            valueColor="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatKPIHeaderState\'}"\n                                            state="Loaded" class="sapOvpKPIHeaderNumberValueStyle kpiHeaderClass"\n                                            press="press"\n                                            withMargin="false"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.getKPIHeaderAggregateNumber\'} {path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatKPIHeaderState\'}"\n                                                    writeToDom="true"/></customData></NumericContent><template:if test="{= ${path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'} !== \'\'}"><FlexBox class="TargetDeviationFlexbox"><VBox class="KpiTargetContainer"><Text id = "ovpKpiTarget" text="{ovplibResourceBundle>KPI_Target_Text}" class="KpiTargetText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Target_Text}" writeToDom="true" /></customData></Text><Text id = "ovpTargetValue" text="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForTargetValue\'}"\n                                                          class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForTargetValue\'}" writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox><VBox class="KpiDeviationContainer"><Text id= "ovpKPIDeviation" text="{ovplibResourceBundle>KPI_Deviation_Text}" class="KpiDeviationText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Deviation_Text}" writeToDom="true" /></customData></Text><Text\n                                                        id="kpiNumberPercentage"\n                                                        text="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'}"\n                                                        class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'}" writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox></FlexBox></template:if></HBox></items></FlexBox></template:if><template:if test="{dataPoint>Value/Path}"><template:if test="{ovpCardProperties>/valueSelectionInfo}"><FlexBox class="UOMFlexbox"><Text\n                                        id="ovpValueSelectionInfo"\n                                        maxLines="1"\n                                        text="{ovpCardProperties>/valueSelectionInfo}"\n                                        class="sapOvpKPIHeaderUnitOfMeasureStyle sapOvpCardSubtitle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                key="aria-label"\n                                                value="{ovpCardProperties>/valueSelectionInfo}"\n                                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true" /><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:if></template:if><template:if  test="{= (${ovpCardProperties>/showSortingInHeader} === true) &amp;&amp; ${path:\'preVar>\', formatter: \'sap.ovp.cards.AnnotationHelper.isPresentationVarientPresent\'} === true}"><FlexBox \n                                alignItems="Start" \n                                justifyContent="SpaceBetween" \n                                class="KpiPreVarFlex" \n                                visible="{ovpCardProperties>/showSortingInHeader}"><Text \n                                    id="headerGroupByText" \n                                    maxLines="1"\n                                    text="{path:\'preVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.listGroupBy\'}"\n                                    class="sapOvpKPIHeaderDimensionStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                            key="aria-label" \n                                            value="{path:\'preVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.listGroupBy\'}" \n                                            writeToDom="true" /></customData></Text></FlexBox></template:if><template:if test="{= (${ovpCardProperties>/showFilterInHeader} === true) &amp;&amp; {parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'} !== \'\'}"><template:if test="{= !${ovpCardProperties>/ignoreSelectionVariant} === true}"><template:then><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="flex-start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'selVar>SelectOptions\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.formTheIdForFilter\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'}" \n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData \n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:then><template:else><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="flex-start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'ovpCardProperties>/idForExternalFilters\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.formTheIdForFilterNotFromSelVar\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" \n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData \n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:else></template:if></template:if></VBox></template:if></template:with></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/LineItemDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/generic/LineItemDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:l="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>quickViewCard}" writeToDom="true" /></customData><template:with \n        path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n        var="header"><template:with \n            path="entityType>com.sap.vocabularies.UI.v1.Facets" \n            var="facets"><QuickViewPage\n                header="{= ${header>TypeNamePlural} ? ${path: \'header>TypeNamePlural\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'{ovplibResourceBundle>LineItem_Detail_Text}\' }"\n                icon="{= ${header>ImageUrl} ? ${path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : (${header>TypeImageUrl} ? ${path: \'header>TypeImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : \'\') }"\n                title="{= ${header>Title/Value} ? ${path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'\' }"\n                description="{= ${header>Description/Value} ? ${path: \'header>Description/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'\' }"><template:repeat \n                    list="{path:\'facets>\'}" \n                    var="referenceFacet"><template:if test="{referenceFacet>com.sap.vocabularies.UI.v1.IsSummary}"><template:with \n                            path="referenceFacet>Target"\n                            helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                            var="target"><QuickViewGroup heading="{path: \'target>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><template:repeat \n                                    list="{path:\'target>Data\'}" \n                                    var="dataField"><template:if test="{dataField>Url}"><template:then><template:if test="{dataField>Url/UrlRef}"><template:then><QuickViewGroupElement\n                                                        label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        value="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        url="{path: \'dataField>Url/UrlRef\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        type="link"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                        label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        value="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        url="{path: \'dataField>Url\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        type="link"></QuickViewGroupElement></template:else></template:if></template:then><template:else><template:if test="{dataField>Value}"><template:with \n                                                    path="dataField>Value"\n                                                    helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                                                    var="fValue"><template:if test="{= ${fValue>sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement\n                                                                label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                value="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                url="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                type="url"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement\n                                                                        label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                        value="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                        type="email"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement\n                                                                                label="{path: \'dataFie\\ld>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                                value="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                                type="phone"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                                                label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                                value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"></QuickViewGroupElement></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></QuickViewPage></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/SubTitle.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\'}"><HBox justifyContent="SpaceBetween" renderType="Bare"><template:if test="{ovpCardProperties>/dynamicSubtitleAnnotationPath}"><template:then><template:with \n                        path=\'ovpCardProperties>/dynamicSubtitleAnnotationPath\'\n                        helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n                        var=\'headerInfo\'><template:with \n                            path="ovpCardProperties>/selectionAnnotationPath"\n                            helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n                            var=\'selVar\'><template:if test="{headerInfo>Description}"><HBox><FlexBox\n                                        items="{parts:[{path:\'entitySet>\'}, {path:\'headerInfo>\'}, {path:\'selVar>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}"\n                                        class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                            id="ovpDescriptionValue" \n                                            maxLines="2"\n                                            text="{path: \'headerInfo>Description/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                            class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{path: \'headerInfo>Description/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><template:if test="{ovpCardProperties>/subTitle}"><template:then><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                    id = "SubTitle-Text" \n                                    maxLines="2"\n                                    text="{ovpCardProperties>/subTitle}"\n                                    class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                            key="aria-label" \n                                            value="{ovpCardProperties>/subTitle}"\n                                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{ovpCardProperties>/dataPointAnnotationPath}"><template:then><template:with \n                                        path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                        helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n                                        var=\'dataPoint\'><template:with \n                                            path="ovpCardProperties>/selectionAnnotationPath"\n                                            helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n                                            var=\'selVar\'><template:if test="{dataPoint>Description}"><HBox><FlexBox\n                                                        items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'} ], formatter: \'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}"\n                                                        class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                                            id = "ovpDescriptionValue" \n                                                            maxLines="2"\n                                                            text="{path: \'dataPoint>Description\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                                    key="aria-label"\n                                                                    value="{path: \'dataPoint>Description\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"></FlexBox></template:else></template:if></template:else></template:if></template:else></template:if><Button\n                id="sapOvpCardAdditionalActions"\n                enabled="false"\n                class="sapOvpCardAdditionalActions"\n                type="Transparent"\n                icon="sap-icon://overflow"\n                press="onShowAdditionalCardActions"/></HBox></template:if></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/Title.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{ovpCardProperties>/title} || {ovpCardProperties>/dataPointAnnotationPath}"><HBox><template:if test="{ovpCardProperties>/title}"><template:then><FlexBox class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                    id= "ovpHeaderTitle" \n                    maxLines="3"\n                    text="{ovpCardProperties>/title}"\n                    class="sapOvpCardTitle tabindex-1"\n                    build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                            key="aria-label" \n                            value="{ovpCardProperties>/title}"\n                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' &amp;&amp; ${ovpCardProperties>/dataPointAnnotationPath}}"><template:then><template:with \n                                path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n                                var=\'dataPoint\'><template:if test="{dataPoint>Title}"><FlexBox items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}" class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                                            id="ovpHeaderTitleFromKPI" \n                                            maxLines="3"\n                                            text="{path: \'dataPoint>Title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                            class="sapOvpCardTitle tabindex-1"\n                                            build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                                                    key="aria-label" \n                                                    value="{path: \'dataPoint>Title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="3" writeToDom="true"/></customData></Text></FlexBox></template:if></template:with></template:then></template:if></template:else></template:if><template:if\n                test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.list.List\' || ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.table.Table\'}"><template:if test="{ovpCardProperties>/countHeaderFragment}"><core:Fragment fragmentName="{ovpCardProperties>/countHeaderFragment}" type="XML"/></template:if></template:if></HBox></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/LinkList.fragment.xml":'<core:FragmentDefinition\n\txmlns:build="sap.build"\n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns="sap.m"><template:if test="{ovpCardProperties>/staticContent}"><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStaticDataStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStaticDataCarousel" type="XML"/></template:elseif></template:if></template:then><template:else><template:with \n\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\tpath=\'ovpCardProperties>/headerAnnotationPath\' \n\t\t\t\tvar=\'header\'><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListCarousel" type="XML"/></template:elseif></template:if></template:with></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListCarousel.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"><Carousel \n\t\tid="pictureCarousel" \n\t\tloop="true" \n\t\tclass="sapOvpCardLinkListCarousel cardType" \n\t\tarrowsPlacement="PageIndicator"\n\t\tpages="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><VBox class="sapMCrslItemTableCell"><template:with \n\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\t\tvar=\'identification\'><template:if test="{= ${header>Title/Value} || ${header>Description/Value}}"><VBox class="{= ${header>Title/Value} || ${header>Description/Value} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\thref="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatString\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:if></template:with></template:elseif><template:else><Text \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if><Text \n\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></VBox></template:if><template:if test="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><template:then><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><HBox \n\t\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer"\n\t\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Image \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:if></template:with></template:elseif><template:else><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:else></template:if></template:then><template:else><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:if></template:with></template:elseif><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:else></template:if></template:else></template:if></template:with></VBox></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListNavigationTargets.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover title="{ovplibResourceBundle>RELATED_APPS}" placement="Auto"><HBox class="sapOvpLinkListStandardHBox"><List \n\t\t\t\tshowSeparators="None"\n\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' }"><CustomListItem></CustomListItem></List></HBox></Popover></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStandard.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:l="sap.ui.layout" \n\txmlns:ovp="sap.ovp.ui"\n  \txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n  \txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m" \n\txmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><List \n\t\t\tid="ovpLinkList"\n\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\'}"\n\t\t\tshowSeparators="None"\n\t\t\titems="{parts:[{path:\'entitySet>\'}, {path:\'header>\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatItems\'}"><template:with \n\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\tvar=\'identification\'><CustomListItem \n\t\t\t\t\tid="ovpCLI" \n\t\t\t\t\ttype="Active" \n\t\t\t\t\tpress="{= ${path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkNavigationSingleTarget\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListActionPress\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListLineItemUrl\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: \'\'}"\n\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><HBox\n\t\t\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleImage\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleImageSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleIconSubtitle\'\n\t\t\t\t\t\t: ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleImage\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleIcon\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleImageSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleIconSubtitle\'\n\t\t\t\t\t\t: \'ovpDefaultClass\'}\n\t\t\t\t\t\t{= ${path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'linkListHasPopover\'\n\t\t\t\t\t\t: \'\'} "><template:if test="{= ${header>ImageUrl} || ${header>TypeImageUrl}}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy sapOvpListItemDynamicCozy\' : \'sapOvpLinkListItemImageCompact sapOvpListItemDynamic\' } sapOvpListItemQuickLink"><template:if test="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><template:then><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="40px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getAvatarInitials\'}"></f:Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="36px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getAvatarInitials\'}"></f:Avatar></FlexBox></template:else></template:if></template:then><template:else><FlexBox height="40px"><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon" \n\t\t\t\t\t\t\t\t\t\t\t\t\tsize="24px" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpLinkListImageCenter"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></FlexBox></template:else></template:if></VBox></template:then></template:if><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpListItemDynamicCozy\' : \'sapOvpListItemDynamic\' }"><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:if test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:elseif><template:else><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if><template:if test="{header>Description/Value}"><template:then><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListSubTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:then></template:if></VBox></HBox></CustomListItem></template:with></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStaticDataCarousel.fragment.xml":'<core:FragmentDefinition \r\n\txmlns:build="sap.build" \r\n\txmlns:core="sap.ui.core" \r\n\txmlns:ovp="sap.ovp.ui"\r\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\r\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \r\n\txmlns="sap.m"><VBox><Carousel \r\n\t\t\tid="pictureCarousel" \r\n\t\t\tloop="true" \r\n\t\t\tclass="sapOvpCardLinkListCarousel cardType" \r\n\t\t\tarrowsPlacement="PageIndicator"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><template:repeat \r\n\t\t\t\t\tlist="{ovpCardProperties>/staticContent}" \r\n\t\t\t\t\tvar="contentRow"><VBox class="sapMCrslItemTableCell"><template:if test="{= ${contentRow>title} || ${contentRow>subTitle}}"><VBox class="{= ${contentRow>title} || ${contentRow>subTitle} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{contentRow>dataAction}"><template:then><Link \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \r\n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData"\r\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:else><Link \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \r\n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\r\n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \r\n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true" /><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:else></template:if><Text id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"><customData><ovp:CustomData key="aria-label" value="{contentRow>subTitle}" writeToDom="true" /><ovp:CustomData key="role" value="text" writeToDom="true" /></customData></Text></VBox></template:if><template:if test="{contentRow>dataAction}"><template:then><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \r\n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \r\n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}" \r\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \r\n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\r\n                                                src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \r\n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \r\n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \r\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"/></template:else></template:if></template:then><template:else><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \r\n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \r\n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}" \r\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"\r\n                                                densityAware="true" \r\n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\r\n                                                src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \r\n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \r\n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData" \r\n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}"\r\n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"/></template:else></template:if></template:else></template:if></VBox></template:repeat></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStaticDataStandard.fragment.xml":'<core:FragmentDefinition \n    xmlns:build="sap.build" \n    xmlns:core="sap.ui.core" \n    xmlns:l="sap.ui.layout" \n    xmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n    xmlns:smartlink="sap.ui.comp.navpopover"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n    xmlns="sap.m" \n    xmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox"><List \n            id="ovpLinkList"\n\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' } cardType"\n\t\t\tshowSeparators="None"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><items><template:repeat \n                    list="{ovpCardProperties>/staticContent}" \n                    var="contentRow"><CustomListItem \n                        id="{contentRow>id}" \n                        type="Active"\n                        press="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} ? \'onLinkListSemanticObjectPressLocalData\' : ${contentRow>dataAction} ? \'onLinkListActionPressLocalData\' : ${contentRow>semanticObject} &amp;&amp; !${contentRow>action} ? \'\' : \'onLinkListItemPressLocalData\'}"\n                        app:targetUri="{= ${contentRow>targetUri} ? ${contentRow>targetUri} : \'\'}"\n                        app:openInNewWindow="{=${contentRow>openInNewWindow} ? ${contentRow>openInNewWindow} :\'\' }"\n                        app:dataAction="{= ${contentRow>dataAction} ? ${contentRow>dataAction} : \'\'}"\n                        app:contentRowIndex="{path: \'contentRow>\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.contentRowIndex\'}"><HBox\n                            class="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleIconSubtitle\'\n                            : ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleIcon\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleIconSubtitle\'\n                            : \'ovpDefaultClass\'}"><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' } sapOvpListItemQuickLink"><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="40px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></f:Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="36px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></f:Avatar></FlexBox></template:else></template:if></VBox></template:then><template:elseif test="{contentRow>imageUri}"><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' } sapOvpListItemQuickLink"><FlexBox height="40px"><core:Icon \n                                                id="linkListIcon--{contentRow>id}"\n                                                class="sapOvpLinkListImageCenter"\n                                                tooltip="{contentRow>toolTip}" \n                                                useIconTooltip="false"\n                                                size="22px" \n                                                src="{contentRow>imageUri}"/></FlexBox></VBox></template:elseif></template:if><template:if test="{contentRow>dataAction}"><template:then><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label \n                                            id="linkListSubTitleLabel--{contentRow>id}" \n                                            class="sapOvpCardLinkListSubTitle" \n                                            text="{contentRow>subTitle}"/></VBox></template:then><template:elseif\n                                    test="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} }"><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:elseif><template:else><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemCozy\' : \'sapOvpLinkListItemCompact\' } sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:else></template:if></HBox></CustomListItem></template:repeat></items></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/list/CondensedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem\n            id="listItem"\n            type="Active"\n            press="onListItemPress"\n            class="sapOvpBarList sapOvpBarCondensedList"><template:if test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetails" type="XML"/><Link\n                        id="DataField"\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                        press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                    id="DataField"\n                    class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                    semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"\n                    contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                    forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                        id="DataField"\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><HBox class="sapOvpBarListHBox sapOvpBarStandardList"><micro:ComparisonMicroChart \n                    id= "BarChartDataPoint"\n                    class="sapOvpBarListComparisonMicroChartAlignment" \n                    width="100%"\n                    shrinkable="true"\n                    colorPalette="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.colorPaletteForComparisonMicroChart\'}"\n                    minValue="{minMaxModel>/minValue}"\n                    maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                            displayValue=" "\n                            value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                            color="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                    id="DataPoint1"\n                                    class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberPercentage"\n                                    textAlign="End"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                    id="DataPoint1"\n                                    class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpObjectNumber"\n                                    textAlign="End"\n                                    state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                                    unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"/></template:else></template:if></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField"><template:if test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                path="dataField>Target"\n                                                helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                                                var="contact"><VBox class="textAlignRight"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n                                                        id = "contactLink"\n                                                        binding="{= ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                        text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                id="DataPoint2"\n                                class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber sapOvpBarListSubDataField\' : \'sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"/></template:if></template:else></template:if></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/ExtendedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem\n            id="listItem"\n            type="Active"\n            press="onListItemPress"><HBox class="sapOvpBarListHBox sapOvpExtendedBarListHBox"><VBox class="sapOvpBarListVBoxLeft"><template:if test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                                    id="DataField1"\n                                    class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                                id="DataField1"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                                id="DataField1"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><template:if test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfSecondDataField\'}"><template:then><navpopover:SmartLink\n                                id="DataField2"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfSecondDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text\n                                id="DataField2"\n                                class="sapOvpBarListDataField sapOvpBarListSubDataField sapOvpExtendedBarListBlock sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><layoutData><FlexItemData growFactor="1"/></layoutData><micro:ComparisonMicroChart \n                        id="BarChartDataPoint" \n                        class="sapOvpBarListComparisonMicroChartAlignment" \n                        width="100%" \n                        height="1rem"\n                        colorPalette="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.colorPaletteForComparisonMicroChart\'}"\n                        minValue="{minMaxModel>/minValue}"\n                        maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                                displayValue=" "\n                                value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                                color="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart></VBox><VBox class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? \'sapOvpBarListVBoxRight\' : \'sapOvpListEmptyField\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                                list="{path:\'lineItem>\'}"\n                                var="dataField"><template:if test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                    path="dataField>Target"\n                                                    helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                                                    var="contact"><VBox class="textAlignRight" width="100%"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n                                                            id="DataField2Link"\n                                                            binding="{= ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                            text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            textAlign="Right"\n                                                            press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                    id="DataPoint2"\n                                    class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                    textAlign="End"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                                    unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                    state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"/></template:if></template:else></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 2}" ><ObjectNumber\n                            id="DataPoint3"\n                            class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                            textAlign="End"\n                            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                            unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatThirdDataPointState\'}"/></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                id="BarChartValue"\n                                class="sapOvpBarListObjectNumber sapOvpBarListObjectNumberPercentage sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                id="BarChartStateValue"\n                                class="sapOvpBarListObjectNumber valueStateText "\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"></ObjectNumber></template:else></template:if></VBox></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/List.fragment.xml":'<core:FragmentDefinition\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:ovp="sap.ovp.ui"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/imageSupported} &amp;&amp; ${ovpCardProperties>/listType} === \'condensed\' }" ><template:then><core:Fragment fragmentName="sap.ovp.cards.list.StandardListImage" type="XML"/></template:then><template:else><List \r\n                id="ovpList" \r\n                items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatItems\'}" \r\n                class="listCardType"><template:with \r\n                    path=\'ovpCardProperties>/annotationPath\' \r\n                    helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \r\n                    var=\'lineItem\'><template:if test="{= ${ovpCardProperties>/listType} === \'extended\'}" ><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.ExtendedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.ObjectList" type="XML"/></template:else></template:if></template:then><template:else><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.CondensedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.StandardList" type="XML"/></template:else></template:if></template:else></template:if></template:with></List></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/list/ObjectList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"><items><ObjectListItem\n            id="listItem"\n            class="sapOvpObjectListItem sapOvpListFragment sapUiContentPadding"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointOrField\'}"\n            numberState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"><attributes><ObjectAttribute \n                    id="listItem2Row1Column"\n                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectAttribute \n                            id="listItem3row1column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectAttribute \n                                    id="listItem3row1column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><ObjectAttribute \n                                    id="listItem3row1column" \n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></template:else></template:if></attributes><firstStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                            id="listItem2row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    state="None" /></template:then><template:else><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    state="None" /></template:else></template:if></template:else></template:if></firstStatus><secondStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 2}" ><template:then><ObjectStatus\n                            id="listItem3row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatThirdDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                                    id="listItem3row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    state="None" /></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                            state="None" /></template:then><template:else><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/sixthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                            state="None" /></template:else></template:if></template:else></template:if></template:else></template:if></secondStatus></ObjectListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/StandardList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"><items><StandardListItem\n            id="listItem"\n            class="sapOvpStandardListItem"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointOrField\'}"\n            infoState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"></StandardListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/StandardListImage.fragment.xml":'<core:FragmentDefinition\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:ovp="sap.ovp.ui"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\r\n    xmlns:build="sap.build"><List \r\n        id="ovpList" \r\n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatItems\'}"><template:with \r\n            path=\'ovpCardProperties>/annotationPath\' \r\n            helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \r\n            var=\'lineItem\'><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>imageListCardType}" writeToDom="true" /></customData><items><StandardListItem\r\n                        id="listItem"\r\n                        class="sapOvpStandardListItem sapOvpStandardListItemImagesIcons"\r\n                        icon="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatImageUrl\'}"\r\n                        iconInset = "false"\r\n                        title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\r\n                        description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\r\n                        info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointOrField\'}"\r\n                        infoState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\r\n                        type="Active"\r\n                        press="onListItemPress"></StandardListItem></items></template:with></List></core:FragmentDefinition>\r\n',
	"sap/ovp/cards/quickview/Quickview.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:l="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickViewCard id="quickViewCard" class="sapMPanelContent sapOvpCardContent cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>quickViewCard}" writeToDom="true" /></customData><template:with \n            path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n            var="header"><QuickViewPage\n                pageId="quickViewPage"\n                header="{= ${header>TypeNamePlural} ? ${path: \'header>TypeNamePlural\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'\' }"\n                icon="{= ${header>ImageUrl} ? ${path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : (${header>TypeImageUrl} ? ${path: \'header>TypeImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : \'\') }"\n                title="{= ${header>Title} ? ${path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'} :  \'\' }"\n                description="{= ${header>Description} ? ${path: \'header>Description\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'} :  \'\' }"><template:with \n                    path="ovpCardProperties>/annotationPath" \n                    helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n                    var="facets"><template:repeat \n                        list="{path:\'facets>\'}" \n                        var="referenceFacet"><template:if test="{referenceFacet>com.sap.vocabularies.UI.v1.IsSummary}"><template:with \n                                path="referenceFacet>Target"\n                                helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                                var="target"><QuickViewGroup heading="{path: \'target>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><template:repeat \n                                        list="{path:\'target>Data\'}" \n                                        var="dataField"><template:if test="{dataField>Url}"><template:then><template:if test="{dataField>Url/UrlRef}"><template:then><QuickViewGroupElement\n                                                            label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"\n                                                            url="{path: \'dataField>Url/UrlRef\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            type="link"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                            label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"\n                                                            url="{path: \'dataField>Url\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            type="link"></QuickViewGroupElement></template:else></template:if></template:then><template:else><template:if test="{dataField>Value}"><template:with \n                                                        path="dataField>Value"\n                                                        helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                                                        var="fValue"><template:if test="{= ${fValue>sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement\n                                                                    label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                    value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"\n                                                                    url="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                    type="url"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement\n                                                                            label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                            value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"\n                                                                            type="email"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement\n                                                                                    label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                                    value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"\n                                                                                    type="phone"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                                                    label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                                    value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"></QuickViewGroupElement></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></template:with></QuickViewPage></template:with></QuickViewCard></core:FragmentDefinition>\n',
	"sap/ovp/cards/rta/AddCustomActions.fragment.xml":'<core:FragmentDefinition\n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.ui.layout.form"\n    xmlns="sap.m"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Toolbar id="sapOVPCustomActionsToolbar"><ToolbarSpacer/><Button icon="sap-icon://add"  press="addActionRow"/></Toolbar><Table \n        id="sapOvpCustomActions"\n        items="{path:\'/objectStreamCardsSettings/customActions\'}"\n        sticky="ColumnHeaders"\n        inset="false"\n        fixedLayout="false"\n        visible="true"><columns><Column><Text text="Text"/></Column><Column><Text text="Action"/></Column><Column><Text text="Position"/></Column><Column><Text text=""/></Column></columns><items><ColumnListItem><cells><Input type="Text" value="{text}" change="updateCard" required="true" /><Input type="Text" value="{press}" change="updateCard" required="true"/><Input type="Text" value="{position}" change="updateCard" required="true"/><Button icon="sap-icon://delete" press="onActionDelete"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/AddStaticParameters.fragment.xml":'<core:FragmentDefinition\n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.ui.layout.form"\n    xmlns="sap.m"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Toolbar id="sapOVPCustomParamToolbar"><ToolbarSpacer/><Button icon="sap-icon://add"  press="addStaticParameterRow"/></Toolbar><Table \n        id="sapOvpStaticParameters"\n        items="{path:\'/aAllStaticParameters\'}" \n        sticky="ColumnHeaders" \n        inset="false"\n        fixedLayout="false"\n        visible="true"><columns><Column id="1"><Text text="key"/></Column><Column id="2"><Text text="value"/></Column><Column><Text text=""/></Column></columns><items><ColumnListItem><cells><Input type="Text" value="{key}" change="updateCard" required="true" /><Input type="Text" value="{value}" change="updateCard" required="true"/><Button icon="sap-icon://delete" press="onParameterDelete"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/AppSettingsDialog.view.xml":'<mvc:View \n    xmlns:mvc="sap.ui.core.mvc" \n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.ui.layout.form"\n    xmlns:l="sap.ui.layout"\n    controllerName="sap.ovp.cards.rta.AppSettingsDialog"><VBox class="sapOvpScrollContainer sapUiLargeMargin"><f:Form editable="true"><f:layout><f:ResponsiveGridLayout\n                    labelSpanXL="6" \n                    labelSpanL="6" \n                    labelSpanM="6" \n                    labelSpanS="6" \n                    adjustLabelSpan="false"\n                    emptySpanXL="0" \n                    emptySpanL="0" \n                    emptySpanM="0" \n                    emptySpanS="0"\n                    singleContainerFullSize="false" /></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel>showGlobalFilter}"><f:fields><Switch state="{/showGlobalFilters}" type="Default" change="onChange" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_FILTER_ENTITY_TYPE}" visible="{/showGlobalFilters}"><f:fields><ComboBox \n                                    items="{path: \'/allEntityTypes\'}"\n                                    selectedKey= "{/globalFilterEntityType}"\n                                    forceSelection="false"\n                                    change="onChange" ><core:Item key="{name}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_LIVE_FILTER}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/enableLiveFilter}"  change="onChange" type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_SMART_VARIANT}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/smartVariantRequired}"  change="onChange" type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_CONTAINER_LAYOUT}"><f:fields><SegmentedButton selectedKey="{/containerLayout}" select="onChange" ><items><SegmentedButtonItem key="fixed" text="fixed" /><SegmentedButtonItem key="resizable" text="resizable" /></items></SegmentedButton></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_DATE_RANGE_TYPE}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/useDateRangeType}"  change="onChange" type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_DATE_RELATIVE_FORMAT}"><f:fields><Switch state="{/showDateInRelativeFormat}"  change="onChange" type="Default"  /></f:fields></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></VBox></mvc:View>',
	"sap/ovp/cards/rta/KPICardTable.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns="sap.m"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_KPI_TABLE}({/NoOfKPIItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}"\r\n            width="40%"\r\n            search="onSearch"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><Table \r\n        id="sapOvpKPITable"\r\n        items="{path:\'/KPIData\', length:5}" \r\n        sticky="ColumnHeaders" \r\n        inset="false"\r\n        fixedLayout="false"><columns><Column id="sapOvpGroupTitle"><Text text="{ovpResourceModel>OVP_KEYUSER_KPI_GROUP_TITLE}"/></Column><Column id="sapOvpKPITitle" minScreenWidth="Tablet" demandPopin="true"><Text text="{ovpResourceModel>OVP_KEYUSER_KPI_TITLE}"/></Column></columns><items><ColumnListItem press="onItemPress" type="Active"><cells><Text text="{GroupTitle}"/><Text text="{KPITitle}"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/SelectIcons.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectIcons"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_ICONS_DIALOG}({/NoOfIcons})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%" \r\n            search="filterTable"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="iconsScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="IconTable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/Icons}" \r\n            visible="{= ${/tableName} === \'IconTable\' ? true : false}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_ICON}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_NAME}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><core:Icon src="{Icon}"/><Text text="{Name}"/></cells></ColumnListItem></items></Table><Table \r\n            id="ImageTable" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/Images}" \r\n            visible="{= ${/tableName} === \'ImageTable\' ? true : false}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_IMAGE}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_NAME}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Image src="{Image}" width="3rem" height="3rem"/><Text text="{Name}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectKPI.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectKPI"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_KPI_TABLE}({/NoOfKPIItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%"\r\n            search="onSearch"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="KPIItemScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="KPITable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/KPIItem}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_KPI_GROUP_TITLE}"/></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_KPI_TITLE}"/></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{GroupTitle}"/><Text text="{KPITitle}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectLineItem.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectLineItem"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_LINEITEM_ANNO}({/NoOfLineItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%" \r\n            search="filterTable"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="lineItemScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="LineItemTable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/lineItem}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_LINEITEM_QUAL}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_VISIBLE_FIELDS}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{Label}"/><Text text="{VisibleFields}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectLinks.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectLinks"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_APPLICATIONS_DIALOG}({/NoOfLinks})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%" \r\n            search="filterTable"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="linksScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="LinkTable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/links}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_APPLICATION_NAME}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_TECHNICAL_NAME}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{name}"/><Text text="{value}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SettingsDialog.view.xml":'<mvc:View \n    xmlns:mvc="sap.ui.core.mvc" \n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:l="sap.ui.layout"\n\tcontrollerName="sap.ovp.cards.rta.SettingsDialog"><OverflowToolbar \n        width="100%" \n        visible="{visibility>/viewSwitchEnabled}" \n        class="sapOvpSettingsDialogOverFlowToolbar sapUiSmallMarginTopBottom"><ToolbarSpacer/><Select enabled="{visibility>/showViewSwitch}"\n                    items="{\n                        path: \'/aViews\'\n                    }"\n                    selectedKey="{/selectedKey}"\n                    change="selectViewSwitch"><core:Item key="{key}" text="{text}"/></Select><Button \n                id="addView" \n                text="{ovpResourceModel>OVP_KEYUSER_ADD_VIEW_BUTTON}" \n                press="addView" \n                type="Transparent"/><Button \n                id="deleteView" \n                enabled="{visibility>/showViewName}" \n                type="Transparent"\n                text="{ovpResourceModel>OVP_KEYUSER_DELETE_VIEW_BUTTON}" \n                press="deleteView"/><ToolbarSpacer/></OverflowToolbar><template:if test="{= ${deviceSystemProperties>/phone}}" ><template:then><Carousel><pages><l:VerticalLayout><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogCardPreview" type="XML"/></l:VerticalLayout><l:VerticalLayout><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogForm" type="XML"/></l:VerticalLayout></pages></Carousel></template:then><template:else><ScrollContainer\n                id="SettingsDialogScrollContainerForForm"\n                class="sapOvpScrollContainer"\n                width="100%"\n                height="100%"\n                horizontal="false"\n                vertical="true"\n                focusable="true"><FlexBox id="dialogContainer" direction="{deviceMediaProperties>/deviceMedia}"><template:if test="{= !${ovpCardProperties>/addNewCard}}" ><VBox id="dialogCardVBox"><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogCardPreview" type="XML"/></VBox></template:if><VBox id="sapOvpSettingsForm"><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogForm" type="XML"/></VBox></FlexBox></ScrollContainer></template:else></template:if></mvc:View>',
	"sap/ovp/cards/rta/SettingsDialogCardPreview.fragment.xml":'<core:FragmentDefinition\r\n    xmlns:core="sap.ui.core"\r\n    xmlns="sap.m"><VBox class="sapUiSmallMarginTop sapUiSmallMarginBegin"><HBox id="dialogCardOverlay" class="dialogCardVBox dialogCardOverlay"><core:ComponentContainer \r\n                id="dialogCard" \r\n                busyIndicatorDelay="0" \r\n                busy="true" \r\n                visible="{visibility>/cardPreview}"/><MessagePage \r\n                id="dialogCardNoPreview" \r\n                visible="{= !${visibility>/cardPreview}}" \r\n                icon="sap-icon://map-3"\r\n                class="sapOvpSettingsDialogErrorPreviewWidth"\r\n                showHeader="false" \r\n                description=""/></HBox><HBox visible="{visibility>/showViewSwitch}"><Button \r\n                class="sapUiMediumMarginBottom" \r\n                enabled="{/isViewResetEnabled}"\r\n                press="resetView" \r\n                text="{ovpResourceModel>OVP_KEYUSER_RESET_VIEW_BUTTON}" \r\n                type="Transparent"/></HBox></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/rta/SettingsDialogForm.fragment.xml":'<core:FragmentDefinition \r\n    xmlns:f="sap.ui.layout.form"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \r\n    xmlns="sap.m"><f:Form editable="true"><f:layout><f:ResponsiveGridLayout\r\n                labelSpanXL="12" \r\n                labelSpanL="12" \r\n                labelSpanM="12" \r\n                labelSpanS="12" \r\n                adjustLabelSpan="false"\r\n                emptySpanXL="0" \r\n                emptySpanL="0" \r\n                emptySpanM="0" \r\n                emptySpanS="0"\r\n                singleContainerFullSize="false" /></f:layout><f:formContainers><template:if test="{= !${ovpCardProperties>/addNewCard}}"><template:then><f:FormContainer id="sapOvpSettingsFormContainer"><f:formElements><template:if test="{= !(${ovpCardProperties>/bFioriToolsRTAMode} === true || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE}" visible="{visibility>/title}"><f:fields><Input \r\n                                                id="sapOvpSettingsTitle" \r\n                                                value="{/title}" \r\n                                                change="validateInputField"\r\n                                                editable="true" \r\n                                                required="true" \r\n                                                valueState="{= ${/title} === \'\' ? \'Error\' : \'None\'}"\r\n                                                valueStateText="{= ${/title} === \'\' ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_VALUE_STATE} : \'\'}" /></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE}" visible="{visibility>/title}"><f:fields><Input \r\n                                                id="sapOvpSettingsTitle" \r\n                                                value="{/title}" \r\n                                                change="updateCard"\r\n                                                editable="true" \r\n                                                showSuggestion="true"\r\n                                                required="true"\r\n                                                suggestionItems="{path: \'/ai18nPropertiesAndTitle\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DYNAMIC_SUBTITLE_SWITCH}" visible="{visibility>/dynamicSwitchSubTitle}"><f:fields><Switch \r\n                                        id="sapOvpSettingsSwitchSubTitle"\r\n                                        state="{visibility>/dynamicSwitchStateSubTitle}"\r\n                                        type="Default"  \r\n                                        change="updateCard" /></f:fields></f:FormElement><template:if test="{= ${ovpCardProperties>/bInsightEnabled} &amp;&amp; \r\n                                                (${ovpCardProperties>/template} === \'sap.ovp.cards.list\' || \r\n                                                ${ovpCardProperties>/template} === \'sap.ovp.cards.table\' || \r\n                                                ${ovpCardProperties>/template} === \'sap.ovp.cards.v4.table\' || \r\n                                                ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.analytical\' ||\r\n                                                ${ovpCardProperties>/template} === \'sap.ovp.cards.v4.charts.analytical\')}" ><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_INSIGHTS_ENABLE}" visible="{visibility>/enableAddToInsights}"><f:fields><Switch \r\n                                            id="sapOvpSettingsSwitchInsights"\r\n                                            state="{/bInsightsEnable}"\r\n                                            type="Default"  \r\n                                            change="updateCard" /></f:fields></f:FormElement></template:if><template:if test="{= ${ovpCardProperties>/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties>/template} !== \'sap.ovp.cards.v4.linklist\'}"><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}" visible="{visibility>/dynamicSubTitle}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsDynamicSubTitle" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/dynamicSubTitle\'\r\n                                            }"\r\n                                            selectedKey= "{/dynamicSubtitleAnnotationPath}"\r\n                                            forceSelection="false"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_VIEW_NAME}" visible="{visibility>/showViewName}"><f:fields><Input \r\n                                            id="sapOvpSettingsViewName" \r\n                                            value="{/viewName}" \r\n                                            change="validateInputField"\r\n                                            required="true"\r\n                                            valueState="{= ${/viewName} === \'\' ? \'Error\' : \'None\'}"\r\n                                            valueStateText="{= ${/viewName} === \'\' ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_VIEW_NAME} : \'\'}" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SET_DEFAULT}" visible="{visibility>/showDefaultView}"><f:fields><Switch \r\n                                            id="sapOvpDefaultViewSwitch" \r\n                                            state="{/isDefaultView}" \r\n                                            change="updateCard"\r\n                                            type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_ENTITYSET}" visible="{visibility>/showEntitySet}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsEntitySet" width="100%"\r\n                                            items="{\r\n                                                path: \'/allEntitySet\'\r\n                                            }"\r\n                                            selectedKey= "{/entitySet}"\r\n                                            forceSelection="false"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement></template:if><template:if test="{= !(${ovpCardProperties>/bFioriToolsRTAMode} === true || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}" visible="{visibility>/subTitle}"><f:fields><Input \r\n                                                id="sapOvpSettingsSubTitle" \r\n                                                value="{/subTitle}" \r\n                                                change="updateCard"\r\n                                                editable="true" /></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}" visible="{visibility>/subTitle}"><f:fields><Input \r\n                                                id="sapOvpSettingsSubTitle" \r\n                                                value="{/subTitle}" \r\n                                                change="updateCard"\r\n                                                editable="true" \r\n                                                showSuggestion="true"\r\n                                                suggestionItems="{path: \'/ai18nPropertiesAndSubTitle\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><template:if test="{= ${ovpCardProperties>/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties>/template} !== \'sap.ovp.cards.v4.linklist\'}" ><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_HEADER}" visible="{visibility>/kpiHeader}"><f:fields><Switch \r\n                                            id="sapOvpSettingsKPIHeaderSwitch"\r\n                                            state="{/hasKPIHeader}"\r\n                                            type="Default"  \r\n                                            change="updateCard" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_Value}" visible="{visibility>/dataPoint}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsDataPoint" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/dataPoint\'\r\n                                            }"\r\n                                            selectedKey="{/dataPointAnnotationPath}"\r\n                                            forceSelection="false"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><template:if test="{= !(${ovpCardProperties>/bFioriToolsRTAMode} === true || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_DESCRIPTION}" visible="{visibility>/valueSelectionInfo}"><f:fields><Input \r\n                                                    id="sapOvpSettingsValueSelectionInfo" \r\n                                                    value="{/valueSelectionInfo}" \r\n                                                    change="updateCard"\r\n                                                    editable="true" /></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_DESCRIPTION}" visible="{visibility>/valueSelectionInfo}"><f:fields><Input \r\n                                                    id="sapOvpSettingsValueSelectionInfo" \r\n                                                    value="{/valueSelectionInfo}" \r\n                                                    change="updateCard"\r\n                                                    editable="true"\r\n                                                    showSuggestion="true"\r\n                                                    suggestionItems="{path: \'/ai18nPropertiesAndValSelInfo\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LIST_TYPE}" visible="{visibility>/listType}"><f:fields><Switch \r\n                                            id="sapOvpSettingsListType" \r\n                                            state="{/isExtendedList}" \r\n                                            change="updateCard"\r\n                                            type="Default"  /></f:fields></f:FormElement></template:if><f:FormElement label="{ovpCardProperties>/listFlavorName}" visible="{visibility>/listFlavor}"><f:fields><Switch \r\n                                            id="sapOvpSettingsListFlavorForList" \r\n                                            state="{/isBarList}" \r\n                                            type="Default"\r\n                                            change="updateCard" /></f:fields></f:FormElement><f:FormElement label="{ovpCardProperties>/listFlavorName}" visible="{visibility>/listFlavorForLinkList}"><f:fields><SegmentedButton \r\n                                            id="sapOvpSettingsListFlavorForLinkList" \r\n                                            select="updateCard"\r\n                                            selectedKey="{/listFlavor}" ><items><SegmentedButtonItem \r\n                                                    id="sapOvpSettingsListFlavorList" \r\n                                                    key="standard"\r\n                                                    text="{ovpResourceModel>OVP_KEYUSER_LIST_TEXT_SEG_BUTTON}" /><SegmentedButtonItem \r\n                                                    id="sapOvpSettingsListFlavorCarousel" \r\n                                                    key="carousel"\r\n                                                    text="{ovpResourceModel>OVP_KEYUSER_CAROUSEL_TEXT_SEG_BUTTON}" /></items></SegmentedButton></f:fields></f:FormElement><template:if test="{= ${ovpCardProperties>/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties>/template} !== \'sap.ovp.cards.v4.linklist\'}" ><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTION_PRESENTATION_VAR}" visible="{visibility>/selectionPresentationVariant}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsFilterAndPresentedBy" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/selectionPresentationVariant\'\r\n                                            }"\r\n                                            selectedKey= "{/selectionPresentationAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_ANNO}" visible="{visibility>/KPI}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsKPIAnnotation"\r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/KPI\'\r\n                                            }"\r\n                                            selectedKey="{/kpiAnnotationPath}"\r\n                                            change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTION_VAR}" visible="{visibility>/selectionVariantSPVorKPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsFilterByAnalytical" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'/selectionVariant\'}, {path:\'/selectionAnnotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAnnotationLabel\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_PRESENTATION_VAR}" visible="{visibility>/presentationVariantSPVorKPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsPresentedByAnalytical" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'/presentationVariant\'}, {path:\'/presentationAnnotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAnnotationLabel\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_IDENTIFICATION_ANNO}" visible="{visibility>/KPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsIdentificationForKPI" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'staticCardProperties>/links\'}, {path:\'/KPINav\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getApplicationName\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TYPE_OF_CHART}" visible="{visibility>/chartSPVorKPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsChartAnalytical" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'/chart\'}, {path:\'/chartAnnotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAnnotationLabel\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTION_VAR}" visible="{visibility>/selectionVariant}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsFilterBy" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                                path: \'/selectionVariant\'\r\n                                                            }"\r\n                                            selectedKey= "{/selectionAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_PRESENTATION_VAR}" visible="{visibility>/presentationVariant}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsPresentedBy" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/presentationVariant\'\r\n                                            }"\r\n                                            selectedKey= "{/presentationAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LINEITEM_ANNO}" visible="{visibility>/lineItem}"><f:fields><Input \r\n                                            id="sapOvpSettingsLineItem"\r\n                                            value="{\r\n                                                path: \'/lineItemQualifier\'\r\n                                            }"\r\n                                            showValueHelp="true" \r\n                                            editable="true" \r\n                                            enabled="true" \r\n                                            valueHelpOnly="true"\r\n                                            valueHelpRequest="openLineItemValueHelpDialog" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_IDENTIFICATION_ANNO}" visible="{visibility>/identification}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsIdentification" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/identification\'\r\n                                            }"\r\n                                            selectedKey= "{/identificationAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TYPE_OF_CHART}" visible="{visibility>/chart}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsChart" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/chart\'\r\n                                            }"\r\n                                            forceSelection="false"\r\n                                            selectedKey= "{/chartAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/template} === \'sap.ovp.cards.linklist\' ||\r\n                                ${ovpCardProperties>/template} === \'sap.ovp.cards.v4.linklist\') &amp;&amp; \r\n                                ${ovpCardProperties>/staticContent}}" ><f:FormElement><f:fields><Toolbar><content><ToolbarSpacer /><Button \r\n                                                    id="moveToTheTop" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_TOP}" \r\n                                                    icon="sap-icon://collapse-group" \r\n                                                    press="onPressMoveToTheTop" \r\n                                                    enabled="{visibility>/moveToTheTop}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="moveUp" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_UP}" \r\n                                                    icon="sap-icon://navigation-up-arrow" \r\n                                                    press="onPressMoveUp" \r\n                                                    enabled="{visibility>/moveUp}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="moveDown" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_DOWN}" \r\n                                                    icon="sap-icon://navigation-down-arrow" \r\n                                                    press="onPressMoveDown" \r\n                                                    enabled="{visibility>/moveDown}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="moveToTheBottom" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_BOTTOM}" \r\n                                                    icon="sap-icon://expand-group" \r\n                                                    press="onPressMoveToTheBottom" \r\n                                                    enabled="{visibility>/moveToTheBottom}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="delete" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_DELETE}" \r\n                                                    icon="sap-icon://delete" \r\n                                                    press="onPressDelete" \r\n                                                    enabled="{visibility>/delete}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="add" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_ADD}" \r\n                                                    icon="sap-icon://add" \r\n                                                    press="onPressAdd" \r\n                                                    type="Transparent"/></content></Toolbar></f:fields></f:FormElement><f:FormElement><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.StaticLinkListCardLineItemsPanel" type="XML"/></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/template} === \'sap.ovp.cards.charts.analytical\' ||\r\n                                ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.smart.chart\') &amp;&amp; ${ovpCardProperties>/NewKPICard}}" ><f:FormElement><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.KPICardTable" type="XML"/></f:fields></f:FormElement><f:FormElement><f:fields><FlexBox justifyContent="End"><Link  text="{ovpResourceModel>OVP_KEYUSER_KPI_LINK}({/NoKPI})" press="onSeePress"/></FlexBox></f:fields></f:FormElement></template:if><template:if test="{= ${ovpCardProperties>/layoutDetail} === \'resizable\'}"><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_STOP_RESIZE}" visible="{visibility>/stopResizing}"><f:fields><Switch \r\n                                            id="sapOvpSettingsStopResize"\r\n                                            state="{= !${/stopResizing}}"\r\n                                            type="Default" \r\n                                            change="onResizingChange"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DEFAULT_NUMBER_OF_COLUMNS}" visible="{visibility>/noOfColumns}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsNumberOfColumns" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/NoOfColumns\'\r\n                                            }"\r\n                                            forceSelection="false"\r\n                                            selectedKey= "{/defaultSpan/cols}"\r\n                                            change="onNumberOfColumnsChanged" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DEFAULT_NUMBER_OF_ROWS}" visible="{visibility>/noOfRows}"><f:fields><template:if test="{= ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.analytical\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.smart.chart\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.bubble\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.donut\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.line\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.linklist\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.v4.linklist\'}" ><template:then><ComboBox \r\n                                                    id="sapOvpSettingsNumberOfRows" \r\n                                                    width="100%"\r\n                                                    items="{\r\n                                                        path: \'/NoOfRows\'\r\n                                                    }"\r\n                                                    forceSelection="false"\r\n                                                    selectedKey= "{/defaultSpan/rows}"\r\n                                                    change="onNumberOfRowsChanged" ><core:Item key="{value}" text="{name}"/></ComboBox></template:then><template:else><StepInput\r\n                                                    id="sapOvpSettingsNumberOfRows"\r\n                                                    value="{/defaultSpan/rows}"\r\n                                                    min="0"\r\n                                                    max="99"\r\n                                                    valueStateText="Number of Rows should be between 0 and 99"\r\n                                                    change="onNumberOfRowsChanged"/></template:else></template:if></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/bFioriToolsRTAMode} === true || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_AUTHORIZATION}"><f:fields><Input \r\n                                            id="sapOvpCardProperiesAuthorization" \r\n                                            value="{/requireAppAuthorization}" \r\n                                            change="updateProperty" \r\n                                            width="100%"\r\n                                            editable="true"/></f:fields></f:FormElement><f:FormElement><f:fields><CheckBox \r\n                                            id="sapOVPAddODataSelect" \r\n                                            width="100%" \r\n                                            visible="{visibility>/addODataSelect}"\r\n                                            text="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                            tooltip="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                            selected="{/addODataSelectCheckBox}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement><f:fields><CheckBox \r\n                                            id="sapOVPEnableCustomParameter" \r\n                                            width="100%"\r\n                                            text="{ovpResourceModel>OVP_DTA_CUSTOM_PARAMS}"\r\n                                            selected="{/addCustomParameters}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_CUSTOM_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><Input \r\n                                            id="sapOVPCustomParams" \r\n                                            value="{/customParams}" \r\n                                            change="validateInputField"\r\n                                            editable="true"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_STATIC_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddStaticParameters" type="XML"/></f:fields></f:FormElement><f:FormElement visible="{visibility>/addCustomActions}"><f:fields><CheckBox \r\n                                            id="sapOVPEnableCustomActions"\r\n                                            width="100%"\r\n                                            text="{ovpResourceModel>OVP_DTA_CUSTOM_Actions}"\r\n                                            selected="{/addCustomActions}"\r\n                                            select="updateProperty" ></CheckBox></f:fields></f:FormElement><f:FormElement visible="{/addCustomActions}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddCustomActions" type="XML"/></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/bFioriToolsRTAMode} !== true || ${ovpCardProperties>/layer} !==\'CUSTOMER_BASE\') &amp;&amp; ${ovpCardProperties>/NewKPICard}}"><f:FormElement><f:fields><CheckBox \r\n                                            id="sapOVPEnableCustomParameter"\r\n                                            width="100%"\r\n                                            text="{ovpResourceModel>OVP_DTA_CUSTOM_PARAMS}"\r\n                                            selected="{/addCustomParameters}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_STATIC_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddStaticParameters" type="XML"/></f:fields></f:FormElement></template:if></f:formElements></f:FormContainer></template:then><template:else><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DATASOURCE}" visible="{visibility>/dataSource}"><f:fields><RadioButtonGroup id="useDatasource_RadioButtonGroup" columns="2" width="100%" class="sapUiMediumMarginBottom"><buttons><RadioButton id="sapOVPExistingDataSource" text="{ovpResourceModel>OVP_KEYUSER_EXISTING_DS}" selected="true" select="updateProperty"/><RadioButton id="sapOVPNewDataSource" text="{ovpResourceModel>OVP_KEYUSER_NEW_DS}" selected="false" select="updateProperty"/></buttons></RadioButtonGroup></f:fields></f:FormElement><f:FormElement visible="{visibility>/dataSourceExisting}"><f:fields><ComboBox \r\n                                            id="sapOVPDataSourceExistingComboBox" \r\n                                            width="100%"\r\n                                            items="{path: \'/datasources\'}"\r\n                                            change="onDatasourceComboboxChanged" \r\n                                            selectedKey= "{/datasSourceExisting}"\r\n                                            visible="{visibility>/dataSourceExisting}"><core:Item key="{Title}" text="{Title}"/></ComboBox></f:fields></f:FormElement><f:FormElement visible="{visibility>/dataSourceNew}"><f:fields><Input \r\n                                            id="sapOVPDataSourceNewInput" \r\n                                            value="{/datasSourceNew}" \r\n                                            change="onDatasourceComboboxChanged"\r\n                                            editable="true" \r\n                                            showSuggestion="true"\r\n                                            required="true"\r\n                                            suggestionItems="{path: \'/datasources\'}"\r\n                                            width="100%"\r\n                                            visible="{visibility>/dataSourceNew}"><core:Item key="{Title}" text="{Title}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>SELECTCARDTYPEWIZARDSTEP_TITLE_LABEL}" visible="{visibility>/selectCardType}"><f:fields><ComboBox \r\n                                            id="sapOVPCardType" \r\n                                            width="100%"\r\n                                            items="{path: \'/cardType\'}"\r\n                                            selectedKey="{/template}"\r\n                                            selectionChange="onCardTypeSelected" ><core:Item key="{template}" text="{text}"/></ComboBox></f:fields></f:FormElement><f:FormElement visible="{visibility>/addKPIHeader}"><f:fields><CheckBox \r\n                                            id="sapOVPAddKpiCheckBoxID" \r\n                                            width="100%" \r\n                                            text="{ovpResourceModel>CARD_CUSTOMIZATION_ADD_KPI_HEADER_LABEL}"\r\n                                            tooltip="{ovpResourceModel>CARD_CUSTOMIZATION_ADD_KPI_HEADER_TOOLTIP}"\r\n                                            selected="{/addKPIHeaderCheckBox}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>CARD_ENTITYSET}" visible="{visibility>/setEntitySet}"><f:fields><ComboBox \r\n                                            id="sapOVPEntitySetList" \r\n                                            width="100%" \r\n                                            required="true"\r\n                                            items="{path: \'/allEntitySet\'}"\r\n                                            change="updateProperty" \r\n                                            forceSelection="false"\r\n                                            selectedKey= "{/entitySet}"><core:Item key="{entityType}" text="{value}"/></ComboBox></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel>OVP_KEYUSER_GENERAL}" visible="{visibility>/setGeneralCardProperties}"><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE}"><f:fields><Input \r\n                                        id="sapOvpCardTitle" \r\n                                        value="{/title}" \r\n                                        change="updateProperty"\r\n                                        editable="true" \r\n                                        required="true"\r\n                                        showSuggestion="true"\r\n                                        suggestionItems="{path: \'/ai18nProperties\'}"><core:Item key="{key}" text="{value}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}"><f:fields><Input \r\n                                        id="sapOvpCardSubTitle" \r\n                                        value="{/subTitle}" \r\n                                        change="updateProperty"\r\n                                        required="{visibility>/requiredSubTitle}"\r\n                                        editable="true" \r\n                                        showSuggestion="true"\r\n                                        suggestionItems="{path: \'/ai18nProperties\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_AUTHORIZATION}"><f:fields><Input \r\n                                        id="sapOvpCardProperiesAuthorization" \r\n                                        value="{/requireAppAuthorization}" \r\n                                        change="updateProperty" \r\n                                        width="100%"\r\n                                        editable="true"/></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel>OVP_KEYUSER_ANNOTATIONS}" visible="{visibility>/setAnnotationCardProperties}"><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_ANNO_PATH}" visible="{visibility>/KPI}"><f:fields><ComboBox \r\n                                            id="sapOvpKpiAnnotationPath" \r\n                                            width="100%"\r\n                                            items="{path: \'/KPI\'}"\r\n                                            selectedKey="{/kpiAnnotationPath}"\r\n                                            change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_IDENTIFICATION}" visible="{visibility>/identification}"><f:fields><ComboBox \r\n                                        id="sapOVPIdentification" \r\n                                        width="100%"\r\n                                        items="{path: \'/identification\'}"\r\n                                        selectedKey="{/identificationAnnotationPath}"\r\n                                        change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTIONPRESENTATIONVARIANT}" visible="{visibility>/selectionPresentationVariant}"><f:fields><ComboBox \r\n                                        id="sapOVPSelectionPresentationVariant" \r\n                                        width="100%"\r\n                                        items="{path: \'/selectionPresentationVariant\'}"\r\n                                        selectedKey="{/selectionPresentationAnnotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTIONVARIANT}" visible="{visibility>/selectionVariant}"><f:fields><ComboBox \r\n                                        id="sapOVPSelectionVariant" \r\n                                        width="100%"\r\n                                        items="{path: \'/selectionVariant\'}"\r\n                                        selectedKey="{/selectionAnnotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_PRESENTATIONVARIANT}" visible="{visibility>/presentationVariant}"><f:fields><ComboBox \r\n                                        id="sapOVPPresentationVariant" \r\n                                        width="100%"\r\n                                        items="{path: \'/presentationVariant\'}"\r\n                                        selectedKey="{/presentationAnnotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_ANNOTATIONPATH}" visible="{visibility>/lineItem}"><f:fields><ComboBox \r\n                                        id="sapOVPAnnotationPath" \r\n                                        width="100%"\r\n                                        items="{path: \'/lineItem\'}"\r\n                                        selectedKey="{/annotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DATAPOINT}" visible="{visibility>/dataPoint}"><f:fields><ComboBox \r\n                                            id="sapOvpDataPoint" \r\n                                            width="100%" \r\n                                            required="true"\r\n                                            items="{path: \'/dataPoint\'}"\r\n                                            selectedKey="{/dataPointAnnotationPath}"\r\n                                            change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DATA_POINT_SELMODE}" visible="{visibility>/dataPointSelectionMode}"><f:fields><ComboBox \r\n                                        id="sapOVPDataPointSelectionMode" \r\n                                        width="100%"\r\n                                        items="{path: \'/navigation\'}"\r\n                                        selectedKey="{/navigationPath}"\r\n                                        change="updateProperty" ><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel>OVP_KEYUSER_CARDPROPERTIES}" visible="{visibility>/setCardProperties}"><f:formElements><f:FormElement><f:fields><CheckBox \r\n                                        id="sapOVPAddODataSelect" \r\n                                        width="100%" \r\n                                        visible="{visibility>/addODataSelect}"\r\n                                        text="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                        tooltip="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                        selected="{/addODataSelectCheckBox}"\r\n                                        select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LISTTYPE}" visible="{visibility>/listFlavorForLinkList}"><f:fields><ComboBox \r\n                                        id="sapOVPLinkListFlavor" \r\n                                        width="100%"\r\n                                        items="{path: \'/aLinkListFlavour\'}"\r\n                                        selectedKey="{/listFlavor}"\r\n                                        change="updateProperty"\r\n                                        required="true"><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LISTTYPE}" visible="{visibility>/listType}"><f:fields><ComboBox \r\n                                        id="sapOVPListType" \r\n                                        width="100%"\r\n                                        items="{path: \'/aListType\'}"\r\n                                        selectedKey="{/listType}"\r\n                                        change="updateProperty" ><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LISTFLAVOR}" visible="{visibility>/listFlavor}"><f:fields><ComboBox \r\n                                        id="sapOVPListFlavor" \r\n                                        width="100%"\r\n                                        items="{path: \'/aListFlavour\'}"\r\n                                        selectedKey="{/listFlavor}"\r\n                                        change="updateProperty" ><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_VALUESELECTIONINFO}" visible="{visibility>/valueSelectionInfo}"><f:fields><Input \r\n                                        id="sapOvpValueSelectionInfo" \r\n                                        value="{/valueSelectionInfo}" \r\n                                        change="updateProperty"\r\n                                        required="true"\r\n                                        editable="true"\r\n                                        showSuggestion="true"\r\n                                        suggestionItems="{path: \'/ai18nProperties\'}"><core:Item key="{key}" text="{value}"/></Input></f:fields></f:FormElement></f:formElements></f:FormContainer></template:else></template:if></f:formContainers></f:Form></core:FragmentDefinition>',
	"sap/ovp/cards/rta/StaticLinkListCardLineItemsPanel.fragment.xml":'<core:FragmentDefinition  \r\n    xmlns:core="sap.ui.core" \r\n    xmlns:f="sap.ui.layout.form"\r\n    xmlns="sap.m"><ScrollContainer\r\n        id="scrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        height="20rem"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><List \r\n            id="sapOvpStaticLinkListLineItem" \r\n            class="sapOvpSettingsDialogCustomList"\r\n            items="{/staticContent}"\r\n            selectionChange="onSelectionChange"\r\n            mode="SingleSelectLeft"\r\n            includeItemInSelection="true"><items><CustomListItem type="Active"><HBox><VBox \r\n                            width="30%" \r\n                            visible="{= !${deviceSystemProperties>/phone}}"\r\n                            alignItems="Center"\r\n                            justifyContent="Center"><HBox><Image \r\n                                    class="sapUiSmallMargin"\r\n                                    visible="{= !!${imageUri} &amp;&amp; ${path: \'imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true}"\r\n                                    alt="{imageAltText}"\r\n                                    tooltip="{toolTip}" \r\n                                    densityAware="true"\r\n                                    width="4rem" \r\n                                    height="4rem"\r\n                                    backgroundPosition="center center" \r\n                                    mode="Background"\r\n                                    src="{parts: [{path: \'/\'}, {path: \'imageUri\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getImageUrl\'}"/><VBox \r\n                                    visible="{= !!${imageUri} &amp;&amp; ${path: \'imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false}"\r\n                                    class="sapUiSmallMargin sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' }"><FlexBox height="3rem"><core:Icon \r\n                                            class="sapOvpLinkListImageCenter"\r\n                                            tooltip="{toolTip}" \r\n                                            useIconTooltip="false"\r\n                                            size="3rem" src="{imageUri}"/></FlexBox></VBox><VBox visible="{= !${imageUri}}"\r\n                                      class="sapUiSmallMargin sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' }"><FlexBox height="3rem"><core:Icon \r\n                                            class="sapOvpLinkListImageCenter"\r\n                                            tooltip="{toolTip}" \r\n                                            useIconTooltip="false"\r\n                                            size="3rem" \r\n                                            src="sap-icon://background"/></FlexBox></VBox></HBox><HBox visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><Button \r\n                                    class="sapOvpSettingsMiniMarginBeginEnd" \r\n                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_CHANGE_VISUAL}" \r\n                                    icon="sap-icon://edit" \r\n                                    press="onChangeVisualPress" \r\n                                    enabled="true" \r\n                                    type="Transparent"/><Button \r\n                                    class="sapOvpSettingsMiniMarginBeginEnd" \r\n                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_REMOVE_VISUAL}" \r\n                                    icon="sap-icon://delete" \r\n                                    press="onRemoveVisualPress"\r\n                                    enabled="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/removeVisual\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"\r\n                                    type="Transparent"/></HBox></VBox><VBox><f:Form editable="true"><f:layout><f:ResponsiveGridLayout \r\n                                        labelSpanXL="12"\r\n                                        labelSpanL="12" \r\n                                        labelSpanM="12" \r\n                                        labelSpanS="12" \r\n                                        adjustLabelSpan="false"\r\n                                        emptySpanXL="0" \r\n                                        emptySpanL="0" \r\n                                        emptySpanM="0" \r\n                                        emptySpanS="0"\r\n                                        singleContainerFullSize="false" /></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE_FOR_LINK}" visible="{visibility>/lineItemTitle}"><f:fields><Input \r\n                                                        id="sapOvpSettingsLineItemTitle" \r\n                                                        value="{title}" \r\n                                                        change="validateInputField"\r\n                                                        required="true" \r\n                                                        valueState="{= ${title} === \'\' ? \'Error\' : \'None\'}"\r\n                                                        valueStateText="{= ${title} === \'\' ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_RECORD_TITLE} : \'\'}"/></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE_FOR_LINK}" \r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/lineItemSubTitle\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><Input \r\n                                                        id="sapOvpSettingsLineItemSubTitle" \r\n                                                        value="{subTitle}" \r\n                                                        change="updateCard"/></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_LINK_TYPE}" \r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><RadioButtonGroup \r\n                                                        columns="2" \r\n                                                        select="onLinkSourceChange"\r\n                                                        selectedIndex="{= ${parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/staticLink\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'} === true ? 1 : 0}"><buttons><RadioButton text="{ovpResourceModel>OVP_KEYUSER_APPLICATION_TEXT_RAD_BUTTON}"/><RadioButton text="{ovpResourceModel>OVP_KEYUSER_URL_TEXT_RAD_BUTTON}"/></buttons></RadioButtonGroup></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_LINKS}"\r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/staticLink\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><Input \r\n                                                        value="{targetUri}" \r\n                                                        change="onExternalUrlChange"\r\n                                                        required="true" \r\n                                                        valueState="{= ${path: \'targetUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isValidURL\'} === false ? \'Error\' : \'None\'}"\r\n                                                        valueStateText="{= ${path: \'targetUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isValidURL\'} === false ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_RECORD_URL} : \'\'}"/></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_LINKS}"\r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/links\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><Input \r\n                                                        value="{parts:[{path:\'staticCardProperties>/links\'}, {path:\'semanticObject\'}, {path:\'action\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getApplicationName\'}"\r\n                                                        showValueHelp="true" \r\n                                                        editable="true" \r\n                                                        enabled="true" \r\n                                                        valueHelpOnly="true" \r\n                                                        required="true"\r\n                                                        valueHelpRequest="createValueHelpDialogForInternalUrl"/></f:fields></f:FormElement><f:FormElement><f:fields><FlexBox justifyContent="End"><Link \r\n                                                            text="{= !${parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'} ? ${ovpResourceModel>OVP_KEYUSER_SHOW_MORE_LINK}: ${ovpResourceModel>OVP_KEYUSER_SHOW_LESS_LINK}}"\r\n                                                            press="onShowMorePress"/></FlexBox></f:fields></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></VBox></HBox></CustomListItem></items></List></ScrollContainer></core:FragmentDefinition>',
	"sap/ovp/cards/stack/Stack.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"><VBox id="stackContent" class="sapOvpStackCardContent" justifyContent="SpaceBetween"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><Label id="stackSize" class="sapOvpStackCardSize"><customData><ovp:CustomData key="role" value="" writeToDom="true"/></customData></Label><Text id="stackTotalSize" class="sapOvpStackCardTotalSize"/><core:Icon \n            id="StackCardIcon" \n            class="sapOvpStackCardIcon" \n            src="sap-icon://dimension" \n            useIconTooltip="false"></core:Icon></VBox></core:FragmentDefinition>\n',
	"sap/ovp/cards/table/Table.fragment.xml":'<core:FragmentDefinition\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:build="sap.build"\r\n    xmlns:ovp="sap.ovp.ui"\r\n    xmlns:sfi="sap.ui.comp.smartfield"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Table \r\n        id="ovpTable" \r\n        class="ovpTableClass cardType"\r\n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>tableCard}" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/layoutDetail} === \'resizable\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.table.TableDashBoardLayout" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.table.TableEasyScanLayout" type="XML"/></template:else></template:if></Table></core:FragmentDefinition>',
	"sap/ovp/cards/table/TableDashBoardLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with \n        path=\'ovpCardProperties>/annotationPath\'\n        helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n        var=\'eachItem\'><template:with  \n            path="eachItem>" \n            helper="sap.ovp.cards.AnnotationHelper.removeDuplicateDataField" \n            var="lineItem"><columns><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField"><template:if test="{= ${dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                            styleClass="sapTableColumnHide" \n                                            visible="false" \n                                            hAlign="{= ${path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                                text="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                                wrapping="true"\n                                                wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                                styleClass="sapTableColumnHide" \n                                                visible="false" \n                                                hAlign="{= ${path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                                        class="displayBlock {= ${path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                                        wrapping="true"\n                                                        wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField1"><template:if test="{= ${dataField1>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField1>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField1>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField1>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField1>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField2"><template:if test="{= ${dataField2>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField2>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField2>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField2>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField2>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField3"><template:if test="{=  !${dataField3>com.sap.vocabularies.UI.v1.Importance/EnumMember}}"><template:then><template:if test="{= ${dataField3>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField3>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField3>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', \n                                            formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'Right\' : ${path: \'dataField3>\', \n                                            formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'Center\':\n                                            ${dataField3>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField3>\', \n                                                formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'textAlignRight\' : ${path: \'dataField3>\', \n                                                formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'textAlignCenter\':\n                                                ${dataField3>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField3>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat></columns><items><ColumnListItem\n                    id = "tableItem"\n                    type="Active"\n                    press="onColumnListItemPress"><cells><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField4"><template:if test="{= ${dataField4>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField4>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{= (${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataFieldName\'} === ${dataField4>Label/String} &amp;&amp; ${ovpCardProperties>/showLineItemDetail})}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetails" type="XML"/><Link\n                                                            class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                            text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                            press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField4>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField4>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField4>Target" \n                                                        helper="sap.ui.model.odata.AnnotationHelper.resolvePath" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField4>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField4>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField4>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField \n                                                        class="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                        editable="false" \n                                                        uomEditable="false" \n                                                        enabled="true"\n                                                        clientSideMandatoryCheck="false"\n                                                        value="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                        criticality="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                        criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                        number="{parts:[{path:\'dataField4>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField4>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                        state="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem>\'}" var="dataField5"><template:if\n                                    test="{= ${dataField5>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if\n                                            test="{= ${dataField5>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                            class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                            text="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                            semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            contactAnnotationPath="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                            forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif\n                                                test="{= ${dataField5>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField5>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with path="dataField5>Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails"\n                                                                        type="XML"/><Link binding="{= ${ path: \'dataField5>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField5>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField5>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                                    editable="false" uomEditable="false" enabled="true"\n                                                                    clientSideMandatoryCheck="false"\n                                                                    value="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                            criticality="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                            criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                            class="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                            number="{parts:[{path:\'dataField5>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"\n                                                            unit="{parts:[{path:\'dataField5>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                            state="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem>\'}" var="dataField6"><template:if\n                                    test="{= ${dataField6>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if\n                                            test="{= ${dataField6>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                            class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                            text="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                            semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            contactAnnotationPath="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                            forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif\n                                                test="{= ${dataField6>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField6>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with path="dataField6>Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails"\n                                                                        type="XML"/><Link binding="{= ${ path: \'dataField6>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField6>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField6>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                                    editable="false" uomEditable="false" enabled="true"\n                                                                    clientSideMandatoryCheck="false"\n                                                                    value="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                            criticality="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                            criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                            class="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                            number="{parts:[{path:\'dataField6>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"\n                                                            unit="{parts:[{path:\'dataField6>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                            state="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem>\'}" var="dataField7"><template:if test="{=  !${dataField7>com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><template:then><template:if\n                                            test="{= ${dataField7>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                            class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                            text="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                            semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            contactAnnotationPath="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                            forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif\n                                                test="{= ${dataField7>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField7>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with path="dataField7>Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails"\n                                                                        type="XML"/><Link binding="{= ${ path: \'dataField7>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField7>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField7>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="ovpSmartLink {= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                                    editable="false" uomEditable="false" enabled="true"\n                                                                    clientSideMandatoryCheck="false"\n                                                                    value="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                            criticality="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                            criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                            class="{= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                            number="{parts:[{path:\'dataField7>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"\n                                                            unit="{parts:[{path:\'dataField7>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                            state="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat></cells></ColumnListItem></items></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/table/TableEasyScanLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/disableTableCardFlexibility} === true}"><template:then><template:with \n                path=\'ovpCardProperties>/annotationPath\'\n                helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n                var=\'lineItem\'><columns><Column><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataFieldName\'}"/></Column><Column><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getSecondDataFieldName\'}"/></Column><Column hAlign="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'Center\' : \'Right\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}"><template:then><Text \n                                    class="displayBlock {= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                    text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForFirstDataPoint\'}"/></template:then><template:else><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getThirdDataFieldName\'}"/></template:else></template:if></Column></columns><items><ColumnListItem\n                        id = "tableItem"\n                        type="Active"\n                        press="onColumnListItemPress"><cells><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}"><template:then><template:if\n                                        test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticality\'} === true &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><template:then><sfi:SmartField\n                                                class="textAlignCenter"\n                                                editable="false" \n                                                uomEditable="false" \n                                                enabled="true"\n                                                clientSideMandatoryCheck="false"\n                                                value="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                criticality="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointStateForSmartField\'}"\n                                                                criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:then><template:else><ObjectNumber\n                                                class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"/></template:else></template:if></template:then><template:else><Text\n                                    class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></cells></ColumnListItem></items></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.table.TableDashBoardLayout" type="XML"/></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/charts/analytical/analyticalChart.fragment.xml":'<core:FragmentDefinition \n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:suite="sap.suite.ui.commons" \n\txmlns:viz="sap.viz.ui5.controls"\n\txmlns:dataSet="sap.viz.ui5.data" \n\txmlns:feed="sap.viz.ui5.controls.common.feeds"\n\txmlns:ovp="sap.ovp.ui" \n\txmlns:charts="sap.ovp.cards.v4.charts"><VBox visible="{= ${oAnalyticalCardErrorModel>/error} === true ? false : true}" class="ovpChartTitleVBox cardType" id="vbLayout"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>analyticalCardType}" writeToDom="true" /></customData><template:with \n\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\tvar=\'chart\'><template:with \n\t\t\tpath="ovpCardProperties>/selectionAnnotationPath"\n\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\tvar=\'selVar\'><template:with \n\t\t\t\tpath="ovpCardProperties>/presentationAnnotationPath"\n\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\t\tvar=\'preVar\'><template:if test="{chart>}"><template:if test="{path:\'chart>DimensionAttributes\', formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.dimensionAttrCheck\'}"><template:if test="{path:\'chart>MeasureAttributes\', formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.measureAttrCheck\'}"><template:if test="{chart>ChartType}"><template:if test="{preVar>MaxItems}"><template:then><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.formatItems\'}"\n\t\t\t\t\t\t\t\t\t\t\taggregateData="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>undefined\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame id="analyticalChart" class="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData key="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{chart>Title@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:then><template:else><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame id="analyticalChart" class="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData key="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{chart>Title@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:else></template:if></template:if></template:if></template:if></template:if></template:with></template:with></template:with></VBox><template:with \n\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\tvar=\'chart\'><template:if test="{chart>}"><template:if test="{chart>ChartType}"><template:if test="{path:\'chart>ChartType\',formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.checkBubbleChart\'}"><Text visible="{= ${oAnalyticalCardErrorModel>/error} === true ? false : true}" id="bubbleText" class="ovpChartFooter"/></template:if></template:if></template:if></template:with><IllustratedMessage visible="{= ${oAnalyticalCardErrorModel>/error} === true ? true : false}" illustrationType="sapIllus-UnableToLoad" /></core:FragmentDefinition>',
	"sap/ovp/cards/v4/charts/generic/noData.fragment.xml":'<core:FragmentDefinition \n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns="sap.m"><FlexBox \n\t\talignItems="Center" \n\t\tjustifyContent="SpaceAround" \n\t\tclass="noDataSection"><Text maxLines="1"\n\t\t\ttext="{ovplibResourceBundle>noData}"><customData><ovp:CustomData \n\t\t\t\t\tkey="aria-label"\n\t\t\t\t\tvalue="{ovplibResourceBundle>noData}"\n\t\t\t\t\twriteToDom="true" /><ovp:CustomData key="tabindex" value="0" writeToDom="true" /></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Action.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{=  ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAction\' ||\n        ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\'||\n        ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldWithUrl\'}"><Button \n            text="{dataField>Label@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"\n            press="onActionPress" \n            type="Transparent"><layoutData><OverflowToolbarLayoutData\n                    moveToOverflow="true"\n                    stayInOverflow="false"/></layoutData><customData><core:CustomData key="type" value="{dataField>RecordType}"/><template:if test="{= ${dataField>SemanticObject}}"><core:CustomData key="semanticObject" value="{dataField>SemanticObject@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField>Url}}"><core:CustomData key="url" value="{dataField>Url@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField>Action}}"><core:CustomData key="action" value="{dataField>Action@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></template:if><core:CustomData key="label" value="{dataField>Label@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></customData></Button></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ActionsFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with \n        path=\'ovpCardProperties>/identificationAnnotationPath\' \n        helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n        var=\'identification\'><template:if test="{path: \'identification>\', formatter: \'sap.ovp.cards.AnnotationHelper.hasActions\'}"><OverflowToolbar id="ovpActionFooter" class="sapOvpActionFooter"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true" /><ovp:CustomData key="role" value="toolbar" writeToDom="true" /></customData><ToolbarSpacer/><template:repeat\n                        list="{\n                            path:\'identification>\',\n                            filters: [\n                                {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'High\'},\n                                {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Medium\'}\n                            ],\n                            sorter: [{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\'}]\n                        }" \n                        var="dataField"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:repeat><template:repeat\n                        list="{\n                            path:\'identification>\',\n                            filters: [\n                                {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Low\'}\n                            ]\n                            }" \n                            var="dataField"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:repeat><template:repeat \n                    list="{path:\'identification>\'}" \n                    var="dataField"><template:if test="{=  !${dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:if></template:repeat></OverflowToolbar></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Card.view.xml":'<mvc:View\n    controllerName="{ovpCardProperties>/controllerName}"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox class="sapOvpCardOverlaySideContainer sapOvpCardRightOverlayCursor"></VBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/cloneCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_COPY}" class="sapOvpNewBadgeText"/></HBox></FlexBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/newCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_NEW}" class="sapOvpNewBadgeText"/></HBox></FlexBox><template:if test="{= ${ovpCardProperties>/contentPosition} === \'Right\'}" ><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContentRight" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContentMiddle" type="XML"/></template:else></template:if><template:if test="{device>/support/touch}"><template:then><core:HTML content="&lt;div&gt;&lt;/div&gt;"></core:HTML></template:then><template:else><core:HTML content="&lt;div;&gt;&lt;/div&gt;"></core:HTML></template:else></template:if><HBox class="sapOvpCardOverlayContainer sapOvpCardBottomOverlayCursor"></HBox></mvc:View>',
	"sap/ovp/cards/v4/generic/ContactDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContactDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickViewPage \n        header="{ovplibResourceBundle>CONTACT_INFO}"\n        icon="{= ${contact>photo} ? ${contact>photo@@sap.ui.model.odata.v4.AnnotationHelper.format} : \'sap-icon://person-placeholder\'}"\n        title="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n        description="{contact>role@@sap.ui.model.odata.v4.AnnotationHelper.format}"><QuickViewGroup><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_JOB_TITLE}" \n                type="text"\n                value="{contact>title@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                visible="{= !!${contact>title}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_DEPARTMENT}" \n                type="text"\n                value="{contact>org@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                visible="{= !!${contact>org}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_EMAIL}" \n                type="email"\n                value="{path: \'contact>email\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getEmail\'}"\n                visible="{path: \'contact>email\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getEmail\'}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_PHONE}" \n                type="phone"\n                value="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getPhone\'}"\n                visible="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getPhone\'}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_MOBILE}" \n                type="{= (${device>/system/phone} || ${device>/system/tablet})  ? \'mobile\'  : \'phone\' }"\n                value="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDevice\'}"\n                visible="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDevice\'}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_FAX}" \n                type="text"\n                value="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getPhoneType\'}"\n                visible="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getPhoneType\'}"/></QuickViewGroup></QuickViewPage></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContentMiddle.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl"><VBox class="sapOvpBaseCard"><template:if test="{ovpCardProperties>/headerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerFragment}" type="XML"/></template:if><ovp:CardContentContainer \n\t\t\t\tid="ovpCardContentContainer" \n\t\t\t\tclass="{= ${ovpCardProperties>/cardLayout/containerLayout} === \'resizable\' &amp;&amp; ${ovpCardProperties>/cardLayout/showOnlyHeader} === true ? \'sapOvpWrapper sapOvpContentHidden\' :  \'sapOvpWrapper\'}"><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' || !${ovpCardProperties>/reason} || ${ovpCardProperties>/state} === \'undefined\'}" ><template:if test="{ovpCardProperties>/tabs}"><Toolbar \n\t\t\t\t\t\t\tid="toolbar" \n\t\t\t\t\t\t\tclass="sapOvpDropDown {= ${ovpCardProperties>/densityStyle} === \'compact\' ? \'sapUiSizeCompact dropDrownCompact\' : \'sapUiSizeCozy sapOvpDropDownPadding dropDrownCozy\' }"><core:InvisibleText id="ovp_card_dropdown_label" text="{ovplibResourceBundle>OVP_CARD_DROP_DOWN_LABEL}" /><Select \n\t\t\t\t\t\t\t\tid="ovp_card_dropdown" \n\t\t\t\t\t\t\t\tselectedKey="1" \n\t\t\t\t\t\t\t\tchange="changeSelection"><template:repeat \n\t\t\t\t\t\t\t\t\tlist="{ovpCardProperties>/tabs}" \n\t\t\t\t\t\t\t\t\tvar="tab"><core:Item\n\t\t\t\t\t\t\t\t\t\tid ="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'sap.ovp.cards.CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\tkey="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'sap.ovp.cards.CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{tab>value}"></core:Item></template:repeat></Select></Toolbar></template:if><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></template:if></ovp:CardContentContainer><template:if\n\t\t\t\ttest="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\' || ${ovpCardProperties>/layoutDetail} !== \'resizable\' || ${ovpCardProperties>/state} === \'Loading\' || ${ovpCardProperties>/reason}}"><template:if test="{ovpCardProperties>/footerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/footerFragment}" type="XML"/></template:if></template:if></VBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContentRight.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl" class = "cardType"><HBox class="sapOvpBaseCard sapOvpCardRightContent"><FlexBox class="sapOvpCardContentRightHeader"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Header" type="XML"/><layoutData><FlexItemData growFactor="1" baseSize="1rem"/></layoutData></FlexBox><ovp:CardContentContainer id="ovpCardContentContainer"><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></ovp:CardContentContainer></HBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/CountFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"><Text id="ovpCountFooter" class="sapOvpCardFooter"><customData><ovp:CustomData key="role" value="heading" writeToDom="true" /></customData></Text></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/CountHeader.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"><FlexBox class = "sapOvpHeaderCountMainDiv"><Text id="ovpCountHeader" class="sapOvpHeaderCounter" maxLines="1"><customData><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Header.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox \n        id="ovpCardHeader"\n        class="{= ${ovpCardProperties>/category} || ${ovpCardProperties>/title} || ${ovpCardProperties>/subTitle} ? \'sapOvpCardHeader sapUiContentPadding\' : \'sapOvpCardHeader sapOvpCardHideHeader\' } {= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\' ? \'sapOvpStackCardHeader\' :  \'\'}"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\'}"><template:then><template:with \n                    path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n                    var="header"><Text \n                        id="ovpQuickviewCardHeader"\n                        text="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}"\n                        class="sapOvpCardTitle tabindex-1"><customData><ovp:CustomData \n                                key="aria-label" \n                                value="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}" \n                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Title" type="XML"/></template:else></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} !== \'sap.ovp.cards.quickview.Quickview\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.SubTitle" type="XML"/></template:if><template:if test="{ovpCardProperties>/headerExtensionFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerExtensionFragment}" type="XML"/></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\'}"><FlexBox class="sapOvpCardViewAllContainer"><Text\n                    id= "ViewAll"\n                    text="{ovplibResourceBundle>View_All_Stack_Card}"\n                    class="sapOvpCardViewAll cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>View_All_Stack_Card}" writeToDom="true" /></customData></Text></FlexBox></template:if></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/KPIHeader.fragment.xml":'<core:FragmentDefinition \n    xmlns="sap.m"\n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" ><template:with \n        path="ovpCardProperties>/dataPointAnnotationPath"\n        helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n        var=\'dataPoint\'><template:with \n            path="ovpCardProperties>/selectionAnnotationPath"\n            helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n            var=\'selVar\'><template:with \n                path="ovpCardProperties>/presentationAnnotationPath"\n                helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n                var=\'preVar\'><template:if test="{dataPoint>}"><VBox id="kpiHeader" class="sapOVPKpiHeaderVbox tabindex-1"><template:if test="{dataPoint>Value/$Path}"><FlexBox \n                                items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}"\n                                id="kpiHBoxNumeric" \n                                class="numericContentHbox sapUiTinyMarginTop sapOvpKPIHeaderAggregateNumber" ><items><HBox class="innerNumericContentHbox sapOvpKpiContent" alignItems="End" justifyContent="SpaceBetween"><NumericContent id="kpiNumberValue"\n                                            size="M" truncateValueTo="8"\n                                            indicator="{parts:[{path:\'dataPoint>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formThePathForTrendIcon\'}"\n                                            value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formThePathForAggregateNumber\'}"\n                                            formatterValue="true"\n                                            valueColor="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatKPIHeaderState\'}"\n                                            state="Loaded" class="sapOvpKPIHeaderNumberValueStyle kpiHeaderClass"\n                                            press="press"\n                                            withMargin="false"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.getKPIHeaderAggregateNumber\'} {path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatKPIHeaderState\'}"\n                                                    writeToDom="true"/></customData></NumericContent><template:if test="{= ${path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'} !== \'\'}"><FlexBox class="TargetDeviationFlexbox"><VBox class="KpiTargetContainer"><Text id="ovpKpiTarget" text="{ovplibResourceBundle>KPI_Target_Text}" class="KpiTargetText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Target_Text}" writeToDom="true" /></customData></Text><Text \n                                                        id="ovpTargetValue" \n                                                        text="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForTargetValue\'}"\n                                                        class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                                key="aria-label" \n                                                                value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForTargetValue\'}" \n                                                                writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox><VBox class="KpiDeviationContainer"><Text \n                                                        id= "ovpKPIDeviation" \n                                                        text="{ovplibResourceBundle>KPI_Deviation_Text}" \n                                                        class="KpiDeviationText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Deviation_Text}" writeToDom="true" /></customData></Text><Text\n                                                        id="kpiNumberPercentage"\n                                                        text="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'}"\n                                                        class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                                key="aria-label" \n                                                                value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'}" \n                                                                writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox></FlexBox></template:if></HBox></items></FlexBox></template:if><template:if test="{dataPoint>Value/$Path}"><template:if test="{ovpCardProperties>/valueSelectionInfo}"><FlexBox class="UOMFlexbox"><Text\n                                        id="ovpValueSelectionInfo"\n                                        maxLines="1"\n                                        text="{ovpCardProperties>/valueSelectionInfo}"\n                                        class="sapOvpKPIHeaderUnitOfMeasureStyle sapOvpCardSubtitle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                key="aria-label"\n                                                value="{ovpCardProperties>/valueSelectionInfo}"\n                                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true" /><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:if></template:if><template:if  \n                            test="{= (${ovpCardProperties>/showSortingInHeader} === true) &amp;&amp; ${path:\'preVar>\', formatter: \'sap.ovp.cards.AnnotationHelper.isPresentationVarientPresent\'} === true}"><FlexBox \n                                alignItems="Start" \n                                justifyContent="SpaceBetween" \n                                class="KpiPreVarFlex" \n                                visible="{ovpCardProperties>/showSortingInHeader}"><Text \n                                    id="headerGroupByText" \n                                    maxLines="1"\n                                    text="{path:\'preVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.listGroupBy\'}"\n                                    class="sapOvpKPIHeaderDimensionStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'preVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.listGroupBy\'}" writeToDom="true" /></customData></Text></FlexBox></template:if><template:if \n                            test="{= (${ovpCardProperties>/showFilterInHeader} === true) &amp;&amp; {parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'} !== \'\'}"><template:if test="{= !${ovpCardProperties>/ignoreSelectionVariant} === true}"><template:then><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="flex-start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'selVar>SelectOptions\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.formTheIdForFilter\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'}"\n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData \n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:then><template:else><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="flex-start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'ovpCardProperties>/idForExternalFilters\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.formTheIdForFilterNotFromSelVar\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" \n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData\n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:else></template:if></template:if></VBox></template:if></template:with></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/generic/LineItemDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/LineItemDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:l="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>quickViewCard}" writeToDom="true" /></customData><template:with \n        path="entityType>@com.sap.vocabularies.UI.v1.HeaderInfo" \n        var="header"><template:with \n            path="entityType>@com.sap.vocabularies.UI.v1.Facets" \n            var="facets"><QuickViewPage\n                header="{= ${header>TypeNamePlural} ? ${header>TypeNamePlural@@sap.ui.model.odata.v4.AnnotationHelper.format} :  \'{ovplibResourceBundle>LineItem_Detail_Text}\' }"\n                icon="{= ${header>ImageUrl} ? ${header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format} : (${header>TypeImageUrl} ? ${header>TypeImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format} : \'\') }"\n                title="{= ${header>Title/Value} ? ${path: \'header>Title/Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format} :  \'\' }"\n                description="{= ${header>Description/Value} ? ${header>Description/Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format} :  \'\' }"><template:repeat \n                    list="{path:\'facets>\'}" \n                    var="referenceFacet"><template:if test="{referenceFacet>com.sap.vocabularies.UI.v1.IsSummary}"><template:with \n                            path="referenceFacet>Target/$AnnotationPath"\n                            helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path"\n                            var="target"><QuickViewGroup heading="{target>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"><template:repeat \n                                    list="{path:\'target>Data\'}" \n                                    var="dataField"><template:if test="{dataField>Url}"><template:then><template:if test="{dataField>Url/UrlRef}"><template:then><QuickViewGroupElement\n                                                        label="{dataField>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        value="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        url="{dataField>Url/UrlRef@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        type="link"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                        label="{dataField>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        value="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        url="{dataField>Url@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        type="link"></QuickViewGroupElement></template:else></template:if></template:then><template:else><template:if test="{dataField>Value}"><template:with \n                                                    path="dataField>Value/$AnnotationPath"\n                                                    helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path"\n                                                    var="fValue"><template:if test="{= ${fValue>sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement\n                                                                label="{dataField>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                value="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                url="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                type="url"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement\n                                                                        label="{dataField>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                        value="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                        type="email"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement\n                                                                                label="{dataFie\\ld>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                                value="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                                type="phone"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                                                label="{dataField>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                                value="{path: \'dataField>\', formatter: \'sap.ovp.cards.v4.AnnotationHelper.formatField\'}"></QuickViewGroupElement></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></QuickViewPage></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/generic/SubTitle.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\'}"><HBox justifyContent="SpaceBetween" renderType="Bare"><template:if test="{ovpCardProperties>/dynamicSubtitleAnnotationPath}"><template:then><template:with \n                        path=\'ovpCardProperties>/dynamicSubtitleAnnotationPath\'\n                        helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n                        var=\'headerInfo\'><template:with \n                            path="ovpCardProperties>/selectionAnnotationPath"\n                            helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n                            var=\'selVar\'><template:if test="{headerInfo>Description}"><HBox><FlexBox\n                                        items="{parts:[{path:\'entitySet>\'}, {path:\'headerInfo>\'}, {path:\'selVar>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}"\n                                        class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                            id="ovpDescriptionValue" \n                                            maxLines="2"\n                                            text="{headerInfo>Description/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                            class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{headerInfo>Description/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><template:if test="{ovpCardProperties>/subTitle}"><template:then><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                    id="SubTitle-Text"\n                                    maxLines="2"\n                                    text="{ovpCardProperties>/subTitle}"\n                                    class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                            key="aria-label" \n                                            value="{ovpCardProperties>/subTitle}"\n                                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{ovpCardProperties>/dataPointAnnotationPath}"><template:then><template:with \n                                        path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                        helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n                                        var=\'dataPoint\'><template:with \n                                        path="ovpCardProperties>/selectionAnnotationPath"\n                                        helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n                                        var=\'selVar\'><template:if test="{dataPoint>Description}"><HBox><FlexBox\n                                                    items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'} ], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}"\n                                                    class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                                        id="ovpDescriptionValue"\n                                                        maxLines="2"\n                                                        text="{dataPoint>Description@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                        class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                                key="aria-label"\n                                                                value="{dataPoint>Description@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"></FlexBox></template:else></template:if></template:else></template:if></template:else></template:if><Button\n                id="sapOvpCardAdditionalActions"\n                enabled="false"\n                class="sapOvpCardAdditionalActions"\n                type="Transparent"\n                icon="sap-icon://overflow"\n                press="onShowAdditionalCardActions"/></HBox></template:if></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/generic/Title.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{ovpCardProperties>/title} || {ovpCardProperties>/dataPointAnnotationPath}"><HBox><template:if test="{ovpCardProperties>/title}"><template:then><FlexBox class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                    id= "ovpHeaderTitle" \n                    maxLines="3"\n                    text="{ovpCardProperties>/title}"\n                    class="sapOvpCardTitle tabindex-1"\n                    build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                            key="aria-label" \n                            value="{ovpCardProperties>/title}"\n                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' &amp;&amp; ${ovpCardProperties>/dataPointAnnotationPath}}"><template:then><template:with \n                                path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n                                var=\'dataPoint\'><template:if test="{dataPoint>Title}"><FlexBox \n                                        items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}" \n                                        class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                                            id="ovpHeaderTitleFromKPI" \n                                            maxLines="3"\n                                            text="{dataPoint>Title@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                            class="sapOvpCardTitle tabindex-1"\n                                            build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                                                    key="aria-label" \n                                                    value="{dataPoint>Title@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="3" writeToDom="true"/></customData></Text></FlexBox></template:if></template:with></template:then></template:if></template:else></template:if><template:if\n                test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.v4.list.List\' || ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.v4.table.Table\'}"><template:if test="{ovpCardProperties>/countHeaderFragment}"><core:Fragment fragmentName="{ovpCardProperties>/countHeaderFragment}" type="XML"/></template:if></template:if></HBox></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/LinkList.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n\txmlns="sap.m"><template:if test="{ovpCardProperties>/staticContent}"><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStaticDataStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStaticDataCarousel" type="XML"/></template:elseif></template:if></template:then><template:else><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path=\'ovpCardProperties>/headerAnnotationPath\' var=\'header\'><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListCarousel" type="XML"/></template:elseif></template:if></template:with></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListCarousel.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"><Carousel \n\t\tid="pictureCarousel" \n\t\tloop="true" \n\t\tclass="sapOvpCardLinkListCarousel cardType" \n\t\tarrowsPlacement="PageIndicator"\n\t\tpages="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><VBox class="sapMCrslItemTableCell"><template:with \n\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\t\tvar=\'identification\'><template:if test="{= ${header>Title/Value} || ${header>Description/Value}}"><VBox\n\t\t\t\t\t\t\tclass="{= ${header>Title/Value} || ${header>Description/Value} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\thref="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatString\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel"\n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:if></template:with></template:elseif><template:else><Text \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if><Text \n\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></VBox></template:if><template:if test="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"><template:then><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></HBox></template:then><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4..format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><HBox \n\t\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer"\n\t\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Image \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:if></template:with></template:elseif><template:else><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:else></template:if></template:then><template:else><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:then><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:if></template:with></template:elseif><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:else></template:if></template:else></template:if></template:with></VBox></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListNavigationTargets.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover title="{ovplibResourceBundle>RELATED_APPS}" placement="Auto"><HBox class="sapOvpLinkListStandardHBox"><List showSeparators="None"\n\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' }"><CustomListItem></CustomListItem></List></HBox></Popover></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStandard.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:l="sap.ui.layout" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m" \n\txmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><List \n\t\t\tid="ovpLinkList"\n      \t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\'}"\n      \t\tshowSeparators="None"\n      \t\titems="{parts:[{path:\'entitySet>\'}, {path:\'header>\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatItems\'}"><template:with \n\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\tvar=\'identification\'><CustomListItem \n\t\t\t\t\tid="ovpCLI" \n\t\t\t\t\ttype="Active"\n\t\t\t\t\tpress="{= ${path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkNavigationSingleTarget\'\n\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListActionPress\'\n\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListLineItemUrl\'\n\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: \'\'}"\n\t\t\t\t\tapp:dataAction="entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}"><HBox\n\t\t\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleImage\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleImageSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleIconSubtitle\'\n\t\t\t\t\t\t\t: ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleImage\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleIcon\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleImageSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleIconSubtitle\'\n\t\t\t\t\t\t\t: \'ovpDefaultClass\'}\n\t\t\t\t\t\t\t{= ${path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'linkListHasPopover\'\n\t\t\t\t\t\t\t: \'\'} "><template:if test="{= ${header>ImageUrl} || ${header>TypeImageUrl}}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy sapOvpListItemDynamicCozy\' : \'sapOvpLinkListItemImageCompact sapOvpListItemDynamic\' } sapOvpListItemQuickLink"><template:if test="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"><template:then><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="40px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getAvatarInitials\'}"></f:Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="36px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getAvatarInitials\'}"></f:Avatar></FlexBox></template:else></template:if></template:then><template:else><FlexBox height="40px"><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon" \n\t\t\t\t\t\t\t\t\t\t\t\t\tsize="24px" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpLinkListImageCenter"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></FlexBox></template:else></template:if></VBox></template:then></template:if><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpListItemDynamicCozy\' : \'sapOvpListItemDynamic\' }"><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:if test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if></template:then><template:elseif test="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:elseif><template:else><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if><template:if test="{header>Description/Value}"><template:then><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListSubTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:then></template:if></VBox></HBox></CustomListItem></template:with></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStaticDataCarousel.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"><VBox><Carousel \n\t\t\tid="pictureCarousel" \n\t\t\tloop="true" \t\n\t\t\tclass="sapOvpCardLinkListCarousel cardType" \n\t\t\tarrowsPlacement="PageIndicator"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><template:repeat \n\t\t\t\t\tlist="{ovpCardProperties>/staticContent}" \n\t\t\t\t\tvar="contentRow"><VBox class="sapMCrslItemTableCell"><template:if test="{= ${contentRow>title} || ${contentRow>subTitle}}"><VBox class="{= ${contentRow>title} || ${contentRow>subTitle} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{contentRow>dataAction}"><template:then><Link \n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData"\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:else><Link \n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true" /><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:else></template:if><Text \n\t\t\t\t\t\t\t\t\tid="linkListSubTitleLabel--{contentRow>id}" \n\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle" \n\t\t\t\t\t\t\t\t\ttext="{contentRow>subTitle}"><customData><ovp:CustomData key="aria-label" value="{contentRow>subTitle}" writeToDom="true" /><ovp:CustomData key="role" value="text" writeToDom="true" /></customData></Text></VBox></template:if><template:if test="{contentRow>dataAction}"><template:then><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}" \n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}" \n\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n                                                src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"/></template:else></template:if></template:then><template:else><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}"\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \n\t\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"\n                                                densityAware="true" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\n                                                src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData" \n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}"\n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"/></template:else></template:if></template:else></template:if></VBox></template:repeat></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStaticDataStandard.fragment.xml":'<core:FragmentDefinition \n    xmlns:build="sap.build" \n    xmlns:core="sap.ui.core" \n    xmlns:l="sap.ui.layout" \n    xmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n    xmlns:smartlink="sap.ui.comp.navpopover"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n    xmlns="sap.m" \n    xmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox"><List \n            id="ovpLinkList"\n\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' } cardType"\n\t\t\tshowSeparators="None"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><items><template:repeat \n                    list="{ovpCardProperties>/staticContent}" \n                    var="contentRow"><CustomListItem \n                        id="{contentRow>id}" \n                        type="Active"\n                        press="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} ? \'onLinkListSemanticObjectPressLocalData\' : ${contentRow>dataAction} ? \'onLinkListActionPressLocalData\' : ${contentRow>semanticObject} &amp;&amp; !${contentRow>action} ? \'\' : \'onLinkListItemPressLocalData\'}"\n                        app:targetUri="{= ${contentRow>targetUri} ? ${contentRow>targetUri} : \'\'}"\n                        app:openInNewWindow="{=${contentRow>openInNewWindow} ? ${contentRow>openInNewWindow} :\'\' }"\n                        app:dataAction="{= ${contentRow>dataAction} ? ${contentRow>dataAction} : \'\'}"\n                        app:contentRowIndex="{path: \'contentRow>\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.contentRowIndex\'}"><HBox\n                            class="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleIconSubtitle\'\n                            : ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleIcon\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleIconSubtitle\'\n                            : \'ovpDefaultClass\'}"><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' } sapOvpListItemQuickLink"><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="40px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></f:Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="36px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></f:Avatar></FlexBox></template:else></template:if></VBox></template:then><template:elseif test="{contentRow>imageUri}"><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' } sapOvpListItemQuickLink"><FlexBox height="40px"><core:Icon \n                                                id="linkListIcon--{contentRow>id}"\n                                                class="sapOvpLinkListImageCenter"\n                                                tooltip="{contentRow>toolTip}" \n                                                useIconTooltip="false"\n                                                size="22px" \n                                                src="{contentRow>imageUri}"/></FlexBox></VBox></template:elseif></template:if><template:if test="{contentRow>dataAction}"><template:then><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label \n                                            id="linkListSubTitleLabel--{contentRow>id}" \n                                            class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:then><template:elseif test="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} }"><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:elseif><template:else><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemCozy\' : \'sapOvpLinkListItemCompact\' } sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label \n                                            id="linkListSubTitleLabel--{contentRow>id}" \n                                            class="sapOvpCardLinkListSubTitle" \n                                            text="{contentRow>subTitle}"/></VBox></template:else></template:if></HBox></CustomListItem></template:repeat></items></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/CondensedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem\n            id="listItem"\n            type="Active"\n            press="onListItemPress"\n            class="sapOvpBarList sapOvpBarCondensedList"><template:if test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                            class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                            press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"\n                        contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                        id="DataField"\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><HBox class="sapOvpBarListHBox sapOvpBarStandardList"><micro:ComparisonMicroChart\n                    id= "BarChartDataPoint"\n                    class="sapOvpBarListComparisonMicroChartAlignment" \n                    width="100%"\n                    shrinkable="true"\n                    colorPalette="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.colorPaletteForComparisonMicroChart\'}"\n                    minValue="{minMaxModel>/minValue}"\n                    maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                            displayValue=" "\n                            value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                            color="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                id="DataPoint1"\n                                class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberPercentage"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                id="DataPoint1"\n                                class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpObjectNumber"\n                                textAlign="End"\n                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"/></template:else></template:if></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField"><template:if test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                path="dataField>Target/$AnnotationPath"\n                                                helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path"\n                                                var="contact"><VBox class="textAlignRight"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                        binding="{= ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                        text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                        press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                id="DataPoint2"\n                                class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber sapOvpBarListSubDataField\' : \'sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"/></template:if></template:else></template:if></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/ExtendedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem\n            id="listItem"\n            type="Active"\n            press="onListItemPress"><HBox class="sapOvpBarListHBox sapOvpExtendedBarListHBox"><VBox class="sapOvpBarListVBoxLeft"><template:if\n                        test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                                    class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif\n                        test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                                id="DataField1"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><template:if\n                            test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfSecondDataField\'}"><template:then><navpopover:SmartLink\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfSecondDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text\n                                id="DataField2"\n                                class="sapOvpBarListDataField sapOvpBarListSubDataField sapOvpExtendedBarListBlock sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><layoutData><FlexItemData growFactor="1"/></layoutData><micro:ComparisonMicroChart \n                        id="BarChartDataPoint" \n                        class="sapOvpBarListComparisonMicroChartAlignment" \n                        width="100%" \n                        height="1rem"\n                        colorPalette="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.colorPaletteForComparisonMicroChart\'}"\n                        minValue="{minMaxModel>/minValue}"\n                        maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                                displayValue=" "\n                                value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                                color="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart></VBox><VBox class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? \'sapOvpBarListVBoxRight\' : \'sapOvpListEmptyField\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                                list="{path:\'lineItem>\'}" \n                                var="dataField"><template:if test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                    path="dataField>Target/$AnnotationPath"\n                                                    helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path"\n                                                    var="contact"><VBox class="textAlignRight" width="100%"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                            binding="{= ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                            text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                            textAlign="Right"\n                                                            press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                    id="DataPoint2"\n                                    class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                    textAlign="End"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                                    unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                    state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"/></template:if></template:else></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 2}" ><ObjectNumber\n                            id="DataPoint3"\n                            class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                            textAlign="End"\n                            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                            unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatThirdDataPointState\'}"/></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                id="BarChartValue"\n                                class="sapOvpBarListObjectNumber sapOvpBarListObjectNumberPercentage sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                id="BarChartStateValue"\n                                class="sapOvpBarListObjectNumber valueStateText "\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"></ObjectNumber></template:else></template:if></VBox></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/List.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/imageSupported} &amp;&amp; ${ovpCardProperties>/listType} === \'condensed\' }" ><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.list.StandardListImage" type="XML"/></template:then><template:else><List \n                id="ovpList" \n                items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}" \n                class = "listCardType"><template:with \n                    path=\'ovpCardProperties>/annotationPath\'\n                    helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n                    var=\'lineItem\'><template:if test="{= ${ovpCardProperties>/listType} === \'extended\'}" ><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.ExtendedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.ObjectList" type="XML"/></template:else></template:if></template:then><template:else><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.CondensedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.StandardList" type="XML"/></template:else></template:if></template:else></template:if></template:with></List></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/ObjectList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"><items><ObjectListItem\n            id="listItem"\n            class="sapOvpObjectListItem sapOvpListFragment sapUiContentPadding"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointOrField\'}"\n            numberState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"><attributes><ObjectAttribute \n                    id="listItem2Row1Column"\n                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectAttribute \n                            id="listItem3row1column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectAttribute \n                                    id="listItem3row1column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><ObjectAttribute \n                                    id="listItem3row1column" \n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></template:else></template:if></attributes><firstStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                            id="listItem2row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    state="None" /></template:then><template:else><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    state="None" /></template:else></template:if></template:else></template:if></firstStatus><secondStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 2}" ><template:then><ObjectStatus\n                            id="listItem3row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatThirdDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                                id="listItem3row2column"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                state="None" /></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                            state="None" /></template:then><template:else><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/sixthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                            state="None" /></template:else></template:if></template:else></template:if></template:else></template:if></secondStatus></ObjectListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/StandardList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"><items><StandardListItem\n            id="listItem"\n            class="sapOvpStandardListItem"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointOrField\'}"\n            infoState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"></StandardListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/StandardListImage.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"><List \n        id="ovpList" \n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}"><template:with \n            path=\'ovpCardProperties>/annotationPath\' \n            helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n            var=\'lineItem\'><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>imageListCardType}" writeToDom="true" /></customData><items><StandardListItem\n                    id="listItem"\n                    class="sapOvpStandardListItem sapOvpStandardListItemImagesIcons"\n                    icon="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatImageUrl\'}"\n                    iconInset = "false"\n                    title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                    description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                    info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointOrField\'}"\n                    infoState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\n                    type="Active"\n                    press="onListItemPress"></StandardListItem></items></template:with></List></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/table/Table.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Table \n        id="ovpTable"\n        class="ovpTableClass cardType"\n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>tableCard}" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/layoutDetail} === \'resizable\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableDashBoardLayout" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableEasyScanLayout" type="XML"/></template:else></template:if></Table></core:FragmentDefinition>',
	"sap/ovp/cards/v4/table/TableDashBoardLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with\n        path=\'ovpCardProperties>/annotationPath\'           \n        helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n        var=\'eachItem\'><template:with  \n            path="eachItem>" \n            helper="sap.ovp.cards.AnnotationHelper.removeDuplicateDataField" \n            var="lineItem"><columns><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField"><template:if test="{= ${dataField>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField1"><template:if test="{= ${dataField1>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField1>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField1>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField1>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField1>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField2"><template:if\n                        test="{= ${dataField2>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField2>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField2>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField2>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField2>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField3"><template:if test="{=  !${dataField3>@com.sap.vocabularies.UI.v1.Importance/$EnumMember}}"><template:then><template:if test="{= ${dataField3>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField3>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField3>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', \n                                            formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'Right\' : ${path: \'dataField3>\', \n                                            formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'Center\':\n                                            ${dataField3>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField3>\', \n                                                formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'textAlignRight\' : ${path: \'dataField3>\', \n                                                formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'textAlignCenter\':\n                                                ${dataField3>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField3>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat></columns><items><ColumnListItem\n                    id = "tableItem"\n                    type="Active"\n                    press="onColumnListItemPress"><cells><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField4"><template:if test="{= ${dataField4>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField4>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{= (${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataFieldName\'} === ${dataField4>Label} &amp;&amp; ${ovpCardProperties>/showLineItemDetail})}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                                                            class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                            text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                            press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField4>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField4>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField4>Target/$AnnotationPath" \n                                                        helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField4>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField4>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField4>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField \n                                                        class="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                        editable="false" \n                                                        uomEditable="false" \n                                                        enabled="true"\n                                                        clientSideMandatoryCheck="false"\n                                                        value="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                        criticality="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                        criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                        number="{parts:[{path:\'dataField4>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField4>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                        state="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField5"><template:if\n                                test="{= ${dataField5>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField5>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField5>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField5>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField5>Target/$AnnotationPath"\n                                                        helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField5>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField5>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField5>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField \n                                                        class="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                        editable="false" \n                                                        uomEditable="false" \n                                                        enabled="true"\n                                                        clientSideMandatoryCheck="false"\n                                                        value="{path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                        criticality="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                        criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                        number="{parts:[{path:\'dataField5>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField5>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                        state="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField6"><template:if test="{= ${dataField6>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField6>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField6>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField6>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField6>Target/$AnnotationPath" \n                                                        helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField6>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField6>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField6>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField \n                                                        class="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                        editable="false" \n                                                        uomEditable="false" \n                                                        enabled="true"\n                                                        clientSideMandatoryCheck="false"\n                                                        value="{path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                        criticality="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                        criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                        number="{parts:[{path:\'dataField6>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField6>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                        state="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField7"><template:if test="{=  !${dataField7>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} }"><template:then><template:if test="{= ${dataField7>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField7>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField7>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with\n                                                        path="dataField7>Target/$AnnotationPath" \n                                                        helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField7>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField7>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField7>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField \n                                                        class="ovpSmartLink {= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                        editable="false" \n                                                        uomEditable="false" \n                                                        enabled="true"\n                                                        clientSideMandatoryCheck="false"\n                                                        value="{path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                        criticality="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                        criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                        number="{parts:[{path:\'dataField7>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField7>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                        state="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat></cells></ColumnListItem></items></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/table/TableEasyScanLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/disableTableCardFlexibility} === true}"><template:then><template:with \n                path=\'ovpCardProperties>/annotationPath\'\n                helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n                var=\'lineItem\'><columns><Column><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataFieldName\'}"/></Column><Column><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getSecondDataFieldName\'}"/></Column><Column hAlign="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'Center\' : \'Right\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}"><template:then><Text \n                                    class="displayBlock {= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                    text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForFirstDataPoint\'}"/></template:then><template:else><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getThirdDataFieldName\'}"/></template:else></template:if></Column></columns><items><ColumnListItem\n                        id = "tableItem"\n                        type="Active"\n                        press="onColumnListItemPress"><cells><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}"><template:then><template:if\n                                        test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticality\'} === true &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><template:then><sfi:SmartField \n                                                class="textAlignCenter"\n                                                editable="false" \n                                                uomEditable="false" \n                                                enabled="true"\n                                                clientSideMandatoryCheck="false"\n                                                value="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                criticality="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointStateForSmartField\'}"\n                                                                criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:then><template:else><ObjectNumber \n                                                class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"/></template:else></template:if></template:then><template:else><Text \n                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></cells></ColumnListItem></items></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableDashBoardLayout" type="XML"/></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ovp","type":"library","embeds":["app"],"applicationVersion":{"version":"1.115.0"},"title":"SAP library: sap.ovp","description":"SAP library: sap.ovp","ach":"CA-UI5-ST-OVP","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.115","libs":{"sap.ui.core":{"minVersion":"1.115.0"},"sap.ui.layout":{"minVersion":"1.115.0"},"sap.ui.generic.app":{"minVersion":"1.115.0"},"sap.m":{"minVersion":"1.115.0"},"sap.f":{"minVersion":"1.115.0"},"sap.ui.comp":{"minVersion":"1.115.0"},"sap.viz":{"minVersion":"1.115.0"},"sap.suite.ui.microchart":{"minVersion":"1.115.0"},"sap.ui.rta":{"minVersion":"1.115.0"},"sap.fe.placeholder":{"minVersion":"1.115.0"},"sap.fe.macros":{"minVersion":"1.115.0"},"sap.insights":{"minVersion":"1.115.0"},"sap.suite.ui.commons":{"minVersion":"1.115.0"},"sap.ui.integration":{"minVersion":"1.115.0"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}',
	"sap/ovp/support/DiagnosticsTool/view/DiagnosticsTool.view.xml":'<mvc:View\n\tcontrollerName="sap.ovp.support.DiagnosticsTool.controller.DiagnosticsTool"\n\txmlns="sap.m"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:html="http://www.w3.org/1999/xhtml"><Panel expandable="false" class="sapUiNoContentPadding"><content><VBox \n\t\t\t\tvisible="{= ${data>/status} === \'Loading\'}"\n\t\t\t\twidth="100%"\n\t\t\t\talignItems="Center"\n\t\t\t\tclass="sapUiSmallMarginTopBottom sapUiNoMarginBegin sapUiNoMarginEnd"><BusyIndicator text="The application is still loading! Please wait a few more seconds..."/></VBox><MessageStrip\n\t\t\t\ttext="{data>/statusMessage}"\n\t\t\t\ttype="Warning"\n\t\t\t\tshowIcon="true"\n\t\t\t\tvisible="{= ${data>/status} === \'Failed\'}"\n\t\t\t\tclass="sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiSmallMarginTop sapUiNoContentPadding"></MessageStrip><MessageStrip\n\t\t\t\ttext="The current state of the application is not known by the plugin!"\n\t\t\t\ttype="Error"\n\t\t\t\tshowIcon="true"\n\t\t\t\tvisible="{= ${data>/status} !== \'Failed\' &amp;&amp; ${data>/status} !== \'Rendered\' &amp;&amp; ${data>/status} !== \'Loading\' &amp;&amp; ${data>/status} !== \'Unknown\'}"\n\t\t\t\tclass="sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiSmallMarginTop sapUiNoContentPadding"></MessageStrip><Table\n\t\t\t\tid="diagnosticPropertiesTable"\n\t\t\t\tnoDataText="No data available! Please verify that the Fiori Elements application is still running."\n\t\t\t\titems="{data>/properties}"\n\t\t\t\tvisible="{= ${data>/status} === \'Rendered\' || ${data>/status} === \'Failed\' || ${data>/status} === \'Unknown\'}"\n\t\t\t\tclass="sapUiSizeCompact"><headerToolbar><Toolbar><Title text="Time of Retrieval: {data>/retrieval}"/><ToolbarSpacer/><Button\n\t\t\t\t\t\t\ticon="sap-icon://synchronize"\n\t\t\t\t\t\t\ttooltip="Refresh"\n\t\t\t\t\t\t\tpress="onRefreshData"/><MenuButton icon="sap-icon://copy" tooltip="Copy Plaintext" enabled="{data>/copyEnabled}" buttonMode="Split" defaultAction="onCopyDataPlain" useDefaultActionOnly="true" width="auto"><menu><Menu><items><MenuItem text="Copy Plaintext" icon="sap-icon://copy" press="onCopyDataPlain" /><MenuItem text="Copy HTML" icon="sap-icon://attachment-html" press="onCopyDataHTML" /></items></Menu></menu></MenuButton><Button\n\t\t\t\t\t\t\ticon="sap-icon://sys-help"\n\t\t\t\t\t\t\ttooltip="Documentation"\n\t\t\t\t\t\t\tpress="onShowDocumentation"/></Toolbar></headerToolbar><columns><Column id="nameCol" width="30%"/><Column id="valueCol"/></columns><items><ColumnListItem><cells><VBox><Text \n\t\t\t\t\t\t\t\t\ttext="{data>name}" \n\t\t\t\t\t\t\t\t\tclass="diagnosticPropertiesGroupHeaderContent"\n\t\t\t\t\t\t\t\t\tvisible="{= ${data>type} === \'group\'}"/><Text \n\t\t\t\t\t\t\t\t\ttext="{data>name}" \n\t\t\t\t\t\t\t\t\tvisible="{= ${data>type} !== \'group\'}"/></VBox><VBox><Text text="{data>value}" wrapping="true" visible="{= ${data>type} === \'string\'}"/><Link \n\t\t\t\t\t\t\t\t\ttext="{data>value}" \n\t\t\t\t\t\t\t\t\thref="{data>target}" \n\t\t\t\t\t\t\t\t\ttarget="_blank" \n\t\t\t\t\t\t\t\t\twrapping="true"\n\t\t\t\t\t\t\t\t\tvisible="{= ${data>type} === \'link\'}"/></VBox></cells></ColumnListItem></items></Table><html:textarea \n\t\t\t\tid="CopyDataTextArea"\n\t\t\t\tclass="diagnosticPropertiesCopyDataTextArea"></html:textarea><html:div id="CopyDataHTML"></html:div></content></Panel></mvc:View>\n'
});
//# sourceMappingURL=library-preload.js.map
