{"version":3,"file":"MetadataParserXML.js","names":["_await","value","then","direct","Promise","resolve","sap","ui","define","____sina_DataSourceType","___MetadataParser","___HierarchyMetadataParser","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","this","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","DataSourceType","MetadataParser","HierarchyMetadataParser","MetadataParserXML","_MetadataParser","_super","provider","_getWindow","_this","window","jsDOMWindow","jsdom","require","fs","jquery","readFileSync","dom","JSDOM","runScripts","$","jQuery","reject","fireRequest","client","url","getXML","parseResponse","metaXML","_this2","that","allInOneMap","businessObjectMap","businessObjectList","dataSourceMap","dataSourcesList","xmlDoc","parseXML","find","each","$this","helperMap","_parseEntityType","_parseEntityContainer","schema","hierarchyMetadataParser","entityTypeName","attr","entitySet","keys","attributeMap","resourceBundle","labelResourceBundle","label","labelPlural","annotations","hierarchyDefinitionsMap","icon","push","parse","siblings","$element","annotationName","undefined","toUpperCase","annotationValue","_getValueFromElement","resourceUrl","resources","language","getCore","getConfiguration","getLanguage","log","error","toString","sKey","sTranslatedText","getText","_setAnnotationValue","index","attributeName","attribute","labelRaw","type","presentationUsage","isFacet","isSortable","supportsTextSearch","displayOrder","annotationsAttr","unknownAnnotation","hierarchyDefinition","children","arrayEntry","entryAnnoName","entryAnnoValue","isKey","facetPosition","facetIconUrlAttributeName","isFilteringAttribute","startsWith","identification","UI","IDENTIFICATION","POSITION","Array","isArray","TYPE","element","text","trim","Number","parseFloat","isNaN","parseInt","schemaXML","name","entityTypeFullQualified","entityType","slice","lastIndexOf","newDatasource","sina","_createDataSource","id","BusinessObject","attributesMetadata","dataSource","__exports","__esModule"],"sources":["MetadataParserXML-dbg.js"],"mappings":"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"}