{"version":3,"file":"FacetParser.js","names":["sap","ui","define","____sina_SearchQuery","typeConverter","____sina_LogicalOperator","____sina_ComparisonOperator","____core_Log","____core_errors","___HierarchyParser","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","SearchQuery","LogicalOperator","ComparisonOperator","Log","FacetsParseError","InternalServerError","HierarchyParser","FacetParser","provider","this","sina","log","value","parse","query","data","_this","hierarchyParser","error","Promise","reject","message","resolve","warn","facets","facetData","resultSet","filter","dataSource","getAllDataSource","parseDataSourceFacet","e1","type","DataSourceType","Category","Dimensions","PropertyType","attributeMetadata","parseFacetAttribute","isHierarchy","parseHierarchyFacet","parseChartFacet","itemsInString","Items","Array","isArray","JSON","stringify","push","all","e","dataSourceQuery","createDataSourceQuery","clone","items","cell","getDataSource","scope","createDataSource","id","ValueLow","label","Description","_createDataSourceResultSetItem","dimensionValueFormatted","labelPlural","measureValue","_Count","measureValueFormatted","toString","_createDataSourceResultSet","title","_setResultSet","createAttributeFilterCondition","attributeId","metadata","hasOwnProperty","call","finalCondition","createComplexCondition","attributeLabel","valueLabel","formatFacetValue","operator","And","conditions","lowBoundCondition","upperBoundCondition","From","createSimpleCondition","attribute","Le","odata2Sina","To","Ge","textElementValue","startsWith","initialValue","dimension","PropertyName","getAttributeMetadata","_attributeMetadata$us","_attributeMetadata$us2","chartQuery","setDataSource","setRootCondition","rootCondition","createChartQuery","iconPropertyName","usage","AdvancedSearch","iconUrlAttributeName","isIconContained","findIndex","item","_item$iconPropertyNam","icon","_attributeMetadata$us3","_attributeMetadata$us4","_attributeMetadata$us5","_attributeMetadata$us6","_createChartResultSetItem","filterCondition","_createChartResultSet","__exports","__esModule"],"sources":["FacetParser-dbg.js"],"mappings":"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"}