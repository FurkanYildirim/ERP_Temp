/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){function e(e,r,t){if(t){return r?r(e):e}if(!e||!e.then){e=Promise.resolve(e)}return r?e.then(r):e}sap.ui.define(["../HierarchyDisplayType","../HierarchyNodePath","../SearchQuery","./Formatter","../util"],function(r,t,a,n,i){function o(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function u(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function c(e,r,t){if(r)u(e.prototype,r);if(t)u(e,t);Object.defineProperty(e,"prototype",{writable:false});return e}function f(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(r)s(e,r)}function s(e,r){s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(r,t){r.__proto__=t;return r};return s(e,r)}function h(e){var r=p();return function t(){var a=v(e),n;if(r){var i=v(this).constructor;n=Reflect.construct(a,arguments,i)}else{n=a.apply(this,arguments)}return y(this,n)}}function y(e,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}else if(r!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(r){return r.__proto__||Object.getPrototypeOf(r)};return v(e)}
/*!
   * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
   */var d=r["HierarchyDisplayType"];var b=t["HierarchyNodePath"];var P=a["SearchQuery"];var m=n["Formatter"];var g=function(r){f(a,r);var t=h(a);function a(){o(this,a);return t.apply(this,arguments)}c(a,[{key:"initAsync",value:function e(){return Promise.resolve()}},{key:"format",value:function e(r){return r}},{key:"formatAsync",value:function r(t){try{if(!(t.query instanceof P)||t.query.top>99){return e(t)}var a=t.query.filter.dataSource;if(t.sina.configuration.FF_hierarchyBreadcrumbs!==true||a.isHierarchyDefinition!==true&&!a.hierarchyHelperDatasource){return e(t)}var n=a.hierarchyAttribute;var o=a.hierarchyName;var u=[];if(a.hierarchyHelperDatasource){n=a.hierarchyHelperDatasource.hierarchyAttribute;u.push(a)}else{u=i.getNavigationHierarchyDataSources(a.sina,n,o,a)}if(u.length===0){return e(t)}t.items.forEach(function(e){var r="";var t="";var o="";var c=i.assembleTitle(e);var f=e.attributes.find(function(e){return e.id===n});if(f){var s,h;r=f.id;t=f.value;o=c||f.value;if(Array.isArray(e.hierarchyNodePaths)&&e.hierarchyNodePaths.length>0&&e.hierarchyNodePaths[0]instanceof b&&e.hierarchyNodePaths[0].name===r&&Array.isArray(e.hierarchyNodePaths[0].path)&&e.hierarchyNodePaths[0].path.length>0){var y=e.hierarchyNodePaths[0].path;var l=y[y.length-1];t=l.id}e.defaultNavigationTarget=e.sina.createStaticHierarchySearchNavigationTarget(t,o,a,"",r);if(((s=u[0])===null||s===void 0?void 0:(h=s.attributeMetadataMap[r])===null||h===void 0?void 0:h.hierarchyDisplayType)==d.HierarchyResultView){i.assembleHierarchyDecendantsNavigations(e,r,t,o,u)}}});return e(t)}catch(e){return Promise.reject(e)}}}]);return a}(m);var O={__esModule:true};O.HierarchyResultSetFormatter=g;return O})})();
//# sourceMappingURL=HierarchyResultSetFormatter.js.map