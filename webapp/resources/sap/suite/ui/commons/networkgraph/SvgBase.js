/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/Device","sap/base/security/encodeXML"],function(t,e,r,o,n){"use strict";var i=t.networkgraph.ElementStatus;var s="http://www.w3.org/2000/svg";var a=e.extend("sap.suite.ui.commons.networkgraph.SvgBase",{renderer:{}});a.prototype.HIGHLIGHT_CLASS="sapSuiteUiCommonsNetworkElementHighlight";a.prototype.SELECT_CLASS="sapSuiteUiCommonsNetworkElementSelected";a.prototype.VISIBLE_ACTIONS_BUTTONS_CLASS="sapSuiteUiCommonsNetworkNodeActionButtonsVisible";a.prototype.FOCUS_CLASS="sapSuiteUiCommonsNetworkElementFocus";a.prototype.LINEBUTTONSID="divlinebuttons";a.prototype._createElement=function(t,e){var r=document.createElementNS(s,t);return this._setAttributes(r,e)};a.prototype._setAttributes=function(t,e){e=e||{};Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])});return t};a.prototype._getStatusClass=function(t){var e=t||this.getStatus();switch(e){case i.Warning:return" sapSuiteUiCommonsNetworkElementWarning ";case i.Error:return" sapSuiteUiCommonsNetworkElementError ";case i.Success:return" sapSuiteUiCommonsNetworkElementSuccess ";case i.Information:return" sapSuiteUiCommonsNetworkElementInformation ";default:return""}};a.prototype._getAccessibilityLabel=function(){throw new Error("To be implemented by an extending class.")};a.prototype._renderRoundRect=function(t){t=t||{};var e=t.renderManager;if(!e){return this._renderControl("path",{d:this._renderRoundRectPath(t),style:t.style,class:t.class,id:t.id})}else{this._renderControl("path",{d:this._renderRoundRectPath(t),style:t.style,class:t.class,id:t.id},null,e)}};a.prototype._renderRoundRectPath=function(t){t.topRight=t.topRight||0;t.topLeft=t.topLeft||0;t.bottomRight=t.bottomRight||0;t.bottomLeft=t.bottomLeft||0;var e=t.x+t.width,r=t.y+t.height,o="",n=function(t,e,r){o+=" A"+t+","+t+" 0 0,1 "+e+","+r},i=function(t,e){o+=" L"+t+","+e};o="M"+(t.x+t.topLeft)+","+t.y;i(e-t.topRight,t.y);if(t.topRight){n(t.topRight,e,t.y+t.topRight)}i(e,r-t.bottomRight);if(t.bottomRight){n(t.bottomRight,e-t.bottomRight,r)}i(t.x+t.bottomLeft,r);if(t.bottomLeft){n(t.bottomLeft,t.x,r-t.bottomLeft)}i(t.x,t.y+t.topLeft);if(t.topLeft){n(t.topLeft,t.x+t.topLeft,t.y)}return o};a.prototype._appendTextAnchor=function(t){var e=sap.ui.getCore().getConfiguration().getRTL();if(e&&this._isMSBrowser()){t["text-anchor"]="end"}};a.prototype._renderText=function(t){t=t||{};var e=t.renderManager;if(t.height&&this._isMSBrowser()){t.attributes.dy=t.height/2}this._appendTextAnchor(t.attributes);if(!e){var r;r=this._renderControl("text",t.attributes,false);r+=t.text?n(t.text):"";if(t.close!==false){r+="</text>"}return r}else{this._renderControl("text",t.attributes,false,e);if(!!t.text){e.text(t.text)}if(t.close!==false){e.close("text")}}};a.prototype._renderSpanText=function(t,e,r){t=t||{};var o=t.renderManager;if(r&&this._isMSBrowser()){t.dy=r/2}if(!o){var i=this._renderControl("text",t,false);i+=this._renderControl("tspan",{},false);i+=n(e);i+="</tspan></text>";return i}else{this._renderControl("text",t,false,o);this._renderControl("tspan",{},false,o);o.text(e);o.close("tspan");o.close("text")}};a.prototype._cannotAppendInnerHtml=function(){return this._isMSBrowser()||o.browser.safari};a.prototype._isMSBrowser=function(){return o.browser.edge||o.browser.msie};a.prototype._renderIcon=function(t){t=t||{};var e=t.renderManager;var o=r.getIconInfo(t.icon);if(!e){if(o){return this._renderText({attributes:t.attributes,text:o.content,height:t.height})}return""}else{if(o){this._renderText({attributes:t.attributes,text:o.content,height:t.height,renderManager:e})}}};a.prototype._renderControl=function(t,e,r,o){if(!o){var n="<"+t+" ";e=e||{};Object.keys(e).forEach(function(t){if(typeof e[t]!=="undefined"){n+=t;n+="=";n+='"'+e[t]+'"'}});n+=">";r=r!==false;if(r){n+="</"+t+">"}return n}else{delete e["renderManager"];var i=["img","br","input","area","hr","col","link"];var s=i.indexOf(t)!==-1;o=s?o.voidStart(t):o.openStart(t);if(e){Object.keys(e).forEach(function(t){var r=e[t];if(typeof r!=="undefined"&&r!==""){switch(t){case"id":o.attr(t,r);break;case"class":r.split(" ").forEach(function(t){if(t){o.class(t)}});break;case"style":this.applyStyles(o,this.getStyleObject(r));break;default:o.attr(t,r)}}}.bind(this))}o=s?o.voidEnd():o.openEnd();r=r!==false;if(r&&!s){o.close(t)}}};a.prototype.getStyleObject=function(t){var e={};if(t){var r=t.split(";");for(var o=0;o<r.length;o++){if(r[o]){var n=r[o].split(":");e[n.splice(0,1)[0]]=n.join(":")}}}return e};a.prototype.applyStyles=function(t,e){Object.keys(e).forEach(function(r){t.style(r,e[r])})};a.prototype._createText=function(t,e){var r=t.firstChild,o=e.text.length,n=e.dots!==false,i=e.text,s=true,a=false,f=parseInt(t.getAttribute("maxwidth"),10)||e.width,l=parseFloat(t.getAttribute("x")),c=e.suffix?e.suffix:"",p=e.centerWidth?e.centerWidth:f,u="..."+c,h,d;e.trim=e.trim!==false;r.textContent=e.text+c;if(e.trim&&f>0){d=t.getBBox().width;if(d>f){a=true;while(true){o/=2;h=i.length+(s?-1:1)*Math.ceil(o);i=e.text.substring(0,h);r.textContent=i+(n?u:"");d=t.getBBox().width;s=d>f;if(o<.5&&!s){if(d>f){i=e.text.substring(0,i.length-Math.ceil(o*2));r.textContent=i+ +(n?u:"")}break}}}}if(e.hCenter&&!a){t.setAttribute("text-anchor","middle");t.setAttribute("x",l+p/2)}return a};a.prototype._createIcon=function(t,e,o){var n=r.getIconInfo(e),i;if(n){if(o&&this._isMSBrowser()){t.dy=o/2}i=this._createElement("text",t);i.textContent=n.content;return i}return null};a.prototype._getDomId=function(t){var e=this.getId();if(t){e+="-"+t}return e};a.prototype._convertToSvg=function(t){var e;var r=function(t){var e={},r;if(t.attributes){for(var o=0;o<t.attributes.length;o++){r=t.attributes[o];e[r.name]=r.value}}return e};var o=function(t,e){var n,i,s="";if(t.childNodes.length===1&&!t.childNodes[0].localName){e.textContent=t.childNodes[0].textContent;return}for(var a=0;a<t.childNodes.length;a++){n=t.childNodes[a];s=n.localName;if(s==="clippath"){s="clipPath"}i=this._createElement(s,r(n));e.appendChild(i);if(n.childNodes){o(n,i)}}}.bind(this);e=this._createElement(t[0].localName,r(t[0]));o(t[0],e);return e};a.prototype._convertToStyle=function(t,e,r){var o="";if(t){Object.keys(t).forEach(function(e){var r=t[e];if(typeof r!=="undefined"&&r!==""){o+=e;o+=":";o+=t[e]+";"}});o=o+(e||"");if(!r&&o){o='style="'+o+'"'}}return o};a.prototype._renderHtmlElement=function(t,e,r,o){if(!o){var n="";n+="<"+t+" ";n+=this._convertToStyle(e);if(r){Object.keys(r).forEach(function(t){var e=r[t];if(typeof e!=="undefined"&&e!==""){n+=t;n+="=";n+='"'+e+'"'}})}n+=">";return n}else{o=t==="img"?o.voidStart("img"):o.openStart(t);var i=this._convertToStyle(e,undefined,true);this.applyStyles(o,this.getStyleObject(i));if(r){Object.keys(r).forEach(function(t){var e=r[t];if(typeof e!=="undefined"&&e!==""){if(t==="class"){e.split(" ").forEach(function(t){if(t){o.class(t)}})}else if(t==="style"){this.applyStyles(o,this.getStyleObject(e))}else{o.attr(t,e)}}}.bind(this))}o=t==="img"?o.voidEnd():o.openEnd()}};a.prototype._renderHtmlIcon=function(t,e,o,i,s,a){var f=r.getIconInfo(t),l="",c="";if(!a){o=o?'id="'+this.getId()+"-"+o+'"':"";e=e||"";if(f){if(f.fontFamily){c='style="font-family:'+n(f.fontFamily)+'"'}l=s?' aria-label="'+n(s)+'" ':"";s=s?' title="'+n(s)+'" ':"";return"<div "+o+s+l+" "+(i||"")+'class="sapSuiteUiCommonsNetworkGraphIcon '+e+'"><span '+c+">"+n(f.content)+"</span></div>"}return""}else{if(f){a.openStart("div");if(o){a.attr("id",this.getId()+"-"+o)}if(s){a.attr("title",s)}if(s){a.attr("aria-label",s)}a.class("sapSuiteUiCommonsNetworkGraphIcon");if(e){e.split(" ").forEach(function(t){if(t){a.class(t)}})}this.applyStyles(a,this.getStyleObject(i));a.openEnd();a.openStart("span");if(f.fontFamily){a.style("font-family",n(f.fontFamily))}a.openEnd().text(f.content).close("span");a.close("div")}}};return a});
//# sourceMappingURL=SvgBase.js.map