/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","./SvgBase","sap/ui/base/ManagedObject","sap/ui/core/theming/Parameters","sap/m/CheckBox","sap/m/library"],function(jQuery,t,e,r,i,o,s){"use strict";var n=s.ValueCSSColor,a=t.networkgraph.ElementStatus,u=t.networkgraph.HeaderCheckboxState;var l=e.extend("sap.suite.ui.commons.networkgraph.ElementBase",{metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},status:{type:"string",group:"Appearance",defaultValue:a.Standard}},aggregations:{attributes:{type:"sap.suite.ui.commons.networkgraph.ElementAttribute",multiple:true,singularName:"attribute"}}},renderer:{}});l.prototype.scrollToElement=function(){var t=this.getParent();if(t){t._scrollToElement(this)}};l.prototype._afterRenderingBase=function(){var t=this.getParent(),e,r;var i=t&&t._isUseNodeHtml()&&this.isA("sap.suite.ui.commons.networkgraph.Node"),o=this.isA("sap.suite.ui.commons.networkgraph.Group");var s=sap.ui.getCore().createRenderManager();if(!i&&!o){if(this._cannotAppendInnerHtml()){e=this.$().parent();r=this._convertToSvg(jQuery.parseHTML(this._render()));e[0].replaceChild(r,this.$()[0])}else{var n=this._render({renderManager:s});if(n){this.$()[0].outerHTML=n}else{s.flush(this.$()[0],true,false);s.destroy()}}}this._afterRendering()};l.prototype._removeFromInvalidatedControls=function(){try{this.getUIArea()._onControlRendered(this)}catch(t){}};l.prototype._setFocus=function(t){var e=t?"addClass":"removeClass";this.$()[e](this.FOCUS_CLASS)};l.prototype._replaceId=function(t,e){if(t.attr("id")){t.attr("id",t.attr("id")+e)}t.removeAttr("data-sap-ui");var r=t.children();if(r.length===0){return}r.each(function(t,r){this._replaceId(jQuery(r),e)}.bind(this))};l.prototype._useInLayout=function(){return true};l.prototype._hasFocus=function(){return this.$().hasClass(this.FOCUS_CLASS)};l.prototype._hasDefaultStatus=function(t){t=t||this.getStatus();return t===a.Error||t===a.Information||t===a.Warning||t===a.Success};l.prototype._hasCustomStatus=function(t){t=t||this.getStatus();if(t===a.Standard||this._hasDefaultStatus(t)){return false}return!!t};l.prototype._isCustomStatusColor=function(t){return t!==l.ColorType.BorderWidth&&t!==l.ColorType.BorderStyle};l.prototype._getElementId=function(t){return t?this.getId()+t:this.getId()};l.prototype._getColor=function(t,e){var r=this.getParent(),o,s,a="";var u=function(){if(typeof this.getSelected==="function"&&this.getSelected()){if(t===l.ColorType.Background||t===l.ColorType.Content||t===l.ColorType.Border){t="Selected"+t}if(t==l.ColorType.HeaderContent&&this._isBox()){t=l.ColorType.Content}}}.bind(this);e=e||this.getStatus();if(!this._hasCustomStatus(e)){return""}if(!r||!t){return""}s=r._oStatuses[e];if(s){if(t.indexOf("Focus")!==-1){if(!s.getUseFocusColorAsContentColor()){return""}t=t.replace("Focus","Content")}u();o="get"+t+"Color";var c=s[o]();if(c){var a=i.get(c);if(!a&&c&&n.isValid(c)){a=c}}}return a?a:""};l.prototype._getStatusValue=function(t,e){var r=this.getParent(),i;e=e||this.getStatus();if(!this._hasCustomStatus(e)){return""}if(!r||!t){return""}i=r._oStatuses[e];if(i){return i["get"+t]()}return""};l.prototype._getStatusStyle=function(t,e){var r="";if(!this._hasCustomStatus()){return""}Object.keys(t).forEach(function(e){var i=this._isCustomStatusColor(t[e])?this._getColor(t[e]):this._getStatusValue(t[e]);if(i){if(r){r+=";"}r+=e+":"+i}},this);if(e&&r){r='style="'+r+'"'}return r};l.prototype._checkForProcessData=function(){var t=this.getParent();if(t&&t._bRequiresDataProcessing){t._processData()}};l.prototype.getStyleObject=function(t){var e={};if(t){var r=t.split(";");for(var i=0;i<r.length;i++){if(r[i]){var o=r[i].split(":");e[o.splice(0,1)[0]]=o.join(":")}}}return e};l.prototype.applyStyles=function(t,e){Object.keys(e).forEach(function(r){t.style(r,e[r])})};l.prototype.getVisibleAttributes=function(){return this.getAttributes().filter(function(t){return t.getVisible()})};l.prototype.setProperty=function(t,e,i){var o=Object.getPrototypeOf(this).aProcessRequiredProperties;r.prototype.setProperty.call(this,t,e,i);if(o&&o.indexOf(t)!==-1&&this.getParent()){this.getParent()._bRequiresDataProcessing=true}};l.prototype.toString=function(){return this.getMetadata()._sClassName+" - "+this.getTitle()};l.prototype._correctTitle=function(t){if(this.getTitle()){var e=this.$().find("."+t);if(e[0]){var r=e[0].getBBox().width,i=parseInt(e.attr("maxwidth"),10);if(r>i){this._createText(e[0],{text:this.getTitle(),hCenter:true})}}}};l.prototype._renderTitle=function(t){var e=10;t=t||{};var r=t.renderManager;if(!r){var i=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-title-clip)"},false);i+=this._renderText({attributes:{style:t.style,class:t.class,x:t.x,y:t.y,maxWidth:t.maxWidth},text:t.title,height:e});i+="</g>";return i}this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-title-clip)"},false,r);this._renderText({attributes:{style:t.style,class:t.class,x:t.x,y:t.y,maxWidth:t.maxWidth},text:t.title,height:e,renderManager:r});r.close("g")};l.prototype._renderClipPath=function(t){t=t||{};var e=t.renderManager;if(!e){var r=this._renderControl("clipPath",{id:t.id},false);r+=this._renderControl("rect",{x:t.x,y:t.y,width:t.width||this._iWidth,height:t.height||this._iHeight,direction:t.direction||""});r+="</clipPath>";return r}else{this._renderControl("clipPath",{id:t.id},false,e);this._renderControl("rect",{x:t.x,y:t.y,width:t.width||this._iWidth,height:t.height||this._iHeight,direction:t.direction||""},null,e);e.close("clipPath")}};l.prototype._renderClonedControl=function(t,e){if(t.mapRender){var r=e.$().clone();this._replaceId(r,t.idSufix);t.renderManager.unsafeHtml(r[0].outerHTML)}else{t.renderManager.renderControl(e)}};l.prototype._appendActionButton=function(t,e){var r=t.id?'id="'+t.id+'"':"";var i="<div "+r+' title="'+t.title+'"class="sapSuiteUiCommonsNetworkGraphDivActionButtonBackground">';i+='<div class="sapSuiteUiCommonsNetworkGraphDivActionButton ';if(!t.enable){i+='sapSuiteUiCommonsNetworkGraphDivActionButtonDisabled"';i+='style = " display: none'}i+='">';i+=this._renderHtmlIcon(t.icon,t.class||"");i+="</div>";i+='<div class="sapSuiteUiCommonsNetworkActionButtonFocusCircle"></div>';i+="</div>";var o=jQuery(i);if(t.enable&&t.click){o.on("click",t.click);o.on("click",function(t){if(this.getParent()){this.getParent().setFocus({item:this,button:o[0]},true)}}.bind(this))}e.append(o)};l._isRectOnScreen=function(t,e,r,i,o,s,n,a){return Math.max(t,e)>o&&Math.min(t,e)<s&&Math.max(r,i)>n&&Math.min(r,i)<a};l.prototype._isOnScreen=function(t,e,r,i){return false};l.prototype._setHeaderCheckBoxState=function(t){if(t!==u.Hidden){this._getHeaderCheckbox().setSelected(t===u.Checked);this._getHeaderCheckbox().setVisible(true)}else if(this.getAggregation("_checkBox")){this._getHeaderCheckbox().setVisible(false)}this.setProperty("headerCheckBoxState",t)};l.prototype.setVisible=function(t){var e=this.getParent();this.setProperty("visible",t);if(e){e.setFocus(null);e._setupKeyboardNavigation()}return this};l.prototype.setStatus=function(t){var e=this.getParent();this.setProperty("status",t);if(e&&e._bIsLayedOut){e.updateLegend()}return this};l.ColorType=Object.freeze({BorderStyle:"BorderStyle",BorderWidth:"BorderWidth",Background:"Background",Border:"Border",Content:"Content",HeaderContent:"HeaderContent",SelectedBorder:"SelectedBorder",SelectedBackground:"SelectedBackground",SelectedContent:"SelectedContent",HoverBackground:"HoverBackground",HoverBorder:"HoverBorder",HoverContent:"HoverContent",Focus:"Focus",HoverFocus:"HoverFocus",SelectedFocus:"SelectedFocus"});return l});
//# sourceMappingURL=ElementBase.js.map