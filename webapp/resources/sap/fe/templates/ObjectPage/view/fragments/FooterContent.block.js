/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/buildingBlocks/BuildingBlockSupport","sap/fe/core/buildingBlocks/RuntimeBuildingBlock","sap/fe/core/converters/helpers/BindingHelper","sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/macros/actions/CustomAction.block","sap/fe/macros/actions/DataFieldForAction.block","sap/fe/macros/messages/MessageButton","sap/m/Button","sap/m/DraftIndicator","sap/m/Menu","sap/m/MenuButton","sap/m/MenuItem","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/ToolbarSpacer","sap/ui/core/InvisibleText","../../ObjectPageTemplating","sap/fe/core/jsx-runtime/jsx","sap/fe/core/jsx-runtime/jsxs"],function(t,e,i,n,a,r,o,s,l,c,u,d,p,f,g,h,v,b,m,A,y,_,M){"use strict";var E,D,P,O,C,T,B,x,S;var I={};var w=s.generate;var F=r.resolveBindingString;var V=r.pathInModel;var j=r.or;var R=r.not;var k=r.ifElse;var z=r.constant;var N=r.compileExpression;var G=r.and;var J=a.getInvolvedDataModelObjects;var L=n.ActionType;var H=i.UI;var U=i.Draft;var q=t.defineBuildingBlock;var Y=t.blockAttribute;function X(t,e,i,n){if(!i)return;Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function K(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function Q(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;W(t,e)}function W(t,e){W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,i){e.__proto__=i;return e};return W(t,e)}function Z(t,e,i,n,a){var r={};Object.keys(n).forEach(function(t){r[t]=n[t]});r.enumerable=!!r.enumerable;r.configurable=!!r.configurable;if("value"in r||r.initializer){r.writable=true}r=i.slice().reverse().reduce(function(i,n){return n(t,e,i)||i},r);if(a&&r.initializer!==void 0){r.value=r.initializer?r.initializer.call(a):void 0;r.initializer=undefined}if(r.initializer===void 0){Object.defineProperty(t,e,r);r=null}return r}function $(t,e){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}let tt=(E=q({name:"FooterContent",namespace:"sap.fe.templates.ObjectPage.view.fragments"}),D=Y({type:"string",required:true}),P=Y({type:"array",required:true}),O=Y({type:"sap.ui.model.Context"}),E(C=(T=function(t){Q(e,t);function e(e){var i,n;var a;for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++){s[l-1]=arguments[l]}a=t.call(this,e,...s)||this;X(a,"id",B,K(a));X(a,"actions",x,K(a));X(a,"contextPath",S,K(a));a.isDraftValidation=false;a.oDataMetaModel=a.contextPath.getModel();a.dataViewModelPath=J(a.contextPath);const c=a.dataViewModelPath.startingEntitySet;a.isDraftValidation=!!((i=o.getDraftRoot(c))!==null&&i!==void 0&&i.PreparationAction&&c!==null&&c!==void 0&&(n=c.entityType.annotations.Common)!==null&&n!==void 0&&n.Messages);return a}I=e;var i=e.prototype;i.getActionModelPath=function t(e){const i=e.annotationPath;if(i){const t=this.oDataMetaModel.getContext(i);return J(t)}return undefined};i.getVisibility=function t(){const e=t=>{if(t.length){return t.map(t=>F(t.visible??true,"boolean"))}return[z(false)]};const i=this.actions.filter(t=>t.type===L.DataFieldForAction);const n=e(this.actions.filter(t=>y.isManifestAction(t)));const a=e(i);const r=!!i.find(t=>{var e,i,n;const a=this.getActionModelPath(t);return!(a!==null&&a!==void 0&&(e=a.targetObject)!==null&&e!==void 0&&(i=e.annotations)!==null&&i!==void 0&&(n=i.UI)!==null&&n!==void 0&&n.Hidden)});return j(r,j(...n),G(j(H.IsEditable,j(...a)),R(V("isCreateDialogOpen","internal"))))};i.getDraftIndicator=function t(){var e;const i=this.dataViewModelPath.targetEntitySet||this.dataViewModelPath.startingEntitySet;const n=(e=i.annotations)===null||e===void 0?void 0:e.Common;if(n!==null&&n!==void 0&&n.DraftRoot||n!==null&&n!==void 0&&n.DraftNode){return _(p,{state:"{ui>/draftStatus}",visible:"{ui>/isEditable}"})}return undefined};i.getApplyButton=function t(e,i){const n=e.getController();const a=e.getViewData();if(this.isDraftValidation&&!a.isDesktop&&!a.fclEnabled){return _(g,{text:"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_APPLY_DRAFT}",defaultAction:()=>n._applyDocument(e.getBindingContext()),useDefaultActionOnly:"true",buttonMode:"Split",type:i,visible:H.IsEditable,children:_(f,{children:_(h,{text:"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_VALIDATE_DRAFT}",press:()=>n._validateDocument()})})})}return _(d,{id:this.createId("StandardAction::Apply"),text:"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_APPLY_DRAFT}",type:i,enabled:true,press:()=>n._applyDocument(e.getBindingContext()),visible:"{ui>/isEditable}"})};i.getPrimary=function t(e,i){const n=e.getViewData();const a=e.getController();if(this.isDraftValidation&&!n.isDesktop){return _(g,{text:this.getTextSaveButton(),"jsx:command":"cmd:Save|defaultAction",useDefaultActionOnly:"true",buttonMode:"Split",type:i,visible:H.IsEditable,children:_(f,{children:_(h,{text:"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_VALIDATE_DRAFT}",press:()=>a._validateDocument()})})})}return _(d,{id:this.createId("StandardAction::Save"),text:this.getTextSaveButton(),type:i,visible:H.IsEditable,enabled:true,"jsx:command":"cmd:Save|press"})};i.getTextSaveButton=function t(){var e;const i=this.getTranslatedText("T_OP_OBJECT_PAGE_SAVE");const n=this.getTranslatedText("T_OP_OBJECT_PAGE_CREATE");return k(k(((e=this.dataViewModelPath.startingEntitySet.annotations.Session)===null||e===void 0?void 0:e.StickySessionSupported)!==undefined,H.IsCreateMode,U.IsNewObject),n,i)};i.getCancelButton=function t(){return _(d,{id:this.createId("StandardAction::Cancel"),text:o.isDraftRoot(this.dataViewModelPath.targetEntitySet)?"{sap.fe.i18n>C_COMMON_OBJECT_PAGE_DISCARD_DRAFT}":"{sap.fe.i18n>C_COMMON_OBJECT_PAGE_CANCEL}","jsx:command":"cmd:Cancel|press",visible:H.IsEditable,ariaHasPopup:N(k(V("/isDocumentModified","ui"),z("Dialog"),z("None"))),enabled:true,layoutData:_(b,{priority:"NeverOverflow"})})};i.getDataFieldForActionButton=function t(e){if(e.annotationPath){return _(c,{id:w([this.id,this.getActionModelPath(e)]),action:e,contextPath:this.contextPath})}};i.getManifestButton=function t(e){if(y.isManifestAction(e)){return _(l,{id:w(["fe","FooterBar",e.id]),action:e})}};i.getActionControls=function t(e){const i=y.buildEmphasizedButtonExpression(this.dataViewModelPath);return this.actions.map(t=>{switch(t.type){case L.DefaultApply:return this.getApplyButton(e,i);case L.DataFieldForAction:return this.getDataFieldForActionButton(t);case L.Primary:return this.getPrimary(e,i);case L.Secondary:return this.getCancelButton();default:return this.getManifestButton(t)}}).filter(t=>!!t)};i.getContent=function t(e){const i=e.getController();return M(v,{id:this.id,asyncMode:true,visible:this.getVisibility(),children:[_(A,{id:this.createId("MessageButton::AriaText"),text:"{sap.fe.i18n>C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_BUTTON_ARIA_TEXT}"}),_(u,{id:this.createId("MessageButton"),messageChange:()=>i._getFooterVisibility(),ariaLabelledBy:[this.createId("MessageButton::AriaText")],type:"Emphasized",ariaHasPopup:"Dialog"}),_(m,{}),this.getDraftIndicator(),this.getActionControls(e)]})};return e}(e),B=Z(T.prototype,"id",[D],{configurable:true,enumerable:true,writable:true,initializer:null}),x=Z(T.prototype,"actions",[P],{configurable:true,enumerable:true,writable:true,initializer:null}),S=Z(T.prototype,"contextPath",[O],{configurable:true,enumerable:true,writable:true,initializer:null}),T))||C);I=tt;return I},false);
//# sourceMappingURL=FooterContent.block.js.map