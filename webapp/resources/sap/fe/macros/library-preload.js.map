{"version":3,"file":"library-preload.js","sections":[{"offset":{"line":1,"column":0},"map":{"version":3,"names":["ValueColor","mLibrary","CommonHelper","getPathToKey","oCtx","getObject","isVisible","target","oInterface","oModel","context","getModel","sPropertyPath","getPath","oAnnotations","hidden","$Path","getParameterEditMode","fieldControl","immutable","computed","sEditMode","EditMode","Editable","ReadOnly","$EnumMember","Disabled","getMetaPath","undefined","isDesktop","system","desktop","getTargetCollectionPath","navCollection","sPath","getMetadata","getName","getMetaModel","aParts","split","filter","sPart","entitySet","length","navigationCollection","slice","join","isPropertyFilterable","oDataField","sPropertyLocationPath","getLocationForPropertyPath","sProperty","replace","$Type","iLength","sCollectionPath","lastIndexOf","indexOf","gotoActionParameter","oContext","sPropertyName","CommonUtils","getParameterPath","getEntitySetName","oMetaModel","sEntityType","oEntityContainer","key","getActionPath","oAction","bReturnOnlyPath","sActionName","bCheckStaticValue","sContextPath","sEntityTypeName","sEntityName","sBindingParameter","getNavigationContext","ODataModelAnnotationHelper","getNavigationPath","bKeepProperty","bStartsWithEntityType","startsWith","part","shift","pop","getActionContext","getPathToBoundActionOverload","addSingleQuotes","sValue","bEscape","escapeSingleQuotes","generateFunction","sFuncName","sParams","i","sFunction","getHeaderDataPointLinkVisibility","bLink","bFieldVisibility","sVisibilityExp","objectToString","oParams","iNumberOfKeys","Object","keys","sKey","removeEscapeCharacters","sExpression","stringifyObject","sStringified","oObject","JSON","parse","Array","isArray","oUI5Object","ui5object","assign","stringify","sType","Log","error","Error","stringifyCustomData","vData","Context","parseCustomData","hasOwnProperty","getContextPath","oValue","getSortConditions","oPresentationVariant","sPresentationVariantPath","_isPresentationVariantAnnotation","SortOrder","aSortConditions","sorters","sEntityPath","forEach","oCondition","oSortProperty","oSorter","DynamicProperty","$AnnotationPath","Name","Property","$PropertyPath","name","descending","Descending","push","annotationPath","createPresentationPathContext","oPresentationContext","aPaths","createBindingContext","getPressHandlerForDataFieldForIBN","sContext","bNavigateWithConfirmationDialog","mNavigationParameters","navigationContexts","RequiresContext","Inline","applicableContexts","SemanticObject","Action","notApplicableContexts","label","Label","Mapping","semanticObjectMapping","getEntitySet","ModelHelper","getEntitySetPath","handleVisibilityOfMenuActions","sVisibleValue","combinedConditions","getCriticalityCalculationBinding","sImprovementDirection","sDeviationLow","sToleranceLow","sAcceptanceLow","sAcceptanceHigh","sToleranceHigh","sDeviationHigh","sCriticalityExpression","Neutral","Infinity","Good","Critical","warning","getMeasureAttributeIndex","iMeasure","oChartAnnotations","aMeasures","sMeasurePropertyPath","Measures","DynamicMeasures","bMeasureAttributeExists","aMeasureAttributes","MeasureAttributes","iMeasureAttribute","fnCheckMeasure","sMeasurePath","oMeasureAttribute","index","Measure","DynamicMeasure","some","bind","getMeasureAttribute","sChartAnnotationPath","requestObject","then","sMeasureAttributePath","DataPoint","getMeasureAttributeForMeasure","substring","isDraftParentEntityForContainment","oTargetCollectionContainsTarget","oTableMetadata","parentEntitySet","sParentEntitySetPath","oDraftRoot","oDraftNode","getDataFromTemplate","dataElement","splitPath","dataKey","connectedDataPath","connectedObject","template","Template","splitTemp","tempArray","trim","Data","notLastIndex","element","isLastIndex","templateInfo","getDelimiter","setMetaModel","getParameters","oParameterInfo","getParameterInfo","parameterProperties","buildActionWrapper","oThis","aParams","ref","handlerModule","handlerMethod","id","oAdditionalParams","contexts","compileExpression","fn","getHiddenPathExpression","dataFieldAnnotations","validatePresentationMetaPath","metaPath","objectTerm","allowedTerms","term","search","RegExp","requiresIContext"],"sourceRoot":"","sources":["CommonHelper.ts"],"sourcesContent":["import { UIAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { CustomAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport { compileExpression, fn, ref } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { isPropertyFilterable } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport mLibrary from \"sap/m/library\";\nimport { system } from \"sap/ui/Device\";\nimport EditMode from \"sap/ui/mdc/enum/EditMode\";\nimport Context from \"sap/ui/model/Context\";\nimport ODataModelAnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nconst ValueColor = mLibrary.ValueColor;\nconst CommonHelper = {\n\tgetPathToKey: function (oCtx: any) {\n\t\treturn oCtx.getObject();\n\t},\n\n\t/**\n\t * Determines if a field is visible.\n\t *\n\t * @param target Target instance\n\t * @param oInterface Interface instance\n\t * @returns Returns true, false, or expression with path\n\t */\n\tisVisible: function (target: object, oInterface: any) {\n\t\tconst oModel = oInterface.context.getModel(),\n\t\t\tsPropertyPath = oInterface.context.getPath(),\n\t\t\toAnnotations = oModel.getObject(`${sPropertyPath}@`),\n\t\t\thidden = oAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"];\n\n\t\treturn typeof hidden === \"object\" ? \"{= !${\" + hidden.$Path + \"} }\" : !hidden;\n\t},\n\t/**\n\t * Determine if field is editable.\n\t *\n\t * @param target Target instance\n\t * @param oInterface Interface instance\n\t * @returns A Binding Expression to determine if a field should be editable or not.\n\t */\n\tgetParameterEditMode: function (target: object, oInterface: any) {\n\t\tconst oModel = oInterface.context.getModel(),\n\t\t\tsPropertyPath = oInterface.context.getPath(),\n\t\t\toAnnotations = oModel.getObject(`${sPropertyPath}@`),\n\t\t\tfieldControl = oAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"],\n\t\t\timmutable = oAnnotations[\"@Org.OData.Core.V1.Immutable\"],\n\t\t\tcomputed = oAnnotations[\"@Org.OData.Core.V1.Computed\"];\n\n\t\tlet sEditMode: EditMode | string = EditMode.Editable;\n\n\t\tif (immutable || computed) {\n\t\t\tsEditMode = EditMode.ReadOnly;\n\t\t} else if (fieldControl) {\n\t\t\tif (fieldControl.$EnumMember) {\n\t\t\t\tif (fieldControl.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly\") {\n\t\t\t\t\tsEditMode = EditMode.ReadOnly;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tfieldControl.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Inapplicable\" ||\n\t\t\t\t\tfieldControl.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Hidden\"\n\t\t\t\t) {\n\t\t\t\t\tsEditMode = EditMode.Disabled;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fieldControl.$Path) {\n\t\t\t\tsEditMode =\n\t\t\t\t\t\"{= %{\" +\n\t\t\t\t\tfieldControl.$Path +\n\t\t\t\t\t\"} < 3 ? (%{\" +\n\t\t\t\t\tfieldControl.$Path +\n\t\t\t\t\t\"} === 0 ? '\" +\n\t\t\t\t\tEditMode.Disabled +\n\t\t\t\t\t\"' : '\" +\n\t\t\t\t\tEditMode.ReadOnly +\n\t\t\t\t\t\"') : '\" +\n\t\t\t\t\tEditMode.Editable +\n\t\t\t\t\t\"'}\";\n\t\t\t}\n\t\t}\n\n\t\treturn sEditMode;\n\t},\n\t/**\n\t * Get the complete metapath to the target.\n\t *\n\t * @param target\n\t * @param oInterface\n\t * @returns The metapath\n\t */\n\tgetMetaPath: function (target: any, oInterface: any) {\n\t\treturn (oInterface && oInterface.context && oInterface.context.getPath()) || undefined;\n\t},\n\tisDesktop: function () {\n\t\treturn system.desktop === true;\n\t},\n\tgetTargetCollectionPath: function (context: Context, navCollection?: any) {\n\t\tlet sPath = context.getPath();\n\t\tif (\n\t\t\tcontext.getMetadata().getName() === \"sap.ui.model.Context\" &&\n\t\t\t((context.getObject(\"$kind\") as unknown as string) === \"EntitySet\" ||\n\t\t\t\t(context.getObject(\"$ContainsTarget\") as unknown as boolean) === true)\n\t\t) {\n\t\t\treturn sPath;\n\t\t}\n\t\tif (context.getModel) {\n\t\t\tsPath =\n\t\t\t\t(context.getModel().getMetaPath && context.getModel().getMetaPath(sPath)) ||\n\t\t\t\tcontext.getModel().getMetaModel()!.getMetaPath(sPath);\n\t\t}\n\t\t//Supporting sPath of any format, either '/<entitySet>/<navigationCollection>' <OR> '/<entitySet>/$Type/<navigationCollection>'\n\t\tconst aParts = sPath.split(\"/\").filter(function (sPart: any) {\n\t\t\treturn sPart && sPart != \"$Type\";\n\t\t}); //filter out empty strings and parts referring to '$Type'\n\t\tconst entitySet = `/${aParts[0]}`;\n\t\tif (aParts.length === 1) {\n\t\t\treturn entitySet;\n\t\t}\n\t\tconst navigationCollection = navCollection === undefined ? aParts.slice(1).join(\"/$NavigationPropertyBinding/\") : navCollection;\n\t\treturn `${entitySet}/$NavigationPropertyBinding/${navigationCollection}`; // used in gotoTargetEntitySet method in the same file\n\t},\n\n\tisPropertyFilterable: function (context: Context, oDataField?: any) {\n\t\tconst oModel = context.getModel() as ODataMetaModel,\n\t\t\tsPropertyPath = context.getPath(),\n\t\t\t// LoacationPath would be the prefix of sPropertyPath, example: sPropertyPath = '/Customer/Set/Name' -> sPropertyLocationPath = '/Customer/Set'\n\t\t\tsPropertyLocationPath = CommonHelper.getLocationForPropertyPath(oModel, sPropertyPath),\n\t\t\tsProperty = sPropertyPath.replace(`${sPropertyLocationPath}/`, \"\");\n\n\t\tif (\n\t\t\toDataField &&\n\t\t\t(oDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAction\" ||\n\t\t\t\toDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\")\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn isPropertyFilterable(oModel, sPropertyLocationPath, sProperty);\n\t},\n\n\tgetLocationForPropertyPath: function (oModel: any, sPropertyPath: any) {\n\t\tlet iLength;\n\t\tlet sCollectionPath = sPropertyPath.slice(0, sPropertyPath.lastIndexOf(\"/\"));\n\t\tif (oModel.getObject(`${sCollectionPath}/$kind`) === \"EntityContainer\") {\n\t\t\tiLength = sCollectionPath.length + 1;\n\t\t\tsCollectionPath = sPropertyPath.slice(iLength, sPropertyPath.indexOf(\"/\", iLength));\n\t\t}\n\t\treturn sCollectionPath;\n\t},\n\tgotoActionParameter: function (oContext: any) {\n\t\tconst sPath = oContext.getPath(),\n\t\t\tsPropertyName = oContext.getObject(`${sPath}/$Name`);\n\n\t\treturn CommonUtils.getParameterPath(sPath, sPropertyName);\n\t},\n\t/**\n\t * Returns the entity set name from the entity type name.\n\t *\n\t * @param oMetaModel OData v4 metamodel instance\n\t * @param sEntityType EntityType of the actiom\n\t * @returns The EntitySet of the bound action\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetEntitySetName: function (oMetaModel: ODataMetaModel, sEntityType: string) {\n\t\tconst oEntityContainer = oMetaModel.getObject(\"/\");\n\t\tfor (const key in oEntityContainer) {\n\t\t\tif (typeof oEntityContainer[key] === \"object\" && oEntityContainer[key].$Type === sEntityType) {\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\t/**\n\t * Returns the metamodel path correctly for bound actions if used with bReturnOnlyPath as true,\n\t * else returns an object which has 3 properties related to the action. They are the entity set name,\n\t * the $Path value of the OperationAvailable annotation and the binding parameter name. If\n\t * bCheckStaticValue is true, returns the static value of OperationAvailable annotation, if present.\n\t * e.g. for bound action someNameSpace.SomeBoundAction\n\t * of entity set SomeEntitySet, the string \"/SomeEntitySet/someNameSpace.SomeBoundAction\" is returned.\n\t *\n\t * @param oAction The context object of the action\n\t * @param bReturnOnlyPath If false, additional info is returned along with metamodel path to the bound action\n\t * @param sActionName The name of the bound action of the form someNameSpace.SomeBoundAction\n\t * @param bCheckStaticValue If true, the static value of OperationAvailable is returned, if present\n\t * @returns The string or object as specified by bReturnOnlyPath\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetActionPath: function (oAction: any, bReturnOnlyPath: boolean, sActionName?: string, bCheckStaticValue?: boolean) {\n\t\tlet sContextPath = oAction.getPath().split(\"/@\")[0];\n\n\t\tsActionName = !sActionName ? oAction.getObject(oAction.getPath()) : sActionName;\n\n\t\tif (sActionName && sActionName.indexOf(\"(\") > -1) {\n\t\t\t// action bound to another entity type\n\t\t\tsActionName = sActionName.split(\"(\")[0];\n\t\t} else if (oAction.getObject(sContextPath)) {\n\t\t\t// TODO: this logic sounds wrong, to be corrected\n\t\t\tconst sEntityTypeName = oAction.getObject(sContextPath).$Type;\n\t\t\tconst sEntityName = this.getEntitySetName(oAction.getModel(), sEntityTypeName);\n\t\t\tif (sEntityName) {\n\t\t\t\tsContextPath = `/${sEntityName}`;\n\t\t\t}\n\t\t} else {\n\t\t\treturn sContextPath;\n\t\t}\n\n\t\tif (bCheckStaticValue) {\n\t\t\treturn oAction.getObject(`${sContextPath}/${sActionName}@Org.OData.Core.V1.OperationAvailable`);\n\t\t}\n\t\tif (bReturnOnlyPath) {\n\t\t\treturn `${sContextPath}/${sActionName}`;\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tsContextPath: sContextPath,\n\t\t\t\tsProperty: oAction.getObject(`${sContextPath}/${sActionName}@Org.OData.Core.V1.OperationAvailable/$Path`),\n\t\t\t\tsBindingParameter: oAction.getObject(`${sContextPath}/${sActionName}/@$ui5.overload/0/$Parameter/0/$Name`)\n\t\t\t};\n\t\t}\n\t},\n\n\tgetNavigationContext: function (oContext: any) {\n\t\treturn ODataModelAnnotationHelper.getNavigationPath(oContext.getPath());\n\t},\n\n\t/**\n\t * Returns the path without the entity type (potentially first) and property (last) part (optional).\n\t * The result can be an empty string if it is a simple direct property.\n\t *\n\t * If and only if the given property path starts with a slash (/), it is considered that the entity type\n\t * is part of the path and will be stripped away.\n\t *\n\t * @param sPropertyPath\n\t * @param bKeepProperty\n\t * @returns The navigation path\n\t */\n\tgetNavigationPath: function (sPropertyPath: any, bKeepProperty?: boolean) {\n\t\tconst bStartsWithEntityType = sPropertyPath.startsWith(\"/\");\n\t\tconst aParts = sPropertyPath.split(\"/\").filter(function (part: any) {\n\t\t\treturn !!part;\n\t\t});\n\t\tif (bStartsWithEntityType) {\n\t\t\taParts.shift();\n\t\t}\n\t\tif (!bKeepProperty) {\n\t\t\taParts.pop();\n\t\t}\n\t\treturn aParts.join(\"/\");\n\t},\n\n\t/**\n\t * Returns the correct metamodel path for bound actions.\n\t *\n\t * Since this method is called irrespective of the action type, this will be applied to unbound actions.\n\t * In such a case, if an incorrect path is returned, it is ignored during templating.\n\t *\n\t * Example: for the bound action someNameSpace.SomeBoundAction of entity set SomeEntitySet,\n\t * the string \"/SomeEntitySet/someNameSpace.SomeBoundAction\" is returned.\n\t *\n\t * @function\n\t * @static\n\t * @name sap.fe.macros.CommonHelper.getActionContext\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param oAction Context object for the action\n\t * @returns Correct metamodel path for bound and incorrect path for unbound actions\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetActionContext: function (oAction: object) {\n\t\treturn CommonHelper.getActionPath(oAction, true);\n\t},\n\t/**\n\t * Returns the metamodel path correctly for overloaded bound actions. For unbound actions,\n\t * the incorrect path is returned, but ignored during templating.\n\t * e.g. for bound action someNameSpace.SomeBoundAction of entity set SomeEntitySet,\n\t * the string \"/SomeEntitySet/someNameSpace.SomeBoundAction/@$ui5.overload/0\" is returned.\n\t *\n\t * @function\n\t * @static\n\t * @name sap.fe.macros.CommonHelper.getPathToBoundActionOverload\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param oAction The context object for the action\n\t * @returns The correct metamodel path for bound action overload and incorrect path for unbound actions\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetPathToBoundActionOverload: function (oAction: object) {\n\t\tconst sPath = CommonHelper.getActionPath(oAction, true);\n\t\treturn `${sPath}/@$ui5.overload/0`;\n\t},\n\n\t/**\n\t * Returns the string with single quotes.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param sValue Some string that needs to be converted into single quotes\n\t * @param [bEscape] Should the string be escaped beforehand\n\t * @returns - String with single quotes\n\t */\n\taddSingleQuotes: function (sValue: string, bEscape?: boolean) {\n\t\tif (bEscape && sValue) {\n\t\t\tsValue = this.escapeSingleQuotes(sValue);\n\t\t}\n\t\treturn `'${sValue}'`;\n\t},\n\n\t/**\n\t * Returns the string with escaped single quotes.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param sValue Some string that needs escaping of single quotes\n\t * @returns - String with escaped single quotes\n\t */\n\tescapeSingleQuotes: function (sValue: string) {\n\t\treturn sValue.replace(/[']/g, \"\\\\'\");\n\t},\n\n\t/**\n\t * Returns the function string\n\t * The first argument of generateFunction is name of the generated function string.\n\t * Remaining arguments of generateFunction are arguments of the newly generated function string.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param sFuncName Some string for the function name\n\t * @param args The remaining arguments\n\t * @returns - Function string depends on arguments passed\n\t */\n\tgenerateFunction: function (sFuncName: string, ...args: string[]) {\n\t\tlet sParams = \"\";\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\tsParams += args[i];\n\t\t\tif (i < args.length - 1) {\n\t\t\t\tsParams += \", \";\n\t\t\t}\n\t\t}\n\n\t\tlet sFunction = `${sFuncName}()`;\n\t\tif (sParams) {\n\t\t\tsFunction = `${sFuncName}(${sParams})`;\n\t\t}\n\t\treturn sFunction;\n\t},\n\t/*\n\t * Returns the visibility expression for datapoint title/link\n\t *\n\t * @function\n\t * @param {string} [sPath] annotation path of data point or Microchart\n\t * @param {boolean} [bLink] true if link visibility is being determined, false if title visibility is being determined\n\t * @param {boolean} [bFieldVisibility] true if field is vsiible, false otherwise\n\t * @returns  {string} sVisibilityExp Used to get the  visibility binding for DataPoints title in the Header.\n\t *\n\t */\n\n\tgetHeaderDataPointLinkVisibility: function (sPath: any, bLink: any, bFieldVisibility: any) {\n\t\tlet sVisibilityExp;\n\t\tif (bFieldVisibility) {\n\t\t\tsVisibilityExp = bLink\n\t\t\t\t? \"{= ${internal>isHeaderDPLinkVisible/\" + sPath + \"} === true && \" + bFieldVisibility + \"}\"\n\t\t\t\t: \"{= ${internal>isHeaderDPLinkVisible/\" + sPath + \"} !== true && \" + bFieldVisibility + \"}\";\n\t\t} else {\n\t\t\tsVisibilityExp = bLink\n\t\t\t\t? \"{= ${internal>isHeaderDPLinkVisible/\" + sPath + \"} === true}\"\n\t\t\t\t: \"{= ${internal>isHeaderDPLinkVisible/\" + sPath + \"} !== true}\";\n\t\t}\n\t\treturn sVisibilityExp;\n\t},\n\n\t/**\n\t * Converts object to string(different from JSON.stringify or.toString).\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param oParams Some object\n\t * @returns - Object string\n\t */\n\tobjectToString: function (oParams: any) {\n\t\tlet iNumberOfKeys = Object.keys(oParams).length,\n\t\t\tsParams = \"\";\n\n\t\tfor (const sKey in oParams) {\n\t\t\tlet sValue = oParams[sKey];\n\t\t\tif (sValue && typeof sValue === \"object\") {\n\t\t\t\tsValue = this.objectToString(sValue);\n\t\t\t}\n\t\t\tsParams += `${sKey}: ${sValue}`;\n\t\t\tif (iNumberOfKeys > 1) {\n\t\t\t\t--iNumberOfKeys;\n\t\t\t\tsParams += \", \";\n\t\t\t}\n\t\t}\n\n\t\treturn `{ ${sParams}}`;\n\t},\n\n\t/**\n\t * Removes escape characters (\\) from an expression.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param sExpression An expression with escape characters\n\t * @returns Expression string without escape characters or undefined\n\t */\n\tremoveEscapeCharacters: function (sExpression: string) {\n\t\treturn sExpression ? sExpression.replace(/\\\\?\\\\([{}])/g, \"$1\") : undefined;\n\t},\n\n\t/**\n\t * Makes updates to a stringified object so that it works properly in a template by adding ui5Object:true.\n\t *\n\t * @param sStringified\n\t * @returns The updated string representation of the object\n\t */\n\tstringifyObject: function (sStringified: string) {\n\t\tif (!sStringified || sStringified === \"{}\") {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst oObject = JSON.parse(sStringified);\n\t\t\tif (typeof oObject === \"object\" && !Array.isArray(oObject)) {\n\t\t\t\tconst oUI5Object = {\n\t\t\t\t\tui5object: true\n\t\t\t\t};\n\t\t\t\tObject.assign(oUI5Object, oObject);\n\t\t\t\treturn JSON.stringify(oUI5Object);\n\t\t\t} else {\n\t\t\t\tconst sType = Array.isArray(oObject) ? \"Array\" : typeof oObject;\n\t\t\t\tLog.error(`Unexpected object type in stringifyObject (${sType}) - only works with object`);\n\t\t\t\tthrow new Error(\"stringifyObject only works with objects!\");\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Create a string representation of the given data, taking care that it is not treated as a binding expression.\n\t *\n\t * @param vData The data to stringify\n\t * @returns The string representation of the data.\n\t */\n\tstringifyCustomData: function (vData: object | string | undefined) {\n\t\tconst oObject: any = {\n\t\t\tui5object: true\n\t\t};\n\t\toObject[\"customData\"] = vData instanceof Context ? vData.getObject() : vData;\n\t\treturn JSON.stringify(oObject);\n\t},\n\n\t/**\n\t * Parses the given data, potentially unwraps the data.\n\t *\n\t * @param vData The data to parse\n\t * @returns The result of the data parsing\n\t */\n\tparseCustomData: function (vData: any) {\n\t\tvData = typeof vData === \"string\" ? JSON.parse(vData) : vData;\n\t\tif (vData && vData.hasOwnProperty(\"customData\")) {\n\t\t\treturn vData[\"customData\"];\n\t\t}\n\t\treturn vData;\n\t},\n\tgetContextPath: function (oValue: any, oInterface: any) {\n\t\tconst sPath = oInterface && oInterface.context && oInterface.context.getPath();\n\t\treturn sPath[sPath.length - 1] === \"/\" ? sPath.slice(0, -1) : sPath;\n\t},\n\t/**\n\t * Returns a stringified JSON object containing  Presentation Variant sort conditions.\n\t *\n\t * @param oContext\n\t * @param oPresentationVariant Presentation variant Annotation\n\t * @param sPresentationVariantPath\n\t * @returns Stringified JSON object\n\t */\n\tgetSortConditions: function (oContext: any, oPresentationVariant: any, sPresentationVariantPath: string) {\n\t\tif (\n\t\t\toPresentationVariant &&\n\t\t\tCommonHelper._isPresentationVariantAnnotation(sPresentationVariantPath) &&\n\t\t\toPresentationVariant.SortOrder\n\t\t) {\n\t\t\tconst aSortConditions: any = {\n\t\t\t\tsorters: []\n\t\t\t};\n\n\t\t\tconst sEntityPath = oContext.getPath(0).split(\"@\")[0];\n\t\t\toPresentationVariant.SortOrder.forEach(function (oCondition: any = {}) {\n\t\t\t\tlet oSortProperty: any = {};\n\t\t\t\tconst oSorter: any = {};\n\t\t\t\tif (oCondition.DynamicProperty) {\n\t\t\t\t\toSortProperty = oContext.getModel(0).getObject(sEntityPath + oCondition.DynamicProperty.$AnnotationPath)?.Name;\n\t\t\t\t} else if (oCondition.Property) {\n\t\t\t\t\toSortProperty = oCondition.Property.$PropertyPath;\n\t\t\t\t}\n\t\t\t\tif (oSortProperty) {\n\t\t\t\t\toSorter.name = oSortProperty;\n\t\t\t\t\toSorter.descending = !!oCondition.Descending;\n\t\t\t\t\taSortConditions.sorters.push(oSorter);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"Please define the right path to the sort property\");\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn JSON.stringify(aSortConditions);\n\t\t}\n\t\treturn undefined;\n\t},\n\t_isPresentationVariantAnnotation: function (annotationPath: string) {\n\t\treturn (\n\t\t\tannotationPath.indexOf(`@${UIAnnotationTerms.PresentationVariant}`) > -1 ||\n\t\t\tannotationPath.indexOf(`@${UIAnnotationTerms.SelectionPresentationVariant}`) > -1\n\t\t);\n\t},\n\tcreatePresentationPathContext: function (oPresentationContext: any) {\n\t\tconst aPaths = oPresentationContext.sPath.split(\"@\") || [];\n\t\tconst oModel = oPresentationContext.getModel();\n\t\tif (aPaths.length && aPaths[aPaths.length - 1].indexOf(\"com.sap.vocabularies.UI.v1.SelectionPresentationVariant\") > -1) {\n\t\t\tconst sPath = oPresentationContext.sPath.split(\"/PresentationVariant\")[0];\n\t\t\treturn oModel.createBindingContext(`${sPath}@sapui.name`);\n\t\t}\n\t\treturn oModel.createBindingContext(`${oPresentationContext.sPath}@sapui.name`);\n\t},\n\tgetPressHandlerForDataFieldForIBN: function (oDataField: any, sContext?: string, bNavigateWithConfirmationDialog?: boolean) {\n\t\tif (!oDataField) return undefined;\n\t\tconst mNavigationParameters: any = {\n\t\t\tnavigationContexts: sContext ? sContext : \"${$source>/}.getBindingContext()\"\n\t\t};\n\t\tif (oDataField.RequiresContext && !oDataField.Inline && bNavigateWithConfirmationDialog) {\n\t\t\tmNavigationParameters.applicableContexts =\n\t\t\t\t\"${internal>ibn/\" + oDataField.SemanticObject + \"-\" + oDataField.Action + \"/aApplicable/}\";\n\t\t\tmNavigationParameters.notApplicableContexts =\n\t\t\t\t\"${internal>ibn/\" + oDataField.SemanticObject + \"-\" + oDataField.Action + \"/aNotApplicable/}\";\n\t\t\tmNavigationParameters.label = this.addSingleQuotes(oDataField.Label, true);\n\t\t}\n\t\tif (oDataField.Mapping) {\n\t\t\tmNavigationParameters.semanticObjectMapping = this.addSingleQuotes(JSON.stringify(oDataField.Mapping));\n\t\t}\n\t\treturn this.generateFunction(\n\t\t\tbNavigateWithConfirmationDialog ? \"._intentBasedNavigation.navigateWithConfirmationDialog\" : \"._intentBasedNavigation.navigate\",\n\t\t\tthis.addSingleQuotes(oDataField.SemanticObject),\n\t\t\tthis.addSingleQuotes(oDataField.Action),\n\t\t\tthis.objectToString(mNavigationParameters)\n\t\t);\n\t},\n\tgetEntitySet: function (oContext: any) {\n\t\tconst sPath = oContext.getPath();\n\t\treturn ModelHelper.getEntitySetPath(sPath);\n\t},\n\n\t/**\n\t * Handles the visibility of form menu actions both in path based and static value scenarios.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param sVisibleValue Either static boolean values or Array of path expressions for visibility of menu button.\n\t * @returns The binding expression determining the visibility of menu actions.\n\t */\n\thandleVisibilityOfMenuActions: function (sVisibleValue: any) {\n\t\tconst combinedConditions = [];\n\t\tif (Array.isArray(sVisibleValue)) {\n\t\t\tfor (let i = 0; i < sVisibleValue.length; i++) {\n\t\t\t\tif (sVisibleValue[i].indexOf(\"{\") > -1 && sVisibleValue[i].indexOf(\"{=\") === -1) {\n\t\t\t\t\tsVisibleValue[i] = \"{=\" + sVisibleValue[i] + \"}\";\n\t\t\t\t}\n\t\t\t\tif (sVisibleValue[i].split(\"{=\").length > 0) {\n\t\t\t\t\tsVisibleValue[i] = sVisibleValue[i].split(\"{=\")[1].slice(0, -1);\n\t\t\t\t}\n\t\t\t\tcombinedConditions.push(`(${sVisibleValue[i]})`);\n\t\t\t}\n\t\t}\n\t\treturn combinedConditions.length > 0 ? `{= ${combinedConditions.join(\" || \")}}` : sVisibleValue;\n\t},\n\t/**\n\t * Method to do the calculation of criticality in case CriticalityCalculation present in the annotation\n\t *\n\t * The calculation is done by comparing a value to the threshold values relevant for the specified improvement direction.\n\t * For improvement direction Target, the criticality is calculated using both low and high threshold values. It will be\n\t *\n\t * - Positive if the value is greater than or equal to AcceptanceRangeLowValue and lower than or equal to AcceptanceRangeHighValue\n\t * - Neutral if the value is greater than or equal to ToleranceRangeLowValue and lower than AcceptanceRangeLowValue OR greater than AcceptanceRangeHighValue and lower than or equal to ToleranceRangeHighValue\n\t * - Critical if the value is greater than or equal to DeviationRangeLowValue and lower than ToleranceRangeLowValue OR greater than ToleranceRangeHighValue and lower than or equal to DeviationRangeHighValue\n\t * - Negative if the value is lower than DeviationRangeLowValue or greater than DeviationRangeHighValue\n\t *\n\t * For improvement direction Minimize, the criticality is calculated using the high threshold values. It is\n\t * - Positive if the value is lower than or equal to AcceptanceRangeHighValue\n\t * - Neutral if the value is greater than AcceptanceRangeHighValue and lower than or equal to ToleranceRangeHighValue\n\t * - Critical if the value is greater than ToleranceRangeHighValue and lower than or equal to DeviationRangeHighValue\n\t * - Negative if the value is greater than DeviationRangeHighValue\n\t *\n\t * For improvement direction Maximize, the criticality is calculated using the low threshold values. It is\n\t *\n\t * - Positive if the value is greater than or equal to AcceptanceRangeLowValue\n\t * - Neutral if the value is less than AcceptanceRangeLowValue and greater than or equal to ToleranceRangeLowValue\n\t * - Critical if the value is lower than ToleranceRangeLowValue and greater than or equal to DeviationRangeLowValue\n\t * - Negative if the value is lower than DeviationRangeLowValue\n\t *\n\t * Thresholds are optional. For unassigned values, defaults are determined in this order:\n\t *\n\t * - For DeviationRange, an omitted LowValue translates into the smallest possible number (-INF), an omitted HighValue translates into the largest possible number (+INF)\n\t * - For ToleranceRange, an omitted LowValue will be initialized with DeviationRangeLowValue, an omitted HighValue will be initialized with DeviationRangeHighValue\n\t * - For AcceptanceRange, an omitted LowValue will be initialized with ToleranceRangeLowValue, an omitted HighValue will be initialized with ToleranceRangeHighValue.\n\t *\n\t * @param sImprovementDirection ImprovementDirection to be used for creating the criticality binding\n\t * @param sValue Value from Datapoint to be measured\n\t * @param sDeviationLow ExpressionBinding for Lower Deviation level\n\t * @param sToleranceLow ExpressionBinding for Lower Tolerance level\n\t * @param sAcceptanceLow ExpressionBinding for Lower Acceptance level\n\t * @param sAcceptanceHigh ExpressionBinding for Higher Acceptance level\n\t * @param sToleranceHigh ExpressionBinding for Higher Tolerance level\n\t * @param sDeviationHigh ExpressionBinding for Higher Deviation level\n\t * @returns Returns criticality calculation as expression binding\n\t */\n\tgetCriticalityCalculationBinding: function (\n\t\tsImprovementDirection: string,\n\t\tsValue: string,\n\t\tsDeviationLow: string | number,\n\t\tsToleranceLow: string | number,\n\t\tsAcceptanceLow: string | number,\n\t\tsAcceptanceHigh: string | number,\n\t\tsToleranceHigh: string | number,\n\t\tsDeviationHigh: string | number\n\t) {\n\t\tlet sCriticalityExpression: typeof ValueColor | string = ValueColor.Neutral; // Default Criticality State\n\n\t\tsValue = `%${sValue}`;\n\n\t\t// Setting Unassigned Values\n\t\tsDeviationLow = sDeviationLow || -Infinity;\n\t\tsToleranceLow = sToleranceLow || sDeviationLow;\n\t\tsAcceptanceLow = sAcceptanceLow || sToleranceLow;\n\t\tsDeviationHigh = sDeviationHigh || Infinity;\n\t\tsToleranceHigh = sToleranceHigh || sDeviationHigh;\n\t\tsAcceptanceHigh = sAcceptanceHigh || sToleranceHigh;\n\n\t\t// Dealing with Decimal and Path based bingdings\n\t\tsDeviationLow = sDeviationLow && (+sDeviationLow ? +sDeviationLow : `%${sDeviationLow}`);\n\t\tsToleranceLow = sToleranceLow && (+sToleranceLow ? +sToleranceLow : `%${sToleranceLow}`);\n\t\tsAcceptanceLow = sAcceptanceLow && (+sAcceptanceLow ? +sAcceptanceLow : `%${sAcceptanceLow}`);\n\t\tsAcceptanceHigh = sAcceptanceHigh && (+sAcceptanceHigh ? +sAcceptanceHigh : `%${sAcceptanceHigh}`);\n\t\tsToleranceHigh = sToleranceHigh && (+sToleranceHigh ? +sToleranceHigh : `%${sToleranceHigh}`);\n\t\tsDeviationHigh = sDeviationHigh && (+sDeviationHigh ? +sDeviationHigh : `%${sDeviationHigh}`);\n\n\t\t// Creating runtime expression binding from criticality calculation for Criticality State\n\t\tif (sImprovementDirection.indexOf(\"Minimize\") > -1) {\n\t\t\tsCriticalityExpression =\n\t\t\t\t\"{= \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsAcceptanceHigh +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Good +\n\t\t\t\t\"' : \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsToleranceHigh +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Neutral +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"(\" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\") ? '\" +\n\t\t\t\tValueColor.Critical +\n\t\t\t\t\"' : '\" +\n\t\t\t\tValueColor.Error +\n\t\t\t\t\"' }\";\n\t\t} else if (sImprovementDirection.indexOf(\"Maximize\") > -1) {\n\t\t\tsCriticalityExpression =\n\t\t\t\t\"{= \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsAcceptanceLow +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Good +\n\t\t\t\t\"' : \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsToleranceLow +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Neutral +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"(\" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\") ? '\" +\n\t\t\t\tValueColor.Critical +\n\t\t\t\t\"' : '\" +\n\t\t\t\tValueColor.Error +\n\t\t\t\t\"' }\";\n\t\t} else if (sImprovementDirection.indexOf(\"Target\") > -1) {\n\t\t\tsCriticalityExpression =\n\t\t\t\t\"{= (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsAcceptanceHigh +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsAcceptanceLow +\n\t\t\t\t\") ? '\" +\n\t\t\t\tValueColor.Good +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"((\" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsToleranceLow +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" < \" +\n\t\t\t\tsAcceptanceLow +\n\t\t\t\t\") || (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" > \" +\n\t\t\t\tsAcceptanceHigh +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsToleranceHigh +\n\t\t\t\t\")) ? '\" +\n\t\t\t\tValueColor.Neutral +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"((\" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\" && (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\") && (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" < \" +\n\t\t\t\tsToleranceLow +\n\t\t\t\t\")) || ((\" +\n\t\t\t\tsValue +\n\t\t\t\t\" > \" +\n\t\t\t\tsToleranceHigh +\n\t\t\t\t\") && \" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\" && (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\"))) ? '\" +\n\t\t\t\tValueColor.Critical +\n\t\t\t\t\"' : '\" +\n\t\t\t\tValueColor.Error +\n\t\t\t\t\"' }\";\n\t\t} else {\n\t\t\tLog.warning(\"Case not supported, returning the default Value Neutral\");\n\t\t}\n\n\t\treturn sCriticalityExpression;\n\t},\n\t/**\n\t * To fetch measure attribute index.\n\t *\n\t * @param iMeasure Chart Annotations\n\t * @param oChartAnnotations Chart Annotations\n\t * @returns MeasureAttribute index.\n\t * @private\n\t */\n\tgetMeasureAttributeIndex: function (iMeasure: any, oChartAnnotations: any) {\n\t\tlet aMeasures, sMeasurePropertyPath;\n\t\tif (oChartAnnotations?.Measures?.length > 0) {\n\t\t\taMeasures = oChartAnnotations.Measures;\n\t\t\tsMeasurePropertyPath = aMeasures[iMeasure].$PropertyPath;\n\t\t} else if (oChartAnnotations?.DynamicMeasures?.length > 0) {\n\t\t\taMeasures = oChartAnnotations.DynamicMeasures;\n\t\t\tsMeasurePropertyPath = aMeasures[iMeasure].$AnnotationPath;\n\t\t}\n\t\tlet bMeasureAttributeExists;\n\t\tconst aMeasureAttributes = oChartAnnotations.MeasureAttributes;\n\t\tlet iMeasureAttribute = -1;\n\t\tconst fnCheckMeasure = function (sMeasurePath: any, oMeasureAttribute: any, index: any) {\n\t\t\tif (oMeasureAttribute) {\n\t\t\t\tif (oMeasureAttribute.Measure && oMeasureAttribute.Measure.$PropertyPath === sMeasurePath) {\n\t\t\t\t\tiMeasureAttribute = index;\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (oMeasureAttribute.DynamicMeasure && oMeasureAttribute.DynamicMeasure.$AnnotationPath === sMeasurePath) {\n\t\t\t\t\tiMeasureAttribute = index;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif (aMeasureAttributes) {\n\t\t\tbMeasureAttributeExists = aMeasureAttributes.some(fnCheckMeasure.bind(null, sMeasurePropertyPath));\n\t\t}\n\t\treturn bMeasureAttributeExists && iMeasureAttribute > -1 && iMeasureAttribute;\n\t},\n\n\tgetMeasureAttribute: function (oContext: Context) {\n\t\tconst oMetaModel = oContext.getModel() as ODataMetaModel,\n\t\t\tsChartAnnotationPath = oContext.getPath();\n\t\treturn oMetaModel.requestObject(sChartAnnotationPath).then(function (oChartAnnotations: any) {\n\t\t\tconst aMeasureAttributes = oChartAnnotations.MeasureAttributes,\n\t\t\t\tiMeasureAttribute = CommonHelper.getMeasureAttributeIndex(0, oChartAnnotations);\n\t\t\tconst sMeasureAttributePath =\n\t\t\t\tiMeasureAttribute > -1 && aMeasureAttributes[iMeasureAttribute] && aMeasureAttributes[iMeasureAttribute].DataPoint\n\t\t\t\t\t? `${sChartAnnotationPath}/MeasureAttributes/${iMeasureAttribute}/`\n\t\t\t\t\t: undefined;\n\t\t\tif (sMeasureAttributePath === undefined) {\n\t\t\t\tLog.warning(\"DataPoint missing for the measure\");\n\t\t\t}\n\t\t\treturn sMeasureAttributePath ? `${sMeasureAttributePath}DataPoint/$AnnotationPath/` : sMeasureAttributePath;\n\t\t});\n\t},\n\t/**\n\t * This function returns the measureAttribute for the measure.\n\t *\n\t * @param oContext Context to the measure annotation\n\t * @returns Path to the measureAttribute of the measure\n\t */\n\tgetMeasureAttributeForMeasure: function (oContext: Context) {\n\t\tconst oMetaModel = oContext.getModel() as ODataMetaModel,\n\t\t\tsMeasurePath = oContext.getPath(),\n\t\t\tsChartAnnotationPath = sMeasurePath.substring(0, sMeasurePath.lastIndexOf(\"Measure\")),\n\t\t\tiMeasure = sMeasurePath.replace(/.*\\//, \"\");\n\n\t\tconst oChartAnnotations = oMetaModel.getObject(sChartAnnotationPath);\n\t\tconst aMeasureAttributes = oChartAnnotations.MeasureAttributes,\n\t\t\tiMeasureAttribute = CommonHelper.getMeasureAttributeIndex(iMeasure, oChartAnnotations);\n\t\tconst sMeasureAttributePath =\n\t\t\tiMeasureAttribute > -1 && aMeasureAttributes[iMeasureAttribute] && aMeasureAttributes[iMeasureAttribute].DataPoint\n\t\t\t\t? `${sChartAnnotationPath}MeasureAttributes/${iMeasureAttribute}/`\n\t\t\t\t: undefined;\n\t\tif (sMeasureAttributePath === undefined) {\n\t\t\tLog.warning(\"DataPoint missing for the measure\");\n\t\t}\n\t\treturn sMeasureAttributePath ? `${sMeasureAttributePath}DataPoint/$AnnotationPath/` : sMeasureAttributePath;\n\t},\n\t/**\n\t * Method to determine if the contained navigation property has a draft root/node parent entitySet.\n\t *\n\t * @function\n\t * @name isDraftParentEntityForContainment\n\t * @param oTargetCollectionContainsTarget Target collection has ContainsTarget property\n\t * @param oTableMetadata Table metadata for which draft support shall be checked\n\t * @returns Returns true if draft\n\t */\n\tisDraftParentEntityForContainment: function (oTargetCollectionContainsTarget: object, oTableMetadata: any) {\n\t\tif (oTargetCollectionContainsTarget) {\n\t\t\tif (oTableMetadata && oTableMetadata.parentEntitySet && oTableMetadata.parentEntitySet.sPath) {\n\t\t\t\tconst sParentEntitySetPath = oTableMetadata.parentEntitySet.sPath;\n\t\t\t\tconst oDraftRoot = oTableMetadata.parentEntitySet.oModel.getObject(\n\t\t\t\t\t`${sParentEntitySetPath}@com.sap.vocabularies.Common.v1.DraftRoot`\n\t\t\t\t);\n\t\t\t\tconst oDraftNode = oTableMetadata.parentEntitySet.oModel.getObject(\n\t\t\t\t\t`${sParentEntitySetPath}@com.sap.vocabularies.Common.v1.DraftNode`\n\t\t\t\t);\n\t\t\t\tif (oDraftRoot || oDraftNode) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t * Ensures the data is processed as defined in the template.\n\t * Since the property Data is of the type 'object', it may not be in the same order as required by the template.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param dataElement The data that is currently being processed.\n\t * @returns The correct path according to the template.\n\t */\n\tgetDataFromTemplate: function (dataElement: Context) {\n\t\tconst splitPath = dataElement.getPath().split(\"/\");\n\t\tconst dataKey = splitPath[splitPath.length - 1];\n\t\tconst connectedDataPath = `/${splitPath.slice(1, -2).join(\"/\")}/@`;\n\t\tconst connectedObject = dataElement.getObject(connectedDataPath);\n\t\tconst template = connectedObject.Template;\n\t\tconst splitTemp = template.split(\"}\");\n\t\tconst tempArray = [];\n\t\tfor (let i = 0; i < splitTemp.length - 1; i++) {\n\t\t\tconst key = splitTemp[i].split(\"{\")[1].trim();\n\t\t\ttempArray.push(key);\n\t\t}\n\t\tObject.keys(connectedObject.Data).forEach(function (sKey: string) {\n\t\t\tif (sKey.startsWith(\"$\")) {\n\t\t\t\tdelete connectedObject.Data[sKey];\n\t\t\t}\n\t\t});\n\t\tconst index = Object.keys(connectedObject.Data).indexOf(dataKey);\n\t\treturn `/${splitPath.slice(1, -2).join(\"/\")}/Data/${tempArray[index]}`;\n\t},\n\n\t/**\n\t * Checks if the end of the template has been reached.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param target The target of the connected fields.\n\t * @param element The element that is currently being processed.\n\t * @returns True or False (depending on the template index).\n\t */\n\tnotLastIndex: function (target: any, element: object) {\n\t\tconst template = target.Template;\n\t\tconst splitTemp = template.split(\"}\");\n\t\tconst tempArray: any[] = [];\n\t\tlet isLastIndex = false;\n\t\tfor (let i = 0; i < splitTemp.length - 1; i++) {\n\t\t\tconst dataKey = splitTemp[i].split(\"{\")[1].trim();\n\t\t\ttempArray.push(dataKey);\n\t\t}\n\n\t\ttempArray.forEach(function (templateInfo: any) {\n\t\t\tif (target.Data[templateInfo] === element && tempArray.indexOf(templateInfo) !== tempArray.length - 1) {\n\t\t\t\tisLastIndex = true;\n\t\t\t}\n\t\t});\n\t\treturn isLastIndex;\n\t},\n\n\t/**\n\t * Determines the delimiter from the template.\n\t *\n\t * @function\n\t * @memberof sap.fe.macros.CommonHelper\n\t * @param template The template string.\n\t * @returns The delimiter in the template string.\n\t */\n\tgetDelimiter: function (template: string) {\n\t\treturn template.split(\"}\")[1].split(\"{\")[0].trim();\n\t},\n\n\toMetaModel: undefined as any,\n\tsetMetaModel: function (oMetaModel: ODataMetaModel) {\n\t\tthis.oMetaModel = oMetaModel;\n\t},\n\n\tgetMetaModel: function (oContext?: any, oInterface?: any) {\n\t\tif (oContext) {\n\t\t\treturn oInterface.context.getModel();\n\t\t}\n\t\treturn this.oMetaModel;\n\t},\n\n\tgetParameters: function (oContext: any, oInterface: any) {\n\t\tif (oContext) {\n\t\t\tconst oMetaModel = oInterface.context.getModel();\n\t\t\tconst sPath = oInterface.context.getPath();\n\t\t\tconst oParameterInfo = CommonUtils.getParameterInfo(oMetaModel, sPath);\n\t\t\tif (oParameterInfo.parameterProperties) {\n\t\t\t\treturn Object.keys(oParameterInfo.parameterProperties);\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t},\n\n\t/**\n\t * Build an expression calling an action handler via the FPM helper's actionWrapper function\n\t *\n\t * This function assumes that the 'FPM.actionWrapper()' function is available at runtime.\n\t *\n\t * @param oAction Action metadata\n\t * @param oAction.handlerModule Module containing the action handler method\n\t * @param oAction.handlerMethod Action handler method name\n\t * @param [oThis] `this` (if the function is called from a macro)\n\t * @param oThis.id The table's ID\n\t * @returns The action wrapper binding\texpression\n\t */\n\tbuildActionWrapper: function (oAction: CustomAction, oThis: { id?: string } | undefined) {\n\t\tconst aParams: any[] = [ref(\"$event\"), oAction.handlerModule, oAction.handlerMethod];\n\n\t\tif (oThis && oThis.id) {\n\t\t\tconst oAdditionalParams = {\n\t\t\t\tcontexts: ref(\"${internal>selectedContexts}\")\n\t\t\t};\n\t\t\taParams.push(oAdditionalParams);\n\t\t}\n\t\treturn compileExpression(fn(\"FPM.actionWrapper\", aParams));\n\t},\n\t/**\n\t * Returns the value whether or not the element should be visible depending on the Hidden annotation.\n\t * It is inverted as the UI elements have a visible property instead of a hidden one.\n\t *\n\t * @param dataFieldAnnotations The dataField object\n\t * @returns A path or a Boolean\n\t */\n\tgetHiddenPathExpression: function (dataFieldAnnotations: any) {\n\t\tif (dataFieldAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] !== null) {\n\t\t\tconst hidden = dataFieldAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"];\n\t\t\treturn typeof hidden === \"object\" ? \"{= !${\" + hidden.$Path + \"} }\" : !hidden;\n\t\t}\n\t\treturn true;\n\t},\n\tvalidatePresentationMetaPath: function (metaPath: string, objectTerm: string) {\n\t\t// perform validation only if annotation set (to avoid backwards compatibility issues for test without annotations)\n\t\tif (metaPath.indexOf(objectTerm.slice(0, objectTerm.lastIndexOf(\".\"))) > -1) {\n\t\t\tconst allowedTerms = [UIAnnotationTerms.PresentationVariant, UIAnnotationTerms.SelectionPresentationVariant, objectTerm];\n\t\t\tif (\n\t\t\t\t!allowedTerms.some((term) => {\n\t\t\t\t\treturn metaPath.search(new RegExp(`${term}(#|/|$)`)) > -1;\n\t\t\t\t})\n\t\t\t) {\n\t\t\t\tthrow new Error(`Annotation Path ${metaPath} mentioned in the manifest is not valid for ${objectTerm}`);\n\t\t\t}\n\t\t}\n\t}\n};\n(CommonHelper.getSortConditions as any).requiresIContext = true;\n\nexport default CommonHelper;\n"],"mappings":"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"}},{"offset":{"line":806,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","BindingToolkit","MetaModelFunction","ModelHelper","mLibrary","Device","EditMode","Context","ODataModelAnnotationHelper","system","isPropertyFilterable","ref","fn","compileExpression","ValueColor","CommonHelper","getPathToKey","oCtx","getObject","isVisible","target","oInterface","oModel","context","getModel","sPropertyPath","getPath","oAnnotations","hidden","$Path","getParameterEditMode","fieldControl","immutable","computed","sEditMode","Editable","ReadOnly","$EnumMember","Disabled","getMetaPath","undefined","isDesktop","desktop","getTargetCollectionPath","navCollection","sPath","getMetadata","getName","getMetaModel","aParts","split","filter","sPart","entitySet","length","navigationCollection","slice","join","oDataField","sPropertyLocationPath","getLocationForPropertyPath","sProperty","replace","$Type","iLength","sCollectionPath","lastIndexOf","indexOf","gotoActionParameter","oContext","sPropertyName","getParameterPath","getEntitySetName","oMetaModel","sEntityType","oEntityContainer","key","getActionPath","oAction","bReturnOnlyPath","sActionName","bCheckStaticValue","sContextPath","sEntityTypeName","sEntityName","this","sBindingParameter","getNavigationContext","getNavigationPath","bKeepProperty","bStartsWithEntityType","startsWith","part","shift","pop","getActionContext","getPathToBoundActionOverload","addSingleQuotes","sValue","bEscape","escapeSingleQuotes","generateFunction","sFuncName","sParams","i","arguments","sFunction","getHeaderDataPointLinkVisibility","bLink","bFieldVisibility","sVisibilityExp","objectToString","oParams","iNumberOfKeys","Object","keys","sKey","removeEscapeCharacters","sExpression","stringifyObject","sStringified","oObject","JSON","parse","Array","isArray","oUI5Object","ui5object","assign","stringify","sType","error","Error","stringifyCustomData","vData","parseCustomData","hasOwnProperty","getContextPath","oValue","getSortConditions","oPresentationVariant","sPresentationVariantPath","_isPresentationVariantAnnotation","SortOrder","aSortConditions","sorters","sEntityPath","forEach","oCondition","oSortProperty","oSorter","DynamicProperty","_oContext$getModel$ge","$AnnotationPath","Name","Property","$PropertyPath","name","descending","Descending","push","annotationPath","createPresentationPathContext","oPresentationContext","aPaths","createBindingContext","getPressHandlerForDataFieldForIBN","sContext","bNavigateWithConfirmationDialog","mNavigationParameters","navigationContexts","RequiresContext","Inline","applicableContexts","SemanticObject","Action","notApplicableContexts","label","Label","Mapping","semanticObjectMapping","getEntitySet","getEntitySetPath","handleVisibilityOfMenuActions","sVisibleValue","combinedConditions","getCriticalityCalculationBinding","sImprovementDirection","sDeviationLow","sToleranceLow","sAcceptanceLow","sAcceptanceHigh","sToleranceHigh","sDeviationHigh","sCriticalityExpression","Neutral","Infinity","Good","Critical","warning","getMeasureAttributeIndex","iMeasure","oChartAnnotations","_oChartAnnotations$Me","_oChartAnnotations$Dy","aMeasures","sMeasurePropertyPath","Measures","DynamicMeasures","bMeasureAttributeExists","aMeasureAttributes","MeasureAttributes","iMeasureAttribute","fnCheckMeasure","sMeasurePath","oMeasureAttribute","index","Measure","DynamicMeasure","some","bind","getMeasureAttribute","sChartAnnotationPath","requestObject","then","sMeasureAttributePath","DataPoint","getMeasureAttributeForMeasure","substring","isDraftParentEntityForContainment","oTargetCollectionContainsTarget","oTableMetadata","parentEntitySet","sParentEntitySetPath","oDraftRoot","oDraftNode","getDataFromTemplate","dataElement","splitPath","dataKey","connectedDataPath","connectedObject","template","Template","splitTemp","tempArray","trim","Data","notLastIndex","element","isLastIndex","templateInfo","getDelimiter","setMetaModel","getParameters","oParameterInfo","getParameterInfo","parameterProperties","buildActionWrapper","oThis","aParams","handlerModule","handlerMethod","id","oAdditionalParams","contexts","getHiddenPathExpression","dataFieldAnnotations","validatePresentationMetaPath","metaPath","objectTerm","allowedTerms","term","search","RegExp","requiresIContext"],"sources":["CommonHelper-dbg.js"],"mappings":"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","sourceRoot":""}},{"offset":{"line":811,"column":0},"map":{"version":3,"names":["NS_MACRODATA","_retrieveModel","control","detachModelContextChange","sModelName","modelName","oModel","getModel","resolve","attachModelContextChange","getCustomDataWithModifier","oControl","sProperty","oModifier","aCustomData","aRetrievedCustomData","Promise","then","getAggregation","bind","oPromise","reduce","oPreviousPromise","oCustomData","getProperty","sKey","push","length","undefined","FETCHED_PROPERTIES_DATA_KEY","DelegateUtil","setCachedProperties","fetchedProperties","window","Element","key","setCustomData","getCachedProperties","getCustomData","getAttributeNS","data","Function","vValue","setAttributeNS","fetchPropertiesForEntity","sEntitySet","oMetaModel","requestObject","fetchAnnotationsForEntity","fetchModel","getDelegate","payload","oContext","call","templateControlFragment","sFragmentName","oPreprocessorSettings","oOptions","CommonUtils","doesValueHelpExist","mParameters","sPropertyName","sValueHelpType","sOriginalProperty","sBindingPath","oPropertyContext","createBindingContext","sValueHelpProperty","FieldHelper","valueHelpProperty","bIsAbsolute","indexOf","getObject","sGeneratedId","generateID","flexId","generate","getId","getRelativePropertyPath","context","getPath","aDependents","some","oDependent","isValueHelpRequired","bInFilterField","bReadOnly","all","aResults","catch","oError","Log","warning","isMultiValue","oProperty","bIsMultiValue","filterExpression","type"],"sourceRoot":"","sources":["DelegateUtil.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport {\n\tcolumnExportSettings,\n\tCustomBasedTableColumn,\n\tExtensionForAnalytics,\n\tPropertyTypeConfig,\n\tVisualSettings\n} from \"sap/fe/core/converters/controls/Common/Table\";\nimport { CustomElement } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { DisplayMode } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport { getRelativePropertyPath } from \"sap/fe/core/templating/PropertyFormatters\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { generateID } from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\nimport Model from \"sap/ui/model/Model\";\n\nconst NS_MACRODATA = \"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\";\n\nexport type tableDelegateModel = {\n\tenableAutoColumnWidth: boolean;\n\tisOptimizedForSmallDevice: boolean;\n\treadOnly: boolean;\n\tcolumnEditMode: string;\n\ttableType: string;\n\tonChange: Function;\n\tid: string;\n\tnavigationPropertyPath: string;\n\tcolumnInfo: CustomElement<CustomBasedTableColumn>;\n\tcollection: {\n\t\tsPath: string;\n\t\toModel: string;\n\t};\n};\n\nexport type PropertyInfo = {\n\tadditionalLabels?: string[];\n\tcaseSensitive?: boolean;\n\tdescription?: string;\n\tdescriptionProperty?: string;\n\texportSettings?: columnExportSettings | null;\n\tfilterable?: boolean;\n\tgroup?: string;\n\tgroupable?: boolean;\n\tgroupLabel?: string;\n\tkey?: boolean;\n\tlabel?: string;\n\tmaxConditions?: number;\n\tmetadataPath?: string;\n\tmode?: DisplayMode;\n\tname: string;\n\tpath?: string;\n\tpropertyInfos?: string[];\n\trelativePath?: string;\n\tsortable?: boolean;\n\tsortDirection?: string;\n\ttext?: string;\n\ttooltip?: string;\n\ttypeConfig?: PropertyTypeConfig;\n\ttype?: string;\n\tunit?: string;\n\tvalueProperty?: string;\n\tvisible: boolean;\n\tvisualSettings?: VisualSettings;\n\texportDataPointTargetValue?: string;\n\tisParameter?: boolean;\n\taggregatable?: boolean;\n\textension?: ExtensionForAnalytics;\n};\n\nfunction _retrieveModel(this: { modelName: string; control: any; resolve: Function }) {\n\tthis.control.detachModelContextChange(_retrieveModel, this);\n\tconst sModelName = this.modelName,\n\t\toModel = this.control.getModel(sModelName);\n\n\tif (oModel) {\n\t\tthis.resolve(oModel);\n\t} else {\n\t\tthis.control.attachModelContextChange(_retrieveModel, this);\n\t}\n}\nasync function getCustomDataWithModifier(oControl: any, sProperty: any, oModifier: any) {\n\tconst aCustomData: any[] = [];\n\n\tconst aRetrievedCustomData = await Promise.resolve().then(\n\t\toModifier.getAggregation.bind(oModifier, oControl, \"customData\") as () => any[]\n\t);\n\n\tconst oPromise = aRetrievedCustomData.reduce((oPreviousPromise: Promise<void>, oCustomData) => {\n\t\treturn oPreviousPromise.then(oModifier.getProperty.bind(oModifier, oCustomData, \"key\")).then(function (sKey: any) {\n\t\t\tif (sKey === sProperty) {\n\t\t\t\taCustomData.push(oCustomData);\n\t\t\t}\n\t\t});\n\t}, Promise.resolve());\n\tawait oPromise;\n\n\tif (aCustomData.length === 1) {\n\t\treturn oModifier.getProperty(aCustomData[0], \"value\");\n\t} else {\n\t\treturn undefined;\n\t}\n}\nconst FETCHED_PROPERTIES_DATA_KEY = \"sap_fe_ControlDelegate_propertyInfoMap\";\n\nconst DelegateUtil = {\n\tsetCachedProperties(control: any, fetchedProperties: PropertyInfo[]) {\n\t\t// do not cache during templating, else it becomes part of the cached view\n\t\tif (control instanceof window.Element) {\n\t\t\treturn;\n\t\t}\n\t\tconst key = FETCHED_PROPERTIES_DATA_KEY;\n\t\tDelegateUtil.setCustomData(control, key, fetchedProperties);\n\t},\n\tgetCachedProperties(control: any): PropertyInfo[] | null {\n\t\t// properties are not cached during templating\n\t\tif (control instanceof window.Element) {\n\t\t\treturn null;\n\t\t}\n\t\tconst key = FETCHED_PROPERTIES_DATA_KEY;\n\t\treturn DelegateUtil.getCustomData(control, key);\n\t},\n\n\tgetCustomData(oControl: any, sProperty: any, oModifier?: any) {\n\t\t// If Modifier is given, the method must execute asynchronously and return a Promise\n\t\tif (oModifier) {\n\t\t\treturn getCustomDataWithModifier(oControl, sProperty, oModifier);\n\t\t} else {\n\t\t\t// Delegate invoked from a non-flex change - FilterBarDelegate._addP13nItem for OP table filtering, FilterBarDelegate.fetchProperties etc.\n\t\t\tif (oControl && sProperty) {\n\t\t\t\tif (oControl instanceof window.Element) {\n\t\t\t\t\treturn oControl.getAttributeNS(NS_MACRODATA, sProperty);\n\t\t\t\t}\n\t\t\t\tif (oControl.data instanceof Function) {\n\t\t\t\t\treturn oControl.data(sProperty);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t},\n\tsetCustomData(oControl: any, sProperty: any, vValue: any) {\n\t\tif (oControl && sProperty) {\n\t\t\tif (oControl instanceof window.Element) {\n\t\t\t\treturn oControl.setAttributeNS(NS_MACRODATA, `customData:${sProperty}`, vValue);\n\t\t\t}\n\t\t\tif (oControl.data instanceof Function) {\n\t\t\t\treturn oControl.data(sProperty, vValue);\n\t\t\t}\n\t\t}\n\t},\n\tfetchPropertiesForEntity(sEntitySet: any, oMetaModel: any) {\n\t\treturn oMetaModel.requestObject(`${sEntitySet}/`);\n\t},\n\tfetchAnnotationsForEntity(sEntitySet: any, oMetaModel: any) {\n\t\treturn oMetaModel.requestObject(`${sEntitySet}@`);\n\t},\n\tfetchModel(oControl: any): Promise<Model> {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst sModelName = oControl.getDelegate().payload && oControl.getDelegate().payload.modelName,\n\t\t\t\toContext = { modelName: sModelName, control: oControl, resolve: resolve };\n\t\t\t_retrieveModel.call(oContext);\n\t\t});\n\t},\n\ttemplateControlFragment(sFragmentName: any, oPreprocessorSettings: any, oOptions: any, oModifier?: any) {\n\t\treturn CommonUtils.templateControlFragment(sFragmentName, oPreprocessorSettings, oOptions, oModifier);\n\t},\n\tdoesValueHelpExist(mParameters: any) {\n\t\tconst sPropertyName = mParameters.sPropertyName || \"\";\n\t\tconst sValueHelpType = mParameters.sValueHelpType || \"\";\n\t\tconst oMetaModel = mParameters.oMetaModel;\n\t\tconst oModifier = mParameters.oModifier;\n\t\tconst sOriginalProperty = `${mParameters.sBindingPath}/${sPropertyName}`;\n\t\tconst oPropertyContext = oMetaModel.createBindingContext(sOriginalProperty);\n\t\tlet sValueHelpProperty = FieldHelper.valueHelpProperty(oPropertyContext);\n\t\tconst bIsAbsolute = mParameters.sBindingPath && mParameters.sBindingPath.indexOf(\"/\") === 0;\n\n\t\t// unit/currency\n\t\tif (sValueHelpProperty.indexOf(\"$Path\") > -1) {\n\t\t\tsValueHelpProperty = oMetaModel.getObject(sValueHelpProperty);\n\t\t}\n\t\tif (bIsAbsolute && sValueHelpProperty.indexOf(\"/\") !== 0) {\n\t\t\tsValueHelpProperty = `${mParameters.sBindingPath}/${sValueHelpProperty}`;\n\t\t}\n\n\t\tconst sGeneratedId = generateID(\n\t\t\tmParameters.flexId,\n\t\t\tgenerate([oModifier ? oModifier.getId(mParameters.oControl) : mParameters.oControl.getId(), sValueHelpType]),\n\t\t\tgetRelativePropertyPath(oPropertyContext.getProperty(sOriginalProperty), {\n\t\t\t\tcontext: {\n\t\t\t\t\tgetModel: () => {\n\t\t\t\t\t\treturn mParameters.oMetaModel;\n\t\t\t\t\t},\n\t\t\t\t\tgetPath: () => {\n\t\t\t\t\t\treturn sOriginalProperty;\n\t\t\t\t\t}\n\t\t\t\t} as any\n\t\t\t}),\n\t\t\tgetRelativePropertyPath(oPropertyContext.getProperty(sValueHelpProperty), {\n\t\t\t\tcontext: {\n\t\t\t\t\tgetModel: () => {\n\t\t\t\t\t\treturn mParameters.oMetaModel;\n\t\t\t\t\t},\n\t\t\t\t\tgetPath: () => {\n\t\t\t\t\t\treturn sValueHelpProperty;\n\t\t\t\t\t}\n\t\t\t\t} as any\n\t\t\t})\n\t\t);\n\n\t\treturn Promise.resolve()\n\t\t\t.then(function () {\n\t\t\t\tif (oModifier) {\n\t\t\t\t\treturn oModifier.getAggregation(mParameters.oControl, \"dependents\");\n\t\t\t\t}\n\t\t\t\treturn mParameters.oControl.getAggregation(\"dependents\");\n\t\t\t})\n\t\t\t.then(function (aDependents: any) {\n\t\t\t\treturn Promise.resolve(\n\t\t\t\t\taDependents &&\n\t\t\t\t\t\taDependents.some(function (oDependent: any) {\n\t\t\t\t\t\t\treturn oModifier ? oModifier.getId(oDependent) === sGeneratedId : oDependent.getId() === sGeneratedId;\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t},\n\tisValueHelpRequired(mParameters: any, bInFilterField?: boolean) {\n\t\tconst sPropertyName = mParameters.sPropertyName || \"\",\n\t\t\toMetaModel = mParameters.oMetaModel,\n\t\t\tsProperty = `${mParameters.sBindingPath}/${sPropertyName}`,\n\t\t\toPropertyContext = oMetaModel.createBindingContext(sProperty),\n\t\t\tsValueHelpProperty = FieldHelper.valueHelpProperty(oPropertyContext, bInFilterField);\n\n\t\treturn this.getCustomData(mParameters.oControl, \"displayModePropertyBinding\", mParameters.oModifier)\n\t\t\t.then(function (bReadOnly: any) {\n\t\t\t\t// Check whether the control is read-only. If yes, no need of a value help.\n\t\t\t\tbReadOnly = typeof bReadOnly === \"boolean\" ? bReadOnly : bReadOnly === \"true\";\n\t\t\t\tif (bReadOnly) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// Else, check whether Value Help relevant annotation exists for the property.\n\t\t\t\t// TODO use PropertyFormatter.hasValueHelp () => if doing so, QUnit tests fail due to mocked model implementation\n\t\t\t\treturn Promise.all([\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueListWithFixedValues`),\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueListReferences`),\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueListMapping`),\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueList`)\n\t\t\t\t]);\n\t\t\t})\n\t\t\t.then(function (aResults: any[]) {\n\t\t\t\treturn !!aResults[0] || !!aResults[1] || !!aResults[2] || !!aResults[3];\n\t\t\t})\n\t\t\t.catch(function (oError: any) {\n\t\t\t\tLog.warning(\"Error while retrieving custom data / value list annotation values\", oError);\n\t\t\t});\n\t},\n\tisMultiValue(oProperty: any) {\n\t\tlet bIsMultiValue = true;\n\t\t//SingleValue | MultiValue | SingleRange | MultiRange | SearchExpression | MultiRangeOrSearchExpression\n\t\tswitch (oProperty.filterExpression) {\n\t\t\tcase \"SearchExpression\":\n\t\t\tcase \"SingleRange\":\n\t\t\tcase \"SingleValue\":\n\t\t\t\tbIsMultiValue = false;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tif (oProperty.type && oProperty.type.indexOf(\"Boolean\") > 0) {\n\t\t\tbIsMultiValue = false;\n\t\t}\n\t\treturn bIsMultiValue;\n\t}\n};\nexport default DelegateUtil;\n"],"mappings":"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"}},{"offset":{"line":1002,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","StableIdHelper","PropertyFormatters","FieldHelper","ValueHelpTemplating","generateID","getRelativePropertyPath","generate","NS_MACRODATA","_retrieveModel","this","control","detachModelContextChange","sModelName","modelName","oModel","getModel","resolve","attachModelContextChange","async","getCustomDataWithModifier","oControl","sProperty","oModifier","aCustomData","aRetrievedCustomData","Promise","then","getAggregation","bind","oPromise","reduce","oPreviousPromise","oCustomData","getProperty","sKey","push","length","undefined","FETCHED_PROPERTIES_DATA_KEY","DelegateUtil","setCachedProperties","fetchedProperties","window","Element","key","setCustomData","getCachedProperties","getCustomData","getAttributeNS","data","Function","vValue","setAttributeNS","fetchPropertiesForEntity","sEntitySet","oMetaModel","requestObject","fetchAnnotationsForEntity","fetchModel","getDelegate","payload","oContext","call","templateControlFragment","sFragmentName","oPreprocessorSettings","oOptions","doesValueHelpExist","mParameters","sPropertyName","sValueHelpType","sOriginalProperty","sBindingPath","oPropertyContext","createBindingContext","sValueHelpProperty","valueHelpProperty","bIsAbsolute","indexOf","getObject","sGeneratedId","flexId","getId","context","getPath","aDependents","some","oDependent","isValueHelpRequired","bInFilterField","bReadOnly","all","aResults","catch","oError","warning","isMultiValue","oProperty","bIsMultiValue","filterExpression","type"],"sources":["DelegateUtil-dbg.js"],"mappings":"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","sourceRoot":""}},{"offset":{"line":1007,"column":0},"map":{"version":3,"names":["MacroAPIFQN","MacroAPI","defineUI5Class","implementInterface","property","type","aggregation","multiple","isDefault","mSettings","others","parentContextToBind","registerInstance","init","getModel","oPageModel","Component","getOwnerComponentFor","setModel","_instance","instanceMap","get","constructor","set","push","render","oRm","oControl","renderControl","content","rerender","getDomRef","oContent","getController","getObject","getAPI","oEvent","oSource","getSource","isDependentBound","isA","getParent","oDependents","getDependents","hasCorrectDependent","find","oDependent","oSourceMap","length","setParentBindingContext","modelName","path","setParent","args","Object","keys","forEach","bindObject","model","events","change","oBoundContext","getBoundContext","setProperty","Control","namespace","macroName","fragment","hasValidation","WeakMap","getConverterContext","oDataModelPath","contextPath","oAppComponent","appComponent","viewData","models","getData","ConverterContext","createConverterContextForMacro","startingEntitySet","name","metaModel","getDiagnostics","merge","contextLocation","createBindingContext","oData","sContextPath","uid","converterContext"],"sourceRoot":"","sources":["MacroAPI.ts"],"sourcesContent":["import merge from \"sap/base/util/merge\";\nimport uid from \"sap/base/util/uid\";\nimport ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { aggregation, defineUI5Class, implementInterface, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Component from \"sap/ui/core/Component\";\nimport Control from \"sap/ui/core/Control\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport type { IFormContent } from \"sap/ui/core/library\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type ClientContextBinding from \"sap/ui/model/ClientContextBinding\";\n\nconst MacroAPIFQN = \"sap.fe.macros.MacroAPI\";\n\n/**\n * Base API control for building blocks.\n *\n * @hideconstructor\n * @name sap.fe.macros.MacroAPI\n * @public\n */\n@defineUI5Class(MacroAPIFQN)\nclass MacroAPI extends Control implements IFormContent {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t__implements__sap_ui_core_IFormContent: boolean = true;\n\n\tstatic namespace: string = \"sap.fe.macros\";\n\n\tstatic macroName: string = \"Macro\";\n\n\tstatic fragment: string = \"sap.fe.macros.Macro\";\n\n\tstatic hasValidation: boolean = true;\n\n\tstatic instanceMap: WeakMap<object, object[]> = new WeakMap<object, object[]>();\n\n\tprotected static isDependentBound = false;\n\n\tconstructor(mSettings?: PropertiesOf<MacroAPI>, ...others: any[]) {\n\t\tsuper(mSettings as any, ...others);\n\t\tMacroAPI.registerInstance(this);\n\t}\n\n\tinit() {\n\t\tsuper.init();\n\t\tif (!this.getModel(\"_pageModel\")) {\n\t\t\tconst oPageModel = Component.getOwnerComponentFor(this)?.getModel(\"_pageModel\");\n\t\t\tif (oPageModel) {\n\t\t\t\tthis.setModel(oPageModel, \"_pageModel\");\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic registerInstance(_instance: any) {\n\t\tif (!this.instanceMap.get(_instance.constructor)) {\n\t\t\tthis.instanceMap.set(_instance.constructor, []);\n\t\t}\n\t\t(this.instanceMap.get(_instance.constructor) as object[]).push(_instance);\n\t}\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tcontextPath!: string;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tmetaPath!: string;\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: false, isDefault: true })\n\tcontent!: Control;\n\n\tstatic render(oRm: RenderManager, oControl: MacroAPI) {\n\t\toRm.renderControl(oControl.content);\n\t}\n\n\trerender() {\n\t\tthis.content.rerender();\n\t}\n\n\tgetDomRef() {\n\t\tconst oContent = this.content;\n\t\treturn oContent ? oContent.getDomRef() : super.getDomRef();\n\t}\n\n\tgetController(): any {\n\t\treturn (this.getModel(\"$view\") as any).getObject().getController();\n\t}\n\n\tstatic getAPI(oEvent: UI5Event): MacroAPI | false {\n\t\tlet oSource = oEvent.getSource() as ManagedObject | null;\n\t\tif (this.isDependentBound) {\n\t\t\twhile (oSource && !oSource.isA<MacroAPI>(MacroAPIFQN) && oSource.getParent) {\n\t\t\t\tconst oDependents = (oSource as Control).getDependents();\n\t\t\t\tconst hasCorrectDependent = oDependents.find((oDependent: UI5Element) => oDependent.isA(MacroAPIFQN));\n\t\t\t\tif (hasCorrectDependent) {\n\t\t\t\t\toSource = hasCorrectDependent as MacroAPI;\n\t\t\t\t} else {\n\t\t\t\t\toSource = oSource.getParent() as MacroAPI;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\twhile (oSource && !oSource.isA<MacroAPI>(MacroAPIFQN) && oSource.getParent) {\n\t\t\t\toSource = oSource.getParent();\n\t\t\t}\n\t\t}\n\n\t\tif (!oSource || !oSource.isA<MacroAPI>(MacroAPIFQN)) {\n\t\t\tconst oSourceMap = this.instanceMap.get(this) as MacroAPI[];\n\t\t\toSource = oSourceMap?.[oSourceMap.length - 1];\n\t\t}\n\t\treturn oSource && oSource.isA<MacroAPI>(MacroAPIFQN) && oSource;\n\t}\n\n\t/**\n\t * Retrieve a Converter Context.\n\t *\n\t * @param oDataModelPath\n\t * @param contextPath\n\t * @param mSettings\n\t * @returns A Converter Context\n\t */\n\tstatic getConverterContext = function (oDataModelPath: DataModelObjectPath, contextPath: string, mSettings: any) {\n\t\tconst oAppComponent = mSettings.appComponent;\n\t\tconst viewData = mSettings.models.viewData && mSettings.models.viewData.getData();\n\t\treturn ConverterContext.createConverterContextForMacro(\n\t\t\toDataModelPath.startingEntitySet.name,\n\t\t\tmSettings.models.metaModel,\n\t\t\toAppComponent && oAppComponent.getDiagnostics(),\n\t\t\tmerge,\n\t\t\toDataModelPath.contextLocation,\n\t\t\tviewData\n\t\t);\n\t};\n\n\t/**\n\t * Create a Binding Context.\n\t *\n\t * @param oData\n\t * @param mSettings\n\t * @returns The binding context\n\t */\n\tstatic createBindingContext = function (oData: object, mSettings: any) {\n\t\tconst sContextPath = `/uid--${uid()}`;\n\t\tmSettings.models.converterContext.setProperty(sContextPath, oData);\n\t\treturn mSettings.models.converterContext.createBindingContext(sContextPath);\n\t};\n\n\tparentContextToBind: Record<string, string> = {};\n\n\t/**\n\t * Keep track of a binding context that should be assigned to the parent of that control.\n\t *\n\t * @param modelName The model name that the context will relate to\n\t * @param path The path of the binding context\n\t */\n\tsetParentBindingContext(modelName: string, path: string) {\n\t\tthis.parentContextToBind[modelName] = path;\n\t}\n\n\tsetParent(...args: any[]) {\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tsuper.setParent(...args);\n\t\tObject.keys(this.parentContextToBind).forEach((modelName) => {\n\t\t\tthis.getParent()!.bindObject({\n\t\t\t\tpath: this.parentContextToBind[modelName],\n\t\t\t\tmodel: modelName,\n\t\t\t\tevents: {\n\t\t\t\t\tchange: function (this: ClientContextBinding) {\n\t\t\t\t\t\tconst oBoundContext = this.getBoundContext() as InternalModelContext;\n\t\t\t\t\t\tif (oBoundContext && !oBoundContext.getObject()) {\n\t\t\t\t\t\t\toBoundContext.setProperty(\"\", {});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport default MacroAPI;\n"],"mappings":"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"}},{"offset":{"line":1192,"column":0},"map":{"version":3,"names":["sap","ui","define","merge","uid","ConverterContext","ClassSupport","Component","Control","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_class3","property","implementInterface","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","MacroAPIFQN","MacroAPI","type","multiple","isDefault","_Control","mSettings","_this","_len","arguments","length","others","Array","_key","this","parentContextToBind","registerInstance","_proto","init","getModel","_Component$getOwnerCo","oPageModel","getOwnerComponentFor","setModel","_instance","instanceMap","get","set","push","render","oRm","oControl","renderControl","content","rerender","getDomRef","oContent","getController","getObject","getAPI","oEvent","oSource","getSource","isDependentBound","isA","getParent","oDependents","getDependents","hasCorrectDependent","find","oDependent","oSourceMap","setParentBindingContext","modelName","path","setParent","_len2","args","_key2","bindObject","model","events","change","oBoundContext","getBoundContext","setProperty","namespace","macroName","fragment","hasValidation","WeakMap","getConverterContext","oDataModelPath","contextPath","oAppComponent","appComponent","viewData","models","getData","createConverterContextForMacro","startingEntitySet","name","metaModel","getDiagnostics","contextLocation","createBindingContext","oData","sContextPath","converterContext"],"sources":["MacroAPI-dbg.js"],"mappings":"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","sourceRoot":""}},{"offset":{"line":1197,"column":0},"map":{"version":3,"names":["getPath","oContext","oInterface","context","requiresIContext"],"sourceRoot":"","sources":["MacroTemplating.ts"],"sourcesContent":["import type { ComputedAnnotationInterface, MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\n\nexport const getPath = function (oContext: MetaModelContext, oInterface: ComputedAnnotationInterface): string {\n\tif (oInterface && oInterface.context) {\n\t\treturn oInterface.context.getPath();\n\t}\n\treturn \"\";\n};\ngetPath.requiresIContext = true;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EAEO,MAAMA,OAAO,GAAG,UAAUC,QAA0B,EAAEC,UAAuC,EAAU;IAC7G,IAAIA,UAAU,IAAIA,UAAU,CAACC,OAAO,EAAE;MACrC,OAAOD,UAAU,CAACC,OAAO,CAACH,OAAO,EAAE;IACpC;IACA,OAAO,EAAE;EACV,CAAC;EACDA,OAAO,CAACI,gBAAgB,GAAG,IAAI;EAAC;EAAA;AAAA"}},{"offset":{"line":1215,"column":0},"map":{"version":3,"names":["sap","ui","define","_exports","getPath","oContext","oInterface","context","requiresIContext"],"sources":["MacroTemplating-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,2CAAO,GAAI,WAChB,aAEA,IAAIC,EAAW,CAAC,EAChB,MAAMC,EAAU,SAAUC,EAAUC,GAClC,GAAIA,GAAcA,EAAWC,QAAS,CACpC,OAAOD,EAAWC,QAAQH,SAC5B,CACA,MAAO,EACT,EACAA,EAAQI,iBAAmB,KAC3BL,EAASC,QAAUA,EACnB,OAAOD,CACT,EAAG","sourceRoot":""}},{"offset":{"line":1220,"column":0},"map":{"version":3,"names":["CustomActionBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","getContent","pressEvent","action","command","press","event","FPMHelper","actionWrapper","handlerModule","handlerMethod","catch","error","Log","id","text","visible","enabled","RuntimeBuildingBlock"],"sourceRoot":"actions","sources":["CustomAction.block.tsx"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport RuntimeBuildingBlock from \"sap/fe/core/buildingBlocks/RuntimeBuildingBlock\";\nimport type { CustomAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport FPMHelper from \"sap/fe/core/helpers/FPMHelper\";\nimport type { CommandProperties } from \"sap/fe/core/jsx-runtime/jsx\";\nimport Button from \"sap/m/Button\";\nimport type Event from \"sap/ui/base/Event\";\n\n@defineBuildingBlock({ name: \"CustomAction\", namespace: \"sap.fe.macros.actions\" })\nexport default class CustomActionBlock extends RuntimeBuildingBlock {\n\t@blockAttribute({ type: \"object\", required: true })\n\taction!: CustomAction;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tid!: string;\n\n\tgetContent() {\n\t\tlet pressEvent: { press: (event: Event) => void } | { \"jsx:command\": CommandProperties };\n\t\tif (this.action.command) {\n\t\t\tpressEvent = { \"jsx:command\": `${this.action.command}|press` as CommandProperties };\n\t\t} else {\n\t\t\tpressEvent = {\n\t\t\t\tpress: (event: Event) => {\n\t\t\t\t\tFPMHelper.actionWrapper(event, this.action.handlerModule, this.action.handlerMethod, {}).catch((error: unknown) =>\n\t\t\t\t\t\tLog.error(error as string)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tid={this.id}\n\t\t\t\ttext={this.action.text ?? \"\"}\n\t\t\t\t{...pressEvent}\n\t\t\t\ttype=\"Transparent\"\n\t\t\t\tvisible={this.action.visible}\n\t\t\t\tenabled={this.action.enabled}\n\t\t\t/>\n\t\t) as Button;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;MAUqBA,iBAAiB,WADrCC,mBAAmB,CAAC;IAAEC,IAAI,EAAE,cAAc;IAAEC,SAAS,EAAE;EAAwB,CAAC,CAAC,UAEhFC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAGlDF,cAAc,CAAC;IACfC,IAAI,EAAE,QAAQ;IACdC,QAAQ,EAAE;EACX,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAAA,OAGFC,UAAU,GAAV,sBAAa;MACZ,IAAIC,UAAoF;MACxF,IAAI,IAAI,CAACC,MAAM,CAACC,OAAO,EAAE;QACxBF,UAAU,GAAG;UAAE,aAAa,EAAG,GAAE,IAAI,CAACC,MAAM,CAACC,OAAQ;QAA6B,CAAC;MACpF,CAAC,MAAM;QACNF,UAAU,GAAG;UACZG,KAAK,EAAGC,KAAY,IAAK;YACxBC,SAAS,CAACC,aAAa,CAACF,KAAK,EAAE,IAAI,CAACH,MAAM,CAACM,aAAa,EAAE,IAAI,CAACN,MAAM,CAACO,aAAa,EAAE,CAAC,CAAC,CAAC,CAACC,KAAK,CAAEC,KAAc,IAC7GC,GAAG,CAACD,KAAK,CAACA,KAAK,CAAW,CAC1B;UACF;QACD,CAAC;MACF;MACA,OACC,KAAC,MAAM;QACN,EAAE,EAAE,IAAI,CAACE,EAAG;QACZ,IAAI,EAAE,IAAI,CAACX,MAAM,CAACY,IAAI,IAAI,EAAG;QAAA,GACzBb,UAAU;QACd,IAAI,EAAC,aAAa;QAClB,OAAO,EAAE,IAAI,CAACC,MAAM,CAACa,OAAQ;QAC7B,OAAO,EAAE,IAAI,CAACb,MAAM,CAACc;MAAQ,EAC5B;IAEJ,CAAC;IAAA;EAAA,EAjC6CC,oBAAoB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":1297,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlockSupport","RuntimeBuildingBlock","FPMHelper","Button","_jsx","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","_exports","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","CustomActionBlock","name","namespace","type","required","_RuntimeBuildingBlock","_this","_len","arguments","length","args","Array","_key","this","_proto","getContent","pressEvent","action","command","press","event","actionWrapper","handlerModule","handlerMethod","catch","error","id","text","visible","enabled"],"sources":["CustomAction.block-dbg.js"],"mappings":"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","sourceRoot":"actions"}},{"offset":{"line":1302,"column":0},"map":{"version":3,"names":["DataFieldForActionBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","getContent","view","controller","getController","dataViewModelPath","getInvolvedDataModelObjects","contextPath","odataMetaModel","getModel","annotationPath","action","pressEvent","annotationPathContext","getContext","dataFieldContextModelPath","dataFieldForAction","targetObject","actionParameters","entitySetName","targetEntitySet","invocationGrouping","InvocationGrouping","library","ChangeSet","Isolated","label","Label","isNavigable","defaultValuesExtensionFunction","command","press","handlers","onCallAction","Action","contexts","getBindingContext","model","id","isActionWithDialog","visible","enabled","CriticalityFormatters","buildExpressionForCriticalityButtonType","RuntimeBuildingBlock"],"sourceRoot":"actions","sources":["DataFieldForAction.block.tsx"],"sourcesContent":["import type { DataFieldForAction } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport RuntimeBuildingBlock from \"sap/fe/core/buildingBlocks/RuntimeBuildingBlock\";\nimport { isActionWithDialog } from \"sap/fe/core/converters/annotations/DataField\";\nimport type { AnnotationAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { CommandProperties } from \"sap/fe/core/jsx-runtime/jsx\";\nimport type { CoreLib } from \"sap/fe/core/library\";\nimport library from \"sap/fe/core/library\";\nimport * as CriticalityFormatters from \"sap/fe/core/templating/CriticalityFormatters\";\nimport Button from \"sap/m/Button\";\nimport type Event from \"sap/ui/base/Event\";\nimport type Controller from \"sap/ui/core/mvc/Controller\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type Context from \"sap/ui/model/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\ntype ControllerWithAction = Controller & {\n\thandlers: {\n\t\tonCallAction: Function;\n\t};\n};\n@defineBuildingBlock({ name: \"DataFieldForAction\", namespace: \"sap.fe.macros.actions\" })\nexport default class DataFieldForActionBlock extends RuntimeBuildingBlock {\n\t@blockAttribute({ type: \"object\", required: true })\n\taction!: AnnotationAction;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tcontextPath!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tid!: string;\n\n\tgetContent(view: View) {\n\t\tconst controller = view.getController();\n\t\tconst dataViewModelPath = getInvolvedDataModelObjects(this.contextPath);\n\t\tconst odataMetaModel = this.contextPath.getModel() as ODataMetaModel;\n\t\tconst annotationPath = this.action.annotationPath;\n\t\tlet pressEvent: { press: (event: Event) => void } | { \"jsx:command\": CommandProperties };\n\t\tif (annotationPath) {\n\t\t\tconst annotationPathContext = odataMetaModel.getContext(annotationPath);\n\t\t\tconst dataFieldContextModelPath = getInvolvedDataModelObjects(annotationPathContext);\n\t\t\tconst dataFieldForAction = dataFieldContextModelPath.targetObject as DataFieldForAction | undefined;\n\t\t\tif (dataFieldForAction) {\n\t\t\t\tconst actionParameters = {\n\t\t\t\t\tentitySetName: dataViewModelPath.targetEntitySet?.name,\n\t\t\t\t\tinvocationGrouping:\n\t\t\t\t\t\tdataFieldForAction.InvocationGrouping === \"UI.OperationGroupingType/ChangeSet\"\n\t\t\t\t\t\t\t? (library as CoreLib).InvocationGrouping.ChangeSet\n\t\t\t\t\t\t\t: (library as CoreLib).InvocationGrouping.Isolated,\n\t\t\t\t\tlabel: dataFieldForAction.Label as string,\n\t\t\t\t\tisNavigable: this.action.isNavigable,\n\t\t\t\t\tdefaultValuesExtensionFunction: this.action.defaultValuesExtensionFunction\n\t\t\t\t};\n\t\t\t\tif (!this.action.command) {\n\t\t\t\t\tpressEvent = {\n\t\t\t\t\t\tpress: () => {\n\t\t\t\t\t\t\t(controller as ControllerWithAction).handlers.onCallAction(view, dataFieldForAction.Action as string, {\n\t\t\t\t\t\t\t\t...actionParameters,\n\t\t\t\t\t\t\t\t...{\n\t\t\t\t\t\t\t\t\tcontexts: view.getBindingContext(),\n\t\t\t\t\t\t\t\t\tmodel: view.getModel()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tpressEvent = { \"jsx:command\": `${this.action.command}|press` as CommandProperties };\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tid={this.id}\n\t\t\t\t\t\ttext={actionParameters.label}\n\t\t\t\t\t\t{...pressEvent}\n\t\t\t\t\t\tariaHasPopup={isActionWithDialog(dataFieldContextModelPath.targetObject as DataFieldForAction)}\n\t\t\t\t\t\tvisible={this.action.visible}\n\t\t\t\t\t\tenabled={this.action.enabled}\n\t\t\t\t\t\ttype={CriticalityFormatters.buildExpressionForCriticalityButtonType(dataFieldContextModelPath)}\n\t\t\t\t\t/>\n\t\t\t\t) as Button;\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;MAuBqBA,uBAAuB,WAD3CC,mBAAmB,CAAC;IAAEC,IAAI,EAAE,oBAAoB;IAAEC,SAAS,EAAE;EAAwB,CAAC,CAAC,UAEtFC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAGlDF,cAAc,CAAC;IAAEC,IAAI,EAAE,sBAAsB;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAGhEF,cAAc,CAAC;IACfC,IAAI,EAAE,QAAQ;IACdC,QAAQ,EAAE;EACX,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAAA,OAGFC,UAAU,GAAV,oBAAWC,IAAU,EAAE;MACtB,MAAMC,UAAU,GAAGD,IAAI,CAACE,aAAa,EAAE;MACvC,MAAMC,iBAAiB,GAAGC,2BAA2B,CAAC,IAAI,CAACC,WAAW,CAAC;MACvE,MAAMC,cAAc,GAAG,IAAI,CAACD,WAAW,CAACE,QAAQ,EAAoB;MACpE,MAAMC,cAAc,GAAG,IAAI,CAACC,MAAM,CAACD,cAAc;MACjD,IAAIE,UAAoF;MACxF,IAAIF,cAAc,EAAE;QACnB,MAAMG,qBAAqB,GAAGL,cAAc,CAACM,UAAU,CAACJ,cAAc,CAAC;QACvE,MAAMK,yBAAyB,GAAGT,2BAA2B,CAACO,qBAAqB,CAAC;QACpF,MAAMG,kBAAkB,GAAGD,yBAAyB,CAACE,YAA8C;QACnG,IAAID,kBAAkB,EAAE;UAAA;UACvB,MAAME,gBAAgB,GAAG;YACxBC,aAAa,2BAAEd,iBAAiB,CAACe,eAAe,0DAAjC,sBAAmCxB,IAAI;YACtDyB,kBAAkB,EACjBL,kBAAkB,CAACM,kBAAkB,KAAK,oCAAoC,GAC1EC,OAAO,CAAaD,kBAAkB,CAACE,SAAS,GAChDD,OAAO,CAAaD,kBAAkB,CAACG,QAAQ;YACpDC,KAAK,EAAEV,kBAAkB,CAACW,KAAe;YACzCC,WAAW,EAAE,IAAI,CAACjB,MAAM,CAACiB,WAAW;YACpCC,8BAA8B,EAAE,IAAI,CAAClB,MAAM,CAACkB;UAC7C,CAAC;UACD,IAAI,CAAC,IAAI,CAAClB,MAAM,CAACmB,OAAO,EAAE;YACzBlB,UAAU,GAAG;cACZmB,KAAK,EAAE,MAAM;gBACX5B,UAAU,CAA0B6B,QAAQ,CAACC,YAAY,CAAC/B,IAAI,EAAEc,kBAAkB,CAACkB,MAAM,EAAY;kBACrG,GAAGhB,gBAAgB;kBACnB,GAAG;oBACFiB,QAAQ,EAAEjC,IAAI,CAACkC,iBAAiB,EAAE;oBAClCC,KAAK,EAAEnC,IAAI,CAACO,QAAQ;kBACrB;gBACD,CAAC,CAAC;cACH;YACD,CAAC;UACF,CAAC,MAAM;YACNG,UAAU,GAAG;cAAE,aAAa,EAAG,GAAE,IAAI,CAACD,MAAM,CAACmB,OAAQ;YAA6B,CAAC;UACpF;UACA,OACC,KAAC,MAAM;YACN,EAAE,EAAE,IAAI,CAACQ,EAAG;YACZ,IAAI,EAAEpB,gBAAgB,CAACQ,KAAM;YAAA,GACzBd,UAAU;YACd,YAAY,EAAE2B,kBAAkB,CAACxB,yBAAyB,CAACE,YAAY,CAAwB;YAC/F,OAAO,EAAE,IAAI,CAACN,MAAM,CAAC6B,OAAQ;YAC7B,OAAO,EAAE,IAAI,CAAC7B,MAAM,CAAC8B,OAAQ;YAC7B,IAAI,EAAEC,qBAAqB,CAACC,uCAAuC,CAAC5B,yBAAyB;UAAE,EAC9F;QAEJ;MACD;IACD,CAAC;IAAA;EAAA,EA9DmD6B,oBAAoB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":1416,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockSupport","RuntimeBuildingBlock","DataField","MetaModelConverter","library","CriticalityFormatters","Button","_jsx","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_descriptor3","_exports","getInvolvedDataModelObjects","isActionWithDialog","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","DataFieldForActionBlock","name","namespace","type","required","_RuntimeBuildingBlock","_this","_len","arguments","length","args","Array","_key","this","_proto","getContent","view","controller","getController","dataViewModelPath","contextPath","odataMetaModel","getModel","annotationPath","action","pressEvent","annotationPathContext","getContext","dataFieldContextModelPath","dataFieldForAction","targetObject","_dataViewModelPath$ta","actionParameters","entitySetName","targetEntitySet","invocationGrouping","InvocationGrouping","ChangeSet","Isolated","label","Label","isNavigable","defaultValuesExtensionFunction","command","press","handlers","onCallAction","Action","contexts","getBindingContext","model","id","text","ariaHasPopup","visible","enabled","buildExpressionForCriticalityButtonType"],"sources":["DataFieldForAction.block-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,4DAAO,CAAC,kDAAmD,kDAAmD,+CAAgD,4CAA6C,sBAAuB,+CAAgD,eAAgB,+BAAgC,SAAUC,EAAsBC,EAAsBC,EAAWC,EAAoBC,EAASC,EAAuBC,EAAQC,GACpc,aAEA,IAAIC,EAAMC,EAAOC,EAAOC,EAAOC,EAAQC,EAASC,EAAaC,EAAcC,EAC3E,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAA8Bf,EAAmBe,4BACrD,IAAIC,EAAqBjB,EAAUiB,mBACnC,IAAIC,EAAsBpB,EAAqBoB,oBAC/C,IAAIC,EAAiBrB,EAAqBqB,eAC1C,SAASC,EAA2BC,EAAQC,EAAUC,EAAYC,GAAW,IAAKD,EAAY,OAAQE,OAAOC,eAAeL,EAAQC,EAAU,CAAEK,WAAYJ,EAAWI,WAAYC,aAAcL,EAAWK,aAAcC,SAAUN,EAAWM,SAAUC,MAAOP,EAAWQ,YAAcR,EAAWQ,YAAYC,KAAKR,QAAgB,GAAM,CAC3U,SAASS,EAAuBC,GAAQ,GAAIA,SAAc,EAAG,CAAE,MAAM,IAAIC,eAAe,4DAA8D,CAAE,OAAOD,CAAM,CACrK,SAASE,EAAeC,EAAUC,GAAcD,EAASE,UAAYd,OAAOe,OAAOF,EAAWC,WAAYF,EAASE,UAAUE,YAAcJ,EAAUK,EAAgBL,EAAUC,EAAa,CAC5L,SAASI,EAAgBC,EAAGC,GAAKF,EAAkBjB,OAAOoB,eAAiBpB,OAAOoB,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,SAASI,EAA0B3B,EAAQC,EAAU2B,EAAY1B,EAAYC,GAAW,IAAI0B,EAAO,CAAC,EAAGzB,OAAO0B,KAAK5B,GAAY6B,QAAQ,SAAUC,GAAOH,EAAKG,GAAO9B,EAAW8B,EAAM,GAAIH,EAAKvB,aAAeuB,EAAKvB,WAAYuB,EAAKtB,eAAiBsB,EAAKtB,aAAc,GAAI,UAAWsB,GAAQA,EAAKnB,YAAa,CAAEmB,EAAKrB,SAAW,IAAM,CAAEqB,EAAOD,EAAWK,QAAQC,UAAUC,OAAO,SAAUN,EAAMO,GAAa,OAAOA,EAAUpC,EAAQC,EAAU4B,IAASA,CAAM,EAAGA,GAAO,GAAI1B,GAAW0B,EAAKnB,mBAAqB,EAAG,CAAEmB,EAAKpB,MAAQoB,EAAKnB,YAAcmB,EAAKnB,YAAYC,KAAKR,QAAgB,EAAG0B,EAAKnB,YAAc2B,SAAW,CAAE,GAAIR,EAAKnB,mBAAqB,EAAG,CAAEN,OAAOC,eAAeL,EAAQC,EAAU4B,GAAOA,EAAO,IAAM,CAAE,OAAOA,CAAM,CACntB,SAASS,EAA0BpC,EAAYC,GAAW,MAAM,IAAIoC,MAAM,wDAA0D,gFAAkF,CACtN,IAAIC,GAA2BvD,EAAOY,EAAoB,CACxD4C,KAAM,qBACNC,UAAW,0BACTxD,EAAQY,EAAe,CACzB6C,KAAM,SACNC,SAAU,OACRzD,EAAQW,EAAe,CACzB6C,KAAM,uBACNC,SAAU,OACRxD,EAAQU,EAAe,CACzB6C,KAAM,SACNC,SAAU,OACR3D,EAAKI,GAAUC,EAAuB,SAAUuD,GAClD9B,EAAeyB,EAAyBK,GACxC,SAASL,IACP,IAAIM,EACJ,IAAK,IAAIC,EAAOC,UAAUC,OAAQC,EAAO,IAAIC,MAAMJ,GAAOK,EAAO,EAAGA,EAAOL,EAAMK,IAAQ,CACvFF,EAAKE,GAAQJ,UAAUI,EACzB,CACAN,EAAQD,EAAsBlC,KAAK0C,QAASH,IAASG,KACrDtD,EAA2B+C,EAAO,SAAUvD,EAAaqB,EAAuBkC,IAChF/C,EAA2B+C,EAAO,cAAetD,EAAcoB,EAAuBkC,IACtF/C,EAA2B+C,EAAO,KAAMrD,EAAcmB,EAAuBkC,IAC7E,OAAOA,CACT,CACApD,EAAW8C,EACX,IAAIc,EAASd,EAAwBtB,UACrCoC,EAAOC,WAAa,SAASA,EAAWC,GACtC,MAAMC,EAAaD,EAAKE,gBACxB,MAAMC,EAAoBhE,EAA4B0D,KAAKO,aAC3D,MAAMC,EAAiBR,KAAKO,YAAYE,WACxC,MAAMC,EAAiBV,KAAKW,OAAOD,eACnC,IAAIE,EACJ,GAAIF,EAAgB,CAClB,MAAMG,EAAwBL,EAAeM,WAAWJ,GACxD,MAAMK,EAA4BzE,EAA4BuE,GAC9D,MAAMG,EAAqBD,EAA0BE,aACrD,GAAID,EAAoB,CACtB,IAAIE,EACJ,MAAMC,EAAmB,CACvBC,eAAgBF,EAAwBZ,EAAkBe,mBAAqB,MAAQH,SAA+B,OAAS,EAAIA,EAAsB9B,KACzJkC,mBAAoBN,EAAmBO,qBAAuB,qCAAuC/F,EAAQ+F,mBAAmBC,UAAYhG,EAAQ+F,mBAAmBE,SACvKC,MAAOV,EAAmBW,MAC1BC,YAAa5B,KAAKW,OAAOiB,YACzBC,+BAAgC7B,KAAKW,OAAOkB,gCAE9C,IAAK7B,KAAKW,OAAOmB,QAAS,CACxBlB,EAAa,CACXmB,MAAO,KACL3B,EAAW4B,SAASC,aAAa9B,EAAMa,EAAmBkB,OAAQ,IAC7Df,KACA,CACDgB,SAAUhC,EAAKiC,oBACfC,MAAOlC,EAAKM,aAEd,EAGR,KAAO,CACLG,EAAa,CACX,cAAe,GAAGZ,KAAKW,OAAOmB,gBAElC,CACA,OAAOnG,EAAKD,EAAQ,CAClB4G,GAAItC,KAAKsC,GACTC,KAAMpB,EAAiBO,SACpBd,EACH4B,aAAcjG,EAAmBwE,EAA0BE,cAC3DwB,QAASzC,KAAKW,OAAO8B,QACrBC,QAAS1C,KAAKW,OAAO+B,QACrBpD,KAAM7D,EAAsBkH,wCAAwC5B,IAExE,CACF,CACF,EACA,OAAO5B,CACT,CAhE0C,CAgExC9D,GAAwBa,EAAcoC,EAA0BrC,EAAQ4B,UAAW,SAAU,CAAChC,GAAQ,CACtGqB,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXlB,EAAemC,EAA0BrC,EAAQ4B,UAAW,cAAe,CAAC/B,GAAQ,CACtFoB,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXjB,EAAekC,EAA0BrC,EAAQ4B,UAAW,KAAM,CAAC9B,GAAQ,CAC7EmB,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACVpB,KAAaD,GAClBK,EAAW8C,EACX,OAAO9C,CACT,EAAG","sourceRoot":"actions"}},{"offset":{"line":1421,"column":0},"map":{"version":3,"names":["measureRole","personalizationValues","setCustomActionProperties","childAction","menuContentActions","action","menuActions","actionKey","getAttribute","replace","children","length","localName","namespaceURI","indexOf","actionsToAdd","Array","prototype","slice","apply","actionIdx","reduce","customAction","actToAdd","actionKeyAdd","curOutObject","key","text","__noWrap","press","requiresSelection","enabled","Object","values","map","menuItem","position","placement","anchor","menu","ChartBlock","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","blockAttribute","type","isPublic","blockEvent","blockAggregation","processAggregations","props","configuration","settings","_commandActions","createChartDefinition","converterContext","contextObjectPath","controlPath","visualizationPath","getContextRelativeTargetObjectPath","metaPath","getObject","$Type","visualizations","Visualizations","checkChartVisualizationPath","visualizationDefinition","getDataVisualizationConfiguration","useCondensedLayout","undefined","createBindingContext","data","contextPath","uid","models","setProperty","getChartMeasures","aggregationHelper","chartAnnotationPath","chartDefinition","annotationPath","split","filter","item","pos","toString","replaceAll","oChart","getInvolvedDataModelObjects","getModel","targetObject","aggregatedProperty","getAggregatedProperties","measures","annoPath","getPath","aggregatedProperties","chartMeasures","Measures","chartDynamicMeasures","DynamicMeasures","transAggInMeasures","properties","some","propertyMeasureType","Name","value","entitySetPath","transAggregations","transAgg","customAggregations","customAgg","Log","warning","isCustomAggregateIsMeasure","oChartMeasure","oCustomAggMeasure","getCustomAggMeasure","Error","dynamicMeasure","getDynamicMeasures","chartMeasure","customAggMeasure","measureType","setCustomAggMeasure","setTransAggMeasure","setChartMeasureAttributes","_chart","MeasureAttributes","measuresModel","JSONModel","$$valueAsPromise","measure","error","role","label","propertyPath","push","transAggMeasure","aggregationMethod","chartDynamicMeasure","chart","startsWith","AggregatableProperty","AggregationMethod","resolveBindingString","annotations","Common","Label","measureAttributes","measureAttribute","_setChartMeasureAttribute","path","DynamicMeasure","Measure","measureAttributeDataPoint","DataPoint","Role","dataPoint","setMeasureRole","setMeasureDataPoint","Value","$Path","ChartHelper","formatJSONToString","createDataPointProperty","index","$EnumMember","getDependents","chartContext","commandAction","getActionCommand","checkPersonalizationInChartProperties","oProps","personalization","join","verifyValidPersonlization","valid","splitArray","acceptedValues","forEach","arrayElement","includes","getVariantManagement","oChartDefinition","variantManagement","createVariantManagement","xml","generate","id","variantSelected","headerLevel","variantSaved","getPersistenceProvider","pushActionCommand","actionContext","dataField","chartOperationAvailableMap","onExecuteAction","getPressEventForDataFieldForActionButton","onExecuteIBN","CommonHelper","getPressHandlerForDataFieldForIBN","onExecuteManifest","buildActionWrapper","dataFieldContext","dataFieldAction","getActionContext","isBoundPath","getPathToBoundActionOverload","isBound","escapeXMLAttributeValue","getOperationAvailableMap","context","isActionEnabled","isDataFieldForActionButtonEnabled","$IsBound","Action","enableOnSelect","isIBNEnabled","RequiresContext","actionCommand","getVisible","IsBound","getItems","dimensions","Dimensions","formatDimensions","dimension","getItem","formatMeasures","concat","prefix","getToolbarActions","isInsightsEnabled","actions","getActions","onSegmentedButtonPressed","getSegmentedButton","getStandardActions","chartActions","removeMenuItems","getAction","hasOwnProperty","getCustomActions","splice","actionEnabled","getActionToolbarAction","unittestid","ariaHasPopup","visible","getActionToolbarMenuAction","useDefaultActionOnly","DefaultActionHandler","getUseDefaultActionOnly","buttonMode","getButtonMode","defaultAction","getMenuItemFromMenu","menuItemAction","pressHandler","command","noWrap","aMenuItems","isMenuItem","getNavigationActions","getAnnotationActions","actionObject","getAnnotationActionsEnabled","dataFieldModelObjectPath","isDataModelObjectPathForActionWithDialog","toolbarAction","buildAction","actionPress","getSegmentedButtonItems","segmentedButtonItems","isDesktop","getSegmentedButtonItem","tooltip","icon","hiddenPathContext","getHiddenPathExpressionForTableActionsAndIBN","getContextPath","lastIndexOf","initialConverterContext","getConverterContext","getVisualizationPath","extraParams","getExtraParams","AggregationHelper","getEntityType","_chartContext","getUiChart","_applyIdToContent","_apiId","_contentId","getContentId","navigationPath","autoBindOnInit","vizProperties","selectionMode","toUpperCase","filterBar","filterId","draftSupported","ModelHelper","isDraftSupported","metaModel","_chartType","formatChartType","ChartType","operationAvailableMap","keys","commandActions","presentationPath","createPresentationPathContext","_sortCondtions","getSortConditions","applySupported","chartActionsContext","Actions","contextPathContext","contextPathPath","targetCollectionPath","getTargetCollectionPath","targetCollectionPathContext","actionsObject","convertedTypes","resolvePath","target","_customData","entitySet","entityType","stringifyCustomData","JSON","parse","multiSelectDisabledActions","ActionHelper","getMultiSelectDisabledActions","segmentedButtonId","multiViews","selectionPresentationVariantPath","_actions","macroId","oDataPointAnno","oDataPoint","TargetValue","targetValue","ForeCastValue","foreCastValue","oCriticality","Criticality","Calculated","Static","CriticalityCalculation","oThresholds","bConstant","buildThresholds","ConstantThresholds","DynamicThresholds","criticality","oCriticalityCalculation","aKeys","sKey","i","j","ImprovementDirection","oDynamicThresholds","oneSupplied","usedMeasures","oConstantThresholds","oAggregationLevel","AggregationLevels","VisibleDimensions","oAggregationLevelInfo","aVisibleDimensions","AggregationLevel","$PropertyPath","nValue","getTemplate","chartdelegate","noDataText","getTranslatedText","chartDelegate","binding","header","Title","selectionChange","stateChange","headerVisible","height","width","BuildingBlockBase","visualization","$AnnotationPath","term","resolvedTarget","getEntityTypeAnnotation","PresentationVariant","getVisualizationsFromPresentationVariant","chartViz","find","viz","TitleLevel","Auto"],"sourceRoot":"chart","sources":["Chart.block.ts"],"sourcesContent":["import type { PrimitiveType } from \"@sap-ux/vocabularies-types\";\nimport { AnalyticsAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Analytics\";\nimport { CommonAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport { CoreAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Core\";\nimport type {\n\tChart,\n\tChartMeasureAttributeType,\n\tChartMeasureRoleType,\n\tDataFieldAbstractTypes,\n\tDataFieldForAction,\n\tDataPoint\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTerms, UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport uid from \"sap/base/util/uid\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAggregation, blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { escapeXMLAttributeValue, xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { isDataModelObjectPathForActionWithDialog } from \"sap/fe/core/converters/annotations/DataField\";\nimport type { AnnotationAction, BaseAction, CustomAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport type { ChartVisualization } from \"sap/fe/core/converters/controls/Common/Chart\";\nimport type { VisualizationAndPath } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport {\n\tgetDataVisualizationConfiguration,\n\tgetVisualizationsFromPresentationVariant\n} from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport type ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport { AggregationHelper } from \"sap/fe/core/converters/helpers/Aggregation\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { BindingToolkitExpression, CompiledBindingToolkitExpression, resolveBindingString } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport { TitleLevel } from \"sap/ui/core/library\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport ActionHelper from \"../internal/helpers/ActionHelper\";\nimport DefaultActionHandler from \"../internal/helpers/DefaultActionHandler\";\nimport type { Action, ActionGroup } from \"./ChartAPI\";\nimport ChartHelper from \"./ChartHelper\";\n\nconst measureRole: { [key: string]: string } = {\n\t\"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis1\": \"axis1\",\n\t\"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis2\": \"axis2\",\n\t\"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis3\": \"axis3\",\n\t\"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis4\": \"axis4\"\n};\n\ntype ExtendedActionGroup = ActionGroup & { menuContentActions?: Record<string, Action> };\ntype ActionOrActionGroup = Record<string, Action | ExtendedActionGroup>;\ntype CustomAndAction = CustomAction & (Action | ActionGroup);\ntype CustomToolbarMenuAction = {\n\tid: string;\n\ttext: string | undefined;\n\tvisible: string | undefined;\n\tenabled: string | boolean;\n\tuseDefaultActionOnly?: boolean;\n\tbuttonMode?: string;\n\tdefaultAction?: string;\n\tactions?: CustomAction;\n};\n\nenum personalizationValues {\n\tSort = \"Sort\",\n\tType = \"Type\",\n\tItem = \"Item\",\n\tFilter = \"Filter\"\n}\n\n/**\n * Build actions and action groups with all properties for chart visualization.\n *\n * @param childAction XML node corresponding to actions\n * @returns Prepared action object\n */\nconst setCustomActionProperties = function (childAction: Element) {\n\tlet menuContentActions = null;\n\tconst action = childAction;\n\tlet menuActions: ActionGroup[] = [];\n\tconst actionKey = action.getAttribute(\"key\")?.replace(\"InlineXML_\", \"\");\n\t// For the actionGroup we authorize the both entries <sap.fe.macros:ActionGroup> (compliant with old FPM examples) and <sap.fe.macros.chart:ActionGroup>\n\tif (\n\t\taction.children.length &&\n\t\taction.localName === \"ActionGroup\" &&\n\t\taction.namespaceURI &&\n\t\t[\"sap.fe.macros\", \"sap.fe.macros.chart\"].indexOf(action.namespaceURI) > -1\n\t) {\n\t\tconst actionsToAdd = Array.prototype.slice.apply(action.children);\n\t\tlet actionIdx = 0;\n\t\tmenuContentActions = actionsToAdd.reduce((customAction, actToAdd) => {\n\t\t\tconst actionKeyAdd = actToAdd.getAttribute(\"key\")?.replace(\"InlineXML_\", \"\") || actionKey + \"_Menu_\" + actionIdx;\n\t\t\tconst curOutObject = {\n\t\t\t\tkey: actionKeyAdd,\n\t\t\t\ttext: actToAdd.getAttribute(\"text\"),\n\t\t\t\t__noWrap: true,\n\t\t\t\tpress: actToAdd.getAttribute(\"press\"),\n\t\t\t\trequiresSelection: actToAdd.getAttribute(\"requiresSelection\") === \"true\",\n\t\t\t\tenabled: actToAdd.getAttribute(\"enabled\") === null ? true : actToAdd.getAttribute(\"enabled\")\n\t\t\t};\n\t\t\tcustomAction[curOutObject.key] = curOutObject;\n\t\t\tactionIdx++;\n\t\t\treturn customAction;\n\t\t}, {});\n\t\tmenuActions = Object.values(menuContentActions)\n\t\t\t.slice(-action.children.length)\n\t\t\t.map(function (menuItem: any) {\n\t\t\t\treturn menuItem.key;\n\t\t\t});\n\t}\n\treturn {\n\t\tkey: actionKey,\n\t\ttext: action.getAttribute(\"text\"),\n\t\tposition: {\n\t\t\tplacement: action.getAttribute(\"placement\"),\n\t\t\tanchor: action.getAttribute(\"anchor\")\n\t\t},\n\t\t__noWrap: true,\n\t\tpress: action.getAttribute(\"press\"),\n\t\trequiresSelection: action.getAttribute(\"requiresSelection\") === \"true\",\n\t\tenabled: action.getAttribute(\"enabled\") === null ? true : action.getAttribute(\"enabled\"),\n\t\tmenu: menuActions.length ? menuActions : null,\n\t\tmenuContentActions: menuContentActions\n\t};\n};\n\ntype MeasureType = {\n\tid?: string;\n\tkey?: string;\n\trole?: string;\n\tpropertyPath?: string;\n\taggregationMethod?: string;\n\tlabel?: string | BindingToolkitExpression<PrimitiveType>;\n\tvalue?: string;\n\tdataPoint?: string;\n\tname?: string;\n};\n\ntype DimensionType = {\n\tid?: string;\n\tkey?: string;\n\trole?: string;\n\tpropertyPath?: string;\n\tlabel?: string | BindingToolkitExpression<PrimitiveType>;\n\tvalue?: string;\n};\n\ntype CommandAction = {\n\tactionContext: Context;\n\tonExecuteAction: string;\n\tonExecuteIBN?: string;\n\tonExecuteManifest: CompiledBindingToolkitExpression;\n};\n\ntype ToolBarAction = {\n\tunittestid: string;\n\tid?: string;\n\tlabel: string;\n\tariaHasPopup?: string;\n\tpress: string;\n\tenabled: string | boolean;\n\tvisible: string | boolean;\n};\n\ntype ChartCustomData = {\n\ttargetCollectionPath: string;\n\tentitySet: string;\n\tentityType: string;\n\toperationAvailableMap: string;\n\tmultiSelectDisabledActions: string;\n\tsegmentedButtonId: string;\n\tcustomAgg: string;\n\ttransAgg: string;\n\tapplySupported: string;\n\tvizProperties: string;\n\tdraftSupported?: boolean;\n\tmultiViews?: boolean;\n\tselectionPresentationVariantPath?: string;\n};\n\n/**\n *\n * Building block for creating a Chart based on the metadata provided by OData V4.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Chart id=\"MyChart\" metaPath=\"@com.sap.vocabularies.UI.v1.Chart\" /&gt;\n * </pre>\n *\n * Building block for creating a Chart based on the metadata provided by OData V4.\n *\n * @private\n * @experimental\n */\n@defineBuildingBlock({\n\tname: \"Chart\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.fe.macros.chart.ChartAPI\"]\n})\nexport default class ChartBlock extends BuildingBlockBase {\n\t/**\n\t * ID of the chart\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tid?: string;\n\n\t@blockAttribute({\n\t\ttype: \"object\"\n\t})\n\tchartDefinition?: ChartVisualization;\n\n\t/**\n\t * Metadata path to the presentation context (UI.Chart with or without a qualifier)\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tmetaPath!: Context; // We require metaPath to be there even though it is not formally required\n\n\t/**\n\t * Metadata path to the entitySet or navigationProperty\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tcontextPath!: Context; // We require contextPath to be there even though it is not formally required\n\n\t/**\n\t * The height of the chart\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\theight: string = \"100%\";\n\n\t/**\n\t * The width of the chart\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\twidth: string = \"100%\";\n\n\t/**\n\t * Specifies the header text that is shown in the chart\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\theader?: string;\n\n\t/**\n\t * Specifies the visibility of the chart header\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\theaderVisible?: boolean;\n\n\t/**\n\t * Defines the \"aria-level\" of the chart header\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.core.TitleLevel\",\n\t\tisPublic: true\n\t})\n\theaderLevel: TitleLevel = TitleLevel.Auto;\n\n\t/**\n\t * Specifies the selection mode\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tselectionMode: string = \"MULTIPLE\";\n\n\t/**\n\t * Parameter which sets the personalization of the chart\n\t */\n\t@blockAttribute({\n\t\ttype: \"string|boolean\",\n\t\tisPublic: true\n\t})\n\tpersonalization?: string | boolean;\n\n\t/**\n\t * Parameter which sets the ID of the filterbar associating it to the chart\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tfilterBar?: string;\n\n\t/**\n\t * \tParameter which sets the noDataText for the chart\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tnoDataText?: string;\n\n\t/**\n\t * Parameter which sets the chart delegate for the chart\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tchartDelegate?: string;\n\n\t/**\n\t * Parameter which sets the visualization properties for the chart\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tvizProperties?: string;\n\n\t/**\n\t * The actions to be shown in the action area of the chart\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\tchartActions?: Context;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tdraftSupported?: boolean;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tautoBindOnInit?: boolean;\n\n\t@blockAttribute({ type: \"string\" })\n\tvisible?: string;\n\n\t@blockAttribute({ type: \"string\" })\n\tnavigationPath?: string;\n\n\t@blockAttribute({ type: \"string\" })\n\tfilter?: string;\n\n\t@blockAttribute({ type: \"string\" })\n\tmeasures?: Context;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\t_applyIdToContent: boolean = false;\n\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tvariantManagement?: string;\n\n\t@blockEvent()\n\tvariantSelected?: Function;\n\n\t@blockEvent()\n\tvariantSaved?: Function;\n\n\t/**\n\t * The XML and manifest actions to be shown in the action area of the chart\n\t */\n\t@blockAggregation({\n\t\ttype: \"sap.fe.macros.internal.chart.Action | sap.fe.macros.internal.chart.ActionGroup\",\n\t\tisPublic: true,\n\t\tprocessAggregations: setCustomActionProperties\n\t})\n\tactions?: ActionOrActionGroup;\n\n\t/**\n\t * An event triggered when chart selections are changed. The event contains information about the data selected/deselected and\n\t * the Boolean flag that indicates whether data is selected or deselected\n\t */\n\t@blockEvent()\n\tselectionChange?: Function;\n\n\t/**\n\t * Event handler to react to the stateChange event of the chart.\n\t */\n\t@blockEvent()\n\tstateChange?: Function;\n\n\tuseCondensedLayout!: boolean;\n\n\t_apiId!: string | undefined;\n\n\t_contentId: string | undefined;\n\n\t_commandActions: CommandAction[] = [];\n\n\t_chartType: string | undefined;\n\n\t_sortCondtions: string | undefined;\n\n\t_customData: ChartCustomData;\n\n\t_actions: string;\n\n\t_chartContext: Context;\n\n\t_chart: Chart;\n\n\tconstructor(props: PropertiesOf<ChartBlock>, configuration: any, settings: any) {\n\t\tsuper(props, configuration, settings);\n\t\tconst contextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\tconst initialConverterContext = this.getConverterContext(contextObjectPath, /*this.contextPath*/ undefined, settings);\n\t\tconst visualizationPath = ChartBlock.getVisualizationPath(this, contextObjectPath, initialConverterContext);\n\t\tconst extraParams = ChartBlock.getExtraParams(this, visualizationPath);\n\t\tconst converterContext = this.getConverterContext(contextObjectPath, /*this.contextPath*/ undefined, settings, extraParams);\n\n\t\tconst aggregationHelper = new AggregationHelper(converterContext.getEntityType(), converterContext, true); // passing the last parameter as true to consider the old annotations i.e. Aggregation.Aggregatable for backward compatibility in case of chart\n\t\tthis._chartContext = ChartHelper.getUiChart(this.metaPath)! as Context;\n\t\tthis._chart = this._chartContext.getObject() as Chart;\n\t\tif (this._applyIdToContent ?? false) {\n\t\t\tthis._apiId = this.id + \"::Chart\";\n\t\t\tthis._contentId = this.id;\n\t\t} else {\n\t\t\tthis._apiId = this.id;\n\t\t\tthis._contentId = this.getContentId(this.id!);\n\t\t}\n\n\t\tif (this._chart) {\n\t\t\tthis.chartDefinition =\n\t\t\t\tthis.chartDefinition === undefined || this.chartDefinition === null\n\t\t\t\t\t? this.createChartDefinition(converterContext, contextObjectPath, this._chartContext.getPath())\n\t\t\t\t\t: this.chartDefinition;\n\t\t\t// API Properties\n\t\t\tthis.navigationPath = this.chartDefinition.navigationPath;\n\t\t\tthis.autoBindOnInit = this.chartDefinition.autoBindOnInit;\n\t\t\tthis.vizProperties = this.chartDefinition.vizProperties;\n\t\t\tthis.chartActions = this.createBindingContext(this.chartDefinition.actions, settings);\n\t\t\tthis.selectionMode = this.selectionMode.toUpperCase();\n\t\t\tif (this.filterBar) {\n\t\t\t\tthis.filter = this.getContentId(this.filterBar);\n\t\t\t} else if (!this.filter) {\n\t\t\t\tthis.filter = this.chartDefinition.filterId;\n\t\t\t}\n\t\t\tthis.checkPersonalizationInChartProperties(this);\n\t\t\tthis.variantManagement = this.getVariantManagement(this, this.chartDefinition);\n\t\t\tthis.visible = this.chartDefinition.visible;\n\t\t\tlet contextPath = this.contextPath.getPath();\n\t\t\tcontextPath = contextPath[contextPath.length - 1] === \"/\" ? contextPath.slice(0, -1) : contextPath;\n\t\t\tthis.draftSupported = ModelHelper.isDraftSupported(settings.models.metaModel, contextPath);\n\t\t\tthis._chartType = ChartHelper.formatChartType(this._chart.ChartType);\n\n\t\t\tconst operationAvailableMap = ChartHelper.getOperationAvailableMap(this._chart, {\n\t\t\t\tcontext: this._chartContext\n\t\t\t});\n\n\t\t\tif (Object.keys(this.chartDefinition?.commandActions as object).length > 0) {\n\t\t\t\tObject.keys(this.chartDefinition?.commandActions as object).forEach((key: string) => {\n\t\t\t\t\tconst action = this.chartDefinition?.commandActions[key];\n\t\t\t\t\tconst actionContext = this.createBindingContext(action!, settings);\n\t\t\t\t\tconst dataFieldContext =\n\t\t\t\t\t\taction!.annotationPath && this.contextPath.getModel().createBindingContext(action!.annotationPath);\n\t\t\t\t\tconst dataField = dataFieldContext && dataFieldContext.getObject();\n\t\t\t\t\tconst chartOperationAvailableMap = escapeXMLAttributeValue(operationAvailableMap);\n\t\t\t\t\tthis.pushActionCommand(actionContext, dataField, chartOperationAvailableMap, action!);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.measures = this.getChartMeasures(this, aggregationHelper);\n\t\t\tconst presentationPath = CommonHelper.createPresentationPathContext(this.metaPath);\n\t\t\tthis._sortCondtions = ChartHelper.getSortConditions(\n\t\t\t\tthis.metaPath,\n\t\t\t\tthis.metaPath.getObject(),\n\t\t\t\tpresentationPath.getPath(),\n\t\t\t\tthis.chartDefinition.applySupported\n\t\t\t);\n\t\t\tconst chartActionsContext = this.contextPath\n\t\t\t\t.getModel()\n\t\t\t\t.createBindingContext(this._chartContext.getPath() + \"/Actions\", this._chart.Actions as unknown as Context);\n\t\t\tconst contextPathContext = this.contextPath.getModel().createBindingContext(this.contextPath.getPath(), this.contextPath);\n\t\t\tconst contextPathPath = CommonHelper.getContextPath(this.contextPath, { context: contextPathContext });\n\t\t\tconst targetCollectionPath = CommonHelper.getTargetCollectionPath(this.contextPath);\n\t\t\tconst targetCollectionPathContext = this.contextPath.getModel().createBindingContext(targetCollectionPath, this.contextPath)!;\n\t\t\tconst actionsObject = contextObjectPath.convertedTypes.resolvePath(chartActionsContext.getPath())?.target;\n\n\t\t\tthis._customData = {\n\t\t\t\ttargetCollectionPath: contextPathPath,\n\t\t\t\tentitySet:\n\t\t\t\t\ttypeof targetCollectionPathContext.getObject() === \"string\"\n\t\t\t\t\t\t? targetCollectionPathContext.getObject()\n\t\t\t\t\t\t: targetCollectionPathContext.getObject(\"@sapui.name\"),\n\t\t\t\tentityType: contextPathPath + \"/\",\n\t\t\t\toperationAvailableMap: CommonHelper.stringifyCustomData(JSON.parse(operationAvailableMap)),\n\t\t\t\tmultiSelectDisabledActions: ActionHelper.getMultiSelectDisabledActions(actionsObject as DataFieldAbstractTypes[]) + \"\",\n\t\t\t\tsegmentedButtonId: generate([this.id, \"SegmentedButton\", \"TemplateContentView\"]),\n\t\t\t\tcustomAgg: CommonHelper.stringifyCustomData(this.chartDefinition?.customAgg),\n\t\t\t\ttransAgg: CommonHelper.stringifyCustomData(this.chartDefinition?.transAgg),\n\t\t\t\tapplySupported: CommonHelper.stringifyCustomData(this.chartDefinition?.applySupported),\n\t\t\t\tvizProperties: this.vizProperties,\n\t\t\t\tdraftSupported: this.draftSupported,\n\t\t\t\tmultiViews: this.chartDefinition?.multiViews,\n\t\t\t\tselectionPresentationVariantPath: CommonHelper.stringifyCustomData({\n\t\t\t\t\tdata: this.chartDefinition?.selectionPresentationVariantPath\n\t\t\t\t})\n\t\t\t};\n\t\t\tthis._actions = this.chartActions\n\t\t\t\t? this.getToolbarActions(this._chartContext, this.chartDefinition.isInsightsEnabled ?? false)\n\t\t\t\t: \"\";\n\t\t} else {\n\t\t\t// fallback to display empty chart\n\t\t\tthis.autoBindOnInit = false;\n\t\t\tthis.visible = \"true\";\n\t\t\tthis.navigationPath = \"\";\n\t\t\tthis._actions = \"\";\n\t\t\tthis._customData = {\n\t\t\t\ttargetCollectionPath: \"\",\n\t\t\t\tentitySet: \"\",\n\t\t\t\tentityType: \"\",\n\t\t\t\toperationAvailableMap: \"\",\n\t\t\t\tmultiSelectDisabledActions: \"\",\n\t\t\t\tsegmentedButtonId: \"\",\n\t\t\t\tcustomAgg: \"\",\n\t\t\t\ttransAgg: \"\",\n\t\t\t\tapplySupported: \"\",\n\t\t\t\tvizProperties: \"\"\n\t\t\t};\n\t\t}\n\t}\n\n\tcreateChartDefinition = (\n\t\tconverterContext: ConverterContext,\n\t\tcontextObjectPath: DataModelObjectPath,\n\t\tcontrolPath: string\n\t): ChartVisualization => {\n\t\tlet visualizationPath = getContextRelativeTargetObjectPath(contextObjectPath);\n\t\tif (this.metaPath?.getObject()?.$Type === UIAnnotationTypes.PresentationVariantType) {\n\t\t\tconst visualizations = this.metaPath.getObject().Visualizations;\n\t\t\tvisualizationPath = ChartBlock.checkChartVisualizationPath(visualizations, visualizationPath);\n\t\t}\n\n\t\t// fallback to default Chart if visualizationPath is missing or visualizationPath is not found in control (in case of PresentationVariant)\n\t\tif (!visualizationPath || controlPath.indexOf(visualizationPath) === -1) {\n\t\t\tvisualizationPath = `@${UIAnnotationTerms.Chart}`;\n\t\t}\n\n\t\tconst visualizationDefinition = getDataVisualizationConfiguration(\n\t\t\tvisualizationPath,\n\t\t\tthis.useCondensedLayout,\n\t\t\tconverterContext,\n\t\t\tundefined,\n\t\t\tundefined,\n\t\t\tundefined,\n\t\t\ttrue\n\t\t);\n\t\treturn visualizationDefinition.visualizations[0] as ChartVisualization;\n\t};\n\n\tstatic checkChartVisualizationPath = (visualizations: Record<string, string>[], visualizationPath: string | undefined) => {\n\t\tvisualizations.forEach(function (visualization: Record<string, string>) {\n\t\t\tif (visualization.$AnnotationPath.indexOf(`@${UIAnnotationTerms.Chart}`) > -1) {\n\t\t\t\tvisualizationPath = visualization.$AnnotationPath;\n\t\t\t}\n\t\t});\n\t\treturn visualizationPath;\n\t};\n\n\tgetContentId(macroId: string) {\n\t\treturn `${macroId}-content`;\n\t}\n\n\tstatic getExtraParams(props: PropertiesOf<ChartBlock>, visualizationPath: string | undefined) {\n\t\tconst extraParams: Record<string, object> = {};\n\t\tif (props.actions) {\n\t\t\tObject.values(props.actions)?.forEach((item) => {\n\t\t\t\tprops.actions = { ...(props.actions as ActionOrActionGroup), ...(item as ExtendedActionGroup).menuContentActions };\n\t\t\t\tdelete (item as ExtendedActionGroup).menuContentActions;\n\t\t\t});\n\t\t}\n\t\tif (visualizationPath) {\n\t\t\textraParams[visualizationPath] = {\n\t\t\t\tactions: props.actions\n\t\t\t};\n\t\t}\n\t\treturn extraParams;\n\t}\n\n\tcreateBindingContext = function (data: object | BaseAction[] | CustomAction, settings: any) {\n\t\tconst contextPath = `/${uid()}`;\n\t\tsettings.models.converterContext.setProperty(contextPath, data);\n\t\treturn settings.models.converterContext.createBindingContext(contextPath);\n\t};\n\n\tgetChartMeasures = (props: any, aggregationHelper: AggregationHelper): Context => {\n\t\tconst chartAnnotationPath = props.chartDefinition.annotationPath.split(\"/\");\n\t\t// this is required because getAbsolutePath in converterContext returns \"/SalesOrderManage/_Item/_Item/@com.sap.vocabularies.v1.Chart\" as annotationPath\n\t\tconst annotationPath = chartAnnotationPath\n\t\t\t.filter(function (item: object, pos: number) {\n\t\t\t\treturn chartAnnotationPath.indexOf(item) == pos;\n\t\t\t})\n\t\t\t.toString()\n\t\t\t.replaceAll(\",\", \"/\");\n\t\tconst oChart = getInvolvedDataModelObjects(\n\t\t\tthis.metaPath.getModel().createBindingContext(annotationPath),\n\t\t\tthis.contextPath\n\t\t).targetObject;\n\t\tconst aggregatedProperty = aggregationHelper.getAggregatedProperties(\"AggregatedProperty\");\n\t\tlet measures: MeasureType[] = [];\n\t\tconst annoPath = props.metaPath.getPath();\n\t\tconst aggregatedProperties = aggregationHelper.getAggregatedProperties(\"AggregatedProperties\");\n\t\tconst chartMeasures = oChart.Measures ? oChart.Measures : [];\n\t\tconst chartDynamicMeasures = oChart.DynamicMeasures ? oChart.DynamicMeasures : [];\n\t\t//check if there are measures pointing to aggregatedproperties\n\t\tconst transAggInMeasures = aggregatedProperties[0]\n\t\t\t? aggregatedProperties[0].filter(function (properties: Record<string, string>) {\n\t\t\t\t\treturn chartMeasures.some(function (propertyMeasureType: MeasureType) {\n\t\t\t\t\t\treturn properties.Name === propertyMeasureType.value;\n\t\t\t\t\t});\n\t\t\t  })\n\t\t\t: undefined;\n\t\tconst entitySetPath = annoPath.replace(\n\t\t\t/@com.sap.vocabularies.UI.v1.(Chart|PresentationVariant|SelectionPresentationVariant).*/,\n\t\t\t\"\"\n\t\t);\n\t\tconst transAggregations = props.chartDefinition.transAgg;\n\t\tconst customAggregations = props.chartDefinition.customAgg;\n\t\t// intimate the user if there is Aggregatedproperty configured with no DYnamicMeasures, bu there are measures with AggregatedProperties\n\t\tif (aggregatedProperty.length > 0 && !chartDynamicMeasures && transAggInMeasures.length > 0) {\n\t\t\tLog.warning(\n\t\t\t\t\"The transformational aggregate measures are configured as Chart.Measures but should be configured as Chart.DynamicMeasures instead. Please check the SAP Help documentation and correct the configuration accordingly.\"\n\t\t\t);\n\t\t}\n\t\tconst isCustomAggregateIsMeasure = chartMeasures.some((oChartMeasure: MeasureType) => {\n\t\t\tconst oCustomAggMeasure = this.getCustomAggMeasure(customAggregations, oChartMeasure);\n\t\t\treturn !!oCustomAggMeasure;\n\t\t});\n\t\tif (aggregatedProperty.length > 0 && !chartDynamicMeasures?.length && !isCustomAggregateIsMeasure) {\n\t\t\tthrow new Error(\"Please configure DynamicMeasures for the chart\");\n\t\t}\n\t\tif (aggregatedProperty.length > 0) {\n\t\t\tfor (const dynamicMeasure of chartDynamicMeasures) {\n\t\t\t\tmeasures = this.getDynamicMeasures(measures, dynamicMeasure, entitySetPath, oChart);\n\t\t\t}\n\t\t}\n\t\tfor (const chartMeasure of chartMeasures) {\n\t\t\tconst key = chartMeasure.value;\n\t\t\tconst customAggMeasure = this.getCustomAggMeasure(customAggregations, chartMeasure);\n\t\t\tconst measureType: MeasureType = {};\n\t\t\tif (customAggMeasure) {\n\t\t\t\tmeasures = this.setCustomAggMeasure(measures, measureType, customAggMeasure, key);\n\t\t\t\t//if there is neither aggregatedProperty nor measures pointing to customAggregates, but we have normal measures. Now check if these measures are part of AggregatedProperties Obj\n\t\t\t} else if (aggregatedProperty.length === 0 && transAggregations[key]) {\n\t\t\t\tmeasures = this.setTransAggMeasure(measures, measureType, transAggregations, key);\n\t\t\t}\n\t\t\tthis.setChartMeasureAttributes(this._chart.MeasureAttributes, entitySetPath, measureType);\n\t\t}\n\t\tconst measuresModel: JSONModel = new JSONModel(measures);\n\t\t(measuresModel as any).$$valueAsPromise = true;\n\t\treturn measuresModel.createBindingContext(\"/\") as Context;\n\t};\n\n\tsetCustomAggMeasure = (measures: MeasureType[], measure: MeasureType, customAggMeasure: MeasureType, key: string) => {\n\t\tif (key.indexOf(\"/\") > -1) {\n\t\t\tLog.error(`$expand is not yet supported. Measure: ${key} from an association cannot be used`);\n\t\t}\n\t\tmeasure.key = customAggMeasure.value;\n\t\tmeasure.role = \"axis1\";\n\t\tmeasure.label = customAggMeasure.label;\n\t\tmeasure.propertyPath = customAggMeasure.value;\n\t\tmeasures.push(measure);\n\t\treturn measures;\n\t};\n\n\tsetTransAggMeasure = (measures: MeasureType[], measure: MeasureType, transAggregations: Record<string, MeasureType>, key: string) => {\n\t\tconst transAggMeasure = transAggregations[key];\n\t\tmeasure.key = transAggMeasure.name;\n\t\tmeasure.role = \"axis1\";\n\t\tmeasure.propertyPath = key;\n\t\tmeasure.aggregationMethod = transAggMeasure.aggregationMethod;\n\t\tmeasure.label = transAggMeasure.label || measure.label;\n\t\tmeasures.push(measure);\n\t\treturn measures;\n\t};\n\n\tgetDynamicMeasures = (\n\t\tmeasures: MeasureType[],\n\t\tchartDynamicMeasure: MeasureType,\n\t\tentitySetPath: string,\n\t\tchart: Chart\n\t): MeasureType[] => {\n\t\tconst key = chartDynamicMeasure.value || \"\";\n\t\tconst aggregatedProperty = getInvolvedDataModelObjects(\n\t\t\tthis.metaPath.getModel().createBindingContext(entitySetPath + key),\n\t\t\tthis.contextPath\n\t\t).targetObject;\n\t\tif (key.indexOf(\"/\") > -1) {\n\t\t\tLog.error(`$expand is not yet supported. Measure: ${key} from an association cannot be used`);\n\t\t\t// check if the annotation path is wrong\n\t\t} else if (!aggregatedProperty) {\n\t\t\tthrow new Error(`Please provide the right AnnotationPath to the Dynamic Measure ${chartDynamicMeasure.value}`);\n\t\t\t// check if the path starts with @\n\t\t} else if (chartDynamicMeasure.value?.startsWith(`@${AnalyticsAnnotationTerms.AggregatedProperty}`) === null) {\n\t\t\tthrow new Error(`Please provide the right AnnotationPath to the Dynamic Measure ${chartDynamicMeasure.value}`);\n\t\t} else {\n\t\t\t// check if AggregatedProperty is defined in given DynamicMeasure\n\t\t\tconst dynamicMeasure: MeasureType = {\n\t\t\t\tkey: aggregatedProperty.Name,\n\t\t\t\trole: \"axis1\"\n\t\t\t};\n\t\t\tdynamicMeasure.propertyPath = aggregatedProperty.AggregatableProperty.value;\n\t\t\tdynamicMeasure.aggregationMethod = aggregatedProperty.AggregationMethod;\n\t\t\tdynamicMeasure.label = resolveBindingString(\n\t\t\t\taggregatedProperty.annotations.Common?.Label ||\n\t\t\t\t\tgetInvolvedDataModelObjects(\n\t\t\t\t\t\tthis.metaPath\n\t\t\t\t\t\t\t.getModel()\n\t\t\t\t\t\t\t.createBindingContext(entitySetPath + dynamicMeasure.propertyPath + `@${CommonAnnotationTerms.Label}`)!,\n\t\t\t\t\t\tthis.contextPath\n\t\t\t\t\t).targetObject\n\t\t\t);\n\t\t\tthis.setChartMeasureAttributes(chart.MeasureAttributes, entitySetPath, dynamicMeasure);\n\t\t\tmeasures.push(dynamicMeasure);\n\t\t}\n\t\treturn measures;\n\t};\n\n\tgetCustomAggMeasure = (customAggregations: Record<string, MeasureType | undefined>, measure: MeasureType) => {\n\t\tif (measure.value && customAggregations[measure.value]) {\n\t\t\tmeasure.label = customAggregations[measure.value]?.label;\n\t\t\treturn measure;\n\t\t}\n\t\treturn null;\n\t};\n\n\tsetChartMeasureAttributes = (measureAttributes: ChartMeasureAttributeType[], entitySetPath: string, measure: MeasureType) => {\n\t\tif (measureAttributes?.length) {\n\t\t\tfor (const measureAttribute of measureAttributes) {\n\t\t\t\tthis._setChartMeasureAttribute(measureAttribute, entitySetPath, measure);\n\t\t\t}\n\t\t}\n\t};\n\n\t_setChartMeasureAttribute = (measureAttribute: ChartMeasureAttributeType, entitySetPath: string, measure: MeasureType) => {\n\t\tconst path = measureAttribute.DynamicMeasure ? measureAttribute?.DynamicMeasure?.value : measureAttribute?.Measure?.value;\n\t\tconst measureAttributeDataPoint = measureAttribute.DataPoint ? measureAttribute?.DataPoint?.value : null;\n\t\tconst role = measureAttribute.Role;\n\t\tconst dataPoint =\n\t\t\tmeasureAttributeDataPoint &&\n\t\t\tgetInvolvedDataModelObjects(\n\t\t\t\tthis.metaPath.getModel().createBindingContext(entitySetPath + measureAttributeDataPoint),\n\t\t\t\tthis.contextPath\n\t\t\t).targetObject;\n\t\tif (measure.key === path) {\n\t\t\tthis.setMeasureRole(measure, role);\n\t\t\t//still to add data point, but UI5 Chart API is missing\n\t\t\tthis.setMeasureDataPoint(measure, dataPoint);\n\t\t}\n\t};\n\n\t/**\n\t * Format the data point as a JSON object.\n\t *\n\t * @param oDataPointAnno\n\t * @returns The formatted json object\n\t */\n\tcreateDataPointProperty(oDataPointAnno: any) {\n\t\tconst oDataPoint: any = {};\n\n\t\tif (oDataPointAnno.TargetValue) {\n\t\t\toDataPoint.targetValue = oDataPointAnno.TargetValue.$Path;\n\t\t}\n\n\t\tif (oDataPointAnno.ForeCastValue) {\n\t\t\toDataPoint.foreCastValue = oDataPointAnno.ForeCastValue.$Path;\n\t\t}\n\n\t\tlet oCriticality = null;\n\t\tif (oDataPointAnno.Criticality) {\n\t\t\tif (oDataPointAnno.Criticality.$Path) {\n\t\t\t\t//will be an aggregated property or custom aggregate\n\t\t\t\toCriticality = {\n\t\t\t\t\tCalculated: oDataPointAnno.Criticality.$Path\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toCriticality = {\n\t\t\t\t\tStatic: oDataPointAnno.Criticality.$EnumMember.replace(\"com.sap.vocabularies.UI.v1.CriticalityType/\", \"\")\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (oDataPointAnno.CriticalityCalculation) {\n\t\t\tconst oThresholds = {};\n\t\t\tconst bConstant = this.buildThresholds(oThresholds, oDataPointAnno.CriticalityCalculation);\n\n\t\t\tif (bConstant) {\n\t\t\t\toCriticality = {\n\t\t\t\t\tConstantThresholds: oThresholds\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toCriticality = {\n\t\t\t\t\tDynamicThresholds: oThresholds\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (oCriticality) {\n\t\t\toDataPoint.criticality = oCriticality;\n\t\t}\n\n\t\treturn oDataPoint;\n\t}\n\n\t/**\n\t * Checks whether the thresholds are dynamic or constant.\n\t *\n\t * @param oThresholds The threshold skeleton\n\t * @param oCriticalityCalculation The UI.DataPoint.CriticalityCalculation annotation\n\t * @returns `true` if the threshold should be supplied as ConstantThresholds, <code>false</code> if the threshold should\n\t * be supplied as DynamicThresholds\n\t * @private\n\t */\n\tbuildThresholds(oThresholds: any, oCriticalityCalculation: any) {\n\t\tconst aKeys = [\n\t\t\t\"AcceptanceRangeLowValue\",\n\t\t\t\"AcceptanceRangeHighValue\",\n\t\t\t\"ToleranceRangeLowValue\",\n\t\t\t\"ToleranceRangeHighValue\",\n\t\t\t\"DeviationRangeLowValue\",\n\t\t\t\"DeviationRangeHighValue\"\n\t\t];\n\t\tlet bConstant = true,\n\t\t\tsKey,\n\t\t\ti,\n\t\t\tj;\n\n\t\toThresholds.ImprovementDirection = oCriticalityCalculation.ImprovementDirection.$EnumMember.replace(\n\t\t\t\"com.sap.vocabularies.UI.v1.ImprovementDirectionType/\",\n\t\t\t\"\"\n\t\t);\n\n\t\tconst oDynamicThresholds: any = {\n\t\t\toneSupplied: false,\n\t\t\tusedMeasures: []\n\t\t\t// combination to check whether at least one is supplied\n\t\t};\n\t\tconst oConstantThresholds: any = {\n\t\t\toneSupplied: false\n\t\t\t// combination to check whether at least one is supplied\n\t\t};\n\n\t\tfor (i = 0; i < aKeys.length; i++) {\n\t\t\tsKey = aKeys[i];\n\t\t\toDynamicThresholds[sKey] = oCriticalityCalculation[sKey] ? oCriticalityCalculation[sKey].$Path : undefined;\n\t\t\toDynamicThresholds.oneSupplied = oDynamicThresholds.oneSupplied || oDynamicThresholds[sKey];\n\n\t\t\tif (!oDynamicThresholds.oneSupplied) {\n\t\t\t\t// only consider in case no dynamic threshold is supplied\n\t\t\t\toConstantThresholds[sKey] = oCriticalityCalculation[sKey];\n\t\t\t\toConstantThresholds.oneSupplied = oConstantThresholds.oneSupplied || oConstantThresholds[sKey];\n\t\t\t} else if (oDynamicThresholds[sKey]) {\n\t\t\t\toDynamicThresholds.usedMeasures.push(oDynamicThresholds[sKey]);\n\t\t\t}\n\t\t}\n\n\t\t// dynamic definition shall overrule constant definition\n\t\tif (oDynamicThresholds.oneSupplied) {\n\t\t\tbConstant = false;\n\n\t\t\tfor (i = 0; i < aKeys.length; i++) {\n\t\t\t\tif (oDynamicThresholds[aKeys[i]]) {\n\t\t\t\t\toThresholds[aKeys[i]] = oDynamicThresholds[aKeys[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t\toThresholds.usedMeasures = oDynamicThresholds.usedMeasures;\n\t\t} else {\n\t\t\tlet oAggregationLevel: any;\n\t\t\toThresholds.AggregationLevels = [];\n\n\t\t\t// check if at least one static value is supplied\n\t\t\tif (oConstantThresholds.oneSupplied) {\n\t\t\t\t// add one entry in the aggregation level\n\t\t\t\toAggregationLevel = {\n\t\t\t\t\tVisibleDimensions: null\n\t\t\t\t};\n\n\t\t\t\tfor (i = 0; i < aKeys.length; i++) {\n\t\t\t\t\tif (oConstantThresholds[aKeys[i]]) {\n\t\t\t\t\t\toAggregationLevel[aKeys[i]] = oConstantThresholds[aKeys[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toThresholds.AggregationLevels.push(oAggregationLevel);\n\t\t\t}\n\n\t\t\t// further check for ConstantThresholds\n\t\t\tif (oCriticalityCalculation.ConstantThresholds && oCriticalityCalculation.ConstantThresholds.length > 0) {\n\t\t\t\tfor (i = 0; i < oCriticalityCalculation.ConstantThresholds.length; i++) {\n\t\t\t\t\tconst oAggregationLevelInfo = oCriticalityCalculation.ConstantThresholds[i];\n\n\t\t\t\t\tconst aVisibleDimensions: any = oAggregationLevelInfo.AggregationLevel ? [] : null;\n\n\t\t\t\t\tif (oAggregationLevelInfo.AggregationLevel && oAggregationLevelInfo.AggregationLevel.length > 0) {\n\t\t\t\t\t\tfor (j = 0; j < oAggregationLevelInfo.AggregationLevel.length; j++) {\n\t\t\t\t\t\t\taVisibleDimensions.push(oAggregationLevelInfo.AggregationLevel[j].$PropertyPath);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toAggregationLevel = {\n\t\t\t\t\t\tVisibleDimensions: aVisibleDimensions\n\t\t\t\t\t};\n\n\t\t\t\t\tfor (j = 0; j < aKeys.length; j++) {\n\t\t\t\t\t\tconst nValue = oAggregationLevelInfo[aKeys[j]];\n\t\t\t\t\t\tif (nValue) {\n\t\t\t\t\t\t\toAggregationLevel[aKeys[j]] = nValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toThresholds.AggregationLevels.push(oAggregationLevel);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn bConstant;\n\t}\n\n\tsetMeasureDataPoint = (measure: MeasureType, dataPoint: DataPoint | undefined) => {\n\t\tif (dataPoint && dataPoint.Value.$Path == measure.key) {\n\t\t\tmeasure.dataPoint = ChartHelper.formatJSONToString(this.createDataPointProperty(dataPoint)) || \"\";\n\t\t}\n\t};\n\n\tsetMeasureRole = (measure: MeasureType, role: ChartMeasureRoleType | undefined) => {\n\t\tif (role) {\n\t\t\tconst index = (role as any).$EnumMember;\n\t\t\tmeasure.role = measureRole[index];\n\t\t}\n\t};\n\n\tgetDependents = (chartContext: Context) => {\n\t\tif (this._commandActions.length > 0) {\n\t\t\treturn this._commandActions.map((commandAction: CommandAction) => {\n\t\t\t\treturn this.getActionCommand(commandAction, chartContext);\n\t\t\t});\n\t\t}\n\t\treturn \"\";\n\t};\n\n\t/**\n\t *\n\t * @param oProps Specifies the chart properties\n\t */\n\tcheckPersonalizationInChartProperties = (oProps: any) => {\n\t\tif (oProps.personalization) {\n\t\t\tif (oProps.personalization === \"false\") {\n\t\t\t\tthis.personalization = undefined;\n\t\t\t} else if (oProps.personalization === \"true\") {\n\t\t\t\tthis.personalization = Object.values(personalizationValues).join(\",\");\n\t\t\t} else if (this.verifyValidPersonlization(oProps.personalization) === true) {\n\t\t\t\tthis.personalization = oProps.personalization;\n\t\t\t} else {\n\t\t\t\tthis.personalization = undefined;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t *\n\t * @param personalization\n\t * @returns `true` or `false` if the personalization is valid or not valid\n\t */\n\tverifyValidPersonlization = (personalization: String) => {\n\t\tlet valid: Boolean = true;\n\t\tconst splitArray = personalization.split(\",\");\n\t\tconst acceptedValues: string[] = Object.values(personalizationValues);\n\t\tsplitArray.forEach((arrayElement) => {\n\t\t\tif (!acceptedValues.includes(arrayElement)) {\n\t\t\t\tvalid = false;\n\t\t\t}\n\t\t});\n\t\treturn valid;\n\t};\n\n\tgetVariantManagement = (oProps: any, oChartDefinition: ChartVisualization) => {\n\t\tlet variantManagement = oProps.variantManagement ? oProps.variantManagement : oChartDefinition.variantManagement;\n\t\tvariantManagement = this.personalization === undefined ? \"None\" : variantManagement;\n\t\treturn variantManagement;\n\t};\n\n\tcreateVariantManagement = () => {\n\t\tconst personalization = this.personalization;\n\t\tif (personalization) {\n\t\t\tconst variantManagement = this.variantManagement;\n\t\t\tif (variantManagement === \"Control\") {\n\t\t\t\treturn xml`\n\t\t\t\t\t<mdc:variant>\n\t\t\t\t\t<variant:VariantManagement\n\t\t\t\t\t\tid=\"${generate([this.id, \"VM\"])}\"\n\t\t\t\t\t\tfor=\"${this.id}\"\n\t\t\t\t\t\tshowSetAsDefault=\"${true}\"\n\t\t\t\t\t\tselect=\"${this.variantSelected}\"\n\t\t\t\t\t\theaderLevel=\"${this.headerLevel}\"\n\t\t\t\t\t\tsave=\"${this.variantSaved}\"\n\t\t\t\t\t/>\n\t\t\t\t\t</mdc:variant>\n\t\t\t`;\n\t\t\t} else if (variantManagement === \"None\" || variantManagement === \"Page\") {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t} else if (!personalization) {\n\t\t\tLog.warning(\"Variant Management cannot be enabled when personalization is disabled\");\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tgetPersistenceProvider = () => {\n\t\tif (this.variantManagement === \"None\") {\n\t\t\treturn xml`<p13n:PersistenceProvider id=\"${generate([this.id, \"PersistenceProvider\"])}\" for=\"${this.id}\"/>`;\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tpushActionCommand = (\n\t\tactionContext: Context,\n\t\tdataField: DataFieldForAction | undefined,\n\t\tchartOperationAvailableMap: string | undefined,\n\t\taction: BaseAction | CustomAction\n\t) => {\n\t\tif (dataField) {\n\t\t\tconst commandAction = {\n\t\t\t\tactionContext: actionContext,\n\t\t\t\tonExecuteAction: ChartHelper.getPressEventForDataFieldForActionButton(\n\t\t\t\t\tthis.id!,\n\t\t\t\t\tdataField,\n\t\t\t\t\tchartOperationAvailableMap || \"\"\n\t\t\t\t),\n\t\t\t\tonExecuteIBN: CommonHelper.getPressHandlerForDataFieldForIBN(dataField, `\\${internal>selectedContexts}`, false),\n\t\t\t\tonExecuteManifest: CommonHelper.buildActionWrapper(action as CustomAction, this)\n\t\t\t};\n\t\t\tthis._commandActions.push(commandAction);\n\t\t}\n\t};\n\n\tgetActionCommand = (commandAction: CommandAction, chartContext: Context) => {\n\t\tconst action = commandAction.actionContext.getObject();\n\t\tconst dataFieldContext = action.annotationPath && this.contextPath.getModel().createBindingContext(action.annotationPath);\n\t\tconst dataField = dataFieldContext && dataFieldContext.getObject();\n\t\tconst dataFieldAction = this.contextPath.getModel().createBindingContext(action.annotationPath + \"/Action\")!;\n\t\tconst actionContext = CommonHelper.getActionContext(dataFieldAction);\n\t\tconst isBoundPath = CommonHelper.getPathToBoundActionOverload(dataFieldAction);\n\t\tconst isBound = this.contextPath.getModel().createBindingContext(isBoundPath)!.getObject();\n\t\tconst chartOperationAvailableMap = escapeXMLAttributeValue(\n\t\t\tChartHelper.getOperationAvailableMap(chartContext.getObject(), {\n\t\t\t\tcontext: chartContext\n\t\t\t})\n\t\t);\n\t\tconst isActionEnabled = action.enabled\n\t\t\t? action.enabled\n\t\t\t: ChartHelper.isDataFieldForActionButtonEnabled(\n\t\t\t\t\tisBound && isBound.$IsBound,\n\t\t\t\t\tdataField.Action,\n\t\t\t\t\tthis.contextPath,\n\t\t\t\t\tchartOperationAvailableMap || \"\",\n\t\t\t\t\taction.enableOnSelect || \"\"\n\t\t\t  );\n\t\tlet isIBNEnabled;\n\t\tif (action.enabled) {\n\t\t\tisIBNEnabled = action.enabled;\n\t\t} else if (dataField.RequiresContext) {\n\t\t\tisIBNEnabled = \"{= %{internal>numberOfSelectedContexts} >= 1}\";\n\t\t}\n\t\tconst actionCommand = xml`<internalMacro:ActionCommand\n\t\taction=\"${action}\"\n\t\tonExecuteAction=\"${commandAction.onExecuteAction}\"\n\t\tonExecuteIBN=\"${commandAction.onExecuteIBN}\"\n\t\tonExecuteManifest=\"${commandAction.onExecuteManifest}\"\n\t\tisIBNEnabled=\"${isIBNEnabled}\"\n\t\tisActionEnabled=\"${isActionEnabled}\"\n\t\tvisible=\"${this.getVisible(dataFieldContext)}\"\n\t/>`;\n\t\tif (\n\t\t\taction.type == \"ForAction\" &&\n\t\t\t(!isBound || isBound.IsBound !== true || actionContext[`@${CoreAnnotationTerms.OperationAvailable}`] !== false)\n\t\t) {\n\t\t\treturn actionCommand;\n\t\t} else if (action.type == \"ForAction\") {\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\treturn actionCommand;\n\t\t}\n\t};\n\n\tgetItems = (chartContext: Context) => {\n\t\tif (this._chart) {\n\t\t\tconst dimensions: string[] = [];\n\t\t\tconst measures: string[] = [];\n\t\t\tif (this._chart.Dimensions) {\n\t\t\t\tChartHelper.formatDimensions(chartContext)\n\t\t\t\t\t.getObject()\n\t\t\t\t\t.forEach((dimension: DimensionType) => {\n\t\t\t\t\t\tdimension.id = generate([this.id, \"dimension\", dimension.key]);\n\t\t\t\t\t\tdimensions.push(\n\t\t\t\t\t\t\tthis.getItem(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: dimension.id,\n\t\t\t\t\t\t\t\t\tkey: dimension.key,\n\t\t\t\t\t\t\t\t\tlabel: dimension.label,\n\t\t\t\t\t\t\t\t\trole: dimension.role\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"_fe_groupable_\",\n\t\t\t\t\t\t\t\t\"groupable\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.measures) {\n\t\t\t\tChartHelper.formatMeasures(this.measures).forEach((measure: MeasureType) => {\n\t\t\t\t\tmeasure.id = generate([this.id, \"measure\", measure.key]);\n\t\t\t\t\tmeasures.push(\n\t\t\t\t\t\tthis.getItem(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: measure.id,\n\t\t\t\t\t\t\t\tkey: measure.key,\n\t\t\t\t\t\t\t\tlabel: measure.label,\n\t\t\t\t\t\t\t\trole: measure.role\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"_fe_aggregatable_\",\n\t\t\t\t\t\t\t\"aggregatable\"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (dimensions.length && measures.length) {\n\t\t\t\treturn dimensions.concat(measures);\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tgetItem = (item: MeasureType | DimensionType, prefix: string, type: string) => {\n\t\treturn xml`<chart:Item\n\t\t\tid=\"${item.id}\"\n\t\t\tname=\"${prefix + item.key}\"\n\t\t\ttype=\"${type}\"\n\t\t\tlabel=\"${resolveBindingString(item.label as string, \"string\")}\"\n\t\t\trole=\"${item.role}\"\n\t\t/>`;\n\t};\n\n\tgetToolbarActions = (chartContext: Context, isInsightsEnabled: boolean) => {\n\t\tconst actions = this.getActions(chartContext);\n\t\tif (this.chartDefinition?.onSegmentedButtonPressed) {\n\t\t\tactions.push(this.getSegmentedButton());\n\t\t}\n\t\tif (isInsightsEnabled) {\n\t\t\tactions.push(this.getStandardActions(isInsightsEnabled));\n\t\t}\n\t\tif (actions.length > 0) {\n\t\t\treturn xml`<mdc:actions>${actions}</mdc:actions>`;\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tgetStandardActions = (isInsightsEnabled: boolean) => {\n\t\tif (isInsightsEnabled) {\n\t\t\treturn xml`<mdcat:ActionToolbarAction visible=\"${isInsightsEnabled}\">\n\t\t\t\t<Button\n\t\t\t\t\ttext=\"{sap.fe.i18n>M_COMMON_INSIGHTS_CARD}\"\n\t\t\t\t\tcore:require=\"{API: 'sap/fe/macros/chart/ChartAPI'}\"\n\t\t\t\t\tpress=\"API.onAddCardToInsightsPressed($event)\"\n\t\t\t\t\tvisible=\"${isInsightsEnabled}\"\n\t\t\t\t\tenabled=\"${isInsightsEnabled}\"\n\t\t\t\t>\n\t\t\t\t\t<layoutData>\n\t\t\t\t\t\t<OverflowToolbarLayoutData priority=\"AlwaysOverflow\" />\n\t\t\t\t\t</layoutData>\n\t\t\t\t</Button>\n\t\t\t</mdcat:ActionToolbarAction>`;\n\t\t}\n\t};\n\n\tgetActions = (chartContext: Context) => {\n\t\tlet actions = this.chartActions?.getObject();\n\t\tactions = this.removeMenuItems(actions);\n\t\treturn actions.map((action: CustomAndAction) => {\n\t\t\tif (action.annotationPath) {\n\t\t\t\t// Load annotation based actions\n\t\t\t\treturn this.getAction(action, chartContext, false);\n\t\t\t} else if (action.hasOwnProperty(\"noWrap\")) {\n\t\t\t\t// Load XML or manifest based actions / action groups\n\t\t\t\treturn this.getCustomActions(action, chartContext);\n\t\t\t}\n\t\t});\n\t};\n\n\tremoveMenuItems = (actions: BaseAction[]) => {\n\t\t// If action is already part of menu in action group, then it will\n\t\t// be removed from the main actions list\n\t\tfor (const action of actions) {\n\t\t\tif (action.menu) {\n\t\t\t\taction.menu.forEach((item) => {\n\t\t\t\t\tif (actions.indexOf(item as BaseAction) !== -1) {\n\t\t\t\t\t\tactions.splice(actions.indexOf(item as BaseAction), 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn actions;\n\t};\n\n\tgetCustomActions = (action: CustomAndAction, chartContext: Context) => {\n\t\tlet actionEnabled = action.enabled as string | boolean;\n\t\tif ((action.requiresSelection ?? false) && action.enabled === \"true\") {\n\t\t\tactionEnabled = \"{= %{internal>numberOfSelectedContexts} >= 1}\";\n\t\t}\n\t\tif (action.type === \"Default\") {\n\t\t\t// Load XML or manifest based toolbar actions\n\t\t\treturn this.getActionToolbarAction(\n\t\t\t\taction,\n\t\t\t\t{\n\t\t\t\t\tid: generate([this.id, action.id]),\n\t\t\t\t\tunittestid: \"DataFieldForActionButtonAction\",\n\t\t\t\t\tlabel: action.text ? action.text : \"\",\n\t\t\t\t\tariaHasPopup: undefined,\n\t\t\t\t\tpress: action.press ? action.press : \"\",\n\t\t\t\t\tenabled: actionEnabled,\n\t\t\t\t\tvisible: action.visible ? action.visible : false\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t);\n\t\t} else if (action.type === \"Menu\") {\n\t\t\t// Load action groups (Menu)\n\t\t\treturn this.getActionToolbarMenuAction(\n\t\t\t\t{\n\t\t\t\t\tid: generate([this.id, action.id]),\n\t\t\t\t\ttext: action.text,\n\t\t\t\t\tvisible: action.visible,\n\t\t\t\t\tenabled: actionEnabled,\n\t\t\t\t\tuseDefaultActionOnly: DefaultActionHandler.getUseDefaultActionOnly(action),\n\t\t\t\t\tbuttonMode: DefaultActionHandler.getButtonMode(action),\n\t\t\t\t\tdefaultAction: undefined,\n\t\t\t\t\tactions: action\n\t\t\t\t},\n\t\t\t\tchartContext\n\t\t\t);\n\t\t}\n\t};\n\n\tgetMenuItemFromMenu = (menuItemAction: CustomAction, chartContext: Context) => {\n\t\tlet pressHandler;\n\t\tif (menuItemAction.annotationPath) {\n\t\t\t//Annotation based action is passed as menu item for menu button\n\t\t\treturn this.getAction(menuItemAction, chartContext, true);\n\t\t}\n\t\tif (menuItemAction.command) {\n\t\t\tpressHandler = \"cmd:\" + menuItemAction.command;\n\t\t} else if (menuItemAction.noWrap ?? false) {\n\t\t\tpressHandler = menuItemAction.press;\n\t\t} else {\n\t\t\tpressHandler = CommonHelper.buildActionWrapper(menuItemAction, this);\n\t\t}\n\t\treturn xml`<MenuItem\n\t\tcore:require=\"{FPM: 'sap/fe/core/helpers/FPMHelper'}\"\n\t\ttext=\"${menuItemAction.text}\"\n\t\tpress=\"${pressHandler}\"\n\t\tvisible=\"${menuItemAction.visible}\"\n\t\tenabled=\"${menuItemAction.enabled}\"\n\t/>`;\n\t};\n\n\tgetActionToolbarMenuAction = (props: CustomToolbarMenuAction, chartContext: Context) => {\n\t\tconst aMenuItems = props.actions?.menu?.map((action: CustomAction) => {\n\t\t\treturn this.getMenuItemFromMenu(action, chartContext);\n\t\t});\n\t\treturn xml`<mdcat:ActionToolbarAction>\n\t\t\t<MenuButton\n\t\t\ttext=\"${props.text}\"\n\t\t\ttype=\"Transparent\"\n\t\t\tmenuPosition=\"BeginBottom\"\n\t\t\tid=\"${props.id}\"\n\t\t\tvisible=\"${props.visible}\"\n\t\t\tenabled=\"${props.enabled}\"\n\t\t\tuseDefaultActionOnly=\"${props.useDefaultActionOnly}\"\n\t\t\tbuttonMode=\"${props.buttonMode}\"\n\t\t\tdefaultAction=\"${props.defaultAction}\"\n\t\t\t>\n\t\t\t\t<menu>\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t${aMenuItems}\n\t\t\t\t\t</Menu>\n\t\t\t\t</menu>\n\t\t\t</MenuButton>\n\t\t</mdcat:ActionToolbarAction>`;\n\t};\n\n\tgetAction = (action: BaseAction, chartContext: Context, isMenuItem: boolean) => {\n\t\tconst dataFieldContext = this.contextPath.getModel().createBindingContext(action.annotationPath || \"\")!;\n\t\tif (action.type === \"ForNavigation\") {\n\t\t\treturn this.getNavigationActions(action, dataFieldContext, isMenuItem);\n\t\t} else if (action.type === \"ForAction\") {\n\t\t\treturn this.getAnnotationActions(chartContext, action as AnnotationAction, dataFieldContext, isMenuItem);\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tgetNavigationActions = (action: BaseAction, dataFieldContext: Context, isMenuItem: boolean) => {\n\t\tlet enabled = \"true\";\n\t\tconst dataField = dataFieldContext.getObject();\n\t\tif (action.enabled !== undefined) {\n\t\t\tenabled = action.enabled;\n\t\t} else if (dataField.RequiresContext) {\n\t\t\tenabled = \"{= %{internal>numberOfSelectedContexts} >= 1}\";\n\t\t}\n\t\treturn this.getActionToolbarAction(\n\t\t\taction,\n\t\t\t{\n\t\t\t\tid: undefined,\n\t\t\t\tunittestid: \"DataFieldForIntentBasedNavigationButtonAction\",\n\t\t\t\tlabel: dataField.Label,\n\t\t\t\tariaHasPopup: undefined,\n\t\t\t\tpress: CommonHelper.getPressHandlerForDataFieldForIBN(dataField, `\\${internal>selectedContexts}`, false)!,\n\t\t\t\tenabled: enabled,\n\t\t\t\tvisible: this.getVisible(dataFieldContext)\n\t\t\t},\n\t\t\tisMenuItem\n\t\t);\n\t};\n\n\tgetAnnotationActions = (chartContext: Context, action: AnnotationAction, dataFieldContext: Context, isMenuItem: boolean) => {\n\t\tconst dataFieldAction = this.contextPath.getModel().createBindingContext(action.annotationPath + \"/Action\")!;\n\t\tconst actionContext = this.contextPath.getModel().createBindingContext(CommonHelper.getActionContext(dataFieldAction));\n\t\tconst actionObject = actionContext.getObject();\n\t\tconst isBoundPath = CommonHelper.getPathToBoundActionOverload(dataFieldAction);\n\t\tconst isBound = this.contextPath.getModel().createBindingContext(isBoundPath)!.getObject();\n\t\tconst dataField = dataFieldContext.getObject();\n\t\tif (!isBound || isBound.$IsBound !== true || actionObject[`@${CoreAnnotationTerms.OperationAvailable}`] !== false) {\n\t\t\tconst enabled = this.getAnnotationActionsEnabled(action, isBound, dataField, chartContext);\n\t\t\tconst dataFieldModelObjectPath = getInvolvedDataModelObjects(\n\t\t\t\tthis.contextPath.getModel().createBindingContext(action.annotationPath)!\n\t\t\t);\n\t\t\tconst ariaHasPopup = isDataModelObjectPathForActionWithDialog(dataFieldModelObjectPath);\n\t\t\tconst chartOperationAvailableMap =\n\t\t\t\tescapeXMLAttributeValue(\n\t\t\t\t\tChartHelper.getOperationAvailableMap(chartContext.getObject(), {\n\t\t\t\t\t\tcontext: chartContext\n\t\t\t\t\t})\n\t\t\t\t) || \"\";\n\t\t\treturn this.getActionToolbarAction(\n\t\t\t\taction,\n\t\t\t\t{\n\t\t\t\t\tid: generate([this.id, getInvolvedDataModelObjects(dataFieldContext)]),\n\t\t\t\t\tunittestid: \"DataFieldForActionButtonAction\",\n\t\t\t\t\tlabel: dataField.Label,\n\t\t\t\t\tariaHasPopup: ariaHasPopup,\n\t\t\t\t\tpress: ChartHelper.getPressEventForDataFieldForActionButton(this.id!, dataField, chartOperationAvailableMap),\n\t\t\t\t\tenabled: enabled,\n\t\t\t\t\tvisible: this.getVisible(dataFieldContext)\n\t\t\t\t},\n\t\t\t\tisMenuItem\n\t\t\t);\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tgetActionToolbarAction = (action: BaseAction & { noWrap?: boolean }, toolbarAction: ToolBarAction, isMenuItem: boolean) => {\n\t\tif (isMenuItem) {\n\t\t\treturn xml`\n\t\t\t<MenuItem\n\t\t\t\ttext=\"${toolbarAction.label}\"\n\t\t\t\tpress=\"${action.command ? \"cmd:\" + action.command : toolbarAction.press}\"\n\t\t\t\tenabled=\"${toolbarAction.enabled}\"\n\t\t\t\tvisible=\"${toolbarAction.visible}\"\n\t\t\t/>`;\n\t\t} else {\n\t\t\treturn this.buildAction(action, toolbarAction);\n\t\t}\n\t};\n\n\tbuildAction = (action: BaseAction | CustomAction, toolbarAction: ToolBarAction) => {\n\t\tlet actionPress: string | undefined = \"\";\n\t\tif (action.hasOwnProperty(\"noWrap\")) {\n\t\t\tif (action.command) {\n\t\t\t\tactionPress = \"cmd:\" + action.command;\n\t\t\t} else if ((action as CustomAction).noWrap === true) {\n\t\t\t\tactionPress = toolbarAction.press;\n\t\t\t} else if (!action.annotationPath) {\n\t\t\t\tactionPress = CommonHelper.buildActionWrapper(action as CustomAction, this);\n\t\t\t}\n\t\t\treturn xml`<mdcat:ActionToolbarAction>\n\t\t\t<Button\n\t\t\t\tcore:require=\"{FPM: 'sap/fe/core/helpers/FPMHelper'}\"\n\t\t\t\tunittest:id=\"${toolbarAction.unittestid}\"\n\t\t\t\tid=\"${toolbarAction.id}\"\n\t\t\t\ttext=\"${toolbarAction.label}\"\n\t\t\t\tariaHasPopup=\"${toolbarAction.ariaHasPopup}\"\n\t\t\t\tpress=\"${actionPress}\"\n\t\t\t\tenabled=\"${toolbarAction.enabled}\"\n\t\t\t\tvisible=\"${toolbarAction.visible}\"\n\t\t\t/>\n\t\t   </mdcat:ActionToolbarAction>`;\n\t\t} else {\n\t\t\treturn xml`<mdcat:ActionToolbarAction>\n\t\t\t<Button\n\t\t\t\tunittest:id=\"${toolbarAction.unittestid}\"\n\t\t\t\tid=\"${toolbarAction.id}\"\n\t\t\t\ttext=\"${toolbarAction.label}\"\n\t\t\t\tariaHasPopup=\"${toolbarAction.ariaHasPopup}\"\n\t\t\t\tpress=\"${action.command ? \"cmd:\" + action.command : toolbarAction.press}\"\n\t\t\t\tenabled=\"${toolbarAction.enabled}\"\n\t\t\t\tvisible=\"${toolbarAction.visible}\"\n\t\t\t/>\n\t\t</mdcat:ActionToolbarAction>`;\n\t\t}\n\t};\n\n\tgetAnnotationActionsEnabled = (\n\t\taction: BaseAction,\n\t\tisBound: Record<string, boolean>,\n\t\tdataField: DataFieldForAction,\n\t\tchartContext: Context\n\t) => {\n\t\treturn action.enabled !== undefined\n\t\t\t? action.enabled\n\t\t\t: ChartHelper.isDataFieldForActionButtonEnabled(\n\t\t\t\t\tisBound && isBound.$IsBound,\n\t\t\t\t\tdataField.Action as string,\n\t\t\t\t\tthis.contextPath,\n\t\t\t\t\tChartHelper.getOperationAvailableMap(chartContext.getObject(), { context: chartContext }),\n\t\t\t\t\taction.enableOnSelect || \"\"\n\t\t\t  );\n\t};\n\n\tgetSegmentedButton = () => {\n\t\treturn xml`<mdcat:ActionToolbarAction layoutInformation=\"{\n\t\t\taggregationName: 'end',\n\t\t\talignment: 'End'\n\t\t}\">\n\t\t\t<SegmentedButton\n\t\t\t\tid=\"${generate([this.id, \"SegmentedButton\", \"TemplateContentView\"])}\"\n\t\t\t\tselect=\"${this.chartDefinition!.onSegmentedButtonPressed}\"\n\t\t\t\tvisible=\"{= \\${pageInternal>alpContentView} !== 'Table' }\"\n\t\t\t\tselectedKey=\"{pageInternal>alpContentView}\"\n\t\t\t>\n\t\t\t\t<items>\n\t\t\t\t\t${this.getSegmentedButtonItems()}\n\t\t\t\t</items>\n\t\t\t</SegmentedButton>\n\t\t</mdcat:ActionToolbarAction>`;\n\t};\n\n\tgetSegmentedButtonItems = () => {\n\t\tconst segmentedButtonItems = [];\n\t\tif (CommonHelper.isDesktop()) {\n\t\t\tsegmentedButtonItems.push(\n\t\t\t\tthis.getSegmentedButtonItem(\n\t\t\t\t\t\"{sap.fe.i18n>M_COMMON_HYBRID_SEGMENTED_BUTTON_ITEM_TOOLTIP}\",\n\t\t\t\t\t\"Hybrid\",\n\t\t\t\t\t\"sap-icon://chart-table-view\"\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tsegmentedButtonItems.push(\n\t\t\tthis.getSegmentedButtonItem(\"{sap.fe.i18n>M_COMMON_CHART_SEGMENTED_BUTTON_ITEM_TOOLTIP}\", \"Chart\", \"sap-icon://bar-chart\")\n\t\t);\n\t\tsegmentedButtonItems.push(\n\t\t\tthis.getSegmentedButtonItem(\"{sap.fe.i18n>M_COMMON_TABLE_SEGMENTED_BUTTON_ITEM_TOOLTIP}\", \"Table\", \"sap-icon://table-view\")\n\t\t);\n\t\treturn segmentedButtonItems;\n\t};\n\n\tgetSegmentedButtonItem = (tooltip: string, key: string, icon: string) => {\n\t\treturn xml`<SegmentedButtonItem\n\t\t\ttooltip=\"${tooltip}\"\n\t\t\tkey=\"${key}\"\n\t\t\ticon=\"${icon}\"\n\t\t/>`;\n\t};\n\n\t/**\n\t * Returns the annotation path pointing to the visualization annotation (Chart).\n\t *\n\t * @param props The chart properties\n\t * @param contextObjectPath The datamodel object path for the chart\n\t * @param converterContext The converter context\n\t * @returns The annotation path\n\t */\n\tstatic getVisualizationPath = (\n\t\tprops: PropertiesOf<ChartBlock>,\n\t\tcontextObjectPath: DataModelObjectPath,\n\t\tconverterContext: ConverterContext\n\t) => {\n\t\tconst metaPath = getContextRelativeTargetObjectPath(contextObjectPath);\n\n\t\t// fallback to default Chart if metapath is not set\n\t\tif (!metaPath) {\n\t\t\tLog.error(`Missing metapath parameter for Chart`);\n\t\t\treturn `@${UIAnnotationTerms.Chart}`;\n\t\t}\n\n\t\tif (contextObjectPath.targetObject.term === UIAnnotationTerms.Chart) {\n\t\t\treturn metaPath; // MetaPath is already pointing to a Chart\n\t\t}\n\n\t\t//Need to switch to the context related the PV or SPV\n\t\tconst resolvedTarget = converterContext.getEntityTypeAnnotation(metaPath);\n\n\t\tlet visualizations: VisualizationAndPath[] = [];\n\t\tswitch (contextObjectPath.targetObject?.term) {\n\t\t\tcase UIAnnotationTerms.SelectionPresentationVariant:\n\t\t\t\tif (contextObjectPath.targetObject.PresentationVariant) {\n\t\t\t\t\tvisualizations = getVisualizationsFromPresentationVariant(\n\t\t\t\t\t\tcontextObjectPath.targetObject.PresentationVariant,\n\t\t\t\t\t\tmetaPath,\n\t\t\t\t\t\tresolvedTarget.converterContext,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTerms.PresentationVariant:\n\t\t\t\tvisualizations = getVisualizationsFromPresentationVariant(\n\t\t\t\t\tcontextObjectPath.targetObject,\n\t\t\t\t\tmetaPath,\n\t\t\t\t\tresolvedTarget.converterContext,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst chartViz = visualizations.find((viz) => {\n\t\t\treturn viz.visualization.term === UIAnnotationTerms.Chart;\n\t\t});\n\n\t\tif (chartViz) {\n\t\t\treturn chartViz.annotationPath;\n\t\t} else {\n\t\t\t// fallback to default Chart if annotation missing in PV\n\t\t\tLog.error(`Bad metapath parameter for chart: ${contextObjectPath.targetObject.term}`);\n\t\t\treturn `@${UIAnnotationTerms.Chart}`;\n\t\t}\n\t};\n\n\tgetVisible = (dataFieldContext: Context) => {\n\t\tconst dataField = dataFieldContext.getObject();\n\t\tif (dataField[`@${UIAnnotationTerms.Hidden}`] && dataField[`@${UIAnnotationTerms.Hidden}`].$Path) {\n\t\t\tconst hiddenPathContext = this.contextPath\n\t\t\t\t.getModel()\n\t\t\t\t.createBindingContext(\n\t\t\t\t\tdataFieldContext.getPath() + `/@${UIAnnotationTerms.Hidden}/$Path`,\n\t\t\t\t\tdataField[`@${UIAnnotationTerms.Hidden}`].$Path\n\t\t\t\t);\n\t\t\treturn ChartHelper.getHiddenPathExpressionForTableActionsAndIBN(dataField[`@${UIAnnotationTerms.Hidden}`].$Path, {\n\t\t\t\tcontext: hiddenPathContext\n\t\t\t});\n\t\t} else if (dataField[`@${UIAnnotationTerms.Hidden}`]) {\n\t\t\treturn !dataField[`@${UIAnnotationTerms.Hidden}`];\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t};\n\n\tgetContextPath = () => {\n\t\treturn this.contextPath.getPath().lastIndexOf(\"/\") === this.contextPath.getPath().length - 1\n\t\t\t? this.contextPath.getPath().replaceAll(\"/\", \"\")\n\t\t\t: this.contextPath.getPath().split(\"/\")[this.contextPath.getPath().split(\"/\").length - 1];\n\t};\n\n\tgetTemplate() {\n\t\tlet chartdelegate = \"\";\n\n\t\tif (this._customData.targetCollectionPath === \"\") {\n\t\t\tthis.noDataText = this.getTranslatedText(\"M_CHART_NO_ANNOTATION_SET_TEXT\");\n\t\t}\n\n\t\tif (this.chartDelegate) {\n\t\t\tchartdelegate = this.chartDelegate;\n\t\t} else {\n\t\t\tconst contextPath = this.getContextPath();\n\t\t\tchartdelegate =\n\t\t\t\t\"{name:'sap/fe/macros/chart/ChartDelegate', payload: {collectionName: '\" +\n\t\t\t\tcontextPath +\n\t\t\t\t\"', contextPath: '\" +\n\t\t\t\tcontextPath +\n\t\t\t\t\"', parameters:{$$groupId:'$auto.Workers'}, selectionMode: '\" +\n\t\t\t\tthis.selectionMode +\n\t\t\t\t\"'}}\";\n\t\t}\n\t\tconst binding = \"{internal>controls/\" + this.id + \"}\";\n\t\tif (!this.header) {\n\t\t\tthis.header = this._chart?.Title?.toString();\n\t\t}\n\t\treturn xml`\n\t\t\t<macro:ChartAPI xmlns=\"sap.m\" xmlns:macro=\"sap.fe.macros.chart\" xmlns:variant=\"sap.ui.fl.variants\" xmlns:p13n=\"sap.ui.mdc.p13n\" xmlns:unittest=\"http://schemas.sap.com/sapui5/preprocessorextension/sap.fe.unittesting/1\" xmlns:macrodata=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\" xmlns:internalMacro=\"sap.fe.macros.internal\" xmlns:chart=\"sap.ui.mdc.chart\" xmlns:mdc=\"sap.ui.mdc\" xmlns:mdcat=\"sap.ui.mdc.actiontoolbar\" xmlns:core=\"sap.ui.core\" id=\"${\n\t\t\t\tthis._apiId\n\t\t\t}\" selectionChange=\"${this.selectionChange}\" stateChange=\"${this.stateChange}\">\n\t\t\t\t<macro:layoutData>\n\t\t\t\t\t<FlexItemData growFactor=\"1\" shrinkFactor=\"1\" />\n\t\t\t\t</macro:layoutData>\n\t\t\t\t<mdc:Chart\n\t\t\t\t\tbinding=\"${binding}\"\n\t\t\t\t\tunittest:id=\"ChartMacroFragment\"\n\t\t\t\t\tid=\"${this._contentId}\"\n\t\t\t\t\tchartType=\"${this._chartType}\"\n\t\t\t\t\tsortConditions=\"${this._sortCondtions}\"\n\t\t\t\t\theader=\"${this.header}\"\n\t\t\t\t\theaderVisible=\"${this.headerVisible}\"\n\t\t\t\t\theight=\"${this.height}\"\n\t\t\t\t\twidth=\"${this.width}\"\n\t\t\t\t\theaderLevel=\"${this.headerLevel}\"\n\t\t\t\t\tp13nMode=\"${this.personalization}\"\n\t\t\t\t\tfilter=\"${this.filter}\"\n\t\t\t\t\tnoDataText=\"${this.noDataText}\"\n\t\t\t\t\tautoBindOnInit=\"${this.autoBindOnInit}\"\n\t\t\t\t\tdelegate=\"${chartdelegate}\"\n\t\t\t\t\tmacrodata:targetCollectionPath=\"${this._customData.targetCollectionPath}\"\n\t\t\t\t\tmacrodata:entitySet=\"${this._customData.entitySet}\"\n\t\t\t\t\tmacrodata:entityType=\"${this._customData.entityType}\"\n\t\t\t\t\tmacrodata:operationAvailableMap=\"${this._customData.operationAvailableMap}\"\n\t\t\t\t\tmacrodata:multiSelectDisabledActions=\"${this._customData.multiSelectDisabledActions}\"\n\t\t\t\t\tmacrodata:segmentedButtonId=\"${this._customData.segmentedButtonId}\"\n\t\t\t\t\tmacrodata:customAgg=\"${this._customData.customAgg}\"\n\t\t\t\t\tmacrodata:transAgg=\"${this._customData.transAgg}\"\n\t\t\t\t\tmacrodata:applySupported=\"${this._customData.applySupported}\"\n\t\t\t\t\tmacrodata:vizProperties=\"${this._customData.vizProperties}\"\n\t\t\t\t\tmacrodata:draftSupported=\"${this._customData.draftSupported}\"\n\t\t\t\t\tmacrodata:multiViews=\"${this._customData.multiViews}\"\n\t\t\t\t\tmacrodata:selectionPresentationVariantPath=\"${this._customData.selectionPresentationVariantPath}\"\n\t\t\t\t\tvisible=\"${this.visible}\"\n\t\t\t\t>\n\t\t\t\t<mdc:dependents>\n\t\t\t\t\t${this.getDependents(this._chartContext)}\n\t\t\t\t\t${this.getPersistenceProvider()}\n\t\t\t\t</mdc:dependents>\n\t\t\t\t<mdc:items>\n\t\t\t\t\t${this.getItems(this._chartContext)}\n\t\t\t\t</mdc:items>\n\t\t\t\t${this._actions}\n\t\t\t\t${this.createVariantManagement()}\n\t\t\t</mdc:Chart>\n\t\t</macro:ChartAPI>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":2844,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","uid","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","DataField","DataVisualization","Aggregation","MetaModelConverter","BindingToolkit","ModelHelper","StableIdHelper","DataModelPathHelper","CommonHelper","library","JSONModel","ActionHelper","DefaultActionHandler","ChartHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","_class3","_exports","TitleLevel","getContextRelativeTargetObjectPath","generate","resolveBindingString","getInvolvedDataModelObjects","AggregationHelper","getVisualizationsFromPresentationVariant","getDataVisualizationConfiguration","isDataModelObjectPathForActionWithDialog","xml","escapeXMLAttributeValue","defineBuildingBlock","blockEvent","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","measureRole","personalizationValues","setCustomActionProperties","childAction","_action$getAttribute","menuContentActions","action","menuActions","actionKey","getAttribute","replace","children","length","localName","namespaceURI","indexOf","actionsToAdd","Array","apply","actionIdx","customAction","actToAdd","_actToAdd$getAttribut","actionKeyAdd","curOutObject","text","__noWrap","press","requiresSelection","enabled","values","map","menuItem","position","placement","anchor","menu","ChartBlock","name","namespace","publicNamespace","returnTypes","type","isPublic","processAggregations","_BuildingBlockBase","_props","configuration","_settings","_this","this","_commandActions","createChartDefinition","converterContext","contextObjectPath","controlPath","_this$metaPath","_this$metaPath$getObj","visualizationPath","metaPath","getObject","$Type","visualizations","Visualizations","checkChartVisualizationPath","visualizationDefinition","useCondensedLayout","createBindingContext","data","settings","contextPath","models","setProperty","getChartMeasures","props","aggregationHelper","chartAnnotationPath","chartDefinition","annotationPath","split","filter","item","pos","toString","replaceAll","oChart","getModel","targetObject","aggregatedProperty","getAggregatedProperties","measures","annoPath","getPath","aggregatedProperties","chartMeasures","Measures","chartDynamicMeasures","DynamicMeasures","transAggInMeasures","properties","some","propertyMeasureType","Name","entitySetPath","transAggregations","transAgg","customAggregations","customAgg","warning","isCustomAggregateIsMeasure","oChartMeasure","oCustomAggMeasure","getCustomAggMeasure","dynamicMeasure","getDynamicMeasures","chartMeasure","customAggMeasure","measureType","setCustomAggMeasure","setTransAggMeasure","setChartMeasureAttributes","_chart","MeasureAttributes","measuresModel","$$valueAsPromise","measure","error","role","label","propertyPath","push","transAggMeasure","aggregationMethod","chartDynamicMeasure","chart","_chartDynamicMeasure$","startsWith","_aggregatedProperty$a","AggregatableProperty","AggregationMethod","annotations","Common","Label","_customAggregations$m","measureAttributes","measureAttribute","_setChartMeasureAttribute","_measureAttribute$Dyn","_measureAttribute$Mea","_measureAttribute$Dat","path","DynamicMeasure","Measure","measureAttributeDataPoint","DataPoint","Role","dataPoint","setMeasureRole","setMeasureDataPoint","Value","$Path","formatJSONToString","createDataPointProperty","index","$EnumMember","getDependents","chartContext","commandAction","getActionCommand","checkPersonalizationInChartProperties","oProps","personalization","join","verifyValidPersonlization","valid","splitArray","acceptedValues","arrayElement","includes","getVariantManagement","oChartDefinition","variantManagement","createVariantManagement","id","variantSelected","headerLevel","variantSaved","getPersistenceProvider","pushActionCommand","actionContext","dataField","chartOperationAvailableMap","onExecuteAction","getPressEventForDataFieldForActionButton","onExecuteIBN","getPressHandlerForDataFieldForIBN","onExecuteManifest","buildActionWrapper","dataFieldContext","dataFieldAction","getActionContext","isBoundPath","getPathToBoundActionOverload","isBound","getOperationAvailableMap","isActionEnabled","isDataFieldForActionButtonEnabled","$IsBound","Action","enableOnSelect","isIBNEnabled","RequiresContext","actionCommand","getVisible","IsBound","getItems","dimensions","Dimensions","formatDimensions","dimension","getItem","formatMeasures","concat","prefix","getToolbarActions","isInsightsEnabled","_this$chartDefinition","actions","getActions","onSegmentedButtonPressed","getSegmentedButton","getStandardActions","_this$chartActions","chartActions","removeMenuItems","getAction","hasOwnProperty","getCustomActions","splice","actionEnabled","getActionToolbarAction","unittestid","ariaHasPopup","visible","getActionToolbarMenuAction","useDefaultActionOnly","getUseDefaultActionOnly","buttonMode","getButtonMode","defaultAction","getMenuItemFromMenu","menuItemAction","pressHandler","command","noWrap","_props$actions","_props$actions$menu","aMenuItems","isMenuItem","getNavigationActions","getAnnotationActions","actionObject","getAnnotationActionsEnabled","dataFieldModelObjectPath","toolbarAction","buildAction","actionPress","getSegmentedButtonItems","segmentedButtonItems","isDesktop","getSegmentedButtonItem","tooltip","icon","hiddenPathContext","getHiddenPathExpressionForTableActionsAndIBN","getContextPath","lastIndexOf","_contextObjectPath","initialConverterContext","getConverterContext","_visualizationPath","getVisualizationPath","extraParams","getExtraParams","_converterContext","_aggregationHelper","getEntityType","_chartContext","getUiChart","_applyIdToContent","_apiId","_contentId","getContentId","_this$chartDefinition2","_contextObjectPath$co","_this$chartDefinition5","_this$chartDefinition6","_this$chartDefinition7","_this$chartDefinition8","_this$chartDefinition9","navigationPath","autoBindOnInit","vizProperties","selectionMode","toUpperCase","filterBar","filterId","draftSupported","isDraftSupported","metaModel","_chartType","formatChartType","ChartType","operationAvailableMap","commandActions","_this$chartDefinition3","_this$chartDefinition4","presentationPath","createPresentationPathContext","_sortCondtions","getSortConditions","applySupported","chartActionsContext","Actions","contextPathContext","contextPathPath","targetCollectionPath","getTargetCollectionPath","targetCollectionPathContext","actionsObject","convertedTypes","resolvePath","_customData","entitySet","entityType","stringifyCustomData","JSON","parse","multiSelectDisabledActions","getMultiSelectDisabledActions","segmentedButtonId","multiViews","selectionPresentationVariantPath","_actions","_proto","macroId","_Object$values","oDataPointAnno","oDataPoint","TargetValue","targetValue","ForeCastValue","foreCastValue","oCriticality","Criticality","Calculated","Static","CriticalityCalculation","oThresholds","bConstant","buildThresholds","ConstantThresholds","DynamicThresholds","criticality","oCriticalityCalculation","aKeys","sKey","i","j","ImprovementDirection","oDynamicThresholds","oneSupplied","usedMeasures","oConstantThresholds","oAggregationLevel","AggregationLevels","VisibleDimensions","oAggregationLevelInfo","aVisibleDimensions","AggregationLevel","$PropertyPath","nValue","getTemplate","chartdelegate","noDataText","getTranslatedText","chartDelegate","binding","header","_this$_chart","_this$_chart$Title","Title","selectionChange","stateChange","headerVisible","height","width","visualization","$AnnotationPath","_contextObjectPath$ta","term","resolvedTarget","getEntityTypeAnnotation","PresentationVariant","chartViz","find","viz","Auto"],"sources":["Chart.block-dbg.js"],"mappings":"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","sourceRoot":"chart"}},{"offset":{"line":3001,"column":0},"map":{"version":3,"names":["ChartAPI","defineUI5Class","returnTypes","property","type","required","expectedTypes","expectedAnnotations","defaultValue","allowedValues","aggregation","multiple","event","xmlEventHandler","getSelectedContexts","content","getBindingContext","getProperty","onAfterRendering","view","getController","getView","internalModelContext","chart","getContent","showMessageStrip","sChartEntityPath","data","sCacheKey","oBindingContext","getObject","setProperty","refreshNotApplicableFields","oFilterControl","oChart","FilterUtils","getNotApplicableFilters","handleSelectionChange","oEvent","aData","getParameter","bSelected","ChartRuntime","fnUpdateChart","fireSelectionChange","merge","selected","onInternalDataRequested","fireEvent","hasSelections","mdcChart","getControlDelegate","getInnerChart","aDimensions","ChartUtils","getDimensionsFromDrillStack","bIsDrillDown","length","prevDrillStack","bIsDrillUp","bNoChange","toString","aFilters","getChartSelections","err","Log","error","onAddCardToInsightsPressed","insightsParams","createInsightsParams","IntegrationCardType","analytical","showInsightsCardPreview","e","genericErrorMessageForInsightsCard","MacroAPI"],"sourceRoot":"chart","sources":["ChartAPI.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport merge from \"sap/base/util/merge\";\nimport type { default as Chart } from \"sap/chart/Chart\";\nimport { aggregation, defineUI5Class, event, property, xmlEventHandler } from \"sap/fe/core/helpers/ClassSupport\";\nimport ChartRuntime from \"sap/fe/macros/chart/ChartRuntime\";\nimport ChartUtils from \"sap/fe/macros/chart/ChartUtils\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport MacroAPI from \"sap/fe/macros/MacroAPI\";\nimport UI5Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport type MDCChart from \"sap/ui/mdc/Chart\";\nimport Filter from \"sap/ui/model/Filter\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport { createInsightsParams } from \"../insights/CommonInsightsHelper\";\nimport { genericErrorMessageForInsightsCard, IntegrationCardType, showInsightsCardPreview } from \"../insights/InsightsCardHelper\";\n/**\n * Definition of a custom action to be used inside the chart toolbar\n *\n * @alias sap.fe.macros.chart.Action\n * @public\n */\nexport type Action = {\n\t/**\n\t * Unique identifier of the action\n\t *\n\t * @public\n\t */\n\tkey: string;\n\t/**\n\t * The text that will be displayed for this action\n\t *\n\t * @public\n\t */\n\ttext: string;\n\t/**\n\t * Reference to the key of another action already displayed in the toolbar to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n\t/**\n\t * Defines where this action should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: \"Before\" | \"After\";\n\t/**\n\t * Defines if the action requires a selection.\n\t *\n\t * @public\n\t */\n\trequiresSelection?: boolean;\n\t/**\n\t * Event handler to be called when the user chooses the action\n\t *\n\t * @public\n\t */\n\tpress: string;\n\t/**\n\t * Enables or disables the action\n\t *\n\t * @public\n\t */\n\tenabled?: boolean;\n};\n/**\n * Definition of a custom action group to be used inside the chart toolbar\n *\n * @alias sap.fe.macros.chart.ActionGroup\n * @public\n */\nexport type ActionGroup = {\n\t/**\n\t * Unique identifier of the action\n\t *\n\t * @public\n\t */\n\tkey: string;\n\t/**\n\t * Defines nested actions\n\t *\n\t * @public\n\t */\n\tactions: Action[];\n\t/**\n\t * The text that will be displayed for this action group\n\t *\n\t * @public\n\t */\n\ttext: string;\n\t/**\n\t * Defines where this action group should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: \"Before\" | \"After\";\n\t/**\n\t * Reference to the key of another action or action group already displayed in the toolbar to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n};\n\n/**\n * Building block used to create a chart based on the metadata provided by OData V4.\n * <br>\n * Usually, a contextPath and metaPath is expected.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Chart id=\"Mychart\" contextPath=\"/RootEntity\" metaPath=\"@com.sap.vocabularies.UI.v1.Chart\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.Chart\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.chart.ChartAPI\", { returnTypes: [\"sap.fe.macros.MacroAPI\"] })\nclass ChartAPI extends MacroAPI {\n\t/**\n\t *\n\t * ID of the chart\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * Metadata path to the presentation context (UI.Chart with or without a qualifier)\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"],\n\t\texpectedAnnotations: [\"com.sap.vocabularies.UI.v1.Chart\"]\n\t})\n\tmetaPath!: string;\n\n\t/**\n\t * Metadata path to the entitySet or navigationProperty\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"],\n\t\texpectedAnnotations: []\n\t})\n\tcontextPath!: string;\n\n\t/**\n\t * Specifies the header text that is shown in the chart\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\theader!: string;\n\n\t/**\n\t * Controls if the header text should be shown or not\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\theaderVisible!: boolean;\n\n\t/**\n\t * Defines the selection mode to be used by the chart.\n\t *\n\t * Allowed values are `None`, `Single` or `Multiple`\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\", defaultValue: \"Multiple\", allowedValues: [\"None\", \"Single\", \"Multiple\"] })\n\tselectionMode!: string;\n\n\t/**\n\t * Id of the FilterBar building block associated with the chart.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tfilterBar!: string;\n\n\t/**\n\t * Controls the kind of variant management that should be enabled for the chart.\n\t *\n\t * Allowed value is `Control`.<br/>\n\t * If set with value `Control`, a variant management control is seen within the chart and the chart is linked to this.<br/>\n\t * If not set with any value, variant management control is not available for this chart.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\", allowedValues: [\"Control\"] })\n\tvariantManagement!: string;\n\n\t/**\n\t * Controls which options should be enabled for the chart personalization dialog.\n\t *\n\t * If it is set to `true`, all possible options for this kind of chart are enabled.<br/>\n\t * If it is set to `false`, personalization is disabled.<br/>\n\t *<br/>\n\t * You can also provide a more granular control for the personalization by providing a comma-separated list with the options you want to be available.<br/>\n\t * Available options are:<br/>\n\t *  - Sort<br/>\n\t *  - Type<br/>\n\t *  - Item<br/>\n\t *  - Filter<br/>\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean | string\", defaultValue: true })\n\tpersonalization!: boolean | string;\n\n\t/**\n\t * Parameter with drillstack on a drill up/ drill down of the MDC_Chart\n\t *\n\t * @private\n\t */\n\t@property({ type: \"string[]\", defaultValue: [] })\n\tprevDrillStack!: string[];\n\n\t/**\n\t * Aggregate actions of the chart.\n\t *\n\t * @public\n\t */\n\t@aggregation({ type: \"sap.fe.macros.chart.Action\", multiple: true })\n\tactions!: Action[];\n\n\t/**\n\t * Gets contexts from the chart that have been selected by the user.\n\t *\n\t * @returns Contexts of the rows selected by the user\n\t * @public\n\t */\n\tgetSelectedContexts(): Context[] {\n\t\treturn this.content?.getBindingContext(\"internal\")?.getProperty(\"selectedContexts\") || [];\n\t}\n\n\t/**\n\t * An event triggered when chart selections are changed. The event contains information about the data selected/deselected and the Boolean flag that indicates whether data is selected or deselected.\n\t *\n\t * @public\n\t */\n\t@event()\n\tselectionChange!: Function;\n\n\t/**\n\t * An event triggered when the chart state changes.\n\t *\n\t * You can set this in order to store the chart state in the iAppstate.\n\t *\n\t * @private\n\t */\n\t@event()\n\tstateChange!: Function;\n\n\t/**\n\t * An event triggered when the chart requests data.\n\t *\n\t * @private\n\t */\n\t@event()\n\tinternalDataRequested!: Function;\n\n\tonAfterRendering() {\n\t\tconst view = this.getController().getView();\n\t\tconst internalModelContext: any = view.getBindingContext(\"internal\");\n\t\tconst chart = (this as any).getContent();\n\t\tconst showMessageStrip: any = {};\n\t\tconst sChartEntityPath = chart.data(\"entitySet\"),\n\t\t\tsCacheKey = `${sChartEntityPath}Chart`,\n\t\t\toBindingContext = view.getBindingContext();\n\t\tshowMessageStrip[sCacheKey] =\n\t\t\tchart.data(\"draftSupported\") === \"true\" && !!oBindingContext && !oBindingContext.getObject(\"IsActiveEntity\");\n\t\tinternalModelContext.setProperty(\"controls/showMessageStrip\", showMessageStrip);\n\t}\n\n\trefreshNotApplicableFields(oFilterControl: Control): any[] {\n\t\tconst oChart = (this as any).getContent();\n\t\treturn FilterUtils.getNotApplicableFilters(oFilterControl, oChart);\n\t}\n\n\t@xmlEventHandler()\n\thandleSelectionChange(oEvent: UI5Event) {\n\t\tconst aData = oEvent.getParameter(\"data\");\n\t\tconst bSelected = oEvent.getParameter(\"name\") === \"selectData\";\n\t\tChartRuntime.fnUpdateChart(oEvent);\n\t\t(this as any).fireSelectionChange(merge({}, { data: aData, selected: bSelected }));\n\t}\n\n\t@xmlEventHandler()\n\tonInternalDataRequested() {\n\t\t(this as any).fireEvent(\"internalDataRequested\");\n\t}\n\n\thasSelections() {\n\t\t// consider chart selections in the current drill stack or on any further drill downs\n\t\tconst mdcChart = this.content as unknown as MDCChart;\n\t\tif (mdcChart) {\n\t\t\ttry {\n\t\t\t\tconst chart = mdcChart.getControlDelegate().getInnerChart(mdcChart) as Chart;\n\t\t\t\tif (chart) {\n\t\t\t\t\tconst aDimensions = ChartUtils.getDimensionsFromDrillStack(chart);\n\t\t\t\t\tconst bIsDrillDown = aDimensions.length > this.prevDrillStack.length;\n\t\t\t\t\tconst bIsDrillUp = aDimensions.length < this.prevDrillStack.length;\n\t\t\t\t\tconst bNoChange = aDimensions.toString() === this.prevDrillStack.toString();\n\t\t\t\t\tlet aFilters: Filter[];\n\t\t\t\t\tif (bIsDrillUp && aDimensions.length === 1) {\n\t\t\t\t\t\t// drilling up to level0 would clear all selections\n\t\t\t\t\t\taFilters = ChartUtils.getChartSelections(mdcChart, true) as Filter[];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// apply filters of selections of previous drillstack when drilling up/down\n\t\t\t\t\t\t// to the chart and table\n\t\t\t\t\t\taFilters = ChartUtils.getChartSelections(mdcChart) as Filter[];\n\t\t\t\t\t}\n\t\t\t\t\tif (bIsDrillDown || bIsDrillUp) {\n\t\t\t\t\t\t// update the drillstack on a drill up/ drill down\n\t\t\t\t\t\tthis.prevDrillStack = aDimensions;\n\t\t\t\t\t\treturn aFilters.length > 0;\n\t\t\t\t\t} else if (bNoChange) {\n\t\t\t\t\t\t// bNoChange is true when chart is selected\n\t\t\t\t\t\treturn aFilters.length > 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err: unknown) {\n\t\t\t\tLog.error(`Error while checking for selections in Chart: ${err}`);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Event handler to create insightsParams and call the API to show insights card preview for charts.\n\t *\n\t * @returns Undefined if card preview is rendered.\n\t */\n\t@xmlEventHandler()\n\tasync onAddCardToInsightsPressed() {\n\t\ttry {\n\t\t\tconst insightsParams = await createInsightsParams(this, IntegrationCardType.analytical);\n\t\t\tif (insightsParams) {\n\t\t\t\tshowInsightsCardPreview(insightsParams);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tgenericErrorMessageForInsightsCard(this.content);\n\t\t\tLog.error(e as string);\n\t\t}\n\t}\n}\nexport default ChartAPI;\n"],"mappings":"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"}},{"offset":{"line":3270,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","merge","ClassSupport","ChartRuntime","ChartUtils","FilterUtils","MacroAPI","CommonInsightsHelper","InsightsCardHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","showInsightsCardPreview","IntegrationCardType","genericErrorMessageForInsightsCard","createInsightsParams","xmlEventHandler","property","event","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ChartAPI","returnTypes","type","required","expectedTypes","expectedAnnotations","defaultValue","allowedValues","multiple","_MacroAPI","_this","_len","arguments","length","args","Array","_key","this","_proto","getSelectedContexts","_this$content","_this$content$getBind","content","getBindingContext","getProperty","onAfterRendering","view","getController","getView","internalModelContext","chart","getContent","showMessageStrip","sChartEntityPath","data","sCacheKey","oBindingContext","getObject","setProperty","refreshNotApplicableFields","oFilterControl","oChart","getNotApplicableFilters","handleSelectionChange","oEvent","aData","getParameter","bSelected","fnUpdateChart","fireSelectionChange","selected","onInternalDataRequested","fireEvent","hasSelections","mdcChart","getControlDelegate","getInnerChart","aDimensions","getDimensionsFromDrillStack","bIsDrillDown","prevDrillStack","bIsDrillUp","bNoChange","toString","aFilters","getChartSelections","err","error","onAddCardToInsightsPressed","async","insightsParams","analytical","e","getOwnPropertyDescriptor"],"sources":["ChartAPI-dbg.js"],"mappings":"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","sourceRoot":"chart"}},{"offset":{"line":3275,"column":0},"map":{"version":3,"names":["ChartItemRoleType","MDCLib","ChartDelegate","Object","assign","BaseChartDelegate","apiVersion","_setChartNoDataText","oChart","oBindingInfo","sNoDataKey","oChartFilterInfo","ChartUtils","getAllFilterInfo","suffixResourceKey","path","startsWith","substr","_getNoDataTextWithFilters","data","getFilter","search","filters","length","setNoDataText","getResourceModel","getText","undefined","_handleProperty","oMDCChart","mEntitySetAnnotations","mKnownAggregatableProps","mCustomAggregates","aProperties","sCriticality","oApplySupported","CommonHelper","parseCustomData","sortRestrictionsInfo","getSortRestrictionsInfo","oFilterRestrictions","oFilterRestrictionsInfo","getFilterRestrictionsInfo","oObj","getModel","getObject","getPath","sKey","oMetaModel","aModes","getP13nMode","checkForNonfilterableEntitySet","$kind","$isCollection","oPropertyAnnotations","sPath","getMetaContext","aGroupableProperties","GroupableProperties","aAggregatableProperties","AggregatableProperties","bGroupable","checkPropertyType","bAggregatable","checkPropertyIsBothGroupableAndAggregatable","aAggregateProperties","_createPropertyInfosForAggregatable","forEach","oAggregateProperty","push","includes","aKnownAggregatableProps","keys","aGroupablePropertiesValues","map","oProperty","$PropertyPath","sProperty","addPropertyToChart","sName","sTextProperty","$Path","bIsNavigationText","indexOf","Log","error","bIsGroupable","bIsAggregatable","bIsHidden","name","propertyPath","label","sortable","_getSortable","propertyInfo","filterable","groupable","aggregatable","maxConditions","isMultiValueFilterExpression","sortKey","role","category","criticality","typeConfig","visible","textProperty","textFormatter","bEntitySetFilerable","getMetaModel","Filterable","filter","item","setP13nMode","element","Property","customProperties","Error","formatText","oValue1","oValue2","oTextArrangementAnnotation","$EnumMember","updateBindingInfo","oFilter","sap","ui","getCore","byId","mConditions","getConditions","parameters","oInfo","FilterUtils","getFilterInfo","enableSearch","$search","CommonUtils","normalizeSearchTerm","sParameterPath","DelegateUtil","getParametersInfo","oFilterInfo","getChartPropertiesWithoutPrefixes","Filter","and","sorter","getSorters","_checkAndAddDraftFilter","fetchProperties","oModel","_getModel","pCreatePropertyInfos","Promise","resolve","attachModelContextChange","resolver","onModelContextChange","then","oRetrievedModel","_createPropertyInfos","MacrosDelegateUtil","setCachedProperties","oEvent","oData","getSource","detachModelContextChange","sEntitySetPath","aResults","all","requestObject","oEntityType","allowedPropertiesForFilterOption","getCustomAggregate","sAnno","aPropertyPromise","sAnnoKey","replace","aAnno","split","mTypeAggregatableProps","sAggregatable","sPropKey","aggregationMethod","ChartHelper","fetchCriticality","createBindingContext","bind","i","getTypeUtil","getTypeConfig","$Type","aDimensions","aMeasures","aChartItems","getItems","key","getType","getInternalChartNameFromPropertyNameAndKind","getName","val","axis1","datapoint","sCustom","oItem","merge","rebind","sSearch","oInnerChart","getControlDelegate","getInnerChart","oChartBinding","getBinding","suspend","setAggregation","oInnerChartDelegate","onBeforeRendering","resume","removeEventDelegate","addEventDelegate","fireEvent","_setChart","oChartAPI","getParent","setVizProperties","detachSelectData","handleSelectionChange","detachDeselectData","detachDrilledUp","attachSelectData","attachDeselectData","attachDrilledUp","setSelectionMode","getPayload","selectionMode","toUpperCase","_getBindingInfo","_getBindingInfoFromState","oMetadataInfo","getDelegate","payload","sTargetCollectionPath","contextPath","oParams","entitySet","events","dataRequested","onInternalDataRequested","removeItemFromInnerChart","oMDCChartItem","call","fireDeselectData","sortRestrictionsProperty","bIsTransAggregate","FilterOperator","EQ","aFilters","kind","getPropertyFromNameAndKind","mdcChart","getPropertyHelper","getProperty","getFilterDelegate","FilterBarDelegate","addItem","oParentControl","sPropertyInfoName","prop","oFilterItem","bindProperty"],"sourceRoot":"chart","sources":["ChartDelegate.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport merge from \"sap/base/util/merge\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport {\n\tgetFilterRestrictionsInfo,\n\tgetSortRestrictionsInfo,\n\tisMultiValueFilterExpression,\n\tSortRestrictionsInfoType,\n\tSortRestrictionsPropertyInfoType\n} from \"sap/fe/core/helpers/MetaModelFunction\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport ChartHelper from \"sap/fe/macros/chart/ChartHelper\";\nimport ChartUtils from \"sap/fe/macros/chart/ChartUtils\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport MacrosDelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport Chart from \"sap/ui/mdc/Chart\";\nimport MDCLib from \"sap/ui/mdc/library\";\nimport DelegateUtil from \"sap/ui/mdc/odata/v4/util/DelegateUtil\";\nimport BaseChartDelegate from \"sap/ui/mdc/odata/v4/vizChart/ChartDelegate\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport FilterBarDelegate from \"../filterBar/FilterBarDelegate\";\n\nconst ChartItemRoleType = (MDCLib as any).ChartItemRoleType;\n// /**\n//  * Helper class for sap.ui.mdc.Chart.\n//  * <h3><b>Note:</b></h3>\n//  * The class is experimental and the API/behaviour is not finalised\n//  * and hence this should not be used for productive usage.\n//  * Especially this class is not intended to be used for the FE scenario,\n//  * here we shall use sap.fe.macros.ChartDelegate that is especially tailored for V4\n//  * meta model\n//  *\n//  * @author SAP SE\n//  * @private\n//  * @experimental\n//  * @since 1.62\n//  * @alias sap.fe.macros.ChartDelegate\n//  */\nconst ChartDelegate = Object.assign({}, BaseChartDelegate);\nBaseChartDelegate.apiVersion = 2;\n\nChartDelegate._setChartNoDataText = function (oChart: any, oBindingInfo: any) {\n\tlet sNoDataKey = \"\";\n\tconst oChartFilterInfo = ChartUtils.getAllFilterInfo(oChart),\n\t\tsuffixResourceKey = oBindingInfo.path.startsWith(\"/\") ? oBindingInfo.path.substr(1) : oBindingInfo.path;\n\tconst _getNoDataTextWithFilters = function () {\n\t\tif (oChart.data(\"multiViews\")) {\n\t\t\treturn \"M_TABLE_AND_CHART_NO_DATA_TEXT_MULTI_VIEW\";\n\t\t} else {\n\t\t\treturn \"T_TABLE_AND_CHART_NO_DATA_TEXT_WITH_FILTER\";\n\t\t}\n\t};\n\tif (oChart.getFilter()) {\n\t\tif (oChartFilterInfo.search || (oChartFilterInfo.filters && oChartFilterInfo.filters.length)) {\n\t\t\tsNoDataKey = _getNoDataTextWithFilters();\n\t\t} else {\n\t\t\tsNoDataKey = \"T_TABLE_AND_CHART_NO_DATA_TEXT\";\n\t\t}\n\t} else if (oChartFilterInfo.search || (oChartFilterInfo.filters && oChartFilterInfo.filters.length)) {\n\t\tsNoDataKey = _getNoDataTextWithFilters();\n\t} else {\n\t\tsNoDataKey = \"M_TABLE_AND_CHART_NO_FILTERS_NO_DATA_TEXT\";\n\t}\n\toChart.setNoDataText(getResourceModel(oChart).getText(sNoDataKey, undefined, suffixResourceKey));\n};\n\nChartDelegate._handleProperty = function (\n\toMDCChart: Chart,\n\tmEntitySetAnnotations: any,\n\tmKnownAggregatableProps: any,\n\tmCustomAggregates: any,\n\taProperties: any[],\n\tsCriticality: string\n) {\n\tconst oApplySupported = CommonHelper.parseCustomData(oMDCChart.data(\"applySupported\"));\n\tconst sortRestrictionsInfo = getSortRestrictionsInfo(mEntitySetAnnotations);\n\tconst oFilterRestrictions = mEntitySetAnnotations[\"@Org.OData.Capabilities.V1.FilterRestrictions\"];\n\tconst oFilterRestrictionsInfo = getFilterRestrictionsInfo(oFilterRestrictions);\n\tconst oObj = this.getModel().getObject(this.getPath());\n\tconst sKey = this.getModel().getObject(`${this.getPath()}@sapui.name`) as string;\n\tconst oMetaModel = this.getModel();\n\tconst aModes: string[] = oMDCChart.getP13nMode();\n\tcheckForNonfilterableEntitySet(oMDCChart, aModes);\n\tif (oObj && oObj.$kind === \"Property\") {\n\t\t// ignore (as for now) all complex properties\n\t\t// not clear if they might be nesting (complex in complex)\n\t\t// not clear how they are represented in non-filterable annotation\n\t\t// etc.\n\t\tif (oObj.$isCollection) {\n\t\t\t//Log.warning(\"Complex property with type \" + oObj.$Type + \" has been ignored\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst oPropertyAnnotations = oMetaModel.getObject(`${this.getPath()}@`);\n\t\tconst sPath = oMetaModel.getObject(\"@sapui.name\", oMetaModel.getMetaContext(this.getPath()));\n\n\t\tconst aGroupableProperties = oApplySupported && oApplySupported.GroupableProperties;\n\t\tconst aAggregatableProperties = oApplySupported && oApplySupported.AggregatableProperties;\n\t\tlet bGroupable = aGroupableProperties ? checkPropertyType(aGroupableProperties, sPath) : false;\n\t\tlet bAggregatable = aAggregatableProperties ? checkPropertyType(aAggregatableProperties, sPath) : false;\n\n\t\tif (!aGroupableProperties || (aGroupableProperties && !aGroupableProperties.length)) {\n\t\t\tbGroupable = oPropertyAnnotations[\"@Org.OData.Aggregation.V1.Groupable\"];\n\t\t}\n\t\tif (!aAggregatableProperties || (aAggregatableProperties && !aAggregatableProperties.length)) {\n\t\t\tbAggregatable = oPropertyAnnotations[\"@Org.OData.Aggregation.V1.Aggregatable\"];\n\t\t}\n\n\t\t//Right now: skip them, since we can't create a chart from it\n\t\tif (!bGroupable && !bAggregatable) {\n\t\t\treturn;\n\t\t}\n\t\tcheckPropertyIsBothGroupableAndAggregatable(mCustomAggregates, sKey, bGroupable, bAggregatable);\n\t\tif (bAggregatable) {\n\t\t\tconst aAggregateProperties = ChartDelegate._createPropertyInfosForAggregatable(\n\t\t\t\toMDCChart,\n\t\t\t\tsKey,\n\t\t\t\toPropertyAnnotations,\n\t\t\t\toFilterRestrictionsInfo,\n\t\t\t\tsortRestrictionsInfo,\n\t\t\t\tmKnownAggregatableProps,\n\t\t\t\tmCustomAggregates\n\t\t\t);\n\t\t\taAggregateProperties.forEach(function (oAggregateProperty: any) {\n\t\t\t\taProperties.push(oAggregateProperty);\n\t\t\t});\n\t\t\t//Add transformation aggregated properties to chart properties\n\t\t\tif (aModes && aModes.includes(\"Filter\")) {\n\t\t\t\tconst aKnownAggregatableProps = Object.keys(mKnownAggregatableProps);\n\t\t\t\tconst aGroupablePropertiesValues = aGroupableProperties.map(\n\t\t\t\t\t(oProperty: { $PropertyPath: string }) => oProperty.$PropertyPath\n\t\t\t\t);\n\t\t\t\taKnownAggregatableProps.forEach((sProperty: string) => {\n\t\t\t\t\t// Add transformation aggregated property to chart so that in the filter dropdown it's visible\n\t\t\t\t\t// Also mark visibility false as this property should not come up in under chart section of personalization dialog\n\t\t\t\t\tif (!aGroupablePropertiesValues.includes(sProperty)) {\n\t\t\t\t\t\taProperties = addPropertyToChart(\n\t\t\t\t\t\t\taProperties,\n\t\t\t\t\t\t\tsKey,\n\t\t\t\t\t\t\toPropertyAnnotations,\n\t\t\t\t\t\t\toFilterRestrictionsInfo,\n\t\t\t\t\t\t\tsortRestrictionsInfo,\n\t\t\t\t\t\t\toMDCChart,\n\t\t\t\t\t\t\tsCriticality,\n\t\t\t\t\t\t\toObj,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (bGroupable) {\n\t\t\tconst sName = sKey || \"\",\n\t\t\t\tsTextProperty = oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"]\n\t\t\t\t\t? oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"].$Path\n\t\t\t\t\t: null;\n\t\t\tlet bIsNavigationText = false;\n\t\t\tif (sName && sName.indexOf(\"/\") > -1) {\n\t\t\t\tLog.error(`$expand is not yet supported. Property: ${sName} from an association cannot be used`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (sTextProperty && sTextProperty.indexOf(\"/\") > -1) {\n\t\t\t\tLog.error(`$expand is not yet supported. Text Property: ${sTextProperty} from an association cannot be used`);\n\t\t\t\tbIsNavigationText = true;\n\t\t\t}\n\t\t\taProperties = addPropertyToChart(\n\t\t\t\taProperties,\n\t\t\t\tsKey,\n\t\t\t\toPropertyAnnotations,\n\t\t\t\toFilterRestrictionsInfo,\n\t\t\t\tsortRestrictionsInfo,\n\t\t\t\toMDCChart,\n\t\t\t\tsCriticality,\n\t\t\t\toObj,\n\t\t\t\ttrue,\n\t\t\t\tfalse,\n\t\t\t\tbIsNavigationText\n\t\t\t);\n\t\t}\n\t}\n};\n\n// create properties for chart\nfunction addPropertyToChart(\n\taProperties: any[],\n\tsKey: string,\n\toPropertyAnnotations: any,\n\toFilterRestrictionsInfo: any,\n\tsortRestrictionsInfo: any,\n\toMDCChart: Chart,\n\tsCriticality: string,\n\toObj: any,\n\tbIsGroupable: boolean,\n\tbIsAggregatable: boolean,\n\tbIsNavigationText?: boolean,\n\tbIsHidden?: boolean\n): any[] {\n\taProperties.push({\n\t\tname: \"_fe_groupable_\" + sKey,\n\t\tpropertyPath: sKey,\n\t\tlabel: oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Label\"] || sKey,\n\t\tsortable: ChartDelegate._getSortable(oMDCChart, sortRestrictionsInfo.propertyInfo[sKey], false),\n\t\tfilterable: oFilterRestrictionsInfo[sKey] ? oFilterRestrictionsInfo[sKey].filterable : true,\n\t\tgroupable: bIsGroupable,\n\t\taggregatable: bIsAggregatable,\n\t\tmaxConditions: isMultiValueFilterExpression(oFilterRestrictionsInfo.propertyInfo[sKey]) ? -1 : 1,\n\t\tsortKey: sKey,\n\t\tpath: sKey,\n\t\trole: ChartItemRoleType.category, //standard, normally this should be interpreted from UI.Chart annotation\n\t\tcriticality: sCriticality, //To be implemented by FE\n\t\ttypeConfig: oObj.typeConfig,\n\t\tvisible: bIsHidden ? !bIsHidden : true,\n\t\ttextProperty:\n\t\t\t!bIsNavigationText && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"]\n\t\t\t\t? oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"].$Path\n\t\t\t\t: null, //To be implemented by FE\n\t\ttextFormatter: oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"]\n\t});\n\n\treturn aProperties;\n}\n\n// If entityset is non filterable,then from p13n modes remove Filter so that on UI filter option doesn't show up\nfunction checkForNonfilterableEntitySet(oMDCChart: Chart, aModes: any[]) {\n\tconst bEntitySetFilerable = oMDCChart\n\t\t?.getModel()\n\t\t?.getMetaModel()\n\t\t?.getObject(`${oMDCChart.data(\"targetCollectionPath\")}@Org.OData.Capabilities.V1.FilterRestrictions`)?.Filterable;\n\tif (bEntitySetFilerable !== undefined && !bEntitySetFilerable) {\n\t\taModes = aModes.filter((item: any) => item !== \"Filter\");\n\t\toMDCChart.setP13nMode(aModes);\n\t}\n}\n\n//  check if Groupable /Aggregatable property is present or not\nfunction checkPropertyType(aProperties: any[], sPath: string) {\n\tif (aProperties.length) {\n\t\tfor (const element of aProperties) {\n\t\t\tif (element?.$PropertyPath === sPath || element?.Property?.$PropertyPath === sPath) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n}\n\n//If same custom property is configured as groupable and aggregatable throw an error\nfunction checkPropertyIsBothGroupableAndAggregatable(\n\tmCustomAggregates: { [propertyName: string]: unknown },\n\tsKey: string,\n\tbGroupable?: boolean,\n\tbAggregatable?: boolean\n) {\n\tconst customProperties = Object.keys(mCustomAggregates);\n\tif (bGroupable && bAggregatable && customProperties.includes(sKey)) {\n\t\tthrow new Error(\"Same property can not be configured as groupable and aggregatable\");\n\t}\n}\n\nChartDelegate.formatText = function (oValue1: any, oValue2: any) {\n\tconst oTextArrangementAnnotation = this.textFormatter;\n\tif (oTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst\") {\n\t\treturn `${oValue2} (${oValue1})`;\n\t} else if (oTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast\") {\n\t\treturn `${oValue1} (${oValue2})`;\n\t} else if (oTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\") {\n\t\treturn oValue2;\n\t}\n\treturn oValue2 ? oValue2 : oValue1;\n};\n\nChartDelegate.updateBindingInfo = function (oChart: any, oBindingInfo: any) {\n\tChartDelegate._setChartNoDataText(oChart, oBindingInfo);\n\tconst oFilter = sap.ui.getCore().byId(oChart.getFilter()) as any;\n\tconst mConditions = oChart.getConditions();\n\tif (!oBindingInfo) {\n\t\toBindingInfo = {};\n\t}\n\tif (!oBindingInfo.parameters) {\n\t\toBindingInfo.parameters = {};\n\t}\n\tif (oFilter) {\n\t\t// Search\n\t\tconst oInfo = FilterUtils.getFilterInfo(oFilter, {});\n\t\tconst oApplySupported = CommonHelper.parseCustomData(oChart.data(\"applySupported\"));\n\t\tif (oApplySupported && oApplySupported.enableSearch && oInfo.search) {\n\t\t\toBindingInfo.parameters.$search = CommonUtils.normalizeSearchTerm(oInfo.search);\n\t\t} else if (oBindingInfo.parameters.$search) {\n\t\t\tdelete oBindingInfo.parameters.$search;\n\t\t}\n\t}\n\tconst sParameterPath = mConditions ? DelegateUtil.getParametersInfo(oFilter, mConditions) : null;\n\tif (sParameterPath) {\n\t\toBindingInfo.path = sParameterPath;\n\t}\n\tconst oFilterInfo = ChartUtils.getAllFilterInfo(oChart);\n\n\t// remove prefixes so that entityset will match with the property names with these field\n\tif (oFilterInfo.filters) {\n\t\toFilterInfo.filters = CommonUtils.getChartPropertiesWithoutPrefixes(oFilterInfo.filters);\n\t}\n\n\toBindingInfo.filters = oFilterInfo.filters.length > 0 ? new Filter({ filters: oFilterInfo.filters, and: true }) : null;\n\toBindingInfo.sorter = this.getSorters(oChart);\n\tChartDelegate._checkAndAddDraftFilter(oChart, oBindingInfo);\n};\n\nChartDelegate.fetchProperties = function (oMDCChart: Chart) {\n\tconst oModel = this._getModel(oMDCChart);\n\tlet pCreatePropertyInfos;\n\n\tif (!oModel) {\n\t\tpCreatePropertyInfos = new Promise((resolve: any) => {\n\t\t\toMDCChart.attachModelContextChange(\n\t\t\t\t{\n\t\t\t\t\tresolver: resolve\n\t\t\t\t},\n\t\t\t\tonModelContextChange as any,\n\t\t\t\tthis\n\t\t\t);\n\t\t}).then((oRetrievedModel: any) => {\n\t\t\treturn this._createPropertyInfos(oMDCChart, oRetrievedModel);\n\t\t});\n\t} else {\n\t\tpCreatePropertyInfos = this._createPropertyInfos(oMDCChart, oModel);\n\t}\n\n\treturn pCreatePropertyInfos.then(function (aProperties: any) {\n\t\tif (oMDCChart.data) {\n\t\t\toMDCChart.data(\"$mdcChartPropertyInfo\", aProperties);\n\t\t\t// store the properties to fetch during p13n calculation\n\t\t\tMacrosDelegateUtil.setCachedProperties(oMDCChart, aProperties);\n\t\t}\n\t\treturn aProperties;\n\t});\n};\nfunction onModelContextChange(this: typeof ChartDelegate, oEvent: any, oData: any) {\n\tconst oMDCChart = oEvent.getSource();\n\tconst oModel = this._getModel(oMDCChart);\n\n\tif (oModel) {\n\t\toMDCChart.detachModelContextChange(onModelContextChange);\n\t\toData.resolver(oModel);\n\t}\n}\nChartDelegate._createPropertyInfos = async function (oMDCChart: any, oModel: any) {\n\tconst sEntitySetPath = `/${oMDCChart.data(\"entitySet\")}`;\n\tconst oMetaModel = oModel.getMetaModel();\n\tconst aResults = await Promise.all([oMetaModel.requestObject(`${sEntitySetPath}/`), oMetaModel.requestObject(`${sEntitySetPath}@`)]);\n\tconst aProperties: any[] = [];\n\tlet oEntityType = aResults[0];\n\tconst mEntitySetAnnotations = aResults[1];\n\toEntityType = allowedPropertiesForFilterOption(oEntityType, oMDCChart);\n\tconst mCustomAggregates = CommonHelper.parseCustomData(oMDCChart.data(\"customAgg\"));\n\tgetCustomAggregate(mCustomAggregates, oMDCChart);\n\tlet sAnno;\n\tconst aPropertyPromise = [];\n\tfor (const sAnnoKey in mEntitySetAnnotations) {\n\t\tif (sAnnoKey.startsWith(\"@Org.OData.Aggregation.V1.CustomAggregate\")) {\n\t\t\tsAnno = sAnnoKey.replace(\"@Org.OData.Aggregation.V1.CustomAggregate#\", \"\");\n\t\t\tconst aAnno = sAnno.split(\"@\");\n\n\t\t\tif (aAnno.length == 2 && aAnno[1] == \"com.sap.vocabularies.Common.v1.Label\") {\n\t\t\t\tmCustomAggregates[aAnno[0]] = mEntitySetAnnotations[sAnnoKey];\n\t\t\t}\n\t\t}\n\t}\n\tconst mTypeAggregatableProps = CommonHelper.parseCustomData(oMDCChart.data(\"transAgg\"));\n\tconst mKnownAggregatableProps: any = {};\n\tfor (const sAggregatable in mTypeAggregatableProps) {\n\t\tconst sPropKey = mTypeAggregatableProps[sAggregatable].propertyPath;\n\t\tmKnownAggregatableProps[sPropKey] = mKnownAggregatableProps[sPropKey] || {};\n\t\tmKnownAggregatableProps[sPropKey][mTypeAggregatableProps[sAggregatable].aggregationMethod] = {\n\t\t\tname: mTypeAggregatableProps[sAggregatable].name,\n\t\t\tlabel: mTypeAggregatableProps[sAggregatable].label\n\t\t};\n\t}\n\tfor (const sKey in oEntityType) {\n\t\tif (sKey.indexOf(\"$\") !== 0) {\n\t\t\taPropertyPromise.push(\n\t\t\t\tChartHelper.fetchCriticality(oMetaModel, oMetaModel.createBindingContext(`${sEntitySetPath}/${sKey}`)).then(\n\t\t\t\t\tChartDelegate._handleProperty.bind(\n\t\t\t\t\t\toMetaModel.getMetaContext(`${sEntitySetPath}/${sKey}`),\n\t\t\t\t\t\toMDCChart,\n\t\t\t\t\t\tmEntitySetAnnotations,\n\t\t\t\t\t\tmKnownAggregatableProps,\n\t\t\t\t\t\tmCustomAggregates,\n\t\t\t\t\t\taProperties\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\tawait Promise.all(aPropertyPromise);\n\n\treturn aProperties;\n};\n\n// for every property of chart, configure the typeConfig which we would like to see in the filter dropdrown list\nfunction allowedPropertiesForFilterOption(oEntityType: any, oMDCChart: any) {\n\tfor (const i in oEntityType) {\n\t\tif (i == \"$Key\" || i == \"$kind\" || i == \"SAP_Message\") {\n\t\t\tcontinue;\n\t\t} else if (oEntityType[i][\"$kind\"] == \"Property\") {\n\t\t\toEntityType[i][\"typeConfig\"] = oMDCChart.getTypeUtil().getTypeConfig(oEntityType[i].$Type);\n\t\t} else {\n\t\t\toEntityType[i][\"typeConfig\"] = null;\n\t\t}\n\t}\n\treturn oEntityType;\n}\n\nfunction getCustomAggregate(mCustomAggregates: any, oMDCChart: any) {\n\tconst aDimensions: any[] = [],\n\t\taMeasures = [];\n\tif (mCustomAggregates && Object.keys(mCustomAggregates).length >= 1) {\n\t\tconst aChartItems = oMDCChart.getItems();\n\t\tfor (const key in aChartItems) {\n\t\t\tif (aChartItems[key].getType() === \"groupable\") {\n\t\t\t\taDimensions.push(ChartDelegate.getInternalChartNameFromPropertyNameAndKind(aChartItems[key].getName(), \"groupable\"));\n\t\t\t} else if (aChartItems[key].getType() === \"aggregatable\") {\n\t\t\t\taMeasures.push(ChartDelegate.getInternalChartNameFromPropertyNameAndKind(aChartItems[key].getName(), \"aggregatable\"));\n\t\t\t}\n\t\t}\n\t\tif (\n\t\t\taMeasures.filter(function (val: any) {\n\t\t\t\treturn aDimensions.indexOf(val) != -1;\n\t\t\t}).length >= 1\n\t\t) {\n\t\t\tLog.error(\"Dimension and Measure has the sameProperty Configured\");\n\t\t}\n\t}\n}\n\nChartDelegate._createPropertyInfosForAggregatable = function (\n\toMDCChart: Chart,\n\tsKey: string,\n\toPropertyAnnotations: any,\n\toFilterRestrictionsInfo: any,\n\tsortRestrictionsInfo: SortRestrictionsInfoType,\n\tmKnownAggregatableProps: any,\n\tmCustomAggregates: any\n) {\n\tconst aAggregateProperties = [];\n\tif (Object.keys(mKnownAggregatableProps).indexOf(sKey) > -1) {\n\t\tfor (const sAggregatable in mKnownAggregatableProps[sKey]) {\n\t\t\taAggregateProperties.push({\n\t\t\t\tname: \"_fe_aggregatable_\" + mKnownAggregatableProps[sKey][sAggregatable].name,\n\t\t\t\tpropertyPath: sKey,\n\t\t\t\tlabel:\n\t\t\t\t\tmKnownAggregatableProps[sKey][sAggregatable].label ||\n\t\t\t\t\t`${oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Label\"]} (${sAggregatable})` ||\n\t\t\t\t\t`${sKey} (${sAggregatable})`,\n\t\t\t\tsortable: sortRestrictionsInfo.propertyInfo[sKey] ? sortRestrictionsInfo.propertyInfo[sKey].sortable : true,\n\t\t\t\tfilterable: false,\n\t\t\t\tgroupable: false,\n\t\t\t\taggregatable: true,\n\t\t\t\tpath: sKey,\n\t\t\t\taggregationMethod: sAggregatable,\n\t\t\t\tmaxConditions: isMultiValueFilterExpression(oFilterRestrictionsInfo.propertyInfo[sKey]) ? -1 : 1,\n\t\t\t\trole: ChartItemRoleType.axis1,\n\t\t\t\tdatapoint: null //To be implemented by FE\n\t\t\t});\n\t\t}\n\t}\n\tif (Object.keys(mCustomAggregates).indexOf(sKey) > -1) {\n\t\tfor (const sCustom in mCustomAggregates) {\n\t\t\tif (sCustom === sKey) {\n\t\t\t\tconst oItem = merge({}, mCustomAggregates[sCustom], {\n\t\t\t\t\tname: \"_fe_aggregatable_\" + sCustom,\n\t\t\t\t\tgroupable: false,\n\t\t\t\t\taggregatable: true,\n\t\t\t\t\tfilterable: false,\n\t\t\t\t\trole: ChartItemRoleType.axis1,\n\t\t\t\t\tpropertyPath: sCustom,\n\t\t\t\t\tdatapoint: null //To be implemented by FE\n\t\t\t\t});\n\t\t\t\taAggregateProperties.push(oItem);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn aAggregateProperties;\n};\nChartDelegate.rebind = function (oMDCChart: any, oBindingInfo: any) {\n\tconst sSearch = oBindingInfo.parameters.$search;\n\n\tif (sSearch) {\n\t\tdelete oBindingInfo.parameters.$search;\n\t}\n\n\tBaseChartDelegate.rebind(oMDCChart, oBindingInfo);\n\n\tif (sSearch) {\n\t\tconst oInnerChart = oMDCChart.getControlDelegate().getInnerChart(oMDCChart),\n\t\t\toChartBinding = oInnerChart && oInnerChart.getBinding(\"data\");\n\n\t\t// Temporary workaround until this is fixed in MDCChart / UI5 Chart\n\t\t// In order to avoid having 2 OData requests, we need to suspend the binding before setting some aggregation properties\n\t\t// and resume it once the chart has added other aggregation properties (in onBeforeRendering)\n\t\toChartBinding.suspend();\n\t\toChartBinding.setAggregation({ search: sSearch });\n\n\t\tconst oInnerChartDelegate = {\n\t\t\tonBeforeRendering: function () {\n\t\t\t\toChartBinding.resume();\n\t\t\t\toInnerChart.removeEventDelegate(oInnerChartDelegate);\n\t\t\t}\n\t\t};\n\t\toInnerChart.addEventDelegate(oInnerChartDelegate);\n\t}\n\n\toMDCChart.fireEvent(\"bindingUpdated\");\n};\nChartDelegate._setChart = function (oMDCChart: any, oInnerChart: any) {\n\tconst oChartAPI = oMDCChart.getParent();\n\toInnerChart.setVizProperties(oMDCChart.data(\"vizProperties\"));\n\toInnerChart.detachSelectData(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\toInnerChart.detachDeselectData(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\toInnerChart.detachDrilledUp(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\toInnerChart.attachSelectData(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\toInnerChart.attachDeselectData(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\toInnerChart.attachDrilledUp(oChartAPI.handleSelectionChange.bind(oChartAPI));\n\n\toInnerChart.setSelectionMode(oMDCChart.getPayload().selectionMode.toUpperCase());\n\tBaseChartDelegate._setChart(oMDCChart, oInnerChart);\n};\nChartDelegate._getBindingInfo = function (oMDCChart: any) {\n\tif (this._getBindingInfoFromState(oMDCChart)) {\n\t\treturn this._getBindingInfoFromState(oMDCChart);\n\t}\n\n\tconst oMetadataInfo = oMDCChart.getDelegate().payload;\n\tconst oMetaModel = oMDCChart.getModel() && oMDCChart.getModel().getMetaModel();\n\tconst sTargetCollectionPath = oMDCChart.data(\"targetCollectionPath\");\n\tconst sEntitySetPath =\n\t\t(oMetaModel.getObject(`${sTargetCollectionPath}/$kind`) !== \"NavigationProperty\" ? \"/\" : \"\") + oMetadataInfo.contextPath;\n\tconst oParams = merge({}, oMetadataInfo.parameters, {\n\t\tentitySet: oMDCChart.data(\"entitySet\")\n\t});\n\treturn {\n\t\tpath: sEntitySetPath,\n\t\tevents: {\n\t\t\tdataRequested: oMDCChart.getParent().onInternalDataRequested.bind(oMDCChart.getParent())\n\t\t},\n\t\tparameters: oParams\n\t};\n};\nChartDelegate.removeItemFromInnerChart = function (oMDCChart: any, oMDCChartItem: any) {\n\tBaseChartDelegate.removeItemFromInnerChart.call(this, oMDCChart, oMDCChartItem);\n\tif (oMDCChartItem.getType() === \"groupable\") {\n\t\tconst oInnerChart = this.getInnerChart(oMDCChart);\n\t\toInnerChart.fireDeselectData();\n\t}\n};\nChartDelegate._getSortable = function (\n\toMDCChart: any,\n\tsortRestrictionsProperty: SortRestrictionsPropertyInfoType | undefined,\n\tbIsTransAggregate: any\n) {\n\tif (bIsTransAggregate) {\n\t\tif (oMDCChart.data(\"draftSupported\") === \"true\") {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn sortRestrictionsProperty ? sortRestrictionsProperty.sortable : true;\n\t\t}\n\t}\n\treturn sortRestrictionsProperty ? sortRestrictionsProperty.sortable : true;\n};\nChartDelegate._checkAndAddDraftFilter = function (oChart: any, oBindingInfo: any) {\n\tif (oChart.data(\"draftSupported\") === \"true\") {\n\t\tif (!oBindingInfo) {\n\t\t\toBindingInfo = {};\n\t\t}\n\t\tif (!oBindingInfo.filters) {\n\t\t\toBindingInfo.filters = [];\n\t\t\toBindingInfo.filters.push(new Filter(\"IsActiveEntity\", FilterOperator.EQ, true));\n\t\t} else {\n\t\t\toBindingInfo.filters?.aFilters?.push(new Filter(\"IsActiveEntity\", FilterOperator.EQ, true));\n\t\t}\n\t}\n};\n\n/**\n * This function returns an ID which should be used in the internal chart for the measure or dimension.\n * For standard cases, this is just the ID of the property.\n * If it is necessary to use another ID internally inside the chart (e.g. on duplicate property IDs) this method can be overwritten.\n * In this case, <code>getPropertyFromNameAndKind</code> needs to be overwritten as well.\n *\n * @param {string} name ID of the property\n * @param {string} kind Type of the property (measure or dimension)\n * @returns {string} Internal ID for the sap.chart.Chart\n */\nChartDelegate.getInternalChartNameFromPropertyNameAndKind = function (name: string, kind: string) {\n\treturn name.replace(\"_fe_\" + kind + \"_\", \"\");\n};\n\n/**\n * This maps an id of an internal chart dimension or measure & type of a property to its corresponding property entry.\n *\n * @param {string} name ID of internal chart measure or dimension\n * @param {string} kind The kind of property that is used\n * @param {sap.ui.mdc.Chart} mdcChart Reference to the MDC_Chart\n * @returns {object} PropertyInfo object\n */\nChartDelegate.getPropertyFromNameAndKind = function (name: string, kind: string, mdcChart: any) {\n\treturn mdcChart.getPropertyHelper().getProperty(\"_fe_\" + kind + \"_\" + name);\n};\n\n/**\n * Provide the chart's filter delegate to provide basic filter functionality such as adding FilterFields.\n *\n * @returns Object for the personalization of the chart filter\n */\nChartDelegate.getFilterDelegate = function () {\n\treturn Object.assign(\n\t\t{\n\t\t\tapiVersion: 2\n\t\t},\n\t\tFilterBarDelegate,\n\t\t{\n\t\t\taddItem: function (oParentControl: any, sPropertyInfoName: any) {\n\t\t\t\tconst prop = ChartDelegate.getInternalChartNameFromPropertyNameAndKind(sPropertyInfoName, \"groupable\");\n\t\t\t\treturn FilterBarDelegate.addItem(oParentControl, prop).then((oFilterItem: any) => {\n\t\t\t\t\toFilterItem?.bindProperty(\"conditions\", {\n\t\t\t\t\t\tpath: \"$filters>/conditions/\" + sPropertyInfoName\n\t\t\t\t\t});\n\t\t\t\t\treturn oFilterItem;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t);\n};\n\nexport default ChartDelegate;\n"],"mappings":"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"}},{"offset":{"line":3785,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","merge","CommonUtils","MetaModelFunction","ResourceModelHelper","ChartHelper","ChartUtils","CommonHelper","MacrosDelegateUtil","FilterUtils","MDCLib","DelegateUtil","BaseChartDelegate","Filter","FilterOperator","FilterBarDelegate","getResourceModel","isMultiValueFilterExpression","getSortRestrictionsInfo","getFilterRestrictionsInfo","ChartItemRoleType","ChartDelegate","Object","assign","apiVersion","_setChartNoDataText","oChart","oBindingInfo","sNoDataKey","oChartFilterInfo","getAllFilterInfo","suffixResourceKey","path","startsWith","substr","_getNoDataTextWithFilters","data","getFilter","search","filters","length","setNoDataText","getText","undefined","_handleProperty","oMDCChart","mEntitySetAnnotations","mKnownAggregatableProps","mCustomAggregates","aProperties","sCriticality","oApplySupported","parseCustomData","sortRestrictionsInfo","oFilterRestrictions","oFilterRestrictionsInfo","oObj","this","getModel","getObject","getPath","sKey","oMetaModel","aModes","getP13nMode","checkForNonfilterableEntitySet","$kind","$isCollection","oPropertyAnnotations","sPath","getMetaContext","aGroupableProperties","GroupableProperties","aAggregatableProperties","AggregatableProperties","bGroupable","checkPropertyType","bAggregatable","checkPropertyIsBothGroupableAndAggregatable","aAggregateProperties","_createPropertyInfosForAggregatable","forEach","oAggregateProperty","push","includes","aKnownAggregatableProps","keys","aGroupablePropertiesValues","map","oProperty","$PropertyPath","sProperty","addPropertyToChart","sName","sTextProperty","$Path","bIsNavigationText","indexOf","error","bIsGroupable","bIsAggregatable","bIsHidden","name","propertyPath","label","sortable","_getSortable","propertyInfo","filterable","groupable","aggregatable","maxConditions","sortKey","role","category","criticality","typeConfig","visible","textProperty","textFormatter","_oMDCChart$getModel","_oMDCChart$getModel$g","_oMDCChart$getModel$g2","bEntitySetFilerable","getMetaModel","Filterable","filter","item","setP13nMode","element","_element$Property","Property","customProperties","Error","formatText","oValue1","oValue2","oTextArrangementAnnotation","$EnumMember","updateBindingInfo","oFilter","getCore","byId","mConditions","getConditions","parameters","oInfo","getFilterInfo","enableSearch","$search","normalizeSearchTerm","sParameterPath","getParametersInfo","oFilterInfo","getChartPropertiesWithoutPrefixes","and","sorter","getSorters","_checkAndAddDraftFilter","fetchProperties","oModel","_getModel","pCreatePropertyInfos","Promise","resolve","attachModelContextChange","resolver","onModelContextChange","then","oRetrievedModel","_createPropertyInfos","setCachedProperties","oEvent","oData","getSource","detachModelContextChange","async","sEntitySetPath","aResults","all","requestObject","oEntityType","allowedPropertiesForFilterOption","getCustomAggregate","sAnno","aPropertyPromise","sAnnoKey","replace","aAnno","split","mTypeAggregatableProps","sAggregatable","sPropKey","aggregationMethod","fetchCriticality","createBindingContext","bind","i","getTypeUtil","getTypeConfig","$Type","aDimensions","aMeasures","aChartItems","getItems","key","getType","getInternalChartNameFromPropertyNameAndKind","getName","val","axis1","datapoint","sCustom","oItem","rebind","sSearch","oInnerChart","getControlDelegate","getInnerChart","oChartBinding","getBinding","suspend","setAggregation","oInnerChartDelegate","onBeforeRendering","resume","removeEventDelegate","addEventDelegate","fireEvent","_setChart","oChartAPI","getParent","setVizProperties","detachSelectData","handleSelectionChange","detachDeselectData","detachDrilledUp","attachSelectData","attachDeselectData","attachDrilledUp","setSelectionMode","getPayload","selectionMode","toUpperCase","_getBindingInfo","_getBindingInfoFromState","oMetadataInfo","getDelegate","payload","sTargetCollectionPath","contextPath","oParams","entitySet","events","dataRequested","onInternalDataRequested","removeItemFromInnerChart","oMDCChartItem","call","fireDeselectData","sortRestrictionsProperty","bIsTransAggregate","EQ","_oBindingInfo$filters","_oBindingInfo$filters2","aFilters","kind","getPropertyFromNameAndKind","mdcChart","getPropertyHelper","getProperty","getFilterDelegate","addItem","oParentControl","sPropertyInfoName","prop","oFilterItem","bindProperty"],"sources":["ChartDelegate-dbg.js"],"mappings":"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","sourceRoot":"chart"}},{"offset":{"line":3790,"column":0},"map":{"version":3,"names":["getEntitySetPath","annotationContext","getPath","replace","ChartTypeEnum","DimensionRoleTypeEnum","ChartHelper","formatJSONToString","crit","undefined","criticality","JSON","stringify","RegExp","formatChartType","chartType","$EnumMember","formatDimensions","annotation","getObject","metaModel","getModel","entitySetPath","dimensions","isNavigationText","DimensionAttributes","dimension","Dimensions","key","$PropertyPath","text","indexOf","Log","error","$Path","chartDimension","textPath","label","role","attribute","Dimension","Role","fetchCriticality","createBindingContext","then","push","dimensionModel","JSONModel","$$valueAsPromise","oMetaModel","oCtx","UI","requestObject","aValueCriticality","oCriticality","oValueCriticality","VeryPositive","Positive","Critical","VeryNegative","Negative","Neutral","i","length","Criticality","endsWith","Value","sKey","formatMeasures","getData","getUiChart","presentationContext","getUiControl","getOperationAvailableMap","chart","contextContext","chartCollection","Actions","ActionHelper","getSortConditions","oContext","oPresentationVariant","sPresentationVariantPath","oApplySupported","CommonHelper","_isPresentationVariantAnnotation","SortOrder","aSortConditions","sorters","sEntityPath","split","forEach","oCondition","oSortProperty","oSorter","DynamicProperty","$AnnotationPath","Name","Property","aGroupableProperties","GroupableProperties","name","descending","Descending","Error","getBindingData","sTargetCollection","aActions","aOperationAvailablePath","sSelect","$Type","sActionName","Action","oActionOperationAvailable","getActionPath","join","_getModel","oCollection","oInterface","context","isDataFieldForActionButtonEnabled","bIsBound","sAction","sOperationAvailableMap","sEnableSelectOn","oModel","sNavPath","sPartner","$Partner","oOperationAvailableMap","parse","aPath","sNumberOfSelectedContexts","getNumberOfContextsExpression","sPath","getHiddenPathExpressionForTableActionsAndIBN","sHiddenPath","oDetails","sPropertyPath","sEntitySetPath","ODataModelAnnotationHelper","getNavigationPath","aSplitHiddenPath","sNavigationPath","slice","getPressEventForDataFieldForActionButton","id","action","operationAvailableMap","getPressEventDataFieldForActionButton","contexts","getActionType","getCollectionName","collection","requiresIContext"],"sourceRoot":"chart","sources":["ChartHelper.ts"],"sourcesContent":["import type * as Edm from \"@sap-ux/vocabularies-types/Edm\";\nimport { AggregationAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Aggregation\";\nimport { CommonAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { Chart, ChartType, DataFieldForAction } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTerms, UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport type AttributeModel from \"sap/fe/core/buildingBlocks/AttributeModel\";\nimport { getUiControl } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport type { ComputedAnnotationInterface } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport ActionHelper from \"sap/fe/macros/internal/helpers/ActionHelper\";\nimport type Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ODataModelAnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport { ExpandPathType, MetaModelEnum } from \"types/metamodel_types\";\n\nfunction getEntitySetPath(annotationContext: Context) {\n\treturn annotationContext.getPath().replace(/@com.sap.vocabularies.UI.v1.(Chart|PresentationVariant).*/, \"\");\n}\n\nenum ChartTypeEnum {\n\t\"com.sap.vocabularies.UI.v1.ChartType/Column\" = \"column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked\" = \"stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnDual\" = \"dual_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStackedDual\" = \"dual_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100\" = \"100_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStackedDual100\" = \"100_dual_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Bar\" = \"bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStacked\" = \"stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarDual\" = \"dual_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStackedDual\" = \"dual_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStacked100\" = \"100_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStackedDual100\" = \"100_dual_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Area\" = \"area\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/AreaStacked\" = \"stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100\" = \"100_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea\" = \"bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked\" = \"stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100\" = \"100_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Line\" = \"line\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/LineDual\" = \"dual_line\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Combination\" = \"combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/CombinationStacked\" = \"stacked_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/CombinationDual\" = \"dual_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/CombinationStackedDual\" = \"dual_stacked_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationStacked\" = \"horizontal_stacked_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Pie\" = \"pie\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Donut\" = \"donut\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Scatter\" = \"scatter\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Bubble\" = \"bubble\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Radar\" = \"line\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HeatMap\" = \"heatmap\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/TreeMap\" = \"treemap\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Waterfall\" = \"waterfall\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Bullet\" = \"bullet\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/VerticalBullet\" = \"vertical_bullet\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalWaterfall\" = \"horizontal_waterfall\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationDual\" = \"dual_horizontal_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationStackedDual\" = \"dual_horizontal_stacked_combination\"\n}\nenum DimensionRoleTypeEnum {\n\t\"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Category\" = \"category\",\n\t\"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series\" = \"series\",\n\t\"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Category2\" = \"category2\"\n}\n/**\n * Helper class for sap.fe.macros Chart phantom control for preprocessing.\n * <h3><b>Note:</b></h3>\n * The class is experimental and the API/behaviour is not finalised\n * and hence this should not be used for productive usage.\n * Especially this class is not intended to be used for the FE scenario,\n * here we shall use sap.fe.macros.ChartHelper that is especially tailored for V4\n * meta model\n *\n * @author SAP SE\n * @private\n * @experimental\n * @since 1.62.0\n * @alias sap.fe.macros.ChartHelper\n */\nconst ChartHelper = {\n\tformatJSONToString(crit: object) {\n\t\tif (!crit) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tlet criticality = JSON.stringify(crit);\n\t\tcriticality = criticality.replace(new RegExp(\"{\", \"g\"), \"\\\\{\");\n\t\tcriticality = criticality.replace(new RegExp(\"}\", \"g\"), \"\\\\}\");\n\t\treturn criticality;\n\t},\n\tformatChartType(chartType: ChartType) {\n\t\treturn ChartTypeEnum[(chartType as unknown as MetaModelEnum<ChartTypeEnum>)?.$EnumMember as keyof typeof ChartTypeEnum];\n\t},\n\tformatDimensions(annotationContext: Context) {\n\t\tconst annotation = annotationContext.getObject(\"./\") as Chart,\n\t\t\tmetaModel = annotationContext.getModel(),\n\t\t\tentitySetPath = getEntitySetPath(annotationContext),\n\t\t\tdimensions = [];\n\n\t\tlet isNavigationText = false;\n\n\t\t//perhaps there are no dimension\n\t\tannotation.DimensionAttributes = annotation.DimensionAttributes || [];\n\n\t\tfor (const dimension of annotation.Dimensions) {\n\t\t\tconst key = (dimension as unknown as ExpandPathType<Edm.PropertyPath>).$PropertyPath;\n\t\t\tconst text = metaModel.getObject(`${entitySetPath + key}@${CommonAnnotationTerms.Text}`) || {};\n\t\t\tif (key.indexOf(\"/\") > -1) {\n\t\t\t\tLog.error(`$expand is not yet supported. Dimension: ${key} from an association cannot be used`);\n\t\t\t}\n\t\t\tif (text.$Path && text.$Path.indexOf(\"/\") > -1) {\n\t\t\t\tLog.error(\n\t\t\t\t\t`$expand is not yet supported. Text Property: ${text.$Path} from an association cannot be used for the dimension ${key}`\n\t\t\t\t);\n\t\t\t\tisNavigationText = true;\n\t\t\t}\n\n\t\t\tconst chartDimension: { [key: string]: string } = {\n\t\t\t\tkey: key,\n\t\t\t\ttextPath: !isNavigationText ? text.$Path : undefined,\n\t\t\t\tlabel: metaModel.getObject(`${entitySetPath + key}@${CommonAnnotationTerms.Label}`),\n\t\t\t\trole: \"category\"\n\t\t\t};\n\n\t\t\tfor (const attribute of annotation.DimensionAttributes) {\n\t\t\t\tif (chartDimension.key === (attribute.Dimension as unknown as ExpandPathType<Edm.PropertyPath>)?.$PropertyPath) {\n\t\t\t\t\tchartDimension.role =\n\t\t\t\t\t\tDimensionRoleTypeEnum[\n\t\t\t\t\t\t\t(attribute.Role as unknown as MetaModelEnum<DimensionRoleTypeEnum>)\n\t\t\t\t\t\t\t\t?.$EnumMember as keyof typeof DimensionRoleTypeEnum\n\t\t\t\t\t\t] || chartDimension.role;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchartDimension.criticality = this.fetchCriticality(metaModel, metaModel.createBindingContext(entitySetPath + key)).then(\n\t\t\t\tthis.formatJSONToString\n\t\t\t);\n\n\t\t\tdimensions.push(chartDimension);\n\t\t}\n\n\t\tconst dimensionModel = new JSONModel(dimensions);\n\t\t(dimensionModel as AttributeModel).$$valueAsPromise = true;\n\t\treturn dimensionModel.createBindingContext(\"/\");\n\t},\n\n\tfetchCriticality(oMetaModel: any, oCtx: any) {\n\t\tconst UI = \"@com.sap.vocabularies.UI.v1\";\n\t\treturn oMetaModel.requestObject(`${UI}.ValueCriticality`, oCtx).then(function (aValueCriticality: any) {\n\t\t\tlet oCriticality, oValueCriticality: any;\n\n\t\t\tif (aValueCriticality) {\n\t\t\t\toCriticality = {\n\t\t\t\t\tVeryPositive: [],\n\t\t\t\t\tPositive: [],\n\t\t\t\t\tCritical: [],\n\t\t\t\t\tVeryNegative: [],\n\t\t\t\t\tNegative: [],\n\t\t\t\t\tNeutral: []\n\t\t\t\t} as any;\n\n\t\t\t\tfor (let i = 0; i < aValueCriticality.length; i++) {\n\t\t\t\t\toValueCriticality = aValueCriticality[i];\n\n\t\t\t\t\tif (oValueCriticality.Criticality.$EnumMember.endsWith(\"VeryPositive\")) {\n\t\t\t\t\t\toCriticality.VeryPositive.push(oValueCriticality.Value);\n\t\t\t\t\t} else if (oValueCriticality.Criticality.$EnumMember.endsWith(\"Positive\")) {\n\t\t\t\t\t\toCriticality.Positive.push(oValueCriticality.Value);\n\t\t\t\t\t} else if (oValueCriticality.Criticality.$EnumMember.endsWith(\"Critical\")) {\n\t\t\t\t\t\toCriticality.Critical.push(oValueCriticality.Value);\n\t\t\t\t\t} else if (oValueCriticality.Criticality.$EnumMember.endsWith(\"VeryNegative\")) {\n\t\t\t\t\t\toCriticality.VeryNegative.push(oValueCriticality.Value);\n\t\t\t\t\t} else if (oValueCriticality.Criticality.$EnumMember.endsWith(\"Negative\")) {\n\t\t\t\t\t\toCriticality.Negative.push(oValueCriticality.Value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toCriticality.Neutral.push(oValueCriticality.Value);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (const sKey in oCriticality) {\n\t\t\t\t\tif (oCriticality[sKey].length == 0) {\n\t\t\t\t\t\tdelete oCriticality[sKey];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn oCriticality;\n\t\t});\n\t},\n\n\tformatMeasures(annotationContext: Context) {\n\t\treturn (annotationContext.getModel() as JSONModel).getData();\n\t},\n\n\tgetUiChart(presentationContext: Context) {\n\t\treturn getUiControl(presentationContext, `@${UIAnnotationTerms.Chart}`);\n\t},\n\tgetOperationAvailableMap(chart: Chart, contextContext: ComputedAnnotationInterface) {\n\t\tconst chartCollection = chart?.Actions || [];\n\t\treturn JSON.stringify(ActionHelper.getOperationAvailableMap(chartCollection, \"chart\", contextContext));\n\t},\n\t/**\n\t * Returns a stringified JSON object containing Presentation Variant sort conditions.\n\t *\n\t * @param oContext\n\t * @param oPresentationVariant Presentation Variant annotation\n\t * @param sPresentationVariantPath\n\t * @param oApplySupported\n\t * @returns Stringified JSON object\n\t */\n\tgetSortConditions: function (oContext: any, oPresentationVariant: any, sPresentationVariantPath: string, oApplySupported: any) {\n\t\tif (\n\t\t\toPresentationVariant &&\n\t\t\tCommonHelper._isPresentationVariantAnnotation(sPresentationVariantPath) &&\n\t\t\toPresentationVariant.SortOrder\n\t\t) {\n\t\t\tconst aSortConditions: any = {\n\t\t\t\tsorters: []\n\t\t\t};\n\t\t\tconst sEntityPath = oContext.getPath(0).split(\"@\")[0];\n\t\t\toPresentationVariant.SortOrder.forEach(function (oCondition: any = {}) {\n\t\t\t\tlet oSortProperty: any = \"\";\n\t\t\t\tconst oSorter: any = {};\n\t\t\t\tif (oCondition.DynamicProperty) {\n\t\t\t\t\toSortProperty =\n\t\t\t\t\t\t\"_fe_aggregatable_\" +\n\t\t\t\t\t\toContext.getModel(0).getObject(sEntityPath + oCondition.DynamicProperty.$AnnotationPath)?.Name;\n\t\t\t\t} else if (oCondition.Property) {\n\t\t\t\t\tconst aGroupableProperties = oApplySupported.GroupableProperties;\n\t\t\t\t\tif (aGroupableProperties && aGroupableProperties.length) {\n\t\t\t\t\t\tfor (let i = 0; i < aGroupableProperties.length; i++) {\n\t\t\t\t\t\t\tif (aGroupableProperties[i].$PropertyPath === oCondition.Property.$PropertyPath) {\n\t\t\t\t\t\t\t\toSortProperty = \"_fe_groupable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!oSortProperty) {\n\t\t\t\t\t\t\t\toSortProperty = \"_fe_aggregatable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\toContext\n\t\t\t\t\t\t\t.getModel(0)\n\t\t\t\t\t\t\t.getObject(`${sEntityPath + oCondition.Property.$PropertyPath}@${AggregationAnnotationTerms.Groupable}`)\n\t\t\t\t\t) {\n\t\t\t\t\t\toSortProperty = \"_fe_groupable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toSortProperty = \"_fe_aggregatable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oSortProperty) {\n\t\t\t\t\toSorter.name = oSortProperty;\n\t\t\t\t\toSorter.descending = !!oCondition.Descending;\n\t\t\t\t\taSortConditions.sorters.push(oSorter);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"Please define the right path to the sort property\");\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn JSON.stringify(aSortConditions);\n\t\t}\n\t\treturn undefined;\n\t},\n\tgetBindingData(sTargetCollection: any, oContext: any, aActions: any) {\n\t\tconst aOperationAvailablePath = [];\n\t\tlet sSelect;\n\t\tfor (const i in aActions) {\n\t\t\tif (aActions[i].$Type === UIAnnotationTypes.DataFieldForAction) {\n\t\t\t\tconst sActionName = aActions[i].Action;\n\t\t\t\tconst oActionOperationAvailable = CommonHelper.getActionPath(oContext, false, sActionName, true);\n\t\t\t\tif (oActionOperationAvailable && oActionOperationAvailable.$Path) {\n\t\t\t\t\taOperationAvailablePath.push(`'${oActionOperationAvailable.$Path}'`);\n\t\t\t\t} else if (oActionOperationAvailable === null) {\n\t\t\t\t\t// We disabled action advertisement but kept it in the code for the time being\n\t\t\t\t\t//aOperationAvailablePath.push(sActionName);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (aOperationAvailablePath.length > 0) {\n\t\t\t//TODO: request fails with $select. check this with odata v4 model\n\t\t\tsSelect = \" $select: '\" + aOperationAvailablePath.join() + \"'\";\n\t\t}\n\t\treturn (\n\t\t\t\"'{path: '\" +\n\t\t\t(oContext.getObject(\"$kind\") === \"EntitySet\" ? \"/\" : \"\") +\n\t\t\toContext.getObject(\"@sapui.name\") +\n\t\t\t\"'\" +\n\t\t\t(sSelect ? \",parameters:{\" + sSelect + \"}\" : \"\") +\n\t\t\t\"}'\"\n\t\t);\n\t},\n\t_getModel(oCollection: any, oInterface: any) {\n\t\treturn oInterface.context;\n\t},\n\t// TODO: combine this one with the one from the table\n\tisDataFieldForActionButtonEnabled(\n\t\tbIsBound: boolean,\n\t\tsAction: string,\n\t\toCollection: Context,\n\t\tsOperationAvailableMap: string,\n\t\tsEnableSelectOn: string\n\t) {\n\t\tif (bIsBound !== true) {\n\t\t\treturn \"true\";\n\t\t}\n\t\tconst oModel = oCollection.getModel();\n\t\tconst sNavPath = oCollection.getPath();\n\t\tconst sPartner = oModel.getObject(sNavPath).$Partner;\n\t\tconst oOperationAvailableMap = sOperationAvailableMap && JSON.parse(sOperationAvailableMap);\n\t\tconst aPath = oOperationAvailableMap && oOperationAvailableMap[sAction] && oOperationAvailableMap[sAction].split(\"/\");\n\t\tconst sNumberOfSelectedContexts = ActionHelper.getNumberOfContextsExpression(sEnableSelectOn);\n\t\tif (aPath && aPath[0] === sPartner) {\n\t\t\tconst sPath = oOperationAvailableMap[sAction].replace(sPartner + \"/\", \"\");\n\t\t\treturn \"{= ${\" + sNumberOfSelectedContexts + \" && ${\" + sPath + \"}}\";\n\t\t} else {\n\t\t\treturn \"{= ${\" + sNumberOfSelectedContexts + \"}\";\n\t\t}\n\t},\n\tgetHiddenPathExpressionForTableActionsAndIBN(sHiddenPath: any, oDetails: any) {\n\t\tconst oContext = oDetails.context,\n\t\t\tsPropertyPath = oContext.getPath(),\n\t\t\tsEntitySetPath = ODataModelAnnotationHelper.getNavigationPath(sPropertyPath);\n\t\tif (sHiddenPath.indexOf(\"/\") > 0) {\n\t\t\tconst aSplitHiddenPath = sHiddenPath.split(\"/\");\n\t\t\tconst sNavigationPath = aSplitHiddenPath[0];\n\t\t\t// supports visiblity based on the property from the partner association\n\t\t\tif (oContext.getObject(sEntitySetPath + \"/$Partner\") === sNavigationPath) {\n\t\t\t\treturn \"{= !%{\" + aSplitHiddenPath.slice(1).join(\"/\") + \"} }\";\n\t\t\t}\n\t\t\t// any other association will be ignored and the button will be made visible\n\t\t}\n\t\treturn true;\n\t},\n\t/**\n\t * Method to get press event for DataFieldForActionButton.\n\t *\n\t * @function\n\t * @name getPressEventForDataFieldForActionButton\n\t * @param id Current control ID\n\t * @param action DataFieldForAction model\n\t * @param operationAvailableMap Stringified JSON object\n\t * @returns A binding expression for the press property of the DataFieldForActionButton\n\t */\n\tgetPressEventForDataFieldForActionButton(id: string, action: DataFieldForAction, operationAvailableMap: string): string {\n\t\treturn ActionHelper.getPressEventDataFieldForActionButton(\n\t\t\tid,\n\t\t\taction,\n\t\t\t{\n\t\t\t\tcontexts: \"${internal>selectedContexts}\"\n\t\t\t},\n\t\t\toperationAvailableMap\n\t\t);\n\t},\n\t/**\n\t * @function\n\t * @name getActionType\n\t * @param action DataFieldForAction model\n\t * @returns A Boolean value depending on the action type\n\t */\n\tgetActionType(action: DataFieldForAction) {\n\t\treturn (\n\t\t\t(action[\"$Type\"].indexOf(UIAnnotationTypes.DataFieldForIntentBasedNavigation) > -1 ||\n\t\t\t\taction[\"$Type\"].indexOf(UIAnnotationTypes.DataFieldForAction) > -1) &&\n\t\t\taction[\"Inline\"]\n\t\t);\n\t},\n\tgetCollectionName(collection: string) {\n\t\treturn collection.split(\"/\")[collection.split(\"/\").length - 1];\n\t}\n};\n(ChartHelper.getSortConditions as any).requiresIContext = true;\n\nexport default ChartHelper;\n"],"mappings":"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"}},{"offset":{"line":4105,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","DataVisualization","CommonHelper","ActionHelper","JSONModel","ODataModelAnnotationHelper","getUiControl","getEntitySetPath","annotationContext","getPath","replace","ChartTypeEnum","DimensionRoleTypeEnum","ChartHelper","formatJSONToString","crit","undefined","criticality","JSON","stringify","RegExp","formatChartType","chartType","$EnumMember","formatDimensions","annotation","getObject","metaModel","getModel","entitySetPath","dimensions","isNavigationText","DimensionAttributes","dimension","Dimensions","key","$PropertyPath","text","indexOf","error","$Path","chartDimension","textPath","label","role","attribute","_attribute$Dimension","Dimension","_attribute$Role","Role","this","fetchCriticality","createBindingContext","then","push","dimensionModel","$$valueAsPromise","oMetaModel","oCtx","UI","requestObject","aValueCriticality","oCriticality","oValueCriticality","VeryPositive","Positive","Critical","VeryNegative","Negative","Neutral","i","length","Criticality","endsWith","Value","sKey","formatMeasures","getData","getUiChart","presentationContext","getOperationAvailableMap","chart","contextContext","chartCollection","Actions","getSortConditions","oContext","oPresentationVariant","sPresentationVariantPath","oApplySupported","_isPresentationVariantAnnotation","SortOrder","aSortConditions","sorters","sEntityPath","split","forEach","oCondition","arguments","oSortProperty","oSorter","DynamicProperty","_oContext$getModel$ge","$AnnotationPath","Name","Property","aGroupableProperties","GroupableProperties","name","descending","Descending","Error","getBindingData","sTargetCollection","aActions","aOperationAvailablePath","sSelect","$Type","sActionName","Action","oActionOperationAvailable","getActionPath","join","_getModel","oCollection","oInterface","context","isDataFieldForActionButtonEnabled","bIsBound","sAction","sOperationAvailableMap","sEnableSelectOn","oModel","sNavPath","sPartner","$Partner","oOperationAvailableMap","parse","aPath","sNumberOfSelectedContexts","getNumberOfContextsExpression","sPath","getHiddenPathExpressionForTableActionsAndIBN","sHiddenPath","oDetails","sPropertyPath","sEntitySetPath","getNavigationPath","aSplitHiddenPath","sNavigationPath","slice","getPressEventForDataFieldForActionButton","id","action","operationAvailableMap","getPressEventDataFieldForActionButton","contexts","getActionType","getCollectionName","collection","requiresIContext"],"sources":["ChartHelper-dbg.js"],"mappings":"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","sourceRoot":"chart"}},{"offset":{"line":4110,"column":0},"map":{"version":3,"names":["ChartRuntime","fnUpdateChart","oEvent","oInnerChart","getSource","oMdcChart","getParent","sActionsMultiselectDisabled","oActionOperationAvailableMap","aActionsMultiselectDisabled","getCustomData","forEach","oCustomData","getKey","DelegateUtil","customData","getValue","split","oInternalModelContext","getBindingContext","aSelectedContexts","oModelObject","aSelectedDataPoints","ChartUtils","getChartSelectedData","i","length","push","context","setProperty","getModel","getPath","getSelectedDataPoints","count","j","oSelectedContext","oContextData","getObject","key","indexOf","sActionPath","substring","ActionRuntime","setActionEnablement","sAction"],"sourceRoot":"chart","sources":["ChartRuntime.ts"],"sourcesContent":["import Chart from \"sap/chart/Chart\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport ChartUtils from \"sap/fe/macros/chart/ChartUtils\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport UI5Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/mdc/Control\";\n\ntype InnerChart = Control & Chart & { getParent: Function; getCustomData: Function };\ntype MDCChart = Control;\ntype ObjectWithCount = object & { count: number };\ninterface BooleanMap {\n\t[key: string]: boolean;\n}\n\n/**\n * Static class used by MDC_Chart during runtime\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst ChartRuntime = {\n\t/**\n\t * Updates the chart after selection or deselection of data points.\n\t *\n\t * @function\n\t * @static\n\t * @name sap.fe.macros.chart.ChartRuntime.fnUpdateChart\n\t * @memberof sap.fe.macros.chart.ChartRuntime\n\t * @param oEvent Chart event\n\t * @ui5-restricted\n\t */\n\tfnUpdateChart: function (oEvent: UI5Event) {\n\t\tconst oInnerChart = oEvent.getSource() as InnerChart;\n\t\tconst oMdcChart = oInnerChart.getParent() as MDCChart;\n\t\tlet sActionsMultiselectDisabled,\n\t\t\toActionOperationAvailableMap = {},\n\t\t\taActionsMultiselectDisabled: Object[] = [];\n\t\t// changing drill stack changes order of custom data, looping through all\n\t\toMdcChart.getCustomData().forEach(function (oCustomData: any) {\n\t\t\tif (oCustomData.getKey() === \"operationAvailableMap\") {\n\t\t\t\toActionOperationAvailableMap =\n\t\t\t\t\tDelegateUtil.getCustomData(oMdcChart, \"operationAvailableMap\") &&\n\t\t\t\t\tDelegateUtil.getCustomData(oMdcChart, \"operationAvailableMap\").customData;\n\t\t\t} else if (oCustomData.getKey() === \"multiSelectDisabledActions\") {\n\t\t\t\tsActionsMultiselectDisabled = oCustomData.getValue();\n\t\t\t\taActionsMultiselectDisabled = sActionsMultiselectDisabled ? sActionsMultiselectDisabled.split(\",\") : [];\n\t\t\t}\n\t\t});\n\t\tconst oInternalModelContext = oMdcChart.getBindingContext(\"internal\") as InternalModelContext;\n\n\t\tconst aSelectedContexts = [];\n\t\tlet oModelObject: BooleanMap | undefined;\n\t\tconst aSelectedDataPoints = ChartUtils.getChartSelectedData(oInnerChart);\n\t\tfor (let i = 0; i < aSelectedDataPoints.length; i++) {\n\t\t\taSelectedContexts.push(aSelectedDataPoints[i].context);\n\t\t}\n\t\toInternalModelContext.setProperty(\"selectedContexts\", aSelectedContexts);\n\t\toInternalModelContext\n\t\t\t.getModel()\n\t\t\t.setProperty(\n\t\t\t\t`${oInternalModelContext.getPath()}/numberOfSelectedContexts`,\n\t\t\t\t(oInnerChart.getSelectedDataPoints() as ObjectWithCount).count\n\t\t\t);\n\t\tfor (let j = 0; j < aSelectedContexts.length; j++) {\n\t\t\tconst oSelectedContext = aSelectedContexts[j];\n\t\t\tconst oContextData = oSelectedContext.getObject();\n\t\t\tfor (const key in oContextData) {\n\t\t\t\tif (key.indexOf(\"#\") === 0) {\n\t\t\t\t\tlet sActionPath = key;\n\t\t\t\t\tsActionPath = sActionPath.substring(1, sActionPath.length);\n\t\t\t\t\toModelObject = oInternalModelContext.getObject() as BooleanMap;\n\t\t\t\t\toModelObject[sActionPath] = true;\n\t\t\t\t\toInternalModelContext.setProperty(\"\", oModelObject);\n\t\t\t\t}\n\t\t\t}\n\t\t\toModelObject = oInternalModelContext.getObject() as BooleanMap;\n\t\t}\n\n\t\tActionRuntime.setActionEnablement(oInternalModelContext, oActionOperationAvailableMap, aSelectedContexts, \"chart\");\n\n\t\tif (aSelectedContexts.length > 1) {\n\t\t\taActionsMultiselectDisabled.forEach(function (sAction: any) {\n\t\t\t\toInternalModelContext.setProperty(sAction, false);\n\t\t\t});\n\t\t}\n\t}\n};\n\nexport default ChartRuntime;\n"],"mappings":"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"}},{"offset":{"line":4182,"column":0},"map":{"version":3,"names":["sap","ui","define","ActionRuntime","ChartUtils","DelegateUtil","ChartRuntime","fnUpdateChart","oEvent","oInnerChart","getSource","oMdcChart","getParent","sActionsMultiselectDisabled","oActionOperationAvailableMap","aActionsMultiselectDisabled","getCustomData","forEach","oCustomData","getKey","customData","getValue","split","oInternalModelContext","getBindingContext","aSelectedContexts","oModelObject","aSelectedDataPoints","getChartSelectedData","i","length","push","context","setProperty","getModel","getPath","getSelectedDataPoints","count","j","oSelectedContext","oContextData","getObject","key","indexOf","sActionPath","substring","setActionEnablement","sAction"],"sources":["ChartRuntime-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,8CAAO,CAAC,4BAA6B,iCAAkC,8BAA+B,SAAUC,EAAeC,EAAYC,GAChJ,aAQA,MAAMC,EAAe,CAWnBC,cAAe,SAAUC,GACvB,MAAMC,EAAcD,EAAOE,YAC3B,MAAMC,EAAYF,EAAYG,YAC9B,IAAIC,EACFC,EAA+B,CAAC,EAChCC,EAA8B,GAEhCJ,EAAUK,gBAAgBC,QAAQ,SAAUC,GAC1C,GAAIA,EAAYC,WAAa,wBAAyB,CACpDL,EAA+BT,EAAaW,cAAcL,EAAW,0BAA4BN,EAAaW,cAAcL,EAAW,yBAAyBS,UAClK,MAAO,GAAIF,EAAYC,WAAa,6BAA8B,CAChEN,EAA8BK,EAAYG,WAC1CN,EAA8BF,EAA8BA,EAA4BS,MAAM,KAAO,EACvG,CACF,GACA,MAAMC,EAAwBZ,EAAUa,kBAAkB,YAC1D,MAAMC,EAAoB,GAC1B,IAAIC,EACJ,MAAMC,EAAsBvB,EAAWwB,qBAAqBnB,GAC5D,IAAK,IAAIoB,EAAI,EAAGA,EAAIF,EAAoBG,OAAQD,IAAK,CACnDJ,EAAkBM,KAAKJ,EAAoBE,GAAGG,QAChD,CACAT,EAAsBU,YAAY,mBAAoBR,GACtDF,EAAsBW,WAAWD,YAAY,GAAGV,EAAsBY,qCAAsC1B,EAAY2B,wBAAwBC,OAChJ,IAAK,IAAIC,EAAI,EAAGA,EAAIb,EAAkBK,OAAQQ,IAAK,CACjD,MAAMC,EAAmBd,EAAkBa,GAC3C,MAAME,EAAeD,EAAiBE,YACtC,IAAK,MAAMC,KAAOF,EAAc,CAC9B,GAAIE,EAAIC,QAAQ,OAAS,EAAG,CAC1B,IAAIC,EAAcF,EAClBE,EAAcA,EAAYC,UAAU,EAAGD,EAAYd,QACnDJ,EAAeH,EAAsBkB,YACrCf,EAAakB,GAAe,KAC5BrB,EAAsBU,YAAY,GAAIP,EACxC,CACF,CACAA,EAAeH,EAAsBkB,WACvC,CACAtC,EAAc2C,oBAAoBvB,EAAuBT,EAA8BW,EAAmB,SAC1G,GAAIA,EAAkBK,OAAS,EAAG,CAChCf,EAA4BE,QAAQ,SAAU8B,GAC5CxB,EAAsBU,YAAYc,EAAS,MAC7C,EACF,CACF,GAEF,OAAOzC,CACT,EAAG","sourceRoot":"chart"}},{"offset":{"line":4187,"column":0},"map":{"version":3,"names":["ChartUtils","getChartSelections","oMdcChart","bClearSelections","getChartModel","aVizSelections","getChartFilters","aFilters","Filter","setChartFilters","oDrillStack","oChart","getControlDelegate","getInnerChart","aChartFilters","aVisibleDimensions","addChartFilters","aSelectedData","item","aDimFilters","i","sPath","sValue","data","undefined","push","path","operator","FilterOperator","EQ","value1","length","getVizSelection","getVisibleDimensions","aDimensions","getDimensionsFromDrillStack","toString","aDrillStackKeys","Object","keys","aPrevDrillStackData","getFilterBarFilterInfo","FilterUtil","getFilterInfo","getFilter","targetControl","getAllFilterInfo","oFilters","aP13nProperties","Utils","getP13nFilters","selectionPresentationVariantPath","CommonHelper","parseCustomData","aSelctionVariant","CommonUtils","getFiltersInfoForSV","filters","forEach","element","filterValue","getChartSelectedData","aSelectedPoints","getSelectionBehavior","getSelectedDataPoints","dataPoints","getSelectedCategories","categories","getSelectedSeries","series","vData","oInternalModelContext","getBindingContext","setProperty","getObject","aCurrentDrillStack","getDrillStack","aCurrentDrillView","pop","dimension","_getVizFrame","vizSelection"],"sourceRoot":"chart","sources":["ChartUtils.ts"],"sourcesContent":["import type Chart from \"sap/chart/Chart\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport FilterUtil from \"sap/fe/macros/filter/FilterUtils\";\nimport type MDCChart from \"sap/ui/mdc/Chart\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport CommonHelper from \"../CommonHelper\";\nimport Utils from \"../table/Utils\";\n\nconst ChartUtils = {\n\t/**\n\t * Method that returns the chart filters stored in the UI model.\n\t *\n\t * @param oMdcChart The MDC_Chart control\n\t * @param bClearSelections Clears chart selections in the UI model if true\n\t * @returns The chart selections\n\t */\n\tgetChartSelections: function (oMdcChart: MDCChart, bClearSelections?: boolean) {\n\t\t// get chart selections\n\t\tif (bClearSelections) {\n\t\t\tthis.getChartModel(oMdcChart, \"\", {});\n\t\t}\n\t\tconst aVizSelections = this.getChartModel(oMdcChart, \"filters\");\n\t\treturn aVizSelections || [];\n\t},\n\t/**\n\t * Method that returns the chart selections as a filter.\n\t *\n\t * @param oMdcChart The MDC_Chart control\n\t * @returns Filter containing chart selections\n\t */\n\tgetChartFilters: function (oMdcChart: MDCChart) {\n\t\t// get chart selections as a filter\n\t\tconst aFilters = this.getChartSelections(oMdcChart) || [];\n\t\treturn new Filter(aFilters);\n\t},\n\t/**\n\t * Method that sets the chart selections as in the UI model.\n\t *\n\t * @param oMdcChart The MDC_Chart control\n\t */\n\tsetChartFilters: function (oMdcChart: MDCChart) {\n\t\t// saving selections in each drill stack for future use\n\t\tconst oDrillStack = this.getChartModel(oMdcChart, \"drillStack\") || ({} as any);\n\t\tconst oChart = (oMdcChart as any).getControlDelegate().getInnerChart(oMdcChart);\n\t\tconst aChartFilters: any[] = [];\n\t\tlet aVisibleDimensions: any;\n\n\t\tfunction addChartFilters(aSelectedData: any) {\n\t\t\tfor (const item in aSelectedData) {\n\t\t\t\tconst aDimFilters = [];\n\t\t\t\tfor (const i in aVisibleDimensions) {\n\t\t\t\t\tconst sPath = aVisibleDimensions[i];\n\t\t\t\t\tconst sValue = aSelectedData[item].data[sPath];\n\t\t\t\t\tif (sValue !== undefined) {\n\t\t\t\t\t\taDimFilters.push(\n\t\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\t\tpath: sPath,\n\t\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\t\tvalue1: sValue\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (aDimFilters.length > 0) {\n\t\t\t\t\taChartFilters.push(new Filter(aDimFilters, true));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (oChart) {\n\t\t\tconst aVizSelections = this.getVizSelection(oChart);\n\t\t\taVisibleDimensions = oChart.getVisibleDimensions();\n\t\t\tconst aDimensions = this.getDimensionsFromDrillStack(oChart);\n\t\t\tif (aDimensions.length > 0) {\n\t\t\t\tthis.getChartModel(oMdcChart, \"drillStack\", {});\n\t\t\t\toDrillStack[aDimensions.toString()] = aVizSelections;\n\t\t\t\tthis.getChartModel(oMdcChart, \"drillStack\", oDrillStack);\n\t\t\t}\n\t\t\tif (aVizSelections.length > 0) {\n\t\t\t\t// creating filters with selections in the current drillstack\n\t\t\t\taddChartFilters(aVizSelections);\n\t\t\t} else {\n\t\t\t\t// creating filters with selections in the previous drillstack when there are no selections in the current drillstack\n\t\t\t\tconst aDrillStackKeys = Object.keys(oDrillStack) || [];\n\t\t\t\tconst aPrevDrillStackData = oDrillStack[aDrillStackKeys[aDrillStackKeys.length - 2]] || [];\n\t\t\t\taddChartFilters(aPrevDrillStackData);\n\t\t\t}\n\t\t\tthis.getChartModel(oMdcChart, \"filters\", aChartFilters);\n\t\t}\n\t},\n\t/**\n\t * Method that returns the chart selections as a filter.\n\t *\n\t * @param oChart The inner chart control\n\t * @returns The filters in the filter bar\n\t */\n\tgetFilterBarFilterInfo: function (oChart: MDCChart) {\n\t\treturn FilterUtil.getFilterInfo(oChart.getFilter(), {\n\t\t\ttargetControl: oChart\n\t\t});\n\t},\n\t/**\n\t * Method that returns the filters for the chart and filter bar.\n\t *\n\t * @param oChart The inner chart control\n\t * @returns The new filter containing the filters for both the chart and the filter bar\n\t */\n\tgetAllFilterInfo: function (oChart: MDCChart) {\n\t\tconst oFilters = this.getFilterBarFilterInfo(oChart);\n\t\tconst aChartFilters = this.getChartFilters(oChart) as any;\n\t\t// Get filters added through personalization dialog filter option\n\t\tconst aP13nProperties = Utils.getP13nFilters(oChart);\n\t\t// Retrieve selection presentation variant path from custom data\n\t\tconst selectionPresentationVariantPath = CommonHelper.parseCustomData(oChart.data(\"selectionPresentationVariantPath\"))\n\t\t\t? CommonHelper.parseCustomData(oChart.data(\"selectionPresentationVariantPath\")).data\n\t\t\t: \"\";\n\t\t// Check if SV is present in SPV, if yes get the Sv values\n\t\tconst aSelctionVariant = selectionPresentationVariantPath\n\t\t\t? CommonUtils.getFiltersInfoForSV(oChart, selectionPresentationVariantPath, true)\n\t\t\t: null;\n\n\t\tif (aChartFilters && aChartFilters.aFilters && aChartFilters.aFilters.length) {\n\t\t\toFilters.filters.push(aChartFilters);\n\t\t}\n\n\t\tif (aP13nProperties.length > 0) {\n\t\t\taP13nProperties.forEach((element) => {\n\t\t\t\tif (element.aFilters && element.aFilters.length > 0) {\n\t\t\t\t\t// if we filter using more than one field\n\t\t\t\t\telement.aFilters.forEach((filterValue: any) => {\n\t\t\t\t\t\toFilters.filters.push(filterValue);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// if we filter using only one field\n\t\t\t\t\toFilters.filters.push(element);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (aSelctionVariant && aSelctionVariant.filters.length > 0) {\n\t\t\taSelctionVariant.filters.forEach((filterValue: any) => {\n\t\t\t\toFilters.filters.push(filterValue.aFilters[0]);\n\t\t\t});\n\t\t}\n\n\t\treturn oFilters;\n\t},\n\n\t/**\n\t * Method that returns selected data in the chart.\n\t *\n\t * @param oChart The inner chart control\n\t * @returns The selected chart data\n\t */\n\tgetChartSelectedData: function (oChart: Chart) {\n\t\tlet aSelectedPoints = [];\n\t\t// eslint-disable-next-line @typescript-eslint/switch-exhaustiveness-check\n\t\tswitch (oChart.getSelectionBehavior()) {\n\t\t\tcase \"DATAPOINT\":\n\t\t\t\taSelectedPoints = (oChart.getSelectedDataPoints() as any).dataPoints;\n\t\t\t\tbreak;\n\t\t\tcase \"CATEGORY\":\n\t\t\t\taSelectedPoints = (oChart.getSelectedCategories() as any).categories;\n\t\t\t\tbreak;\n\t\t\tcase \"SERIES\":\n\t\t\t\taSelectedPoints = (oChart.getSelectedSeries() as any).series;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn aSelectedPoints;\n\t},\n\t/**\n\t * Method to get filters, drillstack and selected contexts in the UI model.\n\t * Can also be used to set data in the model.\n\t *\n\t * @param oMdcChart The MDC_Chart control\n\t * @param sPath The path in the UI model from which chart data is to be set/fetched\n\t * @param vData The chart info to be set\n\t * @returns The chart info (filters/drillstack/selectedContexts)\n\t */\n\tgetChartModel: function (oMdcChart: MDCChart, sPath: string, vData?: object | any[]) {\n\t\tconst oInternalModelContext = oMdcChart.getBindingContext(\"internal\") as InternalModelContext;\n\t\tif (!oInternalModelContext) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (vData) {\n\t\t\toInternalModelContext.setProperty(sPath, vData);\n\t\t}\n\t\treturn oInternalModelContext && oInternalModelContext.getObject(sPath);\n\t},\n\t/**\n\t * Method to fetch the current drillstack dimensions.\n\t *\n\t * @param oChart The inner chart control\n\t * @returns The current drillstack dimensions\n\t */\n\tgetDimensionsFromDrillStack: function (oChart: Chart) {\n\t\tconst aCurrentDrillStack = oChart.getDrillStack() || [];\n\t\tconst aCurrentDrillView = aCurrentDrillStack.pop() || ({} as any);\n\t\treturn aCurrentDrillView.dimension || [];\n\t},\n\t/**\n\t * Method to fetch chart selections.\n\t *\n\t * @param oChart The inner chart control\n\t * @returns The chart selections\n\t */\n\tgetVizSelection: function (oChart: any) {\n\t\treturn (oChart && oChart._getVizFrame() && oChart._getVizFrame().vizSelection()) || [];\n\t}\n};\n\nexport default ChartUtils;\n"],"mappings":"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"}},{"offset":{"line":4385,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","FilterUtil","Filter","FilterOperator","CommonHelper","Utils","ChartUtils","getChartSelections","oMdcChart","bClearSelections","this","getChartModel","aVizSelections","getChartFilters","aFilters","setChartFilters","oDrillStack","oChart","getControlDelegate","getInnerChart","aChartFilters","aVisibleDimensions","addChartFilters","aSelectedData","item","aDimFilters","i","sPath","sValue","data","undefined","push","path","operator","EQ","value1","length","getVizSelection","getVisibleDimensions","aDimensions","getDimensionsFromDrillStack","toString","aDrillStackKeys","Object","keys","aPrevDrillStackData","getFilterBarFilterInfo","getFilterInfo","getFilter","targetControl","getAllFilterInfo","oFilters","aP13nProperties","getP13nFilters","selectionPresentationVariantPath","parseCustomData","aSelctionVariant","getFiltersInfoForSV","filters","forEach","element","filterValue","getChartSelectedData","aSelectedPoints","getSelectionBehavior","getSelectedDataPoints","dataPoints","getSelectedCategories","categories","getSelectedSeries","series","vData","oInternalModelContext","getBindingContext","setProperty","getObject","aCurrentDrillStack","getDrillStack","aCurrentDrillView","pop","dimension","_getVizFrame","vizSelection"],"sources":["ChartUtils-dbg.js"],"mappings":"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","sourceRoot":"chart"}},{"offset":{"line":4390,"column":0},"map":{"version":3,"names":["ContactBlock","defineBuildingBlock","name","namespace","designtime","blockAttribute","type","expectedTypes","required","getTemplate","id","_flexId","idPrefix","generate","undefined","convertedContact","convertMetaModelContext","metaPath","myDataModel","getInvolvedDataModelObjects","contextPath","value","getExpressionFromAnnotation","fn","getRelativePaths","delegateConfiguration","payload","contact","getPath","xml","attr","visible","ariaLabelledBy","JSON","stringify","BuildingBlockBase"],"sourceRoot":"contact","sources":["Contact.block.ts"],"sourcesContent":["/**\n * Macro for creating a Contact based on provided OData v4 metadata.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Contact\n *   id=\"someID\"\n *   contact=\"{contact>}\"\n *   contextPath=\"{contextPath>}\"\n * /&gt;\n * </pre>\n *\n * @private\n * @experimental\n */\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { convertMetaModelContext, getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getExpressionFromAnnotation } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { getRelativePaths } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\n\n@defineBuildingBlock({\n\tname: \"Contact\",\n\tnamespace: \"sap.fe.macros\",\n\tdesigntime: \"sap/fe/macros/Contact.designtime\"\n})\nexport default class ContactBlock extends BuildingBlockBase {\n\t/**\n\t * Prefix added to the generated ID of the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic idPrefix?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic _flexId?: string; //needs to be added in v2, was there \"implicitly\" in v1\n\n\t/**\n\t * Metadata path to the Contact\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\texpectedTypes: [\"com.sap.vocabularies.Communication.v1.ContactType\"],\n\t\trequired: true\n\t})\n\tpublic metaPath!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tpublic contextPath?: Context;\n\n\t/**\n\t * Property added to associate the label and the contact\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic ariaLabelledBy?: string;\n\n\t/**\n\t * Boolean visible property\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tpublic visible?: boolean;\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\tlet id;\n\t\tif (this._flexId) {\n\t\t\t//in case a flex id is given, take this one\n\t\t\tid = this._flexId;\n\t\t} else {\n\t\t\t//alternatively check for idPrefix and generate an appropriate id\n\t\t\tid = this.idPrefix ? generate([this.idPrefix, \"Field-content\"]) : undefined;\n\t\t}\n\n\t\tconst convertedContact = convertMetaModelContext(this.metaPath);\n\t\tconst myDataModel = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\n\t\tconst value = getExpressionFromAnnotation(convertedContact.fn, getRelativePaths(myDataModel));\n\t\tconst delegateConfiguration = {\n\t\t\tname: \"sap/fe/macros/contact/ContactDelegate\",\n\t\t\tpayload: {\n\t\t\t\tcontact: this.metaPath.getPath()\n\t\t\t}\n\t\t};\n\n\t\treturn xml`<mdc:Field\n\t\txmlns:mdc=\"sap.ui.mdc\"\n\t\tdelegate=\"{name: 'sap/ui/mdc/odata/v4/FieldBaseDelegate'}\"\n\t\t${this.attr(\"id\", id)}\n\t\teditMode=\"Display\"\n\t\twidth=\"100%\"\n\t\t${this.attr(\"visible\", this.visible)}\n\t\t${this.attr(\"value\", value)}\n\t\t${this.attr(\"ariaLabelledBy\", this.ariaLabelledBy)}\n\t>\n\t\t<mdc:fieldInfo>\n\t\t\t<mdc:Link\n\t\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tenablePersonalization=\"false\"\n\t\t\t\t${this.attr(\"delegate\", JSON.stringify(delegateConfiguration))}\n\t\t\t/>\n\t\t</mdc:fieldInfo>\n\t</mdc:Field>\n\t\t\t`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;MA8BqBA,YAAY,WALhCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,SAAS;IACfC,SAAS,EAAE,eAAe;IAC1BC,UAAU,EAAE;EACb,CAAC,CAAC,UAKAC,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC,UAGDD,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC,UAMDD,cAAc,CAAC;IACfC,IAAI,EAAE,sBAAsB;IAC5BC,aAAa,EAAE,CAAC,mDAAmD,CAAC;IACpEC,QAAQ,EAAE;EACX,CAAC,CAAC,UAGDH,cAAc,CAAC;IACfC,IAAI,EAAE,sBAAsB;IAC5BC,aAAa,EAAE,CAAC,WAAW,EAAE,oBAAoB,EAAE,YAAY,EAAE,WAAW;EAC7E,CAAC,CAAC,UAMDF,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC,UAMDD,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAGF;AACD;AACA;AACA;AACA;IAJC,OAKAG,WAAW,GAAX,uBAAc;MACb,IAAIC,EAAE;MACN,IAAI,IAAI,CAACC,OAAO,EAAE;QACjB;QACAD,EAAE,GAAG,IAAI,CAACC,OAAO;MAClB,CAAC,MAAM;QACN;QACAD,EAAE,GAAG,IAAI,CAACE,QAAQ,GAAGC,QAAQ,CAAC,CAAC,IAAI,CAACD,QAAQ,EAAE,eAAe,CAAC,CAAC,GAAGE,SAAS;MAC5E;MAEA,MAAMC,gBAAgB,GAAGC,uBAAuB,CAAC,IAAI,CAACC,QAAQ,CAAC;MAC/D,MAAMC,WAAW,GAAGC,2BAA2B,CAAC,IAAI,CAACF,QAAQ,EAAE,IAAI,CAACG,WAAW,CAAC;MAEhF,MAAMC,KAAK,GAAGC,2BAA2B,CAACP,gBAAgB,CAACQ,EAAE,EAAEC,gBAAgB,CAACN,WAAW,CAAC,CAAC;MAC7F,MAAMO,qBAAqB,GAAG;QAC7BvB,IAAI,EAAE,uCAAuC;QAC7CwB,OAAO,EAAE;UACRC,OAAO,EAAE,IAAI,CAACV,QAAQ,CAACW,OAAO;QAC/B;MACD,CAAC;MAED,OAAOC,GAAI;AACb;AACA;AACA,IAAI,IAAI,CAACC,IAAI,CAAC,IAAI,EAAEpB,EAAE,CAAE;AACxB;AACA;AACA,IAAI,IAAI,CAACoB,IAAI,CAAC,SAAS,EAAE,IAAI,CAACC,OAAO,CAAE;AACvC,IAAI,IAAI,CAACD,IAAI,CAAC,OAAO,EAAET,KAAK,CAAE;AAC9B,IAAI,IAAI,CAACS,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAACE,cAAc,CAAE;AACrD;AACA;AACA;AACA;AACA;AACA,MAAM,IAAI,CAACF,IAAI,CAAC,UAAU,EAAEG,IAAI,CAACC,SAAS,CAACT,qBAAqB,CAAC,CAAE;AACnE;AACA;AACA;AACA,IAAI;IACH,CAAC;IAAA;EAAA,EA3FwCU,iBAAiB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":4528,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","MetaModelConverter","BindingToolkit","StableIdHelper","DataModelPathHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_exports","getRelativePaths","generate","getExpressionFromAnnotation","getInvolvedDataModelObjects","convertMetaModelContext","xml","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ContactBlock","name","namespace","designtime","type","expectedTypes","required","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","_proto","getTemplate","id","_flexId","idPrefix","convertedContact","metaPath","myDataModel","contextPath","fn","delegateConfiguration","payload","contact","getPath","attr","visible","ariaLabelledBy","JSON","stringify"],"sources":["Contact.block-dbg.js"],"mappings":"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","sourceRoot":"contact"}},{"offset":{"line":4551,"column":0},"map":{"version":3,"names":["Object","assign","LinkDelegate","_fnTemplateFragment","payload","metaModel","fragmentName","preProcessorSettings","bindingContexts","models","contactContext","createBindingContext","contact","fragment","XMLTemplateProcessor","loadTemplate","templatedFragment","XMLPreprocessor","process","name","Fragment","load","definition","controller","fetchAdditionalContent","mdcLinkControl","navigateRegexpMatch","navigationPath","match","bindingContext","length","getModel","bindContext","getBindingContext","$$ownRequest","isA","getMetaModel","popoverContent","setBindingContext","getBoundContext","Promise","resolve","fetchLinkType","initialType","type","directLink","undefined","runtimeType"],"sourceRoot":"contact","sources":["ContactDelegate.ts"],"sourcesContent":["import Fragment from \"sap/ui/core/Fragment\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport XMLTemplateProcessor from \"sap/ui/core/XMLTemplateProcessor\";\n\nimport type Control from \"sap/ui/core/Control\";\nimport LinkDelegate from \"sap/ui/mdc/LinkDelegate\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\ntype ContactPayload = { navigationPath: string; contact: string };\n\nexport default Object.assign({}, LinkDelegate, {\n\t/**\n\t * Method called to do the templating of the popover content.\n\t *\n\t * @param payload\n\t * @param metaModel\n\t * @returns  A promise containing the popover content\n\t */\n\t_fnTemplateFragment: async function (payload: ContactPayload, metaModel: ODataMetaModel) {\n\t\tconst fragmentName = \"sap.fe.macros.contact.ContactQuickView\";\n\t\tconst preProcessorSettings: { bindingContexts: object; models: object } = { bindingContexts: {}, models: {} };\n\t\tconst contactContext = metaModel.createBindingContext(payload.contact);\n\t\tif (payload.contact && contactContext) {\n\t\t\tpreProcessorSettings.bindingContexts = {\n\t\t\t\tcontact: contactContext\n\t\t\t};\n\t\t\tpreProcessorSettings.models = {\n\t\t\t\tcontact: metaModel\n\t\t\t};\n\t\t}\n\n\t\tconst fragment = XMLTemplateProcessor.loadTemplate(fragmentName, \"fragment\");\n\t\tconst templatedFragment = await XMLPreprocessor.process(fragment, { name: fragmentName }, preProcessorSettings);\n\t\treturn Fragment.load({\n\t\t\tdefinition: templatedFragment,\n\t\t\tcontroller: this\n\t\t});\n\t},\n\n\t/**\n\t * Method calls by the mdc.field to determine what should be the content of the popup when mdcLink#open is called.\n\t *\n\t * @param payload\n\t * @param mdcLinkControl\n\t * @returns A promise containing the popover content\n\t */\n\tfetchAdditionalContent: async function (payload: ContactPayload, mdcLinkControl: Control) {\n\t\tconst navigateRegexpMatch = payload.navigationPath?.match(/{(.*?)}/);\n\t\tconst bindingContext =\n\t\t\tnavigateRegexpMatch && navigateRegexpMatch.length > 1 && navigateRegexpMatch[1]\n\t\t\t\t? (mdcLinkControl.getModel() as ODataModel).bindContext(\n\t\t\t\t\t\tnavigateRegexpMatch[1],\n\t\t\t\t\t\tmdcLinkControl.getBindingContext() as Context,\n\t\t\t\t\t\t{ $$ownRequest: true }\n\t\t\t\t  )\n\t\t\t\t: null;\n\t\tif (mdcLinkControl.isA(\"sap.ui.mdc.Link\")) {\n\t\t\tconst metaModel = (mdcLinkControl.getModel() as ODataModel).getMetaModel();\n\t\t\tconst popoverContent = (await this._fnTemplateFragment(payload, metaModel)) as Control;\n\t\t\tif (bindingContext) {\n\t\t\t\tpopoverContent.setBindingContext(bindingContext.getBoundContext());\n\t\t\t}\n\t\t\treturn [popoverContent];\n\t\t}\n\t\treturn Promise.resolve([]);\n\t},\n\n\tfetchLinkType: async function () {\n\t\treturn {\n\t\t\tinitialType: {\n\t\t\t\ttype: 2, // this means mdcLink.open will open a popup which shows content retrieved by fetchAdditionalContent\n\t\t\t\tdirectLink: undefined\n\t\t\t},\n\t\t\truntimeType: undefined\n\t\t};\n\t}\n});\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;SAYeA,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,YAAY,EAAE;IAC9C;AACD;AACA;AACA;AACA;AACA;AACA;IACCC,mBAAmB,EAAE,gBAAgBC,OAAuB,EAAEC,SAAyB,EAAE;MACxF,MAAMC,YAAY,GAAG,wCAAwC;MAC7D,MAAMC,oBAAiE,GAAG;QAAEC,eAAe,EAAE,CAAC,CAAC;QAAEC,MAAM,EAAE,CAAC;MAAE,CAAC;MAC7G,MAAMC,cAAc,GAAGL,SAAS,CAACM,oBAAoB,CAACP,OAAO,CAACQ,OAAO,CAAC;MACtE,IAAIR,OAAO,CAACQ,OAAO,IAAIF,cAAc,EAAE;QACtCH,oBAAoB,CAACC,eAAe,GAAG;UACtCI,OAAO,EAAEF;QACV,CAAC;QACDH,oBAAoB,CAACE,MAAM,GAAG;UAC7BG,OAAO,EAAEP;QACV,CAAC;MACF;MAEA,MAAMQ,QAAQ,GAAGC,oBAAoB,CAACC,YAAY,CAACT,YAAY,EAAE,UAAU,CAAC;MAC5E,MAAMU,iBAAiB,GAAG,MAAMC,eAAe,CAACC,OAAO,CAACL,QAAQ,EAAE;QAAEM,IAAI,EAAEb;MAAa,CAAC,EAAEC,oBAAoB,CAAC;MAC/G,OAAOa,QAAQ,CAACC,IAAI,CAAC;QACpBC,UAAU,EAAEN,iBAAiB;QAC7BO,UAAU,EAAE;MACb,CAAC,CAAC;IACH,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;IACCC,sBAAsB,EAAE,gBAAgBpB,OAAuB,EAAEqB,cAAuB,EAAE;MAAA;MACzF,MAAMC,mBAAmB,4BAAGtB,OAAO,CAACuB,cAAc,0DAAtB,sBAAwBC,KAAK,CAAC,SAAS,CAAC;MACpE,MAAMC,cAAc,GACnBH,mBAAmB,IAAIA,mBAAmB,CAACI,MAAM,GAAG,CAAC,IAAIJ,mBAAmB,CAAC,CAAC,CAAC,GAC3ED,cAAc,CAACM,QAAQ,EAAE,CAAgBC,WAAW,CACrDN,mBAAmB,CAAC,CAAC,CAAC,EACtBD,cAAc,CAACQ,iBAAiB,EAAE,EAClC;QAAEC,YAAY,EAAE;MAAK,CAAC,CACrB,GACD,IAAI;MACR,IAAIT,cAAc,CAACU,GAAG,CAAC,iBAAiB,CAAC,EAAE;QAC1C,MAAM9B,SAAS,GAAIoB,cAAc,CAACM,QAAQ,EAAE,CAAgBK,YAAY,EAAE;QAC1E,MAAMC,cAAc,GAAI,MAAM,IAAI,CAAClC,mBAAmB,CAACC,OAAO,EAAEC,SAAS,CAAa;QACtF,IAAIwB,cAAc,EAAE;UACnBQ,cAAc,CAACC,iBAAiB,CAACT,cAAc,CAACU,eAAe,EAAE,CAAC;QACnE;QACA,OAAO,CAACF,cAAc,CAAC;MACxB;MACA,OAAOG,OAAO,CAACC,OAAO,CAAC,EAAE,CAAC;IAC3B,CAAC;IAEDC,aAAa,EAAE,kBAAkB;MAChC,OAAO;QACNC,WAAW,EAAE;UACZC,IAAI,EAAE,CAAC;UAAE;UACTC,UAAU,EAAEC;QACb,CAAC;QACDC,WAAW,EAAED;MACd,CAAC;IACF;EACD,CAAC,CAAC;AAAA"}},{"offset":{"line":4625,"column":0},"map":{"version":3,"names":["sap","ui","define","Fragment","XMLPreprocessor","XMLTemplateProcessor","LinkDelegate","Object","assign","_fnTemplateFragment","async","payload","metaModel","fragmentName","preProcessorSettings","bindingContexts","models","contactContext","createBindingContext","contact","fragment","loadTemplate","templatedFragment","process","name","load","definition","controller","this","fetchAdditionalContent","mdcLinkControl","_payload$navigationPa","navigateRegexpMatch","navigationPath","match","bindingContext","length","getModel","bindContext","getBindingContext","$$ownRequest","isA","getMetaModel","popoverContent","setBindingContext","getBoundContext","Promise","resolve","fetchLinkType","initialType","type","directLink","undefined","runtimeType"],"sources":["ContactDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,mDAAO,CAAC,uBAAwB,mCAAoC,mCAAoC,2BAA4B,SAAUC,EAAUC,EAAiBC,EAAsBC,GACpM,aAEA,OAAOC,OAAOC,OAAO,CAAC,EAAGF,EAAc,CAQrCG,oBAAqBC,eAAgBC,EAASC,GAC5C,MAAMC,EAAe,yCACrB,MAAMC,EAAuB,CAC3BC,gBAAiB,CAAC,EAClBC,OAAQ,CAAC,GAEX,MAAMC,EAAiBL,EAAUM,qBAAqBP,EAAQQ,SAC9D,GAAIR,EAAQQ,SAAWF,EAAgB,CACrCH,EAAqBC,gBAAkB,CACrCI,QAASF,GAEXH,EAAqBE,OAAS,CAC5BG,QAASP,EAEb,CACA,MAAMQ,EAAWf,EAAqBgB,aAAaR,EAAc,YACjE,MAAMS,QAA0BlB,EAAgBmB,QAAQH,EAAU,CAChEI,KAAMX,GACLC,GACH,OAAOX,EAASsB,KAAK,CACnBC,WAAYJ,EACZK,WAAYC,MAEhB,EAQAC,uBAAwBnB,eAAgBC,EAASmB,GAC/C,IAAIC,EACJ,MAAMC,GAAuBD,EAAwBpB,EAAQsB,kBAAoB,MAAQF,SAA+B,OAAS,EAAIA,EAAsBG,MAAM,WACjK,MAAMC,EAAiBH,GAAuBA,EAAoBI,OAAS,GAAKJ,EAAoB,GAAKF,EAAeO,WAAWC,YAAYN,EAAoB,GAAIF,EAAeS,oBAAqB,CACzMC,aAAc,OACX,KACL,GAAIV,EAAeW,IAAI,mBAAoB,CACzC,MAAM7B,EAAYkB,EAAeO,WAAWK,eAC5C,MAAMC,QAAuBf,KAAKnB,oBAAoBE,EAASC,GAC/D,GAAIuB,EAAgB,CAClBQ,EAAeC,kBAAkBT,EAAeU,kBAClD,CACA,MAAO,CAACF,EACV,CACA,OAAOG,QAAQC,QAAQ,GACzB,EACAC,cAAetC,iBACb,MAAO,CACLuC,YAAa,CACXC,KAAM,EAENC,WAAYC,WAEdC,YAAaD,UAEjB,GAEJ,EAAG","sourceRoot":"contact"}},{"offset":{"line":4630,"column":0},"map":{"version":3,"names":["oRB","Core","getLibraryResourceBundle","ContactHelper","formatUri","itemType","value","formatAddress","street","code","locality","region","country","textToWrite","push","join","computeLabel","subType","getText","indexOf","getContactTitle","getAvatarInitials","oInitials"],"sourceRoot":"contact","sources":["ContactHelper.ts"],"sourcesContent":["import Core from \"sap/ui/core/Core\";\n\nconst oRB = Core.getLibraryResourceBundle(\"sap.ui.mdc\");\nconst ContactHelper = {\n\t// emails: first preferred, then work\n\t// phones : first work, then cell, then fax, then preferred\n\t// address : first preferred, then work\n\tformatUri: function (itemType: any, value: any) {\n\t\tswitch (itemType) {\n\t\t\tcase \"phone\":\n\t\t\t\treturn `tel:${value}`;\n\t\t\tcase \"mail\":\n\t\t\t\treturn `mailto:${value}`;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t},\n\tformatAddress: function (street: any, code: any, locality: any, region: any, country: any) {\n\t\tconst textToWrite = [];\n\t\tif (street) {\n\t\t\ttextToWrite.push(street);\n\t\t}\n\t\tif (code && locality) {\n\t\t\ttextToWrite.push(`${code} ${locality}`);\n\t\t} else {\n\t\t\tif (code) {\n\t\t\t\ttextToWrite.push(code);\n\t\t\t}\n\t\t\tif (locality) {\n\t\t\t\ttextToWrite.push(locality);\n\t\t\t}\n\t\t}\n\t\tif (region) {\n\t\t\ttextToWrite.push(region);\n\t\t}\n\t\tif (country) {\n\t\t\ttextToWrite.push(country);\n\t\t}\n\t\treturn textToWrite.join(\", \");\n\t},\n\tcomputeLabel: function (itemType: any, subType: any) {\n\t\tswitch (itemType) {\n\t\t\tcase \"role\":\n\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_ROLE\");\n\t\t\tcase \"title\":\n\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_JOBTITLE\");\n\t\t\tcase \"org\":\n\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_DEPARTMENT\");\n\t\t\tcase \"phone\":\n\t\t\t\tif (subType.indexOf(\"fax\") > -1) {\n\t\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_FAX\");\n\t\t\t\t} else if (subType.indexOf(\"work\") > -1) {\n\t\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_PHONE\");\n\t\t\t\t} else if (subType.indexOf(\"cell\") > -1) {\n\t\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_MOBILE\");\n\t\t\t\t} else if (subType.indexOf(\"preferred\") > -1) {\n\t\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_PHONE\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"mail\":\n\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_EMAIL\");\n\t\t\tcase \"address\":\n\t\t\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_ADR\");\n\t\t\tdefault:\n\t\t\t\treturn \"contactItem\";\n\t\t}\n\t},\n\tgetContactTitle: function () {\n\t\treturn oRB.getText(\"info.POPOVER_CONTACT_SECTION_TITLE\");\n\t},\n\tgetAvatarInitials: function (oInitials: any) {\n\t\treturn oInitials ? oInitials : \"\";\n\t}\n};\n\nexport default ContactHelper;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAEA,MAAMA,GAAG,GAAGC,IAAI,CAACC,wBAAwB,CAAC,YAAY,CAAC;EACvD,MAAMC,aAAa,GAAG;IACrB;IACA;IACA;IACAC,SAAS,EAAE,UAAUC,QAAa,EAAEC,KAAU,EAAE;MAC/C,QAAQD,QAAQ;QACf,KAAK,OAAO;UACX,OAAQ,OAAMC,KAAM,EAAC;QACtB,KAAK,MAAM;UACV,OAAQ,UAASA,KAAM,EAAC;QACzB;UACC,OAAOA,KAAK;MAAC;IAEhB,CAAC;IACDC,aAAa,EAAE,UAAUC,MAAW,EAAEC,IAAS,EAAEC,QAAa,EAAEC,MAAW,EAAEC,OAAY,EAAE;MAC1F,MAAMC,WAAW,GAAG,EAAE;MACtB,IAAIL,MAAM,EAAE;QACXK,WAAW,CAACC,IAAI,CAACN,MAAM,CAAC;MACzB;MACA,IAAIC,IAAI,IAAIC,QAAQ,EAAE;QACrBG,WAAW,CAACC,IAAI,CAAE,GAAEL,IAAK,IAAGC,QAAS,EAAC,CAAC;MACxC,CAAC,MAAM;QACN,IAAID,IAAI,EAAE;UACTI,WAAW,CAACC,IAAI,CAACL,IAAI,CAAC;QACvB;QACA,IAAIC,QAAQ,EAAE;UACbG,WAAW,CAACC,IAAI,CAACJ,QAAQ,CAAC;QAC3B;MACD;MACA,IAAIC,MAAM,EAAE;QACXE,WAAW,CAACC,IAAI,CAACH,MAAM,CAAC;MACzB;MACA,IAAIC,OAAO,EAAE;QACZC,WAAW,CAACC,IAAI,CAACF,OAAO,CAAC;MAC1B;MACA,OAAOC,WAAW,CAACE,IAAI,CAAC,IAAI,CAAC;IAC9B,CAAC;IACDC,YAAY,EAAE,UAAUX,QAAa,EAAEY,OAAY,EAAE;MACpD,QAAQZ,QAAQ;QACf,KAAK,MAAM;UACV,OAAOL,GAAG,CAACkB,OAAO,CAAC,mCAAmC,CAAC;QACxD,KAAK,OAAO;UACX,OAAOlB,GAAG,CAACkB,OAAO,CAAC,uCAAuC,CAAC;QAC5D,KAAK,KAAK;UACT,OAAOlB,GAAG,CAACkB,OAAO,CAAC,yCAAyC,CAAC;QAC9D,KAAK,OAAO;UACX,IAAID,OAAO,CAACE,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE;YAChC,OAAOnB,GAAG,CAACkB,OAAO,CAAC,kCAAkC,CAAC;UACvD,CAAC,MAAM,IAAID,OAAO,CAACE,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;YACxC,OAAOnB,GAAG,CAACkB,OAAO,CAAC,oCAAoC,CAAC;UACzD,CAAC,MAAM,IAAID,OAAO,CAACE,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;YACxC,OAAOnB,GAAG,CAACkB,OAAO,CAAC,qCAAqC,CAAC;UAC1D,CAAC,MAAM,IAAID,OAAO,CAACE,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE;YAC7C,OAAOnB,GAAG,CAACkB,OAAO,CAAC,oCAAoC,CAAC;UACzD;UACA;QACD,KAAK,MAAM;UACV,OAAOlB,GAAG,CAACkB,OAAO,CAAC,oCAAoC,CAAC;QACzD,KAAK,SAAS;UACb,OAAOlB,GAAG,CAACkB,OAAO,CAAC,kCAAkC,CAAC;QACvD;UACC,OAAO,aAAa;MAAC;IAExB,CAAC;IACDE,eAAe,EAAE,YAAY;MAC5B,OAAOpB,GAAG,CAACkB,OAAO,CAAC,oCAAoC,CAAC;IACzD,CAAC;IACDG,iBAAiB,EAAE,UAAUC,SAAc,EAAE;MAC5C,OAAOA,SAAS,GAAGA,SAAS,GAAG,EAAE;IAClC;EACD,CAAC;EAAC,OAEanB,aAAa;AAAA"}},{"offset":{"line":4711,"column":0},"map":{"version":3,"names":["sap","ui","define","Core","oRB","getLibraryResourceBundle","ContactHelper","formatUri","itemType","value","formatAddress","street","code","locality","region","country","textToWrite","push","join","computeLabel","subType","getText","indexOf","getContactTitle","getAvatarInitials","oInitials"],"sources":["ContactHelper-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,iDAAO,CAAC,oBAAqB,SAAUC,GAC5C,aAEA,MAAMC,EAAMD,EAAKE,yBAAyB,cAC1C,MAAMC,EAAgB,CAIpBC,UAAW,SAAUC,EAAUC,GAC7B,OAAQD,GACN,IAAK,QACH,MAAO,OAAOC,IAChB,IAAK,OACH,MAAO,UAAUA,IACnB,QACE,OAAOA,EAEb,EACAC,cAAe,SAAUC,EAAQC,EAAMC,EAAUC,EAAQC,GACvD,MAAMC,EAAc,GACpB,GAAIL,EAAQ,CACVK,EAAYC,KAAKN,EACnB,CACA,GAAIC,GAAQC,EAAU,CACpBG,EAAYC,KAAK,GAAGL,KAAQC,IAC9B,KAAO,CACL,GAAID,EAAM,CACRI,EAAYC,KAAKL,EACnB,CACA,GAAIC,EAAU,CACZG,EAAYC,KAAKJ,EACnB,CACF,CACA,GAAIC,EAAQ,CACVE,EAAYC,KAAKH,EACnB,CACA,GAAIC,EAAS,CACXC,EAAYC,KAAKF,EACnB,CACA,OAAOC,EAAYE,KAAK,KAC1B,EACAC,aAAc,SAAUX,EAAUY,GAChC,OAAQZ,GACN,IAAK,OACH,OAAOJ,EAAIiB,QAAQ,qCACrB,IAAK,QACH,OAAOjB,EAAIiB,QAAQ,yCACrB,IAAK,MACH,OAAOjB,EAAIiB,QAAQ,2CACrB,IAAK,QACH,GAAID,EAAQE,QAAQ,QAAU,EAAG,CAC/B,OAAOlB,EAAIiB,QAAQ,mCACrB,MAAO,GAAID,EAAQE,QAAQ,SAAW,EAAG,CACvC,OAAOlB,EAAIiB,QAAQ,qCACrB,MAAO,GAAID,EAAQE,QAAQ,SAAW,EAAG,CACvC,OAAOlB,EAAIiB,QAAQ,sCACrB,MAAO,GAAID,EAAQE,QAAQ,cAAgB,EAAG,CAC5C,OAAOlB,EAAIiB,QAAQ,qCACrB,CACA,MACF,IAAK,OACH,OAAOjB,EAAIiB,QAAQ,sCACrB,IAAK,UACH,OAAOjB,EAAIiB,QAAQ,oCACrB,QACE,MAAO,cAEb,EACAE,gBAAiB,WACf,OAAOnB,EAAIiB,QAAQ,qCACrB,EACAG,kBAAmB,SAAUC,GAC3B,OAAOA,EAAYA,EAAY,EACjC,GAEF,OAAOnB,CACT,EAAG","sourceRoot":"contact"}},{"offset":{"line":4716,"column":0},"map":{"version":3,"names":["ConditionalWrapper","defineUI5Class","implementInterface","property","type","defaultValue","association","multiple","singularName","aggregation","isDefault","enhanceAccessibilityState","oElement","mAriaProps","oParent","getParent","getAccessibilityInfo","content","condition","contentTrue","contentFalse","_setAriaLabelledBy","oContent","addAriaLabelledBy","aAriaLabelledBy","ariaLabelledBy","i","length","sId","aAriaLabelledBys","getAriaLabelledBy","indexOf","onBeforeRendering","render","oRm","oControl","openStart","style","width","openEnd","renderControl","close","Control"],"sourceRoot":"controls","sources":["ConditionalWrapper.ts"],"sourcesContent":["import { aggregation, association, defineUI5Class, EnhanceWithUI5, implementInterface, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport Control from \"sap/ui/core/Control\";\nimport type { CSSSize, IFormContent } from \"sap/ui/core/library\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\n\n@defineUI5Class(\"sap.fe.macros.controls.ConditionalWrapper\")\nclass ConditionalWrapper extends Control implements IFormContent {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t__implements__sap_ui_core_IFormContent: boolean = true;\n\n\t@property({ type: \"sap.ui.core.CSSSize\", defaultValue: null })\n\twidth!: CSSSize;\n\n\t@property({ type: \"boolean\", defaultValue: false })\n\tformDoNotAdjustWidth!: boolean;\n\n\t@property({ type: \"boolean\", defaultValue: false })\n\tcondition!: boolean;\n\n\t/**\n\t * Association to controls / IDs that label this control (see WAI-ARIA attribute aria-labelledby).\n\t */\n\t@association({ type: \"sap.ui.core.Control\", multiple: true, singularName: \"ariaLabelledBy\" })\n\tariaLabelledBy!: Control[];\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: false, isDefault: true })\n\tcontentTrue!: Control;\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: false })\n\tcontentFalse!: Control;\n\n\tenhanceAccessibilityState(oElement: any, mAriaProps: any) {\n\t\tconst oParent = this.getParent() as any;\n\n\t\tif (oParent && oParent.enhanceAccessibilityState) {\n\t\t\toParent.enhanceAccessibilityState(this, mAriaProps);\n\t\t}\n\n\t\treturn mAriaProps;\n\t}\n\n\t/**\n\t * This function provides the current accessibility state of the control.\n\t *\n\t * @returns The accessibility info of the wrapped control\n\t */\n\tgetAccessibilityInfo() {\n\t\tlet content;\n\t\tif (this.condition) {\n\t\t\tcontent = this.contentTrue;\n\t\t} else {\n\t\t\tcontent = this.contentFalse;\n\t\t}\n\t\treturn content?.getAccessibilityInfo ? content.getAccessibilityInfo() : {};\n\t}\n\n\t_setAriaLabelledBy(oContent: any) {\n\t\tif (oContent && oContent.addAriaLabelledBy) {\n\t\t\tconst aAriaLabelledBy = this.ariaLabelledBy;\n\n\t\t\tfor (let i = 0; i < aAriaLabelledBy.length; i++) {\n\t\t\t\tconst sId = aAriaLabelledBy[i];\n\t\t\t\tconst aAriaLabelledBys = oContent.getAriaLabelledBy() || [];\n\t\t\t\tif (aAriaLabelledBys.indexOf(sId) === -1) {\n\t\t\t\t\toContent.addAriaLabelledBy(sId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRendering() {\n\t\t// before calling the renderer of the ConditionalWrapper parent control may have set ariaLabelledBy\n\t\t// we ensure it is passed to its inner controls\n\t\tthis._setAriaLabelledBy(this.contentTrue);\n\t\tthis._setAriaLabelledBy(this.contentFalse);\n\t}\n\n\tstatic render(oRm: RenderManager, oControl: ConditionalWrapper) {\n\t\toRm.openStart(\"div\", oControl);\n\t\toRm.style(\"width\", oControl.width);\n\t\toRm.style(\"display\", \"inline-block\");\n\t\toRm.openEnd();\n\t\tif (oControl.condition) {\n\t\t\toRm.renderControl(oControl.contentTrue);\n\t\t} else {\n\t\t\toRm.renderControl(oControl.contentFalse);\n\t\t}\n\t\toRm.close(\"div\"); // end of the complete Control\n\t}\n}\n\nexport default ConditionalWrapper as unknown as EnhanceWithUI5<ConditionalWrapper>;\n"],"mappings":"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"}},{"offset":{"line":4867,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","Control","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","property","implementInterface","defineUI5Class","association","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ConditionalWrapper","type","defaultValue","multiple","singularName","isDefault","_Control","_this","_len","arguments","length","args","Array","_key","this","_proto","enhanceAccessibilityState","oElement","mAriaProps","oParent","getParent","getAccessibilityInfo","_content","content","condition","contentTrue","contentFalse","_setAriaLabelledBy","oContent","addAriaLabelledBy","aAriaLabelledBy","ariaLabelledBy","i","sId","aAriaLabelledBys","getAriaLabelledBy","indexOf","onBeforeRendering","render","oRm","oControl","openStart","style","width","openEnd","renderControl","close"],"sources":["ConditionalWrapper-dbg.js"],"mappings":"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","sourceRoot":"controls"}},{"offset":{"line":4872,"column":0},"map":{"version":3,"names":["CustomFilterFieldContentWrapper","defineUI5Class","implementInterface","property","type","defaultValue","aggregation","multiple","isDefault","event","render","renderManager","control","openStart","style","width","openEnd","renderControl","getContent","close","_filterValuesToConditions","filterValues","operator","formatOptions","operators","conditions","hasOwnProperty","values","undefined","Error","conditionsType","ConditionsType","conditionValues","Array","isArray","length","SemanticDateOperators","getSemanticDateOperations","includes","Condition","createCondition","ConditionValidated","NotValidated","map","conditionValue","stringValue","toString","parsedConditions","parseValue","filter","_conditionsToFilterModelString","condition","formatValue","join","_handleFilterModelChange","changeEvent","propertyPath","getObjectBinding","getPath","getSource","getProperty","updateConditionsByFilterValues","_handleConditionsChange","updateFilterModelByConditions","init","_conditionsObserver","ManagedObjectObserver","_observeChanges","bind","observe","properties","_filterModel","JSONModel","attachPropertyChange","setModel","FILTER_MODEL_ALIAS","clone","sIdSuffix","aLocalIds","changes","name","current","getAggregation","getConditions","setConditions","setProperty","getFilterModelAlias","getBindingContext","getAccessibilityInfo","content","getIdForLabel","Control"],"sourceRoot":"controls","sources":["CustomFilterFieldContentWrapper.ts"],"sourcesContent":["import { aggregation, defineUI5Class, event, implementInterface, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport SemanticDateOperators from \"sap/fe/core/helpers/SemanticDateOperators\";\nimport ManagedObjectObserver from \"sap/ui/base/ManagedObjectObserver\";\nimport Control from \"sap/ui/core/Control\"; //import Control from \"sap/ui/mdc/field/FieldBase\";\nimport type { IFormContent } from \"sap/ui/core/library\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport Condition from \"sap/ui/mdc/condition/Condition\";\nimport ConditionValidated from \"sap/ui/mdc/enum/ConditionValidated\";\nimport ConditionsType from \"sap/ui/mdc/field/ConditionsType\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\n/**\n * Type used for format options\n *\n * @typedef FormatOptionsType\n */\ntype FormatOptionsType = {\n\toperators: string[];\n};\n\n/**\n * @class\n * Creates an <code>sap.fe.macros.controls.CustomFilterFieldContentWrapper</code> object.\n * This is used in the {@link sap.ui.mdc.FilterField FilterField} as a filter content.\n * @extends sap.ui.core.Control\n * @private\n * @alias sap.fe.core.macros.CustomFilterFieldContentWrapper\n */\n@defineUI5Class(\"sap.fe.macros.controls.CustomFilterFieldContentWrapper\")\nexport default class CustomFilterFieldContentWrapper extends Control implements IFormContent {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t// eslint-disable-next-line camelcase\n\t__implements__sap_ui_core_IFormContent = true;\n\n\t@property({ type: \"sap.ui.core.CSSSize\", defaultValue: null })\n\twidth!: string;\n\n\t@property({ type: \"boolean\", defaultValue: false })\n\tformDoNotAdjustWidth!: boolean;\n\n\t@property({ type: \"object[]\", defaultValue: [] })\n\tconditions!: ConditionObject[];\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: false, isDefault: true })\n\tcontent!: Control;\n\n\t@event()\n\tconditionsChange!: Function;\n\n\t// Note: FieldBase might be used as base control (instead of Control) in a later version;\n\t// in that case, you should add a 'change' event and bubble it to the corresponding handlers\n\n\tprivate _filterModel: any;\n\n\tprivate _conditionsObserver: any;\n\n\tprivate static readonly FILTER_MODEL_ALIAS = \"filterValues\";\n\n\tstatic render(renderManager: RenderManager, control: CustomFilterFieldContentWrapper): void {\n\t\trenderManager.openStart(\"div\", control);\n\t\trenderManager.style(\"min-height\", \"1rem\");\n\t\trenderManager.style(\"width\", control.width);\n\t\trenderManager.openEnd();\n\t\trenderManager.renderControl(control.getContent()); // render the child Control\n\t\trenderManager.close(\"div\"); // end of the complete Control\n\t}\n\n\t/**\n\t * Maps an array of filter values to an array of conditions.\n\t *\n\t * @param filterValues Array of filter value bindings or a filter value string\n\t * @param [operator] The operator to be used (optional) - if not set, the default operator (EQ) will be used\n\t * @private\n\t * @returns Array of filter conditions\n\t */\n\tstatic _filterValuesToConditions(filterValues: any | any[], operator?: string): ConditionObject[] {\n\t\tlet formatOptions: FormatOptionsType = { operators: [] },\n\t\t\tconditions = [];\n\n\t\tif (operator) {\n\t\t\tformatOptions = { operators: [operator] };\n\t\t}\n\t\tif (filterValues === \"\") {\n\t\t\tfilterValues = [];\n\t\t} else if (typeof filterValues === \"object\" && filterValues.hasOwnProperty(\"operator\") && filterValues.hasOwnProperty(\"values\")) {\n\t\t\tformatOptions = { operators: [filterValues.operator] };\n\t\t\tfilterValues = filterValues.values;\n\t\t} else if (filterValues !== undefined && typeof filterValues !== \"object\" && typeof filterValues !== \"string\") {\n\t\t\tthrow new Error(`FilterUtils.js#_filterValuesToConditions: Unexpected type of input parameter vValues: ${typeof filterValues}`);\n\t\t}\n\n\t\tconst conditionsType: any = new ConditionsType(formatOptions);\n\t\tconst conditionValues = Array.isArray(filterValues) ? filterValues : [filterValues];\n\n\t\t// Shortcut for operator without values and semantic date operations\n\t\tif (\n\t\t\ttypeof operator === \"string\" &&\n\t\t\t(conditionValues.length === 0 || SemanticDateOperators.getSemanticDateOperations().includes(operator))\n\t\t) {\n\t\t\tconditions = [Condition.createCondition(operator, conditionValues, null, null, ConditionValidated.NotValidated)];\n\t\t} else {\n\t\t\tconditions = conditionValues\n\t\t\t\t.map((conditionValue) => {\n\t\t\t\t\tconst stringValue = conditionValue?.toString(),\n\t\t\t\t\t\tparsedConditions = conditionsType.parseValue(stringValue, \"any\");\n\t\t\t\t\treturn parsedConditions?.[0];\n\t\t\t\t})\n\t\t\t\t.filter((conditionValue) => conditionValue !== undefined);\n\t\t}\n\n\t\treturn conditions;\n\t}\n\n\t/**\n\t * Maps an array of conditions to a comma separated list of filter values.\n\t *\n\t * @param conditions Array of filter conditions\n\t * @param formatOptions Format options that specifies a condition type\n\t * @private\n\t * @returns Concatenated string of filter values\n\t */\n\tstatic _conditionsToFilterModelString(conditions: object[], formatOptions: FormatOptionsType): string {\n\t\tconst conditionsType = new ConditionsType(formatOptions);\n\n\t\treturn conditions\n\t\t\t.map((condition) => {\n\t\t\t\treturn conditionsType.formatValue([condition], \"any\") || \"\";\n\t\t\t})\n\t\t\t.filter((stringValue) => {\n\t\t\t\treturn stringValue !== \"\";\n\t\t\t})\n\t\t\t.join(\",\");\n\t}\n\n\t/**\n\t * Listens to filter model changes and updates wrapper property \"conditions\".\n\t *\n\t * @param changeEvent Event triggered by a filter model change\n\t * @private\n\t */\n\t_handleFilterModelChange(changeEvent: any): void {\n\t\tconst propertyPath = this.getObjectBinding(\"filterValues\")?.getPath(),\n\t\t\tvalues = changeEvent.getSource().getProperty(propertyPath);\n\t\tthis.updateConditionsByFilterValues(values, \"\");\n\t}\n\n\t/**\n\t * Listens to \"conditions\" changes and updates the filter model.\n\t *\n\t * @param conditions Event triggered by a \"conditions\" change\n\t * @private\n\t */\n\t_handleConditionsChange(conditions: any): void {\n\t\tthis.updateFilterModelByConditions(conditions);\n\t}\n\n\t/**\n\t * Initialize CustomFilterFieldContentWrapper control and register observer.\n\t */\n\tinit(): void {\n\t\tsuper.init();\n\t\tthis._conditionsObserver = new ManagedObjectObserver(this._observeChanges.bind(this));\n\t\tthis._conditionsObserver.observe(this, {\n\t\t\tproperties: [\"conditions\"]\n\t\t});\n\t\tthis._filterModel = new JSONModel();\n\t\tthis._filterModel.attachPropertyChange(this._handleFilterModelChange, this);\n\t\tthis.setModel(this._filterModel, CustomFilterFieldContentWrapper.FILTER_MODEL_ALIAS);\n\t}\n\n\t/**\n\t * Overrides {@link sap.ui.core.Control#clone Control.clone} to clone additional\n\t * internal states.\n\t *\n\t * @param [sIdSuffix] A suffix to be appended to the cloned control id\n\t * @param [aLocalIds] An array of local IDs within the cloned hierarchy (internally used)\n\t * @returns Reference to the newly created clone\n\t * @protected\n\t */\n\tclone(sIdSuffix: string | undefined, aLocalIds: string[] | undefined): this {\n\t\tconst clone = super.clone(sIdSuffix, aLocalIds);\n\t\t// During cloning, the old model will be copied and overwrites any new model (same alias) that\n\t\t// you introduce during init(); hence you need to overwrite it again by the new one that you've\n\t\t// created during init() (i.e. clone._filterModel); that standard behaviour of super.clone()\n\t\t// can't even be suppressed in an own constructor; for a detailed investigation of the cloning,\n\t\t// please overwrite the setModel() method and check the list of callers and steps induced by them.\n\t\tclone.setModel(clone._filterModel, CustomFilterFieldContentWrapper.FILTER_MODEL_ALIAS);\n\t\treturn clone;\n\t}\n\n\t/**\n\t * Listens to property changes.\n\t *\n\t * @param changes Property changes\n\t * @private\n\t */\n\t_observeChanges(changes: any): void {\n\t\tif (changes.name === \"conditions\") {\n\t\t\tthis._handleConditionsChange(changes.current);\n\t\t}\n\t}\n\n\t/**\n\t * Gets the content of this wrapper control.\n\t *\n\t * @returns The wrapper content\n\t * @private\n\t */\n\tgetContent(): Control {\n\t\treturn this.getAggregation(\"content\") as Control;\n\t}\n\n\t/**\n\t * Gets the value for control property 'conditions'.\n\t *\n\t * @returns Array of filter conditions\n\t * @private\n\t */\n\tgetConditions(): object[] {\n\t\treturn this.getProperty(\"conditions\");\n\t}\n\n\t/**\n\t * Sets the value for control property 'conditions'.\n\t *\n\t * @param [conditions] Array of filter conditions\n\t * @returns Reference to this wrapper\n\t * @private\n\t */\n\tsetConditions(conditions: object[]): this {\n\t\tthis.setProperty(\"conditions\", conditions || []);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets the filter model alias 'filterValues'.\n\t *\n\t * @returns The filter model\n\t * @private\n\t */\n\tgetFilterModelAlias(): string {\n\t\treturn CustomFilterFieldContentWrapper.FILTER_MODEL_ALIAS;\n\t}\n\n\t/**\n\t * Updates the property \"conditions\" with filter values\n\t * sent by ExtensionAPI#setFilterValues().\n\t *\n\t * @param values The filter values\n\t * @param [operator] The operator name\n\t * @private\n\t */\n\tupdateConditionsByFilterValues(values: any, operator?: string): void {\n\t\tconst conditions = CustomFilterFieldContentWrapper._filterValuesToConditions(values, operator);\n\t\tthis.setConditions(conditions);\n\t}\n\n\t/**\n\t * Updates filter model with conditions\n\t * sent by the {@link sap.ui.mdc.FilterField FilterField}.\n\t *\n\t * @param conditions Array of filter conditions\n\t * @private\n\t */\n\tupdateFilterModelByConditions(conditions: any[]): void {\n\t\tconst operator = conditions[0]?.operator || \"\";\n\t\tconst formatOptions: FormatOptionsType = operator !== \"\" ? { operators: [operator] } : { operators: [] };\n\t\tif (this.getBindingContext(CustomFilterFieldContentWrapper.FILTER_MODEL_ALIAS)) {\n\t\t\tconst stringValue = CustomFilterFieldContentWrapper._conditionsToFilterModelString(conditions, formatOptions);\n\t\t\tthis._filterModel.setProperty(\n\t\t\t\tthis.getBindingContext(CustomFilterFieldContentWrapper.FILTER_MODEL_ALIAS)?.getPath(),\n\t\t\t\tstringValue\n\t\t\t);\n\t\t}\n\t}\n\n\tgetAccessibilityInfo(): any {\n\t\tconst content = this.getContent();\n\t\treturn content?.getAccessibilityInfo?.() || {};\n\t}\n\n\t/**\n\t * Returns the DOMNode ID to be used for the \"labelFor\" attribute.\n\t *\n\t * We forward the call of this method to the content control.\n\t *\n\t * @returns ID to be used for the <code>labelFor</code>\n\t */\n\tgetIdForLabel(): string {\n\t\tconst content = this.getContent();\n\t\treturn content?.getIdForLabel();\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":5201,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","SemanticDateOperators","ManagedObjectObserver","Control","Condition","ConditionValidated","ConditionsType","JSONModel","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_class3","_exports","property","implementInterface","event","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","CustomFilterFieldContentWrapper","type","defaultValue","multiple","isDefault","_Control","_this","_len","arguments","length","args","Array","_key","this","render","renderManager","control","openStart","style","width","openEnd","renderControl","getContent","close","_filterValuesToConditions","filterValues","operator","formatOptions","operators","conditions","hasOwnProperty","values","conditionsType","conditionValues","isArray","getSemanticDateOperations","includes","createCondition","NotValidated","map","conditionValue","stringValue","toString","parsedConditions","parseValue","filter","_conditionsToFilterModelString","condition","formatValue","join","_proto","_handleFilterModelChange","changeEvent","_this$getObjectBindin","propertyPath","getObjectBinding","getPath","getSource","getProperty","updateConditionsByFilterValues","_handleConditionsChange","updateFilterModelByConditions","init","_conditionsObserver","_observeChanges","observe","properties","_filterModel","attachPropertyChange","setModel","FILTER_MODEL_ALIAS","clone","sIdSuffix","aLocalIds","changes","name","current","getAggregation","getConditions","setConditions","setProperty","getFilterModelAlias","_conditions$","getBindingContext","_this$getBindingConte","getAccessibilityInfo","_content$getAccessibi","content","getIdForLabel"],"sources":["CustomFilterFieldContentWrapper-dbg.js"],"mappings":"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","sourceRoot":"controls"}},{"offset":{"line":5206,"column":0},"map":{"version":3,"names":["CustomQuickViewPage","defineUI5Class","aggregation","type","multiple","singularName","isDefault","onBeforeRendering","oEvent","parent","getParent","isA","getProperty","setCrossAppNavCallback","sQuickViewPageTitleLinkHref","DelegateUtil","getCustomData","oView","CommonUtils","getTargetView","oAppComponent","getAppComponent","oShellServiceHelper","getShellServices","oShellHash","parseShellHash","oNavArgs","target","semanticObject","action","params","sQuickViewPageTitleLinkIntent","oCrossAppNavigator","isNavigationSupported","oLinkControl","sTargetHref","getModel","KeepAliveHelper","storeControlRefreshStrategyForHash","oCurrentShellHash","window","location","hash","appSpecificRoute","oPageContent","getPageContent","oForm","form","_aContent","customContent","length","forEach","_oContent","_oContentClone","clone","setModel","setBindingContext","getBindingContext","addContent","setTimeout","rerender","QuickViewPage"],"sourceRoot":"controls","sources":["CustomQuickViewPage.ts"],"sourcesContent":["import CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { aggregation, defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport KeepAliveHelper from \"sap/fe/core/helpers/KeepAliveHelper\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport QuickViewPage from \"sap/m/QuickViewPage\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Link from \"sap/ui/mdc/Link\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\n@defineUI5Class(\"sap.fe.macros.controls.CustomQuickViewPage\")\nclass CustomQuickViewPage extends QuickViewPage {\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: true })\n\tcustomContent!: Control[];\n\n\t@aggregation({ type: \"sap.m.QuickViewGroup\", multiple: true, singularName: \"group\", isDefault: true })\n\tgroups!: Control[];\n\n\tonBeforeRendering(oEvent: any) {\n\t\tconst parent = this.getParent();\n\t\tif (parent && parent.isA(\"sap.fe.macros.controls.ConditionalWrapper\") && parent.getProperty(\"condition\") === true) {\n\t\t\tthis.setCrossAppNavCallback(() => {\n\t\t\t\tconst sQuickViewPageTitleLinkHref = (DelegateUtil.getCustomData as any)(this, \"titleLink\");\n\t\t\t\tconst oView = CommonUtils.getTargetView(this);\n\t\t\t\tconst oAppComponent = CommonUtils.getAppComponent(oView);\n\t\t\t\tconst oShellServiceHelper = oAppComponent.getShellServices();\n\t\t\t\tlet oShellHash = oShellServiceHelper.parseShellHash(sQuickViewPageTitleLinkHref);\n\t\t\t\tconst oNavArgs = {\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\tsemanticObject: oShellHash.semanticObject,\n\t\t\t\t\t\taction: oShellHash.action\n\t\t\t\t\t},\n\t\t\t\t\tparams: oShellHash.params\n\t\t\t\t};\n\t\t\t\tconst sQuickViewPageTitleLinkIntent = `${oNavArgs.target.semanticObject}-${oNavArgs.target.action}`;\n\n\t\t\t\tif (\n\t\t\t\t\tsQuickViewPageTitleLinkIntent &&\n\t\t\t\t\ttypeof sQuickViewPageTitleLinkIntent === \"string\" &&\n\t\t\t\t\tsQuickViewPageTitleLinkIntent !== \"\" &&\n\t\t\t\t\tthis.oCrossAppNavigator &&\n\t\t\t\t\tthis.oCrossAppNavigator.isNavigationSupported([sQuickViewPageTitleLinkIntent])\n\t\t\t\t) {\n\t\t\t\t\tlet oLinkControl = this.getParent();\n\t\t\t\t\twhile (oLinkControl && !oLinkControl.isA<Link>(\"sap.ui.mdc.Link\")) {\n\t\t\t\t\t\toLinkControl = oLinkControl.getParent();\n\t\t\t\t\t}\n\t\t\t\t\tconst sTargetHref: string = (oLinkControl?.getModel(\"$sapuimdcLink\") as JSONModel).getProperty(\"/titleLinkHref\");\n\t\t\t\t\tif (sTargetHref) {\n\t\t\t\t\t\toShellHash = oShellServiceHelper.parseShellHash(sTargetHref);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toShellHash = oShellServiceHelper.parseShellHash(sQuickViewPageTitleLinkIntent);\n\t\t\t\t\t\toShellHash.params = oNavArgs.params;\n\t\t\t\t\t}\n\t\t\t\t\tKeepAliveHelper.storeControlRefreshStrategyForHash(oView, oShellHash);\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttarget: {\n\t\t\t\t\t\t\tsemanticObject: oShellHash.semanticObject,\n\t\t\t\t\t\t\taction: oShellHash.action\n\t\t\t\t\t\t},\n\t\t\t\t\t\tparams: oShellHash.params\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tconst oCurrentShellHash = oShellServiceHelper.parseShellHash(window.location.hash);\n\t\t\t\t\tKeepAliveHelper.storeControlRefreshStrategyForHash(oView, oCurrentShellHash);\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttarget: {\n\t\t\t\t\t\t\tsemanticObject: oCurrentShellHash.semanticObject,\n\t\t\t\t\t\t\taction: oCurrentShellHash.action,\n\t\t\t\t\t\t\tappSpecificRoute: oCurrentShellHash.appSpecificRoute\n\t\t\t\t\t\t},\n\t\t\t\t\t\tparams: oCurrentShellHash.params\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tsuper.onBeforeRendering(oEvent);\n\t\tconst oPageContent = this.getPageContent();\n\t\tconst oForm = oPageContent.form;\n\t\tif (oForm) {\n\t\t\tconst _aContent = this.customContent;\n\t\t\tif (_aContent && _aContent.length > 0) {\n\t\t\t\t_aContent.forEach((_oContent: any) => {\n\t\t\t\t\tconst _oContentClone = _oContent.clone();\n\t\t\t\t\t_oContentClone.setModel(this.getModel());\n\t\t\t\t\t_oContentClone.setBindingContext(this.getBindingContext());\n\t\t\t\t\toForm.addContent(_oContentClone);\n\t\t\t\t});\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\toForm.rerender();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t}\n\t}\n}\n\ninterface CustomQuickViewPage {\n\t// Private in UI5\n\toCrossAppNavigator: any;\n\n\t// Private in UI5\n\tgetPageContent(): any;\n}\n\nexport default CustomQuickViewPage;\n"],"mappings":"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"}},{"offset":{"line":5327,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","ClassSupport","KeepAliveHelper","DelegateUtil","QuickViewPage","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","defineUI5Class","aggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","CustomQuickViewPage","type","multiple","singularName","isDefault","_QuickViewPage","_this","_len","arguments","length","args","Array","_key","this","_proto","onBeforeRendering","oEvent","parent","getParent","isA","getProperty","setCrossAppNavCallback","sQuickViewPageTitleLinkHref","getCustomData","oView","getTargetView","oAppComponent","getAppComponent","oShellServiceHelper","getShellServices","oShellHash","parseShellHash","oNavArgs","semanticObject","action","params","sQuickViewPageTitleLinkIntent","oCrossAppNavigator","isNavigationSupported","_oLinkControl","oLinkControl","sTargetHref","getModel","storeControlRefreshStrategyForHash","oCurrentShellHash","window","location","hash","appSpecificRoute","oPageContent","getPageContent","oForm","form","_aContent","customContent","_oContent","_oContentClone","clone","setModel","setBindingContext","getBindingContext","addContent","setTimeout","rerender"],"sources":["CustomQuickViewPage-dbg.js"],"mappings":"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","sourceRoot":"controls"}},{"offset":{"line":5332,"column":0},"map":{"version":3,"names":["FieldWrapper","defineUI5Class","implementInterface","property","type","defaultValue","association","multiple","singularName","aggregation","isDefault","enhanceAccessibilityState","oElement","mAriaProps","oParent","getParent","getAccessibilityInfo","oContent","editMode","contentDisplay","contentEdit","length","getIdForLabel","_setAriaLabelledBy","addAriaLabelledBy","aAriaLabelledBy","ariaLabelledBy","i","sId","aAriaLabelledBys","getAriaLabelledBy","indexOf","onBeforeRendering","aContentEdit","render","oRm","oControl","openStart","style","textAlign","width","openEnd","renderControl","close","Control"],"sourceRoot":"controls","sources":["FieldWrapper.ts"],"sourcesContent":["import { aggregation, association, defineUI5Class, implementInterface, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport Control from \"sap/ui/core/Control\";\nimport type { CSSSize, IFormContent, TextAlign } from \"sap/ui/core/library\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\n\n@defineUI5Class(\"sap.fe.macros.controls.FieldWrapper\")\nclass FieldWrapper extends Control implements IFormContent {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t__implements__sap_ui_core_IFormContent: boolean = true;\n\n\t@property({ type: \"sap.ui.core.TextAlign\" })\n\ttextAlign!: TextAlign;\n\n\t@property({ type: \"sap.ui.core.CSSSize\", defaultValue: null })\n\twidth!: CSSSize;\n\n\t@property({ type: \"boolean\", defaultValue: false })\n\tformDoNotAdjustWidth!: boolean;\n\n\t@property({ type: \"string\", defaultValue: \"Display\" })\n\teditMode!: string;\n\n\t@property({ type: \"boolean\", defaultValue: false })\n\trequired!: boolean;\n\n\t/**\n\t * Association to controls / IDs that label this control (see WAI-ARIA attribute aria-labelledby).\n\t */\n\t@association({ type: \"sap.ui.core.Control\", multiple: true, singularName: \"ariaLabelledBy\" })\n\tariaLabelledBy!: Control[];\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: false, isDefault: true })\n\tcontentDisplay!: Control;\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: true })\n\tcontentEdit!: Control[];\n\n\tenhanceAccessibilityState(oElement: any, mAriaProps: any) {\n\t\tconst oParent = this.getParent() as any;\n\n\t\tif (oParent && oParent.enhanceAccessibilityState) {\n\t\t\t// use FieldWrapper as control, but aria properties of rendered inner control.\n\t\t\toParent.enhanceAccessibilityState(this, mAriaProps);\n\t\t}\n\n\t\treturn mAriaProps;\n\t}\n\n\tgetAccessibilityInfo() {\n\t\tlet oContent;\n\t\tif (this.editMode === \"Display\") {\n\t\t\toContent = this.contentDisplay;\n\t\t} else {\n\t\t\toContent = this.contentEdit.length ? this.contentEdit[0] : null;\n\t\t}\n\t\treturn oContent && oContent.getAccessibilityInfo ? oContent.getAccessibilityInfo() : {};\n\t}\n\n\t/**\n\t * Returns the DOMNode ID to be used for the \"labelFor\" attribute.\n\t *\n\t * We forward the call of this method to the content control.\n\t *\n\t * @returns ID to be used for the <code>labelFor</code>\n\t */\n\tgetIdForLabel(): string {\n\t\tlet oContent;\n\t\tif (this.editMode === \"Display\") {\n\t\t\toContent = this.contentDisplay;\n\t\t} else {\n\t\t\toContent = this.contentEdit.length ? this.contentEdit[0] : null;\n\t\t}\n\t\treturn (oContent as Control)?.getIdForLabel();\n\t}\n\n\t_setAriaLabelledBy(oContent: any) {\n\t\tif (oContent && oContent.addAriaLabelledBy) {\n\t\t\tconst aAriaLabelledBy = this.ariaLabelledBy;\n\n\t\t\tfor (let i = 0; i < aAriaLabelledBy.length; i++) {\n\t\t\t\tconst sId = aAriaLabelledBy[i];\n\t\t\t\tconst aAriaLabelledBys = oContent.getAriaLabelledBy() || [];\n\t\t\t\tif (aAriaLabelledBys.indexOf(sId) === -1) {\n\t\t\t\t\toContent.addAriaLabelledBy(sId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRendering() {\n\t\t// before calling the renderer of the FieldWrapper parent control may have set ariaLabelledBy\n\t\t// we ensure it is passed to its inner controls\n\t\tthis._setAriaLabelledBy(this.contentDisplay);\n\t\tconst aContentEdit = this.contentEdit;\n\t\tfor (let i = 0; i < aContentEdit.length; i++) {\n\t\t\tthis._setAriaLabelledBy(aContentEdit[i]);\n\t\t}\n\t}\n\n\tstatic render(oRm: RenderManager, oControl: FieldWrapper) {\n\t\toRm.openStart(\"div\", oControl);\n\t\toRm.style(\"text-align\", oControl.textAlign);\n\t\tif (oControl.editMode === \"Display\") {\n\t\t\toRm.style(\"width\", oControl.width);\n\t\t\toRm.openEnd();\n\t\t\toRm.renderControl(oControl.contentDisplay); // render the child Control for display\n\t\t} else {\n\t\t\tconst aContentEdit = oControl.contentEdit;\n\n\t\t\t// if (aContentEdit.length > 1) {\n\t\t\t// \toRm.class(\"sapUiMdcFieldBaseMoreFields\");\n\t\t\t// }\n\t\t\toRm.style(\"width\", oControl.width);\n\t\t\toRm.openEnd();\n\t\t\tfor (let i = 0; i < aContentEdit.length; i++) {\n\t\t\t\tconst oContent = aContentEdit[i]; // render the child Control  for edit\n\t\t\t\toRm.renderControl(oContent);\n\t\t\t}\n\t\t}\n\t\toRm.close(\"div\"); // end of the complete Control\n\t}\n}\n\nexport default FieldWrapper;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;MAMMA,YAAY,WADjBC,cAAc,CAAC,qCAAqC,CAAC,UAEpDC,kBAAkB,CAAC,0BAA0B,CAAC,UAG9CC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAwB,CAAC,CAAC,UAG3CD,QAAQ,CAAC;IAAEC,IAAI,EAAE,qBAAqB;IAAEC,YAAY,EAAE;EAAK,CAAC,CAAC,UAG7DF,QAAQ,CAAC;IAAEC,IAAI,EAAE,SAAS;IAAEC,YAAY,EAAE;EAAM,CAAC,CAAC,UAGlDF,QAAQ,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,YAAY,EAAE;EAAU,CAAC,CAAC,UAGrDF,QAAQ,CAAC;IAAEC,IAAI,EAAE,SAAS;IAAEC,YAAY,EAAE;EAAM,CAAC,CAAC,UAMlDC,WAAW,CAAC;IAAEF,IAAI,EAAE,qBAAqB;IAAEG,QAAQ,EAAE,IAAI;IAAEC,YAAY,EAAE;EAAiB,CAAC,CAAC,UAG5FC,WAAW,CAAC;IAAEL,IAAI,EAAE,qBAAqB;IAAEG,QAAQ,EAAE,KAAK;IAAEG,SAAS,EAAE;EAAK,CAAC,CAAC,WAG9ED,WAAW,CAAC;IAAEL,IAAI,EAAE,qBAAqB;IAAEG,QAAQ,EAAE;EAAK,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA,OAG7DI,yBAAyB,GAAzB,mCAA0BC,QAAa,EAAEC,UAAe,EAAE;MACzD,MAAMC,OAAO,GAAG,IAAI,CAACC,SAAS,EAAS;MAEvC,IAAID,OAAO,IAAIA,OAAO,CAACH,yBAAyB,EAAE;QACjD;QACAG,OAAO,CAACH,yBAAyB,CAAC,IAAI,EAAEE,UAAU,CAAC;MACpD;MAEA,OAAOA,UAAU;IAClB,CAAC;IAAA,OAEDG,oBAAoB,GAApB,gCAAuB;MACtB,IAAIC,QAAQ;MACZ,IAAI,IAAI,CAACC,QAAQ,KAAK,SAAS,EAAE;QAChCD,QAAQ,GAAG,IAAI,CAACE,cAAc;MAC/B,CAAC,MAAM;QACNF,QAAQ,GAAG,IAAI,CAACG,WAAW,CAACC,MAAM,GAAG,IAAI,CAACD,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI;MAChE;MACA,OAAOH,QAAQ,IAAIA,QAAQ,CAACD,oBAAoB,GAAGC,QAAQ,CAACD,oBAAoB,EAAE,GAAG,CAAC,CAAC;IACxF;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA,OANC;IAAA,OAOAM,aAAa,GAAb,yBAAwB;MAAA;MACvB,IAAIL,QAAQ;MACZ,IAAI,IAAI,CAACC,QAAQ,KAAK,SAAS,EAAE;QAChCD,QAAQ,GAAG,IAAI,CAACE,cAAc;MAC/B,CAAC,MAAM;QACNF,QAAQ,GAAG,IAAI,CAACG,WAAW,CAACC,MAAM,GAAG,IAAI,CAACD,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI;MAChE;MACA,oBAAQH,QAAQ,8CAAT,UAAuBK,aAAa,EAAE;IAC9C,CAAC;IAAA,OAEDC,kBAAkB,GAAlB,4BAAmBN,QAAa,EAAE;MACjC,IAAIA,QAAQ,IAAIA,QAAQ,CAACO,iBAAiB,EAAE;QAC3C,MAAMC,eAAe,GAAG,IAAI,CAACC,cAAc;QAE3C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,eAAe,CAACJ,MAAM,EAAEM,CAAC,EAAE,EAAE;UAChD,MAAMC,GAAG,GAAGH,eAAe,CAACE,CAAC,CAAC;UAC9B,MAAME,gBAAgB,GAAGZ,QAAQ,CAACa,iBAAiB,EAAE,IAAI,EAAE;UAC3D,IAAID,gBAAgB,CAACE,OAAO,CAACH,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;YACzCX,QAAQ,CAACO,iBAAiB,CAACI,GAAG,CAAC;UAChC;QACD;MACD;IACD,CAAC;IAAA,OAEDI,iBAAiB,GAAjB,6BAAoB;MACnB;MACA;MACA,IAAI,CAACT,kBAAkB,CAAC,IAAI,CAACJ,cAAc,CAAC;MAC5C,MAAMc,YAAY,GAAG,IAAI,CAACb,WAAW;MACrC,KAAK,IAAIO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGM,YAAY,CAACZ,MAAM,EAAEM,CAAC,EAAE,EAAE;QAC7C,IAAI,CAACJ,kBAAkB,CAACU,YAAY,CAACN,CAAC,CAAC,CAAC;MACzC;IACD,CAAC;IAAA,aAEMO,MAAM,GAAb,gBAAcC,GAAkB,EAAEC,QAAsB,EAAE;MACzDD,GAAG,CAACE,SAAS,CAAC,KAAK,EAAED,QAAQ,CAAC;MAC9BD,GAAG,CAACG,KAAK,CAAC,YAAY,EAAEF,QAAQ,CAACG,SAAS,CAAC;MAC3C,IAAIH,QAAQ,CAAClB,QAAQ,KAAK,SAAS,EAAE;QACpCiB,GAAG,CAACG,KAAK,CAAC,OAAO,EAAEF,QAAQ,CAACI,KAAK,CAAC;QAClCL,GAAG,CAACM,OAAO,EAAE;QACbN,GAAG,CAACO,aAAa,CAACN,QAAQ,CAACjB,cAAc,CAAC,CAAC,CAAC;MAC7C,CAAC,MAAM;QACN,MAAMc,YAAY,GAAGG,QAAQ,CAAChB,WAAW;;QAEzC;QACA;QACA;QACAe,GAAG,CAACG,KAAK,CAAC,OAAO,EAAEF,QAAQ,CAACI,KAAK,CAAC;QAClCL,GAAG,CAACM,OAAO,EAAE;QACb,KAAK,IAAId,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGM,YAAY,CAACZ,MAAM,EAAEM,CAAC,EAAE,EAAE;UAC7C,MAAMV,QAAQ,GAAGgB,YAAY,CAACN,CAAC,CAAC,CAAC,CAAC;UAClCQ,GAAG,CAACO,aAAa,CAACzB,QAAQ,CAAC;QAC5B;MACD;MACAkB,GAAG,CAACQ,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;IACnB,CAAC;IAAA;EAAA,EAlHyBC,OAAO;IAAA;IAAA;IAAA;IAAA;MAAA,OAEiB,IAAI;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA,OAmHxC5C,YAAY;AAAA"}},{"offset":{"line":5525,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","Control","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","property","implementInterface","defineUI5Class","association","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FieldWrapper","type","defaultValue","multiple","singularName","isDefault","_Control","_this","_len","arguments","length","args","Array","_key","this","_proto","enhanceAccessibilityState","oElement","mAriaProps","oParent","getParent","getAccessibilityInfo","oContent","editMode","contentDisplay","contentEdit","getIdForLabel","_oContent","_setAriaLabelledBy","addAriaLabelledBy","aAriaLabelledBy","ariaLabelledBy","i","sId","aAriaLabelledBys","getAriaLabelledBy","indexOf","onBeforeRendering","aContentEdit","render","oRm","oControl","openStart","style","textAlign","width","openEnd","renderControl","close"],"sources":["FieldWrapper-dbg.js"],"mappings":"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","sourceRoot":"controls"}},{"offset":{"line":5530,"column":0},"map":{"version":3,"names":["FileWrapper","defineUI5Class","property","type","aggregation","multiple","_busy","getAccessibilityInfo","accInfo","avatar","push","icon","link","text","fileUploader","deleteButton","children","onBeforeRendering","_setAriaLabels","_addSideEffects","_setAriaLabelledBy","navigationProperties","view","CommonUtils","getTargetView","viewDataFullContextPath","getViewData","fullContextPath","metaModel","getModel","getMetaModel","metaModelPath","getMetaPath","viewContext","getContext","dataViewModelPath","MetaModelConverter","getInvolvedDataModelObjects","sourcePath","data","fieldPath","replace","path","propertyPath","$NavigationPropertyPath","filename","mediaType","_getSideEffectController","addControlSideEffects","targetEntityType","fullyQualifiedName","sourceProperties","targetEntities","sourceControlId","getId","controller","_getViewController","_sideEffects","undefined","getController","getUploadUrl","context","getBindingContext","uploadUrl","getPath","getCanonicalPath","setUIBusy","busy","that","busyDialog","BusyDialog","getResourceModel","getText","showCancelButton","setTimeout","open","close","getUIBusy","render","renderManager","fileWrapper","openStart","style","width","openEnd","renderControl","destroy","bSuppressInvalidate","oSideEffects","removeControlSideEffects","FieldWrapper","prototype","apply"],"sourceRoot":"controls","sources":["FileWrapper.ts"],"sourcesContent":["import CommonUtils from \"sap/fe/core/CommonUtils\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { aggregation, defineUI5Class, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport type { SideEffectsEntityType } from \"sap/fe/core/services/SideEffectsServiceFactory\";\nimport type { ViewData } from \"sap/fe/core/services/TemplatedViewServiceFactory\";\nimport type Avatar from \"sap/m/Avatar\";\nimport BusyDialog from \"sap/m/BusyDialog\";\nimport type Button from \"sap/m/Button\";\nimport type Link from \"sap/m/Link\";\nimport type Text from \"sap/m/Text\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Icon from \"sap/ui/core/Icon\";\nimport type { URI } from \"sap/ui/core/library\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type FileUploader from \"sap/ui/unified/FileUploader\";\nimport FieldWrapper from \"./FieldWrapper\";\n\n@defineUI5Class(\"sap.fe.macros.controls.FileWrapper\")\nclass FileWrapper extends FieldWrapper {\n\t@property({ type: \"sap.ui.core.URI\" })\n\tuploadUrl!: URI;\n\n\t@property({ type: \"string\" })\n\tpropertyPath!: string;\n\n\t@property({ type: \"string\" })\n\tfilename!: string;\n\n\t@property({ type: \"string\" })\n\tmediaType!: string;\n\n\t@aggregation({ type: \"sap.m.Avatar\", multiple: false })\n\tavatar!: Avatar;\n\n\t@aggregation({ type: \"sap.ui.core.Icon\", multiple: false })\n\ticon!: Icon;\n\n\t@aggregation({ type: \"sap.m.Link\", multiple: false })\n\tlink!: Link;\n\n\t@aggregation({ type: \"sap.m.Text\", multiple: false })\n\ttext!: Text;\n\n\t@aggregation({ type: \"sap.ui.unified.FileUploader\", multiple: false })\n\tfileUploader!: FileUploader;\n\n\t@aggregation({ type: \"sap.m.Button\", multiple: false })\n\tdeleteButton!: Button;\n\n\tprivate _busy: boolean = false;\n\n\tprivate busyDialog?: BusyDialog;\n\n\tgetAccessibilityInfo() {\n\t\tconst accInfo = [];\n\t\tif (this.avatar) {\n\t\t\taccInfo.push(this.avatar);\n\t\t}\n\t\tif (this.icon) {\n\t\t\taccInfo.push(this.icon);\n\t\t}\n\t\tif (this.link) {\n\t\t\taccInfo.push(this.link);\n\t\t}\n\t\tif (this.text) {\n\t\t\taccInfo.push(this.text);\n\t\t}\n\t\tif (this.fileUploader) {\n\t\t\taccInfo.push(this.fileUploader);\n\t\t}\n\t\tif (this.deleteButton) {\n\t\t\taccInfo.push(this.deleteButton);\n\t\t}\n\t\treturn { children: accInfo };\n\t}\n\n\tonBeforeRendering() {\n\t\tthis._setAriaLabels();\n\t\tthis._addSideEffects();\n\t}\n\n\t_setAriaLabels() {\n\t\tthis._setAriaLabelledBy(this.avatar);\n\t\tthis._setAriaLabelledBy(this.icon);\n\t\tthis._setAriaLabelledBy(this.link);\n\t\tthis._setAriaLabelledBy(this.text);\n\t\tthis._setAriaLabelledBy(this.fileUploader);\n\t\tthis._setAriaLabelledBy(this.deleteButton);\n\t}\n\n\t_addSideEffects() {\n\t\t// add control SideEffects for stream content, filename and mediatype\n\t\tconst navigationProperties: SideEffectsEntityType[] = [],\n\t\t\tview = CommonUtils.getTargetView(this as Control),\n\t\t\tviewDataFullContextPath = (view.getViewData() as ViewData).fullContextPath,\n\t\t\tmetaModel = view.getModel().getMetaModel() as ODataMetaModel,\n\t\t\tmetaModelPath = metaModel.getMetaPath(viewDataFullContextPath),\n\t\t\tviewContext = metaModel.getContext(viewDataFullContextPath),\n\t\t\tdataViewModelPath = MetaModelConverter.getInvolvedDataModelObjects(viewContext),\n\t\t\tsourcePath = this.data(\"sourcePath\") as string,\n\t\t\tfieldPath = sourcePath.replace(`${metaModelPath}`, \"\"),\n\t\t\tpath = fieldPath.replace(this.propertyPath, \"\");\n\n\t\tnavigationProperties.push({ $NavigationPropertyPath: fieldPath });\n\t\tif (this.filename) {\n\t\t\tnavigationProperties.push({ $NavigationPropertyPath: path + this.filename });\n\t\t}\n\t\tif (this.mediaType) {\n\t\t\tnavigationProperties.push({ $NavigationPropertyPath: path + this.mediaType });\n\t\t}\n\t\tthis._getSideEffectController()?.addControlSideEffects(dataViewModelPath.targetEntityType.fullyQualifiedName, {\n\t\t\tsourceProperties: [fieldPath],\n\t\t\ttargetEntities: navigationProperties,\n\t\t\tsourceControlId: this.getId()\n\t\t});\n\t}\n\n\t_getSideEffectController() {\n\t\tconst controller = this._getViewController() as PageController | undefined;\n\t\treturn controller ? controller._sideEffects : undefined;\n\t}\n\n\t_getViewController() {\n\t\tconst view = CommonUtils.getTargetView(this as Control);\n\t\treturn view && view.getController();\n\t}\n\n\tgetUploadUrl() {\n\t\t// set upload url as canonical url for NavigationProperties\n\t\t// this is a workaround as some backends cannot resolve NavigationsProperties for stream types\n\t\tconst context = this.getBindingContext() as Context;\n\t\treturn context && this.uploadUrl ? this.uploadUrl.replace(context.getPath(), context.getCanonicalPath()) : \"\";\n\t}\n\n\tsetUIBusy(busy: boolean) {\n\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias\n\t\tconst that = this;\n\t\tthis._busy = busy;\n\t\tif (busy) {\n\t\t\tif (!this.busyDialog) {\n\t\t\t\tthis.busyDialog = new BusyDialog({\n\t\t\t\t\ttext: getResourceModel(this).getText(\"M_FILEWRAPPER_BUSY_DIALOG_TITLE\"),\n\t\t\t\t\tshowCancelButton: false\n\t\t\t\t});\n\t\t\t}\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (that._busy) {\n\t\t\t\t\tthat.busyDialog?.open();\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t} else {\n\t\t\tthis.busyDialog?.close(false);\n\t\t}\n\t}\n\n\tgetUIBusy() {\n\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias\n\t\treturn this._busy;\n\t}\n\n\tstatic render(renderManager: RenderManager, fileWrapper: FileWrapper) {\n\t\trenderManager.openStart(\"div\", fileWrapper); // FileWrapper control div\n\t\trenderManager.style(\"width\", fileWrapper.width);\n\t\trenderManager.openEnd();\n\n\t\t// Outer Box\n\t\trenderManager.openStart(\"div\"); // div for all controls\n\t\trenderManager.style(\"display\", \"flex\");\n\t\trenderManager.style(\"box-sizing\", \"border-box\");\n\t\trenderManager.style(\"justify-content\", \"space-between\");\n\t\trenderManager.style(\"align-items\", \"center\");\n\t\trenderManager.style(\"flex-wrap\", \"wrap\");\n\t\trenderManager.style(\"align-content\", \"stretch\");\n\t\trenderManager.style(\"width\", \"100%\");\n\t\trenderManager.openEnd();\n\n\t\t// Display Mode\n\t\trenderManager.openStart(\"div\"); // div for controls shown in Display mode\n\t\trenderManager.style(\"display\", \"flex\");\n\t\trenderManager.style(\"align-items\", \"center\");\n\t\trenderManager.openEnd();\n\n\t\tif (fileWrapper.avatar) {\n\t\t\trenderManager.renderControl(fileWrapper.avatar); // render the Avatar Control\n\t\t} else {\n\t\t\trenderManager.renderControl(fileWrapper.icon); // render the Icon Control\n\t\t\trenderManager.renderControl(fileWrapper.link); // render the Link Control\n\t\t\trenderManager.renderControl(fileWrapper.text); // render the Text Control for empty file indication\n\t\t}\n\t\trenderManager.close(\"div\"); // div for controls shown in Display mode\n\n\t\t// Additional content for Edit Mode\n\t\trenderManager.openStart(\"div\"); // div for controls shown in Display + Edit mode\n\t\trenderManager.style(\"display\", \"flex\");\n\t\trenderManager.style(\"align-items\", \"center\");\n\t\trenderManager.openEnd();\n\t\trenderManager.renderControl(fileWrapper.fileUploader); // render the FileUploader Control\n\t\trenderManager.renderControl(fileWrapper.deleteButton); // render the Delete Button Control\n\t\trenderManager.close(\"div\"); // div for controls shown in Display + Edit mode\n\n\t\trenderManager.close(\"div\"); // div for all controls\n\n\t\trenderManager.close(\"div\"); // end of the complete Control\n\t}\n\n\tdestroy(bSuppressInvalidate: boolean) {\n\t\tconst oSideEffects = this._getSideEffectController();\n\t\tif (oSideEffects) {\n\t\t\toSideEffects.removeControlSideEffects(this);\n\t\t}\n\t\tdelete this.busyDialog;\n\t\tFieldWrapper.prototype.destroy.apply(this, [bSuppressInvalidate]);\n\t}\n}\n\nexport default FileWrapper;\n"],"mappings":"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"}},{"offset":{"line":5810,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","MetaModelConverter","ClassSupport","ResourceModelHelper","BusyDialog","FieldWrapper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","getResourceModel","property","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FileWrapper","type","multiple","_FieldWrapper","_this","_len","arguments","length","args","Array","_key","this","_busy","_proto","getAccessibilityInfo","accInfo","avatar","push","icon","link","text","fileUploader","deleteButton","children","onBeforeRendering","_setAriaLabels","_addSideEffects","_setAriaLabelledBy","_this$_getSideEffectC","navigationProperties","view","getTargetView","viewDataFullContextPath","getViewData","fullContextPath","metaModel","getModel","getMetaModel","metaModelPath","getMetaPath","viewContext","getContext","dataViewModelPath","getInvolvedDataModelObjects","sourcePath","data","fieldPath","replace","path","propertyPath","$NavigationPropertyPath","filename","mediaType","_getSideEffectController","addControlSideEffects","targetEntityType","fullyQualifiedName","sourceProperties","targetEntities","sourceControlId","getId","controller","_getViewController","_sideEffects","getController","getUploadUrl","getBindingContext","uploadUrl","getPath","getCanonicalPath","setUIBusy","busy","that","busyDialog","getText","showCancelButton","setTimeout","_that$busyDialog","open","_this$busyDialog","close","getUIBusy","render","renderManager","fileWrapper","openStart","style","width","openEnd","renderControl","destroy","bSuppressInvalidate","oSideEffects","removeControlSideEffects","apply"],"sources":["FileWrapper-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,gDAAO,CAAC,0BAA2B,4CAA6C,mCAAoC,0CAA2C,mBAAoB,kBAAmB,SAAUC,EAAaC,EAAoBC,EAAcC,EAAqBC,EAAYC,GACrS,aAEA,IAAIC,EAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAQC,EAAQC,EAAQC,EAASC,EAAaC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAChO,IAAIC,EAAmB1B,EAAoB0B,iBAC3C,IAAIC,EAAW5B,EAAa4B,SAC5B,IAAIC,EAAiB7B,EAAa6B,eAClC,IAAIC,EAAc9B,EAAa8B,YAC/B,SAASC,EAA2BC,EAAQJ,EAAUK,EAAYC,GAAW,IAAKD,EAAY,OAAQE,OAAOC,eAAeJ,EAAQJ,EAAU,CAAES,WAAYJ,EAAWI,WAAYC,aAAcL,EAAWK,aAAcC,SAAUN,EAAWM,SAAUC,MAAOP,EAAWQ,YAAcR,EAAWQ,YAAYC,KAAKR,QAAgB,GAAM,CAC3U,SAASS,EAAuBC,GAAQ,GAAIA,SAAc,EAAG,CAAE,MAAM,IAAIC,eAAe,4DAA8D,CAAE,OAAOD,CAAM,CACrK,SAASE,EAAeC,EAAUC,GAAcD,EAASE,UAAYd,OAAOe,OAAOF,EAAWC,WAAYF,EAASE,UAAUE,YAAcJ,EAAUK,EAAgBL,EAAUC,EAAa,CAC5L,SAASI,EAAgBC,EAAGC,GAAKF,EAAkBjB,OAAOoB,eAAiBpB,OAAOoB,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,SAASI,EAA0B1B,EAAQJ,EAAU+B,EAAY1B,EAAYC,GAAW,IAAI0B,EAAO,CAAC,EAAGzB,OAAO0B,KAAK5B,GAAY6B,QAAQ,SAAUC,GAAOH,EAAKG,GAAO9B,EAAW8B,EAAM,GAAIH,EAAKvB,aAAeuB,EAAKvB,WAAYuB,EAAKtB,eAAiBsB,EAAKtB,aAAc,GAAI,UAAWsB,GAAQA,EAAKnB,YAAa,CAAEmB,EAAKrB,SAAW,IAAM,CAAEqB,EAAOD,EAAWK,QAAQC,UAAUC,OAAO,SAAUN,EAAMO,GAAa,OAAOA,EAAUnC,EAAQJ,EAAUgC,IAASA,CAAM,EAAGA,GAAO,GAAI1B,GAAW0B,EAAKnB,mBAAqB,EAAG,CAAEmB,EAAKpB,MAAQoB,EAAKnB,YAAcmB,EAAKnB,YAAYC,KAAKR,QAAgB,EAAG0B,EAAKnB,YAAc2B,SAAW,CAAE,GAAIR,EAAKnB,mBAAqB,EAAG,CAAEN,OAAOC,eAAeJ,EAAQJ,EAAUgC,GAAOA,EAAO,IAAM,CAAE,OAAOA,CAAM,CACntB,SAASS,EAA0BpC,EAAYC,GAAW,MAAM,IAAIoC,MAAM,wDAA0D,gFAAkF,CACtN,IAAIC,GAAenE,EAAOyB,EAAe,sCAAuCxB,EAAQuB,EAAS,CAC/F4C,KAAM,oBACJlE,EAAQsB,EAAS,CACnB4C,KAAM,WACJjE,EAAQqB,EAAS,CACnB4C,KAAM,WACJhE,EAAQoB,EAAS,CACnB4C,KAAM,WACJ/D,EAAQqB,EAAY,CACtB0C,KAAM,eACNC,SAAU,QACR/D,EAAQoB,EAAY,CACtB0C,KAAM,mBACNC,SAAU,QACR9D,EAAQmB,EAAY,CACtB0C,KAAM,aACNC,SAAU,QACR7D,EAAQkB,EAAY,CACtB0C,KAAM,aACNC,SAAU,QACR5D,EAASiB,EAAY,CACvB0C,KAAM,8BACNC,SAAU,QACR3D,EAASgB,EAAY,CACvB0C,KAAM,eACNC,SAAU,QACRrE,EAAKW,GAAUC,EAAuB,SAAU0D,GAClD5B,EAAeyB,EAAaG,GAC5B,SAASH,IACP,IAAII,EACJ,IAAK,IAAIC,EAAOC,UAAUC,OAAQC,EAAO,IAAIC,MAAMJ,GAAOK,EAAO,EAAGA,EAAOL,EAAMK,IAAQ,CACvFF,EAAKE,GAAQJ,UAAUI,EACzB,CACAN,EAAQD,EAAchC,KAAKwC,QAASH,IAASG,KAC7CnD,EAA2B4C,EAAO,YAAa1D,EAAa0B,EAAuBgC,IACnF5C,EAA2B4C,EAAO,eAAgBzD,EAAcyB,EAAuBgC,IACvF5C,EAA2B4C,EAAO,WAAYxD,EAAcwB,EAAuBgC,IACnF5C,EAA2B4C,EAAO,YAAavD,EAAcuB,EAAuBgC,IACpF5C,EAA2B4C,EAAO,SAAUtD,EAAcsB,EAAuBgC,IACjF5C,EAA2B4C,EAAO,OAAQrD,EAAcqB,EAAuBgC,IAC/E5C,EAA2B4C,EAAO,OAAQpD,EAAcoB,EAAuBgC,IAC/E5C,EAA2B4C,EAAO,OAAQnD,EAAcmB,EAAuBgC,IAC/E5C,EAA2B4C,EAAO,eAAgBlD,EAAckB,EAAuBgC,IACvF5C,EAA2B4C,EAAO,eAAgBjD,EAAeiB,EAAuBgC,IACxFA,EAAMQ,MAAQ,MACd,OAAOR,CACT,CACA,IAAIS,EAASb,EAAYtB,UACzBmC,EAAOC,qBAAuB,SAASA,IACrC,MAAMC,EAAU,GAChB,GAAIJ,KAAKK,OAAQ,CACfD,EAAQE,KAAKN,KAAKK,OACpB,CACA,GAAIL,KAAKO,KAAM,CACbH,EAAQE,KAAKN,KAAKO,KACpB,CACA,GAAIP,KAAKQ,KAAM,CACbJ,EAAQE,KAAKN,KAAKQ,KACpB,CACA,GAAIR,KAAKS,KAAM,CACbL,EAAQE,KAAKN,KAAKS,KACpB,CACA,GAAIT,KAAKU,aAAc,CACrBN,EAAQE,KAAKN,KAAKU,aACpB,CACA,GAAIV,KAAKW,aAAc,CACrBP,EAAQE,KAAKN,KAAKW,aACpB,CACA,MAAO,CACLC,SAAUR,EAEd,EACAF,EAAOW,kBAAoB,SAASA,IAClCb,KAAKc,iBACLd,KAAKe,iBACP,EACAb,EAAOY,eAAiB,SAASA,IAC/Bd,KAAKgB,mBAAmBhB,KAAKK,QAC7BL,KAAKgB,mBAAmBhB,KAAKO,MAC7BP,KAAKgB,mBAAmBhB,KAAKQ,MAC7BR,KAAKgB,mBAAmBhB,KAAKS,MAC7BT,KAAKgB,mBAAmBhB,KAAKU,cAC7BV,KAAKgB,mBAAmBhB,KAAKW,aAC/B,EACAT,EAAOa,gBAAkB,SAASA,IAChC,IAAIE,EAEJ,MAAMC,EAAuB,GAC3BC,EAAOvG,EAAYwG,cAAcpB,MACjCqB,EAA0BF,EAAKG,cAAcC,gBAC7CC,EAAYL,EAAKM,WAAWC,eAC5BC,EAAgBH,EAAUI,YAAYP,GACtCQ,EAAcL,EAAUM,WAAWT,GACnCU,EAAoBlH,EAAmBmH,4BAA4BH,GACnEI,EAAajC,KAAKkC,KAAK,cACvBC,EAAYF,EAAWG,QAAQ,GAAGT,IAAiB,IACnDU,EAAOF,EAAUC,QAAQpC,KAAKsC,aAAc,IAC9CpB,EAAqBZ,KAAK,CACxBiC,wBAAyBJ,IAE3B,GAAInC,KAAKwC,SAAU,CACjBtB,EAAqBZ,KAAK,CACxBiC,wBAAyBF,EAAOrC,KAAKwC,UAEzC,CACA,GAAIxC,KAAKyC,UAAW,CAClBvB,EAAqBZ,KAAK,CACxBiC,wBAAyBF,EAAOrC,KAAKyC,WAEzC,EACCxB,EAAwBjB,KAAK0C,8BAAgC,MAAQzB,SAA+B,OAAS,EAAIA,EAAsB0B,sBAAsBZ,EAAkBa,iBAAiBC,mBAAoB,CACnNC,iBAAkB,CAACX,GACnBY,eAAgB7B,EAChB8B,gBAAiBhD,KAAKiD,SAE1B,EACA/C,EAAOwC,yBAA2B,SAASA,IACzC,MAAMQ,EAAalD,KAAKmD,qBACxB,OAAOD,EAAaA,EAAWE,aAAelE,SAChD,EACAgB,EAAOiD,mBAAqB,SAASA,IACnC,MAAMhC,EAAOvG,EAAYwG,cAAcpB,MACvC,OAAOmB,GAAQA,EAAKkC,eACtB,EACAnD,EAAOoD,aAAe,SAASA,IAG7B,MAAMtG,EAAUgD,KAAKuD,oBACrB,OAAOvG,GAAWgD,KAAKwD,UAAYxD,KAAKwD,UAAUpB,QAAQpF,EAAQyG,UAAWzG,EAAQ0G,oBAAsB,EAC7G,EACAxD,EAAOyD,UAAY,SAASA,EAAUC,GAEpC,MAAMC,EAAO7D,KACbA,KAAKC,MAAQ2D,EACb,GAAIA,EAAM,CACR,IAAK5D,KAAK8D,WAAY,CACpB9D,KAAK8D,WAAa,IAAI9I,EAAW,CAC/ByF,KAAMhE,EAAiBuD,MAAM+D,QAAQ,mCACrCC,iBAAkB,OAEtB,CACAC,WAAW,WACT,GAAIJ,EAAK5D,MAAO,CACd,IAAIiE,GACHA,EAAmBL,EAAKC,cAAgB,MAAQI,SAA0B,OAAS,EAAIA,EAAiBC,MAC3G,CACF,EAAG,IACL,KAAO,CACL,IAAIC,GACHA,EAAmBpE,KAAK8D,cAAgB,MAAQM,SAA0B,OAAS,EAAIA,EAAiBC,MAAM,MACjH,CACF,EACAnE,EAAOoE,UAAY,SAASA,IAE1B,OAAOtE,KAAKC,KACd,EACAZ,EAAYkF,OAAS,SAASA,EAAOC,EAAeC,GAClDD,EAAcE,UAAU,MAAOD,GAC/BD,EAAcG,MAAM,QAASF,EAAYG,OACzCJ,EAAcK,UAGdL,EAAcE,UAAU,OACxBF,EAAcG,MAAM,UAAW,QAC/BH,EAAcG,MAAM,aAAc,cAClCH,EAAcG,MAAM,kBAAmB,iBACvCH,EAAcG,MAAM,cAAe,UACnCH,EAAcG,MAAM,YAAa,QACjCH,EAAcG,MAAM,gBAAiB,WACrCH,EAAcG,MAAM,QAAS,QAC7BH,EAAcK,UAGdL,EAAcE,UAAU,OACxBF,EAAcG,MAAM,UAAW,QAC/BH,EAAcG,MAAM,cAAe,UACnCH,EAAcK,UACd,GAAIJ,EAAYpE,OAAQ,CACtBmE,EAAcM,cAAcL,EAAYpE,OAC1C,KAAO,CACLmE,EAAcM,cAAcL,EAAYlE,MACxCiE,EAAcM,cAAcL,EAAYjE,MACxCgE,EAAcM,cAAcL,EAAYhE,KAC1C,CAEA+D,EAAcH,MAAM,OAGpBG,EAAcE,UAAU,OACxBF,EAAcG,MAAM,UAAW,QAC/BH,EAAcG,MAAM,cAAe,UACnCH,EAAcK,UACdL,EAAcM,cAAcL,EAAY/D,cACxC8D,EAAcM,cAAcL,EAAY9D,cACxC6D,EAAcH,MAAM,OAEpBG,EAAcH,MAAM,OAEpBG,EAAcH,MAAM,MACtB,EACAnE,EAAO6E,QAAU,SAASA,EAAQC,GAChC,MAAMC,EAAejF,KAAK0C,2BAC1B,GAAIuC,EAAc,CAChBA,EAAaC,yBAAyBlF,KACxC,QACOA,KAAK8D,WACZ7I,EAAa8C,UAAUgH,QAAQI,MAAMnF,KAAM,CAACgF,GAC9C,EACA,OAAO3F,CACT,CAvL0C,CAuLxCpE,GAAgBc,EAAcyC,EAA0B1C,EAAQiC,UAAW,YAAa,CAAC5C,GAAQ,CACjGiC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXvB,EAAewC,EAA0B1C,EAAQiC,UAAW,eAAgB,CAAC3C,GAAQ,CACvFgC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXtB,EAAeuC,EAA0B1C,EAAQiC,UAAW,WAAY,CAAC1C,GAAQ,CACnF+B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXrB,EAAesC,EAA0B1C,EAAQiC,UAAW,YAAa,CAACzC,GAAQ,CACpF8B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXpB,EAAeqC,EAA0B1C,EAAQiC,UAAW,SAAU,CAACxC,GAAQ,CACjF6B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXnB,EAAeoC,EAA0B1C,EAAQiC,UAAW,OAAQ,CAACvC,GAAQ,CAC/E4B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXlB,EAAemC,EAA0B1C,EAAQiC,UAAW,OAAQ,CAACtC,GAAQ,CAC/E2B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXjB,EAAekC,EAA0B1C,EAAQiC,UAAW,OAAQ,CAACrC,GAAQ,CAC/E0B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXhB,EAAeiC,EAA0B1C,EAAQiC,UAAW,eAAgB,CAACpC,GAAS,CACxFyB,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXf,EAAgBgC,EAA0B1C,EAAQiC,UAAW,eAAgB,CAACnC,GAAS,CACzFwB,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACVzB,KAAaD,GAClB,OAAOwD,CACT,EAAG","sourceRoot":"controls"}},{"offset":{"line":5815,"column":0},"map":{"version":3,"names":["DraftIndicatorBlock","defineBuildingBlock","name","namespace","blockAttribute","type","validate","value","ObjectMarkerVisibility","IconOnly","IconAndText","includes","Error","required","expectedTypes","bindable","formatDraftOwnerTextInPopover","hasDraftEntity","draftInProcessByUser","draftLastChangedByUser","draftInProcessByUserDesc","draftLastChangedByUserDesc","macroResourceBundle","Core","getLibraryResourceBundle","userDescription","getText","getDraftAdministrativeDataProperties","draftAdministrativeDataContext","entitySet","getModel","createBindingContext","convertedDraftAdministrativeData","convertMetaModelContext","targetType","entityProperties","map","property","getPopoverTitleBindingExpression","ifElse","not","Entity","IsActive","pathInModel","HasDraft","isEmpty","draftIndicatorType","getDraftOwnerTextBindingExpression","draftAdministrativeDataProperties","parts","path","push","formatter","createPopover","control","isDraftWithNoChangesBinding","and","draftWithNoChangesTextBinding","isDraftWithChangesBinding","draftWithChangesTextBinding","model","formatMessage","isActiveInstanceBinding","activeInstanceTextBinding","popover","draftPopover","close","CommonUtils","getTargetView","addDependent","onObjectMarkerPressed","event","source","getSource","bindingContext","getBindingContext","setBindingContext","openBy","getIconAndTextAdditionalInfoBindingExpression","orBindings","or","getIconAndTextContent","ObjectMarkerType","Draft","LockedBy","UnsavedBy","Unsaved","Flagged","visibility","TextOnly","bind","isDraftIndicatorVisible","ariaLabelledBy","class","getIconOnlyContent","Locked","visible","UI","IsEditable","getContent","RuntimeBuildingBlock","constant"],"sourceRoot":"draftIndicator","sources":["DraftIndicator.block.tsx"],"sourcesContent":["import type { NavigationProperty } from \"@sap-ux/vocabularies-types\";\nimport formatMessage from \"sap/base/strings/formatMessage\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport RuntimeBuildingBlock from \"sap/fe/core/buildingBlocks/RuntimeBuildingBlock\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { Entity, UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport { convertMetaModelContext } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { BindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { and, constant, ifElse, isEmpty, not, or, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport Button from \"sap/m/Button\";\nimport { ObjectMarkerType, ObjectMarkerVisibility } from \"sap/m/library\";\nimport ObjectMarker from \"sap/m/ObjectMarker\";\nimport Popover from \"sap/m/Popover\";\nimport Text from \"sap/m/Text\";\nimport VBox from \"sap/m/VBox\";\nimport type Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Building block for creating a DraftIndicator based on the metadata provided by OData V4.\n *\n * Usage example:\n * <pre>\n * &lt;macro:DraftIndicator\n *   id=\"SomeID\"\n * /&gt;\n * </pre>\n *\n * @private\n */\n@defineBuildingBlock({ name: \"DraftIndicator\", namespace: \"sap.fe.macros\" })\nexport default class DraftIndicatorBlock extends RuntimeBuildingBlock {\n\t/**\n\t * ID of the DraftIndicator\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic id?: string;\n\n\t/**\n\t * Property added to associate the label with the DraftIndicator\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic ariaLabelledBy?: string;\n\n\t/**\n\t * Type of the DraftIndicator, either \"IconAndText\" (default) or \"IconOnly\"\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tvalidate: (value?: ObjectMarkerVisibility) => {\n\t\t\tif (value && ![ObjectMarkerVisibility.IconOnly, ObjectMarkerVisibility.IconAndText].includes(value)) {\n\t\t\t\tthrow new Error(`Allowed value ${value} does not match`);\n\t\t\t}\n\t\t}\n\t})\n\tpublic draftIndicatorType: ObjectMarkerVisibility.IconOnly | ObjectMarkerVisibility.IconAndText = ObjectMarkerVisibility.IconAndText;\n\n\t/**\n\t * Mandatory context to the EntitySet\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true, expectedTypes: [\"EntitySet\", \"NavigationProperty\"] })\n\tpublic entitySet!: Context;\n\n\t@blockAttribute({ type: \"boolean\", bindable: true })\n\tpublic isDraftIndicatorVisible: BindingToolkitExpression<boolean> = constant(false);\n\n\t@blockAttribute({ type: \"string\" })\n\tpublic class = \"\";\n\n\tdraftPopover?: Popover;\n\n\t/**\n\t * Runtime formatter function to format the correct text that displays the owner of a draft.\n\t *\n\t * This is used in case the DraftIndicator is shown for an active entity that has a draft of another user.\n\t *\n\t * @param hasDraftEntity\n\t * @param draftInProcessByUser\n\t * @param draftLastChangedByUser\n\t * @param draftInProcessByUserDesc\n\t * @param draftLastChangedByUserDesc\n\t * @returns Text to display\n\t */\n\tstatic formatDraftOwnerTextInPopover(\n\t\tthis: void,\n\t\thasDraftEntity: boolean,\n\t\tdraftInProcessByUser: string,\n\t\tdraftLastChangedByUser: string,\n\t\tdraftInProcessByUserDesc: string,\n\t\tdraftLastChangedByUserDesc: string\n\t): string {\n\t\tconst macroResourceBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\n\t\tif (hasDraftEntity) {\n\t\t\tconst userDescription =\n\t\t\t\tdraftInProcessByUserDesc || draftInProcessByUser || draftLastChangedByUserDesc || draftLastChangedByUser;\n\n\t\t\tif (!userDescription) {\n\t\t\t\treturn macroResourceBundle.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_UNSAVED_CHANGES_BY_UNKNOWN\");\n\t\t\t} else {\n\t\t\t\treturn draftInProcessByUser\n\t\t\t\t\t? macroResourceBundle.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_LOCKED_BY_KNOWN\", [userDescription])\n\t\t\t\t\t: macroResourceBundle.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_UNSAVED_CHANGES_BY_KNOWN\", [userDescription]);\n\t\t\t}\n\t\t} else {\n\t\t\treturn macroResourceBundle.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_NO_DATA_TEXT\");\n\t\t}\n\t}\n\n\t/***\n\t * Gets the properties of the DraftAdministrativeData entity connected to the given entity set\n\t *\n\t * @returns List of property names\n\t */\n\tgetDraftAdministrativeDataProperties(): string[] {\n\t\tconst draftAdministrativeDataContext = this.entitySet.getModel().createBindingContext(\"DraftAdministrativeData\", this.entitySet);\n\t\tconst convertedDraftAdministrativeData = convertMetaModelContext(draftAdministrativeDataContext) as NavigationProperty;\n\t\treturn convertedDraftAdministrativeData.targetType.entityProperties.map((property: { name: string }) => property.name);\n\t}\n\n\t/**\n\t * Constructs the binding expression for the text displayed as title of the popup.\n\t *\n\t * @returns The binding expression\n\t */\n\tgetPopoverTitleBindingExpression() {\n\t\treturn ifElse(\n\t\t\tnot(Entity.IsActive),\n\t\t\tpathInModel(\"M_COMMON_DRAFT_OBJECT\", \"sap.fe.i18n\"),\n\t\t\tifElse(\n\t\t\t\tEntity.HasDraft,\n\t\t\t\tifElse(\n\t\t\t\t\tnot(isEmpty(pathInModel(\"DraftAdministrativeData/InProcessByUser\"))),\n\t\t\t\t\tpathInModel(\"M_COMMON_DRAFT_LOCKED_OBJECT\", \"sap.fe.i18n\"),\n\t\t\t\t\tpathInModel(\"M_DRAFT_POPOVER_ADMIN_UNSAVED_OBJECT\", \"sap.fe.i18n\")\n\t\t\t\t),\n\t\t\t\tthis.draftIndicatorType === ObjectMarkerVisibility.IconAndText\n\t\t\t\t\t? \" \"\n\t\t\t\t\t: pathInModel(\"C_DRAFT_POPOVER_ADMIN_DATA_DRAFTINFO_FLAGGED_OBJECT\", \"sap.fe.i18n\")\n\t\t\t)\n\t\t);\n\t}\n\n\t/**\n\t * Constructs the binding expression for the text displayed to identify the draft owner in the popup.\n\t * This binding is configured to call formatDraftOwnerTextInPopover at runtime.\n\t *\n\t * We cannot reference formatDraftOwnerTextInPopover directly as we need to conditionally pass properties that might exist or not,\n\t * and referring to non-existing properties fails the binding.\n\t *\n\t * @returns The binding expression\n\t */\n\tgetDraftOwnerTextBindingExpression() {\n\t\tconst draftAdministrativeDataProperties = this.getDraftAdministrativeDataProperties();\n\n\t\tconst parts = [\n\t\t\t{ path: \"HasDraftEntity\", targetType: \"any\" },\n\t\t\t{ path: \"DraftAdministrativeData/InProcessByUser\" },\n\t\t\t{ path: \"DraftAdministrativeData/LastChangedByUser\" }\n\t\t];\n\t\tif (draftAdministrativeDataProperties.includes(\"InProcessByUserDescription\")) {\n\t\t\tparts.push({ path: \"DraftAdministrativeData/InProcessByUserDescription\" });\n\t\t}\n\t\tif (draftAdministrativeDataProperties.includes(\"LastChangedByUserDescription\")) {\n\t\t\tparts.push({ path: \"DraftAdministrativeData/LastChangedByUserDescription\" });\n\t\t}\n\n\t\t//parts.push({path: \"sap.fe.i18n>\"})\n\n\t\treturn { parts, formatter: DraftIndicatorBlock.formatDraftOwnerTextInPopover };\n\t}\n\n\t/**\n\t * Creates a popover control to display draft information.\n\t *\n\t * @param control Control that the popover is to be created for\n\t * @returns The created popover control\n\t */\n\tcreatePopover(control: Control): Popover {\n\t\tconst isDraftWithNoChangesBinding = and(not(Entity.IsActive), isEmpty(pathInModel(\"DraftAdministrativeData/LastChangeDateTime\")));\n\t\tconst draftWithNoChangesTextBinding =\n\t\t\tthis.draftIndicatorType === ObjectMarkerVisibility.IconAndText\n\t\t\t\t? pathInModel(\"M_DRAFT_POPOVER_ADMIN_GENERIC_LOCKED_OBJECT_POPOVER_TEXT\", \"sap.fe.i18n\")\n\t\t\t\t: pathInModel(\"C_DRAFT_POPOVER_ADMIN_DATA_DRAFTINFO_POPOVER_NO_DATA_TEXT\", \"sap.fe.i18n\");\n\n\t\tconst isDraftWithChangesBinding = and(\n\t\t\tnot(Entity.IsActive),\n\t\t\tnot(isEmpty(pathInModel(\"DraftAdministrativeData/LastChangeDateTime\")))\n\t\t);\n\t\tconst draftWithChangesTextBinding = {\n\t\t\tparts: [\n\t\t\t\t{ path: \"M_DRAFT_POPOVER_ADMIN_LAST_CHANGE_TEXT\", model: \"sap.fe.i18n\" },\n\t\t\t\t{ path: \"DraftAdministrativeData/LastChangeDateTime\" }\n\t\t\t],\n\t\t\tformatter: formatMessage\n\t\t};\n\n\t\tconst isActiveInstanceBinding = and(Entity.IsActive, not(isEmpty(pathInModel(\"DraftAdministrativeData/LastChangeDateTime\"))));\n\t\tconst activeInstanceTextBinding = { ...draftWithChangesTextBinding };\n\n\t\tconst popover: Popover = (\n\t\t\t<Popover\n\t\t\t\ttitle={this.getPopoverTitleBindingExpression()}\n\t\t\t\tshowHeader={true}\n\t\t\t\tcontentWidth={\"15.625rem\"}\n\t\t\t\tverticalScrolling={false}\n\t\t\t\tclass={\"sapUiContentPadding\"}\n\t\t\t\tendButton={(<Button icon={\"sap-icon://decline\"} press={() => this.draftPopover?.close()} />) as Button}\n\t\t\t>\n\t\t\t\t<VBox class={\"sapUiContentPadding\"}>\n\t\t\t\t\t<VBox visible={isDraftWithNoChangesBinding}>\n\t\t\t\t\t\t<Text text={draftWithNoChangesTextBinding} />\n\t\t\t\t\t</VBox>\n\t\t\t\t\t<VBox visible={isDraftWithChangesBinding}>\n\t\t\t\t\t\t<Text text={draftWithChangesTextBinding} />\n\t\t\t\t\t</VBox>\n\t\t\t\t\t<VBox visible={isActiveInstanceBinding}>\n\t\t\t\t\t\t<Text text={this.getDraftOwnerTextBindingExpression()} />\n\t\t\t\t\t\t<Text class={\"sapUiSmallMarginTop\"} text={activeInstanceTextBinding} />\n\t\t\t\t\t</VBox>\n\t\t\t\t</VBox>\n\t\t\t</Popover>\n\t\t) as Popover;\n\n\t\tCommonUtils.getTargetView(control).addDependent(popover);\n\t\treturn popover;\n\t}\n\n\t/**\n\t * Handles pressing of the object marker by opening a corresponding popover.\n\t *\n\t * @param event Event object passed from the press event\n\t */\n\tonObjectMarkerPressed(event: Event): void {\n\t\tconst source = event.getSource() as Control;\n\t\tconst bindingContext = source.getBindingContext() as Context;\n\n\t\tthis.draftPopover ??= this.createPopover(source);\n\n\t\tthis.draftPopover.setBindingContext(bindingContext);\n\t\tthis.draftPopover.openBy(source, false);\n\t}\n\n\t/**\n\t * Constructs the binding expression for the \"additionalInfo\" attribute in the \"IconAndText\" case.\n\t *\n\t * @returns The binding expression\n\t */\n\tgetIconAndTextAdditionalInfoBindingExpression() {\n\t\tconst draftAdministrativeDataProperties = this.getDraftAdministrativeDataProperties();\n\n\t\tconst orBindings = [];\n\t\tif (draftAdministrativeDataProperties.includes(\"InProcessByUserDescription\")) {\n\t\t\torBindings.push(pathInModel(\"DraftAdministrativeData/InProcessByUserDescription\"));\n\t\t}\n\t\torBindings.push(pathInModel(\"DraftAdministrativeData/InProcessByUser\"));\n\t\tif (draftAdministrativeDataProperties.includes(\"LastChangedByUserDescription\")) {\n\t\t\torBindings.push(pathInModel(\"DraftAdministrativeData/LastChangedByUserDescription\"));\n\t\t}\n\t\torBindings.push(pathInModel(\"DraftAdministrativeData/LastChangedByUser\"));\n\n\t\treturn ifElse<string>(Entity.HasDraft, or(...orBindings) as BindingToolkitExpression<string>, \"\");\n\t}\n\n\t/**\n\t * Returns the content of this building block for the \"IconAndText\" type.\n\t *\n\t * @returns The control tree\n\t */\n\tgetIconAndTextContent() {\n\t\tconst type = ifElse(\n\t\t\tnot(Entity.IsActive),\n\t\t\tObjectMarkerType.Draft,\n\t\t\tifElse(\n\t\t\t\tEntity.HasDraft,\n\t\t\t\tifElse(\n\t\t\t\t\tpathInModel(\"DraftAdministrativeData/InProcessByUser\"),\n\t\t\t\t\tObjectMarkerType.LockedBy,\n\t\t\t\t\tifElse(pathInModel(\"DraftAdministrativeData/LastChangedByUser\"), ObjectMarkerType.UnsavedBy, ObjectMarkerType.Unsaved)\n\t\t\t\t),\n\t\t\t\tObjectMarkerType.Flagged\n\t\t\t)\n\t\t);\n\n\t\tconst visibility = ifElse(not(Entity.HasDraft), ObjectMarkerVisibility.TextOnly, ObjectMarkerVisibility.IconAndText);\n\n\t\treturn (\n\t\t\t<ObjectMarker\n\t\t\t\ttype={type}\n\t\t\t\tpress={this.onObjectMarkerPressed.bind(this)}\n\t\t\t\tvisibility={visibility}\n\t\t\t\tvisible={this.isDraftIndicatorVisible}\n\t\t\t\tadditionalInfo={this.getIconAndTextAdditionalInfoBindingExpression()}\n\t\t\t\tariaLabelledBy={this.ariaLabelledBy ? [this.ariaLabelledBy] : []}\n\t\t\t\tclass={this.class}\n\t\t\t/>\n\t\t) as ObjectMarker;\n\t}\n\n\t/**\n\t * Returns the content of this building block for the \"IconOnly\" type.\n\t *\n\t * @returns The control tree\n\t */\n\tgetIconOnlyContent() {\n\t\tconst type = ifElse(\n\t\t\tnot(Entity.IsActive),\n\t\t\tObjectMarkerType.Draft,\n\t\t\tifElse(\n\t\t\t\tEntity.HasDraft,\n\t\t\t\tifElse(pathInModel(\"DraftAdministrativeData/InProcessByUser\"), ObjectMarkerType.Locked, ObjectMarkerType.Unsaved),\n\t\t\t\tObjectMarkerType.Flagged\n\t\t\t)\n\t\t);\n\t\t// If Entity.HasDraft is empty, there is no context at all, so don't show the indicator\n\t\tconst visible = and(\n\t\t\tnot(isEmpty(Entity.HasDraft)),\n\t\t\tnot(UI.IsEditable),\n\t\t\tEntity.HasDraft,\n\t\t\tnot(pathInModel(\"DraftAdministrativeData/DraftIsCreatedByMe\"))\n\t\t);\n\n\t\treturn (\n\t\t\t<ObjectMarker\n\t\t\t\ttype={type}\n\t\t\t\tpress={this.onObjectMarkerPressed.bind(this)}\n\t\t\t\tvisibility={ObjectMarkerVisibility.IconOnly}\n\t\t\t\tvisible={visible}\n\t\t\t\tariaLabelledBy={this.ariaLabelledBy ? [this.ariaLabelledBy] : []}\n\t\t\t\tclass={this.class}\n\t\t\t/>\n\t\t) as ObjectMarker;\n\t}\n\n\t/**\n\t * Returns the content of this building block.\n\t *\n\t * @returns The control tree\n\t */\n\tgetContent() {\n\t\tif (this.draftIndicatorType === ObjectMarkerVisibility.IconAndText) {\n\t\t\treturn this.getIconAndTextContent();\n\t\t} else {\n\t\t\treturn this.getIconOnlyContent();\n\t\t}\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":6168,"column":0},"map":{"version":3,"names":["sap","ui","define","formatMessage","BuildingBlockSupport","RuntimeBuildingBlock","CommonUtils","BindingHelper","MetaModelConverter","BindingToolkit","Button","library","ObjectMarker","Popover","Text","VBox","Core","_jsx","_jsxs","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_exports","ObjectMarkerVisibility","ObjectMarkerType","pathInModel","or","not","isEmpty","ifElse","constant","and","convertMetaModelContext","UI","Entity","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","DraftIndicatorBlock","name","namespace","type","validate","IconOnly","IconAndText","includes","required","expectedTypes","bindable","_RuntimeBuildingBlock","_this","_len","arguments","length","args","Array","_key","this","formatDraftOwnerTextInPopover","hasDraftEntity","draftInProcessByUser","draftLastChangedByUser","draftInProcessByUserDesc","draftLastChangedByUserDesc","macroResourceBundle","getLibraryResourceBundle","userDescription","getText","_proto","getDraftAdministrativeDataProperties","draftAdministrativeDataContext","entitySet","getModel","createBindingContext","convertedDraftAdministrativeData","targetType","entityProperties","map","getPopoverTitleBindingExpression","IsActive","HasDraft","draftIndicatorType","getDraftOwnerTextBindingExpression","draftAdministrativeDataProperties","parts","path","push","formatter","createPopover","control","isDraftWithNoChangesBinding","draftWithNoChangesTextBinding","isDraftWithChangesBinding","draftWithChangesTextBinding","model","isActiveInstanceBinding","activeInstanceTextBinding","popover","title","showHeader","contentWidth","verticalScrolling","class","endButton","icon","press","_this$draftPopover","draftPopover","close","children","visible","text","getTargetView","addDependent","onObjectMarkerPressed","event","source","getSource","bindingContext","getBindingContext","setBindingContext","openBy","getIconAndTextAdditionalInfoBindingExpression","orBindings","getIconAndTextContent","Draft","LockedBy","UnsavedBy","Unsaved","Flagged","visibility","TextOnly","isDraftIndicatorVisible","additionalInfo","ariaLabelledBy","getIconOnlyContent","Locked","IsEditable","getContent"],"sources":["DraftIndicator.block-dbg.js"],"mappings":"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","sourceRoot":"draftIndicator"}},{"offset":{"line":6173,"column":0},"map":{"version":3,"names":["FlexibleColumnLayoutActionsBlock","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","getTemplate","xml","BuildingBlockBase"],"sourceRoot":"fcl","sources":["FlexibleColumnLayoutActions.block.ts"],"sourcesContent":["import BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\n\n@defineBuildingBlock({\n\tname: \"FlexibleColumnLayoutActions\",\n\tnamespace: \"sap.fe.macros.fcl\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.m.OverflowToolbarButton\"]\n})\nexport default class FlexibleColumnLayoutActionsBlock extends BuildingBlockBase {\n\tgetTemplate() {\n\t\treturn xml`\n            <m:OverflowToolbarButton\n                id=\"fe::FCLStandardAction::FullScreen\"\n                type=\"Transparent\"\n                icon=\"{fclhelper>/actionButtonsInfo/switchIcon}\"\n                visible=\"{fclhelper>/actionButtonsInfo/switchVisible}\"\n                press=\"._routing.switchFullScreen()\"\n            />\n            <m:OverflowToolbarButton\n                id=\"fe::FCLStandardAction::Close\"\n                type=\"Transparent\"\n                icon=\"sap-icon://decline\"\n                tooltip=\"{sap.fe.i18n>C_COMMON_SAPFE_CLOSE}\"\n                visible=\"{fclhelper>/actionButtonsInfo/closeVisible}\"\n                press=\"._routing.closeColumn()\"\n            />`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;MAUqBA,gCAAgC,WANpDC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,6BAA6B;IACnCC,SAAS,EAAE,mBAAmB;IAC9BC,eAAe,EAAE,eAAe;IAChCC,WAAW,EAAE,CAAC,6BAA6B;EAC5C,CAAC,CAAC;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA;IAAA,OAEDC,WAAW,GAAX,uBAAc;MACb,OAAOC,GAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;IACd,CAAC;IAAA;EAAA,EAlB4DC,iBAAiB;EAAA;EAAA;AAAA"}},{"offset":{"line":6221,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","_dec","_class","_exports","xml","defineBuildingBlock","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","FlexibleColumnLayoutActionsBlock","name","namespace","publicNamespace","returnTypes","_BuildingBlockBase","apply","this","arguments","_proto","getTemplate"],"sources":["FlexibleColumnLayoutActions.block-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,iEAAO,CAAC,+CAAgD,kDAAmD,6DAA8D,SAAUC,EAAmBC,EAAsBC,GACjO,aAEA,IAAIC,EAAMC,EACV,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAMJ,EAA+BI,IACzC,IAAIC,EAAsBN,EAAqBM,oBAC/C,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,IAAII,GAAoClB,EAAOI,EAAoB,CACjEe,KAAM,8BACNC,UAAW,oBACXC,gBAAiB,gBACjBC,YAAa,CAAC,iCACZtB,EAAKC,EAAsB,SAAUsB,GACvClB,EAAea,EAAkCK,GACjD,SAASL,IACP,OAAOK,EAAmBC,MAAMC,KAAMC,YAAcD,IACtD,CACAvB,EAAWgB,EACX,IAAIS,EAAST,EAAiCV,UAC9CmB,EAAOC,YAAc,SAASA,IAC5B,OAAOzB,CAAG;;;;;;;;;;;;;;;eAgBZ,EACA,OAAOe,CACT,CA1B+B,CA0B7BrB,KAAuBI,GACzBC,EAAWgB,EACX,OAAOhB,CACT,EAAG","sourceRoot":"fcl"}},{"offset":{"line":6241,"column":0},"map":{"version":3,"names":["getControlInFieldWrapper","oControl","isA","oFieldWrapper","aControls","getEditMode","getContentDisplay","getContentEdit","length","undefined","FieldAPI","defineUI5Class","returnTypes","property","type","expectedAnnotations","expectedTypes","event","association","multiple","singularName","xmlEventHandler","handleChange","oEvent","fireChange","value","getValue","isValid","getParameter","onBeforeRendering","isArialLabelledByCompliant","control","oContent","content","addAriaLabelledBy","aAriaLabelledBy","getAriaLabelledBy","i","sId","aAriaLabelledBys","indexOf","enhanceAccessibilityState","_oElement","mAriaProps","oParent","getParent","getAccessibilityInfo","getIdForLabel","collaborationEnabled","getItems","getSelected","addMessage","parameters","msgManager","getMessageManager","path","getBinding","getResolvedPath","oMessage","Message","target","message","processor","getModel","description","persistent","addMessages","getId","removeMessage","id","arr","getMessageModel","getData","result","find","e","removeMessages","sap","ui","getCore","MacroAPI"],"sourceRoot":"field","sources":["FieldAPI.ts"],"sourcesContent":["import type { EnhanceWithUI5 } from \"sap/fe/core/helpers/ClassSupport\";\nimport { association, defineUI5Class, event, property, xmlEventHandler } from \"sap/fe/core/helpers/ClassSupport\";\nimport type FieldWrapper from \"sap/fe/macros/controls/FieldWrapper\";\nimport type Button from \"sap/m/Button\";\nimport type CheckBox from \"sap/m/CheckBox\";\nimport type HBox from \"sap/m/HBox\";\nimport type InputBase from \"sap/m/InputBase\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { MessageType } from \"sap/ui/core/library\";\nimport Message from \"sap/ui/core/message/Message\";\nimport type MDCField from \"sap/ui/mdc/Field\";\nimport type FileWrapper from \"../controls/FileWrapper\";\nimport MacroAPI from \"../MacroAPI\";\n/**\n * Additional format options for the field.\n *\n * @alias sap.fe.macros.FieldFormatOptions\n * @public\n */\nexport type FieldFormatOptions = {\n\t/**\n\t *  Defines how the field value and associated text will be displayed together.<br/>\n\t *\n\t *  Allowed values are \"Value\", \"Description\", \"DescriptionValue\" and \"ValueDescription\"\n\t *\n\t *  @public\n\t */\n\tdisplayMode: \"Value\" | \"Description\" | \"DescriptionValue\" | \"ValueDescription\";\n\t/**\n\t * Defines if and how the field measure will be displayed.<br/>\n\t *\n\t * Allowed values are \"Hidden\" and \"ReadOnly\"\n\t *\n\t *  @public\n\t */\n\tmeasureDisplayMode: \"Hidden\" | \"ReadOnly\";\n\t/**\n\t * Maximum number of lines for multiline texts in edit mode.<br/>\n\t *\n\t *  @public\n\t */\n\ttextLinesEdit: number;\n\t/**\n\t * Maximum number of lines that multiline texts in edit mode can grow to.<br/>\n\t *\n\t *  @public\n\t */\n\ttextMaxLines: number;\n\t/**\n\t * Maximum number of characters from the beginning of the text field that are shown initially.<br/>\n\t *\n\t *  @public\n\t */\n\ttextMaxCharactersDisplay: number;\n\t/**\n\t * Defines how the full text will be displayed.<br/>\n\t *\n\t * Allowed values are \"InPlace\" and \"Popover\"\n\t *\n\t *  @public\n\t */\n\ttextExpandBehaviorDisplay: \"InPlace\" | \"Popover\";\n\t/**\n\t * Defines the maximum number of characters for the multiline text value.<br/>\n\t *\n\t * If a multiline text exceeds the maximum number of allowed characters, the counter below the input field displays the exact number.\n\t *\n\t *  @public\n\t */\n\ttextMaxLength: number;\n\t/**\n\t * Defines if the date part of a date time with timezone field should be shown. <br/>\n\t *\n\t * The dateTimeOffset field must have a timezone annotation.\n\t *\n\t * The default value is true.\n\t *\n\t *  @public\n\t */\n\tshowDate: boolean;\n\t/**\n\t * Defines if the time part of a date time with timezone field should be shown. <br/>\n\t *\n\t * The dateTimeOffset field must have a timezone annotation.\n\t *\n\t * The default value is true.\n\t *\n\t *  @public\n\t */\n\tshowTime: boolean;\n\t/**\n\t * Defines if the timezone part of a date time with timezone field should be shown. <br/>\n\t *\n\t * The dateTimeOffset field must have a timezone annotation.\n\t *\n\t * The default value is true.\n\t *\n\t *  @public\n\t */\n\tshowTimezone: boolean;\n};\n\n/**\n * Returns the first visible control in the FieldWrapper.\n *\n * @param oControl FieldWrapper\n * @returns The first visible control\n */\nfunction getControlInFieldWrapper(oControl: Control): Control | undefined {\n\tif (oControl.isA(\"sap.fe.macros.controls.FieldWrapper\")) {\n\t\tconst oFieldWrapper = oControl as EnhanceWithUI5<FieldWrapper>;\n\t\tconst aControls = oFieldWrapper.getEditMode() === \"Display\" ? [oFieldWrapper.getContentDisplay()] : oFieldWrapper.getContentEdit();\n\t\tif (aControls.length >= 1) {\n\t\t\treturn aControls.length ? aControls[0] : undefined;\n\t\t}\n\t} else {\n\t\treturn oControl;\n\t}\n\treturn undefined;\n}\n\n/**\n * Building block for creating a field based on the metadata provided by OData V4.\n * <br>\n * Usually, a DataField or DataPoint annotation is expected, but the field can also be used to display a property from the entity type.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Field id=\"MyField\" metaPath=\"MyProperty\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.Field\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.field.FieldAPI\", {\n\treturnTypes: [\n\t\t\"sap.fe.core.controls.FormElementWrapper\" /*, not sure i want to add those yet \"sap.fe.macros.field.FieldAPI\", \"sap.m.HBox\", \"sap.fe.macros.controls.ConditionalWrapper\", \"sap.m.Button\"*/\n\t]\n})\nclass FieldAPI extends MacroAPI {\n\t/**\n\t * An expression that allows you to control the editable state of the field.\n\t *\n\t * If you do not set any expression, SAP Fiori elements hooks into the standard lifecycle to determine if the page is currently editable.\n\t * Please note that you cannot set a field to editable if it has been defined in the annotation as not editable.\n\t *\n\t * @private\n\t * @deprecated\n\t */\n\t@property({ type: \"boolean\" })\n\teditable!: boolean;\n\n\t/**\n\t * An expression that allows you to control the read-only state of the field.\n\t *\n\t * If you do not set any expression, SAP Fiori elements hooks into the standard lifecycle to determine the current state.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\" })\n\treadOnly!: boolean;\n\n\t/**\n\t * The identifier of the Field control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedAnnotations: [],\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\", \"Property\"]\n\t})\n\tmetaPath!: string;\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"]\n\t})\n\tcontextPath!: string;\n\n\t/**\n\t * An event containing details is triggered when the value of the field is changed.\n\t *\n\t * @public\n\t */\n\t@event()\n\tchange!: Function;\n\n\t@association({ type: \"sap.ui.core.Control\", multiple: true, singularName: \"ariaLabelledBy\" })\n\tariaLabelledBy!: Control;\n\n\t@property({ type: \"boolean\" })\n\trequired!: boolean;\n\n\t/**\n\t * A set of options that can be configured.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"sap.fe.macros.FieldFormatOptions\" })\n\tformatOptions!: FieldFormatOptions;\n\n\t/**\n\t * Option to add semantic objects to a field.\n\t * Valid options are either a single semantic object, a stringified array of semantic objects\n\t * or a single binding expression returning either a single semantic object or an array of semantic objects\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tsemanticObject!: string;\n\n\t@property({ type: \"boolean\" })\n\tcollaborationEnabled!: boolean;\n\n\t@property({ type: \"boolean\" })\n\tvisible!: boolean;\n\n\t@xmlEventHandler()\n\thandleChange(oEvent: UI5Event) {\n\t\t(this as any).fireChange({ value: this.getValue(), isValid: oEvent.getParameter(\"valid\") });\n\t}\n\n\tonBeforeRendering() {\n\t\tconst isArialLabelledByCompliant = function (\n\t\t\tcontrol: Control\n\t\t): control is Control & { addAriaLabelledBy: Function; getAriaLabelledBy: Function } {\n\t\t\treturn control.isA<Button | FieldWrapper | MDCField | FileWrapper>([\n\t\t\t\t\"sap.m.Button\",\n\t\t\t\t\"sap.fe.macros.controls.FieldWrapper\",\n\t\t\t\t\"sap.ui.mdc.Field\",\n\t\t\t\t\"sap.fe.macros.controls.FileWrapper\"\n\t\t\t]);\n\t\t};\n\t\tconst oContent = this.content;\n\t\tif (oContent && isArialLabelledByCompliant(oContent) && oContent.addAriaLabelledBy) {\n\t\t\tconst aAriaLabelledBy = (this as any).getAriaLabelledBy();\n\n\t\t\tfor (let i = 0; i < aAriaLabelledBy.length; i++) {\n\t\t\t\tconst sId = aAriaLabelledBy[i];\n\t\t\t\tconst aAriaLabelledBys = oContent.getAriaLabelledBy() || [];\n\t\t\t\tif (aAriaLabelledBys.indexOf(sId) === -1) {\n\t\t\t\t\toContent.addAriaLabelledBy(sId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tenhanceAccessibilityState(_oElement: object, mAriaProps: object): object {\n\t\tconst oParent = this.getParent();\n\n\t\tif (oParent && (oParent as any).enhanceAccessibilityState) {\n\t\t\t// use FieldWrapper as control, but aria properties of rendered inner control.\n\t\t\t(oParent as any).enhanceAccessibilityState(this, mAriaProps);\n\t\t}\n\n\t\treturn mAriaProps;\n\t}\n\n\tgetAccessibilityInfo(): Object {\n\t\tconst oContent = this.content;\n\t\treturn oContent && oContent.getAccessibilityInfo ? oContent.getAccessibilityInfo() : {};\n\t}\n\n\t/**\n\t * Returns the DOMNode ID to be used for the \"labelFor\" attribute.\n\t *\n\t * We forward the call of this method to the content control.\n\t *\n\t * @returns ID to be used for the <code>labelFor</code>\n\t */\n\tgetIdForLabel(): string {\n\t\tconst oContent = this.content;\n\t\treturn oContent.getIdForLabel();\n\t}\n\n\t/**\n\t * Retrieves the current value of the field.\n\t *\n\t * @public\n\t * @returns The current value of the field\n\t */\n\tgetValue(): boolean | string {\n\t\tlet oControl = getControlInFieldWrapper(this.content);\n\t\tif (this.collaborationEnabled && oControl?.isA(\"sap.m.HBox\")) {\n\t\t\toControl = (oControl as HBox).getItems()[0];\n\t\t}\n\t\tif (oControl?.isA(\"sap.m.CheckBox\")) {\n\t\t\treturn (oControl as CheckBox).getSelected();\n\t\t} else if (oControl?.isA(\"sap.m.InputBase\")) {\n\t\t\treturn (oControl as InputBase).getValue();\n\t\t} else if (oControl?.isA(\"sap.ui.mdc.Field\")) {\n\t\t\treturn (oControl as any).getValue(); // FieldWrapper\n\t\t} else {\n\t\t\tthrow \"getting value not yet implemented for this field type\";\n\t\t}\n\t}\n\n\t/**\n\t * Adds a message to the field.\n\t *\n\t * @param [parameters] The parameters to create message\n\t * @param parameters.type Type of the message\n\t * @param parameters.message Message text\n\t * @param parameters.description Message description\n\t * @param parameters.persistent True if the message is persistent\n\t * @returns The id of the message\n\t * @public\n\t */\n\taddMessage(parameters: { type?: MessageType; message?: string; description?: string; persistent?: boolean }) {\n\t\tconst msgManager = this.getMessageManager();\n\t\tconst oControl = getControlInFieldWrapper(this.content);\n\n\t\tlet path; //target for oMessage\n\t\tif (oControl?.isA(\"sap.m.CheckBox\")) {\n\t\t\tpath = (oControl as CheckBox).getBinding(\"selected\")?.getResolvedPath();\n\t\t} else if (oControl?.isA(\"sap.m.InputBase\")) {\n\t\t\tpath = (oControl as InputBase).getBinding(\"value\")?.getResolvedPath();\n\t\t} else if (oControl?.isA(\"sap.ui.mdc.Field\")) {\n\t\t\tpath = (oControl as any).getBinding(\"value\").getResolvedPath();\n\t\t}\n\n\t\tconst oMessage = new Message({\n\t\t\ttarget: path,\n\t\t\ttype: parameters.type,\n\t\t\tmessage: parameters.message,\n\t\t\tprocessor: oControl?.getModel(),\n\t\t\tdescription: parameters.description,\n\t\t\tpersistent: parameters.persistent\n\t\t});\n\n\t\tmsgManager.addMessages(oMessage);\n\t\treturn oMessage.getId();\n\t}\n\n\t/**\n\t * Removes a message from the field.\n\t *\n\t * @param id The id of the message\n\t * @public\n\t */\n\tremoveMessage(id: string) {\n\t\tconst msgManager = this.getMessageManager();\n\t\tconst arr = msgManager.getMessageModel().getData();\n\t\tconst result = arr.find((e: any) => e.id === id);\n\t\tif (result) {\n\t\t\tmsgManager.removeMessages(result);\n\t\t}\n\t}\n\n\tgetMessageManager() {\n\t\treturn sap.ui.getCore().getMessageManager();\n\t}\n}\n\nexport default FieldAPI;\n"],"mappings":"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"}},{"offset":{"line":6532,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","Message","MacroAPI","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","xmlEventHandler","property","event","defineUI5Class","association","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","getControlInFieldWrapper","oControl","isA","oFieldWrapper","aControls","getEditMode","getContentDisplay","getContentEdit","length","FieldAPI","returnTypes","type","expectedAnnotations","expectedTypes","multiple","singularName","_MacroAPI","_this","_len","arguments","args","Array","_key","this","_proto","handleChange","oEvent","fireChange","getValue","isValid","getParameter","onBeforeRendering","isArialLabelledByCompliant","control","oContent","content","addAriaLabelledBy","aAriaLabelledBy","getAriaLabelledBy","i","sId","aAriaLabelledBys","indexOf","enhanceAccessibilityState","_oElement","mAriaProps","oParent","getParent","getAccessibilityInfo","getIdForLabel","_oControl","_oControl2","_oControl3","_oControl4","collaborationEnabled","getItems","getSelected","addMessage","parameters","msgManager","getMessageManager","path","_getBinding","getBinding","getResolvedPath","_getBinding2","oMessage","message","processor","getModel","description","persistent","addMessages","getId","removeMessage","id","arr","getMessageModel","getData","result","find","e","removeMessages","getCore","getOwnPropertyDescriptor"],"sources":["FieldAPI-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":6537,"column":0},"map":{"version":3,"names":["Object","assign","FieldBaseDelegate","apiVersion","getTypeMap","ODataV4TypeMap","initializeTypeFromBinding","field","type","value","result","isA","Array","isArray","length","undefined","formatValue","bTypeInitialized","mCustomUnits","initializeInternalUnitType","typeInitialization","enhanceValueForUnit","values","push","getDefaultValueHelpDelegate","name","payload","getTypeUtil","TypeUtil","_getValueListParameter","valueListInfo","propertyName","Parameters","filter","entry","LocalDataProperty","$PropertyPath","_getFilter","valueList","valueHelpProperty","keyValue","valuehelpPayload","valuehelpConditionPayload","bindingContext","filters","parameters","parameter","$Type","ValueListProperty","filterValue","isActionParameterDialog","apdFieldPath","apdField","sap","ui","getCore","byId","getValue","sourcePath","conditionPayload","getObject","Filter","path","operator","value1","getItemForValue","valueHelp","config","getPayload","checkDescription","descriptionPath","valueHelpDescriptionPath","maxLength","valueLength","toString","getDescription","key","_conditionIn","_conditionOut","_ConditionModel","_conditionModelName","control","_type","getDisplay","includes","retrieveTextFromValueList","isFilterField","dataModel","getModel","metaModel","getMetaModel","CommonUtils","getAppComponent","valueHelpQualifier","propertyPath","propertyDescriptionPath","textProperty","requestValueListInfo","keys","valueHelpParameters","Error","valueListModel","$model","textAnnotation","CollectionPath","$Path","listBinding","bindList","$select","contexts","requestContexts","lastIndex","lastIndexOf","sideEffectPath","substring","sideEffectsService","getSideEffectsService","requestSideEffects","Log","warning","error","status","message","String","msg"],"sourceRoot":"field","sources":["FieldBaseDelegate.ts"],"sourcesContent":["import { CommonAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport type {\n\tAnnotationValueListType,\n\tAnnotationValueListTypeByQualifier,\n\tValueHelpPayload\n} from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport type Control from \"sap/ui/core/Control\";\nimport type ConditionModel from \"sap/ui/mdc/condition/ConditionModel\";\nimport type Field from \"sap/ui/mdc/Field\";\nimport type FieldBase from \"sap/ui/mdc/field/FieldBase\";\nimport FieldBaseDelegate from \"sap/ui/mdc/field/FieldBaseDelegate\";\nimport ODataV4TypeMap from \"sap/ui/mdc/odata/v4/TypeMap\";\nimport type ValueHelp from \"sap/ui/mdc/ValueHelp\";\nimport Filter from \"sap/ui/model/Filter\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type SimpleType from \"sap/ui/model/SimpleType\";\nimport type { ConditionPayloadMap, ConditionPayloadType } from \"../valuehelp/ValueHelpDelegate\";\nexport type FieldPayload = {\n\tretrieveTextFromValueList?: boolean;\n\tisFilterField?: boolean;\n};\n\nexport type Value = string | Date | number | boolean | undefined | null;\n\nexport type TypeInitialization = {\n\tbTypeInitialized?: boolean;\n\tmCustomUnits?: string;\n};\n\nexport type Config = {\n\tvalue: Value;\n\tparsedValue: Value;\n\tbindingContext: Context;\n\tcheckKey: boolean;\n\tcheckDescription: boolean;\n\tconditionModel?: ConditionModel;\n\tconditionModelName?: string;\n\tcontrol?: object;\n};\n\nexport default Object.assign({}, FieldBaseDelegate, {\n\tapiVersion: 2,\n\n\tgetTypeMap: function () {\n\t\treturn ODataV4TypeMap;\n\t},\n\t/**\n\t * If the <code>Field</code> control is used, the used data type might come from the binding.\n\t * In V4-unit or currency case it might need to be formatted once.\n\t * To initialize the internal type later on, the currencies must be returned.\n\t *\n\t * @param field The <code>Field</code> instance\n\t * @param type Type from binding\n\t * @param value Given value\n\t * @returns Information needed to initialize internal type (needs to set bTypeInitialized to true if initialized)\n\t */\n\tinitializeTypeFromBinding: function (field: Field, type: SimpleType | undefined, value: Value | Value[]) {\n\t\t// V4 Unit and Currency types have a map with valid units and create an internal customizing for it.\n\t\t// The Field needs to keep this customizing logic when creating the internal type.\n\t\t// (As external RAW binding is used there is no formatting on parsing.)\n\n\t\tconst result: TypeInitialization = {};\n\t\tif (\n\t\t\ttype &&\n\t\t\ttype.isA([\"sap.ui.model.odata.type.Unit\", \"sap.ui.model.odata.type.Currency\"]) &&\n\t\t\tArray.isArray(value) &&\n\t\t\tvalue.length > 2 &&\n\t\t\tvalue[2] !== undefined\n\t\t) {\n\t\t\t// format once to set internal customizing. Allow null as valid values for custom units\n\t\t\ttype.formatValue(value, \"string\");\n\t\t\tresult.bTypeInitialized = true;\n\t\t\tresult.mCustomUnits = value[2] as string; // TODO: find a better way to provide custom units to internal type\n\t\t}\n\n\t\treturn result;\n\t},\n\n\t/**\n\t * This function initializes the unit type.\n\t * If the <code>Field</code> control is used, the used data type might come from the binding.\n\t * If the type is a V4 unit or currency, it might need to be formatted once.\n\t *\n\t * @param field The <code>Field</code> instance\n\t * @param type Type from binding\n\t * @param typeInitialization Information needed to initialize internal type\n\t */\n\tinitializeInternalUnitType: function (field: Field, type: SimpleType, typeInitialization?: TypeInitialization) {\n\t\tif (typeInitialization?.mCustomUnits !== undefined) {\n\t\t\t// if already initialized initialize new type too.\n\t\t\ttype.formatValue([null, null, typeInitialization.mCustomUnits], \"string\");\n\t\t}\n\t},\n\n\t/**\n\t * This function enhances the value with unit or currency information if needed by the data type.\n\t *\n\t * @param field The <code>Field</code> instance\n\t * @param  values Values\n\t * @param  typeInitialization Information needed to initialize internal type\n\t * @returns Values\n\t */\n\tenhanceValueForUnit: function (field: Field, values: Value[], typeInitialization?: TypeInitialization) {\n\t\tif (typeInitialization?.bTypeInitialized === true && values.length === 2) {\n\t\t\tvalues.push(typeInitialization.mCustomUnits);\n\t\t\treturn values;\n\t\t}\n\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * This function returns which <code>ValueHelpDelegate</code> is used\n\t * if a default field help (for example, for defining conditions in </code>FilterField</code>)\n\t * is created.\n\t *\n\t * @param field The <code>Field</code> instance\n\t * @returns Delegate object with name and payload\n\t */\n\tgetDefaultValueHelpDelegate: function (field: Field) {\n\t\treturn { name: \"sap/ui/mdc/odata/v4/ValueHelpDelegate\", payload: {} };\n\t},\n\n\tgetTypeUtil: function (field: Field) {\n\t\treturn TypeUtil;\n\t},\n\n\t/**\n\t * Determine all parameters in a value help that use a specific property.\n\t *\n\t * @param valueListInfo Value list info\n\t * @param propertyName Name of the property\n\t * @returns List of all found parameters\n\t */\n\t_getValueListParameter: function (valueListInfo: AnnotationValueListType, propertyName: string) {\n\t\t//determine path to value list property\n\t\treturn valueListInfo.Parameters.filter(function (entry) {\n\t\t\tif (entry.LocalDataProperty) {\n\t\t\t\treturn entry.LocalDataProperty.$PropertyPath === propertyName;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Build filters for each relevant parameter.\n\t *\n\t * @param valueList Value list info\n\t * @param propertyName Name of the property\n\t * @param valueHelpProperty Name of the value help property\n\t * @param keyValue Value of the property\n\t * @param valuehelpPayload Payload of the value help\n\t * @param valuehelpConditionPayload Additional condition information for this key\n\t * @param bindingContext BindingContext of the field\n\t * @returns List of filters\n\t */\n\t_getFilter: function (\n\t\tvalueList: AnnotationValueListType,\n\t\tpropertyName: string,\n\t\tvalueHelpProperty: string,\n\t\tkeyValue: string,\n\t\tvaluehelpPayload: ValueHelpPayload,\n\t\tvaluehelpConditionPayload: ConditionPayloadType[] | undefined,\n\t\tbindingContext?: Context\n\t) {\n\t\tconst filters = [];\n\t\tconst parameters = valueList.Parameters.filter(function (parameter) {\n\t\t\treturn (\n\t\t\t\tparameter.$Type === CommonAnnotationTypes.ValueListParameterIn ||\n\t\t\t\tparameter.$Type === CommonAnnotationTypes.ValueListParameterInOut ||\n\t\t\t\t(parameter.LocalDataProperty?.$PropertyPath === propertyName && parameter.ValueListProperty === valueHelpProperty)\n\t\t\t);\n\t\t});\n\t\tfor (const parameter of parameters) {\n\t\t\tlet filterValue;\n\t\t\tif (parameter.LocalDataProperty?.$PropertyPath === propertyName) {\n\t\t\t\tfilterValue = keyValue;\n\t\t\t} else if (valuehelpPayload?.isActionParameterDialog === true) {\n\t\t\t\tconst apdFieldPath = `APD_::${parameter.LocalDataProperty?.$PropertyPath}`;\n\t\t\t\tconst apdField = sap.ui.getCore().byId(apdFieldPath) as Field;\n\t\t\t\tfilterValue = apdField?.getValue();\n\t\t\t} else if (valuehelpConditionPayload !== undefined) {\n\t\t\t\tconst sourcePath = parameter.LocalDataProperty?.$PropertyPath;\n\t\t\t\tconst conditionPayload = valuehelpConditionPayload?.[0];\n\t\t\t\tfilterValue = sourcePath && conditionPayload?.[sourcePath];\n\t\t\t} else if (bindingContext !== undefined) {\n\t\t\t\t// if the value help is not used try getting the filter value from the binding context\n\t\t\t\tconst sourcePath = parameter.LocalDataProperty?.$PropertyPath;\n\t\t\t\tfilterValue = bindingContext.getObject(sourcePath);\n\t\t\t}\n\t\t\t/* Add value to the filter for the text determination */\n\t\t\tif (filterValue !== null && filterValue !== undefined) {\n\t\t\t\tfilters.push(new Filter({ path: parameter.ValueListProperty, operator: \"EQ\", value1: filterValue }));\n\t\t\t}\n\t\t}\n\t\treturn filters;\n\t},\n\n\t/**\n\t * Determines the key, description, and payload of a user input.\n\t *\n\t * @param field The <code>Field</code> instance\n\t * @param valueHelp Value help instance\n\t * @param config Configuration Object\n\t * @returns Object containing description, key, and payload. If it is not available right now (must be requested), a <code>Promise</code> is returned\n\t */\n\tgetItemForValue: function (field: Field, valueHelp: ValueHelp, config: Config) {\n\t\t//BCP: 2270162887 . The MDC field should not try to get the item when the field is emptied\n\t\t// JIRA: FIORITECHP1-25361 - Improve the type-ahead behavior for missinng text annotation or constraints violations of the existing text annotation\n\t\tif (config.value === \"\") {\n\t\t\treturn;\n\t\t}\n\n\t\tconst payload = field.getPayload() as FieldPayload;\n\t\tif (config.checkDescription) {\n\t\t\tconst valuehelpPayload = valueHelp.getPayload() as ValueHelpPayload;\n\t\t\tconst descriptionPath = valuehelpPayload.valueHelpDescriptionPath;\n\t\t\tconst maxLength = valuehelpPayload?.maxLength;\n\t\t\tconst valueLength = config.value !== null && config.value !== undefined ? config.value.toString().length : 0;\n\t\t\tif (descriptionPath === \"\") {\n\t\t\t\t// In case the property value help collection has no text annotation (descriptionPath is empty) the description check shouldn´t occur.\n\t\t\t\t// In such a case the method getDescription will be called by MDC and within this method a SideEffect is requested to retrieve the text from the text property of the main entity\n\t\t\t\tconfig.checkDescription = false;\n\t\t\t} else if (maxLength !== undefined && valueLength > maxLength) {\n\t\t\t\t//value length is > text proeperty length constraint\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\treturn FieldBaseDelegate.getItemForValue(field, valueHelp, config);\n\t},\n\n\t/**\n\t * Determines the description for a given key.\n\t *\n\t * @param field The <code>Field</code> instance\n\t * @param valueHelp Field help assigned to the <code>Field</code> or <code>FilterField</code> control\n\t * @param key Key value of the description\n\t * @param _conditionIn In parameters for the key (no longer supported)\n\t * @param _conditionOut Out parameters for the key (no longer supported)\n\t * @param bindingContext BindingContext <code>BindingContext</code> of the checked field. Inside a table, the <code>FieldHelp</code> element can be connected to a different row\n\t * @param _ConditionModel ConditionModel</code>, if bound to one\n\t * @param _conditionModelName Name of the <code>ConditionModel</code>, if bound to one\n\t * @param conditionPayload Additional context information for this key\n\t * @param control Instance of the calling control\n\t * @param _type Type of the value\n\t * @returns Description for the key or object containing a description, key and payload. If the description is not available right away (it must be requested), a <code>Promise</code> is returned\n\t */\n\tgetDescription: async function (\n\t\tfield: Field | null,\n\t\tvalueHelp: ValueHelp,\n\t\tkey: string,\n\t\t_conditionIn: object,\n\t\t_conditionOut: object,\n\t\tbindingContext: Context | undefined,\n\t\t_ConditionModel: ConditionModel,\n\t\t_conditionModelName: string,\n\t\tconditionPayload: ConditionPayloadMap,\n\t\tcontrol: Control,\n\t\t_type: unknown\n\t) {\n\t\t//JIRA: FIORITECHP1-22022 . The MDC field should not  tries to determine description with the initial GET of the data.\n\t\t// it should rely on the data we already received from the backend\n\t\t// But The getDescription function is also called in the FilterField case if a variant is loaded.\n\t\t// As the description text could be language dependent it is not stored in the variant, so it needs to be read on rendering.\n\n\t\tlet payload = field?.getPayload() as FieldPayload;\n\n\t\t/* Retrieve text from value help, if value was set by out-parameter (BCP 2270160633) */\n\t\tif (!payload && (control as FieldBase)?.getDisplay().includes(\"Description\")) {\n\t\t\tpayload = {\n\t\t\t\tretrieveTextFromValueList: true\n\t\t\t};\n\t\t}\n\n\t\tif (payload?.retrieveTextFromValueList === true || payload?.isFilterField === true) {\n\t\t\tconst dataModel = valueHelp.getModel() as ODataModel | undefined;\n\t\t\tconst metaModel = dataModel\n\t\t\t\t? dataModel.getMetaModel()\n\t\t\t\t: (CommonUtils.getAppComponent(valueHelp as unknown as Control)\n\t\t\t\t\t\t.getModel()\n\t\t\t\t\t\t.getMetaModel() as ODataMetaModel);\n\t\t\tconst valuehelpPayload = valueHelp.getPayload() as ValueHelpPayload;\n\t\t\tconst valuehelpConditionPayload = conditionPayload?.[valuehelpPayload.valueHelpQualifier];\n\t\t\tconst propertyPath = valuehelpPayload.propertyPath;\n\t\t\tconst propertyDescriptionPath = valuehelpPayload?.propertyDescriptionPath;\n\t\t\tlet textProperty: string;\n\n\t\t\ttry {\n\t\t\t\t/* Request value help metadata */\n\t\t\t\tconst valueListInfo = (await metaModel.requestValueListInfo(\n\t\t\t\t\tpropertyPath,\n\t\t\t\t\ttrue,\n\t\t\t\t\tbindingContext\n\t\t\t\t)) as AnnotationValueListTypeByQualifier;\n\n\t\t\t\tconst propertyName = metaModel.getObject(`${propertyPath}@sapui.name`) as string;\n\t\t\t\t// take the first value list annotation - alternatively take the one without qualifier or the first one\n\t\t\t\tconst valueList = valueListInfo[Object.keys(valueListInfo)[0]];\n\t\t\t\tconst valueHelpParameters = this._getValueListParameter(valueList, propertyName);\n\t\t\t\tconst valueHelpProperty = valueHelpParameters?.[0]?.ValueListProperty;\n\t\t\t\tif (!valueHelpProperty) {\n\t\t\t\t\tthrow Error(`Inconsistent value help annotation for ${propertyName}`);\n\t\t\t\t}\n\t\t\t\t// get text annotation for this value list property\n\t\t\t\tconst valueListModel = valueList.$model;\n\t\t\t\tconst textAnnotation = valueListModel\n\t\t\t\t\t.getMetaModel()\n\t\t\t\t\t.getObject(`/${valueList.CollectionPath}/${valueHelpProperty}@com.sap.vocabularies.Common.v1.Text`);\n\t\t\t\tif (textAnnotation && textAnnotation.$Path) {\n\t\t\t\t\ttextProperty = textAnnotation.$Path;\n\t\t\t\t\t/* Build the filter for the relevant parameters */\n\t\t\t\t\tconst filters = this._getFilter(\n\t\t\t\t\t\tvalueList,\n\t\t\t\t\t\tpropertyName,\n\t\t\t\t\t\tvalueHelpProperty,\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tvaluehelpPayload,\n\t\t\t\t\t\tvaluehelpConditionPayload,\n\t\t\t\t\t\tbindingContext\n\t\t\t\t\t);\n\t\t\t\t\tconst listBinding = valueListModel.bindList(`/${valueList.CollectionPath}`, undefined, undefined, filters, {\n\t\t\t\t\t\t$select: textProperty\n\t\t\t\t\t});\n\t\t\t\t\t/* Request description for given key from value list entity */\n\t\t\t\t\tconst contexts = await listBinding.requestContexts(0, 2);\n\t\t\t\t\treturn contexts.length ? contexts[0].getObject(textProperty) : undefined;\n\t\t\t\t} else if (bindingContext !== undefined && propertyDescriptionPath) {\n\t\t\t\t\tconst lastIndex = propertyDescriptionPath.lastIndexOf(\"/\");\n\t\t\t\t\tconst sideEffectPath = lastIndex > 0 ? propertyDescriptionPath.substring(0, lastIndex) : propertyDescriptionPath;\n\t\t\t\t\tconst sideEffectsService = CommonUtils.getAppComponent(valueHelp as unknown as Control).getSideEffectsService();\n\t\t\t\t\tawait sideEffectsService.requestSideEffects([sideEffectPath], bindingContext);\n\t\t\t\t\tLog.warning(\n\t\t\t\t\t\t`RequestSideEffects is triggered because the text annotation for ${valueHelpProperty} is not defined at the CollectionPath of the value help`\n\t\t\t\t\t);\n\t\t\t\t\treturn undefined;\n\t\t\t\t} else {\n\t\t\t\t\tLog.error(`Text Annotation for ${valueHelpProperty} is not defined`);\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconst status = error ? (error as XMLHttpRequest).status : undefined;\n\t\t\t\tconst message = error instanceof Error ? error.message : String(error);\n\t\t\t\tconst msg = status === 404 ? `Metadata not found (${status}) for value help of property ${propertyPath}` : message;\n\t\t\t\tLog.error(msg);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n});\n"],"mappings":"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"}},{"offset":{"line":6805,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","TypeUtil","FieldBaseDelegate","ODataV4TypeMap","Filter","Object","assign","apiVersion","getTypeMap","initializeTypeFromBinding","field","type","value","result","isA","Array","isArray","length","undefined","formatValue","bTypeInitialized","mCustomUnits","initializeInternalUnitType","typeInitialization","enhanceValueForUnit","values","push","getDefaultValueHelpDelegate","name","payload","getTypeUtil","_getValueListParameter","valueListInfo","propertyName","Parameters","filter","entry","LocalDataProperty","$PropertyPath","_getFilter","valueList","valueHelpProperty","keyValue","valuehelpPayload","valuehelpConditionPayload","bindingContext","filters","parameters","parameter","_parameter$LocalDataP","$Type","ValueListProperty","_parameter$LocalDataP2","filterValue","isActionParameterDialog","_parameter$LocalDataP3","apdFieldPath","apdField","getCore","byId","getValue","_parameter$LocalDataP4","sourcePath","conditionPayload","_parameter$LocalDataP5","getObject","path","operator","value1","getItemForValue","valueHelp","config","getPayload","checkDescription","descriptionPath","valueHelpDescriptionPath","maxLength","valueLength","toString","getDescription","async","key","_conditionIn","_conditionOut","_ConditionModel","_conditionModelName","control","_type","_payload","_payload2","getDisplay","includes","retrieveTextFromValueList","isFilterField","dataModel","getModel","metaModel","getMetaModel","getAppComponent","valueHelpQualifier","propertyPath","propertyDescriptionPath","textProperty","_valueHelpParameters$","requestValueListInfo","keys","valueHelpParameters","this","Error","valueListModel","$model","textAnnotation","CollectionPath","$Path","listBinding","bindList","$select","contexts","requestContexts","lastIndex","lastIndexOf","sideEffectPath","substring","sideEffectsService","getSideEffectsService","requestSideEffects","warning","error","status","message","String","msg"],"sources":["FieldBaseDelegate-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":6810,"column":0},"map":{"version":3,"names":["ISOCurrency","Unit","FieldHelper","isNotAlwaysHidden","oDataField","oDetails","oContext","context","isAlwaysHidden","Value","$Path","getObject","isRequired","oFieldControl","sEditMode","ManagedObject","bindingParser","getActionParameterVisibility","oParam","$If","length","oNegParam","AnnotationHelper","value","undefined","propertyName","vProperty","oInterface","sPropertyName","getPath","indexOf","$PropertyPath","sPath","sContextPath","fieldControl","sPropertyPath","oModel","getModel","oFieldControlContext","createBindingContext","getProperty","hasOwnProperty","$EnumMember","valueHelpProperty","oPropertyContext","bInFilterField","oContent","sAnnoPath","oPropertyAnnotations","sAnnotation","sUnitOrCurrencyPath","valueHelpPropertyForFilterField","getIDForFieldValueHelp","sFlexId","sIdPrefix","sOriginalPropertyName","sProperty","generate","getFieldHelpPropertyForFilterField","propertyContext","oProperty","sPropertyType","sVhIdPrefix","sValueHelpPropertyName","bHasValueListWithFixedValues","bUseSemanticDateRange","bSemanticDateRange","sPropertyLocationPath","CommonHelper","getLocationForPropertyPath","oFilterRestrictions","CommonUtils","getFilterRestrictionsByPath","FilterAllowedExpressions","computeFieldBaseDelegate","delegateName","retrieveTextFromValueList","JSON","stringify","name","payload","_getPrimaryIntents","aSemanticObjectsList","aPromises","oUshellContainer","sap","ushell","Container","oService","getService","forEach","semObject","push","getPrimaryIntent","Promise","all","then","aSemObjectPrimaryAction","catch","oError","Log","error","_checkIfSemanticObjectsHasPrimaryAction","oSemantics","aSemanticObjectsPrimaryActions","appComponent","_fnIsSemanticObjectActionUnavailable","_oSemantics","_oPrimaryAction","_index","unavailableActionsIndex","semanticObjectUnavailableActions","actions","intent","split","semanticPrimaryActions","oPrimaryAction","semanticObjects","mainSemanticObject","sCurrentHash","getShellServices","getHash","index","semanticObject","checkPrimaryActions","bGetTitleLink","titleLink","hasTitleLink","_getTitleLinkWithParameters","_oSemanticObjectModel","_linkIntent","titlelink","getPrimaryAction","primaryIntentAction","operators","sSettings","contextPath","propertyType","$Type","getOperatorsForGuidProperty","slice","isTableBoundToNavigation","lastIndexOf","isNavigationPath","navigationPath","substr","propertyPath","getOperatorsForProperty","ModelHelper","getEntitySetPath","toString","getOperatorsForDateProperty","getDataFieldDefault","oDataFieldContext","oDataFieldDefault","isDataFieldActionButtonVisible","oThis","bIsBound","oActionContext","getPressEventForDataFieldActionButton","sInvocationGrouping","InvocationGrouping","bIsNavigable","navigateAfterAction","entities","entitySet","entitySetName","oParams","contexts","invocationGrouping","addSingleQuotes","model","label","Label","isNavigable","generateFunction","Action","objectToString","isNumericDataType","sDataFieldType","_sDataFieldType","aNumericDataTypes","isDateOrTimeDataType","aDateTimeDataTypes","isDateTimeDataType","aDateDataTypes","isDateDataType","isTimeDataType","getDataTypeForVisualization","oAnnotations","sType","sTextAnnotation","sTextArrangementAnnotation","getColumnAlignment","oTable","sEntityPath","collection","Inline","IconUrl","aSemanticKeys","bIsSemanticKey","every","oKey","getDataFieldAlignment","getPropertyAlignment","oFormatOptions","oComputedEditMode","sDefaultAlignment","sTextAlignment","textAlignMode","getAlignmentExpression","sDataFieldPath","Target","$AnnotationPath","oFieldGroup","i","Data","getTypeAlignment","getInterface","$target","fullyQualifiedName","isDataFieldActionButtonEnabled","sActionContextFormat","computeLabelText","endsWith","sDataFieldLabel","sDataFieldTargetTitle","sDataFieldTargetLabel","sDataFieldValueLabel","sDataFieldTargetValueLabel","buildExpressionForAlignItems","sVisualization","fieldVisualizationBindingExpression","constant","progressVisualizationBindingExpression","ratingVisualizationBindingExpression","compileExpression","ifElse","or","equal","UI","IsEditable","hasValueHelpAnnotation","getAPDialogDisplayFormat","oAnnotation","$Name","oActionParameterAnnotations","oValueHelpAnnotation","getValueListPropertyName","oValueList","oValueListParameter","Parameters","find","oParameter","LocalDataProperty","ValueListProperty","sValueListPropertyName","computeDisplayMode","CollectionPath","requestValueListInfo","oValueListInfo","$model","getMetaModel","getActionParameterDialogFieldHelp","oActionParameter","sSapUIName","sParamName","getValueHelpDelegate","isBound","entityTypePath","sapUIName","paramName","delegateConfiguration","ValueListHelper","getPropertyPath","UnboundAction","EntityTypePath","Property","qualifiers","valueHelpQualifier","isActionParameterDialog","getValueHelpDelegateForNonComputedVisibleKeyField","_getEntitySetFromMultiLevel","sSourceEntity","iStart","iDiff","aNavParts","filter","Boolean","sPart","getBindingInfoForTextArrangement","oDataFieldTextArrangement","getPathForIconSource","getFilenameExpr","sFilename","sNoFilenameText","calculateMBfromByte","iByte","toFixed","getDownloadUrl","getMarginClass","compactSemanticKey","getRequired","immutableKey","target","requiredProperties","targetRequiredExpression","isRequiredExpression","targetObject","isFieldPartOfForm","dataFieldCollection","dataFieldObjectPath","connectedDataFieldKey","KeyHelper","generateKeyFromDataField","isFieldFound","field","key","requiresIContext"],"sourceRoot":"field","sources":["FieldHelper.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { FormElement } from \"sap/fe/core/converters/controls/Common/Form\";\nimport { UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport { KeyHelper } from \"sap/fe/core/converters/helpers/Key\";\nimport type { BindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { compileExpression, constant, equal, ifElse, or } from \"sap/fe/core/helpers/BindingToolkit\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isRequiredExpression } from \"sap/fe/core/templating/FieldControlHelper\";\nimport { getAlignmentExpression } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type { ValueHelpPayload } from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport ValueListHelper from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type BaseContext from \"sap/ui/model/Context\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nconst ISOCurrency = \"@Org.OData.Measures.V1.ISOCurrency\",\n\tUnit = \"@Org.OData.Measures.V1.Unit\";\n\nconst FieldHelper = {\n\tisNotAlwaysHidden: function (oDataField: any, oDetails: any) {\n\t\t// this is used in HeaderDataPointTitle.fragment\n\t\tconst oContext = oDetails.context;\n\t\tlet isAlwaysHidden: any = false;\n\t\tif (oDataField.Value && oDataField.Value.$Path) {\n\t\t\tisAlwaysHidden = oContext.getObject(\"Value/$Path@com.sap.vocabularies.UI.v1.Hidden\");\n\t\t}\n\t\tif (!isAlwaysHidden || isAlwaysHidden.$Path) {\n\t\t\tisAlwaysHidden = oContext.getObject(\"@com.sap.vocabularies.UI.v1.Hidden\");\n\t\t\tif (!isAlwaysHidden || isAlwaysHidden.$Path) {\n\t\t\t\tisAlwaysHidden = false;\n\t\t\t}\n\t\t}\n\t\treturn !isAlwaysHidden;\n\t},\n\tisRequired: function (oFieldControl: any, sEditMode: any) {\n\t\t// this is used in actionParameterDialog.fragment\n\t\tif (sEditMode === \"Display\" || sEditMode === \"ReadOnly\" || sEditMode === \"Disabled\") {\n\t\t\treturn false;\n\t\t}\n\t\tif (oFieldControl) {\n\t\t\tif ((ManagedObject as any).bindingParser(oFieldControl)) {\n\t\t\t\treturn \"{= %\" + oFieldControl + \" === 7}\";\n\t\t\t} else {\n\t\t\t\treturn oFieldControl == \"com.sap.vocabularies.Common.v1.FieldControlType/Mandatory\";\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tgetActionParameterVisibility: function (oParam: any, oContext: any) {\n\t\t// To use the UI.Hidden annotation for controlling visibility the value needs to be negated\n\t\tif (typeof oParam === \"object\") {\n\t\t\tif (oParam && oParam.$If && oParam.$If.length === 3) {\n\t\t\t\t// In case the UI.Hidden contains a dynamic expression we do this\n\t\t\t\t// by just switching the \"then\" and \"else\" part of the erpression\n\t\t\t\t// oParam.$If[0] <== Condition part\n\t\t\t\t// oParam.$If[1] <== Then part\n\t\t\t\t// oParam.$If[2] <== Else part\n\t\t\t\tconst oNegParam: any = { $If: [] };\n\t\t\t\toNegParam.$If[0] = oParam.$If[0];\n\t\t\t\toNegParam.$If[1] = oParam.$If[2];\n\t\t\t\toNegParam.$If[2] = oParam.$If[1];\n\t\t\t\treturn AnnotationHelper.value(oNegParam, oContext);\n\t\t\t} else {\n\t\t\t\treturn \"{= !%{\" + oParam.$Path + \"} }\";\n\t\t\t}\n\t\t} else if (typeof oParam === \"boolean\") {\n\t\t\treturn AnnotationHelper.value(!oParam, oContext);\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\t/**\n\t * Computed annotation that returns vProperty for a string and @sapui.name for an object.\n\t *\n\t * @param vProperty The property\n\t * @param oInterface The interface instance\n\t * @returns The property name\n\t */\n\tpropertyName: function (vProperty: any, oInterface: any) {\n\t\tlet sPropertyName;\n\t\tif (typeof vProperty === \"string\") {\n\t\t\tif (oInterface.context.getPath().indexOf(\"$Path\") > -1 || oInterface.context.getPath().indexOf(\"$PropertyPath\") > -1) {\n\t\t\t\t// We could end up with a pure string property (no $Path), and this is not a real property in that case\n\t\t\t\tsPropertyName = vProperty;\n\t\t\t}\n\t\t} else if (vProperty.$Path || vProperty.$PropertyPath) {\n\t\t\tconst sPath = vProperty.$Path ? \"/$Path\" : \"/$PropertyPath\";\n\t\t\tconst sContextPath = oInterface.context.getPath();\n\t\t\tsPropertyName = oInterface.context.getObject(`${sContextPath + sPath}/$@sapui.name`);\n\t\t} else if (vProperty.Value && vProperty.Value.$Path) {\n\t\t\tsPropertyName = vProperty.Value.$Path;\n\t\t} else {\n\t\t\tsPropertyName = oInterface.context.getObject(\"@sapui.name\");\n\t\t}\n\n\t\treturn sPropertyName;\n\t},\n\n\tfieldControl: function (sPropertyPath: any, oInterface: any) {\n\t\t// actionParameter dialog and editable header facet\n\t\tconst oModel = oInterface && oInterface.context.getModel();\n\t\tconst sPath = oInterface && oInterface.context.getPath();\n\t\tconst oFieldControlContext = oModel && oModel.createBindingContext(`${sPath}@com.sap.vocabularies.Common.v1.FieldControl`);\n\t\tconst oFieldControl = oFieldControlContext && oFieldControlContext.getProperty();\n\t\tif (oFieldControl) {\n\t\t\tif (oFieldControl.hasOwnProperty(\"$EnumMember\")) {\n\t\t\t\treturn oFieldControl.$EnumMember;\n\t\t\t} else if (oFieldControl.hasOwnProperty(\"$Path\")) {\n\t\t\t\treturn AnnotationHelper.value(oFieldControl, { context: oFieldControlContext });\n\t\t\t}\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\t/**\n\t * Method to get the value help property from a DataField or a PropertyPath (in case a SelectionField is used)\n\t * Priority from where to get the property value of the field (examples are \"Name\" and \"Supplier\"):\n\t * 1. If oPropertyContext.getObject() has key '$Path', then we take the value at '$Path'.\n\t * 2. Else, value at oPropertyContext.getObject().\n\t * If there is an ISOCurrency or if there are Unit annotations for the field property,\n\t * then the Path at the ISOCurrency or Unit annotations of the field property is considered.\n\t *\n\t * @memberof sap.fe.macros.field.FieldHelper.js\n\t * @param oPropertyContext The context from which value help property need to be extracted.\n\t * @param bInFilterField Whether or not we're in the filter field and should ignore\n\t * @returns The value help property path\n\t */\n\tvalueHelpProperty: function (oPropertyContext: BaseContext, bInFilterField?: boolean) {\n\t\t/* For currency (and later Unit) we need to forward the value help to the annotated field */\n\t\tconst sContextPath = oPropertyContext.getPath();\n\t\tconst oContent = oPropertyContext.getObject() || {};\n\t\tlet sPath = oContent.$Path ? `${sContextPath}/$Path` : sContextPath;\n\t\tconst sAnnoPath = `${sPath}@`;\n\t\tconst oPropertyAnnotations = oPropertyContext.getObject(sAnnoPath);\n\t\tlet sAnnotation;\n\t\tif (oPropertyAnnotations) {\n\t\t\tsAnnotation =\n\t\t\t\t(oPropertyAnnotations.hasOwnProperty(ISOCurrency) && ISOCurrency) || (oPropertyAnnotations.hasOwnProperty(Unit) && Unit);\n\t\t\tif (sAnnotation && !bInFilterField) {\n\t\t\t\tconst sUnitOrCurrencyPath = `${sPath + sAnnotation}/$Path`;\n\t\t\t\t// we check that the currency or unit is a Property and not a fixed value\n\t\t\t\tif (oPropertyContext.getObject(sUnitOrCurrencyPath)) {\n\t\t\t\t\tsPath = sUnitOrCurrencyPath;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn sPath;\n\t},\n\n\t/**\n\t * Dedicated method to avoid looking for unit properties.\n\t *\n\t * @param oPropertyContext\n\t * @returns The value help property path\n\t */\n\tvalueHelpPropertyForFilterField: function (oPropertyContext: any) {\n\t\treturn FieldHelper.valueHelpProperty(oPropertyContext, true);\n\t},\n\n\t/**\n\t * Method to generate the ID for Value Help.\n\t *\n\t * @function\n\t * @name getIDForFieldValueHelp\n\t * @memberof sap.fe.macros.field.FieldHelper.js\n\t * @param sFlexId Flex ID of the current object\n\t * @param sIdPrefix Prefix for the ValueHelp ID\n\t * @param sOriginalPropertyName Name of the property\n\t * @param sPropertyName Name of the ValueHelp Property\n\t * @returns The ID generated for the ValueHelp\n\t */\n\tgetIDForFieldValueHelp: function (sFlexId: string | null, sIdPrefix: string, sOriginalPropertyName: string, sPropertyName: string) {\n\t\tif (sFlexId) {\n\t\t\treturn sFlexId;\n\t\t}\n\t\tlet sProperty = sPropertyName;\n\t\tif (sOriginalPropertyName !== sPropertyName) {\n\t\t\tsProperty = `${sOriginalPropertyName}::${sPropertyName}`;\n\t\t}\n\t\treturn generate([sIdPrefix, sProperty]);\n\t},\n\n\t/**\n\t * Method to get the fieldHelp property of the FilterField.\n\t *\n\t * @function\n\t * @name getFieldHelpPropertyForFilterField\n\t * @memberof sap.fe.macros.field.FieldHelper.js\n\t * @param propertyContext Property context for filter field\n\t * @param oProperty The object of the FieldHelp property\n\t * @param sPropertyType The $Type of the property\n\t * @param sVhIdPrefix The ID prefix of the value help\n\t * @param sPropertyName The name of the property\n\t * @param sValueHelpPropertyName The property name of the value help\n\t * @param bHasValueListWithFixedValues `true` if there is a value list with a fixed value annotation\n\t * @param bUseSemanticDateRange `true` if the semantic date range is set to 'true' in the manifest\n\t * @returns The field help property of the value help\n\t */\n\tgetFieldHelpPropertyForFilterField: function (\n\t\tpropertyContext: BaseContext,\n\t\toProperty: any,\n\t\tsPropertyType: string,\n\t\tsVhIdPrefix: string,\n\t\tsPropertyName: string,\n\t\tsValueHelpPropertyName: string,\n\t\tbHasValueListWithFixedValues: boolean,\n\t\tbUseSemanticDateRange: boolean | string\n\t) {\n\t\tconst sProperty = FieldHelper.propertyName(oProperty, { context: propertyContext }),\n\t\t\tbSemanticDateRange = bUseSemanticDateRange === \"true\" || bUseSemanticDateRange === true;\n\t\tconst oModel = propertyContext.getModel() as ODataMetaModel,\n\t\t\tsPropertyPath = propertyContext.getPath(),\n\t\t\tsPropertyLocationPath = CommonHelper.getLocationForPropertyPath(oModel, sPropertyPath),\n\t\t\toFilterRestrictions = CommonUtils.getFilterRestrictionsByPath(sPropertyLocationPath, oModel);\n\t\tif (\n\t\t\t((sPropertyType === \"Edm.DateTimeOffset\" || sPropertyType === \"Edm.Date\") &&\n\t\t\t\tbSemanticDateRange &&\n\t\t\t\toFilterRestrictions &&\n\t\t\t\toFilterRestrictions.FilterAllowedExpressions &&\n\t\t\t\toFilterRestrictions.FilterAllowedExpressions[sProperty] &&\n\t\t\t\t(oFilterRestrictions.FilterAllowedExpressions[sProperty].indexOf(\"SingleRange\") !== -1 ||\n\t\t\t\t\toFilterRestrictions.FilterAllowedExpressions[sProperty].indexOf(\"SingleValue\") !== -1)) ||\n\t\t\t(sPropertyType === \"Edm.Boolean\" && !bHasValueListWithFixedValues)\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn FieldHelper.getIDForFieldValueHelp(null, sVhIdPrefix || \"FilterFieldValueHelp\", sPropertyName, sValueHelpPropertyName);\n\t},\n\n\t/*\n\t * Method to compute the delegate with payload\n\t * @function\n\t * @param {object} delegateName - name of the delegate methode\n\t * @param {boolean} retrieveTextFromValueList - added to the payload of the delegate methode\n\t * @return {object} - returns the delegate with payload\n\t */\n\tcomputeFieldBaseDelegate: function (delegateName: string, retrieveTextFromValueList: boolean) {\n\t\tif (retrieveTextFromValueList) {\n\t\t\treturn JSON.stringify({\n\t\t\t\tname: delegateName,\n\t\t\t\tpayload: {\n\t\t\t\t\tretrieveTextFromValueList: retrieveTextFromValueList\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn `{name: '${delegateName}'}`;\n\t},\n\t_getPrimaryIntents: function (aSemanticObjectsList: any[]): Promise<any[]> {\n\t\tconst aPromises: any[] = [];\n\t\tif (aSemanticObjectsList) {\n\t\t\tconst oUshellContainer = sap.ushell && sap.ushell.Container;\n\t\t\tconst oService = oUshellContainer && oUshellContainer.getService(\"CrossApplicationNavigation\");\n\t\t\taSemanticObjectsList.forEach(function (semObject) {\n\t\t\t\tif (typeof semObject === \"string\") {\n\t\t\t\t\taPromises.push(oService.getPrimaryIntent(semObject, {}));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn Promise.all(aPromises)\n\t\t\t.then(function (aSemObjectPrimaryAction) {\n\t\t\t\treturn aSemObjectPrimaryAction;\n\t\t\t})\n\t\t\t.catch(function (oError) {\n\t\t\t\tLog.error(\"Error fetching primary intents\", oError);\n\t\t\t\treturn [];\n\t\t\t});\n\t},\n\t_checkIfSemanticObjectsHasPrimaryAction: function (\n\t\toSemantics: any,\n\t\taSemanticObjectsPrimaryActions: any,\n\t\tappComponent: AppComponent\n\t): boolean {\n\t\tconst _fnIsSemanticObjectActionUnavailable = function (_oSemantics: any, _oPrimaryAction: any, _index: string) {\n\t\t\tfor (const unavailableActionsIndex in _oSemantics.semanticObjectUnavailableActions[_index].actions) {\n\t\t\t\tif (\n\t\t\t\t\t_oPrimaryAction.intent\n\t\t\t\t\t\t.split(\"-\")[1]\n\t\t\t\t\t\t.indexOf(_oSemantics.semanticObjectUnavailableActions[_index].actions[unavailableActionsIndex]) === 0\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\t\toSemantics.semanticPrimaryActions = aSemanticObjectsPrimaryActions;\n\t\tconst oPrimaryAction =\n\t\t\toSemantics.semanticObjects &&\n\t\t\toSemantics.mainSemanticObject &&\n\t\t\toSemantics.semanticPrimaryActions[oSemantics.semanticObjects.indexOf(oSemantics.mainSemanticObject)];\n\t\tconst sCurrentHash = appComponent.getShellServices().getHash();\n\t\tif (oSemantics.mainSemanticObject && oPrimaryAction !== null && oPrimaryAction.intent !== sCurrentHash) {\n\t\t\tfor (const index in oSemantics.semanticObjectUnavailableActions) {\n\t\t\t\tif (oSemantics.mainSemanticObject.indexOf(oSemantics.semanticObjectUnavailableActions[index].semanticObject) === 0) {\n\t\t\t\t\treturn _fnIsSemanticObjectActionUnavailable(oSemantics, oPrimaryAction, index);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tcheckPrimaryActions: function (oSemantics: any, bGetTitleLink: boolean, appComponent: AppComponent) {\n\t\treturn this._getPrimaryIntents(oSemantics && oSemantics.semanticObjects)\n\t\t\t.then((aSemanticObjectsPrimaryActions: any[]) => {\n\t\t\t\treturn bGetTitleLink\n\t\t\t\t\t? {\n\t\t\t\t\t\t\ttitleLink: aSemanticObjectsPrimaryActions,\n\t\t\t\t\t\t\thasTitleLink: this._checkIfSemanticObjectsHasPrimaryAction(\n\t\t\t\t\t\t\t\toSemantics,\n\t\t\t\t\t\t\t\taSemanticObjectsPrimaryActions,\n\t\t\t\t\t\t\t\tappComponent\n\t\t\t\t\t\t\t)\n\t\t\t\t\t  }\n\t\t\t\t\t: this._checkIfSemanticObjectsHasPrimaryAction(oSemantics, aSemanticObjectsPrimaryActions, appComponent);\n\t\t\t})\n\t\t\t.catch(function (oError) {\n\t\t\t\tLog.error(\"Error in checkPrimaryActions\", oError);\n\t\t\t});\n\t},\n\t_getTitleLinkWithParameters: function (_oSemanticObjectModel: any, _linkIntent: string) {\n\t\tif (_oSemanticObjectModel && _oSemanticObjectModel.titlelink) {\n\t\t\treturn _oSemanticObjectModel.titlelink;\n\t\t} else {\n\t\t\treturn _linkIntent;\n\t\t}\n\t},\n\n\tgetPrimaryAction: function (oSemantics: any) {\n\t\treturn oSemantics.semanticPrimaryActions[oSemantics.semanticObjects.indexOf(oSemantics.mainSemanticObject)].intent\n\t\t\t? FieldHelper._getTitleLinkWithParameters(\n\t\t\t\t\toSemantics,\n\t\t\t\t\toSemantics.semanticPrimaryActions[oSemantics.semanticObjects.indexOf(oSemantics.mainSemanticObject)].intent\n\t\t\t  )\n\t\t\t: oSemantics.primaryIntentAction;\n\t},\n\t/**\n\t * Method to fetch the filter restrictions. Filter restrictions can be annotated on an entity set or a navigation property.\n\t * Depending on the path to which the control is bound, we check for filter restrictions on the context path of the control,\n\t * or on the navigation property (if there is a navigation).\n\t * Eg. If the table is bound to '/EntitySet', for property path '/EntitySet/_Association/PropertyName', the filter restrictions\n\t * on '/EntitySet' win over filter restrictions on '/EntitySet/_Association'.\n\t * If the table is bound to '/EntitySet/_Association', the filter restrictions on '/EntitySet/_Association' win over filter\n\t * retrictions on '/AssociationEntitySet'.\n\t *\n\t * @param oContext Property Context\n\t * @param oProperty Property object in the metadata\n\t * @param bUseSemanticDateRange Boolean Suggests if semantic date range should be used\n\t * @param sSettings Stringified object of the property settings\n\t * @param contextPath Path to which the parent control (the table or the filter bar) is bound\n\t * @returns String containing comma-separated list of operators for filtering\n\t */\n\toperators: function (oContext: BaseContext, oProperty: any, bUseSemanticDateRange: boolean, sSettings: string, contextPath: string) {\n\t\t// this is used in FilterField.block\n\t\tif (!oProperty || !contextPath) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet operators: string[];\n\t\tconst sProperty = FieldHelper.propertyName(oProperty, { context: oContext });\n\t\tconst oModel = oContext.getModel() as ODataMetaModel,\n\t\t\tsPropertyPath = oContext.getPath(),\n\t\t\tsPropertyLocationPath = CommonHelper.getLocationForPropertyPath(oModel, sPropertyPath),\n\t\t\tpropertyType = oProperty.$Type;\n\n\t\tif (propertyType === \"Edm.Guid\") {\n\t\t\treturn CommonUtils.getOperatorsForGuidProperty();\n\t\t}\n\n\t\t// remove '/'\n\t\tcontextPath = contextPath.slice(0, -1);\n\t\tconst isTableBoundToNavigation: boolean = contextPath.lastIndexOf(\"/\") > 0;\n\t\tconst isNavigationPath: boolean =\n\t\t\t(isTableBoundToNavigation && contextPath !== sPropertyLocationPath) ||\n\t\t\t(!isTableBoundToNavigation && sPropertyLocationPath.lastIndexOf(\"/\") > 0);\n\t\tconst navigationPath: string =\n\t\t\t(isNavigationPath && sPropertyLocationPath.substr(sPropertyLocationPath.indexOf(contextPath) + contextPath.length + 1)) || \"\";\n\t\tconst propertyPath: string = (isNavigationPath && navigationPath + \"/\" + sProperty) || sProperty;\n\n\t\tif (!isTableBoundToNavigation) {\n\t\t\tif (!isNavigationPath) {\n\t\t\t\t// /SalesOrderManage/ID\n\t\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\t\tsProperty,\n\t\t\t\t\tsPropertyLocationPath,\n\t\t\t\t\toModel,\n\t\t\t\t\tpropertyType,\n\t\t\t\t\tbUseSemanticDateRange,\n\t\t\t\t\tsSettings\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// /SalesOrderManange/_Item/Material\n\t\t\t\t//let operators\n\t\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\t\tpropertyPath,\n\t\t\t\t\tcontextPath,\n\t\t\t\t\toModel,\n\t\t\t\t\tpropertyType,\n\t\t\t\t\tbUseSemanticDateRange,\n\t\t\t\t\tsSettings\n\t\t\t\t);\n\t\t\t\tif (operators.length === 0) {\n\t\t\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\t\t\tsProperty,\n\t\t\t\t\t\tsPropertyLocationPath,\n\t\t\t\t\t\toModel,\n\t\t\t\t\t\tpropertyType,\n\t\t\t\t\t\tbUseSemanticDateRange,\n\t\t\t\t\t\tsSettings\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!isNavigationPath) {\n\t\t\t// /SalesOrderManage/_Item/Material\n\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\tpropertyPath,\n\t\t\t\tcontextPath,\n\t\t\t\toModel,\n\t\t\t\tpropertyType,\n\t\t\t\tbUseSemanticDateRange,\n\t\t\t\tsSettings\n\t\t\t);\n\t\t\tif (operators.length === 0) {\n\t\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\t\tsProperty,\n\t\t\t\t\tModelHelper.getEntitySetPath(contextPath),\n\t\t\t\t\toModel,\n\t\t\t\t\tpropertyType,\n\t\t\t\t\tbUseSemanticDateRange,\n\t\t\t\t\tsSettings\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn operators?.length > 0 ? operators.toString() : undefined;\n\t\t} else {\n\t\t\t// /SalesOrderManage/_Item/_Association/PropertyName\n\t\t\t// This is currently not supported for tables\n\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\tpropertyPath,\n\t\t\t\tcontextPath,\n\t\t\t\toModel,\n\t\t\t\tpropertyType,\n\t\t\t\tbUseSemanticDateRange,\n\t\t\t\tsSettings\n\t\t\t);\n\t\t\tif (operators.length === 0) {\n\t\t\t\toperators = CommonUtils.getOperatorsForProperty(\n\t\t\t\t\tpropertyPath,\n\t\t\t\t\tModelHelper.getEntitySetPath(contextPath),\n\t\t\t\t\toModel,\n\t\t\t\t\tpropertyType,\n\t\t\t\t\tbUseSemanticDateRange,\n\t\t\t\t\tsSettings\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif ((!operators || operators.length === 0) && (propertyType === \"Edm.Date\" || propertyType === \"Edm.DateTimeOffset\")) {\n\t\t\toperators = CommonUtils.getOperatorsForDateProperty(propertyType);\n\t\t}\n\n\t\treturn operators.length > 0 ? operators.toString() : undefined;\n\t},\n\t/**\n\t * Return the path of the DaFieldDefault (if any). Otherwise, the DataField path is returned.\n\t *\n\t * @param oDataFieldContext Context of the DataField\n\t * @returns Object path\n\t */\n\tgetDataFieldDefault: function (oDataFieldContext: any) {\n\t\t// this is used in column.fragment\n\t\tconst oDataFieldDefault = oDataFieldContext\n\t\t\t.getModel()\n\t\t\t.getObject(`${oDataFieldContext.getPath()}@com.sap.vocabularies.UI.v1.DataFieldDefault`);\n\t\treturn oDataFieldDefault\n\t\t\t? `${oDataFieldContext.getPath()}@com.sap.vocabularies.UI.v1.DataFieldDefault`\n\t\t\t: oDataFieldContext.getPath();\n\t},\n\t/*\n\t * Method to get visible expression for DataFieldActionButton\n\t * @function\n\t * @name isDataFieldActionButtonVisible\n\t * @param {object} oThis - Current Object\n\t * @param {object} oDataField - DataPoint's Value\n\t * @param {boolean} bIsBound - DataPoint action bound\n\t * @param {object} oActionContext - ActionContext Value\n\t * @return {boolean} - returns boolean\n\t */\n\tisDataFieldActionButtonVisible: function (oThis: any, oDataField: any, bIsBound: any, oActionContext: any) {\n\t\treturn oDataField[\"@com.sap.vocabularies.UI.v1.Hidden\"] !== true && (bIsBound !== true || oActionContext !== false);\n\t},\n\t/**\n\t * Method to get press event for DataFieldActionButton.\n\t *\n\t * @function\n\t * @name getPressEventForDataFieldActionButton\n\t * @param oThis Current Object\n\t * @param oDataField DataPoint's Value\n\t * @returns The binding expression for the DataFieldActionButton press event\n\t */\n\tgetPressEventForDataFieldActionButton: function (oThis: any, oDataField: any) {\n\t\tlet sInvocationGrouping = \"Isolated\";\n\t\tif (\n\t\t\toDataField.InvocationGrouping &&\n\t\t\toDataField.InvocationGrouping.$EnumMember === \"com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet\"\n\t\t) {\n\t\t\tsInvocationGrouping = \"ChangeSet\";\n\t\t}\n\t\tlet bIsNavigable = oThis.navigateAfterAction;\n\t\tbIsNavigable = bIsNavigable === \"false\" ? false : true;\n\n\t\tconst entities: Array<string> = oThis?.entitySet?.getPath().split(\"/\");\n\t\tconst entitySetName: string = entities[entities.length - 1];\n\n\t\tconst oParams = {\n\t\t\tcontexts: \"${$source>/}.getBindingContext()\",\n\t\t\tinvocationGrouping: CommonHelper.addSingleQuotes(sInvocationGrouping),\n\t\t\tmodel: \"${$source>/}.getModel()\",\n\t\t\tlabel: CommonHelper.addSingleQuotes(oDataField.Label, true),\n\t\t\tisNavigable: bIsNavigable,\n\t\t\tentitySetName: CommonHelper.addSingleQuotes(entitySetName)\n\t\t};\n\n\t\treturn CommonHelper.generateFunction(\n\t\t\t\".editFlow.invokeAction\",\n\t\t\tCommonHelper.addSingleQuotes(oDataField.Action),\n\t\t\tCommonHelper.objectToString(oParams)\n\t\t);\n\t},\n\n\tisNumericDataType: function (sDataFieldType: any) {\n\t\tconst _sDataFieldType = sDataFieldType;\n\t\tif (_sDataFieldType !== undefined) {\n\t\t\tconst aNumericDataTypes = [\n\t\t\t\t\"Edm.Int16\",\n\t\t\t\t\"Edm.Int32\",\n\t\t\t\t\"Edm.Int64\",\n\t\t\t\t\"Edm.Byte\",\n\t\t\t\t\"Edm.SByte\",\n\t\t\t\t\"Edm.Single\",\n\t\t\t\t\"Edm.Decimal\",\n\t\t\t\t\"Edm.Double\"\n\t\t\t];\n\t\t\treturn aNumericDataTypes.indexOf(_sDataFieldType) === -1 ? false : true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tisDateOrTimeDataType: function (sPropertyType: any) {\n\t\tif (sPropertyType !== undefined) {\n\t\t\tconst aDateTimeDataTypes = [\"Edm.DateTimeOffset\", \"Edm.DateTime\", \"Edm.Date\", \"Edm.TimeOfDay\", \"Edm.Time\"];\n\t\t\treturn aDateTimeDataTypes.indexOf(sPropertyType) > -1;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tisDateTimeDataType: function (sPropertyType: any) {\n\t\tif (sPropertyType !== undefined) {\n\t\t\tconst aDateDataTypes = [\"Edm.DateTimeOffset\", \"Edm.DateTime\"];\n\t\t\treturn aDateDataTypes.indexOf(sPropertyType) > -1;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tisDateDataType: function (sPropertyType: any) {\n\t\treturn sPropertyType === \"Edm.Date\";\n\t},\n\tisTimeDataType: function (sPropertyType: any) {\n\t\tif (sPropertyType !== undefined) {\n\t\t\tconst aDateDataTypes = [\"Edm.TimeOfDay\", \"Edm.Time\"];\n\t\t\treturn aDateDataTypes.indexOf(sPropertyType) > -1;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\t/**\n\t * To display a text arrangement showing text and id, we need a string field on the UI.\n\t *\n\t * @param oAnnotations All the annotations of a property\n\t * @param sType The property data type\n\t * @returns The type to be used on the UI for the alignment\n\t * @private\n\t */\n\tgetDataTypeForVisualization: function (oAnnotations: any, sType: string) {\n\t\tconst sTextAnnotation = \"@com.sap.vocabularies.Common.v1.Text\",\n\t\t\tsTextArrangementAnnotation = \"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\";\n\n\t\t/*\n\t\t  In case of TextSeparate, the returned is used for the filed itself only showing\n\t\t   the value of the original property, thus also the type of the property needs to be used.\n\t\t  In case of TextOnly, we consider it to be Edm.String according to the definition\n\t\t   in the vocabulary, even if it's not.\n\t\t  In other cases, we return Edm.String, as the value is build using a text template.\n\t\t */\n\t\treturn oAnnotations?.[sTextArrangementAnnotation]?.$EnumMember !== \"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate\" &&\n\t\t\toAnnotations?.[sTextAnnotation]?.$Path\n\t\t\t? \"Edm.String\"\n\t\t\t: sType;\n\t},\n\n\tgetColumnAlignment: function (oDataField: any, oTable: any) {\n\t\tconst sEntityPath = oTable.collection.sPath,\n\t\t\toModel = oTable.collection.oModel;\n\t\tif (\n\t\t\t(oDataField[\"$Type\"] === \"com.sap.vocabularies.UI.v1.DataFieldForAction\" ||\n\t\t\t\toDataField[\"$Type\"] === \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\") &&\n\t\t\toDataField.Inline &&\n\t\t\toDataField.IconUrl\n\t\t) {\n\t\t\treturn \"Center\";\n\t\t}\n\t\t// Columns containing a Semantic Key must be Begin aligned\n\t\tconst aSemanticKeys = oModel.getObject(`${sEntityPath}/@com.sap.vocabularies.Common.v1.SemanticKey`);\n\t\tif (oDataField[\"$Type\"] === \"com.sap.vocabularies.UI.v1.DataField\") {\n\t\t\tconst sPropertyPath = oDataField.Value.$Path;\n\t\t\tconst bIsSemanticKey =\n\t\t\t\taSemanticKeys &&\n\t\t\t\t!aSemanticKeys.every(function (oKey: any) {\n\t\t\t\t\treturn oKey.$PropertyPath !== sPropertyPath;\n\t\t\t\t});\n\t\t\tif (bIsSemanticKey) {\n\t\t\t\treturn \"Begin\";\n\t\t\t}\n\t\t}\n\t\treturn FieldHelper.getDataFieldAlignment(oDataField, oModel, sEntityPath);\n\t},\n\t/**\n\t * Get alignment based only on the property.\n\t *\n\t * @param sType The property's type\n\t * @param oFormatOptions The field format options\n\t * @param [oComputedEditMode] The computed Edit mode of the property is empty when directly called from the ColumnProperty fragment\n\t * @returns The property alignment\n\t */\n\tgetPropertyAlignment: function (sType: string, oFormatOptions: any, oComputedEditMode?: BindingToolkitExpression<string>) {\n\t\tlet sDefaultAlignment = \"Begin\" as any;\n\t\tconst sTextAlignment = oFormatOptions ? oFormatOptions.textAlignMode : \"\";\n\t\tswitch (sTextAlignment) {\n\t\t\tcase \"Form\":\n\t\t\t\tif (this.isNumericDataType(sType)) {\n\t\t\t\t\tsDefaultAlignment = \"Begin\";\n\t\t\t\t\tif (oComputedEditMode) {\n\t\t\t\t\t\tsDefaultAlignment = getAlignmentExpression(oComputedEditMode, \"Begin\", \"End\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (this.isNumericDataType(sType) || this.isDateOrTimeDataType(sType)) {\n\t\t\t\t\tsDefaultAlignment = \"Right\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn sDefaultAlignment;\n\t},\n\n\tgetDataFieldAlignment: function (oDataField: any, oModel: any, sEntityPath: any, oFormatOptions?: any, oComputedEditMode?: any) {\n\t\tlet sDataFieldPath,\n\t\t\tsDefaultAlignment = \"Begin\",\n\t\t\tsType,\n\t\t\toAnnotations;\n\n\t\tif (oDataField[\"$Type\"] === \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\") {\n\t\t\tsDataFieldPath = oDataField.Target.$AnnotationPath;\n\t\t\tif (\n\t\t\t\toDataField.Target[\"$AnnotationPath\"] &&\n\t\t\t\toDataField.Target[\"$AnnotationPath\"].indexOf(\"com.sap.vocabularies.UI.v1.FieldGroup\") >= 0\n\t\t\t) {\n\t\t\t\tconst oFieldGroup = oModel.getObject(`${sEntityPath}/${sDataFieldPath}`);\n\n\t\t\t\tfor (let i = 0; i < oFieldGroup.Data.length; i++) {\n\t\t\t\t\tsType = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/Data/${i.toString()}/Value/$Path/$Type`);\n\t\t\t\t\toAnnotations = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/Data/${i.toString()}/Value/$Path@`);\n\t\t\t\t\tsType = this.getDataTypeForVisualization(oAnnotations, sType);\n\t\t\t\t\tsDefaultAlignment = this.getPropertyAlignment(sType, oFormatOptions, oComputedEditMode);\n\n\t\t\t\t\tif (sDefaultAlignment === \"Begin\") {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn sDefaultAlignment;\n\t\t\t} else if (\n\t\t\t\toDataField.Target[\"$AnnotationPath\"] &&\n\t\t\t\toDataField.Target[\"$AnnotationPath\"].indexOf(\"com.sap.vocabularies.UI.v1.DataPoint\") >= 0 &&\n\t\t\t\toModel.getObject(`${sEntityPath}/${sDataFieldPath}/Visualization/$EnumMember`) ===\n\t\t\t\t\t\"com.sap.vocabularies.UI.v1.VisualizationType/Rating\"\n\t\t\t) {\n\t\t\t\treturn sDefaultAlignment;\n\t\t\t} else {\n\t\t\t\tsType = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/$Type`);\n\t\t\t\tif (sType === \"com.sap.vocabularies.UI.v1.DataPointType\") {\n\t\t\t\t\tsType = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/Value/$Path/$Type`);\n\t\t\t\t\toAnnotations = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/Value/$Path@`);\n\t\t\t\t\tsType = this.getDataTypeForVisualization(oAnnotations, sType);\n\t\t\t\t}\n\t\t\t\tsDefaultAlignment = this.getPropertyAlignment(sType, oFormatOptions, oComputedEditMode);\n\t\t\t}\n\t\t} else {\n\t\t\tsDataFieldPath = oDataField.Value.$Path;\n\t\t\tsType = oModel.getObject(`${sEntityPath}/${sDataFieldPath}/$Type`);\n\t\t\toAnnotations = oModel.getObject(`${sEntityPath}/${sDataFieldPath}@`);\n\t\t\tsType = this.getDataTypeForVisualization(oAnnotations, sType);\n\t\t\tif (!(oModel.getObject(`${sEntityPath}/`)[\"$Key\"].indexOf(sDataFieldPath) === 0)) {\n\t\t\t\tsDefaultAlignment = this.getPropertyAlignment(sType, oFormatOptions, oComputedEditMode);\n\t\t\t}\n\t\t}\n\t\treturn sDefaultAlignment;\n\t},\n\tgetTypeAlignment: function (\n\t\toContext: any,\n\t\toDataField: any,\n\t\toFormatOptions: any,\n\t\tsEntityPath: string,\n\t\toComputedEditMode: any,\n\t\toProperty: any\n\t) {\n\t\tconst oInterface = oContext.getInterface(0);\n\t\tconst oModel = oInterface.getModel();\n\n\t\tif (sEntityPath === \"/undefined\" && oProperty && oProperty.$target) {\n\t\t\tsEntityPath = `/${oProperty.$target.fullyQualifiedName.split(\"/\")[0]}`;\n\t\t}\n\t\treturn FieldHelper.getDataFieldAlignment(oDataField, oModel, sEntityPath, oFormatOptions, oComputedEditMode);\n\t},\n\n\t/**\n\t * Method to get enabled expression for DataFieldActionButton.\n\t *\n\t * @function\n\t * @name isDataFieldActionButtonEnabled\n\t * @param oDataField DataPoint's Value\n\t * @param bIsBound DataPoint action bound\n\t * @param oActionContext ActionContext Value\n\t * @param sActionContextFormat Formatted value of ActionContext\n\t * @returns A boolean or string expression for enabled property\n\t */\n\tisDataFieldActionButtonEnabled: function (oDataField: any, bIsBound: boolean, oActionContext: any, sActionContextFormat: string) {\n\t\tif (bIsBound !== true) {\n\t\t\treturn \"true\";\n\t\t}\n\t\treturn (oActionContext === null ? \"{= !${#\" + oDataField.Action + \"} ? false : true }\" : oActionContext)\n\t\t\t? sActionContextFormat\n\t\t\t: \"true\";\n\t},\n\n\t/**\n\t * Method to compute the label for a DataField.\n\t * If the DataField's label is an empty string, it's not rendered even if a fallback exists.\n\t *\n\t * @function\n\t * @name computeLabelText\n\t * @param {object} oDataField The DataField being processed\n\t * @param {object} oInterface The interface for context instance\n\t * @returns {string} The computed text for the DataField label.\n\t */\n\n\tcomputeLabelText: function (oDataField: any, oInterface: any) {\n\t\tconst oModel = oInterface.context.getModel();\n\t\tlet sContextPath = oInterface.context.getPath();\n\t\tif (sContextPath.endsWith(\"/\")) {\n\t\t\tsContextPath = sContextPath.slice(0, sContextPath.lastIndexOf(\"/\"));\n\t\t}\n\t\tconst sDataFieldLabel = oModel.getObject(`${sContextPath}/Label`);\n\t\t//We do not show an additional label text for a button:\n\t\tif (\n\t\t\toDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAction\" ||\n\t\t\toDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\"\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (sDataFieldLabel) {\n\t\t\treturn sDataFieldLabel;\n\t\t} else if (sDataFieldLabel === \"\") {\n\t\t\treturn \"\";\n\t\t}\n\t\tlet sDataFieldTargetTitle;\n\t\tif (oDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\") {\n\t\t\tif (\n\t\t\t\toDataField.Target.$AnnotationPath.indexOf(\"@com.sap.vocabularies.UI.v1.DataPoint\") > -1 ||\n\t\t\t\toDataField.Target.$AnnotationPath.indexOf(\"@com.sap.vocabularies.UI.v1.Chart\") > -1\n\t\t\t) {\n\t\t\t\tsDataFieldTargetTitle = oModel.getObject(`${sContextPath}/Target/$AnnotationPath@/Title`);\n\t\t\t}\n\t\t\tif (oDataField.Target.$AnnotationPath.indexOf(\"@com.sap.vocabularies.Communication.v1.Contact\") > -1) {\n\t\t\t\tsDataFieldTargetTitle = oModel.getObject(\n\t\t\t\t\t`${sContextPath}/Target/$AnnotationPath@/fn/$Path@com.sap.vocabularies.Common.v1.Label`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tif (sDataFieldTargetTitle) {\n\t\t\treturn sDataFieldTargetTitle;\n\t\t}\n\t\tlet sDataFieldTargetLabel;\n\t\tif (oDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\") {\n\t\t\tsDataFieldTargetLabel = oModel.getObject(`${sContextPath}/Target/$AnnotationPath@/Label`);\n\t\t}\n\t\tif (sDataFieldTargetLabel) {\n\t\t\treturn sDataFieldTargetLabel;\n\t\t}\n\n\t\tconst sDataFieldValueLabel = oModel.getObject(`${sContextPath}/Value/$Path@com.sap.vocabularies.Common.v1.Label`);\n\t\tif (sDataFieldValueLabel) {\n\t\t\treturn sDataFieldValueLabel;\n\t\t}\n\n\t\tlet sDataFieldTargetValueLabel;\n\t\tif (oDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\") {\n\t\t\tsDataFieldTargetValueLabel = oModel.getObject(\n\t\t\t\t`${sContextPath}/Target/$AnnotationPath/Value/$Path@com.sap.vocabularies.Common.v1.Label`\n\t\t\t);\n\t\t}\n\t\tif (sDataFieldTargetValueLabel) {\n\t\t\treturn sDataFieldTargetValueLabel;\n\t\t}\n\t\treturn \"\";\n\t},\n\t/**\n\t * Method to align the data fields with their label.\n\t *\n\t * @function\n\t * @name buildExpressionForAlignItems\n\t * @param sVisualization\n\t * @returns Expression binding for alignItems property\n\t */\n\tbuildExpressionForAlignItems: function (sVisualization: string) {\n\t\tconst fieldVisualizationBindingExpression = constant(sVisualization);\n\t\tconst progressVisualizationBindingExpression = constant(\"com.sap.vocabularies.UI.v1.VisualizationType/Progress\");\n\t\tconst ratingVisualizationBindingExpression = constant(\"com.sap.vocabularies.UI.v1.VisualizationType/Rating\");\n\t\treturn compileExpression(\n\t\t\tifElse(\n\t\t\t\tor(\n\t\t\t\t\tequal(fieldVisualizationBindingExpression, progressVisualizationBindingExpression),\n\t\t\t\t\tequal(fieldVisualizationBindingExpression, ratingVisualizationBindingExpression)\n\t\t\t\t),\n\t\t\t\tconstant(\"Center\"),\n\t\t\t\tifElse(UI.IsEditable, constant(\"Center\"), constant(\"Stretch\"))\n\t\t\t)\n\t\t);\n\t},\n\n\t/**\n\t * Method to check ValueListReferences, ValueListMapping and ValueList inside ActionParameters for FieldHelp.\n\t *\n\t * @function\n\t * @name hasValueHelp\n\t * @param oPropertyAnnotations Action parameter object\n\t * @returns `true` if there is a ValueList* annotation defined\n\t */\n\thasValueHelpAnnotation: function (oPropertyAnnotations: any) {\n\t\tif (oPropertyAnnotations) {\n\t\t\treturn !!(\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueListReferences\"] ||\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueListMapping\"] ||\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueList\"]\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t},\n\t/**\n\t * Method to get display property for ActionParameter dialog.\n\t *\n\t * \t@function\n\t * @name getAPDialogDisplayFormat\n\t * @param oProperty The action parameter instance\n\t * @param oInterface The interface for the context instance\n\t * @returns The display format  for an action parameter Field\n\t */\n\tgetAPDialogDisplayFormat: function (oProperty: any, oInterface: any) {\n\t\tlet oAnnotation;\n\t\tconst oModel = oInterface.context.getModel();\n\t\tconst sContextPath = oInterface.context.getPath();\n\t\tconst sPropertyName = oProperty.$Name || oInterface.context.getProperty(`${sContextPath}@sapui.name`);\n\t\tconst oActionParameterAnnotations = oModel.getObject(`${sContextPath}@`);\n\t\tconst oValueHelpAnnotation =\n\t\t\toActionParameterAnnotations[\"@com.sap.vocabularies.Common.v1.ValueList\"] ||\n\t\t\toActionParameterAnnotations[\"@com.sap.vocabularies.Common.v1.ValueListMapping\"] ||\n\t\t\toActionParameterAnnotations[\"@com.sap.vocabularies.Common.v1.ValueListReferences\"];\n\t\tconst getValueListPropertyName = function (oValueList: any) {\n\t\t\tconst oValueListParameter = oValueList.Parameters.find(function (oParameter: any) {\n\t\t\t\treturn oParameter.LocalDataProperty && oParameter.LocalDataProperty.$PropertyPath === sPropertyName;\n\t\t\t});\n\t\t\treturn oValueListParameter && oValueListParameter.ValueListProperty;\n\t\t};\n\t\tlet sValueListPropertyName;\n\t\tif (\n\t\t\toActionParameterAnnotations[\"@com.sap.vocabularies.Common.v1.TextArrangement\"] ||\n\t\t\toActionParameterAnnotations[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"]\n\t\t) {\n\t\t\treturn CommonUtils.computeDisplayMode(oActionParameterAnnotations, undefined);\n\t\t} else if (oValueHelpAnnotation) {\n\t\t\tif (oValueHelpAnnotation.CollectionPath) {\n\t\t\t\t// get the name of the corresponding property in value list collection\n\t\t\t\tsValueListPropertyName = getValueListPropertyName(oValueHelpAnnotation);\n\t\t\t\tif (!sValueListPropertyName) {\n\t\t\t\t\treturn \"Value\";\n\t\t\t\t}\n\t\t\t\t// get text for this property\n\t\t\t\toAnnotation = oModel.getObject(`/${oValueHelpAnnotation.CollectionPath}/${sValueListPropertyName}@`);\n\t\t\t\treturn oAnnotation && oAnnotation[\"@com.sap.vocabularies.Common.v1.Text\"]\n\t\t\t\t\t? CommonUtils.computeDisplayMode(oAnnotation, undefined)\n\t\t\t\t\t: \"Value\";\n\t\t\t} else {\n\t\t\t\treturn oModel.requestValueListInfo(sContextPath, true).then(function (oValueListInfo: any) {\n\t\t\t\t\t// get the name of the corresponding property in value list collection\n\t\t\t\t\tsValueListPropertyName = getValueListPropertyName(oValueListInfo[\"\"]);\n\t\t\t\t\tif (!sValueListPropertyName) {\n\t\t\t\t\t\treturn \"Value\";\n\t\t\t\t\t}\n\t\t\t\t\t// get text for this property\n\t\t\t\t\toAnnotation = oValueListInfo[\"\"].$model\n\t\t\t\t\t\t.getMetaModel()\n\t\t\t\t\t\t.getObject(`/${oValueListInfo[\"\"][\"CollectionPath\"]}/${sValueListPropertyName}@`);\n\t\t\t\t\treturn oAnnotation && oAnnotation[\"@com.sap.vocabularies.Common.v1.Text\"]\n\t\t\t\t\t\t? CommonUtils.computeDisplayMode(oAnnotation, undefined)\n\t\t\t\t\t\t: \"Value\";\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\treturn \"Value\";\n\t\t}\n\t},\n\t/**\n\t * Method to get display property for ActionParameter dialog FieldHelp.\n\t *\n\t * @function\n\t * @name getActionParameterDialogFieldHelp\n\t * @param oActionParameter Action parameter object\n\t * @param sSapUIName Action sapui name\n\t * @param sParamName The parameter name\n\t * @returns The ID of the fieldHelp used by this action parameter\n\t */\n\tgetActionParameterDialogFieldHelp: function (oActionParameter: object, sSapUIName: string, sParamName: string) {\n\t\treturn this.hasValueHelpAnnotation(oActionParameter) ? generate([sSapUIName, sParamName]) : undefined;\n\t},\n\t/**\n\t * Method to get the delegate configuration for ActionParameter dialog.\n\t *\n\t * @function\n\t * @name getValueHelpDelegate\n\t * @param isBound Action is bound\n\t * @param entityTypePath The EntityType Path\n\t * @param sapUIName The name of the Action\n\t * @param paramName The name of the ActionParameter\n\t * @returns The delegate configuration object as a string\n\t */\n\tgetValueHelpDelegate: function (isBound: boolean, entityTypePath: string, sapUIName: string, paramName: string) {\n\t\tconst delegateConfiguration: { name: string; payload: ValueHelpPayload } = {\n\t\t\tname: CommonHelper.addSingleQuotes(\"sap/fe/macros/valuehelp/ValueHelpDelegate\"),\n\t\t\tpayload: {\n\t\t\t\tpropertyPath: CommonHelper.addSingleQuotes(\n\t\t\t\t\tValueListHelper.getPropertyPath({\n\t\t\t\t\t\tUnboundAction: !isBound,\n\t\t\t\t\t\tEntityTypePath: entityTypePath,\n\t\t\t\t\t\tAction: sapUIName,\n\t\t\t\t\t\tProperty: paramName\n\t\t\t\t\t})\n\t\t\t\t),\n\t\t\t\tqualifiers: {},\n\t\t\t\tvalueHelpQualifier: CommonHelper.addSingleQuotes(\"\"),\n\t\t\t\tisActionParameterDialog: true\n\t\t\t}\n\t\t};\n\t\treturn CommonHelper.objectToString(delegateConfiguration);\n\t},\n\t/**\n\t * Method to get the delegate configuration for NonComputedVisibleKeyField dialog.\n\t *\n\t * @function\n\t * @name getValueHelpDelegateForNonComputedVisibleKeyField\n\t * @param propertyPath The current property path\n\t * @returns The delegate configuration object as a string\n\t */\n\tgetValueHelpDelegateForNonComputedVisibleKeyField: function (propertyPath: string) {\n\t\tconst delegateConfiguration: { name: string; payload: ValueHelpPayload } = {\n\t\t\tname: CommonHelper.addSingleQuotes(\"sap/fe/macros/valuehelp/ValueHelpDelegate\"),\n\t\t\tpayload: {\n\t\t\t\tpropertyPath: CommonHelper.addSingleQuotes(propertyPath),\n\t\t\t\tqualifiers: {},\n\t\t\t\tvalueHelpQualifier: CommonHelper.addSingleQuotes(\"\")\n\t\t\t}\n\t\t};\n\t\treturn CommonHelper.objectToString(delegateConfiguration);\n\t},\n\n\t/**\n\t * Method to fetch entity from a path containing multiple associations.\n\t *\n\t * @function\n\t * @name _getEntitySetFromMultiLevel\n\t * @param oContext The context whose path is to be checked\n\t * @param sPath The path from which entity has to be fetched\n\t * @param sSourceEntity The entity path in which nav entity exists\n\t * @param iStart The start index : beginning parts of the path to be ignored\n\t * @param iDiff The diff index : end parts of the path to be ignored\n\t * @returns The path of the entity set\n\t */\n\t_getEntitySetFromMultiLevel: function (oContext: Context, sPath: string, sSourceEntity: string, iStart: any, iDiff: any) {\n\t\tlet aNavParts = sPath.split(\"/\").filter(Boolean);\n\t\taNavParts = aNavParts.filter(function (sPart: string) {\n\t\t\treturn sPart !== \"$NavigationPropertyBinding\";\n\t\t});\n\t\tif (aNavParts.length > 0) {\n\t\t\tfor (let i = iStart; i < aNavParts.length - iDiff; i++) {\n\t\t\t\tsSourceEntity = `/${oContext.getObject(`${sSourceEntity}/$NavigationPropertyBinding/${aNavParts[i]}`)}`;\n\t\t\t}\n\t\t}\n\t\treturn sSourceEntity;\n\t},\n\n\t/**\n\t * When the value displayed is in text arrangement TextOnly we also want to retrieve the Text value for tables even if we don't show it.\n\t * This method will return the value of the original data field.\n\t *\n\t * @param oThis The current object\n\t * @param oDataFieldTextArrangement DataField using text arrangement annotation\n\t * @param oDataField DataField containing the value using text arrangement annotation\n\t * @returns The binding to the value\n\t */\n\tgetBindingInfoForTextArrangement: function (oThis: object, oDataFieldTextArrangement: any, oDataField: any) {\n\t\t// this is used in ColumnContent fragment\n\t\tif (\n\t\t\toDataFieldTextArrangement &&\n\t\t\toDataFieldTextArrangement.$EnumMember &&\n\t\t\toDataFieldTextArrangement.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\" &&\n\t\t\toDataField\n\t\t) {\n\t\t\treturn `{${oDataField.Value.$Path}}`;\n\t\t}\n\t\treturn undefined;\n\t},\n\n\tgetPathForIconSource: function (sPropertyPath: any) {\n\t\treturn \"{= FIELDRUNTIME.getIconForMimeType(%{\" + sPropertyPath + \"@odata.mediaContentType})}\";\n\t},\n\tgetFilenameExpr: function (sFilename: any, sNoFilenameText: any) {\n\t\tif (sFilename) {\n\t\t\tif (sFilename.indexOf(\"{\") === 0) {\n\t\t\t\t// filename is referenced via path, i.e. @Core.ContentDisposition.Filename : path\n\t\t\t\treturn \"{= $\" + sFilename + \" ? $\" + sFilename + \" : $\" + sNoFilenameText + \"}\";\n\t\t\t}\n\t\t\t// static filename, i.e. @Core.ContentDisposition.Filename : 'someStaticName'\n\t\t\treturn sFilename;\n\t\t}\n\t\t// no @Core.ContentDisposition.Filename\n\t\treturn sNoFilenameText;\n\t},\n\n\tcalculateMBfromByte: function (iByte: any) {\n\t\treturn iByte ? (iByte / (1024 * 1024)).toFixed(6) : undefined;\n\t},\n\tgetDownloadUrl: function (propertyPath: string) {\n\t\treturn propertyPath + \"{= ${internal>/stickySessionToken} ? ('?SAP-ContextId=' + ${internal>/stickySessionToken}) : '' }\";\n\t},\n\tgetMarginClass: function (compactSemanticKey: string | boolean | undefined) {\n\t\treturn compactSemanticKey === \"true\" || compactSemanticKey === true ? \"sapMTableContentMargin\" : undefined;\n\t},\n\tgetRequired: function (immutableKey: any, target: any, requiredProperties: any) {\n\t\tlet targetRequiredExpression: any = constant(false);\n\t\tif (target !== null) {\n\t\t\ttargetRequiredExpression = isRequiredExpression(target?.targetObject);\n\t\t}\n\t\treturn compileExpression(or(targetRequiredExpression, requiredProperties.indexOf(immutableKey) > -1));\n\t},\n\n\t/**\n\t * The method checks if the field is already part of a form.\n\t *\n\t * @param dataFieldCollection The list of the fields of the form\n\t * @param dataFieldObjectPath The data model object path of the field which needs to be checked in the form\n\t * @returns `true` if the field is already part of the form, `false` otherwise\n\t */\n\tisFieldPartOfForm: function (dataFieldCollection: FormElement[], dataFieldObjectPath: DataModelObjectPath) {\n\t\t//generating key for the received data field\n\t\tconst connectedDataFieldKey = KeyHelper.generateKeyFromDataField(dataFieldObjectPath.targetObject);\n\t\t// trying to find the generated key in already existing form elements\n\t\tconst isFieldFound = dataFieldCollection.find((field) => {\n\t\t\treturn field.key === connectedDataFieldKey;\n\t\t});\n\t\treturn isFieldFound ? true : false;\n\t}\n};\n(FieldHelper.fieldControl as any).requiresIContext = true;\n(FieldHelper.getTypeAlignment as any).requiresIContext = true;\n(FieldHelper.getAPDialogDisplayFormat as any).requiresIContext = true;\n(FieldHelper.computeLabelText as any).requiresIContext = true;\n(FieldHelper.getActionParameterVisibility as any).requiresIContext = true;\n\nexport default FieldHelper;\n"],"mappings":"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"}},{"offset":{"line":7689,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","BindingHelper","Key","BindingToolkit","ModelHelper","StableIdHelper","FieldControlHelper","UIFormatters","CommonHelper","ValueListHelper","ManagedObject","AnnotationHelper","getAlignmentExpression","isRequiredExpression","generate","or","ifElse","equal","constant","compileExpression","KeyHelper","UI","ISOCurrency","Unit","FieldHelper","isNotAlwaysHidden","oDataField","oDetails","oContext","context","isAlwaysHidden","Value","$Path","getObject","isRequired","oFieldControl","sEditMode","bindingParser","getActionParameterVisibility","oParam","$If","length","oNegParam","value","undefined","propertyName","vProperty","oInterface","sPropertyName","getPath","indexOf","$PropertyPath","sPath","sContextPath","fieldControl","sPropertyPath","oModel","getModel","oFieldControlContext","createBindingContext","getProperty","hasOwnProperty","$EnumMember","valueHelpProperty","oPropertyContext","bInFilterField","oContent","sAnnoPath","oPropertyAnnotations","sAnnotation","sUnitOrCurrencyPath","valueHelpPropertyForFilterField","getIDForFieldValueHelp","sFlexId","sIdPrefix","sOriginalPropertyName","sProperty","getFieldHelpPropertyForFilterField","propertyContext","oProperty","sPropertyType","sVhIdPrefix","sValueHelpPropertyName","bHasValueListWithFixedValues","bUseSemanticDateRange","bSemanticDateRange","sPropertyLocationPath","getLocationForPropertyPath","oFilterRestrictions","getFilterRestrictionsByPath","FilterAllowedExpressions","computeFieldBaseDelegate","delegateName","retrieveTextFromValueList","JSON","stringify","name","payload","_getPrimaryIntents","aSemanticObjectsList","aPromises","oUshellContainer","ushell","Container","oService","getService","forEach","semObject","push","getPrimaryIntent","Promise","all","then","aSemObjectPrimaryAction","catch","oError","error","_checkIfSemanticObjectsHasPrimaryAction","oSemantics","aSemanticObjectsPrimaryActions","appComponent","_fnIsSemanticObjectActionUnavailable","_oSemantics","_oPrimaryAction","_index","unavailableActionsIndex","semanticObjectUnavailableActions","actions","intent","split","semanticPrimaryActions","oPrimaryAction","semanticObjects","mainSemanticObject","sCurrentHash","getShellServices","getHash","index","semanticObject","checkPrimaryActions","bGetTitleLink","this","titleLink","hasTitleLink","_getTitleLinkWithParameters","_oSemanticObjectModel","_linkIntent","titlelink","getPrimaryAction","primaryIntentAction","operators","sSettings","contextPath","propertyType","$Type","getOperatorsForGuidProperty","slice","isTableBoundToNavigation","lastIndexOf","isNavigationPath","navigationPath","substr","propertyPath","getOperatorsForProperty","_operators","getEntitySetPath","toString","getOperatorsForDateProperty","getDataFieldDefault","oDataFieldContext","oDataFieldDefault","isDataFieldActionButtonVisible","oThis","bIsBound","oActionContext","getPressEventForDataFieldActionButton","_oThis$entitySet","sInvocationGrouping","InvocationGrouping","bIsNavigable","navigateAfterAction","entities","entitySet","entitySetName","oParams","contexts","invocationGrouping","addSingleQuotes","model","label","Label","isNavigable","generateFunction","Action","objectToString","isNumericDataType","sDataFieldType","_sDataFieldType","aNumericDataTypes","isDateOrTimeDataType","aDateTimeDataTypes","isDateTimeDataType","aDateDataTypes","isDateDataType","isTimeDataType","getDataTypeForVisualization","oAnnotations","sType","_oAnnotations$sTextAr","_oAnnotations$sTextAn","sTextAnnotation","sTextArrangementAnnotation","getColumnAlignment","oTable","sEntityPath","collection","Inline","IconUrl","aSemanticKeys","bIsSemanticKey","every","oKey","getDataFieldAlignment","getPropertyAlignment","oFormatOptions","oComputedEditMode","sDefaultAlignment","sTextAlignment","textAlignMode","sDataFieldPath","Target","$AnnotationPath","oFieldGroup","i","Data","getTypeAlignment","getInterface","$target","fullyQualifiedName","isDataFieldActionButtonEnabled","sActionContextFormat","computeLabelText","endsWith","sDataFieldLabel","sDataFieldTargetTitle","sDataFieldTargetLabel","sDataFieldValueLabel","sDataFieldTargetValueLabel","buildExpressionForAlignItems","sVisualization","fieldVisualizationBindingExpression","progressVisualizationBindingExpression","ratingVisualizationBindingExpression","IsEditable","hasValueHelpAnnotation","getAPDialogDisplayFormat","oAnnotation","$Name","oActionParameterAnnotations","oValueHelpAnnotation","getValueListPropertyName","oValueList","oValueListParameter","Parameters","find","oParameter","LocalDataProperty","ValueListProperty","sValueListPropertyName","computeDisplayMode","CollectionPath","requestValueListInfo","oValueListInfo","$model","getMetaModel","getActionParameterDialogFieldHelp","oActionParameter","sSapUIName","sParamName","getValueHelpDelegate","isBound","entityTypePath","sapUIName","paramName","delegateConfiguration","getPropertyPath","UnboundAction","EntityTypePath","Property","qualifiers","valueHelpQualifier","isActionParameterDialog","getValueHelpDelegateForNonComputedVisibleKeyField","_getEntitySetFromMultiLevel","sSourceEntity","iStart","iDiff","aNavParts","filter","Boolean","sPart","getBindingInfoForTextArrangement","oDataFieldTextArrangement","getPathForIconSource","getFilenameExpr","sFilename","sNoFilenameText","calculateMBfromByte","iByte","toFixed","getDownloadUrl","getMarginClass","compactSemanticKey","getRequired","immutableKey","target","requiredProperties","targetRequiredExpression","targetObject","isFieldPartOfForm","dataFieldCollection","dataFieldObjectPath","connectedDataFieldKey","generateKeyFromDataField","isFieldFound","field","key","requiresIContext"],"sources":["FieldHelper-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":7694,"column":0},"map":{"version":3,"names":["getCollaborationBinding","field","binding","getBindingContext","getBinding","isA","oView","CommonUtils","getTargetView","FieldRuntime","resetChangesHandler","undefined","uploadPromises","onDataFieldWithNavigationPath","oSource","oController","sNavPath","_routing","oBindingContext","oMetaModel","getModel","getMetaModel","fnNavigate","oContext","navigateToTarget","getViewData","converterType","ModelHelper","isStickySessionSupported","draft","processDataLossOrDraftDiscardConfirmation","Function","prototype","getController","NavigationType","ForwardNavigation","Log","error","isDraftIndicatorVisible","sPropertyPath","sSemanticKeyHasDraftIndicator","HasDraftEntity","IsActiveEntity","hideDraftInfo","onValidateFieldGroup","oEvent","oFEController","_getExtensionController","_sideEffects","handleFieldGroupChange","handleChange","oSourceField","getSource","bIsTransient","isTransient","pValueResolved","getParameter","Promise","resolve","bValid","fieldValidity","getFieldStateOnChange","state","then","mParameters","valid","FieldAPI","catch","editFlow","syncTask","handleFieldChange","oField","bCollaborationEnabled","CollaborationActivitySync","isConnected","data","getBindingInfo","parts","map","part","getPath","path","updateCollaboration","hasPendingChanges","attachEventOnce","send","Activity","Change","Undo","handleLiveChange","event","bindingPath","fullPath","LiveChange","setTimeout","focusedControl","Core","byId","getCurrentFocusedControlId","getParent","detachBrowserEvent","attachBrowserEvent","handleOpenPicker","sBindingPath","sFullPath","handleClosePicker","_sendCollaborationMessageForFileUploader","fileUploader","activity","isCollaborationEnabled","getProperty","handleOpenUploader","handleCloseUploader","mFieldState","_isBindingStateMessages","oBinding","getDataState","getInvalidValue","getContent","FieldWrapper","getMetadata","getName","getEditMode","getContentEdit","bIsValid","getMaxConditions","oValueBindingInfo","getValue","fieldValue","validity","_fnFixHashQueryString","sCurrentHash","indexOf","split","_fnGetLinkInformation","_oSource","_oLink","_sPropertyPath","_sValue","fnSetActive","oModel","sSemanticObjectName","oInternalModelContext","oAppComponent","getAppComponent","oShellServiceHelper","getShellServices","pGetLinksPromise","getLinksWithCache","semanticObject","aSemanticObjectUnavailableActions","getObject","SemanticObjectName","SemanticObjectFullPath","MetaModel","InternalModelContext","ShellServiceHelper","GetLinksPromise","SemanticObjectUnavailableActions","_fnQuickViewHasNewCondition","oSemanticObjectPayload","_oLinkInfo","bResultingNewConditionForConditionalWrapper","_fnQuickViewSetNewConditionForConditionalWrapper","_oFinalSemanticObjects","sTmpPath","aSemanticObjectPaths","Object","keys","iPathsCount","_fnUpdateSemanticObjectsTargetModel","sValue","oControl","bActive","setActive","setTitleActive","oConditionalWrapper","setCondition","oLinkInfo","getHash","updateSemanticTargets","oFinalSemanticObjects","oError","_checkControlHasModelAndBindingContext","_control","_checkCustomDataValueBeforeUpdatingSemanticObjectModel","propertyPath","aCustomData","sSemanticObjectPathValue","oValueBinding","_fnCustomDataValueIsString","semanticObjectPathValue","filter","customData","getKey","index","_oChangeEvent","LinkModelContextChange","sProperty","sPathToProperty","control","mdcLink","getDependents","length","getCustomData","openExternalLink","source","openWindow","createPopoverWithNoTargets","mdcLinkId","getId","illustratedMessageSettings","title","getResourceModel","getText","description","enableFormattedText","illustrationSize","illustrationType","IllustratedMessageType","Tent","illustratedMessage","IllustratedMessage","popoverSettings","horizontalScrolling","showHeader","system","phone","placement","mobilelibrary","PlacementType","Auto","content","afterClose","destroy","ResponsivePopover","openLink","sapmLink","hRef","getTriggerHref","linkItems","retrieveLinkItems","getPayload","hasQuickViewFacets","popover","addDependent","openBy","open","view","appComponent","shellService","shellHash","parseShellHash","navArgs","target","action","params","KeepAliveHelper","storeControlRefreshStrategyForHash","isStickyEditMode","toExternal","newHref","hrefForExternalAsync","pressLink","findElements","elem","oFieldInfo","uploadStream","controller","FEController","fileWrapper","uploadUrl","getUploadUrl","setUIBusy","setUploadUrl","removeAllHeaderParameters","token","getHttpHeaders","headerParameterCSRFToken","FileUploaderParameter","setName","setValue","addHeaderParameter","eTag","headerParameterETag","headerParameterAccept","uploadPromise","reject","upload","MessageBox","handleUploadComplete","propertyFileName","status","context","_displayMessageForFailedUpload","newETag","etag","setProperty","avatar","refreshAvatarCacheBusting","_callSideEffectsForStream","notificationData","push","sError","sMessageText","JSON","parse","message","e","removeStream","deleteButton","getIconForMimeType","sMimeType","IconPool","retrieveTextFromValueList","sPropertyValue","sPropertyFullPath","sDisplayFormat","sTextProperty","sPropertyName","CommonHelper","requestValueListInfo","mValueListInfo","oValueListInfo","oValueListModel","$model","oMetaModelValueList","oParamWithKey","Parameters","find","oParameter","LocalDataProperty","$PropertyPath","ValueListProperty","oTextAnnotation","CollectionPath","$Path","oFilter","Filter","operator","value1","oListBinding","bindList","$select","requestContexts","aContexts","sDescription","getLibraryResourceBundle","sMsg","handleTypeMissmatch","resourceModel","details","getParameters","mimeType","getMimeType","toString","replaceAll","contentWidth","handleFileSizeExceed","getMaximumFileSize","toFixed","_controller"],"sourceRoot":"field","sources":["FieldRuntime.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport CollaborationActivitySync from \"sap/fe/core/controllerextensions/collaboration/ActivitySync\";\nimport { Activity } from \"sap/fe/core/controllerextensions/collaboration/CollaborationCommon\";\nimport draft from \"sap/fe/core/controllerextensions/editFlow/draft\";\nimport type { EnhanceWithUI5 } from \"sap/fe/core/helpers/ClassSupport\";\nimport KeepAliveHelper from \"sap/fe/core/helpers/KeepAliveHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport FieldWrapper from \"sap/fe/macros/controls/FieldWrapper\";\nimport type FileWrapper from \"sap/fe/macros/controls/FileWrapper\";\nimport FieldAPI from \"sap/fe/macros/field/FieldAPI\";\nimport type Button from \"sap/m/Button\";\nimport IllustratedMessage, { $IllustratedMessageSettings } from \"sap/m/IllustratedMessage\";\nimport IllustratedMessageType from \"sap/m/IllustratedMessageType\";\nimport mobilelibrary from \"sap/m/library\";\nimport type Link from \"sap/m/Link\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport ResponsivePopover, { $ResponsivePopoverSettings } from \"sap/m/ResponsivePopover\";\nimport type Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport type CustomData from \"sap/ui/core/CustomData\";\nimport IconPool from \"sap/ui/core/IconPool\";\nimport type Controller from \"sap/ui/core/mvc/Controller\";\nimport { system } from \"sap/ui/Device\";\nimport type { default as MdcLink } from \"sap/ui/mdc/Link\";\nimport Filter from \"sap/ui/model/Filter\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataContextBinding from \"sap/ui/model/odata/v4/ODataContextBinding\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type FileUploader from \"sap/ui/unified/FileUploader\";\nimport FileUploaderParameter from \"sap/ui/unified/FileUploaderParameter\";\nimport openWindow from \"sap/ui/util/openWindow\";\n\n/**\n * Gets the binding used for collaboration notifications.\n *\n * @param field\n * @returns The binding\n */\nfunction getCollaborationBinding(field: Control): ODataListBinding | ODataContextBinding {\n\tlet binding = (field.getBindingContext() as Context).getBinding();\n\n\tif (!binding.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\tconst oView = CommonUtils.getTargetView(field);\n\t\tbinding = (oView.getBindingContext() as Context).getBinding();\n\t}\n\n\treturn binding;\n}\n\n/**\n * Static class used by \"sap.ui.mdc.Field\" during runtime\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst FieldRuntime = {\n\tresetChangesHandler: undefined as any,\n\tuploadPromises: undefined as any,\n\n\t/**\n\t * Triggers an internal navigation on the link pertaining to DataFieldWithNavigationPath.\n\t *\n\t * @param oSource Source of the press event\n\t * @param oController Instance of the controller\n\t * @param sNavPath The navigation path\n\t */\n\tonDataFieldWithNavigationPath: function (oSource: Control, oController: PageController, sNavPath: string) {\n\t\tif (oController._routing) {\n\t\t\tlet oBindingContext = oSource.getBindingContext() as Context;\n\t\t\tconst oView = CommonUtils.getTargetView(oSource),\n\t\t\t\toMetaModel = oBindingContext.getModel().getMetaModel(),\n\t\t\t\tfnNavigate = function (oContext?: any) {\n\t\t\t\t\tif (oContext) {\n\t\t\t\t\t\toBindingContext = oContext;\n\t\t\t\t\t}\n\t\t\t\t\toController._routing.navigateToTarget(oBindingContext, sNavPath, true);\n\t\t\t\t};\n\t\t\t// Show draft loss confirmation dialog in case of Object page\n\t\t\tif ((oView.getViewData() as any).converterType === \"ObjectPage\" && !ModelHelper.isStickySessionSupported(oMetaModel)) {\n\t\t\t\tdraft.processDataLossOrDraftDiscardConfirmation(\n\t\t\t\t\tfnNavigate,\n\t\t\t\t\tFunction.prototype,\n\t\t\t\t\toBindingContext,\n\t\t\t\t\toView.getController(),\n\t\t\t\t\ttrue,\n\t\t\t\t\tdraft.NavigationType.ForwardNavigation\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tfnNavigate();\n\t\t\t}\n\t\t} else {\n\t\t\tLog.error(\n\t\t\t\t\"FieldRuntime: No routing listener controller extension found. Internal navigation aborted.\",\n\t\t\t\t\"sap.fe.macros.field.FieldRuntime\",\n\t\t\t\t\"onDataFieldWithNavigationPath\"\n\t\t\t);\n\t\t}\n\t},\n\tisDraftIndicatorVisible: function (\n\t\tsPropertyPath: any,\n\t\tsSemanticKeyHasDraftIndicator: any,\n\t\tHasDraftEntity: any,\n\t\tIsActiveEntity: any,\n\t\thideDraftInfo: any\n\t) {\n\t\tif (IsActiveEntity !== undefined && HasDraftEntity !== undefined && (!IsActiveEntity || HasDraftEntity) && !hideDraftInfo) {\n\t\t\treturn sPropertyPath === sSemanticKeyHasDraftIndicator;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\t/**\n\t * Handler for the validateFieldGroup event.\n\t *\n\t * @function\n\t * @name onValidateFieldGroup\n\t * @param oController The controller of the page containing the field\n\t * @param oEvent The event object passed by the validateFieldGroup event\n\t */\n\tonValidateFieldGroup: function (oController: object, oEvent: object) {\n\t\tconst oFEController = FieldRuntime._getExtensionController(oController);\n\t\toFEController._sideEffects.handleFieldGroupChange(oEvent);\n\t},\n\t/**\n\t * Handler for the change event.\n\t * Store field group IDs of this field for requesting side effects when required.\n\t * We store them here to ensure a change in the value of the field has taken place.\n\t *\n\t * @function\n\t * @name handleChange\n\t * @param oController The controller of the page containing the field\n\t * @param oEvent The event object passed by the change event\n\t */\n\thandleChange: function (oController: object, oEvent: Event) {\n\t\tconst oSourceField = oEvent.getSource() as Control,\n\t\t\tbIsTransient = oSourceField && (oSourceField.getBindingContext() as any).isTransient(),\n\t\t\tpValueResolved = oEvent.getParameter(\"promise\") || Promise.resolve(),\n\t\t\toSource = oEvent.getSource(),\n\t\t\tbValid = oEvent.getParameter(\"valid\"),\n\t\t\tfieldValidity = this.getFieldStateOnChange(oEvent).state[\"validity\"];\n\n\t\t// TODO: currently we have undefined and true... and our creation row implementation relies on this.\n\t\t// I would move this logic to this place as it's hard to understand for field consumer\n\n\t\tpValueResolved\n\t\t\t.then(function () {\n\t\t\t\t// The event is gone. For now we'll just recreate it again\n\t\t\t\t(oEvent as any).oSource = oSource;\n\t\t\t\t(oEvent as any).mParameters = {\n\t\t\t\t\tvalid: bValid\n\t\t\t\t};\n\t\t\t\t(FieldAPI as any).handleChange(oEvent, oController);\n\t\t\t})\n\t\t\t.catch(function (/*oError: any*/) {\n\t\t\t\t// The event is gone. For now we'll just recreate it again\n\t\t\t\t(oEvent as any).oSource = oSource;\n\t\t\t\t(oEvent as any).mParameters = {\n\t\t\t\t\tvalid: false\n\t\t\t\t};\n\n\t\t\t\t// as the UI might need to react on. We could provide a parameter to inform if validation\n\t\t\t\t// was successful?\n\t\t\t\t(FieldAPI as any).handleChange(oEvent, oController);\n\t\t\t});\n\n\t\t// Use the FE Controller instead of the extensionAPI to access internal FE controllers\n\t\tconst oFEController = FieldRuntime._getExtensionController(oController);\n\n\t\toFEController.editFlow.syncTask(pValueResolved);\n\n\t\t// if the context is transient, it means the request would fail anyway as the record does not exist in reality\n\t\t// TODO: should the request be made in future if the context is transient?\n\t\tif (bIsTransient) {\n\t\t\treturn;\n\t\t}\n\n\t\t// SIDE EFFECTS\n\t\toFEController._sideEffects.handleFieldChange(oEvent, fieldValidity, pValueResolved);\n\n\t\t// Collaboration Draft Activity Sync\n\t\tconst oField = oEvent.getSource() as Control,\n\t\t\tbCollaborationEnabled = CollaborationActivitySync.isConnected(oField);\n\n\t\tif (bCollaborationEnabled && fieldValidity) {\n\t\t\t/* TODO: for now we use always the first binding part (so in case of composite bindings like amount and\n\t\t\t\t\tunit or currency only the amount is considered) */\n\t\t\tconst binding = getCollaborationBinding(oField);\n\n\t\t\tconst data = [\n\t\t\t\t...(((oField.getBindingInfo(\"value\") || oField.getBindingInfo(\"selected\")) as any)?.parts || []),\n\t\t\t\t...((oField.getBindingInfo(\"additionalValue\") as any)?.parts || [])\n\t\t\t].map(function (part: any) {\n\t\t\t\tif (part) {\n\t\t\t\t\treturn `${oField.getBindingContext()?.getPath()}/${part.path}`;\n\t\t\t\t}\n\t\t\t}) as [];\n\n\t\t\tconst updateCollaboration = () => {\n\t\t\t\tif (binding.hasPendingChanges()) {\n\t\t\t\t\t// The value has been changed by the user --> wait until it's sent to the server before sending a notification to other users\n\t\t\t\t\tbinding.attachEventOnce(\"patchCompleted\", function () {\n\t\t\t\t\t\tCollaborationActivitySync.send(oField, Activity.Change, data);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// No changes --> send a Undo notification\n\t\t\t\t\tCollaborationActivitySync.send(oField, Activity.Undo, data);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (oSourceField.isA(\"sap.ui.mdc.Field\")) {\n\t\t\t\tpValueResolved\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tupdateCollaboration();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tupdateCollaboration();\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tupdateCollaboration();\n\t\t\t}\n\t\t}\n\t},\n\n\thandleLiveChange: function (event: any) {\n\t\t// Collaboration Draft Activity Sync\n\t\tconst field = event.getSource();\n\n\t\tif (CollaborationActivitySync.isConnected(field)) {\n\t\t\t/* TODO: for now we use always the first binding part (so in case of composite bindings like amount and\n\t\t\t\t\tunit or currency only the amount is considered) */\n\t\t\tconst bindingPath = field.getBindingInfo(\"value\").parts[0].path;\n\t\t\tconst fullPath = `${field.getBindingContext().getPath()}/${bindingPath}`;\n\t\t\tCollaborationActivitySync.send(field, Activity.LiveChange, fullPath);\n\n\t\t\t// If the user reverted the change no change event is sent therefore we have to handle it here\n\t\t\tif (!this.resetChangesHandler) {\n\t\t\t\tthis.resetChangesHandler = () => {\n\t\t\t\t\t// We need to wait a little bit for the focus to be updated\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (field.isA(\"sap.ui.mdc.Field\")) {\n\t\t\t\t\t\t\tconst focusedControl = Core.byId(Core.getCurrentFocusedControlId());\n\t\t\t\t\t\t\tif (focusedControl?.getParent() === field) {\n\t\t\t\t\t\t\t\t// We're still un the same MDC Field --> do nothing\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfield.detachBrowserEvent(\"focusout\", this.resetChangesHandler);\n\t\t\t\t\t\tdelete this.resetChangesHandler;\n\t\t\t\t\t\tCollaborationActivitySync.send(field, Activity.Undo, fullPath);\n\t\t\t\t\t}, 100);\n\t\t\t\t};\n\t\t\t\tfield.attachBrowserEvent(\"focusout\", this.resetChangesHandler);\n\t\t\t}\n\t\t}\n\t},\n\n\thandleOpenPicker: function (oEvent: any) {\n\t\t// Collaboration Draft Activity Sync\n\t\tconst oField = oEvent.getSource();\n\t\tconst bCollaborationEnabled = CollaborationActivitySync.isConnected(oField);\n\n\t\tif (bCollaborationEnabled) {\n\t\t\tconst sBindingPath = oField.getBindingInfo(\"value\").parts[0].path;\n\t\t\tconst sFullPath = `${oField.getBindingContext().getPath()}/${sBindingPath}`;\n\t\t\tCollaborationActivitySync.send(oField, Activity.LiveChange, sFullPath);\n\t\t}\n\t},\n\thandleClosePicker: function (oEvent: any) {\n\t\t// Collaboration Draft Activity Sync\n\t\tconst oField = oEvent.getSource();\n\t\tconst bCollaborationEnabled = CollaborationActivitySync.isConnected(oField);\n\n\t\tif (bCollaborationEnabled) {\n\t\t\tconst binding = getCollaborationBinding(oField);\n\t\t\tif (!binding.hasPendingChanges()) {\n\t\t\t\t// If there are no pending changes, the picker was closed without changing the value --> send a UNDO notification\n\t\t\t\t// In case there were changes, notifications are managed in handleChange\n\t\t\t\tconst sBindingPath = oField.getBindingInfo(\"value\").parts[0].path;\n\t\t\t\tconst sFullPath = `${oField.getBindingContext().getPath()}/${sBindingPath}`;\n\t\t\t\tCollaborationActivitySync.send(oField, Activity.Undo, sFullPath);\n\t\t\t}\n\t\t}\n\t},\n\n\t_sendCollaborationMessageForFileUploader(fileUploader: FileUploader, activity: Activity) {\n\t\tconst isCollaborationEnabled = CollaborationActivitySync.isConnected(fileUploader);\n\n\t\tif (isCollaborationEnabled) {\n\t\t\tconst bindingPath = fileUploader.getParent()?.getProperty(\"propertyPath\");\n\t\t\tconst fullPath = `${fileUploader.getBindingContext()?.getPath()}/${bindingPath}`;\n\t\t\tCollaborationActivitySync.send(fileUploader, activity, fullPath);\n\t\t}\n\t},\n\n\thandleOpenUploader: function (event: Event) {\n\t\t// Collaboration Draft Activity Sync\n\t\tconst fileUploader = event.getSource() as FileUploader;\n\t\tFieldRuntime._sendCollaborationMessageForFileUploader(fileUploader, Activity.LiveChange);\n\t},\n\thandleCloseUploader: function (event: Event) {\n\t\t// Collaboration Draft Activity Sync\n\t\tconst fileUploader = event.getSource() as FileUploader;\n\t\tFieldRuntime._sendCollaborationMessageForFileUploader(fileUploader, Activity.Undo);\n\t},\n\n\t/**\n\t * Gets the field value and validity on a change event.\n\t *\n\t * @function\n\t * @name fieldValidityOnChange\n\t * @param oEvent The event object passed by the change event\n\t * @returns Field value and validity\n\t */\n\tgetFieldStateOnChange: function (oEvent: Event): any {\n\t\tlet oSourceField = oEvent.getSource() as any,\n\t\t\tmFieldState = {};\n\t\tconst _isBindingStateMessages = function (oBinding: any) {\n\t\t\treturn oBinding && oBinding.getDataState() ? oBinding.getDataState().getInvalidValue() === undefined : true;\n\t\t};\n\t\tif (oSourceField.isA(\"sap.fe.macros.field.FieldAPI\")) {\n\t\t\toSourceField = (oSourceField as EnhanceWithUI5<FieldAPI>).getContent();\n\t\t}\n\n\t\tif (oSourceField.isA(FieldWrapper.getMetadata().getName()) && oSourceField.getEditMode() === \"Editable\") {\n\t\t\toSourceField = oSourceField.getContentEdit()[0];\n\t\t}\n\n\t\tif (oSourceField.isA(\"sap.ui.mdc.Field\")) {\n\t\t\tlet bIsValid = oEvent.getParameter(\"valid\") || oEvent.getParameter(\"isValid\");\n\t\t\tif (bIsValid === undefined) {\n\t\t\t\tif (oSourceField.getMaxConditions() === 1) {\n\t\t\t\t\tconst oValueBindingInfo = oSourceField.getBindingInfo(\"value\");\n\t\t\t\t\tbIsValid = _isBindingStateMessages(oValueBindingInfo && oValueBindingInfo.binding);\n\t\t\t\t}\n\t\t\t\tif (oSourceField.getValue() === \"\" && !oSourceField.getProperty(\"required\")) {\n\t\t\t\t\tbIsValid = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmFieldState = {\n\t\t\t\tfieldValue: oSourceField.getValue(),\n\t\t\t\tvalidity: !!bIsValid\n\t\t\t};\n\t\t} else {\n\t\t\t// oSourceField extends from a FileUploader || Input || is a CheckBox\n\t\t\tconst oBinding =\n\t\t\t\toSourceField.getBinding(\"uploadUrl\") || oSourceField.getBinding(\"value\") || oSourceField.getBinding(\"selected\");\n\t\t\tmFieldState = {\n\t\t\t\tfieldValue: oBinding && oBinding.getValue(),\n\t\t\t\tvalidity: _isBindingStateMessages(oBinding)\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tfield: oSourceField,\n\t\t\tstate: mFieldState\n\t\t};\n\t},\n\t_fnFixHashQueryString: function (sCurrentHash: any) {\n\t\tif (sCurrentHash && sCurrentHash.indexOf(\"?\") !== -1) {\n\t\t\t// sCurrentHash can contain query string, cut it off!\n\t\t\tsCurrentHash = sCurrentHash.split(\"?\")[0];\n\t\t}\n\t\treturn sCurrentHash;\n\t},\n\t_fnGetLinkInformation: function (_oSource: any, _oLink: any, _sPropertyPath: any, _sValue: any, fnSetActive: any) {\n\t\tconst oModel = _oLink && _oLink.getModel();\n\t\tconst oMetaModel = oModel && oModel.getMetaModel();\n\t\tconst sSemanticObjectName = _sValue || (_oSource && _oSource.getValue());\n\t\tconst oView = _oLink && CommonUtils.getTargetView(_oLink);\n\t\tconst oInternalModelContext = oView && oView.getBindingContext(\"internal\");\n\t\tconst oAppComponent = oView && CommonUtils.getAppComponent(oView);\n\t\tconst oShellServiceHelper = oAppComponent && oAppComponent.getShellServices();\n\t\tconst pGetLinksPromise = oShellServiceHelper && oShellServiceHelper.getLinksWithCache([[{ semanticObject: sSemanticObjectName }]]);\n\t\tconst aSemanticObjectUnavailableActions =\n\t\t\toMetaModel && oMetaModel.getObject(`${_sPropertyPath}@com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions`);\n\t\treturn {\n\t\t\tSemanticObjectName: sSemanticObjectName,\n\t\t\tSemanticObjectFullPath: _sPropertyPath, //sSemanticObjectFullPath,\n\t\t\tMetaModel: oMetaModel,\n\t\t\tInternalModelContext: oInternalModelContext,\n\t\t\tShellServiceHelper: oShellServiceHelper,\n\t\t\tGetLinksPromise: pGetLinksPromise,\n\t\t\tSemanticObjectUnavailableActions: aSemanticObjectUnavailableActions,\n\t\t\tfnSetActive: fnSetActive\n\t\t};\n\t},\n\t_fnQuickViewHasNewCondition: function (oSemanticObjectPayload: any, _oLinkInfo: any) {\n\t\tif (oSemanticObjectPayload && oSemanticObjectPayload.path && oSemanticObjectPayload.path === _oLinkInfo.SemanticObjectFullPath) {\n\t\t\t// Got the resolved Semantic Object!\n\t\t\tconst bResultingNewConditionForConditionalWrapper =\n\t\t\t\toSemanticObjectPayload[!_oLinkInfo.SemanticObjectUnavailableActions ? \"HasTargetsNotFiltered\" : \"HasTargets\"];\n\t\t\t_oLinkInfo.fnSetActive(!!bResultingNewConditionForConditionalWrapper);\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t_fnQuickViewSetNewConditionForConditionalWrapper: function (_oLinkInfo: any, _oFinalSemanticObjects: any) {\n\t\tif (_oFinalSemanticObjects[_oLinkInfo.SemanticObjectName]) {\n\t\t\tlet sTmpPath, oSemanticObjectPayload;\n\t\t\tconst aSemanticObjectPaths = Object.keys(_oFinalSemanticObjects[_oLinkInfo.SemanticObjectName]);\n\t\t\tfor (const iPathsCount in aSemanticObjectPaths) {\n\t\t\t\tsTmpPath = aSemanticObjectPaths[iPathsCount];\n\t\t\t\toSemanticObjectPayload =\n\t\t\t\t\t_oFinalSemanticObjects[_oLinkInfo.SemanticObjectName] &&\n\t\t\t\t\t_oFinalSemanticObjects[_oLinkInfo.SemanticObjectName][sTmpPath];\n\t\t\t\tif (FieldRuntime._fnQuickViewHasNewCondition(oSemanticObjectPayload, _oLinkInfo)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_fnUpdateSemanticObjectsTargetModel: function (oEvent: any, sValue: any, oControl: any, _sPropertyPath: any) {\n\t\tconst oSource = oEvent && oEvent.getSource();\n\t\tlet fnSetActive;\n\t\tif (oControl.isA(\"sap.m.ObjectStatus\")) {\n\t\t\tfnSetActive = (bActive: boolean) => oControl.setActive(bActive);\n\t\t}\n\t\tif (oControl.isA(\"sap.m.ObjectIdentifier\")) {\n\t\t\tfnSetActive = (bActive: boolean) => oControl.setTitleActive(bActive);\n\t\t}\n\t\tconst oConditionalWrapper = oControl && oControl.getParent();\n\t\tif (oConditionalWrapper && oConditionalWrapper.isA(\"sap.fe.macros.controls.ConditionalWrapper\")) {\n\t\t\tfnSetActive = (bActive: boolean) => oConditionalWrapper.setCondition(bActive);\n\t\t}\n\t\tif (fnSetActive !== undefined) {\n\t\t\tconst oLinkInfo = FieldRuntime._fnGetLinkInformation(oSource, oControl, _sPropertyPath, sValue, fnSetActive);\n\t\t\toLinkInfo.fnSetActive = fnSetActive;\n\t\t\tconst sCurrentHash = FieldRuntime._fnFixHashQueryString(CommonUtils.getAppComponent(oControl).getShellServices().getHash());\n\t\t\tCommonUtils.updateSemanticTargets(\n\t\t\t\t[oLinkInfo.GetLinksPromise],\n\t\t\t\t[{ semanticObject: oLinkInfo.SemanticObjectName, path: oLinkInfo.SemanticObjectFullPath }],\n\t\t\t\toLinkInfo.InternalModelContext,\n\t\t\t\tsCurrentHash\n\t\t\t)\n\t\t\t\t.then(function (oFinalSemanticObjects: any) {\n\t\t\t\t\tif (oFinalSemanticObjects) {\n\t\t\t\t\t\tFieldRuntime._fnQuickViewSetNewConditionForConditionalWrapper(oLinkInfo, oFinalSemanticObjects);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\tLog.error(\"Cannot update Semantic Targets model\", oError);\n\t\t\t\t});\n\t\t}\n\t},\n\t_checkControlHasModelAndBindingContext(_control: Control) {\n\t\tif (!_control.getModel() || !_control.getBindingContext()) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t},\n\t_checkCustomDataValueBeforeUpdatingSemanticObjectModel(_control: Control, propertyPath: string, aCustomData: CustomData[]): void {\n\t\tlet sSemanticObjectPathValue: any;\n\t\tlet oValueBinding;\n\t\tconst _fnCustomDataValueIsString = function (semanticObjectPathValue: any) {\n\t\t\treturn !(semanticObjectPathValue !== null && typeof semanticObjectPathValue === \"object\");\n\t\t};\n\t\t// remove technical custom datas set by UI5\n\t\taCustomData = aCustomData.filter((customData) => customData.getKey() !== \"sap-ui-custom-settings\");\n\t\tfor (const index in aCustomData) {\n\t\t\tsSemanticObjectPathValue = aCustomData[index].getValue();\n\t\t\tif (!sSemanticObjectPathValue && _fnCustomDataValueIsString(sSemanticObjectPathValue)) {\n\t\t\t\toValueBinding = aCustomData[index].getBinding(\"value\");\n\t\t\t\tif (oValueBinding) {\n\t\t\t\t\toValueBinding.attachEventOnce(\"change\", function (_oChangeEvent: any) {\n\t\t\t\t\t\tFieldRuntime._fnUpdateSemanticObjectsTargetModel(_oChangeEvent, null, _control, propertyPath);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (_fnCustomDataValueIsString(sSemanticObjectPathValue)) {\n\t\t\t\tFieldRuntime._fnUpdateSemanticObjectsTargetModel(null, sSemanticObjectPathValue, _control, propertyPath);\n\t\t\t}\n\t\t}\n\t},\n\tLinkModelContextChange: function (oEvent: any, sProperty: any, sPathToProperty: any): void {\n\t\tconst control = oEvent.getSource();\n\t\tif (FieldRuntime._checkControlHasModelAndBindingContext(control)) {\n\t\t\tconst sPropertyPath = `${sPathToProperty}/${sProperty}`;\n\t\t\tconst mdcLink = control.getDependents().length ? control.getDependents()[0] : undefined;\n\t\t\tconst aCustomData = mdcLink?.getCustomData();\n\t\t\tif (aCustomData && aCustomData.length > 0) {\n\t\t\t\tFieldRuntime._checkCustomDataValueBeforeUpdatingSemanticObjectModel(control, sPropertyPath, aCustomData);\n\t\t\t}\n\t\t}\n\t},\n\topenExternalLink: function (event: Event) {\n\t\tconst source = event.getSource() as any;\n\t\tif (source.data(\"url\") && source.getProperty(\"text\") !== \"\") {\n\t\t\t// This opens the link in the same tab as the link. It was done to be more consistent with other type of links.\n\t\t\topenWindow(source.data(\"url\"), \"_self\");\n\t\t}\n\t},\n\tcreatePopoverWithNoTargets: function (mdcLink: MdcLink) {\n\t\tconst mdcLinkId = mdcLink.getId();\n\t\tconst illustratedMessageSettings: $IllustratedMessageSettings = {\n\t\t\ttitle: getResourceModel(mdcLink as unknown as Control).getText(\"M_ILLUSTRATEDMESSAGE_TITLE\"),\n\t\t\tdescription: getResourceModel(mdcLink as unknown as Control).getText(\"M_ILLUSTRATEDMESSAGE_DESCRIPTION\"),\n\t\t\tenableFormattedText: true,\n\t\t\tillustrationSize: \"Dot\", // IllustratedMessageSize.Dot not available in \"@types/openui5\": \"1.107.0\"\n\t\t\tillustrationType: IllustratedMessageType.Tent\n\t\t};\n\t\tconst illustratedMessage = new IllustratedMessage(`${mdcLinkId}-illustratedmessage`, illustratedMessageSettings);\n\t\tconst popoverSettings: $ResponsivePopoverSettings = {\n\t\t\thorizontalScrolling: false,\n\t\t\tshowHeader: system.phone,\n\t\t\tplacement: mobilelibrary.PlacementType.Auto,\n\t\t\tcontent: [illustratedMessage],\n\t\t\tafterClose: function (event) {\n\t\t\t\tif (event.getSource()) {\n\t\t\t\t\tevent.getSource().destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn new ResponsivePopover(`${mdcLinkId}-popover`, popoverSettings);\n\t},\n\topenLink: async function (mdcLink: MdcLink, sapmLink: Link) {\n\t\ttry {\n\t\t\tconst hRef = await mdcLink.getTriggerHref();\n\t\t\tif (!hRef) {\n\t\t\t\ttry {\n\t\t\t\t\tconst linkItems = await mdcLink.retrieveLinkItems();\n\t\t\t\t\tif (linkItems?.length === 0 && (mdcLink as any).getPayload().hasQuickViewFacets === \"false\") {\n\t\t\t\t\t\tconst popover: ResponsivePopover = FieldRuntime.createPopoverWithNoTargets(mdcLink);\n\t\t\t\t\t\tmdcLink.addDependent(popover);\n\t\t\t\t\t\tpopover.openBy(sapmLink as unknown as Control);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait mdcLink.open(sapmLink as unknown as Control);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tLog.error(`Cannot retrieve the QuickView Popover dialog: ${error}`);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst view = CommonUtils.getTargetView(sapmLink);\n\t\t\t\tconst appComponent = CommonUtils.getAppComponent(view);\n\t\t\t\tconst shellService = appComponent.getShellServices();\n\t\t\t\tconst shellHash = shellService.parseShellHash(hRef);\n\t\t\t\tconst navArgs = {\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\tsemanticObject: shellHash.semanticObject,\n\t\t\t\t\t\taction: shellHash.action\n\t\t\t\t\t},\n\t\t\t\t\tparams: shellHash.params\n\t\t\t\t};\n\n\t\t\t\tKeepAliveHelper.storeControlRefreshStrategyForHash(view, shellHash);\n\n\t\t\t\tif (CommonUtils.isStickyEditMode(sapmLink as unknown as Control) !== true) {\n\t\t\t\t\t//URL params and xappState has been generated earlier hence using toExternal\n\t\t\t\t\tshellService.toExternal(navArgs as any, appComponent);\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst newHref = await shellService.hrefForExternalAsync(navArgs, appComponent);\n\t\t\t\t\t\topenWindow(newHref);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tLog.error(`Error while retireving hrefForExternal : ${error}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tLog.error(`Error triggering link Href: ${error}`);\n\t\t}\n\t},\n\tpressLink: async function (oEvent: any): Promise<void> {\n\t\tconst oSource = oEvent.getSource();\n\t\tconst sapmLink = oSource.isA(\"sap.m.ObjectIdentifier\")\n\t\t\t? oSource.findElements(false, (elem: Event) => {\n\t\t\t\t\treturn elem.isA(\"sap.m.Link\");\n\t\t\t  })[0]\n\t\t\t: oSource;\n\n\t\tif (oSource.getDependents() && oSource.getDependents().length > 0 && sapmLink.getProperty(\"text\") !== \"\") {\n\t\t\tconst oFieldInfo = oSource.getDependents()[0];\n\t\t\tif (oFieldInfo && oFieldInfo.isA(\"sap.ui.mdc.Link\")) {\n\t\t\t\tawait FieldRuntime.openLink(oFieldInfo, sapmLink);\n\t\t\t}\n\t\t}\n\t\treturn sapmLink;\n\t},\n\tuploadStream: function (controller: Controller, event: Event) {\n\t\tconst fileUploader = event.getSource() as FileUploader,\n\t\t\tFEController = FieldRuntime._getExtensionController(controller),\n\t\t\tfileWrapper = fileUploader.getParent() as unknown as FileWrapper,\n\t\t\tuploadUrl = fileWrapper.getUploadUrl();\n\n\t\tif (uploadUrl !== \"\") {\n\t\t\tfileWrapper.setUIBusy(true);\n\n\t\t\t// use uploadUrl from FileWrapper which returns a canonical URL\n\t\t\tfileUploader.setUploadUrl(uploadUrl);\n\n\t\t\tfileUploader.removeAllHeaderParameters();\n\t\t\tconst token = (fileUploader.getModel() as any)?.getHttpHeaders()[\"X-CSRF-Token\"];\n\t\t\tif (token) {\n\t\t\t\tconst headerParameterCSRFToken = new FileUploaderParameter();\n\t\t\t\theaderParameterCSRFToken.setName(\"x-csrf-token\");\n\t\t\t\theaderParameterCSRFToken.setValue(token);\n\t\t\t\tfileUploader.addHeaderParameter(headerParameterCSRFToken);\n\t\t\t}\n\t\t\tconst eTag = (fileUploader.getBindingContext() as Context | undefined | null)?.getProperty(\"@odata.etag\");\n\t\t\tif (eTag) {\n\t\t\t\tconst headerParameterETag = new FileUploaderParameter();\n\t\t\t\theaderParameterETag.setName(\"If-Match\");\n\t\t\t\t// Ignore ETag in collaboration draft\n\t\t\t\theaderParameterETag.setValue(CollaborationActivitySync.isConnected(fileUploader) ? \"*\" : eTag);\n\t\t\t\tfileUploader.addHeaderParameter(headerParameterETag);\n\t\t\t}\n\t\t\tconst headerParameterAccept = new FileUploaderParameter();\n\t\t\theaderParameterAccept.setName(\"Accept\");\n\t\t\theaderParameterAccept.setValue(\"application/json\");\n\t\t\tfileUploader.addHeaderParameter(headerParameterAccept);\n\n\t\t\t// synchronize upload with other requests\n\t\t\tconst uploadPromise = new Promise((resolve: any, reject: any) => {\n\t\t\t\tthis.uploadPromises = this.uploadPromises || {};\n\t\t\t\tthis.uploadPromises[fileUploader.getId()] = {\n\t\t\t\t\tresolve: resolve,\n\t\t\t\t\treject: reject\n\t\t\t\t};\n\t\t\t\tfileUploader.upload();\n\t\t\t});\n\t\t\tFEController.editFlow.syncTask(uploadPromise);\n\t\t} else {\n\t\t\tMessageBox.error(getResourceModel(controller).getText(\"M_FIELD_FILEUPLOADER_ABORTED_TEXT\"));\n\t\t}\n\t},\n\n\thandleUploadComplete: function (\n\t\tevent: Event,\n\t\tpropertyFileName: { path: string } | undefined,\n\t\tpropertyPath: string,\n\t\tcontroller: Controller\n\t) {\n\t\tconst status = event.getParameter(\"status\"),\n\t\t\tfileUploader = event.getSource() as FileUploader,\n\t\t\tfileWrapper = fileUploader.getParent() as unknown as FileWrapper;\n\n\t\tfileWrapper.setUIBusy(false);\n\n\t\tconst context = fileUploader.getBindingContext() as Context | undefined | null;\n\t\tif (status === 0 || status >= 400) {\n\t\t\tthis._displayMessageForFailedUpload(event);\n\t\t\tthis.uploadPromises[fileUploader.getId()].reject();\n\t\t} else {\n\t\t\tconst newETag = event.getParameter(\"headers\").etag;\n\n\t\t\tif (newETag) {\n\t\t\t\t// set new etag for filename update, but without sending patch request\n\t\t\t\tcontext?.setProperty(\"@odata.etag\", newETag, null as any);\n\t\t\t}\n\n\t\t\t// set filename for link text\n\t\t\tif (propertyFileName?.path) {\n\t\t\t\tcontext?.setProperty(propertyFileName.path, fileUploader.getValue());\n\t\t\t}\n\n\t\t\t// delete the avatar cache that not gets updated otherwise\n\t\t\tfileWrapper.avatar?.refreshAvatarCacheBusting();\n\n\t\t\tthis._callSideEffectsForStream(event, fileWrapper, controller);\n\n\t\t\tthis.uploadPromises[fileUploader.getId()].resolve();\n\t\t}\n\n\t\tdelete this.uploadPromises[fileUploader.getId()];\n\n\t\t// Collaboration Draft Activity Sync\n\t\tconst isCollaborationEnabled = CollaborationActivitySync.isConnected(fileUploader);\n\t\tif (!isCollaborationEnabled || !context) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst notificationData = [`${context.getPath()}/${propertyPath}`];\n\t\tif (propertyFileName?.path) {\n\t\t\tnotificationData.push(`${context.getPath()}/${propertyFileName.path}`);\n\t\t}\n\n\t\tlet binding = context.getBinding();\n\t\tif (!binding.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\t\tconst oView = CommonUtils.getTargetView(fileUploader);\n\t\t\tbinding = (oView.getBindingContext() as Context).getBinding();\n\t\t}\n\t\tif (binding.hasPendingChanges()) {\n\t\t\tbinding.attachEventOnce(\"patchCompleted\", () => {\n\t\t\t\tCollaborationActivitySync.send(fileWrapper, Activity.Change, notificationData);\n\t\t\t});\n\t\t} else {\n\t\t\tCollaborationActivitySync.send(fileWrapper, Activity.Change, notificationData);\n\t\t}\n\t},\n\n\t_displayMessageForFailedUpload: function (oEvent: any) {\n\t\t// handling of backend errors\n\t\tconst sError = oEvent.getParameter(\"responseRaw\") || oEvent.getParameter(\"response\");\n\t\tlet sMessageText, oError;\n\t\ttry {\n\t\t\toError = sError && JSON.parse(sError);\n\t\t\tsMessageText = oError.error && oError.error.message;\n\t\t} catch (e) {\n\t\t\tsMessageText = sError || getResourceModel(oEvent.getSource()).getText(\"M_FIELD_FILEUPLOADER_ABORTED_TEXT\");\n\t\t}\n\t\tMessageBox.error(sMessageText);\n\t},\n\n\tremoveStream: function (event: Event, propertyFileName: { path: string } | undefined, propertyPath: string, controller: Controller) {\n\t\tconst deleteButton = event.getSource() as Button;\n\t\tconst fileWrapper = deleteButton.getParent() as unknown as FileWrapper;\n\t\tconst context = fileWrapper.getBindingContext() as Context;\n\n\t\t// streams are removed by assigning the null value\n\t\tcontext.setProperty(propertyPath, null);\n\t\t// When setting the property to null, the uploadUrl (@@MODEL.format) is set to \"\" by the model\n\t\t//\twith that another upload is not possible before refreshing the page\n\t\t// (refreshing the page would recreate the URL)\n\t\t//\tThis is the workaround:\n\t\t//\tWe set the property to undefined only on the frontend which will recreate the uploadUrl\n\t\tcontext.setProperty(propertyPath, undefined, null as any);\n\n\t\tthis._callSideEffectsForStream(event, fileWrapper, controller);\n\n\t\t// Collaboration Draft Activity Sync\n\t\tconst bCollaborationEnabled = CollaborationActivitySync.isConnected(deleteButton);\n\t\tif (bCollaborationEnabled) {\n\t\t\tlet binding = context.getBinding();\n\t\t\tif (!binding.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\t\t\tconst oView = CommonUtils.getTargetView(deleteButton);\n\t\t\t\tbinding = (oView.getBindingContext() as Context).getBinding();\n\t\t\t}\n\n\t\t\tconst data = [`${context.getPath()}/${propertyPath}`];\n\t\t\tif (propertyFileName?.path) {\n\t\t\t\tdata.push(`${context.getPath()}/${propertyFileName.path}`);\n\t\t\t}\n\t\t\tCollaborationActivitySync.send(deleteButton, Activity.LiveChange, data);\n\n\t\t\tbinding.attachEventOnce(\"patchCompleted\", function () {\n\t\t\t\tCollaborationActivitySync.send(deleteButton, Activity.Change, data);\n\t\t\t});\n\t\t}\n\t},\n\n\t_callSideEffectsForStream: function (oEvent: any, oControl: any, oController: any) {\n\t\tconst oFEController = FieldRuntime._getExtensionController(oController);\n\t\tif (oControl && oControl.getBindingContext().isTransient()) {\n\t\t\treturn;\n\t\t}\n\t\tif (oControl) {\n\t\t\toEvent.oSource = oControl;\n\t\t}\n\t\toFEController._sideEffects.handleFieldChange(oEvent, this.getFieldStateOnChange(oEvent).state[\"validity\"]);\n\t},\n\n\tgetIconForMimeType: function (sMimeType: any) {\n\t\treturn IconPool.getIconForMimeType(sMimeType);\n\t},\n\n\t/**\n\t * Method to retrieve text from value list for DataField.\n\t *\n\t * @function\n\t * @name retrieveTextFromValueList\n\t * @param sPropertyValue The property value of the datafield\n\t * @param sPropertyFullPath The property full path's\n\t * @param sDisplayFormat The display format for the datafield\n\t * @returns The formatted value in corresponding display format.\n\t */\n\tretrieveTextFromValueList: function (sPropertyValue: string, sPropertyFullPath: string, sDisplayFormat: string) {\n\t\tlet sTextProperty: string;\n\t\tlet oMetaModel;\n\t\tlet sPropertyName: string;\n\t\tif (sPropertyValue) {\n\t\t\toMetaModel = CommonHelper.getMetaModel();\n\t\t\tsPropertyName = oMetaModel.getObject(`${sPropertyFullPath}@sapui.name`);\n\t\t\treturn oMetaModel\n\t\t\t\t.requestValueListInfo(sPropertyFullPath, true)\n\t\t\t\t.then(function (mValueListInfo: any) {\n\t\t\t\t\t// take the \"\" one if exists, otherwise take the first one in the object TODO: to be discussed\n\t\t\t\t\tconst oValueListInfo = mValueListInfo[mValueListInfo[\"\"] ? \"\" : Object.keys(mValueListInfo)[0]];\n\t\t\t\t\tconst oValueListModel = oValueListInfo.$model;\n\t\t\t\t\tconst oMetaModelValueList = oValueListModel.getMetaModel();\n\t\t\t\t\tconst oParamWithKey = oValueListInfo.Parameters.find(function (oParameter: any) {\n\t\t\t\t\t\treturn oParameter.LocalDataProperty && oParameter.LocalDataProperty.$PropertyPath === sPropertyName;\n\t\t\t\t\t});\n\t\t\t\t\tif (oParamWithKey && !oParamWithKey.ValueListProperty) {\n\t\t\t\t\t\treturn Promise.reject(`Inconsistent value help annotation for ${sPropertyName}`);\n\t\t\t\t\t}\n\t\t\t\t\tconst oTextAnnotation = oMetaModelValueList.getObject(\n\t\t\t\t\t\t`/${oValueListInfo.CollectionPath}/${oParamWithKey.ValueListProperty}@com.sap.vocabularies.Common.v1.Text`\n\t\t\t\t\t);\n\n\t\t\t\t\tif (oTextAnnotation && oTextAnnotation.$Path) {\n\t\t\t\t\t\tsTextProperty = oTextAnnotation.$Path;\n\t\t\t\t\t\tconst oFilter = new Filter({\n\t\t\t\t\t\t\tpath: oParamWithKey.ValueListProperty,\n\t\t\t\t\t\t\toperator: \"EQ\",\n\t\t\t\t\t\t\tvalue1: sPropertyValue\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst oListBinding = oValueListModel.bindList(`/${oValueListInfo.CollectionPath}`, undefined, undefined, oFilter, {\n\t\t\t\t\t\t\t$select: sTextProperty\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn oListBinding.requestContexts(0, 2);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsDisplayFormat = \"Value\";\n\t\t\t\t\t\treturn sPropertyValue;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(function (aContexts: any) {\n\t\t\t\t\tconst sDescription = sTextProperty ? aContexts[0]?.getObject()[sTextProperty] : \"\";\n\t\t\t\t\tswitch (sDisplayFormat) {\n\t\t\t\t\t\tcase \"Description\":\n\t\t\t\t\t\t\treturn sDescription;\n\t\t\t\t\t\tcase \"DescriptionValue\":\n\t\t\t\t\t\t\treturn Core.getLibraryResourceBundle(\"sap.fe.core\").getText(\"C_FORMAT_FOR_TEXT_ARRANGEMENT\", [\n\t\t\t\t\t\t\t\tsDescription,\n\t\t\t\t\t\t\t\tsPropertyValue\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \"ValueDescription\":\n\t\t\t\t\t\t\treturn Core.getLibraryResourceBundle(\"sap.fe.core\").getText(\"C_FORMAT_FOR_TEXT_ARRANGEMENT\", [\n\t\t\t\t\t\t\t\tsPropertyValue,\n\t\t\t\t\t\t\t\tsDescription\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn sPropertyValue;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\tconst sMsg =\n\t\t\t\t\t\toError.status && oError.status === 404\n\t\t\t\t\t\t\t? `Metadata not found (${oError.status}) for value help of property ${sPropertyFullPath}`\n\t\t\t\t\t\t\t: oError.message;\n\t\t\t\t\tLog.error(sMsg);\n\t\t\t\t});\n\t\t}\n\t\treturn sPropertyValue;\n\t},\n\n\thandleTypeMissmatch: function (oEvent: any) {\n\t\tconst resourceModel = getResourceModel(oEvent.getSource());\n\t\tMessageBox.error(resourceModel.getText(\"M_FIELD_FILEUPLOADER_WRONG_MIMETYPE\"), {\n\t\t\tdetails:\n\t\t\t\t`<p><strong>${resourceModel.getText(\"M_FIELD_FILEUPLOADER_WRONG_MIMETYPE_DETAILS_SELECTED\")}</strong></p>${\n\t\t\t\t\toEvent.getParameters().mimeType\n\t\t\t\t}<br><br>` +\n\t\t\t\t`<p><strong>${resourceModel.getText(\"M_FIELD_FILEUPLOADER_WRONG_MIMETYPE_DETAILS_ALLOWED\")}</strong></p>${oEvent\n\t\t\t\t\t.getSource()\n\t\t\t\t\t.getMimeType()\n\t\t\t\t\t.toString()\n\t\t\t\t\t.replaceAll(\",\", \", \")}`,\n\t\t\tcontentWidth: \"150px\"\n\t\t} as any);\n\t},\n\n\thandleFileSizeExceed: function (oEvent: any /*iFileSize: any*/) {\n\t\tMessageBox.error(\n\t\t\tgetResourceModel(oEvent.getSource()).getText(\n\t\t\t\t\"M_FIELD_FILEUPLOADER_FILE_TOO_BIG\",\n\t\t\t\toEvent.getSource().getMaximumFileSize().toFixed(3)\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentWidth: \"150px\"\n\t\t\t} as any\n\t\t);\n\t},\n\n\t_getExtensionController: function (oController: any) {\n\t\treturn oController.isA(\"sap.fe.core.ExtensionAPI\") ? oController._controller : oController;\n\t}\n};\n\n/**\n * @global\n */\nexport default FieldRuntime;\n"],"mappings":"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"}},{"offset":{"line":8441,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","CollaborationActivitySync","CollaborationCommon","draft","KeepAliveHelper","ModelHelper","ResourceModelHelper","CommonHelper","FieldWrapper","FieldAPI","IllustratedMessage","IllustratedMessageType","mobilelibrary","MessageBox","ResponsivePopover","Core","IconPool","Device","Filter","FileUploaderParameter","openWindow","system","getResourceModel","Activity","getCollaborationBinding","field","binding","getBindingContext","getBinding","isA","oView","getTargetView","FieldRuntime","resetChangesHandler","undefined","uploadPromises","onDataFieldWithNavigationPath","oSource","oController","sNavPath","_routing","oBindingContext","oMetaModel","getModel","getMetaModel","fnNavigate","oContext","navigateToTarget","getViewData","converterType","isStickySessionSupported","processDataLossOrDraftDiscardConfirmation","Function","prototype","getController","NavigationType","ForwardNavigation","error","isDraftIndicatorVisible","sPropertyPath","sSemanticKeyHasDraftIndicator","HasDraftEntity","IsActiveEntity","hideDraftInfo","onValidateFieldGroup","oEvent","oFEController","_getExtensionController","_sideEffects","handleFieldGroupChange","handleChange","oSourceField","getSource","bIsTransient","isTransient","pValueResolved","getParameter","Promise","resolve","bValid","fieldValidity","this","getFieldStateOnChange","state","then","mParameters","valid","catch","editFlow","syncTask","handleFieldChange","oField","bCollaborationEnabled","isConnected","_ref","_oField$getBindingInf","data","getBindingInfo","parts","map","part","_oField$getBindingCon","getPath","path","updateCollaboration","hasPendingChanges","attachEventOnce","send","Change","Undo","handleLiveChange","event","bindingPath","fullPath","LiveChange","setTimeout","focusedControl","byId","getCurrentFocusedControlId","getParent","detachBrowserEvent","attachBrowserEvent","handleOpenPicker","sBindingPath","sFullPath","handleClosePicker","_sendCollaborationMessageForFileUploader","fileUploader","activity","isCollaborationEnabled","_fileUploader$getPare","_fileUploader$getBind","getProperty","handleOpenUploader","handleCloseUploader","mFieldState","_isBindingStateMessages","oBinding","getDataState","getInvalidValue","getContent","getMetadata","getName","getEditMode","getContentEdit","bIsValid","getMaxConditions","oValueBindingInfo","getValue","fieldValue","validity","_fnFixHashQueryString","sCurrentHash","indexOf","split","_fnGetLinkInformation","_oSource","_oLink","_sPropertyPath","_sValue","fnSetActive","oModel","sSemanticObjectName","oInternalModelContext","oAppComponent","getAppComponent","oShellServiceHelper","getShellServices","pGetLinksPromise","getLinksWithCache","semanticObject","aSemanticObjectUnavailableActions","getObject","SemanticObjectName","SemanticObjectFullPath","MetaModel","InternalModelContext","ShellServiceHelper","GetLinksPromise","SemanticObjectUnavailableActions","_fnQuickViewHasNewCondition","oSemanticObjectPayload","_oLinkInfo","bResultingNewConditionForConditionalWrapper","_fnQuickViewSetNewConditionForConditionalWrapper","_oFinalSemanticObjects","sTmpPath","aSemanticObjectPaths","Object","keys","iPathsCount","_fnUpdateSemanticObjectsTargetModel","sValue","oControl","bActive","setActive","setTitleActive","oConditionalWrapper","setCondition","oLinkInfo","getHash","updateSemanticTargets","oFinalSemanticObjects","oError","_checkControlHasModelAndBindingContext","_control","_checkCustomDataValueBeforeUpdatingSemanticObjectModel","propertyPath","aCustomData","sSemanticObjectPathValue","oValueBinding","_fnCustomDataValueIsString","semanticObjectPathValue","filter","customData","getKey","index","_oChangeEvent","LinkModelContextChange","sProperty","sPathToProperty","control","mdcLink","getDependents","length","getCustomData","openExternalLink","source","createPopoverWithNoTargets","mdcLinkId","getId","illustratedMessageSettings","title","getText","description","enableFormattedText","illustrationSize","illustrationType","Tent","illustratedMessage","popoverSettings","horizontalScrolling","showHeader","phone","placement","PlacementType","Auto","content","afterClose","destroy","openLink","async","sapmLink","hRef","getTriggerHref","linkItems","retrieveLinkItems","getPayload","hasQuickViewFacets","popover","addDependent","openBy","open","view","appComponent","shellService","shellHash","parseShellHash","navArgs","target","action","params","storeControlRefreshStrategyForHash","isStickyEditMode","toExternal","newHref","hrefForExternalAsync","pressLink","findElements","elem","oFieldInfo","uploadStream","controller","FEController","fileWrapper","uploadUrl","getUploadUrl","_fileUploader$getMode","_fileUploader$getBind2","setUIBusy","setUploadUrl","removeAllHeaderParameters","token","getHttpHeaders","headerParameterCSRFToken","setName","setValue","addHeaderParameter","eTag","headerParameterETag","headerParameterAccept","uploadPromise","reject","upload","handleUploadComplete","propertyFileName","status","context","_displayMessageForFailedUpload","_fileWrapper$avatar","newETag","etag","setProperty","avatar","refreshAvatarCacheBusting","_callSideEffectsForStream","notificationData","push","sError","sMessageText","JSON","parse","message","e","removeStream","deleteButton","getIconForMimeType","sMimeType","retrieveTextFromValueList","sPropertyValue","sPropertyFullPath","sDisplayFormat","sTextProperty","sPropertyName","requestValueListInfo","mValueListInfo","oValueListInfo","oValueListModel","$model","oMetaModelValueList","oParamWithKey","Parameters","find","oParameter","LocalDataProperty","$PropertyPath","ValueListProperty","oTextAnnotation","CollectionPath","$Path","oFilter","operator","value1","oListBinding","bindList","$select","requestContexts","aContexts","_aContexts$","sDescription","getLibraryResourceBundle","sMsg","handleTypeMissmatch","resourceModel","details","getParameters","mimeType","getMimeType","toString","replaceAll","contentWidth","handleFileSizeExceed","getMaximumFileSize","toFixed","_controller"],"sources":["FieldRuntime-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":8446,"column":0},"map":{"version":3,"names":["addTextArrangementToBindingExpression","bindingExpressionToEnhance","fullContextPath","transformRecursively","expression","outExpression","modelName","undefined","oPropertyDataModelPath","enhanceDataModelPath","path","CommonFormatters","getBindingWithTextArrangement","formatValueRecursively","formatWithTypeInformation","targetObject","getTextBindingExpression","oPropertyDataModelObjectPath","fieldFormatOptions","getTextBinding","asObject","$Type","fieldValue","getExpressionFromAnnotation","Value","compileExpression","isPathAnnotationExpression","$target","oPropertyBindingExpression","pathInModel","getContextRelativeTargetObjectPath","oTargetBinding","annotations","Measures","Unit","ISOCurrency","UIFormatters","getBindingWithUnitOrCurrency","measureDisplayMode","isComplexTypeExpression","formatOptions","showMeasure","Common","Timezone","getBindingWithTimezone","dateFormatOptions","getValueBinding","ignoreUnit","ignoreFormatting","bindingParameters","targetTypeAny","keepUnit","oNavPath","targetEntityType","resolvePath","target","visitedObjects","forEach","oNavObj","isNavigationProperty","navigationProperties","push","isProperty","oBindingExpression","isPathInModelExpression","Communication","IsEmailAddress","type","oTimezone","parseKeepsEmptyString","constraints","parameters","targetType","getAssociatedTextBinding","textPropertyPath","PropertyHelper","getAssociatedTextPropertyPath","oTextPropertyPath","$$noPatch","isUsedInNavigationWithQuickViewFacets","oDataModelPath","oProperty","aNavigationProperties","aSemanticObjects","SemanticKey","bIsUsedInNavigationWithQuickViewFacets","oNavProp","referentialConstraint","length","oRefConstraint","sourceProperty","name","UI","QuickViewFacets","contextLocation","targetEntitySet","aIsTargetSemanticKey","some","oSemantic","isKey","isRetrieveTextFromValueListEnabled","oPropertyPath","Text","hasValueHelp","textAlignMode","getTextAlignment","dataFieldModelPath","computedEditMode","sType","Target","FieldHelper","getDataTypeForVisualization","getPropertyAlignment","getVisibleExpression","propertyValue","isAnalyticalGroupHeaderExpanded","isAnalytics","IsExpanded","constant","isAnalyticalLeaf","equal","NodeLevel","and","not","Hidden","ifElse","or","QVTextBinding","oPropertyValueDataModelObjectPath","returnValue","getQuickViewType","IsPhoneNumber","getSemanticObjectExpressionToResolve","propertyAnnotations","dynamicSemanticObjectsOnly","aSemObjExprToResolve","sSemObjExpression","annotation","semanticObjectsKeys","Object","keys","filter","element","startsWith","semanticObject","key","getDynamicPathFromSemanticObject","value","getSemanticObjects","sCustomDataKey","sCustomDataValue","aSemObjCustomData","iSemObjCount","oSemanticObjectsModel","JSONModel","$$valueAsPromise","oSemObjBindingContext","createBindingContext","getMultipleLinesForDataField","oThis","sPropertyType","isMultiLineText","wrap","editMode","indexOf","IsEditable","_hasValueHelpToShow","oPropertyUnit","getAssociatedUnitProperty","oPropertyCurrency","getAssociatedCurrencyProperty","setEditStyleProperties","oProps","oDataField","onlyEditStyle","includes","editStyle","valueBindingExpression","editStylePlaceholder","Placeholder","dataPointAnnotation","isDataFieldForAnnotation","Visualization","QuickInfo","ratingIndicatorTooltip","ratingIndicatorTargetValue","TargetValue","textBindingExpression","showTimezone","MultiLineText","valueOf","unitBindingExpression","getBindingForUnitOrCurrency","descriptionBindingExpression","ifUnitEditable","unitProperty","staticUnit","getStaticUnitWithLocale","unitEditable","isReadOnlyExpression","valueInputWidth","valueInputFieldWidth","unitInputVisible","property","unit","unitFormat","NumberFormat","getUnitInstance","localeData","oLocaleData","mData","units","short","displayName","hasSemanticObjectInNavigationOrProperty","propertyDataModelObjectPath","SemanticObjectHelper","hasSemanticObject","lastNavProp","find","contextNavProp","getDataModelObjectPathForValue","initialDataModelObjectPath","valuePath","term","replace","getPropertyWithSemanticObject","dataModelObjectPath","propertyWithSemanticObject","navProperty","fullyQualifiedName","hasPropertyInsertRestrictions","PropertyDataModelObjectPath","slice","isAnnotatedWithNonInsertableProperties","object","Capabilities","InsertRestrictions","NonInsertableProperties","isListedInNonInsertableProperties","nonInsertableProperty","getDraftIndicatorVisibleBinding","draftIndicatorKey","formatResult"],"sourceRoot":"field","sources":["FieldTemplating.ts"],"sourcesContent":["import type { EntitySet, NavigationProperty, Property } from \"@sap-ux/vocabularies-types\";\nimport {\n\tCollectionAnnotationsBase_Capabilities,\n\tEntitySetAnnotations_Capabilities\n} from \"@sap-ux/vocabularies-types/vocabularies/Capabilities_Edm\";\nimport type {\n\tDataFieldAbstractTypes,\n\tDataFieldWithUrl,\n\tDataPointType,\n\tDataPointTypeTypes\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { isDataFieldForAnnotation } from \"sap/fe/core/converters/annotations/DataField\";\nimport { UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport {\n\tand,\n\tBindingToolkitExpression,\n\tCompiledBindingToolkitExpression,\n\tcompileExpression,\n\tconstant,\n\tequal,\n\tformatResult,\n\tformatWithTypeInformation,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tisComplexTypeExpression,\n\tisPathInModelExpression,\n\tnot,\n\tor,\n\tpathInModel,\n\ttransformRecursively\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport { isNavigationProperty, isPathAnnotationExpression, isProperty } from \"sap/fe/core/helpers/TypeGuards\";\nimport * as CommonFormatters from \"sap/fe/core/templating/CommonFormatters\";\nimport { DataModelObjectPath, enhanceDataModelPath, getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isReadOnlyExpression } from \"sap/fe/core/templating/FieldControlHelper\";\nimport * as PropertyHelper from \"sap/fe/core/templating/PropertyHelper\";\nimport * as SemanticObjectHelper from \"sap/fe/core/templating/SemanticObjectHelper\";\nimport { getDynamicPathFromSemanticObject, hasSemanticObject } from \"sap/fe/core/templating/SemanticObjectHelper\";\nimport type { DisplayMode, PropertyOrPath } from \"sap/fe/core/templating/UIFormatters\";\nimport * as UIFormatters from \"sap/fe/core/templating/UIFormatters\";\nimport { ifUnitEditable } from \"sap/fe/core/templating/UIFormatters\";\nimport type { FieldProperties } from \"sap/fe/macros/internal/InternalField.block\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport FieldHelper from \"./FieldHelper\";\n\n/**\n * Recursively add the text arrangement to a binding expression.\n *\n * @param bindingExpressionToEnhance The binding expression to be enhanced\n * @param fullContextPath The current context path we're on (to properly resolve the text arrangement properties)\n * @returns An updated expression containing the text arrangement binding.\n */\nexport const addTextArrangementToBindingExpression = function (\n\tbindingExpressionToEnhance: BindingToolkitExpression<any>,\n\tfullContextPath: DataModelObjectPath\n): BindingToolkitExpression<any> {\n\treturn transformRecursively(bindingExpressionToEnhance, \"PathInModel\", (expression) => {\n\t\tlet outExpression: BindingToolkitExpression<any> = expression;\n\t\tif (expression.modelName === undefined) {\n\t\t\t// In case of default model we then need to resolve the text arrangement property\n\t\t\tconst oPropertyDataModelPath = enhanceDataModelPath(fullContextPath, expression.path);\n\t\t\toutExpression = CommonFormatters.getBindingWithTextArrangement(oPropertyDataModelPath, expression);\n\t\t}\n\t\treturn outExpression;\n\t});\n};\n\nexport const formatValueRecursively = function (\n\tbindingExpressionToEnhance: BindingToolkitExpression<any>,\n\tfullContextPath: DataModelObjectPath\n): BindingToolkitExpression<any> {\n\treturn transformRecursively(bindingExpressionToEnhance, \"PathInModel\", (expression) => {\n\t\tlet outExpression: BindingToolkitExpression<any> = expression;\n\t\tif (expression.modelName === undefined) {\n\t\t\t// In case of default model we then need to resolve the text arrangement property\n\t\t\tconst oPropertyDataModelPath = enhanceDataModelPath(fullContextPath, expression.path);\n\t\t\toutExpression = formatWithTypeInformation(oPropertyDataModelPath.targetObject, expression);\n\t\t}\n\t\treturn outExpression;\n\t});\n};\n\nexport const getTextBindingExpression = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath,\n\tfieldFormatOptions: { displayMode?: DisplayMode; measureDisplayMode?: string }\n): BindingToolkitExpression<string> {\n\treturn getTextBinding(oPropertyDataModelObjectPath, fieldFormatOptions, true) as BindingToolkitExpression<string>;\n};\n\nexport const getTextBinding = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath,\n\tfieldFormatOptions: {\n\t\tdisplayMode?: DisplayMode;\n\t\tmeasureDisplayMode?: string;\n\t\tdateFormatOptions?: { showTime: string; showDate: string; showTimezone: string };\n\t},\n\tasObject = false\n): BindingToolkitExpression<string> | CompiledBindingToolkitExpression {\n\tif (\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataField\" ||\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataPointType\" ||\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath\" ||\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithUrl\" ||\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\" ||\n\t\toPropertyDataModelObjectPath.targetObject?.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithAction\"\n\t) {\n\t\t// If there is no resolved property, the value is returned as a constant\n\t\tconst fieldValue = getExpressionFromAnnotation(oPropertyDataModelObjectPath.targetObject.Value) ?? \"\";\n\t\treturn compileExpression(fieldValue);\n\t}\n\tif (isPathAnnotationExpression(oPropertyDataModelObjectPath.targetObject) && oPropertyDataModelObjectPath.targetObject.$target) {\n\t\toPropertyDataModelObjectPath = enhanceDataModelPath(oPropertyDataModelObjectPath, oPropertyDataModelObjectPath.targetObject.path);\n\t}\n\tconst oPropertyBindingExpression = pathInModel(getContextRelativeTargetObjectPath(oPropertyDataModelObjectPath));\n\tlet oTargetBinding;\n\t// formatting\n\tif (\n\t\toPropertyDataModelObjectPath.targetObject?.annotations?.Measures?.Unit ||\n\t\toPropertyDataModelObjectPath.targetObject?.annotations?.Measures?.ISOCurrency\n\t) {\n\t\toTargetBinding = UIFormatters.getBindingWithUnitOrCurrency(oPropertyDataModelObjectPath, oPropertyBindingExpression);\n\t\tif (fieldFormatOptions?.measureDisplayMode === \"Hidden\" && isComplexTypeExpression(oTargetBinding)) {\n\t\t\t// TODO: Refactor once types are less generic here\n\t\t\toTargetBinding.formatOptions = {\n\t\t\t\t...oTargetBinding.formatOptions,\n\t\t\t\tshowMeasure: false\n\t\t\t};\n\t\t}\n\t} else if (oPropertyDataModelObjectPath.targetObject?.annotations?.Common?.Timezone) {\n\t\toTargetBinding = UIFormatters.getBindingWithTimezone(\n\t\t\toPropertyDataModelObjectPath,\n\t\t\toPropertyBindingExpression,\n\t\t\tfalse,\n\t\t\ttrue,\n\t\t\tfieldFormatOptions.dateFormatOptions\n\t\t);\n\t} else {\n\t\toTargetBinding = CommonFormatters.getBindingWithTextArrangement(\n\t\t\toPropertyDataModelObjectPath,\n\t\t\toPropertyBindingExpression,\n\t\t\tfieldFormatOptions\n\t\t);\n\t}\n\tif (asObject) {\n\t\treturn oTargetBinding;\n\t}\n\t// We don't include $$nopatch and parseKeepEmptyString as they make no sense in the text binding case\n\treturn compileExpression(oTargetBinding);\n};\n\nexport const getValueBinding = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath,\n\tfieldFormatOptions: { measureDisplayMode?: string },\n\tignoreUnit: boolean = false,\n\tignoreFormatting: boolean = false,\n\tbindingParameters?: object,\n\ttargetTypeAny = false,\n\tkeepUnit = false\n): CompiledBindingToolkitExpression {\n\tif (isPathAnnotationExpression(oPropertyDataModelObjectPath.targetObject) && oPropertyDataModelObjectPath.targetObject.$target) {\n\t\tconst oNavPath = oPropertyDataModelObjectPath.targetEntityType.resolvePath(oPropertyDataModelObjectPath.targetObject.path, true);\n\t\toPropertyDataModelObjectPath.targetObject = oNavPath.target;\n\t\toNavPath.visitedObjects.forEach((oNavObj: any) => {\n\t\t\tif (isNavigationProperty(oNavObj)) {\n\t\t\t\toPropertyDataModelObjectPath.navigationProperties.push(oNavObj);\n\t\t\t}\n\t\t});\n\t}\n\n\tconst targetObject = oPropertyDataModelObjectPath.targetObject;\n\tif (isProperty(targetObject)) {\n\t\tlet oBindingExpression: BindingToolkitExpression<any> = pathInModel(\n\t\t\tgetContextRelativeTargetObjectPath(oPropertyDataModelObjectPath)\n\t\t);\n\t\tif (isPathInModelExpression(oBindingExpression)) {\n\t\t\tif (targetObject.annotations?.Communication?.IsEmailAddress) {\n\t\t\t\toBindingExpression.type = \"sap.fe.core.type.Email\";\n\t\t\t} else if (!ignoreUnit && (targetObject.annotations?.Measures?.ISOCurrency || targetObject.annotations?.Measures?.Unit)) {\n\t\t\t\toBindingExpression = UIFormatters.getBindingWithUnitOrCurrency(\n\t\t\t\t\toPropertyDataModelObjectPath,\n\t\t\t\t\toBindingExpression,\n\t\t\t\t\ttrue,\n\t\t\t\t\tkeepUnit ? undefined : { showMeasure: false }\n\t\t\t\t) as any;\n\t\t\t} else {\n\t\t\t\tconst oTimezone = oPropertyDataModelObjectPath.targetObject.annotations?.Common?.Timezone;\n\t\t\t\tif (oTimezone) {\n\t\t\t\t\toBindingExpression = UIFormatters.getBindingWithTimezone(oPropertyDataModelObjectPath, oBindingExpression, true) as any;\n\t\t\t\t} else {\n\t\t\t\t\toBindingExpression = formatWithTypeInformation(targetObject, oBindingExpression) as any;\n\t\t\t\t}\n\t\t\t\tif (isPathInModelExpression(oBindingExpression) && oBindingExpression.type === \"sap.ui.model.odata.type.String\") {\n\t\t\t\t\toBindingExpression.formatOptions = {\n\t\t\t\t\t\tparseKeepsEmptyString: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isPathInModelExpression(oBindingExpression)) {\n\t\t\t\tif (ignoreFormatting) {\n\t\t\t\t\tdelete oBindingExpression.formatOptions;\n\t\t\t\t\tdelete oBindingExpression.constraints;\n\t\t\t\t\tdelete oBindingExpression.type;\n\t\t\t\t}\n\t\t\t\tif (bindingParameters) {\n\t\t\t\t\toBindingExpression.parameters = bindingParameters;\n\t\t\t\t}\n\t\t\t\tif (targetTypeAny) {\n\t\t\t\t\toBindingExpression.targetType = \"any\";\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn compileExpression(oBindingExpression);\n\t\t} else {\n\t\t\t// if somehow we could not compile the binding -> return empty string\n\t\t\treturn \"\";\n\t\t}\n\t} else if (\n\t\ttargetObject?.$Type === UIAnnotationTypes.DataFieldWithUrl ||\n\t\ttargetObject?.$Type === UIAnnotationTypes.DataFieldWithNavigationPath\n\t) {\n\t\treturn compileExpression(getExpressionFromAnnotation((targetObject as DataFieldWithUrl).Value));\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\nexport const getAssociatedTextBinding = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath,\n\tfieldFormatOptions: { measureDisplayMode?: string }\n): CompiledBindingToolkitExpression {\n\tconst textPropertyPath = PropertyHelper.getAssociatedTextPropertyPath(oPropertyDataModelObjectPath.targetObject);\n\tif (textPropertyPath) {\n\t\tconst oTextPropertyPath = enhanceDataModelPath(oPropertyDataModelObjectPath, textPropertyPath);\n\t\treturn getValueBinding(oTextPropertyPath, fieldFormatOptions, true, true, { $$noPatch: true });\n\t}\n\treturn undefined;\n};\n\nexport const isUsedInNavigationWithQuickViewFacets = function (oDataModelPath: DataModelObjectPath, oProperty: Property): boolean {\n\tconst aNavigationProperties = oDataModelPath?.targetEntityType?.navigationProperties || [];\n\tconst aSemanticObjects = oDataModelPath?.targetEntityType?.annotations?.Common?.SemanticKey || [];\n\tlet bIsUsedInNavigationWithQuickViewFacets = false;\n\taNavigationProperties.forEach((oNavProp: NavigationProperty) => {\n\t\tif (oNavProp.referentialConstraint && oNavProp.referentialConstraint.length) {\n\t\t\toNavProp.referentialConstraint.forEach((oRefConstraint) => {\n\t\t\t\tif (oRefConstraint?.sourceProperty === oProperty.name) {\n\t\t\t\t\tif (oNavProp?.targetType?.annotations?.UI?.QuickViewFacets) {\n\t\t\t\t\t\tbIsUsedInNavigationWithQuickViewFacets = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\tif (oDataModelPath.contextLocation?.targetEntitySet !== oDataModelPath.targetEntitySet) {\n\t\tconst aIsTargetSemanticKey = aSemanticObjects.some(function (oSemantic) {\n\t\t\treturn oSemantic?.$target?.name === oProperty.name;\n\t\t});\n\t\tif ((aIsTargetSemanticKey || oProperty.isKey) && oDataModelPath?.targetEntityType?.annotations?.UI?.QuickViewFacets) {\n\t\t\tbIsUsedInNavigationWithQuickViewFacets = true;\n\t\t}\n\t}\n\treturn bIsUsedInNavigationWithQuickViewFacets;\n};\n\nexport const isRetrieveTextFromValueListEnabled = function (\n\toPropertyPath: PropertyOrPath<Property>,\n\tfieldFormatOptions: { displayMode?: DisplayMode; textAlignMode?: string }\n): boolean {\n\tconst oProperty: Property = (isPathAnnotationExpression(oPropertyPath) && oPropertyPath.$target) || (oPropertyPath as Property);\n\tif (\n\t\t!oProperty.annotations?.Common?.Text &&\n\t\t!oProperty.annotations?.Measures &&\n\t\tPropertyHelper.hasValueHelp(oProperty) &&\n\t\tfieldFormatOptions.textAlignMode === \"Form\"\n\t) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n/**\n * Calculates text alignment based on the dataModelObjectPath.\n *\n * @param dataFieldModelPath The property's type\n * @param formatOptions The field format options\n * @param computedEditMode The editMode used in this case\n * @returns The property alignment\n */\nexport const getTextAlignment = function (dataFieldModelPath: DataModelObjectPath, formatOptions: any, computedEditMode: any) {\n\t// check for the target value type directly, or in case it is pointing to a DataPoint we look at the dataPoint's value\n\tlet sType = dataFieldModelPath.targetObject.Value?.$target.type || dataFieldModelPath.targetObject.Target?.$target.Value.$target.type;\n\tlet annotations;\n\n\tif (\n\t\tPropertyHelper.isKey(\n\t\t\tdataFieldModelPath.targetObject.Value?.$target || dataFieldModelPath.targetObject.Target?.$target?.Value?.$target\n\t\t)\n\t) {\n\t\treturn \"Begin\";\n\t}\n\tif (dataFieldModelPath.targetObject.$Type !== UIAnnotationTypes.DataFieldForAnnotation) {\n\t\tannotations = dataFieldModelPath.targetObject.Value.$target.annotations.UI;\n\t\tsType = FieldHelper.getDataTypeForVisualization(annotations, sType);\n\t}\n\n\treturn FieldHelper.getPropertyAlignment(sType, formatOptions, computedEditMode);\n};\n\n/**\n * Returns the binding expression to evaluate the visibility of a DataField or DataPoint annotation.\n *\n * SAP Fiori elements will evaluate either the UI.Hidden annotation defined on the annotation itself or on the target property.\n *\n * @param dataFieldModelPath The metapath referring to the annotation we are evaluating.\n * @param [formatOptions] FormatOptions optional.\n * @param formatOptions.isAnalytics This flag is set when using an analytical table.\n * @returns An expression that you can bind to the UI.\n */\nexport const getVisibleExpression = function (\n\tdataFieldModelPath: DataModelObjectPath,\n\tformatOptions?: { isAnalytics?: boolean }\n): CompiledBindingToolkitExpression {\n\tconst targetObject: DataFieldAbstractTypes | DataPointTypeTypes = dataFieldModelPath.targetObject;\n\tlet propertyValue;\n\tif (targetObject) {\n\t\tswitch (targetObject.$Type) {\n\t\t\tcase UIAnnotationTypes.DataField:\n\t\t\tcase UIAnnotationTypes.DataFieldWithUrl:\n\t\t\tcase UIAnnotationTypes.DataFieldWithNavigationPath:\n\t\t\tcase UIAnnotationTypes.DataFieldWithIntentBasedNavigation:\n\t\t\tcase UIAnnotationTypes.DataFieldWithAction:\n\t\t\tcase UIAnnotationTypes.DataPointType:\n\t\t\t\tpropertyValue = targetObject.Value.$target;\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\t\t// if it is a DataFieldForAnnotation pointing to a DataPoint we look at the dataPoint's value\n\t\t\t\tif (targetObject?.Target?.$target?.$Type === UIAnnotationTypes.DataPointType) {\n\t\t\t\t\tpropertyValue = targetObject.Target.$target?.Value.$target;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t// eslint-disable-next-line no-fallthrough\n\t\t\tcase UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n\t\t\tcase UIAnnotationTypes.DataFieldForAction:\n\t\t\tdefault:\n\t\t\t\tpropertyValue = undefined;\n\t\t}\n\t}\n\tconst isAnalyticalGroupHeaderExpanded = formatOptions?.isAnalytics ? UI.IsExpanded : constant(false);\n\tconst isAnalyticalLeaf = formatOptions?.isAnalytics ? equal(UI.NodeLevel, 0) : constant(false);\n\n\t// A data field is visible if:\n\t// - the UI.Hidden expression in the original annotation does not evaluate to 'true'\n\t// - the UI.Hidden expression in the target property does not evaluate to 'true'\n\t// - in case of Analytics it's not visible for an expanded GroupHeader\n\treturn compileExpression(\n\t\tand(\n\t\t\t...[\n\t\t\t\tnot(equal(getExpressionFromAnnotation(targetObject?.annotations?.UI?.Hidden), true)),\n\t\t\t\tifElse(\n\t\t\t\t\t!!propertyValue,\n\t\t\t\t\tpropertyValue && not(equal(getExpressionFromAnnotation(propertyValue.annotations?.UI?.Hidden), true)),\n\t\t\t\t\ttrue\n\t\t\t\t),\n\t\t\t\tor(not(isAnalyticalGroupHeaderExpanded), isAnalyticalLeaf)\n\t\t\t]\n\t\t)\n\t);\n};\n\nexport const QVTextBinding = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath,\n\toPropertyValueDataModelObjectPath: DataModelObjectPath,\n\tfieldFormatOptions: { displayMode?: DisplayMode; measureDisplayMode?: string },\n\tasObject: boolean = false\n) {\n\tlet returnValue: any = getValueBinding(oPropertyDataModelObjectPath, fieldFormatOptions, asObject);\n\tif (returnValue === \"\") {\n\t\treturnValue = getTextBinding(oPropertyValueDataModelObjectPath, fieldFormatOptions, asObject);\n\t}\n\treturn returnValue;\n};\n\nexport const getQuickViewType = function (oPropertyDataModelObjectPath: DataModelObjectPath): string {\n\tconst targetObject = oPropertyDataModelObjectPath.targetObject;\n\tif (targetObject?.$target?.annotations?.Communication?.IsEmailAddress) {\n\t\treturn \"email\";\n\t}\n\tif (targetObject?.$target?.annotations?.Communication?.IsPhoneNumber) {\n\t\treturn \"phone\";\n\t}\n\treturn \"text\";\n};\n\nexport type SemanticObjectCustomData = {\n\tkey: string;\n\tvalue: string;\n};\n\n/**\n * Get the customData key value pair of SemanticObjects.\n *\n * @param propertyAnnotations The value of the Common annotation.\n * @param [dynamicSemanticObjectsOnly] Flag for retrieving dynamic Semantic Objects only.\n * @returns The array of the semantic Objects.\n */\nexport const getSemanticObjectExpressionToResolve = function (\n\tpropertyAnnotations: any,\n\tdynamicSemanticObjectsOnly?: boolean\n): SemanticObjectCustomData[] {\n\tconst aSemObjExprToResolve: SemanticObjectCustomData[] = [];\n\tlet sSemObjExpression: string;\n\tlet annotation;\n\tif (propertyAnnotations) {\n\t\tconst semanticObjectsKeys = Object.keys(propertyAnnotations).filter(function (element) {\n\t\t\treturn element === \"SemanticObject\" || element.startsWith(\"SemanticObject#\");\n\t\t});\n\t\tfor (const semanticObject of semanticObjectsKeys) {\n\t\t\tannotation = propertyAnnotations[semanticObject];\n\t\t\tsSemObjExpression = compileExpression(getExpressionFromAnnotation(annotation)) as string;\n\t\t\tif (!dynamicSemanticObjectsOnly || (dynamicSemanticObjectsOnly && isPathAnnotationExpression(annotation))) {\n\t\t\t\taSemObjExprToResolve.push({\n\t\t\t\t\tkey: getDynamicPathFromSemanticObject(sSemObjExpression) || sSemObjExpression,\n\t\t\t\t\tvalue: sSemObjExpression\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\treturn aSemObjExprToResolve;\n};\n\nexport const getSemanticObjects = function (aSemObjExprToResolve: any[]): any {\n\tif (aSemObjExprToResolve.length > 0) {\n\t\tlet sCustomDataKey: string = \"\";\n\t\tlet sCustomDataValue: any = \"\";\n\t\tconst aSemObjCustomData: any[] = [];\n\t\tfor (let iSemObjCount = 0; iSemObjCount < aSemObjExprToResolve.length; iSemObjCount++) {\n\t\t\tsCustomDataKey = aSemObjExprToResolve[iSemObjCount].key;\n\t\t\tsCustomDataValue = compileExpression(getExpressionFromAnnotation(aSemObjExprToResolve[iSemObjCount].value));\n\t\t\taSemObjCustomData.push({\n\t\t\t\tkey: sCustomDataKey,\n\t\t\t\tvalue: sCustomDataValue\n\t\t\t});\n\t\t}\n\t\tconst oSemanticObjectsModel: any = new JSONModel(aSemObjCustomData);\n\t\toSemanticObjectsModel.$$valueAsPromise = true;\n\t\tconst oSemObjBindingContext: any = oSemanticObjectsModel.createBindingContext(\"/\");\n\t\treturn oSemObjBindingContext;\n\t} else {\n\t\treturn new JSONModel([]).createBindingContext(\"/\");\n\t}\n};\n\n/**\n * Method to get MultipleLines for a DataField.\n *\n * @name getMultipleLinesForDataField\n * @param {any} oThis The current object\n * @param {string} sPropertyType The property type\n * @param {boolean} isMultiLineText The property isMultiLineText\n * @returns {CompiledBindingToolkitExpression<string>} The binding expression to determine if a data field should be a MultiLineText or not\n * @public\n */\n\nexport const getMultipleLinesForDataField = function (oThis: any, sPropertyType: string, isMultiLineText: boolean): any {\n\tif (oThis.wrap === false) {\n\t\treturn false;\n\t}\n\tif (sPropertyType !== \"Edm.String\") {\n\t\treturn isMultiLineText;\n\t}\n\tif (oThis.editMode === \"Display\") {\n\t\treturn true;\n\t}\n\tif (oThis.editMode.indexOf(\"{\") > -1) {\n\t\t// If the editMode is computed then we just care about the page editMode to determine if the multiline property should be taken into account\n\t\treturn compileExpression(or(not(UI.IsEditable), isMultiLineText));\n\t}\n\treturn isMultiLineText;\n};\n\nconst _hasValueHelpToShow = function (oProperty: Property, measureDisplayMode: string | undefined): boolean | undefined {\n\t// we show a value help if teh property has one or if its visible unit has one\n\tconst oPropertyUnit = PropertyHelper.getAssociatedUnitProperty(oProperty);\n\tconst oPropertyCurrency = PropertyHelper.getAssociatedCurrencyProperty(oProperty);\n\treturn (\n\t\t(PropertyHelper.hasValueHelp(oProperty) && oProperty.type !== \"Edm.Boolean\") ||\n\t\t(measureDisplayMode !== \"Hidden\" &&\n\t\t\t((oPropertyUnit && PropertyHelper.hasValueHelp(oPropertyUnit)) ||\n\t\t\t\t(oPropertyCurrency && PropertyHelper.hasValueHelp(oPropertyCurrency))))\n\t);\n};\n\n/**\n * Sets Edit Style properties for Field in case of Macro Field and MassEditDialog fields.\n *\n * @param oProps Field Properties for the Macro Field.\n * @param oDataField DataField Object.\n * @param oDataModelPath DataModel Object Path to the property.\n * @param onlyEditStyle To add only editStyle.\n */\nexport const setEditStyleProperties = function (\n\toProps: FieldProperties,\n\toDataField: any,\n\toDataModelPath: DataModelObjectPath,\n\tonlyEditStyle?: boolean\n): void {\n\tconst oProperty = oDataModelPath.targetObject;\n\tif (\n\t\t!isProperty(oProperty) ||\n\t\t[\n\t\t\tUIAnnotationTypes.DataFieldForAction,\n\t\t\tUIAnnotationTypes.DataFieldWithNavigationPath,\n\t\t\tUIAnnotationTypes.DataFieldForIntentBasedNavigation\n\t\t].includes(oDataField.$Type)\n\t) {\n\t\toProps.editStyle = null;\n\t\treturn;\n\t}\n\tif (!onlyEditStyle) {\n\t\toProps.valueBindingExpression = getValueBinding(oDataModelPath, oProps.formatOptions);\n\n\t\tconst editStylePlaceholder = oDataField.annotations?.UI?.Placeholder || oDataField.Value?.$target?.annotations?.UI?.Placeholder;\n\n\t\tif (editStylePlaceholder) {\n\t\t\toProps.editStylePlaceholder = compileExpression(getExpressionFromAnnotation(editStylePlaceholder));\n\t\t}\n\t}\n\n\t// Setup RatingIndicator\n\tconst dataPointAnnotation = (isDataFieldForAnnotation(oDataField) ? oDataField.Target?.$target : oDataField) as DataPointType;\n\tif (dataPointAnnotation?.Visualization === \"UI.VisualizationType/Rating\") {\n\t\toProps.editStyle = \"RatingIndicator\";\n\n\t\tif (dataPointAnnotation.annotations?.Common?.QuickInfo) {\n\t\t\toProps.ratingIndicatorTooltip = compileExpression(\n\t\t\t\tgetExpressionFromAnnotation(dataPointAnnotation.annotations?.Common?.QuickInfo)\n\t\t\t);\n\t\t}\n\n\t\toProps.ratingIndicatorTargetValue = compileExpression(getExpressionFromAnnotation(dataPointAnnotation.TargetValue));\n\t\treturn;\n\t}\n\n\tif (_hasValueHelpToShow(oProperty, oProps.formatOptions?.measureDisplayMode)) {\n\t\tif (!onlyEditStyle) {\n\t\t\toProps.textBindingExpression = getAssociatedTextBinding(oDataModelPath, oProps.formatOptions);\n\t\t\tif (oProps.formatOptions?.measureDisplayMode !== \"Hidden\") {\n\t\t\t\t// for the MDC Field we need to keep the unit inside the valueBindingExpression\n\t\t\t\toProps.valueBindingExpression = getValueBinding(oDataModelPath, oProps.formatOptions, false, false, undefined, false, true);\n\t\t\t}\n\t\t}\n\t\toProps.editStyle = \"InputWithValueHelp\";\n\t\treturn;\n\t}\n\n\tswitch (oProperty.type) {\n\t\tcase \"Edm.Date\":\n\t\t\toProps.editStyle = \"DatePicker\";\n\t\t\treturn;\n\t\tcase \"Edm.Time\":\n\t\tcase \"Edm.TimeOfDay\":\n\t\t\toProps.editStyle = \"TimePicker\";\n\t\t\treturn;\n\t\tcase \"Edm.DateTime\":\n\t\tcase \"Edm.DateTimeOffset\":\n\t\t\toProps.editStyle = \"DateTimePicker\";\n\t\t\t// No timezone defined. Also for compatibility reasons.\n\t\t\tif (!oProperty.annotations?.Common?.Timezone) {\n\t\t\t\toProps.showTimezone = undefined;\n\t\t\t} else {\n\t\t\t\toProps.showTimezone = true;\n\t\t\t}\n\t\t\treturn;\n\t\tcase \"Edm.Boolean\":\n\t\t\toProps.editStyle = \"CheckBox\";\n\t\t\treturn;\n\t\tcase \"Edm.Stream\":\n\t\t\toProps.editStyle = \"File\";\n\t\t\treturn;\n\t\tcase \"Edm.String\":\n\t\t\tif (oProperty.annotations?.UI?.MultiLineText?.valueOf()) {\n\t\t\t\toProps.editStyle = \"TextArea\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\toProps.editStyle = \"Input\";\n\t}\n\tif (\n\t\toProps.formatOptions?.measureDisplayMode !== \"Hidden\" &&\n\t\t(oProperty.annotations?.Measures?.ISOCurrency || oProperty.annotations?.Measures?.Unit)\n\t) {\n\t\tif (!onlyEditStyle) {\n\t\t\toProps.unitBindingExpression = compileExpression(UIFormatters.getBindingForUnitOrCurrency(oDataModelPath));\n\t\t\toProps.descriptionBindingExpression = UIFormatters.ifUnitEditable(\n\t\t\t\toProperty,\n\t\t\t\t\"\",\n\t\t\t\tUIFormatters.getBindingForUnitOrCurrency(oDataModelPath)\n\t\t\t);\n\t\t\tconst unitProperty =\n\t\t\t\tPropertyHelper.getAssociatedCurrencyProperty(oProperty) || PropertyHelper.getAssociatedUnitProperty(oProperty);\n\t\t\toProps.staticUnit = unitProperty ? undefined : getStaticUnitWithLocale(oProperty);\n\t\t\toProps.unitEditable =\n\t\t\t\toProps.formatOptions.measureDisplayMode === \"ReadOnly\"\n\t\t\t\t\t? \"false\"\n\t\t\t\t\t: compileExpression(not(isReadOnlyExpression(unitProperty)));\n\t\t\toProps.valueInputWidth = ifUnitEditable(oProperty, \"70%\", \"100%\");\n\t\t\toProps.valueInputFieldWidth = ifUnitEditable(oProperty, \"100%\", \"70%\");\n\t\t\toProps.unitInputVisible = ifUnitEditable(oProperty, true, false);\n\t\t}\n\t\toProps.editStyle = \"InputWithUnit\";\n\t\treturn;\n\t}\n\n\toProps.editStyle = \"Input\";\n};\n\n/**\n * Returns the unit or currency  value using the locale if the annotation value is a unit key.\n *\n * @param property Property with a static unit or currency\n * @returns The value for the unit/currency\n */\nexport const getStaticUnitWithLocale = (property: Property) => {\n\tlet unit = (property.annotations?.Measures?.Unit?.valueOf() || property?.annotations?.Measures?.ISOCurrency?.valueOf()) as string;\n\t// this is a hack of UI5 locale data to retrieve the localized text for the unit key where we access UI5 private structure\n\tconst unitFormat = NumberFormat.getUnitInstance() as unknown as {\n\t\toLocaleData?: { mData?: { units?: { short: Record<string, { displayName?: string }> } } };\n\t};\n\tconst localeData = unitFormat?.oLocaleData?.mData;\n\n\tif (localeData?.units?.short && localeData.units.short[unit] && localeData.units.short[unit].displayName) {\n\t\tunit = localeData.units.short[unit].displayName as string;\n\t}\n\n\treturn unit;\n};\n\nexport const hasSemanticObjectInNavigationOrProperty = (propertyDataModelObjectPath: DataModelObjectPath) => {\n\tconst property = propertyDataModelObjectPath.targetObject as Property;\n\tif (SemanticObjectHelper.hasSemanticObject(property)) {\n\t\treturn true;\n\t}\n\tconst lastNavProp = propertyDataModelObjectPath?.navigationProperties?.length\n\t\t? propertyDataModelObjectPath?.navigationProperties[propertyDataModelObjectPath?.navigationProperties?.length - 1]\n\t\t: null;\n\tif (\n\t\t!lastNavProp ||\n\t\tpropertyDataModelObjectPath.contextLocation?.navigationProperties?.find(\n\t\t\t(contextNavProp) => contextNavProp.name === lastNavProp.name\n\t\t)\n\t) {\n\t\treturn false;\n\t}\n\treturn SemanticObjectHelper.hasSemanticObject(lastNavProp);\n};\n\n/**\n * Get the dataModelObjectPath with the value property as targetObject if it exists\n * for a dataModelObjectPath targeting a DataField or a DataPoint annotation.\n *\n * @param initialDataModelObjectPath\n * @returns The dataModelObjectPath targetiing the value property or undefined\n */\nexport const getDataModelObjectPathForValue = (initialDataModelObjectPath: DataModelObjectPath): DataModelObjectPath | undefined => {\n\tif (!initialDataModelObjectPath.targetObject) {\n\t\treturn undefined;\n\t}\n\tlet valuePath = \"\";\n\t// data point annotations need not have $Type defined, so add it if missing\n\tif (initialDataModelObjectPath.targetObject.term === \"com.sap.vocabularies.UI.v1.DataPoint\") {\n\t\tinitialDataModelObjectPath.targetObject.$Type = initialDataModelObjectPath.targetObject.$Type || UIAnnotationTypes.DataPointType;\n\t}\n\tswitch (initialDataModelObjectPath.targetObject.$Type) {\n\t\tcase UIAnnotationTypes.DataField:\n\t\tcase UIAnnotationTypes.DataPointType:\n\t\tcase UIAnnotationTypes.DataFieldWithNavigationPath:\n\t\tcase UIAnnotationTypes.DataFieldWithUrl:\n\t\tcase UIAnnotationTypes.DataFieldWithIntentBasedNavigation:\n\t\tcase UIAnnotationTypes.DataFieldWithAction:\n\t\t\tif (typeof initialDataModelObjectPath.targetObject.Value === \"object\") {\n\t\t\t\tvaluePath = initialDataModelObjectPath.targetObject.Value.path;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\tif (initialDataModelObjectPath.targetObject.Target.$target) {\n\t\t\t\tif (\n\t\t\t\t\tinitialDataModelObjectPath.targetObject.Target.$target.$Type === UIAnnotationTypes.DataField ||\n\t\t\t\t\tinitialDataModelObjectPath.targetObject.Target.$target.$Type === UIAnnotationTypes.DataPointType\n\t\t\t\t) {\n\t\t\t\t\tif (initialDataModelObjectPath.targetObject.Target.value.indexOf(\"/\") > 0) {\n\t\t\t\t\t\tvaluePath = initialDataModelObjectPath.targetObject.Target.value.replace(\n\t\t\t\t\t\t\t/\\/@.*/,\n\t\t\t\t\t\t\t`/${initialDataModelObjectPath.targetObject.Target.$target.Value?.path}`\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvaluePath = initialDataModelObjectPath.targetObject.Target.$target.Value?.path;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvaluePath = initialDataModelObjectPath.targetObject.Target?.path;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t}\n\n\tif (valuePath && valuePath.length > 0) {\n\t\treturn enhanceDataModelPath(initialDataModelObjectPath, valuePath);\n\t} else {\n\t\treturn undefined;\n\t}\n};\n\n/**\n * Get the property or the navigation property in  its relative path that holds semanticObject annotation if it exists.\n *\n * @param dataModelObjectPath\n * @returns A property or a NavProperty or undefined\n */\nexport const getPropertyWithSemanticObject = (dataModelObjectPath: DataModelObjectPath) => {\n\tlet propertyWithSemanticObject: Property | NavigationProperty | undefined;\n\tif (hasSemanticObject(dataModelObjectPath.targetObject as Property | NavigationProperty)) {\n\t\tpropertyWithSemanticObject = dataModelObjectPath.targetObject as Property | NavigationProperty;\n\t} else if (dataModelObjectPath.navigationProperties.length > 0) {\n\t\t// there are no semantic objects on the property itself so we look for some on nav properties\n\t\tfor (const navProperty of dataModelObjectPath.navigationProperties) {\n\t\t\tif (\n\t\t\t\t!dataModelObjectPath.contextLocation?.navigationProperties.find(\n\t\t\t\t\t(contextNavProp) => contextNavProp.fullyQualifiedName === navProperty.fullyQualifiedName\n\t\t\t\t) &&\n\t\t\t\t!propertyWithSemanticObject &&\n\t\t\t\thasSemanticObject(navProperty)\n\t\t\t) {\n\t\t\t\tpropertyWithSemanticObject = navProperty;\n\t\t\t}\n\t\t}\n\t}\n\treturn propertyWithSemanticObject;\n};\n\n/**\n * Check if the considered property is a non-insertable property\n * A first check is done on the last navigation from the contextLocation:\n * \t- If the annotation 'nonInsertableProperty' is found and the property is listed, then the property is non-insertable,\n *  - Else the same check is done on the target entity.\n *\n * @param PropertyDataModelObjectPath\n * @returns True if the property is not insertable\n */\nexport const hasPropertyInsertRestrictions = (PropertyDataModelObjectPath: DataModelObjectPath): boolean => {\n\tconst lastNavProp = PropertyDataModelObjectPath.contextLocation?.navigationProperties?.slice(-1)[0];\n\tconst isAnnotatedWithNonInsertableProperties = function (object: EntitySet | NavigationProperty) {\n\t\treturn !!(object?.annotations?.Capabilities as CollectionAnnotationsBase_Capabilities | EntitySetAnnotations_Capabilities)\n\t\t\t?.InsertRestrictions?.NonInsertableProperties;\n\t};\n\tconst isListedInNonInsertableProperties = function (object: EntitySet | NavigationProperty) {\n\t\treturn !!(\n\t\t\tobject?.annotations?.Capabilities as CollectionAnnotationsBase_Capabilities | EntitySetAnnotations_Capabilities\n\t\t)?.InsertRestrictions?.NonInsertableProperties?.some((nonInsertableProperty) => {\n\t\t\treturn nonInsertableProperty?.$target?.name === PropertyDataModelObjectPath.targetObject?.name;\n\t\t});\n\t};\n\tif (lastNavProp && isAnnotatedWithNonInsertableProperties(lastNavProp as NavigationProperty)) {\n\t\treturn isListedInNonInsertableProperties(lastNavProp as NavigationProperty);\n\t} else {\n\t\treturn (\n\t\t\t!!PropertyDataModelObjectPath.targetEntitySet &&\n\t\t\tisListedInNonInsertableProperties(PropertyDataModelObjectPath.targetEntitySet as EntitySet)\n\t\t);\n\t}\n};\n\n/**\n * Get the binding for the draft indicator visibility.\n *\n * @param draftIndicatorKey\n * @returns  The visibility binding expression.\n */\nexport const getDraftIndicatorVisibleBinding = (draftIndicatorKey: string) => {\n\treturn draftIndicatorKey\n\t\t? compileExpression(\n\t\t\t\tformatResult(\n\t\t\t\t\t[\n\t\t\t\t\t\tconstant(draftIndicatorKey),\n\t\t\t\t\t\tpathInModel(\"semanticKeyHasDraftIndicator\", \"internal\"),\n\t\t\t\t\t\tpathInModel(\"HasDraftEntity\"),\n\t\t\t\t\t\tpathInModel(\"IsActiveEntity\"),\n\t\t\t\t\t\tpathInModel(\"hideDraftInfo\", \"pageInternal\")\n\t\t\t\t\t],\n\t\t\t\t\t\"sap.fe.macros.field.FieldRuntime.isDraftIndicatorVisible\"\n\t\t\t\t)\n\t\t  )\n\t\t: \"false\";\n};\n"],"mappings":"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"}},{"offset":{"line":9093,"column":0},"map":{"version":3,"names":["sap","ui","define","DataField","BindingHelper","BindingToolkit","TypeGuards","CommonFormatters","DataModelPathHelper","FieldControlHelper","PropertyHelper","SemanticObjectHelper","UIFormatters","NumberFormat","JSONModel","FieldHelper","_exports","ifUnitEditable","hasSemanticObject","getDynamicPathFromSemanticObject","isReadOnlyExpression","getContextRelativeTargetObjectPath","enhanceDataModelPath","isProperty","isPathAnnotationExpression","isNavigationProperty","transformRecursively","pathInModel","or","not","isPathInModelExpression","isComplexTypeExpression","ifElse","getExpressionFromAnnotation","formatWithTypeInformation","formatResult","equal","constant","compileExpression","and","UI","isDataFieldForAnnotation","addTextArrangementToBindingExpression","bindingExpressionToEnhance","fullContextPath","expression","outExpression","modelName","undefined","oPropertyDataModelPath","path","getBindingWithTextArrangement","formatValueRecursively","targetObject","getTextBindingExpression","oPropertyDataModelObjectPath","fieldFormatOptions","getTextBinding","_oPropertyDataModelOb","_oPropertyDataModelOb2","_oPropertyDataModelOb3","_oPropertyDataModelOb4","_oPropertyDataModelOb5","_oPropertyDataModelOb6","_oPropertyDataModelOb7","_oPropertyDataModelOb8","_oPropertyDataModelOb9","_oPropertyDataModelOb10","_oPropertyDataModelOb11","_oPropertyDataModelOb12","_oPropertyDataModelOb13","_oPropertyDataModelOb14","_oPropertyDataModelOb15","asObject","arguments","length","$Type","fieldValue","Value","$target","oPropertyBindingExpression","oTargetBinding","annotations","Measures","Unit","ISOCurrency","getBindingWithUnitOrCurrency","measureDisplayMode","formatOptions","showMeasure","Common","Timezone","getBindingWithTimezone","dateFormatOptions","getValueBinding","ignoreUnit","ignoreFormatting","bindingParameters","targetTypeAny","keepUnit","oNavPath","targetEntityType","resolvePath","target","visitedObjects","forEach","oNavObj","navigationProperties","push","oBindingExpression","_targetObject$annotat","_targetObject$annotat2","_targetObject$annotat3","_targetObject$annotat4","_targetObject$annotat5","_targetObject$annotat6","Communication","IsEmailAddress","type","_oPropertyDataModelOb16","_oPropertyDataModelOb17","oTimezone","parseKeepsEmptyString","constraints","parameters","targetType","getAssociatedTextBinding","textPropertyPath","getAssociatedTextPropertyPath","oTextPropertyPath","$$noPatch","isUsedInNavigationWithQuickViewFacets","oDataModelPath","oProperty","_oDataModelPath$targe","_oDataModelPath$targe2","_oDataModelPath$targe3","_oDataModelPath$targe4","_oDataModelPath$conte","aNavigationProperties","aSemanticObjects","SemanticKey","bIsUsedInNavigationWithQuickViewFacets","oNavProp","referentialConstraint","oRefConstraint","sourceProperty","name","_oNavProp$targetType","_oNavProp$targetType$","_oNavProp$targetType$2","QuickViewFacets","contextLocation","targetEntitySet","_oDataModelPath$targe5","_oDataModelPath$targe6","_oDataModelPath$targe7","aIsTargetSemanticKey","some","oSemantic","_oSemantic$$target","isKey","isRetrieveTextFromValueListEnabled","oPropertyPath","_oProperty$annotation","_oProperty$annotation2","_oProperty$annotation3","Text","hasValueHelp","textAlignMode","getTextAlignment","dataFieldModelPath","computedEditMode","_dataFieldModelPath$t","_dataFieldModelPath$t2","_dataFieldModelPath$t3","_dataFieldModelPath$t4","_dataFieldModelPath$t5","_dataFieldModelPath$t6","sType","Target","getDataTypeForVisualization","getPropertyAlignment","getVisibleExpression","_targetObject$Target","_targetObject$Target$","_targetObject$annotat7","_targetObject$annotat8","_propertyValue$annota","_propertyValue$annota2","propertyValue","_targetObject$Target$2","isAnalyticalGroupHeaderExpanded","isAnalytics","IsExpanded","isAnalyticalLeaf","NodeLevel","Hidden","QVTextBinding","oPropertyValueDataModelObjectPath","returnValue","getQuickViewType","_targetObject$$target","_targetObject$$target2","_targetObject$$target3","_targetObject$$target4","_targetObject$$target5","_targetObject$$target6","IsPhoneNumber","getSemanticObjectExpressionToResolve","propertyAnnotations","dynamicSemanticObjectsOnly","aSemObjExprToResolve","sSemObjExpression","annotation","semanticObjectsKeys","Object","keys","filter","element","startsWith","semanticObject","key","value","getSemanticObjects","sCustomDataKey","sCustomDataValue","aSemObjCustomData","iSemObjCount","oSemanticObjectsModel","$$valueAsPromise","oSemObjBindingContext","createBindingContext","getMultipleLinesForDataField","oThis","sPropertyType","isMultiLineText","wrap","editMode","indexOf","IsEditable","_hasValueHelpToShow","oPropertyUnit","getAssociatedUnitProperty","oPropertyCurrency","getAssociatedCurrencyProperty","setEditStyleProperties","oProps","oDataField","onlyEditStyle","_oDataField$Target","_oProps$formatOptions","_oProperty$annotation4","_oProperty$annotation5","_oProperty$annotation6","_oProperty$annotation7","_oProperty$annotation8","_oProps$formatOptions3","_oProperty$annotation9","_oProperty$annotation10","_oProperty$annotation11","_oProperty$annotation12","includes","editStyle","_oDataField$annotatio","_oDataField$annotatio2","_oDataField$Value","_oDataField$Value$$ta","_oDataField$Value$$ta2","_oDataField$Value$$ta3","valueBindingExpression","editStylePlaceholder","Placeholder","dataPointAnnotation","Visualization","_dataPointAnnotation$","_dataPointAnnotation$2","QuickInfo","_dataPointAnnotation$3","_dataPointAnnotation$4","ratingIndicatorTooltip","ratingIndicatorTargetValue","TargetValue","_oProps$formatOptions2","textBindingExpression","showTimezone","MultiLineText","valueOf","unitBindingExpression","getBindingForUnitOrCurrency","descriptionBindingExpression","unitProperty","staticUnit","getStaticUnitWithLocale","unitEditable","valueInputWidth","valueInputFieldWidth","unitInputVisible","property","_property$annotations","_property$annotations2","_property$annotations3","_property$annotations4","_property$annotations5","_property$annotations6","_unitFormat$oLocaleDa","_localeData$units","unit","unitFormat","getUnitInstance","localeData","oLocaleData","mData","units","short","displayName","hasSemanticObjectInNavigationOrProperty","propertyDataModelObjectPath","_propertyDataModelObj","_propertyDataModelObj2","_propertyDataModelObj3","_propertyDataModelObj4","lastNavProp","find","contextNavProp","getDataModelObjectPathForValue","initialDataModelObjectPath","valuePath","term","_initialDataModelObje","replace","_initialDataModelObje2","_initialDataModelObje3","getPropertyWithSemanticObject","dataModelObjectPath","propertyWithSemanticObject","navProperty","_dataModelObjectPath$","fullyQualifiedName","hasPropertyInsertRestrictions","PropertyDataModelObjectPath","_PropertyDataModelObj","_PropertyDataModelObj2","slice","isAnnotatedWithNonInsertableProperties","object","_object$annotations","_object$annotations$C","_object$annotations$C2","Capabilities","InsertRestrictions","NonInsertableProperties","isListedInNonInsertableProperties","_object$annotations2","_object$annotations2$","_object$annotations2$2","_object$annotations2$3","nonInsertableProperty","_nonInsertablePropert","_PropertyDataModelObj3","getDraftIndicatorVisibleBinding","draftIndicatorKey"],"sources":["FieldTemplating-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":9098,"column":0},"map":{"version":3,"names":["PublicFieldBlock","defineBuildingBlock","name","publicNamespace","returnTypes","blockAttribute","type","isPublic","required","validate","formatOptionsInput","displayMode","includes","Error","measureDisplayMode","textExpandBehaviorDisplay","blockEvent","props","readOnly","undefined","editModeExpression","compileExpression","ifElse","equal","resolveBindingString","getFormatOptions","xml","formatOptions","textLinesEdit","textMaxLines","textMaxCharactersDisplay","textMaxLength","writeDateFormatOptions","showTime","showDate","showTimezone","getPossibleValueHelpTemplate","vhp","FieldHelper","valueHelpProperty","metaPath","vhpCtx","getModel","createBindingContext","hasValueHelpAnnotations","hasValueHelpAnnotation","getObject","id","contextPath","getTemplate","contextPathPath","getPath","metaPathPath","change","semanticObject","BuildingBlockBase"],"sourceRoot":"field","sources":["PublicField.block.ts"],"sourcesContent":["import BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { compileExpression, equal, ifElse, resolveBindingString } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\ntype FieldFormatOptions = {\n\tdisplayMode?: string;\n\tmeasureDisplayMode?: string;\n\ttextLinesEdit?: number;\n\ttextMaxLines?: number;\n\ttextMaxCharactersDisplay?: number;\n\ttextExpandBehaviorDisplay?: string;\n\ttextMaxLength?: number;\n\tshowDate?: boolean;\n\tshowTime?: boolean;\n\tshowTimezone?: boolean;\n};\n\n/**\n * Public external field representation\n */\n@defineBuildingBlock({\n\tname: \"Field\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\n\t\t\"sap.fe.core.controls.FormElementWrapper\" /*, not sure i want to add those yet \"sap.fe.macros.field.FieldAPI\", \"sap.m.HBox\", \"sap.fe.macros.controls.ConditionalWrapper\", \"sap.m.Button\"*/\n\t]\n})\nexport default class PublicFieldBlock extends BuildingBlockBase {\n\t/**\n\t * The 'id' property\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true, required: true })\n\tpublic id!: string;\n\n\t/**\n\t * The meta path provided for the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true\n\t})\n\tpublic metaPath!: Context;\n\n\t/**\n\t * The context path provided for the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true\n\t})\n\tpublic contextPath!: Context;\n\n\t/**\n\t * The readOnly flag\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true, required: false })\n\tpublic readOnly?: boolean;\n\n\t/**\n\t * The semantic object associated to the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true,\n\t\trequired: false\n\t})\n\tpublic semanticObject?: string;\n\n\t/**\n\t * The edit mode expression for the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true,\n\t\trequired: false\n\t})\n\tpublic editModeExpression?;\n\n\t/**\n\t * The object with the formatting options\n\t */\n\t@blockAttribute({\n\t\ttype: \"object\",\n\t\tisPublic: true,\n\t\tvalidate: function (formatOptionsInput: FieldFormatOptions) {\n\t\t\tif (\n\t\t\t\tformatOptionsInput.displayMode &&\n\t\t\t\t![\"Value\", \"Description\", \"ValueDescription\", \"DescriptionValue\"].includes(formatOptionsInput.displayMode)\n\t\t\t) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.displayMode} for displayMode does not match`);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput.measureDisplayMode && ![\"Hidden\", \"ReadOnly\"].includes(formatOptionsInput.measureDisplayMode)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.measureDisplayMode} for measureDisplayMode does not match`);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformatOptionsInput.textExpandBehaviorDisplay &&\n\t\t\t\t![\"InPlace\", \"Popover\"].includes(formatOptionsInput.textExpandBehaviorDisplay)\n\t\t\t) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Allowed value ${formatOptionsInput.textExpandBehaviorDisplay} for textExpandBehaviorDisplay does not match`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn formatOptionsInput;\n\t\t}\n\t})\n\tpublic formatOptions: FieldFormatOptions = {};\n\n\t/**\n\t * The generic change event\n\t */\n\t@blockEvent()\n\tchange?: string;\n\n\tconstructor(props: PropertiesOf<PublicFieldBlock>) {\n\t\tsuper(props);\n\n\t\tif (this.readOnly !== undefined) {\n\t\t\tthis.editModeExpression = compileExpression(\n\t\t\t\tifElse(equal(resolveBindingString(this.readOnly, \"boolean\"), true), \"Display\", \"Editable\")\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Sets the internal formatOptions for the building block.\n\t *\n\t * @returns A string with the internal formatOptions for the building block\n\t */\n\tgetFormatOptions(): string {\n\t\treturn xml`\n\t\t<internalMacro:formatOptions\n\t\t\ttextAlignMode=\"Form\"\n\t\t\tshowEmptyIndicator=\"true\"\n\t\t\tdisplayMode=\"${this.formatOptions.displayMode}\"\n\t\t\tmeasureDisplayMode=\"${this.formatOptions.measureDisplayMode}\"\n\t\t\ttextLinesEdit=\"${this.formatOptions.textLinesEdit}\"\n\t\t\ttextMaxLines=\"${this.formatOptions.textMaxLines}\"\n\t\t\ttextMaxCharactersDisplay=\"${this.formatOptions.textMaxCharactersDisplay}\"\n\t\t\ttextExpandBehaviorDisplay=\"${this.formatOptions.textExpandBehaviorDisplay}\"\n\t\t\ttextMaxLength=\"${this.formatOptions.textMaxLength}\"\n\t\t\t>\n\t\t\t${this.writeDateFormatOptions()}\n\t\t</internalMacro:formatOptions>\n\t\t\t`;\n\t}\n\n\twriteDateFormatOptions(): string {\n\t\tif (this.formatOptions.showTime || this.formatOptions.showDate || this.formatOptions.showTimezone) {\n\t\t\treturn xml`<internalMacro:dateFormatOptions showTime=\"${this.formatOptions.showTime}\"\n\t\t\t\tshowDate=\"${this.formatOptions.showDate}\"\n\t\t\t\tshowTimezone=\"${this.formatOptions.showTimezone}\"\n\t\t\t\t/>`;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * The function calculates the corresponding ValueHelp field in case it´s\n\t * defined for the specific control.\n\t *\n\t * @returns An XML-based string with a possible ValueHelp control.\n\t */\n\tgetPossibleValueHelpTemplate(): string {\n\t\tconst vhp = FieldHelper.valueHelpProperty(this.metaPath);\n\t\tconst vhpCtx = this.metaPath.getModel().createBindingContext(vhp, this.metaPath);\n\t\tconst hasValueHelpAnnotations = FieldHelper.hasValueHelpAnnotation(vhpCtx.getObject(\"@\"));\n\t\tif (hasValueHelpAnnotations) {\n\t\t\t// depending on whether this one has a value help annotation included, add the dependent\n\t\t\treturn xml`\n\t\t\t<internalMacro:dependents>\n\t\t\t\t<macros:ValueHelp _flexId=\"${this.id}-content_FieldValueHelp\" property=\"${vhpCtx}\" contextPath=\"${this.contextPath}\" />\n\t\t\t</internalMacro:dependents>`;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\tconst contextPathPath = this.contextPath.getPath();\n\t\tconst metaPathPath = this.metaPath.getPath();\n\t\treturn xml`\n\t\t<internalMacro:Field\n\t\t\txmlns:internalMacro=\"sap.fe.macros.internal\"\n\t\t\tentitySet=\"${contextPathPath}\"\n\t\t\tdataField=\"${metaPathPath}\"\n\t\t\teditMode=\"${this.editModeExpression}\"\n\t\t\tonChange=\"${this.change}\"\n\t\t\t_flexId=\"${this.id}\"\n\t\t\tsemanticObject=\"${this.semanticObject}\"\n\t\t>\n\t\t\t${this.getFormatOptions()}\n\t\t\t${this.getPossibleValueHelpTemplate()}\n\t\t</internalMacro:Field>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":9342,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","BindingToolkit","FieldHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_exports","resolveBindingString","ifElse","equal","compileExpression","xml","defineBuildingBlock","blockEvent","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","PublicFieldBlock","name","publicNamespace","returnTypes","type","isPublic","required","validate","formatOptionsInput","displayMode","includes","measureDisplayMode","textExpandBehaviorDisplay","_BuildingBlockBase","props","_this","this","readOnly","editModeExpression","_proto","getFormatOptions","formatOptions","textLinesEdit","textMaxLines","textMaxCharactersDisplay","textMaxLength","writeDateFormatOptions","showTime","showDate","showTimezone","getPossibleValueHelpTemplate","vhp","valueHelpProperty","metaPath","vhpCtx","getModel","createBindingContext","hasValueHelpAnnotations","hasValueHelpAnnotation","getObject","id","contextPath","getTemplate","contextPathPath","getPath","metaPathPath","change","semanticObject"],"sources":["PublicField.block-dbg.js"],"mappings":"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","sourceRoot":"field"}},{"offset":{"line":9379,"column":0},"map":{"version":3,"names":["TextAreaEx","defineUI5Class","fireLiveChange","parameters","_validateTextLength","value","setValue","maxLength","getMaxLength","undefined","length","valueStateText","getResourceModel","getText","setValueState","ValueState","Error","setValueStateText","None","_TextArea"],"sourceRoot":"field","sources":["TextAreaEx.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport _TextArea from \"sap/m/TextArea\";\nimport { ValueState } from \"sap/ui/core/library\";\n\n/**\n * Extension of the TextArea control to add a check for the maximum length when setting the value.\n *\n * @extends sap.m.TextArea\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.field.TextAreaEx\")\nexport default class TextAreaEx extends _TextArea {\n\t/**\n\t * Fires live change event.\n\t *\n\t * @param {object} [parameters] Parameters to pass along with the event\n\t * @param parameters.value\n\t * @returns Reference to `this` in order to allow method chaining\n\t */\n\tfireLiveChange(parameters?: { value?: string }): this {\n\t\tsuper.fireLiveChange(parameters);\n\t\tthis._validateTextLength(parameters?.value);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets the value for the text area.\n\t *\n\t * @param {string} value New value for the property `value`\n\t * @returns Reference to `this` in order to allow method chaining\n\t * @private\n\t */\n\tsetValue(value: string) {\n\t\tsuper.setValue(value);\n\t\tthis._validateTextLength(value);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets an error message for the value state if the maximum length is specified and the new value exceeds this maximum length.\n\t *\n\t * @param {string} [value] New value for property `value`\n\t * @private\n\t */\n\t_validateTextLength(value?: string) {\n\t\tconst maxLength = this.getMaxLength();\n\t\tif (!maxLength || value === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tif (value.length > maxLength) {\n\t\t\tconst valueStateText = getResourceModel(this).getText(\"M_FIELD_TEXTAREA_TEXT_TOO_LONG\");\n\t\t\tthis.setValueState(ValueState.Error);\n\t\t\tthis.setValueStateText(valueStateText);\n\t\t} else {\n\t\t\tthis.setValueState(ValueState.None);\n\t\t}\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;MAYqBA,UAAU;EAP/B;AACA;AACA;AACA;AACA;AACA;EALA,OAMCC,cAAc,CAAC,gCAAgC,CAAC;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA;IAEhD;AACD;AACA;AACA;AACA;AACA;AACA;IANC,OAOAC,cAAc,GAAd,wBAAeC,UAA+B,EAAQ;MACrD,qBAAMD,cAAc,YAACC,UAAU;MAC/B,IAAI,CAACC,mBAAmB,CAACD,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEE,KAAK,CAAC;MAC3C,OAAO,IAAI;IACZ;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA,OANC;IAAA,OAOAC,QAAQ,GAAR,kBAASD,KAAa,EAAE;MACvB,qBAAMC,QAAQ,YAACD,KAAK;MACpB,IAAI,CAACD,mBAAmB,CAACC,KAAK,CAAC;MAC/B,OAAO,IAAI;IACZ;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAD,mBAAmB,GAAnB,6BAAoBC,KAAc,EAAE;MACnC,MAAME,SAAS,GAAG,IAAI,CAACC,YAAY,EAAE;MACrC,IAAI,CAACD,SAAS,IAAIF,KAAK,KAAKI,SAAS,EAAE;QACtC;MACD;MACA,IAAIJ,KAAK,CAACK,MAAM,GAAGH,SAAS,EAAE;QAC7B,MAAMI,cAAc,GAAGC,gBAAgB,CAAC,IAAI,CAAC,CAACC,OAAO,CAAC,gCAAgC,CAAC;QACvF,IAAI,CAACC,aAAa,CAACC,UAAU,CAACC,KAAK,CAAC;QACpC,IAAI,CAACC,iBAAiB,CAACN,cAAc,CAAC;MACvC,CAAC,MAAM;QACN,IAAI,CAACG,aAAa,CAACC,UAAU,CAACG,IAAI,CAAC;MACpC;IACD,CAAC;IAAA;EAAA,EA7CsCC,SAAS;EAAA;EAAA;AAAA"}},{"offset":{"line":9457,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","ResourceModelHelper","_TextArea","library","_dec","_class","_exports","ValueState","getResourceModel","defineUI5Class","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","TextAreaEx","_TextArea2","apply","this","arguments","_proto","fireLiveChange","parameters","call","_validateTextLength","value","setValue","maxLength","getMaxLength","undefined","length","valueStateText","getText","setValueState","Error","setValueStateText","None"],"sources":["TextAreaEx-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,4CAAO,CAAC,mCAAoC,0CAA2C,iBAAkB,uBAAwB,SAAUC,EAAcC,EAAqBC,EAAWC,GAC9L,aAEA,IAAIC,EAAMC,EACV,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAaJ,EAAQI,WACzB,IAAIC,EAAmBP,EAAoBO,iBAC3C,IAAIC,EAAiBT,EAAaS,eAClC,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,IAAII,GAOJnB,EAAOK,EAAe,kCAAmCL,EAAKC,EAAsB,SAAUmB,GAC5Fd,EAAea,EAAYC,GAC3B,SAASD,IACP,OAAOC,EAAWC,MAAMC,KAAMC,YAAcD,IAC9C,CACApB,EAAWiB,EACX,IAAIK,EAASL,EAAWV,UAQxBe,EAAOC,eAAiB,SAASA,EAAeC,GAC9CN,EAAWX,UAAUgB,eAAeE,KAAKL,KAAMI,GAC/CJ,KAAKM,oBAAoBF,IAAe,MAAQA,SAAoB,OAAS,EAAIA,EAAWG,OAC5F,OAAOP,IACT,EASAE,EAAOM,SAAW,SAASA,EAASD,GAClCT,EAAWX,UAAUqB,SAASH,KAAKL,KAAMO,GACzCP,KAAKM,oBAAoBC,GACzB,OAAOP,IACT,EAQAE,EAAOI,oBAAsB,SAASA,EAAoBC,GACxD,MAAME,EAAYT,KAAKU,eACvB,IAAKD,GAAaF,IAAUI,UAAW,CACrC,MACF,CACA,GAAIJ,EAAMK,OAASH,EAAW,CAC5B,MAAMI,EAAiB/B,EAAiBkB,MAAMc,QAAQ,kCACtDd,KAAKe,cAAclC,EAAWmC,OAC9BhB,KAAKiB,kBAAkBJ,EACzB,KAAO,CACLb,KAAKe,cAAclC,EAAWqC,KAChC,CACF,EACA,OAAOrB,CACT,CArDoF,CAqDlFrB,KAAeG,GACjBC,EAAWiB,EACX,OAAOjB,CACT,EAAG","sourceRoot":"field"}},{"offset":{"line":9462,"column":0},"map":{"version":3,"names":["feBundle","Core","getLibraryResourceBundle","EDITSTATE","ALL","id","display","getText","UNCHANGED","OWN_DRAFT","LOCKED","UNSAVED_CHANGES","ALL_HIDING_DRAFTS","SAVED_ONLY","MY_DRAFTS","getEditStatesContext","macroProps","availableEditStates","getProperty","JSONModel","bindContext","getBoundContext","getCurrentUserID","sap","ushell","Container","getUser","getId","getFilterForEditState","sEditState","Filter","filters","path","operator","FilterOperator","EQ","value1","and","NE","currentUserID","Any","variable","condition","FilterOperatorUtil","addOperator","Operator","name","valueTypes","ValueType","Self","tokenParse","format","vValue","values","getModelFilter","oCondition","parse","parm","validateInput","checkValidated","validated","ConditionValidated","Validated"],"sourceRoot":"filter","sources":["DraftEditState.ts"],"sourcesContent":["import Core from \"sap/ui/core/Core\";\nimport FilterOperatorUtil from \"sap/ui/mdc/condition/FilterOperatorUtil\";\nimport Operator from \"sap/ui/mdc/condition/Operator\";\nimport ConditionValidated from \"sap/ui/mdc/enum/ConditionValidated\";\nimport Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\nconst feBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\n/**\n * Enum for edit state of a document in an draft enabled service collection.\n * Allows to simplify filtering on a set of documents as described by the\n * individual state\n *\n * @readonly\n * @enum {string}\n * @private\n * @ui5-restricted\n */\nconst EDITSTATE = {\n\t/**\n\t * Active documents that don't have a corresponding draft and all own draft documents\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tALL: {\n\t\tid: \"ALL\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_ALL_FILTER\")\n\t},\n\t/**\n\t * Active documents that don't have a draft document\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tUNCHANGED: {\n\t\tid: \"UNCHANGED\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_UNCHANGED_FILTER\")\n\t},\n\t/**\n\t * Own draft documents\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tOWN_DRAFT: {\n\t\tid: \"OWN_DRAFT\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_OWN_DRAFT_FILTER\")\n\t},\n\t/**\n\t * Active documents that are locked by other users\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tLOCKED: {\n\t\tid: \"LOCKED\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_LOCKED_FILTER\")\n\t},\n\t/**\n\t * Active documents that have draft documents by other users\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tUNSAVED_CHANGES: {\n\t\tid: \"UNSAVED_CHANGES\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_UNSAVED_CHANGES_FILTER\")\n\t},\n\t/**\n\t * Active documents only\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tALL_HIDING_DRAFTS: {\n\t\tid: \"ALL_HIDING_DRAFTS\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_ALL_HIDING_DRAFTS_FILTER\")\n\t},\n\t/**\n\t * Active documents only (with collaborative draft)\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tSAVED_ONLY: {\n\t\tid: \"SAVED_ONLY\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_SAVED_ONLY_FILTER\")\n\t},\n\t/**\n\t * My drafts, i.e. the drafts I have created, have been invited to or have made a change in (with collaborative draft)\n\t *\n\t * @private\n\t * @ui5-restricted\n\t */\n\tMY_DRAFTS: {\n\t\tid: \"MY_DRAFTS\",\n\t\tdisplay: feBundle.getText(\"C_DRAFT_EDIT_STATE_DRAFT_MY_DRAFTS_FILTER\")\n\t},\n\n\tgetEditStatesContext: function (macroProps: Context) {\n\t\tlet availableEditStates: any[];\n\t\tif (macroProps.getProperty(\"isDraftCollaborative\")) {\n\t\t\tavailableEditStates = [EDITSTATE.ALL, EDITSTATE.MY_DRAFTS, EDITSTATE.SAVED_ONLY];\n\t\t} else {\n\t\t\tavailableEditStates = [\n\t\t\t\tEDITSTATE.ALL,\n\t\t\t\tEDITSTATE.ALL_HIDING_DRAFTS,\n\t\t\t\tEDITSTATE.UNCHANGED,\n\t\t\t\tEDITSTATE.OWN_DRAFT,\n\t\t\t\tEDITSTATE.LOCKED,\n\t\t\t\tEDITSTATE.UNSAVED_CHANGES\n\t\t\t];\n\t\t}\n\n\t\treturn new JSONModel(availableEditStates).bindContext(\"/\").getBoundContext()!;\n\t},\n\tgetCurrentUserID: function (): string | undefined {\n\t\treturn sap.ushell?.Container?.getUser()?.getId();\n\t},\n\tgetFilterForEditState: function (sEditState: any) {\n\t\tswitch (sEditState) {\n\t\t\tcase EDITSTATE.UNCHANGED.id:\n\t\t\t\treturn new Filter({\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\tnew Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: true }),\n\t\t\t\t\t\tnew Filter({ path: \"HasDraftEntity\", operator: FilterOperator.EQ, value1: false })\n\t\t\t\t\t],\n\t\t\t\t\tand: true\n\t\t\t\t});\n\t\t\tcase EDITSTATE.OWN_DRAFT.id:\n\t\t\t\treturn new Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: false });\n\t\t\tcase EDITSTATE.LOCKED.id:\n\t\t\t\treturn new Filter({\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\tnew Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: true }),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"SiblingEntity/IsActiveEntity\",\n\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\tvalue1: null\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"DraftAdministrativeData/InProcessByUser\",\n\t\t\t\t\t\t\toperator: FilterOperator.NE,\n\t\t\t\t\t\t\tvalue1: \"\"\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"DraftAdministrativeData/InProcessByUser\",\n\t\t\t\t\t\t\toperator: FilterOperator.NE,\n\t\t\t\t\t\t\tvalue1: null\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t\tand: true\n\t\t\t\t});\n\t\t\tcase EDITSTATE.UNSAVED_CHANGES.id:\n\t\t\t\treturn new Filter({\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\tnew Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: true }),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"SiblingEntity/IsActiveEntity\",\n\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\tvalue1: null\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"DraftAdministrativeData/InProcessByUser\",\n\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\tvalue1: \"\"\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t\tand: true\n\t\t\t\t});\n\t\t\tcase EDITSTATE.ALL_HIDING_DRAFTS.id:\n\t\t\tcase EDITSTATE.SAVED_ONLY.id:\n\t\t\t\treturn new Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: true });\n\t\t\tcase EDITSTATE.MY_DRAFTS.id:\n\t\t\t\tconst currentUserID = this.getCurrentUserID();\n\t\t\t\treturn currentUserID\n\t\t\t\t\t? new Filter({\n\t\t\t\t\t\t\tfilters: [\n\t\t\t\t\t\t\t\tnew Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: false }),\n\t\t\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\t\t\tpath: \"DraftAdministrativeData/DraftAdministrativeUser\",\n\t\t\t\t\t\t\t\t\toperator: FilterOperator.Any,\n\t\t\t\t\t\t\t\t\tvariable: \"user\",\n\t\t\t\t\t\t\t\t\tcondition: new Filter({\n\t\t\t\t\t\t\t\t\t\tpath: \"user/UserID\",\n\t\t\t\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\t\t\t\tvalue1: this.getCurrentUserID()\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tand: true\n\t\t\t\t\t  })\n\t\t\t\t\t: new Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: false }); // Couldn't find current user (e.g. no shell) --> show all drafts\n\t\t\tdefault:\n\t\t\t\t// ALL\n\t\t\t\treturn new Filter({\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\tnew Filter({ path: \"IsActiveEntity\", operator: FilterOperator.EQ, value1: false }),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"SiblingEntity/IsActiveEntity\",\n\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\tvalue1: null\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t\tand: false\n\t\t\t\t});\n\t\t}\n\t}\n};\n\nFilterOperatorUtil.addOperator(\n\tnew Operator({\n\t\tname: \"DRAFT_EDIT_STATE\",\n\t\tvalueTypes: [(Operator as any).ValueType.Self, (Operator as any).ValueType.Self],\n\t\ttokenParse: \"^(.*)$\",\n\t\tformat: function (vValue: any) {\n\t\t\treturn vValue && vValue.values[1];\n\t\t},\n\t\tgetModelFilter: function (oCondition: any /*sFieldPath: any*/) {\n\t\t\treturn EDITSTATE.getFilterForEditState(oCondition.values[0]);\n\t\t},\n\t\tparse: function (parm: any) {\n\t\t\treturn parm;\n\t\t},\n\t\tvalidateInput: true,\n\t\tcheckValidated: function (oCondition: any) {\n\t\t\t// This ensures that the listfieldhelp is also called for old variants saved with Validated parameter as undefined.\n\t\t\toCondition.validated = ConditionValidated.Validated;\n\t\t}\n\t} as any)\n);\n\nexport default EDITSTATE;\n"],"mappings":"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"}},{"offset":{"line":9702,"column":0},"map":{"version":3,"names":["sap","ui","define","Core","FilterOperatorUtil","Operator","ConditionValidated","Filter","FilterOperator","JSONModel","feBundle","getLibraryResourceBundle","EDITSTATE","ALL","id","display","getText","UNCHANGED","OWN_DRAFT","LOCKED","UNSAVED_CHANGES","ALL_HIDING_DRAFTS","SAVED_ONLY","MY_DRAFTS","getEditStatesContext","macroProps","availableEditStates","getProperty","bindContext","getBoundContext","getCurrentUserID","_sap$ushell","_sap$ushell$Container","_sap$ushell$Container2","ushell","Container","getUser","getId","getFilterForEditState","sEditState","filters","path","operator","EQ","value1","and","NE","currentUserID","this","Any","variable","condition","addOperator","name","valueTypes","ValueType","Self","tokenParse","format","vValue","values","getModelFilter","oCondition","parse","parm","validateInput","checkValidated","validated","Validated"],"sources":["DraftEditState-dbg.js"],"mappings":"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","sourceRoot":"filter"}},{"offset":{"line":9707,"column":0},"map":{"version":3,"names":["isRequiredInFilter","path","annotationInterface","model","context","getModel","propertyPath","getPath","propertyLocationPath","CommonHelper","getLocationForPropertyPath","property","required","getObject","oFR","CommonUtils","getFilterRestrictionsByPath","RequiredProperties","includes","maxConditions","max","filterRestrictions","propertyInfo","$Type","FilterAllowedExpressions","allowedExpression","getSpecificAllowedExpression","getConditionsBinding","dataModelObjectPath","relativePropertyPath","getContextRelativeTargetObjectPath","compileExpression","pathInModel","constraints","value","AnnotationHelper","format","matches","match","propertyContraints","substring","indexOf","replace","undefined","formatOptions","hasOwnProperty","$Nullable","arguments","parseKeepsEmptyString","fiscalType","getFiscalType","getProperty","getDataType","type","typeMapping","EDM_TYPE_MAPPING","getPlaceholder","FiscalDate","getPattern"],"sourceRoot":"filter","sources":["FilterFieldHelper.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { compileExpression, EDM_TYPE_MAPPING, getFiscalType, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { DataModelObjectPath, getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getProperty } from \"sap/fe/core/templating/PropertyFormatters\";\nimport type { ComputedAnnotationInterface, MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\nimport FiscalDate from \"sap/fe/core/type/FiscalDate\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\n/**\n * Checks whether the property with the given path is required in the filter for the given annotation interface.\n *\n * @param path Property path - ignored when provided as string\n * @param annotationInterface Structure returned by the ODataMetaModel when using the @@ operator in XML templates\n * @returns The value true if the given input is requird for filtering\n */\nexport function isRequiredInFilter(path: string | unknown, annotationInterface: ComputedAnnotationInterface) {\n\tconst model = annotationInterface.context.getModel() as ODataMetaModel;\n\tconst propertyPath = annotationInterface.context.getPath();\n\tconst propertyLocationPath = CommonHelper.getLocationForPropertyPath(model, propertyPath);\n\n\tlet property: string;\n\tlet required = model.getObject(`${propertyLocationPath}/@com.sap.vocabularies.Common.v1.ResultContext`);\n\n\tif (!required) {\n\t\tif (typeof path === \"string\") {\n\t\t\tproperty = path;\n\t\t} else {\n\t\t\tproperty = model.getObject(`${propertyPath}@sapui.name`);\n\t\t}\n\t\tconst oFR = CommonUtils.getFilterRestrictionsByPath(propertyLocationPath, model);\n\t\trequired = oFR?.RequiredProperties?.includes(property);\n\t}\n\treturn required;\n}\n\n/**\n * Checks the maximum number of conditions for the given path and given annotation interface.\n *\n * @param path Property path - ignored when provided as string\n * @param annotationInterface Structure returned by the ODataMetaModel when using the @@ operator in XML templates\n * @returns The number of maximum allowed conditions or -1 if there is no limit.\n */\nexport function maxConditions(path: string | unknown, annotationInterface: ComputedAnnotationInterface) {\n\tconst model = annotationInterface.context.getModel() as ODataMetaModel;\n\tconst propertyPath = annotationInterface.context.getPath();\n\tconst propertyLocationPath = CommonHelper.getLocationForPropertyPath(model, propertyPath);\n\n\tlet property: string;\n\tlet max = -1;\n\n\tif (model.getObject(`${propertyLocationPath}/@com.sap.vocabularies.Common.v1.ResultContext`) === true) {\n\t\treturn 1;\n\t}\n\n\tif (typeof path === \"string\") {\n\t\tproperty = path;\n\t} else {\n\t\tproperty = model.getObject(`${propertyPath}@sapui.name`);\n\t}\n\tconst filterRestrictions = CommonUtils.getFilterRestrictionsByPath(propertyLocationPath, model);\n\tlet propertyInfo = model.getObject(`${propertyLocationPath}/${property}`);\n\tif (!propertyInfo) {\n\t\tpropertyInfo = model.getObject(propertyPath);\n\t}\n\tif (propertyInfo.$Type === \"Edm.Boolean\") {\n\t\tmax = 1;\n\t} else if (filterRestrictions?.FilterAllowedExpressions?.[property]) {\n\t\tconst allowedExpression = CommonUtils.getSpecificAllowedExpression(filterRestrictions.FilterAllowedExpressions[property]);\n\t\tif (allowedExpression === \"SingleValue\" || allowedExpression === \"SingleRange\") {\n\t\t\tmax = 1;\n\t\t}\n\t}\n\treturn max;\n}\n\n/**\n * To Create binding for mdc:filterfield conditions.\n *\n * @param dataModelObjectPath Data Model Object path to filter field property\n * @returns Expression binding for conditions for the field\n */\nexport function getConditionsBinding(dataModelObjectPath: DataModelObjectPath) {\n\tconst relativePropertyPath = getContextRelativeTargetObjectPath(dataModelObjectPath, false, true);\n\treturn compileExpression(pathInModel(`/conditions/${relativePropertyPath}`, \"$filters\"));\n}\n\n/**\n * Get the contraints string for the given property and interface.\n *\n * @param context\n * @param annotationInterface Structure returned by the ODataMetaModel when using the @@ operator in XML templates\n * @returns Constraints as string if available otherwise undefined\n */\nexport function constraints(context: MetaModelContext, annotationInterface: ComputedAnnotationInterface) {\n\tconst value = (AnnotationHelper.format(context, annotationInterface) as string) || \"\";\n\tconst matches = value.match(/constraints:.*?({.*?})/);\n\tlet propertyContraints = matches?.[1] || \"\";\n\t// Workaround. Add \"V4: true\" to DateTimeOffset constraints. AnnotationHelper is not aware of this flag.\n\tif (value.includes(\"sap.ui.model.odata.type.DateTimeOffset\")) {\n\t\tif (propertyContraints) {\n\t\t\tpropertyContraints = `${propertyContraints.substring(0, matches?.[1].indexOf(\"}\"))}, V4: true}`;\n\t\t} else {\n\t\t\tpropertyContraints = \"{V4: true}\";\n\t\t}\n\t}\n\t// Remove {nullable:false} from the constraints as it prevents from having an empty filter field\n\t// in the case of a single-value filter\n\tif (propertyContraints.includes(\"'nullable':false\")) {\n\t\tpropertyContraints = propertyContraints.replace(/,[ ]*'nullable':false/, \"\").replace(/'nullable':false[, ]*/, \"\");\n\t\tif (propertyContraints === \"{}\") {\n\t\t\tpropertyContraints = \"\";\n\t\t}\n\t}\n\treturn propertyContraints || undefined;\n}\n\n/**\n * Get the format options as string for the given path and given annotation interface.\n *\n * @param context\n * @param annotationInterface Structure returned by the ODataMetaModel when using the @@ operator in XML templates\n * @returns Format options as string if available otherwise undefined\n */\nexport function formatOptions(context: MetaModelContext, annotationInterface: ComputedAnnotationInterface) {\n\t// as the Annotation helper always returns \"parseKeepsEmptyString: true\" we need to prevent this in case a property (of type string) is nullable\n\t// Filling annotationInterface.arguments with an array where the first parameter is null, and the second contains the \"expected\"\n\t// parseKeepsEmptyString value follows a proposal from the model colleagues to \"overrule\" the behavior of the AnnotationHelper\n\tif (context.$Type === \"Edm.String\") {\n\t\tif (!context.hasOwnProperty(\"$Nullable\") || context.$Nullable === true) {\n\t\t\tannotationInterface.arguments = [null, { parseKeepsEmptyString: false }];\n\t\t}\n\t\tconst fiscalType = getFiscalType(getProperty(context, annotationInterface));\n\t\tif (fiscalType) {\n\t\t\tif (!annotationInterface.arguments) {\n\t\t\t\tannotationInterface.arguments = [null, {}];\n\t\t\t}\n\t\t\tannotationInterface.arguments[1].fiscalType = fiscalType;\n\t\t}\n\t}\n\tconst value = (AnnotationHelper.format(context, annotationInterface) as string) || \"\";\n\treturn value.match(/formatOptions:.*?({.*?})/)?.[1] || undefined;\n}\n\n/**\n * Get the data type for a given property.\n *\n * @param property Property information\n * @returns Type as string\n */\nexport function getDataType(property: Property) {\n\tif (property.type === \"Edm.String\") {\n\t\tconst fiscalType = getFiscalType(property);\n\t\tif (fiscalType) {\n\t\t\treturn \"sap.fe.core.type.FiscalDate\";\n\t\t}\n\t}\n\tconst typeMapping = EDM_TYPE_MAPPING[property.type];\n\treturn typeMapping ? typeMapping.type : property.type;\n}\n\n/**\n * Get the placeholder of properties of type Edm.String.\n *\n * @param property Property information\n * @returns Placeholder as string if available otherwise undefined\n */\nexport function getPlaceholder(property: Property): string | undefined {\n\tif (property.type === \"Edm.String\") {\n\t\tconst fiscalType = getFiscalType(property);\n\t\tif (fiscalType) {\n\t\t\treturn new FiscalDate({ fiscalType }, {}).getPattern();\n\t\t}\n\t}\n\treturn undefined;\n}\n"],"mappings":"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"}},{"offset":{"line":9899,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","BindingToolkit","DataModelPathHelper","PropertyFormatters","FiscalDate","CommonHelper","AnnotationHelper","_exports","getProperty","getContextRelativeTargetObjectPath","pathInModel","getFiscalType","EDM_TYPE_MAPPING","compileExpression","isRequiredInFilter","path","annotationInterface","model","context","getModel","propertyPath","getPath","propertyLocationPath","getLocationForPropertyPath","property","required","getObject","_oFR$RequiredProperti","oFR","getFilterRestrictionsByPath","RequiredProperties","includes","maxConditions","_filterRestrictions$F","max","filterRestrictions","propertyInfo","$Type","FilterAllowedExpressions","allowedExpression","getSpecificAllowedExpression","getConditionsBinding","dataModelObjectPath","relativePropertyPath","constraints","value","format","matches","match","propertyContraints","substring","indexOf","replace","undefined","formatOptions","_value$match","hasOwnProperty","$Nullable","arguments","parseKeepsEmptyString","fiscalType","getDataType","type","typeMapping","getPlaceholder","getPattern"],"sources":["FilterFieldHelper-dbg.js"],"mappings":"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","sourceRoot":"filter"}},{"offset":{"line":9904,"column":0},"map":{"version":3,"names":["getDisplayProperty","propertyObjectPath","propertyConverted","hasValueHelp","getDisplayMode","getFilterFieldDisplayFormat","propertyInterface","oTextAnnotation","annotations","Common","Text","bHasValueHelp","entityTextArrangement","targetEntityType","UI","TextArrangement","_getDisplayModeFromValueHelp","Interface","context","metaModel","getModel","requestValueListInfo","getPath","then","valueListInfo","firstKey","Object","keys","firstValueListInfo","valueListParameter","Parameters","find","element","LocalDataProperty","$PropertyPath","targetObject","name","valueListProperty","ValueListProperty","textAnnotation","getObject","CollectionPath"],"sourceRoot":"filter","sources":["FilterFieldTemplating.ts"],"sourcesContent":["import { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { hasValueHelp } from \"sap/fe/core/templating/PropertyHelper\";\nimport { getDisplayMode } from \"sap/fe/core/templating/UIFormatters\";\n\nimport type { Property } from \"@sap-ux/vocabularies-types\";\nimport type { ComputedAnnotationInterface } from \"sap/fe/core/templating/UIFormatters\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nexport const getDisplayProperty = function (propertyObjectPath: DataModelObjectPath, propertyConverted: Property): string {\n\treturn hasValueHelp(propertyConverted) ? getDisplayMode(propertyObjectPath) : \"Value\";\n};\n\nexport const getFilterFieldDisplayFormat = async function (\n\tpropertyObjectPath: DataModelObjectPath,\n\tpropertyConverted: Property,\n\tpropertyInterface: ComputedAnnotationInterface\n): Promise<string> {\n\tconst oTextAnnotation = propertyConverted?.annotations?.Common?.Text;\n\tif (oTextAnnotation) {\n\t\t// The text annotation should be on the property defined\n\t\treturn getDisplayProperty(propertyObjectPath, propertyConverted);\n\t}\n\tconst bHasValueHelp = hasValueHelp(propertyConverted);\n\tif (bHasValueHelp) {\n\t\t// Exceptional case for missing text annotation on the property (retrieve text from value list)\n\t\t// Consider TextArrangement at EntityType otherwise set default display format 'DescriptionValue'\n\t\tconst entityTextArrangement = propertyObjectPath?.targetEntityType?.annotations?.UI?.TextArrangement;\n\t\treturn entityTextArrangement\n\t\t\t? getDisplayMode(propertyObjectPath)\n\t\t\t: _getDisplayModeFromValueHelp(propertyInterface, propertyObjectPath);\n\t}\n\treturn \"Value\";\n};\n\n/**\n * Method to determine the display mode from the value help.\n *\n * @param Interface The current templating context\n * @param propertyObjectPath The global path to reach the entitySet\n * @returns A promise with the string 'DescriptionValue' or 'Value', depending on whether a text annotation exists for the property in the value help\n * Hint: A text arrangement is consciously ignored. If the text is retrieved from the value help, the text arrangement of the value help property isn´t considered. Instead, the default text arrangement #TextFirst\n * is used.\n */\nexport async function _getDisplayModeFromValueHelp(\n\tInterface: ComputedAnnotationInterface,\n\tpropertyObjectPath: DataModelObjectPath\n): Promise<string> {\n\tconst context = Interface.context as unknown as Context;\n\tconst metaModel = Interface.context.getModel() as unknown as ODataMetaModel;\n\n\treturn await metaModel.requestValueListInfo(context.getPath(), true, context).then(function (valueListInfo: any) {\n\t\tconst firstKey = Object.keys(valueListInfo)[0];\n\t\tconst firstValueListInfo = valueListInfo[firstKey];\n\t\tconst valueListParameter = firstValueListInfo.Parameters?.find((element: any) => {\n\t\t\treturn element.LocalDataProperty?.$PropertyPath === propertyObjectPath?.targetObject?.name;\n\t\t});\n\t\tconst valueListProperty = valueListParameter?.ValueListProperty;\n\n\t\tconst textAnnotation = metaModel.getObject(\n\t\t\t\"/\" + firstValueListInfo.CollectionPath + \"/\" + valueListProperty + \"@com.sap.vocabularies.Common.v1.Text\"\n\t\t);\n\t\treturn textAnnotation ? \"DescriptionValue\" : \"Value\";\n\t});\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;EASO,MAAMA,kBAAkB,GAAG,UAAUC,kBAAuC,EAAEC,iBAA2B,EAAU;IACzH,OAAOC,YAAY,CAACD,iBAAiB,CAAC,GAAGE,cAAc,CAACH,kBAAkB,CAAC,GAAG,OAAO;EACtF,CAAC;EAAC;EAEK,MAAMI,2BAA2B,GAAG,gBAC1CJ,kBAAuC,EACvCC,iBAA2B,EAC3BI,iBAA8C,EAC5B;IAAA;IAClB,MAAMC,eAAe,GAAGL,iBAAiB,aAAjBA,iBAAiB,gDAAjBA,iBAAiB,CAAEM,WAAW,oFAA9B,sBAAgCC,MAAM,2DAAtC,uBAAwCC,IAAI;IACpE,IAAIH,eAAe,EAAE;MACpB;MACA,OAAOP,kBAAkB,CAACC,kBAAkB,EAAEC,iBAAiB,CAAC;IACjE;IACA,MAAMS,aAAa,GAAGR,YAAY,CAACD,iBAAiB,CAAC;IACrD,IAAIS,aAAa,EAAE;MAAA;MAClB;MACA;MACA,MAAMC,qBAAqB,GAAGX,kBAAkB,aAAlBA,kBAAkB,gDAAlBA,kBAAkB,CAAEY,gBAAgB,oFAApC,sBAAsCL,WAAW,qFAAjD,uBAAmDM,EAAE,2DAArD,uBAAuDC,eAAe;MACpG,OAAOH,qBAAqB,GACzBR,cAAc,CAACH,kBAAkB,CAAC,GAClCe,4BAA4B,CAACV,iBAAiB,EAAEL,kBAAkB,CAAC;IACvE;IACA,OAAO,OAAO;EACf,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EARA;EASO,eAAee,4BAA4B,CACjDC,SAAsC,EACtChB,kBAAuC,EACrB;IAClB,MAAMiB,OAAO,GAAGD,SAAS,CAACC,OAA6B;IACvD,MAAMC,SAAS,GAAGF,SAAS,CAACC,OAAO,CAACE,QAAQ,EAA+B;IAE3E,OAAO,MAAMD,SAAS,CAACE,oBAAoB,CAACH,OAAO,CAACI,OAAO,EAAE,EAAE,IAAI,EAAEJ,OAAO,CAAC,CAACK,IAAI,CAAC,UAAUC,aAAkB,EAAE;MAAA;MAChH,MAAMC,QAAQ,GAAGC,MAAM,CAACC,IAAI,CAACH,aAAa,CAAC,CAAC,CAAC,CAAC;MAC9C,MAAMI,kBAAkB,GAAGJ,aAAa,CAACC,QAAQ,CAAC;MAClD,MAAMI,kBAAkB,4BAAGD,kBAAkB,CAACE,UAAU,0DAA7B,sBAA+BC,IAAI,CAAEC,OAAY,IAAK;QAAA;QAChF,OAAO,0BAAAA,OAAO,CAACC,iBAAiB,0DAAzB,sBAA2BC,aAAa,OAAKjC,kBAAkB,aAAlBA,kBAAkB,iDAAlBA,kBAAkB,CAAEkC,YAAY,2DAAhC,uBAAkCC,IAAI;MAC3F,CAAC,CAAC;MACF,MAAMC,iBAAiB,GAAGR,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAES,iBAAiB;MAE/D,MAAMC,cAAc,GAAGpB,SAAS,CAACqB,SAAS,CACzC,GAAG,GAAGZ,kBAAkB,CAACa,cAAc,GAAG,GAAG,GAAGJ,iBAAiB,GAAG,sCAAsC,CAC1G;MACD,OAAOE,cAAc,GAAG,kBAAkB,GAAG,OAAO;IACrD,CAAC,CAAC;EACH;EAAC;EAAA;AAAA"}},{"offset":{"line":9965,"column":0},"map":{"version":3,"names":["sap","ui","define","PropertyHelper","UIFormatters","_exports","getDisplayMode","hasValueHelp","getDisplayProperty","propertyObjectPath","propertyConverted","getFilterFieldDisplayFormat","async","propertyInterface","_propertyConverted$an","_propertyConverted$an2","oTextAnnotation","annotations","Common","Text","bHasValueHelp","_propertyObjectPath$t","_propertyObjectPath$t2","_propertyObjectPath$t3","entityTextArrangement","targetEntityType","UI","TextArrangement","_getDisplayModeFromValueHelp","Interface","context","metaModel","getModel","requestValueListInfo","getPath","then","valueListInfo","_firstValueListInfo$P","firstKey","Object","keys","firstValueListInfo","valueListParameter","Parameters","find","element","_element$LocalDataPro","_propertyObjectPath$t4","LocalDataProperty","$PropertyPath","targetObject","name","valueListProperty","ValueListProperty","textAnnotation","getObject","CollectionPath"],"sources":["FilterFieldTemplating-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wDAAO,CAAC,wCAAyC,uCAAwC,SAAUC,EAAgBC,GACxH,aAEA,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAiBF,EAAaE,eAClC,IAAIC,EAAeJ,EAAeI,aAClC,MAAMC,EAAqB,SAAUC,EAAoBC,GACvD,OAAOH,EAAaG,GAAqBJ,EAAeG,GAAsB,OAChF,EACAJ,EAASG,mBAAqBA,EAC9B,MAAMG,EAA8BC,eAAgBH,EAAoBC,EAAmBG,GACzF,IAAIC,EAAuBC,EAC3B,MAAMC,EAAkBN,IAAsB,MAAQA,SAA2B,OAAS,GAAKI,EAAwBJ,EAAkBO,eAAiB,MAAQH,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBI,UAAY,MAAQH,SAAgC,OAAS,EAAIA,EAAuBI,KACtV,GAAIH,EAAiB,CAEnB,OAAOR,EAAmBC,EAAoBC,EAChD,CACA,MAAMU,EAAgBb,EAAaG,GACnC,GAAIU,EAAe,CACjB,IAAIC,EAAuBC,EAAwBC,EAGnD,MAAMC,EAAwBf,IAAuB,MAAQA,SAA4B,OAAS,GAAKY,EAAwBZ,EAAmBgB,oBAAsB,MAAQJ,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBJ,eAAiB,MAAQK,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBI,MAAQ,MAAQH,SAAgC,OAAS,EAAIA,EAAuBI,gBACvd,OAAOH,EAAwBlB,EAAeG,GAAsBmB,EAA6Bf,EAAmBJ,EACtH,CACA,MAAO,OACT,EAWAJ,EAASM,4BAA8BA,EACvCC,eAAegB,EAA6BC,EAAWpB,GACrD,MAAMqB,EAAUD,EAAUC,QAC1B,MAAMC,EAAYF,EAAUC,QAAQE,WACpC,aAAaD,EAAUE,qBAAqBH,EAAQI,UAAW,KAAMJ,GAASK,KAAK,SAAUC,GAC3F,IAAIC,EACJ,MAAMC,EAAWC,OAAOC,KAAKJ,GAAe,GAC5C,MAAMK,EAAqBL,EAAcE,GACzC,MAAMI,GAAsBL,EAAwBI,EAAmBE,cAAgB,MAAQN,SAA+B,OAAS,EAAIA,EAAsBO,KAAKC,IACpK,IAAIC,EAAuBC,EAC3B,QAASD,EAAwBD,EAAQG,qBAAuB,MAAQF,SAA+B,OAAS,EAAIA,EAAsBG,kBAAoBxC,IAAuB,MAAQA,SAA4B,OAAS,GAAKsC,EAAyBtC,EAAmByC,gBAAkB,MAAQH,SAAgC,OAAS,EAAIA,EAAuBI,KAAK,GAExX,MAAMC,EAAoBV,IAAuB,MAAQA,SAA4B,OAAS,EAAIA,EAAmBW,kBACrH,MAAMC,EAAiBvB,EAAUwB,UAAU,IAAMd,EAAmBe,eAAiB,IAAMJ,EAAoB,wCAC/G,OAAOE,EAAiB,mBAAqB,OAC/C,EACF,CACAjD,EAASuB,6BAA+BA,EACxC,OAAOvB,CACT,EAAG","sourceRoot":"filter"}},{"offset":{"line":9970,"column":0},"map":{"version":3,"names":["oFilterUtils","getFilter","vIFilter","aFilters","getFilterInfo","filters","length","Filter","undefined","getFilterField","propertyPath","converterContext","entityType","FilterBarConverter","buildProperyInfo","propertyInfoField","oPropertyInfo","aTypeConfig","propertyConvertyContext","getConverterContextFor","annotationPath","propertyTargetObject","getDataModelObjectPath","targetObject","oTypeConfig","fetchTypeConfig","fetchPropertyInfo","key","assignDataTypeToPropertyInfo","createConverterContext","oFilterControl","sEntityTypePath","metaModel","appComponent","sFilterEntityTypePath","DelegateUtil","getCustomData","contextPath","oView","isA","CommonUtils","getTargetView","oMetaModel","getModel","getMetaModel","oAppComponent","getAppComponent","oVisualizationObjectPath","MetaModelConverter","getInvolvedDataModelObjects","createBindingContext","manifestSettings","getViewData","ConverterContext","createConverterContextForMacro","startingEntitySet","name","getDiagnostics","merge","contextLocation","getConvertedFilterFields","includeHidden","oModifier","lineItemTerm","_getFilterMetaModel","lrTables","_getFieldsForTable","oConverterContext","_getSelectionFields","getBindingPathForParameters","oIFilter","mConditions","aFilterPropertiesMetadata","aParameters","aParams","setTypeConfigToProperties","i","sFieldPath","oConditionInternal","oProperty","FilterUtil","getPropertyByKey","typeConfig","TypeUtil","getTypeConfig","dataType","formatOptions","constraints","mInternalParameterCondition","ConditionConverter","toType","getTypeUtil","sEdmType","ODATA_TYPE_MAPPING","className","push","encodeURIComponent","ODataUtils","formatLiteral","values","data","sEntitySetPath","substring","sParameterEntitySet","slice","lastIndexOf","sTargetNavigation","toString","getEditStateIsHideDraft","bIsHideDraft","$editState","oCondition","find","condition","operator","includes","mProperties","mFilterConditions","aIgnoreProperties","ignoredProperties","oTargetControl","targetControl","sTargetEntityPath","mParameters","sSearch","sBindingPath","aPropertiesMetadata","propertiesMetadata","Core","byId","_getSearchField","_getFilterConditions","getPropertyInfoSet","_getFilterPropertiesMetadata","Object","keys","forEach","sKey","JSON","parse","param","requiredParam","mParametersValue","aTargetPropertiesMetadata","getControlDelegate","fetchPropertiesForEntity","mEntityProperties","oEntityProperty","hasProperty","_aIgnoreProperties","_getIgnoredProperties","concat","oFilter","parameters","search","bindingPath","aProperties","oIFilterProperty","typeInstance","getConstraints","Function","path","getNotApplicableFilters","oFilterBar","oControl","sTargetEntityTypePath","oFilterBarEntityPath","oFilterBarEntitySetAnnotations","getObject","aNotApplicable","getConditions","bIsFilterBarEntityType","bIsChart","bIsAnalyticalTable","getParent","getTableDefinition","enableAnalytics","bIsTreeTable","control","type","bEnableSearch","CommonHelper","parseCustomData","enableSearch","enableBasicSearch","aTargetProperties","mTargetProperties","reduce","mProp","oProp","mTableAggregates","aggregates","mAggregatedProperties","sAggregateName","oAggregate","relativePath","chartEntityTypeAnnotations","oEntitySetAnnotations","mChartCustomAggregates","getAllCustomAggregates","sProperty","aConditionProperty","typeCheck","Array","isArray","replace","getSearch","_getValueListInfo","filterBar","propertyName","valueListInfos","requestValueListInfo","catch","_getConditionValidated","valueListInfo","conditionPath","value","ConditionValidated","NotValidated","filter","FilterOperator","EQ","value1","listBinding","$model","bindList","CollectionPath","$select","valueExists","requestContexts","Validated","clearFilterValues","state","StateUtil","retrieveExternalState","editStatePath","editStateDefaultValue","EDITSTATE","ALL","id","currentEditStateCondition","deepClone","currentEditStateIsDefault","filtered","applyExternalState","fireAfterClear","_clearFilterValue","oState","setFilterValues","sConditionPath","args","sOperator","vValues","indexOf","Log","warning","SemanticDateOperators","getSemanticDateOperations","supportedValueTypes","Error","BT","Condition","createCondition","Promise","all","map","conditionValidatedStatus","conditionToModelPath","_getEntitySetPath","ModelHelper","getEntitySetPath","tableControls","getController","_getControls","oTable","aSelectionFields","getSelectionFields","selectionFields","getControlType","oPageContext","aFilterBarSelectionFieldsAnnotation","getEntityTypeAnnotation","annotation","mapSelectionFields","oSelectionField","oFilterBarSelectionFieldAnnotation","sPath","oFilterField","fieldNames","oField","_getSelectionFieldsFromPropertyInfos","propertyInfoFields","getPropertyInfo","selField","group","groupLabel","settings","visualFilter","label","sIFilterPropertyName","mEntityPropertiesCurrent","getFilters"],"sourceRoot":"filter","sources":["FilterUtils.ts"],"sourcesContent":["import { EntityType } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport deepClone from \"sap/base/util/deepClone\";\nimport merge from \"sap/base/util/merge\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport * as FilterBarConverter from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport { BaseManifestSettings } from \"sap/fe/core/converters/ManifestSettings\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getAllCustomAggregates } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport SemanticDateOperators from \"sap/fe/core/helpers/SemanticDateOperators\";\nimport { ODATA_TYPE_MAPPING } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport EDITSTATE from \"sap/fe/macros/filter/DraftEditState\";\nimport { ExternalStateType } from \"sap/fe/macros/valuehelp/ValueHelpDelegate\";\nimport Core from \"sap/ui/core/Core\";\nimport Condition from \"sap/ui/mdc/condition/Condition\";\nimport ConditionConverter from \"sap/ui/mdc/condition/ConditionConverter\";\nimport ConditionValidated from \"sap/ui/mdc/enum/ConditionValidated\";\nimport FilterBar from \"sap/ui/mdc/FilterBar\";\nimport TypeUtil from \"sap/ui/mdc/odata/v4/TypeUtil\";\nimport StateUtil from \"sap/ui/mdc/p13n/StateUtil\";\nimport FilterUtil from \"sap/ui/mdc/util/FilterUtil\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport MetaModel from \"sap/ui/model/MetaModel\";\nimport ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport ODataUtils from \"sap/ui/model/odata/v4/ODataUtils\";\n\nconst oFilterUtils = {\n\tgetFilter: function (vIFilter: any) {\n\t\tconst aFilters = oFilterUtils.getFilterInfo(vIFilter).filters;\n\t\treturn aFilters.length ? new Filter(oFilterUtils.getFilterInfo(vIFilter).filters, false) : undefined;\n\t},\n\tgetFilterField: function (propertyPath: string, converterContext: ConverterContext, entityType: EntityType) {\n\t\treturn FilterBarConverter.getFilterField(propertyPath, converterContext, entityType);\n\t},\n\tbuildProperyInfo: function (propertyInfoField: any, converterContext: ConverterContext) {\n\t\tlet oPropertyInfo;\n\t\tconst aTypeConfig: any = {};\n\t\tconst propertyConvertyContext = converterContext.getConverterContextFor(propertyInfoField.annotationPath);\n\t\tconst propertyTargetObject = propertyConvertyContext.getDataModelObjectPath().targetObject;\n\t\tconst oTypeConfig = FilterBarConverter.fetchTypeConfig(propertyTargetObject);\n\t\toPropertyInfo = FilterBarConverter.fetchPropertyInfo(converterContext, propertyInfoField, oTypeConfig);\n\t\taTypeConfig[propertyInfoField.key] = oTypeConfig;\n\t\toPropertyInfo = FilterBarConverter.assignDataTypeToPropertyInfo(oPropertyInfo as any, converterContext, [], aTypeConfig);\n\t\treturn oPropertyInfo;\n\t},\n\tcreateConverterContext: function (oFilterControl: any, sEntityTypePath: string, metaModel?: MetaModel, appComponent?: AppComponent) {\n\t\tconst sFilterEntityTypePath = DelegateUtil.getCustomData(oFilterControl, \"entityType\"),\n\t\t\tcontextPath = sEntityTypePath || sFilterEntityTypePath;\n\n\t\tconst oView = oFilterControl.isA ? CommonUtils.getTargetView(oFilterControl) : null;\n\t\tconst oMetaModel = metaModel || oFilterControl.getModel().getMetaModel();\n\t\tconst oAppComponent = appComponent || (oView && CommonUtils.getAppComponent(oView));\n\t\tconst oVisualizationObjectPath = MetaModelConverter.getInvolvedDataModelObjects(oMetaModel.createBindingContext(contextPath));\n\t\tlet manifestSettings: BaseManifestSettings | undefined;\n\t\tif (oFilterControl.isA && !oFilterControl.isA(\"sap.ui.mdc.filterbar.vh.FilterBar\")) {\n\t\t\tmanifestSettings = ((oView && oView.getViewData()) || {}) as BaseManifestSettings;\n\t\t}\n\t\treturn ConverterContext.createConverterContextForMacro(\n\t\t\toVisualizationObjectPath.startingEntitySet.name,\n\t\t\toMetaModel,\n\t\t\toAppComponent?.getDiagnostics() as any,\n\t\t\tmerge,\n\t\t\toVisualizationObjectPath.contextLocation,\n\t\t\tmanifestSettings\n\t\t);\n\t},\n\tgetConvertedFilterFields: function (\n\t\toFilterControl: any,\n\t\tsEntityTypePath?: any,\n\t\tincludeHidden?: boolean,\n\t\tmetaModel?: MetaModel,\n\t\tappComponent?: AppComponent,\n\t\toModifier?: any,\n\t\tlineItemTerm?: string\n\t) {\n\t\tconst oMetaModel = this._getFilterMetaModel(oFilterControl, metaModel);\n\t\tconst sFilterEntityTypePath = DelegateUtil.getCustomData(oFilterControl, \"entityType\"),\n\t\t\tcontextPath = sEntityTypePath || sFilterEntityTypePath;\n\n\t\tconst lrTables: any[] = this._getFieldsForTable(oFilterControl, sEntityTypePath);\n\n\t\tconst oConverterContext = this.createConverterContext(oFilterControl, sEntityTypePath, metaModel, appComponent);\n\n\t\t//aSelectionFields = FilterBarConverter.getSelectionFields(oConverterContext);\n\t\treturn this._getSelectionFields(\n\t\t\toFilterControl,\n\t\t\tsEntityTypePath,\n\t\t\tsFilterEntityTypePath,\n\t\t\tcontextPath,\n\t\t\tlrTables,\n\t\t\toMetaModel,\n\t\t\toConverterContext,\n\t\t\tincludeHidden,\n\t\t\toModifier,\n\t\t\tlineItemTerm\n\t\t);\n\t},\n\n\tgetBindingPathForParameters: function (oIFilter: any, mConditions: any, aFilterPropertiesMetadata: any, aParameters: any) {\n\t\tconst aParams: any[] = [];\n\t\taFilterPropertiesMetadata = oFilterUtils.setTypeConfigToProperties(aFilterPropertiesMetadata);\n\t\t// Collecting all parameter values from conditions\n\t\tfor (let i = 0; i < aParameters.length; i++) {\n\t\t\tconst sFieldPath = aParameters[i];\n\t\t\tif (mConditions[sFieldPath] && mConditions[sFieldPath].length > 0) {\n\t\t\t\t// We would be using only the first condition for parameter value.\n\t\t\t\tconst oConditionInternal = merge({}, mConditions[sFieldPath][0]) as any;\n\t\t\t\tconst oProperty = FilterUtil.getPropertyByKey(aFilterPropertiesMetadata, sFieldPath) as any;\n\t\t\t\tconst oTypeConfig =\n\t\t\t\t\toProperty.typeConfig || TypeUtil.getTypeConfig(oProperty.dataType, oProperty.formatOptions, oProperty.constraints);\n\t\t\t\tconst mInternalParameterCondition = ConditionConverter.toType(oConditionInternal, oTypeConfig, oIFilter.getTypeUtil());\n\t\t\t\tconst sEdmType = ODATA_TYPE_MAPPING[oTypeConfig.className];\n\t\t\t\taParams.push(\n\t\t\t\t\t`${sFieldPath}=${encodeURIComponent(ODataUtils.formatLiteral(mInternalParameterCondition.values[0], sEdmType))}`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Binding path from EntityType\n\t\tconst sEntityTypePath = oIFilter.data(\"entityType\");\n\t\tconst sEntitySetPath = sEntityTypePath.substring(0, sEntityTypePath.length - 1);\n\t\tconst sParameterEntitySet = sEntitySetPath.slice(0, sEntitySetPath.lastIndexOf(\"/\"));\n\t\tconst sTargetNavigation = sEntitySetPath.substring(sEntitySetPath.lastIndexOf(\"/\") + 1);\n\t\t// create parameter context\n\t\treturn `${sParameterEntitySet}(${aParams.toString()})/${sTargetNavigation}`;\n\t},\n\n\tgetEditStateIsHideDraft: function (mConditions: any) {\n\t\tlet bIsHideDraft = false;\n\t\tif (mConditions && mConditions.$editState) {\n\t\t\tconst oCondition = mConditions.$editState.find(function (condition: any) {\n\t\t\t\treturn condition.operator === \"DRAFT_EDIT_STATE\";\n\t\t\t});\n\t\t\tif (oCondition && (oCondition.values.includes(\"ALL_HIDING_DRAFTS\") || oCondition.values.includes(\"SAVED_ONLY\"))) {\n\t\t\t\tbIsHideDraft = true;\n\t\t\t}\n\t\t}\n\t\treturn bIsHideDraft;\n\t},\n\t/**\n\t * Gets all filters that originate from the MDC FilterBar.\n\t *\n\t * @param vIFilter String or object instance related to\n\t *  - MDC_FilterBar/Table/Chart\n\t * @param mProperties Properties on filters that are to be retrieved. Available parameters:\n\t * \t - ignoredProperties: Array of property names which should be not considered for filtering\n\t *\t - propertiesMetadata: Array with all the property metadata. If not provided, properties will be retrieved from vIFilter.\n\t *\t - targetControl: MDC_table or chart. If provided, property names which are not relevant for the target control entitySet are not considered.\n\t * @param mFilterConditions Map with externalized filter conditions.\n\t * @returns FilterBar filters and basic search\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetFilterInfo: function (vIFilter: string | object, mProperties?: any, mFilterConditions?: any) {\n\t\tlet aIgnoreProperties = (mProperties && mProperties.ignoredProperties) || [];\n\t\tconst oTargetControl = mProperties && mProperties.targetControl,\n\t\t\tsTargetEntityPath = oTargetControl ? oTargetControl.data(\"entityType\") : undefined;\n\t\tconst mParameters: Record<string, string> = {};\n\t\tlet oIFilter: any = vIFilter,\n\t\t\tsSearch,\n\t\t\taFilters: any[] = [],\n\t\t\tsBindingPath,\n\t\t\taPropertiesMetadata = mProperties && mProperties.propertiesMetadata;\n\t\tif (typeof vIFilter === \"string\") {\n\t\t\toIFilter = Core.byId(vIFilter) as any;\n\t\t}\n\t\tif (oIFilter) {\n\t\t\tsSearch = this._getSearchField(oIFilter, aIgnoreProperties);\n\t\t\tconst mConditions = this._getFilterConditions(mProperties, mFilterConditions, oIFilter);\n\t\t\tlet aFilterPropertiesMetadata = oIFilter.getPropertyInfoSet ? oIFilter.getPropertyInfoSet() : null;\n\t\t\taFilterPropertiesMetadata = this._getFilterPropertiesMetadata(aFilterPropertiesMetadata, oIFilter);\n\t\t\tif (mProperties && mProperties.targetControl && mProperties.targetControl.isA(\"sap.ui.mdc.Chart\")) {\n\t\t\t\tObject.keys(mConditions).forEach(function (sKey: string) {\n\t\t\t\t\tif (sKey === \"$editState\") {\n\t\t\t\t\t\tdelete mConditions[\"$editState\"];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet aParameters = oIFilter.data(\"parameters\") || [];\n\t\t\taParameters = typeof aParameters === \"string\" ? JSON.parse(aParameters) : aParameters;\n\t\t\tif (aParameters && aParameters.length > 0) {\n\t\t\t\t// Binding path changes in case of parameters.\n\t\t\t\tsBindingPath = oFilterUtils.getBindingPathForParameters(oIFilter, mConditions, aFilterPropertiesMetadata, aParameters);\n\t\t\t\tif (Object.keys(mConditions).length) {\n\t\t\t\t\tObject.keys(mConditions).forEach((param) => {\n\t\t\t\t\t\taParameters.forEach((requiredParam: string) => {\n\t\t\t\t\t\t\tif (param === requiredParam) {\n\t\t\t\t\t\t\t\tconst mParametersValue = mConditions[param][0].values;\n\t\t\t\t\t\t\t\tmParameters[requiredParam] = mParametersValue[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (mConditions) {\n\t\t\t\t//Exclude Interface Filter properties that are not relevant for the Target control entitySet\n\t\t\t\tif (sTargetEntityPath && oIFilter.data(\"entityType\") && oIFilter.data(\"entityType\") !== sTargetEntityPath) {\n\t\t\t\t\tconst oMetaModel = oIFilter.getModel().getMetaModel();\n\t\t\t\t\tconst aTargetPropertiesMetadata = oIFilter\n\t\t\t\t\t\t.getControlDelegate()\n\t\t\t\t\t\t.fetchPropertiesForEntity(sTargetEntityPath, oMetaModel, oIFilter);\n\t\t\t\t\taPropertiesMetadata = aTargetPropertiesMetadata;\n\n\t\t\t\t\tconst mEntityProperties: any = {};\n\t\t\t\t\tfor (const i in aTargetPropertiesMetadata) {\n\t\t\t\t\t\tconst oEntityProperty = aTargetPropertiesMetadata[i];\n\t\t\t\t\t\tmEntityProperties[oEntityProperty.name] = {\n\t\t\t\t\t\t\thasProperty: true,\n\t\t\t\t\t\t\tdataType: oEntityProperty.dataType\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tconst _aIgnoreProperties: any = this._getIgnoredProperties(aFilterPropertiesMetadata, mEntityProperties);\n\t\t\t\t\tif (_aIgnoreProperties.length > 0) {\n\t\t\t\t\t\taIgnoreProperties = aIgnoreProperties.concat(_aIgnoreProperties);\n\t\t\t\t\t}\n\t\t\t\t} else if (!aPropertiesMetadata) {\n\t\t\t\t\taPropertiesMetadata = aFilterPropertiesMetadata;\n\t\t\t\t}\n\t\t\t\t// var aParamKeys = [];\n\t\t\t\t// aParameters.forEach(function (oParam) {\n\t\t\t\t// \taParamKeys.push(oParam.key);\n\t\t\t\t// });\n\t\t\t\tconst oFilter = (\n\t\t\t\t\tFilterUtil.getFilterInfo(\n\t\t\t\t\t\toIFilter,\n\t\t\t\t\t\tmConditions,\n\t\t\t\t\t\toFilterUtils.setTypeConfigToProperties(aPropertiesMetadata),\n\t\t\t\t\t\taIgnoreProperties.concat(aParameters)\n\t\t\t\t\t) as any\n\t\t\t\t).filters;\n\t\t\t\taFilters = oFilter ? [oFilter] : [];\n\t\t\t}\n\t\t}\n\t\treturn { parameters: mParameters, filters: aFilters, search: sSearch || undefined, bindingPath: sBindingPath };\n\t},\n\tsetTypeConfigToProperties: function (aProperties: any) {\n\t\tif (aProperties && aProperties.length) {\n\t\t\taProperties.forEach(function (oIFilterProperty: any) {\n\t\t\t\tif (\n\t\t\t\t\toIFilterProperty.typeConfig &&\n\t\t\t\t\toIFilterProperty.typeConfig.typeInstance &&\n\t\t\t\t\toIFilterProperty.typeConfig.typeInstance.getConstraints instanceof Function\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (oIFilterProperty.path === \"$editState\") {\n\t\t\t\t\toIFilterProperty.typeConfig = TypeUtil.getTypeConfig(\"sap.ui.model.odata.type.String\", {}, {});\n\t\t\t\t} else if (oIFilterProperty.path === \"$search\") {\n\t\t\t\t\toIFilterProperty.typeConfig = TypeUtil.getTypeConfig(\"sap.ui.model.odata.type.String\", {}, {});\n\t\t\t\t} else if (oIFilterProperty.dataType || (oIFilterProperty.typeConfig && oIFilterProperty.typeConfig.className)) {\n\t\t\t\t\toIFilterProperty.typeConfig = TypeUtil.getTypeConfig(\n\t\t\t\t\t\toIFilterProperty.dataType || oIFilterProperty.typeConfig.className,\n\t\t\t\t\t\toIFilterProperty.formatOptions,\n\t\t\t\t\t\toIFilterProperty.constraints\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn aProperties;\n\t},\n\tgetNotApplicableFilters: function (oFilterBar: any, oControl: any) {\n\t\tconst sTargetEntityTypePath = oControl.data(\"entityType\"),\n\t\t\toFilterBarEntityPath = oFilterBar.data(\"entityType\"),\n\t\t\toFilterBarEntitySetAnnotations = oFilterBar.getModel().getMetaModel().getObject(oFilterBarEntityPath),\n\t\t\taNotApplicable = [],\n\t\t\tmConditions = oFilterBar.getConditions(),\n\t\t\toMetaModel = oFilterBar.getModel().getMetaModel(),\n\t\t\tbIsFilterBarEntityType = sTargetEntityTypePath === oFilterBar.data(\"entityType\"),\n\t\t\tbIsChart = oControl.isA(\"sap.ui.mdc.Chart\"),\n\t\t\tbIsAnalyticalTable = !bIsChart && oControl.getParent().getTableDefinition().enableAnalytics,\n\t\t\tbIsTreeTable = !bIsChart && oControl.control?.type === \"TreeTable\",\n\t\t\tbEnableSearch = bIsChart\n\t\t\t\t? CommonHelper.parseCustomData(DelegateUtil.getCustomData(oControl, \"applySupported\")).enableSearch\n\t\t\t\t: !(bIsAnalyticalTable || bIsTreeTable) || oControl.getParent().getTableDefinition().enableBasicSearch;\n\n\t\tif (mConditions && (!bIsFilterBarEntityType || bIsAnalyticalTable || bIsChart)) {\n\t\t\t// We don't need to calculate the difference on property Level if entity sets are identical\n\t\t\tconst aTargetProperties = bIsFilterBarEntityType\n\t\t\t\t\t? []\n\t\t\t\t\t: oFilterBar.getControlDelegate().fetchPropertiesForEntity(sTargetEntityTypePath, oMetaModel, oFilterBar),\n\t\t\t\tmTargetProperties = aTargetProperties.reduce(function (mProp: any, oProp: any) {\n\t\t\t\t\tmProp[oProp.name] = oProp;\n\t\t\t\t\treturn mProp;\n\t\t\t\t}, {}),\n\t\t\t\tmTableAggregates = (!bIsChart && oControl.getParent().getTableDefinition().aggregates) || {},\n\t\t\t\tmAggregatedProperties: any = {};\n\n\t\t\tObject.keys(mTableAggregates).forEach(function (sAggregateName: string) {\n\t\t\t\tconst oAggregate = mTableAggregates[sAggregateName];\n\t\t\t\tmAggregatedProperties[oAggregate.relativePath] = oAggregate;\n\t\t\t});\n\t\t\tconst chartEntityTypeAnnotations = oControl\n\t\t\t\t.getModel()\n\t\t\t\t.getMetaModel()\n\t\t\t\t.getObject(oControl.data(\"targetCollectionPath\") + \"/\");\n\t\t\tif (oControl.isA(\"sap.ui.mdc.Chart\")) {\n\t\t\t\tconst oEntitySetAnnotations = oControl\n\t\t\t\t\t\t.getModel()\n\t\t\t\t\t\t.getMetaModel()\n\t\t\t\t\t\t.getObject(`${oControl.data(\"targetCollectionPath\")}@`),\n\t\t\t\t\tmChartCustomAggregates = getAllCustomAggregates(oEntitySetAnnotations);\n\t\t\t\tObject.keys(mChartCustomAggregates).forEach(function (sAggregateName: string) {\n\t\t\t\t\tif (!mAggregatedProperties[sAggregateName]) {\n\t\t\t\t\t\tconst oAggregate = mChartCustomAggregates[sAggregateName];\n\t\t\t\t\t\tmAggregatedProperties[sAggregateName] = oAggregate;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (const sProperty in mConditions) {\n\t\t\t\t// Need to check the length of mConditions[sProperty] since previous filtered properties are kept into mConditions with empty array as definition\n\t\t\t\tconst aConditionProperty = mConditions[sProperty];\n\t\t\t\tlet typeCheck = true;\n\t\t\t\tif (chartEntityTypeAnnotations[sProperty] && oFilterBarEntitySetAnnotations[sProperty]) {\n\t\t\t\t\ttypeCheck = chartEntityTypeAnnotations[sProperty][\"$Type\"] === oFilterBarEntitySetAnnotations[sProperty][\"$Type\"];\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tArray.isArray(aConditionProperty) &&\n\t\t\t\t\taConditionProperty.length > 0 &&\n\t\t\t\t\t(((!mTargetProperties[sProperty] || (mTargetProperties[sProperty] && !typeCheck)) &&\n\t\t\t\t\t\t(!bIsFilterBarEntityType || (sProperty === \"$editState\" && bIsChart))) ||\n\t\t\t\t\t\tmAggregatedProperties[sProperty])\n\t\t\t\t) {\n\t\t\t\t\taNotApplicable.push(sProperty.replace(/\\+|\\*/g, \"\"));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!bEnableSearch && oFilterBar.getSearch()) {\n\t\t\taNotApplicable.push(\"$search\");\n\t\t}\n\t\treturn aNotApplicable;\n\t},\n\n\t/**\n\t * Gets the value list information of a property as defined for a given filter bar.\n\t *\n\t * @param filterBar The filter bar to get the value list information for\n\t * @param propertyName The property to get the value list information for\n\t * @returns The value list information\n\t */\n\tasync _getValueListInfo(filterBar: FilterBar, propertyName: string): Promise<any> {\n\t\tconst metaModel = filterBar.getModel()?.getMetaModel() as ODataMetaModel;\n\n\t\tif (!metaModel) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst entityType = filterBar.data(\"entityType\") ?? \"\";\n\t\tconst valueListInfos = await metaModel.requestValueListInfo(entityType + propertyName, true, undefined).catch(() => null);\n\t\treturn valueListInfos?.[\"\"];\n\t},\n\n\t/**\n\t * Gets the {@link ConditionValidated} state for a single value. This decides whether the value is treated as a selected value\n\t * in a value help, meaning that its description is loaded and displayed if existing, or whether it is displayed as a\n\t * condition (e.g. \"=1\").\n\t *\n\t * Values for properties without value list info are always treated as {@link ConditionValidated.NotValidated}.\n\t *\n\t * @param valueListInfo The value list info from the {@link MetaModel}\n\t * @param conditionPath Path to the property to set the value as condition for\n\t * @param value The single value to get the state for\n\t */\n\t_getConditionValidated: async function (\n\t\tvalueListInfo: any,\n\t\tconditionPath: string,\n\t\tvalue: string | number | boolean | null | undefined\n\t): Promise<ConditionValidated> {\n\t\tif (!valueListInfo) {\n\t\t\treturn ConditionValidated.NotValidated;\n\t\t}\n\n\t\tconst filter = new Filter({\n\t\t\tpath: conditionPath,\n\t\t\toperator: FilterOperator.EQ,\n\t\t\tvalue1: value\n\t\t});\n\t\tconst listBinding = valueListInfo.$model.bindList(`/${valueListInfo.CollectionPath}`, undefined, undefined, filter, {\n\t\t\t$select: conditionPath\n\t\t});\n\n\t\tconst valueExists = (await listBinding.requestContexts()).length > 0;\n\t\tif (valueExists) {\n\t\t\treturn ConditionValidated.Validated;\n\t\t} else {\n\t\t\treturn ConditionValidated.NotValidated;\n\t\t}\n\t},\n\t/**\n\t * Clears all input values of visible filter fields in the filter bar.\n\t *\n\t * @param oFilterBar The filter bar that contains the filter field\n\t */\n\tclearFilterValues: async function (oFilterBar: any) {\n\t\t// Do nothing when the filter bar is hidden\n\t\tif (!oFilterBar) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst state: ExternalStateType = await StateUtil.retrieveExternalState(oFilterBar);\n\t\tconst editStatePath = \"$editState\";\n\t\tconst editStateDefaultValue = EDITSTATE.ALL.id;\n\t\tconst currentEditStateCondition = deepClone(state.filter[editStatePath]?.[0]);\n\t\tconst currentEditStateIsDefault = currentEditStateCondition?.values[0] === editStateDefaultValue;\n\n\t\t// Clear all conditions\n\t\tfor (const conditionPath of Object.keys(state.filter)) {\n\t\t\tif (conditionPath === editStatePath && currentEditStateIsDefault) {\n\t\t\t\t// Do not clear edit state condition if it is already \"ALL\"\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (const condition of state.filter[conditionPath]) {\n\t\t\t\tcondition.filtered = false;\n\t\t\t}\n\t\t}\n\t\tawait StateUtil.applyExternalState(oFilterBar, { filter: state.filter });\n\n\t\t// Set edit state to 'ALL' if it wasn't before\n\t\tif (currentEditStateCondition && !currentEditStateIsDefault) {\n\t\t\tcurrentEditStateCondition.values = [editStateDefaultValue];\n\t\t\tawait StateUtil.applyExternalState(oFilterBar, { filter: { [editStatePath]: [currentEditStateCondition] } });\n\t\t}\n\n\t\t// Allow app developers to update filters after clearing\n\t\toFilterBar.getParent().fireAfterClear();\n\t},\n\n\t/**\n\t * Clear the filter value for a specific property in the filter bar.\n\t * This is a prerequisite before new values can be set cleanly.\n\t *\n\t * @param filterBar The filter bar that contains the filter field\n\t * @param conditionPath The path to the property as a condition path\n\t */\n\tasync _clearFilterValue(filterBar: FilterBar, conditionPath: string) {\n\t\tconst oState = await StateUtil.retrieveExternalState(filterBar);\n\t\tif (oState.filter[conditionPath]) {\n\t\t\toState.filter[conditionPath].forEach((oCondition: any) => {\n\t\t\t\toCondition.filtered = false;\n\t\t\t});\n\t\t\tawait StateUtil.applyExternalState(filterBar, { filter: { [conditionPath]: oState.filter[conditionPath] } });\n\t\t}\n\t},\n\n\t/**\n\t * Set the filter values for the given property in the filter bar.\n\t * The filter values can be either a single value or an array of values.\n\t * Each filter value must be represented as a primitive value.\n\t *\n\t * @param oFilterBar The filter bar that contains the filter field\n\t * @param sConditionPath The path to the property as a condition path\n\t * @param args List of optional parameters\n\t *  [sOperator] The operator to be used - if not set, the default operator (EQ) will be used\n\t *  [vValues] The values to be applied - if sOperator is missing, vValues is used as 3rd parameter\n\t */\n\tsetFilterValues: async function (oFilterBar: any, sConditionPath: string, ...args: any) {\n\t\tlet sOperator: string | undefined = args?.[0];\n\t\tlet vValues: undefined | string | number | boolean | string[] | number[] | boolean[] = args?.[1];\n\n\t\t// Do nothing when the filter bar is hidden\n\t\tif (!oFilterBar) {\n\t\t\treturn;\n\t\t}\n\n\t\t// common filter Operators need a value. Do nothing if this value is undefined\n\t\t// BCP: 2270135274\n\t\tif (\n\t\t\targs.length === 2 &&\n\t\t\t(vValues === undefined || vValues === null || vValues === \"\") &&\n\t\t\tsOperator &&\n\t\t\tObject.keys(FilterOperator).indexOf(sOperator) !== -1\n\t\t) {\n\t\t\tLog.warning(`An empty filter value cannot be applied with the ${sOperator} operator`);\n\t\t\treturn;\n\t\t}\n\n\t\t// The 4th parameter is optional; if sOperator is missing, vValues is used as 3rd parameter\n\t\t// This does not apply for semantic dates, as these do not require vValues (exception: \"LASTDAYS\", 3)\n\t\tif (vValues === undefined && !SemanticDateOperators.getSemanticDateOperations().includes(sOperator || \"\")) {\n\t\t\tvValues = sOperator ?? [];\n\t\t\tsOperator = undefined;\n\t\t}\n\n\t\t// If sOperator is not set, use EQ as default\n\t\tif (!sOperator) {\n\t\t\tsOperator = FilterOperator.EQ;\n\t\t}\n\n\t\t// Supported array types:\n\t\t//  - Single Values:\t\"2\" | [\"2\"]\n\t\t//  - Multiple Values:\t[\"2\", \"3\"]\n\t\t//  - Ranges:\t\t\t[\"2\",\"3\"]\n\t\t// Unsupported array types:\n\t\t//  - Multiple Ranges:\t[[\"2\",\"3\"]] | [[\"2\",\"3\"],[\"4\",\"5\"]]\n\t\tconst supportedValueTypes = [\"string\", \"number\", \"boolean\"];\n\t\tif (\n\t\t\tvValues !== undefined &&\n\t\t\t((!Array.isArray(vValues) && !supportedValueTypes.includes(typeof vValues)) ||\n\t\t\t\t(Array.isArray(vValues) && vValues.length > 0 && !supportedValueTypes.includes(typeof vValues[0])))\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"FilterUtils.js#_setFilterValues: Filter value not supported; only primitive values or an array thereof can be used.\"\n\t\t\t);\n\t\t}\n\t\tlet values: (string | number | boolean | null)[] | undefined;\n\t\tif (vValues !== undefined) {\n\t\t\tvalues = Array.isArray(vValues) ? vValues : [vValues];\n\t\t}\n\n\t\t// Get the value list info of the property to later check whether the values exist\n\t\tconst valueListInfo = await this._getValueListInfo(oFilterBar, sConditionPath);\n\n\t\tconst filter: { [key: string]: any } = {};\n\t\tif (sConditionPath) {\n\t\t\tif (values && values.length) {\n\t\t\t\tif (sOperator === FilterOperator.BT) {\n\t\t\t\t\t// The operator BT requires one condition with both thresholds\n\t\t\t\t\tfilter[sConditionPath] = [Condition.createCondition(sOperator, values, null, null, ConditionValidated.NotValidated)];\n\t\t\t\t} else {\n\t\t\t\t\t// Regular single and multi value conditions, if there are no values, we do not want any conditions\n\t\t\t\t\tfilter[sConditionPath] = await Promise.all(\n\t\t\t\t\t\tvalues.map(async (value) => {\n\t\t\t\t\t\t\t// For the EQ case, tell MDC to validate the value (e.g. display the description), if it exists in the associated entity, otherwise never validate\n\t\t\t\t\t\t\tconst conditionValidatedStatus =\n\t\t\t\t\t\t\t\tsOperator === FilterOperator.EQ\n\t\t\t\t\t\t\t\t\t? await this._getConditionValidated(valueListInfo, sConditionPath, value)\n\t\t\t\t\t\t\t\t\t: ConditionValidated.NotValidated;\n\n\t\t\t\t\t\t\treturn Condition.createCondition(sOperator!, [value], null, null, conditionValidatedStatus);\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if (SemanticDateOperators.getSemanticDateOperations().includes(sOperator || \"\")) {\n\t\t\t\t// vValues is undefined, so the operator is a semantic date that does not need values (see above)\n\t\t\t\tfilter[sConditionPath] = [Condition.createCondition(sOperator, [], null, null, ConditionValidated.NotValidated)];\n\t\t\t}\n\t\t}\n\n\t\t// Always clear the current value as we do not want to add filter values but replace them\n\t\tawait this._clearFilterValue(oFilterBar, sConditionPath);\n\n\t\tif (filter[sConditionPath]) {\n\t\t\t// This is not called in the reset case, i.e. setFilterValue(\"Property\")\n\t\t\tawait StateUtil.applyExternalState(oFilterBar, { filter });\n\t\t}\n\t},\n\tconditionToModelPath: function (sConditionPath: string) {\n\t\t// make the path usable as model property, therefore slashes become backslashes\n\t\treturn sConditionPath.replace(/\\//g, \"\\\\\");\n\t},\n\t_getFilterMetaModel: function (oFilterControl: any, metaModel?: MetaModel) {\n\t\treturn metaModel || oFilterControl.getModel().getMetaModel();\n\t},\n\t_getEntitySetPath: function (sEntityTypePath: any) {\n\t\treturn sEntityTypePath && ModelHelper.getEntitySetPath(sEntityTypePath);\n\t},\n\n\t_getFieldsForTable: function (oFilterControl: any, sEntityTypePath?: any) {\n\t\tconst lrTables: any[] = [];\n\t\t/**\n\t\t * Gets fields from\n\t\t * \t- direct entity properties,\n\t\t * \t- navigateProperties key in the manifest if these properties are known by the entity\n\t\t *  - annotation \"SelectionFields\"\n\t\t */\n\t\tif (sEntityTypePath) {\n\t\t\tconst oView = CommonUtils.getTargetView(oFilterControl);\n\t\t\tconst tableControls =\n\t\t\t\toView &&\n\t\t\t\toView.getController() &&\n\t\t\t\t(oView.getController() as any)._getControls &&\n\t\t\t\t(oView.getController() as any)._getControls(\"table\"); //[0].getParent().getTableDefinition();\n\t\t\tif (tableControls) {\n\t\t\t\ttableControls.forEach(function (oTable: any) {\n\t\t\t\t\tlrTables.push(oTable.getParent().getTableDefinition());\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn lrTables;\n\t\t}\n\t\treturn [];\n\t},\n\t_getSelectionFields: function (\n\t\toFilterControl: any,\n\t\tsEntityTypePath: string,\n\t\tsFilterEntityTypePath: string,\n\t\tcontextPath: string,\n\t\tlrTables: any[],\n\t\toMetaModel: any,\n\t\toConverterContext: any,\n\t\tincludeHidden?: boolean,\n\t\toModifier?: any,\n\t\tlineItemTerm?: string\n\t) {\n\t\tlet aSelectionFields = FilterBarConverter.getSelectionFields(\n\t\t\toConverterContext,\n\t\t\tlrTables,\n\t\t\tundefined,\n\t\t\tincludeHidden,\n\t\t\tlineItemTerm\n\t\t).selectionFields;\n\t\tif (\n\t\t\t(oModifier\n\t\t\t\t? oModifier.getControlType(oFilterControl) === \"sap.ui.mdc.FilterBar\"\n\t\t\t\t: oFilterControl.isA(\"sap.ui.mdc.FilterBar\")) &&\n\t\t\tsEntityTypePath !== sFilterEntityTypePath\n\t\t) {\n\t\t\t/**\n\t\t\t * We are on multi entity sets scenario so we add annotation \"SelectionFields\"\n\t\t\t * from FilterBar entity if these properties are known by the entity\n\t\t\t */\n\t\t\tconst oVisualizationObjectPath = MetaModelConverter.getInvolvedDataModelObjects(oMetaModel.createBindingContext(contextPath));\n\t\t\tconst oPageContext = oConverterContext.getConverterContextFor(sFilterEntityTypePath);\n\t\t\tconst aFilterBarSelectionFieldsAnnotation: any =\n\t\t\t\toPageContext.getEntityTypeAnnotation(\"@com.sap.vocabularies.UI.v1.SelectionFields\").annotation || [];\n\t\t\tconst mapSelectionFields: any = {};\n\t\t\taSelectionFields.forEach(function (oSelectionField: any) {\n\t\t\t\tmapSelectionFields[oSelectionField.conditionPath] = true;\n\t\t\t});\n\n\t\t\taFilterBarSelectionFieldsAnnotation.forEach(function (oFilterBarSelectionFieldAnnotation: any) {\n\t\t\t\tconst sPath = oFilterBarSelectionFieldAnnotation.value;\n\t\t\t\tif (!mapSelectionFields[sPath]) {\n\t\t\t\t\tconst oFilterField = FilterBarConverter.getFilterField(\n\t\t\t\t\t\tsPath,\n\t\t\t\t\t\toConverterContext,\n\t\t\t\t\t\toVisualizationObjectPath.startingEntitySet.entityType\n\t\t\t\t\t);\n\t\t\t\t\tif (oFilterField) {\n\t\t\t\t\t\taSelectionFields.push(oFilterField);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (aSelectionFields) {\n\t\t\tconst fieldNames: any[] = [];\n\t\t\taSelectionFields.forEach(function (oField: any) {\n\t\t\t\tfieldNames.push(oField.key);\n\t\t\t});\n\t\t\taSelectionFields = this._getSelectionFieldsFromPropertyInfos(oFilterControl, fieldNames, aSelectionFields);\n\t\t}\n\t\treturn aSelectionFields;\n\t},\n\t_getSelectionFieldsFromPropertyInfos: function (oFilterControl: any, fieldNames: any, aSelectionFields: any) {\n\t\tconst propertyInfoFields = (oFilterControl.getPropertyInfo && oFilterControl.getPropertyInfo()) || [];\n\t\tpropertyInfoFields.forEach(function (oProp: any) {\n\t\t\tif (oProp.name === \"$search\" || oProp.name === \"$editState\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst selField = aSelectionFields[fieldNames.indexOf(oProp.key)];\n\t\t\tif (fieldNames.indexOf(oProp.key) !== -1 && selField.annotationPath) {\n\t\t\t\toProp.group = selField.group;\n\t\t\t\toProp.groupLabel = selField.groupLabel;\n\t\t\t\toProp.settings = selField.settings;\n\t\t\t\toProp.visualFilter = selField.visualFilter;\n\t\t\t\toProp.label = selField.label;\n\t\t\t\taSelectionFields[fieldNames.indexOf(oProp.key)] = oProp;\n\t\t\t}\n\n\t\t\tif (fieldNames.indexOf(oProp.key) === -1 && !oProp.annotationPath) {\n\t\t\t\taSelectionFields.push(oProp);\n\t\t\t}\n\t\t});\n\t\treturn aSelectionFields;\n\t},\n\t_getSearchField: function (oIFilter: any, aIgnoreProperties: any) {\n\t\treturn oIFilter.getSearch && aIgnoreProperties.indexOf(\"search\") === -1 ? oIFilter.getSearch() : null;\n\t},\n\t_getFilterConditions: function (mProperties: any, mFilterConditions: any, oIFilter: any) {\n\t\tconst mConditions = mFilterConditions || oIFilter.getConditions();\n\t\tif (mProperties && mProperties.targetControl && mProperties.targetControl.isA(\"sap.ui.mdc.Chart\")) {\n\t\t\tObject.keys(mConditions).forEach(function (sKey: string) {\n\t\t\t\tif (sKey === \"$editState\") {\n\t\t\t\t\tdelete mConditions[\"$editState\"];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn mConditions;\n\t},\n\t_getFilterPropertiesMetadata: function (aFilterPropertiesMetadata: any, oIFilter: any) {\n\t\tif (!(aFilterPropertiesMetadata && aFilterPropertiesMetadata.length)) {\n\t\t\tif (oIFilter.getPropertyInfo) {\n\t\t\t\taFilterPropertiesMetadata = oIFilter.getPropertyInfo();\n\t\t\t} else {\n\t\t\t\taFilterPropertiesMetadata = null;\n\t\t\t}\n\t\t}\n\t\treturn aFilterPropertiesMetadata;\n\t},\n\t_getIgnoredProperties: function (aFilterPropertiesMetadata: any, mEntityProperties: any) {\n\t\tconst aIgnoreProperties: any = [];\n\t\taFilterPropertiesMetadata.forEach(function (oIFilterProperty: any) {\n\t\t\tconst sIFilterPropertyName = oIFilterProperty.name;\n\t\t\tconst mEntityPropertiesCurrent = mEntityProperties[sIFilterPropertyName];\n\t\t\tif (\n\t\t\t\tmEntityPropertiesCurrent &&\n\t\t\t\t(!mEntityPropertiesCurrent[\"hasProperty\"] ||\n\t\t\t\t\t(mEntityPropertiesCurrent[\"hasProperty\"] && oIFilterProperty.dataType !== mEntityPropertiesCurrent.dataType))\n\t\t\t) {\n\t\t\t\taIgnoreProperties.push(sIFilterPropertyName);\n\t\t\t}\n\t\t});\n\t\treturn aIgnoreProperties;\n\t},\n\tgetFilters: function (filterBar: FilterBar) {\n\t\tconst { parameters, filters, search } = this.getFilterInfo(filterBar);\n\n\t\treturn { parameters, filters, search };\n\t}\n};\n\nexport default oFilterUtils;\n"],"mappings":"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"}},{"offset":{"line":10553,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","deepClone","merge","CommonUtils","FilterBarConverter","ConverterContext","MetaModelConverter","MetaModelFunction","ModelHelper","SemanticDateOperators","DisplayModeFormatter","CommonHelper","DelegateUtil","EDITSTATE","Core","Condition","ConditionConverter","ConditionValidated","TypeUtil","StateUtil","FilterUtil","Filter","FilterOperator","ODataUtils","ODATA_TYPE_MAPPING","getAllCustomAggregates","oFilterUtils","getFilter","vIFilter","aFilters","getFilterInfo","filters","length","undefined","getFilterField","propertyPath","converterContext","entityType","buildProperyInfo","propertyInfoField","oPropertyInfo","aTypeConfig","propertyConvertyContext","getConverterContextFor","annotationPath","propertyTargetObject","getDataModelObjectPath","targetObject","oTypeConfig","fetchTypeConfig","fetchPropertyInfo","key","assignDataTypeToPropertyInfo","createConverterContext","oFilterControl","sEntityTypePath","metaModel","appComponent","sFilterEntityTypePath","getCustomData","contextPath","oView","isA","getTargetView","oMetaModel","getModel","getMetaModel","oAppComponent","getAppComponent","oVisualizationObjectPath","getInvolvedDataModelObjects","createBindingContext","manifestSettings","getViewData","createConverterContextForMacro","startingEntitySet","name","getDiagnostics","contextLocation","getConvertedFilterFields","includeHidden","oModifier","lineItemTerm","this","_getFilterMetaModel","lrTables","_getFieldsForTable","oConverterContext","_getSelectionFields","getBindingPathForParameters","oIFilter","mConditions","aFilterPropertiesMetadata","aParameters","aParams","setTypeConfigToProperties","i","sFieldPath","oConditionInternal","oProperty","getPropertyByKey","typeConfig","getTypeConfig","dataType","formatOptions","constraints","mInternalParameterCondition","toType","getTypeUtil","sEdmType","className","push","encodeURIComponent","formatLiteral","values","data","sEntitySetPath","substring","sParameterEntitySet","slice","lastIndexOf","sTargetNavigation","toString","getEditStateIsHideDraft","bIsHideDraft","$editState","oCondition","find","condition","operator","includes","mProperties","mFilterConditions","aIgnoreProperties","ignoredProperties","oTargetControl","targetControl","sTargetEntityPath","mParameters","sSearch","sBindingPath","aPropertiesMetadata","propertiesMetadata","byId","_getSearchField","_getFilterConditions","getPropertyInfoSet","_getFilterPropertiesMetadata","Object","keys","forEach","sKey","JSON","parse","param","requiredParam","mParametersValue","aTargetPropertiesMetadata","getControlDelegate","fetchPropertiesForEntity","mEntityProperties","oEntityProperty","hasProperty","_aIgnoreProperties","_getIgnoredProperties","concat","oFilter","parameters","search","bindingPath","aProperties","oIFilterProperty","typeInstance","getConstraints","Function","path","getNotApplicableFilters","oFilterBar","oControl","_oControl$control","sTargetEntityTypePath","oFilterBarEntityPath","oFilterBarEntitySetAnnotations","getObject","aNotApplicable","getConditions","bIsFilterBarEntityType","bIsChart","bIsAnalyticalTable","getParent","getTableDefinition","enableAnalytics","bIsTreeTable","control","type","bEnableSearch","parseCustomData","enableSearch","enableBasicSearch","aTargetProperties","mTargetProperties","reduce","mProp","oProp","mTableAggregates","aggregates","mAggregatedProperties","sAggregateName","oAggregate","relativePath","chartEntityTypeAnnotations","oEntitySetAnnotations","mChartCustomAggregates","sProperty","aConditionProperty","typeCheck","Array","isArray","replace","getSearch","async","filterBar","propertyName","_filterBar$getModel","valueListInfos","requestValueListInfo","catch","_getConditionValidated","valueListInfo","conditionPath","value","NotValidated","filter","EQ","value1","listBinding","$model","bindList","CollectionPath","$select","valueExists","requestContexts","Validated","clearFilterValues","_state$filter$editSta","state","retrieveExternalState","editStatePath","editStateDefaultValue","ALL","id","currentEditStateCondition","currentEditStateIsDefault","filtered","applyExternalState","fireAfterClear","oState","setFilterValues","sConditionPath","_len","arguments","args","_key","sOperator","vValues","indexOf","warning","getSemanticDateOperations","supportedValueTypes","Error","_getValueListInfo","BT","createCondition","Promise","all","map","conditionValidatedStatus","_clearFilterValue","conditionToModelPath","_getEntitySetPath","getEntitySetPath","tableControls","getController","_getControls","oTable","aSelectionFields","getSelectionFields","selectionFields","getControlType","oPageContext","aFilterBarSelectionFieldsAnnotation","getEntityTypeAnnotation","annotation","mapSelectionFields","oSelectionField","oFilterBarSelectionFieldAnnotation","sPath","oFilterField","fieldNames","oField","_getSelectionFieldsFromPropertyInfos","propertyInfoFields","getPropertyInfo","selField","group","groupLabel","settings","visualFilter","label","sIFilterPropertyName","mEntityPropertiesCurrent","getFilters"],"sources":["FilterUtils-dbg.js"],"mappings":"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","sourceRoot":"filter"}},{"offset":{"line":10558,"column":0},"map":{"version":3,"names":["MultiValue","defineUI5Class","formatConditionValues","values","formatValue","internalValue","externalValueType","result","split","Array","isArray","map","value","getElementTypeName","filter","undefined","parseValue","externalValue","operator","format","Value"],"sourceRoot":"filter/type","sources":["MultiValue.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport Value from \"sap/fe/macros/filter/type/Value\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\n\n/**\n * Handle format/parse of multi value filters.\n */\n@defineUI5Class(\"sap.fe.macros.filter.type.MultiValue\")\nexport default class MultiValue extends Value {\n\t/**\n\t * Returns the unchanged values.\n\t *\n\t * @param values Input condition value\n\t * @returns First value of array or input\n\t * @protected\n\t */\n\tformatConditionValues(values: string[] | string): string[] | string {\n\t\treturn values;\n\t}\n\n\t/**\n\t * Returns the string value parsed to the external value type.\n\t *\n\t * @param internalValue The internal string value to be formatted\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The formatted value\n\t * @protected\n\t */\n\tformatValue(internalValue: any | undefined, externalValueType: string | undefined): any {\n\t\tlet result = internalValue;\n\n\t\tif (typeof result === \"string\") {\n\t\t\tresult = result.split(\",\");\n\t\t}\n\n\t\tif (Array.isArray(result)) {\n\t\t\tresult = result\n\t\t\t\t.map((value: string) => super.formatValue(value, this.getElementTypeName(externalValueType)))\n\t\t\t\t.filter((value: string) => value !== undefined);\n\t\t}\n\n\t\treturn result || [];\n\t}\n\n\t/**\n\t * Returns the value parsed to the internal string value.\n\t *\n\t * @param externalValue The value to be parsed\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The parsed value\n\t * @protected\n\t */\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tparseValue(externalValue: any | undefined, externalValueType: string | undefined): any {\n\t\tif (!externalValue) {\n\t\t\texternalValue = [];\n\t\t}\n\t\treturn externalValue.map((value: any) => {\n\t\t\tif (value === undefined) {\n\t\t\t\tvalue = [];\n\t\t\t} else if (!Array.isArray(value)) {\n\t\t\t\tvalue = [value];\n\t\t\t}\n\t\t\treturn this.operator.format({ values: value } as ConditionObject);\n\t\t});\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;MAQqBA,UAAU;EAJ/B;AACA;AACA;EAFA,OAGCC,cAAc,CAAC,sCAAsC,CAAC;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA;IAEtD;AACD;AACA;AACA;AACA;AACA;AACA;IANC,OAOAC,qBAAqB,GAArB,+BAAsBC,MAAyB,EAAqB;MACnE,OAAOA,MAAM;IACd;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA,OAPC;IAAA,OAQAC,WAAW,GAAX,qBAAYC,aAA8B,EAAEC,iBAAqC,EAAO;MACvF,IAAIC,MAAM,GAAGF,aAAa;MAE1B,IAAI,OAAOE,MAAM,KAAK,QAAQ,EAAE;QAC/BA,MAAM,GAAGA,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC;MAC3B;MAEA,IAAIC,KAAK,CAACC,OAAO,CAACH,MAAM,CAAC,EAAE;QAC1BA,MAAM,GAAGA,MAAM,CACbI,GAAG,CAAEC,KAAa,qBAAWR,WAAW,YAACQ,KAAK,EAAE,IAAI,CAACC,kBAAkB,CAACP,iBAAiB,CAAC,CAAC,CAAC,CAC5FQ,MAAM,CAAEF,KAAa,IAAKA,KAAK,KAAKG,SAAS,CAAC;MACjD;MAEA,OAAOR,MAAM,IAAI,EAAE;IACpB;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACC;IAAA;IAAA,OACAS,UAAU,GAAV,oBAAWC,aAA8B,EAAEX,iBAAqC,EAAO;MACtF,IAAI,CAACW,aAAa,EAAE;QACnBA,aAAa,GAAG,EAAE;MACnB;MACA,OAAOA,aAAa,CAACN,GAAG,CAAEC,KAAU,IAAK;QACxC,IAAIA,KAAK,KAAKG,SAAS,EAAE;UACxBH,KAAK,GAAG,EAAE;QACX,CAAC,MAAM,IAAI,CAACH,KAAK,CAACC,OAAO,CAACE,KAAK,CAAC,EAAE;UACjCA,KAAK,GAAG,CAACA,KAAK,CAAC;QAChB;QACA,OAAO,IAAI,CAACM,QAAQ,CAACC,MAAM,CAAC;UAAEhB,MAAM,EAAES;QAAM,CAAC,CAAoB;MAClE,CAAC,CAAC;IACH,CAAC;IAAA;EAAA,EAzDsCQ,KAAK;EAAA;EAAA;AAAA"}},{"offset":{"line":10641,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","Value","_dec","_class","_exports","defineUI5Class","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","MultiValue","_Value","apply","this","arguments","_proto","formatConditionValues","values","formatValue","internalValue","externalValueType","result","split","Array","isArray","map","value","call","getElementTypeName","filter","undefined","parseValue","externalValue","operator","format"],"sources":["MultiValue-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,kDAAO,CAAC,mCAAoC,mCAAoC,SAAUC,EAAcC,GAC7G,aAEA,IAAIC,EAAMC,EACV,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAiBL,EAAaK,eAClC,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,IAAII,GAIJjB,EAAOG,EAAe,wCAAyCH,EAAKC,EAAsB,SAAUiB,GAClGd,EAAea,EAAYC,GAC3B,SAASD,IACP,OAAOC,EAAOC,MAAMC,KAAMC,YAAcD,IAC1C,CACAlB,EAAWe,EACX,IAAIK,EAASL,EAAWV,UAQxBe,EAAOC,sBAAwB,SAASA,EAAsBC,GAC5D,OAAOA,CACT,EAUAF,EAAOG,YAAc,SAASA,EAAYC,EAAeC,GACvD,IAAIC,EAASF,EACb,UAAWE,IAAW,SAAU,CAC9BA,EAASA,EAAOC,MAAM,IACxB,CACA,GAAIC,MAAMC,QAAQH,GAAS,CACzBA,EAASA,EAAOI,IAAIC,GAASf,EAAOX,UAAUkB,YAAYS,KAAKd,KAAMa,EAAOb,KAAKe,mBAAmBR,KAAqBS,OAAOH,GAASA,IAAUI,UACrJ,CACA,OAAOT,GAAU,EACnB,EAYAN,EAAOgB,WAAa,SAASA,EAAWC,EAAeZ,GACrD,IAAKY,EAAe,CAClBA,EAAgB,EAClB,CACA,OAAOA,EAAcP,IAAIC,IACvB,GAAIA,IAAUI,UAAW,CACvBJ,EAAQ,EACV,MAAO,IAAKH,MAAMC,QAAQE,GAAQ,CAChCA,EAAQ,CAACA,EACX,CACA,OAAOb,KAAKoB,SAASC,OAAO,CAC1BjB,OAAQS,GACR,EAEN,EACA,OAAOhB,CACT,CA/D0F,CA+DxFlB,KAAWE,GACbC,EAAWe,EACX,OAAOf,CACT,EAAG","sourceRoot":"filter/type"}},{"offset":{"line":10646,"column":0},"map":{"version":3,"names":["Range","defineUI5Class","getDefaultOperatorName","formatConditionValues","values","formatValue","internalValue","externalValueType","results","minValue","oFormatOptions","min","Number","MIN_SAFE_INTEGER","maxValue","max","MAX_SAFE_INTEGER","Value"],"sourceRoot":"filter/type","sources":["Range.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport Value from \"sap/fe/macros/filter/type/Value\";\nimport type SimpleType from \"sap/ui/model/SimpleType\";\n\n/**\n * Type used to extend SimpleType with hidden fields\n *\n * @typedef AugmentedSimpleType\n */\ntype AugmentedSimpleType = SimpleType & {\n\toFormatOptions?: any;\n};\n\n/**\n * Handle format/parse of range filter values.\n */\n// eslint-disable-next-line new-cap\n@defineUI5Class(\"sap.fe.macros.filter.type.Range\")\nexport default class Range extends Value {\n\t/**\n\t * Returns the default operator name for range filter values (\"BT\").\n\t *\n\t * @returns The default operator name\n\t * @protected\n\t */\n\tgetDefaultOperatorName(): string {\n\t\treturn \"BT\";\n\t}\n\n\t/**\n\t * Returns the unchanged values.\n\t *\n\t * @param values Input condition value\n\t * @returns Unchanged input condition value\n\t * @protected\n\t */\n\tformatConditionValues(values: string[] | string): string[] | string {\n\t\treturn values;\n\t}\n\n\t/**\n\t * Returns the string value parsed to the external value type.\n\t *\n\t * @param internalValue The internal string value to be formatted\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The formatted value\n\t * @protected\n\t */\n\tformatValue(internalValue: any | undefined, externalValueType: string | undefined): any {\n\t\tlet results = super.formatValue(internalValue, externalValueType);\n\n\t\tif (!results) {\n\t\t\tconst minValue = (this as AugmentedSimpleType).oFormatOptions.min || Number.MIN_SAFE_INTEGER,\n\t\t\t\tmaxValue = (this as AugmentedSimpleType).oFormatOptions.max || Number.MAX_SAFE_INTEGER;\n\n\t\t\tresults = [minValue, maxValue];\n\t\t}\n\n\t\treturn results;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;MAkBqBA,KAAK;EAL1B;AACA;AACA;EACA;EAAA,OACCC,cAAc,CAAC,iCAAiC,CAAC;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA;IAEjD;AACD;AACA;AACA;AACA;AACA;IALC,OAMAC,sBAAsB,GAAtB,kCAAiC;MAChC,OAAO,IAAI;IACZ;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA,OANC;IAAA,OAOAC,qBAAqB,GAArB,+BAAsBC,MAAyB,EAAqB;MACnE,OAAOA,MAAM;IACd;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA,OAPC;IAAA,OAQAC,WAAW,GAAX,qBAAYC,aAA8B,EAAEC,iBAAqC,EAAO;MACvF,IAAIC,OAAO,oBAASH,WAAW,YAACC,aAAa,EAAEC,iBAAiB,CAAC;MAEjE,IAAI,CAACC,OAAO,EAAE;QACb,MAAMC,QAAQ,GAAI,IAAI,CAAyBC,cAAc,CAACC,GAAG,IAAIC,MAAM,CAACC,gBAAgB;UAC3FC,QAAQ,GAAI,IAAI,CAAyBJ,cAAc,CAACK,GAAG,IAAIH,MAAM,CAACI,gBAAgB;QAEvFR,OAAO,GAAG,CAACC,QAAQ,EAAEK,QAAQ,CAAC;MAC/B;MAEA,OAAON,OAAO;IACf,CAAC;IAAA;EAAA,EAzCiCS,KAAK;EAAA;EAAA;AAAA"}},{"offset":{"line":10713,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","Value","_dec","_class","_exports","defineUI5Class","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","Range","_Value","apply","this","arguments","_proto","getDefaultOperatorName","formatConditionValues","values","formatValue","internalValue","externalValueType","results","call","minValue","oFormatOptions","min","Number","MIN_SAFE_INTEGER","maxValue","max","MAX_SAFE_INTEGER"],"sources":["Range-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,6CAAO,CAAC,mCAAoC,mCAAoC,SAAUC,EAAcC,GAC7G,aAEA,IAAIC,EAAMC,EACV,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAiBL,EAAaK,eAClC,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,IAAII,GAKJjB,EAAOG,EAAe,mCAAoCH,EAAKC,EAAsB,SAAUiB,GAC7Fd,EAAea,EAAOC,GACtB,SAASD,IACP,OAAOC,EAAOC,MAAMC,KAAMC,YAAcD,IAC1C,CACAlB,EAAWe,EACX,IAAIK,EAASL,EAAMV,UAOnBe,EAAOC,uBAAyB,SAASA,IACvC,MAAO,IACT,EASAD,EAAOE,sBAAwB,SAASA,EAAsBC,GAC5D,OAAOA,CACT,EAUAH,EAAOI,YAAc,SAASA,EAAYC,EAAeC,GACvD,IAAIC,EAAUX,EAAOX,UAAUmB,YAAYI,KAAKV,KAAMO,EAAeC,GACrE,IAAKC,EAAS,CACZ,MAAME,EAAWX,KAAKY,eAAeC,KAAOC,OAAOC,iBACjDC,EAAWhB,KAAKY,eAAeK,KAAOH,OAAOI,iBAC/CT,EAAU,CAACE,EAAUK,EACvB,CACA,OAAOP,CACT,EACA,OAAOZ,CACT,CA9CqF,CA8CnFlB,KAAWE,GACbC,EAAWe,EACX,OAAOf,CACT,EAAG","sourceRoot":"filter/type"}},{"offset":{"line":10718,"column":0},"map":{"version":3,"names":["Value","defineUI5Class","formatOptions","constraints","operatorName","operator","getDefaultOperatorName","FilterOperatorUtil","getOperator","includes","_registerCustomOperator","handlerFileName","substring","lastIndexOf","replace","methodName","sap","ui","require","customOperatorHandler","Operator","filterOperator","tokenFormat","name","valueTypes","tokenParse","format","value","formatConditionValues","values","parse","text","type","displayFormat","defaultOperator","Error","prototype","apply","getModelFilter","condition","call","addOperator","_isMultiValueOperator","filter","valueType","OPERATOR_VALUE_TYPE_STATIC","length","hasCustomOperator","_stringToExternal","externalValueType","externalValue","externalType","_getTypeInstance","_isArrayType","Array","isArray","map","valueElement","parseValue","INTERNAL_VALUE_TYPE","targetType","endsWith","_externalToString","formatValue","typeName","getElementTypeName","StringType","IntegerType","FloatType","DateType","BooleanType","Log","error","getEQOperator","undefined","internalValue","isMultiValueOperator","internalType","FieldDisplay","validated","validateValue","SimpleType"],"sourceRoot":"filter/type","sources":["Value.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport FilterOperatorUtil from \"sap/ui/mdc/condition/FilterOperatorUtil\";\nimport Operator from \"sap/ui/mdc/condition/Operator\";\nimport FieldDisplay from \"sap/ui/mdc/enum/FieldDisplay\";\nimport type Filter from \"sap/ui/model/Filter\";\nimport SimpleType from \"sap/ui/model/SimpleType\";\nimport type Type from \"sap/ui/model/Type\";\nimport BooleanType from \"sap/ui/model/type/Boolean\";\nimport DateType from \"sap/ui/model/type/Date\";\nimport FloatType from \"sap/ui/model/type/Float\";\nimport IntegerType from \"sap/ui/model/type/Integer\";\nimport StringType from \"sap/ui/model/type/String\";\n\n/**\n * Type used to extend the MDC operator type with hidden fields\n *\n * @typedef AugmentedOperator\n */\ntype AugmentedOperator = Operator & {\n\tname: string;\n\tvalueTypes: string[];\n};\n\n/**\n * Handle format/parse single filter value.\n */\n@defineUI5Class(\"sap.fe.macros.filter.type.Value\")\nexport default class Value extends SimpleType {\n\tprivate static readonly INTERNAL_VALUE_TYPE = \"string\";\n\n\tprivate static readonly OPERATOR_VALUE_TYPE_STATIC = \"static\";\n\n\tprotected operator: AugmentedOperator;\n\n\t/**\n\t * Creates a new value type instance with the given parameters.\n\t *\n\t * @param formatOptions Format options for this value type\n\t * @param formatOptions.operator The name of a (possibly custom) operator to use\n\t * @param constraints Constraints for this value type\n\t * @protected\n\t */\n\tconstructor(formatOptions: { operator?: string }, constraints: object) {\n\t\tsuper(formatOptions, constraints);\n\t\tconst operatorName = formatOptions?.operator || this.getDefaultOperatorName();\n\t\tthis.operator = FilterOperatorUtil.getOperator(operatorName) as AugmentedOperator;\n\n\t\tif (!this.operator && operatorName.includes(\".\")) {\n\t\t\tthis._registerCustomOperator(operatorName);\n\t\t}\n\t}\n\n\t/**\n\t * Registers a custom binding operator.\n\t *\n\t * @param operatorName The binding operator name\n\t * @private\n\t */\n\tprivate _registerCustomOperator(operatorName: string): void {\n\t\tconst handlerFileName = operatorName.substring(0, operatorName.lastIndexOf(\".\")).replace(/\\./g, \"/\"),\n\t\t\tmethodName = operatorName.substring(operatorName.lastIndexOf(\".\") + 1);\n\n\t\tsap.ui.require([handlerFileName], (customOperatorHandler: { [key: string]: (value: string | string[]) => Filter }) => {\n\t\t\tif (!customOperatorHandler) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.operator = new Operator({\n\t\t\t\tfilterOperator: \"\",\n\t\t\t\ttokenFormat: \"\",\n\t\t\t\tname: operatorName,\n\t\t\t\tvalueTypes: [\"self\"],\n\t\t\t\ttokenParse: \"^(.*)$\",\n\t\t\t\tformat: (value: ConditionObject): string | string[] => {\n\t\t\t\t\treturn this.formatConditionValues(value.values as string[]);\n\t\t\t\t},\n\t\t\t\tparse: function (text: ConditionObject, type: Type, displayFormat: FieldDisplay, defaultOperator: boolean) {\n\t\t\t\t\tif (typeof text === \"object\") {\n\t\t\t\t\t\tif (text.operator !== operatorName) {\n\t\t\t\t\t\t\tthrow Error(\"not matching operator\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn text.values;\n\t\t\t\t\t}\n\t\t\t\t\treturn Operator.prototype.parse.apply(this, [text, type, displayFormat, defaultOperator]);\n\t\t\t\t},\n\t\t\t\tgetModelFilter: (condition: ConditionObject): Filter => {\n\t\t\t\t\treturn customOperatorHandler[methodName].call(customOperatorHandler, this.formatConditionValues(condition.values));\n\t\t\t\t}\n\t\t\t}) as AugmentedOperator;\n\t\t\tFilterOperatorUtil.addOperator(this.operator);\n\t\t});\n\t}\n\n\t/**\n\t * Returns whether the specified operator is a multi-value operator.\n\t *\n\t * @param operator The binding operator\n\t * @returns `true`, if multi-value operator (`false` otherwise)\n\t * @private\n\t */\n\tprivate _isMultiValueOperator(operator: AugmentedOperator): boolean {\n\t\treturn (\n\t\t\toperator.valueTypes.filter(function (valueType: string) {\n\t\t\t\treturn !!valueType && valueType !== Value.OPERATOR_VALUE_TYPE_STATIC;\n\t\t\t}).length > 1\n\t\t);\n\t}\n\n\t/**\n\t * Returns whether the specified operator is a custom operator.\n\t *\n\t * @returns `true`, if custom operator (`false` otherwise)\n\t * @private\n\t */\n\tprivate hasCustomOperator(): boolean {\n\t\treturn this.operator.name.includes(\".\");\n\t}\n\n\t/**\n\t * Parses the internal string value to the external value of type 'externalValueType'.\n\t *\n\t * @param value The internal string value to be parsed\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The parsed value\n\t * @private\n\t */\n\tprivate _stringToExternal(value: string | string[], externalValueType: string | undefined): string[] {\n\t\tlet externalValue;\n\t\tconst externalType = this._getTypeInstance(externalValueType);\n\n\t\tif (externalValueType && Value._isArrayType(externalValueType)) {\n\t\t\tif (!Array.isArray(value)) {\n\t\t\t\tvalue = [value];\n\t\t\t}\n\t\t\texternalValue = value.map((valueElement: string) => {\n\t\t\t\treturn externalType ? externalType.parseValue(valueElement, Value.INTERNAL_VALUE_TYPE) : valueElement;\n\t\t\t});\n\t\t} else {\n\t\t\texternalValue = externalType ? externalType.parseValue(value as string, Value.INTERNAL_VALUE_TYPE) : value;\n\t\t}\n\n\t\treturn externalValue;\n\t}\n\n\t/**\n\t * Returns whether target type is an array.\n\t *\n\t * @param targetType The target type name\n\t * @returns `true`, if array type (`false` otherwise)\n\t * @private\n\t */\n\tprivate static _isArrayType(targetType: string): boolean {\n\t\tif (!targetType) {\n\t\t\treturn false;\n\t\t}\n\t\treturn targetType === \"array\" || targetType.endsWith(\"[]\");\n\t}\n\n\t/**\n\t * Returns the external value formatted as the internal string value.\n\t *\n\t * @param externalValue The value to be parsed\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The formatted value\n\t * @private\n\t */\n\tprivate _externalToString(externalValue: string | string[], externalValueType: string | undefined): string {\n\t\tlet value;\n\t\tconst externalType = this._getTypeInstance(externalValueType);\n\n\t\tif (externalValueType && Value._isArrayType(externalValueType)) {\n\t\t\tif (!Array.isArray(externalValue)) {\n\t\t\t\texternalValue = [externalValue];\n\t\t\t}\n\t\t\tvalue = externalValue.map((valueElement: string) => {\n\t\t\t\treturn externalType ? externalType.formatValue(valueElement, Value.INTERNAL_VALUE_TYPE) : valueElement;\n\t\t\t});\n\t\t} else {\n\t\t\tvalue = externalType ? externalType.formatValue(externalValue as string, Value.INTERNAL_VALUE_TYPE) : externalValue;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Retrieves the default type instance for given type name.\n\t *\n\t * @param typeName The name of the type\n\t * @returns The type instance\n\t * @private\n\t */\n\tprivate _getTypeInstance(typeName: string | undefined): SimpleType {\n\t\ttypeName = this.getElementTypeName(typeName) || typeName;\n\n\t\tswitch (typeName) {\n\t\t\tcase \"string\":\n\t\t\t\treturn new StringType();\n\t\t\tcase \"number\":\n\t\t\tcase \"int\":\n\t\t\t\treturn new IntegerType();\n\t\t\tcase \"float\":\n\t\t\t\treturn new FloatType();\n\t\t\tcase \"date\":\n\t\t\t\treturn new DateType();\n\t\t\tcase \"boolean\":\n\t\t\t\treturn new BooleanType();\n\t\t\tdefault:\n\t\t\t\tLog.error(\"Unexpected filter type\");\n\t\t\t\tthrow new Error(\"Unexpected filter type\");\n\t\t}\n\t}\n\n\t/**\n\t * Returns the default operator name (\"EQ\").\n\t * Should be overridden on demand.\n\t *\n\t * @returns The default operator name\n\t * @protected\n\t */\n\tgetDefaultOperatorName(): string {\n\t\treturn (FilterOperatorUtil.getEQOperator() as AugmentedOperator).name;\n\t}\n\n\t/**\n\t * Returns first value of array or input.\n\t *\n\t * @param values Input condition value\n\t * @returns Unchanged input condition value\n\t * @protected\n\t */\n\tformatConditionValues(values: string[] | string): string[] | string {\n\t\treturn Array.isArray(values) && values.length ? values[0] : (values as string);\n\t}\n\n\t/**\n\t * Returns the element type name.\n\t *\n\t * @param typeName The actual type name\n\t * @returns The type of its elements\n\t * @protected\n\t */\n\tgetElementTypeName(typeName: string | undefined): string | undefined {\n\t\tif (typeName?.endsWith(\"[]\")) {\n\t\t\treturn typeName.substring(0, typeName.length - 2);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Returns the string value parsed to the external value type 'this.operator'.\n\t *\n\t * @param internalValue The internal string value to be formatted\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The formatted value\n\t * @protected\n\t */\n\tformatValue(internalValue: any | undefined, externalValueType: string | undefined): any {\n\t\tif (!internalValue) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst isMultiValueOperator = this._isMultiValueOperator(this.operator),\n\t\t\tinternalType = this._getTypeInstance(Value.INTERNAL_VALUE_TYPE);\n\n\t\t//  from internal model string with operator\n\t\tconst values = this.operator.parse(internalValue || \"\", internalType, FieldDisplay.Value, false);\n\t\tconst value = !isMultiValueOperator && Array.isArray(values) ? values[0] : values;\n\n\t\treturn this._stringToExternal(value, externalValueType); // The value bound to a custom filter\n\t}\n\n\t/**\n\t * Returns the value parsed to the internal string value.\n\t *\n\t * @param externalValue The value to be parsed\n\t * @param externalValueType The external value type, e.g. int, float[], string, etc.\n\t * @returns The parsed value\n\t * @protected\n\t */\n\tparseValue(externalValue: any | undefined, externalValueType: string | undefined): any {\n\t\tif (!externalValue) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst isMultiValueOperator = this._isMultiValueOperator(this.operator),\n\t\t\texternalType = this._getTypeInstance(externalValueType);\n\n\t\tconst value = this._externalToString(externalValue, externalValueType);\n\n\t\t// Format to internal model string with operator\n\t\tconst values = isMultiValueOperator ? value : [value];\n\n\t\tif (this.hasCustomOperator()) {\n\t\t\t// Return a complex object while parsing the bound value in sap.ui.model.PropertyBinding.js#_externalToRaw()\n\t\t\treturn {\n\t\t\t\toperator: this.operator.name,\n\t\t\t\tvalues: [this.operator.format({ values: values } as ConditionObject, externalType)],\n\t\t\t\tvalidated: undefined\n\t\t\t};\n\t\t}\n\t\t// Return a simple string value to be stored in the internal 'filterValues' model\n\t\treturn this.operator.format({ values: values } as ConditionObject, externalType);\n\t}\n\n\t/**\n\t * Validates whether the given value in model representation is valid.\n\t *\n\t * @param externalValue The value to be validated\n\t * @protected\n\t */\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tvalidateValue(externalValue: unknown): void {\n\t\t/* Do Nothing */\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":11015,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","ClassSupport","FilterOperatorUtil","Operator","FieldDisplay","SimpleType","BooleanType","DateType","FloatType","IntegerType","StringType","_dec","_class","_class2","_exports","defineUI5Class","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","Value","_SimpleType","formatOptions","constraints","_this","call","this","operatorName","operator","getDefaultOperatorName","getOperator","includes","_registerCustomOperator","_proto","handlerFileName","substring","lastIndexOf","replace","methodName","require","customOperatorHandler","filterOperator","tokenFormat","name","valueTypes","tokenParse","format","value","formatConditionValues","values","parse","text","type","displayFormat","defaultOperator","Error","apply","getModelFilter","condition","addOperator","_isMultiValueOperator","filter","valueType","OPERATOR_VALUE_TYPE_STATIC","length","hasCustomOperator","_stringToExternal","externalValueType","externalValue","externalType","_getTypeInstance","_isArrayType","Array","isArray","map","valueElement","parseValue","INTERNAL_VALUE_TYPE","targetType","endsWith","_externalToString","formatValue","typeName","getElementTypeName","error","getEQOperator","undefined","internalValue","isMultiValueOperator","internalType","validated","validateValue"],"sources":["Value-dbg.js"],"mappings":"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","sourceRoot":"filter/type"}},{"offset":{"line":11020,"column":0},"map":{"version":3,"names":["setCustomFilterFieldProperties","childFilterField","aggregationObject","slotName","key","replace","label","getAttribute","required","FilterBarBlock","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","blockAttribute","type","isPublic","blockEvent","blockAggregation","hasVirtualNode","processAggregations","props","configuration","mSettings","checkIfCollaborationDraftSupported","oMetaModel","ModelHelper","isCollaborationDraftSupported","isDraftCollaborative","getEntityTypePath","metaPathParts","endsWith","getSearch","hideBasicSearch","xml","generate","id","processSelectionFields","draftEditState","showDraftEditState","_valueHelps","_filterFields","push","Array","isArray","selectionFields","getObject","forEach","selectionField","selectionFieldIdx","availability","setFilterFieldsAndValueHelps","length","template","undefined","pushFilterFieldsAndValueHelps","CommonHelper","getNavigationPath","annotationPath","_getContextPathForFilterField","_internalContextPath","useSemanticDateRange","stringifyCustomData","settings","visualFilter","metaPath","Log","error","sMetaPath","getPath","entityTypePath","split","sEntitySetPath","getEntitySetPath","contextPath","getModel","createBindingContext","sObjectPath","oExtraParams","filterFields","oVisualizationObjectPath","getInvolvedDataModelObjects","oConverterContext","getConverterContext","propertyInfo","getSelectionFields","sPropertyInfo","oSelectionFields","TemplateModel","oEntityType","getEntityType","oSelectionVariant","getSelectionVariant","oEntitySetContext","getContext","oFilterConditions","getFilterConditions","selectionVariant","filterConditions","_processPropertyInfos","targetEntitySet","annotations","Common","DraftRoot","DraftNode","_applyIdToContent","_apiId","_contentId","getContentId","oSearchRestrictionAnnotation","getSearchRestrictions","Boolean","Searchable","aParameterFields","sFetchedProperties","aFetchedProperties","JSON","parse","editStateLabel","getTranslatedText","propInfo","isParameter","path","stringify","_parameters","filterBarContextPath","annoPath","substring","lastIndexOf","getTemplate","internalContextPath","filterDelegate","filterBarDelegate","search","filterChanged","afterClear","internalSearch","internalFilterChanged","stateChange","liveMode","variantBackreference","showAdaptFiltersButton","showClearButton","p13nMode","suspendSelection","showMessages","toggleControlId","initialLayout","visible","BuildingBlockBase"],"sourceRoot":"filterBar","sources":["FilterBar.block.ts"],"sourcesContent":["import type { EntitySet } from \"@sap-ux/vocabularies-types\";\nimport { SelectionFields } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAggregation, blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { getSelectionVariant } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport { getSelectionFields } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { getSearchRestrictions } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport { FilterConditions, getFilterConditions } from \"sap/fe/core/templating/FilterHelper\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport Context from \"sap/ui/model/Context\";\nimport ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport { PropertyInfo } from \"../DelegateUtil\";\nimport { FilterField } from \"./FilterBarAPI\";\n\nconst setCustomFilterFieldProperties = function (childFilterField: Element, aggregationObject: any): FilterField {\n\taggregationObject.slotName = aggregationObject.key;\n\taggregationObject.key = aggregationObject.key.replace(\"InlineXML_\", \"\");\n\taggregationObject.label = childFilterField.getAttribute(\"label\");\n\taggregationObject.required = childFilterField.getAttribute(\"required\") === \"true\";\n\treturn aggregationObject;\n};\n\n/**\n * Building block for creating a FilterBar based on the metadata provided by OData V4.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:FilterBar\n *   id=\"SomeID\"\n *   showAdaptFiltersButton=\"true\"\n *   p13nMode=[\"Item\",\"Value\"]\n *   listBindingNames = \"sap.fe.tableBinding\"\n *   liveMode=\"true\"\n *   search=\".handlers.onSearch\"\n *   filterChanged=\".handlers.onFiltersChanged\"\n * /&gt;\n * </pre>\n *\n * Building block for creating a FilterBar based on the metadata provided by OData V4.\n *\n * @since 1.94.0\n */\n@defineBuildingBlock({\n\tname: \"FilterBar\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.fe.macros.filterBar.FilterBarAPI\"]\n})\nexport default class FilterBarBlock extends BuildingBlockBase {\n\t/**\n\t * ID of the FilterBar\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tid?: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tvisible?: string;\n\n\t/**\n\t * selectionFields to be displayed\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tselectionFields?: SelectionFields | Context;\n\n\t@blockAttribute({ type: \"string\" })\n\tfilterBarDelegate?: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tmetaPath?: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tcontextPath?: Context;\n\n\t/**\n\t * Displays possible errors during the search in a message box\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tshowMessages: boolean = false;\n\n\t/**\n\t * ID of the assigned variant management\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tvariantBackreference?: string;\n\n\t/**\n\t * Don't show the basic search field\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\thideBasicSearch?: boolean;\n\n\t/**\n\t * Enables the fallback to show all fields of the EntityType as filter fields if com.sap.vocabularies.UI.v1.SelectionFields are not present\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tenableFallback: boolean = false;\n\n\t/**\n\t * Handles visibility of the 'Adapt Filters' button on the FilterBar\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tshowAdaptFiltersButton: boolean = true;\n\n\t/**\n\t * Specifies the personalization options for the filter bar.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.mdc.FilterBarP13nMode[]\"\n\t})\n\tp13nMode: string = \"Item,Value\";\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpropertyInfo?: string;\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter bar.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tuseSemanticDateRange: boolean = true;\n\n\t/**\n\t * If set the search will be automatically triggered, when a filter value was changed.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tliveMode: boolean = false;\n\n\t/**\n\t * Filter conditions to be applied to the filter bar\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: false\n\t})\n\tfilterConditions?: Record<string, FilterConditions[]>;\n\n\t/**\n\t * If set to <code>true</code>, all search requests are ignored. Once it has been set to <code>false</code>,\n\t * a search is triggered immediately if one or more search requests have been triggered in the meantime\n\t * but were ignored based on the setting.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tsuspendSelection: boolean = false;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tshowDraftEditState: boolean = false;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tisDraftCollaborative: boolean = false;\n\n\t/**\n\t * Id of control that will allow for switching between normal and visual filter\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\ttoggleControlId?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tinitialLayout: string = \"compact\";\n\n\t/**\n\t * Handles the visibility of the 'Clear' button on the FilterBar.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tshowClearButton: boolean = false;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\t_applyIdToContent: boolean = false;\n\n\t/**\n\t * Temporary workaround only\n\t * path to contextPath to be used by child filterfields\n\t */\n\t_internalContextPath!: Context;\n\n\t_parameters: string | undefined;\n\n\t/**\n\t * Event handler to react to the search event of the FilterBar\n\t */\n\t@blockEvent()\n\tsearch?: string;\n\n\t/**\n\t * Event handler to react to the filterChange event of the FilterBar\n\t */\n\t@blockEvent()\n\tfilterChanged?: string;\n\n\t/**\n\t * Event handler to react to the stateChange event of the FilterBar.\n\t */\n\t@blockEvent()\n\tstateChange?: string;\n\n\t/**\n\t * Event handler to react to the filterChanged event of the FilterBar. Exposes parameters from the MDC filter bar\n\t */\n\t@blockEvent()\n\tinternalFilterChanged?: string;\n\n\t/**\n\t * Event handler to react to the search event of the FilterBar. Exposes parameteres from the MDC filter bar\n\t */\n\t@blockEvent()\n\tinternalSearch?: string;\n\n\t/**\n\t * Event handler to react to the afterClear event of the FilterBar\n\t */\n\t@blockEvent()\n\tafterClear?: string;\n\n\t@blockAggregation({\n\t\ttype: \"sap.fe.macros.FilterField\",\n\t\tisPublic: true,\n\t\thasVirtualNode: true,\n\t\tprocessAggregations: setCustomFilterFieldProperties\n\t})\n\tfilterFields?: FilterField;\n\n\t_apiId: string | undefined;\n\n\t_contentId: string | undefined;\n\n\t_valueHelps: Array<string> | \"\" | undefined;\n\n\t_filterFields: Array<string> | \"\" | undefined;\n\n\tconstructor(props: PropertiesOf<FilterBarBlock>, configuration: any, mSettings: any) {\n\t\tsuper(props, configuration, mSettings);\n\t\tif (!this.metaPath) {\n\t\t\tLog.error(\"Context Path not available for FilterBar Macro.\");\n\t\t\treturn;\n\t\t}\n\t\tconst sMetaPath = this.metaPath.getPath();\n\t\tlet entityTypePath = \"\";\n\t\tconst metaPathParts = sMetaPath?.split(\"/@com.sap.vocabularies.UI.v1.SelectionFields\") || []; // [0]: entityTypePath, [1]: SF Qualifier.\n\t\tif (metaPathParts.length > 0) {\n\t\t\tentityTypePath = this.getEntityTypePath(metaPathParts);\n\t\t}\n\t\tconst sEntitySetPath = ModelHelper.getEntitySetPath(entityTypePath);\n\t\tconst oMetaModel = this.contextPath?.getModel();\n\t\tthis._internalContextPath = oMetaModel?.createBindingContext(entityTypePath) as Context;\n\t\tconst sObjectPath = \"@com.sap.vocabularies.UI.v1.SelectionFields\";\n\t\tconst annotationPath: string = \"@com.sap.vocabularies.UI.v1.SelectionFields\" + ((metaPathParts.length && metaPathParts[1]) || \"\");\n\t\tconst oExtraParams: any = {};\n\t\toExtraParams[sObjectPath] = {\n\t\t\tfilterFields: this.filterFields\n\t\t};\n\t\tconst oVisualizationObjectPath = getInvolvedDataModelObjects(this._internalContextPath);\n\t\tconst oConverterContext = this.getConverterContext(oVisualizationObjectPath, undefined, mSettings, oExtraParams);\n\t\tif (!this.propertyInfo) {\n\t\t\tthis.propertyInfo = getSelectionFields(oConverterContext, [], annotationPath).sPropertyInfo;\n\t\t}\n\n\t\t//Filter Fields and values to the field are filled based on the selectionFields and this would be empty in case of macro outside the FE template\n\t\tif (!this.selectionFields) {\n\t\t\tconst oSelectionFields = getSelectionFields(oConverterContext, [], annotationPath).selectionFields;\n\t\t\tthis.selectionFields = new TemplateModel(oSelectionFields, oMetaModel as ODataMetaModel).createBindingContext(\"/\");\n\t\t\tconst oEntityType = oConverterContext.getEntityType(),\n\t\t\t\toSelectionVariant = getSelectionVariant(oEntityType, oConverterContext),\n\t\t\t\toEntitySetContext = (oMetaModel as ODataMetaModel).getContext(sEntitySetPath),\n\t\t\t\toFilterConditions = getFilterConditions(oEntitySetContext, { selectionVariant: oSelectionVariant });\n\t\t\tthis.filterConditions = oFilterConditions;\n\t\t}\n\t\tthis._processPropertyInfos(this.propertyInfo);\n\n\t\tconst targetEntitySet = getInvolvedDataModelObjects(this.metaPath, this.contextPath).targetEntitySet as EntitySet;\n\t\tif (targetEntitySet?.annotations?.Common?.DraftRoot || targetEntitySet?.annotations?.Common?.DraftNode) {\n\t\t\tthis.showDraftEditState = true;\n\t\t\tthis.checkIfCollaborationDraftSupported(oMetaModel as ODataMetaModel);\n\t\t}\n\n\t\tif (this._applyIdToContent) {\n\t\t\tthis._apiId = this.id + \"::FilterBar\";\n\t\t\tthis._contentId = this.id;\n\t\t} else {\n\t\t\tthis._apiId = this.id;\n\t\t\tthis._contentId = this.getContentId(this.id + \"\");\n\t\t}\n\n\t\tif (this.hideBasicSearch !== true) {\n\t\t\tconst oSearchRestrictionAnnotation = getSearchRestrictions(sEntitySetPath, oMetaModel as ODataMetaModel);\n\t\t\tthis.hideBasicSearch = Boolean(oSearchRestrictionAnnotation && !oSearchRestrictionAnnotation.Searchable);\n\t\t}\n\t\tthis.processSelectionFields();\n\t}\n\n\t_processPropertyInfos(propertyInfo: string) {\n\t\tconst aParameterFields: string[] = [];\n\t\tif (propertyInfo) {\n\t\t\tconst sFetchedProperties = propertyInfo.replace(/\\\\{/g, \"{\").replace(/\\\\}/g, \"}\");\n\t\t\tconst aFetchedProperties = JSON.parse(sFetchedProperties);\n\t\t\tconst editStateLabel = this.getTranslatedText(\"FILTERBAR_EDITING_STATUS\");\n\t\t\taFetchedProperties.forEach(function (propInfo: PropertyInfo) {\n\t\t\t\tif (propInfo.isParameter) {\n\t\t\t\t\taParameterFields.push(propInfo.name);\n\t\t\t\t}\n\t\t\t\tif (propInfo.path === \"$editState\") {\n\t\t\t\t\tpropInfo.label = editStateLabel;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.propertyInfo = JSON.stringify(aFetchedProperties).replace(/\\{/g, \"\\\\{\").replace(/\\}/g, \"\\\\}\");\n\t\t}\n\t\tthis._parameters = JSON.stringify(aParameterFields);\n\t}\n\n\tcheckIfCollaborationDraftSupported = (oMetaModel: ODataMetaModel | undefined) => {\n\t\tif (ModelHelper.isCollaborationDraftSupported(oMetaModel)) {\n\t\t\tthis.isDraftCollaborative = true;\n\t\t}\n\t};\n\n\tgetEntityTypePath = (metaPathParts: string[]) => {\n\t\treturn metaPathParts[0].endsWith(\"/\") ? metaPathParts[0] : metaPathParts[0] + \"/\";\n\t};\n\n\tgetSearch = () => {\n\t\tif (!this.hideBasicSearch) {\n\t\t\treturn xml`<control:basicSearchField>\n\t\t\t<mdc:FilterField\n\t\t\t\tid=\"${generate([this.id, \"BasicSearchField\"])}\"\n\t\t\t\tplaceholder=\"{sap.fe.i18n>M_FILTERBAR_SEARCH}\"\n\t\t\t\tconditions=\"{$filters>/conditions/$search}\"\n\t\t\t\tdataType=\"sap.ui.model.odata.type.String\"\n\t\t\t\tmaxConditions=\"1\"\n\t\t\t/>\n\t\t</control:basicSearchField>`;\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tprocessSelectionFields = () => {\n\t\tlet draftEditState = \"\";\n\t\tif (this.showDraftEditState) {\n\t\t\tdraftEditState = `<core:Fragment fragmentName=\"sap.fe.macros.filter.DraftEditState\" type=\"XML\" />`;\n\t\t}\n\t\tthis._valueHelps = [];\n\t\tthis._filterFields = [];\n\t\tthis._filterFields?.push(draftEditState);\n\t\tif (!Array.isArray(this.selectionFields)) {\n\t\t\tthis.selectionFields = this.selectionFields!.getObject() as SelectionFields;\n\t\t}\n\t\tthis.selectionFields?.forEach((selectionField: any, selectionFieldIdx) => {\n\t\t\tif (selectionField.availability === \"Default\") {\n\t\t\t\tthis.setFilterFieldsAndValueHelps(selectionField, selectionFieldIdx);\n\t\t\t}\n\t\t});\n\t\tthis._filterFields = this._filterFields?.length > 0 ? this._filterFields : \"\";\n\t\tthis._valueHelps = this._valueHelps?.length > 0 ? this._valueHelps : \"\";\n\t};\n\n\tsetFilterFieldsAndValueHelps = (selectionField: any, selectionFieldIdx: number) => {\n\t\tif (selectionField.template === undefined && selectionField.type !== \"Slot\") {\n\t\t\tthis.pushFilterFieldsAndValueHelps(selectionField);\n\t\t} else if (Array.isArray(this._filterFields)) {\n\t\t\tthis._filterFields?.push(\n\t\t\t\txml`<template:with path=\"selectionFields>${selectionFieldIdx}\" var=\"item\">\n\t\t\t\t\t<core:Fragment fragmentName=\"sap.fe.macros.filter.CustomFilter\" type=\"XML\" />\n\t\t\t\t</template:with>`\n\t\t\t);\n\t\t}\n\t};\n\n\t_getContextPathForFilterField(selectionField: any, filterBarContextPath: Context): string | Context {\n\t\tlet contextPath: string | Context = filterBarContextPath;\n\t\tif (selectionField.isParameter) {\n\t\t\t// Example:\n\t\t\t// FilterBarContextPath: /Customer/Set\n\t\t\t// ParameterPropertyPath: /Customer/P_CC\n\t\t\t// ContextPathForFilterField: /Customer\n\t\t\tconst annoPath = selectionField.annotationPath;\n\t\t\tcontextPath = annoPath.substring(0, annoPath.lastIndexOf(\"/\") + 1);\n\t\t}\n\t\treturn contextPath;\n\t}\n\n\tpushFilterFieldsAndValueHelps = (selectionField: any) => {\n\t\tif (Array.isArray(this._filterFields)) {\n\t\t\tthis._filterFields?.push(\n\t\t\t\txml`<internalMacro:FilterField\n\t\t\tidPrefix=\"${generate([this.id, \"FilterField\", CommonHelper.getNavigationPath(selectionField.annotationPath)])}\"\n\t\t\tvhIdPrefix=\"${generate([this.id, \"FilterFieldValueHelp\"])}\"\n\t\t\tproperty=\"${selectionField.annotationPath}\"\n\t\t\tcontextPath=\"${this._getContextPathForFilterField(selectionField, this._internalContextPath)}\"\n\t\t\tuseSemanticDateRange=\"${this.useSemanticDateRange}\"\n\t\t\tsettings=\"${CommonHelper.stringifyCustomData(selectionField.settings)}\"\n\t\t\tvisualFilter=\"${selectionField.visualFilter}\"\n\t\t\t/>`\n\t\t\t);\n\t\t}\n\t\tif (Array.isArray(this._valueHelps)) {\n\t\t\tthis._valueHelps?.push(\n\t\t\t\txml`<macro:ValueHelp\n\t\t\tidPrefix=\"${generate([this.id, \"FilterFieldValueHelp\"])}\"\n\t\t\tconditionModel=\"$filters\"\n\t\t\tproperty=\"${selectionField.annotationPath}\"\n\t\t\tcontextPath=\"${this._getContextPathForFilterField(selectionField, this._internalContextPath)}\"\n\t\t\tfilterFieldValueHelp=\"true\"\n\t\t\tuseSemanticDateRange=\"${this.useSemanticDateRange}\"\n\t\t/>`\n\t\t\t);\n\t\t}\n\t};\n\n\tgetTemplate() {\n\t\tconst internalContextPath = this._internalContextPath?.getPath();\n\t\tlet filterDelegate = \"\";\n\t\tif (this.filterBarDelegate) {\n\t\t\tfilterDelegate = this.filterBarDelegate;\n\t\t} else {\n\t\t\tfilterDelegate = \"{name:'sap/fe/macros/filterBar/FilterBarDelegate', payload: {entityTypePath: '\" + internalContextPath + \"'}}\";\n\t\t}\n\t\treturn xml`<macroFilterBar:FilterBarAPI\n        xmlns:template=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1\"\n        xmlns:core=\"sap.ui.core\"\n        xmlns:mdc=\"sap.ui.mdc\"\n        xmlns:control=\"sap.fe.core.controls\"\n        xmlns:macroFilterBar=\"sap.fe.macros.filterBar\"\n        xmlns:macro=\"sap.fe.macros\"\n        xmlns:internalMacro=\"sap.fe.macros.internal\"\n        xmlns:customData=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\tid=\"${this._apiId}\"\n\t\tsearch=\"${this.search}\"\n\t\tfilterChanged=\"${this.filterChanged}\"\n\t\tafterClear=\"${this.afterClear}\"\n\t\tinternalSearch=\"${this.internalSearch}\"\n\t\tinternalFilterChanged=\"${this.internalFilterChanged}\"\n\t\tstateChange=\"${this.stateChange}\"\n\t>\n\t\t<control:FilterBar\n\t\t\tcore:require=\"{API: 'sap/fe/macros/filterBar/FilterBarAPI'}\"\n\t\t\tid=\"${this._contentId}\"\n\t\t\tliveMode=\"${this.liveMode}\"\n\t\t\tdelegate=\"${filterDelegate}\"\n\t\t\tvariantBackreference=\"${this.variantBackreference}\"\n\t\t\tshowAdaptFiltersButton=\"${this.showAdaptFiltersButton}\"\n\t\t\tshowClearButton=\"${this.showClearButton}\"\n\t\t\tp13nMode=\"${this.p13nMode}\"\n\t\t\tsearch=\"API.handleSearch($event)\"\n\t\t\tfiltersChanged=\"API.handleFilterChanged($event)\"\n\t\t\tfilterConditions=\"${this.filterConditions}\"\n\t\t\tsuspendSelection=\"${this.suspendSelection}\"\n\t\t\tshowMessages=\"${this.showMessages}\"\n\t\t\ttoggleControl=\"${this.toggleControlId}\"\n\t\t\tinitialLayout=\"${this.initialLayout}\"\n\t\t\tpropertyInfo=\"${this.propertyInfo}\"\n\t\t\tcustomData:localId=\"${this.id}\"\n\t\t\tvisible=\"${this.visible}\"\n\t\t\tcustomData:hideBasicSearch=\"${this.hideBasicSearch}\"\n\t\t\tcustomData:showDraftEditState=\"${this.showDraftEditState}\"\n\t\t\tcustomData:useSemanticDateRange=\"${this.useSemanticDateRange}\"\n\t\t\tcustomData:entityType=\"${internalContextPath}\"\n\t\t\tcustomData:parameters=\"${this._parameters}\"\n\t\t>\n\t\t\t<control:dependents>\n\t\t\t\t${this._valueHelps}\n\t\t\t</control:dependents>\n\t\t\t${this.getSearch()}\n\t\t\t<control:filterItems>\n\t\t\t\t${this._filterFields}\n\t\t\t</control:filterItems>\n\t\t</control:FilterBar>\n\t</macroFilterBar:FilterBarAPI>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":11663,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","DataVisualization","FilterBar","MetaModelConverter","MetaModelFunction","ModelHelper","StableIdHelper","TemplateModel","FilterHelper","CommonHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","_descriptor30","_exports","getFilterConditions","generate","getSearchRestrictions","getInvolvedDataModelObjects","getSelectionFields","getSelectionVariant","xml","defineBuildingBlock","blockEvent","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","setCustomFilterFieldProperties","childFilterField","aggregationObject","slotName","replace","label","getAttribute","required","FilterBarBlock","name","namespace","publicNamespace","returnTypes","type","isPublic","hasVirtualNode","processAggregations","_BuildingBlockBase","props","configuration","mSettings","_this$contextPath","_targetEntitySet$anno","_targetEntitySet$anno2","_targetEntitySet$anno3","_targetEntitySet$anno4","_this","this","checkIfCollaborationDraftSupported","oMetaModel","isCollaborationDraftSupported","isDraftCollaborative","getEntityTypePath","metaPathParts","endsWith","getSearch","hideBasicSearch","id","processSelectionFields","_this$_filterFields","_this$selectionFields","_this$_filterFields2","_this$_valueHelps","draftEditState","showDraftEditState","_valueHelps","_filterFields","push","Array","isArray","selectionFields","getObject","selectionField","selectionFieldIdx","availability","setFilterFieldsAndValueHelps","length","template","pushFilterFieldsAndValueHelps","_this$_filterFields3","_this$_filterFields4","getNavigationPath","annotationPath","_getContextPathForFilterField","_internalContextPath","useSemanticDateRange","stringifyCustomData","settings","visualFilter","_this$_valueHelps2","metaPath","error","sMetaPath","getPath","entityTypePath","_metaPathParts","split","sEntitySetPath","getEntitySetPath","_oMetaModel","contextPath","getModel","createBindingContext","sObjectPath","oExtraParams","filterFields","oVisualizationObjectPath","oConverterContext","getConverterContext","propertyInfo","sPropertyInfo","oSelectionFields","oEntityType","getEntityType","oSelectionVariant","oEntitySetContext","getContext","oFilterConditions","selectionVariant","filterConditions","_processPropertyInfos","targetEntitySet","annotations","Common","DraftRoot","DraftNode","_applyIdToContent","_apiId","_contentId","getContentId","oSearchRestrictionAnnotation","Boolean","Searchable","_proto","aParameterFields","sFetchedProperties","aFetchedProperties","JSON","parse","editStateLabel","getTranslatedText","propInfo","isParameter","path","stringify","_parameters","filterBarContextPath","annoPath","substring","lastIndexOf","getTemplate","_this$_internalContex","internalContextPath","filterDelegate","filterBarDelegate","search","filterChanged","afterClear","internalSearch","internalFilterChanged","stateChange","liveMode","variantBackreference","showAdaptFiltersButton","showClearButton","p13nMode","suspendSelection","showMessages","toggleControlId","initialLayout","visible"],"sources":["FilterBar.block-dbg.js"],"mappings":"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","sourceRoot":"filterBar"}},{"offset":{"line":11743,"column":0},"map":{"version":3,"names":["FilterBarAPI","defineUI5Class","returnTypes","property","type","expectedAnnotations","expectedTypes","defaultValue","aggregation","multiple","event","xmlEventHandler","triggerSearch","filterBar","content","waitForInitialization","err","message","Error","String","Log","error","isSemanticDateFilterApplied","SemanticDateOperators","hasSemanticDateOperations","getConditions","handleSearch","oEvent","oFilterBar","getSource","oEventParameters","getParameters","oConditions","getFilterConditions","eventParameters","_prepareEventParameters","fireInternalSearch","merge","conditions","fireSearch","handleFilterChanged","fireInternalFilterChanged","fireFilterChanged","parameters","filters","search","FilterUtils","getFilters","setFilterValues","sConditionPath","sOperator","vValues","arguments","length","getActiveFiltersText","getAssignedFiltersText","filtersText","getSelectionVariant","filterState","StateUtil","retrieveExternalState","filterObject","filter","data","StateFiltersToSelectionVariant","getSelectionVariantFromConditions","getPropertyHelper","id","getId","MacroAPI"],"sourceRoot":"filterBar","sources":["FilterBarAPI.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport merge from \"sap/base/util/merge\";\n\nimport { aggregation, defineUI5Class, event, property, xmlEventHandler } from \"sap/fe/core/helpers/ClassSupport\";\nimport SemanticDateOperators from \"sap/fe/core/helpers/SemanticDateOperators\";\nimport StateFiltersToSelectionVariant from \"sap/fe/core/StateFilterToSelectionVariant\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport SelectionVariant from \"sap/fe/navigation/SelectionVariant\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport type FilterBar from \"sap/ui/mdc/FilterBar\";\nimport StateUtil from \"sap/ui/mdc/p13n/StateUtil\";\nimport MacroAPI from \"../MacroAPI\";\n/**\n * Definition of a custom filter to be used inside the FilterBar.\n *\n * The template for the FilterField has to be provided as the default aggregation\n *\n * @alias sap.fe.macros.FilterField\n * @public\n * @experimental\n */\nexport type FilterField = {\n\t/**\n\t * The property name of the FilterField\n\t *\n\t * @public\n\t */\n\tkey: string;\n\t/**\n\t * The text that will be displayed for this FilterField\n\t *\n\t * @public\n\t */\n\tlabel: string;\n\t/**\n\t * Reference to the key of another filter already displayed in the table to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n\t/**\n\t * Defines where this filter should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: \"Before\" | \"After\";\n\t/**\n\t * If set, possible errors that occur during the search will be displayed in a message box.\n\t *\n\t * @public\n\t */\n\tshowMessages?: boolean;\n\n\tslotName?: string;\n};\n\n/**\n * Building block for creating a FilterBar based on the metadata provided by OData V4.\n * <br>\n * Usually, a SelectionFields annotation is expected.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:FilterBar id=\"MyFilterBar\" metaPath=\"@com.sap.vocabularies.UI.v1.SelectionFields\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.FilterBar\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.filterBar.FilterBarAPI\", {\n\treturnTypes: [\"sap.ui.core.Control\"]\n})\nclass FilterBarAPI extends MacroAPI {\n\t/**\n\t * The identifier of the FilterBar control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedAnnotations: [\"com.sap.vocabularies.UI.v1.SelectionFields\"],\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\"]\n\t})\n\tmetaPath!: string;\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"NavigationProperty\"]\n\t})\n\tcontextPath!: string;\n\n\t/**\n\t * If true, the search is triggered automatically when a filter value is changed.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tliveMode?: boolean;\n\n\t/**\n\t * Parameter which sets the visibility of the FilterBar building block\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tvisible?: boolean;\n\n\t/**\n\t * Displays possible errors during the search in a message box\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tshowMessages?: boolean;\n\n\t/**\n\t * Handles the visibility of the 'Clear' button on the FilterBar.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tshowClearButton?: boolean;\n\n\t/**\n\t * Aggregate filter fields of the FilterBar building block\n\t *\n\t * @public\n\t */\n\t@aggregation({ type: \"sap.fe.macros.FilterField\", multiple: true })\n\tfilterFields?: FilterField[];\n\n\t/**\n\t * This event is fired when the 'Go' button is pressed or after a condition change.\n\t *\n\t * @public\n\t */\n\t@event()\n\tsearch!: Function;\n\n\t/**\n\t * This event is fired when the 'Go' button is pressed or after a condition change. This is only internally used by sap.fe (Fiori elements) and\n\t * exposes parameters from internal MDC-FilterBar search event\n\t *\n\t * @private\n\t */\n\t@event()\n\tinternalSearch!: Function;\n\n\t/**\n\t * This event is fired after either a filter value or the visibility of a filter item has been changed. The event contains conditions that will be used as filters.\n\t *\n\t * @public\n\t */\n\t@event()\n\tfilterChanged!: Function;\n\n\t/**\n\t * This event is fired when the 'Clear' button is pressed. This is only possible when the 'Clear' button is enabled.\n\t *\n\t * @public\n\t */\n\t@event()\n\tafterClear!: Function;\n\n\t/**\n\t * This event is fired after either a filter value or the visibility of a filter item has been changed. The event contains conditions that will be used as filters.\n\t * This is used internally only by sap.fe (Fiori Elements). This exposes parameters from the MDC-FilterBar filterChanged event that is used by sap.fe in some cases.\n\t *\n\t * @private\n\t */\n\t@event()\n\tinternalFilterChanged!: Function;\n\n\t/**\n\t * An event that is triggered when the FilterBar State changes.\n\t *\n\t * You can set this to store the state of the filter bar in the app state.\n\t *\n\t * @private\n\t */\n\t@event()\n\tstateChange!: Function;\n\n\t@xmlEventHandler()\n\thandleSearch(oEvent: UI5Event) {\n\t\tconst oFilterBar = oEvent.getSource() as FilterBar;\n\t\tconst oEventParameters = oEvent.getParameters();\n\t\tif (oFilterBar) {\n\t\t\tconst oConditions = oFilterBar.getFilterConditions();\n\t\t\tconst eventParameters: object = this._prepareEventParameters(oFilterBar);\n\t\t\t(this as any).fireInternalSearch(merge({ conditions: oConditions }, oEventParameters));\n\t\t\t(this as any).fireSearch(eventParameters);\n\t\t}\n\t}\n\n\t@xmlEventHandler()\n\thandleFilterChanged(oEvent: UI5Event) {\n\t\tconst oFilterBar = oEvent.getSource() as FilterBar;\n\t\tconst oEventParameters = oEvent.getParameters();\n\t\tif (oFilterBar) {\n\t\t\tconst oConditions = oFilterBar.getFilterConditions();\n\t\t\tconst eventParameters: object = this._prepareEventParameters(oFilterBar);\n\t\t\t(this as any).fireInternalFilterChanged(merge({ conditions: oConditions }, oEventParameters));\n\t\t\t(this as any).fireFilterChanged(eventParameters);\n\t\t}\n\t}\n\n\t_prepareEventParameters(oFilterBar: FilterBar) {\n\t\tconst { parameters, filters, search } = FilterUtils.getFilters(oFilterBar);\n\n\t\treturn { parameters, filters, search };\n\t}\n\n\t/**\n\t * Set the filter values for the given property in the filter bar.\n\t * The filter values can be either a single value or an array of values.\n\t * Each filter value must be represented as a primitive value.\n\t *\n\t * @param sConditionPath The path to the property as a condition path\n\t * @param [sOperator] The operator to be used (optional) - if not set, the default operator (EQ) will be used\n\t * @param vValues The values to be applied\n\t * @returns A promise for asynchronous handling\n\t * @public\n\t */\n\tsetFilterValues(\n\t\tsConditionPath: string,\n\t\tsOperator: string | undefined,\n\t\tvValues?: undefined | string | number | boolean | string[] | number[] | boolean[]\n\t) {\n\t\tif (arguments.length === 2) {\n\t\t\tvValues = sOperator;\n\t\t\treturn FilterUtils.setFilterValues(this.content, sConditionPath, vValues);\n\t\t}\n\t\treturn FilterUtils.setFilterValues(this.content, sConditionPath, sOperator, vValues);\n\t}\n\n\t/**\n\t * Get the Active Filters Text Summary for the filter bar.\n\t *\n\t * @returns Active filters summary as text\n\t * @public\n\t */\n\tgetActiveFiltersText() {\n\t\tconst oFilterBar = this.content as FilterBar;\n\t\treturn oFilterBar?.getAssignedFiltersText()?.filtersText || \"\";\n\t}\n\n\t/**\n\t * Provides all the filters that are currently active\n\t * along with the search expression.\n\t *\n\t * @returns {{filters: sap.ui.model.Filter[]|undefined, search: string|undefined}} An array of active filters and the search expression.\n\t * @public\n\t */\n\tgetFilters() {\n\t\treturn FilterUtils.getFilters(this.content as FilterBar);\n\t}\n\n\t/**\n\t * Triggers the API search on the filter bar.\n\t *\n\t * @returns Returns a promise which resolves if filter go is triggered successfully; otherwise gets rejected.\n\t * @public\n\t */\n\ttriggerSearch = async () => {\n\t\tconst filterBar = this.content as FilterBar;\n\t\ttry {\n\t\t\tif (filterBar) {\n\t\t\t\tawait filterBar.waitForInitialization();\n\t\t\t\treturn await filterBar.triggerSearch();\n\t\t\t}\n\t\t} catch (err: unknown) {\n\t\t\tconst message = err instanceof Error ? err.message : String(err);\n\t\t\tLog.error(`FE : Buildingblock : FilterBar : ${message}`);\n\t\t\tthrow Error(message);\n\t\t}\n\t};\n\n\tisSemanticDateFilterApplied = (): boolean => {\n\t\treturn !SemanticDateOperators.hasSemanticDateOperations((this.content as FilterBar).getConditions());\n\t};\n\n\t/**\n\t * Get the selection variant from the filter bar.\n\t *\n\t *\n\t * @returns A promise which resolves with a {@link sap.fe.navigation.SelectionVariant}\n\t */\n\tasync getSelectionVariant(): Promise<SelectionVariant> {\n\t\ttry {\n\t\t\tconst filterBar = this.content as FilterBar;\n\t\t\tconst filterState = await StateUtil.retrieveExternalState(filterBar);\n\t\t\tconst filterObject = filterState.filter as Record<string, ConditionObject[]>;\n\t\t\tconst parameters = filterBar.data(\"parameters\") as string[];\n\t\t\treturn StateFiltersToSelectionVariant.getSelectionVariantFromConditions(\n\t\t\t\tfilterObject,\n\t\t\t\tfilterBar.getPropertyHelper(),\n\t\t\t\tparameters\n\t\t\t);\n\t\t} catch (error: unknown) {\n\t\t\tconst id: string = this.getId();\n\t\t\tconst message = error instanceof Error ? error.message : String(error);\n\t\t\tLog.error(`FilterBar Building Block (${id}) - get selection variant failed : ${message}`);\n\t\t\tthrow Error(message);\n\t\t}\n\t}\n}\n\nexport default FilterBarAPI;\n"],"mappings":"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"}},{"offset":{"line":12022,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","merge","ClassSupport","SemanticDateOperators","StateFiltersToSelectionVariant","FilterUtils","StateUtil","MacroAPI","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","xmlEventHandler","property","event","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FilterBarAPI","returnTypes","type","expectedAnnotations","expectedTypes","defaultValue","multiple","_MacroAPI","_this","_len","arguments","length","args","Array","_key","this","triggerSearch","async","filterBar","content","waitForInitialization","err","message","String","error","isSemanticDateFilterApplied","hasSemanticDateOperations","getConditions","_proto","handleSearch","oEvent","oFilterBar","getSource","oEventParameters","getParameters","oConditions","getFilterConditions","eventParameters","_prepareEventParameters","fireInternalSearch","conditions","fireSearch","handleFilterChanged","fireInternalFilterChanged","fireFilterChanged","parameters","filters","search","getFilters","setFilterValues","sConditionPath","sOperator","vValues","getActiveFiltersText","_oFilterBar$getAssign","getAssignedFiltersText","filtersText","getSelectionVariant","filterState","retrieveExternalState","filterObject","filter","data","getSelectionVariantFromConditions","getPropertyHelper","id","getId","getOwnPropertyDescriptor"],"sources":["FilterBarAPI-dbg.js"],"mappings":"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","sourceRoot":"filterBar"}},{"offset":{"line":12027,"column":0},"map":{"version":3,"names":["ODataFilterBarDelegate","Object","assign","FilterBarDelegate","apiVersion","EDIT_STATE_PROPERTY_NAME","SEARCH_PROPERTY_NAME","VALUE_HELP_TYPE","FETCHED_PROPERTIES_DATA_KEY","CONDITION_PATH_TO_PROPERTY_PATH_REGEX","_templateEditState","sIdPrefix","metaModel","oModifier","oThis","JSONModel","id","isDraftCollaborative","ModelHelper","isCollaborationDraftSupported","oPreprocessorSettings","bindingContexts","this","createBindingContext","models","DelegateUtil","templateControlFragment","undefined","finally","destroy","_templateCustomFilter","oFilterBar","oSelectionFieldInfo","oMetaModel","sEntityTypePath","getCustomData","oItemModel","TemplateModel","contextPath","item","oView","CommonUtils","getTargetView","oController","getController","oOptions","controller","view","_getPropertyPath","sConditionPath","replace","_findSelectionField","aSelectionFields","sFlexName","find","oSelectionField","conditionPath","replaceAll","availability","_generateIdPrefix","sFilterBarId","sControlType","sNavigationPrefix","generate","_templateValueHelp","oSettings","oParameters","idPrefix","sVhIdPrefix","conditionModel","navigationPrefix","filterFieldValueHelp","useSemanticDateRange","bUseSemanticDateRange","mergeObjects","Promise","resolve","isXML","then","aVHElements","sAggregationName","length","forEach","elt","insertAggregation","oControl","catch","oError","Log","error","_addXMLCustomFilterField","sPropertyPath","aDependents","getAggregation","i","oFilterField","isA","sDataProperty","getFieldPath","sFilterFieldId","getId","indexOf","_templateFilterField","pageModel","vhIdPrefix","propertyPath","sPropertyName","settings","visualFilter","oVisualFilter","converterContext","_addPropertyInfo","oParentControl","mPropertyBag","sPropertyInfoName","sPropertyInfoKey","modifier","delegate","getProperty","aPropertyInfo","hasPropertyInfo","some","prop","key","name","entityTypePath","payload","FilterUtils","createConverterContext","appComponent","entityType","getEntityType","filterField","getFilterField","buildProperyInfo","push","setProperty","errorMsg","warning","addItem","_addP13nItem","model","getModel","getMetaModel","targets","_addFlexItem","removeItem","oFilterFieldProperty","doRemoveItem","data","addCondition","removeCondition","clearFilters","oFilterControl","clearFilterValues","fetchModel","oModel","fetchPropertiesForEntity","oEntityType","getObject","includeHidden","oConverterContext","sEntitySetPath","getEntitySetPath","mFilterFields","getConvertedFilterFields","aFetchedProperties","oFilterFieldInfo","sAnnotationPath","annotationPath","oPropertyAnnotations","getConvertedTypes","resolvePath","target","sTargetPropertyPrefix","CommonHelper","getLocationForPropertyPath","sProperty","selectionFields","annotations","UI","SelectionFields","filterFacets","FilterFacets","_isFilterAdaptable","isPropertyFilterable","aParameterFields","processedFields","processSelectionFields","processedFieldsKeys","oProps","filter","oProp","includes","oFR","getFilterRestrictionsByPath","mAllowedExpressions","FilterAllowedExpressions","iFilterFieldIndex","oSelField","group","groupLabel","path","tooltip","removeFromAppState","hasValueHelp","oProperty","oPropertyContext","bRemoveFromAppState","oFilterDefaultValueAnnotation","oFilterDefaultValue","getModelType","$Type","context","defaultFilterConditions","fieldPath","operator","values","filterExpression","getSpecificAllowedExpression","visible","propInfo","label","getResourceModel","getText","typeConfig","TypeUtil","getTypeConfig","dataType","formatOptions","constraints","getLocalizedText","isParameter","setCustomData","getLineItemQualifierFromTable","annotationPaths","getMetaPath","split","Visualizations","visualization","$AnnotationPath","metaPaths","filterFieldInfo","propertyAnnotations","isSelectionField","isInFilterFacets","selectionField","value","filterFacet","fieldGroup","Target","$target","Data","dataField","Value","AdaptationHidden","sFlexPropertyName","oAppComponent","getParent","bIsXML","template","type","sNavigationPath","getNavigationPath","sUseSemanticDateRange","sBindingPath","substr","lastIndexOf","sRetrievedEntityTypePath","sRetrievedUseSemanticDateRange","sInFilterBarId","property","filterOutNavPropBinding","join","sValueHelpType","doesValueHelpExist","bValueHelpExists","_getPageModel","_getCachedProperties","window","Element","_setCachedProperties","_getCachedOrFetchPropertiesForEntity","localGroupLabel","oGroup","sort","a","b","localeCompare","fetchProperties","getTypeUtil"],"sourceRoot":"filterBar","sources":["FilterBarDelegate.ts"],"sourcesContent":["import {\n\tDataFieldAbstractTypes,\n\tDataFieldTypes,\n\tFieldGroupType,\n\tFilterFacets,\n\tReferenceFacet,\n\tSelectionFields,\n\tUIAnnotationTerms\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport mergeObjects from \"sap/base/util/merge\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { FilterField, processSelectionFields } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport { isPropertyFilterable } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { getLocalizedText, getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport PageController from \"sap/fe/core/PageController\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport { hasValueHelp } from \"sap/fe/core/templating/PropertyFormatters\";\nimport { getModelType } from \"sap/fe/core/type/EDM\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport FilterBar from \"sap/ui/mdc/FilterBar\";\nimport FilterBarDelegate from \"sap/ui/mdc/FilterBarDelegate\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nconst ODataFilterBarDelegate = Object.assign({}, FilterBarDelegate) as any;\nODataFilterBarDelegate.apiVersion = 2;\nconst EDIT_STATE_PROPERTY_NAME = \"$editState\",\n\tSEARCH_PROPERTY_NAME = \"$search\",\n\tVALUE_HELP_TYPE = \"FilterFieldValueHelp\",\n\tFETCHED_PROPERTIES_DATA_KEY = \"sap_fe_FilterBarDelegate_propertyInfoMap\",\n\tCONDITION_PATH_TO_PROPERTY_PATH_REGEX = /[+*]/g;\n\nfunction _templateEditState(sIdPrefix: any, metaModel: ODataMetaModel, oModifier: any) {\n\tconst oThis = new JSONModel({\n\t\t\tid: sIdPrefix,\n\t\t\tisDraftCollaborative: ModelHelper.isCollaborationDraftSupported(metaModel)\n\t\t}),\n\t\toPreprocessorSettings = {\n\t\t\tbindingContexts: {\n\t\t\t\tthis: oThis.createBindingContext(\"/\")\n\t\t\t},\n\t\t\tmodels: {\n\t\t\t\t//\"this.i18n\": ResourceModel.getModel(), TODO: To be checked why this is needed, should not be needed at all\n\t\t\t\tthis: oThis\n\t\t\t}\n\t\t};\n\n\treturn DelegateUtil.templateControlFragment(\"sap.fe.macros.filter.DraftEditState\", oPreprocessorSettings, undefined, oModifier).finally(\n\t\tfunction () {\n\t\t\toThis.destroy();\n\t\t}\n\t);\n}\n\nODataFilterBarDelegate._templateCustomFilter = async function (\n\toFilterBar: any,\n\tsIdPrefix: any,\n\toSelectionFieldInfo: any,\n\toMetaModel: any,\n\toModifier: any\n) {\n\tconst sEntityTypePath = await DelegateUtil.getCustomData(oFilterBar, \"entityType\", oModifier);\n\tconst oThis = new JSONModel({\n\t\t\tid: sIdPrefix\n\t\t}),\n\t\toItemModel = new TemplateModel(oSelectionFieldInfo, oMetaModel),\n\t\toPreprocessorSettings = {\n\t\t\tbindingContexts: {\n\t\t\t\tcontextPath: oMetaModel.createBindingContext(sEntityTypePath),\n\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\titem: oItemModel.createBindingContext(\"/\")\n\t\t\t},\n\t\t\tmodels: {\n\t\t\t\tcontextPath: oMetaModel,\n\t\t\t\tthis: oThis,\n\t\t\t\titem: oItemModel\n\t\t\t}\n\t\t},\n\t\toView = CommonUtils.getTargetView(oFilterBar),\n\t\toController = oView ? oView.getController() : undefined,\n\t\toOptions = {\n\t\t\tcontroller: oController ? oController : undefined,\n\t\t\tview: oView\n\t\t};\n\n\treturn DelegateUtil.templateControlFragment(\"sap.fe.macros.filter.CustomFilter\", oPreprocessorSettings, oOptions, oModifier).finally(\n\t\tfunction () {\n\t\t\toThis.destroy();\n\t\t\toItemModel.destroy();\n\t\t}\n\t);\n};\nfunction _getPropertyPath(sConditionPath: any) {\n\treturn sConditionPath.replace(CONDITION_PATH_TO_PROPERTY_PATH_REGEX, \"\");\n}\nODataFilterBarDelegate._findSelectionField = function (aSelectionFields: any, sFlexName: any) {\n\treturn aSelectionFields.find(function (oSelectionField: any) {\n\t\treturn (\n\t\t\t(oSelectionField.conditionPath === sFlexName || oSelectionField.conditionPath.replaceAll(/\\*/g, \"\") === sFlexName) &&\n\t\t\toSelectionField.availability !== \"Hidden\"\n\t\t);\n\t});\n};\nfunction _generateIdPrefix(sFilterBarId: any, sControlType: any, sNavigationPrefix?: any) {\n\treturn sNavigationPrefix ? generate([sFilterBarId, sControlType, sNavigationPrefix]) : generate([sFilterBarId, sControlType]);\n}\nfunction _templateValueHelp(oSettings: any, oParameters: any) {\n\tconst oThis = new JSONModel({\n\t\tidPrefix: oParameters.sVhIdPrefix,\n\t\tconditionModel: \"$filters\",\n\t\tnavigationPrefix: oParameters.sNavigationPrefix ? `/${oParameters.sNavigationPrefix}` : \"\",\n\t\tfilterFieldValueHelp: true,\n\t\tuseSemanticDateRange: oParameters.bUseSemanticDateRange\n\t});\n\tconst oPreprocessorSettings = mergeObjects({}, oSettings, {\n\t\tbindingContexts: {\n\t\t\tthis: oThis.createBindingContext(\"/\")\n\t\t},\n\t\tmodels: {\n\t\t\tthis: oThis\n\t\t}\n\t});\n\n\treturn Promise.resolve(\n\t\tDelegateUtil.templateControlFragment(\"sap.fe.macros.internal.valuehelp.ValueHelp\", oPreprocessorSettings, {\n\t\t\tisXML: oSettings.isXML\n\t\t})\n\t)\n\t\t.then(function (aVHElements: any) {\n\t\t\tif (aVHElements) {\n\t\t\t\tconst sAggregationName = \"dependents\";\n\t\t\t\t//Some filter fields have the PersistenceProvider aggregation besides the FVH :\n\t\t\t\tif (aVHElements.length) {\n\t\t\t\t\taVHElements.forEach(function (elt: any) {\n\t\t\t\t\t\tif (oParameters.oModifier) {\n\t\t\t\t\t\t\toParameters.oModifier.insertAggregation(oParameters.oControl, sAggregationName, elt, 0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toParameters.oControl.insertAggregation(sAggregationName, elt, 0, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (oParameters.oModifier) {\n\t\t\t\t\toParameters.oModifier.insertAggregation(oParameters.oControl, sAggregationName, aVHElements, 0);\n\t\t\t\t} else {\n\t\t\t\t\toParameters.oControl.insertAggregation(sAggregationName, aVHElements, 0, false);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t.catch(function (oError: any) {\n\t\t\tLog.error(\"Error while evaluating DelegateUtil.isValueHelpRequired\", oError);\n\t\t})\n\t\t.finally(function () {\n\t\t\toThis.destroy();\n\t\t});\n}\nasync function _addXMLCustomFilterField(oFilterBar: any, oModifier: any, sPropertyPath: any) {\n\ttry {\n\t\tconst aDependents = await Promise.resolve(oModifier.getAggregation(oFilterBar, \"dependents\"));\n\t\tlet i;\n\t\tif (aDependents && aDependents.length > 1) {\n\t\t\tfor (i = 0; i <= aDependents.length; i++) {\n\t\t\t\tconst oFilterField = aDependents[i];\n\t\t\t\tif (oFilterField && oFilterField.isA(\"sap.ui.mdc.FilterField\")) {\n\t\t\t\t\tconst sDataProperty = oFilterField.getFieldPath(),\n\t\t\t\t\t\tsFilterFieldId = oFilterField.getId();\n\t\t\t\t\tif (sPropertyPath === sDataProperty && sFilterFieldId.indexOf(\"CustomFilterField\")) {\n\t\t\t\t\t\treturn Promise.resolve(oFilterField);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (oError: any) {\n\t\tLog.error(\"Filter Cannot be added\", oError);\n\t}\n}\nfunction _templateFilterField(oSettings: any, oParameters: any, pageModel?: JSONModel) {\n\tconst oThis = new JSONModel({\n\t\tidPrefix: oParameters.sIdPrefix,\n\t\tvhIdPrefix: oParameters.sVhIdPrefix,\n\t\tpropertyPath: oParameters.sPropertyName,\n\t\tnavigationPrefix: oParameters.sNavigationPrefix ? `/${oParameters.sNavigationPrefix}` : \"\",\n\t\tuseSemanticDateRange: oParameters.bUseSemanticDateRange,\n\t\tsettings: oParameters.oSettings,\n\t\tvisualFilter: oParameters.visualFilter\n\t});\n\tconst oMetaModel = oParameters.oMetaModel;\n\tconst oVisualFilter = new TemplateModel(oParameters.visualFilter, oMetaModel);\n\tconst oPreprocessorSettings = mergeObjects({}, oSettings, {\n\t\tbindingContexts: {\n\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\tvisualFilter: oVisualFilter.createBindingContext(\"/\")\n\t\t},\n\t\tmodels: {\n\t\t\tthis: oThis,\n\t\t\tvisualFilter: oVisualFilter,\n\t\t\tmetaModel: oMetaModel,\n\t\t\tconverterContext: pageModel\n\t\t}\n\t});\n\n\treturn DelegateUtil.templateControlFragment(\"sap.fe.macros.internal.filterField.FilterFieldTemplate\", oPreprocessorSettings, {\n\t\tisXML: oSettings.isXML\n\t}).finally(function () {\n\t\toThis.destroy();\n\t});\n}\n\nasync function _addPropertyInfo(oParentControl: FilterBar, mPropertyBag: any, oMetaModel: any, sPropertyInfoName: string) {\n\ttry {\n\t\tsPropertyInfoName = sPropertyInfoName.replace(\"*\", \"\");\n\t\tconst sPropertyInfoKey = generate([sPropertyInfoName]); //Making sure that navigation property names are generated properly e.g. _Item::Material\n\t\tif (mPropertyBag && !mPropertyBag.modifier) {\n\t\t\tthrow \"FilterBar Delegate method called without modifier.\";\n\t\t}\n\n\t\tconst delegate = await mPropertyBag.modifier.getProperty(oParentControl, \"delegate\");\n\t\tconst aPropertyInfo = await mPropertyBag.modifier.getProperty(oParentControl, \"propertyInfo\");\n\t\t//We do not get propertyInfo in case of table filters\n\t\tif (aPropertyInfo) {\n\t\t\tconst hasPropertyInfo = aPropertyInfo.some(function (prop: any) {\n\t\t\t\treturn prop.key === sPropertyInfoKey || prop.name === sPropertyInfoKey;\n\t\t\t});\n\t\t\tif (!hasPropertyInfo) {\n\t\t\t\tconst entityTypePath = delegate.payload.entityTypePath;\n\t\t\t\tconst converterContext = FilterUtils.createConverterContext(\n\t\t\t\t\toParentControl,\n\t\t\t\t\tentityTypePath,\n\t\t\t\t\toMetaModel,\n\t\t\t\t\tmPropertyBag.appComponent\n\t\t\t\t);\n\t\t\t\tconst entityType = converterContext.getEntityType();\n\t\t\t\tlet filterField = FilterUtils.getFilterField(sPropertyInfoName, converterContext, entityType);\n\t\t\t\tfilterField = FilterUtils.buildProperyInfo(filterField, converterContext) as FilterField | undefined;\n\t\t\t\taPropertyInfo.push(filterField);\n\t\t\t\tmPropertyBag.modifier.setProperty(oParentControl, \"propertyInfo\", aPropertyInfo);\n\t\t\t}\n\t\t}\n\t} catch (errorMsg) {\n\t\tLog.warning(`${oParentControl.getId()} : ${errorMsg}`);\n\t}\n}\n\n/**\n * Method responsible for creating filter field in standalone mode / in the personalization settings of the filter bar.\n *\n * @param sPropertyInfoName Name of the property being added as the filter field\n * @param oParentControl Parent control instance to which the filter field is added\n * @param mPropertyBag Instance of the property bag from Flex API\n * @returns Once resolved, a filter field definition is returned\n */\nODataFilterBarDelegate.addItem = async function (oParentControl: FilterBar, sPropertyInfoName: string, mPropertyBag: any) {\n\tif (!mPropertyBag) {\n\t\t// Invoked during runtime.\n\t\treturn ODataFilterBarDelegate._addP13nItem(sPropertyInfoName, oParentControl);\n\t}\n\tconst modifier = mPropertyBag.modifier;\n\tconst model = mPropertyBag && mPropertyBag.appComponent && mPropertyBag.appComponent.getModel();\n\tconst oMetaModel = model && model.getMetaModel();\n\tif (!oMetaModel) {\n\t\treturn Promise.resolve(null);\n\t}\n\tconst isXML = modifier && modifier.targets === \"xmlTree\";\n\tif (isXML) {\n\t\tawait _addPropertyInfo(oParentControl, mPropertyBag, oMetaModel, sPropertyInfoName);\n\t}\n\treturn ODataFilterBarDelegate._addFlexItem(sPropertyInfoName, oParentControl, oMetaModel, modifier, mPropertyBag.appComponent);\n};\n\n/**\n * Method responsible for removing filter field in standalone / personalization filter bar.\n *\n * @param oFilterFieldProperty Object of the filter field property being removed as filter field\n * @param oParentControl Parent control instance from which the filter field is removed\n * @param mPropertyBag Instance of property bag from Flex API\n * @returns The resolved promise\n */\nODataFilterBarDelegate.removeItem = async function (oParentControl: any, oFilterFieldProperty: any, mPropertyBag: any) {\n\tlet doRemoveItem = true;\n\tconst modifier = mPropertyBag.modifier;\n\tconst isXML = modifier && modifier.targets === \"xmlTree\";\n\tif (isXML && !oParentControl.data(\"sap_fe_FilterBarDelegate_propertyInfoMap\")) {\n\t\tconst model = mPropertyBag && mPropertyBag.appComponent && mPropertyBag.appComponent.getModel();\n\t\tconst oMetaModel = model && model.getMetaModel();\n\t\tif (!oMetaModel) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tif (typeof oFilterFieldProperty !== \"string\" && oFilterFieldProperty.getFieldPath()) {\n\t\t\tawait _addPropertyInfo(oParentControl, mPropertyBag, oMetaModel, oFilterFieldProperty.getFieldPath());\n\t\t} else {\n\t\t\tawait _addPropertyInfo(oParentControl, mPropertyBag, oMetaModel, oFilterFieldProperty);\n\t\t}\n\t}\n\tif (typeof oFilterFieldProperty !== \"string\" && oFilterFieldProperty.isA && oFilterFieldProperty.isA(\"sap.ui.mdc.FilterField\")) {\n\t\tif (oFilterFieldProperty.data(\"isSlot\") === \"true\" && mPropertyBag) {\n\t\t\t// Inserting into the modifier creates a change from flex also filter is been removed hence promise is resolved to false\n\t\t\tmodifier.insertAggregation(oParentControl, \"dependents\", oFilterFieldProperty);\n\t\t\tdoRemoveItem = false;\n\t\t}\n\t}\n\treturn Promise.resolve(doRemoveItem);\n};\n\n/**\n * Method responsible for creating filter field condition in standalone / personalization filter bar.\n *\n * @param sPropertyInfoName Name of the property being added as filter field\n * @param oParentControl Parent control instance to which the filter field is added\n * @param mPropertyBag Instance of property bag from Flex API\n * @returns The resolved promise\n */\nODataFilterBarDelegate.addCondition = async function (oParentControl: FilterBar, sPropertyInfoName: string, mPropertyBag: any) {\n\tconst modifier = mPropertyBag.modifier;\n\tconst isXML = modifier && modifier.targets === \"xmlTree\";\n\tif (isXML) {\n\t\tconst model = mPropertyBag && mPropertyBag.appComponent && mPropertyBag.appComponent.getModel();\n\t\tconst oMetaModel = model && model.getMetaModel();\n\t\tif (!oMetaModel) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tawait _addPropertyInfo(oParentControl, mPropertyBag, oMetaModel, sPropertyInfoName);\n\t}\n\treturn Promise.resolve();\n};\n\n/**\n * Method responsible for removing filter field in standalone / personalization filter bar.\n *\n * @param sPropertyInfoName Name of the property being removed as filter field\n * @param oParentControl Parent control instance from which the filter field is removed\n * @param mPropertyBag Instance of property bag from Flex API\n * @returns The resolved promise\n */\nODataFilterBarDelegate.removeCondition = async function (oParentControl: FilterBar, sPropertyInfoName: string, mPropertyBag: any) {\n\tif (!oParentControl.data(\"sap_fe_FilterBarDelegate_propertyInfoMap\")) {\n\t\tconst modifier = mPropertyBag.modifier;\n\t\tconst isXML = modifier && modifier.targets === \"xmlTree\";\n\t\tif (isXML) {\n\t\t\tconst model = mPropertyBag && mPropertyBag.appComponent && mPropertyBag.appComponent.getModel();\n\t\t\tconst oMetaModel = model && model.getMetaModel();\n\t\t\tif (!oMetaModel) {\n\t\t\t\treturn Promise.resolve(null);\n\t\t\t}\n\t\t\tawait _addPropertyInfo(oParentControl, mPropertyBag, oMetaModel, sPropertyInfoName);\n\t\t}\n\t}\n\treturn Promise.resolve();\n};\n/**\n * Clears all input values of visible filter fields in the filter bar.\n *\n * @param oFilterControl Instance of the FilterBar control\n * @returns The resolved promise\n */\nODataFilterBarDelegate.clearFilters = async function (oFilterControl: unknown) {\n\treturn FilterUtils.clearFilterValues(oFilterControl);\n};\n/**\n * Creates the filter field in the table adaptation of the FilterBar.\n *\n * @param sPropertyInfoName The property name of the entity type for which the filter field needs to be created\n * @param oParentControl Instance of the parent control\n * @returns Once resolved, a filter field definition is returned\n */\nODataFilterBarDelegate._addP13nItem = function (sPropertyInfoName: string, oParentControl: object) {\n\treturn DelegateUtil.fetchModel(oParentControl)\n\t\t.then(function (oModel: any) {\n\t\t\treturn ODataFilterBarDelegate._addFlexItem(sPropertyInfoName, oParentControl, oModel.getMetaModel(), undefined);\n\t\t})\n\t\t.catch(function (oError: any) {\n\t\t\tLog.error(\"Model could not be resolved\", oError);\n\t\t\treturn null;\n\t\t});\n};\nODataFilterBarDelegate.fetchPropertiesForEntity = function (sEntityTypePath: any, oMetaModel: any, oFilterControl: any) {\n\tconst oEntityType = oMetaModel.getObject(sEntityTypePath);\n\tconst includeHidden = oFilterControl.isA(\"sap.ui.mdc.filterbar.vh.FilterBar\") ? true : undefined;\n\tif (!oFilterControl || !oEntityType) {\n\t\treturn [];\n\t}\n\tconst oConverterContext = FilterUtils.createConverterContext(oFilterControl, sEntityTypePath);\n\tconst sEntitySetPath = ModelHelper.getEntitySetPath(sEntityTypePath);\n\n\tconst mFilterFields = FilterUtils.getConvertedFilterFields(oFilterControl, sEntityTypePath, includeHidden);\n\tlet aFetchedProperties: any[] = [];\n\tmFilterFields.forEach(function (oFilterFieldInfo: any) {\n\t\tconst sAnnotationPath = oFilterFieldInfo.annotationPath;\n\t\tif (sAnnotationPath) {\n\t\t\tconst oPropertyAnnotations = oConverterContext.getConvertedTypes().resolvePath(sAnnotationPath).target;\n\t\t\tconst sTargetPropertyPrefix = CommonHelper.getLocationForPropertyPath(oMetaModel, sAnnotationPath);\n\t\t\tconst sProperty = sAnnotationPath.replace(`${sTargetPropertyPrefix}/`, \"\");\n\t\t\tconst entityType = oConverterContext.getEntityType();\n\t\t\tconst selectionFields = entityType.annotations?.UI?.SelectionFields;\n\t\t\tconst filterFacets = entityType.annotations?.UI?.FilterFacets;\n\t\t\tif (\n\t\t\t\tODataFilterBarDelegate._isFilterAdaptable(oFilterFieldInfo, oPropertyAnnotations, selectionFields, filterFacets) &&\n\t\t\t\tisPropertyFilterable(oMetaModel, sTargetPropertyPrefix, _getPropertyPath(sProperty), true)\n\t\t\t) {\n\t\t\t\taFetchedProperties.push(oFilterFieldInfo);\n\t\t\t}\n\t\t} else {\n\t\t\t//Custom Filters\n\t\t\taFetchedProperties.push(oFilterFieldInfo);\n\t\t}\n\t});\n\n\tconst aParameterFields: any[] = [];\n\tconst processedFields = processSelectionFields(aFetchedProperties, oConverterContext);\n\tconst processedFieldsKeys: any[] = [];\n\tprocessedFields.forEach(function (oProps: any) {\n\t\tif (oProps.key) {\n\t\t\tprocessedFieldsKeys.push(oProps.key);\n\t\t}\n\t});\n\n\taFetchedProperties = aFetchedProperties.filter(function (oProp: any) {\n\t\treturn processedFieldsKeys.includes(oProp.key);\n\t});\n\n\tconst oFR = CommonUtils.getFilterRestrictionsByPath(sEntitySetPath, oMetaModel),\n\t\tmAllowedExpressions = oFR.FilterAllowedExpressions;\n\t//Object.keys(processedFields).forEach(function (sFilterFieldKey: string) {\n\tprocessedFields.forEach(function (oProp, iFilterFieldIndex: number) {\n\t\tconst oSelField = aFetchedProperties[iFilterFieldIndex as any];\n\t\tif (!oSelField || !oSelField.conditionPath) {\n\t\t\treturn;\n\t\t}\n\t\tconst sPropertyPath = _getPropertyPath(oSelField.conditionPath);\n\t\t//fetchBasic\n\t\toProp = Object.assign(oProp, {\n\t\t\tgroup: oSelField.group,\n\t\t\tgroupLabel: oSelField.groupLabel,\n\t\t\tpath: oSelField.conditionPath,\n\t\t\ttooltip: null,\n\t\t\tremoveFromAppState: false,\n\t\t\thasValueHelp: false\n\t\t});\n\n\t\t//fetchPropInfo\n\t\tif (oSelField.annotationPath) {\n\t\t\tconst sAnnotationPath = oSelField.annotationPath;\n\t\t\tconst oProperty = oMetaModel.getObject(sAnnotationPath),\n\t\t\t\toPropertyAnnotations = oMetaModel.getObject(`${sAnnotationPath}@`),\n\t\t\t\toPropertyContext = oMetaModel.createBindingContext(sAnnotationPath);\n\n\t\t\tconst bRemoveFromAppState =\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive\"] ||\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext\"] ||\n\t\t\t\toPropertyAnnotations[\"@com.sap.vocabularies.Analytics.v1.Measure\"];\n\n\t\t\tconst sTargetPropertyPrefix = CommonHelper.getLocationForPropertyPath(oMetaModel, oSelField.annotationPath);\n\t\t\tconst sProperty = sAnnotationPath.replace(`${sTargetPropertyPrefix}/`, \"\");\n\t\t\tlet oFilterDefaultValueAnnotation;\n\t\t\tlet oFilterDefaultValue;\n\t\t\tif (isPropertyFilterable(oMetaModel, sTargetPropertyPrefix, _getPropertyPath(sProperty), true)) {\n\t\t\t\toFilterDefaultValueAnnotation = oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.FilterDefaultValue\"];\n\t\t\t\tif (oFilterDefaultValueAnnotation) {\n\t\t\t\t\toFilterDefaultValue = oFilterDefaultValueAnnotation[`$${getModelType(oProperty.$Type)}`];\n\t\t\t\t}\n\n\t\t\t\toProp = Object.assign(oProp, {\n\t\t\t\t\ttooltip: oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.QuickInfo\"] || undefined,\n\t\t\t\t\tremoveFromAppState: bRemoveFromAppState,\n\t\t\t\t\thasValueHelp: hasValueHelp(oPropertyContext.getObject(), { context: oPropertyContext }),\n\t\t\t\t\tdefaultFilterConditions: oFilterDefaultValue\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfieldPath: oSelField.conditionPath,\n\t\t\t\t\t\t\t\t\toperator: \"EQ\",\n\t\t\t\t\t\t\t\t\tvalues: [oFilterDefaultValue]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: undefined\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//base\n\n\t\tif (oProp) {\n\t\t\tif (mAllowedExpressions[sPropertyPath] && mAllowedExpressions[sPropertyPath].length > 0) {\n\t\t\t\toProp.filterExpression = CommonUtils.getSpecificAllowedExpression(mAllowedExpressions[sPropertyPath]);\n\t\t\t} else {\n\t\t\t\toProp.filterExpression = \"auto\";\n\t\t\t}\n\n\t\t\toProp = Object.assign(oProp, {\n\t\t\t\tvisible: oSelField.availability === \"Default\"\n\t\t\t});\n\t\t}\n\n\t\tprocessedFields[iFilterFieldIndex] = oProp;\n\t});\n\tprocessedFields.forEach(function (propInfo: any) {\n\t\tif (propInfo.path === \"$editState\") {\n\t\t\tpropInfo.label = getResourceModel(oFilterControl).getText(\"FILTERBAR_EDITING_STATUS\");\n\t\t}\n\t\tpropInfo.typeConfig = TypeUtil.getTypeConfig(propInfo.dataType, propInfo.formatOptions, propInfo.constraints);\n\t\tpropInfo.label = getLocalizedText(propInfo.label, oFilterControl) || \"\";\n\t\tif (propInfo.isParameter) {\n\t\t\taParameterFields.push(propInfo.name);\n\t\t}\n\t});\n\n\taFetchedProperties = processedFields;\n\tDelegateUtil.setCustomData(oFilterControl, \"parameters\", aParameterFields);\n\n\treturn aFetchedProperties;\n};\n\nfunction getLineItemQualifierFromTable(oControl: any, oMetaModel: any) {\n\tif (oControl.isA(\"sap.fe.macros.table.TableAPI\")) {\n\t\tconst annotationPaths = oControl.getMetaPath().split(\"#\")[0].split(\"/\");\n\t\tswitch (annotationPaths[annotationPaths.length - 1]) {\n\t\t\tcase `@${UIAnnotationTerms.SelectionPresentationVariant}`:\n\t\t\tcase `@${UIAnnotationTerms.PresentationVariant}`:\n\t\t\t\treturn oMetaModel\n\t\t\t\t\t.getObject(oControl.getMetaPath())\n\t\t\t\t\t.Visualizations?.find((visualization: any) => visualization.$AnnotationPath.includes(`@${UIAnnotationTerms.LineItem}`))\n\t\t\t\t\t.$AnnotationPath;\n\t\t\tcase `@${UIAnnotationTerms.LineItem}`:\n\t\t\t\tconst metaPaths = oControl.getMetaPath().split(\"/\");\n\t\t\t\treturn metaPaths[metaPaths.length - 1];\n\t\t}\n\t}\n\treturn undefined;\n}\n\nODataFilterBarDelegate._isFilterAdaptable = function (\n\tfilterFieldInfo: FilterField,\n\tpropertyAnnotations: any,\n\tselectionFields?: SelectionFields,\n\tfilterFacets?: FilterFacets\n) {\n\tlet isSelectionField, isInFilterFacets: boolean;\n\tif (selectionFields) {\n\t\tisSelectionField = selectionFields.some(function (selectionField: any) {\n\t\t\tif (selectionField.value === filterFieldInfo.key) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t} else {\n\t\tisSelectionField = false;\n\t}\n\tif (filterFacets) {\n\t\tisInFilterFacets = filterFacets.some(function (filterFacet: ReferenceFacet) {\n\t\t\tconst fieldGroup = filterFacet.Target?.$target as FieldGroupType;\n\t\t\treturn fieldGroup?.Data.some(function (dataField: DataFieldAbstractTypes) {\n\t\t\t\t// we expect dataField to be DataFieldTypes (having a Value) inside FieldGroups inside FilterFacets\n\t\t\t\tif ((dataField as DataFieldTypes).Value.path === filterFieldInfo.key) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// dataField types having no Value (DataFieldForAnnotationTypes, DataFieldForActionAbstractTypes, DataFieldForActionGroupTypes), there is nothing to check, but this should not occur anyway\n\t\t\t\treturn false;\n\t\t\t});\n\t\t});\n\t} else {\n\t\tisInFilterFacets = false;\n\t}\n\treturn isSelectionField || isInFilterFacets || !propertyAnnotations.annotations?.UI?.AdaptationHidden;\n};\n\nODataFilterBarDelegate._addFlexItem = function (\n\tsFlexPropertyName: any,\n\toParentControl: any,\n\toMetaModel: any,\n\toModifier: any,\n\toAppComponent: any\n) {\n\tconst sFilterBarId = oModifier ? oModifier.getId(oParentControl) : oParentControl.getId(),\n\t\tsIdPrefix = oModifier ? \"\" : \"Adaptation\",\n\t\taSelectionFields = FilterUtils.getConvertedFilterFields(\n\t\t\toParentControl,\n\t\t\tnull,\n\t\t\tundefined,\n\t\t\toMetaModel,\n\t\t\toAppComponent,\n\t\t\toModifier,\n\t\t\toModifier ? undefined : getLineItemQualifierFromTable(oParentControl.getParent(), oMetaModel)\n\t\t),\n\t\toSelectionField = ODataFilterBarDelegate._findSelectionField(aSelectionFields, sFlexPropertyName),\n\t\tsPropertyPath = _getPropertyPath(sFlexPropertyName),\n\t\tbIsXML = !!oModifier && oModifier.targets === \"xmlTree\";\n\tif (sFlexPropertyName === EDIT_STATE_PROPERTY_NAME) {\n\t\treturn _templateEditState(_generateIdPrefix(sFilterBarId, `${sIdPrefix}FilterField`), oMetaModel, oModifier);\n\t} else if (sFlexPropertyName === SEARCH_PROPERTY_NAME) {\n\t\treturn Promise.resolve(null);\n\t} else if (oSelectionField?.template) {\n\t\treturn ODataFilterBarDelegate._templateCustomFilter(\n\t\t\toParentControl,\n\t\t\t_generateIdPrefix(sFilterBarId, `${sIdPrefix}FilterField`),\n\t\t\toSelectionField,\n\t\t\toMetaModel,\n\t\t\toModifier\n\t\t);\n\t}\n\n\tif (oSelectionField?.type === \"Slot\" && oModifier) {\n\t\treturn _addXMLCustomFilterField(oParentControl, oModifier, sPropertyPath);\n\t}\n\n\tconst sNavigationPath = CommonHelper.getNavigationPath(sPropertyPath);\n\tlet sEntityTypePath: string;\n\tlet sUseSemanticDateRange;\n\tlet oSettings: any;\n\tlet sBindingPath;\n\tlet oParameters: any;\n\n\treturn Promise.resolve()\n\t\t.then(function () {\n\t\t\tif (oSelectionField?.isParameter) {\n\t\t\t\tconst sAnnotationPath = oSelectionField.annotationPath;\n\t\t\t\treturn sAnnotationPath.substr(0, sAnnotationPath.lastIndexOf(\"/\") + 1);\n\t\t\t}\n\t\t\treturn DelegateUtil.getCustomData(oParentControl, \"entityType\", oModifier);\n\t\t})\n\t\t.then(function (sRetrievedEntityTypePath: any) {\n\t\t\tsEntityTypePath = sRetrievedEntityTypePath;\n\t\t\treturn DelegateUtil.getCustomData(oParentControl, \"useSemanticDateRange\", oModifier);\n\t\t})\n\t\t.then(function (sRetrievedUseSemanticDateRange: any) {\n\t\t\tsUseSemanticDateRange = sRetrievedUseSemanticDateRange;\n\t\t\tconst oPropertyContext = oMetaModel.createBindingContext(sEntityTypePath + sPropertyPath);\n\t\t\tconst sInFilterBarId = oModifier ? oModifier.getId(oParentControl) : oParentControl.getId();\n\t\t\toSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tcontextPath: oMetaModel.createBindingContext(sEntityTypePath),\n\t\t\t\t\tproperty: oPropertyContext\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tcontextPath: oMetaModel,\n\t\t\t\t\tproperty: oMetaModel\n\t\t\t\t},\n\t\t\t\tisXML: bIsXML\n\t\t\t};\n\t\t\tsBindingPath = `/${ModelHelper.getEntitySetPath(sEntityTypePath)\n\t\t\t\t.split(\"/\")\n\t\t\t\t.filter(ModelHelper.filterOutNavPropBinding)\n\t\t\t\t.join(\"/\")}`;\n\t\t\toParameters = {\n\t\t\t\tsPropertyName: sPropertyPath,\n\t\t\t\tsBindingPath: sBindingPath,\n\t\t\t\tsValueHelpType: sIdPrefix + VALUE_HELP_TYPE,\n\t\t\t\toControl: oParentControl,\n\t\t\t\toMetaModel: oMetaModel,\n\t\t\t\toModifier: oModifier,\n\t\t\t\tsIdPrefix: _generateIdPrefix(sInFilterBarId, `${sIdPrefix}FilterField`, sNavigationPath),\n\t\t\t\tsVhIdPrefix: _generateIdPrefix(sInFilterBarId, sIdPrefix + VALUE_HELP_TYPE),\n\t\t\t\tsNavigationPrefix: sNavigationPath,\n\t\t\t\tbUseSemanticDateRange: sUseSemanticDateRange,\n\t\t\t\toSettings: oSelectionField?.settings ?? {},\n\t\t\t\tvisualFilter: oSelectionField?.visualFilter\n\t\t\t};\n\n\t\t\treturn DelegateUtil.doesValueHelpExist(oParameters);\n\t\t})\n\t\t.then(function (bValueHelpExists: any) {\n\t\t\tif (!bValueHelpExists) {\n\t\t\t\treturn _templateValueHelp(oSettings, oParameters);\n\t\t\t}\n\t\t\treturn Promise.resolve();\n\t\t})\n\t\t.then(function () {\n\t\t\tlet pageModel;\n\t\t\tif (oParameters.visualFilter) {\n\t\t\t\t//Need to set the convertercontext as pageModel in settings for BuildingBlock 2.0\n\t\t\t\tpageModel = (CommonUtils.getTargetView(oParentControl).getController() as PageController)._getPageModel();\n\t\t\t}\n\t\t\treturn _templateFilterField(oSettings, oParameters, pageModel);\n\t\t});\n};\nfunction _getCachedProperties(oFilterBar: any) {\n\t// properties are not cached during templating\n\tif (oFilterBar instanceof window.Element) {\n\t\treturn null;\n\t}\n\treturn DelegateUtil.getCustomData(oFilterBar, FETCHED_PROPERTIES_DATA_KEY);\n}\nfunction _setCachedProperties(oFilterBar: any, aFetchedProperties: any) {\n\t// do not cache during templating, else it becomes part of the cached view\n\tif (oFilterBar instanceof window.Element) {\n\t\treturn;\n\t}\n\tDelegateUtil.setCustomData(oFilterBar, FETCHED_PROPERTIES_DATA_KEY, aFetchedProperties);\n}\nfunction _getCachedOrFetchPropertiesForEntity(sEntityTypePath: any, oMetaModel: any, oFilterBar: any) {\n\tlet aFetchedProperties = _getCachedProperties(oFilterBar);\n\tlet localGroupLabel;\n\n\tif (!aFetchedProperties) {\n\t\taFetchedProperties = ODataFilterBarDelegate.fetchPropertiesForEntity(sEntityTypePath, oMetaModel, oFilterBar);\n\t\taFetchedProperties.forEach(function (oGroup: any) {\n\t\t\tlocalGroupLabel = null;\n\t\t\tif (oGroup.groupLabel) {\n\t\t\t\tlocalGroupLabel = getLocalizedText(oGroup.groupLabel, oFilterBar);\n\t\t\t\toGroup.groupLabel = localGroupLabel === null ? oGroup.groupLabel : localGroupLabel;\n\t\t\t}\n\t\t});\n\t\taFetchedProperties.sort(function (a: any, b: any) {\n\t\t\tif (a.groupLabel === undefined || a.groupLabel === null) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (b.groupLabel === undefined || b.groupLabel === null) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn a.groupLabel.localeCompare(b.groupLabel);\n\t\t});\n\t\t_setCachedProperties(oFilterBar, aFetchedProperties);\n\t}\n\treturn aFetchedProperties;\n}\nODataFilterBarDelegate.fetchProperties = function (oFilterBar: any) {\n\tconst sEntityTypePath = DelegateUtil.getCustomData(oFilterBar, \"entityType\");\n\treturn DelegateUtil.fetchModel(oFilterBar).then(function (oModel: any) {\n\t\tif (!oModel) {\n\t\t\treturn [];\n\t\t}\n\t\treturn _getCachedOrFetchPropertiesForEntity(sEntityTypePath, oModel.getMetaModel(), oFilterBar);\n\t\t// var aCleanedProperties = aProperties.concat();\n\t\t// var aAllowedAttributes = [\"name\", \"label\", \"visible\", \"path\", \"typeConfig\", \"maxConditions\", \"group\", \"groupLabel\"];\n\t\t// aCleanedProperties.forEach(function(oProperty) {\n\t\t// \tObject.keys(oProperty).forEach(function(sPropName) {\n\t\t// \t\tif (aAllowedAttributes.indexOf(sPropName) === -1) {\n\t\t// \t\t\tdelete oProperty[sPropName];\n\t\t// \t\t}\n\t\t// \t});\n\t\t// });\n\t\t// return aCleanedProperties;\n\t});\n};\nODataFilterBarDelegate.getTypeUtil = function () {\n\treturn TypeUtil;\n};\n\nexport default ODataFilterBarDelegate;\n"],"mappings":"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"}},{"offset":{"line":12660,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","mergeObjects","CommonUtils","FilterBar","MetaModelFunction","ModelHelper","ResourceModelHelper","StableIdHelper","TemplateModel","PropertyFormatters","EDM","TypeUtil","CommonHelper","DelegateUtil","FilterUtils","FilterBarDelegate","JSONModel","getModelType","hasValueHelp","generate","getResourceModel","getLocalizedText","isPropertyFilterable","processSelectionFields","ODataFilterBarDelegate","Object","assign","apiVersion","EDIT_STATE_PROPERTY_NAME","SEARCH_PROPERTY_NAME","VALUE_HELP_TYPE","FETCHED_PROPERTIES_DATA_KEY","CONDITION_PATH_TO_PROPERTY_PATH_REGEX","_templateEditState","sIdPrefix","metaModel","oModifier","oThis","id","isDraftCollaborative","isCollaborationDraftSupported","oPreprocessorSettings","bindingContexts","this","createBindingContext","models","templateControlFragment","undefined","finally","destroy","_templateCustomFilter","async","oFilterBar","oSelectionFieldInfo","oMetaModel","sEntityTypePath","getCustomData","oItemModel","contextPath","item","oView","getTargetView","oController","getController","oOptions","controller","view","_getPropertyPath","sConditionPath","replace","_findSelectionField","aSelectionFields","sFlexName","find","oSelectionField","conditionPath","replaceAll","availability","_generateIdPrefix","sFilterBarId","sControlType","sNavigationPrefix","_templateValueHelp","oSettings","oParameters","idPrefix","sVhIdPrefix","conditionModel","navigationPrefix","filterFieldValueHelp","useSemanticDateRange","bUseSemanticDateRange","Promise","resolve","isXML","then","aVHElements","sAggregationName","length","forEach","elt","insertAggregation","oControl","catch","oError","error","_addXMLCustomFilterField","sPropertyPath","aDependents","getAggregation","i","oFilterField","isA","sDataProperty","getFieldPath","sFilterFieldId","getId","indexOf","_templateFilterField","pageModel","vhIdPrefix","propertyPath","sPropertyName","settings","visualFilter","oVisualFilter","converterContext","_addPropertyInfo","oParentControl","mPropertyBag","sPropertyInfoName","sPropertyInfoKey","modifier","delegate","getProperty","aPropertyInfo","hasPropertyInfo","some","prop","key","name","entityTypePath","payload","createConverterContext","appComponent","entityType","getEntityType","filterField","getFilterField","buildProperyInfo","push","setProperty","errorMsg","warning","addItem","_addP13nItem","model","getModel","getMetaModel","targets","_addFlexItem","removeItem","oFilterFieldProperty","doRemoveItem","data","addCondition","removeCondition","clearFilters","oFilterControl","clearFilterValues","fetchModel","oModel","fetchPropertiesForEntity","oEntityType","getObject","includeHidden","oConverterContext","sEntitySetPath","getEntitySetPath","mFilterFields","getConvertedFilterFields","aFetchedProperties","oFilterFieldInfo","sAnnotationPath","annotationPath","_entityType$annotatio","_entityType$annotatio2","_entityType$annotatio3","_entityType$annotatio4","oPropertyAnnotations","getConvertedTypes","resolvePath","target","sTargetPropertyPrefix","getLocationForPropertyPath","sProperty","selectionFields","annotations","UI","SelectionFields","filterFacets","FilterFacets","_isFilterAdaptable","aParameterFields","processedFields","processedFieldsKeys","oProps","filter","oProp","includes","oFR","getFilterRestrictionsByPath","mAllowedExpressions","FilterAllowedExpressions","iFilterFieldIndex","oSelField","group","groupLabel","path","tooltip","removeFromAppState","oProperty","oPropertyContext","bRemoveFromAppState","oFilterDefaultValueAnnotation","oFilterDefaultValue","$Type","context","defaultFilterConditions","fieldPath","operator","values","filterExpression","getSpecificAllowedExpression","visible","propInfo","label","getText","typeConfig","getTypeConfig","dataType","formatOptions","constraints","isParameter","setCustomData","getLineItemQualifierFromTable","_oMetaModel$getObject","annotationPaths","getMetaPath","split","Visualizations","visualization","$AnnotationPath","metaPaths","filterFieldInfo","propertyAnnotations","_propertyAnnotations$","_propertyAnnotations$2","isSelectionField","isInFilterFacets","selectionField","value","filterFacet","_filterFacet$Target","fieldGroup","Target","$target","Data","dataField","Value","AdaptationHidden","sFlexPropertyName","oAppComponent","getParent","bIsXML","template","type","sNavigationPath","getNavigationPath","sUseSemanticDateRange","sBindingPath","substr","lastIndexOf","sRetrievedEntityTypePath","sRetrievedUseSemanticDateRange","sInFilterBarId","property","filterOutNavPropBinding","join","sValueHelpType","doesValueHelpExist","bValueHelpExists","_getPageModel","_getCachedProperties","window","Element","_setCachedProperties","_getCachedOrFetchPropertiesForEntity","localGroupLabel","oGroup","sort","a","b","localeCompare","fetchProperties","getTypeUtil"],"sources":["FilterBarDelegate-dbg.js"],"mappings":"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","sourceRoot":"filterBar"}},{"offset":{"line":12665,"column":0},"map":{"version":3,"names":["FormBlock","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","blockAttribute","type","isPublic","required","expectedTypes","expectedAnnotationTypes","blockEvent","blockAggregation","slot","isDefault","props","configuration","mSettings","metaPath","contextPath","formContainers","undefined","oContextObjectPath","getInvolvedDataModelObjects","mExtraSettings","oFacetDefinition","targetObject","hasFieldGroup","$Type","Label","Target","$target","fullyQualifiedName","path","term","value","getContextRelativeTargetObjectPath","annotations","fields","formElements","oConverterContext","getConverterContext","oFormDefinition","createFormDefinition","isVisible","annotationPath","getPath","useFormContainerLabels","facetType","getObject","_apiId","createId","_contentId","id","displayMode","_editable","compileExpression","ifElse","equal","resolveBindingString","UI","IsEditable","getDataFieldCollection","formContainer","facetContext","facet","navigationPath","idPart","AnnotationHelper","getNavigationPath","contextPathPath","facetPath","startsWith","substring","length","titleLevel","FormHelper","getFormContainerTitleLevel","title","label","context","getFormContainerID","xml","attr","entitySet","onChange","actions","getFormContainers","indexOf","map","formContainerIdx","getModel","createBindingContext","isReferenceFacetPartOfPreview","partOfPreview","$AnnotationPath","getLayoutInformation","layout","adjustLabelSpan","breakpointL","breakpointM","breakpointXL","columnsL","columnsM","columnsXL","emptySpanL","emptySpanM","emptySpanS","emptySpanXL","labelSpanL","labelSpanM","labelSpanS","labelSpanXL","singleContainerFullSize","labelCellsLarge","emptyCellsLarge","getTemplate","onChangeStr","replace","metaPathPath","addConditionally","BuildingBlockBase","TitleLevel","Auto"],"sourceRoot":"form","sources":["Form.block.ts"],"sourcesContent":["import { CommunicationAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Communication\";\nimport type { FacetTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAggregation, blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport type { FormContainer } from \"sap/fe/core/converters/controls/Common/Form\";\nimport { createFormDefinition } from \"sap/fe/core/converters/controls/Common/Form\";\nimport { UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport { getFormContainerID } from \"sap/fe/core/converters/helpers/ID\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { compileExpression, equal, ifElse, resolveBindingString } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport FormHelper from \"sap/fe/macros/form/FormHelper\";\nimport { TitleLevel } from \"sap/ui/core/library\";\nimport type { $ColumnLayoutSettings } from \"sap/ui/layout/form/ColumnLayout\";\nimport type { $ResponsiveGridLayoutSettings } from \"sap/ui/layout/form/ResponsiveGridLayout\";\nimport type Context from \"sap/ui/model/Context\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\n\ntype ColumnLayout = $ColumnLayoutSettings & {\n\ttype: \"ColumnLayout\";\n};\ntype ResponsiveGridLayout = $ResponsiveGridLayoutSettings & {\n\ttype: \"ResponsiveGridLayout\";\n};\ntype FormLayoutInformation = ColumnLayout | ResponsiveGridLayout;\n\n/**\n * Building block for creating a Form based on the metadata provided by OData V4.\n * <br>\n * It is designed to work based on a FieldGroup annotation but can also work if you provide a ReferenceFacet or a CollectionFacet\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Form id=\"MyForm\" metaPath=\"@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.Form\n * @public\n */\n@defineBuildingBlock({\n\tname: \"Form\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.fe.macros.form.FormAPI\"]\n})\nexport default class FormBlock extends BuildingBlockBase {\n\t/**\n\t * The identifier of the form control.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true, required: true })\n\tid!: string;\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"Singleton\", \"EntityType\"]\n\t})\n\tcontextPath!: Context;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true,\n\t\texpectedAnnotationTypes: [\n\t\t\t\"com.sap.vocabularies.UI.v1.FieldGroupType\",\n\t\t\t\"com.sap.vocabularies.UI.v1.CollectionFacet\",\n\t\t\t\"com.sap.vocabularies.UI.v1.ReferenceFacet\"\n\t\t],\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"]\n\t})\n\tmetaPath!: Context;\n\n\t/**\n\t * The manifest defined form containers to be shown in the action area of the table\n\t */\n\t@blockAttribute({ type: \"array\" })\n\tformContainers?: FormContainer[];\n\n\t/**\n\t * Control the rendering of the form container labels\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tuseFormContainerLabels?: boolean;\n\n\t/**\n\t * Toggle Preview: Part of Preview / Preview via 'Show More' Button\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpartOfPreview: boolean = true;\n\n\t/**\n\t * The title of the form control.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\ttitle?: string;\n\n\t/**\n\t * Defines the \"aria-level\" of the form title, titles of internally used form containers are nested subsequently\n\t */\n\t@blockAttribute({ type: \"sap.ui.core.TitleLevel\", isPublic: true })\n\ttitleLevel: TitleLevel = TitleLevel.Auto;\n\n\t@blockAttribute({ type: \"string\" })\n\tdisplayMode?: CompiledBindingToolkitExpression;\n\n\t/**\n\t * \tIf set to false, the Form is not rendered.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tisVisible: string = \"true\";\n\t// Independent from the form title, can be a bit confusing in standalone usage at is not showing anything by default\n\n\t// Just proxied down to the Field may need to see if needed or not\n\t@blockEvent()\n\tonChange?: string;\n\n\t@blockAggregation({ type: \"sap.fe.macros.form.FormElement\", isPublic: true, slot: \"formElements\", isDefault: true })\n\tformElements?: any;\n\n\t/**\n\t * Defines the layout to be used within the form.\n\t * It defaults to the ColumnLayout, but you can also use a ResponsiveGridLayout.\n\t * All the properties of the ResponsiveGridLayout can be added to the configuration.\n\t */\n\t@blockAttribute({ type: \"object\", isPublic: true })\n\tlayout: FormLayoutInformation = { type: \"ColumnLayout\", columnsM: 2, columnsXL: 6, columnsL: 3, labelCellsLarge: 12 };\n\n\t// Useful for our dynamic thing but also depends on the metadata -> make sure this is taken into account\n\t_editable: CompiledBindingToolkitExpression;\n\n\t_apiId: string;\n\n\t_contentId: string;\n\n\tfacetType: string;\n\n\tconstructor(props: PropertiesOf<FormBlock>, configuration: any, mSettings: any) {\n\t\tsuper(props, configuration, mSettings);\n\t\tif (this.metaPath && this.contextPath && (this.formContainers === undefined || this.formContainers === null)) {\n\t\t\tconst oContextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\t\tconst mExtraSettings: Record<string, any> = {};\n\t\t\tlet oFacetDefinition = oContextObjectPath.targetObject;\n\t\t\tlet hasFieldGroup = false;\n\t\t\tif (oFacetDefinition && oFacetDefinition.$Type === UIAnnotationTypes.FieldGroupType) {\n\t\t\t\t// Wrap the facet in a fake Facet annotation\n\t\t\t\thasFieldGroup = true;\n\t\t\t\toFacetDefinition = {\n\t\t\t\t\t$Type: \"com.sap.vocabularies.UI.v1.ReferenceFacet\",\n\t\t\t\t\tLabel: oFacetDefinition.Label,\n\t\t\t\t\tTarget: {\n\t\t\t\t\t\t$target: oFacetDefinition,\n\t\t\t\t\t\tfullyQualifiedName: oFacetDefinition.fullyQualifiedName,\n\t\t\t\t\t\tpath: \"\",\n\t\t\t\t\t\tterm: \"\",\n\t\t\t\t\t\ttype: \"AnnotationPath\",\n\t\t\t\t\t\tvalue: getContextRelativeTargetObjectPath(oContextObjectPath)\n\t\t\t\t\t},\n\t\t\t\t\tannotations: {},\n\t\t\t\t\tfullyQualifiedName: oFacetDefinition.fullyQualifiedName\n\t\t\t\t};\n\t\t\t\tmExtraSettings[oFacetDefinition.Target.value] = { fields: this.formElements };\n\t\t\t}\n\n\t\t\tconst oConverterContext = this.getConverterContext(\n\t\t\t\toContextObjectPath,\n\t\t\t\t/*this.contextPath*/ undefined,\n\t\t\t\tmSettings,\n\t\t\t\tmExtraSettings\n\t\t\t);\n\t\t\tconst oFormDefinition = createFormDefinition(oFacetDefinition, this.isVisible, oConverterContext);\n\t\t\tif (hasFieldGroup) {\n\t\t\t\toFormDefinition.formContainers[0].annotationPath = this.metaPath.getPath();\n\t\t\t}\n\t\t\tthis.formContainers = oFormDefinition.formContainers;\n\t\t\tthis.useFormContainerLabels = oFormDefinition.useFormContainerLabels;\n\t\t\tthis.facetType = oFacetDefinition && oFacetDefinition.$Type;\n\t\t} else {\n\t\t\tthis.facetType = this.metaPath.getObject()?.$Type;\n\t\t}\n\n\t\tif (!this.isPublic) {\n\t\t\tthis._apiId = this.createId(\"Form\")!;\n\t\t\tthis._contentId = this.id;\n\t\t} else {\n\t\t\tthis._apiId = this.id;\n\t\t\tthis._contentId = `${this.id}-content`;\n\t\t}\n\t\t// if displayMode === true -> _editable = false\n\t\t// if displayMode === false -> _editable = true\n\t\t//  => if displayMode === {myBindingValue} -> _editable = {myBindingValue} === true ? true : false\n\t\t// if DisplayMode === undefined -> _editable = {ui>/isEditable}\n\t\tif (this.displayMode !== undefined) {\n\t\t\tthis._editable = compileExpression(ifElse(equal(resolveBindingString(this.displayMode, \"boolean\"), false), true, false));\n\t\t} else {\n\t\t\tthis._editable = compileExpression(UI.IsEditable);\n\t\t}\n\t}\n\n\tgetDataFieldCollection(formContainer: FormContainer, facetContext: Context) {\n\t\tconst facet = getInvolvedDataModelObjects(facetContext).targetObject as FacetTypes;\n\t\tlet navigationPath;\n\t\tlet idPart;\n\t\tif (facet.$Type === UIAnnotationTypes.ReferenceFacet) {\n\t\t\tnavigationPath = AnnotationHelper.getNavigationPath(facet.Target.value);\n\t\t\tidPart = facet;\n\t\t} else {\n\t\t\tconst contextPathPath = this.contextPath.getPath();\n\t\t\tlet facetPath = facetContext.getPath();\n\t\t\tif (facetPath.startsWith(contextPathPath)) {\n\t\t\t\tfacetPath = facetPath.substring(contextPathPath.length);\n\t\t\t}\n\t\t\tnavigationPath = AnnotationHelper.getNavigationPath(facetPath);\n\t\t\tidPart = facetPath;\n\t\t}\n\t\tconst titleLevel = FormHelper.getFormContainerTitleLevel(this.title, this.titleLevel);\n\t\tconst title = this.useFormContainerLabels && facet ? (AnnotationHelper.label(facet, { context: facetContext }) as string) : \"\";\n\t\tconst id = this.id ? getFormContainerID(idPart) : undefined;\n\n\t\treturn xml`\n\t\t\t\t\t<macro:FormContainer\n\t\t\t\t\txmlns:macro=\"sap.fe.macros\"\n\t\t\t\t\t${this.attr(\"id\", id)}\n\t\t\t\t\ttitle=\"${title}\"\n\t\t\t\t\ttitleLevel=\"${titleLevel}\"\n\t\t\t\t\tcontextPath=\"${navigationPath ? formContainer.entitySet : this.contextPath}\"\n\t\t\t\t\tmetaPath=\"${facetContext}\"\n\t\t\t\t\tdataFieldCollection=\"${formContainer.formElements}\"\n\t\t\t\t\tnavigationPath=\"${navigationPath}\"\n\t\t\t\t\tvisible=\"${formContainer.isVisible}\"\n\t\t\t\t\tdisplayMode=\"${this.displayMode}\"\n\t\t\t\t\tonChange=\"${this.onChange}\"\n\t\t\t\t\tactions=\"${formContainer.actions}\"\n\t\t\t\t>\n\t\t\t\t<macro:formElements>\n\t\t\t\t\t<slot name=\"formElements\" />\n\t\t\t\t</macro:formElements>\n\t\t\t</macro:FormContainer>`;\n\t}\n\n\tgetFormContainers() {\n\t\tif (this.formContainers!.length === 0) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (this.facetType.indexOf(\"com.sap.vocabularies.UI.v1.CollectionFacet\") >= 0) {\n\t\t\treturn this.formContainers!.map((formContainer, formContainerIdx) => {\n\t\t\t\tif (formContainer.isVisible) {\n\t\t\t\t\tconst facetContext = this.contextPath.getModel().createBindingContext(formContainer.annotationPath, this.contextPath);\n\t\t\t\t\tconst facet = facetContext.getObject();\n\t\t\t\t\tif (\n\t\t\t\t\t\tfacet.$Type === UIAnnotationTypes.ReferenceFacet &&\n\t\t\t\t\t\tFormHelper.isReferenceFacetPartOfPreview(facet, this.partOfPreview)\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (facet.Target.$AnnotationPath.$Type === CommunicationAnnotationTypes.AddressType) {\n\t\t\t\t\t\t\treturn xml`<template:with path=\"formContainers>${formContainerIdx}\" var=\"formContainer\">\n\t\t\t\t\t\t\t\t\t\t\t<template:with path=\"formContainers>${formContainerIdx}/annotationPath\" var=\"facet\">\n\t\t\t\t\t\t\t\t\t\t\t\t<core:Fragment fragmentName=\"sap.fe.macros.form.AddressSection\" type=\"XML\" />\n\t\t\t\t\t\t\t\t\t\t\t</template:with>\n\t\t\t\t\t\t\t\t\t\t</template:with>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this.getDataFieldCollection(formContainer, facetContext);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t});\n\t\t} else if (this.facetType === \"com.sap.vocabularies.UI.v1.ReferenceFacet\") {\n\t\t\treturn this.formContainers!.map((formContainer) => {\n\t\t\t\tif (formContainer.isVisible) {\n\t\t\t\t\tconst facetContext = this.contextPath.getModel().createBindingContext(formContainer.annotationPath, this.contextPath);\n\t\t\t\t\treturn this.getDataFieldCollection(formContainer, facetContext);\n\t\t\t\t} else {\n\t\t\t\t\treturn \"\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Create the proper layout information based on the `layout` property defined externally.\n\t *\n\t * @returns The layout information for the xml.\n\t */\n\tgetLayoutInformation() {\n\t\tswitch (this.layout.type) {\n\t\t\tcase \"ResponsiveGridLayout\":\n\t\t\t\treturn xml`<f:ResponsiveGridLayout adjustLabelSpan=\"${this.layout.adjustLabelSpan}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreakpointL=\"${this.layout.breakpointL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreakpointM=\"${this.layout.breakpointM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreakpointXL=\"${this.layout.breakpointXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnsL=\"${this.layout.columnsL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnsM=\"${this.layout.columnsM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnsXL=\"${this.layout.columnsXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanL=\"${this.layout.emptySpanL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"${this.layout.emptySpanM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanS=\"${this.layout.emptySpanS}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanXL=\"${this.layout.emptySpanXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanL=\"${this.layout.labelSpanL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanM=\"${this.layout.labelSpanM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanS=\"${this.layout.labelSpanS}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanXL=\"${this.layout.labelSpanXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsingleContainerFullSize=\"${this.layout.singleContainerFullSize}\" />`;\n\t\t\tcase \"ColumnLayout\":\n\t\t\tdefault:\n\t\t\t\treturn xml`<f:ColumnLayout\n\t\t\t\t\t\t\t\tcolumnsM=\"${this.layout.columnsM}\"\n\t\t\t\t\t\t\t\tcolumnsL=\"${this.layout.columnsL}\"\n\t\t\t\t\t\t\t\tcolumnsXL=\"${this.layout.columnsXL}\"\n\t\t\t\t\t\t\t\tlabelCellsLarge=\"${this.layout.labelCellsLarge}\"\n\t\t\t\t\t\t\t\temptyCellsLarge=\"${this.layout.emptyCellsLarge}\" />`;\n\t\t}\n\t}\n\n\tgetTemplate() {\n\t\tconst onChangeStr = (this.onChange && this.onChange.replace(\"{\", \"\\\\{\").replace(\"}\", \"\\\\}\")) || \"\";\n\t\tconst metaPathPath = this.metaPath.getPath();\n\t\tconst contextPathPath = this.contextPath.getPath();\n\t\tif (!this.isVisible) {\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\treturn xml`<macro:FormAPI xmlns:macro=\"sap.fe.macros.form\"\n\t\t\t\t\txmlns:macrodata=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\t\t\txmlns:f=\"sap.ui.layout.form\"\n\t\t\t\t\txmlns:fl=\"sap.ui.fl\"\n\t\t\t\t\tid=\"${this._apiId}\"\n\t\t\t\t\tmetaPath=\"${metaPathPath}\"\n\t\t\t\t\tcontextPath=\"${contextPathPath}\">\n\t\t\t\t<f:Form\n\t\t\t\t\tfl:delegate='{\n\t\t\t\t\t\t\"name\": \"sap/fe/macros/form/FormDelegate\",\n\t\t\t\t\t\t\"delegateType\": \"complete\"\n\t\t\t\t\t}'\n\t\t\t\t\tid=\"${this._contentId}\"\n\t\t\t\t\teditable=\"${this._editable}\"\n\t\t\t\t\tmacrodata:entitySet=\"{contextPath>@sapui.name}\"\n\t\t\t\t\tvisible=\"${this.isVisible}\"\n\t\t\t\t\tclass=\"sapUxAPObjectPageSubSectionAlignContent\"\n\t\t\t\t\tmacrodata:navigationPath=\"${contextPathPath}\"\n\t\t\t\t\tmacrodata:onChange=\"${onChangeStr}\"\n\t\t\t\t>\n\t\t\t\t\t${this.addConditionally(\n\t\t\t\t\t\tthis.title !== undefined,\n\t\t\t\t\t\txml`<f:title>\n\t\t\t\t\t\t\t<core:Title level=\"${this.titleLevel}\" text=\"${this.title}\" />\n\t\t\t\t\t\t</f:title>`\n\t\t\t\t\t)}\n\t\t\t\t\t<f:layout>\n\t\t\t\t\t${this.getLayoutInformation()}\n\n\t\t\t\t\t</f:layout>\n\t\t\t\t\t<f:formContainers>\n\t\t\t\t\t\t${this.getFormContainers()}\n\t\t\t\t\t</f:formContainers>\n\t\t\t\t</f:Form>\n\t\t\t</macro:FormAPI>`;\n\t\t}\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":13120,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","Form","BindingHelper","ID","MetaModelConverter","BindingToolkit","DataModelPathHelper","FormHelper","library","AnnotationHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_exports","TitleLevel","getContextRelativeTargetObjectPath","resolveBindingString","ifElse","equal","compileExpression","getInvolvedDataModelObjects","getFormContainerID","UI","createFormDefinition","xml","defineBuildingBlock","blockEvent","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FormBlock","name","namespace","publicNamespace","returnTypes","type","isPublic","required","expectedTypes","expectedAnnotationTypes","slot","isDefault","_BuildingBlockBase","props","configuration","mSettings","_this","this","metaPath","contextPath","formContainers","oContextObjectPath","mExtraSettings","oFacetDefinition","targetObject","hasFieldGroup","$Type","Label","Target","$target","fullyQualifiedName","path","term","annotations","fields","formElements","oConverterContext","getConverterContext","oFormDefinition","isVisible","annotationPath","getPath","useFormContainerLabels","facetType","_this$metaPath$getObj","getObject","_apiId","createId","_contentId","id","displayMode","_editable","IsEditable","_proto","getDataFieldCollection","formContainer","facetContext","facet","navigationPath","idPart","getNavigationPath","contextPathPath","facetPath","startsWith","substring","length","titleLevel","getFormContainerTitleLevel","title","label","attr","entitySet","onChange","actions","getFormContainers","indexOf","map","formContainerIdx","getModel","createBindingContext","isReferenceFacetPartOfPreview","partOfPreview","$AnnotationPath","getLayoutInformation","layout","adjustLabelSpan","breakpointL","breakpointM","breakpointXL","columnsL","columnsM","columnsXL","emptySpanL","emptySpanM","emptySpanS","emptySpanXL","labelSpanL","labelSpanM","labelSpanS","labelSpanXL","singleContainerFullSize","labelCellsLarge","emptyCellsLarge","getTemplate","onChangeStr","replace","metaPathPath","addConditionally","Auto"],"sources":["Form.block-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,2CAAO,CAAC,+CAAgD,kDAAmD,4DAA6D,8CAA+C,+CAAgD,oCAAqC,4CAA6C,qCAAsC,6CAA8C,gCAAiC,sBAAuB,0CAA2C,SAAUC,EAAmBC,EAAsBC,EAAgCC,EAAMC,EAAeC,EAAIC,EAAoBC,EAAgBC,EAAqBC,EAAYC,EAASC,GAC/sB,aAEA,IAAIC,EAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAASC,EAAaC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAeC,EAAeC,EAAeC,EACrS,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAahC,EAAQgC,WACzB,IAAIC,EAAqCnC,EAAoBmC,mCAC7D,IAAIC,EAAuBrC,EAAeqC,qBAC1C,IAAIC,EAAStC,EAAesC,OAC5B,IAAIC,EAAQvC,EAAeuC,MAC3B,IAAIC,EAAoBxC,EAAewC,kBACvC,IAAIC,EAA8B1C,EAAmB0C,4BACrD,IAAIC,EAAqB5C,EAAG4C,mBAC5B,IAAIC,EAAK9C,EAAc8C,GACvB,IAAIC,EAAuBhD,EAAKgD,qBAChC,IAAIC,EAAMlD,EAA+BkD,IACzC,IAAIC,EAAsBpD,EAAqBoD,oBAC/C,IAAIC,GAAarD,EAAqBqD,WACtC,IAAIC,GAAiBtD,EAAqBsD,eAC1C,IAAIC,GAAmBvD,EAAqBuD,iBAC5C,SAASC,GAA2BC,EAAQC,EAAUC,EAAYC,GAAW,IAAKD,EAAY,OAAQE,OAAOC,eAAeL,EAAQC,EAAU,CAAEK,WAAYJ,EAAWI,WAAYC,aAAcL,EAAWK,aAAcC,SAAUN,EAAWM,SAAUC,MAAOP,EAAWQ,YAAcR,EAAWQ,YAAYC,KAAKR,QAAgB,GAAM,CAC3U,SAASS,GAAuBC,GAAQ,GAAIA,SAAc,EAAG,CAAE,MAAM,IAAIC,eAAe,4DAA8D,CAAE,OAAOD,CAAM,CACrK,SAASE,GAAeC,EAAUC,GAAcD,EAASE,UAAYd,OAAOe,OAAOF,EAAWC,WAAYF,EAASE,UAAUE,YAAcJ,EAAUK,GAAgBL,EAAUC,EAAa,CAC5L,SAASI,GAAgBC,EAAGC,GAAKF,GAAkBjB,OAAOoB,eAAiBpB,OAAOoB,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,GAAgBC,EAAGC,EAAI,CACvM,SAASI,GAA0B3B,EAAQC,EAAU2B,EAAY1B,EAAYC,GAAW,IAAI0B,EAAO,CAAC,EAAGzB,OAAO0B,KAAK5B,GAAY6B,QAAQ,SAAUC,GAAOH,EAAKG,GAAO9B,EAAW8B,EAAM,GAAIH,EAAKvB,aAAeuB,EAAKvB,WAAYuB,EAAKtB,eAAiBsB,EAAKtB,aAAc,GAAI,UAAWsB,GAAQA,EAAKnB,YAAa,CAAEmB,EAAKrB,SAAW,IAAM,CAAEqB,EAAOD,EAAWK,QAAQC,UAAUC,OAAO,SAAUN,EAAMO,GAAa,OAAOA,EAAUpC,EAAQC,EAAU4B,IAASA,CAAM,EAAGA,GAAO,GAAI1B,GAAW0B,EAAKnB,mBAAqB,EAAG,CAAEmB,EAAKpB,MAAQoB,EAAKnB,YAAcmB,EAAKnB,YAAYC,KAAKR,QAAgB,EAAG0B,EAAKnB,YAAc2B,SAAW,CAAE,GAAIR,EAAKnB,mBAAqB,EAAG,CAAEN,OAAOC,eAAeL,EAAQC,EAAU4B,GAAOA,EAAO,IAAM,CAAE,OAAOA,CAAM,CACntB,SAASS,GAA0BpC,EAAYC,GAAW,MAAM,IAAIoC,MAAM,wDAA0D,gFAAkF,CACtN,IAAIC,IAeJtF,EAAOyC,EAAoB,CACzB8C,KAAM,OACNC,UAAW,yBACXC,gBAAiB,gBACjBC,YAAa,CAAC,gCACZzF,EAAQ0C,GAAe,CACzBgD,KAAM,SACNC,SAAU,KACVC,SAAU,OACR3F,EAAQyC,GAAe,CACzBgD,KAAM,uBACNE,SAAU,KACVD,SAAU,KACVE,cAAe,CAAC,YAAa,qBAAsB,YAAa,gBAC9D3F,EAAQwC,GAAe,CACzBgD,KAAM,uBACNC,SAAU,KACVC,SAAU,KACVE,wBAAyB,CAAC,4CAA6C,6CAA8C,6CACrHD,cAAe,CAAC,YAAa,aAAc,YAAa,wBACtD1F,EAAQuC,GAAe,CACzBgD,KAAM,UACJtF,EAAQsC,GAAe,CACzBgD,KAAM,YACJrF,EAAQqC,GAAe,CACzBgD,KAAM,YACJpF,EAAQoC,GAAe,CACzBgD,KAAM,SACNC,SAAU,OACRpF,EAAQmC,GAAe,CACzBgD,KAAM,yBACNC,SAAU,OACRnF,EAASkC,GAAe,CAC1BgD,KAAM,WACJjF,EAASiC,GAAe,CAC1BgD,KAAM,WACJhF,EAAS+B,KAAc9B,EAASgC,GAAiB,CACnD+C,KAAM,iCACNC,SAAU,KACVI,KAAM,eACNC,UAAW,OACTpF,EAAS8B,GAAe,CAC1BgD,KAAM,SACNC,SAAU,OACR5F,EAAKc,GAAUC,EAAuB,SAAUmF,GAClDrC,GAAeyB,EAAWY,GAwD1B,SAASZ,EAAUa,EAAOC,EAAeC,GACvC,IAAIC,EACJA,EAAQJ,EAAmBzC,KAAK8C,KAAMJ,EAAOC,EAAeC,IAAcE,KAC1E1D,GAA2ByD,EAAO,KAAMtF,EAAa0C,GAAuB4C,IAC5EzD,GAA2ByD,EAAO,cAAerF,EAAcyC,GAAuB4C,IACtFzD,GAA2ByD,EAAO,WAAYpF,EAAcwC,GAAuB4C,IACnFzD,GAA2ByD,EAAO,iBAAkBnF,EAAcuC,GAAuB4C,IACzFzD,GAA2ByD,EAAO,yBAA0BlF,EAAcsC,GAAuB4C,IACjGzD,GAA2ByD,EAAO,gBAAiBjF,EAAcqC,GAAuB4C,IACxFzD,GAA2ByD,EAAO,QAAShF,EAAcoC,GAAuB4C,IAChFzD,GAA2ByD,EAAO,aAAc/E,EAAcmC,GAAuB4C,IACrFzD,GAA2ByD,EAAO,cAAe9E,EAAckC,GAAuB4C,IACtFzD,GAA2ByD,EAAO,YAAa7E,EAAeiC,GAAuB4C,IACrFzD,GAA2ByD,EAAO,WAAY5E,EAAegC,GAAuB4C,IACpFzD,GAA2ByD,EAAO,eAAgB3E,EAAe+B,GAAuB4C,IACxFzD,GAA2ByD,EAAO,SAAU1E,EAAe8B,GAAuB4C,IAClF,GAAIA,EAAME,UAAYF,EAAMG,cAAgBH,EAAMI,iBAAmBvB,WAAamB,EAAMI,iBAAmB,MAAO,CAChH,MAAMC,EAAqBvE,EAA4BkE,EAAME,SAAUF,EAAMG,aAC7E,MAAMG,EAAiB,CAAC,EACxB,IAAIC,EAAmBF,EAAmBG,aAC1C,IAAIC,EAAgB,MACpB,GAAIF,GAAoBA,EAAiBG,QAAU,4CAA6C,CAE9FD,EAAgB,KAChBF,EAAmB,CACjBG,MAAO,4CACPC,MAAOJ,EAAiBI,MACxBC,OAAQ,CACNC,QAASN,EACTO,mBAAoBP,EAAiBO,mBACrCC,KAAM,GACNC,KAAM,GACN3B,KAAM,iBACNpC,MAAOxB,EAAmC4E,IAE5CY,YAAa,CAAC,EACdH,mBAAoBP,EAAiBO,oBAEvCR,EAAeC,EAAiBK,OAAO3D,OAAS,CAC9CiE,OAAQlB,EAAMmB,aAElB,CACA,MAAMC,EAAoBpB,EAAMqB,oBAAoBhB,EAAwCxB,UAAWkB,EAAWO,GAClH,MAAMgB,EAAkBrF,EAAqBsE,EAAkBP,EAAMuB,UAAWH,GAChF,GAAIX,EAAe,CACjBa,EAAgBlB,eAAe,GAAGoB,eAAiBxB,EAAME,SAASuB,SACpE,CACAzB,EAAMI,eAAiBkB,EAAgBlB,eACvCJ,EAAM0B,uBAAyBJ,EAAgBI,uBAC/C1B,EAAM2B,UAAYpB,GAAoBA,EAAiBG,KACzD,KAAO,CACL,IAAIkB,EACJ5B,EAAM2B,WAAaC,EAAwB5B,EAAME,SAAS2B,eAAiB,MAAQD,SAA+B,OAAS,EAAIA,EAAsBlB,KACvJ,CACA,IAAKV,EAAMV,SAAU,CACnBU,EAAM8B,OAAS9B,EAAM+B,SAAS,QAC9B/B,EAAMgC,WAAahC,EAAMiC,EAC3B,KAAO,CACLjC,EAAM8B,OAAS9B,EAAMiC,GACrBjC,EAAMgC,WAAa,GAAGhC,EAAMiC,YAC9B,CAKA,GAAIjC,EAAMkC,cAAgBrD,UAAW,CACnCmB,EAAMmC,UAAYtG,EAAkBF,EAAOC,EAAMF,EAAqBsE,EAAMkC,YAAa,WAAY,OAAQ,KAAM,OACrH,KAAO,CACLlC,EAAMmC,UAAYtG,EAAkBG,EAAGoG,WACzC,CACA,OAAOpC,CACT,CACAzE,EAAWyD,EACX,IAAIqD,EAASrD,EAAUtB,UACvB2E,EAAOC,uBAAyB,SAASA,EAAuBC,EAAeC,GAC7E,MAAMC,EAAQ3G,EAA4B0G,GAAchC,aACxD,IAAIkC,EACJ,IAAIC,EACJ,GAAIF,EAAM/B,QAAU,4CAA6C,CAC/DgC,EAAiBjJ,EAAiBmJ,kBAAkBH,EAAM7B,OAAO3D,OACjE0F,EAASF,CACX,KAAO,CACL,MAAMI,EAAkB5C,KAAKE,YAAYsB,UACzC,IAAIqB,EAAYN,EAAaf,UAC7B,GAAIqB,EAAUC,WAAWF,GAAkB,CACzCC,EAAYA,EAAUE,UAAUH,EAAgBI,OAClD,CACAP,EAAiBjJ,EAAiBmJ,kBAAkBE,GACpDH,EAASG,CACX,CACA,MAAMI,EAAa3J,EAAW4J,2BAA2BlD,KAAKmD,MAAOnD,KAAKiD,YAC1E,MAAME,EAAQnD,KAAKyB,wBAA0Be,EAAQhJ,EAAiB4J,MAAMZ,EAAO,CACjF9F,QAAS6F,IACN,GACL,MAAMP,EAAKhC,KAAKgC,GAAKlG,EAAmB4G,GAAU9D,UAClD,OAAO3C,CAAG;;;OAGT+D,KAAKqD,KAAK,KAAMrB;cACTmB;mBACKF;oBACCR,EAAiBH,EAAcgB,UAAYtD,KAAKE;iBACnDqC;4BACWD,EAAcpB;uBACnBuB;gBACPH,EAAchB;oBACVtB,KAAKiC;iBACRjC,KAAKuD;gBACNjB,EAAckB;;;;;0BAM1B,EACApB,EAAOqB,kBAAoB,SAASA,IAClC,GAAIzD,KAAKG,eAAe6C,SAAW,EAAG,CACpC,MAAO,EACT,CACA,GAAIhD,KAAK0B,UAAUgC,QAAQ,+CAAiD,EAAG,CAC7E,OAAO1D,KAAKG,eAAewD,IAAI,CAACrB,EAAesB,KAC7C,GAAItB,EAAchB,UAAW,CAC3B,MAAMiB,EAAevC,KAAKE,YAAY2D,WAAWC,qBAAqBxB,EAAcf,eAAgBvB,KAAKE,aACzG,MAAMsC,EAAQD,EAAaX,YAC3B,GAAIY,EAAM/B,QAAU,6CAA+CnH,EAAWyK,8BAA8BvB,EAAOxC,KAAKgE,eAAgB,CACtI,GAAIxB,EAAM7B,OAAOsD,gBAAgBxD,QAAU,oDAAqD,CAC9F,OAAOxE,CAAG,uCAAuC2H;iDAChBA;;;2BAInC,CACA,OAAO5D,KAAKqC,uBAAuBC,EAAeC,EACpD,CACF,CACA,MAAO,EAAE,EAEb,MAAO,GAAIvC,KAAK0B,YAAc,4CAA6C,CACzE,OAAO1B,KAAKG,eAAewD,IAAIrB,IAC7B,GAAIA,EAAchB,UAAW,CAC3B,MAAMiB,EAAevC,KAAKE,YAAY2D,WAAWC,qBAAqBxB,EAAcf,eAAgBvB,KAAKE,aACzG,OAAOF,KAAKqC,uBAAuBC,EAAeC,EACpD,KAAO,CACL,MAAO,EACT,GAEJ,CACA,MAAO,EACT,EAOAH,EAAO8B,qBAAuB,SAASA,IACrC,OAAQlE,KAAKmE,OAAO/E,MAClB,IAAK,uBACH,OAAOnD,CAAG,4CAA4C+D,KAAKmE,OAAOC;4BAChDpE,KAAKmE,OAAOE;4BACZrE,KAAKmE,OAAOG;6BACXtE,KAAKmE,OAAOI;yBAChBvE,KAAKmE,OAAOK;yBACZxE,KAAKmE,OAAOM;0BACXzE,KAAKmE,OAAOO;2BACX1E,KAAKmE,OAAOQ;2BACZ3E,KAAKmE,OAAOS;2BACZ5E,KAAKmE,OAAOU;4BACX7E,KAAKmE,OAAOW;2BACb9E,KAAKmE,OAAOY;2BACZ/E,KAAKmE,OAAOa;2BACZhF,KAAKmE,OAAOc;4BACXjF,KAAKmE,OAAOe;wCACAlF,KAAKmE,OAAOgB,8BAC5C,IAAK,eACL,QACE,OAAOlJ,CAAG;oBACA+D,KAAKmE,OAAOM;oBACZzE,KAAKmE,OAAOK;qBACXxE,KAAKmE,OAAOO;2BACN1E,KAAKmE,OAAOiB;2BACZpF,KAAKmE,OAAOkB,sBAEnC,EACAjD,EAAOkD,YAAc,SAASA,IAC5B,MAAMC,EAAcvF,KAAKuD,UAAYvD,KAAKuD,SAASiC,QAAQ,IAAK,OAAOA,QAAQ,IAAK,QAAU,GAC9F,MAAMC,EAAezF,KAAKC,SAASuB,UACnC,MAAMoB,EAAkB5C,KAAKE,YAAYsB,UACzC,IAAKxB,KAAKsB,UAAW,CACnB,MAAO,EACT,KAAO,CACL,OAAOrF,CAAG;;;;WAIP+D,KAAK6B;iBACC4D;oBACG7C;;;;;;WAMT5C,KAAK+B;iBACC/B,KAAKkC;;gBAENlC,KAAKsB;;iCAEYsB;2BACN2C;;OAEpBvF,KAAK0F,iBAAiB1F,KAAKmD,QAAUvE,UAAW3C,CAAG;4BAC9B+D,KAAKiD,qBAAqBjD,KAAKmD;;;OAGpDnD,KAAKkE;;;;QAIJlE,KAAKyD;;;oBAIP,CACF,EACA,OAAO1E,CACT,CA3R0C,CA2RxClG,GAAqB4B,EAAcyD,GAA0B1D,EAAQiD,UAAW,KAAM,CAAC/D,GAAQ,CAC/FoD,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXvC,EAAewD,GAA0B1D,EAAQiD,UAAW,cAAe,CAAC9D,GAAQ,CACtFmD,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXtC,EAAeuD,GAA0B1D,EAAQiD,UAAW,WAAY,CAAC7D,GAAQ,CACnFkD,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXrC,EAAesD,GAA0B1D,EAAQiD,UAAW,iBAAkB,CAAC5D,GAAQ,CACzFiD,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXpC,EAAeqD,GAA0B1D,EAAQiD,UAAW,yBAA0B,CAAC3D,GAAQ,CACjGgD,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXnC,EAAeoD,GAA0B1D,EAAQiD,UAAW,gBAAiB,CAAC1D,GAAQ,CACxF+C,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,WACX,OAAO,IACT,IACElC,EAAemD,GAA0B1D,EAAQiD,UAAW,QAAS,CAACzD,GAAQ,CAChF8C,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXjC,EAAekD,GAA0B1D,EAAQiD,UAAW,aAAc,CAACxD,GAAQ,CACrF6C,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,WACX,OAAO1B,EAAWoK,IACpB,IACE1K,EAAeiD,GAA0B1D,EAAQiD,UAAW,cAAe,CAACvD,GAAS,CACvF4C,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX/B,EAAgBgD,GAA0B1D,EAAQiD,UAAW,YAAa,CAACtD,GAAS,CACtF2C,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,WACX,MAAO,MACT,IACE9B,EAAgB+C,GAA0B1D,EAAQiD,UAAW,WAAY,CAACrD,GAAS,CACrF0C,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX7B,EAAgB8C,GAA0B1D,EAAQiD,UAAW,eAAgB,CAACpD,GAAS,CACzFyC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX5B,EAAgB6C,GAA0B1D,EAAQiD,UAAW,SAAU,CAACnD,GAAS,CACnFwC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,WACX,MAAO,CACLmC,KAAM,eACNqF,SAAU,EACVC,UAAW,EACXF,SAAU,EACVY,gBAAiB,GAErB,IACG5K,KAAaD,GAClBe,EAAWyD,GACX,OAAOzD,CACT,EAAG","sourceRoot":"form"}},{"offset":{"line":13198,"column":0},"map":{"version":3,"names":["FormAPI","defineUI5Class","property","type","expectedAnnotations","expectedTypes","MacroAPI"],"sourceRoot":"form","sources":["FormAPI.ts"],"sourcesContent":["import { defineUI5Class, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport MacroAPI from \"../MacroAPI\";\n\n@defineUI5Class(\"sap.fe.macros.form.FormAPI\")\nclass FormAPI extends MacroAPI {\n\t/**\n\t * The identifier of the form control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedAnnotations: [\n\t\t\t\"@com.sap.vocabularies.UI.v1.FieldGroup\",\n\t\t\t\"@com.sap.vocabularies.UI.v1.CollectionFacet\",\n\t\t\t\"@com.sap.vocabularies.UI.v1.ReferenceFacet\"\n\t\t],\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"]\n\t})\n\tmetaPath!: string;\n\n\t/**\n\t * The title of the form control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\ttitle!: string;\n}\n\nexport default FormAPI;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;MAIMA,OAAO,WADZC,cAAc,CAAC,4BAA4B,CAAC,UAO3CC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAQ5BD,QAAQ,CAAC;IACTC,IAAI,EAAE,QAAQ;IACdC,mBAAmB,EAAE,CACpB,wCAAwC,EACxC,6CAA6C,EAC7C,4CAA4C,CAC5C;IACDC,aAAa,EAAE,CAAC,WAAW,EAAE,YAAY,EAAE,WAAW,EAAE,oBAAoB;EAC7E,CAAC,CAAC,UAQDH,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;EAAA,EA9BRG,QAAQ;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA,OAkCfN,OAAO;AAAA"}},{"offset":{"line":13254,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","MacroAPI","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_descriptor3","property","defineUI5Class","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FormAPI","type","expectedAnnotations","expectedTypes","_MacroAPI","_this","_len","arguments","length","args","Array","_key","this"],"sources":["FormAPI-dbg.js"],"mappings":"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","sourceRoot":"form"}},{"offset":{"line":13259,"column":0},"map":{"version":3,"names":["FormContainerBlock","defineBuildingBlock","name","namespace","fragment","blockAttribute","type","required","isPublic","expectedTypes","blockAggregation","blockEvent","props","externalConfiguration","settings","entitySet","contextPath","formElements","Object","keys","length","oContextObjectPath","getInvolvedDataModelObjects","metaPath","mExtraSettings","oFacetDefinition","targetObject","$Type","Label","Target","$target","fullyQualifiedName","path","term","value","getContextRelativeTargetObjectPath","annotations","fields","oConverterContext","getConverterContext","undefined","oFormDefinition","createFormDefinition","dataFieldCollection","formContainers","BuildingBlockBase"],"sourceRoot":"form","sources":["FormContainer.block.ts"],"sourcesContent":["import BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAggregation, blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { ConverterAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport { createFormDefinition, FormElement } from \"sap/fe/core/converters/controls/Common/Form\";\nimport type { ConfigurableObject } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Building block for creating a FormContainer based on the provided OData V4 metadata.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:FormContainer\n *   id=\"SomeId\"\n *   entitySet=\"{entitySet>}\"\n *   dataFieldCollection =\"{dataFieldCollection>}\"\n *   title=\"someTitle\"\n *   navigationPath=\"{ToSupplier}\"\n *   visible=true\n *   onChange=\".handlers.onFieldValueChange\"\n * /&gt;\n * </pre>\n *\n * @private\n * @experimental\n */\n@defineBuildingBlock({ name: \"FormContainer\", namespace: \"sap.fe.macros\", fragment: \"sap.fe.macros.form.FormContainer\" })\nexport default class FormContainerBlock extends BuildingBlockBase {\n\t@blockAttribute({ type: \"string\" })\n\tid?: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tcontextPath!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tentitySet?: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true\n\t})\n\tmetaPath!: Context;\n\n\t/**\n\t * Metadata path to the dataFieldCollection\n\t */\n\t@blockAttribute({\n\t\ttype: \"array\"\n\t})\n\tdataFieldCollection?: FormElement[];\n\n\t/**\n\t * Control whether the form is in displayMode or not\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tdisplayMode: boolean = false;\n\n\t/**\n\t * Title of the form container\n\t */\n\t@blockAttribute({ type: \"string\" })\n\ttitle?: string;\n\n\t/**\n\t * Defines the \"aria-level\" of the form title, titles of internally used form containers are nested subsequently\n\t */\n\t@blockAttribute({ type: \"sap.ui.core.TitleLevel\", isPublic: true })\n\ttitleLevel: string = \"Auto\";\n\n\t/**\n\t * Binding the form container using a navigation path\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tnavigationPath?: string;\n\n\t/**\n\t * Binding the visibility of the form container using an expression binding or Boolean\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tvisible?: string;\n\n\t/**\n\t * Flex designtime settings to be applied\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tdesigntimeSettings: string = \"sap/fe/macros/form/FormContainer.designtime\";\n\n\t@blockAttribute({ type: \"array\" })\n\tactions?: ConverterAction[];\n\n\t@blockAggregation({ type: \"sap.fe.macros.form.FormElement\" })\n\tformElements: Record<string, ConfigurableObject> = {};\n\n\t// Just proxied down to the Field may need to see if needed or not\n\t@blockEvent()\n\tonChange?: string;\n\n\tconstructor(props: PropertiesOf<FormContainerBlock>, externalConfiguration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props);\n\t\tthis.entitySet = this.contextPath!;\n\t\tif (this.formElements && Object.keys(this.formElements).length > 0) {\n\t\t\tconst oContextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\t\tconst mExtraSettings: Record<string, unknown> = {};\n\t\t\tlet oFacetDefinition = oContextObjectPath.targetObject;\n\t\t\t// Wrap the facet in a fake Facet annotation\n\t\t\toFacetDefinition = {\n\t\t\t\t$Type: \"com.sap.vocabularies.UI.v1.ReferenceFacet\",\n\t\t\t\tLabel: oFacetDefinition.Label,\n\t\t\t\tTarget: {\n\t\t\t\t\t$target: oFacetDefinition,\n\t\t\t\t\tfullyQualifiedName: oFacetDefinition.fullyQualifiedName,\n\t\t\t\t\tpath: \"\",\n\t\t\t\t\tterm: \"\",\n\t\t\t\t\ttype: \"AnnotationPath\",\n\t\t\t\t\tvalue: getContextRelativeTargetObjectPath(oContextObjectPath)\n\t\t\t\t},\n\t\t\t\tannotations: {},\n\t\t\t\tfullyQualifiedName: oFacetDefinition.fullyQualifiedName\n\t\t\t};\n\t\t\tmExtraSettings[oFacetDefinition.Target.value] = { fields: this.formElements };\n\t\t\tconst oConverterContext = this.getConverterContext(\n\t\t\t\toContextObjectPath,\n\t\t\t\t/*this.contextPath*/ undefined,\n\t\t\t\tsettings,\n\t\t\t\tmExtraSettings\n\t\t\t);\n\t\t\tconst oFormDefinition = createFormDefinition(oFacetDefinition, \"true\", oConverterContext);\n\n\t\t\tthis.dataFieldCollection = oFormDefinition.formContainers[0].formElements;\n\t\t}\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":13500,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","Form","MetaModelConverter","DataModelPathHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_exports","getContextRelativeTargetObjectPath","getInvolvedDataModelObjects","createFormDefinition","defineBuildingBlock","blockEvent","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FormContainerBlock","name","namespace","fragment","type","required","isPublic","expectedTypes","_BuildingBlockBase","props","externalConfiguration","settings","_this","this","entitySet","contextPath","formElements","length","oContextObjectPath","metaPath","mExtraSettings","oFacetDefinition","targetObject","$Type","Label","Target","$target","fullyQualifiedName","path","term","annotations","fields","oConverterContext","getConverterContext","oFormDefinition","dataFieldCollection","formContainers"],"sources":["FormContainer.block-dbg.js"],"mappings":"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","sourceRoot":"form"}},{"offset":{"line":13505,"column":0},"map":{"version":3,"names":["FormContainerAPI","defineUI5Class","property","type","xmlEventHandler","props","setParentBindingContext","formContainerId","toggleDetails","showDetails","MacroAPI","isDependentBound"],"sourceRoot":"form","sources":["FormContainerAPI.ts"],"sourcesContent":["import { defineUI5Class, property, xmlEventHandler } from \"sap/fe/core/helpers/ClassSupport\";\nimport MacroAPI from \"../MacroAPI\";\n\n/**\n * @alias sap.fe.macros.form.FormContainerAPI\n * @private\n */\n@defineUI5Class(\"sap.fe.macros.form.FormContainerAPI\")\nclass FormContainerAPI extends MacroAPI {\n\t/**\n\t * The identifier of the form container control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tformContainerId!: string;\n\n\t@property({ type: \"boolean\" })\n\tshowDetails = false;\n\n\tstatic isDependentBound: boolean = true;\n\n\tconstructor(props?: any) {\n\t\tsuper(props, true);\n\t\tthis.setParentBindingContext(\"internal\", `controls/${this.formContainerId}`);\n\t}\n\n\t@xmlEventHandler()\n\ttoggleDetails() {\n\t\tthis.showDetails = !this.showDetails;\n\t}\n}\n\nexport default FormContainerAPI;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;EAGA;AACA;AACA;AACA;EAHA,IAKMA,gBAAgB,WADrBC,cAAc,CAAC,qCAAqC,CAAC,UAOpDC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAG5BD,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAU7BC,eAAe,EAAE;IAAA;IAlBlB;AACD;AACA;AACA;AACA;;IASC,0BAAYC,KAAW,EAAE;MAAA;MACxB,6BAAMA,KAAK,EAAE,IAAI,CAAC;MAAC;MAAA;MACnB,MAAKC,uBAAuB,CAAC,UAAU,EAAG,YAAW,MAAKC,eAAgB,EAAC,CAAC;MAAC;IAC9E;IAAC;IAAA,OAGDC,aAAa,GADb,yBACgB;MACf,IAAI,CAACC,WAAW,GAAG,CAAC,IAAI,CAACA,WAAW;IACrC,CAAC;IAAA;EAAA,EAtB6BC,QAAQ,WAY/BC,gBAAgB,GAAY,IAAI;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAFzB,KAAK;IAAA;EAAA;EAAA,OAeLX,gBAAgB;AAAA"}},{"offset":{"line":13566,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","MacroAPI","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_class3","xmlEventHandler","property","defineUI5Class","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FormContainerAPI","type","_MacroAPI","props","_this","this","setParentBindingContext","formContainerId","_proto","toggleDetails","showDetails","isDependentBound","getOwnPropertyDescriptor"],"sources":["FormContainerAPI-dbg.js"],"mappings":"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","sourceRoot":"form"}},{"offset":{"line":13571,"column":0},"map":{"version":3,"names":["Delegate","createLayout","mPropertyBag","oModifier","modifier","oMetaModel","appComponent","getMetaModel","oForm","element","sEntitySet","DelegateUtil","getCustomData","sPath","startsWith","oFormContainer","parentSelector","bySelector","view","undefined","sNavigationPath","sBindingPath","oMetaModelContext","getMetaContext","oPropertyContext","createBindingContext","bindingPath","sFormId","sId","id","oParameters","sPropertyName","sValueHelpType","oControl","fnTemplateValueHelp","sFragmentName","oThis","JSONModel","idPrefix","fieldSelector","oPreprocessorSettings","bindingContexts","entitySet","contextPath","property","this","models","metaModel","templateControlFragment","fnTemplateFormElement","oView","navigationPath","sOnChangeCustomData","sDisplayModeCustomData","_flexId","onChange","Common","removeEscapeCharacters","displayMode","dataField","bValueHelpRequired","isValueHelpRequired","bValueHelpExists","doesValueHelpExist","oValueHelp","oField","control","valueHelp","getPropertyInfo","_isComplexType","mProperty","$Type","toLowerCase","indexOf","_startsWithNavigationProperty","sPropertyPath","aNavigationProperties","some","sNavProp","_enrichProperty","mElement","mPropertyAnnotations","sEntityType","oElement","sAggregationName","mProp","name","entityType","mDataFieldDefaultAnnotation","sLabel","Label","label","mHiddenAnnotation","hideFromReveal","$Path","getBindingContext","getProperty","mFieldControlAnnotation","$EnumMember","sFieldControlPath","Path","bListBinding","getBinding","ListBinding","iFieldControlValue","unsupported","_convertMetadataToDelegateFormat","mODataEntityType","aProperties","sElementName","$kind","push","mPropAnnotations","getObject","_getBindingPath","mPayload","path","vBinding","data","getPath","_getODataPropertiesOfModel","oModel","getModel","modelName","isA","sBindingContextPath","oMetaModelContextObject","Promise","resolve","then","aggregationName","payload"],"sourceRoot":"form","sources":["FormDelegate.ts"],"sourcesContent":["import type AppComponent from \"sap/fe/core/AppComponent\";\nimport Common from \"sap/fe/macros/CommonHelper\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport type Control from \"sap/ui/core/Control\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\ntype DelegateProperty = {\n\tname: string;\n\tbindingPath: string;\n\tentityType: string;\n\tlabel?: string;\n\thideFromReveal?: any;\n\tunsupported?: boolean;\n};\n\nconst Delegate = {\n\t/**\n\t * @param mPropertyBag Object with parameters as properties\n\t * @param mPropertyBag.modifier Modifier to harmonize access, creation and manipulation to controls in XML Views and JS Controls\n\t * @param [mPropertyBag.appComponent] Needed to calculate the correct ID in case you provide a selector\n\t * @param [mPropertyBag.view] XML node of the view, required for XML case to create nodes and to find elements\n\t * @param [mPropertyBag.fieldSelector] Selector to calculate the ID for the control that is created\n\t * @param mPropertyBag.bindingPath Runtime binding path the control should be bound to\n\t * @param mPropertyBag.payload Payload parameter attached to the delegate, undefined if no payload was assigned\n\t * @param mPropertyBag.controlType Control type of the element the delegate is attached to\n\t * @param mPropertyBag.aggregationName Name of the aggregation the delegate should provide additional elements\n\t * @param mPropertyBag.element\n\t * @param mPropertyBag.parentSelector\n\t * @returns Map containing the controls to add\n\t */\n\tcreateLayout: async function (mPropertyBag: {\n\t\tmodifier: any;\n\t\tappComponent?: AppComponent;\n\t\tview?: Element | undefined;\n\t\tfieldSelector?: { id?: string; isLocalId?: boolean } | undefined;\n\t\tbindingPath: string;\n\t\tpayload: object;\n\t\tcontrolType: string;\n\t\taggregationName: string;\n\t\telement?: any;\n\t\tparentSelector?: any;\n\t}) {\n\t\tconst oModifier = mPropertyBag.modifier,\n\t\t\toMetaModel = mPropertyBag.appComponent?.getMetaModel(),\n\t\t\toForm = mPropertyBag.element;\n\n\t\tlet sEntitySet = await DelegateUtil.getCustomData(oForm, \"entitySet\", oModifier);\n\t\tif (!sEntitySet) {\n\t\t\tsEntitySet = await DelegateUtil.getCustomData(oForm, \"navigationPath\", oModifier);\n\t\t}\n\t\tconst sPath = sEntitySet.startsWith(\"/\") ? `${sEntitySet}` : `/${sEntitySet}`;\n\t\tconst oFormContainer = mPropertyBag.parentSelector\n\t\t\t? mPropertyBag.modifier.bySelector(mPropertyBag.parentSelector, mPropertyBag.appComponent, mPropertyBag.view)\n\t\t\t: undefined;\n\t\tconst sNavigationPath = await DelegateUtil.getCustomData(oFormContainer, \"navigationPath\", oModifier);\n\t\tconst sBindingPath = sNavigationPath ? `${sPath}/${sNavigationPath}` : sPath;\n\t\tconst oMetaModelContext = oMetaModel?.getMetaContext(sBindingPath);\n\t\tconst oPropertyContext = oMetaModel?.createBindingContext(`${sBindingPath}/${mPropertyBag.bindingPath}`);\n\t\tconst sFormId = mPropertyBag.element.sId || mPropertyBag.element.id;\n\n\t\tconst oParameters = {\n\t\t\tsPropertyName: mPropertyBag.bindingPath,\n\t\t\tsBindingPath: sBindingPath,\n\t\t\tsValueHelpType: \"FormVH\",\n\t\t\toControl: oForm,\n\t\t\toMetaModel: oMetaModel,\n\t\t\toModifier: oModifier\n\t\t};\n\n\t\tfunction fnTemplateValueHelp(sFragmentName: any) {\n\t\t\tconst oThis = new JSONModel({\n\t\t\t\t\tid: sFormId,\n\t\t\t\t\tidPrefix: mPropertyBag.fieldSelector?.id\n\t\t\t\t}),\n\t\t\t\toPreprocessorSettings = {\n\t\t\t\t\tbindingContexts: {\n\t\t\t\t\t\tentitySet: oMetaModelContext,\n\t\t\t\t\t\tcontextPath: oMetaModelContext,\n\t\t\t\t\t\tproperty: oPropertyContext,\n\t\t\t\t\t\tthis: oThis.createBindingContext(\"/\")\n\t\t\t\t\t},\n\t\t\t\t\tmodels: {\n\t\t\t\t\t\tthis: oThis,\n\t\t\t\t\t\tentitySet: oMetaModel,\n\t\t\t\t\t\tcontextPath: oMetaModel,\n\t\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\t\tproperty: oMetaModel\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\treturn DelegateUtil.templateControlFragment(sFragmentName, oPreprocessorSettings, {}, oModifier);\n\t\t}\n\n\t\tasync function fnTemplateFormElement(sFragmentName: any, oView: any, navigationPath: string) {\n\t\t\tconst sOnChangeCustomData: string = await DelegateUtil.getCustomData(oForm, \"onChange\", oModifier);\n\t\t\tconst sDisplayModeCustomData = await DelegateUtil.getCustomData(oForm, \"displayMode\", oModifier);\n\t\t\tconst oThis = new JSONModel({\n\t\t\t\t// properties and events of Field macro\n\t\t\t\t_flexId: mPropertyBag.fieldSelector?.id,\n\t\t\t\tonChange: Common.removeEscapeCharacters(sOnChangeCustomData),\n\t\t\t\tdisplayMode: Common.removeEscapeCharacters(sDisplayModeCustomData),\n\t\t\t\tnavigationPath: navigationPath\n\t\t\t});\n\t\t\tconst oPreprocessorSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tentitySet: oMetaModelContext,\n\t\t\t\t\tdataField: oPropertyContext,\n\t\t\t\t\tthis: oThis.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tthis: oThis,\n\t\t\t\t\tentitySet: oMetaModel,\n\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\tdataField: oMetaModel\n\t\t\t\t},\n\t\t\t\tappComponent: mPropertyBag.appComponent\n\t\t\t};\n\n\t\t\treturn DelegateUtil.templateControlFragment(sFragmentName, oPreprocessorSettings, { view: oView }, oModifier);\n\t\t}\n\n\t\tconst bValueHelpRequired = await DelegateUtil.isValueHelpRequired(oParameters);\n\t\tconst bValueHelpExists = await DelegateUtil.doesValueHelpExist(oParameters);\n\t\tlet oValueHelp;\n\t\tif (bValueHelpRequired && !bValueHelpExists) {\n\t\t\toValueHelp = await fnTemplateValueHelp(\"sap.fe.macros.form.ValueHelpWrapper\");\n\t\t}\n\t\tconst oField = await fnTemplateFormElement(\"sap.fe.macros.form.FormElementFlexibility\", mPropertyBag.view, sNavigationPath);\n\t\treturn {\n\t\t\tcontrol: oField,\n\t\t\tvalueHelp: oValueHelp\n\t\t};\n\t},\n\t// getPropertyInfo is a patched version of ODataV4ReadDelegates to dela with navigationPath\n\tgetPropertyInfo: function (mPropertyBag: any) {\n\t\tfunction _isComplexType(mProperty: any) {\n\t\t\tif (mProperty && mProperty.$Type) {\n\t\t\t\tif (mProperty.$Type.toLowerCase().indexOf(\"edm\") !== 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t//Check if a given property path starts with a navigation property.\n\t\tfunction _startsWithNavigationProperty(sPropertyPath: string, aNavigationProperties: string[]) {\n\t\t\treturn aNavigationProperties.some(function (sNavProp) {\n\t\t\t\treturn sPropertyPath.startsWith(sNavProp);\n\t\t\t});\n\t\t}\n\n\t\tfunction _enrichProperty(\n\t\t\tsPropertyPath: string,\n\t\t\tmElement: any,\n\t\t\tmPropertyAnnotations: any,\n\t\t\tsEntityType: string,\n\t\t\toElement: Control,\n\t\t\tsAggregationName: string,\n\t\t\taNavigationProperties: string[]\n\t\t): DelegateProperty {\n\t\t\tconst mProp: DelegateProperty = {\n\t\t\t\tname: sPropertyPath,\n\t\t\t\tbindingPath: sPropertyPath,\n\t\t\t\tentityType: sEntityType\n\t\t\t};\n\t\t\t// get label information, either via DataFieldDefault annotation (if exists) or Label annotation\n\t\t\tconst mDataFieldDefaultAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.DataFieldDefault\"];\n\t\t\tconst sLabel =\n\t\t\t\t(mDataFieldDefaultAnnotation && mDataFieldDefaultAnnotation.Label) ||\n\t\t\t\tmPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Label\"];\n\t\t\tmProp.label = sLabel || \"[LABEL_MISSING: \" + sPropertyPath + \"]\";\n\t\t\t// evaluate Hidden annotation\n\t\t\tconst mHiddenAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"];\n\t\t\tmProp.hideFromReveal = mHiddenAnnotation;\n\t\t\tif (mHiddenAnnotation && mHiddenAnnotation.$Path) {\n\t\t\t\tmProp.hideFromReveal = oElement.getBindingContext()?.getProperty(mHiddenAnnotation.$Path);\n\t\t\t}\n\t\t\t// evaluate AdaptationHidden annotation\n\t\t\tif (!mProp.hideFromReveal) {\n\t\t\t\tmProp.hideFromReveal = mPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.AdaptationHidden\"];\n\t\t\t}\n\t\t\t// evaluate FieldControl annotation\n\t\t\tlet mFieldControlAnnotation;\n\t\t\tif (!mProp.hideFromReveal) {\n\t\t\t\tmFieldControlAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"];\n\t\t\t\tif (mFieldControlAnnotation) {\n\t\t\t\t\tmProp.hideFromReveal = mFieldControlAnnotation.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Hidden\";\n\t\t\t\t}\n\t\t\t}\n\t\t\t// @runtime hidden by field control value = 0\n\t\t\tmFieldControlAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"];\n\t\t\tconst sFieldControlPath = mFieldControlAnnotation && mFieldControlAnnotation.Path;\n\t\t\tif (sFieldControlPath && !mProp.hideFromReveal) {\n\t\t\t\t// if the binding is a list binding, skip the check for field control\n\t\t\t\tconst bListBinding = oElement.getBinding(sAggregationName) instanceof ListBinding;\n\t\t\t\tif (!bListBinding) {\n\t\t\t\t\tconst iFieldControlValue = oElement.getBindingContext()?.getProperty(sFieldControlPath);\n\t\t\t\t\tmProp.hideFromReveal = iFieldControlValue === 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// no support for DataFieldFor/WithAction and DataFieldFor/WithIntentBasedNavigation within DataFieldDefault annotation\n\t\t\tif (\n\t\t\t\tmDataFieldDefaultAnnotation &&\n\t\t\t\t(mDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAction\" ||\n\t\t\t\t\tmDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\" ||\n\t\t\t\t\tmDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithAction\" ||\n\t\t\t\t\tmDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\")\n\t\t\t) {\n\t\t\t\tmProp.unsupported = true;\n\t\t\t}\n\t\t\t// no support for navigation properties and complex properties\n\t\t\tif (_startsWithNavigationProperty(sPropertyPath, aNavigationProperties) || _isComplexType(mElement)) {\n\t\t\t\tmProp.unsupported = true;\n\t\t\t}\n\t\t\treturn mProp;\n\t\t}\n\n\t\t// Convert metadata format to delegate format.\n\t\tfunction _convertMetadataToDelegateFormat(\n\t\t\tmODataEntityType: any,\n\t\t\tsEntityType: string,\n\t\t\toMetaModel: ODataMetaModel,\n\t\t\toElement: Control,\n\t\t\tsAggregationName: string\n\t\t): DelegateProperty[] {\n\t\t\tconst aProperties = [];\n\t\t\tlet sElementName = \"\";\n\t\t\tconst aNavigationProperties = [];\n\t\t\tlet mElement;\n\t\t\tfor (sElementName in mODataEntityType) {\n\t\t\t\tmElement = mODataEntityType[sElementName];\n\t\t\t\tif (mElement.$kind === \"NavigationProperty\") {\n\t\t\t\t\taNavigationProperties.push(sElementName);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (sElementName in mODataEntityType) {\n\t\t\t\tmElement = mODataEntityType[sElementName];\n\t\t\t\tif (mElement.$kind === \"Property\") {\n\t\t\t\t\tconst mPropAnnotations = oMetaModel.getObject(\"/\" + sEntityType + \"/\" + sElementName + \"@\");\n\t\t\t\t\tconst mProp = _enrichProperty(\n\t\t\t\t\t\tsElementName,\n\t\t\t\t\t\tmElement,\n\t\t\t\t\t\tmPropAnnotations,\n\t\t\t\t\t\tsEntityType,\n\t\t\t\t\t\toElement,\n\t\t\t\t\t\tsAggregationName,\n\t\t\t\t\t\taNavigationProperties\n\t\t\t\t\t);\n\t\t\t\t\taProperties.push(mProp);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn aProperties;\n\t\t}\n\n\t\t//Get binding path either from payload (if available) or the element's binding context.\n\t\tfunction _getBindingPath(oElement: Control, mPayload: any) {\n\t\t\tif (mPayload.path) {\n\t\t\t\treturn mPayload.path;\n\t\t\t}\n\t\t\tconst vBinding = oElement.getBindingContext();\n\t\t\tif (vBinding) {\n\t\t\t\tif (oElement.data(\"navigationPath\")) {\n\t\t\t\t\treturn vBinding.getPath() + \"/\" + oElement.data(\"navigationPath\");\n\t\t\t\t}\n\t\t\t\treturn vBinding.getPath();\n\t\t\t}\n\t\t}\n\n\t\t//Get all properties of the element's model.\n\t\tfunction _getODataPropertiesOfModel(oElement: Control, sAggregationName: string, mPayload: any) {\n\t\t\tconst oModel = oElement.getModel(mPayload.modelName);\n\t\t\tif (oModel) {\n\t\t\t\tif (oModel.isA(\"sap.ui.model.odata.v4.ODataModel\")) {\n\t\t\t\t\tconst oMetaModel = oModel.getMetaModel() as ODataMetaModel;\n\t\t\t\t\tconst sBindingContextPath = _getBindingPath(oElement, mPayload);\n\t\t\t\t\tif (sBindingContextPath) {\n\t\t\t\t\t\tconst oMetaModelContext = oMetaModel.getMetaContext(sBindingContextPath);\n\t\t\t\t\t\tconst oMetaModelContextObject = oMetaModelContext.getObject();\n\t\t\t\t\t\tconst mODataEntityType = oMetaModelContext.getObject(oMetaModelContextObject.$Type);\n\t\t\t\t\t\treturn _convertMetadataToDelegateFormat(\n\t\t\t\t\t\t\tmODataEntityType,\n\t\t\t\t\t\t\toMetaModelContextObject.$Type,\n\t\t\t\t\t\t\toMetaModel,\n\t\t\t\t\t\t\toElement,\n\t\t\t\t\t\t\tsAggregationName\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Promise.resolve([]);\n\t\t}\n\n\t\treturn Promise.resolve().then(function () {\n\t\t\treturn _getODataPropertiesOfModel(mPropertyBag.element, mPropertyBag.aggregationName, mPropertyBag.payload);\n\t\t});\n\t}\n};\n\nexport default Delegate;\n"],"mappings":"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"}},{"offset":{"line":13811,"column":0},"map":{"version":3,"names":["sap","ui","define","Common","DelegateUtil","JSONModel","ListBinding","Delegate","createLayout","async","mPropertyBag","_mPropertyBag$appComp","oModifier","modifier","oMetaModel","appComponent","getMetaModel","oForm","element","sEntitySet","getCustomData","sPath","startsWith","oFormContainer","parentSelector","bySelector","view","undefined","sNavigationPath","sBindingPath","oMetaModelContext","getMetaContext","oPropertyContext","createBindingContext","bindingPath","sFormId","sId","id","oParameters","sPropertyName","sValueHelpType","oControl","fnTemplateValueHelp","sFragmentName","_mPropertyBag$fieldSe","oThis","idPrefix","fieldSelector","oPreprocessorSettings","bindingContexts","entitySet","contextPath","property","this","models","metaModel","templateControlFragment","fnTemplateFormElement","oView","navigationPath","_mPropertyBag$fieldSe2","sOnChangeCustomData","sDisplayModeCustomData","_flexId","onChange","removeEscapeCharacters","displayMode","dataField","bValueHelpRequired","isValueHelpRequired","bValueHelpExists","doesValueHelpExist","oValueHelp","oField","control","valueHelp","getPropertyInfo","_isComplexType","mProperty","$Type","toLowerCase","indexOf","_startsWithNavigationProperty","sPropertyPath","aNavigationProperties","some","sNavProp","_enrichProperty","mElement","mPropertyAnnotations","sEntityType","oElement","sAggregationName","mProp","name","entityType","mDataFieldDefaultAnnotation","sLabel","Label","label","mHiddenAnnotation","hideFromReveal","$Path","_oElement$getBindingC","getBindingContext","getProperty","mFieldControlAnnotation","$EnumMember","sFieldControlPath","Path","bListBinding","getBinding","_oElement$getBindingC2","iFieldControlValue","unsupported","_convertMetadataToDelegateFormat","mODataEntityType","aProperties","sElementName","$kind","push","mPropAnnotations","getObject","_getBindingPath","mPayload","path","vBinding","data","getPath","_getODataPropertiesOfModel","oModel","getModel","modelName","isA","sBindingContextPath","oMetaModelContextObject","Promise","resolve","then","aggregationName","payload"],"sources":["FormDelegate-dbg.js"],"mappings":"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","sourceRoot":"form"}},{"offset":{"line":13816,"column":0},"map":{"version":3,"names":["FormElementBlock","defineBuildingBlock","name","publicNamespace","returnTypes","blockAttribute","type","isPublic","required","expectedTypes","expectedAnnotationTypes","blockAggregation","slot","isDefault","props","configuration","mSettings","oContextObjectPath","getInvolvedDataModelObjects","metaPath","contextPath","label","undefined","targetObject","annotations","Common","Label","toString","getFields","fields","xml","createId","getTemplate","id","key","visible","BuildingBlockBase"],"sourceRoot":"form","sources":["FormElement.block.ts"],"sourcesContent":["import type { ServiceObject } from \"@sap-ux/vocabularies-types\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAggregation, blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Building block used to create a form element based on the metadata provided by OData V4.\n *\n * @public\n * @since 1.90.0\n */\n@defineBuildingBlock({\n\tname: \"FormElement\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.ui.layout.form.FormElement\"]\n})\nexport default class FormElementBlock extends BuildingBlockBase {\n\t/**\n\t * The identifier of the FormElement building block.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true, required: true })\n\tid!: string;\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"Singleton\", \"EntityType\"]\n\t})\n\tcontextPath!: Context;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true,\n\t\texpectedTypes: [\"Property\"],\n\t\texpectedAnnotationTypes: [\n\t\t\t\"com.sap.vocabularies.UI.v1.DataField\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithUrl\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAction\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithAction\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataPointType\"\n\t\t]\n\t})\n\tmetaPath!: Context;\n\n\t/**\n\t * Label shown for the field. If not set, the label from the annotations will be shown.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tlabel?: string;\n\n\t/**\n\t * If set to false, the FormElement is not rendered.\n\t *\n\t * @public\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\tvisible?: boolean;\n\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tkey?: string;\n\n\t/**\n\t * Optional aggregation of controls that should be displayed inside the FormElement.\n\t * If not set, a default Field building block will be rendered\n\t *\n\t * @public\n\t */\n\t@blockAggregation({ type: \"sap.ui.core.Control\", slot: \"fields\", isPublic: true, isDefault: true })\n\tfields?: Control[];\n\n\tconstructor(props: PropertiesOf<FormElementBlock>, configuration: any, mSettings: any) {\n\t\tsuper(props, configuration, mSettings);\n\t\tconst oContextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\tif (this.label === undefined) {\n\t\t\tthis.label = (oContextObjectPath.targetObject as ServiceObject).annotations.Common?.Label?.toString() ?? \"\";\n\t\t}\n\t}\n\n\tgetFields() {\n\t\tif (this.fields) {\n\t\t\treturn xml`<slot name=\"fields\" />`;\n\t\t} else {\n\t\t\treturn xml`<macros:Field\n\t\t\t\t\t\tmetaPath=\"${this.metaPath}\"\n\t\t\t\t\t\tcontextPath=\"${this.contextPath}\"\n\t\t\t\t\t\tid=\"${this.createId(\"FormElementField\")}\" />`;\n\t\t}\n\t}\n\n\tgetTemplate() {\n\t\treturn xml`<f:FormElement xmlns:f=\"sap.ui.layout.form\" id=\"${this.id}\"\n\t\t\tkey=\"${this.key}\"\n\t\t\tlabel=\"${this.label}\"\n\t\t\tvisible=\"${this.visible}\">\n\t\t\t<f:fields>\n\t\t\t\t${this.getFields()}\n\t\t\t</f:fields>\n\t\t</f:FormElement>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":13995,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","MetaModelConverter","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_exports","getInvolvedDataModelObjects","xml","defineBuildingBlock","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FormElementBlock","name","publicNamespace","returnTypes","type","isPublic","required","expectedTypes","expectedAnnotationTypes","slot","isDefault","_BuildingBlockBase","props","configuration","mSettings","_this","this","oContextObjectPath","metaPath","contextPath","label","_annotations$Common","_annotations$Common$L","targetObject","annotations","Common","Label","toString","_proto","getFields","fields","createId","getTemplate","id","visible"],"sources":["FormElement.block-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,kDAAO,CAAC,+CAAgD,kDAAmD,4DAA6D,6CAA8C,SAAUC,EAAmBC,EAAsBC,EAAgCC,GAC9S,aAEA,IAAIC,EAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAQC,EAASC,EAAaC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAC/J,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAA8BnB,EAAmBmB,4BACrD,IAAIC,EAAMrB,EAA+BqB,IACzC,IAAIC,EAAsBvB,EAAqBuB,oBAC/C,IAAIC,EAAiBxB,EAAqBwB,eAC1C,IAAIC,EAAmBzB,EAAqByB,iBAC5C,SAASC,EAA2BC,EAAQC,EAAUC,EAAYC,GAAW,IAAKD,EAAY,OAAQE,OAAOC,eAAeL,EAAQC,EAAU,CAAEK,WAAYJ,EAAWI,WAAYC,aAAcL,EAAWK,aAAcC,SAAUN,EAAWM,SAAUC,MAAOP,EAAWQ,YAAcR,EAAWQ,YAAYC,KAAKR,QAAgB,GAAM,CAC3U,SAASS,EAAuBC,GAAQ,GAAIA,SAAc,EAAG,CAAE,MAAM,IAAIC,eAAe,4DAA8D,CAAE,OAAOD,CAAM,CACrK,SAASE,EAAeC,EAAUC,GAAcD,EAASE,UAAYd,OAAOe,OAAOF,EAAWC,WAAYF,EAASE,UAAUE,YAAcJ,EAAUK,EAAgBL,EAAUC,EAAa,CAC5L,SAASI,EAAgBC,EAAGC,GAAKF,EAAkBjB,OAAOoB,eAAiBpB,OAAOoB,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,SAASI,EAA0B3B,EAAQC,EAAU2B,EAAY1B,EAAYC,GAAW,IAAI0B,EAAO,CAAC,EAAGzB,OAAO0B,KAAK5B,GAAY6B,QAAQ,SAAUC,GAAOH,EAAKG,GAAO9B,EAAW8B,EAAM,GAAIH,EAAKvB,aAAeuB,EAAKvB,WAAYuB,EAAKtB,eAAiBsB,EAAKtB,aAAc,GAAI,UAAWsB,GAAQA,EAAKnB,YAAa,CAAEmB,EAAKrB,SAAW,IAAM,CAAEqB,EAAOD,EAAWK,QAAQC,UAAUC,OAAO,SAAUN,EAAMO,GAAa,OAAOA,EAAUpC,EAAQC,EAAU4B,IAASA,CAAM,EAAGA,GAAO,GAAI1B,GAAW0B,EAAKnB,mBAAqB,EAAG,CAAEmB,EAAKpB,MAAQoB,EAAKnB,YAAcmB,EAAKnB,YAAYC,KAAKR,QAAgB,EAAG0B,EAAKnB,YAAc2B,SAAW,CAAE,GAAIR,EAAKnB,mBAAqB,EAAG,CAAEN,OAAOC,eAAeL,EAAQC,EAAU4B,GAAOA,EAAO,IAAM,CAAE,OAAOA,CAAM,CACntB,SAASS,EAA0BpC,EAAYC,GAAW,MAAM,IAAIoC,MAAM,wDAA0D,gFAAkF,CACtN,IAAIC,GAOJhE,EAAOoB,EAAoB,CACzB6C,KAAM,cACNC,gBAAiB,gBACjBC,YAAa,CAAC,oCACZlE,EAAQoB,EAAe,CACzB+C,KAAM,SACNC,SAAU,KACVC,SAAU,OACRpE,EAAQmB,EAAe,CACzB+C,KAAM,uBACNC,SAAU,KACVC,SAAU,KACVC,cAAe,CAAC,YAAa,qBAAsB,YAAa,gBAC9DpE,EAAQkB,EAAe,CACzB+C,KAAM,uBACNC,SAAU,KACVC,SAAU,KACVC,cAAe,CAAC,YAChBC,wBAAyB,CAAC,uCAAwC,8CAA+C,oDAAqD,gDAAiD,+DAAgE,iDAAkD,gEAAiE,yDAA0D,8CAClcpE,EAAQiB,EAAe,CACzB+C,KAAM,SACNC,SAAU,OACRhE,EAAQgB,EAAe,CACzB+C,KAAM,UACNC,SAAU,OACR/D,EAAQe,EAAe,CACzB+C,KAAM,SACNC,SAAU,OACR9D,EAAQe,EAAiB,CAC3B8C,KAAM,sBACNK,KAAM,SACNJ,SAAU,KACVK,UAAW,OACT1E,EAAKQ,GAAUC,EAAuB,SAAUkE,GAClDpC,EAAeyB,EAAkBW,GAuCjC,SAASX,EAAiBY,EAAOC,EAAeC,GAC9C,IAAIC,EACJA,EAAQJ,EAAmBxC,KAAK6C,KAAMJ,EAAOC,EAAeC,IAAcE,KAC1EzD,EAA2BwD,EAAO,KAAMrE,EAAa0B,EAAuB2C,IAC5ExD,EAA2BwD,EAAO,cAAepE,EAAcyB,EAAuB2C,IACtFxD,EAA2BwD,EAAO,WAAYnE,EAAcwB,EAAuB2C,IACnFxD,EAA2BwD,EAAO,QAASlE,EAAcuB,EAAuB2C,IAChFxD,EAA2BwD,EAAO,UAAWjE,EAAcsB,EAAuB2C,IAClFxD,EAA2BwD,EAAO,MAAOhE,EAAcqB,EAAuB2C,IAC9ExD,EAA2BwD,EAAO,SAAU/D,EAAcoB,EAAuB2C,IACjF,MAAME,EAAqB/D,EAA4B6D,EAAMG,SAAUH,EAAMI,aAC7E,GAAIJ,EAAMK,QAAUvB,UAAW,CAC7B,IAAIwB,EAAqBC,EACzBP,EAAMK,QAAUC,EAAsBJ,EAAmBM,aAAaC,YAAYC,UAAY,MAAQJ,SAA6B,OAAS,GAAKC,EAAwBD,EAAoBK,SAAW,MAAQJ,SAA+B,OAAS,EAAIA,EAAsBK,aAAe,EACnS,CACA,OAAOZ,CACT,CACA9D,EAAW+C,EACX,IAAI4B,EAAS5B,EAAiBtB,UAC9BkD,EAAOC,UAAY,SAASA,IAC1B,GAAIb,KAAKc,OAAQ,CACf,OAAO3E,CAAG,wBACZ,KAAO,CACL,OAAOA,CAAG;kBACA6D,KAAKE;qBACFF,KAAKG;YACdH,KAAKe,SAAS,yBACpB,CACF,EACAH,EAAOI,YAAc,SAASA,IAC5B,OAAO7E,CAAG,mDAAmD6D,KAAKiB;UAC9DjB,KAAKxB;YACHwB,KAAKI;cACHJ,KAAKkB;;MAEblB,KAAKa;;mBAGP,EACA,OAAO7B,CACT,CAhF0C,CAgFxCpE,GAAqBc,EAAcyC,EAA0B1C,EAAQiC,UAAW,KAAM,CAACzC,GAAQ,CAC/F8B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXvB,EAAewC,EAA0B1C,EAAQiC,UAAW,cAAe,CAACxC,GAAQ,CACtF6B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXtB,EAAeuC,EAA0B1C,EAAQiC,UAAW,WAAY,CAACvC,GAAQ,CACnF4B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXrB,EAAesC,EAA0B1C,EAAQiC,UAAW,QAAS,CAACtC,GAAQ,CAChF2B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXpB,EAAeqC,EAA0B1C,EAAQiC,UAAW,UAAW,CAACrC,GAAQ,CAClF0B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXnB,EAAeoC,EAA0B1C,EAAQiC,UAAW,MAAO,CAACpC,GAAQ,CAC9EyB,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXlB,EAAemC,EAA0B1C,EAAQiC,UAAW,SAAU,CAACnC,GAAQ,CACjFwB,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACVzB,KAAaD,GAClBS,EAAW+C,EACX,OAAO/C,CACT,EAAG","sourceRoot":"form"}},{"offset":{"line":14010,"column":0},"map":{"version":3,"names":["FormHelper","isReferenceFacetPartOfPreview","referenceFacet","partOfPreview","toString","$Type","annotatedTerm","create$Select","semanticKeys","map","key","$PropertyPath","join","generateBindingExpression","navigationPath","binding","path","parameters","$select","JSON","stringify","getFormContainerTitleLevel","title","titleLevel","TitleLevel","H1","H2","H3","H4","H5","H6","Auto"],"sourceRoot":"form","sources":["FormHelper.ts"],"sourcesContent":["import type { PathInModelExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { TitleLevel } from \"sap/ui/core/library\";\n\n/**\n * Internally uses structure of a semantic key object\n */\ninterface SemanticKey {\n\t$PropertyPath?: string;\n}\n\n/**\n * Input parameter type for isReferenceFacetPartOfPreview\n */\ninterface ReferenceFacet {\n\t$Type?: string;\n\t\"@com.sap.vocabularies.UI.v1.PartOfPreview\"?: boolean | unknown;\n}\n\n/**\n * Helper class used by MDC controls for OData(V4) specific handling\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst FormHelper = {\n\t/**\n\t * Method that checks, if a reference facet needs to be assigned to either \"blocks\" or \"moreBlocks\" (tagged by subsection property \"partOfPreview!).\n\t *\n\t * @param referenceFacet Reference facet that needs to be assigned\n\t * @param partOfPreview Subsection property \"partOfPreview\" that needs to aligned with the reference facet's annotation \"PartOfPreview!\n\t * @param partOfPreview.toString\n\t * @returns True, if the ReferenceFacet has the same annotation as the subsection's property \"partOfPreview\"\n\t */\n\tisReferenceFacetPartOfPreview: function (referenceFacet: ReferenceFacet, partOfPreview: { toString(): string }): boolean {\n\t\tpartOfPreview = partOfPreview.toString();\n\t\tif (referenceFacet.$Type === \"com.sap.vocabularies.UI.v1.ReferenceFacet\") {\n\t\t\tconst annotatedTerm = referenceFacet[\"@com.sap.vocabularies.UI.v1.PartOfPreview\"];\n\t\t\treturn (partOfPreview === \"true\" && annotatedTerm !== false) || (partOfPreview === \"false\" && annotatedTerm === false);\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t * Creates and returns a select query with the selected fields from the parameters passed.\n\t *\n\t * @param semanticKeys SemanticKeys included in the entity set\n\t * @returns The fields to be included in the select query\n\t */\n\tcreate$Select: function (semanticKeys: SemanticKey[]) {\n\t\treturn (semanticKeys || []).map((key) => key.$PropertyPath).join(\",\");\n\t},\n\n\t/**\n\t * Generates the binding expression for the form.\n\t *\n\t * @param navigationPath The navigation path defined for the entity\n\t * @param semanticKeys SemanticKeys included in the entity set\n\t * @returns The Binding expression including path and $select query as parameter depending on the function parameters\n\t */\n\tgenerateBindingExpression: function (navigationPath?: string, semanticKeys?: SemanticKey[]) {\n\t\tif (!navigationPath && !semanticKeys) {\n\t\t\treturn \"\";\n\t\t}\n\t\tconst binding: Partial<PathInModelExpression<undefined>> = {\n\t\t\tpath: navigationPath || \"\"\n\t\t};\n\t\tif (semanticKeys) {\n\t\t\tbinding.parameters = { $select: FormHelper.create$Select(semanticKeys) };\n\t\t}\n\t\treturn JSON.stringify(binding);\n\t},\n\n\t/**\n\t * Calculates the title level for the containers in this form.\n\t *\n\t * If there is no form title, the form containers get the same header level as the form, otherwise the levels are incremented to reflect the deeper nesting.\n\t *\n\t * @param [title] The title of the form\n\t * @param [titleLevel] The title level of the form\n\t * @returns The title level of the form containers\n\t */\n\tgetFormContainerTitleLevel: function (title?: string, titleLevel?: TitleLevel): TitleLevel | undefined {\n\t\tif (!title) {\n\t\t\treturn titleLevel;\n\t\t}\n\t\tswitch (titleLevel) {\n\t\t\tcase TitleLevel.H1:\n\t\t\t\treturn TitleLevel.H2;\n\t\t\tcase TitleLevel.H2:\n\t\t\t\treturn TitleLevel.H3;\n\t\t\tcase TitleLevel.H3:\n\t\t\t\treturn TitleLevel.H4;\n\t\t\tcase TitleLevel.H4:\n\t\t\t\treturn TitleLevel.H5;\n\t\t\tcase TitleLevel.H5:\n\t\t\tcase TitleLevel.H6:\n\t\t\t\treturn TitleLevel.H6;\n\t\t\tdefault:\n\t\t\t\treturn TitleLevel.Auto;\n\t\t}\n\t}\n};\n\nexport default FormHelper;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EAkBA;AACA;AACA;AACA;AACA;AACA;EACA,MAAMA,UAAU,GAAG;IAClB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACCC,6BAA6B,EAAE,UAAUC,cAA8B,EAAEC,aAAqC,EAAW;MACxHA,aAAa,GAAGA,aAAa,CAACC,QAAQ,EAAE;MACxC,IAAIF,cAAc,CAACG,KAAK,KAAK,2CAA2C,EAAE;QACzE,MAAMC,aAAa,GAAGJ,cAAc,CAAC,2CAA2C,CAAC;QACjF,OAAQC,aAAa,KAAK,MAAM,IAAIG,aAAa,KAAK,KAAK,IAAMH,aAAa,KAAK,OAAO,IAAIG,aAAa,KAAK,KAAM;MACvH;MACA,OAAO,KAAK;IACb,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;IACCC,aAAa,EAAE,UAAUC,YAA2B,EAAE;MACrD,OAAO,CAACA,YAAY,IAAI,EAAE,EAAEC,GAAG,CAAEC,GAAG,IAAKA,GAAG,CAACC,aAAa,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;IACtE,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;IACCC,yBAAyB,EAAE,UAAUC,cAAuB,EAAEN,YAA4B,EAAE;MAC3F,IAAI,CAACM,cAAc,IAAI,CAACN,YAAY,EAAE;QACrC,OAAO,EAAE;MACV;MACA,MAAMO,OAAkD,GAAG;QAC1DC,IAAI,EAAEF,cAAc,IAAI;MACzB,CAAC;MACD,IAAIN,YAAY,EAAE;QACjBO,OAAO,CAACE,UAAU,GAAG;UAAEC,OAAO,EAAElB,UAAU,CAACO,aAAa,CAACC,YAAY;QAAE,CAAC;MACzE;MACA,OAAOW,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC;IAC/B,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCM,0BAA0B,EAAE,UAAUC,KAAc,EAAEC,UAAuB,EAA0B;MACtG,IAAI,CAACD,KAAK,EAAE;QACX,OAAOC,UAAU;MAClB;MACA,QAAQA,UAAU;QACjB,KAAKC,UAAU,CAACC,EAAE;UACjB,OAAOD,UAAU,CAACE,EAAE;QACrB,KAAKF,UAAU,CAACE,EAAE;UACjB,OAAOF,UAAU,CAACG,EAAE;QACrB,KAAKH,UAAU,CAACG,EAAE;UACjB,OAAOH,UAAU,CAACI,EAAE;QACrB,KAAKJ,UAAU,CAACI,EAAE;UACjB,OAAOJ,UAAU,CAACK,EAAE;QACrB,KAAKL,UAAU,CAACK,EAAE;QAClB,KAAKL,UAAU,CAACM,EAAE;UACjB,OAAON,UAAU,CAACM,EAAE;QACrB;UACC,OAAON,UAAU,CAACO,IAAI;MAAC;IAE1B;EACD,CAAC;EAAC,OAEa/B,UAAU;AAAA"}},{"offset":{"line":14103,"column":0},"map":{"version":3,"names":["sap","ui","define","library","TitleLevel","FormHelper","isReferenceFacetPartOfPreview","referenceFacet","partOfPreview","toString","$Type","annotatedTerm","create$Select","semanticKeys","map","key","$PropertyPath","join","generateBindingExpression","navigationPath","binding","path","parameters","$select","JSON","stringify","getFormContainerTitleLevel","title","titleLevel","H1","H2","H3","H4","H5","H6","Auto"],"sources":["FormHelper-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,2CAAO,CAAC,uBAAwB,SAAUC,GAC/C,aAEA,IAAIC,EAAaD,EAAQC,WAOzB,MAAMC,EAAa,CASjBC,8BAA+B,SAAUC,EAAgBC,GACvDA,EAAgBA,EAAcC,WAC9B,GAAIF,EAAeG,QAAU,4CAA6C,CACxE,MAAMC,EAAgBJ,EAAe,6CACrC,OAAOC,IAAkB,QAAUG,IAAkB,OAASH,IAAkB,SAAWG,IAAkB,KAC/G,CACA,OAAO,KACT,EAOAC,cAAe,SAAUC,GACvB,OAAQA,GAAgB,IAAIC,IAAIC,GAAOA,EAAIC,eAAeC,KAAK,IACjE,EAQAC,0BAA2B,SAAUC,EAAgBN,GACnD,IAAKM,IAAmBN,EAAc,CACpC,MAAO,EACT,CACA,MAAMO,EAAU,CACdC,KAAMF,GAAkB,IAE1B,GAAIN,EAAc,CAChBO,EAAQE,WAAa,CACnBC,QAASlB,EAAWO,cAAcC,GAEtC,CACA,OAAOW,KAAKC,UAAUL,EACxB,EAUAM,2BAA4B,SAAUC,EAAOC,GAC3C,IAAKD,EAAO,CACV,OAAOC,CACT,CACA,OAAQA,GACN,KAAKxB,EAAWyB,GACd,OAAOzB,EAAW0B,GACpB,KAAK1B,EAAW0B,GACd,OAAO1B,EAAW2B,GACpB,KAAK3B,EAAW2B,GACd,OAAO3B,EAAW4B,GACpB,KAAK5B,EAAW4B,GACd,OAAO5B,EAAW6B,GACpB,KAAK7B,EAAW6B,GAChB,KAAK7B,EAAW8B,GACd,OAAO9B,EAAW8B,GACpB,QACE,OAAO9B,EAAW+B,KAExB,GAEF,OAAO9B,CACT,EAAG","sourceRoot":"form"}},{"offset":{"line":14108,"column":0},"map":{"version":3,"names":["CustomFragmentBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","getTemplate","fragmentInstanceName","fragmentName","replace","xml","id","BuildingBlockBase"],"sourceRoot":"fpm","sources":["CustomFragment.block.ts"],"sourcesContent":["import BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport Context from \"sap/ui/model/Context\";\n\n/**\n * Content of a custom fragment\n *\n * @private\n * @experimental\n */\n@defineBuildingBlock({\n\tname: \"CustomFragment\",\n\tnamespace: \"sap.fe.macros.fpm\"\n})\nexport default class CustomFragmentBlock extends BuildingBlockBase {\n\t/**\n\t * ID of the custom fragment\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic id!: string;\n\n\t/**\n\t * Context Path\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: false })\n\tpublic contextPath?: Context;\n\n\t/**\n\t *  Name of the custom fragment\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic fragmentName!: string;\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string\n\t */\n\tgetTemplate() {\n\t\tconst fragmentInstanceName = this.fragmentName + \"-JS\".replace(/\\//g, \".\");\n\n\t\treturn xml`<core:Fragment\n\t\t\txmlns:compo=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.xmlcomposite/1\"\n\t\t\tfragmentName=\"${fragmentInstanceName}\"\n\t\t\tid=\"${this.id}\"\n\t\t\ttype=\"CUSTOM\"\n\t\t>\n\t\t\t<compo:fragmentContent>\n\t\t\t\t<core:FragmentDefinition>\n\t\t\t\t\t<core:Fragment fragmentName=\"${this.fragmentName}\" type=\"XML\" />\n\t\t\t\t</core:FragmentDefinition>\n\t\t\t</compo:fragmentContent>\n\t\t</core:Fragment>`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;MAeqBA,mBAAmB;EAVxC;AACA;AACA;AACA;AACA;AACA;EALA,OAMCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,gBAAgB;IACtBC,SAAS,EAAE;EACZ,CAAC,CAAC,UAKAC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAMlDF,cAAc,CAAC;IAAEC,IAAI,EAAE,sBAAsB;IAAEC,QAAQ,EAAE;EAAM,CAAC,CAAC,UAMjEF,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAGnD;AACD;AACA;AACA;AACA;IAJC,OAKAC,WAAW,GAAX,uBAAc;MACb,MAAMC,oBAAoB,GAAG,IAAI,CAACC,YAAY,GAAG,KAAK,CAACC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;MAE1E,OAAOC,GAAI;AACb;AACA,mBAAmBH,oBAAqB;AACxC,SAAS,IAAI,CAACI,EAAG;AACjB;AACA;AACA;AACA;AACA,oCAAoC,IAAI,CAACH,YAAa;AACtD;AACA;AACA,mBAAmB;IAClB,CAAC;IAAA;EAAA,EAvC+CI,iBAAiB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":14200,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_descriptor3","_exports","xml","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","CustomFragmentBlock","name","namespace","type","required","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","_proto","getTemplate","fragmentInstanceName","fragmentName","replace","id"],"sources":["CustomFragment.block-dbg.js"],"mappings":"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","sourceRoot":"fpm"}},{"offset":{"line":14216,"column":0},"map":{"version":3,"names":["getMeasures","innerChart","measures","map","measure","name","getLabel","value","getName","getDimensions","dimensions","dimension","getTextProperty","getFeeds","vizFeeds","getAggregation","feeds","feed","getProperty","feedValue","label","feedType","type","uid","values","flat","filter","getChartProperties","getVizProperties"],"sourceRoot":"insights","sources":["AnalyticalInsightsHelper.ts"],"sourcesContent":["import type { default as InnerChart } from \"sap/chart/Chart\";\nimport type Dimension from \"sap/chart/data/Dimension\";\nimport type Measure from \"sap/chart/data/Measure\";\nimport type { ChartPropertyType, DimensionType, FeedType, MeasureType } from \"sap/ui/integration/widgets/Card\";\nimport type Control from \"sap/ui/mdc/Control\";\n\ntype VizFrame = {\n\tgetVizProperties: Function;\n\tgetFeeds: Function;\n};\n\nexport type InnerChartType = InnerChart & { getBindingInfo: Function; getAggregation: Function };\n\n/**\n * Get measures of the chart.\n *\n * @param innerChart\n * @returns Measures of the chart.\n */\nexport function getMeasures(innerChart: InnerChartType): MeasureType[] {\n\tlet measures: MeasureType[] = [];\n\tmeasures = innerChart.getMeasures().map((measure: Measure) => {\n\t\treturn {\n\t\t\tname: measure.getLabel(),\n\t\t\tvalue: \"{\" + measure.getName() + \"}\"\n\t\t};\n\t});\n\treturn measures;\n}\n\n/**\n * Get dimensions of the chart.\n *\n * @param innerChart\n * @returns Dimensions of the chart.\n */\nexport function getDimensions(innerChart: InnerChartType): DimensionType[] {\n\tlet dimensions: DimensionType[] = [];\n\tdimensions = innerChart.getDimensions().map((dimension: Dimension) => {\n\t\tif (dimension.getTextProperty()) {\n\t\t\treturn {\n\t\t\t\tname: dimension.getLabel(),\n\t\t\t\tvalue: \"{\" + dimension.getTextProperty() + \"}\"\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tname: dimension.getLabel(),\n\t\t\t\tvalue: \"{\" + dimension.getName() + \"}\"\n\t\t\t};\n\t\t}\n\t});\n\treturn dimensions;\n}\n\n/**\n * Get feeds of the chart.\n *\n * @param innerChart\n * @returns Feeds of the chart.\n */\nexport function getFeeds(innerChart: InnerChartType): FeedType[] {\n\tconst vizFeeds = (innerChart.getAggregation(\"_vizFrame\") as VizFrame).getFeeds() as Control[];\n\tconst feeds: FeedType[][] = vizFeeds.map((feed: Control) => {\n\t\treturn (feed.getProperty(\"values\") as Control[]).map((feedValue: Control) => {\n\t\t\tconst label = getLabel(innerChart, feedValue.getProperty(\"name\") as string, feedValue.getProperty(\"type\") as string);\n\t\t\tconst feedType: FeedType = {\n\t\t\t\ttype: feed.getProperty(\"type\") as string,\n\t\t\t\tuid: feed.getProperty(\"uid\") as string,\n\t\t\t\tvalues: [label] as string[]\n\t\t\t};\n\t\t\treturn feedType;\n\t\t});\n\t});\n\treturn feeds.flat();\n}\n\n/**\n * Get measure label or dimension label of the chart.\n *\n * @param innerChart\n * @param name\n * @param type\n * @returns Measure label or Dimension label of the chart.\n */\n\nexport function getLabel(innerChart: InnerChartType, name: string, type: string): string {\n\tlet label: string;\n\tconst measures = innerChart.getMeasures();\n\tconst dimensions = innerChart.getDimensions();\n\tif (type === \"Dimension\") {\n\t\tlabel =\n\t\t\tdimensions\n\t\t\t\t.filter((dimension: Dimension) => {\n\t\t\t\t\treturn dimension.getName() === name;\n\t\t\t\t})[0]\n\t\t\t\t.getLabel() || name;\n\t} else {\n\t\tlabel =\n\t\t\tmeasures\n\t\t\t\t.filter((measure: Measure) => {\n\t\t\t\t\treturn measure.getName() === name;\n\t\t\t\t})[0]\n\t\t\t\t.getLabel() || name;\n\t}\n\treturn label;\n}\n\n/**\n * Get chart properties.\n *\n * @param innerChart\n * @returns Chart properties.\n */\n\nexport function getChartProperties(innerChart: InnerChartType): ChartPropertyType {\n\treturn (innerChart.getAggregation(\"_vizFrame\") as VizFrame).getVizProperties() as ChartPropertyType;\n}\n"],"mappings":"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"}},{"offset":{"line":14327,"column":0},"map":{"version":3,"names":["sap","ui","define","_exports","getMeasures","innerChart","measures","map","measure","name","getLabel","value","getName","getDimensions","dimensions","dimension","getTextProperty","getFeeds","vizFeeds","getAggregation","feeds","feed","getProperty","feedValue","label","feedType","type","uid","values","flat","filter","getChartProperties","getVizProperties"],"sources":["AnalyticalInsightsHelper-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,6DAAO,GAAI,WAChB,aAEA,IAAIC,EAAW,CAAC,EAOhB,SAASC,EAAYC,GACnB,IAAIC,EAAW,GACfA,EAAWD,EAAWD,cAAcG,IAAIC,IAC/B,CACLC,KAAMD,EAAQE,WACdC,MAAO,IAAMH,EAAQI,UAAY,OAGrC,OAAON,CACT,CAQAH,EAASC,YAAcA,EACvB,SAASS,EAAcR,GACrB,IAAIS,EAAa,GACjBA,EAAaT,EAAWQ,gBAAgBN,IAAIQ,IAC1C,GAAIA,EAAUC,kBAAmB,CAC/B,MAAO,CACLP,KAAMM,EAAUL,WAChBC,MAAO,IAAMI,EAAUC,kBAAoB,IAE/C,KAAO,CACL,MAAO,CACLP,KAAMM,EAAUL,WAChBC,MAAO,IAAMI,EAAUH,UAAY,IAEvC,IAEF,OAAOE,CACT,CAQAX,EAASU,cAAgBA,EACzB,SAASI,EAASZ,GAChB,MAAMa,EAAWb,EAAWc,eAAe,aAAaF,WACxD,MAAMG,EAAQF,EAASX,IAAIc,GAClBA,EAAKC,YAAY,UAAUf,IAAIgB,IACpC,MAAMC,EAAQd,EAASL,EAAYkB,EAAUD,YAAY,QAASC,EAAUD,YAAY,SACxF,MAAMG,EAAW,CACfC,KAAML,EAAKC,YAAY,QACvBK,IAAKN,EAAKC,YAAY,OACtBM,OAAQ,CAACJ,IAEX,OAAOC,CAAQ,IAGnB,OAAOL,EAAMS,MACf,CAUA1B,EAASc,SAAWA,EACpB,SAASP,EAASL,EAAYI,EAAMiB,GAClC,IAAIF,EACJ,MAAMlB,EAAWD,EAAWD,cAC5B,MAAMU,EAAaT,EAAWQ,gBAC9B,GAAIa,IAAS,YAAa,CACxBF,EAAQV,EAAWgB,OAAOf,GACjBA,EAAUH,YAAcH,GAC9B,GAAGC,YAAcD,CACtB,KAAO,CACLe,EAAQlB,EAASwB,OAAOtB,GACfA,EAAQI,YAAcH,GAC5B,GAAGC,YAAcD,CACtB,CACA,OAAOe,CACT,CAQArB,EAASO,SAAWA,EACpB,SAASqB,EAAmB1B,GAC1B,OAAOA,EAAWc,eAAe,aAAaa,kBAChD,CACA7B,EAAS4B,mBAAqBA,EAC9B,OAAO5B,CACT,EAAG","sourceRoot":"insights"}},{"offset":{"line":14332,"column":0},"map":{"version":3,"names":["isInsightsCardCreationPossible","control","insightsRelevantColumns","filterBar","Core","byId","getFilter","controlState","StateUtil","retrieveExternalState","isSemanticDateFilterApplied","isControlLevelFilterApplied","undefined","getParent","filter","controlLevelFilterKeys","Object","keys","key","controlStateFilter","Array","isArray","length","Error","getInsightsRelevantColumns","tableAPI","table","content","visibleColumns","getColumns","supportedColumnNames","metaModel","getModel","getMetaModel","metaPath","data","getTableDefinition","columns","forEach","column","isInsightsSupported","push","name","includes","getDataProperty","map","supportedColumn","dataProperty","propertyContext","getContext","dataModel","getInvolvedDataModelObjects","propertyTargetObject","targetObject","uomBinding","getUomBinding","columnText","getTextArrangementForColumn","visible","label","getProperty","createInsightsParams","controlAPI","cardType","filterbarID","isCardCreationSupported","showErrorMessageForInsightsCard","getResourceModel","entitySetPath","IntegrationCardType","appComponent","CommonUtils","getAppComponent","appManifest","getManifestEntry","serviceUrl","getServiceUrl","queryUrl","insightsParams","type","requestParameters","groupBy","cardTitle","parentAppId","id","parameters","getHeader","getRowBinding","getDownloadUrl","groupProperty","groupLevels","groupPropertyName","split","property","chart","innerChart","getControlDelegate","getInnerChart","chartContent","legendVisible","chartType","getChartType","measures","getMeasures","dimensions","getDimensions","feeds","getFeeds","allowedChartTypes","getAvailableChartTypes","available","chartProperties","getChartProperties","getBindingInfo","binding","propertyParts","navigationPath","pop","join","text","annotations","Common","Text","textArrangement","UI","TextArrangement","valueOf","propertyBinding","pathInModel","columnBindingValue","textBinding","getExpressionFromAnnotation","concat","compileExpression","uom","Measures","ISOCurrency","Unit"],"sourceRoot":"insights","sources":["CommonInsightsHelper.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport type { ISOCurrency, Unit } from \"@sap-ux/vocabularies-types/vocabularies/Measures\";\nimport type { default as Chart } from \"sap/chart/Chart\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { BindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { compileExpression, concat, getExpressionFromAnnotation, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type { AllowedChartType, InsightsCardColumnsType } from \"sap/insights/CardHelper\";\nimport Core from \"sap/ui/core/Core\";\nimport StateUtil from \"sap/ui/mdc/p13n/StateUtil\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type MetaModel from \"sap/ui/model/MetaModel\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type ChartAPI from \"../chart/ChartAPI\";\nimport type FilterBarAPI from \"../filterBar/FilterBarAPI\";\nimport type TableAPI from \"../table/TableAPI\";\nimport type { InnerChartType } from \"./AnalyticalInsightsHelper\";\nimport { getChartProperties, getDimensions, getFeeds, getMeasures } from \"./AnalyticalInsightsHelper\";\nimport type { ChartContentType, InsightsParamsType } from \"./InsightsCardHelper\";\nimport { IntegrationCardType, showErrorMessageForInsightsCard } from \"./InsightsCardHelper\";\n\ntype GroupLevel = {\n\tname: string;\n};\ntype ControlDelegate = {\n\tgetInnerChart: Function;\n};\ntype DataBinding = {\n\tbinding: ODataListBinding;\n};\ntype ChartType = Chart & { getFilter: Function; getControlDelegate: Function; getHeader: Function; getLegendVisible: Function };\n\n/**\n * Checks if the insights card creation is possible.\n *\n * @param control\n * @param insightsRelevantColumns\n * @returns True if the insights card can be created.\n */\nasync function isInsightsCardCreationPossible(control: Table | ChartType, insightsRelevantColumns?: InsightsCardColumnsType[]) {\n\ttry {\n\t\tconst filterBar = Core.byId((control as Table).getFilter());\n\t\tconst controlState = (await StateUtil.retrieveExternalState(control)) as Record<string, Object | undefined>;\n\t\tlet isSemanticDateFilterApplied = false;\n\t\tlet isControlLevelFilterApplied = false;\n\t\tif (filterBar !== undefined) {\n\t\t\tisSemanticDateFilterApplied = (filterBar.getParent() as FilterBarAPI).isSemanticDateFilterApplied();\n\t\t}\n\n\t\tif (controlState.filter) {\n\t\t\tconst controlLevelFilterKeys = Object.keys(controlState.filter);\n\t\t\tfor (const key of controlLevelFilterKeys) {\n\t\t\t\tconst controlStateFilter = controlState.filter[key as keyof Object];\n\t\t\t\tif (Array.isArray(controlStateFilter) && controlStateFilter.length) {\n\t\t\t\t\tisControlLevelFilterApplied = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tisControlLevelFilterApplied ||\n\t\t\tisSemanticDateFilterApplied ||\n\t\t\t(insightsRelevantColumns ? insightsRelevantColumns.length === 0 : false)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} catch {\n\t\tthrow Error(\"Error retrieving control states\");\n\t}\n}\n\n/**\n * Filters the columns that can be shown on the insights card from the visible columns on the table.\n *\n * @param tableAPI\n * @returns A list of columns that can be shown on the insightsCard.\n */\nexport function getInsightsRelevantColumns(tableAPI: TableAPI) {\n\tconst table = tableAPI.content as Table;\n\tconst visibleColumns = table.getColumns();\n\tconst supportedColumnNames: string[] = [];\n\tconst metaModel: MetaModel | undefined = table.getModel()?.getMetaModel();\n\tconst metaPath = table.data(\"metaPath\") as string;\n\ttableAPI.getTableDefinition().columns.forEach(function (column) {\n\t\tif (column.isInsightsSupported === true) {\n\t\t\tsupportedColumnNames.push(column.name);\n\t\t}\n\t});\n\n\treturn visibleColumns\n\t\t.filter(function (column) {\n\t\t\treturn supportedColumnNames.includes(column.getDataProperty());\n\t\t})\n\t\t.map(function (supportedColumn) {\n\t\t\tconst dataProperty: string = supportedColumn.getDataProperty(),\n\t\t\t\tpropertyContext = metaModel?.getContext(metaPath + \"/\" + dataProperty) as Context,\n\t\t\t\tdataModel = getInvolvedDataModelObjects(propertyContext),\n\t\t\t\tpropertyTargetObject = dataModel.targetObject as Property,\n\t\t\t\tuomBinding = getUomBinding(propertyTargetObject, dataProperty),\n\t\t\t\tcolumnText = uomBinding ? uomBinding : getTextArrangementForColumn(propertyTargetObject, dataProperty);\n\t\t\treturn {\n\t\t\t\tvisible: false,\n\t\t\t\tname: columnText,\n\t\t\t\tlabel: supportedColumn.getProperty(\"header\") as string\n\t\t\t};\n\t\t});\n}\n\n/**\n * Constructs the insights parameters from the table that is required to create the insights card.\n *\n * @param controlAPI\n * @param cardType\n * @param insightsRelevantColumns\n * @returns The insights parameters from the table.\n */\nexport async function createInsightsParams(\n\tcontrolAPI: TableAPI | ChartAPI,\n\tcardType: IntegrationCardType,\n\tinsightsRelevantColumns?: InsightsCardColumnsType[]\n) {\n\tlet controlState;\n\tconst control = controlAPI.content;\n\tconst filterbarID = (control as Table).getFilter() !== \"\" ? (control as Table).getFilter() : undefined;\n\tconst isCardCreationSupported = await isInsightsCardCreationPossible(control as Table, insightsRelevantColumns);\n\tif (!isCardCreationSupported) {\n\t\tshowErrorMessageForInsightsCard(cardType, getResourceModel(controlAPI));\n\t\treturn;\n\t}\n\ttry {\n\t\tcontrolState = (await StateUtil.retrieveExternalState(control)) as Record<string, Object>;\n\t} catch {\n\t\tthrow Error(\"Error retrieving control states\");\n\t}\n\n\tconst entitySetPath =\n\t\tcardType === IntegrationCardType.table ? (control.data(\"metaPath\") as string) : (control.data(\"targetCollectionPath\") as string);\n\tconst appComponent = CommonUtils.getAppComponent(control);\n\tconst appManifest = appComponent.getManifestEntry(\"sap.app\");\n\tconst serviceUrl = (control.getModel() as ODataModel).getServiceUrl();\n\tlet queryUrl = \"\";\n\tconst insightsParams: InsightsParamsType = {\n\t\tappComponent: appComponent,\n\t\ttype: cardType,\n\t\trequestParameters: {\n\t\t\tserviceUrl: \"\",\n\t\t\tqueryUrl: \"\",\n\t\t\tgroupBy: undefined\n\t\t},\n\t\tcontent: {\n\t\t\tcardTitle: \"\",\n\t\t\tinsightsRelevantColumns: []\n\t\t},\n\t\tparentAppId: appManifest.id,\n\t\tparameters: {\n\t\t\tfilterbarID: filterbarID\n\t\t},\n\t\tentitySetPath: entitySetPath\n\t};\n\n\tif (cardType === IntegrationCardType.table) {\n\t\tinsightsParams.content = {\n\t\t\tcardTitle: (control as Table).getHeader(),\n\t\t\tinsightsRelevantColumns: insightsRelevantColumns ?? []\n\t\t};\n\t\tqueryUrl = ((control as Table).getRowBinding() as ODataListBinding).getDownloadUrl();\n\n\t\tinsightsParams.content.cardTitle = (control as Table).getHeader();\n\t\tinsightsParams.parentAppId = appManifest.id;\n\t\tconst groupProperty =\n\t\t\tArray.isArray(controlState.groupLevels) && controlState.groupLevels.length\n\t\t\t\t? (controlState.groupLevels[0] as GroupLevel).name\n\t\t\t\t: undefined;\n\t\tif (groupProperty !== undefined) {\n\t\t\tconst groupPropertyName = groupProperty.includes(\"::\") ? groupProperty.split(\"::\")[1] : groupProperty;\n\t\t\tinsightsParams.requestParameters.groupBy = {\n\t\t\t\tproperty: groupPropertyName\n\t\t\t};\n\t\t}\n\t} else {\n\t\tconst chart = control as unknown as ChartType;\n\t\tconst innerChart: InnerChartType = (chart.getControlDelegate() as ControlDelegate).getInnerChart(chart) as InnerChartType;\n\n\t\tconst chartContent: ChartContentType = {\n\t\t\tcardTitle: chart.getHeader() as string,\n\t\t\tlegendVisible: false,\n\t\t\tchartType: chart.getChartType(),\n\t\t\tmeasures: getMeasures(innerChart),\n\t\t\tdimensions: getDimensions(innerChart),\n\t\t\tfeeds: getFeeds(innerChart),\n\t\t\tallowedChartTypes: (innerChart.getAvailableChartTypes() as AllowedChartType).available,\n\t\t\tchartProperties: getChartProperties(innerChart)\n\t\t};\n\n\t\tinsightsParams.content = chartContent;\n\n\t\tqueryUrl = (innerChart.getBindingInfo(\"data\") as DataBinding).binding.getDownloadUrl();\n\t}\n\n\tinsightsParams.requestParameters.serviceUrl = serviceUrl;\n\tinsightsParams.requestParameters.queryUrl = queryUrl.includes(serviceUrl) ? queryUrl.split(serviceUrl)[1] : queryUrl;\n\n\treturn insightsParams;\n}\n\nfunction getTextArrangementForColumn(propertyTargetObject: Property, property: string) {\n\tconst propertyParts = property.split(\"/\");\n\tlet navigationPath;\n\tif (propertyParts.length > 1) {\n\t\tpropertyParts.pop();\n\t\tnavigationPath = propertyParts.join();\n\t}\n\tconst text = propertyTargetObject.annotations.Common?.Text;\n\tconst textArrangement = text?.annotations?.UI?.TextArrangement?.valueOf() as string;\n\n\tconst propertyBinding = pathInModel(property);\n\tlet columnBindingValue;\n\tif (text) {\n\t\tconst textBinding = getExpressionFromAnnotation(text, navigationPath ? [navigationPath] : []) as BindingToolkitExpression<string>;\n\t\tif (textArrangement === \"UI.TextArrangementType/TextLast\") {\n\t\t\tcolumnBindingValue = concat(propertyBinding, \" (\", textBinding, \")\");\n\t\t} else if (textArrangement === \"UI.TextArrangementType/TextOnly\") {\n\t\t\tcolumnBindingValue = textBinding;\n\t\t} else if (textArrangement === \"UI.TextArrangementType/TextSeparate\") {\n\t\t\tcolumnBindingValue = propertyBinding;\n\t\t} else {\n\t\t\tcolumnBindingValue = concat(textBinding, \" (\", propertyBinding, \")\");\n\t\t}\n\t} else {\n\t\tcolumnBindingValue = propertyBinding;\n\t}\n\treturn compileExpression(columnBindingValue);\n}\n\nfunction getUomBinding(propertyTargetObject: Property, property: string) {\n\tconst uom: ISOCurrency | Unit | undefined =\n\t\tpropertyTargetObject.annotations.Measures?.ISOCurrency || propertyTargetObject.annotations.Measures?.Unit;\n\tif (!uom) {\n\t\treturn;\n\t} else {\n\t\tconst propertyBinding = pathInModel(property);\n\t\treturn compileExpression(concat(propertyBinding, \" \", getExpressionFromAnnotation(uom) as BindingToolkitExpression<string>));\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":14544,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","MetaModelConverter","BindingToolkit","ResourceModelHelper","Core","StateUtil","AnalyticalInsightsHelper","InsightsCardHelper","_exports","showErrorMessageForInsightsCard","IntegrationCardType","getMeasures","getFeeds","getDimensions","getChartProperties","getResourceModel","pathInModel","getExpressionFromAnnotation","concat","compileExpression","getInvolvedDataModelObjects","async","isInsightsCardCreationPossible","control","insightsRelevantColumns","filterBar","byId","getFilter","controlState","retrieveExternalState","isSemanticDateFilterApplied","isControlLevelFilterApplied","undefined","getParent","filter","controlLevelFilterKeys","Object","keys","key","controlStateFilter","Array","isArray","length","Error","getInsightsRelevantColumns","tableAPI","_table$getModel","table","content","visibleColumns","getColumns","supportedColumnNames","metaModel","getModel","getMetaModel","metaPath","data","getTableDefinition","columns","forEach","column","isInsightsSupported","push","name","includes","getDataProperty","map","supportedColumn","dataProperty","propertyContext","getContext","dataModel","propertyTargetObject","targetObject","uomBinding","getUomBinding","columnText","getTextArrangementForColumn","visible","label","getProperty","createInsightsParams","controlAPI","cardType","filterbarID","isCardCreationSupported","entitySetPath","appComponent","getAppComponent","appManifest","getManifestEntry","serviceUrl","getServiceUrl","queryUrl","insightsParams","type","requestParameters","groupBy","cardTitle","parentAppId","id","parameters","getHeader","getRowBinding","getDownloadUrl","groupProperty","groupLevels","groupPropertyName","split","property","chart","innerChart","getControlDelegate","getInnerChart","chartContent","legendVisible","chartType","getChartType","measures","dimensions","feeds","allowedChartTypes","getAvailableChartTypes","available","chartProperties","getBindingInfo","binding","_propertyTargetObject","_text$annotations","_text$annotations$UI","_text$annotations$UI$","propertyParts","navigationPath","pop","join","text","annotations","Common","Text","textArrangement","UI","TextArrangement","valueOf","propertyBinding","columnBindingValue","textBinding","_propertyTargetObject2","_propertyTargetObject3","uom","Measures","ISOCurrency","Unit"],"sources":["CommonInsightsHelper-dbg.js"],"mappings":"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","sourceRoot":"insights"}},{"offset":{"line":14549,"column":0},"map":{"version":3,"names":["IntegrationCardType","MAX_TABLE_RECORDS","tableContentTopQuery","getColumnsToShow","selectedColumns","cardColumns","forEach","column","push","title","label","value","name","visible","getCardContent","insightsParams","columns","content","insightsRelevantColumns","cardContent","data","path","maxItems","row","actions","type","parameters","requestParameters","groupBy","groupConditionName","property","groupDescending","descending","group","order","dir","getChartCardContent","chartType","chartProperties","dimensions","measures","feeds","actionableArea","getCardData","queryUrl","table","request","url","serviceUrl","method","headers","batch","response","Accept","getCardHeader","cardHeader","cardTitle","status","text","getActionObject","appComponent","shellServiceHelper","getShellServices","hash","getHash","parsedHash","parseShellHash","navigationService","getNavigationService","actionParams","ibnTarget","semanticObject","action","ibnParams","sensitiveProps","nhHybridIAppStateKey","getIAppStateKey","JSON","stringify","getCardConfigParameters","filterbarID","entitySetPath","cardConfigParams","state","_relevantODataFilters","_relevantODataParameters","_mandatoryODataFilters","_mandatoryODataParameters","_entitySet","filterBarState","StateUtil","retrieveExternalState","Core","byId","undefined","filters","filter","filterProp","Object","keys","filterPropSV","SelectionVariant","newFilterObject","filterConditions","CommonUtils","addExternalStateFiltersToSelectionVariant","getSelectOptionsPropertyNames","length","reconstructedSV","id","getID","Parameters","SelectOptions","PropertyName","Ranges","getSelectOption","getCardConfig","cardConfiguration","destinations","service","defaultUrl","csrfTokens","token1","getIntegrationCardManifest","cardConfig","configuration","header","analytical","extension","getManifestSapInsights","ui5Version","VersionInfo","load","manifestParams","parentAppId","cardType","versions","ui5","version","buildTimestamp","filterEntitySet","allowedChartTypes","createCardManifest","appManifest","getManifestEntry","ui5Manifest","defaultModel","models","dataSourceService","dataSource","insightsCardManifest","sapAppId","Date","now","dataSources","filterService","showInsightsCardPreview","cardHelperInstance","CardHelper","getServiceAsync","card","showCardPreview","e","genericErrorMessageForInsightsCard","Log","error","showErrorMessageForInsightsCard","controlType","resourceModel","headerText","getText","contentText","footerText","formattedTextString","MessageBox","onClose","Error","details","scope","ResourceModelHelper","getResourceModel"],"sourceRoot":"insights","sources":["InsightsCardHelper.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\n\nimport * as ResourceModelHelper from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport SelectionVariant from \"sap/fe/navigation/SelectionVariant\";\nimport type {\n\tAllowedChartTypes,\n\tCardConfigParamsType,\n\tCardHelperInstanceType,\n\tInsightsCardColumnsType,\n\tInsightsCardManifest,\n\tInsightsManifestType\n} from \"sap/insights/CardHelper\";\nimport CardHelper from \"sap/insights/CardHelper\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport type Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport type {\n\tActionParamsType,\n\tCardConfigType,\n\tCardConfigurationType,\n\tCardContentType,\n\tCardDataType,\n\tCardHeaderType,\n\tChartCardContentType,\n\tChartPropertyType,\n\tDimensionType,\n\tFeedType,\n\tIntegrationCardColumnsType,\n\tMeasureType\n} from \"sap/ui/integration/widgets/Card\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport type FilterBar from \"sap/ui/mdc/FilterBar\";\nimport StateUtil from \"sap/ui/mdc/p13n/StateUtil\";\nimport VersionInfo from \"sap/ui/VersionInfo\";\nimport type { ParsedHashType } from \"sap/ushell\";\n\nexport enum IntegrationCardType {\n\ttable = \"Table\",\n\tanalytical = \"Analytical\"\n}\n\nexport type InsightRequestParameters = {\n\t// all parameters related to request for the data\n\tserviceUrl: string;\n\tqueryUrl: string;\n\tgroupBy?: GroupByType;\n};\n\nexport type GroupByType = {\n\tproperty: string;\n\tdescending?: boolean;\n};\n\nexport type TableContentType = {\n\tcardTitle: string;\n\tinsightsRelevantColumns: InsightsCardColumnsType[];\n};\n\nexport type ParameterType = {\n\tfilterbarID?: string; // Filterbar ID\n\tsensitiveProperties?: [string];\n};\n\nexport type ChartContentType = {\n\tcardTitle: string;\n\tdimensions: DimensionType[];\n\tmeasures: MeasureType[];\n\tfeeds: FeedType[];\n\tchartType: string;\n\tlegendVisible: boolean;\n\tallowedChartTypes: AllowedChartTypes[];\n\tchartProperties: ChartPropertyType;\n};\n\nexport type InsightsParamsType = {\n\tappComponent: AppComponent;\n\ttype: IntegrationCardType;\n\trequestParameters: InsightRequestParameters;\n\tcontent: TableContentType | ChartContentType;\n\tparentAppId: string;\n\tparameters: ParameterType;\n\tentitySetPath: string;\n};\n\nconst MAX_TABLE_RECORDS = 15;\nconst tableContentTopQuery = `$top=${MAX_TABLE_RECORDS}`;\n\n/**\n * Constructs an array of columns in the format expected by the insights card.\n *\n * @param selectedColumns\n * @returns The card columns that are to be displayed on the insights card.\n */\nfunction getColumnsToShow(selectedColumns: InsightsCardColumnsType[]): IntegrationCardColumnsType[] {\n\tconst cardColumns: IntegrationCardColumnsType[] = [];\n\tselectedColumns.forEach(function (column: InsightsCardColumnsType) {\n\t\tcardColumns.push({\n\t\t\ttitle: column.label,\n\t\t\tvalue: column.name,\n\t\t\tvisible: column.visible\n\t\t});\n\t});\n\treturn cardColumns;\n}\n\n/**\n * Constructs the card content for the insights card.\n * Includes the configuration of a navigation action and the creation of bindings to read the data from the response of the back end.\n *\n * @param insightsParams\n * @returns The card content for the insights card.\n */\nfunction getCardContent(insightsParams: InsightsParamsType): CardContentType {\n\tconst columns = getColumnsToShow((insightsParams.content as TableContentType).insightsRelevantColumns);\n\tconst cardContent: CardContentType = {\n\t\tdata: {\n\t\t\tpath: \"/response/value\"\n\t\t},\n\t\tmaxItems: 15,\n\t\trow: {\n\t\t\tcolumns: columns,\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"Navigation\",\n\t\t\t\t\tparameters: \"{= extension.formatters.getNavigationContext(${parameters>/state/value}, ${})}\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t};\n\tif (insightsParams.requestParameters.groupBy) {\n\t\tconst groupConditionName = insightsParams.requestParameters.groupBy.property;\n\t\tconst groupDescending = insightsParams.requestParameters.groupBy.descending;\n\t\tcardContent.group = {\n\t\t\ttitle: \"{\" + groupConditionName + \"}\",\n\t\t\torder: {\n\t\t\t\tpath: groupConditionName,\n\t\t\t\tdir: groupDescending === true ? \"DESC\" : \"ASC\"\n\t\t\t}\n\t\t};\n\t}\n\treturn cardContent;\n}\n\n/**\n * Creates the chart card content for the insights card.\n *\n * @param insightsParams\n * @returns The chart card content\n */\nfunction getChartCardContent(insightsParams: InsightsParamsType): ChartCardContentType {\n\treturn {\n\t\tchartType: (insightsParams.content as ChartContentType).chartType,\n\t\tchartProperties: (insightsParams.content as ChartContentType).chartProperties as unknown as ChartPropertyType,\n\t\tdata: { path: \"/response/value\" },\n\t\tdimensions: (insightsParams.content as ChartContentType).dimensions,\n\t\tmeasures: (insightsParams.content as ChartContentType).measures,\n\t\tfeeds: (insightsParams.content as ChartContentType).feeds,\n\t\tactions: [\n\t\t\t{\n\t\t\t\ttype: \"Navigation\",\n\t\t\t\tparameters: \"{= extension.formatters.getNavigationContext(${parameters>/state/value}, ${})}\"\n\t\t\t}\n\t\t],\n\t\tactionableArea: \"Chart\"\n\t};\n}\n\n/**\n * Constructs the request object to fetch data for the insights card.\n *\n * @param insightsParams\n * @returns The request data for the insights card.\n */\nfunction getCardData(insightsParams: InsightsParamsType): CardDataType {\n\tlet queryUrl = insightsParams.requestParameters.queryUrl;\n\t// fetch only the first 15 records\n\tqueryUrl = insightsParams.type === IntegrationCardType.table ? `${queryUrl}&${tableContentTopQuery}` : queryUrl;\n\treturn {\n\t\trequest: {\n\t\t\turl: \"{{destinations.service}}\" + insightsParams.requestParameters.serviceUrl + \"$batch\",\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"X-CSRF-Token\": \"{{csrfTokens.token1}}\"\n\t\t\t},\n\t\t\tbatch: {\n\t\t\t\tresponse: {\n\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\turl: queryUrl,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAccept: \"application/json\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Constructs the card header for the insights card.\n * Includes the status to be shown and the navigation action to be configured on the insights card.\n *\n * @param insightsParams\n * @returns The card header\n */\nfunction getCardHeader(insightsParams: InsightsParamsType): CardHeaderType {\n\tconst cardHeader: CardHeaderType = {\n\t\ttitle: (insightsParams.content as TableContentType).cardTitle,\n\t\tactions: [\n\t\t\t{\n\t\t\t\ttype: \"Navigation\",\n\t\t\t\tparameters: \"{= extension.formatters.getNavigationContext(${parameters>/state/value})}\"\n\t\t\t}\n\t\t]\n\t};\n\tif (insightsParams.type === IntegrationCardType.table) {\n\t\tcardHeader.status = {\n\t\t\ttext: \"{/response/@odata.count}\" // number of records on LR received as part of the request\n\t\t};\n\t}\n\treturn cardHeader;\n}\n\n/**\n * Construct the action object that is required by the insights card.\n * This is used to configure the navigation from the card to the source application.\n *\n * @param appComponent\n * @returns The action object\n */\nfunction getActionObject(appComponent: AppComponent): string {\n\tconst shellServiceHelper = appComponent.getShellServices();\n\tconst hash = shellServiceHelper.getHash();\n\tconst parsedHash = shellServiceHelper.parseShellHash(hash) as ParsedHashType;\n\tconst navigationService = appComponent.getNavigationService();\n\tconst actionParams: ActionParamsType = {\n\t\tparameters: {\n\t\t\tibnTarget: {\n\t\t\t\tsemanticObject: parsedHash.semanticObject,\n\t\t\t\taction: parsedHash.action\n\t\t\t},\n\t\t\tibnParams: {\n\t\t\t\tsensitiveProps: [],\n\t\t\t\tnhHybridIAppStateKey: navigationService.getIAppStateKey()\n\t\t\t}\n\t\t}\n\t};\n\treturn JSON.stringify(actionParams);\n}\n\n/**\n * Construct the card configuration parameters required by the insights card.\n * This includes filters, parameters, sensitive properties and the action object for the navigation.\n *\n * @param filters The record of filters\n * @param appComponent Application component\n * @param entitySetPath Entity set path\n * @returns The card configuration parameters\n */\nasync function getCardConfigParameters(\n\tfilterbarID: string | undefined,\n\tappComponent: AppComponent,\n\tentitySetPath: string\n): Promise<CardConfigParamsType> {\n\tconst cardConfigParams: CardConfigParamsType = {\n\t\tstate: {\n\t\t\tvalue: getActionObject(appComponent)\n\t\t},\n\t\t_relevantODataFilters: {\n\t\t\tvalue: [] as string[]\n\t\t},\n\t\t_relevantODataParameters: {\n\t\t\tvalue: [] as string[]\n\t\t},\n\t\t_mandatoryODataFilters: {\n\t\t\tvalue: [] as string[]\n\t\t},\n\t\t_mandatoryODataParameters: {\n\t\t\tvalue: [] as string[]\n\t\t},\n\t\tsensitiveProps: [] as string[],\n\t\t_entitySet: {\n\t\t\tvalue: entitySetPath\n\t\t}\n\t};\n\n\tconst filterBarState = filterbarID\n\t\t? ((await StateUtil.retrieveExternalState(Core.byId(filterbarID) as FilterBar)) as Record<string, Object>)\n\t\t: undefined;\n\tconst filters = filterBarState?.filter as Record<string, ConditionObject[]>;\n\tif (filters !== undefined) {\n\t\tfor (const filterProp of Object.keys(filters)) {\n\t\t\tlet filterPropSV = new SelectionVariant();\n\t\t\tconst newFilterObject = {\n\t\t\t\tfilterConditions: {\n\t\t\t\t\t[filterProp]: filters[filterProp]\n\t\t\t\t}\n\t\t\t};\n\t\t\tfilterPropSV = CommonUtils.addExternalStateFiltersToSelectionVariant(\n\t\t\t\tfilterPropSV,\n\t\t\t\tnewFilterObject as { filterConditions: Record<string, ConditionObject[]> },\n\t\t\t\tCore.byId(filterbarID) as FilterBar,\n\t\t\t\tundefined\n\t\t\t);\n\t\t\tif (filterPropSV.getSelectOptionsPropertyNames().length) {\n\t\t\t\t// add to insights only if filters exist\n\t\t\t\tconst reconstructedSV = {\n\t\t\t\t\tid: filterPropSV.getID(),\n\t\t\t\t\tParameters: [],\n\t\t\t\t\tSelectOptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tPropertyName: filterProp,\n\t\t\t\t\t\t\tRanges: filterPropSV.getSelectOption(filterProp)\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t\tcardConfigParams[filterProp] = {\n\t\t\t\t\tvalue: JSON.stringify(reconstructedSV),\n\t\t\t\t\ttype: \"string\"\n\t\t\t\t};\n\t\t\t\tcardConfigParams._relevantODataFilters.value.push(filterProp);\n\t\t\t}\n\t\t}\n\t}\n\treturn cardConfigParams;\n}\n\n/**\n * Construct the card configuration for the insights card.\n *\n * @param insightsParams\n * @returns The card configuration for the insights card.\n */\nasync function getCardConfig(insightsParams: InsightsParamsType): Promise<CardConfigurationType> {\n\tconst cardConfiguration: CardConfigurationType = {};\n\tconst serviceUrl = insightsParams.requestParameters.serviceUrl;\n\tcardConfiguration.destinations = { service: { name: \"(default)\", defaultUrl: \"/\" } };\n\tcardConfiguration.csrfTokens = {\n\t\ttoken1: {\n\t\t\tdata: {\n\t\t\t\trequest: {\n\t\t\t\t\turl: serviceUrl,\n\t\t\t\t\tmethod: \"HEAD\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"X-CSRF-Token\": \"Fetch\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tconst filterbarID = insightsParams.parameters.filterbarID;\n\tconst cardConfigParams = await getCardConfigParameters(filterbarID, insightsParams.appComponent, insightsParams.entitySetPath);\n\tcardConfiguration.parameters = cardConfigParams;\n\treturn cardConfiguration;\n}\n\n/**\n * Construct the manifest entry for sap.card namespace of the insights card.\n *\n * @param insightsParams\n * @returns The card manifest entry for the sap.card namespace\n */\nasync function getIntegrationCardManifest(insightsParams: InsightsParamsType): Promise<CardConfigType> {\n\tconst cardConfig: CardConfigType = {\n\t\ttype: insightsParams.type\n\t};\n\tcardConfig.configuration = await getCardConfig(insightsParams);\n\tcardConfig.header = getCardHeader(insightsParams);\n\tcardConfig.data = getCardData(insightsParams);\n\tif (insightsParams.type === IntegrationCardType.analytical) {\n\t\tcardConfig.content = getChartCardContent(insightsParams);\n\t} else {\n\t\tcardConfig.content = getCardContent(insightsParams);\n\t}\n\tcardConfig.extension = \"module:sap/insights/CardExtension\";\n\treturn cardConfig;\n}\n\n/**\n * Construct the manifest entry for sap.insights namespace of the insights card.\n *\n * @param insightsParams\n * @returns The card manifest entry for the sap.insights namespace\n */\nasync function getManifestSapInsights(insightsParams: InsightsParamsType): Promise<InsightsManifestType> {\n\tconst ui5Version = await VersionInfo.load();\n\tconst manifestParams: InsightsManifestType = {\n\t\tparentAppId: insightsParams.parentAppId,\n\t\tcardType: \"RT\",\n\t\tversions: {\n\t\t\tui5: ui5Version.version + \"-\" + ui5Version.buildTimestamp\n\t\t},\n\t\tfilterEntitySet: insightsParams.entitySetPath\n\t};\n\tif (insightsParams.type === IntegrationCardType.analytical) {\n\t\tmanifestParams.allowedChartTypes = (insightsParams.content as ChartContentType).allowedChartTypes;\n\t}\n\treturn manifestParams;\n}\n/**\n * Creates the card manifest for the insights card.\n *\n * @param insightsParams\n * @returns The insights card\n */\nexport async function createCardManifest(insightsParams: InsightsParamsType): Promise<InsightsCardManifest> {\n\tconst appComponent = insightsParams.appComponent,\n\t\tappManifest = { ...appComponent.getManifestEntry(\"sap.app\") },\n\t\tui5Manifest = { ...appComponent.getManifestEntry(\"sap.ui5\") };\n\tconst defaultModel = ui5Manifest.models[\"\"];\n\tconst dataSourceService = defaultModel.dataSource ? defaultModel.dataSource : \"\";\n\tconst insightsCardManifest: InsightsCardManifest = {};\n\tconst sapAppId = `user.${appManifest.id}.${Date.now()}`;\n\tappManifest.id = sapAppId;\n\tappManifest.type = \"card\";\n\tappManifest.dataSources.filterService = { ...appManifest.dataSources[dataSourceService] };\n\tinsightsCardManifest[\"sap.app\"] = appManifest;\n\tinsightsCardManifest[\"sap.card\"] = await getIntegrationCardManifest(insightsParams);\n\tinsightsCardManifest[\"sap.insights\"] = await getManifestSapInsights(insightsParams);\n\treturn insightsCardManifest;\n}\n\n/**\n * Create the manifest of the insights card and show a preview of the card that is created.\n *\n * @param insightsParams\n */\nexport async function showInsightsCardPreview(insightsParams: InsightsParamsType) {\n\ttry {\n\t\tconst cardHelperInstance = (await CardHelper.getServiceAsync(\"UIService\")) as CardHelperInstanceType;\n\t\tconst card: InsightsCardManifest = await createCardManifest(insightsParams);\n\t\tcardHelperInstance.showCardPreview(card, true);\n\t} catch (e) {\n\t\tgenericErrorMessageForInsightsCard(insightsParams.appComponent);\n\t\tLog.error(\"Card creation failed\");\n\t}\n}\n\n/**\n * Display a message box for the scenarios where the insights card cannot be created.\n *\n * @param controlType\n * @param resourceModel\n */\nexport function showErrorMessageForInsightsCard(controlType: IntegrationCardType, resourceModel: ResourceModel) {\n\tconst headerText = `<strong>\n\t\t${resourceModel.getText(\"M_CARD_POSSIBLE_CAUSES\")}\n\t\t</strong>`;\n\tlet contentText = \"\";\n\tconst footerText = `${resourceModel.getText(\"M_CARD_FOOTER_INFO\")}`;\n\tif (controlType === IntegrationCardType.table) {\n\t\tcontentText = `<ul><li>\n\t\t\t${resourceModel.getText(\"M_CARD_FAILURE_REASON_DATE_RANGE_FILTERS\")}\n\t\t\t</li><li>\n\t\t\t${resourceModel.getText(\"M_CARD_FAILURE_TABLE_REASON_TABLE_LEVEL_FILTERS\")}\n\t\t\t</li><li>\n\t\t\t${resourceModel.getText(\"M_CARD_FAILURE_TABLE_REASON_UNSUPPORTED_COLUMNS\")}\n\t\t\t</li></ul>`;\n\t} else {\n\t\tcontentText = `<ul><li>\n\t\t\t${resourceModel.getText(\"M_CARD_FAILURE_REASON_DATE_RANGE_FILTERS\")}\n\t\t\t</li><li>\n\t\t\t${resourceModel.getText(\"M_CARD_FAILURE_CHART_REASON_CHART_LEVEL_FILTERS\")}\n\t\t\t</li></ul>`;\n\t}\n\tconst formattedTextString = headerText + contentText + footerText;\n\tMessageBox.error(resourceModel.getText(\"M_CARD_CREATION_FAILURE\"), {\n\t\tonClose: function () {\n\t\t\tthrow new Error(\"Insights is not supported\");\n\t\t},\n\t\tdetails: formattedTextString\n\t});\n}\n\nexport function genericErrorMessageForInsightsCard(scope: AppComponent | Control) {\n\tconst resourceModel = ResourceModelHelper.getResourceModel(scope);\n\tMessageBox.error(resourceModel.getText(\"M_CARD_FAILURE_GENERIC\"));\n}\n"],"mappings":"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"}},{"offset":{"line":14955,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","ResourceModelHelper","SelectionVariant","CardHelper","MessageBox","Core","StateUtil","VersionInfo","_exports","IntegrationCardType","MAX_TABLE_RECORDS","tableContentTopQuery","getColumnsToShow","selectedColumns","cardColumns","forEach","column","push","title","label","value","name","visible","getCardContent","insightsParams","columns","content","insightsRelevantColumns","cardContent","data","path","maxItems","row","actions","type","parameters","requestParameters","groupBy","groupConditionName","property","groupDescending","descending","group","order","dir","getChartCardContent","chartType","chartProperties","dimensions","measures","feeds","actionableArea","getCardData","queryUrl","table","request","url","serviceUrl","method","headers","batch","response","Accept","getCardHeader","cardHeader","cardTitle","status","text","getActionObject","appComponent","shellServiceHelper","getShellServices","hash","getHash","parsedHash","parseShellHash","navigationService","getNavigationService","actionParams","ibnTarget","semanticObject","action","ibnParams","sensitiveProps","nhHybridIAppStateKey","getIAppStateKey","JSON","stringify","async","getCardConfigParameters","filterbarID","entitySetPath","cardConfigParams","state","_relevantODataFilters","_relevantODataParameters","_mandatoryODataFilters","_mandatoryODataParameters","_entitySet","filterBarState","retrieveExternalState","byId","undefined","filters","filter","filterProp","Object","keys","filterPropSV","newFilterObject","filterConditions","addExternalStateFiltersToSelectionVariant","getSelectOptionsPropertyNames","length","reconstructedSV","id","getID","Parameters","SelectOptions","PropertyName","Ranges","getSelectOption","getCardConfig","cardConfiguration","destinations","service","defaultUrl","csrfTokens","token1","getIntegrationCardManifest","cardConfig","configuration","header","analytical","extension","getManifestSapInsights","ui5Version","load","manifestParams","parentAppId","cardType","versions","ui5","version","buildTimestamp","filterEntitySet","allowedChartTypes","createCardManifest","appManifest","getManifestEntry","ui5Manifest","defaultModel","models","dataSourceService","dataSource","insightsCardManifest","sapAppId","Date","now","dataSources","filterService","showInsightsCardPreview","cardHelperInstance","getServiceAsync","card","showCardPreview","e","genericErrorMessageForInsightsCard","error","showErrorMessageForInsightsCard","controlType","resourceModel","headerText","getText","contentText","footerText","formattedTextString","onClose","Error","details","scope","getResourceModel"],"sources":["InsightsCardHelper-dbg.js"],"mappings":"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","sourceRoot":"insights"}},{"offset":{"line":14960,"column":0},"map":{"version":3,"names":["ActionCommandBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","blockEvent","getTemplate","execute","enabled","action","onExecuteAction","isActionEnabled","undefined","onExecuteIBN","isIBNEnabled","onExecuteManifest","xml","visible","command","BuildingBlockBase"],"sourceRoot":"internal","sources":["ActionCommand.block.ts"],"sourcesContent":["import BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport type { ConverterAction } from \"sap/fe/core/converters/controls/Common/Action\";\n/**\n * Content of an action command\n *\n * @private\n * @experimental\n */\n@defineBuildingBlock({\n\tname: \"ActionCommand\",\n\tnamespace: \"sap.fe.macros.internal\"\n})\nexport default class ActionCommandBlock extends BuildingBlockBase {\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic id!: string;\n\n\t@blockAttribute({ type: \"object\", required: true })\n\tpublic action!: ConverterAction;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic isActionEnabled?: boolean;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic isIBNEnabled?: boolean;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic visible?: boolean;\n\n\t@blockEvent()\n\tonExecuteAction?: string;\n\n\t@blockEvent()\n\tonExecuteIBN?: string;\n\n\t@blockEvent()\n\tonExecuteManifest?: string;\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string\n\t */\n\tgetTemplate() {\n\t\tlet execute;\n\t\tlet enabled;\n\t\tswitch (this.action.type) {\n\t\t\tcase \"ForAction\":\n\t\t\t\texecute = this.onExecuteAction;\n\t\t\t\tenabled = this.isActionEnabled !== undefined ? this.isActionEnabled : this.action.enabled;\n\t\t\t\tbreak;\n\t\t\tcase \"ForNavigation\":\n\t\t\t\texecute = this.onExecuteIBN;\n\t\t\t\tenabled = this.isIBNEnabled !== undefined ? this.isIBNEnabled : this.action.enabled;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\texecute = this.onExecuteManifest;\n\t\t\t\tenabled = this.action.enabled;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn xml`\n\t\t<control:CommandExecution\n\t\t\txmlns:control=\"sap.fe.core.controls\"\n\t\t\tcore:require=\"{FPM: 'sap/fe/core/helpers/FPMHelper'}\"\n\t\t\texecute=\"${execute}\"\n\t\t\tenabled=\"${enabled}\"\n\t\t\tvisible=\"${this.visible !== undefined ? this.visible : this.action.visible}\"\n\t\t\tcommand=\"${this.action.command}\"\n\t\t/>`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;MAcqBA,kBAAkB;EAVvC;AACA;AACA;AACA;AACA;AACA;EALA,OAMCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,eAAe;IACrBC,SAAS,EAAE;EACZ,CAAC,CAAC,UAEAC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAGlDF,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAGlDF,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAGnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAGnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAGnCE,UAAU,EAAE,UAGZA,UAAU,EAAE,UAGZA,UAAU,EAAE;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAGb;AACD;AACA;AACA;AACA;IAJC,OAKAC,WAAW,GAAX,uBAAc;MACb,IAAIC,OAAO;MACX,IAAIC,OAAO;MACX,QAAQ,IAAI,CAACC,MAAM,CAACN,IAAI;QACvB,KAAK,WAAW;UACfI,OAAO,GAAG,IAAI,CAACG,eAAe;UAC9BF,OAAO,GAAG,IAAI,CAACG,eAAe,KAAKC,SAAS,GAAG,IAAI,CAACD,eAAe,GAAG,IAAI,CAACF,MAAM,CAACD,OAAO;UACzF;QACD,KAAK,eAAe;UACnBD,OAAO,GAAG,IAAI,CAACM,YAAY;UAC3BL,OAAO,GAAG,IAAI,CAACM,YAAY,KAAKF,SAAS,GAAG,IAAI,CAACE,YAAY,GAAG,IAAI,CAACL,MAAM,CAACD,OAAO;UACnF;QACD;UACCD,OAAO,GAAG,IAAI,CAACQ,iBAAiB;UAChCP,OAAO,GAAG,IAAI,CAACC,MAAM,CAACD,OAAO;UAC7B;MAAM;MAER,OAAOQ,GAAI;AACb;AACA;AACA;AACA,cAAcT,OAAQ;AACtB,cAAcC,OAAQ;AACtB,cAAc,IAAI,CAACS,OAAO,KAAKL,SAAS,GAAG,IAAI,CAACK,OAAO,GAAG,IAAI,CAACR,MAAM,CAACQ,OAAQ;AAC9E,cAAc,IAAI,CAACR,MAAM,CAACS,OAAQ;AAClC,KAAK;IACJ,CAAC;IAAA;EAAA,EAxD8CC,iBAAiB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":15098,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_exports","xml","defineBuildingBlock","blockEvent","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ActionCommandBlock","name","namespace","type","required","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","_proto","getTemplate","execute","enabled","action","onExecuteAction","isActionEnabled","onExecuteIBN","isIBNEnabled","onExecuteManifest","visible","command"],"sources":["ActionCommand.block-dbg.js"],"mappings":"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","sourceRoot":"internal"}},{"offset":{"line":15111,"column":0},"map":{"version":3,"names":["DataPointBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","validate","formatOptionsInput","dataPointStyle","includes","Error","displayMode","iconSize","measureDisplayMode","expectedTypes","getTemplatingObjects","context","internalDataModelPath","getInvolvedDataModelObjects","metaPath","contextPath","internalValueDataModelPath","visible","getVisibleExpression","targetObject","Value","path","enhanceDataModelPath","internalDataPointConverted","convertMetaModelContext","dataModelPath","valueDataModelPath","dataPointConverted","getDataPointVisualization","properties","Visualization","visualization","valueProperty","hasQuickView","isUsedInNavigationWithQuickViewFacets","getPropertyWithSemanticObject","isProperty","hasUnit","hasCurrency","getRatingIndicatorTemplate","dataPointTarget","targetValue","getTargetValueBinding","dataPointValue","propertyType","$target","numberOfFractionalDigits","ValueFormat","NumberOfFractionalDigits","value","getValueFormatted","text","getHeaderRatingIndicatorText","headerLabel","targetLabel","targetLabelExpression","compileExpression","formatResult","pathInModel","getExpressionFromAnnotation","getRelativePaths","TargetValue","formatOptions","showLabels","xml","attr","SampleSize","Description","idPrefix","generate","undefined","getTooltipValue","getProgressIndicatorTemplate","criticalityColorExpression","buildExpressionForCriticalityColor","displayValue","buildExpressionForProgressIndicatorDisplayValue","percentValue","buildExpressionForProgressIndicatorPercentValue","firstLabel","secondLabel","secondLabelExpression","annotations","Common","Label","notEqual","getObjectNumberCommonTemplate","emptyIndicatorMode","showEmptyIndicator","objectStatusNumber","buildFieldBindingExpression","unit","UIFormatters","getBindingForUnitOrCurrency","getObjectNumberTemplate","isAnalytics","hasValidAnalyticalCurrencyOrUnit","getObjectStatusDependentsTemplate","getObjectStatusTemplate","objectStatusText","iconExpression","buildExpressionForCriticalityIcon","ariaLabelledBy","QuickInfo","valueOf","getTemplate","BuildingBlockBase"],"sourceRoot":"internal","sources":["DataPoint.block.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport type { SemanticObject } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { DataPointType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { convertMetaModelContext, getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { compileExpression, formatResult, getExpressionFromAnnotation, notEqual, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isProperty } from \"sap/fe/core/helpers/TypeGuards\";\nimport { buildExpressionForCriticalityColor, buildExpressionForCriticalityIcon } from \"sap/fe/core/templating/CriticalityFormatters\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { enhanceDataModelPath, getRelativePaths } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { hasCurrency, hasUnit } from \"sap/fe/core/templating/PropertyHelper\";\nimport type { DisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport * as UIFormatters from \"sap/fe/core/templating/UIFormatters\";\nimport {\n\tgetPropertyWithSemanticObject,\n\tgetVisibleExpression,\n\tisUsedInNavigationWithQuickViewFacets\n} from \"sap/fe/macros/field/FieldTemplating\";\nimport {\n\tbuildExpressionForProgressIndicatorDisplayValue,\n\tbuildExpressionForProgressIndicatorPercentValue,\n\tbuildFieldBindingExpression,\n\tgetHeaderRatingIndicatorText,\n\tgetValueFormatted\n} from \"sap/fe/macros/internal/helpers/DataPointTemplating\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\ntype DataPointFormatOptions = Partial<{\n\tdataPointStyle: \"\" | \"large\";\n\tdisplayMode: DisplayMode;\n\t/**\n\t * Define the size of the icons (For RatingIndicator only)\n\t */\n\ticonSize: \"1rem\" | \"1.375rem\" | \"2rem\";\n\tisAnalytics: boolean;\n\tmeasureDisplayMode: string;\n\t/**\n\t * If set to 'true', SAP Fiori elements shows an empty indicator in display mode for the ObjectNumber\n\t */\n\tshowEmptyIndicator: boolean;\n\t/**\n\t * When true, displays the labels for the Rating and Progress indicators\n\t */\n\tshowLabels: boolean;\n}>;\nexport type DataPointProperties = {\n\tmetaPath: Context;\n\teditMode?: string;\n\tcontextPath: Context;\n\tformatOptions: DataPointFormatOptions;\n\tidPrefix?: string;\n\t// computed properties\n\tcriticalityColorExpression?: string;\n\tdisplayValue?: string;\n\temptyIndicatorMode?: \"On\";\n\thasQuickView?: boolean;\n\tobjectStatusNumber?: string;\n\tpercentValue?: string;\n\tsemanticObject?: string | SemanticObject;\n\tsemanticObjects?: string;\n\ttargetLabel?: string;\n\tunit?: string;\n\tvisible?: string;\n\tvisualization?: string;\n\tobjectStatusText?: string;\n\ticonExpression?: string;\n};\n\n@defineBuildingBlock({\n\tname: \"DataPoint\",\n\tnamespace: \"sap.fe.macros.internal\"\n})\nexport default class DataPointBlock extends BuildingBlockBase {\n\t/**\n\t * Prefix added to the generated ID of the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic idPrefix?: string;\n\n\t/**\n\t * Metadata path to the dataPoint.\n\t * This property is usually a metadataContext pointing to a DataPoint having\n\t * $Type = \"com.sap.vocabularies.UI.v1.DataPointType\"\n\t */\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true\n\t})\n\tpublic metaPath!: Context;\n\n\t/**\n\t * Property added to associate the label with the DataPoint\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic ariaLabelledBy?: string;\n\n\t/**\n\t * Property to set the visualization type\n\t */\n\tprivate visualization!: string;\n\n\t/**\n\t * Property to set the visibility\n\t */\n\tprivate visible!: string;\n\n\t/**\n\t * Property to set property if the porperty has a Quickview\n\t */\n\tprivate hasQuickView!: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"object\",\n\t\tvalidate: function (formatOptionsInput: DataPointFormatOptions) {\n\t\t\tif (formatOptionsInput?.dataPointStyle && ![\"\", \"large\"].includes(formatOptionsInput?.dataPointStyle)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.dataPointStyle} for dataPointStyle does not match`);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformatOptionsInput?.displayMode &&\n\t\t\t\t![\"Value\", \"Description\", \"ValueDescription\", \"DescriptionValue\"].includes(formatOptionsInput?.displayMode)\n\t\t\t) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.displayMode} for displayMode does not match`);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput?.iconSize && ![\"1rem\", \"1.375rem\", \"2rem\"].includes(formatOptionsInput?.iconSize)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.iconSize} for iconSize does not match`);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput?.measureDisplayMode && ![\"Hidden\", \"ReadOnly\"].includes(formatOptionsInput?.measureDisplayMode)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.measureDisplayMode} for measureDisplayMode does not match`);\n\t\t\t}\n\n\t\t\treturn formatOptionsInput;\n\t\t}\n\t})\n\tpublic formatOptions: DataPointFormatOptions = {};\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tpublic contextPath!: Context;\n\n\t/**\n\t * Retrieves the templating objects to further process the DataPoint.\n\t *\n\t * @param context DataPointProperties or a DataPoint\n\t * @returns The models containing infos like the DataModelPath, ValueDataModelPath and DataPointConverted\n\t */\n\tprivate static getTemplatingObjects(context: DataPointProperties | DataPointBlock): {\n\t\tdataModelPath: DataModelObjectPath;\n\t\tvalueDataModelPath: DataModelObjectPath | undefined;\n\t\tdataPointConverted: DataPointType;\n\t} {\n\t\tconst internalDataModelPath = getInvolvedDataModelObjects(context.metaPath, context.contextPath);\n\t\tlet internalValueDataModelPath;\n\t\t(context as DataPointProperties).visible = getVisibleExpression(internalDataModelPath);\n\t\tif (internalDataModelPath?.targetObject?.Value?.path) {\n\t\t\tinternalValueDataModelPath = enhanceDataModelPath(internalDataModelPath, internalDataModelPath.targetObject.Value.path);\n\t\t}\n\t\tconst internalDataPointConverted = convertMetaModelContext(context.metaPath);\n\n\t\treturn {\n\t\t\tdataModelPath: internalDataModelPath,\n\t\t\tvalueDataModelPath: internalValueDataModelPath,\n\t\t\tdataPointConverted: internalDataPointConverted\n\t\t};\n\t}\n\n\t/**\n\t * Function that calculates the visualization type for this DataPoint.\n\t *\n\t * @param properties The datapoint properties\n\t * @returns The DataPointProperties with the optimized coding for the visualization type\n\t */\n\tprivate static getDataPointVisualization(properties: DataPointProperties): DataPointProperties {\n\t\tconst { dataModelPath, valueDataModelPath, dataPointConverted } = DataPointBlock.getTemplatingObjects(properties);\n\t\tif (dataPointConverted?.Visualization === \"UI.VisualizationType/Rating\") {\n\t\t\tproperties.visualization = \"Rating\";\n\t\t\treturn properties;\n\t\t}\n\t\tif (dataPointConverted?.Visualization === \"UI.VisualizationType/Progress\") {\n\t\t\tproperties.visualization = \"Progress\";\n\t\t\treturn properties;\n\t\t}\n\t\tconst valueProperty = valueDataModelPath && valueDataModelPath.targetObject;\n\t\t//check whether the visualization type should be an object number in case one of the if conditions met\n\t\tproperties.hasQuickView = valueProperty && isUsedInNavigationWithQuickViewFacets(dataModelPath, valueProperty);\n\t\tif (getPropertyWithSemanticObject(valueDataModelPath as DataModelObjectPath)) {\n\t\t\tproperties.hasQuickView = true;\n\t\t}\n\t\tif (!properties.hasQuickView) {\n\t\t\tif (isProperty(valueProperty) && (hasUnit(valueProperty) || hasCurrency(valueProperty))) {\n\t\t\t\t// we only show an objectNumber if there is no quickview and a unit or a currency\n\t\t\t\tproperties.visualization = \"ObjectNumber\";\n\t\t\t\treturn properties;\n\t\t\t}\n\t\t}\n\n\t\t//default case to handle this as objectStatus type\n\t\tproperties.visualization = \"ObjectStatus\";\n\t\treturn properties;\n\t}\n\n\t/**\n\t * Constructor method of the building block.\n\t *\n\t * @param properties The datapoint properties\n\t */\n\tconstructor(properties: DataPointProperties) {\n\t\t//setup initial default property settings\n\t\tproperties.hasQuickView = false;\n\n\t\tsuper(DataPointBlock.getDataPointVisualization(properties));\n\t}\n\n\t/**\n\t * The building block template for the rating indicator part.\n\t *\n\t * @returns An XML-based string with the definition of the rating indicator template\n\t */\n\tgetRatingIndicatorTemplate() {\n\t\tconst { dataModelPath, valueDataModelPath, dataPointConverted } = DataPointBlock.getTemplatingObjects(this);\n\t\tconst dataPointTarget = dataModelPath.targetObject;\n\t\tconst targetValue = this.getTargetValueBinding();\n\n\t\tconst dataPointValue = dataPointTarget?.Value || \"\";\n\t\tconst propertyType = dataPointValue?.$target?.type;\n\n\t\tlet numberOfFractionalDigits;\n\t\tif (propertyType === \"Edm.Decimal\" && dataPointTarget.ValueFormat) {\n\t\t\tif (dataPointTarget.ValueFormat.NumberOfFractionalDigits) {\n\t\t\t\tnumberOfFractionalDigits = dataPointTarget.ValueFormat.NumberOfFractionalDigits;\n\t\t\t}\n\t\t}\n\n\t\tconst value = getValueFormatted(valueDataModelPath as DataModelObjectPath, dataPointValue, propertyType, numberOfFractionalDigits);\n\n\t\tconst text = getHeaderRatingIndicatorText(this.metaPath, dataPointTarget);\n\n\t\tlet headerLabel = \"\";\n\t\tlet targetLabel = \"\";\n\n\t\tconst targetLabelExpression = compileExpression(\n\t\t\tformatResult(\n\t\t\t\t[\n\t\t\t\t\tpathInModel(\"T_HEADER_RATING_INDICATOR_FOOTER\", \"sap.fe.i18n\"),\n\t\t\t\t\tgetExpressionFromAnnotation(dataPointConverted.Value, getRelativePaths(dataModelPath)),\n\t\t\t\t\tdataPointConverted.TargetValue\n\t\t\t\t\t\t? getExpressionFromAnnotation(dataPointConverted.TargetValue, getRelativePaths(dataModelPath))\n\t\t\t\t\t\t: \"5\"\n\t\t\t\t],\n\t\t\t\t\"MESSAGE\"\n\t\t\t)\n\t\t);\n\n\t\tif (this.formatOptions.showLabels ?? false) {\n\t\t\theaderLabel = xml`<Label xmlns=\"sap.m\"\n\t\t\t\t\t${this.attr(\"text\", text)}\n\t\t\t\t\t${this.attr(\"visible\", dataPointTarget.SampleSize || dataPointTarget.Description ? true : false)}\n\t\t\t\t/>`;\n\n\t\t\ttargetLabel = xml`<Label\n\t\t\txmlns=\"sap.m\"\n\t\t\tcore:require=\"{MESSAGE: 'sap/base/strings/formatMessage' }\"\n\t\t\t${this.attr(\"text\", targetLabelExpression)}\n\t\t\tvisible=\"true\" />`;\n\t\t}\n\n\t\treturn xml`\n\t\t${headerLabel}\n\t\t<RatingIndicator\n\t\txmlns=\"sap.m\"\n\n\t\t${this.attr(\"id\", this.idPrefix ? generate([this.idPrefix, \"RatingIndicator-Field-display\"]) : undefined)}\n\t\t${this.attr(\"maxValue\", targetValue)}\n\t\t${this.attr(\"value\", value)}\n\t\t${this.attr(\"tooltip\", this.getTooltipValue())}\n\t\t${this.attr(\"iconSize\", this.formatOptions.iconSize)}\n\t\t${this.attr(\"class\", this.formatOptions.showLabels ?? false ? \"sapUiTinyMarginTopBottom\" : undefined)}\n\t\teditable=\"false\"\n\t/>\n\t${targetLabel}`;\n\t}\n\n\t/**\n\t * The building block template for the progress indicator part.\n\t *\n\t * @returns An XML-based string with the definition of the progress indicator template\n\t */\n\tgetProgressIndicatorTemplate() {\n\t\tconst { dataModelPath, valueDataModelPath, dataPointConverted } = DataPointBlock.getTemplatingObjects(this);\n\t\tconst criticalityColorExpression = buildExpressionForCriticalityColor(dataPointConverted, dataModelPath);\n\t\tconst displayValue = buildExpressionForProgressIndicatorDisplayValue(dataModelPath);\n\t\tconst percentValue = buildExpressionForProgressIndicatorPercentValue(dataModelPath);\n\n\t\tconst dataPointTarget = dataModelPath.targetObject;\n\t\tlet firstLabel = \"\";\n\t\tlet secondLabel = \"\";\n\n\t\tif (this?.formatOptions?.showLabels ?? false) {\n\t\t\tfirstLabel = xml`<Label\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t${this.attr(\"text\", dataPointTarget?.Description)}\n\t\t\t\t${this.attr(\"visible\", !!dataPointTarget?.Description)}\n\t\t\t/>`;\n\n\t\t\t// const secondLabelText = (valueDataModelPath?.targetObject as Property)?.annotations?.Common?.Label;\n\t\t\tconst secondLabelExpression = getExpressionFromAnnotation(\n\t\t\t\t(valueDataModelPath?.targetObject as Property)?.annotations?.Common?.Label\n\t\t\t);\n\t\t\tsecondLabel = xml`<Label\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t${this.attr(\"text\", compileExpression(secondLabelExpression))}\n\t\t\t\t${this.attr(\"visible\", !!compileExpression(notEqual(undefined, secondLabelExpression)))}\n\t\t\t/>`;\n\t\t}\n\n\t\treturn xml`\n\t\t${firstLabel}\n\t\t\t<ProgressIndicator\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t${this.attr(\"id\", this.idPrefix ? generate([this.idPrefix, \"ProgressIndicator-Field-display\"]) : undefined)}\n\t\t\t\t${this.attr(\"displayValue\", displayValue)}\n\t\t\t\t${this.attr(\"percentValue\", percentValue)}\n\t\t\t\t${this.attr(\"state\", criticalityColorExpression)}\n\t\t\t\t${this.attr(\"tooltip\", this.getTooltipValue())}\n\t\t\t/>\n\t\t\t${secondLabel}`;\n\t}\n\n\t/**\n\t * The building block template for the object number common part.\n\t *\n\t * @returns An XML-based string with the definition of the object number common template\n\t */\n\tgetObjectNumberCommonTemplate() {\n\t\tconst { dataModelPath, valueDataModelPath, dataPointConverted } = DataPointBlock.getTemplatingObjects(this);\n\t\tconst criticalityColorExpression = buildExpressionForCriticalityColor(dataPointConverted, dataModelPath);\n\t\tconst emptyIndicatorMode = this.formatOptions.showEmptyIndicator ?? false ? \"On\" : undefined;\n\t\tconst objectStatusNumber = buildFieldBindingExpression(dataModelPath, this.formatOptions, true);\n\t\tconst unit =\n\t\t\tthis.formatOptions.measureDisplayMode === \"Hidden\"\n\t\t\t\t? undefined\n\t\t\t\t: compileExpression(UIFormatters.getBindingForUnitOrCurrency(valueDataModelPath as DataModelObjectPath));\n\n\t\treturn xml`<ObjectNumber\n\t\t\txmlns=\"sap.m\"\n\t\t\t${this.attr(\"id\", this.idPrefix ? generate([this.idPrefix, \"ObjectNumber-Field-display\"]) : undefined)}\n\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t${this.attr(\"state\", criticalityColorExpression)}\n\t\t\t${this.attr(\"number\", objectStatusNumber)}\n\t\t\t${this.attr(\"unit\", unit)}\n\t\t\t${this.attr(\"visible\", this.visible)}\n\t\t\temphasized=\"false\"\n\t\t\t${this.attr(\"class\", this.formatOptions.dataPointStyle === \"large\" ? \"sapMObjectNumberLarge\" : undefined)}\n\t\t\t${this.attr(\"tooltip\", this.getTooltipValue())}\n\t\t\t${this.attr(\"emptyIndicatorMode\", emptyIndicatorMode)}\n\t\t/>`;\n\t}\n\n\t/**\n\t * The building block template for the object number.\n\t *\n\t * @returns An XML-based string with the definition of the object number template\n\t */\n\tgetObjectNumberTemplate() {\n\t\tconst { valueDataModelPath } = DataPointBlock.getTemplatingObjects(this);\n\t\tif (this?.formatOptions?.isAnalytics ?? false) {\n\t\t\treturn xml`\n\t\t\t\t<control:ConditionalWrapper\n\t\t\t\t\txmlns:control=\"sap.fe.macros.controls\"\n\t\t\t\t\t${this.attr(\"condition\", UIFormatters.hasValidAnalyticalCurrencyOrUnit(valueDataModelPath as DataModelObjectPath))}\n\t\t\t\t>\n\t\t\t\t\t<control:contentTrue>\n\t\t\t\t\t\t${this.getObjectNumberCommonTemplate()}\n\t\t\t\t\t</control:contentTrue>\n\t\t\t\t\t<control:contentFalse>\n\t\t\t\t\t\t<ObjectNumber\n\t\t\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\t\t\t${this.attr(\"id\", this.idPrefix ? generate([this.idPrefix, \"ObjectNumber-Field-display-differentUnit\"]) : undefined)}\n\t\t\t\t\t\t\tnumber=\"*\"\n\t\t\t\t\t\t\tunit=\"\"\n\t\t\t\t\t\t\t${this.attr(\"visible\", this.visible)}\n\t\t\t\t\t\t\temphasized=\"false\"\n\t\t\t\t\t\t\t${this.attr(\"class\", this.formatOptions.dataPointStyle === \"large\" ? \"sapMObjectNumberLarge\" : undefined)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</control:contentFalse>\n\t\t\t\t</control:ConditionalWrapper>`;\n\t\t} else {\n\t\t\treturn xml`${this.getObjectNumberCommonTemplate()}`;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the dependent or an empty string.\n\t *\n\t * @returns Dependent either with the QuickView or an empty string.\n\t */\n\tprivate getObjectStatusDependentsTemplate() {\n\t\tif (this.hasQuickView) {\n\t\t\treturn `<dependents><macro:QuickView\n\t\t\t\t\t\txmlns:macro=\"sap.fe.macros\"\n\t\t\t\t\t\tdataField=\"{metaPath>}\"\n\t\t\t\t\t\tcontextPath=\"{contextPath>}\"\n\t\t\t\t\t/></dependents>`;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * The building block template for the object status.\n\t *\n\t * @returns An XML-based string with the definition of the object status template\n\t */\n\tgetObjectStatusTemplate() {\n\t\tconst { dataModelPath, valueDataModelPath, dataPointConverted } = DataPointBlock.getTemplatingObjects(this);\n\t\tlet criticalityColorExpression = buildExpressionForCriticalityColor(dataPointConverted, dataModelPath);\n\t\tif (criticalityColorExpression === \"None\" && valueDataModelPath) {\n\t\t\tcriticalityColorExpression = this.hasQuickView ? \"Information\" : \"None\";\n\t\t}\n\n\t\t// if the semanticObjects already calculated the criticality we don't calculate it again\n\t\tcriticalityColorExpression = criticalityColorExpression\n\t\t\t? criticalityColorExpression\n\t\t\t: buildExpressionForCriticalityColor(dataPointConverted, dataModelPath);\n\t\tconst emptyIndicatorMode = this.formatOptions.showEmptyIndicator ?? false ? \"On\" : undefined;\n\t\tconst objectStatusText = buildFieldBindingExpression(dataModelPath, this.formatOptions, false);\n\t\tconst iconExpression =\n\t\t\tthis.formatOptions.dataPointStyle === \"large\"\n\t\t\t\t? undefined\n\t\t\t\t: buildExpressionForCriticalityIcon(dataPointConverted, dataModelPath);\n\n\t\treturn xml`<ObjectStatus\n\t\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\t\t${this.attr(\"id\", this.idPrefix ? generate([this.idPrefix, \"ObjectStatus-Field-display\"]) : undefined)}\n\t\t\t\t\t\tcore:require=\"{ FieldRuntime: 'sap/fe/macros/field/FieldRuntime' }\"\n\t\t\t\t\t\t${this.attr(\"class\", this.formatOptions.dataPointStyle === \"large\" ? \"sapMObjectStatusLarge\" : undefined)}\n\t\t\t\t\t\t${this.attr(\"icon\", iconExpression)}\n\t\t\t\t\t\t${this.attr(\"tooltip\", this.getTooltipValue())}\n\t\t\t\t\t\t${this.attr(\"state\", criticalityColorExpression)}\n\t\t\t\t\t\t${this.attr(\"text\", objectStatusText)}\n\t\t\t\t\t\t${this.attr(\"emptyIndicatorMode\", emptyIndicatorMode)}\n\t\t\t\t\t\t${this.attr(\"active\", this.hasQuickView)}\n\t\t\t\t\t\tpress=\"FieldRuntime.pressLink\"\n\t\t\t\t\t\t${this.attr(\"ariaLabelledBy\", this.ariaLabelledBy !== null ? this.ariaLabelledBy : undefined)}\n\t\t\t\t>${this.getObjectStatusDependentsTemplate()}\n\t\t\t\t</ObjectStatus>`;\n\t}\n\n\t/**\n\t * The helper method to get a possible tooltip text.\n\t *\n\t * @returns BindingToolkitExpression\n\t */\n\tprivate getTooltipValue() {\n\t\tconst { dataModelPath, dataPointConverted } = DataPointBlock.getTemplatingObjects(this);\n\t\treturn getExpressionFromAnnotation(dataPointConverted?.annotations?.Common?.QuickInfo?.valueOf(), getRelativePaths(dataModelPath));\n\t}\n\n\t/**\n\t * The helper method to get a possible target value binding.\n\t *\n\t * @returns BindingToolkitExpression\n\t */\n\tprivate getTargetValueBinding() {\n\t\tconst { dataModelPath, dataPointConverted } = DataPointBlock.getTemplatingObjects(this);\n\t\treturn getExpressionFromAnnotation(dataPointConverted.TargetValue, getRelativePaths(dataModelPath));\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\tswitch (this.visualization) {\n\t\t\tcase \"Rating\": {\n\t\t\t\treturn this.getRatingIndicatorTemplate();\n\t\t\t}\n\t\t\tcase \"Progress\": {\n\t\t\t\treturn this.getProgressIndicatorTemplate();\n\t\t\t}\n\t\t\tcase \"ObjectNumber\": {\n\t\t\t\treturn this.getObjectNumberTemplate();\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn this.getObjectStatusTemplate();\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MA2EqBA,cAAc,WAJlCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,WAAW;IACjBC,SAAS,EAAE;EACZ,CAAC,CAAC,UAKAC,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC,UASDD,cAAc,CAAC;IACfC,IAAI,EAAE,sBAAsB;IAC5BC,QAAQ,EAAE;EACX,CAAC,CAAC,UAMDF,cAAc,CAAC;IACfC,IAAI,EAAE;EACP,CAAC,CAAC,UAkBDD,cAAc,CAAC;IACfC,IAAI,EAAE,QAAQ;IACdE,QAAQ,EAAE,UAAUC,kBAA0C,EAAE;MAC/D,IAAIA,kBAAkB,aAAlBA,kBAAkB,eAAlBA,kBAAkB,CAAEC,cAAc,IAAI,CAAC,CAAC,EAAE,EAAE,OAAO,CAAC,CAACC,QAAQ,CAACF,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAEC,cAAc,CAAC,EAAE;QACtG,MAAM,IAAIE,KAAK,CAAE,iBAAgBH,kBAAkB,CAACC,cAAe,oCAAmC,CAAC;MACxG;MAEA,IACCD,kBAAkB,aAAlBA,kBAAkB,eAAlBA,kBAAkB,CAAEI,WAAW,IAC/B,CAAC,CAAC,OAAO,EAAE,aAAa,EAAE,kBAAkB,EAAE,kBAAkB,CAAC,CAACF,QAAQ,CAACF,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAEI,WAAW,CAAC,EAC1G;QACD,MAAM,IAAID,KAAK,CAAE,iBAAgBH,kBAAkB,CAACI,WAAY,iCAAgC,CAAC;MAClG;MAEA,IAAIJ,kBAAkB,aAAlBA,kBAAkB,eAAlBA,kBAAkB,CAAEK,QAAQ,IAAI,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,MAAM,CAAC,CAACH,QAAQ,CAACF,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAEK,QAAQ,CAAC,EAAE;QACzG,MAAM,IAAIF,KAAK,CAAE,iBAAgBH,kBAAkB,CAACK,QAAS,8BAA6B,CAAC;MAC5F;MAEA,IAAIL,kBAAkB,aAAlBA,kBAAkB,eAAlBA,kBAAkB,CAAEM,kBAAkB,IAAI,CAAC,CAAC,QAAQ,EAAE,UAAU,CAAC,CAACJ,QAAQ,CAACF,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAEM,kBAAkB,CAAC,EAAE;QACvH,MAAM,IAAIH,KAAK,CAAE,iBAAgBH,kBAAkB,CAACM,kBAAmB,wCAAuC,CAAC;MAChH;MAEA,OAAON,kBAAkB;IAC1B;EACD,CAAC,CAAC,UAGDJ,cAAc,CAAC;IACfC,IAAI,EAAE,sBAAsB;IAC5BC,QAAQ,EAAE,IAAI;IACdS,aAAa,EAAE,CAAC,WAAW,EAAE,oBAAoB,EAAE,YAAY,EAAE,WAAW;EAC7E,CAAC,CAAC;IAAA;IA1EF;AACD;AACA;IAMC;AACD;AACA;AACA;AACA;IAQC;AACD;AACA;IAuDC;AACD;AACA;AACA;AACA;AACA;IALC,eAMeC,oBAAoB,GAAnC,8BAAoCC,OAA6C,EAI/E;MAAA;MACD,MAAMC,qBAAqB,GAAGC,2BAA2B,CAACF,OAAO,CAACG,QAAQ,EAAEH,OAAO,CAACI,WAAW,CAAC;MAChG,IAAIC,0BAA0B;MAC7BL,OAAO,CAAyBM,OAAO,GAAGC,oBAAoB,CAACN,qBAAqB,CAAC;MACtF,IAAIA,qBAAqB,aAArBA,qBAAqB,wCAArBA,qBAAqB,CAAEO,YAAY,4EAAnC,sBAAqCC,KAAK,mDAA1C,uBAA4CC,IAAI,EAAE;QACrDL,0BAA0B,GAAGM,oBAAoB,CAACV,qBAAqB,EAAEA,qBAAqB,CAACO,YAAY,CAACC,KAAK,CAACC,IAAI,CAAC;MACxH;MACA,MAAME,0BAA0B,GAAGC,uBAAuB,CAACb,OAAO,CAACG,QAAQ,CAAC;MAE5E,OAAO;QACNW,aAAa,EAAEb,qBAAqB;QACpCc,kBAAkB,EAAEV,0BAA0B;QAC9CW,kBAAkB,EAAEJ;MACrB,CAAC;IACF;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,eAMeK,yBAAyB,GAAxC,mCAAyCC,UAA+B,EAAuB;MAC9F,MAAM;QAAEJ,aAAa;QAAEC,kBAAkB;QAAEC;MAAmB,CAAC,GAAGjC,cAAc,CAACgB,oBAAoB,CAACmB,UAAU,CAAC;MACjH,IAAI,CAAAF,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAEG,aAAa,MAAK,6BAA6B,EAAE;QACxED,UAAU,CAACE,aAAa,GAAG,QAAQ;QACnC,OAAOF,UAAU;MAClB;MACA,IAAI,CAAAF,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAEG,aAAa,MAAK,+BAA+B,EAAE;QAC1ED,UAAU,CAACE,aAAa,GAAG,UAAU;QACrC,OAAOF,UAAU;MAClB;MACA,MAAMG,aAAa,GAAGN,kBAAkB,IAAIA,kBAAkB,CAACP,YAAY;MAC3E;MACAU,UAAU,CAACI,YAAY,GAAGD,aAAa,IAAIE,qCAAqC,CAACT,aAAa,EAAEO,aAAa,CAAC;MAC9G,IAAIG,6BAA6B,CAACT,kBAAkB,CAAwB,EAAE;QAC7EG,UAAU,CAACI,YAAY,GAAG,IAAI;MAC/B;MACA,IAAI,CAACJ,UAAU,CAACI,YAAY,EAAE;QAC7B,IAAIG,UAAU,CAACJ,aAAa,CAAC,KAAKK,OAAO,CAACL,aAAa,CAAC,IAAIM,WAAW,CAACN,aAAa,CAAC,CAAC,EAAE;UACxF;UACAH,UAAU,CAACE,aAAa,GAAG,cAAc;UACzC,OAAOF,UAAU;QAClB;MACD;;MAEA;MACAA,UAAU,CAACE,aAAa,GAAG,cAAc;MACzC,OAAOF,UAAU;IAClB;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAKA,wBAAYA,UAA+B,EAAE;MAAA;MAC5C;MACAA,UAAU,CAACI,YAAY,GAAG,KAAK;MAE/B,sCAAMvC,cAAc,CAACkC,yBAAyB,CAACC,UAAU,CAAC,CAAC;MAAC;MAAA;MAAA;MAAA;MAAA;MAAA;IAC7D;;IAEA;AACD;AACA;AACA;AACA;IAJC;IAAA;IAAA,OAKAU,0BAA0B,GAA1B,sCAA6B;MAAA;MAC5B,MAAM;QAAEd,aAAa;QAAEC,kBAAkB;QAAEC;MAAmB,CAAC,GAAGjC,cAAc,CAACgB,oBAAoB,CAAC,IAAI,CAAC;MAC3G,MAAM8B,eAAe,GAAGf,aAAa,CAACN,YAAY;MAClD,MAAMsB,WAAW,GAAG,IAAI,CAACC,qBAAqB,EAAE;MAEhD,MAAMC,cAAc,GAAG,CAAAH,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEpB,KAAK,KAAI,EAAE;MACnD,MAAMwB,YAAY,GAAGD,cAAc,aAAdA,cAAc,gDAAdA,cAAc,CAAEE,OAAO,0DAAvB,sBAAyB9C,IAAI;MAElD,IAAI+C,wBAAwB;MAC5B,IAAIF,YAAY,KAAK,aAAa,IAAIJ,eAAe,CAACO,WAAW,EAAE;QAClE,IAAIP,eAAe,CAACO,WAAW,CAACC,wBAAwB,EAAE;UACzDF,wBAAwB,GAAGN,eAAe,CAACO,WAAW,CAACC,wBAAwB;QAChF;MACD;MAEA,MAAMC,KAAK,GAAGC,iBAAiB,CAACxB,kBAAkB,EAAyBiB,cAAc,EAAEC,YAAY,EAAEE,wBAAwB,CAAC;MAElI,MAAMK,IAAI,GAAGC,4BAA4B,CAAC,IAAI,CAACtC,QAAQ,EAAE0B,eAAe,CAAC;MAEzE,IAAIa,WAAW,GAAG,EAAE;MACpB,IAAIC,WAAW,GAAG,EAAE;MAEpB,MAAMC,qBAAqB,GAAGC,iBAAiB,CAC9CC,YAAY,CACX,CACCC,WAAW,CAAC,kCAAkC,EAAE,aAAa,CAAC,EAC9DC,2BAA2B,CAAChC,kBAAkB,CAACP,KAAK,EAAEwC,gBAAgB,CAACnC,aAAa,CAAC,CAAC,EACtFE,kBAAkB,CAACkC,WAAW,GAC3BF,2BAA2B,CAAChC,kBAAkB,CAACkC,WAAW,EAAED,gBAAgB,CAACnC,aAAa,CAAC,CAAC,GAC5F,GAAG,CACN,EACD,SAAS,CACT,CACD;MAED,IAAI,IAAI,CAACqC,aAAa,CAACC,UAAU,IAAI,KAAK,EAAE;QAC3CV,WAAW,GAAGW,GAAI;AACrB,OAAO,IAAI,CAACC,IAAI,CAAC,MAAM,EAAEd,IAAI,CAAE;AAC/B,OAAO,IAAI,CAACc,IAAI,CAAC,SAAS,EAAEzB,eAAe,CAAC0B,UAAU,IAAI1B,eAAe,CAAC2B,WAAW,GAAG,IAAI,GAAG,KAAK,CAAE;AACtG,OAAO;QAEJb,WAAW,GAAGU,GAAI;AACrB;AACA;AACA,KAAK,IAAI,CAACC,IAAI,CAAC,MAAM,EAAEV,qBAAqB,CAAE;AAC9C,qBAAqB;MACnB;MAEA,OAAOS,GAAI;AACb,IAAIX,WAAY;AAChB;AACA;AACA;AACA,IAAI,IAAI,CAACY,IAAI,CAAC,IAAI,EAAE,IAAI,CAACG,QAAQ,GAAGC,QAAQ,CAAC,CAAC,IAAI,CAACD,QAAQ,EAAE,+BAA+B,CAAC,CAAC,GAAGE,SAAS,CAAE;AAC5G,IAAI,IAAI,CAACL,IAAI,CAAC,UAAU,EAAExB,WAAW,CAAE;AACvC,IAAI,IAAI,CAACwB,IAAI,CAAC,OAAO,EAAEhB,KAAK,CAAE;AAC9B,IAAI,IAAI,CAACgB,IAAI,CAAC,SAAS,EAAE,IAAI,CAACM,eAAe,EAAE,CAAE;AACjD,IAAI,IAAI,CAACN,IAAI,CAAC,UAAU,EAAE,IAAI,CAACH,aAAa,CAACvD,QAAQ,CAAE;AACvD,IAAI,IAAI,CAAC0D,IAAI,CAAC,OAAO,EAAE,IAAI,CAACH,aAAa,CAACC,UAAU,IAAI,KAAK,GAAG,0BAA0B,GAAGO,SAAS,CAAE;AACxG;AACA;AACA,GAAGhB,WAAY,EAAC;IACf;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKAkB,4BAA4B,GAA5B,wCAA+B;MAAA;MAC9B,MAAM;QAAE/C,aAAa;QAAEC,kBAAkB;QAAEC;MAAmB,CAAC,GAAGjC,cAAc,CAACgB,oBAAoB,CAAC,IAAI,CAAC;MAC3G,MAAM+D,0BAA0B,GAAGC,kCAAkC,CAAC/C,kBAAkB,EAAEF,aAAa,CAAC;MACxG,MAAMkD,YAAY,GAAGC,+CAA+C,CAACnD,aAAa,CAAC;MACnF,MAAMoD,YAAY,GAAGC,+CAA+C,CAACrD,aAAa,CAAC;MAEnF,MAAMe,eAAe,GAAGf,aAAa,CAACN,YAAY;MAClD,IAAI4D,UAAU,GAAG,EAAE;MACnB,IAAIC,WAAW,GAAG,EAAE;MAEpB,IAAI,KAAI,aAAJ,IAAI,8CAAJ,IAAI,CAAElB,aAAa,wDAAnB,oBAAqBC,UAAU,KAAI,KAAK,EAAE;QAAA;QAC7CgB,UAAU,GAAGf,GAAI;AACpB;AACA,MAAM,IAAI,CAACC,IAAI,CAAC,MAAM,EAAEzB,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAE2B,WAAW,CAAE;AACtD,MAAM,IAAI,CAACF,IAAI,CAAC,SAAS,EAAE,CAAC,EAACzB,eAAe,aAAfA,eAAe,eAAfA,eAAe,CAAE2B,WAAW,EAAE;AAC3D,MAAM;;QAEH;QACA,MAAMc,qBAAqB,GAAGtB,2BAA2B,CACvDjC,kBAAkB,aAAlBA,kBAAkB,gDAAlBA,kBAAkB,CAAEP,YAAY,oFAAjC,sBAAgD+D,WAAW,qFAA3D,uBAA6DC,MAAM,2DAAnE,uBAAqEC,KAAK,CAC1E;QACDJ,WAAW,GAAGhB,GAAI;AACrB;AACA,MAAM,IAAI,CAACC,IAAI,CAAC,MAAM,EAAET,iBAAiB,CAACyB,qBAAqB,CAAC,CAAE;AAClE,MAAM,IAAI,CAAChB,IAAI,CAAC,SAAS,EAAE,CAAC,CAACT,iBAAiB,CAAC6B,QAAQ,CAACf,SAAS,EAAEW,qBAAqB,CAAC,CAAC,CAAE;AAC5F,MAAM;MACJ;MAEA,OAAOjB,GAAI;AACb,IAAIe,UAAW;AACf;AACA;AACA,MAAM,IAAI,CAACd,IAAI,CAAC,IAAI,EAAE,IAAI,CAACG,QAAQ,GAAGC,QAAQ,CAAC,CAAC,IAAI,CAACD,QAAQ,EAAE,iCAAiC,CAAC,CAAC,GAAGE,SAAS,CAAE;AAChH,MAAM,IAAI,CAACL,IAAI,CAAC,cAAc,EAAEU,YAAY,CAAE;AAC9C,MAAM,IAAI,CAACV,IAAI,CAAC,cAAc,EAAEY,YAAY,CAAE;AAC9C,MAAM,IAAI,CAACZ,IAAI,CAAC,OAAO,EAAEQ,0BAA0B,CAAE;AACrD,MAAM,IAAI,CAACR,IAAI,CAAC,SAAS,EAAE,IAAI,CAACM,eAAe,EAAE,CAAE;AACnD;AACA,KAAKS,WAAY,EAAC;IACjB;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKAM,6BAA6B,GAA7B,yCAAgC;MAC/B,MAAM;QAAE7D,aAAa;QAAEC,kBAAkB;QAAEC;MAAmB,CAAC,GAAGjC,cAAc,CAACgB,oBAAoB,CAAC,IAAI,CAAC;MAC3G,MAAM+D,0BAA0B,GAAGC,kCAAkC,CAAC/C,kBAAkB,EAAEF,aAAa,CAAC;MACxG,MAAM8D,kBAAkB,GAAG,IAAI,CAACzB,aAAa,CAAC0B,kBAAkB,IAAI,KAAK,GAAG,IAAI,GAAGlB,SAAS;MAC5F,MAAMmB,kBAAkB,GAAGC,2BAA2B,CAACjE,aAAa,EAAE,IAAI,CAACqC,aAAa,EAAE,IAAI,CAAC;MAC/F,MAAM6B,IAAI,GACT,IAAI,CAAC7B,aAAa,CAACtD,kBAAkB,KAAK,QAAQ,GAC/C8D,SAAS,GACTd,iBAAiB,CAACoC,YAAY,CAACC,2BAA2B,CAACnE,kBAAkB,CAAwB,CAAC;MAE1G,OAAOsC,GAAI;AACb;AACA,KAAK,IAAI,CAACC,IAAI,CAAC,IAAI,EAAE,IAAI,CAACG,QAAQ,GAAGC,QAAQ,CAAC,CAAC,IAAI,CAACD,QAAQ,EAAE,4BAA4B,CAAC,CAAC,GAAGE,SAAS,CAAE;AAC1G;AACA,KAAK,IAAI,CAACL,IAAI,CAAC,OAAO,EAAEQ,0BAA0B,CAAE;AACpD,KAAK,IAAI,CAACR,IAAI,CAAC,QAAQ,EAAEwB,kBAAkB,CAAE;AAC7C,KAAK,IAAI,CAACxB,IAAI,CAAC,MAAM,EAAE0B,IAAI,CAAE;AAC7B,KAAK,IAAI,CAAC1B,IAAI,CAAC,SAAS,EAAE,IAAI,CAAChD,OAAO,CAAE;AACxC;AACA,KAAK,IAAI,CAACgD,IAAI,CAAC,OAAO,EAAE,IAAI,CAACH,aAAa,CAAC3D,cAAc,KAAK,OAAO,GAAG,uBAAuB,GAAGmE,SAAS,CAAE;AAC7G,KAAK,IAAI,CAACL,IAAI,CAAC,SAAS,EAAE,IAAI,CAACM,eAAe,EAAE,CAAE;AAClD,KAAK,IAAI,CAACN,IAAI,CAAC,oBAAoB,EAAEsB,kBAAkB,CAAE;AACzD,KAAK;IACJ;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKAO,uBAAuB,GAAvB,mCAA0B;MAAA;MACzB,MAAM;QAAEpE;MAAmB,CAAC,GAAGhC,cAAc,CAACgB,oBAAoB,CAAC,IAAI,CAAC;MACxE,IAAI,KAAI,aAAJ,IAAI,+CAAJ,IAAI,CAAEoD,aAAa,yDAAnB,qBAAqBiC,WAAW,KAAI,KAAK,EAAE;QAC9C,OAAO/B,GAAI;AACd;AACA;AACA,OAAO,IAAI,CAACC,IAAI,CAAC,WAAW,EAAE2B,YAAY,CAACI,gCAAgC,CAACtE,kBAAkB,CAAwB,CAAE;AACxH;AACA;AACA,QAAQ,IAAI,CAAC4D,6BAA6B,EAAG;AAC7C;AACA;AACA;AACA;AACA,SAAS,IAAI,CAACrB,IAAI,CAAC,IAAI,EAAE,IAAI,CAACG,QAAQ,GAAGC,QAAQ,CAAC,CAAC,IAAI,CAACD,QAAQ,EAAE,0CAA0C,CAAC,CAAC,GAAGE,SAAS,CAAE;AAC5H;AACA;AACA,SAAS,IAAI,CAACL,IAAI,CAAC,SAAS,EAAE,IAAI,CAAChD,OAAO,CAAE;AAC5C;AACA,SAAS,IAAI,CAACgD,IAAI,CAAC,OAAO,EAAE,IAAI,CAACH,aAAa,CAAC3D,cAAc,KAAK,OAAO,GAAG,uBAAuB,GAAGmE,SAAS,CAAE;AACjH;AACA;AACA,kCAAkC;MAChC,CAAC,MAAM;QACN,OAAON,GAAI,GAAE,IAAI,CAACsB,6BAA6B,EAAG,EAAC;MACpD;IACD;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKQW,iCAAiC,GAAzC,6CAA4C;MAC3C,IAAI,IAAI,CAAChE,YAAY,EAAE;QACtB,OAAQ;AACX;AACA;AACA;AACA,qBAAqB;MACnB;MACA,OAAO,EAAE;IACV;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKAiE,uBAAuB,GAAvB,mCAA0B;MACzB,MAAM;QAAEzE,aAAa;QAAEC,kBAAkB;QAAEC;MAAmB,CAAC,GAAGjC,cAAc,CAACgB,oBAAoB,CAAC,IAAI,CAAC;MAC3G,IAAI+D,0BAA0B,GAAGC,kCAAkC,CAAC/C,kBAAkB,EAAEF,aAAa,CAAC;MACtG,IAAIgD,0BAA0B,KAAK,MAAM,IAAI/C,kBAAkB,EAAE;QAChE+C,0BAA0B,GAAG,IAAI,CAACxC,YAAY,GAAG,aAAa,GAAG,MAAM;MACxE;;MAEA;MACAwC,0BAA0B,GAAGA,0BAA0B,GACpDA,0BAA0B,GAC1BC,kCAAkC,CAAC/C,kBAAkB,EAAEF,aAAa,CAAC;MACxE,MAAM8D,kBAAkB,GAAG,IAAI,CAACzB,aAAa,CAAC0B,kBAAkB,IAAI,KAAK,GAAG,IAAI,GAAGlB,SAAS;MAC5F,MAAM6B,gBAAgB,GAAGT,2BAA2B,CAACjE,aAAa,EAAE,IAAI,CAACqC,aAAa,EAAE,KAAK,CAAC;MAC9F,MAAMsC,cAAc,GACnB,IAAI,CAACtC,aAAa,CAAC3D,cAAc,KAAK,OAAO,GAC1CmE,SAAS,GACT+B,iCAAiC,CAAC1E,kBAAkB,EAAEF,aAAa,CAAC;MAExE,OAAOuC,GAAI;AACb;AACA,QAAQ,IAAI,CAACC,IAAI,CAAC,IAAI,EAAE,IAAI,CAACG,QAAQ,GAAGC,QAAQ,CAAC,CAAC,IAAI,CAACD,QAAQ,EAAE,4BAA4B,CAAC,CAAC,GAAGE,SAAS,CAAE;AAC7G;AACA,QAAQ,IAAI,CAACL,IAAI,CAAC,OAAO,EAAE,IAAI,CAACH,aAAa,CAAC3D,cAAc,KAAK,OAAO,GAAG,uBAAuB,GAAGmE,SAAS,CAAE;AAChH,QAAQ,IAAI,CAACL,IAAI,CAAC,MAAM,EAAEmC,cAAc,CAAE;AAC1C,QAAQ,IAAI,CAACnC,IAAI,CAAC,SAAS,EAAE,IAAI,CAACM,eAAe,EAAE,CAAE;AACrD,QAAQ,IAAI,CAACN,IAAI,CAAC,OAAO,EAAEQ,0BAA0B,CAAE;AACvD,QAAQ,IAAI,CAACR,IAAI,CAAC,MAAM,EAAEkC,gBAAgB,CAAE;AAC5C,QAAQ,IAAI,CAAClC,IAAI,CAAC,oBAAoB,EAAEsB,kBAAkB,CAAE;AAC5D,QAAQ,IAAI,CAACtB,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAChC,YAAY,CAAE;AAC/C;AACA,QAAQ,IAAI,CAACgC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAACqC,cAAc,KAAK,IAAI,GAAG,IAAI,CAACA,cAAc,GAAGhC,SAAS,CAAE;AACpG,OAAO,IAAI,CAAC2B,iCAAiC,EAAG;AAChD,oBAAoB;IACnB;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKQ1B,eAAe,GAAvB,2BAA0B;MAAA;MACzB,MAAM;QAAE9C,aAAa;QAAEE;MAAmB,CAAC,GAAGjC,cAAc,CAACgB,oBAAoB,CAAC,IAAI,CAAC;MACvF,OAAOiD,2BAA2B,CAAChC,kBAAkB,aAAlBA,kBAAkB,gDAAlBA,kBAAkB,CAAEuD,WAAW,oFAA/B,sBAAiCC,MAAM,qFAAvC,uBAAyCoB,SAAS,2DAAlD,uBAAoDC,OAAO,EAAE,EAAE5C,gBAAgB,CAACnC,aAAa,CAAC,CAAC;IACnI;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKQiB,qBAAqB,GAA7B,iCAAgC;MAC/B,MAAM;QAAEjB,aAAa;QAAEE;MAAmB,CAAC,GAAGjC,cAAc,CAACgB,oBAAoB,CAAC,IAAI,CAAC;MACvF,OAAOiD,2BAA2B,CAAChC,kBAAkB,CAACkC,WAAW,EAAED,gBAAgB,CAACnC,aAAa,CAAC,CAAC;IACpG;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKAgF,WAAW,GAAX,uBAAc;MACb,QAAQ,IAAI,CAAC1E,aAAa;QACzB,KAAK,QAAQ;UAAE;YACd,OAAO,IAAI,CAACQ,0BAA0B,EAAE;UACzC;QACA,KAAK,UAAU;UAAE;YAChB,OAAO,IAAI,CAACiC,4BAA4B,EAAE;UAC3C;QACA,KAAK,cAAc;UAAE;YACpB,OAAO,IAAI,CAACsB,uBAAuB,EAAE;UACtC;QACA;UAAS;YACR,OAAO,IAAI,CAACI,uBAAuB,EAAE;UACtC;MAAC;IAEH,CAAC;IAAA;EAAA,EAza0CQ,iBAAiB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAqEb,CAAC,CAAC;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":15582,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","MetaModelConverter","BindingToolkit","StableIdHelper","TypeGuards","CriticalityFormatters","DataModelPathHelper","PropertyHelper","UIFormatters","FieldTemplating","DataPointTemplating","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_exports","getValueFormatted","getHeaderRatingIndicatorText","buildFieldBindingExpression","buildExpressionForProgressIndicatorPercentValue","buildExpressionForProgressIndicatorDisplayValue","isUsedInNavigationWithQuickViewFacets","getVisibleExpression","getPropertyWithSemanticObject","hasUnit","hasCurrency","getRelativePaths","enhanceDataModelPath","buildExpressionForCriticalityIcon","buildExpressionForCriticalityColor","isProperty","generate","pathInModel","notEqual","getExpressionFromAnnotation","formatResult","compileExpression","getInvolvedDataModelObjects","convertMetaModelContext","xml","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","DataPointBlock","name","namespace","type","required","validate","formatOptionsInput","dataPointStyle","includes","displayMode","iconSize","measureDisplayMode","expectedTypes","_BuildingBlockBase","getTemplatingObjects","_internalDataModelPat","_internalDataModelPat2","internalDataModelPath","metaPath","contextPath","internalValueDataModelPath","visible","targetObject","Value","path","internalDataPointConverted","dataModelPath","valueDataModelPath","dataPointConverted","getDataPointVisualization","properties","Visualization","visualization","valueProperty","hasQuickView","_this","this","_proto","getRatingIndicatorTemplate","_dataPointValue$$targ","dataPointTarget","targetValue","getTargetValueBinding","dataPointValue","propertyType","$target","numberOfFractionalDigits","ValueFormat","NumberOfFractionalDigits","text","headerLabel","targetLabel","targetLabelExpression","TargetValue","formatOptions","showLabels","attr","SampleSize","Description","idPrefix","getTooltipValue","getProgressIndicatorTemplate","_this$formatOptions","criticalityColorExpression","displayValue","percentValue","firstLabel","secondLabel","_valueDataModelPath$t","_valueDataModelPath$t2","_valueDataModelPath$t3","secondLabelExpression","annotations","Common","Label","getObjectNumberCommonTemplate","emptyIndicatorMode","showEmptyIndicator","objectStatusNumber","unit","getBindingForUnitOrCurrency","getObjectNumberTemplate","_this$formatOptions2","isAnalytics","hasValidAnalyticalCurrencyOrUnit","getObjectStatusDependentsTemplate","getObjectStatusTemplate","objectStatusText","iconExpression","ariaLabelledBy","_dataPointConverted$a","_dataPointConverted$a2","_dataPointConverted$a3","QuickInfo","valueOf","getTemplate"],"sources":["DataPoint.block-dbg.js"],"mappings":"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","sourceRoot":"internal"}},{"offset":{"line":15670,"column":0},"map":{"version":3,"names":["FilterFieldBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","isPublic","props","configuration","settings","propertyConverted","MetaModelConverter","convertMetaModelContext","property","dataModelPath","getInvolvedDataModelObjects","contextPath","propertyName","fixedValues","annotations","Common","ValueListWithFixedValues","controlId","idPrefix","generate","sourcePath","getTargetObjectPath","dataType","getDataType","labelTerm","Label","labelExpression","getExpressionFromAnnotation","label","compileExpression","conditionsBinding","getConditionsBinding","placeholder","getPlaceholder","vfEnabled","visualFilter","indexOf","vfId","undefined","propertyContext","model","getModel","vhPropertyPath","FieldHelper","valueHelpPropertyForFilterField","filterable","CommonHelper","isPropertyFilterable","propertyObject","getObject","propertyInterface","context","display","getFilterFieldDisplayFormat","isFilterable","maxConditions","dataTypeConstraints","constraints","dataTypeFormatOptions","formatOptions","isRequiredInFilter","operators","useSemanticDateRange","getPath","vhProperty","createBindingContext","vhPropertyObject","vhPropertyInterface","relativeVhPropertyPath","getRelativePropertyPath","relativePropertyPath","fieldHelpProperty","getFieldHelpPropertyForFilterField","$Type","vhIdPrefix","getVisualFilterContent","visualFilterObject","vfXML","isA","SAP_UI_MODEL_CONTEXT","presentationAnnotation","outParameter","inParameters","valuelistProperty","selectionVariantAnnotation","multipleSelectionAllowed","requiredProperties","showOverlayInitially","renderLineChart","isValueListWithFixedValues","xml","stringifyCustomData","getTemplate","xmlRet","err","Log","error","BuildingBlockBase"],"sourceRoot":"internal","sources":["FilterField.block.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { SAP_UI_MODEL_CONTEXT, xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport type { VisualFilters } from \"sap/fe/core/converters/controls/ListReport/VisualFilters\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { compileExpression, getExpressionFromAnnotation } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getRelativePropertyPath } from \"sap/fe/core/templating/PropertyFormatters\";\nimport type { ComputedAnnotationInterface, MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport {\n\tconstraints,\n\tformatOptions,\n\tgetConditionsBinding,\n\tgetDataType,\n\tgetPlaceholder,\n\tisRequiredInFilter,\n\tmaxConditions\n} from \"sap/fe/macros/filter/FilterFieldHelper\";\nimport { getFilterFieldDisplayFormat } from \"sap/fe/macros/filter/FilterFieldTemplating\";\nimport type Context from \"sap/ui/model/Context\";\nimport type MetaModel from \"sap/ui/model/MetaModel\";\n\n/**\n * Building block for creating a Filter Field based on the metadata provided by OData V4.\n * <br>\n * It is designed to work based on a property context(property) pointing to an entity type property\n * needed to be used as filterfield and entityType context(contextPath) to consider the relativity of\n * the propertyPath of the property wrt entityType.\n *\n * Usage example:\n * <pre>\n * &lt;macro:FilterField id=\"MyFilterField\" property=\"CompanyName\" /&gt;\n * </pre>\n *\n * @private\n */\n@defineBuildingBlock({\n\tname: \"FilterField\",\n\tnamespace: \"sap.fe.macros.internal\"\n})\nexport default class FilterFieldBlock extends BuildingBlockBase {\n\t/**\n\t * Defines the metadata path to the property.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true\n\t})\n\tproperty!: Context;\n\n\t/**\n\t * Metadata path to the entitySet or navigationProperty\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true\n\t})\n\tcontextPath!: Context;\n\n\t/**\n\t * Visual filter settings for filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tvisualFilter?: Context | VisualFilters;\n\n\t/**\n\t * A prefix that is added to the generated ID of the filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tidPrefix: string = \"FilterField\";\n\n\t/**\n\t * A prefix that is added to the generated ID of the value help used for the filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tvhIdPrefix: string = \"FilterFieldValueHelp\";\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tuseSemanticDateRange: boolean = true;\n\n\t/**\n\t * Settings from the manifest settings.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tsettings: string = \"\";\n\n\t/***********************************************\n\t *            INTERNAL ATTRIBUTES              *\n\t **********************************************/\n\n\t/**\n\t * Control Id for MDC filter field used inside.\n\t */\n\tcontrolId!: string;\n\n\t/**\n\t * Source annotation path of the property.\n\t */\n\tsourcePath!: string;\n\n\t/**\n\t * Label for filterfield.\n\t */\n\tlabel!: string;\n\n\t/**\n\t * Data Type of the filter field.\n\t */\n\tdataType!: string;\n\n\t/**\n\t * Maximum conditions that can be added to the filter field.\n\t */\n\tmaxConditions!: number;\n\n\t/**\n\t * Field Help id as association for the filter field.\n\t */\n\tfieldHelpProperty?: string;\n\n\t/**\n\t * Binding path for conditions added to filter field.\n\t */\n\tconditionsBinding!: string;\n\n\t/**\n\t * Datatype constraints of the filter field.\n\t */\n\tdataTypeConstraints?: string;\n\n\t/**\n\t * Datatype format options of the filter field.\n\t */\n\tdataTypeFormatOptions?: string;\n\n\t/**\n\t * To specify filter field is mandatory for filtering.\n\t */\n\trequired!: string;\n\n\t/**\n\t * Valid operators for the filter field.\n\t */\n\toperators?: string;\n\n\t/**\n\t * Visual Filter id to be used.\n\t */\n\tvfId?: string;\n\n\t/**\n\t * Visual Filter is expected.\n\t */\n\tvfEnabled!: boolean;\n\n\t/**\n\t * Property used is filterable\n\t */\n\tisFilterable!: boolean;\n\n\t/**\n\t * Property for placeholder\n\t */\n\tplaceholder?: string;\n\n\t/**\n\t * Property to hold promise for display\n\t */\n\tdisplay?: Promise<string | undefined>;\n\n\tconstructor(props: PropertiesOf<FilterFieldBlock>, configuration: any, settings: any) {\n\t\tsuper(props, configuration, settings);\n\n\t\tconst propertyConverted = MetaModelConverter.convertMetaModelContext(this.property) as Property;\n\t\tconst dataModelPath = MetaModelConverter.getInvolvedDataModelObjects(this.property, this.contextPath);\n\n\t\t// Property settings\n\t\tconst propertyName = propertyConverted.name,\n\t\t\tfixedValues = !!propertyConverted.annotations?.Common?.ValueListWithFixedValues;\n\n\t\tthis.controlId = this.idPrefix && generate([this.idPrefix, propertyName]);\n\t\tthis.sourcePath = getTargetObjectPath(dataModelPath);\n\t\tthis.dataType = getDataType(propertyConverted);\n\t\tconst labelTerm = propertyConverted?.annotations?.Common?.Label || propertyName;\n\t\tconst labelExpression = getExpressionFromAnnotation(labelTerm);\n\t\tthis.label = compileExpression(labelExpression) || propertyName;\n\t\tthis.conditionsBinding = getConditionsBinding(dataModelPath) || \"\";\n\t\tthis.placeholder = getPlaceholder(propertyConverted);\n\t\t// Visual Filter settings\n\t\tthis.vfEnabled = !!this.visualFilter && !(this.idPrefix && this.idPrefix.indexOf(\"Adaptation\") > -1);\n\t\tthis.vfId = this.vfEnabled ? generate([this.idPrefix, propertyName, \"VisualFilter\"]) : undefined;\n\n\t\t//-----------------------------------------------------------------------------------------------------//\n\t\t// TODO: need to change operations from MetaModel to Converters.\n\t\t// This mainly included changing changing getFilterRestrictions operations from metaModel to converters\n\t\tconst propertyContext = this.property,\n\t\t\tmodel: MetaModel = propertyContext.getModel(),\n\t\t\tvhPropertyPath: string = FieldHelper.valueHelpPropertyForFilterField(propertyContext),\n\t\t\tfilterable = CommonHelper.isPropertyFilterable(propertyContext),\n\t\t\tpropertyObject = propertyContext.getObject(),\n\t\t\tpropertyInterface = { context: propertyContext } as ComputedAnnotationInterface;\n\n\t\tthis.display = getFilterFieldDisplayFormat(dataModelPath, propertyConverted, propertyInterface);\n\t\tthis.isFilterable = !(filterable === false || filterable === \"false\");\n\t\tthis.maxConditions = maxConditions(propertyObject, propertyInterface);\n\t\tthis.dataTypeConstraints = constraints(propertyObject, propertyInterface);\n\t\tthis.dataTypeFormatOptions = formatOptions(propertyObject, propertyInterface);\n\t\tthis.required = isRequiredInFilter(propertyObject, propertyInterface);\n\t\tthis.operators = FieldHelper.operators(\n\t\t\tpropertyContext,\n\t\t\tpropertyObject,\n\t\t\tthis.useSemanticDateRange,\n\t\t\tthis.settings || \"\",\n\t\t\tthis.contextPath.getPath()\n\t\t);\n\n\t\t// Value Help settings\n\t\t// TODO: This needs to be updated when VH macro is converted to 2.0\n\t\tconst vhProperty = model.createBindingContext(vhPropertyPath) as Context;\n\t\tconst vhPropertyObject = vhProperty.getObject() as MetaModelContext,\n\t\t\tvhPropertyInterface = { context: vhProperty },\n\t\t\trelativeVhPropertyPath = getRelativePropertyPath(vhPropertyObject, vhPropertyInterface),\n\t\t\trelativePropertyPath = getRelativePropertyPath(propertyObject, propertyInterface);\n\t\tthis.fieldHelpProperty = FieldHelper.getFieldHelpPropertyForFilterField(\n\t\t\tpropertyContext,\n\t\t\tpropertyObject,\n\t\t\tpropertyObject.$Type,\n\t\t\tthis.vhIdPrefix,\n\t\t\trelativePropertyPath,\n\t\t\trelativeVhPropertyPath,\n\t\t\tfixedValues,\n\t\t\tthis.useSemanticDateRange\n\t\t);\n\n\t\t//-----------------------------------------------------------------------------------------------------//\n\t}\n\n\tgetVisualFilterContent() {\n\t\tlet visualFilterObject = this.visualFilter,\n\t\t\tvfXML = \"\";\n\t\tif (!this.vfEnabled || !visualFilterObject) {\n\t\t\treturn vfXML;\n\t\t}\n\t\tif ((visualFilterObject as Context)?.isA?.(SAP_UI_MODEL_CONTEXT)) {\n\t\t\tvisualFilterObject = (visualFilterObject as Context).getObject() as VisualFilters;\n\t\t}\n\n\t\tconst {\n\t\t\tcontextPath,\n\t\t\tpresentationAnnotation,\n\t\t\toutParameter,\n\t\t\tinParameters,\n\t\t\tvaluelistProperty,\n\t\t\tselectionVariantAnnotation,\n\t\t\tmultipleSelectionAllowed,\n\t\t\trequired,\n\t\t\trequiredProperties = [],\n\t\t\tshowOverlayInitially,\n\t\t\trenderLineChart,\n\t\t\tisValueListWithFixedValues\n\t\t} = visualFilterObject as VisualFilters;\n\t\tvfXML = xml`\n\t\t\t\t<macro:VisualFilter\n\t\t\t\t\tid=\"${this.vfId}\"\n\t\t\t\t\tcontextPath=\"${contextPath}\"\n\t\t\t\t\tmetaPath=\"${presentationAnnotation}\"\n\t\t\t\t\toutParameter=\"${outParameter}\"\n\t\t\t\t\tinParameters=\"${inParameters}\"\n\t\t\t\t\tvaluelistProperty=\"${valuelistProperty}\"\n\t\t\t\t\tselectionVariantAnnotation=\"${selectionVariantAnnotation}\"\n\t\t\t\t\tmultipleSelectionAllowed=\"${multipleSelectionAllowed}\"\n\t\t\t\t\trequired=\"${required}\"\n\t\t\t\t\trequiredProperties=\"${CommonHelper.stringifyCustomData(requiredProperties)}\"\n\t\t\t\t\tshowOverlayInitially=\"${showOverlayInitially}\"\n\t\t\t\t\trenderLineChart=\"${renderLineChart}\"\n\t\t\t\t\tisValueListWithFixedValues=\"${isValueListWithFixedValues}\"\n\t\t\t\t\tfilterBarEntityType=\"${contextPath}\"\n\t\t\t\t/>\n\t\t\t`;\n\n\t\treturn vfXML;\n\t}\n\n\tasync getTemplate() {\n\t\tlet xmlRet = ``;\n\t\tif (this.isFilterable) {\n\t\t\tlet display;\n\t\t\ttry {\n\t\t\t\tdisplay = await this.display;\n\t\t\t} catch (err: unknown) {\n\t\t\t\tLog.error(`FE : FilterField BuildingBlock : Error fetching display property for ${this.sourcePath} : ${err}`);\n\t\t\t}\n\n\t\t\txmlRet = xml`\n\t\t\t\t<mdc:FilterField\n\t\t\t\t\txmlns:mdc=\"sap.ui.mdc\"\n\t\t\t\t\txmlns:macro=\"sap.fe.macros\"\n\t\t\t\t\txmlns:unittest=\"http://schemas.sap.com/sapui5/preprocessorextension/sap.fe.unittesting/1\"\n\t\t\t\t\txmlns:customData=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\t\t\tunittest:id=\"UnitTest::FilterField\"\n\t\t\t\t\tcustomData:sourcePath=\"${this.sourcePath}\"\n\t\t\t\t\tid=\"${this.controlId}\"\n\t\t\t\t\tdelegate=\"{name: 'sap/fe/macros/field/FieldBaseDelegate', payload:{isFilterField:true}}\"\n\t\t\t\t\tlabel=\"${this.label}\"\n\t\t\t\t\tdataType=\"${this.dataType}\"\n\t\t\t\t\tdisplay=\"${display}\"\n\t\t\t\t\tmaxConditions=\"${this.maxConditions}\"\n\t\t\t\t\tfieldHelp=\"${this.fieldHelpProperty}\"\n\t\t\t\t\tconditions=\"${this.conditionsBinding}\"\n\t\t\t\t\tdataTypeConstraints=\"${this.dataTypeConstraints}\"\n\t\t\t\t\tdataTypeFormatOptions=\"${this.dataTypeFormatOptions}\"\n\t\t\t\t\trequired=\"${this.required}\"\n\t\t\t\t\toperators=\"${this.operators}\"\n\t\t\t\t\tplaceholder=\"${this.placeholder}\"\n\n\t\t\t\t>\n\t\t\t\t\t${this.vfEnabled ? this.getVisualFilterContent() : \"\"}\n\t\t\t\t</mdc:FilterField>\n\t\t\t`;\n\t\t}\n\n\t\treturn xmlRet;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":15967,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","MetaModelConverter","BindingToolkit","StableIdHelper","DataModelPathHelper","PropertyFormatters","CommonHelper","FieldHelper","FilterFieldHelper","FilterFieldTemplating","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_exports","getFilterFieldDisplayFormat","maxConditions","isRequiredInFilter","getPlaceholder","getDataType","getConditionsBinding","formatOptions","constraints","getRelativePropertyPath","getTargetObjectPath","generate","getExpressionFromAnnotation","compileExpression","xml","SAP_UI_MODEL_CONTEXT","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","FilterFieldBlock","name","namespace","type","required","isPublic","_BuildingBlockBase","props","configuration","settings","_propertyConverted$an","_propertyConverted$an2","_propertyConverted$an3","_propertyConverted$an4","_this","this","propertyConverted","convertMetaModelContext","dataModelPath","getInvolvedDataModelObjects","contextPath","propertyName","fixedValues","annotations","Common","ValueListWithFixedValues","controlId","idPrefix","sourcePath","dataType","labelTerm","Label","labelExpression","label","conditionsBinding","placeholder","vfEnabled","visualFilter","indexOf","vfId","propertyContext","model","getModel","vhPropertyPath","valueHelpPropertyForFilterField","filterable","isPropertyFilterable","propertyObject","getObject","propertyInterface","display","isFilterable","dataTypeConstraints","dataTypeFormatOptions","operators","useSemanticDateRange","getPath","vhProperty","createBindingContext","vhPropertyObject","vhPropertyInterface","relativeVhPropertyPath","relativePropertyPath","fieldHelpProperty","getFieldHelpPropertyForFilterField","$Type","vhIdPrefix","_proto","getVisualFilterContent","_visualFilterObject","_visualFilterObject$i","visualFilterObject","vfXML","isA","presentationAnnotation","outParameter","inParameters","valuelistProperty","selectionVariantAnnotation","multipleSelectionAllowed","requiredProperties","showOverlayInitially","renderLineChart","isValueListWithFixedValues","stringifyCustomData","getTemplate","async","xmlRet","err","error"],"sources":["FilterField.block-dbg.js"],"mappings":"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","sourceRoot":"internal"}},{"offset":{"line":16014,"column":0},"map":{"version":3,"names":["InternalFieldBlock","defineBuildingBlock","name","namespace","designtime","blockAttribute","type","required","expectedTypes","expectedAnnotationTypes","validate","formatOptionsInput","textAlignMode","includes","Error","displayMode","fieldMode","measureDisplayMode","textExpandBehaviorDisplay","semanticKeyStyle","isAnalytics","forInlineCreationRows","blockEvent","getOverrides","mControlConfiguration","sID","oProps","oControlConfig","Object","keys","forEach","sConfigKey","getIdentifierTitle","fieldFormatOptions","fullContextPath","alwaysShowDescriptionAndValue","getTitleBindingExpression","getTextBindingExpression","undefined","getObjectIdentifierText","oPropertyDataModelObjectPath","propertyBindingExpression","pathInModel","getContextRelativeTargetObjectPath","targetDisplayMode","oPropertyDefinition","targetObject","$target","commonText","annotations","Common","Text","UI","TextArrangement","formatWithTypeInformation","relativeLocation","getRelativePaths","compileExpression","getExpressionFromAnnotation","formatResult","valueFormatters","formatToKeepWhitespace","setUpDataPointType","oDataField","term","$Type","setUpVisibleProperties","oFieldProps","visible","FieldTemplating","getVisibleExpression","formatOptions","displayVisible","getContentId","sMacroId","setUpEditableProperties","oDataModelPath","oMetaModel","oPropertyForFieldControl","Value","hasPropertyInsertRestrictions","editMode","editModeAsObject","bMeasureReadOnly","UIFormatters","getEditMode","ifElse","and","editableExpression","getEditableExpressionAsObject","aRequiredPropertiesFromInsertRestrictions","getRequiredPropertiesFromInsertRestrictions","entitySet","getPath","replaceAll","aRequiredPropertiesFromUpdateRestrictions","getRequiredPropertiesFromUpdateRestrictions","oRequiredProperties","requiredPropertiesFromInsertRestrictions","requiredPropertiesFromUpdateRestrictions","ModelHelper","isCollaborationDraftSupported","EditMode","Display","collaborationEnabled","collaborationExpression","getCollaborationExpression","CollaborationFormatters","hasCollaborationActivity","collaborationHasActivityExpression","collaborationInitialsExpression","getCollaborationActivityInitials","collaborationColorExpression","getCollaborationActivityColor","not","constant","enabledExpression","getEnabledExpression","requiredExpression","getRequiredExpression","idPrefix","editStyleId","generate","setUpFormatOptions","oControlConfiguration","mSettings","oOverrideProps","dataField","getDisplayMode","textLinesEdit","textMaxLines","models","viewData","getProperty","retrieveTextFromValueList","isRetrieveTextFromValueListEnabled","hasEntityTextArrangement","targetEntityType","_flexId","noWrapperId","setUpDisplayStyle","oProperty","displayStyle","hasUnitOrCurrency","Measures","Unit","ISOCurrency","hasValidAnalyticalCurrencyOrUnit","textFromValueList","wrapBindingExpression","fn","fullyQualifiedName","fileRelativePropertyPath","Core","ContentDisposition","Filename","fileNameDataModelPath","enhanceDataModelPath","fileFilenameExpression","fileStreamNotEmpty","equal","fileUploadUrl","getValueBinding","fileFilenamePath","path","fileMediaType","MediaType","fileIsImage","IsImageURL","IsImage","test","toString","fileAvatarSrc","fileIconSrc","FieldHelper","getPathForIconSource","fileLinkText","getFilenameExpr","fileLinkHref","getDownloadUrl","fileTextVisible","AcceptableMediaTypes","acceptedTypes","Array","from","map","fileAcceptableMediaTypes","join","fileMaximumSize","calculateMBfromByte","maxLength","avatarVisible","avatarSrc","Target","contactVisible","dataFieldObject","getObject","buttonPress","getPressEventForDataFieldActionButton","ActionTarget","buttonIsBound","buttonOperationAvailable","buttonOperationAvailableFormatted","Log","warning","Action","isBound","OperationAvailable","actionTarget","bindingParamName","parameters","startsWith","replace","CommonHelper","getPressHandlerForDataFieldForIBN","setUpNavigationAvailable","text","getTextWithWhiteSpace","linkIsDataFieldWithIntentBasedNavigation","linkPress","linkIsDataFieldWithNavigationPath","value","linkIsDataFieldWithAction","hasQuickView","isUsedInNavigationWithQuickViewFacets","hasSemanticObjects","getPropertyWithSemanticObject","semanticObject","isSemanticKey","hasSituationsIndicator","SituationsIndicatorBlock","getSituationsNavigationProperty","setUpObjectIdentifierTitleAndText","contextLocation","targetEntitySet","DraftRoot","draftIndicatorVisible","getDraftIndicatorVisibleBinding","showErrorIndicator","_type","fieldGroupDraftIndicatorPropertyPath","situationsIndicatorPropertyPath","Criticality","linkUrl","Url","String","isCurrencyAligned","valueAsStringBindingExpression","unitBindingExpression","getBindingForUnitOrCurrency","Communication","IsEmailAddress","IsPhoneNumber","linkIsEmailAddress","linkIsPhoneNumber","propertyValueBinding","MultiLineText","iconUrl","IconUrl","setUpEditStyle","appComponent","setEditStyleProperties","fieldGroupIds","computeFieldGroupIds","dataModelObjectPath","sideEffectService","getSideEffectsService","result","_oProps","identifierTitle","identifierText","getTextBinding","navigationAvailable","NavigationAvailable","ignoreNavigationAvailable","setUpValueState","fieldProps","dataModelPath","valueStateExp","fieldContainerType","dataSourcePath","additionalValueFormatter","formatValueState","valueState","props","controlConfiguration","settings","ratingIndicatorTooltip","ratingIndicatorTargetValue","oDataFieldConverted","MetaModelConverter","convertMetaModelContext","getInvolvedDataModelObjects","_apiId","_vhFlexId","vhIdPrefix","valueDataModelPath","getDataModelObjectPathForValue","getTargetObjectPath","metaModel","entityType","createBindingContext","aDisplayStylesWithoutPropText","indexOf","emptyIndicatorMode","showEmptyIndicator","isProperty","DataFieldDefault","getTemplate","getFieldStructureTemplate","BuildingBlockBase"],"sourceRoot":"internal","sources":["InternalField.block.ts"],"sourcesContent":["import type { Action, EntitySet, PathAnnotationExpression, Property } from \"@sap-ux/vocabularies-types\";\nimport type { DataField } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTerms, UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport * as CollaborationFormatters from \"sap/fe/core/formatters/CollaborationFormatter\";\nimport valueFormatters from \"sap/fe/core/formatters/ValueFormatter\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport {\n\tand,\n\tcompileExpression,\n\tconstant,\n\tequal,\n\tfn,\n\tformatResult,\n\tformatWithTypeInformation,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tnot,\n\tpathInModel,\n\twrapBindingExpression\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf, StrictPropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport {\n\tgetRequiredPropertiesFromInsertRestrictions,\n\tgetRequiredPropertiesFromUpdateRestrictions\n} from \"sap/fe/core/helpers/MetaModelFunction\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { getTitleBindingExpression } from \"sap/fe/core/helpers/TitleHelper\";\nimport { isProperty } from \"sap/fe/core/helpers/TypeGuards\";\nimport {\n\tDataModelObjectPath,\n\tenhanceDataModelPath,\n\tgetContextRelativeTargetObjectPath,\n\tgetRelativePaths,\n\tgetTargetObjectPath\n} from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { PropertyOrPath } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport { isSemanticKey } from \"sap/fe/core/templating/PropertyHelper\";\nimport type { DisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport * as UIFormatters from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport * as FieldTemplating from \"sap/fe/macros/field/FieldTemplating\";\nimport { getTextBindingExpression } from \"sap/fe/macros/field/FieldTemplating\";\nimport SituationsIndicatorBlock from \"sap/fe/macros/situations/SituationsIndicator.block\";\nimport EditMode from \"sap/ui/mdc/enum/EditMode\";\nimport type Context from \"sap/ui/model/Context\";\nimport FieldHelper from \"../field/FieldHelper\";\nimport getFieldStructureTemplate from \"./field/FieldStructure\";\nimport additionalValueFormatter from \"./valuehelp/AdditionalValueFormatter\";\n\nexport type DisplayStyle =\n\t| \"Text\"\n\t| \"Avatar\"\n\t| \"File\"\n\t| \"DataPoint\"\n\t| \"Contact\"\n\t| \"Button\"\n\t| \"Link\"\n\t| \"ObjectStatus\"\n\t| \"AmountWithCurrency\"\n\t| \"SemanticKeyWithDraftIndicator\"\n\t| \"ObjectIdentifier\"\n\t| \"LabelSemanticKey\"\n\t| \"LinkWithQuickView\"\n\t| \"ExpandableText\";\n\ntype EditStyle =\n\t| \"InputWithValueHelp\"\n\t| \"TextArea\"\n\t| \"File\"\n\t| \"DatePicker\"\n\t| \"TimePicker\"\n\t| \"DateTimePicker\"\n\t| \"CheckBox\"\n\t| \"InputWithUnit\"\n\t| \"Input\"\n\t| \"RatingIndicator\";\n\ntype FieldFormatOptions = Partial<{\n\tdisplayMode: DisplayMode;\n\tfieldMode: string;\n\thasDraftIndicator: boolean; // TODO is this used?\n\tisAnalytics: boolean;\n\t/** If true and if the field is part of an inactive row, then a check will be done to determine if the underlying property has a non-insertable restriction */\n\tforInlineCreationRows: boolean;\n\t/** If true then the navigationavailable property will not be used for the enablement of the IBN button */\n\tignoreNavigationAvailable: boolean;\n\tisCurrencyAligned: boolean;\n\tmeasureDisplayMode: string;\n\t/** Enables the fallback feature for the usage of the text annotation from the value lists */\n\tretrieveTextFromValueList: boolean;\n\tsemantickeys: string[];\n\t/** Preferred control to visualize semantic key properties */\n\tsemanticKeyStyle: string;\n\t/** If set to 'true', SAP Fiori elements shows an empty indicator in display mode for the text and links */\n\tshowEmptyIndicator: boolean;\n\t/** If true then sets the given icon instead of text in Action/IBN Button */\n\tshowIconUrl: boolean;\n\t/** Describe how the alignment works between Table mode (Date and Numeric End alignment) and Form mode (numeric aligned End in edit and Begin in display) */\n\ttextAlignMode: string;\n\t/** Maximum number of lines for multiline texts in edit mode */\n\ttextLinesEdit: string;\n\t/** Maximum number of lines that multiline texts in edit mode can grow to */\n\ttextMaxLines: string;\n\tcompactSemanticKey: string;\n\tfieldGroupDraftIndicatorPropertyPath: string;\n\tfieldGroupName: string;\n\ttextMaxLength: number;\n\t/** Maximum number of characters from the beginning of the text field that are shown initially. */\n\ttextMaxCharactersDisplay: number;\n\t/** Defines how the full text will be displayed - InPlace or Popover */\n\ttextExpandBehaviorDisplay: string;\n\tdateFormatOptions?: UIFormatters.dateFormatOptions; // showTime here is used for text formatting only\n}>;\n\nexport type FieldProperties = StrictPropertiesOf<InternalFieldBlock>;\n\n/**\n * Building block for creating a Field based on the metadata provided by OData V4.\n * <br>\n * Usually, a DataField annotation is expected\n *\n * Usage example:\n * <pre>\n * <internalMacro:Field\n *   idPrefix=\"SomePrefix\"\n *   contextPath=\"{entitySet>}\"\n *   metaPath=\"{dataField>}\"\n * />\n * </pre>\n *\n * @hideconstructor\n * @private\n * @experimental\n * @since 1.94.0\n */\n@defineBuildingBlock({\n\tname: \"Field\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tdesigntime: \"sap/fe/macros/internal/Field.designtime\"\n})\nexport default class InternalFieldBlock extends BuildingBlockBase {\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic dataSourcePath?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic emptyIndicatorMode?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic _flexId?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic idPrefix?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic _apiId?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic noWrapperId?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic vhIdPrefix: string = \"FieldValueHelp\";\n\n\t/**\n\t * Metadata path to the entity set\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tpublic entitySet!: Context;\n\n\t/**\n\t * Flag indicating whether action will navigate after execution\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tpublic navigateAfterAction: boolean = true;\n\n\t/**\n\t * Metadata path to the dataField.\n\t * This property is usually a metadataContext pointing to a DataField having\n\t * $Type of DataField, DataFieldWithUrl, DataFieldForAnnotation, DataFieldForAction, DataFieldForIntentBasedNavigation, DataFieldWithNavigationPath, or DataPointType.\n\t * But it can also be a Property with $kind=\"Property\"\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\texpectedTypes: [\"Property\"],\n\t\texpectedAnnotationTypes: [\n\t\t\t\"com.sap.vocabularies.UI.v1.DataField\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithUrl\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAction\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithAction\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataPointType\"\n\t\t]\n\t})\n\tpublic dataField!: Context;\n\n\t/**\n\t * Edit Mode of the field.\n\t *\n\t * If the editMode is undefined then we compute it based on the metadata\n\t * Otherwise we use the value provided here.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.mdc.enum.EditMode\"\n\t})\n\tpublic editMode?: EditMode | CompiledBindingToolkitExpression;\n\n\t/**\n\t * Wrap field\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tpublic wrap?: boolean;\n\n\t/**\n\t * CSS class for margin\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic class?: string;\n\n\t/**\n\t * Property added to associate the label with the Field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic ariaLabelledBy?: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.core.TextAlign\"\n\t})\n\tpublic textAlign?: string;\n\n\t/**\n\t * Option to add a semantic object to a field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: false\n\t})\n\tpublic semanticObject?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic requiredExpression?: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tpublic visible?: boolean | CompiledBindingToolkitExpression;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tshowErrorObjectStatus?: boolean | CompiledBindingToolkitExpression;\n\n\t@blockAttribute({\n\t\ttype: \"object\",\n\t\tvalidate: function (formatOptionsInput: FieldFormatOptions) {\n\t\t\tif (formatOptionsInput.textAlignMode && ![\"Table\", \"Form\"].includes(formatOptionsInput.textAlignMode)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.textAlignMode} for textAlignMode does not match`);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformatOptionsInput.displayMode &&\n\t\t\t\t![\"Value\", \"Description\", \"ValueDescription\", \"DescriptionValue\"].includes(formatOptionsInput.displayMode)\n\t\t\t) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.displayMode} for displayMode does not match`);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput.fieldMode && ![\"nowrapper\", \"\"].includes(formatOptionsInput.fieldMode)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.fieldMode} for fieldMode does not match`);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput.measureDisplayMode && ![\"Hidden\", \"ReadOnly\"].includes(formatOptionsInput.measureDisplayMode)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.measureDisplayMode} for measureDisplayMode does not match`);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformatOptionsInput.textExpandBehaviorDisplay &&\n\t\t\t\t![\"InPlace\", \"Popover\"].includes(formatOptionsInput.textExpandBehaviorDisplay)\n\t\t\t) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Allowed value ${formatOptionsInput.textExpandBehaviorDisplay} for textExpandBehaviorDisplay does not match`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (formatOptionsInput.semanticKeyStyle && ![\"ObjectIdentifier\", \"Label\", \"\"].includes(formatOptionsInput.semanticKeyStyle)) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.semanticKeyStyle} for semanticKeyStyle does not match`);\n\t\t\t}\n\n\t\t\tif (typeof formatOptionsInput.isAnalytics === \"string\") {\n\t\t\t\tformatOptionsInput.isAnalytics = formatOptionsInput.isAnalytics === \"true\";\n\t\t\t}\n\n\t\t\tif (typeof formatOptionsInput.forInlineCreationRows === \"string\") {\n\t\t\t\tformatOptionsInput.forInlineCreationRows = formatOptionsInput.forInlineCreationRows === \"true\";\n\t\t\t}\n\n\t\t\t/*\n\t\t\tHistorical default values are currently disabled\n\t\t\tif (!formatOptionsInput.semanticKeyStyle) {\n\t\t\t\tformatOptionsInput.semanticKeyStyle = \"\";\n\t\t\t}\n\t\t\t*/\n\n\t\t\treturn formatOptionsInput;\n\t\t}\n\t})\n\tpublic formatOptions: FieldFormatOptions = {};\n\n\t/**\n\t * Metadata path to the entity set.\n\t * This is used in inner fragments, so we need to declare it as block attribute context.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tentityType?: Context;\n\n\t/**\n\t * This is used in inner fragments, so we need to declare it as block attribute.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tcollaborationEnabled?: boolean;\n\n\t/**\n\t * This is used in inner fragments, so we need to declare it as block attribute.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\t_vhFlexId?: string;\n\n\t/**\n\t * This is used to set valueState on the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tvalueState?: CompiledBindingToolkitExpression;\n\n\t/**\n\t * Event handler for change event\n\t */\n\t@blockEvent()\n\tonChange?: string;\n\n\t// Computed properties\n\n\teditableExpression: string | CompiledBindingToolkitExpression;\n\n\tenabledExpression: string | CompiledBindingToolkitExpression;\n\n\tcollaborationHasActivityExpression: string | CompiledBindingToolkitExpression;\n\n\tcollaborationInitialsExpression: string | CompiledBindingToolkitExpression;\n\n\tcollaborationColorExpression: string | CompiledBindingToolkitExpression;\n\n\tdescriptionBindingExpression?: string;\n\n\tdisplayVisible?: string | boolean;\n\n\teditModeAsObject?: any;\n\n\teditStyle?: EditStyle | null;\n\n\thasQuickView = false;\n\n\tnavigationAvailable?: boolean | string;\n\n\tshowTimezone?: boolean;\n\n\ttext?: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\n\tidentifierTitle?: CompiledBindingToolkitExpression;\n\n\tidentifierText?: CompiledBindingToolkitExpression;\n\n\ttextBindingExpression?: CompiledBindingToolkitExpression;\n\n\tunitBindingExpression?: string;\n\n\tvalueBindingExpression?: CompiledBindingToolkitExpression;\n\n\tvalueAsStringBindingExpression?: CompiledBindingToolkitExpression;\n\n\t// (start) Computed properties for Link.fragment.xml\n\n\tlinkUrl?: CompiledBindingToolkitExpression = undefined;\n\n\tlinkIsDataFieldWithIntentBasedNavigation: boolean = false;\n\n\tlinkIsDataFieldWithNavigationPath: boolean = false;\n\n\tlinkIsDataFieldWithAction: boolean = false;\n\n\tlinkIsEmailAddress: boolean = false;\n\n\tlinkIsPhoneNumber: boolean = false;\n\n\tlinkPress?: CompiledBindingToolkitExpression = undefined;\n\n\t// (end) Computed properties for Link.fragment.xml\n\n\ticonUrl?: string | CompiledBindingToolkitExpression;\n\n\tdisplayStyle?: DisplayStyle;\n\n\thasSituationsIndicator?: boolean;\n\n\tavatarVisible?: CompiledBindingToolkitExpression;\n\n\tavatarSrc?: CompiledBindingToolkitExpression;\n\n\t// (start) Computed properties for File.fragment.xml\n\n\tfileRelativePropertyPath?: string;\n\n\tfileFilenameExpression?: CompiledBindingToolkitExpression = undefined;\n\n\tfileStreamNotEmpty?: CompiledBindingToolkitExpression;\n\n\tfileUploadUrl?: CompiledBindingToolkitExpression;\n\n\tfileFilenamePath?: CompiledBindingToolkitExpression;\n\n\tfileMediaType?: CompiledBindingToolkitExpression;\n\n\tfileIsImage?: boolean;\n\n\tfileAvatarSrc?: CompiledBindingToolkitExpression;\n\n\tfileIconSrc?: CompiledBindingToolkitExpression;\n\n\tfileLinkText?: CompiledBindingToolkitExpression;\n\n\tfileLinkHref?: CompiledBindingToolkitExpression;\n\n\tfileTextVisible?: CompiledBindingToolkitExpression;\n\n\tfileAcceptableMediaTypes?: string = undefined;\n\n\tfileMaximumSize?: string;\n\n\t// (end) Computed properties for File.fragment.xml\n\n\tcontactVisible?: CompiledBindingToolkitExpression;\n\n\tbuttonPress?: CompiledBindingToolkitExpression;\n\n\tbuttonIsBound?: string | boolean;\n\n\tbuttonOperationAvailable?: string;\n\n\tbuttonOperationAvailableFormatted?: string;\n\n\tfieldGroupIds?: string;\n\t/* Display style common properties start */\n\thasUnitOrCurrency?: boolean = undefined;\n\n\thasValidAnalyticalCurrencyOrUnit?: CompiledBindingToolkitExpression = undefined;\n\n\ttextFromValueList?: CompiledBindingToolkitExpression = undefined;\n\t/* AmountWith currency fragment end */\n\n\t/* Edit style common properties start */\n\teditStyleId?: string = undefined;\n\n\t/**\n\t * This is used in inner fragments, so we need to declare it as block attribute.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\teditStylePlaceholder?: string;\n\t/* Edit style common properties end */\n\n\t/* Rating Indicator properties start */\n\tratingIndicatorTooltip?: CompiledBindingToolkitExpression = undefined;\n\n\tratingIndicatorTargetValue?: CompiledBindingToolkitExpression = undefined;\n\t/* Rating Indicator properties end */\n\n\t/* InputWithUnit start */\n\tunitEditable?: string;\n\n\tstaticUnit?: string;\n\n\tvalueInputWidth?: string;\n\n\tvalueInputFieldWidth?: string;\n\n\tunitInputVisible?: CompiledBindingToolkitExpression;\n\n\t/* InputWithUnit end */\n\n\t/*ObjectIdentifier start */\n\tshowErrorIndicator = false;\n\n\tsituationsIndicatorPropertyPath = \"\";\n\t/* ObjectIdentifier end */\n\n\t/*SemanticKeyWithDraftIndicator start*/\n\tdraftIndicatorVisible?: string;\n\t/*SemanticKeyWithDraftIndicator end*/\n\n\tstatic getOverrides(mControlConfiguration: any, sID: string) {\n\t\tconst oProps: { [index: string]: any } = {};\n\t\tif (mControlConfiguration) {\n\t\t\tconst oControlConfig = mControlConfiguration[sID];\n\t\t\tif (oControlConfig) {\n\t\t\t\tObject.keys(oControlConfig).forEach(function (sConfigKey) {\n\t\t\t\t\toProps[sConfigKey] = oControlConfig[sConfigKey];\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn oProps;\n\t}\n\n\tstatic getIdentifierTitle(\n\t\tfieldFormatOptions: FieldFormatOptions,\n\t\tfullContextPath: DataModelObjectPath,\n\t\talwaysShowDescriptionAndValue: boolean\n\t): CompiledBindingToolkitExpression {\n\t\treturn getTitleBindingExpression(\n\t\t\tfullContextPath,\n\t\t\tgetTextBindingExpression,\n\t\t\tfieldFormatOptions,\n\t\t\tundefined,\n\t\t\tundefined,\n\t\t\talwaysShowDescriptionAndValue\n\t\t);\n\t}\n\n\tstatic getObjectIdentifierText(\n\t\tfieldFormatOptions: FieldFormatOptions,\n\t\toPropertyDataModelObjectPath: DataModelObjectPath\n\t): CompiledBindingToolkitExpression {\n\t\tlet propertyBindingExpression: BindingToolkitExpression<any> = pathInModel(\n\t\t\tgetContextRelativeTargetObjectPath(oPropertyDataModelObjectPath)\n\t\t);\n\t\tconst targetDisplayMode = fieldFormatOptions?.displayMode;\n\t\tconst oPropertyDefinition =\n\t\t\toPropertyDataModelObjectPath.targetObject.type === \"PropertyPath\"\n\t\t\t\t? (oPropertyDataModelObjectPath.targetObject.$target as Property)\n\t\t\t\t: (oPropertyDataModelObjectPath.targetObject as Property);\n\n\t\tconst commonText = oPropertyDefinition.annotations?.Common?.Text;\n\t\tif (commonText === undefined || commonText?.annotations?.UI?.TextArrangement) {\n\t\t\treturn undefined;\n\t\t}\n\t\tpropertyBindingExpression = formatWithTypeInformation(oPropertyDefinition, propertyBindingExpression);\n\n\t\tswitch (targetDisplayMode) {\n\t\t\tcase \"ValueDescription\":\n\t\t\t\tconst relativeLocation = getRelativePaths(oPropertyDataModelObjectPath);\n\t\t\t\treturn compileExpression(getExpressionFromAnnotation(commonText, relativeLocation) as BindingToolkitExpression<string>);\n\t\t\tcase \"DescriptionValue\":\n\t\t\t\treturn compileExpression(formatResult([propertyBindingExpression], valueFormatters.formatToKeepWhitespace));\n\t\t\tdefault:\n\t\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tstatic setUpDataPointType(oDataField: any) {\n\t\t// data point annotations need not have $Type defined, so add it if missing\n\t\tif (oDataField?.term === \"com.sap.vocabularies.UI.v1.DataPoint\") {\n\t\t\toDataField.$Type = oDataField.$Type || UIAnnotationTypes.DataPointType;\n\t\t}\n\t}\n\n\tstatic setUpVisibleProperties(oFieldProps: FieldProperties, oPropertyDataModelObjectPath: DataModelObjectPath) {\n\t\t// we do this before enhancing the dataModelPath so that it still points at the DataField\n\t\toFieldProps.visible = FieldTemplating.getVisibleExpression(oPropertyDataModelObjectPath, oFieldProps.formatOptions);\n\t\toFieldProps.displayVisible = oFieldProps.formatOptions.fieldMode === \"nowrapper\" ? oFieldProps.visible : undefined;\n\t}\n\n\tstatic getContentId(sMacroId: string) {\n\t\treturn `${sMacroId}-content`;\n\t}\n\n\tstatic setUpEditableProperties(oProps: FieldProperties, oDataField: any, oDataModelPath: DataModelObjectPath, oMetaModel: any): void {\n\t\tconst oPropertyForFieldControl = oDataModelPath?.targetObject?.Value\n\t\t\t? oDataModelPath.targetObject.Value\n\t\t\t: oDataModelPath?.targetObject;\n\n\t\tlet hasPropertyInsertRestrictions: boolean = false;\n\t\tif (oProps.formatOptions?.forInlineCreationRows === true) {\n\t\t\thasPropertyInsertRestrictions = FieldTemplating.hasPropertyInsertRestrictions(oDataModelPath);\n\t\t}\n\t\tif (oProps.editMode !== undefined && oProps.editMode !== null) {\n\t\t\t// Even if it provided as a string it's a valid part of a binding expression that can be later combined into something else.\n\t\t\toProps.editModeAsObject = oProps.editMode;\n\t\t} else {\n\t\t\tconst bMeasureReadOnly = oProps.formatOptions.measureDisplayMode\n\t\t\t\t? oProps.formatOptions.measureDisplayMode === \"ReadOnly\"\n\t\t\t\t: false;\n\n\t\t\toProps.editModeAsObject = UIFormatters.getEditMode(\n\t\t\t\toPropertyForFieldControl,\n\t\t\t\toDataModelPath,\n\t\t\t\tbMeasureReadOnly,\n\t\t\t\ttrue,\n\t\t\t\toDataField\n\t\t\t);\n\t\t\toProps.editMode = compileExpression(\n\t\t\t\tifElse(and(pathInModel(\"@$ui5.context.isInactive\"), hasPropertyInsertRestrictions), \"Display\", oProps.editModeAsObject)\n\t\t\t);\n\t\t}\n\t\tconst editableExpression = UIFormatters.getEditableExpressionAsObject(oPropertyForFieldControl, oDataField, oDataModelPath);\n\t\tconst aRequiredPropertiesFromInsertRestrictions = getRequiredPropertiesFromInsertRestrictions(\n\t\t\toProps.entitySet?.getPath().replaceAll(\"/$NavigationPropertyBinding/\", \"/\"),\n\t\t\toMetaModel\n\t\t);\n\t\tconst aRequiredPropertiesFromUpdateRestrictions = getRequiredPropertiesFromUpdateRestrictions(\n\t\t\toProps.entitySet?.getPath().replaceAll(\"/$NavigationPropertyBinding/\", \"/\"),\n\t\t\toMetaModel\n\t\t);\n\t\tconst oRequiredProperties = {\n\t\t\trequiredPropertiesFromInsertRestrictions: aRequiredPropertiesFromInsertRestrictions,\n\t\t\trequiredPropertiesFromUpdateRestrictions: aRequiredPropertiesFromUpdateRestrictions\n\t\t};\n\t\tif (ModelHelper.isCollaborationDraftSupported(oMetaModel) && oProps.editMode !== EditMode.Display) {\n\t\t\toProps.collaborationEnabled = true;\n\t\t\t// Expressions needed for Collaboration Visualization\n\t\t\tconst collaborationExpression = UIFormatters.getCollaborationExpression(\n\t\t\t\toDataModelPath,\n\t\t\t\tCollaborationFormatters.hasCollaborationActivity\n\t\t\t);\n\t\t\toProps.collaborationHasActivityExpression = compileExpression(collaborationExpression);\n\t\t\toProps.collaborationInitialsExpression = compileExpression(\n\t\t\t\tUIFormatters.getCollaborationExpression(oDataModelPath, CollaborationFormatters.getCollaborationActivityInitials)\n\t\t\t);\n\t\t\toProps.collaborationColorExpression = compileExpression(\n\t\t\t\tUIFormatters.getCollaborationExpression(oDataModelPath, CollaborationFormatters.getCollaborationActivityColor)\n\t\t\t);\n\t\t\toProps.editableExpression = compileExpression(and(editableExpression, not(collaborationExpression)));\n\n\t\t\toProps.editMode = compileExpression(ifElse(collaborationExpression, constant(\"ReadOnly\"), oProps.editModeAsObject));\n\t\t} else {\n\t\t\toProps.editableExpression = compileExpression(editableExpression);\n\t\t}\n\t\toProps.enabledExpression = UIFormatters.getEnabledExpression(\n\t\t\toPropertyForFieldControl,\n\t\t\toDataField,\n\t\t\tfalse,\n\t\t\toDataModelPath\n\t\t) as CompiledBindingToolkitExpression;\n\t\toProps.requiredExpression = UIFormatters.getRequiredExpression(\n\t\t\toPropertyForFieldControl,\n\t\t\toDataField,\n\t\t\tfalse,\n\t\t\tfalse,\n\t\t\toRequiredProperties,\n\t\t\toDataModelPath\n\t\t) as CompiledBindingToolkitExpression;\n\n\t\tif (oProps.idPrefix) {\n\t\t\toProps.editStyleId = generate([oProps.idPrefix, \"Field-edit\"]);\n\t\t}\n\t}\n\n\tstatic setUpFormatOptions(oProps: FieldProperties, oDataModelPath: DataModelObjectPath, oControlConfiguration: any, mSettings: any) {\n\t\tconst oOverrideProps = InternalFieldBlock.getOverrides(oControlConfiguration, oProps.dataField.getPath());\n\n\t\tif (!oProps.formatOptions.displayMode) {\n\t\t\toProps.formatOptions.displayMode = UIFormatters.getDisplayMode(oDataModelPath);\n\t\t}\n\t\toProps.formatOptions.textLinesEdit =\n\t\t\toOverrideProps.textLinesEdit ||\n\t\t\t(oOverrideProps.formatOptions && oOverrideProps.formatOptions.textLinesEdit) ||\n\t\t\toProps.formatOptions.textLinesEdit ||\n\t\t\t4;\n\t\toProps.formatOptions.textMaxLines =\n\t\t\toOverrideProps.textMaxLines ||\n\t\t\t(oOverrideProps.formatOptions && oOverrideProps.formatOptions.textMaxLines) ||\n\t\t\toProps.formatOptions.textMaxLines;\n\n\t\t// Retrieve text from value list as fallback feature for missing text annotation on the property\n\t\tif (mSettings.models.viewData?.getProperty(\"/retrieveTextFromValueList\")) {\n\t\t\toProps.formatOptions.retrieveTextFromValueList = FieldTemplating.isRetrieveTextFromValueListEnabled(\n\t\t\t\toDataModelPath.targetObject,\n\t\t\t\toProps.formatOptions\n\t\t\t);\n\t\t\tif (oProps.formatOptions.retrieveTextFromValueList) {\n\t\t\t\t// Consider TextArrangement at EntityType otherwise set default display format 'DescriptionValue'\n\t\t\t\tconst hasEntityTextArrangement = !!oDataModelPath?.targetEntityType?.annotations?.UI?.TextArrangement;\n\t\t\t\toProps.formatOptions.displayMode = hasEntityTextArrangement ? oProps.formatOptions.displayMode : \"DescriptionValue\";\n\t\t\t}\n\t\t}\n\t\tif (oProps.formatOptions.fieldMode === \"nowrapper\" && oProps.editMode === \"Display\") {\n\t\t\tif (oProps._flexId) {\n\t\t\t\toProps.noWrapperId = oProps._flexId;\n\t\t\t} else {\n\t\t\t\toProps.noWrapperId = oProps.idPrefix ? generate([oProps.idPrefix, \"Field-content\"]) : undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic setUpDisplayStyle(oProps: FieldProperties, oDataField: any, oDataModelPath: DataModelObjectPath): void {\n\t\tconst oProperty: Property = oDataModelPath.targetObject as Property;\n\t\tif (!oDataModelPath.targetObject) {\n\t\t\toProps.displayStyle = \"Text\";\n\t\t\treturn;\n\t\t}\n\n\t\toProps.hasUnitOrCurrency =\n\t\t\toProperty.annotations?.Measures?.Unit !== undefined || oProperty.annotations?.Measures?.ISOCurrency !== undefined;\n\t\toProps.hasValidAnalyticalCurrencyOrUnit = UIFormatters.hasValidAnalyticalCurrencyOrUnit(oDataModelPath);\n\t\toProps.textFromValueList = wrapBindingExpression(\n\t\t\tcompileExpression(\n\t\t\t\tfn(\"FieldRuntime.retrieveTextFromValueList\", [\n\t\t\t\t\tpathInModel(getContextRelativeTargetObjectPath(oDataModelPath)),\n\t\t\t\t\t`/${oProperty.fullyQualifiedName}`,\n\t\t\t\t\toProps.formatOptions.displayMode\n\t\t\t\t])\n\t\t\t) as string,\n\t\t\tfalse\n\t\t);\n\n\t\tif (oProperty.type === \"Edm.Stream\") {\n\t\t\t// Common\n\t\t\toProps.displayStyle = \"File\";\n\t\t\toProps.fileRelativePropertyPath = getContextRelativeTargetObjectPath(oDataModelPath);\n\t\t\tif (oProperty.annotations.Core?.ContentDisposition?.Filename) {\n\t\t\t\tconst fileNameDataModelPath = enhanceDataModelPath(\n\t\t\t\t\toDataModelPath,\n\t\t\t\t\toProperty.annotations.Core?.ContentDisposition?.Filename as PropertyOrPath<Property>\n\t\t\t\t);\n\t\t\t\t// This causes an expression parsing error: compileExpression(pathInModel(getContextRelativeTargetObjectPath(fileNameDataModelPath)));\n\t\t\t\toProps.fileFilenameExpression = \"{ path: '\" + getContextRelativeTargetObjectPath(fileNameDataModelPath) + \"' }\";\n\t\t\t}\n\t\t\toProps.fileStreamNotEmpty = compileExpression(\n\t\t\t\tnot(equal(pathInModel(`${oProps.fileRelativePropertyPath}@odata.mediaContentType`), null))\n\t\t\t);\n\n\t\t\t// FileWrapper\n\t\t\toProps.fileUploadUrl = FieldTemplating.getValueBinding(oDataModelPath, {});\n\t\t\toProps.fileFilenamePath = (oProperty.annotations.Core?.ContentDisposition?.Filename as PathAnnotationExpression<string>)?.path;\n\t\t\toProps.fileMediaType =\n\t\t\t\toProperty.annotations.Core?.MediaType &&\n\t\t\t\tcompileExpression(getExpressionFromAnnotation(oProperty.annotations.Core?.MediaType));\n\n\t\t\t// template:if\n\t\t\toProps.fileIsImage =\n\t\t\t\t!!oProperty.annotations.UI?.IsImageURL ||\n\t\t\t\t!!oProperty.annotations.UI?.IsImage ||\n\t\t\t\t/image\\//i.test(oProperty.annotations.Core?.MediaType?.toString() ?? \"\");\n\n\t\t\t// Avatar\n\t\t\toProps.fileAvatarSrc = FieldTemplating.getValueBinding(oDataModelPath, {});\n\n\t\t\t// Icon\n\t\t\toProps.fileIconSrc = FieldHelper.getPathForIconSource(oProps.fileRelativePropertyPath);\n\n\t\t\t// Link\n\t\t\toProps.fileLinkText = FieldHelper.getFilenameExpr(\n\t\t\t\toProps.fileFilenameExpression,\n\t\t\t\t\"{sap.fe.i18n>M_FIELD_FILEUPLOADER_NOFILENAME_TEXT}\"\n\t\t\t);\n\t\t\toProps.fileLinkHref = FieldHelper.getDownloadUrl(oProps.fileUploadUrl ?? \"\");\n\n\t\t\t// Text\n\t\t\toProps.fileTextVisible = compileExpression(\n\t\t\t\tequal(pathInModel(`${oProps.fileRelativePropertyPath}@odata.mediaContentType`), null)\n\t\t\t);\n\n\t\t\t// FileUploader\n\t\t\tif (oProperty.annotations.Core?.AcceptableMediaTypes) {\n\t\t\t\tconst acceptedTypes = Array.from(oProperty.annotations.Core.AcceptableMediaTypes as unknown as string[]).map(\n\t\t\t\t\t(type) => `'${type}'`\n\t\t\t\t);\n\t\t\t\toProps.fileAcceptableMediaTypes = `{=odata.collection([${acceptedTypes.join(\",\")}])}`; // This does not feel right, but follows the logic of AnnotationHelper#value\n\t\t\t}\n\t\t\toProps.fileMaximumSize = FieldHelper.calculateMBfromByte(oProperty.maxLength);\n\t\t\treturn;\n\t\t}\n\t\tif (oProperty.annotations?.UI?.IsImageURL) {\n\t\t\toProps.avatarVisible = FieldTemplating.getVisibleExpression(oDataModelPath);\n\t\t\toProps.avatarSrc = FieldTemplating.getValueBinding(oDataModelPath, {});\n\t\t\toProps.displayStyle = \"Avatar\";\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (oDataField.$Type) {\n\t\t\tcase UIAnnotationTypes.DataPointType:\n\t\t\t\toProps.displayStyle = \"DataPoint\";\n\t\t\t\treturn;\n\t\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\t\tif (oDataField.Target?.$target?.$Type === UIAnnotationTypes.DataPointType) {\n\t\t\t\t\toProps.displayStyle = \"DataPoint\";\n\t\t\t\t\treturn;\n\t\t\t\t} else if (oDataField.Target?.$target?.$Type === \"com.sap.vocabularies.Communication.v1.ContactType\") {\n\t\t\t\t\toProps.contactVisible = FieldTemplating.getVisibleExpression(oDataModelPath);\n\t\t\t\t\toProps.displayStyle = \"Contact\";\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTypes.DataFieldForAction:\n\t\t\t\t//Qualms: the getObject is a bad practice, but for now it´s fine as an intermediate step to avoid refactoring of the helper in addition\n\t\t\t\tconst dataFieldObject = oProps.dataField.getObject();\n\t\t\t\toProps.buttonPress = FieldHelper.getPressEventForDataFieldActionButton(oProps, dataFieldObject);\n\t\t\t\toProps.displayStyle = \"Button\";\n\n\t\t\t\t// Gracefully handle non-existing actions\n\t\t\t\tif (oDataField.ActionTarget === undefined) {\n\t\t\t\t\toProps.buttonIsBound = true;\n\t\t\t\t\toProps.buttonOperationAvailable = \"false\";\n\t\t\t\t\toProps.buttonOperationAvailableFormatted = \"false\";\n\t\t\t\t\tLog.warning(\n\t\t\t\t\t\t`Warning: The action '${oDataField.Action}' does not exist. The corresponding action button will be disabled.`\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\toProps.buttonIsBound = oDataField.ActionTarget.isBound;\n\t\t\t\toProps.buttonOperationAvailable = oDataField.ActionTarget.annotations?.Core?.OperationAvailable;\n\t\t\t\toProps.buttonOperationAvailableFormatted = undefined;\n\n\t\t\t\tif (oProps.buttonOperationAvailable) {\n\t\t\t\t\tconst actionTarget = oDataField.ActionTarget as Action;\n\t\t\t\t\tconst bindingParamName = actionTarget.parameters[0].name;\n\t\t\t\t\t//QUALMS, needs to be checked whether this makes sense at that place, might be good in a dedicated helper function\n\t\t\t\t\toProps.buttonOperationAvailableFormatted = compileExpression(\n\t\t\t\t\t\tgetExpressionFromAnnotation(oProps.buttonOperationAvailable, [], undefined, (path: string) => {\n\t\t\t\t\t\t\tif (path.startsWith(bindingParamName)) {\n\t\t\t\t\t\t\t\treturn path.replace(bindingParamName + \"/\", \"\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn path;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\tcase UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n\t\t\t\toProps.buttonPress = CommonHelper.getPressHandlerForDataFieldForIBN(oProps.dataField.getObject(), undefined, undefined);\n\t\t\t\tInternalFieldBlock.setUpNavigationAvailable(oProps, oDataField);\n\t\t\t\toProps.displayStyle = \"Button\";\n\t\t\t\treturn;\n\t\t\tcase UIAnnotationTypes.DataFieldWithIntentBasedNavigation:\n\t\t\t\toProps.text = InternalFieldBlock.getTextWithWhiteSpace(oProps.formatOptions, oDataModelPath);\n\t\t\t\toProps.linkIsDataFieldWithIntentBasedNavigation = true;\n\t\t\t\toProps.linkPress = CommonHelper.getPressHandlerForDataFieldForIBN(oProps.dataField.getObject());\n\t\t\t\toProps.displayStyle = \"Link\";\n\t\t\t\treturn;\n\t\t\tcase UIAnnotationTypes.DataFieldWithNavigationPath:\n\t\t\t\toProps.linkIsDataFieldWithNavigationPath = true;\n\t\t\t\toProps.linkPress = `FieldRuntime.onDataFieldWithNavigationPath(\\${$source>/}, $controller, '${oDataField.Target.value}')`;\n\t\t\t\toProps.displayStyle = \"Link\";\n\t\t\t\treturn;\n\t\t\tcase UIAnnotationTypes.DataFieldWithAction:\n\t\t\t\toProps.linkIsDataFieldWithAction = true;\n\t\t\t\toProps.linkPress = FieldHelper.getPressEventForDataFieldActionButton(oProps, oProps.dataField.getObject());\n\t\t\t\toProps.displayStyle = \"Link\";\n\t\t\t\treturn;\n\t\t}\n\t\tconst hasQuickView = FieldTemplating.isUsedInNavigationWithQuickViewFacets(oDataModelPath, oProperty);\n\t\tconst hasSemanticObjects =\n\t\t\t!!FieldTemplating.getPropertyWithSemanticObject(oDataModelPath) ||\n\t\t\t(oProps.semanticObject !== undefined && oProps.semanticObject !== \"\");\n\t\tif (isSemanticKey(oProperty, oDataModelPath) && oProps.formatOptions.semanticKeyStyle) {\n\t\t\toProps.hasQuickView = hasQuickView || hasSemanticObjects;\n\t\t\toProps.hasSituationsIndicator =\n\t\t\t\tSituationsIndicatorBlock.getSituationsNavigationProperty(oDataModelPath.targetEntityType) !== undefined;\n\t\t\tInternalFieldBlock.setUpObjectIdentifierTitleAndText(oProps, oDataModelPath);\n\t\t\tif (\n\t\t\t\t(oDataModelPath.contextLocation?.targetEntitySet as EntitySet).annotations?.Common?.DraftRoot &&\n\t\t\t\t(oDataModelPath.targetEntitySet as EntitySet)?.annotations?.Common?.DraftRoot\n\t\t\t) {\n\t\t\t\toProps.draftIndicatorVisible = FieldTemplating.getDraftIndicatorVisibleBinding(oDataModelPath.targetObject.name) as string;\n\t\t\t\toProps.displayStyle = \"SemanticKeyWithDraftIndicator\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t\toProps.showErrorIndicator =\n\t\t\t\toDataModelPath.contextLocation?.targetObject._type === \"NavigationProperty\" &&\n\t\t\t\t!oProps.formatOptions.fieldGroupDraftIndicatorPropertyPath;\n\t\t\toProps.situationsIndicatorPropertyPath = oDataModelPath.targetObject.name;\n\n\t\t\toProps.displayStyle = oProps.formatOptions.semanticKeyStyle === \"ObjectIdentifier\" ? \"ObjectIdentifier\" : \"LabelSemanticKey\";\n\t\t\treturn;\n\t\t}\n\t\tif (oDataField.Criticality) {\n\t\t\toProps.hasQuickView = hasQuickView || hasSemanticObjects;\n\t\t\toProps.linkUrl = oDataField.Url ? compileExpression(getExpressionFromAnnotation(oDataField.Url)) : undefined;\n\t\t\toProps.displayStyle = \"ObjectStatus\";\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\toProperty.annotations?.Measures?.ISOCurrency &&\n\t\t\tString(oProps.formatOptions.isCurrencyAligned) === \"true\" &&\n\t\t\toProps.formatOptions.measureDisplayMode !== \"Hidden\"\n\t\t) {\n\t\t\toProps.valueAsStringBindingExpression = FieldTemplating.getValueBinding(\n\t\t\t\toDataModelPath,\n\t\t\t\toProps.formatOptions,\n\t\t\t\ttrue,\n\t\t\t\ttrue,\n\t\t\t\tundefined,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\toProps.unitBindingExpression = compileExpression(UIFormatters.getBindingForUnitOrCurrency(oDataModelPath));\n\t\t\toProps.displayStyle = \"AmountWithCurrency\";\n\n\t\t\treturn;\n\t\t}\n\t\tif (oProperty.annotations?.Communication?.IsEmailAddress || oProperty.annotations?.Communication?.IsPhoneNumber) {\n\t\t\toProps.text = InternalFieldBlock.getTextWithWhiteSpace(oProps.formatOptions, oDataModelPath);\n\t\t\toProps.linkIsEmailAddress = oProperty.annotations.Communication?.IsEmailAddress !== undefined;\n\t\t\toProps.linkIsPhoneNumber = oProperty.annotations.Communication?.IsPhoneNumber !== undefined;\n\t\t\tconst propertyValueBinding = FieldTemplating.getValueBinding(oDataModelPath, {});\n\t\t\tif (oProps.linkIsEmailAddress) {\n\t\t\t\toProps.linkUrl = `mailto:${propertyValueBinding}`;\n\t\t\t}\n\t\t\tif (oProps.linkIsPhoneNumber) {\n\t\t\t\toProps.linkUrl = `tel:${propertyValueBinding}`;\n\t\t\t}\n\t\t\toProps.displayStyle = \"Link\";\n\t\t\treturn;\n\t\t}\n\t\tif (oProperty.annotations?.UI?.MultiLineText) {\n\t\t\toProps.displayStyle = \"ExpandableText\";\n\t\t\treturn;\n\t\t}\n\n\t\tif (hasQuickView || hasSemanticObjects) {\n\t\t\toProps.text = InternalFieldBlock.getTextWithWhiteSpace(oProps.formatOptions, oDataModelPath);\n\t\t\toProps.hasQuickView = true;\n\t\t\toProps.displayStyle = \"LinkWithQuickView\";\n\t\t\treturn;\n\t\t}\n\n\t\tif (oDataField.$Type === UIAnnotationTypes.DataFieldWithUrl) {\n\t\t\toProps.text = InternalFieldBlock.getTextWithWhiteSpace(oProps.formatOptions, oDataModelPath);\n\t\t\toProps.displayStyle = \"Link\";\n\t\t\toProps.iconUrl = oDataField.IconUrl ? compileExpression(getExpressionFromAnnotation(oDataField.IconUrl)) : undefined;\n\t\t\toProps.linkUrl = compileExpression(getExpressionFromAnnotation(oDataField.Url));\n\t\t\treturn;\n\t\t}\n\n\t\toProps.displayStyle = \"Text\";\n\t}\n\n\tstatic setUpEditStyle(\n\t\toProps: FieldProperties,\n\t\toDataField: any,\n\t\toDataModelPath: DataModelObjectPath,\n\t\tappComponent?: AppComponent\n\t): void {\n\t\tFieldTemplating.setEditStyleProperties(oProps, oDataField, oDataModelPath);\n\t\toProps.fieldGroupIds = InternalFieldBlock.computeFieldGroupIds(oDataModelPath, appComponent);\n\t}\n\n\t/**\n\t * Calculate the fieldGroupIds for an Inputor other edit control.\n\t *\n\t * @param dataModelObjectPath\n\t * @param appComponent\n\t * @returns The value for fieldGroupIds\n\t */\n\tstatic computeFieldGroupIds(dataModelObjectPath: DataModelObjectPath, appComponent?: AppComponent): string | undefined {\n\t\tif (!appComponent) {\n\t\t\t//for ValueHelp / Mass edit Templating the appComponent is not passed to the templating\n\t\t\treturn \"\";\n\t\t}\n\t\tconst sideEffectService = appComponent.getSideEffectsService();\n\t\tconst fieldGroupIds = sideEffectService.computeFieldGroupIds(\n\t\t\tdataModelObjectPath.targetEntityType?.fullyQualifiedName ?? \"\",\n\t\t\tdataModelObjectPath.targetObject?.fullyQualifiedName ?? \"\"\n\t\t);\n\t\tconst result = fieldGroupIds.join(\",\");\n\t\treturn result === \"\" ? undefined : result;\n\t}\n\n\tstatic setUpObjectIdentifierTitleAndText(_oProps: FieldProperties, oPropertyDataModelObjectPath: DataModelObjectPath) {\n\t\tif (_oProps.formatOptions?.semanticKeyStyle === \"ObjectIdentifier\") {\n\t\t\t// if DescriptionValue is set by default and property has a quickView,  we show description and value in ObjectIdentifier Title\n\t\t\tconst alwaysShowDescriptionAndValue = _oProps.hasQuickView;\n\t\t\t_oProps.identifierTitle = InternalFieldBlock.getIdentifierTitle(\n\t\t\t\t_oProps.formatOptions,\n\t\t\t\toPropertyDataModelObjectPath,\n\t\t\t\talwaysShowDescriptionAndValue\n\t\t\t);\n\t\t\tif (!alwaysShowDescriptionAndValue) {\n\t\t\t\t_oProps.identifierText = InternalFieldBlock.getObjectIdentifierText(_oProps.formatOptions, oPropertyDataModelObjectPath);\n\t\t\t} else {\n\t\t\t\t_oProps.identifierText = undefined;\n\t\t\t}\n\t\t} else {\n\t\t\t_oProps.identifierTitle = InternalFieldBlock.getIdentifierTitle(_oProps.formatOptions, oPropertyDataModelObjectPath, true);\n\t\t\t_oProps.identifierText = undefined;\n\t\t}\n\t}\n\n\tstatic getTextWithWhiteSpace(formatOptions: FieldFormatOptions, oDataModelPath: DataModelObjectPath) {\n\t\tconst text = FieldTemplating.getTextBinding(oDataModelPath, formatOptions, true);\n\t\treturn (text as any)._type === \"PathInModel\" || typeof text === \"string\"\n\t\t\t? compileExpression(formatResult([text], \"WSR\"))\n\t\t\t: compileExpression(text);\n\t}\n\n\tstatic setUpNavigationAvailable(oProps: FieldProperties, oDataField: any): void {\n\t\toProps.navigationAvailable = true;\n\t\tif (\n\t\t\toDataField?.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation &&\n\t\t\toDataField.NavigationAvailable !== undefined &&\n\t\t\tString(oProps.formatOptions.ignoreNavigationAvailable) !== \"true\"\n\t\t) {\n\t\t\toProps.navigationAvailable = compileExpression(getExpressionFromAnnotation(oDataField.NavigationAvailable));\n\t\t}\n\t}\n\n\tstatic setUpValueState(fieldProps: FieldProperties, dataModelPath: DataModelObjectPath) {\n\t\tlet valueStateExp;\n\t\tconst fieldContainerType = fieldProps.formatOptions.textAlignMode;\n\n\t\tif (fieldContainerType === \"Table\") {\n\t\t\tvalueStateExp = formatResult(\n\t\t\t\t[\n\t\t\t\t\tpathInModel(`/recommendationsData`, \"internal\"),\n\t\t\t\t\tpathInModel(`/currentCtxt`, \"internal\"),\n\t\t\t\t\tfieldProps.dataSourcePath,\n\t\t\t\t\tfieldContainerType\n\t\t\t\t],\n\t\t\t\tadditionalValueFormatter.formatValueState,\n\t\t\t\tdataModelPath.targetEntityType\n\t\t\t);\n\t\t} else {\n\t\t\tvalueStateExp = formatResult(\n\t\t\t\t[\n\t\t\t\t\tpathInModel(`/recommendationsData`, \"internal\"),\n\t\t\t\t\tpathInModel(`/currentCtxt`, \"internal\"),\n\t\t\t\t\tfieldProps.dataSourcePath,\n\t\t\t\t\tfieldContainerType\n\t\t\t\t],\n\t\t\t\tadditionalValueFormatter.formatValueState\n\t\t\t);\n\t\t}\n\n\t\tfieldProps.valueState = compileExpression(valueStateExp);\n\t}\n\n\tconstructor(props: PropertiesOf<InternalFieldBlock>, controlConfiguration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props);\n\t\tconst oDataFieldConverted: DataField = MetaModelConverter.convertMetaModelContext(this.dataField);\n\t\tlet oDataModelPath = MetaModelConverter.getInvolvedDataModelObjects(this.dataField, this.entitySet);\n\t\tInternalFieldBlock.setUpDataPointType(oDataFieldConverted);\n\t\tInternalFieldBlock.setUpVisibleProperties(this, oDataModelPath);\n\n\t\tif (this._flexId) {\n\t\t\tthis._apiId = this._flexId;\n\t\t\tthis._flexId = InternalFieldBlock.getContentId(this._flexId);\n\t\t\tthis._vhFlexId = `${this._flexId}_${this.vhIdPrefix}`;\n\t\t}\n\t\tconst valueDataModelPath = FieldTemplating.getDataModelObjectPathForValue(oDataModelPath);\n\t\toDataModelPath = valueDataModelPath || oDataModelPath;\n\t\tthis.dataSourcePath = getTargetObjectPath(oDataModelPath);\n\t\tconst oMetaModel = settings.models.metaModel || settings.models.entitySet;\n\t\tthis.entityType = oMetaModel.createBindingContext(`/${oDataModelPath.targetEntityType.fullyQualifiedName}`);\n\n\t\tInternalFieldBlock.setUpEditableProperties(this, oDataFieldConverted, oDataModelPath, oMetaModel);\n\t\tInternalFieldBlock.setUpFormatOptions(this, oDataModelPath, controlConfiguration, settings);\n\t\tInternalFieldBlock.setUpDisplayStyle(this, oDataFieldConverted, oDataModelPath);\n\t\tInternalFieldBlock.setUpEditStyle(this, oDataFieldConverted, oDataModelPath, settings.appComponent);\n\t\tInternalFieldBlock.setUpValueState(this, oDataModelPath);\n\n\t\t// ---------------------------------------- compute bindings----------------------------------------------------\n\t\tconst aDisplayStylesWithoutPropText = [\"Avatar\", \"AmountWithCurrency\"];\n\t\tif (this.displayStyle && aDisplayStylesWithoutPropText.indexOf(this.displayStyle) === -1 && oDataModelPath.targetObject) {\n\t\t\tthis.text = this.text ?? FieldTemplating.getTextBinding(oDataModelPath, this.formatOptions);\n\t\t} else {\n\t\t\tthis.text = \"\";\n\t\t}\n\n\t\tthis.emptyIndicatorMode = this.formatOptions.showEmptyIndicator ? \"On\" : undefined;\n\n\t\t// If the target is a property with a DataFieldDefault, use this as data field\n\t\tif (isProperty(oDataFieldConverted) && oDataFieldConverted.annotations?.UI?.DataFieldDefault !== undefined) {\n\t\t\tthis.dataField = oMetaModel.createBindingContext(`@${UIAnnotationTerms.DataFieldDefault}`, this.dataField);\n\t\t}\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\treturn getFieldStructureTemplate(this);\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":16827,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlockBase","BuildingBlockSupport","MetaModelConverter","CollaborationFormatters","valueFormatters","BindingToolkit","MetaModelFunction","ModelHelper","StableIdHelper","TitleHelper","TypeGuards","DataModelPathHelper","PropertyHelper","UIFormatters","CommonHelper","FieldTemplating","SituationsIndicatorBlock","EditMode","FieldHelper","getFieldStructureTemplate","additionalValueFormatter","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_exports","getTextBindingExpression","isSemanticKey","getTargetObjectPath","getRelativePaths","getContextRelativeTargetObjectPath","enhanceDataModelPath","isProperty","getTitleBindingExpression","generate","getRequiredPropertiesFromUpdateRestrictions","getRequiredPropertiesFromInsertRestrictions","wrapBindingExpression","pathInModel","not","ifElse","getExpressionFromAnnotation","formatWithTypeInformation","formatResult","fn","equal","constant","compileExpression","and","defineBuildingBlock","blockEvent","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","InternalFieldBlock","name","namespace","designtime","type","required","expectedTypes","expectedAnnotationTypes","validate","formatOptionsInput","textAlignMode","includes","displayMode","fieldMode","measureDisplayMode","textExpandBehaviorDisplay","semanticKeyStyle","isAnalytics","forInlineCreationRows","_BuildingBlockBase","getOverrides","mControlConfiguration","sID","oProps","oControlConfig","sConfigKey","getIdentifierTitle","fieldFormatOptions","fullContextPath","alwaysShowDescriptionAndValue","getObjectIdentifierText","oPropertyDataModelObjectPath","_oPropertyDefinition$","_oPropertyDefinition$2","_commonText$annotatio","_commonText$annotatio2","propertyBindingExpression","targetDisplayMode","oPropertyDefinition","targetObject","$target","commonText","annotations","Common","Text","UI","TextArrangement","relativeLocation","formatToKeepWhitespace","setUpDataPointType","oDataField","term","$Type","setUpVisibleProperties","oFieldProps","visible","getVisibleExpression","formatOptions","displayVisible","getContentId","sMacroId","setUpEditableProperties","oDataModelPath","oMetaModel","_oDataModelPath$targe","_oProps$formatOptions","_oProps$entitySet","_oProps$entitySet2","oPropertyForFieldControl","Value","hasPropertyInsertRestrictions","editMode","editModeAsObject","bMeasureReadOnly","getEditMode","editableExpression","getEditableExpressionAsObject","aRequiredPropertiesFromInsertRestrictions","entitySet","getPath","replaceAll","aRequiredPropertiesFromUpdateRestrictions","oRequiredProperties","requiredPropertiesFromInsertRestrictions","requiredPropertiesFromUpdateRestrictions","isCollaborationDraftSupported","Display","collaborationEnabled","collaborationExpression","getCollaborationExpression","hasCollaborationActivity","collaborationHasActivityExpression","collaborationInitialsExpression","getCollaborationActivityInitials","collaborationColorExpression","getCollaborationActivityColor","enabledExpression","getEnabledExpression","requiredExpression","getRequiredExpression","idPrefix","editStyleId","setUpFormatOptions","oControlConfiguration","mSettings","_mSettings$models$vie","oOverrideProps","dataField","getDisplayMode","textLinesEdit","textMaxLines","models","viewData","getProperty","retrieveTextFromValueList","isRetrieveTextFromValueListEnabled","_oDataModelPath$targe2","_oDataModelPath$targe3","_oDataModelPath$targe4","hasEntityTextArrangement","targetEntityType","_flexId","noWrapperId","setUpDisplayStyle","_oProperty$annotation","_oProperty$annotation2","_oProperty$annotation3","_oProperty$annotation4","_oProperty$annotation19","_oProperty$annotation20","_oDataField$Target","_oDataField$Target$$t","_oDataField$Target2","_oDataField$Target2$$","_oDataField$ActionTar","_oDataField$ActionTar2","_oProperty$annotation21","_oProperty$annotation22","_oProperty$annotation23","_oProperty$annotation24","_oProperty$annotation25","_oProperty$annotation26","_oProperty$annotation29","_oProperty$annotation30","oProperty","displayStyle","hasUnitOrCurrency","Measures","Unit","ISOCurrency","hasValidAnalyticalCurrencyOrUnit","textFromValueList","fullyQualifiedName","_oProperty$annotation5","_oProperty$annotation6","_oProperty$annotation9","_oProperty$annotation10","_oProperty$annotation11","_oProperty$annotation12","_oProperty$annotation13","_oProperty$annotation14","_oProperty$annotation15","_oProperty$annotation16","_oProperty$annotation17","_oProperty$annotation18","fileRelativePropertyPath","Core","ContentDisposition","Filename","_oProperty$annotation7","_oProperty$annotation8","fileNameDataModelPath","fileFilenameExpression","fileStreamNotEmpty","fileUploadUrl","getValueBinding","fileFilenamePath","path","fileMediaType","MediaType","fileIsImage","IsImageURL","IsImage","test","toString","fileAvatarSrc","fileIconSrc","getPathForIconSource","fileLinkText","getFilenameExpr","fileLinkHref","getDownloadUrl","fileTextVisible","AcceptableMediaTypes","acceptedTypes","Array","from","map","fileAcceptableMediaTypes","join","fileMaximumSize","calculateMBfromByte","maxLength","avatarVisible","avatarSrc","Target","contactVisible","dataFieldObject","getObject","buttonPress","getPressEventForDataFieldActionButton","ActionTarget","buttonIsBound","buttonOperationAvailable","buttonOperationAvailableFormatted","warning","Action","isBound","OperationAvailable","actionTarget","bindingParamName","parameters","startsWith","replace","getPressHandlerForDataFieldForIBN","setUpNavigationAvailable","text","getTextWithWhiteSpace","linkIsDataFieldWithIntentBasedNavigation","linkPress","linkIsDataFieldWithNavigationPath","linkIsDataFieldWithAction","hasQuickView","isUsedInNavigationWithQuickViewFacets","hasSemanticObjects","getPropertyWithSemanticObject","semanticObject","_annotations","_annotations$Common","_oDataModelPath$conte","_oDataModelPath$targe5","_oDataModelPath$targe6","_oDataModelPath$targe7","_oDataModelPath$conte2","hasSituationsIndicator","getSituationsNavigationProperty","setUpObjectIdentifierTitleAndText","contextLocation","targetEntitySet","DraftRoot","draftIndicatorVisible","getDraftIndicatorVisibleBinding","showErrorIndicator","_type","fieldGroupDraftIndicatorPropertyPath","situationsIndicatorPropertyPath","Criticality","linkUrl","Url","String","isCurrencyAligned","valueAsStringBindingExpression","unitBindingExpression","getBindingForUnitOrCurrency","Communication","IsEmailAddress","IsPhoneNumber","_oProperty$annotation27","_oProperty$annotation28","linkIsEmailAddress","linkIsPhoneNumber","propertyValueBinding","MultiLineText","iconUrl","IconUrl","setUpEditStyle","appComponent","setEditStyleProperties","fieldGroupIds","computeFieldGroupIds","dataModelObjectPath","_dataModelObjectPath$","_dataModelObjectPath$2","sideEffectService","getSideEffectsService","result","_oProps","_oProps$formatOptions2","identifierTitle","identifierText","getTextBinding","navigationAvailable","NavigationAvailable","ignoreNavigationAvailable","setUpValueState","fieldProps","dataModelPath","valueStateExp","fieldContainerType","dataSourcePath","formatValueState","valueState","props","controlConfiguration","settings","_oDataFieldConverted$","_oDataFieldConverted$2","_this","this","ratingIndicatorTooltip","ratingIndicatorTargetValue","oDataFieldConverted","convertMetaModelContext","getInvolvedDataModelObjects","_apiId","_vhFlexId","vhIdPrefix","valueDataModelPath","getDataModelObjectPathForValue","metaModel","entityType","createBindingContext","aDisplayStylesWithoutPropText","indexOf","emptyIndicatorMode","showEmptyIndicator","DataFieldDefault","_proto","getTemplate"],"sources":["InternalField.block-dbg.js"],"mappings":"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","sourceRoot":"internal"}},{"offset":{"line":16832,"column":0},"map":{"version":3,"names":["getRelatedFieldFromValueHelp","oValueHelp","oView","CommonUtils","getTargetView","findElements","oElem","getFieldHelp","getDomRef","getId","onValueHelpOpenDialog","oEvent","getSource","oField","collaborationHelper","bCollaborationEnabled","CollaborationActivitySync","isConnected","getBinding","sFullPath","isA","getBindingContext","getPath","getBindings","send","Activity","LiveChange","onValueHelpCloseDialog","isCompositeBinding","oValueBeforeUpdate","getValue","Promise","resolve","setTimeout","value","getConditions","values","Undo"],"sourceRoot":"internal","sources":["collaborationHelper.ts"],"sourcesContent":["import CommonUtils from \"sap/fe/core/CommonUtils\";\nimport CollaborationActivitySync from \"sap/fe/core/controllerextensions/collaboration/ActivitySync\";\nimport { Activity } from \"sap/fe/core/controllerextensions/collaboration/CollaborationCommon\";\nimport Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport Field from \"sap/ui/mdc/Field\";\nimport ValueHelp from \"sap/ui/mdc/ValueHelp\";\n\nfunction getRelatedFieldFromValueHelp(oValueHelp: any): Field {\n\tconst oView = CommonUtils.getTargetView(oValueHelp);\n\treturn oView.findElements(true, function (oElem: Control) {\n\t\treturn !!((oElem as Field).getFieldHelp && oElem.getDomRef() && (oElem as Field).getFieldHelp() === oValueHelp.getId());\n\t})[0] as Field;\n}\n\nfunction onValueHelpOpenDialog(oEvent: any) {\n\tconst oValueHelp = oEvent.getSource();\n\tconst oField = collaborationHelper.getRelatedFieldFromValueHelp(oValueHelp);\n\tconst bCollaborationEnabled = CollaborationActivitySync.isConnected(oField);\n\tif (bCollaborationEnabled && oField.getBinding(\"value\")) {\n\t\tconst sFullPath = oField.getBinding(\"value\")?.isA(\"sap.ui.model.CompositeBinding\")\n\t\t\t? // for the compositeBinding, we just send a message containing the path of the first element\n\t\t\t  // it is enough to lock the entire field\n\t\t\t  `${oField.getBindingContext()?.getPath()}/${(oField.getBinding(\"value\") as any)?.getBindings()[0].getPath()}`\n\t\t\t: `${oField.getBindingContext()?.getPath()}/${oField.getBinding(\"value\")?.getPath()}`;\n\t\tCollaborationActivitySync.send(oField, Activity.LiveChange, sFullPath);\n\t}\n}\n\nfunction onValueHelpCloseDialog(oEvent: Event): Promise<void> {\n\tconst oValueHelp = oEvent.getSource() as ValueHelp;\n\tconst oField = collaborationHelper.getRelatedFieldFromValueHelp(oValueHelp);\n\tconst bCollaborationEnabled = CollaborationActivitySync.isConnected(oField);\n\tconst isCompositeBinding = oField.getBinding(\"value\")?.isA(\"sap.ui.model.CompositeBinding\");\n\tconst oValueBeforeUpdate = isCompositeBinding ? oField.getValue()[1] : oField.getValue();\n\n\treturn new Promise((resolve) => {\n\t\tsetTimeout(function () {\n\t\t\tconst value = isCompositeBinding\n\t\t\t\t? (oValueHelp.getConditions()[0] as any).values[0]\n\t\t\t\t: (oField.getBinding(\"value\") as any)?.getValue();\n\t\t\tif (bCollaborationEnabled && oValueBeforeUpdate === value) {\n\t\t\t\tconst sFullPath = isCompositeBinding\n\t\t\t\t\t? `${oField.getBindingContext()?.getPath()}/${(oField.getBinding(\"value\") as any).getBindings()[0].getPath()}`\n\t\t\t\t\t: `${oField.getBindingContext()?.getPath()}/${oField.getBinding(\"value\")?.getPath()}`;\n\n\t\t\t\tCollaborationActivitySync.send(oField, Activity.Undo, sFullPath);\n\t\t\t}\n\t\t\tresolve();\n\t\t}, 0);\n\t});\n}\n\nconst collaborationHelper = {\n\tgetRelatedFieldFromValueHelp,\n\tonValueHelpOpenDialog,\n\tonValueHelpCloseDialog\n};\n\nexport default collaborationHelper;\n"],"mappings":"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"}},{"offset":{"line":16886,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","CollaborationActivitySync","CollaborationCommon","Activity","getRelatedFieldFromValueHelp","oValueHelp","oView","getTargetView","findElements","oElem","getFieldHelp","getDomRef","getId","onValueHelpOpenDialog","oEvent","getSource","oField","collaborationHelper","bCollaborationEnabled","isConnected","getBinding","_oField$getBinding","_oField$getBindingCon","_oField$getBinding2","_oField$getBindingCon2","_oField$getBinding3","sFullPath","isA","getBindingContext","getPath","getBindings","send","LiveChange","onValueHelpCloseDialog","_oField$getBinding4","isCompositeBinding","oValueBeforeUpdate","getValue","Promise","resolve","setTimeout","_oField$getBinding5","value","getConditions","values","_oField$getBindingCon3","_oField$getBindingCon4","_oField$getBinding6","Undo"],"sources":["collaborationHelper-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wDAAO,CAAC,0BAA2B,8DAA+D,sEAAuE,SAAUC,EAAaC,EAA2BC,GAChO,aAEA,IAAIC,EAAWD,EAAoBC,SACnC,SAASC,EAA6BC,GACpC,MAAMC,EAAQN,EAAYO,cAAcF,GACxC,OAAOC,EAAME,aAAa,KAAM,SAAUC,GACxC,SAAUA,EAAMC,cAAgBD,EAAME,aAAeF,EAAMC,iBAAmBL,EAAWO,QAC3F,GAAG,EACL,CACA,SAASC,EAAsBC,GAC7B,MAAMT,EAAaS,EAAOC,YAC1B,MAAMC,EAASC,EAAoBb,6BAA6BC,GAChE,MAAMa,EAAwBjB,EAA0BkB,YAAYH,GACpE,GAAIE,GAAyBF,EAAOI,WAAW,SAAU,CACvD,IAAIC,EAAoBC,EAAuBC,EAAqBC,EAAwBC,EAC5F,MAAMC,GAAaL,EAAqBL,EAAOI,WAAW,YAAc,MAAQC,SAA4B,GAAKA,EAAmBM,IAAI,iCAGxI,IAAIL,EAAwBN,EAAOY,uBAAyB,MAAQN,SAA+B,OAAS,EAAIA,EAAsBO,cAAcN,EAAsBP,EAAOI,WAAW,YAAc,MAAQG,SAA6B,OAAS,EAAIA,EAAoBO,cAAc,GAAGD,YAAc,IAAIL,EAAyBR,EAAOY,uBAAyB,MAAQJ,SAAgC,OAAS,EAAIA,EAAuBK,cAAcJ,EAAsBT,EAAOI,WAAW,YAAc,MAAQK,SAA6B,OAAS,EAAIA,EAAoBI,YAClkB5B,EAA0B8B,KAAKf,EAAQb,EAAS6B,WAAYN,EAC9D,CACF,CACA,SAASO,EAAuBnB,GAC9B,IAAIoB,EACJ,MAAM7B,EAAaS,EAAOC,YAC1B,MAAMC,EAASC,EAAoBb,6BAA6BC,GAChE,MAAMa,EAAwBjB,EAA0BkB,YAAYH,GACpE,MAAMmB,GAAsBD,EAAsBlB,EAAOI,WAAW,YAAc,MAAQc,SAA6B,OAAS,EAAIA,EAAoBP,IAAI,iCAC5J,MAAMS,EAAqBD,EAAqBnB,EAAOqB,WAAW,GAAKrB,EAAOqB,WAC9E,OAAO,IAAIC,QAAQC,IACjBC,WAAW,WACT,IAAIC,EACJ,MAAMC,EAAQP,EAAqB9B,EAAWsC,gBAAgB,GAAGC,OAAO,IAAMH,EAAsBzB,EAAOI,WAAW,YAAc,MAAQqB,SAA6B,OAAS,EAAIA,EAAoBJ,WAC1M,GAAInB,GAAyBkB,IAAuBM,EAAO,CACzD,IAAIG,EAAwBC,EAAwBC,EACpD,MAAMrB,EAAYS,EAAqB,IAAIU,EAAyB7B,EAAOY,uBAAyB,MAAQiB,SAAgC,OAAS,EAAIA,EAAuBhB,aAAab,EAAOI,WAAW,SAASU,cAAc,GAAGD,YAAc,IAAIiB,EAAyB9B,EAAOY,uBAAyB,MAAQkB,SAAgC,OAAS,EAAIA,EAAuBjB,cAAckB,EAAsB/B,EAAOI,WAAW,YAAc,MAAQ2B,SAA6B,OAAS,EAAIA,EAAoBlB,YAC1gB5B,EAA0B8B,KAAKf,EAAQb,EAAS6C,KAAMtB,EACxD,CACAa,GACF,EAAG,EAAE,EAET,CACA,MAAMtB,EAAsB,CAC1Bb,+BACAS,wBACAoB,0BAEF,OAAOhB,CACT,EAAG","sourceRoot":"internal"}},{"offset":{"line":16891,"column":0},"map":{"version":3,"names":["DisplayStyle","getAmountWithCurrencyTemplate","internalField","formatOptions","isAnalytics","xml","displayVisible","hasValidAnalyticalCurrencyOrUnit","valueAsStringBindingExpression","unitBindingExpression","textAlignMode","undefined","getAvatarTemplate","avatarId","_flexId","idPrefix","generate","avatarVisible","avatarSrc","getButtonTemplate","convertedDataField","MetaModelConverter","convertMetaModelContext","dataField","oDataModelPath","getInvolvedDataModelObjects","entitySet","icon","showIconUrl","IconUrl","text","Label","tooltip","button","$Type","visible","navigationAvailable","buttonPress","FieldHelper","isDataFieldActionButtonVisible","buttonIsBound","buttonOperationAvailable","enabled","isDataFieldActionButtonEnabled","buttonOperationAvailableFormatted","type","buildExpressionForCriticalityButtonType","class","getContactTemplate","contextMetaPath","getModel","createBindingContext","ariaLabelledBy","contactVisible","getDataPointInnerPart","withConditionalWrapper","metaPath","measureDisplayMode","showEmptyIndicator","getDataPointTemplate","hasUnitOrCurrency","getExpandableText","noWrapperId","textExpandBehaviorDisplay","textMaxCharactersDisplay","emptyIndicatorMode","getFileTemplate","innerFilePart","fileIsImage","fileAvatarSrc","fileIconSrc","fileStreamNotEmpty","fileLinkText","fileLinkHref","fileTextVisible","editMode","EditMode","Display","beforeDialogOpen","collaborationEnabled","afterDialogOpen","editableExpression","fileAcceptableMediaTypes","fileMaximumSize","fileFilenameExpression","fileRelativePropertyPath","fileUploadUrl","fileFilenamePath","fileMediaType","fieldGroupIds","dataSourcePath","getLinkTemplate","linkIsDataFieldWithNavigationPath","linkPress","linkIsDataFieldWithIntentBasedNavigation","linkIsEmailAddress","linkIsPhoneNumber","linkUrl","linkIsDataFieldWithAction","iconUrl","wrap","getLinkWithQuickViewTemplate","retrieveTextFromValueList","textFromValueList","semanticObject","getTextTemplate","getObjectIdentifier","dependents","hasQuickView","identifier","identifierTitle","identifierText","hasSituationsIndicator","situationsIndicatorPropertyPath","showErrorIndicator","showErrorObjectStatus","getObjectStatus","objectStatus","dataModelObjectPath","enhancedValueDataModelPath","enhanceDataModelPath","targetObject","Value","path","condition","criticalityIcon","buildExpressionForCriticalityIcon","state","buildExpressionForCriticalityColor","active","pressAction","getLabelSemanticKey","getSemanticKeyWithDraftIndicatorTemplate","semanticKeyTemplate","semanticKeyStyle","fieldGroupDraftIndicatorPropertyPath","getMarginClass","compactSemanticKey","draftIndicatorVisible","getTemplate","innerFieldContent","displayStyle"],"sourceRoot":"internal/field","sources":["DisplayStyle.ts"],"sourcesContent":["import { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport {\n\tbuildExpressionForCriticalityButtonType,\n\tbuildExpressionForCriticalityColor,\n\tbuildExpressionForCriticalityIcon\n} from \"sap/fe/core/templating/CriticalityFormatters\";\nimport { enhanceDataModelPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { hasValidAnalyticalCurrencyOrUnit } from \"sap/fe/core/templating/UIFormatters\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport EditMode from \"sap/ui/mdc/enum/EditMode\";\nimport type InternalFieldBlock from \"../InternalField.block\";\nimport type { DisplayStyle as DisplayStyleType } from \"../InternalField.block\";\n\nconst DisplayStyle = {\n\t/**\n\t * Generates the AmountWithCurrency template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetAmountWithCurrencyTemplate(internalField: InternalFieldBlock) {\n\t\tif (internalField.formatOptions.isAnalytics) {\n\t\t\treturn xml`<controls:ConditionalWrapper xmlns:controls=\"sap.fe.macros.controls\" visible=\"${internalField.displayVisible}\" condition=\"${internalField.hasValidAnalyticalCurrencyOrUnit}\">\n\t\t\t<controls:contentTrue>\n\t\t\t\t<u:Currency\n\t\t\t\t\txmlns:u=\"sap.ui.unified\"\n\t\t\t\t\tstringValue=\"${internalField.valueAsStringBindingExpression}\"\n\t\t\t\t\tcurrency=\"${internalField.unitBindingExpression}\"\n\t\t\t\t\tuseSymbol=\"false\"\n\t\t\t\t\tmaxPrecision=\"5\"\n\t\t\t\t/>\n\t\t\t</controls:contentTrue>\n\t\t\t<controls:contentFalse>\n\t\t\t\t<u:Currency xmlns:u=\"sap.ui.unified\" stringValue=\"\" currency=\"*\" useSymbol=\"false\" />\n\t\t\t</controls:contentFalse>\n\t\t</controls:ConditionalWrapper>`;\n\t\t} else {\n\t\t\treturn xml`<coreControls:FormElementWrapper xmlns:coreControls=\"sap.fe.core.controls\"\n\t\t\tformDoNotAdjustWidth=\"true\"\n\t\t\twidth=\"${internalField.formatOptions.textAlignMode === \"Table\" ? \"100%\" : undefined}\"\n\t\t>\n\t\t\t<u:Currency\n\t\t\t\txmlns:u=\"sap.ui.unified\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\tstringValue=\"${internalField.valueAsStringBindingExpression}\"\n\t\t\t\tcurrency=\"${internalField.unitBindingExpression}\"\n\t\t\t\tuseSymbol=\"false\"\n\t\t\t\tmaxPrecision=\"5\"\n\t\t\t/>\n\t\t</coreControls:FormElementWrapper>`;\n\t\t}\n\t},\n\n\t/**\n\t * Generates the Avatar template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetAvatarTemplate(internalField: InternalFieldBlock) {\n\t\tlet avatarId;\n\t\tif (internalField._flexId) {\n\t\t\tavatarId = internalField._flexId;\n\t\t} else if (internalField.idPrefix) {\n\t\t\tavatarId = generate([internalField.idPrefix, \"Field-content\"]);\n\t\t}\n\n\t\treturn xml`\n\t\t\t\t<controls:FormElementWrapper\n\t\t\t\t\txmlns:controls=\"sap.fe.core.controls\"\n\t\t\t\t\tvisible=\"${internalField.avatarVisible}\"\n\t\t\t\t>\n\t\t\t\t<Avatar\n\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\tid=\"${avatarId}\"\n\t\t\t\t\tsrc=\"${internalField.avatarSrc}\"\n\t\t\t\t\tdisplaySize=\"S\"\n\t\t\t\t\tclass=\"sapUiSmallMarginEnd\"\n\t\t\t\t\tdisplayShape=\"Square\"\n\t\t\t\t/>\n\t\t\t</controls:FormElementWrapper>`;\n\t},\n\n\t/**\n\t * Generates the button template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetButtonTemplate: (internalField: InternalFieldBlock) => {\n\t\tconst convertedDataField = MetaModelConverter.convertMetaModelContext(internalField.dataField);\n\t\tconst oDataModelPath = MetaModelConverter.getInvolvedDataModelObjects(internalField.dataField, internalField.entitySet);\n\n\t\tconst icon = internalField.formatOptions?.showIconUrl ?? false ? convertedDataField.IconUrl : undefined;\n\t\tconst text = !(internalField.formatOptions?.showIconUrl ?? false) ? convertedDataField.Label : undefined;\n\t\tconst tooltip = internalField.formatOptions?.showIconUrl ?? false ? convertedDataField.Label : undefined;\n\t\tlet button = \"\";\n\t\tif (convertedDataField.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation) {\n\t\t\tbutton = xml`<Button\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tvisible=\"${internalField.visible}\"\n\t\t\t\ttext=\"${text}\"\n\t\t\t\ticon=\"${icon}\"\n\t\t\t\tenabled=\"${internalField.navigationAvailable}\"\n\t\t\t\ttooltip=\"${tooltip}\"\n\t\t\t\tpress=\"${internalField.buttonPress}\"\n\t\t\t/>`;\n\t\t} else if (\n\t\t\tFieldHelper.isDataFieldActionButtonVisible(\n\t\t\t\tthis,\n\t\t\t\tconvertedDataField,\n\t\t\t\tinternalField.buttonIsBound,\n\t\t\t\tinternalField.buttonOperationAvailable\n\t\t\t)\n\t\t) {\n\t\t\tconst enabled = FieldHelper.isDataFieldActionButtonEnabled(\n\t\t\t\tconvertedDataField,\n\t\t\t\tinternalField.buttonIsBound as unknown as boolean,\n\t\t\t\tinternalField.buttonOperationAvailable,\n\t\t\t\tinternalField.buttonOperationAvailableFormatted as string\n\t\t\t);\n\t\t\tconst type = buildExpressionForCriticalityButtonType(oDataModelPath);\n\n\t\t\tbutton = xml`<Button\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t    class=\"${internalField.class}\"\n\t\t\t\ttext=\"${text}\"\n\t\t\t\ticon=\"${icon}\"\n\t\t\t\ttooltip=\"${tooltip}\"\n\t\t\t\tpress=\"${internalField.buttonPress}\"\n\t\t\t\tenabled=\"${enabled}\"\n\t\t\t\tvisible=\"${internalField.visible}\"\n\t\t\t\ttype=\"${type}\"\n\t\t\t\t/>`;\n\t\t}\n\t\treturn button;\n\t},\n\n\t/**\n\t * Generates the Contact template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetContactTemplate(internalField: InternalFieldBlock) {\n\t\tconst contextMetaPath = internalField.dataField.getModel().createBindingContext(\"Target/$AnnotationPath\", internalField.dataField);\n\n\t\treturn xml`\n\t\t<macros:Contact\n\t\t\tidPrefix=\"${internalField.idPrefix}\"\n\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\tmetaPath=\"${contextMetaPath}\"\n\t\t\tcontextPath=\"${internalField.entitySet}\"\n\t\t\t_flexId=\"${internalField._flexId}\"\n\t\t\tvisible=\"${internalField.contactVisible}\"\n\t\t/>`;\n\t},\n\n\t/**\n\t * Generates the innerpart of the data point to be used in getDataPointTemplate.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @param withConditionalWrapper Boolean value to determine whether the DataPoint\n\t * \t\t\t\t\t  \t\t\tshall be generated for the conditional wrapper case\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetDataPointInnerPart(internalField: InternalFieldBlock, withConditionalWrapper: boolean) {\n\t\tconst convertedDataField = MetaModelConverter.convertMetaModelContext(internalField.dataField);\n\n\t\tconst metaPath =\n\t\t\tconvertedDataField.$Type === UIAnnotationTypes.DataFieldForAnnotation\n\t\t\t\t? internalField.dataField.getModel().createBindingContext(\"Target/$AnnotationPath\", internalField.dataField)\n\t\t\t\t: internalField.dataField;\n\n\t\tconst formatOptions = xml`<internalMacro:formatOptions\n\t\t\t\txmlns:internalMacro=\"sap.fe.macros.internal\"\n\t\t\t\tmeasureDisplayMode=\"${internalField.formatOptions.measureDisplayMode}\"\n\t\t\t\tshowEmptyIndicator=\"${internalField.formatOptions.showEmptyIndicator}\"\n\t\t\t\tisAnalytics=\"${internalField.formatOptions.isAnalytics}\"\n\t\t\t/>`;\n\n\t\treturn xml`<internalMacro:DataPoint\n\t\t\txmlns:internalMacro=\"sap.fe.macros.internal\"\n\t\t\tidPrefix=\"${internalField.idPrefix}\"\n\t\t\tvisible=\"${!withConditionalWrapper ? internalField.displayVisible : \"\"}\"\n\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\t_flexId=\"${internalField._flexId}\"\n\t\t\tmetaPath=\"${metaPath}\"\n\t\t\tcontextPath=\"${internalField.entitySet}\"\n\t\t>\n\t\t\t${formatOptions}\n\t\t</internalMacro:DataPoint>`;\n\t},\n\n\t/**\n\t * Generates the DataPoint template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetDataPointTemplate(internalField: InternalFieldBlock) {\n\t\tif ((internalField.formatOptions.isAnalytics ?? false) && (internalField.hasUnitOrCurrency ?? false)) {\n\t\t\treturn xml`<controls:ConditionalWrapper xmlns:controls=\"sap.fe.macros.controls\" visible=\"${\n\t\t\t\tinternalField.displayVisible\n\t\t\t}\" condition=\"${internalField.hasValidAnalyticalCurrencyOrUnit}\">\n\t\t\t\t<controls:contentTrue>\n\t\t\t\t\t ${this.getDataPointInnerPart(internalField, true)}\n\t\t\t\t</controls:contentTrue>\n\t\t\t\t\t<controls:contentFalse>\n\t\t\t\t\t\t<Text xmlns=\"sap.m\" text=\"*\" />\n\t\t\t\t</controls:contentFalse>\n\t\t\t</controls:ConditionalWrapper>`;\n\t\t} else {\n\t\t\treturn this.getDataPointInnerPart(internalField, false);\n\t\t}\n\t},\n\n\t/**\n\t * Generates the ExpandableText template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetExpandableText(internalField: InternalFieldBlock) {\n\t\treturn xml`\n\t\t\t<ExpandableText\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tid=\"${internalField?.noWrapperId}\"\n\t\t\t\tvisible=\"${internalField?.displayVisible}\"\n\t\t\t\ttext=\"${internalField?.text}\"\n\t\t\t\toverflowMode=\"${internalField?.formatOptions?.textExpandBehaviorDisplay}\"\n\t\t\t\tmaxCharacters=\"${internalField?.formatOptions?.textMaxCharactersDisplay}\"\n\t\t\t\temptyIndicatorMode=\"${internalField?.emptyIndicatorMode}\"\n\t\t/>`;\n\t},\n\n\t/**\n\t * Generates the File template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetFileTemplate(internalField: InternalFieldBlock) {\n\t\tlet innerFilePart;\n\t\tif (internalField.fileIsImage) {\n\t\t\tinnerFilePart = xml`\n\t\t\t<controls:avatar xmlns:controls=\"sap.fe.macros.controls\">\n\t\t\t\t<Avatar\n\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\t\tsrc=\"${internalField.fileAvatarSrc}\"\n\t\t\t\t\tdisplaySize=\"S\"\n\t\t\t\t\tclass=\"sapUiSmallMarginEnd\"\n\t\t\t\t\tdisplayShape=\"Square\">\n\t\t\t\t\t<customData>\n\t\t\t\t\t\t<ImageCustomData paramName=\"xcache\" />\n\t\t\t\t\t</customData>\n\t\t\t\t</Avatar>\n\t\t\t</controls:avatar>`;\n\t\t} else {\n\t\t\tinnerFilePart = xml`\n\t\t\t<controls:icon xmlns:controls=\"sap.fe.macros.controls\">\n\t\t\t\t<core:Icon src=\"${internalField.fileIconSrc}\" class=\"sapUiSmallMarginEnd\" visible=\"${internalField.fileStreamNotEmpty}\" />\n\t\t\t</controls:icon>\n\t\t\t<controls:link>\n\t\t\t\t<Link\n\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\ttext=\"${internalField.fileLinkText}\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\thref=\"${internalField.fileLinkHref}\"\n\t\t\t\t\tvisible=\"${internalField.fileStreamNotEmpty}\"\n\t\t\t\t\twrapping=\"true\"\n\t\t\t\t/>\n\t\t\t</controls:link>\n\t\t\t<controls:text>\n\t\t\t\t<Text xmlns=\"sap.m\" emptyIndicatorMode=\"On\" text=\"\" visible=\"${internalField.fileTextVisible}\" />\n\t\t\t</controls:text>`;\n\t\t}\n\n\t\tif (internalField.editMode !== EditMode.Display) {\n\t\t\tconst beforeDialogOpen = internalField.collaborationEnabled ? \"FIELDRUNTIME.handleOpenUploader\" : undefined;\n\t\t\tconst afterDialogOpen = internalField.collaborationEnabled ? \"FIELDRUNTIME.handleCloseUploader\" : undefined;\n\n\t\t\tinnerFilePart += xml`\n\t\t\t<controls:fileUploader xmlns:controls=\"sap.fe.macros.controls\">\n\t\t\t\t<u:FileUploader\n\t\t\t\t\txmlns:u=\"sap.ui.unified\"\n\t\t\t\t\tname=\"FEV4FileUpload\"\n\t\t\t\t\tvisible=\"${internalField.editableExpression}\"\n\t\t\t\t\tbuttonOnly=\"true\"\n\t\t\t\t\ticonOnly=\"true\"\n\t\t\t\t\tmultiple=\"false\"\n\t\t\t\t\ttooltip=\"{sap.fe.i18n>M_FIELD_FILEUPLOADER_UPLOAD_BUTTON_TOOLTIP}\"\n\t\t\t\t\ticon=\"sap-icon://upload\"\n\t\t\t\t\tstyle=\"Transparent\"\n\t\t\t\t\tsendXHR=\"true\"\n\t\t\t\t\tuseMultipart=\"false\"\n\t\t\t\t\tsameFilenameAllowed=\"true\"\n\t\t\t\t\tmimeType=\"${internalField.fileAcceptableMediaTypes}\"\n\t\t\t\t\ttypeMissmatch=\"FIELDRUNTIME.handleTypeMissmatch\"\n\t\t\t\t\tmaximumFileSize=\"${internalField.fileMaximumSize}\"\n\t\t\t\t\tfileSizeExceed=\"FIELDRUNTIME.handleFileSizeExceed\"\n\t\t\t\t\tuploadOnChange=\"false\"\n\t\t\t\t\tuploadComplete=\"FIELDRUNTIME.handleUploadComplete($event, ${internalField.fileFilenameExpression || \"undefined\"}, '${\n\t\t\t\tinternalField.fileRelativePropertyPath\n\t\t\t}', $controller)\"\n\t\t\t\t\thttpRequestMethod=\"Put\"\n\t\t\t\t\tchange=\"FIELDRUNTIME.uploadStream($controller, $event)\"\n\t\t\t\t\tbeforeDialogOpen=\"${beforeDialogOpen}\"\n\t\t\t\t\tafterDialogClose=\"${afterDialogOpen}\"\n\t\t\t\t\tuploadStart=\"FIELDRUNTIME.handleOpenUploader\"\n\t\t\t\t/>\n\t\t\t</controls:fileUploader>\n\t\t\t<controls:deleteButton>\n\t\t\t\t<Button\n\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\ticon=\"sap-icon://sys-cancel\"\n\t\t\t\t\ttype=\"Transparent\"\n\t\t\t\t\tpress=\"FIELDRUNTIME.removeStream($event, ${internalField.fileFilenameExpression || \"undefined\"}, '${\n\t\t\t\tinternalField.fileRelativePropertyPath\n\t\t\t}', $controller)\"\n\t\t\t\t\ttooltip=\"{sap.fe.i18n>M_FIELD_FILEUPLOADER_DELETE_BUTTON_TOOLTIP}\"\n\t\t\t\t\tvisible=\"${internalField.editableExpression}\"\n\t\t\t\t\tenabled=\"${internalField.fileStreamNotEmpty}\"\n\t\t\t\t/>\n\t\t\t</controls:deleteButton>`;\n\t\t}\n\n\t\treturn xml`\n\t\t\t<controls:FileWrapper\n\t\t\t\txmlns:controls=\"sap.fe.macros.controls\"\n\t\t\t\tcore:require=\"{FIELDRUNTIME: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tvisible=\"${internalField.visible}\"\n\t\t\t\tuploadUrl=\"${internalField.fileUploadUrl}\"\n\t\t\t\tpropertyPath=\"${internalField.fileRelativePropertyPath}\"\n\t\t\t\tfilename=\"${internalField.fileFilenamePath}\"\n\t\t\t\tmediaType=\"${internalField.fileMediaType}\"\n\t\t\t\tfieldGroupIds=\"${internalField.fieldGroupIds}\"\n\t\t\t\tvalidateFieldGroup=\"FIELDRUNTIME.onValidateFieldGroup($controller, $event)\"\n\t\t\t\tcustomData:sourcePath=\"${internalField.dataSourcePath}\"\n\t\t\t>${innerFilePart}</controls:FileWrapper>`;\n\t},\n\n\t/**\n\t * Generates the Link template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetLinkTemplate(internalField: InternalFieldBlock) {\n\t\tif (internalField.linkIsDataFieldWithNavigationPath) {\n\t\t\treturn xml`<Link\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\tpress=\"${internalField.linkPress}\"\n\t\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t\tclass=\"sapMTextRenderWhitespaceWrap\"\n\t\t\t/>`;\n\t\t} else if (internalField.linkIsDataFieldWithIntentBasedNavigation) {\n\t\t\treturn xml`<Link\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\tcore:require=\"{WSR: 'sap/base/strings/whitespaceReplacer'}\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\tpress=\"${internalField.linkPress}\"\n\t\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t\tclass=\"sapMTextRenderWhitespaceWrap\"\n\t\t\t/>`;\n\t\t} else if (internalField.linkIsEmailAddress || internalField.linkIsPhoneNumber) {\n\t\t\treturn xml`<Link\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\tcore:require=\"{WSR: 'sap/base/strings/whitespaceReplacer'}\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\thref=\"${internalField.linkUrl}\"\n\t\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t\tclass=\"sapMTextRenderWhitespaceWrap\"\n\t\t\t/>`;\n\t\t} else if (internalField.linkIsDataFieldWithAction) {\n\t\t\treturn xml`<Link\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\tpress=\"${internalField.linkPress}\"\n\t\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t\tclass=\"sapMTextRenderWhitespaceWrap\"\n\t\t\t/>`;\n\t\t} else if (internalField.iconUrl) {\n\t\t\treturn xml`<ObjectStatus\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tcore:require=\"{WSR: 'sap/base/strings/whitespaceReplacer', FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\ticon=\"${internalField.iconUrl}\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\tpress=\"FieldRuntime.openExternalLink\"\n\t\t\t\tactive=\"true\"\n\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t\tcustomData:url=\"${internalField.linkUrl}\"\n\t\t\t/>`;\n\t\t} else {\n\t\t\treturn xml`<Link\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\tcore:require=\"{WSR: 'sap/base/strings/whitespaceReplacer'}\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\thref=\"${internalField.linkUrl}\"\n\t\t\t\ttarget=\"_top\"\n\t\t\t\twrapping=\"${internalField.wrap === undefined ? true : internalField.wrap}\"\n\t\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t/>`;\n\t\t}\n\t},\n\n\t/**\n\t * Generates the LinkWithQuickView template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetLinkWithQuickViewTemplate(internalField: InternalFieldBlock) {\n\t\treturn xml`<Link\n\t\t\txmlns=\"sap.m\"\n\t\t\txmlns:core=\"sap.ui.core\"\n\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime', WSR: 'sap/base/strings/whitespaceReplacer'}\"\n\t\t\ttext=\"${internalField.formatOptions.retrieveTextFromValueList ? internalField.textFromValueList : internalField.text}\"\n\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\twrapping=\"${internalField.wrap === undefined ? true : internalField.wrap}\"\n\t\t\tpress=\"FieldRuntime.pressLink\"\n\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t>\n\t\t\t<dependents>\n\t\t\t\t<macro:QuickView xmlns:macro=\"sap.fe.macros\" dataField=\"${internalField.dataField}\" semanticObject=\"${\n\t\t\tinternalField.semanticObject\n\t\t}\" contextPath=\"${internalField.entitySet}\" />\n\t\t\t</dependents>\n\t\t</Link>`;\n\t},\n\n\t/**\n\t * Generates the Text template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTextTemplate(internalField: InternalFieldBlock) {\n\t\tif (internalField.formatOptions.isAnalytics && internalField.hasUnitOrCurrency) {\n\t\t\treturn xml`<controls:ConditionalWrapper xmlns:controls=\"sap.fe.macros.controls\" visible=\"${internalField.displayVisible}\" condition=\"${internalField.hasValidAnalyticalCurrencyOrUnit}\">\n\t\t\t<controls:contentTrue>\n\t\t\t\t\t<Text xmlns=\"sap.m\"\n\t\t\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t\t\t\trenderWhitespace=\"true\"\n\t\t\t\t\t\twrapping=\"${internalField.wrap}\"\n\t\t\t\t\t/>\n\t\t\t\t</controls:contentTrue>\n\t\t\t\t<controls:contentFalse>\n\t\t\t\t\t<Text xmlns=\"sap.m\" id=\"${internalField.noWrapperId}\" text=\"*\" />\n\t\t\t\t</controls:contentFalse>\n\t\t\t</controls:ConditionalWrapper>\n\t\t`;\n\t\t} else if (internalField.formatOptions.retrieveTextFromValueList) {\n\t\t\treturn xml`<Text\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\ttext=\"${internalField.textFromValueList}\"\n\t\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t\trenderWhitespace=\"true\"\n\t\t\t/>`;\n\t\t} else {\n\t\t\treturn xml`<Text\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\twrapping=\"${internalField.wrap}\"\n\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t\trenderWhitespace=\"true\"\n\t\t/>`;\n\t\t}\n\t},\n\n\t/**\n\t * Generates the ObjectIdentifier template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetObjectIdentifier(internalField: InternalFieldBlock) {\n\t\tconst dependents = internalField.hasQuickView\n\t\t\t? xml`<dependents>\n\t<macro:QuickView xmlns:macro=\"sap.fe.macros\" dataField=\"${internalField.dataField}\" semanticObject=\"${internalField.semanticObject}\" contextPath=\"${internalField.entitySet}\" />\n</dependents>`\n\t\t\t: \"\";\n\t\tlet identifier = xml`<ObjectIdentifier\n\txmlns=\"sap.m\"\n\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\tid=\"${internalField.noWrapperId}\"\n\ttitle=\"${internalField.identifierTitle}\"\n\ttext=\"${internalField.identifierText}\"\n\ttitleActive=\"${internalField.hasQuickView}\"\n\ttitlePress=\"FieldRuntime.pressLink\"\n\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\">\n${dependents}</ObjectIdentifier>`;\n\t\tif (internalField.hasSituationsIndicator) {\n\t\t\tidentifier = xml`<HBox xmlns=\"sap.m\" alignItems=\"Center\" justifyContent=\"SpaceBetween\" width=\"100%\">\n\t\t\t\t\t\t\t${identifier}\n\t\t\t\t\t\t\t<SituationsIndicator\n\t\t\t\t\t\t\t\txmlns=\"sap.fe.macros.internal.situations\"\n\t\t\t\t\t\t\t\tentitySet=\"${internalField.entitySet}\"\n\t\t\t\t\t\t\t\tpropertyPath=\"${internalField.situationsIndicatorPropertyPath}\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</HBox>`;\n\t\t}\n\t\tif (internalField.showErrorIndicator) {\n\t\t\tidentifier = xml`<VBox xmlns=\"sap.m\">\n\t\t\t\t${identifier}\n\t\t\t\t\t<ObjectStatus\n\t\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\t\tvisible=\"${internalField.showErrorObjectStatus}\"\n\t\t\t\t\t\tclass=\"sapUiSmallMarginBottom\"\n\t\t\t\t\t\ttext=\"{sap.fe.i18n>Contains_Errors}\"\n\t\t\t\t\t\tstate=\"Error\"\n\t\t\t\t\t/>\n\t\t\t</VBox>`;\n\t\t}\n\n\t\treturn xml`${identifier}`;\n\t},\n\n\t/**\n\t * Generates the ObjectStatus template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetObjectStatus(internalField: InternalFieldBlock) {\n\t\tlet objectStatus;\n\t\tconst dataModelObjectPath = MetaModelConverter.getInvolvedDataModelObjects(internalField.dataField, internalField.entitySet);\n\t\tconst enhancedValueDataModelPath = enhanceDataModelPath(dataModelObjectPath, dataModelObjectPath.targetObject.Value.path);\n\t\tconst condition = hasValidAnalyticalCurrencyOrUnit(enhancedValueDataModelPath);\n\t\tconst convertedDataField = MetaModelConverter.getInvolvedDataModelObjects(internalField.dataField);\n\t\tconst criticalityIcon = buildExpressionForCriticalityIcon(convertedDataField);\n\t\tconst state = buildExpressionForCriticalityColor(convertedDataField);\n\n\t\tif (internalField.formatOptions.isAnalytics && internalField.hasUnitOrCurrency) {\n\t\t\tobjectStatus = xml`<controls:ConditionalWrapper xmlns:controls=\"sap.fe.macros.controls\"\n\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\tcondition=\"${condition}\"\n\t\t>\n\t\t\t<controls:contentTrue>\n\t\t\t\t<ObjectStatus\n\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\ticon=\"${criticalityIcon}\"\n\t\t\t\t\tstate=\"${state}\"\n\t\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t\t\tclass=\"sapMTextRenderWhitespaceWrap\"\n\t\t\t\t/>\n\t\t\t</controls:contentTrue>\n\t\t\t<controls:contentFalse>\n\t\t\t\t<ObjectStatus xmlns=\"sap.m\" text=\"*\" visible=\"${internalField.displayVisible}\" />\n\t\t\t</controls:contentFalse>\n\t\t</controls:ConditionalWrapper>`;\n\t\t} else {\n\t\t\tlet dependents = \"\";\n\t\t\tlet active = false;\n\t\t\tlet pressAction;\n\t\t\tif (internalField.hasQuickView) {\n\t\t\t\tdependents = xml`<dependents>\n\t\t\t\t\t<macro:QuickView xmlns:macro=\"sap.fe.macros\" dataField=\"${internalField.dataField}\" semanticObject=\"${internalField.semanticObject}\" contextPath=\"${internalField.entitySet}\" />\n\t\t\t\t</dependents>`;\n\t\t\t\tactive = true;\n\t\t\t\tpressAction = \"FieldRuntime.pressLink\";\n\t\t\t}\n\t\t\tif (internalField.linkUrl) {\n\t\t\t\tactive = true;\n\t\t\t\tpressAction = \"FieldRuntime.openExternalLink\";\n\t\t\t}\n\n\t\t\tobjectStatus = xml`<ObjectStatus\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\ticon=\"${criticalityIcon}\"\n\t\t\t\tstate=\"${state}\"\n\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\"\n\t\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tactive=\"${active}\"\n\t\t\t\tpress=\"${pressAction}\"\n\t\t\t\tcustomData:url=\"${internalField.linkUrl}\"\n\t\t\t>\n\t\t\t${dependents}\n\t\t</ObjectStatus>`;\n\t\t}\n\n\t\treturn objectStatus;\n\t},\n\n\t/**\n\t * Generates the LabelSemantickey template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetLabelSemanticKey(internalField: InternalFieldBlock) {\n\t\tif (internalField.hasQuickView) {\n\t\t\treturn xml`<Link\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\ttext=\"${internalField.text}\"\n\t\t\t\twrapping=\"true\"\n\t\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tpress=\"FieldRuntime.pressLink\"\n\t\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\t\temptyIndicatorMode=\"${internalField.emptyIndicatorMode}\">\n\t\t\t\t\t<dependents>\n\t\t\t\t\t\t<macro:QuickView xmlns:macro=\"sap.fe.macros\" dataField=\"${internalField.dataField}\" semanticObject=\"${internalField.semanticObject}\" contextPath=\"${internalField.entitySet}\" />\n\t\t\t\t\t</dependents>\n\t\t\t\t</Link>`;\n\t\t}\n\n\t\treturn xml`<Label\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\tid=\"${internalField.noWrapperId}\"\n\t\t\t\tvisible=\"${internalField.displayVisible}\"\n\t\t\t\ttext=\"${internalField.identifierTitle}\"\n\t\t\t\tdesign=\"Bold\"/>`;\n\t},\n\t/**\n\t * Generates the semantic key with draft indicator template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetSemanticKeyWithDraftIndicatorTemplate(internalField: InternalFieldBlock) {\n\t\tlet semanticKeyTemplate =\n\t\t\tinternalField.formatOptions.semanticKeyStyle === \"ObjectIdentifier\"\n\t\t\t\t? DisplayStyle.getObjectIdentifier(internalField)\n\t\t\t\t: DisplayStyle.getLabelSemanticKey(internalField);\n\t\tif (!internalField.formatOptions.fieldGroupDraftIndicatorPropertyPath) {\n\t\t\t// if the draftIndicator is not handled at the fieldGroup level\n\t\t\t//TODO could this be a boolean no draftIndicator\n\t\t\tsemanticKeyTemplate = xml`<controls:FormElementWrapper\n\t\t\t\t\t\t\t\t\t\txmlns:controls=\"sap.fe.core.controls\"\n\t\t\t\t\t\t\t\t\t\tvisible=\"${internalField.displayVisible}\">\n\t\t\t\t\t\t\t\t\t\t<VBox\n\t\t\t\t\t\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\t\t\t\t\t\tclass=\"${FieldHelper.getMarginClass(internalField.formatOptions.compactSemanticKey)}\">\n\t\t\t\t\t\t\t\t\t\t\t${semanticKeyTemplate}\n\t\t\t\t\t\t\t\t\t\t\t<macro:DraftIndicator\n\t\t\t\t\t\t\t\t\t\t\t\txmlns:macro=\"sap.fe.macros\"\n\t\t\t\t\t\t\t\t\t\t\t\tdraftIndicatorType=\"IconAndText\"\n\t\t\t\t\t\t\t\t\t\t\t\tentitySet=\"${internalField.entitySet}\"\n\t\t\t\t\t\t\t\t\t\t\t\tisDraftIndicatorVisible=\"${internalField.draftIndicatorVisible}\"\n\t\t\t\t\t\t\t\t\t\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"/>\n\t\t\t\t\t\t\t\t\t\t</VBox>\n\t\t\t\t\t\t\t\t\t</controls:FormElementWrapper>`;\n\t\t}\n\t\treturn semanticKeyTemplate;\n\t},\n\n\t/**\n\t * Entry point for further templating processings.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate: (internalField: InternalFieldBlock) => {\n\t\tlet innerFieldContent;\n\t\tswitch (internalField.displayStyle as DisplayStyleType) {\n\t\t\tcase \"AmountWithCurrency\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getAmountWithCurrencyTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"Avatar\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getAvatarTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"Button\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getButtonTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"Contact\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getContactTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"DataPoint\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getDataPointTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"ExpandableText\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getExpandableText(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"File\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getFileTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"Link\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getLinkTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"LinkWithQuickView\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getLinkWithQuickViewTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"ObjectIdentifier\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getObjectIdentifier(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"ObjectStatus\": {\n\t\t\t\tinnerFieldContent = DisplayStyle.getObjectStatus(internalField);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"LabelSemanticKey\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getLabelSemanticKey(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"SemanticKeyWithDraftIndicator\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getSemanticKeyWithDraftIndicatorTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"Text\":\n\t\t\t\tinnerFieldContent = DisplayStyle.getTextTemplate(internalField);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn innerFieldContent;\n\t}\n};\n\nexport default DisplayStyle;\n"],"mappings":"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"}},{"offset":{"line":17577,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockTemplateProcessor","MetaModelConverter","StableIdHelper","CriticalityFormatters","DataModelPathHelper","UIFormatters","FieldHelper","EditMode","hasValidAnalyticalCurrencyOrUnit","enhanceDataModelPath","buildExpressionForCriticalityIcon","buildExpressionForCriticalityColor","buildExpressionForCriticalityButtonType","generate","xml","DisplayStyle","getAmountWithCurrencyTemplate","internalField","formatOptions","isAnalytics","displayVisible","valueAsStringBindingExpression","unitBindingExpression","textAlignMode","undefined","getAvatarTemplate","avatarId","_flexId","idPrefix","avatarVisible","avatarSrc","getButtonTemplate","_internalField$format","_internalField$format2","_internalField$format3","convertedDataField","convertMetaModelContext","dataField","oDataModelPath","getInvolvedDataModelObjects","entitySet","icon","showIconUrl","IconUrl","text","Label","tooltip","button","$Type","visible","navigationAvailable","buttonPress","isDataFieldActionButtonVisible","buttonIsBound","buttonOperationAvailable","enabled","isDataFieldActionButtonEnabled","buttonOperationAvailableFormatted","type","class","getContactTemplate","contextMetaPath","getModel","createBindingContext","ariaLabelledBy","contactVisible","getDataPointInnerPart","withConditionalWrapper","metaPath","measureDisplayMode","showEmptyIndicator","getDataPointTemplate","hasUnitOrCurrency","this","getExpandableText","_internalField$format4","_internalField$format5","noWrapperId","textExpandBehaviorDisplay","textMaxCharactersDisplay","emptyIndicatorMode","getFileTemplate","innerFilePart","fileIsImage","fileAvatarSrc","fileIconSrc","fileStreamNotEmpty","fileLinkText","fileLinkHref","fileTextVisible","editMode","Display","beforeDialogOpen","collaborationEnabled","afterDialogOpen","editableExpression","fileAcceptableMediaTypes","fileMaximumSize","fileFilenameExpression","fileRelativePropertyPath","fileUploadUrl","fileFilenamePath","fileMediaType","fieldGroupIds","dataSourcePath","getLinkTemplate","linkIsDataFieldWithNavigationPath","linkPress","linkIsDataFieldWithIntentBasedNavigation","linkIsEmailAddress","linkIsPhoneNumber","linkUrl","linkIsDataFieldWithAction","iconUrl","wrap","getLinkWithQuickViewTemplate","retrieveTextFromValueList","textFromValueList","semanticObject","getTextTemplate","getObjectIdentifier","dependents","hasQuickView","identifier","identifierTitle","identifierText","hasSituationsIndicator","situationsIndicatorPropertyPath","showErrorIndicator","showErrorObjectStatus","getObjectStatus","objectStatus","dataModelObjectPath","enhancedValueDataModelPath","targetObject","Value","path","condition","criticalityIcon","state","active","pressAction","getLabelSemanticKey","getSemanticKeyWithDraftIndicatorTemplate","semanticKeyTemplate","semanticKeyStyle","fieldGroupDraftIndicatorPropertyPath","getMarginClass","compactSemanticKey","draftIndicatorVisible","getTemplate","innerFieldContent","displayStyle"],"sources":["DisplayStyle-dbg.js"],"mappings":"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","sourceRoot":"internal/field"}},{"offset":{"line":17954,"column":0},"map":{"version":3,"names":["EditStyle","getLayoutData","internalField","layoutData","collaborationEnabled","xml","getDateTimePickerGeneric","type","dataModelObjectPath","MetaModelConverter","getInvolvedDataModelObjects","dataField","entitySet","textAlign","getTextAlignment","formatOptions","editModeAsObject","dataSourcePath","editStyleId","editableExpression","enabledExpression","requiredExpression","onChange","ariaLabelledBy","valueBindingExpression","fieldGroupIds","showTimezone","undefined","getInputTemplate","editStylePlaceholder","getInputWithUnitTemplate","staticUnit","valueInputWidth","valueInputFieldWidth","descriptionBindingExpression","idPrefix","generate","unitBindingExpression","unitEditable","unitInputVisible","getInputWithValueHelpTemplate","dataFieldDataModelObjectPath","property","targetObject","Value","$target","delegate","FieldHelper","computeFieldBaseDelegate","retrieveTextFromValueList","display","UIFormatter","getFieldDisplay","displayMode","multipleLines","getMultipleLinesForDataField","annotations","UI","MultiLineText","propertyContext","getModel","createBindingContext","valueHelpPropertyContext","valueHelpProperty","fieldHelp","ValueHelpTemplating","generateID","_vhFlexId","vhIdPrefix","getRelativePropertyPath","context","label","computeLabelText","optionalContentEdit","textLinesEdit","textMaxLines","optionalLayoutData","valueState","editMode","textBindingExpression","getCheckBoxTemplate","getTextAreaTemplate","liveChange","textMaxLength","growing","getRatingIndicatorTemplate","tooltip","ratingIndicatorTooltip","ratingIndicatorTargetValue","getTemplate","innerFieldContent","editStyle"],"sourceRoot":"internal/field","sources":["EditStyle.ts"],"sourcesContent":["import { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { getRelativePropertyPath } from \"sap/fe/core/templating/PropertyFormatters\";\nimport * as UIFormatter from \"sap/fe/core/templating/UIFormatters\";\nimport { MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\nimport { getMultipleLinesForDataField, getTextAlignment } from \"sap/fe/macros/field/FieldTemplating\";\nimport * as ValueHelpTemplating from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\nimport Context from \"sap/ui/model/Context\";\nimport FieldHelper from \"../../field/FieldHelper\";\nimport InternalFieldBlock from \"../InternalField.block\";\n\nconst EditStyle = {\n\t/**\n\t * An internal helper to retrieve the reused layout data.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetLayoutData(internalField: InternalFieldBlock) {\n\t\tlet layoutData = \"\";\n\t\tif (internalField.collaborationEnabled) {\n\t\t\tlayoutData = xml`<layoutData>\n\t\t\t\t<FlexItemData growFactor=\"9\" />\n\t\t\t</layoutData>`;\n\t\t}\n\t\treturn layoutData;\n\t},\n\n\t/**\n\t * Generates a template for one of the pickers reference in the type.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @param type Reference to one of the edit style picker types\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetDateTimePickerGeneric(internalField: InternalFieldBlock, type: \"DatePicker\" | \"DateTimePicker\" | \"TimePicker\") {\n\t\tconst dataModelObjectPath = MetaModelConverter.getInvolvedDataModelObjects(internalField.dataField, internalField.entitySet);\n\t\tconst textAlign = getTextAlignment(dataModelObjectPath, internalField.formatOptions, internalField.editModeAsObject);\n\n\t\treturn xml`<${type}\n\t\t\txmlns:log=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\txmlns=\"sap.m\"\n\t\t\txmlns:core=\"sap.ui.core\"\n\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\tlog:sourcePath=\"${internalField.dataSourcePath}\"\n\t\t\tid=\"${internalField.editStyleId}\"\n\t\t\twidth=\"100%\"\n\t\t\teditable=\"${internalField.editableExpression}\"\n\t\t\tenabled=\"${internalField.enabledExpression}\"\n\t\t\trequired=\"${internalField.requiredExpression}\"\n\t\t\tchange=\"${\n\t\t\t\ttype === \"DateTimePicker\"\n\t\t\t\t\t? internalField.onChange || \"FieldRuntime.handleChange($controller, $event)\"\n\t\t\t\t\t: \"FieldRuntime.handleChange($controller, $event)\"\n\t\t\t}\"\n\t\t\ttextAlign=\"${textAlign}\"\n\t\t\tvalidateFieldGroup=\"FieldRuntime.onValidateFieldGroup($controller, $event)\"\n\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\tvalue=\"${internalField.valueBindingExpression}\"\n\t\t\tfieldGroupIds=\"${internalField.fieldGroupIds}\"\n\t\t\tshowTimezone=\"${internalField.showTimezone}\"\n\t\t\tafterValueHelpOpen=\"${internalField.collaborationEnabled ? \"FieldRuntime.handleOpenPicker\" : undefined}\"\n\t\t\tafterValueHelpClose=\"${internalField.collaborationEnabled ? \"FieldRuntime.handleClosePicker\" : undefined}\"\n\t\t\tliveChange=\"${internalField.collaborationEnabled ? \"FieldRuntime.handleLiveChange\" : undefined}\"\n\t>\n\n\t</${type}>\n\t`;\n\t},\n\n\t/**\n\t * Generates the Input template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetInputTemplate(internalField: InternalFieldBlock) {\n\t\tconst dataModelObjectPath = MetaModelConverter.getInvolvedDataModelObjects(internalField.dataField, internalField.entitySet);\n\t\tconst textAlign = getTextAlignment(dataModelObjectPath, internalField.formatOptions, internalField.editModeAsObject);\n\n\t\treturn xml`\n\t\t\t<Input\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\txmlns:log=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\t\tlog:sourcePath=\"${internalField.dataSourcePath}\"\n\t\t        core:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tid=\"${internalField.editStyleId}\"\n\t\t\t\tvalue=\"${internalField.valueBindingExpression}\"\n\t\t\t\tplaceholder=\"${internalField.editStylePlaceholder}\"\n\t\t\t\twidth=\"100%\"\n\t\t\t\teditable=\"${internalField.editableExpression}\"\n\t\t\t\tenabled=\"${internalField.enabledExpression}\"\n\t\t\t\trequired=\"${internalField.requiredExpression}\"\n\t\t\t\tchange=\"FieldRuntime.handleChange($controller, $event)\"\n\t\t\t\tliveChange=\"${internalField.collaborationEnabled ? \"FieldRuntime.handleLiveChange\" : undefined}\"\n\t\t\t\tfieldGroupIds=\"${internalField.fieldGroupIds}\"\n\t\t\t\ttextAlign=\"${textAlign}\"\n\t\t\t\tvalidateFieldGroup=\"FieldRuntime.onValidateFieldGroup($controller, $event)\"\n\t\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\t>\n\t\t\t\t${EditStyle.getLayoutData(internalField)}\n\t\t\t</Input>`;\n\t},\n\t/**\n\t * Generates the InputWithUnit template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetInputWithUnitTemplate(internalField: InternalFieldBlock) {\n\t\tconst dataModelObjectPath = MetaModelConverter.getInvolvedDataModelObjects(internalField.dataField, internalField.entitySet);\n\t\tconst textAlign = getTextAlignment(dataModelObjectPath, internalField.formatOptions, internalField.editModeAsObject);\n\t\tif (internalField.staticUnit === undefined) {\n\t\t\treturn xml`\n\t\t\t<Input\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\txmlns:log=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\t\tlog:sourcePath=\"${internalField.dataSourcePath}\"\n\t\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tid=\"${internalField.editStyleId}\"\n\t\t\t\tvalue=\"${internalField.valueBindingExpression}\"\n\t\t\t\twidth=\"${internalField.valueInputWidth}\"\n\t\t\t\tfieldWidth=\"${internalField.valueInputFieldWidth}\"\n\t\t\t\tdescription=\"${internalField.descriptionBindingExpression}\"\n\t\t\t\teditable=\"${internalField.editableExpression}\"\n\t\t\t\tenabled=\"${internalField.enabledExpression}\"\n\t\t\t\trequired=\"${internalField.requiredExpression}\"\n\t\t\t\tchange=\"FieldRuntime.handleChange($controller, $event)\"\n\t\t\t\tliveChange=\"${internalField.collaborationEnabled ? \"FieldRuntime.handleLiveChange\" : undefined}\"\n\t\t\t\ttextAlign=\"${textAlign}\"\n\t\t\t\tfieldGroupIds=\"${internalField.fieldGroupIds}\"\n\t\t\t\tvalidateFieldGroup=\"FieldRuntime.onValidateFieldGroup($controller, $event)\"\n\t\t\t>\n\t\t\t\t${EditStyle.getLayoutData(internalField)}\n\t\t\t</Input>\n\t\t\t<Input\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\txmlns:log=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\t\tlog:sourcePath=\"${internalField.dataSourcePath}\"\n\t\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tid=\"${internalField.idPrefix ? generate([internalField.idPrefix, \"Field-unitEdit\"]) : undefined}\"\n\t\t\t\tvalue=\"${internalField.unitBindingExpression}\"\n\t\t\t\twidth=\"30%\"\n\t\t\t\teditable=\"${internalField.unitEditable}\"\n\t\t\t\tenabled=\"${internalField.enabledExpression}\"\n\t\t\t\tchange=\"FieldRuntime.handleChange($controller, $event)\"\n\t\t\t\tliveChange=\"${internalField.collaborationEnabled ? \"FieldRuntime.handleLiveChange\" : undefined}\"\n\t\t\t\ttextAlign=\"Begin\"\n\t\t\t\tfieldGroupIds=\"${internalField.fieldGroupIds}\"\n\t\t\t\tvalidateFieldGroup=\"FieldRuntime.onValidateFieldGroup($controller, $event)\"\n\t\t\t\tvisible=\"${internalField.unitInputVisible}\"\n\t\t\t>\n\t\t\t\t${EditStyle.getLayoutData(internalField)}\n\t\t\t</Input>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn xml`\n\t\t\t<Input\n\t\t\t\txmlns=\"sap.m\"\n\t\t\t\txmlns:log=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\t\tlog:sourcePath=\"${internalField.dataSourcePath}\"\n\t\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tid=\"${internalField.editStyleId}\"\n\t\t\t\tvalue=\"${internalField.valueBindingExpression}\"\n\t\t\t\tplaceholder=\"${internalField.editStylePlaceholder}\"\n\t\t\t\twidth=\"100%\"\n\t\t\t\tfieldWidth=\"70%\"\n\t\t\t\tdescription=\"${internalField.staticUnit}\"\n\t\t\t\teditable=\"${internalField.editableExpression}\"\n\t\t\t\tenabled=\"${internalField.enabledExpression}\"\n\t\t\t\trequired=\"${internalField.requiredExpression}\"\n\t\t\t\tchange=\"FieldRuntime.handleChange($controller, $event)\"\n\t\t\t\tliveChange=\"${internalField.collaborationEnabled ? \"FieldRuntime.handleLiveChange\" : undefined}\"\n\t\t\t\ttextAlign=\"${textAlign}\"\n\t\t\t\tfieldGroupIds=\"${internalField.fieldGroupIds}\"\n\t\t\t\tvalidateFieldGroup=\"FieldRuntime.onValidateFieldGroup($controller, $event)\"\n\t\t\t>\n\t\t\t\t${EditStyle.getLayoutData(internalField)}\n\t\t\t</Input>`;\n\t\t}\n\t},\n\n\t/**\n\t * Generates the InputWithValueHelp template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetInputWithValueHelpTemplate(internalField: InternalFieldBlock) {\n\t\tconst dataFieldDataModelObjectPath = MetaModelConverter.getInvolvedDataModelObjects(\n\t\t\tinternalField.dataField,\n\t\t\tinternalField.entitySet\n\t\t);\n\t\tconst property = dataFieldDataModelObjectPath.targetObject.Value.$target;\n\n\t\tconst delegate = FieldHelper.computeFieldBaseDelegate(\n\t\t\t\"sap/fe/macros/field/FieldBaseDelegate\",\n\t\t\tinternalField.formatOptions.retrieveTextFromValueList as boolean\n\t\t);\n\t\tconst display = UIFormatter.getFieldDisplay(\n\t\t\tproperty,\n\t\t\tinternalField.formatOptions.displayMode as string,\n\t\t\tinternalField.editModeAsObject\n\t\t);\n\t\tconst multipleLines = getMultipleLinesForDataField(internalField, property.type, property.annotations?.UI.MultiLineText);\n\n\t\tconst propertyContext = internalField.dataField.getModel().createBindingContext(\"Value\", internalField.dataField);\n\t\tconst valueHelpPropertyContext = internalField.dataField\n\t\t\t.getModel()\n\t\t\t.createBindingContext(FieldHelper.valueHelpProperty(propertyContext));\n\n\t\tconst fieldHelp = ValueHelpTemplating.generateID(\n\t\t\tinternalField._vhFlexId,\n\t\t\tinternalField.vhIdPrefix,\n\t\t\tgetRelativePropertyPath(propertyContext as unknown as MetaModelContext, {\n\t\t\t\tcontext: propertyContext\n\t\t\t}),\n\t\t\tgetRelativePropertyPath(valueHelpPropertyContext as unknown as MetaModelContext, {\n\t\t\t\tcontext: valueHelpPropertyContext as Context\n\t\t\t})\n\t\t);\n\n\t\tconst textAlign = getTextAlignment(dataFieldDataModelObjectPath, internalField.formatOptions, internalField.editModeAsObject);\n\t\tconst label = FieldHelper.computeLabelText(internalField, { context: internalField.dataField });\n\n\t\tlet optionalContentEdit = \"\";\n\t\tif (property.type === \"Edm.String\" && property.annotations?.UI.MultiLineText) {\n\t\t\toptionalContentEdit = xml`<mdc:contentEdit xmlns:mdc=\"sap.ui.mdc\">\n\t\t\t\t<TextArea\n\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\tvalue=\"${internalField.valueBindingExpression}\"\n\t\t\t\t\trequired=\"${internalField.requiredExpression}\"\n\t\t\t\t\trows=\"${internalField.formatOptions.textLinesEdit}\"\n\t\t\t\t\tgrowing=\"${(internalField.formatOptions.textMaxLines as unknown as number) > 0 ? true : undefined}\"\n\t\t\t\t\tgrowingMaxLines=\"${internalField.formatOptions.textMaxLines}\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\tchange=\"FieldRuntime.handleChange($controller, $event)\"\n\t\t\t\t\tfieldGroupIds=\"${internalField.fieldGroupIds}\"\n\t\t\t\t/>\n\t\t\t</mdc:contentEdit>`;\n\t\t}\n\n\t\tlet optionalLayoutData = \"\";\n\t\tif (internalField.collaborationEnabled === true) {\n\t\t\toptionalLayoutData = xml`<mdc:layoutData xmlns:mdc=\"sap.ui.mdc\">\n\t\t\t\t<FlexItemData xmlns=\"sap.m\" growFactor=\"9\" />\n\t\t\t</mdc:layoutData>`;\n\t\t}\n\n\t\treturn xml`<mdc:Field\n\t\t\txmlns:mdc=\"sap.ui.mdc\"\n\t\t\txmlns:log=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\tdelegate=\"${delegate}\"\n\t\t\tid=\"${internalField.editStyleId}\"\n\t\t\tlog:sourcePath=\"${internalField.dataSourcePath}\"\n\t\t\tvalue=\"${internalField.valueBindingExpression}\"\n\t\t\tplaceholder=\"${internalField.editStylePlaceholder}\"\n\t\t\tvalueState=\"${internalField.valueState}\"\n\t\t\teditMode=\"${internalField.editMode}\"\n\t\t\twidth=\"100%\"\n\t\t\trequired=\"${internalField.requiredExpression}\"\n\t\t\tadditionalValue=\"${internalField.textBindingExpression}\"\n\t\t\tdisplay=\"${display}\"\n\t\t\tmultipleLines=\"${multipleLines}\"\n\t\t\tfieldHelp=\"${fieldHelp}\"\n\t\t\tfieldGroupIds=\"${internalField.fieldGroupIds}\"\n\t\t\tchange=\"FieldRuntime.handleChange($controller, $event)\"\n\t\t\tliveChange=\"${internalField.collaborationEnabled === true ? \"FieldRuntime.handleLiveChange\" : undefined}\"\n\t\t\ttextAlign=\"${textAlign}\"\n\t\t\tvalidateFieldGroup=\"FieldRuntime.onValidateFieldGroup($controller, $event)\"\n\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\tlabel=\"${label}\"\n\t\t>\n\t\t\t${optionalContentEdit}\n\t\t\t${optionalLayoutData}\n\t\t</mdc:Field>`;\n\t},\n\n\t/**\n\t * Generates the CheckBox template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetCheckBoxTemplate(internalField: InternalFieldBlock) {\n\t\treturn xml`\n\t\t    <CheckBox\n                xmlns=\"sap.m\"\n                xmlns:macrodata=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t        macrodata:sourcePath=\"${internalField.dataSourcePath}\"\n\t\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\t\tid=\"${internalField.editStyleId}\"\n\t\t        selected=\"${internalField.valueBindingExpression}\"\n\t\t        editable=\"${internalField.editableExpression}\"\n\t\t        enabled=\"${internalField.enabledExpression}\"\n\t\t        select=\"FieldRuntime.handleChange($controller, $event)\"\n\t\t        fieldGroupIds=\"${internalField.fieldGroupIds}\"\n\t\t        validateFieldGroup=\"FieldRuntime.onValidateFieldGroup($controller, $event)\"\n\t\t        ariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t    />\n        `;\n\t},\n\n\t/**\n\t * Generates the TextArea template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTextAreaTemplate(internalField: InternalFieldBlock) {\n\t\tconst liveChange =\n\t\t\tinternalField.collaborationEnabled || internalField.formatOptions.textMaxLength ? \"FieldRuntime.handleLiveChange\" : undefined;\n\n\t\tconst growing = internalField.formatOptions.textMaxLines ? true : false;\n\n\t\t//unfortunately this one is a \"different\" layoutData than the others, therefore the reuse function from above cannot be used for the textArea template\n\t\tlet layoutData = \"\";\n\t\tif (internalField.collaborationEnabled) {\n\t\t\tlayoutData = xml`<field:layoutData>\n\t\t\t<FlexItemData xmlns=\"sap.m\" growFactor=\"9\" />\n\t\t</field:layoutData>`;\n\t\t}\n\n\t\treturn xml`<field:TextAreaEx\n\t\t\txmlns:log=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\txmlns:field=\"sap.fe.macros.field\"\n\t\t\txmlns:core=\"sap.ui.core\"\n\t\t\tcore:require=\"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}\"\n\t\t\tlog:sourcePath=\"${internalField.dataSourcePath}\"\n\t\t\tid=\"${internalField.editStyleId}\"\n\t\t\tvalue=\"${internalField.valueBindingExpression}\"\n\t\t\tplaceholder=\"${internalField.editStylePlaceholder}\"\n\t\t\trequired=\"${internalField.requiredExpression}\"\n\t\t\trows=\"${internalField.formatOptions.textLinesEdit}\"\n\t\t\tgrowing=\"${growing}\"\n\t\t\tgrowingMaxLines=\"${internalField.formatOptions.textMaxLines}\"\n\t\t\twidth=\"100%\"\n\t\t\teditable=\"${internalField.editableExpression}\"\n\t\t\tenabled=\"${internalField.enabledExpression}\"\n\t\t\tchange=\"FieldRuntime.handleChange($controller, $event)\"\n\t\t\tfieldGroupIds=\"${internalField.fieldGroupIds}\"\n\t\t\tvalidateFieldGroup=\"FieldRuntime.onValidateFieldGroup($controller, $event)\"\n\t\t\tariaLabelledBy=\"${internalField.ariaLabelledBy}\"\n\t\t\tliveChange=\"${liveChange}\"\n\t\t\tmaxLength=\"${internalField.formatOptions.textMaxLength}\"\n\t\t\tshowExceededText=\"true\"\n\t\t>\n\t\t\t${layoutData}\n\t\t</field:TextAreaEx>\n\t\t`;\n\t},\n\n\t/**\n\t * Generates the RatingIndicator template.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetRatingIndicatorTemplate: (internalField: InternalFieldBlock) => {\n\t\tconst tooltip = internalField.ratingIndicatorTooltip || \"{sap.fe.i18n>T_COMMON_RATING_INDICATOR_TITLE_LABEL}\";\n\n\t\treturn xml`<RatingIndicator\n\t\t\txmlns=\"sap.m\"\n\t\t\tid=\"${internalField.editStyleId}\"\n\t\t\tmaxValue=\"${internalField.ratingIndicatorTargetValue}\"\n\t\t\tvalue=\"${internalField.valueBindingExpression}\"\n\t\t\ttooltip=\"${tooltip}\"\n\t\t\ticonSize=\"1.375rem\"\n\t\t\tclass=\"sapUiTinyMarginTopBottom\"\n\t\t\teditable=\"true\"\n\t\t>\n\t\t${EditStyle.getLayoutData(internalField)}\n\t\t</RatingIndicator>\n\t\t`;\n\t},\n\n\t/**\n\t * Entry point for further templating processings.\n\t *\n\t * @param internalField Reference to the current internal field instance\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate: (internalField: InternalFieldBlock) => {\n\t\tlet innerFieldContent;\n\n\t\tswitch (internalField.editStyle) {\n\t\t\tcase \"CheckBox\":\n\t\t\t\tinnerFieldContent = EditStyle.getCheckBoxTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"DatePicker\":\n\t\t\tcase \"DateTimePicker\":\n\t\t\tcase \"TimePicker\": {\n\t\t\t\tinnerFieldContent = EditStyle.getDateTimePickerGeneric(internalField, internalField.editStyle);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"Input\": {\n\t\t\t\tinnerFieldContent = EditStyle.getInputTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"InputWithUnit\": {\n\t\t\t\tinnerFieldContent = EditStyle.getInputWithUnitTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"InputWithValueHelp\": {\n\t\t\t\tinnerFieldContent = EditStyle.getInputWithValueHelpTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"RatingIndicator\":\n\t\t\t\tinnerFieldContent = EditStyle.getRatingIndicatorTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tcase \"TextArea\":\n\t\t\t\tinnerFieldContent = EditStyle.getTextAreaTemplate(internalField);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\treturn innerFieldContent;\n\t}\n};\n\nexport default EditStyle;\n"],"mappings":"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"}},{"offset":{"line":18341,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockTemplateProcessor","MetaModelConverter","StableIdHelper","PropertyFormatters","UIFormatter","FieldTemplating","ValueHelpTemplating","FieldHelper","getTextAlignment","getMultipleLinesForDataField","getRelativePropertyPath","generate","xml","EditStyle","getLayoutData","internalField","layoutData","collaborationEnabled","getDateTimePickerGeneric","type","dataModelObjectPath","getInvolvedDataModelObjects","dataField","entitySet","textAlign","formatOptions","editModeAsObject","dataSourcePath","editStyleId","editableExpression","enabledExpression","requiredExpression","onChange","ariaLabelledBy","valueBindingExpression","fieldGroupIds","showTimezone","undefined","getInputTemplate","editStylePlaceholder","getInputWithUnitTemplate","staticUnit","valueInputWidth","valueInputFieldWidth","descriptionBindingExpression","idPrefix","unitBindingExpression","unitEditable","unitInputVisible","getInputWithValueHelpTemplate","_property$annotations","_property$annotations2","dataFieldDataModelObjectPath","property","targetObject","Value","$target","delegate","computeFieldBaseDelegate","retrieveTextFromValueList","display","getFieldDisplay","displayMode","multipleLines","annotations","UI","MultiLineText","propertyContext","getModel","createBindingContext","valueHelpPropertyContext","valueHelpProperty","fieldHelp","generateID","_vhFlexId","vhIdPrefix","context","label","computeLabelText","optionalContentEdit","textLinesEdit","textMaxLines","optionalLayoutData","valueState","editMode","textBindingExpression","getCheckBoxTemplate","getTextAreaTemplate","liveChange","textMaxLength","growing","getRatingIndicatorTemplate","tooltip","ratingIndicatorTooltip","ratingIndicatorTargetValue","getTemplate","innerFieldContent","editStyle"],"sources":["EditStyle-dbg.js"],"mappings":"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","sourceRoot":"internal/field"}},{"offset":{"line":18552,"column":0},"map":{"version":3,"names":["getTemplateWithFieldApi","internalField","template","id","formatOptions","fieldMode","editMode","EditMode","Display","_apiId","idPrefix","generate","undefined","onChange","xml","requiredExpression","editableExpression","collaborationEnabled","visible","getContentEdit","contentEdit","editStyle","editStyleTemplate","EditStyle","getTemplate","contentInnerEdit","createFieldWrapper","fieldWrapperID","_flexId","contentDisplay","DisplayStyle","textAlign","class","getFieldStructureTemplate","displayStyle","box","getFileTemplate","fieldWrapper"],"sourceRoot":"internal/field","sources":["FieldStructure.ts"],"sourcesContent":["import { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport EditMode from \"sap/ui/mdc/enum/EditMode\";\nimport InternalFieldBlock from \"../InternalField.block\";\nimport DisplayStyle from \"./DisplayStyle\";\nimport EditStyle from \"./EditStyle\";\n\nfunction getTemplateWithFieldApi(internalField: InternalFieldBlock, template: string) {\n\tlet id;\n\n\tif (internalField.formatOptions.fieldMode === \"nowrapper\" && internalField.editMode === EditMode.Display) {\n\t\treturn template;\n\t}\n\n\tif (internalField._apiId) {\n\t\tid = internalField._apiId;\n\t} else if (internalField.idPrefix) {\n\t\tid = generate([internalField.idPrefix, \"Field\"]);\n\t} else {\n\t\tid = undefined;\n\t}\n\n\tif (internalField.onChange === null || internalField.onChange === \"null\") {\n\t\tinternalField.onChange = undefined;\n\t}\n\treturn xml`\n\t\t\t<macroField:FieldAPI\n\t\t\t\txmlns:macroField=\"sap.fe.macros.field\"\n\t\t\t\tchange=\"${internalField.onChange}\"\n\t\t\t\tid=\"${id}\"\n\t\t\t\trequired=\"${internalField.requiredExpression}\"\n\t\t\t\teditable=\"${internalField.editableExpression}\"\n\t\t\t\tcollaborationEnabled=\"${internalField.collaborationEnabled}\"\n\t\t\t\tvisible=\"${internalField.visible}\"\n\t\t\t>\n\t\t\t\t${template}\n\t\t\t</macroField:FieldAPI>\n\t\t`;\n}\n\n/**\n * Helps to calculate the content edit functionality / templating.\n *\n * @param internalField Reference to the current internal field instance\n * @returns An XML-based string with the definition of the field control\n */\nfunction getContentEdit(internalField: InternalFieldBlock) {\n\tlet contentEdit;\n\n\tif (internalField.editMode !== EditMode.Display && !!internalField.editStyle) {\n\t\tconst editStyleTemplate = EditStyle.getTemplate(internalField);\n\t\tlet contentInnerEdit;\n\t\tif (internalField.collaborationEnabled ?? false) {\n\t\t\tcontentInnerEdit = xml`<HBox xmlns=\"sap.m\" width=\"100%\">\n            ${editStyleTemplate}\n            <core:Fragment fragmentName=\"sap.fe.macros.internal.CollaborationAvatar\" type=\"XML\" />\n        </HBox>`;\n\t\t} else {\n\t\t\tcontentInnerEdit = editStyleTemplate;\n\t\t}\n\n\t\tcontentEdit = xml`${contentInnerEdit}`;\n\t}\n\treturn contentEdit || \"\";\n}\n\n/**\n * Create the fieldWrapper control for use cases with display and edit styles.\n *\n * @param internalField Reference to the current internal field instance\n * @returns An XML-based string with the definition of the field control\n */\nfunction createFieldWrapper(internalField: InternalFieldBlock) {\n\tlet fieldWrapperID;\n\tif (internalField._flexId) {\n\t\tfieldWrapperID = internalField._flexId;\n\t} else if (internalField.idPrefix) {\n\t\tfieldWrapperID = generate([internalField.idPrefix, \"Field-content\"]);\n\t} else {\n\t\tfieldWrapperID = undefined;\n\t}\n\n\t// compute the display part and the edit part for the fieldwrapper control\n\tconst contentDisplay = DisplayStyle.getTemplate(internalField);\n\t// content edit part needs to be wrapped further with an hbox in case of collaboration mode\n\t// that´s why we need to call this special helper here which finally calls the editStyle.getTemplate\n\tconst contentEdit = getContentEdit(internalField);\n\treturn xml`<controls:FieldWrapper\n\t\txmlns:controls=\"sap.fe.macros.controls\"\n\t\tid=\"${fieldWrapperID}\"\n\t\teditMode=\"${internalField.editMode}\"\n\t\tvisible=\"${internalField.visible}\"\n\t\twidth=\"100%\"\n\t\ttextAlign=\"${internalField.textAlign}\"\n\t\tclass=\"${internalField.class}\"\n\t\t>\n\n\t\t<controls:contentDisplay>\n\t\t\t${contentDisplay}\n\t\t</controls:contentDisplay>\n\t\t<controls:contentEdit>\n\t\t\t${contentEdit}\n\t\t</controls:contentEdit>\n\n\t</controls:FieldWrapper>`;\n}\n\n/**\n * Helps to calculate the field structure wrapper.\n *\n * @param internalField Reference to the current internal field instance\n * @returns An XML-based string with the definition of the field control\n */\nfunction getFieldStructureTemplate(internalField: InternalFieldBlock) {\n\t//compute the field in case of mentioned display styles\n\tif (\n\t\tinternalField.displayStyle === \"Avatar\" ||\n\t\tinternalField.displayStyle === \"Contact\" ||\n\t\tinternalField.displayStyle === \"Button\" ||\n\t\tinternalField.displayStyle === \"File\"\n\t) {\n\t\t// check for special handling in case a file type is used with the collaboration mode\n\t\t// (renders an avatar directly)\n\t\tif (\n\t\t\tinternalField.displayStyle === \"File\" &&\n\t\t\t(internalField.collaborationEnabled ?? false) &&\n\t\t\tinternalField.editMode !== EditMode.Display\n\t\t) {\n\t\t\tconst box = xml`\n\t\t\t\t<HBox xmlns=\"sap.m\" width=\"100%\">\n\t\t\t\t<VBox width=\"100%\">\n\t\t\t\t\t${DisplayStyle.getFileTemplate(internalField)}\n\t\t\t\t</VBox>\n\t\t\t\t<core:Fragment fragmentName=\"sap.fe.macros.internal.CollaborationAvatar\" type=\"XML\" />\n\t\t\t</HBox>`;\n\t\t\treturn getTemplateWithFieldApi(internalField, box);\n\t\t} else {\n\t\t\t//for all other cases render the displayStyles with a field api wrapper\n\t\t\treturn getTemplateWithFieldApi(internalField, DisplayStyle.getTemplate(internalField));\n\t\t}\n\t} else if (internalField.formatOptions.fieldMode === \"nowrapper\" && internalField.editMode === EditMode.Display) {\n\t\t//renders a display based building block (e.g. a button) that has no field api wrapper around it.\n\t\treturn DisplayStyle.getTemplate(internalField);\n\t} else {\n\t\t//for all other cases create a field wrapper\n\t\tconst fieldWrapper = createFieldWrapper(internalField);\n\t\treturn getTemplateWithFieldApi(internalField, fieldWrapper);\n\t}\n}\n\nexport default getFieldStructureTemplate;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;EAOA,SAASA,uBAAuB,CAACC,aAAiC,EAAEC,QAAgB,EAAE;IACrF,IAAIC,EAAE;IAEN,IAAIF,aAAa,CAACG,aAAa,CAACC,SAAS,KAAK,WAAW,IAAIJ,aAAa,CAACK,QAAQ,KAAKC,QAAQ,CAACC,OAAO,EAAE;MACzG,OAAON,QAAQ;IAChB;IAEA,IAAID,aAAa,CAACQ,MAAM,EAAE;MACzBN,EAAE,GAAGF,aAAa,CAACQ,MAAM;IAC1B,CAAC,MAAM,IAAIR,aAAa,CAACS,QAAQ,EAAE;MAClCP,EAAE,GAAGQ,QAAQ,CAAC,CAACV,aAAa,CAACS,QAAQ,EAAE,OAAO,CAAC,CAAC;IACjD,CAAC,MAAM;MACNP,EAAE,GAAGS,SAAS;IACf;IAEA,IAAIX,aAAa,CAACY,QAAQ,KAAK,IAAI,IAAIZ,aAAa,CAACY,QAAQ,KAAK,MAAM,EAAE;MACzEZ,aAAa,CAACY,QAAQ,GAAGD,SAAS;IACnC;IACA,OAAOE,GAAI;AACZ;AACA;AACA,cAAcb,aAAa,CAACY,QAAS;AACrC,UAAUV,EAAG;AACb,gBAAgBF,aAAa,CAACc,kBAAmB;AACjD,gBAAgBd,aAAa,CAACe,kBAAmB;AACjD,4BAA4Bf,aAAa,CAACgB,oBAAqB;AAC/D,eAAehB,aAAa,CAACiB,OAAQ;AACrC;AACA,MAAMhB,QAAS;AACf;AACA,GAAG;EACH;;EAEA;AACA;AACA;AACA;AACA;AACA;EACA,SAASiB,cAAc,CAAClB,aAAiC,EAAE;IAC1D,IAAImB,WAAW;IAEf,IAAInB,aAAa,CAACK,QAAQ,KAAKC,QAAQ,CAACC,OAAO,IAAI,CAAC,CAACP,aAAa,CAACoB,SAAS,EAAE;MAC7E,MAAMC,iBAAiB,GAAGC,SAAS,CAACC,WAAW,CAACvB,aAAa,CAAC;MAC9D,IAAIwB,gBAAgB;MACpB,IAAIxB,aAAa,CAACgB,oBAAoB,IAAI,KAAK,EAAE;QAChDQ,gBAAgB,GAAGX,GAAI;AAC1B,cAAcQ,iBAAkB;AAChC;AACA,gBAAgB;MACd,CAAC,MAAM;QACNG,gBAAgB,GAAGH,iBAAiB;MACrC;MAEAF,WAAW,GAAGN,GAAI,GAAEW,gBAAiB,EAAC;IACvC;IACA,OAAOL,WAAW,IAAI,EAAE;EACzB;;EAEA;AACA;AACA;AACA;AACA;AACA;EACA,SAASM,kBAAkB,CAACzB,aAAiC,EAAE;IAC9D,IAAI0B,cAAc;IAClB,IAAI1B,aAAa,CAAC2B,OAAO,EAAE;MAC1BD,cAAc,GAAG1B,aAAa,CAAC2B,OAAO;IACvC,CAAC,MAAM,IAAI3B,aAAa,CAACS,QAAQ,EAAE;MAClCiB,cAAc,GAAGhB,QAAQ,CAAC,CAACV,aAAa,CAACS,QAAQ,EAAE,eAAe,CAAC,CAAC;IACrE,CAAC,MAAM;MACNiB,cAAc,GAAGf,SAAS;IAC3B;;IAEA;IACA,MAAMiB,cAAc,GAAGC,YAAY,CAACN,WAAW,CAACvB,aAAa,CAAC;IAC9D;IACA;IACA,MAAMmB,WAAW,GAAGD,cAAc,CAAClB,aAAa,CAAC;IACjD,OAAOa,GAAI;AACZ;AACA,QAAQa,cAAe;AACvB,cAAc1B,aAAa,CAACK,QAAS;AACrC,aAAaL,aAAa,CAACiB,OAAQ;AACnC;AACA,eAAejB,aAAa,CAAC8B,SAAU;AACvC,WAAW9B,aAAa,CAAC+B,KAAM;AAC/B;AACA;AACA;AACA,KAAKH,cAAe;AACpB;AACA;AACA,KAAKT,WAAY;AACjB;AACA;AACA,0BAA0B;EAC1B;;EAEA;AACA;AACA;AACA;AACA;AACA;EACA,SAASa,yBAAyB,CAAChC,aAAiC,EAAE;IACrE;IACA,IACCA,aAAa,CAACiC,YAAY,KAAK,QAAQ,IACvCjC,aAAa,CAACiC,YAAY,KAAK,SAAS,IACxCjC,aAAa,CAACiC,YAAY,KAAK,QAAQ,IACvCjC,aAAa,CAACiC,YAAY,KAAK,MAAM,EACpC;MACD;MACA;MACA,IACCjC,aAAa,CAACiC,YAAY,KAAK,MAAM,KACpCjC,aAAa,CAACgB,oBAAoB,IAAI,KAAK,CAAC,IAC7ChB,aAAa,CAACK,QAAQ,KAAKC,QAAQ,CAACC,OAAO,EAC1C;QACD,MAAM2B,GAAG,GAAGrB,GAAI;AACnB;AACA;AACA,OAAOgB,YAAY,CAACM,eAAe,CAACnC,aAAa,CAAE;AACnD;AACA;AACA,WAAW;QACR,OAAOD,uBAAuB,CAACC,aAAa,EAAEkC,GAAG,CAAC;MACnD,CAAC,MAAM;QACN;QACA,OAAOnC,uBAAuB,CAACC,aAAa,EAAE6B,YAAY,CAACN,WAAW,CAACvB,aAAa,CAAC,CAAC;MACvF;IACD,CAAC,MAAM,IAAIA,aAAa,CAACG,aAAa,CAACC,SAAS,KAAK,WAAW,IAAIJ,aAAa,CAACK,QAAQ,KAAKC,QAAQ,CAACC,OAAO,EAAE;MAChH;MACA,OAAOsB,YAAY,CAACN,WAAW,CAACvB,aAAa,CAAC;IAC/C,CAAC,MAAM;MACN;MACA,MAAMoC,YAAY,GAAGX,kBAAkB,CAACzB,aAAa,CAAC;MACtD,OAAOD,uBAAuB,CAACC,aAAa,EAAEoC,YAAY,CAAC;IAC5D;EACD;EAAC,OAEcJ,yBAAyB;AAAA"}},{"offset":{"line":18691,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockTemplateProcessor","StableIdHelper","EditMode","DisplayStyle","EditStyle","generate","xml","getTemplateWithFieldApi","internalField","template","id","formatOptions","fieldMode","editMode","Display","_apiId","idPrefix","undefined","onChange","requiredExpression","editableExpression","collaborationEnabled","visible","getContentEdit","contentEdit","editStyle","editStyleTemplate","getTemplate","contentInnerEdit","createFieldWrapper","fieldWrapperID","_flexId","contentDisplay","textAlign","class","getFieldStructureTemplate","displayStyle","box","getFileTemplate","fieldWrapper"],"sources":["FieldStructure-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,yDAAO,CAAC,4DAA6D,qCAAsC,2BAA4B,iBAAkB,eAAgB,SAAUC,EAAgCC,EAAgBC,EAAUC,EAAcC,GAChQ,aAEA,IAAIC,EAAWJ,EAAeI,SAC9B,IAAIC,EAAMN,EAA+BM,IACzC,SAASC,EAAwBC,EAAeC,GAC9C,IAAIC,EACJ,GAAIF,EAAcG,cAAcC,YAAc,aAAeJ,EAAcK,WAAaX,EAASY,QAAS,CACxG,OAAOL,CACT,CACA,GAAID,EAAcO,OAAQ,CACxBL,EAAKF,EAAcO,MACrB,MAAO,GAAIP,EAAcQ,SAAU,CACjCN,EAAKL,EAAS,CAACG,EAAcQ,SAAU,SACzC,KAAO,CACLN,EAAKO,SACP,CACA,GAAIT,EAAcU,WAAa,MAAQV,EAAcU,WAAa,OAAQ,CACxEV,EAAcU,SAAWD,SAC3B,CACA,OAAOX,CAAG;;;cAGAE,EAAcU;UAClBR;gBACMF,EAAcW;gBACdX,EAAcY;4BACFZ,EAAca;eAC3Bb,EAAcc;;MAEvBb;;GAGJ,CAQA,SAASc,EAAef,GACtB,IAAIgB,EACJ,GAAIhB,EAAcK,WAAaX,EAASY,WAAaN,EAAciB,UAAW,CAC5E,MAAMC,EAAoBtB,EAAUuB,YAAYnB,GAChD,IAAIoB,EACJ,GAAIpB,EAAca,sBAAwB,MAAO,CAC/CO,EAAmBtB,CAAG;cAChBoB;;gBAGR,KAAO,CACLE,EAAmBF,CACrB,CACAF,EAAclB,CAAG,GAAGsB,GACtB,CACA,OAAOJ,GAAe,EACxB,CAQA,SAASK,EAAmBrB,GAC1B,IAAIsB,EACJ,GAAItB,EAAcuB,QAAS,CACzBD,EAAiBtB,EAAcuB,OACjC,MAAO,GAAIvB,EAAcQ,SAAU,CACjCc,EAAiBzB,EAAS,CAACG,EAAcQ,SAAU,iBACrD,KAAO,CACLc,EAAiBb,SACnB,CAGA,MAAMe,EAAiB7B,EAAawB,YAAYnB,GAGhD,MAAMgB,EAAcD,EAAef,GACnC,OAAOF,CAAG;;QAENwB;cACMtB,EAAcK;aACfL,EAAcc;;eAEZd,EAAcyB;WAClBzB,EAAc0B;;;;KAIpBF;;;KAGAR;;;0BAIH,CAQA,SAASW,EAA0B3B,GAEjC,GAAIA,EAAc4B,eAAiB,UAAY5B,EAAc4B,eAAiB,WAAa5B,EAAc4B,eAAiB,UAAY5B,EAAc4B,eAAiB,OAAQ,CAG3K,GAAI5B,EAAc4B,eAAiB,SAAW5B,EAAca,sBAAwB,QAAUb,EAAcK,WAAaX,EAASY,QAAS,CACzI,MAAMuB,EAAM/B,CAAG;;;OAGhBH,EAAamC,gBAAgB9B;;;YAI5B,OAAOD,EAAwBC,EAAe6B,EAChD,KAAO,CAEL,OAAO9B,EAAwBC,EAAeL,EAAawB,YAAYnB,GACzE,CACF,MAAO,GAAIA,EAAcG,cAAcC,YAAc,aAAeJ,EAAcK,WAAaX,EAASY,QAAS,CAE/G,OAAOX,EAAawB,YAAYnB,EAClC,KAAO,CAEL,MAAM+B,EAAeV,EAAmBrB,GACxC,OAAOD,EAAwBC,EAAe+B,EAChD,CACF,CACA,OAAOJ,CACT,EAAG","sourceRoot":"internal/field"}},{"offset":{"line":18734,"column":0},"map":{"version":3,"names":["ActionHelper","getMultiSelectDisabledActions","collections","multiSelectDisabledActions","actions","filter","collection","$Type","action","actionTarget","ActionTarget","isBound","parameter","parameters","isPathAnnotationExpression","annotations","UI","Hidden","Common","FieldControl","push","name","getPressEventDataFieldForActionButton","sId","oAction","oParams","sOperationAvailableMap","sInvocationGrouping","InvocationGrouping","$EnumMember","CommonHelper","addSingleQuotes","Label","generateFunction","Action","objectToString","getNumberOfContextsExpression","vActionEnabled","sNumberOfSelectedContexts","getOperationAvailableMap","aCollection","sControl","oContext","oOperationAvailableMap","forEach","oRecord","actionName","indexOf","Determining","_getOperationAvailableMapOfTable","_getOperationAvailableMapOfChart","oDataFieldForAction","sActionName","oConverterContext","Core","OperationAvailable","length","bindingParameterFullName","fullyQualifiedName","targetExpression","getExpressionFromAnnotation","undefined","path","bindingContextPathVisitor","isPathInModelExpression","_addToMap","oResult","getActionPath","context","sProperty","substr","sBindingParameter","sKey","oValue","oMap"],"sourceRoot":"internal/helpers","sources":["ActionHelper.ts"],"sourcesContent":["import { DataFieldAbstractTypes, UIAnnotationTypes, type DataFieldForAction } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport { bindingContextPathVisitor } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport { getExpressionFromAnnotation, isPathInModelExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { isPathAnnotationExpression } from \"sap/fe/core/helpers/TypeGuards\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\n\nconst ActionHelper = {\n\t/**\n\t * Returns an array of actions that are not enabled with a multiple selection.\n\t *\n\t * @function\n\t * @name getMultiSelectDisabledActions\n\t * @param collections Array of records\n\t * @returns An array of action paths\n\t * @ui5-restricted\n\t */\n\tgetMultiSelectDisabledActions(collections?: DataFieldAbstractTypes[]) {\n\t\tconst multiSelectDisabledActions: string[] = [];\n\t\tconst actions = (collections?.filter((collection) => collection.$Type === UIAnnotationTypes.DataFieldForAction) ??\n\t\t\t[]) as DataFieldForAction[];\n\t\tfor (const action of actions) {\n\t\t\tconst actionTarget = action?.ActionTarget;\n\t\t\tif (actionTarget?.isBound === true) {\n\t\t\t\tfor (const parameter of actionTarget.parameters) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tisPathAnnotationExpression(parameter.annotations.UI?.Hidden) ||\n\t\t\t\t\t\tisPathAnnotationExpression(parameter.annotations.Common?.FieldControl)\n\t\t\t\t\t) {\n\t\t\t\t\t\tmultiSelectDisabledActions.push(actionTarget.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn multiSelectDisabledActions;\n\t},\n\n\t/**\n\t * Method to get the expression for the 'press' event for the DataFieldForActionButton.\n\t *\n\t * @function\n\t * @name getPressEventDataFieldForActionButton\n\t * @param sId Control ID\n\t * @param oAction Action object\n\t * @param oParams Parameters\n\t * @param sOperationAvailableMap OperationAvailableMap as stringified JSON object\n\t * @returns The binding expression\n\t */\n\tgetPressEventDataFieldForActionButton(sId: string, oAction: any, oParams: any, sOperationAvailableMap: string) {\n\t\tconst sInvocationGrouping =\n\t\t\toAction.InvocationGrouping &&\n\t\t\toAction.InvocationGrouping.$EnumMember === \"com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet\"\n\t\t\t\t? \"ChangeSet\"\n\t\t\t\t: \"Isolated\";\n\t\toParams = oParams || {};\n\t\toParams[\"invocationGrouping\"] = CommonHelper.addSingleQuotes(sInvocationGrouping);\n\t\toParams[\"controlId\"] = CommonHelper.addSingleQuotes(sId);\n\t\toParams[\"operationAvailableMap\"] = CommonHelper.addSingleQuotes(sOperationAvailableMap);\n\t\toParams[\"model\"] = \"${$source>/}.getModel()\";\n\t\toParams[\"label\"] = oAction.Label && CommonHelper.addSingleQuotes(oAction.Label, true);\n\n\t\treturn CommonHelper.generateFunction(\n\t\t\t\".editFlow.invokeAction\",\n\t\t\tCommonHelper.addSingleQuotes(oAction.Action),\n\t\t\tCommonHelper.objectToString(oParams)\n\t\t);\n\t},\n\t/**\n\t * Return Number of contexts expression.\n\t *\n\t * @function\n\t * @name getNumberOfContextsExpression\n\t * @param vActionEnabled Status of action (single or multiselect)\n\t * @returns Number of contexts expression\n\t */\n\tgetNumberOfContextsExpression(vActionEnabled: String) {\n\t\tlet sNumberOfSelectedContexts;\n\t\tif (vActionEnabled === \"single\") {\n\t\t\tsNumberOfSelectedContexts = \"${internal>numberOfSelectedContexts} === 1\";\n\t\t} else {\n\t\t\tsNumberOfSelectedContexts = \"${internal>numberOfSelectedContexts} > 0\";\n\t\t}\n\t\treturn sNumberOfSelectedContexts;\n\t},\n\t/**\n\t * Return UI Control (LineItem/Chart) Operation Available Map.\n\t *\n\t * @function\n\t * @name getOperationAvailableMap\n\t * @param aCollection Array of records\n\t * @param sControl Control name (lineItem / chart)\n\t * @param oContext Converter context\n\t * @returns The record containing all action names and their corresponding Core.OperationAvailable property paths\n\t */\n\tgetOperationAvailableMap(aCollection: any, sControl: string, oContext: any): Record<string, any> {\n\t\tlet oOperationAvailableMap: Record<string, any> = {};\n\t\tif (aCollection) {\n\t\t\taCollection.forEach((oRecord: any) => {\n\t\t\t\tif (oRecord.$Type === UIAnnotationTypes.DataFieldForAction) {\n\t\t\t\t\tif (oRecord.$Type === UIAnnotationTypes.DataFieldForAction) {\n\t\t\t\t\t\tconst actionName = oRecord.Action as string;\n\t\t\t\t\t\tif (actionName?.indexOf(\"/\") < 0 && !oRecord.Determining) {\n\t\t\t\t\t\t\tif (sControl === \"table\") {\n\t\t\t\t\t\t\t\toOperationAvailableMap = this._getOperationAvailableMapOfTable(\n\t\t\t\t\t\t\t\t\toRecord,\n\t\t\t\t\t\t\t\t\tactionName,\n\t\t\t\t\t\t\t\t\toOperationAvailableMap,\n\t\t\t\t\t\t\t\t\toContext\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else if (sControl === \"chart\") {\n\t\t\t\t\t\t\t\toOperationAvailableMap = this._getOperationAvailableMapOfChart(\n\t\t\t\t\t\t\t\t\tactionName,\n\t\t\t\t\t\t\t\t\toOperationAvailableMap,\n\t\t\t\t\t\t\t\t\toContext\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn oOperationAvailableMap;\n\t},\n\n\t/**\n\t * Return LineItem Action Operation Available Map.\n\t *\n\t * @function\n\t * @name _getOperationAvailableMapOfTable\n\t * @private\n\t * @param oDataFieldForAction Data field for action object\n\t * @param sActionName Action name\n\t * @param oOperationAvailableMap Operation available map object\n\t * @param oConverterContext Converter context object\n\t * @returns The record containing all action name of line item and the corresponding Core.OperationAvailable property path\n\t */\n\t_getOperationAvailableMapOfTable(\n\t\toDataFieldForAction: DataFieldForAction,\n\t\tsActionName: string,\n\t\toOperationAvailableMap: Record<string, any>,\n\t\toConverterContext: ConverterContext\n\t) {\n\t\tconst actionTarget = oDataFieldForAction.ActionTarget;\n\t\tif (actionTarget?.annotations?.Core?.OperationAvailable === null) {\n\t\t\t// We disabled action advertisement but kept it in the code for the time being\n\t\t\t//oOperationAvailableMap = this._addToMap(sActionName, null, oOperationAvailableMap);\n\t\t} else if (actionTarget?.parameters?.length) {\n\t\t\tconst bindingParameterFullName = actionTarget.parameters[0].fullyQualifiedName,\n\t\t\t\ttargetExpression = getExpressionFromAnnotation(\n\t\t\t\t\tactionTarget?.annotations?.Core?.OperationAvailable,\n\t\t\t\t\t[],\n\t\t\t\t\tundefined,\n\t\t\t\t\t(path: string) => bindingContextPathVisitor(path, oConverterContext, bindingParameterFullName)\n\t\t\t\t);\n\t\t\tif (isPathInModelExpression(targetExpression)) {\n\t\t\t\toOperationAvailableMap = this._addToMap(sActionName, targetExpression.path, oOperationAvailableMap);\n\t\t\t} else if (actionTarget?.annotations?.Core?.OperationAvailable !== undefined) {\n\t\t\t\toOperationAvailableMap = this._addToMap(sActionName, targetExpression, oOperationAvailableMap);\n\t\t\t}\n\t\t}\n\t\treturn oOperationAvailableMap;\n\t},\n\n\t/**\n\t * Return LineItem Action Operation Available Map.\n\t *\n\t * @function\n\t * @name _getOperationAvailableMapOfChart\n\t * @private\n\t * @param sActionName Action name\n\t * @param oOperationAvailableMap Operation available map object\n\t * @param oContext Context object\n\t * @returns The record containing all action name of chart and the corresponding Core.OperationAvailable property path\n\t */\n\t_getOperationAvailableMapOfChart(sActionName: string, oOperationAvailableMap: Record<string, any>, oContext: any) {\n\t\tlet oResult = CommonHelper.getActionPath(oContext.context, false, sActionName, true);\n\t\tif (oResult === null) {\n\t\t\toOperationAvailableMap = this._addToMap(sActionName, null, oOperationAvailableMap);\n\t\t} else {\n\t\t\toResult = CommonHelper.getActionPath(oContext.context, false, sActionName);\n\t\t\tif (oResult.sProperty) {\n\t\t\t\toOperationAvailableMap = this._addToMap(\n\t\t\t\t\tsActionName,\n\t\t\t\t\toResult.sProperty.substr(oResult.sBindingParameter.length + 1),\n\t\t\t\t\toOperationAvailableMap\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn oOperationAvailableMap;\n\t},\n\n\t/**\n\t * Return Map.\n\t *\n\t * @function\n\t * @name _addToMap\n\t * @private\n\t * @param sKey Key\n\t * @param oValue Value\n\t * @param oMap Map object\n\t * @returns Map object\n\t */\n\t_addToMap(sKey: string, oValue: any, oMap: Record<string, any>) {\n\t\tif (sKey && oMap) {\n\t\t\toMap[sKey] = oValue;\n\t\t}\n\t\treturn oMap;\n\t}\n};\n\nexport default ActionHelper;\n"],"mappings":"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"}},{"offset":{"line":18912,"column":0},"map":{"version":3,"names":["sap","ui","define","BindingHelper","BindingToolkit","TypeGuards","CommonHelper","isPathAnnotationExpression","isPathInModelExpression","getExpressionFromAnnotation","bindingContextPathVisitor","ActionHelper","getMultiSelectDisabledActions","collections","multiSelectDisabledActions","actions","filter","collection","$Type","action","actionTarget","ActionTarget","isBound","parameter","parameters","_parameter$annotation","_parameter$annotation2","annotations","UI","Hidden","Common","FieldControl","push","name","getPressEventDataFieldForActionButton","sId","oAction","oParams","sOperationAvailableMap","sInvocationGrouping","InvocationGrouping","$EnumMember","addSingleQuotes","Label","generateFunction","Action","objectToString","getNumberOfContextsExpression","vActionEnabled","sNumberOfSelectedContexts","getOperationAvailableMap","aCollection","sControl","oContext","oOperationAvailableMap","forEach","oRecord","actionName","indexOf","Determining","this","_getOperationAvailableMapOfTable","_getOperationAvailableMapOfChart","oDataFieldForAction","sActionName","oConverterContext","_actionTarget$annotat","_actionTarget$annotat2","_actionTarget$paramet","Core","OperationAvailable","length","_actionTarget$annotat3","_actionTarget$annotat4","_actionTarget$annotat5","_actionTarget$annotat6","bindingParameterFullName","fullyQualifiedName","targetExpression","undefined","path","_addToMap","oResult","getActionPath","context","sProperty","substr","sBindingParameter","sKey","oValue","oMap"],"sources":["ActionHelper-dbg.js"],"mappings":"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","sourceRoot":"internal/helpers"}},{"offset":{"line":18917,"column":0},"map":{"version":3,"names":["getDataPointTargetExpression","oDataModelPath","TargetValue","getExpressionFromAnnotation","unresolvableExpression","oResourceModel","sap","ui","getCore","getLibraryResourceBundle","buildExpressionForProgressIndicatorDisplayValue","oPropertyDataModelObjectPath","fieldValue","targetObject","Value","relativeLocation","getRelativePaths","fieldValueExpression","TargetExpression","isProperty","$target","unit","annotations","Measures","Unit","ISOCurrency","getText","compileExpression","hasStaticPercentUnit","formatWithTypeInformation","unitBindingExpression","formatResult","valueFormatters","formatProgressIndicatorText","undefined","buildUnitBindingExpression","dataPoint","buildRatingIndicatorSubtitleExpression","oContext","mSampleSize","formatRatingIndicatorSubTitle","AnnotationHelper","value","context","iSampleSizeValue","sSubTitleLabel","String","getHeaderRatingIndicatorText","oDataPoint","result","SampleSize","Description","sModelValue","requiresIContext","buildExpressionForDescription","Common","Text","oTextExpression","isPathInModelExpression","parameters","$$noPatch","getDecimalFormat","outExpression","sNumberOfFractionalDigits","constraints","Object","assign","precision","scale","formatOptions","preserveDecimals","getValueFormatted","oPropertyDataModelPath","sPropertyType","path","indexOf","oPropertyDefinition","type","EDM_TYPE_MAPPING","buildFieldBindingExpression","dataPointFormatOptions","bHideMeasure","oDataPointValue","ValueFormat","NumberOfFractionalDigits","enhanceDataModelPath","oDescription","oFormattedValue","sDisplayMode","displayMode","getDisplayMode","oBindingExpression","formatWithBrackets","Timezone","getBindingWithTimezone","_computeBindingWithUnitOrCurrency","measureDisplayMode","propertyDataModelObjectPath","formattedValue","hideMeasure","getBindingWithUnitOrCurrency","showMeasure","buildExpressionForProgressIndicatorPercentValue","computePercentage"],"sourceRoot":"internal/helpers","sources":["DataPointTemplating.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport valueFormatters from \"sap/fe/core/formatters/ValueFormatter\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression, PathInModelExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport {\n\tcompileExpression,\n\tEDM_TYPE_MAPPING,\n\tformatResult,\n\tformatWithTypeInformation,\n\tgetExpressionFromAnnotation,\n\tisPathInModelExpression,\n\tunresolvableExpression\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport { isProperty } from \"sap/fe/core/helpers/TypeGuards\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { enhanceDataModelPath, getRelativePaths } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { hasStaticPercentUnit } from \"sap/fe/core/templating/PropertyHelper\";\nimport { getBindingWithTimezone, getBindingWithUnitOrCurrency, getDisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\n\nexport type DataPointFormatOptions = Partial<{\n\tmeasureDisplayMode: string;\n\tdisplayMode: string;\n}>;\n\nconst getDataPointTargetExpression = (oDataModelPath: any): BindingToolkitExpression<string> => {\n\treturn oDataModelPath?.TargetValue ? getExpressionFromAnnotation(oDataModelPath.TargetValue) : unresolvableExpression;\n};\n\nconst oResourceModel = sap.ui.getCore().getLibraryResourceBundle(\"sap.fe.macros\");\n\nexport const buildExpressionForProgressIndicatorDisplayValue = (\n\toPropertyDataModelObjectPath: DataModelObjectPath\n): CompiledBindingToolkitExpression => {\n\tconst fieldValue = oPropertyDataModelObjectPath?.targetObject?.Value || \"\";\n\tconst relativeLocation = getRelativePaths(oPropertyDataModelObjectPath);\n\tlet fieldValueExpression = getExpressionFromAnnotation(fieldValue, relativeLocation) as any;\n\tconst TargetExpression = getDataPointTargetExpression(oPropertyDataModelObjectPath.targetObject) as any;\n\n\tif (fieldValueExpression && TargetExpression) {\n\t\tlet targetObject = oPropertyDataModelObjectPath.targetObject.Value;\n\t\tif (!isProperty(targetObject)) {\n\t\t\ttargetObject = oPropertyDataModelObjectPath.targetObject.Value.$target;\n\t\t}\n\t\tconst unit = targetObject.annotations?.Measures?.Unit || targetObject.annotations?.Measures?.ISOCurrency;\n\n\t\tif (!unit) {\n\t\t\treturn oResourceModel.getText(\"T_COMMON_PROGRESS_INDICATOR_DISPLAY_VALUE_NO_UOM\", [\n\t\t\t\tcompileExpression(fieldValueExpression) as string,\n\t\t\t\tcompileExpression(TargetExpression) as string\n\t\t\t]);\n\t\t}\n\t\t// If the unit isn't a path, we check for a % sign as it is a special case.\n\t\tif (hasStaticPercentUnit(fieldValue?.$target)) {\n\t\t\treturn `${compileExpression(fieldValueExpression) as string} %`;\n\t\t}\n\n\t\tfieldValueExpression = formatWithTypeInformation(targetObject, fieldValueExpression);\n\t\tconst unitBindingExpression = unit.$target\n\t\t\t? formatWithTypeInformation(unit.$target, getExpressionFromAnnotation(unit, relativeLocation))\n\t\t\t: getExpressionFromAnnotation(unit, relativeLocation);\n\n\t\treturn compileExpression(\n\t\t\tformatResult([fieldValueExpression, TargetExpression, unitBindingExpression], valueFormatters.formatProgressIndicatorText)\n\t\t);\n\t}\n\treturn undefined;\n};\n\nexport const buildUnitBindingExpression = (dataPoint: DataModelObjectPath): CompiledBindingToolkitExpression => {\n\tconst relativeLocation = getRelativePaths(dataPoint);\n\n\tconst targetObject = dataPoint?.targetObject?.Value?.$target;\n\tif (!isProperty(targetObject)) {\n\t\treturn \"\";\n\t}\n\tconst unit = targetObject.annotations?.Measures?.Unit || targetObject.annotations?.Measures?.ISOCurrency;\n\treturn unit ? compileExpression(getExpressionFromAnnotation(unit, relativeLocation)) : \"\";\n};\n\nconst buildRatingIndicatorSubtitleExpression = (oContext: any, mSampleSize: any): string | undefined => {\n\tif (mSampleSize) {\n\t\treturn formatRatingIndicatorSubTitle(AnnotationHelper.value(mSampleSize, { context: oContext }) as any);\n\t}\n};\n// returns the text for the Rating Indicator Subtitle (e.g. '7 reviews')\nconst formatRatingIndicatorSubTitle = (iSampleSizeValue: number): string | undefined => {\n\tif (iSampleSizeValue) {\n\t\tconst sSubTitleLabel =\n\t\t\tiSampleSizeValue > 1\n\t\t\t\t? oResourceModel.getText(\"T_ANNOTATION_HELPER_RATING_INDICATOR_SUBTITLE_LABEL_PLURAL\")\n\t\t\t\t: oResourceModel.getText(\"T_ANNOTATION_HELPER_RATING_INDICATOR_SUBTITLE_LABEL\");\n\t\treturn oResourceModel.getText(\"T_ANNOTATION_HELPER_RATING_INDICATOR_SUBTITLE\", [String(iSampleSizeValue), sSubTitleLabel]);\n\t}\n};\n\n/**\n * This function is used to get the header text of rating indicator.\n *\n * @param oContext Context of interface\n * @param oDataPoint Data point object\n * @returns {string | undefined} Expression binding for rating indicator text\n */\nexport const getHeaderRatingIndicatorText = (oContext: any, oDataPoint: any): string | undefined => {\n\tlet result: string | undefined;\n\tif (oDataPoint && oDataPoint.SampleSize) {\n\t\tresult = buildRatingIndicatorSubtitleExpression(oContext, oDataPoint.SampleSize);\n\t} else if (oDataPoint && oDataPoint.Description) {\n\t\tconst sModelValue = AnnotationHelper.value(oDataPoint.Description, { context: oContext });\n\t\tresult = \"${path:\" + sModelValue + \"}\";\n\t}\n\treturn result;\n};\ngetHeaderRatingIndicatorText.requiresIContext = true;\n\nconst buildExpressionForDescription = (fieldValue: DataModelObjectPath): BindingToolkitExpression<any> | undefined => {\n\tconst relativeLocation = getRelativePaths(fieldValue);\n\tif (fieldValue?.targetObject?.annotations?.Common?.Text) {\n\t\tconst oTextExpression = getExpressionFromAnnotation(fieldValue?.targetObject.annotations?.Common?.Text, relativeLocation);\n\t\tif (isPathInModelExpression(oTextExpression)) {\n\t\t\toTextExpression.parameters = { $$noPatch: true };\n\t\t}\n\t\treturn oTextExpression;\n\t}\n\treturn undefined;\n};\n\nconst getDecimalFormat = (\n\toutExpression: PathInModelExpression<any>,\n\tfieldValue: any,\n\tsNumberOfFractionalDigits: string\n): BindingToolkitExpression<any> => {\n\tif (!outExpression.constraints) {\n\t\toutExpression.constraints = {};\n\t}\n\toutExpression.constraints = Object.assign(outExpression.constraints, {\n\t\tprecision: fieldValue.$target.precision,\n\t\tscale: sNumberOfFractionalDigits ? sNumberOfFractionalDigits : fieldValue.$target.scale\n\t});\n\t// sNumberOfFractionalDigits is only defined in getValueFormatted when NumberOfFractionalDigits is defined.\n\t// In that case, we need to instance the preserveDecimals parameter because of a change MDC side\n\tif (sNumberOfFractionalDigits) {\n\t\tif (!outExpression.formatOptions) {\n\t\t\toutExpression.formatOptions = {};\n\t\t}\n\t\toutExpression.formatOptions = Object.assign(outExpression.formatOptions, {\n\t\t\tpreserveDecimals: false\n\t\t});\n\t}\n\treturn outExpression;\n};\n\nexport const getValueFormatted = (\n\toPropertyDataModelPath: DataModelObjectPath,\n\tfieldValue: any,\n\tsPropertyType: string,\n\tsNumberOfFractionalDigits: string\n): BindingToolkitExpression<string> => {\n\tlet outExpression: BindingToolkitExpression<any>;\n\tconst relativeLocation = fieldValue?.path?.indexOf(\"/\") === -1 ? getRelativePaths(oPropertyDataModelPath) : [];\n\toutExpression = getExpressionFromAnnotation(fieldValue, relativeLocation);\n\tconst oPropertyDefinition = oPropertyDataModelPath.targetObject as Property;\n\tif (sPropertyType && isPathInModelExpression(outExpression)) {\n\t\tformatWithTypeInformation(oPropertyDefinition, outExpression);\n\t\toutExpression.type = EDM_TYPE_MAPPING[sPropertyType]?.type;\n\t\tswitch (sPropertyType) {\n\t\t\tcase \"Edm.Decimal\":\n\t\t\t\t// for the listReport, the decimal fields are formatted by returning a string\n\t\t\t\t// for the facets of the OP, the decimal fields are formatted by returning a promise, so we manage all the cases\n\t\t\t\toutExpression = getDecimalFormat(outExpression, fieldValue, sNumberOfFractionalDigits);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t}\n\n\treturn outExpression;\n};\n\nexport const buildFieldBindingExpression = (\n\toDataModelPath: DataModelObjectPath,\n\tdataPointFormatOptions: DataPointFormatOptions,\n\tbHideMeasure: boolean\n): CompiledBindingToolkitExpression => {\n\tconst oDataPoint = oDataModelPath.targetObject;\n\tconst oDataPointValue = oDataPoint?.Value || \"\";\n\tconst sPropertyType = oDataPointValue?.$target?.type;\n\tlet sNumberOfFractionalDigits;\n\n\tif (sPropertyType === \"Edm.Decimal\" && oDataPoint.ValueFormat) {\n\t\tif (oDataPoint.ValueFormat.NumberOfFractionalDigits) {\n\t\t\tsNumberOfFractionalDigits = oDataPoint.ValueFormat.NumberOfFractionalDigits;\n\t\t}\n\t}\n\tconst oPropertyDataModelObjectPath = enhanceDataModelPath(oDataModelPath, oDataPointValue.path);\n\tconst oDescription = oPropertyDataModelObjectPath ? buildExpressionForDescription(oPropertyDataModelObjectPath) : undefined;\n\tconst oFormattedValue = getValueFormatted(oPropertyDataModelObjectPath, oDataPointValue, sPropertyType, sNumberOfFractionalDigits);\n\tconst sDisplayMode = oDescription ? dataPointFormatOptions.displayMode || getDisplayMode(oPropertyDataModelObjectPath) : \"Value\";\n\tlet oBindingExpression: any;\n\tswitch (sDisplayMode) {\n\t\tcase \"Description\":\n\t\t\toBindingExpression = oDescription;\n\t\t\tbreak;\n\t\tcase \"ValueDescription\":\n\t\t\toBindingExpression = formatResult([oFormattedValue, oDescription], valueFormatters.formatWithBrackets);\n\t\t\tbreak;\n\t\tcase \"DescriptionValue\":\n\t\t\toBindingExpression = formatResult([oDescription, oFormattedValue], valueFormatters.formatWithBrackets);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (oPropertyDataModelObjectPath.targetObject?.annotations?.Common?.Timezone) {\n\t\t\t\toBindingExpression = getBindingWithTimezone(oPropertyDataModelObjectPath, oFormattedValue);\n\t\t\t} else {\n\t\t\t\toBindingExpression = _computeBindingWithUnitOrCurrency(\n\t\t\t\t\toPropertyDataModelObjectPath,\n\t\t\t\t\toFormattedValue,\n\t\t\t\t\tbHideMeasure || dataPointFormatOptions?.measureDisplayMode === \"Hidden\"\n\t\t\t\t);\n\t\t\t}\n\t}\n\treturn compileExpression(oBindingExpression);\n};\n\nexport const _computeBindingWithUnitOrCurrency = (\n\tpropertyDataModelObjectPath: DataModelObjectPath,\n\tformattedValue: BindingToolkitExpression<string>,\n\thideMeasure: boolean\n): BindingToolkitExpression<string> => {\n\tif (\n\t\tpropertyDataModelObjectPath.targetObject?.annotations?.Measures?.Unit ||\n\t\tpropertyDataModelObjectPath.targetObject?.annotations?.Measures?.ISOCurrency\n\t) {\n\t\tif (hideMeasure && hasStaticPercentUnit(propertyDataModelObjectPath.targetObject)) {\n\t\t\treturn formattedValue;\n\t\t}\n\t\treturn getBindingWithUnitOrCurrency(\n\t\t\tpropertyDataModelObjectPath,\n\t\t\tformattedValue,\n\t\t\tundefined,\n\t\t\thideMeasure ? { showMeasure: false } : undefined\n\t\t);\n\t}\n\treturn formattedValue;\n};\n\n/**\n * Method to calculate the percentage value of Progress Indicator. Basic formula is Value/Target * 100.\n *\n * @param oPropertyDataModelObjectPath\n * @returns The expression binding used to calculate the percentage value, which is shown in the progress indicator based on the formula given above.\n */\nexport const buildExpressionForProgressIndicatorPercentValue = (oPropertyDataModelObjectPath: DataModelObjectPath): string | undefined => {\n\tconst fieldValue = oPropertyDataModelObjectPath?.targetObject?.Value || \"\";\n\tconst relativeLocation = getRelativePaths(oPropertyDataModelObjectPath);\n\tconst fieldValueExpression = getExpressionFromAnnotation(fieldValue, relativeLocation);\n\tconst TargetExpression = getDataPointTargetExpression(oPropertyDataModelObjectPath.targetObject);\n\n\tconst oPropertyDefinition = fieldValue.$target as Property;\n\tconst unit = oPropertyDefinition.annotations?.Measures?.Unit || oPropertyDefinition.annotations?.Measures?.ISOCurrency;\n\tif (unit) {\n\t\tconst unitBindingExpression = (unit as any).$target\n\t\t\t? formatWithTypeInformation(\n\t\t\t\t\t(unit as any).$target,\n\t\t\t\t\tgetExpressionFromAnnotation(unit, relativeLocation) as BindingToolkitExpression<string>\n\t\t\t  )\n\t\t\t: (getExpressionFromAnnotation(unit, relativeLocation) as BindingToolkitExpression<string>);\n\n\t\treturn compileExpression(\n\t\t\tformatResult([fieldValueExpression, TargetExpression, unitBindingExpression], valueFormatters.computePercentage)\n\t\t);\n\t}\n\n\treturn compileExpression(formatResult([fieldValueExpression, TargetExpression, \"\"], valueFormatters.computePercentage));\n};\n"],"mappings":"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"}},{"offset":{"line":19147,"column":0},"map":{"version":3,"names":["sap","ui","define","valueFormatters","BindingToolkit","TypeGuards","DataModelPathHelper","PropertyHelper","UIFormatters","AnnotationHelper","_exports","getDisplayMode","getBindingWithUnitOrCurrency","getBindingWithTimezone","hasStaticPercentUnit","getRelativePaths","enhanceDataModelPath","isProperty","unresolvableExpression","isPathInModelExpression","getExpressionFromAnnotation","formatWithTypeInformation","formatResult","EDM_TYPE_MAPPING","compileExpression","getDataPointTargetExpression","oDataModelPath","TargetValue","oResourceModel","getCore","getLibraryResourceBundle","buildExpressionForProgressIndicatorDisplayValue","oPropertyDataModelObjectPath","_oPropertyDataModelOb","fieldValue","targetObject","Value","relativeLocation","fieldValueExpression","TargetExpression","_targetObject$annotat","_targetObject$annotat2","_targetObject$annotat3","_targetObject$annotat4","$target","unit","annotations","Measures","Unit","ISOCurrency","getText","unitBindingExpression","formatProgressIndicatorText","undefined","buildUnitBindingExpression","dataPoint","_dataPoint$targetObje","_dataPoint$targetObje2","_targetObject$annotat5","_targetObject$annotat6","_targetObject$annotat7","_targetObject$annotat8","buildRatingIndicatorSubtitleExpression","oContext","mSampleSize","formatRatingIndicatorSubTitle","value","context","iSampleSizeValue","sSubTitleLabel","String","getHeaderRatingIndicatorText","oDataPoint","result","SampleSize","Description","sModelValue","requiresIContext","buildExpressionForDescription","_fieldValue$targetObj","_fieldValue$targetObj2","_fieldValue$targetObj3","Common","Text","_fieldValue$targetObj4","_fieldValue$targetObj5","oTextExpression","parameters","$$noPatch","getDecimalFormat","outExpression","sNumberOfFractionalDigits","constraints","Object","assign","precision","scale","formatOptions","preserveDecimals","getValueFormatted","oPropertyDataModelPath","sPropertyType","_fieldValue$path","path","indexOf","oPropertyDefinition","_EDM_TYPE_MAPPING$sPr","type","buildFieldBindingExpression","dataPointFormatOptions","bHideMeasure","_oDataPointValue$$tar","_oPropertyDataModelOb2","_oPropertyDataModelOb3","_oPropertyDataModelOb4","oDataPointValue","ValueFormat","NumberOfFractionalDigits","oDescription","oFormattedValue","sDisplayMode","displayMode","oBindingExpression","formatWithBrackets","Timezone","_computeBindingWithUnitOrCurrency","measureDisplayMode","propertyDataModelObjectPath","formattedValue","hideMeasure","_propertyDataModelObj","_propertyDataModelObj2","_propertyDataModelObj3","_propertyDataModelObj4","_propertyDataModelObj5","_propertyDataModelObj6","showMeasure","buildExpressionForProgressIndicatorPercentValue","_oPropertyDataModelOb5","_oPropertyDefinition$","_oPropertyDefinition$2","_oPropertyDefinition$3","_oPropertyDefinition$4","computePercentage"],"sources":["DataPointTemplating-dbg.js"],"mappings":"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","sourceRoot":"internal/helpers"}},{"offset":{"line":19152,"column":0},"map":{"version":3,"names":["DefaultActionHandler","getDefaultActionHandler","oCtx","oAction","oDataFieldForDefaultAction","defaultActionContextOrEntitySet","mode","defaultAction","type","Table","pressEventDataFieldForActionButton","collection","getObject","tableDefinition","operationAvailableMap","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","undefined","CommonHelper","getPressHandlerForDataFieldForIBN","enableAnalytics","command","noWrap","press","buildActionWrapper","id","ioEx","getUseDefaultActionOnly","getButtonMode","MenuButtonMode","Split","Regular"],"sourceRoot":"internal/helpers","sources":["DefaultActionHandler.ts"],"sourcesContent":["import CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport Table from \"sap/fe/macros/table/TableHelper\";\nimport { MenuButtonMode } from \"sap/m/library\";\n\nconst DefaultActionHandler = {\n\t/**\n\t * The default action group handler that is invoked when adding the menu button handling appropriately.\n\t *\n\t * @param oCtx The current context in which the handler is called\n\t * @param oAction The current action context\n\t * @param oDataFieldForDefaultAction The current dataField for the default action\n\t * @param defaultActionContextOrEntitySet The current context for the default action\n\t * @param mode The optional parameter for the handler mode; default setting is Table\n\t * @returns The appropriate expression string\n\t */\n\tgetDefaultActionHandler: function (\n\t\toCtx: any,\n\t\toAction: any,\n\t\toDataFieldForDefaultAction: any,\n\t\tdefaultActionContextOrEntitySet: any,\n\t\tmode = \"Table\"\n\t) {\n\t\tif (oAction.defaultAction) {\n\t\t\ttry {\n\t\t\t\tswitch (oAction.defaultAction.type) {\n\t\t\t\t\tcase \"ForAction\": {\n\t\t\t\t\t\tif (mode === \"Table\") {\n\t\t\t\t\t\t\treturn Table.pressEventDataFieldForActionButton(\n\t\t\t\t\t\t\t\toCtx,\n\t\t\t\t\t\t\t\toDataFieldForDefaultAction,\n\t\t\t\t\t\t\t\toCtx.collection.getObject(\"@sapui.name\"),\n\t\t\t\t\t\t\t\toCtx.tableDefinition.operationAvailableMap,\n\t\t\t\t\t\t\t\tdefaultActionContextOrEntitySet,\n\t\t\t\t\t\t\t\toAction.isNavigable,\n\t\t\t\t\t\t\t\toAction.enableAutoScroll,\n\t\t\t\t\t\t\t\toAction.defaultValuesExtensionFunction\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"ForNavigation\": {\n\t\t\t\t\t\tif (mode === \"Table\") {\n\t\t\t\t\t\t\treturn CommonHelper.getPressHandlerForDataFieldForIBN(\n\t\t\t\t\t\t\t\toDataFieldForDefaultAction,\n\t\t\t\t\t\t\t\t\"${internal>selectedContexts}\",\n\t\t\t\t\t\t\t\t!oCtx.tableDefinition.enableAnalytics\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tif (oAction.defaultAction.command) {\n\t\t\t\t\t\t\treturn \"cmd:\" + oAction.defaultAction.command;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (oAction.defaultAction.noWrap) {\n\t\t\t\t\t\t\treturn oAction.defaultAction.press;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tswitch (mode) {\n\t\t\t\t\t\t\t\tcase \"Table\": {\n\t\t\t\t\t\t\t\t\treturn CommonHelper.buildActionWrapper(oAction.defaultAction, oCtx);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase \"Form\": {\n\t\t\t\t\t\t\t\t\treturn CommonHelper.buildActionWrapper(oAction.defaultAction, { id: \"forTheForm\" });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (ioEx) {\n\t\t\t\treturn \"binding for the default action is not working as expected\";\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * The function determines during templating whether to use the defaultActionOnly\n\t * setting for the sap.m.MenuButton control in case a defaultAction is provided.\n\t *\n\t * @param oAction The current action context\n\t * @returns A Boolean value\n\t */\n\tgetUseDefaultActionOnly: function (oAction: any) {\n\t\tif (oAction.defaultAction) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\t/**\n\t * The function determines during templating whether to use the 'Split'\n\t * or 'Regular' MenuButtonMode for the sap.m.MenuButton control\n\t * in case a defaultAction is available.\n\t *\n\t * @param oAction The current action context\n\t * @returns The MenuButtonMode\n\t */\n\tgetButtonMode: function (oAction: any) {\n\t\tif (oAction.defaultAction) {\n\t\t\treturn MenuButtonMode.Split;\n\t\t} else {\n\t\t\treturn MenuButtonMode.Regular;\n\t\t}\n\t}\n};\n\nexport default DefaultActionHandler;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EAIA,MAAMA,oBAAoB,GAAG;IAC5B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCC,uBAAuB,EAAE,UACxBC,IAAS,EACTC,OAAY,EACZC,0BAA+B,EAC/BC,+BAAoC,EAEnC;MAAA,IADDC,IAAI,uEAAG,OAAO;MAEd,IAAIH,OAAO,CAACI,aAAa,EAAE;QAC1B,IAAI;UACH,QAAQJ,OAAO,CAACI,aAAa,CAACC,IAAI;YACjC,KAAK,WAAW;cAAE;gBACjB,IAAIF,IAAI,KAAK,OAAO,EAAE;kBACrB,OAAOG,KAAK,CAACC,kCAAkC,CAC9CR,IAAI,EACJE,0BAA0B,EAC1BF,IAAI,CAACS,UAAU,CAACC,SAAS,CAAC,aAAa,CAAC,EACxCV,IAAI,CAACW,eAAe,CAACC,qBAAqB,EAC1CT,+BAA+B,EAC/BF,OAAO,CAACY,WAAW,EACnBZ,OAAO,CAACa,gBAAgB,EACxBb,OAAO,CAACc,8BAA8B,CACtC;gBACF;gBACA,OAAOC,SAAS;cACjB;YACA,KAAK,eAAe;cAAE;gBACrB,IAAIZ,IAAI,KAAK,OAAO,EAAE;kBACrB,OAAOa,YAAY,CAACC,iCAAiC,CACpDhB,0BAA0B,EAC1B,8BAA8B,EAC9B,CAACF,IAAI,CAACW,eAAe,CAACQ,eAAe,CACrC;gBACF;gBACA,OAAOH,SAAS;cACjB;YACA;cAAS;gBACR,IAAIf,OAAO,CAACI,aAAa,CAACe,OAAO,EAAE;kBAClC,OAAO,MAAM,GAAGnB,OAAO,CAACI,aAAa,CAACe,OAAO;gBAC9C;gBACA,IAAInB,OAAO,CAACI,aAAa,CAACgB,MAAM,EAAE;kBACjC,OAAOpB,OAAO,CAACI,aAAa,CAACiB,KAAK;gBACnC,CAAC,MAAM;kBACN,QAAQlB,IAAI;oBACX,KAAK,OAAO;sBAAE;wBACb,OAAOa,YAAY,CAACM,kBAAkB,CAACtB,OAAO,CAACI,aAAa,EAAEL,IAAI,CAAC;sBACpE;oBACA,KAAK,MAAM;sBAAE;wBACZ,OAAOiB,YAAY,CAACM,kBAAkB,CAACtB,OAAO,CAACI,aAAa,EAAE;0BAAEmB,EAAE,EAAE;wBAAa,CAAC,CAAC;sBACpF;kBAAC;gBAEH;cACD;UAAC;QAEH,CAAC,CAAC,OAAOC,IAAI,EAAE;UACd,OAAO,2DAA2D;QACnE;MACD;MACA,OAAOT,SAAS;IACjB,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;IACCU,uBAAuB,EAAE,UAAUzB,OAAY,EAAE;MAChD,IAAIA,OAAO,CAACI,aAAa,EAAE;QAC1B,OAAO,IAAI;MACZ,CAAC,MAAM;QACN,OAAO,KAAK;MACb;IACD,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACCsB,aAAa,EAAE,UAAU1B,OAAY,EAAE;MACtC,IAAIA,OAAO,CAACI,aAAa,EAAE;QAC1B,OAAOuB,cAAc,CAACC,KAAK;MAC5B,CAAC,MAAM;QACN,OAAOD,cAAc,CAACE,OAAO;MAC9B;IACD;EACD,CAAC;EAAC,OAEahC,oBAAoB;AAAA"}},{"offset":{"line":19251,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonHelper","Table","library","MenuButtonMode","DefaultActionHandler","getDefaultActionHandler","oCtx","oAction","oDataFieldForDefaultAction","defaultActionContextOrEntitySet","mode","arguments","length","undefined","defaultAction","type","pressEventDataFieldForActionButton","collection","getObject","tableDefinition","operationAvailableMap","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","getPressHandlerForDataFieldForIBN","enableAnalytics","command","noWrap","press","buildActionWrapper","id","ioEx","getUseDefaultActionOnly","getButtonMode","Split","Regular"],"sources":["DefaultActionHandler-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,iEAAO,CAAC,6BAA8B,kCAAmC,iBAAkB,SAAUC,EAAcC,EAAOC,GAC/H,aAEA,IAAIC,EAAiBD,EAAQC,eAC7B,MAAMC,EAAuB,CAW3BC,wBAAyB,SAAUC,EAAMC,EAASC,EAA4BC,GAC5E,IAAIC,EAAOC,UAAUC,OAAS,GAAKD,UAAU,KAAOE,UAAYF,UAAU,GAAK,QAC/E,GAAIJ,EAAQO,cAAe,CACzB,IACE,OAAQP,EAAQO,cAAcC,MAC5B,IAAK,YACH,CACE,GAAIL,IAAS,QAAS,CACpB,OAAOT,EAAMe,mCAAmCV,EAAME,EAA4BF,EAAKW,WAAWC,UAAU,eAAgBZ,EAAKa,gBAAgBC,sBAAuBX,EAAiCF,EAAQc,YAAad,EAAQe,iBAAkBf,EAAQgB,+BAClQ,CACA,OAAOV,SACT,CACF,IAAK,gBACH,CACE,GAAIH,IAAS,QAAS,CACpB,OAAOV,EAAawB,kCAAkChB,EAA4B,gCAAiCF,EAAKa,gBAAgBM,gBAC1I,CACA,OAAOZ,SACT,CACF,QACE,CACE,GAAIN,EAAQO,cAAcY,QAAS,CACjC,MAAO,OAASnB,EAAQO,cAAcY,OACxC,CACA,GAAInB,EAAQO,cAAca,OAAQ,CAChC,OAAOpB,EAAQO,cAAcc,KAC/B,KAAO,CACL,OAAQlB,GACN,IAAK,QACH,CACE,OAAOV,EAAa6B,mBAAmBtB,EAAQO,cAAeR,EAChE,CACF,IAAK,OACH,CACE,OAAON,EAAa6B,mBAAmBtB,EAAQO,cAAe,CAC5DgB,GAAI,cAER,EAEN,CACF,EAEN,CAAE,MAAOC,GACP,MAAO,2DACT,CACF,CACA,OAAOlB,SACT,EAQAmB,wBAAyB,SAAUzB,GACjC,GAAIA,EAAQO,cAAe,CACzB,OAAO,IACT,KAAO,CACL,OAAO,KACT,CACF,EASAmB,cAAe,SAAU1B,GACvB,GAAIA,EAAQO,cAAe,CACzB,OAAOX,EAAe+B,KACxB,KAAO,CACL,OAAO/B,EAAegC,OACxB,CACF,GAEF,OAAO/B,CACT,EAAG","sourceRoot":"internal/helpers"}},{"offset":{"line":19256,"column":0},"map":{"version":3,"names":["buildExpressionForHeaderVisible","oProps","headerBindingExpression","resolveBindingString","header","tabTileBindingExpression","tabTitle","headerVisibleBindingExpression","constant","headerVisible","compileExpression","and","not","equal"],"sourceRoot":"internal/helpers","sources":["TableTemplating.ts"],"sourcesContent":["import type { CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { and, compileExpression, constant, equal, not, resolveBindingString } from \"sap/fe/core/helpers/BindingToolkit\";\n\n/**\n * Method to compute the headerVisible property.\n *\n * @param oProps Object containing the table properties\n * @returns Expression binding for headerVisible\n */\nexport const buildExpressionForHeaderVisible = (oProps: any): CompiledBindingToolkitExpression => {\n\tconst headerBindingExpression = resolveBindingString(oProps?.header);\n\tconst tabTileBindingExpression = resolveBindingString(oProps?.tabTitle);\n\tconst headerVisibleBindingExpression = constant(oProps.headerVisible);\n\treturn compileExpression(and(headerVisibleBindingExpression, not(equal(headerBindingExpression, tabTileBindingExpression))));\n};\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;EAGA;AACA;AACA;AACA;AACA;AACA;EACO,MAAMA,+BAA+B,GAAIC,MAAW,IAAuC;IACjG,MAAMC,uBAAuB,GAAGC,oBAAoB,CAACF,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEG,MAAM,CAAC;IACpE,MAAMC,wBAAwB,GAAGF,oBAAoB,CAACF,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEK,QAAQ,CAAC;IACvE,MAAMC,8BAA8B,GAAGC,QAAQ,CAACP,MAAM,CAACQ,aAAa,CAAC;IACrE,OAAOC,iBAAiB,CAACC,GAAG,CAACJ,8BAA8B,EAAEK,GAAG,CAACC,KAAK,CAACX,uBAAuB,EAAEG,wBAAwB,CAAC,CAAC,CAAC,CAAC;EAC7H,CAAC;EAAC;EAAA;AAAA"}},{"offset":{"line":19285,"column":0},"map":{"version":3,"names":["sap","ui","define","BindingToolkit","_exports","resolveBindingString","not","equal","constant","compileExpression","and","buildExpressionForHeaderVisible","oProps","headerBindingExpression","header","tabTileBindingExpression","tabTitle","headerVisibleBindingExpression","headerVisible"],"sources":["TableTemplating-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,4DAAO,CAAC,sCAAuC,SAAUC,GAC9D,aAEA,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAuBF,EAAeE,qBAC1C,IAAIC,EAAMH,EAAeG,IACzB,IAAIC,EAAQJ,EAAeI,MAC3B,IAAIC,EAAWL,EAAeK,SAC9B,IAAIC,EAAoBN,EAAeM,kBACvC,IAAIC,EAAMP,EAAeO,IAOzB,MAAMC,EAAkCC,IACtC,MAAMC,EAA0BR,EAAqBO,IAAW,MAAQA,SAAgB,OAAS,EAAIA,EAAOE,QAC5G,MAAMC,EAA2BV,EAAqBO,IAAW,MAAQA,SAAgB,OAAS,EAAIA,EAAOI,UAC7G,MAAMC,EAAiCT,EAASI,EAAOM,eACvD,OAAOT,EAAkBC,EAAIO,EAAgCX,EAAIC,EAAMM,EAAyBE,KAA4B,EAE9HX,EAASO,gCAAkCA,EAC3C,OAAOP,CACT,EAAG","sourceRoot":"internal/helpers"}},{"offset":{"line":19290,"column":0},"map":{"version":3,"names":["getGrowing","recommendationData","propertyPath","values","additionalValueHelper","getRelevantRecommendations","getBindingContext","length","__functionName","formatValueState","all_recommendations","currentPageContext","sourcepath","fieldContainerType","valueStateTypeData","ValueState","None","getValue","getValueState","data","bindingContext","Information","setValueStateText","additionalValueFormatter","sName","hasOwnProperty","oArgs","apply"],"sourceRoot":"internal/valuehelp","sources":["AdditionalValueFormatter.ts"],"sourcesContent":["import { InCompletenessInfoType } from \"sap/fe/core/helpers/RecommendationHelper\";\nimport { additionalValueHelper } from \"sap/fe/macros/internal/valuehelp/AdditionalValueHelper\";\nimport { ValueState } from \"sap/ui/core/library\";\nimport type Field from \"sap/ui/mdc/Field\";\nimport type MTable from \"sap/ui/mdc/valuehelp/content/MTable\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Growing formatter used for growing and growingThreshold.\n *\n * @param this Valuehelp Table\n * @param recommendationData Data fetched from recommendation model\n * @param propertyPath Property Path of the Field\n * @returns Boolean value for growing and growingThreshold properties\n */\nfunction getGrowing(this: MTable, recommendationData: InCompletenessInfoType | undefined, propertyPath: string) {\n\tconst values =\n\t\tadditionalValueHelper.getRelevantRecommendations(recommendationData || {}, this.getBindingContext() as Context, propertyPath) || [];\n\tif (values.length > 0) {\n\t\t//if there are relevant recommendations then return true\n\t\treturn true;\n\t}\n\treturn false;\n}\ngetGrowing.__functionName = \"sap.fe.macros.internal.valuehelp.AdditionalValueFormatter#getGrowing\";\n\nfunction formatValueState(\n\tthis: Field,\n\tall_recommendations: InCompletenessInfoType,\n\tcurrentPageContext: Context,\n\tsourcepath?: string,\n\tfieldContainerType?: string\n) {\n\tlet valueStateTypeData = ValueState.None;\n\tif (!this.getValue()) {\n\t\t// only if the existing state is none, we will override state based on recommendations data, else we keep it as is\n\n\t\tif (this.getValueState() == \"None\" || (this.data(\"hasRecommendations\") && this.getValueState() == \"Information\")) {\n\t\t\t// currentPageContext - refers to binding context of view, so this may not be correct data for table, in case of OP.\n\t\t\t// so we use this.getBindingContext\n\t\t\t// for other cases like form, we can still use page context data, this will give correct context for both OP and SubOP.\n\t\t\tlet bindingContext;\n\t\t\tif (fieldContainerType === \"Table\") {\n\t\t\t\tbindingContext = this.getBindingContext() as Context;\n\t\t\t} else {\n\t\t\t\tbindingContext = currentPageContext;\n\t\t\t}\n\t\t\tif (bindingContext && sourcepath) {\n\t\t\t\tconst values =\n\t\t\t\t\tadditionalValueHelper.getRelevantRecommendations(\n\t\t\t\t\t\tall_recommendations || {},\n\t\t\t\t\t\tthis.getBindingContext() as Context,\n\t\t\t\t\t\tsourcepath\n\t\t\t\t\t) || [];\n\t\t\t\tif (values.length) {\n\t\t\t\t\tthis.data(\"hasRecommendations\", true);\n\t\t\t\t\tvalueStateTypeData = ValueState.Information;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvalueStateTypeData = this.getValueState() as ValueState;\n\t\t}\n\t\tif (valueStateTypeData === \"Information\") {\n\t\t\tthis.setValueStateText(\" \");\n\t\t}\n\t}\n\treturn valueStateTypeData;\n}\nformatValueState.__functionName = \"sap.fe.macros.internal.valuehelp.AdditionalValueFormatter#formatValueState\";\n\n// See https://www.typescriptlang.org/docs/handbook/functions.html#this-parameters for more detail on this weird syntax\n/**\n * Collection of AdditionalValue formatters.\n *\n * @param this The context\n * @param sName The inner function name\n * @param oArgs The inner function parameters\n * @returns The value from the inner function\n */\nconst additionalValueFormatter = function (this: object, sName: string, ...oArgs: any[]): any {\n\tif (additionalValueFormatter.hasOwnProperty(sName)) {\n\t\treturn (additionalValueFormatter as any)[sName].apply(this, oArgs);\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\nadditionalValueFormatter.getGrowing = getGrowing;\nadditionalValueFormatter.formatValueState = formatValueState;\n\n/**\n * @global\n */\nexport default additionalValueFormatter;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;EAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAASA,UAAU,CAAeC,kBAAsD,EAAEC,YAAoB,EAAE;IAC/G,MAAMC,MAAM,GACXC,qBAAqB,CAACC,0BAA0B,CAACJ,kBAAkB,IAAI,CAAC,CAAC,EAAE,IAAI,CAACK,iBAAiB,EAAE,EAAaJ,YAAY,CAAC,IAAI,EAAE;IACpI,IAAIC,MAAM,CAACI,MAAM,GAAG,CAAC,EAAE;MACtB;MACA,OAAO,IAAI;IACZ;IACA,OAAO,KAAK;EACb;EACAP,UAAU,CAACQ,cAAc,GAAG,sEAAsE;EAElG,SAASC,gBAAgB,CAExBC,mBAA2C,EAC3CC,kBAA2B,EAC3BC,UAAmB,EACnBC,kBAA2B,EAC1B;IACD,IAAIC,kBAAkB,GAAGC,UAAU,CAACC,IAAI;IACxC,IAAI,CAAC,IAAI,CAACC,QAAQ,EAAE,EAAE;MACrB;;MAEA,IAAI,IAAI,CAACC,aAAa,EAAE,IAAI,MAAM,IAAK,IAAI,CAACC,IAAI,CAAC,oBAAoB,CAAC,IAAI,IAAI,CAACD,aAAa,EAAE,IAAI,aAAc,EAAE;QACjH;QACA;QACA;QACA,IAAIE,cAAc;QAClB,IAAIP,kBAAkB,KAAK,OAAO,EAAE;UACnCO,cAAc,GAAG,IAAI,CAACd,iBAAiB,EAAa;QACrD,CAAC,MAAM;UACNc,cAAc,GAAGT,kBAAkB;QACpC;QACA,IAAIS,cAAc,IAAIR,UAAU,EAAE;UACjC,MAAMT,MAAM,GACXC,qBAAqB,CAACC,0BAA0B,CAC/CK,mBAAmB,IAAI,CAAC,CAAC,EACzB,IAAI,CAACJ,iBAAiB,EAAE,EACxBM,UAAU,CACV,IAAI,EAAE;UACR,IAAIT,MAAM,CAACI,MAAM,EAAE;YAClB,IAAI,CAACY,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC;YACrCL,kBAAkB,GAAGC,UAAU,CAACM,WAAW;UAC5C;QACD;MACD,CAAC,MAAM;QACNP,kBAAkB,GAAG,IAAI,CAACI,aAAa,EAAgB;MACxD;MACA,IAAIJ,kBAAkB,KAAK,aAAa,EAAE;QACzC,IAAI,CAACQ,iBAAiB,CAAC,GAAG,CAAC;MAC5B;IACD;IACA,OAAOR,kBAAkB;EAC1B;EACAL,gBAAgB,CAACD,cAAc,GAAG,4EAA4E;;EAE9G;EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,MAAMe,wBAAwB,GAAG,UAAwBC,KAAa,EAAwB;IAC7F,IAAID,wBAAwB,CAACE,cAAc,CAACD,KAAK,CAAC,EAAE;MAAA,kCADsBE,KAAK;QAALA,KAAK;MAAA;MAE9E,OAAQH,wBAAwB,CAASC,KAAK,CAAC,CAACG,KAAK,CAAC,IAAI,EAAED,KAAK,CAAC;IACnE,CAAC,MAAM;MACN,OAAO,EAAE;IACV;EACD,CAAC;EAEDH,wBAAwB,CAACvB,UAAU,GAAGA,UAAU;EAChDuB,wBAAwB,CAACd,gBAAgB,GAAGA,gBAAgB;;EAE5D;AACA;AACA;EAFA,OAGec,wBAAwB;AAAA"}},{"offset":{"line":19376,"column":0},"map":{"version":3,"names":["sap","ui","define","AdditionalValueHelper","library","ValueState","additionalValueHelper","getGrowing","recommendationData","propertyPath","values","getRelevantRecommendations","this","getBindingContext","length","__functionName","formatValueState","all_recommendations","currentPageContext","sourcepath","fieldContainerType","valueStateTypeData","None","getValue","getValueState","data","bindingContext","Information","setValueStateText","additionalValueFormatter","sName","hasOwnProperty","_len","arguments","oArgs","Array","_key","apply"],"sources":["AdditionalValueFormatter-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,uEAAO,CAAC,yDAA0D,uBAAwB,SAAUC,EAAuBC,GAChI,aAEA,IAAIC,EAAaD,EAAQC,WACzB,IAAIC,EAAwBH,EAAsBG,sBASlD,SAASC,EAAWC,EAAoBC,GACtC,MAAMC,EAASJ,EAAsBK,2BAA2BH,GAAsB,CAAC,EAAGI,KAAKC,oBAAqBJ,IAAiB,GACrI,GAAIC,EAAOI,OAAS,EAAG,CAErB,OAAO,IACT,CACA,OAAO,KACT,CACAP,EAAWQ,eAAiB,uEAC5B,SAASC,EAAiBC,EAAqBC,EAAoBC,EAAYC,GAC7E,IAAIC,EAAqBhB,EAAWiB,KACpC,IAAKV,KAAKW,WAAY,CAGpB,GAAIX,KAAKY,iBAAmB,QAAUZ,KAAKa,KAAK,uBAAyBb,KAAKY,iBAAmB,cAAe,CAI9G,IAAIE,EACJ,GAAIN,IAAuB,QAAS,CAClCM,EAAiBd,KAAKC,mBACxB,KAAO,CACLa,EAAiBR,CACnB,CACA,GAAIQ,GAAkBP,EAAY,CAChC,MAAMT,EAASJ,EAAsBK,2BAA2BM,GAAuB,CAAC,EAAGL,KAAKC,oBAAqBM,IAAe,GACpI,GAAIT,EAAOI,OAAQ,CACjBF,KAAKa,KAAK,qBAAsB,MAChCJ,EAAqBhB,EAAWsB,WAClC,CACF,CACF,KAAO,CACLN,EAAqBT,KAAKY,eAC5B,CACA,GAAIH,IAAuB,cAAe,CACxCT,KAAKgB,kBAAkB,IACzB,CACF,CACA,OAAOP,CACT,CACAL,EAAiBD,eAAiB,6EAWlC,MAAMc,EAA2B,SAAUC,GACzC,GAAID,EAAyBE,eAAeD,GAAQ,CAClD,IAAK,IAAIE,EAAOC,UAAUnB,OAAQoB,EAAQ,IAAIC,MAAMH,EAAO,EAAIA,EAAO,EAAI,GAAII,EAAO,EAAGA,EAAOJ,EAAMI,IAAQ,CAC3GF,EAAME,EAAO,GAAKH,UAAUG,EAC9B,CACA,OAAOP,EAAyBC,GAAOO,MAAMzB,KAAMsB,EACrD,KAAO,CACL,MAAO,EACT,CACF,EACAL,EAAyBtB,WAAaA,EACtCsB,EAAyBb,iBAAmBA,EAK5C,OAAOa,CACT,EAAG","sourceRoot":"internal/valuehelp"}},{"offset":{"line":19381,"column":0},"map":{"version":3,"names":["AdditionalValueGroupKey","additionalValueHelper","requestForAdditionalValueContextData","additionalValues","valueHelpListBinding","valueHelpBindingInfo","reverseAdditionalValues","reverse","isSuspended","suspend","parameters","changeParameters","searchTerm","$search","additionalValueFilters","getAdditionalValueFilters","getValueHelpBindingFilters","sorter","getSorter","additionalValuesListBinding","getModel","bindList","path","undefined","additionalValueContexts","requestContexts","map","context","getObject","filters","Array","isArray","resumeValueListBindingAndResetChanges","resume","resetChanges","error","sortAndFilterOthers","uniqueAdditionalValues","otherGroupFilters","createFiltersForOthersGroup","filter","FilterType","Application","sort","forEach","additionalValue","values","length","propertyPath","value","push","Filter","value1","operator","Sorter","getSorterFunction","resourceBundle","Core","getLibraryResourceBundle","groupKey","getProperty","recommendation","getText","recentValue","createAdditionalValueTransientContexts","additionalValueContextData","sortAdditionalValueContextDataAndCreateContexts","contextData","create","removeDuplicateAdditionalValues","duplicateFlag","includes","splice","indexOf","valuehelpFilters","uniqueAdditionalValuesFilters","and","getRelevantRecommendations","data","bindingContext","relevantRecommendations","Object","keys","getRecommendationPropertyPath","getAdditionalValueFromPropertyPath","valueData","getAdditionalValueFromKeys","recommendationData","result","recData","keyProperties","allKeysMatch","key","oldData","assign","propertyPaths","split","navPropPath","join","doesTransientContextsAlreadyExist","listBinding","contexts","getAllCurrentContexts","doesTransientContextExists","isTransient"],"sourceRoot":"internal/valuehelp","sources":["AdditionalValueHelper.ts"],"sourcesContent":["import type {\n\tInCompletenessInfoType,\n\tInternalPropertyAdditionalValue,\n\tKeyPropertiesDataType,\n\tRecommendationDataForNavPropertyType,\n\tRecommendationDataInnerObjectType\n} from \"sap/fe/core/helpers/RecommendationHelper\";\nimport type { AggregationBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport Core from \"sap/ui/core/Core\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterType from \"sap/ui/model/FilterType\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport Sorter from \"sap/ui/model/Sorter\";\n\nenum AdditionalValueGroupKey {\n\trecommendation = \"recommendation\",\n\trecentValue = \"recentValue\"\n}\nexport type AdditionalValueType = {\n\tpropertyPath: string;\n\tvalues: (string | number)[];\n\tgroupKey: AdditionalValueGroupKey; // unique identifier for the group\n};\ntype BindingInfoParameters = {\n\t$search: string;\n};\ntype AdditionValueDefinition = InCompletenessInfoType | RecommendationDataForNavPropertyType[] | InternalPropertyAdditionalValue | {};\nconst additionalValueHelper = {\n\t/**\n\t * This function is responsible to create context based on additional value filters and custom sorter and request contexts from it.\n\t *\n\t * @param additionalValues Array of additional values\n\t * @param valueHelpListBinding List binding\n\t * @param valueHelpBindingInfo The binding info object to be used to bind the list to the model\n\t * @returns Additional value contexts\n\t */\n\trequestForAdditionalValueContextData: async function (\n\t\tadditionalValues: AdditionalValueType[],\n\t\tvalueHelpListBinding: ODataListBinding,\n\t\tvalueHelpBindingInfo: AggregationBindingInfo\n\t) {\n\t\t// reverse the array so that while creating transient context first additional value is grouped first\n\t\tconst reverseAdditionalValues = [...additionalValues].reverse();\n\t\tif (!valueHelpListBinding.isSuspended()) {\n\t\t\tvalueHelpListBinding.suspend();\n\t\t}\n\t\tif (valueHelpBindingInfo.parameters) {\n\t\t\tvalueHelpListBinding.changeParameters(valueHelpBindingInfo.parameters);\n\t\t}\n\n\t\t// check if there is any input in the field\n\t\t// This information is used to determine\n\t\t// if to show the \"others\" section or not\n\t\t// and also to determine if typeAhead should open or not\n\t\tconst searchTerm = (valueHelpBindingInfo.parameters as BindingInfoParameters).$search;\n\t\tconst additionalValueFilters = this.getAdditionalValueFilters(reverseAdditionalValues, [\n\t\t\t...this.getValueHelpBindingFilters(valueHelpBindingInfo)\n\t\t]);\n\t\t(valueHelpBindingInfo.parameters as BindingInfoParameters).$search = searchTerm;\n\t\t// add custom sorter to take care of grouping the additional values\n\t\tconst sorter: Sorter[] = [this.getSorter()];\n\t\tconst additionalValuesListBinding = valueHelpListBinding\n\t\t\t.getModel()\n\t\t\t.bindList(valueHelpBindingInfo.path, undefined, sorter, additionalValueFilters, valueHelpBindingInfo.parameters);\n\t\t// get recommendation contexts from backend\n\t\tconst additionalValueContexts: Context[] = await additionalValuesListBinding.requestContexts();\n\t\treturn additionalValueContexts.map((context) => context.getObject() as Record<string, string>);\n\t},\n\t/**\n\t * This function is responsible to fetch the valuehelp binding filters.\n\t *\n\t * @param valueHelpBindingInfo The binding info object to be used to bind the list to the model\n\t * @returns Filters of valuehelp binding\n\t */\n\tgetValueHelpBindingFilters: function (valueHelpBindingInfo: AggregationBindingInfo) {\n\t\t// get all existing filters from the binding info\n\t\t// this + additional value filters will be used later on to fetch additional values from the backend\n\t\tif (valueHelpBindingInfo.filters) {\n\t\t\tif (Array.isArray(valueHelpBindingInfo.filters)) {\n\t\t\t\treturn valueHelpBindingInfo.filters;\n\t\t\t} else {\n\t\t\t\treturn [valueHelpBindingInfo.filters];\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t},\n\t/**\n\t * This function resumes the suspended list binding and then resets changes on it.\n\t *\n\t * @param valueHelpListBinding List binding\n\t */\n\tresumeValueListBindingAndResetChanges: async function (valueHelpListBinding: ODataListBinding) {\n\t\tif (valueHelpListBinding.isSuspended()) {\n\t\t\tvalueHelpListBinding.resume();\n\t\t}\n\t\t// get rid of existing transient contexts.\n\n\t\t// destroying causes issues sometimes, contexts are not always available to destroy but appear afterwards magically\n\t\ttry {\n\t\t\tawait valueHelpListBinding.resetChanges();\n\t\t} catch (error: unknown) {\n\t\t\t//We do not do anything here as we know the model will always throw an error and this will fill up the console with errors.\n\t\t}\n\t},\n\t/**\n\t * This function is used to sort and filter the Others group which contains other values which are not additional values.\n\t *\n\t * @param valueHelpListBinding List Binding\n\t * @param valueHelpBindingInfo The binding info object to be used to bind the list to the model\n\t * @param uniqueAdditionalValues Array of additional values which contain values which are unique to each group\n\t */\n\tsortAndFilterOthers: function (\n\t\tvalueHelpListBinding: ODataListBinding,\n\t\tvalueHelpBindingInfo: AggregationBindingInfo,\n\t\tuniqueAdditionalValues: AdditionalValueType[]\n\t) {\n\t\t// filtering on valueListBinding is required to show the \"Others\" section\n\t\t// We should only filter on valueHelpBinding when there is search term entered\n\t\t// otherwise we do not want to show the \"Others\" section\n\t\tconst otherGroupFilters = this.createFiltersForOthersGroup(\n\t\t\tuniqueAdditionalValues,\n\t\t\tthis.getValueHelpBindingFilters(valueHelpBindingInfo)\n\t\t);\n\t\tvalueHelpListBinding.filter([otherGroupFilters], FilterType.Application);\n\t\tvalueHelpListBinding.sort(this.getSorter());\n\t},\n\t/**\n\t * This functions creates the filters for additional values.\n\t *\n\t * @param reverseAdditionalValues Array of additional values in reverse order\n\t * @param filters Existing valuehelp binding filters\n\t * @returns Additional value filters\n\t */\n\tgetAdditionalValueFilters: function (reverseAdditionalValues: AdditionalValueType[], filters: Filter[]) {\n\t\treverseAdditionalValues.forEach((additionalValue) => {\n\t\t\tif (additionalValue.values.length > 0) {\n\t\t\t\tconst values = additionalValue.values;\n\t\t\t\tconst propertyPath = additionalValue.propertyPath;\n\t\t\t\t// add additional value filters to existing filters from the binding info\n\t\t\t\tvalues.forEach((value) => {\n\t\t\t\t\t// update the value help binding info to get additional values from the backend\n\t\t\t\t\tfilters.push(\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: propertyPath,\n\t\t\t\t\t\t\tvalue1: value,\n\t\t\t\t\t\t\toperator: \"EQ\"\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn filters;\n\t},\n\t/**\n\t * This function returns a custom sorter which will be used to group additional values and also create Others group.\n\t *\n\t * @returns Custom Sorter containing different groups\n\t */\n\tgetSorter: function () {\n\t\t// This sorter will return a custom sorter\n\t\treturn new Sorter(\"\", false, this.getSorterFunction);\n\t},\n\t/**\n\t * This function is a callback to the custom sorter.\n\t *\n\t * @param context Context of the Field\n\t * @returns Group key that can be used for sorting\n\t */\n\tgetSorterFunction: function (context: Context) {\n\t\tconst resourceBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\n\t\t//get the client side annotation to figure out the groupkey\n\t\tconst groupKey = context.getProperty(\"@$fe.additionalValueGroupKey\") as string;\n\t\tif (groupKey === AdditionalValueGroupKey.recommendation) {\n\t\t\treturn resourceBundle.getText(\"M_ADDITIONALVALUEHELPER_RECOMMENDATIONS\");\n\t\t} else if (groupKey === AdditionalValueGroupKey.recentValue) {\n\t\t\treturn resourceBundle.getText(\"M_ADDITIONALVALUEHELPER_RECENTVALUE\");\n\t\t} else {\n\t\t\treturn resourceBundle.getText(\"M_ADDITIONALVALUEHELPER_OTHERS\");\n\t\t}\n\t},\n\t/**\n\t * This function is used to create transient contexts for the additional values.\n\t *\n\t * @param additionalValueContextData Array of Contexts created for additional values\n\t * @param reverseAdditionalValues Array of additional values in reverse order\n\t * @param valueHelpListBinding List Binding\n\t */\n\tcreateAdditionalValueTransientContexts: function (\n\t\tadditionalValueContextData: Record<string, string>[],\n\t\treverseAdditionalValues: AdditionalValueType[],\n\t\tvalueHelpListBinding: ODataListBinding\n\t) {\n\t\tif (additionalValueContextData.length > 0) {\n\t\t\t// recommendations exist in the valuehelp\n\t\t\t// now add transient context to the list binding per additional value group\n\t\t\treverseAdditionalValues.forEach((additionalValue) => {\n\t\t\t\tconst values = additionalValue.values;\n\t\t\t\tconst propertyPath = additionalValue.propertyPath;\n\t\t\t\tconst groupKey = additionalValue.groupKey;\n\t\t\t\t//sorting and looping through the additionalValueContextData to create transient contexts\n\t\t\t\tthis.sortAdditionalValueContextDataAndCreateContexts(\n\t\t\t\t\tadditionalValueContextData,\n\t\t\t\t\tvalues,\n\t\t\t\t\tpropertyPath,\n\t\t\t\t\tvalueHelpListBinding,\n\t\t\t\t\tgroupKey\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t},\n\t/**\n\t * This function is used to sort the additional value context data and create contexts.\n\t *\n\t * @param additionalValueContextData Array of Contexts created for additional values\n\t * @param values Array of values which are a part of additionalvalues\n\t * @param propertyPath Path pointing to the property of the field\n\t * @param valueHelpListBinding List Binding\n\t * @param groupKey AdditionalValueGroupKey\n\t */\n\tsortAdditionalValueContextDataAndCreateContexts: function (\n\t\tadditionalValueContextData: Record<string, string>[],\n\t\tvalues: (string | number)[],\n\t\tpropertyPath: string,\n\t\tvalueHelpListBinding: ODataListBinding,\n\t\tgroupKey: AdditionalValueGroupKey\n\t) {\n\t\t[...values].reverse().forEach((value: string | number) => {\n\t\t\tadditionalValueContextData.forEach((contextData: Record<string, string>) => {\n\t\t\t\tif (value === contextData[propertyPath]) {\n\t\t\t\t\tcontextData[\"@$fe.additionalValueGroupKey\"] = groupKey;\n\t\t\t\t\tvalueHelpListBinding.create(contextData);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * This function will remove the duplicate values which are a part of different additional value groups.\n\t *\n\t * @param additionalValueContextData Array of Contexts created for additional values\n\t * @param additionalValues Array of additional values\n\t * @returns Array of additional values which contain unique values in each group\n\t */\n\tremoveDuplicateAdditionalValues: function (\n\t\tadditionalValueContextData: Record<string, string>[],\n\t\tadditionalValues: AdditionalValueType[]\n\t) {\n\t\tconst uniqueAdditionalValues: AdditionalValueType[] = [];\n\t\t//create a deep copy to make sure we dont alter the original additionalvalues\n\t\tadditionalValues.forEach((additionalValue) => {\n\t\t\tconst values = [...additionalValue.values];\n\t\t\tconst propertyPath = additionalValue.propertyPath;\n\t\t\tconst groupKey = additionalValue.groupKey;\n\t\t\tuniqueAdditionalValues.push({ values, propertyPath, groupKey });\n\t\t});\n\t\t//loop through the additionalValueContextData and uniqueAdditionalValues to see if there are any duplicates and then remove them\n\t\tadditionalValueContextData.forEach((contextData) => {\n\t\t\tlet duplicateFlag = false;\n\t\t\tuniqueAdditionalValues.forEach((additionalValue) => {\n\t\t\t\tconst values = additionalValue.values;\n\t\t\t\tconst propertyPath = additionalValue.propertyPath;\n\t\t\t\tif (values.includes(contextData[propertyPath])) {\n\t\t\t\t\tif (duplicateFlag) {\n\t\t\t\t\t\t// if we find a duplicate then remove it from the array\n\t\t\t\t\t\tvalues.splice(values.indexOf(contextData[propertyPath]), 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tduplicateFlag = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn uniqueAdditionalValues;\n\t},\n\t/**\n\t * This function is used to create filters to fetch values other than additional values.\n\t *\n\t * @param uniqueAdditionalValues Array of additional values which contain values which are unique to each group\n\t * @param valuehelpFilters Filters which are already a part of ValueHelp Binding\n\t * @returns Filters for Others group\n\t */\n\tcreateFiltersForOthersGroup: function (uniqueAdditionalValues: AdditionalValueType[], valuehelpFilters: Filter[]) {\n\t\tconst filters: Filter[] = [];\n\t\t//create filters not equal to the values of uniqueAdditionalValues\n\t\tuniqueAdditionalValues.forEach((additionalValue) => {\n\t\t\tconst values = additionalValue.values;\n\t\t\tconst propertyPath = additionalValue.propertyPath;\n\t\t\tvalues.forEach((value) => {\n\t\t\t\tfilters.push(\n\t\t\t\t\tnew Filter({\n\t\t\t\t\t\tpath: propertyPath,\n\t\t\t\t\t\tvalue1: value,\n\t\t\t\t\t\toperator: \"NE\"\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t\t//set and to true for the uniqueAdditionalValues filters\n\t\tconst uniqueAdditionalValuesFilters = new Filter({\n\t\t\tfilters: filters,\n\t\t\tand: true\n\t\t});\n\t\t//check if filters are already present on valuehelpbinding and push uniqueAdditionalValuesFilters into the valuehelpbinding filters\n\t\tif (valuehelpFilters.length > 0) {\n\t\t\tvaluehelpFilters.push(uniqueAdditionalValuesFilters);\n\t\t\treturn new Filter({\n\t\t\t\tfilters: valuehelpFilters,\n\t\t\t\tand: true\n\t\t\t});\n\t\t} else {\n\t\t\t//if no pre existing filters are present then return uniqueAdditionalValuesFilters\n\t\t\treturn uniqueAdditionalValuesFilters;\n\t\t}\n\t},\n\t/**\n\t * This functions returns the relevant recommendations for the valuelist.\n\t *\n\t * @param data Object containing recommendation model data\n\t * @param bindingContext Binding context of the Field\n\t * @param propertyPath Property Path of the Field\n\t * @returns Relevant recommendations for the valuelist\n\t */\n\tgetRelevantRecommendations: function (data: InCompletenessInfoType | {}, bindingContext: Context, propertyPath: string) {\n\t\tconst values: Array<string | number> = [];\n\t\tlet relevantRecommendations: InternalPropertyAdditionalValue;\n\t\tif (Object.keys(data).length > 0) {\n\t\t\t//get the right property path by eliminating the starting / and also main entityset name\n\t\t\tpropertyPath = this.getRecommendationPropertyPath(propertyPath);\n\t\t\t//get the recommendations based on property path and binding context passed\n\t\t\trelevantRecommendations = this.getAdditionalValueFromPropertyPath(\n\t\t\t\tpropertyPath,\n\t\t\t\tdata,\n\t\t\t\tbindingContext\n\t\t\t) as InternalPropertyAdditionalValue;\n\t\t\t//if we get recommendations then push the values\n\t\t\tif (Object.keys(relevantRecommendations).length > 0) {\n\t\t\t\trelevantRecommendations.additionalValues.forEach((valueData: RecommendationDataInnerObjectType) => {\n\t\t\t\t\tvalues.push(valueData.value);\n\t\t\t\t});\n\t\t\t\treturn values;\n\t\t\t} else {\n\t\t\t\t//if recommendations are not found then return null\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * This function is responsible to fetch the exact object from an array of objects that contains relevant recommendationData based on keys.\n\t *\n\t * @param recommendationData Array containing additional values\n\t * @param bindingContext Binding context of the Field\n\t * @returns Relevant object from an array of object that contains the additional value\n\t */\n\tgetAdditionalValueFromKeys: function (recommendationData: AdditionValueDefinition, bindingContext?: Context) {\n\t\tconst contextData = bindingContext?.getObject() as Record<string, string> | undefined;\n\t\tlet result: AdditionValueDefinition = {};\n\t\t//loop through the recommendationData and check if the keyProperties match with the binding context data\n\t\tif (bindingContext && contextData) {\n\t\t\tif (Array.isArray(recommendationData)) {\n\t\t\t\t(recommendationData as RecommendationDataForNavPropertyType[]).forEach((recData) => {\n\t\t\t\t\tconst keyProperties = recData.keyProperties as KeyPropertiesDataType;\n\t\t\t\t\tlet allKeysMatch = true;\n\t\t\t\t\tfor (const key in keyProperties) {\n\t\t\t\t\t\tif (keyProperties[key] !== contextData[key]) {\n\t\t\t\t\t\t\tallKeysMatch = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//if every key value matches with the binding context data then assign it to result which will be returned\n\t\t\t\t\tif (allKeysMatch) {\n\t\t\t\t\t\tresult = recData as AdditionValueDefinition;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t},\n\t/**\n\t * This function is responsible for getting the additional value based on property path and binding context passed.\n\t *\n\t * @param propertyPath Property path of the field\n\t * @param recommendationData Object containing additional value\n\t * @param bindingContext Binding context of the field\n\t * @returns Additional value based on property path and binding context passed\n\t */\n\tgetAdditionalValueFromPropertyPath: function (\n\t\tpropertyPath: string,\n\t\trecommendationData: AdditionValueDefinition,\n\t\tbindingContext: Context\n\t): AdditionValueDefinition {\n\t\t//create a copy of the recommendationData to store its previous value as it will change because of the recursive approach\n\t\tlet oldData = Object.assign(recommendationData, {});\n\t\t//check if property path exists on the recommendationData object and if so then return the object pointing to the property path\n\t\tif (Object.keys(recommendationData).includes(propertyPath)) {\n\t\t\treturn (recommendationData as InCompletenessInfoType)[propertyPath] as AdditionValueDefinition;\n\t\t} else {\n\t\t\t//if property path is not present then check if it is 1:n mapping and we need to do a recursive approach to land on the exact object containing the relevant recommendations\n\t\t\t//continue the while loop till the property path is found in the previous recommendationData\n\t\t\twhile (Object.keys(oldData).length > 0 && !Object.keys(oldData).includes(propertyPath)) {\n\t\t\t\t// as it might be 1:n mapping so first seperate the navprop name and actual prop name to make sure we find the navprop first and then from its pointing object we find the property path\n\t\t\t\t//eg: _Item/Material will be first divided into _Item and we search for it and then from its relevant object we search for Material\n\t\t\t\tconst propertyPaths = propertyPath.split(\"/\");\n\t\t\t\tif (propertyPaths.length > 1) {\n\t\t\t\t\t//getting the navprop path\n\t\t\t\t\tconst navPropPath = propertyPaths[0];\n\t\t\t\t\t//removing the navprop path from propertypaths so that we only check for actual property path\n\t\t\t\t\tpropertyPaths.splice(0, 1);\n\t\t\t\t\tpropertyPath = propertyPaths.join(\"/\");\n\t\t\t\t\t//using getAdditionalValueFromPropertyPath and passing navPropPath we get the exact array of objects pointing to the navProp\n\t\t\t\t\trecommendationData = this.getAdditionalValueFromPropertyPath(\n\t\t\t\t\t\tnavPropPath,\n\t\t\t\t\t\trecommendationData,\n\t\t\t\t\t\tbindingContext\n\t\t\t\t\t) as RecommendationDataForNavPropertyType[];\n\t\t\t\t\t//no pass the array of objects of navProp to getAdditionalValueFromKeys and get the exact object that contains the recommendationData based on keys\n\t\t\t\t\trecommendationData = this.getAdditionalValueFromKeys(recommendationData, bindingContext);\n\t\t\t\t\tif (Object.keys(recommendationData).length > 0) {\n\t\t\t\t\t\t//set the recommendationData to oldData before assigning the new value to it\n\t\t\t\t\t\toldData = Object.assign(recommendationData, {});\n\t\t\t\t\t\t//here we check for the actual property path from the object we found from getAdditionalValueFromKeys\n\t\t\t\t\t\t//eg: Material can be found in the object which is part of array of objects of _Item\n\t\t\t\t\t\trecommendationData = this.getAdditionalValueFromPropertyPath(propertyPath, recommendationData, bindingContext);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {};\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn recommendationData;\n\t\t}\n\t},\n\t/**\n\t * This function returns the property path of the field by removing the leading '/' and main entity set name.\n\t *\n\t * @param propertyPath Property Path of the Field\n\t * @returns Property path of the field by removing the leading '/' and main entity set name.\n\t */\n\tgetRecommendationPropertyPath: function (propertyPath: string) {\n\t\t//First we split the property path based on /\n\t\tconst propertyPaths = propertyPath.split(\"/\");\n\t\t//Now remove the first two elements of the array. As first element will always be '' and second element will be main entity set name\n\t\tpropertyPaths.splice(0, 2);\n\t\t//Now join the remaining elements to create a new property path and return it\n\t\treturn propertyPaths.join(\"/\");\n\t},\n\t/**\n\t * This function checks if the listbinding contains transient contexts and they match the existing additional values. This is to ensure\n\t * we do not create duplicate transient contexts.\n\t *\n\t * @param listBinding List Binding\n\t * @param additionalValues Array of additional values which contain values which are unique to each group\n\t * @returns Boolean value which tells whether the list binding contains duplicate transient contexts or not\n\t */\n\tdoesTransientContextsAlreadyExist: function (listBinding: ODataListBinding, additionalValues: AdditionalValueType[]) {\n\t\tconst contexts = listBinding.getAllCurrentContexts();\n\t\tlet doesTransientContextExists = false;\n\t\tadditionalValues.forEach((additionalValue) => {\n\t\t\tconst values = additionalValue.values;\n\t\t\tconst propertyPath = additionalValue.propertyPath;\n\t\t\t//looping through the contexts to check if they are transient and contain values\n\t\t\tcontexts.forEach((context: Context) => {\n\t\t\t\tconst contextData = context.getObject() as Record<string, string>;\n\t\t\t\tconst isTransient = context.isTransient();\n\t\t\t\t//We check if the context is transient and has the value in it\n\t\t\t\tif (values.includes(contextData[propertyPath]) && isTransient === true) {\n\t\t\t\t\tdoesTransientContextExists = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn doesTransientContextExists;\n\t}\n};\nexport { additionalValueHelper, AdditionalValueGroupKey };\n"],"mappings":"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"}},{"offset":{"line":19797,"column":0},"map":{"version":3,"names":["sap","ui","define","Core","Filter","FilterType","Sorter","_exports","AdditionalValueGroupKey","additionalValueHelper","requestForAdditionalValueContextData","async","additionalValues","valueHelpListBinding","valueHelpBindingInfo","reverseAdditionalValues","reverse","isSuspended","suspend","parameters","changeParameters","searchTerm","$search","additionalValueFilters","this","getAdditionalValueFilters","getValueHelpBindingFilters","sorter","getSorter","additionalValuesListBinding","getModel","bindList","path","undefined","additionalValueContexts","requestContexts","map","context","getObject","filters","Array","isArray","resumeValueListBindingAndResetChanges","resume","resetChanges","error","sortAndFilterOthers","uniqueAdditionalValues","otherGroupFilters","createFiltersForOthersGroup","filter","Application","sort","forEach","additionalValue","values","length","propertyPath","value","push","value1","operator","getSorterFunction","resourceBundle","getLibraryResourceBundle","groupKey","getProperty","recommendation","getText","recentValue","createAdditionalValueTransientContexts","additionalValueContextData","sortAdditionalValueContextDataAndCreateContexts","contextData","create","removeDuplicateAdditionalValues","duplicateFlag","includes","splice","indexOf","valuehelpFilters","uniqueAdditionalValuesFilters","and","getRelevantRecommendations","data","bindingContext","relevantRecommendations","Object","keys","getRecommendationPropertyPath","getAdditionalValueFromPropertyPath","valueData","getAdditionalValueFromKeys","recommendationData","result","recData","keyProperties","allKeysMatch","key","oldData","assign","propertyPaths","split","navPropPath","join","doesTransientContextsAlreadyExist","listBinding","contexts","getAllCurrentContexts","doesTransientContextExists","isTransient"],"sources":["AdditionalValueHelper-dbg.js"],"mappings":"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","sourceRoot":"internal/valuehelp"}},{"offset":{"line":19802,"column":0},"map":{"version":3,"names":["ODataTableDelegate","Object","assign","TableDelegate","fetchProperties","table","model","_getModel","properties","_createPropertyInfos","createInternalBindingContext","MacrosDelegateUtil","setCachedProperties","getBindingContext","setProperty","dialog","isA","getParent","internalModel","getModel","internalBindingContext","newInternalBindingContextPath","getPath","getId","getProperty","newInternalBindingContext","bindContext","getBoundContext","setBindingContext","collectRelatedProperties","dataModelPropertyPath","dataModelAdditionalPropertyPath","getAdditionalProperty","relatedProperties","targetObject","additionalProperty","additionalPropertyPath","getTargetObjectPath","property","propertyPath","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","displayMode","getDisplayMode","metadataInfo","getDelegate","payload","entitySetPath","collectionName","metaModel","getMetaModel","requestObject","then","entitySetAnnotations","sortRestrictionsInfo","getSortRestrictionsInfo","filterRestrictions","filterRestrictionsInfo","getFilterRestrictionsInfo","customDataForColumns","getCustomData","propertiesToBeCreated","dataModelEntityPath","getInvolvedDataModelObjects","getContext","customData","forEach","columnDef","propertyInfo","name","path","label","sortable","isSortableProperty","filterable","isFilterableProperty","maxConditions","getPropertyMaxConditions","typeConfig","isTypeFilterable","$Type","getTypeUtil","getTypeConfig","undefined","enhanceDataModelPath","targetPropertyPath","type","propertyTypeConfig","fetchTypeConfig","TypeUtil","formatOptions","constraints","relatedPropertiesInfo","relatedPropertyPaths","keys","length","propertyInfos","find","push","relatedColumns","createRelatedProperties","concat","updateBindingInfo","oMDCTable","oBindingInfo","apply","oMetadataInfo","collectionPath","oFilter","Core","byId","getFilter","bFilterEnabled","isFilteringEnabled","mConditions","oInnerFilterInfo","oOuterFilterInfo","aFilters","tableProperties","getCachedProperties","getConditions","FilterUtil","getFilterInfo","filters","aParameterNames","DelegateUtil","getParameterNames","_updatePropertyInfo","sParameterPath","getParametersInfo","parameters","$search","CommonUtils","normalizeSearchTerm","getSearch","_applyDefaultSorting","$select","reduce","sQuery","oProperty","indexOf","$count","ModelHelper","isDraftSupported","Filter","FilterOperator","EQ","Promise","resolve","attachEventOnce","oPayload","sorter","defaultSortPropertyName","Sorter","aTableProperties","aConditionKey","oMetaModel","conditionKey","findIndex","tableProperty","oColumnDef","getObject","updateBinding","oTable","oBinding","bNeedManualRefresh","oInternalBindingContext","sManualUpdatePropertyKey","bPendingManualUpdate","oRowBinding","getRowBinding","oldFilters","getFilters","deepEqual","getQueryOptionsFromParameters","requestRefresh","getGroupId","finally","catch","oError","Log","error","fireEvent","existingColumns","relatedPropertyNameMap","relatedColumn","column","newName","valueHelpTableColumn","getLabel","map","columnName","hasOwnProperty","isMultiValueFilterExpression","getAssociatedTextPropertyPath","getAssociatedCurrencyPropertyPath","getAssociatedUnitPropertyPath","getAssociatedTimezonePropertyPath","dataModelAdditionalProperty"],"sourceRoot":"internal/valuehelp","sources":["TableDelegate.ts"],"sourcesContent":["import { Property } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport deepEqual from \"sap/base/util/deepEqual\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { fetchTypeConfig } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport {\n\tgetFilterRestrictionsInfo,\n\tgetSortRestrictionsInfo,\n\tisMultiValueFilterExpression,\n\tSortRestrictionsInfoType\n} from \"sap/fe/core/helpers/MetaModelFunction\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { DataModelObjectPath, enhanceDataModelPath, getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getDisplayMode } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport {\n\tgetAssociatedCurrencyPropertyPath,\n\tgetAssociatedTextPropertyPath,\n\tgetAssociatedTimezonePropertyPath,\n\tgetAssociatedUnitPropertyPath,\n\tgetLabel\n} from \"sap/fe/core/templating/PropertyHelper\";\nimport { DefaultTypeForEdmType, isTypeFilterable } from \"sap/fe/core/type/EDM\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport MacrosDelegateUtil, { PropertyInfo } from \"sap/fe/macros/DelegateUtil\";\nimport { getPath, isFilterableProperty, isSortableProperty } from \"sap/fe/macros/internal/valuehelp/TableDelegateHelper\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Core from \"sap/ui/core/Core\";\nimport TableDelegate from \"sap/ui/mdc/odata/v4/TableDelegate\";\nimport DelegateUtil from \"sap/ui/mdc/odata/v4/util/DelegateUtil\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport FilterUtil from \"sap/ui/mdc/util/FilterUtil\";\nimport MDCTable from \"sap/ui/mdc/valuehelp/content/MDCTable\";\nimport Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport Model from \"sap/ui/model/Model\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport Sorter from \"sap/ui/model/Sorter\";\n\nexport type ValueHelpTableColumn = {\n\tname: string;\n\tpropertyInfos?: string[];\n\tsortable?: boolean;\n\tpath?: string;\n\tlabel?: string;\n\tfilterable?: boolean;\n\ttypeConfig?: Object;\n\tmaxConditions?: number;\n};\ntype ComplexPropertyMap = Record<string, Property>;\n\n/**\n * Test delegate for OData V4.\n */\nconst ODataTableDelegate = Object.assign({}, TableDelegate);\n\n/**\n * Fetches the relevant metadata for the table and returns property info array.\n *\n * @param table Instance of the MDCtable\n * @returns Array of property info\n */\nODataTableDelegate.fetchProperties = async function (table: Table): Promise<PropertyInfo> {\n\tconst model = await this._getModel(table);\n\tconst properties = await this._createPropertyInfos(table, model);\n\tODataTableDelegate.createInternalBindingContext(table);\n\tMacrosDelegateUtil.setCachedProperties(table, properties);\n\t(table.getBindingContext(\"internal\") as Context).setProperty(\"tablePropertiesAvailable\", true);\n\treturn properties;\n};\n\nODataTableDelegate.createInternalBindingContext = function (table: Table) {\n\tlet dialog: ManagedObject | null = table;\n\twhile (dialog && !dialog.isA(\"sap.ui.mdc.valuehelp.Dialog\")) {\n\t\tdialog = (dialog as ManagedObject).getParent();\n\t}\n\n\tconst internalModel = table.getModel(\"internal\") as JSONModel;\n\n\tif (dialog && internalModel) {\n\t\tconst internalBindingContext = dialog.getBindingContext(\"internal\");\n\t\tlet newInternalBindingContextPath;\n\t\tif (internalBindingContext) {\n\t\t\tnewInternalBindingContextPath = internalBindingContext.getPath() + `::VHDialog::${dialog.getId()}::table`;\n\t\t} else {\n\t\t\tnewInternalBindingContextPath = `/buildingblocks/${table.getId()}`;\n\t\t\tinternalModel.setProperty(\"/buildingblocks\", { ...internalModel.getProperty(\"/buildingblocks\") });\n\t\t}\n\t\tconst newInternalBindingContext = internalModel.bindContext(newInternalBindingContextPath).getBoundContext();\n\t\ttable.setBindingContext(newInternalBindingContext!, \"internal\");\n\t}\n};\n\n/**\n * Collect related properties from a property's annotations.\n *\n * @param dataModelPropertyPath The model object path of the property.\n * @returns The related properties that were identified.\n * @private\n */\nfunction collectRelatedProperties(dataModelPropertyPath: DataModelObjectPath) {\n\tconst dataModelAdditionalPropertyPath = getAdditionalProperty(dataModelPropertyPath);\n\tconst relatedProperties: ComplexPropertyMap = {};\n\tif (dataModelAdditionalPropertyPath?.targetObject) {\n\t\tconst additionalProperty = dataModelAdditionalPropertyPath.targetObject;\n\t\tconst additionalPropertyPath = getTargetObjectPath(dataModelAdditionalPropertyPath, true);\n\n\t\tconst property = dataModelPropertyPath.targetObject as Property;\n\t\tconst propertyPath = getTargetObjectPath(dataModelPropertyPath, true);\n\n\t\tconst textAnnotation = property.annotations?.Common?.Text,\n\t\t\ttextArrangement = textAnnotation?.annotations?.UI?.TextArrangement?.toString(),\n\t\t\tdisplayMode = textAnnotation && textArrangement && getDisplayMode(property);\n\n\t\tif (displayMode === \"Description\") {\n\t\t\trelatedProperties[additionalPropertyPath] = additionalProperty;\n\t\t} else if ((displayMode && displayMode !== \"Value\") || !textAnnotation) {\n\t\t\trelatedProperties[propertyPath] = property;\n\t\t\trelatedProperties[additionalPropertyPath] = additionalProperty;\n\t\t}\n\t}\n\treturn relatedProperties;\n}\n\nODataTableDelegate._createPropertyInfos = function (table: any, model: any) {\n\tconst metadataInfo = table.getDelegate().payload;\n\tconst properties: ValueHelpTableColumn[] = [];\n\tconst entitySetPath = `/${metadataInfo.collectionName}`;\n\tconst metaModel = model.getMetaModel();\n\n\treturn metaModel.requestObject(`${entitySetPath}@`).then(function (entitySetAnnotations: any) {\n\t\tconst sortRestrictionsInfo = getSortRestrictionsInfo(entitySetAnnotations);\n\t\tconst filterRestrictions = entitySetAnnotations[\"@Org.OData.Capabilities.V1.FilterRestrictions\"];\n\t\tconst filterRestrictionsInfo = getFilterRestrictionsInfo(filterRestrictions);\n\n\t\tconst customDataForColumns = MacrosDelegateUtil.getCustomData(table, \"columns\");\n\t\tconst propertiesToBeCreated: Record<string, Property> = {};\n\t\tconst dataModelEntityPath = getInvolvedDataModelObjects(table.getModel().getMetaModel().getContext(entitySetPath));\n\t\tcustomDataForColumns.customData.forEach(function (columnDef: any) {\n\t\t\tconst propertyInfo: ValueHelpTableColumn = {\n\t\t\t\tname: columnDef.path,\n\t\t\t\tlabel: columnDef.label,\n\t\t\t\tsortable: isSortableProperty(sortRestrictionsInfo, columnDef),\n\t\t\t\tfilterable: isFilterableProperty(filterRestrictionsInfo, columnDef),\n\t\t\t\tmaxConditions: getPropertyMaxConditions(filterRestrictionsInfo, columnDef),\n\t\t\t\ttypeConfig: isTypeFilterable(columnDef.$Type) ? table.getTypeUtil().getTypeConfig(columnDef.$Type) : undefined\n\t\t\t};\n\n\t\t\tconst dataModelPropertyPath = enhanceDataModelPath(dataModelEntityPath, columnDef.path);\n\t\t\tconst property = dataModelPropertyPath.targetObject as Property;\n\t\t\tif (property) {\n\t\t\t\tconst targetPropertyPath = getTargetObjectPath(dataModelPropertyPath, true);\n\t\t\t\tlet typeConfig;\n\t\t\t\tif (isTypeFilterable(property.type as keyof typeof DefaultTypeForEdmType)) {\n\t\t\t\t\tconst propertyTypeConfig = fetchTypeConfig(property);\n\t\t\t\t\ttypeConfig =\n\t\t\t\t\t\tTypeUtil.getTypeConfig(\n\t\t\t\t\t\t\tpropertyTypeConfig.type ?? \"\",\n\t\t\t\t\t\t\tpropertyTypeConfig.formatOptions,\n\t\t\t\t\t\t\tpropertyTypeConfig.constraints\n\t\t\t\t\t\t) ?? table.getTypeUtil().getTypeConfig(columnDef.$Type);\n\t\t\t\t}\n\t\t\t\t//Check if there is an additional property linked to the property as a Unit, Currency, Timezone or textArrangement\n\t\t\t\tconst relatedPropertiesInfo = collectRelatedProperties(dataModelPropertyPath);\n\t\t\t\tconst relatedPropertyPaths: string[] = Object.keys(relatedPropertiesInfo);\n\n\t\t\t\tif (relatedPropertyPaths.length) {\n\t\t\t\t\tpropertyInfo.propertyInfos = relatedPropertyPaths;\n\t\t\t\t\t//Complex properties must be hidden for sorting and filtering\n\t\t\t\t\tpropertyInfo.sortable = false;\n\t\t\t\t\tpropertyInfo.filterable = false;\n\t\t\t\t\t// Collect information of related columns to be created.\n\t\t\t\t\trelatedPropertyPaths.forEach((path) => {\n\t\t\t\t\t\tpropertiesToBeCreated[path] = relatedPropertiesInfo[path];\n\t\t\t\t\t});\n\t\t\t\t\t// Also add property for the inOut Parameters on the ValueHelp when textArrangement is set to #TextOnly\n\t\t\t\t\t// It will not be linked to the complex Property (BCP 2270141154)\n\t\t\t\t\tif (!relatedPropertyPaths.find((path) => relatedPropertiesInfo[path] === property)) {\n\t\t\t\t\t\tpropertiesToBeCreated[targetPropertyPath] = property;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpropertyInfo.path = columnDef.path;\n\t\t\t\t}\n\t\t\t\tpropertyInfo.typeConfig = propertyInfo.typeConfig ? typeConfig : undefined;\n\t\t\t} else {\n\t\t\t\tpropertyInfo.path = columnDef.path;\n\t\t\t}\n\t\t\tproperties.push(propertyInfo);\n\t\t});\n\t\tconst relatedColumns = createRelatedProperties(propertiesToBeCreated, properties, sortRestrictionsInfo, filterRestrictionsInfo);\n\t\treturn properties.concat(relatedColumns);\n\t});\n};\n\n/**\n * Updates the binding info with the relevant path and model from the metadata.\n *\n * @param oMDCTable The MDCTable instance\n * @param oBindingInfo The bindingInfo of the table\n */\nODataTableDelegate.updateBindingInfo = function (oMDCTable: any, oBindingInfo: any) {\n\tTableDelegate.updateBindingInfo.apply(this, [oMDCTable, oBindingInfo]);\n\tif (!oMDCTable) {\n\t\treturn;\n\t}\n\n\tconst oMetadataInfo = oMDCTable.getDelegate().payload;\n\n\tif (oMetadataInfo && oBindingInfo) {\n\t\toBindingInfo.path = oBindingInfo.path || oMetadataInfo.collectionPath || `/${oMetadataInfo.collectionName}`;\n\t\toBindingInfo.model = oBindingInfo.model || oMetadataInfo.model;\n\t}\n\n\tif (!oBindingInfo) {\n\t\toBindingInfo = {};\n\t}\n\n\tconst oFilter = Core.byId(oMDCTable.getFilter()) as any,\n\t\tbFilterEnabled = oMDCTable.isFilteringEnabled();\n\tlet mConditions: any;\n\tlet oInnerFilterInfo, oOuterFilterInfo: any;\n\tconst aFilters = [];\n\tconst tableProperties = MacrosDelegateUtil.getCachedProperties(oMDCTable);\n\n\t//TODO: consider a mechanism ('FilterMergeUtil' or enhance 'FilterUtil') to allow the connection between different filters)\n\tif (bFilterEnabled) {\n\t\tmConditions = oMDCTable.getConditions();\n\t\toInnerFilterInfo = FilterUtil.getFilterInfo(oMDCTable, mConditions, tableProperties!, []) as any;\n\t\tif (oInnerFilterInfo.filters) {\n\t\t\taFilters.push(oInnerFilterInfo.filters);\n\t\t}\n\t}\n\n\tif (oFilter) {\n\t\tmConditions = oFilter.getConditions();\n\t\tif (mConditions) {\n\t\t\tconst aParameterNames = DelegateUtil.getParameterNames(oFilter);\n\t\t\t// The table properties needs to updated with the filter field if no Selectionfierlds are annotated and not part as value help parameter\n\t\t\tODataTableDelegate._updatePropertyInfo(tableProperties, oMDCTable, mConditions, oMetadataInfo);\n\t\t\toOuterFilterInfo = FilterUtil.getFilterInfo(oFilter, mConditions, tableProperties!, aParameterNames);\n\n\t\t\tif (oOuterFilterInfo.filters) {\n\t\t\t\taFilters.push(oOuterFilterInfo.filters);\n\t\t\t}\n\n\t\t\tconst sParameterPath = DelegateUtil.getParametersInfo(oFilter, mConditions);\n\t\t\tif (sParameterPath) {\n\t\t\t\toBindingInfo.path = sParameterPath;\n\t\t\t}\n\t\t}\n\n\t\t// get the basic search\n\t\toBindingInfo.parameters.$search = CommonUtils.normalizeSearchTerm(oFilter.getSearch()) || undefined;\n\t}\n\n\tthis._applyDefaultSorting(oBindingInfo, oMDCTable.getDelegate().payload);\n\t// add select to oBindingInfo (BCP 2170163012)\n\toBindingInfo.parameters.$select = tableProperties?.reduce(function (sQuery: string, oProperty: any) {\n\t\t// Navigation properties (represented by X/Y) should not be added to $select.\n\t\t// ToDo : They should be added as $expand=X($select=Y) instead\n\t\tif (oProperty.path && oProperty.path.indexOf(\"/\") === -1) {\n\t\t\tsQuery = sQuery ? `${sQuery},${oProperty.path}` : oProperty.path;\n\t\t}\n\t\treturn sQuery;\n\t}, \"\");\n\n\t// Add $count\n\toBindingInfo.parameters.$count = true;\n\n\t//If the entity is DraftEnabled add a DraftFilter\n\tif (ModelHelper.isDraftSupported(oMDCTable.getModel().getMetaModel(), oBindingInfo.path)) {\n\t\taFilters.push(new Filter(\"IsActiveEntity\", FilterOperator.EQ, true));\n\t}\n\n\toBindingInfo.filters = new Filter(aFilters, true);\n};\n\nODataTableDelegate.getTypeUtil = function (/*oPayload*/) {\n\treturn TypeUtil;\n};\n\n/**\n * Get table Model.\n *\n * @param table Instance of the MDCtable\n * @returns Model\n */\nODataTableDelegate._getModel = async function (table: Table): Promise<Model> {\n\tconst metadataInfo = (table.getDelegate() as any).payload;\n\tlet model: Model = table.getModel(metadataInfo.model)!;\n\tif (!model) {\n\t\tawait new Promise((resolve) => {\n\t\t\ttable.attachEventOnce(\"modelContextChange\", resolve);\n\t\t});\n\t\tmodel = table.getModel(metadataInfo.model)!;\n\t}\n\treturn model;\n};\n\n/**\n * Applies a default sort order if needed. This is only the case if the request is not a $search request\n * (means the parameter $search of the bindingInfo is undefined) and if not already a sort order is set,\n * e.g. via presentation variant or manual by the user.\n *\n * @param oBindingInfo The bindingInfo of the table\n * @param oPayload The payload of the TableDelegate\n */\nODataTableDelegate._applyDefaultSorting = function (oBindingInfo: any, oPayload: any) {\n\tif (oBindingInfo.parameters && oBindingInfo.parameters.$search == undefined && oBindingInfo.sorter && oBindingInfo.sorter.length == 0) {\n\t\tconst defaultSortPropertyName = oPayload ? oPayload.defaultSortPropertyName : undefined;\n\t\tif (defaultSortPropertyName) {\n\t\t\toBindingInfo.sorter.push(new Sorter(defaultSortPropertyName, false));\n\t\t}\n\t}\n};\n\n/**\n * Updates the table properties with filter field infos.\n *\n * @param aTableProperties Array with table properties\n * @param oMDCTable The MDCTable instance\n * @param mConditions The conditions of the table\n * @param oMetadataInfo The metadata info of the filter field\n */\nODataTableDelegate._updatePropertyInfo = function (\n\taTableProperties: any[],\n\toMDCTable: MDCTable,\n\tmConditions: Record<string, any>,\n\toMetadataInfo: any\n) {\n\tconst aConditionKey = Object.keys(mConditions),\n\t\toMetaModel = (oMDCTable.getModel() as ODataModel).getMetaModel()!;\n\taConditionKey.forEach(function (conditionKey: any) {\n\t\tif (\n\t\t\taTableProperties.findIndex(function (tableProperty: any) {\n\t\t\t\treturn tableProperty.path === conditionKey;\n\t\t\t}) === -1\n\t\t) {\n\t\t\tconst oColumnDef = {\n\t\t\t\tpath: conditionKey,\n\t\t\t\ttypeConfig: oMDCTable\n\t\t\t\t\t.getTypeUtil()\n\t\t\t\t\t.getTypeConfig(oMetaModel.getObject(`/${oMetadataInfo.collectionName}/${conditionKey}`).$Type)\n\t\t\t};\n\t\t\taTableProperties.push(oColumnDef);\n\t\t}\n\t});\n};\n\nODataTableDelegate.updateBinding = function (oTable: any, oBindingInfo: any, oBinding: any) {\n\tlet bNeedManualRefresh = false;\n\tconst oInternalBindingContext = oTable.getBindingContext(\"internal\");\n\tconst sManualUpdatePropertyKey = \"pendingManualBindingUpdate\";\n\tconst bPendingManualUpdate = oInternalBindingContext?.getProperty(sManualUpdatePropertyKey);\n\tlet oRowBinding = oTable.getRowBinding();\n\n\t//oBinding=null means that a rebinding needs to be forced via updateBinding in mdc TableDelegate\n\tTableDelegate.updateBinding.apply(ODataTableDelegate, [oTable, oBindingInfo, oBinding]);\n\t//get row binding after rebind from TableDelegate.updateBinding in case oBinding was null\n\tif (!oRowBinding) {\n\t\toRowBinding = oTable.getRowBinding();\n\t}\n\tif (oRowBinding) {\n\t\t/**\n\t\t * Manual refresh if filters are not changed by binding.refresh() since updating the bindingInfo\n\t\t * is not enough to trigger a batch request.\n\t\t * Removing columns creates one batch request that was not executed before\n\t\t */\n\t\tconst oldFilters = oRowBinding.getFilters(\"Application\");\n\t\tbNeedManualRefresh =\n\t\t\tdeepEqual(oBindingInfo.filters, oldFilters[0]) &&\n\t\t\toRowBinding.getQueryOptionsFromParameters().$search === oBindingInfo.parameters.$search &&\n\t\t\t!bPendingManualUpdate;\n\t}\n\n\tif (bNeedManualRefresh && oTable.getFilter()) {\n\t\toInternalBindingContext?.setProperty(sManualUpdatePropertyKey, true);\n\t\toRowBinding\n\t\t\t.requestRefresh(oRowBinding.getGroupId())\n\t\t\t.finally(function () {\n\t\t\t\toInternalBindingContext?.setProperty(sManualUpdatePropertyKey, false);\n\t\t\t})\n\t\t\t.catch(function (oError: any) {\n\t\t\t\tLog.error(\"Error while refreshing a filterBar VH table\", oError);\n\t\t\t});\n\t}\n\toTable.fireEvent(\"bindingUpdated\");\n\t//no need to check for semantic targets here since we are in a VH and don't want to allow further navigation\n};\n\n/**\n * Creates a simple property for each identified complex property.\n *\n * @param propertiesToBeCreated Identified properties.\n * @param existingColumns The list of columns created for properties defined on the Value List.\n * @param sortRestrictionsInfo An object containing the sort restriction information\n * @param filterRestrictionsInfo An object containing the filter restriction information\n * @returns The array of properties created.\n * @private\n */\nfunction createRelatedProperties(\n\tpropertiesToBeCreated: Record<string, Property>,\n\texistingColumns: ValueHelpTableColumn[],\n\tsortRestrictionsInfo: SortRestrictionsInfoType,\n\tfilterRestrictionsInfo: any\n): ValueHelpTableColumn[] {\n\tconst relatedPropertyNameMap: Record<string, string> = {},\n\t\trelatedColumns: ValueHelpTableColumn[] = [];\n\tObject.keys(propertiesToBeCreated).forEach((path) => {\n\t\tconst property = propertiesToBeCreated[path],\n\t\t\trelatedColumn = existingColumns.find((column) => column.path === path); // Complex properties doesn't get path so only simple column are found\n\t\tif (!relatedColumn) {\n\t\t\tconst newName = `Property::${path}`;\n\t\t\trelatedPropertyNameMap[path] = newName;\n\t\t\tconst valueHelpTableColumn: ValueHelpTableColumn = {\n\t\t\t\tname: newName,\n\t\t\t\tlabel: getLabel(property),\n\t\t\t\tpath: path,\n\t\t\t\tsortable: isSortableProperty(sortRestrictionsInfo, property),\n\t\t\t\tfilterable: isFilterableProperty(filterRestrictionsInfo, property)\n\t\t\t};\n\t\t\tvalueHelpTableColumn.maxConditions = getPropertyMaxConditions(filterRestrictionsInfo, valueHelpTableColumn);\n\t\t\tif (isTypeFilterable(property.type as keyof typeof DefaultTypeForEdmType)) {\n\t\t\t\tconst propertyTypeConfig = fetchTypeConfig(property);\n\t\t\t\tvalueHelpTableColumn.typeConfig = TypeUtil.getTypeConfig(\n\t\t\t\t\tpropertyTypeConfig.type ?? \"\",\n\t\t\t\t\tpropertyTypeConfig.formatOptions,\n\t\t\t\t\tpropertyTypeConfig.constraints\n\t\t\t\t);\n\t\t\t}\n\t\t\trelatedColumns.push(valueHelpTableColumn);\n\t\t}\n\t});\n\t// The property 'name' has been prefixed with 'Property::' for uniqueness.\n\t// Update the same in other propertyInfos[] references which point to this property.\n\texistingColumns.forEach((column) => {\n\t\tif (column.propertyInfos) {\n\t\t\tcolumn.propertyInfos = column.propertyInfos?.map((columnName) => relatedPropertyNameMap[columnName] ?? columnName);\n\t\t}\n\t});\n\treturn relatedColumns;\n}\n\n/**\n * Identifies the maxConditions for a given property.\n *\n * @param filterRestrictionsInfo The filter restriction information from the restriction annotation.\n * @param property The target property.\n * @returns `-1` or `1` if the property is a MultiValueFilterExpression.\n * @private\n */\n\nfunction getPropertyMaxConditions(filterRestrictionsInfo: any, property: ValueHelpTableColumn | Property): number {\n\tconst propertyPath = getPath(property);\n\treturn filterRestrictionsInfo.propertyInfo?.hasOwnProperty(propertyPath) &&\n\t\tpropertyPath &&\n\t\tisMultiValueFilterExpression(filterRestrictionsInfo.propertyInfo[propertyPath])\n\t\t? -1\n\t\t: 1;\n}\n\n/**\n * Identifies the additional property which references to the unit, timezone, textArrangement or currency.\n *\n * @param dataModelPropertyPath The model object path of the property.\n * @returns The additional property.\n * @private\n */\nfunction getAdditionalProperty(dataModelPropertyPath: DataModelObjectPath): DataModelObjectPath | undefined {\n\tconst property = dataModelPropertyPath.targetObject;\n\tconst additionalPropertyPath =\n\t\tgetAssociatedTextPropertyPath(property) ||\n\t\tgetAssociatedCurrencyPropertyPath(property) ||\n\t\tgetAssociatedUnitPropertyPath(property) ||\n\t\tgetAssociatedTimezonePropertyPath(property);\n\tif (!additionalPropertyPath) {\n\t\treturn undefined;\n\t}\n\tconst dataModelAdditionalProperty = enhanceDataModelPath(dataModelPropertyPath, additionalPropertyPath);\n\n\t//Additional Property could refer to a navigation property, keep the name and path as navigation property\n\tconst additionalProperty = dataModelAdditionalProperty.targetObject;\n\tif (!additionalProperty) {\n\t\treturn undefined;\n\t}\n\treturn dataModelAdditionalProperty;\n}\n\nexport default ODataTableDelegate;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;EAqDA;AACA;AACA;EACA,MAAMA,kBAAkB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,aAAa,CAAC;;EAE3D;AACA;AACA;AACA;AACA;AACA;EACAH,kBAAkB,CAACI,eAAe,GAAG,gBAAgBC,KAAY,EAAyB;IACzF,MAAMC,KAAK,GAAG,MAAM,IAAI,CAACC,SAAS,CAACF,KAAK,CAAC;IACzC,MAAMG,UAAU,GAAG,MAAM,IAAI,CAACC,oBAAoB,CAACJ,KAAK,EAAEC,KAAK,CAAC;IAChEN,kBAAkB,CAACU,4BAA4B,CAACL,KAAK,CAAC;IACtDM,kBAAkB,CAACC,mBAAmB,CAACP,KAAK,EAAEG,UAAU,CAAC;IACxDH,KAAK,CAACQ,iBAAiB,CAAC,UAAU,CAAC,CAAaC,WAAW,CAAC,0BAA0B,EAAE,IAAI,CAAC;IAC9F,OAAON,UAAU;EAClB,CAAC;EAEDR,kBAAkB,CAACU,4BAA4B,GAAG,UAAUL,KAAY,EAAE;IACzE,IAAIU,MAA4B,GAAGV,KAAK;IACxC,OAAOU,MAAM,IAAI,CAACA,MAAM,CAACC,GAAG,CAAC,6BAA6B,CAAC,EAAE;MAC5DD,MAAM,GAAIA,MAAM,CAAmBE,SAAS,EAAE;IAC/C;IAEA,MAAMC,aAAa,GAAGb,KAAK,CAACc,QAAQ,CAAC,UAAU,CAAc;IAE7D,IAAIJ,MAAM,IAAIG,aAAa,EAAE;MAC5B,MAAME,sBAAsB,GAAGL,MAAM,CAACF,iBAAiB,CAAC,UAAU,CAAC;MACnE,IAAIQ,6BAA6B;MACjC,IAAID,sBAAsB,EAAE;QAC3BC,6BAA6B,GAAGD,sBAAsB,CAACE,OAAO,EAAE,GAAI,eAAcP,MAAM,CAACQ,KAAK,EAAG,SAAQ;MAC1G,CAAC,MAAM;QACNF,6BAA6B,GAAI,mBAAkBhB,KAAK,CAACkB,KAAK,EAAG,EAAC;QAClEL,aAAa,CAACJ,WAAW,CAAC,iBAAiB,EAAE;UAAE,GAAGI,aAAa,CAACM,WAAW,CAAC,iBAAiB;QAAE,CAAC,CAAC;MAClG;MACA,MAAMC,yBAAyB,GAAGP,aAAa,CAACQ,WAAW,CAACL,6BAA6B,CAAC,CAACM,eAAe,EAAE;MAC5GtB,KAAK,CAACuB,iBAAiB,CAACH,yBAAyB,EAAG,UAAU,CAAC;IAChE;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAASI,wBAAwB,CAACC,qBAA0C,EAAE;IAC7E,MAAMC,+BAA+B,GAAGC,qBAAqB,CAACF,qBAAqB,CAAC;IACpF,MAAMG,iBAAqC,GAAG,CAAC,CAAC;IAChD,IAAIF,+BAA+B,aAA/BA,+BAA+B,eAA/BA,+BAA+B,CAAEG,YAAY,EAAE;MAAA;MAClD,MAAMC,kBAAkB,GAAGJ,+BAA+B,CAACG,YAAY;MACvE,MAAME,sBAAsB,GAAGC,mBAAmB,CAACN,+BAA+B,EAAE,IAAI,CAAC;MAEzF,MAAMO,QAAQ,GAAGR,qBAAqB,CAACI,YAAwB;MAC/D,MAAMK,YAAY,GAAGF,mBAAmB,CAACP,qBAAqB,EAAE,IAAI,CAAC;MAErE,MAAMU,cAAc,4BAAGF,QAAQ,CAACG,WAAW,oFAApB,sBAAsBC,MAAM,2DAA5B,uBAA8BC,IAAI;QACxDC,eAAe,GAAGJ,cAAc,aAAdA,cAAc,gDAAdA,cAAc,CAAEC,WAAW,oFAA3B,sBAA6BI,EAAE,qFAA/B,uBAAiCC,eAAe,2DAAhD,uBAAkDC,QAAQ,EAAE;QAC9EC,WAAW,GAAGR,cAAc,IAAII,eAAe,IAAIK,cAAc,CAACX,QAAQ,CAAC;MAE5E,IAAIU,WAAW,KAAK,aAAa,EAAE;QAClCf,iBAAiB,CAACG,sBAAsB,CAAC,GAAGD,kBAAkB;MAC/D,CAAC,MAAM,IAAKa,WAAW,IAAIA,WAAW,KAAK,OAAO,IAAK,CAACR,cAAc,EAAE;QACvEP,iBAAiB,CAACM,YAAY,CAAC,GAAGD,QAAQ;QAC1CL,iBAAiB,CAACG,sBAAsB,CAAC,GAAGD,kBAAkB;MAC/D;IACD;IACA,OAAOF,iBAAiB;EACzB;EAEAjC,kBAAkB,CAACS,oBAAoB,GAAG,UAAUJ,KAAU,EAAEC,KAAU,EAAE;IAC3E,MAAM4C,YAAY,GAAG7C,KAAK,CAAC8C,WAAW,EAAE,CAACC,OAAO;IAChD,MAAM5C,UAAkC,GAAG,EAAE;IAC7C,MAAM6C,aAAa,GAAI,IAAGH,YAAY,CAACI,cAAe,EAAC;IACvD,MAAMC,SAAS,GAAGjD,KAAK,CAACkD,YAAY,EAAE;IAEtC,OAAOD,SAAS,CAACE,aAAa,CAAE,GAAEJ,aAAc,GAAE,CAAC,CAACK,IAAI,CAAC,UAAUC,oBAAyB,EAAE;MAC7F,MAAMC,oBAAoB,GAAGC,uBAAuB,CAACF,oBAAoB,CAAC;MAC1E,MAAMG,kBAAkB,GAAGH,oBAAoB,CAAC,+CAA+C,CAAC;MAChG,MAAMI,sBAAsB,GAAGC,yBAAyB,CAACF,kBAAkB,CAAC;MAE5E,MAAMG,oBAAoB,GAAGtD,kBAAkB,CAACuD,aAAa,CAAC7D,KAAK,EAAE,SAAS,CAAC;MAC/E,MAAM8D,qBAA+C,GAAG,CAAC,CAAC;MAC1D,MAAMC,mBAAmB,GAAGC,2BAA2B,CAAChE,KAAK,CAACc,QAAQ,EAAE,CAACqC,YAAY,EAAE,CAACc,UAAU,CAACjB,aAAa,CAAC,CAAC;MAClHY,oBAAoB,CAACM,UAAU,CAACC,OAAO,CAAC,UAAUC,SAAc,EAAE;QACjE,MAAMC,YAAkC,GAAG;UAC1CC,IAAI,EAAEF,SAAS,CAACG,IAAI;UACpBC,KAAK,EAAEJ,SAAS,CAACI,KAAK;UACtBC,QAAQ,EAAEC,kBAAkB,CAACnB,oBAAoB,EAAEa,SAAS,CAAC;UAC7DO,UAAU,EAAEC,oBAAoB,CAAClB,sBAAsB,EAAEU,SAAS,CAAC;UACnES,aAAa,EAAEC,wBAAwB,CAACpB,sBAAsB,EAAEU,SAAS,CAAC;UAC1EW,UAAU,EAAEC,gBAAgB,CAACZ,SAAS,CAACa,KAAK,CAAC,GAAGjF,KAAK,CAACkF,WAAW,EAAE,CAACC,aAAa,CAACf,SAAS,CAACa,KAAK,CAAC,GAAGG;QACtG,CAAC;QAED,MAAM3D,qBAAqB,GAAG4D,oBAAoB,CAACtB,mBAAmB,EAAEK,SAAS,CAACG,IAAI,CAAC;QACvF,MAAMtC,QAAQ,GAAGR,qBAAqB,CAACI,YAAwB;QAC/D,IAAII,QAAQ,EAAE;UACb,MAAMqD,kBAAkB,GAAGtD,mBAAmB,CAACP,qBAAqB,EAAE,IAAI,CAAC;UAC3E,IAAIsD,UAAU;UACd,IAAIC,gBAAgB,CAAC/C,QAAQ,CAACsD,IAAI,CAAuC,EAAE;YAC1E,MAAMC,kBAAkB,GAAGC,eAAe,CAACxD,QAAQ,CAAC;YACpD8C,UAAU,GACTW,QAAQ,CAACP,aAAa,CACrBK,kBAAkB,CAACD,IAAI,IAAI,EAAE,EAC7BC,kBAAkB,CAACG,aAAa,EAChCH,kBAAkB,CAACI,WAAW,CAC9B,IAAI5F,KAAK,CAACkF,WAAW,EAAE,CAACC,aAAa,CAACf,SAAS,CAACa,KAAK,CAAC;UACzD;UACA;UACA,MAAMY,qBAAqB,GAAGrE,wBAAwB,CAACC,qBAAqB,CAAC;UAC7E,MAAMqE,oBAA8B,GAAGlG,MAAM,CAACmG,IAAI,CAACF,qBAAqB,CAAC;UAEzE,IAAIC,oBAAoB,CAACE,MAAM,EAAE;YAChC3B,YAAY,CAAC4B,aAAa,GAAGH,oBAAoB;YACjD;YACAzB,YAAY,CAACI,QAAQ,GAAG,KAAK;YAC7BJ,YAAY,CAACM,UAAU,GAAG,KAAK;YAC/B;YACAmB,oBAAoB,CAAC3B,OAAO,CAAEI,IAAI,IAAK;cACtCT,qBAAqB,CAACS,IAAI,CAAC,GAAGsB,qBAAqB,CAACtB,IAAI,CAAC;YAC1D,CAAC,CAAC;YACF;YACA;YACA,IAAI,CAACuB,oBAAoB,CAACI,IAAI,CAAE3B,IAAI,IAAKsB,qBAAqB,CAACtB,IAAI,CAAC,KAAKtC,QAAQ,CAAC,EAAE;cACnF6B,qBAAqB,CAACwB,kBAAkB,CAAC,GAAGrD,QAAQ;YACrD;UACD,CAAC,MAAM;YACNoC,YAAY,CAACE,IAAI,GAAGH,SAAS,CAACG,IAAI;UACnC;UACAF,YAAY,CAACU,UAAU,GAAGV,YAAY,CAACU,UAAU,GAAGA,UAAU,GAAGK,SAAS;QAC3E,CAAC,MAAM;UACNf,YAAY,CAACE,IAAI,GAAGH,SAAS,CAACG,IAAI;QACnC;QACApE,UAAU,CAACgG,IAAI,CAAC9B,YAAY,CAAC;MAC9B,CAAC,CAAC;MACF,MAAM+B,cAAc,GAAGC,uBAAuB,CAACvC,qBAAqB,EAAE3D,UAAU,EAAEoD,oBAAoB,EAAEG,sBAAsB,CAAC;MAC/H,OAAOvD,UAAU,CAACmG,MAAM,CAACF,cAAc,CAAC;IACzC,CAAC,CAAC;EACH,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;EACAzG,kBAAkB,CAAC4G,iBAAiB,GAAG,UAAUC,SAAc,EAAEC,YAAiB,EAAE;IACnF3G,aAAa,CAACyG,iBAAiB,CAACG,KAAK,CAAC,IAAI,EAAE,CAACF,SAAS,EAAEC,YAAY,CAAC,CAAC;IACtE,IAAI,CAACD,SAAS,EAAE;MACf;IACD;IAEA,MAAMG,aAAa,GAAGH,SAAS,CAAC1D,WAAW,EAAE,CAACC,OAAO;IAErD,IAAI4D,aAAa,IAAIF,YAAY,EAAE;MAClCA,YAAY,CAAClC,IAAI,GAAGkC,YAAY,CAAClC,IAAI,IAAIoC,aAAa,CAACC,cAAc,IAAK,IAAGD,aAAa,CAAC1D,cAAe,EAAC;MAC3GwD,YAAY,CAACxG,KAAK,GAAGwG,YAAY,CAACxG,KAAK,IAAI0G,aAAa,CAAC1G,KAAK;IAC/D;IAEA,IAAI,CAACwG,YAAY,EAAE;MAClBA,YAAY,GAAG,CAAC,CAAC;IAClB;IAEA,MAAMI,OAAO,GAAGC,IAAI,CAACC,IAAI,CAACP,SAAS,CAACQ,SAAS,EAAE,CAAQ;MACtDC,cAAc,GAAGT,SAAS,CAACU,kBAAkB,EAAE;IAChD,IAAIC,WAAgB;IACpB,IAAIC,gBAAgB,EAAEC,gBAAqB;IAC3C,MAAMC,QAAQ,GAAG,EAAE;IACnB,MAAMC,eAAe,GAAGjH,kBAAkB,CAACkH,mBAAmB,CAAChB,SAAS,CAAC;;IAEzE;IACA,IAAIS,cAAc,EAAE;MACnBE,WAAW,GAAGX,SAAS,CAACiB,aAAa,EAAE;MACvCL,gBAAgB,GAAGM,UAAU,CAACC,aAAa,CAACnB,SAAS,EAAEW,WAAW,EAAEI,eAAe,EAAG,EAAE,CAAQ;MAChG,IAAIH,gBAAgB,CAACQ,OAAO,EAAE;QAC7BN,QAAQ,CAACnB,IAAI,CAACiB,gBAAgB,CAACQ,OAAO,CAAC;MACxC;IACD;IAEA,IAAIf,OAAO,EAAE;MACZM,WAAW,GAAGN,OAAO,CAACY,aAAa,EAAE;MACrC,IAAIN,WAAW,EAAE;QAChB,MAAMU,eAAe,GAAGC,YAAY,CAACC,iBAAiB,CAAClB,OAAO,CAAC;QAC/D;QACAlH,kBAAkB,CAACqI,mBAAmB,CAACT,eAAe,EAAEf,SAAS,EAAEW,WAAW,EAAER,aAAa,CAAC;QAC9FU,gBAAgB,GAAGK,UAAU,CAACC,aAAa,CAACd,OAAO,EAAEM,WAAW,EAAEI,eAAe,EAAGM,eAAe,CAAC;QAEpG,IAAIR,gBAAgB,CAACO,OAAO,EAAE;UAC7BN,QAAQ,CAACnB,IAAI,CAACkB,gBAAgB,CAACO,OAAO,CAAC;QACxC;QAEA,MAAMK,cAAc,GAAGH,YAAY,CAACI,iBAAiB,CAACrB,OAAO,EAAEM,WAAW,CAAC;QAC3E,IAAIc,cAAc,EAAE;UACnBxB,YAAY,CAAClC,IAAI,GAAG0D,cAAc;QACnC;MACD;;MAEA;MACAxB,YAAY,CAAC0B,UAAU,CAACC,OAAO,GAAGC,WAAW,CAACC,mBAAmB,CAACzB,OAAO,CAAC0B,SAAS,EAAE,CAAC,IAAInD,SAAS;IACpG;IAEA,IAAI,CAACoD,oBAAoB,CAAC/B,YAAY,EAAED,SAAS,CAAC1D,WAAW,EAAE,CAACC,OAAO,CAAC;IACxE;IACA0D,YAAY,CAAC0B,UAAU,CAACM,OAAO,GAAGlB,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEmB,MAAM,CAAC,UAAUC,MAAc,EAAEC,SAAc,EAAE;MACnG;MACA;MACA,IAAIA,SAAS,CAACrE,IAAI,IAAIqE,SAAS,CAACrE,IAAI,CAACsE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;QACzDF,MAAM,GAAGA,MAAM,GAAI,GAAEA,MAAO,IAAGC,SAAS,CAACrE,IAAK,EAAC,GAAGqE,SAAS,CAACrE,IAAI;MACjE;MACA,OAAOoE,MAAM;IACd,CAAC,EAAE,EAAE,CAAC;;IAEN;IACAlC,YAAY,CAAC0B,UAAU,CAACW,MAAM,GAAG,IAAI;;IAErC;IACA,IAAIC,WAAW,CAACC,gBAAgB,CAACxC,SAAS,CAAC1F,QAAQ,EAAE,CAACqC,YAAY,EAAE,EAAEsD,YAAY,CAAClC,IAAI,CAAC,EAAE;MACzF+C,QAAQ,CAACnB,IAAI,CAAC,IAAI8C,MAAM,CAAC,gBAAgB,EAAEC,cAAc,CAACC,EAAE,EAAE,IAAI,CAAC,CAAC;IACrE;IAEA1C,YAAY,CAACmB,OAAO,GAAG,IAAIqB,MAAM,CAAC3B,QAAQ,EAAE,IAAI,CAAC;EAClD,CAAC;EAED3H,kBAAkB,CAACuF,WAAW,GAAG,SAAU;EAAA,GAAc;IACxD,OAAOQ,QAAQ;EAChB,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;EACA/F,kBAAkB,CAACO,SAAS,GAAG,gBAAgBF,KAAY,EAAkB;IAC5E,MAAM6C,YAAY,GAAI7C,KAAK,CAAC8C,WAAW,EAAE,CAASC,OAAO;IACzD,IAAI9C,KAAY,GAAGD,KAAK,CAACc,QAAQ,CAAC+B,YAAY,CAAC5C,KAAK,CAAE;IACtD,IAAI,CAACA,KAAK,EAAE;MACX,MAAM,IAAImJ,OAAO,CAAEC,OAAO,IAAK;QAC9BrJ,KAAK,CAACsJ,eAAe,CAAC,oBAAoB,EAAED,OAAO,CAAC;MACrD,CAAC,CAAC;MACFpJ,KAAK,GAAGD,KAAK,CAACc,QAAQ,CAAC+B,YAAY,CAAC5C,KAAK,CAAE;IAC5C;IACA,OAAOA,KAAK;EACb,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAN,kBAAkB,CAAC6I,oBAAoB,GAAG,UAAU/B,YAAiB,EAAE8C,QAAa,EAAE;IACrF,IAAI9C,YAAY,CAAC0B,UAAU,IAAI1B,YAAY,CAAC0B,UAAU,CAACC,OAAO,IAAIhD,SAAS,IAAIqB,YAAY,CAAC+C,MAAM,IAAI/C,YAAY,CAAC+C,MAAM,CAACxD,MAAM,IAAI,CAAC,EAAE;MACtI,MAAMyD,uBAAuB,GAAGF,QAAQ,GAAGA,QAAQ,CAACE,uBAAuB,GAAGrE,SAAS;MACvF,IAAIqE,uBAAuB,EAAE;QAC5BhD,YAAY,CAAC+C,MAAM,CAACrD,IAAI,CAAC,IAAIuD,MAAM,CAACD,uBAAuB,EAAE,KAAK,CAAC,CAAC;MACrE;IACD;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA9J,kBAAkB,CAACqI,mBAAmB,GAAG,UACxC2B,gBAAuB,EACvBnD,SAAmB,EACnBW,WAAgC,EAChCR,aAAkB,EACjB;IACD,MAAMiD,aAAa,GAAGhK,MAAM,CAACmG,IAAI,CAACoB,WAAW,CAAC;MAC7C0C,UAAU,GAAIrD,SAAS,CAAC1F,QAAQ,EAAE,CAAgBqC,YAAY,EAAG;IAClEyG,aAAa,CAACzF,OAAO,CAAC,UAAU2F,YAAiB,EAAE;MAClD,IACCH,gBAAgB,CAACI,SAAS,CAAC,UAAUC,aAAkB,EAAE;QACxD,OAAOA,aAAa,CAACzF,IAAI,KAAKuF,YAAY;MAC3C,CAAC,CAAC,KAAK,CAAC,CAAC,EACR;QACD,MAAMG,UAAU,GAAG;UAClB1F,IAAI,EAAEuF,YAAY;UAClB/E,UAAU,EAAEyB,SAAS,CACnBtB,WAAW,EAAE,CACbC,aAAa,CAAC0E,UAAU,CAACK,SAAS,CAAE,IAAGvD,aAAa,CAAC1D,cAAe,IAAG6G,YAAa,EAAC,CAAC,CAAC7E,KAAK;QAC/F,CAAC;QACD0E,gBAAgB,CAACxD,IAAI,CAAC8D,UAAU,CAAC;MAClC;IACD,CAAC,CAAC;EACH,CAAC;EAEDtK,kBAAkB,CAACwK,aAAa,GAAG,UAAUC,MAAW,EAAE3D,YAAiB,EAAE4D,QAAa,EAAE;IAC3F,IAAIC,kBAAkB,GAAG,KAAK;IAC9B,MAAMC,uBAAuB,GAAGH,MAAM,CAAC5J,iBAAiB,CAAC,UAAU,CAAC;IACpE,MAAMgK,wBAAwB,GAAG,4BAA4B;IAC7D,MAAMC,oBAAoB,GAAGF,uBAAuB,aAAvBA,uBAAuB,uBAAvBA,uBAAuB,CAAEpJ,WAAW,CAACqJ,wBAAwB,CAAC;IAC3F,IAAIE,WAAW,GAAGN,MAAM,CAACO,aAAa,EAAE;;IAExC;IACA7K,aAAa,CAACqK,aAAa,CAACzD,KAAK,CAAC/G,kBAAkB,EAAE,CAACyK,MAAM,EAAE3D,YAAY,EAAE4D,QAAQ,CAAC,CAAC;IACvF;IACA,IAAI,CAACK,WAAW,EAAE;MACjBA,WAAW,GAAGN,MAAM,CAACO,aAAa,EAAE;IACrC;IACA,IAAID,WAAW,EAAE;MAChB;AACF;AACA;AACA;AACA;MACE,MAAME,UAAU,GAAGF,WAAW,CAACG,UAAU,CAAC,aAAa,CAAC;MACxDP,kBAAkB,GACjBQ,SAAS,CAACrE,YAAY,CAACmB,OAAO,EAAEgD,UAAU,CAAC,CAAC,CAAC,CAAC,IAC9CF,WAAW,CAACK,6BAA6B,EAAE,CAAC3C,OAAO,KAAK3B,YAAY,CAAC0B,UAAU,CAACC,OAAO,IACvF,CAACqC,oBAAoB;IACvB;IAEA,IAAIH,kBAAkB,IAAIF,MAAM,CAACpD,SAAS,EAAE,EAAE;MAC7CuD,uBAAuB,aAAvBA,uBAAuB,uBAAvBA,uBAAuB,CAAE9J,WAAW,CAAC+J,wBAAwB,EAAE,IAAI,CAAC;MACpEE,WAAW,CACTM,cAAc,CAACN,WAAW,CAACO,UAAU,EAAE,CAAC,CACxCC,OAAO,CAAC,YAAY;QACpBX,uBAAuB,aAAvBA,uBAAuB,uBAAvBA,uBAAuB,CAAE9J,WAAW,CAAC+J,wBAAwB,EAAE,KAAK,CAAC;MACtE,CAAC,CAAC,CACDW,KAAK,CAAC,UAAUC,MAAW,EAAE;QAC7BC,GAAG,CAACC,KAAK,CAAC,6CAA6C,EAAEF,MAAM,CAAC;MACjE,CAAC,CAAC;IACJ;IACAhB,MAAM,CAACmB,SAAS,CAAC,gBAAgB,CAAC;IAClC;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAASlF,uBAAuB,CAC/BvC,qBAA+C,EAC/C0H,eAAuC,EACvCjI,oBAA8C,EAC9CG,sBAA2B,EACF;IACzB,MAAM+H,sBAA8C,GAAG,CAAC,CAAC;MACxDrF,cAAsC,GAAG,EAAE;IAC5CxG,MAAM,CAACmG,IAAI,CAACjC,qBAAqB,CAAC,CAACK,OAAO,CAAEI,IAAI,IAAK;MACpD,MAAMtC,QAAQ,GAAG6B,qBAAqB,CAACS,IAAI,CAAC;QAC3CmH,aAAa,GAAGF,eAAe,CAACtF,IAAI,CAAEyF,MAAM,IAAKA,MAAM,CAACpH,IAAI,KAAKA,IAAI,CAAC,CAAC,CAAC;MACzE,IAAI,CAACmH,aAAa,EAAE;QACnB,MAAME,OAAO,GAAI,aAAYrH,IAAK,EAAC;QACnCkH,sBAAsB,CAAClH,IAAI,CAAC,GAAGqH,OAAO;QACtC,MAAMC,oBAA0C,GAAG;UAClDvH,IAAI,EAAEsH,OAAO;UACbpH,KAAK,EAAEsH,QAAQ,CAAC7J,QAAQ,CAAC;UACzBsC,IAAI,EAAEA,IAAI;UACVE,QAAQ,EAAEC,kBAAkB,CAACnB,oBAAoB,EAAEtB,QAAQ,CAAC;UAC5D0C,UAAU,EAAEC,oBAAoB,CAAClB,sBAAsB,EAAEzB,QAAQ;QAClE,CAAC;QACD4J,oBAAoB,CAAChH,aAAa,GAAGC,wBAAwB,CAACpB,sBAAsB,EAAEmI,oBAAoB,CAAC;QAC3G,IAAI7G,gBAAgB,CAAC/C,QAAQ,CAACsD,IAAI,CAAuC,EAAE;UAC1E,MAAMC,kBAAkB,GAAGC,eAAe,CAACxD,QAAQ,CAAC;UACpD4J,oBAAoB,CAAC9G,UAAU,GAAGW,QAAQ,CAACP,aAAa,CACvDK,kBAAkB,CAACD,IAAI,IAAI,EAAE,EAC7BC,kBAAkB,CAACG,aAAa,EAChCH,kBAAkB,CAACI,WAAW,CAC9B;QACF;QACAQ,cAAc,CAACD,IAAI,CAAC0F,oBAAoB,CAAC;MAC1C;IACD,CAAC,CAAC;IACF;IACA;IACAL,eAAe,CAACrH,OAAO,CAAEwH,MAAM,IAAK;MACnC,IAAIA,MAAM,CAAC1F,aAAa,EAAE;QAAA;QACzB0F,MAAM,CAAC1F,aAAa,4BAAG0F,MAAM,CAAC1F,aAAa,0DAApB,sBAAsB8F,GAAG,CAAEC,UAAU,IAAKP,sBAAsB,CAACO,UAAU,CAAC,IAAIA,UAAU,CAAC;MACnH;IACD,CAAC,CAAC;IACF,OAAO5F,cAAc;EACtB;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA,SAAStB,wBAAwB,CAACpB,sBAA2B,EAAEzB,QAAyC,EAAU;IAAA;IACjH,MAAMC,YAAY,GAAGjB,OAAO,CAACgB,QAAQ,CAAC;IACtC,OAAO,yBAAAyB,sBAAsB,CAACW,YAAY,kDAAnC,sBAAqC4H,cAAc,CAAC/J,YAAY,CAAC,IACvEA,YAAY,IACZgK,4BAA4B,CAACxI,sBAAsB,CAACW,YAAY,CAACnC,YAAY,CAAC,CAAC,GAC7E,CAAC,CAAC,GACF,CAAC;EACL;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAASP,qBAAqB,CAACF,qBAA0C,EAAmC;IAC3G,MAAMQ,QAAQ,GAAGR,qBAAqB,CAACI,YAAY;IACnD,MAAME,sBAAsB,GAC3BoK,6BAA6B,CAAClK,QAAQ,CAAC,IACvCmK,iCAAiC,CAACnK,QAAQ,CAAC,IAC3CoK,6BAA6B,CAACpK,QAAQ,CAAC,IACvCqK,iCAAiC,CAACrK,QAAQ,CAAC;IAC5C,IAAI,CAACF,sBAAsB,EAAE;MAC5B,OAAOqD,SAAS;IACjB;IACA,MAAMmH,2BAA2B,GAAGlH,oBAAoB,CAAC5D,qBAAqB,EAAEM,sBAAsB,CAAC;;IAEvG;IACA,MAAMD,kBAAkB,GAAGyK,2BAA2B,CAAC1K,YAAY;IACnE,IAAI,CAACC,kBAAkB,EAAE;MACxB,OAAOsD,SAAS;IACjB;IACA,OAAOmH,2BAA2B;EACnC;EAAC,OAEc5M,kBAAkB;AAAA"}},{"offset":{"line":20210,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","deepEqual","CommonUtils","FilterBar","MetaModelConverter","MetaModelFunction","ModelHelper","DataModelPathHelper","DisplayModeFormatter","PropertyHelper","EDM","TypeUtil","MacrosDelegateUtil","TableDelegateHelper","Core","TableDelegate","DelegateUtil","FilterUtil","Filter","FilterOperator","Sorter","isSortableProperty","isFilterableProperty","getPath","isTypeFilterable","getLabel","getAssociatedUnitPropertyPath","getAssociatedTimezonePropertyPath","getAssociatedTextPropertyPath","getAssociatedCurrencyPropertyPath","getDisplayMode","getTargetObjectPath","enhanceDataModelPath","isMultiValueFilterExpression","getSortRestrictionsInfo","getFilterRestrictionsInfo","getInvolvedDataModelObjects","fetchTypeConfig","ODataTableDelegate","Object","assign","fetchProperties","async","table","model","this","_getModel","properties","_createPropertyInfos","createInternalBindingContext","setCachedProperties","getBindingContext","setProperty","dialog","isA","getParent","internalModel","getModel","internalBindingContext","newInternalBindingContextPath","getId","getProperty","newInternalBindingContext","bindContext","getBoundContext","setBindingContext","collectRelatedProperties","dataModelPropertyPath","dataModelAdditionalPropertyPath","getAdditionalProperty","relatedProperties","targetObject","_property$annotations","_property$annotations2","_textAnnotation$annot","_textAnnotation$annot2","_textAnnotation$annot3","additionalProperty","additionalPropertyPath","property","propertyPath","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","displayMode","metadataInfo","getDelegate","payload","entitySetPath","collectionName","metaModel","getMetaModel","requestObject","then","entitySetAnnotations","sortRestrictionsInfo","filterRestrictions","filterRestrictionsInfo","customDataForColumns","getCustomData","propertiesToBeCreated","dataModelEntityPath","getContext","customData","forEach","columnDef","propertyInfo","name","path","label","sortable","filterable","maxConditions","getPropertyMaxConditions","typeConfig","$Type","getTypeUtil","getTypeConfig","undefined","targetPropertyPath","type","propertyTypeConfig","formatOptions","constraints","relatedPropertiesInfo","relatedPropertyPaths","keys","length","propertyInfos","find","push","relatedColumns","createRelatedProperties","concat","updateBindingInfo","oMDCTable","oBindingInfo","apply","oMetadataInfo","collectionPath","oFilter","byId","getFilter","bFilterEnabled","isFilteringEnabled","mConditions","oInnerFilterInfo","oOuterFilterInfo","aFilters","tableProperties","getCachedProperties","getConditions","getFilterInfo","filters","aParameterNames","getParameterNames","_updatePropertyInfo","sParameterPath","getParametersInfo","parameters","$search","normalizeSearchTerm","getSearch","_applyDefaultSorting","$select","reduce","sQuery","oProperty","indexOf","$count","isDraftSupported","EQ","Promise","resolve","attachEventOnce","oPayload","sorter","defaultSortPropertyName","aTableProperties","aConditionKey","oMetaModel","conditionKey","findIndex","tableProperty","oColumnDef","getObject","updateBinding","oTable","oBinding","bNeedManualRefresh","oInternalBindingContext","sManualUpdatePropertyKey","bPendingManualUpdate","oRowBinding","getRowBinding","oldFilters","getFilters","getQueryOptionsFromParameters","requestRefresh","getGroupId","finally","catch","oError","error","fireEvent","existingColumns","relatedPropertyNameMap","relatedColumn","column","newName","valueHelpTableColumn","_column$propertyInfos","map","columnName","_filterRestrictionsIn","hasOwnProperty","dataModelAdditionalProperty"],"sources":["TableDelegate-dbg.js"],"mappings":"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","sourceRoot":"internal/valuehelp"}},{"offset":{"line":20215,"column":0},"map":{"version":3,"names":["isFilterableProperty","filterRestrictionsInfo","property","propertyPath","getPath","propertyInfo","hasOwnProperty","filterable","isSortableProperty","sortRestrictionsInfo","sortable","isProperty","name","path"],"sourceRoot":"internal/valuehelp","sources":["TableDelegateHelper.ts"],"sourcesContent":["/**\n * collection of helper functions from \"sap/fe/macros/internal/valuehelp/TableDelegate\"\n * set into helper file for easy test accsess\n */\n\nimport { Property } from \"@sap-ux/vocabularies-types\";\nimport { FilterRestrictionsInfoType, SortRestrictionsInfoType } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport { isProperty } from \"sap/fe/core/helpers/TypeGuards\";\nimport type { ValueHelpTableColumn } from \"sap/fe/macros/internal/valuehelp/TableDelegate\";\n\n/**\n * Identifies if the given property is filterable based on the sort restriction information.\n *\n * @param filterRestrictionsInfo The filter restriction information from the restriction annotation.\n * @param property The target property.\n * @returns `true` if the given property is filterable.\n * @private\n */\nexport function isFilterableProperty(\n\tfilterRestrictionsInfo: FilterRestrictionsInfoType,\n\tproperty: ValueHelpTableColumn | Property\n): boolean | undefined {\n\tconst propertyPath = getPath(property);\n\treturn propertyPath && filterRestrictionsInfo?.propertyInfo.hasOwnProperty(propertyPath)\n\t\t? filterRestrictionsInfo.propertyInfo[propertyPath].filterable\n\t\t: (property as ValueHelpTableColumn).filterable ?? true;\n}\n\n/**\n * Identifies if the given property is sortable based on the sort restriction information.\n *\n * @param sortRestrictionsInfo The sort restriction information from the restriction annotation.\n * @param property The target property.\n * @returns `true` if the given property is sortable.\n * @private\n */\nexport function isSortableProperty(\n\tsortRestrictionsInfo: SortRestrictionsInfoType,\n\tproperty: ValueHelpTableColumn | Property\n): boolean | undefined {\n\tconst propertyPath = getPath(property);\n\treturn propertyPath && sortRestrictionsInfo.propertyInfo[propertyPath]\n\t\t? sortRestrictionsInfo.propertyInfo[propertyPath].sortable\n\t\t: (property as ValueHelpTableColumn).sortable ?? true;\n}\n\n/**\n * Provides the property path of a given property or custom data from the ValueHelp.\n *\n * @param property The target property or custom data from the ValueHelp.\n * @returns The property path.\n */\nexport function getPath(property: ValueHelpTableColumn | Property): string | undefined {\n\treturn isProperty(property) ? property.name : property.path;\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;EAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACO,SAASA,oBAAoB,CACnCC,sBAAkD,EAClDC,QAAyC,EACnB;IACtB,MAAMC,YAAY,GAAGC,OAAO,CAACF,QAAQ,CAAC;IACtC,OAAOC,YAAY,IAAIF,sBAAsB,aAAtBA,sBAAsB,eAAtBA,sBAAsB,CAAEI,YAAY,CAACC,cAAc,CAACH,YAAY,CAAC,GACrFF,sBAAsB,CAACI,YAAY,CAACF,YAAY,CAAC,CAACI,UAAU,GAC3DL,QAAQ,CAA0BK,UAAU,IAAI,IAAI;EACzD;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAPA;EAQO,SAASC,kBAAkB,CACjCC,oBAA8C,EAC9CP,QAAyC,EACnB;IACtB,MAAMC,YAAY,GAAGC,OAAO,CAACF,QAAQ,CAAC;IACtC,OAAOC,YAAY,IAAIM,oBAAoB,CAACJ,YAAY,CAACF,YAAY,CAAC,GACnEM,oBAAoB,CAACJ,YAAY,CAACF,YAAY,CAAC,CAACO,QAAQ,GACvDR,QAAQ,CAA0BQ,QAAQ,IAAI,IAAI;EACvD;;EAEA;AACA;AACA;AACA;AACA;AACA;EALA;EAMO,SAASN,OAAO,CAACF,QAAyC,EAAsB;IACtF,OAAOS,UAAU,CAACT,QAAQ,CAAC,GAAGA,QAAQ,CAACU,IAAI,GAAGV,QAAQ,CAACW,IAAI;EAC5D;EAAC;EAAA;AAAA"}},{"offset":{"line":20264,"column":0},"map":{"version":3,"names":["sap","ui","define","TypeGuards","_exports","isProperty","isFilterableProperty","filterRestrictionsInfo","property","propertyPath","getPath","propertyInfo","hasOwnProperty","filterable","isSortableProperty","sortRestrictionsInfo","sortable","name","path"],"sources":["TableDelegateHelper-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,kEAAO,CAAC,kCAAmC,SAAUC,GAC1D,aAEA,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAaF,EAAWE,WAS5B,SAASC,EAAqBC,EAAwBC,GACpD,MAAMC,EAAeC,EAAQF,GAC7B,OAAOC,GAAgBF,IAA2B,MAAQA,SAAgC,GAAKA,EAAuBI,aAAaC,eAAeH,GAAgBF,EAAuBI,aAAaF,GAAcI,WAAaL,EAASK,YAAc,IAC1P,CAUAT,EAASE,qBAAuBA,EAChC,SAASQ,EAAmBC,EAAsBP,GAChD,MAAMC,EAAeC,EAAQF,GAC7B,OAAOC,GAAgBM,EAAqBJ,aAAaF,GAAgBM,EAAqBJ,aAAaF,GAAcO,SAAWR,EAASQ,UAAY,IAC3J,CAQAZ,EAASU,mBAAqBA,EAC9B,SAASJ,EAAQF,GACf,OAAOH,EAAWG,GAAYA,EAASS,KAAOT,EAASU,IACzD,CACAd,EAASM,QAAUA,EACnB,OAAON,CACT,EAAG","sourceRoot":"internal/valuehelp"}},{"offset":{"line":20269,"column":0},"map":{"version":3,"names":["getValueHelpTableDisplayMode","propertyPath","isValueHelpWithFixedValues","sDisplayMode","getDisplayMode","oTextAnnotation","targetObject","annotations","Common","Text","oTextArrangementAnnotation","UI","TextArrangement","toString","path","getDelegateConfiguration","conditionModelName","originalPropertyPath","requestGroupId","useMultiValueField","isUnitValueHelp","delegateConfiguration","name","payload","conditionModel","qualifiers","valueHelpQualifier","compileExpression","generateID","sFlexId","sIdPrefix","sOriginalPropertyName","sPropertyName","sProperty","generate","requiresValidation","property","hasValueHelpWithFixedValues","hasValueListForValidation","hasValueHelp","isUnit","isCurrency","isGuid","useCaseSensitiveFilterRequests","oDataModelPath","aEntityContainerFilterFunctions","filterFunctions","targetEntitySet","Capabilities","FilterFunctions","indexOf","isSemanticDateRange","targetProperty","targetRestrictions","checkFilterExpressionRestrictions","hasDateType","shouldShowConditionPanel","oContextPath","contextLocation","getColumnDataProperty","sValueListProperty","textAnnotation","valueOf","getColumnDataPropertyType","valueListPropertyType","textArrangement","getColumnHAlign","propertyType","isProperty","type","isSemanticKey","FieldHelper","getPropertyAlignment","textAlignMode","getGrowingFormatter","formatResult","pathInModel","constant","additionalValueFormatter","getGrowing"],"sourceRoot":"internal/valuehelp","sources":["ValueHelpTemplating.ts"],"sourcesContent":["import type { EntitySet, Property } from \"@sap-ux/vocabularies-types\";\nimport {\n\tCompiledBindingToolkitExpression,\n\tcompileExpression,\n\tconstant,\n\tformatResult,\n\tpathInModel\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isProperty } from \"sap/fe/core/helpers/TypeGuards\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { checkFilterExpressionRestrictions } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport {\n\thasDateType,\n\thasValueHelp,\n\thasValueHelpWithFixedValues,\n\thasValueListForValidation,\n\tisCurrency,\n\tisGuid,\n\tisSemanticKey,\n\tisUnit\n} from \"sap/fe/core/templating/PropertyHelper\";\nimport { getDisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\n\nimport additionalValueFormatter from \"sap/fe/macros/internal/valuehelp/AdditionalValueFormatter\";\nimport type { ValueHelpPayload } from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\n\n/**\n * Retrieve the displayMode for the value help.\n * The main rule is that if a property is used in a VHTable then we don't want to display the text arrangement directly.\n *\n * @param propertyPath The current property\n * @param isValueHelpWithFixedValues The value help is a drop-down list\n * @returns The target displayMode\n */\nexport const getValueHelpTableDisplayMode = function (propertyPath: DataModelObjectPath, isValueHelpWithFixedValues: boolean): string {\n\tconst sDisplayMode = getDisplayMode(propertyPath);\n\tconst oTextAnnotation = propertyPath.targetObject.annotations?.Common?.Text;\n\tconst oTextArrangementAnnotation = typeof oTextAnnotation !== \"string\" && oTextAnnotation?.annotations?.UI?.TextArrangement?.toString();\n\tif (isValueHelpWithFixedValues) {\n\t\treturn oTextAnnotation && typeof oTextAnnotation !== \"string\" && oTextAnnotation.path ? sDisplayMode : \"Value\";\n\t} else {\n\t\t// Only explicit defined TextArrangements in a Value Help with Dialog are considered\n\t\treturn oTextArrangementAnnotation ? sDisplayMode : \"Value\";\n\t}\n};\n\n/**\n * Method to return delegate property of Value Help.\n *\n * @function\n * @name getDelegateConfiguration\n * @memberof sap.fe.macros.internal.valuehelp.ValueHelpTemplating.js\n * @param propertyPath The current property path\n * @param conditionModelName Condition model of the Value Help\n * @param originalPropertyPath The original property path\n * @param requestGroupId The requestGroupId to use for requests\n * @param useMultiValueField If true the value help is for a multi value Field\n * @returns The expression needed to configure the delegate\n */\nexport const getDelegateConfiguration = function (\n\tpropertyPath: string,\n\tconditionModelName: string,\n\toriginalPropertyPath: string,\n\trequestGroupId?: string,\n\tuseMultiValueField = false\n): CompiledBindingToolkitExpression {\n\tconst isUnitValueHelp = propertyPath !== originalPropertyPath;\n\tconst delegateConfiguration: { name: string; payload: ValueHelpPayload } = {\n\t\tname: \"sap/fe/macros/valuehelp/ValueHelpDelegate\",\n\t\tpayload: {\n\t\t\tpropertyPath,\n\t\t\tisUnitValueHelp,\n\t\t\tconditionModel: conditionModelName,\n\t\t\trequestGroupId,\n\t\t\tuseMultiValueField,\n\t\t\tqualifiers: {},\n\t\t\tvalueHelpQualifier: \"\"\n\t\t}\n\t};\n\treturn compileExpression(delegateConfiguration); // for some reason \"qualifiers: {}\" is ignored here\n};\n\n/**\n * Method to generate the ID for Value Help.\n *\n * @function\n * @name generateID\n * @memberof sap.fe.macros.internal.valuehelp.ValueHelpTemplating.js\n * @param sFlexId Flex ID of the current object\n * @param sIdPrefix Prefix for the ValueHelp ID\n * @param sOriginalPropertyName Name of the property\n * @param sPropertyName Name of the ValueHelp Property\n * @returns The Id generated for the ValueHelp\n */\nexport const generateID = function (\n\tsFlexId: string | undefined,\n\tsIdPrefix: string,\n\tsOriginalPropertyName: string,\n\tsPropertyName: string\n): string {\n\tif (sFlexId) {\n\t\treturn sFlexId;\n\t}\n\tlet sProperty = sPropertyName;\n\tif (sOriginalPropertyName !== sPropertyName) {\n\t\tsProperty = `${sOriginalPropertyName}::${sPropertyName}`;\n\t}\n\treturn generate([sIdPrefix, sProperty]);\n};\n\n/**\n * Method to check if a property needs to be validated or not when used in the valuehelp.\n *\n * @function\n * @name requiresValidation\n * @memberof sap.fe.macros.internal.valuehelp.ValueHelpTemplating.js\n * @param  property ValueHelp property type annotations\n * @returns `true` if the value help needs to be validated\n */\nexport const requiresValidation = function (property: Property): boolean {\n\treturn (\n\t\thasValueHelpWithFixedValues(property) ||\n\t\thasValueListForValidation(property) ||\n\t\t(hasValueHelp(property) && (isUnit(property) || isCurrency(property) || isGuid(property)))\n\t);\n};\n\n/**\n * Method to decide if case-sensitive filter requests are to be used or not.\n *\n *  If the back end has FilterFunctions Capabilies for the service or the entity, we check it includes support for tolower.\n *\n * @function\n * @name useCaseSensitiveFilterRequests\n * @memberof sap.fe.macros.internal.valuehelp.ValueHelpTemplating.js\n * @param oDataModelPath Current data model path·\n * @param aEntityContainerFilterFunctions Filter functions of entity container\n * @returns `true` if the entity set or service supports case sensitive filter requests\n */\nexport const useCaseSensitiveFilterRequests = function (\n\toDataModelPath: DataModelObjectPath,\n\taEntityContainerFilterFunctions: string[]\n): boolean {\n\tconst filterFunctions =\n\t\t((oDataModelPath?.targetEntitySet as EntitySet)?.annotations?.Capabilities?.FilterFunctions as unknown as string[]) ||\n\t\taEntityContainerFilterFunctions;\n\treturn filterFunctions ? !(filterFunctions.indexOf(\"tolower\") > -1) : true;\n};\n\nexport const isSemanticDateRange = function (oDataModelPath: DataModelObjectPath) {\n\tconst targetProperty = oDataModelPath.targetObject as Property;\n\tconst targetRestrictions = checkFilterExpressionRestrictions(oDataModelPath, [\"SingleRange\"]);\n\treturn hasDateType(targetProperty) && compileExpression(targetRestrictions);\n};\n\nexport const shouldShowConditionPanel = function (oDataModelPath: DataModelObjectPath, oContextPath: DataModelObjectPath): boolean {\n\t// Force push the context path inside\n\toDataModelPath.contextLocation = oContextPath;\n\treturn compileExpression(checkFilterExpressionRestrictions(oDataModelPath, [\"SingleValue\", \"MultiValue\"])) === \"false\";\n};\n\nexport const getColumnDataProperty = function (sValueListProperty: string, propertyPath: DataModelObjectPath): string {\n\tconst textAnnotation = propertyPath?.targetObject?.annotations?.Common?.Text;\n\treturn textAnnotation?.annotations?.UI?.TextArrangement?.valueOf() === \"UI.TextArrangementType/TextOnly\"\n\t\t? textAnnotation.path\n\t\t: sValueListProperty;\n};\n\nconst getColumnDataPropertyType = function (valueListPropertyType: string, propertyPath: DataModelObjectPath): string {\n\tconst textArrangement = propertyPath?.targetObject?.annotations?.Common?.Text?.annotations?.UI?.TextArrangement;\n\treturn textArrangement && textArrangement.valueOf() !== \"UI.TextArrangementType/TextSeparate\" ? \"Edm.String\" : valueListPropertyType;\n};\n\nexport const getColumnHAlign = function (propertyPath: DataModelObjectPath) {\n\tconst property = propertyPath.targetObject;\n\tconst propertyType = isProperty(property) ? getColumnDataPropertyType(property.type, propertyPath) : \"\";\n\n\treturn !propertyType || isSemanticKey(property, propertyPath)\n\t\t? \"Begin\"\n\t\t: FieldHelper.getPropertyAlignment(propertyType, { textAlignMode: \"Table\" });\n};\n/**\n *\n * @function\n * @name getGrowingFormatter\n * @memberof sap.fe.macros.internal.valuehelp.ValueHelpTemplating.js\n * @param  propertyPath PropertyPath of the Field\n * @returns Runtime formatter for growing and growingThreshold\n */\nexport const getGrowingFormatter = function (propertyPath: string) {\n\treturn compileExpression(\n\t\tformatResult([pathInModel(\"/recommendationsData\", \"internal\"), constant(propertyPath)], additionalValueFormatter.getGrowing)\n\t);\n};\n"],"mappings":"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"}},{"offset":{"line":20448,"column":0},"map":{"version":3,"names":["sap","ui","define","BindingToolkit","StableIdHelper","TypeGuards","DataModelPathHelper","PropertyHelper","UIFormatters","FieldHelper","additionalValueFormatter","_exports","getDisplayMode","isUnit","isSemanticKey","isGuid","isCurrency","hasValueListForValidation","hasValueHelpWithFixedValues","hasValueHelp","hasDateType","checkFilterExpressionRestrictions","isProperty","generate","pathInModel","formatResult","constant","compileExpression","getValueHelpTableDisplayMode","propertyPath","isValueHelpWithFixedValues","_propertyPath$targetO","_propertyPath$targetO2","_oTextAnnotation$anno","_oTextAnnotation$anno2","_oTextAnnotation$anno3","sDisplayMode","oTextAnnotation","targetObject","annotations","Common","Text","oTextArrangementAnnotation","UI","TextArrangement","toString","path","getDelegateConfiguration","conditionModelName","originalPropertyPath","requestGroupId","useMultiValueField","arguments","length","undefined","isUnitValueHelp","delegateConfiguration","name","payload","conditionModel","qualifiers","valueHelpQualifier","generateID","sFlexId","sIdPrefix","sOriginalPropertyName","sPropertyName","sProperty","requiresValidation","property","useCaseSensitiveFilterRequests","oDataModelPath","aEntityContainerFilterFunctions","_oDataModelPath$targe","_oDataModelPath$targe2","_oDataModelPath$targe3","filterFunctions","targetEntitySet","Capabilities","FilterFunctions","indexOf","isSemanticDateRange","targetProperty","targetRestrictions","shouldShowConditionPanel","oContextPath","contextLocation","getColumnDataProperty","sValueListProperty","_propertyPath$targetO3","_propertyPath$targetO4","_propertyPath$targetO5","_textAnnotation$annot","_textAnnotation$annot2","_textAnnotation$annot3","textAnnotation","valueOf","getColumnDataPropertyType","valueListPropertyType","_propertyPath$targetO6","_propertyPath$targetO7","_propertyPath$targetO8","_propertyPath$targetO9","_propertyPath$targetO10","_propertyPath$targetO11","textArrangement","getColumnHAlign","propertyType","type","getPropertyAlignment","textAlignMode","getGrowingFormatter","getGrowing"],"sources":["ValueHelpTemplating-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,kEAAO,CAAC,qCAAsC,qCAAsC,iCAAkC,6CAA8C,wCAAyC,sCAAuC,kCAAmC,6DAA8D,SAAUC,EAAgBC,EAAgBC,EAAYC,EAAqBC,EAAgBC,EAAcC,EAAaC,GAChd,aAEA,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAiBJ,EAAaI,eAClC,IAAIC,EAASN,EAAeM,OAC5B,IAAIC,EAAgBP,EAAeO,cACnC,IAAIC,EAASR,EAAeQ,OAC5B,IAAIC,EAAaT,EAAeS,WAChC,IAAIC,EAA4BV,EAAeU,0BAC/C,IAAIC,EAA8BX,EAAeW,4BACjD,IAAIC,EAAeZ,EAAeY,aAClC,IAAIC,EAAcb,EAAea,YACjC,IAAIC,EAAoCf,EAAoBe,kCAC5D,IAAIC,EAAajB,EAAWiB,WAC5B,IAAIC,EAAWnB,EAAemB,SAC9B,IAAIC,EAAcrB,EAAeqB,YACjC,IAAIC,EAAetB,EAAesB,aAClC,IAAIC,EAAWvB,EAAeuB,SAC9B,IAAIC,EAAoBxB,EAAewB,kBASvC,MAAMC,EAA+B,SAAUC,EAAcC,GAC3D,IAAIC,EAAuBC,EAAwBC,EAAuBC,EAAwBC,EAClG,MAAMC,EAAexB,EAAeiB,GACpC,MAAMQ,GAAmBN,EAAwBF,EAAaS,aAAaC,eAAiB,MAAQR,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBS,UAAY,MAAQR,SAAgC,OAAS,EAAIA,EAAuBS,KACxR,MAAMC,SAAoCL,IAAoB,WAAaA,IAAoB,MAAQA,SAAyB,OAAS,GAAKJ,EAAwBI,EAAgBE,eAAiB,MAAQN,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBU,MAAQ,MAAQT,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBU,mBAAqB,MAAQT,SAAgC,OAAS,EAAIA,EAAuBU,YAC1f,GAAIf,EAA4B,CAC9B,OAAOO,UAA0BA,IAAoB,UAAYA,EAAgBS,KAAOV,EAAe,OACzG,KAAO,CAEL,OAAOM,EAA6BN,EAAe,OACrD,CACF,EAeAzB,EAASiB,6BAA+BA,EACxC,MAAMmB,EAA2B,SAAUlB,EAAcmB,EAAoBC,EAAsBC,GACjG,IAAIC,EAAqBC,UAAUC,OAAS,GAAKD,UAAU,KAAOE,UAAYF,UAAU,GAAK,MAC7F,MAAMG,EAAkB1B,IAAiBoB,EACzC,MAAMO,EAAwB,CAC5BC,KAAM,4CACNC,QAAS,CACP7B,eACA0B,kBACAI,eAAgBX,EAChBE,iBACAC,qBACAS,WAAY,CAAC,EACbC,mBAAoB,KAGxB,OAAOlC,EAAkB6B,EAC3B,EAcA7C,EAASoC,yBAA2BA,EACpC,MAAMe,EAAa,SAAUC,EAASC,EAAWC,EAAuBC,GACtE,GAAIH,EAAS,CACX,OAAOA,CACT,CACA,IAAII,EAAYD,EAChB,GAAID,IAA0BC,EAAe,CAC3CC,EAAY,GAAGF,MAA0BC,GAC3C,CACA,OAAO3C,EAAS,CAACyC,EAAWG,GAC9B,EAWAxD,EAASmD,WAAaA,EACtB,MAAMM,EAAqB,SAAUC,GACnC,OAAOnD,EAA4BmD,IAAapD,EAA0BoD,IAAalD,EAAakD,KAAcxD,EAAOwD,IAAarD,EAAWqD,IAAatD,EAAOsD,GACvK,EAcA1D,EAASyD,mBAAqBA,EAC9B,MAAME,EAAiC,SAAUC,EAAgBC,GAC/D,IAAIC,EAAuBC,EAAwBC,EACnD,MAAMC,GAAmBL,IAAmB,MAAQA,SAAwB,OAAS,GAAKE,EAAwBF,EAAeM,mBAAqB,MAAQJ,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBlC,eAAiB,MAAQmC,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBI,gBAAkB,MAAQH,SAAgC,OAAS,EAAIA,EAAuBI,kBAAoBP,EACne,OAAOI,IAAoBA,EAAgBI,QAAQ,YAAc,GAAK,IACxE,EACArE,EAAS2D,+BAAiCA,EAC1C,MAAMW,EAAsB,SAAUV,GACpC,MAAMW,EAAiBX,EAAejC,aACtC,MAAM6C,EAAqB9D,EAAkCkD,EAAgB,CAAC,gBAC9E,OAAOnD,EAAY8D,IAAmBvD,EAAkBwD,EAC1D,EACAxE,EAASsE,oBAAsBA,EAC/B,MAAMG,EAA2B,SAAUb,EAAgBc,GAEzDd,EAAee,gBAAkBD,EACjC,OAAO1D,EAAkBN,EAAkCkD,EAAgB,CAAC,cAAe,kBAAoB,OACjH,EACA5D,EAASyE,yBAA2BA,EACpC,MAAMG,EAAwB,SAAUC,EAAoB3D,GAC1D,IAAI4D,EAAwBC,EAAwBC,EAAwBC,EAAuBC,EAAwBC,EAC3H,MAAMC,EAAiBlE,IAAiB,MAAQA,SAAsB,OAAS,GAAK4D,EAAyB5D,EAAaS,gBAAkB,MAAQmD,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBlD,eAAiB,MAAQmD,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBlD,UAAY,MAAQmD,SAAgC,OAAS,EAAIA,EAAuBlD,KACjc,OAAQsD,IAAmB,MAAQA,SAAwB,OAAS,GAAKH,EAAwBG,EAAexD,eAAiB,MAAQqD,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBjD,MAAQ,MAAQkD,SAAgC,OAAS,GAAKC,EAAyBD,EAAuBjD,mBAAqB,MAAQkD,SAAgC,OAAS,EAAIA,EAAuBE,aAAe,kCAAoCD,EAAejD,KAAO0C,CAC/f,EACA7E,EAAS4E,sBAAwBA,EACjC,MAAMU,EAA4B,SAAUC,EAAuBrE,GACjE,IAAIsE,EAAwBC,EAAwBC,EAAwBC,EAAwBC,EAAyBC,EAC7H,MAAMC,EAAkB5E,IAAiB,MAAQA,SAAsB,OAAS,GAAKsE,EAAyBtE,EAAaS,gBAAkB,MAAQ6D,SAAgC,OAAS,GAAKC,EAAyBD,EAAuB5D,eAAiB,MAAQ6D,SAAgC,OAAS,GAAKC,EAAyBD,EAAuB5D,UAAY,MAAQ6D,SAAgC,OAAS,GAAKC,EAAyBD,EAAuB5D,QAAU,MAAQ6D,SAAgC,OAAS,GAAKC,EAA0BD,EAAuB/D,eAAiB,MAAQgE,SAAiC,OAAS,GAAKC,EAA0BD,EAAwB5D,MAAQ,MAAQ6D,SAAiC,OAAS,EAAIA,EAAwB5D,gBAC7xB,OAAO6D,GAAmBA,EAAgBT,YAAc,sCAAwC,aAAeE,CACjH,EACA,MAAMQ,EAAkB,SAAU7E,GAChC,MAAMwC,EAAWxC,EAAaS,aAC9B,MAAMqE,EAAerF,EAAW+C,GAAY4B,EAA0B5B,EAASuC,KAAM/E,GAAgB,GACrG,OAAQ8E,GAAgB7F,EAAcuD,EAAUxC,GAAgB,QAAUpB,EAAYoG,qBAAqBF,EAAc,CACvHG,cAAe,SAEnB,EASAnG,EAAS+F,gBAAkBA,EAC3B,MAAMK,EAAsB,SAAUlF,GACpC,OAAOF,EAAkBF,EAAa,CAACD,EAAY,uBAAwB,YAAaE,EAASG,IAAgBnB,EAAyBsG,YAC5I,EACArG,EAASoG,oBAAsBA,EAC/B,OAAOpG,CACT,EAAG","sourceRoot":"internal/valuehelp"}},{"offset":{"line":20453,"column":0},"map":{"version":3,"names":["columnNotAlreadyDefined","columnDefs","vhKey","some","column","path","AnnotationLabel","AnnotationText","AnnotationTextUITextArrangement","AnnotationValueListParameterIn","AnnotationValueListParameterConstant","AnnotationValueListParameterOut","AnnotationValueListParameterInOut","AnnotationValueListWithFixedValues","_getDefaultSortPropertyName","valueListInfo","sortFieldName","metaModel","$model","getMetaModel","entitySetAnnotations","getObject","CollectionPath","sortRestrictionsInfo","getSortRestrictionsInfo","foundElement","Parameters","find","element","$Type","ValueListProperty","propertyInfo","sortable","undefined","_redundantDescription","oVLParameter","aColumnInfo","oColumnInfo","columnInfo","textColumnName","keyColumnHidden","keyColumnDisplayFormat","_hasImportanceHigh","oValueListContext","oParameter","$EnumMember","_build$SelectString","control","oViewData","getModel","oData","getData","aColumns","columns","reduce","sQuery","oProperty","indexOf","_getValueHelpColumnDisplayFormat","oPropertyAnnotations","isValueHelpWithFixedValues","sDisplayMode","CommonUtils","computeDisplayMode","oTextAnnotation","oTextArrangementAnnotation","$Path","ValueListHelper","getValueListCollectionEntitySet","mValueList","createBindingContext","getTableDelegate","oValueList","sDefaultSortPropertyName","getSortConditionsFromPresentationVariant","isSuggestion","PresentationVariantQualifier","presentationVariantQualifier","presentationVariantPath","presentationVariant","SortOrder","sortConditions","sorters","forEach","condition","sorter","propertyPath","Property","$PropertyPath","name","Descending","descending","ascending","push","JSON","stringify","getPropertyPath","oParameters","UnboundAction","EntityTypePath","Action","substring","lastIndexOf","getValueListProperty","oPropertyContext","oValueListModel","getColumnVisibility","oSource","isDropDownList","valueHelpWithFixedValues","isVisible","columnInfos","isDialogTable","columnWithHiddenAnnotation","columnName","hasHiddenAnnotation","getColumnVisibilityInfo","sPropertyFullPath","bIsDropDownListe","oMetaModel","aColumnInfos","oColumnInfos","getTableItemsParameters","requestGroupId","itemParameters","selectString","selectStringPart","isSuspended","sortConditionsFromPresentationVariant","defaultSortPropertyName","join","hasImportance","getMinScreenWidth","getColumnWidth","property","targetObject","relatedProperty","additionalProperty","getAssociatedTextProperty","getAssociatedCurrencyProperty","getAssociatedUnitProperty","getAssociatedTimezoneProperty","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","label","Label","displayMode","getDisplayMode","size","instances","prop","propertyTypeConfig","getTypeConfig","PropertyODataConstructor","ObjectPath","get","type","formatOptions","constraints","sWidth","Util","calcColumnWidth","parseFloat","replace","Log","error","getOutParameterPaths","aParameters","sPath","endsWith","entityIsSearchable","propertyAnnotations","collectionAnnotations","searchSupported","SearchSupported","searchable","Searchable","_getConditionPath","entitySet","parts","split","conditionPath","partialPath","length","part","shift","$kind","$isCollection","_getColumnDefinitionFromSelectionFields","entityTypeAnnotations","selectionFields","selectionField","selectionFieldPath","columnDef","filterable","isPropertyFilterable","_mergeColumnDefinitionsFromProperties","valueListProperty","columnPath","columnPropertyType","textPropertyPath","filterInOutParameters","vhParameters","typeFilter","filter","parameter","parmeterType","getInParameters","getOutParameters","createVHUIModel","valueHelp","vhUIModel","JSONModel","setModel","setProperty","_getDialogTitle","valuehelpLabel","propertyLabel","getProperty","dataFieldLabel","getControl","destroyVHContent","getDialog","destroyContent","getTypeahead","putDefaultQualifierFirst","qualifiers","indexDefaultVH","unshift","splice","_getContextPrefix","bindingContext","propertyBindingParts","getPath","bindigContextParts","contextPrefixParts","i","_getVhParameter","conditionModel","contextPrefix","vhMetaModel","localDataPropertyPath","valuePath","getBindingContext","getParent","isA","_parameterIsA","firstNavigationProperty","oBoundEntity","getMetaContext","sPathOfTable","getRowBinding","source","helpPath","constantValue","Constant","initialValueFilterEmpty","Boolean","InitialValueIsSignificant","parameterTypes","includes","_enrichPath","propertyName","key","fieldPropertyPath","descriptionPath","_enrichKeys","vhKeys","_processParameters","annotationValueListType","valueHelpQualifier","entitySetPath","entityType","$Key","LocalDataProperty","vhParameter","valuelistInfo","keyPath","_logError","status","message","Error","String","msg","getValueListInfo","payload","valueListInfos","propertyPathParts","valueListByQualifier","requestValueListInfo","valueHelpQualifiers","Object","keys","pop","useMultiValueField","$qualifier","err","ALLFRAGMENTS","logFragment","_logTemplatedFragments","fragmentName","fragmentDefinition","logInfo","fragment","getLevel","Level","DEBUG","setTimeout","_templateFragment","sourceModel","localValueListInfo","valueListModel","valueListServiceMetaModel","viewData","converterType","XMLPreprocessor","process","XMLTemplateProcessor","loadTemplate","bindingContexts","valueList","contextPath","models","Fragment","load","definition","_getContentId","valueHelpId","isTypeahead","contentType","_addInOutParametersToPayload","textArrangementAnnotation","_getWidthInRem","isUnitValueHelp","width","$","floatWidth","Rem","fromPx","isNaN","_getTableWidth","table","minWidth","getColumns","visibleColumns","getVisible","sumWidth","sum","getWidth","Math","max","_createValueHelpTypeahead","content","contentId","getId","id","groupId","bSuggestion","setKeyPath","setDescriptionPath","isValueListWithFixedValues","setFilterFields","info","getMetadata","getName","setTable","field","reduceWidthForUnitValueHelp","tableWidth","setWidth","setMode","getMaxConditions","_createValueHelpDialog","isDropDownListe","tablePromise","filterBarPromise","filterBar","Promise","all","setFilterBar","setFilter","initialized","setSelectionMode","mdcTable","_setShowP13nButton","_getContentById","contentList","item","_createPopoverContent","caseSensitive","useAsValueHelp","MTable","group","_createDialogContent","forceBind","MDCTable","_showConditionsContent","container","conditionsContent","setVisible","Conditions","addContent","_alignOrCreateContent","showConditionPanel","getContent","FetchValues","insertContent","_prepareValueHelpTypeAhead","firstTypeAheadContent","qualifierForTypeahead","data","subValueListInfo","getUseAsValueHelp","removeContent","_prepareValueHelpDialog","selectedContentId","contentListItem","selectedInfo","selectedContent","title","getTranslatedTextFromExpBindingString","setTitle","_addDescriptionInfosToPayload","valueHelpDescriptionPath","convertedMetadata","convertTypes","propertyDescriptionPath","resolvePath","target","valueHelpKeyPath","maxLength","showValueList","getCaseSensitive","getTable"],"sourceRoot":"internal/valuehelp","sources":["ValueListHelper.ts"],"sourcesContent":["import type { PathAnnotationExpression, Property } from \"@sap-ux/vocabularies-types\";\nimport { CommonAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { PresentationVariant } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log, { Level } from \"sap/base/Log\";\nimport ObjectPath from \"sap/base/util/ObjectPath\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { convertTypes } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { getSortRestrictionsInfo, isPropertyFilterable } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport {\n\tgetAssociatedCurrencyProperty,\n\tgetAssociatedTextProperty,\n\tgetAssociatedTimezoneProperty,\n\tgetAssociatedUnitProperty\n} from \"sap/fe/core/templating/PropertyHelper\";\nimport { getDisplayMode, getTypeConfig } from \"sap/fe/core/templating/UIFormatters\";\nimport type Table from \"sap/m/Table\";\nimport Util from \"sap/m/table/Util\";\nimport type Control from \"sap/ui/core/Control\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport XMLTemplateProcessor from \"sap/ui/core/XMLTemplateProcessor\";\nimport Rem from \"sap/ui/dom/units/Rem\";\nimport type Field from \"sap/ui/mdc/Field\";\nimport type FieldBase from \"sap/ui/mdc/field/FieldBase\";\nimport type MdcFilterBar from \"sap/ui/mdc/filterbar/FilterBarBase\";\nimport type FilterField from \"sap/ui/mdc/FilterField\";\nimport type MultiValueField from \"sap/ui/mdc/MultiValueField\";\nimport type MdcInnerTable from \"sap/ui/mdc/Table\";\nimport type ValueHelp from \"sap/ui/mdc/ValueHelp\";\nimport type Container from \"sap/ui/mdc/valuehelp/base/Container\";\nimport type Content from \"sap/ui/mdc/valuehelp/base/Content\";\nimport Conditions from \"sap/ui/mdc/valuehelp/content/Conditions\";\nimport MDCTable, { type $MDCTableSettings } from \"sap/ui/mdc/valuehelp/content/MDCTable\";\nimport MTable, { type $MTableSettings } from \"sap/ui/mdc/valuehelp/content/MTable\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ODataType from \"sap/ui/model/odata/type/ODataType\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type { MetaModelType } from \"types/metamodel_types\";\nimport { MetaModelEntitySetAnnotation } from \"types/metamodel_types\";\n\nexport type AnnotationValueListParameter = {\n\t$Type: string;\n\tValueListProperty: string;\n\tLocalDataProperty?: {\n\t\t$PropertyPath: string;\n\t};\n\tConstant?: string;\n\tInitialValueIsSignificant?: boolean;\n};\n\n// com.sap.vocabularies.Common.v1.ValueListType\nexport type AnnotationValueListType = {\n\t$Type: string; // CommonAnnotationTypes.ValueListType;\n\tLabel?: string;\n\tCollectionPath: string;\n\tCollectionRoot?: string;\n\tDistinctValuesSupported?: boolean;\n\tSearchSupported?: boolean;\n\tFetchValues?: number;\n\tPresentationVariantQualifier?: string;\n\tSelectionVariantQualifier?: string;\n\tParameters: AnnotationValueListParameter[];\n\t$model: ODataModel;\n\t$qualifier?: string; // defined in case of ValueListWithFixedValues\n};\n\nexport type AnnotationValueListTypeByQualifier = Record<string, AnnotationValueListType>;\n\nconst columnNotAlreadyDefined = (columnDefs: ColumnDef[], vhKey: string): boolean => !columnDefs.some((column) => column.path === vhKey);\n\nexport const AnnotationLabel = \"@com.sap.vocabularies.Common.v1.Label\",\n\tAnnotationText = \"@com.sap.vocabularies.Common.v1.Text\",\n\tAnnotationTextUITextArrangement = \"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\",\n\tAnnotationValueListParameterIn = \"com.sap.vocabularies.Common.v1.ValueListParameterIn\",\n\tAnnotationValueListParameterConstant = \"com.sap.vocabularies.Common.v1.ValueListParameterConstant\",\n\tAnnotationValueListParameterOut = \"com.sap.vocabularies.Common.v1.ValueListParameterOut\",\n\tAnnotationValueListParameterInOut = \"com.sap.vocabularies.Common.v1.ValueListParameterInOut\",\n\tAnnotationValueListWithFixedValues = \"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\";\n\ntype AnnotationsForProperty = {\n\t\"@com.sap.vocabularies.Common.v1.ValueList\"?: {\n\t\tSearchSupported?: boolean;\n\t};\n\t\"@com.sap.vocabularies.Common.v1.Label\"?: string; // AnnotationLabel\n\t\"@com.sap.vocabularies.Common.v1.Text\"?: {\n\t\t// AnnotationText\n\t\t$Path: string;\n\t};\n\t\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"?: {\n\t\t// AnnotationTextUITextArrangement\n\t\t$EnumMember?: string;\n\t};\n\t\"@com.sap.vocabularies.UI.v1.HiddenFilter\"?: boolean;\n\t\"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\"?: boolean; // AnnotationValueListWithFixedValues\n\t\"@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers\"?: string[];\n\t\"@com.sap.vocabularies.UI.v1.Hidden\"?: string;\n};\n\ntype AnnotationSelectionField = {\n\t$PropertyPath: string;\n};\n\ntype AnnotationsForEntityType = {\n\t\"@com.sap.vocabularies.UI.v1.SelectionFields\"?: AnnotationSelectionField[];\n};\n\ntype ColumnProperty = {\n\t$Type: string;\n\t$kind: string;\n\t$isCollection: boolean;\n};\n\nexport type InOutParameter = {\n\tparmeterType: string;\n\tsource: string;\n\thelpPath: string;\n\tinitialValueFilterEmpty: boolean;\n\tconstantValue?: string | boolean;\n};\n\ntype ValueHelpPayloadInfo = {\n\tvhKeys?: string[];\n\tvhParameters?: InOutParameter[];\n};\n\ntype ValueHelpQualifierMap = Record<string, ValueHelpPayloadInfo>;\n\nexport type ValueHelpPayload = {\n\tpropertyPath: string;\n\tqualifiers: ValueHelpQualifierMap;\n\tvalueHelpQualifier: string;\n\tconditionModel?: any;\n\tisActionParameterDialog?: boolean;\n\tisUnitValueHelp?: boolean;\n\trequestGroupId?: string;\n\tuseMultiValueField?: boolean;\n\tisValueListWithFixedValues?: boolean;\n\tvalueHelpDescriptionPath?: string;\n\tpropertyDescriptionPath?: string;\n\tmaxLength?: number;\n\tupdateBindingDonePromise?: Promise<boolean> | null;\n\tvalueHelpKeyPath?: string;\n};\n\ntype ColumnDef = {\n\tpath: string;\n\tlabel: string;\n\tsortable: boolean;\n\tfilterable: boolean | CompiledBindingToolkitExpression;\n\t$Type: string;\n};\n\nexport type ValueListInfo = {\n\tkeyPath: string;\n\tdescriptionPath: string;\n\tfieldPropertyPath: string;\n\tvhKeys: string[];\n\tvhParameters: InOutParameter[];\n\tvalueListInfo: AnnotationValueListType;\n\tcolumnDefs: ColumnDef[];\n\tvalueHelpQualifier: string;\n};\n\ntype DisplayFormat = \"Description\" | \"ValueDescription\" | \"Value\" | \"DescriptionValue\";\n\ntype Path = {\n\tfieldPropertyPath: string;\n\tdescriptionPath: string;\n\tkey: string;\n};\n\ntype SorterType = {\n\tascending?: boolean;\n\tdescending?: boolean;\n\tpath?: string;\n\tname?: string;\n};\n\nfunction _getDefaultSortPropertyName(valueListInfo: AnnotationValueListType) {\n\tlet sortFieldName: string | undefined;\n\tconst metaModel = valueListInfo.$model.getMetaModel();\n\tconst entitySetAnnotations = metaModel.getObject(`/${valueListInfo.CollectionPath}@`) || {};\n\tconst sortRestrictionsInfo = getSortRestrictionsInfo(entitySetAnnotations);\n\tconst foundElement = valueListInfo.Parameters.find(function (element) {\n\t\treturn (\n\t\t\t(element.$Type === CommonAnnotationTypes.ValueListParameterInOut ||\n\t\t\t\telement.$Type === CommonAnnotationTypes.ValueListParameterOut ||\n\t\t\t\telement.$Type === CommonAnnotationTypes.ValueListParameterDisplayOnly) &&\n\t\t\t!(\n\t\t\t\tmetaModel.getObject(`/${valueListInfo.CollectionPath}/${element.ValueListProperty}@com.sap.vocabularies.UI.v1.Hidden`) ===\n\t\t\t\ttrue\n\t\t\t)\n\t\t);\n\t});\n\tif (foundElement) {\n\t\tif (\n\t\t\tmetaModel.getObject(\n\t\t\t\t`/${valueListInfo.CollectionPath}/${foundElement.ValueListProperty}@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement/$EnumMember`\n\t\t\t) === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\"\n\t\t) {\n\t\t\tsortFieldName = metaModel.getObject(\n\t\t\t\t`/${valueListInfo.CollectionPath}/${foundElement.ValueListProperty}@com.sap.vocabularies.Common.v1.Text/$Path`\n\t\t\t);\n\t\t} else {\n\t\t\tsortFieldName = foundElement.ValueListProperty;\n\t\t}\n\t}\n\tif (sortFieldName && (!sortRestrictionsInfo.propertyInfo[sortFieldName] || sortRestrictionsInfo.propertyInfo[sortFieldName].sortable)) {\n\t\treturn sortFieldName;\n\t} else {\n\t\treturn undefined;\n\t}\n}\n\nfunction _redundantDescription(oVLParameter: any, aColumnInfo: any[]) {\n\tconst oColumnInfo = aColumnInfo.find(function (columnInfo: any) {\n\t\treturn oVLParameter.ValueListProperty === columnInfo.textColumnName;\n\t});\n\tif (\n\t\toVLParameter.ValueListProperty === oColumnInfo?.textColumnName &&\n\t\t!oColumnInfo.keyColumnHidden &&\n\t\toColumnInfo.keyColumnDisplayFormat !== \"Value\"\n\t) {\n\t\treturn true;\n\t}\n\treturn undefined;\n}\n\nfunction _hasImportanceHigh(oValueListContext: any) {\n\treturn oValueListContext.Parameters.some(function (oParameter: any) {\n\t\treturn (\n\t\t\toParameter[\"@com.sap.vocabularies.UI.v1.Importance\"] &&\n\t\t\toParameter[\"@com.sap.vocabularies.UI.v1.Importance\"].$EnumMember === \"com.sap.vocabularies.UI.v1.ImportanceType/High\"\n\t\t);\n\t});\n}\n\nfunction _build$SelectString(control: any) {\n\tconst oViewData = control.getModel(\"viewData\");\n\tif (oViewData) {\n\t\tconst oData = oViewData.getData();\n\t\tif (oData) {\n\t\t\tconst aColumns = oData.columns;\n\t\t\tif (aColumns) {\n\t\t\t\treturn aColumns.reduce(function (sQuery: any, oProperty: any) {\n\t\t\t\t\t// Navigation properties (represented by X/Y) should not be added to $select.\n\t\t\t\t\t// TODO : They should be added as $expand=X($select=Y) instead\n\t\t\t\t\tif (oProperty.path && oProperty.path.indexOf(\"/\") === -1) {\n\t\t\t\t\t\tsQuery = sQuery ? `${sQuery},${oProperty.path}` : oProperty.path;\n\t\t\t\t\t}\n\t\t\t\t\treturn sQuery;\n\t\t\t\t}, undefined);\n\t\t\t}\n\t\t}\n\t}\n\treturn undefined;\n}\n\nfunction _getValueHelpColumnDisplayFormat(oPropertyAnnotations: any, isValueHelpWithFixedValues: any) {\n\tconst sDisplayMode = CommonUtils.computeDisplayMode(oPropertyAnnotations, undefined);\n\tconst oTextAnnotation = oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"];\n\tconst oTextArrangementAnnotation =\n\t\toTextAnnotation && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"];\n\tif (isValueHelpWithFixedValues) {\n\t\treturn oTextAnnotation && typeof oTextAnnotation !== \"string\" && oTextAnnotation.$Path ? sDisplayMode : \"Value\";\n\t} else {\n\t\t// Only explicit defined TextArrangements in a Value Help with Dialog are considered\n\t\treturn oTextArrangementAnnotation ? sDisplayMode : \"Value\";\n\t}\n}\n\nconst ValueListHelper = {\n\tgetValueListCollectionEntitySet: function (oValueListContext: any) {\n\t\tconst mValueList = oValueListContext.getObject();\n\t\treturn mValueList.$model.getMetaModel().createBindingContext(`/${mValueList.CollectionPath}`);\n\t},\n\n\tgetTableDelegate: function (oValueList: any) {\n\t\tlet sDefaultSortPropertyName = _getDefaultSortPropertyName(oValueList);\n\t\tif (sDefaultSortPropertyName) {\n\t\t\tsDefaultSortPropertyName = `'${sDefaultSortPropertyName}'`;\n\t\t}\n\t\treturn (\n\t\t\t\"{name: 'sap/fe/macros/internal/valuehelp/TableDelegate', payload: {collectionName: '\" +\n\t\t\toValueList.CollectionPath +\n\t\t\t\"'\" +\n\t\t\t(sDefaultSortPropertyName ? \", defaultSortPropertyName: \" + sDefaultSortPropertyName : \"\") +\n\t\t\t\"}}\"\n\t\t);\n\t},\n\n\tgetSortConditionsFromPresentationVariant: function (valueListInfo: AnnotationValueListType, isSuggestion: boolean) {\n\t\tif (valueListInfo.PresentationVariantQualifier !== undefined) {\n\t\t\tconst presentationVariantQualifier = valueListInfo.PresentationVariantQualifier\n\t\t\t\t\t? `#${valueListInfo.PresentationVariantQualifier}`\n\t\t\t\t\t: \"\",\n\t\t\t\tpresentationVariantPath = `/${valueListInfo.CollectionPath}/@com.sap.vocabularies.UI.v1.PresentationVariant${presentationVariantQualifier}`;\n\t\t\tconst presentationVariant = valueListInfo.$model.getMetaModel().getObject(presentationVariantPath) as\n\t\t\t\t| MetaModelType<PresentationVariant>\n\t\t\t\t| undefined;\n\t\t\tif (presentationVariant?.SortOrder) {\n\t\t\t\tconst sortConditions = {\n\t\t\t\t\tsorters: [] as SorterType[]\n\t\t\t\t};\n\n\t\t\t\tpresentationVariant.SortOrder.forEach(function (condition) {\n\t\t\t\t\tconst sorter: SorterType = {},\n\t\t\t\t\t\tpropertyPath = condition?.Property?.$PropertyPath;\n\t\t\t\t\tif (isSuggestion) {\n\t\t\t\t\t\tsorter.path = propertyPath;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsorter.name = propertyPath;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (condition.Descending) {\n\t\t\t\t\t\tsorter.descending = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsorter.ascending = true;\n\t\t\t\t\t}\n\t\t\t\t\tsortConditions.sorters.push(sorter);\n\t\t\t\t});\n\n\t\t\t\treturn isSuggestion ? `sorter: ${JSON.stringify(sortConditions.sorters)}` : JSON.stringify(sortConditions);\n\t\t\t}\n\t\t}\n\t\treturn;\n\t},\n\n\tgetPropertyPath: function (oParameters: any) {\n\t\treturn !oParameters.UnboundAction\n\t\t\t? `${oParameters.EntityTypePath}/${oParameters.Action}/${oParameters.Property}`\n\t\t\t: `/${oParameters.Action.substring(oParameters.Action.lastIndexOf(\".\") + 1)}/${oParameters.Property}`;\n\t},\n\n\tgetValueListProperty: function (oPropertyContext: any) {\n\t\tconst oValueListModel = oPropertyContext.getModel();\n\t\tconst mValueList = oValueListModel.getObject(\"/\");\n\t\treturn mValueList.$model.getMetaModel().createBindingContext(`/${mValueList.CollectionPath}/${oPropertyContext.getObject()}`);\n\t},\n\n\t// This function is used for value help m-table and mdc-table\n\tgetColumnVisibility: function (oValueList: any, oVLParameter: any, oSource: any) {\n\t\tconst isDropDownList = oSource && !!oSource.valueHelpWithFixedValues,\n\t\t\toColumnInfo = oSource.columnInfo,\n\t\t\tisVisible = !_redundantDescription(oVLParameter, oColumnInfo.columnInfos),\n\t\t\tisDialogTable = oColumnInfo.isDialogTable;\n\n\t\tif (isDropDownList || (!isDropDownList && isDialogTable) || (!isDropDownList && !_hasImportanceHigh(oValueList))) {\n\t\t\tconst columnWithHiddenAnnotation = oColumnInfo.columnInfos.find(function (columnInfo: any) {\n\t\t\t\treturn oVLParameter.ValueListProperty === columnInfo.columnName && columnInfo.hasHiddenAnnotation === true;\n\t\t\t});\n\t\t\treturn !columnWithHiddenAnnotation ? isVisible : false;\n\t\t} else if (!isDropDownList && _hasImportanceHigh(oValueList)) {\n\t\t\treturn oVLParameter &&\n\t\t\t\toVLParameter[\"@com.sap.vocabularies.UI.v1.Importance\"] &&\n\t\t\t\toVLParameter[\"@com.sap.vocabularies.UI.v1.Importance\"].$EnumMember === \"com.sap.vocabularies.UI.v1.ImportanceType/High\"\n\t\t\t\t? true\n\t\t\t\t: false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tgetColumnVisibilityInfo: function (oValueList: any, sPropertyFullPath: any, bIsDropDownListe: any, isDialogTable: any) {\n\t\tconst oMetaModel = oValueList.$model.getMetaModel();\n\t\tconst aColumnInfos: any[] = [];\n\t\tconst oColumnInfos = {\n\t\t\tisDialogTable: isDialogTable,\n\t\t\tcolumnInfos: aColumnInfos\n\t\t};\n\n\t\toValueList.Parameters.forEach(function (oParameter: any) {\n\t\t\tconst oPropertyAnnotations = oMetaModel.getObject(`/${oValueList.CollectionPath}/${oParameter.ValueListProperty}@`);\n\t\t\tconst oTextAnnotation = oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"];\n\t\t\tlet columnInfo: any = {};\n\t\t\tif (oTextAnnotation) {\n\t\t\t\tcolumnInfo = {\n\t\t\t\t\tkeyColumnHidden: oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false,\n\t\t\t\t\tkeyColumnDisplayFormat: oTextAnnotation && _getValueHelpColumnDisplayFormat(oPropertyAnnotations, bIsDropDownListe),\n\t\t\t\t\ttextColumnName: oTextAnnotation && oTextAnnotation.$Path,\n\t\t\t\t\tcolumnName: oParameter.ValueListProperty,\n\t\t\t\t\thasHiddenAnnotation: oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false\n\t\t\t\t};\n\t\t\t} else if (oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"]) {\n\t\t\t\tcolumnInfo = {\n\t\t\t\t\tcolumnName: oParameter.ValueListProperty,\n\t\t\t\t\thasHiddenAnnotation: oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false\n\t\t\t\t};\n\t\t\t}\n\t\t\toColumnInfos.columnInfos.push(columnInfo);\n\t\t});\n\n\t\treturn oColumnInfos;\n\t},\n\n\tgetTableItemsParameters: function (\n\t\tvalueListInfo: AnnotationValueListType,\n\t\trequestGroupId: string,\n\t\tisSuggestion: boolean,\n\t\tisValueHelpWithFixedValues: boolean\n\t) {\n\t\tconst itemParameters = [`path: '/${valueListInfo.CollectionPath}'`];\n\n\t\t// add select to oBindingInfo (BCP 2180255956 / 2170163012)\n\t\tconst selectString = _build$SelectString(this);\n\n\t\t// since there could be recommendations/recent values to show in the suggestion popover\n\t\t// hence we need to create some transient contexts on the valueHelp list binding\n\t\t// so we will set the updateGroupId of the list binding to avoid sending calls to the backend\n\t\t// we need to explicitly set $$sharedRequest to false to make sure we can create transient contexts in RAP\n\t\tif (requestGroupId) {\n\t\t\tconst selectStringPart = selectString ? `, '${selectString}'` : \"\";\n\n\t\t\titemParameters.push(\n\t\t\t\t`parameters: {$$sharedRequest: false, $$updateGroupId: \"donotsubmit\", $$groupId: '${requestGroupId}'${selectStringPart}}`\n\t\t\t);\n\t\t} else if (selectString) {\n\t\t\titemParameters.push(`parameters: {$$sharedRequest: false, $$updateGroupId: \"donotsubmit\", $select: '${selectString}'}`);\n\t\t}\n\n\t\tconst isSuspended = valueListInfo.Parameters.some(function (oParameter) {\n\t\t\treturn isSuggestion || oParameter.$Type === CommonAnnotationTypes.ValueListParameterIn;\n\t\t});\n\t\titemParameters.push(`suspended: ${isSuspended}`);\n\n\t\tif (!isValueHelpWithFixedValues) {\n\t\t\titemParameters.push(\"length: 10\");\n\t\t}\n\n\t\tconst sortConditionsFromPresentationVariant = ValueListHelper.getSortConditionsFromPresentationVariant(valueListInfo, isSuggestion);\n\n\t\tif (sortConditionsFromPresentationVariant) {\n\t\t\titemParameters.push(sortConditionsFromPresentationVariant);\n\t\t} else if (isValueHelpWithFixedValues) {\n\t\t\tconst defaultSortPropertyName = _getDefaultSortPropertyName(valueListInfo);\n\n\t\t\tif (defaultSortPropertyName) {\n\t\t\t\titemParameters.push(`sorter: [{path: '${defaultSortPropertyName}', ascending: true}]`);\n\t\t\t}\n\t\t}\n\n\t\treturn \"{\" + itemParameters.join(\", \") + \"}\";\n\t},\n\n\t// Is needed for \"external\" representation in qunit\n\thasImportance: function (oValueListContext: any) {\n\t\treturn _hasImportanceHigh(oValueListContext.getObject()) ? \"Importance/High\" : \"None\";\n\t},\n\n\t// Is needed for \"external\" representation in qunit\n\tgetMinScreenWidth: function (oValueList: any) {\n\t\treturn _hasImportanceHigh(oValueList) ? \"{= ${_VHUI>/minScreenWidth}}\" : \"416px\";\n\t},\n\n\t/**\n\t * Retrieves the column width for a given property.\n\t *\n\t * @param propertyPath The propertyPath\n\t * @returns The width as a string.\n\t */\n\tgetColumnWidth: function (propertyPath: DataModelObjectPath) {\n\t\tconst property = propertyPath.targetObject;\n\t\tlet relatedProperty: Property[] = [property];\n\t\t// The additional property could refer to the text, currency, unit or timezone\n\t\tconst additionalProperty =\n\t\t\t\tgetAssociatedTextProperty(property) ||\n\t\t\t\tgetAssociatedCurrencyProperty(property) ||\n\t\t\t\tgetAssociatedUnitProperty(property) ||\n\t\t\t\tgetAssociatedTimezoneProperty(property),\n\t\t\ttextAnnotation = property.annotations?.Common?.Text,\n\t\t\ttextArrangement = textAnnotation?.annotations?.UI?.TextArrangement?.toString(),\n\t\t\tlabel = property.annotations?.Common?.Label?.toString(),\n\t\t\tdisplayMode = textArrangement && getDisplayMode(propertyPath);\n\t\tif (additionalProperty) {\n\t\t\tif (displayMode === \"Description\") {\n\t\t\t\trelatedProperty = [additionalProperty];\n\t\t\t} else if (!textAnnotation || (displayMode && displayMode !== \"Value\")) {\n\t\t\t\trelatedProperty.push(additionalProperty);\n\t\t\t}\n\t\t}\n\n\t\tlet size = 0;\n\t\tconst instances: ODataType[] = [];\n\n\t\trelatedProperty.forEach((prop: Property) => {\n\t\t\tconst propertyTypeConfig = getTypeConfig(prop, undefined);\n\t\t\tconst PropertyODataConstructor = ObjectPath.get(propertyTypeConfig.type);\n\t\t\tif (PropertyODataConstructor) {\n\t\t\t\tinstances.push(new PropertyODataConstructor(propertyTypeConfig.formatOptions, propertyTypeConfig.constraints));\n\t\t\t}\n\t\t});\n\t\tconst sWidth = Util.calcColumnWidth(instances, label);\n\t\tsize = sWidth ? parseFloat(sWidth.replace(\"rem\", \"\")) : 0;\n\n\t\tif (size === 0) {\n\t\t\tLog.error(`Cannot compute the column width for property: ${property.name}`);\n\t\t}\n\t\treturn size <= 20 ? size.toString() + \"rem\" : \"20rem\";\n\t},\n\n\tgetOutParameterPaths: function (aParameters: any) {\n\t\tlet sPath = \"\";\n\t\taParameters.forEach(function (oParameter: any) {\n\t\t\tif (oParameter.$Type.endsWith(\"Out\")) {\n\t\t\t\tsPath += `{${oParameter.ValueListProperty}}`;\n\t\t\t}\n\t\t});\n\t\treturn sPath;\n\t},\n\n\tentityIsSearchable: function (\n\t\tpropertyAnnotations: AnnotationsForProperty,\n\t\tcollectionAnnotations: MetaModelEntitySetAnnotation\n\t): boolean {\n\t\tconst searchSupported = propertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueList\"]?.SearchSupported,\n\t\t\tsearchable = collectionAnnotations[\"@Org.OData.Capabilities.V1.SearchRestrictions\"]?.Searchable;\n\n\t\tif (\n\t\t\t(searchable === undefined && searchSupported === false) ||\n\t\t\t(searchable === true && searchSupported === false) ||\n\t\t\tsearchable === false\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t * Returns the condition path required for the condition model.\n\t * For e.g. <1:N-PropertyName>*\\/<1:1-PropertyName>/<PropertyName>.\n\t *\n\t * @param metaModel The metamodel instance\n\t * @param entitySet The entity set path\n\t * @param propertyPath The property path\n\t * @returns The formatted condition path\n\t * @private\n\t */\n\t_getConditionPath: function (metaModel: ODataMetaModel, entitySet: string, propertyPath: string): string {\n\t\t// (see also: sap/fe/core/converters/controls/ListReport/FilterBar.ts)\n\t\tconst parts = propertyPath.split(\"/\");\n\t\tlet conditionPath = \"\",\n\t\t\tpartialPath: string | undefined;\n\n\t\twhile (parts.length) {\n\t\t\tlet part = parts.shift() as string;\n\t\t\tpartialPath = partialPath ? `${partialPath}/${part}` : part;\n\t\t\tconst property = metaModel.getObject(`${entitySet}/${partialPath}`);\n\t\t\tif (property && property.$kind === \"NavigationProperty\" && property.$isCollection) {\n\t\t\t\tpart += \"*\";\n\t\t\t}\n\t\t\tconditionPath = conditionPath ? `${conditionPath}/${part}` : part;\n\t\t}\n\t\treturn conditionPath;\n\t},\n\n\t/**\n\t * Returns array of column definitions corresponding to properties defined as Selection Fields on the CollectionPath entity set in a ValueHelp.\n\t *\n\t * @param metaModel The metamodel instance\n\t * @param entitySet The entity set path\n\t * @returns Array of column definitions\n\t * @private\n\t */\n\t_getColumnDefinitionFromSelectionFields: function (metaModel: ODataMetaModel, entitySet: string): ColumnDef[] {\n\t\tconst columnDefs: ColumnDef[] = [],\n\t\t\tentityTypeAnnotations = metaModel.getObject(`${entitySet}/@`) as AnnotationsForEntityType,\n\t\t\tselectionFields = entityTypeAnnotations[\"@com.sap.vocabularies.UI.v1.SelectionFields\"];\n\n\t\tif (selectionFields) {\n\t\t\tselectionFields.forEach(function (selectionField: AnnotationSelectionField) {\n\t\t\t\tconst selectionFieldPath = `${entitySet}/${selectionField.$PropertyPath}`,\n\t\t\t\t\tconditionPath = ValueListHelper._getConditionPath(metaModel, entitySet, selectionField.$PropertyPath),\n\t\t\t\t\tpropertyAnnotations = metaModel.getObject(`${selectionFieldPath}@`) as AnnotationsForProperty,\n\t\t\t\t\tcolumnDef = {\n\t\t\t\t\t\tpath: conditionPath,\n\t\t\t\t\t\tlabel: propertyAnnotations[AnnotationLabel] || selectionFieldPath,\n\t\t\t\t\t\tsortable: true,\n\t\t\t\t\t\tfilterable: isPropertyFilterable(metaModel, entitySet, selectionField.$PropertyPath, false),\n\t\t\t\t\t\t$Type: metaModel.getObject(selectionFieldPath)?.$Type\n\t\t\t\t\t};\n\t\t\t\tcolumnDefs.push(columnDef);\n\t\t\t});\n\t\t}\n\n\t\treturn columnDefs;\n\t},\n\n\t_mergeColumnDefinitionsFromProperties: function (\n\t\tcolumnDefs: ColumnDef[],\n\t\tvalueListInfo: AnnotationValueListType,\n\t\tvalueListProperty: string,\n\t\tproperty: ColumnProperty,\n\t\tpropertyAnnotations: AnnotationsForProperty\n\t): void {\n\t\tlet columnPath = valueListProperty,\n\t\t\tcolumnPropertyType = property.$Type;\n\t\tconst label = propertyAnnotations[AnnotationLabel] || columnPath,\n\t\t\ttextAnnotation = propertyAnnotations[AnnotationText];\n\n\t\tif (\n\t\t\ttextAnnotation &&\n\t\t\tpropertyAnnotations[AnnotationTextUITextArrangement]?.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\"\n\t\t) {\n\t\t\t// the column property is the one coming from the text annotation\n\t\t\tcolumnPath = textAnnotation.$Path;\n\t\t\tconst textPropertyPath = `/${valueListInfo.CollectionPath}/${columnPath}`;\n\t\t\tcolumnPropertyType = valueListInfo.$model.getMetaModel().getObject(textPropertyPath).$Type as string;\n\t\t}\n\n\t\tif (columnNotAlreadyDefined(columnDefs, columnPath)) {\n\t\t\tconst columnDef: ColumnDef = {\n\t\t\t\tpath: columnPath,\n\t\t\t\tlabel: label,\n\t\t\t\tsortable: true,\n\t\t\t\tfilterable: !propertyAnnotations[\"@com.sap.vocabularies.UI.v1.HiddenFilter\"],\n\t\t\t\t$Type: columnPropertyType\n\t\t\t};\n\t\t\tcolumnDefs.push(columnDef);\n\t\t}\n\t},\n\n\tfilterInOutParameters: function (vhParameters: InOutParameter[], typeFilter: string[]) {\n\t\treturn vhParameters.filter(function (parameter) {\n\t\t\treturn typeFilter.indexOf(parameter.parmeterType) > -1;\n\t\t});\n\t},\n\n\tgetInParameters: function (vhParameters: InOutParameter[]) {\n\t\treturn ValueListHelper.filterInOutParameters(vhParameters, [\n\t\t\tAnnotationValueListParameterIn,\n\t\t\tAnnotationValueListParameterConstant,\n\t\t\tAnnotationValueListParameterInOut\n\t\t]);\n\t},\n\n\tgetOutParameters: function (vhParameters: InOutParameter[]) {\n\t\treturn ValueListHelper.filterInOutParameters(vhParameters, [AnnotationValueListParameterOut, AnnotationValueListParameterInOut]);\n\t},\n\n\tcreateVHUIModel: function (valueHelp: ValueHelp, propertyPath: string, metaModel: ODataMetaModel): JSONModel {\n\t\t// setting the _VHUI model evaluated in the ValueListTable fragment\n\t\tconst vhUIModel = new JSONModel({}),\n\t\t\tpropertyAnnotations = metaModel.getObject(`${propertyPath}@`) as AnnotationsForProperty;\n\n\t\tvalueHelp.setModel(vhUIModel, \"_VHUI\");\n\t\t// Identifies the \"ContextDependent-Scenario\"\n\t\tvhUIModel.setProperty(\n\t\t\t\"/hasValueListRelevantQualifiers\",\n\t\t\t!!propertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers\"]\n\t\t);\n\t\t/* Property label for dialog title */\n\t\tvhUIModel.setProperty(\"/propertyLabel\", propertyAnnotations[AnnotationLabel]);\n\n\t\treturn vhUIModel;\n\t},\n\n\t/**\n\t * Returns the title of the value help dialog.\n\t * By default, the data field label is used, otherwise either the property label or the value list label is used as a fallback.\n\t * For context-dependent value helps, by default the value list label is used, otherwise either the property label or the data field label is used as a fallback.\n\t *\n\t * @param valueHelp The valueHelp instance\n\t * @param valuehelpLabel The label in the value help metadata\n\t * @returns The title for the valueHelp dialog\n\t * @private\n\t */\n\t_getDialogTitle: function (valueHelp: ValueHelp, valuehelpLabel: string | undefined): string {\n\t\tconst propertyLabel = (valueHelp.getModel(\"_VHUI\") as JSONModel).getProperty(\"/propertyLabel\");\n\t\tconst dataFieldLabel = valueHelp.getControl()?.getProperty(\"label\");\n\t\treturn (valueHelp.getModel(\"_VHUI\") as JSONModel).getProperty(\"/hasValueListRelevantQualifiers\")\n\t\t\t? valuehelpLabel || propertyLabel || dataFieldLabel\n\t\t\t: dataFieldLabel || propertyLabel || valuehelpLabel;\n\t},\n\n\tdestroyVHContent: function (valueHelp: ValueHelp): void {\n\t\tif (valueHelp.getDialog()) {\n\t\t\tvalueHelp.getDialog().destroyContent();\n\t\t}\n\t\tif (valueHelp.getTypeahead()) {\n\t\t\tvalueHelp.getTypeahead().destroyContent();\n\t\t}\n\t},\n\n\tputDefaultQualifierFirst: function (qualifiers: string[]) {\n\t\tconst indexDefaultVH = qualifiers.indexOf(\"\");\n\n\t\t// default ValueHelp without qualifier should be the first\n\t\tif (indexDefaultVH > 0) {\n\t\t\tqualifiers.unshift(qualifiers[indexDefaultVH]);\n\t\t\tqualifiers.splice(indexDefaultVH + 1, 1);\n\t\t}\n\t\treturn qualifiers;\n\t},\n\n\t_getContextPrefix: function (bindingContext: Context | undefined, propertyBindingParts: string[]) {\n\t\tif (bindingContext && bindingContext.getPath()) {\n\t\t\tconst bindigContextParts = bindingContext.getPath().split(\"/\");\n\t\t\tif (propertyBindingParts.length - bindigContextParts.length > 1) {\n\t\t\t\tconst contextPrefixParts = [];\n\t\t\t\tfor (let i = bindigContextParts.length; i < propertyBindingParts.length - 1; i++) {\n\t\t\t\t\tcontextPrefixParts.push(propertyBindingParts[i]);\n\t\t\t\t}\n\t\t\t\treturn `${contextPrefixParts.join(\"/\")}/`;\n\t\t\t}\n\t\t}\n\n\t\treturn \"\";\n\t},\n\n\t_getVhParameter: function (\n\t\tconditionModel: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontextPrefix: string,\n\t\tparameter: AnnotationValueListParameter,\n\t\tvhMetaModel: ODataMetaModel,\n\t\tlocalDataPropertyPath: string\n\t): InOutParameter {\n\t\tlet valuePath = \"\";\n\t\tconst bindingContext = valueHelp.getBindingContext();\n\t\tif (conditionModel && conditionModel.length > 0) {\n\t\t\tif (\n\t\t\t\tvalueHelp.getParent()?.isA(\"sap.ui.mdc.Table\") &&\n\t\t\t\tbindingContext &&\n\t\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t\t])\n\t\t\t) {\n\t\t\t\t// Special handling for value help used in filter dialog\n\t\t\t\tconst parts = localDataPropertyPath.split(\"/\");\n\t\t\t\tif (parts.length > 1) {\n\t\t\t\t\tconst firstNavigationProperty = parts[0];\n\t\t\t\t\tconst oBoundEntity = vhMetaModel.getMetaContext(bindingContext.getPath());\n\t\t\t\t\tconst sPathOfTable = (valueHelp.getParent() as any).getRowBinding().getPath(); //TODO\n\t\t\t\t\tif (oBoundEntity.getObject(`${sPathOfTable}/$Partner`) === firstNavigationProperty) {\n\t\t\t\t\t\t// Using the condition model doesn't make any sense in case an in-parameter uses a navigation property\n\t\t\t\t\t\t// referring to the partner. Therefore reducing the path and using the FVH context instead of the condition model\n\t\t\t\t\t\tvaluePath = localDataPropertyPath.replace(firstNavigationProperty + \"/\", \"\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!valuePath) {\n\t\t\t\tvaluePath = conditionModel + \">/conditions/\" + localDataPropertyPath;\n\t\t\t}\n\t\t} else {\n\t\t\tvaluePath = contextPrefix + localDataPropertyPath;\n\t\t}\n\n\t\treturn {\n\t\t\tparmeterType: parameter.$Type,\n\t\t\tsource: valuePath,\n\t\t\thelpPath: parameter.ValueListProperty,\n\t\t\tconstantValue: parameter.Constant,\n\t\t\tinitialValueFilterEmpty: Boolean(parameter.InitialValueIsSignificant)\n\t\t};\n\t},\n\n\t_parameterIsA(parameter: AnnotationValueListParameter, parameterTypes: CommonAnnotationTypes[]): boolean {\n\t\treturn parameterTypes.includes(parameter.$Type as CommonAnnotationTypes);\n\t},\n\n\t_enrichPath: function (\n\t\tpath: Path,\n\t\tpropertyPath: string,\n\t\tlocalDataPropertyPath: string,\n\t\tparameter: AnnotationValueListParameter,\n\t\tpropertyName: string | undefined,\n\t\tpropertyAnnotations: AnnotationsForProperty\n\t) {\n\t\tif (\n\t\t\t!path.key &&\n\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t]) &&\n\t\t\tlocalDataPropertyPath === propertyName\n\t\t) {\n\t\t\tpath.fieldPropertyPath = propertyPath;\n\t\t\tpath.key = parameter.ValueListProperty;\n\n\t\t\t//Only the text annotation of the key can specify the description\n\t\t\tpath.descriptionPath = propertyAnnotations[AnnotationText]?.$Path || \"\";\n\t\t}\n\t},\n\n\t_enrichKeys: function (vhKeys: string[], parameter: AnnotationValueListParameter) {\n\t\tif (\n\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t]) &&\n\t\t\t!vhKeys.includes(parameter.ValueListProperty)\n\t\t) {\n\t\t\tvhKeys.push(parameter.ValueListProperty);\n\t\t}\n\t},\n\n\t_processParameters: function (\n\t\tannotationValueListType: AnnotationValueListType,\n\t\tpropertyName: string | undefined,\n\t\tconditionModel: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontextPrefix: string,\n\t\tvhMetaModel: ODataMetaModel,\n\t\tvalueHelpQualifier: string\n\t) {\n\t\tconst metaModel = annotationValueListType.$model.getMetaModel(),\n\t\t\tentitySetPath = `/${annotationValueListType.CollectionPath}`,\n\t\t\tentityType = metaModel.getObject(`${entitySetPath}/`);\n\t\tif (entityType === undefined) {\n\t\t\tLog.error(`Inconsistent value help metadata: Entity ${entitySetPath} is not defined`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst columnDefs = ValueListHelper._getColumnDefinitionFromSelectionFields(metaModel, entitySetPath),\n\t\t\tvhParameters: InOutParameter[] = [],\n\t\t\tvhKeys: string[] = entityType.$Key ? [...entityType.$Key] : [];\n\n\t\tconst path: Path = {\n\t\t\tfieldPropertyPath: \"\",\n\t\t\tdescriptionPath: \"\",\n\t\t\tkey: \"\"\n\t\t};\n\n\t\tfor (const parameter of annotationValueListType.Parameters) {\n\t\t\t//All String fields are allowed for filter\n\t\t\tconst propertyPath = `/${annotationValueListType.CollectionPath}/${parameter.ValueListProperty}`,\n\t\t\t\tproperty = metaModel.getObject(propertyPath),\n\t\t\t\tpropertyAnnotations = (metaModel.getObject(`${propertyPath}@`) || {}) as AnnotationsForProperty,\n\t\t\t\tlocalDataPropertyPath = parameter.LocalDataProperty?.$PropertyPath || \"\";\n\n\t\t\t// If property is undefined, then the property coming for the entry isn't defined in\n\t\t\t// the metamodel, therefore we don't need to add it in the in/out parameters\n\t\t\tif (property) {\n\t\t\t\t// Search for the *out Parameter mapped to the local property\n\t\t\t\tValueListHelper._enrichPath(path, propertyPath, localDataPropertyPath, parameter, propertyName, propertyAnnotations);\n\n\t\t\t\tconst valueListProperty = parameter.ValueListProperty;\n\t\t\t\tValueListHelper._mergeColumnDefinitionsFromProperties(\n\t\t\t\t\tcolumnDefs,\n\t\t\t\t\tannotationValueListType,\n\t\t\t\t\tvalueListProperty,\n\t\t\t\t\tproperty,\n\t\t\t\t\tpropertyAnnotations\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t//In and InOut and Out\n\t\t\tif (\n\t\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t\t]) &&\n\t\t\t\tlocalDataPropertyPath !== propertyName\n\t\t\t) {\n\t\t\t\tconst vhParameter = ValueListHelper._getVhParameter(\n\t\t\t\t\tconditionModel,\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontextPrefix,\n\t\t\t\t\tparameter,\n\t\t\t\t\tvhMetaModel,\n\t\t\t\t\tlocalDataPropertyPath\n\t\t\t\t);\n\t\t\t\tvhParameters.push(vhParameter);\n\t\t\t}\n\n\t\t\t//Constant as InParamter for filtering\n\t\t\tif (parameter.$Type === AnnotationValueListParameterConstant) {\n\t\t\t\tvhParameters.push({\n\t\t\t\t\tparmeterType: parameter.$Type,\n\t\t\t\t\tsource: parameter.ValueListProperty,\n\t\t\t\t\thelpPath: parameter.ValueListProperty,\n\t\t\t\t\tconstantValue: parameter.Constant,\n\t\t\t\t\tinitialValueFilterEmpty: Boolean(parameter.InitialValueIsSignificant)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Enrich keys with out-parameters\n\t\t\tValueListHelper._enrichKeys(vhKeys, parameter);\n\t\t}\n\n\t\t/* Ensure that vhKeys are part of the columnDefs, otherwise it is not considered in $select (BCP 2270141154) */\n\t\tfor (const vhKey of vhKeys) {\n\t\t\tif (columnNotAlreadyDefined(columnDefs, vhKey)) {\n\t\t\t\tconst columnDef: ColumnDef = {\n\t\t\t\t\tpath: vhKey,\n\t\t\t\t\t$Type: metaModel.getObject(`/${annotationValueListType.CollectionPath}/${path.key}`)?.$Type,\n\t\t\t\t\tlabel: \"\",\n\t\t\t\t\tsortable: false,\n\t\t\t\t\tfilterable: undefined\n\t\t\t\t};\n\t\t\t\tcolumnDefs.push(columnDef);\n\t\t\t}\n\t\t}\n\n\t\tconst valuelistInfo: ValueListInfo = {\n\t\t\tkeyPath: path.key,\n\t\t\tdescriptionPath: path.descriptionPath,\n\t\t\tfieldPropertyPath: path.fieldPropertyPath,\n\t\t\tvhKeys: vhKeys,\n\t\t\tvhParameters: vhParameters,\n\t\t\tvalueListInfo: annotationValueListType,\n\t\t\tcolumnDefs: columnDefs,\n\t\t\tvalueHelpQualifier\n\t\t};\n\t\treturn valuelistInfo;\n\t},\n\n\t_logError: function (propertyPath: string, error?: unknown) {\n\t\tconst status = error ? (error as XMLHttpRequest).status : undefined;\n\t\tconst message = error instanceof Error ? error.message : String(error);\n\t\tconst msg = status === 404 ? `Metadata not found (${status}) for value help of property ${propertyPath}` : message;\n\n\t\tLog.error(msg);\n\t},\n\n\tgetValueListInfo: async function (valueHelp: ValueHelp, propertyPath: string, payload: ValueHelpPayload): Promise<ValueListInfo[]> {\n\t\tconst bindingContext = valueHelp.getBindingContext() as Context | undefined,\n\t\t\tconditionModel = payload.conditionModel,\n\t\t\tvhMetaModel = (valueHelp.getModel() as ODataModel).getMetaModel(),\n\t\t\tvalueListInfos: ValueListInfo[] = [],\n\t\t\tpropertyPathParts = propertyPath.split(\"/\");\n\t\ttry {\n\t\t\tconst valueListByQualifier = (await vhMetaModel.requestValueListInfo(\n\t\t\t\tpropertyPath,\n\t\t\t\ttrue,\n\t\t\t\tbindingContext\n\t\t\t)) as AnnotationValueListTypeByQualifier;\n\t\t\tconst valueHelpQualifiers = ValueListHelper.putDefaultQualifierFirst(Object.keys(valueListByQualifier)),\n\t\t\t\tpropertyName = propertyPathParts.pop();\n\n\t\t\tconst contextPrefix = payload.useMultiValueField ? ValueListHelper._getContextPrefix(bindingContext, propertyPathParts) : \"\";\n\n\t\t\tfor (const valueHelpQualifier of valueHelpQualifiers) {\n\t\t\t\t// Add column definitions for properties defined as Selection fields on the CollectionPath entity set.\n\t\t\t\tconst annotationValueListType = valueListByQualifier[valueHelpQualifier];\n\n\t\t\t\tconst valueListInfo = ValueListHelper._processParameters(\n\t\t\t\t\tannotationValueListType,\n\t\t\t\t\tpropertyName,\n\t\t\t\t\tconditionModel,\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontextPrefix,\n\t\t\t\t\tvhMetaModel,\n\t\t\t\t\tannotationValueListType.$qualifier ?? valueHelpQualifier // for ValueListWithFixedValues, get the qualifier from $qualifier\n\t\t\t\t);\n\t\t\t\t/* Only consistent value help definitions shall be part of the value help */\n\t\t\t\tif (valueListInfo) {\n\t\t\t\t\tvalueListInfos.push(valueListInfo);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis._logError(propertyPath, err);\n\n\t\t\tValueListHelper.destroyVHContent(valueHelp);\n\t\t}\n\t\treturn valueListInfos;\n\t},\n\n\tALLFRAGMENTS: undefined as any,\n\tlogFragment: undefined as any,\n\n\t_logTemplatedFragments: function (propertyPath: string, fragmentName: string, fragmentDefinition: any): void {\n\t\tconst logInfo = {\n\t\t\tpath: propertyPath,\n\t\t\tfragmentName: fragmentName,\n\t\t\tfragment: fragmentDefinition\n\t\t};\n\t\tif (Log.getLevel() === Level.DEBUG) {\n\t\t\t//In debug mode we log all generated fragments\n\t\t\tValueListHelper.ALLFRAGMENTS = ValueListHelper.ALLFRAGMENTS || [];\n\t\t\tValueListHelper.ALLFRAGMENTS.push(logInfo);\n\t\t}\n\t\tif (ValueListHelper.logFragment) {\n\t\t\t//One Tool Subscriber allowed\n\t\t\tsetTimeout(function () {\n\t\t\t\tValueListHelper.logFragment(logInfo);\n\t\t\t}, 0);\n\t\t}\n\t},\n\n\t_templateFragment: async function <T extends Table | MdcInnerTable | MdcFilterBar>(\n\t\tfragmentName: string,\n\t\tvalueListInfo: ValueListInfo,\n\t\tsourceModel: JSONModel,\n\t\tpropertyPath: string\n\t): Promise<T> {\n\t\tconst localValueListInfo = valueListInfo.valueListInfo,\n\t\t\tvalueListModel = new JSONModel(localValueListInfo),\n\t\t\tvalueListServiceMetaModel = localValueListInfo.$model.getMetaModel(),\n\t\t\tviewData = new JSONModel({\n\t\t\t\tconverterType: \"ListReport\",\n\t\t\t\tcolumns: valueListInfo.columnDefs || null\n\t\t\t});\n\n\t\tconst fragmentDefinition = await XMLPreprocessor.process(\n\t\t\tXMLTemplateProcessor.loadTemplate(fragmentName, \"fragment\"),\n\t\t\t{ name: fragmentName },\n\t\t\t{\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tvalueList: valueListModel.createBindingContext(\"/\"),\n\t\t\t\t\tcontextPath: valueListServiceMetaModel.createBindingContext(`/${localValueListInfo.CollectionPath}/`),\n\t\t\t\t\tsource: sourceModel.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tvalueList: valueListModel,\n\t\t\t\t\tcontextPath: valueListServiceMetaModel,\n\t\t\t\t\tsource: sourceModel,\n\t\t\t\t\tmetaModel: valueListServiceMetaModel,\n\t\t\t\t\tviewData: viewData\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tValueListHelper._logTemplatedFragments(propertyPath, fragmentName, fragmentDefinition);\n\t\treturn (await Fragment.load({ definition: fragmentDefinition })) as T;\n\t},\n\n\t_getContentId: function (valueHelpId: string, valueHelpQualifier: string, isTypeahead: boolean): string {\n\t\tconst contentType = isTypeahead ? \"Popover\" : \"Dialog\";\n\n\t\treturn `${valueHelpId}::${contentType}::qualifier::${valueHelpQualifier}`;\n\t},\n\n\t_addInOutParametersToPayload: function (payload: ValueHelpPayload, valueListInfo: ValueListInfo): void {\n\t\tconst valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\n\t\tif (!payload.qualifiers) {\n\t\t\tpayload.qualifiers = {};\n\t\t}\n\n\t\tif (!payload.qualifiers[valueHelpQualifier]) {\n\t\t\tpayload.qualifiers[valueHelpQualifier] = {\n\t\t\t\tvhKeys: valueListInfo.vhKeys,\n\t\t\t\tvhParameters: valueListInfo.vhParameters\n\t\t\t};\n\t\t}\n\t},\n\n\t_getValueHelpColumnDisplayFormat: function (\n\t\tpropertyAnnotations: AnnotationsForProperty,\n\t\tisValueHelpWithFixedValues: boolean\n\t): DisplayFormat {\n\t\tconst displayMode = CommonUtils.computeDisplayMode(propertyAnnotations, undefined),\n\t\t\ttextAnnotation = propertyAnnotations && propertyAnnotations[AnnotationText],\n\t\t\ttextArrangementAnnotation = textAnnotation && propertyAnnotations[AnnotationTextUITextArrangement];\n\n\t\tif (isValueHelpWithFixedValues) {\n\t\t\treturn textAnnotation && typeof textAnnotation !== \"string\" && textAnnotation.$Path ? displayMode : \"Value\";\n\t\t} else {\n\t\t\t// Only explicit defined TextArrangements in a Value Help with Dialog are considered\n\t\t\treturn textArrangementAnnotation ? displayMode : \"Value\";\n\t\t}\n\t},\n\n\t_getWidthInRem: function (control: Control, isUnitValueHelp: boolean): number {\n\t\tlet width = control.$().width(); // JQuery\n\t\tif (isUnitValueHelp && width) {\n\t\t\twidth = 0.3 * width;\n\t\t}\n\t\tconst floatWidth = width ? parseFloat(String(Rem.fromPx(width))) : 0;\n\n\t\treturn isNaN(floatWidth) ? 0 : floatWidth;\n\t},\n\n\t_getTableWidth: function (table: Table, minWidth: number): string {\n\t\tlet width: string;\n\t\tconst columns = table.getColumns(),\n\t\t\tvisibleColumns =\n\t\t\t\t(columns &&\n\t\t\t\t\tcolumns.filter(function (column) {\n\t\t\t\t\t\treturn column && column.getVisible && column.getVisible();\n\t\t\t\t\t})) ||\n\t\t\t\t[],\n\t\t\tsumWidth = visibleColumns.reduce(function (sum, column) {\n\t\t\t\twidth = column.getWidth();\n\t\t\t\tif (width && width.endsWith(\"px\")) {\n\t\t\t\t\twidth = String(Rem.fromPx(width));\n\t\t\t\t}\n\t\t\t\tconst floatWidth = parseFloat(width);\n\n\t\t\t\treturn sum + (isNaN(floatWidth) ? 9 : floatWidth);\n\t\t\t}, visibleColumns.length);\n\t\treturn `${Math.max(sumWidth, minWidth)}em`;\n\t},\n\n\t_createValueHelpTypeahead: async function (\n\t\tpropertyPath: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontent: MTable,\n\t\tvalueListInfo: ValueListInfo,\n\t\tpayload: ValueHelpPayload\n\t) {\n\t\tconst contentId = content.getId(),\n\t\t\tpropertyAnnotations = (valueHelp.getModel() as ODataModel)\n\t\t\t\t.getMetaModel()!\n\t\t\t\t.getObject(`${propertyPath}@`) as AnnotationsForProperty,\n\t\t\tvalueHelpWithFixedValues = propertyAnnotations[AnnotationValueListWithFixedValues] ?? false,\n\t\t\tisDialogTable = false,\n\t\t\tcolumnInfo = ValueListHelper.getColumnVisibilityInfo(\n\t\t\t\tvalueListInfo.valueListInfo,\n\t\t\t\tpropertyPath,\n\t\t\t\tvalueHelpWithFixedValues,\n\t\t\t\tisDialogTable\n\t\t\t),\n\t\t\tsourceModel = new JSONModel({\n\t\t\t\tid: contentId,\n\t\t\t\tgroupId: payload.requestGroupId || undefined,\n\t\t\t\tbSuggestion: true,\n\t\t\t\tpropertyPath: propertyPath,\n\t\t\t\tcolumnInfo: columnInfo,\n\t\t\t\tvalueHelpWithFixedValues: valueHelpWithFixedValues\n\t\t\t});\n\n\t\tcontent.setKeyPath(valueListInfo.keyPath);\n\t\tcontent.setDescriptionPath(valueListInfo.descriptionPath);\n\t\tpayload.isValueListWithFixedValues = valueHelpWithFixedValues;\n\n\t\tconst collectionAnnotations =\n\t\t\tvalueListInfo.valueListInfo.$model.getMetaModel().getObject(`/${valueListInfo.valueListInfo.CollectionPath}@`) || {};\n\n\t\tcontent.setFilterFields(ValueListHelper.entityIsSearchable(propertyAnnotations, collectionAnnotations) ? \"$search\" : \"\");\n\n\t\tconst table = await ValueListHelper._templateFragment<Table>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListTable\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModel,\n\t\t\tpropertyPath\n\t\t);\n\n\t\ttable.setModel(valueListInfo.valueListInfo.$model);\n\n\t\tLog.info(`Value List- suggest Table XML content created [${propertyPath}]`, table.getMetadata().getName(), \"MDC Templating\");\n\n\t\tcontent.setTable(table);\n\n\t\tconst field = valueHelp.getControl();\n\n\t\tif (\n\t\t\tfield !== undefined &&\n\t\t\t(field.isA<FilterField>(\"sap.ui.mdc.FilterField\") ||\n\t\t\t\tfield.isA<Field>(\"sap.ui.mdc.Field\") ||\n\t\t\t\tfield.isA<MultiValueField>(\"sap.ui.mdc.MultiValueField\"))\n\t\t) {\n\t\t\t//Can the filterfield be something else that we need the .isA() check?\n\t\t\tconst reduceWidthForUnitValueHelp = Boolean(payload.isUnitValueHelp);\n\t\t\tconst tableWidth = ValueListHelper._getTableWidth(table, ValueListHelper._getWidthInRem(field, reduceWidthForUnitValueHelp));\n\t\t\ttable.setWidth(tableWidth);\n\n\t\t\tif (valueHelpWithFixedValues) {\n\t\t\t\ttable.setMode((field as FieldBase).getMaxConditions() === 1 ? \"SingleSelectMaster\" : \"MultiSelect\");\n\t\t\t} else {\n\t\t\t\ttable.setMode(\"SingleSelectMaster\");\n\t\t\t}\n\t\t}\n\t},\n\n\t_createValueHelpDialog: async function (\n\t\tpropertyPath: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontent: MDCTable,\n\t\tvalueListInfo: ValueListInfo,\n\t\tpayload: ValueHelpPayload\n\t): Promise<void> {\n\t\tconst propertyAnnotations = (valueHelp.getModel() as ODataModel)\n\t\t\t\t.getMetaModel()!\n\t\t\t\t.getObject(`${propertyPath}@`) as AnnotationsForProperty,\n\t\t\tisDropDownListe = false,\n\t\t\tisDialogTable = true,\n\t\t\tcolumnInfo = ValueListHelper.getColumnVisibilityInfo(valueListInfo.valueListInfo, propertyPath, isDropDownListe, isDialogTable),\n\t\t\tsourceModel = new JSONModel({\n\t\t\t\tid: content.getId(),\n\t\t\t\tgroupId: payload.requestGroupId || undefined,\n\t\t\t\tbSuggestion: false,\n\t\t\t\tcolumnInfo: columnInfo,\n\t\t\t\tvalueHelpWithFixedValues: isDropDownListe\n\t\t\t});\n\n\t\tcontent.setKeyPath(valueListInfo.keyPath);\n\t\tcontent.setDescriptionPath(valueListInfo.descriptionPath);\n\n\t\tconst collectionAnnotations =\n\t\t\tvalueListInfo.valueListInfo.$model.getMetaModel().getObject(`/${valueListInfo.valueListInfo.CollectionPath}@`) || {};\n\n\t\tcontent.setFilterFields(ValueListHelper.entityIsSearchable(propertyAnnotations, collectionAnnotations) ? \"$search\" : \"\");\n\n\t\tconst tablePromise = ValueListHelper._templateFragment<MdcInnerTable>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListDialogTable\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModel,\n\t\t\tpropertyPath\n\t\t);\n\n\t\tconst filterBarPromise = ValueListHelper._templateFragment<MdcFilterBar>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListFilterBar\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModel,\n\t\t\tpropertyPath\n\t\t);\n\n\t\tconst [table, filterBar] = await Promise.all([tablePromise, filterBarPromise]);\n\n\t\ttable.setModel(valueListInfo.valueListInfo.$model);\n\t\tfilterBar.setModel(valueListInfo.valueListInfo.$model);\n\n\t\tcontent.setFilterBar(filterBar);\n\t\tcontent.setTable(table);\n\n\t\ttable.setFilter(filterBar.getId());\n\t\ttable.initialized();\n\n\t\tconst field = valueHelp.getControl();\n\t\tif (field !== undefined) {\n\t\t\ttable.setSelectionMode((field as FieldBase).getMaxConditions() === 1 ? \"SingleMaster\" : \"Multi\");\n\t\t}\n\t\ttable.setWidth(\"100%\");\n\n\t\t//This is a temporary workarround - provided by MDC (see FIORITECHP1-24002)\n\t\tconst mdcTable = table as any;\n\t\tmdcTable._setShowP13nButton(false);\n\t},\n\n\t_getContentById: function <T extends MTable | MDCTable>(contentList: Content[], contentId: string) {\n\t\treturn contentList.find(function (item) {\n\t\t\treturn item.getId() === contentId;\n\t\t}) as T | undefined;\n\t},\n\n\t_createPopoverContent: function (contentId: string, caseSensitive: boolean, useAsValueHelp: boolean) {\n\t\treturn new MTable({\n\t\t\tid: contentId,\n\t\t\tgroup: \"group1\",\n\t\t\tcaseSensitive: caseSensitive,\n\t\t\tuseAsValueHelp: useAsValueHelp\n\t\t} as $MTableSettings);\n\t},\n\n\t_createDialogContent: function (contentId: string, caseSensitive: boolean, forceBind: boolean) {\n\t\treturn new MDCTable({\n\t\t\tid: contentId,\n\t\t\tgroup: \"group1\",\n\t\t\tcaseSensitive: caseSensitive,\n\t\t\tforceBind: forceBind\n\t\t} as $MDCTableSettings);\n\t},\n\n\t_showConditionsContent: function (contentList: Content[], container: Container) {\n\t\tlet conditionsContent =\n\t\t\tcontentList.length && contentList[contentList.length - 1].getMetadata().getName() === \"sap.ui.mdc.valuehelp.content.Conditions\"\n\t\t\t\t? contentList[contentList.length - 1]\n\t\t\t\t: undefined;\n\n\t\tif (conditionsContent) {\n\t\t\tconditionsContent.setVisible(true);\n\t\t} else {\n\t\t\tconditionsContent = new Conditions();\n\t\t\tcontainer.addContent(conditionsContent);\n\t\t}\n\t},\n\n\t_alignOrCreateContent: function (\n\t\tvalueListInfo: ValueListInfo,\n\t\tcontentId: string,\n\t\tcaseSensitive: boolean,\n\t\tshowConditionPanel: boolean,\n\t\tcontainer: Container\n\t) {\n\t\tconst contentList = container.getContent();\n\t\tlet content = ValueListHelper._getContentById<MDCTable>(contentList, contentId);\n\n\t\tif (!content) {\n\t\t\tconst forceBind = valueListInfo.valueListInfo.FetchValues === 2 ? false : true;\n\n\t\t\tcontent = ValueListHelper._createDialogContent(contentId, caseSensitive, forceBind);\n\n\t\t\tif (!showConditionPanel) {\n\t\t\t\tcontainer.addContent(content);\n\t\t\t} else {\n\t\t\t\tcontainer.insertContent(content, contentList.length - 1); // insert content before conditions content\n\t\t\t}\n\t\t} else {\n\t\t\tcontent.setVisible(true);\n\t\t}\n\n\t\treturn content;\n\t},\n\n\t_prepareValueHelpTypeAhead: function (\n\t\tvalueHelp: ValueHelp,\n\t\tcontainer: Container,\n\t\tvalueListInfos: ValueListInfo[],\n\t\tpayload: ValueHelpPayload,\n\t\tcaseSensitive: boolean,\n\t\tfirstTypeAheadContent: MTable\n\t) {\n\t\tconst contentList = container.getContent();\n\t\tlet qualifierForTypeahead = valueHelp.data(\"valuelistForValidation\") || \"\"; // can also be null\n\t\tif (qualifierForTypeahead === \" \") {\n\t\t\tqualifierForTypeahead = \"\";\n\t\t}\n\t\tconst valueListInfo = qualifierForTypeahead\n\t\t\t? valueListInfos.filter(function (subValueListInfo) {\n\t\t\t\t\treturn subValueListInfo.valueHelpQualifier === qualifierForTypeahead;\n\t\t\t  })[0]\n\t\t\t: valueListInfos[0];\n\n\t\tValueListHelper._addInOutParametersToPayload(payload, valueListInfo);\n\n\t\tconst contentId = ValueListHelper._getContentId(valueHelp.getId(), valueListInfo.valueHelpQualifier, true);\n\t\tlet content = ValueListHelper._getContentById<MTable>(contentList, contentId);\n\n\t\tif (!content) {\n\t\t\tconst useAsValueHelp = firstTypeAheadContent.getUseAsValueHelp();\n\t\t\tcontent = ValueListHelper._createPopoverContent(contentId, caseSensitive, useAsValueHelp);\n\n\t\t\tcontainer.insertContent(content, 0); // insert content as first content\n\t\t} else if (contentId !== contentList[0].getId()) {\n\t\t\t// content already available but not as first content?\n\t\t\tcontainer.removeContent(content);\n\t\t\tcontainer.insertContent(content, 0); // move content to first position\n\t\t}\n\n\t\treturn { valueListInfo, content };\n\t},\n\n\t_prepareValueHelpDialog: function (\n\t\tvalueHelp: ValueHelp,\n\t\tcontainer: Container,\n\t\tvalueListInfos: ValueListInfo[],\n\t\tpayload: ValueHelpPayload,\n\t\tselectedContentId: string,\n\t\tcaseSensitive: boolean\n\t) {\n\t\tconst showConditionPanel = valueHelp.data(\"showConditionPanel\") && valueHelp.data(\"showConditionPanel\") !== \"false\";\n\t\tconst contentList = container.getContent();\n\n\t\t// set all contents to invisible\n\t\tfor (const contentListItem of contentList) {\n\t\t\tcontentListItem.setVisible(false);\n\t\t}\n\n\t\tif (showConditionPanel) {\n\t\t\tthis._showConditionsContent(contentList, container);\n\t\t}\n\n\t\tlet selectedInfo: ValueListInfo | undefined, selectedContent: MDCTable | undefined;\n\n\t\t// Create or reuse contents for the current context\n\t\tfor (const valueListInfo of valueListInfos) {\n\t\t\tconst valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\n\t\t\tValueListHelper._addInOutParametersToPayload(payload, valueListInfo);\n\n\t\t\tconst contentId = ValueListHelper._getContentId(valueHelp.getId(), valueHelpQualifier, false);\n\n\t\t\tconst content = this._alignOrCreateContent(valueListInfo, contentId, caseSensitive, showConditionPanel, container);\n\n\t\t\tif (valueListInfo.valueListInfo.Label) {\n\t\t\t\tconst title = CommonUtils.getTranslatedTextFromExpBindingString(valueListInfo.valueListInfo.Label, valueHelp.getControl());\n\t\t\t\tcontent.setTitle(title);\n\t\t\t}\n\n\t\t\tif (!selectedContent || (selectedContentId && selectedContentId === contentId)) {\n\t\t\t\tselectedContent = content;\n\t\t\t\tselectedInfo = valueListInfo;\n\t\t\t}\n\t\t}\n\n\t\tif (!selectedInfo || !selectedContent) {\n\t\t\tthrow new Error(\"selectedInfo or selectedContent undefined\");\n\t\t}\n\n\t\treturn { selectedInfo, selectedContent };\n\t},\n\n\t_addDescriptionInfosToPayload: function (payload: ValueHelpPayload, valueListInfo: ValueListInfo, metaModel: ODataMetaModel) {\n\t\tif (payload.valueHelpDescriptionPath !== valueListInfo.descriptionPath) {\n\t\t\tconst convertedMetadata = convertTypes(metaModel);\n\t\t\tconst propertyDescriptionPath = (\n\t\t\t\tconvertedMetadata.resolvePath<Property>(payload.propertyPath).target?.annotations?.Common\n\t\t\t\t\t?.Text as unknown as PathAnnotationExpression<string>\n\t\t\t)?.path;\n\n\t\t\t/* Enrich payload with Text Property Infos */\n\t\t\tpayload.valueHelpDescriptionPath = valueListInfo.descriptionPath;\n\t\t\tpayload.valueHelpKeyPath = valueListInfo.keyPath;\n\t\t\tif (propertyDescriptionPath) {\n\t\t\t\tpayload.maxLength = payload.valueHelpDescriptionPath\n\t\t\t\t\t? convertedMetadata.resolvePath<Property>(\n\t\t\t\t\t\t\t`/${valueListInfo.valueListInfo.CollectionPath}/${payload.valueHelpDescriptionPath}`\n\t\t\t\t\t  )?.target?.maxLength\n\t\t\t\t\t: undefined;\n\t\t\t\tpayload.propertyDescriptionPath = propertyDescriptionPath;\n\t\t\t}\n\t\t}\n\t},\n\n\tshowValueList: async function (payload: ValueHelpPayload, container: Container, selectedContentId: string): Promise<void> {\n\t\tconst valueHelp = container.getParent() as ValueHelp,\n\t\t\tisTypeahead = container.isTypeahead(),\n\t\t\tpropertyPath = payload.propertyPath,\n\t\t\tmetaModel = (valueHelp.getModel() as ODataModel).getMetaModel(),\n\t\t\tvhUIModel =\n\t\t\t\tvalueHelp.getModel(\"_VHUI\") !== undefined\n\t\t\t\t\t? (valueHelp.getModel(\"_VHUI\") as JSONModel)\n\t\t\t\t\t: ValueListHelper.createVHUIModel(valueHelp, propertyPath, metaModel);\n\n\t\tvhUIModel.setProperty(\"/isSuggestion\", isTypeahead);\n\t\tvhUIModel.setProperty(\"/minScreenWidth\", !isTypeahead ? \"418px\" : undefined);\n\n\t\ttry {\n\t\t\tconst valueListInfos = await ValueListHelper.getValueListInfo(valueHelp, propertyPath, payload);\n\t\t\tconst firstTypeAheadContent = valueHelp.getTypeahead().getContent()[0] as MTable,\n\t\t\t\tcaseSensitive = firstTypeAheadContent.getCaseSensitive(); // take caseSensitive from first Typeahead content\n\n\t\t\tif (isTypeahead) {\n\t\t\t\tconst { valueListInfo, content } = ValueListHelper._prepareValueHelpTypeAhead(\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontainer,\n\t\t\t\t\tvalueListInfos,\n\t\t\t\t\tpayload,\n\t\t\t\t\tcaseSensitive,\n\t\t\t\t\tfirstTypeAheadContent\n\t\t\t\t);\n\n\t\t\t\tpayload.valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\t\t\t\tValueListHelper._addDescriptionInfosToPayload(payload, valueListInfo, metaModel);\n\n\t\t\t\tif (content.getTable() === undefined || content.getTable() === null) {\n\t\t\t\t\tawait ValueListHelper._createValueHelpTypeahead(propertyPath, valueHelp, content, valueListInfo, payload);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst { selectedInfo, selectedContent } = ValueListHelper._prepareValueHelpDialog(\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontainer,\n\t\t\t\t\tvalueListInfos,\n\t\t\t\t\tpayload,\n\t\t\t\t\tselectedContentId,\n\t\t\t\t\tcaseSensitive\n\t\t\t\t);\n\n\t\t\t\tpayload.valueHelpQualifier = selectedInfo.valueHelpQualifier;\n\t\t\t\tValueListHelper._addDescriptionInfosToPayload(payload, selectedInfo, metaModel);\n\n\t\t\t\t/* For context depentent value helps the value list label is used for the dialog title */\n\t\t\t\tconst title = CommonUtils.getTranslatedTextFromExpBindingString(\n\t\t\t\t\tValueListHelper._getDialogTitle(valueHelp, selectedInfo.valueListInfo?.Label),\n\t\t\t\t\tvalueHelp.getControl()\n\t\t\t\t);\n\t\t\t\tcontainer.setTitle(title);\n\n\t\t\t\tif (selectedContent.getTable() === undefined || selectedContent.getTable() === null) {\n\t\t\t\t\tawait ValueListHelper._createValueHelpDialog(propertyPath, valueHelp, selectedContent, selectedInfo, payload);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis._logError(propertyPath, err);\n\t\t\tValueListHelper.destroyVHContent(valueHelp);\n\t\t}\n\t}\n};\n\nexport default ValueListHelper;\n"],"mappings":"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"}},{"offset":{"line":21403,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","ObjectPath","CommonUtils","MetaModelConverter","MetaModelFunction","PropertyHelper","UIFormatters","Util","Fragment","XMLPreprocessor","XMLTemplateProcessor","Rem","Conditions","MDCTable","MTable","JSONModel","_exports","getTypeConfig","getDisplayMode","getAssociatedUnitProperty","getAssociatedTimezoneProperty","getAssociatedTextProperty","getAssociatedCurrencyProperty","isPropertyFilterable","getSortRestrictionsInfo","convertTypes","Level","columnNotAlreadyDefined","columnDefs","vhKey","some","column","path","AnnotationLabel","AnnotationText","AnnotationTextUITextArrangement","AnnotationValueListParameterIn","AnnotationValueListParameterConstant","AnnotationValueListParameterOut","AnnotationValueListParameterInOut","AnnotationValueListWithFixedValues","_getDefaultSortPropertyName","valueListInfo","sortFieldName","metaModel","$model","getMetaModel","entitySetAnnotations","getObject","CollectionPath","sortRestrictionsInfo","foundElement","Parameters","find","element","$Type","ValueListProperty","propertyInfo","sortable","undefined","_redundantDescription","oVLParameter","aColumnInfo","oColumnInfo","columnInfo","textColumnName","keyColumnHidden","keyColumnDisplayFormat","_hasImportanceHigh","oValueListContext","oParameter","$EnumMember","_build$SelectString","control","oViewData","getModel","oData","getData","aColumns","columns","reduce","sQuery","oProperty","indexOf","_getValueHelpColumnDisplayFormat","oPropertyAnnotations","isValueHelpWithFixedValues","sDisplayMode","computeDisplayMode","oTextAnnotation","oTextArrangementAnnotation","$Path","ValueListHelper","getValueListCollectionEntitySet","mValueList","createBindingContext","getTableDelegate","oValueList","sDefaultSortPropertyName","getSortConditionsFromPresentationVariant","isSuggestion","PresentationVariantQualifier","presentationVariantQualifier","presentationVariantPath","presentationVariant","SortOrder","sortConditions","sorters","forEach","condition","_condition$Property","sorter","propertyPath","Property","$PropertyPath","name","Descending","descending","ascending","push","JSON","stringify","getPropertyPath","oParameters","UnboundAction","EntityTypePath","Action","substring","lastIndexOf","getValueListProperty","oPropertyContext","oValueListModel","getColumnVisibility","oSource","isDropDownList","valueHelpWithFixedValues","isVisible","columnInfos","isDialogTable","columnWithHiddenAnnotation","columnName","hasHiddenAnnotation","getColumnVisibilityInfo","sPropertyFullPath","bIsDropDownListe","oMetaModel","aColumnInfos","oColumnInfos","getTableItemsParameters","requestGroupId","itemParameters","selectString","this","selectStringPart","isSuspended","sortConditionsFromPresentationVariant","defaultSortPropertyName","join","hasImportance","getMinScreenWidth","getColumnWidth","_property$annotations","_property$annotations2","_textAnnotation$annot","_textAnnotation$annot2","_textAnnotation$annot3","_property$annotations3","_property$annotations4","_property$annotations5","property","targetObject","relatedProperty","additionalProperty","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","label","Label","displayMode","size","instances","prop","propertyTypeConfig","PropertyODataConstructor","get","type","formatOptions","constraints","sWidth","calcColumnWidth","parseFloat","replace","error","getOutParameterPaths","aParameters","sPath","endsWith","entityIsSearchable","propertyAnnotations","collectionAnnotations","_propertyAnnotations$","_collectionAnnotation","searchSupported","SearchSupported","searchable","Searchable","_getConditionPath","entitySet","parts","split","conditionPath","partialPath","length","part","shift","$kind","$isCollection","_getColumnDefinitionFromSelectionFields","entityTypeAnnotations","selectionFields","selectionField","_metaModel$getObject","selectionFieldPath","columnDef","filterable","_mergeColumnDefinitionsFromProperties","valueListProperty","_propertyAnnotations$2","columnPath","columnPropertyType","textPropertyPath","filterInOutParameters","vhParameters","typeFilter","filter","parameter","parmeterType","getInParameters","getOutParameters","createVHUIModel","valueHelp","vhUIModel","setModel","setProperty","_getDialogTitle","valuehelpLabel","_valueHelp$getControl","propertyLabel","getProperty","dataFieldLabel","getControl","destroyVHContent","getDialog","destroyContent","getTypeahead","putDefaultQualifierFirst","qualifiers","indexDefaultVH","unshift","splice","_getContextPrefix","bindingContext","propertyBindingParts","getPath","bindigContextParts","contextPrefixParts","i","_getVhParameter","conditionModel","contextPrefix","vhMetaModel","localDataPropertyPath","valuePath","getBindingContext","_valueHelp$getParent","getParent","isA","_parameterIsA","firstNavigationProperty","oBoundEntity","getMetaContext","sPathOfTable","getRowBinding","source","helpPath","constantValue","Constant","initialValueFilterEmpty","Boolean","InitialValueIsSignificant","parameterTypes","includes","_enrichPath","propertyName","key","_propertyAnnotations$3","fieldPropertyPath","descriptionPath","_enrichKeys","vhKeys","_processParameters","annotationValueListType","valueHelpQualifier","entitySetPath","entityType","$Key","_parameter$LocalDataP","LocalDataProperty","vhParameter","_metaModel$getObject2","valuelistInfo","keyPath","_logError","status","message","Error","String","msg","getValueListInfo","async","payload","valueListInfos","propertyPathParts","valueListByQualifier","requestValueListInfo","valueHelpQualifiers","Object","keys","pop","useMultiValueField","$qualifier","err","ALLFRAGMENTS","logFragment","_logTemplatedFragments","fragmentName","fragmentDefinition","logInfo","fragment","getLevel","DEBUG","setTimeout","_templateFragment","sourceModel","localValueListInfo","valueListModel","valueListServiceMetaModel","viewData","converterType","process","loadTemplate","bindingContexts","valueList","contextPath","models","load","definition","_getContentId","valueHelpId","isTypeahead","contentType","_addInOutParametersToPayload","textArrangementAnnotation","_getWidthInRem","isUnitValueHelp","width","$","floatWidth","fromPx","isNaN","_getTableWidth","table","minWidth","getColumns","visibleColumns","getVisible","sumWidth","sum","getWidth","Math","max","_createValueHelpTypeahead","content","contentId","getId","id","groupId","bSuggestion","setKeyPath","setDescriptionPath","isValueListWithFixedValues","setFilterFields","info","getMetadata","getName","setTable","field","reduceWidthForUnitValueHelp","tableWidth","setWidth","setMode","getMaxConditions","_createValueHelpDialog","isDropDownListe","tablePromise","filterBarPromise","filterBar","Promise","all","setFilterBar","setFilter","initialized","setSelectionMode","mdcTable","_setShowP13nButton","_getContentById","contentList","item","_createPopoverContent","caseSensitive","useAsValueHelp","group","_createDialogContent","forceBind","_showConditionsContent","container","conditionsContent","setVisible","addContent","_alignOrCreateContent","showConditionPanel","getContent","FetchValues","insertContent","_prepareValueHelpTypeAhead","firstTypeAheadContent","qualifierForTypeahead","data","subValueListInfo","getUseAsValueHelp","removeContent","_prepareValueHelpDialog","selectedContentId","contentListItem","selectedInfo","selectedContent","title","getTranslatedTextFromExpBindingString","setTitle","_addDescriptionInfosToPayload","valueHelpDescriptionPath","_convertedMetadata$re","_convertedMetadata$re2","_convertedMetadata$re3","_convertedMetadata$re4","convertedMetadata","propertyDescriptionPath","resolvePath","target","valueHelpKeyPath","_convertedMetadata$re5","_convertedMetadata$re6","maxLength","showValueList","getCaseSensitive","getTable","_selectedInfo$valueLi"],"sources":["ValueListHelper-dbg.js"],"mappings":"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","sourceRoot":"internal/valuehelp"}},{"offset":{"line":21408,"column":0},"map":{"version":3,"names":["KPITagBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","getKpiPropertyExpression","propertyName","pathInModel","id","kpiModelName","getBindingExpressions","kpiTitle","metaPath","getProperty","text","undefined","tooltip","titleExpression","resolveBindingString","formatResult","kpiFormatters","labelFormat","String","hasUnit","tooltipFormat","getTemplate","xml","BuildingBlockBase"],"sourceRoot":"kpiTag","sources":["KPITag.block.ts"],"sourcesContent":["import BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport kpiFormatters from \"sap/fe/core/formatters/KPIFormatter\";\nimport { formatResult, pathInModel, resolveBindingString } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * A building block used to display a KPI in the Analytical List Page\n *\n * @private\n * @experimental\n */\n@defineBuildingBlock({\n\tname: \"KPITag\",\n\tnamespace: \"sap.fe.macros\"\n})\nexport default class KPITagBlock extends BuildingBlockBase {\n\t/**\n\t * The ID of the KPI\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic id!: string;\n\n\t/**\n\t * Path to the DataPoint annotation of the KPI\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tpublic metaPath!: Context;\n\n\t/**\n\t * The name of the runtime model to get KPI properties from\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic kpiModelName!: string;\n\n\t/**\n\t * Shall be true if the KPI value has an associated currency or unit of measure\n\t */\n\t@blockAttribute({ type: \"boolean\", required: false })\n\tpublic hasUnit?: boolean;\n\n\t/**\n\t * Creates a binding expression for a specific property in the KPI model.\n\t *\n\t * @param propertyName The property to bind to in the KPI model\n\t * @returns A binding expression\n\t */\n\tgetKpiPropertyExpression(propertyName: string) {\n\t\treturn pathInModel(`/${this.id}/manifest/sap.card/data/json/${propertyName}`, this.kpiModelName);\n\t}\n\n\t/**\n\t * Creates binding expressions for the KPITag's text and tooltip.\n\t *\n\t * @returns Object containing the binding expressions for the text and the tooltip\n\t */\n\tgetBindingExpressions() {\n\t\tconst kpiTitle = this.metaPath.getProperty(\"Title\");\n\n\t\tif (!kpiTitle) {\n\t\t\treturn { text: undefined, tooltip: undefined };\n\t\t}\n\n\t\tconst titleExpression = resolveBindingString<string>(kpiTitle);\n\t\treturn {\n\t\t\ttext: formatResult([titleExpression], kpiFormatters.labelFormat),\n\t\t\ttooltip: formatResult(\n\t\t\t\t[\n\t\t\t\t\ttitleExpression,\n\t\t\t\t\tthis.getKpiPropertyExpression(\"mainValueUnscaled\"),\n\t\t\t\t\tthis.getKpiPropertyExpression(\"mainUnit\"),\n\t\t\t\t\tthis.getKpiPropertyExpression(\"mainCriticality\"),\n\t\t\t\t\tString(this.hasUnit)\n\t\t\t\t],\n\t\t\t\tkpiFormatters.tooltipFormat\n\t\t\t)\n\t\t};\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string\n\t */\n\tgetTemplate() {\n\t\tconst { text, tooltip } = this.getBindingExpressions();\n\n\t\treturn xml`<m:GenericTag\n\t\t\tid=\"kpiTag-${this.id}\"\n\t\t\ttext=\"${text}\"\n\t\t\tdesign=\"StatusIconHidden\"\n\t\t\tstatus=\"${this.getKpiPropertyExpression(\"mainCriticality\")}\"\n\t\t\tclass=\"sapUiTinyMarginBegin\"\n\t\t\ttooltip=\"${tooltip}\"\n\t\t\tpress=\".kpiManagement.onKPIPressed(\\${$source>},'${this.id}')\"\n\t\t>\n\t\t\t<m:ObjectNumber\n\t\t\t\tstate=\"${this.getKpiPropertyExpression(\"mainCriticality\")}\"\n\t\t\t\temphasized=\"false\"\n\t\t\t\tnumber=\"${this.getKpiPropertyExpression(\"mainValue\")}\"\n\t\t\t\tunit=\"${this.getKpiPropertyExpression(\"mainUnit\")}\"\n\n\t\t\t/>\n\t\t</m:GenericTag>`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;MAiBqBA,WAAW;EAVhC;AACA;AACA;AACA;AACA;AACA;EALA,OAMCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,QAAQ;IACdC,SAAS,EAAE;EACZ,CAAC,CAAC,UAKAC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAMlDF,cAAc,CAAC;IAAEC,IAAI,EAAE,sBAAsB;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAMhEF,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAMlDF,cAAc,CAAC;IAAEC,IAAI,EAAE,SAAS;IAAEC,QAAQ,EAAE;EAAM,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAGrD;AACD;AACA;AACA;AACA;AACA;IALC,OAMAC,wBAAwB,GAAxB,kCAAyBC,YAAoB,EAAE;MAC9C,OAAOC,WAAW,CAAE,IAAG,IAAI,CAACC,EAAG,gCAA+BF,YAAa,EAAC,EAAE,IAAI,CAACG,YAAY,CAAC;IACjG;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKAC,qBAAqB,GAArB,iCAAwB;MACvB,MAAMC,QAAQ,GAAG,IAAI,CAACC,QAAQ,CAACC,WAAW,CAAC,OAAO,CAAC;MAEnD,IAAI,CAACF,QAAQ,EAAE;QACd,OAAO;UAAEG,IAAI,EAAEC,SAAS;UAAEC,OAAO,EAAED;QAAU,CAAC;MAC/C;MAEA,MAAME,eAAe,GAAGC,oBAAoB,CAASP,QAAQ,CAAC;MAC9D,OAAO;QACNG,IAAI,EAAEK,YAAY,CAAC,CAACF,eAAe,CAAC,EAAEG,aAAa,CAACC,WAAW,CAAC;QAChEL,OAAO,EAAEG,YAAY,CACpB,CACCF,eAAe,EACf,IAAI,CAACZ,wBAAwB,CAAC,mBAAmB,CAAC,EAClD,IAAI,CAACA,wBAAwB,CAAC,UAAU,CAAC,EACzC,IAAI,CAACA,wBAAwB,CAAC,iBAAiB,CAAC,EAChDiB,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,CACpB,EACDH,aAAa,CAACI,aAAa;MAE7B,CAAC;IACF;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA,OAKAC,WAAW,GAAX,uBAAc;MACb,MAAM;QAAEX,IAAI;QAAEE;MAAQ,CAAC,GAAG,IAAI,CAACN,qBAAqB,EAAE;MAEtD,OAAOgB,GAAI;AACb,gBAAgB,IAAI,CAAClB,EAAG;AACxB,WAAWM,IAAK;AAChB;AACA,aAAa,IAAI,CAACT,wBAAwB,CAAC,iBAAiB,CAAE;AAC9D;AACA,cAAcW,OAAQ;AACtB,sDAAsD,IAAI,CAACR,EAAG;AAC9D;AACA;AACA,aAAa,IAAI,CAACH,wBAAwB,CAAC,iBAAiB,CAAE;AAC9D;AACA,cAAc,IAAI,CAACA,wBAAwB,CAAC,WAAW,CAAE;AACzD,YAAY,IAAI,CAACA,wBAAwB,CAAC,UAAU,CAAE;AACtD;AACA;AACA,kBAAkB;IACjB,CAAC;IAAA;EAAA,EAxFuCsB,iBAAiB;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":21550,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","kpiFormatters","BindingToolkit","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_exports","resolveBindingString","pathInModel","formatResult","xml","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","KPITagBlock","name","namespace","type","required","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","_proto","getKpiPropertyExpression","propertyName","id","kpiModelName","getBindingExpressions","kpiTitle","metaPath","getProperty","text","tooltip","titleExpression","labelFormat","String","hasUnit","tooltipFormat","getTemplate"],"sources":["KPITag.block-dbg.js"],"mappings":"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","sourceRoot":"kpiTag"}},{"offset":{"line":21571,"column":0},"map":{"version":3,"names":["macrosNamespace","thisLib","Core","initLibrary","name","dependencies","types","interfaces","controls","elements","version","noLibraryCSS","NavigationType","External","InPage","None","Fragment","registerType","load","getType","init","mSettings","currentController","containingView","getController","targetControllerExtension","isA","getExtensionAPI","id","oController","args","apply"],"sourceRoot":"","sources":["library.ts"],"sourcesContent":["import \"sap/fe/core/library\";\nimport \"sap/fe/macros/filter/type/MultiValue\";\nimport \"sap/fe/macros/filter/type/Range\";\nimport \"sap/fe/macros/macroLibrary\";\nimport Core from \"sap/ui/core/Core\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport \"sap/ui/core/library\";\nimport \"sap/ui/core/XMLTemplateProcessor\";\nimport \"sap/ui/mdc/field/ConditionsType\";\nimport \"sap/ui/mdc/library\";\nimport \"sap/ui/unified/library\";\n\n/**\n * Library containing the building blocks for SAP Fiori elements.\n *\n * @namespace\n * @name sap.fe.macros\n * @public\n */\nexport const macrosNamespace = \"sap.fe.macros\";\n\n// library dependencies\nconst thisLib = Core.initLibrary({\n\tname: \"sap.fe.macros\",\n\tdependencies: [\"sap.ui.core\", \"sap.ui.mdc\", \"sap.ui.unified\", \"sap.fe.core\"],\n\ttypes: [\"sap.fe.macros.NavigationType\"],\n\tinterfaces: [],\n\tcontrols: [],\n\telements: [],\n\t// eslint-disable-next-line no-template-curly-in-string\n\tversion: \"${version}\",\n\tnoLibraryCSS: true\n}) as any;\n\nthisLib.NavigationType = {\n\t/**\n\t * For External Navigation\n\t *\n\t * @public\n\t */\n\tExternal: \"External\",\n\n\t/**\n\t * For In-Page Navigation\n\t *\n\t * @public\n\t */\n\tInPage: \"InPage\",\n\n\t/**\n\t * For No Navigation\n\t *\n\t * @public\n\t */\n\tNone: \"None\"\n};\n\nFragment.registerType(\"CUSTOM\", {\n\tload: (Fragment as any).getType(\"XML\").load,\n\tinit: function (mSettings: any, ...args: any[]) {\n\t\tconst currentController = mSettings.containingView.getController();\n\t\tlet targetControllerExtension = currentController;\n\t\tif (currentController && !currentController.isA(\"sap.fe.core.ExtensionAPI\")) {\n\t\t\ttargetControllerExtension = currentController.getExtensionAPI(mSettings.id);\n\t\t}\n\t\tmSettings.containingView = {\n\t\t\toController: targetControllerExtension\n\t\t};\n\t\treturn (Fragment as any).getType(\"XML\").init.apply(this, [mSettings, args]);\n\t}\n});\n\nexport default thisLib;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;EAYA;AACA;AACA;AACA;AACA;AACA;AACA;EACO,MAAMA,eAAe,GAAG,eAAe;;EAE9C;EAAA;EACA,MAAMC,OAAO,GAAGC,IAAI,CAACC,WAAW,CAAC;IAChCC,IAAI,EAAE,eAAe;IACrBC,YAAY,EAAE,CAAC,aAAa,EAAE,YAAY,EAAE,gBAAgB,EAAE,aAAa,CAAC;IAC5EC,KAAK,EAAE,CAAC,8BAA8B,CAAC;IACvCC,UAAU,EAAE,EAAE;IACdC,QAAQ,EAAE,EAAE;IACZC,QAAQ,EAAE,EAAE;IACZ;IACAC,OAAO,EAAE,YAAY;IACrBC,YAAY,EAAE;EACf,CAAC,CAAQ;EAETV,OAAO,CAACW,cAAc,GAAG;IACxB;AACD;AACA;AACA;AACA;IACCC,QAAQ,EAAE,UAAU;IAEpB;AACD;AACA;AACA;AACA;IACCC,MAAM,EAAE,QAAQ;IAEhB;AACD;AACA;AACA;AACA;IACCC,IAAI,EAAE;EACP,CAAC;EAEDC,QAAQ,CAACC,YAAY,CAAC,QAAQ,EAAE;IAC/BC,IAAI,EAAGF,QAAQ,CAASG,OAAO,CAAC,KAAK,CAAC,CAACD,IAAI;IAC3CE,IAAI,EAAE,UAAUC,SAAc,EAAkB;MAC/C,MAAMC,iBAAiB,GAAGD,SAAS,CAACE,cAAc,CAACC,aAAa,EAAE;MAClE,IAAIC,yBAAyB,GAAGH,iBAAiB;MACjD,IAAIA,iBAAiB,IAAI,CAACA,iBAAiB,CAACI,GAAG,CAAC,0BAA0B,CAAC,EAAE;QAC5ED,yBAAyB,GAAGH,iBAAiB,CAACK,eAAe,CAACN,SAAS,CAACO,EAAE,CAAC;MAC5E;MACAP,SAAS,CAACE,cAAc,GAAG;QAC1BM,WAAW,EAAEJ;MACd,CAAC;MAAC,kCARgCK,IAAI;QAAJA,IAAI;MAAA;MAStC,OAAQd,QAAQ,CAASG,OAAO,CAAC,KAAK,CAAC,CAACC,IAAI,CAACW,KAAK,CAAC,IAAI,EAAE,CAACV,SAAS,EAAES,IAAI,CAAC,CAAC;IAC5E;EACD,CAAC,CAAC;EAAC,OAEY7B,OAAO;AAAA"}},{"offset":{"line":21640,"column":0},"map":{"version":3,"names":["sap","ui","define","_library","_MultiValue","_Range","_macroLibrary","Core","Fragment","_library2","_XMLTemplateProcessor","_ConditionsType","_library3","_library4","_exports","macrosNamespace","thisLib","initLibrary","name","dependencies","types","interfaces","controls","elements","version","noLibraryCSS","NavigationType","External","InPage","None","registerType","load","getType","init","mSettings","currentController","containingView","getController","targetControllerExtension","isA","getExtensionAPI","id","oController","_len","arguments","length","args","Array","_key","apply","this"],"sources":["library-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,mCAAO,CAAC,sBAAuB,uCAAwC,kCAAmC,6BAA8B,mBAAoB,uBAAwB,sBAAuB,mCAAoC,kCAAmC,qBAAsB,0BAA2B,SAAUC,EAAUC,EAAaC,EAAQC,EAAeC,EAAMC,EAAUC,EAAWC,EAAuBC,EAAiBC,EAAWC,GAC9c,aAEA,IAAIC,EAAW,CAAC,EAQhB,MAAMC,EAAkB,gBAGxBD,EAASC,gBAAkBA,EAC3B,MAAMC,EAAUT,EAAKU,YAAY,CAC/BC,KAAM,gBACNC,aAAc,CAAC,cAAe,aAAc,iBAAkB,eAC9DC,MAAO,CAAC,gCACRC,WAAY,GACZC,SAAU,GACVC,SAAU,GAEVC,QAAS,aACTC,aAAc,OAEhBT,EAAQU,eAAiB,CAMvBC,SAAU,WAMVC,OAAQ,SAMRC,KAAM,QAERrB,EAASsB,aAAa,SAAU,CAC9BC,KAAMvB,EAASwB,QAAQ,OAAOD,KAC9BE,KAAM,SAAUC,GACd,MAAMC,EAAoBD,EAAUE,eAAeC,gBACnD,IAAIC,EAA4BH,EAChC,GAAIA,IAAsBA,EAAkBI,IAAI,4BAA6B,CAC3ED,EAA4BH,EAAkBK,gBAAgBN,EAAUO,GAC1E,CACAP,EAAUE,eAAiB,CACzBM,YAAaJ,GAEf,IAAK,IAAIK,EAAOC,UAAUC,OAAQC,EAAO,IAAIC,MAAMJ,EAAO,EAAIA,EAAO,EAAI,GAAIK,EAAO,EAAGA,EAAOL,EAAMK,IAAQ,CAC1GF,EAAKE,EAAO,GAAKJ,UAAUI,EAC7B,CACA,OAAOxC,EAASwB,QAAQ,OAAOC,KAAKgB,MAAMC,KAAM,CAAChB,EAAWY,GAC9D,IAEF,OAAO9B,CACT,EAAG","sourceRoot":""}},{"offset":{"line":21645,"column":0},"map":{"version":3,"names":["buildingBlocks","ActionCommandBlock","ChartBlock","ContactBlock","CustomAction","CustomFragmentBlock","DataFieldForAction","DataPointBlock","DraftDataLossDialogBlock","DraftIndicatorBlock","FilterBarBlock","FilterFieldBlock","FlexibleColumnLayoutActionsBlock","FormBlock","FormContainerBlock","FormElementBlock","InternalFieldBlock","KPITagBlock","MicroChartBlock","MultiValueFieldBlock","PaginatorBlock","PublicFieldBlock","QuickViewBlock","ShareBlock","SituationsIndicatorBlock","TableBlock","TableFullScreenDialogBlock","ValueHelpBlock","ValueHelpFilterBarBlock","VisualFilterBlock","QuickFilterSelector","registerAll","buildingBlock","register","unregisterAll","unregister"],"sourceRoot":"","sources":["macroLibrary.ts"],"sourcesContent":["import BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport DraftDataLossDialogBlock from \"sap/fe/core/controls/DataLossOrDraftDiscard/DraftDataLossDialog.block\";\nimport PublicFieldBlock from \"sap/fe/macros/field/PublicField.block\";\nimport FormElementBlock from \"sap/fe/macros/form/FormElement.block\";\nimport SituationsIndicatorBlock from \"sap/fe/macros/situations/SituationsIndicator.block\";\nimport QuickFilterSelector from \"sap/fe/macros/table/QuickFilterSelector.block\";\nimport TableFullScreenDialogBlock from \"sap/fe/macros/table/TableFullScreenDialog.block\";\nimport CustomAction from \"./actions/CustomAction.block\";\nimport DataFieldForAction from \"./actions/DataFieldForAction.block\";\nimport ChartBlock from \"./chart/Chart.block\";\nimport ContactBlock from \"./contact/Contact.block\";\nimport DraftIndicatorBlock from \"./draftIndicator/DraftIndicator.block\";\nimport FlexibleColumnLayoutActionsBlock from \"./fcl/FlexibleColumnLayoutActions.block\";\nimport FilterBarBlock from \"./filterBar/FilterBar.block\";\nimport FormBlock from \"./form/Form.block\";\nimport FormContainerBlock from \"./form/FormContainer.block\";\nimport CustomFragmentBlock from \"./fpm/CustomFragment.block\";\nimport ActionCommandBlock from \"./internal/ActionCommand.block\";\nimport DataPointBlock from \"./internal/DataPoint.block\";\nimport FilterFieldBlock from \"./internal/FilterField.block\";\nimport InternalFieldBlock from \"./internal/InternalField.block\";\nimport KPITagBlock from \"./kpiTag/KPITag.block\";\nimport MicroChartBlock from \"./microchart/MicroChart.block\";\nimport MultiValueFieldBlock from \"./multiValueField/MultiValueField.block\";\nimport PaginatorBlock from \"./paginator/Paginator.block\";\nimport QuickViewBlock from \"./quickView/QuickView.block\";\nimport ShareBlock from \"./share/Share.block\";\nimport TableBlock from \"./table/Table.block\";\nimport ValueHelpBlock from \"./valuehelp/ValueHelp.block\";\nimport ValueHelpFilterBarBlock from \"./valuehelp/ValueHelpFilterBar.block\";\nimport VisualFilterBlock from \"./visualfilters/VisualFilter.block\";\n\nconst buildingBlocks: (typeof BuildingBlockBase)[] = [\n\tActionCommandBlock,\n\tChartBlock,\n\tContactBlock,\n\tCustomAction,\n\tCustomFragmentBlock,\n\tDataFieldForAction,\n\tDataPointBlock,\n\tDraftDataLossDialogBlock,\n\tDraftIndicatorBlock,\n\tFilterBarBlock,\n\tFilterFieldBlock,\n\tFlexibleColumnLayoutActionsBlock,\n\tFormBlock,\n\tFormContainerBlock,\n\tFormElementBlock,\n\tInternalFieldBlock,\n\tKPITagBlock,\n\tMicroChartBlock,\n\tMultiValueFieldBlock,\n\tPaginatorBlock,\n\tPublicFieldBlock,\n\tQuickViewBlock,\n\tShareBlock,\n\tSituationsIndicatorBlock,\n\tTableBlock,\n\tTableFullScreenDialogBlock,\n\tValueHelpBlock,\n\tValueHelpFilterBarBlock,\n\tVisualFilterBlock,\n\tQuickFilterSelector\n];\n\nfunction registerAll() {\n\tfor (const buildingBlock of buildingBlocks) {\n\t\tbuildingBlock.register();\n\t}\n}\n\n//This is needed in for templating test utils\nfunction unregisterAll() {\n\tfor (const buildingBlock of buildingBlocks) {\n\t\tbuildingBlock.unregister();\n\t}\n}\n\n//Always register when loaded for compatibility\nregisterAll();\n\nexport default {\n\tregister: registerAll,\n\tunregister: unregisterAll\n};\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAgCA,MAAMA,cAA4C,GAAG,CACpDC,kBAAkB,EAClBC,UAAU,EACVC,YAAY,EACZC,YAAY,EACZC,mBAAmB,EACnBC,kBAAkB,EAClBC,cAAc,EACdC,wBAAwB,EACxBC,mBAAmB,EACnBC,cAAc,EACdC,gBAAgB,EAChBC,gCAAgC,EAChCC,SAAS,EACTC,kBAAkB,EAClBC,gBAAgB,EAChBC,kBAAkB,EAClBC,WAAW,EACXC,eAAe,EACfC,oBAAoB,EACpBC,cAAc,EACdC,gBAAgB,EAChBC,cAAc,EACdC,UAAU,EACVC,wBAAwB,EACxBC,UAAU,EACVC,0BAA0B,EAC1BC,cAAc,EACdC,uBAAuB,EACvBC,iBAAiB,EACjBC,mBAAmB,CACnB;EAED,SAASC,WAAW,GAAG;IACtB,KAAK,MAAMC,aAAa,IAAIhC,cAAc,EAAE;MAC3CgC,aAAa,CAACC,QAAQ,EAAE;IACzB;EACD;;EAEA;EACA,SAASC,aAAa,GAAG;IACxB,KAAK,MAAMF,aAAa,IAAIhC,cAAc,EAAE;MAC3CgC,aAAa,CAACG,UAAU,EAAE;IAC3B;EACD;;EAEA;EACAJ,WAAW,EAAE;EAAC,OAEC;IACdE,QAAQ,EAAEF,WAAW;IACrBI,UAAU,EAAED;EACb,CAAC;AAAA"}},{"offset":{"line":21673,"column":0},"map":{"version":3,"names":["sap","ui","define","DraftDataLossDialogBlock","PublicFieldBlock","FormElementBlock","SituationsIndicatorBlock","QuickFilterSelector","TableFullScreenDialogBlock","CustomAction","DataFieldForAction","ChartBlock","ContactBlock","DraftIndicatorBlock","FlexibleColumnLayoutActionsBlock","FilterBarBlock","FormBlock","FormContainerBlock","CustomFragmentBlock","ActionCommandBlock","DataPointBlock","FilterFieldBlock","InternalFieldBlock","KPITagBlock","MicroChartBlock","MultiValueFieldBlock","PaginatorBlock","QuickViewBlock","ShareBlock","TableBlock","ValueHelpBlock","ValueHelpFilterBarBlock","VisualFilterBlock","buildingBlocks","registerAll","buildingBlock","register","unregisterAll","unregister"],"sources":["macroLibrary-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wCAAO,CAAC,wEAAyE,wCAAyC,uCAAwC,qDAAsD,gDAAiD,kDAAmD,+BAAgC,qCAAsC,sBAAuB,0BAA2B,wCAAyC,0CAA2C,8BAA+B,oBAAqB,6BAA8B,6BAA8B,iCAAkC,6BAA8B,+BAAgC,iCAAkC,wBAAyB,gCAAiC,0CAA2C,8BAA+B,8BAA+B,sBAAuB,sBAAuB,8BAA+B,uCAAwC,sCAAuC,SAAUC,EAA0BC,EAAkBC,EAAkBC,EAA0BC,EAAqBC,EAA4BC,EAAcC,EAAoBC,EAAYC,EAAcC,EAAqBC,EAAkCC,EAAgBC,EAAWC,EAAoBC,EAAqBC,EAAoBC,EAAgBC,EAAkBC,EAAoBC,EAAaC,EAAiBC,EAAsBC,EAAgBC,EAAgBC,EAAYC,EAAYC,EAAgBC,EAAyBC,GACvmD,aAEA,MAAMC,EAAiB,CAACd,EAAoBR,EAAYC,EAAcH,EAAcS,EAAqBR,EAAoBU,EAAgBjB,EAA0BU,EAAqBE,EAAgBM,EAAkBP,EAAkCE,EAAWC,EAAoBZ,EAAkBiB,EAAoBC,EAAaC,EAAiBC,EAAsBC,EAAgBtB,EAAkBuB,EAAgBC,EAAYtB,EAA0BuB,EAAYrB,EAA4BsB,EAAgBC,EAAyBC,EAAmBzB,GACrjB,SAAS2B,IACP,IAAK,MAAMC,KAAiBF,EAAgB,CAC1CE,EAAcC,UAChB,CACF,CAGA,SAASC,IACP,IAAK,MAAMF,KAAiBF,EAAgB,CAC1CE,EAAcG,YAChB,CACF,CAGAJ,IACA,MAAO,CACLE,SAAUF,EACVI,WAAYD,EAEhB,EAAG","sourceRoot":""}},{"offset":{"line":21678,"column":0},"map":{"version":3,"names":["MessageButton","defineUI5Class","aggregation","type","multiple","singularName","event","id","settings","sGeneralGroupText","sViewId","sLastActionText","init","Button","prototype","apply","attachPress","handleMessagePopoverPress","oMessagePopover","MessagePopover","oItemBinding","getBinding","attachChange","_setMessageData","messageButtonId","getId","addCustomData","sap","ui","core","CustomData","key","value","attachModelContextChange","_applyFiltersAndSort","bind","attachActiveTitlePress","_activeTitlePress","oEvent","toggle","getSource","_applyGroupingAsync","oView","aWaitForData","oViewBindingContext","getBindingContext","_findTablesRelatedToMessages","view","oRes","aMessages","getContexts","map","oContext","getObject","oViewContext","oObjectPage","getContent","messageHandling","getVisibleSectionsFromObjectPageLayout","forEach","oSection","getSubSections","oSubSection","findElements","oElem","isA","i","length","oRowBinding","getRowBinding","sElemeBindingPath","getPath","target","indexOf","push","table","subsection","oTables","_oTable","oMDCTable","oSubsection","setBindingContext","isLengthFinal","Promise","resolve","attachEventOnce","waitForGroupingApplied","setTimeout","_applyGrouping","all","getModel","checkMessages","err","Log","error","oObjectPageLayout","_getObjectPageLayout","getItems","_checkControlIdInSections","_getTableRefErrorContext","oTable","oModel","getProperty","setProperty","sRefErrorContextPath","replace","getContext","_updateInternalModel","oTableRowContext","iRowIndex","sTableTargetColProperty","oMessageObject","bIsCreationRow","oTemp","rowIndex","targetColProperty","aValidMessageIds","getCore","getMessageManager","getMessageModel","getData","message","aObsoleteMessagelIds","Object","keys","filter","internalMessageId","obsoleteId","assign","_setGroupLabelForTransientMsg","sActionName","Core","getLibraryResourceBundle","getText","setGroupName","_computeMessageGroupAndSubTitle","section","subSection","aElements","bMultipleSubSections","resourceModel","getResourceModel","detachChange","setSectionNameInGroup","oElement","oTargetTableInfo","l","oTargetedControl","bIsBackendMessage","RegExp","test","getTargets","getParent","fnCallbackSetGroupName","oMessageObj","actionName","obj","getTableColumnDataAndSetSubtile","subTitle","setSubtitle","setActiveTitle","_formatMessageDescription","sTableTargetColName","getIndex","bIsTargetedControlOrphan","bIsOrphanElement","_getMdcTable","tableHeader","getHeader","iTargetColumnIndex","_getTableColumnIndex","getColumns","getDataProperty","undefined","_getTableRow","_getTableRowIndex","oTableRowBindingContexts","getCurrentContexts","sMessageSubtitle","getMessageSubtitle","getValueState","sectionBasedGroupName","createSectionGroupName","_getViewId","byId","oMessageTargetProperty","split","pop","oUIModel","fireActiveTitlePress","item","aSubSections","j","k","aVisibleSections","viewId","bIsGeneralGroupName","aControls","getControlFromMessageRelatingToSubSection","persistent","_findTargetForMessage","messageObject","oMetaModel","getMetaModel","contextPath","getMetaPath","oContextPathMetadata","$kind","_fnEnableBindings","aSections","UriParameters","fromQuery","window","location","search","get","iSection","nonTableChartcontrolFound","iSubSection","oAllBlocks","getBlocks","block","_findMessageGroupAfterRebinding","attachDataReceived","sControlId","oControl","View","_setLongtextUrlDescription","sMessageDescriptionContent","oDiagnosisTitle","setAsyncDescriptionHandler","config","sOldDescription","sLongTextUrl","getLongtextUrl","jQuery","ajax","url","success","data","sDiagnosisText","getHtmlText","setDescription","promise","sError","reject","sTableFirstColProperty","getIdentifierColumn","sColumnInfo","oMsgObj","oColFromTableSettings","fetchColumnInfo","availability","getType","getValue","_navigationConfigured","label","oFieldsAffectedTitle","FormattedText","htmlText","sFieldAffectedText","sUIMessageDescription","description","clearTimeout","_setMessageDataTimeout","sIcon","oMessages","oMessageCount","Error","Warning","Success","Information","oResourceBundle","iMessageLength","sButtonType","ButtonType","Default","sMessageKey","sTooltipText","sMessageText","MessageType","Negative","Critical","Neutral","totalNumberOfMessages","setText","toString","setTooltip","setIcon","setType","setVisible","oPageReady","getController","pageReady","waitPageReady","fireMessageChange","navigateBack","oInternalModelContext","oItem","getParameter","oMessage","getTarget","sSectionTitle","_defaultFocus","mdcTable","focusInfo","preventScroll","targetInfo","focus","getGroupName","oTargetMdcTable","controlIds","control","oParentControl","reduce","acc","val","_navigateFromMessageToSectionTableInIconTabBarMode","oRefErrorContext","oRefError","_setFocusOnTargetField","targetMdcTable","aTargetMdcTableRow","_getMdcTableRows","iFirstVisibleRow","_getGridTable","getFirstVisibleRow","oTargetRow","oTargetCell","getTargetCell","setFocusToControl","errorProperty","_routing","navigateForwardToContext","scrollToIndex","iNewFirstVisibleRow","bScrollNeeded","oWaitControlIdAdded","attachEvent","focusOnTargetField","focusOnMessageTargetControl","oSelectedSection","getSelectedSection","_navigateFromMessageToSectionInIconTabBarMode","targetRow","getControlIds","controlId","isControlInTable","elem","aAllViewElements","aErroneousControls","some","getDomRef","aNotTableErroneousControls","ColumnListItem","getMetadata","getName","oTargetField","getContentEdit","_getMessageRank","aAllElements","sectionRank","_fnFilterUponId","getControlId","getVisible","hasOwnProperty","sectionName","getTitle","subSectionName","oValidationFilters","oValidationAndContextFilter","oFilters","sPath","oSorter","oDialogFilter","objectPageLayoutSections","aUserDefinedFilter","filterOutMessagesInDialog","fnTest","aControlIds","index","Infinity","errorFieldControl","fieldRankinDialog","Dialog","Filter","path","caseSensitive","getCheckControlInViewFilter","aCustomFilters","getAggregation","operator","value1","value2","oBindingContext","filters","FilterOperator","EQ","and","StartsWith","oValidationContextDialogFilters","Sorter","obj1","obj2","getSections","rankA","rankB","sort","_getSectionBySectionTitle","bUseIconTabBar","getUseIconTabBar","sSelectedSectionId","setSelectedSection","oTableContext","oOPContext","bShouldWaitForTableRefresh","oParentElement","oMdcTable","oTableRow","getTable","findIndex","element","getTargetCellIndex","getCells","oCell","getTargetColumnIndex","oTargetElement","iTargetCellIndex","sTargetCellId","aTableColumns","column","getCreationTemplate","component","require","navObject","getOwnerComponentFor","getNavigation","subOPConfigured","navConfigured","detail","route","getRowSettings","getRowActions","mProperties","messagePopover","fnFocus","isOpen","fnOnClose","detachEvent","close","warning"],"sourceRoot":"messages","sources":["MessageButton.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport UriParameters from \"sap/base/util/UriParameters\";\nimport { FEView } from \"sap/fe/core/BaseController\";\nimport messageHandling from \"sap/fe/core/controllerextensions/messageHandler/messageHandling\";\nimport { aggregation, defineUI5Class, event } from \"sap/fe/core/helpers/ClassSupport\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport type MessageFilter from \"sap/fe/macros/messages/MessageFilter\";\nimport MessagePopover from \"sap/fe/macros/messages/MessagePopover\";\nimport { $ButtonSettings, default as Button } from \"sap/m/Button\";\nimport ColumnListItem from \"sap/m/ColumnListItem\";\nimport Dialog from \"sap/m/Dialog\";\nimport FormattedText from \"sap/m/FormattedText\";\nimport { ButtonType } from \"sap/m/library\";\nimport MessageItem from \"sap/m/MessageItem\";\nimport type CoreEvent from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport { MessageType } from \"sap/ui/core/library\";\nimport Message from \"sap/ui/core/message/Message\";\nimport View from \"sap/ui/core/mvc/View\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport Sorter from \"sap/ui/model/Sorter\";\nimport Column from \"sap/ui/table/Column\";\nimport ObjectPageSection from \"sap/uxap/ObjectPageSection\";\nimport ObjectPageSubSection from \"sap/uxap/ObjectPageSubSection\";\n\ntype MessageCount = {\n\tError: number;\n\tWarning: number;\n\tSuccess: number;\n\tInformation: number;\n};\n\ntype ColumnDataWithAvailabilityType = Column & {\n\tavailability?: string;\n\tlabel?: string;\n};\n\ntype $MessageButtonSettings = $ButtonSettings & {\n\tmessageChange: Function;\n};\n\n@defineUI5Class(\"sap.fe.macros.messages.MessageButton\")\nclass MessageButton extends Button {\n\tconstructor(id?: string | $MessageButtonSettings, settings?: $MessageButtonSettings) {\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tsuper(id, settings);\n\t}\n\n\t@aggregation({ type: \"sap.fe.macros.messages.MessageFilter\", multiple: true, singularName: \"customFilter\" })\n\tcustomFilters!: MessageFilter;\n\n\t@event()\n\tmessageChange!: Function;\n\n\tprivate oMessagePopover: any;\n\n\tprivate oItemBinding: any;\n\n\tprivate oObjectPageLayout: any;\n\n\tprivate sGeneralGroupText = \"\";\n\n\tprivate _setMessageDataTimeout: any;\n\n\tprivate sViewId = \"\";\n\n\tprivate sLastActionText = \"\";\n\n\tinit() {\n\t\tButton.prototype.init.apply(this);\n\t\t//press event handler attached to open the message popover\n\t\tthis.attachPress(this.handleMessagePopoverPress, this);\n\t\tthis.oMessagePopover = new MessagePopover();\n\t\tthis.oItemBinding = this.oMessagePopover.getBinding(\"items\");\n\t\tthis.oItemBinding.attachChange(this._setMessageData, this);\n\t\tconst messageButtonId = this.getId();\n\t\tif (messageButtonId) {\n\t\t\tthis.oMessagePopover.addCustomData(new (sap as any).ui.core.CustomData({ key: \"messageButtonId\", value: messageButtonId })); // TODO check for custom data type\n\t\t}\n\t\tthis.attachModelContextChange(this._applyFiltersAndSort.bind(this));\n\t\tthis.oMessagePopover.attachActiveTitlePress(this._activeTitlePress.bind(this));\n\t}\n\n\t/**\n\t * The method that is called when a user clicks on the MessageButton control.\n\t *\n\t * @param oEvent Event object\n\t */\n\thandleMessagePopoverPress(oEvent: CoreEvent) {\n\t\tthis.oMessagePopover.toggle(oEvent.getSource());\n\t}\n\n\t/**\n\t * The method that groups the messages based on the section or subsection they belong to.\n\t * This method force the loading of contexts for all tables before to apply the grouping.\n\t *\n\t * @param oView Current view.\n\t * @returns Return promise.\n\t * @private\n\t */\n\tasync _applyGroupingAsync(oView: FEView) {\n\t\tconst aWaitForData: Promise<void>[] = [];\n\t\tconst oViewBindingContext = oView.getBindingContext();\n\t\tconst _findTablesRelatedToMessages = (view: View) => {\n\t\t\tconst oRes: any[] = [];\n\t\t\tconst aMessages = this.oItemBinding.getContexts().map(function (oContext: any) {\n\t\t\t\treturn oContext.getObject();\n\t\t\t});\n\t\t\tconst oViewContext = view.getBindingContext();\n\t\t\tif (oViewContext) {\n\t\t\t\tconst oObjectPage: Control = view.getContent()[0];\n\t\t\t\tmessageHandling.getVisibleSectionsFromObjectPageLayout(oObjectPage).forEach(function (oSection: any) {\n\t\t\t\t\toSection.getSubSections().forEach(function (oSubSection: any) {\n\t\t\t\t\t\toSubSection.findElements(true).forEach(function (oElem: any) {\n\t\t\t\t\t\t\tif (oElem.isA(\"sap.ui.mdc.Table\")) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < aMessages.length; i++) {\n\t\t\t\t\t\t\t\t\tconst oRowBinding = oElem.getRowBinding();\n\t\t\t\t\t\t\t\t\tif (oRowBinding) {\n\t\t\t\t\t\t\t\t\t\tconst sElemeBindingPath = `${oViewContext.getPath()}/${oElem.getRowBinding().getPath()}`;\n\t\t\t\t\t\t\t\t\t\tif (aMessages[i].target.indexOf(sElemeBindingPath) === 0) {\n\t\t\t\t\t\t\t\t\t\t\toRes.push({ table: oElem, subsection: oSubSection });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn oRes;\n\t\t};\n\t\t// Search for table related to Messages and initialize the binding context of the parent subsection to retrieve the data\n\t\tconst oTables = _findTablesRelatedToMessages.bind(this)(oView);\n\t\toTables.forEach(function (_oTable) {\n\t\t\tconst oMDCTable = _oTable.table,\n\t\t\t\toSubsection = _oTable.subsection;\n\t\t\tif (!oMDCTable.getBindingContext() || oMDCTable.getBindingContext()?.getPath() !== oViewBindingContext?.getPath()) {\n\t\t\t\toSubsection.setBindingContext(oViewBindingContext);\n\t\t\t\tif (!oMDCTable.getRowBinding().isLengthFinal()) {\n\t\t\t\t\taWaitForData.push(\n\t\t\t\t\t\tnew Promise(function (resolve: Function) {\n\t\t\t\t\t\t\toMDCTable.getRowBinding().attachEventOnce(\"dataReceived\", function () {\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst waitForGroupingApplied = new Promise((resolve: Function) => {\n\t\t\tsetTimeout(async () => {\n\t\t\t\tthis._applyGrouping();\n\t\t\t\tresolve();\n\t\t\t}, 0);\n\t\t});\n\t\ttry {\n\t\t\tawait Promise.all(aWaitForData);\n\t\t\toView.getModel().checkMessages();\n\t\t\tawait waitForGroupingApplied;\n\t\t} catch (err) {\n\t\t\tLog.error(\"Error while grouping the messages in the messagePopOver\");\n\t\t}\n\t}\n\n\t/**\n\t * The method that groups the messages based on the section or subsection they belong to.\n\t *\n\t * @private\n\t */\n\t_applyGrouping() {\n\t\tthis.oObjectPageLayout = this._getObjectPageLayout(this, this.oObjectPageLayout);\n\t\tif (!this.oObjectPageLayout) {\n\t\t\treturn;\n\t\t}\n\t\tconst aMessages = this.oMessagePopover.getItems();\n\t\tthis._checkControlIdInSections(aMessages);\n\t}\n\n\t/**\n\t * The method retrieves the binding context for the refError object.\n\t * The refError contains a map to store the indexes of the rows with errors.\n\t *\n\t * @param oTable The table for which we want to get the refError Object.\n\t * @returns Context of the refError.\n\t * @private\n\t */\n\t_getTableRefErrorContext(oTable: any) {\n\t\tconst oModel = oTable.getModel(\"internal\");\n\t\t//initialize the refError property if it doesn't exist\n\t\tif (!oTable.getBindingContext(\"internal\").getProperty(\"refError\")) {\n\t\t\toModel.setProperty(\"refError\", {}, oTable.getBindingContext(\"internal\"));\n\t\t}\n\t\tconst sRefErrorContextPath =\n\t\t\toTable.getBindingContext(\"internal\").getPath() +\n\t\t\t\"/refError/\" +\n\t\t\toTable.getBindingContext().getPath().replace(\"/\", \"$\") +\n\t\t\t\"$\" +\n\t\t\toTable.getRowBinding().getPath().replace(\"/\", \"$\");\n\t\tconst oContext = oModel.getContext(sRefErrorContextPath);\n\t\tif (!oContext.getProperty(\"\")) {\n\t\t\toModel.setProperty(\"\", {}, oContext);\n\t\t}\n\t\treturn oContext;\n\t}\n\n\t_updateInternalModel(\n\t\toTableRowContext: any,\n\t\tiRowIndex: number,\n\t\tsTableTargetColProperty: string,\n\t\toTable: any,\n\t\toMessageObject: any,\n\t\tbIsCreationRow?: boolean\n\t) {\n\t\tlet oTemp;\n\t\tif (bIsCreationRow) {\n\t\t\toTemp = {\n\t\t\t\trowIndex: \"CreationRow\",\n\t\t\t\ttargetColProperty: sTableTargetColProperty ? sTableTargetColProperty : \"\"\n\t\t\t};\n\t\t} else {\n\t\t\toTemp = {\n\t\t\t\trowIndex: oTableRowContext ? iRowIndex : \"\",\n\t\t\t\ttargetColProperty: sTableTargetColProperty ? sTableTargetColProperty : \"\"\n\t\t\t};\n\t\t}\n\t\tconst oModel = oTable.getModel(\"internal\"),\n\t\t\toContext = this._getTableRefErrorContext(oTable);\n\t\t//we first remove the entries with obsolete message ids from the internal model before inserting the new error info :\n\t\tconst aValidMessageIds = sap.ui\n\t\t\t.getCore()\n\t\t\t.getMessageManager()\n\t\t\t.getMessageModel()\n\t\t\t.getData()\n\t\t\t.map(function (message: any) {\n\t\t\t\treturn message.id;\n\t\t\t});\n\t\tlet aObsoleteMessagelIds;\n\t\tif (oContext.getProperty()) {\n\t\t\taObsoleteMessagelIds = Object.keys(oContext.getProperty()).filter(function (internalMessageId) {\n\t\t\t\treturn aValidMessageIds.indexOf(internalMessageId) === -1;\n\t\t\t});\n\t\t\taObsoleteMessagelIds.forEach(function (obsoleteId) {\n\t\t\t\tdelete oContext.getProperty()[obsoleteId];\n\t\t\t});\n\t\t}\n\t\toModel.setProperty(\n\t\t\toMessageObject.getId(),\n\t\t\tObject.assign({}, oContext.getProperty(oMessageObject.getId()) ? oContext.getProperty(oMessageObject.getId()) : {}, oTemp),\n\t\t\toContext\n\t\t);\n\t}\n\n\t/**\n\t * The method that sets groups for transient messages.\n\t *\n\t * @param {object} message The transient message for which we want to compute and set group.\n\t * @param {string} sActionName The action name.\n\t * @private\n\t */\n\t_setGroupLabelForTransientMsg(message: any, sActionName: string) {\n\t\tthis.sLastActionText = this.sLastActionText\n\t\t\t? this.sLastActionText\n\t\t\t: Core.getLibraryResourceBundle(\"sap.fe.core\").getText(\"T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_LAST_ACTION\");\n\n\t\tmessage.setGroupName(`${this.sLastActionText}: ${sActionName}`);\n\t}\n\n\t/**\n\t * The method that groups messages and adds the subtitle.\n\t *\n\t * @param {object} message The message we use to compute the group and subtitle.\n\t * @param {object} section The section containing the controls.\n\t * @param {object} subSection The subsection containing the controls.\n\t * @param {object} aElements List of controls from a subsection related to a message.\n\t * @param {boolean} bMultipleSubSections True if there is more than 1 subsection in the section.\n\t * @param {string} sActionName The action name.\n\t * @returns {object} Return the control targeted by the message.\n\t * @private\n\t */\n\t_computeMessageGroupAndSubTitle(\n\t\tmessage: MessageItem,\n\t\tsection: ObjectPageSection,\n\t\tsubSection: ObjectPageSubSection,\n\t\taElements: any[],\n\t\tbMultipleSubSections: boolean,\n\t\tsActionName: string\n\t) {\n\t\tconst resourceModel = getResourceModel(section);\n\t\tthis.oItemBinding.detachChange(this._setMessageData, this);\n\t\tconst oMessageObject = message.getBindingContext(\"message\")?.getObject() as Message;\n\t\tconst setSectionNameInGroup = true;\n\t\tlet oElement, oTable: any, oTargetTableInfo: any, l, iRowIndex, oTargetedControl, bIsCreationRow;\n\t\tconst bIsBackendMessage = new RegExp(\"^/\").test(oMessageObject?.getTargets()[0]);\n\t\tif (bIsBackendMessage) {\n\t\t\tfor (l = 0; l < aElements.length; l++) {\n\t\t\t\toElement = aElements[l];\n\t\t\t\toTargetedControl = oElement;\n\t\t\t\tif (oElement.isA(\"sap.m.Table\") || oElement.isA(\"sap.ui.table.Table\")) {\n\t\t\t\t\toTable = oElement.getParent();\n\t\t\t\t\tconst oRowBinding = oTable.getRowBinding();\n\t\t\t\t\tconst fnCallbackSetGroupName = (oMessageObj: any, actionName: string) => {\n\t\t\t\t\t\tthis._setGroupLabelForTransientMsg(message, actionName);\n\t\t\t\t\t};\n\t\t\t\t\tif (oRowBinding && oRowBinding.isLengthFinal() && oTable.getBindingContext()) {\n\t\t\t\t\t\tconst obj = messageHandling.getTableColumnDataAndSetSubtile(\n\t\t\t\t\t\t\toMessageObject,\n\t\t\t\t\t\t\toTable,\n\t\t\t\t\t\t\toElement,\n\t\t\t\t\t\t\toRowBinding,\n\t\t\t\t\t\t\tsActionName,\n\t\t\t\t\t\t\tsetSectionNameInGroup,\n\t\t\t\t\t\t\tfnCallbackSetGroupName\n\t\t\t\t\t\t);\n\t\t\t\t\t\toTargetTableInfo = obj.oTargetTableInfo;\n\t\t\t\t\t\tif (obj.subTitle) {\n\t\t\t\t\t\t\tmessage.setSubtitle(obj.subTitle);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmessage.setActiveTitle(!!oTargetTableInfo.oTableRowContext);\n\n\t\t\t\t\t\tif (oTargetTableInfo.oTableRowContext) {\n\t\t\t\t\t\t\tthis._formatMessageDescription(\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\toTargetTableInfo.oTableRowContext,\n\t\t\t\t\t\t\t\toTargetTableInfo.sTableTargetColName,\n\t\t\t\t\t\t\t\toTable\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tiRowIndex = oTargetTableInfo.oTableRowContext && oTargetTableInfo.oTableRowContext.getIndex();\n\t\t\t\t\t\tthis._updateInternalModel(\n\t\t\t\t\t\t\toTargetTableInfo.oTableRowContext,\n\t\t\t\t\t\t\tiRowIndex,\n\t\t\t\t\t\t\toTargetTableInfo.sTableTargetColProperty,\n\t\t\t\t\t\t\toTable,\n\t\t\t\t\t\t\toMessageObject\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmessage.setActiveTitle(true);\n\t\t\t\t\t//check if the targeted control is a child of one of the other controls\n\t\t\t\t\tconst bIsTargetedControlOrphan = messageHandling.bIsOrphanElement(oTargetedControl, aElements);\n\t\t\t\t\tif (bIsTargetedControlOrphan) {\n\t\t\t\t\t\t//set the subtitle\n\t\t\t\t\t\tmessage.setSubtitle(\"\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t//There is only one elt as this is a frontEnd message\n\t\t\toTargetedControl = aElements[0];\n\t\t\toTable = this._getMdcTable(oTargetedControl);\n\t\t\tif (oTable) {\n\t\t\t\toTargetTableInfo = {};\n\t\t\t\toTargetTableInfo.tableHeader = oTable.getHeader();\n\t\t\t\tconst iTargetColumnIndex = this._getTableColumnIndex(oTargetedControl);\n\t\t\t\toTargetTableInfo.sTableTargetColProperty =\n\t\t\t\t\tiTargetColumnIndex > -1 ? oTable.getColumns()[iTargetColumnIndex].getDataProperty() : undefined;\n\n\t\t\t\toTargetTableInfo.sTableTargetColName =\n\t\t\t\t\toTargetTableInfo.sTableTargetColProperty && iTargetColumnIndex > -1\n\t\t\t\t\t\t? oTable.getColumns()[iTargetColumnIndex].getHeader()\n\t\t\t\t\t\t: undefined;\n\t\t\t\tbIsCreationRow = this._getTableRow(oTargetedControl).isA(\"sap.ui.table.CreationRow\");\n\t\t\t\tif (!bIsCreationRow) {\n\t\t\t\t\tiRowIndex = this._getTableRowIndex(oTargetedControl);\n\t\t\t\t\toTargetTableInfo.oTableRowBindingContexts = oTable.getRowBinding().getCurrentContexts();\n\t\t\t\t\toTargetTableInfo.oTableRowContext = oTargetTableInfo.oTableRowBindingContexts[iRowIndex];\n\t\t\t\t}\n\t\t\t\tconst sMessageSubtitle = messageHandling.getMessageSubtitle(\n\t\t\t\t\toMessageObject,\n\t\t\t\t\toTargetTableInfo.oTableRowBindingContexts,\n\t\t\t\t\toTargetTableInfo.oTableRowContext,\n\t\t\t\t\toTargetTableInfo.sTableTargetColName,\n\t\t\t\t\toTable,\n\t\t\t\t\tbIsCreationRow,\n\t\t\t\t\tiTargetColumnIndex === 0 && oTargetedControl.getValueState() === \"Error\" ? oTargetedControl : undefined\n\t\t\t\t);\n\t\t\t\t//set the subtitle\n\t\t\t\tif (sMessageSubtitle) {\n\t\t\t\t\tmessage.setSubtitle(sMessageSubtitle);\n\t\t\t\t}\n\n\t\t\t\tmessage.setActiveTitle(true);\n\n\t\t\t\tthis._updateInternalModel(\n\t\t\t\t\toTargetTableInfo.oTableRowContext,\n\t\t\t\t\tiRowIndex,\n\t\t\t\t\toTargetTableInfo.sTableTargetColProperty,\n\t\t\t\t\toTable,\n\t\t\t\t\toMessageObject,\n\t\t\t\t\tbIsCreationRow\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (setSectionNameInGroup) {\n\t\t\tconst sectionBasedGroupName = messageHandling.createSectionGroupName(\n\t\t\t\tsection,\n\t\t\t\tsubSection,\n\t\t\t\tbMultipleSubSections,\n\t\t\t\toTargetTableInfo,\n\t\t\t\tresourceModel\n\t\t\t);\n\n\t\t\tmessage.setGroupName(sectionBasedGroupName);\n\t\t\tconst sViewId = this._getViewId(this.getId());\n\t\t\tconst oView = Core.byId(sViewId as string);\n\t\t\tconst oMessageTargetProperty = oMessageObject.getTargets()[0] && oMessageObject.getTargets()[0].split(\"/\").pop();\n\t\t\tconst oUIModel = oView?.getModel(\"internal\") as JSONModel;\n\t\t\tif (\n\t\t\t\toUIModel &&\n\t\t\t\toUIModel.getProperty(\"/messageTargetProperty\") &&\n\t\t\t\toMessageTargetProperty &&\n\t\t\t\toMessageTargetProperty === oUIModel.getProperty(\"/messageTargetProperty\")\n\t\t\t) {\n\t\t\t\tthis.oMessagePopover.fireActiveTitlePress({ item: message });\n\t\t\t\toUIModel.setProperty(\"/messageTargetProperty\", false);\n\t\t\t}\n\t\t}\n\t\tthis.oItemBinding.attachChange(this._setMessageData, this);\n\t\treturn oTargetedControl;\n\t}\n\n\t_checkControlIdInSections(aMessages: any[]) {\n\t\tlet section, aSubSections, message, i, j, k;\n\n\t\tthis.sGeneralGroupText = this.sGeneralGroupText\n\t\t\t? this.sGeneralGroupText\n\t\t\t: Core.getLibraryResourceBundle(\"sap.fe.core\").getText(\"T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_GENERAL\");\n\t\t//Get all sections from the object page layout\n\t\tconst aVisibleSections = messageHandling.getVisibleSectionsFromObjectPageLayout(this.oObjectPageLayout);\n\t\tif (aVisibleSections) {\n\t\t\tconst viewId = this._getViewId(this.getId());\n\t\t\tconst oView = Core.byId(viewId);\n\t\t\tconst sActionName = oView?.getBindingContext(\"internal\")?.getProperty(\"sActionName\");\n\t\t\tif (sActionName) {\n\t\t\t\t(oView?.getBindingContext(\"internal\") as any).setProperty(\"sActionName\", null);\n\t\t\t}\n\t\t\tfor (i = aMessages.length - 1; i >= 0; --i) {\n\t\t\t\t// Loop over all messages\n\t\t\t\tmessage = aMessages[i];\n\t\t\t\tlet bIsGeneralGroupName = true;\n\t\t\t\tfor (j = aVisibleSections.length - 1; j >= 0; --j) {\n\t\t\t\t\t// Loop over all visible sections\n\t\t\t\t\tsection = aVisibleSections[j];\n\t\t\t\t\taSubSections = section.getSubSections();\n\t\t\t\t\tfor (k = aSubSections.length - 1; k >= 0; --k) {\n\t\t\t\t\t\t// Loop over all sub-sections\n\t\t\t\t\t\tconst subSection = aSubSections[k];\n\t\t\t\t\t\tconst oMessageObject = message.getBindingContext(\"message\").getObject();\n\n\t\t\t\t\t\tconst aControls = messageHandling.getControlFromMessageRelatingToSubSection(subSection, oMessageObject);\n\t\t\t\t\t\tif (aControls.length > 0) {\n\t\t\t\t\t\t\tconst oTargetedControl = this._computeMessageGroupAndSubTitle(\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\tsection,\n\t\t\t\t\t\t\t\tsubSection,\n\t\t\t\t\t\t\t\taControls,\n\t\t\t\t\t\t\t\taSubSections.length > 1,\n\t\t\t\t\t\t\t\tsActionName\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t// if we found table that matches with the message, we don't stop the loop\n\t\t\t\t\t\t\t// in case we find an additional control (eg mdc field) that also match with the message\n\t\t\t\t\t\t\tif (oTargetedControl && !oTargetedControl.isA(\"sap.m.Table\") && !oTargetedControl.isA(\"sap.ui.table.Table\")) {\n\t\t\t\t\t\t\t\tj = k = -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbIsGeneralGroupName = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (bIsGeneralGroupName) {\n\t\t\t\t\tconst oMessageObject = message.getBindingContext(\"message\").getObject();\n\t\t\t\t\tmessage.setActiveTitle(false);\n\t\t\t\t\tif (oMessageObject.persistent && sActionName) {\n\t\t\t\t\t\tthis._setGroupLabelForTransientMsg(message, sActionName);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage.setGroupName(this.sGeneralGroupText);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_findTargetForMessage(message: any) {\n\t\tconst messageObject = message.getBindingContext(\"message\") && message.getBindingContext(\"message\").getObject();\n\t\tif (messageObject && messageObject.target) {\n\t\t\tconst oMetaModel =\n\t\t\t\t\tthis.oObjectPageLayout && this.oObjectPageLayout.getModel() && this.oObjectPageLayout.getModel().getMetaModel(),\n\t\t\t\tcontextPath = oMetaModel && oMetaModel.getMetaPath(messageObject.target),\n\t\t\t\toContextPathMetadata = oMetaModel && oMetaModel.getObject(contextPath);\n\t\t\tif (oContextPathMetadata && oContextPathMetadata.$kind === \"Property\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_fnEnableBindings(aSections: any[]) {\n\t\tif (UriParameters.fromQuery(window.location.search).get(\"sap-fe-xx-lazyloadingtest\")) {\n\t\t\treturn;\n\t\t}\n\t\tfor (let iSection = 0; iSection < aSections.length; iSection++) {\n\t\t\tconst oSection = aSections[iSection];\n\t\t\tlet nonTableChartcontrolFound = false;\n\t\t\tconst aSubSections = oSection.getSubSections();\n\t\t\tfor (let iSubSection = 0; iSubSection < aSubSections.length; iSubSection++) {\n\t\t\t\tconst oSubSection = aSubSections[iSubSection];\n\t\t\t\tconst oAllBlocks = oSubSection.getBlocks();\n\t\t\t\tif (oAllBlocks) {\n\t\t\t\t\tfor (let block = 0; block < oSubSection.getBlocks().length; block++) {\n\t\t\t\t\t\tif (oAllBlocks[block].getContent && !oAllBlocks[block].getContent()?.isA(\"sap.fe.macros.table.TableAPI\")) {\n\t\t\t\t\t\t\tnonTableChartcontrolFound = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (nonTableChartcontrolFound) {\n\t\t\t\t\t\toSubSection.setBindingContext(undefined);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oSubSection.getBindingContext()) {\n\t\t\t\t\tthis._findMessageGroupAfterRebinding();\n\t\t\t\t\toSubSection.getBindingContext().getBinding().attachDataReceived(this._findMessageGroupAfterRebinding.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_findMessageGroupAfterRebinding() {\n\t\tconst aMessages = this.oMessagePopover.getItems();\n\t\tthis._checkControlIdInSections(aMessages);\n\t}\n\n\t/**\n\t * The method that retrieves the view ID (HTMLView/XMLView/JSONview/JSView/Templateview) of any control.\n\t *\n\t * @param sControlId ID of the control needed to retrieve the view ID\n\t * @returns The view ID of the control\n\t */\n\t_getViewId(sControlId: string) {\n\t\tlet sViewId,\n\t\t\toControl = Core.byId(sControlId) as any;\n\t\twhile (oControl) {\n\t\t\tif (oControl instanceof View) {\n\t\t\t\tsViewId = oControl.getId();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\toControl = oControl.getParent();\n\t\t}\n\t\treturn sViewId;\n\t}\n\n\t_setLongtextUrlDescription(sMessageDescriptionContent: string, oDiagnosisTitle: any) {\n\t\tthis.oMessagePopover.setAsyncDescriptionHandler(function (config: any) {\n\t\t\t// This stores the old description\n\t\t\tconst sOldDescription = sMessageDescriptionContent;\n\t\t\t// Here we can fetch the data and concatenate it to the old one\n\t\t\t// By default, the longtextUrl fetching will overwrite the description (with the default behaviour)\n\t\t\t// Here as we have overwritten the default async handler, which fetches and replaces the description of the item\n\t\t\t// we can manually modify it to include whatever needed.\n\t\t\tconst sLongTextUrl = config.item.getLongtextUrl();\n\t\t\tif (sLongTextUrl) {\n\t\t\t\tjQuery.ajax({\n\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\turl: sLongTextUrl,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tconst sDiagnosisText = oDiagnosisTitle.getHtmlText() + data;\n\t\t\t\t\t\tconfig.item.setDescription(`${sOldDescription}${sDiagnosisText}`);\n\t\t\t\t\t\tconfig.promise.resolve();\n\t\t\t\t\t},\n\t\t\t\t\terror: function () {\n\t\t\t\t\t\tconfig.item.setDescription(sMessageDescriptionContent);\n\t\t\t\t\t\tconst sError = `A request has failed for long text data. URL: ${sLongTextUrl}`;\n\t\t\t\t\t\tLog.error(sError);\n\t\t\t\t\t\tconfig.promise.reject(sError);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t_formatMessageDescription(message: any, oTableRowContext: any, sTableTargetColName: string, oTable: any) {\n\t\tconst resourceModel = getResourceModel(oTable);\n\t\tconst sTableFirstColProperty = oTable.getParent().getIdentifierColumn();\n\t\tlet sColumnInfo = \"\";\n\t\tconst oMsgObj = message.getBindingContext(\"message\")?.getObject();\n\t\tconst oColFromTableSettings: ColumnDataWithAvailabilityType = messageHandling.fetchColumnInfo(oMsgObj, oTable);\n\t\tif (sTableTargetColName) {\n\t\t\t// if column in present in table definition\n\t\t\tsColumnInfo = `${resourceModel.getText(\"T_MESSAGE_GROUP_DESCRIPTION_TABLE_COLUMN\")}: ${sTableTargetColName}`;\n\t\t} else if (oColFromTableSettings) {\n\t\t\tif (oColFromTableSettings.availability === \"Hidden\") {\n\t\t\t\t// if column in neither in table definition nor personalization\n\t\t\t\tif (message.getType() === \"Error\") {\n\t\t\t\t\tsColumnInfo = sTableFirstColProperty\n\t\t\t\t\t\t? `${resourceModel.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC_ERROR\")} ${oTableRowContext.getValue(\n\t\t\t\t\t\t\t\tsTableFirstColProperty\n\t\t\t\t\t\t  )}` + \".\"\n\t\t\t\t\t\t: `${resourceModel.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC_ERROR\")}` + \".\";\n\t\t\t\t} else {\n\t\t\t\t\tsColumnInfo = sTableFirstColProperty\n\t\t\t\t\t\t? `${resourceModel.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC\")} ${oTableRowContext.getValue(\n\t\t\t\t\t\t\t\tsTableFirstColProperty\n\t\t\t\t\t\t  )}` + \".\"\n\t\t\t\t\t\t: `${resourceModel.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC\")}` + \".\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// if column is not in table definition but in personalization\n\t\t\t\t//if no navigation to sub op then remove link to error field BCP : 2280168899\n\t\t\t\tif (!this._navigationConfigured(oTable)) {\n\t\t\t\t\tmessage.setActiveTitle(false);\n\t\t\t\t}\n\t\t\t\tsColumnInfo = `${resourceModel.getText(\"T_MESSAGE_GROUP_DESCRIPTION_TABLE_COLUMN\")}: ${\n\t\t\t\t\toColFromTableSettings.label\n\t\t\t\t} (${resourceModel.getText(\"T_COLUMN_INDICATOR_IN_TABLE_DEFINITION\")})`;\n\t\t\t}\n\t\t}\n\t\tconst oFieldsAffectedTitle = new FormattedText({\n\t\t\thtmlText: `<html><body><strong>${resourceModel.getText(\"T_FIELDS_AFFECTED_TITLE\")}</strong></body></html><br>`\n\t\t});\n\t\tlet sFieldAffectedText: String;\n\t\tif (sTableFirstColProperty) {\n\t\t\tsFieldAffectedText = `${oFieldsAffectedTitle.getHtmlText()}<br>${resourceModel.getText(\n\t\t\t\t\"T_MESSAGE_GROUP_TITLE_TABLE_DENOMINATOR\"\n\t\t\t)}: ${oTable.getHeader()}<br>${resourceModel.getText(\"T_MESSAGE_GROUP_DESCRIPTION_TABLE_ROW\")}: ${oTableRowContext.getValue(\n\t\t\t\tsTableFirstColProperty\n\t\t\t)}<br>${sColumnInfo}<br>`;\n\t\t} else if (sColumnInfo == \"\" || !sColumnInfo) {\n\t\t\tsFieldAffectedText = \"\";\n\t\t} else {\n\t\t\tsFieldAffectedText = `${oFieldsAffectedTitle.getHtmlText()}<br>${resourceModel.getText(\n\t\t\t\t\"T_MESSAGE_GROUP_TITLE_TABLE_DENOMINATOR\"\n\t\t\t)}: ${oTable.getHeader()}<br>${sColumnInfo}<br>`;\n\t\t}\n\n\t\tconst oDiagnosisTitle = new FormattedText({\n\t\t\thtmlText: `<html><body><strong>${resourceModel.getText(\"T_DIAGNOSIS_TITLE\")}</strong></body></html><br>`\n\t\t});\n\t\t// get the UI messages from the message context to set it to Diagnosis section\n\t\tconst sUIMessageDescription = message.getBindingContext(\"message\").getObject().description;\n\t\t//set the description to null to reset it below\n\t\tmessage.setDescription(null);\n\t\tlet sDiagnosisText = \"\";\n\t\tlet sMessageDescriptionContent = \"\";\n\t\tif (message.getLongtextUrl()) {\n\t\t\tsMessageDescriptionContent = `${sFieldAffectedText}<br>`;\n\t\t\tthis._setLongtextUrlDescription(sMessageDescriptionContent, oDiagnosisTitle);\n\t\t} else if (sUIMessageDescription) {\n\t\t\tsDiagnosisText = `${oDiagnosisTitle.getHtmlText()}<br>${sUIMessageDescription}`;\n\t\t\tsMessageDescriptionContent = `${sFieldAffectedText}<br>${sDiagnosisText}`;\n\t\t\tmessage.setDescription(sMessageDescriptionContent);\n\t\t} else {\n\t\t\tmessage.setDescription(sFieldAffectedText);\n\t\t}\n\t}\n\n\t/**\n\t * Method to set the button text, count and icon property based upon the message items\n\t * ButtonType:  Possible settings for warning and error messages are 'critical' and 'negative'.\n\t *\n\t *\n\t * @private\n\t */\n\t_setMessageData() {\n\t\tclearTimeout(this._setMessageDataTimeout);\n\n\t\tthis._setMessageDataTimeout = setTimeout(async () => {\n\t\t\tconst sIcon = \"\",\n\t\t\t\toMessages = this.oMessagePopover.getItems(),\n\t\t\t\toMessageCount: MessageCount = { Error: 0, Warning: 0, Success: 0, Information: 0 },\n\t\t\t\toResourceBundle = Core.getLibraryResourceBundle(\"sap.fe.core\"),\n\t\t\t\tiMessageLength = oMessages.length;\n\t\t\tlet sButtonType = ButtonType.Default,\n\t\t\t\tsMessageKey = \"\",\n\t\t\t\tsTooltipText = \"\",\n\t\t\t\tsMessageText = \"\";\n\t\t\tif (iMessageLength > 0) {\n\t\t\t\tfor (let i = 0; i < iMessageLength; i++) {\n\t\t\t\t\tif (!oMessages[i].getType() || oMessages[i].getType() === \"\") {\n\t\t\t\t\t\t++oMessageCount[\"Information\"];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t++oMessageCount[oMessages[i].getType() as keyof MessageCount];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oMessageCount[MessageType.Error] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Negative;\n\t\t\t\t} else if (oMessageCount[MessageType.Warning] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Critical;\n\t\t\t\t} else if (oMessageCount[MessageType.Success] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Success;\n\t\t\t\t} else if (oMessageCount[MessageType.Information] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Neutral;\n\t\t\t\t}\n\n\t\t\t\tconst totalNumberOfMessages =\n\t\t\t\t\toMessageCount[MessageType.Error] +\n\t\t\t\t\toMessageCount[MessageType.Warning] +\n\t\t\t\t\toMessageCount[MessageType.Success] +\n\t\t\t\t\toMessageCount[MessageType.Information];\n\n\t\t\t\tthis.setText(totalNumberOfMessages.toString());\n\n\t\t\t\tif (oMessageCount.Error === 1) {\n\t\t\t\t\tsMessageKey = \"C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_TITLE_ERROR\";\n\t\t\t\t} else if (oMessageCount.Error > 1) {\n\t\t\t\t\tsMessageKey = \"C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_MULTIPLE_ERROR_TOOLTIP\";\n\t\t\t\t} else if (!oMessageCount.Error && oMessageCount.Warning) {\n\t\t\t\t\tsMessageKey = \"C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_WARNING_TOOLTIP\";\n\t\t\t\t} else if (!oMessageCount.Error && !oMessageCount.Warning && oMessageCount.Information) {\n\t\t\t\t\tsMessageKey = \"C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_INFO\";\n\t\t\t\t} else if (!oMessageCount.Error && !oMessageCount.Warning && !oMessageCount.Information && oMessageCount.Success) {\n\t\t\t\t\tsMessageKey = \"C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_SUCCESS\";\n\t\t\t\t}\n\t\t\t\tif (sMessageKey) {\n\t\t\t\t\tsMessageText = oResourceBundle.getText(sMessageKey);\n\t\t\t\t\tsTooltipText = oMessageCount.Error ? `${oMessageCount.Error} ${sMessageText}` : sMessageText;\n\t\t\t\t\tthis.setTooltip(sTooltipText);\n\t\t\t\t}\n\t\t\t\tthis.setIcon(sIcon);\n\t\t\t\tthis.setType(sButtonType);\n\t\t\t\tthis.setVisible(true);\n\t\t\t\tconst oView = Core.byId(this.sViewId) as FEView;\n\t\t\t\tif (oView) {\n\t\t\t\t\tconst oPageReady = (oView.getController() as PageController).pageReady;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait oPageReady.waitPageReady();\n\t\t\t\t\t\tawait this._applyGroupingAsync(oView);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tLog.error(\"fail grouping messages\");\n\t\t\t\t\t}\n\t\t\t\t\t(this as any).fireMessageChange({\n\t\t\t\t\t\tiMessageLength: iMessageLength\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (iMessageLength > 1) {\n\t\t\t\t\tthis.oMessagePopover.navigateBack();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setVisible(false);\n\t\t\t\t(this as any).fireMessageChange({\n\t\t\t\t\tiMessageLength: iMessageLength\n\t\t\t\t});\n\t\t\t}\n\t\t}, 100);\n\t}\n\n\t/**\n\t * The method that is called when a user clicks on the title of the message.\n\t *\n\t * @function\n\t * @name _activeTitlePress\n\t * @private\n\t * @param oEvent Event object passed from the handler\n\t */\n\tasync _activeTitlePress(oEvent: CoreEvent) {\n\t\tconst oInternalModelContext = this.getBindingContext(\"pageInternal\");\n\t\t(oInternalModelContext as any).setProperty(\"errorNavigationSectionFlag\", true);\n\t\tconst oItem = oEvent.getParameter(\"item\"),\n\t\t\toMessage = oItem.getBindingContext(\"message\").getObject(),\n\t\t\tbIsBackendMessage = new RegExp(\"^/\").test(oMessage.getTarget()),\n\t\t\toView = Core.byId(this.sViewId) as View;\n\t\tlet oControl, sSectionTitle;\n\t\tconst _defaultFocus = function (message: any, mdcTable: any) {\n\t\t\tconst focusInfo = { preventScroll: true, targetInfo: message };\n\t\t\tmdcTable.focus(focusInfo);\n\t\t};\n\n\t\t//check if the pressed item is related to a table control\n\t\tif (oItem.getGroupName().indexOf(\"Table:\") !== -1) {\n\t\t\tlet oTargetMdcTable: any;\n\t\t\tif (bIsBackendMessage) {\n\t\t\t\toTargetMdcTable = oMessage.controlIds\n\t\t\t\t\t.map(function (sControlId: string) {\n\t\t\t\t\t\tconst control = Core.byId(sControlId);\n\t\t\t\t\t\tconst oParentControl = control && (control.getParent() as any);\n\t\t\t\t\t\treturn oParentControl &&\n\t\t\t\t\t\t\toParentControl.isA(\"sap.ui.mdc.Table\") &&\n\t\t\t\t\t\t\toParentControl.getHeader() === oItem.getGroupName().split(\", Table: \")[1]\n\t\t\t\t\t\t\t? oParentControl\n\t\t\t\t\t\t\t: null;\n\t\t\t\t\t})\n\t\t\t\t\t.reduce(function (acc: any, val: any) {\n\t\t\t\t\t\treturn val ? val : acc;\n\t\t\t\t\t});\n\t\t\t\tif (oTargetMdcTable) {\n\t\t\t\t\tsSectionTitle = oItem.getGroupName().split(\", \")[0];\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this._navigateFromMessageToSectionTableInIconTabBarMode(\n\t\t\t\t\t\t\toTargetMdcTable,\n\t\t\t\t\t\t\tthis.oObjectPageLayout,\n\t\t\t\t\t\t\tsSectionTitle\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst oRefErrorContext = this._getTableRefErrorContext(oTargetMdcTable);\n\t\t\t\t\t\tconst oRefError = oRefErrorContext.getProperty(oItem.getBindingContext(\"message\").getObject().getId());\n\t\t\t\t\t\tconst _setFocusOnTargetField = async (targetMdcTable: any, iRowIndex: number): Promise<any> => {\n\t\t\t\t\t\t\tconst aTargetMdcTableRow = this._getMdcTableRows(targetMdcTable),\n\t\t\t\t\t\t\t\tiFirstVisibleRow = this._getGridTable(targetMdcTable).getFirstVisibleRow();\n\t\t\t\t\t\t\tif (aTargetMdcTableRow.length > 0 && aTargetMdcTableRow[0]) {\n\t\t\t\t\t\t\t\tconst oTargetRow = aTargetMdcTableRow[iRowIndex - iFirstVisibleRow],\n\t\t\t\t\t\t\t\t\toTargetCell = this.getTargetCell(oTargetRow, oMessage);\n\t\t\t\t\t\t\t\tif (oTargetCell) {\n\t\t\t\t\t\t\t\t\tthis.setFocusToControl(oTargetCell);\n\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// control not found on table\n\t\t\t\t\t\t\t\t\tconst errorProperty = oMessage.getTarget().split(\"/\").pop();\n\t\t\t\t\t\t\t\t\tif (errorProperty) {\n\t\t\t\t\t\t\t\t\t\t(oView.getModel(\"internal\") as JSONModel).setProperty(\"/messageTargetProperty\", errorProperty);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (this._navigationConfigured(targetMdcTable)) {\n\t\t\t\t\t\t\t\t\t\treturn (oView.getController() as PageController)._routing.navigateForwardToContext(\n\t\t\t\t\t\t\t\t\t\t\toTargetRow.getBindingContext()\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (oTargetMdcTable.data(\"tableType\") === \"GridTable\" && oRefError.rowIndex !== \"\") {\n\t\t\t\t\t\t\tconst iFirstVisibleRow = this._getGridTable(oTargetMdcTable).getFirstVisibleRow();\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait oTargetMdcTable.scrollToIndex(oRefError.rowIndex);\n\t\t\t\t\t\t\t\tconst aTargetMdcTableRow = this._getMdcTableRows(oTargetMdcTable);\n\t\t\t\t\t\t\t\tlet iNewFirstVisibleRow, bScrollNeeded;\n\t\t\t\t\t\t\t\tif (aTargetMdcTableRow.length > 0 && aTargetMdcTableRow[0]) {\n\t\t\t\t\t\t\t\t\tiNewFirstVisibleRow = aTargetMdcTableRow[0].getParent().getFirstVisibleRow();\n\t\t\t\t\t\t\t\t\tbScrollNeeded = iFirstVisibleRow - iNewFirstVisibleRow !== 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet oWaitControlIdAdded: Promise<void>;\n\t\t\t\t\t\t\t\tif (bScrollNeeded) {\n\t\t\t\t\t\t\t\t\t//The scrollToIndex function does not wait for the UI update. As a workaround, pending a fix from MDC (BCP: 2170251631) we use the event \"UIUpdated\".\n\t\t\t\t\t\t\t\t\toWaitControlIdAdded = new Promise(function (resolve) {\n\t\t\t\t\t\t\t\t\t\tCore.attachEvent(\"UIUpdated\", resolve);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\toWaitControlIdAdded = Promise.resolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tawait oWaitControlIdAdded;\n\t\t\t\t\t\t\t\tsetTimeout(async function () {\n\t\t\t\t\t\t\t\t\tconst focusOnTargetField = await _setFocusOnTargetField(oTargetMdcTable, oRefError.rowIndex);\n\t\t\t\t\t\t\t\t\tif (focusOnTargetField === false) {\n\t\t\t\t\t\t\t\t\t\t_defaultFocus(oMessage, oTargetMdcTable);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\tLog.error(\"Error while focusing on error\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (oTargetMdcTable.data(\"tableType\") === \"ResponsiveTable\" && oRefError) {\n\t\t\t\t\t\t\tconst focusOnMessageTargetControl = await this.focusOnMessageTargetControl(\n\t\t\t\t\t\t\t\toView,\n\t\t\t\t\t\t\t\toMessage,\n\t\t\t\t\t\t\t\toTargetMdcTable,\n\t\t\t\t\t\t\t\toRefError.rowIndex\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (focusOnMessageTargetControl === false) {\n\t\t\t\t\t\t\t\t_defaultFocus(oMessage, oTargetMdcTable);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.focusOnMessageTargetControl(oView, oMessage);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tLog.error(\"Fail to navigate to Error control\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toControl = Core.byId(oMessage.controlIds[0]);\n\t\t\t\t//If the control underlying the frontEnd message is not within the current section, we first go into the target section:\n\t\t\t\tconst oSelectedSection: any = Core.byId(this.oObjectPageLayout.getSelectedSection());\n\t\t\t\tif (oSelectedSection?.findElements(true).indexOf(oControl) === -1) {\n\t\t\t\t\tsSectionTitle = oItem.getGroupName().split(\", \")[0];\n\t\t\t\t\tthis._navigateFromMessageToSectionInIconTabBarMode(this.oObjectPageLayout, sSectionTitle);\n\t\t\t\t}\n\t\t\t\tthis.setFocusToControl(oControl);\n\t\t\t}\n\t\t} else {\n\t\t\t// focus on control\n\t\t\tsSectionTitle = oItem.getGroupName().split(\", \")[0];\n\t\t\tthis._navigateFromMessageToSectionInIconTabBarMode(this.oObjectPageLayout, sSectionTitle);\n\t\t\tthis.focusOnMessageTargetControl(oView, oMessage);\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves a table cell targeted by a message.\n\t *\n\t * @param {object} targetRow A table row\n\t * @param {object} message Message targeting a cell\n\t * @returns {object} Returns the cell\n\t * @private\n\t */\n\tgetTargetCell(targetRow: ColumnListItem, message: Message): UI5Element | null | undefined {\n\t\treturn message.getControlIds().length > 0\n\t\t\t? message\n\t\t\t\t\t.getControlIds()\n\t\t\t\t\t.map(function (controlId: string) {\n\t\t\t\t\t\tconst isControlInTable = (targetRow as any).findElements(true, function (elem: any) {\n\t\t\t\t\t\t\treturn elem.getId() === controlId;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn isControlInTable.length > 0 ? Core.byId(controlId) : null;\n\t\t\t\t\t})\n\t\t\t\t\t.reduce(function (acc: any, val: any) {\n\t\t\t\t\t\treturn val ? val : acc;\n\t\t\t\t\t})\n\t\t\t: null;\n\t}\n\n\t/**\n\t * Focus on the control targeted by a message.\n\t *\n\t * @param {object} view The current view\n\t * @param {object} message The message targeting the control on which we want to set the focus\n\t * @param {object} targetMdcTable The table targeted by the message (optional)\n\t * @param {number} rowIndex The row index of the table targeted by the message (optional)\n\t * @returns {Promise} Promise\n\t * @private\n\t */\n\tasync focusOnMessageTargetControl(view: View, message: Message, targetMdcTable?: any, rowIndex?: number): Promise<any> {\n\t\tconst aAllViewElements = view.findElements(true);\n\t\tconst aErroneousControls = message\n\t\t\t.getControlIds()\n\t\t\t.filter(function (sControlId: string) {\n\t\t\t\treturn aAllViewElements.some(function (oElem) {\n\t\t\t\t\treturn oElem.getId() === sControlId && oElem.getDomRef();\n\t\t\t\t});\n\t\t\t})\n\t\t\t.map(function (sControlId: string) {\n\t\t\t\treturn Core.byId(sControlId);\n\t\t\t});\n\t\tconst aNotTableErroneousControls = aErroneousControls.filter(function (oElem: any) {\n\t\t\treturn !oElem.isA(\"sap.m.Table\") && !oElem.isA(\"sap.ui.table.Table\");\n\t\t});\n\t\t//The focus is set on Not Table control in priority\n\t\tif (aNotTableErroneousControls.length > 0) {\n\t\t\tthis.setFocusToControl(aNotTableErroneousControls[0]);\n\t\t\treturn undefined;\n\t\t} else if (aErroneousControls.length > 0) {\n\t\t\tconst aTargetMdcTableRow = targetMdcTable\n\t\t\t\t? targetMdcTable.findElements(true, function (oElem: any) {\n\t\t\t\t\t\treturn oElem.isA(ColumnListItem.getMetadata().getName());\n\t\t\t\t  })\n\t\t\t\t: [];\n\t\t\tif (aTargetMdcTableRow.length > 0 && aTargetMdcTableRow[0]) {\n\t\t\t\tconst oTargetRow = aTargetMdcTableRow[rowIndex as number];\n\t\t\t\tconst oTargetCell = this.getTargetCell(oTargetRow, message) as any;\n\t\t\t\tif (oTargetCell) {\n\t\t\t\t\tconst oTargetField = oTargetCell.isA(\"sap.fe.macros.field.FieldAPI\")\n\t\t\t\t\t\t? oTargetCell.getContent().getContentEdit()[0]\n\t\t\t\t\t\t: oTargetCell.getItems()[0].getContent().getContentEdit()[0];\n\t\t\t\t\tthis.setFocusToControl(oTargetField);\n\t\t\t\t\treturn undefined;\n\t\t\t\t} else {\n\t\t\t\t\tconst errorProperty = message.getTarget().split(\"/\").pop();\n\t\t\t\t\tif (errorProperty) {\n\t\t\t\t\t\t(view.getModel(\"internal\") as JSONModel).setProperty(\"/messageTargetProperty\", errorProperty);\n\t\t\t\t\t}\n\t\t\t\t\tif (this._navigationConfigured(targetMdcTable)) {\n\t\t\t\t\t\treturn (view.getController() as PageController)._routing.navigateForwardToContext(oTargetRow.getBindingContext());\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t *\n\t * @param obj The message object\n\t * @param aSections The array of sections in the object page\n\t * @returns The rank of the message\n\t */\n\t_getMessageRank(obj: any, aSections: any[]) {\n\t\tif (aSections) {\n\t\t\tlet section, aSubSections, subSection, j, k, aElements, aAllElements, sectionRank;\n\t\t\tfor (j = aSections.length - 1; j >= 0; --j) {\n\t\t\t\t// Loop over all sections\n\t\t\t\tsection = aSections[j];\n\t\t\t\taSubSections = section.getSubSections();\n\t\t\t\tfor (k = aSubSections.length - 1; k >= 0; --k) {\n\t\t\t\t\t// Loop over all sub-sections\n\t\t\t\t\tsubSection = aSubSections[k];\n\t\t\t\t\taAllElements = subSection.findElements(true); // Get all elements inside a sub-section\n\t\t\t\t\t//Try to find the control 1 inside the sub section\n\t\t\t\t\taElements = aAllElements.filter(this._fnFilterUponId.bind(this, obj.getControlId()));\n\t\t\t\t\tsectionRank = j + 1;\n\t\t\t\t\tif (aElements.length > 0) {\n\t\t\t\t\t\tif (section.getVisible() && subSection.getVisible()) {\n\t\t\t\t\t\t\tif (!obj.hasOwnProperty(\"sectionName\")) {\n\t\t\t\t\t\t\t\tobj.sectionName = section.getTitle();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!obj.hasOwnProperty(\"subSectionName\")) {\n\t\t\t\t\t\t\t\tobj.subSectionName = subSection.getTitle();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn sectionRank * 10 + (k + 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// if section or subsection is invisible then group name would be Last Action\n\t\t\t\t\t\t\t// so ranking should be lower\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//if sub section title is Other messages, we return a high number(rank), which ensures\n\t\t\t//that messages belonging to this sub section always come later in messagePopover\n\t\t\tif (!obj.sectionName && !obj.subSectionName && obj.persistent) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 999;\n\t\t}\n\t\treturn 999;\n\t}\n\n\t/**\n\t * Method to set the filters based upon the message items\n\t * The desired filter operation is:\n\t * ( filters provided by user && ( validation = true && Control should be present in view ) || messages for the current matching context ).\n\t *\n\t * @private\n\t */\n\t_applyFiltersAndSort() {\n\t\tlet oValidationFilters,\n\t\t\toValidationAndContextFilter,\n\t\t\toFilters,\n\t\t\tsPath,\n\t\t\toSorter,\n\t\t\toDialogFilter,\n\t\t\tobjectPageLayoutSections: any = null;\n\t\tconst aUserDefinedFilter: any[] = [];\n\t\tconst filterOutMessagesInDialog = () => {\n\t\t\tconst fnTest = (aControlIds: string[]) => {\n\t\t\t\tlet index = Infinity,\n\t\t\t\t\toControl = Core.byId(aControlIds[0]) as any;\n\t\t\t\tconst errorFieldControl = Core.byId(aControlIds[0]);\n\t\t\t\twhile (oControl) {\n\t\t\t\t\tconst fieldRankinDialog =\n\t\t\t\t\t\toControl instanceof Dialog\n\t\t\t\t\t\t\t? (errorFieldControl?.getParent() as any).findElements(true).indexOf(errorFieldControl)\n\t\t\t\t\t\t\t: Infinity;\n\t\t\t\t\tif (oControl instanceof Dialog) {\n\t\t\t\t\t\tif (index > fieldRankinDialog) {\n\t\t\t\t\t\t\tindex = fieldRankinDialog;\n\t\t\t\t\t\t\t// Set the focus to the dialog's control\n\t\t\t\t\t\t\tthis.setFocusToControl(errorFieldControl);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// messages for sap.m.Dialog should not appear in the message button\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\toControl = oControl.getParent();\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t};\n\t\t\treturn new Filter({\n\t\t\t\tpath: \"controlIds\",\n\t\t\t\ttest: fnTest,\n\t\t\t\tcaseSensitive: true\n\t\t\t});\n\t\t};\n\t\t//Filter function to verify if the control is part of the current view or not\n\t\tfunction getCheckControlInViewFilter() {\n\t\t\tconst fnTest = function (aControlIds: string[]) {\n\t\t\t\tif (!aControlIds.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet oControl: any = Core.byId(aControlIds[0]);\n\t\t\t\twhile (oControl) {\n\t\t\t\t\tif (oControl.getId() === sViewId) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (oControl instanceof Dialog) {\n\t\t\t\t\t\t// messages for sap.m.Dialog should not appear in the message button\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\toControl = oControl.getParent();\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\treturn new Filter({\n\t\t\t\tpath: \"controlIds\",\n\t\t\t\ttest: fnTest,\n\t\t\t\tcaseSensitive: true\n\t\t\t});\n\t\t}\n\t\tif (!this.sViewId) {\n\t\t\tthis.sViewId = this._getViewId(this.getId()) as string;\n\t\t}\n\t\tconst sViewId = this.sViewId;\n\t\t//Add the filters provided by the user\n\t\tconst aCustomFilters = this.getAggregation(\"customFilters\") as any;\n\t\tif (aCustomFilters) {\n\t\t\taCustomFilters.forEach(function (filter: any) {\n\t\t\t\taUserDefinedFilter.push(\n\t\t\t\t\tnew Filter({\n\t\t\t\t\t\tpath: filter.getProperty(\"path\"),\n\t\t\t\t\t\toperator: filter.getProperty(\"operator\"),\n\t\t\t\t\t\tvalue1: filter.getProperty(\"value1\"),\n\t\t\t\t\t\tvalue2: filter.getProperty(\"value2\")\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\tconst oBindingContext = this.getBindingContext();\n\t\tif (!oBindingContext) {\n\t\t\tthis.setVisible(false);\n\t\t\treturn;\n\t\t} else {\n\t\t\tsPath = oBindingContext.getPath();\n\t\t\t//Filter for filtering out only validation messages which are currently present in the view\n\t\t\toValidationFilters = new Filter({\n\t\t\t\tfilters: [\n\t\t\t\t\tnew Filter({\n\t\t\t\t\t\tpath: \"validation\",\n\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\tvalue1: true\n\t\t\t\t\t}),\n\t\t\t\t\tgetCheckControlInViewFilter()\n\t\t\t\t],\n\t\t\t\tand: true\n\t\t\t});\n\t\t\t//Filter for filtering out the bound messages i.e target starts with the context path\n\t\t\toValidationAndContextFilter = new Filter({\n\t\t\t\tfilters: [\n\t\t\t\t\toValidationFilters,\n\t\t\t\t\tnew Filter({\n\t\t\t\t\t\tpath: \"target\",\n\t\t\t\t\t\toperator: FilterOperator.StartsWith,\n\t\t\t\t\t\tvalue1: sPath\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t\tand: false\n\t\t\t});\n\t\t\toDialogFilter = new Filter({\n\t\t\t\tfilters: [filterOutMessagesInDialog()]\n\t\t\t});\n\t\t}\n\t\tconst oValidationContextDialogFilters = new Filter({\n\t\t\tfilters: [oValidationAndContextFilter, oDialogFilter],\n\t\t\tand: true\n\t\t});\n\t\t// and finally - if there any - add custom filter (via OR)\n\t\tif (aUserDefinedFilter.length > 0) {\n\t\t\toFilters = new (Filter as any)({\n\t\t\t\tfilters: [aUserDefinedFilter, oValidationContextDialogFilters],\n\t\t\t\tand: false\n\t\t\t});\n\t\t} else {\n\t\t\toFilters = oValidationContextDialogFilters;\n\t\t}\n\t\tthis.oItemBinding.filter(oFilters);\n\t\tthis.oObjectPageLayout = this._getObjectPageLayout(this, this.oObjectPageLayout);\n\t\t// We support sorting only for ObjectPageLayout use-case.\n\t\tif (this.oObjectPageLayout) {\n\t\t\toSorter = new (Sorter as any)(\"\", null, null, (obj1: any, obj2: any) => {\n\t\t\t\tif (!objectPageLayoutSections) {\n\t\t\t\t\tobjectPageLayoutSections = this.oObjectPageLayout && this.oObjectPageLayout.getSections();\n\t\t\t\t}\n\t\t\t\tconst rankA = this._getMessageRank(obj1, objectPageLayoutSections);\n\t\t\t\tconst rankB = this._getMessageRank(obj2, objectPageLayoutSections);\n\t\t\t\tif (rankA < rankB) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (rankA > rankB) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t\tthis.oItemBinding.sort(oSorter);\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param sControlId\n\t * @param oItem\n\t * @returns True if the control ID matches the item ID\n\t */\n\t_fnFilterUponId(sControlId: string, oItem: any) {\n\t\treturn sControlId === oItem.getId();\n\t}\n\n\t/**\n\t * Retrieves the section based on section title and visibility.\n\t *\n\t * @param oObjectPage Object page.\n\t * @param sSectionTitle Section title.\n\t * @returns The section\n\t * @private\n\t */\n\t_getSectionBySectionTitle(oObjectPage: any, sSectionTitle: string) {\n\t\tlet oSection;\n\t\tif (sSectionTitle) {\n\t\t\tconst aSections = oObjectPage.getSections();\n\t\t\tfor (let i = 0; i < aSections.length; i++) {\n\t\t\t\tif (aSections[i].getVisible() && aSections[i].getTitle() === sSectionTitle) {\n\t\t\t\t\toSection = aSections[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oSection;\n\t}\n\n\t/**\n\t * Navigates to the section if the object page uses an IconTabBar and if the current section is not the target of the navigation.\n\t *\n\t * @param oObjectPage Object page.\n\t * @param sSectionTitle Section title.\n\t * @private\n\t */\n\t_navigateFromMessageToSectionInIconTabBarMode(oObjectPage: any, sSectionTitle: string) {\n\t\tconst bUseIconTabBar = oObjectPage.getUseIconTabBar();\n\t\tif (bUseIconTabBar) {\n\t\t\tconst oSection = this._getSectionBySectionTitle(oObjectPage, sSectionTitle);\n\t\t\tconst sSelectedSectionId = oObjectPage.getSelectedSection();\n\t\t\tif (oSection && sSelectedSectionId !== oSection.getId()) {\n\t\t\t\toObjectPage.setSelectedSection(oSection.getId());\n\t\t\t}\n\t\t}\n\t}\n\n\tasync _navigateFromMessageToSectionTableInIconTabBarMode(oTable: any, oObjectPage: any, sSectionTitle: string): Promise<void> {\n\t\tconst oRowBinding = oTable.getRowBinding();\n\t\tconst oTableContext = oTable.getBindingContext();\n\t\tconst oOPContext = oObjectPage.getBindingContext();\n\t\tconst bShouldWaitForTableRefresh = !(oTableContext === oOPContext);\n\t\tthis._navigateFromMessageToSectionInIconTabBarMode(oObjectPage, sSectionTitle);\n\t\treturn new Promise(function (resolve: Function) {\n\t\t\tif (bShouldWaitForTableRefresh) {\n\t\t\t\toRowBinding.attachEventOnce(\"change\", function () {\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves the MdcTable if it is found among any of the parent elements.\n\t *\n\t * @param oElement Control\n\t * @returns MDC table || undefined\n\t * @private\n\t */\n\t_getMdcTable(oElement: any) {\n\t\t//check if the element has a table within any of its parents\n\t\tlet oParentElement = oElement.getParent();\n\t\twhile (oParentElement && !oParentElement.isA(\"sap.ui.mdc.Table\")) {\n\t\t\toParentElement = oParentElement.getParent();\n\t\t}\n\t\treturn oParentElement && oParentElement.isA(\"sap.ui.mdc.Table\") ? oParentElement : undefined;\n\t}\n\n\t_getGridTable(oMdcTable: any) {\n\t\treturn oMdcTable.findElements(true, function (oElem: any) {\n\t\t\treturn (\n\t\t\t\toElem.isA(\"sap.ui.table.Table\") &&\n\t\t\t\t/** We check the element belongs to the MdcTable :*/\n\t\t\t\toElem.getParent() === oMdcTable\n\t\t\t);\n\t\t})[0];\n\t}\n\n\t/**\n\t * Retrieves the table row (if available) containing the element.\n\t *\n\t * @param oElement Control\n\t * @returns Table row || undefined\n\t * @private\n\t */\n\t_getTableRow(oElement: any) {\n\t\tlet oParentElement = oElement.getParent();\n\t\twhile (\n\t\t\toParentElement &&\n\t\t\t!oParentElement.isA(\"sap.ui.table.Row\") &&\n\t\t\t!oParentElement.isA(\"sap.ui.table.CreationRow\") &&\n\t\t\t!oParentElement.isA(ColumnListItem.getMetadata().getName())\n\t\t) {\n\t\t\toParentElement = oParentElement.getParent();\n\t\t}\n\t\treturn oParentElement &&\n\t\t\t(oParentElement.isA(\"sap.ui.table.Row\") ||\n\t\t\t\toParentElement.isA(\"sap.ui.table.CreationRow\") ||\n\t\t\t\toParentElement.isA(ColumnListItem.getMetadata().getName()))\n\t\t\t? oParentElement\n\t\t\t: undefined;\n\t}\n\n\t/**\n\t * Retrieves the index of the table row containing the element.\n\t *\n\t * @param oElement Control\n\t * @returns Row index || undefined\n\t * @private\n\t */\n\t_getTableRowIndex(oElement: any) {\n\t\tconst oTableRow = this._getTableRow(oElement);\n\t\tlet iRowIndex;\n\t\tif (oTableRow.isA(\"sap.ui.table.Row\")) {\n\t\t\tiRowIndex = oTableRow.getIndex();\n\t\t} else {\n\t\t\tiRowIndex = oTableRow\n\t\t\t\t.getTable()\n\t\t\t\t.getItems()\n\t\t\t\t.findIndex(function (element: any) {\n\t\t\t\t\treturn element.getId() === oTableRow.getId();\n\t\t\t\t});\n\t\t}\n\t\treturn iRowIndex;\n\t}\n\n\t/**\n\t * Retrieves the index of the table column containing the element.\n\t *\n\t * @param oElement Control\n\t * @returns Column index || undefined\n\t * @private\n\t */\n\t_getTableColumnIndex(oElement: any) {\n\t\tconst getTargetCellIndex = function (element: any, oTargetRow: any) {\n\t\t\treturn oTargetRow.getCells().findIndex(function (oCell: any) {\n\t\t\t\treturn oCell.getId() === element.getId();\n\t\t\t});\n\t\t};\n\t\tconst getTargetColumnIndex = function (element: any, oTargetRow: any) {\n\t\t\tlet oTargetElement = element.getParent(),\n\t\t\t\tiTargetCellIndex = getTargetCellIndex(oTargetElement, oTargetRow);\n\t\t\twhile (oTargetElement && iTargetCellIndex < 0) {\n\t\t\t\toTargetElement = oTargetElement.getParent();\n\t\t\t\tiTargetCellIndex = getTargetCellIndex(oTargetElement, oTargetRow);\n\t\t\t}\n\t\t\treturn iTargetCellIndex;\n\t\t};\n\t\tconst oTargetRow = this._getTableRow(oElement);\n\t\tlet iTargetColumnIndex;\n\t\tiTargetColumnIndex = getTargetColumnIndex(oElement, oTargetRow);\n\t\tif (oTargetRow.isA(\"sap.ui.table.CreationRow\")) {\n\t\t\tconst sTargetCellId = oTargetRow.getCells()[iTargetColumnIndex].getId(),\n\t\t\t\taTableColumns = oTargetRow.getTable().getColumns();\n\t\t\tiTargetColumnIndex = aTableColumns.findIndex(function (column: any) {\n\t\t\t\tif (column.getCreationTemplate()) {\n\t\t\t\t\treturn sTargetCellId.search(column.getCreationTemplate().getId()) > -1 ? true : false;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn iTargetColumnIndex;\n\t}\n\n\t_getMdcTableRows(oMdcTable: any) {\n\t\treturn oMdcTable.findElements(true, function (oElem: any) {\n\t\t\treturn (\n\t\t\t\toElem.isA(\"sap.ui.table.Row\") &&\n\t\t\t\t/** We check the element belongs to the Mdc Table :*/\n\t\t\t\toElem.getTable().getParent() === oMdcTable\n\t\t\t);\n\t\t});\n\t}\n\n\t_getObjectPageLayout(oElement: any, oObjectPageLayout: any) {\n\t\tif (oObjectPageLayout) {\n\t\t\treturn oObjectPageLayout;\n\t\t}\n\t\toObjectPageLayout = oElement;\n\t\t//Iterate over parent till you have not reached the object page layout\n\t\twhile (oObjectPageLayout && !oObjectPageLayout.isA(\"sap.uxap.ObjectPageLayout\")) {\n\t\t\toObjectPageLayout = oObjectPageLayout.getParent();\n\t\t}\n\t\treturn oObjectPageLayout;\n\t}\n\n\t/**\n\t * The method that is called to check if a navigation is configured from the table to a sub object page.\n\t *\n\t * @private\n\t * @param table MdcTable\n\t * @returns Either true or false\n\t */\n\t_navigationConfigured(table: any): boolean {\n\t\t// TODO: this logic would be moved to check the same at the template time to avoid the same check happening multiple times.\n\t\tconst component = sap.ui.require(\"sap/ui/core/Component\"),\n\t\t\tnavObject = table && component.getOwnerComponentFor(table) && component.getOwnerComponentFor(table).getNavigation();\n\t\tlet subOPConfigured = false,\n\t\t\tnavConfigured = false;\n\t\tif (navObject && Object.keys(navObject).indexOf(table.getRowBinding().sPath) !== -1) {\n\t\t\tsubOPConfigured =\n\t\t\t\tnavObject[table?.getRowBinding().sPath] &&\n\t\t\t\tnavObject[table?.getRowBinding().sPath].detail &&\n\t\t\t\tnavObject[table?.getRowBinding().sPath].detail.route\n\t\t\t\t\t? true\n\t\t\t\t\t: false;\n\t\t}\n\t\tnavConfigured =\n\t\t\tsubOPConfigured &&\n\t\t\ttable?.getRowSettings().getRowActions() &&\n\t\t\ttable?.getRowSettings().getRowActions()[0].mProperties.type.indexOf(\"Navigation\") !== -1;\n\t\treturn navConfigured;\n\t}\n\n\tsetFocusToControl(control?: UI5Element) {\n\t\tconst messagePopover = this.oMessagePopover;\n\t\tif (messagePopover && control && control.focus) {\n\t\t\tconst fnFocus = () => {\n\t\t\t\tcontrol.focus();\n\t\t\t};\n\t\t\tif (!messagePopover.isOpen()) {\n\t\t\t\t// when navigating to parent page to child page (on click of message), the child page might have a focus logic that might use a timeout.\n\t\t\t\t// we use the below timeouts to override this focus so that we focus on the target control of the message in the child page.\n\t\t\t\tsetTimeout(fnFocus, 0);\n\t\t\t} else {\n\t\t\t\tconst fnOnClose = () => {\n\t\t\t\t\tsetTimeout(fnFocus, 0);\n\t\t\t\t\tmessagePopover.detachEvent(\"afterClose\", fnOnClose);\n\t\t\t\t};\n\t\t\t\tmessagePopover.attachEvent(\"afterClose\", fnOnClose);\n\t\t\t\tmessagePopover.close();\n\t\t\t}\n\t\t} else {\n\t\t\tLog.warning(\"FE V4 : MessageButton : element doesn't have focus method for focusing.\");\n\t\t}\n\t}\n}\n\nexport default MessageButton;\n"],"mappings":"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"}},{"offset":{"line":22905,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","UriParameters","messageHandling","ClassSupport","ResourceModelHelper","MessagePopover","Button","ColumnListItem","Dialog","FormattedText","library","Core","coreLibrary","View","Filter","FilterOperator","Sorter","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","MessageType","ButtonType","getResourceModel","event","defineUI5Class","aggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","MessageButton","type","multiple","singularName","_Button","id","settings","_this","this","sGeneralGroupText","sViewId","sLastActionText","_proto","init","apply","attachPress","handleMessagePopoverPress","oMessagePopover","oItemBinding","getBinding","attachChange","_setMessageData","messageButtonId","getId","addCustomData","core","CustomData","attachModelContextChange","_applyFiltersAndSort","attachActiveTitlePress","_activeTitlePress","oEvent","toggle","getSource","_applyGroupingAsync","async","oView","aWaitForData","oViewBindingContext","getBindingContext","_findTablesRelatedToMessages","view","oRes","aMessages","getContexts","map","oContext","getObject","oViewContext","oObjectPage","getContent","getVisibleSectionsFromObjectPageLayout","oSection","getSubSections","oSubSection","findElements","oElem","isA","i","length","oRowBinding","getRowBinding","sElemeBindingPath","getPath","indexOf","push","table","subsection","oTables","_oTable","_oMDCTable$getBinding","oMDCTable","oSubsection","setBindingContext","isLengthFinal","Promise","resolve","attachEventOnce","waitForGroupingApplied","setTimeout","_applyGrouping","all","getModel","checkMessages","err","error","oObjectPageLayout","_getObjectPageLayout","getItems","_checkControlIdInSections","_getTableRefErrorContext","oTable","oModel","getProperty","setProperty","sRefErrorContextPath","replace","getContext","_updateInternalModel","oTableRowContext","iRowIndex","sTableTargetColProperty","oMessageObject","bIsCreationRow","oTemp","rowIndex","targetColProperty","aValidMessageIds","getCore","getMessageManager","getMessageModel","getData","message","aObsoleteMessagelIds","filter","internalMessageId","obsoleteId","assign","_setGroupLabelForTransientMsg","sActionName","getLibraryResourceBundle","getText","setGroupName","_computeMessageGroupAndSubTitle","section","subSection","aElements","bMultipleSubSections","_message$getBindingCo","resourceModel","detachChange","setSectionNameInGroup","oElement","oTargetTableInfo","l","oTargetedControl","bIsBackendMessage","RegExp","test","getTargets","getParent","fnCallbackSetGroupName","oMessageObj","actionName","obj","getTableColumnDataAndSetSubtile","subTitle","setSubtitle","setActiveTitle","_formatMessageDescription","sTableTargetColName","getIndex","bIsTargetedControlOrphan","bIsOrphanElement","_getMdcTable","tableHeader","getHeader","iTargetColumnIndex","_getTableColumnIndex","getColumns","getDataProperty","_getTableRow","_getTableRowIndex","oTableRowBindingContexts","getCurrentContexts","sMessageSubtitle","getMessageSubtitle","getValueState","sectionBasedGroupName","createSectionGroupName","_getViewId","byId","oMessageTargetProperty","split","pop","oUIModel","fireActiveTitlePress","item","aSubSections","j","k","aVisibleSections","_oView$getBindingCont","viewId","bIsGeneralGroupName","aControls","getControlFromMessageRelatingToSubSection","persistent","_findTargetForMessage","messageObject","oMetaModel","getMetaModel","contextPath","getMetaPath","oContextPathMetadata","$kind","_fnEnableBindings","aSections","fromQuery","window","location","search","get","iSection","nonTableChartcontrolFound","iSubSection","oAllBlocks","getBlocks","block","_oAllBlocks$block$get","_findMessageGroupAfterRebinding","attachDataReceived","sControlId","oControl","_setLongtextUrlDescription","sMessageDescriptionContent","oDiagnosisTitle","setAsyncDescriptionHandler","config","sOldDescription","sLongTextUrl","getLongtextUrl","jQuery","ajax","url","success","data","sDiagnosisText","getHtmlText","setDescription","promise","sError","reject","_message$getBindingCo2","sTableFirstColProperty","getIdentifierColumn","sColumnInfo","oMsgObj","oColFromTableSettings","fetchColumnInfo","availability","getType","getValue","_navigationConfigured","label","oFieldsAffectedTitle","htmlText","sFieldAffectedText","sUIMessageDescription","description","clearTimeout","_setMessageDataTimeout","sIcon","oMessages","oMessageCount","Warning","Success","Information","oResourceBundle","iMessageLength","sButtonType","Default","sMessageKey","sTooltipText","sMessageText","Negative","Critical","Neutral","totalNumberOfMessages","setText","toString","setTooltip","setIcon","setType","setVisible","oPageReady","getController","pageReady","waitPageReady","fireMessageChange","navigateBack","oInternalModelContext","oItem","getParameter","oMessage","getTarget","sSectionTitle","_defaultFocus","mdcTable","focusInfo","preventScroll","targetInfo","focus","getGroupName","oTargetMdcTable","controlIds","control","oParentControl","acc","val","_navigateFromMessageToSectionTableInIconTabBarMode","oRefErrorContext","oRefError","_setFocusOnTargetField","targetMdcTable","aTargetMdcTableRow","_getMdcTableRows","iFirstVisibleRow","_getGridTable","getFirstVisibleRow","oTargetRow","oTargetCell","getTargetCell","setFocusToControl","errorProperty","_routing","navigateForwardToContext","scrollToIndex","iNewFirstVisibleRow","bScrollNeeded","oWaitControlIdAdded","attachEvent","focusOnTargetField","focusOnMessageTargetControl","oSelectedSection","getSelectedSection","_navigateFromMessageToSectionInIconTabBarMode","targetRow","getControlIds","controlId","isControlInTable","elem","aAllViewElements","aErroneousControls","some","getDomRef","aNotTableErroneousControls","getMetadata","getName","oTargetField","getContentEdit","_getMessageRank","aAllElements","sectionRank","_fnFilterUponId","getControlId","getVisible","hasOwnProperty","sectionName","getTitle","subSectionName","oValidationFilters","oValidationAndContextFilter","oFilters","sPath","oSorter","oDialogFilter","objectPageLayoutSections","aUserDefinedFilter","filterOutMessagesInDialog","fnTest","aControlIds","index","Infinity","errorFieldControl","fieldRankinDialog","path","caseSensitive","getCheckControlInViewFilter","aCustomFilters","getAggregation","operator","value1","value2","oBindingContext","filters","EQ","and","StartsWith","oValidationContextDialogFilters","obj1","obj2","getSections","rankA","rankB","sort","_getSectionBySectionTitle","bUseIconTabBar","getUseIconTabBar","sSelectedSectionId","setSelectedSection","oTableContext","oOPContext","bShouldWaitForTableRefresh","oParentElement","oMdcTable","oTableRow","getTable","findIndex","element","getTargetCellIndex","getCells","oCell","getTargetColumnIndex","oTargetElement","iTargetCellIndex","sTargetCellId","aTableColumns","column","getCreationTemplate","component","require","navObject","getOwnerComponentFor","getNavigation","subOPConfigured","navConfigured","detail","route","getRowSettings","getRowActions","mProperties","messagePopover","fnFocus","isOpen","fnOnClose","detachEvent","close","warning"],"sources":["MessageButton-dbg.js"],"mappings":"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","sourceRoot":"messages"}},{"offset":{"line":22910,"column":0},"map":{"version":3,"names":["MessageFilter","defineUI5Class","property","type","Element","FilterOperator","Contains"],"sourceRoot":"messages","sources":["MessageFilter.ts"],"sourcesContent":["import { defineUI5Class, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport Element from \"sap/ui/core/Element\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\n\n@defineUI5Class(\"sap.fe.macros.messages.MessageFilter\")\nclass MessageFilter extends Element {\n\t@property({ type: \"string\" })\n\tpath!: string;\n\n\t@property({ type: \"sap.ui.model.FilterOperator\" })\n\toperator: FilterOperator = FilterOperator.Contains;\n\n\t@property({ type: \"string\" })\n\tvalue1!: string;\n\n\t@property({ type: \"string\" })\n\tvalue2!: string;\n}\n\nexport default MessageFilter;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;MAKMA,aAAa,WADlBC,cAAc,CAAC,sCAAsC,CAAC,UAErDC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAG5BD,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAA8B,CAAC,CAAC,UAGjDD,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAG5BD,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;EAAA,EAVFC,OAAO;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAKPC,cAAc,CAACC,QAAQ;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA,OASpCN,aAAa;AAAA"}},{"offset":{"line":22974,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","Element","FilterOperator","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","property","defineUI5Class","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","MessageFilter","type","_Element","_this","_len","arguments","length","args","Array","_key","this","Contains"],"sources":["MessageFilter-dbg.js"],"mappings":"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","sourceRoot":"messages"}},{"offset":{"line":22979,"column":0},"map":{"version":3,"names":["FeMessagePopover","defineUI5Class","init","MessagePopover","prototype","apply","setModel","sap","ui","getCore","getMessageManager","getMessageModel","bindAggregation","path","length","template","MessageItem","type","title","description","markupDescription","longtextUrl","subtitle","activeTitle","setGroupItems"],"sourceRoot":"messages","sources":["MessagePopover.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/core/helpers/ClassSupport\";\nimport MessageItem from \"sap/m/MessageItem\";\nimport MessagePopover from \"sap/m/MessagePopover\";\n\n@defineUI5Class(\"sap.fe.macros.messages.MessagePopover\")\nclass FeMessagePopover extends MessagePopover {\n\tinit() {\n\t\tMessagePopover.prototype.init.apply(this);\n\t\tthis.setModel(sap.ui.getCore().getMessageManager().getMessageModel(), \"message\");\n\n\t\tthis.bindAggregation(\"items\", {\n\t\t\tpath: \"message>/\",\n\t\t\tlength: 9999,\n\t\t\ttemplate: new (MessageItem as any)({\n\t\t\t\ttype: \"{message>type}\",\n\t\t\t\ttitle: \"{message>message}\",\n\t\t\t\tdescription: \"{message>description}\",\n\t\t\t\tmarkupDescription: true,\n\t\t\t\tlongtextUrl: \"{message>descriptionUrl}\",\n\t\t\t\tsubtitle: \"{message>additionalText}\",\n\t\t\t\tactiveTitle: \"{= ${message>controlIds}.length > 0 ? true : false}\"\n\t\t\t})\n\t\t});\n\t\tthis.setGroupItems(true);\n\t}\n}\n\nexport default FeMessagePopover;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;MAKMA,gBAAgB,WADrBC,cAAc,CAAC,uCAAuC,CAAC;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA,OAEvDC,IAAI,GAAJ,gBAAO;MACNC,cAAc,CAACC,SAAS,CAACF,IAAI,CAACG,KAAK,CAAC,IAAI,CAAC;MACzC,IAAI,CAACC,QAAQ,CAACC,GAAG,CAACC,EAAE,CAACC,OAAO,EAAE,CAACC,iBAAiB,EAAE,CAACC,eAAe,EAAE,EAAE,SAAS,CAAC;MAEhF,IAAI,CAACC,eAAe,CAAC,OAAO,EAAE;QAC7BC,IAAI,EAAE,WAAW;QACjBC,MAAM,EAAE,IAAI;QACZC,QAAQ,EAAE,IAAKC,WAAW,CAAS;UAClCC,IAAI,EAAE,gBAAgB;UACtBC,KAAK,EAAE,mBAAmB;UAC1BC,WAAW,EAAE,uBAAuB;UACpCC,iBAAiB,EAAE,IAAI;UACvBC,WAAW,EAAE,0BAA0B;UACvCC,QAAQ,EAAE,0BAA0B;UACpCC,WAAW,EAAE;QACd,CAAC;MACF,CAAC,CAAC;MACF,IAAI,CAACC,aAAa,CAAC,IAAI,CAAC;IACzB,CAAC;IAAA;EAAA,EAnB6BrB,cAAc;EAAA,OAsB9BH,gBAAgB;AAAA"}},{"offset":{"line":23018,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","MessageItem","MessagePopover","_dec","_class","defineUI5Class","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","FeMessagePopover","_MessagePopover","apply","this","arguments","_proto","init","setModel","getCore","getMessageManager","getMessageModel","bindAggregation","path","length","template","type","title","description","markupDescription","longtextUrl","subtitle","activeTitle","setGroupItems"],"sources":["MessagePopover-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,mDAAO,CAAC,mCAAoC,oBAAqB,wBAAyB,SAAUC,EAAcC,EAAaC,GACpI,aAEA,IAAIC,EAAMC,EACV,IAAIC,EAAiBL,EAAaK,eAClC,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,IAAII,GAAoBhB,EAAOE,EAAe,yCAA0CF,EAAKC,EAAsB,SAAUgB,GAC3Hd,EAAea,EAAkBC,GACjC,SAASD,IACP,OAAOC,EAAgBC,MAAMC,KAAMC,YAAcD,IACnD,CACA,IAAIE,EAASL,EAAiBV,UAC9Be,EAAOC,KAAO,SAASA,IACrBvB,EAAeO,UAAUgB,KAAKJ,MAAMC,MACpCA,KAAKI,SAAS7B,IAAIC,GAAG6B,UAAUC,oBAAoBC,kBAAmB,WACtEP,KAAKQ,gBAAgB,QAAS,CAC5BC,KAAM,YACNC,OAAQ,KACRC,SAAU,IAAIhC,EAAY,CACxBiC,KAAM,iBACNC,MAAO,oBACPC,YAAa,wBACbC,kBAAmB,KACnBC,YAAa,2BACbC,SAAU,2BACVC,YAAa,0DAGjBlB,KAAKmB,cAAc,KACrB,EACA,OAAOtB,CACT,CAzBmH,CAyBjHjB,KAAoBE,GACtB,OAAOe,CACT,EAAG","sourceRoot":"messages"}},{"offset":{"line":23023,"column":0},"map":{"version":3,"names":["MicroChartBlock","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","blockAttribute","type","isPublic","required","expectedTypes","props","metaPath","getModel","createBindingContext","AnnotationHelper","resolve$Path","measureAttributePath","CommonHelper","getMeasureAttributeForMeasure","DataPoint","getMicroChartContent","convertedChart","convertMetaModelContext","ChartType","getTemplate","dataPointValueObjects","getInvolvedDataModelObjects","contextPath","wrapperConditionBinding","hasValidAnalyticalCurrencyOrUnit","wrapperVisibleBinding","or","not","pathInModel","equal","isAnalytics","xml","BuildingBlockBase"],"sourceRoot":"microchart","sources":["MicroChart.block.ts"],"sourcesContent":["import type { Chart } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { convertMetaModelContext, getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { equal, not, or, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { hasValidAnalyticalCurrencyOrUnit } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Building block used to create a MicroChart based on the metadata provided by OData V4.\n *\n * @hideconstructor\n * @public\n * @since 1.93.0\n */\n@defineBuildingBlock({\n\tname: \"MicroChart\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.fe.macros.controls.ConditionalWrapper\", \"sap.fe.macros.microchart.MicroChartContainer\"]\n})\nexport default class MicroChartBlock extends BuildingBlockBase {\n\t/**\n\t * ID of the MicroChart.\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true, required: true })\n\tid!: string;\n\n\t/**\n\t * Metadata path to the entitySet or navigationProperty.\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", expectedTypes: [\"EntitySet\", \"NavigationProperty\"], isPublic: true })\n\tcontextPath?: Context;\n\n\t/**\n\t * Metadata path to the Chart annotations.\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", isPublic: true, required: true })\n\tmetaPath!: Context;\n\n\t/**\n\t * To control the rendering of Title, Subtitle and Currency Labels. When the size is xs then we do\n\t * not see the inner labels of the MicroChart as well.\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tshowOnlyChart: string | boolean = false;\n\n\t/**\n\t * Batch group ID along with which this call should be grouped.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tbatchGroupId = \"\";\n\n\t/**\n\t * Title for the MicroChart. If no title is provided, the title from the Chart annotation is used.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\ttitle = \"\";\n\n\t/**\n\t * Show blank space in case there is no data in the chart\n\t */\n\t@blockAttribute({ type: \"string\" })\n\thideOnNoData: string | boolean = false;\n\n\t/**\n\t * Description for the MicroChart. If no description is provided, the description from the Chart annotation is used.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tdescription = \"\";\n\n\t/**\n\t * Type of navigation, that is, External or InPage\n\t */\n\t@blockAttribute({ type: \"sap.fe.macros.NavigationType\" })\n\tnavigationType = \"None\";\n\n\t/**\n\t * Event handler for onTitlePressed event\n\t */\n\t@blockAttribute({ type: \"function\" })\n\tonTitlePressed?: string;\n\n\t/**\n\t * Size of the MicroChart\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tsize?: string;\n\n\t/**\n\t * Defines whether the MicroChart is part of an analytical table\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tisAnalytics = false;\n\n\t/*\n\t * This is used in inner fragments, so we need to declare it as block attribute context.\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tprivate readonly DataPoint?: Context;\n\n\tconstructor(props: PropertiesOf<MicroChartBlock>) {\n\t\tsuper(props);\n\n\t\tthis.metaPath = this.metaPath.getModel().createBindingContext(AnnotationHelper.resolve$Path(this.metaPath));\n\t\tconst measureAttributePath = CommonHelper.getMeasureAttributeForMeasure(\n\t\t\tthis.metaPath.getModel().createBindingContext(\"Measures/0\", this.metaPath)\n\t\t);\n\t\tif (measureAttributePath) {\n\t\t\tthis.DataPoint = this.metaPath.getModel().createBindingContext(measureAttributePath);\n\t\t}\n\t}\n\n\t/**\n\t * Gets the content of the micro chart, i.e. a reference to the fragment for the given chart type.\n\t *\n\t * @returns XML string\n\t */\n\tgetMicroChartContent() {\n\t\tconst convertedChart = convertMetaModelContext(this.metaPath) as Chart;\n\n\t\tswitch (convertedChart.ChartType) {\n\t\t\tcase \"UI.ChartType/Bullet\":\n\t\t\t\treturn `<core:Fragment fragmentName=\"sap.fe.macros.microchart.fragments.BulletMicroChart\" type=\"XML\" />`;\n\t\t\tcase \"UI.ChartType/Donut\":\n\t\t\t\treturn `<core:Fragment fragmentName=\"sap.fe.macros.microchart.fragments.RadialMicroChart\" type=\"XML\" />`;\n\t\t\tcase \"UI.ChartType/Pie\":\n\t\t\t\treturn `<core:Fragment fragmentName=\"sap.fe.macros.microchart.fragments.HarveyBallMicroChart\" type=\"XML\" />`;\n\t\t\tcase \"UI.ChartType/BarStacked\":\n\t\t\t\treturn `<core:Fragment fragmentName=\"sap.fe.macros.microchart.fragments.StackedBarMicroChart\" type=\"XML\" />`;\n\t\t\tcase \"UI.ChartType/Area\":\n\t\t\t\treturn `<core:Fragment fragmentName=\"sap.fe.macros.microchart.fragments.AreaMicroChart\" type=\"XML\" />`;\n\t\t\tcase \"UI.ChartType/Column\":\n\t\t\t\treturn `<core:Fragment fragmentName=\"sap.fe.macros.microchart.fragments.ColumnMicroChart\" type=\"XML\" />`;\n\t\t\tcase \"UI.ChartType/Line\":\n\t\t\t\treturn `<core:Fragment fragmentName=\"sap.fe.macros.microchart.fragments.LineMicroChart\" type=\"XML\" />`;\n\t\t\tcase \"UI.ChartType/Bar\":\n\t\t\t\treturn `<core:Fragment fragmentName=\"sap.fe.macros.microchart.fragments.ComparisonMicroChart\" type=\"XML\" />`;\n\t\t\tdefault:\n\t\t\t\treturn `<m:Text text=\"This chart type is not supported. Other Types yet to be implemented..\" />`;\n\t\t}\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string\n\t */\n\tgetTemplate() {\n\t\tconst dataPointValueObjects = getInvolvedDataModelObjects(\n\t\t\tthis.metaPath.getModel().createBindingContext(\"Value/$Path\", this.DataPoint),\n\t\t\tthis.contextPath\n\t\t);\n\t\tconst wrapperConditionBinding = hasValidAnalyticalCurrencyOrUnit(dataPointValueObjects);\n\t\tconst wrapperVisibleBinding = or(not(pathInModel(\"@$ui5.node.isExpanded\")), equal(pathInModel(\"@$ui5.node.level\"), 0));\n\n\t\tif (this.isAnalytics) {\n\t\t\treturn xml`<controls:ConditionalWrapper\n\t\t\t\txmlns:controls=\"sap.fe.macros.controls\"\n\t\t\t\tcondition=\"${wrapperConditionBinding}\"\n\t\t\t\tvisible=\"${wrapperVisibleBinding}\" >\n\t\t\t\t<controls:contentTrue>\n\t\t\t\t\t${this.getMicroChartContent()}\n\t\t\t\t</controls:contentTrue>\n\t\t\t\t<controls:contentFalse>\n\t\t\t\t\t<m:Text text=\"*\" />\n\t\t\t\t</controls:contentFalse>\n\t\t\t</controls:ConditionalWrapper>`;\n\t\t} else {\n\t\t\treturn this.getMicroChartContent();\n\t\t}\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":23314,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","MetaModelConverter","BindingToolkit","UIFormatters","CommonHelper","AnnotationHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_exports","hasValidAnalyticalCurrencyOrUnit","pathInModel","or","not","equal","getInvolvedDataModelObjects","convertMetaModelContext","xml","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","MicroChartBlock","name","namespace","publicNamespace","returnTypes","type","isPublic","required","expectedTypes","_BuildingBlockBase","props","_this","this","metaPath","getModel","createBindingContext","resolve$Path","measureAttributePath","getMeasureAttributeForMeasure","DataPoint","_proto","getMicroChartContent","convertedChart","ChartType","getTemplate","dataPointValueObjects","contextPath","wrapperConditionBinding","wrapperVisibleBinding","isAnalytics"],"sources":["MicroChart.block-dbg.js"],"mappings":"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","sourceRoot":"microchart"}},{"offset":{"line":23329,"column":0},"map":{"version":3,"names":["NavigationType","macroLib","ValueColor","mobilelibrary","MicroChartContainer","defineUI5Class","property","type","defaultValue","undefined","event","aggregation","multiple","isDefault","render","renderManager","control","openStart","openEnd","showOnlyChart","chartTitle","microChartTitle","forEach","subChartTitle","renderControl","close","chartDescription","Label","text","microChart","addStyleClass","uomPath","settings","_checkIfChartRequiresRuntimeLabels","path","label","flexBox","FlexBox","alignItems","justifyContent","items","setAggregation","onBeforeRendering","binding","_getListBindingForRuntimeLabels","detachEvent","_setRuntimeChartLabelsAndUnitOfMeasure","_olistBinding","onAfterRendering","attachEvent","setShowOnlyChart","value","_setChartLabels","setProperty","Boolean","AreaMicroChart","ColumnMicroChart","LineMicroChart","ComparisonMicroChart","_checkForChartLabelAggregations","getAggregation","chart","getChart","getBinding","lines","getLines","length","ODataV4ListBinding","listBinding","contexts","getContexts","measures","dimension","unitOfMeasurePath","unitOfMeasureLabel","_uomLabel","setText","getObject","firstContext","lastContext","linesPomises","lineChart","currentMinX","currentMaxX","currentMinY","currentMaxY","minX","Infinity","maxX","minY","maxY","context","measure","i","index","push","_getCriticalityFromPoint","colors","Promise","all","line","setColor","_setChartLabelsColors","criticality","leftTop","rightTop","leftBottom","rightBottom","_formatDateAndNumberValue","measurePrecision","measureScale","dimensionPrecision","calendarPattern","point","metaModel","getModel","getMetaModel","dataPointQualifiers","metaPath","ODataMetaModel","getPath","getMetaPath","dataPoint","requestObject","Neutral","Criticality","_criticality","CriticalityCalculation","criticalityCalculation","getValue","valueProperty","valueResponse","$Path","hasOwnProperty","$Decimal","_criticalityCalculation","ImprovementDirection","$EnumMember","DeviationRangeLowValue","ToleranceRangeLowValue","AcceptanceRangeLowValue","AcceptanceRangeHighValue","ToleranceRangeHighValue","DeviationRangeHighValue","resolve","criticalityValue","result","CriticalityType","Negative","toString","Error","Critical","Positive","Good","indexOf","Log","warning","improvementDirection","deviationLow","toleranceLow","acceptanceLow","acceptanceHigh","toleranceHigh","deviationHigh","precision","scale","pattern","_getSemanticsValueFormatter","formatValue","isNaN","_getLabelNumberFormatter","format","_oDateType","DateType","style","source","NumberFormat","getFloatInstance","showScale","decimals","Control"],"sourceRoot":"microchart","sources":["MicroChartContainer.ts"],"sourcesContent":["import { UIAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport CriticalityType from \"sap/chart/coloring/CriticalityType\";\nimport { aggregation, defineUI5Class, event, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport macroLib from \"sap/fe/macros/library\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport Label from \"sap/m/Label\";\nimport mobilelibrary from \"sap/m/library\";\nimport AreaMicroChart from \"sap/suite/ui/microchart/AreaMicroChart\";\nimport ColumnMicroChart from \"sap/suite/ui/microchart/ColumnMicroChart\";\nimport ComparisonMicroChart from \"sap/suite/ui/microchart/ComparisonMicroChart\";\nimport LineMicroChart from \"sap/suite/ui/microchart/LineMicroChart\";\nimport LineMicroChartLine from \"sap/suite/ui/microchart/LineMicroChartLine\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Control from \"sap/ui/core/Control\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type Context from \"sap/ui/model/Context\";\nimport ODataV4ListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport DateType from \"sap/ui/model/type/Date\";\n\nconst NavigationType = macroLib.NavigationType;\nconst ValueColor = mobilelibrary.ValueColor;\ntype DataPointValueType = {\n\tvalue: number;\n\tcontext?: Context;\n\tindex?: number;\n};\n/**\n *  Container Control for Micro Chart and UoM.\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\n@defineUI5Class(\"sap.fe.macros.microchart.MicroChartContainer\")\nclass MicroChartContainer extends Control {\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tshowOnlyChart!: boolean;\n\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: undefined\n\t})\n\tuomPath!: string;\n\n\t@property({\n\t\ttype: \"string[]\",\n\t\tdefaultValue: []\n\t})\n\tmeasures!: string[];\n\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: undefined\n\t})\n\tdimension?: string;\n\n\t@property({\n\t\ttype: \"string[]\",\n\t\tdefaultValue: []\n\t})\n\tdataPointQualifiers!: string[];\n\n\t@property({\n\t\ttype: \"int\",\n\t\tdefaultValue: undefined\n\t})\n\tmeasurePrecision!: number;\n\n\t@property({\n\t\ttype: \"int\",\n\t\tdefaultValue: 1\n\t})\n\tmeasureScale!: number;\n\n\t@property({\n\t\ttype: \"int\",\n\t\tdefaultValue: undefined\n\t})\n\tdimensionPrecision?: number;\n\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"\"\n\t})\n\tchartTitle!: string;\n\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"\"\n\t})\n\tchartDescription!: string;\n\n\t@property({\n\t\ttype: \"sap.fe.macros.NavigationType\",\n\t\tdefaultValue: \"None\"\n\t})\n\tnavigationType!: typeof NavigationType;\n\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: \"\"\n\t})\n\tcalendarPattern!: string;\n\n\t@event()\n\tonTitlePressed!: Function;\n\n\t@aggregation({\n\t\ttype: \"sap.ui.core.Control\",\n\t\tmultiple: false,\n\t\tisDefault: true\n\t})\n\tmicroChart!: Control;\n\n\t@aggregation({\n\t\ttype: \"sap.m.Label\",\n\t\tmultiple: false\n\t})\n\t_uomLabel!: Label;\n\n\t@aggregation({\n\t\ttype: \"sap.ui.core.Control\",\n\t\tmultiple: true\n\t})\n\tmicroChartTitle!: Control[];\n\n\tprivate _olistBinding?: ODataV4ListBinding;\n\n\tprivate _oDateType?: DateType;\n\n\tstatic render(renderManager: RenderManager, control: MicroChartContainer) {\n\t\trenderManager.openStart(\"div\", control);\n\t\trenderManager.openEnd();\n\t\tif (!control.showOnlyChart) {\n\t\t\tconst chartTitle = control.microChartTitle;\n\t\t\tif (chartTitle) {\n\t\t\t\tchartTitle.forEach(function (subChartTitle) {\n\t\t\t\t\trenderManager.openStart(\"div\");\n\t\t\t\t\trenderManager.openEnd();\n\t\t\t\t\trenderManager.renderControl(subChartTitle);\n\t\t\t\t\trenderManager.close(\"div\");\n\t\t\t\t});\n\t\t\t}\n\t\t\trenderManager.openStart(\"div\");\n\t\t\trenderManager.openEnd();\n\t\t\tconst chartDescription = new Label({ text: control.chartDescription });\n\t\t\trenderManager.renderControl(chartDescription);\n\t\t\trenderManager.close(\"div\");\n\t\t}\n\t\tconst microChart = control.microChart;\n\t\tif (microChart) {\n\t\t\tmicroChart.addStyleClass(\"sapUiTinyMarginTopBottom\");\n\t\t\trenderManager.renderControl(microChart);\n\t\t\tif (!control.showOnlyChart && control.uomPath) {\n\t\t\t\tconst settings = control._checkIfChartRequiresRuntimeLabels() ? undefined : { text: { path: control.uomPath } },\n\t\t\t\t\tlabel = new Label(settings),\n\t\t\t\t\tflexBox = new FlexBox({\n\t\t\t\t\t\talignItems: \"Start\",\n\t\t\t\t\t\tjustifyContent: \"End\",\n\t\t\t\t\t\titems: [label]\n\t\t\t\t\t});\n\t\t\t\trenderManager.renderControl(flexBox);\n\t\t\t\tcontrol.setAggregation(\"_uomLabel\", label);\n\t\t\t}\n\t\t}\n\t\trenderManager.close(\"div\");\n\t}\n\n\tonBeforeRendering() {\n\t\tconst binding = this._getListBindingForRuntimeLabels();\n\n\t\tif (binding) {\n\t\t\tbinding.detachEvent(\"change\", this._setRuntimeChartLabelsAndUnitOfMeasure, this);\n\t\t\tthis._olistBinding = undefined;\n\t\t}\n\t}\n\n\tonAfterRendering() {\n\t\tconst binding = this._getListBindingForRuntimeLabels();\n\n\t\tif (!this._checkIfChartRequiresRuntimeLabels()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (binding) {\n\t\t\t(binding.attachEvent as any)(\"change\", this._setRuntimeChartLabelsAndUnitOfMeasure, this);\n\t\t\tthis._olistBinding = binding;\n\t\t}\n\t}\n\n\tsetShowOnlyChart(value: boolean) {\n\t\tif (!value && this._olistBinding) {\n\t\t\tthis._setChartLabels();\n\t\t}\n\t\tthis.setProperty(\"showOnlyChart\", value, false /*re-rendering*/);\n\t}\n\n\t_checkIfChartRequiresRuntimeLabels() {\n\t\tconst microChart = this.microChart;\n\n\t\treturn Boolean(\n\t\t\tmicroChart instanceof AreaMicroChart ||\n\t\t\t\tmicroChart instanceof ColumnMicroChart ||\n\t\t\t\tmicroChart instanceof LineMicroChart ||\n\t\t\t\tmicroChart instanceof ComparisonMicroChart\n\t\t);\n\t}\n\n\t_checkForChartLabelAggregations() {\n\t\tconst microChart = this.microChart;\n\t\treturn Boolean(\n\t\t\t(microChart instanceof AreaMicroChart &&\n\t\t\t\tmicroChart.getAggregation(\"firstYLabel\") &&\n\t\t\t\tmicroChart.getAggregation(\"lastYLabel\") &&\n\t\t\t\tmicroChart.getAggregation(\"firstXLabel\") &&\n\t\t\t\tmicroChart.getAggregation(\"lastXLabel\")) ||\n\t\t\t\t(microChart instanceof ColumnMicroChart &&\n\t\t\t\t\tmicroChart.getAggregation(\"leftTopLabel\") &&\n\t\t\t\t\tmicroChart.getAggregation(\"rightTopLabel\") &&\n\t\t\t\t\tmicroChart.getAggregation(\"leftBottomLabel\") &&\n\t\t\t\t\tmicroChart.getAggregation(\"rightBottomLabel\")) ||\n\t\t\t\tmicroChart instanceof LineMicroChart\n\t\t);\n\t}\n\n\t_getListBindingForRuntimeLabels() {\n\t\tconst microChart = this.microChart;\n\t\tlet binding;\n\t\tif (microChart instanceof AreaMicroChart) {\n\t\t\tconst chart = microChart.getChart();\n\t\t\tbinding = chart && chart.getBinding(\"points\");\n\t\t} else if (microChart instanceof ColumnMicroChart) {\n\t\t\tbinding = microChart.getBinding(\"columns\");\n\t\t} else if (microChart instanceof LineMicroChart) {\n\t\t\tconst lines = microChart.getLines();\n\t\t\tbinding = lines && lines.length && lines[0].getBinding(\"points\");\n\t\t} else if (microChart instanceof ComparisonMicroChart) {\n\t\t\tbinding = microChart.getBinding(\"data\");\n\t\t}\n\t\treturn binding instanceof ODataV4ListBinding ? binding : false;\n\t}\n\n\tasync _setRuntimeChartLabelsAndUnitOfMeasure(): Promise<void> {\n\t\tconst listBinding = this._olistBinding,\n\t\t\tcontexts = listBinding?.getContexts(),\n\t\t\tmeasures = this.measures,\n\t\t\tdimension = this.dimension,\n\t\t\tunitOfMeasurePath = this.uomPath,\n\t\t\tmicroChart = this.microChart,\n\t\t\tunitOfMeasureLabel = this._uomLabel;\n\n\t\tif (unitOfMeasureLabel && unitOfMeasurePath && contexts && contexts.length && !this.showOnlyChart) {\n\t\t\tunitOfMeasureLabel.setText(contexts[0].getObject(unitOfMeasurePath));\n\t\t} else if (unitOfMeasureLabel) {\n\t\t\tunitOfMeasureLabel.setText(\"\");\n\t\t}\n\n\t\tif (!this._checkForChartLabelAggregations()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!contexts || !contexts.length) {\n\t\t\tthis._setChartLabels();\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstContext = contexts[0],\n\t\t\tlastContext = contexts[contexts.length - 1],\n\t\t\tlinesPomises: Promise<mobilelibrary.ValueColor>[] = [],\n\t\t\tlineChart = microChart instanceof LineMicroChart,\n\t\t\tcurrentMinX = firstContext.getObject(dimension),\n\t\t\tcurrentMaxX = lastContext.getObject(dimension);\n\t\tlet currentMinY,\n\t\t\tcurrentMaxY,\n\t\t\tminX: DataPointValueType = { value: Infinity },\n\t\t\tmaxX: DataPointValueType = { value: -Infinity },\n\t\t\tminY: DataPointValueType = { value: Infinity },\n\t\t\tmaxY: DataPointValueType = { value: -Infinity };\n\n\t\tminX = currentMinX == undefined ? minX : { context: firstContext, value: currentMinX };\n\t\tmaxX = currentMaxX == undefined ? maxX : { context: lastContext, value: currentMaxX };\n\n\t\tif (measures?.length) {\n\t\t\tmeasures.forEach((measure: string, i: number) => {\n\t\t\t\tcurrentMinY = firstContext.getObject(measure);\n\t\t\t\tcurrentMaxY = lastContext.getObject(measure);\n\t\t\t\tmaxY = currentMaxY > maxY.value ? { context: lastContext, value: currentMaxY, index: lineChart ? i : 0 } : maxY;\n\t\t\t\tminY = currentMinY < minY.value ? { context: firstContext, value: currentMinY, index: lineChart ? i : 0 } : minY;\n\t\t\t\tif (lineChart) {\n\t\t\t\t\tlinesPomises.push(this._getCriticalityFromPoint({ context: lastContext, value: currentMaxY, index: i }));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis._setChartLabels(minY.value, maxY.value, minX.value, maxX.value);\n\t\tif (lineChart) {\n\t\t\tconst colors = await Promise.all(linesPomises);\n\t\t\tif (colors?.length) {\n\t\t\t\tconst lines = microChart.getLines();\n\t\t\t\tlines.forEach(function (line: LineMicroChartLine, i: number) {\n\t\t\t\t\tline.setColor(colors[i]);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tawait this._setChartLabelsColors(maxY, minY);\n\t\t}\n\t}\n\n\tasync _setChartLabelsColors(maxY: DataPointValueType, minY: DataPointValueType): Promise<void> {\n\t\tconst microChart = this.microChart;\n\n\t\tconst criticality = await Promise.all([this._getCriticalityFromPoint(minY), this._getCriticalityFromPoint(maxY)]);\n\n\t\tif (microChart instanceof AreaMicroChart) {\n\t\t\t(microChart.getAggregation(\"firstYLabel\") as ManagedObject).setProperty(\"color\", criticality[0], true);\n\t\t\t(microChart.getAggregation(\"lastYLabel\") as ManagedObject).setProperty(\"color\", criticality[1], true);\n\t\t} else if (microChart instanceof ColumnMicroChart) {\n\t\t\t(microChart.getAggregation(\"leftTopLabel\") as ManagedObject).setProperty(\"color\", criticality[0], true);\n\t\t\t(microChart.getAggregation(\"rightTopLabel\") as ManagedObject).setProperty(\"color\", criticality[1], true);\n\t\t}\n\t}\n\n\t_setChartLabels(leftTop?: number, rightTop?: number, leftBottom?: number, rightBottom?: number): void {\n\t\tconst microChart = this.microChart;\n\n\t\tleftTop = this._formatDateAndNumberValue(leftTop, this.measurePrecision, this.measureScale);\n\t\trightTop = this._formatDateAndNumberValue(rightTop, this.measurePrecision, this.measureScale);\n\t\tleftBottom = this._formatDateAndNumberValue(leftBottom, this.dimensionPrecision, undefined, this.calendarPattern);\n\t\trightBottom = this._formatDateAndNumberValue(rightBottom, this.dimensionPrecision, undefined, this.calendarPattern);\n\n\t\tif (microChart instanceof AreaMicroChart) {\n\t\t\t(microChart.getAggregation(\"firstYLabel\") as ManagedObject).setProperty(\"label\", leftTop, false);\n\t\t\t(microChart.getAggregation(\"lastYLabel\") as ManagedObject).setProperty(\"label\", rightTop, false);\n\t\t\t(microChart.getAggregation(\"firstXLabel\") as ManagedObject).setProperty(\"label\", leftBottom, false);\n\t\t\t(microChart.getAggregation(\"lastXLabel\") as ManagedObject).setProperty(\"label\", rightBottom, false);\n\t\t} else if (microChart instanceof ColumnMicroChart) {\n\t\t\t(microChart.getAggregation(\"leftTopLabel\") as ManagedObject).setProperty(\"label\", leftTop, false);\n\t\t\t(microChart.getAggregation(\"rightTopLabel\") as ManagedObject).setProperty(\"label\", rightTop, false);\n\t\t\t(microChart.getAggregation(\"leftBottomLabel\") as ManagedObject).setProperty(\"label\", leftBottom, false);\n\t\t\t(microChart.getAggregation(\"rightBottomLabel\") as ManagedObject).setProperty(\"label\", rightBottom, false);\n\t\t} else if (microChart instanceof LineMicroChart) {\n\t\t\tmicroChart.setProperty(\"leftTopLabel\", leftTop, false);\n\t\t\tmicroChart.setProperty(\"rightTopLabel\", rightTop, false);\n\t\t\tmicroChart.setProperty(\"leftBottomLabel\", leftBottom, false);\n\t\t\tmicroChart.setProperty(\"rightBottomLabel\", rightBottom, false);\n\t\t}\n\t}\n\n\tasync _getCriticalityFromPoint(point: DataPointValueType): Promise<mobilelibrary.ValueColor> {\n\t\tif (point?.context) {\n\t\t\tconst metaModel = this.getModel() && (this.getModel() as ODataModel).getMetaModel(),\n\t\t\t\tdataPointQualifiers = this.dataPointQualifiers,\n\t\t\t\tmetaPath = metaModel instanceof ODataMetaModel && point.context.getPath() && metaModel.getMetaPath(point.context.getPath());\n\t\t\tif (metaModel && typeof metaPath === \"string\") {\n\t\t\t\tconst dataPoint = await metaModel.requestObject(\n\t\t\t\t\t`${metaPath}/@${UIAnnotationTerms.DataPoint}${\n\t\t\t\t\t\tpoint.index !== undefined && dataPointQualifiers[point.index] ? `#${dataPointQualifiers[point.index]}` : \"\"\n\t\t\t\t\t}`\n\t\t\t\t);\n\t\t\t\tif (dataPoint) {\n\t\t\t\t\tlet criticality = ValueColor.Neutral;\n\t\t\t\t\tconst context = point.context;\n\n\t\t\t\t\tif (dataPoint.Criticality) {\n\t\t\t\t\t\tcriticality = this._criticality(dataPoint.Criticality, context);\n\t\t\t\t\t} else if (dataPoint.CriticalityCalculation) {\n\t\t\t\t\t\tconst criticalityCalculation = dataPoint.CriticalityCalculation;\n\t\t\t\t\t\tconst getValue = function (valueProperty: any) {\n\t\t\t\t\t\t\tlet valueResponse;\n\t\t\t\t\t\t\tif (valueProperty?.$Path) {\n\t\t\t\t\t\t\t\tvalueResponse = context.getObject(valueProperty.$Path);\n\t\t\t\t\t\t\t} else if (valueProperty?.hasOwnProperty(\"$Decimal\")) {\n\t\t\t\t\t\t\t\tvalueResponse = valueProperty.$Decimal;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn valueResponse;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tcriticality = this._criticalityCalculation(\n\t\t\t\t\t\t\tcriticalityCalculation.ImprovementDirection.$EnumMember,\n\t\t\t\t\t\t\tpoint.value,\n\t\t\t\t\t\t\tgetValue(criticalityCalculation.DeviationRangeLowValue),\n\t\t\t\t\t\t\tgetValue(criticalityCalculation.ToleranceRangeLowValue),\n\t\t\t\t\t\t\tgetValue(criticalityCalculation.AcceptanceRangeLowValue),\n\t\t\t\t\t\t\tgetValue(criticalityCalculation.AcceptanceRangeHighValue),\n\t\t\t\t\t\t\tgetValue(criticalityCalculation.ToleranceRangeHighValue),\n\t\t\t\t\t\t\tgetValue(criticalityCalculation.DeviationRangeHighValue)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn criticality;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.resolve(ValueColor.Neutral);\n\t}\n\n\t_criticality(criticality: any, context: Context): mobilelibrary.ValueColor {\n\t\tlet criticalityValue, result;\n\t\tif (criticality.$Path) {\n\t\t\tcriticalityValue = context.getObject(criticality.$Path);\n\t\t\tif (criticalityValue === CriticalityType.Negative || criticalityValue.toString() === \"1\") {\n\t\t\t\tresult = ValueColor.Error;\n\t\t\t} else if (criticalityValue === CriticalityType.Critical || criticalityValue.toString() === \"2\") {\n\t\t\t\tresult = ValueColor.Critical;\n\t\t\t} else if (criticalityValue === CriticalityType.Positive || criticalityValue.toString() === \"3\") {\n\t\t\t\tresult = ValueColor.Good;\n\t\t\t}\n\t\t} else if (criticality.$EnumMember) {\n\t\t\tcriticalityValue = criticality.$EnumMember;\n\t\t\tif (criticalityValue.indexOf(\"com.sap.vocabularies.UI.v1.CriticalityType/Negative\") > -1) {\n\t\t\t\tresult = ValueColor.Error;\n\t\t\t} else if (criticalityValue.indexOf(\"com.sap.vocabularies.UI.v1.CriticalityType/Positive\") > -1) {\n\t\t\t\tresult = ValueColor.Good;\n\t\t\t} else if (criticalityValue.indexOf(\"com.sap.vocabularies.UI.v1.CriticalityType/Critical\") > -1) {\n\t\t\t\tresult = ValueColor.Critical;\n\t\t\t}\n\t\t}\n\t\tif (result === undefined) {\n\t\t\tLog.warning(\"Case not supported, returning the default Value Neutral\");\n\t\t\treturn ValueColor.Neutral;\n\t\t}\n\t\treturn result;\n\t}\n\n\t_criticalityCalculation(\n\t\timprovementDirection: string,\n\t\tvalue: number,\n\t\tdeviationLow?: string | number,\n\t\ttoleranceLow?: string | number,\n\t\tacceptanceLow?: string | number,\n\t\tacceptanceHigh?: string | number,\n\t\ttoleranceHigh?: string | number,\n\t\tdeviationHigh?: string | number\n\t): mobilelibrary.ValueColor {\n\t\tlet result;\n\n\t\t// Dealing with Decimal and Path based bingdings\n\t\tdeviationLow = deviationLow == undefined ? -Infinity : deviationLow;\n\t\ttoleranceLow = toleranceLow == undefined ? deviationLow : toleranceLow;\n\t\tacceptanceLow = acceptanceLow == undefined ? toleranceLow : acceptanceLow;\n\t\tdeviationHigh = deviationHigh == undefined ? Infinity : deviationHigh;\n\t\ttoleranceHigh = toleranceHigh == undefined ? deviationHigh : toleranceHigh;\n\t\tacceptanceHigh = acceptanceHigh == undefined ? toleranceHigh : acceptanceHigh;\n\n\t\t// Creating runtime expression binding from criticality calculation for Criticality State\n\t\tif (improvementDirection.indexOf(\"Minimize\") > -1) {\n\t\t\tif (value <= acceptanceHigh) {\n\t\t\t\tresult = ValueColor.Good;\n\t\t\t} else if (value <= toleranceHigh) {\n\t\t\t\tresult = ValueColor.Neutral;\n\t\t\t} else if (value <= deviationHigh) {\n\t\t\t\tresult = ValueColor.Critical;\n\t\t\t} else {\n\t\t\t\tresult = ValueColor.Error;\n\t\t\t}\n\t\t} else if (improvementDirection.indexOf(\"Maximize\") > -1) {\n\t\t\tif (value >= acceptanceLow) {\n\t\t\t\tresult = ValueColor.Good;\n\t\t\t} else if (value >= toleranceLow) {\n\t\t\t\tresult = ValueColor.Neutral;\n\t\t\t} else if (value >= deviationLow) {\n\t\t\t\tresult = ValueColor.Critical;\n\t\t\t} else {\n\t\t\t\tresult = ValueColor.Error;\n\t\t\t}\n\t\t} else if (improvementDirection.indexOf(\"Target\") > -1) {\n\t\t\tif (value <= acceptanceHigh && value >= acceptanceLow) {\n\t\t\t\tresult = ValueColor.Good;\n\t\t\t} else if ((value >= toleranceLow && value < acceptanceLow) || (value > acceptanceHigh && value <= toleranceHigh)) {\n\t\t\t\tresult = ValueColor.Neutral;\n\t\t\t} else if ((value >= deviationLow && value < toleranceLow) || (value > toleranceHigh && value <= deviationHigh)) {\n\t\t\t\tresult = ValueColor.Critical;\n\t\t\t} else {\n\t\t\t\tresult = ValueColor.Error;\n\t\t\t}\n\t\t}\n\n\t\tif (result === undefined) {\n\t\t\tLog.warning(\"Case not supported, returning the default Value Neutral\");\n\t\t\treturn ValueColor.Neutral;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_formatDateAndNumberValue(value?: number | string, precision?: number, scale?: number, pattern?: string) {\n\t\tif (pattern) {\n\t\t\treturn this._getSemanticsValueFormatter(pattern).formatValue(value, \"string\");\n\t\t} else if (!isNaN(value as number)) {\n\t\t\treturn this._getLabelNumberFormatter(precision, scale).format(value as number);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t_getSemanticsValueFormatter(pattern: string) {\n\t\tif (!this._oDateType) {\n\t\t\tthis._oDateType = new DateType({\n\t\t\t\tstyle: \"short\",\n\t\t\t\tsource: {\n\t\t\t\t\tpattern\n\t\t\t\t}\n\t\t\t} as any);\n\t\t}\n\n\t\treturn this._oDateType;\n\t}\n\n\t_getLabelNumberFormatter(precision?: number, scale?: number) {\n\t\treturn NumberFormat.getFloatInstance({\n\t\t\tstyle: \"short\",\n\t\t\tshowScale: true,\n\t\t\tprecision: (typeof precision === \"number\" && precision) || 0,\n\t\t\tdecimals: (typeof scale === \"number\" && scale) || 0\n\t\t});\n\t}\n}\n\nexport default MicroChartContainer;\n"],"mappings":"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"}},{"offset":{"line":23854,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CriticalityType","ClassSupport","macroLib","FlexBox","Label","mobilelibrary","AreaMicroChart","ColumnMicroChart","ComparisonMicroChart","LineMicroChart","Control","NumberFormat","ODataV4ListBinding","ODataMetaModel","DateType","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","property","event","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","NavigationType","ValueColor","MicroChartContainer","type","defaultValue","multiple","isDefault","_Control","_this","_len","arguments","length","args","Array","_key","this","render","renderManager","control","openStart","openEnd","showOnlyChart","chartTitle","microChartTitle","subChartTitle","renderControl","close","chartDescription","text","microChart","addStyleClass","uomPath","settings","_checkIfChartRequiresRuntimeLabels","path","label","flexBox","alignItems","justifyContent","items","setAggregation","_proto","onBeforeRendering","binding","_getListBindingForRuntimeLabels","detachEvent","_setRuntimeChartLabelsAndUnitOfMeasure","_olistBinding","onAfterRendering","attachEvent","setShowOnlyChart","_setChartLabels","setProperty","Boolean","_checkForChartLabelAggregations","getAggregation","chart","getChart","getBinding","lines","getLines","async","listBinding","contexts","getContexts","measures","dimension","unitOfMeasurePath","unitOfMeasureLabel","_uomLabel","setText","getObject","firstContext","lastContext","linesPomises","lineChart","currentMinX","currentMaxX","currentMinY","currentMaxY","minX","Infinity","maxX","minY","maxY","measure","i","index","push","_getCriticalityFromPoint","colors","Promise","all","line","setColor","_setChartLabelsColors","criticality","leftTop","rightTop","leftBottom","rightBottom","_formatDateAndNumberValue","measurePrecision","measureScale","dimensionPrecision","calendarPattern","point","metaModel","getModel","getMetaModel","dataPointQualifiers","metaPath","getPath","getMetaPath","dataPoint","requestObject","Neutral","Criticality","_criticality","CriticalityCalculation","criticalityCalculation","getValue","valueProperty","valueResponse","$Path","hasOwnProperty","$Decimal","_criticalityCalculation","ImprovementDirection","$EnumMember","DeviationRangeLowValue","ToleranceRangeLowValue","AcceptanceRangeLowValue","AcceptanceRangeHighValue","ToleranceRangeHighValue","DeviationRangeHighValue","resolve","criticalityValue","result","Negative","toString","Critical","Positive","Good","indexOf","warning","improvementDirection","deviationLow","toleranceLow","acceptanceLow","acceptanceHigh","toleranceHigh","deviationHigh","precision","scale","pattern","_getSemanticsValueFormatter","formatValue","isNaN","_getLabelNumberFormatter","format","_oDateType","style","source","getFloatInstance","showScale","decimals"],"sources":["MicroChartContainer-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,0DAAO,CAAC,eAAgB,qCAAsC,mCAAoC,wBAAyB,gBAAiB,cAAe,gBAAiB,yCAA0C,2CAA4C,+CAAgD,yCAA0C,sBAAuB,kCAAmC,yCAA0C,uCAAwC,0BAA2B,SAAUC,EAAKC,EAAiBC,EAAcC,EAAUC,EAASC,EAAOC,EAAeC,EAAgBC,EAAkBC,EAAsBC,EAAgBC,EAASC,EAAcC,EAAoBC,EAAgBC,GACluB,aAEA,IAAIC,EAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAASC,EAAaC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAcC,EAAeC,EAAeC,EAAeC,EAAeC,EAAeC,EAAeC,EAC1W,IAAIC,EAAWjD,EAAaiD,SAC5B,IAAIC,EAAQlD,EAAakD,MACzB,IAAIC,EAAiBnD,EAAamD,eAClC,IAAIC,GAAcpD,EAAaoD,YAC/B,SAASC,GAA2BC,EAAQL,EAAUM,EAAYC,GAAW,IAAKD,EAAY,OAAQE,OAAOC,eAAeJ,EAAQL,EAAU,CAAEU,WAAYJ,EAAWI,WAAYC,aAAcL,EAAWK,aAAcC,SAAUN,EAAWM,SAAUC,MAAOP,EAAWQ,YAAcR,EAAWQ,YAAYC,KAAKR,QAAgB,GAAM,CAC3U,SAASS,GAAuBC,GAAQ,GAAIA,SAAc,EAAG,CAAE,MAAM,IAAIC,eAAe,4DAA8D,CAAE,OAAOD,CAAM,CACrK,SAASE,GAAeC,EAAUC,GAAcD,EAASE,UAAYd,OAAOe,OAAOF,EAAWC,WAAYF,EAASE,UAAUE,YAAcJ,EAAUK,GAAgBL,EAAUC,EAAa,CAC5L,SAASI,GAAgBC,EAAGC,GAAKF,GAAkBjB,OAAOoB,eAAiBpB,OAAOoB,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,GAAgBC,EAAGC,EAAI,CACvM,SAASI,GAA0B1B,EAAQL,EAAUgC,EAAY1B,EAAYC,GAAW,IAAI0B,EAAO,CAAC,EAAGzB,OAAO0B,KAAK5B,GAAY6B,QAAQ,SAAUC,GAAOH,EAAKG,GAAO9B,EAAW8B,EAAM,GAAIH,EAAKvB,aAAeuB,EAAKvB,WAAYuB,EAAKtB,eAAiBsB,EAAKtB,aAAc,GAAI,UAAWsB,GAAQA,EAAKnB,YAAa,CAAEmB,EAAKrB,SAAW,IAAM,CAAEqB,EAAOD,EAAWK,QAAQC,UAAUC,OAAO,SAAUN,EAAMO,GAAa,OAAOA,EAAUnC,EAAQL,EAAUiC,IAASA,CAAM,EAAGA,GAAO,GAAI1B,GAAW0B,EAAKnB,mBAAqB,EAAG,CAAEmB,EAAKpB,MAAQoB,EAAKnB,YAAcmB,EAAKnB,YAAYC,KAAKR,QAAgB,EAAG0B,EAAKnB,YAAc2B,SAAW,CAAE,GAAIR,EAAKnB,mBAAqB,EAAG,CAAEN,OAAOC,eAAeJ,EAAQL,EAAUiC,GAAOA,EAAO,IAAM,CAAE,OAAOA,CAAM,CACntB,SAASS,GAA0BpC,EAAYC,GAAW,MAAM,IAAIoC,MAAM,wDAA0D,gFAAkF,CACtN,MAAMC,GAAiB5F,EAAS4F,eAChC,MAAMC,GAAa1F,EAAc0F,WAOjC,IAAIC,IAAuBjF,EAAOqC,EAAe,gDAAiDpC,EAAQkC,EAAS,CACjH+C,KAAM,UACNC,aAAc,QACZjF,EAAQiC,EAAS,CACnB+C,KAAM,SACNC,aAAcP,YACZzE,EAAQgC,EAAS,CACnB+C,KAAM,WACNC,aAAc,KACZ/E,EAAQ+B,EAAS,CACnB+C,KAAM,SACNC,aAAcP,YACZvE,EAAQ8B,EAAS,CACnB+C,KAAM,WACNC,aAAc,KACZ7E,EAAQ6B,EAAS,CACnB+C,KAAM,MACNC,aAAcP,YACZrE,EAAQ4B,EAAS,CACnB+C,KAAM,MACNC,aAAc,IACZ3E,EAAQ2B,EAAS,CACnB+C,KAAM,MACNC,aAAcP,YACZnE,EAAS0B,EAAS,CACpB+C,KAAM,SACNC,aAAc,KACZzE,EAASyB,EAAS,CACpB+C,KAAM,SACNC,aAAc,KACZxE,EAASwB,EAAS,CACpB+C,KAAM,+BACNC,aAAc,SACZvE,EAASuB,EAAS,CACpB+C,KAAM,SACNC,aAAc,KACZtE,EAASuB,IAAStB,EAASwB,GAAY,CACzC4C,KAAM,sBACNE,SAAU,MACVC,UAAW,OACTtE,EAASuB,GAAY,CACvB4C,KAAM,cACNE,SAAU,QACRpE,EAASsB,GAAY,CACvB4C,KAAM,sBACNE,SAAU,OACRpF,EAAKiB,GAAUC,EAAuB,SAAUoE,GAClDhC,GAAe2B,EAAqBK,GACpC,SAASL,IACP,IAAIM,EACJ,IAAK,IAAIC,EAAOC,UAAUC,OAAQC,EAAO,IAAIC,MAAMJ,GAAOK,EAAO,EAAGA,EAAOL,EAAMK,IAAQ,CACvFF,EAAKE,GAAQJ,UAAUI,EACzB,CACAN,EAAQD,EAASpC,KAAK4C,QAASH,IAASG,KACxCvD,GAA2BgD,EAAO,gBAAiBpE,EAAagC,GAAuBoC,IACvFhD,GAA2BgD,EAAO,UAAWnE,EAAc+B,GAAuBoC,IAClFhD,GAA2BgD,EAAO,WAAYlE,EAAc8B,GAAuBoC,IACnFhD,GAA2BgD,EAAO,YAAajE,EAAc6B,GAAuBoC,IACpFhD,GAA2BgD,EAAO,sBAAuBhE,EAAc4B,GAAuBoC,IAC9FhD,GAA2BgD,EAAO,mBAAoB/D,EAAc2B,GAAuBoC,IAC3FhD,GAA2BgD,EAAO,eAAgB9D,EAAc0B,GAAuBoC,IACvFhD,GAA2BgD,EAAO,qBAAsB7D,EAAcyB,GAAuBoC,IAC7FhD,GAA2BgD,EAAO,aAAc5D,EAAcwB,GAAuBoC,IACrFhD,GAA2BgD,EAAO,mBAAoB3D,EAAeuB,GAAuBoC,IAC5FhD,GAA2BgD,EAAO,iBAAkB1D,EAAesB,GAAuBoC,IAC1FhD,GAA2BgD,EAAO,kBAAmBzD,EAAeqB,GAAuBoC,IAC3FhD,GAA2BgD,EAAO,iBAAkBxD,EAAeoB,GAAuBoC,IAC1FhD,GAA2BgD,EAAO,aAAcvD,EAAemB,GAAuBoC,IACtFhD,GAA2BgD,EAAO,YAAatD,EAAekB,GAAuBoC,IACrFhD,GAA2BgD,EAAO,kBAAmBrD,EAAeiB,GAAuBoC,IAC3F,OAAOA,CACT,CACAN,EAAoBc,OAAS,SAASA,EAAOC,EAAeC,GAC1DD,EAAcE,UAAU,MAAOD,GAC/BD,EAAcG,UACd,IAAKF,EAAQG,cAAe,CAC1B,MAAMC,EAAaJ,EAAQK,gBAC3B,GAAID,EAAY,CACdA,EAAW/B,QAAQ,SAAUiC,GAC3BP,EAAcE,UAAU,OACxBF,EAAcG,UACdH,EAAcQ,cAAcD,GAC5BP,EAAcS,MAAM,MACtB,EACF,CACAT,EAAcE,UAAU,OACxBF,EAAcG,UACd,MAAMO,EAAmB,IAAIrH,EAAM,CACjCsH,KAAMV,EAAQS,mBAEhBV,EAAcQ,cAAcE,GAC5BV,EAAcS,MAAM,MACtB,CACA,MAAMG,EAAaX,EAAQW,WAC3B,GAAIA,EAAY,CACdA,EAAWC,cAAc,4BACzBb,EAAcQ,cAAcI,GAC5B,IAAKX,EAAQG,eAAiBH,EAAQa,QAAS,CAC7C,MAAMC,EAAWd,EAAQe,qCAAuCpC,UAAY,CACxE+B,KAAM,CACJM,KAAMhB,EAAQa,UAGlBI,EAAQ,IAAI7H,EAAM0H,GAClBI,EAAU,IAAI/H,EAAQ,CACpBgI,WAAY,QACZC,eAAgB,MAChBC,MAAO,CAACJ,KAEZlB,EAAcQ,cAAcW,GAC5BlB,EAAQsB,eAAe,YAAaL,EACtC,CACF,CACAlB,EAAcS,MAAM,MACtB,EACA,IAAIe,EAASvC,EAAoBxB,UACjC+D,EAAOC,kBAAoB,SAASA,IAClC,MAAMC,EAAU5B,KAAK6B,kCACrB,GAAID,EAAS,CACXA,EAAQE,YAAY,SAAU9B,KAAK+B,uCAAwC/B,MAC3EA,KAAKgC,cAAgBlD,SACvB,CACF,EACA4C,EAAOO,iBAAmB,SAASA,IACjC,MAAML,EAAU5B,KAAK6B,kCACrB,IAAK7B,KAAKkB,qCAAsC,CAC9C,MACF,CACA,GAAIU,EAAS,CACXA,EAAQM,YAAY,SAAUlC,KAAK+B,uCAAwC/B,MAC3EA,KAAKgC,cAAgBJ,CACvB,CACF,EACAF,EAAOS,iBAAmB,SAASA,EAAiBjF,GAClD,IAAKA,GAAS8C,KAAKgC,cAAe,CAChChC,KAAKoC,iBACP,CACApC,KAAKqC,YAAY,gBAAiBnF,EAAO,MAC3C,EACAwE,EAAOR,mCAAqC,SAASA,IACnD,MAAMJ,EAAad,KAAKc,WACxB,OAAOwB,QAAQxB,aAAsBrH,GAAkBqH,aAAsBpH,GAAoBoH,aAAsBlH,GAAkBkH,aAAsBnH,EACjK,EACA+H,EAAOa,gCAAkC,SAASA,IAChD,MAAMzB,EAAad,KAAKc,WACxB,OAAOwB,QAAQxB,aAAsBrH,GAAkBqH,EAAW0B,eAAe,gBAAkB1B,EAAW0B,eAAe,eAAiB1B,EAAW0B,eAAe,gBAAkB1B,EAAW0B,eAAe,eAAiB1B,aAAsBpH,GAAoBoH,EAAW0B,eAAe,iBAAmB1B,EAAW0B,eAAe,kBAAoB1B,EAAW0B,eAAe,oBAAsB1B,EAAW0B,eAAe,qBAAuB1B,aAAsBlH,EACne,EACA8H,EAAOG,gCAAkC,SAASA,IAChD,MAAMf,EAAad,KAAKc,WACxB,IAAIc,EACJ,GAAId,aAAsBrH,EAAgB,CACxC,MAAMgJ,EAAQ3B,EAAW4B,WACzBd,EAAUa,GAASA,EAAME,WAAW,SACtC,MAAO,GAAI7B,aAAsBpH,EAAkB,CACjDkI,EAAUd,EAAW6B,WAAW,UAClC,MAAO,GAAI7B,aAAsBlH,EAAgB,CAC/C,MAAMgJ,EAAQ9B,EAAW+B,WACzBjB,EAAUgB,GAASA,EAAMhD,QAAUgD,EAAM,GAAGD,WAAW,SACzD,MAAO,GAAI7B,aAAsBnH,EAAsB,CACrDiI,EAAUd,EAAW6B,WAAW,OAClC,CACA,OAAOf,aAAmB7H,EAAqB6H,EAAU,KAC3D,EACAF,EAAOK,uCAAyCe,eAAef,IAC7D,MAAMgB,EAAc/C,KAAKgC,cACvBgB,EAAWD,IAAgB,MAAQA,SAAqB,OAAS,EAAIA,EAAYE,cACjFC,EAAWlD,KAAKkD,SAChBC,EAAYnD,KAAKmD,UACjBC,EAAoBpD,KAAKgB,QACzBF,EAAad,KAAKc,WAClBuC,EAAqBrD,KAAKsD,UAC5B,GAAID,GAAsBD,GAAqBJ,GAAYA,EAASpD,SAAWI,KAAKM,cAAe,CACjG+C,EAAmBE,QAAQP,EAAS,GAAGQ,UAAUJ,GACnD,MAAO,GAAIC,EAAoB,CAC7BA,EAAmBE,QAAQ,GAC7B,CACA,IAAKvD,KAAKuC,kCAAmC,CAC3C,MACF,CACA,IAAKS,IAAaA,EAASpD,OAAQ,CACjCI,KAAKoC,kBACL,MACF,CACA,MAAMqB,EAAeT,EAAS,GAC5BU,EAAcV,EAASA,EAASpD,OAAS,GACzC+D,EAAe,GACfC,EAAY9C,aAAsBlH,EAClCiK,EAAcJ,EAAaD,UAAUL,GACrCW,EAAcJ,EAAYF,UAAUL,GACtC,IAAIY,EACFC,EACAC,EAAO,CACL/G,MAAOgH,UAETC,EAAO,CACLjH,OAAQgH,UAEVE,EAAO,CACLlH,MAAOgH,UAETG,EAAO,CACLnH,OAAQgH,UAEZD,EAAOJ,GAAe/E,UAAYmF,EAAO,CACvCrH,QAAS6G,EACTvG,MAAO2G,GAETM,EAAOL,GAAehF,UAAYqF,EAAO,CACvCvH,QAAS8G,EACTxG,MAAO4G,GAET,GAAIZ,IAAa,MAAQA,SAAkB,GAAKA,EAAStD,OAAQ,CAC/DsD,EAAS1E,QAAQ,CAAC8F,EAASC,KACzBR,EAAcN,EAAaD,UAAUc,GACrCN,EAAcN,EAAYF,UAAUc,GACpCD,EAAOL,EAAcK,EAAKnH,MAAQ,CAChCN,QAAS8G,EACTxG,MAAO8G,EACPQ,MAAOZ,EAAYW,EAAI,GACrBF,EACJD,EAAOL,EAAcK,EAAKlH,MAAQ,CAChCN,QAAS6G,EACTvG,MAAO6G,EACPS,MAAOZ,EAAYW,EAAI,GACrBH,EACJ,GAAIR,EAAW,CACbD,EAAac,KAAKzE,KAAK0E,yBAAyB,CAC9C9H,QAAS8G,EACTxG,MAAO8G,EACPQ,MAAOD,IAEX,GAEJ,CACAvE,KAAKoC,gBAAgBgC,EAAKlH,MAAOmH,EAAKnH,MAAO+G,EAAK/G,MAAOiH,EAAKjH,OAC9D,GAAI0G,EAAW,CACb,MAAMe,QAAeC,QAAQC,IAAIlB,GACjC,GAAIgB,IAAW,MAAQA,SAAgB,GAAKA,EAAO/E,OAAQ,CACzD,MAAMgD,EAAQ9B,EAAW+B,WACzBD,EAAMpE,QAAQ,SAAUsG,EAAMP,GAC5BO,EAAKC,SAASJ,EAAOJ,GACvB,EACF,CACF,KAAO,OACCvE,KAAKgF,sBAAsBX,EAAMD,EACzC,CACF,EACA1C,EAAOsD,sBAAwBlC,eAAekC,EAAsBX,EAAMD,GACxE,MAAMtD,EAAad,KAAKc,WACxB,MAAMmE,QAAoBL,QAAQC,IAAI,CAAC7E,KAAK0E,yBAAyBN,GAAOpE,KAAK0E,yBAAyBL,KAC1G,GAAIvD,aAAsBrH,EAAgB,CACxCqH,EAAW0B,eAAe,eAAeH,YAAY,QAAS4C,EAAY,GAAI,MAC9EnE,EAAW0B,eAAe,cAAcH,YAAY,QAAS4C,EAAY,GAAI,KAC/E,MAAO,GAAInE,aAAsBpH,EAAkB,CACjDoH,EAAW0B,eAAe,gBAAgBH,YAAY,QAAS4C,EAAY,GAAI,MAC/EnE,EAAW0B,eAAe,iBAAiBH,YAAY,QAAS4C,EAAY,GAAI,KAClF,CACF,EACAvD,EAAOU,gBAAkB,SAASA,EAAgB8C,EAASC,EAAUC,EAAYC,GAC/E,MAAMvE,EAAad,KAAKc,WACxBoE,EAAUlF,KAAKsF,0BAA0BJ,EAASlF,KAAKuF,iBAAkBvF,KAAKwF,cAC9EL,EAAWnF,KAAKsF,0BAA0BH,EAAUnF,KAAKuF,iBAAkBvF,KAAKwF,cAChFJ,EAAapF,KAAKsF,0BAA0BF,EAAYpF,KAAKyF,mBAAoB3G,UAAWkB,KAAK0F,iBACjGL,EAAcrF,KAAKsF,0BAA0BD,EAAarF,KAAKyF,mBAAoB3G,UAAWkB,KAAK0F,iBACnG,GAAI5E,aAAsBrH,EAAgB,CACxCqH,EAAW0B,eAAe,eAAeH,YAAY,QAAS6C,EAAS,OACvEpE,EAAW0B,eAAe,cAAcH,YAAY,QAAS8C,EAAU,OACvErE,EAAW0B,eAAe,eAAeH,YAAY,QAAS+C,EAAY,OAC1EtE,EAAW0B,eAAe,cAAcH,YAAY,QAASgD,EAAa,MAC5E,MAAO,GAAIvE,aAAsBpH,EAAkB,CACjDoH,EAAW0B,eAAe,gBAAgBH,YAAY,QAAS6C,EAAS,OACxEpE,EAAW0B,eAAe,iBAAiBH,YAAY,QAAS8C,EAAU,OAC1ErE,EAAW0B,eAAe,mBAAmBH,YAAY,QAAS+C,EAAY,OAC9EtE,EAAW0B,eAAe,oBAAoBH,YAAY,QAASgD,EAAa,MAClF,MAAO,GAAIvE,aAAsBlH,EAAgB,CAC/CkH,EAAWuB,YAAY,eAAgB6C,EAAS,OAChDpE,EAAWuB,YAAY,gBAAiB8C,EAAU,OAClDrE,EAAWuB,YAAY,kBAAmB+C,EAAY,OACtDtE,EAAWuB,YAAY,mBAAoBgD,EAAa,MAC1D,CACF,EACA3D,EAAOgD,yBAA2B5B,eAAe4B,EAAyBiB,GACxE,GAAIA,IAAU,MAAQA,SAAe,GAAKA,EAAM/I,QAAS,CACvD,MAAMgJ,EAAY5F,KAAK6F,YAAc7F,KAAK6F,WAAWC,eACnDC,EAAsB/F,KAAK+F,oBAC3BC,EAAWJ,aAAqB5L,GAAkB2L,EAAM/I,QAAQqJ,WAAaL,EAAUM,YAAYP,EAAM/I,QAAQqJ,WACnH,GAAIL,UAAoBI,IAAa,SAAU,CAC7C,MAAMG,QAAkBP,EAAUQ,cAAc,GAAGJ,MAAa,yCAAyCL,EAAMnB,QAAU1F,WAAaiH,EAAoBJ,EAAMnB,OAAS,IAAIuB,EAAoBJ,EAAMnB,SAAW,MAClN,GAAI2B,EAAW,CACb,IAAIlB,EAAc/F,GAAWmH,QAC7B,MAAMzJ,EAAU+I,EAAM/I,QACtB,GAAIuJ,EAAUG,YAAa,CACzBrB,EAAcjF,KAAKuG,aAAaJ,EAAUG,YAAa1J,EACzD,MAAO,GAAIuJ,EAAUK,uBAAwB,CAC3C,MAAMC,EAAyBN,EAAUK,uBACzC,MAAME,EAAW,SAAUC,GACzB,IAAIC,EACJ,GAAID,IAAkB,MAAQA,SAAuB,GAAKA,EAAcE,MAAO,CAC7ED,EAAgBhK,EAAQ4G,UAAUmD,EAAcE,MAClD,MAAO,GAAIF,IAAkB,MAAQA,SAAuB,GAAKA,EAAcG,eAAe,YAAa,CACzGF,EAAgBD,EAAcI,QAChC,CACA,OAAOH,CACT,EACA3B,EAAcjF,KAAKgH,wBAAwBP,EAAuBQ,qBAAqBC,YAAavB,EAAMzI,MAAOwJ,EAASD,EAAuBU,wBAAyBT,EAASD,EAAuBW,wBAAyBV,EAASD,EAAuBY,yBAA0BX,EAASD,EAAuBa,0BAA2BZ,EAASD,EAAuBc,yBAA0Bb,EAASD,EAAuBe,yBACpb,CACA,OAAOvC,CACT,CACF,CACF,CACA,OAAOL,QAAQ6C,QAAQvI,GAAWmH,QACpC,EACA3E,EAAO6E,aAAe,SAASA,EAAatB,EAAarI,GACvD,IAAI8K,EAAkBC,EACtB,GAAI1C,EAAY4B,MAAO,CACrBa,EAAmB9K,EAAQ4G,UAAUyB,EAAY4B,OACjD,GAAIa,IAAqBvO,EAAgByO,UAAYF,EAAiBG,aAAe,IAAK,CACxFF,EAASzI,GAAWF,KACtB,MAAO,GAAI0I,IAAqBvO,EAAgB2O,UAAYJ,EAAiBG,aAAe,IAAK,CAC/FF,EAASzI,GAAW4I,QACtB,MAAO,GAAIJ,IAAqBvO,EAAgB4O,UAAYL,EAAiBG,aAAe,IAAK,CAC/FF,EAASzI,GAAW8I,IACtB,CACF,MAAO,GAAI/C,EAAYiC,YAAa,CAClCQ,EAAmBzC,EAAYiC,YAC/B,GAAIQ,EAAiBO,QAAQ,wDAA0D,EAAG,CACxFN,EAASzI,GAAWF,KACtB,MAAO,GAAI0I,EAAiBO,QAAQ,wDAA0D,EAAG,CAC/FN,EAASzI,GAAW8I,IACtB,MAAO,GAAIN,EAAiBO,QAAQ,wDAA0D,EAAG,CAC/FN,EAASzI,GAAW4I,QACtB,CACF,CACA,GAAIH,IAAW7I,UAAW,CACxB5F,EAAIgP,QAAQ,2DACZ,OAAOhJ,GAAWmH,OACpB,CACA,OAAOsB,CACT,EACAjG,EAAOsF,wBAA0B,SAASA,EAAwBmB,EAAsBjL,EAAOkL,EAAcC,EAAcC,EAAeC,EAAgBC,EAAeC,GACvK,IAAId,EAGJS,EAAeA,GAAgBtJ,WAAaoF,SAAWkE,EACvDC,EAAeA,GAAgBvJ,UAAYsJ,EAAeC,EAC1DC,EAAgBA,GAAiBxJ,UAAYuJ,EAAeC,EAC5DG,EAAgBA,GAAiB3J,UAAYoF,SAAWuE,EACxDD,EAAgBA,GAAiB1J,UAAY2J,EAAgBD,EAC7DD,EAAiBA,GAAkBzJ,UAAY0J,EAAgBD,EAG/D,GAAIJ,EAAqBF,QAAQ,aAAe,EAAG,CACjD,GAAI/K,GAASqL,EAAgB,CAC3BZ,EAASzI,GAAW8I,IACtB,MAAO,GAAI9K,GAASsL,EAAe,CACjCb,EAASzI,GAAWmH,OACtB,MAAO,GAAInJ,GAASuL,EAAe,CACjCd,EAASzI,GAAW4I,QACtB,KAAO,CACLH,EAASzI,GAAWF,KACtB,CACF,MAAO,GAAImJ,EAAqBF,QAAQ,aAAe,EAAG,CACxD,GAAI/K,GAASoL,EAAe,CAC1BX,EAASzI,GAAW8I,IACtB,MAAO,GAAI9K,GAASmL,EAAc,CAChCV,EAASzI,GAAWmH,OACtB,MAAO,GAAInJ,GAASkL,EAAc,CAChCT,EAASzI,GAAW4I,QACtB,KAAO,CACLH,EAASzI,GAAWF,KACtB,CACF,MAAO,GAAImJ,EAAqBF,QAAQ,WAAa,EAAG,CACtD,GAAI/K,GAASqL,GAAkBrL,GAASoL,EAAe,CACrDX,EAASzI,GAAW8I,IACtB,MAAO,GAAI9K,GAASmL,GAAgBnL,EAAQoL,GAAiBpL,EAAQqL,GAAkBrL,GAASsL,EAAe,CAC7Gb,EAASzI,GAAWmH,OACtB,MAAO,GAAInJ,GAASkL,GAAgBlL,EAAQmL,GAAgBnL,EAAQsL,GAAiBtL,GAASuL,EAAe,CAC3Gd,EAASzI,GAAW4I,QACtB,KAAO,CACLH,EAASzI,GAAWF,KACtB,CACF,CACA,GAAI2I,IAAW7I,UAAW,CACxB5F,EAAIgP,QAAQ,2DACZ,OAAOhJ,GAAWmH,OACpB,CACA,OAAOsB,CACT,EACAjG,EAAO4D,0BAA4B,SAASA,EAA0BpI,EAAOwL,EAAWC,EAAOC,GAC7F,GAAIA,EAAS,CACX,OAAO5I,KAAK6I,4BAA4BD,GAASE,YAAY5L,EAAO,SACtE,MAAO,IAAK6L,MAAM7L,GAAQ,CACxB,OAAO8C,KAAKgJ,yBAAyBN,EAAWC,GAAOM,OAAO/L,EAChE,CACA,OAAOA,CACT,EACAwE,EAAOmH,4BAA8B,SAASA,EAA4BD,GACxE,IAAK5I,KAAKkJ,WAAY,CACpBlJ,KAAKkJ,WAAa,IAAIjP,EAAS,CAC7BkP,MAAO,QACPC,OAAQ,CACNR,YAGN,CACA,OAAO5I,KAAKkJ,UACd,EACAxH,EAAOsH,yBAA2B,SAASA,EAAyBN,EAAWC,GAC7E,OAAO7O,EAAauP,iBAAiB,CACnCF,MAAO,QACPG,UAAW,KACXZ,iBAAkBA,IAAc,UAAYA,GAAa,EACzDa,gBAAiBZ,IAAU,UAAYA,GAAS,GAEpD,EACA,OAAOxJ,CACT,CAlX0C,CAkXxCtF,GAAWwB,EAAc+C,GAA0BhD,EAAQuC,UAAW,gBAAiB,CAACxD,GAAQ,CAChG6C,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX7B,EAAe8C,GAA0BhD,EAAQuC,UAAW,UAAW,CAACvD,GAAQ,CAClF4C,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX5B,EAAe6C,GAA0BhD,EAAQuC,UAAW,WAAY,CAACtD,GAAQ,CACnF2C,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX3B,EAAe4C,GAA0BhD,EAAQuC,UAAW,YAAa,CAACrD,GAAQ,CACpF0C,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACX1B,EAAe2C,GAA0BhD,EAAQuC,UAAW,sBAAuB,CAACpD,GAAQ,CAC9FyC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXzB,EAAe0C,GAA0BhD,EAAQuC,UAAW,mBAAoB,CAACnD,GAAQ,CAC3FwC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXxB,EAAeyC,GAA0BhD,EAAQuC,UAAW,eAAgB,CAAClD,GAAQ,CACvFuC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXvB,EAAewC,GAA0BhD,EAAQuC,UAAW,qBAAsB,CAACjD,GAAQ,CAC7FsC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXtB,EAAeuC,GAA0BhD,EAAQuC,UAAW,aAAc,CAAChD,GAAS,CACtFqC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXrB,EAAgBsC,GAA0BhD,EAAQuC,UAAW,mBAAoB,CAAC/C,GAAS,CAC7FoC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXpB,EAAgBqC,GAA0BhD,EAAQuC,UAAW,iBAAkB,CAAC9C,GAAS,CAC3FmC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXnB,EAAgBoC,GAA0BhD,EAAQuC,UAAW,kBAAmB,CAAC7C,GAAS,CAC5FkC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXlB,EAAgBmC,GAA0BhD,EAAQuC,UAAW,iBAAkB,CAAC5C,GAAS,CAC3FiC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXjB,EAAgBkC,GAA0BhD,EAAQuC,UAAW,aAAc,CAAC3C,GAAS,CACvFgC,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXhB,EAAgBiC,GAA0BhD,EAAQuC,UAAW,YAAa,CAAC1C,GAAS,CACtF+B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXf,EAAgBgC,GAA0BhD,EAAQuC,UAAW,kBAAmB,CAACzC,GAAS,CAC5F8B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACV/B,KAAaD,GAClB,OAAOgE,EACT,EAAG","sourceRoot":"microchart"}},{"offset":{"line":23859,"column":0},"map":{"version":3,"names":["ValueColor","mobilelibrary","calendarPatternMap","yyyy","Q","MM","ww","yyyyMMdd","yyyyMM","MicroChartHelper","getThresholdColor","value","iContext","path","context","getPath","indexOf","Error","Critical","Neutral","getMeasurePropertyPaths","chartAnnotations","entityTypeAnnotations","chartType","propertyPath","Log","warning","undefined","measureIndex","Measures","iMeasureAttribute","CommonHelper","getMeasureAttributeIndex","measureAttribute","MeasureAttributes","dataPoint","DataPoint","$AnnotationPath","Value","$Path","push","join","getHiddenPathExpression","args","hiddenPaths","forEach","call","hiddenProperty","length","isNotAlwaysHidden","maxValue","valueHidden","maxValueHidden","logError","error","formatDecimal","property","fractionDigits","constraints","formatOptions","scale","$Scale","$Nullable","$Precision","getSelectParameters","groupId","uomPath","criticality","parameters","k","$EnumMember","criticalityPath","getDataPointQualifiersForMeasures","qualifiers","measureAttributes","fnAddDataPointQualifier","chartMeasure","measure","$PropertyPath","qualifier","Measure","annotationPath","split","logWarning","key","getDisplayValueForMicroChart","pathText","valueTextPath","valueDataPointPath","valueFormat","ValueFormat","NumberOfFractionalDigits","shouldMicroChartRender","dataPointValueHidden","dataPointMaxValue","availableChartTypes","dataPointValue","hiddenPath","chartAnnotationDimension","Dimensions","finalDataPointValue","dataPointMaximumValue","MaximumValue","maxValueHiddenPath","getDataPointQualifiersForMicroChart","getColorPaletteForMicroChart","Criticality","getMeasureScaleForMicroChart","getBindingExpressionForMicrochart","microChart","collection","uiName","condition","currencyOrUnit","getUOMPathForMicrochart","dataPointCriticallity","functionValue","batchGroupId","showOnlyChart","getAggregationForMicrochart","aggregationType","dimension","measureOrDimensionBar","dataPointCriticallityCalc","targetValuePath","dimensionPropertyPath","CriticalityCalculation","TargetValue","getCurrencyOrUnit","getCalendarPattern","propertyType","annotations","formatDimension","date","pattern","DateFormat","getDateInstance","parse","Date","getTime","formatStringDimension","matchedValue","toString","match","getX","some","type"],"sourceRoot":"microchart","sources":["MicroChartHelper.ts"],"sourcesContent":["import { CommonAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport { MeasuresAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Measures\";\nimport type { Chart, DataPointType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport mobilelibrary from \"sap/m/library\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\nimport { MetaModelNavProperty } from \"types/metamodel_types\";\nimport MicroChartBlock from \"./MicroChart.block\";\n\nconst ValueColor = mobilelibrary.ValueColor;\n\nconst calendarPatternMap: { [key: string]: RegExp } = {\n\tyyyy: /[1-9][0-9]{3,}|0[0-9]{3}/,\n\tQ: /[1-4]/,\n\tMM: /0[1-9]|1[0-2]/,\n\tww: /0[1-9]|[1-4][0-9]|5[0-3]/,\n\tyyyyMMdd: /([1-9][0-9]{3,}|0[0-9]{3})(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])/,\n\tyyyyMM: /([1-9][0-9]{3,}|0[0-9]{3})(0[1-9]|1[0-2])/,\n\t\"yyyy-MM-dd\": /([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])/\n};\n\n/**\n * Helper class used by MDC_Controls to handle SAP Fiori elements for OData V4\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst MicroChartHelper = {\n\t/**\n\t * This function returns the Threshold Color for bullet micro chart.\n\t *\n\t * @param value Threshold value provided in the annotations\n\t * @param iContext InterfaceContext with path to the threshold\n\t * @returns The indicator for Threshold Color\n\t */\n\tgetThresholdColor: function (value: string, iContext: any) {\n\t\tconst path = iContext.context.getPath();\n\t\tif (path.indexOf(\"DeviationRange\") > -1) {\n\t\t\treturn ValueColor.Error;\n\t\t} else if (path.indexOf(\"ToleranceRange\") > -1) {\n\t\t\treturn ValueColor.Critical;\n\t\t}\n\t\treturn ValueColor.Neutral;\n\t},\n\n\t/**\n\t * To fetch measures from DataPoints.\n\t *\n\t * @param chartAnnotations Chart Annotations\n\t * @param entityTypeAnnotations EntityType Annotations\n\t * @param chartType Chart Type used\n\t * @returns Containing all measures.\n\t * @private\n\t */\n\tgetMeasurePropertyPaths: function (chartAnnotations: any, entityTypeAnnotations: any, chartType: string) {\n\t\tconst propertyPath: string[] = [];\n\n\t\tif (!entityTypeAnnotations) {\n\t\t\tLog.warning(\"FE:Macro:MicroChart : Couldn't find annotations for the DataPoint.\");\n\t\t\treturn undefined;\n\t\t}\n\n\t\tfor (const measureIndex in chartAnnotations.Measures) {\n\t\t\tconst iMeasureAttribute = CommonHelper.getMeasureAttributeIndex(measureIndex, chartAnnotations),\n\t\t\t\tmeasureAttribute =\n\t\t\t\t\tiMeasureAttribute > -1 && chartAnnotations.MeasureAttributes && chartAnnotations.MeasureAttributes[iMeasureAttribute],\n\t\t\t\tdataPoint = measureAttribute && entityTypeAnnotations && entityTypeAnnotations[measureAttribute.DataPoint.$AnnotationPath];\n\t\t\tif (dataPoint?.Value?.$Path) {\n\t\t\t\tpropertyPath.push(dataPoint.Value.$Path);\n\t\t\t} else {\n\t\t\t\tLog.warning(\n\t\t\t\t\t`FE:Macro:MicroChart : Couldn't find DataPoint(Value) measure for the measureAttribute ${chartType} MicroChart.`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn propertyPath.join(\",\");\n\t},\n\n\t/**\n\t * This function returns the visible expression path.\n\t *\n\t * @param args\n\t * @returns Expression Binding for the visible.\n\t */\n\tgetHiddenPathExpression: function (...args: any[]) {\n\t\tif (!args[0] && !args[1]) {\n\t\t\treturn true;\n\t\t}\n\t\tif (args[0] === true || args[1] === true) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst hiddenPaths: string[] = [];\n\t\t[].forEach.call(args, function (hiddenProperty: any) {\n\t\t\tif (hiddenProperty && hiddenProperty.$Path) {\n\t\t\t\thiddenPaths.push(\"%{\" + hiddenProperty.$Path + \"}\");\n\t\t\t}\n\t\t});\n\n\t\treturn hiddenPaths.length ? \"{= \" + hiddenPaths.join(\" || \") + \" === true ? false : true }\" : false;\n\t},\n\n\t/**\n\t * This function returns the true/false to display chart.\n\t *\n\t * @param chartType The chart type\n\t * @param value Data point value of Value\n\t * @param maxValue Data point value of MaximumValue\n\t * @param valueHidden Hidden path object/boolean value for the referenced property of value\n\t * @param maxValueHidden Hidden path object/boolean value for the referenced property of MaxValue\n\t * @returns `true` or `false` to hide/show chart\n\t */\n\tisNotAlwaysHidden: function (\n\t\tchartType: string,\n\t\tvalue: object,\n\t\tmaxValue: object | undefined,\n\t\tvalueHidden: boolean | any,\n\t\tmaxValueHidden?: boolean | any\n\t) {\n\t\tif (valueHidden === true) {\n\t\t\tthis.logError(chartType, value);\n\t\t}\n\t\tif (maxValueHidden === true) {\n\t\t\tthis.logError(chartType, maxValue);\n\t\t}\n\t\tif (valueHidden === undefined && maxValueHidden === undefined) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn ((!valueHidden || valueHidden.$Path) && valueHidden !== undefined) ||\n\t\t\t\t((!maxValueHidden || maxValueHidden.$Path) && maxValueHidden !== undefined)\n\t\t\t\t? true\n\t\t\t\t: false;\n\t\t}\n\t},\n\n\t/**\n\t * This function is to log errors for missing data point properties.\n\t *\n\t * @param chartType The chart type.\n\t * @param value Dynamic hidden property name.\n\t */\n\tlogError: function (chartType: string, value: any) {\n\t\tLog.error(`Measure Property ${value.$Path} is hidden for the ${chartType} Micro Chart`);\n\t},\n\n\t/**\n\t * This function returns the formatted value with scale factor for the value displayed.\n\t *\n\t * @param path Property path for the value\n\t * @param property The Property for constraints\n\t * @param fractionDigits No. of fraction digits specified from annotations\n\t * @returns Expression Binding for the value with scale.\n\t */\n\tformatDecimal: function (path: string, property: any, fractionDigits: number) {\n\t\tif (!path) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst constraints = [],\n\t\t\tformatOptions = [\"style: 'short'\"];\n\t\tconst scale = typeof fractionDigits === \"number\" ? fractionDigits : (property && property?.$Scale) || 1;\n\n\t\tif (property.$Nullable != undefined) {\n\t\t\tconstraints.push(\"nullable: \" + property.$Nullable);\n\t\t}\n\t\tif (property.$Precision != undefined) {\n\t\t\tformatOptions.push(\"precision: \" + (property.$Precision ? property.$Precision : \"1\"));\n\t\t}\n\t\tconstraints.push(\"scale: \" + (scale === \"variable\" ? \"'\" + scale + \"'\" : scale));\n\n\t\treturn (\n\t\t\t\"{ path: '\" +\n\t\t\tpath +\n\t\t\t\"'\" +\n\t\t\t\", type: 'sap.ui.model.odata.type.Decimal', constraints: { \" +\n\t\t\tconstraints.join(\",\") +\n\t\t\t\" }, formatOptions: { \" +\n\t\t\tformatOptions.join(\",\") +\n\t\t\t\" } }\"\n\t\t);\n\t},\n\n\t/**\n\t * To fetch select parameters from annotations that need to be added to the list binding.\n\t *\n\t * @param groupId GroupId to be used\n\t * @param uomPath Unit of measure path\n\t * @param criticality Criticality for the chart\n\t * @param criticalityPath Criticality calculation object property path\n\t * @returns String containing all the property paths needed to be added to the $select query of the list binding.\n\t * @private\n\t */\n\tgetSelectParameters: function (groupId: string, uomPath: any, criticality: string, ...criticalityPath: string[]): string {\n\t\tconst propertyPath: string[] = [],\n\t\t\tparameters: string[] = [];\n\n\t\tif (groupId) {\n\t\t\tparameters.push(`$$groupId : '${groupId}'`);\n\t\t}\n\n\t\tif (criticality) {\n\t\t\tpropertyPath.push(criticality);\n\t\t} else if (uomPath) {\n\t\t\tfor (const k in uomPath) {\n\t\t\t\tif (!uomPath[k].$EnumMember && uomPath[k].$Path) {\n\t\t\t\t\tpropertyPath.push(uomPath[k].$Path);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const path of criticalityPath) {\n\t\t\tif (path) {\n\t\t\t\tpropertyPath.push(path);\n\t\t\t}\n\t\t}\n\n\t\tif (propertyPath.length) {\n\t\t\tparameters.push(`$select : '${propertyPath.join(\",\")}'`);\n\t\t}\n\n\t\treturn parameters.join(\",\");\n\t},\n\n\t/**\n\t * To fetch DataPoint Qualifiers of measures.\n\t *\n\t * @param chartAnnotations Chart Annotations\n\t * @param entityTypeAnnotations EntityType Annotations\n\t * @param chartType Chart Type used\n\t * @returns Containing all data point Qualifiers.\n\t * @private\n\t */\n\tgetDataPointQualifiersForMeasures: function (chartAnnotations: Chart, entityTypeAnnotations: any, chartType: string) {\n\t\tconst qualifiers: string[] = [],\n\t\t\tmeasureAttributes = chartAnnotations.MeasureAttributes,\n\t\t\tfnAddDataPointQualifier = function (chartMeasure: any) {\n\t\t\t\tconst measure = chartMeasure.$PropertyPath;\n\t\t\t\tlet qualifier: string | undefined;\n\t\t\t\tif (entityTypeAnnotations) {\n\t\t\t\t\tmeasureAttributes.forEach(function (measureAttribute: any) {\n\t\t\t\t\t\tif (measureAttribute.Measure?.$PropertyPath === measure && measureAttribute.DataPoint?.$AnnotationPath) {\n\t\t\t\t\t\t\tconst annotationPath = measureAttribute.DataPoint.$AnnotationPath;\n\t\t\t\t\t\t\tif (entityTypeAnnotations[annotationPath]) {\n\t\t\t\t\t\t\t\tqualifier = annotationPath.split(\"#\")[1];\n\t\t\t\t\t\t\t\tif (qualifier) {\n\t\t\t\t\t\t\t\t\tqualifiers.push(qualifier);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (qualifier === undefined) {\n\t\t\t\t\tLog.warning(\n\t\t\t\t\t\t`FE:Macro:MicroChart : Couldn't find DataPoint(Value) measure for the measureAttribute for ${chartType} MicroChart.`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\n\t\tif (!entityTypeAnnotations) {\n\t\t\tLog.warning(`FE:Macro:MicroChart : Couldn't find annotations for the DataPoint ${chartType} MicroChart.`);\n\t\t}\n\t\tchartAnnotations.Measures.forEach(fnAddDataPointQualifier);\n\t\treturn qualifiers.join(\",\");\n\t},\n\n\t/**\n\t * This function is to log warnings for missing datapoint properties.\n\t *\n\t * @param chartType The Chart type.\n\t * @param error Object with properties from DataPoint.\n\t */\n\tlogWarning: function (chartType: string, error: any) {\n\t\tfor (const key in error) {\n\t\t\tif (!error[key]) {\n\t\t\t\tLog.warning(`${key} parameter is missing for the ${chartType} Micro Chart`);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * This function is used to get DisplayValue for comparison micro chart data aggregation.\n\t *\n\t * @param dataPoint Data point object.\n\t * @param pathText Object after evaluating @com.sap.vocabularies.Common.v1.Text annotation\n\t * @param valueTextPath Evaluation of @com.sap.vocabularies.Common.v1.Text/$Path/$ value of the annotation\n\t * @param valueDataPointPath DataPoint>Value/$Path/$ value after evaluating annotation\n\t * @returns Expression binding for Display Value for comparison micro chart's aggregation data.\n\t */\n\tgetDisplayValueForMicroChart: function (dataPoint: any, pathText: any, valueTextPath: object, valueDataPointPath: object) {\n\t\tconst valueFormat = dataPoint.ValueFormat && dataPoint.ValueFormat.NumberOfFractionalDigits;\n\t\tif (pathText) {\n\t\t\treturn MicroChartHelper.formatDecimal(pathText[\"$Path\"], valueTextPath, valueFormat);\n\t\t}\n\t\treturn MicroChartHelper.formatDecimal(dataPoint.Value[\"$Path\"], valueDataPointPath, valueFormat);\n\t},\n\n\t/**\n\t * This function is used to check whether micro chart is enabled or not by checking properties, chart annotations, hidden properties.\n\t *\n\t * @param chartType MicroChart Type eg:- Bullet.\n\t * @param dataPoint Data point object.\n\t * @param dataPointValueHidden Object with $Path annotation to get hidden value path\n\t * @param chartAnnotations ChartAnnotation object\n\t * @param dataPointMaxValue Object with $Path annotation to get hidden max value path\n\t * @returns `true` if the chart has all values and properties and also it is not always hidden sFinalDataPointValue && bMicrochartVisible.\n\t */\n\tshouldMicroChartRender: function (\n\t\tchartType: string,\n\t\tdataPoint: DataPointType,\n\t\tdataPointValueHidden: any,\n\t\tchartAnnotations: Chart,\n\t\tdataPointMaxValue: any\n\t) {\n\t\tconst availableChartTypes = [\"Area\", \"Column\", \"Comparison\"],\n\t\t\tdataPointValue = dataPoint && dataPoint.Value,\n\t\t\thiddenPath = dataPointValueHidden && dataPointValueHidden[UIAnnotationTerms.Hidden],\n\t\t\tchartAnnotationDimension = chartAnnotations && chartAnnotations.Dimensions && chartAnnotations.Dimensions[0],\n\t\t\tfinalDataPointValue = availableChartTypes.indexOf(chartType) > -1 ? dataPointValue && chartAnnotationDimension : dataPointValue; // only for three charts in array\n\t\tif (chartType === \"Harvey\") {\n\t\t\tconst dataPointMaximumValue = dataPoint && dataPoint.MaximumValue,\n\t\t\t\tmaxValueHiddenPath = dataPointMaxValue && dataPointMaxValue[UIAnnotationTerms.Hidden];\n\t\t\treturn (\n\t\t\t\tdataPointValue &&\n\t\t\t\tdataPointMaximumValue &&\n\t\t\t\tMicroChartHelper.isNotAlwaysHidden(\"Bullet\", dataPointValue, dataPointMaximumValue, hiddenPath, maxValueHiddenPath)\n\t\t\t);\n\t\t}\n\t\treturn finalDataPointValue && MicroChartHelper.isNotAlwaysHidden(chartType, dataPointValue, undefined, hiddenPath);\n\t},\n\n\t/**\n\t * This function is used to get dataPointQualifiers for Column, Comparison and StackedBar micro charts.\n\t *\n\t * @param annotationPath\n\t * @returns Result string or undefined.\n\t */\n\tgetDataPointQualifiersForMicroChart: function (annotationPath: string) {\n\t\tif (annotationPath.indexOf(UIAnnotationTerms.DataPoint) === -1) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn annotationPath.split(\"#\")[1] ?? \"\";\n\t},\n\n\t/**\n\t * This function is used to get colorPalette for comparison and HarveyBall Microcharts.\n\t *\n\t * @param dataPoint Data point object.\n\t * @returns Result string for colorPalette or undefined.\n\t */\n\tgetColorPaletteForMicroChart: function (dataPoint: DataPointType) {\n\t\treturn dataPoint.Criticality\n\t\t\t? undefined\n\t\t\t: \"sapUiChartPaletteQualitativeHue1, sapUiChartPaletteQualitativeHue2, sapUiChartPaletteQualitativeHue3,          sapUiChartPaletteQualitativeHue4, sapUiChartPaletteQualitativeHue5, sapUiChartPaletteQualitativeHue6, sapUiChartPaletteQualitativeHue7,          sapUiChartPaletteQualitativeHue8, sapUiChartPaletteQualitativeHue9, sapUiChartPaletteQualitativeHue10, sapUiChartPaletteQualitativeHue11\";\n\t},\n\n\t/**\n\t * This function is used to get MeasureScale for Area, Column and Line micro charts.\n\t *\n\t * @param dataPoint Data point object.\n\t * @returns Data point value format fractional digits or data point scale or 1.\n\t */\n\tgetMeasureScaleForMicroChart: function (dataPoint: DataPointType) {\n\t\tif (dataPoint.ValueFormat && dataPoint.ValueFormat.NumberOfFractionalDigits) {\n\t\t\treturn dataPoint.ValueFormat.NumberOfFractionalDigits;\n\t\t}\n\t\tif (dataPoint.Value && dataPoint.Value[\"$Path\"] && dataPoint.Value[\"$Path\"][\"$Scale\"]) {\n\t\t\treturn dataPoint.Value[\"$Path\"][\"$Scale\"];\n\t\t}\n\t\treturn 1;\n\t},\n\n\t/**\n\t * This function is to return the binding expression of microchart.\n\t *\n\t * @param chartType The type of micro chart (Bullet, Radial etc.)\n\t * @param measure Measure value for micro chart.\n\t * @param microChart `this`/current model for micro chart.\n\t * @param collection Collection object.\n\t * @param uiName The @sapui.name in collection model is not accessible here from model hence need to pass it.\n\t * @param dataPoint Data point object used in case of Harvey Ball micro chart\n\t * @returns The binding expression for micro chart.\n\t * @private\n\t */\n\tgetBindingExpressionForMicrochart: function (\n\t\tchartType: string,\n\t\tmeasure: any,\n\t\tmicroChart: MicroChartBlock,\n\t\tcollection: MetaModelNavProperty,\n\t\tuiName: string,\n\t\tdataPoint: any\n\t) {\n\t\tconst condition = collection[\"$isCollection\"] || collection[\"$kind\"] === \"EntitySet\";\n\t\tconst path = condition ? \"\" : uiName;\n\t\tlet currencyOrUnit = MicroChartHelper.getUOMPathForMicrochart(measure);\n\t\tlet dataPointCriticallity = \"\";\n\t\tswitch (chartType) {\n\t\t\tcase \"Radial\":\n\t\t\t\tcurrencyOrUnit = \"\";\n\t\t\t\tbreak;\n\t\t\tcase \"Harvey\":\n\t\t\t\tdataPointCriticallity = dataPoint.Criticality ? dataPoint.Criticality[\"$Path\"] : \"\";\n\t\t\t\tbreak;\n\t\t}\n\t\tconst functionValue = MicroChartHelper.getSelectParameters(microChart.batchGroupId, \"\", dataPointCriticallity, currencyOrUnit);\n\n\t\treturn `{ path: '${path}'` + `, parameters : {${functionValue}} }`;\n\t},\n\n\t/**\n\t * This function is to return the UOMPath expression of the micro chart.\n\t *\n\t * @param showOnlyChart Whether only chart should be rendered or not.\n\t * @param measure Measures for the micro chart.\n\t * @returns UOMPath String for the micro chart.\n\t * @private\n\t */\n\tgetUOMPathForMicrochart: function (showOnlyChart: boolean, measure?: any) {\n\t\tif (measure && !showOnlyChart) {\n\t\t\treturn (\n\t\t\t\t(measure[`@${MeasuresAnnotationTerms.ISOCurrency}`] && measure[`@${MeasuresAnnotationTerms.ISOCurrency}`].$Path) ||\n\t\t\t\t(measure[`@${MeasuresAnnotationTerms.Unit}`] && measure[`@${MeasuresAnnotationTerms.Unit}`].$Path)\n\t\t\t);\n\t\t}\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * This function is to return the aggregation binding expression of micro chart.\n\t *\n\t * @param aggregationType Aggregation type of chart (eg:- Point for AreaMicrochart)\n\t * @param collection Collection object.\n\t * @param dataPoint Data point info for micro chart.\n\t * @param uiName The @sapui.name in collection model is not accessible here from model hence need to pass it.\n\t * @param dimension Micro chart Dimensions.\n\t * @param measure Measure value for micro chart.\n\t * @param measureOrDimensionBar The measure or dimension passed specifically in case of bar chart\n\t * @returns Aggregation binding expression for micro chart.\n\t * @private\n\t */\n\tgetAggregationForMicrochart: function (\n\t\taggregationType: string,\n\t\tcollection: MetaModelNavProperty,\n\t\tdataPoint: any,\n\t\tuiName: string,\n\t\tdimension: any,\n\t\tmeasure: any,\n\t\tmeasureOrDimensionBar: string\n\t) {\n\t\tlet path = collection[\"$kind\"] === \"EntitySet\" ? \"/\" : \"\";\n\t\tpath = path + uiName;\n\t\tconst groupId = \"\";\n\t\tlet dataPointCriticallityCalc = \"\";\n\t\tlet dataPointCriticallity = dataPoint.Criticality ? dataPoint.Criticality[\"$Path\"] : \"\";\n\t\tconst currencyOrUnit = MicroChartHelper.getUOMPathForMicrochart(false, measure);\n\t\tlet targetValuePath = \"\";\n\t\tlet dimensionPropertyPath = \"\";\n\t\tif (dimension && dimension.$PropertyPath && dimension.$PropertyPath[`@${CommonAnnotationTerms.Text}`]) {\n\t\t\tdimensionPropertyPath = dimension.$PropertyPath[`@${CommonAnnotationTerms.Text}`].$Path;\n\t\t} else {\n\t\t\tdimensionPropertyPath = dimension.$PropertyPath;\n\t\t}\n\t\tswitch (aggregationType) {\n\t\t\tcase \"Points\":\n\t\t\t\tdataPointCriticallityCalc = dataPoint && dataPoint.CriticalityCalculation;\n\t\t\t\ttargetValuePath = dataPoint && dataPoint.TargetValue && dataPoint.TargetValue[\"$Path\"];\n\t\t\t\tdataPointCriticallity = \"\";\n\t\t\t\tbreak;\n\t\t\tcase \"Columns\":\n\t\t\t\tdataPointCriticallityCalc = dataPoint && dataPoint.CriticalityCalculation;\n\t\t\t\tbreak;\n\t\t\tcase \"LinePoints\":\n\t\t\t\tdataPointCriticallity = \"\";\n\t\t\t\tbreak;\n\t\t\tcase \"Bars\":\n\t\t\t\tdimensionPropertyPath = \"\";\n\t\t\t\tbreak;\n\t\t}\n\t\tconst functionValue = MicroChartHelper.getSelectParameters(\n\t\t\tgroupId,\n\t\t\tdataPointCriticallityCalc,\n\t\t\tdataPointCriticallity,\n\t\t\tcurrencyOrUnit,\n\t\t\ttargetValuePath,\n\t\t\tdimensionPropertyPath,\n\t\t\tmeasureOrDimensionBar\n\t\t);\n\n\t\treturn `{path:'${path}'` + `, parameters : {${functionValue}} }`;\n\t},\n\n\tgetCurrencyOrUnit: function (measure: any) {\n\t\tif (measure[`@${MeasuresAnnotationTerms.ISOCurrency}`]) {\n\t\t\treturn measure[`@${MeasuresAnnotationTerms.ISOCurrency}`].$Path || measure[`@${MeasuresAnnotationTerms.ISOCurrency}`];\n\t\t}\n\t\tif (measure[`@${MeasuresAnnotationTerms.Unit}`]) {\n\t\t\treturn measure[`@${MeasuresAnnotationTerms.Unit}`].$Path || measure[`@${MeasuresAnnotationTerms.Unit}`];\n\t\t}\n\t\treturn \"\";\n\t},\n\n\tgetCalendarPattern: function (propertyType: string, annotations: Record<string, unknown>) {\n\t\treturn (\n\t\t\t(annotations[`@${CommonAnnotationTerms.IsCalendarYear}`] && \"yyyy\") ||\n\t\t\t(annotations[`@${CommonAnnotationTerms.IsCalendarQuarter}`] && \"Q\") ||\n\t\t\t(annotations[`@${CommonAnnotationTerms.IsCalendarMonth}`] && \"MM\") ||\n\t\t\t(annotations[`@${CommonAnnotationTerms.IsCalendarWeek}`] && \"ww\") ||\n\t\t\t(annotations[`@${CommonAnnotationTerms.IsCalendarDate}`] && \"yyyyMMdd\") ||\n\t\t\t(annotations[`@${CommonAnnotationTerms.IsCalendarYearMonth}`] && \"yyyyMM\") ||\n\t\t\t(propertyType === \"Edm.Date\" && \"yyyy-MM-dd\") ||\n\t\t\tundefined\n\t\t);\n\t},\n\n\tformatDimension: function (date: string, pattern: string, propertyPath: string) {\n\t\tconst value = DateFormat.getDateInstance({ pattern }).parse(date, false, true);\n\t\tif (value instanceof Date) {\n\t\t\treturn value.getTime();\n\t\t} else {\n\t\t\tLog.warning(\"Date value could not be determined for \" + propertyPath);\n\t\t}\n\t\treturn 0;\n\t},\n\n\tformatStringDimension: function (value: any, pattern: string, propertyPath: string) {\n\t\tif (pattern in calendarPatternMap) {\n\t\t\tconst matchedValue = value?.toString().match(calendarPatternMap[pattern]);\n\t\t\tif (matchedValue && matchedValue?.length) {\n\t\t\t\treturn MicroChartHelper.formatDimension(matchedValue[0], pattern, propertyPath);\n\t\t\t}\n\t\t}\n\t\tLog.warning(\"Pattern not supported for \" + propertyPath);\n\t\treturn 0;\n\t},\n\n\tgetX: function (propertyPath: string, propertyType: string, annotations?: Record<string, unknown>) {\n\t\tconst pattern = annotations && MicroChartHelper.getCalendarPattern(propertyType, annotations);\n\t\tif (pattern && [\"Edm.Date\", \"Edm.String\"].some((type) => type === propertyType)) {\n\t\t\treturn `{parts: [{path: '${propertyPath}', targetType: 'any'}, {value: '${pattern}'}, {value: '${propertyPath}'}], formatter: 'MICROCHARTR.formatStringDimension'}`;\n\t\t}\n\t}\n};\n\nexport default MicroChartHelper;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAWA,MAAMA,UAAU,GAAGC,aAAa,CAACD,UAAU;EAE3C,MAAME,kBAA6C,GAAG;IACrDC,IAAI,EAAE,0BAA0B;IAChCC,CAAC,EAAE,OAAO;IACVC,EAAE,EAAE,eAAe;IACnBC,EAAE,EAAE,0BAA0B;IAC9BC,QAAQ,EAAE,mEAAmE;IAC7EC,MAAM,EAAE,2CAA2C;IACnD,YAAY,EAAE;EACf,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;EACA,MAAMC,gBAAgB,GAAG;IACxB;AACD;AACA;AACA;AACA;AACA;AACA;IACCC,iBAAiB,EAAE,UAAUC,KAAa,EAAEC,QAAa,EAAE;MAC1D,MAAMC,IAAI,GAAGD,QAAQ,CAACE,OAAO,CAACC,OAAO,EAAE;MACvC,IAAIF,IAAI,CAACG,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,EAAE;QACxC,OAAOhB,UAAU,CAACiB,KAAK;MACxB,CAAC,MAAM,IAAIJ,IAAI,CAACG,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,EAAE;QAC/C,OAAOhB,UAAU,CAACkB,QAAQ;MAC3B;MACA,OAAOlB,UAAU,CAACmB,OAAO;IAC1B,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCC,uBAAuB,EAAE,UAAUC,gBAAqB,EAAEC,qBAA0B,EAAEC,SAAiB,EAAE;MACxG,MAAMC,YAAsB,GAAG,EAAE;MAEjC,IAAI,CAACF,qBAAqB,EAAE;QAC3BG,GAAG,CAACC,OAAO,CAAC,oEAAoE,CAAC;QACjF,OAAOC,SAAS;MACjB;MAEA,KAAK,MAAMC,YAAY,IAAIP,gBAAgB,CAACQ,QAAQ,EAAE;QAAA;QACrD,MAAMC,iBAAiB,GAAGC,YAAY,CAACC,wBAAwB,CAACJ,YAAY,EAAEP,gBAAgB,CAAC;UAC9FY,gBAAgB,GACfH,iBAAiB,GAAG,CAAC,CAAC,IAAIT,gBAAgB,CAACa,iBAAiB,IAAIb,gBAAgB,CAACa,iBAAiB,CAACJ,iBAAiB,CAAC;UACtHK,SAAS,GAAGF,gBAAgB,IAAIX,qBAAqB,IAAIA,qBAAqB,CAACW,gBAAgB,CAACG,SAAS,CAACC,eAAe,CAAC;QAC3H,IAAIF,SAAS,aAATA,SAAS,mCAATA,SAAS,CAAEG,KAAK,6CAAhB,iBAAkBC,KAAK,EAAE;UAC5Bf,YAAY,CAACgB,IAAI,CAACL,SAAS,CAACG,KAAK,CAACC,KAAK,CAAC;QACzC,CAAC,MAAM;UACNd,GAAG,CAACC,OAAO,CACT,yFAAwFH,SAAU,cAAa,CAChH;QACF;MACD;MAEA,OAAOC,YAAY,CAACiB,IAAI,CAAC,GAAG,CAAC;IAC9B,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;IACCC,uBAAuB,EAAE,YAA0B;MAAA,kCAAbC,IAAI;QAAJA,IAAI;MAAA;MACzC,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC,EAAE;QACzB,OAAO,IAAI;MACZ;MACA,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;QACzC,OAAO,KAAK;MACb;MAEA,MAAMC,WAAqB,GAAG,EAAE;MAChC,EAAE,CAACC,OAAO,CAACC,IAAI,CAACH,IAAI,EAAE,UAAUI,cAAmB,EAAE;QACpD,IAAIA,cAAc,IAAIA,cAAc,CAACR,KAAK,EAAE;UAC3CK,WAAW,CAACJ,IAAI,CAAC,IAAI,GAAGO,cAAc,CAACR,KAAK,GAAG,GAAG,CAAC;QACpD;MACD,CAAC,CAAC;MAEF,OAAOK,WAAW,CAACI,MAAM,GAAG,KAAK,GAAGJ,WAAW,CAACH,IAAI,CAAC,MAAM,CAAC,GAAG,4BAA4B,GAAG,KAAK;IACpG,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCQ,iBAAiB,EAAE,UAClB1B,SAAiB,EACjBZ,KAAa,EACbuC,QAA4B,EAC5BC,WAA0B,EAC1BC,cAA8B,EAC7B;MACD,IAAID,WAAW,KAAK,IAAI,EAAE;QACzB,IAAI,CAACE,QAAQ,CAAC9B,SAAS,EAAEZ,KAAK,CAAC;MAChC;MACA,IAAIyC,cAAc,KAAK,IAAI,EAAE;QAC5B,IAAI,CAACC,QAAQ,CAAC9B,SAAS,EAAE2B,QAAQ,CAAC;MACnC;MACA,IAAIC,WAAW,KAAKxB,SAAS,IAAIyB,cAAc,KAAKzB,SAAS,EAAE;QAC9D,OAAO,IAAI;MACZ,CAAC,MAAM;QACN,OAAQ,CAAC,CAACwB,WAAW,IAAIA,WAAW,CAACZ,KAAK,KAAKY,WAAW,KAAKxB,SAAS,IACtE,CAAC,CAACyB,cAAc,IAAIA,cAAc,CAACb,KAAK,KAAKa,cAAc,KAAKzB,SAAU,GACzE,IAAI,GACJ,KAAK;MACT;IACD,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;IACC0B,QAAQ,EAAE,UAAU9B,SAAiB,EAAEZ,KAAU,EAAE;MAClDc,GAAG,CAAC6B,KAAK,CAAE,oBAAmB3C,KAAK,CAAC4B,KAAM,sBAAqBhB,SAAU,cAAa,CAAC;IACxF,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACCgC,aAAa,EAAE,UAAU1C,IAAY,EAAE2C,QAAa,EAAEC,cAAsB,EAAE;MAC7E,IAAI,CAAC5C,IAAI,EAAE;QACV,OAAOc,SAAS;MACjB;MACA,MAAM+B,WAAW,GAAG,EAAE;QACrBC,aAAa,GAAG,CAAC,gBAAgB,CAAC;MACnC,MAAMC,KAAK,GAAG,OAAOH,cAAc,KAAK,QAAQ,GAAGA,cAAc,GAAID,QAAQ,KAAIA,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEK,MAAM,KAAK,CAAC;MAEvG,IAAIL,QAAQ,CAACM,SAAS,IAAInC,SAAS,EAAE;QACpC+B,WAAW,CAAClB,IAAI,CAAC,YAAY,GAAGgB,QAAQ,CAACM,SAAS,CAAC;MACpD;MACA,IAAIN,QAAQ,CAACO,UAAU,IAAIpC,SAAS,EAAE;QACrCgC,aAAa,CAACnB,IAAI,CAAC,aAAa,IAAIgB,QAAQ,CAACO,UAAU,GAAGP,QAAQ,CAACO,UAAU,GAAG,GAAG,CAAC,CAAC;MACtF;MACAL,WAAW,CAAClB,IAAI,CAAC,SAAS,IAAIoB,KAAK,KAAK,UAAU,GAAG,GAAG,GAAGA,KAAK,GAAG,GAAG,GAAGA,KAAK,CAAC,CAAC;MAEhF,OACC,WAAW,GACX/C,IAAI,GACJ,GAAG,GACH,4DAA4D,GAC5D6C,WAAW,CAACjB,IAAI,CAAC,GAAG,CAAC,GACrB,uBAAuB,GACvBkB,aAAa,CAAClB,IAAI,CAAC,GAAG,CAAC,GACvB,MAAM;IAER,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCuB,mBAAmB,EAAE,UAAUC,OAAe,EAAEC,OAAY,EAAEC,WAAmB,EAAwC;MACxH,MAAM3C,YAAsB,GAAG,EAAE;QAChC4C,UAAoB,GAAG,EAAE;MAE1B,IAAIH,OAAO,EAAE;QACZG,UAAU,CAAC5B,IAAI,CAAE,gBAAeyB,OAAQ,GAAE,CAAC;MAC5C;MAEA,IAAIE,WAAW,EAAE;QAChB3C,YAAY,CAACgB,IAAI,CAAC2B,WAAW,CAAC;MAC/B,CAAC,MAAM,IAAID,OAAO,EAAE;QACnB,KAAK,MAAMG,CAAC,IAAIH,OAAO,EAAE;UACxB,IAAI,CAACA,OAAO,CAACG,CAAC,CAAC,CAACC,WAAW,IAAIJ,OAAO,CAACG,CAAC,CAAC,CAAC9B,KAAK,EAAE;YAChDf,YAAY,CAACgB,IAAI,CAAC0B,OAAO,CAACG,CAAC,CAAC,CAAC9B,KAAK,CAAC;UACpC;QACD;MACD;MAAC,mCAhBoFgC,eAAe;QAAfA,eAAe;MAAA;MAkBpG,KAAK,MAAM1D,IAAI,IAAI0D,eAAe,EAAE;QACnC,IAAI1D,IAAI,EAAE;UACTW,YAAY,CAACgB,IAAI,CAAC3B,IAAI,CAAC;QACxB;MACD;MAEA,IAAIW,YAAY,CAACwB,MAAM,EAAE;QACxBoB,UAAU,CAAC5B,IAAI,CAAE,cAAahB,YAAY,CAACiB,IAAI,CAAC,GAAG,CAAE,GAAE,CAAC;MACzD;MAEA,OAAO2B,UAAU,CAAC3B,IAAI,CAAC,GAAG,CAAC;IAC5B,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACC+B,iCAAiC,EAAE,UAAUnD,gBAAuB,EAAEC,qBAA0B,EAAEC,SAAiB,EAAE;MACpH,MAAMkD,UAAoB,GAAG,EAAE;QAC9BC,iBAAiB,GAAGrD,gBAAgB,CAACa,iBAAiB;QACtDyC,uBAAuB,GAAG,UAAUC,YAAiB,EAAE;UACtD,MAAMC,OAAO,GAAGD,YAAY,CAACE,aAAa;UAC1C,IAAIC,SAA6B;UACjC,IAAIzD,qBAAqB,EAAE;YAC1BoD,iBAAiB,CAAC7B,OAAO,CAAC,UAAUZ,gBAAqB,EAAE;cAAA;cAC1D,IAAI,0BAAAA,gBAAgB,CAAC+C,OAAO,0DAAxB,sBAA0BF,aAAa,MAAKD,OAAO,6BAAI5C,gBAAgB,CAACG,SAAS,kDAA1B,sBAA4BC,eAAe,EAAE;gBACvG,MAAM4C,cAAc,GAAGhD,gBAAgB,CAACG,SAAS,CAACC,eAAe;gBACjE,IAAIf,qBAAqB,CAAC2D,cAAc,CAAC,EAAE;kBAC1CF,SAAS,GAAGE,cAAc,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;kBACxC,IAAIH,SAAS,EAAE;oBACdN,UAAU,CAACjC,IAAI,CAACuC,SAAS,CAAC;kBAC3B;gBACD;cACD;YACD,CAAC,CAAC;UACH;UACA,IAAIA,SAAS,KAAKpD,SAAS,EAAE;YAC5BF,GAAG,CAACC,OAAO,CACT,6FAA4FH,SAAU,cAAa,CACpH;UACF;QACD,CAAC;MAEF,IAAI,CAACD,qBAAqB,EAAE;QAC3BG,GAAG,CAACC,OAAO,CAAE,qEAAoEH,SAAU,cAAa,CAAC;MAC1G;MACAF,gBAAgB,CAACQ,QAAQ,CAACgB,OAAO,CAAC8B,uBAAuB,CAAC;MAC1D,OAAOF,UAAU,CAAChC,IAAI,CAAC,GAAG,CAAC;IAC5B,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;IACC0C,UAAU,EAAE,UAAU5D,SAAiB,EAAE+B,KAAU,EAAE;MACpD,KAAK,MAAM8B,GAAG,IAAI9B,KAAK,EAAE;QACxB,IAAI,CAACA,KAAK,CAAC8B,GAAG,CAAC,EAAE;UAChB3D,GAAG,CAACC,OAAO,CAAE,GAAE0D,GAAI,iCAAgC7D,SAAU,cAAa,CAAC;QAC5E;MACD;IACD,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACC8D,4BAA4B,EAAE,UAAUlD,SAAc,EAAEmD,QAAa,EAAEC,aAAqB,EAAEC,kBAA0B,EAAE;MACzH,MAAMC,WAAW,GAAGtD,SAAS,CAACuD,WAAW,IAAIvD,SAAS,CAACuD,WAAW,CAACC,wBAAwB;MAC3F,IAAIL,QAAQ,EAAE;QACb,OAAO7E,gBAAgB,CAAC8C,aAAa,CAAC+B,QAAQ,CAAC,OAAO,CAAC,EAAEC,aAAa,EAAEE,WAAW,CAAC;MACrF;MACA,OAAOhF,gBAAgB,CAAC8C,aAAa,CAACpB,SAAS,CAACG,KAAK,CAAC,OAAO,CAAC,EAAEkD,kBAAkB,EAAEC,WAAW,CAAC;IACjG,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCG,sBAAsB,EAAE,UACvBrE,SAAiB,EACjBY,SAAwB,EACxB0D,oBAAyB,EACzBxE,gBAAuB,EACvByE,iBAAsB,EACrB;MACD,MAAMC,mBAAmB,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAE,YAAY,CAAC;QAC3DC,cAAc,GAAG7D,SAAS,IAAIA,SAAS,CAACG,KAAK;QAC7C2D,UAAU,GAAGJ,oBAAoB,IAAIA,oBAAoB,qCAA0B;QACnFK,wBAAwB,GAAG7E,gBAAgB,IAAIA,gBAAgB,CAAC8E,UAAU,IAAI9E,gBAAgB,CAAC8E,UAAU,CAAC,CAAC,CAAC;QAC5GC,mBAAmB,GAAGL,mBAAmB,CAAC/E,OAAO,CAACO,SAAS,CAAC,GAAG,CAAC,CAAC,GAAGyE,cAAc,IAAIE,wBAAwB,GAAGF,cAAc,CAAC,CAAC;MAClI,IAAIzE,SAAS,KAAK,QAAQ,EAAE;QAC3B,MAAM8E,qBAAqB,GAAGlE,SAAS,IAAIA,SAAS,CAACmE,YAAY;UAChEC,kBAAkB,GAAGT,iBAAiB,IAAIA,iBAAiB,qCAA0B;QACtF,OACCE,cAAc,IACdK,qBAAqB,IACrB5F,gBAAgB,CAACwC,iBAAiB,CAAC,QAAQ,EAAE+C,cAAc,EAAEK,qBAAqB,EAAEJ,UAAU,EAAEM,kBAAkB,CAAC;MAErH;MACA,OAAOH,mBAAmB,IAAI3F,gBAAgB,CAACwC,iBAAiB,CAAC1B,SAAS,EAAEyE,cAAc,EAAErE,SAAS,EAAEsE,UAAU,CAAC;IACnH,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;IACCO,mCAAmC,EAAE,UAAUvB,cAAsB,EAAE;MACtE,IAAIA,cAAc,CAACjE,OAAO,wCAA6B,KAAK,CAAC,CAAC,EAAE;QAC/D,OAAOW,SAAS;MACjB;MACA,OAAOsD,cAAc,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;IAC1C,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;IACCuB,4BAA4B,EAAE,UAAUtE,SAAwB,EAAE;MACjE,OAAOA,SAAS,CAACuE,WAAW,GACzB/E,SAAS,GACT,0YAA0Y;IAC9Y,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;IACCgF,4BAA4B,EAAE,UAAUxE,SAAwB,EAAE;MACjE,IAAIA,SAAS,CAACuD,WAAW,IAAIvD,SAAS,CAACuD,WAAW,CAACC,wBAAwB,EAAE;QAC5E,OAAOxD,SAAS,CAACuD,WAAW,CAACC,wBAAwB;MACtD;MACA,IAAIxD,SAAS,CAACG,KAAK,IAAIH,SAAS,CAACG,KAAK,CAAC,OAAO,CAAC,IAAIH,SAAS,CAACG,KAAK,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,EAAE;QACtF,OAAOH,SAAS,CAACG,KAAK,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC;MAC1C;MACA,OAAO,CAAC;IACT,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACCsE,iCAAiC,EAAE,UAClCrF,SAAiB,EACjBsD,OAAY,EACZgC,UAA2B,EAC3BC,UAAgC,EAChCC,MAAc,EACd5E,SAAc,EACb;MACD,MAAM6E,SAAS,GAAGF,UAAU,CAAC,eAAe,CAAC,IAAIA,UAAU,CAAC,OAAO,CAAC,KAAK,WAAW;MACpF,MAAMjG,IAAI,GAAGmG,SAAS,GAAG,EAAE,GAAGD,MAAM;MACpC,IAAIE,cAAc,GAAGxG,gBAAgB,CAACyG,uBAAuB,CAACrC,OAAO,CAAC;MACtE,IAAIsC,qBAAqB,GAAG,EAAE;MAC9B,QAAQ5F,SAAS;QAChB,KAAK,QAAQ;UACZ0F,cAAc,GAAG,EAAE;UACnB;QACD,KAAK,QAAQ;UACZE,qBAAqB,GAAGhF,SAAS,CAACuE,WAAW,GAAGvE,SAAS,CAACuE,WAAW,CAAC,OAAO,CAAC,GAAG,EAAE;UACnF;MAAM;MAER,MAAMU,aAAa,GAAG3G,gBAAgB,CAACuD,mBAAmB,CAAC6C,UAAU,CAACQ,YAAY,EAAE,EAAE,EAAEF,qBAAqB,EAAEF,cAAc,CAAC;MAE9H,OAAQ,YAAWpG,IAAK,GAAE,GAAI,mBAAkBuG,aAAc,KAAI;IACnE,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACCF,uBAAuB,EAAE,UAAUI,aAAsB,EAAEzC,OAAa,EAAE;MACzE,IAAIA,OAAO,IAAI,CAACyC,aAAa,EAAE;QAC9B,OACEzC,OAAO,CAAE,IAAC,mCAAsC,EAAC,CAAC,IAAIA,OAAO,CAAE,IAAC,mCAAsC,EAAC,CAAC,CAACtC,KAAK,IAC9GsC,OAAO,CAAE,IAAC,4BAA+B,EAAC,CAAC,IAAIA,OAAO,CAAE,IAAC,4BAA+B,EAAC,CAAC,CAACtC,KAAM;MAEpG;MACA,OAAOZ,SAAS;IACjB,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACC4F,2BAA2B,EAAE,UAC5BC,eAAuB,EACvBV,UAAgC,EAChC3E,SAAc,EACd4E,MAAc,EACdU,SAAc,EACd5C,OAAY,EACZ6C,qBAA6B,EAC5B;MACD,IAAI7G,IAAI,GAAGiG,UAAU,CAAC,OAAO,CAAC,KAAK,WAAW,GAAG,GAAG,GAAG,EAAE;MACzDjG,IAAI,GAAGA,IAAI,GAAGkG,MAAM;MACpB,MAAM9C,OAAO,GAAG,EAAE;MAClB,IAAI0D,yBAAyB,GAAG,EAAE;MAClC,IAAIR,qBAAqB,GAAGhF,SAAS,CAACuE,WAAW,GAAGvE,SAAS,CAACuE,WAAW,CAAC,OAAO,CAAC,GAAG,EAAE;MACvF,MAAMO,cAAc,GAAGxG,gBAAgB,CAACyG,uBAAuB,CAAC,KAAK,EAAErC,OAAO,CAAC;MAC/E,IAAI+C,eAAe,GAAG,EAAE;MACxB,IAAIC,qBAAqB,GAAG,EAAE;MAC9B,IAAIJ,SAAS,IAAIA,SAAS,CAAC3C,aAAa,IAAI2C,SAAS,CAAC3C,aAAa,CAAE,IAAC,qCAA6B,EAAC,CAAC,EAAE;QACtG+C,qBAAqB,GAAGJ,SAAS,CAAC3C,aAAa,CAAE,IAAC,qCAA6B,EAAC,CAAC,CAACvC,KAAK;MACxF,CAAC,MAAM;QACNsF,qBAAqB,GAAGJ,SAAS,CAAC3C,aAAa;MAChD;MACA,QAAQ0C,eAAe;QACtB,KAAK,QAAQ;UACZG,yBAAyB,GAAGxF,SAAS,IAAIA,SAAS,CAAC2F,sBAAsB;UACzEF,eAAe,GAAGzF,SAAS,IAAIA,SAAS,CAAC4F,WAAW,IAAI5F,SAAS,CAAC4F,WAAW,CAAC,OAAO,CAAC;UACtFZ,qBAAqB,GAAG,EAAE;UAC1B;QACD,KAAK,SAAS;UACbQ,yBAAyB,GAAGxF,SAAS,IAAIA,SAAS,CAAC2F,sBAAsB;UACzE;QACD,KAAK,YAAY;UAChBX,qBAAqB,GAAG,EAAE;UAC1B;QACD,KAAK,MAAM;UACVU,qBAAqB,GAAG,EAAE;UAC1B;MAAM;MAER,MAAMT,aAAa,GAAG3G,gBAAgB,CAACuD,mBAAmB,CACzDC,OAAO,EACP0D,yBAAyB,EACzBR,qBAAqB,EACrBF,cAAc,EACdW,eAAe,EACfC,qBAAqB,EACrBH,qBAAqB,CACrB;MAED,OAAQ,UAAS7G,IAAK,GAAE,GAAI,mBAAkBuG,aAAc,KAAI;IACjE,CAAC;IAEDY,iBAAiB,EAAE,UAAUnD,OAAY,EAAE;MAC1C,IAAIA,OAAO,CAAE,IAAC,mCAAsC,EAAC,CAAC,EAAE;QACvD,OAAOA,OAAO,CAAE,IAAC,mCAAsC,EAAC,CAAC,CAACtC,KAAK,IAAIsC,OAAO,CAAE,IAAC,mCAAsC,EAAC,CAAC;MACtH;MACA,IAAIA,OAAO,CAAE,IAAC,4BAA+B,EAAC,CAAC,EAAE;QAChD,OAAOA,OAAO,CAAE,IAAC,4BAA+B,EAAC,CAAC,CAACtC,KAAK,IAAIsC,OAAO,CAAE,IAAC,4BAA+B,EAAC,CAAC;MACxG;MACA,OAAO,EAAE;IACV,CAAC;IAEDoD,kBAAkB,EAAE,UAAUC,YAAoB,EAAEC,WAAoC,EAAE;MACzF,OACEA,WAAW,CAAE,IAAC,+CAAuC,EAAC,CAAC,IAAI,MAAM,IACjEA,WAAW,CAAE,IAAC,kDAA0C,EAAC,CAAC,IAAI,GAAI,IAClEA,WAAW,CAAE,IAAC,gDAAwC,EAAC,CAAC,IAAI,IAAK,IACjEA,WAAW,CAAE,IAAC,+CAAuC,EAAC,CAAC,IAAI,IAAK,IAChEA,WAAW,CAAE,IAAC,+CAAuC,EAAC,CAAC,IAAI,UAAW,IACtEA,WAAW,CAAE,IAAC,oDAA4C,EAAC,CAAC,IAAI,QAAS,IACzED,YAAY,KAAK,UAAU,IAAI,YAAa,IAC7CvG,SAAS;IAEX,CAAC;IAEDyG,eAAe,EAAE,UAAUC,IAAY,EAAEC,OAAe,EAAE9G,YAAoB,EAAE;MAC/E,MAAMb,KAAK,GAAG4H,UAAU,CAACC,eAAe,CAAC;QAAEF;MAAQ,CAAC,CAAC,CAACG,KAAK,CAACJ,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC;MAC9E,IAAI1H,KAAK,YAAY+H,IAAI,EAAE;QAC1B,OAAO/H,KAAK,CAACgI,OAAO,EAAE;MACvB,CAAC,MAAM;QACNlH,GAAG,CAACC,OAAO,CAAC,yCAAyC,GAAGF,YAAY,CAAC;MACtE;MACA,OAAO,CAAC;IACT,CAAC;IAEDoH,qBAAqB,EAAE,UAAUjI,KAAU,EAAE2H,OAAe,EAAE9G,YAAoB,EAAE;MACnF,IAAI8G,OAAO,IAAIpI,kBAAkB,EAAE;QAClC,MAAM2I,YAAY,GAAGlI,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEmI,QAAQ,EAAE,CAACC,KAAK,CAAC7I,kBAAkB,CAACoI,OAAO,CAAC,CAAC;QACzE,IAAIO,YAAY,IAAIA,YAAY,aAAZA,YAAY,eAAZA,YAAY,CAAE7F,MAAM,EAAE;UACzC,OAAOvC,gBAAgB,CAAC2H,eAAe,CAACS,YAAY,CAAC,CAAC,CAAC,EAAEP,OAAO,EAAE9G,YAAY,CAAC;QAChF;MACD;MACAC,GAAG,CAACC,OAAO,CAAC,4BAA4B,GAAGF,YAAY,CAAC;MACxD,OAAO,CAAC;IACT,CAAC;IAEDwH,IAAI,EAAE,UAAUxH,YAAoB,EAAE0G,YAAoB,EAAEC,WAAqC,EAAE;MAClG,MAAMG,OAAO,GAAGH,WAAW,IAAI1H,gBAAgB,CAACwH,kBAAkB,CAACC,YAAY,EAAEC,WAAW,CAAC;MAC7F,IAAIG,OAAO,IAAI,CAAC,UAAU,EAAE,YAAY,CAAC,CAACW,IAAI,CAAEC,IAAI,IAAKA,IAAI,KAAKhB,YAAY,CAAC,EAAE;QAChF,OAAQ,oBAAmB1G,YAAa,mCAAkC8G,OAAQ,gBAAe9G,YAAa,sDAAqD;MACpK;IACD;EACD,CAAC;EAAC,OAEaf,gBAAgB;AAAA"}},{"offset":{"line":24303,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonHelper","mobilelibrary","DateFormat","ValueColor","calendarPatternMap","yyyy","Q","MM","ww","yyyyMMdd","yyyyMM","MicroChartHelper","getThresholdColor","value","iContext","path","context","getPath","indexOf","Error","Critical","Neutral","getMeasurePropertyPaths","chartAnnotations","entityTypeAnnotations","chartType","propertyPath","warning","undefined","measureIndex","Measures","_dataPoint$Value","iMeasureAttribute","getMeasureAttributeIndex","measureAttribute","MeasureAttributes","dataPoint","DataPoint","$AnnotationPath","Value","$Path","push","join","getHiddenPathExpression","_len","arguments","length","args","Array","_key","hiddenPaths","forEach","call","hiddenProperty","isNotAlwaysHidden","maxValue","valueHidden","maxValueHidden","this","logError","error","formatDecimal","property","fractionDigits","constraints","formatOptions","scale","$Scale","$Nullable","$Precision","getSelectParameters","groupId","uomPath","criticality","parameters","k","$EnumMember","_len2","criticalityPath","_key2","getDataPointQualifiersForMeasures","qualifiers","measureAttributes","fnAddDataPointQualifier","chartMeasure","measure","$PropertyPath","qualifier","_measureAttribute$Mea","_measureAttribute$Dat","Measure","annotationPath","split","logWarning","key","getDisplayValueForMicroChart","pathText","valueTextPath","valueDataPointPath","valueFormat","ValueFormat","NumberOfFractionalDigits","shouldMicroChartRender","dataPointValueHidden","dataPointMaxValue","availableChartTypes","dataPointValue","hiddenPath","chartAnnotationDimension","Dimensions","finalDataPointValue","dataPointMaximumValue","MaximumValue","maxValueHiddenPath","getDataPointQualifiersForMicroChart","getColorPaletteForMicroChart","Criticality","getMeasureScaleForMicroChart","getBindingExpressionForMicrochart","microChart","collection","uiName","condition","currencyOrUnit","getUOMPathForMicrochart","dataPointCriticallity","functionValue","batchGroupId","showOnlyChart","getAggregationForMicrochart","aggregationType","dimension","measureOrDimensionBar","dataPointCriticallityCalc","targetValuePath","dimensionPropertyPath","CriticalityCalculation","TargetValue","getCurrencyOrUnit","getCalendarPattern","propertyType","annotations","formatDimension","date","pattern","getDateInstance","parse","Date","getTime","formatStringDimension","matchedValue","toString","match","getX","some","type"],"sources":["MicroChartHelper-dbg.js"],"mappings":"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","sourceRoot":"microchart"}},{"offset":{"line":24308,"column":0},"map":{"version":3,"names":["MultiValueFieldBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","expectedTypes","validate","formatOptionsInput","displayMode","includes","Error","_getMultiInputSettings","propertyDataModelObjectPath","formatOptions","collectionPath","itemDataModelObjectPath","_getPathStructure","collectionBindingDisplay","collectionBindingEdit","propertyPathOrProperty","targetObject","propertyDefinition","isPropertyPathExpression","$target","commonText","annotations","Common","Text","relativeLocation","getRelativePaths","textExpression","compileExpression","getExpressionFromAnnotation","getValueBinding","text","key","dataModelObjectPath","firstCollectionPath","currentEntitySet","contextLocation","targetEntitySet","startingEntitySet","navigatedPaths","contextNavsForItem","navigationProperties","navProp","undefined","some","contextNavProp","fullyQualifiedName","push","navigationPropertyBinding","hasOwnProperty","isMultipleNavigationProperty","join","Object","assign","computeFieldGroupIds","appComponent","sideEffectService","getSideEffectsService","fieldGroupIds","targetEntityType","result","props","controlConfiguration","settings","dataModelPath","MetaModelConverter","getInvolvedDataModelObjects","metaPath","contextPath","dataFieldConverted","convertMetaModelContext","extraPath","isPathAnnotationExpression","Value","path","visible","getVisibleExpression","length","enhanceDataModelPath","insertable","isPathInsertable","deleteNavigationRestriction","isPathDeletable","ignoreTargetCollection","authorizeUnresolvable","deletePath","deletable","ifElse","_type","or","not","isConstant","editMode","displayOnly","and","UI","IsEditable","constant","getDisplayMode","multiInputSettings","collection","getTemplate","internalDataModelPath","internalDataFieldConverted","enhancedDataModelPath","id","idPrefix","ID","generate","valueHelpProperty","FieldHelper","valueHelpPropertyContext","getModel","createBindingContext","fieldHelp","ValueHelpTemplating","generateID","vhIdPrefix","PropertyFormatters","getRelativePropertyPath","context","getContextRelativeTargetObjectPath","label","computeLabelText","change","validateFieldGroup","xml","ariaLabelledBy","showEmptyIndicator","BuildingBlockBase"],"sourceRoot":"multiValueField","sources":["MultiValueField.block.ts"],"sourcesContent":["import type { Property, PropertyAnnotationValue } from \"@sap-ux/vocabularies-types\";\nimport type { PathAnnotationExpression, PropertyPath } from \"@sap-ux/vocabularies-types/Edm\";\nimport type { DataField } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport {\n\tand,\n\tcompileExpression,\n\tconstant,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tisConstant,\n\tnot,\n\tor\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport * as ID from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isMultipleNavigationProperty, isPathAnnotationExpression, isPropertyPathExpression } from \"sap/fe/core/helpers/TypeGuards\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport {\n\tenhanceDataModelPath,\n\tgetContextRelativeTargetObjectPath,\n\tgetRelativePaths,\n\tisPathDeletable,\n\tisPathInsertable\n} from \"sap/fe/core/templating/DataModelPathHelper\";\nimport * as PropertyFormatters from \"sap/fe/core/templating/PropertyFormatters\";\nimport type { DisplayMode, MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\nimport { getDisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { getValueBinding, getVisibleExpression } from \"sap/fe/macros/field/FieldTemplating\";\nimport * as ValueHelpTemplating from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\nimport type EditMode from \"sap/ui/mdc/enum/EditMode\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\ntype MultiInputSettings = {\n\ttext: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\tcollectionBindingDisplay: CompiledBindingToolkitExpression;\n\tcollectionBindingEdit: CompiledBindingToolkitExpression;\n\tkey: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n};\n\ntype MultiValueFieldFormatOptions = Partial<{\n\tshowEmptyIndicator?: boolean;\n\tdisplayOnly?: boolean | string;\n\tdisplayMode?: string;\n\tmeasureDisplayMode?: string;\n\tisAnalytics?: boolean;\n}>;\n\ntype MultiValueFieldPathStructure = {\n\tcollectionPath: string;\n\titemDataModelObjectPath: DataModelObjectPath;\n};\n\n/**\n * Building block for creating a MultiValueField based on the metadata provided by OData V4.\n * <br>\n * Usually, a DataField annotation is expected\n *\n * Usage example:\n * <pre>\n * <internalMacro:MultiValueField\n *   idPrefix=\"SomePrefix\"\n *   contextPath=\"{entitySet>}\"\n *   metaPath=\"{dataField>}\"\n * />\n * </pre>\n *\n * @hideconstructor\n * @private\n * @experimental\n * @since 1.94.0\n */\n@defineBuildingBlock({\n\tname: \"MultiValueField\",\n\tnamespace: \"sap.fe.macros.internal\"\n})\nexport default class MultiValueFieldBlock extends BuildingBlockBase {\n\t/**\n\t * Prefix added to the generated ID of the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic idPrefix?: string;\n\n\t/**\n\t * Prefix added to the generated ID of the value help used for the field\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic vhIdPrefix = \"FieldValueHelp\";\n\n\t/**\n\t * Metadata path to the MultiValueField.\n\t * This property is usually a metadataContext pointing to a DataField having a Value that uses a 1:n navigation\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\texpectedTypes: [\"com.sap.vocabularies.UI.v1.DataField\"]\n\t})\n\tpublic metaPath!: Context;\n\n\t/**\n\t * Mandatory context to the MultiValueField\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tpublic contextPath!: Context;\n\n\t/**\n\t * Property added to associate the label with the MultiValueField\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic ariaLabelledBy?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tprivate key?: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\n\tprivate text?: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\n\t/**\n\t * Edit Mode of the field.\n\t * If the editMode is undefined then we compute it based on the metadata\n\t * Otherwise we use the value provided here.\n\t */\n\tprivate editMode!: EditMode | CompiledBindingToolkitExpression;\n\n\t/**\n\t * The display mode added to the collection field\n\t */\n\tprivate displayMode!: DisplayMode;\n\n\t/**\n\t * The CompiledBindingToolkitExpression that is calculated internally\n\t */\n\tprivate collection!: CompiledBindingToolkitExpression;\n\n\t/**\n\t * The format options\n\t */\n\t@blockAttribute({\n\t\ttype: \"object\",\n\t\tvalidate: function (formatOptionsInput: MultiValueFieldFormatOptions) {\n\t\t\tif (\n\t\t\t\tformatOptionsInput.displayMode &&\n\t\t\t\t![\"Value\", \"Description\", \"ValueDescription\", \"DescriptionValue\"].includes(formatOptionsInput.displayMode)\n\t\t\t) {\n\t\t\t\tthrow new Error(`Allowed value ${formatOptionsInput.displayMode} for displayMode does not match`);\n\t\t\t}\n\t\t\treturn formatOptionsInput;\n\t\t}\n\t})\n\tpublic formatOptions: MultiValueFieldFormatOptions = {};\n\n\tprivate visible: CompiledBindingToolkitExpression;\n\n\tprivate fieldGroupIds?: string;\n\n\t/**\n\t * Function to get the correct settings for the multi input.\n\t *\n\t * @param propertyDataModelObjectPath The corresponding DataModelObjectPath.\n\t * @param formatOptions The format options to calculate the result\n\t * @returns MultiInputSettings\n\t */\n\tprivate static _getMultiInputSettings(\n\t\tpropertyDataModelObjectPath: DataModelObjectPath,\n\t\tformatOptions: MultiValueFieldFormatOptions\n\t): MultiInputSettings {\n\t\tconst { collectionPath, itemDataModelObjectPath } = MultiValueFieldBlock._getPathStructure(propertyDataModelObjectPath);\n\t\tconst collectionBindingDisplay = `{path:'${collectionPath}', templateShareable: false}`;\n\t\tconst collectionBindingEdit = `{path:'${collectionPath}', parameters: {$$ownRequest : true}, templateShareable: false}`;\n\n\t\tconst propertyPathOrProperty = propertyDataModelObjectPath.targetObject as PropertyPath | Property;\n\t\tconst propertyDefinition: Property = isPropertyPathExpression(propertyPathOrProperty)\n\t\t\t? propertyPathOrProperty.$target\n\t\t\t: propertyPathOrProperty;\n\t\tconst commonText = propertyDefinition.annotations.Common?.Text;\n\t\tconst relativeLocation = getRelativePaths(propertyDataModelObjectPath);\n\n\t\tconst textExpression = commonText\n\t\t\t? compileExpression(\n\t\t\t\t\tgetExpressionFromAnnotation(\n\t\t\t\t\t\tcommonText as unknown as PropertyAnnotationValue<Property>,\n\t\t\t\t\t\trelativeLocation\n\t\t\t\t\t) as BindingToolkitExpression<string>\n\t\t\t  )\n\t\t\t: getValueBinding(itemDataModelObjectPath, formatOptions, true);\n\t\treturn {\n\t\t\ttext: textExpression,\n\t\t\tcollectionBindingDisplay: collectionBindingDisplay,\n\t\t\tcollectionBindingEdit: collectionBindingEdit,\n\t\t\tkey: getValueBinding(itemDataModelObjectPath, formatOptions, true)\n\t\t};\n\t}\n\n\t// Process the dataModelPath to find the collection and the relative DataModelPath for the item.\n\tprivate static _getPathStructure(dataModelObjectPath: DataModelObjectPath): MultiValueFieldPathStructure {\n\t\tlet firstCollectionPath = \"\";\n\t\tconst currentEntitySet = dataModelObjectPath.contextLocation?.targetEntitySet\n\t\t\t? dataModelObjectPath.contextLocation.targetEntitySet\n\t\t\t: dataModelObjectPath.startingEntitySet;\n\t\tconst navigatedPaths: string[] = [];\n\t\tconst contextNavsForItem = dataModelObjectPath.contextLocation?.navigationProperties || [];\n\t\tfor (const navProp of dataModelObjectPath.navigationProperties) {\n\t\t\tif (\n\t\t\t\tdataModelObjectPath.contextLocation === undefined ||\n\t\t\t\t!dataModelObjectPath.contextLocation.navigationProperties.some(\n\t\t\t\t\t(contextNavProp) => contextNavProp.fullyQualifiedName === navProp.fullyQualifiedName\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// in case of relative entitySetPath we don't consider navigationPath that are already in the context\n\t\t\t\tnavigatedPaths.push(navProp.name);\n\t\t\t\tcontextNavsForItem.push(navProp);\n\t\t\t}\n\t\t\tif (currentEntitySet.navigationPropertyBinding.hasOwnProperty(navProp.name)) {\n\t\t\t\tif (isMultipleNavigationProperty(navProp)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfirstCollectionPath = `${navigatedPaths.join(\"/\")}`;\n\t\tconst itemDataModelObjectPath = Object.assign({}, dataModelObjectPath);\n\t\tif (itemDataModelObjectPath.contextLocation) {\n\t\t\titemDataModelObjectPath.contextLocation.navigationProperties = contextNavsForItem;\n\t\t}\n\n\t\treturn { collectionPath: firstCollectionPath, itemDataModelObjectPath: itemDataModelObjectPath };\n\t}\n\n\t/**\n\t * Calculate the fieldGroupIds for the MultiValueField.\n\t *\n\t * @param dataModelObjectPath\n\t * @param appComponent\n\t * @returns The value for the fieldGroupIds\n\t */\n\tstatic computeFieldGroupIds(dataModelObjectPath: DataModelObjectPath, appComponent?: AppComponent): string | undefined {\n\t\tif (!appComponent) {\n\t\t\t//for ValueHelp / Mass edit Templating the appComponent is not passed to the templating\n\t\t\treturn \"\";\n\t\t}\n\t\tconst sideEffectService = appComponent.getSideEffectsService();\n\t\tconst fieldGroupIds = sideEffectService.computeFieldGroupIds(\n\t\t\tdataModelObjectPath.targetEntityType.fullyQualifiedName,\n\t\t\t(dataModelObjectPath.targetObject as Property).fullyQualifiedName\n\t\t);\n\t\tconst result = fieldGroupIds.join(\",\");\n\t\treturn result === \"\" ? undefined : result;\n\t}\n\n\tconstructor(props: PropertiesOf<MultiValueFieldBlock>, controlConfiguration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props);\n\t\tlet dataModelPath = MetaModelConverter.getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\tconst dataFieldConverted = MetaModelConverter.convertMetaModelContext(this.metaPath) as DataField;\n\t\tlet extraPath;\n\t\tif (isPathAnnotationExpression(dataFieldConverted.Value)) {\n\t\t\textraPath = dataFieldConverted.Value.path;\n\t\t}\n\n\t\tthis.visible = getVisibleExpression(dataModelPath, this.formatOptions);\n\t\tif (extraPath && extraPath.length > 0) {\n\t\t\tdataModelPath = enhanceDataModelPath(dataModelPath, extraPath);\n\t\t}\n\t\tconst insertable = isPathInsertable(dataModelPath);\n\t\tconst deleteNavigationRestriction = isPathDeletable(dataModelPath, {\n\t\t\tignoreTargetCollection: true,\n\t\t\tauthorizeUnresolvable: true\n\t\t});\n\t\tconst deletePath = isPathDeletable(dataModelPath);\n\t\t// deletable:\n\t\t//\t\tif restrictions come from Navigation we apply it\n\t\t//\t\totherwise we apply restrictions defined on target collection only if it's a constant\n\t\t//      otherwise it's true!\n\t\tconst deletable = ifElse(\n\t\t\tdeleteNavigationRestriction._type === \"Unresolvable\",\n\t\t\tor(not(isConstant(deletePath)), deletePath),\n\t\t\tdeletePath\n\t\t);\n\t\tthis.editMode =\n\t\t\tthis.formatOptions.displayOnly === \"true\"\n\t\t\t\t? \"Display\"\n\t\t\t\t: compileExpression(ifElse(and(insertable, deletable, UI.IsEditable), constant(\"Editable\"), constant(\"Display\")));\n\t\tthis.displayMode = getDisplayMode(dataModelPath);\n\n\t\tconst multiInputSettings = MultiValueFieldBlock._getMultiInputSettings(dataModelPath, this.formatOptions);\n\t\tthis.text = multiInputSettings.text;\n\t\tthis.collection =\n\t\t\tthis.editMode === \"Display\" ? multiInputSettings.collectionBindingDisplay : multiInputSettings.collectionBindingEdit;\n\t\tthis.key = multiInputSettings.key;\n\t\tthis.fieldGroupIds = MultiValueFieldBlock.computeFieldGroupIds(dataModelPath, settings.appComponent);\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\t//prepare settings for further processing\n\t\tconst internalDataModelPath = MetaModelConverter.getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\tconst internalDataFieldConverted = internalDataModelPath.targetObject as DataField;\n\t\tconst enhancedDataModelPath = enhanceDataModelPath(\n\t\t\tinternalDataModelPath,\n\t\t\t(internalDataFieldConverted.Value as PathAnnotationExpression<string>).path\n\t\t); // PathAnnotationExpression was checked in the templating\n\t\t//calculate the id settings for this block\n\t\tconst id = this.idPrefix ? ID.generate([this.idPrefix, \"MultiValueField\"]) : undefined;\n\t\t//create a new binding context for the value help\n\t\tconst valueHelpProperty = FieldHelper.valueHelpProperty(this.metaPath);\n\t\tconst valueHelpPropertyContext = this.metaPath.getModel().createBindingContext(valueHelpProperty, this.metaPath);\n\t\t//calculate fieldHelp\n\t\tconst fieldHelp = ValueHelpTemplating.generateID(\n\t\t\tundefined,\n\t\t\tthis.vhIdPrefix,\n\t\t\tPropertyFormatters.getRelativePropertyPath(valueHelpPropertyContext as unknown as MetaModelContext, {\n\t\t\t\tcontext: this.contextPath\n\t\t\t}),\n\t\t\tgetContextRelativeTargetObjectPath(enhancedDataModelPath) ?? \"\"\n\t\t);\n\t\t//compute the correct label\n\t\tconst label = FieldHelper.computeLabelText(internalDataFieldConverted.Value as PathAnnotationExpression<string>, {\n\t\t\tcontext: this.metaPath\n\t\t}) as string;\n\t\tconst change = `MVFieldRuntime.handleChange($controller, $event)`;\n\t\tconst validateFieldGroup = `MVFieldRuntime.onValidateFieldGroup($controller, $event)`;\n\n\t\treturn xml`\n\t\t<mdc:MultiValueField\n\t\t\t\txmlns:mdc=\"sap.ui.mdc\"\n\t\t\t\tcore:require=\"{MVFieldRuntime:'sap/fe/macros/multiValueField/MultiValueFieldRuntime'}\"\n\t\t\t\tdelegate=\"{name: 'sap/fe/macros/multiValueField/MultiValueFieldDelegate'}\"\n\t\t\t\tid=\"${id}\"\n\t\t\t\titems=\"${this.collection}\"\n\t\t\t\tdisplay=\"${this.displayMode}\"\n\t\t\t\twidth=\"100%\"\n\t\t\t\teditMode=\"${this.editMode}\"\n\t\t\t\tfieldHelp=\"${fieldHelp}\"\n\t\t\t\tariaLabelledBy = \"${this.ariaLabelledBy}\"\n\t\t\t\tshowEmptyIndicator = \"${this.formatOptions.showEmptyIndicator}\"\n\t\t\t\tlabel = \"${label}\"\n\t\t\t\tchange=\"${change}\"\n\t\t\t\tfieldGroupIds=\"${this.fieldGroupIds}\"\n\t\t\t\tvalidateFieldGroup=\"${validateFieldGroup}\"\n\t\t>\n\t\t<mdcField:MultiValueFieldItem xmlns:mdcField=\"sap.ui.mdc.field\" key=\"${this.key}\" description=\"${this.text}\" />\n\t\t</mdc:MultiValueField>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":24623,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","BindingHelper","MetaModelConverter","BindingToolkit","ID","TypeGuards","DataModelPathHelper","PropertyFormatters","UIFormatters","FieldHelper","FieldTemplating","ValueHelpTemplating","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_exports","getVisibleExpression","getValueBinding","getDisplayMode","isPathInsertable","isPathDeletable","getRelativePaths","getContextRelativeTargetObjectPath","enhanceDataModelPath","isPropertyPathExpression","isPathAnnotationExpression","isMultipleNavigationProperty","or","not","isConstant","ifElse","getExpressionFromAnnotation","constant","compileExpression","and","UI","xml","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","MultiValueFieldBlock","name","namespace","type","required","expectedTypes","validate","formatOptionsInput","displayMode","includes","_BuildingBlockBase","_getMultiInputSettings","propertyDataModelObjectPath","formatOptions","_propertyDefinition$a","collectionPath","itemDataModelObjectPath","_getPathStructure","collectionBindingDisplay","collectionBindingEdit","propertyPathOrProperty","targetObject","propertyDefinition","$target","commonText","annotations","Common","Text","relativeLocation","textExpression","text","dataModelObjectPath","_dataModelObjectPath$","_dataModelObjectPath$2","firstCollectionPath","currentEntitySet","contextLocation","targetEntitySet","startingEntitySet","navigatedPaths","contextNavsForItem","navigationProperties","navProp","some","contextNavProp","fullyQualifiedName","push","navigationPropertyBinding","hasOwnProperty","join","assign","computeFieldGroupIds","appComponent","sideEffectService","getSideEffectsService","fieldGroupIds","targetEntityType","result","props","controlConfiguration","settings","_this","this","dataModelPath","getInvolvedDataModelObjects","metaPath","contextPath","dataFieldConverted","convertMetaModelContext","extraPath","Value","path","visible","length","insertable","deleteNavigationRestriction","ignoreTargetCollection","authorizeUnresolvable","deletePath","deletable","_type","editMode","displayOnly","IsEditable","multiInputSettings","collection","_proto","getTemplate","internalDataModelPath","internalDataFieldConverted","enhancedDataModelPath","id","idPrefix","generate","valueHelpProperty","valueHelpPropertyContext","getModel","createBindingContext","fieldHelp","generateID","vhIdPrefix","getRelativePropertyPath","label","computeLabelText","change","validateFieldGroup","ariaLabelledBy","showEmptyIndicator"],"sources":["MultiValueField.block-dbg.js"],"mappings":"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","sourceRoot":"multiValueField"}},{"offset":{"line":24647,"column":0},"map":{"version":3,"names":["MultiValueFieldDelegate","Object","assign","MdcMultiValueFieldDelegate","updateItems","oPayload","aConditions","oControl","oListBinding","getBinding","isA","oBindingInfo","getBindingInfo","oTemplate","template","oKeyBindingInfo","oDescriptionBindingInfo","sKeyPath","parts","path","sDescriptionPath","aContexts","getCurrentContexts","aDataToAdd","oController","CommonUtils","getTargetView","getController","aNewKeys","map","oCondition","values","aOldKeys","oContext","getProperty","aModificationPromises","i","length","oDeleteContext","includes","push","editFlow","deleteMultipleDocuments","controlId","getId","noDialog","requestSideEffects","forEach","oItem","indexOf","createMultipleDocuments","undefined","Promise","all"],"sourceRoot":"multiValueField","sources":["MultiValueFieldDelegate.ts"],"sourcesContent":["import CommonUtils from \"sap/fe/core/CommonUtils\";\nimport PageController from \"sap/fe/core/PageController\";\nimport MdcMultiValueFieldDelegate from \"sap/ui/mdc/field/MultiValueFieldDelegate\";\nconst MultiValueFieldDelegate = Object.assign({}, MdcMultiValueFieldDelegate);\nMultiValueFieldDelegate.updateItems = function (oPayload: any, aConditions: any, oControl: any) {\n\tconst oListBinding = oControl.getBinding(\"items\");\n\tif (oListBinding.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\tconst oBindingInfo = oControl.getBindingInfo(\"items\");\n\t\t// check if conditions are added, removed or changed\n\t\tconst oTemplate = oBindingInfo.template;\n\t\tconst oKeyBindingInfo = oTemplate.getBindingInfo(\"key\");\n\t\tconst oDescriptionBindingInfo = oTemplate.getBindingInfo(\"description\");\n\t\tconst sKeyPath = oKeyBindingInfo && oKeyBindingInfo.parts[0].path;\n\t\tconst sDescriptionPath =\n\t\t\toDescriptionBindingInfo &&\n\t\t\toDescriptionBindingInfo.parts &&\n\t\t\toDescriptionBindingInfo.parts[0] &&\n\t\t\toDescriptionBindingInfo.parts[0].path;\n\t\tconst aContexts = oListBinding.getCurrentContexts();\n\t\tconst aDataToAdd: any[] = [];\n\t\tconst oController = CommonUtils.getTargetView(oControl).getController() as PageController;\n\n\t\t// Contexts to delete\n\t\tconst aNewKeys = aConditions.map(function (oCondition: any) {\n\t\t\treturn oCondition.values[0];\n\t\t});\n\t\tconst aOldKeys = aContexts.map(function (oContext: any) {\n\t\t\treturn oContext.getProperty(sKeyPath);\n\t\t});\n\t\tconst aModificationPromises = [];\n\t\tfor (let i = 0; i < aContexts.length; i++) {\n\t\t\tconst oDeleteContext = aContexts[i];\n\t\t\tif (!aNewKeys.includes(oDeleteContext.getProperty(sKeyPath))) {\n\t\t\t\taModificationPromises.push(\n\t\t\t\t\t//sideEffects will not be requested\n\t\t\t\t\toController.editFlow.deleteMultipleDocuments([oDeleteContext], {\n\t\t\t\t\t\tcontrolId: oControl.getId(),\n\t\t\t\t\t\tnoDialog: true,\n\t\t\t\t\t\trequestSideEffects: false\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t// data to add\n\t\taConditions.forEach((oCondition: any) => {\n\t\t\tif (!aOldKeys.includes(oCondition.values[0])) {\n\t\t\t\tconst oItem: any = {};\n\t\t\t\tif (sKeyPath && sKeyPath.indexOf(\"/\") === -1) {\n\t\t\t\t\t// we do not manage to create on a sub entity of the 1:n navigation\n\t\t\t\t\toItem[sKeyPath] = oCondition.values[0];\n\n\t\t\t\t\tif (sDescriptionPath && sDescriptionPath.indexOf(\"/\") === -1 && sDescriptionPath !== sKeyPath) {\n\t\t\t\t\t\toItem[sDescriptionPath] = oCondition.values[1];\n\t\t\t\t\t}\n\t\t\t\t\taDataToAdd.push(oItem);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (aDataToAdd.length) {\n\t\t\taModificationPromises.push(\n\t\t\t\t//sideEffects will not be requested\n\t\t\t\toController.editFlow.createMultipleDocuments(oListBinding, aDataToAdd, true, false, undefined, undefined, false)\n\t\t\t);\n\t\t}\n\t\treturn Promise.all(aModificationPromises);\n\t}\n};\n\nexport default MultiValueFieldDelegate;\n"],"mappings":"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"}},{"offset":{"line":24713,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","MdcMultiValueFieldDelegate","MultiValueFieldDelegate","Object","assign","updateItems","oPayload","aConditions","oControl","oListBinding","getBinding","isA","oBindingInfo","getBindingInfo","oTemplate","template","oKeyBindingInfo","oDescriptionBindingInfo","sKeyPath","parts","path","sDescriptionPath","aContexts","getCurrentContexts","aDataToAdd","oController","getTargetView","getController","aNewKeys","map","oCondition","values","aOldKeys","oContext","getProperty","aModificationPromises","i","length","oDeleteContext","includes","push","editFlow","deleteMultipleDocuments","controlId","getId","noDialog","requestSideEffects","forEach","oItem","indexOf","createMultipleDocuments","undefined","Promise","all"],"sources":["MultiValueFieldDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,mEAAO,CAAC,0BAA2B,4CAA6C,SAAUC,EAAaC,GAC5G,aAEA,MAAMC,EAA0BC,OAAOC,OAAO,CAAC,EAAGH,GAClDC,EAAwBG,YAAc,SAAUC,EAAUC,EAAaC,GACrE,MAAMC,EAAeD,EAASE,WAAW,SACzC,GAAID,EAAaE,IAAI,0CAA2C,CAC9D,MAAMC,EAAeJ,EAASK,eAAe,SAE7C,MAAMC,EAAYF,EAAaG,SAC/B,MAAMC,EAAkBF,EAAUD,eAAe,OACjD,MAAMI,EAA0BH,EAAUD,eAAe,eACzD,MAAMK,EAAWF,GAAmBA,EAAgBG,MAAM,GAAGC,KAC7D,MAAMC,EAAmBJ,GAA2BA,EAAwBE,OAASF,EAAwBE,MAAM,IAAMF,EAAwBE,MAAM,GAAGC,KAC1J,MAAME,EAAYb,EAAac,qBAC/B,MAAMC,EAAa,GACnB,MAAMC,EAAczB,EAAY0B,cAAclB,GAAUmB,gBAGxD,MAAMC,EAAWrB,EAAYsB,IAAI,SAAUC,GACzC,OAAOA,EAAWC,OAAO,EAC3B,GACA,MAAMC,EAAWV,EAAUO,IAAI,SAAUI,GACvC,OAAOA,EAASC,YAAYhB,EAC9B,GACA,MAAMiB,EAAwB,GAC9B,IAAK,IAAIC,EAAI,EAAGA,EAAId,EAAUe,OAAQD,IAAK,CACzC,MAAME,EAAiBhB,EAAUc,GACjC,IAAKR,EAASW,SAASD,EAAeJ,YAAYhB,IAAY,CAC5DiB,EAAsBK,KAEtBf,EAAYgB,SAASC,wBAAwB,CAACJ,GAAiB,CAC7DK,UAAWnC,EAASoC,QACpBC,SAAU,KACVC,mBAAoB,QAExB,CACF,CAEAvC,EAAYwC,QAAQjB,IAClB,IAAKE,EAASO,SAAST,EAAWC,OAAO,IAAK,CAC5C,MAAMiB,EAAQ,CAAC,EACf,GAAI9B,GAAYA,EAAS+B,QAAQ,QAAU,EAAG,CAE5CD,EAAM9B,GAAYY,EAAWC,OAAO,GACpC,GAAIV,GAAoBA,EAAiB4B,QAAQ,QAAU,GAAK5B,IAAqBH,EAAU,CAC7F8B,EAAM3B,GAAoBS,EAAWC,OAAO,EAC9C,CACAP,EAAWgB,KAAKQ,EAClB,CACF,IAEF,GAAIxB,EAAWa,OAAQ,CACrBF,EAAsBK,KAEtBf,EAAYgB,SAASS,wBAAwBzC,EAAce,EAAY,KAAM,MAAO2B,UAAWA,UAAW,OAC5G,CACA,OAAOC,QAAQC,IAAIlB,EACrB,CACF,EACA,OAAOjC,CACT,EAAG","sourceRoot":"multiValueField"}},{"offset":{"line":24718,"column":0},"map":{"version":3,"names":["multiValueFieldRuntime","handleChange","controller","event","sourcefield","getSource","isTransient","getBindingContext","isValueResolved","getParameter","Promise","resolve","feController","FieldRuntime","_getExtensionController","editFlow","syncTask","_sideEffects","handleFieldChange","onValidateFieldGroup","handleFieldGroupChange"],"sourceRoot":"multiValueField","sources":["MultiValueFieldRuntime.ts"],"sourcesContent":["import type PageController from \"sap/fe/core/PageController\";\nimport type Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport FieldRuntime from \"../field/FieldRuntime\";\n\nconst multiValueFieldRuntime = {\n\t/**\n\t * Handler for the change event.\n\t *\n\t * Used to request SideEffects based on the validity of change.\n\t *\n\t * @param controller The controller of the page containing the field\n\t * @param event The event object passed by the change event\n\t */\n\thandleChange: function (controller: PageController, event: Event) {\n\t\tconst sourcefield = event.getSource() as Control,\n\t\t\tisTransient = (sourcefield.getBindingContext() as Context).isTransient(),\n\t\t\tisValueResolved = (event.getParameter(\"promise\") as Promise<string> | undefined) || Promise.resolve();\n\n\t\t// Use the FE Controller instead of the extensionAPI to access internal FE controllers\n\t\tconst feController = FieldRuntime._getExtensionController(controller) as PageController;\n\n\t\tfeController.editFlow.syncTask(isValueResolved) as Promise<undefined>;\n\n\t\t// if the context is transient, it means the request would fail anyway as the record does not exist in reality\n\t\tif (isTransient) {\n\t\t\treturn;\n\t\t}\n\n\t\tfeController._sideEffects.handleFieldChange(event, true, isValueResolved) as Promise<undefined>;\n\t},\n\n\t/**\n\t * Handler for the validateFieldGroup event.\n\t *\n\t * @param controller The controller of the page containing the field\n\t * @param event The event object passed by the validateFieldGroup event\n\t */\n\tonValidateFieldGroup: async function (controller: PageController, event: Event) {\n\t\tconst feController = FieldRuntime._getExtensionController(controller) as PageController;\n\t\tawait feController._sideEffects.handleFieldGroupChange(event);\n\t}\n};\n\nexport default multiValueFieldRuntime;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAMA,MAAMA,sBAAsB,GAAG;IAC9B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;IACCC,YAAY,EAAE,UAAUC,UAA0B,EAAEC,KAAY,EAAE;MACjE,MAAMC,WAAW,GAAGD,KAAK,CAACE,SAAS,EAAa;QAC/CC,WAAW,GAAIF,WAAW,CAACG,iBAAiB,EAAE,CAAaD,WAAW,EAAE;QACxEE,eAAe,GAAIL,KAAK,CAACM,YAAY,CAAC,SAAS,CAAC,IAAoCC,OAAO,CAACC,OAAO,EAAE;;MAEtG;MACA,MAAMC,YAAY,GAAGC,YAAY,CAACC,uBAAuB,CAACZ,UAAU,CAAmB;MAEvFU,YAAY,CAACG,QAAQ,CAACC,QAAQ,CAACR,eAAe,CAAC;;MAE/C;MACA,IAAIF,WAAW,EAAE;QAChB;MACD;MAEAM,YAAY,CAACK,YAAY,CAACC,iBAAiB,CAACf,KAAK,EAAE,IAAI,EAAEK,eAAe,CAAC;IAC1E,CAAC;IAED;AACD;AACA;AACA;AACA;AACA;IACCW,oBAAoB,EAAE,gBAAgBjB,UAA0B,EAAEC,KAAY,EAAE;MAC/E,MAAMS,YAAY,GAAGC,YAAY,CAACC,uBAAuB,CAACZ,UAAU,CAAmB;MACvF,MAAMU,YAAY,CAACK,YAAY,CAACG,sBAAsB,CAACjB,KAAK,CAAC;IAC9D;EACD,CAAC;EAAC,OAEaH,sBAAsB;AAAA"}},{"offset":{"line":24762,"column":0},"map":{"version":3,"names":["sap","ui","define","FieldRuntime","multiValueFieldRuntime","handleChange","controller","event","sourcefield","getSource","isTransient","getBindingContext","isValueResolved","getParameter","Promise","resolve","feController","_getExtensionController","editFlow","syncTask","_sideEffects","handleFieldChange","onValidateFieldGroup","async","handleFieldGroupChange"],"sources":["MultiValueFieldRuntime-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,kEAAO,CAAC,yBAA0B,SAAUC,GACjD,aAEA,MAAMC,EAAyB,CAS7BC,aAAc,SAAUC,EAAYC,GAClC,MAAMC,EAAcD,EAAME,YACxBC,EAAcF,EAAYG,oBAAoBD,cAC9CE,EAAkBL,EAAMM,aAAa,YAAcC,QAAQC,UAG7D,MAAMC,EAAeb,EAAac,wBAAwBX,GAC1DU,EAAaE,SAASC,SAASP,GAG/B,GAAIF,EAAa,CACf,MACF,CACAM,EAAaI,aAAaC,kBAAkBd,EAAO,KAAMK,EAC3D,EAOAU,qBAAsBC,eAAgBjB,EAAYC,GAChD,MAAMS,EAAeb,EAAac,wBAAwBX,SACpDU,EAAaI,aAAaI,uBAAuBjB,EACzD,GAEF,OAAOH,CACT,EAAG","sourceRoot":"multiValueField"}},{"offset":{"line":24767,"column":0},"map":{"version":3,"names":["PaginatorBlock","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","blockAttribute","type","isPublic","getTemplate","navUpEnabledExpression","pathInModel","navDownEnabledExpression","visibleExpression","or","navUpTooltipExpression","navDownTooltipExpression","xml","id","generate","BuildingBlockBase"],"sourceRoot":"paginator","sources":["Paginator.block.ts"],"sourcesContent":["import BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { or, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\n\n/**\n * Building block used to create a paginator control.\n *\n * Usage example:\n * <pre>\n * &lt;macro:Paginator /&gt;\n * </pre>\n *\n * @hideconstructor\n * @public\n * @since 1.94.0\n */\n@defineBuildingBlock({\n\tname: \"Paginator\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.m.HBox\"]\n})\nexport default class PaginatorBlock extends BuildingBlockBase {\n\t/**\n\t * The identifier of the Paginator control.\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tpublic id = \"\";\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string\n\t */\n\tgetTemplate() {\n\t\t// The model name is hardcoded, as this building block can also be used transparently by application developers\n\t\tconst navUpEnabledExpression = pathInModel(\"/navUpEnabled\", \"paginator\");\n\t\tconst navDownEnabledExpression = pathInModel(\"/navDownEnabled\", \"paginator\");\n\t\tconst visibleExpression = or(navUpEnabledExpression, navDownEnabledExpression);\n\n\t\tconst navUpTooltipExpression = pathInModel(\"T_PAGINATOR_CONTROL_PAGINATOR_TOOLTIP_UP\", \"sap.fe.i18n\");\n\t\tconst navDownTooltipExpression = pathInModel(\"T_PAGINATOR_CONTROL_PAGINATOR_TOOLTIP_DOWN\", \"sap.fe.i18n\");\n\n\t\treturn xml`\n\t\t\t<m:HBox displayInline=\"true\" id=\"${this.id}\" visible=\"${visibleExpression}\">\n\t\t\t\t<uxap:ObjectPageHeaderActionButton\n\t\t\t\t\txmlns:uxap=\"sap.uxap\"\n\t\t\t\t\tid=\"${generate([this.id, \"previousItem\"])}\"\n\t\t\t\t\tenabled=\"${navUpEnabledExpression}\"\n\t\t\t\t\ttooltip=\"${navUpTooltipExpression}\"\n\t\t\t\t\ticon=\"sap-icon://navigation-up-arrow\"\n\t\t\t\t\tpress=\".paginator.updateCurrentContext(-1)\"\n\t\t\t\t\ttype=\"Transparent\"\n\t\t\t\t\timportance=\"High\"\n\t\t\t\t/>\n\t\t\t\t<uxap:ObjectPageHeaderActionButton\n\t\t\t\t\txmlns:uxap=\"sap.uxap\"\n\t\t\t\t\tid=\"${generate([this.id, \"nextItem\"])}\"\n\t\t\t\t\tenabled=\"${navDownEnabledExpression}\"\n\t\t\t\t\ttooltip=\"${navDownTooltipExpression}\"\n\t\t\t\t\ticon=\"sap-icon://navigation-down-arrow\"\n\t\t\t\t\tpress=\".paginator.updateCurrentContext(1)\"\n\t\t\t\t\ttype=\"Transparent\"\n\t\t\t\t\timportance=\"High\"\n\t\t\t\t/>\n\t\t\t</m:HBox>`;\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;MAwBqBA,cAAc;EAlBnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAXA,OAYCC,mBAAmB,CAAC;IACpBC,IAAI,EAAE,WAAW;IACjBC,SAAS,EAAE,wBAAwB;IACnCC,eAAe,EAAE,eAAe;IAChCC,WAAW,EAAE,CAAC,YAAY;EAC3B,CAAC,CAAC,UAKAC,cAAc,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA;IAGnD;AACD;AACA;AACA;AACA;IAJC,OAKAC,WAAW,GAAX,uBAAc;MACb;MACA,MAAMC,sBAAsB,GAAGC,WAAW,CAAC,eAAe,EAAE,WAAW,CAAC;MACxE,MAAMC,wBAAwB,GAAGD,WAAW,CAAC,iBAAiB,EAAE,WAAW,CAAC;MAC5E,MAAME,iBAAiB,GAAGC,EAAE,CAACJ,sBAAsB,EAAEE,wBAAwB,CAAC;MAE9E,MAAMG,sBAAsB,GAAGJ,WAAW,CAAC,0CAA0C,EAAE,aAAa,CAAC;MACrG,MAAMK,wBAAwB,GAAGL,WAAW,CAAC,4CAA4C,EAAE,aAAa,CAAC;MAEzG,OAAOM,GAAI;AACb,sCAAsC,IAAI,CAACC,EAAG,cAAaL,iBAAkB;AAC7E;AACA;AACA,WAAWM,QAAQ,CAAC,CAAC,IAAI,CAACD,EAAE,EAAE,cAAc,CAAC,CAAE;AAC/C,gBAAgBR,sBAAuB;AACvC,gBAAgBK,sBAAuB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAWI,QAAQ,CAAC,CAAC,IAAI,CAACD,EAAE,EAAE,UAAU,CAAC,CAAE;AAC3C,gBAAgBN,wBAAyB;AACzC,gBAAgBI,wBAAyB;AACzC;AACA;AACA;AACA;AACA;AACA,aAAa;IACZ,CAAC;IAAA;EAAA,EA5C0CI,iBAAiB;IAAA;IAAA;IAAA;IAAA;MAAA,OAKhD,EAAE;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":24870,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","BindingToolkit","StableIdHelper","_dec","_dec2","_class","_class2","_descriptor","_exports","generate","pathInModel","or","xml","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","PaginatorBlock","name","namespace","publicNamespace","returnTypes","type","isPublic","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","_proto","getTemplate","navUpEnabledExpression","navDownEnabledExpression","visibleExpression","navUpTooltipExpression","navDownTooltipExpression","id"],"sources":["Paginator.block-dbg.js"],"mappings":"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","sourceRoot":"paginator"}},{"offset":{"line":24897,"column":0},"map":{"version":3,"names":["QuickViewBlock","defineBuildingBlock","name","namespace","designtime","blockAttribute","type","required","expectedTypes","expectedAnnotationTypes","getRelativePathToQuickViewEntity","propertyDataModelPath","relativePathToQuickViewEntity","quickViewNavProp","getNavPropToQuickViewEntity","navigationProperties","reduce","relativPath","navProp","contextLocation","find","contextNavProp","getSemanticObjectsForPayloadAndQualifierMap","propertyWithSemanticObject","qualifierMap","semanticObjectsList","undefined","semanticObject","getSemanticObjects","compiledSemanticObject","compileExpression","getExpressionFromAnnotation","includes","qualifier","push","getSemanticObjectMappingsForPayload","semanticObjectMappings","semanticObjectMapping","getSemanticObjectMappings","correspondingSemanticObject","items","map","semanticObjectMappingType","key","LocalProperty","value","SemanticObjectProperty","valueOf","getSemanticObjectUnavailableActionsForPayload","semanticObjectUnavailableActions","unavailableActionAnnotation","getSemanticObjectUnavailableActions","actions","unavailableAction","addCustomSemanticObjectToSemanticObjectListForPayload","customSemanticObject","startsWith","JSON","parse","property","targetObject","targetEntityType","referentialConstraint","some","sourceProperty","targetType","annotations","UI","QuickViewFacets","targetEntitySet","semanticKeys","Common","SemanticKey","isPropertySemanticKey","semanticKey","$target","lastNavProp","length","isKey","props","controlConfiguration","settings","metaPathDataModelPath","MetaModelConverter","getInvolvedDataModelObjects","dataField","contextPath","valueDataModelPath","getDataModelObjectPathForValue","valueProperty","isProperty","hasQuickViewFacets","isUsedInNavigationWithQuickViewFacets","absoluteContextPath","fullyQualifiedName","quickViewEntity","navigationPath","pathInModel","getPropertyWithSemanticObject","mainSemanticObject","main","propertyPathLabel","Label","payload","semanticObjects","entityType","getPath","contact","getTemplate","delegateConfiguration","xml","stringify","writeCustomData","customData","dynamicPath","getDynamicPathFromSemanticObject","BuildingBlockBase"],"sourceRoot":"quickView","sources":["QuickView.block.ts"],"sourcesContent":["import type { AnnotationTerm, EntityType, NavigationProperty, Property, PropertyAnnotationValue } from \"@sap-ux/vocabularies-types\";\nimport type * as Edm from \"@sap-ux/vocabularies-types/Edm\";\nimport type { CommonAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport {\n\tcompileExpression,\n\tgetExpressionFromAnnotation,\n\tpathInModel,\n\ttype BindingToolkitExpression,\n\ttype CompiledBindingToolkitExpression\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport { isProperty } from \"sap/fe/core/helpers/TypeGuards\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport {\n\tgetDynamicPathFromSemanticObject,\n\tgetSemanticObjectMappings,\n\tgetSemanticObjects,\n\tgetSemanticObjectUnavailableActions\n} from \"sap/fe/core/templating/SemanticObjectHelper\";\nimport {\n\tgetDataModelObjectPathForValue,\n\tgetPropertyWithSemanticObject,\n\tisUsedInNavigationWithQuickViewFacets\n} from \"sap/fe/macros/field/FieldTemplating\";\n\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport type {\n\tRegisteredPayload,\n\tRegisteredSemanticObjectMapping,\n\tRegisteredSemanticObjectUnavailableActions\n} from \"sap/fe/macros/quickView/QuickViewDelegate\";\nimport type Context from \"sap/ui/model/Context\";\n\n@defineBuildingBlock({\n\tname: \"QuickView\",\n\tnamespace: \"sap.fe.macros\",\n\tdesigntime: \"sap/fe/macros/quickView/QuickView.designtime\"\n})\nexport default class QuickViewBlock extends BuildingBlockBase {\n\t/**\n\t * Metadata path to the dataField.\n\t * This property is usually a metadataContext pointing to a DataField having\n\t * $Type of DataField, DataFieldWithUrl, DataFieldForAnnotation, DataFieldForAction, DataFieldForIntentBasedNavigation, DataFieldWithNavigationPath, or DataPointType.\n\t * But it can also be a Property with $kind=\"Property\"\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\texpectedTypes: [\"Property\"],\n\t\texpectedAnnotationTypes: [\n\t\t\t\"com.sap.vocabularies.UI.v1.DataField\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithUrl\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataPointType\"\n\t\t]\n\t})\n\tpublic dataField!: Context;\n\n\t/**\n\t * Metadata path to the entity set\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tpublic contextPath!: Context;\n\n\t/**\n\t * Custom semantic object\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpublic semanticObject?: string;\n\n\tprivate payload!: RegisteredPayload;\n\n\t/**\n\t * Get the relative path to the entity which quick view Facets we want to display.\n\t *\n\t * @param propertyDataModelPath\n\t * @returns A path if it exists.\n\t */\n\tstatic getRelativePathToQuickViewEntity(propertyDataModelPath: DataModelObjectPath): string | undefined {\n\t\tlet relativePathToQuickViewEntity: string | undefined;\n\t\tconst quickViewNavProp = this.getNavPropToQuickViewEntity(propertyDataModelPath);\n\t\tif (quickViewNavProp) {\n\t\t\trelativePathToQuickViewEntity = propertyDataModelPath.navigationProperties.reduce((relativPath: string, navProp) => {\n\t\t\t\tif (\n\t\t\t\t\tnavProp.name !== quickViewNavProp.name &&\n\t\t\t\t\t!propertyDataModelPath.contextLocation?.navigationProperties.find(\n\t\t\t\t\t\t(contextNavProp) => contextNavProp.name === navProp.name\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\t// we keep only navProperties that are part of the relativePath and not the one for quickViewNavProp\n\t\t\t\t\treturn `${relativPath}${navProp.name}/`;\n\t\t\t\t}\n\t\t\t\treturn relativPath;\n\t\t\t}, \"\");\n\t\t\trelativePathToQuickViewEntity = `${relativePathToQuickViewEntity}${quickViewNavProp.name}`;\n\t\t}\n\t\treturn relativePathToQuickViewEntity;\n\t}\n\n\t/**\n\t * Get the semanticObject compile biding from metadata and a map to the qualifiers.\n\t *\n\t * @param propertyWithSemanticObject The property that holds semanticObject annotataions if it exists\n\t * @returns An object containing semanticObjectList and qualifierMap\n\t */\n\tstatic getSemanticObjectsForPayloadAndQualifierMap(propertyWithSemanticObject: Property | NavigationProperty | undefined) {\n\t\tconst qualifierMap: Record<string, CompiledBindingToolkitExpression> = {};\n\t\tconst semanticObjectsList: string[] = [];\n\t\tif (propertyWithSemanticObject !== undefined) {\n\t\t\tfor (const semanticObject of getSemanticObjects(propertyWithSemanticObject)) {\n\t\t\t\tconst compiledSemanticObject = compileExpression(\n\t\t\t\t\tgetExpressionFromAnnotation(\n\t\t\t\t\t\tsemanticObject as unknown as PropertyAnnotationValue<Property>\n\t\t\t\t\t) as BindingToolkitExpression<string>\n\t\t\t\t);\n\t\t\t\t// this should not happen, but we make sure not to add twice the semanticObject otherwise the mdcLink crashes\n\t\t\t\tif (compiledSemanticObject && !semanticObjectsList.includes(compiledSemanticObject)) {\n\t\t\t\t\tqualifierMap[semanticObject.qualifier || \"\"] = compiledSemanticObject;\n\t\t\t\t\tsemanticObjectsList.push(compiledSemanticObject);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn { semanticObjectsList, qualifierMap };\n\t}\n\n\t/**\n\t * Get the semanticObjectMappings from metadata in the payload expected structure.\n\t *\n\t * @param propertyWithSemanticObject\n\t * @param qualifierMap\n\t * @returns A payload structure for semanticObjectMappings\n\t */\n\tstatic getSemanticObjectMappingsForPayload(\n\t\tpropertyWithSemanticObject: Property | NavigationProperty | undefined,\n\t\tqualifierMap: Record<string, CompiledBindingToolkitExpression>\n\t) {\n\t\tconst semanticObjectMappings: RegisteredSemanticObjectMapping[] = [];\n\t\tif (propertyWithSemanticObject !== undefined) {\n\t\t\tfor (const semanticObjectMapping of getSemanticObjectMappings(propertyWithSemanticObject)) {\n\t\t\t\tconst correspondingSemanticObject = qualifierMap[semanticObjectMapping.qualifier || \"\"];\n\t\t\t\tif (correspondingSemanticObject) {\n\t\t\t\t\tsemanticObjectMappings.push({\n\t\t\t\t\t\tsemanticObject: correspondingSemanticObject,\n\t\t\t\t\t\titems: semanticObjectMapping.map((semanticObjectMappingType) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tkey: semanticObjectMappingType.LocalProperty.value,\n\t\t\t\t\t\t\t\tvalue: semanticObjectMappingType.SemanticObjectProperty.valueOf() as string\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn semanticObjectMappings;\n\t}\n\n\t/**\n\t * Get the semanticObjectUnavailableActions from metadata in the payload expected structure.\n\t *\n\t * @param propertyWithSemanticObject\n\t * @param qualifierMap\n\t * @returns A payload structure for semanticObjectUnavailableActions\n\t */\n\tstatic getSemanticObjectUnavailableActionsForPayload(\n\t\tpropertyWithSemanticObject: Property | NavigationProperty | undefined,\n\t\tqualifierMap: Record<string, CompiledBindingToolkitExpression>\n\t) {\n\t\tconst semanticObjectUnavailableActions: RegisteredSemanticObjectUnavailableActions = [];\n\t\tif (propertyWithSemanticObject !== undefined) {\n\t\t\tfor (const unavailableActionAnnotation of getSemanticObjectUnavailableActions(propertyWithSemanticObject) as ({\n\t\t\t\tterm: CommonAnnotationTerms.SemanticObjectUnavailableActions;\n\t\t\t} & AnnotationTerm<Edm.String[]>)[]) {\n\t\t\t\tconst correspondingSemanticObject = qualifierMap[unavailableActionAnnotation.qualifier || \"\"];\n\t\t\t\tif (correspondingSemanticObject) {\n\t\t\t\t\tsemanticObjectUnavailableActions.push({\n\t\t\t\t\t\tsemanticObject: correspondingSemanticObject,\n\t\t\t\t\t\tactions: unavailableActionAnnotation.map((unavailableAction) => unavailableAction as string)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn semanticObjectUnavailableActions;\n\t}\n\n\t/**\n\t * Add customObject(s) to the semanticObject list for the payload if it exists.\n\t *\n\t * @param semanticObjectsList\n\t * @param customSemanticObject\n\t */\n\tstatic addCustomSemanticObjectToSemanticObjectListForPayload(\n\t\tsemanticObjectsList: string[],\n\t\tcustomSemanticObject: string | undefined\n\t): void {\n\t\tif (customSemanticObject) {\n\t\t\t// the custom semantic objects are either a single string/key to custom data or a stringified array\n\t\t\tif (!customSemanticObject.startsWith(\"[\")) {\n\t\t\t\t// customSemanticObject = \"semanticObject\" | \"{pathInModel}\"\n\t\t\t\tif (!semanticObjectsList.includes(customSemanticObject)) {\n\t\t\t\t\tsemanticObjectsList.push(customSemanticObject);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// customSemanticObject = '[\"semanticObject1\",\"semanticObject2\"]'\n\t\t\t\tfor (const semanticObject of JSON.parse(customSemanticObject) as string[]) {\n\t\t\t\t\tif (!semanticObjectsList.includes(semanticObject)) {\n\t\t\t\t\t\tsemanticObjectsList.push(semanticObject);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get the navigationProperty to an entity with QuickViewFacets that can be linked to the property.\n\t *\n\t * @param propertyDataModelPath\n\t * @returns A navigation property if it exists.\n\t */\n\tstatic getNavPropToQuickViewEntity(propertyDataModelPath: DataModelObjectPath) {\n\t\t//TODO we should investigate to put this code as common with FieldTemplating.isUsedInNavigationWithQuickViewFacets\n\t\tconst property = propertyDataModelPath.targetObject as Property;\n\t\tconst navigationProperties = propertyDataModelPath.targetEntityType.navigationProperties;\n\t\tlet quickViewNavProp = navigationProperties.find((navProp: NavigationProperty) => {\n\t\t\treturn navProp.referentialConstraint.some((referentialConstraint) => {\n\t\t\t\treturn referentialConstraint.sourceProperty === property.name && navProp.targetType.annotations.UI?.QuickViewFacets;\n\t\t\t});\n\t\t});\n\t\tif (!quickViewNavProp && propertyDataModelPath.contextLocation?.targetEntitySet !== propertyDataModelPath.targetEntitySet) {\n\t\t\tconst semanticKeys = propertyDataModelPath.targetEntityType.annotations.Common?.SemanticKey || [];\n\t\t\tconst isPropertySemanticKey = semanticKeys.some(function (semanticKey) {\n\t\t\t\treturn semanticKey.$target.name === property.name;\n\t\t\t});\n\t\t\tconst lastNavProp = propertyDataModelPath.navigationProperties[propertyDataModelPath.navigationProperties.length - 1];\n\t\t\tif ((isPropertySemanticKey || property.isKey) && propertyDataModelPath.targetEntityType.annotations.UI?.QuickViewFacets) {\n\t\t\t\tquickViewNavProp = lastNavProp as unknown as NavigationProperty;\n\t\t\t}\n\t\t}\n\t\treturn quickViewNavProp;\n\t}\n\n\tconstructor(props: PropertiesOf<QuickViewBlock>, controlConfiguration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props, controlConfiguration, settings);\n\t\tlet metaPathDataModelPath = MetaModelConverter.getInvolvedDataModelObjects(this.dataField, this.contextPath);\n\t\tconst valueDataModelPath = getDataModelObjectPathForValue(metaPathDataModelPath);\n\t\tmetaPathDataModelPath = valueDataModelPath || metaPathDataModelPath;\n\n\t\tconst valueProperty = isProperty(metaPathDataModelPath.targetObject) ? metaPathDataModelPath.targetObject : undefined;\n\t\tconst hasQuickViewFacets =\n\t\t\tvalueProperty && isUsedInNavigationWithQuickViewFacets(metaPathDataModelPath, valueProperty) ? \"true\" : \"false\";\n\n\t\tconst relativePathToQuickViewEntity = QuickViewBlock.getRelativePathToQuickViewEntity(metaPathDataModelPath);\n\t\t// it can be that there is no targetEntityset for the context location so we use the targetObjectFullyQualifiedName\n\t\tconst absoluteContextPath =\n\t\t\tmetaPathDataModelPath.contextLocation?.targetEntitySet?.name ??\n\t\t\t(metaPathDataModelPath.contextLocation?.targetObject as NavigationProperty | EntityType).fullyQualifiedName;\n\t\tconst quickViewEntity = relativePathToQuickViewEntity ? `/${absoluteContextPath}/${relativePathToQuickViewEntity}` : undefined;\n\t\tconst navigationPath = relativePathToQuickViewEntity ? compileExpression(pathInModel(relativePathToQuickViewEntity)) : undefined;\n\n\t\tconst propertyWithSemanticObject = getPropertyWithSemanticObject(metaPathDataModelPath);\n\t\tlet mainSemanticObject;\n\t\tconst { semanticObjectsList, qualifierMap } =\n\t\t\tQuickViewBlock.getSemanticObjectsForPayloadAndQualifierMap(propertyWithSemanticObject);\n\t\tconst semanticObjectMappings = QuickViewBlock.getSemanticObjectMappingsForPayload(propertyWithSemanticObject, qualifierMap);\n\t\tconst semanticObjectUnavailableActions = QuickViewBlock.getSemanticObjectUnavailableActionsForPayload(\n\t\t\tpropertyWithSemanticObject,\n\t\t\tqualifierMap\n\t\t);\n\t\tif (isProperty(propertyWithSemanticObject)) {\n\t\t\t// TODO why should this be different for navigation: when we add this some links disappear\n\t\t\tmainSemanticObject = qualifierMap.main || qualifierMap[\"\"];\n\t\t}\n\t\tQuickViewBlock.addCustomSemanticObjectToSemanticObjectListForPayload(semanticObjectsList, this.semanticObject);\n\t\tconst propertyPathLabel = (valueProperty?.annotations.Common?.Label?.valueOf() as string) || \"\";\n\n\t\tthis.payload = {\n\t\t\tsemanticObjects: semanticObjectsList,\n\t\t\tentityType: quickViewEntity,\n\t\t\tsemanticObjectUnavailableActions: semanticObjectUnavailableActions,\n\t\t\tsemanticObjectMappings: semanticObjectMappings,\n\t\t\tmainSemanticObject: mainSemanticObject,\n\t\t\tpropertyPathLabel: propertyPathLabel,\n\t\t\tdataField: quickViewEntity === undefined ? this.dataField.getPath() : undefined,\n\t\t\tcontact: undefined,\n\t\t\tnavigationPath: navigationPath,\n\t\t\thasQuickViewFacets: hasQuickViewFacets\n\t\t};\n\t}\n\n\t/**\n\t * The building block template function.\n\t *\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tgetTemplate() {\n\t\tconst delegateConfiguration = {\n\t\t\tname: \"sap/fe/macros/quickView/QuickViewDelegate\",\n\t\t\tpayload: this.payload\n\t\t};\n\n\t\treturn xml`<mdc:Link xmlns:mdc=\"sap.ui.mdc\" delegate=\"${JSON.stringify(delegateConfiguration)}\">\n\t\t\t${this.writeCustomData(this.payload.semanticObjects)}\n\t\t\t</mdc:Link>`;\n\t}\n\n\twriteCustomData(semanticObjects: string[]) {\n\t\tlet customData = \"\";\n\t\tfor (const semanticObject of semanticObjects) {\n\t\t\tconst dynamicPath = getDynamicPathFromSemanticObject(semanticObject);\n\t\t\tif (dynamicPath) {\n\t\t\t\tcustomData = `${customData}\n\t\t\t\t<core:CustomData xmlns:core=\"sap.ui.core\" key=\"${dynamicPath}\" value=\"${semanticObject}\" />`;\n\t\t\t}\n\t\t}\n\t\tif (customData.length) {\n\t\t\treturn `<mdc:customData>\n\t\t\t\t${customData}\n\t\t\t</mdc:customData>`;\n\t\t}\n\t\treturn \"\";\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":25207,"column":0},"map":{"version":3,"names":["sap","ui","define","MetaModelConverter","BindingToolkit","TypeGuards","SemanticObjectHelper","FieldTemplating","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_descriptor3","_exports","xml","defineBuildingBlock","blockAttribute","isUsedInNavigationWithQuickViewFacets","getPropertyWithSemanticObject","getDataModelObjectPathForValue","getSemanticObjectUnavailableActions","getSemanticObjects","getSemanticObjectMappings","getDynamicPathFromSemanticObject","isProperty","pathInModel","getExpressionFromAnnotation","compileExpression","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","QuickViewBlock","name","namespace","designtime","type","required","expectedTypes","expectedAnnotationTypes","_BuildingBlockBase","getRelativePathToQuickViewEntity","propertyDataModelPath","relativePathToQuickViewEntity","quickViewNavProp","this","getNavPropToQuickViewEntity","navigationProperties","relativPath","navProp","_propertyDataModelPat","contextLocation","find","contextNavProp","getSemanticObjectsForPayloadAndQualifierMap","propertyWithSemanticObject","qualifierMap","semanticObjectsList","semanticObject","compiledSemanticObject","includes","qualifier","push","getSemanticObjectMappingsForPayload","semanticObjectMappings","semanticObjectMapping","correspondingSemanticObject","items","map","semanticObjectMappingType","LocalProperty","SemanticObjectProperty","valueOf","getSemanticObjectUnavailableActionsForPayload","semanticObjectUnavailableActions","unavailableActionAnnotation","actions","unavailableAction","addCustomSemanticObjectToSemanticObjectListForPayload","customSemanticObject","startsWith","JSON","parse","_propertyDataModelPat2","targetObject","targetEntityType","referentialConstraint","some","_navProp$targetType$a","sourceProperty","targetType","annotations","UI","QuickViewFacets","targetEntitySet","_propertyDataModelPat3","_propertyDataModelPat4","semanticKeys","Common","SemanticKey","isPropertySemanticKey","semanticKey","$target","lastNavProp","length","isKey","props","controlConfiguration","settings","_metaPathDataModelPat","_metaPathDataModelPat2","_metaPathDataModelPat3","_valueProperty$annota","_valueProperty$annota2","_this","metaPathDataModelPath","getInvolvedDataModelObjects","dataField","contextPath","valueDataModelPath","valueProperty","hasQuickViewFacets","absoluteContextPath","fullyQualifiedName","quickViewEntity","navigationPath","mainSemanticObject","main","propertyPathLabel","Label","payload","semanticObjects","entityType","getPath","contact","_proto","getTemplate","delegateConfiguration","stringify","writeCustomData","customData","dynamicPath"],"sources":["QuickView.block-dbg.js"],"mappings":"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","sourceRoot":"quickView"}},{"offset":{"line":25214,"column":0},"map":{"version":3,"names":["SimpleLinkDelegate","Object","assign","LinkDelegate","CONSTANTS","iLinksShownInPopup","sapmLink","sapuimdcLink","sapuimdclinkLinkItem","sapmObjectIdentifier","sapmObjectStatus","getConstants","_getEntityType","oPayload","oMetaModel","createBindingContext","entityType","undefined","_getSemanticsModel","JSONModel","_getDataField","dataField","_getContact","contact","fnTemplateFragment","sFragmentName","titleLinkHref","oFragmentModel","oPayloadToUse","resolvedpayload","payload","LinkId","oControl","isA","getId","getModel","getProperty","titlelink","oSemanticsModel","semanticModel","bindingContexts","semantic","models","entitySet","metaModel","viewData","oFragment","XMLTemplateProcessor","loadTemplate","Promise","resolve","XMLPreprocessor","process","name","then","_internalFragment","Fragment","load","definition","controller","oPopoverContent","setModel","setBindingContext","fetchAdditionalContent","oPayLoad","oMdcLinkControl","aNavigateRegexpMatch","navigationPath","match","oBindingContext","length","bindContext","getBindingContext","$$ownRequest","getMetaModel","getBoundContext","_fetchLinkCustomData","_oLink","getParent","getCustomData","fetchLinkItems","oInfoLog","_getSemanticObjects","oContextObject","getObject","initialize","_oLinkCustomData","_link","aLinkCustomData","map","linkItem","mProperties","value","oSemanticAttributesResolved","_calculateSemanticAttributes","oSemanticAttributes","results","oPayloadResolved","_retrieveNavigationTargets","aLinks","_findLinkType","aLinkItems","nLinkType","oLinkItem","LinkItem","text","getText","href","getHref","hasQuickViewFacets","linkType","fetchLinkType","oLink","_oCurrentLink","_oPayload","oDefaultInitialType","initialType","type","directLink","runtimeType","appStateKeyMap","semanticObjects","_retrieveUnmodifiedLinkItems","retrieveLinkItems","_LinkType","Error","oError","Log","error","_RemoveTitleLinkFromTargets","_aLinkItems","_bTitleHasLink","_aTitleLink","_sTitleLinkHref","_oMDCLink","bResult","linkIsPrimaryAction","_sLinkIntentWithoutParameters","_sTitleIntent","intent","split","titlelinkhref","setProperty","aMLinkItems","filter","key","_IsSemanticObjectDynamic","aNewLinkCustomData","oThis","link","otherLink","_getLineContext","oView","mLineContext","getAggregation","_setFilterContextUrlForSelectionVariant","oSelectionVariant","oNavigationService","getViewData","sContextUrl","constructContextUrl","setFilterContextUrl","_setObjectMappings","sSemanticObject","oParams","aSemanticObjectMappings","hasChanged","modifiedSelectionVariant","SelectionVariant","toJSONObject","forEach","mapping","mappingSemanticObject","semanticObject","mappingSemanticObjectPath","getDynamicPathFromSemanticObject","oMappings","items","i","sLocalProperty","sSemanticObjectProperty","removeParameter","removeSelectOption","renameParameter","renameSelectOption","propertyToBeRemoved","slice","params","selectionVariant","_getAppStateKeyAndUrlParameters","_this","navigationService","aValues","deepEqual","defaultCache","semanticAttributes","appstatekey","toES6Promise","getAppStateKeyAndUrlParameters","toJSONString","cache","_getLinkItemWithNewParameter","_that","_oLinkItem","_oShellServices","_oParams","_sAppStateKey","_oSelectionVariant","_oNavigationService","expandCompactHash","sHash","oShellHash","parseShellHash","oNewParams","newSelectionVariant","semanticObjectMappings","oNewShellHash","target","action","appStateKey","setHref","constructShellHash","aSemanticLinks","push","bind","_removeEmptyLinkItem","modifyLinkItems","CommonUtils","getTargetView","oAppComponent","getAppComponent","primaryActionIsActive","FieldHelper","checkPrimaryActions","aTitleLink","titleLink","bTitleHasLink","hasTitleLink","oShellServices","getShellServices","hasUShell","reject","oTargetInfo","mainSemanticObject","getNavigationService","oController","getController","mLineContextData","sMetaPath","getMetaPath","getPath","_intentBasedNavigation","removeSensitiveData","prepareContextForExternalNavigation","mixAttributesAndSelectionVariant","propertiesWithoutConflict","intentBasedNavigation","adaptNavigationContext","_removeTechnicalParameters","titleLinktoBeRemove","index","beforeNavigationCallback","oEvent","oSource","getSource","sHref","getParameter","oURLParsing","Factory","getService","oHash","KeepAliveHelper","storeControlRefreshStrategyForHash","_getSemanticObjectCustomDataValue","oSemanticObjectsResolved","sPropertyName","sCustomDataValue","iCustomDataCount","getKey","getValue","_isDynamicPath","pathOrValue","indexOf","_updatePayloadWithResolvedSemanticObjectValue","newPayload","semanticObjectName","semanticObjectsResolved","j","_createNewPayloadWithDynamicSemanticObjectsResolved","tmpPropertyName","substr","_updateSemanticObjectsForMappings","mdcPayload","mdcPayloadWithDynamicSemanticObjectsResolved","semanticObjectMapping","_updateSemanticObjectsUnavailableActions","mdcPayloadSemanticObjectUnavailableActions","_Index","semanticObjectUnavailableAction","findIndex","_updateSemanticObjectsWithResolvedValue","newSemanticObjectsCount","splice","_removeEmptySemanticObjectsMappings","mappingsCount","_setPayloadWithDynamicSemanticObjectsResolved","oPayloadWithDynamicSemanticObjectsResolved","propertyPathLabel","deepClone","_SemanticObjectUnavailableActions","semanticObjectUnavailableActions","_getPayloadWithDynamicSemanticObjectsResolved","linkCustomData","_updatePayloadWithSemanticAttributes","aSemanticObjects","oResults","mSemanticObjectMappings","addContextObject","sAttributeName","oAttribute","oTransformationAdditional","getSemanticObjectAttribute","createAttributeStructure","addSemanticObjectAttribute","transformations","description","isPlainObject","aKeys","keys","sNewAttributeNameMapped","sNewAttributeName","sValue","sKey","sAttributeNameMapped","reason","aAttributeNew","_convertSemanticObjectMapping","_getSemanticObjectMappings","sAppStateKey","oNavigationTargets","ownNavigation","availableActions","iSuperiorActionLinksFound","Core","loadLibrary","async","sap","ui","require","Utils","getAppComponentForControl","aParams","sortResultsBy","getLinks","bHasLinks","aSemanticObjectUnavailableActions","_getSemanticObjectUnavailableActions","oUnavailableActions","_convertSemanticObjectUnavailableAction","sCurrentHash","FieldRuntime","_fnFixHashQueryString","getHash","fnIsUnavailableAction","sAction","fnAddLink","shellHash","icon","initiallyVisible","tags","addSemanticObjectIntent","n","iLinkItemIndex","oSemanticObjectUnavailableAction","SemanticObjectUnavailableAction","actions","aSemanticObjectMappingItems","oSemanticObjectMapping","oSemanticObjectMappingItem","SemanticObjectMappingItem","SemanticObjectMapping","getSemanticObject","getItems","reduce","oMap","oItem","_SemanticObjectName","_SemanticObjectHasAlreadyUnavailableActions","_UnavailableActions","mSemanticObjectUnavailableActions","oSemanticObjectUnavailableActions","getActions","UnavailableAction"],"sourceRoot":"quickView","sources":["QuickViewDelegate.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport deepClone from \"sap/base/util/deepClone\";\nimport deepEqual from \"sap/base/util/deepEqual\";\nimport isPlainObject from \"sap/base/util/isPlainObject\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport KeepAliveHelper from \"sap/fe/core/helpers/KeepAliveHelper\";\nimport toES6Promise from \"sap/fe/core/helpers/ToES6Promise\";\nimport PageController from \"sap/fe/core/PageController\";\nimport { NavigationService } from \"sap/fe/core/services/NavigationServiceFactory\";\nimport { getDynamicPathFromSemanticObject } from \"sap/fe/core/templating/SemanticObjectHelper\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport FieldRuntime from \"sap/fe/macros/field/FieldRuntime\";\nimport SelectionVariant from \"sap/fe/navigation/SelectionVariant\";\nimport Core from \"sap/ui/core/Core\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport XMLTemplateProcessor from \"sap/ui/core/XMLTemplateProcessor\";\nimport Factory from \"sap/ui/mdc/link/Factory\";\nimport LinkItem from \"sap/ui/mdc/link/LinkItem\";\nimport SemanticObjectMapping from \"sap/ui/mdc/link/SemanticObjectMapping\";\nimport SemanticObjectMappingItem from \"sap/ui/mdc/link/SemanticObjectMappingItem\";\nimport SemanticObjectUnavailableAction from \"sap/ui/mdc/link/SemanticObjectUnavailableAction\";\nimport LinkDelegate from \"sap/ui/mdc/LinkDelegate\";\nimport type Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nexport type RegisteredSemanticObjectMapping = { semanticObject: string; items: { key: string; value: string }[] };\ntype RegisteredSemanticObjectMappings = RegisteredSemanticObjectMapping[];\nexport type RegisteredPayload = {\n\tmainSemanticObject?: string;\n\tsemanticObjects: string[];\n\tsemanticObjectsResolved?: string[];\n\tsemanticObjectMappings: RegisteredSemanticObjectMappings;\n\tsemanticObjectUnavailableActions?: RegisteredSemanticObjectUnavailableActions;\n\tentityType?: string;\n\tdataField?: string;\n\tcontact?: string;\n\tnavigationPath?: string;\n\tpropertyPathLabel?: string;\n\thasQuickViewFacets?: string;\n};\n\nexport type RegisteredSemanticObjectUnavailableActions = {\n\tsemanticObject: string;\n\tactions: string[];\n}[];\n\nconst SimpleLinkDelegate = Object.assign({}, LinkDelegate) as any;\nconst CONSTANTS = {\n\tiLinksShownInPopup: 3,\n\tsapmLink: \"sap.m.Link\",\n\tsapuimdcLink: \"sap.ui.mdc.Link\",\n\tsapuimdclinkLinkItem: \"sap.ui.mdc.link.LinkItem\",\n\tsapmObjectIdentifier: \"sap.m.ObjectIdentifier\",\n\tsapmObjectStatus: \"sap.m.ObjectStatus\"\n};\nSimpleLinkDelegate.getConstants = function () {\n\treturn CONSTANTS;\n};\n/**\n * This will return an array of the SemanticObjects as strings given by the payload.\n *\n * @private\n * @param oPayload The payload defined by the application\n * @param oMetaModel The ODataMetaModel received from the Link\n * @returns The context pointing to the current EntityType.\n */\nSimpleLinkDelegate._getEntityType = function (oPayload: any, oMetaModel: ODataMetaModel) {\n\tif (oMetaModel) {\n\t\treturn oMetaModel.createBindingContext(oPayload.entityType);\n\t} else {\n\t\treturn undefined;\n\t}\n};\n/**\n * This will return an array of the SemanticObjects as strings given by the payload.\n *\n * @private\n * @param oPayload The payload defined by the application\n * @param oMetaModel The ODataMetaModel received from the Link\n * @returns A model containing the payload information\n */\nSimpleLinkDelegate._getSemanticsModel = function (oPayload: object, oMetaModel: object) {\n\tif (oMetaModel) {\n\t\treturn new JSONModel(oPayload);\n\t} else {\n\t\treturn undefined;\n\t}\n};\n/**\n * This will return an array of the SemanticObjects as strings given by the payload.\n *\n * @private\n * @param oPayload The payload defined by the application\n * @param oMetaModel The ODataMetaModel received from the Link\n * @returns An array containing SemanticObjects based of the payload\n */\nSimpleLinkDelegate._getDataField = function (oPayload: any, oMetaModel: ODataMetaModel) {\n\treturn oMetaModel.createBindingContext(oPayload.dataField);\n};\n/**\n * This will return an array of the SemanticObjects as strings given by the payload.\n *\n * @private\n * @param oPayload The payload defined by the application\n * @param oMetaModel The ODataMetaModel received from the Link\n * @returns Ancontaining SemanticObjects based of the payload\n */\nSimpleLinkDelegate._getContact = function (oPayload: any, oMetaModel: ODataMetaModel) {\n\treturn oMetaModel.createBindingContext(oPayload.contact);\n};\nSimpleLinkDelegate.fnTemplateFragment = function () {\n\tlet sFragmentName: string, titleLinkHref;\n\tconst oFragmentModel: any = {};\n\tlet oPayloadToUse;\n\n\t// payload has been modified by fetching Semantic Objects names with path\n\tif (this.resolvedpayload) {\n\t\toPayloadToUse = this.resolvedpayload;\n\t} else {\n\t\toPayloadToUse = this.payload;\n\t}\n\n\tif (oPayloadToUse && !oPayloadToUse.LinkId) {\n\t\toPayloadToUse.LinkId = this.oControl && this.oControl.isA(CONSTANTS.sapuimdcLink) ? this.oControl.getId() : undefined;\n\t}\n\n\tif (oPayloadToUse.LinkId) {\n\t\ttitleLinkHref = this.oControl.getModel(\"$sapuimdcLink\").getProperty(\"/titleLinkHref\");\n\t\toPayloadToUse.titlelink = titleLinkHref;\n\t}\n\n\tconst oSemanticsModel = this._getSemanticsModel(oPayloadToUse, this.oMetaModel);\n\tthis.semanticModel = oSemanticsModel;\n\n\tif (oPayloadToUse.entityType && this._getEntityType(oPayloadToUse, this.oMetaModel)) {\n\t\tsFragmentName = \"sap.fe.macros.quickView.fragments.EntityQuickView\";\n\t\toFragmentModel.bindingContexts = {\n\t\t\tentityType: this._getEntityType(oPayloadToUse, this.oMetaModel),\n\t\t\tsemantic: oSemanticsModel.createBindingContext(\"/\")\n\t\t};\n\t\toFragmentModel.models = {\n\t\t\tentityType: this.oMetaModel,\n\t\t\tsemantic: oSemanticsModel\n\t\t};\n\t} else if (oPayloadToUse.dataField && this._getDataField(oPayloadToUse, this.oMetaModel)) {\n\t\tsFragmentName = \"sap.fe.macros.quickView.fragments.DataFieldQuickView\";\n\t\toFragmentModel.bindingContexts = {\n\t\t\tdataField: this._getDataField(oPayloadToUse, this.oMetaModel),\n\t\t\tsemantic: oSemanticsModel.createBindingContext(\"/\")\n\t\t};\n\t\toFragmentModel.models = {\n\t\t\tdataField: this.oMetaModel,\n\t\t\tsemantic: oSemanticsModel\n\t\t};\n\t}\n\toFragmentModel.models.entitySet = this.oMetaModel;\n\toFragmentModel.models.metaModel = this.oMetaModel;\n\tif (this.oControl && this.oControl.getModel(\"viewData\")) {\n\t\toFragmentModel.models.viewData = this.oControl.getModel(\"viewData\");\n\t\toFragmentModel.bindingContexts.viewData = this.oControl.getModel(\"viewData\").createBindingContext(\"/\");\n\t}\n\n\tconst oFragment = XMLTemplateProcessor.loadTemplate(sFragmentName!, \"fragment\");\n\n\treturn Promise.resolve(XMLPreprocessor.process(oFragment, { name: sFragmentName! }, oFragmentModel))\n\t\t.then((_internalFragment: any) => {\n\t\t\treturn Fragment.load({\n\t\t\t\tdefinition: _internalFragment,\n\t\t\t\tcontroller: this\n\t\t\t});\n\t\t})\n\t\t.then((oPopoverContent: any) => {\n\t\t\tif (oPopoverContent) {\n\t\t\t\tif (oFragmentModel.models && oFragmentModel.models.semantic) {\n\t\t\t\t\toPopoverContent.setModel(oFragmentModel.models.semantic, \"semantic\");\n\t\t\t\t\toPopoverContent.setBindingContext(oFragmentModel.bindingContexts.semantic, \"semantic\");\n\t\t\t\t}\n\n\t\t\t\tif (oFragmentModel.bindingContexts && oFragmentModel.bindingContexts.entityType) {\n\t\t\t\t\toPopoverContent.setModel(oFragmentModel.models.entityType, \"entityType\");\n\t\t\t\t\toPopoverContent.setBindingContext(oFragmentModel.bindingContexts.entityType, \"entityType\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.resolvedpayload = undefined;\n\t\t\treturn oPopoverContent;\n\t\t});\n};\nSimpleLinkDelegate.fetchAdditionalContent = function (oPayLoad: any, oMdcLinkControl: any) {\n\tthis.oControl = oMdcLinkControl;\n\tconst aNavigateRegexpMatch = oPayLoad?.navigationPath?.match(/{(.*?)}/);\n\tconst oBindingContext =\n\t\taNavigateRegexpMatch && aNavigateRegexpMatch.length > 1 && aNavigateRegexpMatch[1]\n\t\t\t? oMdcLinkControl.getModel().bindContext(aNavigateRegexpMatch[1], oMdcLinkControl.getBindingContext(), { $$ownRequest: true })\n\t\t\t: null;\n\tthis.payload = oPayLoad;\n\tif (oMdcLinkControl && oMdcLinkControl.isA(CONSTANTS.sapuimdcLink)) {\n\t\tthis.oMetaModel = oMdcLinkControl.getModel().getMetaModel();\n\t\treturn this.fnTemplateFragment().then(function (oPopoverContent: any) {\n\t\t\tif (oBindingContext) {\n\t\t\t\toPopoverContent.setBindingContext(oBindingContext.getBoundContext());\n\t\t\t}\n\t\t\treturn [oPopoverContent];\n\t\t});\n\t}\n\treturn Promise.resolve([]);\n};\nSimpleLinkDelegate._fetchLinkCustomData = function (_oLink: any) {\n\tif (\n\t\t_oLink.getParent() &&\n\t\t_oLink.isA(CONSTANTS.sapuimdcLink) &&\n\t\t(_oLink.getParent().isA(CONSTANTS.sapmLink) ||\n\t\t\t_oLink.getParent().isA(CONSTANTS.sapmObjectIdentifier) ||\n\t\t\t_oLink.getParent().isA(CONSTANTS.sapmObjectStatus))\n\t) {\n\t\treturn _oLink.getCustomData();\n\t} else {\n\t\treturn undefined;\n\t}\n};\n/**\n * Fetches the relevant {@link sap.ui.mdc.link.LinkItem} for the Link and returns them.\n *\n * @public\n * @param oPayload The Payload of the Link given by the application\n * @param oBindingContext The ContextObject of the Link\n * @param oInfoLog The InfoLog of the Link\n * @returns Once resolved an array of {@link sap.ui.mdc.link.LinkItem} is returned\n */\nSimpleLinkDelegate.fetchLinkItems = function (oPayload: any, oBindingContext: Context, oInfoLog: any) {\n\tif (oBindingContext && SimpleLinkDelegate._getSemanticObjects(oPayload)) {\n\t\tconst oContextObject = oBindingContext.getObject();\n\t\tif (oInfoLog) {\n\t\t\toInfoLog.initialize(SimpleLinkDelegate._getSemanticObjects(oPayload));\n\t\t}\n\t\tconst _oLinkCustomData = this._link && this._fetchLinkCustomData(this._link);\n\t\tthis.aLinkCustomData =\n\t\t\t_oLinkCustomData &&\n\t\t\tthis._fetchLinkCustomData(this._link).map(function (linkItem: any) {\n\t\t\t\treturn linkItem.mProperties.value;\n\t\t\t});\n\n\t\tconst oSemanticAttributesResolved = SimpleLinkDelegate._calculateSemanticAttributes(oContextObject, oPayload, oInfoLog, this._link);\n\t\tconst oSemanticAttributes = oSemanticAttributesResolved.results;\n\t\tconst oPayloadResolved = oSemanticAttributesResolved.payload;\n\n\t\treturn SimpleLinkDelegate._retrieveNavigationTargets(\"\", oSemanticAttributes, oPayloadResolved, oInfoLog, this._link).then(\n\t\t\tfunction (aLinks: any /*oOwnNavigationLink: any*/) {\n\t\t\t\treturn aLinks.length === 0 ? null : aLinks;\n\t\t\t}\n\t\t);\n\t} else {\n\t\treturn Promise.resolve(null);\n\t}\n};\n\n/**\n * Find the type of the link.\n *\n * @param payload The payload of the mdc link.\n * @param aLinkItems Links returned by call to mdc _retrieveUnmodifiedLinkItems.\n * @returns The type of the link as defined by mdc.\n */\nSimpleLinkDelegate._findLinkType = function (payload: any, aLinkItems: any[]): any {\n\tlet nLinkType, oLinkItem;\n\tif (aLinkItems?.length === 1) {\n\t\toLinkItem = new LinkItem({\n\t\t\ttext: aLinkItems[0].getText(),\n\t\t\thref: aLinkItems[0].getHref()\n\t\t});\n\t\tnLinkType = payload.hasQuickViewFacets === \"false\" ? 1 : 2;\n\t} else if (payload.hasQuickViewFacets === \"false\" && aLinkItems?.length === 0) {\n\t\tnLinkType = 0;\n\t} else {\n\t\tnLinkType = 2;\n\t}\n\treturn {\n\t\tlinkType: nLinkType,\n\t\tlinkItem: oLinkItem\n\t};\n};\nSimpleLinkDelegate.fetchLinkType = async function (oPayload: any, oLink: any) {\n\tconst _oCurrentLink = oLink;\n\tconst _oPayload = Object.assign({}, oPayload);\n\tconst oDefaultInitialType = {\n\t\tinitialType: {\n\t\t\ttype: 2,\n\t\t\tdirectLink: undefined\n\t\t},\n\t\truntimeType: undefined\n\t};\n\t// clean appStateKeyMap storage\n\tif (!this.appStateKeyMap) {\n\t\tthis.appStateKeyMap = {};\n\t}\n\n\ttry {\n\t\tif (_oPayload?.semanticObjects) {\n\t\t\tthis._link = oLink;\n\t\t\tlet aLinkItems = await _oCurrentLink._retrieveUnmodifiedLinkItems();\n\t\t\tif (aLinkItems.length === 1) {\n\t\t\t\t// This is the direct navigation use case so we need to perform the appropriate checks / transformations\n\t\t\t\taLinkItems = await _oCurrentLink.retrieveLinkItems();\n\t\t\t}\n\t\t\tconst _LinkType = SimpleLinkDelegate._findLinkType(_oPayload, aLinkItems);\n\t\t\treturn {\n\t\t\t\tinitialType: {\n\t\t\t\t\ttype: _LinkType.linkType,\n\t\t\t\t\tdirectLink: _LinkType.linkItem ? _LinkType.linkItem : undefined\n\t\t\t\t},\n\t\t\t\truntimeType: undefined\n\t\t\t};\n\t\t} else if (_oPayload?.contact?.length > 0) {\n\t\t\treturn oDefaultInitialType;\n\t\t} else if (_oPayload?.entityType && _oPayload?.navigationPath) {\n\t\t\treturn oDefaultInitialType;\n\t\t}\n\t\tthrow new Error(\"no payload or semanticObjects found\");\n\t} catch (oError: any) {\n\t\tLog.error(\"Error in SimpleLinkDelegate.fetchLinkType: \", oError);\n\t}\n};\n\nSimpleLinkDelegate._RemoveTitleLinkFromTargets = function (_aLinkItems: any[], _bTitleHasLink: boolean, _aTitleLink: any): any {\n\tlet _sTitleLinkHref, _oMDCLink;\n\tlet bResult: boolean = false;\n\tif (_bTitleHasLink && _aTitleLink && _aTitleLink[0]) {\n\t\tlet linkIsPrimaryAction: boolean, _sLinkIntentWithoutParameters: string;\n\t\tconst _sTitleIntent = _aTitleLink[0].intent.split(\"?\")[0];\n\t\tif (_aLinkItems && _aLinkItems[0]) {\n\t\t\t_sLinkIntentWithoutParameters = `#${_aLinkItems[0].getProperty(\"key\")}`;\n\t\t\tlinkIsPrimaryAction = _sTitleIntent === _sLinkIntentWithoutParameters;\n\t\t\tif (linkIsPrimaryAction) {\n\t\t\t\t_sTitleLinkHref = _aLinkItems[0].getProperty(\"href\");\n\t\t\t\tthis.payload.titlelinkhref = _sTitleLinkHref;\n\t\t\t\tif (_aLinkItems[0].isA(CONSTANTS.sapuimdclinkLinkItem)) {\n\t\t\t\t\t_oMDCLink = _aLinkItems[0].getParent();\n\t\t\t\t\t_oMDCLink.getModel(\"$sapuimdcLink\").setProperty(\"/titleLinkHref\", _sTitleLinkHref);\n\t\t\t\t\tconst aMLinkItems = _oMDCLink\n\t\t\t\t\t\t.getModel(\"$sapuimdcLink\")\n\t\t\t\t\t\t.getProperty(\"/linkItems\")\n\t\t\t\t\t\t.filter(function (oLinkItem: any) {\n\t\t\t\t\t\t\tif (`#${oLinkItem.key}` !== _sLinkIntentWithoutParameters) {\n\t\t\t\t\t\t\t\treturn oLinkItem;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\tif (aMLinkItems && aMLinkItems.length > 0) {\n\t\t\t\t\t\t_oMDCLink.getModel(\"$sapuimdcLink\").setProperty(\"/linkItems/\", aMLinkItems);\n\t\t\t\t\t}\n\t\t\t\t\tbResult = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn bResult;\n};\nSimpleLinkDelegate._IsSemanticObjectDynamic = function (aNewLinkCustomData: any, oThis: any) {\n\tif (aNewLinkCustomData && oThis.aLinkCustomData) {\n\t\treturn (\n\t\t\toThis.aLinkCustomData.filter(function (link: any) {\n\t\t\t\treturn (\n\t\t\t\t\taNewLinkCustomData.filter(function (otherLink: any) {\n\t\t\t\t\t\treturn otherLink !== link;\n\t\t\t\t\t}).length > 0\n\t\t\t\t);\n\t\t\t}).length > 0\n\t\t);\n\t} else {\n\t\treturn false;\n\t}\n};\nSimpleLinkDelegate._getLineContext = function (oView: any, mLineContext: any) {\n\tif (!mLineContext) {\n\t\tif (oView.getAggregation(\"content\")[0] && oView.getAggregation(\"content\")[0].getBindingContext()) {\n\t\t\treturn oView.getAggregation(\"content\")[0].getBindingContext();\n\t\t}\n\t}\n\treturn mLineContext;\n};\nSimpleLinkDelegate._setFilterContextUrlForSelectionVariant = function (\n\toView: any,\n\toSelectionVariant: SelectionVariant,\n\toNavigationService: any\n): SelectionVariant {\n\tif (oView.getViewData().entitySet && oSelectionVariant) {\n\t\tconst sContextUrl = oNavigationService.constructContextUrl(oView.getViewData().entitySet, oView.getModel());\n\t\toSelectionVariant.setFilterContextUrl(sContextUrl);\n\t}\n\treturn oSelectionVariant;\n};\n\nSimpleLinkDelegate._setObjectMappings = function (\n\tsSemanticObject: string,\n\toParams: any,\n\taSemanticObjectMappings: RegisteredSemanticObjectMappings,\n\toSelectionVariant: SelectionVariant\n) {\n\tlet hasChanged = false;\n\tconst modifiedSelectionVariant = new SelectionVariant(oSelectionVariant.toJSONObject());\n\t// if semanticObjectMappings has items with dynamic semanticObjects we need to resolve them using oParams\n\taSemanticObjectMappings.forEach(function (mapping) {\n\t\tlet mappingSemanticObject = mapping.semanticObject;\n\t\tconst mappingSemanticObjectPath = getDynamicPathFromSemanticObject(mapping.semanticObject);\n\t\tif (mappingSemanticObjectPath && oParams[mappingSemanticObjectPath]) {\n\t\t\tmappingSemanticObject = oParams[mappingSemanticObjectPath];\n\t\t}\n\t\tif (sSemanticObject === mappingSemanticObject) {\n\t\t\tconst oMappings = mapping.items;\n\t\t\tfor (const i in oMappings) {\n\t\t\t\tconst sLocalProperty = oMappings[i].key;\n\t\t\t\tconst sSemanticObjectProperty = oMappings[i].value;\n\t\t\t\tif (sLocalProperty !== sSemanticObjectProperty) {\n\t\t\t\t\tif (oParams[sLocalProperty]) {\n\t\t\t\t\t\tmodifiedSelectionVariant.removeParameter(sSemanticObjectProperty);\n\t\t\t\t\t\tmodifiedSelectionVariant.removeSelectOption(sSemanticObjectProperty);\n\t\t\t\t\t\tmodifiedSelectionVariant.renameParameter(sLocalProperty, sSemanticObjectProperty);\n\t\t\t\t\t\tmodifiedSelectionVariant.renameSelectOption(sLocalProperty, sSemanticObjectProperty);\n\t\t\t\t\t\toParams[sSemanticObjectProperty] = oParams[sLocalProperty];\n\t\t\t\t\t\tdelete oParams[sLocalProperty];\n\t\t\t\t\t\thasChanged = true;\n\t\t\t\t\t}\n\t\t\t\t\t// We remove the parameter as there is no value\n\n\t\t\t\t\t// The local property comes from a navigation property\n\t\t\t\t\telse if (sLocalProperty.split(\"/\").length > 1) {\n\t\t\t\t\t\t// find the property to be removed\n\t\t\t\t\t\tconst propertyToBeRemoved = sLocalProperty.split(\"/\").slice(-1)[0];\n\t\t\t\t\t\t// The navigation property has no value\n\t\t\t\t\t\tif (!oParams[propertyToBeRemoved]) {\n\t\t\t\t\t\t\tdelete oParams[propertyToBeRemoved];\n\t\t\t\t\t\t\tmodifiedSelectionVariant.removeParameter(propertyToBeRemoved);\n\t\t\t\t\t\t\tmodifiedSelectionVariant.removeSelectOption(propertyToBeRemoved);\n\t\t\t\t\t\t} else if (propertyToBeRemoved !== sSemanticObjectProperty) {\n\t\t\t\t\t\t\t// The navigation property has a value and properties names are different\n\t\t\t\t\t\t\tmodifiedSelectionVariant.renameParameter(propertyToBeRemoved, sSemanticObjectProperty);\n\t\t\t\t\t\t\tmodifiedSelectionVariant.renameSelectOption(propertyToBeRemoved, sSemanticObjectProperty);\n\t\t\t\t\t\t\toParams[sSemanticObjectProperty] = oParams[propertyToBeRemoved];\n\t\t\t\t\t\t\tdelete oParams[propertyToBeRemoved];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete oParams[sLocalProperty];\n\t\t\t\t\t\tmodifiedSelectionVariant.removeParameter(sSemanticObjectProperty);\n\t\t\t\t\t\tmodifiedSelectionVariant.removeSelectOption(sSemanticObjectProperty);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { params: oParams, hasChanged, selectionVariant: modifiedSelectionVariant };\n};\n\n/**\n * Call getAppStateKeyAndUrlParameters in navigation service and cache its results.\n *\n * @param _this The instance of quickviewdelegate.\n * @param navigationService The navigation service.\n * @param selectionVariant The current selection variant.\n * @param semanticObject The current semanticObject.\n */\nSimpleLinkDelegate._getAppStateKeyAndUrlParameters = async function (\n\t_this: typeof SimpleLinkDelegate,\n\tnavigationService: any,\n\tselectionVariant: SelectionVariant,\n\tsemanticObject: string\n): Promise<string[]> {\n\tlet aValues = [];\n\n\t// check if default cache contains already the unmodified selectionVariant\n\tif (deepEqual(selectionVariant, _this.appStateKeyMap[\"\"]?.selectionVariant)) {\n\t\tconst defaultCache = _this.appStateKeyMap[\"\"];\n\t\treturn [defaultCache.semanticAttributes, defaultCache.appstatekey];\n\t}\n\t// update url parameters because there is a change in selection variant\n\tif (\n\t\t_this.appStateKeyMap[`${semanticObject}`] === undefined ||\n\t\t!deepEqual(_this.appStateKeyMap[`${semanticObject}`].selectionVariant, selectionVariant)\n\t) {\n\t\taValues = await toES6Promise(navigationService.getAppStateKeyAndUrlParameters(selectionVariant.toJSONString()));\n\t\t_this.appStateKeyMap[`${semanticObject}`] = {\n\t\t\tsemanticAttributes: aValues[0],\n\t\t\tappstatekey: aValues[1],\n\t\t\tselectionVariant: selectionVariant\n\t\t};\n\t} else {\n\t\tconst cache = _this.appStateKeyMap[`${semanticObject}`];\n\t\taValues = [cache.semanticAttributes, cache.appstatekey];\n\t}\n\treturn aValues;\n};\n\nSimpleLinkDelegate._getLinkItemWithNewParameter = async function (\n\t_that: any,\n\t_bTitleHasLink: boolean,\n\t_aTitleLink: string[],\n\t_oLinkItem: any,\n\t_oShellServices: any,\n\t_oPayload: any,\n\t_oParams: any,\n\t_sAppStateKey: string,\n\t_oSelectionVariant: SelectionVariant,\n\t_oNavigationService: NavigationService\n): Promise<any> {\n\treturn _oShellServices.expandCompactHash(_oLinkItem.getHref()).then(async function (sHash: any) {\n\t\tconst oShellHash = _oShellServices.parseShellHash(sHash);\n\t\tconst params = Object.assign({}, _oParams);\n\t\tconst {\n\t\t\tparams: oNewParams,\n\t\t\thasChanged,\n\t\t\tselectionVariant: newSelectionVariant\n\t\t} = SimpleLinkDelegate._setObjectMappings(oShellHash.semanticObject, params, _oPayload.semanticObjectMappings, _oSelectionVariant);\n\t\tif (hasChanged) {\n\t\t\tconst aValues = await SimpleLinkDelegate._getAppStateKeyAndUrlParameters(\n\t\t\t\t_that,\n\t\t\t\t_oNavigationService,\n\t\t\t\tnewSelectionVariant,\n\t\t\t\toShellHash.semanticObject\n\t\t\t);\n\n\t\t\t_sAppStateKey = aValues[1];\n\t\t}\n\t\tconst oNewShellHash = {\n\t\t\ttarget: {\n\t\t\t\tsemanticObject: oShellHash.semanticObject,\n\t\t\t\taction: oShellHash.action\n\t\t\t},\n\t\t\tparams: oNewParams,\n\t\t\tappStateKey: _sAppStateKey\n\t\t};\n\t\tdelete oNewShellHash.params[\"sap-xapp-state\"];\n\t\t_oLinkItem.setHref(`#${_oShellServices.constructShellHash(oNewShellHash)}`);\n\t\t_oPayload.aSemanticLinks.push(_oLinkItem.getHref());\n\t\t// The link is removed from the target list because the title link has same target.\n\t\treturn SimpleLinkDelegate._RemoveTitleLinkFromTargets.bind(_that)([_oLinkItem], _bTitleHasLink, _aTitleLink);\n\t});\n};\nSimpleLinkDelegate._removeEmptyLinkItem = function (aLinkItems: any): any[] {\n\treturn aLinkItems.filter((linkItem: any) => {\n\t\treturn linkItem !== undefined;\n\t});\n};\n/**\n * Enables the modification of LinkItems before the popover opens. This enables additional parameters\n * to be added to the link.\n *\n * @param oPayload The payload of the Link given by the application\n * @param oBindingContext The binding context of the Link\n * @param aLinkItems The LinkItems of the Link that can be modified\n * @returns Once resolved an array of {@link sap.ui.mdc.link.LinkItem} is returned\n */\nSimpleLinkDelegate.modifyLinkItems = async function (oPayload: any, oBindingContext: Context, aLinkItems: any) {\n\tif (aLinkItems.length !== 0) {\n\t\tthis.payload = oPayload;\n\t\tconst oLink = aLinkItems[0].getParent();\n\t\tconst oView = CommonUtils.getTargetView(oLink);\n\t\tconst oAppComponent = CommonUtils.getAppComponent(oView);\n\t\tconst primaryActionIsActive = (await FieldHelper.checkPrimaryActions(oPayload, true, oAppComponent)) as any;\n\t\tconst aTitleLink = primaryActionIsActive.titleLink;\n\t\tconst bTitleHasLink: boolean = primaryActionIsActive.hasTitleLink;\n\t\tconst oShellServices = oAppComponent.getShellServices();\n\t\tif (!oShellServices.hasUShell()) {\n\t\t\tLog.error(\"QuickViewDelegate: Cannot retrieve the shell services\");\n\t\t\treturn Promise.reject();\n\t\t}\n\t\tconst oMetaModel = oView.getModel().getMetaModel() as ODataMetaModel;\n\t\tlet mLineContext = oLink.getBindingContext();\n\t\tconst oTargetInfo: any = {\n\t\t\tsemanticObject: oPayload.mainSemanticObject,\n\t\t\taction: \"\"\n\t\t};\n\n\t\ttry {\n\t\t\tconst aNewLinkCustomData =\n\t\t\t\toLink &&\n\t\t\t\tthis._fetchLinkCustomData(oLink).map(function (linkItem: any) {\n\t\t\t\t\treturn linkItem.mProperties.value;\n\t\t\t\t});\n\t\t\t// check if all link items in this.aLinkCustomData are also present in aNewLinkCustomData\n\t\t\tif (SimpleLinkDelegate._IsSemanticObjectDynamic(aNewLinkCustomData, this)) {\n\t\t\t\t// if the customData changed there are different LinkItems to display\n\t\t\t\tconst oSemanticAttributesResolved = SimpleLinkDelegate._calculateSemanticAttributes(\n\t\t\t\t\toBindingContext.getObject(),\n\t\t\t\t\toPayload,\n\t\t\t\t\tundefined,\n\t\t\t\t\tthis._link\n\t\t\t\t);\n\t\t\t\tconst oSemanticAttributes = oSemanticAttributesResolved.results;\n\t\t\t\tconst oPayloadResolved = oSemanticAttributesResolved.payload;\n\t\t\t\taLinkItems = await SimpleLinkDelegate._retrieveNavigationTargets(\n\t\t\t\t\t\"\",\n\t\t\t\t\toSemanticAttributes,\n\t\t\t\t\toPayloadResolved,\n\t\t\t\t\tundefined,\n\t\t\t\t\tthis._link\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst oNavigationService = oAppComponent.getNavigationService();\n\t\t\tconst oController = oView.getController() as PageController;\n\t\t\tlet oSelectionVariant;\n\t\t\tlet mLineContextData;\n\t\t\tmLineContext = SimpleLinkDelegate._getLineContext(oView, mLineContext);\n\t\t\tconst sMetaPath = oMetaModel.getMetaPath(mLineContext.getPath());\n\t\t\tmLineContextData = oController._intentBasedNavigation.removeSensitiveData(mLineContext.getObject(), sMetaPath);\n\t\t\tmLineContextData = oController._intentBasedNavigation.prepareContextForExternalNavigation(mLineContextData, mLineContext);\n\t\t\toSelectionVariant = oNavigationService.mixAttributesAndSelectionVariant(mLineContextData.semanticAttributes, {});\n\t\t\toTargetInfo.propertiesWithoutConflict = mLineContextData.propertiesWithoutConflict;\n\t\t\t//TO modify the selection variant from the Extension API\n\t\t\toController.intentBasedNavigation.adaptNavigationContext(oSelectionVariant, oTargetInfo);\n\t\t\tSimpleLinkDelegate._removeTechnicalParameters(oSelectionVariant);\n\t\t\toSelectionVariant = SimpleLinkDelegate._setFilterContextUrlForSelectionVariant(oView, oSelectionVariant, oNavigationService);\n\t\t\tconst aValues = await SimpleLinkDelegate._getAppStateKeyAndUrlParameters(this, oNavigationService, oSelectionVariant, \"\");\n\t\t\tconst oParams = aValues[0];\n\t\t\tconst appStateKey = aValues[1];\n\t\t\tlet titleLinktoBeRemove: any;\n\t\t\toPayload.aSemanticLinks = [];\n\t\t\taLinkItems = SimpleLinkDelegate._removeEmptyLinkItem(aLinkItems);\n\t\t\tfor (const index in aLinkItems) {\n\t\t\t\ttitleLinktoBeRemove = await SimpleLinkDelegate._getLinkItemWithNewParameter(\n\t\t\t\t\tthis,\n\t\t\t\t\tbTitleHasLink,\n\t\t\t\t\taTitleLink,\n\t\t\t\t\taLinkItems[index],\n\t\t\t\t\toShellServices,\n\t\t\t\t\toPayload,\n\t\t\t\t\toParams,\n\t\t\t\t\tappStateKey,\n\t\t\t\t\toSelectionVariant,\n\t\t\t\t\toNavigationService\n\t\t\t\t);\n\t\t\t\t// Do not remove the link if there is only one direct target application\n\t\t\t\tif (titleLinktoBeRemove === true && aLinkItems.length > 1) {\n\t\t\t\t\taLinkItems[index] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn SimpleLinkDelegate._removeEmptyLinkItem(aLinkItems);\n\t\t} catch (oError: any) {\n\t\t\tLog.error(\"Error while getting the navigation service\", oError);\n\t\t\treturn undefined;\n\t\t}\n\t} else {\n\t\treturn aLinkItems;\n\t}\n};\nSimpleLinkDelegate.beforeNavigationCallback = function (oPayload: any, oEvent: any) {\n\tconst oSource = oEvent.getSource(),\n\t\tsHref = oEvent.getParameter(\"href\"),\n\t\toURLParsing = Factory.getService(\"URLParsing\"),\n\t\toHash = sHref && oURLParsing.parseShellHash(sHref);\n\n\tKeepAliveHelper.storeControlRefreshStrategyForHash(oSource, oHash);\n\n\treturn Promise.resolve(true);\n};\nSimpleLinkDelegate._removeTechnicalParameters = function (oSelectionVariant: any) {\n\toSelectionVariant.removeSelectOption(\"@odata.context\");\n\toSelectionVariant.removeSelectOption(\"@odata.metadataEtag\");\n\toSelectionVariant.removeSelectOption(\"SAP__Messages\");\n};\n\nSimpleLinkDelegate._getSemanticObjectCustomDataValue = function (aLinkCustomData: any, oSemanticObjectsResolved: any): void {\n\tlet sPropertyName: string, sCustomDataValue: string;\n\tfor (let iCustomDataCount = 0; iCustomDataCount < aLinkCustomData.length; iCustomDataCount++) {\n\t\tsPropertyName = aLinkCustomData[iCustomDataCount].getKey();\n\t\tsCustomDataValue = aLinkCustomData[iCustomDataCount].getValue();\n\t\toSemanticObjectsResolved[sPropertyName] = { value: sCustomDataValue };\n\t}\n};\n\n/**\n * Check the semantic object name if it is dynamic or not.\n *\n * @private\n * @param pathOrValue The semantic object path or name\n * @returns True if semantic object is dynamic\n */\nSimpleLinkDelegate._isDynamicPath = function (pathOrValue: string): boolean {\n\tif (pathOrValue && pathOrValue.indexOf(\"{\") === 0 && pathOrValue.indexOf(\"}\") === pathOrValue.length - 1) {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\n/**\n * Update the payload with semantic object values from custom data of Link.\n *\n * @private\n * @param payload The payload of the mdc link.\n * @param newPayload The new updated payload.\n * @param semanticObjectName The semantic object name resolved.\n */\nSimpleLinkDelegate._updatePayloadWithResolvedSemanticObjectValue = function (\n\tpayload: RegisteredPayload,\n\tnewPayload: RegisteredPayload,\n\tsemanticObjectName: string\n): void {\n\tif (SimpleLinkDelegate._isDynamicPath(payload.mainSemanticObject)) {\n\t\tif (semanticObjectName) {\n\t\t\tnewPayload.mainSemanticObject = semanticObjectName;\n\t\t} else {\n\t\t\t// no value from Custom Data, so removing mainSemanticObject\n\t\t\tnewPayload.mainSemanticObject = undefined;\n\t\t}\n\t}\n\tswitch (typeof semanticObjectName) {\n\t\tcase \"string\":\n\t\t\tnewPayload.semanticObjectsResolved?.push(semanticObjectName);\n\t\t\tnewPayload.semanticObjects.push(semanticObjectName);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tfor (const j in semanticObjectName as string[]) {\n\t\t\t\tnewPayload.semanticObjectsResolved?.push(semanticObjectName[j]);\n\t\t\t\tnewPayload.semanticObjects.push(semanticObjectName[j]);\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t}\n};\n\nSimpleLinkDelegate._createNewPayloadWithDynamicSemanticObjectsResolved = function (\n\tpayload: RegisteredPayload,\n\tsemanticObjectsResolved: any,\n\tnewPayload: RegisteredPayload\n): void {\n\tlet semanticObjectName: string, tmpPropertyName: string;\n\tfor (const i in payload.semanticObjects) {\n\t\tsemanticObjectName = payload.semanticObjects[i];\n\t\tif (SimpleLinkDelegate._isDynamicPath(semanticObjectName)) {\n\t\t\ttmpPropertyName = semanticObjectName.substr(1, semanticObjectName.indexOf(\"}\") - 1);\n\t\t\tsemanticObjectName = semanticObjectsResolved[tmpPropertyName].value;\n\t\t\tSimpleLinkDelegate._updatePayloadWithResolvedSemanticObjectValue(payload, newPayload, semanticObjectName);\n\t\t} else {\n\t\t\tnewPayload.semanticObjects.push(semanticObjectName);\n\t\t}\n\t}\n};\n\n/**\n * Update the semantic object name from the resolved value for the mappings attributes.\n *\n * @private\n * @param mdcPayload The payload given by the application.\n * @param mdcPayloadWithDynamicSemanticObjectsResolved The payload with the resolved value for the semantic object name.\n * @param newPayload The new updated payload.\n */\nSimpleLinkDelegate._updateSemanticObjectsForMappings = function (\n\tmdcPayload: RegisteredPayload,\n\tmdcPayloadWithDynamicSemanticObjectsResolved: RegisteredPayload,\n\tnewPayload: RegisteredPayload\n): void {\n\t// update the semantic object name from the resolved ones in the semantic object mappings.\n\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjectMappings.forEach(function (\n\t\tsemanticObjectMapping: RegisteredSemanticObjectMapping\n\t) {\n\t\tif (semanticObjectMapping.semanticObject && SimpleLinkDelegate._isDynamicPath(semanticObjectMapping.semanticObject)) {\n\t\t\tsemanticObjectMapping.semanticObject =\n\t\t\t\tnewPayload.semanticObjects[mdcPayload.semanticObjects.indexOf(semanticObjectMapping.semanticObject)];\n\t\t}\n\t});\n};\n\n/**\n * Update the semantic object name from the resolved value for the unavailable actions.\n *\n * @private\n * @param mdcPayload The payload given by the application.\n * @param mdcPayloadSemanticObjectUnavailableActions The unavailable actions given by the application.\n * @param mdcPayloadWithDynamicSemanticObjectsResolved The updated payload with the resolved value for the semantic object name for the unavailable actions.\n */\nSimpleLinkDelegate._updateSemanticObjectsUnavailableActions = function (\n\tmdcPayload: RegisteredPayload,\n\tmdcPayloadSemanticObjectUnavailableActions: RegisteredSemanticObjectUnavailableActions,\n\tmdcPayloadWithDynamicSemanticObjectsResolved: RegisteredPayload\n): void {\n\tlet _Index: any;\n\tmdcPayloadSemanticObjectUnavailableActions.forEach(function (semanticObjectUnavailableAction: any) {\n\t\t// Dynamic SemanticObject has an unavailable action\n\t\tif (\n\t\t\tsemanticObjectUnavailableAction?.semanticObject &&\n\t\t\tSimpleLinkDelegate._isDynamicPath(semanticObjectUnavailableAction.semanticObject)\n\t\t) {\n\t\t\t_Index = mdcPayload.semanticObjects.findIndex(function (semanticObject: string) {\n\t\t\t\treturn semanticObject === semanticObjectUnavailableAction.semanticObject;\n\t\t\t});\n\t\t\tif (_Index !== undefined) {\n\t\t\t\t// Get the SemanticObject name resolved to a value\n\t\t\t\tsemanticObjectUnavailableAction.semanticObject = mdcPayloadWithDynamicSemanticObjectsResolved.semanticObjects[_Index];\n\t\t\t}\n\t\t}\n\t});\n};\n\n/**\n * Update the semantic object name from the resolved value for the unavailable actions.\n *\n * @private\n * @param mdcPayload The updated payload with the information from custom data provided in the link.\n * @param mdcPayloadWithDynamicSemanticObjectsResolved The payload updated with resolved semantic objects names.\n */\nSimpleLinkDelegate._updateSemanticObjectsWithResolvedValue = function (\n\tmdcPayload: RegisteredPayload,\n\tmdcPayloadWithDynamicSemanticObjectsResolved: RegisteredPayload\n): void {\n\tfor (let newSemanticObjectsCount = 0; newSemanticObjectsCount < mdcPayload.semanticObjects.length; newSemanticObjectsCount++) {\n\t\tif (\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.mainSemanticObject ===\n\t\t\t(mdcPayload.semanticObjectsResolved && mdcPayload.semanticObjectsResolved[newSemanticObjectsCount])\n\t\t) {\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.mainSemanticObject = mdcPayload.semanticObjects[newSemanticObjectsCount];\n\t\t}\n\t\tif (mdcPayloadWithDynamicSemanticObjectsResolved.semanticObjects[newSemanticObjectsCount]) {\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjects[newSemanticObjectsCount] =\n\t\t\t\tmdcPayload.semanticObjects[newSemanticObjectsCount];\n\t\t} else {\n\t\t\t// no Custom Data value for a Semantic Object name with path\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjects.splice(newSemanticObjectsCount, 1);\n\t\t}\n\t}\n};\n\n/**\n * Remove empty semantic object mappings and if there is no semantic object name, link to it.\n *\n * @private\n * @param mdcPayloadWithDynamicSemanticObjectsResolved The payload used to check the mappings of the semantic objects.\n */\nSimpleLinkDelegate._removeEmptySemanticObjectsMappings = function (mdcPayloadWithDynamicSemanticObjectsResolved: RegisteredPayload): void {\n\t// remove undefined Semantic Object Mapping\n\tfor (\n\t\tlet mappingsCount = 0;\n\t\tmappingsCount < mdcPayloadWithDynamicSemanticObjectsResolved.semanticObjectMappings.length;\n\t\tmappingsCount++\n\t) {\n\t\tif (\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjectMappings[mappingsCount] &&\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjectMappings[mappingsCount].semanticObject === undefined\n\t\t) {\n\t\t\tmdcPayloadWithDynamicSemanticObjectsResolved.semanticObjectMappings.splice(mappingsCount, 1);\n\t\t}\n\t}\n};\n\nSimpleLinkDelegate._setPayloadWithDynamicSemanticObjectsResolved = function (\n\tpayload: any,\n\tnewPayload: RegisteredPayload\n): RegisteredPayload {\n\tlet oPayloadWithDynamicSemanticObjectsResolved: RegisteredPayload;\n\tif (newPayload.semanticObjectsResolved && newPayload.semanticObjectsResolved.length > 0) {\n\t\toPayloadWithDynamicSemanticObjectsResolved = {\n\t\t\tentityType: payload.entityType,\n\t\t\tdataField: payload.dataField,\n\t\t\tcontact: payload.contact,\n\t\t\tmainSemanticObject: payload.mainSemanticObject,\n\t\t\tnavigationPath: payload.navigationPath,\n\t\t\tpropertyPathLabel: payload.propertyPathLabel,\n\t\t\tsemanticObjectMappings: deepClone(payload.semanticObjectMappings),\n\t\t\tsemanticObjects: newPayload.semanticObjects\n\t\t};\n\t\tSimpleLinkDelegate._updateSemanticObjectsForMappings(payload, oPayloadWithDynamicSemanticObjectsResolved, newPayload);\n\t\tconst _SemanticObjectUnavailableActions: RegisteredSemanticObjectUnavailableActions = deepClone(\n\t\t\tpayload.semanticObjectUnavailableActions\n\t\t);\n\t\tSimpleLinkDelegate._updateSemanticObjectsUnavailableActions(\n\t\t\tpayload,\n\t\t\t_SemanticObjectUnavailableActions,\n\t\t\toPayloadWithDynamicSemanticObjectsResolved\n\t\t);\n\t\toPayloadWithDynamicSemanticObjectsResolved.semanticObjectUnavailableActions = _SemanticObjectUnavailableActions;\n\t\tif (newPayload.mainSemanticObject) {\n\t\t\toPayloadWithDynamicSemanticObjectsResolved.mainSemanticObject = newPayload.mainSemanticObject;\n\t\t} else {\n\t\t\toPayloadWithDynamicSemanticObjectsResolved.mainSemanticObject = undefined;\n\t\t}\n\t\tSimpleLinkDelegate._updateSemanticObjectsWithResolvedValue(newPayload, oPayloadWithDynamicSemanticObjectsResolved);\n\t\tSimpleLinkDelegate._removeEmptySemanticObjectsMappings(oPayloadWithDynamicSemanticObjectsResolved);\n\t\treturn oPayloadWithDynamicSemanticObjectsResolved;\n\t} else {\n\t\treturn {} as any;\n\t}\n};\n\nSimpleLinkDelegate._getPayloadWithDynamicSemanticObjectsResolved = function (payload: any, linkCustomData: any): any {\n\tlet oPayloadWithDynamicSemanticObjectsResolved: any;\n\tconst oSemanticObjectsResolved: any = {};\n\tconst newPayload: RegisteredPayload = { semanticObjects: [], semanticObjectsResolved: [], semanticObjectMappings: [] };\n\tif (payload.semanticObjects) {\n\t\t// sap.m.Link has custom data with Semantic Objects names resolved\n\t\tif (linkCustomData && linkCustomData.length > 0) {\n\t\t\tSimpleLinkDelegate._getSemanticObjectCustomDataValue(linkCustomData, oSemanticObjectsResolved);\n\t\t\tSimpleLinkDelegate._createNewPayloadWithDynamicSemanticObjectsResolved(payload, oSemanticObjectsResolved, newPayload);\n\t\t\toPayloadWithDynamicSemanticObjectsResolved = SimpleLinkDelegate._setPayloadWithDynamicSemanticObjectsResolved(\n\t\t\t\tpayload,\n\t\t\t\tnewPayload\n\t\t\t);\n\t\t\treturn oPayloadWithDynamicSemanticObjectsResolved;\n\t\t}\n\t} else {\n\t\treturn undefined;\n\t}\n};\n\nSimpleLinkDelegate._updatePayloadWithSemanticAttributes = function (\n\taSemanticObjects: any,\n\toInfoLog: any,\n\toContextObject: any,\n\toResults: any,\n\tmSemanticObjectMappings: any\n): void {\n\taSemanticObjects.forEach(function (sSemanticObject: any) {\n\t\tif (oInfoLog) {\n\t\t\toInfoLog.addContextObject(sSemanticObject, oContextObject);\n\t\t}\n\t\toResults[sSemanticObject] = {};\n\t\tfor (const sAttributeName in oContextObject) {\n\t\t\tlet oAttribute = null,\n\t\t\t\toTransformationAdditional = null;\n\t\t\tif (oInfoLog) {\n\t\t\t\toAttribute = oInfoLog.getSemanticObjectAttribute(sSemanticObject, sAttributeName);\n\t\t\t\tif (!oAttribute) {\n\t\t\t\t\toAttribute = oInfoLog.createAttributeStructure();\n\t\t\t\t\toInfoLog.addSemanticObjectAttribute(sSemanticObject, sAttributeName, oAttribute);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Ignore undefined and null values\n\t\t\tif (oContextObject[sAttributeName] === undefined || oContextObject[sAttributeName] === null) {\n\t\t\t\tif (oAttribute) {\n\t\t\t\t\toAttribute.transformations.push({\n\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\tdescription: \"\\u2139 Undefined and null values have been removed in SimpleLinkDelegate.\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// Ignore plain objects (BCP 1770496639)\n\t\t\tif (isPlainObject(oContextObject[sAttributeName])) {\n\t\t\t\tif (mSemanticObjectMappings && mSemanticObjectMappings[sSemanticObject]) {\n\t\t\t\t\tconst aKeys = Object.keys(mSemanticObjectMappings[sSemanticObject]);\n\t\t\t\t\tlet sNewAttributeNameMapped, sNewAttributeName, sValue, sKey;\n\t\t\t\t\tfor (let index = 0; index < aKeys.length; index++) {\n\t\t\t\t\t\tsKey = aKeys[index];\n\t\t\t\t\t\tif (sKey.indexOf(sAttributeName) === 0) {\n\t\t\t\t\t\t\tsNewAttributeNameMapped = mSemanticObjectMappings[sSemanticObject][sKey];\n\t\t\t\t\t\t\tsNewAttributeName = sKey.split(\"/\")[sKey.split(\"/\").length - 1];\n\t\t\t\t\t\t\tsValue = oContextObject[sAttributeName][sNewAttributeName];\n\t\t\t\t\t\t\tif (sNewAttributeNameMapped && sNewAttributeName && sValue) {\n\t\t\t\t\t\t\t\toResults[sSemanticObject][sNewAttributeNameMapped] = sValue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oAttribute) {\n\t\t\t\t\toAttribute.transformations.push({\n\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\tdescription: \"\\u2139 Plain objects has been removed in SimpleLinkDelegate.\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Map the attribute name only if 'semanticObjectMapping' is defined.\n\t\t\t// Note: under defined 'semanticObjectMapping' we also mean an empty annotation or an annotation with empty record\n\t\t\tconst sAttributeNameMapped =\n\t\t\t\tmSemanticObjectMappings &&\n\t\t\t\tmSemanticObjectMappings[sSemanticObject] &&\n\t\t\t\tmSemanticObjectMappings[sSemanticObject][sAttributeName]\n\t\t\t\t\t? mSemanticObjectMappings[sSemanticObject][sAttributeName]\n\t\t\t\t\t: sAttributeName;\n\n\t\t\tif (oAttribute && sAttributeName !== sAttributeNameMapped) {\n\t\t\t\toTransformationAdditional = {\n\t\t\t\t\tvalue: undefined,\n\t\t\t\t\tdescription: `\\u2139 The attribute ${sAttributeName} has been renamed to ${sAttributeNameMapped} in SimpleLinkDelegate.`,\n\t\t\t\t\treason: `\\ud83d\\udd34 A com.sap.vocabularies.Common.v1.SemanticObjectMapping annotation is defined for semantic object ${sSemanticObject} with source attribute ${sAttributeName} and target attribute ${sAttributeNameMapped}. You can modify the annotation if the mapping result is not what you expected.`\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If more then one local property maps to the same target property (clash situation)\n\t\t\t// we take the value of the last property and write an error log\n\t\t\tif (oResults[sSemanticObject][sAttributeNameMapped]) {\n\t\t\t\tLog.error(\n\t\t\t\t\t`SimpleLinkDelegate: The attribute ${sAttributeName} can not be renamed to the attribute ${sAttributeNameMapped} due to a clash situation. This can lead to wrong navigation later on.`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Copy the value replacing the attribute name by semantic object name\n\t\t\toResults[sSemanticObject][sAttributeNameMapped] = oContextObject[sAttributeName];\n\n\t\t\tif (oAttribute) {\n\t\t\t\tif (oTransformationAdditional) {\n\t\t\t\t\toAttribute.transformations.push(oTransformationAdditional);\n\t\t\t\t\tconst aAttributeNew = oInfoLog.createAttributeStructure();\n\t\t\t\t\taAttributeNew.transformations.push({\n\t\t\t\t\t\tvalue: oContextObject[sAttributeName],\n\t\t\t\t\t\tdescription: `\\u2139 The attribute ${sAttributeNameMapped} with the value ${oContextObject[sAttributeName]} has been added due to a mapping rule regarding the attribute ${sAttributeName} in SimpleLinkDelegate.`\n\t\t\t\t\t});\n\t\t\t\t\toInfoLog.addSemanticObjectAttribute(sSemanticObject, sAttributeNameMapped, aAttributeNew);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n\n/**\n * Checks which attributes of the ContextObject belong to which SemanticObject and maps them into a two dimensional array.\n *\n * @private\n * @param oContextObject The BindingContext of the SourceControl of the Link / of the Link itself if not set\n * @param oPayload The payload given by the application\n * @param oInfoLog The corresponding InfoLog of the Link\n * @param oLink The corresponding Link\n * @returns A two dimensional array which maps a given SemanticObject name together with a given attribute name to the value of that given attribute\n */\nSimpleLinkDelegate._calculateSemanticAttributes = function (oContextObject: any, oPayload: any, oInfoLog: any, oLink: any) {\n\tconst aLinkCustomData = oLink && this._fetchLinkCustomData(oLink);\n\tconst oPayloadWithDynamicSemanticObjectsResolved: any = SimpleLinkDelegate._getPayloadWithDynamicSemanticObjectsResolved(\n\t\toPayload,\n\t\taLinkCustomData\n\t);\n\tconst oPayloadResolved = oPayloadWithDynamicSemanticObjectsResolved ? oPayloadWithDynamicSemanticObjectsResolved : oPayload;\n\tthis.resolvedpayload = oPayloadWithDynamicSemanticObjectsResolved;\n\tconst aSemanticObjects = SimpleLinkDelegate._getSemanticObjects(oPayloadResolved);\n\tconst mSemanticObjectMappings = SimpleLinkDelegate._convertSemanticObjectMapping(\n\t\tSimpleLinkDelegate._getSemanticObjectMappings(oPayloadResolved)\n\t);\n\tif (!aSemanticObjects.length) {\n\t\treturn { payload: oPayloadResolved, results: {} };\n\t}\n\tconst oResults: any = {};\n\tSimpleLinkDelegate._updatePayloadWithSemanticAttributes(aSemanticObjects, oInfoLog, oContextObject, oResults, mSemanticObjectMappings);\n\treturn { payload: oPayloadResolved, results: oResults };\n};\n/**\n * Retrieves the actual targets for the navigation of the link. This uses the UShell loaded by the {@link sap.ui.mdc.link.Factory} to retrieve\n * the navigation targets from the FLP service.\n *\n * @private\n * @param sAppStateKey Key of the appstate (not used yet)\n * @param oSemanticAttributes The calculated by _calculateSemanticAttributes\n * @param oPayload The payload given by the application\n * @param oInfoLog The corresponding InfoLog of the Link\n * @param oLink The corresponding Link\n * @returns Resolving into availableAtions and ownNavigation containing an array of {@link sap.ui.mdc.link.LinkItem}\n */\nSimpleLinkDelegate._retrieveNavigationTargets = function (\n\tsAppStateKey: string,\n\toSemanticAttributes: any,\n\toPayload: any,\n\toInfoLog: any,\n\toLink: any\n) {\n\tif (!oPayload.semanticObjects) {\n\t\treturn Promise.resolve([]);\n\t}\n\tconst aSemanticObjects = oPayload.semanticObjects;\n\tconst oNavigationTargets: any = {\n\t\townNavigation: undefined,\n\t\tavailableActions: []\n\t};\n\tlet iSuperiorActionLinksFound = 0;\n\treturn Core.loadLibrary(\"sap.ui.fl\", {\n\t\tasync: true\n\t}).then(() => {\n\t\treturn new Promise((resolve) => {\n\t\t\tsap.ui.require([\"sap/ui/fl/Utils\"], async (Utils: any) => {\n\t\t\t\tconst oAppComponent = Utils.getAppComponentForControl(oLink === undefined ? this.oControl : oLink);\n\t\t\t\tconst oShellServices = oAppComponent ? oAppComponent.getShellServices() : null;\n\t\t\t\tif (!oShellServices) {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tresolve(oNavigationTargets.availableActions, oNavigationTargets.ownNavigation);\n\t\t\t\t}\n\t\t\t\tif (!oShellServices.hasUShell()) {\n\t\t\t\t\tLog.error(\"SimpleLinkDelegate: Service 'CrossApplicationNavigation' or 'URLParsing' could not be obtained\");\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tresolve(oNavigationTargets.availableActions, oNavigationTargets.ownNavigation);\n\t\t\t\t}\n\t\t\t\tconst aParams = aSemanticObjects.map(function (sSemanticObject: any) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsemanticObject: sSemanticObject,\n\t\t\t\t\t\t\tparams: oSemanticAttributes ? oSemanticAttributes[sSemanticObject] : undefined,\n\t\t\t\t\t\t\tappStateKey: sAppStateKey,\n\t\t\t\t\t\t\tsortResultsBy: \"text\"\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t});\n\t\t\t\ttry {\n\t\t\t\t\tconst aLinks = await oShellServices.getLinks(aParams);\n\t\t\t\t\tlet bHasLinks = false;\n\t\t\t\t\tfor (let i = 0; i < aLinks.length; i++) {\n\t\t\t\t\t\tfor (let j = 0; j < aLinks[i].length; j++) {\n\t\t\t\t\t\t\tif (aLinks[i][j].length > 0) {\n\t\t\t\t\t\t\t\tbHasLinks = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (bHasLinks) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!aLinks || !aLinks.length || !bHasLinks) {\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tresolve(oNavigationTargets.availableActions, oNavigationTargets.ownNavigation);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst aSemanticObjectUnavailableActions = SimpleLinkDelegate._getSemanticObjectUnavailableActions(oPayload);\n\t\t\t\t\tconst oUnavailableActions =\n\t\t\t\t\t\tSimpleLinkDelegate._convertSemanticObjectUnavailableAction(aSemanticObjectUnavailableActions);\n\t\t\t\t\tlet sCurrentHash = FieldRuntime._fnFixHashQueryString(oAppComponent.getShellServices().getHash());\n\n\t\t\t\t\tif (sCurrentHash) {\n\t\t\t\t\t\t// BCP 1770315035: we have to set the end-point '?' of action in order to avoid matching of \"#SalesOrder-manage\" in \"#SalesOrder-manageFulfillment\"\n\t\t\t\t\t\tsCurrentHash += \"?\";\n\t\t\t\t\t}\n\n\t\t\t\t\tconst fnIsUnavailableAction = function (sSemanticObject: any, sAction: any) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t!!oUnavailableActions &&\n\t\t\t\t\t\t\t!!oUnavailableActions[sSemanticObject] &&\n\t\t\t\t\t\t\toUnavailableActions[sSemanticObject].indexOf(sAction) > -1\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\t\t\t\t\tconst fnAddLink = function (_oLink: any) {\n\t\t\t\t\t\tconst oShellHash = oShellServices.parseShellHash(_oLink.intent);\n\t\t\t\t\t\tif (fnIsUnavailableAction(oShellHash.semanticObject, oShellHash.action)) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst sHref = `#${oShellServices.constructShellHash({ target: { shellHash: _oLink.intent } })}`;\n\n\t\t\t\t\t\tif (_oLink.intent && _oLink.intent.indexOf(sCurrentHash) === 0) {\n\t\t\t\t\t\t\t// Prevent current app from being listed\n\t\t\t\t\t\t\t// NOTE: If the navigation target exists in\n\t\t\t\t\t\t\t// multiple contexts (~XXXX in hash) they will all be skipped\n\t\t\t\t\t\t\toNavigationTargets.ownNavigation = new LinkItem({\n\t\t\t\t\t\t\t\thref: sHref,\n\t\t\t\t\t\t\t\ttext: _oLink.text\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst oLinkItem = new LinkItem({\n\t\t\t\t\t\t\t// As the retrieveNavigationTargets method can be called several time we can not create the LinkItem instance with the same id\n\t\t\t\t\t\t\tkey:\n\t\t\t\t\t\t\t\toShellHash.semanticObject && oShellHash.action\n\t\t\t\t\t\t\t\t\t? `${oShellHash.semanticObject}-${oShellHash.action}`\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\ttext: _oLink.text,\n\t\t\t\t\t\t\tdescription: undefined,\n\t\t\t\t\t\t\thref: sHref,\n\t\t\t\t\t\t\t// target: not supported yet\n\t\t\t\t\t\t\ticon: undefined, //_oLink.icon,\n\t\t\t\t\t\t\tinitiallyVisible: _oLink.tags && _oLink.tags.indexOf(\"superiorAction\") > -1\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (oLinkItem.getProperty(\"initiallyVisible\")) {\n\t\t\t\t\t\t\tiSuperiorActionLinksFound++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toNavigationTargets.availableActions.push(oLinkItem);\n\n\t\t\t\t\t\tif (oInfoLog) {\n\t\t\t\t\t\t\toInfoLog.addSemanticObjectIntent(oShellHash.semanticObject, {\n\t\t\t\t\t\t\t\tintent: oLinkItem.getHref(),\n\t\t\t\t\t\t\t\ttext: oLinkItem.getText()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tfor (let n = 0; n < aSemanticObjects.length; n++) {\n\t\t\t\t\t\taLinks[n][0].forEach(fnAddLink);\n\t\t\t\t\t}\n\t\t\t\t\tif (iSuperiorActionLinksFound === 0) {\n\t\t\t\t\t\tfor (let iLinkItemIndex = 0; iLinkItemIndex < oNavigationTargets.availableActions.length; iLinkItemIndex++) {\n\t\t\t\t\t\t\tif (iLinkItemIndex < this.getConstants().iLinksShownInPopup) {\n\t\t\t\t\t\t\t\toNavigationTargets.availableActions[iLinkItemIndex].setProperty(\"initiallyVisible\", true);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tresolve(oNavigationTargets.availableActions, oNavigationTargets.ownNavigation);\n\t\t\t\t} catch (oError) {\n\t\t\t\t\tLog.error(\"SimpleLinkDelegate: '_retrieveNavigationTargets' failed executing getLinks method\");\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tresolve(oNavigationTargets.availableActions, oNavigationTargets.ownNavigation);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n};\nSimpleLinkDelegate._getSemanticObjects = function (oPayload: any) {\n\treturn oPayload.semanticObjects ? oPayload.semanticObjects : [];\n};\nSimpleLinkDelegate._getSemanticObjectUnavailableActions = function (oPayload: any) {\n\tconst aSemanticObjectUnavailableActions: any[] = [];\n\tif (oPayload.semanticObjectUnavailableActions) {\n\t\toPayload.semanticObjectUnavailableActions.forEach(function (oSemanticObjectUnavailableAction: any) {\n\t\t\taSemanticObjectUnavailableActions.push(\n\t\t\t\tnew SemanticObjectUnavailableAction({\n\t\t\t\t\tsemanticObject: oSemanticObjectUnavailableAction.semanticObject,\n\t\t\t\t\tactions: oSemanticObjectUnavailableAction.actions\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t}\n\treturn aSemanticObjectUnavailableActions;\n};\n\n/**\n * This will return an array of {@link sap.ui.mdc.link.SemanticObjectMapping} depending on the given payload.\n *\n * @private\n * @param oPayload The payload defined by the application\n * @returns An array of semantic object mappings.\n */\nSimpleLinkDelegate._getSemanticObjectMappings = function (oPayload: any) {\n\tconst aSemanticObjectMappings: any[] = [];\n\tlet aSemanticObjectMappingItems: any[] = [];\n\tif (oPayload.semanticObjectMappings) {\n\t\toPayload.semanticObjectMappings.forEach(function (oSemanticObjectMapping: any) {\n\t\t\taSemanticObjectMappingItems = [];\n\t\t\tif (oSemanticObjectMapping.items) {\n\t\t\t\toSemanticObjectMapping.items.forEach(function (oSemanticObjectMappingItem: any) {\n\t\t\t\t\taSemanticObjectMappingItems.push(\n\t\t\t\t\t\tnew SemanticObjectMappingItem({\n\t\t\t\t\t\t\tkey: oSemanticObjectMappingItem.key,\n\t\t\t\t\t\t\tvalue: oSemanticObjectMappingItem.value\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\taSemanticObjectMappings.push(\n\t\t\t\tnew SemanticObjectMapping({\n\t\t\t\t\tsemanticObject: oSemanticObjectMapping.semanticObject,\n\t\t\t\t\titems: aSemanticObjectMappingItems\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t}\n\treturn aSemanticObjectMappings;\n};\n/**\n * Converts a given array of SemanticObjectMapping into a Map containing SemanticObjects as Keys and a Map of it's corresponding SemanticObjectMappings as values.\n *\n * @private\n * @param aSemanticObjectMappings An array of SemanticObjectMappings.\n * @returns The converterd SemanticObjectMappings\n */\nSimpleLinkDelegate._convertSemanticObjectMapping = function (aSemanticObjectMappings: any[]) {\n\tif (!aSemanticObjectMappings.length) {\n\t\treturn undefined;\n\t}\n\tconst mSemanticObjectMappings: any = {};\n\taSemanticObjectMappings.forEach(function (oSemanticObjectMapping: any) {\n\t\tif (!oSemanticObjectMapping.getSemanticObject()) {\n\t\t\tthrow Error(\n\t\t\t\t`SimpleLinkDelegate: 'semanticObject' property with value '${oSemanticObjectMapping.getSemanticObject()}' is not valid`\n\t\t\t);\n\t\t}\n\t\tmSemanticObjectMappings[oSemanticObjectMapping.getSemanticObject()] = oSemanticObjectMapping\n\t\t\t.getItems()\n\t\t\t.reduce(function (oMap: any, oItem: any) {\n\t\t\t\toMap[oItem.getKey()] = oItem.getValue();\n\t\t\t\treturn oMap;\n\t\t\t}, {});\n\t});\n\treturn mSemanticObjectMappings;\n};\n/**\n * Converts a given array of SemanticObjectUnavailableActions into a map containing SemanticObjects as keys and a map of its corresponding SemanticObjectUnavailableActions as values.\n *\n * @private\n * @param aSemanticObjectUnavailableActions The SemanticObjectUnavailableActions converted\n * @returns The map containing the converted SemanticObjectUnavailableActions\n */\nSimpleLinkDelegate._convertSemanticObjectUnavailableAction = function (aSemanticObjectUnavailableActions: any[]) {\n\tlet _SemanticObjectName: any;\n\tlet _SemanticObjectHasAlreadyUnavailableActions: any;\n\tlet _UnavailableActions: any[] = [];\n\tif (!aSemanticObjectUnavailableActions.length) {\n\t\treturn undefined;\n\t}\n\tconst mSemanticObjectUnavailableActions: any = {};\n\taSemanticObjectUnavailableActions.forEach(function (oSemanticObjectUnavailableActions: any) {\n\t\t_SemanticObjectName = oSemanticObjectUnavailableActions.getSemanticObject();\n\t\tif (!_SemanticObjectName) {\n\t\t\tthrow Error(`SimpleLinkDelegate: 'semanticObject' property with value '${_SemanticObjectName}' is not valid`);\n\t\t}\n\t\t_UnavailableActions = oSemanticObjectUnavailableActions.getActions();\n\t\tif (mSemanticObjectUnavailableActions[_SemanticObjectName] === undefined) {\n\t\t\tmSemanticObjectUnavailableActions[_SemanticObjectName] = _UnavailableActions;\n\t\t} else {\n\t\t\t_SemanticObjectHasAlreadyUnavailableActions = mSemanticObjectUnavailableActions[_SemanticObjectName];\n\t\t\t_UnavailableActions.forEach(function (UnavailableAction: string) {\n\t\t\t\t_SemanticObjectHasAlreadyUnavailableActions.push(UnavailableAction);\n\t\t\t});\n\t\t\tmSemanticObjectUnavailableActions[_SemanticObjectName] = _SemanticObjectHasAlreadyUnavailableActions;\n\t\t}\n\t});\n\treturn mSemanticObjectUnavailableActions;\n};\n\nexport default SimpleLinkDelegate;\n"],"mappings":"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"}},{"offset":{"line":26308,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","deepClone","deepEqual","isPlainObject","CommonUtils","KeepAliveHelper","toES6Promise","SemanticObjectHelper","FieldHelper","FieldRuntime","SelectionVariant","Core","Fragment","XMLPreprocessor","XMLTemplateProcessor","Factory","LinkItem","SemanticObjectMapping","SemanticObjectMappingItem","SemanticObjectUnavailableAction","LinkDelegate","JSONModel","getDynamicPathFromSemanticObject","SimpleLinkDelegate","Object","assign","CONSTANTS","iLinksShownInPopup","sapmLink","sapuimdcLink","sapuimdclinkLinkItem","sapmObjectIdentifier","sapmObjectStatus","getConstants","_getEntityType","oPayload","oMetaModel","createBindingContext","entityType","undefined","_getSemanticsModel","_getDataField","dataField","_getContact","contact","fnTemplateFragment","sFragmentName","titleLinkHref","oFragmentModel","oPayloadToUse","this","resolvedpayload","payload","LinkId","oControl","isA","getId","getModel","getProperty","titlelink","oSemanticsModel","semanticModel","bindingContexts","semantic","models","entitySet","metaModel","viewData","oFragment","loadTemplate","Promise","resolve","process","name","then","_internalFragment","load","definition","controller","oPopoverContent","setModel","setBindingContext","fetchAdditionalContent","oPayLoad","oMdcLinkControl","_oPayLoad$navigationP","aNavigateRegexpMatch","navigationPath","match","oBindingContext","length","bindContext","getBindingContext","$$ownRequest","getMetaModel","getBoundContext","_fetchLinkCustomData","_oLink","getParent","getCustomData","fetchLinkItems","oInfoLog","_getSemanticObjects","oContextObject","getObject","initialize","_oLinkCustomData","_link","aLinkCustomData","map","linkItem","mProperties","value","oSemanticAttributesResolved","_calculateSemanticAttributes","oSemanticAttributes","results","oPayloadResolved","_retrieveNavigationTargets","aLinks","_findLinkType","aLinkItems","nLinkType","oLinkItem","text","getText","href","getHref","hasQuickViewFacets","linkType","fetchLinkType","async","oLink","_oCurrentLink","_oPayload","oDefaultInitialType","initialType","type","directLink","runtimeType","appStateKeyMap","_oPayload$contact","semanticObjects","_retrieveUnmodifiedLinkItems","retrieveLinkItems","_LinkType","Error","oError","error","_RemoveTitleLinkFromTargets","_aLinkItems","_bTitleHasLink","_aTitleLink","_sTitleLinkHref","_oMDCLink","bResult","linkIsPrimaryAction","_sLinkIntentWithoutParameters","_sTitleIntent","intent","split","titlelinkhref","setProperty","aMLinkItems","filter","key","_IsSemanticObjectDynamic","aNewLinkCustomData","oThis","link","otherLink","_getLineContext","oView","mLineContext","getAggregation","_setFilterContextUrlForSelectionVariant","oSelectionVariant","oNavigationService","getViewData","sContextUrl","constructContextUrl","setFilterContextUrl","_setObjectMappings","sSemanticObject","oParams","aSemanticObjectMappings","hasChanged","modifiedSelectionVariant","toJSONObject","forEach","mapping","mappingSemanticObject","semanticObject","mappingSemanticObjectPath","oMappings","items","i","sLocalProperty","sSemanticObjectProperty","removeParameter","removeSelectOption","renameParameter","renameSelectOption","propertyToBeRemoved","slice","params","selectionVariant","_getAppStateKeyAndUrlParameters","_this","navigationService","_this$appStateKeyMap$","aValues","defaultCache","semanticAttributes","appstatekey","getAppStateKeyAndUrlParameters","toJSONString","cache","_getLinkItemWithNewParameter","_that","_oLinkItem","_oShellServices","_oParams","_sAppStateKey","_oSelectionVariant","_oNavigationService","expandCompactHash","sHash","oShellHash","parseShellHash","oNewParams","newSelectionVariant","semanticObjectMappings","oNewShellHash","target","action","appStateKey","setHref","constructShellHash","aSemanticLinks","push","bind","_removeEmptyLinkItem","modifyLinkItems","getTargetView","oAppComponent","getAppComponent","primaryActionIsActive","checkPrimaryActions","aTitleLink","titleLink","bTitleHasLink","hasTitleLink","oShellServices","getShellServices","hasUShell","reject","oTargetInfo","mainSemanticObject","getNavigationService","oController","getController","mLineContextData","sMetaPath","getMetaPath","getPath","_intentBasedNavigation","removeSensitiveData","prepareContextForExternalNavigation","mixAttributesAndSelectionVariant","propertiesWithoutConflict","intentBasedNavigation","adaptNavigationContext","_removeTechnicalParameters","titleLinktoBeRemove","index","beforeNavigationCallback","oEvent","oSource","getSource","sHref","getParameter","oURLParsing","getService","oHash","storeControlRefreshStrategyForHash","_getSemanticObjectCustomDataValue","oSemanticObjectsResolved","sPropertyName","sCustomDataValue","iCustomDataCount","getKey","getValue","_isDynamicPath","pathOrValue","indexOf","_updatePayloadWithResolvedSemanticObjectValue","newPayload","semanticObjectName","_newPayload$semanticO","semanticObjectsResolved","j","_newPayload$semanticO2","_createNewPayloadWithDynamicSemanticObjectsResolved","tmpPropertyName","substr","_updateSemanticObjectsForMappings","mdcPayload","mdcPayloadWithDynamicSemanticObjectsResolved","semanticObjectMapping","_updateSemanticObjectsUnavailableActions","mdcPayloadSemanticObjectUnavailableActions","_Index","semanticObjectUnavailableAction","findIndex","_updateSemanticObjectsWithResolvedValue","newSemanticObjectsCount","splice","_removeEmptySemanticObjectsMappings","mappingsCount","_setPayloadWithDynamicSemanticObjectsResolved","oPayloadWithDynamicSemanticObjectsResolved","propertyPathLabel","_SemanticObjectUnavailableActions","semanticObjectUnavailableActions","_getPayloadWithDynamicSemanticObjectsResolved","linkCustomData","_updatePayloadWithSemanticAttributes","aSemanticObjects","oResults","mSemanticObjectMappings","addContextObject","sAttributeName","oAttribute","oTransformationAdditional","getSemanticObjectAttribute","createAttributeStructure","addSemanticObjectAttribute","transformations","description","aKeys","keys","sNewAttributeNameMapped","sNewAttributeName","sValue","sKey","sAttributeNameMapped","reason","aAttributeNew","_convertSemanticObjectMapping","_getSemanticObjectMappings","sAppStateKey","oNavigationTargets","ownNavigation","availableActions","iSuperiorActionLinksFound","loadLibrary","require","Utils","getAppComponentForControl","aParams","sortResultsBy","getLinks","bHasLinks","aSemanticObjectUnavailableActions","_getSemanticObjectUnavailableActions","oUnavailableActions","_convertSemanticObjectUnavailableAction","sCurrentHash","_fnFixHashQueryString","getHash","fnIsUnavailableAction","sAction","fnAddLink","shellHash","icon","initiallyVisible","tags","addSemanticObjectIntent","n","iLinkItemIndex","oSemanticObjectUnavailableAction","actions","aSemanticObjectMappingItems","oSemanticObjectMapping","oSemanticObjectMappingItem","getSemanticObject","getItems","reduce","oMap","oItem","_SemanticObjectName","_SemanticObjectHasAlreadyUnavailableActions","_UnavailableActions","mSemanticObjectUnavailableActions","oSemanticObjectUnavailableActions","getActions","UnavailableAction"],"sources":["QuickViewDelegate-dbg.js"],"mappings":"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","sourceRoot":"quickView"}},{"offset":{"line":26313,"column":0},"map":{"version":3,"names":["ShareBlock","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","blockAttribute","type","required","isPublic","bindable","defineReference","_initializeMenuItems","view","appComponent","isTeamsModeActive","CollaborationHelper","menuButton","current","unbindProperty","setVisible","controller","getController","shellServices","getShellServices","isPluginInfoStable","waitForPluginsLoad","internalButton","getAggregation","attachEventOnce","menu","addItem","getTranslatedText","share","_triggerEmail","_addShellBasedMenuItems","hasUshell","hasUShell","hasJam","getUser","isJamActive","collaborationTeamsHelper","ServiceContainer","getServiceAsync","shareCollaborationOptions","getOptions","isShareAsCardEnabled","msTeamsOptions","enableCard","_triggerShareToJam","collaborationOption","menuItemSettings","text","icon","visible","subOptions","length","key","compileExpression","not","UI","IsEditable","undefined","items","forEach","subOption","subMenuItem","MenuItem","press","collaborationMenuItemPress","customData","CustomData","value","fesrStepName","FESRHelper","setSemanticStepname","push","menuItem","addBookmarkButton","AddBookmarkButton","getEnabled","saveAsTileMenuItem","getText","getIcon","_saveAsTile","dependents","destroy","event","clickedMenuItem","getSource","CommonUtils","getTargetView","_adaptShareMetadata","collaborationInfo","getModel","getData","data","getContent","id","addDependent","getMenu","openBy","isInitialized","catch","error","Log","RuntimeBuildingBlock","constant"],"sourceRoot":"share","sources":["Share.block.tsx"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport RuntimeBuildingBlock from \"sap/fe/core/buildingBlocks/RuntimeBuildingBlock\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport CommandExecution from \"sap/fe/core/controls/CommandExecution\";\nimport { UI } from \"sap/fe/core/converters/helpers/BindingHelper\";\nimport { BindingToolkitExpression, compileExpression, constant, not } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { defineReference } from \"sap/fe/core/helpers/ClassSupport\";\nimport { Ref } from \"sap/fe/core/jsx-runtime/jsx\";\nimport PageController from \"sap/fe/core/PageController\";\nimport type { IShellServices } from \"sap/fe/core/services/ShellServicesFactory\";\nimport Menu from \"sap/m/Menu\";\nimport MenuButton from \"sap/m/MenuButton\";\nimport MenuItem, { $MenuItemSettings } from \"sap/m/MenuItem\";\nimport CollaborationHelper from \"sap/suite/ui/commons/collaboration/CollaborationHelper\";\nimport ServiceContainer from \"sap/suite/ui/commons/collaboration/ServiceContainer\";\nimport TeamsHelperService, { CollaborationOptions } from \"sap/suite/ui/commons/collaboration/TeamsHelperService\";\nimport UI5Event from \"sap/ui/base/Event\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport View from \"sap/ui/core/mvc/View\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport FESRHelper from \"sap/ui/performance/trace/FESRHelper\";\nimport AddBookmarkButton from \"sap/ushell/ui/footerbar/AddBookmarkButton\";\nimport ShareAPI from \"./ShareAPI\";\n\ntype MsTeamsOptionsType = {\n\tenableCard: string;\n};\n\n/**\n * Building block used to create the ‘Share’ functionality.\n * <br>\n * Please note that the 'Share in SAP Jam' option is only available on platforms that are integrated with SAP Jam.\n * <br>\n * If you are consuming this macro in an environment where the SAP Fiori launchpad is not available, then the 'Save as Tile' option is not visible.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Share\n * \tid=\"someID\"\n *\tvisible=\"true\"\n * /&gt;\n * </pre>\n *\n * @hideconstructor\n * @since 1.93.0\n */\n@defineBuildingBlock({\n\tname: \"Share\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.fe.macros.share.ShareAPI\"]\n})\nexport default class ShareBlock extends RuntimeBuildingBlock {\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: true,\n\t\tisPublic: true\n\t})\n\tid!: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true,\n\t\tbindable: true\n\t})\n\tvisible: BindingToolkitExpression<boolean> = constant(true);\n\n\t/**\n\t * This enables the options for Microsoft Teams\n\t * The enableCard will be received as true for Object Page and false for List Report.\n\t * The enableChat and enableTab will remain true\n\t */\n\t@blockAttribute({\n\t\ttype: \"object\",\n\t\tisPublic: false\n\t})\n\tmsTeamsOptions?: MsTeamsOptionsType;\n\n\t@defineReference()\n\tmenuButton!: Ref<MenuButton>;\n\n\t@defineReference()\n\tmenu!: Ref<Menu>;\n\n\t@defineReference()\n\tsaveAsTileMenuItem!: Ref<MenuItem>;\n\n\tpublic isInitialized?: Promise<void>;\n\n\t/**\n\t * Retrieves the share option from the shell configuration asynchronously and prepare the content of the menu button.\n\t * Options order are:\n\t * - Send as Email\n\t * - Share as Jam (if available)\n\t * - Teams options (if available)\n\t * - Save as tile.\n\t *\n\t * @param view The view this building block is used in\n\t * @param appComponent The AppComponent instance\n\t */\n\tasync _initializeMenuItems(view: View, appComponent: AppComponent) {\n\t\tconst isTeamsModeActive = await CollaborationHelper.isTeamsModeActive();\n\t\tif (isTeamsModeActive) {\n\t\t\t//need to clear the visible property bindings otherwise when the binding value changes then it will set back the visible to the resolved value\n\t\t\tthis.menuButton.current?.unbindProperty(\"visible\", true);\n\t\t\tthis.menuButton.current?.setVisible(false);\n\t\t\treturn;\n\t\t}\n\t\tconst controller = view.getController() as PageController;\n\t\tconst shellServices = appComponent.getShellServices();\n\t\tconst isPluginInfoStable = await shellServices.waitForPluginsLoad();\n\t\tif (!isPluginInfoStable) {\n\t\t\t// In case the plugin info is not yet available we need to do this computation again on the next button click\n\t\t\tconst internalButton = this.menuButton.current?.getAggregation(\"_control\") as ManagedObject;\n\t\t\tinternalButton?.attachEventOnce(\"press\", {}, () => this._initializeMenuItems, this);\n\t\t}\n\n\t\tif (this.menu.current) {\n\t\t\tthis.menu.current.addItem(\n\t\t\t\t<MenuItem\n\t\t\t\t\ttext={this.getTranslatedText(\"T_SEMANTIC_CONTROL_SEND_EMAIL\")}\n\t\t\t\t\ticon={\"sap-icon://email\"}\n\t\t\t\t\tpress={() => controller.share._triggerEmail()}\n\t\t\t\t/>\n\t\t\t);\n\t\t\tthis._addShellBasedMenuItems(controller, shellServices);\n\t\t}\n\t}\n\n\tasync _addShellBasedMenuItems(controller: PageController, shellServices: IShellServices) {\n\t\tconst hasUshell = shellServices.hasUShell();\n\t\tconst hasJam = !!shellServices.getUser().isJamActive?.();\n\t\tconst collaborationTeamsHelper: TeamsHelperService = await ServiceContainer.getServiceAsync();\n\t\tconst shareCollaborationOptions: CollaborationOptions[] = collaborationTeamsHelper.getOptions({\n\t\t\tisShareAsCardEnabled: this.msTeamsOptions?.enableCard === \"true\"\n\t\t});\n\t\tif (hasUshell) {\n\t\t\tif (hasJam) {\n\t\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\ttext={this.getTranslatedText(\"T_COMMON_SAPFE_SHARE_JAM\")}\n\t\t\t\t\t\ticon={\"sap-icon://share-2\"}\n\t\t\t\t\t\tpress={() => controller.share._triggerShareToJam()}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\t// prepare teams menu items\n\t\t\tfor (const collaborationOption of shareCollaborationOptions) {\n\t\t\t\tconst menuItemSettings: $MenuItemSettings = {\n\t\t\t\t\ttext: collaborationOption.text,\n\t\t\t\t\ticon: collaborationOption.icon,\n\t\t\t\t\tvisible:\n\t\t\t\t\t\tcollaborationOption.subOptions?.length === 1 &&\n\t\t\t\t\t\tcollaborationOption.subOptions[0].key === \"COLLABORATION_MSTEAMS_CARD\"\n\t\t\t\t\t\t\t? compileExpression(not(UI.IsEditable))\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\titems: []\n\t\t\t\t};\n\n\t\t\t\tif (collaborationOption?.subOptions && collaborationOption?.subOptions?.length > 0) {\n\t\t\t\t\tmenuItemSettings.items = [];\n\t\t\t\t\tcollaborationOption.subOptions.forEach((subOption: CollaborationOptions) => {\n\t\t\t\t\t\tconst subMenuItem = new MenuItem({\n\t\t\t\t\t\t\ttext: subOption.text,\n\t\t\t\t\t\t\ticon: subOption.icon,\n\t\t\t\t\t\t\tpress: this.collaborationMenuItemPress,\n\t\t\t\t\t\t\tvisible: subOption.key === \"COLLABORATION_MSTEAMS_CARD\" ? compileExpression(not(UI.IsEditable)) : undefined,\n\t\t\t\t\t\t\tcustomData: new CustomData({\n\t\t\t\t\t\t\t\tkey: \"collaborationData\",\n\t\t\t\t\t\t\t\tvalue: subOption\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (subOption.fesrStepName) {\n\t\t\t\t\t\t\tFESRHelper.setSemanticStepname(subMenuItem, \"press\", subOption.fesrStepName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t(menuItemSettings.items as MenuItem[]).push(subMenuItem);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// if there are no sub option then the main option should be clickable\n\t\t\t\t\t// so add a press handler.\n\t\t\t\t\tmenuItemSettings.press = this.collaborationMenuItemPress;\n\t\t\t\t\tmenuItemSettings[\"customData\"] = new CustomData({\n\t\t\t\t\t\tkey: \"collaborationData\",\n\t\t\t\t\t\tvalue: collaborationOption\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst menuItem = new MenuItem(menuItemSettings);\n\t\t\t\tif (menuItemSettings.press && collaborationOption.fesrStepName) {\n\t\t\t\t\tFESRHelper.setSemanticStepname(menuItem, \"press\", collaborationOption.fesrStepName);\n\t\t\t\t}\n\t\t\t\tthis?.menu?.current?.addItem(menuItem);\n\t\t\t}\n\t\t\t// set save as tile\n\t\t\t// for now we need to create addBookmarkButton to use the save as tile feature.\n\t\t\t// In the future save as tile should be available as an API or a MenuItem so that it can be added to the Menu button.\n\t\t\t// This needs to be discussed with AddBookmarkButton team.\n\t\t\tconst addBookmarkButton = new AddBookmarkButton();\n\t\t\tif (addBookmarkButton.getEnabled()) {\n\t\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tref={this.saveAsTileMenuItem}\n\t\t\t\t\t\ttext={addBookmarkButton.getText()}\n\t\t\t\t\t\ticon={addBookmarkButton.getIcon()}\n\t\t\t\t\t\tpress={() => controller.share._saveAsTile(this.saveAsTileMenuItem.current)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ dependents: [addBookmarkButton] }}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\taddBookmarkButton.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\tasync collaborationMenuItemPress(event: UI5Event) {\n\t\tconst clickedMenuItem = event.getSource() as MenuItem;\n\t\tconst collaborationTeamsHelper: TeamsHelperService = await ServiceContainer.getServiceAsync();\n\t\tconst view: View = CommonUtils.getTargetView(clickedMenuItem);\n\t\tconst controller: PageController = view.getController() as PageController;\n\t\t// call adapt share metadata so that the collaboration info model is updated with the required info\n\t\tawait controller.share._adaptShareMetadata();\n\t\tconst collaborationInfo = (view.getModel(\"collaborationInfo\") as JSONModel).getData();\n\t\tcollaborationTeamsHelper.share(clickedMenuItem.data(\"collaborationData\"), collaborationInfo);\n\t}\n\n\tgetContent(view: View, appComponent: AppComponent) {\n\t\t// Ctrl+Shift+S is needed for the time being but this needs to be removed after backlog from menu button\n\t\tconst menuButton = (\n\t\t\t<ShareAPI id={this.id}>\n\t\t\t\t<MenuButton\n\t\t\t\t\tref={this.menuButton}\n\t\t\t\t\ticon={\"sap-icon://action\"}\n\t\t\t\t\tvisible={this.visible as any}\n\t\t\t\t\ttooltip={\"{sap.fe.i18n>M_COMMON_SAPFE_ACTION_SHARE} (Ctrl+Shift+S)\"}\n\t\t\t\t>\n\t\t\t\t\t<Menu ref={this.menu}></Menu>\n\t\t\t\t</MenuButton>\n\t\t\t</ShareAPI>\n\t\t);\n\t\tview.addDependent(\n\t\t\t<CommandExecution\n\t\t\t\tvisible={this.visible}\n\t\t\t\tenabled={this.visible}\n\t\t\t\tcommand=\"Share\"\n\t\t\t\texecute={() => this.menuButton.current?.getMenu().openBy(this.menuButton.current, true)}\n\t\t\t/>\n\t\t);\n\t\t// The initialization is asynchronous, so we just trigger it and hope for the best :D\n\t\tthis.isInitialized = this._initializeMenuItems(view, appComponent).catch((error) => {\n\t\t\tLog.error(error as string);\n\t\t});\n\t\treturn menuButton;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":26583,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlockSupport","RuntimeBuildingBlock","CommonUtils","CommandExecution","BindingHelper","BindingToolkit","ClassSupport","Menu","MenuButton","MenuItem","CollaborationHelper","ServiceContainer","CustomData","FESRHelper","AddBookmarkButton","ShareAPI","_jsx","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_exports","defineReference","not","constant","compileExpression","UI","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ShareBlock","name","namespace","publicNamespace","returnTypes","type","required","isPublic","bindable","_RuntimeBuildingBlock","_this","_len","arguments","length","args","Array","_key","this","_proto","_initializeMenuItems","async","view","appComponent","isTeamsModeActive","_this$menuButton$curr","_this$menuButton$curr2","menuButton","current","unbindProperty","setVisible","controller","getController","shellServices","getShellServices","isPluginInfoStable","waitForPluginsLoad","_this$menuButton$curr3","internalButton","getAggregation","attachEventOnce","menu","addItem","text","getTranslatedText","icon","press","share","_triggerEmail","_addShellBasedMenuItems","_shellServices$getUse","_shellServices$getUse2","_this$msTeamsOptions","hasUshell","hasUShell","hasJam","getUser","isJamActive","collaborationTeamsHelper","getServiceAsync","shareCollaborationOptions","getOptions","isShareAsCardEnabled","msTeamsOptions","enableCard","_this$menu","_this$menu$current","_triggerShareToJam","collaborationOption","_collaborationOption$","_collaborationOption$2","_this$menu2","_this$menu2$current","menuItemSettings","visible","subOptions","IsEditable","items","subOption","subMenuItem","collaborationMenuItemPress","customData","fesrStepName","setSemanticStepname","push","menuItem","addBookmarkButton","getEnabled","_this$menu3","_this$menu3$current","ref","saveAsTileMenuItem","getText","getIcon","_saveAsTile","children","dependents","destroy","event","clickedMenuItem","getSource","getTargetView","_adaptShareMetadata","collaborationInfo","getModel","getData","data","getContent","id","tooltip","addDependent","enabled","command","execute","_this$menuButton$curr4","getMenu","openBy","isInitialized","catch","error"],"sources":["Share.block-dbg.js"],"mappings":"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","sourceRoot":"share"}},{"offset":{"line":26588,"column":0},"map":{"version":3,"names":["ShareAPI","defineUI5Class","interfaces","property","type","defaultValue","getOverflowToolbarConfig","canOverflow","setVisibility","visibility","isTeamsModeActive","CollaborationHelper","content","setVisible","visible","Log","info","Promise","resolve","addStyleClass","style","menuButton","getAggregation","MacroAPI"],"sourceRoot":"share","sources":["ShareAPI.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { defineUI5Class, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport MenuButton from \"sap/m/MenuButton\";\nimport CollaborationHelper from \"sap/suite/ui/commons/collaboration/CollaborationHelper\";\nimport MacroAPI from \"../MacroAPI\";\n/**\n * Building block used to create the ‘Share’ functionality.\n * <br>\n * Please note that the 'Share in SAP Jam' option is only available on platforms that are integrated with SAP Jam.\n * <br>\n * If you are consuming this building block in an environment where the SAP Fiori launchpad is not available, then the 'Save as Tile' option is not visible.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Share\n * \tid=\"someID\"\n *\tvisible=\"true\"\n * /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.ShareAPI\n * @private\n * @since 1.108.0\n */\n@defineUI5Class(\"sap.fe.macros.share.ShareAPI\", {\n\tinterfaces: [\"sap.m.IOverflowToolbarContent\"]\n})\nclass ShareAPI extends MacroAPI {\n\t/**\n\t * The identifier of the 'Share' building block\n\t *\n\t * @private\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * Whether the 'Share' building block is visible or not.\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tvisible!: boolean;\n\n\t/**\n\t * Returns properties for the interface IOverflowToolbarContent.\n\t *\n\t * @returns {object} Returns the configuration of IOverflowToolbarContent\n\t */\n\tgetOverflowToolbarConfig() {\n\t\treturn {\n\t\t\tcanOverflow: false\n\t\t};\n\t}\n\n\t/**\n\t * Sets the visibility of the 'Share' building block based on the value.\n\t * If the 'Share' building block is used in an application that's running in Microsoft Teams,\n\t * this function does not have any effect,\n\t * since the 'Share' building block handles the visibility on it's own in that case.\n\t *\n\t * @param visibility The desired visibility to be set\n\t * @returns Promise which resolves with the instance of ShareAPI\n\t * @private\n\t */\n\tasync setVisibility(visibility: boolean): Promise<this> {\n\t\tconst isTeamsModeActive = await CollaborationHelper.isTeamsModeActive();\n\t\t// In case of teams mode share should not be visible\n\t\t// so we do not do anything\n\t\tif (!isTeamsModeActive) {\n\t\t\tthis.content.setVisible(visibility);\n\t\t\tthis.visible = visibility;\n\t\t} else {\n\t\t\tLog.info(\"Share Building Block: visibility not changed since application is running in teams mode!\");\n\t\t}\n\t\treturn Promise.resolve(this);\n\t}\n\n\t/**\n\t * Adds style class to MenuButton. Requested by the toolbars that contain the Share Button.\n\t *\n\t * @param style\n\t * @returns {object} Returns the reference to the MenuButton\n\t */\n\taddStyleClass(style: string): this {\n\t\tconst menuButton = this.getAggregation(\"content\") as MenuButton;\n\t\tmenuButton.addStyleClass(style);\n\t\treturn this;\n\t}\n}\nexport default ShareAPI;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;EAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAnBA,IAuBMA,QAAQ,WAHbC,cAAc,CAAC,8BAA8B,EAAE;IAC/CC,UAAU,EAAE,CAAC,+BAA+B;EAC7C,CAAC,CAAC,UAOAC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAQ5BD,QAAQ,CAAC;IAAEC,IAAI,EAAE,SAAS;IAAEC,YAAY,EAAE;EAAK,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAGlD;AACD;AACA;AACA;AACA;IAJC,OAKAC,wBAAwB,GAAxB,oCAA2B;MAC1B,OAAO;QACNC,WAAW,EAAE;MACd,CAAC;IACF;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OATC;IAAA,OAUMC,aAAa,GAAnB,6BAAoBC,UAAmB,EAAiB;MACvD,MAAMC,iBAAiB,GAAG,MAAMC,mBAAmB,CAACD,iBAAiB,EAAE;MACvE;MACA;MACA,IAAI,CAACA,iBAAiB,EAAE;QACvB,IAAI,CAACE,OAAO,CAACC,UAAU,CAACJ,UAAU,CAAC;QACnC,IAAI,CAACK,OAAO,GAAGL,UAAU;MAC1B,CAAC,MAAM;QACNM,GAAG,CAACC,IAAI,CAAC,0FAA0F,CAAC;MACrG;MACA,OAAOC,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;IAC7B;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAC,aAAa,GAAb,uBAAcC,KAAa,EAAQ;MAClC,MAAMC,UAAU,GAAG,IAAI,CAACC,cAAc,CAAC,SAAS,CAAe;MAC/DD,UAAU,CAACF,aAAa,CAACC,KAAK,CAAC;MAC/B,OAAO,IAAI;IACZ,CAAC;IAAA;EAAA,EA7DqBG,QAAQ;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA,OA+DhBvB,QAAQ;AAAA"}},{"offset":{"line":26703,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","ClassSupport","CollaborationHelper","MacroAPI","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","property","defineUI5Class","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ShareAPI","interfaces","type","defaultValue","_MacroAPI","_this","_len","arguments","length","args","Array","_key","this","_proto","getOverflowToolbarConfig","canOverflow","setVisibility","async","visibility","isTeamsModeActive","content","setVisible","visible","info","Promise","resolve","addStyleClass","style","menuButton","getAggregation"],"sources":["ShareAPI-dbg.js"],"mappings":"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","sourceRoot":"share"}},{"offset":{"line":26708,"column":0},"map":{"version":3,"names":["SituationsIndicatorBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","getSituationsNavigationProperty","context","navigationProperties","_type","targetType","entityType","situationsNavProps","filter","navigationProperty","isCollection","annotations","Common","SAPObjectNodeType","Name","situationsNavProp","length","undefined","navPropNames","map","prop","join","Log","error","getTemplate","convertMetaModelContext","entitySet","numberOfSituations","pathInModel","visible","propertyPath","greaterThan","and","equal","text","ifElse","tooltip","getTranslatedText","fn","onPress","showPopover","ref","xml","BuildingBlockBase"],"sourceRoot":"situations","sources":["SituationsIndicator.block.ts"],"sourcesContent":["import type { EntitySet, EntityType, NavigationProperty, Singleton } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { convertMetaModelContext } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { BindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { and, equal, fn, greaterThan, ifElse, pathInModel, ref } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { showPopover } from \"sap/fe/macros/situations/SituationsPopover\";\nimport type Context from \"sap/ui/model/Context\";\n\n@defineBuildingBlock({ name: \"SituationsIndicator\", namespace: \"sap.fe.macros.internal.situations\" })\nexport default class SituationsIndicatorBlock extends BuildingBlockBase {\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tentitySet!: Context;\n\n\t@blockAttribute({ type: \"string\", required: false })\n\tpropertyPath?: string;\n\n\tstatic getSituationsNavigationProperty(\n\t\tcontext: EntitySet | Singleton | EntityType | NavigationProperty\n\t): NavigationProperty | undefined {\n\t\tlet navigationProperties: NavigationProperty[];\n\t\tswitch (context._type) {\n\t\t\tcase \"NavigationProperty\":\n\t\t\t\tnavigationProperties = context.targetType.navigationProperties;\n\t\t\t\tbreak;\n\t\t\tcase \"EntityType\":\n\t\t\t\tnavigationProperties = context.navigationProperties;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tnavigationProperties = context.entityType.navigationProperties;\n\t\t}\n\n\t\tconst situationsNavProps = navigationProperties.filter(\n\t\t\t(navigationProperty) =>\n\t\t\t\t!navigationProperty.isCollection &&\n\t\t\t\tnavigationProperty.targetType.annotations.Common?.SAPObjectNodeType?.Name === \"BusinessSituation\"\n\t\t);\n\n\t\tconst situationsNavProp: NavigationProperty | undefined = situationsNavProps.length >= 1 ? situationsNavProps[0] : undefined;\n\n\t\t// only one navigation property may lead to an entity tagged as \"BusinessSituation\"\n\t\tif (situationsNavProps.length > 1) {\n\t\t\tconst navPropNames = situationsNavProps.map((prop) => `'${prop.name}'`).join(\", \");\n\n\t\t\tlet name: string;\n\t\t\tswitch (context._type) {\n\t\t\t\tcase \"NavigationProperty\":\n\t\t\t\t\tname = context.targetType.name;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"EntityType\":\n\t\t\t\t\tname = context.name;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tname = context.entityType.name;\n\t\t\t}\n\n\t\t\tLog.error(`Entity type '${name}' has multiple paths to SAP Situations (${navPropNames}). Using '${situationsNavProp?.name}'.\nHint: Make sure there is at most one navigation property whose target entity type is annotated with\n<Annotation Term=\"com.sap.vocabularies.Common.v1.SAPObjectNodeType\">\n  <Record>\n    <PropertyValue Property=\"Name\" String=\"BusinessSituation\" />\n  </Record>\n</Annotation>.`);\n\t\t}\n\n\t\treturn situationsNavProp;\n\t}\n\n\tgetTemplate() {\n\t\tconst context = convertMetaModelContext(this.entitySet);\n\t\tconst situationsNavProp = SituationsIndicatorBlock.getSituationsNavigationProperty(context);\n\t\tif (!situationsNavProp) {\n\t\t\t// No path to SAP Situations. That is, the entity type is not situation-enabled. Ignore this fragment.\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst numberOfSituations = pathInModel(`${situationsNavProp.name}/SitnNumberOfInstances`);\n\n\t\t// Indicator visibility\n\t\tlet visible: BindingToolkitExpression<boolean>;\n\t\tif (!this.propertyPath) {\n\t\t\t// no propertyPath --> visibility depends on the number of situations only\n\t\t\tvisible = greaterThan(numberOfSituations, 0);\n\t\t} else {\n\t\t\t// propertyPath --> visibility depends on the number of situations and on the semantic key used for showing indicators\n\t\t\tvisible = and(\n\t\t\t\tgreaterThan(numberOfSituations, 0),\n\t\t\t\tequal(pathInModel(\"semanticKeyHasDraftIndicator\", \"internal\"), this.propertyPath)\n\t\t\t);\n\t\t}\n\n\t\t// Button text: the number of situations if there are multiple, the empty string otherwise\n\t\tconst text = ifElse(greaterThan(numberOfSituations, 1), numberOfSituations, \"\");\n\n\t\t// Button tooltip: \"There is one situation\" / \"There are <n> situations\"\n\t\tconst tooltip = ifElse(\n\t\t\tequal(numberOfSituations, 1),\n\t\t\tthis.getTranslatedText(\"situationsTooltipSingular\"),\n\t\t\tfn(\"formatMessage\", [this.getTranslatedText(\"situationsTooltipPlural\"), numberOfSituations])\n\t\t);\n\n\t\t// 'press' handler\n\t\tconst onPress = fn(showPopover, [ref(\"$controller\"), ref(\"$event\"), situationsNavProp.name]);\n\n\t\treturn xml`\n\t\t\t<m:Button core:require=\"{rt: 'sap/fe/macros/situations/SituationsPopover', formatMessage: 'sap/base/strings/formatMessage'}\"\n\t\t\t\ttype=\"Attention\"\n\t\t\t\ticon=\"sap-icon://alert\"\n\t\t\t\ttext=\"${text}\"\n\t\t\t\ttooltip=\"${tooltip}\"\n\t\t\t\tvisible=\"${visible}\"\n\t\t\t\tpress=\"${onPress}\"\n\t\t\t/>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":26852,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","MetaModelConverter","BindingToolkit","SituationsPopover","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","_exports","showPopover","ref","pathInModel","ifElse","greaterThan","fn","equal","and","convertMetaModelContext","xml","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","SituationsIndicatorBlock","name","namespace","type","required","_BuildingBlockBase","_this","_len","arguments","length","args","Array","_key","this","getSituationsNavigationProperty","navigationProperties","_type","targetType","entityType","situationsNavProps","filter","navigationProperty","_navigationProperty$t","_navigationProperty$t2","isCollection","annotations","Common","SAPObjectNodeType","Name","situationsNavProp","navPropNames","map","prop","join","error","_proto","getTemplate","entitySet","numberOfSituations","visible","propertyPath","text","tooltip","getTranslatedText","onPress"],"sources":["SituationsIndicator.block-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,gEAAO,CAAC,eAAgB,+CAAgD,kDAAmD,4DAA6D,4CAA6C,qCAAsC,8CAA+C,SAAUC,EAAKC,EAAmBC,EAAsBC,EAAgCC,EAAoBC,EAAgBC,GAC3b,aAEA,IAAIC,EAAMC,EAAOC,EAAOC,EAAQC,EAASC,EAAaC,EACtD,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAcT,EAAkBS,YACpC,IAAIC,EAAMX,EAAeW,IACzB,IAAIC,EAAcZ,EAAeY,YACjC,IAAIC,EAASb,EAAea,OAC5B,IAAIC,EAAcd,EAAec,YACjC,IAAIC,EAAKf,EAAee,GACxB,IAAIC,EAAQhB,EAAegB,MAC3B,IAAIC,EAAMjB,EAAeiB,IACzB,IAAIC,EAA0BnB,EAAmBmB,wBACjD,IAAIC,EAAMrB,EAA+BqB,IACzC,IAAIC,EAAsBvB,EAAqBuB,oBAC/C,IAAIC,EAAiBxB,EAAqBwB,eAC1C,SAASC,EAA2BC,EAAQC,EAAUC,EAAYC,GAAW,IAAKD,EAAY,OAAQE,OAAOC,eAAeL,EAAQC,EAAU,CAAEK,WAAYJ,EAAWI,WAAYC,aAAcL,EAAWK,aAAcC,SAAUN,EAAWM,SAAUC,MAAOP,EAAWQ,YAAcR,EAAWQ,YAAYC,KAAKR,QAAgB,GAAM,CAC3U,SAASS,EAAuBC,GAAQ,GAAIA,SAAc,EAAG,CAAE,MAAM,IAAIC,eAAe,4DAA8D,CAAE,OAAOD,CAAM,CACrK,SAASE,EAAeC,EAAUC,GAAcD,EAASE,UAAYd,OAAOe,OAAOF,EAAWC,WAAYF,EAASE,UAAUE,YAAcJ,EAAUK,EAAgBL,EAAUC,EAAa,CAC5L,SAASI,EAAgBC,EAAGC,GAAKF,EAAkBjB,OAAOoB,eAAiBpB,OAAOoB,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CACvM,SAASI,EAA0B3B,EAAQC,EAAU2B,EAAY1B,EAAYC,GAAW,IAAI0B,EAAO,CAAC,EAAGzB,OAAO0B,KAAK5B,GAAY6B,QAAQ,SAAUC,GAAOH,EAAKG,GAAO9B,EAAW8B,EAAM,GAAIH,EAAKvB,aAAeuB,EAAKvB,WAAYuB,EAAKtB,eAAiBsB,EAAKtB,aAAc,GAAI,UAAWsB,GAAQA,EAAKnB,YAAa,CAAEmB,EAAKrB,SAAW,IAAM,CAAEqB,EAAOD,EAAWK,QAAQC,UAAUC,OAAO,SAAUN,EAAMO,GAAa,OAAOA,EAAUpC,EAAQC,EAAU4B,IAASA,CAAM,EAAGA,GAAO,GAAI1B,GAAW0B,EAAKnB,mBAAqB,EAAG,CAAEmB,EAAKpB,MAAQoB,EAAKnB,YAAcmB,EAAKnB,YAAYC,KAAKR,QAAgB,EAAG0B,EAAKnB,YAAc2B,SAAW,CAAE,GAAIR,EAAKnB,mBAAqB,EAAG,CAAEN,OAAOC,eAAeL,EAAQC,EAAU4B,GAAOA,EAAO,IAAM,CAAE,OAAOA,CAAM,CACntB,SAASS,EAA0BpC,EAAYC,GAAW,MAAM,IAAIoC,MAAM,wDAA0D,gFAAkF,CACtN,IAAIC,GAA4B7D,EAAOkB,EAAoB,CACzD4C,KAAM,sBACNC,UAAW,sCACT9D,EAAQkB,EAAe,CACzB6C,KAAM,uBACNC,SAAU,OACR/D,EAAQiB,EAAe,CACzB6C,KAAM,SACNC,SAAU,QACRjE,EAAKG,GAAUC,EAAuB,SAAU8D,GAClD9B,EAAeyB,EAA0BK,GACzC,SAASL,IACP,IAAIM,EACJ,IAAK,IAAIC,EAAOC,UAAUC,OAAQC,EAAO,IAAIC,MAAMJ,GAAOK,EAAO,EAAGA,EAAOL,EAAMK,IAAQ,CACvFF,EAAKE,GAAQJ,UAAUI,EACzB,CACAN,EAAQD,EAAmBlC,KAAK0C,QAASH,IAASG,KAClDtD,EAA2B+C,EAAO,YAAa9D,EAAa4B,EAAuBkC,IACnF/C,EAA2B+C,EAAO,eAAgB7D,EAAc2B,EAAuBkC,IACvF,OAAOA,CACT,CACA5D,EAAWsD,EACXA,EAAyBc,gCAAkC,SAASA,EAAgCnD,GAClG,IAAIoD,EACJ,OAAQpD,EAAQqD,OACd,IAAK,qBACHD,EAAuBpD,EAAQsD,WAAWF,qBAC1C,MACF,IAAK,aACHA,EAAuBpD,EAAQoD,qBAC/B,MACF,QACEA,EAAuBpD,EAAQuD,WAAWH,qBAE9C,MAAMI,EAAqBJ,EAAqBK,OAAOC,IACrD,IAAIC,EAAuBC,EAC3B,OAAQF,EAAmBG,gBAAkBF,EAAwBD,EAAmBJ,WAAWQ,YAAYC,UAAY,MAAQJ,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBK,qBAAuB,MAAQJ,SAAgC,OAAS,EAAIA,EAAuBK,QAAU,mBAAmB,GAEjW,MAAMC,EAAoBV,EAAmBV,QAAU,EAAIU,EAAmB,GAAKtB,UAGnF,GAAIsB,EAAmBV,OAAS,EAAG,CACjC,MAAMqB,EAAeX,EAAmBY,IAAIC,GAAQ,IAAIA,EAAK/B,SAASgC,KAAK,MAC3E,IAAIhC,EACJ,OAAQtC,EAAQqD,OACd,IAAK,qBACHf,EAAOtC,EAAQsD,WAAWhB,KAC1B,MACF,IAAK,aACHA,EAAOtC,EAAQsC,KACf,MACF,QACEA,EAAOtC,EAAQuD,WAAWjB,KAE9BrE,EAAIsG,MAAM,gBAAgBjC,4CAA+C6B,cAAyBD,IAAsB,MAAQA,SAA2B,OAAS,EAAIA,EAAkB5B,+RAO5L,CACA,OAAO4B,CACT,EACA,IAAIM,EAASnC,EAAyBtB,UACtCyD,EAAOC,YAAc,SAASA,IAC5B,MAAMzE,EAAUR,EAAwB0D,KAAKwB,WAC7C,MAAMR,EAAoB7B,EAAyBc,gCAAgCnD,GACnF,IAAKkE,EAAmB,CAEtB,OAAOhC,SACT,CACA,MAAMyC,EAAqBzF,EAAY,GAAGgF,EAAkB5B,8BAG5D,IAAIsC,EACJ,IAAK1B,KAAK2B,aAAc,CAEtBD,EAAUxF,EAAYuF,EAAoB,EAC5C,KAAO,CAELC,EAAUrF,EAAIH,EAAYuF,EAAoB,GAAIrF,EAAMJ,EAAY,+BAAgC,YAAagE,KAAK2B,cACxH,CAGA,MAAMC,EAAO3F,EAAOC,EAAYuF,EAAoB,GAAIA,EAAoB,IAG5E,MAAMI,EAAU5F,EAAOG,EAAMqF,EAAoB,GAAIzB,KAAK8B,kBAAkB,6BAA8B3F,EAAG,gBAAiB,CAAC6D,KAAK8B,kBAAkB,2BAA4BL,KAGlL,MAAMM,EAAU5F,EAAGL,EAAa,CAACC,EAAI,eAAgBA,EAAI,UAAWiF,EAAkB5B,OACtF,OAAO7C,CAAG;;;;YAIJqF;eACGC;eACAH;aACFK;MAET,EACA,OAAO5C,CACT,CA9F0C,CA8FxCnE,GAAqBW,EAAc2C,EAA0B5C,EAAQmC,UAAW,YAAa,CAACtC,GAAQ,CACtG2B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACXzB,EAAe0C,EAA0B5C,EAAQmC,UAAW,eAAgB,CAACrC,GAAQ,CACvF0B,aAAc,KACdD,WAAY,KACZE,SAAU,KACVE,YAAa,OACV3B,KAAaD,GAClBI,EAAWsD,EACX,OAAOtD,CACT,EAAG","sourceRoot":"situations"}},{"offset":{"line":26865,"column":0},"map":{"version":3,"names":["bindTimestamp","timestampPropertyPath","path","type","constraints","precision","formatOptions","relative","currentSituationIndicator","createListPopover","controller","expectedNumberOfSituations","listDetailsPopover","listPopover","ResponsivePopover","showHeader","contentHeight","contentWidth","busyIndicatorDelay","placement","content","List","items","events","dataReceived","setContentHeight","parameters","$orderby","$expand","template","CustomListItem","press","goToDetails","HBox","ObjectStatus","icon","state","tooltip","getResourceModel","getText","addStyleClass","ObjectIdentifier","title","bindText","text","templateShareable","showNoData","goToList","unbindObject","close","openBy","event","pressedItem","getSource","context","getBindingContext","createPreviewPopover","getView","addDependent","bindElement","getPath","BusyLocker","unlock","lock","back","toolBarContent","resourceModel","push","Button","titleActive","popoverSettings","customHeader","Toolbar","VBox","Label","Text","shellServices","getAppComponent","getShellServices","navigationArguments","target","action","semanticObject","isNavigationSupported","supported","endButton","situationKey","getObject","undefined","crossAppNavService","params","SitnInstceKey","toExternal","showPopover","situationsNavigationProperty","bindingContext","numberOfSituations","popover","getModel","bindContext","getBoundContext","setBindingContext","__functionName"],"sourceRoot":"situations","sources":["SituationsPopover.ts"],"sourcesContent":["import BusyLocker from \"sap/fe/core/controllerextensions/BusyLocker\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport PageController from \"sap/fe/core/PageController\";\nimport { bindText } from \"sap/fe/macros/situations/SituationsText\";\nimport Button from \"sap/m/Button\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport HBox from \"sap/m/HBox\";\nimport Label from \"sap/m/Label\";\nimport List from \"sap/m/List\";\nimport ObjectIdentifier from \"sap/m/ObjectIdentifier\";\nimport ObjectStatus from \"sap/m/ObjectStatus\";\nimport type { $ResponsivePopoverSettings } from \"sap/m/ResponsivePopover\";\nimport ResponsivePopover from \"sap/m/ResponsivePopover\";\nimport Text from \"sap/m/Text\";\nimport Toolbar from \"sap/m/Toolbar\";\nimport VBox from \"sap/m/VBox\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type { AggregationBindingInfo, PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\nfunction bindTimestamp(timestampPropertyPath: string): PropertyBindingInfo {\n\treturn {\n\t\tpath: timestampPropertyPath,\n\t\ttype: \"sap.ui.model.odata.type.DateTimeOffset\",\n\t\tconstraints: { precision: 7 },\n\t\tformatOptions: { relative: true }\n\t};\n}\n\nlet currentSituationIndicator: Control | undefined;\n\nfunction createListPopover(controller: PageController, expectedNumberOfSituations: number) {\n\tlet listDetailsPopover: ResponsivePopover | null = null;\n\n\tconst listPopover = new ResponsivePopover({\n\t\tshowHeader: false,\n\t\tcontentHeight: `${expectedNumberOfSituations * 4.5}em`,\n\t\tcontentWidth: \"25em\",\n\t\tbusyIndicatorDelay: 200,\n\t\tplacement: \"Horizontal\",\n\t\tcontent: [\n\t\t\tnew List({\n\t\t\t\titems: {\n\t\t\t\t\tpath: \"_Instance\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tdataReceived: () => {\n\t\t\t\t\t\t\tlistPopover.setContentHeight();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\t$orderby: \"SitnInstceLastChgdAtDateTime desc\",\n\t\t\t\t\t\t$expand: \"_InstanceAttribute($expand=_InstanceAttributeValue)\" // required for formatting the texts\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: new CustomListItem({\n\t\t\t\t\t\ttype: \"Navigation\",\n\t\t\t\t\t\tpress: goToDetails,\n\t\t\t\t\t\tcontent: [\n\t\t\t\t\t\t\tnew HBox({\n\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\tnew ObjectStatus({\n\t\t\t\t\t\t\t\t\t\ticon: \"sap-icon://alert\",\n\t\t\t\t\t\t\t\t\t\tstate: \"Warning\",\n\t\t\t\t\t\t\t\t\t\ttooltip: getResourceModel(controller).getText(\"situation\")\n\t\t\t\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginEnd\"),\n\t\t\t\t\t\t\t\t\tnew ObjectIdentifier({\n\t\t\t\t\t\t\t\t\t\ttitle: bindText(\"SituationTitle\"),\n\t\t\t\t\t\t\t\t\t\ttext: bindTimestamp(\"SitnInstceLastChgdAtDateTime\")\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.addStyleClass(\"sapUiSmallMarginBeginEnd\")\n\t\t\t\t\t\t\t\t.addStyleClass(\"sapUiSmallMarginTopBottom\")\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\ttemplateShareable: false\n\t\t\t\t} as AggregationBindingInfo,\n\t\t\t\tshowNoData: false\n\t\t\t})\n\t\t]\n\t});\n\n\tfunction goToList() {\n\t\tif (listDetailsPopover) {\n\t\t\tlistDetailsPopover.unbindObject();\n\t\t\tlistDetailsPopover.close();\n\t\t}\n\t\tif (currentSituationIndicator) {\n\t\t\tlistPopover.openBy(currentSituationIndicator);\n\t\t}\n\t}\n\n\tasync function goToDetails(event: UI5Event) {\n\t\tconst pressedItem = event.getSource() as Control;\n\t\tconst context = pressedItem.getBindingContext();\n\n\t\tif (context && currentSituationIndicator) {\n\t\t\tif (listDetailsPopover === null) {\n\t\t\t\tlistDetailsPopover = await createPreviewPopover(controller, goToList);\n\t\t\t\tcontroller.getView().addDependent(listDetailsPopover);\n\t\t\t}\n\n\t\t\tlistDetailsPopover.bindElement({\n\t\t\t\tpath: context.getPath(),\n\t\t\t\tparameters: { $expand: \"_InstanceAttribute($expand=_InstanceAttributeValue)\" },\n\t\t\t\tevents: {\n\t\t\t\t\tdataReceived: () => {\n\t\t\t\t\t\tBusyLocker.unlock(listDetailsPopover);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tlistPopover.close();\n\n\t\t\tBusyLocker.lock(listDetailsPopover);\n\t\t\tlistDetailsPopover.openBy(currentSituationIndicator);\n\t\t}\n\t}\n\n\treturn listPopover;\n}\n\nasync function createPreviewPopover(controller: PageController, back?: (event: UI5Event) => void) {\n\tconst toolBarContent: Control[] = [];\n\tconst resourceModel = getResourceModel(controller);\n\n\tif (back) {\n\t\ttoolBarContent.push(\n\t\t\tnew Button({\n\t\t\t\ttype: \"Back\",\n\t\t\t\ttooltip: resourceModel.getText(\"back\"),\n\t\t\t\tpress: back\n\t\t\t}).addStyleClass(\"sapUiNoMarginEnd\")\n\t\t);\n\t}\n\n\ttoolBarContent.push(\n\t\tnew ObjectStatus({\n\t\t\tstate: \"Warning\",\n\t\t\ticon: \"sap-icon://alert\",\n\t\t\ttooltip: resourceModel.getText(\"situationIconTooltip\")\n\t\t}).addStyleClass(\"sapUiSmallMarginBegin\")\n\t);\n\n\ttoolBarContent.push(\n\t\tnew ObjectIdentifier({\n\t\t\ttitleActive: false,\n\t\t\ttitle: bindText(\"SituationTitle\")\n\t\t}).addStyleClass(\"sapUiSmallMarginEnd\")\n\t);\n\n\tconst popoverSettings: $ResponsivePopoverSettings = {\n\t\tcontentWidth: \"25em\",\n\t\tcontentHeight: \"7em\",\n\t\tplacement: \"Horizontal\",\n\t\tcustomHeader: new Toolbar({ content: toolBarContent }),\n\t\tbusyIndicatorDelay: 100,\n\t\tcontent: [\n\t\t\tnew VBox({\n\t\t\t\titems: [\n\t\t\t\t\tnew Label({ text: bindTimestamp(\"SitnInstceLastChgdAtDateTime\") }),\n\t\t\t\t\tnew Text({ text: bindText(\"SituationText\") }).addStyleClass(\"sapUiTinyMarginTop\")\n\t\t\t\t]\n\t\t\t})\n\t\t]\n\t};\n\n\tconst shellServices = controller.getAppComponent().getShellServices();\n\tconst navigationArguments: any = {\n\t\ttarget: {\n\t\t\taction: \"displayExtended\",\n\t\t\tsemanticObject: \"SituationInstance\"\n\t\t}\n\t};\n\tconst isNavigationSupported = await shellServices.isNavigationSupported([navigationArguments]);\n\n\tif (isNavigationSupported[0].supported) {\n\t\tpopoverSettings.endButton = new Button({\n\t\t\ttext: resourceModel.getText(\"showDetails\"),\n\n\t\t\tpress: (event: UI5Event) => {\n\t\t\t\tconst situationKey = (event.getSource() as Control).getBindingContext()?.getObject(`SitnInstceKey`);\n\n\t\t\t\tif (situationKey !== undefined && situationKey !== null && shellServices.crossAppNavService) {\n\t\t\t\t\tnavigationArguments.params = { SitnInstceKey: situationKey };\n\t\t\t\t\tshellServices.crossAppNavService.toExternal(navigationArguments);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\treturn new ResponsivePopover(popoverSettings).addStyleClass(\"sapUiPopupWithPadding\").addStyleClass(\"sapUiResponsivePadding--header\");\n}\n\nexport async function showPopover(controller: PageController, event: UI5Event, situationsNavigationProperty: string) {\n\tcurrentSituationIndicator = event.getSource() as Control;\n\n\tconst bindingContext = currentSituationIndicator.getBindingContext() as Context,\n\t\tnumberOfSituations = bindingContext.getObject(`${situationsNavigationProperty}/SitnNumberOfInstances`);\n\n\tlet popover: ResponsivePopover;\n\tconst context = bindingContext\n\t\t.getModel()\n\t\t.bindContext(situationsNavigationProperty, bindingContext, {\n\t\t\t$expand: \"_Instance($expand=_InstanceAttribute($expand=_InstanceAttributeValue))\"\n\t\t} as any)\n\t\t.getBoundContext();\n\n\tif (numberOfSituations <= 1) {\n\t\tpopover = await createPreviewPopover(controller);\n\t\tpopover.setBindingContext(context);\n\t\tpopover.bindElement({ path: \"_Instance/0\" });\n\t} else {\n\t\tpopover = createListPopover(controller, numberOfSituations);\n\t\tpopover.setBindingContext(context);\n\t}\n\n\tcontroller.getView().addDependent(popover);\n\tpopover.openBy(currentSituationIndicator);\n}\n\nshowPopover.__functionName = \"rt.showPopover\";\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;EAqBA,SAASA,aAAa,CAACC,qBAA6B,EAAuB;IAC1E,OAAO;MACNC,IAAI,EAAED,qBAAqB;MAC3BE,IAAI,EAAE,wCAAwC;MAC9CC,WAAW,EAAE;QAAEC,SAAS,EAAE;MAAE,CAAC;MAC7BC,aAAa,EAAE;QAAEC,QAAQ,EAAE;MAAK;IACjC,CAAC;EACF;EAEA,IAAIC,yBAA8C;EAElD,SAASC,iBAAiB,CAACC,UAA0B,EAAEC,0BAAkC,EAAE;IAC1F,IAAIC,kBAA4C,GAAG,IAAI;IAEvD,MAAMC,WAAW,GAAG,IAAIC,iBAAiB,CAAC;MACzCC,UAAU,EAAE,KAAK;MACjBC,aAAa,EAAG,GAAEL,0BAA0B,GAAG,GAAI,IAAG;MACtDM,YAAY,EAAE,MAAM;MACpBC,kBAAkB,EAAE,GAAG;MACvBC,SAAS,EAAE,YAAY;MACvBC,OAAO,EAAE,CACR,IAAIC,IAAI,CAAC;QACRC,KAAK,EAAE;UACNpB,IAAI,EAAE,WAAW;UACjBqB,MAAM,EAAE;YACPC,YAAY,EAAE,MAAM;cACnBX,WAAW,CAACY,gBAAgB,EAAE;YAC/B;UACD,CAAC;UACDC,UAAU,EAAE;YACXC,QAAQ,EAAE,mCAAmC;YAC7CC,OAAO,EAAE,qDAAqD,CAAC;UAChE,CAAC;;UACDC,QAAQ,EAAE,IAAIC,cAAc,CAAC;YAC5B3B,IAAI,EAAE,YAAY;YAClB4B,KAAK,EAAEC,WAAW;YAClBZ,OAAO,EAAE,CACR,IAAIa,IAAI,CAAC;cACRX,KAAK,EAAE,CACN,IAAIY,YAAY,CAAC;gBAChBC,IAAI,EAAE,kBAAkB;gBACxBC,KAAK,EAAE,SAAS;gBAChBC,OAAO,EAAEC,gBAAgB,CAAC5B,UAAU,CAAC,CAAC6B,OAAO,CAAC,WAAW;cAC1D,CAAC,CAAC,CAACC,aAAa,CAAC,oBAAoB,CAAC,EACtC,IAAIC,gBAAgB,CAAC;gBACpBC,KAAK,EAAEC,QAAQ,CAAC,gBAAgB,CAAC;gBACjCC,IAAI,EAAE5C,aAAa,CAAC,8BAA8B;cACnD,CAAC,CAAC;YAEJ,CAAC,CAAC,CACAwC,aAAa,CAAC,0BAA0B,CAAC,CACzCA,aAAa,CAAC,2BAA2B,CAAC;UAE9C,CAAC,CAAC;UACFK,iBAAiB,EAAE;QACpB,CAA2B;QAC3BC,UAAU,EAAE;MACb,CAAC,CAAC;IAEJ,CAAC,CAAC;IAEF,SAASC,QAAQ,GAAG;MACnB,IAAInC,kBAAkB,EAAE;QACvBA,kBAAkB,CAACoC,YAAY,EAAE;QACjCpC,kBAAkB,CAACqC,KAAK,EAAE;MAC3B;MACA,IAAIzC,yBAAyB,EAAE;QAC9BK,WAAW,CAACqC,MAAM,CAAC1C,yBAAyB,CAAC;MAC9C;IACD;IAEA,eAAewB,WAAW,CAACmB,KAAe,EAAE;MAC3C,MAAMC,WAAW,GAAGD,KAAK,CAACE,SAAS,EAAa;MAChD,MAAMC,OAAO,GAAGF,WAAW,CAACG,iBAAiB,EAAE;MAE/C,IAAID,OAAO,IAAI9C,yBAAyB,EAAE;QACzC,IAAII,kBAAkB,KAAK,IAAI,EAAE;UAChCA,kBAAkB,GAAG,MAAM4C,oBAAoB,CAAC9C,UAAU,EAAEqC,QAAQ,CAAC;UACrErC,UAAU,CAAC+C,OAAO,EAAE,CAACC,YAAY,CAAC9C,kBAAkB,CAAC;QACtD;QAEAA,kBAAkB,CAAC+C,WAAW,CAAC;UAC9BzD,IAAI,EAAEoD,OAAO,CAACM,OAAO,EAAE;UACvBlC,UAAU,EAAE;YAAEE,OAAO,EAAE;UAAsD,CAAC;UAC9EL,MAAM,EAAE;YACPC,YAAY,EAAE,MAAM;cACnBqC,UAAU,CAACC,MAAM,CAAClD,kBAAkB,CAAC;YACtC;UACD;QACD,CAAC,CAAC;QAEFC,WAAW,CAACoC,KAAK,EAAE;QAEnBY,UAAU,CAACE,IAAI,CAACnD,kBAAkB,CAAC;QACnCA,kBAAkB,CAACsC,MAAM,CAAC1C,yBAAyB,CAAC;MACrD;IACD;IAEA,OAAOK,WAAW;EACnB;EAEA,eAAe2C,oBAAoB,CAAC9C,UAA0B,EAAEsD,IAAgC,EAAE;IACjG,MAAMC,cAAyB,GAAG,EAAE;IACpC,MAAMC,aAAa,GAAG5B,gBAAgB,CAAC5B,UAAU,CAAC;IAElD,IAAIsD,IAAI,EAAE;MACTC,cAAc,CAACE,IAAI,CAClB,IAAIC,MAAM,CAAC;QACVjE,IAAI,EAAE,MAAM;QACZkC,OAAO,EAAE6B,aAAa,CAAC3B,OAAO,CAAC,MAAM,CAAC;QACtCR,KAAK,EAAEiC;MACR,CAAC,CAAC,CAACxB,aAAa,CAAC,kBAAkB,CAAC,CACpC;IACF;IAEAyB,cAAc,CAACE,IAAI,CAClB,IAAIjC,YAAY,CAAC;MAChBE,KAAK,EAAE,SAAS;MAChBD,IAAI,EAAE,kBAAkB;MACxBE,OAAO,EAAE6B,aAAa,CAAC3B,OAAO,CAAC,sBAAsB;IACtD,CAAC,CAAC,CAACC,aAAa,CAAC,uBAAuB,CAAC,CACzC;IAEDyB,cAAc,CAACE,IAAI,CAClB,IAAI1B,gBAAgB,CAAC;MACpB4B,WAAW,EAAE,KAAK;MAClB3B,KAAK,EAAEC,QAAQ,CAAC,gBAAgB;IACjC,CAAC,CAAC,CAACH,aAAa,CAAC,qBAAqB,CAAC,CACvC;IAED,MAAM8B,eAA2C,GAAG;MACnDrD,YAAY,EAAE,MAAM;MACpBD,aAAa,EAAE,KAAK;MACpBG,SAAS,EAAE,YAAY;MACvBoD,YAAY,EAAE,IAAIC,OAAO,CAAC;QAAEpD,OAAO,EAAE6C;MAAe,CAAC,CAAC;MACtD/C,kBAAkB,EAAE,GAAG;MACvBE,OAAO,EAAE,CACR,IAAIqD,IAAI,CAAC;QACRnD,KAAK,EAAE,CACN,IAAIoD,KAAK,CAAC;UAAE9B,IAAI,EAAE5C,aAAa,CAAC,8BAA8B;QAAE,CAAC,CAAC,EAClE,IAAI2E,IAAI,CAAC;UAAE/B,IAAI,EAAED,QAAQ,CAAC,eAAe;QAAE,CAAC,CAAC,CAACH,aAAa,CAAC,oBAAoB,CAAC;MAEnF,CAAC,CAAC;IAEJ,CAAC;IAED,MAAMoC,aAAa,GAAGlE,UAAU,CAACmE,eAAe,EAAE,CAACC,gBAAgB,EAAE;IACrE,MAAMC,mBAAwB,GAAG;MAChCC,MAAM,EAAE;QACPC,MAAM,EAAE,iBAAiB;QACzBC,cAAc,EAAE;MACjB;IACD,CAAC;IACD,MAAMC,qBAAqB,GAAG,MAAMP,aAAa,CAACO,qBAAqB,CAAC,CAACJ,mBAAmB,CAAC,CAAC;IAE9F,IAAII,qBAAqB,CAAC,CAAC,CAAC,CAACC,SAAS,EAAE;MACvCd,eAAe,CAACe,SAAS,GAAG,IAAIjB,MAAM,CAAC;QACtCxB,IAAI,EAAEsB,aAAa,CAAC3B,OAAO,CAAC,aAAa,CAAC;QAE1CR,KAAK,EAAGoB,KAAe,IAAK;UAAA;UAC3B,MAAMmC,YAAY,yBAAInC,KAAK,CAACE,SAAS,EAAE,CAAaE,iBAAiB,EAAE,uDAAlD,mBAAoDgC,SAAS,CAAE,eAAc,CAAC;UAEnG,IAAID,YAAY,KAAKE,SAAS,IAAIF,YAAY,KAAK,IAAI,IAAIV,aAAa,CAACa,kBAAkB,EAAE;YAC5FV,mBAAmB,CAACW,MAAM,GAAG;cAAEC,aAAa,EAAEL;YAAa,CAAC;YAC5DV,aAAa,CAACa,kBAAkB,CAACG,UAAU,CAACb,mBAAmB,CAAC;UACjE;QACD;MACD,CAAC,CAAC;IACH;IAEA,OAAO,IAAIjE,iBAAiB,CAACwD,eAAe,CAAC,CAAC9B,aAAa,CAAC,uBAAuB,CAAC,CAACA,aAAa,CAAC,gCAAgC,CAAC;EACrI;EAEO,eAAeqD,WAAW,CAACnF,UAA0B,EAAEyC,KAAe,EAAE2C,4BAAoC,EAAE;IACpHtF,yBAAyB,GAAG2C,KAAK,CAACE,SAAS,EAAa;IAExD,MAAM0C,cAAc,GAAGvF,yBAAyB,CAAC+C,iBAAiB,EAAa;MAC9EyC,kBAAkB,GAAGD,cAAc,CAACR,SAAS,CAAE,GAAEO,4BAA6B,wBAAuB,CAAC;IAEvG,IAAIG,OAA0B;IAC9B,MAAM3C,OAAO,GAAGyC,cAAc,CAC5BG,QAAQ,EAAE,CACVC,WAAW,CAACL,4BAA4B,EAAEC,cAAc,EAAE;MAC1DnE,OAAO,EAAE;IACV,CAAC,CAAQ,CACRwE,eAAe,EAAE;IAEnB,IAAIJ,kBAAkB,IAAI,CAAC,EAAE;MAC5BC,OAAO,GAAG,MAAMzC,oBAAoB,CAAC9C,UAAU,CAAC;MAChDuF,OAAO,CAACI,iBAAiB,CAAC/C,OAAO,CAAC;MAClC2C,OAAO,CAACtC,WAAW,CAAC;QAAEzD,IAAI,EAAE;MAAc,CAAC,CAAC;IAC7C,CAAC,MAAM;MACN+F,OAAO,GAAGxF,iBAAiB,CAACC,UAAU,EAAEsF,kBAAkB,CAAC;MAC3DC,OAAO,CAACI,iBAAiB,CAAC/C,OAAO,CAAC;IACnC;IAEA5C,UAAU,CAAC+C,OAAO,EAAE,CAACC,YAAY,CAACuC,OAAO,CAAC;IAC1CA,OAAO,CAAC/C,MAAM,CAAC1C,yBAAyB,CAAC;EAC1C;EAAC;EAEDqF,WAAW,CAACS,cAAc,GAAG,gBAAgB;EAAC;AAAA"}},{"offset":{"line":27048,"column":0},"map":{"version":3,"names":["sap","ui","define","BusyLocker","ResourceModelHelper","SituationsText","Button","CustomListItem","HBox","Label","List","ObjectIdentifier","ObjectStatus","ResponsivePopover","Text","Toolbar","VBox","_exports","bindText","getResourceModel","bindTimestamp","timestampPropertyPath","path","type","constraints","precision","formatOptions","relative","currentSituationIndicator","createListPopover","controller","expectedNumberOfSituations","listDetailsPopover","listPopover","showHeader","contentHeight","contentWidth","busyIndicatorDelay","placement","content","items","events","dataReceived","setContentHeight","parameters","$orderby","$expand","template","press","goToDetails","icon","state","tooltip","getText","addStyleClass","title","text","templateShareable","showNoData","goToList","unbindObject","close","openBy","async","event","pressedItem","getSource","context","getBindingContext","createPreviewPopover","getView","addDependent","bindElement","getPath","unlock","lock","back","toolBarContent","resourceModel","push","titleActive","popoverSettings","customHeader","shellServices","getAppComponent","getShellServices","navigationArguments","target","action","semanticObject","isNavigationSupported","supported","endButton","_getBindingContext","situationKey","getObject","undefined","crossAppNavService","params","SitnInstceKey","toExternal","showPopover","situationsNavigationProperty","bindingContext","numberOfSituations","popover","getModel","bindContext","getBoundContext","setBindingContext","__functionName"],"sources":["SituationsPopover-dbg.js"],"mappings":"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","sourceRoot":"situations"}},{"offset":{"line":27053,"column":0},"map":{"version":3,"names":["types","createEdmType","attributeEDMType","EdmBoolean","EdmDate","DateTimeOffset","Decimal","Guid","Int32","EdmString","parseAttributeValue","type","value","oDataType","parseValue","parseInt","parseFloat","getType","formatter","key","template","context","getBindingContext","undefined","attributes","getObject","length","placeholderReplacer","match","attributeSource","attributeName","source","toString","resolvedAttribute","find","attribute","SitnInstceAttribSource","SitnInstceAttribName","Log","error","_InstanceAttributeValue","resolvedAttributeType","SitnInstceAttribEntityType","map","parsedValue","SitnInstceAttribValue","formatValue","join","replace","bindText","textTemplatePropertyPath","parts","path"],"sourceRoot":"situations","sources":["SituationsText.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type Control from \"sap/ui/core/Control\";\nimport EdmBoolean from \"sap/ui/model/odata/type/Boolean\";\nimport EdmDate from \"sap/ui/model/odata/type/Date\";\nimport DateTimeOffset from \"sap/ui/model/odata/type/DateTimeOffset\";\nimport Decimal from \"sap/ui/model/odata/type/Decimal\";\nimport Guid from \"sap/ui/model/odata/type/Guid\";\nimport Int32 from \"sap/ui/model/odata/type/Int32\";\nimport type ODataType from \"sap/ui/model/odata/type/ODataType\";\nimport EdmString from \"sap/ui/model/odata/type/String\";\n\n/**\n * Attribute type.\n *\n * Situation Handling supports a subset of the EDM types.\n */\ntype InstanceAttributeEdmType =\n\t| \"EDM.STRING\"\n\t| \"EDM.DATE\"\n\t| \"EDM.DATETIME\"\n\t| \"EDM.DATETIMEOFFSET\"\n\t| \"EDM.INT32\"\n\t| \"EDM.DECIMAL\"\n\t| \"EDM.GUID\"\n\t| \"EDM.BOOLEAN\";\n\n/**\n * Attribute.\n */\nexport type InstanceAttribute = {\n\tSitnInstceAttribSource: string;\n\tSitnInstceAttribName: string;\n\tSitnInstceAttribEntityType: InstanceAttributeEdmType;\n\t_InstanceAttributeValue?: {\n\t\tSitnInstceAttribValue: string;\n\t}[];\n};\n\nconst types: Partial<Record<InstanceAttributeEdmType, ODataType>> = {};\n\nfunction createEdmType(attributeEDMType: InstanceAttributeEdmType): ODataType {\n\tswitch (attributeEDMType) {\n\t\tcase \"EDM.BOOLEAN\":\n\t\t\treturn new EdmBoolean();\n\t\tcase \"EDM.DATE\":\n\t\tcase \"EDM.DATETIME\":\n\t\t\treturn new EdmDate();\n\t\tcase \"EDM.DATETIMEOFFSET\":\n\t\t\treturn new DateTimeOffset();\n\t\tcase \"EDM.DECIMAL\":\n\t\t\treturn new Decimal();\n\t\tcase \"EDM.GUID\":\n\t\t\treturn new Guid();\n\t\tcase \"EDM.INT32\":\n\t\t\treturn new Int32();\n\t\tcase \"EDM.STRING\":\n\t\t\treturn new EdmString();\n\t\tdefault:\n\t\t\treturn createEdmType(\"EDM.STRING\");\n\t}\n}\n\nfunction parseAttributeValue(type: InstanceAttributeEdmType, value: string, oDataType: ODataType) {\n\tswitch (type) {\n\t\tcase \"EDM.STRING\":\n\t\t\treturn value;\n\t\tcase \"EDM.DATE\":\n\t\tcase \"EDM.DATETIME\":\n\t\tcase \"EDM.DATETIMEOFFSET\":\n\t\t\treturn oDataType.parseValue(value, \"string\");\n\t\tcase \"EDM.INT32\":\n\t\t\treturn parseInt(value, 10);\n\t\tcase \"EDM.DECIMAL\":\n\t\t\treturn parseFloat(value);\n\t\tcase \"EDM.GUID\":\n\t\t\treturn value;\n\t\tcase \"EDM.BOOLEAN\":\n\t\t\t// ABAP style: 'X' = true, '' = false\n\t\t\treturn value === \"X\";\n\t\tdefault:\n\t\t\treturn value;\n\t}\n}\n\nfunction getType(attributeEDMType: InstanceAttributeEdmType): ODataType {\n\tlet type = types[attributeEDMType];\n\tif (!type) {\n\t\ttype = createEdmType(attributeEDMType);\n\t\ttypes[attributeEDMType] = type;\n\t}\n\treturn type;\n}\n\nexport function formatter(this: Control, key: string | undefined | null, template: string | undefined | null) {\n\tconst context = this.getBindingContext();\n\tif (key === undefined || key === null || template === undefined || template === null || !context) {\n\t\treturn \"\";\n\t}\n\n\tconst attributes = context.getObject(\"_InstanceAttribute\") as InstanceAttribute[] | null | undefined;\n\tif (attributes === undefined || attributes === null || attributes.length === 0) {\n\t\treturn template;\n\t}\n\n\tconst placeholderReplacer = (match: string, attributeSource: string, attributeName: string) => {\n\t\tconst source = parseInt(attributeSource, 10).toString(); // remove leading zeros from the attribute source\n\n\t\tconst resolvedAttribute: InstanceAttribute | undefined = attributes.find(\n\t\t\t(attribute) => attribute.SitnInstceAttribSource === source && attribute.SitnInstceAttribName === attributeName\n\t\t);\n\n\t\tif (resolvedAttribute === undefined) {\n\t\t\tLog.error(`Failed to resolve attribute ${attributeSource}.${attributeName}`);\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (!resolvedAttribute._InstanceAttributeValue) {\n\t\t\tLog.error(`Failed to resolve a value for attribute ${attributeSource}.${attributeName}`);\n\t\t\treturn \"\";\n\t\t}\n\n\t\tconst resolvedAttributeType = getType(resolvedAttribute.SitnInstceAttribEntityType);\n\n\t\t// Format the value(s) - if there are multiple, concatenate them\n\t\treturn resolvedAttribute._InstanceAttributeValue\n\t\t\t.map((value) => {\n\t\t\t\tconst parsedValue = parseAttributeValue(\n\t\t\t\t\tresolvedAttribute.SitnInstceAttribEntityType,\n\t\t\t\t\tvalue.SitnInstceAttribValue,\n\t\t\t\t\tresolvedAttributeType\n\t\t\t\t);\n\t\t\t\treturn resolvedAttributeType.formatValue(parsedValue, \"string\");\n\t\t\t})\n\t\t\t.join(\", \");\n\t};\n\n\t// Replace placeholders for attribute values.\n\t// Their format is {<digitsequence>.<something>} - e.g. {01.PURCHASECONTRACT}\n\treturn template.replace(/\\{(\\d+)\\.([^}]+)}/g, placeholderReplacer);\n}\n\nexport function bindText(textTemplatePropertyPath: string) {\n\treturn {\n\t\tparts: [{ path: \"SitnInstceKey\" }, { path: `_InstanceText/${textTemplatePropertyPath}` }],\n\t\tformatter: formatter\n\t};\n}\n"],"mappings":"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"}},{"offset":{"line":27160,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","EdmBoolean","EdmDate","DateTimeOffset","Decimal","Guid","Int32","EdmString","_exports","types","createEdmType","attributeEDMType","parseAttributeValue","type","value","oDataType","parseValue","parseInt","parseFloat","getType","formatter","key","template","context","this","getBindingContext","undefined","attributes","getObject","length","placeholderReplacer","match","attributeSource","attributeName","source","toString","resolvedAttribute","find","attribute","SitnInstceAttribSource","SitnInstceAttribName","error","_InstanceAttributeValue","resolvedAttributeType","SitnInstceAttribEntityType","map","parsedValue","SitnInstceAttribValue","formatValue","join","replace","bindText","textTemplatePropertyPath","parts","path"],"sources":["SituationsText-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,qDAAO,CAAC,eAAgB,kCAAmC,+BAAgC,yCAA0C,kCAAmC,+BAAgC,gCAAiC,kCAAmC,SAAUC,EAAKC,EAAYC,EAASC,EAAgBC,EAASC,EAAMC,EAAOC,GAC3V,aAEA,IAAIC,EAAW,CAAC,EAChB,MAAMC,EAAQ,CAAC,EACf,SAASC,EAAcC,GACrB,OAAQA,GACN,IAAK,cACH,OAAO,IAAIV,EACb,IAAK,WACL,IAAK,eACH,OAAO,IAAIC,EACb,IAAK,qBACH,OAAO,IAAIC,EACb,IAAK,cACH,OAAO,IAAIC,EACb,IAAK,WACH,OAAO,IAAIC,EACb,IAAK,YACH,OAAO,IAAIC,EACb,IAAK,aACH,OAAO,IAAIC,EACb,QACE,OAAOG,EAAc,cAE3B,CACA,SAASE,EAAoBC,EAAMC,EAAOC,GACxC,OAAQF,GACN,IAAK,aACH,OAAOC,EACT,IAAK,WACL,IAAK,eACL,IAAK,qBACH,OAAOC,EAAUC,WAAWF,EAAO,UACrC,IAAK,YACH,OAAOG,SAASH,EAAO,IACzB,IAAK,cACH,OAAOI,WAAWJ,GACpB,IAAK,WACH,OAAOA,EACT,IAAK,cAEH,OAAOA,IAAU,IACnB,QACE,OAAOA,EAEb,CACA,SAASK,EAAQR,GACf,IAAIE,EAAOJ,EAAME,GACjB,IAAKE,EAAM,CACTA,EAAOH,EAAcC,GACrBF,EAAME,GAAoBE,CAC5B,CACA,OAAOA,CACT,CACA,SAASO,EAAUC,EAAKC,GACtB,MAAMC,EAAUC,KAAKC,oBACrB,GAAIJ,IAAQK,WAAaL,IAAQ,MAAQC,IAAaI,WAAaJ,IAAa,OAASC,EAAS,CAChG,MAAO,EACT,CACA,MAAMI,EAAaJ,EAAQK,UAAU,sBACrC,GAAID,IAAeD,WAAaC,IAAe,MAAQA,EAAWE,SAAW,EAAG,CAC9E,OAAOP,CACT,CACA,MAAMQ,EAAsB,CAACC,EAAOC,EAAiBC,KACnD,MAAMC,EAASjB,SAASe,EAAiB,IAAIG,WAE7C,MAAMC,EAAoBT,EAAWU,KAAKC,GAAaA,EAAUC,yBAA2BL,GAAUI,EAAUE,uBAAyBP,GACzI,GAAIG,IAAsBV,UAAW,CACnC1B,EAAIyC,MAAM,+BAA+BT,KAAmBC,KAC5D,MAAO,EACT,CACA,IAAKG,EAAkBM,wBAAyB,CAC9C1C,EAAIyC,MAAM,2CAA2CT,KAAmBC,KACxE,MAAO,EACT,CACA,MAAMU,EAAwBxB,EAAQiB,EAAkBQ,4BAGxD,OAAOR,EAAkBM,wBAAwBG,IAAI/B,IACnD,MAAMgC,EAAclC,EAAoBwB,EAAkBQ,2BAA4B9B,EAAMiC,sBAAuBJ,GACnH,OAAOA,EAAsBK,YAAYF,EAAa,SAAS,GAC9DG,KAAK,KAAK,EAKf,OAAO3B,EAAS4B,QAAQ,qBAAsBpB,EAChD,CACAtB,EAASY,UAAYA,EACrB,SAAS+B,EAASC,GAChB,MAAO,CACLC,MAAO,CAAC,CACNC,KAAM,iBACL,CACDA,KAAM,iBAAiBF,MAEzBhC,UAAWA,EAEf,CACAZ,EAAS2C,SAAWA,EACpB,OAAO3C,CACT,EAAG","sourceRoot":"situations"}},{"offset":{"line":27165,"column":0},"map":{"version":3,"names":["getMenuItemForAction","dataField","action","menuItemAction","table","annotationPath","actionContextPath","CommonHelper","getActionContext","metaPath","getModel","createBindingContext","actionContext","dataFieldDataModelObjectPath","MetaModelConverter","getInvolvedDataModelObjects","collection","undefined","isBound","ActionTarget","isOperationAvailable","annotations","Core","OperationAvailable","valueOf","press","command","TableHelper","pressEventDataFieldForActionButton","contextObjectPath","id","collectionEntity","name","tableDefinition","operationAvailableMap","getObject","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","enabled","isDataFieldForActionEnabled","Action","enableOnSelect","targetEntityType","xml","Label","visible","getMenuItemForIntentBasedNavigation","dataFieldContext","getPressHandlerForDataFieldForIBN","enableAnalytics","isDataFieldForIBNEnabled","RequiresContext","NavigationAvailable","SemanticObject","getMenuItem","convertedMetaData","resolvePath","target","type","isDataFieldForAction","isDataFieldForIntentBasedNavigation","actionPress","noWrap","buildActionWrapper","text","getDataFieldButtonForAction","dataFieldActionContext","generate","isDataModelObjectPathForActionWithDialog","getDataModelObjectPath","context","ButtonType","Transparent","getDataFieldButtonForIntentBasedNavigation","getDataFieldButton","template","getMenuButton","xmltemplate","defaultAction","dataFieldForDefaultAction","defaultActionContext","DefaultActionHandler","getUseDefaultActionOnly","getButtonMode","getDefaultActionHandler","menu","forEach","getDefaultButton","getActions","actions","map","join","getCreateButton","standardActions","annotation","isInsertUpdateTemplated","create","isTemplated","getIBNData","createOutboundDetail","getDeleteButton","delete","getStandardActions","filter","ActionType","Copy","massEdit","insights","getBasicSearch","useBasicSearch","filterBarId","_collectionIsDraftEnabled","getFullScreen","enableFullScreen","getTableActionTemplate"],"sourceRoot":"table","sources":["ActionsTemplating.ts"],"sourcesContent":["import type {\n\tDataFieldAbstractTypes,\n\tDataFieldForAction,\n\tDataFieldForIntentBasedNavigation\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\n\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport {\n\tisDataFieldForAction,\n\tisDataFieldForIntentBasedNavigation,\n\tisDataModelObjectPathForActionWithDialog\n} from \"sap/fe/core/converters/annotations/DataField\";\nimport type { AnnotationAction, BaseAction, CustomAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport { ButtonType } from \"sap/fe/core/converters/controls/Common/Action\";\nimport type { StandardActionConfigType } from \"sap/fe/core/converters/controls/Common/table/StandardActions\";\nimport { ActionType } from \"sap/fe/core/converters/ManifestSettings\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport type { MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\nimport { getDataModelObjectPath } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"../CommonHelper\";\nimport DefaultActionHandler from \"../internal/helpers/DefaultActionHandler\";\nimport type TableBlock from \"./Table.block\";\nimport TableHelper from \"./TableHelper\";\n\n/**\n * Generates the xml string for the DataFieldForAction MenuItem.\n *\n * @param dataField DataField for action\n * @param action The name of the action\n * @param menuItemAction The menuItemAction to be evaluated\n * @param table The instance of the table building block\n * @returns The xml string for the DataFieldForAction MenuItem\n */\nfunction getMenuItemForAction(\n\tdataField: DataFieldForAction,\n\taction: BaseAction | AnnotationAction | CustomAction,\n\tmenuItemAction: BaseAction,\n\ttable: TableBlock\n) {\n\tif (!menuItemAction.annotationPath) return;\n\tconst actionContextPath = CommonHelper.getActionContext(\n\t\ttable.metaPath.getModel().createBindingContext(menuItemAction.annotationPath + \"/Action\")!\n\t);\n\tconst actionContext = table.metaPath.getModel().createBindingContext(actionContextPath);\n\tconst dataFieldDataModelObjectPath = actionContext\n\t\t? MetaModelConverter.getInvolvedDataModelObjects(actionContext, table.collection)\n\t\t: undefined;\n\tconst isBound = dataField.ActionTarget?.isBound;\n\tconst isOperationAvailable = dataField.ActionTarget?.annotations?.Core?.OperationAvailable?.valueOf() !== false;\n\tconst press = menuItemAction.command\n\t\t? \"cmd:\" + menuItemAction.command\n\t\t: TableHelper.pressEventDataFieldForActionButton(\n\t\t\t\t{\n\t\t\t\t\tcontextObjectPath: table.contextObjectPath,\n\t\t\t\t\tid: table.id\n\t\t\t\t},\n\t\t\t\tdataField,\n\t\t\t\ttable.collectionEntity.name,\n\t\t\t\ttable.tableDefinition.operationAvailableMap,\n\t\t\t\tactionContext.getObject(),\n\t\t\t\taction.isNavigable,\n\t\t\t\tmenuItemAction.enableAutoScroll,\n\t\t\t\tmenuItemAction.defaultValuesExtensionFunction\n\t\t  );\n\tconst enabled =\n\t\tmenuItemAction.enabled !== undefined\n\t\t\t? menuItemAction.enabled\n\t\t\t: TableHelper.isDataFieldForActionEnabled(\n\t\t\t\t\ttable.tableDefinition,\n\t\t\t\t\tdataField.Action,\n\t\t\t\t\t!!isBound,\n\t\t\t\t\tactionContext.getObject(),\n\t\t\t\t\tmenuItemAction.enableOnSelect,\n\t\t\t\t\tdataFieldDataModelObjectPath?.targetEntityType\n\t\t\t  );\n\tif (isBound !== true || isOperationAvailable) {\n\t\treturn xml`<MenuItem\n\t\t\t\ttext=\"${dataField.Label}\"\n\t\t\t\tpress=\"${press}\"\n\t\t\t\tenabled=\"${enabled}\"\n\t\t\t\tvisible=\"${menuItemAction.visible}\"\n\t\t\t\t/>`;\n\t}\n}\n\n/**\n * Generates the xml string for the DataFieldForIntentBasedNavigation MenuItem.\n *\n * @param dataField DataField for IntentBasedNavigation\n * @param menuItemAction The menuItemAction to be evaluated\n * @param table The instance of the table building block\n * @returns The xml string for the DataFieldForIntentBasedNavigation MenuItem\n */\nfunction getMenuItemForIntentBasedNavigation(dataField: DataFieldForIntentBasedNavigation, menuItemAction: BaseAction, table: TableBlock) {\n\tconst dataFieldContext = menuItemAction.annotationPath\n\t\t? table.metaPath.getModel().createBindingContext(menuItemAction.annotationPath)\n\t\t: null;\n\treturn xml`<MenuItem xmlns:macrodata=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\ttext=\"${dataField.Label}\"\n\t\t\tpress=\"${\n\t\t\t\tmenuItemAction.command\n\t\t\t\t\t? \"cmd:\" + menuItemAction.command\n\t\t\t\t\t: CommonHelper.getPressHandlerForDataFieldForIBN(\n\t\t\t\t\t\t\tdataFieldContext?.getObject(),\n\t\t\t\t\t\t\t\"${internal>selectedContexts}\",\n\t\t\t\t\t\t\t!table.tableDefinition.enableAnalytics\n\t\t\t\t\t  )\n\t\t\t}\"\n\t\t\tenabled=\"${\n\t\t\t\tmenuItemAction.enabled !== undefined\n\t\t\t\t\t? menuItemAction.enabled\n\t\t\t\t\t: TableHelper.isDataFieldForIBNEnabled(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcollection: table.collection,\n\t\t\t\t\t\t\t\ttableDefinition: table.tableDefinition\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdataField,\n\t\t\t\t\t\t\tdataField.RequiresContext,\n\t\t\t\t\t\t\tdataField.NavigationAvailable\n\t\t\t\t\t  )\n\t\t\t}\"\n\t\t\tvisible=\"${menuItemAction.visible}\"\n\t\t\tmacrodata:IBNData=\"${\n\t\t\t\t!dataField.RequiresContext ? `{semanticObject: '${dataField.SemanticObject}' , action : '${dataField.Action}'}` : undefined\n\t\t\t}\"\n\t\t/>`;\n}\n\n/**\n * Generates the xml string for the MenuItem based on the type of the menuItemAction.\n *\n * @param action The name of the action\n * @param menuItemAction The menuItemAction to be evaluated\n * @param table The instance of the table building block\n * @returns The xml string for the MenuItem\n */\nfunction getMenuItem(action: BaseAction | AnnotationAction | CustomAction, menuItemAction: BaseAction, table: TableBlock) {\n\tconst dataField = menuItemAction.annotationPath\n\t\t? (table.convertedMetaData.resolvePath(menuItemAction.annotationPath).target as DataFieldAbstractTypes)\n\t\t: undefined;\n\n\tswitch (dataField && menuItemAction.type) {\n\t\tcase \"ForAction\":\n\t\t\tif (isDataFieldForAction(dataField!)) {\n\t\t\t\treturn getMenuItemForAction(dataField, action, menuItemAction, table);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"ForNavigation\":\n\t\t\tif (isDataFieldForIntentBasedNavigation(dataField!)) {\n\t\t\t\treturn getMenuItemForIntentBasedNavigation(dataField, menuItemAction, table);\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t}\n\n\tconst actionPress = (menuItemAction as CustomAction).noWrap\n\t\t? menuItemAction.press\n\t\t: CommonHelper.buildActionWrapper(menuItemAction as CustomAction, { id: table.id });\n\treturn xml`<MenuItem\n\t\t\t\tcore:require=\"{FPM: 'sap/fe/core/helpers/FPMHelper'}\"\n\t\t\t\ttext=\"${menuItemAction?.text}\"\n\t\t\t\tpress=\"${menuItemAction.command ? \"cmd:\" + menuItemAction.command : actionPress}\"\n\t\t\t\tvisible=\"${menuItemAction.visible}\"\n\t\t\t\tenabled=\"${menuItemAction.enabled}\"\n\t\t\t/>`;\n}\n\n/**\n * Generates the xml string for the DataFieldForActionButton.\n *\n * @param dataField DataField for action\n * @param action The name of the action\n * @param table The instance of the table building block\n * @returns The xml string for the DataFieldForActionButton\n */\nfunction getDataFieldButtonForAction(\n\tdataField: DataFieldForAction,\n\taction: BaseAction | AnnotationAction | CustomAction,\n\ttable: TableBlock\n) {\n\tconst dataFieldActionContext = table.metaPath.getModel().createBindingContext(action.annotationPath + \"/Action\");\n\tconst actionContextPath = CommonHelper.getActionContext(dataFieldActionContext!);\n\tconst actionContext = table.metaPath.getModel().createBindingContext(actionContextPath);\n\tconst dataFieldDataModelObjectPath = actionContext\n\t\t? MetaModelConverter.getInvolvedDataModelObjects(actionContext, table.collection)\n\t\t: undefined;\n\tconst isBound = dataField.ActionTarget?.isBound;\n\tconst press = action.command\n\t\t? \"cmd:\" + action.command\n\t\t: TableHelper.pressEventDataFieldForActionButton(\n\t\t\t\t{\n\t\t\t\t\tcontextObjectPath: table.contextObjectPath,\n\t\t\t\t\tid: table.id\n\t\t\t\t},\n\t\t\t\tdataField,\n\t\t\t\ttable.collectionEntity.name,\n\t\t\t\ttable.tableDefinition.operationAvailableMap,\n\t\t\t\tactionContext.getObject(),\n\t\t\t\taction.isNavigable,\n\t\t\t\taction.enableAutoScroll,\n\t\t\t\taction.defaultValuesExtensionFunction\n\t\t  );\n\tconst enabled =\n\t\taction.enabled !== undefined\n\t\t\t? action.enabled\n\t\t\t: TableHelper.isDataFieldForActionEnabled(\n\t\t\t\t\ttable.tableDefinition,\n\t\t\t\t\tdataField.Action,\n\t\t\t\t\t!!isBound,\n\t\t\t\t\tactionContext.getObject(),\n\t\t\t\t\taction.enableOnSelect,\n\t\t\t\t\tdataFieldDataModelObjectPath?.targetEntityType\n\t\t\t  );\n\treturn xml`<Button xmlns=\"sap.m\"\n\t\t\t\t\tid=\"${generate([table.id, dataField])}\"\n\t\t\t\t\ttext=\"${dataField.Label}\"\n\t\t\t\t\tariaHasPopup=\"${isDataModelObjectPathForActionWithDialog(\n\t\t\t\t\t\tgetDataModelObjectPath({} as MetaModelContext, { context: dataFieldActionContext! })!\n\t\t\t\t\t)}\"\n\t\t\t\t\tpress=\"${press}\"\n\t\t\t\t\ttype=\"${ButtonType.Transparent}\"\n\t\t\t\t\tenabled=\"${enabled}\"\n\t\t\t\t\tvisible=\"${action.visible}\"\n\t\t\t\t/>`;\n}\n\n/**\n * Generates the xml string for the DataFieldForIntentBasedNavigation Button.\n *\n * @param dataField DataField for IntentBasedNavigation\n * @param action The name of the action\n * @param table The instance of the table building block\n * @returns The xml string for the DataFieldForIntentBasedNavigation Button\n */\nfunction getDataFieldButtonForIntentBasedNavigation(\n\tdataField: DataFieldForIntentBasedNavigation,\n\taction: BaseAction | AnnotationAction | CustomAction,\n\ttable: TableBlock\n) {\n\tconst dataFieldContext = action.annotationPath ? table.metaPath.getModel().createBindingContext(action.annotationPath) : null;\n\treturn xml`<Button xmlns=\"sap.m\"\n\t\t\t\t\tid=\"${generate([table.id, dataField])}\"\n\t\t\t\t\ttext=\"${dataField.Label}\"\n\t\t\t\t\tpress=\"${\n\t\t\t\t\t\taction.command\n\t\t\t\t\t\t\t? \"cmd:\" + action.command\n\t\t\t\t\t\t\t: CommonHelper.getPressHandlerForDataFieldForIBN(\n\t\t\t\t\t\t\t\t\tdataFieldContext?.getObject(),\n\t\t\t\t\t\t\t\t\t\"${internal>selectedContexts}\",\n\t\t\t\t\t\t\t\t\t!table.tableDefinition.enableAnalytics\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t}\"\n\t\t\t\t\ttype=\"${ButtonType.Transparent}\"\n\t\t\t\t\tenabled=\"${\n\t\t\t\t\t\taction.enabled !== undefined\n\t\t\t\t\t\t\t? action.enabled\n\t\t\t\t\t\t\t: TableHelper.isDataFieldForIBNEnabled(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcollection: table.collection,\n\t\t\t\t\t\t\t\t\t\ttableDefinition: table.tableDefinition\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tdataField,\n\t\t\t\t\t\t\t\t\tdataField.RequiresContext,\n\t\t\t\t\t\t\t\t\tdataField.NavigationAvailable\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t}\"\n\t\t\t\t\tvisible=\"${action.visible}\"\n\t\t\t\t\tmacrodata:IBNData=\"${\n\t\t\t\t\t\t!dataField.RequiresContext\n\t\t\t\t\t\t\t? \"{semanticObject: '\" + dataField.SemanticObject + \"' , action : '\" + dataField.Action + \"'}\"\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\"\n\t\t\t\t/>`;\n}\n\n/**\n * Generates the xml string for the button based on the type of the action.\n *\n * @param action The name of the action\n * @param table The instance of the table building block\n * @returns The xml string for the button\n */\nfunction getDataFieldButton(action: BaseAction | AnnotationAction | CustomAction, table: TableBlock) {\n\tconst dataField = action.annotationPath\n\t\t? (table.convertedMetaData.resolvePath(action.annotationPath).target as DataFieldAbstractTypes)\n\t\t: undefined;\n\tlet template = \"\";\n\tif (!dataField) {\n\t\treturn template;\n\t}\n\tswitch (action.type) {\n\t\tcase \"ForAction\":\n\t\t\tif (isDataFieldForAction(dataField)) {\n\t\t\t\tconst isBound = dataField.ActionTarget?.isBound;\n\t\t\t\tconst isOperationAvailable = dataField.ActionTarget?.annotations?.Core?.OperationAvailable?.valueOf() !== false;\n\t\t\t\tif (isBound !== true || isOperationAvailable) {\n\t\t\t\t\ttemplate += getDataFieldButtonForAction(dataField, action, table);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"ForNavigation\":\n\t\t\tif (isDataFieldForIntentBasedNavigation(dataField)) {\n\t\t\t\ttemplate += getDataFieldButtonForIntentBasedNavigation(dataField, action, table);\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t}\n\n\treturn template !== \"\"\n\t\t? `<mdcat:ActionToolbarAction\n\t\t\txmlns=\"sap.m\"\n\t\t\txmlns:mdcat=\"sap.ui.mdc.actiontoolbar\"\n\t\t\txmlns:macrodata=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\">\n\t\t\t${template}\n\t\t\t</mdcat:ActionToolbarAction>`\n\t\t: \"\";\n}\n\n/**\n * Generates the xml string for the MenuButton control which enables the user to show a hierarchical menu.\n *\n * @param action The name of the action\n * @param table The instance of the table building block\n * @returns The xml string for the MenuButton control\n */\nfunction getMenuButton(action: BaseAction | AnnotationAction | CustomAction, table: TableBlock) {\n\tlet xmltemplate = `<mdcat:ActionToolbarAction\n\t\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\t\txmlns:mdcat=\"sap.ui.mdc.actiontoolbar\">`;\n\tconst defaultAction = (action as CustomAction).defaultAction as CustomAction | BaseAction | undefined;\n\tconst dataFieldForDefaultAction = defaultAction?.annotationPath\n\t\t? table.convertedMetaData.resolvePath(defaultAction.annotationPath).target\n\t\t: null;\n\tconst defaultActionContext = defaultAction?.annotationPath\n\t\t? CommonHelper.getActionContext(table.metaPath.getModel().createBindingContext(defaultAction.annotationPath + \"/Action\")!)\n\t\t: null;\n\txmltemplate += xml`<MenuButton\n\t\t\t\t\t\ttext=\"${action.text}\"\n\t\t\t\t\t\ttype=\"${ButtonType.Transparent}\"\n\t\t\t\t\t\tmenuPosition=\"BeginBottom\"\n\t\t\t\t\t\tid=\"${generate([table.id, action.id])}\"\n\t\t\t\t\t\tvisible=\"${action.visible}\"\n\t\t\t\t\t\tenabled=\"${action.enabled}\"\n\t\t\t\t\t\tuseDefaultActionOnly=\"${DefaultActionHandler.getUseDefaultActionOnly(action)}\"\n\t\t\t\t\t\tbuttonMode=\"${DefaultActionHandler.getButtonMode(action)}\"\n\t\t\t\t\t\tdefaultAction=\"${DefaultActionHandler.getDefaultActionHandler(table, action, dataFieldForDefaultAction, defaultActionContext)}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t<menu>\n\t\t\t\t\t\t<Menu>`;\n\taction.menu?.forEach((menuItemAction) => {\n\t\tif (typeof menuItemAction !== \"string\") {\n\t\t\txmltemplate += getMenuItem(action, menuItemAction, table);\n\t\t}\n\t});\n\txmltemplate += `</Menu>\n\t\t\t\t</menu>\n\t\t\t</MenuButton>\n\t\t</mdcat:ActionToolbarAction>`;\n\treturn xmltemplate;\n}\n\n/**\n * Generates the xml string for the default button.\n *\n * @param action The name of the action\n * @param table The instance of the table building block\n * @returns The xml string for the default button.\n */\nfunction getDefaultButton(action: CustomAction, table: TableBlock) {\n\tconst actionPress = action.noWrap ? action.press : CommonHelper.buildActionWrapper(action, { id: table.id });\n\treturn xml`<mdcat:ActionToolbarAction\n\t\txmlns=\"sap.m\"\n\t\txmlns:mdcat=\"sap.ui.mdc.actiontoolbar\">\n\t\t<Button\n\t\t\tcore:require=\"{FPM: 'sap/fe/core/helpers/FPMHelper'}\"\n\t\t\tid=\"${generate([table.id, action.id])}\"\n\t\t\ttext=\"${action.text}\"\n\t\t\tpress=\"${action.command ? \"cmd:\" + action.command : actionPress}\"\n\t\t\ttype=\"${ButtonType.Transparent}\"\n\t\t\tvisible=\"${action.visible}\"\n\t\t\tenabled=\"${action.enabled}\"\n\t\t/>\n\t</mdcat:ActionToolbarAction>`;\n}\n\n/**\n * Generates the xml string for actions based on the type of the action.\n *\n * @param table The instance of the table building block\n * @returns The xml string representation of the action\n */\nfunction getActions(table: TableBlock) {\n\treturn table.tableDefinition.actions\n\t\t.map((action) => {\n\t\t\tswitch (action.type) {\n\t\t\t\tcase \"Default\":\n\t\t\t\t\tif (\"noWrap\" in action) {\n\t\t\t\t\t\treturn getDefaultButton(action, table);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Menu\":\n\t\t\t\t\treturn getMenuButton(action, table);\n\t\t\t\tdefault:\n\t\t\t}\n\t\t\treturn getDataFieldButton(action, table);\n\t\t})\n\t\t.join(\"\");\n}\n\n/**\n * Generates the xml string for the create button.\n *\n * @param standardActions Stantard actions to be evaluated\n * @param table The instance of the table building block\n * @returns The xml string for the create button\n */\nfunction getCreateButton(standardActions: Record<string, StandardActionConfigType>, table: TableBlock) {\n\tif (table.tableDefinition.annotation.standardActions.isInsertUpdateTemplated && standardActions.create.isTemplated !== \"false\") {\n\t\treturn xml`<mdcat:ActionToolbarAction\n\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\txmlns:mdcat=\"sap.ui.mdc.actiontoolbar\"\n\t\t\t\t\txmlns:macrodata=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid=\"${generate([table.id, \"StandardAction\", \"Create\"])}\"\n\t\t\t\t\t\t\ttext=\"{sap.fe.i18n>M_COMMON_TABLE_CREATE}\"\n\t\t\t\t\t\t\tpress=\"cmd:Create\"\n\t\t\t\t\t\t\ttype=\"${ButtonType.Transparent}\"\n\t\t\t\t\t\t\tvisible=\"${standardActions.create.visible}\"\n\t\t\t\t\t\t\tenabled=\"${standardActions.create.enabled}\"\n\t\t\t\t\t\t\tmacrodata:IBNData=\"${TableHelper.getIBNData(table.createOutboundDetail)}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</mdcat:ActionToolbarAction>`;\n\t}\n\treturn \"\";\n}\n\n/**\n * Generates the xml string for the delete button.\n *\n * @param standardActions Stantard actions to be evaluated\n * @param table The instance of the table building block\n * @returns The xml string for the delete button\n */\nfunction getDeleteButton(standardActions: Record<string, StandardActionConfigType>, table: TableBlock) {\n\tif (standardActions.delete.isTemplated !== \"false\") {\n\t\treturn xml`<mdcat:ActionToolbarAction\n\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\txmlns:mdcat=\"sap.ui.mdc.actiontoolbar\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tid=\"${generate([table.id, \"StandardAction\", \"Delete\"])}\"\n\t\t\t\t\t\ttext=\"{sap.fe.i18n>M_COMMON_TABLE_DELETE}\"\n\t\t\t\t\t\tpress=\"cmd:DeleteEntry\"\n\t\t\t\t\t\ttype=\"${ButtonType.Transparent}\"\n\t\t\t\t\t\tvisible=\"${standardActions.delete.visible}\"\n\t\t\t\t\t\tenabled=\"${standardActions.delete.enabled}\"\n\t\t\t\t\t/>\n\t\t\t\t</mdcat:ActionToolbarAction>`;\n\t}\n\treturn \"\";\n}\n\n/**\n * Generates the xml string for standard actions based on the type of the standard action.\n *\n * @param table The instance of the table building block\n * @returns The xml string representation of the standard action\n */\nfunction getStandardActions(table: TableBlock) {\n\tlet xmltemplate = ``;\n\tconst standardActions = table.tableDefinition.annotation.standardActions.actions;\n\n\txmltemplate += getCreateButton(standardActions, table);\n\n\t//  Generates the xml string for the copy button.\n\ttable.tableDefinition.actions\n\t\t.filter((action) => action.type === ActionType.Copy)\n\t\t.forEach((action) => {\n\t\t\tconst dataField = action.annotationPath\n\t\t\t\t? (table.convertedMetaData.resolvePath(action.annotationPath).target as DataFieldForAction)\n\t\t\t\t: undefined;\n\t\t\txmltemplate += `<mdcat:ActionToolbarAction\n\t\t\t\t\txmlns=\"sap.m\"\n\t\t\t\t\txmlns:mdcat=\"sap.ui.mdc.actiontoolbar\">`;\n\n\t\t\txmltemplate += xml`<Button\n\t\t\t\t\t\t\tid=\"${generate([table.id, dataField])}\"\n\t\t\t\t\t\t\ttext=\"${action.text}\"\n\t\t\t\t\t\t\tpress=\"${\n\t\t\t\t\t\t\t\tdataField\n\t\t\t\t\t\t\t\t\t? TableHelper.pressEventDataFieldForActionButton(\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tcontextObjectPath: table.contextObjectPath,\n\t\t\t\t\t\t\t\t\t\t\t\tid: table.id\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tdataField,\n\t\t\t\t\t\t\t\t\t\t\ttable.collectionEntity.name,\n\t\t\t\t\t\t\t\t\t\t\ttable.tableDefinition.operationAvailableMap,\n\t\t\t\t\t\t\t\t\t\t\t\"${internal>selectedContexts}\",\n\t\t\t\t\t\t\t\t\t\t\taction.isNavigable,\n\t\t\t\t\t\t\t\t\t\t\taction.enableAutoScroll,\n\t\t\t\t\t\t\t\t\t\t\taction.defaultValuesExtensionFunction\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\ttype=\"${ButtonType.Transparent}\"\n\t\t\t\t\t\t\tenabled=\"${action.enabled}\"\n\t\t\t\t\t\t\tvisible=\"${action.visible}\"\n\t\t\t\t\t\t/>`;\n\n\t\t\txmltemplate += `</mdcat:ActionToolbarAction>`;\n\t\t});\n\n\txmltemplate += getDeleteButton(standardActions, table);\n\n\t//  Generates the xml string for the massEdit button.\n\tif (table.tableDefinition.annotation.standardActions.isInsertUpdateTemplated && standardActions.massEdit.isTemplated !== \"false\") {\n\t\txmltemplate += xml`<mdcat:ActionToolbarAction xmlns=\"sap.m\" xmlns:mdcat=\"sap.ui.mdc.actiontoolbar\">\n\t\t\t<Button\n\t\t\t\tid=\"${generate([table.id, \"StandardAction\", \"MassEdit\"])}\"\n\t\t\t\ttext=\"{sap.fe.i18n>M_COMMON_TABLE_MASSEDIT}\"\n\t\t\t\tpress=\"API.onMassEditButtonPressed($event, $controller)\"\n\t\t\t\tvisible=\"${standardActions.massEdit.visible}\"\n\t\t\t\tenabled=\"${standardActions.massEdit.enabled}\"\n\t\t\t/>\n\t\t</mdcat:ActionToolbarAction>`;\n\t}\n\n\tif (standardActions.insights.isTemplated !== \"false\") {\n\t\txmltemplate += xml`<mdcat:ActionToolbarAction xmlns=\"sap.m\" xmlns:mdcat=\"sap.ui.mdc.actiontoolbar\">\n\t\t\t<Button\n\t\t\t\tid=\"${generate([table.id, \"StandardAction\", \"Insights\"])}\"\n\t\t\t\ttext=\"{sap.fe.i18n>M_COMMON_INSIGHTS_CARD}\"\n\t\t\t\tpress=\"API.onAddCardToInsightsPressed($event, $controller)\"\n\t\t\t\tvisible=\"${standardActions.insights.visible}\"\n\t\t\t\tenabled=\"${standardActions.insights.enabled}\"\n\t\t\t>\n\t\t\t\t<layoutData>\n\t\t\t\t\t<OverflowToolbarLayoutData priority=\"AlwaysOverflow\" />\n\t\t\t\t</layoutData>\n\t\t\t</Button>\n\t\t</mdcat:ActionToolbarAction>`;\n\t}\n\treturn xmltemplate;\n}\n\n/**\n * Generates the xml string for BasicSearch.\n *\n * @param table The instance of the table building block\n * @returns The xml string representation of the BasicSearch\n */\nfunction getBasicSearch(table: TableBlock) {\n\tif (table.useBasicSearch) {\n\t\treturn xml`<mdcat:ActionToolbarAction xmlns:mdcat=\"sap.ui.mdc.actiontoolbar\" xmlns:macroTable=\"sap.fe.macros.table\">\n\t\t\t\t\t\t<macroTable:BasicSearch id=\"${table.filterBarId}\" useDraftEditState=\"${table._collectionIsDraftEnabled}\"/>\n\t\t\t\t\t</mdcat:ActionToolbarAction>`;\n\t}\n\treturn \"\";\n}\n\n/**\n * Generates the xml string for TableFullScreenDialog.\n *\n * @param table The instance of the table building block\n * @returns The xml string representation of the TableFullScreenDialog\n */\nfunction getFullScreen(table: TableBlock) {\n\tif (table.enableFullScreen) {\n\t\treturn xml`<mdcat:ActionToolbarAction xmlns:mdcat=\"sap.ui.mdc.actiontoolbar\" xmlns:macroTable=\"sap.fe.macros.table\">\n\t\t\t\t\t\t<macroTable:TableFullScreenDialog id=\"${generate([table.id, \"StandardAction\", \"FullScreen\"])}\" />\n\t\t\t\t\t</mdcat:ActionToolbarAction>`;\n\t}\n\treturn \"\";\n}\n\n/**\n * Generates the xml string for actions.\n *\n * @param table The instance of the table building block\n * @returns The xml string representation of the actions\n */\nexport function getTableActionTemplate(table: TableBlock) {\n\treturn getBasicSearch(table) + getActions(table) + getStandardActions(table) + getFullScreen(table);\n}\n"],"mappings":"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"}},{"offset":{"line":27610,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockTemplateProcessor","DataField","Action","ManifestSettings","MetaModelConverter","StableIdHelper","UIFormatters","CommonHelper","DefaultActionHandler","TableHelper","_exports","getDataModelObjectPath","generate","ActionType","ButtonType","isDataModelObjectPathForActionWithDialog","isDataFieldForIntentBasedNavigation","isDataFieldForAction","xml","getMenuItemForAction","dataField","action","menuItemAction","table","_dataField$ActionTarg","_dataField$ActionTarg2","_dataField$ActionTarg3","_dataField$ActionTarg4","_dataField$ActionTarg5","annotationPath","actionContextPath","getActionContext","metaPath","getModel","createBindingContext","actionContext","dataFieldDataModelObjectPath","getInvolvedDataModelObjects","collection","undefined","isBound","ActionTarget","isOperationAvailable","annotations","Core","OperationAvailable","valueOf","press","command","pressEventDataFieldForActionButton","contextObjectPath","id","collectionEntity","name","tableDefinition","operationAvailableMap","getObject","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","enabled","isDataFieldForActionEnabled","enableOnSelect","targetEntityType","Label","visible","getMenuItemForIntentBasedNavigation","dataFieldContext","getPressHandlerForDataFieldForIBN","enableAnalytics","isDataFieldForIBNEnabled","RequiresContext","NavigationAvailable","SemanticObject","getMenuItem","convertedMetaData","resolvePath","target","type","actionPress","noWrap","buildActionWrapper","text","getDataFieldButtonForAction","_dataField$ActionTarg6","dataFieldActionContext","context","Transparent","getDataFieldButtonForIntentBasedNavigation","getDataFieldButton","template","_dataField$ActionTarg7","_dataField$ActionTarg8","_dataField$ActionTarg9","_dataField$ActionTarg10","_dataField$ActionTarg11","getMenuButton","_action$menu","xmltemplate","defaultAction","dataFieldForDefaultAction","defaultActionContext","getUseDefaultActionOnly","getButtonMode","getDefaultActionHandler","menu","forEach","getDefaultButton","getActions","actions","map","join","getCreateButton","standardActions","annotation","isInsertUpdateTemplated","create","isTemplated","getIBNData","createOutboundDetail","getDeleteButton","delete","getStandardActions","filter","Copy","massEdit","insights","getBasicSearch","useBasicSearch","filterBarId","_collectionIsDraftEnabled","getFullScreen","enableFullScreen","getTableActionTemplate"],"sources":["ActionsTemplating-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":27727,"column":0},"map":{"version":3,"names":["BasicSearch","defineUI5Class","implementInterface","event","aggregation","type","multiple","property","__implements__sap_ui_mdc_IFilterSource","init","setAggregation","SearchField","placeholder","search","fireEvent","getConditions","useDraftEditState","getEditStatusFilter","undefined","getTypeUtil","TypeUtil","getPropertyInfoSet","name","path","groupLabel","group","typeConfig","getTypeConfig","dataType","hiddenFilter","getSearch","filter","getValue","validate","Promise","resolve","render","oRm","oControl","openStart","openEnd","renderControl","close","Control"],"sourceRoot":"table","sources":["BasicSearch.ts"],"sourcesContent":["import type { EnhanceWithUI5 } from \"sap/fe/core/helpers/ClassSupport\";\nimport { aggregation, defineUI5Class, event, implementInterface, property } from \"sap/fe/core/helpers/ClassSupport\";\nimport { getEditStatusFilter } from \"sap/fe/core/templating/FilterHelper\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport SearchField from \"sap/m/SearchField\";\nimport Control from \"sap/ui/core/Control\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type { IFilter } from \"sap/ui/mdc/library\";\n\n@defineUI5Class(\"sap.fe.macros.table.BasicSearch\")\nclass BasicSearch extends Control implements IFilter {\n\t@implementInterface(\"sap.ui.mdc.IFilter\")\n\t__implements__sap_ui_mdc_IFilter: boolean = true;\n\n\t__implements__sap_ui_mdc_IFilterSource: boolean = true;\n\n\t/**\n\t * The 'filterChanged' can be optionally implemented to display an overlay\n\t * when the filter value of the IFilter changes\n\t */\n\t@event(/*{ conditionsBased: {\n\t\t \ttype: \"boolean\"\n\t\t }}*/)\n\tfilterChanged!: Function;\n\n\t/**\n\t * The 'search' event is a mandatory IFilter event to trigger a search query\n\t * on the consuming control\n\t */\n\t@event(/*{\n\t\t\t\tconditions: {\n\t\t\t\t\ttype: \"object\"\n\t\t\t\t}\n\t\t\t}*/)\n\tsearch!: Function;\n\n\t@aggregation({\n\t\ttype: \"sap.ui.core.Control\",\n\t\tmultiple: false\n\t})\n\tfilter!: SearchField;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tuseDraftEditState = false;\n\n\tinit() {\n\t\tthis.setAggregation(\n\t\t\t\"filter\",\n\t\t\tnew SearchField({\n\t\t\t\tplaceholder: \"{sap.fe.i18n>M_FILTERBAR_SEARCH}\",\n\t\t\t\tsearch: () => {\n\t\t\t\t\tthis.fireEvent(\"search\");\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tgetConditions() {\n\t\tif (this.useDraftEditState) {\n\t\t\treturn getEditStatusFilter();\n\t\t}\n\t\treturn undefined as any;\n\t}\n\n\tgetTypeUtil() {\n\t\treturn TypeUtil;\n\t}\n\n\tgetPropertyInfoSet() {\n\t\tif (this.useDraftEditState) {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tname: \"$editState\",\n\t\t\t\t\tpath: \"$editState\",\n\t\t\t\t\tgroupLabel: \"\",\n\t\t\t\t\tgroup: \"\",\n\t\t\t\t\ttypeConfig: TypeUtil.getTypeConfig(\"sap.ui.model.odata.type.String\", {}, {}),\n\t\t\t\t\tdataType: \"sap.ui.model.odata.type.String\",\n\t\t\t\t\thiddenFilter: false\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t\treturn [];\n\t}\n\n\tgetSearch() {\n\t\treturn this.filter.getValue();\n\t}\n\n\tvalidate() {\n\t\treturn Promise.resolve();\n\t}\n\n\tstatic render(oRm: RenderManager, oControl: BasicSearch) {\n\t\toRm.openStart(\"div\", oControl);\n\t\toRm.openEnd();\n\t\toRm.renderControl(oControl.filter);\n\t\toRm.close(\"div\");\n\t}\n}\n\nexport default BasicSearch as unknown as EnhanceWithUI5<BasicSearch>;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;MAUMA,WAAW,WADhBC,cAAc,CAAC,iCAAiC,CAAC,UAEhDC,kBAAkB,CAAC,oBAAoB,CAAC,UASxCC,KAAK,EAAC;AACR;AACA,oJAFQ,CAEA,UAONA,KAAK,EAAC;AACR;AACA;AACA;AACA,yKAJQ,CAID,UAGLC,WAAW,CAAC;IACZC,IAAI,EAAE,qBAAqB;IAC3BC,QAAQ,EAAE;EACX,CAAC,CAAC,UAGDC,QAAQ,CAAC;IACTF,IAAI,EAAE;EACP,CAAC,CAAC;IAAA;IAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA;MAAA,MA9BFG,sCAAsC,GAAY,IAAI;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;IAAA,OAiCtDC,IAAI,GAAJ,gBAAO;MACN,IAAI,CAACC,cAAc,CAClB,QAAQ,EACR,IAAIC,WAAW,CAAC;QACfC,WAAW,EAAE,kCAAkC;QAC/CC,MAAM,EAAE,MAAM;UACb,IAAI,CAACC,SAAS,CAAC,QAAQ,CAAC;QACzB;MACD,CAAC,CAAC,CACF;IACF,CAAC;IAAA,OAEDC,aAAa,GAAb,yBAAgB;MACf,IAAI,IAAI,CAACC,iBAAiB,EAAE;QAC3B,OAAOC,mBAAmB,EAAE;MAC7B;MACA,OAAOC,SAAS;IACjB,CAAC;IAAA,OAEDC,WAAW,GAAX,uBAAc;MACb,OAAOC,QAAQ;IAChB,CAAC;IAAA,OAEDC,kBAAkB,GAAlB,8BAAqB;MACpB,IAAI,IAAI,CAACL,iBAAiB,EAAE;QAC3B,OAAO,CACN;UACCM,IAAI,EAAE,YAAY;UAClBC,IAAI,EAAE,YAAY;UAClBC,UAAU,EAAE,EAAE;UACdC,KAAK,EAAE,EAAE;UACTC,UAAU,EAAEN,QAAQ,CAACO,aAAa,CAAC,gCAAgC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;UAC5EC,QAAQ,EAAE,gCAAgC;UAC1CC,YAAY,EAAE;QACf,CAAC,CACD;MACF;MACA,OAAO,EAAE;IACV,CAAC;IAAA,OAEDC,SAAS,GAAT,qBAAY;MACX,OAAO,IAAI,CAACC,MAAM,CAACC,QAAQ,EAAE;IAC9B,CAAC;IAAA,OAEDC,QAAQ,GAAR,oBAAW;MACV,OAAOC,OAAO,CAACC,OAAO,EAAE;IACzB,CAAC;IAAA,YAEMC,MAAM,GAAb,gBAAcC,GAAkB,EAAEC,QAAqB,EAAE;MACxDD,GAAG,CAACE,SAAS,CAAC,KAAK,EAAED,QAAQ,CAAC;MAC9BD,GAAG,CAACG,OAAO,EAAE;MACbH,GAAG,CAACI,aAAa,CAACH,QAAQ,CAACP,MAAM,CAAC;MAClCM,GAAG,CAACK,KAAK,CAAC,KAAK,CAAC;IACjB,CAAC;IAAA;EAAA,EA1FwBC,OAAO;IAAA;IAAA;IAAA;IAAA;MAAA,OAEY,IAAI;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAiC5B,KAAK;IAAA;EAAA;EAAA,OA0DX3C,WAAW;AAAA"}},{"offset":{"line":27851,"column":0},"map":{"version":3,"names":["sap","ui","define","ClassSupport","FilterHelper","TypeUtil","SearchField","Control","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","getEditStatusFilter","property","implementInterface","event","defineUI5Class","aggregation","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","BasicSearch","type","multiple","_Control","_this","_len","arguments","length","args","Array","_key","this","__implements__sap_ui_mdc_IFilterSource","_proto","init","setAggregation","placeholder","search","fireEvent","getConditions","useDraftEditState","getTypeUtil","getPropertyInfoSet","name","path","groupLabel","group","typeConfig","getTypeConfig","dataType","hiddenFilter","getSearch","filter","getValue","validate","Promise","resolve","render","oRm","oControl","openStart","openEnd","renderControl","close"],"sources":["BasicSearch-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":27856,"column":0},"map":{"version":3,"names":["QuickFilterSelector","defineBuildingBlock","name","namespace","blockAttribute","type","required","props","getSegmentedButtonSelector","items","filterConfiguration","paths","map","path","index","getSelectorItemProperties","id","notEqual","pathInModel","getSelectorAriaLabelledById","event","onSelectionChange","getSelectSelector","key","annotationPath","text","getSelectorItemText","generate","countText","dataTableModelPath","getInvolvedDataModelObjects","metaPath","selectionVariant","enhanceDataModelPath","targetObject","Text","toString","showCounts","registerSideEffectForQuickFilter","appComponent","dataVisualizationModelPath","contextPath","viewEntityType","contextLocation","targetEntityType","fullyQualifiedName","tableNavigationPath","getTargetNavigationPath","selectionVariantPaths","info","sourceProperties","Set","selectionVariantPath","SelectOptions","isSelectionVariant","forEach","selectOption","propertyPath","PropertyName","value","propertyModelPath","add","getTargetObjectPath","getSideEffectsService","addControlSideEffects","Array","from","targetEntities","$NavigationPropertyPath","sourceControlId","getAccessibilityControl","textBinding","invisibleText","toStatic","getContent","view","selector","length","addDependent","RuntimeBuildingBlock"],"sourceRoot":"table","sources":["QuickFilterSelector.block.tsx"],"sourcesContent":["import type { SelectionVariantType, SelectionVariantTypeTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport RuntimeBuildingBlock from \"sap/fe/core/buildingBlocks/RuntimeBuildingBlock\";\nimport type { TableFiltersConfiguration } from \"sap/fe/core/converters/controls/Common/Table\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { notEqual, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { enhanceDataModelPath, getTargetNavigationPath, getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isSelectionVariant } from \"sap/fe/core/templating/FilterHelper\";\nimport SegmentedButton from \"sap/m/SegmentedButton\";\nimport SegmentedButtonItem from \"sap/m/SegmentedButtonItem\";\nimport Select from \"sap/m/Select\";\nimport InvisibleText from \"sap/ui/core/InvisibleText\";\nimport Item from \"sap/ui/core/Item\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type Context from \"sap/ui/model/Context\";\n\n@defineBuildingBlock({ name: \"QuickFilterSelector\", namespace: \"sap.fe.macros.table\" })\nexport default class QuickFilterSelector extends RuntimeBuildingBlock {\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tid!: string;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tmetaPath!: Context;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tcontextPath!: Context;\n\n\t@blockAttribute({ type: \"object\", required: true })\n\tfilterConfiguration!: TableFiltersConfiguration;\n\n\t@blockAttribute({ type: \"function\" })\n\tonSelectionChange?: Function;\n\n\tconstructor(props: PropertiesOf<QuickFilterSelector>) {\n\t\tsuper(props);\n\t}\n\n\t/**\n\t * Generates the selector as a SegmentedButton.\n\t *\n\t * @returns  The SegmentedButton\n\t */\n\tprivate getSegmentedButtonSelector(): SegmentedButton {\n\t\tconst items = this.filterConfiguration.paths.map((path, index) => {\n\t\t\treturn (<SegmentedButtonItem {...this.getSelectorItemProperties(index)} />) as SegmentedButtonItem;\n\t\t});\n\t\treturn (\n\t\t\t<SegmentedButton\n\t\t\t\tid={this.id}\n\t\t\t\tenabled={notEqual(pathInModel(\"hasPendingFilters\", \"pageInternal\"), true)}\n\t\t\t\tariaLabelledBy={[this.getSelectorAriaLabelledById()]}\n\t\t\t\titems={items}\n\t\t\t\tselectionChange={(event) => {\n\t\t\t\t\tthis.onSelectionChange?.(event);\n\t\t\t\t}}\n\t\t\t/>\n\t\t) as SegmentedButton;\n\t}\n\n\t/**\n\t * Generates the selector as a Select.\n\t *\n\t * @returns  The Select\n\t */\n\tprivate getSelectSelector(): Select {\n\t\tconst items = this.filterConfiguration.paths.map((path, index) => {\n\t\t\treturn (<Item {...this.getSelectorItemProperties(index)} />) as Item;\n\t\t});\n\t\treturn (\n\t\t\t<Select\n\t\t\t\tid={this.id}\n\t\t\t\tenabled={notEqual(pathInModel(\"hasPendingFilters\", \"pageInternal\"), true)}\n\t\t\t\tariaLabelledBy={[this.getSelectorAriaLabelledById()]}\n\t\t\t\tautoAdjustWidth={true}\n\t\t\t\titems={items}\n\t\t\t\tchange={(event) => {\n\t\t\t\t\tthis.onSelectionChange?.(event);\n\t\t\t\t}}\n\t\t\t/>\n\t\t) as Select;\n\t}\n\n\t/**\n\t * Gets the properties of the selector Item.\n\t *\n\t * @param index The index of the item into the selector\n\t * @returns  The properties\n\t */\n\tprivate getSelectorItemProperties(index: number) {\n\t\treturn {\n\t\t\tkey: this.filterConfiguration.paths[index].annotationPath,\n\t\t\ttext: this.getSelectorItemText(index)\n\t\t};\n\t}\n\n\t/**\n\t * Generates the Id of the InvisibleText control.\n\t *\n\t * @returns  The Id\n\t */\n\tprivate getSelectorAriaLabelledById() {\n\t\treturn generate([this.id, \"AriaText\"]);\n\t}\n\n\t/**\n\t * Generates the text for the selector item.\n\t *\n\t * @param index The index of the item into the selector\n\t * @returns  The text\n\t */\n\tprivate getSelectorItemText(index: number): string {\n\t\tconst countText = ` ({internal>quickFilters/counts/${index}})`;\n\t\tconst dataTableModelPath = getInvolvedDataModelObjects(this.metaPath);\n\t\tconst selectionVariant = enhanceDataModelPath(dataTableModelPath, this.filterConfiguration.paths[index].annotationPath)\n\t\t\t.targetObject as SelectionVariantType | undefined;\n\t\tconst text = selectionVariant?.Text?.toString() ?? \"\";\n\t\treturn `${text}${this.filterConfiguration.showCounts ? countText : \"\"}`;\n\t}\n\n\t/**\n\t * Registers the SideEffects control that must be executed when table cells that are related to configured filter(s) change.\n\t *\n\t * @param appComponent The appComponent\n\t */\n\tprivate registerSideEffectForQuickFilter(appComponent: AppComponent) {\n\t\tconst dataVisualizationModelPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\tconst viewEntityType = dataVisualizationModelPath.contextLocation?.targetEntityType.fullyQualifiedName;\n\t\tconst tableNavigationPath = getTargetNavigationPath(dataVisualizationModelPath, true);\n\t\tconst selectionVariantPaths = this.filterConfiguration.paths.map((info) => info.annotationPath);\n\n\t\tif (tableNavigationPath && viewEntityType) {\n\t\t\tconst sourceProperties: Set<string> = new Set();\n\t\t\tfor (const selectionVariantPath of selectionVariantPaths) {\n\t\t\t\tconst selectionVariant = enhanceDataModelPath(dataVisualizationModelPath, selectionVariantPath)\n\t\t\t\t\t.targetObject as Partial<SelectionVariantTypeTypes>; // We authorize SelectionVariant without SelectOptions even if it's not compliant with vocabularies\n\t\t\t\tif (selectionVariant.SelectOptions && isSelectionVariant(selectionVariant)) {\n\t\t\t\t\tselectionVariant.SelectOptions.forEach((selectOption) => {\n\t\t\t\t\t\tconst propertyPath = selectOption.PropertyName?.value;\n\t\t\t\t\t\tif (propertyPath) {\n\t\t\t\t\t\t\tconst propertyModelPath = enhanceDataModelPath(dataVisualizationModelPath, propertyPath);\n\t\t\t\t\t\t\tsourceProperties.add(getTargetObjectPath(propertyModelPath, true));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tappComponent.getSideEffectsService().addControlSideEffects(viewEntityType, {\n\t\t\t\tsourceProperties: Array.from(sourceProperties),\n\t\t\t\ttargetEntities: [\n\t\t\t\t\t{\n\t\t\t\t\t\t$NavigationPropertyPath: tableNavigationPath\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tsourceControlId: this.id\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Creates the invisibleText for the accessibility compliance.\n\t *\n\t * @returns  The InvisibleText\n\t */\n\tprivate getAccessibilityControl() {\n\t\tconst textBinding = `{sap.fe.i18n>M_TABLE_QUICKFILTER_ARIA}`;\n\t\tconst invisibleText = (<InvisibleText text={textBinding} id={this.getSelectorAriaLabelledById()} />) as InvisibleText;\n\n\t\t//Adds the invisibleText into the static, hidden area UI area container.\n\t\tinvisibleText.toStatic();\n\t\treturn invisibleText;\n\t}\n\n\tgetContent(view: View, appComponent: AppComponent) {\n\t\tif (this.filterConfiguration.showCounts) {\n\t\t\tthis.registerSideEffectForQuickFilter(appComponent);\n\t\t}\n\t\t/**\n\t\t * The number of views defined for a table determines the UI control that lets users switch the table views:\n\t\t *  - A segmented button for a maximum of three views\n\t\t *  - A select control for four or more views.\n\t\t */\n\t\tconst selector = this.filterConfiguration.paths.length > 3 ? this.getSelectSelector() : this.getSegmentedButtonSelector();\n\t\tselector.addDependent(this.getAccessibilityControl());\n\t\treturn selector;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":28092,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockSupport","RuntimeBuildingBlock","MetaModelConverter","BindingToolkit","StableIdHelper","DataModelPathHelper","FilterHelper","SegmentedButton","SegmentedButtonItem","Select","InvisibleText","Item","_jsx","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_exports","isSelectionVariant","getTargetObjectPath","getTargetNavigationPath","enhanceDataModelPath","generate","pathInModel","notEqual","getInvolvedDataModelObjects","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","QuickFilterSelector","name","namespace","type","required","_RuntimeBuildingBlock","props","_this","this","_proto","getSegmentedButtonSelector","items","filterConfiguration","paths","map","path","index","getSelectorItemProperties","id","enabled","ariaLabelledBy","getSelectorAriaLabelledById","selectionChange","event","_this$onSelectionChan","onSelectionChange","getSelectSelector","autoAdjustWidth","change","_this$onSelectionChan2","annotationPath","text","getSelectorItemText","_selectionVariant$Tex","countText","dataTableModelPath","metaPath","selectionVariant","targetObject","Text","toString","showCounts","registerSideEffectForQuickFilter","appComponent","_dataVisualizationMod","dataVisualizationModelPath","contextPath","viewEntityType","contextLocation","targetEntityType","fullyQualifiedName","tableNavigationPath","selectionVariantPaths","info","sourceProperties","Set","selectionVariantPath","SelectOptions","selectOption","_selectOption$Propert","propertyPath","PropertyName","propertyModelPath","add","getSideEffectsService","addControlSideEffects","Array","from","targetEntities","$NavigationPropertyPath","sourceControlId","getAccessibilityControl","textBinding","invisibleText","toStatic","getContent","view","selector","length","addDependent"],"sources":["QuickFilterSelector.block-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":28097,"column":0},"map":{"version":3,"names":["setCustomActionProperties","childAction","menuContentActions","act","menuActions","actionKey","getAttribute","replace","children","length","localName","namespaceURI","indexOf","actionsToAdd","Array","prototype","slice","apply","actionIdx","reduce","acc","actToAdd","actionKeyAdd","curOutObject","key","text","__noWrap","press","requiresSelection","enabled","Object","values","map","menuItem","position","placement","anchor","menu","setCustomColumnProperties","childColumn","aggregationObject","setAttribute","type","width","importance","horizontalAlign","availability","header","template","outerHTML","properties","split","undefined","TableBlock","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","blockAttribute","isPublic","required","expectedTypes","blockAggregation","processAggregations","hasVirtualNode","blockEvent","props","controlConfiguration","settings","getTableType","collection","getObject","tableType","xml","tableDefinition","control","rowCountMode","rowCount","selectionLimit","frozenColumnCount","growingMode","$kind","getDependents","dependents","readOnly","columns","column","getValueHelp","standardActions","annotation","actions","isInsertUpdateTemplated","create","isTemplated","TableHelper","pressEventForCreateButton","visible","delete","headerInfo","collectionEntity","entityType","targetType","annotations","UI","HeaderInfo","pressEventForDeleteButton","contextObjectPath","actionName","commandActions","action","getActionCommand","variantManagement","generate","id","getActions","onSegmentedButtonPressed","CommonHelper","isDesktop","getTableActionTemplate","getInvolvedDataModelObjects","metaPath","contextPath","pageContext","bindingContexts","converterContext","pageTemplateType","setUpTableDefinition","models","metaModel","createBindingContext","convertedMetaData","convertedTypes","resolvePath","target","setUpId","getConverterContext","getPath","_collectionIsDraftEnabled","getManifestWrapper","isFilterBarHidden","ModelHelper","isDraftNode","isDraftRoot","selectionMode","enableFullScreen","enableExport","enablePaste","paste","updatablePropertyPath","disableAddRowButtonForEmptyData","customValidationFunction","headerVisible","searchable","inlineCreationRowCount","title","isCompactType","creationMode","mode","createAtEnd","append","createOutbound","outbound","createNewAction","newAction","createOutboundDetail","outboundDetail","personalization","p13nMode","enableAutoColumnWidth","dataStateIndicatorFilter","isOptimizedForSmallDevice","CommonUtils","isSmallDevice","navigationPath","startsWith","isSingleton","startingEntitySet","setReadOnly","rowPress","rowAction","row","isSearchable","useBasicSearch","filterBar","filterBarId","showCreate","autoBindOnInit","columnEditMode","getVisualizationPath","getContextRelativeTargetObjectPath","Log","error","targetObject","term","resolvedTarget","getEntityTypeAnnotation","visualizations","PresentationVariant","getVisualizationsFromPresentationVariant","lineItemViz","find","viz","visualization","annotationPath","getPresentationPath","presentationPath","table","initialConverterContext","visualizationPath","extraParams","tableSettings","forEach","item","visualizationDefinition","getDataVisualizationConfiguration","useCondensedLayout","tableDefinitionContext","MacroAPI","_apiId","getContentId","displayMode","_getEntityType","getValueHelpTemplateFromPath","datFieldPath","dataFieldObject","isDataFieldForAnnotation","Target","$target","index","Data","dataField","actionContextPath","getActionContext","getModel","actionContext","dataFieldDataModelObjectPath","MetaModelConverter","isBound","ActionTarget","isOperationAvailable","Core","OperationAvailable","valueOf","displayCommandAction","pressEventDataFieldForActionButton","operationAvailableMap","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","getPressHandlerForDataFieldForIBN","enableAnalytics","noWrap","buildActionWrapper","isDataFieldForIBNEnabled","RequiresContext","NavigationAvailable","isDataFieldForActionEnabled","Action","enableOnSelect","targetEntityType","getCreationRow","creationRowAction","creationRow","getRowSetting","rowSettingsTemplate","rowNavigated","rowHighlighting","getVariantManagement","headerLevel","variantSaved","getQuickFilter","filters","quickFilters","getEmptyRowsEnabled","CreationMode","InlineCreationRows","getTemplate","headerBindingExpression","buildExpressionForHeaderVisible","collectionDeletablePath","Capabilities","DeleteRestrictions","Deletable","path","lineItem","getUiLineItemObject","delegate","getDelegate","isAlp","toString","entityName","selectionChange","Common","DraftRoot","getNavigationAvailableMap","ActionHelper","getMultiSelectDisabledActions","modelContextChange","initialExpansionLevel","fullyQualifiedName","stateChange","onContextChange","getTargetCollectionPath","sortConditions","stringifyObject","groupConditions","aggregateConditions","_type","busy","showRowCount","attr","threshold","noDataText","useCondensedTableLayout","multiSelectMode","getRowsBindingInfo","getContextPath","context","onChange","formatHiddenFilters","hiddenFilters","stringifyCustomData","BuildingBlockBase","TitleLevel","Auto"],"sourceRoot":"table","sources":["Table.block.ts"],"sourcesContent":["import { ConvertedMetadata, EntitySet, NavigationProperty, PathAnnotationExpression } from \"@sap-ux/vocabularies-types\";\nimport {\n\tDataFieldAbstractTypes,\n\tDataFieldForAction,\n\tDataFieldForIntentBasedNavigation,\n\tUIAnnotationTerms\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAggregation, blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { isDataFieldForAnnotation } from \"sap/fe/core/converters/annotations/DataField\";\nimport { CustomAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport {\n\tgetDataVisualizationConfiguration,\n\tgetVisualizationsFromPresentationVariant,\n\tVisualizationAndPath\n} from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport {\n\tAnnotationTableColumn,\n\tTableVisualization,\n\ttype CreateBehavior,\n\ttype CreateBehaviorExternal\n} from \"sap/fe/core/converters/controls/Common/Table\";\nimport ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport type { NavigationTargetConfiguration, TemplateType } from \"sap/fe/core/converters/ManifestSettings\";\nimport { CreationMode } from \"sap/fe/core/converters/ManifestSettings\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isSingleton } from \"sap/fe/core/helpers/TypeGuards\";\nimport { DataModelObjectPath, getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { buildExpressionForHeaderVisible } from \"sap/fe/macros/internal/helpers/TableTemplating\";\nimport { TitleLevel } from \"sap/ui/core/library\";\nimport Context from \"sap/ui/model/Context\";\nimport CommonHelper from \"../CommonHelper\";\nimport ActionHelper from \"../internal/helpers/ActionHelper\";\nimport MacroAPI from \"../MacroAPI\";\nimport { getTableActionTemplate } from \"./ActionsTemplating\";\nimport { Action, ActionGroup, Column } from \"./TableAPI\";\nimport TableHelper from \"./TableHelper\";\ntype ExtendedActionGroup = ActionGroup & { menuContentActions?: Record<string, Action> };\ntype ActionOrActionGroup = Record<string, Action | ExtendedActionGroup>;\n\nconst setCustomActionProperties = function (childAction: Element) {\n\tlet menuContentActions = null;\n\tconst act = childAction;\n\tlet menuActions: any[] = [];\n\tconst actionKey = act.getAttribute(\"key\")?.replace(\"InlineXML_\", \"\");\n\t// For the actionGroup we authorize the both entries <sap.fe.macros:ActionGroup> (compliant with old FPM examples) and <sap.fe.macros.table:ActionGroup>\n\tif (\n\t\tact.children.length &&\n\t\tact.localName === \"ActionGroup\" &&\n\t\tact.namespaceURI &&\n\t\t[\"sap.fe.macros\", \"sap.fe.macros.table\"].indexOf(act.namespaceURI) > -1\n\t) {\n\t\tconst actionsToAdd = Array.prototype.slice.apply(act.children);\n\t\tlet actionIdx = 0;\n\t\tmenuContentActions = actionsToAdd.reduce((acc, actToAdd) => {\n\t\t\tconst actionKeyAdd = actToAdd.getAttribute(\"key\")?.replace(\"InlineXML_\", \"\") || actionKey + \"_Menu_\" + actionIdx;\n\t\t\tconst curOutObject = {\n\t\t\t\tkey: actionKeyAdd,\n\t\t\t\ttext: actToAdd.getAttribute(\"text\"),\n\t\t\t\t__noWrap: true,\n\t\t\t\tpress: actToAdd.getAttribute(\"press\"),\n\t\t\t\trequiresSelection: actToAdd.getAttribute(\"requiresSelection\") === \"true\",\n\t\t\t\tenabled: actToAdd.getAttribute(\"enabled\") === null ? true : actToAdd.getAttribute(\"enabled\")\n\t\t\t};\n\t\t\tacc[curOutObject.key] = curOutObject;\n\t\t\tactionIdx++;\n\t\t\treturn acc;\n\t\t}, {});\n\t\tmenuActions = Object.values(menuContentActions)\n\t\t\t.slice(-act.children.length)\n\t\t\t.map(function (menuItem: any) {\n\t\t\t\treturn menuItem.key;\n\t\t\t});\n\t}\n\treturn {\n\t\tkey: actionKey,\n\t\ttext: act.getAttribute(\"text\"),\n\t\tposition: {\n\t\t\tplacement: act.getAttribute(\"placement\"),\n\t\t\tanchor: act.getAttribute(\"anchor\")\n\t\t},\n\t\t__noWrap: true,\n\t\tpress: act.getAttribute(\"press\"),\n\t\trequiresSelection: act.getAttribute(\"requiresSelection\") === \"true\",\n\t\tenabled: act.getAttribute(\"enabled\") === null ? true : act.getAttribute(\"enabled\"),\n\t\tmenu: menuActions.length ? menuActions : null,\n\t\tmenuContentActions: menuContentActions\n\t};\n};\n\nconst setCustomColumnProperties = function (childColumn: Element, aggregationObject: any) {\n\taggregationObject.key = aggregationObject.key.replace(\"InlineXML_\", \"\");\n\tchildColumn.setAttribute(\"key\", aggregationObject.key);\n\treturn {\n\t\t// Defaults are to be defined in Table.ts\n\t\tkey: aggregationObject.key,\n\t\ttype: \"Slot\",\n\t\twidth: childColumn.getAttribute(\"width\"),\n\t\timportance: childColumn.getAttribute(\"importance\"),\n\t\thorizontalAlign: childColumn.getAttribute(\"horizontalAlign\"),\n\t\tavailability: childColumn.getAttribute(\"availability\"),\n\t\theader: childColumn.getAttribute(\"header\"),\n\t\ttemplate: childColumn.children[0]?.outerHTML || \"\",\n\t\tproperties: childColumn.getAttribute(\"properties\") ? childColumn.getAttribute(\"properties\")?.split(\",\") : undefined,\n\t\tposition: {\n\t\t\tplacement: childColumn.getAttribute(\"placement\") || childColumn.getAttribute(\"positionPlacement\"), //positionPlacement is kept for backwards compatibility\n\t\t\tanchor: childColumn.getAttribute(\"anchor\") || childColumn.getAttribute(\"positionAnchor\") //positionAnchor is kept for backwards compatibility\n\t\t}\n\t};\n};\n\n@defineBuildingBlock({\n\tname: \"Table\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.fe.macros.table.TableAPI\"]\n})\nexport default class TableBlock extends BuildingBlockBase {\n\t//  *************** Public & Required Attributes ********************\n\t@blockAttribute({ type: \"sap.ui.model.Context\", isPublic: true, required: true })\n\tmetaPath!: Context;\n\n\t//  *************** Public Attributes ********************\n\t/**\n\t *The `busy` mode of table\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\tbusy?: boolean;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\", isPublic: true })\n\tcontextPath?: Context;\n\n\t/**\n\t * Parameter used to show the fullScreen button on the table.\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\tenableFullScreen?: boolean;\n\n\t/**\n\t * Enable export to file\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\tenableExport?: boolean;\n\n\t/**\n\t * Number of columns that are fixed on the left. Only columns which are not fixed can be scrolled horizontally.\n\t */\n\t@blockAttribute({ type: \"number\", isPublic: true })\n\tfrozenColumnCount?: number;\n\n\t/**\n\t * Enable export to file\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\tenablePaste?: boolean | CompiledBindingToolkitExpression;\n\n\t/**\n\t * The control ID of the FilterBar that is used to filter the rows of the table.\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tfilterBar?: string;\n\n\t/**\n\t * Specifies header text that is shown in table.\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\theader?: string;\n\n\t/**\n\t * Defines the \"aria-level\" of the table header\n\t */\n\t@blockAttribute({ type: \"sap.ui.core.TitleLevel\", isPublic: true })\n\theaderLevel: TitleLevel = TitleLevel.Auto;\n\n\t/**\n\t * Controls if the header text should be shown or not\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\theaderVisible?: boolean;\n\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tid!: string;\n\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\tisSearchable?: boolean;\n\n\t/**\n\t * Personalization Mode\n\t */\n\t@blockAttribute({ type: \"string|boolean\", isPublic: true })\n\tpersonalization?: string | boolean;\n\n\t/**\n\t * Specifies whether the table should be read-only or not.\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\treadOnly?: boolean;\n\n\t/**\n\t * Allows to choose the Table type. Allowed values are `ResponsiveTable` or `GridTable`.\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\ttype?: string;\n\n\t/**\n\t * Specifies whether the table is displayed with condensed layout (true/false). The default setting is `false`.\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\tuseCondensedLayout?: boolean;\n\n\t/**\n\t * Specifies the selection mode (None,Single,Multi,Auto)\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tselectionMode?: string;\n\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tvariantManagement?: string;\n\n\t//  *************** Private & Required Attributes ********************\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: false,\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"Singleton\"]\n\t})\n\tcollection!: Context;\n\n\t//  *************** Private Attributes ********************\n\t@blockAttribute({ type: \"string\" })\n\t_apiId?: string;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tautoBindOnInit?: boolean;\n\n\tcollectionEntity: EntitySet | NavigationProperty;\n\n\t@blockAttribute({ type: \"string\" })\n\tcolumnEditMode?: string;\n\n\t/**\n\t * Setting to determine if the new row should be created at the end or beginning\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tcreateAtEnd?: boolean;\n\n\t@blockAttribute({ type: \"string\" })\n\tcreateNewAction?: string;\n\n\t/**\n\t * Creation Mode to be passed to the onCreate handler. Values: [\"Inline\", \"NewPage\"]\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tcreationMode?: string;\n\n\t@blockAttribute({ type: \"string\" })\n\tcreateOutbound?: string;\n\n\tcreateOutboundDetail?: NavigationTargetConfiguration[\"outboundDetail\"];\n\n\t/**\n\t * Specifies the full path and function name of a custom validation function.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tcustomValidationFunction?: string;\n\n\t@blockAttribute({ type: \"string\" })\n\tdataStateIndicatorFilter?: string;\n\n\t/**\n\t * Specifies whether the button is hidden when no data has been entered yet in the row (true/false). The default setting is `false`.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tdisableAddRowButtonForEmptyData?: boolean;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tenableAutoColumnWidth?: boolean;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tenableAutoScroll?: boolean;\n\n\t@blockAttribute({ type: \"string\" })\n\tfieldMode: string = \"\";\n\n\t/**\n\t * The control ID of the FilterBar that is used internally to filter the rows of the table.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tfilterBarId?: string;\n\n\t@blockAttribute({ type: \"number\" })\n\tinlineCreationRowCount?: number;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tisAlp?: boolean = false;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tisCompactType?: boolean;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tisOptimizedForSmallDevice?: boolean;\n\n\t/**\n\t * ONLY FOR RESPONSIVE TABLE: Setting to define the checkbox in the column header: Allowed values are `Default` or `ClearAll`. If set to `Default`, the sap.m.Table control renders the Select All checkbox, otherwise the Deselect All button is rendered.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tmultiSelectMode?: string;\n\n\t/**\n\t * Used for binding the table to a navigation path. Only the path is used for binding rows.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tnavigationPath?: string;\n\n\t/**\n\t * Parameter which sets the noDataText for the mdc table\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tnoDataText?: string;\n\n\t/**\n\t * Specifies the possible actions available on the table row (Navigation,null). The default setting is `undefined`\n\t */\n\t@blockAttribute({ type: \"string\" })\n\trowAction?: string = undefined;\n\n\t@blockAttribute({ type: \"string\" })\n\ttableType?: string;\n\n\t@blockAttribute({ type: \"string\" })\n\tupdatablePropertyPath?: string;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tuseBasicSearch?: boolean;\n\n\t@blockAttribute({ type: \"boolean\" })\n\tsearchable?: boolean;\n\n\t/**\n\t * ONLY FOR GRID TABLE: Number of indices which can be selected in a range. If set to 0, the selection limit is disabled, and the Select All checkbox appears instead of the Deselect All button.\n\t */\n\t@blockAttribute({ type: \"number\" })\n\tselectionLimit?: number;\n\n\t@blockAttribute({ type: \"string\" })\n\tshowCreate?: string | boolean;\n\n\t@blockAttribute({ type: \"object\", isPublic: true })\n\ttableDefinition!: TableVisualization; // We require tableDefinition to be there even though it is not formally required\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\ttableDefinitionContext?: Context;\n\n\t@blockAttribute({ type: \"string\" })\n\ttableDelegate?: string;\n\n\t@blockAttribute({ type: \"string\" })\n\ttabTitle: string = \"\";\n\n\t@blockAttribute({ type: \"boolean\" })\n\tvisible?: boolean;\n\n\t@blockAggregation({\n\t\ttype: \"sap.fe.macros.internal.table.Action | sap.fe.macros.internal.table.ActionGroup\",\n\t\tisPublic: true,\n\t\tprocessAggregations: setCustomActionProperties\n\t})\n\tactions?: ActionOrActionGroup;\n\n\t@blockAggregation({\n\t\ttype: \"sap.fe.macros.internal.table.Column\",\n\t\tisPublic: true,\n\t\thasVirtualNode: true,\n\t\tprocessAggregations: setCustomColumnProperties\n\t})\n\tcolumns?: Record<string, Column>;\n\n\tconvertedMetaData: ConvertedMetadata;\n\n\tcontextObjectPath: DataModelObjectPath;\n\n\tpageTemplateType: TemplateType;\n\n\t/**\n\t * Event handler to react when the user chooses a row\n\t */\n\t@blockEvent()\n\trowPress?: string;\n\n\t/**\n\t * Event handler to react to the contextChange event of the table.\n\t */\n\t@blockEvent()\n\tonContextChange?: string;\n\n\t/**\n\t *  Event handler for change event.\n\t */\n\t@blockEvent()\n\tonChange?: string;\n\n\t/**\n\t * Event handler called when the user chooses an option of the segmented button in the ALP View\n\t */\n\t@blockEvent()\n\tonSegmentedButtonPressed?: string;\n\n\t@blockEvent()\n\tvariantSaved?: string;\n\n\t/**\n\t * Event handler to react to the stateChange event of the table.\n\t */\n\t@blockEvent()\n\tstateChange?: string;\n\n\t/**\n\t * Event handler to react when the table selection changes\n\t */\n\t@blockEvent()\n\tselectionChange?: string;\n\n\t@blockEvent()\n\tvariantSelected?: string;\n\n\t/**\n\t * Whether the collection is draft enabled or not\n\t */\n\t_collectionIsDraftEnabled: boolean;\n\n\tconstructor(props: PropertiesOf<TableBlock>, controlConfiguration: any, settings: any) {\n\t\tsuper(props);\n\t\tconst contextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath as Context);\n\t\tthis.contextObjectPath = contextObjectPath;\n\t\tconst pageContext = settings.bindingContexts.converterContext;\n\t\tthis.pageTemplateType = pageContext?.getObject(\"/templateType\");\n\n\t\tconst tableDefinition = TableBlock.setUpTableDefinition(this, settings);\n\t\tthis.collection = settings.models.metaModel.createBindingContext(tableDefinition.annotation.collection);\n\t\tthis.convertedMetaData = this.contextObjectPath.convertedTypes;\n\t\tthis.collectionEntity = this.convertedMetaData.resolvePath(this.tableDefinition.annotation.collection).target as EntitySet;\n\n\t\tthis.setUpId();\n\t\tconst converterContext = this.getConverterContext(this.contextObjectPath, this.contextPath?.getPath(), settings);\n\t\tthis._collectionIsDraftEnabled =\n\t\t\t(converterContext.getManifestWrapper().isFilterBarHidden() && ModelHelper.isDraftNode(this.collectionEntity)) ||\n\t\t\tModelHelper.isDraftRoot(this.collectionEntity);\n\t\tthis.selectionMode = this.tableDefinition.annotation.selectionMode;\n\t\tthis.enableFullScreen = this.tableDefinition.control.enableFullScreen;\n\t\tthis.enableExport = this.tableDefinition.control.enableExport;\n\t\tthis.enablePaste = this.tableDefinition.annotation.standardActions.actions.paste.enabled;\n\t\tthis.frozenColumnCount = this.tableDefinition.control.frozenColumnCount;\n\t\tthis.updatablePropertyPath = this.tableDefinition.annotation.standardActions.updatablePropertyPath;\n\t\tthis.type = this.tableDefinition.control.type;\n\t\tthis.disableAddRowButtonForEmptyData ??= this.tableDefinition.control.disableAddRowButtonForEmptyData;\n\t\tthis.customValidationFunction ??= this.tableDefinition.control.customValidationFunction;\n\t\tthis.headerVisible ??= this.tableDefinition.control.headerVisible;\n\t\tthis.searchable ??= this.tableDefinition.annotation.searchable;\n\t\tthis.inlineCreationRowCount ??= this.tableDefinition.control.inlineCreationRowCount;\n\t\tthis.header ??= this.tableDefinition.annotation.title;\n\t\tthis.selectionLimit ??= this.tableDefinition.control.selectionLimit;\n\t\tthis.isCompactType ??= this.tableDefinition.control.isCompactType;\n\t\tthis.creationMode ??= this.tableDefinition.annotation.create.mode;\n\t\tthis.createAtEnd ??= (this.tableDefinition.annotation.create as CreateBehavior).append;\n\t\tthis.createOutbound ??= (this.tableDefinition.annotation.create as CreateBehaviorExternal).outbound;\n\t\tthis.createNewAction ??= (this.tableDefinition.annotation.create as CreateBehavior).newAction;\n\t\tthis.createOutboundDetail ??= (this.tableDefinition.annotation.create as CreateBehaviorExternal).outboundDetail;\n\n\t\tthis.personalization ??= this.tableDefinition.annotation.p13nMode;\n\t\tthis.variantManagement ??= this.tableDefinition.annotation.variantManagement;\n\t\tthis.enableAutoColumnWidth ??= true;\n\t\tthis.dataStateIndicatorFilter ??= this.tableDefinition.control.dataStateIndicatorFilter;\n\t\tthis.isOptimizedForSmallDevice ??= CommonUtils.isSmallDevice();\n\t\tthis.navigationPath = tableDefinition.annotation.navigationPath;\n\t\tif (tableDefinition.annotation.collection.startsWith(\"/\") && isSingleton(contextObjectPath.startingEntitySet)) {\n\t\t\ttableDefinition.annotation.collection = this.navigationPath;\n\t\t}\n\t\tthis.setReadOnly();\n\t\tif (this.rowPress) {\n\t\t\tthis.rowAction = \"Navigation\";\n\t\t}\n\t\tthis.rowPress ??= this.tableDefinition.annotation.row?.press;\n\t\tthis.rowAction ??= this.tableDefinition.annotation.row?.action;\n\n\t\tif (this.personalization === \"false\") {\n\t\t\tthis.personalization = undefined;\n\t\t} else if (this.personalization === \"true\") {\n\t\t\tthis.personalization = \"Sort,Column,Filter\";\n\t\t}\n\n\t\tswitch (this.personalization) {\n\t\t\tcase \"false\":\n\t\t\t\tthis.personalization = undefined;\n\t\t\t\tbreak;\n\t\t\tcase \"true\":\n\t\t\t\tthis.personalization = \"Sort,Column,Filter\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\tif (this.isSearchable === false) {\n\t\t\tthis.searchable = false;\n\t\t} else {\n\t\t\tthis.searchable = this.tableDefinition.annotation.searchable;\n\t\t}\n\n\t\tlet useBasicSearch = false;\n\n\t\t// Note for the 'filterBar' property:\n\t\t// 1. ID relative to the view of the Table.\n\t\t// 2. Absolute ID.\n\t\t// 3. ID would be considered in association to TableAPI's ID.\n\t\tif (!this.filterBar && !this.filterBarId && this.searchable) {\n\t\t\t// filterBar: Public property for building blocks\n\t\t\t// filterBarId: Only used as Internal private property for FE templates\n\t\t\tthis.filterBarId = generate([this.id, \"StandardAction\", \"BasicSearch\"]);\n\t\t\tuseBasicSearch = true;\n\t\t}\n\t\t// Internal properties\n\t\tthis.useBasicSearch = useBasicSearch;\n\t\tthis.tableType = this.type;\n\t\tthis.showCreate = this.tableDefinition.annotation.standardActions.actions.create.visible || true;\n\t\tthis.autoBindOnInit = this.tableDefinition.annotation.autoBindOnInit;\n\n\t\tswitch (this.readOnly) {\n\t\t\tcase true:\n\t\t\t\tthis.columnEditMode = \"Display\";\n\t\t\t\tbreak;\n\t\t\tcase false:\n\t\t\t\tthis.columnEditMode = \"Editable\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.columnEditMode = undefined;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the annotation path pointing to the visualization annotation (LineItem).\n\t *\n\t * @param contextObjectPath The datamodel object path for the table\n\t * @param converterContext The converter context\n\t * @returns The annotation path\n\t */\n\tstatic getVisualizationPath(contextObjectPath: DataModelObjectPath, converterContext: ConverterContext): string {\n\t\tconst metaPath = getContextRelativeTargetObjectPath(contextObjectPath) as string;\n\n\t\t// fallback to default LineItem if metapath is not set\n\t\tif (!metaPath) {\n\t\t\tLog.error(`Missing meta path parameter for LineItem`);\n\t\t\treturn `@${UIAnnotationTerms.LineItem}`;\n\t\t}\n\n\t\tif (contextObjectPath.targetObject.term === UIAnnotationTerms.LineItem) {\n\t\t\treturn metaPath; // MetaPath is already pointing to a LineItem\n\t\t}\n\t\t//Need to switch to the context related the PV or SPV\n\t\tconst resolvedTarget = converterContext.getEntityTypeAnnotation(metaPath);\n\n\t\tlet visualizations: VisualizationAndPath[] = [];\n\t\tswitch (contextObjectPath.targetObject.term) {\n\t\t\tcase UIAnnotationTerms.SelectionPresentationVariant:\n\t\t\t\tif (contextObjectPath.targetObject.PresentationVariant) {\n\t\t\t\t\tvisualizations = getVisualizationsFromPresentationVariant(\n\t\t\t\t\t\tcontextObjectPath.targetObject.PresentationVariant,\n\t\t\t\t\t\tmetaPath,\n\t\t\t\t\t\tresolvedTarget.converterContext,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase UIAnnotationTerms.PresentationVariant:\n\t\t\t\tvisualizations = getVisualizationsFromPresentationVariant(\n\t\t\t\t\tcontextObjectPath.targetObject,\n\t\t\t\t\tmetaPath,\n\t\t\t\t\tresolvedTarget.converterContext,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tLog.error(`Bad metapath parameter for table : ${contextObjectPath.targetObject.term}`);\n\t\t}\n\n\t\tconst lineItemViz = visualizations.find((viz) => {\n\t\t\treturn viz.visualization.term === UIAnnotationTerms.LineItem;\n\t\t});\n\n\t\tif (lineItemViz) {\n\t\t\treturn lineItemViz.annotationPath;\n\t\t} else {\n\t\t\t// fallback to default LineItem if annotation missing in PV\n\t\t\tLog.error(`Bad meta path parameter for LineItem: ${contextObjectPath.targetObject.term}`);\n\t\t\treturn `@${UIAnnotationTerms.LineItem}`; // Fallback\n\t\t}\n\t}\n\n\tstatic getPresentationPath(contextObjectPath: DataModelObjectPath): string | undefined {\n\t\tlet presentationPath;\n\n\t\tswitch (contextObjectPath.targetObject?.term) {\n\t\t\tcase UIAnnotationTerms.PresentationVariant:\n\t\t\t\tpresentationPath = getContextRelativeTargetObjectPath(contextObjectPath);\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTerms.SelectionPresentationVariant:\n\t\t\t\tpresentationPath = getContextRelativeTargetObjectPath(contextObjectPath) + \"/PresentationVariant\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn presentationPath;\n\t}\n\n\tstatic setUpTableDefinition(table: TableBlock, settings: any): TableVisualization {\n\t\tlet tableDefinition = table.tableDefinition;\n\t\tif (!tableDefinition) {\n\t\t\tconst initialConverterContext = table.getConverterContext(table.contextObjectPath, table.contextPath?.getPath(), settings);\n\t\t\tconst visualizationPath = TableBlock.getVisualizationPath(table.contextObjectPath, initialConverterContext);\n\t\t\tconst presentationPath = TableBlock.getPresentationPath(table.contextObjectPath);\n\n\t\t\t//Check if we have ActionGroup and add nested actions\n\n\t\t\tconst extraParams: any = {};\n\t\t\tconst tableSettings = {\n\t\t\t\tenableExport: table.enableExport,\n\t\t\t\tfrozenColumnCount: table.frozenColumnCount,\n\t\t\t\tenableFullScreen: table.enableFullScreen,\n\t\t\t\tenablePaste: table.enablePaste,\n\t\t\t\tselectionMode: table.selectionMode,\n\t\t\t\ttype: table.type\n\t\t\t};\n\n\t\t\tif (table.actions) {\n\t\t\t\tObject.values(table.actions)?.forEach((item) => {\n\t\t\t\t\ttable.actions = { ...table.actions, ...(item as ExtendedActionGroup).menuContentActions };\n\t\t\t\t\tdelete (item as ExtendedActionGroup).menuContentActions;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// table actions and columns as {} if not provided to allow merge with manifest settings\n\t\t\textraParams[visualizationPath] = {\n\t\t\t\tactions: table.actions || {},\n\t\t\t\tcolumns: table.columns || {},\n\t\t\t\ttableSettings: tableSettings\n\t\t\t};\n\t\t\tconst converterContext = table.getConverterContext(\n\t\t\t\ttable.contextObjectPath,\n\t\t\t\ttable.contextPath?.getPath(),\n\t\t\t\tsettings,\n\t\t\t\textraParams\n\t\t\t);\n\n\t\t\tconst visualizationDefinition = getDataVisualizationConfiguration(\n\t\t\t\tvisualizationPath,\n\t\t\t\ttable.useCondensedLayout,\n\t\t\t\tconverterContext,\n\t\t\t\tundefined,\n\t\t\t\tundefined,\n\t\t\t\tpresentationPath,\n\t\t\t\ttrue\n\t\t\t);\n\n\t\t\ttableDefinition = visualizationDefinition.visualizations[0] as TableVisualization;\n\t\t\ttable.tableDefinition = tableDefinition;\n\t\t}\n\t\ttable.tableDefinitionContext = MacroAPI.createBindingContext(table.tableDefinition as object, settings);\n\n\t\treturn tableDefinition;\n\t}\n\n\tsetUpId() {\n\t\tif (this.id) {\n\t\t\t// The given ID shall be assigned to the TableAPI and not to the MDC Table\n\t\t\tthis._apiId = this.id;\n\t\t\tthis.id = this.getContentId(this.id);\n\t\t} else {\n\t\t\t// We generate the ID. Due to compatibility reasons we keep it on the MDC Table but provide assign\n\t\t\t// the ID with a ::Table suffix to the TableAPI\n\t\t\tconst tableDefinition = this.tableDefinition;\n\t\t\tthis.id ??= tableDefinition.annotation.id;\n\t\t\tthis._apiId = generate([tableDefinition.annotation.id, \"Table\"]);\n\t\t}\n\t}\n\n\tsetReadOnly() {\n\t\t// Special code for readOnly\n\t\t// readonly = false -> Force editable\n\t\t// readonly = true -> Force display mode\n\t\t// readonly = undefined -> Bound to edit flow\n\t\tif (this.readOnly === undefined && this.tableDefinition.annotation.displayMode === true) {\n\t\t\tthis.readOnly = true;\n\t\t}\n\t}\n\n\tgetTableType = () => {\n\t\tconst collection = this.collection.getObject();\n\t\tswitch (this.tableType) {\n\t\t\tcase \"GridTable\":\n\t\t\t\treturn xml`<mdcTable:GridTableType\n                rowCountMode=\"${this.tableDefinition.control.rowCountMode}\"\n                rowCount=\"${this.tableDefinition.control.rowCount}\"\n                selectionLimit=\"${this.selectionLimit}\"\n\t\t\t\tfixedColumnCount=\"${this.tableDefinition.control.frozenColumnCount}\"\n            />`;\n\t\t\tcase \"TreeTable\":\n\t\t\t\treturn xml`<mdcTable:TreeTableType\n                rowCountMode=\"${this.tableDefinition.control.rowCountMode}\"\n                rowCount=\"${this.tableDefinition.control.rowCount}\"\n\t\t\t\tfixedColumnCount=\"${this.tableDefinition.control.frozenColumnCount}\"\n            />`;\n\t\t\tdefault:\n\t\t\t\tconst growingMode = collection.$kind === \"EntitySet\" ? \"Scroll\" : undefined;\n\t\t\t\treturn xml`<mdcTable:ResponsiveTableType\n                showDetailsButton=\"true\"\n                detailsButtonSetting=\"{=['Low', 'Medium', 'None']}\"\n                growingMode=\"${growingMode}\"\n            />`;\n\t\t}\n\t};\n\n\t_getEntityType() {\n\t\treturn (this.collectionEntity as EntitySet)?.entityType || (this.collectionEntity as NavigationProperty)?.targetType;\n\t}\n\n\t/**\n\t * Generates the template string for the valueHelp based on the dataField path.\n\t *\n\t * @param datFieldPath DatFieldPath to be evaluated\n\t * @returns The xml string representation of the valueHelp\n\t */\n\tgetValueHelpTemplateFromPath(datFieldPath?: string) {\n\t\treturn datFieldPath\n\t\t\t? `<macros:ValueHelp\n        idPrefix=\"${generate([this.id, \"TableValueHelp\"])}\"\n        property=\"${datFieldPath}/Value\"\n    />`\n\t\t\t: \"\";\n\t}\n\n\t/**\n\t * Generates the template string for the valueHelp based on column.\n\t *\n\t * @param column Column to be evaluated\n\t * @returns The xml string representation of the valueHelp\n\t */\n\tgetValueHelp(column: AnnotationTableColumn) {\n\t\tconst dataFieldObject = this.convertedMetaData.resolvePath(column.annotationPath).target as DataFieldAbstractTypes;\n\t\tif (isDataFieldForAnnotation(dataFieldObject) && dataFieldObject.Target.$target.term === UIAnnotationTerms.Chart) {\n\t\t\treturn ``;\n\t\t} else if (isDataFieldForAnnotation(dataFieldObject) && dataFieldObject.Target.$target.term === UIAnnotationTerms.FieldGroup) {\n\t\t\tlet template = ``;\n\t\t\tfor (const index in dataFieldObject.Target.$target.Data) {\n\t\t\t\ttemplate += this.getValueHelpTemplateFromPath(column.annotationPath + \"/Target/$AnnotationPath/Data/\" + index);\n\t\t\t}\n\t\t\treturn xml`${template}`;\n\t\t} else {\n\t\t\treturn xml`${this.getValueHelpTemplateFromPath(column.annotationPath)}`;\n\t\t}\n\t}\n\n\tgetDependents = () => {\n\t\tlet dependents = ``;\n\t\tif (!this.readOnly && this.tableDefinition?.columns) {\n\t\t\tfor (const column of this.tableDefinition.columns) {\n\t\t\t\tif (column.availability === \"Default\" && \"annotationPath\" in column) {\n\t\t\t\t\tdependents += this.getValueHelp(column);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst standardActions = this.tableDefinition.annotation.standardActions.actions;\n\n\t\tif (this.tableDefinition.annotation.standardActions.isInsertUpdateTemplated && standardActions.create.isTemplated === \"true\") {\n\t\t\tdependents += xml`<control:CommandExecution\n                                execute=\"${TableHelper.pressEventForCreateButton(this, true)}\"\n                                visible=\"${standardActions.create.visible}\"\n                                enabled=\"${standardActions.create.enabled}\"\n                                command=\"Create\"\n                            />`;\n\t\t}\n\t\tif (standardActions.delete.isTemplated === \"true\") {\n\t\t\tconst headerInfo = (\n\t\t\t\t(this.collectionEntity as EntitySet)?.entityType || (this.collectionEntity as NavigationProperty)?.targetType\n\t\t\t)?.annotations?.UI?.HeaderInfo;\n\t\t\tdependents += xml`<control:CommandExecution\n                        execute=\"${TableHelper.pressEventForDeleteButton(\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\tthis.collectionEntity.name,\n\t\t\t\t\t\t\theaderInfo,\n\t\t\t\t\t\t\tthis.contextObjectPath\n\t\t\t\t\t\t)}\"\n                        visible=\"${standardActions.delete.visible}\"\n                        enabled=\"${standardActions.delete.enabled}\"\n                        command=\"DeleteEntry\"\n                        />`;\n\t\t}\n\n\t\tfor (const actionName in this.tableDefinition.commandActions) {\n\t\t\tconst action = this.tableDefinition.commandActions[actionName];\n\t\t\tdependents += `${this.getActionCommand(actionName, action)}`;\n\t\t}\n\t\tdependents += `<control:CommandExecution execute=\"TableRuntime.displayTableSettings\" command=\"TableSettings\" />`;\n\t\tif (this.variantManagement === \"None\") {\n\t\t\tdependents += `<!-- Persistence provider offers persisting personalization changes without variant management -->\n\t\t\t<p13n:PersistenceProvider id=\"${generate([this.id, \"PersistenceProvider\"])}\" for=\"${this.id}\" />`;\n\t\t}\n\n\t\treturn xml`${dependents}`;\n\t};\n\n\t/**\n\t * Generates the template string for the actionCommand.\n\t *\n\t * @param actionName The name of the action\n\t * @param action Action to be evaluated\n\t * @returns The xml string representation of the actionCommand\n\t */\n\tgetActionCommand(actionName: string, action: CustomAction) {\n\t\tconst dataField = action.annotationPath\n\t\t\t? (this.convertedMetaData.resolvePath(action.annotationPath).target as DataFieldForAction | DataFieldForIntentBasedNavigation)\n\t\t\t: undefined;\n\t\tconst actionContextPath = action.annotationPath\n\t\t\t? CommonHelper.getActionContext(this.metaPath.getModel().createBindingContext(action.annotationPath + \"/Action\")!)\n\t\t\t: undefined;\n\t\tconst actionContext = this.metaPath.getModel().createBindingContext(actionContextPath);\n\t\tconst dataFieldDataModelObjectPath = actionContext\n\t\t\t? MetaModelConverter.getInvolvedDataModelObjects(actionContext, this.collection)\n\t\t\t: undefined;\n\t\tconst isBound = (dataField as DataFieldForAction)?.ActionTarget?.isBound;\n\t\tconst isOperationAvailable =\n\t\t\t(dataField as DataFieldForAction)?.ActionTarget?.annotations?.Core?.OperationAvailable?.valueOf() !== false;\n\t\tconst displayCommandAction = action.type === \"ForAction\" ? isBound !== true || isOperationAvailable : true;\n\t\tif (displayCommandAction) {\n\t\t\treturn xml`<internalMacro:ActionCommand\n\t\t\t\t\t\t\taction=\"{tableDefinition>commandActions/${actionName}}\"\n\t\t\t\t\t\t\tonExecuteAction=\"${TableHelper.pressEventDataFieldForActionButton(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcontextObjectPath: this.contextObjectPath,\n\t\t\t\t\t\t\t\t\tid: this.id\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdataField as DataFieldForAction,\n\t\t\t\t\t\t\t\tthis.collectionEntity.name,\n\t\t\t\t\t\t\t\tthis.tableDefinition.operationAvailableMap,\n\t\t\t\t\t\t\t\tactionContext?.getObject(),\n\t\t\t\t\t\t\t\taction.isNavigable,\n\t\t\t\t\t\t\t\taction.enableAutoScroll,\n\t\t\t\t\t\t\t\taction.defaultValuesExtensionFunction\n\t\t\t\t\t\t\t)}\"\n\t\t\t\t\t\t\tonExecuteIBN=\"${CommonHelper.getPressHandlerForDataFieldForIBN(\n\t\t\t\t\t\t\t\tdataField,\n\t\t\t\t\t\t\t\t\"${internal>selectedContexts}\",\n\t\t\t\t\t\t\t\t!this.tableDefinition.enableAnalytics\n\t\t\t\t\t\t\t)}\"\n\t\t\t\t\t\t\tonExecuteManifest=\"${action.noWrap ? action.press : CommonHelper.buildActionWrapper(action, this)}\"\n\t\t\t\t\t\t\tisIBNEnabled=\"${\n\t\t\t\t\t\t\t\taction.enabled ??\n\t\t\t\t\t\t\t\tTableHelper.isDataFieldForIBNEnabled(\n\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\tdataField! as DataFieldForIntentBasedNavigation,\n\t\t\t\t\t\t\t\t\t!!(dataField as DataFieldForIntentBasedNavigation).RequiresContext,\n\t\t\t\t\t\t\t\t\t(dataField as DataFieldForIntentBasedNavigation).NavigationAvailable\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\tisActionEnabled=\"${\n\t\t\t\t\t\t\t\taction.enabled ??\n\t\t\t\t\t\t\t\tTableHelper.isDataFieldForActionEnabled(\n\t\t\t\t\t\t\t\t\tthis.tableDefinition,\n\t\t\t\t\t\t\t\t\t(dataField! as DataFieldForAction).Action,\n\t\t\t\t\t\t\t\t\t!!isBound,\n\t\t\t\t\t\t\t\t\tactionContextPath,\n\t\t\t\t\t\t\t\t\taction.enableOnSelect,\n\t\t\t\t\t\t\t\t\tdataFieldDataModelObjectPath?.targetEntityType\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t/>`;\n\t\t}\n\t\treturn ``;\n\t}\n\tgetActions = () => {\n\t\tlet dependents = \"\";\n\t\tif (this.onSegmentedButtonPressed) {\n\t\t\tdependents = `<mdcat:ActionToolbarAction\n            layoutInformation=\"{\n                    aggregationName: 'end',\n                    alignment: 'End'\n                }\"\n            visible=\"{= \\${pageInternal>alpContentView} === 'Table' }\"\n        >\n            <SegmentedButton\n                id=\"${generate([this.id, \"SegmentedButton\", \"TemplateContentView\"])}\"\n                select=\"${this.onSegmentedButtonPressed}\"\n                selectedKey=\"{pageInternal>alpContentView}\"\n            >\n                <items>`;\n\n\t\t\tif (CommonHelper.isDesktop()) {\n\t\t\t\tdependents += `<SegmentedButtonItem\n                            tooltip=\"{sap.fe.i18n>M_COMMON_HYBRID_SEGMENTED_BUTTON_ITEM_TOOLTIP}\"\n\t\t\t\t\t\t\tkey = \"Hybrid\"\n\t\t\t\t\t\t\ticon = \"sap-icon://chart-table-view\"\n\t\t\t\t\t\t\t/>`;\n\t\t\t}\n\t\t\tdependents += `<SegmentedButtonItem\n                        tooltip=\"{sap.fe.i18n>M_COMMON_CHART_SEGMENTED_BUTTON_ITEM_TOOLTIP}\"\n                        key=\"Chart\"\n                        icon=\"sap-icon://bar-chart\"\n                    />\n                    <SegmentedButtonItem\n                        tooltip=\"{sap.fe.i18n>M_COMMON_TABLE_SEGMENTED_BUTTON_ITEM_TOOLTIP}\"\n                        key=\"Table\"\n                        icon=\"sap-icon://table-view\"\n                    />\n                </items>\n            </SegmentedButton>\n        </mdcat:ActionToolbarAction>`;\n\t\t}\n\n\t\tdependents += `${getTableActionTemplate(this)}`;\n\t\treturn xml`${dependents}`;\n\t};\n\n\t/**\n\t * Generates the template string for the CreationRow.\n\t *\n\t * @returns The xml string representation of the CreationRow\n\t */\n\tgetCreationRow() {\n\t\tif (this.creationMode === \"CreationRow\") {\n\t\t\tconst creationRowAction = this.tableDefinition.annotation.standardActions.actions.creationRow;\n\t\t\tif (creationRowAction.isTemplated) {\n\t\t\t\treturn xml`<mdc:creationRow>\n\t\t\t\t\t\t\t<mdcTable:CreationRow\n\t\t\t\t\t\t\t\tid=\"${generate([this.id, \"CreationRow\"])}\"\n\t\t\t\t\t\t\t\tvisible=\"${creationRowAction.visible}\"\n\t\t\t\t\t\t\t\tapply=\"${TableHelper.pressEventForCreateButton(this, false)}\"\n\t\t\t\t\t\t\t\tapplyEnabled=\"${creationRowAction.enabled}\"\n\t\t\t\t\t\t\t\tmacrodata:disableAddRowButtonForEmptyData=\"${this.disableAddRowButtonForEmptyData}\"\n\t\t\t\t\t\t\t\tmacrodata:customValidationFunction=\"${this.customValidationFunction}\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t   \t   </mdc:creationRow>`;\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tgetRowSetting() {\n\t\tlet rowSettingsTemplate = `<mdcTable:RowSettings\n        navigated=\"${this.tableDefinition.annotation.row?.rowNavigated}\"\n        highlight=\"${this.tableDefinition.annotation.row?.rowHighlighting}\"\n        >`;\n\t\tif (this.rowAction === \"Navigation\") {\n\t\t\trowSettingsTemplate += `<mdcTable:rowActions>\n                <mdcTable:RowActionItem\n                    type = \"${this.rowAction}\"\n                    press = \"${this.tableType === \"ResponsiveTable\" ? \"\" : this.rowPress}\"\n                    visible = \"${this.tableDefinition.annotation.row?.visible}\"\n                    />\n                </mdcTable:rowActions>`;\n\t\t}\n\t\trowSettingsTemplate += `</mdcTable:RowSettings>`;\n\t\treturn xml`${rowSettingsTemplate}`;\n\t}\n\n\tgetVariantManagement() {\n\t\tif (this.variantManagement === \"Control\") {\n\t\t\treturn xml`<mdc:variant>\n                        <variant:VariantManagement\n                            id=\"${generate([this.id, \"VM\"])}\"\n                            for=\"{this>id}\"\n                            showSetAsDefault=\"true\"\n                            select=\"{this>variantSelected}\"\n                            headerLevel=\"${this.headerLevel}\"\n                            save=\"${this.variantSaved}\"\n                        />\n                    </mdc:variant>`;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tgetQuickFilter() {\n\t\tif (this.tableDefinition.control.filters?.quickFilters) {\n\t\t\tconst quickFilters = this.tableDefinition.control.filters.quickFilters;\n\t\t\treturn xml`<mdc:quickFilter>\n\t\t\t\t\t\t<macroTable:QuickFilterSelector\n\t\t\t\t\t\t\tid=\"${generate([this.id, \"QuickFilterContainer\"])}\"\n\t\t\t\t\t\t\tmetaPath=\"${this.metaPath}\"\n\t\t\t\t\t\t\tfilterConfiguration=\"${quickFilters}\"\n\t\t\t\t\t\t\tonSelectionChange=\"API.onQuickFilterSelectionChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</mdc:quickFilter>`;\n\t\t}\n\t\treturn \"\";\n\t}\n\tgetEmptyRowsEnabled() {\n\t\treturn this.creationMode === CreationMode.InlineCreationRows\n\t\t\t? this.tableDefinition.annotation.standardActions.actions.create.enabled\n\t\t\t: undefined;\n\t}\n\n\tgetTemplate() {\n\t\tconst headerBindingExpression = buildExpressionForHeaderVisible(this);\n\t\tif (this.rowPress) {\n\t\t\tthis.rowAction = \"Navigation\";\n\t\t}\n\t\tthis.rowPress ??= this.tableDefinition.annotation.row?.press;\n\t\tconst collectionDeletablePath = (\n\t\t\t(this.collectionEntity as EntitySet).annotations.Capabilities?.DeleteRestrictions\n\t\t\t\t?.Deletable as PathAnnotationExpression<boolean>\n\t\t)?.path;\n\t\tconst lineItem = TableHelper.getUiLineItemObject(this.metaPath, this.convertedMetaData) as\n\t\t\t| DataFieldForIntentBasedNavigation[]\n\t\t\t| undefined;\n\t\tconst delegate = TableHelper.getDelegate?.(\n\t\t\tthis.tableDefinition,\n\t\t\t(this.isAlp as boolean)?.toString(),\n\t\t\tthis.tableDefinition.annotation.entityName\n\t\t);\n\t\tconst selectionChange = `TableRuntime.setContexts(\\${$source>/}, '${collectionDeletablePath}', '${\n\t\t\t(this.collectionEntity as EntitySet).annotations.Common?.DraftRoot\n\t\t}', '${this.tableDefinition.operationAvailableMap}', '${TableHelper.getNavigationAvailableMap(\n\t\t\tlineItem\n\t\t)}', '${ActionHelper.getMultiSelectDisabledActions(lineItem)}', '${this.updatablePropertyPath}')`;\n\n\t\tconst entityType = this._getEntityType();\n\n\t\tconst modelContextChange =\n\t\t\tthis.tableType === \"TreeTable\"\n\t\t\t\t? `TableRuntime.onTreeTableContextChanged(\\${$source>/}, ${this.tableDefinition.annotation.initialExpansionLevel})`\n\t\t\t\t: undefined;\n\n\t\treturn xml`\n            <macroTable:TableAPI\n                xmlns=\"sap.m\"\n                xmlns:mdc=\"sap.ui.mdc\"\n                xmlns:plugins=\"sap.m.plugins\"\n                xmlns:mdcTable=\"sap.ui.mdc.table\"\n                xmlns:macroTable=\"sap.fe.macros.table\"\n                xmlns:mdcat=\"sap.ui.mdc.actiontoolbar\"\n                xmlns:core=\"sap.ui.core\"\n                xmlns:control=\"sap.fe.core.controls\"\n                xmlns:dt=\"sap.ui.dt\"\n                xmlns:fl=\"sap.ui.fl\"\n                xmlns:variant=\"sap.ui.fl.variants\"\n                xmlns:p13n=\"sap.ui.mdc.p13n\"\n                xmlns:internalMacro=\"sap.fe.macros.internal\"\n                xmlns:unittest=\"http://schemas.sap.com/sapui5/preprocessorextension/sap.fe.unittesting/1\"\n                xmlns:macrodata=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n                binding=\"{internal>controls/${this.id}}\"\n                id=\"${this._apiId}\"\n                tableDefinition=\"{_pageModel>${this.tableDefinitionContext!.getPath()}}\"\n                entityTypeFullyQualifiedName=\"${entityType?.fullyQualifiedName}\"\n                metaPath=\"${this.metaPath?.getPath()}\"\n                contextPath=\"${this.contextPath?.getPath()}\"\n                stateChange=\"${this.stateChange}\"\n                selectionChange=\"${this.selectionChange}\"\n\t\t\t\tcontextChange=\"${this.onContextChange}\"\n                readOnly=\"${this.readOnly}\"\n                filterBar=\"${this.filterBar}\"\n                macrodata:tableAPILocalId=\"${this._apiId}\"\n                emptyRowsEnabled=\"${this.getEmptyRowsEnabled()}\"\n                enableAutoColumnWidth=\"${this.enableAutoColumnWidth}\"\n                isOptimizedForSmallDevice=\"${this.isOptimizedForSmallDevice}\"\n            >\n\t\t\t\t<template:with path=\"collection>${CommonHelper.getTargetCollectionPath(this.collection)}\" var=\"targetCollection\">\n                <macroTable:layoutData>\n                    <FlexItemData maxWidth=\"100%\" />\n                </macroTable:layoutData>\n                <!-- macrodata has to be an expression binding if it needs to be set as attribute via change handler during templating -->\n                    <mdc:Table\n                        unittest:id=\"TableMacroFragment\"\n                        core:require=\"{TableRuntime: 'sap/fe/macros/table/TableRuntime', API: 'sap/fe/macros/table/TableAPI'}\"\n                        fl:flexibility=\"{this>fl:flexibility}\"\n                        sortConditions=\"${this.tableDefinition.annotation.sortConditions}\"\n                        groupConditions=\"${CommonHelper.stringifyObject(this.tableDefinition.annotation.groupConditions as string)}\"\n                        aggregateConditions=\"${CommonHelper.stringifyObject(this.tableDefinition.annotation.aggregateConditions as string)}\"\n                        dt:designtime=\"${this.variantManagement === \"None\" ? \"not-adaptable\" : undefined}\"\n                        macrodata:kind=\"${this.collectionEntity._type}\"\n                        macrodata:navigationPath=\"${this.navigationPath}\"\n                        id=\"${this.id}\"\n                        busy=\"${this.busy}\"\n                        busyIndicatorDelay=\"0\"\n                        enableExport=\"${this.enableExport}\"\n                        delegate=\"${delegate}\"\n                        rowPress=\"${this.rowPress}\"\n                        height=\"100%\"\n                        autoBindOnInit=\"${this.autoBindOnInit && !this.filterBar}\"\n                        selectionMode=\"${this.selectionMode || \"None\"}\"\n                        selectionChange=\"${selectionChange}\"\n                        showRowCount=\"${this.tableDefinition.control.showRowCount}\"\n                        ${this.attr(\"header\", this.header)}\n                        headerVisible=\"${headerBindingExpression}\"\n                        headerLevel=\"${this.headerLevel}\"\n                        threshold=\"${this.tableDefinition.annotation.threshold}\"\n                        noData=\"${this.noDataText}\"\n                        p13nMode=\"${this.personalization}\"\n                        filter=\"${this.filterBarId}\"\n                        paste=\"API.onPaste($event, $controller)\"\n                        beforeExport=\"API.onBeforeExport($event)\"\n                        class=\"${this.tableDefinition.control.useCondensedTableLayout === true ? \"sapUiSizeCondensed\" : undefined}\"\n                        multiSelectMode=\"${this.tableDefinition.control.multiSelectMode}\"\n                        showPasteButton=\"${this.tableDefinition.annotation.standardActions.actions.paste.visible}\"\n                        enablePaste=\"${this.tableDefinition.annotation.standardActions.actions.paste.enabled}\"\n                        macrodata:rowsBindingInfo=\"${TableHelper.getRowsBindingInfo(this)}\"\n                        macrodata:enableAnalytics=\"${this.tableDefinition.enableAnalytics}\"\n                        macrodata:creationMode=\"${this.creationMode}\"\n                        macrodata:inlineCreationRowCount=\"${this.inlineCreationRowCount}\"\n                        macrodata:showCreate=\"${this.showCreate}\"\n                        macrodata:createAtEnd=\"${this.createAtEnd}\"\n                        macrodata:enableAutoScroll=\"${this.enableAutoScroll}\"\n                        macrodata:displayModePropertyBinding=\"${this.readOnly}\"\n                        macrodata:tableType=\"${this.tableType}\"\n                        macrodata:targetCollectionPath=\"${CommonHelper.getContextPath(null, { context: this.collection })}\"\n                        macrodata:entityType=\"${CommonHelper.getContextPath(null, { context: this.collection }) + \"/\"}\"\n                        macrodata:metaPath=\"${CommonHelper.getContextPath(null, { context: this.collection })}\"\n                        macrodata:onChange=\"${this.onChange}\"\n                        macrodata:hiddenFilters=\"${TableHelper.formatHiddenFilters(this.tableDefinition.control.filters?.hiddenFilters)}\"\n                        macrodata:requestGroupId=\"$auto.Workers\"\n                        macrodata:segmentedButtonId=\"${generate([this.id, \"SegmentedButton\", \"TemplateContentView\"])}\"\n                        macrodata:enablePaste=\"${this.enablePaste}\"\n                        macrodata:operationAvailableMap=\"${CommonHelper.stringifyCustomData(this.tableDefinition.operationAvailableMap)}\"\n                        visible=\"${this.visible}\"\n\t\t\t\t\t\tmodelContextChange=\"${modelContextChange}\"\n                    >\n                        <mdc:dataStateIndicator>\n                            <plugins:DataStateIndicator\n                                filter=\"${this.dataStateIndicatorFilter}\"\n                                enableFiltering=\"true\"\n                                dataStateChange=\"API.onDataStateChange\"\n                            />\n                        </mdc:dataStateIndicator>\n                        <mdc:type>\n                            ${this.getTableType()}\n                        </mdc:type>\n                        <mdc:dependents>\n                            ${this.getDependents()}\n                        </mdc:dependents>\n                        <mdc:actions>\n                            ${this.getActions()}\n                        </mdc:actions>\n                        <mdc:rowSettings>\n                        ${this.getRowSetting()}\n                        </mdc:rowSettings>\n                        <mdc:columns>\n                            <core:Fragment fragmentName=\"sap.fe.macros.table.Columns\" type=\"XML\" />\n                        </mdc:columns>\n                        ${this.getCreationRow()}\n                        ${this.getVariantManagement()}\n                        ${this.getQuickFilter()}\n                    </mdc:Table>\n\t\t\t\t</template:with>\n            </macroTable:TableAPI>\n        `;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":29477,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","CommonUtils","DataField","DataVisualization","ManifestSettings","MetaModelConverter","ModelHelper","StableIdHelper","TypeGuards","DataModelPathHelper","TableTemplating","library","CommonHelper","ActionHelper","MacroAPI","ActionsTemplating","TableHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_dec32","_dec33","_dec34","_dec35","_dec36","_dec37","_dec38","_dec39","_dec40","_dec41","_dec42","_dec43","_dec44","_dec45","_dec46","_dec47","_dec48","_dec49","_dec50","_dec51","_dec52","_dec53","_dec54","_dec55","_dec56","_dec57","_dec58","_dec59","_dec60","_dec61","_dec62","_dec63","_dec64","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","_descriptor30","_descriptor31","_descriptor32","_descriptor33","_descriptor34","_descriptor35","_descriptor36","_descriptor37","_descriptor38","_descriptor39","_descriptor40","_descriptor41","_descriptor42","_descriptor43","_descriptor44","_descriptor45","_descriptor46","_descriptor47","_descriptor48","_descriptor49","_descriptor50","_descriptor51","_descriptor52","_descriptor53","_descriptor54","_descriptor55","_descriptor56","_descriptor57","_descriptor58","_descriptor59","_descriptor60","_descriptor61","_descriptor62","_descriptor63","_exports","getTableActionTemplate","TitleLevel","buildExpressionForHeaderVisible","getContextRelativeTargetObjectPath","isSingleton","generate","getInvolvedDataModelObjects","CreationMode","getVisualizationsFromPresentationVariant","getDataVisualizationConfiguration","isDataFieldForAnnotation","xml","defineBuildingBlock","blockEvent","blockAttribute","blockAggregation","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","setCustomActionProperties","childAction","_act$getAttribute","menuContentActions","act","menuActions","actionKey","getAttribute","replace","children","length","localName","namespaceURI","indexOf","actionsToAdd","Array","apply","actionIdx","acc","actToAdd","_actToAdd$getAttribut","actionKeyAdd","curOutObject","text","__noWrap","press","requiresSelection","enabled","values","map","menuItem","position","placement","anchor","menu","setCustomColumnProperties","childColumn","aggregationObject","_childColumn$children","_childColumn$getAttri","setAttribute","type","width","importance","horizontalAlign","availability","header","template","outerHTML","properties","split","TableBlock","name","namespace","publicNamespace","returnTypes","isPublic","required","expectedTypes","processAggregations","hasVirtualNode","_BuildingBlockBase","props","controlConfiguration","settings","_this$contextPath","_this$tableDefinition2","_this$tableDefinition3","_this","this","getTableType","collection","getObject","tableType","tableDefinition","control","rowCountMode","rowCount","selectionLimit","frozenColumnCount","growingMode","$kind","getDependents","_this$tableDefinition","dependents","readOnly","columns","column","getValueHelp","standardActions","annotation","actions","isInsertUpdateTemplated","isTemplated","pressEventForCreateButton","visible","delete","_ref","_ref$annotations","_ref$annotations$UI","_this$collectionEntit","_this$collectionEntit2","headerInfo","collectionEntity","entityType","targetType","annotations","UI","HeaderInfo","pressEventForDeleteButton","contextObjectPath","actionName","commandActions","action","getActionCommand","variantManagement","id","getActions","onSegmentedButtonPressed","isDesktop","metaPath","contextPath","pageContext","bindingContexts","converterContext","pageTemplateType","setUpTableDefinition","models","metaModel","createBindingContext","convertedMetaData","convertedTypes","resolvePath","setUpId","getConverterContext","getPath","_collectionIsDraftEnabled","getManifestWrapper","isFilterBarHidden","isDraftNode","isDraftRoot","selectionMode","enableFullScreen","enableExport","enablePaste","paste","updatablePropertyPath","disableAddRowButtonForEmptyData","customValidationFunction","headerVisible","searchable","inlineCreationRowCount","title","isCompactType","creationMode","mode","createAtEnd","append","createOutbound","outbound","createNewAction","newAction","createOutboundDetail","outboundDetail","personalization","p13nMode","enableAutoColumnWidth","dataStateIndicatorFilter","isOptimizedForSmallDevice","isSmallDevice","navigationPath","startsWith","startingEntitySet","setReadOnly","rowPress","rowAction","row","isSearchable","useBasicSearch","filterBar","filterBarId","showCreate","autoBindOnInit","columnEditMode","getVisualizationPath","error","targetObject","term","resolvedTarget","getEntityTypeAnnotation","visualizations","PresentationVariant","lineItemViz","find","viz","visualization","annotationPath","getPresentationPath","_contextObjectPath$ta","presentationPath","table","_table$contextPath","_table$contextPath2","initialConverterContext","visualizationPath","extraParams","tableSettings","_Object$values","item","visualizationDefinition","useCondensedLayout","tableDefinitionContext","_proto","_apiId","getContentId","displayMode","_getEntityType","_this$collectionEntit3","_this$collectionEntit4","getValueHelpTemplateFromPath","datFieldPath","dataFieldObject","Target","$target","index","Data","_ActionTarget","_ActionTarget2","_ActionTarget2$annota","_ActionTarget2$annota2","_ActionTarget2$annota3","dataField","actionContextPath","getActionContext","getModel","actionContext","dataFieldDataModelObjectPath","isBound","ActionTarget","isOperationAvailable","Core","OperationAvailable","valueOf","displayCommandAction","pressEventDataFieldForActionButton","operationAvailableMap","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","getPressHandlerForDataFieldForIBN","enableAnalytics","noWrap","buildActionWrapper","isDataFieldForIBNEnabled","RequiresContext","NavigationAvailable","isDataFieldForActionEnabled","Action","enableOnSelect","targetEntityType","getCreationRow","creationRowAction","creationRow","getRowSetting","_this$tableDefinition4","_this$tableDefinition5","rowSettingsTemplate","rowNavigated","rowHighlighting","_this$tableDefinition6","getVariantManagement","headerLevel","variantSaved","getQuickFilter","_this$tableDefinition7","filters","quickFilters","getEmptyRowsEnabled","InlineCreationRows","getTemplate","_this$tableDefinition8","_annotations$Capabili","_annotations$Capabili2","_annotations$Capabili3","_TableHelper$getDeleg","_this$isAlp","_annotations$Common","_this$metaPath","_this$contextPath2","_this$tableDefinition9","headerBindingExpression","collectionDeletablePath","Capabilities","DeleteRestrictions","Deletable","path","lineItem","getUiLineItemObject","delegate","getDelegate","isAlp","toString","entityName","selectionChange","Common","DraftRoot","getNavigationAvailableMap","getMultiSelectDisabledActions","modelContextChange","initialExpansionLevel","fullyQualifiedName","stateChange","onContextChange","getTargetCollectionPath","sortConditions","stringifyObject","groupConditions","aggregateConditions","_type","busy","showRowCount","attr","threshold","noDataText","useCondensedTableLayout","multiSelectMode","getRowsBindingInfo","getContextPath","onChange","formatHiddenFilters","hiddenFilters","stringifyCustomData","Auto"],"sources":["Table.block-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":29658,"column":0},"map":{"version":3,"names":["TableAPI","defineUI5Class","returnTypes","property","type","expectedTypes","expectedAnnotations","defaultValue","allowedValues","aggregation","multiple","event","xmlEventHandler","mSettings","others","updateFilterBar","content","attachEvent","onTableSelectionChange","getAPI","ui5Event","source","getSource","tableAPI","isA","instanceMap","get","find","api","getRowBinding","getSelectedContexts","addMessage","parameters","msgManager","_getMessageManager","oTable","oMessage","Message","target","getResolvedPath","message","processor","getModel","description","persistent","addMessages","getId","removeMessage","id","messages","getMessageModel","getData","result","e","removeMessages","updateQuickFilterCounts","table","selector","getQuickFilter","controller","CommonUtils","getTargetView","getController","svItems","getItems","internalContext","getBindingContext","bindingPromises","currentFilterKey","getSelectedKey","quickFilterCounts","chartFilters","Promise","resolve","chart","getChartControl","chartAPI","getParent","hasSelections","chartFilterInfo","ChartUtils","getAllFilterInfo","filters","length","getChartPropertiesWithoutPrefixes","Filter","and","additionalFilters","TableUtils","getHiddenFilters","k","itemKey","getKey","filterInfos","getFiltersInfoForSV","push","getListBindingForCount","batchGroupId","setProperty","counts","all","getCountFormatted","error","Log","sap","ui","getCore","getMessageManager","_getRowBinding","getContent","getCounts","getProperty","data","then","iValue","catch","onContextChange","fireEvent","getParameters","setFastCreationRowEnablement","onQuickFilterSelectionChange","filterBarID","getFilter","filterBar","Core","byId","getSuspendSelection","rebind","getExtensionAPI","updateAppState","onTableRowPress","oEvent","oController","oContext","mParameters","isInactive","isTransient","getTableDefinition","enableAnalytics","navigationParameters","Object","assign","reason","NavigationReason","RowPress","_routing","navigateForwardToContext","onInternalPatchCompleted","internalModelContext","selectedContexts","DeleteHelper","updateDeleteInfoForSelectedContexts","onInternalDataReceived","getParameter","messageHandler","showMessageDialog","onInternalDataRequested","control","quickFilters","showCounts","onPaste","tableDefinition","enablePaste","aRawPastedData","getEnablePaste","PasteHelper","pasteData","oResourceModel","getLibraryResourceBundle","MessageBox","getText","title","onBeforeExport","exportEvent","isSplitMode","splitCells","tableController","exportSettings","updateExportSettings","dataStateIndicatorFilter","sTableContextBindingPath","getPath","sTableRowBinding","getTarget","onDataStateChange","oDataStateIndicator","aFilteredMessages","oInternalModel","columns","dataSource","sizeLimit","exportColumns","workbook","index","exportColumn","resourceBundle","label","getLocalizedText","falseValue","trueValue","targetValueColumn","column","columnWithTargetValueToBeAdded","columnToBeAdded","Array","isArray","template","exportDataPointTargetValue","splice","columnExport","columnNeedsToBeAdded","propertyInfos","relativePath","includes","name","resumeBinding","bRequestIfNotInitialized","getDataInitialized","refreshNotApplicableFields","oFilterControl","FilterUtils","getNotApplicableFilters","suspendBinding","invalidateContent","fastCreationRow","getCreationRow","tableBinding","bindingContext","getContext","TableHelper","enableFastCreationRow","onAddCardToInsightsPressed","insightsRelevantColumns","getInsightsRelevantColumns","insightsParams","createInsightsParams","IntegrationCardType","showInsightsCardPreview","genericErrorMessageForInsightsCard","onMassEditButtonPressed","pageController","massEdit","openMassEditDialog","warning","onActionPress","actionName","model","executeAction","notApplicableContexts","convertedMetadata","convertTypes","getMetaModel","entityType","resolvePath","entityTypeFullyQualifiedName","myUnapplicableContextDialog","NotApplicableContextDialog","resourceModel","getResourceModel","contexts","applicableContexts","open","editFlow","invokeAction","info","filterBarRefId","getFilterBar","_setFilterBar","tableAPIId","tableAPILocalId","potentialfilterBarId","replace","RegExp","setFilter","checkIfColumnExists","aFilteredColummns","columnName","some","oColumn","sColumnNameVisible","sTextArrangement","undefined","getIdentifierColumn","headerInfoTitlePath","headerInfoTitle","oMetaModel","sCurrentEntitySetName","aTechnicalKeys","getObject","aFilteredTechnicalKeys","forEach","technicalKey","semanticKeyColumns","semanticKeys","aVisibleColumns","aTableColumns","getColumns","getDataProperty","oTextArrangement","$Path","sTextPlacement","$EnumMember","setEmptyRowsEnabled","enablement","setUpEmptyRows","createButtonWasPressed","creationMode","CreationMode","InlineCreationRows","uiModel","watchBinding","bindProperty","fnHandler","detachChange","destroy","attachChange","isInEditMode","inlineCreationRowsHiddenInEditMode","binding","isResolved","isLengthFinal","contextPath","emptyRowsEnabled","_deleteEmptyRows","inactiveContext","getAllCurrentContexts","context","startsWith","_createEmptyRow","delete","oBinding","iInlineCreationRowCount","inlineCreationRowCount","aData","i","bAtEnd","bInactive","oView","creatingEmptyRows","aContexts","createMultipleDocuments","onBeforeCreate","created","oError","canceled","MacroAPI"],"sourceRoot":"table","sources":["TableAPI.ts"],"sourcesContent":["import { EntityType } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport NotApplicableContextDialog from \"sap/fe/core/controllerextensions/editFlow/NotApplicableContextDialog\";\nimport NavigationReason from \"sap/fe/core/controllerextensions/routing/NavigationReason\";\nimport type { AnnotationTableColumn, columnExportSettings, TableVisualization } from \"sap/fe/core/converters/controls/Common/Table\";\nimport { CreationMode, HorizontalAlign } from \"sap/fe/core/converters/ManifestSettings\";\nimport { convertTypes } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { aggregation, defineUI5Class, event, property, xmlEventHandler } from \"sap/fe/core/helpers/ClassSupport\";\nimport DeleteHelper from \"sap/fe/core/helpers/DeleteHelper\";\nimport { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport PasteHelper from \"sap/fe/core/helpers/PasteHelper\";\nimport { getLocalizedText, getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport ChartUtils from \"sap/fe/macros/chart/ChartUtils\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport TableUtils from \"sap/fe/macros/table/Utils\";\nimport type { InsightsCardColumnsType } from \"sap/insights/CardHelper\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport DataStateIndicator from \"sap/m/plugins/DataStateIndicator\";\nimport type SegmentedButton from \"sap/m/SegmentedButton\";\nimport type Select from \"sap/m/Select\";\nimport UI5Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport type { MessageType } from \"sap/ui/core/library\";\nimport Message from \"sap/ui/core/message/Message\";\nimport FilterBar from \"sap/ui/mdc/FilterBar\";\nimport Table from \"sap/ui/mdc/Table\";\nimport Filter from \"sap/ui/model/Filter\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport FilterBarAPI from \"../filterBar/FilterBarAPI\";\nimport { createInsightsParams, getInsightsRelevantColumns } from \"../insights/CommonInsightsHelper\";\nimport { genericErrorMessageForInsightsCard, IntegrationCardType, showInsightsCardPreview } from \"../insights/InsightsCardHelper\";\nimport MacroAPI from \"../MacroAPI\";\nimport TableHelper from \"./TableHelper\";\n\n/**\n * Definition of a custom action to be used inside the table toolbar\n *\n * @alias sap.fe.macros.table.Action\n * @public\n */\nexport type Action = {\n\t/**\n\t * Unique identifier of the action\n\t *\n\t * @public\n\t */\n\tkey: string;\n\n\t/**\n\t * The text that will be displayed for this action\n\t *\n\t * @public\n\t */\n\ttext: string;\n\t/**\n\t * Reference to the key of another action already displayed in the toolbar to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n\t/**\n\t * Defines where this action should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: \"Before\" | \"After\";\n\n\t/**\n\t * Event handler to be called when the user chooses the action\n\t *\n\t * @public\n\t */\n\tpress: string;\n\n\t/**\n\t * Defines if the action requires a selection.\n\t *\n\t * @public\n\t */\n\trequiresSelection?: boolean;\n\n\t/**\n\t * Enables or disables the action\n\t *\n\t * @public\n\t */\n\tenabled?: boolean;\n};\n\n/**\n * Definition of a custom ActionGroup to be used inside the table toolbar\n *\n * @alias sap.fe.macros.table.ActionGroup\n * @public\n */\nexport type ActionGroup = {\n\t/**\n\t * Unique identifier of the ActionGroup\n\t *\n\t * @public\n\t */\n\tkey: string;\n\n\t/**\n\t * Defines nested actions\n\t *\n\t * @public\n\t */\n\tactions: Action[];\n\n\t/**\n\t * The text that will be displayed for this action group\n\t *\n\t * @public\n\t */\n\ttext: string;\n\n\t/**\n\t * Reference to the key of another action or action group already displayed in the toolbar to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n\n\t/**\n\t * Defines where this action group should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: \"Before\" | \"After\";\n};\n\n/**\n * Definition of a custom column to be used inside the table.\n *\n * The template for the column has to be provided as the default aggregation\n *\n * @alias sap.fe.macros.table.Column\n * @public\n * @experimental\n */\nexport type Column = {\n\t/**\n\t * Unique identifier of the column\n\t *\n\t * @public\n\t */\n\tkey: string;\n\n\t/**\n\t * The text that will be displayed for this column header\n\t *\n\t * @public\n\t */\n\theader: string;\n\n\t/**\n\t * Defines the column's width.\n\t *\n\t * Allowed values are `auto`, `value` and `inherit` according to {@link sap.ui.core.CSSSize}\n\t *\n\t * @public\n\t */\n\twidth?: string;\n\n\t/**\n\t * Defines the column importance.\n\t *\n\t * You can define which columns should be automatically moved to the pop-in area based on their importance\n\t *\n\t * @public\n\t */\n\timportance?: string;\n\n\t/**\n\t * Aligns the header as well as the content horizontally\n\t *\n\t * @public\n\t */\n\thorizontalAlign?: HorizontalAlign;\n\n\t/**\n\t * Reference to the key of another column already displayed in the table to properly place this one\n\t *\n\t * @public\n\t */\n\tanchor?: string;\n\n\t/**\n\t * Defines where this column should be placed relative to the defined anchor\n\t *\n\t * Allowed values are `Before` and `After`\n\t *\n\t * @public\n\t */\n\tplacement?: \"Before\" | \"After\";\n};\n\ntype exportColumn = columnExportSettings & {\n\tproperty: string | Array<string>;\n\tlabel: string;\n\tcolumnId?: string;\n\twidth?: number;\n\ttextAlign?: string;\n\tdisplayUnit?: boolean;\n\ttrueValue?: string;\n\tfalseValue?: string;\n\tvalueMap?: string;\n};\n\nexport type exportSettings = {\n\tdataSource: {\n\t\tsizeLimit?: number;\n\t};\n\tworkbook: {\n\t\tcolumns: exportColumn[];\n\t};\n};\n\n/**\n * Building block used to create a table based on the metadata provided by OData V4.\n * <br>\n * Usually, a LineItem or PresentationVariant annotation is expected, but the Table building block can also be used to display an EntitySet.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:Table id=\"MyTable\" metaPath=\"@com.sap.vocabularies.UI.v1.LineItem\" /&gt;\n * </pre>\n *\n * @alias sap.fe.macros.Table\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.table.TableAPI\", { returnTypes: [\"sap.fe.macros.MacroAPI\"] })\nclass TableAPI extends MacroAPI {\n\tcreatingEmptyRows?: boolean;\n\n\tconstructor(mSettings?: PropertiesOf<TableAPI>, ...others: any[]) {\n\t\tsuper(mSettings as any, ...others);\n\n\t\tthis.updateFilterBar();\n\n\t\tif (this.content) {\n\t\t\tthis.content.attachEvent(\"selectionChange\", {}, this.onTableSelectionChange, this);\n\t\t}\n\t}\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"],\n\t\texpectedAnnotations: [\n\t\t\t\"com.sap.vocabularies.UI.v1.LineItem\",\n\t\t\t\"com.sap.vocabularies.UI.v1.PresentationVariant\",\n\t\t\t\"com.sap.vocabularies.UI.v1.SelectionPresentationVariant\"\n\t\t]\n\t})\n\tmetaPath!: string;\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t *\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"]\n\t})\n\tcontextPath!: string;\n\n\t@property({ type: \"object\" })\n\ttableDefinition!: TableVisualization;\n\n\t@property({ type: \"string\" })\n\tentityTypeFullyQualifiedName!: string;\n\n\t/**\n\t * An expression that allows you to control the 'read-only' state of the table.\n\t *\n\t * If you do not set any expression, SAP Fiori elements hooks into the standard lifecycle to determine the current state.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\" })\n\treadOnly!: boolean;\n\n\t/**\n\t * The identifier of the table control.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * An expression that allows you to control the 'busy' state of the table.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tbusy!: boolean;\n\n\t/**\n\t * Defines the type of table that will be used by the building block to render the data.\n\t *\n\t * Allowed values are `GridTable` and `ResponsiveTable`\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\", defaultValue: \"ResponsiveTable\", allowedValues: [\"GridTable\", \"ResponsiveTable\"] })\n\ttype!: string;\n\n\t/**\n\t * Controls if the export functionality of the table is enabled or not.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tenableExport!: boolean;\n\n\t/**\n\t * Controls if the paste functionality of the table is enabled or not.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tenablePaste!: boolean;\n\n\t/**\n\t * Controls whether the table can be opened in fullscreen mode or not.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tenableFullScreen!: boolean;\n\n\t/**\n\t * ID of the FilterBar building block associated with the table.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tfilterBar!: string;\n\n\t/**\n\t * Defines the selection mode to be used by the table.\n\t *\n\t * Allowed values are `None`, `Single`, `Multi` or `Auto`. If not set to 'None', SAP Fiori elements hooks into the standard lifecycle to determine the consistent selection mode.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\", allowedValues: [\"None\", \"Single\", \"Multi\", \"Auto\"] })\n\tselectionMode!: string;\n\n\t/**\n\t * Specifies the header text that is shown in the table.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\theader!: string;\n\n\t/**\n\t * Specifies if the column width is automatically calculated.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tenableAutoColumnWidth!: boolean;\n\n\t/**\n\t * Specifies it the table is designed for a mobile device.\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tisOptimizedForSmallDevice!: boolean;\n\n\t/**\n\t * Controls if the header text should be shown or not.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\theaderVisible!: boolean;\n\n\t/**\n\t * Number of columns that are fixed on the left. Only columns which are not fixed can be scrolled horizontally.\n\t *\n\t * This property is not relevant for Responsive tables\n\t *\n\t * @public\n\t */\n\t@property({ type: \"number\" })\n\tfrozenColumnCount?: number;\n\n\t/**\n\t * Aggregate actions of the table.\n\t *\n\t * @public\n\t */\n\t@aggregation({ type: \"sap.fe.macros.table.Action\", multiple: true })\n\tactions!: Action[];\n\n\t/**\n\t * Aggregate columns of the table.\n\t *\n\t * @public\n\t */\n\t@aggregation({ type: \"sap.fe.macros.table.Column\", multiple: true })\n\tcolumns!: Column[];\n\n\t/**\n\t *\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tdataInitialized!: boolean;\n\n\t/**\n\t *\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tbindingSuspended!: boolean;\n\n\t/**\n\t *\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\toutDatedBinding!: boolean;\n\n\t/**\n\t *\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\tpendingRequest!: boolean;\n\n\t/**\n\t * Specifies if the empty rows are enabled. This allows to have dynamic enablement of the empty rows via the setter function.\n\t *\n\t * @private\n\t */\n\t@property({ type: \"boolean\", defaultValue: false })\n\temptyRowsEnabled!: boolean;\n\n\t/**\n\t * An event is triggered when the user chooses a row; the event contains information about which row is chosen.\n\t *\n\t * You can set this in order to handle the navigation manually.\n\t *\n\t * @public\n\t */\n\t@event()\n\trowPress!: Function;\n\n\t/**\n\t * An event triggered when the Table State changes.\n\t *\n\t * You can set this in order to store the table state in the appstate.\n\t *\n\t * @private\n\t */\n\t@event()\n\tstateChange!: Function;\n\n\t/**\n\t * An event triggered when the Table context changes.\n\t *\n\t *\n\t * @private\n\t */\n\t@event()\n\tcontextChange?: Function;\n\n\t@event()\n\tinternalDataRequested!: Function;\n\n\t/**\n\t * Controls which options should be enabled for the table personalization dialog.\n\t *\n\t * If it is set to `true`, all possible options for this kind of table are enabled.<br/>\n\t * If it is set to `false`, personalization is disabled.<br/>\n\t *<br/>\n\t * You can also provide a more granular control for the personalization by providing a comma-separated list with the options you want to be available.<br/>\n\t * Available options are:<br/>\n\t *  - Sort<br/>\n\t *  - Column<br/>\n\t *  - Filter<br/>\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean | string\", defaultValue: true })\n\tpersonalization!: boolean | string;\n\n\t/**\n\t * Controls the kind of variant management that should be enabled for the table.\n\t *\n\t * Allowed value is `Control`.<br/>\n\t * If set with value `Control`, a variant management control is seen within the table and the table is linked to this.<br/>\n\t * If not set with any value, control level variant management is not available for this table.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\", allowedValues: [\"Control\"] })\n\tvariantManagement!: string;\n\n\t/**\n\t * Groups menu actions by key.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tmenu?: string;\n\n\t/**\n\t * Defines whether to display the search action.\n\t *\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tisSearchable?: boolean;\n\n\t/**\n\t * Gets the relevant tableAPI for a UI5 event.\n\t * An event can be triggered either by the inner control (the table) or the Odata listBinding\n\t * The first initiator is the usual one so it's managed by the MacroAPI whereas\n\t * the second one is specific to this API and has to managed by the TableAPI.\n\t *\n\t * @param ui5Event The UI5 event\n\t * @returns The TableAPI or false if not found\n\t * @private\n\t */\n\tstatic getAPI(ui5Event: UI5Event): MacroAPI | false {\n\t\tconst source = ui5Event.getSource();\n\t\tlet tableAPI: TableAPI | undefined;\n\t\tif (source.isA<ODataListBinding>(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\t\ttableAPI = (this.instanceMap?.get(this) as TableAPI[])?.find((api) => (api.content as Table)?.getRowBinding() === source);\n\t\t}\n\t\treturn tableAPI || super.getAPI(ui5Event);\n\t}\n\n\t/**\n\t * Gets contexts from the table that have been selected by the user.\n\t *\n\t * @returns Contexts of the rows selected by the user\n\t * @public\n\t */\n\tgetSelectedContexts(): Context[] {\n\t\treturn (this.content as any).getSelectedContexts();\n\t}\n\n\t/**\n\t * Adds a message to the table.\n\t *\n\t * The message applies to the whole table and not to an individual table row.\n\t *\n\t * @param [parameters] The parameters to create the message\n\t * @param parameters.type Message type\n\t * @param parameters.message Message text\n\t * @param parameters.description Message description\n\t * @param parameters.persistent True if the message is persistent\n\t * @returns The ID of the message\n\t * @public\n\t */\n\taddMessage(parameters: { type?: MessageType; message?: string; description?: string; persistent?: boolean }): string {\n\t\tconst msgManager = this._getMessageManager();\n\n\t\tconst oTable = this.content as any as Table;\n\n\t\tconst oMessage = new Message({\n\t\t\ttarget: oTable.getRowBinding().getResolvedPath(),\n\t\t\ttype: parameters.type,\n\t\t\tmessage: parameters.message,\n\t\t\tprocessor: oTable.getModel(),\n\t\t\tdescription: parameters.description,\n\t\t\tpersistent: parameters.persistent\n\t\t});\n\n\t\tmsgManager.addMessages(oMessage);\n\t\treturn oMessage.getId();\n\t}\n\n\t/**\n\t * Removes a message from the table.\n\t *\n\t * @param id The id of the message\n\t * @public\n\t */\n\tremoveMessage(id: string) {\n\t\tconst msgManager = this._getMessageManager();\n\t\tconst messages = msgManager.getMessageModel().getData();\n\t\tconst result = messages.find((e: any) => e.id === id);\n\t\tif (result) {\n\t\t\tmsgManager.removeMessages(result);\n\t\t}\n\t}\n\n\t/**\n\t * Updates the counts displayed into the quickFilter selector.\n\t *\n\t * @returns  Promise resolves once the counts are updated\n\t */\n\tasync updateQuickFilterCounts() {\n\t\tconst table = this.content as Table,\n\t\t\tselector = table.getQuickFilter() as Select | SegmentedButton,\n\t\t\tcontroller = CommonUtils.getTargetView(this)?.getController(),\n\t\t\tsvItems = selector.getItems(),\n\t\t\tinternalContext = table.getBindingContext(\"internal\") as Context,\n\t\t\tbindingPromises = [],\n\t\t\tcurrentFilterKey = selector.getSelectedKey();\n\t\tconst quickFilterCounts = {} as Record<number, string>;\n\t\tlet chartFilters: Filter[] = [];\n\t\tif (!controller || !internalContext) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\t// Add filters related to the chart for ALP\n\t\tconst chart = (controller as any).getChartControl?.();\n\t\tconst chartAPI = chart && chart.getParent();\n\t\tif (chartAPI && chartAPI.hasSelections()) {\n\t\t\tconst chartFilterInfo = ChartUtils.getAllFilterInfo(chart);\n\t\t\tif (chartFilterInfo.filters.length) {\n\t\t\t\tchartFilterInfo.filters = CommonUtils.getChartPropertiesWithoutPrefixes(chartFilterInfo.filters);\n\t\t\t\tchartFilters = [new Filter({ filters: chartFilterInfo.filters, and: true })];\n\t\t\t}\n\t\t}\n\t\tconst additionalFilters = [...TableUtils.getHiddenFilters(table), ...chartFilters];\n\n\t\tfor (const k in svItems) {\n\t\t\tconst itemKey = svItems[k].getKey(),\n\t\t\t\tfilterInfos = CommonUtils.getFiltersInfoForSV(table, itemKey);\n\n\t\t\tquickFilterCounts[k] = \"...\";\n\t\t\tbindingPromises.push(\n\t\t\t\tTableUtils.getListBindingForCount(table, table.getBindingContext(), {\n\t\t\t\t\tbatchGroupId: itemKey === currentFilterKey ? \"$auto.Workers\" : \"$auto\",\n\t\t\t\t\tadditionalFilters: [...additionalFilters, ...filterInfos.filters]\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\tinternalContext.setProperty(\"quickFilters\", { counts: quickFilterCounts });\n\t\ttry {\n\t\t\tconst counts = (await Promise.all(bindingPromises)) as number[];\n\t\t\tfor (const k in counts) {\n\t\t\t\tinternalContext.setProperty(`quickFilters/counts/${k}`, TableUtils.getCountFormatted(counts[k]));\n\t\t\t}\n\t\t} catch (error: unknown) {\n\t\t\tLog.error(\"Error while retrieving the binding promises\", error as string);\n\t\t}\n\t}\n\n\t_getMessageManager() {\n\t\treturn sap.ui.getCore().getMessageManager();\n\t}\n\n\t/**\n\t * An event triggered when the selection in the table changes.\n\t *\n\t * @public\n\t */\n\t@event()\n\tselectionChange!: Function;\n\n\t_getRowBinding() {\n\t\tconst oTable = (this as any).getContent();\n\t\treturn oTable.getRowBinding();\n\t}\n\n\tgetCounts(): Promise<string> {\n\t\tconst oTable = (this as any).getContent();\n\t\treturn TableUtils.getListBindingForCount(oTable, oTable.getBindingContext(), {\n\t\t\tbatchGroupId: !this.getProperty(\"bindingSuspended\") ? oTable.data(\"batchGroupId\") : \"$auto\",\n\t\t\tadditionalFilters: TableUtils.getHiddenFilters(oTable)\n\t\t})\n\t\t\t.then((iValue: any) => {\n\t\t\t\treturn TableUtils.getCountFormatted(iValue);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\treturn \"0\";\n\t\t\t});\n\t}\n\n\t/**\n\t * Handles the context change on the table.\n\t * An event is fired to propagate the OdataListBinding event and the enablement\n\t * of the creation row is calculated.\n\t *\n\t * @param ui5Event The UI5 event\n\t */\n\t@xmlEventHandler()\n\tonContextChange(ui5Event: UI5Event) {\n\t\tthis.fireEvent(\"contextChange\", ui5Event.getParameters());\n\t\tthis.setFastCreationRowEnablement();\n\t}\n\n\t/**\n\t * Handles the change on a quickFilter\n\t * The table is rebound if the FilterBar is not suspended and update the AppState.\n\t *\n\t */\n\t@xmlEventHandler()\n\tonQuickFilterSelectionChange() {\n\t\tconst table = this.content as Table;\n\t\t// Rebind the table to reflect the change in quick filter key.\n\t\t// We don't rebind the table if the filterBar for the table is suspended\n\t\t// as rebind will be done when the filterBar is resumed\n\t\tconst filterBarID = table.getFilter();\n\t\tconst filterBar = (filterBarID && Core.byId(filterBarID)) as FilterBar | undefined;\n\t\tif (!filterBar?.getSuspendSelection?.()) {\n\t\t\ttable.rebind();\n\t\t}\n\t\t(CommonUtils.getTargetView(this)?.getController() as PageController | undefined)?.getExtensionAPI().updateAppState();\n\t}\n\n\t@xmlEventHandler()\n\tonTableRowPress(oEvent: UI5Event, oController: PageController, oContext: Context, mParameters: any) {\n\t\t// prevent navigation to an empty row\n\t\tif (oContext && oContext.isInactive() && oContext.isTransient()) {\n\t\t\treturn false;\n\t\t}\n\t\t// In the case of an analytical table, if we're trying to navigate to a context corresponding to a visual group or grand total\n\t\t// --> Cancel navigation\n\t\tif (\n\t\t\tthis.getTableDefinition().enableAnalytics &&\n\t\t\toContext &&\n\t\t\toContext.isA(\"sap.ui.model.odata.v4.Context\") &&\n\t\t\ttypeof oContext.getProperty(\"@$ui5.node.isExpanded\") === \"boolean\"\n\t\t) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tconst navigationParameters = Object.assign({}, mParameters, { reason: NavigationReason.RowPress });\n\t\t\t(oController as any)._routing.navigateForwardToContext(oContext, navigationParameters);\n\t\t}\n\t}\n\n\t@xmlEventHandler()\n\tonInternalPatchCompleted() {\n\t\t// BCP: 2380023090\n\t\t// We handle enablement of Delete for the table here.\n\t\t// EditFlow.ts#handlePatchSent is handling the action enablement.\n\t\tconst internalModelContext = this.getBindingContext(\"internal\") as InternalModelContext;\n\t\tconst selectedContexts = this.getSelectedContexts();\n\t\tDeleteHelper.updateDeleteInfoForSelectedContexts(internalModelContext, selectedContexts);\n\t}\n\n\t@xmlEventHandler()\n\tonInternalDataReceived(oEvent: UI5Event) {\n\t\tif (oEvent.getParameter(\"error\")) {\n\t\t\tthis.getController().messageHandler.showMessageDialog();\n\t\t}\n\t}\n\n\t@xmlEventHandler()\n\tonInternalDataRequested(oEvent: UI5Event) {\n\t\tconst table = this.content as Table;\n\t\tthis.setProperty(\"dataInitialized\", true);\n\t\t(this as any).fireEvent(\"internalDataRequested\", oEvent.getParameters());\n\t\tif (table.getQuickFilter() && this.getTableDefinition().control.filters?.quickFilters?.showCounts) {\n\t\t\tthis.updateQuickFilterCounts();\n\t\t}\n\t}\n\n\t@xmlEventHandler()\n\tonPaste(oEvent: UI5Event, oController: PageController) {\n\t\t// If paste is disable or if we're not in edit mode, we can't paste anything\n\t\tif (!this.tableDefinition.control.enablePaste || !(this.getModel(\"ui\") as JSONModel).getProperty(\"/isEditable\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst aRawPastedData = oEvent.getParameter(\"data\"),\n\t\t\toTable = oEvent.getSource() as Table;\n\n\t\tif (oTable.getEnablePaste() === true) {\n\t\t\tPasteHelper.pasteData(aRawPastedData, oTable, oController);\n\t\t} else {\n\t\t\tconst oResourceModel = sap.ui.getCore().getLibraryResourceBundle(\"sap.fe.core\");\n\t\t\tMessageBox.error(oResourceModel.getText(\"T_OP_CONTROLLER_SAPFE_PASTE_DISABLED_MESSAGE\"), {\n\t\t\t\ttitle: oResourceModel.getText(\"C_COMMON_SAPFE_ERROR\")\n\t\t\t});\n\t\t}\n\t}\n\n\t// This event will allow us to intercept the export before is triggered to cover specific cases\n\t// that couldn't be addressed on the propertyInfos for each column.\n\t// e.g. Fixed Target Value for the datapoints\n\t@xmlEventHandler()\n\tonBeforeExport(exportEvent: UI5Event) {\n\t\tconst isSplitMode = exportEvent.getParameter(\"userExportSettings\").splitCells,\n\t\t\ttableController = exportEvent.getSource() as PageController,\n\t\t\texportSettings = exportEvent.getParameter(\"exportSettings\"),\n\t\t\ttableDefinition = this.getTableDefinition();\n\n\t\tTableAPI.updateExportSettings(exportSettings, tableDefinition, tableController, isSplitMode);\n\t}\n\n\t/**\n\t * Handles the MDC DataStateIndicator plugin to display messageStrip on a table.\n\t *\n\t * @param oMessage\n\t * @param oTable\n\t * @name dataStateFilter\n\t * @returns Whether to render the messageStrip visible\n\t */\n\tstatic dataStateIndicatorFilter(oMessage: any, oTable: any): boolean {\n\t\tconst sTableContextBindingPath = oTable.getBindingContext()?.getPath();\n\t\tconst sTableRowBinding = (sTableContextBindingPath ? `${sTableContextBindingPath}/` : \"\") + oTable.getRowBinding().getPath();\n\t\treturn sTableRowBinding === oMessage.getTarget() ? true : false;\n\t}\n\n\t/**\n\t * This event handles the DataState of the DataStateIndicator plugin from MDC on a table.\n\t * It's fired when new error messages are sent from the backend to update row highlighting.\n\t *\n\t * @name onDataStateChange\n\t * @param oEvent Event object\n\t */\n\t@xmlEventHandler()\n\tonDataStateChange(oEvent: UI5Event) {\n\t\tconst oDataStateIndicator = oEvent.getSource() as DataStateIndicator;\n\t\tconst aFilteredMessages = oEvent.getParameter(\"filteredMessages\");\n\t\tif (aFilteredMessages) {\n\t\t\tconst oInternalModel = oDataStateIndicator.getModel(\"internal\") as JSONModel;\n\t\t\toInternalModel.setProperty(\"filteredMessages\", aFilteredMessages, oDataStateIndicator.getBindingContext(\"internal\") as Context);\n\t\t}\n\t}\n\n\t/**\n\t * Updates the columns to be exported of a table.\n\t *\n\t * @param exportSettings The table export settings\n\t * @param tableDefinition The table definition from the table converter\n\t * @param tableController The table controller\n\t * @param isSplitMode Defines if the export has been launched using split mode\n\t * @returns The updated columns to be exported\n\t */\n\tstatic updateExportSettings(\n\t\texportSettings: exportSettings,\n\t\ttableDefinition: TableVisualization,\n\t\ttableController: PageController,\n\t\tisSplitMode: boolean\n\t): exportSettings {\n\t\t//Set static sizeLimit during export\n\t\tconst columns = tableDefinition.columns;\n\t\tif (\n\t\t\t!tableDefinition.enableAnalytics &&\n\t\t\t(tableDefinition.control.type === \"ResponsiveTable\" || tableDefinition.control.type === \"GridTable\")\n\t\t) {\n\t\t\texportSettings.dataSource.sizeLimit = 1000;\n\t\t}\n\t\tconst exportColumns = exportSettings.workbook.columns;\n\t\tfor (let index = exportColumns.length - 1; index >= 0; index--) {\n\t\t\tconst exportColumn = exportColumns[index];\n\t\t\tconst resourceBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\n\t\t\texportColumn.label = getLocalizedText(exportColumn.label, tableController);\n\t\t\t//translate boolean values\n\t\t\tif (exportColumn.type === \"Boolean\") {\n\t\t\t\texportColumn.falseValue = resourceBundle.getText(\"no\");\n\t\t\t\texportColumn.trueValue = resourceBundle.getText(\"yes\");\n\t\t\t}\n\t\t\tconst targetValueColumn = columns?.find((column) => {\n\t\t\t\tif (isSplitMode) {\n\t\t\t\t\treturn this.columnWithTargetValueToBeAdded(column as AnnotationTableColumn, exportColumn);\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (targetValueColumn) {\n\t\t\t\tconst columnToBeAdded = {\n\t\t\t\t\tlabel: resourceBundle.getText(\"TargetValue\"),\n\t\t\t\t\tproperty: Array.isArray(exportColumn.property) ? exportColumn.property : [exportColumn.property],\n\t\t\t\t\ttemplate: (targetValueColumn as AnnotationTableColumn).exportDataPointTargetValue\n\t\t\t\t};\n\t\t\t\texportColumns.splice(index + 1, 0, columnToBeAdded);\n\t\t\t}\n\t\t}\n\t\treturn exportSettings;\n\t}\n\n\t/**\n\t * Defines if a column that is to be exported and contains a DataPoint with a fixed target value needs to be added.\n\t *\n\t * @param column The column from the annotations column\n\t * @param columnExport The column to be exported\n\t * @returns `true` if the referenced column has defined a targetValue for the dataPoint, false else\n\t * @private\n\t */\n\tstatic columnWithTargetValueToBeAdded(column: AnnotationTableColumn, columnExport: exportColumn): boolean {\n\t\tlet columnNeedsToBeAdded = false;\n\t\tif (column.exportDataPointTargetValue && column.propertyInfos?.length === 1) {\n\t\t\t//Add TargetValue column when exporting on split mode\n\t\t\tif (\n\t\t\t\tcolumn.relativePath === columnExport.property ||\n\t\t\t\tcolumnExport.property[0] === column.propertyInfos[0] ||\n\t\t\t\tcolumnExport.property.includes(column.relativePath) ||\n\t\t\t\tcolumnExport.property.includes(column.name)\n\t\t\t) {\n\t\t\t\t// part of a FieldGroup or from a lineItem or from a column on the entitySet\n\t\t\t\tdelete columnExport.template;\n\t\t\t\tcolumnNeedsToBeAdded = true;\n\t\t\t}\n\t\t}\n\t\treturn columnNeedsToBeAdded;\n\t}\n\n\tresumeBinding(bRequestIfNotInitialized: boolean) {\n\t\tthis.setProperty(\"bindingSuspended\", false);\n\t\tif ((bRequestIfNotInitialized && !(this as any).getDataInitialized()) || this.getProperty(\"outDatedBinding\")) {\n\t\t\tthis.setProperty(\"outDatedBinding\", false);\n\t\t\t(this as any).getContent()?.rebind();\n\t\t}\n\t}\n\n\trefreshNotApplicableFields(oFilterControl: Control): any[] {\n\t\tconst oTable = (this as any).getContent();\n\t\treturn FilterUtils.getNotApplicableFilters(oFilterControl, oTable);\n\t}\n\n\tsuspendBinding() {\n\t\tthis.setProperty(\"bindingSuspended\", true);\n\t}\n\n\tinvalidateContent() {\n\t\tthis.setProperty(\"dataInitialized\", false);\n\t\tthis.setProperty(\"outDatedBinding\", false);\n\t}\n\n\t/**\n\t * Sets the enablement of the creation row.\n\t * @private\n\t *\n\t */\n\tsetFastCreationRowEnablement() {\n\t\tconst table = this.content as Table;\n\t\tconst fastCreationRow = table.getCreationRow();\n\n\t\tif (fastCreationRow && !fastCreationRow.getBindingContext()) {\n\t\t\tconst tableBinding = table.getRowBinding();\n\t\t\tconst bindingContext = tableBinding.getContext() as Context;\n\n\t\t\tif (bindingContext) {\n\t\t\t\tTableHelper.enableFastCreationRow(\n\t\t\t\t\tfastCreationRow,\n\t\t\t\t\ttableBinding.getPath(),\n\t\t\t\t\tbindingContext,\n\t\t\t\t\tbindingContext.getModel(),\n\t\t\t\t\t(table.getModel(\"ui\") as JSONModel).getProperty(\"/isEditable\")\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Event handler to create insightsParams and call the API to show insights card preview for table.\n\t *\n\t * @returns Undefined if card preview is rendered.\n\t */\n\t@xmlEventHandler()\n\tasync onAddCardToInsightsPressed() {\n\t\ttry {\n\t\t\tconst insightsRelevantColumns = getInsightsRelevantColumns(this) as InsightsCardColumnsType[];\n\t\t\tconst insightsParams = await createInsightsParams(this, IntegrationCardType.table, insightsRelevantColumns);\n\t\t\tif (insightsParams) {\n\t\t\t\tshowInsightsCardPreview(insightsParams);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tgenericErrorMessageForInsightsCard(this.content);\n\t\t\tLog.error(e as string);\n\t\t}\n\t}\n\n\t@xmlEventHandler()\n\tonMassEditButtonPressed(oEvent: UI5Event, pageController: any) {\n\t\tconst oTable = this.content;\n\t\tif (pageController && pageController.massEdit) {\n\t\t\tpageController.massEdit.openMassEditDialog(oTable);\n\t\t} else {\n\t\t\tLog.warning(\"The Controller is not enhanced with Mass Edit functionality\");\n\t\t}\n\t}\n\n\t@xmlEventHandler()\n\tonTableSelectionChange(oEvent: UI5Event) {\n\t\tthis.fireEvent(\"selectionChange\", oEvent.getParameters());\n\t}\n\n\t@xmlEventHandler()\n\tasync onActionPress(oEvent: UI5Event, pageController: PageController, actionName: string, parameters: any) {\n\t\tparameters.model = (oEvent.getSource() as Control).getModel();\n\t\tlet executeAction = true;\n\t\tif (parameters.notApplicableContexts && parameters.notApplicableContexts.length > 0) {\n\t\t\t// If we have non applicable contexts, we need to open a dialog to ask the user if he wants to continue\n\t\t\tconst convertedMetadata = convertTypes(parameters.model.getMetaModel());\n\t\t\tconst entityType = convertedMetadata.resolvePath<EntityType>(this.entityTypeFullyQualifiedName).target!;\n\t\t\tconst myUnapplicableContextDialog = new NotApplicableContextDialog({\n\t\t\t\tentityType: entityType,\n\t\t\t\tnotApplicableContexts: parameters.notApplicableContexts,\n\t\t\t\ttitle: parameters.label,\n\t\t\t\tresourceModel: getResourceModel(this)\n\t\t\t});\n\t\t\tparameters.contexts = parameters.applicableContexts;\n\t\t\texecuteAction = await myUnapplicableContextDialog.open(this);\n\t\t}\n\t\tif (executeAction) {\n\t\t\t// Direct execution of the action\n\t\t\ttry {\n\t\t\t\treturn await pageController.editFlow.invokeAction(actionName, parameters);\n\t\t\t} catch (e) {\n\t\t\t\tLog.info(e as string);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Expose the internal table definition for external usage in delegate.\n\t *\n\t * @returns The tableDefinition\n\t */\n\tgetTableDefinition() {\n\t\treturn this.tableDefinition;\n\t}\n\n\t/**\n\t * connect the filter to the tableAPI if required\n\t *\n\t * @private\n\t * @alias sap.fe.macros.TableAPI\n\t */\n\n\tupdateFilterBar() {\n\t\tconst table = (this as any).getContent();\n\t\tconst filterBarRefId = (this as any).getFilterBar();\n\t\tif (table && filterBarRefId && table.getFilter() !== filterBarRefId) {\n\t\t\tthis._setFilterBar(filterBarRefId);\n\t\t}\n\t}\n\n\t/**\n\t * Sets the filter depending on the type of filterBar.\n\t *\n\t * @param filterBarRefId Id of the filter bar\n\t * @private\n\t * @alias sap.fe.macros.TableAPI\n\t */\n\t_setFilterBar(filterBarRefId: string): void {\n\t\tconst table = (this as any).getContent();\n\n\t\t// 'filterBar' property of macro:Table(passed as customData) might be\n\t\t// 1. A localId wrt View(FPM explorer example).\n\t\t// 2. Absolute Id(this was not supported in older versions).\n\t\t// 3. A localId wrt FragmentId(when an XMLComposite or Fragment is independently processed) instead of ViewId.\n\t\t//    'filterBar' was supported earlier as an 'association' to the 'mdc:Table' control inside 'macro:Table' in prior versions.\n\t\t//    In newer versions 'filterBar' is used like an association to 'macro:TableAPI'.\n\t\t//    This means that the Id is relative to 'macro:TableAPI'.\n\t\t//    This scenario happens in case of FilterBar and Table in a custom sections in OP of FEV4.\n\n\t\tconst tableAPIId = this?.getId();\n\t\tconst tableAPILocalId = this.data(\"tableAPILocalId\");\n\t\tconst potentialfilterBarId =\n\t\t\ttableAPILocalId && filterBarRefId && tableAPIId && tableAPIId.replace(new RegExp(tableAPILocalId + \"$\"), filterBarRefId); // 3\n\n\t\tconst filterBar =\n\t\t\tCommonUtils.getTargetView(this)?.byId(filterBarRefId) || Core.byId(filterBarRefId) || Core.byId(potentialfilterBarId);\n\n\t\tif (filterBar) {\n\t\t\tif (filterBar.isA<FilterBarAPI>(\"sap.fe.macros.filterBar.FilterBarAPI\")) {\n\t\t\t\ttable.setFilter(`${filterBar.getId()}-content`);\n\t\t\t} else if (filterBar.isA<FilterBar>(\"sap.ui.mdc.FilterBar\")) {\n\t\t\t\ttable.setFilter(filterBar.getId());\n\t\t\t}\n\t\t}\n\t}\n\n\tcheckIfColumnExists(aFilteredColummns: any, columnName: any) {\n\t\treturn aFilteredColummns.some(function (oColumn: any) {\n\t\t\tif (\n\t\t\t\t(oColumn?.columnName === columnName && oColumn?.sColumnNameVisible) ||\n\t\t\t\t(oColumn?.sTextArrangement !== undefined && oColumn?.sTextArrangement === columnName)\n\t\t\t) {\n\t\t\t\treturn columnName;\n\t\t\t}\n\t\t});\n\t}\n\n\tgetIdentifierColumn(): any {\n\t\tconst oTable = (this as any).getContent();\n\t\tconst headerInfoTitlePath = this.getTableDefinition().headerInfoTitle;\n\t\tconst oMetaModel = oTable && oTable.getModel().getMetaModel(),\n\t\t\tsCurrentEntitySetName = oTable.data(\"metaPath\");\n\t\tconst aTechnicalKeys = oMetaModel.getObject(`${sCurrentEntitySetName}/$Type/$Key`);\n\t\tconst aFilteredTechnicalKeys: string[] = [];\n\n\t\tif (aTechnicalKeys && aTechnicalKeys.length > 0) {\n\t\t\taTechnicalKeys.forEach(function (technicalKey: string) {\n\t\t\t\tif (technicalKey !== \"IsActiveEntity\") {\n\t\t\t\t\taFilteredTechnicalKeys.push(technicalKey);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tconst semanticKeyColumns = this.getTableDefinition().semanticKeys;\n\n\t\tconst aVisibleColumns: any = [];\n\t\tconst aFilteredColummns: any = [];\n\t\tconst aTableColumns = oTable.getColumns();\n\t\taTableColumns.forEach(function (oColumn: any) {\n\t\t\tconst column = oColumn?.getDataProperty();\n\t\t\taVisibleColumns.push(column);\n\t\t});\n\n\t\taVisibleColumns.forEach(function (oColumn: any) {\n\t\t\tconst oTextArrangement = oMetaModel.getObject(`${sCurrentEntitySetName}/$Type/${oColumn}@`);\n\t\t\tconst sTextArrangement = oTextArrangement && oTextArrangement[\"@com.sap.vocabularies.Common.v1.Text\"]?.$Path;\n\t\t\tconst sTextPlacement =\n\t\t\t\toTextArrangement &&\n\t\t\t\toTextArrangement[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"]?.$EnumMember;\n\t\t\taFilteredColummns.push({\n\t\t\t\tcolumnName: oColumn,\n\t\t\t\tsTextArrangement: sTextArrangement,\n\t\t\t\tsColumnNameVisible: !(sTextPlacement === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\")\n\t\t\t});\n\t\t});\n\t\tlet column: any;\n\n\t\tif (headerInfoTitlePath !== undefined && this.checkIfColumnExists(aFilteredColummns, headerInfoTitlePath)) {\n\t\t\tcolumn = headerInfoTitlePath;\n\t\t} else if (\n\t\t\tsemanticKeyColumns !== undefined &&\n\t\t\tsemanticKeyColumns.length === 1 &&\n\t\t\tthis.checkIfColumnExists(aFilteredColummns, semanticKeyColumns[0])\n\t\t) {\n\t\t\tcolumn = semanticKeyColumns[0];\n\t\t} else if (\n\t\t\taFilteredTechnicalKeys !== undefined &&\n\t\t\taFilteredTechnicalKeys.length === 1 &&\n\t\t\tthis.checkIfColumnExists(aFilteredColummns, aFilteredTechnicalKeys[0])\n\t\t) {\n\t\t\tcolumn = aFilteredTechnicalKeys[0];\n\t\t}\n\t\treturn column;\n\t}\n\n\t/**\n\t * EmptyRowsEnabled setter.\n\t *\n\t * @param enablement\n\t */\n\tsetEmptyRowsEnabled(enablement: boolean) {\n\t\tthis.setProperty(\"emptyRowsEnabled\", enablement);\n\t\tthis.setUpEmptyRows(this.content as Table);\n\t}\n\n\tasync setUpEmptyRows(table: Table, createButtonWasPressed: boolean = false) {\n\t\tif (this.tableDefinition.control?.creationMode !== CreationMode.InlineCreationRows) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst uiModel = table.getModel(\"ui\") as JSONModel | undefined;\n\t\tif (!uiModel) {\n\t\t\treturn;\n\t\t}\n\t\tif (uiModel.getProperty(\"/isEditablePending\")) {\n\t\t\t// The edit mode is still being computed, so we wait until this computation is done before checking its value\n\t\t\tconst watchBinding = uiModel.bindProperty(\"/isEditablePending\");\n\t\t\tawait new Promise<void>((resolve) => {\n\t\t\t\tconst fnHandler = () => {\n\t\t\t\t\twatchBinding.detachChange(fnHandler);\n\t\t\t\t\twatchBinding.destroy();\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\t\t\t\twatchBinding.attachChange(fnHandler);\n\t\t\t});\n\t\t}\n\t\tconst isInEditMode = uiModel.getProperty(\"/isEditable\");\n\t\tif (!isInEditMode) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.tableDefinition.control?.inlineCreationRowsHiddenInEditMode &&\n\t\t\t!table.getBindingContext(\"ui\")?.getProperty(\"createMode\") &&\n\t\t\t!createButtonWasPressed\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst binding = table.getRowBinding() as ODataListBinding;\n\t\tif (binding.isResolved() && binding.isLengthFinal()) {\n\t\t\tconst contextPath = binding.getContext().getPath();\n\t\t\tif (!this.emptyRowsEnabled) {\n\t\t\t\treturn this._deleteEmptyRows(binding, contextPath);\n\t\t\t}\n\t\t\tconst inactiveContext = binding.getAllCurrentContexts().find(function (context) {\n\t\t\t\t// when this is called from controller code we need to check that inactive contexts are still relative to the current table context\n\t\t\t\treturn context.isInactive() === true && context.getPath().startsWith(contextPath);\n\t\t\t});\n\t\t\tif (!inactiveContext) {\n\t\t\t\tawait this._createEmptyRow(binding, table);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Deletes inactive rows from the table listBinding.\n\t *\n\t * @param binding\n\t * @param contextPath\n\t */\n\t_deleteEmptyRows(binding: ODataListBinding, contextPath: string) {\n\t\tfor (const context of binding.getAllCurrentContexts()) {\n\t\t\tif (context.isInactive() === true && context.getPath().startsWith(contextPath)) {\n\t\t\t\tcontext.delete();\n\t\t\t}\n\t\t}\n\t}\n\n\tasync _createEmptyRow(oBinding: ODataListBinding, oTable: Table) {\n\t\tconst iInlineCreationRowCount = this.tableDefinition.control?.inlineCreationRowCount || 2;\n\t\tconst aData = [];\n\t\tfor (let i = 0; i < iInlineCreationRowCount; i += 1) {\n\t\t\taData.push({});\n\t\t}\n\t\tconst bAtEnd = oTable.data(\"tableType\") !== \"ResponsiveTable\";\n\t\tconst bInactive = true;\n\t\tconst oView = CommonUtils.getTargetView(oTable);\n\t\tconst oController = oView.getController() as PageController;\n\t\tconst editFlow = oController.editFlow;\n\t\tif (!this.creatingEmptyRows) {\n\t\t\tthis.creatingEmptyRows = true;\n\t\t\ttry {\n\t\t\t\tconst aContexts = await editFlow.createMultipleDocuments(\n\t\t\t\t\toBinding,\n\t\t\t\t\taData,\n\t\t\t\t\tbAtEnd,\n\t\t\t\t\tfalse,\n\t\t\t\t\toController.editFlow.onBeforeCreate,\n\t\t\t\t\tbInactive\n\t\t\t\t);\n\t\t\t\taContexts?.forEach(function (oContext: any) {\n\t\t\t\t\toContext.created().catch(function (oError: any) {\n\t\t\t\t\t\tif (!oError.canceled) {\n\t\t\t\t\t\t\tthrow oError;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tLog.error(e as any);\n\t\t\t} finally {\n\t\t\t\tthis.creatingEmptyRows = false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default TableAPI;\n"],"mappings":"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A;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA,OAqgChBzV,QAAQ;AAAA"}},{"offset":{"line":30657,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","NotApplicableContextDialog","NavigationReason","ManifestSettings","MetaModelConverter","ClassSupport","DeleteHelper","PasteHelper","ResourceModelHelper","ChartUtils","FilterUtils","TableUtils","MessageBox","Core","Message","Filter","CommonInsightsHelper","InsightsCardHelper","MacroAPI","TableHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_dec32","_dec33","_dec34","_dec35","_dec36","_dec37","_dec38","_dec39","_dec40","_dec41","_dec42","_dec43","_dec44","_dec45","_dec46","_dec47","_dec48","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","_descriptor30","_descriptor31","_descriptor32","_descriptor33","_descriptor34","showInsightsCardPreview","IntegrationCardType","genericErrorMessageForInsightsCard","getInsightsRelevantColumns","createInsightsParams","getResourceModel","getLocalizedText","xmlEventHandler","property","event","defineUI5Class","aggregation","convertTypes","CreationMode","_initializerDefineProperty","target","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","TableAPI","returnTypes","type","expectedTypes","expectedAnnotations","defaultValue","allowedValues","multiple","_MacroAPI","mSettings","_this","_len","arguments","length","others","Array","_key","this","updateFilterBar","content","attachEvent","onTableSelectionChange","getAPI","ui5Event","source","getSource","tableAPI","isA","_this$instanceMap","_this$instanceMap$get","instanceMap","get","find","api","_api$content","getRowBinding","_proto","getSelectedContexts","addMessage","parameters","msgManager","_getMessageManager","oTable","oMessage","getResolvedPath","message","processor","getModel","description","persistent","addMessages","getId","removeMessage","id","messages","getMessageModel","getData","result","e","removeMessages","updateQuickFilterCounts","async","_CommonUtils$getTarge","_getChartControl","_ref","table","selector","getQuickFilter","controller","getTargetView","getController","svItems","getItems","internalContext","getBindingContext","bindingPromises","currentFilterKey","getSelectedKey","quickFilterCounts","chartFilters","Promise","resolve","chart","getChartControl","chartAPI","getParent","hasSelections","chartFilterInfo","getAllFilterInfo","filters","getChartPropertiesWithoutPrefixes","and","additionalFilters","getHiddenFilters","k","itemKey","getKey","filterInfos","getFiltersInfoForSV","push","getListBindingForCount","batchGroupId","setProperty","counts","all","getCountFormatted","error","getCore","getMessageManager","_getRowBinding","getContent","getCounts","getProperty","data","then","iValue","catch","onContextChange","fireEvent","getParameters","setFastCreationRowEnablement","onQuickFilterSelectionChange","_filterBar$getSuspend","_CommonUtils$getTarge2","_CommonUtils$getTarge3","filterBarID","getFilter","filterBar","byId","getSuspendSelection","rebind","getExtensionAPI","updateAppState","onTableRowPress","oEvent","oController","oContext","mParameters","isInactive","isTransient","getTableDefinition","enableAnalytics","navigationParameters","assign","reason","RowPress","_routing","navigateForwardToContext","onInternalPatchCompleted","internalModelContext","selectedContexts","updateDeleteInfoForSelectedContexts","onInternalDataReceived","getParameter","messageHandler","showMessageDialog","onInternalDataRequested","_this$getTableDefinit","_this$getTableDefinit2","control","quickFilters","showCounts","onPaste","tableDefinition","enablePaste","aRawPastedData","getEnablePaste","pasteData","oResourceModel","getLibraryResourceBundle","getText","title","onBeforeExport","exportEvent","isSplitMode","splitCells","tableController","exportSettings","updateExportSettings","dataStateIndicatorFilter","_oTable$getBindingCon","sTableContextBindingPath","getPath","sTableRowBinding","getTarget","onDataStateChange","oDataStateIndicator","aFilteredMessages","oInternalModel","columns","dataSource","sizeLimit","exportColumns","workbook","index","exportColumn","resourceBundle","label","falseValue","trueValue","targetValueColumn","column","columnWithTargetValueToBeAdded","columnToBeAdded","isArray","template","exportDataPointTargetValue","splice","columnExport","_column$propertyInfos","columnNeedsToBeAdded","propertyInfos","relativePath","includes","name","resumeBinding","bRequestIfNotInitialized","getDataInitialized","_getContent","refreshNotApplicableFields","oFilterControl","getNotApplicableFilters","suspendBinding","invalidateContent","fastCreationRow","getCreationRow","tableBinding","bindingContext","getContext","enableFastCreationRow","onAddCardToInsightsPressed","insightsRelevantColumns","insightsParams","onMassEditButtonPressed","pageController","massEdit","openMassEditDialog","warning","onActionPress","actionName","model","executeAction","notApplicableContexts","convertedMetadata","getMetaModel","entityType","resolvePath","entityTypeFullyQualifiedName","myUnapplicableContextDialog","resourceModel","contexts","applicableContexts","open","editFlow","invokeAction","info","filterBarRefId","getFilterBar","_setFilterBar","_CommonUtils$getTarge4","tableAPIId","tableAPILocalId","potentialfilterBarId","replace","RegExp","setFilter","checkIfColumnExists","aFilteredColummns","columnName","some","oColumn","sColumnNameVisible","sTextArrangement","getIdentifierColumn","headerInfoTitlePath","headerInfoTitle","oMetaModel","sCurrentEntitySetName","aTechnicalKeys","getObject","aFilteredTechnicalKeys","technicalKey","semanticKeyColumns","semanticKeys","aVisibleColumns","aTableColumns","getColumns","getDataProperty","_oTextArrangement$Co","_oTextArrangement$Co2","oTextArrangement","$Path","sTextPlacement","$EnumMember","setEmptyRowsEnabled","enablement","setUpEmptyRows","_this$tableDefinition","_this$tableDefinition2","_table$getBindingCont","createButtonWasPressed","creationMode","InlineCreationRows","uiModel","watchBinding","bindProperty","fnHandler","detachChange","destroy","attachChange","isInEditMode","inlineCreationRowsHiddenInEditMode","binding","isResolved","isLengthFinal","contextPath","emptyRowsEnabled","_deleteEmptyRows","inactiveContext","getAllCurrentContexts","startsWith","_createEmptyRow","delete","oBinding","_this$tableDefinition3","iInlineCreationRowCount","inlineCreationRowCount","aData","i","bAtEnd","bInactive","oView","creatingEmptyRows","aContexts","createMultipleDocuments","onBeforeCreate","created","oError","canceled","getOwnPropertyDescriptor"],"sources":["TableAPI-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":30662,"column":0},"map":{"version":3,"names":["ButtonType","mLibrary","TableFullScreenDialogBlock","defineBuildingBlock","name","namespace","blockAttribute","type","isPublic","required","defineReference","props","fullScreenDialogContentPage","Page","enteringFullScreen","messageBundle","Core","getLibraryResourceBundle","onFullScreenToggle","tableAPI","getTableAPI","tablePlaceHolderPanel","createTablePlaceHolderPanel","fullScreenButton","current","setIcon","setTooltip","getText","nonFullScreenTableParent","getParent","_originalAggregationName","JsControlTreeModifier","getParentAggregationName","setAggregation","createDialog","addContent","fullScreenDialog","open","close","currentControl","isA","Panel","data","Dialog","showHeader","stretch","afterOpen","afterDialogOpen","beforeClose","beforeDialogClose","afterClose","afterDialogClose","endButton","getEndButton","content","addDependent","Button","text","Transparent","press","focus","component","Component","getOwnerComponentFor","appComponent","getRootViewController","getView","getController","_scrollTablesToLastNavigatedItems","getContent","id","RuntimeBuildingBlock"],"sourceRoot":"table","sources":["TableFullScreenDialog.block.tsx"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport RuntimeBuildingBlock from \"sap/fe/core/buildingBlocks/RuntimeBuildingBlock\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport { defineReference } from \"sap/fe/core/helpers/ClassSupport\";\nimport { Ref } from \"sap/fe/core/jsx-runtime/jsx\";\nimport TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport Button from \"sap/m/Button\";\nimport Dialog from \"sap/m/Dialog\";\nimport mLibrary from \"sap/m/library\";\nimport Page from \"sap/m/Page\";\nimport Panel from \"sap/m/Panel\";\nimport Component from \"sap/ui/core/Component\";\nimport Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport { JsControlTreeModifier } from \"sap/ui/core/util/reflection\";\n\nconst ButtonType = mLibrary.ButtonType;\n\n@defineBuildingBlock({\n\tname: \"TableFullScreenDialog\",\n\tnamespace: \"sap.fe.macros.table\"\n})\nexport default class TableFullScreenDialogBlock extends RuntimeBuildingBlock {\n\tconstructor(props: PropertiesOf<TableFullScreenDialogBlock>) {\n\t\tsuper(props);\n\t\tthis.enteringFullScreen = false;\n\t\tthis.messageBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\n\t}\n\n\t@blockAttribute({ type: \"string\", isPublic: true, required: true })\n\tpublic id!: string;\n\n\t@defineReference()\n\tfullScreenButton!: Ref<Button>;\n\n\ttableAPI!: TableAPI;\n\n\tmessageBundle: ResourceBundle;\n\n\tfullScreenDialog!: Dialog;\n\n\tenteringFullScreen: boolean;\n\n\tnonFullScreenTableParent!: Control;\n\n\t_originalAggregationName!: string;\n\n\tfullScreenDialogContentPage = new Page();\n\n\ttablePlaceHolderPanel!: Panel;\n\n\t/**\n\t * Main handler for switching between full screen dialog and normal display.\n\t *\n\t * @function\n\t * @name onFullScreenToggle\n\t */\n\tpublic async onFullScreenToggle() {\n\t\tthis.enteringFullScreen = !this.enteringFullScreen;\n\t\tthis.tableAPI = this.getTableAPI();\n\t\tif (!this.tablePlaceHolderPanel) {\n\t\t\tthis.tablePlaceHolderPanel = this.createTablePlaceHolderPanel();\n\t\t}\n\n\t\tif (this.enteringFullScreen) {\n\t\t\t// change the button icon and text\n\t\t\tthis.fullScreenButton.current?.setIcon(\"sap-icon://exit-full-screen\");\n\t\t\tthis.fullScreenButton.current?.setTooltip(this.messageBundle.getText(\"M_COMMON_TABLE_FULLSCREEN_MINIMIZE\"));\n\n\t\t\t// Store the current location of the table to be able to move it back later\n\t\t\tthis.nonFullScreenTableParent = this.tableAPI.getParent()! as Control;\n\t\t\tthis._originalAggregationName = await JsControlTreeModifier.getParentAggregationName(this.tableAPI);\n\n\t\t\t// Replace the current position of the table with an empty Panel as a placeholder\n\t\t\tthis.nonFullScreenTableParent.setAggregation(this._originalAggregationName, this.tablePlaceHolderPanel);\n\n\t\t\t// Create the full screen dialog\n\t\t\tthis.createDialog();\n\n\t\t\t// Move the table over into the content page in the dialog and open the dialog\n\t\t\tthis.fullScreenDialogContentPage.addContent(this.tableAPI);\n\t\t\tthis.fullScreenDialog.open();\n\t\t} else {\n\t\t\t// change the button icon and text\n\t\t\tthis.fullScreenButton.current?.setIcon(\"sap-icon://full-screen\");\n\t\t\tthis.fullScreenButton.current?.setTooltip(this.messageBundle.getText(\"M_COMMON_TABLE_FULLSCREEN_MAXIMIZE\"));\n\n\t\t\t// Move the table back to the old place and close the dialog\n\t\t\tthis.nonFullScreenTableParent.setAggregation(this._originalAggregationName, this.tableAPI);\n\t\t\tthis.fullScreenDialog.close();\n\t\t}\n\t}\n\n\t/**\n\t * Determine a reference to the TableAPI control starting from the button.\n\t *\n\t * @function\n\t * @name getTableAPI\n\t * @returns The TableAPI\n\t */\n\tprivate getTableAPI(): TableAPI {\n\t\tlet currentControl: Control = this.fullScreenButton.current as Control;\n\t\tdo {\n\t\t\tcurrentControl = currentControl.getParent() as Control;\n\t\t} while (!currentControl.isA(\"sap.fe.macros.table.TableAPI\"));\n\t\treturn currentControl as TableAPI;\n\t}\n\n\t/**\n\t * Create the panel which acts as the placeholder for the table as long as it is displayed in the\n\t * full screen dialog.\n\t *\n\t * @function\n\t * @name createTablePlaceHolderPanel\n\t * @returns A Panel as placeholder for the table API\n\t */\n\tprivate createTablePlaceHolderPanel(): Panel {\n\t\tconst tablePlaceHolderPanel = new Panel({});\n\t\ttablePlaceHolderPanel.data(\"tableAPIreference\", this.tableAPI);\n\t\ttablePlaceHolderPanel.data(\"FullScreenTablePlaceHolder\", true);\n\t\treturn tablePlaceHolderPanel;\n\t}\n\n\t/**\n\t * Create the full screen dialog.\n\t *\n\t * @function\n\t * @name createDialog\n\t */\n\tprivate createDialog() {\n\t\tif (!this.fullScreenDialog) {\n\t\t\tthis.fullScreenDialog = new Dialog({\n\t\t\t\tshowHeader: false,\n\t\t\t\tstretch: true,\n\t\t\t\tafterOpen: () => {\n\t\t\t\t\tthis.afterDialogOpen();\n\t\t\t\t},\n\t\t\t\tbeforeClose: () => {\n\t\t\t\t\tthis.beforeDialogClose();\n\t\t\t\t},\n\t\t\t\tafterClose: () => {\n\t\t\t\t\tthis.afterDialogClose();\n\t\t\t\t},\n\t\t\t\tendButton: this.getEndButton(),\n\t\t\t\tcontent: this.fullScreenDialogContentPage\n\t\t\t});\n\t\t\t// The below is needed for correctly setting the focus after adding a new row in\n\t\t\t// the table in fullscreen mode\n\t\t\tthis.fullScreenDialog.data(\"FullScreenDialog\", true);\n\n\t\t\t// Add the dialog as a dependent to the original parent of the table in order to not lose the context\n\t\t\tthis.nonFullScreenTableParent.addDependent(this.fullScreenDialog);\n\t\t}\n\t}\n\n\t/**\n\t * Create the full screen dialog close button.\n\t *\n\t * @function\n\t * @name getEndButton\n\t * @returns The button control\n\t */\n\tprivate getEndButton() {\n\t\treturn new Button({\n\t\t\ttext: this.messageBundle.getText(\"M_COMMON_TABLE_FULLSCREEN_CLOSE\"),\n\t\t\ttype: ButtonType.Transparent,\n\t\t\tpress: () => {\n\t\t\t\t// Just close the dialog here, all the needed processing is triggered\n\t\t\t\t// in beforeClose.\n\t\t\t\t// This ensures, that we only do it once event if the user presses the\n\t\t\t\t// ESC key and the Close button simultaneously\n\t\t\t\tthis.fullScreenDialog.close();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Set the focus back to the full screen button after opening the dialog.\n\t *\n\t * @function\n\t * @name afterDialogOpen\n\t */\n\tprivate afterDialogOpen() {\n\t\tthis.fullScreenButton.current?.focus();\n\t}\n\n\t/**\n\t * Handle dialog close via Esc. navigation etc.\n\t *\n\t * @function\n\t * @name beforeDialogClose\n\t */\n\tprivate beforeDialogClose() {\n\t\t// In case fullscreen dialog was closed due to navigation to another page/view/app, \"Esc\" click, etc. The dialog close\n\t\t// would be triggered externally and we need to clean up and move the table back to the old location\n\t\tif (this.tableAPI && this.enteringFullScreen) {\n\t\t\tthis.onFullScreenToggle();\n\t\t}\n\t}\n\n\t/**\n\t * Some follow up after closing the dialog.\n\t *\n\t * @function\n\t * @name afterDialogClose\n\t */\n\tprivate afterDialogClose() {\n\t\tconst component = Component.getOwnerComponentFor(this.tableAPI)!;\n\t\tconst appComponent = Component.getOwnerComponentFor(component) as AppComponent;\n\t\tthis.fullScreenButton.current?.focus();\n\t\t// trigger the automatic scroll to the latest navigated row :\n\t\t(appComponent.getRootViewController().getView().getController() as any)._scrollTablesToLastNavigatedItems();\n\t}\n\n\t/**\n\t * The building block render function.\n\t *\n\t * @function\n\t * @name getContent\n\t * @returns An XML-based string with the definition of the full screen button\n\t */\n\tgetContent() {\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tref={this.fullScreenButton}\n\t\t\t\tid={this.id}\n\t\t\t\ttooltip={this.messageBundle.getText(\"M_COMMON_TABLE_FULLSCREEN_MAXIMIZE\")}\n\t\t\t\ticon={\"sap-icon://full-screen\"}\n\t\t\t\tpress={() => this.onFullScreenToggle()}\n\t\t\t\ttype={\"Transparent\"}\n\t\t\t\tvisible={true}\n\t\t\t\tenabled={true}\n\t\t\t/>\n\t\t) as Button;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":30902,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockSupport","RuntimeBuildingBlock","ClassSupport","Button","Dialog","mLibrary","Page","Panel","Component","Core","JsControlTreeModifier","_jsx","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","_exports","defineReference","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ButtonType","TableFullScreenDialogBlock","name","namespace","type","isPublic","required","_RuntimeBuildingBlock","props","_this","this","fullScreenDialogContentPage","enteringFullScreen","messageBundle","getLibraryResourceBundle","_proto","onFullScreenToggle","async","tableAPI","getTableAPI","tablePlaceHolderPanel","createTablePlaceHolderPanel","_this$fullScreenButto","_this$fullScreenButto2","fullScreenButton","current","setIcon","setTooltip","getText","nonFullScreenTableParent","getParent","_originalAggregationName","getParentAggregationName","setAggregation","createDialog","addContent","fullScreenDialog","open","_this$fullScreenButto3","_this$fullScreenButto4","close","currentControl","isA","data","showHeader","stretch","afterOpen","afterDialogOpen","beforeClose","beforeDialogClose","afterClose","afterDialogClose","endButton","getEndButton","content","addDependent","text","Transparent","press","_this$fullScreenButto5","focus","_this$fullScreenButto6","component","getOwnerComponentFor","appComponent","getRootViewController","getView","getController","_scrollTablesToLastNavigatedItems","getContent","ref","id","tooltip","icon","visible","enabled"],"sources":["TableFullScreenDialog.block-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":30907,"column":0},"map":{"version":3,"names":["CreationMode","FELibrary","TableHelper","_isStaticAction","actionObject","actionName","action","Array","isArray","entityType","_getActionOverloadEntityType","find","_action","$IsBound","$Parameter","$Type","$isCollection","sActionName","indexOf","aParts","split","length","replaceAll","undefined","_isActionOverloadOnDifferentType","sAnnotationTargetEntityType","sEntityType","getFieldsRequestedByPresentationVariant","oPresentationVariant","RequestAtLeast","map","oRequested","value","getNavigationAvailableFieldsFromLineItem","aLineItemContext","aSelectedFieldsArray","getObject","forEach","oRecord","Inline","Determining","NavigationAvailable","$Path","push","getNavigationAvailableMap","lineItemCollection","oIBNNavigationAvailableMap","record","sKey","SemanticObject","Action","RequiresContext","isPathAnnotationExpression","path","JSON","stringify","getUiLineItem","presentationContext","getUiControl","getUiLineItemObject","lineItemOrPresentationContext","convertedMetaData","lineItemOrPresentationObject","resolvePath","getPath","target","visualizations","Visualizations","lineItemObject","item","$target","term","create$Select","table","selectedFields","lineItemContext","metaPath","pushField","field","includes","pushFieldList","fields","columns","tableDefinition","propertiesFromCustomColumns","getPropertiesFromCustomColumns","presentationAnnotation","getInvolvedDataModelObjects","targetObject","operationAvailableProperties","applicableProperties","_filterNonApplicableProperties","collection","targetCollection","collectionEntity","targetType","aSemanticKeys","annotations","Common","SemanticKey","oSemanticKey","contextObjectPath","targetEntitySet","Capabilities","DeleteRestrictions","Deletable","UpdateRestrictions","Updatable","join","getColumnWidth","oThis","column","dataField","dataFieldActionText","dataModelObjectPath","useRemUnit","microChartTitle","width","enableAutoColumnWidth","getColumnWidthForImage","getColumnWidthForDataField","compileExpression","formatResult","pathInModel","name","TableFormatter","Value","dataType","type","getEditMode","EditMode","Display","hasTextAnnotation","hasText","Core","MediaType","isImageURL","oMicroChartTitle","Target","$AnnotationPath","nTmpTextWidth","SizeHelper","getButtonWidth","Label","toString","nTmpVisualizationWidth","TableSizeHelper","getWidthForDataFieldForAnnotation","propertyWidth","getColumnWidthForChart","columnLabelWidth","chartSize","getChartSize","getShowOnlyChart","Title","Description","tmpText","titleSize","tmpWidth","getMarginClass","oCollection","oDataField","sVisualization","sFieldGroupHiddenExpressions","sBindingExpression","sClass","sHiddenExpressionResult","substring","lastIndexOf","getVBoxVisibility","fieldGroupHiddenExpressions","fieldGroup","allStatic","hiddenPaths","hiddenAnnotationValue","hasAnyPathExpressions","constant","hasAllHiddenStaticExpressions","ifElse","formatHiddenFilters","oHiddenFilter","ex","getElementStableId","tableId","elementId","dataFieldPart","generate","getColumnStableId","id","getFieldGroupLabelStableId","properties","collectionContext","filter","sPropertyPath","property","getRowsBindingInfo","dataModelPath","contextPath","getContextRelativeTargetObjectPath","getTargetObjectPath","oRowBinding","ui5object","suspended","CommonHelper","addSingleQuotes","parameters","$count","events","enable$select","sSelect","$select","enable$$getKeepAliveContext","$$getKeepAliveContext","$$groupId","$$updateGroupId","$$ownRequest","$$patchWithoutSideEffects","patchSent","patchCompleted","dataReceived","dataRequested","change","createActivate","objectToString","validateCreationRowFields","oFieldValidityObject","Object","keys","every","key","pressEventDataFieldForActionButton","tableProperties","entitySetName","operationAvailableMap","isNavigable","enableAutoScroll","defaultValuesExtensionFunction","targetEntityTypeName","targetEntityType","fullyQualifiedName","staticAction","params","contexts","bStaticAction","applicableContexts","notApplicableContexts","invocationGrouping","InvocationGrouping","controlId","label","fn","ref","isDataFieldForActionEnabled","isBound","enableOnSelect","annotationTargetEntityType","isStaticAction","oOperationAvailableMap","parse","hasOwnProperty","dataFieldForActionEnabledExpression","numberOfSelectedContexts","ActionHelper","getNumberOfContextsExpression","isDataFieldForIBNEnabled","requiresContext","isNavigationAvailable","isNavigationAvailablePath","isAnalyticalTable","enableAnalytics","entitySet","metaModel","getModel","Log","warning","dataFieldForIBNEnabledExpression","pressEventForCreateButton","bCmdExecutionFlag","sCreationMode","creationMode","oParams","sMdcTable","sRowBinding","External","outbound","createOutbound","CreationRow","creationRow","createAtEnd","NewPage","createNewAction","newAction","InlineCreationRows","generateFunction","getIBNData","outboundDetail","oIBNData","semanticObject","_getExpressionForDeleteButton","fullContextPath","expression","getExpressionFromAnnotation","isConstant","isPathInModelExpression","valueExpression","formatValueRecursively","pressEventForDeleteButton","sEntitySetName","oHeaderInfo","fullcontextPath","sDeletableContexts","sTitleExpression","sDescriptionExpression","unSavedContexts","lockedContexts","draftsWithDeletableActive","draftsWithNonDeletableActive","title","description","selectedContexts","setHeaderLabelVisibility","datafield","dataFieldCollection","some","oDC","getTextOnActionField","oContext","context","sPathDataFields","aMultipleLabels","i","reduce","a","b","_getResponsiveTableColumnSettings","oColumn","tableType","settings","microChartSize","showMicroChartLabel","getDelegate","isALP","entityName","oDelegate","control","Error","payload","collectionName","hierarchyQualifier","initialExpansionLevel","annotation","setIBNEnablement","oInternalModelContext","oNavigationAvailableMap","aSelectedContexts","setProperty","bEnabled","aApplicable","aNotApplicable","sProperty","oSelectedContext","enableFastCreationRow","oFastCreationRow","sPath","oModel","oFinalUIState","oFastCreationListBinding","oFastCreationContext","getProperty","isDeleted","bindList","refreshInternal","create","setBindingContext","created","e","trace","oError","error","requiresIContext"],"sourceRoot":"table","sources":["TableHelper.ts"],"sourcesContent":["import type {\n\tConvertedMetadata,\n\tEntitySet,\n\tEntityType,\n\tNavigationProperty,\n\tPathAnnotationExpression,\n\tPropertyAnnotationValue\n} from \"@sap-ux/vocabularies-types\";\nimport {\n\tDataField,\n\tDataFieldAbstractTypes,\n\tDataFieldForAction,\n\tDataFieldForAnnotation,\n\tDataFieldForIntentBasedNavigation,\n\tFieldGroup,\n\tLineItem,\n\tPresentationVariant,\n\tPresentationVariantType,\n\tUIAnnotationTerms,\n\tUIAnnotationTypes\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport { getUiControl } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport {\n\tAnnotationTableColumn,\n\tTableColumn,\n\tTableFiltersConfiguration,\n\tTableVisualization\n} from \"sap/fe/core/converters/controls/Common/Table\";\nimport type { NavigationTargetConfiguration } from \"sap/fe/core/converters/ManifestSettings\";\nimport type { MetaModelAction } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport TableFormatter from \"sap/fe/core/formatters/TableFormatter\";\nimport {\n\tCompiledBindingToolkitExpression,\n\tcompileExpression,\n\tconstant,\n\tfn,\n\tformatResult,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tisConstant,\n\tisPathInModelExpression,\n\tpathInModel,\n\tref\n} from \"sap/fe/core/helpers/BindingToolkit\";\nimport SizeHelper from \"sap/fe/core/helpers/SizeHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isPathAnnotationExpression } from \"sap/fe/core/helpers/TypeGuards\";\nimport FELibrary from \"sap/fe/core/library\";\nimport { DataModelObjectPath, getContextRelativeTargetObjectPath, getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { hasText, isImageURL } from \"sap/fe/core/templating/PropertyHelper\";\nimport { getEditMode } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type { tableDelegateModel } from \"sap/fe/macros/DelegateUtil\";\nimport { formatValueRecursively } from \"sap/fe/macros/field/FieldTemplating\";\nimport ActionHelper from \"sap/fe/macros/internal/helpers/ActionHelper\";\nimport TableBlock from \"sap/fe/macros/table/Table.block\";\nimport TableSizeHelper from \"sap/fe/macros/table/TableSizeHelper\";\nimport EditMode from \"sap/ui/mdc/enum/EditMode\";\nimport Context from \"sap/ui/model/Context\";\nimport v4Context from \"sap/ui/model/odata/v4/Context\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\ntype Hidden = { \"@com.sap.vocabularies.UI.v1.Hidden\": boolean | { $Path?: string } };\n\nconst CreationMode = FELibrary.CreationMode;\n\n/**\n * Helper class used by the control library for OData-specific handling (OData V4)\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst TableHelper = {\n\t/**\n\t * Check if a given action is static.\n\t *\n\t * @param actionObject The instance or the path of the action\n\t * @param actionName The name of the action\n\t * @returns Returns 'true' if action is static, else 'false'\n\t * @private\n\t * @ui5-restricted\n\t */\n\t_isStaticAction: function (actionObject: MetaModelAction | MetaModelAction[] | undefined | string, actionName: String): boolean {\n\t\tlet action: MetaModelAction | undefined | string;\n\t\tif (actionObject) {\n\t\t\tif (Array.isArray(actionObject)) {\n\t\t\t\tconst entityType = this._getActionOverloadEntityType(actionName);\n\t\t\t\tif (entityType) {\n\t\t\t\t\taction = actionObject.find(function (_action: MetaModelAction) {\n\t\t\t\t\t\treturn _action.$IsBound && _action.$Parameter[0].$Type === entityType;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// if this is just one - OK we take it. If it's more it's actually a wrong usage by the app\n\t\t\t\t\t// as we used the first one all the time we keep it as it is\n\t\t\t\t\taction = actionObject[0];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\taction = actionObject;\n\t\t\t}\n\t\t}\n\n\t\treturn !!action && typeof action !== \"string\" && action.$IsBound && !!action.$Parameter[0].$isCollection;\n\t},\n\n\t/**\n\t * Get the entity type of an action overload.\n\t *\n\t * @param sActionName The name of the action.\n\t * @returns The entity type used in the action overload.\n\t * @private\n\t */\n\t_getActionOverloadEntityType: function (sActionName: any) {\n\t\tif (sActionName && sActionName.indexOf(\"(\") > -1) {\n\t\t\tconst aParts = sActionName.split(\"(\");\n\t\t\treturn aParts[aParts.length - 1].replaceAll(\")\", \"\");\n\t\t}\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * Checks whether the action is overloaded on a different entity type.\n\t *\n\t * @param sActionName The name of the action.\n\t * @param sAnnotationTargetEntityType The entity type of the annotation target.\n\t * @returns Returns 'true' if the action is overloaded with a different entity type, else 'false'.\n\t * @private\n\t */\n\t_isActionOverloadOnDifferentType: function (sActionName: any, sAnnotationTargetEntityType: any) {\n\t\tconst sEntityType = this._getActionOverloadEntityType(sActionName);\n\t\treturn !!sEntityType && sAnnotationTargetEntityType !== sEntityType;\n\t},\n\n\t/**\n\t * Returns an array of the fields listed by the property RequestAtLeast in the PresentationVariant .\n\t *\n\t * @param oPresentationVariant The annotation related to com.sap.vocabularies.UI.v1.PresentationVariant.\n\t * @returns The fields.\n\t * @private\n\t * @ui5-restricted\n\t */\n\tgetFieldsRequestedByPresentationVariant: function (oPresentationVariant: PresentationVariantType): string[] {\n\t\treturn oPresentationVariant.RequestAtLeast?.map((oRequested) => oRequested.value) || [];\n\t},\n\tgetNavigationAvailableFieldsFromLineItem: function (aLineItemContext: Context): string[] {\n\t\tconst aSelectedFieldsArray: string[] = [];\n\t\t((aLineItemContext.getObject() as Array<any>) || []).forEach(function (oRecord: any) {\n\t\t\tif (\n\t\t\t\toRecord.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation &&\n\t\t\t\t!oRecord.Inline &&\n\t\t\t\t!oRecord.Determining &&\n\t\t\t\toRecord.NavigationAvailable?.$Path\n\t\t\t) {\n\t\t\t\taSelectedFieldsArray.push(oRecord.NavigationAvailable.$Path);\n\t\t\t}\n\t\t});\n\t\treturn aSelectedFieldsArray;\n\t},\n\n\tgetNavigationAvailableMap: function (lineItemCollection: DataFieldAbstractTypes[] | undefined) {\n\t\tconst oIBNNavigationAvailableMap: any = {};\n\t\tlineItemCollection?.forEach((record) => {\n\t\t\tif (\"SemanticObject\" in record) {\n\t\t\t\tconst sKey = `${record.SemanticObject}-${record.Action}`;\n\t\t\t\tif (record.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation && !record.Inline && record.RequiresContext) {\n\t\t\t\t\tif (record.NavigationAvailable !== undefined) {\n\t\t\t\t\t\toIBNNavigationAvailableMap[sKey] = isPathAnnotationExpression(record.NavigationAvailable)\n\t\t\t\t\t\t\t? (record.NavigationAvailable as PathAnnotationExpression<boolean>).path\n\t\t\t\t\t\t\t: record.NavigationAvailable;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn JSON.stringify(oIBNNavigationAvailableMap);\n\t},\n\n\t/**\n\t * Returns the context of the UI.LineItem.\n\t *\n\t * @param presentationContext The presentation context (either a presentation variant or a UI.LineItem)\n\t * @returns The context of the UI.LineItem\n\t */\n\tgetUiLineItem: function (presentationContext: Context) {\n\t\treturn getUiControl(presentationContext, `@${UIAnnotationTerms.LineItem}`);\n\t},\n\n\tgetUiLineItemObject: function (\n\t\tlineItemOrPresentationContext: Context,\n\t\tconvertedMetaData: ConvertedMetadata\n\t): DataFieldAbstractTypes[] | undefined {\n\t\tconst lineItemOrPresentationObject = convertedMetaData.resolvePath(lineItemOrPresentationContext.getPath()).target as\n\t\t\t| PresentationVariant\n\t\t\t| LineItem;\n\t\tif (!lineItemOrPresentationObject) return undefined;\n\t\tconst visualizations = (convertedMetaData.resolvePath(lineItemOrPresentationContext.getPath()).target as PresentationVariantType)\n\t\t\t.Visualizations;\n\n\t\tconst lineItemObject = (\n\t\t\tvisualizations\n\t\t\t\t? visualizations?.find((item) => item.value.indexOf(\"@\" + UIAnnotationTerms.LineItem) === 0)?.$target\n\t\t\t\t: lineItemOrPresentationObject\n\t\t) as LineItem;\n\t\treturn lineItemObject?.term === UIAnnotationTerms.LineItem ? lineItemObject : undefined;\n\t},\n\n\t/**\n\t * Creates and returns a select query with the selected fields from the parameters that were passed.\n\t *\n\t * @param table The instance of the inner model of the table building block\n\t * @returns The 'select' query that has the selected fields from the parameters that were passed\n\t */\n\tcreate$Select: function (table: TableBlock) {\n\t\tconst selectedFields: string[] = [];\n\t\tconst lineItemContext = TableHelper.getUiLineItem(table.metaPath);\n\t\tfunction pushField(field: string) {\n\t\t\tif (field && !selectedFields.includes(field) && field.indexOf(\"/\") !== 0) {\n\t\t\t\t// Do not add singleton property (with absolute path) to $select\n\t\t\t\tselectedFields.push(field);\n\t\t\t}\n\t\t}\n\n\t\tfunction pushFieldList(fields: string[]) {\n\t\t\tif (fields?.length) {\n\t\t\t\tfields.forEach(pushField);\n\t\t\t}\n\t\t}\n\t\tconst columns = table.tableDefinition.columns;\n\t\tconst propertiesFromCustomColumns = this.getPropertiesFromCustomColumns(columns);\n\t\tif (propertiesFromCustomColumns?.length) {\n\t\t\tpushFieldList(propertiesFromCustomColumns);\n\t\t}\n\n\t\tif (lineItemContext.getPath().indexOf(`@${UIAnnotationTerms.LineItem}`) > -1) {\n\t\t\t// Don't process EntityType without LineItem\n\t\t\tconst presentationAnnotation = getInvolvedDataModelObjects(table.metaPath).targetObject;\n\t\t\tconst operationAvailableProperties = (table.tableDefinition.operationAvailableProperties || \"\").split(\",\");\n\t\t\tconst applicableProperties = TableHelper._filterNonApplicableProperties(operationAvailableProperties, table.collection);\n\t\t\tconst targetCollection =\n\t\t\t\t(table.collectionEntity as EntitySet).entityType || (table.collectionEntity as NavigationProperty).targetType;\n\t\t\tconst aSemanticKeys: string[] = (targetCollection.annotations.Common?.SemanticKey || []).map(\n\t\t\t\t(oSemanticKey: any) => oSemanticKey.value as string\n\t\t\t);\n\n\t\t\tif (presentationAnnotation?.$Type === UIAnnotationTypes.PresentationVariantType) {\n\t\t\t\tpushFieldList(TableHelper.getFieldsRequestedByPresentationVariant(presentationAnnotation));\n\t\t\t}\n\n\t\t\tpushFieldList(TableHelper.getNavigationAvailableFieldsFromLineItem(lineItemContext));\n\t\t\tpushFieldList(applicableProperties);\n\t\t\tpushFieldList(aSemanticKeys);\n\t\t\tpushField(\n\t\t\t\t(\n\t\t\t\t\t(table.contextObjectPath.targetEntitySet as EntitySet)?.annotations?.Capabilities?.DeleteRestrictions\n\t\t\t\t\t\t?.Deletable as PathAnnotationExpression<boolean>\n\t\t\t\t)?.path\n\t\t\t);\n\t\t\tpushField(\n\t\t\t\t(\n\t\t\t\t\t(table.contextObjectPath.targetEntitySet as EntitySet)?.annotations?.Capabilities?.UpdateRestrictions\n\t\t\t\t\t\t?.Updatable as PathAnnotationExpression<boolean>\n\t\t\t\t)?.path\n\t\t\t);\n\t\t}\n\t\treturn selectedFields.join(\",\");\n\t},\n\n\t/**\n\t * Method to get column's width if defined from manifest or from customization via annotations.\n\t *\n\t * @function\n\t * @name getColumnWidth\n\t * @param oThis The instance of the inner model of the Table building block\n\t * @param column Defined width of the column, which is taken with priority if not null, undefined or empty\n\t * @param dataField DataField definition object\n\t * @param dataFieldActionText DataField's text from button\n\t * @param dataModelObjectPath The object path of the data model\n\t * @param useRemUnit Indicates if the rem unit must be concatenated with the column width result\n\t * @param microChartTitle The object containing title and description of the MicroChart\n\t * @returns - Column width if defined, otherwise width is set to auto\n\t */\n\tgetColumnWidth: function (\n\t\toThis: tableDelegateModel,\n\t\tcolumn: AnnotationTableColumn,\n\t\tdataField: DataField | DataFieldForAnnotation | DataFieldForAction | DataFieldForIntentBasedNavigation,\n\t\tdataFieldActionText: string,\n\t\tdataModelObjectPath: DataModelObjectPath,\n\t\tuseRemUnit: boolean,\n\t\tmicroChartTitle?: any\n\t) {\n\t\tif (column.width) {\n\t\t\treturn column.width;\n\t\t}\n\t\tif (oThis.enableAutoColumnWidth === true) {\n\t\t\tlet width;\n\t\t\twidth =\n\t\t\t\tthis.getColumnWidthForImage(dataModelObjectPath) ||\n\t\t\t\tthis.getColumnWidthForDataField(oThis, column, dataField, dataFieldActionText, dataModelObjectPath, microChartTitle) ||\n\t\t\t\tundefined;\n\t\t\tif (width) {\n\t\t\t\treturn useRemUnit ? `${width}rem` : width;\n\t\t\t}\n\t\t\twidth = compileExpression(\n\t\t\t\tformatResult(\n\t\t\t\t\t[pathInModel(\"/editMode\", \"ui\"), pathInModel(\"tablePropertiesAvailable\", \"internal\"), column.name, useRemUnit],\n\t\t\t\t\tTableFormatter.getColumnWidth\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn width;\n\t\t}\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * Method to get the width of the column containing an image.\n\t *\n\t * @function\n\t * @name getColumnWidthForImage\n\t * @param dataModelObjectPath The data model object path\n\t * @returns - Column width if defined, otherwise null (the width is treated as a rem value)\n\t */\n\tgetColumnWidthForImage: function (dataModelObjectPath: DataModelObjectPath): number | null {\n\t\tlet width: number | null = null;\n\t\tconst annotations = dataModelObjectPath.targetObject?.Value?.$target?.annotations;\n\t\tconst dataType = dataModelObjectPath.targetObject?.Value?.$target?.type;\n\t\tif (\n\t\t\tdataModelObjectPath.targetObject?.Value &&\n\t\t\tgetEditMode(\n\t\t\t\tdataModelObjectPath.targetObject.Value?.$target,\n\t\t\t\tdataModelObjectPath,\n\t\t\t\tfalse,\n\t\t\t\tfalse,\n\t\t\t\tdataModelObjectPath.targetObject\n\t\t\t) === EditMode.Display\n\t\t) {\n\t\t\tconst hasTextAnnotation = hasText(dataModelObjectPath.targetObject.Value.$target);\n\t\t\tif (dataType === \"Edm.Stream\" && !hasTextAnnotation && annotations?.Core?.MediaType?.includes(\"image/\")) {\n\t\t\t\twidth = 6.2;\n\t\t\t}\n\t\t} else if (\n\t\t\tannotations &&\n\t\t\t(isImageURL(dataModelObjectPath.targetObject?.Value?.$target) || annotations?.Core?.MediaType?.includes(\"image/\"))\n\t\t) {\n\t\t\twidth = 6.2;\n\t\t}\n\t\treturn width;\n\t},\n\n\t/**\n\t * Method to get the width of the column containing the DataField.\n\t *\n\t * @function\n\t * @name getColumnWidthForDataField\n\t * @param oThis The instance of the inner model of the Table building block\n\t * @param column Defined width of the column, which is taken with priority if not null, undefined or empty\n\t * @param dataField Data Field\n\t * @param dataFieldActionText DataField's text from button\n\t * @param dataModelObjectPath The data model object path\n\t * @param oMicroChartTitle The object containing the title and description of the MicroChart\n\t * @returns - Column width if defined, otherwise null ( the width is treated as a rem value)\n\t */\n\tgetColumnWidthForDataField: function (\n\t\toThis: tableDelegateModel,\n\t\tcolumn: AnnotationTableColumn,\n\t\tdataField: DataField | DataFieldForAnnotation | DataFieldForAction | DataFieldForIntentBasedNavigation,\n\t\tdataFieldActionText: string,\n\t\tdataModelObjectPath: DataModelObjectPath,\n\t\toMicroChartTitle?: any\n\t): number | null {\n\t\tconst annotations = dataModelObjectPath.targetObject?.annotations;\n\t\tconst dataType = dataModelObjectPath.targetObject?.$Type;\n\t\tlet width: number | null = null;\n\t\tif (\n\t\t\tdataType === UIAnnotationTypes.DataFieldForAction ||\n\t\t\tdataType === UIAnnotationTypes.DataFieldForIntentBasedNavigation ||\n\t\t\t(dataType === UIAnnotationTypes.DataFieldForAnnotation &&\n\t\t\t\t((dataField as DataFieldForAnnotation).Target as any).$AnnotationPath.indexOf(`@${UIAnnotationTerms.FieldGroup}`) === -1)\n\t\t) {\n\t\t\tlet nTmpTextWidth;\n\t\t\tnTmpTextWidth =\n\t\t\t\tSizeHelper.getButtonWidth(dataFieldActionText) ||\n\t\t\t\tSizeHelper.getButtonWidth(dataField?.Label?.toString()) ||\n\t\t\t\tSizeHelper.getButtonWidth(annotations?.Label);\n\n\t\t\t// get width for rating or progress bar datafield\n\t\t\tconst nTmpVisualizationWidth = TableSizeHelper.getWidthForDataFieldForAnnotation(\n\t\t\t\tdataModelObjectPath.targetObject\n\t\t\t).propertyWidth;\n\n\t\t\tif (nTmpVisualizationWidth > nTmpTextWidth) {\n\t\t\t\twidth = nTmpVisualizationWidth;\n\t\t\t} else if (\n\t\t\t\tdataFieldActionText ||\n\t\t\t\t(annotations &&\n\t\t\t\t\t(annotations.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation ||\n\t\t\t\t\t\tannotations.$Type === UIAnnotationTypes.DataFieldForAction))\n\t\t\t) {\n\t\t\t\t// Add additional 1.8 rem to avoid showing ellipsis in some cases.\n\t\t\t\tnTmpTextWidth += 1.8;\n\t\t\t\twidth = nTmpTextWidth;\n\t\t\t}\n\t\t\twidth = width || this.getColumnWidthForChart(oThis, column, dataField, nTmpTextWidth, oMicroChartTitle);\n\t\t}\n\t\treturn width;\n\t},\n\n\t/**\n\t * Method to get the width of the column containing the Chart.\n\t *\n\t * @function\n\t * @name getColumnWidthForChart\n\t * @param oThis The instance of the inner model of the Table building block\n\t * @param column Defined width of the column, which is taken with priority if not null, undefined or empty\n\t * @param dataField Data Field\n\t * @param columnLabelWidth The width of the column label or button label\n\t * @param microChartTitle The object containing the title and the description of the MicroChart\n\t * @returns - Column width if defined, otherwise null (the width is treated as a rem value)\n\t */\n\tgetColumnWidthForChart(oThis: any, column: any, dataField: any, columnLabelWidth: number, microChartTitle: any): number | null {\n\t\tlet chartSize,\n\t\t\twidth: number | null = null;\n\t\tif (dataField.Target?.$AnnotationPath?.indexOf(`@${UIAnnotationTerms.Chart}`) !== -1) {\n\t\t\tswitch (this.getChartSize(oThis, column)) {\n\t\t\t\tcase \"XS\":\n\t\t\t\t\tchartSize = 4.4;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"S\":\n\t\t\t\t\tchartSize = 4.6;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\":\n\t\t\t\t\tchartSize = 5.5;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"L\":\n\t\t\t\t\tchartSize = 6.9;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tchartSize = 5.3;\n\t\t\t}\n\t\t\tcolumnLabelWidth += 1.8;\n\t\t\tif (\n\t\t\t\t!this.getShowOnlyChart(oThis, column) &&\n\t\t\t\tmicroChartTitle &&\n\t\t\t\t(microChartTitle.Title.length || microChartTitle.Description.length)\n\t\t\t) {\n\t\t\t\tconst tmpText =\n\t\t\t\t\tmicroChartTitle.Title.length > microChartTitle.Description.length ? microChartTitle.Title : microChartTitle.Description;\n\t\t\t\tconst titleSize = SizeHelper.getButtonWidth(tmpText) + 7;\n\t\t\t\tconst tmpWidth = titleSize > columnLabelWidth ? titleSize : columnLabelWidth;\n\t\t\t\twidth = tmpWidth;\n\t\t\t} else if (columnLabelWidth > chartSize) {\n\t\t\t\twidth = columnLabelWidth;\n\t\t\t} else {\n\t\t\t\twidth = chartSize;\n\t\t\t}\n\t\t}\n\t\treturn width;\n\t},\n\t/**\n\t * Method to add a margin class at the control.\n\t *\n\t * @function\n\t * @name getMarginClass\n\t * @param oCollection Title of the DataPoint\n\t * @param oDataField Value of the DataPoint\n\t * @param sVisualization\n\t * @param sFieldGroupHiddenExpressions Hidden expression contained in FieldGroup\n\t * @returns Adjusting the margin\n\t */\n\tgetMarginClass: function (oCollection: any, oDataField: any, sVisualization: any, sFieldGroupHiddenExpressions: any) {\n\t\tlet sBindingExpression,\n\t\t\tsClass = \"\";\n\t\tif (JSON.stringify(oCollection[oCollection.length - 1]) == JSON.stringify(oDataField)) {\n\t\t\t//If rating indicator is last element in fieldgroup, then the 0.5rem margin added by sapMRI class of interactive rating indicator on top and bottom must be nullified.\n\t\t\tif (sVisualization == \"com.sap.vocabularies.UI.v1.VisualizationType/Rating\") {\n\t\t\t\tsClass = \"sapUiNoMarginBottom sapUiNoMarginTop\";\n\t\t\t}\n\t\t} else if (sVisualization === \"com.sap.vocabularies.UI.v1.VisualizationType/Rating\") {\n\t\t\t//If rating indicator is NOT the last element in fieldgroup, then to maintain the 0.5rem spacing between cogetMarginClassntrols (as per UX spec),\n\t\t\t//only the top margin added by sapMRI class of interactive rating indicator must be nullified.\n\n\t\t\tsClass = \"sapUiNoMarginTop\";\n\t\t} else {\n\t\t\tsClass = \"sapUiTinyMarginBottom\";\n\t\t}\n\n\t\tif (sFieldGroupHiddenExpressions && sFieldGroupHiddenExpressions !== \"true\" && sFieldGroupHiddenExpressions !== \"false\") {\n\t\t\tconst sHiddenExpressionResult = sFieldGroupHiddenExpressions.substring(\n\t\t\t\tsFieldGroupHiddenExpressions.indexOf(\"{=\") + 2,\n\t\t\t\tsFieldGroupHiddenExpressions.lastIndexOf(\"}\")\n\t\t\t);\n\t\t\tsBindingExpression = \"{= \" + sHiddenExpressionResult + \" ? '\" + sClass + \"' : \" + \"''\" + \" }\";\n\t\t\treturn sBindingExpression;\n\t\t} else {\n\t\t\treturn sClass;\n\t\t}\n\t},\n\n\t/**\n\t * Method to get VBox visibility.\n\t *\n\t * @param collection Collection of data fields in VBox\n\t * @param fieldGroupHiddenExpressions Hidden expression contained in FieldGroup\n\t * @param fieldGroup Data field containing the VBox\n\t * @returns Visibility expression\n\t */\n\tgetVBoxVisibility: function (\n\t\tcollection: Array<DataFieldForAnnotation & Hidden>,\n\t\tfieldGroupHiddenExpressions: CompiledBindingToolkitExpression,\n\t\tfieldGroup: FieldGroup & Hidden\n\t): CompiledBindingToolkitExpression {\n\t\tlet allStatic = true;\n\t\tconst hiddenPaths = [];\n\n\t\tif (fieldGroup[`@${UIAnnotationTerms.Hidden}`]) {\n\t\t\treturn fieldGroupHiddenExpressions;\n\t\t}\n\n\t\tfor (const dataField of collection) {\n\t\t\tconst hiddenAnnotationValue = dataField[`@${UIAnnotationTerms.Hidden}`];\n\t\t\tif (hiddenAnnotationValue === undefined || hiddenAnnotationValue === false) {\n\t\t\t\thiddenPaths.push(false);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (hiddenAnnotationValue === true) {\n\t\t\t\thiddenPaths.push(true);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (hiddenAnnotationValue.$Path) {\n\t\t\t\thiddenPaths.push(pathInModel(hiddenAnnotationValue.$Path));\n\t\t\t\tallStatic = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (typeof hiddenAnnotationValue === \"object\") {\n\t\t\t\t// Dynamic expression found in a field\n\t\t\t\treturn fieldGroupHiddenExpressions;\n\t\t\t}\n\t\t}\n\n\t\tconst hasAnyPathExpressions = constant(hiddenPaths.length > 0 && allStatic !== true);\n\t\tconst hasAllHiddenStaticExpressions = constant(hiddenPaths.length > 0 && hiddenPaths.indexOf(false) === -1 && allStatic);\n\n\t\treturn compileExpression(\n\t\t\tifElse(\n\t\t\t\thasAnyPathExpressions,\n\t\t\t\tformatResult(hiddenPaths, TableFormatter.getVBoxVisibility),\n\t\t\t\tifElse(hasAllHiddenStaticExpressions, constant(false), constant(true))\n\t\t\t)\n\t\t);\n\t},\n\n\t/**\n\t * Method to provide hidden filters to the table.\n\t *\n\t * @function\n\t * @name formatHiddenFilters\n\t * @param oHiddenFilter The hiddenFilters via context named filters (and key hiddenFilters) passed to Macro Table\n\t * @returns The string representation of the hidden filters\n\t */\n\tformatHiddenFilters: function (oHiddenFilter: TableFiltersConfiguration | undefined) {\n\t\tif (oHiddenFilter) {\n\t\t\ttry {\n\t\t\t\treturn JSON.stringify(oHiddenFilter);\n\t\t\t} catch (ex) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\n\t/**\n\t * Method to get the stable ID of a table element (column or FieldGroup label).\n\t *\n\t * @function\n\t * @name getElementStableId\n\t * @param tableId Current object ID\n\t * @param elementId Element Id or suffix\n\t * @param dataModelObjectPath DataModelObjectPath of the dataField\n\t * @returns The stable ID for a given column\n\t */\n\tgetElementStableId: function (tableId: string | undefined, elementId: string, dataModelObjectPath: DataModelObjectPath) {\n\t\tif (!tableId) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst dataField = dataModelObjectPath.targetObject as DataFieldAbstractTypes;\n\t\tlet dataFieldPart: string | DataFieldAbstractTypes;\n\t\tswitch (dataField.$Type) {\n\t\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\t\tdataFieldPart = dataField.Target.value;\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n\t\t\tcase UIAnnotationTypes.DataFieldForAction:\n\t\t\tcase UIAnnotationTypes.DataFieldWithUrl:\n\t\t\t\tdataFieldPart = dataField;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdataFieldPart = (dataField as DataField).Value?.path ?? \"\";\n\t\t\t\tbreak;\n\t\t}\n\t\treturn generate([tableId, elementId, dataFieldPart]);\n\t},\n\n\t/**\n\t * Method to get the stable ID of the column.\n\t *\n\t * @function\n\t * @name getColumnStableId\n\t * @param id Current object ID\n\t * @param dataModelObjectPath DataModelObjectPath of the dataField\n\t * @returns The stable ID for a given column\n\t */\n\tgetColumnStableId: function (id: string, dataModelObjectPath: DataModelObjectPath) {\n\t\treturn TableHelper.getElementStableId(id, \"C\", dataModelObjectPath);\n\t},\n\n\tgetFieldGroupLabelStableId: function (id: string, dataModelObjectPath: DataModelObjectPath) {\n\t\treturn TableHelper.getElementStableId(id, \"FGLabel\", dataModelObjectPath);\n\t},\n\n\t/**\n\t * Method filters out properties which do not belong to the collection.\n\t *\n\t * @param properties The array of properties to be checked.\n\t * @param collectionContext The collection context to be used.\n\t * @returns The array of applicable properties.\n\t * @private\n\t */\n\t_filterNonApplicableProperties: function (properties: string[], collectionContext: Context) {\n\t\treturn (\n\t\t\tproperties &&\n\t\t\tproperties.filter(function (sPropertyPath: any) {\n\t\t\t\treturn collectionContext.getObject(`./${sPropertyPath}`);\n\t\t\t})\n\t\t);\n\t},\n\n\t/**\n\t * Method to retreive the listed properties from the custom columns\n\t *\n\t * @param columns The table columns\n\t * @returns The list of available properties from the custom columns\n\t * @private\n\t */\n\n\tgetPropertiesFromCustomColumns: function (columns: TableColumn[]) {\n\t\t// Add properties from the custom columns, this is required for the export of all the properties listed on a custom column\n\t\tif (!columns?.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst propertiesFromCustomColumns: string[] = [];\n\t\tfor (const column of columns) {\n\t\t\tif (\"properties\" in column && column.properties?.length) {\n\t\t\t\tfor (const property of column.properties) {\n\t\t\t\t\tif (propertiesFromCustomColumns.indexOf(property) === -1) {\n\t\t\t\t\t\t// only add property if it doesn't exist\n\t\t\t\t\t\tpropertiesFromCustomColumns.push(property);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn propertiesFromCustomColumns;\n\t},\n\t/**\n\t * Method to generate the binding information for a table row.\n\t *\n\t * @param table The instance of the inner model of the table building block\n\t * @returns - Returns the binding information of a table row\n\t */\n\tgetRowsBindingInfo: function (table: TableBlock) {\n\t\tconst dataModelPath = getInvolvedDataModelObjects(table.collection, table.contextPath);\n\t\tconst path = getContextRelativeTargetObjectPath(dataModelPath) || getTargetObjectPath(dataModelPath);\n\t\tconst oRowBinding = {\n\t\t\tui5object: true,\n\t\t\tsuspended: false,\n\t\t\tpath: CommonHelper.addSingleQuotes(path),\n\t\t\tparameters: {\n\t\t\t\t$count: true\n\t\t\t} as any,\n\t\t\tevents: {} as any\n\t\t};\n\n\t\tif (table.tableDefinition.enable$select) {\n\t\t\t// Don't add $select parameter in case of an analytical query, this isn't supported by the model\n\t\t\tconst sSelect = TableHelper.create$Select(table);\n\t\t\tif (sSelect) {\n\t\t\t\toRowBinding.parameters.$select = `'${sSelect}'`;\n\t\t\t}\n\t\t}\n\n\t\tif (table.tableDefinition.enable$$getKeepAliveContext) {\n\t\t\t// we later ensure in the delegate only one list binding for a given targetCollectionPath has the flag $$getKeepAliveContext\n\t\t\toRowBinding.parameters.$$getKeepAliveContext = true;\n\t\t}\n\n\t\toRowBinding.parameters.$$groupId = CommonHelper.addSingleQuotes(\"$auto.Workers\");\n\t\toRowBinding.parameters.$$updateGroupId = CommonHelper.addSingleQuotes(\"$auto\");\n\t\toRowBinding.parameters.$$ownRequest = true;\n\t\toRowBinding.parameters.$$patchWithoutSideEffects = true;\n\n\t\toRowBinding.events.patchSent = CommonHelper.addSingleQuotes(\".editFlow.handlePatchSent\");\n\t\toRowBinding.events.patchCompleted = CommonHelper.addSingleQuotes(\"API.onInternalPatchCompleted\");\n\t\toRowBinding.events.dataReceived = CommonHelper.addSingleQuotes(\"API.onInternalDataReceived\");\n\t\toRowBinding.events.dataRequested = CommonHelper.addSingleQuotes(\"API.onInternalDataRequested\");\n\t\toRowBinding.events.change = CommonHelper.addSingleQuotes(\"API.onContextChange\");\n\t\t// recreate an empty row when one is activated\n\t\toRowBinding.events.createActivate = CommonHelper.addSingleQuotes(\".editFlow.handleCreateActivate\");\n\t\treturn CommonHelper.objectToString(oRowBinding);\n\t},\n\t/**\n\t * Method to check the validity of the fields in the creation row.\n\t *\n\t * @function\n\t * @name validateCreationRowFields\n\t * @param oFieldValidityObject Current Object holding the fields\n\t * @returns `true` if all the fields in the creation row are valid, `false` otherwise\n\t */\n\tvalidateCreationRowFields: function (oFieldValidityObject: any) {\n\t\tif (!oFieldValidityObject) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (\n\t\t\tObject.keys(oFieldValidityObject).length > 0 &&\n\t\t\tObject.keys(oFieldValidityObject).every(function (key: string) {\n\t\t\t\treturn oFieldValidityObject[key][\"validity\"];\n\t\t\t})\n\t\t);\n\t},\n\t/**\n\t * Method to get the expression for the 'press' event for the DataFieldForActionButton.\n\t *\n\t * @function\n\t * @name pressEventDataFieldForActionButton\n\t * @param tableProperties The properties of the table control\n\t * @param tableProperties.contextObjectPath The datamodel object path for the table\n\t * @param tableProperties.id The id of the table control\n\t * @param dataField Value of the DataPoint\n\t * @param entitySetName Name of the EntitySet\n\t * @param operationAvailableMap OperationAvailableMap as stringified JSON object\n\t * @param actionContext The instance or the path of the action\n\t * @param isNavigable Action either triggers navigation or not\n\t * @param enableAutoScroll Action either triggers scrolling to the newly created items in the related table or not\n\t * @param defaultValuesExtensionFunction Function name to prefill dialog parameters\n\t * @returns The binding expression\n\t */\n\tpressEventDataFieldForActionButton: function (\n\t\ttableProperties: {\n\t\t\tcontextObjectPath: DataModelObjectPath;\n\t\t\tid: string;\n\t\t},\n\t\tdataField: DataFieldForAction | undefined,\n\t\tentitySetName: string,\n\t\toperationAvailableMap: string,\n\t\tactionObject?: MetaModelAction | MetaModelAction[] | string,\n\t\tisNavigable = false,\n\t\tenableAutoScroll?: boolean,\n\t\tdefaultValuesExtensionFunction?: string\n\t) {\n\t\tif (!dataField) return undefined;\n\t\tconst sActionName = dataField.Action,\n\t\t\ttargetEntityTypeName = tableProperties.contextObjectPath.targetEntityType.fullyQualifiedName,\n\t\t\tstaticAction =\n\t\t\t\ttypeof actionObject !== \"string\" &&\n\t\t\t\t(this._isStaticAction(actionObject, sActionName) ||\n\t\t\t\t\tthis._isActionOverloadOnDifferentType(sActionName, targetEntityTypeName)),\n\t\t\tparams: any = {\n\t\t\t\tcontexts: !staticAction ? pathInModel(\"selectedContexts\", \"internal\") : null,\n\t\t\t\tbStaticAction: staticAction ? staticAction : undefined,\n\t\t\t\tentitySetName: entitySetName,\n\t\t\t\tapplicableContexts: !staticAction ? pathInModel(`dynamicActions/${dataField.Action}/aApplicable/`, \"internal\") : null,\n\t\t\t\tnotApplicableContexts: !staticAction ? pathInModel(`dynamicActions/${dataField.Action}/aNotApplicable/`, \"internal\") : null,\n\t\t\t\tisNavigable: isNavigable,\n\t\t\t\tenableAutoScroll: enableAutoScroll,\n\t\t\t\tdefaultValuesExtensionFunction: defaultValuesExtensionFunction\n\t\t\t};\n\n\t\tparams.invocationGrouping = dataField?.InvocationGrouping === \"UI.OperationGroupingType/ChangeSet\" ? \"ChangeSet\" : \"Isolated\";\n\n\t\tparams.controlId = tableProperties.id;\n\t\tparams.operationAvailableMap = operationAvailableMap;\n\t\tparams.label = dataField.Label;\n\t\treturn compileExpression(fn(\"API.onActionPress\", [ref(\"$event\"), ref(\"$controller\"), dataField.Action, params]));\n\t\t//return ActionHelper.getPressEventDataFieldForActionButton(table.id!, dataField, params, operationAvailableMap);\n\t},\n\t/**\n\t * Method to determine the binding expression for 'enabled' property of DataFieldForAction actions.\n\t *\n\t * @function\n\t * @name isDataFieldForActionEnabled\n\t * @param tableDefinition The table definition from the table converter\n\t * @param actionName The name of the action\n\t * @param isBound IsBound for Action\n\t * @param actionContext The instance or the path of the action\n\t * @param enableOnSelect Define the enabling of the action (single or multiselect)\n\t * @param annotationTargetEntityType The entity type of the annotation target\n\t * @returns A binding expression to define the 'enabled' property of the action\n\t */\n\tisDataFieldForActionEnabled: function (\n\t\ttableDefinition: TableVisualization,\n\t\tactionName: string | String,\n\t\tisBound: boolean,\n\t\tactionObject?: MetaModelAction | MetaModelAction[] | string,\n\t\tenableOnSelect?: string,\n\t\tannotationTargetEntityType?: EntityType\n\t) {\n\t\tconst isStaticAction = this._isStaticAction(actionObject, actionName);\n\n\t\t// Check for action overload on a different Entity type.\n\t\t// If yes, table row selection is not required to enable this action.\n\t\tif (this._isActionOverloadOnDifferentType(actionName, annotationTargetEntityType)) {\n\t\t\t// Action overload defined on different entity type\n\t\t\tconst oOperationAvailableMap = tableDefinition && JSON.parse(tableDefinition.operationAvailableMap);\n\t\t\tif (oOperationAvailableMap?.hasOwnProperty(actionName)) {\n\t\t\t\t// Core.OperationAvailable annotation defined for the action.\n\t\t\t\t// Need to refer to internal model for enabled property of the dynamic action.\n\t\t\t\t// return compileBinding(bindingExpression(\"dynamicActions/\" + sActionName + \"/bEnabled\", \"internal\"), true);\n\t\t\t\treturn `{= \\${internal>dynamicActions/${actionName}/bEnabled} }`;\n\t\t\t}\n\t\t\t// Consider the action just like any other static DataFieldForAction.\n\t\t\treturn true;\n\t\t}\n\t\tif (!isBound || isStaticAction) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet dataFieldForActionEnabledExpression = \"\";\n\n\t\tconst numberOfSelectedContexts = ActionHelper.getNumberOfContextsExpression(enableOnSelect ?? \"multiselect\");\n\t\tconst action = `\\${internal>dynamicActions/${actionName}/bEnabled}`;\n\t\tdataFieldForActionEnabledExpression = `${numberOfSelectedContexts} && ${action}`;\n\n\t\treturn `{= ${dataFieldForActionEnabledExpression}}`;\n\t},\n\t/**\n\t * Method to determine the binding expression for 'enabled' property of DataFieldForIBN actions.\n\t *\n\t * @function\n\t * @name isDataFieldForIBNEnabled\n\t * @param tableProperties The properties of the table control\n\t * @param tableProperties.collection  The collection context to be used\n\t * @param tableProperties.tableDefinition The table definition from the table converter\n\t * @param dataField The value of the data field\n\t * @param requiresContext RequiresContext for IBN\n\t * @param isNavigationAvailable Define if the navigation is available\n\t * @returns A binding expression to define the 'enabled' property of the action\n\t */\n\tisDataFieldForIBNEnabled: function (\n\t\ttableProperties: {\n\t\t\tcollection: Context;\n\t\t\ttableDefinition: TableVisualization;\n\t\t},\n\t\tdataField: DataFieldForIntentBasedNavigation,\n\t\trequiresContext: boolean | PropertyAnnotationValue<Boolean>,\n\t\tisNavigationAvailable?: boolean | PropertyAnnotationValue<Boolean>\n\t) {\n\t\tlet isNavigationAvailablePath = null;\n\t\tif (isPathAnnotationExpression(isNavigationAvailable)) {\n\t\t\tisNavigationAvailablePath = isNavigationAvailable.path;\n\t\t}\n\t\tconst isAnalyticalTable = tableProperties?.tableDefinition?.enableAnalytics;\n\n\t\tif (!requiresContext) {\n\t\t\tconst entitySet = tableProperties.collection.getPath();\n\t\t\tconst metaModel = tableProperties.collection.getModel();\n\t\t\tif (isNavigationAvailable === false && !isAnalyticalTable) {\n\t\t\t\tLog.warning(\"NavigationAvailable as false is incorrect usage\");\n\t\t\t\treturn false;\n\t\t\t} else if (\n\t\t\t\tisNavigationAvailablePath &&\n\t\t\t\t!isAnalyticalTable &&\n\t\t\t\tisPathAnnotationExpression(dataField?.NavigationAvailable) &&\n\t\t\t\tmetaModel.getObject(entitySet + \"/$Partner\") === dataField.NavigationAvailable.path.split(\"/\")[0]\n\t\t\t) {\n\t\t\t\treturn `{= \\${${isNavigationAvailablePath.substring(\n\t\t\t\t\tisNavigationAvailablePath.indexOf(\"/\") + 1,\n\t\t\t\t\tisNavigationAvailablePath.length\n\t\t\t\t)}}}`;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tlet dataFieldForIBNEnabledExpression = \"\",\n\t\t\tnumberOfSelectedContexts,\n\t\t\taction;\n\n\t\tif (isNavigationAvailable === true || isAnalyticalTable) {\n\t\t\tdataFieldForIBNEnabledExpression = \"%{internal>numberOfSelectedContexts} >= 1\";\n\t\t} else if (isNavigationAvailable === false) {\n\t\t\tLog.warning(\"NavigationAvailable as false is incorrect usage\");\n\t\t\treturn false;\n\t\t} else {\n\t\t\tnumberOfSelectedContexts = \"%{internal>numberOfSelectedContexts} >= 1\";\n\t\t\taction = `\\${internal>ibn/${dataField.SemanticObject}-${dataField.Action}/bEnabled}`;\n\t\t\tdataFieldForIBNEnabledExpression = numberOfSelectedContexts + \" && \" + action;\n\t\t}\n\n\t\treturn `{= ${dataFieldForIBNEnabledExpression}}`;\n\t},\n\t/**\n\t * Method to get press event expression for CreateButton.\n\t *\n\t * @function\n\t * @name pressEventForCreateButton\n\t * @param oThis Current Object\n\t * @param bCmdExecutionFlag Flag to indicate that the function is called from CMD Execution\n\t * @returns The binding expression for the press event of the create button\n\t */\n\tpressEventForCreateButton: function (oThis: any, bCmdExecutionFlag: boolean) {\n\t\tconst sCreationMode = oThis.creationMode;\n\t\tlet oParams: any;\n\t\tconst sMdcTable = bCmdExecutionFlag ? \"${$source>}.getParent()\" : \"${$source>}.getParent().getParent().getParent()\";\n\t\tlet sRowBinding = sMdcTable + \".getRowBinding() || \" + sMdcTable + \".data('rowsBindingInfo').path\";\n\n\t\tswitch (sCreationMode) {\n\t\t\tcase CreationMode.External:\n\t\t\t\t// navigate to external target for creating new entries\n\t\t\t\t// TODO: Add required parameters\n\t\t\t\toParams = {\n\t\t\t\t\tcreationMode: CommonHelper.addSingleQuotes(CreationMode.External),\n\t\t\t\t\toutbound: CommonHelper.addSingleQuotes(oThis.createOutbound)\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase CreationMode.CreationRow:\n\t\t\t\toParams = {\n\t\t\t\t\tcreationMode: CommonHelper.addSingleQuotes(CreationMode.CreationRow),\n\t\t\t\t\tcreationRow: \"${$source>}\",\n\t\t\t\t\tcreateAtEnd: oThis.createAtEnd !== undefined ? oThis.createAtEnd : false\n\t\t\t\t};\n\n\t\t\t\tsRowBinding = \"${$source>}.getParent().getRowBinding()\";\n\t\t\t\tbreak;\n\n\t\t\tcase CreationMode.NewPage:\n\t\t\tcase CreationMode.Inline:\n\t\t\t\toParams = {\n\t\t\t\t\tcreationMode: CommonHelper.addSingleQuotes(sCreationMode),\n\t\t\t\t\tcreateAtEnd: oThis.createAtEnd !== undefined ? oThis.createAtEnd : false,\n\t\t\t\t\ttableId: CommonHelper.addSingleQuotes(oThis.id)\n\t\t\t\t};\n\n\t\t\t\tif (oThis.createNewAction) {\n\t\t\t\t\toParams.newAction = CommonHelper.addSingleQuotes(oThis.createNewAction);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase CreationMode.InlineCreationRows:\n\t\t\t\treturn CommonHelper.generateFunction(\".editFlow.createEmptyRowsAndFocus\", sMdcTable);\n\t\t\tdefault:\n\t\t\t\t// unsupported\n\t\t\t\treturn undefined;\n\t\t}\n\t\treturn CommonHelper.generateFunction(\".editFlow.createDocument\", sRowBinding, CommonHelper.objectToString(oParams));\n\t},\n\n\tgetIBNData: function (outboundDetail: NavigationTargetConfiguration[\"outboundDetail\"]) {\n\t\tif (outboundDetail) {\n\t\t\tconst oIBNData = {\n\t\t\t\tsemanticObject: CommonHelper.addSingleQuotes(outboundDetail.semanticObject),\n\t\t\t\taction: CommonHelper.addSingleQuotes(outboundDetail.action)\n\t\t\t};\n\t\t\treturn CommonHelper.objectToString(oIBNData);\n\t\t}\n\t},\n\n\t_getExpressionForDeleteButton: function (value: any, fullContextPath: DataModelObjectPath): string | CompiledBindingToolkitExpression {\n\t\tif (typeof value === \"string\") {\n\t\t\treturn CommonHelper.addSingleQuotes(value, true);\n\t\t} else {\n\t\t\tconst expression = getExpressionFromAnnotation(value);\n\t\t\tif (isConstant(expression) || isPathInModelExpression(expression)) {\n\t\t\t\tconst valueExpression = formatValueRecursively(expression, fullContextPath);\n\t\t\t\treturn compileExpression(valueExpression);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Method to get press event expression for 'Delete' button.\n\t *\n\t * @function\n\t * @name pressEventForDeleteButton\n\t * @param oThis Current Object\n\t * @param sEntitySetName EntitySet name\n\t * @param oHeaderInfo Header Info\n\t * @param fullcontextPath Context Path\n\t * @returns The binding expression for the press event of the 'Delete' button\n\t */\n\tpressEventForDeleteButton: function (oThis: any, sEntitySetName: string, oHeaderInfo: any, fullcontextPath: any) {\n\t\tconst sDeletableContexts = \"${internal>deletableContexts}\";\n\t\tlet sTitleExpression, sDescriptionExpression;\n\n\t\tif (oHeaderInfo?.Title) {\n\t\t\tsTitleExpression = this._getExpressionForDeleteButton(oHeaderInfo.Title.Value, fullcontextPath);\n\t\t}\n\t\tif (oHeaderInfo?.Description) {\n\t\t\tsDescriptionExpression = this._getExpressionForDeleteButton(oHeaderInfo.Description.Value, fullcontextPath);\n\t\t}\n\n\t\tconst oParams = {\n\t\t\tid: CommonHelper.addSingleQuotes(oThis.id),\n\t\t\tentitySetName: CommonHelper.addSingleQuotes(sEntitySetName),\n\t\t\tnumberOfSelectedContexts: \"${internal>selectedContexts}.length\",\n\t\t\tunSavedContexts: \"${internal>unSavedContexts}\",\n\t\t\tlockedContexts: \"${internal>lockedContexts}\",\n\t\t\tdraftsWithDeletableActive: \"${internal>draftsWithDeletableActive}\",\n\t\t\tdraftsWithNonDeletableActive: \"${internal>draftsWithNonDeletableActive}\",\n\t\t\tcontrolId: \"${internal>controlId}\",\n\t\t\ttitle: sTitleExpression,\n\t\t\tdescription: sDescriptionExpression,\n\t\t\tselectedContexts: \"${internal>selectedContexts}\"\n\t\t};\n\n\t\treturn CommonHelper.generateFunction(\".editFlow.deleteMultipleDocuments\", sDeletableContexts, CommonHelper.objectToString(oParams));\n\t},\n\n\t/**\n\t * Method to set the visibility of the label for the column header.\n\t *\n\t * @function\n\t * @name setHeaderLabelVisibility\n\t * @param datafield DataField\n\t * @param dataFieldCollection List of items inside a fieldgroup (if any)\n\t * @returns `true` if the header label needs to be visible else false.\n\t */\n\tsetHeaderLabelVisibility: function (datafield: any, dataFieldCollection: any[]) {\n\t\t// If Inline button/navigation action, return false, else true;\n\t\tif (!dataFieldCollection) {\n\t\t\tif (datafield.$Type.indexOf(\"DataFieldForAction\") > -1 && datafield.Inline) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (datafield.$Type.indexOf(\"DataFieldForIntentBasedNavigation\") > -1 && datafield.Inline) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\t// In Fieldgroup, If NOT all datafield/datafieldForAnnotation exists with hidden, return true;\n\t\treturn dataFieldCollection.some(function (oDC: any) {\n\t\t\tif (\n\t\t\t\t(oDC.$Type === UIAnnotationTypes.DataField || oDC.$Type === UIAnnotationTypes.DataFieldForAnnotation) &&\n\t\t\t\toDC[`@${UIAnnotationTerms.Hidden}`] !== true\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Method to get the text from the DataFieldForAnnotation into the column.\n\t *\n\t * @function\n\t * @name getTextOnActionField\n\t * @param oDataField DataPoint's Value\n\t * @param oContext Context object of the LineItem\n\t * @returns String from label referring to action text\n\t */\n\tgetTextOnActionField: function (oDataField: any, oContext: any): string | undefined {\n\t\tif (\n\t\t\toDataField.$Type === UIAnnotationTypes.DataFieldForAction ||\n\t\t\toDataField.$Type === UIAnnotationTypes.DataFieldForIntentBasedNavigation\n\t\t) {\n\t\t\treturn oDataField.Label;\n\t\t}\n\t\t// for FieldGroup containing DataFieldForAnnotation\n\t\tif (\n\t\t\toDataField.$Type === UIAnnotationTypes.DataFieldForAnnotation &&\n\t\t\toContext.context.getObject(\"Target/$AnnotationPath\").indexOf(\"@\" + UIAnnotationTerms.FieldGroup) > -1\n\t\t) {\n\t\t\tconst sPathDataFields = \"Target/$AnnotationPath/Data/\";\n\t\t\tconst aMultipleLabels = [];\n\t\t\tfor (const i in oContext.context.getObject(sPathDataFields)) {\n\t\t\t\tif (\n\t\t\t\t\toContext.context.getObject(`${sPathDataFields + i}/$Type`) === UIAnnotationTypes.DataFieldForAction ||\n\t\t\t\t\toContext.context.getObject(`${sPathDataFields + i}/$Type`) === UIAnnotationTypes.DataFieldForIntentBasedNavigation\n\t\t\t\t) {\n\t\t\t\t\taMultipleLabels.push(oContext.context.getObject(`${sPathDataFields + i}/Label`));\n\t\t\t\t}\n\t\t\t}\n\t\t\t// In case there are multiple actions inside a Field Group select the largest Action Label\n\t\t\tif (aMultipleLabels.length > 1) {\n\t\t\t\treturn aMultipleLabels.reduce(function (a: any, b: any) {\n\t\t\t\t\treturn a.length > b.length ? a : b;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn aMultipleLabels.length === 0 ? undefined : aMultipleLabels.toString();\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\t_getResponsiveTableColumnSettings: function (oThis: any, oColumn: any) {\n\t\tif (oThis.tableType === \"ResponsiveTable\") {\n\t\t\treturn oColumn.settings;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetChartSize: function (oThis: any, oColumn: any) {\n\t\tconst settings = this._getResponsiveTableColumnSettings(oThis, oColumn);\n\t\tif (settings && settings.microChartSize) {\n\t\t\treturn settings.microChartSize;\n\t\t}\n\t\treturn \"XS\";\n\t},\n\tgetShowOnlyChart: function (oThis: any, oColumn: any) {\n\t\tconst settings = this._getResponsiveTableColumnSettings(oThis, oColumn);\n\t\tif (settings && settings.showMicroChartLabel) {\n\t\t\treturn !settings.showMicroChartLabel;\n\t\t}\n\t\treturn true;\n\t},\n\tgetDelegate: function (table: TableVisualization, isALP: string, entityName: string) {\n\t\tlet oDelegate;\n\t\tif (isALP === \"true\") {\n\t\t\t// We don't support TreeTable in ALP\n\t\t\tif (table.control.type === \"TreeTable\") {\n\t\t\t\tthrow new Error(\"TreeTable not supported in Analytical ListPage\");\n\t\t\t}\n\t\t\toDelegate = {\n\t\t\t\tname: \"sap/fe/macros/table/delegates/ALPTableDelegate\",\n\t\t\t\tpayload: {\n\t\t\t\t\tcollectionName: entityName\n\t\t\t\t}\n\t\t\t};\n\t\t} else if (table.control.type === \"TreeTable\") {\n\t\t\toDelegate = {\n\t\t\t\tname: \"sap/fe/macros/table/delegates/TreeTableDelegate\",\n\t\t\t\tpayload: {\n\t\t\t\t\thierarchyQualifier: table.control.hierarchyQualifier,\n\t\t\t\t\tinitialExpansionLevel: table.annotation.initialExpansionLevel\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\toDelegate = {\n\t\t\t\tname: \"sap/fe/macros/table/delegates/TableDelegate\"\n\t\t\t};\n\t\t}\n\n\t\treturn JSON.stringify(oDelegate);\n\t},\n\tsetIBNEnablement: function (oInternalModelContext: any, oNavigationAvailableMap: any, aSelectedContexts: any) {\n\t\tfor (const sKey in oNavigationAvailableMap) {\n\t\t\toInternalModelContext.setProperty(`ibn/${sKey}`, {\n\t\t\t\tbEnabled: false,\n\t\t\t\taApplicable: [],\n\t\t\t\taNotApplicable: []\n\t\t\t});\n\t\t\tconst aApplicable = [],\n\t\t\t\taNotApplicable = [];\n\t\t\tconst sProperty = oNavigationAvailableMap[sKey];\n\t\t\tfor (let i = 0; i < aSelectedContexts.length; i++) {\n\t\t\t\tconst oSelectedContext = aSelectedContexts[i];\n\t\t\t\tif (oSelectedContext.getObject(sProperty)) {\n\t\t\t\t\toInternalModelContext.getModel().setProperty(`${oInternalModelContext.getPath()}/ibn/${sKey}/bEnabled`, true);\n\t\t\t\t\taApplicable.push(oSelectedContext);\n\t\t\t\t} else {\n\t\t\t\t\taNotApplicable.push(oSelectedContext);\n\t\t\t\t}\n\t\t\t}\n\t\t\toInternalModelContext.getModel().setProperty(`${oInternalModelContext.getPath()}/ibn/${sKey}/aApplicable`, aApplicable);\n\t\t\toInternalModelContext.getModel().setProperty(`${oInternalModelContext.getPath()}/ibn/${sKey}/aNotApplicable`, aNotApplicable);\n\t\t}\n\t},\n\n\t/**\n\t * @param oFastCreationRow\n\t * @param sPath\n\t * @param oContext\n\t * @param oModel\n\t * @param oFinalUIState\n\t */\n\tenableFastCreationRow: async function (\n\t\toFastCreationRow: any,\n\t\tsPath: string,\n\t\toContext: v4Context,\n\t\toModel: ODataModel,\n\t\toFinalUIState: Promise<any>\n\t) {\n\t\tlet oFastCreationListBinding, oFastCreationContext;\n\n\t\tif (oFastCreationRow) {\n\t\t\ttry {\n\t\t\t\tawait oFinalUIState;\n\t\t\t\t// If a draft is discarded while a message strip filter is active on the table there is a table rebind caused by the DataStateIndicator\n\t\t\t\t// To prevent a new creation row binding being created at that moment we check if the context is already deleted\n\t\t\t\tif (oFastCreationRow.getModel(\"ui\").getProperty(\"/isEditable\") && !oContext.isDeleted()) {\n\t\t\t\t\toFastCreationListBinding = oModel.bindList(sPath, oContext, [], [], {\n\t\t\t\t\t\t$$updateGroupId: \"doNotSubmit\",\n\t\t\t\t\t\t$$groupId: \"doNotSubmit\"\n\t\t\t\t\t});\n\t\t\t\t\t// Workaround suggested by OData model v4 colleagues\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\toFastCreationListBinding.refreshInternal = function () {\n\t\t\t\t\t\t/* do nothing */\n\t\t\t\t\t};\n\t\t\t\t\toFastCreationContext = oFastCreationListBinding.create();\n\t\t\t\t\toFastCreationRow.setBindingContext(oFastCreationContext);\n\n\t\t\t\t\t// this is needed to avoid console error\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait oFastCreationContext.created();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tLog.trace(\"transient fast creation context deleted\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (oError: any) {\n\t\t\t\tLog.error(\"Error while computing the final UI state\", oError);\n\t\t\t}\n\t\t}\n\t}\n};\n(TableHelper.getNavigationAvailableMap as any).requiresIContext = true;\n(TableHelper.getTextOnActionField as any).requiresIContext = true;\n\nexport default TableHelper;\n"],"mappings":"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"}},{"offset":{"line":31877,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","DataVisualization","MetaModelConverter","TableFormatter","BindingToolkit","SizeHelper","StableIdHelper","TypeGuards","FELibrary","DataModelPathHelper","PropertyHelper","UIFormatters","CommonHelper","FieldTemplating","ActionHelper","TableSizeHelper","EditMode","formatValueRecursively","getEditMode","isImageURL","hasText","getTargetObjectPath","getContextRelativeTargetObjectPath","isPathAnnotationExpression","generate","ref","pathInModel","isPathInModelExpression","isConstant","ifElse","getExpressionFromAnnotation","formatResult","fn","constant","compileExpression","getInvolvedDataModelObjects","getUiControl","CreationMode","TableHelper","_isStaticAction","actionObject","actionName","action","Array","isArray","entityType","this","_getActionOverloadEntityType","find","_action","$IsBound","$Parameter","$Type","$isCollection","sActionName","indexOf","aParts","split","length","replaceAll","undefined","_isActionOverloadOnDifferentType","sAnnotationTargetEntityType","sEntityType","getFieldsRequestedByPresentationVariant","oPresentationVariant","_oPresentationVariant","RequestAtLeast","map","oRequested","value","getNavigationAvailableFieldsFromLineItem","aLineItemContext","aSelectedFieldsArray","getObject","forEach","oRecord","_oRecord$NavigationAv","Inline","Determining","NavigationAvailable","$Path","push","getNavigationAvailableMap","lineItemCollection","oIBNNavigationAvailableMap","record","sKey","SemanticObject","Action","RequiresContext","path","JSON","stringify","getUiLineItem","presentationContext","getUiLineItemObject","lineItemOrPresentationContext","convertedMetaData","_visualizations$find","lineItemOrPresentationObject","resolvePath","getPath","target","visualizations","Visualizations","lineItemObject","item","$target","term","create$Select","table","selectedFields","lineItemContext","metaPath","pushField","field","includes","pushFieldList","fields","columns","tableDefinition","propertiesFromCustomColumns","getPropertiesFromCustomColumns","_targetCollection$ann","_table$contextObjectP","_table$contextObjectP2","_table$contextObjectP3","_table$contextObjectP4","_table$contextObjectP5","_table$contextObjectP6","_table$contextObjectP7","_table$contextObjectP8","_table$contextObjectP9","_table$contextObjectP10","presentationAnnotation","targetObject","operationAvailableProperties","applicableProperties","_filterNonApplicableProperties","collection","targetCollection","collectionEntity","targetType","aSemanticKeys","annotations","Common","SemanticKey","oSemanticKey","contextObjectPath","targetEntitySet","Capabilities","DeleteRestrictions","Deletable","UpdateRestrictions","Updatable","join","getColumnWidth","oThis","column","dataField","dataFieldActionText","dataModelObjectPath","useRemUnit","microChartTitle","width","enableAutoColumnWidth","getColumnWidthForImage","getColumnWidthForDataField","name","_dataModelObjectPath$","_dataModelObjectPath$2","_dataModelObjectPath$3","_dataModelObjectPath$4","_dataModelObjectPath$5","_dataModelObjectPath$6","_dataModelObjectPath$7","_dataModelObjectPath$8","_dataModelObjectPath$9","_dataModelObjectPath$10","_annotations$Core2","_annotations$Core2$Me","Value","dataType","type","Display","_annotations$Core","_annotations$Core$Med","hasTextAnnotation","Core","MediaType","oMicroChartTitle","_dataModelObjectPath$11","_dataModelObjectPath$12","Target","$AnnotationPath","_dataField$Label","nTmpTextWidth","getButtonWidth","Label","toString","nTmpVisualizationWidth","getWidthForDataFieldForAnnotation","propertyWidth","getColumnWidthForChart","columnLabelWidth","_dataField$Target","_dataField$Target$$An","chartSize","getChartSize","getShowOnlyChart","Title","Description","tmpText","titleSize","tmpWidth","getMarginClass","oCollection","oDataField","sVisualization","sFieldGroupHiddenExpressions","sBindingExpression","sClass","sHiddenExpressionResult","substring","lastIndexOf","getVBoxVisibility","fieldGroupHiddenExpressions","fieldGroup","allStatic","hiddenPaths","hiddenAnnotationValue","hasAnyPathExpressions","hasAllHiddenStaticExpressions","formatHiddenFilters","oHiddenFilter","ex","getElementStableId","tableId","elementId","_Value","dataFieldPart","getColumnStableId","id","getFieldGroupLabelStableId","properties","collectionContext","filter","sPropertyPath","_column$properties","property","getRowsBindingInfo","dataModelPath","contextPath","oRowBinding","ui5object","suspended","addSingleQuotes","parameters","$count","events","enable$select","sSelect","$select","enable$$getKeepAliveContext","$$getKeepAliveContext","$$groupId","$$updateGroupId","$$ownRequest","$$patchWithoutSideEffects","patchSent","patchCompleted","dataReceived","dataRequested","change","createActivate","objectToString","validateCreationRowFields","oFieldValidityObject","Object","keys","every","key","pressEventDataFieldForActionButton","tableProperties","entitySetName","operationAvailableMap","isNavigable","arguments","enableAutoScroll","defaultValuesExtensionFunction","targetEntityTypeName","targetEntityType","fullyQualifiedName","staticAction","params","contexts","bStaticAction","applicableContexts","notApplicableContexts","invocationGrouping","InvocationGrouping","controlId","label","isDataFieldForActionEnabled","isBound","enableOnSelect","annotationTargetEntityType","isStaticAction","oOperationAvailableMap","parse","hasOwnProperty","dataFieldForActionEnabledExpression","numberOfSelectedContexts","getNumberOfContextsExpression","isDataFieldForIBNEnabled","requiresContext","isNavigationAvailable","_tableProperties$tabl","isNavigationAvailablePath","isAnalyticalTable","enableAnalytics","entitySet","metaModel","getModel","warning","dataFieldForIBNEnabledExpression","pressEventForCreateButton","bCmdExecutionFlag","sCreationMode","creationMode","oParams","sMdcTable","sRowBinding","External","outbound","createOutbound","CreationRow","creationRow","createAtEnd","NewPage","createNewAction","newAction","InlineCreationRows","generateFunction","getIBNData","outboundDetail","oIBNData","semanticObject","_getExpressionForDeleteButton","fullContextPath","expression","valueExpression","pressEventForDeleteButton","sEntitySetName","oHeaderInfo","fullcontextPath","sDeletableContexts","sTitleExpression","sDescriptionExpression","unSavedContexts","lockedContexts","draftsWithDeletableActive","draftsWithNonDeletableActive","title","description","selectedContexts","setHeaderLabelVisibility","datafield","dataFieldCollection","some","oDC","getTextOnActionField","oContext","context","sPathDataFields","aMultipleLabels","i","reduce","a","b","_getResponsiveTableColumnSettings","oColumn","tableType","settings","microChartSize","showMicroChartLabel","getDelegate","isALP","entityName","oDelegate","control","Error","payload","collectionName","hierarchyQualifier","initialExpansionLevel","annotation","setIBNEnablement","oInternalModelContext","oNavigationAvailableMap","aSelectedContexts","setProperty","bEnabled","aApplicable","aNotApplicable","sProperty","oSelectedContext","enableFastCreationRow","async","oFastCreationRow","sPath","oModel","oFinalUIState","oFastCreationListBinding","oFastCreationContext","getProperty","isDeleted","bindList","refreshInternal","create","setBindingContext","created","e","trace","oError","error","requiresIContext"],"sources":["TableHelper-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":31882,"column":0},"map":{"version":3,"names":["CreationMode","FELibrary","TableRuntime","displayTableSettings","oEvent","oParent","getSource","getParent","oSettingsButton","sap","ui","getCore","byId","getId","CommonUtils","fireButtonPress","executeConditionalActionShortcut","sButtonMatcher","oSource","oMdcTable","CreationRow","oButton","getActions","reduce","aActionButtons","oActionToolbarAction","concat","getAction","find","oActionButton","endsWith","oCreationRow","getAggregation","getApplyEnabled","getVisible","fireApply","setContexts","oTable","sDeletablePath","draft","sCollection","sNavigationAvailableMap","sActionsMultiselectDisabled","sUpdatablePath","BusyLocker","lock","setContextsAsync","then","Log","info","catch","error","finally","unlock","aActionsMultiselectDisabled","split","oActionOperationAvailableMap","JSON","parse","oNavigationAvailableMap","aSelectedContexts","getSelectedContexts","aDeletableContexts","bReadOnlyDraftEnabled","data","aUpdatableContexts","oDynamicActions","oIBN","oInternalModelContext","getBindingContext","filter","oContext","isInactive","oModelObject","Object","assign","getObject","selectedContexts","numberOfSelectedContexts","length","dynamicActions","ibn","deleteEnabled","deletableContexts","unSavedContexts","lockedContexts","draftsWithNonDeletableActive","draftsWithDeletableActive","controlId","updatableContexts","semanticKeyHasDraftIndicator","getProperty","undefined","oSelectedContext","oContextData","key","indexOf","sActionPath","substring","enabled","setProperty","bUpdatableByPath","bNotDraftInReadOnlyMode","IsActiveEntity","push","deleteHelper","updateDeleteInfoForSelectedContexts","TableHelper","setIBNEnablement","disableAction","ActionRuntime","setActionEnablement","forEach","sAction","bEnabled","onFieldChangeInCreationRow","oCustomValidationFunction","mField","FieldRuntime","getFieldStateOnChange","oSourceField","field","sFieldId","mFieldValidity","mNewFieldValidity","state","mCustomValidity","mNewCustomValidity","getBinding","getPath","fieldId","oMessageManager","getMessageManager","sTarget","getBindingPath","getMessageModel","getData","oMessage","target","removeMessages","onTreeTableContextChanged","table","initialExpansionLevel","rowBinding","getRowBinding","getContext","aggregation","filterInfo","TableUtils","getAllFilterInfo","expandTo","search","setAggregation"],"sourceRoot":"table","sources":["TableRuntime.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport BusyLocker from \"sap/fe/core/controllerextensions/BusyLocker\";\nimport deleteHelper from \"sap/fe/core/helpers/DeleteHelper\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport FELibrary from \"sap/fe/core/library\";\nimport FieldRuntime from \"sap/fe/macros/field/FieldRuntime\";\nimport TableHelper from \"sap/fe/macros/table/TableHelper\";\nimport TableUtils from \"sap/fe/macros/table/Utils\";\nimport Button from \"sap/m/Button\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\n\nconst CreationMode = FELibrary.CreationMode;\n/**\n * Static class used by Table building block during runtime\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst TableRuntime = {\n\tdisplayTableSettings: function (oEvent: any) {\n\t\t/*\n\t\t\t\t Temporary solution\n\t\t\t\t Wait for mdc Table to provide public api to either get button 'Settings' or fire event on this button\n\t\t\t\t */\n\t\tconst oParent = oEvent.getSource().getParent(),\n\t\t\toSettingsButton = sap.ui.getCore().byId(`${oParent.getId()}-settings`);\n\t\tCommonUtils.fireButtonPress(oSettingsButton as Button);\n\t},\n\texecuteConditionalActionShortcut: function (sButtonMatcher: any, oSource: any) {\n\t\t// Get the button related to keyboard shortcut\n\t\tconst oMdcTable = oSource.getParent();\n\t\tif (sButtonMatcher !== CreationMode.CreationRow) {\n\t\t\tconst oButton = oMdcTable\n\t\t\t\t.getActions()\n\t\t\t\t.reduce(function (aActionButtons: any, oActionToolbarAction: any) {\n\t\t\t\t\treturn aActionButtons.concat(oActionToolbarAction.getAction());\n\t\t\t\t}, [])\n\t\t\t\t.find(function (oActionButton: any) {\n\t\t\t\t\treturn oActionButton.getId().endsWith(sButtonMatcher);\n\t\t\t\t});\n\t\t\tCommonUtils.fireButtonPress(oButton);\n\t\t} else {\n\t\t\tconst oCreationRow = oMdcTable.getAggregation(\"creationRow\");\n\t\t\tif (oCreationRow && oCreationRow.getApplyEnabled() && oCreationRow.getVisible()) {\n\t\t\t\toCreationRow.fireApply();\n\t\t\t}\n\t\t}\n\t},\n\n\tsetContexts: function (\n\t\toTable: Table,\n\t\tsDeletablePath: string,\n\t\tdraft: string,\n\t\tsCollection: string,\n\t\tsNavigationAvailableMap: string,\n\t\tsActionsMultiselectDisabled: string,\n\t\tsUpdatablePath: string\n\t) {\n\t\tBusyLocker.lock(oTable);\n\t\treturn TableRuntime.setContextsAsync(\n\t\t\toTable,\n\t\t\tsDeletablePath,\n\t\t\tdraft,\n\t\t\tsCollection,\n\t\t\tsNavigationAvailableMap,\n\t\t\tsActionsMultiselectDisabled,\n\t\t\tsUpdatablePath\n\t\t)\n\t\t\t.then(() => {\n\t\t\t\tLog.info(\"Selections updated\");\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tLog.error(error);\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tBusyLocker.unlock(oTable);\n\t\t\t});\n\t},\n\n\tsetContextsAsync: async function (\n\t\toTable: Table,\n\t\tsDeletablePath: string,\n\t\tdraft: string,\n\t\tsCollection: string,\n\t\tsNavigationAvailableMap: string,\n\t\tsActionsMultiselectDisabled: string,\n\t\tsUpdatablePath: string\n\t): Promise<void[] | undefined> {\n\t\tconst aActionsMultiselectDisabled = sActionsMultiselectDisabled ? sActionsMultiselectDisabled.split(\",\") : [];\n\t\tconst oActionOperationAvailableMap = JSON.parse(sCollection);\n\t\tconst oNavigationAvailableMap =\n\t\t\tsNavigationAvailableMap && sNavigationAvailableMap !== \"undefined\" && JSON.parse(sNavigationAvailableMap);\n\t\tlet aSelectedContexts = oTable.getSelectedContexts() as Context[];\n\t\tconst aDeletableContexts: Context[] = [];\n\t\tconst bReadOnlyDraftEnabled = oTable.data(\"displayModePropertyBinding\") === \"true\" && draft !== \"undefined\";\n\t\tconst aUpdatableContexts: Context[] = [];\n\t\t// oDynamicActions are bound actions that are available according to some property\n\t\t// in each item\n\t\tconst oDynamicActions: Record<string, unknown> | undefined = {};\n\t\tconst oIBN = {};\n\t\tconst oInternalModelContext = oTable.getBindingContext(\"internal\") as InternalModelContext;\n\n\t\tif (!oInternalModelContext) {\n\t\t\treturn;\n\t\t}\n\t\t//do not consider empty rows as selected context\n\t\taSelectedContexts = aSelectedContexts.filter(function (oContext: Context) {\n\t\t\treturn !oContext.isInactive();\n\t\t});\n\n\t\tconst oModelObject = Object.assign(oInternalModelContext.getObject() || {}, {\n\t\t\tselectedContexts: aSelectedContexts,\n\t\t\tnumberOfSelectedContexts: aSelectedContexts.length,\n\t\t\tdynamicActions: oDynamicActions,\n\t\t\tibn: oIBN,\n\t\t\tdeleteEnabled: true,\n\t\t\tdeletableContexts: aDeletableContexts,\n\t\t\tunSavedContexts: [],\n\t\t\tlockedContexts: [],\n\t\t\tdraftsWithNonDeletableActive: [],\n\t\t\tdraftsWithDeletableActive: [],\n\t\t\tcontrolId: \"\",\n\t\t\tupdatableContexts: aUpdatableContexts,\n\t\t\tsemanticKeyHasDraftIndicator: oInternalModelContext.getProperty(\"semanticKeyHasDraftIndicator\")\n\t\t\t\t? oInternalModelContext.getProperty(\"semanticKeyHasDraftIndicator\")\n\t\t\t\t: undefined\n\t\t});\n\n\t\tfor (const oSelectedContext of aSelectedContexts) {\n\t\t\tconst oContextData = oSelectedContext.getObject();\n\t\t\tfor (const key in oContextData) {\n\t\t\t\tif (key.indexOf(\"#\") === 0) {\n\t\t\t\t\tlet sActionPath: string = key;\n\t\t\t\t\tsActionPath = sActionPath.substring(1, sActionPath.length);\n\t\t\t\t\toModelObject.dynamicActions[sActionPath] = { enabled: true };\n\t\t\t\t\toInternalModelContext.setProperty(\"\", oModelObject);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// The updatable contexts with mass edit depend on the following:\n\t\t\t// 1. Update is dependendent on current entity property (sUpdatablePath).\n\t\t\t// 2. The table is read only and draft enabled(like LR), in this case only active contexts can be mass edited(not draft contexts).\n\t\t\t//    So, update depends on 'IsActiveEntity' value which needs to be checked.\n\t\t\tconst bUpdatableByPath = sUpdatablePath.length === 0 || !!oSelectedContext.getProperty(sUpdatablePath);\n\t\t\tconst bNotDraftInReadOnlyMode = !bReadOnlyDraftEnabled || oContextData.IsActiveEntity;\n\t\t\tif (bUpdatableByPath && bNotDraftInReadOnlyMode) {\n\t\t\t\taUpdatableContexts.push(oSelectedContext);\n\t\t\t}\n\t\t}\n\n\t\tdeleteHelper.updateDeleteInfoForSelectedContexts(oInternalModelContext, aSelectedContexts);\n\n\t\tif (!oTable.data(\"enableAnalytics\")) {\n\t\t\tTableHelper.setIBNEnablement(oInternalModelContext, oNavigationAvailableMap, aSelectedContexts);\n\t\t}\n\n\t\tif (aSelectedContexts.length > 1) {\n\t\t\tthis.disableAction(aActionsMultiselectDisabled, oDynamicActions);\n\t\t}\n\n\t\tif (oModelObject) {\n\t\t\toModelObject[\"updatableContexts\"] = aUpdatableContexts;\n\t\t\toModelObject[\"controlId\"] = oTable.getId();\n\t\t\toInternalModelContext.setProperty(\"\", oModelObject);\n\t\t}\n\n\t\treturn ActionRuntime.setActionEnablement(oInternalModelContext, oActionOperationAvailableMap, aSelectedContexts, \"table\");\n\t},\n\n\tdisableAction: function (aActionsMultiselectDisabled: any, oDynamicActions: any) {\n\t\taActionsMultiselectDisabled.forEach(function (sAction: any) {\n\t\t\toDynamicActions[sAction] = { bEnabled: false };\n\t\t});\n\t},\n\tonFieldChangeInCreationRow: function (oEvent: any, oCustomValidationFunction: any) {\n\t\t// CREATION ROW CASE\n\t\tconst mField = FieldRuntime.getFieldStateOnChange(oEvent),\n\t\t\toSourceField = mField.field,\n\t\t\tsFieldId = oSourceField.getId();\n\n\t\tconst oInternalModelContext = oSourceField.getBindingContext(\"internal\"),\n\t\t\tmFieldValidity = oInternalModelContext.getProperty(\"creationRowFieldValidity\"),\n\t\t\tmNewFieldValidity = Object.assign({}, mFieldValidity);\n\n\t\tmNewFieldValidity[sFieldId] = mField.state;\n\t\toInternalModelContext.setProperty(\"creationRowFieldValidity\", mNewFieldValidity);\n\n\t\t// prepare Custom Validation\n\t\tif (oCustomValidationFunction) {\n\t\t\tconst mCustomValidity = oInternalModelContext.getProperty(\"creationRowCustomValidity\"),\n\t\t\t\tmNewCustomValidity = Object.assign({}, mCustomValidity);\n\t\t\tmNewCustomValidity[oSourceField.getBinding(\"value\").getPath()] = {\n\t\t\t\tfieldId: oSourceField.getId()\n\t\t\t};\n\t\t\toInternalModelContext.setProperty(\"creationRowCustomValidity\", mNewCustomValidity);\n\t\t\t// Remove existing CustomValidation message\n\t\t\tconst oMessageManager = sap.ui.getCore().getMessageManager();\n\t\t\tconst sTarget = `${oSourceField.getBindingContext().getPath()}/${oSourceField.getBindingPath(\"value\")}`;\n\t\t\toMessageManager\n\t\t\t\t.getMessageModel()\n\t\t\t\t.getData()\n\t\t\t\t.forEach(function (oMessage: any) {\n\t\t\t\t\tif (oMessage.target === sTarget) {\n\t\t\t\t\t\toMessageManager.removeMessages(oMessage);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t},\n\tonTreeTableContextChanged: function (table: Table, initialExpansionLevel?: number) {\n\t\t// When the context of a TreeTable changes, we want to restore its expansion state to the default:\n\t\t//   - all expanded if there's a search parameter coming from the filterBar\n\t\t//   - otherwise initial expansion state coming from the PV (stored in the payload)\n\t\t//   - otherwise no expansion at all\n\n\t\tconst rowBinding = table.getRowBinding() as ODataListBinding;\n\t\tif (!rowBinding.getContext()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst aggregation = (rowBinding as any).getAggregation() ?? {};\n\t\tconst filterInfo = TableUtils.getAllFilterInfo(table);\n\t\taggregation.expandTo = filterInfo.search ? 100 : initialExpansionLevel;\n\t\trowBinding.setAggregation(aggregation);\n\t}\n};\n\nexport default TableRuntime;\n"],"mappings":"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"}},{"offset":{"line":32058,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","ActionRuntime","CommonUtils","BusyLocker","deleteHelper","FELibrary","FieldRuntime","TableHelper","TableUtils","CreationMode","TableRuntime","displayTableSettings","oEvent","oParent","getSource","getParent","oSettingsButton","getCore","byId","getId","fireButtonPress","executeConditionalActionShortcut","sButtonMatcher","oSource","oMdcTable","CreationRow","oButton","getActions","reduce","aActionButtons","oActionToolbarAction","concat","getAction","find","oActionButton","endsWith","oCreationRow","getAggregation","getApplyEnabled","getVisible","fireApply","setContexts","oTable","sDeletablePath","draft","sCollection","sNavigationAvailableMap","sActionsMultiselectDisabled","sUpdatablePath","lock","setContextsAsync","then","info","catch","error","finally","unlock","async","aActionsMultiselectDisabled","split","oActionOperationAvailableMap","JSON","parse","oNavigationAvailableMap","aSelectedContexts","getSelectedContexts","aDeletableContexts","bReadOnlyDraftEnabled","data","aUpdatableContexts","oDynamicActions","oIBN","oInternalModelContext","getBindingContext","filter","oContext","isInactive","oModelObject","Object","assign","getObject","selectedContexts","numberOfSelectedContexts","length","dynamicActions","ibn","deleteEnabled","deletableContexts","unSavedContexts","lockedContexts","draftsWithNonDeletableActive","draftsWithDeletableActive","controlId","updatableContexts","semanticKeyHasDraftIndicator","getProperty","undefined","oSelectedContext","oContextData","key","indexOf","sActionPath","substring","enabled","setProperty","bUpdatableByPath","bNotDraftInReadOnlyMode","IsActiveEntity","push","updateDeleteInfoForSelectedContexts","setIBNEnablement","this","disableAction","setActionEnablement","forEach","sAction","bEnabled","onFieldChangeInCreationRow","oCustomValidationFunction","mField","getFieldStateOnChange","oSourceField","field","sFieldId","mFieldValidity","mNewFieldValidity","state","mCustomValidity","mNewCustomValidity","getBinding","getPath","fieldId","oMessageManager","getMessageManager","sTarget","getBindingPath","getMessageModel","getData","oMessage","target","removeMessages","onTreeTableContextChanged","table","initialExpansionLevel","rowBinding","getRowBinding","getContext","aggregation","filterInfo","getAllFilterInfo","expandTo","search","setAggregation"],"sources":["TableRuntime-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":32063,"column":0},"map":{"version":3,"names":["TableSizeHelper","getMDCColumnWidthFromDataField","dataField","properties","convertedMetaData","includeLabel","property","find","prop","metadataPath","resolvePath","target","fullyQualifiedName","getMDCColumnWidthFromProperty","mWidthCalculation","Object","assign","gap","truncateLabel","excludeProperties","visualSettings","widthCalculation","types","propertyInfos","length","map","propName","_property","name","typeConfig","typeInstance","filter","item","sSize","TableUtil","calcColumnWidth","label","Log","error","parseFloat","replace","getWidthForDataFieldForAnnotation","showDataFieldsLabel","oTargetedProperty","Target","$target","nPropertyWidth","fLabelWidth","Visualization","nbStars","TargetValue","parseInt","sLabel","Label","SizeHelper","getButtonWidth","$Type","fn","labelWidth","propertyWidth","getWidthForDataField","Value","oTextArrangementTarget","annotations","Common","Text","displayMode","getDisplayMode"],"sourceRoot":"table","sources":["TableSizeHelper.ts"],"sourcesContent":["import { ConvertedMetadata } from \"@sap-ux/vocabularies-types/Edm\";\nimport { CommunicationAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Communication\";\nimport { DataField, DataFieldForAnnotation } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport SizeHelper from \"sap/fe/core/helpers/SizeHelper\";\nimport { getDisplayMode } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport TableUtil from \"sap/m/table/Util\";\nimport { PropertyInfo } from \"../DelegateUtil\";\n\nconst TableSizeHelper = {\n\t/**\n\t * Method to calculate the width of the MDCColumn.\n\t *\n\t * @param dataField The Property or PropertyInfo Object for which the width will be calculated.\n\t * @param properties An array containing all property definitions (optional)\n\t * @param convertedMetaData\n\t * @param includeLabel Indicates if the label should be part of the width calculation\n\t * @private\n\t * @alias sap.fe.macros.TableSizeHelper\n\t * @returns The width of the column.\n\t */\n\tgetMDCColumnWidthFromDataField: function (\n\t\tdataField: DataField,\n\t\tproperties: PropertyInfo[],\n\t\tconvertedMetaData: ConvertedMetadata,\n\t\tincludeLabel = false\n\t): number {\n\t\tconst property = properties.find(\n\t\t\t(prop) =>\n\t\t\t\tprop.metadataPath &&\n\t\t\t\t(convertedMetaData.resolvePath(prop.metadataPath) as any)?.target?.fullyQualifiedName === dataField.fullyQualifiedName\n\t\t);\n\t\treturn property ? this.getMDCColumnWidthFromProperty(property, properties, includeLabel) : 0;\n\t},\n\n\tgetMDCColumnWidthFromProperty: function (property: PropertyInfo, properties: PropertyInfo[], includeLabel = false): number {\n\t\tconst mWidthCalculation = Object.assign(\n\t\t\t{\n\t\t\t\tgap: 0,\n\t\t\t\ttruncateLabel: !includeLabel,\n\t\t\t\texcludeProperties: []\n\t\t\t},\n\t\t\tproperty.visualSettings?.widthCalculation\n\t\t);\n\n\t\tlet types;\n\n\t\tif (property.propertyInfos?.length) {\n\t\t\ttypes = property.propertyInfos\n\t\t\t\t.map((propName) => {\n\t\t\t\t\tconst prop = properties.find((_property) => _property.name === propName);\n\t\t\t\t\treturn prop?.typeConfig?.typeInstance;\n\t\t\t\t})\n\t\t\t\t.filter((item) => item);\n\t\t} else if (property?.typeConfig?.typeInstance) {\n\t\t\ttypes = [property?.typeConfig.typeInstance];\n\t\t}\n\t\tconst sSize = types ? TableUtil.calcColumnWidth(types, property.label, mWidthCalculation) : null;\n\t\tif (!sSize) {\n\t\t\tLog.error(`Cannot compute the column width for property: ${property.name}`);\n\t\t}\n\t\treturn sSize ? parseFloat(sSize.replace(\"Rem\", \"\")) : 0;\n\t},\n\n\t/**\n\t * Method to calculate the  width of a DataFieldAnnotation object contained in a fieldGroup.\n\t *\n\t * @param dataField DataFieldAnnotation object.\n\t * @param properties Array containing all PropertyInfo objects.\n\t * @param convertedMetaData\n\t * @param showDataFieldsLabel Label is displayed inside the field\n\t * @private\n\t * @alias sap.fe.macros.TableSizeHelper\n\t * @returns Object containing the width of the label and the width of the property.\n\t */\n\tgetWidthForDataFieldForAnnotation: function (\n\t\tdataField: DataFieldForAnnotation,\n\t\tproperties?: PropertyInfo[],\n\t\tconvertedMetaData?: ConvertedMetadata,\n\t\tshowDataFieldsLabel = false\n\t) {\n\t\tconst oTargetedProperty = dataField?.Target?.$target as any;\n\t\tlet nPropertyWidth = 0,\n\t\t\tfLabelWidth = 0;\n\t\tif (oTargetedProperty?.Visualization) {\n\t\t\tswitch (oTargetedProperty.Visualization) {\n\t\t\t\tcase \"UI.VisualizationType/Rating\":\n\t\t\t\t\tconst nbStars = oTargetedProperty.TargetValue;\n\t\t\t\t\tnPropertyWidth = parseInt(nbStars, 10) * 1.375;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"UI.VisualizationType/Progress\":\n\t\t\t\tdefault:\n\t\t\t\t\tnPropertyWidth = 5;\n\t\t\t}\n\t\t\tconst sLabel = oTargetedProperty ? oTargetedProperty.label : dataField.Label || \"\";\n\t\t\tfLabelWidth = showDataFieldsLabel && sLabel ? SizeHelper.getButtonWidth(sLabel) : 0;\n\t\t} else if (convertedMetaData && properties && oTargetedProperty?.$Type === CommunicationAnnotationTypes.ContactType) {\n\t\t\tnPropertyWidth = this.getMDCColumnWidthFromDataField(oTargetedProperty.fn.$target, properties, convertedMetaData, false);\n\t\t}\n\t\treturn { labelWidth: fLabelWidth, propertyWidth: nPropertyWidth };\n\t},\n\n\t/**\n\t * Method to calculate the width of a DataField object.\n\t *\n\t * @param dataField DataFieldAnnotation object.\n\t * @param showDataFieldsLabel Label is displayed inside the field.\n\t * @param properties Array containing all PropertyInfo objects.\n\t * @param convertedMetaData Context Object of the parent property.\n\t * @private\n\t * @alias sap.fe.macros.TableSizeHelper\n\t * @returns {object} Object containing the width of the label and the width of the property.\n\t */\n\n\tgetWidthForDataField: function (\n\t\tdataField: DataField,\n\t\tshowDataFieldsLabel: boolean,\n\t\tproperties: PropertyInfo[],\n\t\tconvertedMetaData: ConvertedMetadata\n\t) {\n\t\tconst oTargetedProperty = dataField.Value?.$target,\n\t\t\toTextArrangementTarget = oTargetedProperty?.annotations?.Common?.Text,\n\t\t\tdisplayMode = getDisplayMode(dataField.Value?.$target);\n\n\t\tlet nPropertyWidth = 0,\n\t\t\tfLabelWidth = 0;\n\t\tif (oTargetedProperty) {\n\t\t\tswitch (displayMode) {\n\t\t\t\tcase \"Description\":\n\t\t\t\t\tnPropertyWidth =\n\t\t\t\t\t\tthis.getMDCColumnWidthFromDataField(oTextArrangementTarget.$target, properties, convertedMetaData, false) - 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"DescriptionValue\":\n\t\t\t\tcase \"ValueDescription\":\n\t\t\t\tcase \"Value\":\n\t\t\t\tdefault:\n\t\t\t\t\tnPropertyWidth = this.getMDCColumnWidthFromDataField(oTargetedProperty, properties, convertedMetaData, false) - 1;\n\t\t\t}\n\t\t\tconst sLabel = dataField.Label ? dataField.Label : oTargetedProperty.label;\n\t\t\tfLabelWidth = showDataFieldsLabel && sLabel ? SizeHelper.getButtonWidth(sLabel) : 0;\n\t\t} else {\n\t\t\tLog.error(`Cannot compute width for type object: ${dataField.$Type}`);\n\t\t}\n\t\treturn { labelWidth: fLabelWidth, propertyWidth: nPropertyWidth };\n\t}\n};\n\nexport default TableSizeHelper;\n"],"mappings":"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"}},{"offset":{"line":32195,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","SizeHelper","DisplayModeFormatter","TableUtil","getDisplayMode","TableSizeHelper","getMDCColumnWidthFromDataField","dataField","properties","convertedMetaData","includeLabel","arguments","length","undefined","property","find","prop","_convertedMetaData$re","_convertedMetaData$re2","metadataPath","resolvePath","target","fullyQualifiedName","this","getMDCColumnWidthFromProperty","_property$visualSetti","_property$propertyInf","_property$typeConfig","mWidthCalculation","Object","assign","gap","truncateLabel","excludeProperties","visualSettings","widthCalculation","types","propertyInfos","map","propName","_prop$typeConfig","_property","name","typeConfig","typeInstance","filter","item","sSize","calcColumnWidth","label","error","parseFloat","replace","getWidthForDataFieldForAnnotation","_dataField$Target","showDataFieldsLabel","oTargetedProperty","Target","$target","nPropertyWidth","fLabelWidth","Visualization","nbStars","TargetValue","parseInt","sLabel","Label","getButtonWidth","$Type","fn","labelWidth","propertyWidth","getWidthForDataField","_dataField$Value","_oTargetedProperty$an","_oTargetedProperty$an2","_dataField$Value2","Value","oTextArrangementTarget","annotations","Common","Text","displayMode"],"sources":["TableSizeHelper-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":32200,"column":0},"map":{"version":3,"names":["getHiddenFilters","oTable","aFilters","hiddenFilters","data","Array","isArray","paths","forEach","mPath","oSvFilter","CommonUtils","getFiltersInfoForSV","annotationPath","concat","filters","getExternalFilters","table","quickFilter","getQuickFilter","quickFilterKey","getSelectedKey","getItems","getKey","getListBindingForCount","oPageBinding","oParams","countBinding","oBindingInfo","oDataModel","getModel","sBatchId","batchGroupId","oFilterInfo","getFilterInfo","additionalFilters","sBindingPath","bindingPath","path","getP13nFilters","oTableContextFilter","Filter","and","oListBinding","bindList","getPath","getBindingContext","fetchFilter","getContext","then","aStringFilters","bindProperty","$$groupId","$filter","$search","search","requestValue","iValue","destroy","getCountFormatted","iCount","oCountFormatter","NumberFormat","getIntegerInstance","groupingEnabled","format","oTableDefinition","getParent","getTableDefinition","aIgnoreProperties","_getRelativePathArrayFromAggregates","oSubTable","mAggregates","aggregates","Object","keys","map","sAggregateName","relativePath","enableAnalytics","enableBasicSearch","FilterUtils","getFilter","ignoredProperties","targetControl","oControl","aP13nMode","getP13nMode","indexOf","aP13nProperties","DelegateUtil","getCustomData","filter","oControlProperty","filterable","propertiesMetadata","getAllFilterInfo","oIFilterInfo","tableUtils","whenBound","_getOrCreateBoundPromiseInfo","promise","onTableBound","oBoundPromiseInfo","resolve","fnResolve","Promise","isBound","fnGetSemanticTargetsFromTable","oController","oView","getView","oInternalModelContext","sEntitySet","oComponent","getOwnerComponent","oAppComponent","Component","getOwnerComponentFor","oMetaModel","getMetaModel","oShellServiceHelper","getShellServices","sCurrentHash","FieldRuntime","_fnFixHashQueryString","getHash","oColumns","columns","aSemanticObjectsForGetLinks","aSemanticObjects","aPathAlreadyProcessed","sPath","sAnnotationPath","oProperty","_oSemanticObject","aSemanticObjectsPromises","sQualifier","regexResult","i","length","getObject","$kind","$Type","_Keys","index","includes","exec","push","getSemanticObjectPromise","all","aValues","aGetLinksPromises","sSemObjExpression","aSemanticObjectsResolved","element","semanticObject","compileExpression","pathInModel","$Path","semanticObjectForGetLinks","undefined","j","unavailableActions","semanticObjectPath","getLinksWithCache","updateSemanticTargets","catch","oError","Log","error","clearSelection","setProperty","getSemanticTargetsFromTable"],"sourceRoot":"table","sources":["Utils.ts"],"sourcesContent":["import { CommonAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport Log from \"sap/base/Log\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { compileExpression, pathInModel } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport FieldRuntime from \"sap/fe/macros/field/FieldRuntime\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport type SegmentedButton from \"sap/m/SegmentedButton\";\nimport type Select from \"sap/m/Select\";\nimport Component from \"sap/ui/core/Component\";\nimport type Control from \"sap/ui/core/Control\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport type MDCChart from \"sap/ui/mdc/Chart\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\nfunction getHiddenFilters(oTable: Control) {\n\tlet aFilters: any[] = [];\n\tconst hiddenFilters = oTable.data(\"hiddenFilters\");\n\tif (hiddenFilters && Array.isArray(hiddenFilters.paths)) {\n\t\thiddenFilters.paths.forEach(function (mPath: any) {\n\t\t\tconst oSvFilter = CommonUtils.getFiltersInfoForSV(oTable, mPath.annotationPath);\n\t\t\taFilters = aFilters.concat(oSvFilter.filters);\n\t\t});\n\t}\n\treturn aFilters;\n}\n\n/**\n * Retrieves the external filters configured on the table.\n *\n * @param table The table\n * @returns  The filters\n */\nfunction getExternalFilters(table: Table) {\n\tlet filters: Filter[] = getHiddenFilters(table);\n\tconst quickFilter = table.getQuickFilter() as SegmentedButton | Select | undefined;\n\tif (quickFilter) {\n\t\tconst quickFilterKey = quickFilter.getSelectedKey() || quickFilter.getItems()[0].getKey();\n\t\tfilters = filters.concat(CommonUtils.getFiltersInfoForSV(table, quickFilterKey).filters);\n\t}\n\treturn filters;\n}\nfunction getListBindingForCount(oTable: Table, oPageBinding: any, oParams: any) {\n\tlet countBinding!: any;\n\tconst oBindingInfo = oTable.data(\"rowsBindingInfo\"),\n\t\toDataModel = oTable.getModel() as ODataModel;\n\tconst sBatchId = oParams.batchGroupId || \"\",\n\t\toFilterInfo = getFilterInfo(oTable);\n\tlet aFilters = Array.isArray(oParams.additionalFilters) ? oParams.additionalFilters : [];\n\tconst sBindingPath = oFilterInfo.bindingPath ? oFilterInfo.bindingPath : oBindingInfo.path;\n\n\taFilters = aFilters.concat(oFilterInfo.filters).concat(getP13nFilters(oTable));\n\tconst oTableContextFilter = new Filter({\n\t\tfilters: aFilters,\n\t\tand: true\n\t});\n\n\t// Need to pass by a temporary ListBinding in order to get $filter query option (as string) thanks to fetchFilter of OdataListBinding\n\tconst oListBinding = oDataModel.bindList(\n\t\t(oPageBinding ? `${oPageBinding.getPath()}/` : \"\") + sBindingPath,\n\t\toTable.getBindingContext() as Context,\n\t\t[],\n\t\toTableContextFilter\n\t);\n\n\treturn (oListBinding as any)\n\t\t.fetchFilter(oListBinding.getContext())\n\t\t.then(function (aStringFilters: string[]) {\n\t\t\tcountBinding = oDataModel.bindProperty(`${oListBinding.getPath()}/$count`, oListBinding.getContext(), {\n\t\t\t\t$$groupId: sBatchId || \"$auto\",\n\t\t\t\t$filter: aStringFilters[0],\n\t\t\t\t$search: oFilterInfo.search\n\t\t\t});\n\t\t\treturn countBinding.requestValue();\n\t\t})\n\t\t.then(function (iValue: any) {\n\t\t\tcountBinding.destroy();\n\t\t\toListBinding.destroy();\n\t\t\treturn iValue;\n\t\t});\n}\nfunction getCountFormatted(iCount: any) {\n\tconst oCountFormatter = NumberFormat.getIntegerInstance({ groupingEnabled: true });\n\treturn oCountFormatter.format(iCount);\n}\nfunction getFilterInfo(oTable: any) {\n\tconst oTableDefinition = oTable.getParent().getTableDefinition();\n\tlet aIgnoreProperties: any[] = [];\n\n\tfunction _getRelativePathArrayFromAggregates(oSubTable: Table) {\n\t\tconst mAggregates = (oSubTable.getParent() as TableAPI).getTableDefinition().aggregates as any;\n\t\treturn Object.keys(mAggregates).map(function (sAggregateName) {\n\t\t\treturn mAggregates[sAggregateName].relativePath;\n\t\t});\n\t}\n\n\tif (oTableDefinition.enableAnalytics) {\n\t\taIgnoreProperties = aIgnoreProperties.concat(_getRelativePathArrayFromAggregates(oTable));\n\n\t\tif (!oTableDefinition.enableBasicSearch) {\n\t\t\t// Search isn't allow as a $apply transformation for this table\n\t\t\taIgnoreProperties = aIgnoreProperties.concat([\"search\"]);\n\t\t}\n\t}\n\treturn FilterUtils.getFilterInfo(oTable.getFilter(), {\n\t\tignoredProperties: aIgnoreProperties,\n\t\ttargetControl: oTable\n\t});\n}\n\n/**\n * Retrieves all filters configured in the personalization dialog of the table or chart.\n *\n * @param oControl Table or Chart instance\n * @returns Filters configured in the personalization dialog of the table or chart\n * @private\n * @ui5-restricted\n */\nfunction getP13nFilters(oControl: Table | MDCChart) {\n\tconst aP13nMode = oControl.getP13nMode();\n\tif (aP13nMode && aP13nMode.indexOf(\"Filter\") > -1) {\n\t\tconst aP13nProperties = (DelegateUtil.getCustomData(oControl, \"sap_fe_ControlDelegate_propertyInfoMap\") || []).filter(function (\n\t\t\t\toControlProperty: any\n\t\t\t) {\n\t\t\t\treturn oControlProperty && !(oControlProperty.filterable === false);\n\t\t\t}),\n\t\t\toFilterInfo = FilterUtils.getFilterInfo(oControl, { propertiesMetadata: aP13nProperties });\n\t\tif (oFilterInfo && oFilterInfo.filters) {\n\t\t\treturn oFilterInfo.filters;\n\t\t}\n\t}\n\treturn [];\n}\n\nfunction getAllFilterInfo(oTable: Table) {\n\tconst oIFilterInfo = tableUtils.getFilterInfo(oTable);\n\treturn {\n\t\tfilters: oIFilterInfo.filters.concat(getExternalFilters(oTable), tableUtils.getP13nFilters(oTable)),\n\t\tsearch: oIFilterInfo.search,\n\t\tbindingPath: oIFilterInfo.bindingPath\n\t};\n}\n\n/**\n * Returns a promise that is resolved with the table itself when the table was bound.\n *\n * @param oTable The table to check for binding\n * @returns A Promise that will be resolved when table is bound\n */\nfunction whenBound(oTable: Table) {\n\treturn _getOrCreateBoundPromiseInfo(oTable).promise;\n}\n\n/**\n * If not yet happened, it resolves the table bound promise.\n *\n * @param oTable The table that was bound\n */\nfunction onTableBound(oTable: Table) {\n\tconst oBoundPromiseInfo = _getOrCreateBoundPromiseInfo(oTable);\n\tif (oBoundPromiseInfo.resolve) {\n\t\toBoundPromiseInfo.resolve(oTable);\n\t\toTable.data(\"boundPromiseResolve\", null);\n\t}\n}\n\nfunction _getOrCreateBoundPromiseInfo(oTable: Table) {\n\tif (!oTable.data(\"boundPromise\")) {\n\t\tlet fnResolve: any;\n\t\toTable.data(\n\t\t\t\"boundPromise\",\n\t\t\tnew Promise(function (resolve) {\n\t\t\t\tfnResolve = resolve;\n\t\t\t})\n\t\t);\n\t\tif ((oTable as any).isBound()) {\n\t\t\tfnResolve(oTable);\n\t\t} else {\n\t\t\toTable.data(\"boundPromiseResolve\", fnResolve);\n\t\t}\n\t}\n\treturn { promise: oTable.data(\"boundPromise\"), resolve: oTable.data(\"boundPromiseResolve\") };\n}\n\nfunction fnGetSemanticTargetsFromTable(oController: PageController, oTable: Table) {\n\tconst oView = oController.getView();\n\tconst oInternalModelContext = oView.getBindingContext(\"internal\") as InternalModelContext;\n\tif (oInternalModelContext) {\n\t\tconst sEntitySet = DelegateUtil.getCustomData(oTable, \"targetCollectionPath\");\n\t\tif (sEntitySet) {\n\t\t\tconst oComponent = oController.getOwnerComponent();\n\t\t\tconst oAppComponent = Component.getOwnerComponentFor(oComponent) as AppComponent;\n\t\t\tconst oMetaModel = oAppComponent.getMetaModel();\n\t\t\tconst oShellServiceHelper = oAppComponent.getShellServices();\n\t\t\tconst sCurrentHash = FieldRuntime._fnFixHashQueryString(oShellServiceHelper.getHash());\n\t\t\tconst oColumns = (oTable.getParent() as TableAPI).getTableDefinition().columns;\n\t\t\tconst aSemanticObjectsForGetLinks = [];\n\t\t\tconst aSemanticObjects: any[] = [];\n\t\t\tconst aPathAlreadyProcessed: string[] = [];\n\t\t\tlet sPath: string = \"\",\n\t\t\t\tsAnnotationPath,\n\t\t\t\toProperty;\n\t\t\tlet _oSemanticObject;\n\t\t\tconst aSemanticObjectsPromises: Promise<any>[] = [];\n\t\t\tlet sQualifier: string, regexResult;\n\n\t\t\tfor (let i = 0; i < oColumns.length; i++) {\n\t\t\t\tsAnnotationPath = (oColumns[i] as any).annotationPath;\n\t\t\t\t//this check is required in cases where custom columns are configured via manifest where there is no provision for an annotation path.\n\t\t\t\tif (sAnnotationPath) {\n\t\t\t\t\toProperty = oMetaModel.getObject(sAnnotationPath);\n\t\t\t\t\tif (oProperty && oProperty.$kind === \"Property\") {\n\t\t\t\t\t\tsPath = (oColumns[i] as any).annotationPath;\n\t\t\t\t\t} else if (oProperty && oProperty.$Type === \"com.sap.vocabularies.UI.v1.DataField\") {\n\t\t\t\t\t\tsPath = `${sEntitySet}/${oMetaModel.getObject(`${sAnnotationPath}/Value/$Path`)}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (sPath !== \"\") {\n\t\t\t\t\tconst _Keys = Object.keys(oMetaModel.getObject(sPath + \"@\"));\n\t\t\t\t\tfor (let index = 0; index < _Keys.length; index++) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!aPathAlreadyProcessed.includes(sPath) &&\n\t\t\t\t\t\t\t_Keys[index].indexOf(`@${CommonAnnotationTerms.SemanticObject}`) === 0 &&\n\t\t\t\t\t\t\t_Keys[index].indexOf(`@${CommonAnnotationTerms.SemanticObjectMapping}`) === -1 &&\n\t\t\t\t\t\t\t_Keys[index].indexOf(`@${CommonAnnotationTerms.SemanticObjectUnavailableActions}`) === -1\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tregexResult = /#(.*)/.exec(_Keys[index]);\n\t\t\t\t\t\t\tsQualifier = regexResult ? regexResult[1] : \"\";\n\t\t\t\t\t\t\taSemanticObjectsPromises.push(\n\t\t\t\t\t\t\t\tCommonUtils.getSemanticObjectPromise(oAppComponent, oView, oMetaModel, sPath, sQualifier)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\taPathAlreadyProcessed.push(sPath);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsPath = \"\";\n\t\t\t}\n\n\t\t\tif (aSemanticObjectsPromises.length === 0) {\n\t\t\t\treturn Promise.resolve();\n\t\t\t} else {\n\t\t\t\tPromise.all(aSemanticObjectsPromises)\n\t\t\t\t\t.then(function (aValues: any[]) {\n\t\t\t\t\t\tconst aGetLinksPromises = [];\n\t\t\t\t\t\tlet sSemObjExpression;\n\t\t\t\t\t\tconst aSemanticObjectsResolved = aValues.filter(function (element: any) {\n\t\t\t\t\t\t\tif (element.semanticObject && typeof element.semanticObject.semanticObject === \"object\") {\n\t\t\t\t\t\t\t\tsSemObjExpression = compileExpression(pathInModel(element.semanticObject.semanticObject.$Path));\n\t\t\t\t\t\t\t\telement.semanticObject.semanticObject = sSemObjExpression;\n\t\t\t\t\t\t\t\telement.semanticObjectForGetLinks[0].semanticObject = sSemObjExpression;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t} else if (element) {\n\t\t\t\t\t\t\t\treturn element.semanticObject !== undefined;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor (let j = 0; j < aSemanticObjectsResolved.length; j++) {\n\t\t\t\t\t\t\t_oSemanticObject = aSemanticObjectsResolved[j];\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t_oSemanticObject &&\n\t\t\t\t\t\t\t\t_oSemanticObject.semanticObject &&\n\t\t\t\t\t\t\t\t!(_oSemanticObject.semanticObject.semanticObject.indexOf(\"{\") === 0)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\taSemanticObjectsForGetLinks.push(_oSemanticObject.semanticObjectForGetLinks);\n\t\t\t\t\t\t\t\taSemanticObjects.push({\n\t\t\t\t\t\t\t\t\tsemanticObject: _oSemanticObject.semanticObject && _oSemanticObject.semanticObject.semanticObject,\n\t\t\t\t\t\t\t\t\tunavailableActions: _oSemanticObject.unavailableActions,\n\t\t\t\t\t\t\t\t\tpath: aSemanticObjectsResolved[j].semanticObjectPath\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\taGetLinksPromises.push(oShellServiceHelper.getLinksWithCache([_oSemanticObject.semanticObjectForGetLinks])); //aSemanticObjectsForGetLinks));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn CommonUtils.updateSemanticTargets(aGetLinksPromises, aSemanticObjects, oInternalModelContext, sCurrentHash);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\t\tLog.error(\"fnGetSemanticTargetsFromTable: Cannot get Semantic Objects\", oError);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\nfunction clearSelection(oTable: any) {\n\toTable.clearSelection();\n\tconst oInternalModelContext = oTable.getBindingContext(\"internal\");\n\tif (oInternalModelContext) {\n\t\toInternalModelContext.setProperty(\"deleteEnabled\", false);\n\t\toInternalModelContext.setProperty(\"numberOfSelectedContexts\", 0);\n\t\toInternalModelContext.setProperty(\"selectedContexts\", []);\n\t\toInternalModelContext.setProperty(\"deletableContexts\", []);\n\t}\n}\n\nconst tableUtils = {\n\tgetCountFormatted: getCountFormatted,\n\tgetHiddenFilters: getHiddenFilters,\n\tgetListBindingForCount: getListBindingForCount,\n\tgetFilterInfo: getFilterInfo,\n\tgetP13nFilters: getP13nFilters,\n\tgetAllFilterInfo: getAllFilterInfo,\n\twhenBound: whenBound,\n\tonTableBound: onTableBound,\n\tgetSemanticTargetsFromTable: fnGetSemanticTargetsFromTable,\n\tclearSelection: clearSelection\n};\n\nexport default tableUtils;\n"],"mappings":"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"}},{"offset":{"line":32472,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","BindingToolkit","DelegateUtil","FieldRuntime","FilterUtils","Component","NumberFormat","Filter","pathInModel","compileExpression","getHiddenFilters","oTable","aFilters","hiddenFilters","data","Array","isArray","paths","forEach","mPath","oSvFilter","getFiltersInfoForSV","annotationPath","concat","filters","getExternalFilters","table","quickFilter","getQuickFilter","quickFilterKey","getSelectedKey","getItems","getKey","getListBindingForCount","oPageBinding","oParams","countBinding","oBindingInfo","oDataModel","getModel","sBatchId","batchGroupId","oFilterInfo","getFilterInfo","additionalFilters","sBindingPath","bindingPath","path","getP13nFilters","oTableContextFilter","and","oListBinding","bindList","getPath","getBindingContext","fetchFilter","getContext","then","aStringFilters","bindProperty","$$groupId","$filter","$search","search","requestValue","iValue","destroy","getCountFormatted","iCount","oCountFormatter","getIntegerInstance","groupingEnabled","format","oTableDefinition","getParent","getTableDefinition","aIgnoreProperties","_getRelativePathArrayFromAggregates","oSubTable","mAggregates","aggregates","Object","keys","map","sAggregateName","relativePath","enableAnalytics","enableBasicSearch","getFilter","ignoredProperties","targetControl","oControl","aP13nMode","getP13nMode","indexOf","aP13nProperties","getCustomData","filter","oControlProperty","filterable","propertiesMetadata","getAllFilterInfo","oIFilterInfo","tableUtils","whenBound","_getOrCreateBoundPromiseInfo","promise","onTableBound","oBoundPromiseInfo","resolve","fnResolve","Promise","isBound","fnGetSemanticTargetsFromTable","oController","oView","getView","oInternalModelContext","sEntitySet","oComponent","getOwnerComponent","oAppComponent","getOwnerComponentFor","oMetaModel","getMetaModel","oShellServiceHelper","getShellServices","sCurrentHash","_fnFixHashQueryString","getHash","oColumns","columns","aSemanticObjectsForGetLinks","aSemanticObjects","aPathAlreadyProcessed","sPath","sAnnotationPath","oProperty","_oSemanticObject","aSemanticObjectsPromises","sQualifier","regexResult","i","length","getObject","$kind","$Type","_Keys","index","includes","exec","push","getSemanticObjectPromise","all","aValues","aGetLinksPromises","sSemObjExpression","aSemanticObjectsResolved","element","semanticObject","$Path","semanticObjectForGetLinks","undefined","j","unavailableActions","semanticObjectPath","getLinksWithCache","updateSemanticTargets","catch","oError","error","clearSelection","setProperty","getSemanticTargetsFromTable"],"sources":["Utils-dbg.js"],"mappings":"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","sourceRoot":"table"}},{"offset":{"line":32477,"column":0},"map":{"version":3,"names":["ALPTableDelegate","Object","assign","TableDelegate","apiVersion","_internalUpdateBindingInfo","table","bindingInfo","filterInfo","chartFilterInfo","tableFilterInfo","chartFilters","deepClone","DelegateUtil","getCustomData","getRowBinding","suspended","view","CommonUtils","getTargetView","mdcChart","getController","getChartControl","chartAPI","getParent","chartSelectionsExist","hasSelections","TableUtils","getAllFilterInfo","tableFilters","filters","ChartUtils","getChartPropertiesWithoutPrefixes","finalFilters","concat","oFilter","length","Filter","and","bindingPath","path","updateBindingInfoWithSearchQuery","rebind","internalModelContext","getBindingContext","templateContentView","getProperty","getPath"],"sourceRoot":"table/delegates","sources":["ALPTableDelegate.ts"],"sourcesContent":["import deepClone from \"sap/base/util/deepClone\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport ChartUtils from \"sap/fe/macros/chart/ChartUtils\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport TableDelegate from \"sap/fe/macros/table/delegates/TableDelegate\";\nimport TableUtils from \"sap/fe/macros/table/Utils\";\nimport type { BasePropertyInfo } from \"sap/ui/base/ManagedObject\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport Filter from \"sap/ui/model/Filter\";\n\n/**\n * Helper class for sap.ui.mdc.Table.\n * <h3><b>Note:</b></h3>\n * The class is experimental and the API/behaviour is not finalised and hence this should not be used for productive usage.\n *\n * @author SAP SE\n * @private\n * @experimental\n * @since 1.69.0\n * @alias sap.fe.macros.ALPTableDelegate\n */\nconst ALPTableDelegate = Object.assign({}, TableDelegate, {\n\tapiVersion: 2,\n\t_internalUpdateBindingInfo: function (table: Table, bindingInfo: BasePropertyInfo) {\n\t\tlet filterInfo;\n\t\tlet chartFilterInfo: any = {},\n\t\t\ttableFilterInfo: any = {};\n\t\tlet chartFilters;\n\n\t\t// We need to deepClone the info we get from the custom data, otherwise some of its subobjects (e.g. parameters) will\n\t\t// be shared with oBindingInfo and modified later (Object.assign only does a shallow clone)\n\t\tObject.assign(bindingInfo, deepClone(DelegateUtil.getCustomData(table, \"rowsBindingInfo\")));\n\t\tif (table.getRowBinding()) {\n\t\t\tbindingInfo.suspended = false;\n\t\t}\n\t\tconst view = CommonUtils.getTargetView(table);\n\t\tconst mdcChart = (view.getController() as any).getChartControl?.();\n\t\tconst chartAPI = mdcChart.getParent();\n\t\tconst chartSelectionsExist = chartAPI.hasSelections();\n\t\ttableFilterInfo = TableUtils.getAllFilterInfo(table);\n\t\tconst tableFilters = tableFilterInfo && tableFilterInfo.filters;\n\t\tfilterInfo = tableFilterInfo;\n\t\tif (chartSelectionsExist) {\n\t\t\tchartFilterInfo = ChartUtils.getAllFilterInfo(mdcChart);\n\t\t\tchartFilters =\n\t\t\t\tchartFilterInfo && chartFilterInfo.filters ? CommonUtils.getChartPropertiesWithoutPrefixes(chartFilterInfo.filters) : null;\n\t\t\tfilterInfo = chartFilterInfo;\n\t\t}\n\t\tconst finalFilters = (tableFilters && chartFilters ? tableFilters.concat(chartFilters) : chartFilters || tableFilters) || [];\n\t\tconst oFilter =\n\t\t\tfinalFilters.length > 0 &&\n\t\t\tnew Filter({\n\t\t\t\tfilters: finalFilters,\n\t\t\t\tand: true\n\t\t\t});\n\n\t\tif (filterInfo.bindingPath) {\n\t\t\t// In case of parameters\n\t\t\tbindingInfo.path = filterInfo.bindingPath;\n\t\t}\n\n\t\t// Prepare binding info with filter/search parameters\n\t\tALPTableDelegate.updateBindingInfoWithSearchQuery(bindingInfo, filterInfo, oFilter);\n\t},\n\trebind: function (table: Table, bindingInfo: any) {\n\t\tconst internalModelContext = table.getBindingContext(\"pageInternal\");\n\t\tconst templateContentView = internalModelContext?.getProperty(`${internalModelContext.getPath()}/alpContentView`);\n\t\tif (templateContentView !== \"Chart\") {\n\t\t\tTableDelegate.rebind(table, bindingInfo);\n\t\t}\n\t}\n});\n\nexport default ALPTableDelegate;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,MAAMA,gBAAgB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,aAAa,EAAE;IACzDC,UAAU,EAAE,CAAC;IACbC,0BAA0B,EAAE,UAAUC,KAAY,EAAEC,WAA6B,EAAE;MAAA;MAClF,IAAIC,UAAU;MACd,IAAIC,eAAoB,GAAG,CAAC,CAAC;QAC5BC,eAAoB,GAAG,CAAC,CAAC;MAC1B,IAAIC,YAAY;;MAEhB;MACA;MACAV,MAAM,CAACC,MAAM,CAACK,WAAW,EAAEK,SAAS,CAACC,YAAY,CAACC,aAAa,CAACR,KAAK,EAAE,iBAAiB,CAAC,CAAC,CAAC;MAC3F,IAAIA,KAAK,CAACS,aAAa,EAAE,EAAE;QAC1BR,WAAW,CAACS,SAAS,GAAG,KAAK;MAC9B;MACA,MAAMC,IAAI,GAAGC,WAAW,CAACC,aAAa,CAACb,KAAK,CAAC;MAC7C,MAAMc,QAAQ,uBAAG,QAACH,IAAI,CAACI,aAAa,EAAE,EAASC,eAAe,qDAA7C,2BAAiD;MAClE,MAAMC,QAAQ,GAAGH,QAAQ,CAACI,SAAS,EAAE;MACrC,MAAMC,oBAAoB,GAAGF,QAAQ,CAACG,aAAa,EAAE;MACrDhB,eAAe,GAAGiB,UAAU,CAACC,gBAAgB,CAACtB,KAAK,CAAC;MACpD,MAAMuB,YAAY,GAAGnB,eAAe,IAAIA,eAAe,CAACoB,OAAO;MAC/DtB,UAAU,GAAGE,eAAe;MAC5B,IAAIe,oBAAoB,EAAE;QACzBhB,eAAe,GAAGsB,UAAU,CAACH,gBAAgB,CAACR,QAAQ,CAAC;QACvDT,YAAY,GACXF,eAAe,IAAIA,eAAe,CAACqB,OAAO,GAAGZ,WAAW,CAACc,iCAAiC,CAACvB,eAAe,CAACqB,OAAO,CAAC,GAAG,IAAI;QAC3HtB,UAAU,GAAGC,eAAe;MAC7B;MACA,MAAMwB,YAAY,GAAG,CAACJ,YAAY,IAAIlB,YAAY,GAAGkB,YAAY,CAACK,MAAM,CAACvB,YAAY,CAAC,GAAGA,YAAY,IAAIkB,YAAY,KAAK,EAAE;MAC5H,MAAMM,OAAO,GACZF,YAAY,CAACG,MAAM,GAAG,CAAC,IACvB,IAAIC,MAAM,CAAC;QACVP,OAAO,EAAEG,YAAY;QACrBK,GAAG,EAAE;MACN,CAAC,CAAC;MAEH,IAAI9B,UAAU,CAAC+B,WAAW,EAAE;QAC3B;QACAhC,WAAW,CAACiC,IAAI,GAAGhC,UAAU,CAAC+B,WAAW;MAC1C;;MAEA;MACAvC,gBAAgB,CAACyC,gCAAgC,CAAClC,WAAW,EAAEC,UAAU,EAAE2B,OAAO,CAAC;IACpF,CAAC;IACDO,MAAM,EAAE,UAAUpC,KAAY,EAAEC,WAAgB,EAAE;MACjD,MAAMoC,oBAAoB,GAAGrC,KAAK,CAACsC,iBAAiB,CAAC,cAAc,CAAC;MACpE,MAAMC,mBAAmB,GAAGF,oBAAoB,aAApBA,oBAAoB,uBAApBA,oBAAoB,CAAEG,WAAW,CAAE,GAAEH,oBAAoB,CAACI,OAAO,EAAG,iBAAgB,CAAC;MACjH,IAAIF,mBAAmB,KAAK,OAAO,EAAE;QACpC1C,aAAa,CAACuC,MAAM,CAACpC,KAAK,EAAEC,WAAW,CAAC;MACzC;IACD;EACD,CAAC,CAAC;EAAC,OAEYP,gBAAgB;AAAA"}},{"offset":{"line":32545,"column":0},"map":{"version":3,"names":["sap","ui","define","deepClone","CommonUtils","ChartUtils","DelegateUtil","TableDelegate","TableUtils","Filter","ALPTableDelegate","Object","assign","apiVersion","_internalUpdateBindingInfo","table","bindingInfo","_getChartControl","_ref","filterInfo","chartFilterInfo","tableFilterInfo","chartFilters","getCustomData","getRowBinding","suspended","view","getTargetView","mdcChart","getController","getChartControl","call","chartAPI","getParent","chartSelectionsExist","hasSelections","getAllFilterInfo","tableFilters","filters","getChartPropertiesWithoutPrefixes","finalFilters","concat","oFilter","length","and","bindingPath","path","updateBindingInfoWithSearchQuery","rebind","internalModelContext","getBindingContext","templateContentView","getProperty","getPath"],"sources":["ALPTableDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,4DAAO,CAAC,0BAA2B,0BAA2B,iCAAkC,6BAA8B,8CAA+C,4BAA6B,uBAAwB,SAAUC,EAAWC,EAAaC,EAAYC,EAAcC,EAAeC,EAAYC,GAC9T,aAaA,MAAMC,EAAmBC,OAAOC,OAAO,CAAC,EAAGL,EAAe,CACxDM,WAAY,EACZC,2BAA4B,SAAUC,EAAOC,GAC3C,IAAIC,EAAkBC,EACtB,IAAIC,EACJ,IAAIC,EAAkB,CAAC,EACrBC,EAAkB,CAAC,EACrB,IAAIC,EAIJX,OAAOC,OAAOI,EAAab,EAAUG,EAAaiB,cAAcR,EAAO,qBACvE,GAAIA,EAAMS,gBAAiB,CACzBR,EAAYS,UAAY,KAC1B,CACA,MAAMC,EAAOtB,EAAYuB,cAAcZ,GACvC,MAAMa,GAAYX,GAAoBC,EAAOQ,EAAKG,iBAAiBC,mBAAqB,MAAQb,SAA0B,OAAS,EAAIA,EAAiBc,KAAKb,GAC7J,MAAMc,EAAWJ,EAASK,YAC1B,MAAMC,EAAuBF,EAASG,gBACtCd,EAAkBb,EAAW4B,iBAAiBrB,GAC9C,MAAMsB,EAAehB,GAAmBA,EAAgBiB,QACxDnB,EAAaE,EACb,GAAIa,EAAsB,CACxBd,EAAkBf,EAAW+B,iBAAiBR,GAC9CN,EAAeF,GAAmBA,EAAgBkB,QAAUlC,EAAYmC,kCAAkCnB,EAAgBkB,SAAW,KACrInB,EAAaC,CACf,CACA,MAAMoB,GAAgBH,GAAgBf,EAAee,EAAaI,OAAOnB,GAAgBA,GAAgBe,IAAiB,GAC1H,MAAMK,EAAUF,EAAaG,OAAS,GAAK,IAAIlC,EAAO,CACpD6B,QAASE,EACTI,IAAK,OAEP,GAAIzB,EAAW0B,YAAa,CAE1B7B,EAAY8B,KAAO3B,EAAW0B,WAChC,CAGAnC,EAAiBqC,iCAAiC/B,EAAaG,EAAYuB,EAC7E,EACAM,OAAQ,SAAUjC,EAAOC,GACvB,MAAMiC,EAAuBlC,EAAMmC,kBAAkB,gBACrD,MAAMC,EAAsBF,IAAyB,MAAQA,SAA8B,OAAS,EAAIA,EAAqBG,YAAY,GAAGH,EAAqBI,4BACjK,GAAIF,IAAwB,QAAS,CACnC5C,EAAcyC,OAAOjC,EAAOC,EAC9B,CACF,IAEF,OAAON,CACT,EAAG","sourceRoot":"table/delegates"}},{"offset":{"line":32550,"column":0},"map":{"version":3,"names":["SEMANTICKEY_HAS_DRAFTINDICATOR","Object","assign","TableDelegateBase","apiVersion","_computeVisualSettingsForFieldGroup","oTable","oProperty","aProperties","name","indexOf","oColumn","getColumns","find","oCol","getDataProperty","bShowDataFieldsLabel","data","oMetaModel","getModel","getMetaModel","involvedDataModelObjects","getInvolvedDataModelObjects","getContext","metadataPath","convertedMetaData","convertedTypes","oDataField","targetObject","oFieldGroup","Target","$target","aFieldWidth","Data","forEach","oData","oDataFieldWidth","$Type","TableSizeHelper","getWidthForDataFieldForAnnotation","getWidthForDataField","labelWidth","propertyWidth","SizeHelper","getButtonWidth","Label","push","nWidest","reduce","acc","value","Math","max","visualSettings","deepExtend","widthCalculation","verticalArrangement","minWidth","ceil","_computeVisualSettingsForPropertyWithValueHelp","table","property","tableAPI","getParent","propertyInfos","metaModel","dataField","getObject","gap","getProperty","_computeVisualSettingsForPropertyWithUnit","oUnit","oUnitText","oTimezoneText","oTableAPI","sUnitText","getReadOnly","_computeLabel","labelMap","label","propertiesWithSameLabel","length","path","includes","additionalLabels","join","_updatePropertyInfo","properties","p13nMode","getP13nMode","sortable","filterable","groupable","undefined","concat","typeConfig","getColumnsFor","getTableDefinition","columns","_getAggregatedPropertyMap","aggregates","fetchExportCapabilities","oCapabilities","XLSX","oModel","DelegateUtil","fetchModel","then","model","aSupportedFormats","aLowerFormats","map","element","toLowerCase","oAnnotation","catch","err","Log","error","_isFilterableNavigationProperty","columnInfo","tableDataModelObjectPath","getCustomData","columnNavigationProperties","annotationPath","navigationProperties","tableTargetEntityIndex","findIndex","prop","targetType","targetEntityType","relativeNavigationProperties","slice","relativePath","isPartOfLineItem","some","isMultipleNavigationProperty","_fetchPropertyInfo","appComponent","sAbsoluteNavigationPath","oNavigationContext","createBindingContext","oTypeConfig","className","isTypeFilterable","TypeUtil","getTypeConfig","formatOptions","constraints","bFilterable","CommonHelper","isPropertyFilterable","isComplexType","bIsAnalyticalTable","aAggregatedPropertyMapUnfilterable","getLocalizedText","propertyInfo","groupLabel","group","tooltip","visible","availability","exportSettings","_setPropertyInfoExportSettings","unit","keys","exportDataPointTargetValue","wrap","_updateAnalyticalPropertyInfoAttributes","extension","technicallyGroupable","key","isKey","isGroupable","textArrangement","descriptionColumn","textProperty","mode","valueProperty","descriptionProperty","text","caseSensitive","additionalLabel","unitText","timezoneText","exportFormat","_getExportFormat","timezoneProperty","format","template","aggregatable","_fetchCustomPropertyInfo","sLabel","header","startsWith","metaModelPath","substring","toString","type","_bColumnHasPropertyWithDraftIndicator","oColumnInfo","hasDraftIndicator","fieldGroupDraftIndicatorPropertyPath","_updateDraftIndicatorModel","_oTable","_oColumnInfo","aVisibleColumns","oInternalBindingContext","getBindingContext","sInternalPath","getPath","index","setProperty","_fetchPropertiesForEntity","sEntityTypePath","oAppComponent","sBindingPath","ModelHelper","getEntitySetPath","aFetchedProperties","oFR","CommonUtils","getFilterRestrictionsByPath","aNonFilterableProps","NonFilterableProperties","Promise","resolve","aColumns","oPropertyInfo","maxConditions","isMultiValue","Error","_getCachedOrFetchPropertiesForEntity","entityTypePath","fetchedProperties","getCachedProperties","subFetchedProperties","setCachedProperties","_setTableNoDataText","oBindingInfo","sNoDataKey","oTableFilterInfo","TableUtils","getAllFilterInfo","suffixResourceKey","substr","_getNoDataTextWithFilters","getQuickFilter","sFilterAssociation","getFilter","test","search","filters","setNoData","getResourceModel","getText","handleTableDataReceived","oInternalModelContext","oBinding","getRowBinding","bDataReceivedAttached","attachDataReceived","aSelectedContexts","getSelectedContexts","oActionOperationAvailableMap","JSON","parse","parseCustomData","ActionRuntime","setActionEnablement","DeleteHelper","updateDeleteInfoForSelectedContexts","setUpEmptyRows","rebind","bIsSuspended","clearSelection","apply","onTableBound","whenBound","oError","fetchProperties","preInit","oFastCreationRow","getCreationRow","setBindingContext","updateBindingInfo","_internalUpdateBindingInfo","TableHelper","enableFastCreationRow","_manageSemanticTargets","oMDCTable","oRowBinding","attachEventOnce","setTimeout","_oView","getTargetView","getSemanticTargetsFromTable","getController","updateBinding","bNeedManualRefresh","sManualUpdatePropertyKey","bPendingManualUpdate","oldFilters","getFilters","deepEqual","getQueryOptionsFromParameters","$search","parameters","getViewData","converterType","fireEvent","requestRefresh","getGroupId","finally","_computeRowBindingInfoFromTemplate","rowBindingInfo","deepClone","$$getKeepAliveContext","collectionPath","internalModel","keptAliveLists","getId","suspended","oFilter","oFilterInfo","Filter","and","bindingPath","oDataStateIndicator","getDataStateIndicator","isFiltering","updateBindingInfoWithSearchQuery","bindingInfo","filterInfo","filter","normalizeSearchTerm","_templateCustomColumnFragment","oView","oModifier","sTableId","oColumnModel","JSONModel","oThis","id","oPreprocessorSettings","bindingContexts","this","column","models","templateControlFragment","view","oItem","destroy","_templateSlotColumnFragment","slotColumnsXML","isXML","slotXML","getElementsByTagName","mdcTableTemplateXML","removeChild","oTemplate","DOMParser","parseFromString","appendChild","firstElementChild","targets","Fragment","load","definition","dataType","ExcelFormat","getExcelDatefromJSDate","getExcelDateTimefromJSDateTime","getExcelTimefromJSTime","_getVHRelevantFields","sMetadataPath","aFields","oDataFieldData","$kind","oValue","iIndex","getNavigationPath","_setDraftIndicatorOnVisibleColumn","aColumnsWithDraftIndicator","sAddVisibleColumnName","sVisibleColumnName","bFoundColumnVisibleWithDraft","sColumnNameWithDraftIndicator","i","j","removeItem","oPropertyInfoName","mPropertyBag","doRemoveItem","modifier","sDataProperty","insertAggregation","isA","_setDraftIndicatorStatus","_getMetaModel","_getGroupId","sRetrievedGroupId","_getDependent","oDependent","sPropertyInfoName","_fnTemplateValueHelp","fnTemplateValueHelp","bValueHelpRequired","bValueHelpExists","_getDisplayMode","bDisplayMode","columnEditMode","displaymode","_insertAggregation","oValueHelp","addItem","sPath","sGroupId","oTableContext","oInfo","oPropertyContext","aVHProperties","oParameters","sValueHelpType","oControl","sFragmentName","requestGroupId","contextPath","message","fnTemplateFragment","oInPropertyInfo","sTableTypeCustomData","sOnChangeCustomData","sCreationModeCustomData","all","aCustomData","oDisplayModes","enableAutoColumnWidth","isOptimizedForSmallDevice","readOnly","tableType","onChange","navigationPropertyPath","collection","creationMode","entitySet","sPropertyName","mParameters","aResults","isValueHelpRequired","doesValueHelpExist","getCurrentPageView","getFilterDelegate","FilterBarDelegate","oParentControl","replace","getTypeUtil","formatGroupHeader","oContext","sProperty","mFormatInfos","oFormatInfo","obj","bExternalFormat","baseType","sValue","ValueFormatter","formatWithBrackets"],"sourceRoot":"table/delegates","sources":["TableDelegate.ts"],"sourcesContent":["import { DataFieldForAnnotation, FieldGroupType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport deepClone from \"sap/base/util/deepClone\";\nimport deepEqual from \"sap/base/util/deepEqual\";\nimport deepExtend from \"sap/base/util/deepExtend\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type {\n\tAnnotationTableColumn,\n\tcolumnExportSettings,\n\tCustomBasedTableColumn,\n\tPropertyTypeConfig,\n\tTableColumn,\n\tTechnicalColumn\n} from \"sap/fe/core/converters/controls/Common/Table\";\nimport type { CustomElement } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport ValueFormatter from \"sap/fe/core/formatters/ValueFormatter\";\nimport DeleteHelper from \"sap/fe/core/helpers/DeleteHelper\";\nimport ExcelFormat from \"sap/fe/core/helpers/ExcelFormatHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { getLocalizedText, getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport SizeHelper from \"sap/fe/core/helpers/SizeHelper\";\nimport { isMultipleNavigationProperty } from \"sap/fe/core/helpers/TypeGuards\";\nimport PageController from \"sap/fe/core/PageController\";\nimport { isTypeFilterable } from \"sap/fe/core/type/EDM\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type { PropertyInfo, tableDelegateModel } from \"sap/fe/macros/DelegateUtil\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport FilterBarDelegate from \"sap/fe/macros/filterBar/FilterBarDelegate\";\nimport TableSizeHelper from \"sap/fe/macros/table/TableSizeHelper\";\nimport TableUtils from \"sap/fe/macros/table/Utils\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport TableDelegateBase from \"sap/ui/mdc/odata/v4/TableDelegate\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport MetaModel from \"sap/ui/model/MetaModel\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type TableAPI from \"../TableAPI\";\nimport TableHelper from \"../TableHelper\";\n\nconst SEMANTICKEY_HAS_DRAFTINDICATOR = \"/semanticKeyHasDraftIndicator\";\n\n/**\n * Helper class for sap.ui.mdc.Table.\n * <h3><b>Note:</b></h3>\n * The class is experimental and the API and the behavior are not finalized. This class is not intended for productive usage.\n *\n * @author SAP SE\n * @private\n * @experimental\n * @since 1.69.0\n * @alias sap.fe.macros.TableDelegate\n */\nexport default Object.assign({}, TableDelegateBase, {\n\tapiVersion: 2,\n\t/**\n\t * This function calculates the width for a FieldGroup column.\n\t * The width of the FieldGroup is the width of the widest property contained in the FieldGroup (including the label if showDataFieldsLabel is true)\n\t * The result of this calculation is stored in the visualSettings.widthCalculation.minWidth property, which is used by the MDCtable.\n\t *\n\t * @param oTable Instance of the MDCtable\n\t * @param oProperty Current property\n\t * @param aProperties Array of properties\n\t * @private\n\t * @alias sap.fe.macros.TableDelegate\n\t */\n\t_computeVisualSettingsForFieldGroup: function (oTable: Table, oProperty: any, aProperties: any[]) {\n\t\tif (oProperty.name.indexOf(\"DataFieldForAnnotation::FieldGroup::\") === 0) {\n\t\t\tconst oColumn = oTable.getColumns().find(function (oCol: any) {\n\t\t\t\treturn oCol.getDataProperty() === oProperty.name;\n\t\t\t});\n\t\t\tconst bShowDataFieldsLabel = oColumn ? oColumn.data(\"showDataFieldsLabel\") === \"true\" : false;\n\t\t\tconst oMetaModel = (oTable.getModel() as ODataModel).getMetaModel();\n\t\t\tconst involvedDataModelObjects = getInvolvedDataModelObjects(oMetaModel.getContext(oProperty.metadataPath));\n\t\t\tconst convertedMetaData = involvedDataModelObjects.convertedTypes;\n\t\t\tconst oDataField = involvedDataModelObjects.targetObject as DataFieldForAnnotation;\n\t\t\tconst oFieldGroup = oDataField.Target.$target as FieldGroupType;\n\t\t\tconst aFieldWidth: any = [];\n\t\t\toFieldGroup.Data.forEach(function (oData: any) {\n\t\t\t\tlet oDataFieldWidth: any;\n\t\t\t\tswitch (oData.$Type) {\n\t\t\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\":\n\t\t\t\t\t\toDataFieldWidth = TableSizeHelper.getWidthForDataFieldForAnnotation(\n\t\t\t\t\t\t\toData,\n\t\t\t\t\t\t\taProperties,\n\t\t\t\t\t\t\tconvertedMetaData,\n\t\t\t\t\t\t\tbShowDataFieldsLabel\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"com.sap.vocabularies.UI.v1.DataField\":\n\t\t\t\t\t\toDataFieldWidth = TableSizeHelper.getWidthForDataField(oData, bShowDataFieldsLabel, aProperties, convertedMetaData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAction\":\n\t\t\t\t\t\toDataFieldWidth = {\n\t\t\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\t\t\tpropertyWidth: SizeHelper.getButtonWidth(oData.Label)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t}\n\t\t\t\tif (oDataFieldWidth) {\n\t\t\t\t\taFieldWidth.push(oDataFieldWidth.labelWidth + oDataFieldWidth.propertyWidth);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst nWidest = aFieldWidth.reduce(function (acc: any, value: any) {\n\t\t\t\treturn Math.max(acc, value);\n\t\t\t}, 0);\n\t\t\toProperty.visualSettings = deepExtend(oProperty.visualSettings, {\n\t\t\t\twidthCalculation: {\n\t\t\t\t\tverticalArrangement: true,\n\t\t\t\t\tminWidth: Math.ceil(nWidest)\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t_computeVisualSettingsForPropertyWithValueHelp: function (table: Table, property: PropertyInfo) {\n\t\tconst tableAPI = table.getParent() as TableAPI;\n\t\tif (!property.propertyInfos) {\n\t\t\tconst metaModel = (table.getModel() as ODataModel).getMetaModel();\n\t\t\tif (property.metadataPath && metaModel) {\n\t\t\t\tconst dataField = metaModel.getObject(`${property.metadataPath}@`);\n\t\t\t\tif (dataField && dataField[\"@com.sap.vocabularies.Common.v1.ValueList\"]) {\n\t\t\t\t\tproperty.visualSettings = deepExtend(property.visualSettings || {}, {\n\t\t\t\t\t\twidthCalculation: {\n\t\t\t\t\t\t\tgap: tableAPI.getProperty(\"readOnly\") ? 0 : 4\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_computeVisualSettingsForPropertyWithUnit: function (\n\t\toTable: any,\n\t\toProperty: any,\n\t\toUnit?: string,\n\t\toUnitText?: string,\n\t\toTimezoneText?: string\n\t) {\n\t\tconst oTableAPI = oTable ? oTable.getParent() : null;\n\t\t// update gap for properties with string unit\n\t\tconst sUnitText = oUnitText || oTimezoneText;\n\t\tif (sUnitText) {\n\t\t\toProperty.visualSettings = deepExtend(oProperty.visualSettings, {\n\t\t\t\twidthCalculation: {\n\t\t\t\t\tgap: Math.ceil(SizeHelper.getButtonWidth(sUnitText))\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (oUnit) {\n\t\t\toProperty.visualSettings = deepExtend(oProperty.visualSettings, {\n\t\t\t\twidthCalculation: {\n\t\t\t\t\t// For properties with unit, a gap needs to be added to properly render the column width on edit mode\n\t\t\t\t\tgap: oTableAPI && oTableAPI.getReadOnly() ? 0 : 6\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t_computeLabel: function (property: PropertyInfo, labelMap: { [label: string]: PropertyInfo[] }) {\n\t\tif (property.label) {\n\t\t\tconst propertiesWithSameLabel = labelMap[property.label];\n\t\t\tif (propertiesWithSameLabel?.length > 1 && property.path?.includes(\"/\") && property.additionalLabels) {\n\t\t\t\tproperty.label = property.label + \" (\" + property.additionalLabels.join(\" / \") + \")\";\n\t\t\t}\n\t\t\tdelete property.additionalLabels;\n\t\t}\n\t},\n\t//Update VisualSetting for columnWidth calculation and labels on navigation properties\n\t_updatePropertyInfo: function (table: Table, properties: PropertyInfo[]) {\n\t\tconst labelMap: { [label: string]: PropertyInfo[] } = {};\n\t\t// Check available p13n modes\n\t\tconst p13nMode = table.getP13nMode();\n\t\tproperties.forEach((property: PropertyInfo) => {\n\t\t\tif (!property.propertyInfos && property.label) {\n\t\t\t\t// Only for non-complex properties\n\t\t\t\tif (\n\t\t\t\t\t(p13nMode?.indexOf(\"Sort\") > -1 && property.sortable) ||\n\t\t\t\t\t(p13nMode?.indexOf(\"Filter\") > -1 && property.filterable) ||\n\t\t\t\t\t(p13nMode?.indexOf(\"Group\") > -1 && property.groupable)\n\t\t\t\t) {\n\t\t\t\t\tlabelMap[property.label] =\n\t\t\t\t\t\tlabelMap[property.label] !== undefined ? labelMap[property.label].concat([property]) : [property];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tproperties.forEach((property: any) => {\n\t\t\tthis._computeVisualSettingsForFieldGroup(table, property, properties);\n\t\t\tthis._computeVisualSettingsForPropertyWithValueHelp(table, property);\n\t\t\t// bcp: 2270003577\n\t\t\t// Some columns (eg: custom columns) have no typeConfig property.\n\t\t\t// initializing it prevents an exception throw\n\t\t\tproperty.typeConfig = deepExtend(property.typeConfig, {});\n\t\t\tthis._computeLabel(property, labelMap);\n\t\t});\n\t\treturn properties;\n\t},\n\n\tgetColumnsFor: function (table: Table): TableColumn[] {\n\t\treturn (table.getParent() as TableAPI).getTableDefinition().columns;\n\t},\n\n\t_getAggregatedPropertyMap: function (oTable: any) {\n\t\treturn oTable.getParent().getTableDefinition().aggregates;\n\t},\n\n\t/**\n\t * Returns the export capabilities for the given sap.ui.mdc.Table instance.\n\t *\n\t * @param oTable Instance of the table\n\t * @returns Promise representing the export capabilities of the table instance\n\t */\n\tfetchExportCapabilities: function (oTable: any) {\n\t\tconst oCapabilities: any = { XLSX: {} };\n\t\tlet oModel!: any;\n\t\treturn DelegateUtil.fetchModel(oTable)\n\t\t\t.then(function (model: any) {\n\t\t\t\toModel = model;\n\t\t\t\treturn oModel.getMetaModel().getObject(\"/$EntityContainer@Org.OData.Capabilities.V1.SupportedFormats\");\n\t\t\t})\n\t\t\t.then(function (aSupportedFormats: string[] | undefined) {\n\t\t\t\tconst aLowerFormats = (aSupportedFormats || []).map((element) => {\n\t\t\t\t\treturn element.toLowerCase();\n\t\t\t\t});\n\t\t\t\tif (aLowerFormats.indexOf(\"application/pdf\") > -1) {\n\t\t\t\t\treturn oModel.getMetaModel().getObject(\"/$EntityContainer@com.sap.vocabularies.PDF.v1.Features\");\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.then(function (oAnnotation: any) {\n\t\t\t\tif (oAnnotation) {\n\t\t\t\t\toCapabilities[\"PDF\"] = Object.assign({}, oAnnotation);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function (err: any) {\n\t\t\t\tLog.error(`An error occurs while computing export capabilities: ${err}`);\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\treturn oCapabilities;\n\t\t\t});\n\t},\n\n\t/**\n\t * Filtering on 1:n navigation properties and navigation\n\t * properties not part of the LineItem annotation is forbidden.\n\t *\n\t * @param columnInfo\n\t * @param metaModel\n\t * @param table\n\t * @returns Boolean true if filtering is allowed, false otherwise\n\t */\n\t_isFilterableNavigationProperty: function (columnInfo: AnnotationTableColumn, metaModel: MetaModel, table: Table): Boolean {\n\t\t// get the DataModelObjectPath for the table\n\t\tconst tableDataModelObjectPath = getInvolvedDataModelObjects(metaModel.getContext(DelegateUtil.getCustomData(table, \"metaPath\"))),\n\t\t\t// get all navigation properties leading to the column\n\t\t\tcolumnNavigationProperties = getInvolvedDataModelObjects(metaModel.getContext(columnInfo.annotationPath)).navigationProperties,\n\t\t\t// we are only interested in navigation properties relative to the table, so all before and including the tables targetType can be filtered\n\t\t\ttableTargetEntityIndex = columnNavigationProperties.findIndex(\n\t\t\t\t(prop) => prop.targetType?.name === tableDataModelObjectPath.targetEntityType.name\n\t\t\t),\n\t\t\trelativeNavigationProperties = columnNavigationProperties.slice(tableTargetEntityIndex > 0 ? tableTargetEntityIndex : 0);\n\t\treturn (\n\t\t\t!columnInfo.relativePath.includes(\"/\") ||\n\t\t\t(columnInfo.isPartOfLineItem === true && !relativeNavigationProperties.some(isMultipleNavigationProperty))\n\t\t);\n\t},\n\n\t_fetchPropertyInfo: function (metaModel: MetaModel, columnInfo: AnnotationTableColumn, table: Table, appComponent: AppComponent) {\n\t\tconst sAbsoluteNavigationPath = columnInfo.annotationPath,\n\t\t\toDataField = metaModel.getObject(sAbsoluteNavigationPath),\n\t\t\toNavigationContext = metaModel.createBindingContext(sAbsoluteNavigationPath) as Context,\n\t\t\toTypeConfig =\n\t\t\t\tcolumnInfo.typeConfig?.className && isTypeFilterable(columnInfo.typeConfig.className)\n\t\t\t\t\t? TypeUtil.getTypeConfig(\n\t\t\t\t\t\t\tcolumnInfo.typeConfig.className,\n\t\t\t\t\t\t\tcolumnInfo.typeConfig.formatOptions,\n\t\t\t\t\t\t\tcolumnInfo.typeConfig.constraints\n\t\t\t\t\t  )\n\t\t\t\t\t: {},\n\t\t\tbFilterable = CommonHelper.isPropertyFilterable(oNavigationContext, oDataField),\n\t\t\tisComplexType =\n\t\t\t\tcolumnInfo.typeConfig && columnInfo.typeConfig.className && columnInfo.typeConfig.className?.indexOf(\"Edm.\") !== 0,\n\t\t\tbIsAnalyticalTable = DelegateUtil.getCustomData(table, \"enableAnalytics\") === \"true\",\n\t\t\taAggregatedPropertyMapUnfilterable = bIsAnalyticalTable ? this._getAggregatedPropertyMap(table) : {},\n\t\t\tlabel = getLocalizedText(columnInfo.label ?? \"\", appComponent ?? table);\n\n\t\tconst propertyInfo: PropertyInfo = {\n\t\t\tname: columnInfo.name,\n\t\t\tmetadataPath: sAbsoluteNavigationPath,\n\t\t\tgroupLabel: columnInfo.groupLabel,\n\t\t\tgroup: columnInfo.group,\n\t\t\tlabel: label,\n\t\t\ttooltip: columnInfo.tooltip,\n\t\t\ttypeConfig: oTypeConfig as PropertyTypeConfig,\n\t\t\tvisible: columnInfo.availability !== \"Hidden\" && !isComplexType,\n\t\t\texportSettings: this._setPropertyInfoExportSettings(columnInfo.exportSettings, columnInfo),\n\t\t\tunit: columnInfo.unit\n\t\t};\n\n\t\t// Set visualSettings only if it exists\n\t\tif (columnInfo.visualSettings && Object.keys(columnInfo.visualSettings).length > 0) {\n\t\t\tpropertyInfo.visualSettings = columnInfo.visualSettings;\n\t\t}\n\n\t\tif (columnInfo.exportDataPointTargetValue) {\n\t\t\tpropertyInfo.exportDataPointTargetValue = columnInfo.exportDataPointTargetValue;\n\t\t}\n\n\t\t// MDC expects  'propertyInfos' only for complex properties.\n\t\t// An empty array throws validation error and undefined value is unhandled.\n\t\tif (columnInfo.propertyInfos?.length) {\n\t\t\tpropertyInfo.propertyInfos = columnInfo.propertyInfos;\n\t\t\t//only in case of complex properties, wrap the cell content\ton the excel exported file\n\t\t\tif (propertyInfo.exportSettings) {\n\t\t\t\tpropertyInfo.exportSettings.wrap = columnInfo.exportSettings?.wrap;\n\t\t\t}\n\t\t} else {\n\t\t\t// Add properties which are supported only by simple PropertyInfos.\n\t\t\tpropertyInfo.path = columnInfo.relativePath;\n\t\t\t// TODO with the new complex property info, a lot of \"Description\" fields are added as filter/sort fields\n\t\t\tpropertyInfo.sortable = columnInfo.sortable;\n\t\t\tif (bIsAnalyticalTable) {\n\t\t\t\tthis._updateAnalyticalPropertyInfoAttributes(propertyInfo, columnInfo);\n\t\t\t}\n\t\t\tpropertyInfo.filterable =\n\t\t\t\t!!bFilterable &&\n\t\t\t\tthis._isFilterableNavigationProperty(columnInfo, metaModel, table) &&\n\t\t\t\t// TODO ignoring all properties that are not also available for adaptation for now, but proper concept required\n\t\t\t\t(!bIsAnalyticalTable ||\n\t\t\t\t\t(!aAggregatedPropertyMapUnfilterable[propertyInfo.name] &&\n\t\t\t\t\t\t!(columnInfo as TechnicalColumn).extension?.technicallyGroupable));\n\t\t\tpropertyInfo.key = columnInfo.isKey;\n\t\t\tpropertyInfo.groupable = columnInfo.isGroupable;\n\t\t\tif (columnInfo.textArrangement) {\n\t\t\t\tconst descriptionColumn = (this.getColumnsFor(table) as AnnotationTableColumn[]).find(function (oCol) {\n\t\t\t\t\treturn oCol.name === columnInfo.textArrangement?.textProperty;\n\t\t\t\t});\n\t\t\t\tif (descriptionColumn) {\n\t\t\t\t\tpropertyInfo.mode = columnInfo.textArrangement.mode;\n\t\t\t\t\tpropertyInfo.valueProperty = columnInfo.relativePath;\n\t\t\t\t\tpropertyInfo.descriptionProperty = descriptionColumn.relativePath;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpropertyInfo.text = columnInfo.textArrangement && columnInfo.textArrangement.textProperty;\n\t\t\tpropertyInfo.caseSensitive = columnInfo.caseSensitive;\n\t\t\tif (columnInfo.additionalLabels) {\n\t\t\t\tpropertyInfo.additionalLabels = columnInfo.additionalLabels.map((additionalLabel: string) => {\n\t\t\t\t\treturn getLocalizedText(additionalLabel, appComponent || table);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis._computeVisualSettingsForPropertyWithUnit(table, propertyInfo, columnInfo.unit, columnInfo.unitText, columnInfo.timezoneText);\n\n\t\treturn propertyInfo;\n\t},\n\n\t/**\n\t * Extend the export settings based on the column info.\n\t *\n\t * @param exportSettings The export settings to be extended\n\t * @param columnInfo The columnInfo object\n\t * @returns The extended export settings\n\t */\n\t_setPropertyInfoExportSettings: function (\n\t\texportSettings: columnExportSettings | undefined | null,\n\t\tcolumnInfo: AnnotationTableColumn\n\t): columnExportSettings | undefined | null {\n\t\tconst exportFormat = this._getExportFormat(columnInfo.typeConfig?.className);\n\t\tif (exportSettings) {\n\t\t\tif (exportFormat && !exportSettings.timezoneProperty) {\n\t\t\t\texportSettings.format = exportFormat;\n\t\t\t}\n\t\t\t// Set the exportSettings template only if it exists.\n\t\t\tif (exportSettings.template) {\n\t\t\t\texportSettings.template = columnInfo.exportSettings?.template;\n\t\t\t}\n\t\t}\n\t\treturn exportSettings;\n\t},\n\n\t_updateAnalyticalPropertyInfoAttributes(propertyInfo: PropertyInfo, columnInfo: AnnotationTableColumn) {\n\t\tif (columnInfo.aggregatable) {\n\t\t\tpropertyInfo.aggregatable = columnInfo.aggregatable;\n\t\t}\n\t\tif (columnInfo.extension) {\n\t\t\tpropertyInfo.extension = columnInfo.extension;\n\t\t}\n\t},\n\n\t_fetchCustomPropertyInfo: function (columnInfo: CustomBasedTableColumn, table: Table, appComponent: AppComponent) {\n\t\tlet sLabel: String = \"\";\n\t\tif (columnInfo.header) {\n\t\t\tif (columnInfo.header.startsWith(\"{metaModel>\")) {\n\t\t\t\tconst metaModelPath = columnInfo.header.substring(11, columnInfo.header.length - 1);\n\t\t\t\tsLabel = (table.getModel() as ODataModel).getMetaModel().getObject(metaModelPath);\n\t\t\t} else {\n\t\t\t\tsLabel = getLocalizedText(columnInfo.header, appComponent || table); // Todo: To be removed once MDC provides translation support\n\t\t\t}\n\t\t}\n\t\tconst propertyInfo: PropertyInfo = {\n\t\t\tname: columnInfo.name,\n\t\t\tgroupLabel: undefined,\n\t\t\tgroup: undefined,\n\t\t\tlabel: sLabel.toString(),\n\t\t\ttype: \"Edm.String\", // TBD\n\t\t\tvisible: columnInfo.availability !== \"Hidden\",\n\t\t\texportSettings: columnInfo.exportSettings,\n\t\t\tvisualSettings: columnInfo.visualSettings\n\t\t};\n\n\t\t// MDC expects 'propertyInfos' only for complex properties.\n\t\t// An empty array throws validation error and undefined value is unhandled.\n\t\tif (columnInfo.propertyInfos && columnInfo.propertyInfos.length) {\n\t\t\tpropertyInfo.propertyInfos = columnInfo.propertyInfos;\n\t\t\t//only in case of complex properties, wrap the cell content on the excel exported file\n\t\t\tpropertyInfo.exportSettings = {\n\t\t\t\twrap: columnInfo.exportSettings?.wrap,\n\t\t\t\ttemplate: columnInfo.exportSettings?.template\n\t\t\t};\n\t\t} else {\n\t\t\t// Add properties which are supported only by simple PropertyInfos.\n\t\t\tpropertyInfo.path = columnInfo.name;\n\t\t\tpropertyInfo.sortable = false;\n\t\t\tpropertyInfo.filterable = false;\n\t\t}\n\t\treturn propertyInfo;\n\t},\n\t_bColumnHasPropertyWithDraftIndicator: function (oColumnInfo: any) {\n\t\treturn !!(\n\t\t\t(oColumnInfo.formatOptions && oColumnInfo.formatOptions.hasDraftIndicator) ||\n\t\t\t(oColumnInfo.formatOptions && oColumnInfo.formatOptions.fieldGroupDraftIndicatorPropertyPath)\n\t\t);\n\t},\n\t_updateDraftIndicatorModel: function (_oTable: any, _oColumnInfo: any) {\n\t\tconst aVisibleColumns = _oTable.getColumns();\n\t\tconst oInternalBindingContext = _oTable.getBindingContext(\"internal\");\n\t\tconst sInternalPath = oInternalBindingContext && oInternalBindingContext.getPath();\n\t\tif (aVisibleColumns && oInternalBindingContext) {\n\t\t\tfor (const index in aVisibleColumns) {\n\t\t\t\tif (\n\t\t\t\t\tthis._bColumnHasPropertyWithDraftIndicator(_oColumnInfo) &&\n\t\t\t\t\t_oColumnInfo.name === aVisibleColumns[index].getDataProperty()\n\t\t\t\t) {\n\t\t\t\t\tif (oInternalBindingContext.getProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR) === undefined) {\n\t\t\t\t\t\toInternalBindingContext.setProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR, _oColumnInfo.name);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_fetchPropertiesForEntity: function (oTable: any, sEntityTypePath: any, oMetaModel: any, oAppComponent: any) {\n\t\t// when fetching properties, this binding context is needed - so lets create it only once and use if for all properties/data-fields/line-items\n\t\tconst sBindingPath = ModelHelper.getEntitySetPath(sEntityTypePath);\n\t\tlet aFetchedProperties: any[] = [];\n\t\tconst oFR = CommonUtils.getFilterRestrictionsByPath(sBindingPath, oMetaModel);\n\t\tconst aNonFilterableProps = oFR.NonFilterableProperties;\n\t\treturn Promise.resolve(this.getColumnsFor(oTable))\n\t\t\t.then((aColumns: TableColumn[]) => {\n\t\t\t\t// DraftAdministrativeData does not work via 'entitySet/$NavigationPropertyBinding/DraftAdministrativeData'\n\t\t\t\tif (aColumns) {\n\t\t\t\t\tlet oPropertyInfo;\n\t\t\t\t\taColumns.forEach((oColumnInfo) => {\n\t\t\t\t\t\tthis._updateDraftIndicatorModel(oTable, oColumnInfo);\n\t\t\t\t\t\tswitch (oColumnInfo.type) {\n\t\t\t\t\t\t\tcase \"Annotation\":\n\t\t\t\t\t\t\t\toPropertyInfo = this._fetchPropertyInfo(\n\t\t\t\t\t\t\t\t\toMetaModel,\n\t\t\t\t\t\t\t\t\toColumnInfo as AnnotationTableColumn,\n\t\t\t\t\t\t\t\t\toTable,\n\t\t\t\t\t\t\t\t\toAppComponent\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (oPropertyInfo && aNonFilterableProps.indexOf(oPropertyInfo.name) === -1) {\n\t\t\t\t\t\t\t\t\toPropertyInfo.maxConditions = DelegateUtil.isMultiValue(oPropertyInfo) ? -1 : 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Slot\":\n\t\t\t\t\t\t\tcase \"Default\":\n\t\t\t\t\t\t\t\toPropertyInfo = this._fetchCustomPropertyInfo(oColumnInfo as CustomBasedTableColumn, oTable, oAppComponent);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tthrow new Error(`unhandled switch case ${oColumnInfo.type}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\taFetchedProperties.push(oPropertyInfo);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\taFetchedProperties = this._updatePropertyInfo(oTable, aFetchedProperties);\n\t\t\t})\n\t\t\t.catch(function (err: any) {\n\t\t\t\tLog.error(`An error occurs while updating fetched properties: ${err}`);\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\treturn aFetchedProperties;\n\t\t\t});\n\t},\n\n\t_getCachedOrFetchPropertiesForEntity: function (table: Table, entityTypePath: string, metaModel: any, appComponent?: AppComponent) {\n\t\tconst fetchedProperties = DelegateUtil.getCachedProperties(table);\n\n\t\tif (fetchedProperties) {\n\t\t\treturn Promise.resolve(fetchedProperties);\n\t\t}\n\t\treturn this._fetchPropertiesForEntity(table, entityTypePath, metaModel, appComponent).then(function (subFetchedProperties: any[]) {\n\t\t\tDelegateUtil.setCachedProperties(table, subFetchedProperties);\n\t\t\treturn subFetchedProperties;\n\t\t});\n\t},\n\n\t_setTableNoDataText: function (oTable: any, oBindingInfo: any) {\n\t\tlet sNoDataKey = \"\";\n\t\tconst oTableFilterInfo = TableUtils.getAllFilterInfo(oTable),\n\t\t\tsuffixResourceKey = oBindingInfo.path.startsWith(\"/\") ? oBindingInfo.path.substr(1) : oBindingInfo.path;\n\n\t\tconst _getNoDataTextWithFilters = function () {\n\t\t\tif (oTable.data(\"hiddenFilters\") || oTable.getQuickFilter()) {\n\t\t\t\treturn \"M_TABLE_AND_CHART_NO_DATA_TEXT_MULTI_VIEW\";\n\t\t\t} else {\n\t\t\t\treturn \"T_TABLE_AND_CHART_NO_DATA_TEXT_WITH_FILTER\";\n\t\t\t}\n\t\t};\n\t\tconst sFilterAssociation = oTable.getFilter();\n\n\t\tif (sFilterAssociation && !/BasicSearch$/.test(sFilterAssociation)) {\n\t\t\t// check if a FilterBar is associated to the Table (basic search on toolBar is excluded)\n\t\t\tif (oTableFilterInfo.search || (oTableFilterInfo.filters && oTableFilterInfo.filters.length)) {\n\t\t\t\t// check if table has any Filterbar filters or personalization filters\n\t\t\t\tsNoDataKey = _getNoDataTextWithFilters();\n\t\t\t} else {\n\t\t\t\tsNoDataKey = \"T_TABLE_AND_CHART_NO_DATA_TEXT\";\n\t\t\t}\n\t\t} else if (oTableFilterInfo.search || (oTableFilterInfo.filters && oTableFilterInfo.filters.length)) {\n\t\t\t//check if table has any personalization filters\n\t\t\tsNoDataKey = _getNoDataTextWithFilters();\n\t\t} else {\n\t\t\tsNoDataKey = \"M_TABLE_AND_CHART_NO_FILTERS_NO_DATA_TEXT\";\n\t\t}\n\n\t\toTable.setNoData(getResourceModel(oTable).getText(sNoDataKey, undefined, suffixResourceKey));\n\t},\n\n\thandleTableDataReceived: function (oTable: any, oInternalModelContext: any) {\n\t\tconst oBinding = oTable && oTable.getRowBinding(),\n\t\t\tbDataReceivedAttached = oInternalModelContext && oInternalModelContext.getProperty(\"dataReceivedAttached\");\n\n\t\tif (oInternalModelContext && !bDataReceivedAttached) {\n\t\t\toBinding.attachDataReceived(function () {\n\t\t\t\t// Refresh the selected contexts to trigger re-calculation of enabled state of actions.\n\t\t\t\toInternalModelContext.setProperty(\"selectedContexts\", []);\n\t\t\t\tconst aSelectedContexts = oTable.getSelectedContexts();\n\t\t\t\toInternalModelContext.setProperty(\"selectedContexts\", aSelectedContexts);\n\t\t\t\toInternalModelContext.setProperty(\"numberOfSelectedContexts\", aSelectedContexts.length);\n\t\t\t\tconst oActionOperationAvailableMap = JSON.parse(\n\t\t\t\t\tCommonHelper.parseCustomData(DelegateUtil.getCustomData(oTable, \"operationAvailableMap\"))\n\t\t\t\t);\n\t\t\t\tActionRuntime.setActionEnablement(oInternalModelContext, oActionOperationAvailableMap, aSelectedContexts, \"table\");\n\t\t\t\t// Refresh enablement of delete button\n\t\t\t\tDeleteHelper.updateDeleteInfoForSelectedContexts(oInternalModelContext, aSelectedContexts);\n\t\t\t\tconst oTableAPI = oTable ? oTable.getParent() : null;\n\t\t\t\tif (oTableAPI) {\n\t\t\t\t\toTableAPI.setUpEmptyRows(oTable);\n\t\t\t\t}\n\t\t\t});\n\t\t\toInternalModelContext.setProperty(\"dataReceivedAttached\", true);\n\t\t}\n\t},\n\n\trebind: function (oTable: any, oBindingInfo: any): Promise<any> {\n\t\tconst oTableAPI = oTable.getParent() as TableAPI;\n\t\tconst bIsSuspended = oTableAPI?.getProperty(\"bindingSuspended\");\n\t\toTableAPI?.setProperty(\"outDatedBinding\", bIsSuspended);\n\t\tif (!bIsSuspended) {\n\t\t\tTableUtils.clearSelection(oTable);\n\t\t\tTableDelegateBase.rebind.apply(this, [oTable, oBindingInfo]);\n\t\t\tTableUtils.onTableBound(oTable);\n\t\t\tthis._setTableNoDataText(oTable, oBindingInfo);\n\t\t\treturn TableUtils.whenBound(oTable)\n\t\t\t\t.then(this.handleTableDataReceived(oTable, oTable.getBindingContext(\"internal\")))\n\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\tLog.error(\"Error while waiting for the table to be bound\", oError);\n\t\t\t\t});\n\t\t}\n\t\treturn Promise.resolve();\n\t},\n\n\t/**\n\t * Fetches the relevant metadata for the table and returns property info array.\n\t *\n\t * @param table Instance of the MDCtable\n\t * @returns Array of property info\n\t */\n\tfetchProperties: function (table: Table) {\n\t\treturn DelegateUtil.fetchModel(table)\n\t\t\t.then((model) => {\n\t\t\t\treturn this._getCachedOrFetchPropertiesForEntity(\n\t\t\t\t\ttable,\n\t\t\t\t\tDelegateUtil.getCustomData(table, \"entityType\"),\n\t\t\t\t\tmodel.getMetaModel()\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then((properties) => {\n\t\t\t\t(table.getBindingContext(\"internal\") as Context).setProperty(\"tablePropertiesAvailable\", true);\n\t\t\t\treturn properties;\n\t\t\t});\n\t},\n\n\tpreInit: function (oTable: Table) {\n\t\treturn TableDelegateBase.preInit.apply(this, [oTable]).then(function () {\n\t\t\t/**\n\t\t\t * Set the binding context to null for every fast creation row to avoid it inheriting\n\t\t\t * the wrong context and requesting the table columns on the parent entity\n\t\t\t * Set the correct binding context in ObjectPageController.enableFastCreationRow()\n\t\t\t */\n\t\t\tconst oFastCreationRow = oTable.getCreationRow();\n\t\t\tif (oFastCreationRow) {\n\t\t\t\toFastCreationRow.setBindingContext(null as any as Context);\n\t\t\t}\n\t\t});\n\t},\n\tupdateBindingInfo: function (oTable: any, oBindingInfo: any) {\n\t\tTableDelegateBase.updateBindingInfo.apply(this, [oTable, oBindingInfo]);\n\t\tthis._internalUpdateBindingInfo(oTable, oBindingInfo);\n\t\tthis._setTableNoDataText(oTable, oBindingInfo);\n\t\t/**\n\t\t * We have to set the binding context to null for every fast creation row to avoid it inheriting\n\t\t * the wrong context and requesting the table columns on the parent entity\n\t\t * The correct binding context is set in ObjectPageController.enableFastCreationRow()\n\t\t */\n\t\tif (oTable.getCreationRow()?.getBindingContext() === null) {\n\t\t\tTableHelper.enableFastCreationRow(\n\t\t\t\toTable.getCreationRow(),\n\t\t\t\toBindingInfo.path,\n\t\t\t\toTable.getBindingContext(),\n\t\t\t\toTable.getModel(),\n\t\t\t\toTable.getModel(\"ui\").getProperty(\"/isEditable\")\n\t\t\t);\n\t\t}\n\t},\n\n\t_manageSemanticTargets: function (oMDCTable: any) {\n\t\tconst oRowBinding = oMDCTable.getRowBinding();\n\t\tif (oRowBinding) {\n\t\t\toRowBinding.attachEventOnce(\"dataRequested\", function () {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tconst _oView = CommonUtils.getTargetView(oMDCTable);\n\t\t\t\t\tif (_oView) {\n\t\t\t\t\t\tTableUtils.getSemanticTargetsFromTable(_oView.getController() as PageController, oMDCTable);\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t});\n\t\t}\n\t},\n\n\tupdateBinding: function (oTable: any, oBindingInfo: any, oBinding: any) {\n\t\tconst oTableAPI = oTable.getParent() as TableAPI;\n\t\tconst bIsSuspended = oTableAPI?.getProperty(\"bindingSuspended\");\n\t\tif (!bIsSuspended) {\n\t\t\tlet bNeedManualRefresh = false;\n\t\t\tconst _oView = CommonUtils.getTargetView(oTable);\n\t\t\tconst oInternalBindingContext = oTable.getBindingContext(\"internal\");\n\t\t\tconst sManualUpdatePropertyKey = \"pendingManualBindingUpdate\";\n\t\t\tconst bPendingManualUpdate = oInternalBindingContext.getProperty(sManualUpdatePropertyKey);\n\t\t\tconst oRowBinding = oTable.getRowBinding();\n\n\t\t\tif (oRowBinding) {\n\t\t\t\t/**\n\t\t\t\t * Manual refresh if filters are not changed by binding.refresh() since updating the bindingInfo\n\t\t\t\t * is not enough to trigger a batch request.\n\t\t\t\t * Removing columns creates one batch request that was not executed before\n\t\t\t\t */\n\t\t\t\tconst oldFilters = oRowBinding.getFilters(\"Application\");\n\t\t\t\tbNeedManualRefresh =\n\t\t\t\t\tdeepEqual(oBindingInfo.filters, oldFilters[0]) &&\n\t\t\t\t\toBindingInfo.path === oRowBinding.getPath() && // The path can be changed in case of a parametrized entity\n\t\t\t\t\toRowBinding.getQueryOptionsFromParameters().$search === oBindingInfo.parameters.$search &&\n\t\t\t\t\t!bPendingManualUpdate &&\n\t\t\t\t\t_oView &&\n\t\t\t\t\t(_oView.getViewData() as any).converterType === \"ListReport\";\n\t\t\t}\n\t\t\tTableDelegateBase.updateBinding.apply(this, [oTable, oBindingInfo, oBinding]);\n\t\t\toTable.fireEvent(\"bindingUpdated\");\n\t\t\tif (bNeedManualRefresh && oTable.getFilter() && oBinding) {\n\t\t\t\toRowBinding\n\t\t\t\t\t.requestRefresh(oRowBinding.getGroupId())\n\t\t\t\t\t.finally(function () {\n\t\t\t\t\t\toInternalBindingContext.setProperty(sManualUpdatePropertyKey, false);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\t\tLog.error(\"Error while refreshing the table\", oError);\n\t\t\t\t\t});\n\t\t\t\toInternalBindingContext.setProperty(sManualUpdatePropertyKey, true);\n\t\t\t}\n\t\t\tthis._manageSemanticTargets(oTable);\n\t\t}\n\t\toTableAPI?.setProperty(\"outDatedBinding\", bIsSuspended);\n\t},\n\n\t_computeRowBindingInfoFromTemplate: function (oTable: any) {\n\t\t// We need to deepClone the info we get from the custom data, otherwise some of its subobjects (e.g. parameters) will\n\t\t// be shared with oBindingInfo and modified later (Object.assign only does a shallow clone)\n\t\tconst rowBindingInfo = deepClone(DelegateUtil.getCustomData(oTable, \"rowsBindingInfo\"));\n\t\t// if the rowBindingInfo has a $$getKeepAliveContext parameter we need to check it is the only Table with such a\n\t\t// parameter for the collectionMetaPath\n\t\tif (rowBindingInfo.parameters.$$getKeepAliveContext) {\n\t\t\tconst collectionPath = DelegateUtil.getCustomData(oTable, \"targetCollectionPath\");\n\t\t\tconst internalModel = oTable.getModel(\"internal\");\n\t\t\tconst keptAliveLists = internalModel.getObject(\"/keptAliveLists\") || {};\n\t\t\tif (!keptAliveLists[collectionPath]) {\n\t\t\t\tkeptAliveLists[collectionPath] = oTable.getId();\n\t\t\t\tinternalModel.setProperty(\"/keptAliveLists\", keptAliveLists);\n\t\t\t} else if (keptAliveLists[collectionPath] !== oTable.getId()) {\n\t\t\t\tdelete rowBindingInfo.parameters.$$getKeepAliveContext;\n\t\t\t}\n\t\t}\n\t\treturn rowBindingInfo;\n\t},\n\t_internalUpdateBindingInfo: function (oTable: any, oBindingInfo: any) {\n\t\tconst oInternalModelContext = oTable.getBindingContext(\"internal\");\n\t\tObject.assign(oBindingInfo, this._computeRowBindingInfoFromTemplate(oTable));\n\t\t/**\n\t\t * Binding info might be suspended at the beginning when the first bindRows is called:\n\t\t * To avoid duplicate requests but still have a binding to create new entries.\t\t\t\t *\n\t\t * After the initial binding step, follow up bindings should no longer be suspended.\n\t\t */\n\t\tif (oTable.getRowBinding()) {\n\t\t\toBindingInfo.suspended = false;\n\t\t}\n\t\t// The previously added handler for the event 'dataReceived' is not anymore there\n\t\t// since the bindingInfo is recreated from scratch so we need to set the flag to false in order\n\t\t// to again add the handler on this event if needed\n\t\tif (oInternalModelContext) {\n\t\t\toInternalModelContext.setProperty(\"dataReceivedAttached\", false);\n\t\t}\n\n\t\tlet oFilter;\n\t\tconst oFilterInfo = TableUtils.getAllFilterInfo(oTable);\n\t\t// Prepare binding info with filter/search parameters\n\t\tif (oFilterInfo.filters.length > 0) {\n\t\t\toFilter = new Filter({ filters: oFilterInfo.filters, and: true });\n\t\t}\n\t\tif (oFilterInfo.bindingPath) {\n\t\t\toBindingInfo.path = oFilterInfo.bindingPath;\n\t\t}\n\n\t\tconst oDataStateIndicator = oTable.getDataStateIndicator();\n\t\tif (oDataStateIndicator && oDataStateIndicator.isFiltering()) {\n\t\t\t// Include filters on messageStrip\n\t\t\tif (oBindingInfo.filters.length > 0) {\n\t\t\t\toFilter = new Filter({ filters: oBindingInfo.filters.concat(oFilterInfo.filters), and: true });\n\t\t\t\tthis.updateBindingInfoWithSearchQuery(oBindingInfo, oFilterInfo, oFilter);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.updateBindingInfoWithSearchQuery(oBindingInfo, oFilterInfo, oFilter);\n\t\t}\n\t},\n\n\tupdateBindingInfoWithSearchQuery: function (bindingInfo: any, filterInfo: any, filter?: Filter) {\n\t\tbindingInfo.filters = filter;\n\t\tif (filterInfo.search) {\n\t\t\tbindingInfo.parameters.$search = CommonUtils.normalizeSearchTerm(filterInfo.search);\n\t\t} else {\n\t\t\tbindingInfo.parameters.$search = undefined;\n\t\t}\n\t},\n\t_templateCustomColumnFragment: function (oColumnInfo: TableColumn, oView: any, oModifier: any, sTableId: any) {\n\t\tconst oColumnModel = new JSONModel(oColumnInfo),\n\t\t\toThis = new JSONModel({\n\t\t\t\tid: sTableId\n\t\t\t}),\n\t\t\toPreprocessorSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\tcolumn: oColumnModel.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tthis: oThis,\n\t\t\t\t\tcolumn: oColumnModel\n\t\t\t\t}\n\t\t\t};\n\n\t\treturn DelegateUtil.templateControlFragment(\n\t\t\t\"sap.fe.macros.table.CustomColumn\",\n\t\t\toPreprocessorSettings,\n\t\t\t{ view: oView },\n\t\t\toModifier\n\t\t).then(function (oItem: any) {\n\t\t\toColumnModel.destroy();\n\t\t\treturn oItem;\n\t\t});\n\t},\n\n\t_templateSlotColumnFragment: async function (\n\t\toColumnInfo: CustomElement<CustomBasedTableColumn>,\n\t\toView: any,\n\t\toModifier: any,\n\t\tsTableId: any\n\t) {\n\t\tconst oColumnModel = new JSONModel(oColumnInfo),\n\t\t\toThis = new JSONModel({\n\t\t\t\tid: sTableId\n\t\t\t}),\n\t\t\toPreprocessorSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\tcolumn: oColumnModel.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tthis: oThis,\n\t\t\t\t\tcolumn: oColumnModel\n\t\t\t\t}\n\t\t\t};\n\t\tconst slotColumnsXML = (await DelegateUtil.templateControlFragment(\"sap.fe.macros.table.SlotColumn\", oPreprocessorSettings, {\n\t\t\tisXML: true\n\t\t})) as Element;\n\t\tif (!slotColumnsXML) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tconst slotXML = slotColumnsXML.getElementsByTagName(\"slot\")[0],\n\t\t\tmdcTableTemplateXML = slotColumnsXML.getElementsByTagName(\"mdcTable:template\")[0];\n\t\tmdcTableTemplateXML.removeChild(slotXML);\n\t\tif (oColumnInfo.template) {\n\t\t\tconst oTemplate = new DOMParser().parseFromString(oColumnInfo.template, \"text/xml\");\n\t\t\tmdcTableTemplateXML.appendChild(oTemplate.firstElementChild!);\n\t\t} else {\n\t\t\tLog.error(`Please provide content inside this Building Block Column: ${oColumnInfo.header}`);\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tif (oModifier.targets !== \"jsControlTree\") {\n\t\t\treturn slotColumnsXML;\n\t\t}\n\t\treturn Fragment.load({\n\t\t\ttype: \"XML\",\n\t\t\tdefinition: slotColumnsXML\n\t\t});\n\t},\n\n\t_getExportFormat: function (dataType: any) {\n\t\tswitch (dataType) {\n\t\t\tcase \"Edm.Date\":\n\t\t\t\treturn ExcelFormat.getExcelDatefromJSDate();\n\t\t\tcase \"Edm.DateTimeOffset\":\n\t\t\t\treturn ExcelFormat.getExcelDateTimefromJSDateTime();\n\t\t\tcase \"Edm.TimeOfDay\":\n\t\t\t\treturn ExcelFormat.getExcelTimefromJSTime();\n\t\t\tdefault:\n\t\t\t\treturn undefined;\n\t\t}\n\t},\n\n\t_getVHRelevantFields: function (oMetaModel: any, sMetadataPath: any, sBindingPath?: any) {\n\t\tlet aFields: any[] = [],\n\t\t\toDataFieldData = oMetaModel.getObject(sMetadataPath);\n\n\t\tif (oDataFieldData.$kind && oDataFieldData.$kind === \"Property\") {\n\t\t\toDataFieldData = oMetaModel.getObject(`${sMetadataPath}@com.sap.vocabularies.UI.v1.DataFieldDefault`);\n\t\t\tsMetadataPath = `${sMetadataPath}@com.sap.vocabularies.UI.v1.DataFieldDefault`;\n\t\t}\n\t\tswitch (oDataFieldData.$Type) {\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\":\n\t\t\t\tif (oMetaModel.getObject(`${sMetadataPath}/Target/$AnnotationPath`).includes(\"com.sap.vocabularies.UI.v1.FieldGroup\")) {\n\t\t\t\t\toMetaModel.getObject(`${sMetadataPath}/Target/$AnnotationPath/Data`).forEach((oValue: any, iIndex: any) => {\n\t\t\t\t\t\taFields = aFields.concat(\n\t\t\t\t\t\t\tthis._getVHRelevantFields(oMetaModel, `${sMetadataPath}/Target/$AnnotationPath/Data/${iIndex}`)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithUrl\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataField\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithAction\":\n\t\t\t\taFields.push(oMetaModel.getObject(`${sMetadataPath}/Value/$Path`));\n\t\t\t\tbreak;\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAction\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\":\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// property\n\t\t\t\t// temporary workaround to make sure VH relevant field path do not contain the bindingpath\n\t\t\t\tif (sMetadataPath.indexOf(sBindingPath) === 0) {\n\t\t\t\t\taFields.push(sMetadataPath.substring(sBindingPath.length + 1));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\taFields.push(CommonHelper.getNavigationPath(sMetadataPath, true));\n\t\t\t\tbreak;\n\t\t}\n\t\treturn aFields;\n\t},\n\t_setDraftIndicatorOnVisibleColumn: function (oTable: any, aColumns: any, oColumnInfo: any) {\n\t\tconst oInternalBindingContext = oTable.getBindingContext(\"internal\");\n\t\tif (!oInternalBindingContext) {\n\t\t\treturn;\n\t\t}\n\t\tconst sInternalPath = oInternalBindingContext.getPath();\n\t\tconst aColumnsWithDraftIndicator = aColumns.filter((oColumn: any) => {\n\t\t\treturn this._bColumnHasPropertyWithDraftIndicator(oColumn);\n\t\t});\n\t\tconst aVisibleColumns = oTable.getColumns();\n\t\tlet sAddVisibleColumnName, sVisibleColumnName, bFoundColumnVisibleWithDraft, sColumnNameWithDraftIndicator;\n\t\tfor (const i in aVisibleColumns) {\n\t\t\tsVisibleColumnName = aVisibleColumns[i].getDataProperty();\n\t\t\tfor (const j in aColumnsWithDraftIndicator) {\n\t\t\t\tsColumnNameWithDraftIndicator = aColumnsWithDraftIndicator[j].name;\n\t\t\t\tif (sVisibleColumnName === sColumnNameWithDraftIndicator) {\n\t\t\t\t\tbFoundColumnVisibleWithDraft = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (oColumnInfo && oColumnInfo.name === sColumnNameWithDraftIndicator) {\n\t\t\t\t\tsAddVisibleColumnName = oColumnInfo.name;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (bFoundColumnVisibleWithDraft) {\n\t\t\t\toInternalBindingContext.setProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR, sVisibleColumnName);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!bFoundColumnVisibleWithDraft && sAddVisibleColumnName) {\n\t\t\toInternalBindingContext.setProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR, sAddVisibleColumnName);\n\t\t}\n\t},\n\tremoveItem: function (oTable: any, oPropertyInfoName: any, mPropertyBag: any) {\n\t\tlet doRemoveItem = true;\n\t\tif (!oPropertyInfoName) {\n\t\t\t// 1. Application removed the property from their data model\n\t\t\t// 2. addItem failed before revertData created\n\t\t\treturn Promise.resolve(doRemoveItem);\n\t\t}\n\t\tconst oModifier = mPropertyBag.modifier;\n\t\tconst sDataProperty = oModifier.getProperty(oPropertyInfoName, \"dataProperty\");\n\t\tif (sDataProperty && sDataProperty.indexOf && sDataProperty.indexOf(\"InlineXML\") !== -1) {\n\t\t\toModifier.insertAggregation(oTable, \"dependents\", oPropertyInfoName);\n\t\t\tdoRemoveItem = false;\n\t\t}\n\t\tif (oTable.isA && oModifier.targets === \"jsControlTree\") {\n\t\t\tthis._setDraftIndicatorStatus(oModifier, oTable, this.getColumnsFor(oTable));\n\t\t}\n\t\treturn Promise.resolve(doRemoveItem);\n\t},\n\t_getMetaModel: function (mPropertyBag: any) {\n\t\treturn mPropertyBag.appComponent && mPropertyBag.appComponent.getModel().getMetaModel();\n\t},\n\t_setDraftIndicatorStatus: function (oModifier: any, oTable: any, aColumns: any, oColumnInfo?: any) {\n\t\tif (oModifier.targets === \"jsControlTree\") {\n\t\t\tthis._setDraftIndicatorOnVisibleColumn(oTable, aColumns, oColumnInfo);\n\t\t}\n\t},\n\t_getGroupId: function (sRetrievedGroupId: any) {\n\t\treturn sRetrievedGroupId || undefined;\n\t},\n\t_getDependent: function (oDependent: any, sPropertyInfoName: any, sDataProperty: any) {\n\t\tif (sPropertyInfoName === sDataProperty) {\n\t\t\treturn oDependent;\n\t\t}\n\t\treturn undefined;\n\t},\n\t_fnTemplateValueHelp: function (fnTemplateValueHelp: any, bValueHelpRequired: any, bValueHelpExists: any) {\n\t\tif (bValueHelpRequired && !bValueHelpExists) {\n\t\t\treturn fnTemplateValueHelp(\"sap.fe.macros.table.ValueHelp\");\n\t\t}\n\t\treturn Promise.resolve();\n\t},\n\t_getDisplayMode: function (bDisplayMode: any) {\n\t\tlet columnEditMode;\n\t\tif (bDisplayMode !== undefined) {\n\t\t\tbDisplayMode = typeof bDisplayMode === \"boolean\" ? bDisplayMode : bDisplayMode === \"true\";\n\t\t\tcolumnEditMode = bDisplayMode ? \"Display\" : \"Editable\";\n\t\t\treturn {\n\t\t\t\tdisplaymode: bDisplayMode,\n\t\t\t\tcolumnEditMode: columnEditMode\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tdisplaymode: undefined,\n\t\t\tcolumnEditMode: undefined\n\t\t};\n\t},\n\t_insertAggregation: function (oValueHelp: any, oModifier: any, oTable: any) {\n\t\tif (oValueHelp) {\n\t\t\treturn oModifier.insertAggregation(oTable, \"dependents\", oValueHelp, 0);\n\t\t}\n\t\treturn undefined;\n\t},\n\t/**\n\t * Invoked when a column is added using the table personalization dialog.\n\t *\n\t * @param sPropertyInfoName Name of the property for which the column is added\n\t * @param oTable Instance of table control\n\t * @param mPropertyBag Instance of property bag from the flexibility API\n\t * @returns Once resolved, a table column definition is returned\n\t */\n\taddItem: async function (oTable: any, sPropertyInfoName: string, mPropertyBag: any) {\n\t\tconst oMetaModel = this._getMetaModel(mPropertyBag),\n\t\t\toModifier = mPropertyBag.modifier,\n\t\t\tsTableId = oModifier.getId(oTable),\n\t\t\taColumns = oTable.isA ? this.getColumnsFor(oTable) : null;\n\t\tif (!aColumns) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tconst oColumnInfo = aColumns.find(function (oColumn) {\n\t\t\treturn oColumn.name === sPropertyInfoName;\n\t\t});\n\t\tif (!oColumnInfo) {\n\t\t\tLog.error(`${sPropertyInfoName} not found while adding column`);\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tthis._setDraftIndicatorStatus(oModifier, oTable, aColumns, oColumnInfo);\n\t\t// render custom column\n\t\tif (oColumnInfo.type === \"Default\") {\n\t\t\treturn this._templateCustomColumnFragment(oColumnInfo, mPropertyBag.view, oModifier, sTableId);\n\t\t}\n\n\t\tif (oColumnInfo.type === \"Slot\") {\n\t\t\treturn this._templateSlotColumnFragment(\n\t\t\t\toColumnInfo as CustomElement<CustomBasedTableColumn>,\n\t\t\t\tmPropertyBag.view,\n\t\t\t\toModifier,\n\t\t\t\tsTableId\n\t\t\t);\n\t\t}\n\t\t// fall-back\n\t\tif (!oMetaModel) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tconst sPath: string = await DelegateUtil.getCustomData(oTable, \"metaPath\", oModifier);\n\t\tconst sEntityTypePath: string = await DelegateUtil.getCustomData(oTable, \"entityType\", oModifier);\n\t\tconst sRetrievedGroupId = await DelegateUtil.getCustomData(oTable, \"requestGroupId\", oModifier);\n\t\tconst sGroupId: string = this._getGroupId(sRetrievedGroupId);\n\t\tconst oTableContext: Context = oMetaModel.createBindingContext(sPath);\n\t\tconst aFetchedProperties = await this._getCachedOrFetchPropertiesForEntity(\n\t\t\toTable,\n\t\t\tsEntityTypePath,\n\t\t\toMetaModel,\n\t\t\tmPropertyBag.appComponent\n\t\t);\n\t\tconst oPropertyInfo = aFetchedProperties.find(function (oInfo: any) {\n\t\t\treturn oInfo.name === sPropertyInfoName;\n\t\t});\n\n\t\tconst oPropertyContext: Context = oMetaModel.createBindingContext(oPropertyInfo.metadataPath);\n\t\tconst aVHProperties = this._getVHRelevantFields(oMetaModel, oPropertyInfo.metadataPath, sPath);\n\t\tconst oParameters = {\n\t\t\tsBindingPath: sPath,\n\t\t\tsValueHelpType: \"TableValueHelp\",\n\t\t\toControl: oTable,\n\t\t\toMetaModel,\n\t\t\toModifier,\n\t\t\toPropertyInfo\n\t\t};\n\n\t\tconst fnTemplateValueHelp = async (sFragmentName: any) => {\n\t\t\tconst oThis = new JSONModel({\n\t\t\t\t\tid: sTableId,\n\t\t\t\t\trequestGroupId: sGroupId\n\t\t\t\t}),\n\t\t\t\toPreprocessorSettings = {\n\t\t\t\t\tbindingContexts: {\n\t\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\t\tdataField: oPropertyContext,\n\t\t\t\t\t\tcontextPath: oTableContext\n\t\t\t\t\t},\n\t\t\t\t\tmodels: {\n\t\t\t\t\t\tthis: oThis,\n\t\t\t\t\t\tdataField: oMetaModel,\n\t\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\t\tcontextPath: oMetaModel\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tconst oValueHelp = await DelegateUtil.templateControlFragment(sFragmentName, oPreprocessorSettings, {}, oModifier);\n\t\t\t\treturn await this._insertAggregation(oValueHelp, oModifier, oTable);\n\t\t\t} catch (oError: any) {\n\t\t\t\t//We always resolve the promise to ensure that the app does not crash\n\t\t\t\tLog.error(`ValueHelp not loaded : ${oError.message}`);\n\t\t\t\treturn null;\n\t\t\t} finally {\n\t\t\t\toThis.destroy();\n\t\t\t}\n\t\t};\n\n\t\tconst fnTemplateFragment = (oInPropertyInfo: any, oView: any) => {\n\t\t\tconst sFragmentName = \"sap.fe.macros.table.Column\";\n\n\t\t\tlet bDisplayMode;\n\t\t\tlet sTableTypeCustomData;\n\t\t\tlet sOnChangeCustomData;\n\t\t\tlet sCreationModeCustomData;\n\n\t\t\treturn Promise.all([\n\t\t\t\tDelegateUtil.getCustomData(oTable, \"displayModePropertyBinding\", oModifier),\n\t\t\t\tDelegateUtil.getCustomData(oTable, \"tableType\", oModifier),\n\t\t\t\tDelegateUtil.getCustomData(oTable, \"onChange\", oModifier),\n\t\t\t\tDelegateUtil.getCustomData(oTable, \"creationMode\", oModifier)\n\t\t\t]).then((aCustomData: any[]) => {\n\t\t\t\tbDisplayMode = aCustomData[0];\n\t\t\t\tsTableTypeCustomData = aCustomData[1];\n\t\t\t\tsOnChangeCustomData = aCustomData[2];\n\t\t\t\tsCreationModeCustomData = aCustomData[3];\n\t\t\t\t// Read Only and Column Edit Mode can both have three state\n\t\t\t\t// Undefined means that the framework decides what to do\n\t\t\t\t// True / Display means always read only\n\t\t\t\t// False / Editable means editable but while still respecting the low level principle (immutable property will not be editable)\n\t\t\t\tconst oDisplayModes = this._getDisplayMode(bDisplayMode);\n\t\t\t\tbDisplayMode = oDisplayModes.displaymode;\n\t\t\t\tconst columnEditMode = oDisplayModes.columnEditMode;\n\n\t\t\t\tconst oThis = new JSONModel({\n\t\t\t\t\t\tenableAutoColumnWidth: (oTable.getParent() as TableAPI).enableAutoColumnWidth,\n\t\t\t\t\t\tisOptimizedForSmallDevice: (oTable.getParent() as TableAPI).isOptimizedForSmallDevice,\n\t\t\t\t\t\treadOnly: bDisplayMode,\n\t\t\t\t\t\tcolumnEditMode: columnEditMode,\n\t\t\t\t\t\ttableType: sTableTypeCustomData,\n\t\t\t\t\t\tonChange: sOnChangeCustomData,\n\t\t\t\t\t\tid: sTableId,\n\t\t\t\t\t\tnavigationPropertyPath: sPropertyInfoName,\n\t\t\t\t\t\tcolumnInfo: oColumnInfo,\n\t\t\t\t\t\tcollection: {\n\t\t\t\t\t\t\tsPath: sPath,\n\t\t\t\t\t\t\toModel: oMetaModel\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreationMode: sCreationModeCustomData\n\t\t\t\t\t} as tableDelegateModel),\n\t\t\t\t\toPreprocessorSettings = {\n\t\t\t\t\t\tbindingContexts: {\n\t\t\t\t\t\t\tentitySet: oTableContext,\n\t\t\t\t\t\t\tcollection: oTableContext,\n\t\t\t\t\t\t\tdataField: oPropertyContext,\n\t\t\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\t\t\tcolumn: oThis.createBindingContext(\"/columnInfo\")\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmodels: {\n\t\t\t\t\t\t\tthis: oThis,\n\t\t\t\t\t\t\tentitySet: oMetaModel,\n\t\t\t\t\t\t\tcollection: oMetaModel,\n\t\t\t\t\t\t\tdataField: oMetaModel,\n\t\t\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\t\t\tcolumn: oThis\n\t\t\t\t\t\t},\n\t\t\t\t\t\tappComponent: mPropertyBag.appComponent\n\t\t\t\t\t};\n\n\t\t\t\treturn DelegateUtil.templateControlFragment(sFragmentName, oPreprocessorSettings, { view: oView }, oModifier).finally(\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\toThis.destroy();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t};\n\n\t\tawait Promise.all(\n\t\t\taVHProperties.map(async (sPropertyName: any) => {\n\t\t\t\tconst mParameters = Object.assign({}, oParameters, { sPropertyName: sPropertyName });\n\n\t\t\t\tconst aResults = await Promise.all([\n\t\t\t\t\tDelegateUtil.isValueHelpRequired(mParameters),\n\t\t\t\t\tDelegateUtil.doesValueHelpExist(mParameters)\n\t\t\t\t]);\n\n\t\t\t\tconst bValueHelpRequired = aResults[0],\n\t\t\t\t\tbValueHelpExists = aResults[1];\n\t\t\t\treturn this._fnTemplateValueHelp(fnTemplateValueHelp, bValueHelpRequired, bValueHelpExists);\n\t\t\t})\n\t\t);\n\t\t// If view is not provided try to get it by accessing to the parental hierarchy\n\t\t// If it doesn't work (table into an unattached OP section) get the view via the AppComponent\n\t\tconst view =\n\t\t\tmPropertyBag.view ||\n\t\t\tCommonUtils.getTargetView(oTable) ||\n\t\t\t(mPropertyBag.appComponent ? CommonUtils.getCurrentPageView(mPropertyBag.appComponent) : undefined);\n\t\treturn fnTemplateFragment(oPropertyInfo, view);\n\t},\n\n\t/**\n\t * Provide the Table's filter delegate to provide basic filter functionality such as adding FilterFields.\n\t *\n\t * @returns Object for the Tables filter personalization.\n\t */\n\tgetFilterDelegate: function () {\n\t\treturn Object.assign({\n\t\t\tapiVersion: 2\n\t\t}, FilterBarDelegate, {\n\t\t\taddItem: function (oParentControl: any, sPropertyInfoName: any) {\n\t\t\t\tif (sPropertyInfoName.indexOf(\"Property::\") === 0) {\n\t\t\t\t\t// Correct the name of complex property info references.\n\t\t\t\t\tsPropertyInfoName = sPropertyInfoName.replace(\"Property::\", \"\");\n\t\t\t\t}\n\t\t\t\treturn FilterBarDelegate.addItem(oParentControl, sPropertyInfoName);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Returns the TypeUtil attached to this delegate.\n\t *\n\t * @returns Any instance of TypeUtil\n\t */\n\tgetTypeUtil: function (/*oPayload: object*/) {\n\t\treturn TypeUtil;\n\t},\n\n\tformatGroupHeader(oTable: any, oContext: any, sProperty: any) {\n\t\tconst mFormatInfos = DelegateUtil.getCachedProperties(oTable),\n\t\t\toFormatInfo =\n\t\t\t\tmFormatInfos &&\n\t\t\t\tmFormatInfos.filter((obj: any) => {\n\t\t\t\t\treturn obj.name === sProperty;\n\t\t\t\t})[0],\n\t\t\t/*For a Date or DateTime property, the value is returned in external format using a UI5 type for the\n\t        given property path that formats corresponding to the property's EDM type and constraints*/\n\t\t\tbExternalFormat = oFormatInfo?.typeConfig?.baseType === \"DateTime\" || oFormatInfo?.typeConfig?.baseType === \"Date\";\n\t\tlet sValue;\n\t\tif (oFormatInfo && oFormatInfo.mode) {\n\t\t\tswitch (oFormatInfo.mode) {\n\t\t\t\tcase \"Description\":\n\t\t\t\t\tsValue = oContext.getProperty(oFormatInfo.descriptionProperty, bExternalFormat);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"DescriptionValue\":\n\t\t\t\t\tsValue = ValueFormatter.formatWithBrackets(\n\t\t\t\t\t\toContext.getProperty(oFormatInfo.descriptionProperty, bExternalFormat),\n\t\t\t\t\t\toContext.getProperty(oFormatInfo.valueProperty, bExternalFormat)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ValueDescription\":\n\t\t\t\t\tsValue = ValueFormatter.formatWithBrackets(\n\t\t\t\t\t\toContext.getProperty(oFormatInfo.valueProperty, bExternalFormat),\n\t\t\t\t\t\toContext.getProperty(oFormatInfo.descriptionProperty, bExternalFormat)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tsValue = oContext.getProperty(oFormatInfo?.path, bExternalFormat);\n\t\t}\n\t\treturn getResourceModel(oTable).getText(\"M_TABLE_GROUP_HEADER_TITLE\", [oFormatInfo?.label, sValue]);\n\t}\n});\n"],"mappings":"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"}},{"offset":{"line":33617,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","deepClone","deepEqual","deepExtend","ActionRuntime","CommonUtils","MetaModelConverter","ValueFormatter","DeleteHelper","ExcelFormat","ModelHelper","ResourceModelHelper","SizeHelper","TypeGuards","EDM","TypeUtil","CommonHelper","DelegateUtil","FilterBarDelegate","TableSizeHelper","TableUtils","Fragment","TableDelegateBase","Filter","JSONModel","TableHelper","isTypeFilterable","isMultipleNavigationProperty","getResourceModel","getLocalizedText","getInvolvedDataModelObjects","SEMANTICKEY_HAS_DRAFTINDICATOR","Object","assign","apiVersion","_computeVisualSettingsForFieldGroup","oTable","oProperty","aProperties","name","indexOf","oColumn","getColumns","find","oCol","getDataProperty","bShowDataFieldsLabel","data","oMetaModel","getModel","getMetaModel","involvedDataModelObjects","getContext","metadataPath","convertedMetaData","convertedTypes","oDataField","targetObject","oFieldGroup","Target","$target","aFieldWidth","Data","forEach","oData","oDataFieldWidth","$Type","getWidthForDataFieldForAnnotation","getWidthForDataField","labelWidth","propertyWidth","getButtonWidth","Label","push","nWidest","reduce","acc","value","Math","max","visualSettings","widthCalculation","verticalArrangement","minWidth","ceil","_computeVisualSettingsForPropertyWithValueHelp","table","property","tableAPI","getParent","propertyInfos","metaModel","dataField","getObject","gap","getProperty","_computeVisualSettingsForPropertyWithUnit","oUnit","oUnitText","oTimezoneText","oTableAPI","sUnitText","getReadOnly","_computeLabel","labelMap","label","_property$path","propertiesWithSameLabel","length","path","includes","additionalLabels","join","_updatePropertyInfo","properties","p13nMode","getP13nMode","sortable","filterable","groupable","undefined","concat","this","typeConfig","getColumnsFor","getTableDefinition","columns","_getAggregatedPropertyMap","aggregates","fetchExportCapabilities","oCapabilities","XLSX","oModel","fetchModel","then","model","aSupportedFormats","aLowerFormats","map","element","toLowerCase","oAnnotation","catch","err","error","_isFilterableNavigationProperty","columnInfo","tableDataModelObjectPath","getCustomData","columnNavigationProperties","annotationPath","navigationProperties","tableTargetEntityIndex","findIndex","prop","_prop$targetType","targetType","targetEntityType","relativeNavigationProperties","slice","relativePath","isPartOfLineItem","some","_fetchPropertyInfo","appComponent","_columnInfo$typeConfi","_columnInfo$typeConfi2","_columnInfo$propertyI","sAbsoluteNavigationPath","oNavigationContext","createBindingContext","oTypeConfig","className","getTypeConfig","formatOptions","constraints","bFilterable","isPropertyFilterable","isComplexType","bIsAnalyticalTable","aAggregatedPropertyMapUnfilterable","propertyInfo","groupLabel","group","tooltip","visible","availability","exportSettings","_setPropertyInfoExportSettings","unit","keys","exportDataPointTargetValue","_columnInfo$exportSet","wrap","_extension","_updateAnalyticalPropertyInfoAttributes","extension","technicallyGroupable","key","isKey","isGroupable","textArrangement","descriptionColumn","_columnInfo$textArran","textProperty","mode","valueProperty","descriptionProperty","text","caseSensitive","additionalLabel","unitText","timezoneText","_columnInfo$typeConfi3","exportFormat","_getExportFormat","timezoneProperty","format","template","_columnInfo$exportSet2","aggregatable","_fetchCustomPropertyInfo","sLabel","header","startsWith","metaModelPath","substring","toString","type","_columnInfo$exportSet3","_columnInfo$exportSet4","_bColumnHasPropertyWithDraftIndicator","oColumnInfo","hasDraftIndicator","fieldGroupDraftIndicatorPropertyPath","_updateDraftIndicatorModel","_oTable","_oColumnInfo","aVisibleColumns","oInternalBindingContext","getBindingContext","sInternalPath","getPath","index","setProperty","_fetchPropertiesForEntity","sEntityTypePath","oAppComponent","sBindingPath","getEntitySetPath","aFetchedProperties","oFR","getFilterRestrictionsByPath","aNonFilterableProps","NonFilterableProperties","Promise","resolve","aColumns","oPropertyInfo","maxConditions","isMultiValue","Error","_getCachedOrFetchPropertiesForEntity","entityTypePath","fetchedProperties","getCachedProperties","subFetchedProperties","setCachedProperties","_setTableNoDataText","oBindingInfo","sNoDataKey","oTableFilterInfo","getAllFilterInfo","suffixResourceKey","substr","_getNoDataTextWithFilters","getQuickFilter","sFilterAssociation","getFilter","test","search","filters","setNoData","getText","handleTableDataReceived","oInternalModelContext","oBinding","getRowBinding","bDataReceivedAttached","attachDataReceived","aSelectedContexts","getSelectedContexts","oActionOperationAvailableMap","JSON","parse","parseCustomData","setActionEnablement","updateDeleteInfoForSelectedContexts","setUpEmptyRows","rebind","bIsSuspended","clearSelection","apply","onTableBound","whenBound","oError","fetchProperties","preInit","oFastCreationRow","getCreationRow","setBindingContext","updateBindingInfo","_oTable$getCreationRo","_internalUpdateBindingInfo","enableFastCreationRow","_manageSemanticTargets","oMDCTable","oRowBinding","attachEventOnce","setTimeout","_oView","getTargetView","getSemanticTargetsFromTable","getController","updateBinding","bNeedManualRefresh","sManualUpdatePropertyKey","bPendingManualUpdate","oldFilters","getFilters","getQueryOptionsFromParameters","$search","parameters","getViewData","converterType","fireEvent","requestRefresh","getGroupId","finally","_computeRowBindingInfoFromTemplate","rowBindingInfo","$$getKeepAliveContext","collectionPath","internalModel","keptAliveLists","getId","suspended","oFilter","oFilterInfo","and","bindingPath","oDataStateIndicator","getDataStateIndicator","isFiltering","updateBindingInfoWithSearchQuery","bindingInfo","filterInfo","filter","normalizeSearchTerm","_templateCustomColumnFragment","oView","oModifier","sTableId","oColumnModel","oThis","id","oPreprocessorSettings","bindingContexts","column","models","templateControlFragment","view","oItem","destroy","_templateSlotColumnFragment","async","slotColumnsXML","isXML","slotXML","getElementsByTagName","mdcTableTemplateXML","removeChild","oTemplate","DOMParser","parseFromString","appendChild","firstElementChild","targets","load","definition","dataType","getExcelDatefromJSDate","getExcelDateTimefromJSDateTime","getExcelTimefromJSTime","_getVHRelevantFields","sMetadataPath","aFields","oDataFieldData","$kind","oValue","iIndex","getNavigationPath","_setDraftIndicatorOnVisibleColumn","aColumnsWithDraftIndicator","sAddVisibleColumnName","sVisibleColumnName","bFoundColumnVisibleWithDraft","sColumnNameWithDraftIndicator","i","j","removeItem","oPropertyInfoName","mPropertyBag","doRemoveItem","modifier","sDataProperty","insertAggregation","isA","_setDraftIndicatorStatus","_getMetaModel","_getGroupId","sRetrievedGroupId","_getDependent","oDependent","sPropertyInfoName","_fnTemplateValueHelp","fnTemplateValueHelp","bValueHelpRequired","bValueHelpExists","_getDisplayMode","bDisplayMode","columnEditMode","displaymode","_insertAggregation","oValueHelp","addItem","sPath","sGroupId","oTableContext","oInfo","oPropertyContext","aVHProperties","oParameters","sValueHelpType","oControl","requestGroupId","contextPath","sFragmentName","message","fnTemplateFragment","oInPropertyInfo","sTableTypeCustomData","sOnChangeCustomData","sCreationModeCustomData","all","aCustomData","oDisplayModes","enableAutoColumnWidth","isOptimizedForSmallDevice","readOnly","tableType","onChange","navigationPropertyPath","collection","creationMode","entitySet","mParameters","sPropertyName","aResults","isValueHelpRequired","doesValueHelpExist","getCurrentPageView","getFilterDelegate","oParentControl","replace","getTypeUtil","formatGroupHeader","oContext","sProperty","_oFormatInfo$typeConf","_oFormatInfo$typeConf2","mFormatInfos","oFormatInfo","obj","bExternalFormat","baseType","sValue","formatWithBrackets"],"sources":["TableDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,yDAAO,CAAC,eAAgB,0BAA2B,0BAA2B,2BAA4B,4BAA6B,0BAA2B,4CAA6C,wCAAyC,mCAAoC,wCAAyC,kCAAmC,0CAA2C,iCAAkC,iCAAkC,uBAAwB,4BAA6B,6BAA8B,6BAA8B,4CAA6C,sCAAuC,4BAA6B,uBAAwB,oCAAqC,sBAAuB,8BAA+B,kBAAmB,SAAUC,EAAKC,EAAWC,EAAWC,EAAYC,EAAeC,EAAaC,EAAoBC,EAAgBC,EAAcC,EAAaC,EAAaC,EAAqBC,EAAYC,EAAYC,EAAKC,EAAUC,EAAcC,EAAcC,EAAmBC,EAAiBC,EAAYC,EAAUC,EAAmBC,EAAQC,EAAWC,GACrpC,aAEA,IAAIC,EAAmBZ,EAAIY,iBAC3B,IAAIC,EAA+Bd,EAAWc,6BAC9C,IAAIC,EAAmBjB,EAAoBiB,iBAC3C,IAAIC,EAAmBlB,EAAoBkB,iBAC3C,IAAIC,EAA8BxB,EAAmBwB,4BACrD,MAAMC,EAAiC,gCAavC,OAAOC,OAAOC,OAAO,CAAC,EAAGX,EAAmB,CAC1CY,WAAY,EAYZC,oCAAqC,SAAUC,EAAQC,EAAWC,GAChE,GAAID,EAAUE,KAAKC,QAAQ,0CAA4C,EAAG,CACxE,MAAMC,EAAUL,EAAOM,aAAaC,KAAK,SAAUC,GACjD,OAAOA,EAAKC,oBAAsBR,EAAUE,IAC9C,GACA,MAAMO,EAAuBL,EAAUA,EAAQM,KAAK,yBAA2B,OAAS,MACxF,MAAMC,EAAaZ,EAAOa,WAAWC,eACrC,MAAMC,EAA2BrB,EAA4BkB,EAAWI,WAAWf,EAAUgB,eAC7F,MAAMC,EAAoBH,EAAyBI,eACnD,MAAMC,EAAaL,EAAyBM,aAC5C,MAAMC,EAAcF,EAAWG,OAAOC,QACtC,MAAMC,EAAc,GACpBH,EAAYI,KAAKC,QAAQ,SAAUC,GACjC,IAAIC,EACJ,OAAQD,EAAME,OACZ,IAAK,oDACHD,EAAkB9C,EAAgBgD,kCAAkCH,EAAO1B,EAAagB,EAAmBR,GAC3G,MACF,IAAK,uCACHmB,EAAkB9C,EAAgBiD,qBAAqBJ,EAAOlB,EAAsBR,EAAagB,GACjG,MACF,IAAK,gDACHW,EAAkB,CAChBI,WAAY,EACZC,cAAe1D,EAAW2D,eAAeP,EAAMQ,QAEjD,MACF,SAEF,GAAIP,EAAiB,CACnBJ,EAAYY,KAAKR,EAAgBI,WAAaJ,EAAgBK,cAChE,CACF,GACA,MAAMI,EAAUb,EAAYc,OAAO,SAAUC,EAAKC,GAChD,OAAOC,KAAKC,IAAIH,EAAKC,EACvB,EAAG,GACHxC,EAAU2C,eAAiB7E,EAAWkC,EAAU2C,eAAgB,CAC9DC,iBAAkB,CAChBC,oBAAqB,KACrBC,SAAUL,KAAKM,KAAKV,KAG1B,CACF,EACAW,+CAAgD,SAAUC,EAAOC,GAC/D,MAAMC,EAAWF,EAAMG,YACvB,IAAKF,EAASG,cAAe,CAC3B,MAAMC,EAAYL,EAAMrC,WAAWC,eACnC,GAAIqC,EAASlC,cAAgBsC,EAAW,CACtC,MAAMC,EAAYD,EAAUE,UAAU,GAAGN,EAASlC,iBAClD,GAAIuC,GAAaA,EAAU,6CAA8C,CACvEL,EAASP,eAAiB7E,EAAWoF,EAASP,gBAAkB,CAAC,EAAG,CAClEC,iBAAkB,CAChBa,IAAKN,EAASO,YAAY,YAAc,EAAI,IAGlD,CACF,CACF,CACF,EACAC,0CAA2C,SAAU5D,EAAQC,EAAW4D,EAAOC,EAAWC,GACxF,MAAMC,EAAYhE,EAASA,EAAOqD,YAAc,KAEhD,MAAMY,EAAYH,GAAaC,EAC/B,GAAIE,EAAW,CACbhE,EAAU2C,eAAiB7E,EAAWkC,EAAU2C,eAAgB,CAC9DC,iBAAkB,CAChBa,IAAKhB,KAAKM,KAAKxE,EAAW2D,eAAe8B,MAG/C,CACA,GAAIJ,EAAO,CACT5D,EAAU2C,eAAiB7E,EAAWkC,EAAU2C,eAAgB,CAC9DC,iBAAkB,CAEhBa,IAAKM,GAAaA,EAAUE,cAAgB,EAAI,IAGtD,CACF,EACAC,cAAe,SAAUhB,EAAUiB,GACjC,GAAIjB,EAASkB,MAAO,CAClB,IAAIC,EACJ,MAAMC,EAA0BH,EAASjB,EAASkB,OAClD,IAAKE,IAA4B,MAAQA,SAAiC,OAAS,EAAIA,EAAwBC,QAAU,IAAMF,EAAiBnB,EAASsB,QAAU,MAAQH,SAAwB,GAAKA,EAAeI,SAAS,MAAQvB,EAASwB,iBAAkB,CACjQxB,EAASkB,MAAQlB,EAASkB,MAAQ,KAAOlB,EAASwB,iBAAiBC,KAAK,OAAS,GACnF,QACOzB,EAASwB,gBAClB,CACF,EAEAE,oBAAqB,SAAU3B,EAAO4B,GACpC,MAAMV,EAAW,CAAC,EAElB,MAAMW,EAAW7B,EAAM8B,cACvBF,EAAWnD,QAAQwB,IACjB,IAAKA,EAASG,eAAiBH,EAASkB,MAAO,CAE7C,IAAKU,IAAa,MAAQA,SAAkB,OAAS,EAAIA,EAAS3E,QAAQ,UAAY,GAAK+C,EAAS8B,WAAaF,IAAa,MAAQA,SAAkB,OAAS,EAAIA,EAAS3E,QAAQ,YAAc,GAAK+C,EAAS+B,aAAeH,IAAa,MAAQA,SAAkB,OAAS,EAAIA,EAAS3E,QAAQ,WAAa,GAAK+C,EAASgC,UAAW,CAC1Uf,EAASjB,EAASkB,OAASD,EAASjB,EAASkB,SAAWe,UAAYhB,EAASjB,EAASkB,OAAOgB,OAAO,CAAClC,IAAa,CAACA,EACrH,CACF,IAEF2B,EAAWnD,QAAQwB,IACjBmC,KAAKvF,oCAAoCmD,EAAOC,EAAU2B,GAC1DQ,KAAKrC,+CAA+CC,EAAOC,GAI3DA,EAASoC,WAAaxH,EAAWoF,EAASoC,WAAY,CAAC,GACvDD,KAAKnB,cAAchB,EAAUiB,EAAS,GAExC,OAAOU,CACT,EACAU,cAAe,SAAUtC,GACvB,OAAOA,EAAMG,YAAYoC,qBAAqBC,OAChD,EACAC,0BAA2B,SAAU3F,GACnC,OAAOA,EAAOqD,YAAYoC,qBAAqBG,UACjD,EAOAC,wBAAyB,SAAU7F,GACjC,MAAM8F,EAAgB,CACpBC,KAAM,CAAC,GAET,IAAIC,EACJ,OAAOnH,EAAaoH,WAAWjG,GAAQkG,KAAK,SAAUC,GACpDH,EAASG,EACT,OAAOH,EAAOlF,eAAe2C,UAAU,+DACzC,GAAGyC,KAAK,SAAUE,GAChB,MAAMC,GAAiBD,GAAqB,IAAIE,IAAIC,GAC3CA,EAAQC,eAEjB,GAAIH,EAAcjG,QAAQ,oBAAsB,EAAG,CACjD,OAAO4F,EAAOlF,eAAe2C,UAAU,yDACzC,CACA,OAAO2B,SACT,GAAGc,KAAK,SAAUO,GAChB,GAAIA,EAAa,CACfX,EAAc,OAASlG,OAAOC,OAAO,CAAC,EAAG4G,EAC3C,CACF,GAAGC,MAAM,SAAUC,GACjB/I,EAAIgJ,MAAM,wDAAwDD,IACpE,GAAGT,KAAK,WACN,OAAOJ,CACT,EACF,EAUAe,gCAAiC,SAAUC,EAAYvD,EAAWL,GAEhE,MAAM6D,EAA2BrH,EAA4B6D,EAAUvC,WAAWnC,EAAamI,cAAc9D,EAAO,cAElH+D,EAA6BvH,EAA4B6D,EAAUvC,WAAW8F,EAAWI,iBAAiBC,qBAE1GC,EAAyBH,EAA2BI,UAAUC,IAC5D,IAAIC,EACJ,QAASA,EAAmBD,EAAKE,cAAgB,MAAQD,SAA0B,OAAS,EAAIA,EAAiBpH,QAAU4G,EAAyBU,iBAAiBtH,IAAI,GAE3KuH,EAA+BT,EAA2BU,MAAMP,EAAyB,EAAIA,EAAyB,GACxH,OAAQN,EAAWc,aAAalD,SAAS,MAAQoC,EAAWe,mBAAqB,OAASH,EAA6BI,KAAKvI,EAC9H,EACAwI,mBAAoB,SAAUxE,EAAWuD,EAAY5D,EAAO8E,GAC1D,IAAIC,EAAuBC,EAAwBC,EACnD,MAAMC,EAA0BtB,EAAWI,eACzC9F,EAAamC,EAAUE,UAAU2E,GACjCC,EAAqB9E,EAAU+E,qBAAqBF,GACpDG,GAAeN,EAAwBnB,EAAWvB,cAAgB,MAAQ0C,SAA+B,GAAKA,EAAsBO,WAAalJ,EAAiBwH,EAAWvB,WAAWiD,WAAa7J,EAAS8J,cAAc3B,EAAWvB,WAAWiD,UAAW1B,EAAWvB,WAAWmD,cAAe5B,EAAWvB,WAAWoD,aAAe,CAAC,EACxUC,EAAchK,EAAaiK,qBAAqBR,EAAoBjH,GACpE0H,EAAgBhC,EAAWvB,YAAcuB,EAAWvB,WAAWiD,aAAeN,EAAyBpB,EAAWvB,WAAWiD,aAAe,MAAQN,SAAgC,OAAS,EAAIA,EAAuB9H,QAAQ,WAAa,EAC7O2I,EAAqBlK,EAAamI,cAAc9D,EAAO,qBAAuB,OAC9E8F,EAAqCD,EAAqBzD,KAAKK,0BAA0BzC,GAAS,CAAC,EACnGmB,EAAQ5E,EAAiBqH,EAAWzC,OAAS,GAAI2D,GAAgB9E,GACnE,MAAM+F,EAAe,CACnB9I,KAAM2G,EAAW3G,KACjBc,aAAcmH,EACdc,WAAYpC,EAAWoC,WACvBC,MAAOrC,EAAWqC,MAClB9E,MAAOA,EACP+E,QAAStC,EAAWsC,QACpB7D,WAAYgD,EACZc,QAASvC,EAAWwC,eAAiB,WAAaR,EAClDS,eAAgBjE,KAAKkE,+BAA+B1C,EAAWyC,eAAgBzC,GAC/E2C,KAAM3C,EAAW2C,MAInB,GAAI3C,EAAWlE,gBAAkBhD,OAAO8J,KAAK5C,EAAWlE,gBAAgB4B,OAAS,EAAG,CAClFyE,EAAarG,eAAiBkE,EAAWlE,cAC3C,CACA,GAAIkE,EAAW6C,2BAA4B,CACzCV,EAAaU,2BAA6B7C,EAAW6C,0BACvD,CAIA,IAAKxB,EAAwBrB,EAAWxD,iBAAmB,MAAQ6E,SAA+B,GAAKA,EAAsB3D,OAAQ,CACnIyE,EAAa3F,cAAgBwD,EAAWxD,cAExC,GAAI2F,EAAaM,eAAgB,CAC/B,IAAIK,EACJX,EAAaM,eAAeM,MAAQD,EAAwB9C,EAAWyC,kBAAoB,MAAQK,SAA+B,OAAS,EAAIA,EAAsBC,IACvK,CACF,KAAO,CACL,IAAIC,EAEJb,EAAaxE,KAAOqC,EAAWc,aAE/BqB,EAAahE,SAAW6B,EAAW7B,SACnC,GAAI8D,EAAoB,CACtBzD,KAAKyE,wCAAwCd,EAAcnC,EAC7D,CACAmC,EAAa/D,aAAe0D,GAAetD,KAAKuB,gCAAgCC,EAAYvD,EAAWL,MAEtG6F,IAAuBC,EAAmCC,EAAa9I,UAAY2J,EAAahD,EAAWkD,aAAe,MAAQF,SAAoB,GAAKA,EAAWG,uBACvKhB,EAAaiB,IAAMpD,EAAWqD,MAC9BlB,EAAa9D,UAAY2B,EAAWsD,YACpC,GAAItD,EAAWuD,gBAAiB,CAC9B,MAAMC,EAAoBhF,KAAKE,cAActC,GAAO3C,KAAK,SAAUC,GACjE,IAAI+J,EACJ,OAAO/J,EAAKL,SAAWoK,EAAwBzD,EAAWuD,mBAAqB,MAAQE,SAA+B,OAAS,EAAIA,EAAsBC,aAC3J,GACA,GAAIF,EAAmB,CACrBrB,EAAawB,KAAO3D,EAAWuD,gBAAgBI,KAC/CxB,EAAayB,cAAgB5D,EAAWc,aACxCqB,EAAa0B,oBAAsBL,EAAkB1C,YACvD,CACF,CACAqB,EAAa2B,KAAO9D,EAAWuD,iBAAmBvD,EAAWuD,gBAAgBG,aAC7EvB,EAAa4B,cAAgB/D,EAAW+D,cACxC,GAAI/D,EAAWnC,iBAAkB,CAC/BsE,EAAatE,iBAAmBmC,EAAWnC,iBAAiB2B,IAAIwE,GACvDrL,EAAiBqL,EAAiB9C,GAAgB9E,GAE7D,CACF,CACAoC,KAAK1B,0CAA0CV,EAAO+F,EAAcnC,EAAW2C,KAAM3C,EAAWiE,SAAUjE,EAAWkE,cACrH,OAAO/B,CACT,EAQAO,+BAAgC,SAAUD,EAAgBzC,GACxD,IAAImE,EACJ,MAAMC,EAAe5F,KAAK6F,kBAAkBF,EAAyBnE,EAAWvB,cAAgB,MAAQ0F,SAAgC,OAAS,EAAIA,EAAuBzC,WAC5K,GAAIe,EAAgB,CAClB,GAAI2B,IAAiB3B,EAAe6B,iBAAkB,CACpD7B,EAAe8B,OAASH,CAC1B,CAEA,GAAI3B,EAAe+B,SAAU,CAC3B,IAAIC,EACJhC,EAAe+B,UAAYC,EAAyBzE,EAAWyC,kBAAoB,MAAQgC,SAAgC,OAAS,EAAIA,EAAuBD,QACjK,CACF,CACA,OAAO/B,CACT,EACAQ,wCAAwCd,EAAcnC,GACpD,GAAIA,EAAW0E,aAAc,CAC3BvC,EAAauC,aAAe1E,EAAW0E,YACzC,CACA,GAAI1E,EAAWkD,UAAW,CACxBf,EAAae,UAAYlD,EAAWkD,SACtC,CACF,EACAyB,yBAA0B,SAAU3E,EAAY5D,EAAO8E,GACrD,IAAI0D,EAAS,GACb,GAAI5E,EAAW6E,OAAQ,CACrB,GAAI7E,EAAW6E,OAAOC,WAAW,eAAgB,CAC/C,MAAMC,EAAgB/E,EAAW6E,OAAOG,UAAU,GAAIhF,EAAW6E,OAAOnH,OAAS,GACjFkH,EAASxI,EAAMrC,WAAWC,eAAe2C,UAAUoI,EACrD,KAAO,CACLH,EAASjM,EAAiBqH,EAAW6E,OAAQ3D,GAAgB9E,EAC/D,CACF,CAEA,MAAM+F,EAAe,CACnB9I,KAAM2G,EAAW3G,KACjB+I,WAAY9D,UACZ+D,MAAO/D,UACPf,MAAOqH,EAAOK,WACdC,KAAM,aAEN3C,QAASvC,EAAWwC,eAAiB,SACrCC,eAAgBzC,EAAWyC,eAC3B3G,eAAgBkE,EAAWlE,gBAK7B,GAAIkE,EAAWxD,eAAiBwD,EAAWxD,cAAckB,OAAQ,CAC/D,IAAIyH,EAAwBC,EAC5BjD,EAAa3F,cAAgBwD,EAAWxD,cAExC2F,EAAaM,eAAiB,CAC5BM,MAAOoC,EAAyBnF,EAAWyC,kBAAoB,MAAQ0C,SAAgC,OAAS,EAAIA,EAAuBpC,KAC3IyB,UAAWY,EAAyBpF,EAAWyC,kBAAoB,MAAQ2C,SAAgC,OAAS,EAAIA,EAAuBZ,SAEnJ,KAAO,CAELrC,EAAaxE,KAAOqC,EAAW3G,KAC/B8I,EAAahE,SAAW,MACxBgE,EAAa/D,WAAa,KAC5B,CACA,OAAO+D,CACT,EACAkD,sCAAuC,SAAUC,GAC/C,SAAUA,EAAY1D,eAAiB0D,EAAY1D,cAAc2D,mBAAqBD,EAAY1D,eAAiB0D,EAAY1D,cAAc4D,qCAC/I,EACAC,2BAA4B,SAAUC,EAASC,GAC7C,MAAMC,EAAkBF,EAAQlM,aAChC,MAAMqM,EAA0BH,EAAQI,kBAAkB,YAC1D,MAAMC,EAAgBF,GAA2BA,EAAwBG,UACzE,GAAIJ,GAAmBC,EAAyB,CAC9C,IAAK,MAAMI,KAASL,EAAiB,CACnC,GAAIpH,KAAK6G,sCAAsCM,IAAiBA,EAAatM,OAASuM,EAAgBK,GAAOtM,kBAAmB,CAC9H,GAAIkM,EAAwBhJ,YAAYkJ,EAAgBlN,KAAoCyF,UAAW,CACrGuH,EAAwBK,YAAYH,EAAgBlN,EAAgC8M,EAAatM,MACjG,KACF,CACF,CACF,CACF,CACF,EACA8M,0BAA2B,SAAUjN,EAAQkN,EAAiBtM,EAAYuM,GAExE,MAAMC,EAAe9O,EAAY+O,iBAAiBH,GAClD,IAAII,EAAqB,GACzB,MAAMC,EAAMtP,EAAYuP,4BAA4BJ,EAAcxM,GAClE,MAAM6M,EAAsBF,EAAIG,wBAChC,OAAOC,QAAQC,QAAQtI,KAAKE,cAAcxF,IAASkG,KAAK2H,IAEtD,GAAIA,EAAU,CACZ,IAAIC,EACJD,EAASlM,QAAQyK,IACf9G,KAAKiH,2BAA2BvM,EAAQoM,GACxC,OAAQA,EAAYJ,MAClB,IAAK,aACH8B,EAAgBxI,KAAKyC,mBAAmBnH,EAAYwL,EAAapM,EAAQmN,GACzE,GAAIW,GAAiBL,EAAoBrN,QAAQ0N,EAAc3N,SAAW,EAAG,CAC3E2N,EAAcC,cAAgBlP,EAAamP,aAAaF,IAAkB,EAAI,CAChF,CACA,MACF,IAAK,OACL,IAAK,UACHA,EAAgBxI,KAAKmG,yBAAyBW,EAAapM,EAAQmN,GACnE,MACF,QACE,MAAM,IAAIc,MAAM,yBAAyB7B,EAAYJ,QAEzDsB,EAAmBjL,KAAKyL,EAAc,EAE1C,IACC5H,KAAK,KACNoH,EAAqBhI,KAAKT,oBAAoB7E,EAAQsN,EAAmB,GACxE5G,MAAM,SAAUC,GACjB/I,EAAIgJ,MAAM,sDAAsDD,IAClE,GAAGT,KAAK,WACN,OAAOoH,CACT,EACF,EACAY,qCAAsC,SAAUhL,EAAOiL,EAAgB5K,EAAWyE,GAChF,MAAMoG,EAAoBvP,EAAawP,oBAAoBnL,GAC3D,GAAIkL,EAAmB,CACrB,OAAOT,QAAQC,QAAQQ,EACzB,CACA,OAAO9I,KAAK2H,0BAA0B/J,EAAOiL,EAAgB5K,EAAWyE,GAAc9B,KAAK,SAAUoI,GACnGzP,EAAa0P,oBAAoBrL,EAAOoL,GACxC,OAAOA,CACT,EACF,EACAE,oBAAqB,SAAUxO,EAAQyO,GACrC,IAAIC,EAAa,GACjB,MAAMC,EAAmB3P,EAAW4P,iBAAiB5O,GACnD6O,EAAoBJ,EAAahK,KAAKmH,WAAW,KAAO6C,EAAahK,KAAKqK,OAAO,GAAKL,EAAahK,KACrG,MAAMsK,EAA4B,WAChC,GAAI/O,EAAOW,KAAK,kBAAoBX,EAAOgP,iBAAkB,CAC3D,MAAO,2CACT,KAAO,CACL,MAAO,4CACT,CACF,EACA,MAAMC,EAAqBjP,EAAOkP,YAClC,GAAID,IAAuB,eAAeE,KAAKF,GAAqB,CAElE,GAAIN,EAAiBS,QAAUT,EAAiBU,SAAWV,EAAiBU,QAAQ7K,OAAQ,CAE1FkK,EAAaK,GACf,KAAO,CACLL,EAAa,gCACf,CACF,MAAO,GAAIC,EAAiBS,QAAUT,EAAiBU,SAAWV,EAAiBU,QAAQ7K,OAAQ,CAEjGkK,EAAaK,GACf,KAAO,CACLL,EAAa,2CACf,CACA1O,EAAOsP,UAAU9P,EAAiBQ,GAAQuP,QAAQb,EAAYtJ,UAAWyJ,GAC3E,EACAW,wBAAyB,SAAUxP,EAAQyP,GACzC,MAAMC,EAAW1P,GAAUA,EAAO2P,gBAChCC,EAAwBH,GAAyBA,EAAsB9L,YAAY,wBACrF,GAAI8L,IAA0BG,EAAuB,CACnDF,EAASG,mBAAmB,WAE1BJ,EAAsBzC,YAAY,mBAAoB,IACtD,MAAM8C,EAAoB9P,EAAO+P,sBACjCN,EAAsBzC,YAAY,mBAAoB8C,GACtDL,EAAsBzC,YAAY,2BAA4B8C,EAAkBtL,QAChF,MAAMwL,EAA+BC,KAAKC,MAAMtR,EAAauR,gBAAgBtR,EAAamI,cAAchH,EAAQ,2BAChHhC,EAAcoS,oBAAoBX,EAAuBO,EAA8BF,EAAmB,SAE1G1R,EAAaiS,oCAAoCZ,EAAuBK,GACxE,MAAM9L,EAAYhE,EAASA,EAAOqD,YAAc,KAChD,GAAIW,EAAW,CACbA,EAAUsM,eAAetQ,EAC3B,CACF,GACAyP,EAAsBzC,YAAY,uBAAwB,KAC5D,CACF,EACAuD,OAAQ,SAAUvQ,EAAQyO,GACxB,MAAMzK,EAAYhE,EAAOqD,YACzB,MAAMmN,EAAexM,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUL,YAAY,oBACjGK,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUgJ,YAAY,kBAAmBwD,GAC/F,IAAKA,EAAc,CACjBxR,EAAWyR,eAAezQ,GAC1Bd,EAAkBqR,OAAOG,MAAMpL,KAAM,CAACtF,EAAQyO,IAC9CzP,EAAW2R,aAAa3Q,GACxBsF,KAAKkJ,oBAAoBxO,EAAQyO,GACjC,OAAOzP,EAAW4R,UAAU5Q,GAAQkG,KAAKZ,KAAKkK,wBAAwBxP,EAAQA,EAAO4M,kBAAkB,cAAclG,MAAM,SAAUmK,GACnIjT,EAAIgJ,MAAM,gDAAiDiK,EAC7D,EACF,CACA,OAAOlD,QAAQC,SACjB,EAOAkD,gBAAiB,SAAU5N,GACzB,OAAOrE,EAAaoH,WAAW/C,GAAOgD,KAAKC,GAClCb,KAAK4I,qCAAqChL,EAAOrE,EAAamI,cAAc9D,EAAO,cAAeiD,EAAMrF,iBAC9GoF,KAAKpB,IACN5B,EAAM0J,kBAAkB,YAAYI,YAAY,2BAA4B,MAC5E,OAAOlI,CAAU,EAErB,EACAiM,QAAS,SAAU/Q,GACjB,OAAOd,EAAkB6R,QAAQL,MAAMpL,KAAM,CAACtF,IAASkG,KAAK,WAM1D,MAAM8K,EAAmBhR,EAAOiR,iBAChC,GAAID,EAAkB,CACpBA,EAAiBE,kBAAkB,KACrC,CACF,EACF,EACAC,kBAAmB,SAAUnR,EAAQyO,GACnC,IAAI2C,EACJlS,EAAkBiS,kBAAkBT,MAAMpL,KAAM,CAACtF,EAAQyO,IACzDnJ,KAAK+L,2BAA2BrR,EAAQyO,GACxCnJ,KAAKkJ,oBAAoBxO,EAAQyO,GAMjC,KAAM2C,EAAwBpR,EAAOiR,oBAAsB,MAAQG,SAA+B,OAAS,EAAIA,EAAsBxE,uBAAyB,KAAM,CAClKvN,EAAYiS,sBAAsBtR,EAAOiR,iBAAkBxC,EAAahK,KAAMzE,EAAO4M,oBAAqB5M,EAAOa,WAAYb,EAAOa,SAAS,MAAM8C,YAAY,eACjK,CACF,EACA4N,uBAAwB,SAAUC,GAChC,MAAMC,EAAcD,EAAU7B,gBAC9B,GAAI8B,EAAa,CACfA,EAAYC,gBAAgB,gBAAiB,WAC3CC,WAAW,WACT,MAAMC,EAAS3T,EAAY4T,cAAcL,GACzC,GAAII,EAAQ,CACV5S,EAAW8S,4BAA4BF,EAAOG,gBAAiBP,EACjE,CACF,EAAG,EACL,EACF,CACF,EACAQ,cAAe,SAAUhS,EAAQyO,EAAciB,GAC7C,MAAM1L,EAAYhE,EAAOqD,YACzB,MAAMmN,EAAexM,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUL,YAAY,oBACjG,IAAK6M,EAAc,CACjB,IAAIyB,EAAqB,MACzB,MAAML,EAAS3T,EAAY4T,cAAc7R,GACzC,MAAM2M,EAA0B3M,EAAO4M,kBAAkB,YACzD,MAAMsF,EAA2B,6BACjC,MAAMC,EAAuBxF,EAAwBhJ,YAAYuO,GACjE,MAAMT,EAAczR,EAAO2P,gBAC3B,GAAI8B,EAAa,CAMf,MAAMW,EAAaX,EAAYY,WAAW,eAC1CJ,EAAqBnU,EAAU2Q,EAAaY,QAAS+C,EAAW,KAAO3D,EAAahK,OAASgN,EAAY3E,WAEzG2E,EAAYa,gCAAgCC,UAAY9D,EAAa+D,WAAWD,UAAYJ,GAAwBP,GAAUA,EAAOa,cAAcC,gBAAkB,YACvK,CACAxT,EAAkB8S,cAActB,MAAMpL,KAAM,CAACtF,EAAQyO,EAAciB,IACnE1P,EAAO2S,UAAU,kBACjB,GAAIV,GAAsBjS,EAAOkP,aAAeQ,EAAU,CACxD+B,EAAYmB,eAAenB,EAAYoB,cAAcC,QAAQ,WAC3DnG,EAAwBK,YAAYkF,EAA0B,MAChE,GAAGxL,MAAM,SAAUmK,GACjBjT,EAAIgJ,MAAM,mCAAoCiK,EAChD,GACAlE,EAAwBK,YAAYkF,EAA0B,KAChE,CACA5M,KAAKiM,uBAAuBvR,EAC9B,CACAgE,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUgJ,YAAY,kBAAmBwD,EACjG,EACAuC,mCAAoC,SAAU/S,GAG5C,MAAMgT,EAAiBnV,EAAUgB,EAAamI,cAAchH,EAAQ,oBAGpE,GAAIgT,EAAeR,WAAWS,sBAAuB,CACnD,MAAMC,EAAiBrU,EAAamI,cAAchH,EAAQ,wBAC1D,MAAMmT,EAAgBnT,EAAOa,SAAS,YACtC,MAAMuS,EAAiBD,EAAc1P,UAAU,oBAAsB,CAAC,EACtE,IAAK2P,EAAeF,GAAiB,CACnCE,EAAeF,GAAkBlT,EAAOqT,QACxCF,EAAcnG,YAAY,kBAAmBoG,EAC/C,MAAO,GAAIA,EAAeF,KAAoBlT,EAAOqT,QAAS,QACrDL,EAAeR,WAAWS,qBACnC,CACF,CACA,OAAOD,CACT,EACA3B,2BAA4B,SAAUrR,EAAQyO,GAC5C,MAAMgB,EAAwBzP,EAAO4M,kBAAkB,YACvDhN,OAAOC,OAAO4O,EAAcnJ,KAAKyN,mCAAmC/S,IAMpE,GAAIA,EAAO2P,gBAAiB,CAC1BlB,EAAa6E,UAAY,KAC3B,CAIA,GAAI7D,EAAuB,CACzBA,EAAsBzC,YAAY,uBAAwB,MAC5D,CACA,IAAIuG,EACJ,MAAMC,EAAcxU,EAAW4P,iBAAiB5O,GAEhD,GAAIwT,EAAYnE,QAAQ7K,OAAS,EAAG,CAClC+O,EAAU,IAAIpU,EAAO,CACnBkQ,QAASmE,EAAYnE,QACrBoE,IAAK,MAET,CACA,GAAID,EAAYE,YAAa,CAC3BjF,EAAahK,KAAO+O,EAAYE,WAClC,CACA,MAAMC,EAAsB3T,EAAO4T,wBACnC,GAAID,GAAuBA,EAAoBE,cAAe,CAE5D,GAAIpF,EAAaY,QAAQ7K,OAAS,EAAG,CACnC+O,EAAU,IAAIpU,EAAO,CACnBkQ,QAASZ,EAAaY,QAAQhK,OAAOmO,EAAYnE,SACjDoE,IAAK,OAEPnO,KAAKwO,iCAAiCrF,EAAc+E,EAAaD,EACnE,CACF,KAAO,CACLjO,KAAKwO,iCAAiCrF,EAAc+E,EAAaD,EACnE,CACF,EACAO,iCAAkC,SAAUC,EAAaC,EAAYC,GACnEF,EAAY1E,QAAU4E,EACtB,GAAID,EAAW5E,OAAQ,CACrB2E,EAAYvB,WAAWD,QAAUtU,EAAYiW,oBAAoBF,EAAW5E,OAC9E,KAAO,CACL2E,EAAYvB,WAAWD,QAAUnN,SACnC,CACF,EACA+O,8BAA+B,SAAU/H,EAAagI,EAAOC,EAAWC,GACtE,MAAMC,EAAe,IAAInV,EAAUgN,GACjCoI,EAAQ,IAAIpV,EAAU,CACpBqV,GAAIH,IAENI,EAAwB,CACtBC,gBAAiB,CACfrP,KAAMkP,EAAMlM,qBAAqB,KACjCsM,OAAQL,EAAajM,qBAAqB,MAE5CuM,OAAQ,CACNvP,KAAMkP,EACNI,OAAQL,IAGd,OAAO1V,EAAaiW,wBAAwB,mCAAoCJ,EAAuB,CACrGK,KAAMX,GACLC,GAAWnO,KAAK,SAAU8O,GAC3BT,EAAaU,UACb,OAAOD,CACT,EACF,EACAE,4BAA6BC,eAAgB/I,EAAagI,EAAOC,EAAWC,GAC1E,MAAMC,EAAe,IAAInV,EAAUgN,GACjCoI,EAAQ,IAAIpV,EAAU,CACpBqV,GAAIH,IAENI,EAAwB,CACtBC,gBAAiB,CACfrP,KAAMkP,EAAMlM,qBAAqB,KACjCsM,OAAQL,EAAajM,qBAAqB,MAE5CuM,OAAQ,CACNvP,KAAMkP,EACNI,OAAQL,IAGd,MAAMa,QAAuBvW,EAAaiW,wBAAwB,iCAAkCJ,EAAuB,CACzHW,MAAO,OAET,IAAKD,EAAgB,CACnB,OAAOzH,QAAQC,QAAQ,KACzB,CACA,MAAM0H,EAAUF,EAAeG,qBAAqB,QAAQ,GAC1DC,EAAsBJ,EAAeG,qBAAqB,qBAAqB,GACjFC,EAAoBC,YAAYH,GAChC,GAAIlJ,EAAYd,SAAU,CACxB,MAAMoK,GAAY,IAAIC,WAAYC,gBAAgBxJ,EAAYd,SAAU,YACxEkK,EAAoBK,YAAYH,EAAUI,kBAC5C,KAAO,CACLlY,EAAIgJ,MAAM,6DAA6DwF,EAAYT,UACnF,OAAOgC,QAAQC,QAAQ,KACzB,CACA,GAAIyG,EAAU0B,UAAY,gBAAiB,CACzC,OAAOX,CACT,CACA,OAAOnW,EAAS+W,KAAK,CACnBhK,KAAM,MACNiK,WAAYb,GAEhB,EACAjK,iBAAkB,SAAU+K,GAC1B,OAAQA,GACN,IAAK,WACH,OAAO7X,EAAY8X,yBACrB,IAAK,qBACH,OAAO9X,EAAY+X,iCACrB,IAAK,gBACH,OAAO/X,EAAYgY,yBACrB,QACE,OAAOjR,UAEb,EACAkR,qBAAsB,SAAU1V,EAAY2V,EAAenJ,GACzD,IAAIoJ,EAAU,GACZC,EAAiB7V,EAAW6C,UAAU8S,GACxC,GAAIE,EAAeC,OAASD,EAAeC,QAAU,WAAY,CAC/DD,EAAiB7V,EAAW6C,UAAU,GAAG8S,iDACzCA,EAAgB,GAAGA,+CACrB,CACA,OAAQE,EAAe3U,OACrB,IAAK,oDACH,GAAIlB,EAAW6C,UAAU,GAAG8S,4BAAwC7R,SAAS,yCAA0C,CACrH9D,EAAW6C,UAAU,GAAG8S,iCAA6C5U,QAAQ,CAACgV,EAAQC,KACpFJ,EAAUA,EAAQnR,OAAOC,KAAKgR,qBAAqB1V,EAAY,GAAG2V,iCAA6CK,KAAU,EAE7H,CACA,MACF,IAAK,yDACL,IAAK,8CACL,IAAK,uCACL,IAAK,gEACL,IAAK,iDACHJ,EAAQnU,KAAKzB,EAAW6C,UAAU,GAAG8S,kBACrC,MACF,IAAK,gDACL,IAAK,+DACH,MACF,QAGE,GAAIA,EAAcnW,QAAQgN,KAAkB,EAAG,CAC7CoJ,EAAQnU,KAAKkU,EAAczK,UAAUsB,EAAa5I,OAAS,IAC3D,KACF,CACAgS,EAAQnU,KAAKzD,EAAaiY,kBAAkBN,EAAe,OAC3D,MAEJ,OAAOC,CACT,EACAM,kCAAmC,SAAU9W,EAAQ6N,EAAUzB,GAC7D,MAAMO,EAA0B3M,EAAO4M,kBAAkB,YACzD,IAAKD,EAAyB,CAC5B,MACF,CACA,MAAME,EAAgBF,EAAwBG,UAC9C,MAAMiK,EAA6BlJ,EAASoG,OAAO5T,GAC1CiF,KAAK6G,sCAAsC9L,IAEpD,MAAMqM,EAAkB1M,EAAOM,aAC/B,IAAI0W,EAAuBC,EAAoBC,EAA8BC,EAC7E,IAAK,MAAMC,KAAK1K,EAAiB,CAC/BuK,EAAqBvK,EAAgB0K,GAAG3W,kBACxC,IAAK,MAAM4W,KAAKN,EAA4B,CAC1CI,EAAgCJ,EAA2BM,GAAGlX,KAC9D,GAAI8W,IAAuBE,EAA+B,CACxDD,EAA+B,KAC/B,KACF,CACA,GAAI9K,GAAeA,EAAYjM,OAASgX,EAA+B,CACrEH,EAAwB5K,EAAYjM,IACtC,CACF,CACA,GAAI+W,EAA8B,CAChCvK,EAAwBK,YAAYH,EAAgBlN,EAAgCsX,GACpF,KACF,CACF,CACA,IAAKC,GAAgCF,EAAuB,CAC1DrK,EAAwBK,YAAYH,EAAgBlN,EAAgCqX,EACtF,CACF,EACAM,WAAY,SAAUtX,EAAQuX,EAAmBC,GAC/C,IAAIC,EAAe,KACnB,IAAKF,EAAmB,CAGtB,OAAO5J,QAAQC,QAAQ6J,EACzB,CACA,MAAMpD,EAAYmD,EAAaE,SAC/B,MAAMC,EAAgBtD,EAAU1Q,YAAY4T,EAAmB,gBAC/D,GAAII,GAAiBA,EAAcvX,SAAWuX,EAAcvX,QAAQ,gBAAkB,EAAG,CACvFiU,EAAUuD,kBAAkB5X,EAAQ,aAAcuX,GAClDE,EAAe,KACjB,CACA,GAAIzX,EAAO6X,KAAOxD,EAAU0B,UAAY,gBAAiB,CACvDzQ,KAAKwS,yBAAyBzD,EAAWrU,EAAQsF,KAAKE,cAAcxF,GACtE,CACA,OAAO2N,QAAQC,QAAQ6J,EACzB,EACAM,cAAe,SAAUP,GACvB,OAAOA,EAAaxP,cAAgBwP,EAAaxP,aAAanH,WAAWC,cAC3E,EACAgX,yBAA0B,SAAUzD,EAAWrU,EAAQ6N,EAAUzB,GAC/D,GAAIiI,EAAU0B,UAAY,gBAAiB,CACzCzQ,KAAKwR,kCAAkC9W,EAAQ6N,EAAUzB,EAC3D,CACF,EACA4L,YAAa,SAAUC,GACrB,OAAOA,GAAqB7S,SAC9B,EACA8S,cAAe,SAAUC,EAAYC,EAAmBT,GACtD,GAAIS,IAAsBT,EAAe,CACvC,OAAOQ,CACT,CACA,OAAO/S,SACT,EACAiT,qBAAsB,SAAUC,EAAqBC,EAAoBC,GACvE,GAAID,IAAuBC,EAAkB,CAC3C,OAAOF,EAAoB,gCAC7B,CACA,OAAO3K,QAAQC,SACjB,EACA6K,gBAAiB,SAAUC,GACzB,IAAIC,EACJ,GAAID,IAAiBtT,UAAW,CAC9BsT,SAAsBA,IAAiB,UAAYA,EAAeA,IAAiB,OACnFC,EAAiBD,EAAe,UAAY,WAC5C,MAAO,CACLE,YAAaF,EACbC,eAAgBA,EAEpB,CACA,MAAO,CACLC,YAAaxT,UACbuT,eAAgBvT,UAEpB,EACAyT,mBAAoB,SAAUC,EAAYzE,EAAWrU,GACnD,GAAI8Y,EAAY,CACd,OAAOzE,EAAUuD,kBAAkB5X,EAAQ,aAAc8Y,EAAY,EACvE,CACA,OAAO1T,SACT,EASA2T,QAAS5D,eAAgBnV,EAAQoY,EAAmBZ,GAClD,MAAM5W,EAAa0E,KAAKyS,cAAcP,GACpCnD,EAAYmD,EAAaE,SACzBpD,EAAWD,EAAUhB,MAAMrT,GAC3B6N,EAAW7N,EAAO6X,IAAMvS,KAAKE,cAAcxF,GAAU,KACvD,IAAK6N,EAAU,CACb,OAAOF,QAAQC,QAAQ,KACzB,CACA,MAAMxB,EAAcyB,EAAStN,KAAK,SAAUF,GAC1C,OAAOA,EAAQF,OAASiY,CAC1B,GACA,IAAKhM,EAAa,CAChBxO,EAAIgJ,MAAM,GAAGwR,mCACb,OAAOzK,QAAQC,QAAQ,KACzB,CACAtI,KAAKwS,yBAAyBzD,EAAWrU,EAAQ6N,EAAUzB,GAE3D,GAAIA,EAAYJ,OAAS,UAAW,CAClC,OAAO1G,KAAK6O,8BAA8B/H,EAAaoL,EAAazC,KAAMV,EAAWC,EACvF,CACA,GAAIlI,EAAYJ,OAAS,OAAQ,CAC/B,OAAO1G,KAAK4P,4BAA4B9I,EAAaoL,EAAazC,KAAMV,EAAWC,EACrF,CAEA,IAAK1T,EAAY,CACf,OAAO+M,QAAQC,QAAQ,KACzB,CACA,MAAMoL,QAAcna,EAAamI,cAAchH,EAAQ,WAAYqU,GACnE,MAAMnH,QAAwBrO,EAAamI,cAAchH,EAAQ,aAAcqU,GAC/E,MAAM4D,QAA0BpZ,EAAamI,cAAchH,EAAQ,iBAAkBqU,GACrF,MAAM4E,EAAW3T,KAAK0S,YAAYC,GAClC,MAAMiB,EAAgBtY,EAAW0H,qBAAqB0Q,GACtD,MAAM1L,QAA2BhI,KAAK4I,qCAAqClO,EAAQkN,EAAiBtM,EAAY4W,EAAaxP,cAC7H,MAAM8F,EAAgBR,EAAmB/M,KAAK,SAAU4Y,GACtD,OAAOA,EAAMhZ,OAASiY,CACxB,GACA,MAAMgB,EAAmBxY,EAAW0H,qBAAqBwF,EAAc7M,cACvE,MAAMoY,EAAgB/T,KAAKgR,qBAAqB1V,EAAYkN,EAAc7M,aAAc+X,GACxF,MAAMM,EAAc,CAClBlM,aAAc4L,EACdO,eAAgB,iBAChBC,SAAUxZ,EACVY,aACAyT,YACAvG,iBAEF,MAAMwK,EAAsBnD,UAC1B,MAAMX,EAAQ,IAAIpV,EAAU,CACxBqV,GAAIH,EACJmF,eAAgBR,IAElBvE,EAAwB,CACtBC,gBAAiB,CACfrP,KAAMkP,EAAMlM,qBAAqB,KACjC9E,UAAW4V,EACXM,YAAaR,GAEfrE,OAAQ,CACNvP,KAAMkP,EACNhR,UAAW5C,EACX2C,UAAW3C,EACX8Y,YAAa9Y,IAGnB,IACE,MAAMkY,QAAmBja,EAAaiW,wBAAwB6E,EAAejF,EAAuB,CAAC,EAAGL,GACxG,aAAa/O,KAAKuT,mBAAmBC,EAAYzE,EAAWrU,EAC9D,CAAE,MAAO6Q,GAEPjT,EAAIgJ,MAAM,0BAA0BiK,EAAO+I,WAC3C,OAAO,IACT,CAAE,QACApF,EAAMS,SACR,GAEF,MAAM4E,EAAqB,CAACC,EAAiB1F,KAC3C,MAAMuF,EAAgB,6BACtB,IAAIjB,EACJ,IAAIqB,EACJ,IAAIC,EACJ,IAAIC,EACJ,OAAOtM,QAAQuM,IAAI,CAACrb,EAAamI,cAAchH,EAAQ,6BAA8BqU,GAAYxV,EAAamI,cAAchH,EAAQ,YAAaqU,GAAYxV,EAAamI,cAAchH,EAAQ,WAAYqU,GAAYxV,EAAamI,cAAchH,EAAQ,eAAgBqU,KAAanO,KAAKiU,IAC3RzB,EAAeyB,EAAY,GAC3BJ,EAAuBI,EAAY,GACnCH,EAAsBG,EAAY,GAClCF,EAA0BE,EAAY,GAKtC,MAAMC,EAAgB9U,KAAKmT,gBAAgBC,GAC3CA,EAAe0B,EAAcxB,YAC7B,MAAMD,EAAiByB,EAAczB,eACrC,MAAMnE,EAAQ,IAAIpV,EAAU,CACxBib,sBAAuBra,EAAOqD,YAAYgX,sBAC1CC,0BAA2Bta,EAAOqD,YAAYiX,0BAC9CC,SAAU7B,EACVC,eAAgBA,EAChB6B,UAAWT,EACXU,SAAUT,EACVvF,GAAIH,EACJoG,uBAAwBtC,EACxBtR,WAAYsF,EACZuO,WAAY,CACV3B,MAAOA,EACPhT,OAAQpF,GAEVga,aAAcX,IAEhBvF,EAAwB,CACtBC,gBAAiB,CACfkG,UAAW3B,EACXyB,WAAYzB,EACZ1V,UAAW4V,EACX9T,KAAMkP,EAAMlM,qBAAqB,KACjCsM,OAAQJ,EAAMlM,qBAAqB,gBAErCuM,OAAQ,CACNvP,KAAMkP,EACNqG,UAAWja,EACX+Z,WAAY/Z,EACZ4C,UAAW5C,EACX2C,UAAW3C,EACXgU,OAAQJ,GAEVxM,aAAcwP,EAAaxP,cAE/B,OAAOnJ,EAAaiW,wBAAwB6E,EAAejF,EAAuB,CAChFK,KAAMX,GACLC,GAAWvB,QAAQ,WACpB0B,EAAMS,SACR,EAAE,EACF,QAEEtH,QAAQuM,IAAIb,EAAc/S,IAAI6O,UAClC,MAAM2F,EAAclb,OAAOC,OAAO,CAAC,EAAGyZ,EAAa,CACjDyB,cAAeA,IAEjB,MAAMC,QAAiBrN,QAAQuM,IAAI,CAACrb,EAAaoc,oBAAoBH,GAAcjc,EAAaqc,mBAAmBJ,KACnH,MAAMvC,EAAqByC,EAAS,GAClCxC,EAAmBwC,EAAS,GAC9B,OAAO1V,KAAK+S,qBAAqBC,EAAqBC,EAAoBC,EAAiB,IAI7F,MAAMzD,EAAOyC,EAAazC,MAAQ9W,EAAY4T,cAAc7R,KAAYwX,EAAaxP,aAAe/J,EAAYkd,mBAAmB3D,EAAaxP,cAAgB5C,WAChK,OAAOyU,EAAmB/L,EAAeiH,EAC3C,EAMAqG,kBAAmB,WACjB,OAAOxb,OAAOC,OAAO,CACnBC,WAAY,GACXhB,EAAmB,CACpBia,QAAS,SAAUsC,EAAgBjD,GACjC,GAAIA,EAAkBhY,QAAQ,gBAAkB,EAAG,CAEjDgY,EAAoBA,EAAkBkD,QAAQ,aAAc,GAC9D,CACA,OAAOxc,EAAkBia,QAAQsC,EAAgBjD,EACnD,GAEJ,EAMAmD,YAAa,WAEX,OAAO5c,CACT,EACA6c,kBAAkBxb,EAAQyb,EAAUC,GAClC,IAAIC,EAAuBC,EAC3B,MAAMC,EAAehd,EAAawP,oBAAoBrO,GACpD8b,EAAcD,GAAgBA,EAAa5H,OAAO8H,GACzCA,EAAI5b,OAASub,GACnB,GAGHM,GAAmBF,IAAgB,MAAQA,SAAqB,OAAS,GAAKH,EAAwBG,EAAYvW,cAAgB,MAAQoW,SAA+B,OAAS,EAAIA,EAAsBM,YAAc,aAAeH,IAAgB,MAAQA,SAAqB,OAAS,GAAKF,EAAyBE,EAAYvW,cAAgB,MAAQqW,SAAgC,OAAS,EAAIA,EAAuBK,YAAc,OACrb,IAAIC,EACJ,GAAIJ,GAAeA,EAAYrR,KAAM,CACnC,OAAQqR,EAAYrR,MAClB,IAAK,cACHyR,EAAST,EAAS9X,YAAYmY,EAAYnR,oBAAqBqR,GAC/D,MACF,IAAK,mBACHE,EAAS/d,EAAege,mBAAmBV,EAAS9X,YAAYmY,EAAYnR,oBAAqBqR,GAAkBP,EAAS9X,YAAYmY,EAAYpR,cAAesR,IACnK,MACF,IAAK,mBACHE,EAAS/d,EAAege,mBAAmBV,EAAS9X,YAAYmY,EAAYpR,cAAesR,GAAkBP,EAAS9X,YAAYmY,EAAYnR,oBAAqBqR,IACnK,MACF,QACE,MAEN,KAAO,CACLE,EAAST,EAAS9X,YAAYmY,IAAgB,MAAQA,SAAqB,OAAS,EAAIA,EAAYrX,KAAMuX,EAC5G,CACA,OAAOxc,EAAiBQ,GAAQuP,QAAQ,6BAA8B,CAACuM,IAAgB,MAAQA,SAAqB,OAAS,EAAIA,EAAYzX,MAAO6X,GACtJ,GAEJ,EAAG","sourceRoot":"table/delegates"}},{"offset":{"line":33622,"column":0},"map":{"version":3,"names":["TreeTableDelegate","Object","assign","TableDelegate","apiVersion","_internalUpdateBindingInfo","table","bindingInfo","apply","payload","getPayload","parameters","$$aggregation","hierarchyQualifier","expandTo","search","initialExpansionLevel","updateBindingInfoWithSearchQuery","filterInfo","filter","filters","CommonUtils","normalizeSearchTerm"],"sourceRoot":"table/delegates","sources":["TreeTableDelegate.ts"],"sourcesContent":["import CommonUtils from \"sap/fe/core/CommonUtils\";\nimport TableDelegate from \"sap/fe/macros/table/delegates/TableDelegate\";\nimport Filter from \"sap/ui/model/odata/Filter\";\n\n/**\n * Helper class for sap.ui.mdc.Table.\n * <h3><b>Note:</b></h3>\n * This class is experimental and not intended for productive usage, since the API/behavior has not been finalized.\n *\n * @author SAP SE\n * @private\n * @experimental\n * @since 1.69.0\n * @alias sap.fe.macros.TableDelegate\n */\nconst TreeTableDelegate = Object.assign({}, TableDelegate, {\n\tapiVersion: 2,\n\t_internalUpdateBindingInfo: function (table: any, bindingInfo: any) {\n\t\tTableDelegate._internalUpdateBindingInfo.apply(this, [table, bindingInfo]);\n\n\t\tconst payload = table.getPayload();\n\t\tbindingInfo.parameters.$$aggregation = {\n\t\t\t...bindingInfo.parameters.$$aggregation,\n\t\t\t...{ hierarchyQualifier: payload?.hierarchyQualifier },\n\t\t\t// Setting the expandTo parameter to a high value forces the treeTable to expand all nodes when the search is applied\n\t\t\t...{ expandTo: bindingInfo.parameters.$$aggregation?.search ? 100 : payload?.initialExpansionLevel }\n\t\t};\n\t},\n\tupdateBindingInfoWithSearchQuery: function (bindingInfo: any, filterInfo: any, filter: Filter) {\n\t\tbindingInfo.filters = filter;\n\t\tif (filterInfo.search) {\n\t\t\tbindingInfo.parameters.$$aggregation = {\n\t\t\t\t...bindingInfo.parameters.$$aggregation,\n\t\t\t\t...{\n\t\t\t\t\tsearch: CommonUtils.normalizeSearchTerm(filterInfo.search)\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\tdelete bindingInfo.parameters?.$$aggregation?.search;\n\t\t}\n\t}\n});\n\nexport default TreeTableDelegate;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,MAAMA,iBAAiB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,aAAa,EAAE;IAC1DC,UAAU,EAAE,CAAC;IACbC,0BAA0B,EAAE,UAAUC,KAAU,EAAEC,WAAgB,EAAE;MAAA;MACnEJ,aAAa,CAACE,0BAA0B,CAACG,KAAK,CAAC,IAAI,EAAE,CAACF,KAAK,EAAEC,WAAW,CAAC,CAAC;MAE1E,MAAME,OAAO,GAAGH,KAAK,CAACI,UAAU,EAAE;MAClCH,WAAW,CAACI,UAAU,CAACC,aAAa,GAAG;QACtC,GAAGL,WAAW,CAACI,UAAU,CAACC,aAAa;QACvC,GAAG;UAAEC,kBAAkB,EAAEJ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI;QAAmB,CAAC;QACtD;QACA,GAAG;UAAEC,QAAQ,EAAE,yBAAAP,WAAW,CAACI,UAAU,CAACC,aAAa,kDAApC,sBAAsCG,MAAM,GAAG,GAAG,GAAGN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEO;QAAsB;MACpG,CAAC;IACF,CAAC;IACDC,gCAAgC,EAAE,UAAUV,WAAgB,EAAEW,UAAe,EAAEC,MAAc,EAAE;MAC9FZ,WAAW,CAACa,OAAO,GAAGD,MAAM;MAC5B,IAAID,UAAU,CAACH,MAAM,EAAE;QACtBR,WAAW,CAACI,UAAU,CAACC,aAAa,GAAG;UACtC,GAAGL,WAAW,CAACI,UAAU,CAACC,aAAa;UACvC,GAAG;YACFG,MAAM,EAAEM,WAAW,CAACC,mBAAmB,CAACJ,UAAU,CAACH,MAAM;UAC1D;QACD,CAAC;MACF,CAAC,MAAM;QAAA;QACN,0BAAOR,WAAW,CAACI,UAAU,mFAAtB,uBAAwBC,aAAa,yDAA5C,OAAO,uBAAuCG,MAAM;MACrD;IACD;EACD,CAAC,CAAC;EAAC,OAEYf,iBAAiB;AAAA"}},{"offset":{"line":33674,"column":0},"map":{"version":3,"names":["sap","ui","define","CommonUtils","TableDelegate","TreeTableDelegate","Object","assign","apiVersion","_internalUpdateBindingInfo","table","bindingInfo","_bindingInfo$paramete","apply","this","payload","getPayload","parameters","$$aggregation","hierarchyQualifier","expandTo","search","initialExpansionLevel","updateBindingInfoWithSearchQuery","filterInfo","filter","filters","normalizeSearchTerm","_bindingInfo$paramete2","_bindingInfo$paramete3"],"sources":["TreeTableDelegate-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,6DAAO,CAAC,0BAA2B,+CAAgD,SAAUC,EAAaC,GAC/G,aAaA,MAAMC,EAAoBC,OAAOC,OAAO,CAAC,EAAGH,EAAe,CACzDI,WAAY,EACZC,2BAA4B,SAAUC,EAAOC,GAC3C,IAAIC,EACJR,EAAcK,2BAA2BI,MAAMC,KAAM,CAACJ,EAAOC,IAC7D,MAAMI,EAAUL,EAAMM,aACtBL,EAAYM,WAAWC,cAAgB,IAClCP,EAAYM,WAAWC,iBACvB,CACDC,mBAAoBJ,IAAY,MAAQA,SAAiB,OAAS,EAAIA,EAAQI,uBAG7E,CACDC,UAAWR,EAAwBD,EAAYM,WAAWC,iBAAmB,MAAQN,SAA+B,GAAKA,EAAsBS,OAAS,IAAMN,IAAY,MAAQA,SAAiB,OAAS,EAAIA,EAAQO,uBAG9N,EACAC,iCAAkC,SAAUZ,EAAaa,EAAYC,GACnEd,EAAYe,QAAUD,EACtB,GAAID,EAAWH,OAAQ,CACrBV,EAAYM,WAAWC,cAAgB,IAClCP,EAAYM,WAAWC,iBACvB,CACDG,OAAQlB,EAAYwB,oBAAoBH,EAAWH,SAGzD,KAAO,CACL,IAAIO,EAAwBC,GAC3BD,EAAyBjB,EAAYM,cAAgB,MAAQW,SAAgC,EAAI,MAAQC,EAAyBD,EAAuBV,iBAAmB,MAAQW,SAAgC,EAAI,YAAcA,EAAuBR,MAChQ,CACF,IAEF,OAAOhB,CACT,EAAG","sourceRoot":"table/delegates"}},{"offset":{"line":33679,"column":0},"map":{"version":3,"names":["ValueHelpBlock","defineBuildingBlock","name","namespace","fragment","blockAttribute","type","required","expectedTypes","props","_controlConfiguration","settings","requestGroupId","collaborationEnabled","contextObject","getInvolvedDataModelObjects","contextPath","entitySetOrSingleton","targetEntitySet","isEntitySet","ModelHelper","isCollaborationDraftSupported","models","metaModel","BuildingBlockBase"],"sourceRoot":"valuehelp","sources":["ValueHelp.block.ts"],"sourcesContent":["import BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { isEntitySet } from \"sap/fe/core/helpers/TypeGuards\";\nimport type Context from \"sap/ui/model/Context\";\n\n/**\n * Building block for creating a ValueHelp based on the provided OData V4 metadata.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:ValueHelp\n *   idPrefix=\"SomePrefix\"\n *   property=\"{someProperty&gt;}\"\n *   conditionModel=\"$filters\"\n * /&gt;\n * </pre>\n *\n * @private\n */\n@defineBuildingBlock({ name: \"ValueHelp\", namespace: \"sap.fe.macros\", fragment: \"sap.fe.macros.internal.valuehelp.ValueHelp\" })\nexport default class ValueHelpBlock extends BuildingBlockBase {\n\t/**\n\t * A prefix that is added to the generated ID of the value help.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tidPrefix = \"ValueHelp\";\n\n\t/**\n\t * Defines the metadata path to the property.\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true, expectedTypes: [\"Property\"] })\n\tproperty!: Context;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tcontextPath!: Context;\n\n\t/**\n\t * Indicator whether the value help is for a filter field.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tconditionModel = \"\";\n\n\t/**\n\t * Indicates that this is a value help of a filter field. Necessary to decide if a\n\t * validation should occur on the back end or already on the client.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tfilterFieldValueHelp = false;\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter field.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tuseSemanticDateRange = true;\n\n\t/**\n\t * Specifies whether the ValueHelp can be used with a MultiValueField\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tuseMultiValueField = false;\n\n\t@blockAttribute({ type: \"string\" })\n\tnavigationPrefix?: string;\n\n\t@blockAttribute({ type: \"boolean\" })\n\trequiresValidation = false;\n\n\t@blockAttribute({ type: \"string\" })\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\t_flexId?: string;\n\n\trequestGroupId = \"$auto.Workers\";\n\n\tcollaborationEnabled = false;\n\n\tconstructor(props: PropertiesOf<ValueHelpBlock>, _controlConfiguration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props);\n\n\t\tconst contextObject = getInvolvedDataModelObjects(this.contextPath);\n\t\tconst entitySetOrSingleton = contextObject.targetEntitySet;\n\t\tif (isEntitySet(entitySetOrSingleton)) {\n\t\t\tthis.collaborationEnabled = ModelHelper.isCollaborationDraftSupported(settings.models.metaModel);\n\t\t}\n\t}\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;MAyBqBA,cAAc;EAhBnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAdA,OAeCC,mBAAmB,CAAC;IAAEC,IAAI,EAAE,WAAW;IAAEC,SAAS,EAAE,eAAe;IAAEC,QAAQ,EAAE;EAA6C,CAAC,CAAC,UAK7HC,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAMlCD,cAAc,CAAC;IAAEC,IAAI,EAAE,sBAAsB;IAAEC,QAAQ,EAAE,IAAI;IAAEC,aAAa,EAAE,CAAC,UAAU;EAAE,CAAC,CAAC,UAG7FH,cAAc,CAAC;IAAEC,IAAI,EAAE,sBAAsB;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC,UAMhEF,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,UAOlCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAMnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAMnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,UAGnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,WAGlCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,WAGnCD,cAAc,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC;IAAA;IA9CnC;AACD;AACA;;IAIC;AACD;AACA;;IAOC;AACD;AACA;;IAIC;AACD;AACA;AACA;;IAIC;AACD;AACA;;IAIC;AACD;AACA;;IAkBC,wBAAYG,KAAmC,EAAEC,qBAA8B,EAAEC,QAAmC,EAAE;MAAA;MACrH,sCAAMF,KAAK,CAAC;MAAC;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA,MALdG,cAAc,GAAG,eAAe;MAAA,MAEhCC,oBAAoB,GAAG,KAAK;MAK3B,MAAMC,aAAa,GAAGC,2BAA2B,CAAC,MAAKC,WAAW,CAAC;MACnE,MAAMC,oBAAoB,GAAGH,aAAa,CAACI,eAAe;MAC1D,IAAIC,WAAW,CAACF,oBAAoB,CAAC,EAAE;QACtC,MAAKJ,oBAAoB,GAAGO,WAAW,CAACC,6BAA6B,CAACV,QAAQ,CAACW,MAAM,CAACC,SAAS,CAAC;MACjG;MAAC;IACF;IAAC;IAAA;EAAA,EA/D0CC,iBAAiB;IAAA;IAAA;IAAA;IAAA;MAAA,OAKjD,WAAW;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAeL,EAAE;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAOI,KAAK;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAML,IAAI;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAMN,KAAK;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;MAAA,OAML,KAAK;IAAA;EAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAAA"}},{"offset":{"line":33858,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","MetaModelConverter","ModelHelper","TypeGuards","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_exports","isEntitySet","getInvolvedDataModelObjects","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ValueHelpBlock","name","namespace","fragment","type","required","expectedTypes","_BuildingBlockBase","props","_controlConfiguration","settings","_this","this","requestGroupId","collaborationEnabled","contextObject","contextPath","entitySetOrSingleton","targetEntitySet","isCollaborationDraftSupported","models","metaModel"],"sources":["ValueHelp.block-dbg.js"],"mappings":"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","sourceRoot":"valuehelp"}},{"offset":{"line":33863,"column":0},"map":{"version":3,"names":["FeCoreControlsFilterBar","MdcFilterbarFilterBarBase","Object","assign","ValueHelpDelegate","apiVersion","isSearchSupported","valueHelp","content","_listBinding","getFilterFields","updateBindingInfo","bindingInfo","search","getFilterValue","normalizedSearch","CommonUtils","normalizeSearchTerm","parameters","$search","undefined","updateBinding","listBinding","payload","getPayload","valueListProperty","_getValueListPropertyFromPayloadQualifier","isTypeahead","bindingContext","getBindingContext","additionalValues","inputValues","getModel","getProperty","values","additionalValueHelper","getRelevantRecommendations","propertyPath","length","push","groupKey","AdditionalValueGroupKey","recommendation","_updateBindingForRecommendations","_updateBinding","executeFilter","_filter","requestedItems","getContexts","checkListBindingPending","updateBindingDonePromise","isSuspended","contexts","requestContexts","getTypeUtil","TypeUtil","retrieveContent","container","contentId","ValueListHelper","showValueList","_getConditionPayloadList","condition","conditionPayloadMap","valueHelpQualifiers","keys","conditionPayloadList","params","qualifiers","valueHelpQualifier","vhParameters","vhKeys","propertyKeyPath","valueHelpKeyPath","filteredKeys","helpPaths","forEach","param","helpPath","filter","key","includes","_onConditionPropagationToFilterBar","filterBarVH","conditions","outParameters","filterBar","state","StateUtil","retrieveExternalState","filterItemsVH","getFilterItems","outParameter","filterTarget","source","split","pop","find","item","getId","conditionPayload","newCondition","Condition","createCondition","ConditionValidated","Validated","applyExternalState","err","message","Error","String","Log","error","_onConditionPropagationToBindingContext","context","metaModel","getMetaModel","outValues","warning","_onConditionPropagationUpdateProperty","convertedMetadata","convertTypes","rootPath","getMetaContext","getPath","contextCanRequestSideEffects","isTransient","isInactive","_updatePropertyViaOutParameter","targetProperty","resolvePath","target","fieldControl","annotations","Common","FieldControl","dynamicReadOnly","isPathAnnotationExpression","path","lastIndex","lastIndexOf","sideEffectPath","substring","requestSideEffects","setProperty","textPath","Text","getFilterConditions","_config","getInitialFilterConditions","control","getControl","onConditionPropagation","reason","qualifier","getOutParameters","field","fieldParent","getParent","getConditions","isA","_createInitialFilterCondition","value","initialValueFilterEmpty","_getInitialFilterConditionsFromBinding","inConditions","inParameters","propertiesToRequest","map","inParameter","requestProperty","i","_getInitialFilterConditionsFromFilterBar","_getConditionsFromInParameter","sourceField","endsWith","_partitionInParameters","inParameterMap","constant","binding","constantValue","indexOf","_tableAfterRenderDelegate","onAfterRendering","event","table","srcControl","tableCellsDomRefs","$","mdcMTable","highlightDOMElements","popoverTable","getTable","removeEventDelegate","addEventDelegate","getInParameters","isObjectPage","createConditionPayload","_values","entry","isMultiValueField","vhKey","getObject","isFilterableListItemSelected","isValueListWithFixedValues","getConfig","maxConditions","validated","selectedCondition","keyPath","getKeyPath","conditionSelectedRow","selectedKeys","every","updateBindingDonePromiseResolve","Promise","resolve","additionalValueContextData","requestForAdditionalValueContextData","uniqueAdditionalValues","removeDuplicateAdditionalValues","sortAndFilterOthers","resumeValueListBindingAndResetChanges","doesTransientContextsAlreadyExist","createAdditionalValueTransientContexts","reverse","rootBinding","getRootBinding","suspend","changeParameters","filters","FilterType","Application","sort","sorter","resume","resetChanges","checkIfAdditionalValuesExists","showTypeahead","filterValue","vhValue","getValue"],"sourceRoot":"valuehelp","sources":["ValueHelpDelegate.ts"],"sourcesContent":["import type { ConvertedMetadata, Property } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { convertTypes } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { isPathAnnotationExpression } from \"sap/fe/core/helpers/TypeGuards\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport type { InOutParameter, ValueHelpPayload } from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport ValueListHelper from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport highlightDOMElements from \"sap/m/inputUtils/highlightDOMElements\";\nimport type { AggregationBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport Control from \"sap/ui/core/Control\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport Condition from \"sap/ui/mdc/condition/Condition\";\nimport ConditionValidated from \"sap/ui/mdc/enum/ConditionValidated\";\nimport Field from \"sap/ui/mdc/Field\";\nimport type FieldBase from \"sap/ui/mdc/field/FieldBase\";\nimport type FilterBarBase from \"sap/ui/mdc/filterbar/FilterBarBase\";\nimport StateUtil from \"sap/ui/mdc/p13n/StateUtil\";\nimport type ValueHelp from \"sap/ui/mdc/ValueHelp\";\nimport type Container from \"sap/ui/mdc/valuehelp/base/Container\";\nimport type Content from \"sap/ui/mdc/valuehelp/base/Content\";\nimport FilterableListContent from \"sap/ui/mdc/valuehelp/base/FilterableListContent\";\nimport type MTable from \"sap/ui/mdc/valuehelp/content/MTable\";\nimport ValueHelpDelegate from \"sap/ui/mdc/ValueHelpDelegate\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterType from \"sap/ui/model/FilterType\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport { AdditionalValueGroupKey, additionalValueHelper, AdditionalValueType } from \"../internal/valuehelp/AdditionalValueHelper\";\n\nconst FeCoreControlsFilterBar = \"sap.fe.core.controls.FilterBar\";\nconst MdcFilterbarFilterBarBase = \"sap.ui.mdc.filterbar.FilterBarBase\";\n\ntype ConditionObjectMap = Record<string, ConditionObject[]>;\n\nexport type ExternalStateType = {\n\titems: { name: string }[];\n\tfilter: ConditionObjectMap;\n};\n\nexport type ConditionPayloadType = Record<string, string | boolean>;\n\nexport type ConditionPayloadMap = Record<string, ConditionPayloadType[]>;\n\nexport default Object.assign({}, ValueHelpDelegate, {\n\tapiVersion: 2,\n\n\t/**\n\t * Checks if a <code>ListBinding</code> supports $Search.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param content Content element\n\t * @param _listBinding\n\t * @returns True if $search is supported\n\t */\n\tisSearchSupported: function (valueHelp: ValueHelp, content: FilterableListContent, _listBinding: ODataListBinding) {\n\t\treturn content.getFilterFields() === \"$search\";\n\t},\n\n\t/**\n\t * Adjustable filtering for list-based contents.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param content ValueHelp content requesting conditions configuration\n\t * @param bindingInfo The binding info object to be used to bind the list to the model\n\t */\n\tupdateBindingInfo: function (valueHelp: ValueHelp, content: FilterableListContent, bindingInfo: AggregationBindingInfo) {\n\t\tValueHelpDelegate.updateBindingInfo(valueHelp, content, bindingInfo);\n\n\t\tif (content.getFilterFields() === \"$search\") {\n\t\t\tconst search = content.getFilterValue();\n\t\t\tconst normalizedSearch = CommonUtils.normalizeSearchTerm(search); // adjustSearch\n\n\t\t\tif (bindingInfo.parameters) {\n\t\t\t\t(bindingInfo.parameters as Record<string, unknown>).$search = normalizedSearch || undefined;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Checks if field is recommendation relevant and calls either _updateBinding or _updateBindingForRecommendations.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param listBinding List binding\n\t * @param bindingInfo The binding info object to be used to bind the list to the model\n\t * @param content Filterable List Content\n\t */\n\tupdateBinding: async function (\n\t\tvalueHelp: ValueHelp,\n\t\tlistBinding: ODataListBinding,\n\t\tbindingInfo: AggregationBindingInfo,\n\t\tcontent: MTable\n\t) {\n\t\t//We fetch the valuelist property from the payload to make sure we pass the right property while making a call on valuelist entity set\n\t\tconst payload = valueHelp.getPayload() as ValueHelpPayload;\n\t\tconst valueListProperty = this._getValueListPropertyFromPayloadQualifier(payload);\n\t\tif (content.isTypeahead()) {\n\t\t\tconst bindingContext = content.getBindingContext();\n\t\t\tconst additionalValues: AdditionalValueType[] = [];\n\t\t\t//get the recommendation data from the internal model\n\t\t\tconst inputValues = (content.getModel(\"internal\") as JSONModel).getProperty(\"/recommendationsData\") || {};\n\t\t\t//Fetch the relevant recommendations based on the inputvalues and bindingcontext\n\t\t\tconst values =\n\t\t\t\tadditionalValueHelper.getRelevantRecommendations(inputValues, bindingContext as Context, payload.propertyPath) || [];\n\t\t\t//if there are relevant recommendations then create additionalvalue structure and call _updateBindingForRecommendations\n\t\t\tif (values?.length > 0) {\n\t\t\t\tadditionalValues.push({ propertyPath: valueListProperty, values, groupKey: AdditionalValueGroupKey.recommendation });\n\t\t\t\tthis._updateBindingForRecommendations(payload, listBinding, bindingInfo, additionalValues);\n\t\t\t} else {\n\t\t\t\t//call _updateBinding if there are no relevant recommendations\n\t\t\t\tthis._updateBinding(listBinding, bindingInfo);\n\t\t\t}\n\t\t} else {\n\t\t\t//call _updateBinding if there are no relevant recommendations\n\t\t\tthis._updateBinding(listBinding, bindingInfo);\n\t\t}\n\t},\n\t/**\n\t * Executes a filter in a <code>ListBinding</code>.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param listBinding List binding\n\t * @param _filter Filter\n\t * @param requestedItems Number of requested items\n\t * @returns Promise that is resolved if search is executed\n\t */\n\texecuteFilter: async function (valueHelp: ValueHelp, listBinding: ODataListBinding, _filter: Filter, requestedItems: number) {\n\t\tlistBinding.getContexts(0, requestedItems);\n\n\t\tawait this.checkListBindingPending(valueHelp, listBinding, requestedItems);\n\t\treturn listBinding;\n\t},\n\n\t/**\n\t * Checks if the <code>ListBinding</code> is waiting for an update.\n\t * As long as the context has not been set for <code>ListBinding</code>,\n\t * <code>ValueHelp</code> needs to wait.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param listBinding ListBinding to check\n\t * @param requestedItems Number of requested items\n\t * @returns Promise that is resolved once ListBinding has been updated\n\t */\n\tcheckListBindingPending: async function (valueHelp: ValueHelp, listBinding: ODataListBinding | undefined, requestedItems: number) {\n\t\tconst payload = valueHelp.getPayload() as ValueHelpPayload;\n\t\tif (payload.updateBindingDonePromise) {\n\t\t\treturn payload.updateBindingDonePromise;\n\t\t} else {\n\t\t\tif (!listBinding || listBinding.isSuspended()) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst contexts = await listBinding.requestContexts(0, requestedItems);\n\t\t\treturn contexts.length === 0;\n\t\t}\n\t},\n\n\tgetTypeUtil: function (valueHelp: ValueHelp) {\n\t\treturn TypeUtil;\n\t},\n\n\t/**\n\t * Requests the content of the value help.\n\t *\n\t * This function is called when the value help is opened or a key or description is requested.\n\t *\n\t * So, depending on the value help content used, all content controls and data need to be assigned.\n\t * Once they are assigned and the data is set, the returned <code>Promise</code> needs to be resolved.\n\t * Only then does the value help continue opening or reading data.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param container Container instance\n\t * @param contentId Id of the content shown after this call to retrieveContent\n\t * @returns Promise that is resolved if all content is available\n\t */\n\tretrieveContent: function (valueHelp: ValueHelp, container: Container, contentId: string) {\n\t\tconst payload = valueHelp.getPayload() as ValueHelpPayload;\n\t\treturn ValueListHelper.showValueList(payload, container, contentId);\n\t},\n\n\t_getConditionPayloadList: function (condition: ConditionObject) {\n\t\tconst conditionPayloadMap = (condition.payload || {}) as ConditionPayloadMap,\n\t\t\tvalueHelpQualifiers = Object.keys(conditionPayloadMap),\n\t\t\tconditionPayloadList = valueHelpQualifiers.length ? conditionPayloadMap[valueHelpQualifiers[0]] : [];\n\n\t\treturn conditionPayloadList;\n\t},\n\t/**\n\t * Returns ValueListProperty from Payload based on data from payload keys and parameters.\n\t *\n\t * @param payload Payload for delegate\n\t * @returns ValueListProperty\n\t */\n\t_getValueListPropertyFromPayloadQualifier: function (payload: ValueHelpPayload) {\n\t\tconst params = payload.qualifiers[payload.valueHelpQualifier].vhParameters || [];\n\t\tconst keys = payload.qualifiers[payload.valueHelpQualifier].vhKeys || [];\n\t\tconst propertyKeyPath = payload.valueHelpKeyPath;\n\t\tlet filteredKeys: string[] = [...keys];\n\t\tconst helpPaths: string[] = [];\n\t\tif (params.length > 0) {\n\t\t\t//create helpPaths array which will only consist of params helppath\n\t\t\tparams.forEach(function (param: InOutParameter) {\n\t\t\t\thelpPaths.push(param.helpPath);\n\t\t\t});\n\t\t\t//filter the keys based on helpPaths. If key is not present in helpPath then it is valuelistproperty\n\t\t\tfilteredKeys = keys.filter((key: string) => {\n\t\t\t\treturn !helpPaths.includes(key);\n\t\t\t});\n\t\t}\n\n\t\t// from filteredKeys return the key that matches the property name\n\t\treturn propertyKeyPath && filteredKeys.includes(propertyKeyPath) ? propertyKeyPath : \"\";\n\t},\n\n\t_onConditionPropagationToFilterBar: async function (\n\t\tfilterBarVH: FilterBarBase,\n\t\tconditions: ConditionObject[],\n\t\toutParameters: InOutParameter[],\n\t\tfilterBar: FilterBarBase\n\t) {\n\t\ttry {\n\t\t\tconst state: ExternalStateType = await StateUtil.retrieveExternalState(filterBar);\n\t\t\tconst filterItemsVH = filterBarVH.getFilterItems();\n\t\t\tfor (const condition of conditions) {\n\t\t\t\tconst conditionPayloadList = this._getConditionPayloadList(condition);\n\t\t\t\tfor (const outParameter of outParameters) {\n\t\t\t\t\tconst filterTarget = outParameter.source.split(\"/\").pop() || \"\";\n\t\t\t\t\t// propagate OUT parameter only if the filter field is visible in the LR filterbar\n\t\t\t\t\tif (\n\t\t\t\t\t\t// LR FilterBar or LR AdaptFilter\n\t\t\t\t\t\tfilterItemsVH.find((item) => item.getId().split(\"::\").pop() === filterTarget)\n\t\t\t\t\t) {\n\t\t\t\t\t\tfor (const conditionPayload of conditionPayloadList) {\n\t\t\t\t\t\t\tconst newCondition = Condition.createCondition(\n\t\t\t\t\t\t\t\t\"EQ\",\n\t\t\t\t\t\t\t\t[conditionPayload[outParameter.helpPath]],\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tConditionValidated.Validated\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tstate.filter[filterTarget] ||= [];\n\t\t\t\t\t\t\tstate.filter[filterTarget].push(newCondition);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tStateUtil.applyExternalState(filterBar, state);\n\t\t} catch (err) {\n\t\t\tconst message = err instanceof Error ? err.message : String(err);\n\t\t\tLog.error(`ValueHelpDelegate: ${message}`);\n\t\t}\n\t},\n\n\t_onConditionPropagationToBindingContext: function (conditions: ConditionObject[], outParameters: InOutParameter[], context: Context) {\n\t\tconst metaModel = context.getModel().getMetaModel();\n\n\t\tfor (const condition of conditions) {\n\t\t\tconst conditionPayloadList = this._getConditionPayloadList(condition),\n\t\t\t\toutValues = conditionPayloadList.length === 1 ? conditionPayloadList[0] : undefined;\n\n\t\t\tif (conditionPayloadList.length > 1) {\n\t\t\t\tLog.warning(\"ValueHelpDelegate: ParameterOut in multi-value-field not supported\");\n\t\t\t}\n\t\t\tif (outValues) {\n\t\t\t\tthis._onConditionPropagationUpdateProperty(metaModel, outValues, outParameters, context);\n\t\t\t}\n\t\t}\n\t},\n\n\t_onConditionPropagationUpdateProperty: function (\n\t\tmetaModel: ODataMetaModel,\n\t\toutValues: ConditionPayloadType,\n\t\toutParameters: InOutParameter[],\n\t\tcontext: Context\n\t) {\n\t\tconst convertedMetadata = convertTypes(metaModel);\n\t\tconst rootPath = metaModel.getMetaContext(context.getPath()).getPath();\n\t\tconst contextCanRequestSideEffects = context.isTransient() !== true && context.isInactive() !== true;\n\t\tfor (const outParameter of outParameters) {\n\t\t\t/* Updated property via out-parameter if value changed */\n\t\t\tif (context.getProperty(outParameter.source) !== outValues[outParameter.helpPath]) {\n\t\t\t\tthis._updatePropertyViaOutParameter(\n\t\t\t\t\tconvertedMetadata,\n\t\t\t\t\trootPath,\n\t\t\t\t\toutValues,\n\t\t\t\t\toutParameter,\n\t\t\t\t\tcontext,\n\t\t\t\t\tcontextCanRequestSideEffects\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t},\n\n\t_updatePropertyViaOutParameter: function (\n\t\tconvertedMetadata: ConvertedMetadata,\n\t\trootPath: string,\n\t\toutValues: ConditionPayloadType,\n\t\toutParameter: InOutParameter,\n\t\tcontext: Context,\n\t\tcontextCanRequestSideEffects: boolean\n\t) {\n\t\t/* Updated property via out-parameter if value changed */\n\t\tconst propertyPath = `${rootPath}/${outParameter.source}`;\n\t\tconst targetProperty = convertedMetadata.resolvePath<Property>(propertyPath).target;\n\t\tconst fieldControl = targetProperty?.annotations?.Common?.FieldControl;\n\t\tconst dynamicReadOnly = isPathAnnotationExpression(fieldControl) ? context.getProperty(fieldControl.path) === 1 : false;\n\t\tif (dynamicReadOnly && contextCanRequestSideEffects) {\n\t\t\t/* Non-Transient and active context */\n\t\t\tconst lastIndex = outParameter.source.lastIndexOf(\"/\");\n\t\t\tconst sideEffectPath = lastIndex > 0 ? outParameter.source.substring(0, lastIndex) : outParameter.source;\n\t\t\t/* We send [<propertyName>] in case of a property path without any navigation involved */\n\t\t\t/* In case of a path involving navigations, we send [<navigationPath>] ending with a navigation property and not with a property */\n\t\t\tcontext.requestSideEffects([sideEffectPath]);\n\t\t} else {\n\t\t\t/* The fast creation row (transient context) can´t have instant specific (dynamic) read-only fields, therefore we don´t need to handle/consider this case specifically */\n\t\t\t/* Additional infos: */\n\t\t\t/* The fast creation row is only used by SD */\n\t\t\t/* The group ID (third argument of setProperty described api documentation of the Context) is used for the PATCH request, if not specified, the update group ID for the context's binding is used, 'null' to prevent the PATCH request */\n\t\t\t/* The Transient context cannot request SideEffects and  cannot patch via group 'null' */\n\t\t\tcontext.setProperty(outParameter.source, outValues[outParameter.helpPath]);\n\t\t}\n\t\t/* If the key gets updated via out-parameter, then the description needs also retrieved with requestSideEffects */\n\t\tconst textPath = isPathAnnotationExpression(targetProperty?.annotations?.Common?.Text)\n\t\t\t? targetProperty?.annotations?.Common?.Text.path\n\t\t\t: undefined;\n\t\tif (textPath !== undefined && contextCanRequestSideEffects) {\n\t\t\tconst lastIndex = textPath.lastIndexOf(\"/\");\n\t\t\tconst sideEffectPath = lastIndex > 0 ? textPath.substring(0, lastIndex) : textPath;\n\t\t\t/* The sideEffectPath can be [<propertyName>] or [<navigationPath>] */\n\t\t\tcontext.requestSideEffects([sideEffectPath]);\n\t\t}\n\t},\n\n\tgetFilterConditions: function (valueHelp: ValueHelp, content: Content, _config: any) {\n\t\tif (this.getInitialFilterConditions) {\n\t\t\treturn this.getInitialFilterConditions(valueHelp, content, (_config && _config.control) || (content && content.getControl()));\n\t\t}\n\t\treturn {};\n\t},\n\n\t/**\n\t * Callback invoked every time a {@link sap.ui.mdc.ValueHelp ValueHelp} fires a select event or the value of the corresponding field changes\n\t * This callback may be used to update external fields.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param valueHelp ValueHelp control instance receiving the <code>controlChange</code>\n\t * @param reason Reason why the method was invoked\n\t * @param _config Current configuration provided by the calling control\n\t * @since 1.101.0\n\t */\n\tonConditionPropagation: async function (valueHelp: ValueHelp, reason: string, _config: unknown) {\n\t\tif (reason !== \"ControlChange\") {\n\t\t\t// handle only ControlChange reason\n\t\t\treturn;\n\t\t}\n\t\tconst payload = valueHelp.getPayload() as ValueHelpPayload;\n\t\tconst qualifier = payload.qualifiers[payload.valueHelpQualifier];\n\t\tconst outParameters = qualifier?.vhParameters !== undefined ? ValueListHelper.getOutParameters(qualifier.vhParameters) : [],\n\t\t\tfield = valueHelp.getControl() as FieldBase,\n\t\t\tfieldParent = field.getParent() as FilterBarBase | Control;\n\n\t\tlet conditions = field.getConditions() as ConditionObject[];\n\t\tconditions = conditions.filter(function (condition) {\n\t\t\tconst conditionPayloadMap = (condition.payload || {}) as ConditionPayloadMap;\n\t\t\treturn conditionPayloadMap[payload.valueHelpQualifier];\n\t\t});\n\n\t\tif (fieldParent.isA<FilterBarBase>(MdcFilterbarFilterBarBase)) {\n\t\t\t// field inside a FilterBar or AdaptationFilterBar (Settings Dialog)?\n\t\t\tconst filterBarVH = valueHelp.getParent() as FilterBarBase | Control; // Control e.g. FormContainer\n\t\t\tif (filterBarVH.isA(FeCoreControlsFilterBar)) {\n\t\t\t\t// only for LR FilterBar\n\t\t\t\tawait this._onConditionPropagationToFilterBar(filterBarVH as FilterBarBase, conditions, outParameters, fieldParent);\n\t\t\t}\n\t\t\t// LR Settings Dialog or OP Settings Dialog shall not propagate value to the dialog filterfields or context\n\t\t} else {\n\t\t\t// Object Page\n\t\t\tconst context = valueHelp.getBindingContext() as Context | undefined;\n\t\t\tif (context) {\n\t\t\t\tthis._onConditionPropagationToBindingContext(conditions, outParameters, context);\n\t\t\t}\n\t\t}\n\t},\n\n\t_createInitialFilterCondition: function (value: unknown, initialValueFilterEmpty: boolean) {\n\t\tlet condition: ConditionObject | undefined;\n\n\t\tif (value === undefined || value === null) {\n\t\t\tLog.error(\"ValueHelpDelegate: value of the property could not be requested\");\n\t\t} else if (value === \"\") {\n\t\t\tif (initialValueFilterEmpty) {\n\t\t\t\tcondition = Condition.createCondition(\"Empty\", [], null, null, ConditionValidated.Validated);\n\t\t\t}\n\t\t} else {\n\t\t\tcondition = Condition.createCondition(\"EQ\", [value], null, null, ConditionValidated.Validated);\n\t\t}\n\t\treturn condition;\n\t},\n\n\t_getInitialFilterConditionsFromBinding: async function (\n\t\tinConditions: ConditionObjectMap,\n\t\tcontrol: Control,\n\t\tinParameters: InOutParameter[]\n\t) {\n\t\tconst propertiesToRequest = inParameters.map((inParameter) => inParameter.source);\n\t\tconst bindingContext = control.getBindingContext() as Context | undefined;\n\n\t\tif (!bindingContext) {\n\t\t\tLog.error(\"ValueHelpDelegate: No BindingContext\");\n\t\t\treturn inConditions;\n\t\t}\n\n\t\t// According to odata v4 api documentation for requestProperty: Property values that are not cached yet are requested from the back end\n\t\tconst values = await bindingContext.requestProperty(propertiesToRequest);\n\n\t\tfor (let i = 0; i < inParameters.length; i++) {\n\t\t\tconst inParameter = inParameters[i];\n\t\t\tconst condition = this._createInitialFilterCondition(values[i], inParameter.initialValueFilterEmpty);\n\n\t\t\tif (condition) {\n\t\t\t\tinConditions[inParameter.helpPath] = [condition];\n\t\t\t}\n\t\t}\n\t\treturn inConditions;\n\t},\n\n\t_getInitialFilterConditionsFromFilterBar: async function (\n\t\tinConditions: ConditionObjectMap,\n\t\tcontrol: Control,\n\t\tinParameters: InOutParameter[]\n\t) {\n\t\tconst filterBar = control.getParent() as FilterBarBase;\n\t\tconst state: ExternalStateType = await StateUtil.retrieveExternalState(filterBar);\n\n\t\tfor (const inParameter of inParameters) {\n\t\t\tconst conditions = this._getConditionsFromInParameter(inParameter, state);\n\t\t\tif (conditions) {\n\t\t\t\tinConditions[inParameter.helpPath] = conditions;\n\t\t\t}\n\t\t}\n\t\treturn inConditions;\n\t},\n\n\t/**\n\t * Returns the filter conditions.\n\t * Regarding a navigation path in the InOut parameters and disregarding prefixes in the navigation path like e.g. '$filters>/conditions/' or 'owner'.\n\t *\n\t * @param inParameter InParmeter of the filter field value help\n\t * @param state The external filter state\n\t * @returns The filter conditions\n\t * @since 1.114.0\n\t */\n\t_getConditionsFromInParameter: function (inParameter: InOutParameter, state: ExternalStateType) {\n\t\tconst sourceField = inParameter.source;\n\t\tconst key = Object.keys(state.filter).find((key) => (\"/\" + sourceField).endsWith(\"/\" + key)); //additional '/' to handle heading characters in the source name if there is no path\n\t\treturn key && state.filter[key];\n\t},\n\n\t_partitionInParameters: function (inParameters: InOutParameter[]) {\n\t\tconst inParameterMap: Record<string, InOutParameter[]> = {\n\t\t\tconstant: [],\n\t\t\tbinding: [],\n\t\t\tfilter: []\n\t\t};\n\n\t\tfor (const inParameter of inParameters) {\n\t\t\tif (inParameter.constantValue !== undefined) {\n\t\t\t\tinParameterMap.constant.push(inParameter);\n\t\t\t} else if (inParameter.source.indexOf(\"$filter\") === 0) {\n\t\t\t\tinParameterMap.filter.push(inParameter);\n\t\t\t} else {\n\t\t\t\tinParameterMap.binding.push(inParameter);\n\t\t\t}\n\t\t}\n\t\treturn inParameterMap;\n\t},\n\n\t_tableAfterRenderDelegate: {\n\t\tonAfterRendering: function (event: jQuery.Event & { srcControl: Control }) {\n\t\t\tconst table = event.srcControl, // m.Table\n\t\t\t\ttableCellsDomRefs = table.$().find(\"tbody .sapMText\"),\n\t\t\t\tmdcMTable = table.getParent() as MTable;\n\n\t\t\thighlightDOMElements(tableCellsDomRefs, mdcMTable.getFilterValue(), true);\n\t\t}\n\t},\n\n\t/**\n\t * Provides an initial condition configuration everytime a value help content is shown.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param content ValueHelp content requesting conditions configuration\n\t * @param control Instance of the calling control\n\t * @returns Returns a map of conditions suitable for a sap.ui.mdc.FilterBar control\n\t * @since 1.101.0\n\t */\n\tgetInitialFilterConditions: async function (valueHelp: ValueHelp, content: Content, control: Control | undefined) {\n\t\t// highlight text in ValueHelp popover\n\t\tif (content?.isA(\"sap.ui.mdc.valuehelp.content.MTable\")) {\n\t\t\tconst popoverTable = (content as MTable).getTable();\n\t\t\tpopoverTable?.removeEventDelegate(this._tableAfterRenderDelegate);\n\t\t\tpopoverTable?.addEventDelegate(this._tableAfterRenderDelegate, this);\n\t\t}\n\n\t\tconst inConditions: ConditionObjectMap = {};\n\n\t\tif (!control) {\n\t\t\tLog.error(\"ValueHelpDelegate: Control undefined\");\n\t\t\treturn inConditions;\n\t\t}\n\n\t\tconst payload = valueHelp.getPayload() as ValueHelpPayload;\n\t\tconst qualifier = payload.qualifiers[payload.valueHelpQualifier];\n\t\tconst inParameters = qualifier?.vhParameters !== undefined ? ValueListHelper.getInParameters(qualifier.vhParameters) : [];\n\t\tconst inParameterMap = this._partitionInParameters(inParameters);\n\t\tconst isObjectPage = control.getBindingContext();\n\n\t\tfor (const inParameter of inParameterMap.constant) {\n\t\t\tconst condition = this._createInitialFilterCondition(\n\t\t\t\tinParameter.constantValue,\n\t\t\t\tisObjectPage ? inParameter.initialValueFilterEmpty : false // no filter with \"empty\" on ListReport\n\t\t\t);\n\t\t\tif (condition) {\n\t\t\t\tinConditions[inParameter.helpPath] = [condition];\n\t\t\t}\n\t\t}\n\n\t\tif (inParameterMap.binding.length) {\n\t\t\tawait this._getInitialFilterConditionsFromBinding(inConditions, control, inParameterMap.binding);\n\t\t}\n\n\t\tif (inParameterMap.filter.length) {\n\t\t\tawait this._getInitialFilterConditionsFromFilterBar(inConditions, control, inParameterMap.filter);\n\t\t}\n\t\treturn inConditions;\n\t},\n\n\t/**\n\t * Provides the possibility to convey custom data in conditions.\n\t * This enables an application to enhance conditions with data relevant for combined key or outparameter scenarios.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param content ValueHelp content instance\n\t * @param _values Description pair for the condition which is to be created\n\t * @param context Optional additional context\n\t * @returns Optionally returns a serializable object to be stored in the condition payload field\n\t * @since 1.101.0\n\t */\n\tcreateConditionPayload: function (\n\t\tvalueHelp: ValueHelp,\n\t\tcontent: Content,\n\t\t_values: unknown[],\n\t\tcontext: Context\n\t): ConditionPayloadMap | undefined {\n\t\tconst payload = valueHelp.getPayload() as ValueHelpPayload;\n\t\tconst qualifier = payload.qualifiers[payload.valueHelpQualifier],\n\t\t\tentry: ConditionPayloadType = {},\n\t\t\tconditionPayload: ConditionPayloadMap = {};\n\t\tconst control = content.getControl();\n\t\tconst isMultiValueField = control?.isA(\"sap.ui.mdc.MultiValueField\");\n\t\tif (!qualifier.vhKeys || qualifier.vhKeys.length === 1 || isMultiValueField) {\n\t\t\treturn undefined;\n\t\t}\n\t\tqualifier.vhKeys.forEach(function (vhKey) {\n\t\t\tconst value = context.getObject(vhKey);\n\t\t\tif (value != null) {\n\t\t\t\tentry[vhKey] = value?.length === 0 ? \"\" : value;\n\t\t\t}\n\t\t});\n\t\tif (Object.keys(entry).length) {\n\t\t\t/* vh qualifier as key for relevant condition */\n\t\t\tconditionPayload[payload.valueHelpQualifier] = [entry];\n\t\t}\n\t\treturn conditionPayload;\n\t},\n\n\t/**\n\t * Provides the possibility to customize selections in 'Select from list' scenarios.\n\t * By default, only condition keys are considered. This may be extended with payload dependent filters.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param content ValueHelp content instance\n\t * @param item Entry of a given list\n\t * @param conditions Current conditions\n\t * @returns True, if item is selected\n\t * @since 1.101.0\n\t */\n\tisFilterableListItemSelected: function (valueHelp: ValueHelp, content: Content, item: Control, conditions: ConditionObject[]) {\n\t\t//In value help dialogs of single value fields the row for the key shouldn´t be selected/highlight anymore BCP: 2270175246\n\t\tconst payload = valueHelp.getPayload() as ValueHelpPayload;\n\t\tif (payload.isValueListWithFixedValues !== true && content.getConfig()?.maxConditions === 1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst context = item.getBindingContext();\n\n\t\t/* Do not consider \"NotValidated\" conditions */\n\t\tconditions = conditions.filter((condition) => condition.validated === ConditionValidated.Validated);\n\n\t\tconst selectedCondition = conditions.find(function (condition) {\n\t\t\tconst conditionPayloadMap = condition.payload as ConditionPayloadMap | undefined,\n\t\t\t\tvalueHelpQualifier = payload.valueHelpQualifier || \"\";\n\t\t\tif (!conditionPayloadMap && Object.keys(payload.qualifiers)[0] === valueHelpQualifier) {\n\t\t\t\tconst keyPath = content.getKeyPath();\n\t\t\t\treturn context?.getObject(keyPath) === condition?.values[0];\n\t\t\t}\n\t\t\tconst conditionSelectedRow = conditionPayloadMap?.[valueHelpQualifier]?.[0] || {},\n\t\t\t\tselectedKeys = Object.keys(conditionSelectedRow);\n\t\t\tif (selectedKeys.length) {\n\t\t\t\treturn selectedKeys.every(function (key) {\n\t\t\t\t\treturn (conditionSelectedRow[key] as unknown) === context?.getObject(key);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\treturn selectedCondition ? true : false;\n\t},\n\t/**\n\t * Creates contexts for additional values and resumes the list binding.\n\t *\n\t * @param payload Payload for delegate\n\t * @param listBinding List binding\n\t * @param bindingInfo The binding info object to be used to bind the list to the model\n\t * @param additionalValues Array of AdditionalValues\n\t */\n\t_updateBindingForRecommendations: async function (\n\t\tpayload: ValueHelpPayload,\n\t\tlistBinding: ODataListBinding,\n\t\tbindingInfo: AggregationBindingInfo,\n\t\tadditionalValues: AdditionalValueType[]\n\t) {\n\t\tlet updateBindingDonePromiseResolve: Function | undefined;\n\t\t//create a promise to make sure checkListBindingPending is only completed once this promise is resolved\n\t\tpayload.updateBindingDonePromise = new Promise(function (resolve) {\n\t\t\tupdateBindingDonePromiseResolve = resolve;\n\t\t});\n\t\ttry {\n\t\t\t//fetch the contexts of additionalvalues\n\t\t\tconst additionalValueContextData = await additionalValueHelper.requestForAdditionalValueContextData(\n\t\t\t\tadditionalValues,\n\t\t\t\tlistBinding,\n\t\t\t\tbindingInfo\n\t\t\t);\n\t\t\t//remove duplicate values from different groups of additionalvalues\n\t\t\tconst uniqueAdditionalValues = additionalValueHelper.removeDuplicateAdditionalValues(additionalValueContextData, [\n\t\t\t\t...additionalValues\n\t\t\t]);\n\t\t\t//sort and filter valuehelpbinding to make sure we render others group\n\t\t\tadditionalValueHelper.sortAndFilterOthers(listBinding, bindingInfo, uniqueAdditionalValues);\n\t\t\t//resume the list binding and then reset the changes\n\t\t\tawait additionalValueHelper.resumeValueListBindingAndResetChanges(listBinding);\n\t\t\tif (!additionalValueHelper.doesTransientContextsAlreadyExist(listBinding, uniqueAdditionalValues)) {\n\t\t\t\t// add transient context to list binding after backend query is done\n\t\t\t\tadditionalValueHelper.createAdditionalValueTransientContexts(\n\t\t\t\t\tadditionalValueContextData,\n\t\t\t\t\tuniqueAdditionalValues.reverse(),\n\t\t\t\t\tlistBinding\n\t\t\t\t);\n\t\t\t}\n\t\t} catch (error: unknown) {\n\t\t\t//Do nothing as we know that reset changes would throw an error in console and this will pile up a lot of console errors\n\t\t}\n\t\tif (updateBindingDonePromiseResolve) {\n\t\t\t//resolve the promise as everything is completed\n\t\t\tupdateBindingDonePromiseResolve(true);\n\t\t}\n\t},\n\t/**\n\t * Executes a filter in a <code>ListBinding</code> and resumes it, if suspended.\n\t *\n\t * @param listBinding List binding\n\t * @param bindingInfo The binding info object to be used to bind the list to the model\n\t */\n\t_updateBinding: async function (listBinding: ODataListBinding, bindingInfo: AggregationBindingInfo) {\n\t\tconst rootBinding = listBinding.getRootBinding() || listBinding;\n\t\tif (!rootBinding.isSuspended()) {\n\t\t\trootBinding.suspend();\n\t\t}\n\t\tif (bindingInfo.parameters) {\n\t\t\tlistBinding.changeParameters(bindingInfo.parameters);\n\t\t}\n\t\tlistBinding.filter(bindingInfo.filters, FilterType.Application);\n\t\tlistBinding.sort(bindingInfo.sorter);\n\n\t\tif (rootBinding.isSuspended()) {\n\t\t\trootBinding.resume();\n\t\t\trootBinding.resetChanges();\n\t\t}\n\t},\n\t/**\n\t * Returns an boolean value if additionalvalues exists which will contain different groups like recommendations.\n\t *\n\t * @param content Filterable List Content\n\t * @param payload Payload for delegate\n\t * @returns Boolean value\n\t */\n\tcheckIfAdditionalValuesExists: function (content: MTable, payload: ValueHelpPayload) {\n\t\tconst bindingContext = content.getBindingContext();\n\t\t//get the recommendation data from the internal model\n\t\tconst inputValues = (content.getModel(\"internal\") as JSONModel).getProperty(\"/recommendationsData\") || {};\n\t\t//Fetch the relevant recommendations based on the inputvalues and bindingcontext\n\t\tconst values = additionalValueHelper.getRelevantRecommendations(inputValues, bindingContext as Context, payload.propertyPath) || [];\n\t\tif (values?.length > 0) {\n\t\t\t//if there are relevant recommendations then return true\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t/**\n\t * Returns a boolean value which will tell whether typeahead should be opened or not.\n\t *\n\t * @param valueHelp The <code>ValueHelp</code> instance\n\t * @param content Filterable List Content\n\t * @returns Boolean value whether to show typeahead or not\n\t */\n\tshowTypeahead: function (control: ValueHelp, content: MTable) {\n\t\tif (!content.getControl().isA(\"sap.ui.mdc.FilterField\") && !content.getControl().isA(\"sap.ui.mdc.MultiValueField\")) {\n\t\t\tconst filterValue = content?.getFilterValue();\n\t\t\tconst vhValue = (content?.getControl() as Field)?.getValue();\n\t\t\tif (vhValue) {\n\t\t\t\t// valuehelp had some value, but user cleared the value\n\t\t\t\t// in such case we get input value as '' and we will return false\n\t\t\t\t//Note: In SDs usecase we wanted to open the typeAhead if there are recommendations and value is blank, they should pass us a flag so that we can handle this accordingly\n\t\t\t\tif (filterValue === \"\") {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//if valuehelp value is not there and there is filter value then user is typing and we return true else we would only open\n\t\t\t\t//if it is recommendation relevant field\n\t\t\t\tif (filterValue) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn this.checkIfAdditionalValuesExists(content, control.getPayload());\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n});\n"],"mappings":"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"}},{"offset":{"line":34468,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","CommonUtils","MetaModelConverter","TypeGuards","TypeUtil","ValueListHelper","highlightDOMElements","Condition","ConditionValidated","StateUtil","ValueHelpDelegate","FilterType","AdditionalValueHelper","additionalValueHelper","AdditionalValueGroupKey","isPathAnnotationExpression","convertTypes","FeCoreControlsFilterBar","MdcFilterbarFilterBarBase","Object","assign","apiVersion","isSearchSupported","valueHelp","content","_listBinding","getFilterFields","updateBindingInfo","bindingInfo","search","getFilterValue","normalizedSearch","normalizeSearchTerm","parameters","$search","undefined","updateBinding","async","listBinding","payload","getPayload","valueListProperty","this","_getValueListPropertyFromPayloadQualifier","isTypeahead","bindingContext","getBindingContext","additionalValues","inputValues","getModel","getProperty","values","getRelevantRecommendations","propertyPath","length","push","groupKey","recommendation","_updateBindingForRecommendations","_updateBinding","executeFilter","_filter","requestedItems","getContexts","checkListBindingPending","updateBindingDonePromise","isSuspended","contexts","requestContexts","getTypeUtil","retrieveContent","container","contentId","showValueList","_getConditionPayloadList","condition","conditionPayloadMap","valueHelpQualifiers","keys","conditionPayloadList","params","qualifiers","valueHelpQualifier","vhParameters","vhKeys","propertyKeyPath","valueHelpKeyPath","filteredKeys","helpPaths","forEach","param","helpPath","filter","key","includes","_onConditionPropagationToFilterBar","filterBarVH","conditions","outParameters","filterBar","state","retrieveExternalState","filterItemsVH","getFilterItems","outParameter","filterTarget","source","split","pop","find","item","getId","conditionPayload","newCondition","createCondition","Validated","applyExternalState","err","message","Error","String","error","_onConditionPropagationToBindingContext","context","metaModel","getMetaModel","outValues","warning","_onConditionPropagationUpdateProperty","convertedMetadata","rootPath","getMetaContext","getPath","contextCanRequestSideEffects","isTransient","isInactive","_updatePropertyViaOutParameter","_targetProperty$annot","_targetProperty$annot2","_targetProperty$annot3","_targetProperty$annot4","_targetProperty$annot5","_targetProperty$annot6","targetProperty","resolvePath","target","fieldControl","annotations","Common","FieldControl","dynamicReadOnly","path","lastIndex","lastIndexOf","sideEffectPath","substring","requestSideEffects","setProperty","textPath","Text","getFilterConditions","_config","getInitialFilterConditions","control","getControl","onConditionPropagation","reason","qualifier","getOutParameters","field","fieldParent","getParent","getConditions","isA","_createInitialFilterCondition","value","initialValueFilterEmpty","_getInitialFilterConditionsFromBinding","inConditions","inParameters","propertiesToRequest","map","inParameter","requestProperty","i","_getInitialFilterConditionsFromFilterBar","_getConditionsFromInParameter","sourceField","endsWith","_partitionInParameters","inParameterMap","constant","binding","constantValue","indexOf","_tableAfterRenderDelegate","onAfterRendering","event","table","srcControl","tableCellsDomRefs","$","mdcMTable","popoverTable","getTable","removeEventDelegate","addEventDelegate","getInParameters","isObjectPage","createConditionPayload","_values","entry","isMultiValueField","vhKey","getObject","isFilterableListItemSelected","_content$getConfig","isValueListWithFixedValues","getConfig","maxConditions","validated","selectedCondition","_conditionPayloadMap$","keyPath","getKeyPath","conditionSelectedRow","selectedKeys","every","updateBindingDonePromiseResolve","Promise","resolve","additionalValueContextData","requestForAdditionalValueContextData","uniqueAdditionalValues","removeDuplicateAdditionalValues","sortAndFilterOthers","resumeValueListBindingAndResetChanges","doesTransientContextsAlreadyExist","createAdditionalValueTransientContexts","reverse","rootBinding","getRootBinding","suspend","changeParameters","filters","Application","sort","sorter","resume","resetChanges","checkIfAdditionalValuesExists","showTypeahead","_content$getControl","filterValue","vhValue","getValue"],"sources":["ValueHelpDelegate-dbg.js"],"mappings":"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","sourceRoot":"valuehelp"}},{"offset":{"line":34473,"column":0},"map":{"version":3,"names":["ValueHelpFilterBarBlock","defineBuildingBlock","name","namespace","fragment","blockAttribute","type","required","blockEvent","props","controlConfiguration","settings","metaModel","contextPath","getModel","metaPathContext","metaPath","metaPathPath","getPath","dataModelObjectPath","getInvolvedDataModelObjects","converterContext","getConverterContext","undefined","selectionFields","getSelectionFields","TemplateModel","createBindingContext","targetEntitySet","expandFilterFields","getExpandFilterFields","annotations","Capabilities","FilterRestrictions","_valueList","BuildingBlockBase"],"sourceRoot":"valuehelp","sources":["ValueHelpFilterBar.block.ts"],"sourcesContent":["import type { EntitySet } from \"@sap-ux/vocabularies-types\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { getExpandFilterFields, getSelectionFields } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport type { FilterBarP13nMode } from \"sap/ui/mdc/library\";\nimport type Context from \"sap/ui/model/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\n/**\n * Building block for creating a FilterBar based on the metadata provided by OData V4 for the value help dialog.\n *\n * @private\n */\n@defineBuildingBlock({\n\tname: \"ValueHelpFilterBar\",\n\tnamespace: \"sap.fe.macros.valuehelp\",\n\tfragment: \"sap.fe.macros.valuehelp.ValueHelpFilterBar\"\n})\nexport default class ValueHelpFilterBarBlock extends BuildingBlockBase {\n\t/**\n\t * ID of the FilterBar\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic id?: string;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tpublic contextPath!: Context;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\tpublic metaPath?: Context;\n\n\t/**\n\t * Don't show the basic search field\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic hideBasicSearch = false;\n\n\t/**\n\t * Enables the fallback to show all fields of the EntityType as filter fields if com.sap.vocabularies.UI.v1.SelectionFields are not present\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tenableFallback = false;\n\n\t/**\n\t * Specifies the personalization options for the filter bar.\n\t */\n\t@blockAttribute({ type: \"sap.ui.mdc.FilterBarP13nMode[]\" })\n\tpublic p13nMode: FilterBarP13nMode[] = [];\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter bar.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic useSemanticDateRange = true;\n\n\t/**\n\t * If set the search will be automatically triggered, when a filter value was changed.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic liveMode = false;\n\n\t/**\n\t * Temporary workaround only\n\t * path to valuelist\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tpublic _valueList!: Context;\n\n\t/**\n\t * selectionFields to be displayed\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\tpublic selectionFields?: Context;\n\n\t/**\n\t * Filter conditions to be applied to the filter bar\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic filterConditions?: string;\n\n\t/**\n\t * If set to <code>true</code>, all search requests are ignored. Once it has been set to <code>false</code>,\n\t * a search is triggered immediately if one or more search requests have been triggered in the meantime\n\t * but were ignored based on the setting.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic suspendSelection = false;\n\n\t/**\n\t * Determines whether the Show/Hide Filters button is in the state show or hide.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tprivate expandFilterFields = true;\n\n\t/**\n\t * Search handler name\n\t */\n\t@blockEvent()\n\tsearch?: Function;\n\n\t/**\n\t * Filters changed handler name\n\t */\n\t@blockEvent()\n\tfilterChanged?: Function;\n\n\tconstructor(props: PropertiesOf<ValueHelpFilterBarBlock>, controlConfiguration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props);\n\n\t\tconst metaModel = this.contextPath.getModel() as ODataMetaModel;\n\n\t\tconst metaPathContext = this.metaPath;\n\t\tconst metaPathPath = metaPathContext?.getPath();\n\t\tconst dataModelObjectPath = getInvolvedDataModelObjects(this.contextPath);\n\t\tconst converterContext = this.getConverterContext(dataModelObjectPath, undefined, settings);\n\n\t\tif (!this.selectionFields) {\n\t\t\tconst selectionFields = getSelectionFields(converterContext, [], metaPathPath).selectionFields;\n\t\t\tthis.selectionFields = new TemplateModel(selectionFields, metaModel).createBindingContext(\"/\");\n\t\t}\n\n\t\tconst targetEntitySet: EntitySet = dataModelObjectPath.targetEntitySet as EntitySet; // It could be a singleton but the annotaiton are not defined there (yet?)\n\t\tthis.expandFilterFields = getExpandFilterFields(\n\t\t\tconverterContext,\n\t\t\ttargetEntitySet.annotations.Capabilities?.FilterRestrictions,\n\t\t\tthis._valueList\n\t\t);\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":34716,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockBase","BuildingBlockSupport","FilterBar","MetaModelConverter","TemplateModel","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_exports","getInvolvedDataModelObjects","getSelectionFields","getExpandFilterFields","defineBuildingBlock","blockEvent","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","ValueHelpFilterBarBlock","name","namespace","fragment","type","required","_BuildingBlockBase","props","controlConfiguration","settings","_targetEntitySet$anno","_this","this","metaModel","contextPath","getModel","metaPathContext","metaPath","metaPathPath","getPath","dataModelObjectPath","converterContext","getConverterContext","selectionFields","createBindingContext","targetEntitySet","expandFilterFields","annotations","Capabilities","FilterRestrictions","_valueList"],"sources":["ValueHelpFilterBar.block-dbg.js"],"mappings":"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","sourceRoot":"valuehelp"}},{"offset":{"line":34721,"column":0},"map":{"version":3,"names":["InteractiveChartHelper","getChartDisplayedValue","value","valueFormat","metaPath","infoPath","generate","ScaleFactor","valueOf","NumberOfFractionalDigits","getChartValue","_getCollectionName","collection","contextPath","parameters","collectionObject","targetObject","isNavigationProperty","getPath","name","isEntitySet","_getBindingPathForParameters","filterConditions","metaModel","collectionName","entitySetPath","params","convertedFilterConditions","VisualFilterUtils","convertFilterCondions","parameterProperties","CommonUtils","getParameterInfo","i","parameter","property","entityPath","split","propertyContext","createBindingContext","typeConfig","TypeUtil","getTypeConfig","$Type","JSTokenizer","parseJS","formatOptions","context","constraints","condition","conditionInternal","undefined","internalParameterCondition","ConditionConverter","toType","edmType","encodeURIComponent","ODataUtils","formatLiteral","values","replaceAll","push","parameterEntitySet","slice","lastIndexOf","targetNavigation","substring","toString","_getUOMAggregationExpression","customAggregate","UoMHasCustomAggregate","UOM","aggregation","aggregationExpression","UOMExpression","path","AggregatableProperty","AggregationMethod","getAggregationBinding","chartAnnotations","textAssociation","dimensionType","sortOrder","selectionVariant","filterBarContext","draftSupported","chartMeasure","selectionVariantAnnotation","entityType","dimension","Dimensions","filters","getUoM","getModel","operator","value1","value2","isParameter","getFiltersConditionsFromSelectionVariant","getCustomConditions","bind","conditions","forEach","length","bindingPath","UOMAggregationExpression","textAssociationExpression","filterExpression","JSON","stringify","getSortOrder","getMaxItems","_getOrderExpressionFromMeasure","sortPropertyName","DynamicProperty","$target","Name","Property","Descending","ChartType","getColorBinding","dataPoint","valueCriticality","annotations","UI","ValueCriticality","Criticality","buildExpressionForCriticalityColorMicroChart","CriticalityCalculation","oDirection","ImprovementDirection","oDataPointValue","Value","oDeviationRangeLowValue","DeviationRangeLowValue","oToleranceRangeLowValue","ToleranceRangeLowValue","oAcceptanceRangeLowValue","AcceptanceRangeLowValue","oAcceptanceRangeHighValue","AcceptanceRangeHighValue","oToleranceRangeHighValue","ToleranceRangeHighValue","oDeviationRangeHighValue","DeviationRangeHighValue","CommonHelper","getCriticalityCalculationBinding","getValueCriticality","result","valueCriticalityType","_getCriticalityFromEnum","join","criticality","valueColor","mLibrary","ValueColor","indicator","Error","Good","Critical","Neutral","getScaleUoMTitle","chartAnnotation","seperator","toolTip","scaleFactor","MeasureAttributes","DataPoint","ValueFormat","fixedInteger","NumberFormat","getIntegerInstance","style","showScale","shortRefNumber","scale","getScale","expression","getMeasureDimensionTitle","measureLabel","measurePath","Measures","DynamicMeasures","dimensionPath","dimensionLabel","Common","Label","Core","getLibraryResourceBundle","getText","getToolTip","renderLineChart","chartType","measureDimensionToolTip","escapeSingleQuotes","scaleUOMTooltip","_getUOM","UOMObjectPath","customData","aggregatablePropertyPath","UOMObject","$Path","entityProperties","targetType","propertyAnnotations","find","measure","ISOCurrency","unit","Unit","getScaleFactor","getUoMVisiblity","showError","getInParameterFiltersBinding","inParameters","parts","paths","inParameter","localDataProperty","getfilterCountBinding","getInteractiveChartProperties","visualFilter","interactiveChartProperties","id","showErrorExpression","errorMessageExpression","errorMessageTitleExpression","dataPointAnnotation","getParameters","getObject","dimensionText","Text","contextObjectPath","getInvolvedDataModelObjects","SortOrder","aggregationBinding","type","aggregateProperties","filterBarEntityType","scalefactor","uom","stringifyCustomData","inParameterFilters","stringifiedParameters","dimensionContext","fullyQualifiedName","dimensionObject","chartLabel","getTextBinding","displayedValue","color"],"sourceRoot":"visualfilters","sources":["InteractiveChartHelper.ts"],"sourcesContent":["import { PathAnnotationExpression, Property, PropertyPath } from \"@sap-ux/vocabularies-types\";\nimport { AggregatedProperty, AggregatedPropertyType } from \"@sap-ux/vocabularies-types/vocabularies/Analytics\";\nimport { Label, SortOrder } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport { Chart, DataPoint, NumberFormat as NumberFormatType, ValueCriticalityType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport JSTokenizer from \"sap/base/util/JSTokenizer\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport VisualFilterUtils from \"sap/fe/core/controls/filterbar/utils/VisualFilterUtils\";\nimport { ParameterType } from \"sap/fe/core/converters/controls/ListReport/VisualFilters\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression } from \"sap/fe/core/helpers/BindingToolkit\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isEntitySet, isNavigationProperty } from \"sap/fe/core/helpers/TypeGuards\";\nimport { buildExpressionForCriticalityColorMicroChart } from \"sap/fe/core/templating/CriticalityFormatters\";\nimport { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { FilterConditions, getFiltersConditionsFromSelectionVariant } from \"sap/fe/core/templating/FilterHelper\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport { constraints, formatOptions } from \"sap/fe/macros/filter/FilterFieldHelper\";\nimport mLibrary from \"sap/m/library\";\nimport Core from \"sap/ui/core/Core\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport ConditionConverter from \"sap/ui/mdc/condition/ConditionConverter\";\nimport type MDCTypeUtil from \"sap/ui/mdc/util/TypeUtil\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport ODataUtils from \"sap/ui/model/odata/v4/ODataUtils\";\nimport { getTextBinding } from \"../field/FieldTemplating\";\nimport VisualFilterBlock from \"./VisualFilter.block\";\ntype MeasureType = {\n\tvalue?: string;\n\tISOCurrency?: PathAnnotationExpression<string>;\n\tUnit?: PathAnnotationExpression<string>;\n};\ntype InteractiveChartType = {\n\tchartLabel?: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\taggregationBinding?: string;\n\terrorMessageTitleExpression?: string;\n\terrorMessageExpression?: string;\n\tshowErrorExpression?: string;\n\tinParameters?: string;\n\tdisplayedValue?: string;\n\tmeasure?: string;\n\tstringifiedParameters?: string;\n\tselectionVariantAnnotation?: string;\n\tinParameterFilters?: string;\n\tcolor?: string;\n\tuom?: string | PathAnnotationExpression<string>;\n\tscalefactor?: number | object;\n};\n\nconst InteractiveChartHelper = {\n\tgetChartDisplayedValue: function (value: string, valueFormat?: NumberFormatType, metaPath?: string) {\n\t\tconst infoPath = generate([metaPath]);\n\t\treturn (\n\t\t\t\"{parts:[{path:'\" +\n\t\t\tvalue +\n\t\t\t\"',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}\" +\n\t\t\t(valueFormat && valueFormat.ScaleFactor\n\t\t\t\t? \",{value:'\" + valueFormat.ScaleFactor.valueOf() + \"'}\"\n\t\t\t\t: \",{path:'internal>scalefactorNumber/\" + infoPath + \"'}\") +\n\t\t\t(valueFormat && valueFormat.NumberOfFractionalDigits\n\t\t\t\t? \",{value:'\" + valueFormat.NumberOfFractionalDigits + \"'}\"\n\t\t\t\t: \",{value:'0'}\") +\n\t\t\t\",{path:'internal>currency/\" +\n\t\t\tinfoPath +\n\t\t\t\"'}\" +\n\t\t\t\",{path:'\" +\n\t\t\tvalue +\n\t\t\t\"',type:'sap.ui.model.odata.type.String', constraints:{'nullable':false}}\" +\n\t\t\t\"], formatter:'VisualFilterRuntime.scaleVisualFilterValue'}\"\n\t\t); //+ sType.split('#').length ? sType.split('#')[1] : 'Decimal' + \"}\";\n\t},\n\tgetChartValue: function (value: string) {\n\t\treturn \"{path:'\" + value + \"',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}\";\n\t},\n\t_getCollectionName: function (collection: DataModelObjectPath, contextPath: Context, parameters?: Array<string>) {\n\t\tconst collectionObject = collection.targetObject;\n\t\tif (isNavigationProperty(collectionObject)) {\n\t\t\treturn parameters ? contextPath.getPath() : collectionObject.name;\n\t\t} else if (isEntitySet(collectionObject)) {\n\t\t\treturn \"/\" + collectionObject.name;\n\t\t} else {\n\t\t\treturn collectionObject.name;\n\t\t}\n\t},\n\t_getBindingPathForParameters: function (\n\t\tfilterConditions: Record<string, FilterConditions[]>,\n\t\tmetaModel: ODataModel,\n\t\tcollectionName: string,\n\t\tparameters: Array<string>,\n\t\tentitySetPath: string\n\t) {\n\t\tconst params = [];\n\t\tconst convertedFilterConditions = VisualFilterUtils.convertFilterCondions(filterConditions);\n\t\tconst parameterProperties = CommonUtils.getParameterInfo(\n\t\t\tmetaModel as unknown as ODataMetaModel,\n\t\t\tcollectionName\n\t\t).parameterProperties;\n\t\tif (parameterProperties) {\n\t\t\tfor (const i in parameters) {\n\t\t\t\tconst parameter = parameters[i];\n\t\t\t\tconst property = parameterProperties[parameter];\n\t\t\t\tconst entityPath = entitySetPath.split(\"/\")[1];\n\t\t\t\tconst propertyContext = metaModel.createBindingContext(`/${entityPath}/${parameter}`);\n\t\t\t\tconst typeConfig = TypeUtil.getTypeConfig(\n\t\t\t\t\tproperty.$Type,\n\t\t\t\t\tJSTokenizer.parseJS(formatOptions(property, { context: propertyContext }) || \"{}\"),\n\t\t\t\t\tJSTokenizer.parseJS(constraints(property, { context: propertyContext }) || \"{}\")\n\t\t\t\t);\n\t\t\t\tconst condition = convertedFilterConditions[parameter];\n\t\t\t\tconst conditionInternal = condition ? condition[0] : undefined;\n\t\t\t\tif (conditionInternal) {\n\t\t\t\t\tconst internalParameterCondition = ConditionConverter.toType(\n\t\t\t\t\t\tconditionInternal,\n\t\t\t\t\t\ttypeConfig,\n\t\t\t\t\t\tTypeUtil as unknown as MDCTypeUtil\n\t\t\t\t\t);\n\t\t\t\t\tconst edmType = property.$Type;\n\t\t\t\t\tlet value = encodeURIComponent(ODataUtils.formatLiteral(internalParameterCondition.values[0], edmType));\n\t\t\t\t\tvalue = value.replaceAll(\"'\", \"\\\\'\");\n\t\t\t\t\tparams.push(`${parameter}=${value}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst parameterEntitySet = collectionName.slice(0, collectionName.lastIndexOf(\"/\"));\n\t\tconst targetNavigation = collectionName.substring(collectionName.lastIndexOf(\"/\") + 1);\n\t\t// create parameter context\n\t\treturn `${parameterEntitySet}(${params.toString()})/${targetNavigation}`;\n\t},\n\t_getUOMAggregationExpression: function (\n\t\tcustomAggregate?: boolean,\n\t\tUoMHasCustomAggregate?: boolean,\n\t\tUOM?: PathAnnotationExpression<string> | string,\n\t\taggregation?: AggregatedPropertyType\n\t) {\n\t\tlet aggregationExpression, UOMExpression;\n\t\tconst path = UOM && typeof UOM != \"string\" && UOM.path;\n\t\tif (customAggregate) {\n\t\t\t//custom aggregate for a currency or unit of measure corresponding to this aggregatable property\n\t\t\tif (UoMHasCustomAggregate) {\n\t\t\t\taggregationExpression = path ? `{ 'unit' : '${path}' }` : \"{}\";\n\t\t\t\tUOMExpression = \"\";\n\t\t\t} else {\n\t\t\t\taggregationExpression = \"{}\";\n\t\t\t\tUOMExpression = path ? `, '${path}' : {}` : \"\";\n\t\t\t}\n\t\t} else if (\n\t\t\taggregation &&\n\t\t\taggregation.AggregatableProperty &&\n\t\t\taggregation.AggregatableProperty.value &&\n\t\t\taggregation.AggregationMethod\n\t\t) {\n\t\t\taggregationExpression =\n\t\t\t\t\"{ 'name' : '\" + aggregation.AggregatableProperty.value + \"', 'with' : '\" + aggregation.AggregationMethod + \"'}\";\n\t\t\tUOMExpression = path ? \", '\" + path + \"' : {}\" : \"\";\n\t\t}\n\n\t\treturn {\n\t\t\taggregationExpression: aggregationExpression,\n\t\t\tUOMExpression: UOMExpression\n\t\t};\n\t},\n\tgetAggregationBinding: function (\n\t\tchartAnnotations: Chart,\n\t\tcollection: DataModelObjectPath,\n\t\tcontextPath: Context,\n\t\ttextAssociation?: PathAnnotationExpression<string>,\n\t\tdimensionType?: string,\n\t\tsortOrder?: SortOrder,\n\t\tselectionVariant?: DataModelObjectPath,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType,\n\t\tUoMHasCustomAggregate?: boolean,\n\t\tparameters?: Array<string>,\n\t\tfilterBarContext?: Context,\n\t\tdraftSupported?: boolean,\n\t\tchartMeasure?: string\n\t) {\n\t\tconst selectionVariantAnnotation = selectionVariant?.targetObject;\n\t\tconst entityType = filterBarContext ? filterBarContext.getPath() : \"\";\n\t\tconst entitySetPath = contextPath.getPath();\n\t\tconst dimension = chartAnnotations.Dimensions[0].value;\n\t\tconst filters = [];\n\t\tlet filterConditions;\n\t\tlet collectionName = this._getCollectionName(collection, contextPath, parameters);\n\t\tconst UOM: PathAnnotationExpression<string> | string | undefined = InteractiveChartHelper.getUoM(\n\t\t\tchartAnnotations,\n\t\t\tcollection,\n\t\t\tundefined,\n\t\t\tcustomAggregate,\n\t\t\taggregation\n\t\t);\n\t\tconst metaModel = contextPath.getModel();\n\t\tif (draftSupported) {\n\t\t\tfilters.push({\n\t\t\t\toperator: \"EQ\",\n\t\t\t\tvalue1: \"true\",\n\t\t\t\tvalue2: null,\n\t\t\t\tpath: \"IsActiveEntity\",\n\t\t\t\tisParameter: true\n\t\t\t});\n\t\t}\n\t\tif (selectionVariantAnnotation) {\n\t\t\tfilterConditions = getFiltersConditionsFromSelectionVariant(\n\t\t\t\tentitySetPath,\n\t\t\t\tmetaModel as unknown as ODataMetaModel,\n\t\t\t\tselectionVariantAnnotation,\n\t\t\t\tVisualFilterUtils.getCustomConditions.bind(VisualFilterUtils)\n\t\t\t);\n\t\t\tfor (const path in filterConditions) {\n\t\t\t\tconst conditions = filterConditions[path];\n\t\t\t\tconditions.forEach(function (condition: FilterConditions) {\n\t\t\t\t\tif (!condition.isParameter) {\n\t\t\t\t\t\tfilters.push(condition);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (entityType !== `${collectionName}/` && parameters && parameters.length && filterConditions) {\n\t\t\tconst bindingPath = this._getBindingPathForParameters(filterConditions, metaModel, collectionName, parameters, entitySetPath);\n\t\t\tcollectionName = bindingPath;\n\t\t}\n\t\tconst UOMAggregationExpression = this._getUOMAggregationExpression(customAggregate, UoMHasCustomAggregate, UOM, aggregation);\n\t\tconst aggregationExpression = UOMAggregationExpression.aggregationExpression;\n\t\tconst UOMExpression = UOMAggregationExpression.UOMExpression;\n\t\tconst textAssociationExpression = textAssociation ? \"' : { 'additionally' : ['\" + textAssociation.path + \"'] }\" : \"' : { }\";\n\t\tconst filterExpression = JSON.stringify(filters);\n\t\treturn (\n\t\t\t\"{path: '\" +\n\t\t\tcollectionName +\n\t\t\t\"', templateShareable: true, suspended : true, 'filters' : \" +\n\t\t\tfilterExpression +\n\t\t\t\",'parameters' : {\" +\n\t\t\tInteractiveChartHelper.getSortOrder(chartAnnotations, dimensionType, sortOrder, chartMeasure) +\n\t\t\t\", '$$aggregation' : {'aggregate' : {'\" +\n\t\t\tchartMeasure +\n\t\t\t\"' : \" +\n\t\t\taggregationExpression +\n\t\t\t\"},'group' : {'\" +\n\t\t\tdimension +\n\t\t\ttextAssociationExpression +\n\t\t\tUOMExpression +\n\t\t\t\"} } }\" +\n\t\t\tInteractiveChartHelper.getMaxItems(chartAnnotations) +\n\t\t\t\"}\"\n\t\t);\n\t},\n\t_getOrderExpressionFromMeasure: function (sortOrder?: SortOrder, chartMeasure?: string) {\n\t\tlet sortPropertyName;\n\t\tif (sortOrder && sortOrder.length) {\n\t\t\tif (sortOrder[0].DynamicProperty) {\n\t\t\t\tsortPropertyName = (sortOrder[0].DynamicProperty.$target as AggregatedProperty)?.Name;\n\t\t\t} else {\n\t\t\t\tsortPropertyName = sortOrder[0].Property?.value;\n\t\t\t}\n\t\t\tif (sortPropertyName === chartMeasure) {\n\t\t\t\treturn \"'$orderby' : '\" + chartMeasure + (sortOrder[0].Descending ? \" desc'\" : \"'\");\n\t\t\t}\n\t\t\treturn \"'$orderby' : '\" + chartMeasure + \" desc'\";\n\t\t}\n\t\treturn \"'$orderby' : '\" + chartMeasure + \" desc'\";\n\t},\n\tgetSortOrder: function (chartAnnotations: Chart, dimensionType?: string, sortOrder?: SortOrder, chartMeasure?: string) {\n\t\tif (chartAnnotations.ChartType === \"UI.ChartType/Donut\" || chartAnnotations.ChartType === \"UI.ChartType/Bar\") {\n\t\t\treturn this._getOrderExpressionFromMeasure(sortOrder, chartMeasure);\n\t\t} else if (dimensionType === \"Edm.Date\" || dimensionType === \"Edm.Time\" || dimensionType === \"Edm.DateTimeOffset\") {\n\t\t\treturn \"'$orderby' : '\" + chartAnnotations.Dimensions[0].value + \"'\";\n\t\t} else if (\n\t\t\tsortOrder &&\n\t\t\tsortOrder.length &&\n\t\t\t(sortOrder[0].Property?.$target as unknown as PathAnnotationExpression<string>)?.path === chartAnnotations.Dimensions[0].value\n\t\t) {\n\t\t\treturn \"'$orderby' : '\" + sortOrder[0].Property?.$target?.name + (sortOrder[0].Descending ? \" desc'\" : \"'\");\n\t\t} else {\n\t\t\treturn \"'$orderby' : '\" + chartAnnotations.Dimensions[0].$target?.name + \"'\";\n\t\t}\n\t},\n\tgetMaxItems: function (chartAnnotations: Chart) {\n\t\tif (chartAnnotations.ChartType === \"UI.ChartType/Bar\") {\n\t\t\treturn \",'startIndex' : 0,'length' : 3\";\n\t\t} else if (chartAnnotations.ChartType === \"UI.ChartType/Line\") {\n\t\t\treturn \",'startIndex' : 0,'length' : 6\";\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t},\n\tgetColorBinding: function (dataPoint: DataPoint, dimension: PropertyPath) {\n\t\tconst valueCriticality = dimension?.$target?.annotations?.UI?.ValueCriticality;\n\t\tif (dataPoint?.Criticality) {\n\t\t\treturn buildExpressionForCriticalityColorMicroChart(dataPoint);\n\t\t} else if (dataPoint?.CriticalityCalculation) {\n\t\t\tconst oDirection = dataPoint.CriticalityCalculation.ImprovementDirection;\n\t\t\tconst oDataPointValue = dataPoint.Value;\n\t\t\tconst oDeviationRangeLowValue = dataPoint.CriticalityCalculation.DeviationRangeLowValue.valueOf();\n\t\t\tconst oToleranceRangeLowValue = dataPoint.CriticalityCalculation.ToleranceRangeLowValue.valueOf();\n\t\t\tconst oAcceptanceRangeLowValue = dataPoint.CriticalityCalculation.AcceptanceRangeLowValue.valueOf();\n\t\t\tconst oAcceptanceRangeHighValue = dataPoint.CriticalityCalculation.AcceptanceRangeHighValue.valueOf();\n\t\t\tconst oToleranceRangeHighValue = dataPoint.CriticalityCalculation.ToleranceRangeHighValue.valueOf();\n\t\t\tconst oDeviationRangeHighValue = dataPoint.CriticalityCalculation.DeviationRangeHighValue.valueOf();\n\t\t\treturn CommonHelper.getCriticalityCalculationBinding(\n\t\t\t\toDirection,\n\t\t\t\toDataPointValue,\n\t\t\t\toDeviationRangeLowValue,\n\t\t\t\toToleranceRangeLowValue,\n\t\t\t\toAcceptanceRangeLowValue,\n\t\t\t\toAcceptanceRangeHighValue,\n\t\t\t\toToleranceRangeHighValue,\n\t\t\t\toDeviationRangeHighValue\n\t\t\t);\n\t\t} else if (valueCriticality && valueCriticality.length) {\n\t\t\treturn InteractiveChartHelper.getValueCriticality(dimension.value, valueCriticality);\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\tgetValueCriticality: function (dimension: string, valueCriticality: Array<ValueCriticalityType>) {\n\t\tlet result;\n\t\tconst values: string[] = [];\n\t\tif (valueCriticality && valueCriticality.length > 0) {\n\t\t\tvalueCriticality.forEach(function (valueCriticalityType: ValueCriticalityType) {\n\t\t\t\tif (valueCriticalityType.Value && valueCriticalityType.Criticality) {\n\t\t\t\t\tconst value =\n\t\t\t\t\t\t\"${\" +\n\t\t\t\t\t\tdimension +\n\t\t\t\t\t\t\"} === '\" +\n\t\t\t\t\t\tvalueCriticalityType.Value +\n\t\t\t\t\t\t\"' ? '\" +\n\t\t\t\t\t\tInteractiveChartHelper._getCriticalityFromEnum(valueCriticalityType.Criticality) +\n\t\t\t\t\t\t\"'\";\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t});\n\t\t\tresult = values.length > 0 && values.join(\" : \") + \" : undefined\";\n\t\t}\n\t\treturn result ? \"{= \" + result + \" }\" : undefined;\n\t},\n\t/**\n\t * This function returns the criticality indicator from annotations if criticality is EnumMember.\n\t *\n\t * @param criticality Criticality provided in the annotations\n\t * @returns Return the indicator for criticality\n\t * @private\n\t */\n\t_getCriticalityFromEnum: function (criticality: string) {\n\t\tconst valueColor = mLibrary.ValueColor;\n\t\tlet indicator;\n\t\tif (criticality === \"UI.CriticalityType/Negative\") {\n\t\t\tindicator = valueColor.Error;\n\t\t} else if (criticality === \"UI.CriticalityType/Positive\") {\n\t\t\tindicator = valueColor.Good;\n\t\t} else if (criticality === \"UI.CriticalityType/Critical\") {\n\t\t\tindicator = valueColor.Critical;\n\t\t} else {\n\t\t\tindicator = valueColor.Neutral;\n\t\t}\n\t\treturn indicator;\n\t},\n\tgetScaleUoMTitle: function (\n\t\tchartAnnotation?: Chart,\n\t\tcollection?: DataModelObjectPath,\n\t\tmetaPath?: string,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType,\n\t\tseperator?: string,\n\t\ttoolTip?: boolean\n\t) {\n\t\tconst scaleFactor = chartAnnotation?.MeasureAttributes\n\t\t\t? chartAnnotation.MeasureAttributes[0]?.DataPoint?.$target?.ValueFormat?.ScaleFactor?.valueOf()\n\t\t\t: undefined;\n\t\tconst infoPath = generate([metaPath]);\n\t\tconst fixedInteger = NumberFormat.getIntegerInstance({\n\t\t\tstyle: \"short\",\n\t\t\tshowScale: false,\n\t\t\tshortRefNumber: scaleFactor as number\n\t\t});\n\t\tlet scale = fixedInteger.getScale();\n\t\tlet UOM = InteractiveChartHelper.getUoM(chartAnnotation, collection, undefined, customAggregate, aggregation);\n\t\tUOM = UOM && ((UOM as PathAnnotationExpression<string>).path ? \"${internal>uom/\" + infoPath + \"}\" : \"'\" + UOM + \"'\");\n\t\tscale = scale ? \"'\" + scale + \"'\" : \"${internal>scalefactor/\" + infoPath + \"}\";\n\t\tif (!seperator) {\n\t\t\tseperator = \"|\";\n\t\t}\n\t\tseperator = \"' \" + seperator + \" ' + \";\n\t\tconst expression = scale && UOM ? seperator + scale + \" + ' ' + \" + UOM : seperator + (scale || UOM);\n\t\treturn toolTip ? expression : \"{= \" + expression + \"}\";\n\t},\n\tgetMeasureDimensionTitle: function (chartAnnotation?: Chart, customAggregate?: boolean, aggregation?: AggregatedPropertyType) {\n\t\tlet measureLabel;\n\t\tlet measurePath;\n\t\tif (customAggregate) {\n\t\t\tmeasurePath = chartAnnotation?.Measures[0]?.$target?.name;\n\t\t}\n\t\tif (chartAnnotation?.DynamicMeasures && chartAnnotation.DynamicMeasures.length > 0) {\n\t\t\tmeasurePath = (chartAnnotation.DynamicMeasures[0]?.$target as AggregatedPropertyType)?.AggregatableProperty?.value;\n\t\t} else if (!customAggregate && chartAnnotation?.Measures && chartAnnotation?.Measures.length > 0) {\n\t\t\tmeasurePath = chartAnnotation.Measures[0]?.$target?.name;\n\t\t}\n\t\tconst dimensionPath = chartAnnotation?.Dimensions[0]?.value as unknown as Label;\n\t\tlet dimensionLabel = chartAnnotation?.Dimensions[0]?.$target?.annotations?.Common?.Label;\n\t\tif (!customAggregate && aggregation) {\n\t\t\t// check if the label is part of aggregated properties (Transformation aggregates)\n\t\t\tmeasureLabel = aggregation.annotations && aggregation.annotations.Common && aggregation.annotations.Common.Label;\n\t\t\tif (measureLabel === undefined) {\n\t\t\t\tmeasureLabel = chartAnnotation?.Measures[0]?.$target?.annotations?.Common?.Label;\n\t\t\t}\n\t\t} else {\n\t\t\tmeasureLabel = chartAnnotation?.Measures[0]?.$target?.annotations?.Common?.Label;\n\t\t}\n\t\tif (measureLabel === undefined) {\n\t\t\tmeasureLabel = measurePath;\n\t\t}\n\t\tif (dimensionLabel === undefined) {\n\t\t\tdimensionLabel = dimensionPath;\n\t\t}\n\t\treturn Core.getLibraryResourceBundle(\"sap.fe.macros\").getText(\"M_INTERACTIVE_CHART_HELPER_VISUALFILTER_MEASURE_DIMENSION_TITLE\", [\n\t\t\tmeasureLabel,\n\t\t\tdimensionLabel\n\t\t]);\n\t},\n\n\tgetToolTip: function (\n\t\tchartAnnotation?: Chart,\n\t\tcollection?: DataModelObjectPath,\n\t\tmetaPath?: string,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType,\n\t\trenderLineChart?: boolean | string\n\t) {\n\t\tconst chartType = chartAnnotation && chartAnnotation[\"ChartType\"];\n\t\tlet measureDimensionToolTip = InteractiveChartHelper.getMeasureDimensionTitle(chartAnnotation, customAggregate, aggregation);\n\t\tmeasureDimensionToolTip = CommonHelper.escapeSingleQuotes(measureDimensionToolTip);\n\t\tif (renderLineChart === \"false\" && chartType === \"UI.ChartType/Line\") {\n\t\t\treturn `{= '${measureDimensionToolTip}'}`;\n\t\t}\n\n\t\tconst seperator = Core.getLibraryResourceBundle(\"sap.fe.macros\").getText(\n\t\t\t\"M_INTERACTIVE_CHART_HELPER_VISUALFILTER_TOOLTIP_SEPERATOR\"\n\t\t);\n\t\tconst infoPath = generate([metaPath]);\n\t\tconst scaleUOMTooltip = InteractiveChartHelper.getScaleUoMTitle(\n\t\t\tchartAnnotation,\n\t\t\tcollection,\n\t\t\tinfoPath,\n\t\t\tcustomAggregate,\n\t\t\taggregation,\n\t\t\tseperator,\n\t\t\ttrue\n\t\t);\n\t\treturn \"{= '\" + measureDimensionToolTip + (scaleUOMTooltip ? \"' + \" + scaleUOMTooltip : \"'\") + \"}\";\n\t},\n\t_getUOM: function (\n\t\tUOMObjectPath?: PathAnnotationExpression<string>,\n\t\tUOM?: string,\n\t\tcollection?: DataModelObjectPath,\n\t\tcustomData?: boolean,\n\t\taggregatablePropertyPath?: string\n\t) {\n\t\tconst UOMObject: Record<string, unknown> = {};\n\t\tconst collectionObject = collection?.targetObject;\n\t\tif (UOMObjectPath && UOM) {\n\t\t\t// check if the UOM is part of Measure annotations(Custom aggregates)\n\t\t\tUOMObject[UOM] = { $Path: UOMObjectPath.path };\n\t\t\treturn customData && UOMObjectPath.path ? JSON.stringify(UOMObject) : UOMObjectPath;\n\t\t} else if (aggregatablePropertyPath) {\n\t\t\t// check if the UOM is part of base property annotations(Transformation aggregates)\n\t\t\tconst entityProperties = collectionObject.entityType\n\t\t\t\t? collectionObject.entityType.entityProperties\n\t\t\t\t: collectionObject.targetType?.entityProperties;\n\t\t\tconst propertyAnnotations = entityProperties?.find((property: Property) => property.name == aggregatablePropertyPath);\n\t\t\tif (propertyAnnotations?.annotations?.Measures && UOM) {\n\t\t\t\tUOMObjectPath = propertyAnnotations?.annotations?.Measures[UOM];\n\t\t\t\tUOMObject[UOM] = { $Path: UOMObjectPath?.path };\n\t\t\t}\n\t\t\treturn UOMObjectPath && customData && UOMObjectPath.path ? JSON.stringify(UOMObject) : UOMObjectPath;\n\t\t}\n\t},\n\tgetUoM: function (\n\t\tchartAnnotation?: Chart,\n\t\tcollection?: DataModelObjectPath,\n\t\tcustomData?: boolean,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType\n\t) {\n\t\tlet measure: MeasureType = {};\n\t\tif (customAggregate) {\n\t\t\tmeasure = chartAnnotation?.Measures[0] as MeasureType;\n\t\t}\n\t\tif (chartAnnotation?.DynamicMeasures && chartAnnotation.DynamicMeasures.length > 0) {\n\t\t\tmeasure = (chartAnnotation.DynamicMeasures[0]?.$target as AggregatedPropertyType)?.AggregatableProperty?.$target?.annotations\n\t\t\t\t?.Measures as MeasureType;\n\t\t} else if (!customAggregate && chartAnnotation?.Measures && chartAnnotation.Measures.length > 0) {\n\t\t\tmeasure = chartAnnotation.Measures[0];\n\t\t}\n\t\tconst ISOCurrency = measure?.ISOCurrency;\n\t\tconst unit = measure?.Unit;\n\t\tlet aggregatablePropertyPath: string | undefined;\n\t\tif (!customAggregate && aggregation) {\n\t\t\taggregatablePropertyPath = aggregation.AggregatableProperty && aggregation.AggregatableProperty.value;\n\t\t} else {\n\t\t\taggregatablePropertyPath = measure?.value;\n\t\t}\n\t\treturn (\n\t\t\tthis._getUOM(ISOCurrency, \"ISOCurrency\", collection, customData, aggregatablePropertyPath) ||\n\t\t\tthis._getUOM(unit, \"Unit\", collection, customData, aggregatablePropertyPath)\n\t\t);\n\t},\n\tgetScaleFactor: function (valueFormat?: NumberFormatType) {\n\t\tif (valueFormat && valueFormat.ScaleFactor) {\n\t\t\treturn valueFormat.ScaleFactor.valueOf();\n\t\t}\n\t\treturn undefined;\n\t},\n\tgetUoMVisiblity: function (chartAnnotation?: Chart, showError?: boolean) {\n\t\tconst chartType = chartAnnotation && chartAnnotation[\"ChartType\"];\n\t\tif (showError) {\n\t\t\treturn false;\n\t\t} else if (!(chartType === \"UI.ChartType/Bar\" || chartType === \"UI.ChartType/Line\")) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t},\n\tgetInParameterFiltersBinding: function (inParameters: Array<ParameterType>) {\n\t\tif (inParameters.length > 0) {\n\t\t\tconst parts: string[] = [];\n\t\t\tlet paths = \"\";\n\t\t\tinParameters.forEach(function (inParameter: ParameterType) {\n\t\t\t\tif (inParameter.localDataProperty) {\n\t\t\t\t\tparts.push(`{path:'$filters>/conditions/${inParameter.localDataProperty}'}`);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (parts.length > 0) {\n\t\t\t\tpaths = parts.join();\n\t\t\t\treturn `{parts:[${paths}], formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFiltersFromConditions'}`;\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\tgetfilterCountBinding: function (chartAnnotation?: Chart) {\n\t\tconst dimension = chartAnnotation?.Dimensions[0]?.$target?.name;\n\t\treturn (\n\t\t\t\"{path:'$filters>/conditions/\" + dimension + \"', formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFilterCounts'}\"\n\t\t);\n\t},\n\n\tgetInteractiveChartProperties: function (visualFilter: VisualFilterBlock) {\n\t\tconst chartAnnotation = visualFilter.chartAnnotation;\n\t\tconst interactiveChartProperties: InteractiveChartType = {};\n\t\tif (visualFilter.chartMeasure && chartAnnotation?.Dimensions && chartAnnotation.Dimensions[0]) {\n\t\t\tconst id = generate([visualFilter.metaPath?.getPath()]);\n\t\t\tinteractiveChartProperties.showErrorExpression = \"${internal>\" + id + \"/showError}\";\n\t\t\tinteractiveChartProperties.errorMessageExpression = \"{internal>\" + id + \"/errorMessage}\";\n\t\t\tinteractiveChartProperties.errorMessageTitleExpression = \"{internal>\" + id + \"/errorMessageTitle}\";\n\t\t\tlet dataPointAnnotation;\n\t\t\tif (chartAnnotation?.MeasureAttributes && chartAnnotation?.MeasureAttributes[0]) {\n\t\t\t\tdataPointAnnotation = chartAnnotation?.MeasureAttributes[0]?.DataPoint\n\t\t\t\t\t? chartAnnotation?.MeasureAttributes[0].DataPoint.$target\n\t\t\t\t\t: chartAnnotation?.MeasureAttributes[0];\n\t\t\t}\n\t\t\tconst dimension = chartAnnotation?.Dimensions[0];\n\t\t\tconst parameters = CommonHelper.getParameters(visualFilter.contextPath.getObject(), { context: visualFilter.contextPath });\n\t\t\tconst dimensionText = dimension?.$target?.annotations?.Common?.Text as unknown as PathAnnotationExpression<string>;\n\t\t\tconst contextObjectPath = getInvolvedDataModelObjects(visualFilter.metaPath, visualFilter.contextPath).targetObject;\n\t\t\tconst collection = getInvolvedDataModelObjects(visualFilter.contextPath);\n\t\t\tconst selectionVariant = visualFilter.selectionVariantAnnotation\n\t\t\t\t? getInvolvedDataModelObjects(visualFilter.selectionVariantAnnotation)\n\t\t\t\t: undefined;\n\t\t\tconst sortOrder = contextObjectPath.SortOrder;\n\t\t\tinteractiveChartProperties.aggregationBinding = InteractiveChartHelper.getAggregationBinding(\n\t\t\t\tchartAnnotation,\n\t\t\t\tcollection,\n\t\t\t\tvisualFilter.contextPath,\n\t\t\t\tdimensionText,\n\t\t\t\tdimension.$target.type,\n\t\t\t\tsortOrder,\n\t\t\t\tselectionVariant,\n\t\t\t\tvisualFilter.customAggregate,\n\t\t\t\tvisualFilter.aggregateProperties,\n\t\t\t\tvisualFilter.UoMHasCustomAggregate,\n\t\t\t\tparameters,\n\t\t\t\tvisualFilter.filterBarEntityType,\n\t\t\t\tvisualFilter.draftSupported,\n\t\t\t\tvisualFilter.chartMeasure\n\t\t\t);\n\t\t\tinteractiveChartProperties.scalefactor = InteractiveChartHelper.getScaleFactor((dataPointAnnotation as DataPoint)?.ValueFormat);\n\t\t\tinteractiveChartProperties.uom = InteractiveChartHelper.getUoM(\n\t\t\t\tchartAnnotation,\n\t\t\t\tcollection,\n\t\t\t\ttrue,\n\t\t\t\tvisualFilter.customAggregate,\n\t\t\t\tvisualFilter.aggregateProperties\n\t\t\t);\n\t\t\tinteractiveChartProperties.inParameters = CommonHelper.stringifyCustomData(visualFilter.inParameters as object);\n\t\t\tinteractiveChartProperties.inParameterFilters = visualFilter.inParameters\n\t\t\t\t? InteractiveChartHelper.getInParameterFiltersBinding(visualFilter.inParameters)\n\t\t\t\t: undefined;\n\t\t\tinteractiveChartProperties.selectionVariantAnnotation = visualFilter.selectionVariantAnnotation\n\t\t\t\t? CommonHelper.stringifyCustomData(visualFilter.selectionVariantAnnotation)\n\t\t\t\t: undefined;\n\t\t\tinteractiveChartProperties.stringifiedParameters = CommonHelper.stringifyCustomData(parameters);\n\t\t\tconst dimensionContext = visualFilter.metaPath\n\t\t\t\t?.getModel()\n\t\t\t\t?.createBindingContext(visualFilter.contextPath.getPath() + \"/@\" + dimension.fullyQualifiedName.split(\"@\")[1]);\n\t\t\tif (dimensionContext) {\n\t\t\t\tconst dimensionObject = getInvolvedDataModelObjects(dimensionContext, visualFilter.contextPath);\n\t\t\t\tinteractiveChartProperties.chartLabel = getTextBinding(dimensionObject, {});\n\t\t\t}\n\t\t\tinteractiveChartProperties.measure = InteractiveChartHelper.getChartValue(visualFilter.chartMeasure);\n\t\t\tinteractiveChartProperties.displayedValue = InteractiveChartHelper.getChartDisplayedValue(\n\t\t\t\tvisualFilter.chartMeasure,\n\t\t\t\t(dataPointAnnotation as DataPoint)?.ValueFormat,\n\t\t\t\tvisualFilter.metaPath?.getPath()\n\t\t\t);\n\t\t\tinteractiveChartProperties.color = InteractiveChartHelper.getColorBinding(dataPointAnnotation as DataPoint, dimension);\n\t\t}\n\t\treturn interactiveChartProperties;\n\t}\n};\n\nexport default InteractiveChartHelper;\n"],"mappings":"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"}},{"offset":{"line":35144,"column":0},"map":{"version":3,"names":["sap","ui","define","JSTokenizer","CommonUtils","VisualFilterUtils","MetaModelConverter","StableIdHelper","TypeGuards","CriticalityFormatters","FilterHelper","TypeUtil","CommonHelper","FilterFieldHelper","mLibrary","Core","NumberFormat","ConditionConverter","ODataUtils","FieldTemplating","getTextBinding","formatOptions","constraints","getFiltersConditionsFromSelectionVariant","buildExpressionForCriticalityColorMicroChart","isNavigationProperty","isEntitySet","generate","getInvolvedDataModelObjects","InteractiveChartHelper","getChartDisplayedValue","value","valueFormat","metaPath","infoPath","ScaleFactor","valueOf","NumberOfFractionalDigits","getChartValue","_getCollectionName","collection","contextPath","parameters","collectionObject","targetObject","getPath","name","_getBindingPathForParameters","filterConditions","metaModel","collectionName","entitySetPath","params","convertedFilterConditions","convertFilterCondions","parameterProperties","getParameterInfo","i","parameter","property","entityPath","split","propertyContext","createBindingContext","typeConfig","getTypeConfig","$Type","parseJS","context","condition","conditionInternal","undefined","internalParameterCondition","toType","edmType","encodeURIComponent","formatLiteral","values","replaceAll","push","parameterEntitySet","slice","lastIndexOf","targetNavigation","substring","toString","_getUOMAggregationExpression","customAggregate","UoMHasCustomAggregate","UOM","aggregation","aggregationExpression","UOMExpression","path","AggregatableProperty","AggregationMethod","getAggregationBinding","chartAnnotations","textAssociation","dimensionType","sortOrder","selectionVariant","filterBarContext","draftSupported","chartMeasure","selectionVariantAnnotation","entityType","dimension","Dimensions","filters","this","getUoM","getModel","operator","value1","value2","isParameter","getCustomConditions","bind","conditions","forEach","length","bindingPath","UOMAggregationExpression","textAssociationExpression","filterExpression","JSON","stringify","getSortOrder","getMaxItems","_getOrderExpressionFromMeasure","sortPropertyName","DynamicProperty","_sortOrder$0$DynamicP","$target","Name","_sortOrder$0$Property","Property","Descending","_sortOrder$0$Property2","_sortOrder$0$Property3","ChartType","_sortOrder$0$Property4","_sortOrder$0$Property5","_chartAnnotations$Dim","getColorBinding","dataPoint","_dimension$$target","_dimension$$target$an","_dimension$$target$an2","valueCriticality","annotations","UI","ValueCriticality","Criticality","CriticalityCalculation","oDirection","ImprovementDirection","oDataPointValue","Value","oDeviationRangeLowValue","DeviationRangeLowValue","oToleranceRangeLowValue","ToleranceRangeLowValue","oAcceptanceRangeLowValue","AcceptanceRangeLowValue","oAcceptanceRangeHighValue","AcceptanceRangeHighValue","oToleranceRangeHighValue","ToleranceRangeHighValue","oDeviationRangeHighValue","DeviationRangeHighValue","getCriticalityCalculationBinding","getValueCriticality","result","valueCriticalityType","_getCriticalityFromEnum","join","criticality","valueColor","ValueColor","indicator","Error","Good","Critical","Neutral","getScaleUoMTitle","chartAnnotation","seperator","toolTip","_chartAnnotation$Meas","_chartAnnotation$Meas2","_chartAnnotation$Meas3","_chartAnnotation$Meas4","_chartAnnotation$Meas5","scaleFactor","MeasureAttributes","DataPoint","ValueFormat","fixedInteger","getIntegerInstance","style","showScale","shortRefNumber","scale","getScale","expression","getMeasureDimensionTitle","_chartAnnotation$Dime","_chartAnnotation$Dime2","_chartAnnotation$Dime3","_chartAnnotation$Dime4","_chartAnnotation$Dime5","measureLabel","measurePath","_chartAnnotation$Meas6","_chartAnnotation$Meas7","Measures","DynamicMeasures","_chartAnnotation$Dyna","_chartAnnotation$Dyna2","_chartAnnotation$Dyna3","_chartAnnotation$Meas8","_chartAnnotation$Meas9","dimensionPath","dimensionLabel","Common","Label","_chartAnnotation$Meas10","_chartAnnotation$Meas11","_chartAnnotation$Meas12","_chartAnnotation$Meas13","_chartAnnotation$Meas14","_chartAnnotation$Meas15","_chartAnnotation$Meas16","_chartAnnotation$Meas17","getLibraryResourceBundle","getText","getToolTip","renderLineChart","chartType","measureDimensionToolTip","escapeSingleQuotes","scaleUOMTooltip","_getUOM","UOMObjectPath","customData","aggregatablePropertyPath","UOMObject","$Path","_collectionObject$tar","_propertyAnnotations$","entityProperties","targetType","propertyAnnotations","find","_propertyAnnotations$2","_UOMObjectPath","_measure","_measure2","measure","_chartAnnotation$Dyna4","_chartAnnotation$Dyna5","_chartAnnotation$Dyna6","_chartAnnotation$Dyna7","_chartAnnotation$Dyna8","ISOCurrency","unit","Unit","_measure3","getScaleFactor","getUoMVisiblity","showError","getInParameterFiltersBinding","inParameters","parts","paths","inParameter","localDataProperty","getfilterCountBinding","_chartAnnotation$Dime6","_chartAnnotation$Dime7","getInteractiveChartProperties","visualFilter","interactiveChartProperties","_visualFilter$metaPat","_dimension$$target2","_dimension$$target2$a","_dimension$$target2$a2","_dataPointAnnotation","_visualFilter$metaPat2","_visualFilter$metaPat3","_dataPointAnnotation2","_visualFilter$metaPat4","id","showErrorExpression","errorMessageExpression","errorMessageTitleExpression","dataPointAnnotation","_chartAnnotation$Meas18","getParameters","getObject","dimensionText","Text","contextObjectPath","SortOrder","aggregationBinding","type","aggregateProperties","filterBarEntityType","scalefactor","uom","stringifyCustomData","inParameterFilters","stringifiedParameters","dimensionContext","fullyQualifiedName","dimensionObject","chartLabel","displayedValue","color"],"sources":["InteractiveChartHelper-dbg.js"],"mappings":"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","sourceRoot":"visualfilters"}},{"offset":{"line":35149,"column":0},"map":{"version":3,"names":["VisualFilterBlock","defineBuildingBlock","name","namespace","blockAttribute","type","required","expectedTypes","props","configuration","mSettings","groupId","path","metaPath","getPath","contextObjectPath","getInvolvedDataModelObjects","contextPath","converterContext","getConverterContext","undefined","aggregationHelper","AggregationHelper","getEntityType","customAggregates","getCustomAggregateDefinitions","pvAnnotation","targetObject","measure","visualizations","Visualizations","getChartAnnotation","aggregations","custAggMeasure","chartAnnotation","Measures","length","filter","custAgg","qualifier","value","getAggregatedProperties","DynamicMeasures","Log","warning","getConverterContextFor","getAbsoluteAnnotationPath","getDataModelObjectPath","Name","some","customAggregate","defaultSelectionVariant","getDefaultSelectionVariant","checkSelectionVariant","aggregation","getAggregateProperties","aggregateProperties","propertyAnnotations","$target","annotations","aggregatablePropertyAnnotations","AggregatableProperty","checkIfUOMHasCustomAggregate","propertyHidden","UI","Hidden","aggregatablePropertyHidden","hiddenMeasure","getHiddenMeasure","chartType","ChartType","showValueHelp","getShowValueHelp","draftSupported","ModelHelper","isDraftSupported","models","metaModel","errorMessage","getErrorMessage","chartMeasure","measureDimensionTitle","InteractiveChartHelper","getMeasureDimensionTitle","collection","toolTip","getToolTip","renderLineChart","UoMVisibility","getUoMVisiblity","showError","scaleUoMTitle","getScaleUoMTitle","filterCountBinding","getfilterCountBinding","measures","aggregatablePropertyMeasures","UOM","getUoM","UoMHasCustomAggregate","i","sAnnotationPath","getEntityTypeAnnotation","annotation","validChartType","errorMessageTitle","getTranslatedText","sDimensionType","Dimensions","isValueListWithFixedValues","selectionVariant","selectionVariantAnnotation","selectionVariantContext","getModel","createBindingContext","SelectOptions","multipleSelectionAllowed","selectOption","PropertyName","Ranges","error","matchedAggregate","aggregate","ISOCurrency","unit","Unit","valueOf","getRequired","xml","getUoMTitle","showErrorExpression","generate","id","getValueHelp","getInteractiveChartFragment","getInteractiveChartWithErrorTemplate","getInteractiveBarChartTemplate","getInteractiveLineChartTemplate","getTemplate","BuildingBlockBase"],"sourceRoot":"visualfilters","sources":["VisualFilter.block.ts"],"sourcesContent":["import { AnnotationPath, PathAnnotationExpression } from \"@sap-ux/vocabularies-types\";\nimport { CustomAggregate } from \"@sap-ux/vocabularies-types/vocabularies/Aggregation\";\nimport { AggregatedPropertyType } from \"@sap-ux/vocabularies-types/vocabularies/Analytics\";\nimport { PropertyAnnotations } from \"@sap-ux/vocabularies-types/vocabularies/Edm_Types\";\nimport { PropertyAnnotations_Measures } from \"@sap-ux/vocabularies-types/vocabularies/Measures_Edm\";\nimport { Chart, Hidden, SelectionVariant } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport BuildingBlockBase from \"sap/fe/core/buildingBlocks/BuildingBlockBase\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/BuildingBlockSupport\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { getDefaultSelectionVariant } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport { ParameterType } from \"sap/fe/core/converters/controls/ListReport/VisualFilters\";\nimport ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport { AggregationHelper } from \"sap/fe/core/converters/helpers/Aggregation\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { PropertiesOf } from \"sap/fe/core/helpers/ClassSupport\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport { getInteractiveBarChartTemplate } from \"./fragments/InteractiveBarChart\";\nimport { getInteractiveChartWithErrorTemplate } from \"./fragments/InteractiveChartWithError\";\nimport { getInteractiveLineChartTemplate } from \"./fragments/InteractiveLineChart\";\nimport InteractiveChartHelper from \"./InteractiveChartHelper\";\n\n/**\n * Building block for creating a VisualFilter based on the metadata provided by OData V4.\n * <br>\n * A Chart annotation is required to bring up an interactive chart\n *\n *\n * Usage example:\n * <pre>\n * &lt;macro:VisualFilter\n *   collection=\"{entitySet&gt;}\"\n *   chartAnnotation=\"{chartAnnotation&gt;}\"\n *   id=\"someID\"\n *   groupId=\"someGroupID\"\n *   title=\"some Title\"\n * /&gt;\n * </pre>\n *\n * @private\n * @experimental\n */\n@defineBuildingBlock({\n\tname: \"VisualFilter\",\n\tnamespace: \"sap.fe.macros\"\n})\nexport default class VisualFilterBlock extends BuildingBlockBase {\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tid!: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\ttitle: string = \"\";\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\"]\n\t})\n\tcontextPath!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true\n\t})\n\tmetaPath!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\toutParameter?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tvaluelistProperty?: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tselectionVariantAnnotation?: Context;\n\n\t@blockAttribute({\n\t\ttype: \"array\"\n\t})\n\tinParameters?: ParameterType[];\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tmultipleSelectionAllowed?: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\trequired?: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tshowOverlayInitially?: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\trenderLineChart?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\trequiredProperties?: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tfilterBarEntityType?: Context;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tshowError?: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tchartMeasure?: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tUoMHasCustomAggregate?: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tshowValueHelp?: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tcustomAggregate: boolean = false;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tgroupId: string = \"$auto.visualFilters\";\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\terrorMessageTitle?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\terrorMessage?: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tdraftSupported?: boolean;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tisValueListWithFixedValues: boolean | undefined;\n\n\t/******************************************************\n\t * Internal Properties\n\t * ***************************************************/\n\n\taggregateProperties: AggregatedPropertyType | undefined;\n\n\tchartType: string | undefined;\n\n\tpath: string | undefined;\n\n\tmeasureDimensionTitle: string | undefined;\n\n\ttoolTip: string | undefined;\n\n\tUoMVisibility: boolean | undefined;\n\n\tscaleUoMTitle: string | undefined;\n\n\tfilterCountBinding: string | undefined;\n\tchartAnnotation?: Chart;\n\n\tconstructor(props: PropertiesOf<VisualFilterBlock>, configuration: any, mSettings: any) {\n\t\tsuper(props, configuration, mSettings);\n\t\tthis.groupId = \"$auto.visualFilters\";\n\t\tthis.path = this.metaPath?.getPath();\n\t\tconst contextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\tconst converterContext = this.getConverterContext(contextObjectPath, undefined, mSettings);\n\t\tconst aggregationHelper = new AggregationHelper(converterContext.getEntityType(), converterContext);\n\t\tconst customAggregates = aggregationHelper.getCustomAggregateDefinitions();\n\t\tconst pvAnnotation = contextObjectPath.targetObject;\n\t\tlet measure: string | undefined;\n\t\tconst visualizations = pvAnnotation && pvAnnotation.Visualizations;\n\t\tthis.getChartAnnotation(visualizations, converterContext);\n\t\tlet aggregations,\n\t\t\tcustAggMeasure = [];\n\n\t\tif (this.chartAnnotation?.Measures?.length) {\n\t\t\tcustAggMeasure = customAggregates.filter((custAgg) => {\n\t\t\t\treturn custAgg.qualifier === this.chartAnnotation?.Measures[0].value;\n\t\t\t});\n\t\t\tmeasure = custAggMeasure.length > 0 ? custAggMeasure[0].qualifier : this.chartAnnotation.Measures[0].value;\n\t\t\taggregations = aggregationHelper.getAggregatedProperties(\"AggregatedProperties\")[0];\n\t\t}\n\t\t// if there are AggregatedProperty objects but no dynamic measures, rather there are transformation aggregates found in measures\n\t\tif (\n\t\t\taggregations &&\n\t\t\taggregations.length > 0 &&\n\t\t\t!this.chartAnnotation?.DynamicMeasures &&\n\t\t\tcustAggMeasure.length === 0 &&\n\t\t\tthis.chartAnnotation?.Measures &&\n\t\t\tthis.chartAnnotation?.Measures.length > 0\n\t\t) {\n\t\t\tLog.warning(\n\t\t\t\t\"The transformational aggregate measures are configured as Chart.Measures but should be configured as Chart.DynamicMeasures instead. Please check the SAP Help documentation and correct the configuration accordingly.\"\n\t\t\t);\n\t\t}\n\t\t//if the chart has dynamic measures, but with no other custom aggregate measures then consider the dynamic measures\n\t\tif (this.chartAnnotation?.DynamicMeasures) {\n\t\t\tif (custAggMeasure.length === 0) {\n\t\t\t\tmeasure = converterContext\n\t\t\t\t\t.getConverterContextFor(converterContext.getAbsoluteAnnotationPath(this.chartAnnotation.DynamicMeasures[0].value))\n\t\t\t\t\t.getDataModelObjectPath().targetObject.Name;\n\t\t\t\taggregations = aggregationHelper.getAggregatedProperties(\"AggregatedProperty\");\n\t\t\t} else {\n\t\t\t\tLog.warning(\n\t\t\t\t\t\"The dynamic measures have been ignored as visual filters can deal with only 1 measure and the first (custom aggregate) measure defined under Chart.Measures is considered.\"\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tif (\n\t\t\tcustomAggregates.some(function (custAgg) {\n\t\t\t\treturn custAgg.qualifier === measure;\n\t\t\t})\n\t\t) {\n\t\t\tthis.customAggregate = true;\n\t\t}\n\n\t\tconst defaultSelectionVariant = getDefaultSelectionVariant(converterContext.getEntityType());\n\t\tthis.checkSelectionVariant(defaultSelectionVariant);\n\t\tconst aggregation = this.getAggregateProperties(aggregations, measure);\n\t\tif (aggregation) {\n\t\t\tthis.aggregateProperties = aggregation;\n\t\t}\n\t\tconst propertyAnnotations =\n\t\t\tvisualizations && visualizations[0]?.$target?.Measures && visualizations[0]?.$target?.Measures[0]?.$target?.annotations;\n\t\tconst aggregatablePropertyAnnotations = aggregation?.AggregatableProperty?.$target?.annotations;\n\t\tthis.checkIfUOMHasCustomAggregate(customAggregates, propertyAnnotations, aggregatablePropertyAnnotations);\n\t\tconst propertyHidden = propertyAnnotations?.UI?.Hidden;\n\t\tconst aggregatablePropertyHidden = aggregatablePropertyAnnotations?.UI?.Hidden;\n\t\tconst hiddenMeasure = this.getHiddenMeasure(propertyHidden, aggregatablePropertyHidden, this.customAggregate);\n\t\tconst chartType = this.chartAnnotation?.ChartType;\n\t\tthis.chartType = chartType;\n\t\tthis.showValueHelp = this.getShowValueHelp(chartType, hiddenMeasure);\n\t\tthis.draftSupported = ModelHelper.isDraftSupported(mSettings.models.metaModel, this.contextPath?.getPath());\n\t\t/**\n\t\t * If the measure of the chart is marked as 'hidden', or if the chart type is invalid, or if the data type for the line chart is invalid,\n\t\t * the call is made to the InteractiveChartWithError fragment (using error-message related APIs, but avoiding batch calls)\n\t\t */\n\t\tthis.errorMessage = this.getErrorMessage(hiddenMeasure, measure);\n\t\tthis.chartMeasure = measure;\n\t\tthis.measureDimensionTitle = InteractiveChartHelper.getMeasureDimensionTitle(\n\t\t\tthis.chartAnnotation,\n\t\t\tthis.customAggregate,\n\t\t\tthis.aggregateProperties\n\t\t);\n\t\tconst collection = getInvolvedDataModelObjects(this.contextPath);\n\t\tthis.toolTip = InteractiveChartHelper.getToolTip(\n\t\t\tthis.chartAnnotation,\n\t\t\tcollection,\n\t\t\tthis.path,\n\t\t\tthis.customAggregate,\n\t\t\tthis.aggregateProperties,\n\t\t\tthis.renderLineChart\n\t\t);\n\t\tthis.UoMVisibility = InteractiveChartHelper.getUoMVisiblity(this.chartAnnotation, this.showError);\n\t\tthis.scaleUoMTitle = InteractiveChartHelper.getScaleUoMTitle(\n\t\t\tthis.chartAnnotation,\n\t\t\tcollection,\n\t\t\tthis.path,\n\t\t\tthis.customAggregate,\n\t\t\tthis.aggregateProperties\n\t\t);\n\t\tthis.filterCountBinding = InteractiveChartHelper.getfilterCountBinding(this.chartAnnotation);\n\t}\n\n\tcheckIfUOMHasCustomAggregate(\n\t\tcustomAggregates: Array<CustomAggregate>,\n\t\tpropertyAnnotations: PropertyAnnotations,\n\t\taggregatablePropertyAnnotations?: PropertyAnnotations\n\t) {\n\t\tconst measures = propertyAnnotations?.Measures;\n\t\tconst aggregatablePropertyMeasures = aggregatablePropertyAnnotations?.Measures;\n\t\tconst UOM = this.getUoM(measures, aggregatablePropertyMeasures);\n\t\tif (\n\t\t\tUOM &&\n\t\t\tcustomAggregates.some(function (custAgg: CustomAggregate) {\n\t\t\t\treturn custAgg.qualifier === UOM;\n\t\t\t})\n\t\t) {\n\t\t\tthis.UoMHasCustomAggregate = true;\n\t\t} else {\n\t\t\tthis.UoMHasCustomAggregate = false;\n\t\t}\n\t}\n\n\tgetChartAnnotation(visualizations: Array<AnnotationPath<Chart>>, converterContext: ConverterContext) {\n\t\tif (visualizations) {\n\t\t\tfor (let i = 0; i < visualizations.length; i++) {\n\t\t\t\tconst sAnnotationPath = visualizations[i] && visualizations[i].value;\n\t\t\t\tthis.chartAnnotation =\n\t\t\t\t\tconverterContext.getEntityTypeAnnotation(sAnnotationPath) &&\n\t\t\t\t\tconverterContext.getEntityTypeAnnotation(sAnnotationPath).annotation;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetErrorMessage(hiddenMeasure: Object, measure?: string) {\n\t\tlet validChartType;\n\t\tif (this.chartAnnotation) {\n\t\t\tif (this.chartAnnotation.ChartType === \"UI.ChartType/Line\" || this.chartAnnotation.ChartType === \"UI.ChartType/Bar\") {\n\t\t\t\tvalidChartType = true;\n\t\t\t} else {\n\t\t\t\tvalidChartType = false;\n\t\t\t}\n\t\t}\n\t\tif ((typeof hiddenMeasure === \"boolean\" && hiddenMeasure) || !validChartType || this.renderLineChart === \"false\") {\n\t\t\tthis.showError = true;\n\t\t\tthis.errorMessageTitle =\n\t\t\t\thiddenMeasure || !validChartType\n\t\t\t\t\t? this.getTranslatedText(\"M_VISUAL_FILTERS_ERROR_MESSAGE_TITLE\")\n\t\t\t\t\t: this.getTranslatedText(\"M_VISUAL_FILTER_LINE_CHART_INVALID_DATATYPE\");\n\t\t\tif (hiddenMeasure) {\n\t\t\t\treturn this.getTranslatedText(\"M_VISUAL_FILTER_HIDDEN_MEASURE\", [measure]);\n\t\t\t} else if (!validChartType) {\n\t\t\t\treturn this.getTranslatedText(\"M_VISUAL_FILTER_UNSUPPORTED_CHART_TYPE\");\n\t\t\t} else {\n\t\t\t\treturn this.getTranslatedText(\"M_VISUAL_FILTER_LINE_CHART_UNSUPPORTED_DIMENSION\");\n\t\t\t}\n\t\t}\n\t}\n\n\tgetShowValueHelp(chartType?: string, hiddenMeasure?: Object) {\n\t\tconst sDimensionType =\n\t\t\tthis.chartAnnotation?.Dimensions[0] &&\n\t\t\tthis.chartAnnotation?.Dimensions[0].$target &&\n\t\t\tthis.chartAnnotation.Dimensions[0].$target.type;\n\t\tif (sDimensionType === \"Edm.Date\" || sDimensionType === \"Edm.Time\" || sDimensionType === \"Edm.DateTimeOffset\") {\n\t\t\treturn false;\n\t\t} else if (typeof hiddenMeasure === \"boolean\" && hiddenMeasure) {\n\t\t\treturn false;\n\t\t} else if (!(chartType === \"UI.ChartType/Bar\" || chartType === \"UI.ChartType/Line\")) {\n\t\t\treturn false;\n\t\t} else if (this.renderLineChart === \"false\" && chartType === \"UI.ChartType/Line\") {\n\t\t\treturn false;\n\t\t} else if (this.isValueListWithFixedValues === true) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tcheckSelectionVariant(defaultSelectionVariant?: SelectionVariant) {\n\t\tlet selectionVariant;\n\t\tif (this.selectionVariantAnnotation) {\n\t\t\tconst selectionVariantContext = this.metaPath?.getModel().createBindingContext(this.selectionVariantAnnotation.getPath());\n\t\t\tselectionVariant =\n\t\t\t\tselectionVariantContext && getInvolvedDataModelObjects(selectionVariantContext, this.contextPath).targetObject;\n\t\t}\n\t\tif (!selectionVariant && defaultSelectionVariant) {\n\t\t\tselectionVariant = defaultSelectionVariant;\n\t\t}\n\t\tif (selectionVariant && selectionVariant.SelectOptions && !this.multipleSelectionAllowed) {\n\t\t\tfor (const selectOption of selectionVariant.SelectOptions) {\n\t\t\t\tif (selectOption.PropertyName.value === this.chartAnnotation?.Dimensions[0].value) {\n\t\t\t\t\tif (selectOption.Ranges.length > 1) {\n\t\t\t\t\t\tLog.error(\"Multiple SelectOptions for FilterField having SingleValue Allowed Expression\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tgetAggregateProperties(aggregations: AggregatedPropertyType[], measure?: string) {\n\t\tlet matchedAggregate: AggregatedPropertyType | undefined;\n\t\tif (!aggregations) {\n\t\t\treturn;\n\t\t}\n\t\taggregations.some(function (aggregate) {\n\t\t\tif (aggregate.Name === measure) {\n\t\t\t\tmatchedAggregate = aggregate;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\treturn matchedAggregate;\n\t}\n\n\tgetUoM(measures?: PropertyAnnotations_Measures, aggregatablePropertyMeasures?: PropertyAnnotations_Measures) {\n\t\tlet ISOCurrency = measures?.ISOCurrency;\n\t\tlet unit = measures?.Unit;\n\t\tif (!ISOCurrency && !unit && aggregatablePropertyMeasures) {\n\t\t\tISOCurrency = aggregatablePropertyMeasures.ISOCurrency;\n\t\t\tunit = aggregatablePropertyMeasures.Unit;\n\t\t}\n\t\treturn (ISOCurrency as PathAnnotationExpression<String>)?.path || (unit as PathAnnotationExpression<String>)?.path;\n\t}\n\n\tgetHiddenMeasure(propertyHidden: Hidden, aggregatablePropertyHidden?: Hidden, customAggregate?: boolean) {\n\t\tif (!customAggregate && aggregatablePropertyHidden) {\n\t\t\treturn aggregatablePropertyHidden.valueOf();\n\t\t} else {\n\t\t\treturn propertyHidden?.valueOf();\n\t\t}\n\t}\n\n\tgetRequired() {\n\t\tif (this.required) {\n\t\t\treturn xml`<Label text=\"\" width=\"0.5rem\" required=\"true\">\n\t\t\t\t\t\t\t<layoutData>\n\t\t\t\t\t\t\t\t<OverflowToolbarLayoutData priority=\"Never\" />\n\t\t\t\t\t\t\t</layoutData>\n\t\t\t\t\t\t</Label>`;\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tgetUoMTitle(showErrorExpression: string) {\n\t\tif (this.UoMVisibility) {\n\t\t\treturn xml`<Title\n\t\t\t\t\t\t\tid=\"${generate([this.id, \"ScaleUoMTitle\"])}\"\n\t\t\t\t\t\t\tvisible=\"{= !${showErrorExpression}}\"\n\t\t\t\t\t\t\ttext=\"${this.scaleUoMTitle}\"\n\t\t\t\t\t\t\ttitleStyle=\"H6\"\n\t\t\t\t\t\t\tlevel=\"H3\"\n\t\t\t\t\t\t\twidth=\"4.15rem\"\n\t\t\t\t\t\t/>`;\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tgetValueHelp(showErrorExpression: string) {\n\t\tif (this.showValueHelp) {\n\t\t\treturn xml`<ToolbarSpacer />\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid=\"${generate([this.id, \"VisualFilterValueHelpButton\"])}\"\n\t\t\t\t\t\t\ttype=\"Transparent\"\n\t\t\t\t\t\t\tariaHasPopup=\"Dialog\"\n\t\t\t\t\t\t\ttext=\"${this.filterCountBinding}\"\n\t\t\t\t\t\t\tpress=\"VisualFilterRuntime.fireValueHelp\"\n\t\t\t\t\t\t\tenabled=\"{= !${showErrorExpression}}\"\n\t\t\t\t\t\t\tcustomData:multipleSelectionAllowed=\"${this.multipleSelectionAllowed}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<layoutData>\n\t\t\t\t\t\t\t\t<OverflowToolbarLayoutData priority=\"Never\" />\n\t\t\t\t\t\t\t</layoutData>\n\t\t\t\t\t\t</Button>`;\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tgetInteractiveChartFragment() {\n\t\tif (this.showError) {\n\t\t\treturn getInteractiveChartWithErrorTemplate(this);\n\t\t} else if (this.chartType === \"UI.ChartType/Bar\") {\n\t\t\treturn getInteractiveBarChartTemplate(this);\n\t\t} else if (this.chartType === \"UI.ChartType/Line\") {\n\t\t\treturn getInteractiveLineChartTemplate(this);\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tgetTemplate(): string {\n\t\tconst id = generate([this.path]);\n\t\tconst showErrorExpression = \"${internal>\" + id + \"/showError}\";\n\t\treturn xml`\n\t\t<control:VisualFilter\n\t\tcore:require=\"{VisualFilterRuntime: 'sap/fe/macros/visualfilters/VisualFilterRuntime'}\"\n\t\txmlns=\"sap.m\"\n\t\txmlns:control=\"sap.fe.core.controls.filterbar\"\n\t\txmlns:customData=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\txmlns:core=\"sap.ui.core\"\n\t\tid=\"${this.id}\"\n\t\theight=\"13rem\"\n\t\twidth=\"20.5rem\"\n\t\tclass=\"sapUiSmallMarginBeginEnd\"\n\t\tcustomData:infoPath=\"${generate([this.path])}\"\n\t>\n\t\t<VBox height=\"2rem\" class=\"sapUiSmallMarginBottom\">\n\t\t\t<OverflowToolbar style=\"Clear\">\n\t\t\t\t${this.getRequired()}\n\t\t\t\t<Title\n\t\t\t\t\tid=\"${generate([this.id, \"MeasureDimensionTitle\"])}\"\n\t\t\t\t\ttext=\"${this.measureDimensionTitle}\"\n\t\t\t\t\ttooltip=\"${this.toolTip}\"\n\t\t\t\t\ttitleStyle=\"H6\"\n\t\t\t\t\tlevel=\"H3\"\n\t\t\t\t\tclass=\"sapUiTinyMarginEnd sapUiNoMarginBegin\"\n\t\t\t\t/>\n\t\t\t\t${this.getUoMTitle(showErrorExpression)}\n\t\t\t\t${this.getValueHelp(showErrorExpression)}\n\t\t\t</OverflowToolbar>\n\t\t</VBox>\n\t\t<VBox height=\"100%\" width=\"100%\">\n\t\t\t${this.getInteractiveChartFragment()}\n\t\t</VBox>\n\t</control:VisualFilter>`;\n\t}\n}\n"],"mappings":"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"}},{"offset":{"line":35681,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BuildingBlockBase","BuildingBlockSupport","BuildingBlockTemplateProcessor","DataVisualization","Aggregation","MetaModelConverter","ModelHelper","StableIdHelper","InteractiveBarChart","InteractiveChartWithError","InteractiveLineChart","InteractiveChartHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_exports","getInteractiveLineChartTemplate","getInteractiveChartWithErrorTemplate","getInteractiveBarChartTemplate","generate","getInvolvedDataModelObjects","AggregationHelper","getDefaultSelectionVariant","xml","defineBuildingBlock","blockAttribute","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","VisualFilterBlock","name","namespace","type","required","expectedTypes","_BuildingBlockBase","props","configuration","mSettings","_this$metaPath","_this$chartAnnotation","_this$chartAnnotation2","_this$chartAnnotation4","_this$chartAnnotation5","_this$chartAnnotation6","_this$chartAnnotation7","_visualizations$","_visualizations$$$tar","_visualizations$2","_visualizations$2$$ta","_visualizations$2$$ta2","_visualizations$2$$ta3","_aggregation$Aggregat","_aggregation$Aggregat2","_propertyAnnotations$","_aggregatableProperty","_this$chartAnnotation8","_this$contextPath","_this","this","groupId","path","metaPath","getPath","contextObjectPath","contextPath","converterContext","getConverterContext","aggregationHelper","getEntityType","customAggregates","getCustomAggregateDefinitions","pvAnnotation","targetObject","measure","visualizations","Visualizations","getChartAnnotation","aggregations","custAggMeasure","chartAnnotation","Measures","length","filter","custAgg","_this$chartAnnotation3","qualifier","getAggregatedProperties","DynamicMeasures","warning","getConverterContextFor","getAbsoluteAnnotationPath","getDataModelObjectPath","Name","some","customAggregate","defaultSelectionVariant","checkSelectionVariant","aggregation","getAggregateProperties","aggregateProperties","propertyAnnotations","$target","annotations","aggregatablePropertyAnnotations","AggregatableProperty","checkIfUOMHasCustomAggregate","propertyHidden","UI","Hidden","aggregatablePropertyHidden","hiddenMeasure","getHiddenMeasure","chartType","ChartType","showValueHelp","getShowValueHelp","draftSupported","isDraftSupported","models","metaModel","errorMessage","getErrorMessage","chartMeasure","measureDimensionTitle","getMeasureDimensionTitle","collection","toolTip","getToolTip","renderLineChart","UoMVisibility","getUoMVisiblity","showError","scaleUoMTitle","getScaleUoMTitle","filterCountBinding","getfilterCountBinding","_proto","measures","aggregatablePropertyMeasures","UOM","getUoM","UoMHasCustomAggregate","i","sAnnotationPath","getEntityTypeAnnotation","annotation","validChartType","errorMessageTitle","getTranslatedText","_this$chartAnnotation9","_this$chartAnnotation10","sDimensionType","Dimensions","isValueListWithFixedValues","selectionVariant","selectionVariantAnnotation","_this$metaPath2","selectionVariantContext","getModel","createBindingContext","SelectOptions","multipleSelectionAllowed","selectOption","_this$chartAnnotation11","PropertyName","Ranges","error","matchedAggregate","aggregate","_ISOCurrency","_unit","ISOCurrency","unit","Unit","valueOf","getRequired","getUoMTitle","showErrorExpression","id","getValueHelp","getInteractiveChartFragment","getTemplate"],"sources":["VisualFilter.block-dbg.js"],"mappings":"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","sourceRoot":"visualfilters"}},{"offset":{"line":35741,"column":0},"map":{"version":3,"names":["VisualFilterRuntime","selectionChanged","oEvent","oInteractiveChart","getSource","sOutParameter","data","sValueListProperty","sDimension","sDimensionText","bMultipleSelectionAllowed","sDimensionType","oSelectedAggregation","getParameter","bIsAggregationSelected","oConditionModel","getModel","aConditions","getProperty","Log","error","sSelectionChangedValue","getBindingContext","getObject","sSelectionChangedValueText","String","undefined","VisualFilterUtils","_parseDateTime","oCondition","Condition","createItemCondition","push","filter","operator","Date","parse","values","setProperty","getAggregationSelected","aSelectableValues","i","length","getParent","sDimensionValue","indexOf","getFiltersFromConditions","aArguments","oFilterBar","aInParameters","customData","bIsDraftSupported","aPropertyInfoSet","getPropertyInfo","mConditions","aValueListPropertyInfoSet","oFilters","aFilters","aParameters","oSelectionVariantAnnotation","CommonHelper","parseCustomData","oInteractiveChartListBinding","getBinding","sPath","getPath","oMetaModel","getMetaModel","sEntitySetPath","filterConditions","getFiltersConditionsFromSelectionVariant","getCustomConditions","bind","typeConfig","TypeUtil","getTypeConfig","dataType","oSelectionVariantConditions","convertFilterCondions","Object","keys","forEach","sKey","inParameterForKey","find","inParameter","valueListProperty","localDataProperty","propertyInfoSet","name","baseType","condition","_formatDateTime","oInParameter","index","oInternalModelContext","sInfoPath","bEnableBinding","oResourceBundle","Core","getLibraryResourceBundle","aRequiredProperties","aNotMatchedConditions","requiredPropertyPath","errorMessageTitle","errorMessage","showError","getText","sLabel","sFilterEntityName","split","sChartEntityName","sBindingPath","FilterUtils","getBindingPathForParameters","parameter","key","slice","MdcFilterUtil","getFilterInfo","filters","Filter","FilterOperator","EQ","isSuspended","resume","getFilterCounts","oConditions","scaleVisualFilterValue","oValue","scaleFactor","numberOfFractionalDigits","currency","oRawValue","getFormattedNumber","fireValueHelp","fireValueHelpRequest"],"sourceRoot":"visualfilters","sources":["VisualFilterRuntime.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport VisualFilterUtils from \"sap/fe/core/controls/filterbar/utils/VisualFilterUtils\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport { getFiltersConditionsFromSelectionVariant } from \"sap/fe/core/templating/FilterHelper\";\nimport TypeUtil from \"sap/fe/core/type/TypeUtil\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport Core from \"sap/ui/core/Core\";\nimport Condition from \"sap/ui/mdc/condition/Condition\";\nimport MdcFilterUtil from \"sap/ui/mdc/util/FilterUtil\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\n/**\n * Static class used by Visual Filter during runtime\n *\n * @private\n * @experimental This module is only for internal/experimental use!\n */\nconst VisualFilterRuntime = {\n\tselectionChanged(oEvent: any) {\n\t\tconst oInteractiveChart = oEvent.getSource();\n\t\tconst sOutParameter = oInteractiveChart.data(\"outParameter\");\n\t\tconst sValueListProperty = oInteractiveChart.data(\"valuelistProperty\");\n\t\tconst sDimension = oInteractiveChart.data(\"dimension\");\n\t\tconst sDimensionText = oInteractiveChart.data(\"dimensionText\");\n\t\tconst bMultipleSelectionAllowed = oInteractiveChart.data(\"multipleSelectionAllowed\");\n\t\tconst sDimensionType = oInteractiveChart.data(\"dimensionType\");\n\t\tconst oSelectedAggregation = oEvent.getParameter(\"bar\") || oEvent.getParameter(\"point\") || oEvent.getParameter(\"segment\");\n\t\tconst bIsAggregationSelected = oEvent.getParameter(\"selected\");\n\t\tconst oConditionModel = oInteractiveChart.getModel(\"$field\");\n\t\tlet aConditions = oConditionModel.getProperty(\"/conditions\");\n\n\t\tif (!sOutParameter || sValueListProperty !== sDimension) {\n\t\t\tLog.error(\"VisualFilter: Cannot sync values with regular filter as out parameter is not configured properly!\");\n\t\t} else {\n\t\t\tlet sSelectionChangedValue = oSelectedAggregation.getBindingContext().getObject(sValueListProperty);\n\t\t\tif (sSelectionChangedValue) {\n\t\t\t\tlet sSelectionChangedValueText = oSelectedAggregation.getBindingContext().getObject(sDimensionText);\n\t\t\t\tif (typeof sSelectionChangedValueText !== \"string\" && !(sSelectionChangedValueText instanceof String)) {\n\t\t\t\t\tsSelectionChangedValueText = undefined;\n\t\t\t\t}\n\t\t\t\t// if selection has been done on the aggregation then add to conditions\n\t\t\t\tif (bIsAggregationSelected) {\n\t\t\t\t\tif (bMultipleSelectionAllowed === \"false\") {\n\t\t\t\t\t\taConditions = [];\n\t\t\t\t\t}\n\t\t\t\t\tif (sDimensionType === \"Edm.DateTimeOffset\") {\n\t\t\t\t\t\tsSelectionChangedValue = VisualFilterUtils._parseDateTime(sSelectionChangedValue);\n\t\t\t\t\t}\n\t\t\t\t\tconst oCondition = Condition.createItemCondition(\n\t\t\t\t\t\tsSelectionChangedValue,\n\t\t\t\t\t\tsSelectionChangedValueText || undefined,\n\t\t\t\t\t\t{},\n\t\t\t\t\t\t{}\n\t\t\t\t\t);\n\t\t\t\t\taConditions.push(oCondition);\n\t\t\t\t} else {\n\t\t\t\t\t// because selection was removed on the aggregation hence remove this from conditions\n\t\t\t\t\taConditions = aConditions.filter(function (oCondition: any) {\n\t\t\t\t\t\tif (sDimensionType === \"Edm.DateTimeOffset\") {\n\t\t\t\t\t\t\treturn oCondition.operator !== \"EQ\" || Date.parse(oCondition.values[0]) !== Date.parse(sSelectionChangedValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn oCondition.operator !== \"EQ\" || oCondition.values[0] !== sSelectionChangedValue;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\toConditionModel.setProperty(\"/conditions\", aConditions);\n\t\t\t} else {\n\t\t\t\tLog.error(\"VisualFilter: No vaue found for the outParameter\");\n\t\t\t}\n\t\t}\n\t},\n\t// THIS IS A FORMATTER\n\tgetAggregationSelected(this: ManagedObject, aConditions: any) {\n\t\tlet aSelectableValues = [];\n\t\tif (!this.getBindingContext()) {\n\t\t\treturn;\n\t\t}\n\t\tfor (let i = 0; i <= aConditions.length - 1; i++) {\n\t\t\tconst oCondition = aConditions[i];\n\t\t\t// 1. get conditions with EQ operator (since visual filter can only deal with EQ operators) and get their values\n\t\t\tif (oCondition.operator === \"EQ\") {\n\t\t\t\taSelectableValues.push(oCondition.values[0]);\n\t\t\t}\n\t\t}\n\n\t\t// access the interactive chart from the control.\n\t\tconst oInteractiveChart = this.getParent() as Control;\n\t\tconst sDimension = oInteractiveChart.data(\"dimension\");\n\t\tconst sDimensionType = oInteractiveChart.data(\"dimensionType\");\n\t\tlet sDimensionValue = this.getBindingContext()?.getObject(sDimension);\n\t\tif (sDimensionType === \"Edm.DateTimeOffset\") {\n\t\t\tsDimensionValue = VisualFilterUtils._parseDateTime(sDimensionValue) as any;\n\t\t}\n\t\tif (oInteractiveChart.data(\"multipleSelectionAllowed\") === \"false\" && aSelectableValues.length > 1) {\n\t\t\taSelectableValues = [aSelectableValues[0]];\n\t\t}\n\t\treturn aSelectableValues.indexOf(sDimensionValue) > -1;\n\t},\n\t// THIS IS A FORMATTER\n\tgetFiltersFromConditions(this: ManagedObject, ...aArguments: any[]) {\n\t\tconst oInteractiveChart = this.getParent() as Control;\n\t\tconst oFilterBar = oInteractiveChart.getParent()?.getParent()?.getParent()?.getParent() as any;\n\t\tconst aInParameters = oInteractiveChart.data(\"inParameters\").customData;\n\t\tconst bIsDraftSupported = oInteractiveChart.data(\"draftSupported\") === \"true\";\n\t\tconst aPropertyInfoSet = oFilterBar.getPropertyInfo();\n\t\tconst mConditions: any = {};\n\t\tconst aValueListPropertyInfoSet: any[] = [];\n\t\tlet oFilters;\n\t\tlet aFilters = [];\n\t\tconst aParameters = oInteractiveChart.data(\"parameters\").customData;\n\t\tconst oSelectionVariantAnnotation = CommonHelper.parseCustomData(oInteractiveChart.data(\"selectionVariantAnnotation\"));\n\t\tconst oInteractiveChartListBinding = (oInteractiveChart.getBinding(\"bars\") ||\n\t\t\toInteractiveChart.getBinding(\"points\") ||\n\t\t\toInteractiveChart.getBinding(\"segments\")) as any;\n\t\tconst sPath = oInteractiveChartListBinding.getPath();\n\t\tconst oMetaModel = (oInteractiveChart.getModel() as ODataModel).getMetaModel();\n\t\tconst sEntitySetPath = oInteractiveChartListBinding.getPath();\n\t\tconst filterConditions = getFiltersConditionsFromSelectionVariant(\n\t\t\tsEntitySetPath,\n\t\t\toMetaModel,\n\t\t\toSelectionVariantAnnotation,\n\t\t\tVisualFilterUtils.getCustomConditions.bind(VisualFilterUtils)\n\t\t);\n\t\tfor (const i in aPropertyInfoSet) {\n\t\t\taPropertyInfoSet[i].typeConfig = TypeUtil.getTypeConfig(aPropertyInfoSet[i].dataType, {}, {});\n\t\t}\n\t\tconst oSelectionVariantConditions = VisualFilterUtils.convertFilterCondions(filterConditions);\n\t\t// aInParameters and the bindings to in parameters are in the same order so we can rely on it to create our conditions\n\t\tObject.keys(oSelectionVariantConditions).forEach(function (sKey: string) {\n\t\t\tmConditions[sKey] = oSelectionVariantConditions[sKey];\n\t\t\t//fetch localDataProperty if selection variant key is based on vaue list property\n\t\t\tconst inParameterForKey = aInParameters.find(function (inParameter: any) {\n\t\t\t\treturn inParameter.valueListProperty === sKey;\n\t\t\t});\n\t\t\tconst localDataProperty = inParameterForKey ? inParameterForKey.localDataProperty : sKey;\n\t\t\tif (!aParameters || (aParameters && aParameters.indexOf(sKey) === -1)) {\n\t\t\t\tfor (const i in aPropertyInfoSet) {\n\t\t\t\t\tconst propertyInfoSet = aPropertyInfoSet[i];\n\t\t\t\t\tif (localDataProperty === propertyInfoSet.name) {\n\t\t\t\t\t\tif (propertyInfoSet.typeConfig.baseType === \"DateTime\") {\n\t\t\t\t\t\t\tif (mConditions[sKey]) {\n\t\t\t\t\t\t\t\tmConditions[sKey].forEach(function (condition: any) {\n\t\t\t\t\t\t\t\t\tcondition.values[0] = VisualFilterUtils._formatDateTime(condition.values[0]);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\taValueListPropertyInfoSet.push({\n\t\t\t\t\t\t\tname: sKey,\n\t\t\t\t\t\t\ttypeConfig: propertyInfoSet.typeConfig\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\taInParameters.forEach(function (oInParameter: any, index: any) {\n\t\t\tif (aArguments[index].length > 0) {\n\t\t\t\t// store conditions with value list property since we are filtering on the value list collection path\n\t\t\t\tmConditions[oInParameter.valueListProperty] = aArguments[index];\n\t\t\t\tif (!aParameters || (aParameters && aParameters.indexOf(oInParameter.valueListProperty) === -1)) {\n\t\t\t\t\t// aPropertyInfoSet is list of properties from the filter bar but we need to create conditions for the value list\n\t\t\t\t\t// which could have a different collectionPath.\n\t\t\t\t\t// Only typeConfig from aPropertyInfoSet is required for getting the converted filters from conditions\n\t\t\t\t\t// so we update aPropertyInfoSet to have the valueListProperties only\n\t\t\t\t\t// This way conditions will be converted to sap.ui.model.Filter for the value list\n\t\t\t\t\t// This works because for in parameter mapping the property from the main entity type should be of the same type as the value list entity type\n\t\t\t\t\t// TODO: Follow up with MDC to check if they can provide a clean api to convert conditions into filters\n\t\t\t\t\tfor (const i in aPropertyInfoSet) {\n\t\t\t\t\t\t// store conditions with value list property since we are filtering on the value list collection path\n\t\t\t\t\t\tconst propertyInfoSet = aPropertyInfoSet[i];\n\t\t\t\t\t\tif (propertyInfoSet.name === oInParameter.localDataProperty) {\n\t\t\t\t\t\t\tif (propertyInfoSet.typeConfig.baseType === \"DateTime\") {\n\t\t\t\t\t\t\t\tif (mConditions[oInParameter.valueListProperty]) {\n\t\t\t\t\t\t\t\t\tmConditions[oInParameter.valueListProperty].forEach(function (condition: any) {\n\t\t\t\t\t\t\t\t\t\tcondition.values[0] = VisualFilterUtils._formatDateTime(condition.values[0]);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taValueListPropertyInfoSet.push({\n\t\t\t\t\t\t\t\tname: oInParameter.valueListProperty,\n\t\t\t\t\t\t\t\ttypeConfig: propertyInfoSet.typeConfig\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst oInternalModelContext = oInteractiveChart.getBindingContext(\"internal\") as InternalModelContext;\n\t\tconst sInfoPath = oInteractiveChart.data(\"infoPath\");\n\t\tlet bEnableBinding;\n\t\tconst oResourceBundle = Core.getLibraryResourceBundle(\"sap.fe.macros\");\n\t\tconst aRequiredProperties = CommonHelper.parseCustomData(oInteractiveChart.data(\"requiredProperties\"));\n\t\tif (aRequiredProperties.length) {\n\t\t\tconst aConditions = Object.keys(mConditions) || [];\n\t\t\tconst aNotMatchedConditions: any[] = [];\n\t\t\taRequiredProperties.forEach(function (requiredPropertyPath: any) {\n\t\t\t\tif (aConditions.indexOf(requiredPropertyPath) === -1) {\n\t\t\t\t\taNotMatchedConditions.push(requiredPropertyPath);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!aNotMatchedConditions.length) {\n\t\t\t\tbEnableBinding = oInternalModelContext.getProperty(`${sInfoPath}/showError`);\n\t\t\t\toInternalModelContext.setProperty(sInfoPath, {\n\t\t\t\t\terrorMessageTitle: \"\",\n\t\t\t\t\terrorMessage: \"\",\n\t\t\t\t\tshowError: false\n\t\t\t\t});\n\t\t\t} else if (aNotMatchedConditions.length > 1) {\n\t\t\t\toInternalModelContext.setProperty(sInfoPath, {\n\t\t\t\t\terrorMessageTitle: oResourceBundle.getText(\"M_VISUAL_FILTERS_ERROR_MESSAGE_TITLE\"),\n\t\t\t\t\terrorMessage: oResourceBundle.getText(\"M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_MULTIPLEVF\"),\n\t\t\t\t\tshowError: true\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tconst sLabel =\n\t\t\t\t\toMetaModel.getObject(`${sEntitySetPath}/${aNotMatchedConditions[0]}@com.sap.vocabularies.Common.v1.Label`) ||\n\t\t\t\t\taNotMatchedConditions[0];\n\t\t\t\toInternalModelContext.setProperty(sInfoPath, {\n\t\t\t\t\terrorMessageTitle: oResourceBundle.getText(\"M_VISUAL_FILTERS_ERROR_MESSAGE_TITLE\"),\n\t\t\t\t\terrorMessage: oResourceBundle.getText(\"M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_SINGLEVF\", sLabel),\n\t\t\t\t\tshowError: true\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tbEnableBinding = oInternalModelContext.getProperty(`${sInfoPath}/showError`);\n\t\t\toInternalModelContext.setProperty(sInfoPath, { errorMessageTitle: \"\", errorMessage: \"\", showError: false });\n\t\t}\n\n\t\tconst sFilterEntityName = oFilterBar.data(\"entityType\").split(\"/\")[1];\n\t\tconst sChartEntityName = sPath.split(\"/\")[1].split(\"(\")[0];\n\t\tif (aParameters && aParameters.length && sFilterEntityName === sChartEntityName) {\n\t\t\tconst sBindingPath = bEnableBinding\n\t\t\t\t? FilterUtils.getBindingPathForParameters(oFilterBar, mConditions, aPropertyInfoSet, aParameters)\n\t\t\t\t: undefined;\n\n\t\t\tif (sBindingPath) {\n\t\t\t\toInteractiveChartListBinding.sPath = sBindingPath;\n\t\t\t}\n\t\t}\n\n\t\tif (aParameters && aParameters.length) {\n\t\t\t//Remove parameters from mConditions since it should not be a part of $filter\n\t\t\taParameters.forEach(function (parameter: any) {\n\t\t\t\tif (mConditions[parameter]) {\n\t\t\t\t\tdelete mConditions[parameter];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t//Only keep the actual value of filters and remove type informations\n\t\tObject.keys(mConditions).forEach(function (key: string) {\n\t\t\tmConditions[key].forEach(function (condition: any) {\n\t\t\t\tif (condition.values.length > 1) {\n\t\t\t\t\tcondition.values = condition.values.slice(0, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t// On InitialLoad when initiallayout is visual, aPropertyInfoSet is always empty and we cannot get filters from MDCFilterUtil.\n\t\t// Also when SVQualifier is there then we should not change the listbinding filters to empty as we are not getting filters from MDCFilterUtil but\n\t\t// instead we need to not call listbinding.filter and use the template time binding itself.\n\t\tif (Object.keys(mConditions).length > 0 && aValueListPropertyInfoSet.length) {\n\t\t\toFilters = (MdcFilterUtil.getFilterInfo(oFilterBar, mConditions, aValueListPropertyInfoSet, []) as any).filters;\n\t\t\tif (oFilters) {\n\t\t\t\tif (!oFilters.aFilters) {\n\t\t\t\t\taFilters.push(oFilters);\n\t\t\t\t} else if (oFilters.aFilters) {\n\t\t\t\t\taFilters = oFilters.aFilters;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (bIsDraftSupported) {\n\t\t\taFilters.push(new Filter(\"IsActiveEntity\", FilterOperator.EQ, true));\n\t\t}\n\t\tif (aFilters && aFilters.length > 0) {\n\t\t\toInteractiveChartListBinding.filter(aFilters);\n\t\t} else if (!Object.keys(mConditions).length) {\n\t\t\toInteractiveChartListBinding.filter();\n\t\t}\n\t\t// update the interactive chart binding\n\t\tif (bEnableBinding && oInteractiveChartListBinding.isSuspended()) {\n\t\t\toInteractiveChartListBinding.resume();\n\t\t}\n\t\treturn aFilters;\n\t},\n\tgetFilterCounts(this: Control, oConditions: any) {\n\t\tif (this.data(\"multipleSelectionAllowed\") === \"false\" && oConditions.length > 0) {\n\t\t\treturn `(1)`;\n\t\t}\n\t\tif (oConditions.length > 0) {\n\t\t\treturn `(${oConditions.length})`;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\tscaleVisualFilterValue(oValue: any, scaleFactor: any, numberOfFractionalDigits: any, currency: any, oRawValue: any) {\n\t\t// ScaleFactor if defined is priority for formatting\n\t\tif (scaleFactor) {\n\t\t\treturn VisualFilterUtils.getFormattedNumber(oRawValue, scaleFactor, numberOfFractionalDigits);\n\t\t\t// If Scale Factor is not defined, use currency formatting\n\t\t} else if (currency) {\n\t\t\treturn VisualFilterUtils.getFormattedNumber(oRawValue, undefined, undefined, currency);\n\t\t\t// No ScaleFactor and no Currency, use numberOfFractionalDigits defined in DataPoint\n\t\t} else if (numberOfFractionalDigits > 0) {\n\t\t\t// Number of fractional digits shall not exceed 2, unless required by currency\n\t\t\tnumberOfFractionalDigits = numberOfFractionalDigits > 2 ? 2 : numberOfFractionalDigits;\n\t\t\treturn VisualFilterUtils.getFormattedNumber(oRawValue, undefined, numberOfFractionalDigits);\n\t\t} else {\n\t\t\treturn oValue;\n\t\t}\n\t},\n\tfireValueHelp(oEvent: any) {\n\t\toEvent.getSource().getParent().getParent().getParent().fireValueHelpRequest();\n\t}\n};\n\n/**\n * @global\n */\nexport default VisualFilterRuntime;\n"],"mappings":"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"}},{"offset":{"line":36047,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","VisualFilterUtils","FilterHelper","TypeUtil","CommonHelper","FilterUtils","Core","Condition","MdcFilterUtil","Filter","FilterOperator","getFiltersConditionsFromSelectionVariant","VisualFilterRuntime","selectionChanged","oEvent","oInteractiveChart","getSource","sOutParameter","data","sValueListProperty","sDimension","sDimensionText","bMultipleSelectionAllowed","sDimensionType","oSelectedAggregation","getParameter","bIsAggregationSelected","oConditionModel","getModel","aConditions","getProperty","error","sSelectionChangedValue","getBindingContext","getObject","sSelectionChangedValueText","String","undefined","_parseDateTime","oCondition","createItemCondition","push","filter","operator","Date","parse","values","setProperty","getAggregationSelected","_this$getBindingConte","aSelectableValues","this","i","length","getParent","sDimensionValue","indexOf","getFiltersFromConditions","_oInteractiveChart$ge","_oInteractiveChart$ge2","_oInteractiveChart$ge3","_len","arguments","aArguments","Array","_key","oFilterBar","aInParameters","customData","bIsDraftSupported","aPropertyInfoSet","getPropertyInfo","mConditions","aValueListPropertyInfoSet","oFilters","aFilters","aParameters","oSelectionVariantAnnotation","parseCustomData","oInteractiveChartListBinding","getBinding","sPath","getPath","oMetaModel","getMetaModel","sEntitySetPath","filterConditions","getCustomConditions","bind","typeConfig","getTypeConfig","dataType","oSelectionVariantConditions","convertFilterCondions","Object","keys","forEach","sKey","inParameterForKey","find","inParameter","valueListProperty","localDataProperty","propertyInfoSet","name","baseType","condition","_formatDateTime","oInParameter","index","oInternalModelContext","sInfoPath","bEnableBinding","oResourceBundle","getLibraryResourceBundle","aRequiredProperties","aNotMatchedConditions","requiredPropertyPath","errorMessageTitle","errorMessage","showError","getText","sLabel","sFilterEntityName","split","sChartEntityName","sBindingPath","getBindingPathForParameters","parameter","key","slice","getFilterInfo","filters","EQ","isSuspended","resume","getFilterCounts","oConditions","scaleVisualFilterValue","oValue","scaleFactor","numberOfFractionalDigits","currency","oRawValue","getFormattedNumber","fireValueHelp","fireValueHelpRequest"],"sources":["VisualFilterRuntime-dbg.js"],"mappings":"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","sourceRoot":"visualfilters"}},{"offset":{"line":36052,"column":0},"map":{"version":3,"names":["getInteractiveBarChartTemplate","visualFilter","interactiveChartProperties","InteractiveChartHelper","getInteractiveChartProperties","id","generate","metaPath","getPath","dimension","chartAnnotation","Dimensions","xml","showErrorExpression","errorMessageTitleExpression","errorMessageExpression","aggregationBinding","outParameter","valuelistProperty","multipleSelectionAllowed","$target","name","annotations","Common","Text","path","scalefactor","chartMeasure","uom","inParameters","inParameterFilters","type","selectionVariantAnnotation","required","showOverlayInitially","requiredProperties","stringifiedParameters","draftSupported","chartLabel","measure","displayedValue","color"],"sourceRoot":"visualfilters/fragments","sources":["InteractiveBarChart.ts"],"sourcesContent":["import { PathAnnotationExpression } from \"@sap-ux/vocabularies-types\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport InteractiveChartHelper from \"../InteractiveChartHelper\";\nimport VisualFilterBlock from \"../VisualFilter.block\";\n\nexport function getInteractiveBarChartTemplate(visualFilter: VisualFilterBlock) {\n\tconst interactiveChartProperties = InteractiveChartHelper.getInteractiveChartProperties(visualFilter);\n\tif (interactiveChartProperties) {\n\t\tconst id = generate([visualFilter.metaPath?.getPath()]);\n\t\tconst dimension = visualFilter.chartAnnotation?.Dimensions[0];\n\t\treturn xml`<InteractiveBarChart\n                            xmlns=\"sap.suite.ui.microchart\"\n                            xmlns:core=\"sap.ui.core\"\n                            xmlns:customData=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n                            core:require=\"{VisualFilterRuntime: 'sap/fe/macros/visualfilters/VisualFilterRuntime'}\"\n                            visible=\"{= ${interactiveChartProperties.showErrorExpression}}\"\n                            selectionChanged=\"VisualFilterRuntime.selectionChanged\"\n                            showError=\"{= ${interactiveChartProperties.showErrorExpression}}\"\n                            errorMessageTitle=\"${interactiveChartProperties.errorMessageTitleExpression}\"\n                            errorMessage=\"${interactiveChartProperties.errorMessageExpression}\"\n                            bars=\"${interactiveChartProperties.aggregationBinding}\"\n                            customData:outParameter=\"${visualFilter.outParameter}\"\n                            customData:valuelistProperty=\"${visualFilter.valuelistProperty}\"\n                            customData:multipleSelectionAllowed=\"${visualFilter.multipleSelectionAllowed}\"\n                            customData:dimension=\"${dimension?.$target.name}\"\n                            customData:dimensionText=\"${\n\t\t\t\t\t\t\t\t(dimension?.$target.annotations.Common?.Text as unknown as PathAnnotationExpression<string>)?.path\n\t\t\t\t\t\t\t}\"\n                            customData:scalefactor=\"${interactiveChartProperties.scalefactor}\"\n                            customData:measure=\"${visualFilter.chartMeasure}\"\n                            customData:uom=\"${interactiveChartProperties.uom}\"\n                            customData:inParameters=\"${interactiveChartProperties.inParameters}\"\n                            customData:inParameterFilters=\"${interactiveChartProperties.inParameterFilters}\"\n                            customData:dimensionType=\"${dimension?.$target.type}\"\n                            customData:selectionVariantAnnotation=\"${interactiveChartProperties.selectionVariantAnnotation}\"\n                            customData:required=\"${visualFilter.required}\"\n                            customData:showOverlayInitially=\"${visualFilter.showOverlayInitially}\"\n                            customData:requiredProperties=\"${visualFilter.requiredProperties}\"\n                            customData:infoPath=\"${id}\"\n                            customData:parameters=\"${interactiveChartProperties.stringifiedParameters}\"\n                            customData:draftSupported=\"${visualFilter.draftSupported}\"\n                        >\n                            <bars>\n                                <InteractiveBarChartBar\n                                    core:require=\"{VisualFilterRuntime: 'sap/fe/macros/visualfilters/VisualFilterRuntime'}\"\n                                    label=\"${interactiveChartProperties.chartLabel}\"\n                                    value=\"${interactiveChartProperties.measure}\"\n                                    displayedValue=\"${interactiveChartProperties.displayedValue}\"\n                                    color=\"${interactiveChartProperties.color}\"\n                                    selected=\"{path: '$field>/conditions', formatter: 'sap.fe.macros.visualfilters.VisualFilterRuntime.getAggregationSelected'}\"\n                                />\n                            </bars>\n                        </InteractiveBarChart>`;\n\t}\n\treturn \"\";\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;EAMO,SAASA,8BAA8B,CAACC,YAA+B,EAAE;IAC/E,MAAMC,0BAA0B,GAAGC,sBAAsB,CAACC,6BAA6B,CAACH,YAAY,CAAC;IACrG,IAAIC,0BAA0B,EAAE;MAAA;MAC/B,MAAMG,EAAE,GAAGC,QAAQ,CAAC,0BAACL,YAAY,CAACM,QAAQ,0DAArB,sBAAuBC,OAAO,EAAE,CAAC,CAAC;MACvD,MAAMC,SAAS,4BAAGR,YAAY,CAACS,eAAe,0DAA5B,sBAA8BC,UAAU,CAAC,CAAC,CAAC;MAC7D,OAAOC,GAAI;AACb;AACA;AACA;AACA;AACA,0CAA0CV,0BAA0B,CAACW,mBAAoB;AACzF;AACA,4CAA4CX,0BAA0B,CAACW,mBAAoB;AAC3F,iDAAiDX,0BAA0B,CAACY,2BAA4B;AACxG,4CAA4CZ,0BAA0B,CAACa,sBAAuB;AAC9F,oCAAoCb,0BAA0B,CAACc,kBAAmB;AAClF,uDAAuDf,YAAY,CAACgB,YAAa;AACjF,4DAA4DhB,YAAY,CAACiB,iBAAkB;AAC3F,mEAAmEjB,YAAY,CAACkB,wBAAyB;AACzG,oDAAoDV,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEW,OAAO,CAACC,IAAK;AAC5E,wDACSZ,SAAS,aAATA,SAAS,gDAATA,SAAS,CAAEW,OAAO,CAACE,WAAW,CAACC,MAAM,oFAArC,sBAAuCC,IAAI,2DAA5C,uBAA8FC,IAC9F;AACR,sDAAsDvB,0BAA0B,CAACwB,WAAY;AAC7F,kDAAkDzB,YAAY,CAAC0B,YAAa;AAC5E,8CAA8CzB,0BAA0B,CAAC0B,GAAI;AAC7E,uDAAuD1B,0BAA0B,CAAC2B,YAAa;AAC/F,6DAA6D3B,0BAA0B,CAAC4B,kBAAmB;AAC3G,wDAAwDrB,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEW,OAAO,CAACW,IAAK;AAChF,qEAAqE7B,0BAA0B,CAAC8B,0BAA2B;AAC3H,mDAAmD/B,YAAY,CAACgC,QAAS;AACzE,+DAA+DhC,YAAY,CAACiC,oBAAqB;AACjG,6DAA6DjC,YAAY,CAACkC,kBAAmB;AAC7F,mDAAmD9B,EAAG;AACtD,qDAAqDH,0BAA0B,CAACkC,qBAAsB;AACtG,yDAAyDnC,YAAY,CAACoC,cAAe;AACrF;AACA;AACA;AACA;AACA,6CAA6CnC,0BAA0B,CAACoC,UAAW;AACnF,6CAA6CpC,0BAA0B,CAACqC,OAAQ;AAChF,sDAAsDrC,0BAA0B,CAACsC,cAAe;AAChG,6CAA6CtC,0BAA0B,CAACuC,KAAM;AAC9E;AACA;AACA;AACA,+CAA+C;IAC9C;IACA,OAAO,EAAE;EACV;EAAC;EAAA;AAAA"}},{"offset":{"line":36115,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockTemplateProcessor","StableIdHelper","InteractiveChartHelper","_exports","generate","xml","getInteractiveBarChartTemplate","visualFilter","interactiveChartProperties","getInteractiveChartProperties","_visualFilter$metaPat","_visualFilter$chartAn","_dimension$$target$an","_dimension$$target$an2","id","metaPath","getPath","dimension","chartAnnotation","Dimensions","showErrorExpression","errorMessageTitleExpression","errorMessageExpression","aggregationBinding","outParameter","valuelistProperty","multipleSelectionAllowed","$target","name","annotations","Common","Text","path","scalefactor","chartMeasure","uom","inParameters","inParameterFilters","type","selectionVariantAnnotation","required","showOverlayInitially","requiredProperties","stringifiedParameters","draftSupported","chartLabel","measure","displayedValue","color"],"sources":["InteractiveBarChart-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,uEAAO,CAAC,4DAA6D,qCAAsC,6BAA8B,SAAUC,EAAgCC,EAAgBC,GACxM,aAEA,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAWH,EAAeG,SAC9B,IAAIC,EAAML,EAA+BK,IACzC,SAASC,EAA+BC,GACtC,MAAMC,EAA6BN,EAAuBO,8BAA8BF,GACxF,GAAIC,EAA4B,CAC9B,IAAIE,EAAuBC,EAAuBC,EAAuBC,EACzE,MAAMC,EAAKV,EAAS,EAAEM,EAAwBH,EAAaQ,YAAc,MAAQL,SAA+B,OAAS,EAAIA,EAAsBM,YACnJ,MAAMC,GAAaN,EAAwBJ,EAAaW,mBAAqB,MAAQP,SAA+B,OAAS,EAAIA,EAAsBQ,WAAW,GAClK,OAAOd,CAAG;;;;;0CAK0BG,EAA2BY;;4CAEzBZ,EAA2BY;iDACtBZ,EAA2Ba;4CAChCb,EAA2Bc;oCACnCd,EAA2Be;uDACRhB,EAAaiB;4DACRjB,EAAakB;mEACNlB,EAAamB;oDAC5BT,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUU,QAAQC;wDACpEX,IAAc,MAAQA,SAAmB,OAAS,GAAKL,EAAwBK,EAAUU,QAAQE,YAAYC,UAAY,MAAQlB,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBmB,QAAU,MAAQlB,SAAgC,OAAS,EAAIA,EAAuBmB;sDACrTxB,EAA2ByB;kDAC/B1B,EAAa2B;8CACjB1B,EAA2B2B;uDAClB3B,EAA2B4B;6DACrB5B,EAA2B6B;wDAChCpB,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUU,QAAQW;qEAC3D9B,EAA2B+B;mDAC7ChC,EAAaiC;+DACDjC,EAAakC;6DACflC,EAAamC;mDACvB5B;qDACEN,EAA2BmC;yDACvBpC,EAAaqC;;;;;6CAKzBpC,EAA2BqC;6CAC3BrC,EAA2BsC;sDAClBtC,EAA2BuC;6CACpCvC,EAA2BwC;;;;+CAKpE,CACA,MAAO,EACT,CACA7C,EAASG,+BAAiCA,EAC1C,OAAOH,CACT,EAAG","sourceRoot":"visualfilters/fragments"}},{"offset":{"line":36160,"column":0},"map":{"version":3,"names":["getInteractiveChartWithErrorTemplate","visualFilter","chartAnnotation","chartMeasure","Dimensions","xml","showError","errorMessageTitle","errorMessage"],"sourceRoot":"visualfilters/fragments","sources":["InteractiveChartWithError.ts"],"sourcesContent":["import { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport VisualFilterBlock from \"../VisualFilter.block\";\n\nexport function getInteractiveChartWithErrorTemplate(visualFilter: VisualFilterBlock): string {\n\tconst chartAnnotation = visualFilter.chartAnnotation;\n\tif (visualFilter.chartMeasure && chartAnnotation?.Dimensions && chartAnnotation.Dimensions[0]) {\n\t\treturn xml`<InteractiveLineChart\n                        xmlns=\"sap.suite.ui.microchart\"\n                        xmlns:core=\"sap.ui.core\"\n                        core:require=\"{VisualFilterRuntime: 'sap/fe/macros/visualfilters/VisualFilterRuntime'}\"\n                        showError=\"${visualFilter.showError}\"\n                        errorMessageTitle=\"${visualFilter.errorMessageTitle}\"\n                        errorMessage=\"${visualFilter.errorMessage}\"\n                    />`;\n\t}\n\treturn \"\";\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;EAGO,SAASA,oCAAoC,CAACC,YAA+B,EAAU;IAC7F,MAAMC,eAAe,GAAGD,YAAY,CAACC,eAAe;IACpD,IAAID,YAAY,CAACE,YAAY,IAAID,eAAe,aAAfA,eAAe,eAAfA,eAAe,CAAEE,UAAU,IAAIF,eAAe,CAACE,UAAU,CAAC,CAAC,CAAC,EAAE;MAC9F,OAAOC,GAAI;AACb;AACA;AACA;AACA,qCAAqCJ,YAAY,CAACK,SAAU;AAC5D,6CAA6CL,YAAY,CAACM,iBAAkB;AAC5E,wCAAwCN,YAAY,CAACO,YAAa;AAClE,uBAAuB;IACtB;IACA,OAAO,EAAE;EACV;EAAC;EAAA;AAAA"}},{"offset":{"line":36186,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockTemplateProcessor","_exports","xml","getInteractiveChartWithErrorTemplate","visualFilter","chartAnnotation","chartMeasure","Dimensions","showError","errorMessageTitle","errorMessage"],"sources":["InteractiveChartWithError-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,6EAAO,CAAC,6DAA8D,SAAUC,GACrF,aAEA,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAMF,EAA+BE,IACzC,SAASC,EAAqCC,GAC5C,MAAMC,EAAkBD,EAAaC,gBACrC,GAAID,EAAaE,cAAgBD,IAAoB,MAAQA,SAAyB,GAAKA,EAAgBE,YAAcF,EAAgBE,WAAW,GAAI,CACtJ,OAAOL,CAAG;;;;qCAIqBE,EAAaI;6CACLJ,EAAaK;wCAClBL,EAAaM;uBAEjD,CACA,MAAO,EACT,CACAT,EAASE,qCAAuCA,EAChD,OAAOF,CACT,EAAG","sourceRoot":"visualfilters/fragments"}},{"offset":{"line":36198,"column":0},"map":{"version":3,"names":["getInteractiveLineChartTemplate","visualFilter","interactiveChartProperties","InteractiveChartHelper","getInteractiveChartProperties","id","generate","metaPath","getPath","dimension","chartAnnotation","Dimensions","xml","showErrorExpression","errorMessageTitleExpression","errorMessageExpression","aggregationBinding","outParameter","valuelistProperty","multipleSelectionAllowed","$target","name","annotations","Common","Text","path","chartMeasure","scalefactor","uom","inParameters","inParameterFilters","type","selectionVariantAnnotation","required","showOverlayInitially","requiredProperties","stringifiedParameters","draftSupported","chartLabel","measure","displayedValue","color"],"sourceRoot":"visualfilters/fragments","sources":["InteractiveLineChart.ts"],"sourcesContent":["import { PathAnnotationExpression } from \"@sap-ux/vocabularies-types\";\nimport { xml } from \"sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport InteractiveChartHelper from \"../InteractiveChartHelper\";\nimport VisualFilterBlock from \"../VisualFilter.block\";\n\nexport function getInteractiveLineChartTemplate(visualFilter: VisualFilterBlock): string {\n\tconst interactiveChartProperties = InteractiveChartHelper.getInteractiveChartProperties(visualFilter);\n\tif (interactiveChartProperties) {\n\t\tconst id = generate([visualFilter.metaPath?.getPath()]);\n\t\tconst dimension = visualFilter.chartAnnotation?.Dimensions[0];\n\t\treturn xml`<InteractiveLineChart\n                        xmlns=\"sap.suite.ui.microchart\"\n                        xmlns:core=\"sap.ui.core\"\n                        xmlns:customData=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n                        core:require=\"{VisualFilterRuntime: 'sap/fe/macros/visualfilters/VisualFilterRuntime'}\"\n                        visible=\"{= ${interactiveChartProperties.showErrorExpression}}\"\n                        selectionChanged=\"VisualFilterRuntime.selectionChanged\"\n                        showError=\"{= ${interactiveChartProperties.showErrorExpression}}\"\n                        errorMessageTitle=\"${interactiveChartProperties.errorMessageTitleExpression}\"\n                        errorMessage=\"${interactiveChartProperties.errorMessageExpression}\"\n                        points=\"${interactiveChartProperties.aggregationBinding}\"\n                        customData:outParameter=\"${visualFilter.outParameter}\"\n                        customData:valuelistProperty=\"${visualFilter.valuelistProperty}\"\n                        customData:multipleSelectionAllowed=\"${visualFilter.multipleSelectionAllowed}\"\n                        customData:dimension=\"${dimension?.$target?.name}\"\n                        customData:dimensionText=\"${\n\t\t\t\t\t\t\t(dimension?.$target.annotations.Common?.Text as unknown as PathAnnotationExpression<string>)?.path\n\t\t\t\t\t\t}\"\n                        customData:measure=\"${visualFilter.chartMeasure}\"\n                        customData:scalefactor=\"${interactiveChartProperties.scalefactor}\"\n                        customData:uom=\"${interactiveChartProperties.uom}\"\n                        customData:inParameters=\"${interactiveChartProperties.inParameters}\"\n                        customData:inParameterConditions=\"${interactiveChartProperties.inParameterFilters}\"\n                        customData:dimensionType=\"${dimension?.$target.type}\"\n                        customData:selectionVariantAnnotation=\"${interactiveChartProperties.selectionVariantAnnotation}\"\n                        customData:required=\"${visualFilter.required}\"\n                        customData:showOverlayInitially=\"${visualFilter.showOverlayInitially}\"\n                        customData:requiredProperties=\"${visualFilter.requiredProperties}\"\n                        customData:infoPath=\"${id}\"\n                        customData:parameters=\"${interactiveChartProperties.stringifiedParameters}\"\n                        customData:draftSupported=\"${visualFilter.draftSupported}\"\n                    >\n                        <points>\n                            <InteractiveLineChartPoint\n                                core:require=\"{VisualFilterRuntime: 'sap/fe/macros/visualfilters/VisualFilterRuntime'}\"\n                                label=\"${interactiveChartProperties.chartLabel}\"\n                                value=\"${interactiveChartProperties.measure}\"\n                                displayedValue=\"${interactiveChartProperties.displayedValue}\"\n                                color=\"${interactiveChartProperties.color}\"\n                                selected=\"{path: '$field>/conditions', formatter: 'sap.fe.macros.visualfilters.VisualFilterRuntime.getAggregationSelected'}\"\n                            />\n                        </points>\n             </InteractiveLineChart>`;\n\t}\n\treturn \"\";\n}\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;EAMO,SAASA,+BAA+B,CAACC,YAA+B,EAAU;IACxF,MAAMC,0BAA0B,GAAGC,sBAAsB,CAACC,6BAA6B,CAACH,YAAY,CAAC;IACrG,IAAIC,0BAA0B,EAAE;MAAA;MAC/B,MAAMG,EAAE,GAAGC,QAAQ,CAAC,0BAACL,YAAY,CAACM,QAAQ,0DAArB,sBAAuBC,OAAO,EAAE,CAAC,CAAC;MACvD,MAAMC,SAAS,4BAAGR,YAAY,CAACS,eAAe,0DAA5B,sBAA8BC,UAAU,CAAC,CAAC,CAAC;MAC7D,OAAOC,GAAI;AACb;AACA;AACA;AACA;AACA,sCAAsCV,0BAA0B,CAACW,mBAAoB;AACrF;AACA,wCAAwCX,0BAA0B,CAACW,mBAAoB;AACvF,6CAA6CX,0BAA0B,CAACY,2BAA4B;AACpG,wCAAwCZ,0BAA0B,CAACa,sBAAuB;AAC1F,kCAAkCb,0BAA0B,CAACc,kBAAmB;AAChF,mDAAmDf,YAAY,CAACgB,YAAa;AAC7E,wDAAwDhB,YAAY,CAACiB,iBAAkB;AACvF,+DAA+DjB,YAAY,CAACkB,wBAAyB;AACrG,gDAAgDV,SAAS,aAATA,SAAS,6CAATA,SAAS,CAAEW,OAAO,uDAAlB,mBAAoBC,IAAK;AACzE,oDACQZ,SAAS,aAATA,SAAS,gDAATA,SAAS,CAAEW,OAAO,CAACE,WAAW,CAACC,MAAM,oFAArC,sBAAuCC,IAAI,2DAA5C,uBAA8FC,IAC9F;AACP,8CAA8CxB,YAAY,CAACyB,YAAa;AACxE,kDAAkDxB,0BAA0B,CAACyB,WAAY;AACzF,0CAA0CzB,0BAA0B,CAAC0B,GAAI;AACzE,mDAAmD1B,0BAA0B,CAAC2B,YAAa;AAC3F,4DAA4D3B,0BAA0B,CAAC4B,kBAAmB;AAC1G,oDAAoDrB,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEW,OAAO,CAACW,IAAK;AAC5E,iEAAiE7B,0BAA0B,CAAC8B,0BAA2B;AACvH,+CAA+C/B,YAAY,CAACgC,QAAS;AACrE,2DAA2DhC,YAAY,CAACiC,oBAAqB;AAC7F,yDAAyDjC,YAAY,CAACkC,kBAAmB;AACzF,+CAA+C9B,EAAG;AAClD,iDAAiDH,0BAA0B,CAACkC,qBAAsB;AAClG,qDAAqDnC,YAAY,CAACoC,cAAe;AACjF;AACA;AACA;AACA;AACA,yCAAyCnC,0BAA0B,CAACoC,UAAW;AAC/E,yCAAyCpC,0BAA0B,CAACqC,OAAQ;AAC5E,kDAAkDrC,0BAA0B,CAACsC,cAAe;AAC5F,yCAAyCtC,0BAA0B,CAACuC,KAAM;AAC1E;AACA;AACA;AACA,qCAAqC;IACpC;IACA,OAAO,EAAE;EACV;EAAC;EAAA;AAAA"}},{"offset":{"line":36261,"column":0},"map":{"version":3,"names":["sap","ui","define","BuildingBlockTemplateProcessor","StableIdHelper","InteractiveChartHelper","_exports","generate","xml","getInteractiveLineChartTemplate","visualFilter","interactiveChartProperties","getInteractiveChartProperties","_visualFilter$metaPat","_visualFilter$chartAn","_dimension$$target","_dimension$$target$an","_dimension$$target$an2","id","metaPath","getPath","dimension","chartAnnotation","Dimensions","showErrorExpression","errorMessageTitleExpression","errorMessageExpression","aggregationBinding","outParameter","valuelistProperty","multipleSelectionAllowed","$target","name","annotations","Common","Text","path","chartMeasure","scalefactor","uom","inParameters","inParameterFilters","type","selectionVariantAnnotation","required","showOverlayInitially","requiredProperties","stringifiedParameters","draftSupported","chartLabel","measure","displayedValue","color"],"sources":["InteractiveLineChart-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wEAAO,CAAC,4DAA6D,qCAAsC,6BAA8B,SAAUC,EAAgCC,EAAgBC,GACxM,aAEA,IAAIC,EAAW,CAAC,EAChB,IAAIC,EAAWH,EAAeG,SAC9B,IAAIC,EAAML,EAA+BK,IACzC,SAASC,EAAgCC,GACvC,MAAMC,EAA6BN,EAAuBO,8BAA8BF,GACxF,GAAIC,EAA4B,CAC9B,IAAIE,EAAuBC,EAAuBC,EAAoBC,EAAuBC,EAC7F,MAAMC,EAAKX,EAAS,EAAEM,EAAwBH,EAAaS,YAAc,MAAQN,SAA+B,OAAS,EAAIA,EAAsBO,YACnJ,MAAMC,GAAaP,EAAwBJ,EAAaY,mBAAqB,MAAQR,SAA+B,OAAS,EAAIA,EAAsBS,WAAW,GAClK,OAAOf,CAAG;;;;;sCAKsBG,EAA2Ba;;wCAEzBb,EAA2Ba;6CACtBb,EAA2Bc;wCAChCd,EAA2Be;kCACjCf,EAA2BgB;mDACVjB,EAAakB;wDACRlB,EAAamB;+DACNnB,EAAaoB;gDAC5BT,IAAc,MAAQA,SAAmB,OAAS,GAAKN,EAAqBM,EAAUU,WAAa,MAAQhB,SAA4B,OAAS,EAAIA,EAAmBiB;oDACnKX,IAAc,MAAQA,SAAmB,OAAS,GAAKL,EAAwBK,EAAUU,QAAQE,YAAYC,UAAY,MAAQlB,SAA+B,OAAS,GAAKC,EAAyBD,EAAsBmB,QAAU,MAAQlB,SAAgC,OAAS,EAAIA,EAAuBmB;8CACzT1B,EAAa2B;kDACT1B,EAA2B2B;0CACnC3B,EAA2B4B;mDAClB5B,EAA2B6B;4DAClB7B,EAA2B8B;oDACnCpB,IAAc,MAAQA,SAAmB,OAAS,EAAIA,EAAUU,QAAQW;iEAC3D/B,EAA2BgC;+CAC7CjC,EAAakC;2DACDlC,EAAamC;yDACfnC,EAAaoC;+CACvB5B;iDACEP,EAA2BoC;qDACvBrC,EAAasC;;;;;yCAKzBrC,EAA2BsC;yCAC3BtC,EAA2BuC;kDAClBvC,EAA2BwC;yCACpCxC,EAA2ByC;;;;qCAKhE,CACA,MAAO,EACT,CACA9C,EAASG,gCAAkCA,EAC3C,OAAOH,CACT,EAAG","sourceRoot":"visualfilters/fragments"}},{"offset":{"line":36306,"column":0},"map":{"version":3,"sources":["library-preload.js?bundle-code-0"],"mappings":"AAAA;AACA","sourcesContent":["sap.ui.require.preload({\n"],"sourceRoot":""}}]}