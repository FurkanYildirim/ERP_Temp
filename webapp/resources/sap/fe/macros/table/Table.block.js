/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/buildingBlocks/BuildingBlockBase","sap/fe/core/buildingBlocks/BuildingBlockSupport","sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor","sap/fe/core/CommonUtils","sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/DataVisualization","sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/macros/internal/helpers/TableTemplating","sap/ui/core/library","../CommonHelper","../internal/helpers/ActionHelper","../MacroAPI","./ActionsTemplating","./TableHelper"],function(e,t,i,n,a,o,r,l,u,s,c,b,d,p,m,f,g,h,y,v){"use strict";var C,w,P,D,$,A,T,x,z,M,S,I,E,O,B,F,R,k,V,_,L,N,j,U,H,q,W,G,Q,X,K,Y,J,Z,ee,te,ie,ne,ae,oe,re,le,ue,se,ce,be,de,pe,me,fe,ge,he,ye,ve,Ce,we,Pe,De,$e,Ae,Te,xe,ze,Me,Se,Ie,Ee,Oe,Be,Fe,Re,ke,Ve,_e,Le,Ne,je,Ue,He,qe,We,Ge,Qe,Xe,Ke,Ye,Je,Ze,et,tt,it,nt,at,ot,rt,lt,ut,st,ct,bt,dt,pt,mt,ft,gt,ht,yt,vt,Ct,wt,Pt,Dt,$t,At,Tt,xt,zt,Mt,St,It,Et,Ot,Bt,Ft,Rt,kt,Vt,_t,Lt;var Nt={};var jt=y.getTableActionTemplate;var Ut=m.TitleLevel;var Ht=p.buildExpressionForHeaderVisible;var qt=d.getContextRelativeTargetObjectPath;var Wt=b.isSingleton;var Gt=c.generate;var Qt=u.getInvolvedDataModelObjects;var Xt=l.CreationMode;var Kt=r.getVisualizationsFromPresentationVariant;var Yt=r.getDataVisualizationConfiguration;var Jt=o.isDataFieldForAnnotation;var Zt=n.xml;var ei=i.defineBuildingBlock;var ti=i.blockEvent;var ii=i.blockAttribute;var ni=i.blockAggregation;function ai(e,t,i,n){if(!i)return;Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function oi(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function ri(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;li(e,t)}function li(e,t){li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,i){t.__proto__=i;return t};return li(e,t)}function ui(e,t,i,n,a){var o={};Object.keys(n).forEach(function(e){o[e]=n[e]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;if("value"in o||o.initializer){o.writable=true}o=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},o);if(a&&o.initializer!==void 0){o.value=o.initializer?o.initializer.call(a):void 0;o.initializer=undefined}if(o.initializer===void 0){Object.defineProperty(e,t,o);o=null}return o}function si(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}const ci=function(e){var t;let i=null;const n=e;let a=[];const o=(t=n.getAttribute("key"))===null||t===void 0?void 0:t.replace("InlineXML_","");if(n.children.length&&n.localName==="ActionGroup"&&n.namespaceURI&&["sap.fe.macros","sap.fe.macros.table"].indexOf(n.namespaceURI)>-1){const e=Array.prototype.slice.apply(n.children);let t=0;i=e.reduce((e,i)=>{var n;const a=((n=i.getAttribute("key"))===null||n===void 0?void 0:n.replace("InlineXML_",""))||o+"_Menu_"+t;const r={key:a,text:i.getAttribute("text"),__noWrap:true,press:i.getAttribute("press"),requiresSelection:i.getAttribute("requiresSelection")==="true",enabled:i.getAttribute("enabled")===null?true:i.getAttribute("enabled")};e[r.key]=r;t++;return e},{});a=Object.values(i).slice(-n.children.length).map(function(e){return e.key})}return{key:o,text:n.getAttribute("text"),position:{placement:n.getAttribute("placement"),anchor:n.getAttribute("anchor")},__noWrap:true,press:n.getAttribute("press"),requiresSelection:n.getAttribute("requiresSelection")==="true",enabled:n.getAttribute("enabled")===null?true:n.getAttribute("enabled"),menu:a.length?a:null,menuContentActions:i}};const bi=function(e,t){var i,n;t.key=t.key.replace("InlineXML_","");e.setAttribute("key",t.key);return{key:t.key,type:"Slot",width:e.getAttribute("width"),importance:e.getAttribute("importance"),horizontalAlign:e.getAttribute("horizontalAlign"),availability:e.getAttribute("availability"),header:e.getAttribute("header"),template:((i=e.children[0])===null||i===void 0?void 0:i.outerHTML)||"",properties:e.getAttribute("properties")?(n=e.getAttribute("properties"))===null||n===void 0?void 0:n.split(","):undefined,position:{placement:e.getAttribute("placement")||e.getAttribute("positionPlacement"),anchor:e.getAttribute("anchor")||e.getAttribute("positionAnchor")}}};let di=(C=ei({name:"Table",namespace:"sap.fe.macros.internal",publicNamespace:"sap.fe.macros",returnTypes:["sap.fe.macros.table.TableAPI"]}),w=ii({type:"sap.ui.model.Context",isPublic:true,required:true}),P=ii({type:"boolean",isPublic:true}),D=ii({type:"sap.ui.model.Context",isPublic:true}),$=ii({type:"boolean",isPublic:true}),A=ii({type:"boolean",isPublic:true}),T=ii({type:"number",isPublic:true}),x=ii({type:"boolean",isPublic:true}),z=ii({type:"string",isPublic:true}),M=ii({type:"string",isPublic:true}),S=ii({type:"sap.ui.core.TitleLevel",isPublic:true}),I=ii({type:"boolean",isPublic:true}),E=ii({type:"string",isPublic:true}),O=ii({type:"boolean",isPublic:true}),B=ii({type:"string|boolean",isPublic:true}),F=ii({type:"boolean",isPublic:true}),R=ii({type:"string",isPublic:true}),k=ii({type:"boolean",isPublic:true}),V=ii({type:"string",isPublic:true}),_=ii({type:"string",isPublic:true}),L=ii({type:"sap.ui.model.Context",isPublic:false,required:true,expectedTypes:["EntitySet","NavigationProperty","Singleton"]}),N=ii({type:"string"}),j=ii({type:"boolean"}),U=ii({type:"string"}),H=ii({type:"boolean"}),q=ii({type:"string"}),W=ii({type:"string"}),G=ii({type:"string"}),Q=ii({type:"string"}),X=ii({type:"string"}),K=ii({type:"boolean"}),Y=ii({type:"boolean"}),J=ii({type:"boolean"}),Z=ii({type:"string"}),ee=ii({type:"string"}),te=ii({type:"number"}),ie=ii({type:"boolean"}),ne=ii({type:"boolean"}),ae=ii({type:"boolean"}),oe=ii({type:"string"}),re=ii({type:"string"}),le=ii({type:"string"}),ue=ii({type:"string"}),se=ii({type:"string"}),ce=ii({type:"string"}),be=ii({type:"boolean"}),de=ii({type:"boolean"}),pe=ii({type:"number"}),me=ii({type:"string"}),fe=ii({type:"object",isPublic:true}),ge=ii({type:"sap.ui.model.Context"}),he=ii({type:"string"}),ye=ii({type:"string"}),ve=ii({type:"boolean"}),Ce=ni({type:"sap.fe.macros.internal.table.Action | sap.fe.macros.internal.table.ActionGroup",isPublic:true,processAggregations:ci}),we=ni({type:"sap.fe.macros.internal.table.Column",isPublic:true,hasVirtualNode:true,processAggregations:bi}),Pe=ti(),De=ti(),$e=ti(),Ae=ti(),Te=ti(),xe=ti(),ze=ti(),Me=ti(),C(Se=(Ie=function(t){ri(i,t);function i(e,n,o){var r,l,u;var c;c=t.call(this,e)||this;ai(c,"metaPath",Ee,oi(c));ai(c,"busy",Oe,oi(c));ai(c,"contextPath",Be,oi(c));ai(c,"enableFullScreen",Fe,oi(c));ai(c,"enableExport",Re,oi(c));ai(c,"frozenColumnCount",ke,oi(c));ai(c,"enablePaste",Ve,oi(c));ai(c,"filterBar",_e,oi(c));ai(c,"header",Le,oi(c));ai(c,"headerLevel",Ne,oi(c));ai(c,"headerVisible",je,oi(c));ai(c,"id",Ue,oi(c));ai(c,"isSearchable",He,oi(c));ai(c,"personalization",qe,oi(c));ai(c,"readOnly",We,oi(c));ai(c,"type",Ge,oi(c));ai(c,"useCondensedLayout",Qe,oi(c));ai(c,"selectionMode",Xe,oi(c));ai(c,"variantManagement",Ke,oi(c));ai(c,"collection",Ye,oi(c));ai(c,"_apiId",Je,oi(c));ai(c,"autoBindOnInit",Ze,oi(c));ai(c,"columnEditMode",et,oi(c));ai(c,"createAtEnd",tt,oi(c));ai(c,"createNewAction",it,oi(c));ai(c,"creationMode",nt,oi(c));ai(c,"createOutbound",at,oi(c));ai(c,"customValidationFunction",ot,oi(c));ai(c,"dataStateIndicatorFilter",rt,oi(c));ai(c,"disableAddRowButtonForEmptyData",lt,oi(c));ai(c,"enableAutoColumnWidth",ut,oi(c));ai(c,"enableAutoScroll",st,oi(c));ai(c,"fieldMode",ct,oi(c));ai(c,"filterBarId",bt,oi(c));ai(c,"inlineCreationRowCount",dt,oi(c));ai(c,"isAlp",pt,oi(c));ai(c,"isCompactType",mt,oi(c));ai(c,"isOptimizedForSmallDevice",ft,oi(c));ai(c,"multiSelectMode",gt,oi(c));ai(c,"navigationPath",ht,oi(c));ai(c,"noDataText",yt,oi(c));ai(c,"rowAction",vt,oi(c));ai(c,"tableType",Ct,oi(c));ai(c,"updatablePropertyPath",wt,oi(c));ai(c,"useBasicSearch",Pt,oi(c));ai(c,"searchable",Dt,oi(c));ai(c,"selectionLimit",$t,oi(c));ai(c,"showCreate",At,oi(c));ai(c,"tableDefinition",Tt,oi(c));ai(c,"tableDefinitionContext",xt,oi(c));ai(c,"tableDelegate",zt,oi(c));ai(c,"tabTitle",Mt,oi(c));ai(c,"visible",St,oi(c));ai(c,"actions",It,oi(c));ai(c,"columns",Et,oi(c));ai(c,"rowPress",Ot,oi(c));ai(c,"onContextChange",Bt,oi(c));ai(c,"onChange",Ft,oi(c));ai(c,"onSegmentedButtonPressed",Rt,oi(c));ai(c,"variantSaved",kt,oi(c));ai(c,"stateChange",Vt,oi(c));ai(c,"selectionChange",_t,oi(c));ai(c,"variantSelected",Lt,oi(c));c.getTableType=()=>{const e=c.collection.getObject();switch(c.tableType){case"GridTable":return Zt`<mdcTable:GridTableType
                rowCountMode="${c.tableDefinition.control.rowCountMode}"
                rowCount="${c.tableDefinition.control.rowCount}"
                selectionLimit="${c.selectionLimit}"
				fixedColumnCount="${c.tableDefinition.control.frozenColumnCount}"
            />`;case"TreeTable":return Zt`<mdcTable:TreeTableType
                rowCountMode="${c.tableDefinition.control.rowCountMode}"
                rowCount="${c.tableDefinition.control.rowCount}"
				fixedColumnCount="${c.tableDefinition.control.frozenColumnCount}"
            />`;default:const t=e.$kind==="EntitySet"?"Scroll":undefined;return Zt`<mdcTable:ResponsiveTableType
                showDetailsButton="true"
                detailsButtonSetting="{=['Low', 'Medium', 'None']}"
                growingMode="${t}"
            />`}};c.getDependents=()=>{var e;let t=``;if(!c.readOnly&&(e=c.tableDefinition)!==null&&e!==void 0&&e.columns){for(const e of c.tableDefinition.columns){if(e.availability==="Default"&&"annotationPath"in e){t+=c.getValueHelp(e)}}}const i=c.tableDefinition.annotation.standardActions.actions;if(c.tableDefinition.annotation.standardActions.isInsertUpdateTemplated&&i.create.isTemplated==="true"){t+=Zt`<control:CommandExecution
                                execute="${v.pressEventForCreateButton(oi(c),true)}"
                                visible="${i.create.visible}"
                                enabled="${i.create.enabled}"
                                command="Create"
                            />`}if(i.delete.isTemplated==="true"){var n,a,o,r,l;const e=(n=((r=c.collectionEntity)===null||r===void 0?void 0:r.entityType)||((l=c.collectionEntity)===null||l===void 0?void 0:l.targetType))===null||n===void 0?void 0:(a=n.annotations)===null||a===void 0?void 0:(o=a.UI)===null||o===void 0?void 0:o.HeaderInfo;t+=Zt`<control:CommandExecution
                        execute="${v.pressEventForDeleteButton(oi(c),c.collectionEntity.name,e,c.contextObjectPath)}"
                        visible="${i.delete.visible}"
                        enabled="${i.delete.enabled}"
                        command="DeleteEntry"
                        />`}for(const e in c.tableDefinition.commandActions){const i=c.tableDefinition.commandActions[e];t+=`${c.getActionCommand(e,i)}`}t+=`<control:CommandExecution execute="TableRuntime.displayTableSettings" command="TableSettings" />`;if(c.variantManagement==="None"){t+=`\x3c!-- Persistence provider offers persisting personalization changes without variant management --\x3e\n\t\t\t<p13n:PersistenceProvider id="${Gt([c.id,"PersistenceProvider"])}" for="${c.id}" />`}return Zt`${t}`};c.getActions=()=>{let e="";if(c.onSegmentedButtonPressed){e=`<mdcat:ActionToolbarAction\n            layoutInformation="{\n                    aggregationName: 'end',\n                    alignment: 'End'\n                }"\n            visible="{= \${pageInternal>alpContentView} === 'Table' }"\n        >\n            <SegmentedButton\n                id="${Gt([c.id,"SegmentedButton","TemplateContentView"])}"\n                select="${c.onSegmentedButtonPressed}"\n                selectedKey="{pageInternal>alpContentView}"\n            >\n                <items>`;if(f.isDesktop()){e+=`<SegmentedButtonItem\n                            tooltip="{sap.fe.i18n>M_COMMON_HYBRID_SEGMENTED_BUTTON_ITEM_TOOLTIP}"\n\t\t\t\t\t\t\tkey = "Hybrid"\n\t\t\t\t\t\t\ticon = "sap-icon://chart-table-view"\n\t\t\t\t\t\t\t/>`}e+=`<SegmentedButtonItem\n                        tooltip="{sap.fe.i18n>M_COMMON_CHART_SEGMENTED_BUTTON_ITEM_TOOLTIP}"\n                        key="Chart"\n                        icon="sap-icon://bar-chart"\n                    />\n                    <SegmentedButtonItem\n                        tooltip="{sap.fe.i18n>M_COMMON_TABLE_SEGMENTED_BUTTON_ITEM_TOOLTIP}"\n                        key="Table"\n                        icon="sap-icon://table-view"\n                    />\n                </items>\n            </SegmentedButton>\n        </mdcat:ActionToolbarAction>`}e+=`${jt(oi(c))}`;return Zt`${e}`};const b=Qt(c.metaPath,c.contextPath);c.contextObjectPath=b;const d=o.bindingContexts.converterContext;c.pageTemplateType=d===null||d===void 0?void 0:d.getObject("/templateType");const p=i.setUpTableDefinition(oi(c),o);c.collection=o.models.metaModel.createBindingContext(p.annotation.collection);c.convertedMetaData=c.contextObjectPath.convertedTypes;c.collectionEntity=c.convertedMetaData.resolvePath(c.tableDefinition.annotation.collection).target;c.setUpId();const m=c.getConverterContext(c.contextObjectPath,(r=c.contextPath)===null||r===void 0?void 0:r.getPath(),o);c._collectionIsDraftEnabled=m.getManifestWrapper().isFilterBarHidden()&&s.isDraftNode(c.collectionEntity)||s.isDraftRoot(c.collectionEntity);c.selectionMode=c.tableDefinition.annotation.selectionMode;c.enableFullScreen=c.tableDefinition.control.enableFullScreen;c.enableExport=c.tableDefinition.control.enableExport;c.enablePaste=c.tableDefinition.annotation.standardActions.actions.paste.enabled;c.frozenColumnCount=c.tableDefinition.control.frozenColumnCount;c.updatablePropertyPath=c.tableDefinition.annotation.standardActions.updatablePropertyPath;c.type=c.tableDefinition.control.type;c.disableAddRowButtonForEmptyData??=c.tableDefinition.control.disableAddRowButtonForEmptyData;c.customValidationFunction??=c.tableDefinition.control.customValidationFunction;c.headerVisible??=c.tableDefinition.control.headerVisible;c.searchable??=c.tableDefinition.annotation.searchable;c.inlineCreationRowCount??=c.tableDefinition.control.inlineCreationRowCount;c.header??=c.tableDefinition.annotation.title;c.selectionLimit??=c.tableDefinition.control.selectionLimit;c.isCompactType??=c.tableDefinition.control.isCompactType;c.creationMode??=c.tableDefinition.annotation.create.mode;c.createAtEnd??=c.tableDefinition.annotation.create.append;c.createOutbound??=c.tableDefinition.annotation.create.outbound;c.createNewAction??=c.tableDefinition.annotation.create.newAction;c.createOutboundDetail??=c.tableDefinition.annotation.create.outboundDetail;c.personalization??=c.tableDefinition.annotation.p13nMode;c.variantManagement??=c.tableDefinition.annotation.variantManagement;c.enableAutoColumnWidth??=true;c.dataStateIndicatorFilter??=c.tableDefinition.control.dataStateIndicatorFilter;c.isOptimizedForSmallDevice??=a.isSmallDevice();c.navigationPath=p.annotation.navigationPath;if(p.annotation.collection.startsWith("/")&&Wt(b.startingEntitySet)){p.annotation.collection=c.navigationPath}c.setReadOnly();if(c.rowPress){c.rowAction="Navigation"}c.rowPress??=(l=c.tableDefinition.annotation.row)===null||l===void 0?void 0:l.press;c.rowAction??=(u=c.tableDefinition.annotation.row)===null||u===void 0?void 0:u.action;if(c.personalization==="false"){c.personalization=undefined}else if(c.personalization==="true"){c.personalization="Sort,Column,Filter"}switch(c.personalization){case"false":c.personalization=undefined;break;case"true":c.personalization="Sort,Column,Filter";break;default:}if(c.isSearchable===false){c.searchable=false}else{c.searchable=c.tableDefinition.annotation.searchable}let g=false;if(!c.filterBar&&!c.filterBarId&&c.searchable){c.filterBarId=Gt([c.id,"StandardAction","BasicSearch"]);g=true}c.useBasicSearch=g;c.tableType=c.type;c.showCreate=c.tableDefinition.annotation.standardActions.actions.create.visible||true;c.autoBindOnInit=c.tableDefinition.annotation.autoBindOnInit;switch(c.readOnly){case true:c.columnEditMode="Display";break;case false:c.columnEditMode="Editable";break;default:c.columnEditMode=undefined}return c}Nt=i;i.getVisualizationPath=function t(i,n){const a=qt(i);if(!a){e.error(`Missing meta path parameter for LineItem`);return`@${"com.sap.vocabularies.UI.v1.LineItem"}`}if(i.targetObject.term==="com.sap.vocabularies.UI.v1.LineItem"){return a}const o=n.getEntityTypeAnnotation(a);let r=[];switch(i.targetObject.term){case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":if(i.targetObject.PresentationVariant){r=Kt(i.targetObject.PresentationVariant,a,o.converterContext,true)}break;case"com.sap.vocabularies.UI.v1.PresentationVariant":r=Kt(i.targetObject,a,o.converterContext,true);break;default:e.error(`Bad metapath parameter for table : ${i.targetObject.term}`)}const l=r.find(e=>e.visualization.term==="com.sap.vocabularies.UI.v1.LineItem");if(l){return l.annotationPath}else{e.error(`Bad meta path parameter for LineItem: ${i.targetObject.term}`);return`@${"com.sap.vocabularies.UI.v1.LineItem"}`}};i.getPresentationPath=function e(t){var i;let n;switch((i=t.targetObject)===null||i===void 0?void 0:i.term){case"com.sap.vocabularies.UI.v1.PresentationVariant":n=qt(t);break;case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":n=qt(t)+"/PresentationVariant";break}return n};i.setUpTableDefinition=function e(t,n){let a=t.tableDefinition;if(!a){var o,r;const e=t.getConverterContext(t.contextObjectPath,(o=t.contextPath)===null||o===void 0?void 0:o.getPath(),n);const u=i.getVisualizationPath(t.contextObjectPath,e);const s=i.getPresentationPath(t.contextObjectPath);const c={};const b={enableExport:t.enableExport,frozenColumnCount:t.frozenColumnCount,enableFullScreen:t.enableFullScreen,enablePaste:t.enablePaste,selectionMode:t.selectionMode,type:t.type};if(t.actions){var l;(l=Object.values(t.actions))===null||l===void 0?void 0:l.forEach(e=>{t.actions={...t.actions,...e.menuContentActions};delete e.menuContentActions})}c[u]={actions:t.actions||{},columns:t.columns||{},tableSettings:b};const d=t.getConverterContext(t.contextObjectPath,(r=t.contextPath)===null||r===void 0?void 0:r.getPath(),n,c);const p=Yt(u,t.useCondensedLayout,d,undefined,undefined,s,true);a=p.visualizations[0];t.tableDefinition=a}t.tableDefinitionContext=h.createBindingContext(t.tableDefinition,n);return a};var n=i.prototype;n.setUpId=function e(){if(this.id){this._apiId=this.id;this.id=this.getContentId(this.id)}else{const e=this.tableDefinition;this.id??=e.annotation.id;this._apiId=Gt([e.annotation.id,"Table"])}};n.setReadOnly=function e(){if(this.readOnly===undefined&&this.tableDefinition.annotation.displayMode===true){this.readOnly=true}};n._getEntityType=function e(){var t,i;return((t=this.collectionEntity)===null||t===void 0?void 0:t.entityType)||((i=this.collectionEntity)===null||i===void 0?void 0:i.targetType)};n.getValueHelpTemplateFromPath=function e(t){return t?`<macros:ValueHelp\n        idPrefix="${Gt([this.id,"TableValueHelp"])}"\n        property="${t}/Value"\n    />`:""};n.getValueHelp=function e(t){const i=this.convertedMetaData.resolvePath(t.annotationPath).target;if(Jt(i)&&i.Target.$target.term==="com.sap.vocabularies.UI.v1.Chart"){return``}else if(Jt(i)&&i.Target.$target.term==="com.sap.vocabularies.UI.v1.FieldGroup"){let e=``;for(const n in i.Target.$target.Data){e+=this.getValueHelpTemplateFromPath(t.annotationPath+"/Target/$AnnotationPath/Data/"+n)}return Zt`${e}`}else{return Zt`${this.getValueHelpTemplateFromPath(t.annotationPath)}`}};n.getActionCommand=function e(t,i){var n,a,o,r,l;const s=i.annotationPath?this.convertedMetaData.resolvePath(i.annotationPath).target:undefined;const c=i.annotationPath?f.getActionContext(this.metaPath.getModel().createBindingContext(i.annotationPath+"/Action")):undefined;const b=this.metaPath.getModel().createBindingContext(c);const d=b?u.getInvolvedDataModelObjects(b,this.collection):undefined;const p=s===null||s===void 0?void 0:(n=s.ActionTarget)===null||n===void 0?void 0:n.isBound;const m=(s===null||s===void 0?void 0:(a=s.ActionTarget)===null||a===void 0?void 0:(o=a.annotations)===null||o===void 0?void 0:(r=o.Core)===null||r===void 0?void 0:(l=r.OperationAvailable)===null||l===void 0?void 0:l.valueOf())!==false;const g=i.type==="ForAction"?p!==true||m:true;if(g){return Zt`<internalMacro:ActionCommand
							action="{tableDefinition>commandActions/${t}}"
							onExecuteAction="${v.pressEventDataFieldForActionButton({contextObjectPath:this.contextObjectPath,id:this.id},s,this.collectionEntity.name,this.tableDefinition.operationAvailableMap,b===null||b===void 0?void 0:b.getObject(),i.isNavigable,i.enableAutoScroll,i.defaultValuesExtensionFunction)}"
							onExecuteIBN="${f.getPressHandlerForDataFieldForIBN(s,"${internal>selectedContexts}",!this.tableDefinition.enableAnalytics)}"
							onExecuteManifest="${i.noWrap?i.press:f.buildActionWrapper(i,this)}"
							isIBNEnabled="${i.enabled??v.isDataFieldForIBNEnabled(this,s,!!s.RequiresContext,s.NavigationAvailable)}"
							isActionEnabled="${i.enabled??v.isDataFieldForActionEnabled(this.tableDefinition,s.Action,!!p,c,i.enableOnSelect,d===null||d===void 0?void 0:d.targetEntityType)}"
							/>`}return``};n.getCreationRow=function e(){if(this.creationMode==="CreationRow"){const e=this.tableDefinition.annotation.standardActions.actions.creationRow;if(e.isTemplated){return Zt`<mdc:creationRow>
							<mdcTable:CreationRow
								id="${Gt([this.id,"CreationRow"])}"
								visible="${e.visible}"
								apply="${v.pressEventForCreateButton(this,false)}"
								applyEnabled="${e.enabled}"
								macrodata:disableAddRowButtonForEmptyData="${this.disableAddRowButtonForEmptyData}"
								macrodata:customValidationFunction="${this.customValidationFunction}"
							/>
					   	   </mdc:creationRow>`}}return""};n.getRowSetting=function e(){var t,i;let n=`<mdcTable:RowSettings\n        navigated="${(t=this.tableDefinition.annotation.row)===null||t===void 0?void 0:t.rowNavigated}"\n        highlight="${(i=this.tableDefinition.annotation.row)===null||i===void 0?void 0:i.rowHighlighting}"\n        >`;if(this.rowAction==="Navigation"){var a;n+=`<mdcTable:rowActions>\n                <mdcTable:RowActionItem\n                    type = "${this.rowAction}"\n                    press = "${this.tableType==="ResponsiveTable"?"":this.rowPress}"\n                    visible = "${(a=this.tableDefinition.annotation.row)===null||a===void 0?void 0:a.visible}"\n                    />\n                </mdcTable:rowActions>`}n+=`</mdcTable:RowSettings>`;return Zt`${n}`};n.getVariantManagement=function e(){if(this.variantManagement==="Control"){return Zt`<mdc:variant>
                        <variant:VariantManagement
                            id="${Gt([this.id,"VM"])}"
                            for="{this>id}"
                            showSetAsDefault="true"
                            select="{this>variantSelected}"
                            headerLevel="${this.headerLevel}"
                            save="${this.variantSaved}"
                        />
                    </mdc:variant>`}return""};n.getQuickFilter=function e(){var t;if((t=this.tableDefinition.control.filters)!==null&&t!==void 0&&t.quickFilters){const e=this.tableDefinition.control.filters.quickFilters;return Zt`<mdc:quickFilter>
						<macroTable:QuickFilterSelector
							id="${Gt([this.id,"QuickFilterContainer"])}"
							metaPath="${this.metaPath}"
							filterConfiguration="${e}"
							onSelectionChange="API.onQuickFilterSelectionChange"
						/>
					</mdc:quickFilter>`}return""};n.getEmptyRowsEnabled=function e(){return this.creationMode===Xt.InlineCreationRows?this.tableDefinition.annotation.standardActions.actions.create.enabled:undefined};n.getTemplate=function e(){var t,i,n,a,o,r,l,u,s,c;const b=Ht(this);if(this.rowPress){this.rowAction="Navigation"}this.rowPress??=(t=this.tableDefinition.annotation.row)===null||t===void 0?void 0:t.press;const d=(i=this.collectionEntity.annotations.Capabilities)===null||i===void 0?void 0:(n=i.DeleteRestrictions)===null||n===void 0?void 0:(a=n.Deletable)===null||a===void 0?void 0:a.path;const p=v.getUiLineItemObject(this.metaPath,this.convertedMetaData);const m=(o=v.getDelegate)===null||o===void 0?void 0:o.call(v,this.tableDefinition,(r=this.isAlp)===null||r===void 0?void 0:r.toString(),this.tableDefinition.annotation.entityName);const h=`TableRuntime.setContexts(\${$source>/}, '${d}', '${(l=this.collectionEntity.annotations.Common)===null||l===void 0?void 0:l.DraftRoot}', '${this.tableDefinition.operationAvailableMap}', '${v.getNavigationAvailableMap(p)}', '${g.getMultiSelectDisabledActions(p)}', '${this.updatablePropertyPath}')`;const y=this._getEntityType();const C=this.tableType==="TreeTable"?`TableRuntime.onTreeTableContextChanged(\${$source>/}, ${this.tableDefinition.annotation.initialExpansionLevel})`:undefined;return Zt`
            <macroTable:TableAPI
                xmlns="sap.m"
                xmlns:mdc="sap.ui.mdc"
                xmlns:plugins="sap.m.plugins"
                xmlns:mdcTable="sap.ui.mdc.table"
                xmlns:macroTable="sap.fe.macros.table"
                xmlns:mdcat="sap.ui.mdc.actiontoolbar"
                xmlns:core="sap.ui.core"
                xmlns:control="sap.fe.core.controls"
                xmlns:dt="sap.ui.dt"
                xmlns:fl="sap.ui.fl"
                xmlns:variant="sap.ui.fl.variants"
                xmlns:p13n="sap.ui.mdc.p13n"
                xmlns:internalMacro="sap.fe.macros.internal"
                xmlns:unittest="http://schemas.sap.com/sapui5/preprocessorextension/sap.fe.unittesting/1"
                xmlns:macrodata="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
                binding="{internal>controls/${this.id}}"
                id="${this._apiId}"
                tableDefinition="{_pageModel>${this.tableDefinitionContext.getPath()}}"
                entityTypeFullyQualifiedName="${y===null||y===void 0?void 0:y.fullyQualifiedName}"
                metaPath="${(u=this.metaPath)===null||u===void 0?void 0:u.getPath()}"
                contextPath="${(s=this.contextPath)===null||s===void 0?void 0:s.getPath()}"
                stateChange="${this.stateChange}"
                selectionChange="${this.selectionChange}"
				contextChange="${this.onContextChange}"
                readOnly="${this.readOnly}"
                filterBar="${this.filterBar}"
                macrodata:tableAPILocalId="${this._apiId}"
                emptyRowsEnabled="${this.getEmptyRowsEnabled()}"
                enableAutoColumnWidth="${this.enableAutoColumnWidth}"
                isOptimizedForSmallDevice="${this.isOptimizedForSmallDevice}"
            >
				<template:with path="collection>${f.getTargetCollectionPath(this.collection)}" var="targetCollection">
                <macroTable:layoutData>
                    <FlexItemData maxWidth="100%" />
                </macroTable:layoutData>
                <!-- macrodata has to be an expression binding if it needs to be set as attribute via change handler during templating -->
                    <mdc:Table
                        unittest:id="TableMacroFragment"
                        core:require="{TableRuntime: 'sap/fe/macros/table/TableRuntime', API: 'sap/fe/macros/table/TableAPI'}"
                        fl:flexibility="{this>fl:flexibility}"
                        sortConditions="${this.tableDefinition.annotation.sortConditions}"
                        groupConditions="${f.stringifyObject(this.tableDefinition.annotation.groupConditions)}"
                        aggregateConditions="${f.stringifyObject(this.tableDefinition.annotation.aggregateConditions)}"
                        dt:designtime="${this.variantManagement==="None"?"not-adaptable":undefined}"
                        macrodata:kind="${this.collectionEntity._type}"
                        macrodata:navigationPath="${this.navigationPath}"
                        id="${this.id}"
                        busy="${this.busy}"
                        busyIndicatorDelay="0"
                        enableExport="${this.enableExport}"
                        delegate="${m}"
                        rowPress="${this.rowPress}"
                        height="100%"
                        autoBindOnInit="${this.autoBindOnInit&&!this.filterBar}"
                        selectionMode="${this.selectionMode||"None"}"
                        selectionChange="${h}"
                        showRowCount="${this.tableDefinition.control.showRowCount}"
                        ${this.attr("header",this.header)}
                        headerVisible="${b}"
                        headerLevel="${this.headerLevel}"
                        threshold="${this.tableDefinition.annotation.threshold}"
                        noData="${this.noDataText}"
                        p13nMode="${this.personalization}"
                        filter="${this.filterBarId}"
                        paste="API.onPaste($event, $controller)"
                        beforeExport="API.onBeforeExport($event)"
                        class="${this.tableDefinition.control.useCondensedTableLayout===true?"sapUiSizeCondensed":undefined}"
                        multiSelectMode="${this.tableDefinition.control.multiSelectMode}"
                        showPasteButton="${this.tableDefinition.annotation.standardActions.actions.paste.visible}"
                        enablePaste="${this.tableDefinition.annotation.standardActions.actions.paste.enabled}"
                        macrodata:rowsBindingInfo="${v.getRowsBindingInfo(this)}"
                        macrodata:enableAnalytics="${this.tableDefinition.enableAnalytics}"
                        macrodata:creationMode="${this.creationMode}"
                        macrodata:inlineCreationRowCount="${this.inlineCreationRowCount}"
                        macrodata:showCreate="${this.showCreate}"
                        macrodata:createAtEnd="${this.createAtEnd}"
                        macrodata:enableAutoScroll="${this.enableAutoScroll}"
                        macrodata:displayModePropertyBinding="${this.readOnly}"
                        macrodata:tableType="${this.tableType}"
                        macrodata:targetCollectionPath="${f.getContextPath(null,{context:this.collection})}"
                        macrodata:entityType="${f.getContextPath(null,{context:this.collection})+"/"}"
                        macrodata:metaPath="${f.getContextPath(null,{context:this.collection})}"
                        macrodata:onChange="${this.onChange}"
                        macrodata:hiddenFilters="${v.formatHiddenFilters((c=this.tableDefinition.control.filters)===null||c===void 0?void 0:c.hiddenFilters)}"
                        macrodata:requestGroupId="$auto.Workers"
                        macrodata:segmentedButtonId="${Gt([this.id,"SegmentedButton","TemplateContentView"])}"
                        macrodata:enablePaste="${this.enablePaste}"
                        macrodata:operationAvailableMap="${f.stringifyCustomData(this.tableDefinition.operationAvailableMap)}"
                        visible="${this.visible}"
						modelContextChange="${C}"
                    >
                        <mdc:dataStateIndicator>
                            <plugins:DataStateIndicator
                                filter="${this.dataStateIndicatorFilter}"
                                enableFiltering="true"
                                dataStateChange="API.onDataStateChange"
                            />
                        </mdc:dataStateIndicator>
                        <mdc:type>
                            ${this.getTableType()}
                        </mdc:type>
                        <mdc:dependents>
                            ${this.getDependents()}
                        </mdc:dependents>
                        <mdc:actions>
                            ${this.getActions()}
                        </mdc:actions>
                        <mdc:rowSettings>
                        ${this.getRowSetting()}
                        </mdc:rowSettings>
                        <mdc:columns>
                            <core:Fragment fragmentName="sap.fe.macros.table.Columns" type="XML" />
                        </mdc:columns>
                        ${this.getCreationRow()}
                        ${this.getVariantManagement()}
                        ${this.getQuickFilter()}
                    </mdc:Table>
				</template:with>
            </macroTable:TableAPI>
        `};return i}(t),Ee=ui(Ie.prototype,"metaPath",[w],{configurable:true,enumerable:true,writable:true,initializer:null}),Oe=ui(Ie.prototype,"busy",[P],{configurable:true,enumerable:true,writable:true,initializer:null}),Be=ui(Ie.prototype,"contextPath",[D],{configurable:true,enumerable:true,writable:true,initializer:null}),Fe=ui(Ie.prototype,"enableFullScreen",[$],{configurable:true,enumerable:true,writable:true,initializer:null}),Re=ui(Ie.prototype,"enableExport",[A],{configurable:true,enumerable:true,writable:true,initializer:null}),ke=ui(Ie.prototype,"frozenColumnCount",[T],{configurable:true,enumerable:true,writable:true,initializer:null}),Ve=ui(Ie.prototype,"enablePaste",[x],{configurable:true,enumerable:true,writable:true,initializer:null}),_e=ui(Ie.prototype,"filterBar",[z],{configurable:true,enumerable:true,writable:true,initializer:null}),Le=ui(Ie.prototype,"header",[M],{configurable:true,enumerable:true,writable:true,initializer:null}),Ne=ui(Ie.prototype,"headerLevel",[S],{configurable:true,enumerable:true,writable:true,initializer:function(){return Ut.Auto}}),je=ui(Ie.prototype,"headerVisible",[I],{configurable:true,enumerable:true,writable:true,initializer:null}),Ue=ui(Ie.prototype,"id",[E],{configurable:true,enumerable:true,writable:true,initializer:null}),He=ui(Ie.prototype,"isSearchable",[O],{configurable:true,enumerable:true,writable:true,initializer:null}),qe=ui(Ie.prototype,"personalization",[B],{configurable:true,enumerable:true,writable:true,initializer:null}),We=ui(Ie.prototype,"readOnly",[F],{configurable:true,enumerable:true,writable:true,initializer:null}),Ge=ui(Ie.prototype,"type",[R],{configurable:true,enumerable:true,writable:true,initializer:null}),Qe=ui(Ie.prototype,"useCondensedLayout",[k],{configurable:true,enumerable:true,writable:true,initializer:null}),Xe=ui(Ie.prototype,"selectionMode",[V],{configurable:true,enumerable:true,writable:true,initializer:null}),Ke=ui(Ie.prototype,"variantManagement",[_],{configurable:true,enumerable:true,writable:true,initializer:null}),Ye=ui(Ie.prototype,"collection",[L],{configurable:true,enumerable:true,writable:true,initializer:null}),Je=ui(Ie.prototype,"_apiId",[N],{configurable:true,enumerable:true,writable:true,initializer:null}),Ze=ui(Ie.prototype,"autoBindOnInit",[j],{configurable:true,enumerable:true,writable:true,initializer:null}),et=ui(Ie.prototype,"columnEditMode",[U],{configurable:true,enumerable:true,writable:true,initializer:null}),tt=ui(Ie.prototype,"createAtEnd",[H],{configurable:true,enumerable:true,writable:true,initializer:null}),it=ui(Ie.prototype,"createNewAction",[q],{configurable:true,enumerable:true,writable:true,initializer:null}),nt=ui(Ie.prototype,"creationMode",[W],{configurable:true,enumerable:true,writable:true,initializer:null}),at=ui(Ie.prototype,"createOutbound",[G],{configurable:true,enumerable:true,writable:true,initializer:null}),ot=ui(Ie.prototype,"customValidationFunction",[Q],{configurable:true,enumerable:true,writable:true,initializer:null}),rt=ui(Ie.prototype,"dataStateIndicatorFilter",[X],{configurable:true,enumerable:true,writable:true,initializer:null}),lt=ui(Ie.prototype,"disableAddRowButtonForEmptyData",[K],{configurable:true,enumerable:true,writable:true,initializer:null}),ut=ui(Ie.prototype,"enableAutoColumnWidth",[Y],{configurable:true,enumerable:true,writable:true,initializer:null}),st=ui(Ie.prototype,"enableAutoScroll",[J],{configurable:true,enumerable:true,writable:true,initializer:null}),ct=ui(Ie.prototype,"fieldMode",[Z],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),bt=ui(Ie.prototype,"filterBarId",[ee],{configurable:true,enumerable:true,writable:true,initializer:null}),dt=ui(Ie.prototype,"inlineCreationRowCount",[te],{configurable:true,enumerable:true,writable:true,initializer:null}),pt=ui(Ie.prototype,"isAlp",[ie],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),mt=ui(Ie.prototype,"isCompactType",[ne],{configurable:true,enumerable:true,writable:true,initializer:null}),ft=ui(Ie.prototype,"isOptimizedForSmallDevice",[ae],{configurable:true,enumerable:true,writable:true,initializer:null}),gt=ui(Ie.prototype,"multiSelectMode",[oe],{configurable:true,enumerable:true,writable:true,initializer:null}),ht=ui(Ie.prototype,"navigationPath",[re],{configurable:true,enumerable:true,writable:true,initializer:null}),yt=ui(Ie.prototype,"noDataText",[le],{configurable:true,enumerable:true,writable:true,initializer:null}),vt=ui(Ie.prototype,"rowAction",[ue],{configurable:true,enumerable:true,writable:true,initializer:function(){return undefined}}),Ct=ui(Ie.prototype,"tableType",[se],{configurable:true,enumerable:true,writable:true,initializer:null}),wt=ui(Ie.prototype,"updatablePropertyPath",[ce],{configurable:true,enumerable:true,writable:true,initializer:null}),Pt=ui(Ie.prototype,"useBasicSearch",[be],{configurable:true,enumerable:true,writable:true,initializer:null}),Dt=ui(Ie.prototype,"searchable",[de],{configurable:true,enumerable:true,writable:true,initializer:null}),$t=ui(Ie.prototype,"selectionLimit",[pe],{configurable:true,enumerable:true,writable:true,initializer:null}),At=ui(Ie.prototype,"showCreate",[me],{configurable:true,enumerable:true,writable:true,initializer:null}),Tt=ui(Ie.prototype,"tableDefinition",[fe],{configurable:true,enumerable:true,writable:true,initializer:null}),xt=ui(Ie.prototype,"tableDefinitionContext",[ge],{configurable:true,enumerable:true,writable:true,initializer:null}),zt=ui(Ie.prototype,"tableDelegate",[he],{configurable:true,enumerable:true,writable:true,initializer:null}),Mt=ui(Ie.prototype,"tabTitle",[ye],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),St=ui(Ie.prototype,"visible",[ve],{configurable:true,enumerable:true,writable:true,initializer:null}),It=ui(Ie.prototype,"actions",[Ce],{configurable:true,enumerable:true,writable:true,initializer:null}),Et=ui(Ie.prototype,"columns",[we],{configurable:true,enumerable:true,writable:true,initializer:null}),Ot=ui(Ie.prototype,"rowPress",[Pe],{configurable:true,enumerable:true,writable:true,initializer:null}),Bt=ui(Ie.prototype,"onContextChange",[De],{configurable:true,enumerable:true,writable:true,initializer:null}),Ft=ui(Ie.prototype,"onChange",[$e],{configurable:true,enumerable:true,writable:true,initializer:null}),Rt=ui(Ie.prototype,"onSegmentedButtonPressed",[Ae],{configurable:true,enumerable:true,writable:true,initializer:null}),kt=ui(Ie.prototype,"variantSaved",[Te],{configurable:true,enumerable:true,writable:true,initializer:null}),Vt=ui(Ie.prototype,"stateChange",[xe],{configurable:true,enumerable:true,writable:true,initializer:null}),_t=ui(Ie.prototype,"selectionChange",[ze],{configurable:true,enumerable:true,writable:true,initializer:null}),Lt=ui(Ie.prototype,"variantSelected",[Me],{configurable:true,enumerable:true,writable:true,initializer:null}),Ie))||Se);Nt=di;return Nt},false);
//# sourceMappingURL=Table.block.js.map