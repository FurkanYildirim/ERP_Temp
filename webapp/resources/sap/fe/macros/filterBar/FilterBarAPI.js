/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/base/util/merge","sap/fe/core/helpers/ClassSupport","sap/fe/core/helpers/SemanticDateOperators","sap/fe/core/StateFilterToSelectionVariant","sap/fe/macros/filter/FilterUtils","sap/ui/mdc/p13n/StateUtil","../MacroAPI"],function(e,t,r,i,n,a,l,o){"use strict";var u,s,c,p,f,b,g,h,d,y,m,v,w,F,S,z,C,P,E,O,x,V,B,T,j,I,A,_,D,M,U,k,$;var H=r.xmlEventHandler;var L=r.property;var N=r.event;var R=r.defineUI5Class;var q=r.aggregation;function G(e,t,r,i){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function J(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function K(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;Q(e,t)}function Q(e,t){Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t};return Q(e,t)}function W(e,t,r,i,n){var a={};Object.keys(i).forEach(function(e){a[e]=i[e]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},a);if(n&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(n):void 0;a.initializer=undefined}if(a.initializer===void 0){Object.defineProperty(e,t,a);a=null}return a}function X(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}let Y=(u=R("sap.fe.macros.filterBar.FilterBarAPI",{returnTypes:["sap.ui.core.Control"]}),s=L({type:"string"}),c=L({type:"string",expectedAnnotations:["com.sap.vocabularies.UI.v1.SelectionFields"],expectedTypes:["EntitySet","EntityType"]}),p=L({type:"string",expectedTypes:["EntitySet","EntityType","NavigationProperty"]}),f=L({type:"boolean",defaultValue:false}),b=L({type:"boolean",defaultValue:true}),g=L({type:"boolean",defaultValue:true}),h=L({type:"boolean",defaultValue:false}),d=q({type:"sap.fe.macros.FilterField",multiple:true}),y=N(),m=N(),v=N(),w=N(),F=N(),S=N(),z=H(),C=H(),u(P=(E=function(r){K(o,r);function o(){var t;for(var n=arguments.length,a=new Array(n),l=0;l<n;l++){a[l]=arguments[l]}t=r.call(this,...a)||this;G(t,"id",O,J(t));G(t,"metaPath",x,J(t));G(t,"contextPath",V,J(t));G(t,"liveMode",B,J(t));G(t,"visible",T,J(t));G(t,"showMessages",j,J(t));G(t,"showClearButton",I,J(t));G(t,"filterFields",A,J(t));G(t,"search",_,J(t));G(t,"internalSearch",D,J(t));G(t,"filterChanged",M,J(t));G(t,"afterClear",U,J(t));G(t,"internalFilterChanged",k,J(t));G(t,"stateChange",$,J(t));t.triggerSearch=async()=>{const r=t.content;try{if(r){await r.waitForInitialization();return await r.triggerSearch()}}catch(t){const r=t instanceof Error?t.message:String(t);e.error(`FE : Buildingblock : FilterBar : ${r}`);throw Error(r)}};t.isSemanticDateFilterApplied=()=>!i.hasSemanticDateOperations(t.content.getConditions());return t}var u=o.prototype;u.handleSearch=function e(r){const i=r.getSource();const n=r.getParameters();if(i){const e=i.getFilterConditions();const r=this._prepareEventParameters(i);this.fireInternalSearch(t({conditions:e},n));this.fireSearch(r)}};u.handleFilterChanged=function e(r){const i=r.getSource();const n=r.getParameters();if(i){const e=i.getFilterConditions();const r=this._prepareEventParameters(i);this.fireInternalFilterChanged(t({conditions:e},n));this.fireFilterChanged(r)}};u._prepareEventParameters=function e(t){const{parameters:r,filters:i,search:n}=a.getFilters(t);return{parameters:r,filters:i,search:n}};u.setFilterValues=function e(t,r,i){if(arguments.length===2){i=r;return a.setFilterValues(this.content,t,i)}return a.setFilterValues(this.content,t,r,i)};u.getActiveFiltersText=function e(){var t;const r=this.content;return(r===null||r===void 0?void 0:(t=r.getAssignedFiltersText())===null||t===void 0?void 0:t.filtersText)||""};u.getFilters=function e(){return a.getFilters(this.content)};u.getSelectionVariant=async function t(){try{const e=this.content;const t=await l.retrieveExternalState(e);const r=t.filter;const i=e.data("parameters");return n.getSelectionVariantFromConditions(r,e.getPropertyHelper(),i)}catch(t){const r=this.getId();const i=t instanceof Error?t.message:String(t);e.error(`FilterBar Building Block (${r}) - get selection variant failed : ${i}`);throw Error(i)}};return o}(o),O=W(E.prototype,"id",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),x=W(E.prototype,"metaPath",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),V=W(E.prototype,"contextPath",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),B=W(E.prototype,"liveMode",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),T=W(E.prototype,"visible",[b],{configurable:true,enumerable:true,writable:true,initializer:null}),j=W(E.prototype,"showMessages",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),I=W(E.prototype,"showClearButton",[h],{configurable:true,enumerable:true,writable:true,initializer:null}),A=W(E.prototype,"filterFields",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),_=W(E.prototype,"search",[y],{configurable:true,enumerable:true,writable:true,initializer:null}),D=W(E.prototype,"internalSearch",[m],{configurable:true,enumerable:true,writable:true,initializer:null}),M=W(E.prototype,"filterChanged",[v],{configurable:true,enumerable:true,writable:true,initializer:null}),U=W(E.prototype,"afterClear",[w],{configurable:true,enumerable:true,writable:true,initializer:null}),k=W(E.prototype,"internalFilterChanged",[F],{configurable:true,enumerable:true,writable:true,initializer:null}),$=W(E.prototype,"stateChange",[S],{configurable:true,enumerable:true,writable:true,initializer:null}),W(E.prototype,"handleSearch",[z],Object.getOwnPropertyDescriptor(E.prototype,"handleSearch"),E.prototype),W(E.prototype,"handleFilterChanged",[C],Object.getOwnPropertyDescriptor(E.prototype,"handleFilterChanged"),E.prototype),E))||P);return Y},false);
//# sourceMappingURL=FilterBarAPI.js.map