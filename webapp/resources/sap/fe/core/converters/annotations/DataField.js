/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/PropertyHelper","../helpers/DataFieldHelper"],function(e,t,a,i){"use strict";var o={};var n=i.isReferencePropertyStaticallyHidden;var l=a.getAssociatedUnitProperty;var r=a.getAssociatedTimezoneProperty;var d=a.getAssociatedCurrencyProperty;var v=t.getDisplayMode;var s=e.isProperty;var u=e.isPathAnnotationExpression;function c(e){return e.hasOwnProperty("Action")}o.isDataFieldForActionAbstract=c;function p(e){return e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"}o.isDataFieldForAnnotation=p;function f(e){return e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"}o.isDataFieldForAction=f;function g(e){return e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"}o.isDataFieldForIntentBasedNavigation=g;function m(e){return e.hasOwnProperty("Value")}o.isDataFieldTypes=m;function $(e){const t=e.targetObject;return D(f(t)?t:undefined)}o.isDataModelObjectPathForActionWithDialog=$;function D(e){const t=e===null||e===void 0?void 0:e.ActionTarget;if(t){var a,i;const e=(a=t.annotations)===null||a===void 0?void 0:(i=a.Common)===null||i===void 0?void 0:i.IsActionCritical;if(t.parameters.length>1||e){return"Dialog"}else{return"None"}}else{return"None"}}o.isActionWithDialog=D;function T(e){let t;if(s(e)){var a,i,o,n,l,r,d,v,c,p;t=((a=e.annotations)===null||a===void 0?void 0:(i=a.UI)===null||i===void 0?void 0:(o=i.DataFieldDefault)===null||o===void 0?void 0:(n=o.Target)===null||n===void 0?void 0:(l=n.$target)===null||l===void 0?void 0:l.TargetValue)??((r=e.annotations)===null||r===void 0?void 0:(d=r.UI)===null||d===void 0?void 0:(v=d.DataFieldDefault)===null||v===void 0?void 0:(c=v.Target)===null||c===void 0?void 0:(p=c.$target)===null||p===void 0?void 0:p.MaximumValue)}else{t=e.TargetValue??e.MaximumValue}if(typeof t==="number"){return t.toString()}return u(t)?t:"100"}o.getTargetValueOnDataPoint=T;const y=function(e){var t,a,i,o,n;return((t=e.annotations)===null||t===void 0?void 0:(a=t.UI)===null||a===void 0?void 0:(i=a.DataFieldDefault)===null||i===void 0?void 0:(o=i.Target)===null||o===void 0?void 0:(n=o.$target)===null||n===void 0?void 0:n.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"};o.isDataPointFromDataFieldDefault=y;function b(e,t){if(typeof t==="object"){var a;if(m(t)&&(a=t.Value)!==null&&a!==void 0&&a.$target){var i,o,n;const a=(i=t.Value)===null||i===void 0?void 0:i.$target;if((a===null||a===void 0?void 0:(o=a.annotations)===null||o===void 0?void 0:(n=o.Common)===null||n===void 0?void 0:n.SemanticObject)!==undefined){return e.getEntitySetBasedAnnotationPath(a===null||a===void 0?void 0:a.fullyQualifiedName)}}else if(s(t)){var l,r;if((t===null||t===void 0?void 0:(l=t.annotations)===null||l===void 0?void 0:(r=l.Common)===null||r===void 0?void 0:r.SemanticObject)!==undefined){return e.getEntitySetBasedAnnotationPath(t===null||t===void 0?void 0:t.fullyQualifiedName)}}}return undefined}o.getSemanticObjectPath=b;function F(e){if(e){return e.indexOf("/")>-1?e.substring(0,e.lastIndexOf("/")+1):""}return""}function h(e,t,a,i){if(a==="AnalyticalTable"){var o,n;const a=(o=e.annotations)===null||o===void 0?void 0:(n=o.UI)===null||n===void 0?void 0:n.Hidden;if(a!==null&&a!==void 0&&a.path&&s(a.$target)){const e=t+a.path;i.additionalProperties[e]=a.$target}const l=e.Criticality;if(l!==null&&l!==void 0&&l.path&&s(l===null||l===void 0?void 0:l.$target)){const e=t+l.path;i.additionalProperties[e]=l===null||l===void 0?void 0:l.$target}}return i}function I(e,t,a,i,o){let n=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{properties:{},additionalProperties:{},textOnlyPropertiesFromTextAnnotation:[]};let u=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;let c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:false;function p(e,t){if(!n.properties.hasOwnProperty(e)){n.properties[e]=t}return Object.keys(n.properties).indexOf(e)}function f(e){n.exportSettingsTemplate=n.exportSettingsTemplate?`${n.exportSettingsTemplate}${e}`:`${e}`}if(e&&t){var g,m;let G;let H;let R;let Q;let q;if(c){G=p(e,t);f(`{${G}}`);return n}const J=F(e);const K=(g=t.annotations)===null||g===void 0?void 0:(m=g.Common)===null||m===void 0?void 0:m.Text;if(n.exportSettingsTemplate){f("\n");n.exportSettingsWrapping=true}if(K!==null&&K!==void 0&&K.path&&K!==null&&K!==void 0&&K.$target){const i=a.getDataModelObjectPath();const o=J+K.path;const l=v(t,i);let r;switch(l){case"Value":G=p(e,t);f(`{${G}}`);break;case"Description":r=p(o,K.$target);f(`{${r}}`);n.textOnlyPropertiesFromTextAnnotation.push(o);break;case"ValueDescription":G=p(e,t);r=p(o,K.$target);f(`{${G}} ({${r}})`);break;case"DescriptionValue":G=p(e,t);r=p(o,K.$target);f(`{${r}} ({${G}})`);break}}else{var $,D,y,b,I,U,P,A,x,O,V,k,C,S,N;const a=d(t)||l(t);const o=(t===null||t===void 0?void 0:($=t.annotations)===null||$===void 0?void 0:(D=$.Measures)===null||D===void 0?void 0:D.ISOCurrency)||(t===null||t===void 0?void 0:(y=t.annotations)===null||y===void 0?void 0:(b=y.Measures)===null||b===void 0?void 0:b.Unit);const v=r(t);const c=t===null||t===void 0?void 0:(I=t.annotations)===null||I===void 0?void 0:(U=I.Common)===null||U===void 0?void 0:U.Timezone;if(a&&o!==null&&o!==void 0&&o.$target){G=p(e,t);R=p(J+o.path,o.$target);if(u){f(`{${G}}  {${R}}`)}else{n.exportUnitName=J+o.path}}else if(v&&c!==null&&c!==void 0&&c.$target){G=p(e,t);Q=p(J+c.path,c.$target);if(u){f(`{${G}}  {${Q}}`)}else{n.exportTimezoneName=J+c.path}}else if(((P=t.Target)===null||P===void 0?void 0:(A=P.$target)===null||A===void 0?void 0:A.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"&&!((x=t.Target)!==null&&x!==void 0&&(O=x.$target)!==null&&O!==void 0&&O.ValueFormat)||((V=t.annotations)===null||V===void 0?void 0:(k=V.UI)===null||k===void 0?void 0:(C=k.DataFieldDefault)===null||C===void 0?void 0:(S=C.Target)===null||S===void 0?void 0:(N=S.$target)===null||N===void 0?void 0:N.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var W,j,B,M,w;const a=(W=t.Target)===null||W===void 0?void 0:(j=W.$target)===null||j===void 0?void 0:j.Value.$target;const i=(B=t.Target)===null||B===void 0?void 0:B.$target;const o=(M=t.annotations)===null||M===void 0?void 0:(w=M.UI)===null||w===void 0?void 0:w.DataFieldDefault;G=p(J?J+e:e,o?t:a);H=T(o?t:i);if(s(H.$target)){H=H;q=p(J?J+H.$target.name:H.$target.name,H.$target);f(`{${G}}/{${q}}`)}else{n.exportDataPointTargetValue=H;f(`{${G}}/${H}`)}}else if(t.$Type==="com.sap.vocabularies.Communication.v1.ContactType"){var E,z;const e=(E=t.fn)===null||E===void 0?void 0:E.$target;const a=(z=t.fn)===null||z===void 0?void 0:z.path;G=p(J?J+a:a,e);f(`{${G}}`)}else if(!i){G=p(e,t);f(`{${G}}`);if(o){n.exportUnitString=`${o}`}else if(c){n.exportTimezoneString=`${c}`}}}n=h(t,J,o,n);if(Object.keys(n.additionalProperties).length>0&&Object.keys(n.properties).length===0){G=p(e,t);f(`{${G}}`)}}return n}o.collectRelatedProperties=I;function U(e,t,a){var i,o,l;let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{properties:{},additionalProperties:{},textOnlyPropertiesFromTextAnnotation:[]};let d=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;let v=false;switch(e===null||e===void 0?void 0:e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":if(e.Value){var s,u,c;const i=e.Value;v=n((s=i.$target)===null||s===void 0?void 0:(u=s.annotations)===null||u===void 0?void 0:(c=u.UI)===null||c===void 0?void 0:c.DataFieldDefault)||n(e)||false;r=I(i.path,i.$target,t,false,a,r,d,v);const o=F(i.path);r=h(e,o,a,r)}break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":switch((i=e.Target)===null||i===void 0?void 0:(o=i.$target)===null||o===void 0?void 0:o.$Type){case"com.sap.vocabularies.UI.v1.FieldGroupType":(l=e.Target.$target.Data)===null||l===void 0?void 0:l.forEach(e=>{r=U(e,t,a,r,true)});break;case"com.sap.vocabularies.UI.v1.DataPointType":v=n(e)??false;r=I(e.Target.$target.Value.path,e,t,false,a,r,d,v);break;case"com.sap.vocabularies.Communication.v1.ContactType":const i=e.Target.$target;v=n(e)??false;r=I(e.Target.value,i,t,v,a,r,d,v);break;default:break}break;default:break}return r}o.collectRelatedPropertiesRecursively=U;const P=function(e){var t,a,i,o;if(s(e)){return e.type}let n;switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":n=undefined;break;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":n=e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:(a=t.$target)===null||a===void 0?void 0:a.type;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":default:const s=(i=e.Target)===null||i===void 0?void 0:(o=i.$target)===null||o===void 0?void 0:o.$Type;if(s){var l;const t=(l=e.Target)===null||l===void 0?void 0:l.$target;if(t.$Type==="com.sap.vocabularies.Communication.v1.ContactType"){var r,d;n=u(t===null||t===void 0?void 0:t.fn)&&(t===null||t===void 0?void 0:(r=t.fn)===null||r===void 0?void 0:(d=r.$target)===null||d===void 0?void 0:d.type)||undefined}else if(t.$Type==="com.sap.vocabularies.UI.v1.DataPointType"){var v,c,p;n=(t===null||t===void 0?void 0:(v=t.Value)===null||v===void 0?void 0:(c=v.$Path)===null||c===void 0?void 0:c.$Type)||(t===null||t===void 0?void 0:(p=t.Value)===null||p===void 0?void 0:p.$target.type)}else{var f;n=((f=e.Target)===null||f===void 0?void 0:f.$target.$Type)==="com.sap.vocabularies.UI.v1.ChartDefinitionType"?undefined:"Edm.Boolean"}}else{n=undefined}break}return n};o.getDataFieldDataType=P;return o},false);
//# sourceMappingURL=DataField.js.map