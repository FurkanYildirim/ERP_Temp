{"version":3,"file":"library-preload.designtime.js","sections":[{"offset":{"line":1,"column":0},"map":{"version":3,"names":["urlParserMock","parseParameters","urlParser","sap","ushell","Container","getService","urlParams","window","location","search","fioriToolsRtaMode","toLowerCase","isOnDynamicPage","element","getMetadata","getName","parent","getParent","getAllowList","allowList","elementName","getId","indexOf","AppComponentDesignTime","actions","aggregations","rootControl","propagateMetadata","tool","start","appComponent","getEnvironmentCapabilities","setCapability","stop"],"sourceRoot":"","sources":["AppComponent.designtime.ts"],"sourcesContent":["import type AppComponent from \"sap/fe/core/AppComponent\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\n\ntype UrlParser = {\n\tparseParameters(url: string): Record<string, string[]>;\n};\n\nconst urlParserMock: UrlParser = {\n\tparseParameters: function () {\n\t\treturn {};\n\t}\n};\nconst urlParser: UrlParser = sap.ushell?.Container ? sap.ushell.Container.getService(\"URLParsing\") : urlParserMock;\nconst urlParams: Record<string, string[]> = urlParser.parseParameters(window.location.search);\nconst fioriToolsRtaMode: boolean = urlParams[\"fiori-tools-rta-mode\"]?.[0]?.toLowerCase() === \"true\";\n\nconst isOnDynamicPage = function (element: ManagedObject): boolean {\n\tif (element.getMetadata().getName() === \"sap.f.DynamicPage\") {\n\t\treturn true;\n\t} else {\n\t\tconst parent = element.getParent();\n\t\treturn parent ? isOnDynamicPage(parent) : false;\n\t}\n};\nconst getAllowList = function (element: ManagedObject): Record<string, boolean> {\n\tlet allowList: Record<string, boolean> = {};\n\tconst elementName = element.getMetadata().getName();\n\tif (fioriToolsRtaMode) {\n\t\t// build the allow list for Fiori tools (developers)\n\t\tif (isOnDynamicPage(element)) {\n\t\t\tallowList = {\n\t\t\t\t\"sap.ui.fl.variants.VariantManagement\": true,\n\t\t\t\t\"sap.fe.core.controls.FilterBar\": true,\n\t\t\t\t\"sap.ui.mdc.Table\": true\n\t\t\t};\n\t\t}\n\t} else {\n\t\t// build the allow list for UI Adaptation (key users)\n\t\tallowList = {\n\t\t\t\"sap.fe.templates.ObjectPage.controls.StashableVBox\": true,\n\t\t\t\"sap.fe.templates.ObjectPage.controls.StashableHBox\": true,\n\t\t\t\"sap.uxap.ObjectPageLayout\": true,\n\t\t\t\"sap.uxap.AnchorBar\": true,\n\t\t\t\"sap.uxap.ObjectPageSection\": true,\n\t\t\t\"sap.uxap.ObjectPageSubSection\": true,\n\t\t\t\"sap.ui.fl.util.IFrame\": true,\n\t\t\t\"sap.ui.layout.form.Form\": true,\n\t\t\t\"sap.ui.layout.form.FormContainer\": true,\n\t\t\t\"sap.ui.layout.form.FormElement\": true,\n\t\t\t\"sap.ui.fl.variants.VariantManagement\": true,\n\t\t\t\"sap.fe.core.controls.FilterBar\": true,\n\t\t\t\"sap.ui.mdc.Table\": true,\n\t\t\t\"sap.m.IconTabBar\": true\n\t\t};\n\t\t// currently we support the adaptation of MenuButtons only for the AnchorBar on Object Page (adaptation of sections and subsections)\n\t\tif (elementName === \"sap.m.MenuButton\" && element.getParent()?.getMetadata().getName() === \"sap.uxap.AnchorBar\") {\n\t\t\tallowList[\"sap.m.MenuButton\"] = true;\n\t\t}\n\t\t// currently we support the adaptation of Buttons only for the AnchorBar on Object Page (adaptation of sections and subsections)\n\t\tif (elementName === \"sap.m.Button\" && element.getParent()?.getMetadata().getName() === \"sap.uxap.AnchorBar\") {\n\t\t\tallowList[\"sap.m.Button\"] = true;\n\t\t}\n\t\t// the adaptation of FlexBoxes is only supported for the HeaderContainer on Object Page\n\t\tif (elementName === \"sap.m.FlexBox\" && element.getId().indexOf(\"--fe::HeaderContentContainer\") >= 0) {\n\t\t\tallowList[\"sap.m.FlexBox\"] = true;\n\t\t}\n\t}\n\treturn allowList;\n};\n\n// To enable all actions, remove the propagateMetadata function. Or, remove this file and its entry in AppComponent.js referring 'designTime'.\nconst AppComponentDesignTime = {\n\tactions: \"not-adaptable\",\n\taggregations: {\n\t\trootControl: {\n\t\t\tactions: \"not-adaptable\",\n\t\t\tpropagateMetadata: function (element: ManagedObject) {\n\t\t\t\tconst allowList = getAllowList(element);\n\t\t\t\tif (allowList[element.getMetadata().getName()]) {\n\t\t\t\t\t// by returning the empty object, the same will be merged with element's native designtime definition, i.e. all actions will be enabled for this element\n\t\t\t\t\treturn {};\n\t\t\t\t} else {\n\t\t\t\t\t// not-adaptable will be interpreted by flex to disable all actions for this element\n\t\t\t\t\treturn {\n\t\t\t\t\t\tactions: \"not-adaptable\"\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\ttool: {\n\t\tstart: function (appComponent: AppComponent) {\n\t\t\tappComponent.getEnvironmentCapabilities().setCapability(\"AppState\", false);\n\t\t},\n\t\tstop: function (appComponent: AppComponent) {\n\t\t\tappComponent.getEnvironmentCapabilities().setCapability(\"AppState\", true);\n\t\t}\n\t}\n};\n\nexport default AppComponentDesignTime;\n"],"mappings":"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"}},{"offset":{"line":103,"column":0},"map":{"version":3,"names":["sap","ui","define","_sap$ushell","_urlParams$fioriTool","_urlParams$fioriTool$","urlParserMock","parseParameters","urlParser","ushell","Container","getService","urlParams","window","location","search","fioriToolsRtaMode","toLowerCase","isOnDynamicPage","element","getMetadata","getName","parent","getParent","getAllowList","allowList","elementName","_element$getParent","_element$getParent2","getId","indexOf","AppComponentDesignTime","actions","aggregations","rootControl","propagateMetadata","tool","start","appComponent","getEnvironmentCapabilities","setCapability","stop"],"sources":["AppComponent-dbg.designtime.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,4DAAO,GAAI,WAChB,aAEA,IAAIC,EAAaC,EAAsBC,EACvC,MAAMC,EAAgB,CACpBC,gBAAiB,WACf,MAAO,CAAC,CACV,GAEF,MAAMC,GAAaL,EAAcH,IAAIS,UAAY,MAAQN,SAAqB,GAAKA,EAAYO,UAAYV,IAAIS,OAAOC,UAAUC,WAAW,cAAgBL,EAC3J,MAAMM,EAAYJ,EAAUD,gBAAgBM,OAAOC,SAASC,QAC5D,MAAMC,IAAsBZ,EAAuBQ,EAAU,2BAA6B,MAAQR,SAA8B,OAAS,GAAKC,EAAwBD,EAAqB,MAAQ,MAAQC,SAA+B,OAAS,EAAIA,EAAsBY,iBAAmB,OAChS,MAAMC,EAAkB,SAAUC,GAChC,GAAIA,EAAQC,cAAcC,YAAc,oBAAqB,CAC3D,OAAO,IACT,KAAO,CACL,MAAMC,EAASH,EAAQI,YACvB,OAAOD,EAASJ,EAAgBI,GAAU,KAC5C,CACF,EACA,MAAME,EAAe,SAAUL,GAC7B,IAAIM,EAAY,CAAC,EACjB,MAAMC,EAAcP,EAAQC,cAAcC,UAC1C,GAAIL,EAAmB,CAErB,GAAIE,EAAgBC,GAAU,CAC5BM,EAAY,CACV,uCAAwC,KACxC,iCAAkC,KAClC,mBAAoB,KAExB,CACF,KAAO,CACL,IAAIE,EAAoBC,EAExBH,EAAY,CACV,qDAAsD,KACtD,qDAAsD,KACtD,4BAA6B,KAC7B,qBAAsB,KACtB,6BAA8B,KAC9B,gCAAiC,KACjC,wBAAyB,KACzB,0BAA2B,KAC3B,mCAAoC,KACpC,iCAAkC,KAClC,uCAAwC,KACxC,iCAAkC,KAClC,mBAAoB,KACpB,mBAAoB,MAGtB,GAAIC,IAAgB,sBAAwBC,EAAqBR,EAAQI,eAAiB,MAAQI,SAA4B,OAAS,EAAIA,EAAmBP,cAAcC,aAAe,qBAAsB,CAC/MI,EAAU,oBAAsB,IAClC,CAEA,GAAIC,IAAgB,kBAAoBE,EAAsBT,EAAQI,eAAiB,MAAQK,SAA6B,OAAS,EAAIA,EAAoBR,cAAcC,aAAe,qBAAsB,CAC9MI,EAAU,gBAAkB,IAC9B,CAEA,GAAIC,IAAgB,iBAAmBP,EAAQU,QAAQC,QAAQ,iCAAmC,EAAG,CACnGL,EAAU,iBAAmB,IAC/B,CACF,CACA,OAAOA,CACT,EAGA,MAAMM,EAAyB,CAC7BC,QAAS,gBACTC,aAAc,CACZC,YAAa,CACXF,QAAS,gBACTG,kBAAmB,SAAUhB,GAC3B,MAAMM,EAAYD,EAAaL,GAC/B,GAAIM,EAAUN,EAAQC,cAAcC,WAAY,CAE9C,MAAO,CAAC,CACV,KAAO,CAEL,MAAO,CACLW,QAAS,gBAEb,CACF,IAGJI,KAAM,CACJC,MAAO,SAAUC,GACfA,EAAaC,6BAA6BC,cAAc,WAAY,MACtE,EACAC,KAAM,SAAUH,GACdA,EAAaC,6BAA6BC,cAAc,WAAY,KACtE,IAGJ,OAAOT,CACT,EAAG","sourceRoot":""}}]}