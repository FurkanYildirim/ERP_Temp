/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/helpers/TypeGuards","./AnnotationEnum"],function(e,n){"use strict";var t={};var r=n.resolveEnumValue;var a=e.isProperty;const o={"Edm.Boolean":{type:"sap.ui.model.odata.type.Boolean"},"Edm.Byte":{type:"sap.ui.model.odata.type.Byte"},"Edm.Date":{type:"sap.ui.model.odata.type.Date"},"Edm.DateTimeOffset":{constraints:{$Precision:"precision",$V4:"V4"},type:"sap.ui.model.odata.type.DateTimeOffset"},"Edm.Decimal":{constraints:{"@Org.OData.Validation.V1.Minimum/$Decimal":"minimum","@Org.OData.Validation.V1.Minimum@Org.OData.Validation.V1.Exclusive":"minimumExclusive","@Org.OData.Validation.V1.Maximum/$Decimal":"maximum","@Org.OData.Validation.V1.Maximum@Org.OData.Validation.V1.Exclusive":"maximumExclusive",$Precision:"precision",$Scale:"scale"},type:"sap.ui.model.odata.type.Decimal"},"Edm.Double":{type:"sap.ui.model.odata.type.Double"},"Edm.Guid":{type:"sap.ui.model.odata.type.Guid"},"Edm.Int16":{type:"sap.ui.model.odata.type.Int16"},"Edm.Int32":{type:"sap.ui.model.odata.type.Int32"},"Edm.Int64":{type:"sap.ui.model.odata.type.Int64"},"Edm.SByte":{type:"sap.ui.model.odata.type.SByte"},"Edm.Single":{type:"sap.ui.model.odata.type.Single"},"Edm.Stream":{type:"sap.ui.model.odata.type.Stream"},"Edm.Binary":{type:"sap.ui.model.odata.type.Stream"},"Edm.String":{constraints:{"@com.sap.vocabularies.Common.v1.IsDigitSequence":"isDigitSequence",$MaxLength:"maxLength",$Nullable:"nullable"},type:"sap.ui.model.odata.type.String"},"Edm.TimeOfDay":{constraints:{$Precision:"precision"},type:"sap.ui.model.odata.type.TimeOfDay"}};t.EDM_TYPE_MAPPING=o;const i={_type:"Unresolvable"};t.unresolvableExpression=i;function s(e){return e.replace(/'/g,"\\'")}function u(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++){n[t]=arguments[t]}return n.find(e=>e._type==="Unresolvable")!==undefined}t.hasUnresolvableExpression=u;function l(e,n){if(e._type!==n._type){return false}switch(e._type){case"Unresolvable":return false;case"Constant":case"EmbeddedBinding":case"EmbeddedExpressionBinding":return e.value===n.value;case"Not":return l(e.operand,n.operand);case"Truthy":return l(e.operand,n.operand);case"Set":return e.operator===n.operator&&e.operands.length===n.operands.length&&e.operands.every(e=>n.operands.some(n=>l(e,n)));case"IfElse":return l(e.condition,n.condition)&&l(e.onTrue,n.onTrue)&&l(e.onFalse,n.onFalse);case"Comparison":return e.operator===n.operator&&l(e.operand1,n.operand1)&&l(e.operand2,n.operand2);case"Concat":const t=e.expressions;const r=n.expressions;if(t.length!==r.length){return false}return t.every((e,n)=>l(e,r[n]));case"Length":return l(e.pathInModel,n.pathInModel);case"PathInModel":return e.modelName===n.modelName&&e.path===n.path&&e.targetEntitySet===n.targetEntitySet;case"Formatter":return e.fn===n.fn&&e.parameters.length===n.parameters.length&&e.parameters.every((e,t)=>l(n.parameters[t],e));case"ComplexType":return e.type===n.type&&e.bindingParameters.length===n.bindingParameters.length&&e.bindingParameters.every((e,t)=>l(n.bindingParameters[t],e));case"Function":const a=n;if(e.obj===undefined||a.obj===undefined){return e.obj===a}return e.fn===a.fn&&l(e.obj,a.obj)&&e.parameters.length===a.parameters.length&&e.parameters.every((e,n)=>l(a.parameters[n],e));case"Ref":return e.ref===n.ref}return false}t._checkExpressionsAreEqual=l;function d(e){return e.operands.reduce((n,t)=>{const r=t._type==="Set"&&t.operator===e.operator?t.operands:[t];r.forEach(e=>{if(n.operands.every(n=>!l(n,e))){n.operands.push(e)}});return n},{_type:"Set",operator:e.operator,operands:[]})}function p(e){const n=e.map(m);return e.some((e,t)=>{for(let r=t+1;r<n.length;r++){if(l(e,n[r])){return true}}return false})}function f(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++){n[t]=arguments[t]}const r=d({_type:"Set",operator:"&&",operands:n.map(E)}).operands;if(u(...r)){return i}let a=false;const o=r.filter(e=>{if(x(e)){a=true}return!I(e)});if(a){return g(false)}else if(o.length===0){const e=r.reduce((e,n)=>e&&_(n),true);return g(e)}else if(o.length===1){return o[0]}else if(p(o)){return g(false)}else{return{_type:"Set",operator:"&&",operands:o}}}t.and=f;function c(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++){n[t]=arguments[t]}const r=d({_type:"Set",operator:"||",operands:n.map(E)}).operands;if(u(...r)){return i}let a=false;const o=r.filter(e=>{if(_(e)){a=true}return!I(e)||e.value});if(a){return g(true)}else if(o.length===0){const e=r.reduce((e,n)=>e&&_(n),true);return g(e)}else if(o.length===1){return o[0]}else if(p(o)){return g(true)}else{return{_type:"Set",operator:"||",operands:o}}}t.or=c;function m(e){e=E(e);if(u(e)){return i}else if(I(e)){return g(!e.value)}else if(typeof e==="object"&&e._type==="Set"&&e.operator==="||"&&e.operands.every(e=>I(e)||S(e))){return f(...e.operands.map(e=>m(e)))}else if(typeof e==="object"&&e._type==="Set"&&e.operator==="&&"&&e.operands.every(e=>I(e)||S(e))){return c(...e.operands.map(e=>m(e)))}else if(S(e)){switch(e.operator){case"!==":return{...e,operator:"==="};case"<":return{...e,operator:">="};case"<=":return{...e,operator:">"};case"===":return{...e,operator:"!=="};case">":return{...e,operator:"<="};case">=":return{...e,operator:"<"}}}else if(e._type==="Not"){return e.operand}return{_type:"Not",operand:e}}t.not=m;function y(e){if(I(e)){return g(!!e.value)}else{return{_type:"Truthy",operand:e}}}t.isTruthy=y;function v(e,n){let t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let r=arguments.length>3?arguments[3]:undefined;return h(e,n,t,r)}t.bindingExpression=v;function h(e,n){let t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let r=arguments.length>3?arguments[3]:undefined;if(e===undefined){return i}let a;if(r){a=r(e);if(a===undefined){return i}}else{const n=t.concat();n.push(e);a=n.join("/")}return{_type:"PathInModel",modelName:n,path:a}}t.pathInModel=h;function g(e){let n;if(typeof e==="object"&&e!==null&&e!==undefined){if(Array.isArray(e)){n=e.map(E)}else if(N(e)){n=e.valueOf()}else{n=Object.entries(e).reduce((e,n)=>{let[t,r]=n;const a=E(r);if(a._type!=="Constant"||a.value!==undefined){e[t]=a}return e},{})}}else{n=e}return{_type:"Constant",value:n}}t.constant=g;function $(e,n){if(e!==undefined&&typeof e==="string"&&e.startsWith("{")){const n=/^{(.*)>(.+)}$/;const t=n.exec(e);if(e.startsWith("{=")){return{_type:"EmbeddedExpressionBinding",value:e}}else if(t){return h(t[2]||"",t[1]||undefined)}else{return{_type:"EmbeddedBinding",value:e}}}else if(n==="boolean"&&typeof e==="string"&&(e==="true"||e==="false")){return g(e==="true")}else if(n==="number"&&typeof e==="string"&&(!isNaN(Number(e))||e==="NaN")){return g(Number(e))}else{return g(e)}}t.resolveBindingString=$;function b(e){return{_type:"Ref",ref:e}}t.ref=b;function E(e){if(O(e)){return e}return g(e)}function O(e){return(e===null||e===void 0?void 0:e._type)!==undefined}t.isBindingToolkitExpression=O;function I(e){return typeof e!=="object"||e._type==="Constant"}t.isConstant=I;function _(e){return I(e)&&e.value===true}function x(e){return I(e)&&e.value===false}function C(e){return(e===null||e===void 0?void 0:e._type)==="PathInModel"}t.isPathInModelExpression=C;function P(e){return(e===null||e===void 0?void 0:e._type)==="ComplexType"}t.isComplexTypeExpression=P;function F(e){return(e===null||e===void 0?void 0:e._type)==="Concat"}function S(e){return e._type==="Comparison"}function T(e){const n=e;return(n===null||n===void 0?void 0:n._type)==="Constant"&&(n===null||n===void 0?void 0:n.value)===undefined}t.isUndefinedExpression=T;function N(e){switch(e.constructor.name){case"String":case"Number":case"Boolean":return true;default:return false}}function M(e){return typeof e==="object"&&!N(e)}function w(e){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let t=arguments.length>2?arguments[2]:undefined;let r=arguments.length>3?arguments[3]:undefined;return D(e,n,t,r)}t.annotationExpression=w;function D(e){var n;let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let r=arguments.length>2?arguments[2]:undefined;let a=arguments.length>3?arguments[3]:undefined;if(e===undefined){return E(r)}e=(n=e)===null||n===void 0?void 0:n.valueOf();if(!M(e)){return g(e)}switch(e.type){case"Path":return h(e.path,undefined,t,a);case"If":return j(e.If,t,a);case"Not":return m(A(e.Not,t,a));case"Eq":return q(A(e.Eq[0],t,a),A(e.Eq[1],t,a));case"Ne":return G(A(e.Ne[0],t,a),A(e.Ne[1],t,a));case"Gt":return Y(A(e.Gt[0],t,a),A(e.Gt[1],t,a));case"Ge":return U(A(e.Ge[0],t,a),A(e.Ge[1],t,a));case"Lt":return R(A(e.Lt[0],t,a),A(e.Lt[1],t,a));case"Le":return W(A(e.Le[0],t,a),A(e.Le[1],t,a));case"Or":return c(...e.Or.map(function(e){return A(e,t,a)}));case"And":return f(...e.And.map(function(e){return A(e,t,a)}));case"Apply":return L(e,t,a)}return i}t.getExpressionFromAnnotation=D;function A(e){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let t=arguments.length>2?arguments[2]:undefined;if(e===null||typeof e!=="object"){return g(e)}else if(e.hasOwnProperty("$Or")){return c(...e.$Or.map(function(e){return A(e,n,t)}))}else if(e.hasOwnProperty("$And")){return f(...e.$And.map(function(e){return A(e,n,t)}))}else if(e.hasOwnProperty("$Not")){return m(A(e.$Not,n,t))}else if(e.hasOwnProperty("$Eq")){return q(A(e.$Eq[0],n,t),A(e.$Eq[1],n,t))}else if(e.hasOwnProperty("$Ne")){return G(A(e.$Ne[0],n,t),A(e.$Ne[1],n,t))}else if(e.hasOwnProperty("$Gt")){return Y(A(e.$Gt[0],n,t),A(e.$Gt[1],n,t))}else if(e.hasOwnProperty("$Ge")){return U(A(e.$Ge[0],n,t),A(e.$Ge[1],n,t))}else if(e.hasOwnProperty("$Lt")){return R(A(e.$Lt[0],n,t),A(e.$Lt[1],n,t))}else if(e.hasOwnProperty("$Le")){return W(A(e.$Le[0],n,t),A(e.$Le[1],n,t))}else if(e.hasOwnProperty("$Path")){return h(e.$Path,undefined,n,t)}else if(e.hasOwnProperty("$Apply")){return D({type:"Apply",Function:e.$Function,Apply:e.$Apply},n,undefined,t)}else if(e.hasOwnProperty("$If")){return D({type:"If",If:e.$If},n,undefined,t)}else if(e.hasOwnProperty("$EnumMember")){return g(r(e.$EnumMember))}return g(false)}function j(e){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let t=arguments.length>2?arguments[2]:undefined;return Q(A(e[0],n,t),A(e[1],n,t),A(e[2],n,t))}t.annotationIfExpression=j;function V(e){let n=e;if(e.hasOwnProperty("$Path")){n={type:"Path",path:e.$Path}}else if(e.hasOwnProperty("$If")){n={type:"If",If:e.$If}}else if(e.hasOwnProperty("$Apply")){n={type:"Apply",Function:e.$Function,Apply:e.$Apply}}return n}function L(e){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let t=arguments.length>2?arguments[2]:undefined;switch(e.Function){case"odata.concat":return re(...e.Apply.map(e=>D(V(e),n,undefined,t)));case"odata.uriEncode":const r=D(V(e.Apply[0]),n,undefined,t);return ne("odata.uriEncode",[r,"Edm.String"],undefined,true);case"odata.fillUriTemplate":const a=e.Apply[0];const o=e.Apply.slice(1);const i={};o.forEach(e=>{i[e.$Name]=D(V(e.$LabeledElement),n,undefined,t)});return ne("odata.fillUriTemplate",[a,i],undefined,true)}return i}t.annotationApplyExpression=L;function k(e,n,t){const r=E(n);const a=E(t);if(u(r,a)){return i}if(I(r)&&I(a)){switch(e){case"!==":return g(r.value!==a.value);case"===":return g(r.value===a.value);case"<":return g(r.value<a.value);case"<=":return g(r.value<=a.value);case">":return g(r.value>a.value);case">=":return g(r.value>=a.value)}}else{return{_type:"Comparison",operator:e,operand1:r,operand2:a}}}function B(e){if(e._type==="Unresolvable"){return e}return{_type:"Length",pathInModel:e}}t.length=B;function q(e,n){const t=E(e);const r=E(n);if(u(t,r)){return i}if(l(t,r)){return g(true)}function a(e,n){if(e._type==="Comparison"&&_(n)){return e}else if(e._type==="Comparison"&&x(n)){return m(e)}else if(e._type==="IfElse"&&l(e.onTrue,n)){return c(e.condition,q(e.onFalse,n))}else if(e._type==="IfElse"&&l(e.onFalse,n)){return c(m(e.condition),q(e.onTrue,n))}else if(e._type==="IfElse"&&I(e.onTrue)&&I(e.onFalse)&&I(n)&&!l(e.onTrue,n)&&!l(e.onFalse,n)){return g(false)}return undefined}const o=a(t,r)??a(r,t);return o??k("===",t,r)}t.equal=q;function G(e,n){return m(q(e,n))}t.notEqual=G;function U(e,n){return k(">=",e,n)}t.greaterOrEqual=U;function Y(e,n){return k(">",e,n)}t.greaterThan=Y;function W(e,n){return k("<=",e,n)}t.lessOrEqual=W;function R(e,n){return k("<",e,n)}t.lessThan=R;function Q(e,n,t){let r=E(e);let a=E(n);let o=E(t);if(u(r,a,o)){return i}if(r._type==="Not"){[a,o]=[o,a];r=m(r)}if(a._type==="IfElse"&&l(r,a.condition)){a=a.onTrue}if(o._type==="IfElse"&&l(r,o.condition)){o=o.onFalse}if(I(r)){return r.value?a:o}if(l(a,o)){return a}if(x(o)){return f(r,a)}if(_(o)){return c(m(r),a)}if(x(a)){return f(m(r),o)}if(_(a)){return c(r,o)}if(P(e)||P(n)||P(t)){let r=0;const a=K([e,n,t],"sap.fe.core.formatters.StandardFormatter#ifElse");const o=[];ae(a,"PathInModel",e=>{o.push(e);return h(`$${r++}`,"$")},true);o.unshift(g(JSON.stringify(a)));return K(o,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}return{_type:"IfElse",condition:r,onTrue:a,onFalse:o}}t.ifElse=Q;function J(e){switch(e._type){case"Constant":case"Formatter":case"ComplexType":return false;case"Set":return e.operands.some(J);case"PathInModel":return e.modelName===undefined;case"Comparison":return J(e.operand1)||J(e.operand2);case"IfElse":return J(e.condition)||J(e.onTrue)||J(e.onFalse);case"Not":case"Truthy":return J(e.operand);default:return false}}function K(e,n,t){let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const a=e.map(E);if(u(...a)){return i}if(t){if(!a.some(J)){t.keys.forEach(e=>a.push(h(e.name,"")))}}let o="";if(typeof n==="string"){o=n}else{o=n.__functionName}const[s,l]=o.split("#");if(!r&&(a.some(P)||a.some(F))){let e=0;const n=K(a,o,undefined,true);const t=[];ae(n,"PathInModel",n=>{t.push(n);return h(`$${e++}`,"$")});t.unshift(g(JSON.stringify(n)));return K(t,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}else if(!!l&&l.length>0){a.unshift(g(l))}return{_type:"Formatter",fn:s,parameters:a}}t.formatResult=K;function z(e,n){var t,r,a,o,i,s,u,l,d,p,f,c,m;const y={};if(e!==null&&e!==void 0&&(t=e.constraints)!==null&&t!==void 0&&t.$Scale&&n.scale!==undefined){y.scale=n.scale}if(e!==null&&e!==void 0&&(r=e.constraints)!==null&&r!==void 0&&r.$Precision&&n.precision!==undefined){y.precision=n.precision}if(e!==null&&e!==void 0&&(a=e.constraints)!==null&&a!==void 0&&a.$MaxLength&&n.maxLength!==undefined){y.maxLength=n.maxLength}if(n.nullable===false){y.nullable=false}if(e!==null&&e!==void 0&&(o=e.constraints)!==null&&o!==void 0&&o["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN((i=n.annotations)===null||i===void 0?void 0:(s=i.Validation)===null||s===void 0?void 0:s.Minimum)){var v,h;y.minimum=`${(v=n.annotations)===null||v===void 0?void 0:(h=v.Validation)===null||h===void 0?void 0:h.Minimum}`}if(e!==null&&e!==void 0&&(u=e.constraints)!==null&&u!==void 0&&u["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN((l=n.annotations)===null||l===void 0?void 0:(d=l.Validation)===null||d===void 0?void 0:d.Maximum)){var g,$;y.maximum=`${(g=n.annotations)===null||g===void 0?void 0:($=g.Validation)===null||$===void 0?void 0:$.Maximum}`}if((p=n.annotations)!==null&&p!==void 0&&(f=p.Common)!==null&&f!==void 0&&f.IsDigitSequence&&e.type==="sap.ui.model.odata.type.String"&&e!==null&&e!==void 0&&(c=e.constraints)!==null&&c!==void 0&&c["@com.sap.vocabularies.Common.v1.IsDigitSequence"]){y.isDigitSequence=true}if(e!==null&&e!==void 0&&(m=e.constraints)!==null&&m!==void 0&&m.$V4){y.V4=true}return y}t.setUpConstraints=z;function H(e,n){var t;let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const i=n;if(e._type!=="Property"&&e._type!=="ActionParameter"){return i}const s=o[e.type];if(!s){return i}if(!i.formatOptions){i.formatOptions={}}i.constraints={};i.type=s.type;if(!r){i.constraints=z(s,e)}if((i===null||i===void 0?void 0:(t=i.type)===null||t===void 0?void 0:t.indexOf("sap.ui.model.odata.type.Int"))===0&&(i===null||i===void 0?void 0:i.type)!=="sap.ui.model.odata.type.Int64"||(i===null||i===void 0?void 0:i.type)==="sap.ui.model.odata.type.Double"){i.formatOptions=Object.assign(i.formatOptions,{parseAsString:false})}if(i.type==="sap.ui.model.odata.type.String"&&a(e)){i.formatOptions.parseKeepsEmptyString=true;const n=X(e);if(n){i.formatOptions.fiscalType=n;i.type="sap.fe.core.type.FiscalDate"}}if(i.type==="sap.ui.model.odata.type.Decimal"||(i===null||i===void 0?void 0:i.type)==="sap.ui.model.odata.type.Int64"){i.formatOptions=Object.assign(i.formatOptions,{emptyString:""})}return i}t.formatWithTypeInformation=H;const X=function(e){var n,t,r,a,o,i,s,u,l,d,p,f,c,m,y,v;if((n=e.annotations)!==null&&n!==void 0&&(t=n.Common)!==null&&t!==void 0&&t.IsFiscalYear){return"com.sap.vocabularies.Common.v1.IsFiscalYear"}if((r=e.annotations)!==null&&r!==void 0&&(a=r.Common)!==null&&a!==void 0&&a.IsFiscalPeriod){return"com.sap.vocabularies.Common.v1.IsFiscalPeriod"}if((o=e.annotations)!==null&&o!==void 0&&(i=o.Common)!==null&&i!==void 0&&i.IsFiscalYearPeriod){return"com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"}if((s=e.annotations)!==null&&s!==void 0&&(u=s.Common)!==null&&u!==void 0&&u.IsFiscalQuarter){return"com.sap.vocabularies.Common.v1.IsFiscalQuarter"}if((l=e.annotations)!==null&&l!==void 0&&(d=l.Common)!==null&&d!==void 0&&d.IsFiscalYearQuarter){return"com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"}if((p=e.annotations)!==null&&p!==void 0&&(f=p.Common)!==null&&f!==void 0&&f.IsFiscalWeek){return"com.sap.vocabularies.Common.v1.IsFiscalWeek"}if((c=e.annotations)!==null&&c!==void 0&&(m=c.Common)!==null&&m!==void 0&&m.IsFiscalYearWeek){return"com.sap.vocabularies.Common.v1.IsFiscalYearWeek"}if((y=e.annotations)!==null&&y!==void 0&&(v=y.Common)!==null&&v!==void 0&&v.IsDayOfFiscalYear){return"com.sap.vocabularies.Common.v1.IsDayOfFiscalYear"}};t.getFiscalType=X;function Z(e,n,t,r){const a=e.map(E);if(u(...a)){return i}if(a.length===1&&I(a[0])&&!t){return a[0]}else if(t){if(!a.some(J)){t.keys.forEach(e=>a.push(h(e.name,"")))}}r=ee(e[0],r);if(n==="sap.ui.model.odata.type.Unit"){const e=h("/##@@requestUnitsOfMeasure");e.targetType="any";e.mode="OneTime";a.push(e)}else if(n==="sap.ui.model.odata.type.Currency"){const e=h("/##@@requestCurrencyCodes");e.targetType="any";e.mode="OneTime";a.push(e)}return{_type:"ComplexType",type:n,formatOptions:r||{},parameters:{},bindingParameters:a}}t.addTypeInformation=Z;function ee(e,n){var t,r;if(!(n&&n.showNumber===false)&&((e===null||e===void 0?void 0:(t=e.type)===null||t===void 0?void 0:t.indexOf("sap.ui.model.odata.type.Int"))===0||(e===null||e===void 0?void 0:e.type)==="sap.ui.model.odata.type.Decimal"||(e===null||e===void 0?void 0:e.type)==="sap.ui.model.odata.type.Double")){if((e===null||e===void 0?void 0:e.type)==="sap.ui.model.odata.type.Int64"||(e===null||e===void 0?void 0:e.type)==="sap.ui.model.odata.type.Decimal"){var a;n=((a=n)===null||a===void 0?void 0:a.showMeasure)===false?{emptyString:"",showMeasure:false}:{emptyString:""}}else{var o;n=((o=n)===null||o===void 0?void 0:o.showMeasure)===false?{parseAsString:false,showMeasure:false}:{parseAsString:false}}}if((e===null||e===void 0?void 0:(r=e.constraints)===null||r===void 0?void 0:r.nullable)!==false){var i;(i=n)===null||i===void 0?true:delete i.emptyString}return n}function ne(e,n,t){let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const a=typeof e==="string"?e:e.__functionName;return{_type:"Function",obj:t!==undefined?E(t):undefined,fn:a,isFormattingFn:r,parameters:n.map(E)}}t.fn=ne;function te(e){const n=[];ae(e,"PathInModel",e=>{n.push(c(q(e,""),q(e,undefined),q(e,null)));return e});return f(...n)}t.isEmpty=te;function re(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++){n[t]=arguments[t]}const r=n.map(E);if(u(...r)){return i}if(r.every(I)){return g(r.reduce((e,n)=>{if(n.value!==undefined){return e+n.value.toString()}return e},""))}else if(r.some(P)){let e=0;const n=K(r,"sap.fe.core.formatters.StandardFormatter#concat",undefined,true);const t=[];ae(n,"PathInModel",n=>{t.push(n);return h(`$${e++}`,"$")});t.unshift(g(JSON.stringify(n)));return K(t,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}return{_type:"Concat",expressions:r}}t.concat=re;function ae(e,n,t){let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let a=e;switch(a._type){case"Function":case"Formatter":a.parameters=a.parameters.map(e=>ae(e,n,t,r));break;case"Concat":a.expressions=a.expressions.map(e=>ae(e,n,t,r));a=re(...a.expressions);break;case"ComplexType":a.bindingParameters=a.bindingParameters.map(e=>ae(e,n,t,r));break;case"IfElse":const e=ae(a.onTrue,n,t,r);const o=ae(a.onFalse,n,t,r);let i=a.condition;if(r){i=ae(a.condition,n,t,r)}a=Q(i,e,o);break;case"Not":if(r){const e=ae(a.operand,n,t,r);a=m(e)}break;case"Truthy":break;case"Set":if(r){const e=a.operands.map(e=>ae(e,n,t,r));a=a.operator==="||"?c(...e):f(...e)}break;case"Comparison":if(r){const e=ae(a.operand1,n,t,r);const o=ae(a.operand2,n,t,r);a=k(a.operator,e,o)}break;case"Constant":const s=a.value;if(typeof s==="object"&&s){Object.keys(s).forEach(e=>{s[e]=ae(s[e],n,t,r)})}break;case"Ref":case"Length":case"PathInModel":case"EmbeddedBinding":case"EmbeddedExpressionBinding":case"Unresolvable":break}if(n===a._type){a=t(e)}return a}t.transformRecursively=ae;const oe=function(e){return!I(e)&&!C(e)&&O(e)&&e._type!=="IfElse"&&e._type!=="Function"};function ie(e){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(n&&Object.keys(e.value).length===0){return""}const t=e.value;const r=[];Object.keys(t).forEach(e=>{const a=t[e];const o=pe(a,true,false,n);if(o&&o.length>0){r.push(`${e}: ${o}`)}});return`{${r.join(", ")}}`}function se(e,n){let t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(e.value===null){return r?null:"null"}if(e.value===undefined){return r?undefined:"undefined"}if(typeof e.value==="object"){if(Array.isArray(e.value)){const n=e.value.map(e=>pe(e,true));return`[${n.join(", ")}]`}else{return ie(e,t)}}if(n){switch(typeof e.value){case"number":case"bigint":case"boolean":return e.value.toString();case"string":return`'${s(e.value.toString())}'`;default:return""}}else{return r?e.value:e.value.toString()}}t.compileConstant=se;function ue(e,n,t){if(e.type||e.parameters||e.targetType||e.formatOptions||e.constraints){const r={path:ve(e),type:e.type,targetType:e.targetType,parameters:e.parameters,formatOptions:e.formatOptions,constraints:e.constraints};const a=pe(r,false,false,true);if(n){return`${t}${a}`}return a}else if(n){return`${t}{${ve(e)}}`}else{return`{${ve(e)}}`}}function le(e){if(e.bindingParameters.length===1){return`{${me(e.bindingParameters[0],true)}, type: '${e.type}'}`}let n=`], type: '${e.type}'`;if(ye(e.formatOptions)){n+=`, formatOptions: ${pe(e.formatOptions)}`}if(ye(e.parameters)){n+=`, parameters: ${pe(e.parameters)}`}n+="}";return`{mode:'TwoWay', parts:[${e.bindingParameters.map(e=>me(e)).join(",")}${n}`}function de(e,n){let t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(n){if(t){return`(${e})`}else{return e}}else{return`{= ${e}}`}}t.wrapBindingExpression=de;function pe(e){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const a=E(e);const o=t?"$":"%";switch(a._type){case"Unresolvable":return undefined;case"Constant":return se(a,n,r);case"Ref":return a.ref||"null";case"Function":let e=false;if(a.isFormattingFn){ae(a,"Function",n=>{if(n!==a&&n.obj===undefined){e=true}return n},true);ae(a,"Constant",n=>{if(n!==a&&typeof n.value==="object"){ae(n,"PathInModel",n=>{e=true;return n})}return n},true)}const i=`${a.parameters.map(e=>pe(e,true)).join(", ")}`;let s=a.obj===undefined?`${a.fn}(${i})`:`${pe(a.obj,true)}.${a.fn}(${i})`;if(!n&&e){s=`{= ${s}}`}return s;case"EmbeddedExpressionBinding":return n?`(${a.value.substring(2,a.value.length-1)})`:`${a.value}`;case"EmbeddedBinding":return n?`${o}${a.value}`:`${a.value}`;case"PathInModel":return ue(a,n,o);case"Comparison":const u=fe(a);return de(u,n);case"IfElse":const l=`${pe(a.condition,true)} ? ${pe(a.onTrue,true,t)} : ${pe(a.onFalse,true,t)}`;return de(l,n,true);case"Set":const d=a.operands.map(e=>pe(e,true)).join(` ${a.operator} `);return de(d,n,true);case"Concat":const p=a.expressions.map(e=>pe(e,true,true)).join(" + ");return de(p,n);case"Length":const f=`${pe(a.pathInModel,true)}.length`;return de(f,n);case"Not":const c=`!${pe(a.operand,true)}`;return de(c,n);case"Truthy":const m=`!!${pe(a.operand,true)}`;return de(m,n);case"Formatter":const y=ce(a);return n?`$${y}`:y;case"ComplexType":const v=le(a);return n?`$${v}`:v;default:return""}}t.compileExpression=pe;function fe(e){function n(e){const n=pe(e,true)??"undefined";return de(n,true,oe(e))}return`${n(e.operand1)} ${e.operator} ${n(e.operand2)}`}function ce(e){if(e.parameters.length===1){return`{${me(e.parameters[0],true)}, formatter: '${e.fn}'}`}else{const n=e.parameters.map(e=>{if(e._type==="ComplexType"){return le(e)}else{return me(e)}});return`{parts: [${n.join(", ")}], formatter: '${e.fn}'}`}}function me(e){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let t="";if(e._type==="Constant"){if(e.value===undefined){t=`value: 'undefined'`}else{t=`value: ${se(e,true)}`}}else if(e._type==="PathInModel"){t=`path: '${ve(e)}'`;t+=e.type?`, type: '${e.type}'`:`, targetType: 'any'`;if(ye(e.mode)){t+=`, mode: '${pe(e.mode)}'`}if(ye(e.constraints)){t+=`, constraints: ${pe(e.constraints)}`}if(ye(e.formatOptions)){t+=`, formatOptions: ${pe(e.formatOptions)}`}if(ye(e.parameters)){t+=`, parameters: ${pe(e.parameters)}`}}else{return""}return n?t:`{${t}}`}function ye(e){return e&&Object.keys(e).length>0}function ve(e){return`${e.modelName?`${e.modelName}>`:""}${e.path}`}return t},false);
//# sourceMappingURL=BindingToolkit.js.map