{"version":3,"file":"library-preload.js","sections":[{"offset":{"line":1,"column":0},"map":{"version":3,"names":["NavError","errorCode","_sErrorCode","getErrorCode","BaseObject","UI5Class","extend","prototype"],"sourceRoot":"","sources":["NavError.ts"],"sourcesContent":["import BaseObject from \"sap/ui/base/Object\";\n\n/**\n * This is the successor of {@link sap.ui.generic.app.navigation.service.NavError}.<br> An object that provides error handling information during runtime.\n *\n * @public\n * @class\n * @param {string} errorCode The code for an internal error of a consumer that allows you to track the source locations\n * @extends sap.ui.base.Object\n * @since 1.83.0\n * @name sap.fe.navigation.NavError\n */\nexport class NavError extends BaseObject {\n\tprivate _sErrorCode: string;\n\n\t/**\n\t * Constructor requiring the error code as input.\n\t *\n\t * @param errorCode String based error code.\n\t */\n\tpublic constructor(errorCode: string) {\n\t\tsuper();\n\t\tthis._sErrorCode = errorCode;\n\t}\n\n\t/**\n\t * Returns the error code with which the instance has been created.\n\t *\n\t * @public\n\t * @returns {string} The error code of the error\n\t */\n\tpublic getErrorCode(): string {\n\t\treturn this._sErrorCode;\n\t}\n}\n\n// Exporting the class as properly typed UI5Class\nconst UI5Class = BaseObject.extend(\"sap.fe.navigation.NavError\", NavError.prototype as any) as typeof NavError;\ntype UI5Class = InstanceType<typeof NavError>;\nexport default UI5Class;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EATA,IAUaA,QAAQ;IAAA;IAGpB;AACD;AACA;AACA;AACA;IACC,kBAAmBC,SAAiB,EAAE;MAAA;MACrC,8BAAO;MACP,MAAKC,WAAW,GAAGD,SAAS;MAAC;IAC9B;;IAEA;AACD;AACA;AACA;AACA;AACA;IALC;IAAA;IAAA,OAMOE,YAAY,GAAnB,wBAA8B;MAC7B,OAAO,IAAI,CAACD,WAAW;IACxB,CAAC;IAAA;EAAA,EArB4BE,UAAU,GAwBxC;EAAA;EACA,MAAMC,QAAQ,GAAGD,UAAU,CAACE,MAAM,CAAC,4BAA4B,EAAEN,QAAQ,CAACO,SAAS,CAA2B;EAAC,OAEhGF,QAAQ;AAAA"}},{"offset":{"line":52,"column":0},"map":{"version":3,"names":["sap","ui","define","BaseObject","_exports","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","NavError","_BaseObject","errorCode","_this","call","this","_sErrorCode","_proto","getErrorCode","UI5Class","extend"],"sources":["NavError-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,wCAAO,CAAC,sBAAuB,SAAUC,GAC9C,aAEA,IAAIC,EAAW,CAAC,EAChB,SAASC,EAAeC,EAAUC,GAAcD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAAYF,EAASE,UAAUG,YAAcL,EAAUM,EAAgBN,EAAUC,EAAa,CAC5L,SAASK,EAAgBC,EAAGC,GAAKF,EAAkBH,OAAOM,eAAiBN,OAAOM,eAAeC,OAAS,SAASJ,EAAgBC,EAAGC,GAAKD,EAAEI,UAAYH,EAAG,OAAOD,CAAG,EAAG,OAAOD,EAAgBC,EAAGC,EAAI,CAWvM,IAAII,EAAwB,SAAUC,GACpCd,EAAea,EAAUC,GAMzB,SAASD,EAASE,GAChB,IAAIC,EACJA,EAAQF,EAAYG,KAAKC,OAASA,KAClCF,EAAMG,YAAcJ,EACpB,OAAOC,CACT,CAQAjB,EAASc,SAAWA,EACpB,IAAIO,EAASP,EAASV,UACtBiB,EAAOC,aAAe,SAASA,IAC7B,OAAOH,KAAKC,WACd,EACA,OAAON,CACT,CA1B4B,CA0B1Bf,GACFC,EAASc,SAAWA,EACpB,MAAMS,EAAWxB,EAAWyB,OAAO,6BAA8BV,EAASV,WAC1E,OAAOmB,CACT,EAAG","sourceRoot":""}},{"offset":{"line":57,"column":0},"map":{"version":3,"names":["NavType","NavLibrary","ParamHandlingMode","SuppressionBehavior","Mode","IAPP_STATE","DEFAULTED_PARAMETER_PROPERTY","HYBRID_IAPP_STATE_KEY","NavigationHandler","oController","sMode","sParamHandlingMode","_aTechnicalParamaters","_oLastSavedInnerAppData","sAppStateKey","oAppData","iCacheHit","iCacheMiss","_rIAppStateOld","RegExp","_rIAppStateOldAtStart","_rIAppStateNew","NavError","UIComponent","oRouter","getRouter","oComponent","getOwnerComponent","_getRouter","getAppComponent","getComponentData","URLParamWins","InsertInSelOpt","SelVarWins","ODataV2","_sMode","_getAppNavigationService","sap","ushell","Container","getService","_getAppNavigationServiceAsync","getServiceAsync","then","oCrossAppNavService","catch","Log","error","getRouterFor","registerNavigateCallback","fnCallback","_navigateCallback","navigate","sSemanticObject","sActionName","vNavigationParameters","oInnerAppData","fnOnError","oExternalAppData","sNavMode","sSelectionVariant","mParameters","oXAppDataObj","oStartupParameters","bExPlace","oTmpData","oNavHandler","oComponentData","startupParameters","length","undefined","oEnrichedSelVar","_splitInboundNavigationParameters","SelectionVariant","oNavigationSelVar","toJSONString","selectionVariant","_removeTechnicalParameters","toJSONObject","_removeMeasureBasedInformation","_checkIsPotentiallySensitive","_getURLParametersFromSelectionVariant","oNavArguments","target","semanticObject","action","params","fnNavigate","fnNavExplace","sNewHrefPromise","hrefForExternalAsync","sNewHref","openWindow","oError","_fnSaveAppStateAsync","oSaveAppStateReturn","appStateKey","ptoExt","toExternal","fnStoreAndNavigate","storeInnerAppStateAsync","replaceHash","oSupportedPromise","isNavigationSupported","done","oTargets","supported","fail","_createTechnicalError","parseNavigation","sAppHash","HashChanger","getInstance","getHash","sIAppState","_getInnerAppStateKey","warning","hybridIAppStateKeyParams","hybridDeferred","jQuery","Deferred","iAppStateHybridDeferred","_loadAppState","hybrid","aDefaultedParameters","JSON","parse","oMyDeferred","parseUrlParams","oSubStartupParameters","aSubDefaultedParameters","oSubMyDeferred","sNavType","oSelVars","isEmpty","oDefaultedSelVar","xAppState","reject","resolve","initial","oAppStateData","oSelectionVariant","oDefaultedSelectionVariant","bNavSelVarHasDefaultsOnly","successHandlerHybridState","iAppStateData","_ref","navType","iAppState","failureHandlerHybridState","bIsXappStateNavigation","that","oStartupPromise","getStartupAppState","oAppState","getData","stringify","x","promise","oSelVar","URLParams","setTechnicalParameters","aTechnicalParameters","Array","isArray","getTechnicalParameters","concat","_isTechnicalParameter","sParameterName","toLowerCase","indexOf","_isFEParameter","sPropName","i","aSelVarPropNames","getSelectOptionsPropertyNames","removeSelectOption","oStartupParametersAdjusted","hasOwnProperty","getParameterNames","massAddSelectOption","getValue","_addParameterValues","aPropNames","oSelVariant","sSign","sOption","oValues","addSelectOption","oHashChanger","sAppHashOld","sAppHashNew","_replaceInnerAppStateKey","mInnerAppData","bImmediateHashReplace","bSkipHashReplace","fnReplaceHash","isEmptyObject","sAppStateKeyCached","bInnerAppDataEqual","fnOnAfterSave","_saveAppStateAsync","storeInnerAppState","_saveAppState","storeInnerAppStateWithImmediateReturn","oAppStatePromise","processBeforeSmartLinkPopoverOpens","oTableEventParameters","mSemanticAttributes","semanticAttributes","fnStoreXappAndCallOpen","mSubSemanticAttributes","sSubSelectionVariant","iSuppressionBehavior","raiseErrorOnNull","raiseErrorOnUndefined","oMixedSelVar","mixAttributesAndSelectionVariant","fnOnContainerSave","setSemanticAttributes","setAppStateKey","open","oStoreInnerAppStatePromise","_getAppStateKeyAndUrlParameters","_mixAttributesToSelVariant","sPropertyName","vSemanticAttributeValue","Date","toJSON","toString","ignoreEmptyString","info","String","vSemanticAttributes","oNewSelVariant","filterUrl","getFilterContextUrl","setFilterContextUrl","contextUrl","getParameterContextUrl","setParameterContextUrl","forEach","aParameters","getSelectOption","getParameter","aSelOptionNames","aSelectOption","j","Sign","Option","Low","High","_ensureSelectionVariantFormatString","vSelectionVariant","vConvertedSelectionVariant","_fnHandleAppStatePromise","oReturn","_saveAppStateWithImmediateReturn","_fnSaveAppStateWithImmediateReturn","getKey","oAppDataForSave","_fetchAppDataForSave","setData","oSavePromise","save","extend","tableVariantId","customData","presentationVariant","valueTexts","semanticDates","oAppDataClone","Object","assign","merge","createEmptyAppStateAsync","createEmptyAppState","oDeferred","getAppState","oAppDataLoaded","data","aMatches","exec","sNewIAppState","fnAppendToQueryParameter","sSubAppHash","test","replace","sNeedle","fnReplaceOldApproach","rOldApproach","assert","mURLParameters","aSelectProperties","aSelectOptions","aParameterNames","sParameterValue","sErrorCode","setModel","oModel","_oModel","_getModel","getModel","_removeAllProperties","oData","_removeProperties","aFilterName","aParameterName","sName","SelectOptions","some","oValue","nIdx","PropertyName","splice","Texts","oTexts","PropertyTexts","Dates","oDates","Parameters","_isTermTrue","oProperty","sTerm","fIsTermDefaultTrue","oTerm","Bool","_isExcludedFromNavigationContext","_isPotentiallySensitive","_isMeasureProperty","_isToBeExcluded","constructContextUrl","sEntitySetName","_constructContextUrl","sServerUrl","isA","_getServerUrl","oServiceURI","URI","sServiceUrl","absoluteTo","document","baseURI","lastIndexOf","substr","oAdaptedData","FilterContextUrl","ParameterContextUrl","aSensitiveFilterName","aSensitiveParameterName","oEntitySet","oEntityDef","oSubEntityDef","oEndRole","aFilterContextPart","aParamContextPart","oMetaModel","getMetaModel","getServiceMetadata","split","getODataEntitySet","getODataEntityType","entityType","property","push","name","navigationProperty","getODataAssociationEnd","type","multiplicity","_removeSensitiveDataForODataV4","_removeMeasureBasedProperties","aMeasureFilterName","aMeasureParameterName","bMeasure","oSV","getObject","sEntitySet","aPropertyNames","getPropertyNames","fnIsSensitiveData","sProp","esName","aPropertyAnnotations","_checkPropertyAnnotationsForSensitiveData","oFieldControl","k","sProperty","getIAppStateKey","BaseObject","NavigationHandlerUI5Class","prototype"],"sourceRoot":"","sources":["NavigationHandler.ts"],"sourcesContent":["import assert from \"sap/base/assert\";\nimport Log from \"sap/base/Log\";\nimport extend from \"sap/base/util/extend\";\nimport isEmptyObject from \"sap/base/util/isEmptyObject\";\nimport merge from \"sap/base/util/merge\";\nimport BaseObject from \"sap/ui/base/Object\";\nimport type Controller from \"sap/ui/core/mvc/Controller\";\nimport HashChanger from \"sap/ui/core/routing/HashChanger\";\nimport UIComponent from \"sap/ui/core/UIComponent\";\nimport V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport URI from \"sap/ui/thirdparty/URI\";\nimport openWindow from \"sap/ui/util/openWindow\";\nimport NavLibrary from \"./library\";\nimport NavError from \"./NavError\";\nimport type { SerializedSelectionVariant } from \"./SelectionVariant\";\nimport SelectionVariant from \"./SelectionVariant\";\n\n/**\n * Structure of stored app state.\n */\nexport interface InnerAppData {\n\t[key: string]: unknown;\n\t/**\n\t * Sringified JSON object as returned, for example, from getDataSuiteFormat() of the SmartFilterBar control\n\t */\n\tselectionVariant?: string;\n\n\t/**\n\t * ID of the SmartTable variant.\n\t */\n\ttableVariantId?: string;\n\n\t/**\n\t * Object that can be used to store arbitrary data.\n\t */\n\tcustomData?: object;\n\n\t/**\n\t * Object containing the current ui state of the app.\n\t */\n\tpresentationVariant?: object;\n\n\t/**\n\t * Object containing value descriptions.\n\t */\n\tvalueTexts?: object;\n\n\t/**\n\t * Object containing semanticDates filter information.\n\t */\n\tsemanticDates?: object;\n}\n\n// shortcuts for sap.ui.generic.app enums\nconst NavType = NavLibrary.NavType;\nconst ParamHandlingMode = NavLibrary.ParamHandlingMode;\nconst SuppressionBehavior = NavLibrary.SuppressionBehavior;\nconst Mode = NavLibrary.Mode;\n\nconst IAPP_STATE = \"sap-iapp-state\";\nconst DEFAULTED_PARAMETER_PROPERTY = \"sap-ushell-defaultedParameterNames\";\nconst HYBRID_IAPP_STATE_KEY = \"nhHybridIAppStateKey\";\n\n/**\n * This is the successor of {@link sap.ui.generic.app.navigation.service.NavigationHandler}.<br> Creates a new NavigationHandler class by providing the required environment. <br>\n * The <code>NavigationHandler</code> supports the verification of sensitive information. All properties that are part of\n * <code>selectionVariant</code> and <code>valueTexts</code> will be verified if they are annotated as\n * <code>com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive</code> or\n * <code>com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext</code> and will be removed before the data is persisted as the app\n * state.<br>\n * Also, all properties annotated as <code>com.sap.vocabularies.Analytics.v1.Measure</code> will be removed from the data stored as the\n * xapp state.<br>\n * To verify the information to be removed, the <code>NavigationHandler</code> requires an unnamed model of type\n * {@link sap.ui.model.odata.v2.ODataModel} on component level. It is possible to set such a model using the <code>setModel</code>\n * method.<br>\n * <b>Note:</b> The check for excluded data requires that the OData metadata has already been loaded completely.<br>\n * If the OData metadata model has not been loaded completely, all properties are removed from the application context.<br>\n * <b>Note:</b> This class requires that the UShell {@link sap.ushell.services.CrossApplicationNavigation} is available and initialized.\n *\n * @public\n * @class\n * @extends sap.ui.base.Object\n * @since 1.83.0\n * @name sap.fe.navigation.NavigationHandler\n */\nexport class NavigationHandler extends BaseObject {\n\tprivate oRouter: any;\n\n\tprivate oComponent: any;\n\n\tprivate _oModel: any;\n\n\tprivate sParamHandlingMode: string;\n\n\tprivate _sMode: string | undefined;\n\n\t// list of technical parameters\n\tprivate _aTechnicalParamaters = [\"hcpApplicationId\"];\n\n\tprivate _oLastSavedInnerAppData: any = {\n\t\tsAppStateKey: \"\",\n\t\toAppData: {},\n\t\tiCacheHit: 0,\n\t\tiCacheMiss: 0\n\t};\n\n\t/*\n\t * There exists a generation of \"old\" sap-iapp-states which are based on the following URL schema:\n\t * #SemObj-action&/route/sap-iapp-state=ABC12345678 The new URL schema is: #SemObj-action&/route?sap-iapp-state=ABC12345678 (mind the\n\t * difference between / and ? above), i.e. the sap-iapp-state has become a parameter of the query parameter section in the AppHash string.\n\t * Yet, this tool shall be able to deal even with old sap-iapp-states. Therefore, we use two Regular Expressions (rIAppStateOld and\n\t * rIAppStateOldAtStart) as defined below to scan for these old variants. The new variant is being scanned using rIAppStateNew as Regular\n\t * Expression search string. Compatibility is centrally ensured by the two methods _getInnerAppStateKey and _replaceInnerAppStateKey (see\n\t * below). Never use these RegExp in a method on your own, as it typically indicates that you will fall into the compatibility trap!\n\t */\n\t// Warning! Do not use GLOBAL flags here; RegExp in GLOBAL mode store the lastIndex value\n\t// Therefore, repeated calls to the RegExp will then only start beginning with that stored\n\t// lastIndex. Thus, multiple calls therefore could yield strange results.\n\t// Moreover, there shall only be exactly one IAPP_STATE per RegExp in an AppHash.\n\t// Therefore, GLOBAL search should be superfluous.\n\tprivate _rIAppStateOld = new RegExp(\"/\" + IAPP_STATE + \"=([^/?]+)\");\n\n\tprivate _rIAppStateOldAtStart = new RegExp(\"^\" + IAPP_STATE + \"=([^/?]+)\");\n\n\t/*\n\t * Regular Expression in words: Search for something that either starts with ? or &, followed by the term \"sap-iapp-state\". That one is\n\t * followed by an equal sign (=). The stuff that is after the equal sign forms the first regexp group. This group consists of at least one\n\t * (or arbitrary many) characters, as long as it is not an ampersand sign (&). Characters after such an ampersand would be ignored and do\n\t * not belong to the group. Alternatively, the string also may end.\n\t */\n\tprivate _rIAppStateNew = new RegExp(\"[?&]\" + IAPP_STATE + \"=([^&]+)\");\n\n\tprivate _navigateCallback: Function | undefined;\n\n\t/**\n\t * Temporarily added again because an application was (illegially) relying on it. Should be removed again, once the app is corrected\n\t */\n\tprivate IAPP_STATE = IAPP_STATE;\n\n\t/**\n\t * Constructor requiring a controller/component owning the navigation handler.\n\t *\n\t * @param {object} oController UI5 controller that contains a router and a component; typically the main controller of your application, for\n\t *        example, a subclass of the sap.ca.scfld.md.controller.BaseFullscreenController if scaffolding is used\n\t * @param {string} [sMode=sap.fe.navigation.Mode.ODataV4] Mode to be used to indicates the Odata version used for runnning the Navigation Handler,\n\t *        see {@link sap.fe.navigation.Mode}.<br>\n\t * \t\t  Note: Mode has to be sap.fe.navigation.Mode.ODataV2 whenever this constructor is used to initialize a OData V2 based service.\n\t * @param {string} [sParamHandlingMode=SelVarWins] Mode to be used to handle conflicts when merging URL parameters and the SelectionVariant class,\n\t *        see {@link sap.fe.navigation.ParamHandlingMode}\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are: <table>\n\t *         <tr>\n\t *         <th align=\"left\">NavError code</th>\n\t *         <th align=\"left\">Description</th>\n\t *         </tr>\n\t *         <tr>\n\t *         <td>NavigationHandler.INVALID_INPUT</td>\n\t *         <td>Indicates that the input parameter is invalid</td>\n\t *         </tr>\n\t *         </table>\n\t */\n\tconstructor(oController: Controller | UIComponent, sMode?: string, sParamHandlingMode?: string) {\n\t\tsuper();\n\t\tif (!oController) {\n\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t}\n\n\t\tif (oController instanceof UIComponent) {\n\t\t\tthis.oRouter = oController.getRouter();\n\t\t\tthis.oComponent = oController;\n\t\t} else {\n\t\t\tif (typeof oController.getOwnerComponent !== \"function\") {\n\t\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t\t}\n\n\t\t\tthis.oRouter = this._getRouter(oController);\n\t\t\tthis.oComponent = oController.getOwnerComponent();\n\t\t}\n\n\t\t// special handling for SmartTemplates\n\t\tif (this.oComponent && this.oComponent.getAppComponent) {\n\t\t\tthis.oComponent = this.oComponent.getAppComponent();\n\t\t}\n\n\t\tif (\n\t\t\ttypeof this.oRouter === \"undefined\" ||\n\t\t\ttypeof this.oComponent === \"undefined\" ||\n\t\t\ttypeof this.oComponent.getComponentData !== \"function\"\n\t\t) {\n\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t}\n\n\t\tif (sParamHandlingMode === ParamHandlingMode.URLParamWins || sParamHandlingMode === ParamHandlingMode.InsertInSelOpt) {\n\t\t\tthis.sParamHandlingMode = sParamHandlingMode;\n\t\t} else {\n\t\t\tthis.sParamHandlingMode = ParamHandlingMode.SelVarWins; // default\n\t\t}\n\t\tif (sMode === Mode.ODataV2) {\n\t\t\tthis._sMode = sMode;\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the shell navigation service.\n\t *\n\t * @returns The Navigation service\n\t * @private\n\t */\n\t_getAppNavigationService() {\n\t\treturn sap.ushell.Container.getService(\"CrossApplicationNavigation\");\n\t}\n\n\t/**\n\t * Retrieves the shell navigation service.\n\t *\n\t * @returns The Navigation service\n\t * @private\n\t */\n\t_getAppNavigationServiceAsync() {\n\t\treturn sap.ushell.Container.getServiceAsync(\"CrossApplicationNavigation\")\n\t\t\t.then(function (oCrossAppNavService: any) {\n\t\t\t\treturn oCrossAppNavService;\n\t\t\t})\n\t\t\t.catch(function () {\n\t\t\t\tLog.error(\"NavigationHandler: CrossApplicationNavigation is not available.\");\n\t\t\t\tthrow new NavError(\"NavigationHandler.NO.XAPPSERVICE\");\n\t\t\t});\n\t}\n\n\t/**\n\t * Retrieves the reference to the router object for navigation for this given Controller.\n\t *\n\t * @param oController The reference to the Controller for which the Router instance shall be determined.\n\t * @returns The Router for the given Controller\n\t * @private\n\t */\n\t_getRouter(oController: Controller) {\n\t\treturn UIComponent.getRouterFor(oController);\n\t}\n\n\t/**\n\t * This method is to be used only by FE V2 to get access to toExternal promise.\n\t *\n\t * @param fnCallback Callback to be called by 'navigate' method in case of toExternal is used to navigate.\n\t * @private\n\t */\n\tregisterNavigateCallback(fnCallback: Function) {\n\t\tthis._navigateCallback = fnCallback;\n\t}\n\n\t/**\n\t * Triggers a cross-app navigation after saving the inner and the cross-app states. The navigation mode based on\n\t * <code>sap-ushell-next-navmode</code> is taken into account. If set to <code>explace</code> the inner app state will not be changed.\n\t * <b>Note:</b> The <code>sNavMode</code> argument can be used to overwrite the SAP Fiori launchpad default navigation for opening a URL\n\t * in-place or ex-place.\n\t * <br>\n\t * <b>Node:</b> If the <code>oExternalAppData</code> parameter is not supplied, the external app data will be calculated based on\n\t * the <code>oInnerAppData</code> data.<br>\n\t * SmartFilterBar control <b>Parameters:</b> <table>\n\t * <tr>\n\t * <td align=\"center\">{object}</td>\n\t * <td><b>oError</b></td>\n\t * <td>NavError object (instance of {@link sap.fe.navigation.NavError}) that describes which kind of error occurred</td>\n\t * <tr>\n\t * <td align=\"center\">{string}</td>\n\t * <td><b>oError.errorCode</b></td>\n\t * <td>Code to identify the error</td>\n\t * <tr>\n\t * <td align=\"center\">{string}</td>\n\t * <td><b>oError.type</b></td>\n\t * <td>Severity of the error (info/warning/error)</td>\n\t * <tr>\n\t * <td align=\"center\">{array}</td>\n\t * <td><b>oError.params</b></td>\n\t * <td>An array of objects (typically strings) that describe additional value parameters required for generating the message</td>\n\t * </table>.\n\t *\n\t * @public\n\t * @function navigate\n\t * @memberof sap.fe.navigation.NavigationHandler.prototype\n\t * @param sSemanticObject Name of the semantic object of the target app\n\t * @param sActionName Name of the action of the target app\n\t * @param vNavigationParameters Navigation parameters as an object with key/value pairs or as a string representation of such an object. If passed as an object, the properties are not checked against the <code>IsPotentialSensitive</code> or <code>Measure</code> type.\n\t * @param oInnerAppData Object for storing current state of the app\n\t * @param fnOnError Callback that is called if an error occurs during navigation <br>\n\t * @param oExternalAppData Object for storing the state which will be forwarded to the target component.\n\t * @param oExternalAppData.presentationVariant Object containing the current ui state of the app which will be forwarded to the\n\t *        target component.\n\t * @param oExternalAppData.valueTexts Object containing value descriptions which will be forwarded to the target component.\n\t * @param oExternalAppData.selectionVariant Stringified JSON object, which will be forwarded to the target component. If not\n\t *        provided the selectionVariant will be constructed based on the vNavigationParameters.\n\t * @param sNavMode Argument is used to overwrite the FLP-configured target for opening a URL. If used, only the\n\t *        <code>explace</code> or <code>inplace</code> values are allowed. Any other value will lead to an exception\n\t *        <code>NavigationHandler.INVALID_NAV_MODE</code>.\n\t * @example <code>\n\t * sap.ui.define([\"sap/fe/navigation/NavigationHandler\", \"sap/fe/navigation/SelectionVariant\"], function (NavigationHandler, SelectionVariant) {\n\t * \tvar oNavigationHandler = new NavigationHandler(oController);\n\t * \tvar sSemanticObject = \"SalesOrder\";\n\t * \tvar sActionName = \"create\";\n\t *\n\t * \t//simple parameters as Object\n\t * \tvar vNavigationParameters = {\n\t * \t\tCompanyCode : \"0001\",\n\t * \t\tCustomer : \"C0001\"\n\t * \t};\n\t *\n\t * \t//or as selection variant\n\t * \tvar oSelectionVariant = new SelectionVariant();\n\t *\t oSelectionVariant.addSelectOption(\"CompanyCode\", \"I\", \"EQ\", \"0001\");\n\t * \toSelectionVariant.addSelectOption(\"Customer\", \"I\", \"EQ\", \"C0001\");\n\t * \tvNavigationParameters = oSelectionVariant.toJSONString();\n\t *\n\t * \t//or directly from SmartFilterBar\n\t * \tvNavigationParameters = oSmartFilterBar.getDataSuiteFormat();\n\t *\n\t * \t//app state for back navigation\n\t *\t var oInnerAppData = {\n\t * \t\tselectionVariant : oSmartFilterBar.getDataSuiteFormat(),\n\t * \t\ttableVariantId : oSmartTable.getCurrentVariantId(),\n\t * \t\tcustomData : oMyCustomData\n\t * \t};\n\t *\n\t * \t// callback function in case of errors\n\t * \tvar fnOnError = function(oError){\n\t * \t\tvar oi18n = oController.getView().getModel(\"i18n\").getResourceBundle();\n\t * \t\toError.setUIText({oi18n : oi18n, sTextKey : \"OUTBOUND_NAV_ERROR\"});\n\t * \t\toError.showMessageBox();\n\t * \t};\n\t *\n\t * \toNavigationHandler.navigate(sSemanticObject, sActionName, vNavigationParameters, oInnerAppData, fnOnError);\n\t * });\n\t * </code>\n\t */\n\tnavigate(\n\t\tsSemanticObject: string,\n\t\tsActionName: string,\n\t\tvNavigationParameters: object | string,\n\t\toInnerAppData?: InnerAppData,\n\t\tfnOnError?: Function,\n\t\toExternalAppData?: {\n\t\t\tvalueTexts?: object | undefined;\n\t\t\tpresentationVariant?: object | undefined;\n\t\t\tselectionVariant?: object | undefined;\n\t\t},\n\t\tsNavMode?: string\n\t) {\n\t\tlet sSelectionVariant: any,\n\t\t\tmParameters,\n\t\t\toXAppDataObj: any,\n\t\t\toStartupParameters,\n\t\t\tbExPlace = false,\n\t\t\toTmpData: any = {};\n\t\tconst oNavHandler: NavigationHandler = this;\n\n\t\tconst oComponentData = this.oComponent.getComponentData();\n\t\t/*\n\t\t * There are some race conditions where the oComponentData may not be set, for example in case the UShell was not initialized properly. To\n\t\t * make sure that we do not dump here with an exception, we take this special error handling behavior:\n\t\t */\n\t\tif (oComponentData) {\n\t\t\toStartupParameters = oComponentData.startupParameters;\n\n\t\t\tif (\n\t\t\t\toStartupParameters &&\n\t\t\t\toStartupParameters[\"sap-ushell-next-navmode\"] &&\n\t\t\t\toStartupParameters[\"sap-ushell-next-navmode\"].length > 0\n\t\t\t) {\n\t\t\t\t// bExPlace = (JSON.parse(oStartupParameters[\"sap-ushell-next-navmode\"][0]) === \"explace\");\n\t\t\t\tbExPlace = oStartupParameters[\"sap-ushell-next-navmode\"][0] === \"explace\";\n\t\t\t}\n\t\t}\n\n\t\t// only nav-mode 'inplace' or 'explace' are supported. Any other value will lead to an exception.\n\t\tif (sNavMode && (sNavMode === \"inplace\" || sNavMode === \"explace\")) {\n\t\t\tbExPlace = sNavMode === \"explace\";\n\t\t} else if (sNavMode) {\n\t\t\tthrow new NavError(\"NavigationHandler.INVALID_NAV_MODE\");\n\t\t}\n\n\t\tif (oExternalAppData === undefined || oExternalAppData === null) {\n\t\t\toXAppDataObj = {};\n\t\t} else {\n\t\t\toXAppDataObj = oExternalAppData;\n\t\t}\n\n\t\t// for navigation we need URL parameters (legacy navigation) and sap-xapp-state, therefore we need to create the missing one from the\n\t\t// passed one\n\t\tif (typeof vNavigationParameters === \"string\") {\n\t\t\tsSelectionVariant = vNavigationParameters;\n\t\t} else if (typeof vNavigationParameters === \"object\") {\n\t\t\tconst oEnrichedSelVar = this._splitInboundNavigationParameters(\n\t\t\t\tnew SelectionVariant(),\n\t\t\t\tvNavigationParameters,\n\t\t\t\t[]\n\t\t\t).oNavigationSelVar;\n\t\t\tsSelectionVariant = oEnrichedSelVar.toJSONString();\n\t\t} else {\n\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t}\n\n\t\toTmpData.selectionVariant = new SelectionVariant(sSelectionVariant);\n\t\tif (typeof vNavigationParameters === \"string\") {\n\t\t\toTmpData.selectionVariant = this._removeTechnicalParameters(oTmpData.selectionVariant);\n\t\t}\n\t\toTmpData.selectionVariant = oTmpData.selectionVariant && oTmpData.selectionVariant.toJSONObject();\n\t\toTmpData = this._removeMeasureBasedInformation(oTmpData); // remove eventual measures\n\t\toTmpData = this._checkIsPotentiallySensitive(oTmpData); // remove eventual sensitive data\n\n\t\tif (oTmpData.selectionVariant) {\n\t\t\tmParameters = this._getURLParametersFromSelectionVariant(new SelectionVariant(oTmpData.selectionVariant));\n\t\t\tsSelectionVariant = new SelectionVariant(oTmpData.selectionVariant).toJSONString();\n\t\t} else {\n\t\t\tmParameters = {};\n\t\t\tsSelectionVariant = null;\n\t\t}\n\n\t\tconst oNavArguments: any = {\n\t\t\ttarget: {\n\t\t\t\tsemanticObject: sSemanticObject,\n\t\t\t\taction: sActionName\n\t\t\t},\n\t\t\tparams: mParameters || {}\n\t\t};\n\n\t\tconst fnNavigate = function (oCrossAppNavService: any) {\n\t\t\tif (!oXAppDataObj.selectionVariant) {\n\t\t\t\toXAppDataObj.selectionVariant = sSelectionVariant;\n\t\t\t}\n\n\t\t\tconst fnNavExplace = function () {\n\t\t\t\tconst sNewHrefPromise = oCrossAppNavService.hrefForExternalAsync(oNavArguments, oNavHandler.oComponent);\n\t\t\t\tsNewHrefPromise\n\t\t\t\t\t.then(function (sNewHref: any) {\n\t\t\t\t\t\topenWindow(sNewHref);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\t\tLog.error(\"Error while retireving hrefForExternal : \" + oError);\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\toXAppDataObj = oNavHandler._removeMeasureBasedInformation(oXAppDataObj);\n\t\t\treturn oNavHandler._fnSaveAppStateAsync(oXAppDataObj, fnOnError).then(function (oSaveAppStateReturn: any) {\n\t\t\t\tif (oSaveAppStateReturn) {\n\t\t\t\t\toNavArguments.appStateKey = oSaveAppStateReturn.appStateKey;\n\n\t\t\t\t\t// Remark:\n\t\t\t\t\t// The Cross App Service takes care of encoding parameter keys and values. Example:\n\t\t\t\t\t// mParams = { \"$@%\" : \"&/=\" } results in the URL parameter %2524%2540%2525=%2526%252F%253D\n\t\t\t\t\t// Note the double encoding, this is correct.\n\n\t\t\t\t\t// toExternal sets sap-xapp-state in the URL if appStateKey is provided in oNavArguments\n\t\t\t\t\t// toExternal has issues on sticky apps FIORITECHP1-14400, temp fix using hrefForExternal\n\t\t\t\t\tif (sNavMode == \"explace\") {\n\t\t\t\t\t\tfnNavExplace();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst ptoExt = oCrossAppNavService.toExternal(oNavArguments, oNavHandler.oComponent);\n\t\t\t\t\t\t// TODO: This is just a temporary solution to allow FE V2 to use toExternal promise.\n\t\t\t\t\t\tif (oNavHandler._navigateCallback) {\n\t\t\t\t\t\t\toNavHandler._navigateCallback(ptoExt);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} // else : error was already reported\n\t\t\t});\n\t\t};\n\t\tconst fnStoreAndNavigate = function (oCrossAppNavService: any) {\n\t\t\toNavHandler\n\t\t\t\t.storeInnerAppStateAsync(oInnerAppData as any, true)\n\t\t\t\t.then(function (sAppStateKey: any) {\n\t\t\t\t\tif (sAppStateKey) {\n\t\t\t\t\t\toNavHandler.replaceHash(sAppStateKey);\n\t\t\t\t\t}\n\t\t\t\t\treturn fnNavigate(oCrossAppNavService);\n\t\t\t\t})\n\t\t\t\t.catch(function (oError: any) {\n\t\t\t\t\tif (fnOnError) {\n\t\t\t\t\t\tfnOnError(oError);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t};\n\t\tif (sNavMode) {\n\t\t\toNavArguments.params[\"sap-ushell-navmode\"] = bExPlace ? \"explace\" : \"inplace\";\n\t\t}\n\t\toNavHandler\n\t\t\t._getAppNavigationServiceAsync()\n\t\t\t.then(function (oCrossAppNavService: any) {\n\t\t\t\tconst oSupportedPromise = oCrossAppNavService.isNavigationSupported([oNavArguments], oNavHandler.oComponent);\n\t\t\t\toSupportedPromise.done(function (oTargets: any) {\n\t\t\t\t\tif (oTargets[0].supported) {\n\t\t\t\t\t\tif (!bExPlace) {\n\t\t\t\t\t\t\tfnStoreAndNavigate(oCrossAppNavService);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfnNavigate(oCrossAppNavService);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (fnOnError) {\n\t\t\t\t\t\t// intent is not supported\n\t\t\t\t\t\tconst oError = new NavError(\"NavigationHandler.isIntentSupported.notSupported\");\n\t\t\t\t\t\tfnOnError(oError);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (fnOnError) {\n\t\t\t\t\toSupportedPromise.fail(function () {\n\t\t\t\t\t\t// technical error: could not determine if intent is supported\n\t\t\t\t\t\tconst oError = oNavHandler._createTechnicalError(\"NavigationHandler.isIntentSupported.failed\");\n\t\t\t\t\t\tfnOnError(oError);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function (oError: any) {\n\t\t\t\tif (fnOnError) {\n\t\t\t\t\tfnOnError(oError);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Parses the incoming URL and returns a Promise. If this method detects a back navigation, the inner app state is returned in the resolved\n\t * Promise. Otherwise startup parameters will be merged into the app state provided by cross app navigation, and a combined app state will be\n\t * returned. The conflict resolution can be influenced with sParamHandlingMode defined in the constructor.\n\t *\n\t * @returns A Promise object to monitor when all the actions of the function have been executed. If the execution is successful, the\n\t *          extracted app state, the startup parameters, and the type of navigation are returned, see also the example above. The app state is\n\t *          an object that contains the following information:\n\t *          <ul>\n\t *          <li><code>oAppData.oSelectionVariant</code>: An instance of {@link sap.fe.navigation.SelectionVariant}\n\t *          containing only parameters/select options that are related to navigation</li>\n\t *          <li><code>oAppData.selectionVariant</code>: The navigation-related selection variant as a JSON-formatted string</li>\n\t *          <li><code>oAppData.oDefaultedSelectionVariant</code>: An instance of\n\t *          {@link sap.fe.navigation.SelectionVariant} containing only the parameters/select options that are set by user\n\t *          default data</li>\n\t *          <li><code>oAppData.bNavSelVarHasDefaultsOnly</code>: A Boolean flag that indicates whether only defaulted parameters and no\n\t *          navigation parameters are present.<br>\n\t *          <b>Note:</b> If no navigation parameters are available, <code>bNavSelVarHasDefaultsOnly</code> is set to <code>true</code>,\n\t *          even though parameters without default might be available as well.</li>\n\t *          </ul>\n\t *          If the navigation-related selection variant is empty, it is replaced by a copy of the defaulted selection variant.<br>\n\t *          The navigation type is an enumeration type of type {@link sap.fe.navigation.NavType} (possible values are\n\t *          initial, URLParams, xAppState, and iAppState).<br>\n\t *          <b>Note:</b> If the navigation type is {@link sap.fe.navigation.NavType.iAppState} oAppData has two\n\t *          additional properties\n\t *          <ul>\n\t *          <li><code>oAppData.tableVariantId</code></li>\n\t *          <li><code>oAppData.customData</code></li>\n\t *          </ul>\n\t *          which return the inner app data as stored in {@link #.navigate navigate} or {@link #.storeInnerAppStateAsync storeInnerAppStateAsync}.\n\t *          <code>oAppData.oDefaultedSelectionVariant</code> is an empty selection variant and\n\t *          <code>oAppData.bNavSelVarHasDefaultsOnly</code> is <code>false</code> in this case.<br>\n\t *          <b>Note:</b> If the navigation type is {@link sap.fe.navigation.NavType.initial} oAppData is an empty object!<br>\n\t *          If an error occurs, an error object of type {@link sap.fe.navigation.NavError}, URL parameters (if available)\n\t *          and the type of navigation are returned.\n\t * @public\n\t * @example <code>\n\t * sap.ui.define([\"sap/fe/navigation/NavigationHandler\"], function (NavigationHandler) {\n\t * \tvar oNavigationHandler = new NavigationHandler(oController);\n\t * \tvar oParseNavigationPromise = oNavigationHandler.parseNavigation();\n\t *\n\t * \toParseNavigationPromise.done(function(oAppData, oStartupParameters, sNavType){\n\t * \t\t\toSmartFilterBar.setDataSuiteFormat(oAppData.selectionVariant);\n\t * \t\t\t// oAppData.oSelectionVariant can be used to manipulate the selection variant\n\t * \t\t\t// oAppData.oDefaultedSelectionVariant contains the parameters which are set by user defaults\n\t * \t\t\t// oAppData.bNavSelVarHasDefaultsOnly indicates whether only defaulted parameters and no navigation parameters are present\n\t * \t});\n\t * \toParseNavigationPromise.fail(function(oError, oURLParameters, sNavType){\n\t * \t\t// if e.g. the xapp state could not be loaded, nevertheless there may be URL parameters available\n\t * \t\t//some error handling\n\t * \t});\n\t * });\n\t * </code>\n\t */\n\tparseNavigation() {\n\t\tconst sAppHash = HashChanger.getInstance().getHash();\n\t\t/*\n\t\t * use .getHash() here instead of .getAppHash() to also be able dealing with environments where only SAPUI5 is loaded and the UShell is\n\t\t * not initialized properly.\n\t\t */\n\t\tconst sIAppState = this._getInnerAppStateKey(sAppHash);\n\n\t\tlet oComponentData = this.oComponent.getComponentData();\n\t\t/*\n\t\t * There are some race conditions where the oComponentData may not be set, for example in case the UShell was not initialized properly. To\n\t\t * make sure that we do not dump here with an exception, we take this special error handling behavior:\n\t\t */\n\t\tif (oComponentData === undefined) {\n\t\t\tLog.warning(\"The navigation Component's data was not set properly; assuming instead that no parameters are provided.\");\n\t\t\toComponentData = {};\n\t\t}\n\n\t\t// Remark:\n\t\t// The startup parameters are already decoded. Example:\n\t\t// The original URL parameter %2524%2540%2525=%2526%252F%253D results in oStartupParameters = { \"$@%\" : \"&/=\" }\n\t\t// Note the double encoding in the URL, this is correct. An URL parameter like xyz=%25 causes an \"URI malformed\" error.\n\t\t// If the decoded value should be e.g. \"%25\", the parameter in the URL needs to be: xyz=%252525\n\t\tconst oStartupParameters = oComponentData.startupParameters;\n\t\tconst hybridIAppStateKeyParams: string | undefined = oStartupParameters?.[HYBRID_IAPP_STATE_KEY]?.[0];\n\t\tconst hybridDeferred = jQuery.Deferred();\n\t\tlet iAppStateHybridDeferred: jQuery.Deferred | undefined;\n\t\tif (hybridIAppStateKeyParams !== undefined) {\n\t\t\tiAppStateHybridDeferred = this._loadAppState(hybridIAppStateKeyParams, hybridDeferred, NavType.hybrid);\n\t\t}\n\n\t\tlet aDefaultedParameters: any = [];\n\t\tif (\n\t\t\toStartupParameters &&\n\t\t\toStartupParameters[DEFAULTED_PARAMETER_PROPERTY] &&\n\t\t\toStartupParameters[DEFAULTED_PARAMETER_PROPERTY].length > 0\n\t\t) {\n\t\t\taDefaultedParameters = JSON.parse(oStartupParameters[DEFAULTED_PARAMETER_PROPERTY][0]);\n\t\t}\n\n\t\tconst oMyDeferred = jQuery.Deferred();\n\n\t\tconst oNavHandler = this;\n\t\tconst parseUrlParams = function (oSubStartupParameters: any, aSubDefaultedParameters: any, oSubMyDeferred: any, sNavType: any) {\n\t\t\t// standard URL navigation\n\t\t\tconst oSelVars = oNavHandler._splitInboundNavigationParameters(\n\t\t\t\tnew SelectionVariant(),\n\t\t\t\toSubStartupParameters,\n\t\t\t\taSubDefaultedParameters\n\t\t\t);\n\t\t\t// For scenario, where only hybridIAppStateKey is part of urlParams, we ignore this condition\n\t\t\tif (oSelVars.oNavigationSelVar.isEmpty() && oSelVars.oDefaultedSelVar.isEmpty() && sNavType !== NavType.hybrid) {\n\t\t\t\t// Startup parameters contain only technical parameters (SAP system) which were filtered out.\n\t\t\t\t// oNavigationSelVar and oDefaultedSelVar are empty.\n\t\t\t\t// Thus, consider this type of navigation as an initial navigation.\n\t\t\t\tif (sNavType === NavType.xAppState) {\n\t\t\t\t\tconst oError = oNavHandler._createTechnicalError(\"NavigationHandler.getDataFromAppState.failed\");\n\t\t\t\t\toSubMyDeferred.reject(oError, oSubStartupParameters || {}, NavType.xAppState);\n\t\t\t\t} else {\n\t\t\t\t\toSubMyDeferred.resolve({}, oSubStartupParameters, NavType.initial);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst oAppStateData: any = {};\n\t\t\t\toAppStateData.selectionVariant = oSelVars.oNavigationSelVar.toJSONString();\n\t\t\t\toAppStateData.oSelectionVariant = oSelVars.oNavigationSelVar;\n\t\t\t\toAppStateData.oDefaultedSelectionVariant = oSelVars.oDefaultedSelVar;\n\t\t\t\toAppStateData.bNavSelVarHasDefaultsOnly = oSelVars.bNavSelVarHasDefaultsOnly;\n\n\t\t\t\t// no sap-xapp-state but navType is hybrid, extract the IAppStateData\n\t\t\t\tif (sNavType === NavType.hybrid) {\n\t\t\t\t\tconst successHandlerHybridState = function (iAppStateData: object, _ref: object, navType: string) {\n\t\t\t\t\t\toAppStateData.iAppState = iAppStateData;\n\t\t\t\t\t\toSubMyDeferred.resolve(oAppStateData, oStartupParameters, navType);\n\t\t\t\t\t};\n\t\t\t\t\tconst failureHandlerHybridState = function (oError: object, _ref: object, navType: string) {\n\t\t\t\t\t\toSubMyDeferred.reject(oError, _ref, navType);\n\t\t\t\t\t};\n\n\t\t\t\t\tif (iAppStateHybridDeferred !== undefined) {\n\t\t\t\t\t\tiAppStateHybridDeferred.done(successHandlerHybridState);\n\t\t\t\t\t\tiAppStateHybridDeferred.fail(failureHandlerHybridState);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toSubMyDeferred.resolve(oAppStateData, oSubStartupParameters, sNavType);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif (sIAppState) {\n\t\t\t// inner app state is available in the AppHash (back navigation); extract the parameter value\n\t\t\tthis._loadAppState(sIAppState, oMyDeferred, NavType.iAppState);\n\t\t} else {\n\t\t\t// no back navigation\n\t\t\tconst bIsXappStateNavigation = oComponentData[\"sap-xapp-state\"] !== undefined;\n\t\t\tif (bIsXappStateNavigation) {\n\t\t\t\tconst that = this;\n\t\t\t\t// inner app state was not found in the AppHash, but xapp state => try to read the xapp state\n\t\t\t\tthis._getAppNavigationServiceAsync()\n\t\t\t\t\t.then(function (oCrossAppNavService: any) {\n\t\t\t\t\t\tconst oStartupPromise = oCrossAppNavService.getStartupAppState(that.oComponent);\n\t\t\t\t\t\toStartupPromise.done(function (oAppState: any) {\n\t\t\t\t\t\t\t// get app state from sap-xapp-state,\n\t\t\t\t\t\t\t// create a copy, not only a reference, because we want to modify the object\n\t\t\t\t\t\t\tlet oAppStateData = oAppState.getData();\n\t\t\t\t\t\t\tlet oError;\n\t\t\t\t\t\t\tif (oAppStateData) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\toAppStateData = JSON.parse(JSON.stringify(oAppStateData));\n\t\t\t\t\t\t\t\t} catch (x) {\n\t\t\t\t\t\t\t\t\toError = oNavHandler._createTechnicalError(\"NavigationHandler.AppStateData.parseError\");\n\t\t\t\t\t\t\t\t\toMyDeferred.reject(oError, oStartupParameters, NavType.xAppState);\n\t\t\t\t\t\t\t\t\treturn oMyDeferred.promise();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (oAppStateData) {\n\t\t\t\t\t\t\t\tconst oSelVar = new SelectionVariant(oAppStateData.selectionVariant);\n\n\t\t\t\t\t\t\t\tconst oSelVars = oNavHandler._splitInboundNavigationParameters(\n\t\t\t\t\t\t\t\t\toSelVar,\n\t\t\t\t\t\t\t\t\toStartupParameters,\n\t\t\t\t\t\t\t\t\taDefaultedParameters\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\toAppStateData.selectionVariant = oSelVars.oNavigationSelVar.toJSONString();\n\t\t\t\t\t\t\t\toAppStateData.oSelectionVariant = oSelVars.oNavigationSelVar;\n\t\t\t\t\t\t\t\toAppStateData.oDefaultedSelectionVariant = oSelVars.oDefaultedSelVar;\n\t\t\t\t\t\t\t\toAppStateData.bNavSelVarHasDefaultsOnly = oSelVars.bNavSelVarHasDefaultsOnly;\n\t\t\t\t\t\t\t\tconst successHandlerHybridState = function (iAppStateData: object, _ref: object, navType: string) {\n\t\t\t\t\t\t\t\t\toAppStateData.iAppState = iAppStateData;\n\t\t\t\t\t\t\t\t\toMyDeferred.resolve(oAppStateData, oStartupParameters, navType);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tif (hybridIAppStateKeyParams !== undefined && iAppStateHybridDeferred !== undefined) {\n\t\t\t\t\t\t\t\t\tiAppStateHybridDeferred.done(successHandlerHybridState);\n\t\t\t\t\t\t\t\t} else if (oAppStateData[HYBRID_IAPP_STATE_KEY]) {\n\t\t\t\t\t\t\t\t\tthat._loadAppState(oAppStateData[HYBRID_IAPP_STATE_KEY], hybridDeferred, NavType.hybrid).done(\n\t\t\t\t\t\t\t\t\t\tsuccessHandlerHybridState\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\toMyDeferred.resolve(oAppStateData, oStartupParameters, NavType.xAppState);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (oStartupParameters) {\n\t\t\t\t\t\t\t\tparseUrlParams(oStartupParameters, aDefaultedParameters, oMyDeferred, NavType.xAppState);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// sap-xapp-state navigation, but ID has already expired, but URL parameters available\n\t\t\t\t\t\t\t\toError = oNavHandler._createTechnicalError(\"NavigationHandler.getDataFromAppState.failed\");\n\t\t\t\t\t\t\t\toMyDeferred.reject(oError, oStartupParameters || {}, NavType.xAppState);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\toStartupPromise.fail(function () {\n\t\t\t\t\t\t\tconst oError = oNavHandler._createTechnicalError(\"NavigationHandler.getStartupState.failed\");\n\t\t\t\t\t\t\toMyDeferred.reject(oError, {}, NavType.xAppState);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn oStartupPromise;\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function () {\n\t\t\t\t\t\tconst oError = oNavHandler._createTechnicalError(\"NavigationHandler._getAppNavigationServiceAsync.failed\");\n\t\t\t\t\t\toMyDeferred.reject(oError, {}, NavType.xAppState);\n\t\t\t\t\t});\n\t\t\t} else if (oStartupParameters) {\n\t\t\t\t// no sap-xapp-state\n\t\t\t\tparseUrlParams(\n\t\t\t\t\toStartupParameters,\n\t\t\t\t\taDefaultedParameters,\n\t\t\t\t\toMyDeferred,\n\t\t\t\t\thybridIAppStateKeyParams !== undefined ? NavType.hybrid : NavType.URLParams\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// initial navigation\n\t\t\t\toMyDeferred.resolve({}, {}, NavType.initial);\n\t\t\t}\n\t\t}\n\n\t\treturn oMyDeferred.promise();\n\t}\n\n\t/**\n\t * Sets the application specific technical parameters. Technical parameters will not be added to the selection variant passed to the\n\t * application. As a default the following values are considered as technical parameters:\n\t * <ul>\n\t * <li><code>sap-system</code></li>\n\t * <li><code>sap-ushell-defaultedParameterNames</code></li>\n\t * <li><code>\"hcpApplicationId\"</code></li>\n\t * </ul>.\n\t *\n\t * @public\n\t * @function setTechnicalParameters\n\t * @memberof sap.fe.navigation.NavigationHandler.prototype\n\t * @param {Array} aTechnicalParameters List of parameter names to be considered as technical parameters. <code>null</code> or\n\t *        <code>undefined</code> may be used to reset the complete list.\n\t */\n\tsetTechnicalParameters(aTechnicalParameters?: any[]) {\n\t\tif (!aTechnicalParameters) {\n\t\t\taTechnicalParameters = [];\n\t\t}\n\n\t\tif (!Array.isArray(aTechnicalParameters)) {\n\t\t\tLog.error(\"NavigationHandler: parameter incorrect, array of strings expected\");\n\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t}\n\n\t\tthis._aTechnicalParamaters = aTechnicalParameters;\n\t}\n\n\t/**\n\t * Gets the application specific technical parameters. Technical parameters will not be added to the selection variant passed to the\n\t * application. As a default the following values are considered as technical parameters:\n\t * <ul>\n\t * <li><code>sap-system</code></li>\n\t * <li><code>sap-ushell-defaultedParameterNames</code></li>\n\t * <li><code>\"hcpApplicationId\"</code></li>\n\t * </ul>.\n\t *\n\t * @public\n\t * @function getTechnicalParameters\n\t * @memberof sap.fe.navigation.NavigationHandler.prototype\n\t * @returns {Array} Containing the technical parameters.\n\t */\n\tgetTechnicalParameters() {\n\t\treturn this._aTechnicalParamaters.concat([]);\n\t}\n\n\t/**\n\t * Checks if the passed parameter is considered as technical parameter.\n\t *\n\t * @param sParameterName Name of a request parameter, considered as technical parameter.\n\t * @returns Indicates if the parameter is considered as technical parameter or not.\n\t * @private\n\t */\n\t_isTechnicalParameter(sParameterName: string) {\n\t\tif (sParameterName) {\n\t\t\tif (\n\t\t\t\t!(\n\t\t\t\t\tsParameterName === \"sap-ui-fe-variant-id\" ||\n\t\t\t\t\tsParameterName === \"sap-ui-fe-table-variant-id\" ||\n\t\t\t\t\tsParameterName === \"sap-ui-fe-chart-variant-id\" ||\n\t\t\t\t\tsParameterName === \"sap-ui-fe-filterbar-variant-id\"\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tif (sParameterName.toLowerCase().indexOf(\"sap-\") === 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (this._aTechnicalParamaters.indexOf(sParameterName) >= 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t_isFEParameter(sParameterName: any) {\n\t\treturn sParameterName.toLowerCase().indexOf(\"sap-ui-fe\") === 0;\n\t}\n\n\t/**\n\t * Rmoves if the passed parameter is considered as technical parameter.\n\t *\n\t * @param oSelectionVariant Selection Variant which consists of technical Parameters.\n\t * @returns Selection Variant without technical Parameters.\n\t * @private\n\t */\n\t_removeTechnicalParameters(oSelectionVariant: SelectionVariant) {\n\t\tlet sPropName, i;\n\t\tconst aSelVarPropNames = oSelectionVariant.getSelectOptionsPropertyNames();\n\t\tfor (i = 0; i < aSelVarPropNames.length; i++) {\n\t\t\tsPropName = aSelVarPropNames[i];\n\t\t\tif (this._isTechnicalParameter(sPropName)) {\n\t\t\t\toSelectionVariant.removeSelectOption(sPropName);\n\t\t\t}\n\t\t}\n\t\treturn oSelectionVariant;\n\t}\n\n\t/**\n\t * Splits the parameters provided during inbound navigation and separates the contextual information between defaulted parameter values and\n\t * navigation parameters.\n\t *\n\t * @param oSelectionVariant Instance of {@link sap.fe.navigation.SelectionVariant} containing navigation data of\n\t *        the app\n\t * @param oStartupParameters Object containing startup parameters of the app (derived from the component)\n\t * @param aDefaultedParameters Array containing defaulted parameter names\n\t * @returns Object containing two SelectionVariants, one for navigation (oNavigationSelVar) and one for defaulted startup parameters\n\t *          (oDefaultedSelVar), and a flag (bNavSelVarHasDefaultsOnly) indicating whether all parameters were defaulted. The function is\n\t *          handed two objects containing parameters (names and their corresponding values), oSelectionVariant and oStartupParameters. A\n\t *          parameter could be stored in just one of these two objects or in both of them simultaneously. Because of the latter case a\n\t *          parameter could be associated with conflicting values and it is the job of this function to resolve any such conflict. Parameters\n\t *          are assigned to the two returned SelectionVariants, oNavigationSelVar and oDefaultedSelVar, as follows: | parameter NOT in |\n\t *          parameter in | oSelectionVariant | oSelectionVariant ---------------------------------------|------------------ parameter NOT in |\n\t *          nothing to do | Add parameter oStartupParameters | here | (see below) ----------------------------------------------------------\n\t *          parameter in | Add parameter | Conflict resolution oStartupParameters | (see below) | (see below) Add parameter: if parameter in\n\t *          aDefaultedParameters: add parameter to oDefaultedSelVar else: add parameter to oNavigationSelVar Conflict resolution: if parameter\n\t *          in aDefaultedParameters: add parameter value from oSelectionVariant to oNavigationSelVar add parameter value from\n\t *          oStartupParameters to oDefaultedSelVar Note: This case only occurs in UI5 1.32. In later versions UShell stores any defaulted\n\t *          parameter either in oSelectionVariant or oStartupParameters but never simultaneously in both. else: Choose 1 of the following\n\t *          options based on given handling mode (this.sParamHandlingMode). -> add parameter value from oStartupParameters to\n\t *          oNavigationSelVar | -> add parameter value from oAppState.selectionVariant to oNavigationSelVar -> add both parameter values to\n\t *          navigationSelVar If navigationSelVar is still empty at the end of execution, navigationSelVar is replaced by a copy of\n\t *          oDefaultedSelVar and the flag bNavSelVarHasDefaultsOnly is set to true. The selection variant oDefaultedSelVar itself is always\n\t *          returned as is.\n\t * @private\n\t */\n\t_splitInboundNavigationParameters(\n\t\toSelectionVariant: InstanceType<typeof SelectionVariant>,\n\t\toStartupParameters: { [key: string]: any },\n\t\taDefaultedParameters: any[]\n\t) {\n\t\tif (!Array.isArray(aDefaultedParameters)) {\n\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t}\n\n\t\tlet sPropName, i;\n\t\t// First we do some parsing of the StartUp Parameters.\n\t\tconst oStartupParametersAdjusted: { [key: string]: any } = {};\n\t\tfor (sPropName in oStartupParameters) {\n\t\t\tif (!oStartupParameters.hasOwnProperty(sPropName)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// if (sPropName === SAP_SYSTEM_PROPERTY || sPropName === DEFAULTED_PARAMETER_PROPERTY) {\n\t\t\tif (this._isTechnicalParameter(sPropName) || this._isFEParameter(sPropName) || sPropName === HYBRID_IAPP_STATE_KEY) {\n\t\t\t\t// Do not add the SAP system parameter to the selection variant as it is a technical parameter\n\t\t\t\t// not relevant for the selection variant.\n\t\t\t\t// Do not add the startup parameter for default values to the selection variant. The information, which parameters\n\t\t\t\t// are defaulted, is available in the defaulted selection variant.\n\t\t\t\t// In case, FE Parameters we shall skip it.(the application needs to fetch it from URL params)\n\t\t\t\t// Skip the hybridIAppStateKey present as part of 'Hybrid' navigation type not relevant for the selection variant\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// We support parameters as a map with strings and as a map with value arrays\n\t\t\tif (typeof oStartupParameters[sPropName] === \"string\") {\n\t\t\t\toStartupParametersAdjusted[sPropName] = oStartupParameters[sPropName];\n\t\t\t} else if (Array.isArray(oStartupParameters[sPropName]) && oStartupParameters[sPropName].length === 1) {\n\t\t\t\toStartupParametersAdjusted[sPropName] = oStartupParameters[sPropName][0]; // single-valued parameters\n\t\t\t} else if (Array.isArray(oStartupParameters[sPropName]) && oStartupParameters[sPropName].length > 1) {\n\t\t\t\toStartupParametersAdjusted[sPropName] = oStartupParameters[sPropName]; // multi-valued parameters\n\t\t\t} else {\n\t\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t\t}\n\t\t}\n\n\t\t// Construct two selection variants for defaults and navigation to be returned by the function.\n\t\tconst oDefaultedSelVar = new SelectionVariant();\n\t\tconst oNavigationSelVar = new SelectionVariant();\n\n\t\tconst aSelVarPropNames = oSelectionVariant.getParameterNames().concat(oSelectionVariant.getSelectOptionsPropertyNames());\n\t\tfor (i = 0; i < aSelVarPropNames.length; i++) {\n\t\t\tsPropName = aSelVarPropNames[i];\n\t\t\tif (sPropName in oStartupParametersAdjusted) {\n\t\t\t\t// Resolve conflict.\n\t\t\t\tif (aDefaultedParameters.indexOf(sPropName) > -1) {\n\t\t\t\t\toNavigationSelVar.massAddSelectOption(sPropName, oSelectionVariant.getValue(sPropName)!);\n\t\t\t\t\tthis._addParameterValues(oDefaultedSelVar, sPropName, \"I\", \"EQ\", oStartupParametersAdjusted[sPropName]);\n\t\t\t\t} else {\n\t\t\t\t\tswitch (this.sParamHandlingMode) {\n\t\t\t\t\t\tcase ParamHandlingMode.SelVarWins:\n\t\t\t\t\t\t\toNavigationSelVar.massAddSelectOption(sPropName, oSelectionVariant.getValue(sPropName)!);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase ParamHandlingMode.URLParamWins:\n\t\t\t\t\t\t\tthis._addParameterValues(oNavigationSelVar, sPropName, \"I\", \"EQ\", oStartupParametersAdjusted[sPropName]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase ParamHandlingMode.InsertInSelOpt:\n\t\t\t\t\t\t\toNavigationSelVar.massAddSelectOption(sPropName, oSelectionVariant.getValue(sPropName)!);\n\t\t\t\t\t\t\tthis._addParameterValues(oNavigationSelVar, sPropName, \"I\", \"EQ\", oStartupParametersAdjusted[sPropName]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (aDefaultedParameters.indexOf(sPropName) > -1) {\n\t\t\t\t// parameter only in SelVar\n\t\t\t\toDefaultedSelVar.massAddSelectOption(sPropName, oSelectionVariant.getValue(sPropName)!);\n\t\t\t} else {\n\t\t\t\toNavigationSelVar.massAddSelectOption(sPropName, oSelectionVariant.getValue(sPropName)!);\n\t\t\t}\n\t\t}\n\n\t\tfor (sPropName in oStartupParametersAdjusted) {\n\t\t\t// The case where the parameter appears twice has already been taken care of above so we skip it here.\n\t\t\tif (aSelVarPropNames.indexOf(sPropName) > -1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (aDefaultedParameters.indexOf(sPropName) > -1) {\n\t\t\t\tthis._addParameterValues(oDefaultedSelVar, sPropName, \"I\", \"EQ\", oStartupParametersAdjusted[sPropName]);\n\t\t\t} else {\n\t\t\t\tthis._addParameterValues(oNavigationSelVar, sPropName, \"I\", \"EQ\", oStartupParametersAdjusted[sPropName]);\n\t\t\t}\n\t\t}\n\n\t\t// the selection variant used for navigation should be filled with defaults in case that only defaults exist\n\t\tlet bNavSelVarHasDefaultsOnly = false;\n\t\tif (oNavigationSelVar.isEmpty()) {\n\t\t\tbNavSelVarHasDefaultsOnly = true;\n\t\t\tconst aPropNames = oDefaultedSelVar.getSelectOptionsPropertyNames();\n\t\t\tfor (i = 0; i < aPropNames.length; i++) {\n\t\t\t\toNavigationSelVar.massAddSelectOption(aPropNames[i], oDefaultedSelVar.getValue(aPropNames[i])!);\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\toNavigationSelVar: oNavigationSelVar,\n\t\t\toDefaultedSelVar: oDefaultedSelVar,\n\t\t\tbNavSelVarHasDefaultsOnly: bNavSelVarHasDefaultsOnly\n\t\t};\n\t}\n\n\t_addParameterValues(oSelVariant: any, sPropName: any, sSign: any, sOption: any, oValues: any) {\n\t\tif (Array.isArray(oValues)) {\n\t\t\tfor (let i = 0; i < oValues.length; i++) {\n\t\t\t\toSelVariant.addSelectOption(sPropName, sSign, sOption, oValues[i]);\n\t\t\t}\n\t\t} else {\n\t\t\toSelVariant.addSelectOption(sPropName, sSign, sOption, oValues);\n\t\t}\n\t}\n\n\t/**\n\t * Changes the URL according to the current sAppStateKey. As an reaction route change event will be triggered.\n\t *\n\t * @param sAppStateKey The new app state key.\n\t * @public\n\t */\n\treplaceHash(sAppStateKey: string) {\n\t\tconst oHashChanger = this.oRouter.oHashChanger ? this.oRouter.oHashChanger : HashChanger.getInstance();\n\t\tconst sAppHashOld = oHashChanger.getHash();\n\t\t/*\n\t\t * use .getHash() here instead of .getAppHash() to also be able dealing with environments where only SAPUI5 is loaded and the UShell is\n\t\t * not initialized properly.\n\t\t */\n\t\tconst sAppHashNew = this._replaceInnerAppStateKey(sAppHashOld, sAppStateKey);\n\t\toHashChanger.replaceHash(sAppHashNew);\n\t}\n\n\t/**\n\t * Changes the URL according to the current app state and stores the app state for later retrieval.\n\t *\n\t * @param mInnerAppData Object containing the current state of the app\n\t * @param bImmediateHashReplace If set to false, the inner app hash will not be replaced until storing is successful; do not\n\t *        set to false if you cannot react to the resolution of the Promise, for example, when calling the beforeLinkPressed event\n\t * @param bSkipHashReplace If set to true, the inner app hash will not be replaced in the storeInnerAppStateAsync. Also the bImmediateHashReplace\n\t * \t\t  will be ignored.\n\t * @returns A Promise object to monitor when all the actions of the function have been executed; if the execution is successful, the\n\t *          app state key is returned; if an error occurs, an object of type {@link sap.fe.navigation.NavError} is\n\t *          returned\n\t * @public\n\t * @example <code>\n\t * sap.ui.define([\"sap/fe/navigation/NavigationHandler\"], function (NavigationHandler) {\n\t * \tvar oNavigationHandler = new NavigationHandler(oController);\n\t * \tvar mInnerAppData = {\n\t * \t\tselectionVariant : oSmartFilterBar.getDataSuiteFormat(),\n\t * \t\ttableVariantId : oSmartTable.getCurrentVariantId(),\n\t * \t\tcustomData : oMyCustomData\n\t * \t};\n\t *\n\t * \tvar oStoreInnerAppStatePromise = oNavigationHandler.storeInnerAppStateAsync(mInnerAppData);\n\t *\n\t * \toStoreInnerAppStatePromise.done(function(sAppStateKey){\n\t * \t\t//your inner app state is saved now, sAppStateKey was added to URL\n\t * \t\t//perform actions that must run after save\n\t * \t});\n\t *\n\t * \toStoreInnerAppStatePromise.fail(function(oError){\n\t * \t\t//some error handling\n\t * \t});\n\t * });\n\t * </code>\n\t */\n\tstoreInnerAppStateAsync(\n\t\tmInnerAppData: InnerAppData,\n\t\tbImmediateHashReplace?: boolean,\n\t\tbSkipHashReplace?: boolean\n\t): jQuery.Promise<string> {\n\t\tif (typeof bImmediateHashReplace !== \"boolean\") {\n\t\t\tbImmediateHashReplace = true; // default\n\t\t}\n\t\tconst oNavHandler = this;\n\t\tconst oMyDeferred = jQuery.Deferred<string>();\n\n\t\tconst fnReplaceHash = function (sAppStateKey: any) {\n\t\t\tconst oHashChanger = oNavHandler.oRouter.oHashChanger ? oNavHandler.oRouter.oHashChanger : HashChanger.getInstance();\n\t\t\tconst sAppHashOld = oHashChanger.getHash();\n\t\t\t/*\n\t\t\t * use .getHash() here instead of .getAppHash() to also be able dealing with environments where only SAPUI5 is loaded and the UShell\n\t\t\t * is not initialized properly.\n\t\t\t */\n\t\t\tconst sAppHashNew = oNavHandler._replaceInnerAppStateKey(sAppHashOld, sAppStateKey);\n\t\t\toHashChanger.replaceHash(sAppHashNew);\n\t\t};\n\n\t\t// in case mInnerAppState is empty, do not overwrite the last saved state\n\t\tif (isEmptyObject(mInnerAppData as object)) {\n\t\t\toMyDeferred.resolve(\"\");\n\t\t\treturn oMyDeferred.promise();\n\t\t}\n\n\t\t// check if we already saved the same data\n\t\tconst sAppStateKeyCached = this._oLastSavedInnerAppData.sAppStateKey;\n\n\t\tconst bInnerAppDataEqual = JSON.stringify(mInnerAppData) === JSON.stringify(this._oLastSavedInnerAppData.oAppData);\n\t\tif (bInnerAppDataEqual && sAppStateKeyCached) {\n\t\t\t// passed inner app state found in cache\n\t\t\tthis._oLastSavedInnerAppData.iCacheHit++;\n\n\t\t\t// replace inner app hash with cached appStateKey in url (just in case the app has changed the hash in meantime)\n\t\t\tfnReplaceHash(sAppStateKeyCached);\n\t\t\toMyDeferred.resolve(sAppStateKeyCached);\n\t\t\treturn oMyDeferred.promise();\n\t\t}\n\n\t\t// passed inner app state not found in cache\n\t\tthis._oLastSavedInnerAppData.iCacheMiss++;\n\n\t\tconst fnOnAfterSave = function (sAppStateKey: any) {\n\t\t\t// replace inner app hash with new appStateKey in url\n\t\t\tif (!bSkipHashReplace && !bImmediateHashReplace) {\n\t\t\t\tfnReplaceHash(sAppStateKey);\n\t\t\t}\n\n\t\t\t// remember last saved state\n\t\t\toNavHandler._oLastSavedInnerAppData.oAppData = mInnerAppData;\n\t\t\toNavHandler._oLastSavedInnerAppData.sAppStateKey = sAppStateKey;\n\t\t\toMyDeferred.resolve(sAppStateKey);\n\t\t};\n\n\t\tconst fnOnError = function (oError: any) {\n\t\t\toMyDeferred.reject(oError);\n\t\t};\n\n\t\tthis._saveAppStateAsync(mInnerAppData, fnOnAfterSave, fnOnError)\n\t\t\t.then(function (sAppStateKey: any) {\n\t\t\t\t/* Note that _sapAppState may return 'undefined' in case that the parsing has failed. In this case, we should not trigger the replacement\n\t\t\t\t * of the App Hash with the generated key, as the container was not written before. Note as well that the error handling has already\n\t\t\t\t * happened before by making the oMyDeferred promise fail (see fnOnError above).\n\t\t\t\t */\n\t\t\t\tif (sAppStateKey !== undefined) {\n\t\t\t\t\t// replace inner app hash with new appStateKey in url\n\t\t\t\t\t// note: we do not wait for the save to be completed: this asynchronously behaviour is necessary if\n\t\t\t\t\t// this method is called e.g. in a onLinkPressed event with no possibility to wait for the promise resolution\n\t\t\t\t\tif (!bSkipHashReplace && bImmediateHashReplace) {\n\t\t\t\t\t\tfnReplaceHash(sAppStateKey);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function () {\n\t\t\t\tLog.error(\"NavigationHandler._saveAppStateAsync failed\");\n\t\t\t});\n\n\t\treturn oMyDeferred.promise();\n\t}\n\n\t/**\n\t * Changes the URL according to the current app state and stores the app state for later retrieval.\n\t *\n\t * @param mInnerAppData Object containing the current state of the app\n\t * @param bImmediateHashReplace If set to false, the inner app hash will not be replaced until storing is successful; do not\n\t *        set to false if you cannot react to the resolution of the Promise, for example, when calling the beforeLinkPressed event\n\t * @returns A Promise object to monitor when all the actions of the function have been executed; if the execution is successful, the\n\t *          app state key is returned; if an error occurs, an object of type {@link sap.fe.navigation.NavError} is\n\t *          returned\n\t * @public\n\t * @example <code>\n\t * sap.ui.define([\"sap/fe/navigation/NavigationHandler\"], function (NavigationHandler) {\n\t * \tvar oNavigationHandler = new NavigationHandler(oController);\n\t * \tvar mInnerAppData = {\n\t * \t\tselectionVariant : oSmartFilterBar.getDataSuiteFormat(),\n\t * \t\ttableVariantId : oSmartTable.getCurrentVariantId(),\n\t * \t\tcustomData : oMyCustomData\n\t * \t};\n\t *\n\t * \tvar oStoreInnerAppStatePromise = oNavigationHandler.storeInnerAppState(mInnerAppData);\n\t *\n\t * \toStoreInnerAppStatePromise.done(function(sAppStateKey){\n\t * \t\t//your inner app state is saved now, sAppStateKey was added to URL\n\t * \t\t//perform actions that must run after save\n\t * \t});\n\t *\n\t * \toStoreInnerAppStatePromise.fail(function(oError){\n\t * \t\t//some error handling\n\t * \t});\n\t * });\n\t * </code>\n\t * @deprecatedsince 1.104\n\t * @deprecated Use the {@link sap.fe.navigation.NavigationHandler.storeInnerAppStateAsync} instead.\n\t */\n\tstoreInnerAppState(mInnerAppData: InnerAppData, bImmediateHashReplace?: boolean): jQuery.Promise<string> {\n\t\tLog.error(\n\t\t\t\"Deprecated API call of 'sap.fe.navigation.NavigationHandler.storeInnerAppState'. Please use 'storeInnerAppStateAsync' instead\",\n\t\t\tundefined,\n\t\t\t\"sap.fe.navigation.NavigationHandler\"\n\t\t);\n\t\tif (typeof bImmediateHashReplace !== \"boolean\") {\n\t\t\tbImmediateHashReplace = true; // default\n\t\t}\n\t\tconst oNavHandler = this;\n\t\tconst oMyDeferred = jQuery.Deferred();\n\n\t\tconst fnReplaceHash = function (sAppStateKey: any) {\n\t\t\tconst oHashChanger = oNavHandler.oRouter.oHashChanger ? oNavHandler.oRouter.oHashChanger : HashChanger.getInstance();\n\t\t\tconst sAppHashOld = oHashChanger.getHash();\n\t\t\t/*\n\t\t\t * use .getHash() here instead of .getAppHash() to also be able dealing with environments where only SAPUI5 is loaded and the UShell\n\t\t\t * is not initialized properly.\n\t\t\t */\n\t\t\tconst sAppHashNew = oNavHandler._replaceInnerAppStateKey(sAppHashOld, sAppStateKey);\n\t\t\toHashChanger.replaceHash(sAppHashNew);\n\t\t};\n\n\t\t// in case mInnerAppState is empty, do not overwrite the last saved state\n\t\tif (isEmptyObject(mInnerAppData as object)) {\n\t\t\toMyDeferred.resolve(\"\");\n\t\t\treturn oMyDeferred.promise();\n\t\t}\n\n\t\t// check if we already saved the same data\n\t\tconst sAppStateKeyCached = this._oLastSavedInnerAppData.sAppStateKey;\n\n\t\tconst bInnerAppDataEqual = JSON.stringify(mInnerAppData) === JSON.stringify(this._oLastSavedInnerAppData.oAppData);\n\t\tif (bInnerAppDataEqual && sAppStateKeyCached) {\n\t\t\t// passed inner app state found in cache\n\t\t\tthis._oLastSavedInnerAppData.iCacheHit++;\n\n\t\t\t// replace inner app hash with cached appStateKey in url (just in case the app has changed the hash in meantime)\n\t\t\tfnReplaceHash(sAppStateKeyCached);\n\t\t\toMyDeferred.resolve(sAppStateKeyCached);\n\t\t\treturn oMyDeferred.promise();\n\t\t}\n\n\t\t// passed inner app state not found in cache\n\t\tthis._oLastSavedInnerAppData.iCacheMiss++;\n\n\t\tconst fnOnAfterSave = function (sAppStateKey: any) {\n\t\t\t// replace inner app hash with new appStateKey in url\n\t\t\tif (!bImmediateHashReplace) {\n\t\t\t\tfnReplaceHash(sAppStateKey);\n\t\t\t}\n\n\t\t\t// remember last saved state\n\t\t\toNavHandler._oLastSavedInnerAppData.oAppData = mInnerAppData;\n\t\t\toNavHandler._oLastSavedInnerAppData.sAppStateKey = sAppStateKey;\n\t\t\toMyDeferred.resolve(sAppStateKey);\n\t\t};\n\n\t\tconst fnOnError = function (oError: any) {\n\t\t\toMyDeferred.reject(oError);\n\t\t};\n\n\t\tconst sAppStateKey = this._saveAppState(mInnerAppData, fnOnAfterSave, fnOnError);\n\t\t/*\n\t\t * Note that _sapAppState may return 'undefined' in case that the parsing has failed. In this case, we should not trigger the replacement\n\t\t * of the App Hash with the generated key, as the container was not written before. Note as well that the error handling has already\n\t\t * happened before by making the oMyDeferred promise fail (see fnOnError above).\n\t\t */\n\t\tif (sAppStateKey !== undefined) {\n\t\t\t// replace inner app hash with new appStateKey in url\n\t\t\t// note: we do not wait for the save to be completed: this asynchronously behaviour is necessary if\n\t\t\t// this method is called e.g. in a onLinkPressed event with no possibility to wait for the promise resolution\n\t\t\tif (bImmediateHashReplace) {\n\t\t\t\tfnReplaceHash(sAppStateKey);\n\t\t\t}\n\t\t}\n\n\t\treturn oMyDeferred.promise();\n\t}\n\n\t/**\n\t * Changes the URL according to the current app state and stores the app state for later retrieval.\n\t *\n\t * @param mInnerAppData Object containing the current state of the app\n\t * @param bImmediateHashReplace If set to false, the inner app hash will not be replaced until storing is successful; do not\n\t *        set to false if you cannot react to the resolution of the Promise, for example, when calling the beforeLinkPressed event. <b>Note:</b>If\n\t *        not provided it will be treated as set to false. <b>Note:</b>If set to true, the calling instance has to ensure that a follow-on\n\t *        call to <code>replaceHash</code> will take place!\n\t * @returns An object containing the appStateId and a promise object to monitor when all the actions of the function have been\n\t *          executed; Please note that the appStateKey may be undefined or empty.\n\t * @example <code>\n\t * sap.ui.define([\"sap/fe/navigation/NavigationHandler\"], function (NavigationHandler) {\n\t * \tvar oNavigationHandler = new NavigationHandler(oController);\n\t * \tvar mInnerAppData = {\n\t * \t\tselectionVariant : oSmartFilterBar.getDataSuiteFormat(),\n\t * \t\ttableVariantId : oSmartTable.getCurrentVariantId(),\n\t * \t\tcustomData : oMyCustomData\n\t * \t};\n\t *\n\t * \tvar oStoreInnerAppState = storeInnerAppStateWithNonDelayedReturn(mInnerAppData);\n\t * \tvar sAppStateKey = oStoreInnerAppState.appStateKey;\n\t * \tif (!sAppStateKey) {\n\t *    // no appStateKey obtained...\n\t * \t};\n\t * \tvar oStoreInnerAppStatePromise = oStoreInnerAppState.promise;\n\t *\n\t * \toStoreInnerAppStatePromise.done(function(sAppStateKey){\n\t * \t\t//your inner app state is saved now, sAppStateKey was added to URL\n\t * \t\t//perform actions that must run after save\n\t * \t});\n\t *\n\t * \toStoreInnerAppStatePromise.fail(function(oError){\n\t * \t\t//some error handling\n\t * \t});\n\t * });\n\t * </code>\n\t * @public\n\t * @deprecatedsince 1.104\n\t * @deprecated Use the {@link sap.fe.navigation.NavigationHandler.storeInnerAppStateAsync} instead.\n\t */\n\tstoreInnerAppStateWithImmediateReturn(mInnerAppData: InnerAppData, bImmediateHashReplace?: boolean) {\n\t\tLog.error(\n\t\t\t\"Deprecated API call of 'sap.fe.navigation.NavigationHandler.storeInnerAppStateWithImmediateReturn'. Please use 'storeInnerAppStateAsync' instead\",\n\t\t\tundefined,\n\t\t\t\"sap.fe.navigation.NavigationHandler\"\n\t\t);\n\t\tif (typeof bImmediateHashReplace !== \"boolean\") {\n\t\t\tbImmediateHashReplace = false; // default\n\t\t}\n\n\t\tconst oNavHandler = this;\n\t\tconst oAppStatePromise = jQuery.Deferred();\n\n\t\t// in case mInnerAppState is empty, do not overwrite the last saved state\n\t\tif (isEmptyObject(mInnerAppData)) {\n\t\t\treturn {\n\t\t\t\tappStateKey: \"\",\n\t\t\t\tpromise: oAppStatePromise.resolve(\"\")\n\t\t\t};\n\t\t}\n\n\t\t// check if we already saved the same data\n\t\tconst sAppStateKeyCached = this._oLastSavedInnerAppData.sAppStateKey;\n\n\t\tconst bInnerAppDataEqual = JSON.stringify(mInnerAppData) === JSON.stringify(this._oLastSavedInnerAppData.oAppData);\n\t\tif (bInnerAppDataEqual && sAppStateKeyCached) {\n\t\t\t// passed inner app state found in cache\n\t\t\tthis._oLastSavedInnerAppData.iCacheHit++;\n\t\t\treturn {\n\t\t\t\tappStateKey: sAppStateKeyCached,\n\t\t\t\tpromise: oAppStatePromise.resolve(sAppStateKeyCached)\n\t\t\t};\n\t\t}\n\n\t\t// passed inner app state not found in cache\n\t\tthis._oLastSavedInnerAppData.iCacheMiss++;\n\n\t\tconst fnOnAfterSave = function (sAppStateKey: any) {\n\t\t\t// replace inner app hash with new appStateKey in url\n\t\t\tif (!bImmediateHashReplace) {\n\t\t\t\toNavHandler.replaceHash(sAppStateKey);\n\t\t\t}\n\n\t\t\t// remember last saved state\n\t\t\toNavHandler._oLastSavedInnerAppData.oAppData = mInnerAppData;\n\t\t\toNavHandler._oLastSavedInnerAppData.sAppStateKey = sAppStateKey;\n\t\t\toAppStatePromise.resolve(sAppStateKey);\n\t\t};\n\n\t\tconst fnOnError = function (oError: any) {\n\t\t\toAppStatePromise.reject(oError);\n\t\t};\n\n\t\tconst sAppStateKey = this._saveAppState(mInnerAppData, fnOnAfterSave, fnOnError);\n\t\t/*\n\t\t * Note that _sapAppState may return 'undefined' in case that the parsing has failed. In this case, we should not trigger the replacement\n\t\t * of the App Hash with the generated key, as the container was not written before. Note as well that the error handling has already\n\t\t * happened before by making the oMyDeferred promise fail (see fnOnError above).\n\t\t */\n\t\t// if (sAppStateKey !== undefined) {\n\t\t// //replace inner app hash with new appStateKey in url\n\t\t// //note: we do not wait for the save to be completed: this asynchronously behaviour is necessary if\n\t\t// //this method is called e.g. in a onLinkPressed event with no possibility to wait for the promise resolution\n\t\t// if (bImmediateHashReplace) {\n\t\t// fnReplaceHash(sAppStateKey);\n\t\t// }\n\t\t// }\n\t\treturn {\n\t\t\tappStateKey: sAppStateKey,\n\t\t\tpromise: oAppStatePromise.promise()\n\t\t};\n\t}\n\n\t/**\n\t * Processes navigation-related tasks related to beforePopoverOpens event handling for the SmartLink control and returns a Promise object. In\n\t * particular, the following tasks are performed before the SmartLink popover can be opened:\n\t * <ul>\n\t * <li>If <code>mInnerAppData</code> is provided, this inner app state is saved for back navigation at a later time.</li>\n\t * <li>The table event parameters (semantic attributes) and the selection variant data are combined by calling the method\n\t * {@link #.mixAttributesAndSelectionVariant mixAttributesAndSelectionVariant}.</li>\n\t * <li>The combined data is saved as the cross app state to be handed over to the target app, and the corresponding sap-xapp-state key is set\n\t * in the URL.</li>\n\t * <li>All single selections (\"including equal\") of the combined selection data are passed to the SmartLink popover as semantic attributes.</li>\n\t * <li>The method <code>oTableEventParameters.open()</code> is called. Note that this does not really open the popover, but the SmartLink\n\t * control proceeds with firing the event <code>navigationTargetsObtained</code>.</li>\n\t * </ul>.\n\t * <br>\n\t * <b>Node:</b> If the <code>oExternalAppData</code> parameter is not supplied, the external app data will be calculated based on\n\t * the <code>mInnerAppData</code> data.<br>.\n\t *\n\t * @param oTableEventParameters The parameters made available by the SmartTable control when the SmartLink control has been clicked,\n\t *        an instance of a PopOver object\n\t * @param sSelectionVariant Stringified JSON object as returned, for example, from getDataSuiteFormat() of the SmartFilterBar control\n\t * @param mInnerAppData Object containing the current state of the app. If provided, opening the Popover is deferred until the\n\t *        inner app data is saved in a consistent way.\n\t * @param oExternalAppData Object containing the state which will be passed to the target screen.\n\t * @param oExternalAppData.selectionVariant Object containing selectionVariant, which will be passed to the target screen. If not\n\t *        set the sSelectionVariant will be used.\n\t * @param oExternalAppData.presentationVariant Object containing the current ui presentationVariant of the app, which will be\n\t *        passed to the target screen\n\t * @param oExternalAppData.valueTexts Object containing value descriptions, which will be passed to the target screen\n\t * @returns A Promise object to monitor when all actions of the function have been executed; if the execution is successful, the\n\t *          modified oTableEventParameters is returned; if an error occurs, an error object of type\n\t *          {@link sap.fe.navigation.NavError} is returned\n\t * @public\n\t * @example <code>\n\t * sap.ui.define([\"sap/fe/navigation/NavigationHandler\", \"sap/fe/navigation/SelectionVariant\"], function (NavigationHandler, SelectionVariant) {\n\t * \t//event handler for the smart link event \"beforePopoverOpens\"\n\t * \t\tonBeforePopoverOpens: function(oEvent) {\n\t * \t\t\tvar oTableEventParameters = oEvent.getParameters();\n\t *\n\t * \t\t\tvar mInnerAppData = {\n\t * \t\t\t\tselectionVariant : oSmartFilterBar.getDataSuiteFormat(),\n\t * \t\t\t\ttableVariantId : oSmartTable.getCurrentVariantId(),\n\t * \t\t\t\tcustomData : oMyCustomData\n\t * \t\t\t};\n\t *\n\t * \t\t\tvar oSelectionVariant = new SelectionVariant();\n\t * \t\t\toSelectionVariant.addSelectOption(\"CompanyCode\", \"I\", \"EQ\", \"0001\");\n\t * \t\t\toSelectionVariant.addSelectOption(\"Customer\", \"I\", \"EQ\", \"C0001\");\n\t * \t\t\tvar sSelectionVariant= oSelectionVariant.toJSONString();\n\t *\n\t * \t\t\tvar oNavigationHandler = new NavigationHandler(oController);\n\t * \t\t\tvar oSmartLinkPromise = oNavigationHandler.processBeforeSmartLinkPopoverOpens(oTableEventParameters, sSelectionVariant, mInnerAppData);\n\t *\n\t * \t\t\toSmartLinkPromise.done(function(oTableEventParameters){\n\t * \t\t\t\t// here you can add coding that should run after all app states are saved and the semantic attributes are set\n\t * \t\t\t});\n\t *\n\t * \t\t\toSmartLinkPromise.fail(function(oError){\n\t * \t\t\t//some error handling\n\t * \t\t\t});\n\t * \t\t};\n\t * \t});\n\t * </code>\n\t */\n\tprocessBeforeSmartLinkPopoverOpens(\n\t\toTableEventParameters: any,\n\t\tsSelectionVariant: string,\n\t\tmInnerAppData?: InnerAppData,\n\t\toExternalAppData?: {\n\t\t\tselectionVariant?: object;\n\t\t\tpresentationVariant?: object;\n\t\t\tvalueTexts?: object;\n\t\t}\n\t) {\n\t\tconst oMyDeferred = jQuery.Deferred();\n\t\tlet mSemanticAttributes: any;\n\t\tif (oTableEventParameters != undefined) {\n\t\t\tmSemanticAttributes = oTableEventParameters.semanticAttributes;\n\t\t}\n\n\t\tlet oXAppDataObj: any;\n\t\tconst oNavHandler: NavigationHandler = this;\n\n\t\tif (oExternalAppData === undefined) {\n\t\t\toXAppDataObj = {};\n\t\t} else {\n\t\t\toXAppDataObj = oExternalAppData;\n\t\t}\n\n\t\tconst fnStoreXappAndCallOpen = function (mSubSemanticAttributes: any, sSubSelectionVariant: any) {\n\t\t\t// mix the semantic attributes (e.g. from the row line) with the selection variant (e.g. from the filter bar)\n\t\t\tsSubSelectionVariant = oXAppDataObj.selectionVariant || sSubSelectionVariant || \"{}\";\n\n\t\t\tconst iSuppressionBehavior = SuppressionBehavior.raiseErrorOnNull | SuppressionBehavior.raiseErrorOnUndefined;\n\t\t\t/*\n\t\t\t * compatiblity: Until SAPUI5 1.28.5 (or even later) the Smart Link in a Smart Table is filtering all null- and undefined values.\n\t\t\t * Therefore, mSemanticAttributes are already reduced appropriately -- this does not need to be done by\n\t\t\t * mixAttributesAndSelectionVariant again. To ensure that we still have the old behaviour (i.e. an NavError is raised in case that\n\t\t\t * behaviour of the Smart Link control has changed), the \"old\" Suppression Behaviour is retained.\n\t\t\t */\n\n\t\t\tconst oMixedSelVar = oNavHandler.mixAttributesAndSelectionVariant(\n\t\t\t\tmSubSemanticAttributes,\n\t\t\t\tsSubSelectionVariant,\n\t\t\t\tiSuppressionBehavior\n\t\t\t);\n\t\t\tsSubSelectionVariant = oMixedSelVar.toJSONString();\n\n\t\t\t// enrich the semantic attributes with single selections from the selection variant\n\t\t\tlet oTmpData: any = {};\n\t\t\toTmpData.selectionVariant = oMixedSelVar.toJSONObject();\n\n\t\t\toTmpData = oNavHandler._removeMeasureBasedInformation(oTmpData);\n\n\t\t\toTmpData = oNavHandler._checkIsPotentiallySensitive(oTmpData);\n\n\t\t\tmSubSemanticAttributes = oTmpData.selectionVariant\n\t\t\t\t? oNavHandler._getURLParametersFromSelectionVariant(new SelectionVariant(oTmpData.selectionVariant))\n\t\t\t\t: {};\n\n\t\t\tconst fnOnContainerSave = function (sAppStateKey: any) {\n\t\t\t\tif (oTableEventParameters === undefined) {\n\t\t\t\t\t// If oTableEventParameters is undefined, return both semanticAttributes and appStatekey\n\t\t\t\t\toMyDeferred.resolve(mSubSemanticAttributes, sAppStateKey);\n\t\t\t\t} else {\n\t\t\t\t\t// set the stored data in popover and call open()\n\t\t\t\t\toTableEventParameters.setSemanticAttributes(mSubSemanticAttributes);\n\t\t\t\t\toTableEventParameters.setAppStateKey(sAppStateKey);\n\t\t\t\t\toTableEventParameters.open(); // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Note that \"open\" does not open the popover, but proceeds\n\t\t\t\t\t// with firing the onNavTargetsObtained event.\n\t\t\t\t\toMyDeferred.resolve(oTableEventParameters);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst fnOnError = function (oError: any) {\n\t\t\t\toMyDeferred.reject(oError);\n\t\t\t};\n\n\t\t\toXAppDataObj.selectionVariant = sSubSelectionVariant;\n\n\t\t\toXAppDataObj = oNavHandler._removeMeasureBasedInformation(oXAppDataObj);\n\n\t\t\toNavHandler._saveAppStateAsync(oXAppDataObj, fnOnContainerSave, fnOnError);\n\t\t};\n\n\t\tif (mInnerAppData) {\n\t\t\tconst oStoreInnerAppStatePromise = this.storeInnerAppStateAsync(mInnerAppData, true);\n\n\t\t\t// if the inner app state was successfully stored, store also the xapp-state\n\t\t\toStoreInnerAppStatePromise.done(function () {\n\t\t\t\tfnStoreXappAndCallOpen(mSemanticAttributes, sSelectionVariant);\n\t\t\t});\n\n\t\t\toStoreInnerAppStatePromise.fail(function (oError: any) {\n\t\t\t\toMyDeferred.reject(oError);\n\t\t\t});\n\t\t} else {\n\t\t\t// there is no inner app state to save, just put the parameters into xapp-state\n\t\t\tfnStoreXappAndCallOpen(mSemanticAttributes, sSelectionVariant);\n\t\t}\n\n\t\treturn oMyDeferred.promise();\n\t}\n\n\t/**\n\t * Processes selectionVariant string and returns a Promise object (semanticAttributes and AppStateKey).\n\t *\n\t * @param sSelectionVariant Stringified JSON object\n\t * @returns A Promise object to monitor when all actions of the function have been executed; if the execution is successful, the\n\t *          semanticAttributes as well as the appStateKey are returned; if an error occurs, an error object of type\n\t *          {@link sap.fe.navigation.NavError} is returned\n\t * <br>\n\t * @example <code>\n\t * sap.ui.define([\"sap/fe/navigation/NavigationHandler\", \"sap/fe/navigation/SelectionVariant\"], function (NavigationHandler, SelectionVariant) {\n\t * \t\tvar oSelectionVariant = new SelectionVariant();\n\t * \t\toSelectionVariant.addSelectOption(\"CompanyCode\", \"I\", \"EQ\", \"0001\");\n\t * \t\toSelectionVariant.addSelectOption(\"Customer\", \"I\", \"EQ\", \"C0001\");\n\t * \t\tvar sSelectionVariant= oSelectionVariant.toJSONString();\n\t *\n\t * \t\tvar oNavigationHandler = new NavigationHandler(oController);\n\t * \t\tvar oPromiseObject = oNavigationHandler._getAppStateKeyAndUrlParameters(sSelectionVariant);\n\t *\n\t * \t\toPromiseObject.done(function(oSemanticAttributes, sAppStateKey){\n\t * \t\t\t// here you can add coding that should run after all app state and the semantic attributes have been returned.\n\t * \t\t});\n\t *\n\t * \t\toPromiseObject.fail(function(oError){\n\t * \t\t\t//some error handling\n\t * \t\t});\n\t *\t});\n\t * </code>\n\t * @private\n\t * @ui5-restricted\n\t */\n\t_getAppStateKeyAndUrlParameters(sSelectionVariant: string) {\n\t\treturn this.processBeforeSmartLinkPopoverOpens(undefined, sSelectionVariant, undefined, undefined);\n\t}\n\n\t_mixAttributesToSelVariant(mSemanticAttributes: any, oSelVariant: any, iSuppressionBehavior: any) {\n\t\t// add all semantic attributes to the mixed selection variant\n\t\tfor (const sPropertyName in mSemanticAttributes) {\n\t\t\tif (mSemanticAttributes.hasOwnProperty(sPropertyName)) {\n\t\t\t\t// A value of a semantic attribute may not be a string, but can be e.g. a date.\n\t\t\t\t// Since the selection variant accepts only a string, we have to convert it in dependence of the type.\n\t\t\t\tlet vSemanticAttributeValue = mSemanticAttributes[sPropertyName];\n\t\t\t\tif (vSemanticAttributeValue instanceof Date) {\n\t\t\t\t\t// use the same conversion method for dates as the SmartFilterBar: toJSON()\n\t\t\t\t\tvSemanticAttributeValue = vSemanticAttributeValue.toJSON();\n\t\t\t\t} else if (\n\t\t\t\t\tArray.isArray(vSemanticAttributeValue) ||\n\t\t\t\t\t(vSemanticAttributeValue && typeof vSemanticAttributeValue === \"object\")\n\t\t\t\t) {\n\t\t\t\t\tvSemanticAttributeValue = JSON.stringify(vSemanticAttributeValue);\n\t\t\t\t} else if (typeof vSemanticAttributeValue === \"number\" || typeof vSemanticAttributeValue === \"boolean\") {\n\t\t\t\t\tvSemanticAttributeValue = vSemanticAttributeValue.toString();\n\t\t\t\t}\n\n\t\t\t\tif (vSemanticAttributeValue === \"\") {\n\t\t\t\t\tif (iSuppressionBehavior & SuppressionBehavior.ignoreEmptyString) {\n\t\t\t\t\t\tLog.info(\n\t\t\t\t\t\t\t\"Semantic attribute \" +\n\t\t\t\t\t\t\t\tsPropertyName +\n\t\t\t\t\t\t\t\t\" is an empty string and due to the chosen Suppression Behiavour is being ignored.\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (vSemanticAttributeValue === null) {\n\t\t\t\t\tif (iSuppressionBehavior & SuppressionBehavior.raiseErrorOnNull) {\n\t\t\t\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tLog.warning(\"Semantic attribute \" + sPropertyName + \" is null and ignored for mix in to selection variant\");\n\t\t\t\t\t\tcontinue; // ignore!\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (vSemanticAttributeValue === undefined) {\n\t\t\t\t\tif (iSuppressionBehavior & SuppressionBehavior.raiseErrorOnUndefined) {\n\t\t\t\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tLog.warning(\"Semantic attribute \" + sPropertyName + \" is undefined and ignored for mix in to selection variant\");\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof vSemanticAttributeValue === \"string\" || vSemanticAttributeValue instanceof String) {\n\t\t\t\t\toSelVariant.addSelectOption(sPropertyName, \"I\", \"EQ\", vSemanticAttributeValue);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oSelVariant;\n\t}\n\n\t/**\n\t * Combines the given parameters and selection variant into a new selection variant containing properties from both, with the parameters\n\t * overriding existing properties in the selection variant. The new selection variant does not contain any parameters. All parameters are\n\t * merged into select options. The output of this function, converted to a JSON string, can be used for the\n\t * {@link #.navigate NavigationHandler.navigate} method.\n\t *\n\t * @param vSemanticAttributes Object/(Array of Objects) containing key/value pairs\n\t * @param sSelectionVariant The selection variant in string format as provided by the SmartFilterBar control\n\t * @param [iSuppressionBehavior=sap.fe.navigation.SuppressionBehavior.standard] Indicates whether semantic\n\t *        attributes with special values (see {@link sap.fe.navigation.SuppressionBehavior suppression behavior}) must be\n\t *        suppressed before they are combined with the selection variant; several\n\t *        {@link sap.fe.navigation.SuppressionBehavior suppression behaviors} can be combined with the bitwise OR operator\n\t *        (|)\n\t * @returns Instance of {@link sap.fe.navigation.SelectionVariant}\n\t * @public\n\t * @example <code>\n\t * sap.ui.define([\"sap/fe/navigation/NavigationHandler\", \"sap/fe/navigation/SelectionVariant\"], function (NavigationHandler, SelectionVariant) {\n\t * \tvar vSemanticAttributes = { \"Customer\" : \"C0001\" };\n\t * \tor\n\t * \tvar vSemanticAttributes = [{ \"Customer\" : \"C0001\" },{ \"Customer\" : \"C0002\" }];\n\t * \tvar sSelectionVariant = oSmartFilterBar.getDataSuiteFormat();\n\t * \tvar oNavigationHandler = new NavigationHandler(oController);\n\t * \tvar sNavigationSelectionVariant = oNavigationHandler.mixAttributesAndSelectionVariant(vSemanticAttributes, sSelectionVariant).toJSONString();\n\t * \t// In case of an vSemanticAttributes being an array, the semanticAttributes are merged to a single SV and compared against the sSelectionVariant(second agrument).\n\t * \t// Optionally, you can specify one or several suppression behaviors. Several suppression behaviors are combined with the bitwise OR operator, e.g.\n\t * \t// var iSuppressionBehavior = sap.fe.navigation.SuppressionBehavior.raiseErrorOnNull | sap.fe.navigation.SuppressionBehavior.raiseErrorOnUndefined;\n\t * \t// var sNavigationSelectionVariant = oNavigationHandler.mixAttributesAndSelectionVariant(mSemanticAttributes, sSelectionVariant, iSuppressionBehavior).toJSONString();\n\t *\n\t * \toNavigationHandler.navigate(\"SalesOrder\", \"create\", sNavigationSelectionVariant);\n\t * });\n\t * </code>\n\t */\n\tmixAttributesAndSelectionVariant(\n\t\tvSemanticAttributes: object | any[],\n\t\tsSelectionVariant: string | SerializedSelectionVariant,\n\t\tiSuppressionBehavior?: number\n\t): SelectionVariant {\n\t\tconst oSelectionVariant = new SelectionVariant(sSelectionVariant);\n\t\tconst oNewSelVariant = new SelectionVariant();\n\t\tconst oNavHandler = this;\n\n\t\tconst filterUrl = oSelectionVariant.getFilterContextUrl();\n\t\tif (filterUrl) {\n\t\t\toNewSelVariant.setFilterContextUrl(filterUrl);\n\t\t}\n\n\t\tconst contextUrl = oSelectionVariant.getParameterContextUrl();\n\t\tif (contextUrl) {\n\t\t\toNewSelVariant.setParameterContextUrl(contextUrl);\n\t\t}\n\t\tif (Array.isArray(vSemanticAttributes)) {\n\t\t\tvSemanticAttributes.forEach(function (mSemanticAttributes: any) {\n\t\t\t\toNavHandler._mixAttributesToSelVariant(mSemanticAttributes, oNewSelVariant, iSuppressionBehavior);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._mixAttributesToSelVariant(vSemanticAttributes, oNewSelVariant, iSuppressionBehavior);\n\t\t}\n\n\t\t// add parameters that are not part of the oNewSelVariant yet\n\t\tconst aParameters = oSelectionVariant.getParameterNames();\n\t\tlet i;\n\t\tfor (i = 0; i < aParameters.length; i++) {\n\t\t\tif (!oNewSelVariant.getSelectOption(aParameters[i])) {\n\t\t\t\toNewSelVariant.addSelectOption(aParameters[i], \"I\", \"EQ\", oSelectionVariant.getParameter(aParameters[i]));\n\t\t\t}\n\t\t}\n\n\t\t// add selOptions that are not part of the oNewSelVariant yet\n\t\tconst aSelOptionNames = oSelectionVariant.getSelectOptionsPropertyNames();\n\t\tfor (i = 0; i < aSelOptionNames.length; i++) {\n\t\t\t// add selOptions that are not part of the oNewSelVariant yet\n\t\t\tconst aSelectOption: any[] = oSelectionVariant.getSelectOption(aSelOptionNames[i])!;\n\t\t\tif (!oNewSelVariant.getSelectOption(aSelOptionNames[i])) {\n\t\t\t\tfor (let j = 0; j < aSelectOption.length; j++) {\n\t\t\t\t\toNewSelVariant.addSelectOption(\n\t\t\t\t\t\taSelOptionNames[i],\n\t\t\t\t\t\taSelectOption[j].Sign,\n\t\t\t\t\t\taSelectOption[j].Option,\n\t\t\t\t\t\taSelectOption[j].Low,\n\t\t\t\t\t\taSelectOption[j].High\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn oNewSelVariant;\n\t}\n\n\t_ensureSelectionVariantFormatString(vSelectionVariant: any) {\n\t\t/*\n\t\t * There are legacy AppStates where the SelectionVariant is being stored as a string. However, that is not compliant to the specification,\n\t\t * which states that a standard JS object shall be provided. Internally, however, the selectionVariant is always of type string. Situation\n\t\t * Persistency internal API ---------------- ------------------ --------------------- legacy string string new approach (JSON) object\n\t\t * string\n\t\t */\n\n\t\tif (vSelectionVariant === undefined) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tlet vConvertedSelectionVariant = vSelectionVariant;\n\n\t\tif (typeof vSelectionVariant === \"object\") {\n\t\t\tvConvertedSelectionVariant = JSON.stringify(vSelectionVariant);\n\t\t}\n\n\t\treturn vConvertedSelectionVariant;\n\t}\n\n\t_fnHandleAppStatePromise(oReturn: any, fnOnAfterSave: any, fnOnError: any) {\n\t\toReturn.promise.done(function () {\n\t\t\tif (fnOnAfterSave) {\n\t\t\t\tfnOnAfterSave(oReturn.appStateKey);\n\t\t\t}\n\t\t});\n\n\t\tif (fnOnError) {\n\t\t\tconst oNavHandler = this;\n\t\t\toReturn.promise.fail(function () {\n\t\t\t\tconst oError = oNavHandler._createTechnicalError(\"NavigationHandler.AppStateSave.failed\");\n\t\t\t\tfnOnError(oError);\n\t\t\t});\n\t\t}\n\t}\n\n\t_saveAppStateAsync(oAppData: any, fnOnAfterSave: any, fnOnError: any) {\n\t\tconst oNavHandler = this;\n\t\treturn this._fnSaveAppStateAsync(oAppData, fnOnError).then(function (oReturn: any) {\n\t\t\tif (oReturn) {\n\t\t\t\toNavHandler._fnHandleAppStatePromise(oReturn, fnOnAfterSave, fnOnError);\n\t\t\t\treturn oReturn.appStateKey;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\t}\n\n\t_saveAppState(oAppData: any, fnOnAfterSave: any, fnOnError: any) {\n\t\tconst oReturn = this._saveAppStateWithImmediateReturn(oAppData, fnOnError);\n\t\tif (oReturn) {\n\t\t\tthis._fnHandleAppStatePromise(oReturn, fnOnAfterSave, fnOnError);\n\t\t\treturn oReturn.appStateKey;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t_fnSaveAppStateWithImmediateReturn(oAppData: any, oAppState: any, fnOnError: any) {\n\t\tconst sAppStateKey = oAppState.getKey();\n\t\tconst oAppDataForSave = this._fetchAppDataForSave(oAppData, fnOnError);\n\t\tif (!oAppDataForSave) {\n\t\t\treturn undefined;\n\t\t}\n\t\toAppState.setData(oAppDataForSave);\n\t\tconst oSavePromise = oAppState.save();\n\n\t\treturn {\n\t\t\tappStateKey: sAppStateKey,\n\t\t\tpromise: oSavePromise.promise()\n\t\t};\n\t}\n\n\t_fetchAppDataForSave(oAppData: InnerAppData, fnOnError: any) {\n\t\tlet oAppDataForSave: Partial<InnerAppData> = {};\n\n\t\tif (oAppData.hasOwnProperty(\"selectionVariant\")) {\n\t\t\toAppDataForSave.selectionVariant = oAppData.selectionVariant;\n\n\t\t\tif (oAppData.selectionVariant) {\n\t\t\t\t/*\n\t\t\t\t * The specification states that Selection Variants need to be JSON objects. However, internally, we work with strings for\n\t\t\t\t * \"selectionVariant\". Therefore, in case that this is a string, we need to JSON-parse the data.\n\t\t\t\t */\n\t\t\t\tif (typeof oAppData.selectionVariant === \"string\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\toAppDataForSave.selectionVariant = JSON.parse(oAppData.selectionVariant);\n\t\t\t\t\t} catch (x) {\n\t\t\t\t\t\tconst oError = this._createTechnicalError(\"NavigationHandler.AppStateSave.parseError\");\n\t\t\t\t\t\tif (fnOnError) {\n\t\t\t\t\t\t\tfnOnError(oError);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this._sMode === Mode.ODataV2) {\n\t\t\toAppDataForSave = extend(\n\t\t\t\t{\n\t\t\t\t\tselectionVariant: {},\n\t\t\t\t\ttableVariantId: \"\",\n\t\t\t\t\tcustomData: {}\n\t\t\t\t},\n\t\t\t\toAppDataForSave\n\t\t\t) as InnerAppData;\n\n\t\t\tif (oAppData.tableVariantId) {\n\t\t\t\toAppDataForSave.tableVariantId = oAppData.tableVariantId;\n\t\t\t}\n\t\t\tif (oAppData.customData) {\n\t\t\t\toAppDataForSave.customData = oAppData.customData;\n\t\t\t}\n\t\t\tif (oAppData.presentationVariant) {\n\t\t\t\toAppDataForSave.presentationVariant = oAppData.presentationVariant;\n\t\t\t}\n\t\t\tif (oAppData.valueTexts) {\n\t\t\t\toAppDataForSave.valueTexts = oAppData.valueTexts;\n\t\t\t}\n\t\t\tif (oAppData.semanticDates) {\n\t\t\t\toAppDataForSave.semanticDates = oAppData.semanticDates;\n\t\t\t}\n\t\t} else {\n\t\t\tconst oAppDataClone = Object.assign({}, oAppData);\n\t\t\toAppDataForSave = merge(oAppDataClone, oAppDataForSave);\n\t\t}\n\t\toAppDataForSave = this._checkIsPotentiallySensitive(oAppDataForSave);\n\t\treturn oAppDataForSave;\n\t}\n\n\t_fnSaveAppStateAsync(oAppData: any, fnOnError?: any) {\n\t\tconst oNavHandler = this;\n\t\treturn this._getAppNavigationServiceAsync()\n\t\t\t.then(function (oCrossAppNavService: any) {\n\t\t\t\treturn oCrossAppNavService.createEmptyAppStateAsync(oNavHandler.oComponent);\n\t\t\t})\n\t\t\t.then(function (oAppState: any) {\n\t\t\t\treturn oNavHandler._fnSaveAppStateWithImmediateReturn(oAppData, oAppState, fnOnError);\n\t\t\t})\n\t\t\t.catch(function (oError: any) {\n\t\t\t\tif (fnOnError) {\n\t\t\t\t\tfnOnError(oError);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t_saveAppStateWithImmediateReturn(oAppData: any, fnOnError?: any) {\n\t\tconst oAppState = this._getAppNavigationService().createEmptyAppState(this.oComponent);\n\t\treturn this._fnSaveAppStateWithImmediateReturn(oAppData, oAppState, fnOnError);\n\t}\n\n\t/**\n\t * Retrieves the loaded IApp State and navigation type once resolved.\n\t *\n\t * @param sAppStateKey The IAppStateKey to retrieve the AppState data.\n\t * @param oDeferred Jquery deferred object to resolve the AppState data.\n\t * @param navType Navigation type for which AppState is retrieved.\n\t * @returns The deferred object which is resolved with loaded app state data\n\t and navigation type.\n\t * @private\n\t */\n\t_loadAppState(sAppStateKey: string, oDeferred: jQuery.Deferred, navType: string) {\n\t\tconst oNavHandler = this;\n\t\tthis._getAppNavigationServiceAsync()\n\t\t\t.then(function (oCrossAppNavService: any) {\n\t\t\t\tconst oAppStatePromise = oCrossAppNavService.getAppState(oNavHandler.oComponent, sAppStateKey);\n\t\t\t\toAppStatePromise.done(function (oAppState: any) {\n\t\t\t\t\tlet oAppData: any = {};\n\t\t\t\t\tconst oAppDataLoaded = oAppState.getData();\n\n\t\t\t\t\tif (typeof oAppDataLoaded === \"undefined\") {\n\t\t\t\t\t\tconst oError = oNavHandler._createTechnicalError(\"NavigationHandler.getDataFromAppState.failed\");\n\t\t\t\t\t\toDeferred.reject(oError, {}, navType);\n\t\t\t\t\t} else if (oNavHandler._sMode === Mode.ODataV2) {\n\t\t\t\t\t\toAppData = {\n\t\t\t\t\t\t\tselectionVariant: \"{}\",\n\t\t\t\t\t\t\toSelectionVariant: new SelectionVariant(),\n\t\t\t\t\t\t\toDefaultedSelectionVariant: new SelectionVariant(),\n\t\t\t\t\t\t\tbNavSelVarHasDefaultsOnly: false,\n\t\t\t\t\t\t\ttableVariantId: \"\",\n\t\t\t\t\t\t\tcustomData: {},\n\t\t\t\t\t\t\tappStateKey: sAppStateKey,\n\t\t\t\t\t\t\tpresentationVariant: {},\n\t\t\t\t\t\t\tvalueTexts: {},\n\t\t\t\t\t\t\tsemanticDates: {},\n\t\t\t\t\t\t\tdata: {}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (oAppDataLoaded.selectionVariant) {\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t * In case that we get an object from the stored AppData (=persistency), we need to stringify the JSON object.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\toAppData.selectionVariant = oNavHandler._ensureSelectionVariantFormatString(oAppDataLoaded.selectionVariant);\n\t\t\t\t\t\t\toAppData.oSelectionVariant = new SelectionVariant(oAppData.selectionVariant);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (oAppDataLoaded.tableVariantId) {\n\t\t\t\t\t\t\toAppData.tableVariantId = oAppDataLoaded.tableVariantId;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (oAppDataLoaded.customData) {\n\t\t\t\t\t\t\toAppData.customData = oAppDataLoaded.customData;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (oAppDataLoaded.presentationVariant) {\n\t\t\t\t\t\t\toAppData.presentationVariant = oAppDataLoaded.presentationVariant;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (oAppDataLoaded.valueTexts) {\n\t\t\t\t\t\t\toAppData.valueTexts = oAppDataLoaded.valueTexts;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (oAppDataLoaded.semanticDates) {\n\t\t\t\t\t\t\toAppData.semanticDates = oAppDataLoaded.semanticDates;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* In V2 case, we need the data in the below format for hybrid case */\n\t\t\t\t\t\tif (navType === NavType.hybrid) {\n\t\t\t\t\t\t\toAppData.data = oAppDataLoaded;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\toAppData = merge(oAppData, oAppDataLoaded);\n\t\t\t\t\t\tif (oAppDataLoaded.selectionVariant) {\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t * In case that we get an object from the stored AppData (=persistency), we need to stringify the JSON object.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\toAppData.selectionVariant = oNavHandler._ensureSelectionVariantFormatString(oAppDataLoaded.selectionVariant);\n\t\t\t\t\t\t\toAppData.oSelectionVariant = new SelectionVariant(oAppData.selectionVariant);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// resolve is called on passed Deferred object to trigger a call of the done method, if implemented\n\t\t\t\t\t// the done method will receive the loaded appState and the navigation type as parameters\n\t\t\t\t\toDeferred.resolve(oAppData, {}, navType);\n\t\t\t\t});\n\t\t\t\toAppStatePromise.fail(function () {\n\t\t\t\t\tconst oError = oNavHandler._createTechnicalError(\"NavigationHandler.getAppState.failed\");\n\t\t\t\t\toDeferred.reject(oError, {}, navType);\n\t\t\t\t});\n\t\t\t\treturn oAppStatePromise;\n\t\t\t})\n\t\t\t.catch(function () {\n\t\t\t\tconst oError = oNavHandler._createTechnicalError(\"NavigationHandler._getAppNavigationServiceAsync.failed\");\n\t\t\t\toDeferred.reject(oError, {}, navType);\n\t\t\t});\n\n\t\treturn oDeferred;\n\t}\n\n\t/**\n\t * Retrieves the parameter value of the sap-iapp-state (the internal apps) from the AppHash string. It automatically takes care about\n\t * compatibility between the old and the new approach of the sap-iapp-state. Precedence is that the new approach is favoured against the old\n\t * approach.\n\t *\n\t * @param sAppHash The AppHash, which may contain a sap-iapp-state parameter (both old and/or new approach)\n\t * @returns The value of sap-iapp-state (i.e. the name of the container to retrieve the parameters), or <code>undefined</code> in\n\t *         case that no sap-iapp-state was found in <code>sAppHash</code>.\n\t * @private\n\t */\n\t_getInnerAppStateKey(sAppHash: string) {\n\t\t// trivial case: no app hash available at all.\n\t\tif (!sAppHash) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/* new approach: separated via question mark / part of the query parameter of the AppHash */\n\t\tlet aMatches = this._rIAppStateNew.exec(sAppHash);\n\n\t\t/* old approach: spearated via slashes / i.e. part of the route itself */\n\t\tif (aMatches === null) {\n\t\t\taMatches = this._rIAppStateOld.exec(sAppHash);\n\t\t}\n\n\t\t/*\n\t\t * old approach: special case: if there is no deep route/key defined, the sap-iapp-state may be at the beginning of the string, without\n\t\t * any separation with the slashes\n\t\t */\n\t\tif (aMatches === null) {\n\t\t\taMatches = this._rIAppStateOldAtStart.exec(sAppHash);\n\t\t}\n\n\t\tif (aMatches === null) {\n\t\t\t// there is no (valid) sap-iapp-state in the App Hash\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn aMatches[1];\n\t}\n\n\t/**\n\t * Replaces (or inserts) a parameter value (an AppStateKey) for the sap-iapp-state into an existing AppHash string. Other routes/parameters\n\t * are ignored and returned without modification (\"environmental agnostic\" property). Only the new approach (sap-iapp-state as query parameter\n\t * in the AppHash) is being issued.\n\t *\n\t * @param sAppHash The AppHash into which the sap-iapp-state parameter shall be made available\n\t * @param sAppStateKey The key value of the AppState which shall be stored as parameter value of the sap-iapp-state property.\n\t * @returns The modified sAppHash string, such that the sap-iapp-state has been set based on the new (query option-based)\n\t *         sap-iapp-state. If a sap-iapp-state has been specified before, the key is replaced. If <code>sAppHash</code> was of the old\n\t *         format (sap-iapp-state as part of the keys/route), the format is converted to the new format before the result is returned.\n\t * @private\n\t */\n\t_replaceInnerAppStateKey(sAppHash: string, sAppStateKey: string) {\n\t\tconst sNewIAppState = IAPP_STATE + \"=\" + sAppStateKey;\n\n\t\t/*\n\t\t * generate sap-iapp-states with the new way\n\t\t */\n\t\tif (!sAppHash) {\n\t\t\t// there's no sAppHash key yet\n\t\t\treturn \"?\" + sNewIAppState;\n\t\t}\n\n\t\tconst fnAppendToQueryParameter = function (sSubAppHash: any) {\n\t\t\t// there is an AppHash available, but it does not contain a sap-iapp-state parameter yet - we need to append one\n\n\t\t\t// new approach: we need to check, if a set of query parameters is already available\n\t\t\tif (sSubAppHash.indexOf(\"?\") !== -1) {\n\t\t\t\t// there are already query parameters available - append it as another parameter\n\t\t\t\treturn sSubAppHash + \"&\" + sNewIAppState;\n\t\t\t}\n\t\t\t// there are no a query parameters available yet; create a set with a single parameter\n\t\t\treturn sSubAppHash + \"?\" + sNewIAppState;\n\t\t};\n\n\t\tif (!this._getInnerAppStateKey(sAppHash)) {\n\t\t\treturn fnAppendToQueryParameter(sAppHash);\n\t\t}\n\t\t// There is an AppHash available and there is already an sap-iapp-state in the AppHash\n\n\t\tif (this._rIAppStateNew.test(sAppHash)) {\n\t\t\t// the new approach is being used\n\t\t\treturn sAppHash.replace(this._rIAppStateNew, function (sNeedle: string) {\n\t\t\t\treturn sNeedle.replace(/[=].*/gi, \"=\" + sAppStateKey);\n\t\t\t});\n\t\t}\n\n\t\t// we need to remove the old AppHash entirely and replace it with a new one.\n\n\t\tconst fnReplaceOldApproach = function (rOldApproach: any, sSubAppHash: any) {\n\t\t\tsSubAppHash = sSubAppHash.replace(rOldApproach, \"\");\n\t\t\treturn fnAppendToQueryParameter(sSubAppHash);\n\t\t};\n\n\t\tif (this._rIAppStateOld.test(sAppHash)) {\n\t\t\treturn fnReplaceOldApproach(this._rIAppStateOld, sAppHash);\n\t\t}\n\n\t\tif (this._rIAppStateOldAtStart.test(sAppHash)) {\n\t\t\treturn fnReplaceOldApproach(this._rIAppStateOldAtStart, sAppHash);\n\t\t}\n\n\t\tassert(false, \"internal inconsistency: Approach of sap-iapp-state not known, but _getInnerAppStateKey returned it\");\n\t\treturn undefined;\n\t}\n\n\t_getURLParametersFromSelectionVariant(vSelectionVariant: any) {\n\t\tconst mURLParameters: any = {};\n\t\tlet i = 0;\n\t\tlet oSelectionVariant;\n\n\t\tif (typeof vSelectionVariant === \"string\") {\n\t\t\toSelectionVariant = new SelectionVariant(vSelectionVariant);\n\t\t} else if (typeof vSelectionVariant === \"object\") {\n\t\t\toSelectionVariant = vSelectionVariant;\n\t\t} else {\n\t\t\tthrow new NavError(\"NavigationHandler.INVALID_INPUT\");\n\t\t}\n\n\t\t// add URLs parameters from SelectionVariant.SelectOptions (if single value)\n\t\tconst aSelectProperties = oSelectionVariant.getSelectOptionsPropertyNames();\n\t\tfor (i = 0; i < aSelectProperties.length; i++) {\n\t\t\tconst aSelectOptions = oSelectionVariant.getSelectOption(aSelectProperties[i]);\n\t\t\tif (aSelectOptions.length === 1 && aSelectOptions[0].Sign === \"I\" && aSelectOptions[0].Option === \"EQ\") {\n\t\t\t\tmURLParameters[aSelectProperties[i]] = aSelectOptions[0].Low;\n\t\t\t}\n\t\t}\n\n\t\t// add parameters from SelectionVariant.Parameters\n\t\tconst aParameterNames = oSelectionVariant.getParameterNames();\n\t\tfor (i = 0; i < aParameterNames.length; i++) {\n\t\t\tconst sParameterValue = oSelectionVariant.getParameter(aParameterNames[i]);\n\n\t\t\tmURLParameters[aParameterNames[i]] = sParameterValue;\n\t\t}\n\t\treturn mURLParameters;\n\t}\n\n\t_createTechnicalError(sErrorCode: any) {\n\t\treturn new NavError(sErrorCode);\n\t}\n\n\t/**\n\t * Sets the model that is used for verification of sensitive information. If the model is not set, the unnamed component model is used for the\n\t * verification of sensitive information.\n\t *\n\t * @public\n\t * @param oModel For checking sensitive information\n\t */\n\tsetModel(oModel: V2ODataModel | V4ODataModel) {\n\t\tthis._oModel = oModel;\n\t}\n\n\t_getModel(): V2ODataModel | V4ODataModel {\n\t\treturn this._oModel || this.oComponent.getModel();\n\t}\n\n\t_removeAllProperties(oData: any) {\n\t\tif (oData) {\n\t\t\tif (oData.selectionVariant) {\n\t\t\t\toData.selectionVariant = null;\n\t\t\t}\n\n\t\t\tif (oData.valueTexts) {\n\t\t\t\toData.valueTexts = null;\n\t\t\t}\n\n\t\t\tif (oData.semanticDates) {\n\t\t\t\toData.semanticDates = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t_removeProperties(aFilterName: any, aParameterName: any, oData: any) {\n\t\tif (aFilterName.length && oData && (oData.selectionVariant || oData.valueTexts || oData.semanticDates)) {\n\t\t\taFilterName.forEach(function (sName: any) {\n\t\t\t\tif (oData.selectionVariant.SelectOptions) {\n\t\t\t\t\toData.selectionVariant.SelectOptions.some(function (oValue: any, nIdx: any) {\n\t\t\t\t\t\tif (sName === oValue.PropertyName) {\n\t\t\t\t\t\t\toData.selectionVariant.SelectOptions.splice(nIdx, 1);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (oData.valueTexts && oData.valueTexts.Texts) {\n\t\t\t\t\toData.valueTexts.Texts.forEach(function (oTexts: any) {\n\t\t\t\t\t\tif (oTexts.PropertyTexts) {\n\t\t\t\t\t\t\toTexts.PropertyTexts.some(function (oValue: any, nIdx: any) {\n\t\t\t\t\t\t\t\tif (sName === oValue.PropertyName) {\n\t\t\t\t\t\t\t\t\toTexts.PropertyTexts.splice(nIdx, 1);\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (oData.semanticDates && oData.semanticDates.Dates) {\n\t\t\t\t\toData.semanticDates.Dates.forEach(function (oDates: any, nIdx: any) {\n\t\t\t\t\t\tif (sName === oDates.PropertyName) {\n\t\t\t\t\t\t\toData.semanticDates.Dates.splice(nIdx, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (aParameterName.length && oData && oData.selectionVariant && oData.selectionVariant.Parameters) {\n\t\t\taParameterName.forEach(function (sName: any) {\n\t\t\t\toData.selectionVariant.Parameters.some(function (oValue: any, nIdx: any) {\n\t\t\t\t\tif (sName === oValue.PropertyName || \"$Parameter.\" + sName === oValue.PropertyName) {\n\t\t\t\t\t\toData.selectionVariant.Parameters.splice(nIdx, 1);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\t_isTermTrue(oProperty: any, sTerm: any) {\n\t\tconst fIsTermDefaultTrue = function (oTerm: any) {\n\t\t\tif (oTerm) {\n\t\t\t\treturn oTerm.Bool ? oTerm.Bool !== \"false\" : true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\treturn !!oProperty[sTerm] && fIsTermDefaultTrue(oProperty[sTerm]);\n\t}\n\n\t_isExcludedFromNavigationContext(oProperty: any) {\n\t\treturn this._isTermTrue(oProperty, \"com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext\");\n\t}\n\n\t_isPotentiallySensitive(oProperty: any) {\n\t\treturn this._isTermTrue(oProperty, \"com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive\");\n\t}\n\n\t_isMeasureProperty(oProperty: any) {\n\t\treturn this._isTermTrue(oProperty, \"com.sap.vocabularies.Analytics.v1.Measure\");\n\t}\n\n\t_isToBeExcluded(oProperty: any) {\n\t\treturn this._isPotentiallySensitive(oProperty) || this._isExcludedFromNavigationContext(oProperty);\n\t}\n\n\t/**\n\t * The method creates a context url based on provided data. This context url can either be used as\n\t * {@link sap.fe.navigation.NavigationHandler#setParameterContextUrl ParameterContextUrl} or\n\t * {@link sap.fe.navigation.NavigationHandler#setFilterContextUrl FilterContextUrl}.\n\t *\n\t * @param sEntitySetName Used for url determination\n\t * @param [oModel] Used for url determination. If omitted, the NavigationHandler model is used.\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of missing or wrong passed parameters\n\t * @returns The context url for the given entities\n\t * @protected\n\t */\n\tconstructContextUrl(sEntitySetName: string, oModel?: V2ODataModel | V4ODataModel) {\n\t\tif (!sEntitySetName) {\n\t\t\tthrow new NavError(\"NavigationHandler.NO_ENTITY_SET_PROVIDED\");\n\t\t}\n\n\t\tif (oModel === undefined) {\n\t\t\toModel = this._getModel();\n\t\t}\n\n\t\treturn this._constructContextUrl(oModel) + \"#\" + sEntitySetName;\n\t}\n\n\t_constructContextUrl(oModel: V2ODataModel | V4ODataModel) {\n\t\tlet sServerUrl;\n\n\t\tif (oModel.isA<V2ODataModel>(\"sap.ui.model.odata.v2.ODataModel\")) {\n\t\t\tsServerUrl = oModel._getServerUrl();\n\t\t} else if (oModel.isA<V4ODataModel>(\"sap.ui.model.odata.v4.ODataModel\")) {\n\t\t\tconst oServiceURI = new URI(oModel.sServiceUrl).absoluteTo(document.baseURI);\n\t\t\tsServerUrl = new URI(\"/\").absoluteTo(oServiceURI).toString();\n\t\t}\n\n\t\tif (sServerUrl && sServerUrl.lastIndexOf(\"/\") === sServerUrl.length - 1) {\n\t\t\tsServerUrl = sServerUrl.substr(0, sServerUrl.length - 1);\n\t\t}\n\n\t\treturn sServerUrl + oModel.sServiceUrl + \"/$metadata\";\n\t}\n\n\t/**\n\t * The method verifies, if any of the passed parameters/filters are marked as sensitive, and if this is the case remove those from the app\n\t * data. <b>Note:</b> To use this method, the metadata must be loaded first.\n\t *\n\t * @param oData With potential sensitive information (for OData, external representation using\n\t * <code>oSelectionVariant.toJSONObject()</code> must be used), with the <code>FilterContextUrl</code> or\n\t * <code>ParameterContextUrl</code> property.\n\t * @returns Data without properties marked as sensitive or an empty object if the OData metadata is not fully loaded yet\n\t * @private\n\t */\n\t_checkIsPotentiallySensitive(oData: any) {\n\t\tlet oAdaptedData = oData;\n\t\tif (\n\t\t\toData &&\n\t\t\toData.selectionVariant &&\n\t\t\t((oData.selectionVariant.FilterContextUrl && oData.selectionVariant.SelectOptions) ||\n\t\t\t\t(oData.selectionVariant.ParameterContextUrl && oData.selectionVariant.Parameters))\n\t\t) {\n\t\t\tconst oModel = this._getModel();\n\t\t\tif (this.oComponent && oModel && oModel.isA<V2ODataModel>(\"sap.ui.model.odata.v2.ODataModel\")) {\n\t\t\t\tconst aSensitiveFilterName = [];\n\t\t\t\tconst aSensitiveParameterName = [];\n\t\t\t\tlet i,\n\t\t\t\t\toEntitySet: any,\n\t\t\t\t\toEntityDef: any,\n\t\t\t\t\toSubEntityDef: any,\n\t\t\t\t\toEndRole: any,\n\t\t\t\t\taFilterContextPart = [],\n\t\t\t\t\taParamContextPart = [];\n\n\t\t\t\tconst oMetaModel = oModel.getMetaModel();\n\t\t\t\tif (oModel.getServiceMetadata() && oMetaModel?.oModel) {\n\t\t\t\t\tif (oData.selectionVariant.FilterContextUrl) {\n\t\t\t\t\t\taFilterContextPart = oData.selectionVariant.FilterContextUrl.split(\"#\");\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\taFilterContextPart.length === 2 &&\n\t\t\t\t\t\toData.selectionVariant.SelectOptions &&\n\t\t\t\t\t\tthis._constructContextUrl(oModel).indexOf(aFilterContextPart[0]) === 0\n\t\t\t\t\t) {\n\t\t\t\t\t\toEntitySet = oMetaModel.getODataEntitySet(aFilterContextPart[1]);\n\t\t\t\t\t\tif (oEntitySet) {\n\t\t\t\t\t\t\toEntityDef = oMetaModel.getODataEntityType(oEntitySet.entityType);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toEntityDef = oMetaModel.getODataEntityType(aFilterContextPart[1]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (oEntityDef) {\n\t\t\t\t\t\t\tif (oEntityDef && oEntityDef.property) {\n\t\t\t\t\t\t\t\tfor (i = 0; i < oEntityDef.property.length; i++) {\n\t\t\t\t\t\t\t\t\tif (this._isToBeExcluded(oEntityDef.property[i])) {\n\t\t\t\t\t\t\t\t\t\taSensitiveFilterName.push(oEntityDef.property[i].name);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (oEntityDef.navigationProperty) {\n\t\t\t\t\t\t\t\tfor (i = 0; i < oEntityDef.navigationProperty.length; i++) {\n\t\t\t\t\t\t\t\t\toEndRole = oMetaModel.getODataAssociationEnd(oEntityDef, oEntityDef.navigationProperty[i].name);\n\t\t\t\t\t\t\t\t\tif (!oEndRole || oEndRole.type === oData.selectionVariant.FilterContextUrl) {\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// check if the end role has cardinality 0..1 or 1\n\t\t\t\t\t\t\t\t\tif (oEndRole.multiplicity === \"1\" || oEndRole.multiplicity === \"0..1\") {\n\t\t\t\t\t\t\t\t\t\toSubEntityDef = oMetaModel.getODataEntityType(oEndRole.type);\n\t\t\t\t\t\t\t\t\t\tif (oSubEntityDef && oSubEntityDef.property) {\n\t\t\t\t\t\t\t\t\t\t\tfor (let j = 0; j < oSubEntityDef.property.length; j++) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (this._isToBeExcluded(oSubEntityDef.property[j])) {\n\t\t\t\t\t\t\t\t\t\t\t\t\taSensitiveFilterName.push(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toEntityDef.navigationProperty[i].name + \".\" + oSubEntityDef.property[j].name\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (oData.selectionVariant.ParameterContextUrl) {\n\t\t\t\t\t\taParamContextPart = oData.selectionVariant.ParameterContextUrl.split(\"#\");\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\taParamContextPart.length === 2 &&\n\t\t\t\t\t\toData.selectionVariant.Parameters &&\n\t\t\t\t\t\tthis._constructContextUrl(oModel).indexOf(aParamContextPart[0]) === 0\n\t\t\t\t\t) {\n\t\t\t\t\t\toEntitySet = oMetaModel.getODataEntitySet(aParamContextPart[1]);\n\t\t\t\t\t\tif (oEntitySet) {\n\t\t\t\t\t\t\toEntityDef = oMetaModel.getODataEntityType(oEntitySet.entityType);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toEntityDef = oMetaModel.getODataEntityType(aFilterContextPart[1]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (oEntityDef) {\n\t\t\t\t\t\t\tif (oEntityDef.property) {\n\t\t\t\t\t\t\t\tfor (i = 0; i < oEntityDef.property.length; i++) {\n\t\t\t\t\t\t\t\t\tif (this._isToBeExcluded(oEntityDef.property[i])) {\n\t\t\t\t\t\t\t\t\t\taSensitiveParameterName.push(oEntityDef.property[i].name);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (aSensitiveFilterName.length || aSensitiveParameterName.length) {\n\t\t\t\t\t\toAdaptedData = extend(true as any, {}, oAdaptedData);\n\n\t\t\t\t\t\tthis._removeProperties(aSensitiveFilterName, aSensitiveParameterName, oAdaptedData);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// annotations are not loaded\n\n\t\t\t\t\tthis._removeAllProperties(oAdaptedData);\n\t\t\t\t\tLog.error(\"NavigationHandler: oMetadata are not fully loaded!\");\n\t\t\t\t}\n\t\t\t} else if (this.oComponent && oModel && oModel.isA(\"sap.ui.model.odata.v4.ODataModel\")) {\n\t\t\t\treturn this._removeSensitiveDataForODataV4(oAdaptedData);\n\t\t\t}\n\t\t}\n\n\t\treturn oAdaptedData;\n\t}\n\n\t_removeMeasureBasedInformation(oAppData: any) {\n\t\tlet oAppDataForSave = oAppData;\n\n\t\tif (oAppData.selectionVariant) {\n\t\t\t/*\n\t\t\t * The specification states that Selection Variants need to be JSON objects. However, internally, we work with strings for\n\t\t\t * \"selectionVariant\". Therefore, in case that this is a string, we need to JSON-parse the data.\n\t\t\t */\n\t\t\tif (typeof oAppData.selectionVariant === \"string\") {\n\t\t\t\ttry {\n\t\t\t\t\toAppDataForSave.selectionVariant = JSON.parse(oAppData.selectionVariant);\n\t\t\t\t} catch (x) {\n\t\t\t\t\tLog.error(\"NavigationHandler: _removeMeasureBasedInformation parse error\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toAppDataForSave = this._removeMeasureBasedProperties(oAppDataForSave);\n\t\t}\n\n\t\treturn oAppDataForSave;\n\t}\n\n\t/**\n\t * The method verifies if any of the passed parameters/filters are marked as a measure. If this is the case, they are removed from the xapp\n\t * app data. <b>Note:</b> To use this method, the metadata must be loaded first.\n\t *\n\t * @param oData With potential sensitive information (for OData, external representation using\n\t * <code>oSelectionVariant.toJSONObject()</code> must be used), with the <code>FilterContextUrl</code> or\n\t * <code>ParameterContextUrl</code> property.\n\t * @returns Data without properties marked as measures or an empty object if the OData metadata is not fully loaded yet\n\t * @private\n\t */\n\t_removeMeasureBasedProperties(oData: any) {\n\t\tlet oAdaptedData = oData;\n\t\tconst aMeasureFilterName = [];\n\t\tconst aMeasureParameterName = [];\n\t\tlet i,\n\t\t\toModel,\n\t\t\toMetaModel,\n\t\t\toEntitySet: any,\n\t\t\toEntityDef: any,\n\t\t\toSubEntityDef: any,\n\t\t\toEndRole: any,\n\t\t\taFilterContextPart = [],\n\t\t\taParamContextPart = [];\n\n\t\tif (\n\t\t\toData &&\n\t\t\toData.selectionVariant &&\n\t\t\t((oData.selectionVariant.FilterContextUrl && oData.selectionVariant.SelectOptions) ||\n\t\t\t\t(oData.selectionVariant.ParameterContextUrl && oData.selectionVariant.Parameters))\n\t\t) {\n\t\t\toModel = this._getModel();\n\t\t\tif (this.oComponent && oModel && oModel.isA<V2ODataModel>(\"sap.ui.model.odata.v2.ODataModel\")) {\n\t\t\t\toMetaModel = oModel.getMetaModel();\n\t\t\t\tif (oModel.getServiceMetadata() && oMetaModel && oMetaModel.oModel) {\n\t\t\t\t\tif (oData.selectionVariant.FilterContextUrl) {\n\t\t\t\t\t\taFilterContextPart = oData.selectionVariant.FilterContextUrl.split(\"#\");\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\taFilterContextPart.length === 2 &&\n\t\t\t\t\t\toData.selectionVariant.SelectOptions &&\n\t\t\t\t\t\tthis._constructContextUrl(oModel).indexOf(aFilterContextPart[0]) === 0\n\t\t\t\t\t) {\n\t\t\t\t\t\toEntitySet = oMetaModel.getODataEntitySet(aFilterContextPart[1]);\n\t\t\t\t\t\tif (oEntitySet) {\n\t\t\t\t\t\t\toEntityDef = oMetaModel.getODataEntityType(oEntitySet.entityType);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toEntityDef = oMetaModel.getODataEntityType(aFilterContextPart[1]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (oEntityDef) {\n\t\t\t\t\t\t\tif (oEntityDef && oEntityDef.property) {\n\t\t\t\t\t\t\t\tfor (i = 0; i < oEntityDef.property.length; i++) {\n\t\t\t\t\t\t\t\t\tif (this._isMeasureProperty(oEntityDef.property[i])) {\n\t\t\t\t\t\t\t\t\t\taMeasureFilterName.push(oEntityDef.property[i].name);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (oEntityDef.navigationProperty) {\n\t\t\t\t\t\t\t\tfor (i = 0; i < oEntityDef.navigationProperty.length; i++) {\n\t\t\t\t\t\t\t\t\toEndRole = oMetaModel.getODataAssociationEnd(oEntityDef, oEntityDef.navigationProperty[i].name);\n\t\t\t\t\t\t\t\t\tif (!oEndRole || oEndRole.type === oData.selectionVariant.FilterContextUrl) {\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// check if the end role has cardinality 0..1 or 1\n\t\t\t\t\t\t\t\t\tif (oEndRole.multiplicity === \"1\" || oEndRole.multiplicity === \"0..1\") {\n\t\t\t\t\t\t\t\t\t\toSubEntityDef = oMetaModel.getODataEntityType(oEndRole.type);\n\t\t\t\t\t\t\t\t\t\tif (oSubEntityDef && oSubEntityDef.property) {\n\t\t\t\t\t\t\t\t\t\t\tfor (let j = 0; j < oSubEntityDef.property.length; j++) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (this._isMeasureProperty(oSubEntityDef.property[j])) {\n\t\t\t\t\t\t\t\t\t\t\t\t\taMeasureFilterName.push(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toEntityDef.navigationProperty[i].name + \".\" + oSubEntityDef.property[j].name\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (oData.selectionVariant.ParameterContextUrl) {\n\t\t\t\t\t\taParamContextPart = oData.selectionVariant.ParameterContextUrl.split(\"#\");\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\taParamContextPart.length === 2 &&\n\t\t\t\t\t\toData.selectionVariant.Parameters &&\n\t\t\t\t\t\tthis._constructContextUrl(oModel).indexOf(aParamContextPart[0]) === 0\n\t\t\t\t\t) {\n\t\t\t\t\t\toEntitySet = oMetaModel.getODataEntitySet(aParamContextPart[1]);\n\t\t\t\t\t\tif (oEntitySet) {\n\t\t\t\t\t\t\toEntityDef = oMetaModel.getODataEntityType(oEntitySet.entityType);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toEntityDef = oMetaModel.getODataEntityType(aFilterContextPart[1]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (oEntityDef) {\n\t\t\t\t\t\t\tif (oEntityDef.property) {\n\t\t\t\t\t\t\t\tfor (i = 0; i < oEntityDef.property.length; i++) {\n\t\t\t\t\t\t\t\t\tif (this._isMeasureProperty(oEntityDef.property[i])) {\n\t\t\t\t\t\t\t\t\t\taMeasureParameterName.push(oEntityDef.property[i].name);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (aMeasureFilterName.length || aMeasureParameterName.length) {\n\t\t\t\t\t\t// TQ: needs attention\n\t\t\t\t\t\toAdaptedData = extend(true as any, {}, oAdaptedData);\n\n\t\t\t\t\t\tthis._removeProperties(aMeasureFilterName, aMeasureParameterName, oAdaptedData);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// annotations are not loaded\n\n\t\t\t\t\tthis._removeAllProperties(oAdaptedData);\n\t\t\t\t\tLog.error(\"NavigationHandler: oMetadata are not fully loaded!\");\n\t\t\t\t}\n\t\t\t} else if (this.oComponent && oModel && oModel.isA(\"sap.ui.model.odata.v4.ODataModel\")) {\n\t\t\t\treturn this._removeSensitiveDataForODataV4(oAdaptedData, true);\n\t\t\t}\n\t\t}\n\t\treturn oAdaptedData;\n\t}\n\n\t/**\n\t * Removes sensitive data from the navigation context.\n\t *\n\t * @param oData Selection variant\n\t * @param bMeasure Should measures be removed\n\t * @returns The selection variant after sensitive data has been removed\n\t */\n\t_removeSensitiveDataForODataV4(oData: any, bMeasure?: boolean) {\n\t\tconst oNavHandler = this,\n\t\t\toSV = new SelectionVariant(oData.selectionVariant),\n\t\t\toModel = this._getModel();\n\t\tlet aFilterContextPart: string[] | undefined;\n\n\t\tif (!oModel.getMetaModel().getObject(\"/\")) {\n\t\t\t// annotations are not loaded\n\t\t\tthis._removeAllProperties(oData);\n\t\t\tLog.error(\"NavigationHandler: oMetadata are not fully loaded!\");\n\t\t\treturn oData;\n\t\t}\n\n\t\tif (oData.selectionVariant.FilterContextUrl) {\n\t\t\taFilterContextPart = oData.selectionVariant.FilterContextUrl.split(\"#\");\n\t\t}\n\n\t\tif (\n\t\t\taFilterContextPart?.length === 2 &&\n\t\t\toData.selectionVariant.SelectOptions &&\n\t\t\tthis._constructContextUrl(oModel).indexOf(aFilterContextPart[0]) === 0\n\t\t) {\n\t\t\toSV.removeSelectOption(\"@odata.context\");\n\t\t\toSV.removeSelectOption(\"@odata.metadataEtag\");\n\t\t\toSV.removeSelectOption(\"SAP__Messages\");\n\n\t\t\tconst sEntitySet = aFilterContextPart[1],\n\t\t\t\toMetaModel = oModel.getMetaModel(),\n\t\t\t\taPropertyNames = oSV.getPropertyNames() || [],\n\t\t\t\tfnIsSensitiveData = function (sProp: any, esName: any) {\n\t\t\t\t\tesName = esName || sEntitySet;\n\t\t\t\t\tconst aPropertyAnnotations = oMetaModel.getObject(\"/\" + esName + \"/\" + sProp + \"@\");\n\t\t\t\t\tif (aPropertyAnnotations) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(bMeasure && aPropertyAnnotations[\"@com.sap.vocabularies.Analytics.v1.Measure\"]) ||\n\t\t\t\t\t\t\toNavHandler._checkPropertyAnnotationsForSensitiveData(aPropertyAnnotations)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else if (aPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"]) {\n\t\t\t\t\t\t\tconst oFieldControl = aPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"];\n\t\t\t\t\t\t\tif (oFieldControl[\"$EnumMember\"] && oFieldControl[\"$EnumMember\"].split(\"/\")[1] === \"Inapplicable\") {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t};\n\n\t\t\tfor (let k = 0; k < aPropertyNames.length; k++) {\n\t\t\t\tconst sProperty = aPropertyNames[k];\n\t\t\t\t// properties of the entity set\n\t\t\t\tif (fnIsSensitiveData(sProperty, sEntitySet)) {\n\t\t\t\t\toSV.removeSelectOption(sProperty);\n\t\t\t\t}\n\t\t\t}\n\t\t\toData.selectionVariant = oSV.toJSONObject();\n\t\t}\n\t\treturn oData;\n\t}\n\n\t_checkPropertyAnnotationsForSensitiveData(aPropertyAnnotations: any) {\n\t\treturn (\n\t\t\taPropertyAnnotations[\"@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive\"] ||\n\t\t\taPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext\"]\n\t\t);\n\t}\n\n\t/**\n\t * Retrieves the parameter value of the sap-iapp-state (the internal apps) from the AppHash string. It automatically takes care about\n\t * compatibility between the old and the new approach of the sap-iapp-state. Precedence is that the new approach is favoured against the old\n\t * approach.\n\t *\n\t * @returns The value of sap-iapp-state (i.e. the name of the container to retrieve the parameters), or <code>undefined</code> in\n\t *         case that no sap-iapp-state was found in <code>sAppHash</code>.\n\t * @private\n\t */\n\tgetIAppStateKey() {\n\t\tconst sAppHash = HashChanger.getInstance().getHash();\n\t\treturn this._getInnerAppStateKey(sAppHash);\n\t}\n}\n\n// Exporting the class as properly typed UI5Class\n\nconst NavigationHandlerUI5Class = BaseObject.extend(\n\t\"sap.fe.navigation.NavigationHandler\",\n\tNavigationHandler.prototype as any\n) as typeof NavigationHandler;\ntype NavigationHandlerUI5Class = InstanceType<typeof NavigationHandler>;\nexport default NavigationHandlerUI5Class;\n"],"mappings":"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mBAAmB;MAC3B,CAAC,CAAC,CACDC,KAAK,CAAC,YAAY;QAClBC,GAAG,CAACC,KAAK,CAAC,iEAAiE,CAAC;QAC5E,MAAM,IAAIzB,QAAQ,CAAC,kCAAkC,CAAC;MACvD,CAAC,CAAC;IACJ;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA,OANC;IAAA,OAOAM,UAAU,GAAV,oBAAWnB,WAAuB,EAAE;MACnC,OAAOc,WAAW,CAACyB,YAAY,CAACvC,WAAW,CAAC;IAC7C;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAwC,wBAAwB,GAAxB,kCAAyBC,UAAoB,EAAE;MAC9C,IAAI,CAACC,iBAAiB,GAAGD,UAAU;IACpC;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAlFC;IAAA,OAmFAE,QAAQ,GAAR,kBACCC,eAAuB,EACvBC,WAAmB,EACnBC,qBAAsC,EACtCC,aAA4B,EAC5BC,SAAoB,EACpBC,gBAIC,EACDC,QAAiB,EAChB;MACD,IAAIC,iBAAsB;QACzBC,WAAW;QACXC,YAAiB;QACjBC,kBAAkB;QAClBC,QAAQ,GAAG,KAAK;QAChBC,QAAa,GAAG,CAAC,CAAC;MACnB,MAAMC,WAA8B,GAAG,IAAI;MAE3C,MAAMC,cAAc,GAAG,IAAI,CAACzC,UAAU,CAACI,gBAAgB,EAAE;MACzD;AACF;AACA;AACA;MACE,IAAIqC,cAAc,EAAE;QACnBJ,kBAAkB,GAAGI,cAAc,CA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C;MAClH,IAAIwL,kBAAkB,IAAID,kBAAkB,EAAE;QAC7C;QACA,IAAI,CAACzL,uBAAuB,CAACG,SAAS,EAAE;QACxC,OAAO;UACNgF,WAAW,EAAEsG,kBAAkB;UAC/BxC,OAAO,EAAE+C,gBAAgB,CAACnE,OAAO,CAAC4D,kBAAkB;QACrD,CAAC;MACF;;MAEA;MACA,IAAI,CAACzL,uBAAuB,CAACI,UAAU,EAAE;MAEzC,MAAMuL,aAAa,GAAG,UAAU1L,YAAiB,EAAE;QAClD;QACA,IAAI,CAACoL,qBAAqB,EAAE;UAC3BhI,WAAW,CAACmC,WAAW,CAACvF,YAAY,CAAC;QACtC;;QAEA;QACAoD,WAAW,CAACrD,uBAAuB,CAACE,QAAQ,GAAGkL,aAAa;QAC5D/H,WAAW,CAACrD,uBAAuB,CAACC,YAAY,GAAGA,YAAY;QAC/D+L,gBAAgB,CAACnE,OAAO,CAAC5H,YAAY,CAAC;MACvC,CAAC;MAED,MAAM2C,SAAS,GAAG,UAAUoC,MAAW,EAAE;QACxCgH,gBAAgB,CAACpE,MAAM,CAAC5C,MAAM,CAAC;MAChC,CAAC;MAED,MAAM/E,YAAY,GAAG,IAAI,CAAC6L,aAAa,CAACV,aAAa,EAAEO,aAAa,EAAE/I,SAAS,CAAC;MAChF;AACF;AACA;AACA;AACA;MACE;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,OAAO;QACNuC,WAAW,EAAElF,YAAY;QACzBgJ,OAAO,EAAE+C,gBAAgB,CAAC/C,OAAO;MAClC,CAAC;IACF;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OA9DC;IAAA,OA+DAgD,kCAAkC,GAAlC,4CAC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"}},{"offset":{"line":2292,"column":0},"map":{"version":3,"names":["sap","ui","define","assert","Log","extend","isEmptyObject","merge","BaseObject","HashChanger","UIComponent","URI","openWindow","NavLibrary","NavError","SelectionVariant","_exports","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","NavType","ParamHandlingMode","SuppressionBehavior","Mode","IAPP_STATE","DEFAULTED_PARAMETER_PROPERTY","HYBRID_IAPP_STATE_KEY","NavigationHandler","_BaseObject","oController","sMode","sParamHandlingMode","_this","call","this","_aTechnicalParamaters","_oLastSavedInnerAppData","sAppStateKey","oAppData","iCacheHit","iCacheMiss","_rIAppStateOld","RegExp","_rIAppStateOldAtStart","_rIAppStateNew","oRouter","getRouter","oComponent","getOwnerComponent","_getRouter","getAppComponent","getComponentData","URLParamWins","InsertInSelOpt","SelVarWins","ODataV2","_sMode","_proto","_getAppNavigationService","ushell","Container","getService","_getAppNavigationServiceAsync","getServiceAsync","then","oCrossAppNavService","catch","error","getRouterFor","registerNavigateCallback","fnCallback","_navigateCallback","navigate","sSemanticObject","sActionName","vNavigationParameters","oInnerAppData","fnOnError","oExternalAppData","sNavMode","sSelectionVariant","mParameters","oXAppDataObj","oStartupParameters","bExPlace","oTmpData","oNavHandler","oComponentData","startupParameters","length","undefined","oEnrichedSelVar","_splitInboundNavigationParameters","oNavigationSelVar","toJSONString","selectionVariant","_removeTechnicalParameters","toJSONObject","_removeMeasureBasedInformation","_checkIsPotentiallySensitive","_getURLParametersFromSelectionVariant","oNavArguments","target","semanticObject","action","params","fnNavigate","fnNavExplace","sNewHrefPromise","hrefForExternalAsync","sNewHref","oError","_fnSaveAppStateAsync","oSaveAppStateReturn","appStateKey","ptoExt","toExternal","fnStoreAndNavigate","storeInnerAppStateAsync","replaceHash","oSupportedPromise","isNavigationSupported","done","oTargets","supported","fail","_createTechnicalError","parseNavigation","_oStartupParameters$H","sAppHash","getInstance","getHash","sIAppState","_getInnerAppStateKey","warning","hybridIAppStateKeyParams","hybridDeferred","jQuery","Deferred","iAppStateHybridDeferred","_loadAppState","hybrid","aDefaultedParameters","JSON","parse","oMyDeferred","parseUrlParams","oSubStartupParameters","aSubDefaultedParameters","oSubMyDeferred","sNavType","oSelVars","isEmpty","oDefaultedSelVar","xAppState","reject","resolve","initial","oAppStateData","oSelectionVariant","oDefaultedSelectionVariant","bNavSelVarHasDefaultsOnly","successHandlerHybridState","iAppStateData","_ref","navType","iAppState","failureHandlerHybridState","bIsXappStateNavigation","that","oStartupPromise","getStartupAppState","oAppState","getData","stringify","x","promise","oSelVar","URLParams","setTechnicalParameters","aTechnicalParameters","Array","isArray","getTechnicalParameters","concat","_isTechnicalParameter","sParameterName","toLowerCase","indexOf","_isFEParameter","sPropName","i","aSelVarPropNames","getSelectOptionsPropertyNames","removeSelectOption","oStartupParametersAdjusted","hasOwnProperty","getParameterNames","massAddSelectOption","getValue","_addParameterValues","aPropNames","oSelVariant","sSign","sOption","oValues","addSelectOption","oHashChanger","sAppHashOld","sAppHashNew","_replaceInnerAppStateKey","mInnerAppData","bImmediateHashReplace","bSkipHashReplace","fnReplaceHash","sAppStateKeyCached","bInnerAppDataEqual","fnOnAfterSave","_saveAppStateAsync","storeInnerAppState","_saveAppState","storeInnerAppStateWithImmediateReturn","oAppStatePromise","processBeforeSmartLinkPopoverOpens","oTableEventParameters","mSemanticAttributes","semanticAttributes","fnStoreXappAndCallOpen","mSubSemanticAttributes","sSubSelectionVariant","iSuppressionBehavior","raiseErrorOnNull","raiseErrorOnUndefined","oMixedSelVar","mixAttributesAndSelectionVariant","fnOnContainerSave","setSemanticAttributes","setAppStateKey","open","oStoreInnerAppStatePromise","_getAppStateKeyAndUrlParameters","_mixAttributesToSelVariant","sPropertyName","vSemanticAttributeValue","Date","toJSON","toString","ignoreEmptyString","info","String","vSemanticAttributes","oNewSelVariant","filterUrl","getFilterContextUrl","setFilterContextUrl","contextUrl","getParameterContextUrl","setParameterContextUrl","forEach","aParameters","getSelectOption","getParameter","aSelOptionNames","aSelectOption","j","Sign","Option","Low","High","_ensureSelectionVariantFormatString","vSelectionVariant","vConvertedSelectionVariant","_fnHandleAppStatePromise","oReturn","_saveAppStateWithImmediateReturn","_fnSaveAppStateWithImmediateReturn","getKey","oAppDataForSave","_fetchAppDataForSave","setData","oSavePromise","save","tableVariantId","customData","presentationVariant","valueTexts","semanticDates","oAppDataClone","assign","createEmptyAppStateAsync","createEmptyAppState","oDeferred","getAppState","oAppDataLoaded","data","aMatches","exec","sNewIAppState","fnAppendToQueryParameter","sSubAppHash","test","replace","sNeedle","fnReplaceOldApproach","rOldApproach","mURLParameters","aSelectProperties","aSelectOptions","aParameterNames","sParameterValue","sErrorCode","setModel","oModel","_oModel","_getModel","getModel","_removeAllProperties","oData","_removeProperties","aFilterName","aParameterName","sName","SelectOptions","some","oValue","nIdx","PropertyName","splice","Texts","oTexts","PropertyTexts","Dates","oDates","Parameters","_isTermTrue","oProperty","sTerm","fIsTermDefaultTrue","oTerm","Bool","_isExcludedFromNavigationContext","_isPotentiallySensitive","_isMeasureProperty","_isToBeExcluded","constructContextUrl","sEntitySetName","_constructContextUrl","sServerUrl","isA","_getServerUrl","oServiceURI","sServiceUrl","absoluteTo","document","baseURI","lastIndexOf","substr","oAdaptedData","FilterContextUrl","ParameterContextUrl","aSensitiveFilterName","aSensitiveParameterName","oEntitySet","oEntityDef","oSubEntityDef","oEndRole","aFilterContextPart","aParamContextPart","oMetaModel","getMetaModel","getServiceMetadata","split","getODataEntitySet","getODataEntityType","entityType","property","push","name","navigationProperty","getODataAssociationEnd","type","multiplicity","_removeSensitiveDataForODataV4","_removeMeasureBasedProperties","aMeasureFilterName","aMeasureParameterName","bMeasure","_aFilterContextPart","oSV","getObject","sEntitySet","aPropertyNames","getPropertyNames","fnIsSensitiveData","sProp","esName","aPropertyAnnotations","_checkPropertyAnnotationsForSensitiveData","oFieldControl","k","sProperty","getIAppStateKey","NavigationHandlerUI5Class"],"sources":["NavigationHandler-dbg.js"],"mappings":"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","sourceRoot":""}},{"offset":{"line":2297,"column":0},"map":{"version":3,"names":["PresentationVariant","presentationVariant","id","undefined","parseFromString","parseFromObject","NavError","getID","setID","setText","newText","text","getText","setContextUrl","url","ctxUrl","getContextUrl","isEmpty","Object","keys","getTableVisualization","length","getChartVisualization","getProperties","setProperties","properties","assign","setTableVisualization","visTable","setChartVisualization","visChart","toJSONObject","externalPresentationVariant","Version","Major","Minor","Patch","PresentationVariantID","ContextUrl","Text","serializeProperties","serializeVisualizations","toJSONString","JSON","stringify","Visualizations","push","jsonString","parse","input","Log","warning","inputCopy","parseVisualizations","visualizations","Array","isArray","visualization","Type","indexOf","BaseObject","UI5Class","extend","prototype"],"sourceRoot":"","sources":["PresentationVariant.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport BaseObject from \"sap/ui/base/Object\";\nimport NavError from \"./NavError\";\n\n/**\n * Structure of a visualization object.\n */\nexport interface Visualization {\n\t[key: string]: unknown;\n\tType?: string;\n}\n\n/**\n * Structure of the external plain object representation of a PresentationVariant\n */\nexport interface ExternalPresentationVariant {\n\t[key: string]: unknown;\n\tPresentationVariantID: string;\n\tVersion?: {\n\t\tMajor: string;\n\t\tMinor: string;\n\t\tPatch: string;\n\t};\n\tText?: string;\n\tContextUrl?: string;\n\tVisualizations?: Visualization[];\n}\n\n/**\n * This is the successor of {@link sap.ui.generic.app.navigation.service.PresentationVariant}.<br> Creates a new instance of a PresentationVariant class. If no parameter is passed, an new empty instance is created whose ID has been set to <code>\"\"</code>. Passing a JSON-serialized string complying to the Selection Variant Specification will parse it, and the newly created instance will contain the same information.\n *\n * @public\n * @name sap.fe.navigation.PresentationVariant\n * @class This is the successor of {@link sap.ui.generic.app.navigation.service.PresentationVariant}.\n * @extends sap.ui.base.Object\n * @since 1.83.0\n */\nexport class PresentationVariant extends BaseObject {\n\tprivate id: string;\n\n\tprivate text?: string;\n\n\tprivate ctxUrl?: string;\n\n\tprivate properties?: object;\n\n\tprivate visTable?: Visualization;\n\n\tprivate visChart?: Visualization;\n\n\t/**\n\t * If no parameter is passed, a new empty instance is created whose ID has been set to <code>\"\"</code>.\n\t * Passing a JSON-serialized string complying to the Selection Variant Specification will parse it,\n\t * and the newly created instance will contain the same information.\n\t *\n\t * @param presentationVariant If of type <code>string</code>, the selection variant is JSON-formatted;\n\t * if of type <code>object</code>, the object represents a selection variant\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>PresentationVariant.INVALID_INPUT_TYPE</td><td>Indicates that the data format of the selection variant provided is inconsistent</td></tr>\n\t * <tr><td>PresentationVariant.UNABLE_TO_PARSE_INPUT</td><td>Indicates that the provided string is not a JSON-formatted string</td></tr>\n\t * <tr><td>PresentationVariant.INPUT_DOES_NOT_CONTAIN_SELECTIONVARIANT_ID</td><td>Indicates that the PresentationVariantID cannot be retrieved</td></tr>\n\t * <tr><td>PresentationVariant.PARAMETER_WITHOUT_VALUE</td><td>Indicates that there was an attempt to specify a parameter, but without providing any value (not even an empty value)</td></tr>\n\t * <tr><td>PresentationVariant.SELECT_OPTION_WITHOUT_PROPERTY_NAME</td><td>Indicates that a selection option has been defined, but the Ranges definition is missing</td></tr>\n\t * <tr><td>PresentationVariant.SELECT_OPTION_RANGES_NOT_ARRAY</td><td>Indicates that the Ranges definition is not an array</td></tr>\n\t * </table>\n\t * These exceptions can only be thrown if the parameter <code>vPresentationVariant</code> has been provided.\n\t */\n\tpublic constructor(presentationVariant?: string | object) {\n\t\tsuper();\n\t\tthis.id = \"\";\n\n\t\tif (presentationVariant !== undefined) {\n\t\t\tif (typeof presentationVariant === \"string\") {\n\t\t\t\tthis.parseFromString(presentationVariant);\n\t\t\t} else if (typeof presentationVariant === \"object\") {\n\t\t\t\tthis.parseFromObject(presentationVariant);\n\t\t\t} else {\n\t\t\t\tthrow new NavError(\"PresentationVariant.INVALID_INPUT_TYPE\");\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns the identification of the selection variant.\n\t *\n\t * @returns The identification of the selection variant as made available during construction\n\t * @public\n\t */\n\tpublic getID() {\n\t\treturn this.id;\n\t}\n\n\t/**\n\t * Sets the identification of the selection variant.\n\t *\n\t * @param id The new identification of the selection variant\n\t * @public\n\t */\n\tsetID(id: string) {\n\t\tthis.id = id;\n\t}\n\n\t/**\n\t * Sets the text / description of the selection variant.\n\t *\n\t * @param newText The new description to be used\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>PresentationVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * </table>\n\t */\n\tsetText(newText?: string) {\n\t\tif (typeof newText !== \"string\") {\n\t\t\tthrow new NavError(\"PresentationVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tthis.text = newText;\n\t}\n\n\t/**\n\t * Returns the current text / description of this selection variant.\n\t *\n\t * @returns The current description of this selection variant.\n\t * @public\n\t */\n\tgetText() {\n\t\treturn this.text;\n\t}\n\n\t/**\n\t * Sets the context URL.\n\t *\n\t * @param url The URL of the context\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>PresentationVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * </table>\n\t */\n\tsetContextUrl(url: string) {\n\t\tif (typeof url !== \"string\") {\n\t\t\tthrow new NavError(\"PresentationVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tthis.ctxUrl = url;\n\t}\n\n\t/**\n\t * Gets the current context URL intended for the query.\n\t *\n\t * @returns The current context URL for the query\n\t * @public\n\t */\n\tgetContextUrl() {\n\t\treturn this.ctxUrl;\n\t}\n\n\t/**\n\t * Returns <code>true</code> if the presentation variant does not contain any properties.\n\t * nor ranges.\n\t *\n\t * @returns If set to <code>true</code> there are no current properties set; <code>false</code> otherwise.\n\t * @public\n\t */\n\tisEmpty() {\n\t\treturn (\n\t\t\tObject.keys(this.getTableVisualization() ?? {}).length === 0 &&\n\t\t\tObject.keys(this.getChartVisualization() ?? {}).length === 0 &&\n\t\t\tObject.keys(this.getProperties() ?? {}).length === 0\n\t\t);\n\t}\n\n\t/**\n\t * Sets the more trivial properties. Basically all properties with the exception of the Visualization.\n\t *\n\t * @param properties The properties to be used.\n\t * @public\n\t */\n\tsetProperties(properties: object) {\n\t\tthis.properties = Object.assign({}, properties);\n\t}\n\n\t/**\n\t * Gets the more trivial properties. Basically all properties with the exception of the Visualization.\n\t *\n\t * @returns The current properties.\n\t * @public\n\t */\n\tgetProperties() {\n\t\treturn this.properties;\n\t}\n\n\t/**\n\t * Sets the table visualization property.\n\t *\n\t * @param properties An object containing the properties to be used for the table visualization.\n\t * @public\n\t */\n\tsetTableVisualization(properties: Visualization) {\n\t\tthis.visTable = Object.assign({}, properties);\n\t}\n\n\t/**\n\t * Gets the table visualization property.\n\t *\n\t * @returns An object containing the properties to be used for the table visualization.\n\t * @public\n\t */\n\tgetTableVisualization() {\n\t\treturn this.visTable;\n\t}\n\n\t/**\n\t * Sets the chart visualization property.\n\t *\n\t * @param properties An object containing the properties to be used for the chart visualization.\n\t * @public\n\t */\n\tsetChartVisualization(properties: Visualization) {\n\t\tthis.visChart = Object.assign({}, properties);\n\t}\n\n\t/**\n\t * Gets the chart visualization property.\n\t *\n\t * @returns An object containing the properties to be used for the chart visualization.\n\t * @public\n\t */\n\tgetChartVisualization() {\n\t\treturn this.visChart;\n\t}\n\n\t/**\n\t * Returns the external representation of the selection variant as JSON object.\n\t *\n\t * @returns The external representation of this instance as a JSON object\n\t * @public\n\t */\n\ttoJSONObject() {\n\t\tconst externalPresentationVariant: ExternalPresentationVariant = {\n\t\t\tVersion: {\n\t\t\t\t// Version attributes are not part of the official specification,\n\t\t\t\tMajor: \"1\", // but could be helpful later for implementing a proper lifecycle/interoperability\n\t\t\t\tMinor: \"0\",\n\t\t\t\tPatch: \"0\"\n\t\t\t},\n\t\t\tPresentationVariantID: this.id\n\t\t};\n\n\t\tif (this.ctxUrl) {\n\t\t\texternalPresentationVariant.ContextUrl = this.ctxUrl;\n\t\t}\n\n\t\tif (this.text) {\n\t\t\texternalPresentationVariant.Text = this.text;\n\t\t} else {\n\t\t\texternalPresentationVariant.Text = \"Presentation Variant with ID \" + this.id;\n\t\t}\n\n\t\tthis.serializeProperties(externalPresentationVariant);\n\t\tthis.serializeVisualizations(externalPresentationVariant);\n\n\t\treturn externalPresentationVariant;\n\t}\n\n\t/**\n\t * Serializes this instance into a JSON-formatted string.\n\t *\n\t * @returns The JSON-formatted representation of this instance in stringified format\n\t * @public\n\t */\n\ttoJSONString() {\n\t\treturn JSON.stringify(this.toJSONObject());\n\t}\n\n\tprivate serializeProperties(externalPresentationVariant: ExternalPresentationVariant) {\n\t\tif (this.properties) {\n\t\t\tObject.assign(externalPresentationVariant, this.properties);\n\t\t}\n\t}\n\n\tprivate serializeVisualizations(externalPresentationVariant: ExternalPresentationVariant) {\n\t\tif (this.visTable) {\n\t\t\tif (!externalPresentationVariant.Visualizations) {\n\t\t\t\texternalPresentationVariant.Visualizations = [];\n\t\t\t}\n\t\t\texternalPresentationVariant.Visualizations.push(this.visTable);\n\t\t}\n\n\t\tif (this.visChart) {\n\t\t\tif (!externalPresentationVariant.Visualizations) {\n\t\t\t\texternalPresentationVariant.Visualizations = [];\n\t\t\t}\n\t\t\texternalPresentationVariant.Visualizations.push(this.visChart);\n\t\t}\n\t}\n\n\tprivate parseFromString(jsonString?: string) {\n\t\tif (jsonString === undefined) {\n\t\t\tthrow new NavError(\"PresentationVariant.UNABLE_TO_PARSE_INPUT\");\n\t\t}\n\n\t\tif (typeof jsonString !== \"string\") {\n\t\t\tthrow new NavError(\"PresentationVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\n\t\tthis.parseFromObject(JSON.parse(jsonString));\n\t}\n\n\tprivate parseFromObject(input: Partial<ExternalPresentationVariant>) {\n\t\tif (input.PresentationVariantID === undefined) {\n\t\t\t// Do not throw an error, but only write a warning into the log.\n\t\t\t// The PresentationVariantID is mandatory according to the specification document version 1.0,\n\t\t\t// but this document is not a universally valid standard.\n\t\t\t// It is said that the \"implementation of the SmartFilterBar\" may supersede the specification.\n\t\t\t// Thus, also allow an initial PresentationVariantID.\n\t\t\t//\t\tthrow new sap.fe.navigation.NavError(\"PresentationVariant.INPUT_DOES_NOT_CONTAIN_SELECTIONVARIANT_ID\");\n\t\t\tLog.warning(\"PresentationVariantID is not defined\");\n\t\t\tinput.PresentationVariantID = \"\";\n\t\t}\n\n\t\tconst inputCopy = Object.assign({}, input);\n\t\tdelete inputCopy.Version;\n\n\t\tthis.setID(input.PresentationVariantID);\n\t\tdelete inputCopy.PresentationVariantID;\n\n\t\tif (input.ContextUrl !== undefined && input.ContextUrl !== \"\") {\n\t\t\tthis.setContextUrl(input.ContextUrl);\n\t\t\tdelete input.ContextUrl;\n\t\t}\n\n\t\tif (input.Text !== undefined) {\n\t\t\tthis.setText(input.Text);\n\t\t\tdelete input.Text;\n\t\t}\n\n\t\tif (input.Visualizations) {\n\t\t\tthis.parseVisualizations(input.Visualizations);\n\t\t\tdelete inputCopy.Visualizations;\n\t\t}\n\n\t\tthis.setProperties(inputCopy);\n\t}\n\n\tprivate parseVisualizations(visualizations: Visualization[]) {\n\t\tif (!Array.isArray(visualizations)) {\n\t\t\tthrow new NavError(\"PresentationVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\n\t\tfor (const visualization of visualizations) {\n\t\t\tif (visualization?.Type && visualization.Type.indexOf(\"Chart\") >= 0) {\n\t\t\t\tthis.setChartVisualization(visualization);\n\t\t\t} else {\n\t\t\t\tthis.setTableVisualization(visualization);\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Exporting the class as properly typed UI5Class\nconst UI5Class = BaseObject.extend(\n\t\"sap.fe.navigation.PresentationVariant\",\n\tPresentationVariant.prototype as any\n) as typeof PresentationVariant;\ntype UI5Class = InstanceType<typeof PresentationVariant>;\nexport default UI5Class;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;;;;EA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EARA,IASaA,mBAAmB;IAAA;IAa/B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACC,6BAAmBC,mBAAqC,EAAE;MAAA;MACzD,8BAAO;MACP,MAAKC,EAAE,GAAG,EAAE;MAEZ,IAAID,mBAAmB,KAAKE,SAAS,EAAE;QACtC,IAAI,OAAOF,mBAAmB,KAAK,QAAQ,EAAE;UAC5C,MAAKG,eAAe,CAACH,mBAAmB,CAAC;QAC1C,CAAC,MAAM,IAAI,OAAOA,mBAAmB,KAAK,QAAQ,EAAE;UACnD,MAAKI,eAAe,CAACJ,mBAAmB,CAAC;QAC1C,CAAC,MAAM;UACN,MAAM,IAAIK,QAAQ,CAAC,wCAAwC,CAAC;QAC7D;MACD;MAAC;IACF;;IAEA;AACD;AACA;AACA;AACA;AACA;IALC;IAAA;IAAA,OAMOC,KAAK,GAAZ,iBAAe;MACd,OAAO,IAAI,CAACL,EAAE;IACf;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAM,KAAK,GAAL,eAAMN,EAAU,EAAE;MACjB,IAAI,CAACA,EAAE,GAAGA,EAAE;IACb;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAVC;IAAA,OAWAO,OAAO,GAAP,iBAAQC,OAAgB,EAAE;MACzB,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;QAChC,MAAM,IAAIJ,QAAQ,CAAC,wCAAwC,CAAC;MAC7D;MACA,IAAI,CAACK,IAAI,GAAGD,OAAO;IACpB;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAE,OAAO,GAAP,mBAAU;MACT,OAAO,IAAI,CAACD,IAAI;IACjB;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAVC;IAAA,OAWAE,aAAa,GAAb,uBAAcC,GAAW,EAAE;MAC1B,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;QAC5B,MAAM,IAAIR,QAAQ,CAAC,wCAAwC,CAAC;MAC7D;MACA,IAAI,CAACS,MAAM,GAAGD,GAAG;IAClB;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAE,aAAa,GAAb,yBAAgB;MACf,OAAO,IAAI,CAACD,MAAM;IACnB;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA,OANC;IAAA,OAOAE,OAAO,GAAP,mBAAU;MACT,OACCC,MAAM,CAACC,IAAI,CAAC,IAAI,CAACC,qBAAqB,EAAE,IAAI,CAAC,CAAC,CAAC,CAACC,MAAM,KAAK,CAAC,IAC5DH,MAAM,CAACC,IAAI,CAAC,IAAI,CAACG,qBAAqB,EAAE,IAAI,CAAC,CAAC,CAAC,CAACD,MAAM,KAAK,CAAC,IAC5DH,MAAM,CAACC,IAAI,CAAC,IAAI,CAACI,aAAa,EAAE,IAAI,CAAC,CAAC,CAAC,CAACF,MAAM,KAAK,CAAC;IAEtD;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAG,aAAa,GAAb,uBAAcC,UAAkB,EAAE;MACjC,IAAI,CAACA,UAAU,GAAGP,MAAM,CAACQ,MAAM,CAAC,CAAC,CAAC,EAAED,UAAU,CAAC;IAChD;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAF,aAAa,GAAb,yBAAgB;MACf,OAAO,IAAI,CAACE,UAAU;IACvB;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAE,qBAAqB,GAArB,+BAAsBF,UAAyB,EAAE;MAChD,IAAI,CAACG,QAAQ,GAAGV,MAAM,CAACQ,MAAM,CAAC,CAAC,CAAC,EAAED,UAAU,CAAC;IAC9C;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAL,qBAAqB,GAArB,iCAAwB;MACvB,OAAO,IAAI,CAACQ,QAAQ;IACrB;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAC,qBAAqB,GAArB,+BAAsBJ,UAAyB,EAAE;MAChD,IAAI,CAACK,QAAQ,GAAGZ,MAAM,CAACQ,MAAM,CAAC,CAAC,CAAC,EAAED,UAAU,CAAC;IAC9C;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAH,qBAAqB,GAArB,iCAAwB;MACvB,OAAO,IAAI,CAACQ,QAAQ;IACrB;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAC,YAAY,GAAZ,wBAAe;MACd,MAAMC,2BAAwD,GAAG;QAChEC,OAAO,EAAE;UACR;UACAC,KAAK,EAAE,GAAG;UAAE;UACZC,KAAK,EAAE,GAAG;UACVC,KAAK,EAAE;QACR,CAAC;QACDC,qBAAqB,EAAE,IAAI,CAACnC;MAC7B,CAAC;MAED,IAAI,IAAI,CAACa,MAAM,EAAE;QAChBiB,2BAA2B,CAACM,UAAU,GAAG,IAAI,CAACvB,MAAM;MACrD;MAEA,IAAI,IAAI,CAACJ,IAAI,EAAE;QACdqB,2BAA2B,CAACO,IAAI,GAAG,IAAI,CAAC5B,IAAI;MAC7C,CAAC,MAAM;QACNqB,2BAA2B,CAACO,IAAI,GAAG,+BAA+B,GAAG,IAAI,CAACrC,EAAE;MAC7E;MAEA,IAAI,CAACsC,mBAAmB,CAACR,2BAA2B,CAAC;MACrD,IAAI,CAACS,uBAAuB,CAACT,2BAA2B,CAAC;MAEzD,OAAOA,2BAA2B;IACnC;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA,OAMAU,YAAY,GAAZ,wBAAe;MACd,OAAOC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACb,YAAY,EAAE,CAAC;IAC3C,CAAC;IAAA,OAEOS,mBAAmB,GAA3B,6BAA4BR,2BAAwD,EAAE;MACrF,IAAI,IAAI,CAACP,UAAU,EAAE;QACpBP,MAAM,CAACQ,MAAM,CAACM,2BAA2B,EAAE,IAAI,CAACP,UAAU,CAAC;MAC5D;IACD,CAAC;IAAA,OAEOgB,uBAAuB,GAA/B,iCAAgCT,2BAAwD,EAAE;MACzF,IAAI,IAAI,CAACJ,QAAQ,EAAE;QAClB,IAAI,CAACI,2BAA2B,CAACa,cAAc,EAAE;UAChDb,2BAA2B,CAACa,cAAc,GAAG,EAAE;QAChD;QACAb,2BAA2B,CAACa,cAAc,CAACC,IAAI,CAAC,IAAI,CAAClB,QAAQ,CAAC;MAC/D;MAEA,IAAI,IAAI,CAACE,QAAQ,EAAE;QAClB,IAAI,CAACE,2BAA2B,CAACa,cAAc,EAAE;UAChDb,2BAA2B,CAACa,cAAc,GAAG,EAAE;QAChD;QACAb,2BAA2B,CAACa,cAAc,CAACC,IAAI,CAAC,IAAI,CAAChB,QAAQ,CAAC;MAC/D;IACD,CAAC;IAAA,OAEO1B,eAAe,GAAvB,yBAAwB2C,UAAmB,EAAE;MAC5C,IAAIA,UAAU,KAAK5C,SAAS,EAAE;QAC7B,MAAM,IAAIG,QAAQ,CAAC,2CAA2C,CAAC;MAChE;MAEA,IAAI,OAAOyC,UAAU,KAAK,QAAQ,EAAE;QACnC,MAAM,IAAIzC,QAAQ,CAAC,wCAAwC,CAAC;MAC7D;MAEA,IAAI,CAACD,eAAe,CAACsC,IAAI,CAACK,KAAK,CAACD,UAAU,CAAC,CAAC;IAC7C,CAAC;IAAA,OAEO1C,eAAe,GAAvB,yBAAwB4C,KAA2C,EAAE;MACpE,IAAIA,KAAK,CAACZ,qBAAqB,KAAKlC,SAAS,EAAE;QAC9C;QACA;QACA;QACA;QACA;QACA;QACA+C,GAAG,CAACC,OAAO,CAAC,sCAAsC,CAAC;QACnDF,KAAK,CAACZ,qBAAqB,GAAG,EAAE;MACjC;MAEA,MAAMe,SAAS,GAAGlC,MAAM,CAACQ,MAAM,CAAC,CAAC,CAAC,EAAEuB,KAAK,CAAC;MAC1C,OAAOG,SAAS,CAACnB,OAAO;MAExB,IAAI,CAACzB,KAAK,CAACyC,KAAK,CAACZ,qBAAqB,CAAC;MACvC,OAAOe,SAAS,CAACf,qBAAqB;MAEtC,IAAIY,KAAK,CAACX,UAAU,KAAKnC,SAAS,IAAI8C,KAAK,CAACX,UAAU,KAAK,EAAE,EAAE;QAC9D,IAAI,CAACzB,aAAa,CAACoC,KAAK,CAACX,UAAU,CAAC;QACpC,OAAOW,KAAK,CAACX,UAAU;MACxB;MAEA,IAAIW,KAAK,CAACV,IAAI,KAAKpC,SAAS,EAAE;QAC7B,IAAI,CAACM,OAAO,CAACwC,KAAK,CAACV,IAAI,CAAC;QACxB,OAAOU,KAAK,CAACV,IAAI;MAClB;MAEA,IAAIU,KAAK,CAACJ,cAAc,EAAE;QACzB,IAAI,CAACQ,mBAAmB,CAACJ,KAAK,CAACJ,cAAc,CAAC;QAC9C,OAAOO,SAAS,CAACP,cAAc;MAChC;MAEA,IAAI,CAACrB,aAAa,CAAC4B,SAAS,CAAC;IAC9B,CAAC;IAAA,OAEOC,mBAAmB,GAA3B,6BAA4BC,cAA+B,EAAE;MAC5D,IAAI,CAACC,KAAK,CAACC,OAAO,CAACF,cAAc,CAAC,EAAE;QACnC,MAAM,IAAIhD,QAAQ,CAAC,wCAAwC,CAAC;MAC7D;MAEA,KAAK,MAAMmD,aAAa,IAAIH,cAAc,EAAE;QAC3C,IAAIG,aAAa,aAAbA,aAAa,eAAbA,aAAa,CAAEC,IAAI,IAAID,aAAa,CAACC,IAAI,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;UACpE,IAAI,CAAC9B,qBAAqB,CAAC4B,aAAa,CAAC;QAC1C,CAAC,MAAM;UACN,IAAI,CAAC9B,qBAAqB,CAAC8B,aAAa,CAAC;QAC1C;MACD;IACD,CAAC;IAAA;EAAA,EAnUuCG,UAAU,GAsUnD;EAAA;EACA,MAAMC,QAAQ,GAAGD,UAAU,CAACE,MAAM,CACjC,uCAAuC,EACvC9D,mBAAmB,CAAC+D,SAAS,CACC;EAAC,OAEjBF,QAAQ;AAAA"}},{"offset":{"line":2616,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","BaseObject","NavError","_exports","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","PresentationVariant","_BaseObject","presentationVariant","_this","call","this","id","undefined","parseFromString","parseFromObject","_proto","getID","setID","setText","newText","text","getText","setContextUrl","url","ctxUrl","getContextUrl","isEmpty","keys","getTableVisualization","length","getChartVisualization","getProperties","setProperties","properties","assign","setTableVisualization","visTable","setChartVisualization","visChart","toJSONObject","externalPresentationVariant","Version","Major","Minor","Patch","PresentationVariantID","ContextUrl","Text","serializeProperties","serializeVisualizations","toJSONString","JSON","stringify","Visualizations","push","jsonString","parse","input","warning","inputCopy","parseVisualizations","visualizations","Array","isArray","visualization","Type","indexOf","UI5Class","extend"],"sources":["PresentationVariant-dbg.js"],"mappings":"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","sourceRoot":""}},{"offset":{"line":2621,"column":0},"map":{"version":3,"names":["VALIDATE_SIGN","RegExp","VALIDATE_OPTION","SelectionVariant","selectionVariant","id","parameters","selectOptions","undefined","parseFromString","parseFromObject","NavError","getID","setID","setText","newText","text","getText","setParameterContextUrl","sURL","parameterCtxUrl","getParameterContextUrl","getFilterContextUrl","filterCtxUrl","setFilterContextUrl","addParameter","sName","sValue","removeParameter","renameParameter","sNameOld","sNameNew","getParameter","getParameterNames","Object","keys","addSelectOption","sPropertyName","sSign","sOption","sLow","sHigh","sText","semanticDates","test","toUpperCase","oEntry","Sign","Option","Low","Text","High","SemanticDates","i","length","oExistingEntry","push","removeSelectOption","renameSelectOption","getSelectOption","oEntries","JSON","parse","stringify","getSelectOptionsPropertyNames","getPropertyNames","concat","massAddSelectOption","aSelectOptions","Array","isArray","oSelectOption","getValue","aValue","sParamValue","isEmpty","toJSONObject","oExternalSelectionVariant","Version","Major","Minor","Patch","SelectionVariantID","ParameterContextUrl","FilterContextUrl","determineODataFilterExpression","serializeParameters","serializeSelectOptions","toJSONString","ODataFilterExpression","Parameters","name","PropertyName","PropertyValue","SelectOptions","each","aEntries","Ranges","sJSONString","oInput","Log","warning","parseFromStringParameters","parseFromStringSelectOptions","parameter","option","range","BaseObject","UI5Class","extend","prototype"],"sourceRoot":"","sources":["SelectionVariant.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport each from \"sap/base/util/each\";\nimport BaseObject from \"sap/ui/base/Object\";\nimport NavError from \"./NavError\";\n\n/**\n * Object containing semanticDates filter information.\n */\nexport type SemanticDateConfiguration = {\n\t/**\n\t * Semantic Date Operator\n\t */\n\thigh: string | number | null;\n\n\t/**\n\t * the upper boundary of the interval for range operators\n\t */\n\tlow: string | number | null;\n\n\t/**\n\t * The single value or the lower boundary of the interval for range Operators\n\t */\n\toperator: string;\n};\n\n/**\n * Structure of a plain select option object.\n */\nexport interface SelectOption {\n\tSign: string;\n\tOption: string;\n\tLow: string;\n\tHigh?: string | null;\n\tText?: string;\n\tSemanticDates?: SemanticDateConfiguration;\n}\n\n/**\n * Structure of a JSON serialized SelectionOption\n */\nexport interface SerializedSelectOption {\n\tPropertyName: string;\n\tRanges?: SelectOption[];\n}\n\nexport interface SerializedParameter {\n\tPropertyName: string;\n\tPropertyValue: string;\n}\n\n/**\n * Structure of a JSON serialized SelectionVariant\n */\nexport interface SerializedSelectionVariant {\n\tVersion?: {\n\t\tMajor: string;\n\t\tMinor: string;\n\t\tPatch: string;\n\t};\n\tSelectionVariantID?: string;\n\tParameterContextUrl?: string;\n\tFilterContextUrl?: string;\n\tText?: string;\n\tParameters?: SerializedParameter[];\n\tSelectOptions?: SerializedSelectOption[];\n}\n\nconst VALIDATE_SIGN = new RegExp(\"[E|I]\");\nconst VALIDATE_OPTION = new RegExp(\"EQ|NE|LE|GE|LT|GT|BT|CP\");\n\n/**\n * @public\n * @name sap.fe.navigation.SelectionVariant\n * @class\n * This is the successor of {@link sap.ui.generic.app.navigation.service.SelectionVariant}.<br>\n * Creates a new instance of a SelectionVariant class. If no parameter is passed,\n * an new empty instance is created whose ID has been set to <code>\"\"</code>.\n * Passing a JSON-serialized string complying to the Selection Variant Specification will parse it,\n * and the newly created instance will contain the same information.\n * @extends sap.ui.base.Object\n * @since 1.83.0\n * @param {string|object} [vSelectionVariant] If of type <code>string</code>, the selection variant is JSON-formatted;\n * if of type <code>object</code>, the object represents a selection variant\n * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n * <table>\n * <tr><th>NavError code</th><th>Description</th></tr>\n * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that the data format of the selection variant provided is inconsistent</td></tr>\n * <tr><td>SelectionVariant.UNABLE_TO_PARSE_INPUT</td><td>Indicates that the provided string is not a JSON-formatted string</td></tr>\n * <tr><td>SelectionVariant.INPUT_DOES_NOT_CONTAIN_SELECTIONVARIANT_ID</td><td>Indicates that the SelectionVariantID cannot be retrieved</td></tr>\n * <tr><td>SelectionVariant.PARAMETER_WITHOUT_VALUE</td><td>Indicates that there was an attempt to specify a parameter, but without providing any value (not even an empty value)</td></tr>\n * <tr><td>SelectionVariant.SELECT_OPTION_WITHOUT_PROPERTY_NAME</td><td>Indicates that a selection option has been defined, but the Ranges definition is missing</td></tr>\n * <tr><td>SelectionVariant.SELECT_OPTION_RANGES_NOT_ARRAY</td><td>Indicates that the Ranges definition is not an array</td></tr>\n * </table>\n * These exceptions can only be thrown if the parameter <code>vSelectionVariant</code> has been provided.\n */\nexport class SelectionVariant extends BaseObject {\n\tprivate id: string = \"\";\n\n\tprivate parameters: Record<string, string> = {};\n\n\tprivate selectOptions: Record<string, any> = {};\n\n\tprivate text?: string;\n\n\tprivate parameterCtxUrl?: string;\n\n\tprivate filterCtxUrl?: string;\n\n\t/**\n\t * Creates an instance of a selection variant based on the optional serialized input.\n\t *\n\t * @param selectionVariant Serialized selection variant as string or object.\n\t */\n\tconstructor(selectionVariant?: string | SerializedSelectionVariant) {\n\t\tsuper();\n\n\t\tif (selectionVariant !== undefined) {\n\t\t\tif (typeof selectionVariant === \"string\") {\n\t\t\t\tthis.parseFromString(selectionVariant);\n\t\t\t} else if (typeof selectionVariant === \"object\") {\n\t\t\t\tthis.parseFromObject(selectionVariant);\n\t\t\t} else {\n\t\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns the identification of the selection variant.\n\t *\n\t * @public\n\t * @function getID\n\t * @memberof sap.fe.navigation.SelectionVariant.prototype\n\t * @returns {string} The identification of the selection variant as made available during construction\n\t */\n\tpublic getID() {\n\t\treturn this.id;\n\t}\n\n\t/**\n\t * Sets the identification of the selection variant.\n\t *\n\t * @param id The new identification of the selection variant\n\t * @public\n\t */\n\tsetID(id: string) {\n\t\tthis.id = id;\n\t}\n\n\t/**\n\t * Sets the text / description of the selection variant.\n\t *\n\t * @param newText The new description to be used\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>PresentationVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * </table>\n\t */\n\tsetText(newText?: string) {\n\t\tif (typeof newText !== \"string\") {\n\t\t\tthrow new NavError(\"PresentationVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tthis.text = newText;\n\t}\n\n\t/**\n\t * Returns the current text / description of this selection variant.\n\t *\n\t * @returns The current description of this selection variant.\n\t * @public\n\t */\n\tgetText() {\n\t\treturn this.text;\n\t}\n\n\t/**\n\t * Sets the context URL intended for the parameters.\n\t *\n\t * @param sURL The URL of the parameter context\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * </table>\n\t */\n\tsetParameterContextUrl(sURL: string) {\n\t\tif (typeof sURL !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tthis.parameterCtxUrl = sURL;\n\t}\n\n\t/**\n\t * Gets the current context URL intended for the parameters.\n\t *\n\t * @returns The current context URL for the parameters\n\t * @public\n\t */\n\tgetParameterContextUrl() {\n\t\treturn this.parameterCtxUrl;\n\t}\n\n\t/**\n\t * Gets the current context URL intended for the filters.\n\t *\n\t * @returns The current context URL for the filters\n\t * @public\n\t */\n\tgetFilterContextUrl() {\n\t\treturn this.filterCtxUrl;\n\t}\n\n\t/**\n\t * Sets the context URL intended for the filters.\n\t *\n\t * @param sURL The URL of the filters\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * </table>\n\t */\n\tsetFilterContextUrl(sURL: string) {\n\t\tif (typeof sURL !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tthis.filterCtxUrl = sURL;\n\t}\n\n\t/**\n\t * Sets the value of a parameter called <code>sName</code> to the new value <code>sValue</code>.\n\t * If the parameter has already been set before, its value is overwritten.\n\t *\n\t * @param sName The name of the parameter to be set; the <code>null</code> value is not allowed\n\t * @param sValue The value of the parameter to be set\n\t * @returns This instance to allow method chaining\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.PARAMETER_WITHOUT_NAME</td><td>Indicates that the name of the parameter has not been specified</td></tr>\n\t * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type or the value is set to <code>null</code></td></tr>\n\t * <tr><td>SelectionVariant.PARAMETER_SELOPT_COLLISION</td><td>Indicates that another SelectOption with the same name as the parameter already exists</td></tr>\n\t * </table>\n\t */\n\taddParameter(sName: string, sValue: string) {\n\t\t/*\n\t\t *  {string} sName The name of the parameter to be set; the <code>null</code> value is not allowed\n\t\t * (see specification \"Selection Variants for UI Navigation in Fiori\", section 2.4.2.1)\n\t\t */\n\t\tif (typeof sName !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tif (typeof sValue !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tif (sName === \"\") {\n\t\t\tthrow new NavError(\"SelectionVariant.PARAMETER_WITHOUT_NAME\");\n\t\t}\n\n\t\tif (this.selectOptions[sName]) {\n\t\t\tthrow new NavError(\"SelectionVariant.PARAMETER_SELOPT_COLLISION\");\n\t\t}\n\n\t\tthis.parameters[sName] = sValue;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Removes a parameter called <code>sName</code> from the selection variant.\n\t *\n\t * @param sName The name of the parameter to be removed\n\t * @returns This instance to allow method chaining\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.PARAMETER_WITHOUT_NAME</td><td>Indicates that name of the parameter has not been specified</td></tr>\n\t * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * </table>\n\t */\n\tremoveParameter(sName: string) {\n\t\tif (typeof sName !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tif (sName === \"\") {\n\t\t\tthrow new NavError(\"SelectionVariant.PARAMETER_WITHOUT_NAME\");\n\t\t}\n\n\t\tdelete this.parameters[sName];\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Renames a parameter called <code>sNameOld</code> to <code>sNameNew</code>. If a parameter or a select option with\n\t * the name <code>sNameNew</code> already exist, an error is thrown. If a parameter with the name <code>sNameOld</code>\n\t * does not exist, nothing is changed.\n\t *\n\t * @param sNameOld The current name of the parameter to be renamed\n\t * @param sNameNew The new name of the parameter\n\t * @returns This instance to allow method chaining\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.PARAMETER_WITHOUT_NAME</td><td>Indicates that the name of a parameter has not been specified</td></tr>\n\t * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * <tr><td>SelectionVariant.PARAMETER_SELOPT_COLLISION</td><td>Indicates that another select option with the same new name already exists</td></tr>\n\t * <tr><td>SelectionVariant.PARAMETER_COLLISION</td><td>Indicates that another parameter with the same new name already exists</td></tr>\n\t * </table>\n\t */\n\trenameParameter(sNameOld: string, sNameNew: string) {\n\t\tif (typeof sNameOld !== \"string\" || typeof sNameNew !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tif (sNameOld === \"\" || sNameNew === \"\") {\n\t\t\tthrow new NavError(\"SelectionVariant.PARAMETER_WITHOUT_NAME\");\n\t\t}\n\t\tif (this.parameters[sNameOld] !== undefined) {\n\t\t\tif (this.selectOptions[sNameNew]) {\n\t\t\t\tthrow new NavError(\"SelectionVariant.PARAMETER_SELOPT_COLLISION\");\n\t\t\t}\n\t\t\tif (this.parameters[sNameNew]) {\n\t\t\t\tthrow new NavError(\"SelectionVariant.PARAMETER_COLLISION\");\n\t\t\t}\n\t\t\tthis.parameters[sNameNew] = this.parameters[sNameOld];\n\t\t\tdelete this.parameters[sNameOld];\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns the value of the parameter called <code>sName</code> if it has been set.\n\t * If the parameter has never been set or has been removed, <code>undefined</code> is returned.\n\t *\n\t * @param sName The name of the parameter to be returned\n\t * @returns The value of parameter <code>sName</code>; returning the value <code>null</code> not possible\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * </table>\n\t */\n\tgetParameter(sName: string) {\n\t\tif (typeof sName !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\treturn this.parameters[sName];\n\t}\n\n\t/**\n\t * Returns the set of parameter names available in this selection variant.\n\t *\n\t * @returns The list of parameter names which are valid\n\t * @public\n\t */\n\tgetParameterNames(): string[] {\n\t\treturn Object.keys(this.parameters);\n\t}\n\n\t/**\n\t * Adds a new range to the list of select options for a given parameter.\n\t *\n\t * @param sPropertyName The name of the property for which the selection range is added\n\t * @param sSign The sign of the range (<b>I</b>nclude or <b>E</b>xclude)\n\t * @param sOption The option of the range (<b>EQ</b> for \"equals\", <b>NE</b> for \"not equals\",\n\t * <b>LE</b> for \"less or equals\", <b>GE</b> for \"greater or equals\", <b>LT</b> for \"less than\" (and not equals),\n\t * <b>GT</b> for \"greater than\" (and not equals), <b>BT</b> for \"between\", or <b>CP</b> for \"contains pattern\"\n\t * (ABAP-styled pattern matching with the asterisk as wildcard)\n\t * @param sLow The single value or the lower boundary of the interval; the <code>null</code> value is not allowed\n\t * @param sHigh Set only if sOption is <b>BT</b>: the upper boundary of the interval;\n\t * @param sText Text representing the SelectOption. This is an optional parameter. For an example in most Fiori applications if the text is not provided, it is fetched based on the ID.\n\t * must be <code>undefined</code> or <code>null</code> in all other cases\n\t * @param semanticDates Object containing semanticDates filter information\n\t * @returns This instance to allow method chaining.\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.INVALID_SIGN</td><td>Indicates that the 'sign' is an invalid expression</td></tr>\n\t * <tr><td>SelectionVariant.INVALID_OPTION</td><td>Indicates that the option is an invalid expression</td></tr>\n\t * <tr><td>SelectionVariant.HIGH_PROVIDED_THOUGH_NOT_ALLOWED</td><td>Indicates that the upper boundary has been specified, even though the option is not 'BT'</td></tr>\n\t * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type or the value is set to <code>null</code></td></tr>\n\t * <tr><td>SelectionVariant.INVALID_PROPERTY_NAME</td><td>Indicates that the property name is invalid, for example if it has not been specified</td></tr>\n\t * <tr><td>SelectionVariant.PARAMETER_SELOPT_COLLISION</td><td>Indicates that another parameter with the same name as the property name already exists</td></tr>\n\t * </table>\n\t */\n\taddSelectOption(\n\t\tsPropertyName: string,\n\t\tsSign: string,\n\t\tsOption: string,\n\t\tsLow: string,\n\t\tsHigh?: string | null,\n\t\tsText?: string,\n\t\tsemanticDates?: SemanticDateConfiguration\n\t) {\n\t\t/* {string} sLow The single value or the lower boundary of the interval; the <code>null</code> value is not allowed\n\t\t * (see specification \"Selection Variants for UI Navigation in Fiori\", section 2.4.2.1)\n\t\t */\n\t\tif (typeof sPropertyName !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tif (sPropertyName === \"\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_PROPERTY_NAME\");\n\t\t}\n\t\tif (typeof sSign !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tif (typeof sOption !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tif (typeof sLow !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tif (sOption === \"BT\" && typeof sHigh !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tif (!VALIDATE_SIGN.test(sSign.toUpperCase())) {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_SIGN\");\n\t\t}\n\n\t\tif (!VALIDATE_OPTION.test(sOption.toUpperCase())) {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_OPTION\");\n\t\t}\n\n\t\tif (this.parameters[sPropertyName]) {\n\t\t\tthrow new NavError(\"SelectionVariant.PARAMETER_SELOPT_COLLISION\");\n\t\t}\n\n\t\tif (sOption !== \"BT\") {\n\t\t\t// only \"Between\" has two parameters; for all others, sHigh may not be filled\n\t\t\tif (sHigh !== undefined && sHigh !== \"\" && sHigh !== null) {\n\t\t\t\tthrow new NavError(\"SelectionVariant.HIGH_PROVIDED_THOUGH_NOT_ALLOWED\");\n\t\t\t}\n\t\t}\n\n\t\t// check, if there's already an entry for this property\n\t\tif (this.selectOptions[sPropertyName] === undefined) {\n\t\t\t// if not, create a new set of entries\n\t\t\tthis.selectOptions[sPropertyName] = [];\n\t\t}\n\n\t\tconst oEntry: SelectOption = {\n\t\t\tSign: sSign.toUpperCase(),\n\t\t\tOption: sOption.toUpperCase(),\n\t\t\tLow: sLow\n\t\t};\n\n\t\tif (sText) {\n\t\t\t// Add Text property only in case it is passed by the consumer of the API.\n\t\t\t// Otherwise keep the structure as is.\n\t\t\toEntry.Text = sText;\n\t\t}\n\n\t\tif (sOption === \"BT\") {\n\t\t\toEntry.High = sHigh;\n\t\t} else {\n\t\t\toEntry.High = null; // Note this special case in the specification!\n\t\t\t// The specification requires that the \"High\" attribute is always\n\t\t\t// available. In case that no high value is necessary, yet the value\n\t\t\t// may not be empty, but needs to be set to \"null\"\n\t\t}\n\n\t\tif (semanticDates) {\n\t\t\t// Add SemanticDate property only in case it is passed, Otherwise keep the structure as is.\n\t\t\toEntry.SemanticDates = semanticDates;\n\t\t}\n\n\t\t//check if it is necessary to add select option\n\t\tfor (let i = 0; i < this.selectOptions[sPropertyName].length; i++) {\n\t\t\tconst oExistingEntry = this.selectOptions[sPropertyName][i];\n\t\t\tif (\n\t\t\t\toExistingEntry.Sign === oEntry.Sign &&\n\t\t\t\toExistingEntry.Option === oEntry.Option &&\n\t\t\t\toExistingEntry.Low === oEntry.Low &&\n\t\t\t\toExistingEntry.High === oEntry.High\n\t\t\t) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.selectOptions[sPropertyName].push(oEntry);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Removes a select option called <code>sName</code> from the selection variant.\n\t *\n\t * @param sName The name of the select option to be removed\n\t * @returns This instance to allow method chaining.\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.SELOPT_WITHOUT_NAME</td><td>Indicates that name of the select option has not been specified</td></tr>\n\t * <tr><td>SelectionVariant.SELOPT_WRONG_TYPE</td><td>Indicates that the name of the parameter <code>sName</code> has an invalid type</td></tr>\n\t * </table>\n\t */\n\tremoveSelectOption(sName: string) {\n\t\tif (typeof sName !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.SELOPT_WRONG_TYPE\");\n\t\t}\n\n\t\tif (sName === \"\") {\n\t\t\tthrow new NavError(\"SelectionVariant.SELOPT_WITHOUT_NAME\");\n\t\t}\n\n\t\tdelete this.selectOptions[sName];\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Renames a select option called <code>sNameOld</code> to <code>sNameNew</code>. If a select option or a parameter\n\t * with the name <code>sNameNew</code> already exist, an error is thrown. If a select option with the name <code>sNameOld</code>\n\t * does not exist, nothing is changed.\n\t *\n\t * @param sNameOld The current name of the select option property to be renamed\n\t * @param sNameNew The new name of the select option property\n\t * @returns This instance to allow method chaining\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.SELOPT_WITHOUT_NAME</td><td>Indicates that the name of a select option has not been specified</td></tr>\n\t * <tr><td>SelectionVariant.SELOPT_WRONG_TYPE</td><td>Indicates that a select option has an invalid type</td></tr>\n\t * <tr><td>SelectionVariant.PARAMETER_SELOPT_COLLISION</td><td>Indicates that another parameter with the same new name already exists</td></tr>\n\t * <tr><td>SelectionVariant.SELOPT_COLLISION</td><td>Indicates that another select option with the same new name already exists</td></tr>\n\t * </table>\n\t */\n\trenameSelectOption(sNameOld: string, sNameNew: string) {\n\t\tif (typeof sNameOld !== \"string\" || typeof sNameNew !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.SELOPT_WRONG_TYPE\");\n\t\t}\n\t\tif (sNameOld === \"\" || sNameNew === \"\") {\n\t\t\tthrow new NavError(\"SelectionVariant.SELOPT_WITHOUT_NAME\");\n\t\t}\n\t\tif (this.selectOptions[sNameOld] !== undefined) {\n\t\t\tif (this.selectOptions[sNameNew]) {\n\t\t\t\tthrow new NavError(\"SelectionVariant.SELOPT_COLLISION\");\n\t\t\t}\n\t\t\tif (this.parameters[sNameNew]) {\n\t\t\t\tthrow new NavError(\"SelectionVariant.PARAMETER_SELOPT_COLLISION\");\n\t\t\t}\n\t\t\tthis.selectOptions[sNameNew] = this.selectOptions[sNameOld];\n\t\t\tdelete this.selectOptions[sNameOld];\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns the set of select options/ranges available for a given property name.\n\t *\n\t * @param sPropertyName The name of the property for which the set of select options/ranges is returned\n\t * @returns If <code>sPropertyName</code> is an invalid name of a property or no range exists, <code>undefined</code>\n\t * is returned; otherwise, an immutable array of ranges is returned. Each entry of the array is an object with the\n\t * following properties:\n\t * <ul>\n\t * <li><code>Sign</code>: The sign of the range</li>\n\t * <li><code>Option</code>: The option of the range</li>\n\t * <li><code>Low</code>: The low value of the range; returning value <code>null</code> is not possible</li>\n\t * <li><code>High</code>: The high value of the range; if this value is not necessary, <code>null</code> is used</li>\n\t * </ul>\n\t * For further information about the meaning of the attributes, refer to method <code>addSelectOption</code>.\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * <tr><td>SelectionVariant.INVALID_PROPERTY_NAME</td><td>Indicates that the property name is invalid, for example, it has not been specified</td></tr>\n\t * </table>\n\t */\n\tgetSelectOption(sPropertyName: string): SelectOption[] | undefined {\n\t\tif (typeof sPropertyName !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\t\tif (sPropertyName === \"\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_PROPERTY_NAME\");\n\t\t}\n\n\t\tconst oEntries = this.selectOptions[sPropertyName];\n\t\tif (!oEntries) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn JSON.parse(JSON.stringify(oEntries)); // create an immutable clone of data to prevent obfuscation by caller.\n\t}\n\n\t/**\n\t * Returns the names of the properties available for this instance.\n\t *\n\t * @returns The list of property names available for this instance\n\t * @public\n\t */\n\tgetSelectOptionsPropertyNames() {\n\t\treturn Object.keys(this.selectOptions);\n\t}\n\n\t/**\n\t * Returns the names of the parameter and select option properties available for this instance.\n\t *\n\t * @returns The list of parameter and select option property names available for this instance\n\t * @public\n\t */\n\tgetPropertyNames() {\n\t\treturn this.getParameterNames().concat(this.getSelectOptionsPropertyNames());\n\t}\n\n\t/**\n\t * Adds a set of select options to the list of select options for a given parameter.\n\t *\n\t * @param sPropertyName The name of the property for which the set of select options is added\n\t * @param aSelectOptions Set of select options to be added\n\t * @returns This instance to allow method chaining\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * </table>\n\t * @public\n\t */\n\tmassAddSelectOption(sPropertyName: string, aSelectOptions: SelectOption[]) {\n\t\tif (!Array.isArray(aSelectOptions)) {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\n\t\tfor (let i = 0; i < aSelectOptions.length; i++) {\n\t\t\tconst oSelectOption = aSelectOptions[i];\n\t\t\tthis.addSelectOption(\n\t\t\t\tsPropertyName,\n\t\t\t\toSelectOption.Sign,\n\t\t\t\toSelectOption.Option,\n\t\t\t\toSelectOption.Low,\n\t\t\t\toSelectOption.High,\n\t\t\t\toSelectOption.Text,\n\t\t\t\toSelectOption.SemanticDates\n\t\t\t);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * First tries to retrieve the set of select options or ranges available for <code>sName</code> as the property name. If successful,\n\t * this array of selections is returned. If it fails, an attempt to find a parameter with the name <code>sName</code> is used. If the latter succeeds, the single value is converted to fit into an array of selections to make it\n\t * type compatible with ranges. This array is then returned. <br />\n\t * If neither a select option nor a parameter could be found, <code>undefined</code> is returned.\n\t *\n\t * @param sName The name of the attribute for which the value is retrieved\n\t * @returns The ranges in the select options for the specified property or a range-converted representation of a parameter is returned.\n\t * If both lookups fail, <code>undefined</code> is returned. <br />\n\t * The returned ranges have the format:\n\t * <ul>\n\t * <li><code>Sign</code>: The sign of the range</li>\n\t * <li><code>Option</code>: The option of the range</li>\n\t * <li><code>Low</code>: The low value of the range; returning the value <code>null</code> is not possible</li>\n\t * <li><code>High</code>: The high value of the range; if this value is not necessary, <code>null</code> (but does exist)</li>\n\t * </ul>\n\t * For further information on the meaning of the attributes, refer to method {@link #.addSelectOption addSelectOption}.\n\t * @public\n\t * @throws An instance of {@link sap.fe.navigation.NavError} in case of input errors. Valid error codes are:\n\t * <table>\n\t * <tr><th>NavError code</th><th>Description</th></tr>\n\t * <tr><td>SelectionVariant.INVALID_INPUT_TYPE</td><td>Indicates that an input parameter has an invalid type</td></tr>\n\t * <tr><td>SelectionVariant.INVALID_PROPERTY_NAME</td><td>Indicates that the property name is invalid, for example, it has not been specified</td></tr>\n\t * </table>\n\t */\n\tgetValue(sName: string) {\n\t\tlet aValue = this.getSelectOption(sName);\n\t\tif (aValue !== undefined) {\n\t\t\t// a range for the selection option is provided; so this is the leading one\n\t\t\treturn aValue;\n\t\t}\n\n\t\tconst sParamValue = this.getParameter(sName);\n\t\tif (sParamValue !== undefined) {\n\t\t\t// a parameter value has been provided; we need to convert it to the range format\n\t\t\taValue = [\n\t\t\t\t{\n\t\t\t\t\tSign: \"I\",\n\t\t\t\t\tOption: \"EQ\",\n\t\t\t\t\tLow: sParamValue,\n\t\t\t\t\tHigh: null\n\t\t\t\t}\n\t\t\t];\n\t\t\treturn aValue;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Returns <code>true</code> if the selection variant does neither contain parameters\n\t * nor ranges.\n\t *\n\t * @returns If set to <code>true</code>  there are no parameters and no select options available in\n\t * the selection variant; <code>false</code> otherwise.\n\t * @public\n\t */\n\tisEmpty() {\n\t\treturn this.getParameterNames().length === 0 && this.getSelectOptionsPropertyNames().length === 0;\n\t}\n\n\t/**\n\t * Returns the external representation of the selection variant as JSON object.\n\t *\n\t * @returns The external representation of this instance as a JSON object\n\t * @public\n\t */\n\ttoJSONObject() {\n\t\tconst oExternalSelectionVariant: SerializedSelectionVariant = {\n\t\t\tVersion: {\n\t\t\t\t// Version attributes are not part of the official specification,\n\t\t\t\tMajor: \"1\", // but could be helpful later for implementing a proper lifecycle/interoperability\n\t\t\t\tMinor: \"0\",\n\t\t\t\tPatch: \"0\"\n\t\t\t},\n\t\t\tSelectionVariantID: this.id\n\t\t};\n\n\t\tif (this.parameterCtxUrl) {\n\t\t\toExternalSelectionVariant.ParameterContextUrl = this.parameterCtxUrl;\n\t\t}\n\n\t\tif (this.filterCtxUrl) {\n\t\t\toExternalSelectionVariant.FilterContextUrl = this.filterCtxUrl;\n\t\t}\n\n\t\tif (this.text) {\n\t\t\toExternalSelectionVariant.Text = this.text;\n\t\t} else {\n\t\t\toExternalSelectionVariant.Text = \"Selection Variant with ID \" + this.id;\n\t\t}\n\n\t\tthis.determineODataFilterExpression(oExternalSelectionVariant);\n\n\t\tthis.serializeParameters(oExternalSelectionVariant);\n\t\tthis.serializeSelectOptions(oExternalSelectionVariant);\n\n\t\treturn oExternalSelectionVariant;\n\t}\n\n\t/**\n\t * Serializes this instance into a JSON-formatted string.\n\t *\n\t * @returns The JSON-formatted representation of this instance in stringified format\n\t * @public\n\t */\n\ttoJSONString() {\n\t\treturn JSON.stringify(this.toJSONObject());\n\t}\n\n\tprivate determineODataFilterExpression(oExternalSelectionVariant: any) {\n\t\t// TODO - specification does not indicate what is expected here in detail\n\t\toExternalSelectionVariant.ODataFilterExpression = \"\"; // not supported yet - it's allowed to be optional\n\t}\n\n\tprivate serializeParameters(oExternalSelectionVariant: SerializedSelectionVariant) {\n\t\t// Note: Parameters section is optional (see specification section 2.4.2.1)\n\t\toExternalSelectionVariant.Parameters = [];\n\t\tfor (const name in this.parameters) {\n\t\t\toExternalSelectionVariant.Parameters.push({\n\t\t\t\tPropertyName: name,\n\t\t\t\tPropertyValue: this.parameters[name]\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate serializeSelectOptions(oExternalSelectionVariant: any) {\n\t\tif (this.selectOptions.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\toExternalSelectionVariant.SelectOptions = [];\n\n\t\teach(this.selectOptions, function (sPropertyName: string, aEntries: unknown[]) {\n\t\t\tconst oSelectOption = {\n\t\t\t\tPropertyName: sPropertyName,\n\t\t\t\tRanges: aEntries\n\t\t\t};\n\n\t\t\toExternalSelectionVariant.SelectOptions.push(oSelectOption);\n\t\t});\n\t}\n\n\tprivate parseFromString(sJSONString: string) {\n\t\tif (sJSONString === undefined) {\n\t\t\tthrow new NavError(\"SelectionVariant.UNABLE_TO_PARSE_INPUT\");\n\t\t}\n\n\t\tif (typeof sJSONString !== \"string\") {\n\t\t\tthrow new NavError(\"SelectionVariant.INVALID_INPUT_TYPE\");\n\t\t}\n\n\t\tconst oInput = JSON.parse(sJSONString);\n\t\t// the input needs to be an JSON string by specification\n\n\t\tthis.parseFromObject(oInput);\n\t}\n\n\tprivate parseFromObject(oInput: SerializedSelectionVariant) {\n\t\tif (!oInput) {\n\t\t\toInput = {};\n\t\t}\n\t\tif (oInput.SelectionVariantID === undefined) {\n\t\t\t// Do not throw an error, but only write a warning into the log.\n\t\t\t// The SelectionVariantID is mandatory according to the specification document version 1.0,\n\t\t\t// but this document is not a universally valid standard.\n\t\t\t// It is said that the \"implementation of the SmartFilterBar\" may supersede the specification.\n\t\t\t// Thus, also allow an initial SelectionVariantID.\n\t\t\t//\t\tthrow new sap.fe.navigation.NavError(\"SelectionVariant.INPUT_DOES_NOT_CONTAIN_SELECTIONVARIANT_ID\");\n\t\t\tLog.warning(\"SelectionVariantID is not defined\");\n\t\t\toInput.SelectionVariantID = \"\";\n\t\t}\n\n\t\tthis.setID(oInput.SelectionVariantID);\n\n\t\tif (oInput.ParameterContextUrl !== undefined && oInput.ParameterContextUrl !== \"\") {\n\t\t\tthis.setParameterContextUrl(oInput.ParameterContextUrl);\n\t\t}\n\n\t\tif (oInput.FilterContextUrl !== undefined && oInput.FilterContextUrl !== \"\") {\n\t\t\tthis.setFilterContextUrl(oInput.FilterContextUrl);\n\t\t}\n\n\t\tif (oInput.Text !== undefined) {\n\t\t\tthis.setText(oInput.Text);\n\t\t}\n\n\t\t// note that ODataFilterExpression is ignored right now - not supported yet!\n\n\t\tif (oInput.Parameters) {\n\t\t\tthis.parseFromStringParameters(oInput.Parameters);\n\t\t}\n\n\t\tif (oInput.SelectOptions) {\n\t\t\tthis.parseFromStringSelectOptions(oInput.SelectOptions);\n\t\t}\n\t}\n\n\tprivate parseFromStringParameters(parameters: SerializedParameter[]) {\n\t\tfor (const parameter of parameters) {\n\t\t\tthis.addParameter(parameter.PropertyName, parameter.PropertyValue);\n\t\t}\n\t}\n\n\tprivate parseFromStringSelectOptions(selectOptions: SerializedSelectOption[]) {\n\t\tfor (const option of selectOptions) {\n\t\t\tif (option.Ranges) {\n\t\t\t\tif (!Array.isArray(option.Ranges)) {\n\t\t\t\t\tthrow new NavError(\"SelectionVariant.SELECT_OPTION_RANGES_NOT_ARRAY\");\n\t\t\t\t}\n\n\t\t\t\tfor (const range of option.Ranges) {\n\t\t\t\t\tthis.addSelectOption(\n\t\t\t\t\t\toption.PropertyName,\n\t\t\t\t\t\trange.Sign,\n\t\t\t\t\t\trange.Option,\n\t\t\t\t\t\trange.Low,\n\t\t\t\t\t\trange.High,\n\t\t\t\t\t\trange.Text,\n\t\t\t\t\t\trange.SemanticDates\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tLog.warning(\"Select Option object does not contain a Ranges entry; ignoring entry\");\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Exporting the class as properly typed UI5Class\nconst UI5Class = BaseObject.extend(\"sap.fe.navigation.SelectionVariant\", SelectionVariant.prototype as any) as typeof SelectionVariant;\ntype UI5Class = InstanceType<typeof SelectionVariant>;\nexport default UI5Class;\n"],"mappings":"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"}},{"offset":{"line":3366,"column":0},"map":{"version":3,"names":["sap","ui","define","Log","each","BaseObject","NavError","_exports","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","VALIDATE_SIGN","RegExp","VALIDATE_OPTION","SelectionVariant","_BaseObject","selectionVariant","_this","call","this","id","parameters","selectOptions","undefined","parseFromString","parseFromObject","_proto","getID","setID","setText","newText","text","getText","setParameterContextUrl","sURL","parameterCtxUrl","getParameterContextUrl","getFilterContextUrl","filterCtxUrl","setFilterContextUrl","addParameter","sName","sValue","removeParameter","renameParameter","sNameOld","sNameNew","getParameter","getParameterNames","keys","addSelectOption","sPropertyName","sSign","sOption","sLow","sHigh","sText","semanticDates","test","toUpperCase","oEntry","Sign","Option","Low","Text","High","SemanticDates","i","length","oExistingEntry","push","removeSelectOption","renameSelectOption","getSelectOption","oEntries","JSON","parse","stringify","getSelectOptionsPropertyNames","getPropertyNames","concat","massAddSelectOption","aSelectOptions","Array","isArray","oSelectOption","getValue","aValue","sParamValue","isEmpty","toJSONObject","oExternalSelectionVariant","Version","Major","Minor","Patch","SelectionVariantID","ParameterContextUrl","FilterContextUrl","determineODataFilterExpression","serializeParameters","serializeSelectOptions","toJSONString","ODataFilterExpression","Parameters","name","PropertyName","PropertyValue","SelectOptions","aEntries","Ranges","sJSONString","oInput","warning","parseFromStringParameters","parseFromStringSelectOptions","parameter","option","range","UI5Class","extend"],"sources":["SelectionVariant-dbg.js"],"mappings":"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","sourceRoot":""}},{"offset":{"line":3371,"column":0},"map":{"version":3,"names":["ParamHandlingMode","SelVarWins","URLParamWins","InsertInSelOpt","NavType","initial","URLParams","xAppState","iAppState","hybrid","SuppressionBehavior","standard","ignoreEmptyString","raiseErrorOnNull","raiseErrorOnUndefined","Mode","ODataV2","ODataV4","thisLib","Core","initLibrary","name","version","dependencies","types","interfaces","controls","elements","noLibraryCSS"],"sourceRoot":"","sources":["library.ts"],"sourcesContent":["import Core from \"sap/ui/core/Core\";\nimport \"sap/ui/core/library\";\n\nconst ParamHandlingMode = {\n\t/**\n\t * The conflict resolution favors the SelectionVariant over URL parameters\n\t *\n\t * @public\n\t */\n\tSelVarWins: \"SelVarWins\",\n\n\t/**\n\t * The conflict resolution favors the URL parameters over the SelectionVariant. Caution: In case of cross-app navigation\n\t * a navigation parameter value from the source app is overwritten by a default, if a default is maintained in the launchpad\n\t * designer for this parameter in the target app!\n\t *\n\t * @public\n\t */\n\tURLParamWins: \"URLParamWins\",\n\n\t/**\n\t * The conflict resolution adds URL parameters to the SelectionVariant\n\t *\n\t * @public\n\t */\n\tInsertInSelOpt: \"InsertInSelOpt\"\n} as const;\n\nconst NavType = {\n\t/**\n\t * Initial startup without any navigation or default parameters\n\t *\n\t * @public\n\t */\n\tinitial: \"initial\",\n\n\t/**\n\t * Basic cross-app navigation with URL parameters only (without sap-xapp-state) or initial start with default parameters\n\t *\n\t * @public\n\t */\n\tURLParams: \"URLParams\",\n\n\t/**\n\t * Cross-app navigation with sap-xapp-state parameter (and URL parameters), defaulted parameters may be added\n\t *\n\t * @public\n\t */\n\txAppState: \"xAppState\",\n\n\t/**\n\t * Back navigation with sap-iapp-state parameter\n\t *\n\t * @public\n\t */\n\tiAppState: \"iAppState\",\n\n\t/**\n\t * Passing iapp-state data within xapp state in addition to existing values\n\t *\n\t * @private\n\t */\n\thybrid: \"hybrid\"\n} as const;\n\nconst SuppressionBehavior = {\n\t/**\n\t * Standard suppression behavior: semantic attributes with a <code>null</code> or an <code>undefined</code> value are ignored,\n\t * the remaining attributes are mixed in to the selection variant\n\t *\n\t * @public\n\t */\n\tstandard: 0,\n\n\t/**\n\t * Semantic attributes with an empty string are ignored, the remaining attributes are mixed in to the selection variant.\n\t * Warning! Consider the impact on Boolean variable values!\n\t *\n\t * @public\n\t */\n\tignoreEmptyString: 1,\n\n\t/**\n\t * Semantic attributes with a <code>null</code> value lead to an {@link sap.fin.central.lib.error.Error error} of type NavigationHandler.INVALID_INPUT\n\t *\n\t * @public\n\t */\n\traiseErrorOnNull: 2,\n\n\t/**\n\t * Semantic attributes with an <code>undefined</code> value lead to an {@link sap.fin.central.lib.error.Error error} of type NavigationHandler.INVALID_INPUT\n\t *\n\t * @public\n\t */\n\traiseErrorOnUndefined: 4\n} as const;\n\nconst Mode = {\n\t/**\n\t * This is used for ODataV2 services to do some internal tasks like creation of appstate, removal of sensitive data etc.,\n\t *\n\t * @public\n\t */\n\tODataV2: \"ODataV2\",\n\n\t/**\n\t * This is used for ODataV4 services to do some internal tasks like creation of appstate, removal of sensitive data etc.,\n\t *\n\t * @public\n\t */\n\tODataV4: \"ODataV4\"\n} as const;\n\n/**\n * Common library for all cross-application navigation functions.\n *\n * @public\n * @name sap.fe.navigation\n * @namespace\n * @since 1.83.0\n */\nconst thisLib = Core.initLibrary({\n\tname: \"sap.fe.navigation\",\n\t// eslint-disable-next-line no-template-curly-in-string\n\tversion: \"${version}\",\n\tdependencies: [\"sap.ui.core\"],\n\ttypes: [\"sap.fe.navigation.NavType\", \"sap.fe.navigation.ParamHandlingMode\", \"sap.fe.navigation.SuppressionBehavior\"],\n\tinterfaces: [],\n\tcontrols: [],\n\telements: [],\n\tnoLibraryCSS: true\n}) as {\n\t[key: string]: unknown;\n\tParamHandlingMode: typeof ParamHandlingMode;\n\tNavType: typeof NavType;\n\tSuppressionBehavior: typeof SuppressionBehavior;\n\tMode: typeof Mode;\n};\n\n/**\n * This is the successor of {@link sap.ui.generic.app.navigation.service.ParamHandlingMode}.<br>\n * A static enumeration type which indicates the conflict resolution method when merging URL parameters into select options.\n *\n * @public\n * @name sap.fe.navigation.ParamHandlingMode\n * @enum {string}\n * @readonly\n * @since 1.83.0\n */\nthisLib.ParamHandlingMode = ParamHandlingMode;\n\n/**\n * This is the successor of {@link sap.ui.generic.app.navigation.service.NavType}.<br>\n * A static enumeration type which indicates the type of inbound navigation.\n *\n * @public\n * @name sap.fe.navigation.NavType\n * @enum {string}\n * @readonly\n * @since 1.83.0\n */\nthisLib.NavType = NavType;\n\n/**\n * This is the successor of {@link sap.ui.generic.app.navigation.service.SuppressionBehavior}.<br>\n * A static enumeration type which indicates whether semantic attributes with values <code>null</code>,\n * <code>undefined</code> or <code>\"\"</code> (empty string) shall be suppressed, before they are mixed in to the selection variant in the\n * method {@link sap.fe.navigation.NavigationHandler.mixAttributesAndSelectionVariant mixAttributesAndSelectionVariant}\n * of the {@link sap.fe.navigation.NavigationHandler NavigationHandler}.\n *\n * @public\n * @name sap.fe.navigation.SuppressionBehavior\n * @enum {string}\n * @readonly\n * @since 1.83.0\n */\nthisLib.SuppressionBehavior = SuppressionBehavior;\n\n/**\n * A static enumeration type which indicates the Odata version used for runnning the Navigation Handler.\n *\n * @public\n * @name sap.fe.navigation.Mode\n * @enum {string}\n * @readonly\n * @since 1.83.0\n */\nthisLib.Mode = Mode;\n\nexport default thisLib;\n"],"mappings":"AAAA;AAAA;AAAA;AAAA;;;;EAGA,MAAMA,iBAAiB,GAAG;IACzB;AACD;AACA;AACA;AACA;IACCC,UAAU,EAAE,YAAY;IAExB;AACD;AACA;AACA;AACA;AACA;AACA;IACCC,YAAY,EAAE,cAAc;IAE5B;AACD;AACA;AACA;AACA;IACCC,cAAc,EAAE;EACjB,CAAU;EAEV,MAAMC,OAAO,GAAG;IACf;AACD;AACA;AACA;AACA;IACCC,OAAO,EAAE,SAAS;IAElB;AACD;AACA;AACA;AACA;IACCC,SAAS,EAAE,WAAW;IAEtB;AACD;AACA;AACA;AACA;IACCC,SAAS,EAAE,WAAW;IAEtB;AACD;AACA;AACA;AACA;IACCC,SAAS,EAAE,WAAW;IAEtB;AACD;AACA;AACA;AACA;IACCC,MAAM,EAAE;EACT,CAAU;EAEV,MAAMC,mBAAmB,GAAG;IAC3B;AACD;AACA;AACA;AACA;AACA;IACCC,QAAQ,EAAE,CAAC;IAEX;AACD;AACA;AACA;AACA;AACA;IACCC,iBAAiB,EAAE,CAAC;IAEpB;AACD;AACA;AACA;AACA;IACCC,gBAAgB,EAAE,CAAC;IAEnB;AACD;AACA;AACA;AACA;IACCC,qBAAqB,EAAE;EACxB,CAAU;EAEV,MAAMC,IAAI,GAAG;IACZ;AACD;AACA;AACA;AACA;IACCC,OAAO,EAAE,SAAS;IAElB;AACD;AACA;AACA;AACA;IACCC,OAAO,EAAE;EACV,CAAU;;EAEV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,MAAMC,OAAO,GAAGC,IAAI,CAACC,WAAW,CAAC;IAChCC,IAAI,EAAE,mBAAmB;IACzB;IACAC,OAAO,EAAE,YAAY;IACrBC,YAAY,EAAE,CAAC,aAAa,CAAC;IAC7BC,KAAK,EAAE,CAAC,2BAA2B,EAAE,qCAAqC,EAAE,uCAAuC,CAAC;IACpHC,UAAU,EAAE,EAAE;IACdC,QAAQ,EAAE,EAAE;IACZC,QAAQ,EAAE,EAAE;IACZC,YAAY,EAAE;EACf,CAAC,CAMA;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAV,OAAO,CAAClB,iBAAiB,GAAGA,iBAAiB;;EAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAkB,OAAO,CAACd,OAAO,GAAGA,OAAO;;EAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAc,OAAO,CAACR,mBAAmB,GAAGA,mBAAmB;;EAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAQ,OAAO,CAACH,IAAI,GAAGA,IAAI;EAAC,OAELG,OAAO;AAAA"}},{"offset":{"line":3546,"column":0},"map":{"version":3,"names":["sap","ui","define","Core","_library","ParamHandlingMode","SelVarWins","URLParamWins","InsertInSelOpt","NavType","initial","URLParams","xAppState","iAppState","hybrid","SuppressionBehavior","standard","ignoreEmptyString","raiseErrorOnNull","raiseErrorOnUndefined","Mode","ODataV2","ODataV4","thisLib","initLibrary","name","version","dependencies","types","interfaces","controls","elements","noLibraryCSS"],"sources":["library-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,uCAAO,CAAC,mBAAoB,uBAAwB,SAAUC,EAAMC,GACzE,aAEA,MAAMC,EAAoB,CAMxBC,WAAY,aAQZC,aAAc,eAMdC,eAAgB,kBAElB,MAAMC,EAAU,CAMdC,QAAS,UAMTC,UAAW,YAMXC,UAAW,YAMXC,UAAW,YAMXC,OAAQ,UAEV,MAAMC,EAAsB,CAO1BC,SAAU,EAOVC,kBAAmB,EAMnBC,iBAAkB,EAMlBC,sBAAuB,GAEzB,MAAMC,EAAO,CAMXC,QAAS,UAMTC,QAAS,WAWX,MAAMC,EAAUpB,EAAKqB,YAAY,CAC/BC,KAAM,oBAENC,QAAS,aACTC,aAAc,CAAC,eACfC,MAAO,CAAC,4BAA6B,sCAAuC,yCAC5EC,WAAY,GACZC,SAAU,GACVC,SAAU,GACVC,aAAc,OAahBT,EAAQlB,kBAAoBA,EAY5BkB,EAAQd,QAAUA,EAelBc,EAAQR,oBAAsBA,EAW9BQ,EAAQH,KAAOA,EACf,OAAOG,CACT,EAAG","sourceRoot":""}},{"offset":{"line":3551,"column":0},"map":{"version":3,"sources":["library-preload.js?bundle-code-0"],"mappings":"AAAA;AACA","sourcesContent":["sap.ui.require.preload({\n"],"sourceRoot":""}}]}