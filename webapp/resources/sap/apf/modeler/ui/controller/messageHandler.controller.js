/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/m/Button","sap/m/Dialog","sap/m/library","sap/m/Link","sap/m/Text","sap/m/VBox","sap/m/MessageBox","sap/m/MessageToast","sap/ui/core/HTML","sap/ui/core/library","sap/ui/core/mvc/Controller","sap/ui/thirdparty/jquery","sap/base/security/encodeXML","sap/base/Log","sap/ui/Device"],function(e,t,s,a,i,n,o,r,c,g,l,jQuery,p,u,d){"use strict";var f=s.DialogType,w=s.FlexAlignItems,m=g.ValueState;var v;function y(e){var t=e.getMessage();while(e.getPrevious()){e=e.getPrevious();t=t+"\n"+e.getMessage()}return t}function x(e,t){var s=e.getView().getViewData();var a=s.getGenericExit("closeFatalErrorDialog");if(a){a(s,e,t)}else{window.history.go(-1)}}function h(e){o.error(e.getMessage(),{styleClass:d.system.desktop?"sapUiSizeCompact":""})}function M(e){o.information(e.getMessage(),{styleClass:d.system.desktop?"sapUiSizeCompact":""})}function b(e){r.show(e.getMessage(),{width:"20em"})}function C(s,a){var i=new t(s.createId("idShowDetailsDialog"),{contentWidth:jQuery(window).height()*.6+"px",contentHeight:jQuery(window).height()*.6+"px",title:v.getText("error"),type:f.Message,state:m.Error,content:new c({content:["<div><p> "+p(y(a))+"</p></div>"].join(""),sanitizeContent:true}),beginButton:new e({text:v.getText("close"),press:function(){i.close()}}),afterClose:function(){i.destroy()}}).addStyleClass("dialogContentPadding");i.setInitialFocus(i);i.open()}function D(s,o){var r=new t(s.createId("idFatalDialog"),{title:v.getText("error"),type:f.Message,state:m.Error,content:[new i({text:v.getText("fatalErrorMessage")}),new n({alignItems:w.End,items:[new a({text:v.getText("showDetailsLink"),press:function(){C(s,o)}})]})],beginButton:new e({text:v.getText("close"),press:function(){x(s,r)}}),afterClose:function(){r.destroy()}});r.setInitialFocus(r);r.open()}var T=l.extend("sap.apf.modeler.ui.controller.messageHandler",{onInit:function(){v=this.getView().getViewData()},showMessage:function(e){var t=this;var s=e.getSeverity();var a=sap.apf.core.constants.message.severity;switch(s){case a.fatal:D(t,e);break;case a.error:h(e);break;case a.success:b(e);break;case a.information:M(e);break;default:u.error("Error type not defined");break}}});return T},true);
//# sourceMappingURL=messageHandler.controller.js.map