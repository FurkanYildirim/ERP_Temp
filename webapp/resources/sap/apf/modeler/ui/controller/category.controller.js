/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
sap.ui.define(["sap/apf/modeler/ui/utils/textPoolHelper","sap/apf/modeler/ui/utils/nullObjectChecker","sap/apf/modeler/ui/utils/viewValidator","sap/ui/core/mvc/Controller"],function(e,t,a,i){"use strict";var n,o,r,l,s,d,g;var t=sap.apf.modeler.ui.utils.nullObjectChecker;function u(e){e.byId("idCategoryBasicData").setText(o("categoryData"));e.byId("idCategoryTitleLabel").setText(o("categoryTitle"));e.byId("idCategoryTitle").setPlaceholder(o("newCategory"));e.byId("idTotalStepsLabel").setText(o("totalSteps"))}function c(e){var a;if(n&&n.arguments&&n.arguments.categoryId){d=l.getCategory(n.arguments.categoryId)}if(!t.checkIsNotUndefined(d)){a=l.setCategory();d=l.getCategory(a);f(e)}}function f(e,t){var a={id:d.getId(),icon:"sap-icon://open-folder"};if(t){delete a.icon;a.name=t}e.getView().getViewData().updateSelectedNode(a)}function y(e,t){var a=o("category")+": "+t;e.getView().getViewData().updateTitleAndBreadCrumb(a)}function p(e){if(!t.checkIsNotNullOrUndefinedOrBlank(l.getCategory(n.arguments.categoryId))){return}if(t.checkIsNotNullOrUndefinedOrBlank(d.labelKey)&&s.get(d.labelKey)){e.byId("idCategoryTitle").setValue(s.get(d.labelKey).TextElementDescription)}else{e.byId("idCategoryTitle").setValue(d.getId())}}function I(e){var t=l.getCategoryStepAssignments(d.getId()).length;e.byId("idTotalSteps").setValue(t)}var T=i.extend("sap.apf.modeler.ui.controller.category",{onInit:function(){var e=this;var t=e.getView().getViewData();o=t.getText;n=t.oParams;r=t.oConfigurationHandler;s=r.getTextPool();l=t.oConfigurationEditor;if(!l){r.loadConfiguration(n.arguments.configId,function(e){l=e})}g=new sap.apf.modeler.ui.utils.ViewValidator(e.getView());u(e);c(e);e.setDetailData();g.addField("idCategoryTitle")},onAfterRendering:function(){if(this.getView().byId("idCategoryTitle").getValue().length===0){this.getView().byId("idCategoryTitle").focus()}},setDetailData:function(){var e=this;p(e);I(e)},handleChangeDetailValue:function(e){var a=this,i;var n=a.byId("idCategoryTitle").getValue().trim();var o=sap.apf.modeler.ui.utils.TranslationFormatMap.CATEGORY_TITLE;if(t.checkIsNotNullOrUndefinedOrBlank(n)){s.setTextAsPromise(n,o).done(function(e){i={labelKey:e};l.setCategory(i,d.getId());f(a,n);y(a,n);l.setIsUnsaved()})}else{l.setIsUnsaved()}},handleSuggestions:function(e){var t=sap.apf.modeler.ui.utils.TranslationFormatMap.CATEGORY_TITLE;var a=new sap.apf.modeler.ui.utils.SuggestionTextHandler(s);a.manageSuggestionTexts(e,t)},updateSubViewInstancesOnReset:function(e){l=e;d=l.getCategory(d.getId())},getValidationState:function(){return g.getValidationState()},onExit:function(){g=null}});return T},true);
//# sourceMappingURL=category.controller.js.map