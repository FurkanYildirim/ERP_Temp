sap.ui.define(["sap/apf/modeler/ui/controller/overwriteExistingConfiguration","sap/apf/modeler/ui/utils/nullObjectChecker","sap/apf/modeler/ui/utils/optionsValueModelBuilder","sap/ui/core/CustomData","sap/ui/core/Fragment","sap/ui/core/library","sap/ui/thirdparty/jquery"],function(e,t,i,o,a,n,jQuery){"use strict";var r=n.ValueState;var l,d,p;var t=sap.apf.modeler.ui.utils.nullObjectChecker;var i=sap.apf.modeler.ui.utils.optionsValueModelBuilder;function f(e){var t=l.getText;e.byId("idImportDeliveredContentDialog").setTitle(t("importDeliveredContent"));e.byId("idConfigLabel").setText(t("configuration"));e.byId("idAppConfigCombobox").setPlaceholder(t("configFileInputPlaceHolder"));e.byId("idImportOfConfig").setText(t("import"));e.byId("idCancelImportOfConfig").setText(t("cancel"))}function s(e){var t,o,a;o=l.readAllConfigurationsFromVendorLayer();o.then(function(o){a={applicationText:l.getText("application"),configurationText:l.getText("configuration")};o=[a].concat(o);t=i.prepareModel(o);var n=e.byId("idAppConfigCombobox");n.setModel(t);n.getItems()[0].setEnabled(false);e.byId("idImportDeliveredContentDialog").open()})}function u(e,t,i,n){var r=new o({value:{callbackOverwrite:t,callbackCreateNew:i}});p=sap.ui.xmlfragment("idOverwriteConfirmationFragment","sap.apf.modeler.ui.fragment.overwriteConfirmation",e);e.getView().addDependent(p);e.setOverwriteConfirmationDialogText(l.getText);p.removeAllCustomData();p.addCustomData(r);a.byId("idOverwriteConfirmationFragment","idNewConfigTitleInput").setValue(n);p.open()}function c(e){var t=e.byId("idImportDeliveredContentDialog");if(p&&p.isOpen()){e.handleCancelOfOverwriteDialog()}if(t&&t.isOpen()){e.handleCancelOfImportDialog()}}function g(e,i,o){var a=this;if(!t.checkIsNotUndefined(o)){d.fireEvent("updateAppListEvent");var n=l.createMessageObject({code:"11515"});l.putMessage(n)}else{var n=l.createMessageObject({code:"11502"});n.setPrevious(o);l.putMessage(n)}c(a)}return e.extend("sap.apf.modeler.ui.controller.importDeliveredContent",{onInit:function(){var e=this;l=e.getView().getViewData().oCoreApi;d=e.getView().getViewData().oParentControl;f(e);s(e)},handleChangeOfAppConfigTextField:function(){var e=this,t,i;i=e.byId("idAppConfigCombobox");t=i.getItems().filter(function(e){return e.getText()===i.getValue()});if(!t.length){jQuery(i).focus();jQuery(".appCofigCombo").find("input").focus();i.setValueState(r.Error)}},handleSelectionChangeOfAppConfigTextField:function(){var e=this;e.byId("idAppConfigCombobox").setValueState(r.None)},handleImportPress:function(){var e=this;var i=e.byId("idAppConfigCombobox");e.handleChangeOfAppConfigTextField();if(t.checkIsNotNullOrUndefinedOrBlank(i.getSelectedItem())){var o=i.getSelectedItem().data("value").split(".");var a=o[0];var n=o[1];l.importConfigurationFromVendorLayer(a,n,function(t,i,o){u(e,t,i,o)},g.bind(e))}},handleCancelOfImportDialog:function(){var e=this;e.getView().destroy()}})});
//# sourceMappingURL=importDeliveredContent.controller.js.map