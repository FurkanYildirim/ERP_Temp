/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
sap.ui.define(["sap/apf/utils/exportToGlobal","sap/m/Text","sap/ui/core/Fragment"],function(a,i,o){"use strict";var n,t={};var e=function(a){a.close()};var r=function(){var a=this.configListInstance;var i=this.callback;var o=function(i){a.configEditor.save(function(o,n,t){a.configId=o;a.configurationHandler.memorizeConfiguration(o);if(t===undefined){if(typeof i==="function"){i()}var e=a.oCoreApi.createMessageObject({code:"11513"});a.oCoreApi.putMessage(e)}else{var e=a.oCoreApi.createMessageObject({code:"11514"});a.oCoreApi.putMessage(e)}})};e(t.oConfirmNavigationDialog);if(typeof i.yes==="function"){i.yes(o)}};var g=function(){var a=this.configListInstance;var i=this.callback;e(t.oConfirmNavigationDialog);a.configurationHandler.resetConfiguration(a.configId);if(typeof i.no==="function"){i.no()}};var l=function(){var a=this.isValidationCheck;var i=this.callback;if(!a){e(t.oConfirmNavigationDialog)}else{e(t.oConfirmValidationDialog)}if(typeof i.cancel==="function"){i.cancel()}else if(typeof i.no==="function"&&a){i.no()}};var s=function(a,i){if(i==="naviagtionDialog"){o.byId("idMessageDialogFragment","idMessageDialog").setTitle(a.getText("warning"));o.byId("idMessageDialogFragment","idYesButton").setText(a.getText("yes"));o.byId("idMessageDialogFragment","idNoButton").setText(a.getText("no"));o.byId("idMessageDialogFragment","idCancelButton").setText(a.getText("cancel"))}else if(i==="validationDialog"){o.byId("idMandatoryValidationDialogFragement","idMandatoryValidationDialog").setTitle(a.getText("warning"));o.byId("idMandatoryValidationDialogFragement","idYesButton").setText(a.getText("yes"));o.byId("idMandatoryValidationDialogFragement","idNoButton").setText(a.getText("no"))}};var f=function(a,o,n){var e=a.oCoreApi;var f=e.getText("unsavedConfiguration");var d=Object.keys(o)[0];var c={handleNavigationWithSave:r,handleNavigationWithoutSave:g,handlePreventNavigation:l,configListInstance:a,callback:n};c[d]=o[d];t.oConfirmNavigationDialog=sap.ui.xmlfragment("idMessageDialogFragment","sap.apf.modeler.ui.fragment.unsavedDataConfirmationDialog",c);a.getView().addDependent(t.oConfirmNavigationDialog);s(e,"naviagtionDialog");var v=new i;v.setText(f);t.oConfirmNavigationDialog.removeAllContent();t.oConfirmNavigationDialog.addContent(v);t.oConfirmNavigationDialog.attachAfterClose(function(){t.oConfirmNavigationDialog.destroy()});t.oConfirmNavigationDialog.open()};var d=function(a,i){f(a,{isSwitchConfiguration:true},i)};var c=function(){var a=this.callback;e(t.oConfirmValidationDialog);if(typeof a.yes==="function"){a.yes()}};var v=function(a,o,n){var e=a.oCoreApi;var r=e.getText("mandatoryField");var g=Object.keys(o)[0];var f={handleValidationNavigation:c,handlePreventNavigation:l,configListInstance:a,callback:n};f[g]=o[g];t.oConfirmValidationDialog=sap.ui.xmlfragment("idMandatoryValidationDialogFragement","sap.apf.modeler.ui.fragment.mandatoryDialog",f);a.getView().addDependent(t.oConfirmValidationDialog);s(e,"validationDialog");var d=new i;d.setText(r);t.oConfirmValidationDialog.removeAllContent();t.oConfirmValidationDialog.addContent(d);t.oConfirmValidationDialog.attachAfterClose(function(){t.oConfirmValidationDialog.destroy()});t.oConfirmValidationDialog.open()};var u=function(a,i){v(a,{isValidationCheck:true},i)};var m=function(){return{throwLossOfDataPopup:d,throwMandatoryPopup:u}};var D={getInstance:function(){return n||(n=m())}};a("sap.apf.modeler.ui.utils.navigationHandler",D);return D});
//# sourceMappingURL=navigationHandler.js.map