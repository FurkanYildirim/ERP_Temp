/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/core/messageObject","sap/apf/utils/utils","sap/base/security/encodeURL","sap/ui/thirdparty/jquery"],function(e,t,r,jQuery){"use strict";var a={};a.getAbsolutePath=function(e){if(e.slice(-1)==="/"){return e}return e+"/"};a.getODataPath=function(e){var t=e.split("/");var r;var a=[];for(r=0;r<t.length;r++){if(t[r]!==""){a.push(t[r])}}var n="";var i=a.length-1;for(r=0;r<i;r++){n=n+"/"+a[r]}return n+"/"};a.addRelativeToAbsoluteURL=function(e,t){var r=e.split("/");var a=t.split("/");a.forEach(function(e){if(e===".."){r.pop()}else if(e!="."){r.push(e)}});return r.join("/")};a.getBaseURLOfComponent=function(e){var t=e.split(".");t.pop();var r=t.join("/");return sap.ui.require.toUrl(r)};a.getApfLocation=function(){return sap.ui.require.toUrl("sap/apf/")};a.generateOdataPath=function(e,a,n,i,s){var f=l(a,i);var u=n;var o=false;var p;for(p in f){if(!o){u+="(";o=true}else{u+=","}u+=p.toString()+"="+f[p]}if(o){u+=")/"}u+=s||"";return u;function l(){var s={};var f;var u;var o;var p;var l;f=a.getParameterEntitySetKeyProperties(n);if(f!==undefined){u=f.length}else{u=0}if(u>0){for(p=0;p<u;p++){if(i&&i instanceof sap.apf.core.utils.Filter){o=i.getFilterTermsForProperty(f[p].name);l=o[o.length-1]}if(l instanceof sap.apf.core.utils.FilterTerm){c(p,l.getValue())}else if(f[p].defaultValue){c(p,f[p].defaultValue)}else if(f[p].parameter!=="optional"){e.putMessage(e.createMessageObject({code:"5016",aParameters:[f[p].name]}))}}}return s;function c(e,a){var n;if(f[e].dataType.type==="Edm.String"){n=t.formatValue(a,f[e]);s[f[e].name]=r(n)}else if(f[e].dataType.type){n=t.formatValue(a,f[e]);if(typeof n==="string"){s[f[e].name]=r(n)}else{s[f[e].name]=n}}else if(typeof a==="string"){s[f[e].name]=r(t.escapeOdata(a))}else{s[f[e].name]=a}}}};a.getSelectString=function(e){var a="";e.forEach(function(n,i){a+=r(t.escapeOdata(n));if(i<e.length-1){a+=","}});return a};a.buildUri=function(e,t,n,i,s,f,u,o,p,l,c){var g="";g+=a.generateOdataPath(e,c,t,s,l);g=g+"?";g+=v(n);g+=d(i,p);g+=m(f,n);g+=y(u);g+=h(o);return g;function v(e){if(!e[0]){return""}var t="$select=";t+=a.getSelectString(e);return t}function d(e,t){if(!(e&&e instanceof sap.apf.core.utils.Filter)||e.isEmpty()){return""}var r=e.toUrlParam({formatValue:t});if(r===""||r==="()"){return""}return"&$filter="+r}function m(a,n){var i="";var s="";var f;if(!a){return""}switch(true){case Array.isArray(a):for(f=0;f<a.length;f++){s=u(a[f],n);if(i.length>0&&s.length>0){i+=","}i+=s}break;case jQuery.isPlainObject(a):i+=u(a,n);break;case typeof a==="string":i+=u({property:a},n);break;default:i="";break}if(i.length>0){return"&$orderby="+i}return"";function u(a,n){var i="";if(jQuery.inArray(a.property,n)>-1){i+=a.property;if(a.ascending===false){i+=" desc"}else{i+=" asc"}}else{e.putMessage(e.createMessageObject({code:"5019",aParameters:[t,a.property]}))}return r(i)}}function y(r){function a(r){var a,n;a=Object.getOwnPropertyNames(r);for(n=0;n<a.length;n++){if(a[n]!=="top"&&a[n]!=="skip"&&a[n]!=="inlineCount"){e.putMessage(e.createMessageObject({code:"5032",aParameters:[t,a[n]]}))}}}var n="";if(!r){return n}a(r);if(r.top){n+="&$top="+r.top}if(r.skip){n+="&$skip="+r.skip}if(r.inlineCount===true){n+="&$inlinecount=allpages"}return n}function h(e){if(!e){e="json"}return"&$format="+e}};return a},true);
//# sourceMappingURL=uriGenerator.js.map